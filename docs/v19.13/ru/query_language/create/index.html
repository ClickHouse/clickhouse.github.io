<!DOCTYPE html><html lang=ru data-version=v19.13 data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>CREATE - Документация ClickHouse v19.13</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="CREATE - Документация ClickHouse v19.13"><meta property=og:description content="CREATE DATABASE Создание базы данных db_name. CREATE DATABASE [IF NOT EXISTS] db_name [ON CLUSTER cluster] База данных -"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="CREATE - Документация ClickHouse v19.13"><meta name=description content="CREATE DATABASE Создание базы данных db_name. CREATE DATABASE [IF NOT EXISTS] db_name [ON CLUSTER cluster] База данных -"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> CREATE </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/query_language/create.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ru.svg alt=Русский title=Русский width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v19.13/en/query_language/create/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v19.13/zh/query_language/create/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v19.13/es/query_language/create/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v19.13/fr/query_language/create/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v19.13/ru/query_language/create/ class="dropdown-item disabled"> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v19.13/ja/query_language/create/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v19.13/fa/query_language/create/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Многостраничный или одностраничный"> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Многостраничная версия" title="Многостраничная версия"> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Одностраничная версия" title="Одностраничная версия"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Версия: <span class=text-light>v19.13</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ru/ class=dropdown-item> <span class=text-light>последняя</span> </a> <a href=/docs/v20.3/ru/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ru/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/ru/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ru/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ru/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ru/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ru/ class="dropdown-item disable">v19.13</a> <a href=/docs/v19.11/ru/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ru/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ru/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ru/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Введение class="nav-link text-light text-wrap dropdown-toggle px-0">Введение</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../introduction/distinctive_features/ title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a> <a href=../../introduction/features_considered_disadvantages/ title="Особенности ClickHouse, которые могут считаться недостатками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Особенности ClickHouse, которые могут считаться недостатками</a> <a href=../../introduction/performance/ title=Производительность class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a> <a href=../../introduction/ya_metrika_task/ title="Постановка задачи в Яндекс.Метрике" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Постановка задачи в Яндекс.Метрике</a> <a href=../../introduction/info/ title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title="Начало работы" class="nav-link text-light text-wrap dropdown-toggle px-0">Начало работы</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/ title="Установка и запуск" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка и запуск</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title="Тестовые наборы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Тестовые наборы данных</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a> <a href=../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting_started/example_datasets/criteo/ title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a> <a href=../../getting_started/example_datasets/star_schema/ title="Схема «Звезда»" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Схема «Звезда»</a> <a href=../../getting_started/example_datasets/metrica/ title="Данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные Яндекс.Метрики</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Интерфейсы class="nav-link text-light text-wrap dropdown-toggle px-0">Интерфейсы</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../interfaces/cli/ title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a> <a href=../../interfaces/tcp/ title="Нативный интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Нативный интерфейс (TCP)</a> <a href=../../interfaces/http/ title=HTTP-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a> <a href=../../interfaces/formats/ title="Форматы входных и выходных данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a> <a href=../../interfaces/jdbc/ title=JDBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a> <a href=../../interfaces/odbc/ title=ODBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a> <a href=#sidebar-sidebar-3-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-8 title="От сторонних разработчиков" class="nav-link text-light text-wrap dropdown-toggle px-0">От сторонних разработчиков</a> <div id=sidebar-sidebar-3-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/client_libraries/ title="Клиентские библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки</a> <a href=../../interfaces/third-party/integrations/ title=Интеграции class="nav-link text-light text-wrap d-inline-block w-100 px-0">Интеграции</a> <a href=../../interfaces/third-party/gui/ title="Визуальные интерфейсы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы</a> <a href=../../interfaces/third-party/proxy/ title=Прокси class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title="Типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Типы данных</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../data_types/boolean/ title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a> <a href=../../data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=../../data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-4-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-16 title="Вложенные структуры данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Вложенные структуры данных</a> <div id=sidebar-sidebar-4-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=#sidebar-sidebar-4-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-17 title="Служебные типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Служебные типы данных</a> <div id=sidebar-sidebar-4-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> </nav> </div> <a href=#sidebar-sidebar-4-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-18 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-4-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="Движки баз данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки баз данных</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../database_engines/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="Движки таблиц" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки таблиц</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title="Семейство MergeTree" class="nav-link text-light text-wrap dropdown-toggle px-0">Семейство MergeTree</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../operations/table_engines/replication/ title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a> <a href=../../operations/table_engines/custom_partitioning_key/ title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a> <a href=../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../operations/table_engines/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-6-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-3 title="Семейство Log" class="nav-link text-light text-wrap dropdown-toggle px-0">Семейство Log</a> <div id=sidebar-sidebar-6-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/log_family/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../operations/table_engines/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../operations/table_engines/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../operations/table_engines/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Интеграции class="nav-link text-light text-wrap dropdown-toggle px-0">Интеграции</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../operations/table_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title=Особые class="nav-link text-light text-wrap dropdown-toggle px-0">Особые</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../operations/table_engines/external_data/ title="Внешние данные" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные</a> <a href=../../operations/table_engines/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../operations/table_engines/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../operations/table_engines/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../operations/table_engines/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../operations/table_engines/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../operations/table_engines/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../operations/table_engines/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../operations/table_engines/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../operations/table_engines/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../operations/table_engines/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../operations/table_engines/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../operations/table_engines/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../operations/table_engines/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title="Справка по SQL" class="nav-link text-light text-wrap dropdown-toggle px-0">Справка по SQL</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../query_language/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../query_language/create/ title=CREATE class="nav-link text-white active text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../query_language/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../query_language/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../query_language/misc/ title="Прочие виды запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие виды запросов</a> <a href=#sidebar-sidebar-7-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-8 title=Функции class="nav-link text-light text-wrap dropdown-toggle px-0">Функции</a> <div id=sidebar-sidebar-7-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../query_language/functions/arithmetic_functions/ title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a> <a href=../../query_language/functions/comparison_functions/ title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a> <a href=../../query_language/functions/logical_functions/ title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a> <a href=../../query_language/functions/type_conversion_functions/ title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a> <a href=../../query_language/functions/date_time_functions/ title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a> <a href=../../query_language/functions/string_functions/ title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a> <a href=../../query_language/functions/string_search_functions/ title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a> <a href=../../query_language/functions/string_replace_functions/ title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a> <a href=../../query_language/functions/conditional_functions/ title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a> <a href=../../query_language/functions/math_functions/ title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a> <a href=../../query_language/functions/rounding_functions/ title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a> <a href=../../query_language/functions/array_functions/ title="Функции по работе с массивами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции по работе с массивами</a> <a href=../../query_language/functions/splitting_merging_functions/ title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a> <a href=../../query_language/functions/bit_functions/ title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a> <a href=../../query_language/functions/bitmap_functions/ title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a> <a href=../../query_language/functions/hash_functions/ title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a> <a href=../../query_language/functions/random_functions/ title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a> <a href=../../query_language/functions/uuid_functions/ title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a> <a href=../../query_language/functions/encoding_functions/ title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a> <a href=../../query_language/functions/url_functions/ title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a> <a href=../../query_language/functions/ip_address_functions/ title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a> <a href=../../query_language/functions/json_functions/ title="Функции для работы с JSON." class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с JSON.</a> <a href=../../query_language/functions/higher_order_functions/ title="Функции высшего порядка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции высшего порядка</a> <a href=../../query_language/functions/ext_dict_functions/ title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a> <a href=../../query_language/functions/ym_dict_functions/ title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a> <a href=../../query_language/functions/in_functions/ title="Функции для реализации оператора IN." class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN.</a> <a href=../../query_language/functions/array_join/ title="Функция arrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция arrayJoin</a> <a href=../../query_language/functions/geo/ title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a> <a href=../../query_language/functions/functions_for_nulls/ title="Функции c Nullable агрументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции c Nullable агрументами</a> <a href=../../query_language/functions/machine_learning_functions/ title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a> <a href=../../query_language/functions/other_functions/ title="Прочие функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие функции</a> </nav> </div> <a href=#sidebar-sidebar-7-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-9 title="Агрегатные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Агрегатные функции</a> <div id=sidebar-sidebar-7-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/agg_functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../query_language/agg_functions/reference/ title="Справочник функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справочник функций</a> <a href=../../query_language/agg_functions/combinators/ title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a> <a href=../../query_language/agg_functions/parametric_functions/ title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a> </nav> </div> <a href=#sidebar-sidebar-7-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-10 title="Табличные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Табличные функции</a> <div id=sidebar-sidebar-7-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/table_functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../query_language/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../query_language/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../query_language/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../query_language/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../query_language/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../query_language/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../query_language/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../query_language/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> </nav> </div> <a href=#sidebar-sidebar-7-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-11 title=Словари class="nav-link text-light text-wrap dropdown-toggle px-0">Словари</a> <div id=sidebar-sidebar-7-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/dicts/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-7-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-11-2 title="Внешние словари" class="nav-link text-light text-wrap dropdown-toggle px-0">Внешние словари</a> <div id=sidebar-sidebar-7-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/dicts/external_dicts/ title="Общее описание" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общее описание</a> <a href=../../query_language/dicts/external_dicts_dict/ title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a> <a href=../../query_language/dicts/external_dicts_dict_layout/ title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a> <a href=../../query_language/dicts/external_dicts_dict_lifetime/ title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a> <a href=../../query_language/dicts/external_dicts_dict_sources/ title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a> <a href=../../query_language/dicts/external_dicts_dict_structure/ title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a> </nav> </div> <a href=../../query_language/dicts/internal_dicts/ title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a> </nav> </div> <a href=../../query_language/operators/ title=Операторы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a> <a href=../../query_language/syntax/ title="Общий синтаксис" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общий синтаксис</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Эксплуатация class="nav-link text-light text-wrap dropdown-toggle px-0">Эксплуатация</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../operations/requirements/ title=Требования class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a> <a href=../../operations/monitoring/ title=Мониторинг class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a> <a href=../../operations/troubleshooting/ title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a> <a href=../../operations/tips/ title="Советы по эксплуатации" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Советы по эксплуатации</a> <a href=../../operations/update/ title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a> <a href=../../operations/access_rights/ title="Права доступа" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Права доступа</a> <a href=../../operations/backup/ title="Резервное копирование" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование</a> <a href=../../operations/configuration_files/ title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a> <a href=../../operations/quotas/ title=Квоты class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a> <a href=../../operations/system_tables/ title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap dropdown-toggle px-0">Конфигурационные параметры сервера</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_settings/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../operations/server_settings/settings/ title="Серверные настройки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Серверные настройки</a> </nav> </div> <a href=#sidebar-sidebar-8-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-13 title=Настройки class="nav-link text-light text-wrap dropdown-toggle px-0">Настройки</a> <div id=sidebar-sidebar-8-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../operations/settings/permissions_for_queries/ title="Разрешения на выполнение запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения на выполнение запросов</a> <a href=../../operations/settings/query_complexity/ title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a> <a href=../../operations/settings/settings/ title=Настройки class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a> <a href=../../operations/settings/constraints_on_settings/ title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a> <a href=../../operations/settings/settings_profiles/ title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a> <a href=../../operations/settings/settings_users/ title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a> </nav> </div> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Утилиты class="nav-link text-light text-wrap dropdown-toggle px-0">Утилиты</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utils/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../operations/utils/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utils/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/general/ title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Разработка class="nav-link text-light text-wrap dropdown-toggle px-0">Разработка</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/architecture/ title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a> <a href=../../development/build/ title="Как собрать ClickHouse на Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как собрать ClickHouse на Linux</a> <a href=../../development/build_osx/ title="Как собрать ClickHouse на Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как собрать ClickHouse на Mac OS X</a> <a href=../../development/style/ title="Как писать код на C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как писать код на C++</a> <a href=../../development/tests/ title="Как запустить тесты" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как запустить тесты</a> <a href=../../development/contrib/ title="Сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Сторонние библиотеки</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="Что нового" class="nav-link text-light text-wrap dropdown-toggle px-0">Что нового</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../changelog/ title=Changelog class="nav-link text-light text-wrap d-inline-block w-100 px-0">Changelog</a> <a href=../../security_changelog/ title="Security changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security changelog</a> <a href=../../roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> </nav> </div> <a href=../../single/clickhouse_ru.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF-версия title=PDF-версия height=24 class="d-block mr-1 float-left"><div>PDF-версия</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h2 id=create-database>CREATE DATABASE<a class=headerlink href=#create-database title="Permanent link">&para;</a></h2> <p>Создание базы данных db_name.</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>DATABASE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>db_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
</code></pre></div> <p><code>База данных</code> - это просто директория для таблиц.<br> Если написано <code>IF NOT EXISTS</code>, то запрос не будет возвращать ошибку, если база данных уже существует.</p> <h2 id=create-table-query>CREATE TABLE<a class=headerlink href=#create-table-query title="Permanent link">&para;</a></h2> <p>Запрос <code>CREATE TABLE</code> может иметь несколько форм.</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>]</span> <span class=p>[</span><span class=n>compression_codec</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>]</span> <span class=p>[</span><span class=n>compression_codec</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span>
</code></pre></div> <p>Создаёт таблицу с именем name в БД db или текущей БД, если db не указана, со структурой, указанной в скобках, и движком engine.<br> Структура таблицы представляет список описаний столбцов. Индексы, если поддерживаются движком, указываются в качестве параметров для движка таблицы.</p> <p>Описание столбца, это <code>name type</code>, в простейшем случае. Пример: <code>RegionID UInt32</code>.<br> Также могут быть указаны выражения для значений по умолчанию - смотрите ниже.</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=k>AS</span> <span class=p>[</span><span class=n>db2</span><span class=p>.]</span><span class=n>name2</span> <span class=p>[</span><span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span><span class=p>]</span>
</code></pre></div> <p>Создаёт таблицу с такой же структурой, как другая таблица. Можно указать другой движок для таблицы. Если движок не указан, то будет выбран такой же движок, как у таблицы <code>db2.name2</code>.</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=k>AS</span> <span class=n>table_fucntion</span><span class=p>()</span>
</code></pre></div> <p>Создаёт таблицу с такой же структурой и данными, как результат соотвествующей табличной функцией.</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span> <span class=k>AS</span> <span class=k>SELECT</span> <span class=p>...</span>
</code></pre></div> <p>Создаёт таблицу со структурой, как результат запроса <code>SELECT</code>, с движком engine, и заполняет её данными из SELECT-а.</p> <p>Во всех случаях, если указано <code>IF NOT EXISTS</code>, то запрос не будет возвращать ошибку, если таблица уже существует. В этом случае, запрос будет ничего не делать.</p> <p>После секции <code>ENGINE</code> в запросе могут использоваться и другие секции в зависимости от движка. Подробную документацию по созданию таблиц смотрите в описаниях <a href=../../operations/table_engines/#table_engines>движков</a>.</p> <h3 id=create-default-values>Значения по умолчанию<a class=headerlink href=#create-default-values title="Permanent link">&para;</a></h3> <p>В описании столбца, может быть указано выражение для значения по умолчанию, одного из следующих видов:<br> <code>DEFAULT expr</code>, <code>MATERIALIZED expr</code>, <code>ALIAS expr</code>.<br> Пример: <code>URLDomain String DEFAULT domain(URL)</code>.</p> <p>Если выражение для значения по умолчанию не указано, то в качестве значений по умолчанию будут использоваться нули для чисел, пустые строки для строк, пустые массивы для массивов, а также <code>0000-00-00</code> для дат и <code>0000-00-00 00:00:00</code> для дат с временем. NULL-ы не поддерживаются.</p> <p>В случае, если указано выражение по умолчанию, то указание типа столбца не обязательно. При отсутствии явно указанного типа, будет использован тип выражения по умолчанию. Пример: <code>EventDate DEFAULT toDate(EventTime)</code> - для столбца EventDate будет использован тип Date.</p> <p>При наличии явно указанного типа данных и выражения по умолчанию, это выражение будет приводиться к указанному типу с использованием функций приведения типа. Пример: <code>Hits UInt32 DEFAULT 0</code> - имеет такой же смысл, как <code>Hits UInt32 DEFAULT toUInt32(0)</code>.</p> <p>В качестве выражения для умолчания, может быть указано произвольное выражение от констант и столбцов таблицы. При создании и изменении структуры таблицы, проверяется, что выражения не содержат циклов. При INSERT-е проверяется разрешимость выражений - что все столбцы, из которых их можно вычислить, переданы.</p> <p><code>DEFAULT expr</code></p> <p>Обычное значение по умолчанию. Если в запросе INSERT не указан соответствующий столбец, то он будет заполнен путём вычисления соответствующего выражения.</p> <p><code>MATERIALIZED expr</code></p> <p>Материализованное выражение. Такой столбец не может быть указан при INSERT, то есть, он всегда вычисляется.<br> При INSERT без указания списка столбцов, такие столбцы не рассматриваются.<br> Также этот столбец не подставляется при использовании звёздочки в запросе SELECT. Это необходимо, чтобы сохранить инвариант, что дамп, полученный путём <code>SELECT *</code>, можно вставить обратно в таблицу INSERT-ом без указания списка столбцов.</p> <p><code>ALIAS expr</code></p> <p>Синоним. Такой столбец вообще не хранится в таблице.<br> Его значения не могут быть вставлены в таблицу, он не подставляется при использовании звёздочки в запросе SELECT.<br> Он может быть использован в SELECT-ах - в таком случае, во время разбора запроса, алиас раскрывается.</p> <p>При добавлении новых столбцов с помощью запроса ALTER, старые данные для этих столбцов не записываются. Вместо этого, при чтении старых данных, для которых отсутствуют значения новых столбцов, выполняется вычисление выражений по умолчанию на лету. При этом, если выполнение выражения требует использования других столбцов, не указанных в запросе, то эти столбцы будут дополнительно прочитаны, но только для тех блоков данных, для которых это необходимо.</p> <p>Если добавить в таблицу новый столбец, а через некоторое время изменить его выражение по умолчанию, то используемые значения для старых данных (для данных, где значения не хранились на диске) поменяются. Также заметим, что при выполнении фоновых слияний, данные для столбцов, отсутствующих в одном из сливаемых кусков, записываются в объединённый кусок.</p> <p>Отсутствует возможность задать значения по умолчанию для элементов вложенных структур данных.</p> <h3 id=vyrazhenie-dlia-ttl>Выражение для TTL<a class=headerlink href=#vyrazhenie-dlia-ttl title="Permanent link">&para;</a></h3> <p>Может быть указано только для таблиц семейства MergeTree. Выражение для указания времени хранения значений. Оно должно зависеть от стобца типа <code>Date</code> или <code>DateTime</code> и в качестве результата вычислять столбец типа <code>Date</code> или <code>DateTime</code>. Пример:<br> <code>TTL date + INTERVAL 1 DAY</code></p> <p>Нельзя указывать TTL для ключевых столбцов. Подробнее смотрите в <a href=../../operations/table_engines/mergetree/ >TTL для стоблцов и таблиц</a></p> <h2 id=formaty-szhatiia-dlia-kolonok>Форматы сжатия для колонок<a class=headerlink href=#formaty-szhatiia-dlia-kolonok title="Permanent link">&para;</a></h2> <p>Помимо сжатия для колонок по умолчанию, определяемого в <a href=../../operations/server_settings/settings/#compression>настройках сервера</a>,<br> существует возможность указать формат сжатия индивидуально для каждой колонки.</p> <p>Поддерживаемые форматы:</p> <ul> <li><code>NONE</code> - сжатие отсутствует</li> <li><code>LZ4</code></li> <li><code>LZ4HC(level)</code> - алгоритм сжатия LZ4_HC с указанным уровнем компрессии <code>level</code>.<br> Возможный диапазон значений <code>level</code>: [3, 12]. Значение по умолчанию: 9. Чем выше уровень, тем лучше сжатие, но тратится больше времени. Рекомендованный диапазон [4, 9].</li> <li><code>ZSTD(level)</code> - алгоритм сжатия ZSTD с указанным уровнем компрессии <code>level</code>. Возможный диапазон значений <code>level</code>: [1, 22]. Значение по умолчанию: 1.<br> Чем выше уровень, тем лучше сжатие, но тратится больше времени.</li> <li><code>Delta(delta_bytes)</code> - способ сжатия, при котором вместо числовых значений поля сохраняется разность между двумя соседними значениями. Значение <code>delta_bytes</code> - число байт для хранения дельты.<br> Возможные значения: 1, 2, 4, 8. Значение по умолчанию: если <code>sizeof(type)</code> равен 1, 2, 4, 8 - <code>sizeof(type)</code>, иначе - 1.</li> </ul> <p>Пример использования:</p> <div class=codehilite><pre><span></span><code><span class=err>CREATE TABLE codec_example</span>
<span class=err>(</span>
<span class=err>    dt Date CODEC(ZSTD), /* используется уровень сжатия по умолчанию */</span>
<span class=err>    ts DateTime CODEC(LZ4HC),</span>
<span class=err>    float_value Float32 CODEC(NONE),</span>
<span class=err>    double_value Float64 CODEC(LZ4HC(9))</span>
<span class=err>)</span>
<span class=err>ENGINE = MergeTree</span>
<span class=err>PARTITION BY tuple()</span>
<span class=err>ORDER BY dt</span>
</code></pre></div> <p>Кодеки могут комбинироваться между собой. Если для колонки указана своя последовательность кодеков, то общий табличный кодек не применяется (должен быть указан в последовательности принудительно, если нужен). В примере ниже - оптимизация для хранения timeseries метрик.<br> Как правило, значения одной и той же метрики <code>path</code> не сильно различаются между собой, и выгоднее использовать дельта-компрессию вместо записи всего числа:</p> <div class=codehilite><pre><span></span><code><span class=err>CREATE TABLE timeseries_example</span>
<span class=err>(</span>
<span class=err>    dt Date,</span>
<span class=err>    ts DateTime,</span>
<span class=err>    path String,</span>
<span class=err>    value Float32 CODEC(Delta, ZSTD)</span>
<span class=err>)</span>
<span class=err>ENGINE = MergeTree</span>
<span class=err>PARTITION BY dt</span>
<span class=err>ORDER BY (path, ts)</span>
</code></pre></div> <h2 id=vremennye-tablitsy>Временные таблицы<a class=headerlink href=#vremennye-tablitsy title="Permanent link">&para;</a></h2> <p>ClickHouse поддерживает временные таблицы со следующими характеристиками:</p> <ul> <li>временные таблицы исчезают после завершения сессии; в том числе, при обрыве соединения;</li> <li>Временная таблица использует только модуль памяти.</li> <li>Невозможно указать базу данных для временной таблицы. Временные таблицы создается вне баз данных.</li> <li>если временная таблица имеет то же имя, что и некоторая другая, то, при упоминании в запросе без указания БД, будет использована временная таблица;</li> <li>при распределённой обработке запроса, используемые в запросе временные таблицы, передаются на удалённые серверы.</li> </ul> <p>Чтобы создать временную таблицу, используйте следующий синтаксис:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TEMPORARY</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
<span class=p>)</span>
</code></pre></div> <p>В большинстве случаев, временные таблицы создаются не вручную, а при использовании внешних данных для запроса, или при распределённом <code>(GLOBAL) IN</code>. Подробнее см. соответствующие разделы</p> <h2 id=raspredelennye-ddl-zaprosy-sektsiia-on-cluster>Распределенные DDL запросы (секция ON CLUSTER)<a class=headerlink href=#raspredelennye-ddl-zaprosy-sektsiia-on-cluster title="Permanent link">&para;</a></h2> <p>Запросы <code>CREATE</code>, <code>DROP</code>, <code>ALTER</code>, <code>RENAME</code> поддерживают возможность распределенного выполнения на кластере.<br> Например, следующий запрос создает распределенную (Distributed) таблицу <code>all_hits</code> на каждом хосте в <code>cluster</code>:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>all_hits</span> <span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span> <span class=p>(</span><span class=n>p</span> <span class=nb>Date</span><span class=p>,</span> <span class=n>i</span> <span class=n>Int32</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Distributed</span><span class=p>(</span><span class=k>cluster</span><span class=p>,</span> <span class=k>default</span><span class=p>,</span> <span class=n>hits</span><span class=p>)</span>
</code></pre></div> <p>Для корректного выполнения таких запросов необходимо на каждом хосте иметь одинаковое определение кластера (для упрощения синхронизации конфигов можете использовать подстановки из ZooKeeper). Также необходимо подключение к ZooKeeper серверам.<br> Локальная версия запроса в конечном итоге будет выполнена на каждом хосте кластера, даже если некоторые хосты в данный момент не доступны. Гарантируется упорядоченность выполнения запросов в рамках одного хоста. Для реплицированных таблиц не поддерживаются запросы <code>ALTER</code>.</p> <h2 id=create-view>CREATE VIEW<a class=headerlink href=#create-view title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=p>[</span><span class=n>MATERIALIZED</span><span class=p>]</span> <span class=k>VIEW</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>TO</span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span><span class=p>]</span> <span class=p>[</span><span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span><span class=p>]</span> <span class=p>[</span><span class=n>POPULATE</span><span class=p>]</span> <span class=k>AS</span> <span class=k>SELECT</span> <span class=p>...</span>
</code></pre></div> <p>Создаёт представление. Представления бывают двух видов - обычные и материализованные (MATERIALIZED).</p> <p>Обычные представления не хранят никаких данных, а всего лишь производят чтение из другой таблицы. То есть, обычное представление - не более чем сохранённый запрос. При чтении из представления, этот сохранённый запрос, используется в качестве подзапроса в секции FROM.</p> <p>Для примера, пусть вы создали представление:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>VIEW</span> <span class=k>view</span> <span class=k>AS</span> <span class=k>SELECT</span> <span class=p>...</span>
</code></pre></div> <p>и написали запрос:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=k>c</span> <span class=k>FROM</span> <span class=k>view</span>
</code></pre></div> <p>Этот запрос полностью эквивалентен использованию подзапроса:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=k>c</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=p>...)</span>
</code></pre></div> <p>Материализованные (MATERIALIZED) представления хранят данные, преобразованные соответствующим запросом SELECT.</p> <p>При создании материализованного представления, нужно обязательно указать ENGINE - движок таблицы для хранения данных.</p> <p>Материализованное представление устроено следующим образом: при вставке данных в таблицу, указанную в SELECT-е, кусок вставляемых данных преобразуется этим запросом SELECT, и полученный результат вставляется в представление.</p> <p>Если указано POPULATE, то при создании представления, в него будут вставлены имеющиеся данные таблицы, как если бы был сделан запрос <code>CREATE TABLE ... AS SELECT ...</code> . Иначе, представление будет содержать только данные, вставляемые в таблицу после создания представления. Не рекомендуется использовать POPULATE, так как вставляемые в таблицу данные во время создания представления, не попадут в него.</p> <p>Запрос <code>SELECT</code> может содержать <code>DISTINCT</code>, <code>GROUP BY</code>, <code>ORDER BY</code>, <code>LIMIT</code>... Следует иметь ввиду, что соответствующие преобразования будут выполняться независимо, на каждый блок вставляемых данных. Например, при наличии <code>GROUP BY</code>, данные будут агрегироваться при вставке, но только в рамках одной пачки вставляемых данных. Далее, данные не будут доагрегированы. Исключение - использование ENGINE, производящего агрегацию данных самостоятельно, например, <code>SummingMergeTree</code>.</p> <p>Недоработано выполнение запросов <code>ALTER</code> над материализованными представлениями, поэтому они могут быть неудобными для использования. Если материализованное представление использует конструкцию <code>TO [db.]name</code>, то можно выполнить <code>DETACH</code> представления, <code>ALTER</code> для целевой таблицы и последующий <code>ATTACH</code> ранее отсоединенного (<code>DETACH</code>) представления.</p> <p>Представления выглядят так же, как обычные таблицы. Например, они перечисляются в результате запроса <code>SHOW TABLES</code>.</p> <p>Отсутствует отдельный запрос для удаления представлений. Чтобы удалить представление, следует использовать <code>DROP TABLE</code>.</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Собрано из <a href=https://github.com/ClickHouse/ClickHouse/commit/3166eab2dfc89323b9d756aeba6866381fd9c186 rel="external nofollow noreferrer" target=_blank class=text-reset>3166eab2df</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Cодержание</label> <a href=#create-database title="CREATE DATABASE" class="nav-link text-wrap d-inline-block w-100"> CREATE DATABASE </a> <a href=#create-table-query title="CREATE TABLE" class="nav-link text-wrap d-inline-block w-100"> CREATE TABLE </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#create-default-values title="Значения по умолчанию" class="nav-link text-wrap d-inline-block w-100"> Значения по умолчанию </a> <a href=#vyrazhenie-dlia-ttl title="Выражение для TTL" class="nav-link text-wrap d-inline-block w-100"> Выражение для TTL </a> </nav> <a href=#formaty-szhatiia-dlia-kolonok title="Форматы сжатия для колонок" class="nav-link text-wrap d-inline-block w-100"> Форматы сжатия для колонок </a> <a href=#vremennye-tablitsy title="Временные таблицы" class="nav-link text-wrap d-inline-block w-100"> Временные таблицы </a> <a href=#raspredelennye-ddl-zaprosy-sektsiia-on-cluster title="Распределенные DDL запросы (секция ON CLUSTER)" class="nav-link text-wrap d-inline-block w-100"> Распределенные DDL запросы (секция ON CLUSTER) </a> <a href=#create-view title="CREATE VIEW" class="nav-link text-wrap d-inline-block w-100"> CREATE VIEW </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=ru data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Тестирование ClickHouse - Документация ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Тестирование ClickHouse - Документация ClickHouse "><meta property=og:description content="Тестирование ClickHouse Функциональные пробы Функциональные тесты являются наиболее простыми и удобными в использовании."><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Тестирование ClickHouse - Документация ClickHouse "><meta name=description content="Тестирование ClickHouse Функциональные пробы Функциональные тесты являются наиболее простыми и удобными в использовании."><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Тестирование ClickHouse </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/development/tests.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ru.svg alt=Русский title=Русский width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/development/tests/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/development/tests/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/development/tests/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/development/tests/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/development/tests/ class="dropdown-item disabled"> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/development/tests/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/development/tests/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Многостраничный или одностраничный"> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Многостраничная версия" title="Многостраничная версия"> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Одностраничная версия" title="Одностраничная версия"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Версия: <span class=text-light>последняя</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ru/ class="dropdown-item disable"> <span class=text-light>последняя</span> </a> <a href=/docs/v20.3/ru/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ru/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/ru/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ru/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ru/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ru/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ru/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/ru/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ru/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ru/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ru/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../introduction/info/ title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a> <a href=../../introduction/history/ title="История ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">История ClickHouse</a> <a href=../../introduction/features_considered_disadvantages/ title="Особенности ClickHouse, которые могут считаться недостатками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Особенности ClickHouse, которые могут считаться недостатками</a> <a href=../../introduction/distinctive_features/ title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a> <a href=../../introduction/performance/ title=Производительность class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a> <a href=../../introduction/adopters/ title="Усыновители ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Усыновители ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title="Движки баз данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки баз данных</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/database_engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> <a href=../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/database_engines/ title="Движки баз данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки баз данных</a> </nav> </div> <a href=#sidebar-sidebar-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3 title="Движки таблиц" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки таблиц</a> <div id=sidebar-sidebar-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-2-3-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-1 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-2-3-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> <a href=../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a> <a href=../../engines/table_engines/mergetree_family/replication/ title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a> </nav> </div> <a href=#sidebar-sidebar-2-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-2 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-2-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../engines/table_engines/log_family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> <a href=../../engines/table_engines/log_family/log_family/ title="Семейство Log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Семейство Log</a> </nav> </div> <a href=#sidebar-sidebar-2-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-3 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-2-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> <a href=#sidebar-sidebar-2-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-4 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-2-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../engines/table_engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../engines/table_engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../engines/table_engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../engines/table_engines/special/file/ title=File(Format) class="nav-link text-light text-wrap d-inline-block w-100 px-0">File(Format)</a> <a href=../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> <a href=../../engines/table_engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../engines/table_engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../engines/table_engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../engines/table_engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../engines/table_engines/special/url/ title="URL(URL, Format)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL, Format)</a> <a href=../../engines/table_engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../engines/table_engines/special/external_data/ title="Внешние данные для обработки запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные для обработки запроса</a> </nav> </div> <a href=../../engines/table_engines/ title="Движки таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки таблиц</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../commercial/cloud/ title="Поставщики облачных услуг ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поставщики облачных услуг ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../whats_new/changelog/2017/ title="ClickHouse релиз 1.1.54327, 2017-12-21" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse релиз 1.1.54327, 2017-12-21</a> <a href=../../whats_new/changelog/2018/ title="ClickHouse релиз 18.16" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse релиз 18.16</a> <a href=../../whats_new/changelog/2019/ title="Релиз ClickHouse в19.17" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Релиз ClickHouse в19.17</a> </nav> </div> <a href=../../whats_new/roadmap/ title="Дорожная карта" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Дорожная карта</a> <a href=../../whats_new/security_changelog/ title="Исправлено в релизе 19.14.3.3, 2019-09-10" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Исправлено в релизе 19.14.3.3, 2019-09-10</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../faq/general/ title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a> </nav> </div> <a href=../../extended_roadmap/ title="Планы разработки ClickHouse 2020" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Планы разработки ClickHouse 2020</a> <a href=../../ title="Что такое ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Что такое ClickHouse</a> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Интерфейсы class="nav-link text-light text-wrap dropdown-toggle px-0">Интерфейсы</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-8-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-1 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-8-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../interfaces/third-party/integrations/ title="Библиотеки для интеграции от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Библиотеки для интеграции от сторонних разработчиков</a> <a href=../../interfaces/third-party/gui/ title="Визуальные интерфейсы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы от сторонних разработчиков</a> <a href=../../interfaces/third-party/client_libraries/ title="Клиентские библиотеки от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки от сторонних разработчиков</a> <a href=../../interfaces/third-party/proxy/ title="Прокси-серверы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси-серверы от сторонних разработчиков</a> </nav> </div> <a href=../../interfaces/cpp/ title="C++ клиентская библиотека" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ клиентская библиотека</a> <a href=../../interfaces/http/ title=HTTP-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a> <a href=../../interfaces/jdbc/ title=JDBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a> <a href=../../interfaces/mysql/ title=MySQL-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL-интерфейс</a> <a href=../../interfaces/odbc/ title=ODBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a> <a href=../../interfaces/ title=Интерфейсы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Интерфейсы</a> <a href=../../interfaces/cli/ title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a> <a href=../../interfaces/tcp/ title="Родной интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Родной интерфейс (TCP)</a> <a href=../../interfaces/formats/ title="Форматы входных и выходных данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title="Начало работы" class="nav-link text-light text-wrap dropdown-toggle px-0">Начало работы</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/playground/ title="ClickHouse Playground" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Playground</a> <a href=../../getting_started/ title="Начало работы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Начало работы</a> <a href=../../getting_started/install/ title=Установка class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка</a> <a href=../../getting_started/tutorial/ title="Учебник По Клик-Хаусу" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Учебник По Клик-Хаусу</a> <a href=#sidebar-sidebar-9-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9-5 title="Тестовые массивы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Тестовые массивы данных</a> <div id=sidebar-sidebar-9-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting_started/example_datasets/metrica/ title="Анонимизированные данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Анонимизированные данные Яндекс.Метрики</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a> <a href=../../getting_started/example_datasets/criteo/ title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a> <a href=../../getting_started/example_datasets/ title="Тестовые массивы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Тестовые массивы данных</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="Разработка ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Разработка ClickHouse</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/developer_instruction/ title="Если вы используете Windows" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Если вы используете Windows</a> <a href=../../development/contrib/ title="Используемые сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Используемые сторонние библиотеки</a> <a href=../../development/style/ title="Как писать код на C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как писать код на C++</a> <a href=../../development/build/ title="Как построить ClickHouse для развития" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse для развития</a> <a href=../../development/build_cross_osx/ title="Как построить ClickHouse на Linux для Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Linux для Mac OS X</a> <a href=../../development/build_cross_arm/ title="Как построить ClickHouse на Linux для архитектуры AArch64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Linux для архитектуры AArch64 (ARM64)</a> <a href=../../development/build_osx/ title="Как построить ClickHouse на Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Mac OS X</a> <a href=../../development/browse_code/ title="Навигация по коду ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Навигация по коду ClickHouse</a> <a href=../../development/architecture/ title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a> <a href=../../development/ title="Разработка ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разработка ClickHouse</a> <a href=../../development/tests/ title="Тестирование ClickHouse" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Тестирование ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=Руководства class="nav-link text-light text-wrap dropdown-toggle px-0">Руководства</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/apply_catboost_model/ title="Применение модели CatBoost в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение модели CatBoost в ClickHouse</a> <a href=../../guides/ title=Руководства class="nav-link text-light text-wrap d-inline-block w-100 px-0">Руководства</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title="Справка по SQL" class="nav-link text-light text-wrap dropdown-toggle px-0">Справка по SQL</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-1 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-12-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../sql_reference/statements/create/ title="CREATE DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE DATABASE</a> <a href=../../sql_reference/statements/insert_into/ title=INSERT class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT</a> <a href=../../sql_reference/statements/show/ title="SHOW Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW Queries</a> <a href=../../sql_reference/statements/system/ title="Запросы SYSTEM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Запросы SYSTEM</a> <a href=../../sql_reference/statements/misc/ title="Прочие виды запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие виды запросов</a> <a href=../../sql_reference/statements/select/ title="Синтаксис запросов SELECT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис запросов SELECT</a> </nav> </div> <a href=../../sql_reference/operators/ title=Операторы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a> <a href=../../sql_reference/syntax/ title=Синтаксис class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис</a> <a href=../../sql_reference/ title="Справка по SQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справка по SQL</a> <a href=#sidebar-sidebar-12-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-5 title="Агрегатные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Агрегатные функции</a> <div id=sidebar-sidebar-12-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/aggregate_functions/ title="Агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Агрегатные функции</a> <a href=../../sql_reference/aggregate_functions/combinators/ title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a> <a href=../../sql_reference/aggregate_functions/parametric_functions/ title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a> <a href=../../sql_reference/aggregate_functions/reference/ title="Справочник функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справочник функций</a> </nav> </div> <a href=#sidebar-sidebar-12-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-6 title=Словари class="nav-link text-light text-wrap dropdown-toggle px-0">Словари</a> <div id=sidebar-sidebar-12-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-6-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-6-1 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-12-6-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="Внешние словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние словари</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Иерархические словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Иерархические словари</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a> </nav> </div> <a href=../../sql_reference/dictionaries/internal_dicts/ title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a> <a href=../../sql_reference/dictionaries/ title=Словари class="nav-link text-light text-wrap d-inline-block w-100 px-0">Словари</a> </nav> </div> <a href=#sidebar-sidebar-12-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-7 title="Табличные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Табличные функции</a> <div id=sidebar-sidebar-12-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../sql_reference/table_functions/generate/ title=generate class="nav-link text-light text-wrap d-inline-block w-100 px-0">generate</a> <a href=../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../sql_reference/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../sql_reference/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../sql_reference/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../sql_reference/table_functions/remote/ title="remote, remoteSecure" class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote, remoteSecure</a> <a href=../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../sql_reference/table_functions/ title="Табличные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Табличные функции</a> </nav> </div> <a href=#sidebar-sidebar-12-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8 title="Типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Типы данных</a> <div id=sidebar-sidebar-12-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-8-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-1 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-12-8-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> <a href=../../sql_reference/data_types/domains/overview/ title=Домены class="nav-link text-light text-wrap d-inline-block w-100 px-0">Домены</a> </nav> </div> <a href=../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types\_of\_arguments…)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types\_of\_arguments…)</a> <a href=../../sql_reference/data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../sql_reference/data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../sql_reference/data_types/decimal/ title="Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)</a> <a href=../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../sql_reference/data_types/fixedstring/ title=FixedString class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString</a> <a href=../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../sql_reference/data_types/nullable/ title=Nullable(TypeName) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable(TypeName)</a> <a href=../../sql_reference/data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a> <a href=../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../sql_reference/data_types/boolean/ title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a> <a href=../../sql_reference/data_types/ title="Типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Типы данных</a> <a href=#sidebar-sidebar-12-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-18 title="Вложенные структуры данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Вложенные структуры данных</a> <div id=sidebar-sidebar-12-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> <a href=../../sql_reference/data_types/nested_data_structures/ title="Вложенные структуры данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Вложенные структуры данных</a> </nav> </div> <a href=#sidebar-sidebar-12-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-19 title="Служебные типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Служебные типы данных</a> <div id=sidebar-sidebar-12-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../sql_reference/data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> <a href=../../sql_reference/data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../sql_reference/data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../sql_reference/data_types/special_data_types/ title="Служебные типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Служебные типы данных</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-12-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-9 title=Функции class="nav-link text-light text-wrap dropdown-toggle px-0">Функции</a> <div id=sidebar-sidebar-12-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/functions/arithmetic_functions/ title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a> <a href=../../sql_reference/functions/bit_functions/ title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a> <a href=../../sql_reference/functions/logical_functions/ title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a> <a href=../../sql_reference/functions/math_functions/ title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a> <a href=../../sql_reference/functions/other_functions/ title="Прочие функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие функции</a> <a href=../../sql_reference/functions/conditional_functions/ title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a> <a href=../../sql_reference/functions/ title=Функции class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции</a> <a href=../../sql_reference/functions/higher_order_functions/ title="Функции высшего порядка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции высшего порядка</a> <a href=../../sql_reference/functions/random_functions/ title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a> <a href=../../sql_reference/functions/bitmap_functions/ title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a> <a href=../../sql_reference/functions/ip_address_functions/ title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a> <a href=../../sql_reference/functions/json_functions/ title="Функции для работы с JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с JSON</a> <a href=../../sql_reference/functions/functions_for_nulls/ title="Функции для работы с Nullable-аргументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с Nullable-аргументами</a> <a href=../../sql_reference/functions/url_functions/ title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a> <a href=../../sql_reference/functions/uuid_functions/ title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a> <a href=../../sql_reference/functions/ext_dict_functions/ title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a> <a href=../../sql_reference/functions/geo/ title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a> <a href=../../sql_reference/functions/date_time_functions/ title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a> <a href=../../sql_reference/functions/ym_dict_functions/ title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a> <a href=../../sql_reference/functions/string_functions/ title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a> <a href=../../sql_reference/functions/in_functions/ title="Функции для реализации оператора IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN</a> <a href=../../sql_reference/functions/introspection/ title="Функции интроспекции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции интроспекции</a> <a href=../../sql_reference/functions/encoding_functions/ title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a> <a href=../../sql_reference/functions/machine_learning_functions/ title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a> <a href=../../sql_reference/functions/rounding_functions/ title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a> <a href=../../sql_reference/functions/array_functions/ title="Функции по работе с массивами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции по работе с массивами</a> <a href=../../sql_reference/functions/string_search_functions/ title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a> <a href=../../sql_reference/functions/string_replace_functions/ title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a> <a href=../../sql_reference/functions/type_conversion_functions/ title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a> <a href=../../sql_reference/functions/splitting_merging_functions/ title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a> <a href=../../sql_reference/functions/comparison_functions/ title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a> <a href=../../sql_reference/functions/hash_functions/ title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a> <a href=../../sql_reference/functions/array_join/ title="Функция arrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция arrayJoin</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13 title=Эксплуатация class="nav-link text-light text-wrap dropdown-toggle px-0">Эксплуатация</a> <div id=sidebar-sidebar-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-13-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-1 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-13-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../operations/optimizing_performance/sampling_query_profiler/ title="Выборки Профилировщик Запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Выборки Профилировщик Запросов</a> </nav> </div> <a href=../../operations/performance_test/ title="Как Протестировать Ваше Оборудование С Помощью ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как Протестировать Ваше Оборудование С Помощью ClickHouse</a> <a href=../../operations/quotas/ title=Квоты class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a> <a href=../../operations/configuration_files/ title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a> <a href=../../operations/monitoring/ title=Мониторинг class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a> <a href=../../operations/update/ title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a> <a href=../../operations/access_rights/ title="Права доступа" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Права доступа</a> <a href=../../operations/backup/ title="Резервное копирование данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование данных</a> <a href=../../operations/system_tables/ title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a> <a href=../../operations/tips/ title="Советы по эксплуатации" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Советы по эксплуатации</a> <a href=../../operations/requirements/ title=Требования class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a> <a href=../../operations/troubleshooting/ title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a> <a href=../../operations/ title=Эксплуатация class="nav-link text-light text-wrap d-inline-block w-100 px-0">Эксплуатация</a> <a href=#sidebar-sidebar-13-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-14 title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap dropdown-toggle px-0">Конфигурационные параметры сервера</a> <div id=sidebar-sidebar-13-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_configuration_parameters/ title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные параметры сервера</a> </nav> </div> <a href=#sidebar-sidebar-13-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-15 title=Настройки class="nav-link text-light text-wrap dropdown-toggle px-0">Настройки</a> <div id=sidebar-sidebar-13-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=Настройки class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a> <a href=../../operations/settings/settings_users/ title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a> <a href=../../operations/settings/constraints_on_settings/ title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a> <a href=../../operations/settings/query_complexity/ title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a> <a href=../../operations/settings/settings_profiles/ title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a> <a href=../../operations/settings/permissions_for_queries/ title="Разрешения для запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения для запросов</a> </nav> </div> <a href=#sidebar-sidebar-13-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-16 title="Утилиты ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Утилиты ClickHouse</a> <div id=sidebar-sidebar-13-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../operations/utilities/clickhouse-benchmark/ title=clickhouse-бенчмарк class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-бенчмарк</a> <a href=../../operations/utilities/ title="Утилиты ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Утилиты ClickHouse</a> </nav> </div> </nav> </div> <a href=../../single/clickhouse_ru.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF-версия title=PDF-версия height=24 class="d-block mr-1 float-left"><div>PDF-версия</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Помощь нужна!</p> <p class=lead>Следующее содержание этой страницы документации было переведено на машинный язык. Но в отличие от других сайтов, это делается не на лету. Этот переведенный текст живет в репозитории GitHub вместе с основной кодовой базой ClickHouse и ждет, когда другие носители языка сделают его более удобочитаемым для человека.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/development/tests.md target=_blank rel="external nofollow noreferrer"> Помогите документации ClickHouse, отредактировав эту страницу </a> </p> </div> <h1 id=clickhouse-testing>Тестирование ClickHouse<a class=headerlink href=#clickhouse-testing title="Permanent link">&para;</a></h1> <h2 id=functional-tests>Функциональные пробы<a class=headerlink href=#functional-tests title="Permanent link">&para;</a></h2> <p>Функциональные тесты являются наиболее простыми и удобными в использовании. Большинство функций ClickHouse можно протестировать с помощью функциональных тестов, и они обязательны для использования при каждом изменении кода ClickHouse, которое может быть протестировано таким образом.</p> <p>Каждый функциональный тест отправляет один или несколько запросов на запущенный сервер ClickHouse и сравнивает результат со ссылкой.</p> <p>Тесты расположены в <code>queries</code> каталог. Существует два подкаталога: <code>stateless</code> и <code>stateful</code>. Тесты без состояния выполняют запросы без каких - либо предварительно загруженных тестовых данных-они часто создают небольшие синтетические наборы данных на лету, в самом тесте. Статусные тесты требуют предварительно загруженных тестовых данных от Яндекса.Метрика и не доступна широкой публике. Мы склонны использовать только <code>stateless</code> тесты и избегайте добавления новых <code>stateful</code> тесты.</p> <p>Каждый тест может быть одного из двух типов: <code>.sql</code> и <code>.sh</code>. <code>.sql</code> тест - это простой SQL-скрипт, который передается по конвейеру в <code>clickhouse-client --multiquery --testmode</code>. <code>.sh</code> тест - это скрипт, который запускается сам по себе.</p> <p>Чтобы выполнить все тесты, используйте <code>testskhouse-test</code> инструмент. Смотри <code>--help</code> для списка возможных вариантов. Вы можете просто запустить все тесты или запустить подмножество тестов, отфильтрованных по подстроке в имени теста: <code>./clickhouse-test substring</code>.</p> <p>Самый простой способ вызвать функциональные тесты-это скопировать <code>clickhouse-client</code> к <code>/usr/bin/</code>, бежать <code>clickhouse-server</code> а потом бежать <code>./clickhouse-test</code> из собственного каталога.</p> <p>Чтобы добавить новый тест, создайте <code>.sql</code> или <code>.sh</code> файл в <code>queries/0_stateless</code> каталог, проверьте его вручную, а затем сгенерируйте <code>.reference</code> файл создается следующим образом: <code>clickhouse-client -n --testmode &lt; 00000_test.sql &gt; 00000_test.reference</code> или <code>./00000_test.sh &gt; ./00000_test.reference</code>.</p> <p>Тесты должны использовать (создавать, отбрасывать и т. д.) Только таблицы в <code>test</code> предполагается, что база данных создается заранее; также тесты могут использовать временные таблицы.</p> <p>Если вы хотите использовать распределенные запросы в функциональных тестах, вы можете использовать их в качестве рычагов <code>remote</code> функция таблицы с <code>127.0.0.{1..2}</code> адреса для запроса самого сервера; или вы можете использовать предопределенные тестовые кластеры в файле конфигурации сервера, например <code>test_shard_localhost</code>.</p> <p>Некоторые тесты помечены знаком <code>zookeeper</code>, <code>shard</code> или <code>long</code> в своем названии.<br> <code>zookeeper</code> это для тестов, которые используют ZooKeeper. <code>shard</code> это для тестов, что<br> требуется сервер для прослушивания <code>127.0.0.*</code>; <code>distributed</code> или <code>global</code> есть то же самое<br> значение. <code>long</code> это для тестов, которые работают немного дольше, чем одна секунда. Ты можешь<br> отключите эти группы тестов с помощью <code>--no-zookeeper</code>, <code>--no-shard</code> и<br> <code>--no-long</code> варианты, соответственно.</p> <h2 id=known-bugs>Известная ошибка<a class=headerlink href=#known-bugs title="Permanent link">&para;</a></h2> <p>Если мы знаем некоторые ошибки, которые могут быть легко воспроизведены функциональными тестами, мы помещаем подготовленные функциональные тесты в <code>queries/bugs</code> каталог. Эти тесты будут перенесены в <code>teststests_stateless</code> когда ошибки будут исправлены.</p> <h2 id=integration-tests>Интеграционные Тесты<a class=headerlink href=#integration-tests title="Permanent link">&para;</a></h2> <p>Интеграционные тесты позволяют тестировать ClickHouse в кластерной конфигурации и взаимодействие ClickHouse с другими серверами, такими как MySQL, Postgres, MongoDB. Они полезны для эмуляции сетевых разбиений, отбрасывания пакетов и т. д. Эти тесты выполняются в Docker и создают несколько контейнеров с различным программным обеспечением.</p> <p>Видеть <code>testsgration/README.md</code> о том, как проводить эти тесты.</p> <p>Обратите внимание, что интеграция ClickHouse со сторонними драйверами не тестируется. Кроме того, в настоящее время у нас нет интеграционных тестов с нашими драйверами JDBC и ODBC.</p> <h2 id=unit-tests>Модульное тестирование<a class=headerlink href=#unit-tests title="Permanent link">&para;</a></h2> <p>Модульные тесты полезны, если вы хотите протестировать не весь ClickHouse в целом, а одну изолированную библиотеку или класс. Вы можете включить или отключить сборку тестов с помощью <code>ENABLE_TESTS</code> Вариант CMake. Модульные тесты (и другие тестовые программы) расположены в <code>tests</code> подкаталоги по всему коду. Чтобы запустить модульные тесты, введите <code>ninja test</code>. Некоторые тесты используют <code>gtest</code>, но некоторые из них-это просто программы, которые возвращают ненулевой код выхода при сбое теста.</p> <p>Не обязательно иметь модульные тесты, Если код уже охвачен функциональными тестами (а функциональные тесты обычно гораздо более просты в использовании).</p> <h2 id=performance-tests>Эксплуатационное испытание<a class=headerlink href=#performance-tests title="Permanent link">&para;</a></h2> <p>Тесты производительности позволяют измерять и сравнивать производительность некоторой изолированной части ClickHouse по синтетическим запросам. Тесты расположены по адресу <code>tests/performance</code>. Каждый тест представлен следующим образом <code>.xml</code> файл с описанием тестового случая. Тесты выполняются с помощью <code>clickhouse performance-test</code> инструмент (который встроен в <code>clickhouse</code> двоичный). Видеть <code>--help</code> для призыва.</p> <p>Каждый тест запускает один или несколько запросов (возможно, с комбинациями параметров) в цикле с некоторыми условиями остановки (например «maximum execution speed is not changing in three seconds») и измерьте некоторые показатели производительности запросов (например, «maximum execution speed»). Некоторые тесты могут содержать предварительные условия для предварительно загруженного тестового набора данных.</p> <p>Если вы хотите улучшить производительность ClickHouse в каком-то сценарии, и если улучшения могут наблюдаться в простых запросах, настоятельно рекомендуется написать тест производительности. Это всегда имеет смысл использовать <code>perf top</code> или другие инструменты perf во время ваших тестов.</p> <h2 id=test-tools-and-scripts>Инструменты И Сценарии Тестирования<a class=headerlink href=#test-tools-and-scripts title="Permanent link">&para;</a></h2> <p>Некоторые программы в <code>tests</code> каталог-это не подготовленные тесты, а инструменты тестирования. Например, для <code>Lexer</code> есть такой инструмент <code>dbms/Parsers/tests/lexer</code> это просто делает токенизацию stdin и записывает раскрашенный результат в stdout. Вы можете использовать эти инструменты в качестве примеров кода, а также для исследования и ручного тестирования.</p> <p>Вы также можете разместить пару файлов <code>.sh</code> и <code>.reference</code> вместе с инструментом нужно запустить его на каком - то заранее заданном входе- тогда результат скрипта можно сравнить с <code>.reference</code> файл. Такого рода тесты не автоматизированы.</p> <h2 id=miscellanous-tests>Различные Тесты<a class=headerlink href=#miscellanous-tests title="Permanent link">&para;</a></h2> <p>Существуют тесты для внешних словарей, расположенных по адресу <code>tests/external_dictionaries</code> и для машинно-обученных моделей в <code>tests/external_models</code>. Эти тесты не обновляются и должны быть перенесены в интеграционные тесты.</p> <p>Существует отдельный тест для вставки кворума. Этот тест запускает кластер ClickHouse на отдельных серверах и эмулирует различные случаи сбоя: разделение сети, отбрасывание пакетов (между узлами ClickHouse, между ClickHouse и ZooKeeper, между сервером ClickHouse и клиентом и т. д.), <code>kill -9</code>, <code>kill -STOP</code> и <code>kill -CONT</code> , любить <a href=https://aphyr.com/tags/Jepsen rel="external nofollow noreferrer">Джепсен</a>. Затем тест проверяет, что все признанные вставки были записаны, а все отклоненные вставки-нет.</p> <p>Тест кворума был написан отдельной командой еще до того, как ClickHouse стал открытым исходным кодом. Эта команда больше не работает с ClickHouse. Тест был случайно написан на Java. По этим причинам тест кворума должен быть переписан и перенесен в интеграционные тесты.</p> <h2 id=manual-testing>Ручное тестирование<a class=headerlink href=#manual-testing title="Permanent link">&para;</a></h2> <p>Когда вы разрабатываете новую функцию, разумно также протестировать ее вручную. Вы можете сделать это с помощью следующих шагов:</p> <p>Постройте ClickHouse. Запустите ClickHouse из терминала: измените каталог на <code>programs/clickhouse-server</code> и запустить его с помощью <code>./clickhouse-server</code>. Он будет использовать конфигурацию (<code>config.xml</code>, <code>users.xml</code> и файлы внутри <code>config.d</code> и <code>users.d</code> каталоги) из текущего каталога по умолчанию. Чтобы подключиться к серверу ClickHouse, выполните команду <code>programs/clickhouse-client/clickhouse-client</code>.</p> <p>Обратите внимание, что все инструменты clickhouse (сервер, клиент и т. д.) являются просто символическими ссылками на один двоичный файл с именем <code>clickhouse</code>. Вы можете найти этот двоичный файл по адресу <code>programs/clickhouse</code>. Все инструменты также могут быть вызваны как <code>clickhouse tool</code> вместо <code>clickhouse-tool</code>.</p> <p>В качестве альтернативы вы можете установить пакет ClickHouse: либо стабильный релиз из репозитория Яндекса, либо вы можете построить пакет для себя с помощью <code>./release</code> в корне источников ClickHouse. Затем запустите сервер с помощью <code>sudo service clickhouse-server start</code> (или остановить, чтобы остановить сервер). Ищите журналы по адресу <code>/etc/clickhouse-server/clickhouse-server.log</code>.</p> <p>Когда ClickHouse уже установлен в вашей системе, вы можете построить новый <code>clickhouse</code> двоичный код и заменить существующий двоичный код:</p> <div class=codehilite><pre><span></span><code>$ sudo service clickhouse-server stop
$ sudo cp ./clickhouse /usr/bin/
$ sudo service clickhouse-server start
</code></pre></div> <p>Также вы можете остановить системный clickhouse-сервер и запустить свой собственный с той же конфигурацией, но с регистрацией в терминал:</p> <div class=codehilite><pre><span></span><code>$ sudo service clickhouse-server stop
$ sudo -u clickhouse /usr/bin/clickhouse server --config-file /etc/clickhouse-server/config.xml
</code></pre></div> <p>Пример с gdb:</p> <div class=codehilite><pre><span></span><code>$ sudo -u clickhouse gdb --args /usr/bin/clickhouse server --config-file /etc/clickhouse-server/config.xml
</code></pre></div> <p>Если системный clickhouse-сервер уже запущен, и вы не хотите его останавливать, вы можете изменить номера портов в своей системе. <code>config.xml</code> (или переопределить их в файле внутри <code>config.d</code> каталог), укажите соответствующий путь к данным и запустите его.</p> <p><code>clickhouse</code> binary почти не имеет зависимостей и работает в широком диапазоне дистрибутивов Linux. Чтобы быстро и грязно протестировать свои изменения на сервере, вы можете просто <code>scp</code> ваша свежая постройка <code>clickhouse</code> двоичный файл на ваш сервер, а затем запустите его, как в приведенных выше примерах.</p> <h2 id=testing-environment>Тестовая среда<a class=headerlink href=#testing-environment title="Permanent link">&para;</a></h2> <p>Перед публикацией релиза как стабильного мы развертываем его в тестовой среде. Среда тестирования-это кластер, который обрабатывает 1/39 часть <a href=https://metrica.yandex.com/ rel="external nofollow noreferrer">Яндекс.Метрика</a> данные. Мы делимся нашей тестовой средой с Яндексом.Команда метрики. ClickHouse обновляется без простоев поверх существующих данных. Мы смотрим сначала на то, что данные обрабатываются успешно, не отставая от реального времени, репликация продолжает работать и нет никаких проблем, видимых Яндексу.Команда метрики. Первую проверку можно провести следующим образом:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>hostName</span><span class=p>()</span> <span class=k>AS</span> <span class=n>h</span><span class=p>,</span> <span class=k>any</span><span class=p>(</span><span class=k>version</span><span class=p>()),</span> <span class=k>any</span><span class=p>(</span><span class=n>uptime</span><span class=p>()),</span> <span class=k>max</span><span class=p>(</span><span class=n>UTCEventTime</span><span class=p>),</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>remote</span><span class=p>(</span><span class=s1>&#39;example01-01-{1..3}t&#39;</span><span class=p>,</span> <span class=n>merge</span><span class=p>,</span> <span class=n>hits</span><span class=p>)</span> <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>&gt;=</span> <span class=n>today</span><span class=p>()</span> <span class=o>-</span> <span class=mi>2</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>h</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>h</span><span class=p>;</span>
</code></pre></div> <p>В некоторых случаях мы также развернуть на тестирование среды нашего друга команды Яндекса: Маркет, облако и т. д. Кроме того, у нас есть некоторые аппаратные серверы, которые используются для целей разработки.</p> <h2 id=load-testing>Нагрузочное тестирование<a class=headerlink href=#load-testing title="Permanent link">&para;</a></h2> <p>После развертывания в среде тестирования мы запускаем нагрузочное тестирование с запросами из производственного кластера. Это делается вручную.</p> <p>Убедитесь, что вы включили <code>query_log</code> на вашем производственном кластере.</p> <p>Сбор журнала запросов в течение одного или нескольких дней:</p> <div class=codehilite><pre><span></span><code>$ clickhouse-client --query<span class=o>=</span><span class=s2>&quot;SELECT DISTINCT query FROM system.query_log WHERE event_date = today() AND query LIKE &#39;%ym:%&#39; AND query NOT LIKE &#39;%system.query_log%&#39; AND type = 2 AND is_initial_query&quot;</span> &gt; queries.tsv
</code></pre></div> <p>Это очень сложный пример. <code>type = 2</code> будет фильтровать запросы, которые выполняются успешно. <code>query LIKE '%ym:%'</code> это выбор релевантных запросов от Яндекса.Метрика. <code>is_initial_query</code> это выбор только тех запросов, которые инициируются клиентом, а не самим ClickHouse (как части распределенной обработки запросов).</p> <p><code>scp</code> это войдите в свой тестовый кластер и запустите его следующим образом:</p> <div class=codehilite><pre><span></span><code>$ clickhouse benchmark --concurrency <span class=m>16</span> &lt; queries.tsv
</code></pre></div> <p>(вероятно, вы также хотите указать a <code>--user</code>)</p> <p>Затем оставьте его на ночь или выходные и идите отдыхать.</p> <p>Вы должны это проверить <code>clickhouse-server</code> не дает сбоя, объем памяти ограничен, а производительность не ухудшается с течением времени.</p> <p>Точные тайминги выполнения запросов не регистрируются и не сравниваются из-за высокой вариативности запросов и окружающей среды.</p> <h2 id=build-tests>Построение Тестов<a class=headerlink href=#build-tests title="Permanent link">&para;</a></h2> <p>Тесты сборки позволяют проверить, что сборка не нарушается на различных альтернативных конфигурациях и на некоторых зарубежных системах. Тесты расположены по адресу <code>ci</code> каталог. Они запускают сборку из исходного кода внутри Docker, Vagrant, а иногда и с помощью <code>qemu-user-static</code> внутри Докер. Эти тесты находятся в стадии разработки, и тестовые запуски не автоматизированы.</p> <p>Мотивация:</p> <p>Обычно мы выпускаем и запускаем все тесты на одном варианте сборки ClickHouse. Но есть и альтернативные варианты сборки, которые не проходят тщательной проверки. Примеры:</p> <ul> <li>сборка на FreeBSD;</li> <li>сборка на Debian с библиотеками из системных пакетов;</li> <li>сборка с общим связыванием библиотек;</li> <li>построить на платформе AArch64 ;</li> <li>постройте на платформе PowerPc.</li> </ul> <p>Например, сборка с системными пакетами-это плохая практика, потому что мы не можем гарантировать, какая именно версия пакетов будет у системы. Но это действительно необходимо сопровождающим Debian. По этой причине мы, по крайней мере, должны поддерживать этот вариант сборки. Другой пример: Общие ссылки-это общий источник проблем, но он необходим для некоторых энтузиастов.</p> <p>Хотя мы не можем выполнить все тесты на всех вариантах сборки, мы хотим проверить, по крайней мере, что различные варианты сборки не нарушены. Для этого мы используем тесты сборки.</p> <h2 id=testing-for-protocol-compatibility>Тестирование Совместимости Протоколов<a class=headerlink href=#testing-for-protocol-compatibility title="Permanent link">&para;</a></h2> <p>Когда мы расширяем сетевой протокол ClickHouse, мы вручную проверяем, что старый clickhouse-клиент работает с новым clickhouse-сервером, а новый clickhouse-клиент работает со старым clickhouse-сервером (просто запустив двоичные файлы из соответствующих пакетов).</p> <h2 id=help-from-the-compiler>Помощь От Компилятора<a class=headerlink href=#help-from-the-compiler title="Permanent link">&para;</a></h2> <p>Основной код ClickHouse (который находится в <code>dbms</code> каталог) строится с помощью <code>-Wall -Wextra -Werror</code> и с некоторыми дополнительными включенными предупреждениями. Хотя эти параметры не включены для сторонних библиотек.</p> <p>У Clang есть еще более полезные предупреждения - вы можете искать их с помощью <code>-Weverything</code> и выберите что-то для сборки по умолчанию.</p> <p>Для производственных сборок используется gcc (он все еще генерирует немного более эффективный код, чем clang). Для развития, лязгают, как правило, более удобны в использовании. Вы можете построить на своей собственной машине с режимом отладки (чтобы сэкономить батарею вашего ноутбука), но обратите внимание, что компилятор способен генерировать больше предупреждений с помощью <code>-O3</code> благодаря лучшему потоку управления и межпроцедурному анализу. При строительстве с лязгом, <code>libc++</code> используется вместо <code>libstdc++</code> и при построении с режимом отладки, отладочная версия <code>libc++</code> используется, что позволяет ловить больше ошибок во время выполнения.</p> <h2 id=sanitizers>Дезинфицирующее средство<a class=headerlink href=#sanitizers title="Permanent link">&para;</a></h2> <p><strong>Адрес дезинфицирующее средство</strong>.<br> Мы проводим функциональные и интеграционные тесты в асане на фиксации основы.</p> <p><strong>С Valgrind (Помощи Valgrind)</strong>.<br> Мы проводим функциональные тесты под Valgrind ночь. Это займет несколько часов. В настоящее время существует один известный ложноположительный результат в <code>re2</code> библиотека, см. <a href=https://research.swtch.com/sparse rel="external nofollow noreferrer">эта статья</a>.</p> <p><strong>Неопределенное поведение дезинфицирующего средства.</strong><br> Мы проводим функциональные и интеграционные тесты в асане на фиксации основы.</p> <p><strong>Дезинфицирующее средство для нитей</strong>.<br> Мы проводим функциональные тесты в рамках TSan на основе per-commit. Мы все еще не запускаем интеграционные тесты под TSan на основе per-commit.</p> <p><strong>Дезинфицирующее средство для памяти</strong>.<br> В настоящее время мы все еще не используем MSan.</p> <p><strong>Отладочный распределитель.</strong><br> Отладочная версия <code>jemalloc</code> используется для отладки сборки.</p> <h2 id=fuzzing>Затуманивающего<a class=headerlink href=#fuzzing title="Permanent link">&para;</a></h2> <p>Мы используем простой тест fuzz для генерации случайных SQL-запросов и проверки того, что сервер не умирает. Тестирование пуха проводится с помощью адресного дезинфицирующего средства. Вы можете найти его в <code>00746_sql_fuzzy.pl</code>. Этот тест следует проводить непрерывно (в течение ночи и дольше).</p> <p>По состоянию на декабрь 2018 года мы все еще не используем изолированное тестирование fuzz библиотечного кода.</p> <h2 id=security-audit>Аудит безопасности<a class=headerlink href=#security-audit title="Permanent link">&para;</a></h2> <p>Люди из облачного отдела Яндекса делают некоторый базовый обзор возможностей ClickHouse с точки зрения безопасности.</p> <h2 id=static-analyzers>Статический анализатор<a class=headerlink href=#static-analyzers title="Permanent link">&para;</a></h2> <p>Мы бежим <code>PVS-Studio</code> на основе каждой фиксации. Мы провели оценку <code>clang-tidy</code>, <code>Coverity</code>, <code>cppcheck</code>, <code>PVS-Studio</code>, <code>tscancode</code>. Вы найдете инструкции по использованию в <code>tests/instructions/</code> каталог. Кроме того, вы можете читать <a href=https://habr.com/company/yandex/blog/342018/ rel="external nofollow noreferrer">статья на русском языке</a>.</p> <p>Если вы используете <code>CLion</code> как IDE, вы можете использовать некоторые из них <code>clang-tidy</code> выписывает чеки из коробки.</p> <h2 id=hardening>Затвердение<a class=headerlink href=#hardening title="Permanent link">&para;</a></h2> <p><code>FORTIFY_SOURCE</code> используется по умолчанию. Это почти бесполезно, но все же имеет смысл в редких случаях, и мы не отключаем его.</p> <h2 id=code-style>Стиль Кода<a class=headerlink href=#code-style title="Permanent link">&para;</a></h2> <p>Описаны правила стиля кода <a href=https://clickhouse.tech/docs/en/development/style/ >здесь</a>.</p> <p>Чтобы проверить наличие некоторых распространенных нарушений стиля, вы можете использовать <code>utils/check-style</code> скрипт.</p> <p>Чтобы принудительно создать правильный стиль вашего кода, Вы можете использовать <code>clang-format</code>. Файл <code>.clang-format</code> находится в корне источника. Это в основном соответствует нашему фактическому стилю кода. Но применять его не рекомендуется <code>clang-format</code> к существующим файлам, потому что это ухудшает форматирование. Вы можете использовать <code>clang-format-diff</code> инструмент, который вы можете найти в репозитории Clang source.</p> <p>В качестве альтернативы вы можете попробовать <code>uncrustify</code> инструмент для переформатирования вашего кода. Конфигурации в <code>uncrustify.cfg</code> в корне источников. Это меньше, чем <code>clang-format</code>.</p> <p><code>CLion</code> имеет свой собственный формататор кода, который должен быть настроен для нашего стиля кода.</p> <h2 id=metrica-b2b-tests>В2В метрика тесты<a class=headerlink href=#metrica-b2b-tests title="Permanent link">&para;</a></h2> <p>Каждый релиз ClickHouse тестируется с помощью движков Yandex Metrica и AppMetrica. Тестовые и стабильные версии ClickHouse развертываются на виртуальных машинах и запускаются с небольшой копией движка Metrica engine, который обрабатывает фиксированную выборку входных данных. Затем результаты двух экземпляров двигателя Metrica сравниваются вместе.</p> <p>Эти тесты автоматизированы отдельной командой. Из-за большого количества движущихся частей тесты чаще всего проваливаются по совершенно несвязанным причинам, которые очень трудно выяснить. Скорее всего, эти тесты имеют для нас отрицательное значение. Тем не менее эти тесты оказались полезными примерно в одном или двух случаях из сотен.</p> <h2 id=test-coverage>Тестовое покрытие<a class=headerlink href=#test-coverage title="Permanent link">&para;</a></h2> <p>По состоянию на июль 2018 года мы не отслеживаем покрытие тестов.</p> <h2 id=test-automation>Автоматизация тестирования<a class=headerlink href=#test-automation title="Permanent link">&para;</a></h2> <p>Мы проводим тесты с помощью внутренней CI Яндекса и системы автоматизации заданий под названием «Sandbox».</p> <p>Задания сборки и тесты выполняются в песочнице на основе каждой фиксации. Полученные пакеты и результаты тестирования публикуются на GitHub и могут быть загружены по прямым ссылкам. Артефакты хранятся вечно. Когда вы отправляете запрос на вытягивание на GitHub, мы помечаем его как «can be tested» и наша система CI построит пакеты ClickHouse (release, debug, with address sanitizer и т. д.) Для вас.</p> <p>Мы не используем Travis CI из-за ограничения по времени и вычислительной мощности.<br> Мы не используем Дженкинса. Он был использован раньше, и теперь мы счастливы, что не используем Дженкинса.</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Собрано из <a href=https://github.com/ClickHouse/ClickHouse/commit/3166eab2dfc89323b9d756aeba6866381fd9c186 rel="external nofollow noreferrer" target=_blank class=text-reset>3166eab2df</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Cодержание</label> <a href=#functional-tests title="Функциональные пробы" class="nav-link text-wrap d-inline-block w-100"> Функциональные пробы </a> <a href=#known-bugs title="Известная ошибка" class="nav-link text-wrap d-inline-block w-100"> Известная ошибка </a> <a href=#integration-tests title="Интеграционные Тесты" class="nav-link text-wrap d-inline-block w-100"> Интеграционные Тесты </a> <a href=#unit-tests title="Модульное тестирование" class="nav-link text-wrap d-inline-block w-100"> Модульное тестирование </a> <a href=#performance-tests title="Эксплуатационное испытание" class="nav-link text-wrap d-inline-block w-100"> Эксплуатационное испытание </a> <a href=#test-tools-and-scripts title="Инструменты И Сценарии Тестирования" class="nav-link text-wrap d-inline-block w-100"> Инструменты И Сценарии Тестирования </a> <a href=#miscellanous-tests title="Различные Тесты" class="nav-link text-wrap d-inline-block w-100"> Различные Тесты </a> <a href=#manual-testing title="Ручное тестирование" class="nav-link text-wrap d-inline-block w-100"> Ручное тестирование </a> <a href=#testing-environment title="Тестовая среда" class="nav-link text-wrap d-inline-block w-100"> Тестовая среда </a> <a href=#load-testing title="Нагрузочное тестирование" class="nav-link text-wrap d-inline-block w-100"> Нагрузочное тестирование </a> <a href=#build-tests title="Построение Тестов" class="nav-link text-wrap d-inline-block w-100"> Построение Тестов </a> <a href=#testing-for-protocol-compatibility title="Тестирование Совместимости Протоколов" class="nav-link text-wrap d-inline-block w-100"> Тестирование Совместимости Протоколов </a> <a href=#help-from-the-compiler title="Помощь От Компилятора" class="nav-link text-wrap d-inline-block w-100"> Помощь От Компилятора </a> <a href=#sanitizers title="Дезинфицирующее средство" class="nav-link text-wrap d-inline-block w-100"> Дезинфицирующее средство </a> <a href=#fuzzing title=Затуманивающего class="nav-link text-wrap d-inline-block w-100"> Затуманивающего </a> <a href=#security-audit title="Аудит безопасности" class="nav-link text-wrap d-inline-block w-100"> Аудит безопасности </a> <a href=#static-analyzers title="Статический анализатор" class="nav-link text-wrap d-inline-block w-100"> Статический анализатор </a> <a href=#hardening title=Затвердение class="nav-link text-wrap d-inline-block w-100"> Затвердение </a> <a href=#code-style title="Стиль Кода" class="nav-link text-wrap d-inline-block w-100"> Стиль Кода </a> <a href=#metrica-b2b-tests title="В2В метрика тесты" class="nav-link text-wrap d-inline-block w-100"> В2В метрика тесты </a> <a href=#test-coverage title="Тестовое покрытие" class="nav-link text-wrap d-inline-block w-100"> Тестовое покрытие </a> <a href=#test-automation title="Автоматизация тестирования" class="nav-link text-wrap d-inline-block w-100"> Автоматизация тестирования </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=ru data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>ClickHouse релиз 18.16 - Документация ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="ClickHouse релиз 18.16 - Документация ClickHouse "><meta property=og:description content="ClickHouse релиз 18.16 ClickHouse релиз 18.16.1, 2018-12-21 Устранение ошибок: Исправлена ошибка, которая приводила к пр"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="ClickHouse релиз 18.16 - Документация ClickHouse "><meta name=description content="ClickHouse релиз 18.16 ClickHouse релиз 18.16.1, 2018-12-21 Устранение ошибок: Исправлена ошибка, которая приводила к пр"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> ClickHouse релиз 18.16 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/whats_new/changelog/2018.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ru.svg alt=Русский title=Русский width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/whats_new/changelog/2018/ class="dropdown-item disabled"> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Многостраничный или одностраничный"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Многостраничная версия" title="Многостраничная версия"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Одностраничная версия" title="Одностраничная версия"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Версия: <span class=text-light>последняя</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ru/ class="dropdown-item disable"> <span class=text-light>последняя</span> </a> <a href=/docs/v20.3/ru/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ru/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/ru/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ru/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ru/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ru/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ru/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/ru/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ru/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ru/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ru/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../introduction/info/ title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a> <a href=../../../introduction/history/ title="История ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">История ClickHouse</a> <a href=../../../introduction/features_considered_disadvantages/ title="Особенности ClickHouse, которые могут считаться недостатками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Особенности ClickHouse, которые могут считаться недостатками</a> <a href=../../../introduction/distinctive_features/ title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a> <a href=../../../introduction/performance/ title=Производительность class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a> <a href=../../../introduction/adopters/ title="Усыновители ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Усыновители ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title="Движки баз данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки баз данных</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database_engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> <a href=../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database_engines/ title="Движки баз данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки баз данных</a> </nav> </div> <a href=#sidebar-sidebar-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3 title="Движки таблиц" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки таблиц</a> <div id=sidebar-sidebar-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-2-3-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-1 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-2-3-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a> <a href=../../../engines/table_engines/mergetree_family/replication/ title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a> </nav> </div> <a href=#sidebar-sidebar-2-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-2 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-2-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../engines/table_engines/log_family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> <a href=../../../engines/table_engines/log_family/log_family/ title="Семейство Log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Семейство Log</a> </nav> </div> <a href=#sidebar-sidebar-2-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-3 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-2-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> <a href=#sidebar-sidebar-2-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-4 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-2-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../engines/table_engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../../engines/table_engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../../engines/table_engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../../engines/table_engines/special/file/ title=File(Format) class="nav-link text-light text-wrap d-inline-block w-100 px-0">File(Format)</a> <a href=../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> <a href=../../../engines/table_engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table_engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../../engines/table_engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../engines/table_engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../engines/table_engines/special/url/ title="URL(URL, Format)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL, Format)</a> <a href=../../../engines/table_engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../../engines/table_engines/special/external_data/ title="Внешние данные для обработки запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные для обработки запроса</a> </nav> </div> <a href=../../../engines/table_engines/ title="Движки таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки таблиц</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../commercial/cloud/ title="Поставщики облачных услуг ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поставщики облачных услуг ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../whats_new/changelog/2017/ title="ClickHouse релиз 1.1.54327, 2017-12-21" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse релиз 1.1.54327, 2017-12-21</a> <a href=../../../whats_new/changelog/2018/ title="ClickHouse релиз 18.16" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">ClickHouse релиз 18.16</a> <a href=../../../whats_new/changelog/2019/ title="Релиз ClickHouse в19.17" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Релиз ClickHouse в19.17</a> </nav> </div> <a href=../../../whats_new/roadmap/ title="Дорожная карта" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Дорожная карта</a> <a href=../../../whats_new/security_changelog/ title="Исправлено в релизе 19.14.3.3, 2019-09-10" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Исправлено в релизе 19.14.3.3, 2019-09-10</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../faq/general/ title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a> </nav> </div> <a href=../../../extended_roadmap/ title="Планы разработки ClickHouse 2020" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Планы разработки ClickHouse 2020</a> <a href=../../../ title="Что такое ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Что такое ClickHouse</a> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Интерфейсы class="nav-link text-light text-wrap dropdown-toggle px-0">Интерфейсы</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-8-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-1 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-8-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../interfaces/third-party/integrations/ title="Библиотеки для интеграции от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Библиотеки для интеграции от сторонних разработчиков</a> <a href=../../../interfaces/third-party/gui/ title="Визуальные интерфейсы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы от сторонних разработчиков</a> <a href=../../../interfaces/third-party/client_libraries/ title="Клиентские библиотеки от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки от сторонних разработчиков</a> <a href=../../../interfaces/third-party/proxy/ title="Прокси-серверы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси-серверы от сторонних разработчиков</a> </nav> </div> <a href=../../../interfaces/cpp/ title="C++ клиентская библиотека" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ клиентская библиотека</a> <a href=../../../interfaces/http/ title=HTTP-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a> <a href=../../../interfaces/jdbc/ title=JDBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a> <a href=../../../interfaces/mysql/ title=MySQL-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL-интерфейс</a> <a href=../../../interfaces/odbc/ title=ODBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a> <a href=../../../interfaces/ title=Интерфейсы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Интерфейсы</a> <a href=../../../interfaces/cli/ title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a> <a href=../../../interfaces/tcp/ title="Родной интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Родной интерфейс (TCP)</a> <a href=../../../interfaces/formats/ title="Форматы входных и выходных данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title="Начало работы" class="nav-link text-light text-wrap dropdown-toggle px-0">Начало работы</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/playground/ title="ClickHouse Playground" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Playground</a> <a href=../../../getting_started/ title="Начало работы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Начало работы</a> <a href=../../../getting_started/install/ title=Установка class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка</a> <a href=../../../getting_started/tutorial/ title="Учебник По Клик-Хаусу" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Учебник По Клик-Хаусу</a> <a href=#sidebar-sidebar-9-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9-5 title="Тестовые массивы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Тестовые массивы данных</a> <div id=sidebar-sidebar-9-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting_started/example_datasets/metrica/ title="Анонимизированные данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Анонимизированные данные Яндекс.Метрики</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a> <a href=../../../getting_started/example_datasets/criteo/ title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a> <a href=../../../getting_started/example_datasets/ title="Тестовые массивы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Тестовые массивы данных</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="Разработка ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Разработка ClickHouse</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/developer_instruction/ title="Если вы используете Windows" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Если вы используете Windows</a> <a href=../../../development/contrib/ title="Используемые сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Используемые сторонние библиотеки</a> <a href=../../../development/style/ title="Как писать код на C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как писать код на C++</a> <a href=../../../development/build/ title="Как построить ClickHouse для развития" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse для развития</a> <a href=../../../development/build_cross_osx/ title="Как построить ClickHouse на Linux для Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Linux для Mac OS X</a> <a href=../../../development/build_cross_arm/ title="Как построить ClickHouse на Linux для архитектуры AArch64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Linux для архитектуры AArch64 (ARM64)</a> <a href=../../../development/build_osx/ title="Как построить ClickHouse на Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Mac OS X</a> <a href=../../../development/browse_code/ title="Навигация по коду ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Навигация по коду ClickHouse</a> <a href=../../../development/architecture/ title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a> <a href=../../../development/ title="Разработка ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разработка ClickHouse</a> <a href=../../../development/tests/ title="Тестирование ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Тестирование ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=Руководства class="nav-link text-light text-wrap dropdown-toggle px-0">Руководства</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/apply_catboost_model/ title="Применение модели CatBoost в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение модели CatBoost в ClickHouse</a> <a href=../../../guides/ title=Руководства class="nav-link text-light text-wrap d-inline-block w-100 px-0">Руководства</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title="Справка по SQL" class="nav-link text-light text-wrap dropdown-toggle px-0">Справка по SQL</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-1 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-12-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql_reference/statements/create/ title="CREATE DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE DATABASE</a> <a href=../../../sql_reference/statements/insert_into/ title=INSERT class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT</a> <a href=../../../sql_reference/statements/show/ title="SHOW Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW Queries</a> <a href=../../../sql_reference/statements/system/ title="Запросы SYSTEM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Запросы SYSTEM</a> <a href=../../../sql_reference/statements/misc/ title="Прочие виды запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие виды запросов</a> <a href=../../../sql_reference/statements/select/ title="Синтаксис запросов SELECT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис запросов SELECT</a> </nav> </div> <a href=../../../sql_reference/operators/ title=Операторы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a> <a href=../../../sql_reference/syntax/ title=Синтаксис class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис</a> <a href=../../../sql_reference/ title="Справка по SQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справка по SQL</a> <a href=#sidebar-sidebar-12-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-5 title="Агрегатные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Агрегатные функции</a> <div id=sidebar-sidebar-12-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/aggregate_functions/ title="Агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Агрегатные функции</a> <a href=../../../sql_reference/aggregate_functions/combinators/ title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a> <a href=../../../sql_reference/aggregate_functions/parametric_functions/ title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a> <a href=../../../sql_reference/aggregate_functions/reference/ title="Справочник функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справочник функций</a> </nav> </div> <a href=#sidebar-sidebar-12-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-6 title=Словари class="nav-link text-light text-wrap dropdown-toggle px-0">Словари</a> <div id=sidebar-sidebar-12-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-6-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-6-1 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-12-6-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="Внешние словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние словари</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Иерархические словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Иерархические словари</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a> </nav> </div> <a href=../../../sql_reference/dictionaries/internal_dicts/ title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a> <a href=../../../sql_reference/dictionaries/ title=Словари class="nav-link text-light text-wrap d-inline-block w-100 px-0">Словари</a> </nav> </div> <a href=#sidebar-sidebar-12-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-7 title="Табличные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Табличные функции</a> <div id=sidebar-sidebar-12-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../sql_reference/table_functions/generate/ title=generate class="nav-link text-light text-wrap d-inline-block w-100 px-0">generate</a> <a href=../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql_reference/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql_reference/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql_reference/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql_reference/table_functions/remote/ title="remote, remoteSecure" class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote, remoteSecure</a> <a href=../../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql_reference/table_functions/ title="Табличные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Табличные функции</a> </nav> </div> <a href=#sidebar-sidebar-12-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8 title="Типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Типы данных</a> <div id=sidebar-sidebar-12-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-8-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-1 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-12-8-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> <a href=../../../sql_reference/data_types/domains/overview/ title=Домены class="nav-link text-light text-wrap d-inline-block w-100 px-0">Домены</a> </nav> </div> <a href=../../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types\_of\_arguments…)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types\_of\_arguments…)</a> <a href=../../../sql_reference/data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../../sql_reference/data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql_reference/data_types/decimal/ title="Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)</a> <a href=../../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../sql_reference/data_types/fixedstring/ title=FixedString class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString</a> <a href=../../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../sql_reference/data_types/nullable/ title=Nullable(TypeName) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable(TypeName)</a> <a href=../../../sql_reference/data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a> <a href=../../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql_reference/data_types/boolean/ title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a> <a href=../../../sql_reference/data_types/ title="Типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Типы данных</a> <a href=#sidebar-sidebar-12-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-18 title="Вложенные структуры данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Вложенные структуры данных</a> <div id=sidebar-sidebar-12-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> <a href=../../../sql_reference/data_types/nested_data_structures/ title="Вложенные структуры данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Вложенные структуры данных</a> </nav> </div> <a href=#sidebar-sidebar-12-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-19 title="Служебные типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Служебные типы данных</a> <div id=sidebar-sidebar-12-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../../sql_reference/data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> <a href=../../../sql_reference/data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../../sql_reference/data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../sql_reference/data_types/special_data_types/ title="Служебные типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Служебные типы данных</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-12-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-9 title=Функции class="nav-link text-light text-wrap dropdown-toggle px-0">Функции</a> <div id=sidebar-sidebar-12-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/functions/arithmetic_functions/ title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a> <a href=../../../sql_reference/functions/bit_functions/ title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a> <a href=../../../sql_reference/functions/logical_functions/ title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a> <a href=../../../sql_reference/functions/math_functions/ title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a> <a href=../../../sql_reference/functions/other_functions/ title="Прочие функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие функции</a> <a href=../../../sql_reference/functions/conditional_functions/ title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a> <a href=../../../sql_reference/functions/ title=Функции class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции</a> <a href=../../../sql_reference/functions/higher_order_functions/ title="Функции высшего порядка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции высшего порядка</a> <a href=../../../sql_reference/functions/random_functions/ title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a> <a href=../../../sql_reference/functions/bitmap_functions/ title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a> <a href=../../../sql_reference/functions/ip_address_functions/ title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a> <a href=../../../sql_reference/functions/json_functions/ title="Функции для работы с JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с JSON</a> <a href=../../../sql_reference/functions/functions_for_nulls/ title="Функции для работы с Nullable-аргументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с Nullable-аргументами</a> <a href=../../../sql_reference/functions/url_functions/ title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a> <a href=../../../sql_reference/functions/uuid_functions/ title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a> <a href=../../../sql_reference/functions/ext_dict_functions/ title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a> <a href=../../../sql_reference/functions/geo/ title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a> <a href=../../../sql_reference/functions/date_time_functions/ title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a> <a href=../../../sql_reference/functions/ym_dict_functions/ title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a> <a href=../../../sql_reference/functions/string_functions/ title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a> <a href=../../../sql_reference/functions/in_functions/ title="Функции для реализации оператора IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN</a> <a href=../../../sql_reference/functions/introspection/ title="Функции интроспекции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции интроспекции</a> <a href=../../../sql_reference/functions/encoding_functions/ title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a> <a href=../../../sql_reference/functions/machine_learning_functions/ title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a> <a href=../../../sql_reference/functions/rounding_functions/ title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a> <a href=../../../sql_reference/functions/array_functions/ title="Функции по работе с массивами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции по работе с массивами</a> <a href=../../../sql_reference/functions/string_search_functions/ title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a> <a href=../../../sql_reference/functions/string_replace_functions/ title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a> <a href=../../../sql_reference/functions/type_conversion_functions/ title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a> <a href=../../../sql_reference/functions/splitting_merging_functions/ title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a> <a href=../../../sql_reference/functions/comparison_functions/ title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a> <a href=../../../sql_reference/functions/hash_functions/ title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a> <a href=../../../sql_reference/functions/array_join/ title="Функция arrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция arrayJoin</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13 title=Эксплуатация class="nav-link text-light text-wrap dropdown-toggle px-0">Эксплуатация</a> <div id=sidebar-sidebar-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-13-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-1 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-13-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../operations/optimizing_performance/sampling_query_profiler/ title="Выборки Профилировщик Запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Выборки Профилировщик Запросов</a> </nav> </div> <a href=../../../operations/performance_test/ title="Как Протестировать Ваше Оборудование С Помощью ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как Протестировать Ваше Оборудование С Помощью ClickHouse</a> <a href=../../../operations/quotas/ title=Квоты class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a> <a href=../../../operations/configuration_files/ title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a> <a href=../../../operations/monitoring/ title=Мониторинг class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a> <a href=../../../operations/update/ title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a> <a href=../../../operations/access_rights/ title="Права доступа" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Права доступа</a> <a href=../../../operations/backup/ title="Резервное копирование данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование данных</a> <a href=../../../operations/system_tables/ title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a> <a href=../../../operations/tips/ title="Советы по эксплуатации" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Советы по эксплуатации</a> <a href=../../../operations/requirements/ title=Требования class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a> <a href=../../../operations/troubleshooting/ title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a> <a href=../../../operations/ title=Эксплуатация class="nav-link text-light text-wrap d-inline-block w-100 px-0">Эксплуатация</a> <a href=#sidebar-sidebar-13-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-14 title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap dropdown-toggle px-0">Конфигурационные параметры сервера</a> <div id=sidebar-sidebar-13-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_configuration_parameters/settings/ title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные параметры сервера</a> </nav> </div> <a href=#sidebar-sidebar-13-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-15 title=Настройки class="nav-link text-light text-wrap dropdown-toggle px-0">Настройки</a> <div id=sidebar-sidebar-13-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/settings/ title=Настройки class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a> <a href=../../../operations/settings/settings_users/ title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a> <a href=../../../operations/settings/constraints_on_settings/ title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a> <a href=../../../operations/settings/query_complexity/ title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a> <a href=../../../operations/settings/settings_profiles/ title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a> <a href=../../../operations/settings/permissions_for_queries/ title="Разрешения для запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения для запросов</a> </nav> </div> <a href=#sidebar-sidebar-13-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-16 title="Утилиты ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Утилиты ClickHouse</a> <div id=sidebar-sidebar-13-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-бенчмарк class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-бенчмарк</a> <a href=../../../operations/utilities/ title="Утилиты ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Утилиты ClickHouse</a> </nav> </div> </nav> </div> <a href=../../../single/clickhouse_ru.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF-версия title=PDF-версия height=24 class="d-block mr-1 float-left"><div>PDF-версия</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Помощь нужна!</p> <p class=lead>Следующее содержание этой страницы документации было переведено на машинный язык. Но в отличие от других сайтов, это делается не на лету. Этот переведенный текст живет в репозитории GitHub вместе с основной кодовой базой ClickHouse и ждет, когда другие носители языка сделают его более удобочитаемым для человека.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/whats_new/changelog/2018.md target=_blank rel="external nofollow noreferrer"> Помогите документации ClickHouse, отредактировав эту страницу </a> </p> </div> <h2 id=clickhouse-release-18-16>ClickHouse релиз 18.16<a class=headerlink href=#clickhouse-release-18-16 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-16-1-2018-12-21>ClickHouse релиз 18.16.1, 2018-12-21<a class=headerlink href=#clickhouse-release-18-16-1-2018-12-21 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes>Устранение ошибок:<a class=headerlink href=#bug-fixes title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка, которая приводила к проблемам с обновлением словарей с источником ODBC. <a href=https://github.com/ClickHouse/ClickHouse/issues/3825 rel="external nofollow noreferrer">#3825</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3829 rel="external nofollow noreferrer">#3829</a></li> <li>JIT-компиляция агрегатных функций теперь работает с колонками LowCardinality. <a href=https://github.com/ClickHouse/ClickHouse/issues/3838 rel="external nofollow noreferrer">#3838</a></li> </ul> <h4 id=improvements>Улучшения:<a class=headerlink href=#improvements title="Permanent link">&para;</a></h4> <ul> <li>Добавил тот <code>low_cardinality_allow_in_native_format</code> настройка (включена по умолчанию). Если этот параметр отключен, столбцы с низким коэффициентом полезности будут преобразованы в обычные столбцы для запросов SELECT, а обычные столбцы будут ожидаться для запросов INSERT. <a href=https://github.com/ClickHouse/ClickHouse/pull/3879 rel="external nofollow noreferrer">#3879</a></li> </ul> <h4 id=build-improvements>Улучшения сборки:<a class=headerlink href=#build-improvements title="Permanent link">&para;</a></h4> <ul> <li>Исправления для сборок на macOS и ARM.</li> </ul> <h3 id=clickhouse-release-18-16-0-2018-12-14>ClickHouse релиз 18.16.0, 2018-12-14<a class=headerlink href=#clickhouse-release-18-16-0-2018-12-14 title="Permanent link">&para;</a></h3> <h4 id=new-features>Новые средства:<a class=headerlink href=#new-features title="Permanent link">&para;</a></h4> <ul> <li><code>DEFAULT</code> выражения вычисляются для пропущенных полей при загрузке данных в полуструктурированные входные форматы (<code>JSONEachRow</code>, <code>TSKV</code>). Эта функция включена с помощью <code>insert_sample_with_metadata</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3555 rel="external nofollow noreferrer">#3555</a></li> <li>То <code>ALTER TABLE</code> запрос теперь имеет следующее значение <code>MODIFY ORDER BY</code> действие для изменения ключа сортировки при добавлении или удалении столбца таблицы. Это полезно для таблиц в <code>MergeTree</code> семейство, выполняющее дополнительные задачи при слиянии на основе этого ключа сортировки, например <code>SummingMergeTree</code>, <code>AggregatingMergeTree</code> и так далее. <a href=https://github.com/ClickHouse/ClickHouse/pull/3581 rel="external nofollow noreferrer">#3581</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3755 rel="external nofollow noreferrer">#3755</a></li> <li>Для столиков в центре города <code>MergeTree</code> семья, теперь вы можете указать другой ключ сортировки (<code>ORDER BY</code>) и индекс (<code>PRIMARY KEY</code>). Ключ сортировки может быть длиннее индекса. <a href=https://github.com/ClickHouse/ClickHouse/pull/3581 rel="external nofollow noreferrer">#3581</a></li> <li>Добавил тот <code>hdfs</code> функция таблицы и <code>HDFS</code> механизм таблиц для импорта и экспорта данных в HDFS. <a href=https://github.com/ClickHouse/ClickHouse/pull/3617 rel="external nofollow noreferrer">chenxing-xc</a></li> <li>Добавлены функции для работы с base64: <code>base64Encode</code>, <code>base64Decode</code>, <code>tryBase64Decode</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3350 rel="external nofollow noreferrer">Александр Крашенинников</a></li> <li>Теперь вы можете использовать параметр для настройки точности <code>uniqCombined</code> агрегатная функция (выбор количества ячеек Гиперлога). <a href=https://github.com/ClickHouse/ClickHouse/pull/3406 rel="external nofollow noreferrer">#3406</a></li> <li>Добавил тот <code>system.contributors</code> таблица, содержащая имена всех, кто совершил коммиты в ClickHouse. <a href=https://github.com/ClickHouse/ClickHouse/pull/3452 rel="external nofollow noreferrer">#3452</a></li> <li>Добавлена возможность опустить Раздел для <code>ALTER TABLE ... FREEZE</code> запрос для резервного копирования всех разделов сразу. <a href=https://github.com/ClickHouse/ClickHouse/pull/3514 rel="external nofollow noreferrer">#3514</a></li> <li>Добавлен <code>dictGet</code> и <code>dictGetOrDefault</code> функции, которые не требуют указания типа возвращаемого значения. Тип определяется автоматически из описания словаря. <a href=https://github.com/ClickHouse/ClickHouse/pull/3564 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Теперь вы можете указать комментарии для столбца в описании таблицы и изменить его с помощью <code>ALTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3377 rel="external nofollow noreferrer">#3377</a></li> <li>Чтение поддерживается для <code>Join</code> введите таблицы с простыми ключами. <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Теперь вы можете указать следующие параметры <code>join_use_nulls</code>, <code>max_rows_in_join</code>, <code>max_bytes_in_join</code>, и <code>join_overflow_mode</code> при создании <code>Join</code> типизированная таблица. <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Добавил тот <code>joinGet</code> функция, которая позволяет вам использовать a <code>Join</code> введите таблицу, как словарь. <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Добавил тот <code>partition_key</code>, <code>sorting_key</code>, <code>primary_key</code>, и <code>sampling_key</code> колонны в сторону <code>system.tables</code> таблица для того, чтобы предоставить информацию о ключах таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3609 rel="external nofollow noreferrer">#3609</a></li> <li>Добавил тот <code>is_in_partition_key</code>, <code>is_in_sorting_key</code>, <code>is_in_primary_key</code>, и <code>is_in_sampling_key</code> колонны в сторону <code>system.columns</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/pull/3609 rel="external nofollow noreferrer">#3609</a></li> <li>Добавил тот <code>min_time</code> и <code>max_time</code> колонны в сторону <code>system.parts</code> стол. Эти столбцы заполняются, когда ключ секционирования является выражением, состоящим из <code>DateTime</code> столбцы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3800 rel="external nofollow noreferrer">Emmanuel Donin de Rosière</a></li> </ul> <h4 id=bug-fixes-1>Устранение ошибок:<a class=headerlink href=#bug-fixes-1 title="Permanent link">&para;</a></h4> <ul> <li>Исправления и улучшения производительности для <code>LowCardinality</code> тип данных. <code>GROUP BY</code> с помощью <code>LowCardinality(Nullable(...))</code>. Получение значений <code>extremes</code>. Обработка функций высокого порядка. <code>LEFT ARRAY JOIN</code>. Распределенный <code>GROUP BY</code>. Функции, которые возвращают <code>Array</code>. Исполнение приказа <code>ORDER BY</code>. Написание в адрес <code>Distributed</code> таблицы (nicelulu). Обратная совместимость для <code>INSERT</code> запросы от старых клиентов, которые реализуют <code>Native</code> протокол. Поддержка <code>LowCardinality</code> для <code>JOIN</code>. Улучшена производительность при работе в одном потоке. <a href=https://github.com/ClickHouse/ClickHouse/pull/3823 rel="external nofollow noreferrer">#3823</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3803 rel="external nofollow noreferrer">#3803</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3799 rel="external nofollow noreferrer">#3799</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3769 rel="external nofollow noreferrer">#3769</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3744 rel="external nofollow noreferrer">#3744</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3681 rel="external nofollow noreferrer">#3681</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3651 rel="external nofollow noreferrer">#3651</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3649 rel="external nofollow noreferrer">#3649</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3641 rel="external nofollow noreferrer">#3641</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3632 rel="external nofollow noreferrer">#3632</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3568 rel="external nofollow noreferrer">#3568</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3523 rel="external nofollow noreferrer">#3523</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3518 rel="external nofollow noreferrer">#3518</a></li> <li>Исправлено как то <code>select_sequential_consistency</code> вариант работает. Ранее, когда этот параметр был включен, неполный результат иногда возвращался после начала записи в новый раздел. <a href=https://github.com/ClickHouse/ClickHouse/pull/2863 rel="external nofollow noreferrer">#2863</a></li> <li>Базы данных правильно задаются при выполнении DDL <code>ON CLUSTER</code> запросы и <code>ALTER UPDATE/DELETE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3772 rel="external nofollow noreferrer">#3772</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3460 rel="external nofollow noreferrer">#3460</a></li> <li>Базы данных правильно задаются для вложенных запросов внутри представления. <a href=https://github.com/ClickHouse/ClickHouse/pull/3521 rel="external nofollow noreferrer">#3521</a></li> <li>Исправлена ошибка в работе <code>PREWHERE</code> с <code>FINAL</code> для <code>VersionedCollapsingMergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/7167bfd7b365538f7a91c4307ad77e552ab4e8c1 rel="external nofollow noreferrer">7167bfd7</a></li> <li>Теперь вы можете использовать <code>KILL QUERY</code> чтобы отменить запросы, которые еще не начались, потому что они ждут блокировки таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3517 rel="external nofollow noreferrer">#3517</a></li> <li>Исправлены расчеты даты и времени, если часы были перенесены назад в полночь (это происходит в Иране, а произошло в Москве с 1981 по 1983 год). Ранее это приводило к тому, что время сбрасывалось на день раньше необходимого, а также вызывало неправильное форматирование даты и времени в текстовом формате. <a href=https://github.com/ClickHouse/ClickHouse/pull/3819 rel="external nofollow noreferrer">#3819</a></li> <li>Исправлены ошибки в некоторых случаях <code>VIEW</code> и подзапросы, которые опускают базу данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/3521 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлено состояние гонки при одновременном чтении из <code>MATERIALIZED VIEW</code> и удаление <code>MATERIALIZED VIEW</code> из-за того, что внутренняя дверь не запирается <code>MATERIALIZED VIEW</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3404 rel="external nofollow noreferrer">#3404</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3694 rel="external nofollow noreferrer">#3694</a></li> <li>Исправлена ошибка <code>Lock handler cannot be nullptr.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3689 rel="external nofollow noreferrer">#3689</a></li> <li>Исправлена обработка запросов, когда <code>compile_expressions</code> опция включена (она включена по умолчанию). Недетерминированные постоянные выражения, такие как <code>now</code> функции больше не разворачиваются. <a href=https://github.com/ClickHouse/ClickHouse/pull/3457 rel="external nofollow noreferrer">#3457</a></li> <li>Исправлена ошибка при указании непостоянного аргумента масштаба в <code>toDecimal32/64/128</code> функции.</li> <li>Исправлена ошибка при попытке вставить массив с помощью <code>NULL</code> элементы в системе <code>Values</code> форматирование в столбец типа <code>Array</code> без <code>Nullable</code> (если <code>input_format_values_interpret_expressions</code> = 1). <a href=https://github.com/ClickHouse/ClickHouse/pull/3487 rel="external nofollow noreferrer">#3487</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3503 rel="external nofollow noreferrer">#3503</a></li> <li>Исправлена непрерывная ошибка входа в систему <code>DDLWorker</code> если смотритель зоопарка не доступен. <a href=https://github.com/ClickHouse/ClickHouse/commit/8f50c620334988b28018213ec0092fe6423847e2 rel="external nofollow noreferrer">8f50c620</a></li> <li>Исправлен тип возврата для <code>quantile*</code> функции от <code>Date</code> и <code>DateTime</code> тип аргумента. <a href=https://github.com/ClickHouse/ClickHouse/pull/3580 rel="external nofollow noreferrer">#3580</a></li> <li>Исправлена ошибка <code>WITH</code> предложение, если оно указывает простой псевдоним без выражений. <a href=https://github.com/ClickHouse/ClickHouse/pull/3570 rel="external nofollow noreferrer">#3570</a></li> <li>Исправлена обработка запросов с именованными подзапросами и квалифицированными именами столбцов, когда <code>enable_optimize_predicate_expression</code> это включено. <a href=https://github.com/ClickHouse/ClickHouse/pull/3588 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлена ошибка <code>Attempt to attach to nullptr thread group</code> при работе с материализованными представлениями. <a href=https://github.com/ClickHouse/ClickHouse/pull/3623 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>Исправлена ошибка при передаче некоторых неверных аргументов в систему <code>arrayReverse</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871 rel="external nofollow noreferrer">73e3a7b6</a></li> <li>Исправлено переполнение буфера в системе <code>extractURLParameter</code> функция. Повышение производительности. Добавлена корректная обработка строк, содержащих ноль байт. <a href=https://github.com/ClickHouse/ClickHouse/commit/141e9799e49201d84ea8e951d1bed4fb6d3dacb5 rel="external nofollow noreferrer">141e9799</a></li> <li>Исправлено переполнение буфера в системе <code>lowerUTF8</code> и <code>upperUTF8</code> функции. Удалена возможность выполнения этих функций сверх <code>FixedString</code> аргумент типа. <a href=https://github.com/ClickHouse/ClickHouse/pull/3662 rel="external nofollow noreferrer">#3662</a></li> <li>Исправлено редкое состояние гонки при удалении <code>MergeTree</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3680 rel="external nofollow noreferrer">#3680</a></li> <li>Исправлено состояние гонки при чтении с <code>Buffer</code> таблицы и одновременно выполнять <code>ALTER</code> или <code>DROP</code> на целевых столах. <a href=https://github.com/ClickHouse/ClickHouse/pull/3719 rel="external nofollow noreferrer">#3719</a></li> <li>Исправлен сегфолт, если <code>max_temporary_non_const_columns</code> лимит был превышен. <a href=https://github.com/ClickHouse/ClickHouse/pull/3788 rel="external nofollow noreferrer">#3788</a></li> </ul> <h4 id=improvements-1>Улучшения:<a class=headerlink href=#improvements-1 title="Permanent link">&para;</a></h4> <ul> <li>Сервер не записывает обработанные конфигурационные файлы в систему. <code>/etc/clickhouse-server/</code> каталог. Вместо этого он спасает их в будущем. <code>preprocessed_configs</code> каталог внутри <code>path</code>. Это означает, что <code>/etc/clickhouse-server/</code> Директория не имеет доступа на запись для <code>clickhouse</code> пользователь, что повышает безопасность. <a href=https://github.com/ClickHouse/ClickHouse/pull/2443 rel="external nofollow noreferrer">#2443</a></li> <li>То <code>min_merge_bytes_to_use_direct_io</code> по умолчанию параметр установлен на 10 гигабайт. Слияние, которое образует большие части таблиц из семейства MergeTree, будет выполнено в <code>O_DIRECT</code> режим, который предотвращает чрезмерное вытеснение кэша страниц. <a href=https://github.com/ClickHouse/ClickHouse/pull/3504 rel="external nofollow noreferrer">#3504</a></li> <li>Ускоренный запуск сервера при наличии очень большого количества таблиц. <a href=https://github.com/ClickHouse/ClickHouse/pull/3398 rel="external nofollow noreferrer">#3398</a></li> <li>Добавлен пул соединений и HTTP <code>Keep-Alive</code> для связи между репликами. <a href=https://github.com/ClickHouse/ClickHouse/pull/3594 rel="external nofollow noreferrer">#3594</a></li> <li>Если синтаксис запроса неверен, то <code>400 Bad Request</code> код возвращается в виде <code>HTTP</code> интерфейс (ранее было возвращено 500). <a href=https://github.com/ClickHouse/ClickHouse/commit/31bc680ac5f4bb1d0360a8ba4696fa84bb47d6ab rel="external nofollow noreferrer">31bc680a</a></li> <li>То <code>join_default_strictness</code> параметр установлен в значение <code>ALL</code> по умолчанию для обеспечения совместимости. <a href=https://github.com/ClickHouse/ClickHouse/commit/120e2cbe2ff4fbad626c28042d9b28781c805afe rel="external nofollow noreferrer">120e2cbe</a></li> <li>Удалено ведение журнала в <code>stderr</code> из <code>re2</code> библиотека для недопустимых или сложных регулярных выражений. <a href=https://github.com/ClickHouse/ClickHouse/pull/3723 rel="external nofollow noreferrer">#3723</a></li> <li>Добавлено в <code>Kafka</code> механизм таблиц: проверяет наличие подписок перед началом чтения из Kafka; параметр kafka_max_block_size для таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3396 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>То <code>cityHash64</code>, <code>farmHash64</code>, <code>metroHash64</code>, <code>sipHash64</code>, <code>halfMD5</code>, <code>murmurHash2_32</code>, <code>murmurHash2_64</code>, <code>murmurHash3_32</code>, и <code>murmurHash3_64</code> функции теперь работают для любого количества аргументов и для аргументов в виде кортежей. <a href=https://github.com/ClickHouse/ClickHouse/pull/3451 rel="external nofollow noreferrer">#3451</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3519 rel="external nofollow noreferrer">#3519</a></li> <li>То <code>arrayReverse</code> функция теперь работает с любыми типами массивов. <a href=https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871 rel="external nofollow noreferrer">73e3a7b6</a></li> <li>Добавлен необязательный параметр: размер слота для <code>timeSlots</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/3724 rel="external nofollow noreferrer">Кирилл Шваков</a></li> <li>Для <code>FULL</code> и <code>RIGHT JOIN</code>, этот <code>max_block_size</code> настройка используется для потока несвязанных данных из правой таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3699 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Добавил тот <code>--secure</code> параметр командной строки в <code>clickhouse-benchmark</code> и <code>clickhouse-performance-test</code> чтобы включить TLS. <a href=https://github.com/ClickHouse/ClickHouse/pull/3688 rel="external nofollow noreferrer">#3688</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3690 rel="external nofollow noreferrer">#3690</a></li> <li>Тип преобразования, когда структура a <code>Buffer</code> таблица типов не соответствует структуре целевой таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3603 rel="external nofollow noreferrer">Виталий Баранов</a></li> <li>Добавил тот <code>tcp_keep_alive_timeout</code> опция для включения пакетов keep-alive после бездействия в течение заданного интервала времени. <a href=https://github.com/ClickHouse/ClickHouse/pull/3441 rel="external nofollow noreferrer">#3441</a></li> <li>Удалены ненужные кавычки значений для ключа раздела В разделе <code>system.parts</code> таблица, если она состоит из одного столбца. <a href=https://github.com/ClickHouse/ClickHouse/pull/3652 rel="external nofollow noreferrer">#3652</a></li> <li>Функция по модулю работает для <code>Date</code> и <code>DateTime</code> тип данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/3385 rel="external nofollow noreferrer">#3385</a></li> <li>Добавлены синонимы для этого <code>POWER</code>, <code>LN</code>, <code>LCASE</code>, <code>UCASE</code>, <code>REPLACE</code>, <code>LOCATE</code>, <code>SUBSTR</code>, и <code>MID</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/3774 rel="external nofollow noreferrer">#3774</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3763 rel="external nofollow noreferrer">#3763</a> Некоторые имена функций не зависят от регистра для обеспечения совместимости со стандартом SQL. Добавлен синтаксический сахар <code>SUBSTRING(expr FROM start FOR length)</code> для совместимости с SQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/3804 rel="external nofollow noreferrer">#3804</a></li> <li>Добавлена возможность <code>mlock</code> страницы памяти, соответствующие <code>clickhouse-server</code> исполняемый код, чтобы предотвратить его вытеснение из памяти. По умолчанию эта функция отключена. <a href=https://github.com/ClickHouse/ClickHouse/pull/3553 rel="external nofollow noreferrer">#3553</a></li> <li>Улучшенная производительность при чтении с <code>O_DIRECT</code> (с помощью <code>min_bytes_to_use_direct_io</code> опция включена). <a href=https://github.com/ClickHouse/ClickHouse/pull/3405 rel="external nofollow noreferrer">#3405</a></li> <li>Улучшенная производительность системы <code>dictGet...OrDefault</code> функция для постоянного ключевого аргумента и непостоянного аргумента по умолчанию. <a href=https://github.com/ClickHouse/ClickHouse/pull/3563 rel="external nofollow noreferrer">Амос Птица</a></li> <li>То <code>firstSignificantSubdomain</code> функция теперь обрабатывает Домены <code>gov</code>, <code>mil</code>, и <code>edu</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3601 rel="external nofollow noreferrer">Игорь Hatarist</a> Повышение производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/3628 rel="external nofollow noreferrer">#3628</a></li> <li>Возможность указать пользовательские переменные среды для запуска <code>clickhouse-server</code> с помощью <code>SYS-V init.d</code> сценарий по определению <code>CLICKHOUSE_PROGRAM_ENV</code> в <code>/etc/default/clickhouse</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/3612 rel="external nofollow noreferrer">Павел Башинский</a></li> <li>Правильный код возврата для сценария clickhouse-server init. <a href=https://github.com/ClickHouse/ClickHouse/pull/3516 rel="external nofollow noreferrer">#3516</a></li> <li>То <code>system.metrics</code> таблица теперь имеет <code>VersionInteger</code> метрика и <code>system.build_options</code> есть ли добавленная строка <code>VERSION_INTEGER</code>, который содержит числовую форму версии ClickHouse, например <code>18016000</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3644 rel="external nofollow noreferrer">#3644</a></li> <li>Удалена возможность сравнения <code>Date</code> введите с номером, чтобы избежать потенциальных ошибок, таких как <code>date = 2018-12-17</code>, где кавычки вокруг даты опущены по ошибке. <a href=https://github.com/ClickHouse/ClickHouse/pull/3687 rel="external nofollow noreferrer">#3687</a></li> <li>Исправлено поведение статусных функций, таких как <code>rowNumberInAllBlocks</code>. Ранее они выводили результат, который был на одно число больше из-за запуска во время анализа запроса. <a href=https://github.com/ClickHouse/ClickHouse/pull/3729 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Если <code>force_restore_data</code> файл не может быть удален, отображается сообщение об ошибке. <a href=https://github.com/ClickHouse/ClickHouse/pull/3794 rel="external nofollow noreferrer">Амос Птица</a></li> </ul> <h4 id=build-improvements-1>Улучшения сборки:<a class=headerlink href=#build-improvements-1 title="Permanent link">&para;</a></h4> <ul> <li>Обновлено приложение <code>jemalloc</code> библиотека, которая исправляет потенциальную утечку памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/3557 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Профилирование с помощью <code>jemalloc</code> включен по умолчанию для отладки сборок. <a href=https://github.com/ClickHouse/ClickHouse/commit/2cc82f5cbe266421cd4c1165286c2c47e5ffcb15 rel="external nofollow noreferrer">2cc82f5c</a></li> <li>Добавлена возможность запуска интеграционных тестов только тогда, когда <code>Docker</code> устанавливается в системе. <a href=https://github.com/ClickHouse/ClickHouse/pull/3650 rel="external nofollow noreferrer">#3650</a></li> <li>Добавлен тест выражения fuzz в запросах SELECT. <a href=https://github.com/ClickHouse/ClickHouse/pull/3442 rel="external nofollow noreferrer">#3442</a></li> <li>Добавлен стресс-тест для коммитов, который выполняет функциональные тесты параллельно и в случайном порядке, чтобы обнаружить больше условий гонки. <a href=https://github.com/ClickHouse/ClickHouse/pull/3438 rel="external nofollow noreferrer">#3438</a></li> <li>Улучшен метод запуска clickhouse-сервера в образе Docker. <a href=https://github.com/ClickHouse/ClickHouse/pull/3663 rel="external nofollow noreferrer">Эльгазал Ахмед</a></li> <li>Для Docker образ, добавлена поддержка для инициализации базы данных с помощью файлов в <code>/docker-entrypoint-initdb.d</code> каталог. <a href=https://github.com/ClickHouse/ClickHouse/pull/3695 rel="external nofollow noreferrer">Константин Лебедев</a></li> <li>Исправления опирается на руку. <a href=https://github.com/ClickHouse/ClickHouse/pull/3709 rel="external nofollow noreferrer">#3709</a></li> </ul> <h4 id=backward-incompatible-changes>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes title="Permanent link">&para;</a></h4> <ul> <li>Удалена возможность сравнения <code>Date</code> тип с номером. Вместо <code>toDate('2018-12-18') = 17883</code>, вы должны использовать явное преобразование типов <code>= toDate(17883)</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3687 rel="external nofollow noreferrer">#3687</a></li> </ul> <h2 id=clickhouse-release-18-14>ClickHouse релиз 18.14<a class=headerlink href=#clickhouse-release-18-14 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-14-19-2018-12-19>ClickHouse релиз 18.14.19, 2018-12-19<a class=headerlink href=#clickhouse-release-18-14-19-2018-12-19 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-2>Устранение ошибок:<a class=headerlink href=#bug-fixes-2 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка, которая привела к проблемам с обновлением словарей с источником ODBC. <a href=https://github.com/ClickHouse/ClickHouse/issues/3825 rel="external nofollow noreferrer">#3825</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3829 rel="external nofollow noreferrer">#3829</a></li> <li>Базы данных правильно задаются при выполнении DDL <code>ON CLUSTER</code> запросы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3460 rel="external nofollow noreferrer">#3460</a></li> <li>Исправлен сегфолт, если <code>max_temporary_non_const_columns</code> лимит был превышен. <a href=https://github.com/ClickHouse/ClickHouse/pull/3788 rel="external nofollow noreferrer">#3788</a></li> </ul> <h4 id=build-improvements-2>Улучшения сборки:<a class=headerlink href=#build-improvements-2 title="Permanent link">&para;</a></h4> <ul> <li>Исправления опирается на руку.</li> </ul> <h3 id=clickhouse-release-18-14-18-2018-12-04>ClickHouse релиз 18.14.18, 2018-12-04<a class=headerlink href=#clickhouse-release-18-14-18-2018-12-04 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-3>Устранение ошибок:<a class=headerlink href=#bug-fixes-3 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка в работе <code>dictGet...</code> функция для словарей типа <code>range</code>, если один из аргументов является постоянным, а другой-нет. <a href=https://github.com/ClickHouse/ClickHouse/pull/3751 rel="external nofollow noreferrer">#3751</a></li> <li>Исправлена ошибка, приводившая к появлению сообщений <code>netlink: '...': attribute type 1 has an invalid length</code> чтобы быть напечатанным в журнале ядра Linux, это происходило только на достаточно свежих версиях ядра Linux. <a href=https://github.com/ClickHouse/ClickHouse/pull/3749 rel="external nofollow noreferrer">#3749</a></li> <li>Исправлена обработка выхода онлайн / оффлайн в функции <code>empty</code> для аргументации из <code>FixedString</code> тип. <a href=https://github.com/ClickHouse/ClickHouse/pull/3703 rel="external nofollow noreferrer">Дэниел, Дао Куанг Мин</a></li> <li>Исправлено чрезмерное выделение памяти при использовании большого значения <code>max_query_size</code> настройка (фрагмент памяти из <code>max_query_size</code> байты были предварительно распределены сразу). <a href=https://github.com/ClickHouse/ClickHouse/pull/3720 rel="external nofollow noreferrer">#3720</a></li> </ul> <h4 id=build-changes>Изменения в сборке:<a class=headerlink href=#build-changes title="Permanent link">&para;</a></h4> <ul> <li>Исправлена сборка с библиотеками LLVM/Clang версии 7 из пакетов ОС (эти библиотеки используются для компиляции запросов во время выполнения). <a href=https://github.com/ClickHouse/ClickHouse/pull/3582 rel="external nofollow noreferrer">#3582</a></li> </ul> <h3 id=clickhouse-release-18-14-17-2018-11-30>ClickHouse релиз 18.14.17, 2018-11-30<a class=headerlink href=#clickhouse-release-18-14-17-2018-11-30 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-4>Устранение ошибок:<a class=headerlink href=#bug-fixes-4 title="Permanent link">&para;</a></h4> <ul> <li>Исправлены случаи, когда процесс моста ODBC не завершался с основным серверным процессом. <a href=https://github.com/ClickHouse/ClickHouse/pull/3642 rel="external nofollow noreferrer">#3642</a></li> <li>Исправлено одновременное включение в <code>Distributed</code> таблица со списком столбцов, который отличается от списка столбцов удаленной таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3673 rel="external nofollow noreferrer">#3673</a></li> <li>Исправлено редкое состояние гонки, которое может привести к аварии при падении таблицы MergeTree. <a href=https://github.com/ClickHouse/ClickHouse/pull/3643 rel="external nofollow noreferrer">#3643</a></li> <li>Исправлена взаимоблокировка запросов в случае сбоя при создании потока запросов с помощью <code>Resource temporarily unavailable</code> ошибка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3643 rel="external nofollow noreferrer">#3643</a></li> <li>Исправлен разбор текста <code>ENGINE</code> п. Когда <code>CREATE AS table</code> был использован синтаксис, а также <code>ENGINE</code> оговорка была указана еще до того, как <code>AS table</code> (ошибка привела к игнорированию указанного движка). <a href=https://github.com/ClickHouse/ClickHouse/pull/3692 rel="external nofollow noreferrer">#3692</a></li> </ul> <h3 id=clickhouse-release-18-14-15-2018-11-21>ClickHouse релиз 18.14.15, 2018-11-21<a class=headerlink href=#clickhouse-release-18-14-15-2018-11-21 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-5>Устранение ошибок:<a class=headerlink href=#bug-fixes-5 title="Permanent link">&para;</a></h4> <ul> <li>Размер блока памяти был завышен при десериализации столбца типа <code>Array(String)</code> это приводит к тому, что «Memory limit exceeded» ошибки. Проблема появилась в версии 18.12.13. <a href=https://github.com/ClickHouse/ClickHouse/issues/3589 rel="external nofollow noreferrer">#3589</a></li> </ul> <h3 id=clickhouse-release-18-14-14-2018-11-20>ClickHouse релиз 18.14.14, 2018-11-20<a class=headerlink href=#clickhouse-release-18-14-14-2018-11-20 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-6>Устранение ошибок:<a class=headerlink href=#bug-fixes-6 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено <code>ON CLUSTER</code> запросы, когда кластер настроен как безопасный (флаг <code>&lt;secure&gt;</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/3599 rel="external nofollow noreferrer">#3599</a></li> </ul> <h4 id=build-changes-1>Изменения в сборке:<a class=headerlink href=#build-changes-1 title="Permanent link">&para;</a></h4> <ul> <li>Исправлены неполадки (llvm-7 от system, macos) <a href=https://github.com/ClickHouse/ClickHouse/pull/3582 rel="external nofollow noreferrer">#3582</a></li> </ul> <h3 id=clickhouse-release-18-14-13-2018-11-08>ClickHouse релиз 18.14.13, 2018-11-08<a class=headerlink href=#clickhouse-release-18-14-13-2018-11-08 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-7>Устранение ошибок:<a class=headerlink href=#bug-fixes-7 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка <code>Block structure mismatch in MergingSorted stream</code> ошибка. <a href=https://github.com/ClickHouse/ClickHouse/issues/3162 rel="external nofollow noreferrer">#3162</a></li> <li>Исправлено <code>ON CLUSTER</code> запросы в случае, если в конфигурации кластера были включены защищенные соединения (the <code>&lt;secure&gt;</code> флаг). <a href=https://github.com/ClickHouse/ClickHouse/pull/3465 rel="external nofollow noreferrer">#3465</a></li> <li>Исправлена ошибка в запросах, которые использовались <code>SAMPLE</code>, <code>PREWHERE</code> и столбцы псевдонимов. <a href=https://github.com/ClickHouse/ClickHouse/pull/3543 rel="external nofollow noreferrer">#3543</a></li> <li>Исправлена редкая ошибка <code>unknown compression method</code> ошибка, когда <code>min_bytes_to_use_direct_io</code> настройка была включена. <a href=https://github.com/ClickHouse/ClickHouse/pull/3544 rel="external nofollow noreferrer">3544</a></li> </ul> <h4 id=performance-improvements>Улучшения в производительности:<a class=headerlink href=#performance-improvements title="Permanent link">&para;</a></h4> <ul> <li>Исправлена регрессия производительности запросов с помощью <code>GROUP BY</code> столбцов типа UInt16 или Date при выполнении на процессорах AMD EPYC. <a href=https://github.com/ClickHouse/ClickHouse/pull/3512 rel="external nofollow noreferrer">Игорь Лапко</a></li> <li>Исправлена регрессия производительности запросов, обрабатывающих длинные строки. <a href=https://github.com/ClickHouse/ClickHouse/pull/3530 rel="external nofollow noreferrer">#3530</a></li> </ul> <h4 id=build-improvements-3>Улучшения сборки:<a class=headerlink href=#build-improvements-3 title="Permanent link">&para;</a></h4> <ul> <li>Улучшения для упрощения сборки Arcadia. <a href=https://github.com/ClickHouse/ClickHouse/pull/3475 rel="external nofollow noreferrer">#3475</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/3535 rel="external nofollow noreferrer">#3535</a></li> </ul> <h3 id=clickhouse-release-18-14-12-2018-11-02>ClickHouse релиз 18.14.12, 2018-11-02<a class=headerlink href=#clickhouse-release-18-14-12-2018-11-02 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-8>Устранение ошибок:<a class=headerlink href=#bug-fixes-8 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка при соединении двух безымянных подзапросов. <a href=https://github.com/ClickHouse/ClickHouse/pull/3505 rel="external nofollow noreferrer">#3505</a></li> <li>Исправлена генерация некорректных запросов (с пустым именем <code>WHERE</code> пункт 2) при запросе внешних баз данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/3477 rel="external nofollow noreferrer">хотид</a></li> <li>Исправлено использование неверного значения таймаута в словарях ODBC. <a href=https://github.com/ClickHouse/ClickHouse/pull/3511 rel="external nofollow noreferrer">Marek Vavruša</a></li> </ul> <h3 id=clickhouse-release-18-14-11-2018-10-29>ClickHouse релиз 18.14.11, 2018-10-29<a class=headerlink href=#clickhouse-release-18-14-11-2018-10-29 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-9>Устранение ошибок:<a class=headerlink href=#bug-fixes-9 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка <code>Block structure mismatch in UNION stream: different number of columns</code> в предельных запросах. <a href=https://github.com/ClickHouse/ClickHouse/issues/2156 rel="external nofollow noreferrer">#2156</a></li> <li>Исправлены ошибки при объединении данных в таблицах, содержащих массивы внутри вложенных структур. <a href=https://github.com/ClickHouse/ClickHouse/pull/3397 rel="external nofollow noreferrer">#3397</a></li> <li>Исправлены неправильные результаты запроса, если <code>merge_tree_uniform_read_distribution</code> настройка отключена (по умолчанию она включена). <a href=https://github.com/ClickHouse/ClickHouse/pull/3429 rel="external nofollow noreferrer">#3429</a></li> <li>Исправлена ошибка при вставках в распределенную таблицу в собственном формате. <a href=https://github.com/ClickHouse/ClickHouse/issues/3411 rel="external nofollow noreferrer">#3411</a></li> </ul> <h3 id=clickhouse-release-18-14-10-2018-10-23>ClickHouse релиз 18.14.10, 2018-10-23<a class=headerlink href=#clickhouse-release-18-14-10-2018-10-23 title="Permanent link">&para;</a></h3> <ul> <li>То <code>compile_expressions</code> настройка (JIT-компиляция выражений) по умолчанию отключена. <a href=https://github.com/ClickHouse/ClickHouse/pull/3410 rel="external nofollow noreferrer">#3410</a></li> <li>То <code>enable_optimize_predicate_expression</code> по умолчанию этот параметр отключен.</li> </ul> <h3 id=clickhouse-release-18-14-9-2018-10-16>ClickHouse релиз 18.14.9, 2018-10-16<a class=headerlink href=#clickhouse-release-18-14-9-2018-10-16 title="Permanent link">&para;</a></h3> <h4 id=new-features-1>Новые средства:<a class=headerlink href=#new-features-1 title="Permanent link">&para;</a></h4> <ul> <li>То <code>WITH CUBE</code> модификатор для <code>GROUP BY</code> (альтернативный синтаксис <code>GROUP BY CUBE(...)</code> также доступный). <a href=https://github.com/ClickHouse/ClickHouse/pull/3172 rel="external nofollow noreferrer">#3172</a></li> <li>Добавил тот <code>formatDateTime</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/2770 rel="external nofollow noreferrer">Александр Крашенинников</a></li> <li>Добавил тот <code>JDBC</code> двигатель таблицы и <code>jdbc</code> табличная функция (требуется установка clickhouse-jdbc-bridge). <a href=https://github.com/ClickHouse/ClickHouse/pull/3210 rel="external nofollow noreferrer">Александр Крашенинников</a></li> <li>Добавлены функции для работы с номером недели ISO: <code>toISOWeek</code>, <code>toISOYear</code>, <code>toStartOfISOYear</code>, и <code>toDayOfYear</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3146 rel="external nofollow noreferrer">#3146</a></li> <li>Теперь вы можете использовать <code>Nullable</code> колонки для <code>MySQL</code> и <code>ODBC</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3362 rel="external nofollow noreferrer">#3362</a></li> <li>Вложенные структуры данных могут быть прочитаны как вложенные объекты в <code>JSONEachRow</code> формат. Добавил тот <code>input_format_import_nested_json</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3144 rel="external nofollow noreferrer">Веломан Юнкан</a></li> <li>Параллельная обработка доступна для многих <code>MATERIALIZED VIEW</code>s при вставке данных. Смотрите сами <code>parallel_view_processing</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3208 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>Добавил тот <code>SYSTEM FLUSH LOGS</code> запрос (принудительный сброс журнала в системные таблицы, такие как <code>query_log</code>) <a href=https://github.com/ClickHouse/ClickHouse/pull/3321 rel="external nofollow noreferrer">#3321</a></li> <li>Теперь вы можете использовать заранее определенные <code>database</code> и <code>table</code> макросы при объявлении <code>Replicated</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3251 rel="external nofollow noreferrer">#3251</a></li> <li>Добавлена возможность чтения <code>Decimal</code> введите значения в инженерной нотации (с указанием степеней десять). <a href=https://github.com/ClickHouse/ClickHouse/pull/3153 rel="external nofollow noreferrer">#3153</a></li> </ul> <h4 id=experimental-features>Экспериментальная возможность:<a class=headerlink href=#experimental-features title="Permanent link">&para;</a></h4> <ul> <li>Оптимизация группы по предложению для <code>LowCardinality data types.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3138 rel="external nofollow noreferrer">#3138</a></li> <li>Оптимизированный расчет выражений для <code>LowCardinality data types.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3200 rel="external nofollow noreferrer">#3200</a></li> </ul> <h4 id=improvements-2>Улучшения:<a class=headerlink href=#improvements-2 title="Permanent link">&para;</a></h4> <ul> <li>Значительно уменьшено потребление памяти для запросов с помощью <code>ORDER BY</code> и <code>LIMIT</code>. Смотрите сами <code>max_bytes_before_remerge_sort</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3205 rel="external nofollow noreferrer">#3205</a></li> <li>В случае отсутствия <code>JOIN</code> (<code>LEFT</code>, <code>INNER</code>, …), <code>INNER JOIN</code> предполагается. <a href=https://github.com/ClickHouse/ClickHouse/pull/3147 rel="external nofollow noreferrer">#3147</a></li> <li>Квалифицированные звездочки корректно работают в запросах с <code>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3202 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>То <code>ODBC</code> механизм таблиц правильно выбирает метод для цитирования идентификаторов на диалекте SQL удаленной базы данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/3210 rel="external nofollow noreferrer">Александр Крашенинников</a></li> <li>То <code>compile_expressions</code> настройка (JIT-компиляция выражений) включена по умолчанию.</li> <li>Исправлено поведение для одновременного удаления базы данных / таблицы, если она существует, и создания базы данных/таблицы, если она не существует. Ранее, а <code>CREATE DATABASE ... IF NOT EXISTS</code> запрос может вернуть сообщение об ошибке «File … already exists», и то <code>CREATE TABLE ... IF NOT EXISTS</code> и <code>DROP TABLE IF EXISTS</code> запросы могут вернуться <code>Table ... is creating or attaching right now</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3101 rel="external nofollow noreferrer">#3101</a></li> <li>Как и в выражениях с постоянной правой половиной, они передаются на удаленный сервер при запросе из таблиц MySQL или ODBC. <a href=https://github.com/ClickHouse/ClickHouse/pull/3182 rel="external nofollow noreferrer">#3182</a></li> <li>Сравнения с постоянными выражениями в предложении WHERE передаются удаленному серверу при запросе из таблиц MySQL и ODBC. Раньше проходили только сравнения с константами. <a href=https://github.com/ClickHouse/ClickHouse/pull/3182 rel="external nofollow noreferrer">#3182</a></li> <li>Правильный расчет ширины строки в терминале для <code>Pretty</code> форматы, в том числе строки с иероглифами. <a href=https://github.com/ClickHouse/ClickHouse/pull/3257 rel="external nofollow noreferrer">Амос Птица</a>.</li> <li><code>ON CLUSTER</code> может быть указан для <code>ALTER UPDATE</code> запросы.</li> <li>Улучшенная производительность для считывания данных в <code>JSONEachRow</code> формат. <a href=https://github.com/ClickHouse/ClickHouse/pull/3332 rel="external nofollow noreferrer">#3332</a></li> <li>Добавлены синонимы для этого <code>LENGTH</code> и <code>CHARACTER_LENGTH</code> функции для обеспечения совместимости. То <code>CONCAT</code> функция больше не зависит от регистра. <a href=https://github.com/ClickHouse/ClickHouse/pull/3306 rel="external nofollow noreferrer">#3306</a></li> <li>Добавил тот <code>TIMESTAMP</code> синоним для этого <code>DateTime</code> тип. <a href=https://github.com/ClickHouse/ClickHouse/pull/3390 rel="external nofollow noreferrer">#3390</a></li> <li>В журналах сервера всегда есть место, зарезервированное для query_id, даже если строка журнала не связана с запросом. Это упрощает синтаксический анализ текстовых журналов сервера с помощью сторонних инструментов.</li> <li>Потребление памяти запросом регистрируется, когда оно превышает следующий уровень целого числа гигабайт. <a href=https://github.com/ClickHouse/ClickHouse/pull/3205 rel="external nofollow noreferrer">#3205</a></li> <li>Добавлен режим совместимости для случая, когда клиентская библиотека, использующая собственный протокол, по ошибке отправляет меньше столбцов, чем сервер ожидает для запроса INSERT. Этот сценарий был возможен при использовании библиотеки clickhouse-cpp. Ранее этот сценарий приводил к сбою сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/3171 rel="external nofollow noreferrer">#3171</a></li> <li>В пользовательском выражении WHERE in <code>clickhouse-copier</code>, теперь вы можете использовать a <code>partition_key</code> псевдоним (для дополнительной фильтрации по исходному разделу таблицы). Это полезно, если схема секционирования изменяется во время копирования,но только незначительно. <a href=https://github.com/ClickHouse/ClickHouse/pull/3166 rel="external nofollow noreferrer">#3166</a></li> <li>Рабочий процесс компании <code>Kafka</code> движок был перемещен в фоновый пул потоков, чтобы автоматически снизить скорость считывания данных при высоких нагрузках. <a href=https://github.com/ClickHouse/ClickHouse/pull/3215 rel="external nofollow noreferrer">Marek Vavruša</a>.</li> <li>Поддержка чтения <code>Tuple</code> и <code>Nested</code> значения таких структур, как <code>struct</code> в <code>Cap'n'Proto format</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3216 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>Список доменов верхнего уровня для <code>firstSignificantSubdomain</code> функция теперь включает в себя домен <code>biz</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3219 rel="external nofollow noreferrer">деказеал</a></li> <li>В конфигурации внешних справочников, <code>null_value</code> интерпретируется как значение типа данных по умолчанию. <a href=https://github.com/ClickHouse/ClickHouse/pull/3330 rel="external nofollow noreferrer">#3330</a></li> <li>Поддержка для the <code>intDiv</code> и <code>intDivOrZero</code> функции для <code>Decimal</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/b48402e8712e2b9b151e0eef8193811d433a1264 rel="external nofollow noreferrer">b48402e8</a></li> <li>Поддержка для the <code>Date</code>, <code>DateTime</code>, <code>UUID</code>, и <code>Decimal</code> типы в качестве ключа для <code>sumMap</code> статистическая функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/3281 rel="external nofollow noreferrer">#3281</a></li> <li>Поддержка для the <code>Decimal</code> тип данных во внешних справочниках. <a href=https://github.com/ClickHouse/ClickHouse/pull/3324 rel="external nofollow noreferrer">#3324</a></li> <li>Поддержка для the <code>Decimal</code> введите данные в поле <code>SummingMergeTree</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3348 rel="external nofollow noreferrer">#3348</a></li> <li>Добавлены специализации для <code>UUID</code> в <code>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3366 rel="external nofollow noreferrer">#3366</a></li> <li>Уменьшилось количество <code>open</code> и <code>close</code> системные вызовы для чтения <code>MergeTree table</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3283 rel="external nofollow noreferrer">#3283</a></li> <li>A <code>TRUNCATE TABLE</code> запрос может быть выполнен на любой реплике (запрос передается в реплику лидера). <a href=https://github.com/ClickHouse/ClickHouse/pull/3375 rel="external nofollow noreferrer">Кирилл Шваков</a></li> </ul> <h4 id=bug-fixes-10>Устранение ошибок:<a class=headerlink href=#bug-fixes-10 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена проблема с <code>Dictionary</code> таблицы для <code>range_hashed</code> словари. Эта ошибка произошла в версии 18.12.17. <a href=https://github.com/ClickHouse/ClickHouse/pull/1702 rel="external nofollow noreferrer">#1702</a></li> <li>Исправлена ошибка при загрузке <code>range_hashed</code> словари (сообщение <code>Unsupported type Nullable (...)</code>). Эта ошибка произошла в версии 18.12.17. <a href=https://github.com/ClickHouse/ClickHouse/pull/3362 rel="external nofollow noreferrer">#3362</a></li> <li>Исправлены ошибки в работе <code>pointInPolygon</code> функция обусловлена накоплением неточных вычислений для полигонов с большим количеством вершин, расположенных близко друг к другу. <a href=https://github.com/ClickHouse/ClickHouse/pull/3331 rel="external nofollow noreferrer">#3331</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3341 rel="external nofollow noreferrer">#3341</a></li> <li>Если после слияния частей данных контрольная сумма для результирующей части отличается от результата того же слияния в другой реплике, то результат слияния удаляется и часть данных загружается из другой реплики (это правильное поведение). Но после загрузки части данных она не могла быть добавлена в рабочий набор из-за ошибки, что часть уже существует (потому что часть данных была удалена с некоторой задержкой после слияния). Это привело к циклическим попыткам загрузить одни и те же данные. <a href=https://github.com/ClickHouse/ClickHouse/pull/3194 rel="external nofollow noreferrer">#3194</a></li> <li>Исправлено неправильное вычисление общего потребления памяти запросами (из-за неправильного вычисления <code>max_memory_usage_for_all_queries</code> установка сработала неправильно и то <code>MemoryTracking</code> метрика имела неверное значение). Эта ошибка произошла в версии 18.12.13. <a href=https://github.com/ClickHouse/ClickHouse/pull/3344 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>Исправлена функциональность программы <code>CREATE TABLE ... ON CLUSTER ... AS SELECT ...</code> Эта ошибка произошла в версии 18.12.13. <a href=https://github.com/ClickHouse/ClickHouse/pull/3247 rel="external nofollow noreferrer">#3247</a></li> <li>Исправлена ненужная подготовка структур данных для <code>JOIN</code>s на сервере, который инициирует запрос, если <code>JOIN</code> выполняется только на удаленных серверах. <a href=https://github.com/ClickHouse/ClickHouse/pull/3340 rel="external nofollow noreferrer">#3340</a></li> <li>Исправлены ошибки в работе <code>Kafka</code> движок: взаимоблокировки после исключений при запуске чтения данных и блокировки по завершении работы <a href=https://github.com/ClickHouse/ClickHouse/pull/3215 rel="external nofollow noreferrer">Marek Vavruša</a>.</li> <li>Для <code>Kafka</code> таблицы, опциональные <code>schema</code> параметр не был передан (схема <code>Cap'n'Proto</code> формат). <a href=https://github.com/ClickHouse/ClickHouse/pull/3150 rel="external nofollow noreferrer">Войтех Splichal</a></li> <li>Если в ансамбле серверов ZooKeeper есть серверы, которые принимают соединение, но затем немедленно закрывают его вместо ответа на рукопожатие, ClickHouse выбирает для подключения другой сервер. Ранее это приводило к ошибке <code>Cannot read all data. Bytes read: 0. Bytes expected: 4.</code> и сервер не мог запуститься. <a href=https://github.com/ClickHouse/ClickHouse/commit/8218cf3a5f39a43401953769d6d12a0bb8d29da9 rel="external nofollow noreferrer">8218cf3a</a></li> <li>Если ансамбль серверов ZooKeeper содержит серверы, для которых DNS-запрос возвращает ошибку, эти серверы игнорируются. <a href=https://github.com/ClickHouse/ClickHouse/commit/17b8e209221061325ad7ba0539f03c6e65f87f29 rel="external nofollow noreferrer">17b8e209</a></li> <li>Фиксированное преобразование типа между <code>Date</code> и <code>DateTime</code> при вставке данных в <code>VALUES</code> формат (если <code>input_format_values_interpret_expressions = 1</code>). Ранее преобразование производилось между числовым значением числа дней в Unix Epoch time и unix timestamp, что приводило к неожиданным результатам. <a href=https://github.com/ClickHouse/ClickHouse/pull/3229 rel="external nofollow noreferrer">#3229</a></li> <li>Исправлено преобразование типов между <code>Decimal</code> и целые числа. <a href=https://github.com/ClickHouse/ClickHouse/pull/3211 rel="external nofollow noreferrer">#3211</a></li> <li>Исправлены ошибки в работе <code>enable_optimize_predicate_expression</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3231 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлена ошибка синтаксического анализа в формате CSV с числами с плавающей запятой, если используется нестандартный разделитель CSV, например <code>;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3155 rel="external nofollow noreferrer">#3155</a></li> <li>Исправлена ошибка <code>arrayCumSumNonNegative</code> функция (она не накапливает отрицательных значений, если накопитель меньше нуля). <a href=https://github.com/ClickHouse/ClickHouse/pull/3163 rel="external nofollow noreferrer">Алексей Студнев</a></li> <li>Исправлено как <code>Merge</code> таблицы работают на верхней части <code>Distributed</code> таблицы при использовании <code>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3165 rel="external nofollow noreferrer">#3165</a></li> <li>Исправлены ошибки в системе <code>ALTER UPDATE</code> запрос.</li> <li>Исправлены ошибки в работе <code>odbc</code> табличная функция, появившаяся в версии 18.12. <a href=https://github.com/ClickHouse/ClickHouse/pull/3197 rel="external nofollow noreferrer">#3197</a></li> <li>Исправлена работа агрегатных функций с помощью <code>StateArray</code> комбинаторы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3188 rel="external nofollow noreferrer">#3188</a></li> <li>Исправлена ошибка при делении <code>Decimal</code> значение по нулю. <a href=https://github.com/ClickHouse/ClickHouse/commit/69dd6609193beb4e7acd3e6ad216eca0ccfb8179 rel="external nofollow noreferrer">69dd6609</a></li> <li>Фиксированный вывод типов для использования операций <code>Decimal</code> и целочисленные аргументы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3224 rel="external nofollow noreferrer">#3224</a></li> <li>Исправлена обработка выхода онлайн / оффлайн в <code>GROUP BY</code> на <code>Decimal128</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/3359ba06c39fcd05bfdb87d6c64154819621e13a rel="external nofollow noreferrer">3359ba06</a></li> <li>То <code>log_query_threads</code> настройка (протоколирование информации о каждом потоке выполнения запроса) теперь вступает в силу только в том случае, если <code>log_queries</code> параметр (протоколирование информации о запросах) имеет значение 1. Поскольку <code>log_query_threads</code> опция включена по умолчанию, информация о потоках ранее регистрировалась, даже если ведение журнала запросов было отключено. <a href=https://github.com/ClickHouse/ClickHouse/pull/3241 rel="external nofollow noreferrer">#3241</a></li> <li>Исправлена ошибка в распределенной работе агрегатной функции квантилей (сообщение об ошибке <code>Not found column quantile...</code>). <a href=https://github.com/ClickHouse/ClickHouse/commit/292a885533b8e3b41ce8993867069d14cbd5a664 rel="external nofollow noreferrer">292a8855</a></li> <li>Исправлена проблема совместимости при работе с кластером серверов версии 18.12.17 и более старых серверов одновременно. Для распределенных запросов с ключами GROUP BY как фиксированной, так и не фиксированной длины при наличии большого объема данных для агрегирования возвращаемые данные не всегда были полностью агрегированы (две разные строки содержали одни и те же ключи агрегирования). <a href=https://github.com/ClickHouse/ClickHouse/pull/3254 rel="external nofollow noreferrer">#3254</a></li> <li>Исправлена обработка подстановок в <code>clickhouse-performance-test</code>, если запрос содержит только часть подстановок, объявленных в тесте. <a href=https://github.com/ClickHouse/ClickHouse/pull/3263 rel="external nofollow noreferrer">#3263</a></li> <li>Исправлена ошибка при использовании <code>FINAL</code> с <code>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3298 rel="external nofollow noreferrer">#3298</a></li> <li>Исправлена ошибка при использовании <code>PREWHERE</code> над столбцами, которые были добавлены во время <code>ALTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3298 rel="external nofollow noreferrer">#3298</a></li> <li>Добавлена проверка на отсутствие <code>arrayJoin</code> для <code>DEFAULT</code> и <code>MATERIALIZED</code> выражения. Ранее, <code>arrayJoin</code> это привело к ошибке при вставке данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/3337 rel="external nofollow noreferrer">#3337</a></li> <li>Добавлена проверка на отсутствие <code>arrayJoin</code> в <code>PREWHERE</code> пункт. Ранее это приводило к таким сообщениям, как <code>Size ... doesn't match</code> или <code>Unknown compression method</code> при выполнении запросов. <a href=https://github.com/ClickHouse/ClickHouse/pull/3357 rel="external nofollow noreferrer">#3357</a></li> <li>Исправлена ошибка segfault, которая могла возникнуть в редких случаях после оптимизации, которая заменила и цепочки из оценок равенства с соответствующим выражением IN. <a href=https://github.com/ClickHouse/ClickHouse/pull/3339 rel="external nofollow noreferrer">люимин-бытданс</a></li> <li>Незначительные исправления к <code>clickhouse-benchmark</code>: раньше информация о клиенте не отправлялась на сервер, теперь количество выполненных запросов вычисляется более точно при выключении и ограничении количества итераций. <a href=https://github.com/ClickHouse/ClickHouse/pull/3351 rel="external nofollow noreferrer">#3351</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3352 rel="external nofollow noreferrer">#3352</a></li> </ul> <h4 id=backward-incompatible-changes-1>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-1 title="Permanent link">&para;</a></h4> <ul> <li>Удалил то <code>allow_experimental_decimal_type</code> вариант. То <code>Decimal</code> тип данных доступен для использования по умолчанию. <a href=https://github.com/ClickHouse/ClickHouse/pull/3329 rel="external nofollow noreferrer">#3329</a></li> </ul> <h2 id=clickhouse-release-18-12>ClickHouse релиз 18.12<a class=headerlink href=#clickhouse-release-18-12 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-12-17-2018-09-16>ClickHouse релиз 18.12.17, 2018-09-16<a class=headerlink href=#clickhouse-release-18-12-17-2018-09-16 title="Permanent link">&para;</a></h3> <h4 id=new-features-2>Новые средства:<a class=headerlink href=#new-features-2 title="Permanent link">&para;</a></h4> <ul> <li><code>invalidate_query</code> (возможность задать запрос для проверки необходимости обновления внешнего словаря) реализована для <code>clickhouse</code> источник. <a href=https://github.com/ClickHouse/ClickHouse/pull/3126 rel="external nofollow noreferrer">#3126</a></li> <li>Добавлена возможность использования <code>UInt*</code>, <code>Int*</code>, и <code>DateTime</code> типы данных (вместе с <code>Date</code> типа) как <code>range_hashed</code> внешний ключ словаря, определяющий границы диапазонов. Сейчас <code>NULL</code> может использоваться для обозначения открытого диапазона. <a href=https://github.com/ClickHouse/ClickHouse/pull/3123 rel="external nofollow noreferrer">Василий Немков</a></li> <li>То <code>Decimal</code> тип теперь поддерживает <code>var*</code> и <code>stddev*</code> статистическая функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/3129 rel="external nofollow noreferrer">#3129</a></li> <li>То <code>Decimal</code> тип теперь поддерживает математические функции (<code>exp</code>, <code>sin</code> и так далее.) <a href=https://github.com/ClickHouse/ClickHouse/pull/3129 rel="external nofollow noreferrer">#3129</a></li> <li>То <code>system.part_log</code> таблица теперь имеет <code>partition_id</code> колонка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3089 rel="external nofollow noreferrer">#3089</a></li> </ul> <h4 id=bug-fixes-11>Устранение ошибок:<a class=headerlink href=#bug-fixes-11 title="Permanent link">&para;</a></h4> <ul> <li><code>Merge</code> теперь работает правильно на <code>Distributed</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3159 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлена несовместимость (ненужная зависимость от <code>glibc</code> версия), что сделало невозможным запуск ClickHouse на <code>Ubuntu Precise</code> и более старые версии. Несовместимость возникла в версии 18.12.13. <a href=https://github.com/ClickHouse/ClickHouse/pull/3130 rel="external nofollow noreferrer">#3130</a></li> <li>Исправлены ошибки в работе <code>enable_optimize_predicate_expression</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3107 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлена незначительная проблема с обратной совместимостью, возникшая при работе с кластером реплик на версиях ранее 18.12.13 и одновременном создании новой реплики таблицы на сервере с более новой версией (показано в сообщении <code>Can not clone replica, because the ... updated to new ClickHouse version</code>, что вполне логично, но не должно произойти). <a href=https://github.com/ClickHouse/ClickHouse/pull/3122 rel="external nofollow noreferrer">#3122</a></li> </ul> <h4 id=backward-incompatible-changes-2>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-2 title="Permanent link">&para;</a></h4> <ul> <li>То <code>enable_optimize_predicate_expression</code> опция включена по умолчанию (что довольно оптимистично). Если возникают ошибки анализа запросов, связанные с поиском имен столбцов, установите <code>enable_optimize_predicate_expression</code> до 0. <a href=https://github.com/ClickHouse/ClickHouse/pull/3107 rel="external nofollow noreferrer">Зимний Чжан</a></li> </ul> <h3 id=clickhouse-release-18-12-14-2018-09-13>ClickHouse релиз 18.12.14, 2018-09-13<a class=headerlink href=#clickhouse-release-18-12-14-2018-09-13 title="Permanent link">&para;</a></h3> <h4 id=new-features-3>Новые средства:<a class=headerlink href=#new-features-3 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена поддержка для <code>ALTER UPDATE</code> запросы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3035 rel="external nofollow noreferrer">#3035</a></li> <li>Добавил тот <code>allow_ddl</code> опция, которая ограничивает доступ пользователя к DDL-запросам. <a href=https://github.com/ClickHouse/ClickHouse/pull/3104 rel="external nofollow noreferrer">#3104</a></li> <li>Добавил тот <code>min_merge_bytes_to_use_direct_io</code> вариант для <code>MergeTree</code> движки, которые позволяют установить пороговое значение для общего размера слияния (при превышении порогового значения файлы частей данных будут обрабатываться с помощью O_DIRECT). <a href=https://github.com/ClickHouse/ClickHouse/pull/3117 rel="external nofollow noreferrer">#3117</a></li> <li>То <code>system.merges</code> системная таблица теперь содержит <code>partition_id</code> колонка. <a href=https://github.com/ClickHouse/ClickHouse/pull/3099 rel="external nofollow noreferrer">#3099</a></li> </ul> <h4 id=improvements-3>Улучшения<a class=headerlink href=#improvements-3 title="Permanent link">&para;</a></h4> <ul> <li>Если часть данных остается неизменной во время мутации, она не загружается репликами. <a href=https://github.com/ClickHouse/ClickHouse/pull/3103 rel="external nofollow noreferrer">#3103</a></li> <li>Автозаполнение доступно для имен настроек при работе с ними <code>clickhouse-client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3106 rel="external nofollow noreferrer">#3106</a></li> </ul> <h4 id=bug-fixes-12>Устранение ошибок:<a class=headerlink href=#bug-fixes-12 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена проверка размеров массивов, являющихся элементами <code>Nested</code> введите поля при вставке. <a href=https://github.com/ClickHouse/ClickHouse/pull/3118 rel="external nofollow noreferrer">#3118</a></li> <li>Исправлена ошибка обновления внешних словарей с помощью <code>ODBC</code> источник и <code>hashed</code> место хранения. Эта ошибка произошла в версии 18.12.13.</li> <li>Исправлена ошибка при создании временной таблицы из запроса с помощью <code>IN</code> состояние. <a href=https://github.com/ClickHouse/ClickHouse/pull/3098 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлена ошибка в агрегатных функциях для массивов, которые могут иметь <code>NULL</code> элементы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3097 rel="external nofollow noreferrer">Зимний Чжан</a></li> </ul> <h3 id=clickhouse-release-18-12-13-2018-09-10>ClickHouse релиз 18.12.13, 2018-09-10<a class=headerlink href=#clickhouse-release-18-12-13-2018-09-10 title="Permanent link">&para;</a></h3> <h4 id=new-features-4>Новые средства:<a class=headerlink href=#new-features-4 title="Permanent link">&para;</a></h4> <ul> <li>Добавил тот <code>DECIMAL(digits, scale)</code> тип данных (<code>Decimal32(scale)</code>, <code>Decimal64(scale)</code>, <code>Decimal128(scale)</code>). Чтобы включить его, используйте параметр <code>allow_experimental_decimal_type</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2846 rel="external nofollow noreferrer">#2846</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2970 rel="external nofollow noreferrer">#2970</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3008 rel="external nofollow noreferrer">#3008</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3047 rel="external nofollow noreferrer">#3047</a></li> <li>Новый <code>WITH ROLLUP</code> модификатор для <code>GROUP BY</code> (альтернативный синтаксис: <code>GROUP BY ROLLUP(...)</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2948 rel="external nofollow noreferrer">#2948</a></li> <li>В запросах с соединением символ звезды расширяется до списка столбцов во всех таблицах в соответствии со стандартом SQL. Вы можете восстановить старое поведение, установив <code>asterisk_left_columns_only</code> до 1 на уровне конфигурации пользователя. <a href=https://github.com/ClickHouse/ClickHouse/pull/2787 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Добавлена поддержка соединения с табличными функциями. <a href=https://github.com/ClickHouse/ClickHouse/pull/2907 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Автозаполнение осуществляется нажатием клавиши Tab в clickhouse-клиенте. <a href=https://github.com/ClickHouse/ClickHouse/pull/2447 rel="external nofollow noreferrer">Сергей Щербин</a></li> <li>Сочетание клавиш CTRL+C в clickhouse-клиент сбрасывает запрос, который был введен. <a href=https://github.com/ClickHouse/ClickHouse/pull/2877 rel="external nofollow noreferrer">#2877</a></li> <li>Добавил тот <code>join_default_strictness</code> уставка: <code>"</code>, <code>'any'</code>, <code>'all'</code>). Это позволяет вам не указывать <code>ANY</code> или <code>ALL</code> для <code>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2982 rel="external nofollow noreferrer">#2982</a></li> <li>Каждая строка журнала сервера, связанная с обработкой запросов, показывает идентификатор запроса. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>Теперь вы можете получить журналы выполнения запросов в clickhouse-клиенте (используйте <code>send_logs_level</code> установочный). При распределенной обработке запросов журналы каскадируются со всех серверов. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>То <code>system.query_log</code> и <code>system.processes</code> (<code>SHOW PROCESSLIST</code>) таблицы теперь содержат информацию обо всех измененных настройках при выполнении запроса (вложенная структура запроса). <code>Settings</code> данные). Добавил тот <code>log_query_settings</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>То <code>system.query_log</code> и <code>system.processes</code> теперь в таблицах отображается информация о количестве потоков, участвующих в выполнении запроса (см. <code>thread_numbers</code> колонка). <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>Добавлен <code>ProfileEvents</code> счетчики, которые измеряют время, затраченное на чтение и запись по сети и чтение и запись на диск, количество сетевых ошибок и время ожидания, когда пропускная способность сети ограничена. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>Добавлен <code>ProfileEvents</code>счетчики, содержащие системные метрики из rusage (их можно использовать для получения информации об использовании ЦП в пользовательском пространстве и ядре, сбоях страниц и переключателях контекста), а также метрики taskstats (используйте их для получения информации о времени ожидания ввода-вывода, времени ожидания ЦП и объеме данных, считываемых и записываемых как с помощью кэша страниц, так и без него). <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>То <code>ProfileEvents</code> счетчики применяются глобально и для каждого запроса, а также для каждого потока выполнения запроса, что позволяет детально профилировать потребление ресурсов запросом. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>Добавил тот <code>system.query_thread_log</code> таблица, содержащая информацию о каждом потоке выполнения запроса. Добавил тот <code>log_query_threads</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>То <code>system.metrics</code> и <code>system.events</code> таблицы теперь имеют встроенную документацию. <a href=https://github.com/ClickHouse/ClickHouse/pull/3016 rel="external nofollow noreferrer">#3016</a></li> <li>Добавил тот <code>arrayEnumerateDense</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/2975 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Добавил тот <code>arrayCumSumNonNegative</code> и <code>arrayDifference</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/2942 rel="external nofollow noreferrer">Алексей Студнев</a></li> <li>Добавил тот <code>retention</code> статистическая функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/2887 rel="external nofollow noreferrer">Вашим Ли</a></li> <li>Теперь вы можете добавить (объединить) состояния агрегатных функций с помощью оператора плюс и умножить состояния агрегатных функций на неотрицательную константу. <a href=https://github.com/ClickHouse/ClickHouse/pull/3062 rel="external nofollow noreferrer">#3062</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3034 rel="external nofollow noreferrer">#3034</a></li> <li>Таблицы в семействе MergeTree теперь имеют виртуальный столбец <code>_partition_id</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3089 rel="external nofollow noreferrer">#3089</a></li> </ul> <h4 id=experimental-features-1>Экспериментальная возможность:<a class=headerlink href=#experimental-features-1 title="Permanent link">&para;</a></h4> <ul> <li>Добавил тот <code>LowCardinality(T)</code> тип данных. Этот тип данных автоматически создает локальный словарь значений и позволяет обрабатывать данные без распаковки словаря. <a href=https://github.com/ClickHouse/ClickHouse/pull/2830 rel="external nofollow noreferrer">#2830</a></li> <li>Добавлен кэш JIT-скомпилированных функций и счетчик количества использований перед компиляцией. Чтобы выполнить JIT-компиляцию выражений, включите <code>compile_expressions</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/2990 rel="external nofollow noreferrer">#2990</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3077 rel="external nofollow noreferrer">#3077</a></li> </ul> <h4 id=improvements-4>Улучшения:<a class=headerlink href=#improvements-4 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена проблема с неограниченным накоплением журнала репликации при наличии брошенных реплик. Добавлен эффективный режим восстановления для реплик с длительным запаздыванием.</li> <li>Улучшенная производительность <code>GROUP BY</code> с несколькими полями агрегации, когда одно из них является строковым, а другие-фиксированной длины.</li> <li>Улучшенная производительность при использовании <code>PREWHERE</code> и с неявной передачей выражений в <code>PREWHERE</code>.</li> <li>Улучшена производительность синтаксического анализа для текстовых форматов (<code>CSV</code>, <code>TSV</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2977 rel="external nofollow noreferrer">Амос Птица</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2980 rel="external nofollow noreferrer">#2980</a></li> <li>Улучшена производительность чтения строк и массивов в двоичных форматах. <a href=https://github.com/ClickHouse/ClickHouse/pull/2955 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Повышенная производительность и снижение потребления памяти для запросов к <code>system.tables</code> и <code>system.columns</code> при наличии очень большого количества таблиц на одном сервере. <a href=https://github.com/ClickHouse/ClickHouse/pull/2953 rel="external nofollow noreferrer">#2953</a></li> <li>Исправлена проблема производительности в случае большого потока запросов, приводящих к ошибке (the <code>_dl_addr</code> функция видна в <code>perf top</code>, но сервер не использует много процессора). <a href=https://github.com/ClickHouse/ClickHouse/pull/2938 rel="external nofollow noreferrer">#2938</a></li> <li>Условия бросаются в поле зрения (когда <code>enable_optimize_predicate_expression</code> включен). <a href=https://github.com/ClickHouse/ClickHouse/pull/2907 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Улучшения в функциональности для <code>UUID</code> тип данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/3074 rel="external nofollow noreferrer">#3074</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2985 rel="external nofollow noreferrer">#2985</a></li> <li>То <code>UUID</code> тип данных поддерживается в словарях-Alchemist. <a href=https://github.com/ClickHouse/ClickHouse/pull/2822 rel="external nofollow noreferrer">#2822</a></li> <li>То <code>visitParamExtractRaw</code> функция корректно работает с вложенными структурами. <a href=https://github.com/ClickHouse/ClickHouse/pull/2974 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Когда <code>input_format_skip_unknown_fields</code> настройка включена, поля объекта в поле <code>JSONEachRow</code> формат пропущен правильно. <a href=https://github.com/ClickHouse/ClickHouse/pull/2958 rel="external nofollow noreferrer">BlahGeek</a></li> <li>Для <code>CASE</code> выражение с условиями теперь можно опустить <code>ELSE</code>, что эквивалентно <code>ELSE NULL</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2920 rel="external nofollow noreferrer">#2920</a></li> <li>Тайм-аут операции теперь можно настроить при работе с ZooKeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/2971 rel="external nofollow noreferrer">urykhy</a></li> <li>Вы можете указать смещение для <code>LIMIT n, m</code> как <code>LIMIT n OFFSET m</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2840 rel="external nofollow noreferrer">#2840</a></li> <li>Вы можете использовать <code>SELECT TOP n</code> синтаксис как альтернатива для <code>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2840 rel="external nofollow noreferrer">#2840</a></li> <li>Увеличен размер очереди для записи в системные таблицы, так что <code>SystemLog parameter queue is full</code> ошибки случаются не так часто.</li> <li>То <code>windowFunnel</code> агрегатная функция теперь поддерживает события, удовлетворяющие нескольким условиям. <a href=https://github.com/ClickHouse/ClickHouse/pull/2801 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Повторяющиеся столбцы могут быть использованы в a <code>USING</code> пунктом <code>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3006 rel="external nofollow noreferrer">#3006</a></li> <li><code>Pretty</code> форматы теперь имеют ограничение на выравнивание столбцов по ширине. Используйте <code>output_format_pretty_max_column_pad_width</code> установка. Если значение больше, то оно все равно будет отображаться полностью, но другие ячейки таблицы не будут слишком широкими. <a href=https://github.com/ClickHouse/ClickHouse/pull/3003 rel="external nofollow noreferrer">#3003</a></li> <li>То <code>odbc</code> функция таблицы теперь позволяет указать имя базы данных / схемы. <a href=https://github.com/ClickHouse/ClickHouse/pull/2885 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Добавлена возможность использовать имя Пользователя, указанное в <code>clickhouse-client</code> конфигурационный файл. <a href=https://github.com/ClickHouse/ClickHouse/pull/2909 rel="external nofollow noreferrer">Владимир Козбин</a></li> <li>То <code>ZooKeeperExceptions</code> счетчик был разделен на три счетчика: <code>ZooKeeperUserExceptions</code>, <code>ZooKeeperHardwareExceptions</code>, и <code>ZooKeeperOtherExceptions</code>.</li> <li><code>ALTER DELETE</code> запросы работают для материализованных представлений.</li> <li>Добавлена рандомизация при периодическом запуске потока очистки для <code>ReplicatedMergeTree</code> таблицы во избежание периодических скачков нагрузки при наличии очень большого количества <code>ReplicatedMergeTree</code> таблицы.</li> <li>Поддержка <code>ATTACH TABLE ... ON CLUSTER</code> запросы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3025 rel="external nofollow noreferrer">#3025</a></li> </ul> <h4 id=bug-fixes-13>Устранение ошибок:<a class=headerlink href=#bug-fixes-13 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена проблема с <code>Dictionary</code> таблицы (бросает то <code>Size of offsets doesn't match size of column</code> или <code>Unknown compression method</code> исключение). Эта ошибка появилась в версии 18.10.3. <a href=https://github.com/ClickHouse/ClickHouse/issues/2913 rel="external nofollow noreferrer">#2913</a></li> <li>Исправлена ошибка при слиянии <code>CollapsingMergeTree</code> таблицы, если одна из частей данных пуста (эти части формируются во время слияния или <code>ALTER DELETE</code> если все данные были удалены), а также <code>vertical</code> для слияния был использован алгоритм. <a href=https://github.com/ClickHouse/ClickHouse/pull/3049 rel="external nofollow noreferrer">#3049</a></li> <li>Исправлено состояние гонки во время <code>DROP</code> или <code>TRUNCATE</code> для <code>Memory</code> столы с одновременным <code>SELECT</code>, что может привести к сбоям сервера. Эта ошибка появилась в версии 1.1.54388. <a href=https://github.com/ClickHouse/ClickHouse/pull/3038 rel="external nofollow noreferrer">#3038</a></li> <li>Исправлена возможность потери данных при вставке в систему <code>Replicated</code> таблицы, если <code>Session is expired</code> возвращается ошибка (потеря данных может быть обнаружена с помощью <code>ReplicatedDataLoss</code> метрический). Эта ошибка произошла в версии 1.1.54378. <a href=https://github.com/ClickHouse/ClickHouse/pull/2939 rel="external nofollow noreferrer">#2939</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2949 rel="external nofollow noreferrer">#2949</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2964 rel="external nofollow noreferrer">#2964</a></li> <li>Исправлен сегфолт при <code>JOIN ... ON</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3000 rel="external nofollow noreferrer">#3000</a></li> <li>Исправлена ошибка поиска имен столбцов, когда <code>WHERE</code> выражение полностью состоит из квалифицированного имени столбца, например <code>WHERE table.column</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2994 rel="external nofollow noreferrer">#2994</a></li> <li>Исправлена ошибка «Not found column» ошибка, возникшая при выполнении распределенных запросов, если с удаленного сервера запрашивается один столбец, состоящий из выражения IN с вложенным запросом. <a href=https://github.com/ClickHouse/ClickHouse/pull/3087 rel="external nofollow noreferrer">#3087</a></li> <li>Исправлена ошибка <code>Block structure mismatch in UNION stream: different number of columns</code> ошибка, возникшая для распределенных запросов, если один из сегментов является локальным, а другой-нет, и оптимизация перемещения в <code>PREWHERE</code> это срабатывает. <a href=https://github.com/ClickHouse/ClickHouse/pull/2226 rel="external nofollow noreferrer">#2226</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3037 rel="external nofollow noreferrer">#3037</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3055 rel="external nofollow noreferrer">#3055</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3065 rel="external nofollow noreferrer">#3065</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3073 rel="external nofollow noreferrer">#3073</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3090 rel="external nofollow noreferrer">#3090</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3093 rel="external nofollow noreferrer">#3093</a></li> <li>Исправлена ошибка <code>pointInPolygon</code> функция для некоторых случаев невыпуклых многоугольников. <a href=https://github.com/ClickHouse/ClickHouse/pull/2910 rel="external nofollow noreferrer">#2910</a></li> <li>Исправлен неверный результат при сравнении <code>nan</code> с целыми числами. <a href=https://github.com/ClickHouse/ClickHouse/pull/3024 rel="external nofollow noreferrer">#3024</a></li> <li>Исправлена ошибка в системе <code>zlib-ng</code> библиотека, которая в редких случаях может привести к segfault. <a href=https://github.com/ClickHouse/ClickHouse/pull/2854 rel="external nofollow noreferrer">#2854</a></li> <li>Исправлена утечка памяти при вставке в таблицу с помощью <code>AggregateFunction</code> столбцы, если состояние агрегатной функции не простое (выделяет память отдельно), и если один запрос на вставку приводит к нескольким небольшим блокам. <a href=https://github.com/ClickHouse/ClickHouse/pull/3084 rel="external nofollow noreferrer">#3084</a></li> <li>Исправлено состояние гонки при создании и удалении одного и того же объекта <code>Buffer</code> или <code>MergeTree</code> стол одновременно.</li> <li>Исправлена возможность segfault при сравнении кортежей, составленных из определенных нетривиальных типов, таких как кортежи. <a href=https://github.com/ClickHouse/ClickHouse/pull/2989 rel="external nofollow noreferrer">#2989</a></li> <li>Исправлена возможность возникновения segfault при запуске некоторых <code>ON CLUSTER</code> запросы. <a href=https://github.com/ClickHouse/ClickHouse/pull/2960 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлена ошибка в системе <code>arrayDistinct</code> функция для <code>Nullable</code> элемент массива. <a href=https://github.com/ClickHouse/ClickHouse/pull/2845 rel="external nofollow noreferrer">#2845</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2937 rel="external nofollow noreferrer">#2937</a></li> <li>То <code>enable_optimize_predicate_expression</code> опция теперь корректно поддерживает случаи с <code>SELECT *</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2929 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлена ошибка segfault при повторной инициализации сеанса ZooKeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/2917 rel="external nofollow noreferrer">#2917</a></li> <li>Исправлена блокировка при работе с зоопарка.</li> <li>Исправлен неверный код для добавления вложенных структур данных в a <code>SummingMergeTree</code>.</li> <li>При выделении памяти для состояний агрегатных функций корректно учитывается выравнивание, что позволяет использовать операции, требующие выравнивания при реализации состояний агрегатных функций. <a href=https://github.com/ClickHouse/ClickHouse/pull/2808 rel="external nofollow noreferrer">chenxing-xc</a></li> </ul> <h4 id=security-fix>Исправление безопасности:<a class=headerlink href=#security-fix title="Permanent link">&para;</a></h4> <ul> <li>Безопасное использование источников данных ODBC. Взаимодействие с драйверами ODBC использует отдельный интерфейс <code>clickhouse-odbc-bridge</code> процесс. Ошибки в сторонних драйверах ODBC больше не вызывают проблем со стабильностью сервера или уязвимостями. <a href=https://github.com/ClickHouse/ClickHouse/pull/2828 rel="external nofollow noreferrer">#2828</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2879 rel="external nofollow noreferrer">#2879</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2886 rel="external nofollow noreferrer">#2886</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2893 rel="external nofollow noreferrer">#2893</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2921 rel="external nofollow noreferrer">#2921</a></li> <li>Исправлена неправильная проверка пути к файлу в системе <code>catBoostPool</code> табличная функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/2894 rel="external nofollow noreferrer">#2894</a></li> <li>Содержание системных таблиц (<code>tables</code>, <code>databases</code>, <code>parts</code>, <code>columns</code>, <code>parts_columns</code>, <code>merges</code>, <code>mutations</code>, <code>replicas</code>, и <code>replication_queue</code>) фильтруются в соответствии с настроенным пользователем доступом к базам данных (<code>allow_databases</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2856 rel="external nofollow noreferrer">Зимний Чжан</a></li> </ul> <h4 id=backward-incompatible-changes-3>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-3 title="Permanent link">&para;</a></h4> <ul> <li>В запросах с соединением символ звезды расширяется до списка столбцов во всех таблицах в соответствии со стандартом SQL. Вы можете восстановить старое поведение, установив <code>asterisk_left_columns_only</code> до 1 на уровне конфигурации пользователя.</li> </ul> <h4 id=build-changes-2>Изменения в сборке:<a class=headerlink href=#build-changes-2 title="Permanent link">&para;</a></h4> <ul> <li>Большинство интеграционных тестов теперь можно запускать с помощью commit.</li> <li>Проверка стиля кода также может выполняться с помощью commit.</li> <li>То <code>memcpy</code> реализация выбрана правильно при построении на CentOS7/Fedora. <a href=https://github.com/ClickHouse/ClickHouse/pull/2912 rel="external nofollow noreferrer">Этьен Шампетье</a></li> <li>При использовании clang для сборки, некоторые предупреждения от <code>-Weverything</code> были добавлены, в дополнение к обычным <code>-Wall-Wextra -Werror</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2957 rel="external nofollow noreferrer">#2957</a></li> <li>Отладка сборки использует следующие методы: <code>jemalloc</code> вариант отладки.</li> <li>Интерфейс библиотеки для взаимодействия с ZooKeeper объявлен абстрактным. <a href=https://github.com/ClickHouse/ClickHouse/pull/2950 rel="external nofollow noreferrer">#2950</a></li> </ul> <h2 id=clickhouse-release-18-10>ClickHouse релиз 18.10<a class=headerlink href=#clickhouse-release-18-10 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-10-3-2018-08-13>ClickHouse релиз 18.10.3, 2018-08-13<a class=headerlink href=#clickhouse-release-18-10-3-2018-08-13 title="Permanent link">&para;</a></h3> <h4 id=new-features-5>Новые средства:<a class=headerlink href=#new-features-5 title="Permanent link">&para;</a></h4> <ul> <li>HTTPS можно использовать для репликации. <a href=https://github.com/ClickHouse/ClickHouse/pull/2760 rel="external nofollow noreferrer">#2760</a></li> <li>Добавлены функции <code>murmurHash2_64</code>, <code>murmurHash3_32</code>, <code>murmurHash3_64</code>, и <code>murmurHash3_128</code> в дополнение к существующим <code>murmurHash2_32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2791 rel="external nofollow noreferrer">#2791</a></li> <li>Поддержка типы, допускающие значения NULL в драйвере ODBC ClickHouse (<code>ODBCDriver2</code> выходной формат). <a href=https://github.com/ClickHouse/ClickHouse/pull/2834 rel="external nofollow noreferrer">#2834</a></li> <li>Поддержка <code>UUID</code> в ключевых колонках.</li> </ul> <h4 id=improvements-5>Улучшения:<a class=headerlink href=#improvements-5 title="Permanent link">&para;</a></h4> <ul> <li>Кластеры могут быть удалены без перезагрузки сервера, когда они удаляются из конфигурационных файлов. <a href=https://github.com/ClickHouse/ClickHouse/pull/2777 rel="external nofollow noreferrer">#2777</a></li> <li>Внешние словари могут быть удалены без перезагрузки сервера, когда они удаляются из конфигурационных файлов. <a href=https://github.com/ClickHouse/ClickHouse/pull/2779 rel="external nofollow noreferrer">#2779</a></li> <li>Добавлен <code>SETTINGS</code> поддержка для the <code>Kafka</code> настольный двигатель. <a href=https://github.com/ClickHouse/ClickHouse/pull/2781 rel="external nofollow noreferrer">Александр Маршалов</a></li> <li>Улучшения для компании <code>UUID</code> тип данных (еще не полный). <a href=https://github.com/ClickHouse/ClickHouse/pull/2618 rel="external nofollow noreferrer">#2618</a></li> <li>Поддержка для пустых частей после слияния в <code>SummingMergeTree</code>, <code>CollapsingMergeTree</code> и <code>VersionedCollapsingMergeTree</code> двигатели. <a href=https://github.com/ClickHouse/ClickHouse/pull/2815 rel="external nofollow noreferrer">#2815</a></li> <li>Старые записи завершенных мутаций удаляются (<code>ALTER DELETE</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2784 rel="external nofollow noreferrer">#2784</a></li> <li>Добавил тот <code>system.merge_tree_settings</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/pull/2841 rel="external nofollow noreferrer">Кирилл Шваков</a></li> <li>То <code>system.tables</code> таблица теперь имеет столбцы зависимостей: <code>dependencies_database</code> и <code>dependencies_table</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2851 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Добавил тот <code>max_partition_size_to_drop</code> вариант конфигурации. <a href=https://github.com/ClickHouse/ClickHouse/pull/2782 rel="external nofollow noreferrer">#2782</a></li> <li>Добавил тот <code>output_format_json_escape_forward_slashes</code> вариант. <a href=https://github.com/ClickHouse/ClickHouse/pull/2812 rel="external nofollow noreferrer">Александр Бочаров</a></li> <li>Добавил тот <code>max_fetch_partition_retries_count</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/2831 rel="external nofollow noreferrer">#2831</a></li> <li>Добавил тот <code>prefer_localhost_replica</code> настройка для отключения предпочтения для локальной реплики и перехода к локальной реплике без межпроцессного взаимодействия. <a href=https://github.com/ClickHouse/ClickHouse/pull/2832 rel="external nofollow noreferrer">#2832</a></li> <li>То <code>quantileExact</code> возвращает агрегатная функция <code>nan</code> в случае агрегации на пустом месте <code>Float32</code> или <code>Float64</code> набор. <a href=https://github.com/ClickHouse/ClickHouse/pull/2855 rel="external nofollow noreferrer">Вашим Ли</a></li> </ul> <h4 id=bug-fixes-14>Устранение ошибок:<a class=headerlink href=#bug-fixes-14 title="Permanent link">&para;</a></h4> <ul> <li>Удалено ненужное экранирование параметров строки подключения для ODBC, что сделало невозможным установление соединения. Эта ошибка произошла в версии 18.6.0.</li> <li>Исправлена логика обработки <code>REPLACE PARTITION</code> команды в очереди репликации. Если их будет двое <code>REPLACE</code> команды для одного и того же раздела, неправильная логика может привести к тому, что один из них останется в очереди репликации и не будет выполнен. <a href=https://github.com/ClickHouse/ClickHouse/pull/2814 rel="external nofollow noreferrer">#2814</a></li> <li>Исправлена ошибка слияния, когда все части данных были пусты (части, которые были сформированы из слияния или из <code>ALTER DELETE</code> если все данные были удалены). Эта ошибка появилась в версии 18.1.0. <a href=https://github.com/ClickHouse/ClickHouse/pull/2930 rel="external nofollow noreferrer">#2930</a></li> <li>Исправлена ошибка при одновременном использовании <code>Set</code> или <code>Join</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2823 rel="external nofollow noreferrer">Амос Птица</a></li> <li>Исправлена ошибка <code>Block structure mismatch in UNION stream: different number of columns</code> ошибка, которая произошла для <code>UNION ALL</code> запросы внутри подзапроса, если один из <code>SELECT</code> запросы содержат повторяющиеся имена столбцов. <a href=https://github.com/ClickHouse/ClickHouse/pull/2094 rel="external nofollow noreferrer">Зимний Чжан</a></li> <li>Исправлена утечка памяти, если при подключении к серверу MySQL возникало исключение.</li> <li>Исправлен неверный код ответа clickhouse-клиента в случае ошибки запроса.</li> <li>Исправлено некорректное поведение материализованных представлений, содержащих отличия. <a href=https://github.com/ClickHouse/ClickHouse/issues/2795 rel="external nofollow noreferrer">#2795</a></li> </ul> <h4 id=backward-incompatible-changes-4>Назад несовместимые изменения<a class=headerlink href=#backward-incompatible-changes-4 title="Permanent link">&para;</a></h4> <ul> <li>Удалена поддержка запросов CHECK TABLE для распределенных таблиц.</li> </ul> <h4 id=build-changes-3>Изменения в сборке:<a class=headerlink href=#build-changes-3 title="Permanent link">&para;</a></h4> <ul> <li>Распределитель был заменен: <code>jemalloc</code> теперь используется вместо <code>tcmalloc</code>. В некоторых сценариях это увеличивает скорость до 20%. Однако есть запросы, которые замедлились до 20%. Потребление памяти было уменьшено приблизительно на 10% в некоторых сценариях, с улучшенной стабильностью. При высокой конкурентной нагрузке использование процессора в пользовательском пространстве и в системе показывает лишь небольшое увеличение. <a href=https://github.com/ClickHouse/ClickHouse/pull/2773 rel="external nofollow noreferrer">#2773</a></li> <li>Использование libressl из подмодуля. <a href=https://github.com/ClickHouse/ClickHouse/pull/1983 rel="external nofollow noreferrer">#1983</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2807 rel="external nofollow noreferrer">#2807</a></li> <li>Использование unixodbc из подмодуля. <a href=https://github.com/ClickHouse/ClickHouse/pull/2789 rel="external nofollow noreferrer">#2789</a></li> <li>Использование mariadb-connector-c из подмодуля. <a href=https://github.com/ClickHouse/ClickHouse/pull/2785 rel="external nofollow noreferrer">#2785</a></li> <li>Добавлены функциональные тестовые файлы в репозиторий, зависящие от доступности тестовых данных (пока без самих тестовых данных).</li> </ul> <h2 id=clickhouse-release-18-6>ClickHouse релиз 18.6<a class=headerlink href=#clickhouse-release-18-6 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-6-0-2018-08-02>ClickHouse релиз 18.6.0, 2018-08-02<a class=headerlink href=#clickhouse-release-18-6-0-2018-08-02 title="Permanent link">&para;</a></h3> <h4 id=new-features-6>Новые средства:<a class=headerlink href=#new-features-6 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена поддержка выражений для соединения на синтаксис:<br> <code>JOIN ON Expr([table.]column ...) = Expr([table.]column, ...) [AND Expr([table.]column, ...) = Expr([table.]column, ...) ...]</code><br> Выражение должно быть цепочкой равенств, Соединенных оператором и. Каждая сторона равенства может быть произвольным выражением над столбцами одной из таблиц. Поддерживается использование полных имен столбцов (<code>table.name</code>, <code>database.table.name</code>, <code>table_alias.name</code>, <code>subquery_alias.name</code>) для правильного стола. <a href=https://github.com/ClickHouse/ClickHouse/pull/2742 rel="external nofollow noreferrer">#2742</a></li> <li>HTTPS может быть включен для репликации. <a href=https://github.com/ClickHouse/ClickHouse/pull/2760 rel="external nofollow noreferrer">#2760</a></li> </ul> <h4 id=improvements-6>Улучшения:<a class=headerlink href=#improvements-6 title="Permanent link">&para;</a></h4> <ul> <li>Сервер передает клиенту компонент исправлений своей версии. Данные о компоненте версии патча находятся в <code>system.processes</code> и <code>query_log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2646 rel="external nofollow noreferrer">#2646</a></li> </ul> <h2 id=clickhouse-release-18-5>ClickHouse релиз 18.5<a class=headerlink href=#clickhouse-release-18-5 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-5-1-2018-07-31>ClickHouse релиз 18.5.1, 2018-07-31<a class=headerlink href=#clickhouse-release-18-5-1-2018-07-31 title="Permanent link">&para;</a></h3> <h4 id=new-features-7>Новые средства:<a class=headerlink href=#new-features-7 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена хэш-функция <code>murmurHash2_32</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2756 rel="external nofollow noreferrer">#2756</a>.</li> </ul> <h4 id=improvements-7>Улучшения:<a class=headerlink href=#improvements-7 title="Permanent link">&para;</a></h4> <ul> <li>Теперь вы можете использовать <code>from_env</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2741 rel="external nofollow noreferrer">#2741</a> атрибут для установки значений в конфигурационных файлах из переменных окружения.</li> <li>Добавлены версии с нечувствительностью к регистру символов <code>coalesce</code>, <code>ifNull</code>, и <code>nullIf functions</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2752 rel="external nofollow noreferrer">#2752</a>.</li> </ul> <h4 id=bug-fixes-15>Устранение ошибок:<a class=headerlink href=#bug-fixes-15 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена возможная ошибка при запуске реплики <a href=https://github.com/ClickHouse/ClickHouse/pull/2759 rel="external nofollow noreferrer">#2759</a>.</li> </ul> <h2 id=clickhouse-release-18-4>ClickHouse релиз 18.4<a class=headerlink href=#clickhouse-release-18-4 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-4-0-2018-07-28>ClickHouse релиз 18.4.0, 2018-07-28<a class=headerlink href=#clickhouse-release-18-4-0-2018-07-28 title="Permanent link">&para;</a></h3> <h4 id=new-features-8>Новые средства:<a class=headerlink href=#new-features-8 title="Permanent link">&para;</a></h4> <ul> <li>Добавлены системные таблицы: <code>formats</code>, <code>data_type_families</code>, <code>aggregate_function_combinators</code>, <code>table_functions</code>, <code>table_engines</code>, <code>collations</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2721 rel="external nofollow noreferrer">#2721</a>.</li> <li>Добавлена возможность использовать табличную функцию вместо таблицы в качестве аргумента a <code>remote</code> или <code>cluster table function</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2708 rel="external nofollow noreferrer">#2708</a>.</li> <li>Поддержка <code>HTTP Basic</code> аутентификация в протоколе репликации <a href=https://github.com/ClickHouse/ClickHouse/pull/2727 rel="external nofollow noreferrer">#2727</a>.</li> <li>То <code>has</code> функция теперь позволяет искать числовое значение в массиве <code>Enum</code> ценности <a href=https://github.com/ClickHouse/ClickHouse/pull/2699 rel="external nofollow noreferrer">Максим Хрисанфов</a>.</li> <li>Поддержка добавления произвольных разделителей сообщений при чтении из <code>Kafka</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2701 rel="external nofollow noreferrer">Амос Птица</a>.</li> </ul> <h4 id=improvements-8>Улучшения:<a class=headerlink href=#improvements-8 title="Permanent link">&para;</a></h4> <ul> <li>То <code>ALTER TABLE t DELETE WHERE</code> запрос не перезаписывает части данных, которые не были затронуты условием WHERE <a href=https://github.com/ClickHouse/ClickHouse/pull/2694 rel="external nofollow noreferrer">#2694</a>.</li> <li>То <code>use_minimalistic_checksums_in_zookeeper</code> вариант для <code>ReplicatedMergeTree</code> таблицы включены по умолчанию. Этот параметр был добавлен в версии 1.1.54378, 2018-04-16. Версии, которые старше 1.1.54378, больше не могут быть установлены.</li> <li>Поддержка для бега <code>KILL</code> и <code>OPTIMIZE</code> запросы, которые определяют <code>ON CLUSTER</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2689 rel="external nofollow noreferrer">Зимний Чжан</a>.</li> </ul> <h4 id=bug-fixes-16>Устранение ошибок:<a class=headerlink href=#bug-fixes-16 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка <code>Column ... is not under an aggregate function and not in GROUP BY</code> для агрегатирования с выражением. Эта ошибка появилась в версии 18.1.0. (<a href=https://github.com/ClickHouse/ClickHouse/commit/bbdd780be0be06a0f336775941cdd536878dd2c2 rel="external nofollow noreferrer">bbdd780b</a>)</li> <li>Исправлена ошибка в системе <code>windowFunnel aggregate function</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2735 rel="external nofollow noreferrer">Зимний Чжан</a>.</li> <li>Исправлена ошибка в системе <code>anyHeavy</code> статистическая функция (<a href=https://github.com/ClickHouse/ClickHouse/commit/a2101df25a6a0fba99aa71f8793d762af2b801ee rel="external nofollow noreferrer">a2101df2</a>)</li> <li>Исправлен сбой сервера при использовании <code>countArray()</code> статистическая функция.</li> </ul> <h4 id=backward-incompatible-changes-5>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-5 title="Permanent link">&para;</a></h4> <ul> <li>Параметры для <code>Kafka</code> двигатель был изменен с <code>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_schema, kafka_num_consumers])</code> к <code>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_row_delimiter, kafka_schema, kafka_num_consumers])</code>. Если ваши таблицы используют <code>kafka_schema</code> или <code>kafka_num_consumers</code> параметры, вы должны вручную редактировать файлы метаданных <code>path/metadata/database/table.sql</code> и добавить <code>kafka_row_delimiter</code> параметр с <code>''</code> ценность.</li> </ul> <h2 id=clickhouse-release-18-1>ClickHouse релиз 18.1<a class=headerlink href=#clickhouse-release-18-1 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-1-0-2018-07-23>ClickHouse релиз 18.1.0, 2018-07-23<a class=headerlink href=#clickhouse-release-18-1-0-2018-07-23 title="Permanent link">&para;</a></h3> <h4 id=new-features-9>Новые средства:<a class=headerlink href=#new-features-9 title="Permanent link">&para;</a></h4> <ul> <li>Поддержка для the <code>ALTER TABLE t DELETE WHERE</code> запрос на нереплицируемые MergeTree таблицы (<a href=https://github.com/ClickHouse/ClickHouse/pull/2634 rel="external nofollow noreferrer">#2634</a>).</li> <li>Поддержка произвольных типов для <code>uniq*</code> семейство агрегатных функций (<a href=https://github.com/ClickHouse/ClickHouse/issues/2010 rel="external nofollow noreferrer">#2010</a>).</li> <li>Поддержка произвольных типов в операторах сравнения (<a href=https://github.com/ClickHouse/ClickHouse/issues/2026 rel="external nofollow noreferrer">#2026</a>).</li> <li>То <code>users.xml</code> файл позволяет установить маску подсети в формате <code>10.0.0.1/255.255.255.0</code>. Это необходимо для использования масок для сетей IPv6 с нулями посередине (<a href=https://github.com/ClickHouse/ClickHouse/pull/2637 rel="external nofollow noreferrer">#2637</a>).</li> <li>Добавил тот <code>arrayDistinct</code> функция (<a href=https://github.com/ClickHouse/ClickHouse/pull/2670 rel="external nofollow noreferrer">#2670</a>).</li> <li>Движок SummingMergeTree теперь может работать со столбцами типа AggregateFunction (<a href=https://github.com/ClickHouse/ClickHouse/pull/2566 rel="external nofollow noreferrer">Константин Сергеевич Пан</a>).</li> </ul> <h4 id=improvements-9>Улучшения:<a class=headerlink href=#improvements-9 title="Permanent link">&para;</a></h4> <ul> <li>Изменена схема нумерации для версий выпуска. Теперь первая часть содержит год выпуска (A. D., Московский часовой пояс, минус 2000), вторая часть содержит номер для крупных изменений (увеличивается для большинства релизов), а третья часть-это патч-версия. Релизы по-прежнему имеют обратную совместимость, если в списке изменений не указано иное.</li> <li>Более быстрое преобразование чисел с плавающей запятой в строку (<a href=https://github.com/ClickHouse/ClickHouse/pull/2664 rel="external nofollow noreferrer">Амос Птица</a>).</li> <li>Если некоторые строки были пропущены во время вставки из-за ошибок синтаксического анализа (это возможно с помощью <code>input_allow_errors_num</code> и <code>input_allow_errors_ratio</code> настройки включены), количество пропущенных строк теперь записывается в журнал сервера (<a href=https://github.com/ClickHouse/ClickHouse/pull/2669 rel="external nofollow noreferrer">Леонардо Чекки</a>).</li> </ul> <h4 id=bug-fixes-17>Устранение ошибок:<a class=headerlink href=#bug-fixes-17 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена команда усечения для временных таблиц (<a href=https://github.com/ClickHouse/ClickHouse/pull/2624 rel="external nofollow noreferrer">Амос Птица</a>).</li> <li>Исправлена редкая тупиковая ситуация в клиентской библиотеке ZooKeeper, возникшая при возникновении сетевой ошибки при чтении ответа (<a href=https://github.com/ClickHouse/ClickHouse/commit/c315200e64b87e44bdf740707fc857d1fdf7e947 rel="external nofollow noreferrer">c315200</a>).</li> <li>Исправлена ошибка во время бросания на типы, допускающие значение null (<a href=https://github.com/ClickHouse/ClickHouse/issues/1322 rel="external nofollow noreferrer">#1322</a>).</li> <li>Исправлен неверный результат работы системы <code>maxIntersection()</code> функция, когда границы интервалов совпадают (<a href=https://github.com/ClickHouse/ClickHouse/pull/2657 rel="external nofollow noreferrer">Майкл Фурмур</a>).</li> <li>Исправлено некорректное преобразование цепочки выражений OR в аргумент функции (<a href=https://github.com/ClickHouse/ClickHouse/pull/2663 rel="external nofollow noreferrer">chenxing-xc</a>).</li> <li>Исправлено снижение производительности для запросов, содержащих <code>IN (subquery)</code> выражения внутри другого подзапроса (<a href=https://github.com/ClickHouse/ClickHouse/issues/2571 rel="external nofollow noreferrer">#2571</a>).</li> <li>Исправлена несовместимость серверов с различными версиями в распределенных запросах, использующих a <code>CAST</code> функция, которая не написана прописными буквами (<a href=https://github.com/ClickHouse/ClickHouse/commit/fe8c4d64e434cacd4ceef34faa9005129f2190a5 rel="external nofollow noreferrer">fe8c4d6</a>).</li> <li>Добавлено отсутствующее цитирование идентификаторов для запросов к внешней СУБД (<a href=https://github.com/ClickHouse/ClickHouse/issues/2635 rel="external nofollow noreferrer">#2635</a>).</li> </ul> <h4 id=backward-incompatible-changes-6>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-6 title="Permanent link">&para;</a></h4> <ul> <li>Преобразование строки, содержащей нулевое число, в DateTime не работает. Пример: <code>SELECT toDateTime('0')</code>. Это также является причиной того, что <code>DateTime DEFAULT '0'</code> не работает в таблицах, а также <code>&lt;null_value&gt;0&lt;/null_value&gt;</code> в словарях. Решение: заменить <code>0</code> с <code>0000-00-00 00:00:00</code>.</li> </ul> <h2 id=clickhouse-release-1-1>ClickHouse release 1.1<a class=headerlink href=#clickhouse-release-1-1 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-1-1-54394-2018-07-12>ClickHouse релиз 1.1.54394, 2018-07-12<a class=headerlink href=#clickhouse-release-1-1-54394-2018-07-12 title="Permanent link">&para;</a></h3> <h4 id=new-features-10>Новые средства:<a class=headerlink href=#new-features-10 title="Permanent link">&para;</a></h4> <ul> <li>Добавил тот <code>histogram</code> статистическая функция (<a href=https://github.com/ClickHouse/ClickHouse/pull/2521 rel="external nofollow noreferrer">Михаил Сурин</a>).</li> <li>Сейчас <code>OPTIMIZE TABLE ... FINAL</code> может использоваться без указания разделов для <code>ReplicatedMergeTree</code> (<a href=https://github.com/ClickHouse/ClickHouse/pull/2600 rel="external nofollow noreferrer">Амос Птица</a>).</li> </ul> <h4 id=bug-fixes-18>Устранение ошибок:<a class=headerlink href=#bug-fixes-18 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена проблема с очень малым таймаутом для сокетов (одна секунда) для чтения и записи при отправке и загрузке реплицированных данных, что делало невозможной загрузку больших частей при наличии нагрузки на сеть или диск (это приводило к циклическим попыткам загрузки частей). Эта ошибка произошла в версии 1.1.54388.</li> <li>Исправлены проблемы при использовании chroot в ZooKeeper, если вы вставили дубликаты блоков данных в таблицу.</li> <li>То <code>has</code> функция теперь корректно работает для массива с нулевыми элементами (<a href=https://github.com/ClickHouse/ClickHouse/issues/2115 rel="external nofollow noreferrer">#2115</a>).</li> <li>То <code>system.tables</code> таблица теперь работает корректно при использовании в распределенных запросах. То <code>metadata_modification_time</code> и <code>engine_full</code> столбцы теперь не являются виртуальными. Исправлена ошибка, возникавшая при запросе из таблицы только этих столбцов.</li> <li>Исправлено как пустой <code>TinyLog</code> таблица работает после вставки пустого блока данных (<a href=https://github.com/ClickHouse/ClickHouse/issues/2563 rel="external nofollow noreferrer">#2563</a>).</li> <li>То <code>system.zookeeper</code> таблица работает, если значение узла в ZooKeeper равно NULL.</li> </ul> <h3 id=clickhouse-release-1-1-54390-2018-07-06>ClickHouse релиз 1.1.54390, 2018-07-06<a class=headerlink href=#clickhouse-release-1-1-54390-2018-07-06 title="Permanent link">&para;</a></h3> <h4 id=new-features-11>Новые средства:<a class=headerlink href=#new-features-11 title="Permanent link">&para;</a></h4> <ul> <li>Запросы могут быть отправлены в <code>multipart/form-data</code> формат (в виде <code>query</code> поле), что полезно, если внешние данные также отправляются для обработки запросов (<a href=https://github.com/ClickHouse/ClickHouse/pull/2490 rel="external nofollow noreferrer">Ольга Хвостикова</a>).</li> <li>Добавлена возможность включения или отключения обработки одинарных или двойных кавычек при чтении данных в формате CSV. Вы можете настроить это в разделе <code>format_csv_allow_single_quotes</code> и <code>format_csv_allow_double_quotes</code> настройки (<a href=https://github.com/ClickHouse/ClickHouse/pull/2574 rel="external nofollow noreferrer">Амос Птица</a>).</li> <li>Сейчас <code>OPTIMIZE TABLE ... FINAL</code> может использоваться без указания раздела для нереплицированных вариантов <code>MergeTree</code> (<a href=https://github.com/ClickHouse/ClickHouse/pull/2599 rel="external nofollow noreferrer">Амос Птица</a>).</li> </ul> <h4 id=improvements-10>Улучшения:<a class=headerlink href=#improvements-10 title="Permanent link">&para;</a></h4> <ul> <li>Улучшенная производительность, снижение потребления памяти и корректное отслеживание потребления памяти с использованием оператора IN, когда можно использовать табличный индекс (<a href=https://github.com/ClickHouse/ClickHouse/pull/2584 rel="external nofollow noreferrer">#2584</a>).</li> <li>Удалена избыточная проверка контрольных сумм при добавлении части данных. Это важно при наличии большого количества реплик, так как в этих случаях общее число проверок было равно N^2.</li> <li>Добавлена поддержка для <code>Array(Tuple(...))</code> аргументы в пользу этого <code>arrayEnumerateUniq</code> функция (<a href=https://github.com/ClickHouse/ClickHouse/pull/2573 rel="external nofollow noreferrer">#2573</a>).</li> <li>Добавлен <code>Nullable</code> поддержка для the <code>runningDifference</code> функция (<a href=https://github.com/ClickHouse/ClickHouse/pull/2594 rel="external nofollow noreferrer">#2594</a>).</li> <li>Улучшена производительность анализа запросов при наличии очень большого количества выражений (<a href=https://github.com/ClickHouse/ClickHouse/pull/2572 rel="external nofollow noreferrer">#2572</a>).</li> <li>Более быстрый выбор частей данных для слияния в <code>ReplicatedMergeTree</code> таблицы. Более быстрое восстановление сеанса смотрителя зоопарка (<a href=https://github.com/ClickHouse/ClickHouse/pull/2597 rel="external nofollow noreferrer">#2597</a>).</li> <li>То <code>format_version.txt</code> файл для <code>MergeTree</code> таблицы создаются заново, если они отсутствуют, что имеет смысл, если ClickHouse запускается после копирования структуры каталогов без файлов (<a href=https://github.com/ClickHouse/ClickHouse/pull/2593 rel="external nofollow noreferrer">Киприан Хакман</a>).</li> </ul> <h4 id=bug-fixes-19>Устранение ошибок:<a class=headerlink href=#bug-fixes-19 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка при работе с ZooKeeper, которая могла сделать невозможным восстановление сеанса и состояний таблиц только для чтения перед перезапуском сервера.</li> <li>Исправлена ошибка при работе с ZooKeeper, которая могла привести к тому, что старые узлы не удалялись, если сеанс прерывался.</li> <li>Исправлена ошибка в системе <code>quantileTDigest</code> функции для Аргументов с плавающей точкой (эта ошибка была введена в версии 1.1.54388) (<a href=https://github.com/ClickHouse/ClickHouse/pull/2553 rel="external nofollow noreferrer">Михаил Сурин</a>).</li> <li>Исправлена ошибка в индексе для таблиц MergeTree, если столбец первичного ключа находится внутри функции преобразования типов между знаковыми и беззнаковыми целыми числами одинакового размера (<a href=https://github.com/ClickHouse/ClickHouse/pull/2603 rel="external nofollow noreferrer">#2603</a>).</li> <li>Исправлена обработка выхода онлайн / оффлайн если <code>macros</code> используются, но их нет в файле конфигурации (<a href=https://github.com/ClickHouse/ClickHouse/pull/2570 rel="external nofollow noreferrer">#2570</a>).</li> <li>Исправлено переключение на базу данных по умолчанию при повторном подключении клиента (<a href=https://github.com/ClickHouse/ClickHouse/pull/2583 rel="external nofollow noreferrer">#2583</a>).</li> <li>Исправлена ошибка, возникшая при появлении <code>use_index_for_in_with_subqueries</code> настройка была отключена.</li> </ul> <h4 id=security-fix-1>Исправление безопасности:<a class=headerlink href=#security-fix-1 title="Permanent link">&para;</a></h4> <ul> <li>Отправка файлов больше не возможна при подключении к MySQL (<code>LOAD DATA LOCAL INFILE</code>).</li> </ul> <h3 id=clickhouse-release-1-1-54388-2018-06-28>ClickHouse релиз 1.1.54388, 2018-06-28<a class=headerlink href=#clickhouse-release-1-1-54388-2018-06-28 title="Permanent link">&para;</a></h3> <h4 id=new-features-12>Новые средства:<a class=headerlink href=#new-features-12 title="Permanent link">&para;</a></h4> <ul> <li>Поддержка для the <code>ALTER TABLE t DELETE WHERE</code> запрос для реплицированных таблиц. Добавил тот <code>system.mutations</code> таблица для отслеживания хода выполнения запросов этого типа.</li> <li>Поддержка для the <code>ALTER TABLE t [REPLACE|ATTACH] PARTITION</code> запрос для таблиц * MergeTree.</li> <li>Поддержка для the <code>TRUNCATE TABLE</code> запрос (<a href=https://github.com/ClickHouse/ClickHouse/pull/2260 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Несколько новый <code>SYSTEM</code> запросы к реплицируемым таблицам (<code>RESTART REPLICAS</code>, <code>SYNC REPLICA</code>, <code>[STOP|START] [MERGES|FETCHES|SENDS REPLICATED|REPLICATION QUEUES]</code>).</li> <li>Добавлена возможность записи в таблицу с помощью движка MySQL и соответствующей табличной функции (<a href=https://github.com/ClickHouse/ClickHouse/pull/2294 rel="external nofollow noreferrer">Санди-ли</a>).</li> <li>Добавил тот <code>url()</code> функция таблицы и <code>URL</code> настольный двигатель (<a href=https://github.com/ClickHouse/ClickHouse/pull/2501 rel="external nofollow noreferrer">Александр Сапин</a>).</li> <li>Добавил тот <code>windowFunnel</code> статистическая функция (<a href=https://github.com/ClickHouse/ClickHouse/pull/2352 rel="external nofollow noreferrer">Санди-ли</a>).</li> <li>Новый <code>startsWith</code> и <code>endsWith</code> функции для строк (<a href=https://github.com/ClickHouse/ClickHouse/pull/2429 rel="external nofollow noreferrer">Вадим Плахтинский</a>).</li> <li>То <code>numbers()</code> функция таблицы теперь позволяет указать смещение (<a href=https://github.com/ClickHouse/ClickHouse/pull/2535 rel="external nofollow noreferrer">Зимний Чжан</a>).</li> <li>Пароль к нему <code>clickhouse-client</code> может быть введен в интерактивном режиме.</li> <li>Теперь журналы сервера можно отправлять в системный журнал (<a href=https://github.com/ClickHouse/ClickHouse/pull/2459 rel="external nofollow noreferrer">Александр Крашенинников</a>).</li> <li>Поддержка входа в словари с общим источником библиотеки (<a href=https://github.com/ClickHouse/ClickHouse/pull/2472 rel="external nofollow noreferrer">Александр Сапин</a>).</li> <li>Поддержка пользовательских разделителей CSV (<a href=https://github.com/ClickHouse/ClickHouse/pull/2263 rel="external nofollow noreferrer">Иван Жуков</a>)</li> <li>Добавил тот <code>date_time_input_format</code> установка. Если вы переключите этот параметр на <code>'best_effort'</code>, Значения DateTime будут считываться в широком диапазоне форматов.</li> <li>Добавил тот <code>clickhouse-obfuscator</code> утилита для запутывания данных. Пример использования: публикация данных, используемых в тестах производительности.</li> </ul> <h4 id=experimental-features-2>Экспериментальная возможность:<a class=headerlink href=#experimental-features-2 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена возможность расчета <code>and</code> аргументы только там, где они нужны (<a href=https://github.com/ClickHouse/ClickHouse/pull/2272 rel="external nofollow noreferrer">Анастасия Царькова</a>)</li> <li>JIT компиляция в машинный код теперь доступна для некоторых выражений (<a href=https://github.com/ClickHouse/ClickHouse/pull/2277 rel="external nofollow noreferrer">Плес</a>).</li> </ul> <h4 id=bug-fixes-20>Устранение ошибок:<a class=headerlink href=#bug-fixes-20 title="Permanent link">&para;</a></h4> <ul> <li>Дубликаты больше не появляются для запроса с <code>DISTINCT</code> и <code>ORDER BY</code>.</li> <li>Запросы с помощью <code>ARRAY JOIN</code> и <code>arrayFilter</code> больше не возвращайте неверный результат.</li> <li>Исправлена ошибка при чтении столбца массива из вложенной структуры (<a href=https://github.com/ClickHouse/ClickHouse/issues/2066 rel="external nofollow noreferrer">#2066</a>).</li> <li>Исправлена ошибка при анализе запросов с предложением HAVING, например <code>HAVING tuple IN (...)</code>.</li> <li>Исправлена ошибка при анализе запросов с рекурсивными псевдонимами.</li> <li>Исправлена ошибка при чтении из ReplacingMergeTree с условием в PREWHERE, которое фильтрует все строки (<a href=https://github.com/ClickHouse/ClickHouse/issues/2525 rel="external nofollow noreferrer">#2525</a>).</li> <li>Настройки профиля пользователя не применялись при использовании сеансов в интерфейсе HTTP.</li> <li>Исправлено применение настроек из параметров командной строки в clickhouse-local.</li> <li>Клиентская библиотека ZooKeeper теперь использует тайм-аут сеанса, полученный от сервера.</li> <li>Исправлена ошибка в клиентской библиотеке ZooKeeper, когда клиент ждал ответа сервера дольше, чем тайм-аут.</li> <li>Исправлена обрезка деталей для запросов с условиями по ключевым столбцам разделов (<a href=https://github.com/ClickHouse/ClickHouse/issues/2342 rel="external nofollow noreferrer">#2342</a>).</li> <li>Слияния теперь возможны после <code>CLEAR COLUMN IN PARTITION</code> (<a href=https://github.com/ClickHouse/ClickHouse/issues/2315 rel="external nofollow noreferrer">#2315</a>).</li> <li>Исправлено отображение типов в функции таблицы ODBC (<a href=https://github.com/ClickHouse/ClickHouse/pull/2268 rel="external nofollow noreferrer">Санди-ли</a>).</li> <li>Сравнение типов было исправлено для <code>DateTime</code> с часовым поясом и без него (<a href=https://github.com/ClickHouse/ClickHouse/pull/2400 rel="external nofollow noreferrer">Александр Бочаров</a>).</li> <li>Исправлен синтаксический разбор и форматирование текста <code>CAST</code> оператор.</li> <li>Исправлена вставка в материализованный вид для механизма распределенных таблиц (<a href=https://github.com/ClickHouse/ClickHouse/pull/2411 rel="external nofollow noreferrer">Babacar Diassé</a>).</li> <li>Исправлено состояние гонки при записи данных из <code>Kafka</code> двигатель к материализованным представлениям (<a href=https://github.com/ClickHouse/ClickHouse/pull/2448 rel="external nofollow noreferrer">Янкуань Лю</a>).</li> <li>Исправлена ошибка SSRF в функции таблицы remote ().</li> <li>Исправлено поведение выхода из системы <code>clickhouse-client</code> в многострочном режиме (<a href=https://github.com/ClickHouse/ClickHouse/issues/2510 rel="external nofollow noreferrer">#2510</a>).</li> </ul> <h4 id=improvements-11>Улучшения:<a class=headerlink href=#improvements-11 title="Permanent link">&para;</a></h4> <ul> <li>Фоновые задачи в реплицированных таблицах теперь выполняются в пуле потоков, а не в отдельных потоках (<a href=https://github.com/ClickHouse/ClickHouse/pull/1722 rel="external nofollow noreferrer">Сильвиу Развивается</a>).</li> <li>Улучшена производительность сжатия LZ4.</li> <li>Более быстрый анализ запросов с большим количеством соединений и подзапросов.</li> <li>Кэш DNS теперь обновляется автоматически, когда возникает слишком много сетевых ошибок.</li> <li>Вставка таблицы больше не происходит, если вставка в один из материализованных видов невозможна из-за слишком большого количества деталей.</li> <li>Исправлено несоответствие в счетчиках событий <code>Query</code>, <code>SelectQuery</code>, и <code>InsertQuery</code>.</li> <li>Такие выражения, как <code>tuple IN (SELECT tuple)</code> разрешены, если типы кортежей совпадают.</li> <li>Сервер с реплицированными таблицами может запуститься, даже если вы еще не настроили ZooKeeper.</li> <li>При расчете количества доступных ядер ЦП теперь учитываются ограничения на контрольные группы (<a href=https://github.com/ClickHouse/ClickHouse/pull/2325 rel="external nofollow noreferrer">Атри Шарма</a>).</li> <li>Добавлено меню для конфигурации каталогов в файл systemd конфиг (<a href=https://github.com/ClickHouse/ClickHouse/pull/2421 rel="external nofollow noreferrer">Михаил Ширяев</a>).</li> </ul> <h4 id=build-changes-4>Изменения в сборке:<a class=headerlink href=#build-changes-4 title="Permanent link">&para;</a></h4> <ul> <li>Компилятор gcc8 можно использовать для сборки.</li> <li>Добавлена возможность построения llvm из подмодуля.</li> <li>Версия библиотеки librdkafka была обновлена с v0.11.4.</li> <li>Добавлена возможность использования системной библиотеки libcpuid. Версия библиотеки была обновлена до версии 0.4.0.</li> <li>Исправлена сборка с использованием библиотеки vectorclass (<a href=https://github.com/ClickHouse/ClickHouse/pull/2274 rel="external nofollow noreferrer">Babacar Diassé</a>).</li> <li>Cmake теперь генерирует файлы для ninja по умолчанию (например, при использовании <code>-G Ninja</code>).</li> <li>Добавлена возможность использовать библиотеку libtinfo вместо libtermcap (<a href=https://github.com/ClickHouse/ClickHouse/pull/2519 rel="external nofollow noreferrer">Георгий Кондратьев</a>).</li> <li>Исправлен конфликт заголовочных файлов в Fedora Rawhide (<a href=https://github.com/ClickHouse/ClickHouse/issues/2520 rel="external nofollow noreferrer">#2520</a>).</li> </ul> <h4 id=backward-incompatible-changes-7>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-7 title="Permanent link">&para;</a></h4> <ul> <li>Удален побег в <code>Vertical</code> и <code>Pretty*</code> форматы и удалил <code>VerticalRaw</code> формат.</li> <li>Если серверы с версией 1.1.54388 (или более поздней) и серверы с более старой версией используются одновременно в распределенном запросе, то запрос имеет следующее значение: <code>cast(x, 'Type')</code> выражение лица без лица <code>AS</code> ключевое слово и не имеет этого слова <code>cast</code> в верхнем регистре исключение будет выдано с сообщением типа <code>Not found column cast(0, 'UInt8') in block</code>. Решение: обновите сервер на всем кластере.</li> </ul> <h3 id=clickhouse-release-1-1-54385-2018-06-01>ClickHouse релиз 1.1.54385, 2018-06-01<a class=headerlink href=#clickhouse-release-1-1-54385-2018-06-01 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-21>Устранение ошибок:<a class=headerlink href=#bug-fixes-21 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка,которая в некоторых случаях приводила к блокировке операций ZooKeeper.</li> </ul> <h3 id=clickhouse-release-1-1-54383-2018-05-22>ClickHouse релиз 1.1.54383, 2018-05-22<a class=headerlink href=#clickhouse-release-1-1-54383-2018-05-22 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-22>Устранение ошибок:<a class=headerlink href=#bug-fixes-22 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено замедление очереди репликации, если таблица содержит много реплик.</li> </ul> <h3 id=clickhouse-release-1-1-54381-2018-05-14>ClickHouse релиз 1.1.54381, 2018-05-14<a class=headerlink href=#clickhouse-release-1-1-54381-2018-05-14 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-23>Устранение ошибок:<a class=headerlink href=#bug-fixes-23 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена утечка узлов в ZooKeeper, когда ClickHouse теряет соединение с сервером ZooKeeper.</li> </ul> <h3 id=clickhouse-release-1-1-54380-2018-04-21>ClickHouse релиз 1.1.54380, 2018-04-21<a class=headerlink href=#clickhouse-release-1-1-54380-2018-04-21 title="Permanent link">&para;</a></h3> <h4 id=new-features-13>Новые средства:<a class=headerlink href=#new-features-13 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена функция таблицы <code>file(path, format, structure)</code>. Пример чтения байтов из <code>/dev/urandom</code>: <code>ln -s /dev/urandom /var/lib/clickhouse/user_files/random``clickhouse-client -q "SELECT * FROM file('random', 'RowBinary', 'd UInt8') LIMIT 10"</code>.</li> </ul> <h4 id=improvements-12>Улучшения:<a class=headerlink href=#improvements-12 title="Permanent link">&para;</a></h4> <ul> <li>Вложенные запросы могут быть обернуты в <code>()</code> скобки для повышения удобочитаемости запросов. Например: <code>(SELECT 1) UNION ALL (SELECT 1)</code>.</li> <li>Простой <code>SELECT</code> запросы от компании <code>system.processes</code> таблица не входит в состав <code>max_concurrent_queries</code> предел.</li> </ul> <h4 id=bug-fixes-24>Устранение ошибок:<a class=headerlink href=#bug-fixes-24 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено некорректное поведение устройства <code>IN</code> оператор при выборе из <code>MATERIALIZED VIEW</code>.</li> <li>Исправлена некорректная фильтрация по индексу раздела в выражениях типа <code>partition_key_column IN (...)</code>.</li> <li>Исправлена невозможность выполнения <code>OPTIMIZE</code> запрос на реплику без лидера, если <code>REANAME</code> было исполнено на столе.</li> <li>Исправлена ошибка авторизации при выполнении <code>OPTIMIZE</code> или <code>ALTER</code> запросы к реплике, не являющейся лидером.</li> <li>Исправлено зависание <code>KILL QUERY</code>.</li> <li>Исправлена ошибка в клиентской библиотеке ZooKeeper, которая приводила к потере часов, замораживанию распределенной очереди DDL и замедлению работы очереди репликации, если она была непустой. <code>chroot</code> префикс используется в конфигурации ZooKeeper.</li> </ul> <h4 id=backward-incompatible-changes-8>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-8 title="Permanent link">&para;</a></h4> <ul> <li>Удалена поддержка таких выражений как <code>(a, b) IN (SELECT (a, b))</code> (вы можете использовать эквивалентное выражение <code>(a, b) IN (SELECT a, b)</code>). В предыдущих выпусках эти выражения приводили к неопределенным <code>WHERE</code> фильтрация или вызванные ошибки.</li> </ul> <h3 id=clickhouse-release-1-1-54378-2018-04-16>ClickHouse релиз 1.1.54378, 2018-04-16<a class=headerlink href=#clickhouse-release-1-1-54378-2018-04-16 title="Permanent link">&para;</a></h3> <h4 id=new-features-14>Новые средства:<a class=headerlink href=#new-features-14 title="Permanent link">&para;</a></h4> <ul> <li>Уровень ведения журнала можно изменить без перезагрузки сервера.</li> <li>Добавил тот <code>SHOW CREATE DATABASE</code> запрос.</li> <li>То <code>query_id</code> может быть передан в <code>clickhouse-client</code> (локтевой зал).</li> <li>Новая настройка: <code>max_network_bandwidth_for_all_users</code>.</li> <li>Добавлена поддержка для <code>ALTER TABLE ... PARTITION ...</code> для <code>MATERIALIZED VIEW</code>.</li> <li>Добавлена информация о размере частей данных в несжатом виде в системной таблице.</li> <li>Поддержка межсерверного шифрования распределенных таблиц (<code>&lt;secure&gt;1&lt;/secure&gt;</code> в конфигурации реплики in <code>&lt;remote_servers&gt;</code>).</li> <li>Конфигурация уровня таблицы для <code>ReplicatedMergeTree</code> семья для того, чтобы свести к минимуму объем данных, хранящихся в Zookeeper: : <code>use_minimalistic_checksums_in_zookeeper = 1</code></li> <li>Конфигурация системы <code>clickhouse-client</code> срочный. По умолчанию имена серверов теперь выводятся в приглашение. Отображаемое имя сервера может быть изменено. Он также отправлен в США. <code>X-ClickHouse-Display-Name</code> Заголовок HTTP (Кирилл Шваков).</li> <li>Несколько разделенных запятыми <code>topics</code> может быть указан для <code>Kafka</code> двигатель (Тобиас Адамсон)</li> <li>Когда запрос остановлен <code>KILL QUERY</code> или <code>replace_running_query</code>, клиент получает <code>Query was canceled</code> исключение вместо неполного результата.</li> </ul> <h4 id=improvements-13>Улучшения:<a class=headerlink href=#improvements-13 title="Permanent link">&para;</a></h4> <ul> <li><code>ALTER TABLE ... DROP/DETACH PARTITION</code> запросы выполняются в передней части очереди репликации.</li> <li><code>SELECT ... FINAL</code> и <code>OPTIMIZE ... FINAL</code> может использоваться даже в том случае, если таблица содержит одну часть данных.</li> <li>A <code>query_log</code> таблица воссоздается на лету, если она была удалена вручную (Кирилл Шваков).</li> <li>То <code>lengthUTF8</code> функция работает быстрее (zhang2014).</li> <li>Улучшенная производительность синхронных вставок в <code>Distributed</code> таблицы (<code>insert_distributed_sync = 1</code>) при наличии очень большого количества осколков.</li> <li>Сервер принимает следующее: <code>send_timeout</code> и <code>receive_timeout</code> настройки от клиента и применяет их при подключении к клиенту (они применяются в обратном порядке: сокет сервера <code>send_timeout</code> устанавливается в положение <code>receive_timeout</code> ценность, полученная от клиента, и наоборот).</li> <li>Более надежное аварийное восстановление для асинхронной вставки в систему <code>Distributed</code> таблицы.</li> <li>Возвращаемый тип объекта <code>countEqual</code> функция изменяется от <code>UInt32</code> к <code>UInt64</code> (谢磊).</li> </ul> <h4 id=bug-fixes-25>Устранение ошибок:<a class=headerlink href=#bug-fixes-25 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка с помощью <code>IN</code> когда левая сторона выражения является <code>Nullable</code>.</li> <li>Правильные результаты теперь возвращаются при использовании кортежей с <code>IN</code> когда некоторые компоненты кортежа находятся в индексе таблицы.</li> <li>То <code>max_execution_time</code> limit теперь корректно работает с распределенными запросами.</li> <li>Исправлены ошибки при вычислении размера составных столбцов в системе <code>system.columns</code> стол.</li> <li>Исправлена ошибка при создании временной таблицы <code>CREATE TEMPORARY TABLE IF NOT EXISTS.</code></li> <li>Исправлены ошибки в работе <code>StorageKafka</code> (##2075)</li> <li>Исправлены сбои сервера из-за недопустимых аргументов некоторых агрегатных функций.</li> <li>Исправлена ошибка, которая помешала <code>DETACH DATABASE</code> запрос от остановки фоновых задач для <code>ReplicatedMergeTree</code> таблицы.</li> <li><code>Too many parts</code> состояние с меньшей вероятностью произойдет при вставке в агрегированные материализованные представления (##2084).</li> <li>Исправлена рекурсивная обработка подстановок в конфигурации, если за подстановкой должна следовать другая подстановка на том же уровне.</li> <li>Исправлен синтаксис в файле метаданных при создании <code>VIEW</code> это использует запрос с <code>UNION ALL</code>.</li> <li><code>SummingMergeTree</code> теперь корректно работает суммирование вложенных структур данных с помощью составного ключа.</li> <li>Исправлена возможность возникновения расового состояния при выборе лидера для участия в гонке. <code>ReplicatedMergeTree</code> таблицы.</li> </ul> <h4 id=build-changes-5>Изменения в сборке:<a class=headerlink href=#build-changes-5 title="Permanent link">&para;</a></h4> <ul> <li>Сборка поддерживает <code>ninja</code> вместо <code>make</code> и использует <code>ninja</code> по умолчанию для построения релизов.</li> <li>Переименованные пакеты: <code>clickhouse-server-base</code> в <code>clickhouse-common-static</code>; <code>clickhouse-server-common</code> в <code>clickhouse-server</code>; <code>clickhouse-common-dbg</code> в <code>clickhouse-common-static-dbg</code>. Для установки используйте <code>clickhouse-server clickhouse-client</code>. Пакеты со старыми именами по-прежнему будут загружаться в репозитории для обеспечения обратной совместимости.</li> </ul> <h4 id=backward-incompatible-changes-9>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-9 title="Permanent link">&para;</a></h4> <ul> <li>Удалена специальная интерпретация выражения IN, если массив указан с левой стороны. Ранее выражение <code>arr IN (set)</code> было истолковано как «at least one <code>arr</code> element belongs to the <code>set</code>». Чтобы получить такое же поведение в новой версии, напишите <code>arrayExists(x -&gt; x IN (set), arr)</code>.</li> <li>Отключено неправильное использование опции сокета <code>SO_REUSEPORT</code>, который был неправильно включен по умолчанию в библиотеке Poco. Обратите внимание, что в Linux больше нет никаких причин одновременно указывать адреса <code>::</code> и <code>0.0.0.0</code> for listen – use just <code>::</code>, что позволяет прослушивать соединение как по IPv4, так и по IPv6 (с настройками конфигурации ядра по умолчанию). Вы также можете вернуться к поведению из предыдущих версий, указав <code>&lt;listen_reuse_port&gt;1&lt;/listen_reuse_port&gt;</code> в конфигурации.</li> </ul> <h3 id=clickhouse-release-1-1-54370-2018-03-16>ClickHouse релиз 1.1.54370, 2018-03-16<a class=headerlink href=#clickhouse-release-1-1-54370-2018-03-16 title="Permanent link">&para;</a></h3> <h4 id=new-features-15>Новые средства:<a class=headerlink href=#new-features-15 title="Permanent link">&para;</a></h4> <ul> <li>Добавил тот <code>system.macros</code> таблица и автоматическое обновление макросов при изменении конфигурационного файла.</li> <li>Добавил тот <code>SYSTEM RELOAD CONFIG</code> запрос.</li> <li>Добавил тот <code>maxIntersections(left_col, right_col)</code> агрегатная функция, возвращающая максимальное количество одновременно пересекающихся интервалов <code>[left; right]</code>. То <code>maxIntersectionsPosition(left, right)</code> функция возвращает начало строки «maximum» интервал. (<a href=https://github.com/ClickHouse/ClickHouse/pull/2012 rel="external nofollow noreferrer">Майкл Фурмур</a>).</li> </ul> <h4 id=improvements-14>Улучшения:<a class=headerlink href=#improvements-14 title="Permanent link">&para;</a></h4> <ul> <li>При вставке данных в <code>Replicated</code> таблица, меньше запросов делается к <code>ZooKeeper</code> (и большинство ошибок на уровне пользователя исчезли с экрана. <code>ZooKeeper</code> бревно).</li> <li>Добавлена возможность создавать псевдонимы для наборов данных. Пример: <code>WITH (1, 2, 3) AS set SELECT number IN set FROM system.numbers LIMIT 10</code>.</li> </ul> <h4 id=bug-fixes-26>Устранение ошибок:<a class=headerlink href=#bug-fixes-26 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка <code>Illegal PREWHERE</code> ошибка при чтении из таблиц слияния для <code>Distributed</code>таблицы.</li> <li>Добавлены исправления, позволяющие запускать clickhouse-сервер в контейнерах Docker только для IPv4.</li> <li>Исправлено состояние гонки при считывании из системы <code>system.parts_columns tables.</code></li> <li>Удалена двойная буферизация во время синхронной вставки в a <code>Distributed</code> таблица, которая могла бы вызвать тайм-аут соединения.</li> <li>Исправлена ошибка, приводившая к чрезмерно долгому ожиданию недоступной реплики перед началом работы. <code>SELECT</code> запрос.</li> <li>Исправлены неверные даты в программе <code>system.parts</code> стол.</li> <li>Исправлена ошибка, из-за которой невозможно было вставить данные в <code>Replicated</code> таблица если <code>chroot</code> был непустым в конфигурации системы. <code>ZooKeeper</code> скопление.</li> <li>Исправлен алгоритм вертикального слияния для пустого объекта <code>ORDER BY</code> стол.</li> <li>Восстановлена возможность использования словарей в запросах к удаленным таблицам, даже если эти словари отсутствуют на сервере-запросчике. Эта функциональность была потеряна в выпуске 1.1.54362.</li> <li>Восстановлено поведение для таких запросов, как <code>SELECT * FROM remote('server2', default.table) WHERE col IN (SELECT col2 FROM default.table)</code> когда правая сторона <code>IN</code> следует использовать пульт дистанционного управления <code>default.table</code> а не какой-нибудь местный. Это поведение было нарушено в версии 1.1.54358.</li> <li>Удалено постороннее протоколирование уровня ошибок <code>Not found column ... in block</code>.</li> </ul> <h3 id=clickhouse-release-1-1-54362-2018-03-11>Clickhouse Релиз 1.1.54362, 2018-03-11<a class=headerlink href=#clickhouse-release-1-1-54362-2018-03-11 title="Permanent link">&para;</a></h3> <h4 id=new-features-16>Новые средства:<a class=headerlink href=#new-features-16 title="Permanent link">&para;</a></h4> <ul> <li>Агрегация без <code>GROUP BY</code> для пустого набора (например, <code>SELECT count(*) FROM table WHERE 0</code>) теперь возвращает результат с одной строкой с нулевыми значениями для агрегатных функций, в соответствии со стандартом SQL. Чтобы восстановить старое поведение (вернуть пустой результат), установите <code>empty_result_for_aggregation_by_empty_set</code> до 1.</li> <li>Добавлено преобразование типов для <code>UNION ALL</code>. Здесь разрешены разные псевдонимы <code>SELECT</code> должности в <code>UNION ALL</code>, в соответствии со стандартом SQL.</li> <li>Произвольные выражения поддерживаются в <code>LIMIT BY</code> статьи. Ранее можно было использовать только столбцы, полученные в результате <code>SELECT</code>.</li> <li>Индекс из <code>MergeTree</code> таблицы используются, когда <code>IN</code> применяется к кортежу выражений из столбцов первичного ключа. Пример: <code>WHERE (UserID, EventDate) IN ((123, '2000-01-01'), ...)</code> (Анастасия Царькова).</li> <li>Добавил тот <code>clickhouse-copier</code> инструмент для копирования между кластерами и пересчета данных (бета-версия).</li> <li>Добавлены последовательные функции хэширования: <code>yandexConsistentHash</code>, <code>jumpConsistentHash</code>, <code>sumburConsistentHash</code>. Они могут быть использованы в качестве ключа сегментирования для уменьшения объема сетевого трафика во время последующих повторных сегментирования.</li> <li>Добавленные функции: <code>arrayAny</code>, <code>arrayAll</code>, <code>hasAny</code>, <code>hasAll</code>, <code>arrayIntersect</code>, <code>arrayResize</code>.</li> <li>Добавил тот <code>arrayCumSum</code> функция (Хави Сантана).</li> <li>Добавил тот <code>parseDateTimeBestEffort</code>, <code>parseDateTimeBestEffortOrZero</code>, и <code>parseDateTimeBestEffortOrNull</code> функции для чтения DateTime из строки, содержащей текст в широком спектре возможных форматов.</li> <li>Данные могут быть частично перезагружены из внешних словарей во время обновления (загружаются только те записи, в которых значение указанного поля больше, чем в предыдущей загрузке) (Арсен Акопян).</li> <li>Добавил тот <code>cluster</code> табличная функция. Пример: <code>cluster(cluster_name, db, table)</code>. То <code>remote</code> табличная функция может принять имя кластера в качестве первого аргумента, если оно указано в качестве идентификатора.</li> <li>То <code>remote</code> и <code>cluster</code> функции таблицы можно использовать в <code>INSERT</code> запросы.</li> <li>Добавил тот <code>create_table_query</code> и <code>engine_full</code> виртуальные столбцы для <code>system.tables</code>стол. То <code>metadata_modification_time</code> колонка виртуальная.</li> <li>Добавил тот <code>data_path</code> и <code>metadata_path</code> колонны до <code>system.tables</code>и<code>system.databases</code> таблицы, а также добавил <code>path</code> колонка к столу <code>system.parts</code> и <code>system.parts_columns</code> таблицы.</li> <li>Добавлена дополнительная информация о слияниях в системе <code>system.part_log</code> стол.</li> <li>Для этого можно использовать произвольный ключ секционирования. <code>system.query_log</code> стол (Кирилл Шваков).</li> <li>То <code>SHOW TABLES</code> запрос теперь также показывает временные таблицы. Добавлены временные таблицы и <code>is_temporary</code> столбец <code>system.tables</code> (zhang2014).</li> <li>Добавлен <code>DROP TEMPORARY TABLE</code> и <code>EXISTS TEMPORARY TABLE</code> запросы (zhang2014).</li> <li>Поддержка <code>SHOW CREATE TABLE</code> для временных таблиц (zhang2014).</li> <li>Добавил тот <code>system_profile</code> параметр конфигурации для параметров, используемых внутренними процессами.</li> <li>Поддержка для загрузки <code>object_id</code> в качестве атрибута <code>MongoDB</code> словари (Павел Литвиненко).</li> <li>Чтение <code>null</code> в качестве значения по умолчанию при загрузке данных для внешнего словаря с помощью <code>MongoDB</code> источник (Павел Литвиненко).</li> <li>Чтение <code>DateTime</code> значения в системе <code>Values</code> форматирование из временной метки Unix без одинарных кавычек.</li> <li>Отказоустойчивость поддерживается в <code>remote</code> табличные функции для случаев, когда некоторые реплики отсутствуют в запрашиваемой таблице.</li> <li>Параметры конфигурации могут быть переопределены в командной строке при запуске <code>clickhouse-server</code>. Пример: <code>clickhouse-server -- --logger.level=information</code>.</li> <li>Реализовано следующее <code>empty</code> функция от <code>FixedString</code> аргумент: функция возвращает 1, если строка полностью состоит из нулевых байтов (zhang2014).</li> <li>Добавил тот <code>listen_try</code>параметр конфигурации для прослушивания хотя бы одного из прослушиваемых адресов без выхода из системы, если некоторые адреса не могут быть прослушаны (полезно для систем с отключенной поддержкой IPv4 или IPv6).</li> <li>Добавил тот <code>VersionedCollapsingMergeTree</code> настольный двигатель.</li> <li>Поддержка строк и произвольных числовых типов для <code>library</code> источник словаря.</li> <li><code>MergeTree</code> таблицы можно использовать и без первичного ключа (необходимо указать <code>ORDER BY tuple()</code>).</li> <li>A <code>Nullable</code> тип может быть <code>CAST</code> не-<code>Nullable</code> введите если аргумент не является таковым <code>NULL</code>.</li> <li><code>RENAME TABLE</code> может быть выполнена для <code>VIEW</code>.</li> <li>Добавил тот <code>throwIf</code> функция.</li> <li>Добавил тот <code>odbc_default_field_size</code> опция, которая позволяет расширить максимальный размер значения, загруженного из источника ODBC (по умолчанию это 1024).</li> <li>То <code>system.processes</code> стол и <code>SHOW PROCESSLIST</code> теперь у вас есть <code>is_cancelled</code> и <code>peak_memory_usage</code> столбцы.</li> </ul> <h4 id=improvements-15>Улучшения:<a class=headerlink href=#improvements-15 title="Permanent link">&para;</a></h4> <ul> <li>Ограничения и квоты на результат больше не применяются к промежуточным данным для <code>INSERT SELECT</code> запросы или для <code>SELECT</code> подзапросы.</li> <li>Меньше ложных срабатываний <code>force_restore_data</code> при проверке состояния <code>Replicated</code> таблицы при запуске сервера.</li> <li>Добавил тот <code>allow_distributed_ddl</code> вариант.</li> <li>Недетерминированные функции не допускаются в выражениях для <code>MergeTree</code> ключи от стола.</li> <li>Файлы с заменами из <code>config.d</code> каталоги загружаются в алфавитном порядке.</li> <li>Улучшенная производительность системы <code>arrayElement</code> функция в случае постоянного многомерного массива с пустым массивом в качестве одного из элементов. Пример: <code>[[1], []][x]</code>.</li> <li>Теперь сервер запускается быстрее при использовании конфигурационных файлов с очень большими заменами (например, очень большими списками IP-сетей).</li> <li>При выполнении запроса функции с табличным значением выполняются один раз. Ранее, <code>remote</code> и <code>mysql</code> функции с табличным значением дважды выполняли один и тот же запрос для получения структуры таблицы с удаленного сервера.</li> <li>То <code>MkDocs</code> используется генератор документации.</li> <li>При попытке удалить столбец таблицы, который <code>DEFAULT</code>/<code>MATERIALIZED</code> выражения других столбцов зависят от того, возникает ли исключение (zhang2014).</li> <li>Добавлена возможность разбирать пустую строку в текстовых форматах как число 0 для <code>Float</code> тип данных. Эта функция была ранее доступна, но была потеряна в выпуске 1.1.54342.</li> <li><code>Enum</code> значения могут быть использованы в <code>min</code>, <code>max</code>, <code>sum</code> и некоторые другие функции. В этих случаях он использует соответствующие числовые значения. Эта функция была ранее доступна, но была потеряна в выпуске 1.1.54337.</li> <li>Добавлен <code>max_expanded_ast_elements</code> чтобы ограничить размер AST после рекурсивного расширения псевдонимов.</li> </ul> <h4 id=bug-fixes-27>Устранение ошибок:<a class=headerlink href=#bug-fixes-27 title="Permanent link">&para;</a></h4> <ul> <li>Исправлены случаи, когда ненужные столбцы были удалены из подзапросов по ошибке или не были удалены из подзапросов, содержащих <code>UNION ALL</code>.</li> <li>Исправлена ошибка в слияниях для <code>ReplacingMergeTree</code> таблицы.</li> <li>Исправлены синхронные вставки в <code>Distributed</code> таблицы (<code>insert_distributed_sync = 1</code>).</li> <li>Исправлена обработка выхода онлайн / оффлайн для определенного использования <code>FULL</code> и <code>RIGHT JOIN</code> с повторяющимися столбцами в подзапросах.</li> <li>Исправлена ошибка segfault для некоторых видов использования <code>replace_running_query</code> и <code>KILL QUERY</code>.</li> <li>Исправлен порядок следования <code>source</code> и <code>last_exception</code> колонны в центре города <code>system.dictionaries</code> стол.</li> <li>Исправлена ошибка, когда <code>DROP DATABASE</code> запрос не удалил файл с метаданными.</li> <li>Исправлена ошибка <code>DROP DATABASE</code> запрос для <code>Dictionary</code> база данных.</li> <li>Исправлена низкая точность <code>uniqHLL12</code> и <code>uniqCombined</code> функции для кардинальностей, превышающих 100 миллионов единиц (Алексей Бочаров).</li> <li>Исправлено вычисление неявных значений по умолчанию при необходимости одновременного вычисления явных выражений по умолчанию в <code>INSERT</code> запросы (zhang2014).</li> <li>Исправлен редкий случай, когда запрос к a <code>MergeTree</code> стол не смог закончить (chenxing-xc).</li> <li>Исправлена ошибка, возникшая при запуске программы <code>CHECK</code> запрос для <code>Distributed</code> таблицы, если все осколки являются локальными (chenxing.xc).</li> <li>Исправлена небольшая регрессия производительности с функциями, использующими регулярные выражения.</li> <li>Исправлена регрессия производительности при создании многомерных массивов из сложных выражений.</li> <li>Исправлена ошибка, которая могла привести к дополнительному <code>FORMAT</code> раздел, который будет отображаться в <code>.sql</code> файл с метаданными.</li> <li>Исправлена ошибка, которая вызвала <code>max_table_size_to_drop</code> ограничение для применения при попытке удалить a <code>MATERIALIZED VIEW</code> глядя на явно заданную таблицу.</li> <li>Исправлена несовместимость со старыми клиентами (старые клиенты иногда отправляли данные вместе со старыми клиентами). <code>DateTime('timezone')</code> типа, которого они не понимают).</li> <li>Исправлена ошибка при чтении <code>Nested</code> элементы столбцов структур, которые были добавлены с помощью <code>ALTER</code> но это пусто для старых разделов, когда условия для этих столбцов переместились в <code>PREWHERE</code>.</li> <li>Исправлена ошибка при фильтрации таблиц по виртуальным <code>_table</code> столбцы в запросах к <code>Merge</code> таблицы.</li> <li>Исправлена ошибка при использовании <code>ALIAS</code> колонны внутри <code>Distributed</code> таблицы.</li> <li>Исправлена ошибка, которая делала невозможной динамическую компиляцию запросов с агрегатными функциями из <code>quantile</code> семья.</li> <li>Исправлено условие гонки в конвейере выполнения запросов, которое возникало в очень редких случаях при использовании <code>Merge</code> таблицы с большим количеством таблиц, а при использовании <code>GLOBAL</code> подзапросы.</li> <li>Исправлена ошибка при передаче массивов разных размеров в <code>arrayReduce</code> функция при использовании агрегатных функций из нескольких аргументов.</li> <li>Запрещено использование запросов с помощью <code>UNION ALL</code> в <code>MATERIALIZED VIEW</code>.</li> <li>Исправлена ошибка при инициализации программы. <code>part_log</code> системная таблица при запуске сервера (по умолчанию, <code>part_log</code> отключен).</li> </ul> <h4 id=backward-incompatible-changes-10>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-10 title="Permanent link">&para;</a></h4> <ul> <li>Удалил то <code>distributed_ddl_allow_replicated_alter</code> вариант. Это поведение включено по умолчанию.</li> <li>Удалил то <code>strict_insert_defaults</code> установка. Если вы использовали эту функцию, напишите нам <code>clickhouse-feedback@yandex-team.com</code>.</li> <li>Удалил то <code>UnsortedMergeTree</code> двигатель.</li> </ul> <h3 id=clickhouse-release-1-1-54343-2018-02-05>Clickhouse Релиз 1.1.54343, 2018-02-05<a class=headerlink href=#clickhouse-release-1-1-54343-2018-02-05 title="Permanent link">&para;</a></h3> <ul> <li>Добавлена поддержка макросов для определения имен кластеров в распределенных DDL запросах и конструкторах распределенных таблиц: <code>CREATE TABLE distr ON CLUSTER '{cluster}' (...) ENGINE = Distributed('{cluster}', 'db', 'table')</code>.</li> <li>Теперь такие запросы, как <code>SELECT ... FROM table WHERE expr IN (subquery)</code> обрабатываются с помощью <code>table</code> индекс.</li> <li>Улучшена обработка дубликатов при вставке в реплицируемые таблицы, поэтому они больше не замедляют выполнение очереди репликации.</li> </ul> <h3 id=clickhouse-release-1-1-54342-2018-01-22>Clickhouse Релиз 1.1.54342, 2018-01-22<a class=headerlink href=#clickhouse-release-1-1-54342-2018-01-22 title="Permanent link">&para;</a></h3> <p>Этот выпуск содержит исправления ошибок для предыдущей версии 1.1.54337:</p> <ul> <li>Исправлена регрессия в 1.1.54337: если пользователь по умолчанию имеет доступ только для чтения, то сервер отказывается запускаться с сообщением <code>Cannot create database in readonly mode</code>.</li> <li>Исправлена регрессия в 1.1.54337: в системах с systemd журналы всегда записываются в syslog независимо от конфигурации; сценарий watchdog все еще использует init.д.</li> <li>Исправлена регрессия в 1.1.54337: неправильная конфигурация по умолчанию в образе Docker.</li> <li>Исправлено недетерминированное поведение GraphiteMergeTree (вы можете увидеть его в сообщениях журнала <code>Data after merge is not byte-identical to the data on another replicas</code>).</li> <li>Исправлена ошибка, которая могла привести к несогласованным слияниям после оптимизации запроса к Реплицируемым таблицам (вы можете увидеть это в сообщениях журнала <code>Part ... intersects the previous part</code>).</li> <li>Буферные таблицы теперь работают правильно, когда материализованные столбцы присутствуют в целевой таблице (по zhang2014).</li> <li>Исправлена ошибка в реализации NULL.</li> </ul> <h3 id=clickhouse-release-1-1-54337-2018-01-18>Clickhouse Релиз 1.1.54337, 2018-01-18<a class=headerlink href=#clickhouse-release-1-1-54337-2018-01-18 title="Permanent link">&para;</a></h3> <h4 id=new-features-17>Новые средства:<a class=headerlink href=#new-features-17 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена поддержка хранения многомерных массивов и кортежей (<code>Tuple</code> тип данных) в таблицах.</li> <li>Поддержка функций таблицы для <code>DESCRIBE</code> и <code>INSERT</code> запросы. Добавлена поддержка вложенных запросов в <code>DESCRIBE</code>. Примеры: <code>DESC TABLE remote('host', default.hits)</code>; <code>DESC TABLE (SELECT 1)</code>; <code>INSERT INTO TABLE FUNCTION remote('host', default.hits)</code>. Поддержка <code>INSERT INTO TABLE</code> в дополнение к <code>INSERT INTO</code>.</li> <li>Улучшена поддержка часовых поясов. То <code>DateTime</code> тип данных может быть аннотирован с помощью часового пояса, который используется для синтаксического анализа и форматирования в текстовых форматах. Пример: <code>DateTime('Europe/Moscow')</code>. Когда часовые пояса указаны в функциях для <code>DateTime</code> аргументы, возвращаемый тип будет отслеживать часовой пояс, и значение будет отображаться, как и ожидалось.</li> <li>Добавлены функции <code>toTimeZone</code>, <code>timeDiff</code>, <code>toQuarter</code>, <code>toRelativeQuarterNum</code>. То <code>toRelativeHour</code>/<code>Minute</code>/<code>Second</code> функции могут принимать значение типа <code>Date</code> в качестве аргумента. То <code>now</code> имя функции чувствительно к регистру.</li> <li>Добавил тот <code>toStartOfFifteenMinutes</code> функция (Кирилл Шваков).</li> <li>Добавил тот <code>clickhouse format</code> инструмент для форматирования запросов.</li> <li>Добавил тот <code>format_schema_path</code> configuration parameter (Marek Vavruşa). It is used for specifying a schema in <code>Cap'n Proto</code> формат. Файлы схемы могут быть расположены только в указанном каталоге.</li> <li>Добавлена поддержка подстановок конфигураций (<code>incl</code> и <code>conf.d</code>) для настройки внешних словарей и моделей (Павел Якунин).</li> <li>Добавлена колонка с документацией для <code>system.settings</code> стол (Кирилл Шваков).</li> <li>Добавил тот <code>system.parts_columns</code> таблица с информацией о размерах столбцов в каждой части данных <code>MergeTree</code> таблицы.</li> <li>Добавил тот <code>system.models</code> таблица с информацией о загруженных данных <code>CatBoost</code> модели машинного обучения.</li> <li>Добавил тот <code>mysql</code> и <code>odbc</code> таблица функций и соответствующих <code>MySQL</code> и <code>ODBC</code> табличные движки для доступа к удаленным базам данных. Эта функциональность находится в стадии бета-тестирования.</li> <li>Добавлена возможность передачи аргумента типа <code>AggregateFunction</code> для <code>groupArray</code> агрегатная функция (таким образом, вы можете создать массив состояний некоторой агрегатной функции).</li> <li>Сняты ограничения на различные комбинации комбинаторов агрегатных функций. Например, вы можете использовать <code>avgForEachIf</code> так же как <code>avgIfForEach</code> агрегатные функции, которые имеют различное поведение.</li> <li>То <code>-ForEach</code> комбинатор агрегатных функций расширен для случая агрегатных функций с несколькими аргументами.</li> <li>Добавлена поддержка агрегатных функций <code>Nullable</code> аргументы даже в тех случаях, когда функция возвращает не --<code>Nullable</code> результат (добавлено с вкладом Сильвиу Карагеа). Пример: <code>groupArray</code>, <code>groupUniqArray</code>, <code>topK</code>.</li> <li>Добавил тот <code>max_client_network_bandwidth</code> для <code>clickhouse-client</code> (Кирилл Шваков).</li> <li>Пользователи с помощью <code>readonly = 2</code> setting are allowed to work with TEMPORARY tables (CREATE, DROP, INSERT…) (Kirill Shvakov).</li> <li>Добавлена поддержка использования нескольких потребителей с помощью <code>Kafka</code> двигатель. Расширенные параметры конфигурации для <code>Kafka</code> (Marek Vavruša).</li> <li>Добавил тот <code>intExp3</code> и <code>intExp4</code> функции.</li> <li>Добавил тот <code>sumKahan</code> статистическая функция.</li> <li>Добавлены функции to * Number* OrNull, где * Number* - это числовой тип.</li> <li>Добавлена поддержка для <code>WITH</code> положения для <code>INSERT SELECT</code> запрос (автор: zhang2014).</li> <li>Добавлены настройки: <code>http_connection_timeout</code>, <code>http_send_timeout</code>, <code>http_receive_timeout</code>. В частности, эти параметры используются для загрузки частей данных для репликации. Изменение этих параметров позволяет ускорить отработку отказа при перегрузке сети.</li> <li>Добавлена поддержка для <code>ALTER</code> для таблиц типа <code>Null</code> (Анастасия Царькова).</li> <li>То <code>reinterpretAsString</code> функция расширена для всех типов данных, которые хранятся последовательно в памяти.</li> <li>Добавил тот <code>--silent</code> вариант для самого <code>clickhouse-local</code> инструмент. Он подавляет печать информации о выполнении запроса в stderr.</li> <li>Добавлена поддержка считывания значений типа <code>Date</code> из текста в формате, где месяц и / или день месяца указывается с использованием одной цифры вместо двух цифр (Amos Bird).</li> </ul> <h4 id=performance-optimizations>Оптимизация производительности:<a class=headerlink href=#performance-optimizations title="Permanent link">&para;</a></h4> <ul> <li>Улучшена производительность агрегатных функций <code>min</code>, <code>max</code>, <code>any</code>, <code>anyLast</code>, <code>anyHeavy</code>, <code>argMin</code>, <code>argMax</code> из строковых аргументов.</li> <li>Улучшенная производительность функций <code>isInfinite</code>, <code>isFinite</code>, <code>isNaN</code>, <code>roundToExp2</code>.</li> <li>Улучшена производительность синтаксического анализа и форматирования <code>Date</code> и <code>DateTime</code> введите значения в текстовом формате.</li> <li>Улучшена производительность и точность синтаксического анализа чисел с плавающей запятой.</li> <li>Пониженное использование памяти для <code>JOIN</code> в том случае, когда левая и правая части имеют столбцы с одинаковыми именами, которые не содержатся в <code>USING</code> .</li> <li>Улучшена производительность агрегатных функций <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code> за счет снижения вычислительной стабильности. Старые функции доступны под названиями <code>varSampStable</code>, <code>varPopStable</code>, <code>stddevSampStable</code>, <code>stddevPopStable</code>, <code>covarSampStable</code>, <code>covarPopStable</code>, <code>corrStable</code>.</li> </ul> <h4 id=bug-fixes-28>Устранение ошибок:<a class=headerlink href=#bug-fixes-28 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена дедупликация данных после запуска a <code>DROP</code> или <code>DETACH PARTITION</code> запрос. В предыдущей версии удаление раздела и вставка тех же данных снова не работали, потому что вставленные блоки считались дубликатами.</li> <li>Исправлена ошибка, которая могла привести к неправильной интерпретации текста. <code>WHERE</code> пунктом <code>CREATE MATERIALIZED VIEW</code> запросы с помощью <code>POPULATE</code> .</li> <li>Исправлена ошибка в использовании <code>root_path</code> параметр в поле <code>zookeeper_servers</code> конфигурация.</li> <li>Исправлены непредвиденные результаты прохождения теста <code>Date</code> аргумент в пользу <code>toStartOfDay</code> .</li> <li>Исправлена ошибка <code>addMonths</code> и <code>subtractMonths</code> функции и арифметика для <code>INTERVAL n MONTH</code> в тех случаях, когда результат имеет предыдущий год.</li> <li>Добавлена отсутствующая поддержка для <code>UUID</code> тип данных для <code>DISTINCT</code> , <code>JOIN</code> , и <code>uniq</code> агрегатные функции и внешние словари (Евгений Иванов). Поддержка <code>UUID</code> он все еще не завершен.</li> <li>Исправлено <code>SummingMergeTree</code> поведение в тех случаях, когда строки суммируются до нуля.</li> <li>Различные исправления для <code>Kafka</code> engine (Marek Vavruša).</li> <li>Исправлено некорректное поведение устройства <code>Join</code> настольный движок (птица Амос).</li> <li>Исправлено некорректное поведение распределителя под FreeBSD и OS X.</li> <li>То <code>extractAll</code> функция теперь поддерживает пустые матчи.</li> <li>Исправлена ошибка, которая блокировала использование <code>libressl</code> вместо <code>openssl</code> .</li> <li>Исправлена ошибка <code>CREATE TABLE AS SELECT</code> запрос из временных таблиц.</li> <li>Исправлена неатомность обновления очереди репликации. Это может привести к тому, что реплики будут несинхронизированы до тех пор, пока сервер не перезагрузится.</li> <li>Исправлено возможное переполнение внутри <code>gcd</code> , <code>lcm</code> и <code>modulo</code> (<code>%</code> оператор) (Макс Скороход).</li> <li><code>-preprocessed</code> файлы теперь создаются после изменения <code>umask</code> (<code>umask</code> можно изменить в конфигурации).</li> <li>Исправлена ошибка в фоновой проверке деталей (<code>MergeTreePartChecker</code> ) при использовании пользовательского ключа раздела.</li> <li>Исправлен разбор кортежей (значения <code>Tuple</code> тип данных) в текстовых форматах.</li> <li>Улучшены сообщения об ошибках о несовместимых типах, передаваемых в <code>multiIf</code> , <code>array</code> и некоторые другие функции.</li> <li>Переработанная поддержка для <code>Nullable</code> типы. Исправлены ошибки, которые могут привести к сбою сервера. Исправлены почти все другие ошибки, связанные с <code>NULL</code> поддержка: некорректное преобразование типов в вставьте выберите, недостаточная поддержка значения NULL в наличии и PREWHERE, <code>join_use_nulls</code> режим, типы, допускающие значения NULL в качестве аргументов <code>OR</code> оператор и т. д.</li> <li>Исправлены различные ошибки, связанные с внутренней семантикой типов данных. Примеры: ненужное суммирование <code>Enum</code> поля, тип в <code>SummingMergeTree</code> ; выравнивание <code>Enum</code> напечатать <code>Pretty</code> форматы и т. д.</li> <li>Более строгие проверки допустимых комбинаций составных столбцов.</li> <li>Исправлено переполнение при указании очень большого параметра для <code>FixedString</code> тип данных.</li> <li>Исправлена ошибка в системе <code>topK</code> агрегатная функция в общем случае.</li> <li>Добавлена недостающая проверка на равенство размеров массива в аргументах n-арных вариантов агрегатных функций с АНА - <code>-Array</code> комбинатор.</li> <li>Исправлена ошибка в работе <code>--pager</code> для <code>clickhouse-client</code> (автор: кс1322).</li> <li>Исправлена точность установки <code>exp10</code> функция.</li> <li>Исправлено поведение объекта <code>visitParamExtract</code> функция для лучшего соответствия документации.</li> <li>Исправлена ошибка при указании неверных типов данных.</li> <li>Исправлено поведение <code>DISTINCT</code> в том случае, когда все столбцы являются константами.</li> <li>Исправлено форматирование запроса в случае использования <code>tupleElement</code> функция со сложным постоянным выражением в качестве индекса элемента кортежа.</li> <li>Исправлена ошибка в работе <code>Dictionary</code> таблицы для <code>range_hashed</code> словари.</li> <li>Исправлена ошибка, приводившая к избыточным строкам в результате <code>FULL</code> и <code>RIGHT JOIN</code> (Эймос Берд).</li> <li>Исправлен сбой сервера при создании и удалении временных файлов в системе <code>config.d</code> каталоги во время перезагрузки конфигурации.</li> <li>Исправлена ошибка <code>SYSTEM DROP DNS CACHE</code> запрос: Кэш был очищен, но адреса узлов кластера не были обновлены.</li> <li>Исправлено поведение <code>MATERIALIZED VIEW</code> после выполнения <code>DETACH TABLE</code> for the table under the view (Marek Vavruša).</li> </ul> <h4 id=build-improvements-4>Улучшения сборки:<a class=headerlink href=#build-improvements-4 title="Permanent link">&para;</a></h4> <ul> <li>То <code>pbuilder</code> инструмент используется для сборки. Процесс сборки практически полностью независим от среды узла сборки.</li> <li>Одна сборка используется для разных версий ОС. Пакеты и двоичные файлы были сделаны совместимыми с широким спектром систем Linux.</li> <li>Добавил тот <code>clickhouse-test</code> пакет. Он может быть использован для выполнения функциональных тестов.</li> <li>Исходный тарбол теперь можно опубликовать в репозитории. Он может быть использован для воспроизведения сборки без использования GitHub.</li> <li>Добавлена ограниченная интеграция с Travis CI. Из-за ограничений на время сборки в Travis тестируется только отладочная сборка и выполняется ограниченное подмножество тестов.</li> <li>Добавлена поддержка для <code>Cap'n'Proto</code> в сборке по умолчанию.</li> <li>Изменен формат источников документации с <code>Restricted Text</code> к <code>Markdown</code>.</li> <li>Добавлена поддержка для <code>systemd</code> (Владимир Смирнов). Он отключен по умолчанию из-за несовместимости с некоторыми образами ОС и может быть включен вручную.</li> <li>Для динамической генерации кода, <code>clang</code> и <code>lld</code> они встроены в систему <code>clickhouse</code> двоичный. Они также могут быть вызваны как <code>clickhouse clang</code> и <code>clickhouse lld</code> .</li> <li>Удалено использование расширений GNU из кода. Включил эту функцию <code>-Wextra</code> вариант. При строительстве с помощью <code>clang</code> значение по умолчанию равно <code>libc++</code> вместо <code>libstdc++</code>.</li> <li>Извлеченный <code>clickhouse_parsers</code> и <code>clickhouse_common_io</code> библиотеки для ускорения сборки различных инструментов.</li> </ul> <h4 id=backward-incompatible-changes-11>Назад несовместимые изменения:<a class=headerlink href=#backward-incompatible-changes-11 title="Permanent link">&para;</a></h4> <ul> <li>Формат для отметок в <code>Log</code> введите таблицы, которые содержат <code>Nullable</code> колонны были изменены обратно несовместимым образом. Если у вас есть эти таблицы, вы должны преобразовать их в следующие: <code>TinyLog</code> введите текст перед запуском новой версии сервера. Чтобы сделать это, замените <code>ENGINE = Log</code> с <code>ENGINE = TinyLog</code> в соответствующем разделе <code>.sql</code> файл в папке <code>metadata</code> каталог. Если ваш стол не имеет <code>Nullable</code> столбцы или если тип вашей таблицы не указан <code>Log</code>- тогда вам ничего не нужно делать.</li> <li>Удалил то <code>experimental_allow_extended_storage_definition_syntax</code> установка. Теперь эта функция включена по умолчанию.</li> <li>То <code>runningIncome</code> функция была переименована в <code>runningDifferenceStartingWithFirstvalue</code> избежать недоразумений.</li> <li>Удалил то <code>FROM ARRAY JOIN arr</code> синтаксис, когда соединение массива задается непосредственно после FROM без таблицы (Amos Bird).</li> <li>Удалил то <code>BlockTabSeparated</code> формат, который использовался исключительно в демонстрационных целях.</li> <li>Изменен формат состояния для агрегатных функций <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code>. Если вы сохранили состояния этих агрегатных функций в таблицах (с помощью <code>AggregateFunction</code> тип данных или материализованные представления с соответствующими состояниями), пожалуйста, напишите нам clickhouse-feedback@yandex-team.com-да.</li> <li>В предыдущих версиях сервера существовала недокументированная функция: если агрегатная функция зависит от параметров, то вы все равно можете указать ее без параметров в типе данных AggregateFunction. Пример: <code>AggregateFunction(quantiles, UInt64)</code> вместо <code>AggregateFunction(quantiles(0.5, 0.9), UInt64)</code>. Эта особенность была утеряна. Хотя он был недокументирован, мы планируем снова поддержать его в будущих выпусках.</li> <li>Типы данных Enum не могут использоваться в агрегатных функциях min/max. Эта способность будет возвращена в следующем выпуске.</li> </ul> <h4 id=please-note-when-upgrading>Пожалуйста, обратите внимание при обновлении:<a class=headerlink href=#please-note-when-upgrading title="Permanent link">&para;</a></h4> <ul> <li>При выполнении скользящего обновления в кластере в тот момент, когда некоторые реплики работают под управлением старой версии ClickHouse, а некоторые-под управлением новой версии, репликация временно прекращается и появляется сообщение <code>unknown parameter 'shard'</code> появляется в журнале регистрации. Репликация будет продолжена после обновления всех реплик кластера.</li> <li>Если на серверах кластера запущены разные версии ClickHouse, то вполне возможно, что распределенные запросы, использующие следующие функции, будут иметь неверные результаты: <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code>. Вы должны обновить все узлы кластера.</li> </ul> <h2 id=changelog-for-2017><a href=https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/changelog/2017.md rel="external nofollow noreferrer">Список изменений на 2017 год</a><a class=headerlink href=#changelog-for-2017 title="Permanent link">&para;</a></h2> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Собрано из <a href=https://github.com/ClickHouse/ClickHouse/commit/c1558f8c18e2727c5991cf923ee79710de89d1d0 rel="external nofollow noreferrer" target=_blank class=text-reset>c1558f8c18</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Cодержание</label> <a href=#clickhouse-release-18-16 title="ClickHouse релиз 18.16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.16 </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-16-1-2018-12-21 title="ClickHouse релиз 18.16.1, 2018-12-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.16.1, 2018-12-21 </a> <nav id=toc-toc-1-1 class="nav flex-column pl-2"> <a href=#bug-fixes title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#improvements title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#build-improvements title="Улучшения сборки:" class="nav-link text-wrap d-inline-block w-100"> Улучшения сборки: </a> </nav> <a href=#clickhouse-release-18-16-0-2018-12-14 title="ClickHouse релиз 18.16.0, 2018-12-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.16.0, 2018-12-14 </a> <nav id=toc-toc-1-2 class="nav flex-column pl-2"> <a href=#new-features title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#bug-fixes-1 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#improvements-1 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#build-improvements-1 title="Улучшения сборки:" class="nav-link text-wrap d-inline-block w-100"> Улучшения сборки: </a> <a href=#backward-incompatible-changes title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> </nav> <a href=#clickhouse-release-18-14 title="ClickHouse релиз 18.14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14 </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-14-19-2018-12-19 title="ClickHouse релиз 18.14.19, 2018-12-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.19, 2018-12-19 </a> <nav id=toc-toc-2-1 class="nav flex-column pl-2"> <a href=#bug-fixes-2 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#build-improvements-2 title="Улучшения сборки:" class="nav-link text-wrap d-inline-block w-100"> Улучшения сборки: </a> </nav> <a href=#clickhouse-release-18-14-18-2018-12-04 title="ClickHouse релиз 18.14.18, 2018-12-04" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.18, 2018-12-04 </a> <nav id=toc-toc-2-2 class="nav flex-column pl-2"> <a href=#bug-fixes-3 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#build-changes title="Изменения в сборке:" class="nav-link text-wrap d-inline-block w-100"> Изменения в сборке: </a> </nav> <a href=#clickhouse-release-18-14-17-2018-11-30 title="ClickHouse релиз 18.14.17, 2018-11-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.17, 2018-11-30 </a> <nav id=toc-toc-2-3 class="nav flex-column pl-2"> <a href=#bug-fixes-4 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-18-14-15-2018-11-21 title="ClickHouse релиз 18.14.15, 2018-11-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.15, 2018-11-21 </a> <nav id=toc-toc-2-4 class="nav flex-column pl-2"> <a href=#bug-fixes-5 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-18-14-14-2018-11-20 title="ClickHouse релиз 18.14.14, 2018-11-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.14, 2018-11-20 </a> <nav id=toc-toc-2-5 class="nav flex-column pl-2"> <a href=#bug-fixes-6 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#build-changes-1 title="Изменения в сборке:" class="nav-link text-wrap d-inline-block w-100"> Изменения в сборке: </a> </nav> <a href=#clickhouse-release-18-14-13-2018-11-08 title="ClickHouse релиз 18.14.13, 2018-11-08" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.13, 2018-11-08 </a> <nav id=toc-toc-2-6 class="nav flex-column pl-2"> <a href=#bug-fixes-7 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#performance-improvements title="Улучшения в производительности:" class="nav-link text-wrap d-inline-block w-100"> Улучшения в производительности: </a> <a href=#build-improvements-3 title="Улучшения сборки:" class="nav-link text-wrap d-inline-block w-100"> Улучшения сборки: </a> </nav> <a href=#clickhouse-release-18-14-12-2018-11-02 title="ClickHouse релиз 18.14.12, 2018-11-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.12, 2018-11-02 </a> <nav id=toc-toc-2-7 class="nav flex-column pl-2"> <a href=#bug-fixes-8 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-18-14-11-2018-10-29 title="ClickHouse релиз 18.14.11, 2018-10-29" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.11, 2018-10-29 </a> <nav id=toc-toc-2-8 class="nav flex-column pl-2"> <a href=#bug-fixes-9 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-18-14-10-2018-10-23 title="ClickHouse релиз 18.14.10, 2018-10-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.10, 2018-10-23 </a> <a href=#clickhouse-release-18-14-9-2018-10-16 title="ClickHouse релиз 18.14.9, 2018-10-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.14.9, 2018-10-16 </a> <nav id=toc-toc-2-10 class="nav flex-column pl-2"> <a href=#new-features-1 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#experimental-features title="Экспериментальная возможность:" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность: </a> <a href=#improvements-2 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-10 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#backward-incompatible-changes-1 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> </nav> <a href=#clickhouse-release-18-12 title="ClickHouse релиз 18.12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.12 </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-12-17-2018-09-16 title="ClickHouse релиз 18.12.17, 2018-09-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.12.17, 2018-09-16 </a> <nav id=toc-toc-3-1 class="nav flex-column pl-2"> <a href=#new-features-2 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#bug-fixes-11 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#backward-incompatible-changes-2 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> <a href=#clickhouse-release-18-12-14-2018-09-13 title="ClickHouse релиз 18.12.14, 2018-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.12.14, 2018-09-13 </a> <nav id=toc-toc-3-2 class="nav flex-column pl-2"> <a href=#new-features-3 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-3 title=Улучшения class="nav-link text-wrap d-inline-block w-100"> Улучшения </a> <a href=#bug-fixes-12 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-18-12-13-2018-09-10 title="ClickHouse релиз 18.12.13, 2018-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.12.13, 2018-09-10 </a> <nav id=toc-toc-3-3 class="nav flex-column pl-2"> <a href=#new-features-4 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#experimental-features-1 title="Экспериментальная возможность:" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность: </a> <a href=#improvements-4 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-13 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#security-fix title="Исправление безопасности:" class="nav-link text-wrap d-inline-block w-100"> Исправление безопасности: </a> <a href=#backward-incompatible-changes-3 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> <a href=#build-changes-2 title="Изменения в сборке:" class="nav-link text-wrap d-inline-block w-100"> Изменения в сборке: </a> </nav> </nav> <a href=#clickhouse-release-18-10 title="ClickHouse релиз 18.10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.10 </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-10-3-2018-08-13 title="ClickHouse релиз 18.10.3, 2018-08-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.10.3, 2018-08-13 </a> <nav id=toc-toc-4-1 class="nav flex-column pl-2"> <a href=#new-features-5 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-5 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-14 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#backward-incompatible-changes-4 title="Назад несовместимые изменения" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения </a> <a href=#build-changes-3 title="Изменения в сборке:" class="nav-link text-wrap d-inline-block w-100"> Изменения в сборке: </a> </nav> </nav> <a href=#clickhouse-release-18-6 title="ClickHouse релиз 18.6" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.6 </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-6-0-2018-08-02 title="ClickHouse релиз 18.6.0, 2018-08-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.6.0, 2018-08-02 </a> <nav id=toc-toc-5-1 class="nav flex-column pl-2"> <a href=#new-features-6 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-6 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> </nav> </nav> <a href=#clickhouse-release-18-5 title="ClickHouse релиз 18.5" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.5 </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-5-1-2018-07-31 title="ClickHouse релиз 18.5.1, 2018-07-31" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.5.1, 2018-07-31 </a> <nav id=toc-toc-6-1 class="nav flex-column pl-2"> <a href=#new-features-7 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-7 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-15 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> </nav> <a href=#clickhouse-release-18-4 title="ClickHouse релиз 18.4" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.4 </a> <nav id=toc-toc-7 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-4-0-2018-07-28 title="ClickHouse релиз 18.4.0, 2018-07-28" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.4.0, 2018-07-28 </a> <nav id=toc-toc-7-1 class="nav flex-column pl-2"> <a href=#new-features-8 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-8 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-16 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#backward-incompatible-changes-5 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> </nav> <a href=#clickhouse-release-18-1 title="ClickHouse релиз 18.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.1 </a> <nav id=toc-toc-8 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-1-0-2018-07-23 title="ClickHouse релиз 18.1.0, 2018-07-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 18.1.0, 2018-07-23 </a> <nav id=toc-toc-8-1 class="nav flex-column pl-2"> <a href=#new-features-9 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-9 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-17 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#backward-incompatible-changes-6 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> </nav> <a href=#clickhouse-release-1-1 title="ClickHouse release 1.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1 </a> <nav id=toc-toc-9 class="nav flex-column pl-2"> <a href=#clickhouse-release-1-1-54394-2018-07-12 title="ClickHouse релиз 1.1.54394, 2018-07-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54394, 2018-07-12 </a> <nav id=toc-toc-9-1 class="nav flex-column pl-2"> <a href=#new-features-10 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#bug-fixes-18 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-1-1-54390-2018-07-06 title="ClickHouse релиз 1.1.54390, 2018-07-06" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54390, 2018-07-06 </a> <nav id=toc-toc-9-2 class="nav flex-column pl-2"> <a href=#new-features-11 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-10 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-19 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#security-fix-1 title="Исправление безопасности:" class="nav-link text-wrap d-inline-block w-100"> Исправление безопасности: </a> </nav> <a href=#clickhouse-release-1-1-54388-2018-06-28 title="ClickHouse релиз 1.1.54388, 2018-06-28" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54388, 2018-06-28 </a> <nav id=toc-toc-9-3 class="nav flex-column pl-2"> <a href=#new-features-12 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#experimental-features-2 title="Экспериментальная возможность:" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность: </a> <a href=#bug-fixes-20 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#improvements-11 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#build-changes-4 title="Изменения в сборке:" class="nav-link text-wrap d-inline-block w-100"> Изменения в сборке: </a> <a href=#backward-incompatible-changes-7 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> <a href=#clickhouse-release-1-1-54385-2018-06-01 title="ClickHouse релиз 1.1.54385, 2018-06-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54385, 2018-06-01 </a> <nav id=toc-toc-9-4 class="nav flex-column pl-2"> <a href=#bug-fixes-21 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-1-1-54383-2018-05-22 title="ClickHouse релиз 1.1.54383, 2018-05-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54383, 2018-05-22 </a> <nav id=toc-toc-9-5 class="nav flex-column pl-2"> <a href=#bug-fixes-22 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-1-1-54381-2018-05-14 title="ClickHouse релиз 1.1.54381, 2018-05-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54381, 2018-05-14 </a> <nav id=toc-toc-9-6 class="nav flex-column pl-2"> <a href=#bug-fixes-23 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-1-1-54380-2018-04-21 title="ClickHouse релиз 1.1.54380, 2018-04-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54380, 2018-04-21 </a> <nav id=toc-toc-9-7 class="nav flex-column pl-2"> <a href=#new-features-13 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-12 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-24 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#backward-incompatible-changes-8 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> <a href=#clickhouse-release-1-1-54378-2018-04-16 title="ClickHouse релиз 1.1.54378, 2018-04-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54378, 2018-04-16 </a> <nav id=toc-toc-9-8 class="nav flex-column pl-2"> <a href=#new-features-14 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-13 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-25 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#build-changes-5 title="Изменения в сборке:" class="nav-link text-wrap d-inline-block w-100"> Изменения в сборке: </a> <a href=#backward-incompatible-changes-9 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> <a href=#clickhouse-release-1-1-54370-2018-03-16 title="ClickHouse релиз 1.1.54370, 2018-03-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 1.1.54370, 2018-03-16 </a> <nav id=toc-toc-9-9 class="nav flex-column pl-2"> <a href=#new-features-15 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-14 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-26 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> </nav> <a href=#clickhouse-release-1-1-54362-2018-03-11 title="Clickhouse Релиз 1.1.54362, 2018-03-11" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Релиз 1.1.54362, 2018-03-11 </a> <nav id=toc-toc-9-10 class="nav flex-column pl-2"> <a href=#new-features-16 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#improvements-15 title=Улучшения: class="nav-link text-wrap d-inline-block w-100"> Улучшения: </a> <a href=#bug-fixes-27 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#backward-incompatible-changes-10 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> </nav> <a href=#clickhouse-release-1-1-54343-2018-02-05 title="Clickhouse Релиз 1.1.54343, 2018-02-05" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Релиз 1.1.54343, 2018-02-05 </a> <a href=#clickhouse-release-1-1-54342-2018-01-22 title="Clickhouse Релиз 1.1.54342, 2018-01-22" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Релиз 1.1.54342, 2018-01-22 </a> <a href=#clickhouse-release-1-1-54337-2018-01-18 title="Clickhouse Релиз 1.1.54337, 2018-01-18" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Релиз 1.1.54337, 2018-01-18 </a> <nav id=toc-toc-9-13 class="nav flex-column pl-2"> <a href=#new-features-17 title="Новые средства:" class="nav-link text-wrap d-inline-block w-100"> Новые средства: </a> <a href=#performance-optimizations title="Оптимизация производительности:" class="nav-link text-wrap d-inline-block w-100"> Оптимизация производительности: </a> <a href=#bug-fixes-28 title="Устранение ошибок:" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок: </a> <a href=#build-improvements-4 title="Улучшения сборки:" class="nav-link text-wrap d-inline-block w-100"> Улучшения сборки: </a> <a href=#backward-incompatible-changes-11 title="Назад несовместимые изменения:" class="nav-link text-wrap d-inline-block w-100"> Назад несовместимые изменения: </a> <a href=#please-note-when-upgrading title="Пожалуйста, обратите внимание при обновлении:" class="nav-link text-wrap d-inline-block w-100"> Пожалуйста, обратите внимание при обновлении: </a> </nav> </nav> <a href=#changelog-for-2017 title="Список изменений на 2017 год" class="nav-link text-wrap d-inline-block w-100"> Список изменений на 2017 год </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
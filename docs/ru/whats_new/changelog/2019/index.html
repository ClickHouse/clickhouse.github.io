<!DOCTYPE html><html lang=ru data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Релиз ClickHouse в19.17 - Документация ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Релиз ClickHouse в19.17 - Документация ClickHouse "><meta property=og:description content="Релиз ClickHouse в19.17 Релиз ClickHouse в19.17.6.36, 2019-12-27 Исправление ошибок Исправлено потенциальное переполнени"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Релиз ClickHouse в19.17 - Документация ClickHouse "><meta name=description content="Релиз ClickHouse в19.17 Релиз ClickHouse в19.17.6.36, 2019-12-27 Исправление ошибок Исправлено потенциальное переполнени"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Релиз ClickHouse в19.17 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/whats_new/changelog/2019.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ru.svg alt=Русский title=Русский width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/whats_new/changelog/2019/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/whats_new/changelog/2019/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/whats_new/changelog/2019/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/whats_new/changelog/2019/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/whats_new/changelog/2019/ class="dropdown-item disabled"> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/whats_new/changelog/2019/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/whats_new/changelog/2019/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Многостраничный или одностраничный"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Многостраничная версия" title="Многостраничная версия"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Одностраничная версия" title="Одностраничная версия"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Версия: <span class=text-light>последняя</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ru/ class="dropdown-item disable"> <span class=text-light>последняя</span> </a> <a href=/docs/v20.3/ru/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ru/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/ru/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ru/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ru/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ru/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ru/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/ru/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ru/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ru/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ru/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../introduction/info/ title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a> <a href=../../../introduction/history/ title="История ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">История ClickHouse</a> <a href=../../../introduction/features_considered_disadvantages/ title="Особенности ClickHouse, которые могут считаться недостатками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Особенности ClickHouse, которые могут считаться недостатками</a> <a href=../../../introduction/distinctive_features/ title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a> <a href=../../../introduction/performance/ title=Производительность class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a> <a href=../../../introduction/adopters/ title="Усыновители ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Усыновители ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title="Движки баз данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки баз данных</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database_engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> <a href=../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database_engines/ title="Движки баз данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки баз данных</a> </nav> </div> <a href=#sidebar-sidebar-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3 title="Движки таблиц" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки таблиц</a> <div id=sidebar-sidebar-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-2-3-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-1 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-2-3-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a> <a href=../../../engines/table_engines/mergetree_family/replication/ title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a> </nav> </div> <a href=#sidebar-sidebar-2-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-2 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-2-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../engines/table_engines/log_family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> <a href=../../../engines/table_engines/log_family/log_family/ title="Семейство Log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Семейство Log</a> </nav> </div> <a href=#sidebar-sidebar-2-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-3 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-2-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> <a href=#sidebar-sidebar-2-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-4 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-2-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../engines/table_engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../../engines/table_engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../../engines/table_engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../../engines/table_engines/special/file/ title=File(Format) class="nav-link text-light text-wrap d-inline-block w-100 px-0">File(Format)</a> <a href=../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> <a href=../../../engines/table_engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table_engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../../engines/table_engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../engines/table_engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../engines/table_engines/special/url/ title="URL(URL, Format)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL, Format)</a> <a href=../../../engines/table_engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../../engines/table_engines/special/external_data/ title="Внешние данные для обработки запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные для обработки запроса</a> </nav> </div> <a href=../../../engines/table_engines/ title="Движки таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки таблиц</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../commercial/cloud/ title="Поставщики облачных услуг ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поставщики облачных услуг ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../whats_new/changelog/2017/ title="ClickHouse релиз 1.1.54327, 2017-12-21" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse релиз 1.1.54327, 2017-12-21</a> <a href=../../../whats_new/changelog/2018/ title="ClickHouse релиз 18.16" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse релиз 18.16</a> <a href=../../../whats_new/changelog/2019/ title="Релиз ClickHouse в19.17" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Релиз ClickHouse в19.17</a> </nav> </div> <a href=../../../whats_new/roadmap/ title="Дорожная карта" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Дорожная карта</a> <a href=../../../whats_new/security_changelog/ title="Исправлено в релизе 19.14.3.3, 2019-09-10" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Исправлено в релизе 19.14.3.3, 2019-09-10</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../faq/general/ title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a> </nav> </div> <a href=../../../extended_roadmap/ title="Планы разработки ClickHouse 2020" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Планы разработки ClickHouse 2020</a> <a href=../../../ title="Что такое ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Что такое ClickHouse</a> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Интерфейсы class="nav-link text-light text-wrap dropdown-toggle px-0">Интерфейсы</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-8-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-1 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-8-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../interfaces/third-party/integrations/ title="Библиотеки для интеграции от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Библиотеки для интеграции от сторонних разработчиков</a> <a href=../../../interfaces/third-party/gui/ title="Визуальные интерфейсы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы от сторонних разработчиков</a> <a href=../../../interfaces/third-party/client_libraries/ title="Клиентские библиотеки от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки от сторонних разработчиков</a> <a href=../../../interfaces/third-party/proxy/ title="Прокси-серверы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси-серверы от сторонних разработчиков</a> </nav> </div> <a href=../../../interfaces/cpp/ title="C++ клиентская библиотека" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ клиентская библиотека</a> <a href=../../../interfaces/http/ title=HTTP-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a> <a href=../../../interfaces/jdbc/ title=JDBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a> <a href=../../../interfaces/mysql/ title=MySQL-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL-интерфейс</a> <a href=../../../interfaces/odbc/ title=ODBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a> <a href=../../../interfaces/ title=Интерфейсы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Интерфейсы</a> <a href=../../../interfaces/cli/ title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a> <a href=../../../interfaces/tcp/ title="Родной интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Родной интерфейс (TCP)</a> <a href=../../../interfaces/formats/ title="Форматы входных и выходных данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title="Начало работы" class="nav-link text-light text-wrap dropdown-toggle px-0">Начало работы</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/playground/ title="ClickHouse Playground" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Playground</a> <a href=../../../getting_started/ title="Начало работы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Начало работы</a> <a href=../../../getting_started/install/ title=Установка class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка</a> <a href=../../../getting_started/tutorial/ title="Учебник По Клик-Хаусу" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Учебник По Клик-Хаусу</a> <a href=#sidebar-sidebar-9-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9-5 title="Тестовые массивы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Тестовые массивы данных</a> <div id=sidebar-sidebar-9-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting_started/example_datasets/metrica/ title="Анонимизированные данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Анонимизированные данные Яндекс.Метрики</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a> <a href=../../../getting_started/example_datasets/criteo/ title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a> <a href=../../../getting_started/example_datasets/ title="Тестовые массивы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Тестовые массивы данных</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="Разработка ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Разработка ClickHouse</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/developer_instruction/ title="Если вы используете Windows" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Если вы используете Windows</a> <a href=../../../development/contrib/ title="Используемые сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Используемые сторонние библиотеки</a> <a href=../../../development/style/ title="Как писать код на C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как писать код на C++</a> <a href=../../../development/build/ title="Как построить ClickHouse для развития" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse для развития</a> <a href=../../../development/build_cross_osx/ title="Как построить ClickHouse на Linux для Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Linux для Mac OS X</a> <a href=../../../development/build_cross_arm/ title="Как построить ClickHouse на Linux для архитектуры AArch64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Linux для архитектуры AArch64 (ARM64)</a> <a href=../../../development/build_osx/ title="Как построить ClickHouse на Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Mac OS X</a> <a href=../../../development/browse_code/ title="Навигация по коду ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Навигация по коду ClickHouse</a> <a href=../../../development/architecture/ title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a> <a href=../../../development/ title="Разработка ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разработка ClickHouse</a> <a href=../../../development/tests/ title="Тестирование ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Тестирование ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=Руководства class="nav-link text-light text-wrap dropdown-toggle px-0">Руководства</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/apply_catboost_model/ title="Применение модели CatBoost в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение модели CatBoost в ClickHouse</a> <a href=../../../guides/ title=Руководства class="nav-link text-light text-wrap d-inline-block w-100 px-0">Руководства</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title="Справка по SQL" class="nav-link text-light text-wrap dropdown-toggle px-0">Справка по SQL</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-1 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-12-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql_reference/statements/create/ title="CREATE DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE DATABASE</a> <a href=../../../sql_reference/statements/insert_into/ title=INSERT class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT</a> <a href=../../../sql_reference/statements/show/ title="SHOW Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW Queries</a> <a href=../../../sql_reference/statements/system/ title="Запросы SYSTEM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Запросы SYSTEM</a> <a href=../../../sql_reference/statements/misc/ title="Прочие виды запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие виды запросов</a> <a href=../../../sql_reference/statements/select/ title="Синтаксис запросов SELECT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис запросов SELECT</a> </nav> </div> <a href=../../../sql_reference/operators/ title=Операторы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a> <a href=../../../sql_reference/syntax/ title=Синтаксис class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис</a> <a href=../../../sql_reference/ title="Справка по SQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справка по SQL</a> <a href=#sidebar-sidebar-12-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-5 title="Агрегатные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Агрегатные функции</a> <div id=sidebar-sidebar-12-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/aggregate_functions/ title="Агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Агрегатные функции</a> <a href=../../../sql_reference/aggregate_functions/combinators/ title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a> <a href=../../../sql_reference/aggregate_functions/parametric_functions/ title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a> <a href=../../../sql_reference/aggregate_functions/reference/ title="Справочник функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справочник функций</a> </nav> </div> <a href=#sidebar-sidebar-12-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-6 title=Словари class="nav-link text-light text-wrap dropdown-toggle px-0">Словари</a> <div id=sidebar-sidebar-12-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-6-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-6-1 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-12-6-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="Внешние словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние словари</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Иерархические словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Иерархические словари</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a> </nav> </div> <a href=../../../sql_reference/dictionaries/internal_dicts/ title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a> <a href=../../../sql_reference/dictionaries/ title=Словари class="nav-link text-light text-wrap d-inline-block w-100 px-0">Словари</a> </nav> </div> <a href=#sidebar-sidebar-12-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-7 title="Табличные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Табличные функции</a> <div id=sidebar-sidebar-12-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../sql_reference/table_functions/generate/ title=generate class="nav-link text-light text-wrap d-inline-block w-100 px-0">generate</a> <a href=../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql_reference/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql_reference/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql_reference/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql_reference/table_functions/remote/ title="remote, remoteSecure" class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote, remoteSecure</a> <a href=../../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql_reference/table_functions/ title="Табличные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Табличные функции</a> </nav> </div> <a href=#sidebar-sidebar-12-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8 title="Типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Типы данных</a> <div id=sidebar-sidebar-12-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-8-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-1 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-12-8-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> <a href=../../../sql_reference/data_types/domains/overview/ title=Домены class="nav-link text-light text-wrap d-inline-block w-100 px-0">Домены</a> </nav> </div> <a href=../../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types\_of\_arguments…)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types\_of\_arguments…)</a> <a href=../../../sql_reference/data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../../sql_reference/data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql_reference/data_types/decimal/ title="Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)</a> <a href=../../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../sql_reference/data_types/fixedstring/ title=FixedString class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString</a> <a href=../../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../sql_reference/data_types/nullable/ title=Nullable(TypeName) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable(TypeName)</a> <a href=../../../sql_reference/data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a> <a href=../../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql_reference/data_types/boolean/ title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a> <a href=../../../sql_reference/data_types/ title="Типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Типы данных</a> <a href=#sidebar-sidebar-12-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-18 title="Вложенные структуры данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Вложенные структуры данных</a> <div id=sidebar-sidebar-12-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> <a href=../../../sql_reference/data_types/nested_data_structures/ title="Вложенные структуры данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Вложенные структуры данных</a> </nav> </div> <a href=#sidebar-sidebar-12-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-19 title="Служебные типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Служебные типы данных</a> <div id=sidebar-sidebar-12-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../../sql_reference/data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> <a href=../../../sql_reference/data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../../sql_reference/data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../sql_reference/data_types/special_data_types/ title="Служебные типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Служебные типы данных</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-12-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-9 title=Функции class="nav-link text-light text-wrap dropdown-toggle px-0">Функции</a> <div id=sidebar-sidebar-12-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/functions/arithmetic_functions/ title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a> <a href=../../../sql_reference/functions/bit_functions/ title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a> <a href=../../../sql_reference/functions/logical_functions/ title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a> <a href=../../../sql_reference/functions/math_functions/ title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a> <a href=../../../sql_reference/functions/other_functions/ title="Прочие функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие функции</a> <a href=../../../sql_reference/functions/conditional_functions/ title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a> <a href=../../../sql_reference/functions/ title=Функции class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции</a> <a href=../../../sql_reference/functions/higher_order_functions/ title="Функции высшего порядка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции высшего порядка</a> <a href=../../../sql_reference/functions/random_functions/ title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a> <a href=../../../sql_reference/functions/bitmap_functions/ title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a> <a href=../../../sql_reference/functions/ip_address_functions/ title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a> <a href=../../../sql_reference/functions/json_functions/ title="Функции для работы с JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с JSON</a> <a href=../../../sql_reference/functions/functions_for_nulls/ title="Функции для работы с Nullable-аргументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с Nullable-аргументами</a> <a href=../../../sql_reference/functions/url_functions/ title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a> <a href=../../../sql_reference/functions/uuid_functions/ title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a> <a href=../../../sql_reference/functions/ext_dict_functions/ title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a> <a href=../../../sql_reference/functions/geo/ title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a> <a href=../../../sql_reference/functions/date_time_functions/ title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a> <a href=../../../sql_reference/functions/ym_dict_functions/ title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a> <a href=../../../sql_reference/functions/string_functions/ title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a> <a href=../../../sql_reference/functions/in_functions/ title="Функции для реализации оператора IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN</a> <a href=../../../sql_reference/functions/introspection/ title="Функции интроспекции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции интроспекции</a> <a href=../../../sql_reference/functions/encoding_functions/ title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a> <a href=../../../sql_reference/functions/machine_learning_functions/ title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a> <a href=../../../sql_reference/functions/rounding_functions/ title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a> <a href=../../../sql_reference/functions/array_functions/ title="Функции по работе с массивами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции по работе с массивами</a> <a href=../../../sql_reference/functions/string_search_functions/ title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a> <a href=../../../sql_reference/functions/string_replace_functions/ title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a> <a href=../../../sql_reference/functions/type_conversion_functions/ title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a> <a href=../../../sql_reference/functions/splitting_merging_functions/ title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a> <a href=../../../sql_reference/functions/comparison_functions/ title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a> <a href=../../../sql_reference/functions/hash_functions/ title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a> <a href=../../../sql_reference/functions/array_join/ title="Функция arrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция arrayJoin</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13 title=Эксплуатация class="nav-link text-light text-wrap dropdown-toggle px-0">Эксплуатация</a> <div id=sidebar-sidebar-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-13-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-1 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-13-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../operations/optimizing_performance/sampling_query_profiler/ title="Выборки Профилировщик Запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Выборки Профилировщик Запросов</a> </nav> </div> <a href=../../../operations/performance_test/ title="Как Протестировать Ваше Оборудование С Помощью ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как Протестировать Ваше Оборудование С Помощью ClickHouse</a> <a href=../../../operations/quotas/ title=Квоты class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a> <a href=../../../operations/configuration_files/ title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a> <a href=../../../operations/monitoring/ title=Мониторинг class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a> <a href=../../../operations/update/ title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a> <a href=../../../operations/access_rights/ title="Права доступа" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Права доступа</a> <a href=../../../operations/backup/ title="Резервное копирование данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование данных</a> <a href=../../../operations/system_tables/ title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a> <a href=../../../operations/tips/ title="Советы по эксплуатации" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Советы по эксплуатации</a> <a href=../../../operations/requirements/ title=Требования class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a> <a href=../../../operations/troubleshooting/ title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a> <a href=../../../operations/ title=Эксплуатация class="nav-link text-light text-wrap d-inline-block w-100 px-0">Эксплуатация</a> <a href=#sidebar-sidebar-13-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-14 title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap dropdown-toggle px-0">Конфигурационные параметры сервера</a> <div id=sidebar-sidebar-13-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_configuration_parameters/ title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные параметры сервера</a> </nav> </div> <a href=#sidebar-sidebar-13-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-15 title=Настройки class="nav-link text-light text-wrap dropdown-toggle px-0">Настройки</a> <div id=sidebar-sidebar-13-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=Настройки class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a> <a href=../../../operations/settings/settings_users/ title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a> <a href=../../../operations/settings/constraints_on_settings/ title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a> <a href=../../../operations/settings/query_complexity/ title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a> <a href=../../../operations/settings/settings_profiles/ title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a> <a href=../../../operations/settings/permissions_for_queries/ title="Разрешения для запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения для запросов</a> </nav> </div> <a href=#sidebar-sidebar-13-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-16 title="Утилиты ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Утилиты ClickHouse</a> <div id=sidebar-sidebar-13-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-бенчмарк class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-бенчмарк</a> <a href=../../../operations/utilities/ title="Утилиты ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Утилиты ClickHouse</a> </nav> </div> </nav> </div> <a href=../../../single/clickhouse_ru.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF-версия title=PDF-версия height=24 class="d-block mr-1 float-left"><div>PDF-версия</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Помощь нужна!</p> <p class=lead>Следующее содержание этой страницы документации было переведено на машинный язык. Но в отличие от других сайтов, это делается не на лету. Этот переведенный текст живет в репозитории GitHub вместе с основной кодовой базой ClickHouse и ждет, когда другие носители языка сделают его более удобочитаемым для человека.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/whats_new/changelog/2019.md target=_blank rel="external nofollow noreferrer"> Помогите документации ClickHouse, отредактировав эту страницу </a> </p> </div> <h2 id=clickhouse-release-v19-17>Релиз ClickHouse в19.17<a class=headerlink href=#clickhouse-release-v19-17 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-v19-17-6-36-2019-12-27>Релиз ClickHouse в19.17.6.36, 2019-12-27<a class=headerlink href=#clickhouse-release-v19-17-6-36-2019-12-27 title="Permanent link">&para;</a></h3> <h4 id=bug-fix>Исправление ошибок<a class=headerlink href=#bug-fix title="Permanent link">&para;</a></h4> <ul> <li>Исправлено потенциальное переполнение буфера при распаковке. Злонамеренный пользователь может передавать сфабрикованные сжатые данные,которые могут вызвать чтение после буфера. Эту проблему обнаружил Эльдар Зайтов из команды информационной безопасности Яндекса. <a href=https://github.com/ClickHouse/ClickHouse/pull/8404 rel="external nofollow noreferrer">#8404</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена возможная ошибка сервера (<code>std::terminate</code>) когда сервер не может отправлять или записывать данные в формате JSON или XML со значениями строкового типа данных (которые требуют проверки UTF-8) или при сжатии результирующих данных с помощью алгоритма Brotli или в некоторых других редких случаях. <a href=https://github.com/ClickHouse/ClickHouse/pull/8384 rel="external nofollow noreferrer">#8384</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлены словари с исходным кодом из clickhouse <code>VIEW</code>, теперь чтение таких словарей не вызывает ошибки <code>There is no query</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8351 rel="external nofollow noreferrer">#8351</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправлена проверка, разрешен ли клиентский хост с помощью host_regexp, указанного в users.XML. <a href=https://github.com/ClickHouse/ClickHouse/pull/8241 rel="external nofollow noreferrer">#8241</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/8342 rel="external nofollow noreferrer">#8342</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li><code>RENAME TABLE</code> для распределенной таблицы теперь переименовывается папка, содержащая вставленные данные перед отправкой в сегменты. Это исправляет проблему с последовательными переименованиями <code>tableA-&gt;tableB</code>, <code>tableC-&gt;tableA</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8306 rel="external nofollow noreferrer">#8306</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li><code>range_hashed</code> внешние словари, созданные запросами DDL, теперь допускают диапазоны произвольных числовых типов. <a href=https://github.com/ClickHouse/ClickHouse/pull/8275 rel="external nofollow noreferrer">#8275</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено <code>INSERT INTO table SELECT ... FROM mysql(...)</code> табличная функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/8234 rel="external nofollow noreferrer">#8234</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в <code>INSERT INTO TABLE FUNCTION file()</code> при вставке в файл, который не существует. Теперь в этом случае файл будет создан, а затем вставка будет обработана. <a href=https://github.com/ClickHouse/ClickHouse/pull/8177 rel="external nofollow noreferrer">#8177</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Исправлена ошибка bitmapAnd при пересечении агрегированного растрового изображения и скалярного растрового изображения. <a href=https://github.com/ClickHouse/ClickHouse/pull/8082 rel="external nofollow noreferrer">#8082</a> (<a href=https://github.com/moon03432 rel="external nofollow noreferrer">Юе Хуанг</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн, когда <code>EXISTS</code> запрос был использован без <code>TABLE</code> или <code>DICTIONARY</code> квалификатор, совсем как <code>EXISTS t</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8213 rel="external nofollow noreferrer">#8213</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Фиксированный тип возврата для функций <code>rand</code> и <code>randConstant</code> в случае ничтожного аргумента. Теперь функции всегда возвращаются <code>UInt32</code> и никогда <code>Nullable(UInt32)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8204 rel="external nofollow noreferrer">#8204</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправлено <code>DROP DICTIONARY IF EXISTS db.dict</code>, теперь он не бросает исключение, если <code>db</code> его просто не существует. <a href=https://github.com/ClickHouse/ClickHouse/pull/8185 rel="external nofollow noreferrer">#8185</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Если таблица не была полностью удалена из-за сбоя сервера, сервер попытается восстановить и загрузить ее <a href=https://github.com/ClickHouse/ClickHouse/pull/8176 rel="external nofollow noreferrer">#8176</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлен тривиальный запрос count для распределенной таблицы, если существует более двух локальных таблиц shard. <a href=https://github.com/ClickHouse/ClickHouse/pull/8164 rel="external nofollow noreferrer">#8164</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer">小路</a>)</li> <li>Исправлена ошибка, приводившая к гонке данных в DB:: BlockStreamProfileInfo:: calculateRowsBeforeLimit() <a href=https://github.com/ClickHouse/ClickHouse/pull/8143 rel="external nofollow noreferrer">#8143</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр казаков</a>)</li> <li>Исправлено <code>ALTER table MOVE part</code> выполняется сразу же после слияния указанной детали, что может привести к перемещению детали, в которую данная деталь была объединена. Теперь он правильно перемещает указанную деталь. <a href=https://github.com/ClickHouse/ClickHouse/pull/8104 rel="external nofollow noreferrer">#8104</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Теперь выражения для словарей можно задавать в виде строк. Это полезно для вычисления атрибутов при извлечении данных из источников, отличных от ClickHouse, поскольку позволяет использовать синтаксис, отличающийся от ClickHouse, для этих выражений. <a href=https://github.com/ClickHouse/ClickHouse/pull/8098 rel="external nofollow noreferrer">#8098</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена очень редкая гонка в <code>clickhouse-copier</code> из-за переполнения в ZXid. <a href=https://github.com/ClickHouse/ClickHouse/pull/8088 rel="external nofollow noreferrer">#8088</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer">Дин Сян Фэй</a>)</li> <li>Исправлена ошибка, когда после неудачного запроса (из-за «Too many simultaneous queries» например) он не будет читать информацию о внешних таблицах, а также<br> следующий запрос будет интерпретировать эту информацию как начало следующего запроса, вызывающего ошибку типа <code>Unknown packet from client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8084 rel="external nofollow noreferrer">#8084</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Избежать разыменования null после «Unknown packet X from server» <a href=https://github.com/ClickHouse/ClickHouse/pull/8071 rel="external nofollow noreferrer">#8071</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Восстановите поддержку всех локалей ICU, добавьте возможность применять параметры сортировки для постоянных выражений и добавьте имя языка в систему.таблица сортировки. <a href=https://github.com/ClickHouse/ClickHouse/pull/8051 rel="external nofollow noreferrer">#8051</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Количество потоков для чтения из <code>StorageFile</code> и <code>StorageHDFS</code> теперь он ограничен, чтобы не превысить лимит памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/7981 rel="external nofollow noreferrer">#7981</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено <code>CHECK TABLE</code> запрос для <code>*MergeTree</code> таблицы без ключа. <a href=https://github.com/ClickHouse/ClickHouse/pull/7979 rel="external nofollow noreferrer">#7979</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Удалил номер мутации из имени детали на тот случай, если мутаций не было. Это удаление улучшило совместимость с более старыми версиями. <a href=https://github.com/ClickHouse/ClickHouse/pull/8250 rel="external nofollow noreferrer">#8250</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка, что мутации пропускаются для некоторых присоединенных частей из-за их data_version больше, чем версия мутации таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/7812 rel="external nofollow noreferrer">#7812</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Разрешить запуск сервера с избыточными копиями деталей после их перемещения на другое устройство. <a href=https://github.com/ClickHouse/ClickHouse/pull/7810 rel="external nofollow noreferrer">#7810</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Исправлена ошибка «Sizes of columns doesn’t match» это может появиться при использовании столбцов агрегатной функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/7790 rel="external nofollow noreferrer">#7790</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer">Борис Гранво</a>)</li> <li>Теперь исключение будет сделано в случае использования с привязками рядом с LIMIT BY. И теперь его можно использовать сверху предел. <a href=https://github.com/ClickHouse/ClickHouse/pull/7637 rel="external nofollow noreferrer">#7637</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Никита Михайлов</a>)</li> <li>Исправьте перезагрузку словаря, если она есть <code>invalidate_query</code>, который остановил обновления и некоторые исключения при предыдущих попытках обновления. <a href=https://github.com/ClickHouse/ClickHouse/pull/8029 rel="external nofollow noreferrer">#8029</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> </ul> <h3 id=clickhouse-release-v19-17-4-11-2019-11-22>Релиз ClickHouse в19.17.4.11, 2019-11-22<a class=headerlink href=#clickhouse-release-v19-17-4-11-2019-11-22 title="Permanent link">&para;</a></h3> <h4 id=backward-incompatible-change>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change title="Permanent link">&para;</a></h4> <ul> <li>Использование столбца вместо AST для хранения скалярных результатов подзапросов для повышения производительности. Установка <code>enable_scalar_subquery_optimization</code> был добавлен в 19.17, и он был включен по умолчанию. Это приводит к таким ошибкам, как <a href=https://github.com/ClickHouse/ClickHouse/issues/7851 rel="external nofollow noreferrer">этот</a> во время обновления до 19.17.2 или 19.17.3 с предыдущих версий. Этот параметр был отключен по умолчанию в 19.17.4, чтобы сделать возможным обновление с 19.16 и более старых версий без ошибок. <a href=https://github.com/ClickHouse/ClickHouse/pull/7392 rel="external nofollow noreferrer">#7392</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> </ul> <h4 id=new-feature>Новая функция<a class=headerlink href=#new-feature title="Permanent link">&para;</a></h4> <ul> <li>Добавьте возможность создавать словари с запросами DDL. <a href=https://github.com/ClickHouse/ClickHouse/pull/7360 rel="external nofollow noreferrer">#7360</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Сделай <code>bloom_filter</code> тип поддержки индекса <code>LowCardinality</code> и <code>Nullable</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/7363 rel="external nofollow noreferrer">#7363</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7561 rel="external nofollow noreferrer">#7561</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Функция add <code>isValidJSON</code> чтобы проверить, что переданная строка является допустимым json. <a href=https://github.com/ClickHouse/ClickHouse/issues/5910 rel="external nofollow noreferrer">#5910</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7293 rel="external nofollow noreferrer">#7293</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer">Вдимир</a>)</li> <li>Осуществлять <code>arrayCompact</code> функция <a href=https://github.com/ClickHouse/ClickHouse/pull/7328 rel="external nofollow noreferrer">#7328</a> (<a href=https://github.com/Joeywzr rel="external nofollow noreferrer">Меморандум</a>)</li> <li>Созданная функция <code>hex</code> для десятичных чисел. Это работает так <code>hex(reinterpretAsString())</code>, но не удаляет последние нулевые байты. <a href=https://github.com/ClickHouse/ClickHouse/pull/7355 rel="external nofollow noreferrer">#7355</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Михаил Коротов</a>)</li> <li>Добавь <code>arrayFill</code> и <code>arrayReverseFill</code> функции, которые заменяют элементы другими элементами спереди/сзади от них в массиве. <a href=https://github.com/ClickHouse/ClickHouse/pull/7380 rel="external nofollow noreferrer">#7380</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Добавь <code>CRC32IEEE()</code>/<code>CRC64()</code> поддержка <a href=https://github.com/ClickHouse/ClickHouse/pull/7480 rel="external nofollow noreferrer">#7480</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Осуществлять <code>char</code> функция, аналогичная одной в <a href=https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char rel="external nofollow noreferrer">в MySQL</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7486 rel="external nofollow noreferrer">#7486</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">сундили</a>)</li> <li>Добавь <code>bitmapTransform</code> функция. Он преобразует массив значений в растровом изображении в другой массив значений, в результате чего получается новое растровое изображение <a href=https://github.com/ClickHouse/ClickHouse/pull/7598 rel="external nofollow noreferrer">#7598</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Реализованный <code>javaHashUTF16LE()</code> функция <a href=https://github.com/ClickHouse/ClickHouse/pull/7651 rel="external nofollow noreferrer">#7651</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer">ачимбаб</a>)</li> <li>Добавь <code>_shard_num</code> виртуальный столбец для распределенного движка <a href=https://github.com/ClickHouse/ClickHouse/pull/7624 rel="external nofollow noreferrer">#7624</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> </ul> <h4 id=experimental-feature>Экспериментальная возможность<a class=headerlink href=#experimental-feature title="Permanent link">&para;</a></h4> <ul> <li>Поддержка процессоров (новый конвейер выполнения запросов) в <code>MergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7181 rel="external nofollow noreferrer">#7181</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> </ul> <h4 id=bug-fix-1>Исправление ошибок<a class=headerlink href=#bug-fix-1 title="Permanent link">&para;</a></h4> <ul> <li>Исправить неправильный парсинг float в <code>Values</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/7817 rel="external nofollow noreferrer">#7817</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7870 rel="external nofollow noreferrer">#7870</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправьте редкий тупик, который может произойти, когда trace_log включен. <a href=https://github.com/ClickHouse/ClickHouse/pull/7838 rel="external nofollow noreferrer">#7838</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Предотвратите дублирование сообщений при создании таблицы Кафки, в которой есть любой MVs, выбирающий из нее <a href=https://github.com/ClickHouse/ClickHouse/pull/7265 rel="external nofollow noreferrer">#7265</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Поддержка <code>Array(LowCardinality(Nullable(String)))</code> в <code>IN</code>. Разрешает <a href=https://github.com/ClickHouse/ClickHouse/issues/7364 rel="external nofollow noreferrer">#7364</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7366 rel="external nofollow noreferrer">#7366</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer">ачимбаб</a>)</li> <li>Добавить обработку данных <code>SQL_TINYINT</code> и <code>SQL_BIGINT</code>, и исправьте обработку <code>SQL_FLOAT</code> типы источников данных в ODBC мост. <a href=https://github.com/ClickHouse/ClickHouse/pull/7491 rel="external nofollow noreferrer">#7491</a> (<a href=https://github.com/traceon rel="external nofollow noreferrer">Денис Глазачев</a>)</li> <li>Исправить агрегации (<code>avg</code> и квантили) над пустыми десятичными столбцами <a href=https://github.com/ClickHouse/ClickHouse/pull/7431 rel="external nofollow noreferrer">#7431</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer">Андрей Коняев</a>)</li> <li>Чинить <code>INSERT</code> в распределенный с <code>MATERIALIZED</code> столбцы <a href=https://github.com/ClickHouse/ClickHouse/pull/7377 rel="external nofollow noreferrer">#7377</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Сделай <code>MOVE PARTITION</code> работайте, если некоторые части раздела уже находятся на целевом диске или томе <a href=https://github.com/ClickHouse/ClickHouse/pull/7434 rel="external nofollow noreferrer">#7434</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Исправлена ошибка, из-за которой жесткие ссылки не создавались во время мутаций в <code>ReplicatedMergeTree</code> в конфигурациях с несколькими дисками. <a href=https://github.com/ClickHouse/ClickHouse/pull/7558 rel="external nofollow noreferrer">#7558</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Исправлена ошибка с мутацией на MergeTree, когда вся часть остается неизменной, а лучшее место находится на другом диске <a href=https://github.com/ClickHouse/ClickHouse/pull/7602 rel="external nofollow noreferrer">#7602</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Исправлена ошибка с <code>keep_free_space_ratio</code> не считывается с конфигурации дисков <a href=https://github.com/ClickHouse/ClickHouse/pull/7645 rel="external nofollow noreferrer">#7645</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Исправлена ошибка с таблицей содержит только <code>Tuple</code> столбцы или столбцы со сложными путями. Исправления <a href=https://github.com/ClickHouse/ClickHouse/issues/7541 rel="external nofollow noreferrer">7541</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7545 rel="external nofollow noreferrer">#7545</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Не учитывайте память для буферного движка в ограничении max_memory_usage <a href=https://github.com/ClickHouse/ClickHouse/pull/7552 rel="external nofollow noreferrer">#7552</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Исправлена окончательная отметка использования в <code>MergeTree</code> таблицы, заказанные по <code>tuple()</code>. В редких случаях это может привести к тому, что <code>Can't adjust last granule</code> ошибка при выборе. <a href=https://github.com/ClickHouse/ClickHouse/pull/7639 rel="external nofollow noreferrer">#7639</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлена ошибка в мутациях, которые имеют предикат с действиями, требующими контекста (например, функции для json), что может привести к сбоям или странным исключениям. <a href=https://github.com/ClickHouse/ClickHouse/pull/7664 rel="external nofollow noreferrer">#7664</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено несоответствие экранирования имен баз данных и таблиц <code>data/</code> и <code>shadow/</code> справочники <a href=https://github.com/ClickHouse/ClickHouse/pull/7575 rel="external nofollow noreferrer">#7575</a> (<a href=https://github.com/Alex-Burmak rel="external nofollow noreferrer">Александр Бурмак</a>)</li> <li>Support duplicated keys in RIGHT|FULL JOINs, e.g. <code>ON t.x = u.x AND t.x = u.y</code>. Исправьте сбой в этом случае. <a href=https://github.com/ClickHouse/ClickHouse/pull/7586 rel="external nofollow noreferrer">#7586</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Чинить <code>Not found column &lt;expression&gt; in block</code> при соединении по выражению с правым или полным соединением. <a href=https://github.com/ClickHouse/ClickHouse/pull/7641 rel="external nofollow noreferrer">#7641</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Еще одна попытка исправить бесконечный цикл в <code>PrettySpace</code> формат <a href=https://github.com/ClickHouse/ClickHouse/pull/7591 rel="external nofollow noreferrer">#7591</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Исправлена ошибка в работе <code>concat</code> функция, когда все аргументы были <code>FixedString</code> такого же размера. <a href=https://github.com/ClickHouse/ClickHouse/pull/7635 rel="external nofollow noreferrer">#7635</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено исключение в случае использования 1 аргумента при определении хранилищ S3, URL и HDFS. <a href=https://github.com/ClickHouse/ClickHouse/pull/7618 rel="external nofollow noreferrer">#7618</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Исправлена область действия InterpreterSelectQuery для представлений с запросом <a href=https://github.com/ClickHouse/ClickHouse/pull/7601 rel="external nofollow noreferrer">#7601</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> </ul> <h4 id=improvement>Улучшение<a class=headerlink href=#improvement title="Permanent link">&para;</a></h4> <ul> <li><code>Nullable</code> столбцы признал и NULL-значения будут корректно обработаны в ODBC-мост <a href=https://github.com/ClickHouse/ClickHouse/pull/7402 rel="external nofollow noreferrer">#7402</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Напишите текущий пакет для распределенной отправки атомарно <a href=https://github.com/ClickHouse/ClickHouse/pull/7600 rel="external nofollow noreferrer">#7600</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Вызовите исключение, если мы не можем обнаружить таблицу для имени столбца в запросе. <a href=https://github.com/ClickHouse/ClickHouse/pull/7358 rel="external nofollow noreferrer">#7358</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Добавь <code>merge_max_block_size</code> установка <code>MergeTreeSettings</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7412 rel="external nofollow noreferrer">#7412</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Запросы с помощью <code>HAVING</code> и без него <code>GROUP BY</code> предположим, что группа по константе. Так, <code>SELECT 1 HAVING 1</code> теперь возвращает результат. <a href=https://github.com/ClickHouse/ClickHouse/pull/7496 rel="external nofollow noreferrer">#7496</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Поддержка синтаксического анализа <code>(X,)</code> как Кортеж похож на python. <a href=https://github.com/ClickHouse/ClickHouse/pull/7501 rel="external nofollow noreferrer">#7501</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/7562 rel="external nofollow noreferrer">#7562</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Сделай <code>range</code> функциональное поведение почти как у питона. <a href=https://github.com/ClickHouse/ClickHouse/pull/7518 rel="external nofollow noreferrer">#7518</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">сундили</a>)</li> <li>Добавь <code>constraints</code> столбцы в таблицу <code>system.settings</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7553 rel="external nofollow noreferrer">#7553</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Лучший нулевой формат для обработчика tcp, так что его можно использовать <code>select ignore(&lt;expression&gt;) from table format Null</code> для измерения производительности через clickhouse-клиент <a href=https://github.com/ClickHouse/ClickHouse/pull/7606 rel="external nofollow noreferrer">#7606</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Такие запросы, как <code>CREATE TABLE ... AS (SELECT (1, 2))</code> разбираются правильно <a href=https://github.com/ClickHouse/ClickHouse/pull/7542 rel="external nofollow noreferrer">#7542</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> </ul> <h4 id=performance-improvement>Улучшение производительности<a class=headerlink href=#performance-improvement title="Permanent link">&para;</a></h4> <ul> <li>Улучшена производительность агрегирования по коротким строковым ключам. <a href=https://github.com/ClickHouse/ClickHouse/pull/6243 rel="external nofollow noreferrer">#6243</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>, <a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Выполните еще один проход синтаксического анализа / анализа выражений, чтобы получить потенциальную оптимизацию после того, как постоянные предикаты будут свернуты. <a href=https://github.com/ClickHouse/ClickHouse/pull/7497 rel="external nofollow noreferrer">#7497</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Использовать для хранения мета-информации, чтобы оценить тривиально <code>SELECT count() FROM table;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7510 rel="external nofollow noreferrer">#7510</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>, <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Векторизация обработки <code>arrayReduce</code> аналогично агрегатору <code>addBatch</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7608 rel="external nofollow noreferrer">#7608</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Незначительные улучшения в производительности <code>Kafka</code> потребление <a href=https://github.com/ClickHouse/ClickHouse/pull/7475 rel="external nofollow noreferrer">#7475</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement title="Permanent link">&para;</a></h4> <ul> <li>Добавьте поддержку кросс-компиляции в архитектуру процессора AARCH64. Сценарий рефакторинга упаковщика. <a href=https://github.com/ClickHouse/ClickHouse/pull/7370 rel="external nofollow noreferrer">#7370</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7539 rel="external nofollow noreferrer">#7539</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Распакуйте цепочки инструментов darwin-x86_64 и linux-aarch64 в смонтированный том Docker при сборке пакетов <a href=https://github.com/ClickHouse/ClickHouse/pull/7534 rel="external nofollow noreferrer">#7534</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Обновление образа Docker для двоичного упаковщика <a href=https://github.com/ClickHouse/ClickHouse/pull/7474 rel="external nofollow noreferrer">#7474</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлены ошибки компиляции на MacOS Catalina <a href=https://github.com/ClickHouse/ClickHouse/pull/7585 rel="external nofollow noreferrer">#7585</a> (<a href=https://github.com/ernestp rel="external nofollow noreferrer">Эрнест Полетаев</a>)</li> <li>Некоторые рефакторинги в логике анализа запросов: разделение сложного класса на несколько простых. <a href=https://github.com/ClickHouse/ClickHouse/pull/7454 rel="external nofollow noreferrer">#7454</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена сборка без подмодулей <a href=https://github.com/ClickHouse/ClickHouse/pull/7295 rel="external nofollow noreferrer">#7295</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Лучше <code>add_globs</code> в файлах CMake <a href=https://github.com/ClickHouse/ClickHouse/pull/7418 rel="external nofollow noreferrer">#7418</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Удалить жестко закодированные пути в <code>unwind</code> цель <a href=https://github.com/ClickHouse/ClickHouse/pull/7460 rel="external nofollow noreferrer">#7460</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer">Константин Подшумок</a>)</li> <li>Разрешить использовать формат mysql без ssl <a href=https://github.com/ClickHouse/ClickHouse/pull/7524 rel="external nofollow noreferrer">#7524</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=other>Другой<a class=headerlink href=#other title="Permanent link">&para;</a></h4> <ul> <li>Добавлена грамматика ANTLR4 для диалекта ClickHouse SQL <a href=https://github.com/ClickHouse/ClickHouse/issues/7595 rel="external nofollow noreferrer">#7595</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7596 rel="external nofollow noreferrer">#7596</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h2 id=clickhouse-release-v19-16>Релиз ClickHouse в19.16<a class=headerlink href=#clickhouse-release-v19-16 title="Permanent link">&para;</a></h2> <h4 id=clickhouse-release-v19-16-14-65-2020-03-25>Релиз Clickhouse в19.16.14.65, 2020-03-25<a class=headerlink href=#clickhouse-release-v19-16-14-65-2020-03-25 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка в пакетных вычислениях тернарных логических операций по нескольким аргументам (более 10). <a href=https://github.com/ClickHouse/ClickHouse/pull/8718 rel="external nofollow noreferrer">#8718</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр казаков</a>) Это исправление было возвращено в версию 19.16 по специальному запросу Altinity.</li> </ul> <h4 id=clickhouse-release-v19-16-14-65-2020-03-05>Релиз Clickhouse в19.16.14.65, 2020-03-05<a class=headerlink href=#clickhouse-release-v19-16-14-65-2020-03-05 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена несовместимость распределенных подзапросов с более старыми версиями CH. Исправления <a href=https://github.com/ClickHouse/ClickHouse/issues/7851 rel="external nofollow noreferrer">#7851</a><br> <a href=https://github.com/tavplubix rel="external nofollow noreferrer">(tabplubix)</a></li> <li>При выполнении <code>CREATE</code> запрос, сложите постоянные выражения в аргументах механизма хранения. Замените пустое имя базы данных текущей базой данных. Исправления <a href=https://github.com/ClickHouse/ClickHouse/issues/6508 rel="external nofollow noreferrer">#6508</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3492 rel="external nofollow noreferrer">#3492</a>. Также исправлена проверка наличия локального адреса в системе <code>ClickHouseDictionarySource</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9262 rel="external nofollow noreferrer">#9262</a> <a href=https://github.com/tavplubix rel="external nofollow noreferrer">(tabplubix)</a></li> <li>Теперь фон сливается воедино <code>*MergeTree</code> семейство движков таблиц более точно сохраняет порядок объема политики хранения.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/8549 rel="external nofollow noreferrer">#8549</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Предотвращение потери данных в <code>Kafka</code> в редких случаях, когда исключение происходит после чтения суффикса, но до фиксации. Исправления <a href=https://github.com/ClickHouse/ClickHouse/issues/9378 rel="external nofollow noreferrer">#9378</a>. Связанный: <a href=https://github.com/ClickHouse/ClickHouse/issues/7175 rel="external nofollow noreferrer">#7175</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9507 rel="external nofollow noreferrer">#9507</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer">(Филимонов)</a></li> <li>Исправлена ошибка, приводящая к завершению работы сервера при попытке использовать / drop <code>Kafka</code> таблица создана с неверными параметрами. Исправления <a href=https://github.com/ClickHouse/ClickHouse/issues/9494 rel="external nofollow noreferrer">#9494</a>. Включает <a href=https://github.com/ClickHouse/ClickHouse/issues/9507 rel="external nofollow noreferrer">#9507</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9513 rel="external nofollow noreferrer">#9513</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer">(Филимонов)</a></li> <li>Разрешить использование <code>MaterializedView</code> с подзапросами выше <code>Kafka</code> таблицы.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/8197 rel="external nofollow noreferrer">#8197</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> </ul> <h4 id=new-feature-1>Новая функция<a class=headerlink href=#new-feature-1 title="Permanent link">&para;</a></h4> <ul> <li>Добавь <code>deduplicate_blocks_in_dependent_materialized_views</code> возможность управления поведением идемпотентных вставок в таблицы с материализованными представлениями. Эта новая функция была добавлена в релиз исправления ошибок по специальному запросу от Altinity.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9070 rel="external nofollow noreferrer">#9070</a> <a href=https://github.com/urykhy rel="external nofollow noreferrer">(урыхи)</a></li> </ul> <h3 id=clickhouse-release-v19-16-2-2-2019-10-30>Релиз ClickHouse в19.16.2.2, 2019-10-30<a class=headerlink href=#clickhouse-release-v19-16-2-2-2019-10-30 title="Permanent link">&para;</a></h3> <h4 id=backward-incompatible-change-1>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change-1 title="Permanent link">&para;</a></h4> <ul> <li>Добавьте недостающую проверку arity для count/countif.<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/7095 rel="external nofollow noreferrer">#7095</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7298 rel="external nofollow noreferrer">#7298</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer">Вдимир</a>)</li> <li>Удаление устаревших <code>asterisk_left_columns_only</code> настройка (по умолчанию она была отключена).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7335 rel="external nofollow noreferrer">#7335</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем<br> Зуйков</a>)</li> <li>Строки формата для формата данных шаблона теперь задаются в файлах.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7118 rel="external nofollow noreferrer">#7118</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> </ul> <h4 id=new-feature-2>Новая функция<a class=headerlink href=#new-feature-2 title="Permanent link">&para;</a></h4> <ul> <li>Введите uniqCombined64 () для вычисления мощности, большей, чем UINT_MAX.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7213 rel="external nofollow noreferrer">#7213</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7222 rel="external nofollow noreferrer">#7222</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат<br> Хужин</a>)</li> <li>Поддержка индексов Bloom filter для столбцов массива.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/6984 rel="external nofollow noreferrer">#6984</a><br> (<a href=https://github.com/achimbab rel="external nofollow noreferrer">ачимбаб</a>)</li> <li>Добавление функции <code>getMacro(name)</code> это возвращает строку со значением соответствующего <code>&lt;macros&gt;</code><br> из конфигурации сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/7240 rel="external nofollow noreferrer">#7240</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Установите два параметра конфигурации для словаря, основанного на источнике HTTP: <code>credentials</code> и<br> <code>http-headers</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7092 rel="external nofollow noreferrer">#7092</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом<br> Тассери</a>)</li> <li>Добавьте новый ProfileEvent <code>Merge</code> это подсчитывает количество запущенных фоновых слияний.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7093 rel="external nofollow noreferrer">#7093</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Михаил<br> Коротов</a>)</li> <li>Добавьте функцию fullHostName, которая возвращает полное доменное имя.<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/7263 rel="external nofollow noreferrer">#7263</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7291 rel="external nofollow noreferrer">#7291</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">сундили</a>)</li> <li>Функция add <code>arraySplit</code> и <code>arrayReverseSplit</code> которые разделяют массив на «cut off»<br> условия. Они полезны при обработке временных последовательностей.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7294 rel="external nofollow noreferrer">#7294</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Добавьте новые функции, возвращающие массив всех сопоставленных индексов в семействе функций multiMatch.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7299 rel="external nofollow noreferrer">#7299</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила<br> Кутенин</a>)</li> <li>Добавление нового компонента Database engine <code>Lazy</code> то есть оптимизирован для хранения большого количества мелких логов<br> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/7171 rel="external nofollow noreferrer">#7171</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита<br> Васильев</a>)</li> <li>Добавьте агрегатные функции groupBitmapAnd, - Or, - Xor для растровых столбцов. <a href=https://github.com/ClickHouse/ClickHouse/pull/7109 rel="external nofollow noreferrer">#7109</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Чжичан<br> Ю</a>)</li> <li>Добавьте комбинаторы агрегатных функций-OrNull и-OrDefault, которые возвращают значение null<br> или значения по умолчанию, когда агрегировать нечего.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7331 rel="external nofollow noreferrer">#7331</a><br> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Представьте пользовательский разделенный формат данных, который поддерживает пользовательское экранирование и<br> правила разграничения. <a href=https://github.com/ClickHouse/ClickHouse/pull/7118 rel="external nofollow noreferrer">#7118</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Поддержка Redis в качестве источника внешнего словаря. <a href=https://github.com/ClickHouse/ClickHouse/pull/4361 rel="external nofollow noreferrer">#4361</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6962 rel="external nofollow noreferrer">#6962</a> (<a href=https://github.com/comunodi rel="external nofollow noreferrer">comunodi</a>, <a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон<br> Попов</a>)</li> </ul> <h4 id=bug-fix-2>Исправление ошибок<a class=headerlink href=#bug-fix-2 title="Permanent link">&para;</a></h4> <ul> <li>Исправьте неправильный результат запроса, если он есть <code>WHERE IN (SELECT ...)</code> раздел и <code>optimize_read_in_order</code> является<br> использованный. <a href=https://github.com/ClickHouse/ClickHouse/pull/7371 rel="external nofollow noreferrer">#7371</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон<br> Попов</a>)</li> <li>Отключен плагин аутентификации MariaDB, который зависит от файлов вне проекта.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7140 rel="external nofollow noreferrer">#7140</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Владимирович<br> Баранов</a>)</li> <li>Исправить исключение <code>Cannot convert column ... because it is constant but values of constants are different in source and result</code> что редко может произойти, когда функции <code>now()</code>, <code>today()</code>,<br> <code>yesterday()</code>, <code>randConstant()</code> не использовать.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7156 rel="external nofollow noreferrer">#7156</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай<br> Кочетов</a>)</li> <li>Исправлена проблема с использованием HTTP, оставьте в живых тайм-аут вместо TCP оставить в живых тайм-аут.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7351 rel="external nofollow noreferrer">#7351</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий<br> Немков</a>)</li> <li>Исправлена ошибка сегментации в groupBitmapOr (проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/7109 rel="external nofollow noreferrer">#7109</a>).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7289 rel="external nofollow noreferrer">#7289</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Чжичан<br> Ю</a>)</li> <li>Для материализованных представлений фиксация для Кафки вызывается после того, как все данные были записаны.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7175 rel="external nofollow noreferrer">#7175</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлена ошибка <code>duration_ms</code> значение в <code>system.part_log</code> стол. Это было в десять раз хуже.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7172 rel="external nofollow noreferrer">#7172</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир<br> Чеботарев</a>)</li> <li>Быстрое исправление для устранения сбоя в таблице LIVE VIEW и повторного включения всех тестов LIVE VIEW.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7201 rel="external nofollow noreferrer">#7201</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer">взаказников</a>)</li> <li>Правильно сериализовать значение NULL значений в мин/макс показатели MergeTree части.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7234 rel="external nofollow noreferrer">#7234</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр<br> Кузьменков</a>)</li> <li>Не ставьте виртуальные столбцы .метаданные sql при создании таблицы в виде <code>CREATE TABLE AS</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7183 rel="external nofollow noreferrer">#7183</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлена ошибка сегментации в <code>ATTACH PART</code> запрос.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7185 rel="external nofollow noreferrer">#7185</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте неправильный результат для некоторых запросов, задаваемых оптимизацией empty в подзапросах и empty<br> INNER/RIGHT JOIN. <a href=https://github.com/ClickHouse/ClickHouse/pull/7284 rel="external nofollow noreferrer">#7284</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай<br> Кочетов</a>)</li> <li>Исправление ошибок в системах живой вид getHeader() метод.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7271 rel="external nofollow noreferrer">#7271</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer">взаказников</a>)</li> </ul> <h4 id=improvement-1>Улучшение<a class=headerlink href=#improvement-1 title="Permanent link">&para;</a></h4> <ul> <li>Добавьте сообщение в случае ожидания queue_wait_max_ms.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7390 rel="external nofollow noreferrer">#7390</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат<br> Хужин</a>)</li> <li>Выполнена установка <code>s3_min_upload_part_size</code> уровень таблицы.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7059 rel="external nofollow noreferrer">#7059</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир<br> Чеботарев</a>)</li> <li>Проверьте TTL в StorageFactory. <a href=https://github.com/ClickHouse/ClickHouse/pull/7304 rel="external nofollow noreferrer">#7304</a><br> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">сундили</a>)</li> <li>Сквош левых блоков в частичном объединении слиянием (оптимизация).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7122 rel="external nofollow noreferrer">#7122</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем<br> Зуйков</a>)</li> <li>Не допускайте недетерминированных функций в мутациях реплицируемых движков таблиц, поскольку это<br> может привести к несогласованности между репликами.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7247 rel="external nofollow noreferrer">#7247</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр<br> Казаков</a>)</li> <li>Отключите отслеживание памяти при преобразовании трассировки стека исключений в строку. Это может предотвратить потерю<br> сообщений об ошибках типа <code>Memory limit exceeded</code> на сервере, который вызвал <code>Attempt to read after eof</code> исключение для клиента. <a href=https://github.com/ClickHouse/ClickHouse/pull/7264 rel="external nofollow noreferrer">#7264</a><br> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Различные улучшения формата. Разрешает<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/6033 rel="external nofollow noreferrer">#6033</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/2633 rel="external nofollow noreferrer">#2633</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/6611 rel="external nofollow noreferrer">#6611</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/6742 rel="external nofollow noreferrer">#6742</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7215 rel="external nofollow noreferrer">#7215</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>ClickHouse игнорирует значения в правой части оператора IN, которые не могут быть преобразованы в левую<br> side type. Make it work properly for compound types – Array and Tuple.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7283 rel="external nofollow noreferrer">#7283</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр<br> Кузьменков</a>)</li> <li>Поддержка отсутствует Неравенство для следующих присоединиться. Можно объединить менее-или-равный вариант и строгий<br> больше и меньше вариантов для столбцов, следующих на синтаксис.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7282 rel="external nofollow noreferrer">#7282</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем<br> Зуйков</a>)</li> <li>Оптимизируйте частичное объединение слиянием. <a href=https://github.com/ClickHouse/ClickHouse/pull/7070 rel="external nofollow noreferrer">#7070</a><br> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Не используйте больше, чем 98К памяти в функции uniqCombined.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7236 rel="external nofollow noreferrer">#7236</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7270 rel="external nofollow noreferrer">#7270</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат<br> Хужин</a>)</li> <li>Промыть части правой соединительной таблицы на диске в PartialMergeJoin (если их недостаточно<br> память). Загружайте данные обратно, когда это необходимо. <a href=https://github.com/ClickHouse/ClickHouse/pull/7186 rel="external nofollow noreferrer">#7186</a><br> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=performance-improvement-1>Улучшение производительности<a class=headerlink href=#performance-improvement-1 title="Permanent link">&para;</a></h4> <ul> <li>Ускорьте joinGet с аргументами const, избегая дублирования данных.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7359 rel="external nofollow noreferrer">#7359</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос<br> Птица</a>)</li> <li>Возвращайтесь раньше, если подзапрос пуст.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7007 rel="external nofollow noreferrer">#7007</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer">小路</a>)</li> <li>Оптимизируйте синтаксический анализ SQL-выражения в значениях.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/6781 rel="external nofollow noreferrer">#6781</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-1>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-1 title="Permanent link">&para;</a></h4> <ul> <li>Отключите некоторые вклады для кросс-компиляции в Mac OS.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7101 rel="external nofollow noreferrer">#7101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Добавьте недостающую ссылку с PocoXML для clickhouse_common_io.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7200 rel="external nofollow noreferrer">#7200</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат<br> Хужин</a>)</li> <li>Примите несколько аргументов тестового фильтра в clickhouse-test.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7226 rel="external nofollow noreferrer">#7226</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр<br> Кузьменков</a>)</li> <li>Включите musl и jemalloc для ARM. <a href=https://github.com/ClickHouse/ClickHouse/pull/7300 rel="external nofollow noreferrer">#7300</a><br> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Добавлен <code>--client-option</code> параметр to <code>clickhouse-test</code> чтобы передать клиенту дополнительные параметры.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7277 rel="external nofollow noreferrer">#7277</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай<br> Кочетов</a>)</li> <li>Сохраните существующие конфигурации при обновлении пакета rpm.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7103 rel="external nofollow noreferrer">#7103</a><br> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Исправление ошибок, обнаруженных ПВС. <a href=https://github.com/ClickHouse/ClickHouse/pull/7153 rel="external nofollow noreferrer">#7153</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем<br> Зуйков</a>)</li> <li>Исправьте сборку для Дарвина. <a href=https://github.com/ClickHouse/ClickHouse/pull/7149 rel="external nofollow noreferrer">#7149</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>совместимость с glibc 2.29. <a href=https://github.com/ClickHouse/ClickHouse/pull/7142 rel="external nofollow noreferrer">#7142</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос<br> Птица</a>)</li> <li>Убедитесь, что dh_clean не касается потенциальных исходных файлов.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7205 rel="external nofollow noreferrer">#7205</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос<br> Птица</a>)</li> <li>Попытка избежать конфликта при обновлении с altinity rpm - он имеет конфигурационный файл, упакованный отдельно<br> в clickhouse-server-common. <a href=https://github.com/ClickHouse/ClickHouse/pull/7073 rel="external nofollow noreferrer">#7073</a><br> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Оптимизируйте некоторые заголовочные файлы для более быстрого восстановления.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7212 rel="external nofollow noreferrer">#7212</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7231 rel="external nofollow noreferrer">#7231</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр<br> Кузьменков</a>)</li> <li>Добавьте тесты производительности для Date и DateTime. <a href=https://github.com/ClickHouse/ClickHouse/pull/7332 rel="external nofollow noreferrer">#7332</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий<br> Немков</a>)</li> <li>Исправьте некоторые тесты, которые содержали недетерминированные мутации.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7132 rel="external nofollow noreferrer">#7132</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр<br> Казаков</a>)</li> <li>Добавьте сборку с MemorySanitizer в CI. <a href=https://github.com/ClickHouse/ClickHouse/pull/7066 rel="external nofollow noreferrer">#7066</a><br> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>)</li> <li>Избегайте использования неинициализированных значений в MetricsTransmitter.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7158 rel="external nofollow noreferrer">#7158</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат<br> Хужин</a>)</li> <li>Исправьте некоторые проблемы в полях, найденных MemorySanitizer.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7135 rel="external nofollow noreferrer">#7135</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7179 rel="external nofollow noreferrer">#7179</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр<br> Кузьменков</a>), <a href=https://github.com/ClickHouse/ClickHouse/pull/7376 rel="external nofollow noreferrer">#7376</a><br> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Исправьте неопределенное поведение в murmurhash32. <a href=https://github.com/ClickHouse/ClickHouse/pull/7388 rel="external nofollow noreferrer">#7388</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос<br> Птица</a>)</li> <li>Исправьте неопределенное поведение в StoragesInfoStream. <a href=https://github.com/ClickHouse/ClickHouse/pull/7384 rel="external nofollow noreferrer">#7384</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлено сворачивание постоянных выражений для внешних движков баз данных (MySQL, ODBC, JDBC). В предыдущих случаях<br> версии он не работал для нескольких постоянных выражений и вообще не работал для даты,<br> Дата-время и UUID. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/7245 rel="external nofollow noreferrer">#7245</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7252 rel="external nofollow noreferrer">#7252</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправление ошибки гонки данных ThreadSanitizer в режиме реального времени при обращении к переменной no_users_thread.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7353 rel="external nofollow noreferrer">#7353</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer">взаказников</a>)</li> <li>Избавьтесь от символов malloc в libcommon<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7134 rel="external nofollow noreferrer">#7134</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7065 rel="external nofollow noreferrer">#7065</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос<br> Птица</a>)</li> <li>Добавьте глобальный флаг ENABLE_LIBRARIES для отключения всех библиотек.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7063 rel="external nofollow noreferrer">#7063</a><br> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=code-cleanup>Очистка кода<a class=headerlink href=#code-cleanup title="Permanent link">&para;</a></h4> <ul> <li>Обобщите репозиторий конфигурации для подготовки к DDL для словарей. <a href=https://github.com/ClickHouse/ClickHouse/pull/7155 rel="external nofollow noreferrer">#7155</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Парсер для словарей DDL без всякой семантики.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7209 rel="external nofollow noreferrer">#7209</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Разделите ParserCreateQuery на различные более мелкие Парсеры.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7253 rel="external nofollow noreferrer">#7253</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Небольшой рефакторинг и переименование рядом с внешними словарями.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7111 rel="external nofollow noreferrer">#7111</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Рефакторинг некоторого кода для подготовки к управлению доступом на основе ролей. <a href=https://github.com/ClickHouse/ClickHouse/pull/7235 rel="external nofollow noreferrer">#7235</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий<br> Баранов</a>)</li> <li>Некоторые улучшения в коде DatabaseOrdinary.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7086 rel="external nofollow noreferrer">#7086</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита<br> Васильев</a>)</li> <li>Не используйте итераторы в методах find () и emplace () хэш-таблиц.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7026 rel="external nofollow noreferrer">#7026</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр<br> Кузьменков</a>)</li> <li>Исправьте getMultipleValuesFromConfig в случае, если корень параметра не пуст. <a href=https://github.com/ClickHouse/ClickHouse/pull/7374 rel="external nofollow noreferrer">#7374</a><br> (<a href=https://github.com/millb rel="external nofollow noreferrer">Михаил Коротов</a>)</li> <li>Удалите часть copy-paste (TemporaryFile и TemporaryFileStream)<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7166 rel="external nofollow noreferrer">#7166</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем<br> Зуйков</a>)</li> <li>Немного улучшена читаемость кода (<code>MergeTreeData::getActiveContainingPart</code>).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7361 rel="external nofollow noreferrer">#7361</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир<br> Чеботарев</a>)</li> <li>Дождитесь всех запланированных заданий, которые используют локальные объекты, если <code>ThreadPool::schedule(...)</code> бросает<br> исключение. Переименовать <code>ThreadPool::schedule(...)</code> к <code>ThreadPool::scheduleOrThrowOnError(...)</code> и<br> исправьте комментарии, чтобы сделать очевидным, что он может бросить.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7350 rel="external nofollow noreferrer">#7350</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> </ul> <h2 id=clickhouse-release-19-15>ClickHouse релиз 19.15<a class=headerlink href=#clickhouse-release-19-15 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-15-4-10-2019-10-31>ClickHouse релиз 19.15.4.10, 2019-10-31<a class=headerlink href=#clickhouse-release-19-15-4-10-2019-10-31 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-3>Исправление ошибок<a class=headerlink href=#bug-fix-3 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена обработка SQL_TINYINT и SQL_BIGINT, а также исправлена обработка типов источников данных SQL_FLOAT в Мосте ODBC.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7491 rel="external nofollow noreferrer">#7491</a> (<a href=https://github.com/traceon rel="external nofollow noreferrer">Денис Глазачев</a>)</li> <li>Разрешается иметь некоторые части на целевом диске или Томе в разделе перемещения.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7434 rel="external nofollow noreferrer">#7434</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Фиксированное значение NULL-значений в столбцы, допускающие значения null через ODBC-мост.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7402 rel="external nofollow noreferrer">#7402</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Исправлена вставка в распределенный нелокальный узел с материализованными столбцами.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7377 rel="external nofollow noreferrer">#7377</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Исправлена функция getMultipleValuesFromConfig.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7374 rel="external nofollow noreferrer">#7374</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Михаил Коротов</a>)</li> <li>Исправлена проблема с использованием HTTP, оставьте в живых тайм-аут вместо TCP оставить в живых тайм-аут.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7351 rel="external nofollow noreferrer">#7351</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Дождитесь завершения всех заданий по исключению (исправлены редкие сегменты).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7350 rel="external nofollow noreferrer">#7350</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Не нажимайте на MVs при вставке в таблицу Кафки.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7265 rel="external nofollow noreferrer">#7265</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Отключите отслеживание памяти для стека исключений.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7264 rel="external nofollow noreferrer">#7264</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправлен неверный код при преобразовании запроса для внешней базы данных.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7252 rel="external nofollow noreferrer">#7252</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Избегайте использования неинициализированных значений в MetricsTransmitter.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7158 rel="external nofollow noreferrer">#7158</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Добавлен пример конфигурации с макросами для тестов (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-15-3-6-2019-10-09>ClickHouse релиз 19.15.3.6, 2019-10-09<a class=headerlink href=#clickhouse-release-19-15-3-6-2019-10-09 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-4>Исправление ошибок<a class=headerlink href=#bug-fix-4 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка bad_variant в хэшированном словаре.<br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка с ошибкой сегментации в запросе ATTACH PART.<br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Расчет фиксированного времени в <code>MergeTreeData</code>.<br> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Посвятите себя Кафке явно после того, как написание будет завершено.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7175 rel="external nofollow noreferrer">#7175</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Правильно сериализовать значение NULL значений в мин/макс показатели MergeTree части.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7234 rel="external nofollow noreferrer">#7234</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>)</li> </ul> <h3 id=clickhouse-release-19-15-2-2-2019-10-01>ClickHouse релиз 19.15.2.2, 2019-10-01<a class=headerlink href=#clickhouse-release-19-15-2-2-2019-10-01 title="Permanent link">&para;</a></h3> <h4 id=new-feature-3>Новая функция<a class=headerlink href=#new-feature-3 title="Permanent link">&para;</a></h4> <ul> <li>Многоуровневое хранение: поддержка использования нескольких томов хранения для таблиц с движком MergeTree. Можно хранить свежие данные на SSD и автоматически перемещать старые данные на жесткий диск. (<a href=https://clickhouse.github.io/clickhouse-presentations/meetup30/new_features/#12 rel="external nofollow noreferrer">пример</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4918 rel="external nofollow noreferrer">#4918</a> (<a href=https://github.com/ObjatieGroba rel="external nofollow noreferrer">Игр</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6489 rel="external nofollow noreferrer">#6489</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавить функцию таблицы <code>input</code> для считывания входящих данных в <code>INSERT SELECT</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/5450 rel="external nofollow noreferrer">#5450</a> (<a href=https://github.com/palasonic1 rel="external nofollow noreferrer">паласоник1</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6832 rel="external nofollow noreferrer">#6832</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Добавить а <code>sparse_hashed</code> компоновка словаря, которая функционально эквивалентна <code>hashed</code> макет, но более эффективен для работы с памятью. Он использует примерно в два раза меньше памяти за счет более медленного извлечения значений. <a href=https://github.com/ClickHouse/ClickHouse/pull/6894 rel="external nofollow noreferrer">#6894</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Реализована возможность определения списка пользователей для доступа к словарям. Используется только текущая подключенная база данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/6907 rel="external nofollow noreferrer">#6907</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Добавь <code>LIMIT</code> опцион на <code>SHOW</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/6944 rel="external nofollow noreferrer">#6944</a> (<a href=https://github.com/malkfilipp rel="external nofollow noreferrer">Филипп Мальковский</a>)</li> <li>Добавь <code>bitmapSubsetLimit(bitmap, range_start, limit)</code> функция, возвращающая подмножество наименьшего числа <code>limit</code> значения в наборе, который не меньше, чем <code>range_start</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6957 rel="external nofollow noreferrer">#6957</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Добавь <code>bitmapMin</code> и <code>bitmapMax</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/6970 rel="external nofollow noreferrer">#6970</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Функция add <code>repeat</code> относится к <a href=https://github.com/ClickHouse/ClickHouse/issues/6648 rel="external nofollow noreferrer">выпуск-6648</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6999 rel="external nofollow noreferrer">#6999</a> (<a href=https://github.com/ucasFL rel="external nofollow noreferrer">Флинн</a>)</li> </ul> <h4 id=experimental-feature-1>Экспериментальная возможность<a class=headerlink href=#experimental-feature-1 title="Permanent link">&para;</a></h4> <ul> <li>Реализуйте (в памяти) вариант соединения слиянием, который не изменяет текущий конвейер. Результат частично сортируется по ключу слияния. Набор <code>partial_merge_join = 1</code> чтобы использовать эту функцию. Соединение слиянием все еще находится в разработке. <a href=https://github.com/ClickHouse/ClickHouse/pull/6940 rel="external nofollow noreferrer">#6940</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Добавь <code>S3</code> функция двигателя и таблицы. Он все еще находится в разработке (пока нет поддержки аутентификации). <a href=https://github.com/ClickHouse/ClickHouse/pull/5596 rel="external nofollow noreferrer">#5596</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> </ul> <h4 id=improvement-2>Улучшение<a class=headerlink href=#improvement-2 title="Permanent link">&para;</a></h4> <ul> <li>Каждое сообщение, прочитанное от Кафки, вставляется атомарно. Это решает почти все известные проблемы с двигателем Kafka. <a href=https://github.com/ClickHouse/ClickHouse/pull/6950 rel="external nofollow noreferrer">#6950</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Улучшения для отработки отказа распределенных запросов. Сократите время восстановления, также оно теперь конфигурируемо и может быть увидено в <code>system.clusters</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6399 rel="external nofollow noreferrer">#6399</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Поддержка числовых значений для перечислений непосредственно в <code>IN</code> раздел. #6766 <a href=https://github.com/ClickHouse/ClickHouse/pull/6941 rel="external nofollow noreferrer">#6941</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Поддержка (опционально, по умолчанию отключен) перенаправляет на URL хранение. <a href=https://github.com/ClickHouse/ClickHouse/pull/6914 rel="external nofollow noreferrer">#6914</a> (<a href=https://github.com/maqroll rel="external nofollow noreferrer">maqroll</a>)</li> <li>Добавьте информационное сообщение, когда клиент с более старой версией подключается к серверу. <a href=https://github.com/ClickHouse/ClickHouse/pull/6893 rel="external nofollow noreferrer">#6893</a> (<a href=https://github.com/malkfilipp rel="external nofollow noreferrer">Филипп Мальковский</a>)</li> <li>Удалите максимальное ограничение времени ожидания обратного отсчета для отправки данных в распределенных таблицах <a href=https://github.com/ClickHouse/ClickHouse/pull/6895 rel="external nofollow noreferrer">#6895</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Добавьте возможность отправлять графиту события профиля (счетчики) с кумулятивными значениями. Его можно включить в разделе <code>&lt;events_cumulative&gt;</code> в серверах <code>config.xml</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6969 rel="external nofollow noreferrer">#6969</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Добавить автоматическое приведение типа <code>T</code> к <code>LowCardinality(T)</code> при вставке данных в столбец типа <code>LowCardinality(T)</code> в родном формате через HTTP. <a href=https://github.com/ClickHouse/ClickHouse/pull/6891 rel="external nofollow noreferrer">#6891</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Добавить возможность использования функции <code>hex</code> без использования <code>reinterpretAsString</code> для <code>Float32</code>, <code>Float64</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7024 rel="external nofollow noreferrer">#7024</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Михаил Коротов</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-2>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-2 title="Permanent link">&para;</a></h4> <ul> <li>Добавьте gdb-индекс в двоичный файл clickhouse с отладочной информацией. Это ускорит время запуска системы. <code>gdb</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6947 rel="external nofollow noreferrer">#6947</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Ускорить деб упаковки с исправленными помощью dpkg-деб, которая использует <code>pigz</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6960 rel="external nofollow noreferrer">#6960</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Набор <code>enable_fuzzing = 1</code> чтобы включить инструментирование libfuzzer всего кода проекта. <a href=https://github.com/ClickHouse/ClickHouse/pull/7042 rel="external nofollow noreferrer">#7042</a> (<a href=https://github.com/kyprizel rel="external nofollow noreferrer">kyprizel</a>)</li> <li>Добавить сплит построить тест в КИ. <a href=https://github.com/ClickHouse/ClickHouse/pull/7061 rel="external nofollow noreferrer">#7061</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавьте сборку с MemorySanitizer в CI. <a href=https://github.com/ClickHouse/ClickHouse/pull/7066 rel="external nofollow noreferrer">#7066</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>)</li> <li>Заменять <code>libsparsehash</code> с <code>sparsehash-c11</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/6965 rel="external nofollow noreferrer">#6965</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> </ul> <h4 id=bug-fix-5>Исправление ошибок<a class=headerlink href=#bug-fix-5 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено снижение производительности индексного анализа по сложным ключам на больших таблицах. Это исправляет #6924. <a href=https://github.com/ClickHouse/ClickHouse/pull/7075 rel="external nofollow noreferrer">#7075</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена логическая ошибка, вызывающая segfaults при выборе из Кафки пустой темы. <a href=https://github.com/ClickHouse/ClickHouse/pull/6909 rel="external nofollow noreferrer">#6909</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлено слишком раннее закрытие соединения MySQL <code>MySQLBlockInputStream.cpp</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6882 rel="external nofollow noreferrer">#6882</a> (<a href=https://github.com/clemrodriguez rel="external nofollow noreferrer">Clément Rodriguez</a>)</li> <li>Возвращена поддержка очень старых ядер Linux (исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6841 rel="external nofollow noreferrer">#6841</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6853 rel="external nofollow noreferrer">#6853</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить возможную потерю данных в <code>insert select</code> запрос в случае пустого блока во входном потоке. #6834 #6862 <a href=https://github.com/ClickHouse/ClickHouse/pull/6911 rel="external nofollow noreferrer">#6911</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправление для функции <code>АrrayEnumerateUniqRanked</code> с пустыми массивами в парах <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer">#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправьте сложные запросы с помощью соединений массивов и глобальных подзапросов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6934 rel="external nofollow noreferrer">#6934</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Чинить <code>Unknown identifier</code> ошибка в порядке ПО и группировка ПО с несколькими соединениями <a href=https://github.com/ClickHouse/ClickHouse/pull/7022 rel="external nofollow noreferrer">#7022</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлено <code>MSan</code> предупреждение при выполнении функции с помощью <code>LowCardinality</code> аргумент. <a href=https://github.com/ClickHouse/ClickHouse/pull/7062 rel="external nofollow noreferrer">#7062</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> </ul> <h4 id=backward-incompatible-change-2>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change-2 title="Permanent link">&para;</a></h4> <ul> <li>Изменен формат сериализации состояний растровых * агрегатных функций для повышения производительности. Сериализованные состояния растрового изображения* из предыдущих версий не могут быть прочитаны. <a href=https://github.com/ClickHouse/ClickHouse/pull/6908 rel="external nofollow noreferrer">#6908</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> </ul> <h2 id=clickhouse-release-19-14>ClickHouse релиз 19.14<a class=headerlink href=#clickhouse-release-19-14 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-14-7-15-2019-10-02>ClickHouse релиз 19.14.7.15, 2019-10-02<a class=headerlink href=#clickhouse-release-19-14-7-15-2019-10-02 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-6>Исправление ошибок<a class=headerlink href=#bug-fix-6 title="Permanent link">&para;</a></h4> <ul> <li>Этот релиз также содержит все исправления ошибок от 19.11.12.69.</li> <li>Исправлена совместимость для распределенных запросов между 19.14 и более ранними версиями. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/7068 rel="external nofollow noreferrer">#7068</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7069 rel="external nofollow noreferrer">#7069</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-14-6-12-2019-09-19>ClickHouse релиз 19.14.6.12, 2019-09-19<a class=headerlink href=#clickhouse-release-19-14-6-12-2019-09-19 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-7>Исправление ошибок<a class=headerlink href=#bug-fix-7 title="Permanent link">&para;</a></h4> <ul> <li>Исправление для функции <code>АrrayEnumerateUniqRanked</code> с пустыми массивами в парах. <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer">#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлено имя подзапроса в запросах с <code>ARRAY JOIN</code> и <code>GLOBAL IN subquery</code> с псевдонимом. Используйте псевдоним подзапроса для внешнего имени таблицы, если оно указано. <a href=https://github.com/ClickHouse/ClickHouse/pull/6934 rel="external nofollow noreferrer">#6934</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-3>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-3 title="Permanent link">&para;</a></h4> <ul> <li>Чинить <a href=https://clickhouse-test-reports.s3.yandex.net/6944/aab95fd5175a513413c7395a73a82044bdafb906/functional_stateless_tests_(debug).html rel="external nofollow noreferrer">хлопанье</a> тест <code>00715_fetch_merged_or_mutated_part_zookeeper</code> переписывая его в оболочку скриптов, потому что он должен ждать, пока мутации применятся. <a href=https://github.com/ClickHouse/ClickHouse/pull/6977 rel="external nofollow noreferrer">#6977</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр казаков</a>)</li> <li>Исправлены системные и MemSan сбой в функции <code>groupUniqArray</code> с аргументом массива emtpy. Это было вызвано размещением пустых <code>PaddedPODArray</code> в хэш-таблицу нулевая ячейка, потому что конструктор для нулевого значения ячейки не вызывался. <a href=https://github.com/ClickHouse/ClickHouse/pull/6937 rel="external nofollow noreferrer">#6937</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> </ul> <h3 id=clickhouse-release-19-14-3-3-2019-09-10>ClickHouse релиз 19.14.3.3, 2019-09-10<a class=headerlink href=#clickhouse-release-19-14-3-3-2019-09-10 title="Permanent link">&para;</a></h3> <h4 id=new-feature-4>Новая функция<a class=headerlink href=#new-feature-4 title="Permanent link">&para;</a></h4> <ul> <li><code>WITH FILL</code> модификатор для <code>ORDER BY</code>. (продолжение работы <a href=https://github.com/ClickHouse/ClickHouse/issues/5069 rel="external nofollow noreferrer">#5069</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6610 rel="external nofollow noreferrer">#6610</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li><code>WITH TIES</code> модификатор для <code>LIMIT</code>. (продолжение работы <a href=https://github.com/ClickHouse/ClickHouse/issues/5069 rel="external nofollow noreferrer">#5069</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6610 rel="external nofollow noreferrer">#6610</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Разобрать некотируемых <code>NULL</code> буквальное значение NULL (если настройки <code>format_csv_unquoted_null_literal_as_null=1</code>). Инициализируйте нулевые поля значениями по умолчанию, если тип данных этого поля не является нулевым (если задано значение <code>input_format_null_as_default=1</code>). <a href=https://github.com/ClickHouse/ClickHouse/issues/5990 rel="external nofollow noreferrer">#5990</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6055 rel="external nofollow noreferrer">#6055</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Поддержка подстановочных знаков в путях табличных функций <code>file</code> и <code>hdfs</code>. Если путь содержит подстановочные знаки, то таблица будет доступна только для чтения. Пример использования: <code>select * from hdfs('hdfs://hdfs1:9000/some_dir/another_dir/*/file{0..9}{0..9}')</code> и <code>select * from file('some_dir/{some_file,another_file,yet_another}.tsv', 'TSV', 'value UInt32')</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6092 rel="external nofollow noreferrer">#6092</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Новый <code>system.metric_log</code> таблица, в которой хранятся значения <code>system.events</code> и <code>system.metrics</code> с заданным интервалом времени. <a href=https://github.com/ClickHouse/ClickHouse/issues/6363 rel="external nofollow noreferrer">#6363</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6467 rel="external nofollow noreferrer">#6467</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Никита Михайлов</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6530 rel="external nofollow noreferrer">#6530</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Разрешить запись текстовых журналов ClickHouse в <code>system.text_log</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/issues/6037 rel="external nofollow noreferrer">#6037</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6103 rel="external nofollow noreferrer">#6103</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Никита Михайлов</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6164 rel="external nofollow noreferrer">#6164</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Показывать частные символы в трассировках стека (это делается с помощью синтаксического анализа таблиц символов файлов ELF). Добавлена информация о файле и номере строки в трассировках стека, если присутствует отладочная информация. Ускоренный поиск имени символа с индексацией символов, присутствующих в программе. Добавлены новые функции SQL для самоанализа: <code>demangle</code> и <code>addressToLine</code>. Переименованная функция <code>symbolizeAddress</code> к <code>addressToSymbol</code> для последовательности. Функция <code>addressToSymbol</code> вернет искалеченное имя по соображениям производительности и вам придется подать заявку <code>demangle</code>. Добавлена настройка <code>allow_introspection_functions</code> который по умолчанию отключен. <a href=https://github.com/ClickHouse/ClickHouse/pull/6201 rel="external nofollow noreferrer">#6201</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Табличная функция <code>values</code> (имя не чувствительно к регистру). Это позволяет читать из <code>VALUES</code> список предложенных в <a href=https://github.com/ClickHouse/ClickHouse/issues/5984 rel="external nofollow noreferrer">#5984</a>. Пример: <code>SELECT * FROM VALUES('a UInt64, s String', (1, 'one'), (2, 'two'), (3, 'three'))</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6217 rel="external nofollow noreferrer">#6217</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6209 rel="external nofollow noreferrer">#6209</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Добавлена возможность изменять настройки хранения. Синтаксис: <code>ALTER TABLE &lt;table&gt; MODIFY SETTING &lt;setting&gt; = &lt;value&gt;</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6366 rel="external nofollow noreferrer">#6366</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6669 rel="external nofollow noreferrer">#6669</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6685 rel="external nofollow noreferrer">#6685</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Опора для снятия отсоединенных деталей. Синтаксис: <code>ALTER TABLE &lt;table_name&gt; DROP DETACHED PART '&lt;part_id&gt;'</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6158 rel="external nofollow noreferrer">#6158</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Ограничения таблицы. Позволяет добавить ограничение к определению таблицы,которое будет проверяться при вставке. <a href=https://github.com/ClickHouse/ClickHouse/pull/5273 rel="external nofollow noreferrer">#5273</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer">Глеб Новиков</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6652 rel="external nofollow noreferrer">#6652</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Суппорт для каскадных материализованных представлений. <a href=https://github.com/ClickHouse/ClickHouse/pull/6324 rel="external nofollow noreferrer">#6324</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Включите профилировщик запросов по умолчанию, чтобы один раз в секунду выполнять выборку каждого потока выполнения запроса. <a href=https://github.com/ClickHouse/ClickHouse/pull/6283 rel="external nofollow noreferrer">#6283</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Входной формат <code>ORC</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6454 rel="external nofollow noreferrer">#6454</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6703 rel="external nofollow noreferrer">#6703</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer">аконяев90</a>)</li> <li>Добавлены две новые функции: <code>sigmoid</code> и <code>tanh</code> (которые полезны для приложений машинного обучения). <a href=https://github.com/ClickHouse/ClickHouse/pull/6254 rel="external nofollow noreferrer">#6254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Функция <code>hasToken(haystack, token)</code>, <code>hasTokenCaseInsensitive(haystack, token)</code> чтобы проверить, находится ли данный токен в стоге сена. Токен-это подстрока максимальной длины между двумя не буквенно-цифровыми символами ASCII (или границами стога сена). Токен должен быть постоянной строкой. Поддерживается специализацией индекса tokenbf_v1. <a href=https://github.com/ClickHouse/ClickHouse/pull/6596 rel="external nofollow noreferrer">#6596</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/6662 rel="external nofollow noreferrer">#6662</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Новая функция <code>neighbor(value, offset[, default_value])</code>. Позволяет достичь значения prev / next внутри столбца в блоке данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/5925 rel="external nofollow noreferrer">#5925</a> (<a href=https://github.com/alex-krash rel="external nofollow noreferrer">Алекс Краш</a>) <a href=https://github.com/ClickHouse/ClickHouse/commit/6685365ab8c5b74f9650492c88a012596eb1b0c6 rel="external nofollow noreferrer">6685365ab8c5b74f9650492c88a012596eb1b0c6</a> <a href=https://github.com/ClickHouse/ClickHouse/commit/341e2e4587a18065c2da1ca888c73389f48ce36c rel="external nofollow noreferrer">341e2e4587a18065c2da1ca888c73389f48ce36c</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей Миловидов</a></li> <li>Создал функцию <code>currentUser()</code>, возвращая логин авторизованного пользователя. Добавлен псевдоним <code>user()</code> для совместимости с MySQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/6470 rel="external nofollow noreferrer">#6470</a> (<a href=https://github.com/alex-krash rel="external nofollow noreferrer">Алекс Краш</a>)</li> <li>Новые агрегатные функции <code>quantilesExactInclusive</code> и <code>quantilesExactExclusive</code> которые были предложены в <a href=https://github.com/ClickHouse/ClickHouse/issues/5885 rel="external nofollow noreferrer">#5885</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6477 rel="external nofollow noreferrer">#6477</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Функция <code>bitmapRange(bitmap, range_begin, range_end)</code> который возвращает новый набор с заданным диапазоном (не включает в себя <code>range_end</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6314 rel="external nofollow noreferrer">#6314</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Функция <code>geohashesInBox(longitude_min, latitude_min, longitude_max, latitude_max, precision)</code> что создает массив прецизионных длинных строк геохаш-боксов, покрывающих заданную площадь. <a href=https://github.com/ClickHouse/ClickHouse/pull/6127 rel="external nofollow noreferrer">#6127</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Реализуйте поддержку запроса INSERT с помощью <code>Kafka</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/6012 rel="external nofollow noreferrer">#6012</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Добавлена поддержка для <code>_partition</code> и <code>_timestamp</code> виртуальные колонки для движка Кафки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6400 rel="external nofollow noreferrer">#6400</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Возможность удаления конфиденциальных данных из <code>query_log</code>, журналы серверов, список процессов с правилами на основе регулярных выражений. <a href=https://github.com/ClickHouse/ClickHouse/pull/5710 rel="external nofollow noreferrer">#5710</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> </ul> <h4 id=experimental-feature-2>Экспериментальная возможность<a class=headerlink href=#experimental-feature-2 title="Permanent link">&para;</a></h4> <ul> <li>Формат входных и выходных данных <code>Template</code>. Он позволяет указать строку пользовательского формата для ввода и вывода. <a href=https://github.com/ClickHouse/ClickHouse/issues/4354 rel="external nofollow noreferrer">#4354</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6727 rel="external nofollow noreferrer">#6727</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Реализация проекта <code>LIVE VIEW</code> таблицы, которые были первоначально предложены в <a href=https://github.com/ClickHouse/ClickHouse/pull/2898 rel="external nofollow noreferrer">#2898</a>, подготовленные в <a href=https://github.com/ClickHouse/ClickHouse/issues/3925 rel="external nofollow noreferrer">#3925</a>, а затем обновляется в <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer">#5541</a>. Видеть <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer">#5541</a> для детального описания. <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer">#5541</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer">взаказников</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6425 rel="external nofollow noreferrer">#6425</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6656 rel="external nofollow noreferrer">#6656</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer">взаказников</a>) Заметить что <code>LIVE VIEW</code> функция может быть удалена в следующих версиях.</li> </ul> <h4 id=bug-fix-8>Исправление ошибок<a class=headerlink href=#bug-fix-8 title="Permanent link">&para;</a></h4> <ul> <li>Этот релиз также содержит все исправления ошибок от 19.13 и 19.11.</li> <li>Исправьте ошибку сегментации, когда в таблице есть индексы пропуска и происходит вертикальное слияние. <a href=https://github.com/ClickHouse/ClickHouse/pull/6723 rel="external nofollow noreferrer">#6723</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте ТТЛ для каждого столбца с нетривиальными значениями по умолчанию для столбцов. Ранее в случае принудительного слияния TTL с <code>OPTIMIZE ... FINAL</code> запрос, истекшие значения были заменены типом defaults вместо заданных пользователем значений столбца defaults. <a href=https://github.com/ClickHouse/ClickHouse/pull/6796 rel="external nofollow noreferrer">#6796</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлена проблема дублирования сообщений Кафки при обычном перезапуске сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/6597 rel="external nofollow noreferrer">#6597</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлена бесконечная петля при чтении сообщений Кафки. Не приостанавливайте/возобновляйте потребительскую подписку вообще - в противном случае она может быть приостановлена на неопределенный срок в некоторых сценариях. <a href=https://github.com/ClickHouse/ClickHouse/pull/6354 rel="external nofollow noreferrer">#6354</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Чинить <code>Key expression contains comparison between inconvertible types</code> исключение в <code>bitmapContains</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/issues/6136 rel="external nofollow noreferrer">#6136</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/6146 rel="external nofollow noreferrer">#6146</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6156 rel="external nofollow noreferrer">#6156</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн с поддержкой <code>optimize_skip_unused_shards</code> и пропал ключ от осколков. <a href=https://github.com/ClickHouse/ClickHouse/pull/6384 rel="external nofollow noreferrer">#6384</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлен неправильный код в мутациях, которые могут привести к повреждению памяти. Исправлена обработка выхода онлайн / оффлайн чтения адреса <code>0x14c0</code> это может произойти из-за совпадения <code>DROP TABLE</code> и <code>SELECT</code> от <code>system.parts</code> или <code>system.parts_columns</code>. Фиксированное состояние расы при подготовке запросов мутаций. Исправлена тупиковая ситуация, вызванная <code>OPTIMIZE</code> реплицированных таблиц и параллельных операций модификации, таких как ALTERs. <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer">#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Убраны лишние подробный вход в интерфейс для MySQL <a href=https://github.com/ClickHouse/ClickHouse/pull/6389 rel="external nofollow noreferrer">#6389</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Возвращает возможность разбора логических настроек из ‘true’ и ‘false’ в конфигурационном файле. <a href=https://github.com/ClickHouse/ClickHouse/pull/6278 rel="external nofollow noreferrer">#6278</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправить сбой в работе <code>quantile</code> и <code>median</code> функции <code>Nullable(Decimal128)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6378 rel="external nofollow noreferrer">#6378</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлен возможный неполный результат возвращаемый компанией <code>SELECT</code> запрос с помощью <code>WHERE</code> условие о первичном ключе содержало преобразование в тип Float. Это было вызвано неправильной проверкой монотонности в <code>toFloat</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/issues/6248 rel="external nofollow noreferrer">#6248</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6374 rel="external nofollow noreferrer">#6374</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Проверять <code>max_expanded_ast_elements</code> установка для мутаций. Ясные мутации после <code>TRUNCATE TABLE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6205 rel="external nofollow noreferrer">#6205</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправьте результаты соединения для ключевых столбцов при использовании с <code>join_use_nulls</code>. Прикрепите значения null вместо столбцов по умолчанию. <a href=https://github.com/ClickHouse/ClickHouse/pull/6249 rel="external nofollow noreferrer">#6249</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка пропуска индексов с вертикальным слиянием и alter. Исправить для <code>Bad size of marks file</code> исключение. <a href=https://github.com/ClickHouse/ClickHouse/issues/6594 rel="external nofollow noreferrer">#6594</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6713 rel="external nofollow noreferrer">#6713</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена редкая ошибка в <code>ALTER MODIFY COLUMN</code> и вертикальное слияние, когда одна из Объединенных/измененных частей пуста (0 строк) <a href=https://github.com/ClickHouse/ClickHouse/issues/6746 rel="external nofollow noreferrer">#6746</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6780 rel="external nofollow noreferrer">#6780</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка в преобразовании <code>LowCardinality</code> напечатать <code>AggregateFunctionFactory</code>. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6257 rel="external nofollow noreferrer">#6257</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6281 rel="external nofollow noreferrer">#6281</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправить неправильное поведение и возможные вылеты в <code>topK</code> и <code>topKWeighted</code> агрегированные функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/6404 rel="external nofollow noreferrer">#6404</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлен небезопасный код вокруг <code>getIdentifier</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/issues/6401 rel="external nofollow noreferrer">#6401</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6409 rel="external nofollow noreferrer">#6409</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка в протоколе MySQL wire (используется при подключении к ClickHouse form MySQL client). Вызвано переполнением буфера кучи в <code>PacketPayloadWriteBuffer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6212 rel="external nofollow noreferrer">#6212</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Исправлена утечка памяти внутри <code>bitmapSubsetInRange</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/6819 rel="external nofollow noreferrer">#6819</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Исправлена редкая ошибка, когда мутация выполнялась после изменения детализации. <a href=https://github.com/ClickHouse/ClickHouse/pull/6816 rel="external nofollow noreferrer">#6816</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Разрешить сообщение protobuf со всеми полями по умолчанию. <a href=https://github.com/ClickHouse/ClickHouse/pull/6132 rel="external nofollow noreferrer">#6132</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Устраните ошибку с помощью <code>nullIf</code> функция, когда мы посылаем <code>NULL</code> аргумент по второму аргументу. <a href=https://github.com/ClickHouse/ClickHouse/pull/6446 rel="external nofollow noreferrer">#6446</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Исправлена редкая ошибка с неправильным выделением/освобождением памяти в сложных ключевых словарях кэша со строковыми полями, что приводит к бесконечному потреблению памяти (похоже на утечку памяти). Ошибка воспроизводится, когда размер строки был равен степени два, начиная с восьми (8, 16, 32 и т. д.). <a href=https://github.com/ClickHouse/ClickHouse/pull/6447 rel="external nofollow noreferrer">#6447</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено кодирование горилл на небольших последовательностях, которое вызывало исключение <code>Cannot write after end of buffer</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6398 rel="external nofollow noreferrer">#6398</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6444 rel="external nofollow noreferrer">#6444</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Разрешить использовать не обнуляемые типы В соединениях с <code>join_use_nulls</code> включен. <a href=https://github.com/ClickHouse/ClickHouse/pull/6705 rel="external nofollow noreferrer">#6705</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Отключать <code>Poco::AbstractConfiguration</code> подстановки в запрос <code>clickhouse-client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6706 rel="external nofollow noreferrer">#6706</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Избегайте тупиковых ситуаций в <code>REPLACE PARTITION</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6677 rel="external nofollow noreferrer">#6677</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>С помощью <code>arrayReduce</code> для постоянных аргументов может привести к обработка выхода онлайн / оффлайн. <a href=https://github.com/ClickHouse/ClickHouse/issues/6242 rel="external nofollow noreferrer">#6242</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6326 rel="external nofollow noreferrer">#6326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте несогласованные детали, которые могут появиться, если реплика была восстановлена после этого <code>DROP PARTITION</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer">#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer">#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлено зависание <code>JSONExtractRaw</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/issues/6195 rel="external nofollow noreferrer">#6195</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6198 rel="external nofollow noreferrer">#6198</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка с неправильной сериализацией индексов пропуска и агрегацией с адаптивной детализацией. <a href=https://github.com/ClickHouse/ClickHouse/issues/6594 rel="external nofollow noreferrer">#6594</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6748 rel="external nofollow noreferrer">#6748</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Чинить <code>WITH ROLLUP</code> и <code>WITH CUBE</code> модификаторы <code>GROUP BY</code> с двухуровневой агрегацией. <a href=https://github.com/ClickHouse/ClickHouse/pull/6225 rel="external nofollow noreferrer">#6225</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлена ошибка с написанием вторичных индексных меток с адаптивной детализацией. <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer">#6126</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте порядок инициализации при запуске сервера. С <code>StorageMergeTree::background_task_handle</code> инициализируется в <code>startup()</code> то <code>MergeTreeBlockOutputStream::write()</code> возможно, вы попытаетесь использовать его перед инициализацией. Просто проверьте, инициализирован ли он. <a href=https://github.com/ClickHouse/ClickHouse/pull/6080 rel="external nofollow noreferrer">#6080</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Очистка буфера данных от предыдущей операции чтения, которая была завершена с ошибкой. <a href=https://github.com/ClickHouse/ClickHouse/pull/6026 rel="external nofollow noreferrer">#6026</a> (<a href=https://github.com/bopohaa rel="external nofollow noreferrer">Николай</a>)</li> <li>Исправлена ошибка с включением адаптивной детализации при создании новой реплики для реплицированной таблицы * MergeTree. <a href=https://github.com/ClickHouse/ClickHouse/issues/6394 rel="external nofollow noreferrer">#6394</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6452 rel="external nofollow noreferrer">#6452</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена возможная ошибка при запуске сервера в случае возникновения исключения <code>libunwind</code> во время исключения при доступе к неинициализированному <code>ThreadStatus</code> структура. <a href=https://github.com/ClickHouse/ClickHouse/pull/6456 rel="external nofollow noreferrer">#6456</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Никита Михайлов</a>)</li> <li>Исправить сбой в работе <code>yandexConsistentHash</code> функция. Найдено с помощью теста fuzz. <a href=https://github.com/ClickHouse/ClickHouse/issues/6304 rel="external nofollow noreferrer">#6304</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6305 rel="external nofollow noreferrer">#6305</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена возможность зависания запросов, когда сервер перегружен и глобальный пул потоков становится почти полным. Это имеет более высокие шансы произойти в кластерах с большим количеством сегментов (сотни), поскольку распределенные запросы выделяют поток для каждого соединения с каждым сегментом. Например, эта проблема может возникнуть, если кластер из 330 сегментов обрабатывает 30 параллельных распределенных запросов. Эта проблема затрагивает все версии, начиная с версии 19.2. <a href=https://github.com/ClickHouse/ClickHouse/pull/6301 rel="external nofollow noreferrer">#6301</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Фиксированная логика работы <code>arrayEnumerateUniqRanked</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/6423 rel="external nofollow noreferrer">#6423</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка segfault при декодировании таблицы символов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6603 rel="external nofollow noreferrer">#6603</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Исправлено неуместное исключение в приведении <code>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn't contain Nulls (e.g. in query like <code>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6094 rel="external nofollow noreferrer">#6094</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6119 rel="external nofollow noreferrer">#6119</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Удалено дополнительное цитирование описания в <code>system.settings</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/issues/6696 rel="external nofollow noreferrer">#6696</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6699 rel="external nofollow noreferrer">#6699</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Избегайте возможных тупиков в работе <code>TRUNCATE</code> из реплицированной таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/6695 rel="external nofollow noreferrer">#6695</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте чтение в порядке сортировки ключа. <a href=https://github.com/ClickHouse/ClickHouse/pull/6189 rel="external nofollow noreferrer">#6189</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Чинить <code>ALTER TABLE ... UPDATE</code> запрос для таблиц с <code>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer">#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправить ошибку, открытую <a href=https://github.com/ClickHouse/ClickHouse/pull/4405 rel="external nofollow noreferrer">#4405</a> (начиная с 19.4.0). Воспроизводится в запросах к распределенным таблицам через таблицы MergeTree, когда мы не запрашиваем никаких столбцов (<code>SELECT 1</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6236 rel="external nofollow noreferrer">#6236</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено переполнение при целочисленном делении знакового типа на беззнаковый. Поведение было точно таким же, как в языке C или C++ (целочисленные правила продвижения), что может быть удивительно. Обратите внимание, что переполнение все еще возможно при делении большого числа со знаком на большое число без знака или наоборот (но этот случай менее обычен). Эта проблема существовала во всех версиях сервера. <a href=https://github.com/ClickHouse/ClickHouse/issues/6214 rel="external nofollow noreferrer">#6214</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6233 rel="external nofollow noreferrer">#6233</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Ограничьте максимальное время сна для дросселирования, когда <code>max_execution_speed</code> или <code>max_execution_speed_bytes</code> заданный. Исправлены ложные ошибки, такие как <code>Estimated query execution time (inf seconds) is too long</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/5547 rel="external nofollow noreferrer">#5547</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6232 rel="external nofollow noreferrer">#6232</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлены проблемы, связанные с использованием <code>MATERIALIZED</code> столбцы и псевдонимы в <code>MaterializedView</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/448 rel="external nofollow noreferrer">#448</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3484 rel="external nofollow noreferrer">#3484</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3450 rel="external nofollow noreferrer">#3450</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/2878 rel="external nofollow noreferrer">#2878</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/2285 rel="external nofollow noreferrer">#2285</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3796 rel="external nofollow noreferrer">#3796</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6316 rel="external nofollow noreferrer">#6316</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Чинить <code>FormatFactory</code> поведение для входных потоков, которые не реализованы в качестве процессора. <a href=https://github.com/ClickHouse/ClickHouse/pull/6495 rel="external nofollow noreferrer">#6495</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправлена опечатка. <a href=https://github.com/ClickHouse/ClickHouse/pull/6631 rel="external nofollow noreferrer">#6631</a> (<a href=https://github.com/alexryndin rel="external nofollow noreferrer">Алексей Рындин</a>)</li> <li>Опечатка в сообщении об ошибке (is - > are). <a href=https://github.com/ClickHouse/ClickHouse/pull/6839 rel="external nofollow noreferrer">#6839</a> (<a href=https://github.com/den-crane rel="external nofollow noreferrer">Денис Журавлев</a>)</li> <li>Исправлена ошибка при разборе списка столбцов из строки, Если тип содержал запятую (эта проблема была актуальна для <code>File</code>, <code>URL</code>, <code>HDFS</code> хранения) <a href=https://github.com/ClickHouse/ClickHouse/issues/6217 rel="external nofollow noreferrer">#6217</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6209 rel="external nofollow noreferrer">#6209</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> </ul> <h4 id=security-fix>Исправление безопасности<a class=headerlink href=#security-fix title="Permanent link">&para;</a></h4> <ul> <li>Этот релиз также содержит все исправления безопасности ошибок от 19.13 и 19.11.</li> <li>Исправлена возможность сфабрикованного запроса вызвать сбой сервера из-за переполнения стека в синтаксическом анализаторе SQL. Исправлена возможность переполнения стека в таблицах слияния и распределения, материализованных представлениях и условиях безопасности на уровне строк, включающих подзапросы. <a href=https://github.com/ClickHouse/ClickHouse/pull/6433 rel="external nofollow noreferrer">#6433</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=improvement-3>Улучшение<a class=headerlink href=#improvement-3 title="Permanent link">&para;</a></h4> <ul> <li>Правильная реализация троичной логики для <code>AND/OR</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6048 rel="external nofollow noreferrer">#6048</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр казаков</a>)</li> <li>Теперь значения и строки с истекшим сроком действия TTL будут удалены после этого <code>OPTIMIZE ... FINAL</code> query from old parts without TTL infos or with outdated TTL infos, e.g. after <code>ALTER ... MODIFY TTL</code> запрос. Добавленные запросы <code>SYSTEM STOP/START TTL MERGES</code> чтобы запретить / разрешить назначать слияния с TTL и фильтровать просроченные значения во всех слияниях. <a href=https://github.com/ClickHouse/ClickHouse/pull/6274 rel="external nofollow noreferrer">#6274</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Возможность изменить расположение файла истории ClickHouse для использования клиентом <code>CLICKHOUSE_HISTORY_FILE</code> ОКР. <a href=https://github.com/ClickHouse/ClickHouse/pull/6840 rel="external nofollow noreferrer">#6840</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Удалять <code>dry_run</code> флаг от <code>InterpreterSelectQuery</code>. … <a href=https://github.com/ClickHouse/ClickHouse/pull/6375 rel="external nofollow noreferrer">#6375</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Поддержка <code>ASOF JOIN</code> с <code>ON</code> раздел. <a href=https://github.com/ClickHouse/ClickHouse/pull/6211 rel="external nofollow noreferrer">#6211</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Улучшенная поддержка индексов пропуска для мутаций и репликации. Поддержка <code>MATERIALIZE/CLEAR INDEX ... IN PARTITION</code> запрос. <code>UPDATE x = x</code> пересчитывает все индексы, использующие столбец <code>x</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5053 rel="external nofollow noreferrer">#5053</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Разрешить <code>ATTACH</code> живые представления (например, при запуске сервера) независимо от того, чтобы <code>allow_experimental_live_view</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/6754 rel="external nofollow noreferrer">#6754</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Для трассировок стека, собранных профилировщиком запросов, не включайте кадры стека, созданные самим профилировщиком запросов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6250 rel="external nofollow noreferrer">#6250</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Теперь функции таблицы <code>values</code>, <code>file</code>, <code>url</code>, <code>hdfs</code> есть поддержка столбцов псевдонимов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6255 rel="external nofollow noreferrer">#6255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Создайте исключение, если <code>config.d</code> файл не имеет соответствующего корневого элемента в качестве файла конфигурации. <a href=https://github.com/ClickHouse/ClickHouse/pull/6123 rel="external nofollow noreferrer">#6123</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Распечатайте дополнительную информацию в сообщении об исключении для <code>no space left on device</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6182 rel="external nofollow noreferrer">#6182</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/6252 rel="external nofollow noreferrer">#6252</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6352 rel="external nofollow noreferrer">#6352</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>При определении осколков а <code>Distributed</code> таблица, которая будет покрыта запросом на чтение (для <code>optimize_skip_unused_shards</code> = 1) ClickHouse теперь проверяет условия от обоих <code>prewhere</code> и <code>where</code> предложения оператора select. <a href=https://github.com/ClickHouse/ClickHouse/pull/6521 rel="external nofollow noreferrer">#6521</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр казаков</a>)</li> <li>Включенный <code>SIMDJSON</code> для машин без AVX2, но с набором инструкций SSE 4.2 и PCLMUL. <a href=https://github.com/ClickHouse/ClickHouse/issues/6285 rel="external nofollow noreferrer">#6285</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6320 rel="external nofollow noreferrer">#6320</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>ClickHouse может работать на файловых системах без <code>O_DIRECT</code> поддержка (например, ZFS и BtrFS) без дополнительной настройки. <a href=https://github.com/ClickHouse/ClickHouse/issues/4449 rel="external nofollow noreferrer">#4449</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6730 rel="external nofollow noreferrer">#6730</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Поддержка push down предиката для окончательного подзапроса. <a href=https://github.com/ClickHouse/ClickHouse/pull/6120 rel="external nofollow noreferrer">#6120</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer">TCeason</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6162 rel="external nofollow noreferrer">#6162</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Лучше <code>JOIN ON</code> извлечение ключей <a href=https://github.com/ClickHouse/ClickHouse/pull/6131 rel="external nofollow noreferrer">#6131</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Обновление <code>SIMDJSON</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6285 rel="external nofollow noreferrer">#6285</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6306 rel="external nofollow noreferrer">#6306</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Оптимизируйте выбор самого маленького столбца для <code>SELECT count()</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/6344 rel="external nofollow noreferrer">#6344</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Добавлен <code>strict</code> параметр в <code>windowFunnel()</code>. Когда <code>strict</code> устанавливается, то <code>windowFunnel()</code> применяет условия только для уникальных значений. <a href=https://github.com/ClickHouse/ClickHouse/pull/6548 rel="external nofollow noreferrer">#6548</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer">ачимбаб</a>)</li> <li>Более безопасный интерфейс <code>mysqlxx::Pool</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6150 rel="external nofollow noreferrer">#6150</a> (<a href=https://github.com/avasiliev rel="external nofollow noreferrer">авасилиев</a>)</li> <li>Параметры размер строки при выполнении с помощью <code>--help</code> опция теперь соответствует размеру терминала. <a href=https://github.com/ClickHouse/ClickHouse/pull/6590 rel="external nofollow noreferrer">#6590</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Отключать «read in order» оптимизация для агрегации без ключей. <a href=https://github.com/ClickHouse/ClickHouse/pull/6599 rel="external nofollow noreferrer">#6599</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Код состояния HTTP для <code>INCORRECT_DATA</code> и <code>TYPE_MISMATCH</code> коды ошибок были изменены по умолчанию <code>500 Internal Server Error</code> к <code>400 Bad Request</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6271 rel="external nofollow noreferrer">#6271</a> (<a href=https://github.com/a-rodin rel="external nofollow noreferrer">Александр Родин</a>)</li> <li>Переместить объект соединения из <code>ExpressionAction</code> в <code>AnalyzedJoin</code>. <code>ExpressionAnalyzer</code> и <code>ExpressionAction</code> не знаю о чем <code>Join</code> больше никаких занятий. Его логика скрыта за <code>AnalyzedJoin</code> iface защитный. <a href=https://github.com/ClickHouse/ClickHouse/pull/6801 rel="external nofollow noreferrer">#6801</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена возможная взаимоблокировка распределенных запросов, когда один из сегментов является localhost, но запрос отправляется через сетевое соединение. <a href=https://github.com/ClickHouse/ClickHouse/pull/6759 rel="external nofollow noreferrer">#6759</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Изменена семантика нескольких таблиц <code>RENAME</code> чтобы избежать возможных тупиков. <a href=https://github.com/ClickHouse/ClickHouse/issues/6757 rel="external nofollow noreferrer">#6757</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6756 rel="external nofollow noreferrer">#6756</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Переписан сервер совместимости MySQL, чтобы предотвратить загрузку полной полезной нагрузки пакета в память. Снижение потребления памяти для каждого соединения примерно до <code>2 * DBMS_DEFAULT_BUFFER_SIZE</code> (буферы чтения/записи). <a href=https://github.com/ClickHouse/ClickHouse/pull/5811 rel="external nofollow noreferrer">#5811</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Переместите логику интерпретации псевдонимов AST из синтаксического анализатора, который не должен ничего знать о семантике запросов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6108 rel="external nofollow noreferrer">#6108</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Чуть более безопасный разбор данных <code>NamesAndTypesList</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6408 rel="external nofollow noreferrer">#6408</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6410 rel="external nofollow noreferrer">#6410</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>clickhouse-copier</code>: Разрешить использование <code>where_condition</code> из конфигурации с <code>partition_key</code> псевдоним в запросе для проверки существования раздела (ранее он использовался только при чтении запросов данных). <a href=https://github.com/ClickHouse/ClickHouse/pull/6577 rel="external nofollow noreferrer">#6577</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавлен необязательный аргумент сообщения в поле <code>throwIf</code>. (<a href=https://github.com/ClickHouse/ClickHouse/issues/5772 rel="external nofollow noreferrer">#5772</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6329 rel="external nofollow noreferrer">#6329</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer">Вдимир</a>)</li> <li>Исключение сервера, полученное при отправке данных вставки, теперь обрабатывается и в клиенте. <a href=https://github.com/ClickHouse/ClickHouse/issues/5891 rel="external nofollow noreferrer">#5891</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6711 rel="external nofollow noreferrer">#6711</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Добавлена метрика <code>DistributedFilesToInsert</code> это показывает общее количество файлов в файловой системе, выбранных для отправки на удаленные серверы распределенными таблицами. Это число суммируется по всем осколкам. <a href=https://github.com/ClickHouse/ClickHouse/pull/6600 rel="external nofollow noreferrer">#6600</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Переместите большинство соединений подготовьте логику из <code>ExpressionAction/ExpressionAnalyzer</code> к <code>AnalyzedJoin</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6785 rel="external nofollow noreferrer">#6785</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправить Цан <a href=https://clickhouse-test-reports.s3.yandex.net/6399/c1c1d1daa98e199e620766f1bd06a5921050a00d/functional_stateful_tests_(thread).html rel="external nofollow noreferrer">предупреждение</a> ‘lock-order-inversion’. <a href=https://github.com/ClickHouse/ClickHouse/pull/6740 rel="external nofollow noreferrer">#6740</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Улучшенные информационные сообщения об отсутствии возможностей Linux. Протоколирование фатальных ошибок с помощью «fatal» уровень, который будет легче найти в <code>system.text_log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6441 rel="external nofollow noreferrer">#6441</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Когда включить сброс временных данных на диск, чтобы ограничить использование памяти во время <code>GROUP BY</code>, <code>ORDER BY</code>, он не проверял свободное место на диске. Исправление добавить новую настройку <code>min_free_disk_space</code>, когда свободное место на диске будет меньше порогового значения, запрос остановится и бросит <code>ErrorCodes::NOT_ENOUGH_SPACE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6678 rel="external nofollow noreferrer">#6678</a> (<a href=https://github.com/weiqxu rel="external nofollow noreferrer">Вэйцин Сюй</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6691 rel="external nofollow noreferrer">#6691</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Удален рекурсивной записи по теме. Это не имеет смысла, потому что потоки используются повторно между запросами. <code>SELECT</code> запрос может получить Блокировку в одном потоке, удерживать блокировку в другом потоке и выходить из первого потока. В то же время, первый поток может быть повторно использован <code>DROP</code> запрос. Это приведет к ложным результатам «Attempt to acquire exclusive lock recursively» сообщения. <a href=https://github.com/ClickHouse/ClickHouse/pull/6771 rel="external nofollow noreferrer">#6771</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Расщеплять <code>ExpressionAnalyzer.appendJoin()</code>. Подготовьте место в <code>ExpressionAnalyzer</code> для <code>MergeJoin</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6524 rel="external nofollow noreferrer">#6524</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Добавлен <code>mysql_native_password</code> плагин аутентификации для сервера совместимости MySQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/6194 rel="external nofollow noreferrer">#6194</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Меньшее количество <code>clock_gettime</code> вызовы; исправлена совместимость ABI между debug/release in <code>Allocator</code> (незначительный вопрос). <a href=https://github.com/ClickHouse/ClickHouse/pull/6197 rel="external nofollow noreferrer">#6197</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Подвиньте <code>collectUsedColumns</code> от <code>ExpressionAnalyzer</code> к <code>SyntaxAnalyzer</code>. <code>SyntaxAnalyzer</code> делает <code>required_source_columns</code> теперь он сам по себе. <a href=https://github.com/ClickHouse/ClickHouse/pull/6416 rel="external nofollow noreferrer">#6416</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Добавить настройку <code>joined_subquery_requires_alias</code> чтобы требовать псевдонимы для подселектов и табличных функций в <code>FROM</code> that more than one table is present (i.e. queries with JOINs). <a href=https://github.com/ClickHouse/ClickHouse/pull/6733 rel="external nofollow noreferrer">#6733</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Извлекать <code>GetAggregatesVisitor</code> класс от <code>ExpressionAnalyzer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6458 rel="external nofollow noreferrer">#6458</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li><code>system.query_log</code>: изменение типа данных <code>type</code> столбец <code>Enum</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6265 rel="external nofollow noreferrer">#6265</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Никита Михайлов</a>)</li> <li>Статическое соединение <code>sha256_password</code> плагин аутентификации. <a href=https://github.com/ClickHouse/ClickHouse/pull/6512 rel="external nofollow noreferrer">#6512</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Избегайте дополнительной зависимости для настройки <code>compile</code> работать. В предыдущих версиях пользователь может получить ошибку типа <code>cannot open crti.o</code>, <code>unable to find library -lc</code> и т.д. <a href=https://github.com/ClickHouse/ClickHouse/pull/6309 rel="external nofollow noreferrer">#6309</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Дополнительная проверка входных данных, которые могут быть получены от вредоносной реплики. <a href=https://github.com/ClickHouse/ClickHouse/pull/6303 rel="external nofollow noreferrer">#6303</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Сейчас <code>clickhouse-obfuscator</code> файл доступен в формате <code>clickhouse-client</code> пакет. В предыдущих версиях он был доступен как <code>clickhouse obfuscator</code> (с пробелами). <a href=https://github.com/ClickHouse/ClickHouse/issues/5816 rel="external nofollow noreferrer">#5816</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6609 rel="external nofollow noreferrer">#6609</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Исправлена взаимоблокировка, когда у нас есть по крайней мере два запроса, которые читают по крайней мере две таблицы в разном порядке, и еще один запрос, который выполняет операцию DDL на одной из таблиц. Исправлена еще одна очень редкая тупиковая ситуация. <a href=https://github.com/ClickHouse/ClickHouse/pull/6764 rel="external nofollow noreferrer">#6764</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлен <code>os_thread_ids</code> столбец <code>system.processes</code> и <code>system.query_log</code> для улучшения возможностей отладки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6763 rel="external nofollow noreferrer">#6763</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Обходной путь для ошибок расширения PHP mysqlnd, которые возникают, когда <code>sha256_password</code> используется в качестве плагина аутентификации по умолчанию (описано в разделе <a href=https://github.com/ClickHouse/ClickHouse/issues/6031 rel="external nofollow noreferrer">#6031</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6113 rel="external nofollow noreferrer">#6113</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Удалите ненужное место с измененными столбцами nullability. <a href=https://github.com/ClickHouse/ClickHouse/pull/6693 rel="external nofollow noreferrer">#6693</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Установите значение по умолчанию: <code>queue_max_wait_ms</code> до нуля, потому что текущее значение (пять секунд) не имеет никакого смысла. Есть редкие обстоятельства, когда эта настройка имеет какое-либо применение. Добавлены настройки <code>replace_running_query_max_wait_ms</code>, <code>kafka_max_wait_ms</code> и <code>connection_pool_max_wait_ms</code> для устранения двусмысленности. <a href=https://github.com/ClickHouse/ClickHouse/pull/6692 rel="external nofollow noreferrer">#6692</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Извлекать <code>SelectQueryExpressionAnalyzer</code> от <code>ExpressionAnalyzer</code>. Оставьте последний вариант для запросов, не связанных с выбором. <a href=https://github.com/ClickHouse/ClickHouse/pull/6499 rel="external nofollow noreferrer">#6499</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Удалено дублирование входных и выходных форматов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6239 rel="external nofollow noreferrer">#6239</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Позволяет пользователю переопределить <code>poll_interval</code> и <code>idle_connection_timeout</code> настройки при подключении. <a href=https://github.com/ClickHouse/ClickHouse/pull/6230 rel="external nofollow noreferrer">#6230</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>MergeTree</code> теперь есть дополнительная опция <code>ttl_only_drop_parts</code> (отключено по умолчанию), чтобы избежать частичной обрезки деталей, чтобы они полностью выпадали, когда все строки в детали истекли. <a href=https://github.com/ClickHouse/ClickHouse/pull/6191 rel="external nofollow noreferrer">#6191</a> (<a href=https://github.com/svladykin rel="external nofollow noreferrer">Сергей Владыкин</a>)</li> <li>Тип проверяет наличие заданных индексных функций. Бросьте исключение, если функция получила неправильный тип. Это устраняет тестирования с помощью утилиты. <a href=https://github.com/ClickHouse/ClickHouse/pull/6511 rel="external nofollow noreferrer">#6511</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> </ul> <h4 id=performance-improvement-2>Улучшение производительности<a class=headerlink href=#performance-improvement-2 title="Permanent link">&para;</a></h4> <ul> <li>Оптимизируйте запросы с помощью <code>ORDER BY expressions</code> пункт, где <code>expressions</code> есть совпадающий префикс с ключом сортировки в <code>MergeTree</code> таблицы. Эта оптимизация управляется с помощью <code>optimize_read_in_order</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/6054 rel="external nofollow noreferrer">#6054</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6629 rel="external nofollow noreferrer">#6629</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Позволяет использовать несколько резьб при загрузке и демонтаже деталей. <a href=https://github.com/ClickHouse/ClickHouse/issues/6372 rel="external nofollow noreferrer">#6372</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/6074 rel="external nofollow noreferrer">#6074</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6438 rel="external nofollow noreferrer">#6438</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Реализован пакетный вариант обновления состояний агрегатной функции. Это может привести к повышению производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/6435 rel="external nofollow noreferrer">#6435</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>С помощью <code>FastOps</code> библиотека для функций <code>exp</code>, <code>log</code>, <code>sigmoid</code>, <code>tanh</code>. FastOps-это быстрая векторная математическая библиотека от Михаила Парахина (технический директор Яндекса). Улучшенная производительность <code>exp</code> и <code>log</code> функции более чем в 6 раз. Функция <code>exp</code> и <code>log</code> от <code>Float32</code> аргумент вернется <code>Float32</code> (в предыдущих версиях они всегда возвращаются <code>Float64</code>). Сейчас <code>exp(nan)</code> может вернуться <code>inf</code>. Результат работы <code>exp</code> и <code>log</code> функции могут быть не самым близким машинным представимым числом к истинному ответу. <a href=https://github.com/ClickHouse/ClickHouse/pull/6254 rel="external nofollow noreferrer">#6254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>) Используя вариант Данилы Кутенина, чтобы сделать fastops работающими <a href=https://github.com/ClickHouse/ClickHouse/pull/6317 rel="external nofollow noreferrer">#6317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Отключить последовательную оптимизацию ключа для <code>UInt8/16</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6298 rel="external nofollow noreferrer">#6298</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6701 rel="external nofollow noreferrer">#6701</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Улучшенная производительность <code>simdjson</code> библиотека, избавившись от динамического распределения в <code>ParsedJson::Iterator</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6479 rel="external nofollow noreferrer">#6479</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Предаварийные страницы при выделении памяти с помощью <code>mmap()</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6667 rel="external nofollow noreferrer">#6667</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Исправлена ошибка производительности в <code>Decimal</code> сравнение. <a href=https://github.com/ClickHouse/ClickHouse/pull/6380 rel="external nofollow noreferrer">#6380</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-4>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-4 title="Permanent link">&para;</a></h4> <ul> <li>Удалите компилятор (экземпляр шаблона времени выполнения), потому что мы выиграли его производительность. <a href=https://github.com/ClickHouse/ClickHouse/pull/6646 rel="external nofollow noreferrer">#6646</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлен тест производительности, чтобы показать ухудшение производительности в gcc-9 более изолированным способом. <a href=https://github.com/ClickHouse/ClickHouse/pull/6302 rel="external nofollow noreferrer">#6302</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена функция таблицы <code>numbers_mt</code>, который является многопоточным вариантом <code>numbers</code>. Обновленные тесты производительности с хэш-функциями. <a href=https://github.com/ClickHouse/ClickHouse/pull/6554 rel="external nofollow noreferrer">#6554</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Режим сравнения в <code>clickhouse-benchmark</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/6220 rel="external nofollow noreferrer">#6220</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6343 rel="external nofollow noreferrer">#6343</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Самое лучшее усилие для печати следов стека. Также добавить <code>SIGPROF</code> в качестве отладочного сигнала для печати трассировки стека запущенного потока. <a href=https://github.com/ClickHouse/ClickHouse/pull/6529 rel="external nofollow noreferrer">#6529</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Каждая функция в своем собственном файле, часть 10. <a href=https://github.com/ClickHouse/ClickHouse/pull/6321 rel="external nofollow noreferrer">#6321</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Удалить два раза константный <code>TABLE_IS_READ_ONLY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6566 rel="external nofollow noreferrer">#6566</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Изменения форматирования для <code>StringHashMap</code> PR <a href=https://github.com/ClickHouse/ClickHouse/issues/5417 rel="external nofollow noreferrer">#5417</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6700 rel="external nofollow noreferrer">#6700</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Лучший подзапрос для создания соединения в <code>ExpressionAnalyzer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6824 rel="external nofollow noreferrer">#6824</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Удалить ненужное состояние (найденных с помощью PVS-студия). <a href=https://github.com/ClickHouse/ClickHouse/pull/6775 rel="external nofollow noreferrer">#6775</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Разделите интерфейс хэш-таблицы для <code>ReverseIndex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6672 rel="external nofollow noreferrer">#6672</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Рефакторинг настроек. <a href=https://github.com/ClickHouse/ClickHouse/pull/6689 rel="external nofollow noreferrer">#6689</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавить комментарии для <code>set</code> индексные функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/6319 rel="external nofollow noreferrer">#6319</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Увеличьте оценку OOM в отладочной версии на Linux. <a href=https://github.com/ClickHouse/ClickHouse/pull/6152 rel="external nofollow noreferrer">#6152</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>HDFS HA теперь работает в debug build. <a href=https://github.com/ClickHouse/ClickHouse/pull/6650 rel="external nofollow noreferrer">#6650</a> (<a href=https://github.com/weiqxu rel="external nofollow noreferrer">Вэйцин Сюй</a>)</li> <li>Добавлен тест на <code>transform_query_for_external_database</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6388 rel="external nofollow noreferrer">#6388</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте тест для нескольких материализованных представлений для таблицы Кафки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6509 rel="external nofollow noreferrer">#6509</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Сделайте лучшую схему сборки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6500 rel="external nofollow noreferrer">#6500</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлено <code>test_external_dictionaries</code> интеграция в случае, если она была выполнена под некорневым пользователем. <a href=https://github.com/ClickHouse/ClickHouse/pull/6507 rel="external nofollow noreferrer">#6507</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Ошибка воспроизводится, когда общий размер записанных пакетов превышает <code>DBMS_DEFAULT_BUFFER_SIZE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6204 rel="external nofollow noreferrer">#6204</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Добавлен тест для <code>RENAME</code> состояние гонки таблицы <a href=https://github.com/ClickHouse/ClickHouse/pull/6752 rel="external nofollow noreferrer">#6752</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Избегайте гонки данных по настройкам в <code>KILL QUERY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6753 rel="external nofollow noreferrer">#6753</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте интеграционный тест для обработки ошибок с помощью словаря кэша. <a href=https://github.com/ClickHouse/ClickHouse/pull/6755 rel="external nofollow noreferrer">#6755</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Отключите синтаксический анализ объектных файлов ELF на Mac OS, потому что это не имеет никакого смысла. <a href=https://github.com/ClickHouse/ClickHouse/pull/6578 rel="external nofollow noreferrer">#6578</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Попытайтесь сделать генератор списка изменений лучше. <a href=https://github.com/ClickHouse/ClickHouse/pull/6327 rel="external nofollow noreferrer">#6327</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавление <code>-Wshadow</code> перейти к ССЗ. <a href=https://github.com/ClickHouse/ClickHouse/pull/6325 rel="external nofollow noreferrer">#6325</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer">kreuzerkrieg</a>)</li> <li>Удален устаревший код для <code>mimalloc</code> поддержка. <a href=https://github.com/ClickHouse/ClickHouse/pull/6715 rel="external nofollow noreferrer">#6715</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>zlib-ng</code> определяет возможности x86 и сохраняет эту информацию в глобальных переменных. Это делается в вызове defalteInit, который может быть выполнен разными потоками одновременно. Чтобы избежать многопоточной записи, сделайте это при запуске библиотеки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6141 rel="external nofollow noreferrer">#6141</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Регрессионный тест на ошибку, которая в соединении была исправлена в <a href=https://github.com/ClickHouse/ClickHouse/issues/5192 rel="external nofollow noreferrer">#5192</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6147 rel="external nofollow noreferrer">#6147</a> (<a href=https://github.com/theruziev rel="external nofollow noreferrer">Бахтиер Рузиев</a>)</li> <li>Исправлен отчет MSan. <a href=https://github.com/ClickHouse/ClickHouse/pull/6144 rel="external nofollow noreferrer">#6144</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте хлопающий тест TTL. <a href=https://github.com/ClickHouse/ClickHouse/pull/6782 rel="external nofollow noreferrer">#6782</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлена гонка ложных данных в <code>MergeTreeDataPart::is_frozen</code> поле. <a href=https://github.com/ClickHouse/ClickHouse/pull/6583 rel="external nofollow noreferrer">#6583</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлены тайм-ауты в тесте fuzz. В предыдущей версии ему удалось найти ложное зависание в запросе <code>SELECT * FROM numbers_mt(gccMurmurHash(''))</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6582 rel="external nofollow noreferrer">#6582</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлены отладочные проверки для <code>static_cast</code> из колонн. <a href=https://github.com/ClickHouse/ClickHouse/pull/6581 rel="external nofollow noreferrer">#6581</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Поддержка Oracle Linux в официальных пакетах RPM. <a href=https://github.com/ClickHouse/ClickHouse/issues/6356 rel="external nofollow noreferrer">#6356</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6585 rel="external nofollow noreferrer">#6585</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Изменен JSON perftests с <code>once</code> к <code>loop</code> тип. <a href=https://github.com/ClickHouse/ClickHouse/pull/6536 rel="external nofollow noreferrer">#6536</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li><code>odbc-bridge.cpp</code> определяет <code>main()</code> поэтому он не должен быть включен в состав <code>clickhouse-lib</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6538 rel="external nofollow noreferrer">#6538</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer">Оривей Деш</a>)</li> <li>Тест на аварийное включение <code>FULL|RIGHT JOIN</code> с нулями в ключах правого стола. <a href=https://github.com/ClickHouse/ClickHouse/pull/6362 rel="external nofollow noreferrer">#6362</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>На всякий случай добавлен тест на ограничение по расширению псевдонимов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6442 rel="external nofollow noreferrer">#6442</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Переключился с <code>boost::filesystem</code> к <code>std::filesystem</code> при необходимости. <a href=https://github.com/ClickHouse/ClickHouse/pull/6253 rel="external nofollow noreferrer">#6253</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6385 rel="external nofollow noreferrer">#6385</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлены пакеты RPM на веб-сайт. <a href=https://github.com/ClickHouse/ClickHouse/pull/6251 rel="external nofollow noreferrer">#6251</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте тест для фиксированного <code>Unknown identifier</code> исключение в <code>IN</code> раздел. <a href=https://github.com/ClickHouse/ClickHouse/pull/6708 rel="external nofollow noreferrer">#6708</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Упрощать <code>shared_ptr_helper</code> потому что люди сталкиваются с трудностями понимания этого. <a href=https://github.com/ClickHouse/ClickHouse/pull/6675 rel="external nofollow noreferrer">#6675</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлены тесты производительности для исправленных кодеков Gorilla и DoubleDelta. <a href=https://github.com/ClickHouse/ClickHouse/pull/6179 rel="external nofollow noreferrer">#6179</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Разделите интеграционный тест <code>test_dictionaries</code> в 4 отдельных теста. <a href=https://github.com/ClickHouse/ClickHouse/pull/6776 rel="external nofollow noreferrer">#6776</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправить предупреждение PVS-Studio в <code>PipelineExecutor</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6777 rel="external nofollow noreferrer">#6777</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Разрешить использовать <code>library</code> источник словаря с ASan. <a href=https://github.com/ClickHouse/ClickHouse/pull/6482 rel="external nofollow noreferrer">#6482</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена возможность генерировать список изменений из списка PR. <a href=https://github.com/ClickHouse/ClickHouse/pull/6350 rel="external nofollow noreferrer">#6350</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Заприте дверь <code>TinyLog</code> хранение при чтении. <a href=https://github.com/ClickHouse/ClickHouse/pull/6226 rel="external nofollow noreferrer">#6226</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Проверить неработающие ссылки в ИЦ. <a href=https://github.com/ClickHouse/ClickHouse/pull/6634 rel="external nofollow noreferrer">#6634</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Увеличьте тайм-аут для «stack overflow» тест, потому что это может занять много времени в отладочной сборке. <a href=https://github.com/ClickHouse/ClickHouse/pull/6637 rel="external nofollow noreferrer">#6637</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена проверка на наличие двойных пробелов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6643 rel="external nofollow noreferrer">#6643</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Чинить <code>new/delete</code> отслеживание памяти при сборке с помощью дезинфицирующих средств. Слежка не совсем ясна. Это только предотвращает исключения ограничения памяти в тестах. <a href=https://github.com/ClickHouse/ClickHouse/pull/6450 rel="external nofollow noreferrer">#6450</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Включите обратную проверку неопределенных символов при связывании. <a href=https://github.com/ClickHouse/ClickHouse/pull/6453 rel="external nofollow noreferrer">#6453</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Избежать восстановления <code>hyperscan</code> каждый день. <a href=https://github.com/ClickHouse/ClickHouse/pull/6307 rel="external nofollow noreferrer">#6307</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлен отчет утилиты в <code>ProtobufWriter</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6163 rel="external nofollow noreferrer">#6163</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Не разрешайте использовать query profiler с дезинфицирующими средствами, потому что он не совместим. <a href=https://github.com/ClickHouse/ClickHouse/pull/6769 rel="external nofollow noreferrer">#6769</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте тест для перезагрузки словаря после сбоя по таймеру. <a href=https://github.com/ClickHouse/ClickHouse/pull/6114 rel="external nofollow noreferrer">#6114</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправить несоответствие <code>PipelineExecutor::prepareProcessor</code> тип аргумента. <a href=https://github.com/ClickHouse/ClickHouse/pull/6494 rel="external nofollow noreferrer">#6494</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Добавлен тест на плохие URI. <a href=https://github.com/ClickHouse/ClickHouse/pull/6493 rel="external nofollow noreferrer">#6493</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлены дополнительные проверки для <code>CAST</code> функция. Это должно получить больше информации о неисправности сегментации в нечетком тесте. <a href=https://github.com/ClickHouse/ClickHouse/pull/6346 rel="external nofollow noreferrer">#6346</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Добавлен <code>gcc-9</code> поддержка для <code>docker/builder</code> контейнер, который создает образ локально. <a href=https://github.com/ClickHouse/ClickHouse/pull/6333 rel="external nofollow noreferrer">#6333</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer">Глеб Новиков</a>)</li> <li>Тест для первичного ключа с помощью <code>LowCardinality(String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/5044 rel="external nofollow noreferrer">#5044</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6219 rel="external nofollow noreferrer">#6219</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Исправлены тесты, связанные с медленной печатью трассировок стека. <a href=https://github.com/ClickHouse/ClickHouse/pull/6315 rel="external nofollow noreferrer">#6315</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте тестовый случай для аварийного входа <code>groupUniqArray</code> фиксированной в <a href=https://github.com/ClickHouse/ClickHouse/pull/6029 rel="external nofollow noreferrer">#6029</a>. <a href=https://github.com/ClickHouse/ClickHouse/issues/4402 rel="external nofollow noreferrer">#4402</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6129 rel="external nofollow noreferrer">#6129</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Фиксированные индексы мутаций тестов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6645 rel="external nofollow noreferrer">#6645</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>В тесте производительности не считывайте журнал запросов для запросов, которые мы не выполняли. <a href=https://github.com/ClickHouse/ClickHouse/pull/6427 rel="external nofollow noreferrer">#6427</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Материализованное представление теперь может быть создано с любыми типами низкой мощности независимо от настройки о подозрительных типах низкой мощности. <a href=https://github.com/ClickHouse/ClickHouse/pull/6428 rel="external nofollow noreferrer">#6428</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Обновленные тесты для <code>send_logs_level</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/6207 rel="external nofollow noreferrer">#6207</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправлена сборка под gcc-8.2. <a href=https://github.com/ClickHouse/ClickHouse/pull/6196 rel="external nofollow noreferrer">#6196</a> (<a href=https://github.com/zlobober rel="external nofollow noreferrer">Макс Ахмедов</a>)</li> <li>Исправлена сборка с помощью внутреннего libc++. <a href=https://github.com/ClickHouse/ClickHouse/pull/6724 rel="external nofollow noreferrer">#6724</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлена общая сборка с помощью <code>rdkafka</code> библиотека <a href=https://github.com/ClickHouse/ClickHouse/pull/6101 rel="external nofollow noreferrer">#6101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправления для сборки Mac OS (неполные). <a href=https://github.com/ClickHouse/ClickHouse/pull/6390 rel="external nofollow noreferrer">#6390</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6429 rel="external nofollow noreferrer">#6429</a> (<a href=https://github.com/alex-zaitsev rel="external nofollow noreferrer">Алексей-Зайцев</a>)</li> <li>Чинить «splitted» строить. <a href=https://github.com/ClickHouse/ClickHouse/pull/6618 rel="external nofollow noreferrer">#6618</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Другие исправления сборки: <a href=https://github.com/ClickHouse/ClickHouse/pull/6186 rel="external nofollow noreferrer">#6186</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6486 rel="external nofollow noreferrer">#6486</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6348 rel="external nofollow noreferrer">#6348</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer">vxider</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6744 rel="external nofollow noreferrer">#6744</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6016 rel="external nofollow noreferrer">#6016</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6421 rel="external nofollow noreferrer">#6421</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6491 rel="external nofollow noreferrer">#6491</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=backward-incompatible-change-3>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change-3 title="Permanent link">&para;</a></h4> <ul> <li>Удалены редко используемые функции таблица <code>catBoostPool</code> и хранение <code>CatBoostPool</code>. Если вы использовали эту функцию таблицы, пожалуйста, напишите письмо по адресу <code>clickhouse-feedback@yandex-team.com</code>. Обратите внимание, что интеграция CatBoost остается и будет поддерживаться. <a href=https://github.com/ClickHouse/ClickHouse/pull/6279 rel="external nofollow noreferrer">#6279</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Отключать <code>ANY RIGHT JOIN</code> и <code>ANY FULL JOIN</code> по умолчанию. Набор <code>any_join_distinct_right_table_keys</code> настройка для их включения. <a href=https://github.com/ClickHouse/ClickHouse/issues/5126 rel="external nofollow noreferrer">#5126</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6351 rel="external nofollow noreferrer">#6351</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h2 id=clickhouse-release-19-13>ClickHouse релиз 19.13<a class=headerlink href=#clickhouse-release-19-13 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-13-6-51-2019-10-02>ClickHouse релиз 19.13.6.51, 2019-10-02<a class=headerlink href=#clickhouse-release-19-13-6-51-2019-10-02 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-9>Исправление ошибок<a class=headerlink href=#bug-fix-9 title="Permanent link">&para;</a></h4> <ul> <li>Этот релиз также содержит все исправления ошибок от 19.11.12.69.</li> </ul> <h3 id=clickhouse-release-19-13-5-44-2019-09-20>ClickHouse релиз 19.13.5.44, 2019-09-20<a class=headerlink href=#clickhouse-release-19-13-5-44-2019-09-20 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-10>Исправление ошибок<a class=headerlink href=#bug-fix-10 title="Permanent link">&para;</a></h4> <ul> <li>Этот релиз также содержит все исправления ошибок от 19.14.6.12.</li> <li>Исправлено возможное несогласованное состояние таблицы при выполнении <code>DROP</code> запрос для реплицированной таблицы в то время как zookeeper недоступен. <a href=https://github.com/ClickHouse/ClickHouse/issues/6045 rel="external nofollow noreferrer">#6045</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6413 rel="external nofollow noreferrer">#6413</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Никита Михайлов</a>)</li> <li>Исправление для гонки данных в StorageMerge <a href=https://github.com/ClickHouse/ClickHouse/pull/6717 rel="external nofollow noreferrer">#6717</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка, появившаяся в профайлером запрос, который приводит к бесконечному приему от гнезда. <a href=https://github.com/ClickHouse/ClickHouse/pull/6386 rel="external nofollow noreferrer">#6386</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена чрезмерная загрузка процессора во время выполнения <code>JSONExtractRaw</code> функция над логическим значением. <a href=https://github.com/ClickHouse/ClickHouse/pull/6208 rel="external nofollow noreferrer">#6208</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправляет регрессию при нажатии на материализованный вид. <a href=https://github.com/ClickHouse/ClickHouse/pull/6415 rel="external nofollow noreferrer">#6415</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Табличная функция <code>url</code> если бы эта уязвимость позволяла злоумышленнику вводить произвольные HTTP-заголовки в запрос. Эта проблема была обнаружена <a href=https://github.com/NSTikhomirov rel="external nofollow noreferrer">Никита Тихомиров</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6466 rel="external nofollow noreferrer">#6466</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлять бесполезно <code>AST</code> проверьте установленный индекс. <a href=https://github.com/ClickHouse/ClickHouse/issues/6510 rel="external nofollow noreferrer">#6510</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6651 rel="external nofollow noreferrer">#6651</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Исправлен парсинг данных <code>AggregateFunction</code> значения, встроенные в запрос. <a href=https://github.com/ClickHouse/ClickHouse/issues/6575 rel="external nofollow noreferrer">#6575</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6773 rel="external nofollow noreferrer">#6773</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Исправлено неправильное поведение <code>trim</code> функции семьи. <a href=https://github.com/ClickHouse/ClickHouse/pull/6647 rel="external nofollow noreferrer">#6647</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-13-4-32-2019-09-10>ClickHouse релиз 19.13.4.32, 2019-09-10<a class=headerlink href=#clickhouse-release-19-13-4-32-2019-09-10 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-11>Исправление ошибок<a class=headerlink href=#bug-fix-11 title="Permanent link">&para;</a></h4> <ul> <li>Этот релиз также содержит все исправления безопасности ошибок от 19.11.9.52 и 19.11.10.54.</li> <li>Фиксированная гонка данных в <code>system.parts</code> стол и <code>ALTER</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer">#6245</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer">#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено несовпадение заголовков в потоках, произошедшее при чтении из пустой распределенной таблицы с sample и prewhere. <a href=https://github.com/ClickHouse/ClickHouse/issues/6167 rel="external nofollow noreferrer">#6167</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer">Лисян Цянь</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6823 rel="external nofollow noreferrer">#6823</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправлена ошибка при использовании <code>IN</code> предложение с подзапросом с кортежем. <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer">#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer">#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправьте случай с одинаковыми именами столбцов в <code>GLOBAL JOIN ON</code> раздел. <a href=https://github.com/ClickHouse/ClickHouse/pull/6181 rel="external nofollow noreferrer">#6181</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка при приведении типов к <code>Decimal</code> это не поддерживает его. Вместо этого бросьте исключение. <a href=https://github.com/ClickHouse/ClickHouse/pull/6297 rel="external nofollow noreferrer">#6297</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлен сбой в работе <code>extractAll()</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/6644 rel="external nofollow noreferrer">#6644</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Преобразование запроса для <code>MySQL</code>, <code>ODBC</code>, <code>JDBC</code> функции таблицы теперь работают правильно для <code>SELECT WHERE</code> запросы с несколькими <code>AND</code> выражения. <a href=https://github.com/ClickHouse/ClickHouse/issues/6381 rel="external nofollow noreferrer">#6381</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6676 rel="external nofollow noreferrer">#6676</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Добавлены предыдущие проверки деклараций для интеграции MySQL 8. <a href=https://github.com/ClickHouse/ClickHouse/pull/6569 rel="external nofollow noreferrer">#6569</a> (<a href=https://github.com/rafaeldtinoco rel="external nofollow noreferrer">Рафаэль Давид Тиноко</a>)</li> </ul> <h4 id=security-fix-1>Исправление безопасности<a class=headerlink href=#security-fix-1 title="Permanent link">&para;</a></h4> <ul> <li>Исправлены две уязвимости в кодеках на этапе декомпрессии (злоумышленник может сфабриковать сжатые данные, что приведет к переполнению буфера при декомпрессии). <a href=https://github.com/ClickHouse/ClickHouse/pull/6670 rel="external nofollow noreferrer">#6670</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h3 id=clickhouse-release-19-13-3-26-2019-08-22>ClickHouse релиз 19.13.3.26, 2019-08-22<a class=headerlink href=#clickhouse-release-19-13-3-26-2019-08-22 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-12>Исправление ошибок<a class=headerlink href=#bug-fix-12 title="Permanent link">&para;</a></h4> <ul> <li>Чинить <code>ALTER TABLE ... UPDATE</code> запрос для таблиц с <code>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer">#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте NPE при использовании предложения IN с подзапросом с кортежем. <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer">#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer">#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлена проблема, что если устаревшая реплика становится живой, она все еще может содержать части данных, которые были удалены разделом DROP. <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer">#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer">#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлена проблема с синтаксическим анализом CSV <a href=https://github.com/ClickHouse/ClickHouse/issues/6426 rel="external nofollow noreferrer">#6426</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6559 rel="external nofollow noreferrer">#6559</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлена гонка данных в системе.таблица деталей и запрос ALTER. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer">#6245</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer">#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлен неправильный код в мутациях, которые могут привести к повреждению памяти. Исправлена обработка выхода онлайн / оффлайн чтения адреса <code>0x14c0</code> это может произойти из-за совпадения <code>DROP TABLE</code> и <code>SELECT</code> от <code>system.parts</code> или <code>system.parts_columns</code>. Фиксированное состояние расы при подготовке запросов мутаций. Исправлена тупиковая ситуация, вызванная <code>OPTIMIZE</code> реплицированных таблиц и параллельных операций модификации, таких как ALTERs. <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer">#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена возможная потеря данных после этого <code>ALTER DELETE</code> запрос на таблицу с пропущенным индексом. <a href=https://github.com/ClickHouse/ClickHouse/issues/6224 rel="external nofollow noreferrer">#6224</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6282 rel="external nofollow noreferrer">#6282</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> </ul> <h4 id=security-fix-2>Исправление безопасности<a class=headerlink href=#security-fix-2 title="Permanent link">&para;</a></h4> <ul> <li>Если злоумышленник имеет доступ на запись в ZooKeeper и может запустить пользовательский сервер, доступный из сети, где работает ClickHouse, он может создать пользовательский вредоносный сервер, который будет действовать как реплика ClickHouse, и зарегистрировать его в ZooKeeper. Когда другая реплика будет извлекать часть данных из вредоносной реплики, она может заставить clickhouse-сервер выполнить запись в произвольный путь на файловой системе. Найдено Эльдаром Зайтовым, специалистом по информационной безопасности Яндекса. <a href=https://github.com/ClickHouse/ClickHouse/pull/6247 rel="external nofollow noreferrer">#6247</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-13-2-19-2019-08-14>ClickHouse релиз 19.13.2.19, 2019-08-14<a class=headerlink href=#clickhouse-release-19-13-2-19-2019-08-14 title="Permanent link">&para;</a></h3> <h4 id=new-feature-5>Новая функция<a class=headerlink href=#new-feature-5 title="Permanent link">&para;</a></h4> <ul> <li>Профилировщик выборки на уровне запроса. <a href=https://gist.github.com/alexey-milovidov/92758583dd41c24c360fdb8d6a4da194 rel="external nofollow noreferrer">Пример</a>. <a href=https://github.com/ClickHouse/ClickHouse/issues/4247 rel="external nofollow noreferrer">#4247</a> (<a href=https://github.com/laplab rel="external nofollow noreferrer">лаплаб</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6124 rel="external nofollow noreferrer">#6124</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6250 rel="external nofollow noreferrer">#6250</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6283 rel="external nofollow noreferrer">#6283</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6386 rel="external nofollow noreferrer">#6386</a></li> <li>Разрешить указывать список столбцов с помощью <code>COLUMNS('regexp')</code> выражение, которое работает как более сложный вариант <code>*</code> звездочка. <a href=https://github.com/ClickHouse/ClickHouse/pull/5951 rel="external nofollow noreferrer">#5951</a> (<a href=https://github.com/mfridental rel="external nofollow noreferrer">мфриденталь</a>), (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>CREATE TABLE AS table_function()</code> теперь возможный <a href=https://github.com/ClickHouse/ClickHouse/pull/6057 rel="external nofollow noreferrer">#6057</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Adam optimizer для стохастического градиентного спуска используется по умолчанию в <code>stochasticLinearRegression()</code> и <code>stochasticLogisticRegression()</code> агрегатные функции, потому что он показывает хорошее качество почти без какой-либо настройки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6000 rel="external nofollow noreferrer">#6000</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer">Quid37</a>)</li> <li>Added functions for working with the сustom week number <a href=https://github.com/ClickHouse/ClickHouse/pull/5212 rel="external nofollow noreferrer">#5212</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer">Энди Янг</a>)</li> <li><code>RENAME</code> запросы теперь работают со всеми хранилищами. <a href=https://github.com/ClickHouse/ClickHouse/pull/5953 rel="external nofollow noreferrer">#5953</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Теперь клиент получает журналы с сервера с любым желаемым уровнем настройки <code>send_logs_level</code> независимо от уровня журнала, указанного в настройках сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/5964 rel="external nofollow noreferrer">#5964</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Никита Михайлов</a>)</li> </ul> <h4 id=backward-incompatible-change-4>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change-4 title="Permanent link">&para;</a></h4> <ul> <li>Установка <code>input_format_defaults_for_omitted_fields</code> по умолчанию он включен. Вставки в распределенные таблицы требуют, чтобы этот параметр был одинаковым в кластере (его необходимо установить перед развертыванием обновления). Он позволяет вычислять сложные выражения по умолчанию для пропущенных полей в <code>JSONEachRow</code> и <code>CSV*</code> форматы. Это должно быть ожидаемое поведение, но может привести к незначительной разнице в производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/6043 rel="external nofollow noreferrer">#6043</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>), <a href=https://github.com/ClickHouse/ClickHouse/pull/5625 rel="external nofollow noreferrer">#5625</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> </ul> <h4 id=experimental-features>Экспериментальная возможность<a class=headerlink href=#experimental-features title="Permanent link">&para;</a></h4> <ul> <li>Новый конвейер обработки запросов. Воспользуйся <code>experimental_use_processors=1</code> возможность включить его. Используй для своих собственных проблем. <a href=https://github.com/ClickHouse/ClickHouse/pull/4914 rel="external nofollow noreferrer">#4914</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> </ul> <h4 id=bug-fix-13>Исправление ошибок<a class=headerlink href=#bug-fix-13 title="Permanent link">&para;</a></h4> <ul> <li>Интеграция Кафки была исправлена в этой версии.</li> <li>Исправлено <code>DoubleDelta</code> кодирование данных <code>Int64</code> для больших <code>DoubleDelta</code> значения, улучшенные <code>DoubleDelta</code> кодирование случайных данных для <code>Int32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5998 rel="external nofollow noreferrer">#5998</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Исправлена завышенная оценка стоимости <code>max_rows_to_read</code> если установка <code>merge_tree_uniform_read_distribution</code> имеет значение 0. <a href=https://github.com/ClickHouse/ClickHouse/pull/6019 rel="external nofollow noreferrer">#6019</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=improvement-4>Улучшение<a class=headerlink href=#improvement-4 title="Permanent link">&para;</a></h4> <ul> <li>Создает исключение, если <code>config.d</code> файл не имеет соответствующего корневого элемента в качестве файла конфигурации <a href=https://github.com/ClickHouse/ClickHouse/pull/6123 rel="external nofollow noreferrer">#6123</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> </ul> <h4 id=performance-improvement-3>Улучшение производительности<a class=headerlink href=#performance-improvement-3 title="Permanent link">&para;</a></h4> <ul> <li>Оптимизировать <code>count()</code>. Теперь он использует самый маленький столбец (если это возможно). <a href=https://github.com/ClickHouse/ClickHouse/pull/6028 rel="external nofollow noreferrer">#6028</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-5>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-5 title="Permanent link">&para;</a></h4> <ul> <li>Отчет об использовании памяти в тестах производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/5899 rel="external nofollow noreferrer">#5899</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Исправление построения с внешним <code>libcxx</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/6010 rel="external nofollow noreferrer">#6010</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправить общую сборку с помощью <code>rdkafka</code> библиотека <a href=https://github.com/ClickHouse/ClickHouse/pull/6101 rel="external nofollow noreferrer">#6101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h2 id=clickhouse-release-19-11>ClickHouse релиз 19.11<a class=headerlink href=#clickhouse-release-19-11 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-11-13-74-2019-11-01>ClickHouse релиз 19.11.13.74, 2019-11-01<a class=headerlink href=#clickhouse-release-19-11-13-74-2019-11-01 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-14>Исправление ошибок<a class=headerlink href=#bug-fix-14 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена редкая авария в системе <code>ALTER MODIFY COLUMN</code> и вертикальное слияние, когда одна из Объединенных/измененных частей пуста (0 строк). <a href=https://github.com/ClickHouse/ClickHouse/pull/6780 rel="external nofollow noreferrer">#6780</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Ручное обновление данных <code>SIMDJSON</code>. Это устраняет возможные наводнения в stderr файлы с поддельными диагностическими сообщениями в формате JSON. <a href=https://github.com/ClickHouse/ClickHouse/pull/7548 rel="external nofollow noreferrer">#7548</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр казаков</a>)</li> <li>Исправлена ошибка с <code>mrk</code> расширение файла для мутаций (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> </ul> <h3 id=clickhouse-release-19-11-12-69-2019-10-02>ClickHouse релиз 19.11.12.69, 2019-10-02<a class=headerlink href=#clickhouse-release-19-11-12-69-2019-10-02 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-15>Исправление ошибок<a class=headerlink href=#bug-fix-15 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено снижение производительности индексного анализа по сложным ключам на больших таблицах. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6924 rel="external nofollow noreferrer">#6924</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7075 rel="external nofollow noreferrer">#7075</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Избегайте редких SIGSEGV при отправке данных в таблицах с распределенным движком (<code>Failed to send batch: file with index XXXXX is absent</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/7032 rel="external nofollow noreferrer">#7032</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Чинить <code>Unknown identifier</code> с несколькими соединениями. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5254 rel="external nofollow noreferrer">#5254</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7022 rel="external nofollow noreferrer">#7022</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h3 id=clickhouse-release-19-11-11-57-2019-09-13>ClickHouse релиз 19.11.11.57, 2019-09-13<a class=headerlink href=#clickhouse-release-19-11-11-57-2019-09-13 title="Permanent link">&para;</a></h3> <ul> <li>Исправлена логическая ошибка, вызывающая segfaults при выборе из Кафки пустой темы. <a href=https://github.com/ClickHouse/ClickHouse/issues/6902 rel="external nofollow noreferrer">#6902</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6909 rel="external nofollow noreferrer">#6909</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправление для функции <code>АrrayEnumerateUniqRanked</code> с пустыми массивами в парах. <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer">#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h3 id=clickhouse-release-19-11-10-54-2019-09-10>ClickHouse релиз 19.11.10.54, 2019-09-10<a class=headerlink href=#clickhouse-release-19-11-10-54-2019-09-10 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-16>Исправление ошибок<a class=headerlink href=#bug-fix-16 title="Permanent link">&para;</a></h4> <ul> <li>Сохраняйте смещения для сообщений Кафки вручную, чтобы иметь возможность фиксировать их все сразу для всех разделов. Исправляет потенциальное дублирование в «one consumer - many partitions» сценарий. <a href=https://github.com/ClickHouse/ClickHouse/pull/6872 rel="external nofollow noreferrer">#6872</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h3 id=clickhouse-release-19-11-9-52-2019-09-6>ClickHouse релиз 19.11.9.52, 2019-09-6<a class=headerlink href=#clickhouse-release-19-11-9-52-2019-09-6 title="Permanent link">&para;</a></h3> <ul> <li>Улучшена обработка ошибок в словарях кэша. <a href=https://github.com/ClickHouse/ClickHouse/pull/6737 rel="external nofollow noreferrer">#6737</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправлена ошибка в функции <code>arrayEnumerateUniqRanked</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6779 rel="external nofollow noreferrer">#6779</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Чинить <code>JSONExtract</code> функция при извлечении <code>Tuple</code> из JSON. <a href=https://github.com/ClickHouse/ClickHouse/pull/6718 rel="external nofollow noreferrer">#6718</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправлена возможная потеря данных после этого <code>ALTER DELETE</code> запрос на таблицу с пропущенным индексом. <a href=https://github.com/ClickHouse/ClickHouse/issues/6224 rel="external nofollow noreferrer">#6224</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6282 rel="external nofollow noreferrer">#6282</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Исправлена проверка производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/6392 rel="external nofollow noreferrer">#6392</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Паркет: исправьте чтение логических столбцов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6579 rel="external nofollow noreferrer">#6579</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено неправильное поведение <code>nullIf</code> функция для постоянных аргументов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6518 rel="external nofollow noreferrer">#6518</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6580 rel="external nofollow noreferrer">#6580</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена проблема дублирования сообщений Кафки при обычном перезапуске сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/6597 rel="external nofollow noreferrer">#6597</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлена ошибка, когда долго <code>ALTER UPDATE</code> или <code>ALTER DELETE</code> может помешать запуску регулярных слияний. Предотвратите выполнение мутаций, если нет достаточного количества свободных потоков. <a href=https://github.com/ClickHouse/ClickHouse/issues/6502 rel="external nofollow noreferrer">#6502</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6617 rel="external nofollow noreferrer">#6617</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлена ошибка при обработке данных «timezone» в файле конфигурации сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/6709 rel="external nofollow noreferrer">#6709</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте тесты Кафки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6805 rel="external nofollow noreferrer">#6805</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h4 id=security-fix-3>Исправление безопасности<a class=headerlink href=#security-fix-3 title="Permanent link">&para;</a></h4> <ul> <li>Если злоумышленник имеет доступ на запись в ZooKeeper и может запустить пользовательский сервер, доступный из сети, где работает ClickHouse, он может создать пользовательский вредоносный сервер, который будет действовать как реплика ClickHouse, и зарегистрировать его в ZooKeeper. Когда другая реплика будет извлекать часть данных из вредоносной реплики, она может заставить clickhouse-сервер выполнить запись в произвольный путь на файловой системе. Найдено Эльдаром Зайтовым, специалистом по информационной безопасности Яндекса. <a href=https://github.com/ClickHouse/ClickHouse/pull/6247 rel="external nofollow noreferrer">#6247</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-11-8-46-2019-08-22>ClickHouse релиз 19.11.8.46, 2019-08-22<a class=headerlink href=#clickhouse-release-19-11-8-46-2019-08-22 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-17>Исправление ошибок<a class=headerlink href=#bug-fix-17 title="Permanent link">&para;</a></h4> <ul> <li>Чинить <code>ALTER TABLE ... UPDATE</code> запрос для таблиц с <code>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer">#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте NPE при использовании предложения IN с подзапросом с кортежем. <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer">#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer">#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлена проблема, что если устаревшая реплика становится живой, она все еще может содержать части данных, которые были удалены разделом DROP. <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer">#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer">#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлена проблема с синтаксическим анализом CSV <a href=https://github.com/ClickHouse/ClickHouse/issues/6426 rel="external nofollow noreferrer">#6426</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6559 rel="external nofollow noreferrer">#6559</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">тавплубикс</a>)</li> <li>Исправлена гонка данных в системе.таблица деталей и запрос ALTER. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer">#6245</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer">#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлен неправильный код в мутациях, которые могут привести к повреждению памяти. Исправлена обработка выхода онлайн / оффлайн чтения адреса <code>0x14c0</code> это может произойти из-за совпадения <code>DROP TABLE</code> и <code>SELECT</code> от <code>system.parts</code> или <code>system.parts_columns</code>. Фиксированное состояние расы при подготовке запросов мутаций. Исправлена тупиковая ситуация, вызванная <code>OPTIMIZE</code> реплицированных таблиц и параллельных операций модификации, таких как ALTERs. <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer">#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-11-7-40-2019-08-14>ClickHouse релиз 19.11.7.40, 2019-08-14<a class=headerlink href=#clickhouse-release-19-11-7-40-2019-08-14 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-18>Исправление ошибок<a class=headerlink href=#bug-fix-18 title="Permanent link">&para;</a></h4> <ul> <li>Интеграция Кафки была исправлена в этой версии.</li> <li>Исправлена обработка выхода онлайн / оффлайн при использовании <code>arrayReduce</code> для постоянных споров. <a href=https://github.com/ClickHouse/ClickHouse/pull/6326 rel="external nofollow noreferrer">#6326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено <code>toFloat()</code> монотонность. <a href=https://github.com/ClickHouse/ClickHouse/pull/6374 rel="external nofollow noreferrer">#6374</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн с поддержкой <code>optimize_skip_unused_shards</code> и пропал ключ от осколков. <a href=https://github.com/ClickHouse/ClickHouse/pull/6384 rel="external nofollow noreferrer">#6384</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">CurtizJ</a>)</li> <li>Фиксированная логика работы <code>arrayEnumerateUniqRanked</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/6423 rel="external nofollow noreferrer">#6423</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Удалено дополнительное подробное ведение журнала из обработчика MySQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/6389 rel="external nofollow noreferrer">#6389</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить неправильное поведение и возможные вылеты в <code>topK</code> и <code>topKWeighted</code> агрегированные функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/6404 rel="external nofollow noreferrer">#6404</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">CurtizJ</a>)</li> <li>Не выставляйте виртуальные столбцы в <code>system.columns</code> стол. Это необходимо для обратной совместимости. <a href=https://github.com/ClickHouse/ClickHouse/pull/6406 rel="external nofollow noreferrer">#6406</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка с выделением памяти для строковых полей в сложном словаре кэша ключей. <a href=https://github.com/ClickHouse/ClickHouse/pull/6447 rel="external nofollow noreferrer">#6447</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка с включением адаптивной детализации при создании новой реплики для <code>Replicated*MergeTree</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/pull/6452 rel="external nofollow noreferrer">#6452</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте бесконечный цикл при чтении сообщений Кафки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6354 rel="external nofollow noreferrer">#6354</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">abyss7</a>)</li> <li>Исправлена возможность готовых запрос, чтобы вызвать падение сервера из-за переполнения стека в парсер SQL и возможность переполнения стека в <code>Merge</code> и <code>Distributed</code> таблицы <a href=https://github.com/ClickHouse/ClickHouse/pull/6433 rel="external nofollow noreferrer">#6433</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка кодирования горилл на небольших последовательностях. <a href=https://github.com/ClickHouse/ClickHouse/pull/6444 rel="external nofollow noreferrer">#6444</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Enmk</a>)</li> </ul> <h4 id=improvement-5>Улучшение<a class=headerlink href=#improvement-5 title="Permanent link">&para;</a></h4> <ul> <li>Позволяет пользователю переопределить <code>poll_interval</code> и <code>idle_connection_timeout</code> настройки при подключении. <a href=https://github.com/ClickHouse/ClickHouse/pull/6230 rel="external nofollow noreferrer">#6230</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-11-5-28-2019-08-05>ClickHouse релиз 19.11.5.28, 2019-08-05<a class=headerlink href=#clickhouse-release-19-11-5-28-2019-08-05 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-19>Исправление ошибок<a class=headerlink href=#bug-fix-19 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена возможность зависания запросов при перегрузке сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/6301 rel="external nofollow noreferrer">#6301</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте FPE в функции yandexConsistentHash. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6304 rel="external nofollow noreferrer">#6304</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer">#6126</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка в преобразовании <code>LowCardinality</code> напечатать <code>AggregateFunctionFactory</code>. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6257 rel="external nofollow noreferrer">#6257</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6281 rel="external nofollow noreferrer">#6281</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправьте синтаксический анализ <code>bool</code> настройки от <code>true</code> и <code>false</code> строки в файлах конфигурации. <a href=https://github.com/ClickHouse/ClickHouse/pull/6278 rel="external nofollow noreferrer">#6278</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена редкая ошибка с несовместимыми заголовками потока в запросах к <code>Distributed</code> стол <code>MergeTree</code> таблица, когда часть <code>WHERE</code> движется к <code>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6236 rel="external nofollow noreferrer">#6236</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено переполнение при целочисленном делении знакового типа на беззнаковый. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6214 rel="external nofollow noreferrer">#6214</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6233 rel="external nofollow noreferrer">#6233</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=backward-incompatible-change-5>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change-5 title="Permanent link">&para;</a></h4> <ul> <li><code>Kafka</code> все еще сломанный.</li> </ul> <h3 id=clickhouse-release-19-11-4-24-2019-08-01>ClickHouse релиз 19.11.4.24, 2019-08-01<a class=headerlink href=#clickhouse-release-19-11-4-24-2019-08-01 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-20>Исправление ошибок<a class=headerlink href=#bug-fix-20 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка с написанием вторичных индексных меток с адаптивной детализацией. <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer">#6126</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Чинить <code>WITH ROLLUP</code> и <code>WITH CUBE</code> модификаторы <code>GROUP BY</code> с двухуровневой агрегацией. <a href=https://github.com/ClickHouse/ClickHouse/pull/6225 rel="external nofollow noreferrer">#6225</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлено зависание <code>JSONExtractRaw</code> функция. Исправлено <a href=https://github.com/ClickHouse/ClickHouse/issues/6195 rel="external nofollow noreferrer">#6195</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6198 rel="external nofollow noreferrer">#6198</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка segfault в ExternalLoader:: reloadOutdated (). <a href=https://github.com/ClickHouse/ClickHouse/pull/6082 rel="external nofollow noreferrer">#6082</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправлен случай, когда сервер может закрыть прослушивающие сокеты, но не выключаться и продолжать обслуживать оставшиеся запросы. В конечном итоге вы можете получить два запущенных процесса clickhouse-server. Иногда сервер может выдать ошибку <code>bad_function_call</code> для остальных запросов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6231 rel="external nofollow noreferrer">#6231</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено бесполезное и некорректное условие на поле update для начальной загрузки внешних словарей через ODBC, MySQL, ClickHouse и HTTP. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/6069 rel="external nofollow noreferrer">#6069</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6083 rel="external nofollow noreferrer">#6083</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено неуместное исключение в приведении <code>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn't contain Nulls (e.g. in query like <code>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6094 rel="external nofollow noreferrer">#6094</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6119 rel="external nofollow noreferrer">#6119</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Зафиксировать недетерминированный результат «uniq» агрегатная функция в крайне редких случаях. Ошибка присутствовала во всех версиях ClickHouse. <a href=https://github.com/ClickHouse/ClickHouse/pull/6058 rel="external nofollow noreferrer">#6058</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Обработка выхода онлайн / оффлайн, когда мы немного завышены запись на функцию <code>IPv6CIDRToRange</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6068 rel="external nofollow noreferrer">#6068</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Исправлена небольшая утечка памяти, когда сервер выбрасывает много исключений из многих различных контекстов. <a href=https://github.com/ClickHouse/ClickHouse/pull/6144 rel="external nofollow noreferrer">#6144</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте ситуацию, когда потребитель сделал паузу перед подпиской и не возобновил ее после этого. <a href=https://github.com/ClickHouse/ClickHouse/pull/6075 rel="external nofollow noreferrer">#6075</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>) Обратите внимание, что Кафка разбит в этой версии.</li> <li>Очистка буфера данных Кафки от предыдущей операции чтения, которая была завершена с ошибкой <a href=https://github.com/ClickHouse/ClickHouse/pull/6026 rel="external nofollow noreferrer">#6026</a> (<a href=https://github.com/bopohaa rel="external nofollow noreferrer">Николай</a>) Обратите внимание, что Кафка разбит в этой версии.</li> <li>С <code>StorageMergeTree::background_task_handle</code> инициализируется в <code>startup()</code> то <code>MergeTreeBlockOutputStream::write()</code> возможно, вы попытаетесь использовать его перед инициализацией. Просто проверьте, инициализирован ли он. <a href=https://github.com/ClickHouse/ClickHouse/pull/6080 rel="external nofollow noreferrer">#6080</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-6>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-6 title="Permanent link">&para;</a></h4> <ul> <li>Добавлено официальное лицо <code>rpm</code> пакеты. <a href=https://github.com/ClickHouse/ClickHouse/pull/5740 rel="external nofollow noreferrer">#5740</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>) (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавьте возможность строить <code>.rpm</code> и <code>.tgz</code> пакеты с <code>packager</code> скрипт. <a href=https://github.com/ClickHouse/ClickHouse/pull/5769 rel="external nofollow noreferrer">#5769</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправления для «Arcadia» система сборки. <a href=https://github.com/ClickHouse/ClickHouse/pull/6223 rel="external nofollow noreferrer">#6223</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=backward-incompatible-change-6>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change-6 title="Permanent link">&para;</a></h4> <ul> <li><code>Kafka</code> сломан в этой версии.</li> </ul> <h3 id=clickhouse-release-19-11-3-11-2019-07-18>ClickHouse релиз 19.11.3.11, 2019-07-18<a class=headerlink href=#clickhouse-release-19-11-3-11-2019-07-18 title="Permanent link">&para;</a></h3> <h4 id=new-feature-6>Новая функция<a class=headerlink href=#new-feature-6 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена поддержка подготовленных заявлений. <a href=https://github.com/ClickHouse/ClickHouse/pull/5331/ rel="external nofollow noreferrer">#5331</a> (<a href=https://github.com/sanych73 rel="external nofollow noreferrer">Александр</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5630 rel="external nofollow noreferrer">#5630</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>DoubleDelta</code> и <code>Gorilla</code> кодеки столбцов <a href=https://github.com/ClickHouse/ClickHouse/pull/5600 rel="external nofollow noreferrer">#5600</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Добавлен <code>os_thread_priority</code> настройка, позволяющая контролировать «nice» значение потоков обработки запросов, используемых ОС для настройки приоритета динамического планирования. Для этого требуется <code>CAP_SYS_NICE</code> возможности для работы. Это орудия труда <a href=https://github.com/ClickHouse/ClickHouse/issues/5858 rel="external nofollow noreferrer">#5858</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5909 rel="external nofollow noreferrer">#5909</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Осуществлять <code>_topic</code>, <code>_offset</code>, <code>_key</code> колонны для двигателя Кафки <a href=https://github.com/ClickHouse/ClickHouse/pull/5382 rel="external nofollow noreferrer">#5382</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>) Обратите внимание, что Кафка разбит в этой версии.</li> <li>Добавить комбинатор агрегатных функций <code>-Resample</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5590 rel="external nofollow noreferrer">#5590</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Статистическая функция <code>groupArrayMovingSum(win_size)(x)</code> и <code>groupArrayMovingAvg(win_size)(x)</code>, которые вычисляют движущуюся сумму / среднее значение с ограничением размера окна или без него. <a href=https://github.com/ClickHouse/ClickHouse/pull/5595 rel="external nofollow noreferrer">#5595</a> (<a href=https://github.com/inv2004 rel="external nofollow noreferrer">inv2004</a>)</li> <li>Добавить синоним <code>arrayFlatten</code> \&lt;-> <code>flatten</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5764 rel="external nofollow noreferrer">#5764</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Функция сделала из intergate Н3 <code>geoToH3</code> от Uber. <a href=https://github.com/ClickHouse/ClickHouse/pull/4724 rel="external nofollow noreferrer">#4724</a> (<a href=https://github.com/BHYCHIK rel="external nofollow noreferrer">Ремен Иван</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5805 rel="external nofollow noreferrer">#5805</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=bug-fix-21>Исправление ошибок<a class=headerlink href=#bug-fix-21 title="Permanent link">&para;</a></h4> <ul> <li>Реализуйте кэш DNS с асинхронным обновлением. Отдельный поток разрешает все хосты и обновляет кэш DNS с периодом (настройка <code>dns_cache_update_period</code>). Это должно помочь, когда ip хостов часто меняется. <a href=https://github.com/ClickHouse/ClickHouse/pull/5857 rel="external nofollow noreferrer">#5857</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в <code>Delta</code> кодек, который влияет на столбцы со значениями размером менее 32 бит. Ошибка привела к случайному повреждению памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/5786 rel="external nofollow noreferrer">#5786</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в TTL слиться с не-физической столбцов в блоке. <a href=https://github.com/ClickHouse/ClickHouse/pull/5819 rel="external nofollow noreferrer">#5819</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлена редкая ошибка при проверке деталей с помощью <code>LowCardinality</code> колонка. Ранее <code>checkDataPart</code> всегда терпит неудачу при расставании с <code>LowCardinality</code> колонка. <a href=https://github.com/ClickHouse/ClickHouse/pull/5832 rel="external nofollow noreferrer">#5832</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Избегайте зависания соединений, когда пул потоков сервера заполнен. Это важно для соединений от <code>remote</code> табличная функция или соединения с сегментом без реплик при длительном таймауте соединения. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5878 rel="external nofollow noreferrer">#5878</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5881 rel="external nofollow noreferrer">#5881</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Поддержка постоянных аргументов для того, чтобы <code>evalMLModel</code> функция. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5817 rel="external nofollow noreferrer">#5817</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5820 rel="external nofollow noreferrer">#5820</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка, когда ClickHouse определяет часовой пояс по умолчанию как <code>UCT</code> вместо <code>UTC</code>. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5804 rel="external nofollow noreferrer">#5804</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5828 rel="external nofollow noreferrer">#5828</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Фиксированный нижний поток буфера в <code>visitParamExtractRaw</code>. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5901 rel="external nofollow noreferrer">#5901</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5902 rel="external nofollow noreferrer">#5902</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Сейчас распространены <code>DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER</code> запросы будут выполняться непосредственно на реплике лидера. <a href=https://github.com/ClickHouse/ClickHouse/pull/5757 rel="external nofollow noreferrer">#5757</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Чинить <code>coalesce</code> для <code>ColumnConst</code> с <code>ColumnNullable</code> + соответствующие изменения. <a href=https://github.com/ClickHouse/ClickHouse/pull/5755 rel="external nofollow noreferrer">#5755</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправьте это <code>ReadBufferFromKafkaConsumer</code> так что он продолжает читать новые сообщения после этого <code>commit()</code> даже если он был остановлен раньше <a href=https://github.com/ClickHouse/ClickHouse/pull/5852 rel="external nofollow noreferrer">#5852</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Чинить <code>FULL</code> и <code>RIGHT</code> Результаты соединения при присоединении на <code>Nullable</code> ключи в правой таблице. <a href=https://github.com/ClickHouse/ClickHouse/pull/5859 rel="external nofollow noreferrer">#5859</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Возможно исправление бесконечного сна низкоприоритетных запросов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5842 rel="external nofollow noreferrer">#5842</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено состояние гонки, которое приводит к тому, что некоторые запросы могут не отображаться в query_log после <code>SYSTEM FLUSH LOGS</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/issues/5456 rel="external nofollow noreferrer">#5456</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5685 rel="external nofollow noreferrer">#5685</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлено <code>heap-use-after-free</code> Предупреждение ASan в ClusterCopier вызвано часами, которые пытаются использовать уже удаленный объект copier. <a href=https://github.com/ClickHouse/ClickHouse/pull/5871 rel="external nofollow noreferrer">#5871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправлена ошибка <code>StringRef</code> указатель, возвращаемый некоторыми реализациями <code>IColumn::deserializeAndInsertFromArena</code>. Эта ошибка затронула только модульные тесты. <a href=https://github.com/ClickHouse/ClickHouse/pull/5973 rel="external nofollow noreferrer">#5973</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Не допускайте соединения исходного и промежуточного массива со столбцами маскировки одноименных столбцов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5941 rel="external nofollow noreferrer">#5941</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка вставки и выбора запроса к движку MySQL с цитированием идентификатора стиля MySQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/5704 rel="external nofollow noreferrer">#5704</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Сейчас <code>CHECK TABLE</code> запрос может работать с семейством движков MergeTree. Он возвращает статус проверки и сообщение, если таковые имеются для каждой детали (или файла в случае более простых движков). Кроме того, Исправлена ошибка в извлечении сломанной детали. <a href=https://github.com/ClickHouse/ClickHouse/pull/5865 rel="external nofollow noreferrer">#5865</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена среда выполнения SPLIT_SHARED_LIBRARIES <a href=https://github.com/ClickHouse/ClickHouse/pull/5793 rel="external nofollow noreferrer">#5793</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Инициализация фиксированного часового пояса когда <code>/etc/localtime</code> это относительная ссылка, как <code>../usr/share/zoneinfo/Europe/Moscow</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5922 rel="external nofollow noreferrer">#5922</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>clickhouse-копир: исправлена использования после освобождения при завершении работы <a href=https://github.com/ClickHouse/ClickHouse/pull/5752 rel="external nofollow noreferrer">#5752</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Обновленный <code>simdjson</code>. Исправлена проблема, из-за которой некоторые недопустимые JSONs с нулевыми байтами успешно разбирались. <a href=https://github.com/ClickHouse/ClickHouse/pull/5938 rel="external nofollow noreferrer">#5938</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено отключение системных журналов <a href=https://github.com/ClickHouse/ClickHouse/pull/5802 rel="external nofollow noreferrer">#5802</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправьте зависание, когда условие в invalidate_query зависит от словаря. <a href=https://github.com/ClickHouse/ClickHouse/pull/6011 rel="external nofollow noreferrer">#6011</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> </ul> <h4 id=improvement-6>Улучшение<a class=headerlink href=#improvement-6 title="Permanent link">&para;</a></h4> <ul> <li>Разрешить неразрешимые адреса в конфигурации кластера. Они будут считаться недоступными и пытаться разрешить их при каждой попытке подключения. Это особенно полезно для Kubernetes. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5714 rel="external nofollow noreferrer">#5714</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5924 rel="external nofollow noreferrer">#5924</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Закройте неработающие TCP-соединения (по умолчанию с таймаутом в один час). Это особенно важно для больших кластеров с несколькими распределенными таблицами на каждом сервере, поскольку каждый сервер может содержать пул соединений с каждым другим сервером, и после пикового параллелизма запросов соединения будут останавливаться. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5879 rel="external nofollow noreferrer">#5879</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5880 rel="external nofollow noreferrer">#5880</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Более лучшее качество <code>topK</code> функция. Изменено поведение набора SavingSpace для удаления последнего элемента, если новый элемент имеет больший вес. <a href=https://github.com/ClickHouse/ClickHouse/issues/5833 rel="external nofollow noreferrer">#5833</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5850 rel="external nofollow noreferrer">#5850</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Функции URL для работы с доменами теперь могут работать для неполных url без схемы <a href=https://github.com/ClickHouse/ClickHouse/pull/5725 rel="external nofollow noreferrer">#5725</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Контрольные суммы, добавленные к <code>system.parts_columns</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/pull/5874 rel="external nofollow noreferrer">#5874</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Никита Михайлов</a>)</li> <li>Добавлен <code>Enum</code> тип данных как синоним для <code>Enum8</code> или <code>Enum16</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5886 rel="external nofollow noreferrer">#5886</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Полный вариант транспонирования битов для <code>T64</code> кодек. Может привести к лучшему сжатию с помощью <code>zstd</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5742 rel="external nofollow noreferrer">#5742</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Состояние на <code>startsWith</code> функция теперь может использовать первичный ключ. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5310 rel="external nofollow noreferrer">#5310</a> и <a href=https://github.com/ClickHouse/ClickHouse/issues/5882 rel="external nofollow noreferrer">#5882</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5919 rel="external nofollow noreferrer">#5919</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer">dimarub2000</a>)</li> <li>Разрешить использовать <code>clickhouse-copier</code> с перекрестной репликацией кластерной топологии, разрешив пустое имя базы данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/5745 rel="external nofollow noreferrer">#5745</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer">nvartolomei</a>)</li> <li>Воспользуйся <code>UTC</code> как часовой пояс по умолчанию в системе без <code>tzdata</code> (e.g. bare Docker container). Before this patch, error message <code>Could not determine local time zone</code> была напечатана, и сервер или клиент отказались запускаться. <a href=https://github.com/ClickHouse/ClickHouse/pull/5827 rel="external nofollow noreferrer">#5827</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Возвращенная назад поддержка аргумента с плавающей запятой в функции <code>quantileTiming</code> для обратной совместимости. <a href=https://github.com/ClickHouse/ClickHouse/pull/5911 rel="external nofollow noreferrer">#5911</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Показать, в какой таблице отсутствует столбец в сообщениях об ошибках. <a href=https://github.com/ClickHouse/ClickHouse/pull/5768 rel="external nofollow noreferrer">#5768</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Запретить выполнение запроса с одинаковым идентификатором query_id разными пользователями <a href=https://github.com/ClickHouse/ClickHouse/pull/5430 rel="external nofollow noreferrer">#5430</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Более надежный код для отправки метрик в графит. Он будет работать даже во время длительного многократного использования <code>RENAME TABLE</code> операция. <a href=https://github.com/ClickHouse/ClickHouse/pull/5875 rel="external nofollow noreferrer">#5875</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Более информативные сообщения об ошибках будут отображаться, когда ThreadPool не может запланировать выполнение задачи. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5305 rel="external nofollow noreferrer">#5305</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5801 rel="external nofollow noreferrer">#5801</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Инвертирование ngramSearch, чтобы быть более интуитивным <a href=https://github.com/ClickHouse/ClickHouse/pull/5807 rel="external nofollow noreferrer">#5807</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Добавить пользователя parsing в HDFS engine builder <a href=https://github.com/ClickHouse/ClickHouse/pull/5946 rel="external nofollow noreferrer">#5946</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer">аконяев90</a>)</li> <li>Обновить значение по умолчанию <code>max_ast_elements parameter</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5933 rel="external nofollow noreferrer">#5933</a> (<a href=https://github.com/izebit rel="external nofollow noreferrer">Артем Коновалов</a>)</li> <li>Добавлено понятие устаревших настроек. Устаревшая настройка <code>allow_experimental_low_cardinality_type</code> может использоваться без какого-либо эффекта. <a href=https://github.com/ClickHouse/ClickHouse/commit/0f15c01c6802f7ce1a1494c12c846be8c98944cd rel="external nofollow noreferrer">0f15c01c6802f7ce1a1494c12c846be8c98944cd</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей Миловидов</a></li> </ul> <h4 id=performance-improvement-4>Улучшение производительности<a class=headerlink href=#performance-improvement-4 title="Permanent link">&para;</a></h4> <ul> <li>Увеличьте количество потоков для выбора из таблицы слияния для более равномерного распределения потоков. Добавлена настройка <code>max_streams_multiplier_for_merge_tables</code>. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5797 rel="external nofollow noreferrer">#5797</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5915 rel="external nofollow noreferrer">#5915</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-7>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-7 title="Permanent link">&para;</a></h4> <ul> <li>Добавьте тест обратной совместимости для взаимодействия клиент-сервер с различными версиями clickhouse. <a href=https://github.com/ClickHouse/ClickHouse/pull/5868 rel="external nofollow noreferrer">#5868</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Проверьте информацию о покрытии в каждом запросе фиксации и вытягивания. <a href=https://github.com/ClickHouse/ClickHouse/pull/5896 rel="external nofollow noreferrer">#5896</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Сотрудничайте с address sanitizer для поддержки наших пользовательских распределителей (<code>Arena</code> и <code>ArenaWithFreeLists</code>) для лучшей отладки «use-after-free» ошибки. <a href=https://github.com/ClickHouse/ClickHouse/pull/5728 rel="external nofollow noreferrer">#5728</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Переключитесь на <a href=https://github.com/llvm-mirror/libunwind rel="external nofollow noreferrer">Реализация LLVM libunwind</a> для обработки исключений C++ и для печати трассировок стека <a href=https://github.com/ClickHouse/ClickHouse/pull/4828 rel="external nofollow noreferrer">#4828</a> (<a href=https://github.com/laplab rel="external nofollow noreferrer">Никита Лапков</a>)</li> <li>Добавьте еще два предупреждения от -Weverything <a href=https://github.com/ClickHouse/ClickHouse/pull/5923 rel="external nofollow noreferrer">#5923</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Разрешите построить ClickHouse с дезинфицирующим средством для памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/3949 rel="external nofollow noreferrer">#3949</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлен отчет утилиты о <code>bitTest</code> функция в тест. <a href=https://github.com/ClickHouse/ClickHouse/pull/5943 rel="external nofollow noreferrer">#5943</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Настройки: добавлена возможность инициализации экземпляра ClickHouse, который требует проверки подлинности. <a href=https://github.com/ClickHouse/ClickHouse/pull/5727 rel="external nofollow noreferrer">#5727</a> (<a href=https://github.com/shurshun rel="external nofollow noreferrer">Корвяков Андрей Николаевич</a>)</li> <li>Librdkafka обновление до версии 1.1.0 <a href=https://github.com/ClickHouse/ClickHouse/pull/5872 rel="external nofollow noreferrer">#5872</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Добавьте глобальный тайм-аут для интеграционных тестов и отключите некоторые из них в коде тестов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5741 rel="external nofollow noreferrer">#5741</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте некоторые сбои ThreadSanitizer. <a href=https://github.com/ClickHouse/ClickHouse/pull/5854 rel="external nofollow noreferrer">#5854</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>То <code>--no-undefined</code> опция заставляет компоновщика проверять все внешние имена на наличие во время связывания. Очень полезно отслеживать реальные зависимости между библиотеками в режиме разделенной сборки. <a href=https://github.com/ClickHouse/ClickHouse/pull/5855 rel="external nofollow noreferrer">#5855</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Добавлен тест производительности для <a href=https://github.com/ClickHouse/ClickHouse/issues/5797 rel="external nofollow noreferrer">#5797</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5914 rel="external nofollow noreferrer">#5914</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена совместимость с gcc-7. <a href=https://github.com/ClickHouse/ClickHouse/pull/5840 rel="external nofollow noreferrer">#5840</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена поддержка gcc-9. Это исправление <a href=https://github.com/ClickHouse/ClickHouse/issues/5717 rel="external nofollow noreferrer">#5717</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5774 rel="external nofollow noreferrer">#5774</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка, когда libunwind может быть связан неправильно. <a href=https://github.com/ClickHouse/ClickHouse/pull/5948 rel="external nofollow noreferrer">#5948</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено несколько предупреждений, найденных PVS-Studio. <a href=https://github.com/ClickHouse/ClickHouse/pull/5921 rel="external nofollow noreferrer">#5921</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена начальная поддержка для <code>clang-tidy</code> статический анализатор. <a href=https://github.com/ClickHouse/ClickHouse/pull/5806 rel="external nofollow noreferrer">#5806</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Преобразование макросов BSD / Linux endian( ‘be64toh’ и ‘htobe64’) к эквивалентам Mac OS X <a href=https://github.com/ClickHouse/ClickHouse/pull/5785 rel="external nofollow noreferrer">#5785</a> (<a href=https://github.com/fredchenbj rel="external nofollow noreferrer">Фу Чен</a>)</li> <li>Улучшенное руководство по интеграционным тестам. <a href=https://github.com/ClickHouse/ClickHouse/pull/5796 rel="external nofollow noreferrer">#5796</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Исправление сборки на macosx + gcc9 <a href=https://github.com/ClickHouse/ClickHouse/pull/5822 rel="external nofollow noreferrer">#5822</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Исправьте трудноуловимую опечатку: aggreAGte - > aggregate. <a href=https://github.com/ClickHouse/ClickHouse/pull/5753 rel="external nofollow noreferrer">#5753</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Исправлена сборка freebsd <a href=https://github.com/ClickHouse/ClickHouse/pull/5760 rel="external nofollow noreferrer">#5760</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавить ссылку на экспериментальный канал YouTube на сайт <a href=https://github.com/ClickHouse/ClickHouse/pull/5845 rel="external nofollow noreferrer">#5845</a> (<a href=https://github.com/blinkov rel="external nofollow noreferrer">Иван Блинков</a>)</li> <li>CMake: добавить опцию для флагов покрытия: WITH_COVERAGE <a href=https://github.com/ClickHouse/ClickHouse/pull/5776 rel="external nofollow noreferrer">#5776</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправьте начальный размер некоторых встроенных подарков. <a href=https://github.com/ClickHouse/ClickHouse/pull/5787 rel="external nofollow noreferrer">#5787</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>clickhouse-сервер.postinst: исправлено обнаружение ОС для centos 6 <a href=https://github.com/ClickHouse/ClickHouse/pull/5788 rel="external nofollow noreferrer">#5788</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавлена генерация пакетов Arch linux. <a href=https://github.com/ClickHouse/ClickHouse/pull/5719 rel="external nofollow noreferrer">#5719</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарев</a>)</li> <li>Разделите Common / config.ч по библиотекам (СУБД) <a href=https://github.com/ClickHouse/ClickHouse/pull/5715 rel="external nofollow noreferrer">#5715</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправления для «Arcadia» построить платформу <a href=https://github.com/ClickHouse/ClickHouse/pull/5795 rel="external nofollow noreferrer">#5795</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправления для нетрадиционной сборки (gcc9, без подмодулей) <a href=https://github.com/ClickHouse/ClickHouse/pull/5792 rel="external nofollow noreferrer">#5792</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Требуется явный тип в unalignedStore, потому что было доказано, что он подвержен ошибкам <a href=https://github.com/ClickHouse/ClickHouse/pull/5791 rel="external nofollow noreferrer">#5791</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Исправлена сборка MacOS <a href=https://github.com/ClickHouse/ClickHouse/pull/5830 rel="external nofollow noreferrer">#5830</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Тест производительности относительно новой функции JIT с большим набором данных, как это было запрошено здесь <a href=https://github.com/ClickHouse/ClickHouse/issues/5263 rel="external nofollow noreferrer">#5263</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5887 rel="external nofollow noreferrer">#5887</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Запуск статических тестов в стресс-тесте <a href=https://github.com/ClickHouse/ClickHouse/commit/12693e568722f11e19859742f56428455501fd2a rel="external nofollow noreferrer">12693e568722f11e19859742f56428455501fd2a</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> </ul> <h4 id=backward-incompatible-change-7>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change-7 title="Permanent link">&para;</a></h4> <ul> <li><code>Kafka</code> сломан в этой версии.</li> <li>Включить <code>adaptive_index_granularity</code> = 10 МБ по умолчанию для новых <code>MergeTree</code> таблицы. Если вы создали новые таблицы MergeTree на версии 19.11+, понижение рейтинга до версий до 19.6 будет невозможно. <a href=https://github.com/ClickHouse/ClickHouse/pull/5628 rel="external nofollow noreferrer">#5628</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Удалены устаревшие недокументированные встроенные словари, которые использовались Яндексом.Метрика. Функция <code>OSIn</code>, <code>SEIn</code>, <code>OSToRoot</code>, <code>SEToRoot</code>, <code>OSHierarchy</code>, <code>SEHierarchy</code> они больше не доступны. Если вы используете эти функции, напишите письмо по адресу <a href=mailto:clickhouse-feedback@yandex-team.com>&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;</a> Примечание: в последний момент мы решили сохранить эти функции на некоторое время. <a href=https://github.com/ClickHouse/ClickHouse/pull/5780 rel="external nofollow noreferrer">#5780</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h2 id=clickhouse-release-19-10>ClickHouse релиз 19.10<a class=headerlink href=#clickhouse-release-19-10 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-10-1-5-2019-07-12>ClickHouse релиз 19.10.1.5, 2019-07-12<a class=headerlink href=#clickhouse-release-19-10-1-5-2019-07-12 title="Permanent link">&para;</a></h3> <h4 id=new-feature-7>Новая функция<a class=headerlink href=#new-feature-7 title="Permanent link">&para;</a></h4> <ul> <li>Добавить новый кодек столбца: <code>T64</code>. Сделано для(U)столбцов IntX/EnumX/Data (Time)/DecimalX. Это должно быть хорошо для столбцов с постоянными или малыми значениями диапазона. Сам кодек позволяет увеличить или уменьшить тип данных без повторного сжатия. <a href=https://github.com/ClickHouse/ClickHouse/pull/5557 rel="external nofollow noreferrer">#5557</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Добавление СУБД <code>MySQL</code> что позволяет просматривать все таблицы на удаленном сервере MySQL <a href=https://github.com/ClickHouse/ClickHouse/pull/5599 rel="external nofollow noreferrer">#5599</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li><code>bitmapContains</code> реализация. Это в 2 раза быстрее, чем <code>bitmapHasAny</code> если второе растровое изображение содержит один элемент. <a href=https://github.com/ClickHouse/ClickHouse/pull/5535 rel="external nofollow noreferrer">#5535</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Поддержка <code>crc32</code> функция (с поведением точно таким же, как в MySQL или PHP). Не используйте его, если вам нужна хэш-функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/5661 rel="external nofollow noreferrer">#5661</a> (<a href=https://github.com/BHYCHIK rel="external nofollow noreferrer">Ремен Иван</a>)</li> <li>Реализованный <code>SYSTEM START/STOP DISTRIBUTED SENDS</code> запросы для управления асинхронными вставками в <code>Distributed</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/4935 rel="external nofollow noreferrer">#4935</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> </ul> <h4 id=bug-fix-22>Исправление ошибок<a class=headerlink href=#bug-fix-22 title="Permanent link">&para;</a></h4> <ul> <li>Игнорируйте ограничения на выполнение запросов и максимальный размер частей для ограничений слияния при выполнении мутаций. <a href=https://github.com/ClickHouse/ClickHouse/pull/5659 rel="external nofollow noreferrer">#5659</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправлена ошибка, которая может привести к дедупликации обычных блоков (крайне редко) и вставке дубликатов блоков (чаще). <a href=https://github.com/ClickHouse/ClickHouse/pull/5549 rel="external nofollow noreferrer">#5549</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправление функции <code>arrayEnumerateUniqRanked</code> для Аргументов с пустыми массивами <a href=https://github.com/ClickHouse/ClickHouse/pull/5559 rel="external nofollow noreferrer">#5559</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Не Подписывайтесь на темы Кафки без намерения опросить какие-либо сообщения. <a href=https://github.com/ClickHouse/ClickHouse/pull/5698 rel="external nofollow noreferrer">#5698</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Сделать настройку <code>join_use_nulls</code> не получите никакого эффекта для типов, которые не могут быть внутри Nullable <a href=https://github.com/ClickHouse/ClickHouse/pull/5700 rel="external nofollow noreferrer">#5700</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Исправлено <code>Incorrect size of index granularity</code> ошибки <a href=https://github.com/ClickHouse/ClickHouse/pull/5720 rel="external nofollow noreferrer">#5720</a> (<a href=https://github.com/coraxster rel="external nofollow noreferrer">коракстер</a>)</li> <li>Фиксировать поплавок в десятичные преобразования переполнения <a href=https://github.com/ClickHouse/ClickHouse/pull/5607 rel="external nofollow noreferrer">#5607</a> (<a href=https://github.com/coraxster rel="external nofollow noreferrer">коракстер</a>)</li> <li>Смыть буфер, когда <code>WriteBufferFromHDFS</code>- деструктор называется. Это исправляет запись в <code>HDFS</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5684 rel="external nofollow noreferrer">#5684</a> (<a href=https://github.com/eejoin rel="external nofollow noreferrer">Синьдун Пэн</a>)</li> </ul> <h4 id=improvement-7>Улучшение<a class=headerlink href=#improvement-7 title="Permanent link">&para;</a></h4> <ul> <li>Обработать пустые ячейки в <code>CSV</code> в качестве значений по умолчанию при настройке <code>input_format_defaults_for_omitted_fields</code> это включено. <a href=https://github.com/ClickHouse/ClickHouse/pull/5625 rel="external nofollow noreferrer">#5625</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Неблокирующая загрузка внешних словарей. <a href=https://github.com/ClickHouse/ClickHouse/pull/5567 rel="external nofollow noreferrer">#5567</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Тайм-ауты сети могут быть динамически изменены для уже установленных соединений в соответствии с настройками. <a href=https://github.com/ClickHouse/ClickHouse/pull/4558 rel="external nofollow noreferrer">#4558</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer">Константин Подшумок</a>)</li> <li>С помощью «public_suffix_list» для функций <code>firstSignificantSubdomain</code>, <code>cutToFirstSignificantSubdomain</code>. Он использует идеальную хэш-таблицу, сгенерированную <code>gperf</code> с помощью списка, сгенерированного из файла: <a href=https://publicsuffix.org/list/public>https://publicsuffix.org/list/public</a>_suffix_list.dat (например, теперь мы признаем домен <code>ac.uk</code> как несущественные). <a href=https://github.com/ClickHouse/ClickHouse/pull/5030 rel="external nofollow noreferrer">#5030</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Усыновленный <code>IPv6</code> тип данных в системных таблицах; унифицированные столбцы информации о клиенте в <code>system.processes</code> и <code>system.query_log</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5640 rel="external nofollow noreferrer">#5640</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Использование сеансов для соединений с протоколом совместимости MySQL. #5476 <a href=https://github.com/ClickHouse/ClickHouse/pull/5646 rel="external nofollow noreferrer">#5646</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Поддержка более <code>ALTER</code> запросы <code>ON CLUSTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5593 rel="external nofollow noreferrer">#5593</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5613 rel="external nofollow noreferrer">#5613</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">сундили</a>)</li> <li>Поддержка <code>&lt;logger&gt;</code> раздел в <code>clickhouse-local</code> конфигурационный файл. <a href=https://github.com/ClickHouse/ClickHouse/pull/5540 rel="external nofollow noreferrer">#5540</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Разрешить выполнение запроса с помощью <code>remote</code> функция таблицы в <code>clickhouse-local</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5627 rel="external nofollow noreferrer">#5627</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=performance-improvement-5>Улучшение производительности<a class=headerlink href=#performance-improvement-5 title="Permanent link">&para;</a></h4> <ul> <li>Добавьте возможность написать окончательную отметку в конце столбцов MergeTree. Это позволяет избежать бесполезного считывания ключей, находящихся вне диапазона табличных данных. Он включается только в том случае, если используется адаптивная детализация индекса. <a href=https://github.com/ClickHouse/ClickHouse/pull/5624 rel="external nofollow noreferrer">#5624</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Улучшена производительность таблиц MergeTree на очень медленных файловых системах за счет уменьшения количества <code>stat</code> системных вызовов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5648 rel="external nofollow noreferrer">#5648</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено снижение производительности при чтении из таблиц MergeTree, которое было введено в версии 19.6. Исправления №5631. <a href=https://github.com/ClickHouse/ClickHouse/pull/5633 rel="external nofollow noreferrer">#5633</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-8>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-8 title="Permanent link">&para;</a></h4> <ul> <li>Реализованный <code>TestKeeper</code> в качестве реализации интерфейса ZooKeeper используется для тестирования <a href=https://github.com/ClickHouse/ClickHouse/pull/5643 rel="external nofollow noreferrer">#5643</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>) (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Левушкин Алексей</a>)</li> <li>Отныне <code>.sql</code> тесты могут выполняться изолированно сервером, параллельно, со случайной базой данных. Это позволяет запускать их быстрее, добавлять новые тесты с пользовательскими конфигурациями серверов и быть уверенным, что различные тесты не влияют друг на друга. <a href=https://github.com/ClickHouse/ClickHouse/pull/5554 rel="external nofollow noreferrer">#5554</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Удалять <code>&lt;name&gt;</code> и <code>&lt;metrics&gt;</code> из тестов производительности <a href=https://github.com/ClickHouse/ClickHouse/pull/5672 rel="external nofollow noreferrer">#5672</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Исправлено «select_format» тест производительности для <code>Pretty</code> форматы <a href=https://github.com/ClickHouse/ClickHouse/pull/5642 rel="external nofollow noreferrer">#5642</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h2 id=clickhouse-release-19-9>ClickHouse релиз 19.9<a class=headerlink href=#clickhouse-release-19-9 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-9-3-31-2019-07-05>ClickHouse релиз 19.9.3.31, 2019-07-05<a class=headerlink href=#clickhouse-release-19-9-3-31-2019-07-05 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-23>Исправление ошибок<a class=headerlink href=#bug-fix-23 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка segfault в Дельта-кодеке, которая влияет на столбцы со значениями размером менее 32 бит. Ошибка привела к случайному повреждению памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/5786 rel="external nofollow noreferrer">#5786</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена редкая ошибка в проверке детали с колонкой LowCardinality. <a href=https://github.com/ClickHouse/ClickHouse/pull/5832 rel="external nofollow noreferrer">#5832</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в TTL слиться с не-физической столбцов в блоке. <a href=https://github.com/ClickHouse/ClickHouse/pull/5819 rel="external nofollow noreferrer">#5819</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Исправьте потенциальный бесконечный спящий режим низкоприоритетных запросов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5842 rel="external nofollow noreferrer">#5842</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить, как ClickHouse определяет часовой пояс по умолчанию, как СРТ, а не мирового. <a href=https://github.com/ClickHouse/ClickHouse/pull/5828 rel="external nofollow noreferrer">#5828</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка, связанная с выполнением распределенного DROP/ALTER/TRUNCATE/OPTIMIZE в кластерных запросах на реплику последователя перед репликой лидера. Теперь они будут выполняться непосредственно на реплике лидера. <a href=https://github.com/ClickHouse/ClickHouse/pull/5757 rel="external nofollow noreferrer">#5757</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено состояние гонки, которое приводит к тому, что некоторые запросы могут не отображаться в query_log сразу же после запроса SYSTEM FLUSH LOGS. <a href=https://github.com/ClickHouse/ClickHouse/pull/5685 rel="external nofollow noreferrer">#5685</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Добавлена отсутствующая поддержка постоянных аргументов для <code>evalMLModel</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/5820 rel="external nofollow noreferrer">#5820</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-9-2-4-2019-06-24>ClickHouse релиз 19.9.2.4, 2019-06-24<a class=headerlink href=#clickhouse-release-19-9-2-4-2019-06-24 title="Permanent link">&para;</a></h3> <h4 id=new-feature-8>Новая функция<a class=headerlink href=#new-feature-8 title="Permanent link">&para;</a></h4> <ul> <li>Печать информации о замороженных деталях в <code>system.parts</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/pull/5471 rel="external nofollow noreferrer">#5471</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Ask client password on clickhouse-запуск клиента на tty, если он не задан в аргументах <a href=https://github.com/ClickHouse/ClickHouse/pull/5092 rel="external nofollow noreferrer">#5092</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Осуществлять <code>dictGet</code> и <code>dictGetOrDefault</code> функции для десятичных типов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5394 rel="external nofollow noreferrer">#5394</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=improvement-8>Улучшение<a class=headerlink href=#improvement-8 title="Permanent link">&para;</a></h4> <ul> <li>Инициализации в Debian: добавить службу ожидания <a href=https://github.com/ClickHouse/ClickHouse/pull/5522 rel="external nofollow noreferrer">#5522</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавление параметра запрещено по умолчанию, чтобы создать таблицу с подозрительных типов для LowCardinality <a href=https://github.com/ClickHouse/ClickHouse/pull/5448 rel="external nofollow noreferrer">#5448</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Регрессионные функции возвращают веса модели, если они не используются в качестве состояния в функции <code>evalMLMethod</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5411 rel="external nofollow noreferrer">#5411</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer">Quid37</a>)</li> <li>Переименуйте и улучшите методы регрессии. <a href=https://github.com/ClickHouse/ClickHouse/pull/5492 rel="external nofollow noreferrer">#5492</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer">Quid37</a>)</li> <li>Более четкие интерфейсы поиска строк. <a href=https://github.com/ClickHouse/ClickHouse/pull/5586 rel="external nofollow noreferrer">#5586</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> </ul> <h4 id=bug-fix-24>Исправление ошибок<a class=headerlink href=#bug-fix-24 title="Permanent link">&para;</a></h4> <ul> <li>Исправить потенциальную потерю данных в Kafka <a href=https://github.com/ClickHouse/ClickHouse/pull/5445 rel="external nofollow noreferrer">#5445</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправьте потенциальную бесконечную петлю в <code>PrettySpace</code> форматирование при вызове с нулевыми столбцами <a href=https://github.com/ClickHouse/ClickHouse/pull/5560 rel="external nofollow noreferrer">#5560</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Исправлена ошибка переполнения UInt32 в линейных моделях. Разрешить eval ML-модель для аргумента неконстантной модели. <a href=https://github.com/ClickHouse/ClickHouse/pull/5516 rel="external nofollow noreferrer">#5516</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li><code>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> не следует вызывать исключение, если указанный индекс не существует <a href=https://github.com/ClickHouse/ClickHouse/pull/5524 rel="external nofollow noreferrer">#5524</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer">Глеб Новиков</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн с <code>bitmapHasAny</code> в скалярном подзапросе <a href=https://github.com/ClickHouse/ClickHouse/pull/5528 rel="external nofollow noreferrer">#5528</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Исправлена ошибка, когда пул соединений репликации не повторяет попытку разрешения узла, даже если кэш DNS был удален. <a href=https://github.com/ClickHouse/ClickHouse/pull/5534 rel="external nofollow noreferrer">#5534</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено <code>ALTER ... MODIFY TTL</code> на Реплицированном Mergetree. <a href=https://github.com/ClickHouse/ClickHouse/pull/5539 rel="external nofollow noreferrer">#5539</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Фиксированная вставка в распределенную таблицу с материализованной колонкой <a href=https://github.com/ClickHouse/ClickHouse/pull/5429 rel="external nofollow noreferrer">#5429</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Исправление плохой запас, когда усекают присоединиться хранения <a href=https://github.com/ClickHouse/ClickHouse/pull/5437 rel="external nofollow noreferrer">#5437</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer">TCeason</a>)</li> <li>В последних версиях пакета tzdata некоторые файлы теперь являются символическими ссылками. Текущий механизм обнаружения часового пояса по умолчанию нарушается и дает неверные имена для некоторых часовых поясов. Теперь, по крайней мере, мы заставим имя часового пояса к содержимому TZ, если оно будет предоставлено. <a href=https://github.com/ClickHouse/ClickHouse/pull/5443 rel="external nofollow noreferrer">#5443</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправьте некоторые крайне редкие случаи с Многовольницким поисковиком, когда постоянные иглы в сумме имеют длину не менее 16 КБ. Алгоритм пропустил или переписал предыдущие результаты, что может привести к неправильному результату работы алгоритма. <code>multiSearchAny</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5588 rel="external nofollow noreferrer">#5588</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Исправлена проблема, когда настройки для запросов ExternalData не могли использовать параметры ClickHouse. Кроме того, на данный момент настройки <code>date_time_input_format</code> и <code>low_cardinality_allow_in_native_format</code> не может использоваться из-за неоднозначности имен (во внешних данных это может быть интерпретировано как формат таблицы, а в запросе-как настройка). <a href=https://github.com/ClickHouse/ClickHouse/pull/5455 rel="external nofollow noreferrer">#5455</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Исправлена ошибка, когда детали удалялись только из FS, не сбрасывая их из Zookeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/5520 rel="external nofollow noreferrer">#5520</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Удалить ведение журнала отладки из протокола MySQL <a href=https://github.com/ClickHouse/ClickHouse/pull/5478 rel="external nofollow noreferrer">#5478</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Пропустить ZNONODE во время обработки DDL запроса <a href=https://github.com/ClickHouse/ClickHouse/pull/5489 rel="external nofollow noreferrer">#5489</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Фикс микс <code>UNION ALL</code> тип столбца результатов. Были случаи с несогласованными данными и типами столбцов результирующих столбцов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5503 rel="external nofollow noreferrer">#5503</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Бросьте исключение на неправильные целые числа в <code>dictGetT</code> функции вместо сбоя. <a href=https://github.com/ClickHouse/ClickHouse/pull/5446 rel="external nofollow noreferrer">#5446</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка element_count и load_factor для хэшированного словаря в <code>system.dictionaries</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/pull/5440 rel="external nofollow noreferrer">#5440</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-9>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-9 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена сборка без <code>Brotli</code> Поддержка сжатия HTTP (<code>ENABLE_BROTLI=OFF</code> переменная cmake). <a href=https://github.com/ClickHouse/ClickHouse/pull/5521 rel="external nofollow noreferrer">#5521</a> (<a href=https://github.com/citrin rel="external nofollow noreferrer">Антон Южанинов</a>)</li> <li>Включая рев.ч как рев/рев.х <a href=https://github.com/ClickHouse/ClickHouse/pull/5523 rel="external nofollow noreferrer">#5523</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer">Оривей Деш</a>)</li> <li>Исправьте предупреждения gcc9 в hyperscan (директива # line-это зло!) <a href=https://github.com/ClickHouse/ClickHouse/pull/5546 rel="external nofollow noreferrer">#5546</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Исправьте все предупреждения при компиляции с gcc-9. Исправлены некоторые проблемы ВНО. Исправьте GCC9 ICE и отправьте его в bugzilla. <a href=https://github.com/ClickHouse/ClickHouse/pull/5498 rel="external nofollow noreferrer">#5498</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Фиксированная связь с LLD <a href=https://github.com/ClickHouse/ClickHouse/pull/5477 rel="external nofollow noreferrer">#5477</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Удаление неиспользуемых специализаций в словарях <a href=https://github.com/ClickHouse/ClickHouse/pull/5452 rel="external nofollow noreferrer">#5452</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Улучшение тестов производительности для форматирования и синтаксического анализа таблиц для различных типов файлов <a href=https://github.com/ClickHouse/ClickHouse/pull/5497 rel="external nofollow noreferrer">#5497</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> <li>Исправления для параллельного выполнения тестов <a href=https://github.com/ClickHouse/ClickHouse/pull/5506 rel="external nofollow noreferrer">#5506</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Docker: используйте конфигурации из clickhouse-test <a href=https://github.com/ClickHouse/ClickHouse/pull/5531 rel="external nofollow noreferrer">#5531</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлена компиляция для FreeBSD <a href=https://github.com/ClickHouse/ClickHouse/pull/5447 rel="external nofollow noreferrer">#5447</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Повышение уровня обновления до 1.70 <a href=https://github.com/ClickHouse/ClickHouse/pull/5570 rel="external nofollow noreferrer">#5570</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлена сборка clickhouse как подмодуля <a href=https://github.com/ClickHouse/ClickHouse/pull/5574 rel="external nofollow noreferrer">#5574</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Улучшение тестов производительности JSONExtract <a href=https://github.com/ClickHouse/ClickHouse/pull/5444 rel="external nofollow noreferrer">#5444</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> </ul> <h2 id=clickhouse-release-19-8>ClickHouse релиз 19.8<a class=headerlink href=#clickhouse-release-19-8 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-8-3-8-2019-06-11>ClickHouse релиз 19.8.3.8, 2019-06-11<a class=headerlink href=#clickhouse-release-19-8-3-8-2019-06-11 title="Permanent link">&para;</a></h3> <h4 id=new-features>Новые средства<a class=headerlink href=#new-features title="Permanent link">&para;</a></h4> <ul> <li>Добавлены функции для работы с JSON <a href=https://github.com/ClickHouse/ClickHouse/pull/4686 rel="external nofollow noreferrer">#4686</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5124 rel="external nofollow noreferrer">#5124</a>. (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Добавьте функцию basename с аналогичным поведением к функции basename, которая существует во многих языках (<code>os.path.basename</code> в Python, <code>basename</code> in PHP, etc…). Work with both an UNIX-like path or a Windows path. <a href=https://github.com/ClickHouse/ClickHouse/pull/5136 rel="external nofollow noreferrer">#5136</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Добавлен <code>LIMIT n, m BY</code> или <code>LIMIT m OFFSET n BY</code> синтаксис для задания смещения N для ограничения на предложение. <a href=https://github.com/ClickHouse/ClickHouse/pull/5138 rel="external nofollow noreferrer">#5138</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Добавлен новый тип данных <code>SimpleAggregateFunction</code>, что позволяет иметь столбцы с легкой агрегацией в виде <code>AggregatingMergeTree</code>. Это может быть использовано только с простыми функциями, такими как <code>any</code>, <code>anyLast</code>, <code>sum</code>, <code>min</code>, <code>max</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4629 rel="external nofollow noreferrer">#4629</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer">Борис Гранво</a>)</li> <li>Добавлена поддержка непостоянных аргументов в функции <code>ngramDistance</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5198 rel="external nofollow noreferrer">#5198</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Добавленные функции <code>skewPop</code>, <code>skewSamp</code>, <code>kurtPop</code> и <code>kurtSamp</code> для вычисления асимметрии последовательности, асимметрии образца, эксцесса и эксцесса образца соответственно. <a href=https://github.com/ClickHouse/ClickHouse/pull/5200 rel="external nofollow noreferrer">#5200</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Поддержка переименования операции для <code>MaterializeView</code> место хранения. <a href=https://github.com/ClickHouse/ClickHouse/pull/5209 rel="external nofollow noreferrer">#5209</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Добавлен сервер, который позволяет подключаться к ClickHouse с помощью клиента MySQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/4715 rel="external nofollow noreferrer">#4715</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Добавь <code>toDecimal*OrZero</code> и <code>toDecimal*OrNull</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/5291 rel="external nofollow noreferrer">#5291</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Поддержка десятичных типов в функциях: <code>quantile</code>, <code>quantiles</code>, <code>median</code>, <code>quantileExactWeighted</code>, <code>quantilesExactWeighted</code>, medianExactWeighted. <a href=https://github.com/ClickHouse/ClickHouse/pull/5304 rel="external nofollow noreferrer">#5304</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Добавлен <code>toValidUTF8</code> function, which replaces all invalid UTF-8 characters by replacement character � (U+FFFD). <a href=https://github.com/ClickHouse/ClickHouse/pull/5322 rel="external nofollow noreferrer">#5322</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Добавлен <code>format</code> функция. Форматирование константы pattern (упрощенный шаблон формата Python) со строками, перечисленными в аргументах. <a href=https://github.com/ClickHouse/ClickHouse/pull/5330 rel="external nofollow noreferrer">#5330</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Добавлен <code>system.detached_parts</code> таблица, содержащая информацию об отсоединенных частях <code>MergeTree</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/5353 rel="external nofollow noreferrer">#5353</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">акузм</a>)</li> <li>Добавлен <code>ngramSearch</code> функция для вычисления несимметричной разности между иглой и стогом сена. <a href=https://github.com/ClickHouse/ClickHouse/pull/5418 rel="external nofollow noreferrer">#5418</a><a href=https://github.com/ClickHouse/ClickHouse/pull/5422 rel="external nofollow noreferrer">#5422</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Реализация основных методов машинного обучения (стохастическая линейная регрессия и логистическая регрессия) с использованием интерфейса агрегатных функций. Имеет различные стратегии обновления весов моделей (простой градиентный спуск, метод импульса, метод Нестерова). Также поддерживаются мини-пакеты нестандартного размера. <a href=https://github.com/ClickHouse/ClickHouse/pull/4943 rel="external nofollow noreferrer">#4943</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer">Quid37</a>)</li> <li>Реализация проекта <code>geohashEncode</code> и <code>geohashDecode</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/5003 rel="external nofollow noreferrer">#5003</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Добавлена статистическая функция <code>timeSeriesGroupSum</code>, который может агрегировать различные временные ряды, которые выборка временных меток не выравнивается. Он будет использовать линейную интерполяцию между двумя временными метками выборки, а затем суммировать временные ряды вместе. Добавлена статистическая функция <code>timeSeriesGroupRateSum</code>, который вычисляет скорость временных рядов, а затем суммирует ставки вместе. <a href=https://github.com/ClickHouse/ClickHouse/pull/4542 rel="external nofollow noreferrer">#4542</a> (<a href=https://github.com/LiuYangkuan rel="external nofollow noreferrer">Янкуань Лю</a>)</li> <li>Добавленные функции <code>IPv4CIDRtoIPv4Range</code> и <code>IPv6CIDRtoIPv6Range</code> рассчитать нижний и верхний пределы для IP в подсети с использованием бесклассовой междоменной маршрутизации. <a href=https://github.com/ClickHouse/ClickHouse/pull/5095 rel="external nofollow noreferrer">#5095</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> <li>Добавьте заголовок X-ClickHouse-Summary, когда мы отправляем запрос с помощью HTTP с включенной настройкой <code>send_progress_in_http_headers</code>. Возвращает обычную информацию X-ClickHouse-Progress с дополнительной информацией, например, сколько строк и байтов было вставлено в запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/5116 rel="external nofollow noreferrer">#5116</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом Тассери</a>)</li> </ul> <h4 id=improvements>Улучшения<a class=headerlink href=#improvements title="Permanent link">&para;</a></h4> <ul> <li>Добавлен <code>max_parts_in_total</code> настройка для семейства таблиц MergeTree (по умолчанию: 100 000), которая предотвращает небезопасную спецификацию ключа раздела #5166. <a href=https://github.com/ClickHouse/ClickHouse/pull/5171 rel="external nofollow noreferrer">#5171</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>clickhouse-obfuscator</code>: выведите начальное значение для отдельных столбцов, объединив начальное значение с именем столбца, а не с позицией столбца. Это предназначено для преобразования наборов данных с несколькими связанными таблицами, чтобы таблицы оставались соединяемыми после преобразования. <a href=https://github.com/ClickHouse/ClickHouse/pull/5178 rel="external nofollow noreferrer">#5178</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавленные функции <code>JSONExtractRaw</code>, <code>JSONExtractKeyAndValues</code>. Переименованные функции <code>jsonExtract&lt;type&gt;</code> к <code>JSONExtract&lt;type&gt;</code>. Когда что-то идет не так, эти функции возвращают соответствующие значения, а не наоборот. <code>NULL</code>. Модифицированная функция <code>JSONExtract</code>, теперь он получает возвращаемый тип из своего последнего параметра и не вводит nullables. Реализован резервный вариант для RapidJSON в случае, если инструкции AVX2 недоступны. Библиотека Simdjson обновлена до новой версии. <a href=https://github.com/ClickHouse/ClickHouse/pull/5235 rel="external nofollow noreferrer">#5235</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Сейчас <code>if</code> и <code>multiIf</code> функции не зависят от условий <code>Nullable</code>, но полагайтесь на ветви для обеспечения совместимости sql. <a href=https://github.com/ClickHouse/ClickHouse/pull/5238 rel="external nofollow noreferrer">#5238</a> (<a href=https://github.com/janplus rel="external nofollow noreferrer">Цзянь Ву</a>)</li> <li><code>In</code> теперь предикат генерирует <code>Null</code> результат от <code>Null</code> входные данные, такие как <code>Equal</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/5152 rel="external nofollow noreferrer">#5152</a> (<a href=https://github.com/janplus rel="external nofollow noreferrer">Цзянь Ву</a>)</li> <li>Проверьте ограничение по времени для каждого (flush_interval / poll_timeout) числа строк из Kafka. Это позволяет чаще отрывать чтение от потребителя Кафки и проверять временные ограничения для потоков верхнего уровня <a href=https://github.com/ClickHouse/ClickHouse/pull/5249 rel="external nofollow noreferrer">#5249</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Соедините рдкафку с комплектным САСЛОМ. Это должно позволить использовать аутентификацию SASL SCRAM <a href=https://github.com/ClickHouse/ClickHouse/pull/5253 rel="external nofollow noreferrer">#5253</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Пакетная версия RowRefList для всех соединений. <a href=https://github.com/ClickHouse/ClickHouse/pull/5267 rel="external nofollow noreferrer">#5267</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>clickhouse-server: более информативное прослушивание сообщений об ошибках. <a href=https://github.com/ClickHouse/ClickHouse/pull/5268 rel="external nofollow noreferrer">#5268</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Поддержка словарей в clickhouse-copier для функций в <code>&lt;sharding_key&gt;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5270 rel="external nofollow noreferrer">#5270</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавить новую настройку <code>kafka_commit_every_batch</code> чтобы регулировать политику Кафки.<br> Он позволяет установить режим фиксации: после обработки каждой партии сообщений или после записи всего блока в хранилище. Это компромисс между потерей некоторых сообщений или чтением их дважды в некоторых экстремальных ситуациях. <a href=https://github.com/ClickHouse/ClickHouse/pull/5308 rel="external nofollow noreferrer">#5308</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Сделай <code>windowFunnel</code> поддержка других целочисленных типов без знака. <a href=https://github.com/ClickHouse/ClickHouse/pull/5320 rel="external nofollow noreferrer">#5320</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">сундили</a>)</li> <li>Разрешить теневой виртуальный столбец <code>_table</code> в двигателе слияния. <a href=https://github.com/ClickHouse/ClickHouse/pull/5325 rel="external nofollow noreferrer">#5325</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Сделай <code>sequenceMatch</code> агрегатные функции поддерживают другие целочисленные типы без знака <a href=https://github.com/ClickHouse/ClickHouse/pull/5339 rel="external nofollow noreferrer">#5339</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">сундили</a>)</li> <li>Лучше сообщения об ошибках, если несоответствие контрольной суммы, скорее всего, вызвано аппаратными сбоями. <a href=https://github.com/ClickHouse/ClickHouse/pull/5355 rel="external nofollow noreferrer">#5355</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Проверьте, что базовые таблицы поддерживают выборку для <code>StorageMerge</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5366 rel="external nofollow noreferrer">#5366</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Сlose MySQL connections after their usage in external dictionaries. It is related to issue #893. <a href=https://github.com/ClickHouse/ClickHouse/pull/5395 rel="external nofollow noreferrer">#5395</a> (<a href=https://github.com/clemrodriguez rel="external nofollow noreferrer">Clément Rodriguez</a>)</li> <li>Улучшения протокола MySQL Wire. Изменено имя формата на MySQLWire. Использование RAII для вызова RSA_free. Отключение SSL, если контекст не может быть создан. <a href=https://github.com/ClickHouse/ClickHouse/pull/5419 rel="external nofollow noreferrer">#5419</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>clickhouse-client: allow to run with unaccessable history file (read-only, no disk space, file is directory, …). <a href=https://github.com/ClickHouse/ClickHouse/pull/5431 rel="external nofollow noreferrer">#5431</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Соблюдайте настройки запросов при асинхронных вставках в распределенные таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/4936 rel="external nofollow noreferrer">#4936</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer">TCeason</a>)</li> <li>Переименованные функции <code>leastSqr</code> к <code>simpleLinearRegression</code>, <code>LinearRegression</code> к <code>linearRegression</code>, <code>LogisticRegression</code> к <code>logisticRegression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5391 rel="external nofollow noreferrer">#5391</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> </ul> <h4 id=performance-improvements>Улучшения в производительности<a class=headerlink href=#performance-improvements title="Permanent link">&para;</a></h4> <ul> <li>Распараллеливание обработки деталей невоспроизводимого MergeTree столы В изменить изменить запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/4639 rel="external nofollow noreferrer">#4639</a> (<a href=https://github.com/IvanKush rel="external nofollow noreferrer">Иван Куш</a>)</li> <li>Оптимизация при извлечении регулярных выражений. <a href=https://github.com/ClickHouse/ClickHouse/pull/5193 rel="external nofollow noreferrer">#5193</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5191 rel="external nofollow noreferrer">#5191</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Не добавляйте правый ключевой столбец join к результату соединения, если он используется только в разделе join on. <a href=https://github.com/ClickHouse/ClickHouse/pull/5260 rel="external nofollow noreferrer">#5260</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Заморозьте буфер Кафки после первого пустого ответа. Это позволяет избежать многократных обращений к <code>ReadBuffer::next()</code> для пустого результата в некоторых потоках разбора строк. <a href=https://github.com/ClickHouse/ClickHouse/pull/5283 rel="external nofollow noreferrer">#5283</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li><code>concat</code> оптимизация функций для нескольких аргументов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5357 rel="external nofollow noreferrer">#5357</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Query optimisation. Allow push down IN statement while rewriting commа/cross join into inner one. <a href=https://github.com/ClickHouse/ClickHouse/pull/5396 rel="external nofollow noreferrer">#5396</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Обновите нашу реализацию LZ4 со ссылкой на нее, чтобы иметь более быструю декомпрессию. <a href=https://github.com/ClickHouse/ClickHouse/pull/5070 rel="external nofollow noreferrer">#5070</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Реализована сортировка MSD radix (на основе kxsort) и частичная сортировка. <a href=https://github.com/ClickHouse/ClickHouse/pull/5129 rel="external nofollow noreferrer">#5129</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer">Евгений Правда</a>)</li> </ul> <h4 id=bug-fixes>Устранение ошибок<a class=headerlink href=#bug-fixes title="Permanent link">&para;</a></h4> <ul> <li>Исправить пуш требуют колонн с соединением <a href=https://github.com/ClickHouse/ClickHouse/pull/5192 rel="external nofollow noreferrer">#5192</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправлена ошибка, когда ClickHouse запускался systemd, команда <code>sudo service clickhouse-server forcerestart</code> он работал не так, как ожидалось. <a href=https://github.com/ClickHouse/ClickHouse/pull/5204 rel="external nofollow noreferrer">#5204</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправьте коды ошибок http в DataPartsExchange (interserver http server на порту 9009 всегда возвращал код 200, даже при ошибках). <a href=https://github.com/ClickHouse/ClickHouse/pull/5216 rel="external nofollow noreferrer">#5216</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправить SimpleAggregateFunction на более длительный строк, чем MAX_SMALL_STRING_SIZE <a href=https://github.com/ClickHouse/ClickHouse/pull/5311 rel="external nofollow noreferrer">#5311</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Исправьте ошибку для <code>Decimal</code> к <code>Nullable(Decimal)</code> конверсия в ин. Поддержка других десятичных и десятичных преобразований (включая различные масштабы). <a href=https://github.com/ClickHouse/ClickHouse/pull/5350 rel="external nofollow noreferrer">#5350</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлено блокирование FPU в библиотеке simdjson, приводящее к неправильному вычислению <code>uniqHLL</code> и <code>uniqCombined</code> агрегатная функция и математические функции, такие как <code>log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5354 rel="external nofollow noreferrer">#5354</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена обработка смешанных случаев const/nonconst в функциях JSON. <a href=https://github.com/ClickHouse/ClickHouse/pull/5435 rel="external nofollow noreferrer">#5435</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Чинить <code>retention</code> функция. Теперь все условия, которые удовлетворяют в строке данных, добавляются в состояние данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/5119 rel="external nofollow noreferrer">#5119</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer">小路</a>)</li> <li>Исправьте тип результата для <code>quantileExact</code> с десятичными дробями. <a href=https://github.com/ClickHouse/ClickHouse/pull/5304 rel="external nofollow noreferrer">#5304</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=documentation>Документация<a class=headerlink href=#documentation title="Permanent link">&para;</a></h4> <ul> <li>Перевести документацию для <code>CollapsingMergeTree</code> к китайцам. <a href=https://github.com/ClickHouse/ClickHouse/pull/5168 rel="external nofollow noreferrer">#5168</a> (<a href=https://github.com/AlexZFX rel="external nofollow noreferrer">张风啸</a>)</li> <li>Переведите некоторые документы о табличных движках на китайский язык.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5134 rel="external nofollow noreferrer">#5134</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5328 rel="external nofollow noreferrer">#5328</a><br> (<a href=https://github.com/neverlee rel="external nofollow noreferrer">никогда ли</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements>Улучшения Сборки / Тестирования / Упаковки<a class=headerlink href=#buildtestingpackaging-improvements title="Permanent link">&para;</a></h4> <ul> <li>Исправьте некоторые отчеты о дезинфицирующих средствах, которые показывают вероятное использование после освобождения.<a href=https://github.com/ClickHouse/ClickHouse/pull/5139 rel="external nofollow noreferrer">#5139</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5143 rel="external nofollow noreferrer">#5143</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5393 rel="external nofollow noreferrer">#5393</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Для удобства переместите тесты производительности из отдельных каталогов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5158 rel="external nofollow noreferrer">#5158</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте неправильные тесты производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/5255 rel="external nofollow noreferrer">#5255</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавлен инструмент для вычисления контрольных сумм, вызванных битовыми переворотами, для отладки аппаратных проблем. <a href=https://github.com/ClickHouse/ClickHouse/pull/5334 rel="external nofollow noreferrer">#5334</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Сделайте сценарий runner более удобным для использования. <a href=https://github.com/ClickHouse/ClickHouse/pull/5340 rel="external nofollow noreferrer">#5340</a><a href=https://github.com/ClickHouse/ClickHouse/pull/5360 rel="external nofollow noreferrer">#5360</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Добавьте небольшую инструкцию, как писать тесты производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/5408 rel="external nofollow noreferrer">#5408</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавить возможность делать замены В создать, заполнить и запросов падение производительности тесты <a href=https://github.com/ClickHouse/ClickHouse/pull/5367 rel="external nofollow noreferrer">#5367</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>)</li> </ul> <h2 id=clickhouse-release-19-7>ClickHouse релиз 19.7<a class=headerlink href=#clickhouse-release-19-7 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-7-5-29-2019-07-05>ClickHouse релиз 19.7.5.29, 2019-07-05<a class=headerlink href=#clickhouse-release-19-7-5-29-2019-07-05 title="Permanent link">&para;</a></h3> <h4 id=bug-fix-25>Исправление ошибок<a class=headerlink href=#bug-fix-25 title="Permanent link">&para;</a></h4> <ul> <li>Исправьте регрессию производительности в некоторых запросах с помощью JOIN. <a href=https://github.com/ClickHouse/ClickHouse/pull/5192 rel="external nofollow noreferrer">#5192</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> </ul> <h3 id=clickhouse-release-19-7-5-27-2019-06-09>ClickHouse релиз 19.7.5.27, 2019-06-09<a class=headerlink href=#clickhouse-release-19-7-5-27-2019-06-09 title="Permanent link">&para;</a></h3> <h4 id=new-features-1>Новые средства<a class=headerlink href=#new-features-1 title="Permanent link">&para;</a></h4> <ul> <li>Добавлены функции связанные с растровым изображением <code>bitmapHasAny</code> и <code>bitmapHasAll</code> по аналогии с <code>hasAny</code> и <code>hasAll</code> функции для массивов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5279 rel="external nofollow noreferrer">#5279</a> (<a href=https://github.com/svladykin rel="external nofollow noreferrer">Сергей Владыкин</a>)</li> </ul> <h4 id=bug-fixes-1>Устранение ошибок<a class=headerlink href=#bug-fixes-1 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена обработка выхода онлайн / оффлайн на <code>minmax</code> Индекс с нулевым значением. <a href=https://github.com/ClickHouse/ClickHouse/pull/5246 rel="external nofollow noreferrer">#5246</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Отметить все входные столбцы в пределе по мере необходимости выход. Это исправляет ‘Not found column’ ошибка в некоторых распределенных запросах. <a href=https://github.com/ClickHouse/ClickHouse/pull/5407 rel="external nofollow noreferrer">#5407</a> (<a href=https://github.com/kvap rel="external nofollow noreferrer">Константин Сергеевич Пан</a>)</li> <li>Чинить «Column ‘0’ already exists» ошибка в работе <code>SELECT .. PREWHERE</code> на колонке с дефолтом <a href=https://github.com/ClickHouse/ClickHouse/pull/5397 rel="external nofollow noreferrer">#5397</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Чинить <code>ALTER MODIFY TTL</code> запрос на <code>ReplicatedMergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5539/commits rel="external nofollow noreferrer">#5539</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Не разрушайте сервер, когда потребители Kafka не смогли запустить его. <a href=https://github.com/ClickHouse/ClickHouse/pull/5285 rel="external nofollow noreferrer">#5285</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправленные функции растрового изображения дают неверный результат. <a href=https://github.com/ClickHouse/ClickHouse/pull/5359 rel="external nofollow noreferrer">#5359</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer">Энди Янг</a>)</li> <li>Исправить element_count для хэшированного словаря (не включать дубликаты) <a href=https://github.com/ClickHouse/ClickHouse/pull/5440 rel="external nofollow noreferrer">#5440</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Используйте содержимое переменной окружения TZ в качестве имени для часового пояса. В некоторых случаях это помогает правильно определить часовой пояс по умолчанию.<a href=https://github.com/ClickHouse/ClickHouse/pull/5443 rel="external nofollow noreferrer">#5443</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Не пытайтесь конвертировать целые числа в <code>dictGetT</code> функции, потому что он не работает правильно. Вместо этого создайте исключение. <a href=https://github.com/ClickHouse/ClickHouse/pull/5446 rel="external nofollow noreferrer">#5446</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Фиксировать параметры в запрос внешних данных по протоколу HTTP. <a href=https://github.com/ClickHouse/ClickHouse/pull/5455 rel="external nofollow noreferrer">#5455</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила<br> Кутенин</a>)</li> <li>Исправлена ошибка, когда детали удалялись только из FS, не сбрасывая их из Zookeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/5520 rel="external nofollow noreferrer">#5520</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка сегментации в <code>bitmapHasAny</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/5528 rel="external nofollow noreferrer">#5528</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Ю</a>)</li> <li>Исправлена ошибка, когда пул соединений репликации не повторяет попытку разрешения узла, даже если кэш DNS был удален. <a href=https://github.com/ClickHouse/ClickHouse/pull/5534 rel="external nofollow noreferrer">#5534</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено <code>DROP INDEX IF EXISTS</code> запрос. Сейчас <code>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> запрос не вызывает исключения, если указанный индекс не существует. <a href=https://github.com/ClickHouse/ClickHouse/pull/5524 rel="external nofollow noreferrer">#5524</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer">Глеб Новиков</a>)</li> <li>Союз исправить все колонки супертипа. Были случаи с несогласованными данными и типами столбцов результирующих столбцов. <a href=https://github.com/ClickHouse/ClickHouse/pull/5503 rel="external nofollow noreferrer">#5503</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Пропустите ZNONODE во время обработки DDL-запроса. До того, как другой узел удалит znode в очереди задач, тот, который<br> не обработал его, но уже получил список детей,завершит поток DDLWorker. <a href=https://github.com/ClickHouse/ClickHouse/pull/5489 rel="external nofollow noreferrer">#5489</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> <li>Исправлена вставка в таблицу Distributed () с материализованным столбцом. <a href=https://github.com/ClickHouse/ClickHouse/pull/5429 rel="external nofollow noreferrer">#5429</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a>)</li> </ul> <h3 id=clickhouse-release-19-7-3-9-2019-05-30>ClickHouse релиз 19.7.3.9, 2019-05-30<a class=headerlink href=#clickhouse-release-19-7-3-9-2019-05-30 title="Permanent link">&para;</a></h3> <h4 id=new-features-2>Новые средства<a class=headerlink href=#new-features-2 title="Permanent link">&para;</a></h4> <ul> <li>Разрешить ограничить диапазон настроек, которые могут быть заданы пользователем.<br> Эти ограничения можно настроить в профиле настроек пользователя.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/4931 rel="external nofollow noreferrer">#4931</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий<br> Баранов</a>)</li> <li>Добавьте вторую версию функции <code>groupUniqArray</code> с дополнительным<br> <code>max_size</code> параметр, ограничивающий размер результирующего массива. Этот<br> поведение похоже на то, что <code>groupArray(max_size)(x)</code> функция.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5026 rel="external nofollow noreferrer">#5026</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Гийом<br> Тассери</a>)</li> <li>Для форматов входных файлов TSVWithNames/CSVWithNames порядок столбцов теперь может быть<br> определяется из заголовка файла. Это контролируется с помощью<br> <code>input_format_with_names_use_header</code> параметр.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5081 rel="external nofollow noreferrer">#5081</a><br> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Александр</a>)</li> </ul> <h4 id=bug-fixes-2>Устранение ошибок<a class=headerlink href=#bug-fixes-2 title="Permanent link">&para;</a></h4> <ul> <li>Сбой с uncompressed_cache + JOIN во время слияния (#5197)<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5133 rel="external nofollow noreferrer">#5133</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила<br> Кутенин</a>)</li> <li>Ошибка сегментации при запросе clickhouse-клиента к системным таблицам. #5066<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5127 rel="external nofollow noreferrer">#5127</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Потеря данных при большой нагрузке через KafkaEngine (#4736)<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5080 rel="external nofollow noreferrer">#5080</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Исправлено очень редкое состояние гонки данных, которое могло произойти при выполнении запроса с объединением всех, включающих по крайней мере два выбора из системы.колонны, система.таблицы, система.детали, система.parts_tables или таблицы объединить семью и исполнительского изменять столбцы из связанных таблиц одновременно. <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer">#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=performance-improvements-1>Улучшения в производительности<a class=headerlink href=#performance-improvements-1 title="Permanent link">&para;</a></h4> <ul> <li>Используйте radix sort для сортировки по одному числовому столбцу в <code>ORDER BY</code> без<br> <code>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5106 rel="external nofollow noreferrer">#5106</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/4439 rel="external nofollow noreferrer">#4439</a><br> (<a href=https://github.com/kvinty rel="external nofollow noreferrer">Евгений Правда</a>,<br> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=documentation-1>Документация<a class=headerlink href=#documentation-1 title="Permanent link">&para;</a></h4> <ul> <li>Перевод документации для некоторых движков таблиц на китайский язык.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5107 rel="external nofollow noreferrer">#5107</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5094 rel="external nofollow noreferrer">#5094</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5087 rel="external nofollow noreferrer">#5087</a><br> (<a href=https://github.com/AlexZFX rel="external nofollow noreferrer">张风啸</a>),<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5068 rel="external nofollow noreferrer">#5068</a> (<a href=https://github.com/neverlee rel="external nofollow noreferrer">никогда<br> Ли</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-1>Улучшения Сборки / Тестирования / Упаковки<a class=headerlink href=#buildtestingpackaging-improvements-1 title="Permanent link">&para;</a></h4> <ul> <li>Правильная печать символов UTF-8 в <code>clickhouse-test</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5084 rel="external nofollow noreferrer">#5084</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте параметр командной строки для clickhouse-client, чтобы всегда загружать предложение<br> данные. <a href=https://github.com/ClickHouse/ClickHouse/pull/5102 rel="external nofollow noreferrer">#5102</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Устраните некоторые предупреждения PVS-Studio.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5082 rel="external nofollow noreferrer">#5082</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Обновление LZ4 <a href=https://github.com/ClickHouse/ClickHouse/pull/5040 rel="external nofollow noreferrer">#5040</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила<br> Кутенин</a>)</li> <li>Добавьте gperf для построения требований к предстоящему запросу на вытягивание #5030.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5110 rel="external nofollow noreferrer">#5110</a><br> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h2 id=clickhouse-release-19-6>ClickHouse релиз 19.6<a class=headerlink href=#clickhouse-release-19-6 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-6-3-18-2019-06-13>ClickHouse релиз 19.6.3.18, 2019-06-13<a class=headerlink href=#clickhouse-release-19-6-3-18-2019-06-13 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-3>Устранение ошибок<a class=headerlink href=#bug-fixes-3 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено в состоянии pushdown для запросов из табличных функций <code>mysql</code> и <code>odbc</code> и соответствующие табличные двигатели. Это исправляет #3540 и #2384. <a href=https://github.com/ClickHouse/ClickHouse/pull/5313 rel="external nofollow noreferrer">#5313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена тупиковая ситуация в Zookeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/5297 rel="external nofollow noreferrer">#5297</a> (<a href=https://github.com/github1youlc rel="external nofollow noreferrer">github1youlc</a>)</li> <li>Разрешить кавычки десятичных знаков в CSV. <a href=https://github.com/ClickHouse/ClickHouse/pull/5284 rel="external nofollow noreferrer">#5284</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a></li> <li>Запретить преобразование из float Inf/NaN в десятичные дроби (исключение throw). <a href=https://github.com/ClickHouse/ClickHouse/pull/5282 rel="external nofollow noreferrer">#5282</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена гонка данных в запросе переименования. <a href=https://github.com/ClickHouse/ClickHouse/pull/5247 rel="external nofollow noreferrer">#5247</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Временно отключите LFAlloc. Использование LFAlloc может привести к большому количеству MAP_FAILED при выделении несжатого кэша и в результате к сбоям запросов на высоконагруженных серверах. <a href=https://github.com/ClickHouse/ClickHouse/commit/cfdba938ce22f16efeec504f7f90206a515b1280 rel="external nofollow noreferrer">cfdba93</a>(<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> </ul> <h3 id=clickhouse-release-19-6-2-11-2019-05-13>ClickHouse релиз 19.6.2.11, 2019-05-13<a class=headerlink href=#clickhouse-release-19-6-2-11-2019-05-13 title="Permanent link">&para;</a></h3> <h4 id=new-features-3>Новые средства<a class=headerlink href=#new-features-3 title="Permanent link">&para;</a></h4> <ul> <li>Выражения TTL для столбцов и таблиц. <a href=https://github.com/ClickHouse/ClickHouse/pull/4212 rel="external nofollow noreferrer">#4212</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>)</li> <li>Добавлена поддержка для <code>brotli</code> сжатие для HTTP-ответов (Accept-Encoding: br) <a href=https://github.com/ClickHouse/ClickHouse/pull/4388 rel="external nofollow noreferrer">#4388</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer">Михаил</a>)</li> <li>Добавлена новая функция <code>isValidUTF8</code> для проверки правильности кодировки набора байтов в кодировке utf-8. <a href=https://github.com/ClickHouse/ClickHouse/pull/4934 rel="external nofollow noreferrer">#4934</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Добавление новой политики балансировки нагрузки <code>first_or_random</code> который отправляет запросы на первый указанный хост, а если он недоступен, то отправляет запросы на случайные хосты shard. Полезно для настройки топологии перекрестной репликации. <a href=https://github.com/ClickHouse/ClickHouse/pull/5012 rel="external nofollow noreferrer">#5012</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer">nvartolomei</a>)</li> </ul> <h4 id=experimental-features-1>Экспериментальная возможность<a class=headerlink href=#experimental-features-1 title="Permanent link">&para;</a></h4> <ul> <li>Добавить настройку <code>index_granularity_bytes</code> (адаптивная степень детализации индекса) для семейства таблиц MergeTree*. <a href=https://github.com/ClickHouse/ClickHouse/pull/4826 rel="external nofollow noreferrer">#4826</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> </ul> <h4 id=improvements-1>Улучшения<a class=headerlink href=#improvements-1 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена поддержка непостоянных и отрицательных аргументов размера и длины для функции <code>substringUTF8</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4989 rel="external nofollow noreferrer">#4989</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Отключить push-вниз в правой таблице в левой присоединиться, левой таблицы в правую присоединиться, и обе таблицы полностью присоединиться. Это исправляет неправильные результаты соединения в некоторых случаях. <a href=https://github.com/ClickHouse/ClickHouse/pull/4846 rel="external nofollow noreferrer">#4846</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li><code>clickhouse-copier</code>: автоматическая загрузка конфигурации задачи из <code>--task-file</code> вариант <a href=https://github.com/ClickHouse/ClickHouse/pull/4876 rel="external nofollow noreferrer">#4876</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавлен обработчик опечаток для фабрики хранения и фабрики табличных функций. <a href=https://github.com/ClickHouse/ClickHouse/pull/4891 rel="external nofollow noreferrer">#4891</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Поддержка звездочек и квалифицированных звездочек для нескольких соединений без вложенных запросов <a href=https://github.com/ClickHouse/ClickHouse/pull/4898 rel="external nofollow noreferrer">#4898</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Сделайте сообщение об ошибке отсутствующего столбца более удобным для пользователя. <a href=https://github.com/ClickHouse/ClickHouse/pull/4915 rel="external nofollow noreferrer">#4915</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=performance-improvements-2>Улучшения в производительности<a class=headerlink href=#performance-improvements-2 title="Permanent link">&para;</a></h4> <ul> <li>Значительное ускорение от присоединения <a href=https://github.com/ClickHouse/ClickHouse/pull/4924 rel="external nofollow noreferrer">#4924</a> (<a href=https://github.com/Gladdy rel="external nofollow noreferrer">Мартийн Баккер</a>)</li> </ul> <h4 id=backward-incompatible-changes>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-changes title="Permanent link">&para;</a></h4> <ul> <li>Заголовок http <code>Query-Id</code> был переименован в <code>X-ClickHouse-Query-Id</code> для последовательности. <a href=https://github.com/ClickHouse/ClickHouse/pull/4972 rel="external nofollow noreferrer">#4972</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer">Михаил</a>)</li> </ul> <h4 id=bug-fixes-4>Устранение ошибок<a class=headerlink href=#bug-fixes-4 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено потенциальное разыменование нулевого указателя в <code>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4900 rel="external nofollow noreferrer">#4900</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлена ошибка запроса с соединением + массив присоединиться <a href=https://github.com/ClickHouse/ClickHouse/pull/4938 rel="external nofollow noreferrer">#4938</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлено зависание при запуске сервера, когда словарь зависит от другого словаря через базу данных с engine=Dictionary. <a href=https://github.com/ClickHouse/ClickHouse/pull/4962 rel="external nofollow noreferrer">#4962</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Partially fix distributed_product_mode = local. It's possible to allow columns of local tables in where/having/order by/… via table aliases. Throw exception if table does not have alias. There's not possible to access to the columns without table aliases yet. <a href=https://github.com/ClickHouse/ClickHouse/pull/4986 rel="external nofollow noreferrer">#4986</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправьте потенциально неправильный результат для <code>SELECT DISTINCT</code> с <code>JOIN</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5001 rel="external nofollow noreferrer">#5001</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлено очень редкое состояние гонки данных, которое могло произойти при выполнении запроса с объединением всех, включающих по крайней мере два выбора из системы.колонны, система.таблицы, система.детали, система.parts_tables или таблицы объединить семью и исполнительского изменять столбцы из связанных таблиц одновременно. <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer">#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-2>Улучшения Сборки / Тестирования / Упаковки<a class=headerlink href=#buildtestingpackaging-improvements-2 title="Permanent link">&para;</a></h4> <ul> <li>Исправлены ошибки тестирования при запуске clickhouse-сервера на другом хосте <a href=https://github.com/ClickHouse/ClickHouse/pull/4713 rel="external nofollow noreferrer">#4713</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>clickhouse-test: отключение последовательностей управления цветом в среде без tty. <a href=https://github.com/ClickHouse/ClickHouse/pull/4937 rel="external nofollow noreferrer">#4937</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>clickhouse-test: разрешить использование любой тестовой базы данных (удалить <code>test.</code> квалификация там, где это возможно) <a href=https://github.com/ClickHouse/ClickHouse/pull/5008 rel="external nofollow noreferrer">#5008</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправление ошибок утилиты <a href=https://github.com/ClickHouse/ClickHouse/pull/5037 rel="external nofollow noreferrer">#5037</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Yandex LFAlloc был добавлен в ClickHouse для выделения данных MarkCache и UncompressedCache различными способами для более надежного улавливания сегментов <a href=https://github.com/ClickHouse/ClickHouse/pull/4995 rel="external nofollow noreferrer">#4995</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Python util, чтобы помочь с backports и changelogs. <a href=https://github.com/ClickHouse/ClickHouse/pull/4949 rel="external nofollow noreferrer">#4949</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h2 id=clickhouse-release-19-5>ClickHouse релиз 19.5<a class=headerlink href=#clickhouse-release-19-5 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-5-4-22-2019-05-13>ClickHouse релиз 19.5.4.22, 2019-05-13<a class=headerlink href=#clickhouse-release-19-5-4-22-2019-05-13 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-5>Устранение ошибок<a class=headerlink href=#bug-fixes-5 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена возможная ошибка в функциях bitmap* <a href=https://github.com/ClickHouse/ClickHouse/pull/5220 rel="external nofollow noreferrer">#5220</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5228 rel="external nofollow noreferrer">#5228</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer">Энди Янг</a>)</li> <li>Исправлено очень редкое состояние гонки данных, которое могло произойти при выполнении запроса с объединением всех, включающих по крайней мере два выбора из системы.колонны, система.таблицы, система.детали, система.parts_tables или таблицы объединить семью и исполнительского изменять столбцы из связанных таблиц одновременно. <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer">#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправления ошибок <code>Set for IN is not created yet in case of using single LowCardinality column in the left part of IN</code>. Эта ошибка произошла, если столбец LowCardinality был частью первичного ключа. #5031 <a href=https://github.com/ClickHouse/ClickHouse/pull/5154 rel="external nofollow noreferrer">#5154</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Модификация функции удержания: если строка удовлетворяет как первому, так и N-му условию, то в состояние данных добавляется только первое удовлетворенное условие. Теперь все условия, которые удовлетворяют в строке данных, добавляются в состояние данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/5119 rel="external nofollow noreferrer">#5119</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer">小路</a>)</li> </ul> <h3 id=clickhouse-release-19-5-3-8-2019-04-18>ClickHouse релиз 19.5.3.8, 2019-04-18<a class=headerlink href=#clickhouse-release-19-5-3-8-2019-04-18 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-6>Устранение ошибок<a class=headerlink href=#bug-fixes-6 title="Permanent link">&para;</a></h4> <ul> <li>Фиксированный тип установки <code>max_partitions_per_insert_block</code> из булев тип uint64. <a href=https://github.com/ClickHouse/ClickHouse/pull/5028 rel="external nofollow noreferrer">#5028</a> (<a href=https://github.com/mhsekhavat rel="external nofollow noreferrer">Мохаммад Хосейн Сехават</a>)</li> </ul> <h3 id=clickhouse-release-19-5-2-6-2019-04-15>ClickHouse релиз 19.5.2.6, 2019-04-15<a class=headerlink href=#clickhouse-release-19-5-2-6-2019-04-15 title="Permanent link">&para;</a></h3> <h4 id=new-features-4>Новые средства<a class=headerlink href=#new-features-4 title="Permanent link">&para;</a></h4> <ul> <li><a href=https://github.com/intel/hyperscan rel="external nofollow noreferrer">Гиперскан</a> было добавлено несколько совпадений регулярных выражений (функции <code>multiMatchAny</code>, <code>multiMatchAnyIndex</code>, <code>multiFuzzyMatchAny</code>, <code>multiFuzzyMatchAnyIndex</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer">#4780</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/4841 rel="external nofollow noreferrer">#4841</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li><code>multiSearchFirstPosition</code> была добавлена функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer">#4780</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Реализуйте предварительно заданный фильтр выражений для каждой строки таблиц. <a href=https://github.com/ClickHouse/ClickHouse/pull/4792 rel="external nofollow noreferrer">#4792</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Новый тип индексов пропуска данных на основе фильтров Блума (может использоваться для <code>equal</code>, <code>in</code> и <code>like</code> должностные обязанности). <a href=https://github.com/ClickHouse/ClickHouse/pull/4499 rel="external nofollow noreferrer">#4499</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Добавлен <code>ASOF JOIN</code> что позволяет запускать запросы, которые присоединяются к самому последнему известному значению. <a href=https://github.com/ClickHouse/ClickHouse/pull/4774 rel="external nofollow noreferrer">#4774</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4867 rel="external nofollow noreferrer">#4867</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4863 rel="external nofollow noreferrer">#4863</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4875 rel="external nofollow noreferrer">#4875</a> (<a href=https://github.com/Gladdy rel="external nofollow noreferrer">Мартийн Баккер</a>, <a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Переписать несколько раз <code>COMMA JOIN</code> к <code>CROSS JOIN</code>. Затем перепишите их на <code>INNER JOIN</code> если можно. <a href=https://github.com/ClickHouse/ClickHouse/pull/4661 rel="external nofollow noreferrer">#4661</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=improvement-9>Улучшение<a class=headerlink href=#improvement-9 title="Permanent link">&para;</a></h4> <ul> <li><code>topK</code> и <code>topKWeighted</code> теперь поддерживает пользовательские <code>loadFactor</code> (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/4252 rel="external nofollow noreferrer">#4252</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4634 rel="external nofollow noreferrer">#4634</a> (<a href=https://github.com/kirillDanshin rel="external nofollow noreferrer">Кирилл Даньшин</a>)</li> <li>Разрешить использовать <code>parallel_replicas_count &gt; 1</code> даже для таблиц без выборки (настройка для них просто игнорируется). В предыдущих версиях это приводило к исключениям. <a href=https://github.com/ClickHouse/ClickHouse/pull/4637 rel="external nofollow noreferrer">#4637</a> (<a href=https://github.com/digitalist rel="external nofollow noreferrer">Алексей Елыманов</a>)</li> <li>Поддержка <code>CREATE OR REPLACE VIEW</code>. Позволяет создать представление или задать новое определение в одном операторе. <a href=https://github.com/ClickHouse/ClickHouse/pull/4654 rel="external nofollow noreferrer">#4654</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer">Борис Гранво</a>)</li> <li><code>Buffer</code> движок таблицы теперь поддерживает <code>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4671 rel="external nofollow noreferrer">#4671</a> (<a href=https://github.com/LiuYangkuan rel="external nofollow noreferrer">Янкуань Лю</a>)</li> <li>Добавить возможность запуска реплицированной таблицы без метаданных в zookeeper in <code>readonly</code> режим. <a href=https://github.com/ClickHouse/ClickHouse/pull/4691 rel="external nofollow noreferrer">#4691</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено мерцание индикатора выполнения в clickhouse-клиенте. Эта проблема была наиболее заметна при использовании <code>FORMAT Null</code> с потоковыми запросами. <a href=https://github.com/ClickHouse/ClickHouse/pull/4811 rel="external nofollow noreferrer">#4811</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Разрешить отключать функции с помощью <code>hyperscan</code> библиотека на основе каждого пользователя, чтобы ограничить потенциально чрезмерное и неконтролируемое использование ресурсов. <a href=https://github.com/ClickHouse/ClickHouse/pull/4816 rel="external nofollow noreferrer">#4816</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте номер версии, регистрирующий все ошибки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4824 rel="external nofollow noreferrer">#4824</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавлено ограничение на использование <code>multiMatch</code> функции, которые требуют размера строки, чтобы вписаться в <code>unsigned int</code>. Также добавлено ограничение по количеству аргументов для <code>multiSearch</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/4834 rel="external nofollow noreferrer">#4834</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Улучшено использование пространства царапин и обработка ошибок в Hyperscan. <a href=https://github.com/ClickHouse/ClickHouse/pull/4866 rel="external nofollow noreferrer">#4866</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Заполнить <code>system.graphite_detentions</code> из таблицы config of <code>*GraphiteMergeTree</code> столы для двигателей. <a href=https://github.com/ClickHouse/ClickHouse/pull/4584 rel="external nofollow noreferrer">#4584</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer">Mikhail f. Shiryaev</a>)</li> <li>Переименовать <code>trigramDistance</code> функция к <code>ngramDistance</code> и добавьте больше функций с помощью <code>CaseInsensitive</code> и <code>UTF</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4602 rel="external nofollow noreferrer">#4602</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Улучшен расчет индексов пропуска данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/4640 rel="external nofollow noreferrer">#4640</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Держать обычные, <code>DEFAULT</code>, <code>MATERIALIZED</code> и <code>ALIAS</code> столбцы в одном списке (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/2867 rel="external nofollow noreferrer">#2867</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4707 rel="external nofollow noreferrer">#4707</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> </ul> <h4 id=bug-fix-26>Исправление ошибок<a class=headerlink href=#bug-fix-26 title="Permanent link">&para;</a></h4> <ul> <li>Избегать <code>std::terminate</code> в случае сбоя выделения памяти. Сейчас <code>std::bad_alloc</code> исключение создается, как и ожидалось. <a href=https://github.com/ClickHouse/ClickHouse/pull/4665 rel="external nofollow noreferrer">#4665</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено чтение capnproto из буфера. Иногда файлы не были успешно загружены по протоколу HTTP. <a href=https://github.com/ClickHouse/ClickHouse/pull/4674 rel="external nofollow noreferrer">#4674</a> (<a href=https://github.com/smirnov-vs rel="external nofollow noreferrer">Владислав</a>)</li> <li>Исправления ошибок <code>Unknown log entry type: 0</code> после <code>OPTIMIZE TABLE FINAL</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/4683 rel="external nofollow noreferrer">#4683</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Неверные аргументы, чтобы <code>hasAny</code> или <code>hasAll</code> функции может привести к обработка выхода онлайн / оффлайн. <a href=https://github.com/ClickHouse/ClickHouse/pull/4698 rel="external nofollow noreferrer">#4698</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Взаимоблокировка может произойти во время выполнения <code>DROP DATABASE dictionary</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/4701 rel="external nofollow noreferrer">#4701</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить неопределенное поведение в <code>median</code> и <code>quantile</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/4702 rel="external nofollow noreferrer">#4702</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Исправьте обнаружение уровня сжатия, когда <code>network_compression_method</code> в нижнем регистре. Разбитые в в19.1. <a href=https://github.com/ClickHouse/ClickHouse/pull/4706 rel="external nofollow noreferrer">#4706</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Фиксированное незнание <code>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> настройка (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/4658 rel="external nofollow noreferrer">#4658</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4718 rel="external nofollow noreferrer">#4718</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Чинить <code>histogram</code> поведение функции с помощью <code>Distributed</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/4741 rel="external nofollow noreferrer">#4741</a> (<a href=https://github.com/olegkv rel="external nofollow noreferrer">olegkv</a>)</li> <li>Исправлен отчет Цан <code>destroy of a locked mutex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4742 rel="external nofollow noreferrer">#4742</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлен отчет TSan о завершении работы из-за состояния гонки в использовании системных журналов. Исправлено потенциальное использование-после освобождения при выключении, когда включен part_log. <a href=https://github.com/ClickHouse/ClickHouse/pull/4758 rel="external nofollow noreferrer">#4758</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить перепроверять детали в <code>ReplicatedMergeTreeAlterThread</code> в случае ошибки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4772 rel="external nofollow noreferrer">#4772</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Арифметические операции над промежуточными состояниями агрегатной функции не работали для постоянных аргументов (таких как результаты подзапросов). <a href=https://github.com/ClickHouse/ClickHouse/pull/4776 rel="external nofollow noreferrer">#4776</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Всегда делайте обратные кавычки имен столбцов в метаданных. В противном случае невозможно создать таблицу с именем столбца <code>index</code> (сервер не будет перезапущен из-за неправильной формы <code>ATTACH</code> запрос в метаданных). <a href=https://github.com/ClickHouse/ClickHouse/pull/4782 rel="external nofollow noreferrer">#4782</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить сбой в работе <code>ALTER ... MODIFY ORDER BY</code> на <code>Distributed</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/pull/4790 rel="external nofollow noreferrer">#4790</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer">TCeason</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в <code>JOIN ON</code> с включенной функцией <code>enable_optimize_predicate_expression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4794 rel="external nofollow noreferrer">#4794</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправлена ошибка с добавлением посторонней строки после использования сообщения protobuf от Кафки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4808 rel="external nofollow noreferrer">#4808</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправить аварию <code>JOIN</code> на не значение столбца против значение null. Чинить <code>NULLs</code> в правой клавиш в <code>ANY JOIN</code> + <code>join_use_nulls</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4815 rel="external nofollow noreferrer">#4815</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка сегментации в <code>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer">#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлено состояние гонки в <code>SELECT</code> от <code>system.tables</code> если таблица переименована или изменена одновременно. <a href=https://github.com/ClickHouse/ClickHouse/pull/4836 rel="external nofollow noreferrer">#4836</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена гонка данных при извлечении части данных, которая уже устарела. <a href=https://github.com/ClickHouse/ClickHouse/pull/4839 rel="external nofollow noreferrer">#4839</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена редкая гонка данных, которая может произойти во время <code>RENAME</code> таблица семейства MergeTree. <a href=https://github.com/ClickHouse/ClickHouse/pull/4844 rel="external nofollow noreferrer">#4844</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка сегментации в функции <code>arrayIntersect</code>. Ошибка сегментации может произойти, если функция вызывается со смешанными постоянными и обычными аргументами. <a href=https://github.com/ClickHouse/ClickHouse/pull/4847 rel="external nofollow noreferrer">#4847</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer">Лисян Цянь</a>)</li> <li>Исправлено чтение из <code>Array(LowCardinality)</code> столбец в редком случае, когда столбец содержит длинную последовательность пустых массивов. <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer">#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправить сбой в работе <code>FULL/RIGHT JOIN</code> когда мы присоединились на обнуляемой против не допускает значения null. <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer">#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Чинить <code>No message received</code> исключение при извлечении деталей между репликами. <a href=https://github.com/ClickHouse/ClickHouse/pull/4856 rel="external nofollow noreferrer">#4856</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено <code>arrayIntersect</code> неправильный результат функции в случае нескольких повторяющихся значений в одном массиве. <a href=https://github.com/ClickHouse/ClickHouse/pull/4871 rel="external nofollow noreferrer">#4871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправьте состояние гонки во время параллельной работы <code>ALTER COLUMN</code> запросы, которые могут привести к сбою сервера (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/3421 rel="external nofollow noreferrer">#3421</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4592 rel="external nofollow noreferrer">#4592</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Исправьте неправильный результат в <code>FULL/RIGHT JOIN</code> с колонкой const. <a href=https://github.com/ClickHouse/ClickHouse/pull/4723 rel="external nofollow noreferrer">#4723</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправьте дубликаты внутри <code>GLOBAL JOIN</code> с Asterisk. <a href=https://github.com/ClickHouse/ClickHouse/pull/4705 rel="external nofollow noreferrer">#4705</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправить вычет параметров в <code>ALTER MODIFY</code> из колонки <code>CODEC</code> если тип столбца не указан. <a href=https://github.com/ClickHouse/ClickHouse/pull/4883 rel="external nofollow noreferrer">#4883</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Функции <code>cutQueryStringAndFragment()</code> и <code>queryStringAndFragment()</code> теперь работает правильно, когда <code>URL</code> содержит фрагмент и не содержит запроса. <a href=https://github.com/ClickHouse/ClickHouse/pull/4894 rel="external nofollow noreferrer">#4894</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправлена редкая ошибка при настройке <code>min_bytes_to_use_direct_io</code> больше нуля, что происходит, когда поток должен искать назад в файле столбца. <a href=https://github.com/ClickHouse/ClickHouse/pull/4897 rel="external nofollow noreferrer">#4897</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте неправильные типы аргументов для агрегатных функций с помощью <code>LowCardinality</code> аргументы (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/4919 rel="external nofollow noreferrer">#4919</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4922 rel="external nofollow noreferrer">#4922</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправить неправильное имя квалификация в <code>GLOBAL JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4969 rel="external nofollow noreferrer">#4969</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Фиксированная функция <code>toISOWeek</code> результат за 1970 год. <a href=https://github.com/ClickHouse/ClickHouse/pull/4988 rel="external nofollow noreferrer">#4988</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Чинить <code>DROP</code>, <code>TRUNCATE</code> и <code>OPTIMIZE</code> дублирование запросов при выполнении на <code>ON CLUSTER</code> для <code>ReplicatedMergeTree*</code> столы семейные. <a href=https://github.com/ClickHouse/ClickHouse/pull/4991 rel="external nofollow noreferrer">#4991</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> </ul> <h4 id=backward-incompatible-change-8>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-change-8 title="Permanent link">&para;</a></h4> <ul> <li>Переименовать настройки <code>insert_sample_with_metadata</code> ставить <code>input_format_defaults_for_omitted_fields</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4771 rel="external nofollow noreferrer">#4771</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Добавлена настройка <code>max_partitions_per_insert_block</code> (со значением 100 по умолчанию). Если вставленный блок содержит большее количество разделов, то возникает исключение. Установите его равным 0, если вы хотите удалить ограничение (не рекомендуется). <a href=https://github.com/ClickHouse/ClickHouse/pull/4845 rel="external nofollow noreferrer">#4845</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Функции мульти-поиска были переименованы (<code>multiPosition</code> к <code>multiSearchAllPositions</code>, <code>multiSearch</code> к <code>multiSearchAny</code>, <code>firstMatch</code> к <code>multiSearchFirstIndex</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer">#4780</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> </ul> <h4 id=performance-improvement-6>Улучшение производительности<a class=headerlink href=#performance-improvement-6 title="Permanent link">&para;</a></h4> <ul> <li>Оптимизировать Volnitsky поисковик путем встраивания, дающая около 5-10% улучшение поиска по запросам со многими иглами или много схожих биграмм. <a href=https://github.com/ClickHouse/ClickHouse/pull/4862 rel="external nofollow noreferrer">#4862</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Исправлена проблема производительности при настройке <code>use_uncompressed_cache</code> больше нуля, который появился при считывании всех данных, содержащихся в кэше. <a href=https://github.com/ClickHouse/ClickHouse/pull/4913 rel="external nofollow noreferrer">#4913</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-10>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-10 title="Permanent link">&para;</a></h4> <ul> <li>Упрочнение отладочной сборки: более детализированные сопоставления памяти и ASLR; добавление защиты памяти для кэша меток и индекса. Это позволяет найти больше ошибок топтания памяти в случае, когда ASan и MSan не могут этого сделать. <a href=https://github.com/ClickHouse/ClickHouse/pull/4632 rel="external nofollow noreferrer">#4632</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте поддержку переменных cmake <code>ENABLE_PROTOBUF</code>, <code>ENABLE_PARQUET</code> и <code>ENABLE_BROTLI</code> который позволяет включить/выключить выше особенностей (так же, как мы можем сделать для librdkafka, MySQL и т. д). <a href=https://github.com/ClickHouse/ClickHouse/pull/4669 rel="external nofollow noreferrer">#4669</a> (<a href=https://github.com/silviucpp rel="external nofollow noreferrer">Сильвиу Развивается</a>)</li> <li>Добавьте возможность печати списка процессов и stacktraces всех потоков, если некоторые запросы зависли после тестового запуска. <a href=https://github.com/ClickHouse/ClickHouse/pull/4675 rel="external nofollow noreferrer">#4675</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавить повторные попытки ВКЛ <code>Connection loss</code> ошибка в работе <code>clickhouse-test</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4682 rel="external nofollow noreferrer">#4682</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавьте build FreeBSD с Vagrant и построить с резьбой дезинфицирующее средство на упаковщик скриптов. <a href=https://github.com/ClickHouse/ClickHouse/pull/4712 rel="external nofollow noreferrer">#4712</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4748 rel="external nofollow noreferrer">#4748</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Теперь пользователь запросил пароль для пользователя <code>'default'</code> во время установки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4725 rel="external nofollow noreferrer">#4725</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Подавить предупреждение в <code>rdkafka</code> библиотека. <a href=https://github.com/ClickHouse/ClickHouse/pull/4740 rel="external nofollow noreferrer">#4740</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Разрешить возможность сборки без ssl. <a href=https://github.com/ClickHouse/ClickHouse/pull/4750 rel="external nofollow noreferrer">#4750</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавьте способ запуска образа clickhouse-server от пользовательского пользователя. <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer">#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer">Mikhail f. Shiryaev</a>)</li> <li>Обновите contrib boost до 1.69. <a href=https://github.com/ClickHouse/ClickHouse/pull/4793 rel="external nofollow noreferrer">#4793</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Отключить использование <code>mremap</code> при компиляции с помощью дезинфицирующего средства для нитей. Как ни странно, Цан не перехватил его <code>mremap</code> (хотя это действительно перехват <code>mmap</code>, <code>munmap</code>) это приводит к ложным срабатываниям. Исправлен отчет TSan в тестах с сохранением состояния. <a href=https://github.com/ClickHouse/ClickHouse/pull/4859 rel="external nofollow noreferrer">#4859</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте тестовую проверку с использованием схемы формата через HTTP-интерфейс. <a href=https://github.com/ClickHouse/ClickHouse/pull/4864 rel="external nofollow noreferrer">#4864</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> </ul> <h2 id=clickhouse-release-19-4>ClickHouse релиз 19.4<a class=headerlink href=#clickhouse-release-19-4 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-4-4-33-2019-04-17>ClickHouse релиз 19.4.4.33, 2019-04-17<a class=headerlink href=#clickhouse-release-19-4-4-33-2019-04-17 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-7>Устранение ошибок<a class=headerlink href=#bug-fixes-7 title="Permanent link">&para;</a></h4> <ul> <li>Избегать <code>std::terminate</code> в случае сбоя выделения памяти. Сейчас <code>std::bad_alloc</code> исключение создается, как и ожидалось. <a href=https://github.com/ClickHouse/ClickHouse/pull/4665 rel="external nofollow noreferrer">#4665</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено чтение capnproto из буфера. Иногда файлы не были успешно загружены по протоколу HTTP. <a href=https://github.com/ClickHouse/ClickHouse/pull/4674 rel="external nofollow noreferrer">#4674</a> (<a href=https://github.com/smirnov-vs rel="external nofollow noreferrer">Владислав</a>)</li> <li>Исправления ошибок <code>Unknown log entry type: 0</code> после <code>OPTIMIZE TABLE FINAL</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/4683 rel="external nofollow noreferrer">#4683</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Неверные аргументы, чтобы <code>hasAny</code> или <code>hasAll</code> функции может привести к обработка выхода онлайн / оффлайн. <a href=https://github.com/ClickHouse/ClickHouse/pull/4698 rel="external nofollow noreferrer">#4698</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Взаимоблокировка может произойти во время выполнения <code>DROP DATABASE dictionary</code> запрос. <a href=https://github.com/ClickHouse/ClickHouse/pull/4701 rel="external nofollow noreferrer">#4701</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить неопределенное поведение в <code>median</code> и <code>quantile</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/4702 rel="external nofollow noreferrer">#4702</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Исправьте обнаружение уровня сжатия, когда <code>network_compression_method</code> в нижнем регистре. Разбитые в в19.1. <a href=https://github.com/ClickHouse/ClickHouse/pull/4706 rel="external nofollow noreferrer">#4706</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Фиксированное незнание <code>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> настройка (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/4658 rel="external nofollow noreferrer">#4658</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4718 rel="external nofollow noreferrer">#4718</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Чинить <code>histogram</code> поведение функции с помощью <code>Distributed</code> таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/4741 rel="external nofollow noreferrer">#4741</a> (<a href=https://github.com/olegkv rel="external nofollow noreferrer">olegkv</a>)</li> <li>Исправлен отчет Цан <code>destroy of a locked mutex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4742 rel="external nofollow noreferrer">#4742</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлен отчет TSan о завершении работы из-за состояния гонки в использовании системных журналов. Исправлено потенциальное использование-после освобождения при выключении, когда включен part_log. <a href=https://github.com/ClickHouse/ClickHouse/pull/4758 rel="external nofollow noreferrer">#4758</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить перепроверять детали в <code>ReplicatedMergeTreeAlterThread</code> в случае ошибки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4772 rel="external nofollow noreferrer">#4772</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Арифметические операции над промежуточными состояниями агрегатной функции не работали для постоянных аргументов (таких как результаты подзапросов). <a href=https://github.com/ClickHouse/ClickHouse/pull/4776 rel="external nofollow noreferrer">#4776</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Всегда делайте обратные кавычки имен столбцов в метаданных. В противном случае невозможно создать таблицу с именем столбца <code>index</code> (сервер не будет перезапущен из-за неправильной формы <code>ATTACH</code> запрос в метаданных). <a href=https://github.com/ClickHouse/ClickHouse/pull/4782 rel="external nofollow noreferrer">#4782</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправить сбой в работе <code>ALTER ... MODIFY ORDER BY</code> на <code>Distributed</code> стол. <a href=https://github.com/ClickHouse/ClickHouse/pull/4790 rel="external nofollow noreferrer">#4790</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer">TCeason</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в <code>JOIN ON</code> с включенной функцией <code>enable_optimize_predicate_expression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4794 rel="external nofollow noreferrer">#4794</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправлена ошибка с добавлением посторонней строки после использования сообщения protobuf от Кафки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4808 rel="external nofollow noreferrer">#4808</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправлена ошибка сегментации в <code>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer">#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлено состояние гонки в <code>SELECT</code> от <code>system.tables</code> если таблица переименована или изменена одновременно. <a href=https://github.com/ClickHouse/ClickHouse/pull/4836 rel="external nofollow noreferrer">#4836</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена гонка данных при извлечении части данных, которая уже устарела. <a href=https://github.com/ClickHouse/ClickHouse/pull/4839 rel="external nofollow noreferrer">#4839</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена редкая гонка данных, которая может произойти во время <code>RENAME</code> таблица семейства MergeTree. <a href=https://github.com/ClickHouse/ClickHouse/pull/4844 rel="external nofollow noreferrer">#4844</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка сегментации в функции <code>arrayIntersect</code>. Ошибка сегментации может произойти, если функция вызывается со смешанными постоянными и обычными аргументами. <a href=https://github.com/ClickHouse/ClickHouse/pull/4847 rel="external nofollow noreferrer">#4847</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer">Лисян Цянь</a>)</li> <li>Исправлено чтение из <code>Array(LowCardinality)</code> столбец в редком случае, когда столбец содержит длинную последовательность пустых массивов. <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer">#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Чинить <code>No message received</code> исключение при извлечении деталей между репликами. <a href=https://github.com/ClickHouse/ClickHouse/pull/4856 rel="external nofollow noreferrer">#4856</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено <code>arrayIntersect</code> неправильный результат функции в случае нескольких повторяющихся значений в одном массиве. <a href=https://github.com/ClickHouse/ClickHouse/pull/4871 rel="external nofollow noreferrer">#4871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправьте состояние гонки во время параллельной работы <code>ALTER COLUMN</code> запросы, которые могут привести к сбою сервера (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/3421 rel="external nofollow noreferrer">#3421</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4592 rel="external nofollow noreferrer">#4592</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Исправьте вычет параметров в <code>ALTER MODIFY</code> из колонки <code>CODEC</code> если тип столбца не указан. <a href=https://github.com/ClickHouse/ClickHouse/pull/4883 rel="external nofollow noreferrer">#4883</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Функции <code>cutQueryStringAndFragment()</code> и <code>queryStringAndFragment()</code> теперь работает правильно, когда <code>URL</code> содержит фрагмент и не содержит запроса. <a href=https://github.com/ClickHouse/ClickHouse/pull/4894 rel="external nofollow noreferrer">#4894</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправлена редкая ошибка при настройке <code>min_bytes_to_use_direct_io</code> больше нуля, что происходит, когда поток должен искать назад в файле столбца. <a href=https://github.com/ClickHouse/ClickHouse/pull/4897 rel="external nofollow noreferrer">#4897</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте неправильные типы аргументов для агрегатных функций с помощью <code>LowCardinality</code> аргументы (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/4919 rel="external nofollow noreferrer">#4919</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4922 rel="external nofollow noreferrer">#4922</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Фиксированная функция <code>toISOWeek</code> результат за 1970 год. <a href=https://github.com/ClickHouse/ClickHouse/pull/4988 rel="external nofollow noreferrer">#4988</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Чинить <code>DROP</code>, <code>TRUNCATE</code> и <code>OPTIMIZE</code> дублирование запросов при выполнении на <code>ON CLUSTER</code> для <code>ReplicatedMergeTree*</code> столы семейные. <a href=https://github.com/ClickHouse/ClickHouse/pull/4991 rel="external nofollow noreferrer">#4991</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> </ul> <h4 id=improvements-2>Улучшения<a class=headerlink href=#improvements-2 title="Permanent link">&para;</a></h4> <ul> <li>Держать обычные, <code>DEFAULT</code>, <code>MATERIALIZED</code> и <code>ALIAS</code> столбцы в одном списке (Исправлена проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/2867 rel="external nofollow noreferrer">#2867</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4707 rel="external nofollow noreferrer">#4707</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> </ul> <h3 id=clickhouse-release-19-4-3-11-2019-04-02>ClickHouse релиз 19.4.3.11, 2019-04-02<a class=headerlink href=#clickhouse-release-19-4-3-11-2019-04-02 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-8>Устранение ошибок<a class=headerlink href=#bug-fixes-8 title="Permanent link">&para;</a></h4> <ul> <li>Исправить сбой в работе <code>FULL/RIGHT JOIN</code> когда мы присоединились на обнуляемой против не допускает значения null. <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer">#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка сегментации в <code>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer">#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-11>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-11 title="Permanent link">&para;</a></h4> <ul> <li>Добавьте способ запуска образа clickhouse-server от пользовательского пользователя. <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer">#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer">Mikhail f. Shiryaev</a>)</li> </ul> <h3 id=clickhouse-release-19-4-2-7-2019-03-30>ClickHouse релиз 19.4.2.7, 2019-03-30<a class=headerlink href=#clickhouse-release-19-4-2-7-2019-03-30 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-9>Устранение ошибок<a class=headerlink href=#bug-fixes-9 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено чтение из <code>Array(LowCardinality)</code> столбец в редком случае, когда столбец содержит длинную последовательность пустых массивов. <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer">#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> </ul> <h3 id=clickhouse-release-19-4-1-3-2019-03-19>ClickHouse релиз 19.4.1.3, 2019-03-19<a class=headerlink href=#clickhouse-release-19-4-1-3-2019-03-19 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-10>Устранение ошибок<a class=headerlink href=#bug-fixes-10 title="Permanent link">&para;</a></h4> <ul> <li>Исправлены удаленные запросы, содержащие и то, и другое <code>LIMIT BY</code> и <code>LIMIT</code>. Ранее, если <code>LIMIT BY</code> и <code>LIMIT</code> были использованы для удаленного запроса, <code>LIMIT</code> может случиться и раньше <code>LIMIT BY</code>, что привело к слишком отфильтрованному результату. <a href=https://github.com/ClickHouse/ClickHouse/pull/4708 rel="external nofollow noreferrer">#4708</a> (<a href=https://github.com/kvap rel="external nofollow noreferrer">Константин Сергеевич Пан</a>)</li> </ul> <h3 id=clickhouse-release-19-4-0-49-2019-03-09>ClickHouse релиз 19.4.0.49, 2019-03-09<a class=headerlink href=#clickhouse-release-19-4-0-49-2019-03-09 title="Permanent link">&para;</a></h3> <h4 id=new-features-5>Новые средства<a class=headerlink href=#new-features-5 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена полная поддержка для <code>Protobuf</code> формат (ввод и вывод, вложенные структуры данных). <a href=https://github.com/ClickHouse/ClickHouse/pull/4174 rel="external nofollow noreferrer">#4174</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4493 rel="external nofollow noreferrer">#4493</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Добавлены растровые функции с ревущими растровыми изображениями. <a href=https://github.com/ClickHouse/ClickHouse/pull/4207 rel="external nofollow noreferrer">#4207</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer">Энди Янг</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/4568 rel="external nofollow noreferrer">#4568</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Поддержка формата паркета. <a href=https://github.com/ClickHouse/ClickHouse/pull/4448 rel="external nofollow noreferrer">#4448</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Для сравнения нечетких строк было добавлено расстояние N-грамм. Это похоже на Q-граммовые метрики в языке R. <a href=https://github.com/ClickHouse/ClickHouse/pull/4466 rel="external nofollow noreferrer">#4466</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Комбинируйте правила для свертки графита из выделенных шаблонов агрегации и хранения. <a href=https://github.com/ClickHouse/ClickHouse/pull/4426 rel="external nofollow noreferrer">#4426</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer">Mikhail f. Shiryaev</a>)</li> <li>Добавлен <code>max_execution_speed</code> и <code>max_execution_speed_bytes</code> чтобы ограничить использование ресурсов. Добавлен <code>min_execution_speed_bytes</code> установка в дополнение к <code>min_execution_speed</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4430 rel="external nofollow noreferrer">#4430</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Реализованная функция <code>flatten</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4555 rel="external nofollow noreferrer">#4555</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4409 rel="external nofollow noreferrer">#4409</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>, <a href=https://github.com/kzon rel="external nofollow noreferrer">произв</a>)</li> <li>Добавленные функции <code>arrayEnumerateDenseRanked</code> и <code>arrayEnumerateUniqRanked</code> (это как будто <code>arrayEnumerateUniq</code> но позволяет точно настроить глубину массива, чтобы заглянуть внутрь многомерных массивов). <a href=https://github.com/ClickHouse/ClickHouse/pull/4475 rel="external nofollow noreferrer">#4475</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/4601 rel="external nofollow noreferrer">#4601</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Multiple JOINS with some restrictions: no asterisks, no complex aliases in ON/WHERE/GROUP BY/… <a href=https://github.com/ClickHouse/ClickHouse/pull/4462 rel="external nofollow noreferrer">#4462</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=bug-fixes-11>Устранение ошибок<a class=headerlink href=#bug-fixes-11 title="Permanent link">&para;</a></h4> <ul> <li>Этот релиз также содержит все исправления ошибок из 19.3 и 19.1.</li> <li>Исправлена ошибка в индексах пропуска данных: неправильный порядок гранул после вставки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4407 rel="external nofollow noreferrer">#4407</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Исправлено <code>set</code> индекс для <code>Nullable</code> и <code>LowCardinality</code> столбцы. Перед ним, <code>set</code> индекс с <code>Nullable</code> или <code>LowCardinality</code> колонка привела к ошибке <code>Data type must be deserialized with multiple streams</code> во время выбора. <a href=https://github.com/ClickHouse/ClickHouse/pull/4594 rel="external nofollow noreferrer">#4594</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Правильно установите update_time на полный <code>executable</code> обновление словаря. <a href=https://github.com/ClickHouse/ClickHouse/pull/4551 rel="external nofollow noreferrer">#4551</a> (<a href=https://github.com/temoon rel="external nofollow noreferrer">Тема Новиков</a>)</li> <li>Исправлена поломка индикатора выполнения в 19.3. <a href=https://github.com/ClickHouse/ClickHouse/pull/4627 rel="external nofollow noreferrer">#4627</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Исправлены несогласованные значения MemoryTracker при сжатии области памяти, в некоторых случаях. <a href=https://github.com/ClickHouse/ClickHouse/pull/4619 rel="external nofollow noreferrer">#4619</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено неопределенное поведение в ThreadPool. <a href=https://github.com/ClickHouse/ClickHouse/pull/4612 rel="external nofollow noreferrer">#4612</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена очень редкая ошибка с сообщением <code>mutex lock failed: Invalid argument</code> это может произойти, когда таблица MergeTree была удалена одновременно с SELECT. <a href=https://github.com/ClickHouse/ClickHouse/pull/4608 rel="external nofollow noreferrer">#4608</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Совместимость драйвера ODBC с <code>LowCardinality</code> тип данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/4381 rel="external nofollow noreferrer">#4381</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>FreeBSD: исправление для <code>AIOcontextPool: Found io_event with unknown id 0</code> ошибка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4438 rel="external nofollow noreferrer">#4438</a> (<a href=https://github.com/urgordeadbeef rel="external nofollow noreferrer">urgordeadbeef</a>)</li> <li><code>system.part_log</code> таблица была создана независимо от конфигурации. <a href=https://github.com/ClickHouse/ClickHouse/pull/4483 rel="external nofollow noreferrer">#4483</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте неопределенное поведение в <code>dictIsIn</code> функция для словарей кэша. <a href=https://github.com/ClickHouse/ClickHouse/pull/4515 rel="external nofollow noreferrer">#4515</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Fixed a deadlock when a SELECT query locks the same table multiple times (e.g. from different threads or when executing multiple subqueries) and there is a concurrent DDL query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4535 rel="external nofollow noreferrer">#4535</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Отключите compile_expressions по умолчанию, пока мы не получим собственные <code>llvm</code> contrib и может проверить его с помощью <code>clang</code> и <code>asan</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4579 rel="external nofollow noreferrer">#4579</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Предотвращать <code>std::terminate</code> когда <code>invalidate_query</code> для <code>clickhouse</code> внешний источник словаря вернул неверный результирующий набор (пустой или более одной строки или более одного столбца). Исправлена проблема, когда <code>invalidate_query</code> выполнялось каждые пять секунд независимо от <code>lifetime</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4583 rel="external nofollow noreferrer">#4583</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Избегайте тупиковой ситуации, когда <code>invalidate_query</code> для словаря с <code>clickhouse</code> источник был задействован <code>system.dictionaries</code> таблица или <code>Dictionaries</code> база данных (редкий случай). <a href=https://github.com/ClickHouse/ClickHouse/pull/4599 rel="external nofollow noreferrer">#4599</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено перекрестное соединение с пустым местом. <a href=https://github.com/ClickHouse/ClickHouse/pull/4598 rel="external nofollow noreferrer">#4598</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в функции «replicate» когда передается постоянный аргумент. <a href=https://github.com/ClickHouse/ClickHouse/pull/4603 rel="external nofollow noreferrer">#4603</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте лямбда-функцию с помощью оптимизатора предикатов. <a href=https://github.com/ClickHouse/ClickHouse/pull/4408 rel="external nofollow noreferrer">#4408</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Несколько соединений несколько исправлений. <a href=https://github.com/ClickHouse/ClickHouse/pull/4595 rel="external nofollow noreferrer">#4595</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=improvements-3>Улучшения<a class=headerlink href=#improvements-3 title="Permanent link">&para;</a></h4> <ul> <li>Поддержка псевдонимов в разделе JOIN ON для правых столбцов таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/4412 rel="external nofollow noreferrer">#4412</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Результат нескольких соединений требует правильных имен результатов, которые будут использоваться в подсекциях. В результате замените плоские псевдонимы именами источников. <a href=https://github.com/ClickHouse/ClickHouse/pull/4474 rel="external nofollow noreferrer">#4474</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Улучшить нажимаем-вниз-логика вступила заявления. <a href=https://github.com/ClickHouse/ClickHouse/pull/4387 rel="external nofollow noreferrer">#4387</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h4 id=performance-improvements-3>Улучшения в производительности<a class=headerlink href=#performance-improvements-3 title="Permanent link">&para;</a></h4> <ul> <li>Улучшенная эвристика «move to PREWHERE» оптимизация. <a href=https://github.com/ClickHouse/ClickHouse/pull/4405 rel="external nofollow noreferrer">#4405</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Используйте правильные таблицы поиска, которые используют API HashTable для 8-битных и 16-битных ключей. <a href=https://github.com/ClickHouse/ClickHouse/pull/4536 rel="external nofollow noreferrer">#4536</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Улучшена производительность сравнения строк. <a href=https://github.com/ClickHouse/ClickHouse/pull/4564 rel="external nofollow noreferrer">#4564</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Очистите распределенную очередь DDL в отдельном потоке, чтобы она не замедляла основной цикл, обрабатывающий распределенные задачи DDL. <a href=https://github.com/ClickHouse/ClickHouse/pull/4502 rel="external nofollow noreferrer">#4502</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Когда <code>min_bytes_to_use_direct_io</code> имеет значение 1, не каждый файл был открыт в режиме O_DIRECT, потому что размер данных для чтения иногда недооценивался размером одного сжатого блока. <a href=https://github.com/ClickHouse/ClickHouse/pull/4526 rel="external nofollow noreferrer">#4526</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-12>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-12 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена поддержка clang-9 <a href=https://github.com/ClickHouse/ClickHouse/pull/4604 rel="external nofollow noreferrer">#4604</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправь ошибку <code>__asm__</code> инструкции (опять же) <a href=https://github.com/ClickHouse/ClickHouse/pull/4621 rel="external nofollow noreferrer">#4621</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer">Константин Подшумок</a>)</li> <li>Добавить возможность задавать настройки для <code>clickhouse-performance-test</code> из командной строки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4437 rel="external nofollow noreferrer">#4437</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавьте тесты словарей в интеграционные тесты. <a href=https://github.com/ClickHouse/ClickHouse/pull/4477 rel="external nofollow noreferrer">#4477</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавлены запросы от бенчмарка на веб-сайте к автоматизированным тестам производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/4496 rel="external nofollow noreferrer">#4496</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>xxhash.h</code> не существует во внешнем lz4, потому что это деталь реализации, и ее символы находятся в пространстве имен с <code>XXH_NAMESPACE</code> макрос. Когда lz4 является внешним, xxHash также должен быть внешним, и зависимые должны быть связаны с ним. <a href=https://github.com/ClickHouse/ClickHouse/pull/4495 rel="external nofollow noreferrer">#4495</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer">Оривей Деш</a>)</li> <li>Исправлен случай, когда <code>quantileTiming</code> агрегатная функция может быть вызвана с отрицательным или плавающим аргументом (это исправляет тест fuzz с неопределенным поведением дезинфицирующего средства). <a href=https://github.com/ClickHouse/ClickHouse/pull/4506 rel="external nofollow noreferrer">#4506</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправление орфографических ошибок. <a href=https://github.com/ClickHouse/ClickHouse/pull/4531 rel="external nofollow noreferrer">#4531</a> (<a href=https://github.com/sdk2 rel="external nofollow noreferrer">сдк2</a>)</li> <li>Исправлена компиляция на Mac. <a href=https://github.com/ClickHouse/ClickHouse/pull/4371 rel="external nofollow noreferrer">#4371</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Исправления сборки для FreeBSD и различных необычных конфигураций сборки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4444 rel="external nofollow noreferrer">#4444</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h2 id=clickhouse-release-19-3>ClickHouse релиз 19.3<a class=headerlink href=#clickhouse-release-19-3 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-3-9-1-2019-04-02>ClickHouse релиз 19.3.9.1, 2019-04-02<a class=headerlink href=#clickhouse-release-19-3-9-1-2019-04-02 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-12>Устранение ошибок<a class=headerlink href=#bug-fixes-12 title="Permanent link">&para;</a></h4> <ul> <li>Исправить сбой в работе <code>FULL/RIGHT JOIN</code> когда мы присоединились на обнуляемой против не допускает значения null. <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer">#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка сегментации в <code>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer">#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлено чтение из <code>Array(LowCardinality)</code> столбец в редком случае, когда столбец содержит длинную последовательность пустых массивов. <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer">#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-13>Сборка/Тестирование / Улучшение Упаковки<a class=headerlink href=#buildtestingpackaging-improvement-13 title="Permanent link">&para;</a></h4> <ul> <li>Добавьте способ запуска образа clickhouse-server от пользовательского пользователя <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer">#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer">Mikhail f. Shiryaev</a>)</li> </ul> <h3 id=clickhouse-release-19-3-7-2019-03-12>ClickHouse релиз 19.3.7, 2019-03-12<a class=headerlink href=#clickhouse-release-19-3-7-2019-03-12 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-13>Устранение ошибок<a class=headerlink href=#bug-fixes-13 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка в #3920. Эта ошибка проявляется как случайное повреждение кэша (сообщения <code>Unknown codec family code</code>, <code>Cannot seek through file</code>) и segfaults. Эта ошибка впервые появилась в версии 19.1 и присутствует в версиях до 19.1.10 и 19.3.6. <a href=https://github.com/ClickHouse/ClickHouse/pull/4623 rel="external nofollow noreferrer">#4623</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-3-6-2019-03-02>ClickHouse релиз 19.3.6, 2019-03-02<a class=headerlink href=#clickhouse-release-19-3-6-2019-03-02 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-14>Устранение ошибок<a class=headerlink href=#bug-fixes-14 title="Permanent link">&para;</a></h4> <ul> <li>При наличии более 1000 потоков в пуле, <code>std::terminate</code> может произойти на выходе из потока. <a href=https://github.com/azat rel="external nofollow noreferrer">Азат Хужин</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4485 rel="external nofollow noreferrer">#4485</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4505 rel="external nofollow noreferrer">#4505</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Теперь это можно создать <code>ReplicatedMergeTree*</code> таблицы с комментариями к столбцам без значений по умолчанию и таблицы со столбцами кодеки без комментариев и значений по умолчанию. Также исправлено сравнение кодеков. <a href=https://github.com/ClickHouse/ClickHouse/pull/4523 rel="external nofollow noreferrer">#4523</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка при соединении с массивом или кортежем. <a href=https://github.com/ClickHouse/ClickHouse/pull/4552 rel="external nofollow noreferrer">#4552</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка в работе clickhouse-копировальной машины с сообщением <code>ThreadStatus not created</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4540 rel="external nofollow noreferrer">#4540</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлено зависание при выключении сервера, если использовались распределенные DDLs. <a href=https://github.com/ClickHouse/ClickHouse/pull/4472 rel="external nofollow noreferrer">#4472</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Неверные номера столбцов были напечатаны в сообщении об ошибке о синтаксическом анализе текстового формата для столбцов с числом больше 10. <a href=https://github.com/ClickHouse/ClickHouse/pull/4484 rel="external nofollow noreferrer">#4484</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-3>Улучшения Сборки / Тестирования / Упаковки<a class=headerlink href=#buildtestingpackaging-improvements-3 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена сборка с включенным AVX. <a href=https://github.com/ClickHouse/ClickHouse/pull/4527 rel="external nofollow noreferrer">#4527</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Включите расширенный учет и учет ввода-вывода на основе хорошо известной версии вместо ядра, под которым он компилируется. <a href=https://github.com/ClickHouse/ClickHouse/pull/4541 rel="external nofollow noreferrer">#4541</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer">nvartolomei</a>)</li> <li>Разрешить пропустить настройку core_dump.size_limit, предупреждение, а не бросать, если лимита не получится. <a href=https://github.com/ClickHouse/ClickHouse/pull/4473 rel="external nofollow noreferrer">#4473</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Удалил то <code>inline</code> метки из <code>void readBinary(...)</code> в <code>Field.cpp</code>. Также объединены избыточные <code>namespace DB</code> блоки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4530 rel="external nofollow noreferrer">#4530</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> </ul> <h3 id=clickhouse-release-19-3-5-2019-02-21>ClickHouse релиз 19.3.5, 2019-02-21<a class=headerlink href=#clickhouse-release-19-3-5-2019-02-21 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-15>Устранение ошибок<a class=headerlink href=#bug-fixes-15 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка с обработкой больших запросов вставки http. <a href=https://github.com/ClickHouse/ClickHouse/pull/4454 rel="external nofollow noreferrer">#4454</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена обратная несовместимость со старыми версиями из-за неправильной реализации <code>send_logs_level</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4445 rel="external nofollow noreferrer">#4445</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена обратная несовместимость функции таблицы <code>remote</code> введено с комментариями к колонке. <a href=https://github.com/ClickHouse/ClickHouse/pull/4446 rel="external nofollow noreferrer">#4446</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-3-4-2019-02-16>ClickHouse релиз 19.3.4, 2019-02-16<a class=headerlink href=#clickhouse-release-19-3-4-2019-02-16 title="Permanent link">&para;</a></h3> <h4 id=improvements-4>Улучшения<a class=headerlink href=#improvements-4 title="Permanent link">&para;</a></h4> <ul> <li>Размер индекса таблицы не учитывается для ограничений памяти при выполнении <code>ATTACH TABLE</code> запрос. Избегайте возможности того, что стол не может быть прикреплен после отсоединения. <a href=https://github.com/ClickHouse/ClickHouse/pull/4396 rel="external nofollow noreferrer">#4396</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Немного повышен лимит на максимальный размер строки и массива, полученный от ZooKeeper. Это позволяет продолжать работу с увеличенным размером <code>CLIENT_JVMFLAGS=-Djute.maxbuffer=...</code> на смотрителя зоопарка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4398 rel="external nofollow noreferrer">#4398</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Разрешить восстанавливать брошенную реплику, даже если она уже имеет огромное количество узлов в своей очереди. <a href=https://github.com/ClickHouse/ClickHouse/pull/4399 rel="external nofollow noreferrer">#4399</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавьте один обязательный аргумент к <code>SET</code> индекс (максимальное количество хранимых строк). <a href=https://github.com/ClickHouse/ClickHouse/pull/4386 rel="external nofollow noreferrer">#4386</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> </ul> <h4 id=bug-fixes-16>Устранение ошибок<a class=headerlink href=#bug-fixes-16 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено <code>WITH ROLLUP</code> результат для группы по одиночке <code>LowCardinality</code> ключ. <a href=https://github.com/ClickHouse/ClickHouse/pull/4384 rel="external nofollow noreferrer">#4384</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Исправлена ошибка в заданном индексе (удаление гранулы, если она содержит более <code>max_rows</code> грядки). <a href=https://github.com/ClickHouse/ClickHouse/pull/4386 rel="external nofollow noreferrer">#4386</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Множество исправлений для сборки FreeBSD. <a href=https://github.com/ClickHouse/ClickHouse/pull/4397 rel="external nofollow noreferrer">#4397</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлена подстановка псевдонимов в запросах с подзапросом, содержащим один и тот же псевдоним (проблема <a href=https://github.com/ClickHouse/ClickHouse/issues/4110 rel="external nofollow noreferrer">#4110</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4351 rel="external nofollow noreferrer">#4351</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-4>Улучшения Сборки / Тестирования / Упаковки<a class=headerlink href=#buildtestingpackaging-improvements-4 title="Permanent link">&para;</a></h4> <ul> <li>Добавить возможность запуска <code>clickhouse-server</code> для тестов без состояния в образе docker. <a href=https://github.com/ClickHouse/ClickHouse/pull/4347 rel="external nofollow noreferrer">#4347</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> </ul> <h3 id=clickhouse-release-19-3-3-2019-02-13>ClickHouse релиз 19.3.3, 2019-02-13<a class=headerlink href=#clickhouse-release-19-3-3-2019-02-13 title="Permanent link">&para;</a></h3> <h4 id=new-features-6>Новые средства<a class=headerlink href=#new-features-6 title="Permanent link">&para;</a></h4> <ul> <li>Добавил тот <code>KILL MUTATION</code> оператор, который позволяет удалять мутации, которые по каким-то причинам застряли. Добавлен <code>latest_failed_part</code>, <code>latest_fail_time</code>, <code>latest_fail_reason</code> поля к тому же <code>system.mutations</code> таблица для более легкого устранения неполадок. <a href=https://github.com/ClickHouse/ClickHouse/pull/4287 rel="external nofollow noreferrer">#4287</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Добавлена статистическая функция <code>entropy</code> который вычисляет энтропию Шеннона. <a href=https://github.com/ClickHouse/ClickHouse/pull/4238 rel="external nofollow noreferrer">#4238</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer">Quid37</a>)</li> <li>Добавлена возможность отправлять запросы <code>INSERT INTO tbl VALUES (....</code> к серверу без разделения на <code>query</code> и <code>data</code> части. <a href=https://github.com/ClickHouse/ClickHouse/pull/4301 rel="external nofollow noreferrer">#4301</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Общая реализация проекта <code>arrayWithConstant</code> была добавлена функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/4322 rel="external nofollow noreferrer">#4322</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Реализованный <code>NOT BETWEEN</code> оператор сравнения. <a href=https://github.com/ClickHouse/ClickHouse/pull/4228 rel="external nofollow noreferrer">#4228</a> (<a href=https://github.com/nezed rel="external nofollow noreferrer">Дмитрий Наумов</a>)</li> <li>Осуществлять <code>sumMapFiltered</code> для того чтобы иметь возможность ограничить количество ключей для которых значения будут суммироваться по формуле <code>sumMap</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4129 rel="external nofollow noreferrer">#4129</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer">Léo Ercolanelli</a>)</li> <li>Добавлена поддержка <code>Nullable</code> напечатать <code>mysql</code> табличная функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/4198 rel="external nofollow noreferrer">#4198</a> (<a href=https://github.com/edonin rel="external nofollow noreferrer">Emmanuel Donin de Rosière</a>)</li> <li>Поддержка произвольных константных выражений в <code>LIMIT</code> пункт. <a href=https://github.com/ClickHouse/ClickHouse/pull/4246 rel="external nofollow noreferrer">#4246</a> (<a href=https://github.com/k3box rel="external nofollow noreferrer">k3box</a>)</li> <li>Добавлен <code>topKWeighted</code> агрегатная функция, принимающая дополнительный аргумент с весом (целое число без знака). <a href=https://github.com/ClickHouse/ClickHouse/pull/4245 rel="external nofollow noreferrer">#4245</a> (<a href=https://github.com/andrewgolman rel="external nofollow noreferrer">Андрей Гольман</a>)</li> <li><code>StorageJoin</code> теперь поддерживать <code>join_any_take_last_row</code> настройка, позволяющая перезаписать существующие значения одного и того же ключа. <a href=https://github.com/ClickHouse/ClickHouse/pull/3973 rel="external nofollow noreferrer">#3973</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a></li> <li>Добавлена функция <code>toStartOfInterval</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4304 rel="external nofollow noreferrer">#4304</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Добавлен <code>RowBinaryWithNamesAndTypes</code> формат. <a href=https://github.com/ClickHouse/ClickHouse/pull/4200 rel="external nofollow noreferrer">#4200</a> (<a href=https://github.com/DarkWanderer rel="external nofollow noreferrer">Козлюк Олег Викторович</a>)</li> <li>Добавлен <code>IPv4</code> и <code>IPv6</code> тип данных. Более эффективное внедрение <code>IPv*</code> функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/3669 rel="external nofollow noreferrer">#3669</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Василий Немков</a>)</li> <li>Добавлена функция <code>toStartOfTenMinutes()</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4298 rel="external nofollow noreferrer">#4298</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Добавлен <code>Protobuf</code> выходной формат. <a href=https://github.com/ClickHouse/ClickHouse/pull/4005 rel="external nofollow noreferrer">#4005</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4158 rel="external nofollow noreferrer">#4158</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>)</li> <li>Добавлена поддержка brotli для HTTP-интерфейса для импорта данных (вставки). <a href=https://github.com/ClickHouse/ClickHouse/pull/4235 rel="external nofollow noreferrer">#4235</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer">Михаил</a>)</li> <li>Добавлены подсказки, когда пользователь делает опечатку в имени функции или вводит клиент командной строки. <a href=https://github.com/ClickHouse/ClickHouse/pull/4239 rel="external nofollow noreferrer">#4239</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Добавлен <code>Query-Id</code> к заголовку HTTP-ответа сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/4231 rel="external nofollow noreferrer">#4231</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer">Михаил</a>)</li> </ul> <h4 id=experimental-features-2>Экспериментальная возможность<a class=headerlink href=#experimental-features-2 title="Permanent link">&para;</a></h4> <ul> <li>Добавлен <code>minmax</code> и <code>set</code> индексы пропуска данных для семейства движков таблиц MergeTree. <a href=https://github.com/ClickHouse/ClickHouse/pull/4143 rel="external nofollow noreferrer">#4143</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li>Добавлено преобразование из <code>CROSS JOIN</code> к <code>INNER JOIN</code> если можно. <a href=https://github.com/ClickHouse/ClickHouse/pull/4221 rel="external nofollow noreferrer">#4221</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4266 rel="external nofollow noreferrer">#4266</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=bug-fixes-17>Устранение ошибок<a class=headerlink href=#bug-fixes-17 title="Permanent link">&para;</a></h4> <ul> <li>Исправлено <code>Not found column</code> для повторяющихся столбцов в <code>JOIN ON</code> раздел. <a href=https://github.com/ClickHouse/ClickHouse/pull/4279 rel="external nofollow noreferrer">#4279</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Сделай <code>START REPLICATED SENDS</code> команда начала репликации отправляет. <a href=https://github.com/ClickHouse/ClickHouse/pull/4229 rel="external nofollow noreferrer">#4229</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer">nvartolomei</a>)</li> <li>Фиксированное выполнение агрегатных функций с помощью <code>Array(LowCardinality)</code> аргументы. <a href=https://github.com/ClickHouse/ClickHouse/pull/4055 rel="external nofollow noreferrer">#4055</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Исправлено неправильное поведение при выполнении <code>INSERT ... SELECT ... FROM file(...)</code> запрос и файл имеет <code>CSVWithNames</code> или <code>TSVWIthNames</code> формат и первая строка данных отсутствуют. <a href=https://github.com/ClickHouse/ClickHouse/pull/4297 rel="external nofollow noreferrer">#4297</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка при перезагрузке словаря, если словарь недоступен. Эта ошибка появилась в 19.1.6. <a href=https://github.com/ClickHouse/ClickHouse/pull/4188 rel="external nofollow noreferrer">#4188</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлено <code>ALL JOIN</code> с дубликатами в правой таблице. <a href=https://github.com/ClickHouse/ClickHouse/pull/4184 rel="external nofollow noreferrer">#4184</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка сегментации с помощью <code>use_uncompressed_cache=1</code> и исключение с неправильным несжатым размером. Эта ошибка появилась в 19.1.6. <a href=https://github.com/ClickHouse/ClickHouse/pull/4186 rel="external nofollow noreferrer">#4186</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено <code>compile_expressions</code> ошибка с сопоставлением больших (более int16) дат. <a href=https://github.com/ClickHouse/ClickHouse/pull/4341 rel="external nofollow noreferrer">#4341</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена бесконечная петля при выборе функции из таблицы <code>numbers(0)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4280 rel="external nofollow noreferrer">#4280</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Временно отключите оптимизацию предикатов для <code>ORDER BY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3890 rel="external nofollow noreferrer">#3890</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправлено <code>Illegal instruction</code> ошибка при использовании функций base64 на старых процессорах. Эта ошибка была воспроизведена только тогда, когда ClickHouse был скомпилирован с помощью gcc-8. <a href=https://github.com/ClickHouse/ClickHouse/pull/4275 rel="external nofollow noreferrer">#4275</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено <code>No message received</code> ошибка при взаимодействии с драйвером PostgreSQL ODBC через TLS-соединение. Также исправлена ошибка segfault при использовании драйвера MySQL ODBC. <a href=https://github.com/ClickHouse/ClickHouse/pull/4170 rel="external nofollow noreferrer">#4170</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлен неверный результат, когда <code>Date</code> и <code>DateTime</code> аргументы используются в ветвях условного оператора (функции <code>if</code>). Добавлен общий случай для функции <code>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4243 rel="external nofollow noreferrer">#4243</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Словари ClickHouse теперь загружаются внутри <code>clickhouse</code> процесс. <a href=https://github.com/ClickHouse/ClickHouse/pull/4166 rel="external nofollow noreferrer">#4166</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена тупиковая ситуация, когда <code>SELECT</code> из-за стола с <code>File</code> двигатель был восстановлен после того, как <code>No such file or directory</code> ошибка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4161 rel="external nofollow noreferrer">#4161</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Фиксированное состояние гонки при выборе из <code>system.tables</code> может дать <code>table doesn't exist</code> ошибка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4313 rel="external nofollow noreferrer">#4313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>clickhouse-client</code> может segfault на выходе при загрузке данных для предложений командной строки, если он был запущен в интерактивном режиме. <a href=https://github.com/ClickHouse/ClickHouse/pull/4317 rel="external nofollow noreferrer">#4317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка при выполнении мутаций, содержащих <code>IN</code> операторы давали неверные результаты. <a href=https://github.com/ClickHouse/ClickHouse/pull/4099 rel="external nofollow noreferrer">#4099</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Исправлена ошибка: если есть база данных с <code>Dictionary</code> движок, все словари принудительно загружаются при запуске сервера, и если есть словарь с источником ClickHouse от localhost, то словарь не может загрузиться. <a href=https://github.com/ClickHouse/ClickHouse/pull/4255 rel="external nofollow noreferrer">#4255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка при повторной попытке создания системных журналов при выключении сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/4254 rel="external nofollow noreferrer">#4254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Правильно верните правильный тип и правильно обработайте замки <code>joinGet</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/4153 rel="external nofollow noreferrer">#4153</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Добавлен <code>sumMapWithOverflow</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/4151 rel="external nofollow noreferrer">#4151</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer">Léo Ercolanelli</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн с <code>allow_experimental_multiple_joins_emulation</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/52de2cd927f7b5257dd67e175f0a5560a48840d0 rel="external nofollow noreferrer">52de2c</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлена ошибка с неправильным <code>Date</code> и <code>DateTime</code> сравнение. <a href=https://github.com/ClickHouse/ClickHouse/pull/4237 rel="external nofollow noreferrer">#4237</a> (<a href=https://github.com/valexey rel="external nofollow noreferrer">valexey</a>)</li> <li>Исправлен тест fuzz при неопределенном поведении дезинфицирующего средства: добавлена проверка типа параметра для <code>quantile*Weighted</code> семейство функций. <a href=https://github.com/ClickHouse/ClickHouse/pull/4145 rel="external nofollow noreferrer">#4145</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено редкое состояние гонки при удалении старых частей данных может произойти сбой с помощью <code>File not found</code> ошибка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4378 rel="external nofollow noreferrer">#4378</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка установки пакета с отсутствующим /etc / clickhouse-server / config.XML. <a href=https://github.com/ClickHouse/ClickHouse/pull/4343 rel="external nofollow noreferrer">#4343</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-5>Улучшения Сборки / Тестирования / Упаковки<a class=headerlink href=#buildtestingpackaging-improvements-5 title="Permanent link">&para;</a></h4> <ul> <li>Пакет Debian: исправьте/etc/clickhouse-server / preprocessed link в соответствии с конфигурацией. <a href=https://github.com/ClickHouse/ClickHouse/pull/4205 rel="external nofollow noreferrer">#4205</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Различные исправления сборки для FreeBSD. <a href=https://github.com/ClickHouse/ClickHouse/pull/4225 rel="external nofollow noreferrer">#4225</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавлена возможность создавать, заполнять и удалять таблицы в perftest. <a href=https://github.com/ClickHouse/ClickHouse/pull/4220 rel="external nofollow noreferrer">#4220</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавлен скрипт для проверки наличия дубликатов включений. <a href=https://github.com/ClickHouse/ClickHouse/pull/4326 rel="external nofollow noreferrer">#4326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена возможность выполнения запросов по индексу в тесте производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/4264 rel="external nofollow noreferrer">#4264</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Предлагается установить пакет с отладочными символами. <a href=https://github.com/ClickHouse/ClickHouse/pull/4274 rel="external nofollow noreferrer">#4274</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Рефакторинг производительности-тест. Улучшенная регистрация и обработка сигналов. <a href=https://github.com/ClickHouse/ClickHouse/pull/4171 rel="external nofollow noreferrer">#4171</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавлены документы в анонимизированный Яндекс.Метрика набирает данные. <a href=https://github.com/ClickHouse/ClickHouse/pull/4164 rel="external nofollow noreferrer">#4164</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Аdded tool for converting an old month-partitioned part to the custom-partitioned format. <a href=https://github.com/ClickHouse/ClickHouse/pull/4195 rel="external nofollow noreferrer">#4195</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Добавлены документы о двух наборах данных в s3. <a href=https://github.com/ClickHouse/ClickHouse/pull/4144 rel="external nofollow noreferrer">#4144</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавлен скрипт, который создает список изменений из описания запросов на вытягивание. <a href=https://github.com/ClickHouse/ClickHouse/pull/4169 rel="external nofollow noreferrer">#4169</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4173 rel="external nofollow noreferrer">#4173</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>) (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Добавлен кукольный модуль для Clickhouse. <a href=https://github.com/ClickHouse/ClickHouse/pull/4182 rel="external nofollow noreferrer">#4182</a> (<a href=https://github.com/MaxFedotov rel="external nofollow noreferrer">Максим Федотов</a>)</li> <li>Добавлены документы для группы недокументированных функций. <a href=https://github.com/ClickHouse/ClickHouse/pull/4168 rel="external nofollow noreferrer">#4168</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправление сборки рук. <a href=https://github.com/ClickHouse/ClickHouse/pull/4210 rel="external nofollow noreferrer">#4210</a><a href=https://github.com/ClickHouse/ClickHouse/pull/4306 rel="external nofollow noreferrer">#4306</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4291 rel="external nofollow noreferrer">#4291</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>) (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Словарные тесты теперь можно запускать из <code>ctest</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4189 rel="external nofollow noreferrer">#4189</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Сейчас <code>/etc/ssl</code> используется в качестве каталога по умолчанию с SSL-сертификатами. <a href=https://github.com/ClickHouse/ClickHouse/pull/4167 rel="external nofollow noreferrer">#4167</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена проверка инструкций SSE и AVX при запуске. <a href=https://github.com/ClickHouse/ClickHouse/pull/4234 rel="external nofollow noreferrer">#4234</a> (<a href=https://github.com/igron99 rel="external nofollow noreferrer">Игр</a>)</li> <li>Init скрипт будет ждать сервер до запуска. <a href=https://github.com/ClickHouse/ClickHouse/pull/4281 rel="external nofollow noreferrer">#4281</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=backward-incompatible-changes-1>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-changes-1 title="Permanent link">&para;</a></h4> <ul> <li>Удаленный <code>allow_experimental_low_cardinality_type</code> установка. <code>LowCardinality</code> типы данных уже готовы к производству. <a href=https://github.com/ClickHouse/ClickHouse/pull/4323 rel="external nofollow noreferrer">#4323</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Уменьшите размер маркированного кэша и размер несжатого кэша соответственно доступному объему памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/4240 rel="external nofollow noreferrer">#4240</a> (<a href=https://github.com/k-lopatin rel="external nofollow noreferrer">Лопатин Константин</a></li> <li>Добавить ключевые слова <code>INDEX</code> в <code>CREATE TABLE</code> запрос. Столбец с именем <code>index</code> должен быть заключен в кавычки с обратными или двойными кавычками: <code>`index`</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4143 rel="external nofollow noreferrer">#4143</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Никита Васильев</a>)</li> <li><code>sumMap</code> теперь продвигайте тип результата вместо переполнения. Старое <code>sumMap</code> поведение может быть получено с помощью <code>sumMapWithOverflow</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/4151 rel="external nofollow noreferrer">#4151</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer">Léo Ercolanelli</a>)</li> </ul> <h4 id=performance-improvements-4>Улучшения в производительности<a class=headerlink href=#performance-improvements-4 title="Permanent link">&para;</a></h4> <ul> <li><code>std::sort</code> заменено на <code>pdqsort</code> для запросов без <code>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4236 rel="external nofollow noreferrer">#4236</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer">Евгений Правда</a>)</li> <li>Теперь сервер повторно использует потоки из глобального пула потоков. Это влияет на производительность в некоторых угловых случаях. <a href=https://github.com/ClickHouse/ClickHouse/pull/4150 rel="external nofollow noreferrer">#4150</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=improvements-5>Улучшения<a class=headerlink href=#improvements-5 title="Permanent link">&para;</a></h4> <ul> <li>Реализована поддержка AIO для FreeBSD. <a href=https://github.com/ClickHouse/ClickHouse/pull/4305 rel="external nofollow noreferrer">#4305</a> (<a href=https://github.com/urgordeadbeef rel="external nofollow noreferrer">urgordeadbeef</a>)</li> <li><code>SELECT * FROM a JOIN b USING a, b</code> теперь вернуться <code>a</code> и <code>b</code> столбцы только из левой таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/4141 rel="external nofollow noreferrer">#4141</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Позволять <code>-C</code> возможность работы клиента в качестве <code>-c</code> вариант. <a href=https://github.com/ClickHouse/ClickHouse/pull/4232 rel="external nofollow noreferrer">#4232</a> (<a href=https://github.com/syominsergey rel="external nofollow noreferrer">семинсергей</a>)</li> <li>Теперь вариант <code>--password</code> использовать без стоимости требует пароль из stdin. <a href=https://github.com/ClickHouse/ClickHouse/pull/4230 rel="external nofollow noreferrer">#4230</a> (<a href=https://github.com/bsd-conqueror rel="external nofollow noreferrer">BSD_Conqueror</a>)</li> <li>Добавлена подсветка неэскапированных метасимволов в строковых литералах, содержащих <code>LIKE</code> выражения или регулярные выражения. <a href=https://github.com/ClickHouse/ClickHouse/pull/4327 rel="external nofollow noreferrer">#4327</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена отмена HTTP-запросов только для чтения, если клиентский сокет уходит. <a href=https://github.com/ClickHouse/ClickHouse/pull/4213 rel="external nofollow noreferrer">#4213</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer">nvartolomei</a>)</li> <li>Теперь сервер сообщает о прогрессе, чтобы сохранить клиентские соединения живыми. <a href=https://github.com/ClickHouse/ClickHouse/pull/4215 rel="external nofollow noreferrer">#4215</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Немного лучше сообщение с причиной для оптимизации запроса с помощью <code>optimize_throw_if_noop</code> настройка включена. <a href=https://github.com/ClickHouse/ClickHouse/pull/4294 rel="external nofollow noreferrer">#4294</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена поддержка <code>--version</code> опция для сервера clickhouse. <a href=https://github.com/ClickHouse/ClickHouse/pull/4251 rel="external nofollow noreferrer">#4251</a> (<a href=https://github.com/k-lopatin rel="external nofollow noreferrer">Лопатин Константин</a>)</li> <li>Добавлен <code>--help/-h</code> опцион на <code>clickhouse-server</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4233 rel="external nofollow noreferrer">#4233</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Юрий Баранов</a>)</li> <li>Добавлена поддержка скалярных подзапросов с результатом состояния агрегатной функции. <a href=https://github.com/ClickHouse/ClickHouse/pull/4348 rel="external nofollow noreferrer">#4348</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>)</li> <li>Улучшено время завершения работы сервера и изменено время ожидания. <a href=https://github.com/ClickHouse/ClickHouse/pull/4372 rel="external nofollow noreferrer">#4372</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлена информация о настройке replicated_can_become_leader для system.реплики и добавить ведение журнала, если реплика не будет пытаться стать лидером. <a href=https://github.com/ClickHouse/ClickHouse/pull/4379 rel="external nofollow noreferrer">#4379</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> </ul> <h2 id=clickhouse-release-19-1>ClickHouse релиз 19.1<a class=headerlink href=#clickhouse-release-19-1 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-1-14-2019-03-14>ClickHouse релиз 19.1.14, 2019-03-14<a class=headerlink href=#clickhouse-release-19-1-14-2019-03-14 title="Permanent link">&para;</a></h3> <ul> <li>Исправления ошибок <code>Column ... queried more than once</code> это может произойти, если установка <code>asterisk_left_columns_only</code> имеет значение 1 в случае использования <code>GLOBAL JOIN</code> с <code>SELECT *</code> (редкий случай). Эта проблема не существует в версии 19.3 и более поздних версиях. <a href=https://github.com/ClickHouse/ClickHouse/pull/4692/commits/6bac7d8d11a9b0d6de0b32b53c47eb2f6f8e7062 rel="external nofollow noreferrer">6bac7d8d</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h3 id=clickhouse-release-19-1-13-2019-03-12>ClickHouse релиз 19.1.13, 2019-03-12<a class=headerlink href=#clickhouse-release-19-1-13-2019-03-12 title="Permanent link">&para;</a></h3> <p>Этот релиз содержит точно такой же набор исправлений, как и 19.3.7.</p> <h3 id=clickhouse-release-19-1-10-2019-03-03>ClickHouse релиз 19.1.10, 2019-03-03<a class=headerlink href=#clickhouse-release-19-1-10-2019-03-03 title="Permanent link">&para;</a></h3> <p>Этот релиз содержит точно такой же набор исправлений, как и 19.3.6.</p> <h2 id=clickhouse-release-19-1-1>ClickHouse релиз 19.1<a class=headerlink href=#clickhouse-release-19-1-1 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-1-9-2019-02-21>ClickHouse релиз 19.1.9, 2019-02-21<a class=headerlink href=#clickhouse-release-19-1-9-2019-02-21 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-18>Устранение ошибок<a class=headerlink href=#bug-fixes-18 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена обратная несовместимость со старыми версиями из-за неправильной реализации <code>send_logs_level</code> установка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4445 rel="external nofollow noreferrer">#4445</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена обратная несовместимость функции таблицы <code>remote</code> введено с комментариями к колонке. <a href=https://github.com/ClickHouse/ClickHouse/pull/4446 rel="external nofollow noreferrer">#4446</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-1-8-2019-02-16>ClickHouse релиз 19.1.8, 2019-02-16<a class=headerlink href=#clickhouse-release-19-1-8-2019-02-16 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-19>Устранение ошибок<a class=headerlink href=#bug-fixes-19 title="Permanent link">&para;</a></h4> <ul> <li>Исправлена ошибка установки пакета с отсутствующим /etc / clickhouse-server / config.XML. <a href=https://github.com/ClickHouse/ClickHouse/pull/4343 rel="external nofollow noreferrer">#4343</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h2 id=clickhouse-release-19-1-2>ClickHouse релиз 19.1<a class=headerlink href=#clickhouse-release-19-1-2 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-19-1-7-2019-02-15>ClickHouse релиз 19.1.7, 2019-02-15<a class=headerlink href=#clickhouse-release-19-1-7-2019-02-15 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-20>Устранение ошибок<a class=headerlink href=#bug-fixes-20 title="Permanent link">&para;</a></h4> <ul> <li>Правильно возвращайте правильный тип и правильно обрабатывайте замки <code>joinGet</code> функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/4153 rel="external nofollow noreferrer">#4153</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Исправлена ошибка при повторной попытке создания системных журналов при выключении сервера. <a href=https://github.com/ClickHouse/ClickHouse/pull/4254 rel="external nofollow noreferrer">#4254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка: если есть база данных с <code>Dictionary</code> движок, все словари принудительно загружаются при запуске сервера, и если есть словарь с источником ClickHouse от localhost, то словарь не может загрузиться. <a href=https://github.com/ClickHouse/ClickHouse/pull/4255 rel="external nofollow noreferrer">#4255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка при выполнении мутаций, содержащих <code>IN</code> операторы давали неверные результаты. <a href=https://github.com/ClickHouse/ClickHouse/pull/4099 rel="external nofollow noreferrer">#4099</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li><code>clickhouse-client</code> может segfault на выходе при загрузке данных для предложений командной строки, если он был запущен в интерактивном режиме. <a href=https://github.com/ClickHouse/ClickHouse/pull/4317 rel="external nofollow noreferrer">#4317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Фиксированное состояние гонки при выборе из <code>system.tables</code> может дать <code>table doesn't exist</code> ошибка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4313 rel="external nofollow noreferrer">#4313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена тупиковая ситуация, когда <code>SELECT</code> из-за стола с надписью: <code>File</code> двигатель был восстановлен после того, как <code>No such file or directory</code> ошибка. <a href=https://github.com/ClickHouse/ClickHouse/pull/4161 rel="external nofollow noreferrer">#4161</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка: локальные словари ClickHouse загружаются через TCP, но должны загружаться внутри процесса. <a href=https://github.com/ClickHouse/ClickHouse/pull/4166 rel="external nofollow noreferrer">#4166</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено <code>No message received</code> ошибка при взаимодействии с драйвером PostgreSQL ODBC через TLS-соединение. Также исправлена ошибка segfault при использовании драйвера MySQL ODBC. <a href=https://github.com/ClickHouse/ClickHouse/pull/4170 rel="external nofollow noreferrer">#4170</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Временно отключите оптимизацию предикатов для <code>ORDER BY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3890 rel="external nofollow noreferrer">#3890</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправлена бесконечная петля при выборе функции из таблицы <code>numbers(0)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4280 rel="external nofollow noreferrer">#4280</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлено <code>compile_expressions</code> ошибка с сопоставлением больших (более int16) дат. <a href=https://github.com/ClickHouse/ClickHouse/pull/4341 rel="external nofollow noreferrer">#4341</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка сегментации с помощью <code>uncompressed_cache=1</code> и исключение с неправильным несжатым размером. <a href=https://github.com/ClickHouse/ClickHouse/pull/4186 rel="external nofollow noreferrer">#4186</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено <code>ALL JOIN</code> с дубликатами в правой таблице. <a href=https://github.com/ClickHouse/ClickHouse/pull/4184 rel="external nofollow noreferrer">#4184</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Исправлено неправильное поведение при выполнении <code>INSERT ... SELECT ... FROM file(...)</code> запрос и файл имеет <code>CSVWithNames</code> или <code>TSVWIthNames</code> формат и первая строка данных отсутствуют. <a href=https://github.com/ClickHouse/ClickHouse/pull/4297 rel="external nofollow noreferrer">#4297</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Фиксированное выполнение агрегатных функций с помощью <code>Array(LowCardinality)</code> аргументы. <a href=https://github.com/ClickHouse/ClickHouse/pull/4055 rel="external nofollow noreferrer">#4055</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Пакет Debian: исправьте/etc/clickhouse-server / preprocessed link в соответствии с конфигурацией. <a href=https://github.com/ClickHouse/ClickHouse/pull/4205 rel="external nofollow noreferrer">#4205</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлен тест fuzz при неопределенном поведении дезинфицирующего средства: добавлена проверка типа параметра для <code>quantile*Weighted</code> семейство функций. <a href=https://github.com/ClickHouse/ClickHouse/pull/4145 rel="external nofollow noreferrer">#4145</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Сделай <code>START REPLICATED SENDS</code> команда начала репликации отправляет. <a href=https://github.com/ClickHouse/ClickHouse/pull/4229 rel="external nofollow noreferrer">#4229</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer">nvartolomei</a>)</li> <li>Исправлено <code>Not found column</code> для повторяющихся столбцов в разделе JOIN ON. <a href=https://github.com/ClickHouse/ClickHouse/pull/4279 rel="external nofollow noreferrer">#4279</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Сейчас <code>/etc/ssl</code> используется в качестве каталога по умолчанию с SSL-сертификатами. <a href=https://github.com/ClickHouse/ClickHouse/pull/4167 rel="external nofollow noreferrer">#4167</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка при перезагрузке словаря, если словарь недоступен. <a href=https://github.com/ClickHouse/ClickHouse/pull/4188 rel="external nofollow noreferrer">#4188</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Исправлена ошибка с неправильным <code>Date</code> и <code>DateTime</code> сравнение. <a href=https://github.com/ClickHouse/ClickHouse/pull/4237 rel="external nofollow noreferrer">#4237</a> (<a href=https://github.com/valexey rel="external nofollow noreferrer">valexey</a>)</li> <li>Исправлен неверный результат, когда <code>Date</code> и <code>DateTime</code> аргументы используются в ветвях условного оператора (функции <code>if</code>). Добавлен общий случай для функции <code>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4243 rel="external nofollow noreferrer">#4243</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h3 id=clickhouse-release-19-1-6-2019-01-24>ClickHouse релиз 19.1.6, 2019-01-24<a class=headerlink href=#clickhouse-release-19-1-6-2019-01-24 title="Permanent link">&para;</a></h3> <h4 id=new-features-7>Новые средства<a class=headerlink href=#new-features-7 title="Permanent link">&para;</a></h4> <ul> <li>Пользовательские кодеки сжатия для каждого столбца для таблиц. <a href=https://github.com/ClickHouse/ClickHouse/pull/3899 rel="external nofollow noreferrer">#3899</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4111 rel="external nofollow noreferrer">#4111</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>, <a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>, <a href=https://github.com/Sindbag rel="external nofollow noreferrer">Анатолий</a>)</li> <li>Добавлен кодек сжатия <code>Delta</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4052 rel="external nofollow noreferrer">#4052</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Разрешить <code>ALTER</code> кодеки сжатия. <a href=https://github.com/ClickHouse/ClickHouse/pull/4054 rel="external nofollow noreferrer">#4054</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавленные функции <code>left</code>, <code>right</code>, <code>trim</code>, <code>ltrim</code>, <code>rtrim</code>, <code>timestampadd</code>, <code>timestampsub</code> для совместимости со стандартом SQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/3826 rel="external nofollow noreferrer">#3826</a> (<a href=https://github.com/blinkov rel="external nofollow noreferrer">Иван Блинков</a>)</li> <li>Поддержка записи в систему <code>HDFS</code> таблица или <code>hdfs</code> табличная функция. <a href=https://github.com/ClickHouse/ClickHouse/pull/4084 rel="external nofollow noreferrer">#4084</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавлены функции поиска нескольких постоянных строк из большого стога сена: <code>multiPosition</code>, <code>multiSearch</code> ,<code>firstMatch</code> также с помощью <code>-UTF8</code>, <code>-CaseInsensitive</code>, и <code>-CaseInsensitiveUTF8</code> варианты. <a href=https://github.com/ClickHouse/ClickHouse/pull/4053 rel="external nofollow noreferrer">#4053</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Обрезка неиспользуемых осколков, если <code>SELECT</code> фильтры запросов по ключу сегментирования (настройка <code>optimize_skip_unused_shards</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/3851 rel="external nofollow noreferrer">#3851</a> (<a href=https://github.com/kanterov rel="external nofollow noreferrer">Глеб Кантеров</a>, <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Позволять <code>Kafka</code> движок для игнорирования некоторого количества ошибок синтаксического анализа в каждом блоке. <a href=https://github.com/ClickHouse/ClickHouse/pull/4094 rel="external nofollow noreferrer">#4094</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Добавлена поддержка для <code>CatBoost</code> мультиклассовые модели оценки. Функция <code>modelEvaluate</code> возвращает кортеж с необработанными прогнозами для каждого класса для многоклассовых моделей. <code>libcatboostmodel.so</code> должно быть построено с помощью <a href=https://github.com/catboost/catboost/pull/607 rel="external nofollow noreferrer">#607</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3959 rel="external nofollow noreferrer">#3959</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Добавленные функции <code>filesystemAvailable</code>, <code>filesystemFree</code>, <code>filesystemCapacity</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4097 rel="external nofollow noreferrer">#4097</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer">Борис Гранво</a>)</li> <li>Добавлены функции хэширования <code>xxHash64</code> и <code>xxHash32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3905 rel="external nofollow noreferrer">#3905</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Добавлен <code>gccMurmurHash</code> функция хэширования (GCC flavoured Murmur hash), которая использует то же самое хэш-семя, что и <a href=https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/functional_hash.h#L191 rel="external nofollow noreferrer">ССЗ</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4000 rel="external nofollow noreferrer">#4000</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">сундили</a>)</li> <li>Добавлены функции хэширования <code>javaHash</code>, <code>hiveHash</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3811 rel="external nofollow noreferrer">#3811</a> (<a href=https://github.com/shangshujie365 rel="external nofollow noreferrer">shangshujie365</a>)</li> <li>Добавлена функция таблицы <code>remoteSecure</code>. Функция работает как <code>remote</code>, но использует безопасное соединение. <a href=https://github.com/ClickHouse/ClickHouse/pull/4088 rel="external nofollow noreferrer">#4088</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> </ul> <h4 id=experimental-features-3>Экспериментальная возможность<a class=headerlink href=#experimental-features-3 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена эмуляция нескольких соединений (<code>allow_experimental_multiple_joins_emulation</code> установочный). <a href=https://github.com/ClickHouse/ClickHouse/pull/3946 rel="external nofollow noreferrer">#3946</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> </ul> <h4 id=bug-fixes-21>Устранение ошибок<a class=headerlink href=#bug-fixes-21 title="Permanent link">&para;</a></h4> <ul> <li>Сделай <code>compiled_expression_cache_size</code> установка ограничена по умолчанию для снижения потребления памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/4041 rel="external nofollow noreferrer">#4041</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка, которая привела к зависанию в потоках, выполняющих изменения реплицированных таблиц, и в потоке, обновляющем конфигурацию из ZooKeeper. <a href=https://github.com/ClickHouse/ClickHouse/issues/2947 rel="external nofollow noreferrer">#2947</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3891 rel="external nofollow noreferrer">#3891</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3934 rel="external nofollow noreferrer">#3934</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Исправлено состояние гонки при выполнении распределенной задачи ALTER. Состояние гонки привело к тому, что более чем одна реплика пыталась выполнить задачу, и все реплики, кроме одной, потерпели неудачу с ошибкой ZooKeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/3904 rel="external nofollow noreferrer">#3904</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Исправьте ошибку, когда <code>from_zk</code> элементы конфигурации не были обновлены после истечения времени ожидания запроса к ZooKeeper. <a href=https://github.com/ClickHouse/ClickHouse/issues/2947 rel="external nofollow noreferrer">#2947</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3947 rel="external nofollow noreferrer">#3947</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Исправлена ошибка с неправильным префиксом для масок подсети IPv4. <a href=https://github.com/ClickHouse/ClickHouse/pull/3945 rel="external nofollow noreferrer">#3945</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлена ошибка (<code>std::terminate</code>) в редких случаях, когда новый поток не может быть создан из-за исчерпания ресурсов. <a href=https://github.com/ClickHouse/ClickHouse/pull/3956 rel="external nofollow noreferrer">#3956</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка, когда в <code>remote</code> таблица выполнения функции, когда ошибались ограничений, используемых в <code>getStructureOfRemoteTable</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4009 rel="external nofollow noreferrer">#4009</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправьте утечку сокетов netlink. Они были помещены в пул, где они никогда не удалялись, а новые сокеты создавались в начале нового потока, когда использовались все текущие сокеты. <a href=https://github.com/ClickHouse/ClickHouse/pull/4017 rel="external nofollow noreferrer">#4017</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Исправлена ошибка с закрытием <code>/proc/self/fd</code> каталог раньше, чем все fds были прочитаны из него <code>/proc</code> после раздвоения <code>odbc-bridge</code> подпроцесс. <a href=https://github.com/ClickHouse/ClickHouse/pull/4120 rel="external nofollow noreferrer">#4120</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено монотонное преобразование строки в UInt в случае использования строки в первичном ключе. <a href=https://github.com/ClickHouse/ClickHouse/pull/3870 rel="external nofollow noreferrer">#3870</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправлена ошибка при вычислении монотонности функции преобразования целых чисел. <a href=https://github.com/ClickHouse/ClickHouse/pull/3921 rel="external nofollow noreferrer">#3921</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в <code>arrayEnumerateUniq</code>, <code>arrayEnumerateDense</code> функции в случае некоторых недопустимых аргументов. <a href=https://github.com/ClickHouse/ClickHouse/pull/3909 rel="external nofollow noreferrer">#3909</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправьте UB в StorageMerge. <a href=https://github.com/ClickHouse/ClickHouse/pull/3910 rel="external nofollow noreferrer">#3910</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Исправлена обработка выхода онлайн / оффлайн в функции <code>addDays</code>, <code>subtractDays</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3913 rel="external nofollow noreferrer">#3913</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка: функции <code>round</code>, <code>floor</code>, <code>trunc</code>, <code>ceil</code> может возвращать фиктивный результат при выполнении с целочисленным аргументом и большим отрицательным масштабом. <a href=https://github.com/ClickHouse/ClickHouse/pull/3914 rel="external nofollow noreferrer">#3914</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка, вызванная ‘kill query sync’ что ведет к свалке ядра. <a href=https://github.com/ClickHouse/ClickHouse/pull/3916 rel="external nofollow noreferrer">#3916</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer">мувулдипекер</a>)</li> <li>Исправлена ошибка с длительной задержкой после пустой очереди репликации. <a href=https://github.com/ClickHouse/ClickHouse/pull/3928 rel="external nofollow noreferrer">#3928</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3932 rel="external nofollow noreferrer">#3932</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Исправлено чрезмерное использование памяти при вставке в таблицу с <code>LowCardinality</code> первичный ключ. <a href=https://github.com/ClickHouse/ClickHouse/pull/3955 rel="external nofollow noreferrer">#3955</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Исправлено <code>LowCardinality</code> сериализация для <code>Native</code> форматирование в случае пустых массивов. <a href=https://github.com/ClickHouse/ClickHouse/issues/3907 rel="external nofollow noreferrer">#3907</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4011 rel="external nofollow noreferrer">#4011</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Исправлен неверный результат при использовании числового столбца distinct by single LowCardinality. <a href=https://github.com/ClickHouse/ClickHouse/issues/3895 rel="external nofollow noreferrer">#3895</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4012 rel="external nofollow noreferrer">#4012</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Исправлена специализированная агрегация с ключом LowCardinality (в случае, когда <code>compile</code> настройка включена). <a href=https://github.com/ClickHouse/ClickHouse/pull/3886 rel="external nofollow noreferrer">#3886</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Исправлена переадресация пользователей и паролей для запросов реплицированных таблиц. <a href=https://github.com/ClickHouse/ClickHouse/pull/3957 rel="external nofollow noreferrer">#3957</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>) (<a href=https://github.com/nicelulu rel="external nofollow noreferrer">小路</a>)</li> <li>Исправлено очень редкое состояние гонки, которое может произойти при перечислении таблиц в базе данных словаря во время перезагрузки словарей. <a href=https://github.com/ClickHouse/ClickHouse/pull/3970 rel="external nofollow noreferrer">#3970</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлен неверный результат при использовании метода Rollup или CUBE. <a href=https://github.com/ClickHouse/ClickHouse/issues/3756 rel="external nofollow noreferrer">#3756</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3837 rel="external nofollow noreferrer">#3837</a> (<a href=https://github.com/reflection rel="external nofollow noreferrer">Сэм Чоу</a>)</li> <li>Исправлены псевдонимы столбцов для запроса с помощью <code>JOIN ON</code> синтаксис и распределенные таблицы. <a href=https://github.com/ClickHouse/ClickHouse/pull/3980 rel="external nofollow noreferrer">#3980</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Исправлена ошибка во внутренней реализации <code>quantileTDigest</code> (найдено Артемом Вахрушевым). Эта ошибка никогда не происходит в ClickHouse и была актуальна только для тех, кто использует кодовую базу ClickHouse непосредственно в качестве библиотеки. <a href=https://github.com/ClickHouse/ClickHouse/pull/3935 rel="external nofollow noreferrer">#3935</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=improvements-6>Улучшения<a class=headerlink href=#improvements-6 title="Permanent link">&para;</a></h4> <ul> <li>Поддержка <code>IF NOT EXISTS</code> в <code>ALTER TABLE ADD COLUMN</code> заявления вместе с <code>IF EXISTS</code> в <code>DROP/MODIFY/CLEAR/COMMENT COLUMN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3900 rel="external nofollow noreferrer">#3900</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer">Борис Гранво</a>)</li> <li>Функция <code>parseDateTimeBestEffort</code>: поддержка форматов <code>DD.MM.YYYY</code>, <code>DD.MM.YY</code>, <code>DD-MM-YYYY</code>, <code>DD-Mon-YYYY</code>, <code>DD/Month/YYYY</code> и тому подобное. <a href=https://github.com/ClickHouse/ClickHouse/pull/3922 rel="external nofollow noreferrer">#3922</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li><code>CapnProtoInputStream</code> теперь поддерживайте зубчатые конструкции. <a href=https://github.com/ClickHouse/ClickHouse/pull/4063 rel="external nofollow noreferrer">#4063</a> (<a href=https://github.com/Miniwoffer rel="external nofollow noreferrer">Hultgren Один Ван Дер Хорст</a>)</li> <li>Улучшение удобства использования: добавлена проверка того, что серверный процесс запускается от владельца каталога данных. Не позволяют запускать сервер от root, если данные принадлежат к непривилегированным пользователем. <a href=https://github.com/ClickHouse/ClickHouse/pull/3785 rel="external nofollow noreferrer">#3785</a> (<a href=https://github.com/sergey-v-galtsev rel="external nofollow noreferrer">Сергей-в-Гальцев</a>)</li> <li>Улучшена логика проверки необходимых столбцов при анализе запросов с соединениями. <a href=https://github.com/ClickHouse/ClickHouse/pull/3930 rel="external nofollow noreferrer">#3930</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Артем Зуйков</a>)</li> <li>Уменьшено количество подключений в случае большого количества распределенных таблиц на одном сервере. <a href=https://github.com/ClickHouse/ClickHouse/pull/3726 rel="external nofollow noreferrer">#3726</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> <li>Поддерживаемые итоговые значения строка для <code>WITH TOTALS</code> запрос для драйвера ODBC. <a href=https://github.com/ClickHouse/ClickHouse/pull/3836 rel="external nofollow noreferrer">#3836</a> (<a href=https://github.com/nightweb rel="external nofollow noreferrer">Максим Корицкий</a>)</li> <li>Разрешено к использованию <code>Enum</code>s как целые числа внутри функции if. <a href=https://github.com/ClickHouse/ClickHouse/pull/3875 rel="external nofollow noreferrer">#3875</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Добавлен <code>low_cardinality_allow_in_native_format</code> установка. Если он отключен, не используйте его <code>LowCadrinality</code> напечатать <code>Native</code> формат. <a href=https://github.com/ClickHouse/ClickHouse/pull/3879 rel="external nofollow noreferrer">#3879</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Кочетовниколай</a>)</li> <li>Удалил некоторые избыточные объекты из кэша скомпилированных выражений, чтобы снизить использование памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/4042 rel="external nofollow noreferrer">#4042</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавить проверить это <code>SET send_logs_level = 'value'</code> запрос принимает соответствующее значение. <a href=https://github.com/ClickHouse/ClickHouse/pull/3873 rel="external nofollow noreferrer">#3873</a> (<a href=https://github.com/s-mx rel="external nofollow noreferrer">Сабянин Максим</a>)</li> <li>Исправлена проверка типа данных в функциях преобразования типов. <a href=https://github.com/ClickHouse/ClickHouse/pull/3896 rel="external nofollow noreferrer">#3896</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Зимний Чжан</a>)</li> </ul> <h4 id=performance-improvements-5>Улучшения в производительности<a class=headerlink href=#performance-improvements-5 title="Permanent link">&para;</a></h4> <ul> <li>Добавьте параметр MergeTree <code>use_minimalistic_part_header_in_zookeeper</code>. Если этот параметр включен, реплицированные таблицы будут хранить метаданные компактной детали в одном znode детали. Это может значительно уменьшить размер моментального снимка ZooKeeper (особенно если таблицы содержат много столбцов). Обратите внимание, что после включения этого параметра вы не сможете понизить рейтинг до версии, которая его не поддерживает. <a href=https://github.com/ClickHouse/ClickHouse/pull/3960 rel="external nofollow noreferrer">#3960</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Добавление реализации функций на основе DFA <code>sequenceMatch</code> и <code>sequenceCount</code> в случае, если шаблон не содержит времени. <a href=https://github.com/ClickHouse/ClickHouse/pull/4004 rel="external nofollow noreferrer">#4004</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer">Léo Ercolanelli</a>)</li> <li>Повышение производительности при сериализации целых чисел. <a href=https://github.com/ClickHouse/ClickHouse/pull/3968 rel="external nofollow noreferrer">#3968</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Нулевое левое заполнение PODArray так, чтобы элемент -1 всегда был действителен и обнулялся. Он используется для безветвевого расчета смещений. <a href=https://github.com/ClickHouse/ClickHouse/pull/3920 rel="external nofollow noreferrer">#3920</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Амос Птица</a>)</li> <li>Возвратившегося <code>jemalloc</code> версии, которые приводят к снижению производительности. <a href=https://github.com/ClickHouse/ClickHouse/pull/4018 rel="external nofollow noreferrer">#4018</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> </ul> <h4 id=backward-incompatible-changes-2>Назад Несовместимые Изменения<a class=headerlink href=#backward-incompatible-changes-2 title="Permanent link">&para;</a></h4> <ul> <li>Удалена недокументированная функция <code>ALTER MODIFY PRIMARY KEY</code> потому что он был вытеснен на второй план <code>ALTER MODIFY ORDER BY</code> команда. <a href=https://github.com/ClickHouse/ClickHouse/pull/3887 rel="external nofollow noreferrer">#3887</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer">Алексей Зателепин</a>)</li> <li>Удаленная функция <code>shardByHash</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3833 rel="external nofollow noreferrer">#3833</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Запретить использование скалярных подзапросов с результатом типа <code>AggregateFunction</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3865 rel="external nofollow noreferrer">#3865</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-6>Улучшения Сборки / Тестирования / Упаковки<a class=headerlink href=#buildtestingpackaging-improvements-6 title="Permanent link">&para;</a></h4> <ul> <li>Добавлена поддержка PowerPC (<code>ppc64le</code>) строить. <a href=https://github.com/ClickHouse/ClickHouse/pull/4132 rel="external nofollow noreferrer">#4132</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer">Данила Кутенин</a>)</li> <li>Функциональные тесты с отслеживанием состояния выполняются на общедоступном наборе данных. <a href=https://github.com/ClickHouse/ClickHouse/pull/3969 rel="external nofollow noreferrer">#3969</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлена ошибка, когда сервер не может начать работу с <code>bash: /usr/bin/clickhouse-extract-from-config: Operation not permitted</code> сообщение внутри Docker или systemd-nspawn. <a href=https://github.com/ClickHouse/ClickHouse/pull/4136 rel="external nofollow noreferrer">#4136</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Обновленный <code>rdkafka</code> библиотека для v1.0.0-проект RC5. Используется cppkafka вместо raw c интерфейса. <a href=https://github.com/ClickHouse/ClickHouse/pull/4025 rel="external nofollow noreferrer">#4025</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван</a>)</li> <li>Обновленный <code>mariadb-client</code> библиотека. Исправлена одна из проблем, обнаруженных UBSan. <a href=https://github.com/ClickHouse/ClickHouse/pull/3924 rel="external nofollow noreferrer">#3924</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Некоторые исправления для утилиты для сборки. <a href=https://github.com/ClickHouse/ClickHouse/pull/3926 rel="external nofollow noreferrer">#3926</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3021 rel="external nofollow noreferrer">#3021</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3948 rel="external nofollow noreferrer">#3948</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлено в фиксации запусков тестов с утилиты для сборки.</li> <li>Добавлено в фиксации работает в PVS-Studio-статический анализатор.</li> <li>Исправлены ошибки, обнаруженные компанией PVS-Studio. <a href=https://github.com/ClickHouse/ClickHouse/pull/4013 rel="external nofollow noreferrer">#4013</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлены проблемы совместимости glibc. <a href=https://github.com/ClickHouse/ClickHouse/pull/4100 rel="external nofollow noreferrer">#4100</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Переместите изображения Docker в 18.10 и добавьте файл совместимости для glibc >= 2.28 <a href=https://github.com/ClickHouse/ClickHouse/pull/3965 rel="external nofollow noreferrer">#3965</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Добавьте переменную env, если пользователь не хочет использовать каталоги chown в образе Server Docker. <a href=https://github.com/ClickHouse/ClickHouse/pull/3967 rel="external nofollow noreferrer">#3967</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li>Включено большинство предупреждений от <code>-Weverything</code> в лязг. Включенный <code>-Wpedantic</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3986 rel="external nofollow noreferrer">#3986</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Добавлено еще несколько предупреждений, которые доступны только в clang 8. <a href=https://github.com/ClickHouse/ClickHouse/pull/3993 rel="external nofollow noreferrer">#3993</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Ссылка на <code>libLLVM</code> а не к отдельным библиотекам LLVM при использовании общего связывания. <a href=https://github.com/ClickHouse/ClickHouse/pull/3989 rel="external nofollow noreferrer">#3989</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer">Оривей Деш</a>)</li> <li>Добавлены переменные дезинфицирующего средства для тестовых изображений. <a href=https://github.com/ClickHouse/ClickHouse/pull/4072 rel="external nofollow noreferrer">#4072</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">алесапин</a>)</li> <li><code>clickhouse-server</code> пакет debian будет рекомендовать <code>libcap2-bin</code> пакет для использования <code>setcap</code> инструмент для настройки возможностей. Это необязательно. <a href=https://github.com/ClickHouse/ClickHouse/pull/4093 rel="external nofollow noreferrer">#4093</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Улучшено время компиляции, исправлены ошибки. <a href=https://github.com/ClickHouse/ClickHouse/pull/3898 rel="external nofollow noreferrer">#3898</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавлены тесты производительности для хэш-функций. <a href=https://github.com/ClickHouse/ClickHouse/pull/3918 rel="external nofollow noreferrer">#3918</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">Филимонов</a>)</li> <li>Фиксированные циклические библиотечные зависимости. <a href=https://github.com/ClickHouse/ClickHouse/pull/3958 rel="external nofollow noreferrer">#3958</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Улучшена компиляция с низким уровнем доступной памяти. <a href=https://github.com/ClickHouse/ClickHouse/pull/4030 rel="external nofollow noreferrer">#4030</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Добавлен тестовый сценарий для воспроизведения снижения производительности в <code>jemalloc</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4036 rel="external nofollow noreferrer">#4036</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">Алексей-Миловидов</a>)</li> <li>Исправлены опечатки в комментариях и строковых литералах под заголовком <code>dbms</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4122 rel="external nofollow noreferrer">#4122</a> (<a href=https://github.com/maiha rel="external nofollow noreferrer">майха</a>)</li> <li>Исправлены опечатки в комментариях. <a href=https://github.com/ClickHouse/ClickHouse/pull/4089 rel="external nofollow noreferrer">#4089</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer">Евгений Правда</a>)</li> </ul> <h2 id=changelog-for-2018><a href=https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/changelog/2018.md rel="external nofollow noreferrer">Changelog для 2018</a><a class=headerlink href=#changelog-for-2018 title="Permanent link">&para;</a></h2> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Собрано из <a href=https://github.com/ClickHouse/ClickHouse/commit/3166eab2dfc89323b9d756aeba6866381fd9c186 rel="external nofollow noreferrer" target=_blank class=text-reset>3166eab2df</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Cодержание</label> <a href=#clickhouse-release-v19-17 title="Релиз ClickHouse в19.17" class="nav-link text-wrap d-inline-block w-100"> Релиз ClickHouse в19.17 </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#clickhouse-release-v19-17-6-36-2019-12-27 title="Релиз ClickHouse в19.17.6.36, 2019-12-27" class="nav-link text-wrap d-inline-block w-100"> Релиз ClickHouse в19.17.6.36, 2019-12-27 </a> <nav id=toc-toc-1-1 class="nav flex-column pl-2"> <a href=#bug-fix title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-v19-17-4-11-2019-11-22 title="Релиз ClickHouse в19.17.4.11, 2019-11-22" class="nav-link text-wrap d-inline-block w-100"> Релиз ClickHouse в19.17.4.11, 2019-11-22 </a> <nav id=toc-toc-1-2 class="nav flex-column pl-2"> <a href=#backward-incompatible-change title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> <a href=#new-feature title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#experimental-feature title="Экспериментальная возможность" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность </a> <a href=#bug-fix-1 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#improvement title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#performance-improvement title="Улучшение производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшение производительности </a> <a href=#buildtestingpackaging-improvement title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> <a href=#other title=Другой class="nav-link text-wrap d-inline-block w-100"> Другой </a> </nav> </nav> <a href=#clickhouse-release-v19-16 title="Релиз ClickHouse в19.16" class="nav-link text-wrap d-inline-block w-100"> Релиз ClickHouse в19.16 </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#clickhouse-release-v19-16-14-65-2020-03-25 title="Релиз Clickhouse в19.16.14.65, 2020-03-25" class="nav-link text-wrap d-inline-block w-100"> Релиз Clickhouse в19.16.14.65, 2020-03-25 </a> <a href=#clickhouse-release-v19-16-14-65-2020-03-05 title="Релиз Clickhouse в19.16.14.65, 2020-03-05" class="nav-link text-wrap d-inline-block w-100"> Релиз Clickhouse в19.16.14.65, 2020-03-05 </a> <a href=#new-feature-1 title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#clickhouse-release-v19-16-2-2-2019-10-30 title="Релиз ClickHouse в19.16.2.2, 2019-10-30" class="nav-link text-wrap d-inline-block w-100"> Релиз ClickHouse в19.16.2.2, 2019-10-30 </a> <nav id=toc-toc-2-4 class="nav flex-column pl-2"> <a href=#backward-incompatible-change-1 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> <a href=#new-feature-2 title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#bug-fix-2 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#improvement-1 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#performance-improvement-1 title="Улучшение производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшение производительности </a> <a href=#buildtestingpackaging-improvement-1 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> <a href=#code-cleanup title="Очистка кода" class="nav-link text-wrap d-inline-block w-100"> Очистка кода </a> </nav> </nav> <a href=#clickhouse-release-19-15 title="ClickHouse релиз 19.15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.15 </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-15-4-10-2019-10-31 title="ClickHouse релиз 19.15.4.10, 2019-10-31" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.15.4.10, 2019-10-31 </a> <nav id=toc-toc-3-1 class="nav flex-column pl-2"> <a href=#bug-fix-3 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-15-3-6-2019-10-09 title="ClickHouse релиз 19.15.3.6, 2019-10-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.15.3.6, 2019-10-09 </a> <nav id=toc-toc-3-2 class="nav flex-column pl-2"> <a href=#bug-fix-4 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-15-2-2-2019-10-01 title="ClickHouse релиз 19.15.2.2, 2019-10-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.15.2.2, 2019-10-01 </a> <nav id=toc-toc-3-3 class="nav flex-column pl-2"> <a href=#new-feature-3 title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#experimental-feature-1 title="Экспериментальная возможность" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность </a> <a href=#improvement-2 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#buildtestingpackaging-improvement-2 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> <a href=#bug-fix-5 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#backward-incompatible-change-2 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> </nav> </nav> <a href=#clickhouse-release-19-14 title="ClickHouse релиз 19.14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.14 </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-14-7-15-2019-10-02 title="ClickHouse релиз 19.14.7.15, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.14.7.15, 2019-10-02 </a> <nav id=toc-toc-4-1 class="nav flex-column pl-2"> <a href=#bug-fix-6 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-14-6-12-2019-09-19 title="ClickHouse релиз 19.14.6.12, 2019-09-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.14.6.12, 2019-09-19 </a> <nav id=toc-toc-4-2 class="nav flex-column pl-2"> <a href=#bug-fix-7 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#buildtestingpackaging-improvement-3 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> </nav> <a href=#clickhouse-release-19-14-3-3-2019-09-10 title="ClickHouse релиз 19.14.3.3, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.14.3.3, 2019-09-10 </a> <nav id=toc-toc-4-3 class="nav flex-column pl-2"> <a href=#new-feature-4 title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#experimental-feature-2 title="Экспериментальная возможность" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность </a> <a href=#bug-fix-8 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#security-fix title="Исправление безопасности" class="nav-link text-wrap d-inline-block w-100"> Исправление безопасности </a> <a href=#improvement-3 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#performance-improvement-2 title="Улучшение производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшение производительности </a> <a href=#buildtestingpackaging-improvement-4 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> <a href=#backward-incompatible-change-3 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> </nav> </nav> <a href=#clickhouse-release-19-13 title="ClickHouse релиз 19.13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.13 </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-13-6-51-2019-10-02 title="ClickHouse релиз 19.13.6.51, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.13.6.51, 2019-10-02 </a> <nav id=toc-toc-5-1 class="nav flex-column pl-2"> <a href=#bug-fix-9 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-13-5-44-2019-09-20 title="ClickHouse релиз 19.13.5.44, 2019-09-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.13.5.44, 2019-09-20 </a> <nav id=toc-toc-5-2 class="nav flex-column pl-2"> <a href=#bug-fix-10 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-13-4-32-2019-09-10 title="ClickHouse релиз 19.13.4.32, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.13.4.32, 2019-09-10 </a> <nav id=toc-toc-5-3 class="nav flex-column pl-2"> <a href=#bug-fix-11 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#security-fix-1 title="Исправление безопасности" class="nav-link text-wrap d-inline-block w-100"> Исправление безопасности </a> </nav> <a href=#clickhouse-release-19-13-3-26-2019-08-22 title="ClickHouse релиз 19.13.3.26, 2019-08-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.13.3.26, 2019-08-22 </a> <nav id=toc-toc-5-4 class="nav flex-column pl-2"> <a href=#bug-fix-12 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#security-fix-2 title="Исправление безопасности" class="nav-link text-wrap d-inline-block w-100"> Исправление безопасности </a> </nav> <a href=#clickhouse-release-19-13-2-19-2019-08-14 title="ClickHouse релиз 19.13.2.19, 2019-08-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.13.2.19, 2019-08-14 </a> <nav id=toc-toc-5-5 class="nav flex-column pl-2"> <a href=#new-feature-5 title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#backward-incompatible-change-4 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> <a href=#experimental-features title="Экспериментальная возможность" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность </a> <a href=#bug-fix-13 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#improvement-4 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#performance-improvement-3 title="Улучшение производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшение производительности </a> <a href=#buildtestingpackaging-improvement-5 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> </nav> </nav> <a href=#clickhouse-release-19-11 title="ClickHouse релиз 19.11" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11 </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-11-13-74-2019-11-01 title="ClickHouse релиз 19.11.13.74, 2019-11-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.13.74, 2019-11-01 </a> <nav id=toc-toc-6-1 class="nav flex-column pl-2"> <a href=#bug-fix-14 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-11-12-69-2019-10-02 title="ClickHouse релиз 19.11.12.69, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.12.69, 2019-10-02 </a> <nav id=toc-toc-6-2 class="nav flex-column pl-2"> <a href=#bug-fix-15 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-11-11-57-2019-09-13 title="ClickHouse релиз 19.11.11.57, 2019-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.11.57, 2019-09-13 </a> <a href=#clickhouse-release-19-11-10-54-2019-09-10 title="ClickHouse релиз 19.11.10.54, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.10.54, 2019-09-10 </a> <nav id=toc-toc-6-4 class="nav flex-column pl-2"> <a href=#bug-fix-16 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-11-9-52-2019-09-6 title="ClickHouse релиз 19.11.9.52, 2019-09-6" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.9.52, 2019-09-6 </a> <nav id=toc-toc-6-5 class="nav flex-column pl-2"> <a href=#security-fix-3 title="Исправление безопасности" class="nav-link text-wrap d-inline-block w-100"> Исправление безопасности </a> </nav> <a href=#clickhouse-release-19-11-8-46-2019-08-22 title="ClickHouse релиз 19.11.8.46, 2019-08-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.8.46, 2019-08-22 </a> <nav id=toc-toc-6-6 class="nav flex-column pl-2"> <a href=#bug-fix-17 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-11-7-40-2019-08-14 title="ClickHouse релиз 19.11.7.40, 2019-08-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.7.40, 2019-08-14 </a> <nav id=toc-toc-6-7 class="nav flex-column pl-2"> <a href=#bug-fix-18 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#improvement-5 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> </nav> <a href=#clickhouse-release-19-11-5-28-2019-08-05 title="ClickHouse релиз 19.11.5.28, 2019-08-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.5.28, 2019-08-05 </a> <nav id=toc-toc-6-8 class="nav flex-column pl-2"> <a href=#bug-fix-19 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#backward-incompatible-change-5 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> </nav> <a href=#clickhouse-release-19-11-4-24-2019-08-01 title="ClickHouse релиз 19.11.4.24, 2019-08-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.4.24, 2019-08-01 </a> <nav id=toc-toc-6-9 class="nav flex-column pl-2"> <a href=#bug-fix-20 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#buildtestingpackaging-improvement-6 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> <a href=#backward-incompatible-change-6 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> </nav> <a href=#clickhouse-release-19-11-3-11-2019-07-18 title="ClickHouse релиз 19.11.3.11, 2019-07-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.11.3.11, 2019-07-18 </a> <nav id=toc-toc-6-10 class="nav flex-column pl-2"> <a href=#new-feature-6 title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#bug-fix-21 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#improvement-6 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#performance-improvement-4 title="Улучшение производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшение производительности </a> <a href=#buildtestingpackaging-improvement-7 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> <a href=#backward-incompatible-change-7 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> </nav> </nav> <a href=#clickhouse-release-19-10 title="ClickHouse релиз 19.10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.10 </a> <nav id=toc-toc-7 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-10-1-5-2019-07-12 title="ClickHouse релиз 19.10.1.5, 2019-07-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.10.1.5, 2019-07-12 </a> <nav id=toc-toc-7-1 class="nav flex-column pl-2"> <a href=#new-feature-7 title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#bug-fix-22 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#improvement-7 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#performance-improvement-5 title="Улучшение производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшение производительности </a> <a href=#buildtestingpackaging-improvement-8 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> </nav> </nav> <a href=#clickhouse-release-19-9 title="ClickHouse релиз 19.9" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.9 </a> <nav id=toc-toc-8 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-9-3-31-2019-07-05 title="ClickHouse релиз 19.9.3.31, 2019-07-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.9.3.31, 2019-07-05 </a> <nav id=toc-toc-8-1 class="nav flex-column pl-2"> <a href=#bug-fix-23 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-9-2-4-2019-06-24 title="ClickHouse релиз 19.9.2.4, 2019-06-24" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.9.2.4, 2019-06-24 </a> <nav id=toc-toc-8-2 class="nav flex-column pl-2"> <a href=#new-feature-8 title="Новая функция" class="nav-link text-wrap d-inline-block w-100"> Новая функция </a> <a href=#improvement-8 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#bug-fix-24 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#buildtestingpackaging-improvement-9 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> </nav> </nav> <a href=#clickhouse-release-19-8 title="ClickHouse релиз 19.8" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.8 </a> <nav id=toc-toc-9 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-8-3-8-2019-06-11 title="ClickHouse релиз 19.8.3.8, 2019-06-11" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.8.3.8, 2019-06-11 </a> <nav id=toc-toc-9-1 class="nav flex-column pl-2"> <a href=#new-features title="Новые средства" class="nav-link text-wrap d-inline-block w-100"> Новые средства </a> <a href=#improvements title=Улучшения class="nav-link text-wrap d-inline-block w-100"> Улучшения </a> <a href=#performance-improvements title="Улучшения в производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшения в производительности </a> <a href=#bug-fixes title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#documentation title=Документация class="nav-link text-wrap d-inline-block w-100"> Документация </a> <a href=#buildtestingpackaging-improvements title="Улучшения Сборки / Тестирования / Упаковки" class="nav-link text-wrap d-inline-block w-100"> Улучшения Сборки / Тестирования / Упаковки </a> </nav> </nav> <a href=#clickhouse-release-19-7 title="ClickHouse релиз 19.7" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.7 </a> <nav id=toc-toc-10 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-7-5-29-2019-07-05 title="ClickHouse релиз 19.7.5.29, 2019-07-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.7.5.29, 2019-07-05 </a> <nav id=toc-toc-10-1 class="nav flex-column pl-2"> <a href=#bug-fix-25 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> </nav> <a href=#clickhouse-release-19-7-5-27-2019-06-09 title="ClickHouse релиз 19.7.5.27, 2019-06-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.7.5.27, 2019-06-09 </a> <nav id=toc-toc-10-2 class="nav flex-column pl-2"> <a href=#new-features-1 title="Новые средства" class="nav-link text-wrap d-inline-block w-100"> Новые средства </a> <a href=#bug-fixes-1 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-7-3-9-2019-05-30 title="ClickHouse релиз 19.7.3.9, 2019-05-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.7.3.9, 2019-05-30 </a> <nav id=toc-toc-10-3 class="nav flex-column pl-2"> <a href=#new-features-2 title="Новые средства" class="nav-link text-wrap d-inline-block w-100"> Новые средства </a> <a href=#bug-fixes-2 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#performance-improvements-1 title="Улучшения в производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшения в производительности </a> <a href=#documentation-1 title=Документация class="nav-link text-wrap d-inline-block w-100"> Документация </a> <a href=#buildtestingpackaging-improvements-1 title="Улучшения Сборки / Тестирования / Упаковки" class="nav-link text-wrap d-inline-block w-100"> Улучшения Сборки / Тестирования / Упаковки </a> </nav> </nav> <a href=#clickhouse-release-19-6 title="ClickHouse релиз 19.6" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.6 </a> <nav id=toc-toc-11 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-6-3-18-2019-06-13 title="ClickHouse релиз 19.6.3.18, 2019-06-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.6.3.18, 2019-06-13 </a> <nav id=toc-toc-11-1 class="nav flex-column pl-2"> <a href=#bug-fixes-3 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-6-2-11-2019-05-13 title="ClickHouse релиз 19.6.2.11, 2019-05-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.6.2.11, 2019-05-13 </a> <nav id=toc-toc-11-2 class="nav flex-column pl-2"> <a href=#new-features-3 title="Новые средства" class="nav-link text-wrap d-inline-block w-100"> Новые средства </a> <a href=#experimental-features-1 title="Экспериментальная возможность" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность </a> <a href=#improvements-1 title=Улучшения class="nav-link text-wrap d-inline-block w-100"> Улучшения </a> <a href=#performance-improvements-2 title="Улучшения в производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшения в производительности </a> <a href=#backward-incompatible-changes title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> <a href=#bug-fixes-4 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#buildtestingpackaging-improvements-2 title="Улучшения Сборки / Тестирования / Упаковки" class="nav-link text-wrap d-inline-block w-100"> Улучшения Сборки / Тестирования / Упаковки </a> </nav> </nav> <a href=#clickhouse-release-19-5 title="ClickHouse релиз 19.5" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.5 </a> <nav id=toc-toc-12 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-5-4-22-2019-05-13 title="ClickHouse релиз 19.5.4.22, 2019-05-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.5.4.22, 2019-05-13 </a> <nav id=toc-toc-12-1 class="nav flex-column pl-2"> <a href=#bug-fixes-5 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-5-3-8-2019-04-18 title="ClickHouse релиз 19.5.3.8, 2019-04-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.5.3.8, 2019-04-18 </a> <nav id=toc-toc-12-2 class="nav flex-column pl-2"> <a href=#bug-fixes-6 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-5-2-6-2019-04-15 title="ClickHouse релиз 19.5.2.6, 2019-04-15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.5.2.6, 2019-04-15 </a> <nav id=toc-toc-12-3 class="nav flex-column pl-2"> <a href=#new-features-4 title="Новые средства" class="nav-link text-wrap d-inline-block w-100"> Новые средства </a> <a href=#improvement-9 title=Улучшение class="nav-link text-wrap d-inline-block w-100"> Улучшение </a> <a href=#bug-fix-26 title="Исправление ошибок" class="nav-link text-wrap d-inline-block w-100"> Исправление ошибок </a> <a href=#backward-incompatible-change-8 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> <a href=#performance-improvement-6 title="Улучшение производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшение производительности </a> <a href=#buildtestingpackaging-improvement-10 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> </nav> </nav> <a href=#clickhouse-release-19-4 title="ClickHouse релиз 19.4" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.4 </a> <nav id=toc-toc-13 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-4-4-33-2019-04-17 title="ClickHouse релиз 19.4.4.33, 2019-04-17" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.4.4.33, 2019-04-17 </a> <nav id=toc-toc-13-1 class="nav flex-column pl-2"> <a href=#bug-fixes-7 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#improvements-2 title=Улучшения class="nav-link text-wrap d-inline-block w-100"> Улучшения </a> </nav> <a href=#clickhouse-release-19-4-3-11-2019-04-02 title="ClickHouse релиз 19.4.3.11, 2019-04-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.4.3.11, 2019-04-02 </a> <nav id=toc-toc-13-2 class="nav flex-column pl-2"> <a href=#bug-fixes-8 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#buildtestingpackaging-improvement-11 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> </nav> <a href=#clickhouse-release-19-4-2-7-2019-03-30 title="ClickHouse релиз 19.4.2.7, 2019-03-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.4.2.7, 2019-03-30 </a> <nav id=toc-toc-13-3 class="nav flex-column pl-2"> <a href=#bug-fixes-9 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-4-1-3-2019-03-19 title="ClickHouse релиз 19.4.1.3, 2019-03-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.4.1.3, 2019-03-19 </a> <nav id=toc-toc-13-4 class="nav flex-column pl-2"> <a href=#bug-fixes-10 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-4-0-49-2019-03-09 title="ClickHouse релиз 19.4.0.49, 2019-03-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.4.0.49, 2019-03-09 </a> <nav id=toc-toc-13-5 class="nav flex-column pl-2"> <a href=#new-features-5 title="Новые средства" class="nav-link text-wrap d-inline-block w-100"> Новые средства </a> <a href=#bug-fixes-11 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#improvements-3 title=Улучшения class="nav-link text-wrap d-inline-block w-100"> Улучшения </a> <a href=#performance-improvements-3 title="Улучшения в производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшения в производительности </a> <a href=#buildtestingpackaging-improvement-12 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> </nav> </nav> <a href=#clickhouse-release-19-3 title="ClickHouse релиз 19.3" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.3 </a> <nav id=toc-toc-14 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-3-9-1-2019-04-02 title="ClickHouse релиз 19.3.9.1, 2019-04-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.3.9.1, 2019-04-02 </a> <nav id=toc-toc-14-1 class="nav flex-column pl-2"> <a href=#bug-fixes-12 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#buildtestingpackaging-improvement-13 title="Сборка/Тестирование / Улучшение Упаковки" class="nav-link text-wrap d-inline-block w-100"> Сборка/Тестирование / Улучшение Упаковки </a> </nav> <a href=#clickhouse-release-19-3-7-2019-03-12 title="ClickHouse релиз 19.3.7, 2019-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.3.7, 2019-03-12 </a> <nav id=toc-toc-14-2 class="nav flex-column pl-2"> <a href=#bug-fixes-13 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-3-6-2019-03-02 title="ClickHouse релиз 19.3.6, 2019-03-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.3.6, 2019-03-02 </a> <nav id=toc-toc-14-3 class="nav flex-column pl-2"> <a href=#bug-fixes-14 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#buildtestingpackaging-improvements-3 title="Улучшения Сборки / Тестирования / Упаковки" class="nav-link text-wrap d-inline-block w-100"> Улучшения Сборки / Тестирования / Упаковки </a> </nav> <a href=#clickhouse-release-19-3-5-2019-02-21 title="ClickHouse релиз 19.3.5, 2019-02-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.3.5, 2019-02-21 </a> <nav id=toc-toc-14-4 class="nav flex-column pl-2"> <a href=#bug-fixes-15 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-3-4-2019-02-16 title="ClickHouse релиз 19.3.4, 2019-02-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.3.4, 2019-02-16 </a> <nav id=toc-toc-14-5 class="nav flex-column pl-2"> <a href=#improvements-4 title=Улучшения class="nav-link text-wrap d-inline-block w-100"> Улучшения </a> <a href=#bug-fixes-16 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#buildtestingpackaging-improvements-4 title="Улучшения Сборки / Тестирования / Упаковки" class="nav-link text-wrap d-inline-block w-100"> Улучшения Сборки / Тестирования / Упаковки </a> </nav> <a href=#clickhouse-release-19-3-3-2019-02-13 title="ClickHouse релиз 19.3.3, 2019-02-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.3.3, 2019-02-13 </a> <nav id=toc-toc-14-6 class="nav flex-column pl-2"> <a href=#new-features-6 title="Новые средства" class="nav-link text-wrap d-inline-block w-100"> Новые средства </a> <a href=#experimental-features-2 title="Экспериментальная возможность" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность </a> <a href=#bug-fixes-17 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#buildtestingpackaging-improvements-5 title="Улучшения Сборки / Тестирования / Упаковки" class="nav-link text-wrap d-inline-block w-100"> Улучшения Сборки / Тестирования / Упаковки </a> <a href=#backward-incompatible-changes-1 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> <a href=#performance-improvements-4 title="Улучшения в производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшения в производительности </a> <a href=#improvements-5 title=Улучшения class="nav-link text-wrap d-inline-block w-100"> Улучшения </a> </nav> </nav> <a href=#clickhouse-release-19-1 title="ClickHouse релиз 19.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1 </a> <nav id=toc-toc-15 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-1-14-2019-03-14 title="ClickHouse релиз 19.1.14, 2019-03-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1.14, 2019-03-14 </a> <a href=#clickhouse-release-19-1-13-2019-03-12 title="ClickHouse релиз 19.1.13, 2019-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1.13, 2019-03-12 </a> <a href=#clickhouse-release-19-1-10-2019-03-03 title="ClickHouse релиз 19.1.10, 2019-03-03" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1.10, 2019-03-03 </a> </nav> <a href=#clickhouse-release-19-1-1 title="ClickHouse релиз 19.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1 </a> <nav id=toc-toc-16 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-1-9-2019-02-21 title="ClickHouse релиз 19.1.9, 2019-02-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1.9, 2019-02-21 </a> <nav id=toc-toc-16-1 class="nav flex-column pl-2"> <a href=#bug-fixes-18 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-1-8-2019-02-16 title="ClickHouse релиз 19.1.8, 2019-02-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1.8, 2019-02-16 </a> <nav id=toc-toc-16-2 class="nav flex-column pl-2"> <a href=#bug-fixes-19 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> </nav> <a href=#clickhouse-release-19-1-2 title="ClickHouse релиз 19.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1 </a> <nav id=toc-toc-17 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-1-7-2019-02-15 title="ClickHouse релиз 19.1.7, 2019-02-15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1.7, 2019-02-15 </a> <nav id=toc-toc-17-1 class="nav flex-column pl-2"> <a href=#bug-fixes-20 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> </nav> <a href=#clickhouse-release-19-1-6-2019-01-24 title="ClickHouse релиз 19.1.6, 2019-01-24" class="nav-link text-wrap d-inline-block w-100"> ClickHouse релиз 19.1.6, 2019-01-24 </a> <nav id=toc-toc-17-2 class="nav flex-column pl-2"> <a href=#new-features-7 title="Новые средства" class="nav-link text-wrap d-inline-block w-100"> Новые средства </a> <a href=#experimental-features-3 title="Экспериментальная возможность" class="nav-link text-wrap d-inline-block w-100"> Экспериментальная возможность </a> <a href=#bug-fixes-21 title="Устранение ошибок" class="nav-link text-wrap d-inline-block w-100"> Устранение ошибок </a> <a href=#improvements-6 title=Улучшения class="nav-link text-wrap d-inline-block w-100"> Улучшения </a> <a href=#performance-improvements-5 title="Улучшения в производительности" class="nav-link text-wrap d-inline-block w-100"> Улучшения в производительности </a> <a href=#backward-incompatible-changes-2 title="Назад Несовместимые Изменения" class="nav-link text-wrap d-inline-block w-100"> Назад Несовместимые Изменения </a> <a href=#buildtestingpackaging-improvements-6 title="Улучшения Сборки / Тестирования / Упаковки" class="nav-link text-wrap d-inline-block w-100"> Улучшения Сборки / Тестирования / Упаковки </a> </nav> </nav> <a href=#changelog-for-2018 title="Changelog для 2018" class="nav-link text-wrap d-inline-block w-100"> Changelog для 2018 </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
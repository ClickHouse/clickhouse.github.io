<!DOCTYPE html><html lang=ru data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Форматы входных и выходных данных - Документация ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Форматы входных и выходных данных - Документация ClickHouse "><meta property=og:description content="Форматы входных и выходных данных ClickHouse может принимать (INSERT) и отдавать (SELECT) данные в различных форматах. П"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Форматы входных и выходных данных - Документация ClickHouse "><meta name=description content="Форматы входных и выходных данных ClickHouse может принимать (INSERT) и отдавать (SELECT) данные в различных форматах. П"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Форматы входных и выходных данных </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/interfaces/formats.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ru.svg alt=Русский title=Русский width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/interfaces/formats/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/interfaces/formats/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/interfaces/formats/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/interfaces/formats/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/interfaces/formats/ class="dropdown-item disabled"> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/interfaces/formats/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/interfaces/formats/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Многостраничный или одностраничный"> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Многостраничная версия" title="Многостраничная версия"> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Одностраничная версия" title="Одностраничная версия"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Версия: <span class=text-light>последняя</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ru/ class="dropdown-item disable"> <span class=text-light>последняя</span> </a> <a href=/docs/v20.3/ru/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ru/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/ru/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ru/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ru/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ru/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ru/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/ru/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ru/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ru/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ru/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../introduction/info/ title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a> <a href=../../introduction/history/ title="История ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">История ClickHouse</a> <a href=../../introduction/features_considered_disadvantages/ title="Особенности ClickHouse, которые могут считаться недостатками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Особенности ClickHouse, которые могут считаться недостатками</a> <a href=../../introduction/distinctive_features/ title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a> <a href=../../introduction/performance/ title=Производительность class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a> <a href=../../introduction/adopters/ title="Усыновители ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Усыновители ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title="Движки баз данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки баз данных</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/database_engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> <a href=../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/database_engines/ title="Движки баз данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки баз данных</a> </nav> </div> <a href=#sidebar-sidebar-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3 title="Движки таблиц" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки таблиц</a> <div id=sidebar-sidebar-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-2-3-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-1 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-2-3-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> <a href=../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a> <a href=../../engines/table_engines/mergetree_family/replication/ title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a> </nav> </div> <a href=#sidebar-sidebar-2-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-2 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-2-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../engines/table_engines/log_family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> <a href=../../engines/table_engines/log_family/log_family/ title="Семейство Log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Семейство Log</a> </nav> </div> <a href=#sidebar-sidebar-2-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-3 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-2-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> <a href=#sidebar-sidebar-2-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-4 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-2-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../engines/table_engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../engines/table_engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../engines/table_engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../engines/table_engines/special/file/ title=File(Format) class="nav-link text-light text-wrap d-inline-block w-100 px-0">File(Format)</a> <a href=../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> <a href=../../engines/table_engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../engines/table_engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../engines/table_engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../engines/table_engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../engines/table_engines/special/url/ title="URL(URL, Format)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL, Format)</a> <a href=../../engines/table_engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../engines/table_engines/special/external_data/ title="Внешние данные для обработки запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные для обработки запроса</a> </nav> </div> <a href=../../engines/table_engines/ title="Движки таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки таблиц</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../commercial/cloud/ title="Поставщики облачных услуг ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поставщики облачных услуг ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../whats_new/changelog/2017/ title="ClickHouse релиз 1.1.54327, 2017-12-21" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse релиз 1.1.54327, 2017-12-21</a> <a href=../../whats_new/changelog/2018/ title="ClickHouse релиз 18.16" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse релиз 18.16</a> <a href=../../whats_new/changelog/2019/ title="Релиз ClickHouse в19.17" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Релиз ClickHouse в19.17</a> </nav> </div> <a href=../../whats_new/roadmap/ title="Дорожная карта" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Дорожная карта</a> <a href=../../whats_new/security_changelog/ title="Исправлено в релизе 19.14.3.3, 2019-09-10" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Исправлено в релизе 19.14.3.3, 2019-09-10</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../faq/general/ title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a> </nav> </div> <a href=../../extended_roadmap/ title="Планы разработки ClickHouse 2020" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Планы разработки ClickHouse 2020</a> <a href=../../ title="Что такое ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Что такое ClickHouse</a> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Интерфейсы class="nav-link text-light text-wrap dropdown-toggle px-0">Интерфейсы</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-8-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-1 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-8-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../interfaces/third-party/integrations/ title="Библиотеки для интеграции от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Библиотеки для интеграции от сторонних разработчиков</a> <a href=../../interfaces/third-party/gui/ title="Визуальные интерфейсы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы от сторонних разработчиков</a> <a href=../../interfaces/third-party/client_libraries/ title="Клиентские библиотеки от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки от сторонних разработчиков</a> <a href=../../interfaces/third-party/proxy/ title="Прокси-серверы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси-серверы от сторонних разработчиков</a> </nav> </div> <a href=../../interfaces/cpp/ title="C++ клиентская библиотека" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ клиентская библиотека</a> <a href=../../interfaces/http/ title=HTTP-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a> <a href=../../interfaces/jdbc/ title=JDBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a> <a href=../../interfaces/mysql/ title=MySQL-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL-интерфейс</a> <a href=../../interfaces/odbc/ title=ODBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a> <a href=../../interfaces/ title=Интерфейсы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Интерфейсы</a> <a href=../../interfaces/cli/ title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a> <a href=../../interfaces/tcp/ title="Родной интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Родной интерфейс (TCP)</a> <a href=../../interfaces/formats/ title="Форматы входных и выходных данных" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title="Начало работы" class="nav-link text-light text-wrap dropdown-toggle px-0">Начало работы</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/playground/ title="ClickHouse Playground" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Playground</a> <a href=../../getting_started/ title="Начало работы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Начало работы</a> <a href=../../getting_started/install/ title=Установка class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка</a> <a href=../../getting_started/tutorial/ title="Учебник По Клик-Хаусу" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Учебник По Клик-Хаусу</a> <a href=#sidebar-sidebar-9-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9-5 title="Тестовые массивы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Тестовые массивы данных</a> <div id=sidebar-sidebar-9-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting_started/example_datasets/metrica/ title="Анонимизированные данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Анонимизированные данные Яндекс.Метрики</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a> <a href=../../getting_started/example_datasets/criteo/ title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a> <a href=../../getting_started/example_datasets/ title="Тестовые массивы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Тестовые массивы данных</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="Разработка ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Разработка ClickHouse</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/developer_instruction/ title="Если вы используете Windows" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Если вы используете Windows</a> <a href=../../development/contrib/ title="Используемые сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Используемые сторонние библиотеки</a> <a href=../../development/style/ title="Как писать код на C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как писать код на C++</a> <a href=../../development/build/ title="Как построить ClickHouse для развития" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse для развития</a> <a href=../../development/build_cross_osx/ title="Как построить ClickHouse на Linux для Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Linux для Mac OS X</a> <a href=../../development/build_cross_arm/ title="Как построить ClickHouse на Linux для архитектуры AArch64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Linux для архитектуры AArch64 (ARM64)</a> <a href=../../development/build_osx/ title="Как построить ClickHouse на Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как построить ClickHouse на Mac OS X</a> <a href=../../development/browse_code/ title="Навигация по коду ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Навигация по коду ClickHouse</a> <a href=../../development/architecture/ title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a> <a href=../../development/ title="Разработка ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разработка ClickHouse</a> <a href=../../development/tests/ title="Тестирование ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Тестирование ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=Руководства class="nav-link text-light text-wrap dropdown-toggle px-0">Руководства</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/apply_catboost_model/ title="Применение модели CatBoost в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение модели CatBoost в ClickHouse</a> <a href=../../guides/ title=Руководства class="nav-link text-light text-wrap d-inline-block w-100 px-0">Руководства</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title="Справка по SQL" class="nav-link text-light text-wrap dropdown-toggle px-0">Справка по SQL</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-1 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-12-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../sql_reference/statements/create/ title="CREATE DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE DATABASE</a> <a href=../../sql_reference/statements/insert_into/ title=INSERT class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT</a> <a href=../../sql_reference/statements/show/ title="SHOW Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW Queries</a> <a href=../../sql_reference/statements/system/ title="Запросы SYSTEM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Запросы SYSTEM</a> <a href=../../sql_reference/statements/misc/ title="Прочие виды запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие виды запросов</a> <a href=../../sql_reference/statements/select/ title="Синтаксис запросов SELECT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис запросов SELECT</a> </nav> </div> <a href=../../sql_reference/operators/ title=Операторы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a> <a href=../../sql_reference/syntax/ title=Синтаксис class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис</a> <a href=../../sql_reference/ title="Справка по SQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справка по SQL</a> <a href=#sidebar-sidebar-12-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-5 title="Агрегатные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Агрегатные функции</a> <div id=sidebar-sidebar-12-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/aggregate_functions/ title="Агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Агрегатные функции</a> <a href=../../sql_reference/aggregate_functions/combinators/ title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a> <a href=../../sql_reference/aggregate_functions/parametric_functions/ title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a> <a href=../../sql_reference/aggregate_functions/reference/ title="Справочник функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справочник функций</a> </nav> </div> <a href=#sidebar-sidebar-12-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-6 title=Словари class="nav-link text-light text-wrap dropdown-toggle px-0">Словари</a> <div id=sidebar-sidebar-12-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-6-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-6-1 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-12-6-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="Внешние словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние словари</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Иерархические словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Иерархические словари</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a> </nav> </div> <a href=../../sql_reference/dictionaries/internal_dicts/ title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a> <a href=../../sql_reference/dictionaries/ title=Словари class="nav-link text-light text-wrap d-inline-block w-100 px-0">Словари</a> </nav> </div> <a href=#sidebar-sidebar-12-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-7 title="Табличные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Табличные функции</a> <div id=sidebar-sidebar-12-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../sql_reference/table_functions/generate/ title=generate class="nav-link text-light text-wrap d-inline-block w-100 px-0">generate</a> <a href=../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../sql_reference/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../sql_reference/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../sql_reference/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../sql_reference/table_functions/remote/ title="remote, remoteSecure" class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote, remoteSecure</a> <a href=../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../sql_reference/table_functions/ title="Табличные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Табличные функции</a> </nav> </div> <a href=#sidebar-sidebar-12-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8 title="Типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Типы данных</a> <div id=sidebar-sidebar-12-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-12-8-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-1 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-12-8-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> <a href=../../sql_reference/data_types/domains/overview/ title=Домены class="nav-link text-light text-wrap d-inline-block w-100 px-0">Домены</a> </nav> </div> <a href=../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types\_of\_arguments…)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types\_of\_arguments…)</a> <a href=../../sql_reference/data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../sql_reference/data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../sql_reference/data_types/decimal/ title="Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)</a> <a href=../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../sql_reference/data_types/fixedstring/ title=FixedString class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString</a> <a href=../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../sql_reference/data_types/nullable/ title=Nullable(TypeName) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable(TypeName)</a> <a href=../../sql_reference/data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a> <a href=../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../sql_reference/data_types/boolean/ title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a> <a href=../../sql_reference/data_types/ title="Типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Типы данных</a> <a href=#sidebar-sidebar-12-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-18 title="Вложенные структуры данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Вложенные структуры данных</a> <div id=sidebar-sidebar-12-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> <a href=../../sql_reference/data_types/nested_data_structures/ title="Вложенные структуры данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Вложенные структуры данных</a> </nav> </div> <a href=#sidebar-sidebar-12-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-8-19 title="Служебные типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Служебные типы данных</a> <div id=sidebar-sidebar-12-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../sql_reference/data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> <a href=../../sql_reference/data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../sql_reference/data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../sql_reference/data_types/special_data_types/ title="Служебные типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Служебные типы данных</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-12-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-9 title=Функции class="nav-link text-light text-wrap dropdown-toggle px-0">Функции</a> <div id=sidebar-sidebar-12-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/functions/arithmetic_functions/ title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a> <a href=../../sql_reference/functions/bit_functions/ title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a> <a href=../../sql_reference/functions/logical_functions/ title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a> <a href=../../sql_reference/functions/math_functions/ title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a> <a href=../../sql_reference/functions/other_functions/ title="Прочие функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие функции</a> <a href=../../sql_reference/functions/conditional_functions/ title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a> <a href=../../sql_reference/functions/ title=Функции class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции</a> <a href=../../sql_reference/functions/higher_order_functions/ title="Функции высшего порядка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции высшего порядка</a> <a href=../../sql_reference/functions/random_functions/ title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a> <a href=../../sql_reference/functions/bitmap_functions/ title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a> <a href=../../sql_reference/functions/ip_address_functions/ title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a> <a href=../../sql_reference/functions/json_functions/ title="Функции для работы с JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с JSON</a> <a href=../../sql_reference/functions/functions_for_nulls/ title="Функции для работы с Nullable-аргументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с Nullable-аргументами</a> <a href=../../sql_reference/functions/url_functions/ title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a> <a href=../../sql_reference/functions/uuid_functions/ title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a> <a href=../../sql_reference/functions/ext_dict_functions/ title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a> <a href=../../sql_reference/functions/geo/ title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a> <a href=../../sql_reference/functions/date_time_functions/ title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a> <a href=../../sql_reference/functions/ym_dict_functions/ title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a> <a href=../../sql_reference/functions/string_functions/ title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a> <a href=../../sql_reference/functions/in_functions/ title="Функции для реализации оператора IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN</a> <a href=../../sql_reference/functions/introspection/ title="Функции интроспекции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции интроспекции</a> <a href=../../sql_reference/functions/encoding_functions/ title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a> <a href=../../sql_reference/functions/machine_learning_functions/ title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a> <a href=../../sql_reference/functions/rounding_functions/ title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a> <a href=../../sql_reference/functions/array_functions/ title="Функции по работе с массивами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции по работе с массивами</a> <a href=../../sql_reference/functions/string_search_functions/ title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a> <a href=../../sql_reference/functions/string_replace_functions/ title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a> <a href=../../sql_reference/functions/type_conversion_functions/ title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a> <a href=../../sql_reference/functions/splitting_merging_functions/ title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a> <a href=../../sql_reference/functions/comparison_functions/ title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a> <a href=../../sql_reference/functions/hash_functions/ title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a> <a href=../../sql_reference/functions/array_join/ title="Функция arrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция arrayJoin</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13 title=Эксплуатация class="nav-link text-light text-wrap dropdown-toggle px-0">Эксплуатация</a> <div id=sidebar-sidebar-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-13-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-1 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-13-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../operations/optimizing_performance/sampling_query_profiler/ title="Выборки Профилировщик Запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Выборки Профилировщик Запросов</a> </nav> </div> <a href=../../operations/performance_test/ title="Как Протестировать Ваше Оборудование С Помощью ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как Протестировать Ваше Оборудование С Помощью ClickHouse</a> <a href=../../operations/quotas/ title=Квоты class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a> <a href=../../operations/configuration_files/ title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a> <a href=../../operations/monitoring/ title=Мониторинг class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a> <a href=../../operations/update/ title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a> <a href=../../operations/access_rights/ title="Права доступа" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Права доступа</a> <a href=../../operations/backup/ title="Резервное копирование данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование данных</a> <a href=../../operations/system_tables/ title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a> <a href=../../operations/tips/ title="Советы по эксплуатации" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Советы по эксплуатации</a> <a href=../../operations/requirements/ title=Требования class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a> <a href=../../operations/troubleshooting/ title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a> <a href=../../operations/ title=Эксплуатация class="nav-link text-light text-wrap d-inline-block w-100 px-0">Эксплуатация</a> <a href=#sidebar-sidebar-13-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-14 title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap dropdown-toggle px-0">Конфигурационные параметры сервера</a> <div id=sidebar-sidebar-13-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_configuration_parameters/settings/ title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные параметры сервера</a> </nav> </div> <a href=#sidebar-sidebar-13-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-15 title=Настройки class="nav-link text-light text-wrap dropdown-toggle px-0">Настройки</a> <div id=sidebar-sidebar-13-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/settings/ title=Настройки class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a> <a href=../../operations/settings/settings_users/ title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a> <a href=../../operations/settings/constraints_on_settings/ title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a> <a href=../../operations/settings/query_complexity/ title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a> <a href=../../operations/settings/settings_profiles/ title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a> <a href=../../operations/settings/permissions_for_queries/ title="Разрешения для запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения для запросов</a> </nav> </div> <a href=#sidebar-sidebar-13-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13-16 title="Утилиты ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Утилиты ClickHouse</a> <div id=sidebar-sidebar-13-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../operations/utilities/clickhouse-benchmark/ title=clickhouse-бенчмарк class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-бенчмарк</a> <a href=../../operations/utilities/ title="Утилиты ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Утилиты ClickHouse</a> </nav> </div> </nav> </div> <a href=../../single/clickhouse_ru.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF-версия title=PDF-версия height=24 class="d-block mr-1 float-left"><div>PDF-версия</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=formats>Форматы входных и выходных данных<a class=headerlink href=#formats title="Permanent link">&para;</a></h1> <p>ClickHouse может принимать (<code>INSERT</code>) и отдавать (<code>SELECT</code>) данные в различных форматах.</p> <p>Поддерживаемые форматы и возможность использовать их в запросах <code>INSERT</code> и <code>SELECT</code> перечислены в таблице ниже.</p> <table> <thead> <tr> <th>Формат</th> <th>INSERT</th> <th>SELECT</th> </tr> </thead> <tbody> <tr> <td><a href=#tabseparated>TabSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedraw>TabSeparatedRaw</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnames>TabSeparatedWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#format-template>Template</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#templateignorespaces>TemplateIgnoreSpaces</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#csv>CSV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#csvwithnames>CSVWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#format-customseparated>CustomSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-values>Values</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#vertical>Vertical</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#json>JSON</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompact>JSONCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoneachrow>JSONEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tskv>TSKV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#pretty>Pretty</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompact>PrettyCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompactmonoblock>PrettyCompactMonoBlock</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettynoescapes>PrettyNoEscapes</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettyspace>PrettySpace</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#protobuf>Protobuf</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-parquet>Parquet</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-orc>ORC</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#rowbinary>RowBinary</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#rowbinarywithnamesandtypes>RowBinaryWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#native>Native</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#null>Null</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#xml>XML</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#capnproto>CapnProto</a></td> <td>✔</td> <td>✗</td> </tr> </tbody> </table> <p>Вы можете регулировать некоторые параметры работы с форматами с помощью настроек ClickHouse. За дополнительной информацией обращайтесь к разделу <a href=../../operations/settings/settings/ >Настройки</a>.</p> <h2 id=tabseparated>TabSeparated<a class=headerlink href=#tabseparated title="Permanent link">&para;</a></h2> <p>В TabSeparated формате данные пишутся по строкам. Каждая строчка содержит значения, разделённые табами. После каждого значения идёт таб, кроме последнего значения в строке, после которого идёт перевод строки. Везде подразумеваются исключительно unix-переводы строк. Последняя строка также обязана содержать перевод строки на конце. Значения пишутся в текстовом виде, без обрамляющих кавычек, с экранированием служебных символов.</p> <p>Этот формат также доступен под именем <code>TSV</code>.</p> <p>Формат <code>TabSeparated</code> удобен для обработки данных произвольными программами и скриптами. Он используется по умолчанию в HTTP-интерфейсе, а также в batch-режиме клиента командной строки. Также формат позволяет переносить данные между разными СУБД. Например, вы можете получить дамп из MySQL и загрузить его в ClickHouse, или наоборот.</p> <p>Формат <code>TabSeparated</code> поддерживает вывод тотальных значений (при использовании WITH TOTALS) и экстремальных значений (при настройке extremes выставленной в 1). В этих случаях, после основных данных выводятся тотальные значения, и экстремальные значения. Основной результат, тотальные значения и экстремальные значения, отделяются друг от друга пустой строкой. Пример:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>TabSeparated</span><span class=o>``</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>2014-03-17      1406958
2014-03-18      1383658
2014-03-19      1405797
2014-03-20      1353623
2014-03-21      1245779
2014-03-22      1031592
2014-03-23      1046491

0000-00-00      8873898

2014-03-17      1031592
2014-03-23      1406958
</code></pre></div> <h3 id=formatirovanie-dannykh>Форматирование данных<a class=headerlink href=#formatirovanie-dannykh title="Permanent link">&para;</a></h3> <p>Целые числа пишутся в десятичной форме. Числа могут содержать лишний символ «+» в начале (игнорируется при парсинге, а при форматировании не пишется). Неотрицательные числа не могут содержать знак отрицания. При чтении допустим парсинг пустой строки, как числа ноль, или (для знаковых типов) строки, состоящей из одного минуса, как числа ноль. Числа, не помещающиеся в соответствующий тип данных, могут парсится, как некоторое другое число, без сообщения об ошибке.</p> <p>Числа с плавающей запятой пишутся в десятичной форме. При этом, десятичный разделитель - точка. Поддерживается экспоненциальная запись, а также inf, +inf, -inf, nan. Запись числа с плавающей запятой может начинаться или заканчиваться на десятичную точку.<br> При форматировании возможна потеря точности чисел с плавающей запятой.<br> При парсинге, допустимо чтение не обязательно наиболее близкого к десятичной записи машинно-представимого числа.</p> <p>Даты выводятся в формате YYYY-MM-DD, парсятся в том же формате, но с любыми символами в качестве разделителей.<br> Даты-с-временем выводятся в формате YYYY-MM-DD hh:mm:ss, парсятся в том же формате, но с любыми символами в качестве разделителей.<br> Всё это происходит в системном часовом поясе на момент старта клиента (если клиент занимается форматированием данных) или сервера. Для дат-с-временем не указывается, действует ли daylight saving time. То есть, если в дампе есть времена во время перевода стрелок назад, то дамп не соответствует данным однозначно, и при парсинге будет выбрано какое-либо из двух времён.<br> При парсинге, некорректные даты и даты-с-временем могут парситься с естественным переполнением или как нулевые даты/даты-с-временем без сообщения об ошибке.</p> <p>В качестве исключения, поддерживается также парсинг даты-с-временем в формате unix timestamp, если он состоит ровно из 10 десятичных цифр. Результат не зависит от часового пояса. Различение форматов YYYY-MM-DD hh:mm:ss и NNNNNNNNNN делается автоматически.</p> <p>Строки выводятся с экранированием спецсимволов с помощью обратного слеша. При выводе, используются следующие escape-последовательности: <code>\b</code>, <code>\f</code>, <code>\r</code>, <code>\n</code>, <code>\t</code>, <code>\0</code>, <code>\'</code>, <code>\\</code>. Парсер также поддерживает последовательности <code>\a</code>, <code>\v</code>, и <code>\xHH</code> (последовательности hex escape) и любые последовательности вида <code>\c</code>, где <code>c</code> — любой символ (такие последовательности преобразуются в <code>c</code>). Таким образом, при чтении поддерживаются форматы, где перевод строки может быть записан как <code>\n</code> и как <code>\</code> и перевод строки. Например, строка <code>Hello world</code>, где между словами вместо пробела стоит перевод строки, может быть считана в любом из следующих вариантов:</p> <div class=codehilite><pre><span></span><code>Hello\nworld

Hello\
world
</code></pre></div> <p>Второй вариант поддерживается, так как его использует MySQL при записи tab-separated дампа.</p> <p>Минимальный набор символов, которых вам необходимо экранировать при передаче в TabSeparated формате: таб, перевод строки (LF) и обратный слеш.</p> <p>Экранируется лишь небольшой набор символов. Вы можете легко наткнуться на строковое значение, которое испортит ваш терминал при выводе в него.</p> <p>Массивы форматируются в виде списка значений через запятую в квадратных скобках. Элементы массива - числа форматируются как обычно, а даты, даты-с-временем и строки - в одинарных кавычках с такими же правилами экранирования, как указано выше.</p> <p><a href=../../sql_reference/syntax/ >NULL</a> форматируется как <code>\N</code>.</p> <p>Каждый элемент структуры типа <a href=../../sql_reference/data_types/nested_data_structures/nested/ >Nested</a> представляется как отдельный массив.</p> <p>Например:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>nestedt</span>
<span class=p>(</span>
    <span class=o>`</span><span class=n>id</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>aux</span><span class=o>`</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>a</span> <span class=n>UInt8</span><span class=p>,</span>
        <span class=n>b</span> <span class=n>String</span>
    <span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>nestedt</span> <span class=k>Values</span> <span class=p>(</span> <span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>nestedt</span> <span class=n>FORMAT</span> <span class=n>TSV</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>1 [1] [&#39;a&#39;]
</code></pre></div> <h2 id=tabseparatedraw>TabSeparatedRaw<a class=headerlink href=#tabseparatedraw title="Permanent link">&para;</a></h2> <p>Отличается от формата <code>TabSeparated</code> тем, что строки выводятся без экранирования.<br> Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).</p> <p>Этот формат также доступен под именем <code>TSVRaw</code>.</p> <h2 id=tabseparatedwithnames>TabSeparatedWithNames<a class=headerlink href=#tabseparatedwithnames title="Permanent link">&para;</a></h2> <p>Отличается от формата <code>TabSeparated</code> тем, что в первой строке пишутся имена столбцов.<br> При парсинге, первая строка полностью игнорируется. Вы не можете использовать имена столбцов, чтобы указать их порядок расположения, или чтобы проверить их корректность.<br> (Поддержка обработки заголовка при парсинге может быть добавлена в будущем.)</p> <p>Этот формат также доступен под именем <code>TSVWithNames</code>.</p> <h2 id=tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes<a class=headerlink href=#tabseparatedwithnamesandtypes title="Permanent link">&para;</a></h2> <p>Отличается от формата <code>TabSeparated</code> тем, что в первой строке пишутся имена столбцов, а во второй - типы столбцов.<br> При парсинге, первая и вторая строка полностью игнорируется.</p> <p>Этот формат также доступен под именем <code>TSVWithNamesAndTypes</code>.</p> <h2 id=format-template>Template<a class=headerlink href=#format-template title="Permanent link">&para;</a></h2> <p>Этот формат позволяет указать произвольную форматную строку, в которую подставляются значения, сериализованные выбранным способом.</p> <p>Для этого используются настройки <code>format_template_resultset</code>, <code>format_template_row</code>, <code>format_template_rows_between_delimiter</code> и настройки экранирования других форматов (например, <code>output_format_json_quote_64bit_integers</code> при экранировании как в <code>JSON</code>, см. далее)</p> <p>Настройка <code>format_template_row</code> задаёт путь к файлу, содержащему форматную строку для строк таблицы, которая должна иметь вид:</p> <p><code>delimiter_1${column_1:serializeAs_1}delimiter_2${column_2:serializeAs_2} ... delimiter_N</code>,</p> <div class=codehilite><pre><span></span><code><span class=err>где</span> <span class=ss>`delimiter_i`</span> <span class=o>-</span> <span class=err>разделители</span> <span class=err>между</span> <span class=err>значениями</span> <span class=p>(</span><span class=err>символ</span> <span class=ss>`$`</span> <span class=err>в</span> <span class=err>разделителе</span> <span class=err>экранируется</span> <span class=err>как</span> <span class=ss>`$$`</span><span class=p>),</span>
<span class=ss>`column_i`</span> <span class=o>-</span> <span class=err>имена</span> <span class=err>или</span> <span class=err>номера</span> <span class=err>столбцов</span><span class=p>,</span> <span class=err>значения</span> <span class=err>которых</span> <span class=err>должны</span> <span class=err>быть</span> <span class=err>выведены</span> <span class=err>или</span> <span class=err>считаны</span> <span class=p>(</span><span class=err>если</span> <span class=err>имя</span> <span class=err>не</span> <span class=err>указано</span> <span class=o>-</span> <span class=err>столбец</span> <span class=err>пропускается</span><span class=p>),</span>
<span class=ss>`serializeAs_i`</span> <span class=o>-</span> <span class=err>тип</span> <span class=err>экранирования</span> <span class=err>для</span> <span class=err>значений</span> <span class=err>соответствующего</span> <span class=err>столбца</span><span class=p>.</span> <span class=err>Поддерживаются</span> <span class=err>следующие</span> <span class=err>типы</span> <span class=err>экранирования</span><span class=p>:</span>

<span class=o>-</span> <span class=ss>`CSV`</span><span class=p>,</span> <span class=ss>`JSON`</span><span class=p>,</span> <span class=ss>`XML`</span> <span class=p>(</span><span class=err>как</span> <span class=err>в</span> <span class=err>одноимённых</span> <span class=err>форматах</span><span class=p>)</span>
<span class=o>-</span> <span class=ss>`Escaped`</span> <span class=p>(</span><span class=err>как</span> <span class=err>в</span> <span class=ss>`TSV`</span><span class=p>)</span>
<span class=o>-</span> <span class=ss>`Quoted`</span> <span class=p>(</span><span class=err>как</span> <span class=err>в</span> <span class=ss>`Values`</span><span class=p>)</span>
<span class=o>-</span> <span class=ss>`Raw`</span> <span class=p>(</span><span class=err>без</span> <span class=err>экранирования</span><span class=p>,</span> <span class=err>как</span> <span class=err>в</span> <span class=ss>`TSVRaw`</span><span class=p>)</span>
<span class=o>-</span> <span class=ss>`None`</span> <span class=p>(</span><span class=err>тип</span> <span class=err>экранирования</span> <span class=err>отсутствует</span><span class=p>,</span> <span class=err>см</span><span class=p>.</span> <span class=err>далее</span><span class=p>)</span>

<span class=err>Если</span> <span class=err>для</span> <span class=err>столбца</span> <span class=err>не</span> <span class=err>указан</span> <span class=err>тип</span> <span class=err>экранирования</span><span class=p>,</span> <span class=err>используется</span> <span class=ss>`None`</span><span class=p>.</span> <span class=ss>`XML`</span> <span class=err>и</span> <span class=ss>`Raw`</span> <span class=err>поддерживаются</span> <span class=err>только</span> <span class=err>для</span> <span class=err>вывода</span><span class=p>.</span>

<span class=err>Так</span><span class=p>,</span> <span class=err>в</span> <span class=err>форматной</span> <span class=err>строке</span>

<span class=ss>`Search phrase: ${SearchPhrase:Quoted}, count: ${c:Escaped}, ad price: $$${price:JSON};`</span>

<span class=err>между</span> <span class=err>разделителями</span> <span class=ss>`Search phrase: `</span><span class=p>,</span> <span class=ss>`, count: `</span><span class=p>,</span> <span class=ss>`, ad price: $`</span> <span class=err>и</span> <span class=ss>`;`</span> <span class=err>при</span> <span class=err>выводе</span> <span class=err>будут</span> <span class=err>подставлены</span> <span class=p>(</span><span class=err>при</span> <span class=err>вводе</span> <span class=o>-</span> <span class=err>будут</span> <span class=err>ожидаться</span><span class=p>)</span> <span class=err>значения</span> <span class=err>столбцов</span> <span class=ss>`SearchPhrase`</span><span class=p>,</span> <span class=ss>`c`</span> <span class=err>и</span> <span class=ss>`price`</span><span class=p>,</span> <span class=err>сериализованные</span> <span class=err>как</span> <span class=ss>`Quoted`</span><span class=p>,</span> <span class=ss>`Escaped`</span> <span class=err>и</span> <span class=ss>`JSON`</span> <span class=err>соответственно</span><span class=p>,</span> <span class=err>например</span><span class=p>:</span>

<span class=ss>`Search phrase: &#39;bathroom interior design&#39;, count: 2166, ad price: $3;`</span>
</code></pre></div> <p>Настройка <code>format_template_rows_between_delimiter</code> задаёт разделитель между строками, который выводится (или ожмдается при вводе) после каждой строки, кроме последней. По умолчанию <code>\n</code>.</p> <p>Настройка <code>format_template_resultset</code> задаёт путь к файлу, содержащему форматную строку для результата. Форматная строка для результата имеет синтаксис аналогичный форматной строке для строк таблицы и позволяет указать префикс, суффикс и способ вывода дополнительной информации. Вместо имён столбцов в ней указываются следующие имена подстановок:</p> <ul> <li><code>data</code> - строки с данными в формате <code>format_template_row</code>, разделённые <code>format_template_rows_between_delimiter</code>. Эта подстановка должна быть первой подстановкой в форматной строке.</li> <li><code>totals</code> - строка с тотальными значениями в формате <code>format_template_row</code> (при использовании WITH TOTALS)</li> <li><code>min</code> - строка с минимальными значениями в формате <code>format_template_row</code> (при настройке extremes, выставленной в 1)</li> <li><code>max</code> - строка с максимальными значениями в формате <code>format_template_row</code> (при настройке extremes, выставленной в 1)</li> <li><code>rows</code> - общее количество выведенных стрчек</li> <li><code>rows_before_limit</code> - не менее скольких строчек получилось бы, если бы не было LIMIT-а. Выводится только если запрос содержит LIMIT. В случае, если запрос содержит GROUP BY, <code>rows_before_limit</code> - точное число строк, которое получилось бы, если бы не было LIMIT-а.</li> <li><code>time</code> - время выполнения запроса в секундах</li> <li><code>rows_read</code> - сколько строк было прочитано при выполнении запроса</li> <li><code>bytes_read</code> - сколько байт (несжатых) было прочитано при выполнении запроса</li> </ul> <p>У подстановок <code>data</code>, <code>totals</code>, <code>min</code> и <code>max</code> не должны быть указаны типы экранирования (или должен быть указан <code>None</code>). Остальные подстановки - это отдельные значения, для них может быть указан любой тип экранирования.<br> Если строка <code>format_template_resultset</code> пустая, то по-умолчанию используется <code>${data}</code>.<br> Из всех перечисленных подстановок форматная строка <code>format_template_resultset</code> для ввода может содержать только <code>data</code>.<br> Также при вводе формат поддерживает пропуск значений столбцов и пропуск значений в префиксе и суффиксе (см. пример).</p> <p>Пример вывода:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span>
<span class=n>format_template_resultset</span> <span class=o>=</span> <span class=s1>&#39;/some/path/resultset.format&#39;</span><span class=p>,</span> <span class=n>format_template_row</span> <span class=o>=</span> <span class=s1>&#39;/some/path/row.format&#39;</span><span class=p>,</span> <span class=n>format_template_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>&#39;\n    &#39;</span>
</code></pre></div> <p><code>/some/path/resultset.format</code>:</p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=nt>&lt;html&gt;</span> <span class=nt>&lt;head&gt;</span> <span class=nt>&lt;title&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
 <span class=nt>&lt;body&gt;</span>
  <span class=nt>&lt;table</span> <span class=na>border=</span><span class=s>&quot;1&quot;</span><span class=nt>&gt;</span> <span class=nt>&lt;caption&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=nt>&lt;tr&gt;</span> <span class=nt>&lt;th&gt;</span>Search phrase<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=nt>&lt;th&gt;</span>Count<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=cp>${</span><span class=n>data</span><span class=cp>}</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=nt>&lt;table</span> <span class=na>border=</span><span class=s>&quot;1&quot;</span><span class=nt>&gt;</span> <span class=nt>&lt;caption&gt;</span>Max<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=cp>${</span><span class=nb>max</span><span class=cp>}</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=nt>&lt;b&gt;</span>Processed <span class=cp>${</span><span class=n>rows_read</span><span class=p>:</span><span class=n>XML</span><span class=cp>}</span> rows in <span class=cp>${</span><span class=n>time</span><span class=p>:</span><span class=n>XML</span><span class=cp>}</span> sec<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
 <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <p><code>/some/path/row.format</code>:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;tr&gt;</span> <span class=nt>&lt;td&gt;</span><span class=cp>${</span><span class=mi>0</span><span class=p>:</span><span class=n>XML</span><span class=cp>}</span><span class=nt>&lt;/td&gt;</span> <span class=nt>&lt;td&gt;</span><span class=cp>${</span><span class=mi>1</span><span class=p>:</span><span class=n>XML</span><span class=cp>}</span><span class=nt>&lt;/td&gt;</span> <span class=nt>&lt;/tr&gt;</span>
</code></pre></div> <p>Резутьтат:</p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>&quot;1&quot;</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Search phrase<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Count<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8267016<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>bathroom interior design<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>2166<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>yandex<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1655<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>spring 2014 fashion<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1549<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>freeform photos<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1480<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>&quot;1&quot;</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Max<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8873898<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>Processed 3095973 rows in 0.1569913 sec<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
 <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <p>Пример ввода:</p> <div class=codehilite><pre><span></span><code>Some header
Page views: 5, User id: 4324182021466249494, Useless field: hello, Duration: 146, Sign: -1
Page views: 6, User id: 4324182021466249494, Useless field: world, Duration: 185, Sign: 1
Total rows: 2
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>UserActivity</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span>
<span class=n>format_template_resultset</span> <span class=o>=</span> <span class=s1>&#39;/some/path/resultset.format&#39;</span><span class=p>,</span> <span class=n>format_template_row</span> <span class=o>=</span> <span class=s1>&#39;/some/path/row.format&#39;</span>
</code></pre></div> <p><code>/some/path/resultset.format</code>:</p> <div class=codehilite><pre><span></span><code>Some header\n<span class=cp>${</span><span class=n>data</span><span class=cp>}</span>\nTotal rows: <span class=cp>${</span><span class=p>:</span><span class=n>CSV</span><span class=cp>}</span>\n
</code></pre></div> <p><code>/some/path/row.format</code>:</p> <div class=codehilite><pre><span></span><code>Page views: <span class=cp>${</span><span class=n>PageViews</span><span class=p>:</span><span class=n>CSV</span><span class=cp>}</span>, User id: <span class=cp>${</span><span class=n>UserID</span><span class=p>:</span><span class=n>CSV</span><span class=cp>}</span>, Useless field: <span class=cp>${</span><span class=p>:</span><span class=n>CSV</span><span class=cp>}</span>, Duration: <span class=cp>${</span><span class=n>Duration</span><span class=p>:</span><span class=n>CSV</span><span class=cp>}</span>, Sign: <span class=cp>${</span><span class=n>Sign</span><span class=p>:</span><span class=n>CSV</span><span class=cp>}</span>
</code></pre></div> <p><code>PageViews</code>, <code>UserID</code>, <code>Duration</code> и <code>Sign</code> внутри подстановок - имена столбцов в таблице, в которую вставляются данные. Значения после <code>Useless field</code> в строках и значение после <code>\nTotal rows:</code> в суффиксе будут проигнорированы.<br> Все разделители во входных данных должны строго соответствовать разделителям в форматных строках.</p> <h2 id=templateignorespaces>TemplateIgnoreSpaces<a class=headerlink href=#templateignorespaces title="Permanent link">&para;</a></h2> <p>Подходит только для ввода. Отличается от формата <code>Template</code> тем, что пропускает пробельные символы между разделителями и значениями во входном потоке. Также в этом формате можно указать пустые подстановки с типом экранирования <code>None</code> (<code>${}</code> или <code>${:None}</code>), чтобы разбить разделители на несколько частей, пробелы между которыми должны игнорироваться. Такие подстановки используются только для пропуска пробелов. С помощью этого формата можно считывать <code>JSON</code>, если значения столбцов в нём всегда идут в одном порядке в каждой строке. Например, для вставки данных из примера вывода формата <a href=#json>JSON</a> в таблицу со столбцами <code>phrase</code> и <code>cnt</code> можно использовать следующий запрос:</p> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=k>table_name</span> <span class=n>FORMAT</span> <span class=n>TemplateIgnoreSpaces</span> <span class=n>SETTINGS</span>
<span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;{${}&quot;meta&quot;${}:${:JSON},${}&quot;data&quot;${}:${}[${data}]${},${}&quot;totals&quot;${}:${:JSON},${}&quot;extremes&quot;${}:${:JSON},${}&quot;rows&quot;${}:${:JSON},${}&quot;rows_before_limit_at_least&quot;${}:${:JSON}${}}&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;{${}&quot;SearchPhrase&quot;${}:${}${phrase:JSON}${},${}&quot;c&quot;${}:${}${cnt:JSON}${}}&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>&#39;,&#39;</span>
</code></pre></div> <h2 id=tskv>TSKV<a class=headerlink href=#tskv title="Permanent link">&para;</a></h2> <p>Похож на TabSeparated, но выводит значения в формате name=value. Имена экранируются так же, как строки в формате TabSeparated и, дополнительно, экранируется также символ =.</p> <div class=codehilite><pre><span></span><code>SearchPhrase=   count()=8267016
SearchPhrase=интерьер ванной комнаты    count()=2166
SearchPhrase=яндекс     count()=1655
SearchPhrase=весна 2014 мода    count()=1549
SearchPhrase=фриформ фото       count()=1480
SearchPhrase=анджелина джоли    count()=1245
SearchPhrase=омск       count()=1112
SearchPhrase=фото собак разных пород    count()=1091
SearchPhrase=дизайн штор        count()=1064
SearchPhrase=баку       count()=1000
</code></pre></div> <p><a href=../../sql_reference/syntax/ >NULL</a> форматируется как <code>\N</code>.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>TSKV</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>x=1 y=\N
</code></pre></div> <p>При большом количестве маленьких столбцов, этот формат существенно неэффективен, и обычно нет причин его использовать. Впрочем, он не хуже формата JSONEachRow по производительности.</p> <p>Поддерживается как вывод, так и парсинг данных в этом формате. При парсинге, поддерживается расположение значений разных столбцов в произвольном порядке. Допустимо отсутствие некоторых значений - тогда они воспринимаются как равные значениям по умолчанию. В этом случае в качестве значений по умолчанию используются нули и пустые строки. Сложные значения, которые могут быть заданы в таблице не поддерживаются как значения по умолчанию.</p> <p>При парсинге, в качестве дополнительного поля, может присутствовать <code>tskv</code> без знака равенства и без значения. Это поле игнорируется.</p> <h2 id=csv>CSV<a class=headerlink href=#csv title="Permanent link">&para;</a></h2> <p>Формат Comma Separated Values (<a href=https://tools.ietf.org/html/rfc4180 rel="external nofollow noreferrer">RFC</a>).</p> <p>При форматировании, строки выводятся в двойных кавычках. Двойная кавычка внутри строки выводится как две двойные кавычки подряд. Других правил экранирования нет. Даты и даты-с-временем выводятся в двойных кавычках. Числа выводятся без кавычек. Значения разделяются символом-разделителем, по умолчанию — <code>,</code>. Символ-разделитель определяется настройкой <a href=../../operations/settings/settings/#settings-format_csv_delimiter>format_csv_delimiter</a>. Строки разделяются unix переводом строки (LF). Массивы сериализуются в CSV следующим образом: сначала массив сериализуется в строку, как в формате TabSeparated, а затем полученная строка выводится в CSV в двойных кавычках. Кортежи в формате CSV сериализуются, как отдельные столбцы (то есть, теряется их вложенность в кортеж).</p> <div class=codehilite><pre><span></span><code>$ clickhouse-client --format_csv_delimiter<span class=o>=</span><span class=s2>&quot;|&quot;</span> --query<span class=o>=</span><span class=s2>&quot;INSERT INTO test.csv FORMAT CSV&quot;</span> &lt; data.csv
</code></pre></div> <p>*По умолчанию — <code>,</code>. См. настройку <a href=../../operations/settings/settings/#settings-format_csv_delimiter>format_csv_delimiter</a> для дополнительной информации.</p> <p>При парсинге, все значения могут парситься как в кавычках, так и без кавычек. Поддерживаются как двойные, так и одинарные кавычки. Строки также могут быть без кавычек. В этом случае они парсятся до символа-разделителя или перевода строки (CR или LF). В нарушение RFC, в случае парсинга строк не в кавычках, начальные и конечные пробелы и табы игнорируются. В качестве перевода строки, поддерживаются как Unix (LF), так и Windows (CR LF) и Mac OS Classic (LF CR) варианты.</p> <p><code>NULL</code> форматируется в виде <code>\N</code> или <code>NULL</code> или пустой неэкранированной строки (см. настройки <a href=../../operations/settings/settings/#settings-input_format_csv_unquoted_null_literal_as_null>input_format_csv_unquoted_null_literal_as_null</a> и <a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a>).</p> <p>Если установлена настройка <a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields = 1</a> и тип столбца не <code>Nullable(T)</code>, то пустые значения без кавычек заменяются значениями по умолчанию для типа данных столбца.</p> <p>Формат CSV поддерживает вывод totals и extremes аналогично <code>TabSeparated</code>.</p> <h2 id=csvwithnames>CSVWithNames<a class=headerlink href=#csvwithnames title="Permanent link">&para;</a></h2> <p>Выводит также заголовок, аналогично <code>TabSeparatedWithNames</code>.</p> <h2 id=format-customseparated>CustomSeparated<a class=headerlink href=#format-customseparated title="Permanent link">&para;</a></h2> <p>Аналогичен <a href=#format-template>Template</a>, но выводит (или считывает) все столбцы, используя для них правило экранирования из настройки <code>format_custom_escaping_rule</code> и разделители из настроек <code>format_custom_field_delimiter</code>, <code>format_custom_row_before_delimiter</code>, <code>format_custom_row_after_delimiter</code>, <code>format_custom_row_between_delimiter</code>, <code>format_custom_result_before_delimiter</code> и <code>format_custom_result_after_delimiter</code>, а не из форматных строк.<br> Также существует формат <code>CustomSeparatedIgnoreSpaces</code>, аналогичный <code>TemplateIgnoreSpaces</code>.</p> <h2 id=json>JSON<a class=headerlink href=#json title="Permanent link">&para;</a></h2> <p>Выводит данные в формате JSON. Кроме таблицы с данными, также выводятся имена и типы столбцов, и некоторая дополнительная информация - общее количество выведенных строк, а также количество строк, которое могло бы быть выведено, если бы не было LIMIT-а. Пример:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=n>JSON</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=p>{</span>
        <span class=nt>&quot;meta&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SearchPhrase&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;String&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;c&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;UInt64&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;data&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8267016&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;bathroom interior design&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;2166&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;yandex&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1655&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;spring 2014 fashion&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1549&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;freeform photos&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1480&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;totals&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8873898&quot;</span>
        <span class=p>},</span>

        <span class=nt>&quot;extremes&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;min&quot;</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1480&quot;</span>
                <span class=p>},</span>
                <span class=nt>&quot;max&quot;</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8267016&quot;</span>
                <span class=p>}</span>
        <span class=p>},</span>

        <span class=nt>&quot;rows&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>&quot;rows_before_limit_at_least&quot;</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</code></pre></div> <p>JSON совместим с JavaScript. Для этого, дополнительно экранируются некоторые символы: символ прямого слеша <code>/</code> экранируется в виде <code>\/</code>; альтернативные переводы строк <code>U+2028</code>, <code>U+2029</code>, на которых ломаются некоторые браузеры, экранируются в виде <code>\uXXXX</code>-последовательностей. Экранируются ASCII control characters: backspace, form feed, line feed, carriage return, horizontal tab в виде <code>\b</code>, <code>\f</code>, <code>\n</code>, <code>\r</code>, <code>\t</code> соответственно, а также остальные байты из диапазона 00-1F с помощью <code>\uXXXX</code>-последовательностей. Невалидные UTF-8 последовательности заменяются на replacement character � и, таким образом, выводимый текст будет состоять из валидных UTF-8 последовательностей. Числа типа UInt64 и Int64, для совместимости с JavaScript, по умолчанию выводятся в двойных кавычках. Чтобы они выводились без кавычек, можно установить конфигурационный параметр <a href=../../operations/settings/settings/#session_settings-output_format_json_quote_64bit_integers>output_format_json_quote_64bit_integers</a> равным 0.</p> <p><code>rows</code> - общее количество выведенных строчек.</p> <p><code>rows_before_limit_at_least</code> - не менее скольких строчек получилось бы, если бы не было LIMIT-а. Выводится только если запрос содержит LIMIT.<br> В случае, если запрос содержит GROUP BY, rows_before_limit_at_least - точное число строк, которое получилось бы, если бы не было LIMIT-а.</p> <p><code>totals</code> - тотальные значения (при использовании WITH TOTALS).</p> <p><code>extremes</code> - экстремальные значения (при настройке extremes, выставленной в 1).</p> <p>Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).</p> <p>ClickHouse поддерживает <a href=../../sql_reference/syntax/ >NULL</a>, который при выводе JSON будет отображен как <code>null</code>.</p> <p>Смотрите также формат <a href=#jsoneachrow>JSONEachRow</a> .</p> <h2 id=jsoncompact>JSONCompact<a class=headerlink href=#jsoncompact title="Permanent link">&para;</a></h2> <p>Отличается от JSON только тем, что строчки данных выводятся в массивах, а не в object-ах.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code><span class=p>{</span>
        <span class=nt>&quot;meta&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SearchPhrase&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;String&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;c&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;UInt64&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;data&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=s2>&quot;8267016&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;интерьер ванной комнаты&quot;</span><span class=p>,</span> <span class=s2>&quot;2166&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;яндекс&quot;</span><span class=p>,</span> <span class=s2>&quot;1655&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;весна 2014 мода&quot;</span><span class=p>,</span> <span class=s2>&quot;1549&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;фриформ фото&quot;</span><span class=p>,</span> <span class=s2>&quot;1480&quot;</span><span class=p>]</span>
        <span class=p>],</span>

        <span class=nt>&quot;totals&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;8873898&quot;</span><span class=p>],</span>

        <span class=nt>&quot;extremes&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;1480&quot;</span><span class=p>],</span>
                <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;8267016&quot;</span><span class=p>]</span>
        <span class=p>},</span>

        <span class=nt>&quot;rows&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>&quot;rows_before_limit_at_least&quot;</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</code></pre></div> <p>Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).<br> Смотрите также формат <code>JSONEachRow</code>.</p> <h2 id=jsoneachrow>JSONEachRow<a class=headerlink href=#jsoneachrow title="Permanent link">&para;</a></h2> <p>При использовании этого формата, ClickHouse выводит каждую запись как объект JSON (каждый объект отдельной строкой), при этом данные в целом — невалидный JSON.</p> <div class=codehilite><pre><span></span><code><span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;дизайн штор&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1064&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;баку&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1000&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=s2>&quot;8267016&quot;</span><span class=p>}</span>
</code></pre></div> <p>При вставке данных необходимо каждую запись передавать как отдельный объект JSON.</p> <h3 id=vstavka-dannykh>Вставка данных<a class=headerlink href=#vstavka-dannykh title="Permanent link">&para;</a></h3> <div class=codehilite><pre><span></span><code><span class=nv>INSERT</span> <span class=nv>INTO</span> <span class=nv>UserActivity</span> <span class=nv>FORMAT</span> <span class=nv>JSONEachRow</span> <span class=p>{</span><span class=s2>&quot;PageViews&quot;</span><span class="s s-Atom">:</span><span class=mi>5</span><span class=p>,</span> <span class=s2>&quot;UserID&quot;</span><span class="s s-Atom">:</span><span class=s2>&quot;4324182021466249494&quot;</span><span class=p>,</span> <span class=s2>&quot;Duration&quot;</span><span class="s s-Atom">:</span><span class=mi>146</span><span class=p>,</span><span class=s2>&quot;Sign&quot;</span><span class=p>:-</span><span class=mi>1</span><span class=p>}</span> <span class=p>{</span><span class=s2>&quot;UserID&quot;</span><span class="s s-Atom">:</span><span class=s2>&quot;4324182021466249494&quot;</span><span class=p>,</span><span class=s2>&quot;PageViews&quot;</span><span class="s s-Atom">:</span><span class=mi>6</span><span class=p>,</span><span class=s2>&quot;Duration&quot;</span><span class="s s-Atom">:</span><span class=mi>185</span><span class=p>,</span><span class=s2>&quot;Sign&quot;</span><span class="s s-Atom">:</span><span class=mi>1</span><span class=p>}</span>
</code></pre></div> <p>ClickHouse допускает:</p> <ul> <li>Любой порядок пар ключ-значение в объекте.</li> <li>Пропуск отдельных значений.</li> </ul> <p>ClickHouse игнорирует пробелы между элементами и запятые после объектов. Вы можете передать все объекты одной строкой. Вам не нужно разделять их переносами строк.</p> <p><strong>Обработка пропущенных значений</strong></p> <p>ClickHouse заменяет опущенные значения значениями по умолчанию для соответствующих <a href=../../sql_reference/data_types/ >data types</a>.</p> <p>Если указано <code>DEFAULT expr</code>, то ClickHouse использует различные правила подстановки в зависимости от настройки <a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a>.</p> <p>Рассмотрим следующую таблицу:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>example_table</span>
<span class=p>(</span>
    <span class=n>x</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=n>a</span> <span class=k>DEFAULT</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
</code></pre></div> <ul> <li>Если <code>input_format_defaults_for_omitted_fields = 0</code>, то значение по умолчанию для <code>x</code> и <code>a</code> равняется <code>0</code> (поскольку это значение по умолчанию для типа данных <code>UInt32</code>.)</li> <li>Если <code>input_format_defaults_for_omitted_fields = 1</code>, то значение по умолчанию для <code>x</code> равно <code>0</code>, а значение по умолчанию <code>a</code> равно <code>x * 2</code>.</li> </ul> <div class="admonition note"> <p class=admonition-title>Предупреждение</p> <p>Если <code>insert_sample_with_metadata = 1</code>, то при обработке запросов ClickHouse потребляет больше вычислительных ресурсов, чем если <code>insert_sample_with_metadata = 0</code>.</p> </div> <h3 id=vyborka-dannykh>Выборка данных<a class=headerlink href=#vyborka-dannykh title="Permanent link">&para;</a></h3> <p>Рассмотрим в качестве примера таблицу <code>UserActivity</code>:</p> <div class=codehilite><pre><span></span><code>┌──────────────UserID─┬─PageViews─┬─Duration─┬─Sign─┐
│ 4324182021466249494 │         5 │      146 │   -1 │
│ 4324182021466249494 │         6 │      185 │    1 │
└─────────────────────┴───────────┴──────────┴──────┘
</code></pre></div> <p>Запрос <code>SELECT * FROM UserActivity FORMAT JSONEachRow</code> возвращает:</p> <div class=codehilite><pre><span></span><code>{&quot;UserID&quot;:&quot;4324182021466249494&quot;,&quot;PageViews&quot;:5,&quot;Duration&quot;:146,&quot;Sign&quot;:-1}
{&quot;UserID&quot;:&quot;4324182021466249494&quot;,&quot;PageViews&quot;:6,&quot;Duration&quot;:185,&quot;Sign&quot;:1}
</code></pre></div> <p>В отличие от формата <a href=#json>JSON</a>, для <code>JSONEachRow</code> ClickHouse не заменяет невалидные UTF-8 последовательности. Значения экранируются так же, как и для формата <code>JSON</code>.</p> <div class="admonition note"> <p class=admonition-title>Примечание</p> <p>В строках может выводиться произвольный набор байт. Используйте формат <code>JSONEachRow</code>, если вы уверены, что данные в таблице могут быть представлены в формате JSON без потери информации.</p> </div> <h3 id=jsoneachrow-nested>Использование вложенных структур<a class=headerlink href=#jsoneachrow-nested title="Permanent link">&para;</a></h3> <p>Если у вас есть таблица со столбцами типа <a href=../../sql_reference/data_types/nested_data_structures/nested/ >Nested</a>, то в неё можно вставить данные из JSON-документа с такой же структурой. Функциональность включается настройкой <a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json</a>.</p> <p>Например, рассмотрим следующую таблицу:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>json_each_row_nested</span> <span class=p>(</span><span class=n>n</span> <span class=n>Nested</span> <span class=p>(</span><span class=n>s</span> <span class=n>String</span><span class=p>,</span> <span class=n>i</span> <span class=n>Int32</span><span class=p>)</span> <span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span>
</code></pre></div> <p>Из описания типа данных <code>Nested</code> видно, что ClickHouse трактует каждый компонент вложенной структуры как отдельный столбец (для нашей таблицы <code>n.s</code> и <code>n.i</code>). Можно вставить данные следующим образом:</p> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n.s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;n.i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}</span>
</code></pre></div> <p>Чтобы вставить данные как иерархический объект JSON, установите <a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json=1</a>.</p> <div class=codehilite><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;n&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;abc&quot;</span><span class=p>,</span> <span class=s2>&quot;def&quot;</span><span class=p>],</span>
        <span class=nt>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Без этой настройки ClickHouse сгенерирует исключение.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;input_format_import_nested_json&#39;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─name────────────────────────────┬─value─┐
│ input_format_import_nested_json │ 0     │
└─────────────────────────────────┴───────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n&quot;</span><span class=p>:</span> <span class=err>{</span><span class=ss>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>Code: 117. DB::Exception: Unknown field found while parsing JSONEachRow format: n: (at row 1)
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SET</span> <span class=n>input_format_import_nested_json</span><span class=o>=</span><span class=mi>1</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n&quot;</span><span class=p>:</span> <span class=err>{</span><span class=ss>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>json_each_row_nested</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─n.s───────────┬─n.i────┐
│ [&#39;abc&#39;,&#39;def&#39;] │ [1,23] │
└───────────────┴────────┘
</code></pre></div> <h2 id=native>Native<a class=headerlink href=#native title="Permanent link">&para;</a></h2> <p>Самый эффективный формат. Данные пишутся и читаются блоками в бинарном виде. Для каждого блока пишется количество строк, количество столбцов, имена и типы столбцов, а затем кусочки столбцов этого блока, один за другим. То есть, этот формат является «столбцовым» - не преобразует столбцы в строки. Именно этот формат используется в родном интерфейсе - при межсерверном взаимодействии, при использовании клиента командной строки, при работе клиентов, написанных на C++.</p> <p>Вы можете использовать этот формат для быстрой генерации дампов, которые могут быть прочитаны только СУБД ClickHouse. Вряд ли имеет смысл работать с этим форматом самостоятельно.</p> <h2 id=null>Null<a class=headerlink href=#null title="Permanent link">&para;</a></h2> <p>Ничего не выводит. При этом, запрос обрабатывается, а при использовании клиента командной строки, данные ещё и передаются на клиент. Используется для тестов, в том числе, тестов производительности.<br> Очевидно, формат подходит только для вывода, но не для парсинга.</p> <h2 id=pretty>Pretty<a class=headerlink href=#pretty title="Permanent link">&para;</a></h2> <p>Выводит данные в виде Unicode-art табличек, также используя ANSI-escape последовательности для установки цветов в терминале.<br> Рисуется полная сетка таблицы и, таким образом, каждая строчка занимает две строки в терминале.<br> Каждый блок результата выводится в виде отдельной таблицы. Это нужно, чтобы можно было выводить блоки без буферизации результата (буферизация потребовалась бы, чтобы заранее вычислить видимую ширину всех значений.)</p> <p><a href=../../sql_reference/syntax/ >NULL</a> выводится как <code>ᴺᵁᴸᴸ</code>.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─x─┬────y─┐
│ 1 │ ᴺᵁᴸᴸ │
└───┴──────┘
</code></pre></div> <p>В форматах <code>Pretty*</code> строки выводятся без экранирования. Ниже приведен пример для формата <a href=#prettycompact>PrettyCompact</a>:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=s1>&#39;String with \&#39;</span><span class=n>quotes</span><span class=err>\</span><span class=s1>&#39; and \t character&#39;</span> <span class=k>AS</span> <span class=n>Escaping_test</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─Escaping_test────────────────────────┐
│ String with &#39;quotes&#39; and   character │
└──────────────────────────────────────┘
</code></pre></div> <p>Для защиты от вываливания слишком большого количества данных в терминал, выводится только первые 10 000 строк. Если строк больше или равно 10 000, то будет написано «Showed first 10 000.»<br> Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).</p> <p>Формат <code>Pretty</code> поддерживает вывод тотальных значений (при использовании WITH TOTALS) и экстремальных значений (при настройке extremes выставленной в 1). В этих случаях, после основных данных выводятся тотальные значения, и экстремальные значения, в отдельных табличках. Пример (показан для формата <a href=#prettycompact>PrettyCompact</a>):</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>PrettyCompact</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌──EventDate─┬───────c─┐
│ 2014-03-17 │ 1406958 │
│ 2014-03-18 │ 1383658 │
│ 2014-03-19 │ 1405797 │
│ 2014-03-20 │ 1353623 │
│ 2014-03-21 │ 1245779 │
│ 2014-03-22 │ 1031592 │
│ 2014-03-23 │ 1046491 │
└────────────┴─────────┘

Totals:
┌──EventDate─┬───────c─┐
│ 0000-00-00 │ 8873898 │
└────────────┴─────────┘

Extremes:
┌──EventDate─┬───────c─┐
│ 2014-03-17 │ 1031592 │
│ 2014-03-23 │ 1406958 │
└────────────┴─────────┘
</code></pre></div> <h2 id=prettycompact>PrettyCompact<a class=headerlink href=#prettycompact title="Permanent link">&para;</a></h2> <p>Отличается от <a href=#pretty>Pretty</a> тем, что не рисуется сетка между строками - результат более компактный.<br> Этот формат используется по умолчанию в клиенте командной строки в интерактивном режиме.</p> <h2 id=prettycompactmonoblock>PrettyCompactMonoBlock<a class=headerlink href=#prettycompactmonoblock title="Permanent link">&para;</a></h2> <p>Отличается от <a href=#prettycompact>PrettyCompact</a> тем, что строки (до 10 000 штук) буферизуются и затем выводятся в виде одной таблицы, а не по блокам.</p> <h2 id=prettynoescapes>PrettyNoEscapes<a class=headerlink href=#prettynoescapes title="Permanent link">&para;</a></h2> <p>Отличается от Pretty тем, что не используются ANSI-escape последовательности. Это нужно для отображения этого формата в браузере, а также при использовании утилиты командной строки watch.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code>$ watch -n1 <span class=s2>&quot;clickhouse-client --query=&#39;SELECT event, value FROM system.events FORMAT PrettyCompactNoEscapes&#39;&quot;</span>
</code></pre></div> <p>Для отображения в браузере, вы можете использовать HTTP интерфейс.</p> <h3 id=prettycompactnoescapes>PrettyCompactNoEscapes<a class=headerlink href=#prettycompactnoescapes title="Permanent link">&para;</a></h3> <p>Аналогично.</p> <h3 id=prettyspacenoescapes>PrettySpaceNoEscapes<a class=headerlink href=#prettyspacenoescapes title="Permanent link">&para;</a></h3> <p>Аналогично.</p> <h2 id=prettyspace>PrettySpace<a class=headerlink href=#prettyspace title="Permanent link">&para;</a></h2> <p>Отличается от <a href=#prettycompact>PrettyCompact</a> тем, что вместо сетки используется пустое пространство (пробелы).</p> <h2 id=rowbinary>RowBinary<a class=headerlink href=#rowbinary title="Permanent link">&para;</a></h2> <p>Форматирует и парсит данные по строкам, в бинарном виде. Строки и значения уложены подряд, без разделителей.<br> Формат менее эффективен, чем формат Native, так как является строковым.</p> <p>Числа представлены в little endian формате фиксированной длины. Для примера, UInt64 занимает 8 байт.<br> DateTime представлены как UInt32, содержащий unix timestamp в качестве значения.<br> Date представлены как UInt16, содержащий количество дней, прошедших с 1970-01-01 в качестве значения.<br> String представлены как длина в формате varint (unsigned <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer">LEB128</a>), а затем байты строки.<br> FixedString представлены просто как последовательность байт.</p> <p>Array представлены как длина в формате varint (unsigned <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer">LEB128</a>), а затем элементы массива, подряд.</p> <p>Для поддержки <a href=../../sql_reference/syntax/#null-literal>NULL</a> перед каждым значением типа <a href=../../sql_reference/data_types/nullable/ >Nullable</a> следует байт содержащий 1 или 0. Если байт 1, то значение равно NULL, и этот байт интерпретируется как отдельное значение (т.е. после него следует значение следующего поля). Если байт 0, то после байта следует значение поля (не равно NULL).</p> <h2 id=rowbinarywithnamesandtypes>RowBinaryWithNamesAndTypes<a class=headerlink href=#rowbinarywithnamesandtypes title="Permanent link">&para;</a></h2> <p>То же самое что <a href=#rowbinary>RowBinary</a>, но добавляется заголовок:</p> <ul> <li>Количество колонок - N, закодированное <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer">LEB128</a>,</li> <li>N строк (<code>String</code>) с именами колонок,</li> <li>N строк (<code>String</code>) с типами колонок.</li> </ul> <h2 id=data-format-values>Values<a class=headerlink href=#data-format-values title="Permanent link">&para;</a></h2> <p>Выводит каждую строку в скобках. Строки разделены запятыми. После последней строки запятой нет. Значения внутри скобок также разделены запятыми. Числа выводятся в десятичном виде без кавычек. Массивы выводятся в квадратных скобках. Строки, даты, даты-с-временем выводятся в кавычках. Правила экранирования и особенности парсинга аналогичны формату <a href=#tabseparated>TabSeparated</a>. При форматировании, лишние пробелы не ставятся, а при парсинге - допустимы и пропускаются (за исключением пробелов внутри значений типа массив, которые недопустимы). <a href=../../sql_reference/syntax/ >NULL</a> представляется как <code>NULL</code>.</p> <p>Минимальный набор символов, которых вам необходимо экранировать при передаче в Values формате: одинарная кавычка и обратный слеш.</p> <p>Именно этот формат используется в запросе <code>INSERT INTO t VALUES ...</code>, но вы также можете использовать его для форматирования результатов запросов.</p> <h2 id=vertical>Vertical<a class=headerlink href=#vertical title="Permanent link">&para;</a></h2> <p>Выводит каждое значение на отдельной строке, с указанием имени столбца. Формат удобно использовать для вывода одной-нескольких строк, если каждая строка состоит из большого количества столбцов.</p> <p><a href=../../sql_reference/syntax/ >NULL</a> выводится как <code>ᴺᵁᴸᴸ</code>.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>Row 1:
──────
x: 1
y: ᴺᵁᴸᴸ
</code></pre></div> <p>В формате <code>Vertical</code> строки выводятся без экранирования. Например:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=s1>&#39;string with \&#39;</span><span class=n>quotes</span><span class=err>\</span><span class=s1>&#39; and \t with some special \n characters&#39;</span> <span class=k>AS</span> <span class=n>test</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>Row 1:
──────
test: string with &#39;quotes&#39; and   with some special
 characters
</code></pre></div> <p>Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).</p> <h2 id=xml>XML<a class=headerlink href=#xml title="Permanent link">&para;</a></h2> <p>Формат XML подходит только для вывода данных, не для парсинга. Пример:</p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt;</span>
<span class=nt>&lt;result&gt;</span>
        <span class=nt>&lt;meta&gt;</span>
                <span class=nt>&lt;columns&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>SearchPhrase<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>count()<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>UInt64<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                <span class=nt>&lt;/columns&gt;</span>
        <span class=nt>&lt;/meta&gt;</span>
        <span class=nt>&lt;data&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>8267016<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>интерьер ванной комнаты<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>2166<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>яндекс<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1655<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>весна 2014 мода<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1549<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>фриформ фото<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1480<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>анджелина джоли<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1245<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>омск<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1112<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>фото собак разных пород<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1091<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>дизайн штор<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1064<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>баку<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1000<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
        <span class=nt>&lt;/data&gt;</span>
        <span class=nt>&lt;rows&gt;</span>10<span class=nt>&lt;/rows&gt;</span>
        <span class=nt>&lt;rows_before_limit_at_least&gt;</span>141137<span class=nt>&lt;/rows_before_limit_at_least&gt;</span>
<span class=nt>&lt;/result&gt;</span>
</code></pre></div> <p>Если имя столбца не имеет некоторый допустимый вид, то в качестве имени элемента используется просто field. В остальном, структура XML повторяет структуру в формате JSON.<br> Как и для формата JSON, невалидные UTF-8 последовательности заменяются на replacement character � и, таким образом, выводимый текст будет состоять из валидных UTF-8 последовательностей.</p> <p>В строковых значениях, экранируются символы <code>&lt;</code> и <code>&amp;</code> как <code>&amp;lt;</code> и <code>&amp;amp;</code>.</p> <p>Массивы выводятся как <code>&lt;array&gt;&lt;elem&gt;Hello&lt;/elem&gt;&lt;elem&gt;World&lt;/elem&gt;...&lt;/array&gt;</code>,<br> а кортежи как <code>&lt;tuple&gt;&lt;elem&gt;Hello&lt;/elem&gt;&lt;elem&gt;World&lt;/elem&gt;...&lt;/tuple&gt;</code>.</p> <h2 id=capnproto>CapnProto<a class=headerlink href=#capnproto title="Permanent link">&para;</a></h2> <p>Cap’n Proto - формат бинарных сообщений, похож на Protocol Buffers и Thrift, но не похож на JSON или MessagePack.</p> <p>Сообщения Cap’n Proto строго типизированы и не самоописывающиеся, т.е. нуждаются во внешнем описании схемы. Схема применяется «на лету» и кешируется между запросами.</p> <div class=codehilite><pre><span></span><code>$ cat capnproto_messages.bin <span class=p>|</span> clickhouse-client --query <span class=s2>&quot;INSERT INTO test.hits FORMAT CapnProto SETTINGS format_schema=&#39;schema:Message&#39;&quot;</span>
</code></pre></div> <p>Где <code>schema.capnp</code> выглядит следующим образом:</p> <div class=codehilite><pre><span></span><code><span class=k>struct</span> <span class=n>Message</span> {
  <span class=n>SearchPhrase</span> <span class=nd>@0</span> <span class=nc>:Text</span>;
  <span class=n>c</span> <span class=nd>@1</span> <span class=nc>:Uint64</span>;
}
</code></pre></div> <p>Десериализация эффективна и обычно не повышает нагрузку на систему.</p> <p>См. также <a href=#formatschema>схема формата</a>.</p> <h2 id=protobuf>Protobuf<a class=headerlink href=#protobuf title="Permanent link">&para;</a></h2> <p>Protobuf - формат <a href=https://developers.google.com/protocol-buffers/ rel="external nofollow noreferrer">Protocol Buffers</a>.</p> <p>Формат нуждается во внешнем описании схемы. Схема кэшируется между запросами.<br> ClickHouse поддерживает как синтаксис <code>proto2</code>, так и <code>proto3</code>; все типы полей (repeated/optional/required) поддерживаются.</p> <p>Пример использования формата:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=k>table</span> <span class=n>FORMAT</span> <span class=n>Protobuf</span> <span class=n>SETTINGS</span> <span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;schemafile:MessageType&#39;</span>
</code></pre></div> <p>или</p> <div class=codehilite><pre><span></span><code>$ cat protobuf_messages.bin <span class=p>|</span> clickhouse-client --query <span class=s2>&quot;INSERT INTO test.table FORMAT Protobuf SETTINGS format_schema=&#39;schemafile:MessageType&#39;&quot;</span>
</code></pre></div> <p>Где файл <code>schemafile.proto</code> может выглядеть так:</p> <div class=codehilite><pre><span></span><code><span class=n>syntax</span> <span class=l>= &quot;proto3&quot;</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>string</span> <span class=n>name</span> <span class=l>= 1</span>;
  <span class=n>string</span> <span class=n>surname</span> <span class=l>= 2</span>;
  <span class=n>uint32</span> <span class=n>birthDate</span> <span class=l>= 3</span>;
  <span class=n>repeated</span> <span class=n>string</span> <span class=n>phoneNumbers</span> <span class=l>= 4</span>;
};
</code></pre></div> <p>Соответствие между столбцами таблицы и полями сообщения <code>Protocol Buffers</code> устанавливается по имени,<br> при этом игнорируется регистр букв и символы <code>_</code> (подчеркивание) и <code>.</code> (точка) считаются одинаковыми.<br> Если типы столбцов не соответствуют точно типам полей сообщения <code>Protocol Buffers</code>, производится необходимая конвертация.</p> <p>Вложенные сообщения поддерживаются, например, для поля <code>z</code> в таком сообщении</p> <div class=codehilite><pre><span></span><code><span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>message</span> <span class=n>XType</span> {
    <span class=n>message</span> <span class=n>YType</span> {
      <span class=n>int32</span> <span class=n>z</span>;
    };
    <span class=n>repeated</span> <span class=n>YType</span> <span class=n>y</span>;
  };
  <span class=n>XType</span> <span class=n>x</span>;
};
</code></pre></div> <p>ClickHouse попытается найти столбец с именем <code>x.y.z</code> (или <code>x_y_z</code>, или <code>X.y_Z</code> и т.п.).<br> Вложенные сообщения удобно использовать в качестве соответствия для <a href=../../sql_reference/data_types/nested_data_structures/nested/ >вложенной структуры данных</a>.</p> <p>Значения по умолчанию, определённые в схеме <code>proto2</code>, например,</p> <div class=codehilite><pre><span></span><code><span class=n>syntax</span> <span class=l>= &quot;proto2&quot;</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>optional</span> <span class=n>int32</span> <span class=n>result_per_page</span> <span class=l>= 3 [default = 10]</span>;
}
</code></pre></div> <p>не применяются; вместо них используются определенные в таблице <a href=../../sql_reference/statements/create/#create-default-values>значения по умолчанию</a>.</p> <p>ClickHouse пишет и читает сообщения <code>Protocol Buffers</code> в формате <code>length-delimited</code>. Это означает, что перед каждым сообщением пишется его длина<br> в формате <a href=https://developers.google.com/protocol-buffers/docs/encoding#varints rel="external nofollow noreferrer">varint</a>. См. также <a href=https://cwiki.apache.org/confluence/display/GEODE/Delimiting+Protobuf+Messages rel="external nofollow noreferrer">как читать и записывать сообщения Protocol Buffers в формате length-delimited в различных языках программирования</a>.</p> <h2 id=data-format-parquet>Parquet<a class=headerlink href=#data-format-parquet title="Permanent link">&para;</a></h2> <p><a href=http://parquet.apache.org/ rel="external nofollow noreferrer">Apache Parquet</a> — формат поколоночного хранения данных, который распространён в экосистеме Hadoop. Для формата <code>Parquet</code> ClickHouse поддерживает операции чтения и записи.</p> <h3 id=sootvetstvie-tipov-dannykh>Соответствие типов данных<a class=headerlink href=#sootvetstvie-tipov-dannykh title="Permanent link">&para;</a></h3> <p>Таблица ниже содержит поддерживаемые типы данных и их соответствие <a href=../../sql_reference/data_types/ >типам данных</a> ClickHouse для запросов <code>INSERT</code> и <code>SELECT</code>.</p> <table> <thead> <tr> <th>Тип данных Parquet (<code>INSERT</code>)</th> <th>Тип данных ClickHouse</th> <th>Тип данных Parquet (<code>SELECT</code>)</th> </tr> </thead> <tbody> <tr> <td><code>UINT8</code>, <code>BOOL</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt8</a></td> <td><code>UINT8</code></td> </tr> <tr> <td><code>INT8</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int8</a></td> <td><code>INT8</code></td> </tr> <tr> <td><code>UINT16</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt16</a></td> <td><code>UINT16</code></td> </tr> <tr> <td><code>INT16</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int16</a></td> <td><code>INT16</code></td> </tr> <tr> <td><code>UINT32</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt32</a></td> <td><code>UINT32</code></td> </tr> <tr> <td><code>INT32</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int32</a></td> <td><code>INT32</code></td> </tr> <tr> <td><code>UINT64</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt64</a></td> <td><code>UINT64</code></td> </tr> <tr> <td><code>INT64</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int64</a></td> <td><code>INT64</code></td> </tr> <tr> <td><code>FLOAT</code>, <code>HALF_FLOAT</code></td> <td><a href=../../sql_reference/data_types/float/ >Float32</a></td> <td><code>FLOAT</code></td> </tr> <tr> <td><code>DOUBLE</code></td> <td><a href=../../sql_reference/data_types/float/ >Float64</a></td> <td><code>DOUBLE</code></td> </tr> <tr> <td><code>DATE32</code></td> <td><a href=../../sql_reference/data_types/date/ >Date</a></td> <td><code>UINT16</code></td> </tr> <tr> <td><code>DATE64</code>, <code>TIMESTAMP</code></td> <td><a href=../../sql_reference/data_types/datetime/ >DateTime</a></td> <td><code>UINT32</code></td> </tr> <tr> <td><code>STRING</code>, <code>BINARY</code></td> <td><a href=../../sql_reference/data_types/string/ >String</a></td> <td><code>STRING</code></td> </tr> <tr> <td>—</td> <td><a href=../../sql_reference/data_types/fixedstring/ >FixedString</a></td> <td><code>STRING</code></td> </tr> <tr> <td><code>DECIMAL</code></td> <td><a href=../../sql_reference/data_types/decimal/ >Decimal</a></td> <td><code>DECIMAL</code></td> </tr> </tbody> </table> <p>ClickHouse поддерживает настраиваемую точность для формата <code>Decimal</code>. При обработке запроса <code>INSERT</code>, ClickHouse обрабатывает тип данных Parquet <code>DECIMAL</code> как <code>Decimal128</code>.</p> <p>Неподдержанные типы данных Parquet: <code>DATE32</code>, <code>TIME32</code>, <code>FIXED_SIZE_BINARY</code>, <code>JSON</code>, <code>UUID</code>, <code>ENUM</code>.</p> <p>Типы данных столбцов в ClickHouse могут отличаться от типов данных соответствующих полей файла в формате Parquet. При вставке данных, ClickHouse интерпретирует типы данных в соответствии с таблицей выше, а затем <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>приводит</a> данные к тому типу, который установлен для столбца таблицы.</p> <h3 id=vstavka-i-vyborka-dannykh>Вставка и выборка данных<a class=headerlink href=#vstavka-i-vyborka-dannykh title="Permanent link">&para;</a></h3> <p>Чтобы вставить в ClickHouse данные из файла в формате Parquet, выполните команду следующего вида:</p> <div class=codehilite><pre><span></span><code>$ cat <span class=o>{</span>filename<span class=o>}</span> <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>&quot;INSERT INTO {some_table} FORMAT Parquet&quot;</span>
</code></pre></div> <p>Чтобы получить данные из таблицы ClickHouse и сохранить их в файл формата Parquet, используйте команду следующего вида:</p> <div class=codehilite><pre><span></span><code>$ clickhouse-client --query<span class=o>=</span><span class=s2>&quot;SELECT * FROM {some_table} FORMAT Parquet&quot;</span> &gt; <span class=o>{</span>some_file.pq<span class=o>}</span>
</code></pre></div> <p>Для обмена данными с экосистемой Hadoop можно использовать движки таблиц <a href=../../engines/table_engines/integrations/hdfs/ >HDFS</a>.</p> <h2 id=data-format-orc>ORC<a class=headerlink href=#data-format-orc title="Permanent link">&para;</a></h2> <p><a href=https://orc.apache.org/ rel="external nofollow noreferrer">Apache ORC</a> - это column-oriented формат данных, распространённый в экосистеме Hadoop. Вы можете только вставлять данные этого формата в ClickHouse.</p> <h3 id=sootvetstvie-tipov-dannykh-1>Соответствие типов данных<a class=headerlink href=#sootvetstvie-tipov-dannykh-1 title="Permanent link">&para;</a></h3> <p>Таблица показывает поддержанные типы данных и их соответствие <a href=../../sql_reference/data_types/ >типам данных</a> ClickHouse для запросов <code>INSERT</code>.</p> <table> <thead> <tr> <th>Тип данных ORC (<code>INSERT</code>)</th> <th>Тип данных ClickHouse</th> </tr> </thead> <tbody> <tr> <td><code>UINT8</code>, <code>BOOL</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt8</a></td> </tr> <tr> <td><code>INT8</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int8</a></td> </tr> <tr> <td><code>UINT16</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt16</a></td> </tr> <tr> <td><code>INT16</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int16</a></td> </tr> <tr> <td><code>UINT32</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt32</a></td> </tr> <tr> <td><code>INT32</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int32</a></td> </tr> <tr> <td><code>UINT64</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt64</a></td> </tr> <tr> <td><code>INT64</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int64</a></td> </tr> <tr> <td><code>FLOAT</code>, <code>HALF_FLOAT</code></td> <td><a href=../../sql_reference/data_types/float/ >Float32</a></td> </tr> <tr> <td><code>DOUBLE</code></td> <td><a href=../../sql_reference/data_types/float/ >Float64</a></td> </tr> <tr> <td><code>DATE32</code></td> <td><a href=../../sql_reference/data_types/date/ >Date</a></td> </tr> <tr> <td><code>DATE64</code>, <code>TIMESTAMP</code></td> <td><a href=../../sql_reference/data_types/datetime/ >DateTime</a></td> </tr> <tr> <td><code>STRING</code>, <code>BINARY</code></td> <td><a href=../../sql_reference/data_types/string/ >String</a></td> </tr> <tr> <td><code>DECIMAL</code></td> <td><a href=../../sql_reference/data_types/decimal/ >Decimal</a></td> </tr> </tbody> </table> <p>ClickHouse поддерживает настраиваемую точность для формата <code>Decimal</code>. При обработке запроса <code>INSERT</code>, ClickHouse обрабатывает тип данных Parquet <code>DECIMAL</code> как <code>Decimal128</code>.</p> <p>Неподдержанные типы данных ORC: <code>DATE32</code>, <code>TIME32</code>, <code>FIXED_SIZE_BINARY</code>, <code>JSON</code>, <code>UUID</code>, <code>ENUM</code>.</p> <p>Типы данных столбцов в таблицах ClickHouse могут отличаться от типов данных для соответствующих полей ORC. При вставке данных, ClickHouse интерпретирует типы данных ORC согласно таблице соответствия, а затем <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>приводит</a> данные к типу, установленному для столбца таблицы ClickHouse.</p> <h3 id=vstavka-dannykh-1>Вставка данных<a class=headerlink href=#vstavka-dannykh-1 title="Permanent link">&para;</a></h3> <p>Данные ORC можно вставить в таблицу ClickHouse командой:</p> <div class=codehilite><pre><span></span><code>$ cat filename.orc <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>&quot;INSERT INTO some_table FORMAT ORC&quot;</span>
</code></pre></div> <p>Для обмена данных с Hadoop можно использовать <a href=../../engines/table_engines/integrations/hdfs/ >движок таблиц HDFS</a>.</p> <h2 id=formatschema>Схема формата<a class=headerlink href=#formatschema title="Permanent link">&para;</a></h2> <p>Имя файла со схемой записывается в настройке <code>format_schema</code>. При использовании форматов <code>Cap'n Proto</code> и <code>Protobuf</code> требуется указать схему.<br> Схема представляет собой имя файла и имя типа в этом файле, разделенные двоеточием, например <code>schemafile.proto:MessageType</code>.<br> Если файл имеет стандартное расширение для данного формата (например <code>.proto</code> для <code>Protobuf</code>),<br> то можно его не указывать и записывать схему так <code>schemafile:MessageType</code>.</p> <p>Если для ввода/вывода данных используется <a href=../cli/ >клиент</a> в <a href=../cli/#cli_usage>интерактивном режиме</a>, то при записи схемы можно использовать абсолютный путь или записывать путь<br> относительно текущей директории на клиенте. Если клиент используется в <a href=../cli/#cli_usage>batch режиме</a>, то в записи схемы допускается только относительный путь, из соображений безопасности.</p> <p>Если для ввода/вывода данных используется <a href=../http/ >HTTP-интерфейс</a>, то файл со схемой должен располагаться на сервере в каталоге,<br> указанном в параметре <a href=../../operations/server_configuration_parameters/settings/#server_configuration_parameters-format_schema_path>format_schema_path</a> конфигурации сервера.</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Собрано из <a href=https://github.com/ClickHouse/ClickHouse/commit/c1558f8c18e2727c5991cf923ee79710de89d1d0 rel="external nofollow noreferrer" target=_blank class=text-reset>c1558f8c18</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Cодержание</label> <a href=#tabseparated title=TabSeparated class="nav-link text-wrap d-inline-block w-100"> TabSeparated </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#formatirovanie-dannykh title="Форматирование данных" class="nav-link text-wrap d-inline-block w-100"> Форматирование данных </a> </nav> <a href=#tabseparatedraw title=TabSeparatedRaw class="nav-link text-wrap d-inline-block w-100"> TabSeparatedRaw </a> <a href=#tabseparatedwithnames title=TabSeparatedWithNames class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNames </a> <a href=#tabseparatedwithnamesandtypes title=TabSeparatedWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNamesAndTypes </a> <a href=#format-template title=Template class="nav-link text-wrap d-inline-block w-100"> Template </a> <a href=#templateignorespaces title=TemplateIgnoreSpaces class="nav-link text-wrap d-inline-block w-100"> TemplateIgnoreSpaces </a> <a href=#tskv title=TSKV class="nav-link text-wrap d-inline-block w-100"> TSKV </a> <a href=#csv title=CSV class="nav-link text-wrap d-inline-block w-100"> CSV </a> <a href=#csvwithnames title=CSVWithNames class="nav-link text-wrap d-inline-block w-100"> CSVWithNames </a> <a href=#format-customseparated title=CustomSeparated class="nav-link text-wrap d-inline-block w-100"> CustomSeparated </a> <a href=#json title=JSON class="nav-link text-wrap d-inline-block w-100"> JSON </a> <a href=#jsoncompact title=JSONCompact class="nav-link text-wrap d-inline-block w-100"> JSONCompact </a> <a href=#jsoneachrow title=JSONEachRow class="nav-link text-wrap d-inline-block w-100"> JSONEachRow </a> <nav id=toc-toc-13 class="nav flex-column pl-2"> <a href=#vstavka-dannykh title="Вставка данных" class="nav-link text-wrap d-inline-block w-100"> Вставка данных </a> <a href=#vyborka-dannykh title="Выборка данных" class="nav-link text-wrap d-inline-block w-100"> Выборка данных </a> <a href=#jsoneachrow-nested title="Использование вложенных структур" class="nav-link text-wrap d-inline-block w-100"> Использование вложенных структур </a> </nav> <a href=#native title=Native class="nav-link text-wrap d-inline-block w-100"> Native </a> <a href=#null title=Null class="nav-link text-wrap d-inline-block w-100"> Null </a> <a href=#pretty title=Pretty class="nav-link text-wrap d-inline-block w-100"> Pretty </a> <a href=#prettycompact title=PrettyCompact class="nav-link text-wrap d-inline-block w-100"> PrettyCompact </a> <a href=#prettycompactmonoblock title=PrettyCompactMonoBlock class="nav-link text-wrap d-inline-block w-100"> PrettyCompactMonoBlock </a> <a href=#prettynoescapes title=PrettyNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyNoEscapes </a> <nav id=toc-toc-19 class="nav flex-column pl-2"> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyCompactNoEscapes </a> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettySpaceNoEscapes </a> </nav> <a href=#prettyspace title=PrettySpace class="nav-link text-wrap d-inline-block w-100"> PrettySpace </a> <a href=#rowbinary title=RowBinary class="nav-link text-wrap d-inline-block w-100"> RowBinary </a> <a href=#rowbinarywithnamesandtypes title=RowBinaryWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> RowBinaryWithNamesAndTypes </a> <a href=#data-format-values title=Values class="nav-link text-wrap d-inline-block w-100"> Values </a> <a href=#vertical title=Vertical class="nav-link text-wrap d-inline-block w-100"> Vertical </a> <a href=#xml title=XML class="nav-link text-wrap d-inline-block w-100"> XML </a> <a href=#capnproto title=CapnProto class="nav-link text-wrap d-inline-block w-100"> CapnProto </a> <a href=#protobuf title=Protobuf class="nav-link text-wrap d-inline-block w-100"> Protobuf </a> <a href=#data-format-parquet title=Parquet class="nav-link text-wrap d-inline-block w-100"> Parquet </a> <nav id=toc-toc-28 class="nav flex-column pl-2"> <a href=#sootvetstvie-tipov-dannykh title="Соответствие типов данных" class="nav-link text-wrap d-inline-block w-100"> Соответствие типов данных </a> <a href=#vstavka-i-vyborka-dannykh title="Вставка и выборка данных" class="nav-link text-wrap d-inline-block w-100"> Вставка и выборка данных </a> </nav> <a href=#data-format-orc title=ORC class="nav-link text-wrap d-inline-block w-100"> ORC </a> <nav id=toc-toc-29 class="nav flex-column pl-2"> <a href=#sootvetstvie-tipov-dannykh-1 title="Соответствие типов данных" class="nav-link text-wrap d-inline-block w-100"> Соответствие типов данных </a> <a href=#vstavka-dannykh-1 title="Вставка данных" class="nav-link text-wrap d-inline-block w-100"> Вставка данных </a> </nav> <a href=#formatschema title="Схема формата" class="nav-link text-wrap d-inline-block w-100"> Схема формата </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
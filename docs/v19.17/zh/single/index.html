<!DOCTYPE html><html lang=zh data-version=v19.17 data-single-page=true> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>ClickHouse文档 v19.17 - ClickHouse文档 v19.17</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="ClickHouse文档 v19.17 - ClickHouse文档 v19.17"><meta property=og:description content=ClickHouse是一个开源的面向列的数据库管理系统，允许使用SQL查询实时生成分析数据报告。><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="ClickHouse文档 v19.17 - ClickHouse文档 v19.17"><meta name=description content="ClickHouse is an open source distributed column-oriented database management system that allows generating analytical data reports in real time using SQL queries. Сreated by Yandex ClickHouse manages extremely large volumes of data in a stable and sustainable manner."><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> ClickHouse文档 v19.17 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/tree/master/docs title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/zh.svg alt=中文 title=中文 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v19.17/en/single/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v19.17/zh/single/ class="dropdown-item disabled"> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v19.17/es/single/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v19.17/fr/single/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v19.17/ru/single/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v19.17/ja/single/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v19.17/fa/single/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=多页或单页> <a href=.. role=button class="btn btn-dark-alt active" aria-pressed=false> <img src=/images/mkdocs/multi.svg alt=多页版本 title=多页版本> </a> <a href=../single/ role=button class="btn btn-dark active" aria-pressed=false> <img src=/images/mkdocs/single.svg alt=单页版本 title=单页版本> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> 版本: <span class=text-light>v19.17</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/zh/ class=dropdown-item> <span class=text-light>最新消息</span> </a> <a href=/docs/v20.3/zh/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/zh/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/zh/ class="dropdown-item disable">v19.17</a> <a href=/docs/v19.16/zh/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/zh/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/zh/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/zh/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/zh/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/zh/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/zh/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/zh/ class=dropdown-item>v19.8</a> </div> </div> <div id=toc class="toc-left mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>目录</label> <a href=#shi-yao-shi-clickhouse title=什么是ClickHouse？ class="nav-link text-wrap d-inline-block w-100"> 什么是ClickHouse？ </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#olapchang-jing-de-guan-jian-te-zheng title=OLAP场景的关键特征 class="nav-link text-wrap d-inline-block w-100"> OLAP场景的关键特征 </a> <a href=#lie-shi-shu-ju-ku-geng-gua-he-olapchang-jing-de-yuan-yin title=列式数据库更适合OLAP场景的原因 class="nav-link text-wrap d-inline-block w-100"> 列式数据库更适合OLAP场景的原因 </a> <nav id=toc-toc-1-2 class="nav flex-column pl-2"> <a href=#input-output title=Input/output class="nav-link text-wrap d-inline-block w-100"> Input/output </a> <a href=#cpu title=CPU class="nav-link text-wrap d-inline-block w-100"> CPU </a> </nav> </nav> <a href=#clickhousede-du-te-gong-neng title=ClickHouse的独特功能 class="nav-link text-wrap d-inline-block w-100"> ClickHouse的独特功能 </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#zhen-zheng-de-lie-shi-shu-ju-ku-guan-li-xi-tong title=真正的列式数据库管理系统 class="nav-link text-wrap d-inline-block w-100"> 真正的列式数据库管理系统 </a> <a href=#shu-ju-ya-suo title=数据压缩 class="nav-link text-wrap d-inline-block w-100"> 数据压缩 </a> <a href=#shu-ju-de-ci-pan-cun-chu title=数据的磁盘存储 class="nav-link text-wrap d-inline-block w-100"> 数据的磁盘存储 </a> <a href=#duo-he-xin-bing-xing-chu-li title=多核心并行处理 class="nav-link text-wrap d-inline-block w-100"> 多核心并行处理 </a> <a href=#duo-fu-wu-qi-fen-bu-shi-chu-li title=多服务器分布式处理 class="nav-link text-wrap d-inline-block w-100"> 多服务器分布式处理 </a> <a href=#zhi-chi-sql title=支持SQL class="nav-link text-wrap d-inline-block w-100"> 支持SQL </a> <a href=#xiang-liang-yin-qing title=向量引擎 class="nav-link text-wrap d-inline-block w-100"> 向量引擎 </a> <a href=#shi-shi-de-shu-ju-geng-xin title=实时的数据更新 class="nav-link text-wrap d-inline-block w-100"> 实时的数据更新 </a> <a href=#suo-yin title=索引 class="nav-link text-wrap d-inline-block w-100"> 索引 </a> <a href=#gua-he-zai-xian-cha-xun title=适合在线查询 class="nav-link text-wrap d-inline-block w-100"> 适合在线查询 </a> <a href=#zhi-chi-jin-si-ji-suan title=支持近似计算 class="nav-link text-wrap d-inline-block w-100"> 支持近似计算 </a> <a href=#zhi-chi-shu-ju-fu-zhi-he-shu-ju-wan-zheng-xing title=支持数据复制和数据完整性 class="nav-link text-wrap d-inline-block w-100"> 支持数据复制和数据完整性 </a> </nav> <a href=#clickhouseke-yi-kao-lu-que-dian-de-gong-neng title=ClickHouse可以考虑缺点的功能 class="nav-link text-wrap d-inline-block w-100"> ClickHouse可以考虑缺点的功能 </a> <a href=#performance title=Performance class="nav-link text-wrap d-inline-block w-100"> Performance </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#dan-ge-da-cha-xun-de-tun-tu-liang title=单个大查询的吞吐量 class="nav-link text-wrap d-inline-block w-100"> 单个大查询的吞吐量 </a> <a href=#chu-li-duan-cha-xun-de-yan-chi-shi-jian title=处理短查询的延迟时间 class="nav-link text-wrap d-inline-block w-100"> 处理短查询的延迟时间 </a> <a href=#chu-li-da-liang-duan-cha-xun-de-tun-tu-liang title=处理大量短查询的吞吐量 class="nav-link text-wrap d-inline-block w-100"> 处理大量短查询的吞吐量 </a> <a href=#shu-ju-de-xie-ru-xing-neng title=数据的写入性能 class="nav-link text-wrap d-inline-block w-100"> 数据的写入性能 </a> </nav> <a href=#yandex-metricade-shi-yong-an-li title=Yandex.Metrica的使用案例 class="nav-link text-wrap d-inline-block w-100"> Yandex.Metrica的使用案例 </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#yandex-metricayi-ji-qi-ta-yandexfu-wu-de-shi-yong-an-li title=Yandex.Metrica以及其他Yandex服务的使用案例 class="nav-link text-wrap d-inline-block w-100"> Yandex.Metrica以及其他Yandex服务的使用案例 </a> <a href=#ju-he-yu-fei-ju-he-shu-ju title=聚合与非聚合数据 class="nav-link text-wrap d-inline-block w-100"> 聚合与非聚合数据 </a> </nav> <a href=#ru-men-zhi-nan title=入门指南 class="nav-link text-wrap d-inline-block w-100"> 入门指南 </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#xi-tong-yao-qiu title=系统要求 class="nav-link text-wrap d-inline-block w-100"> 系统要求 </a> <a href=#an-zhuang title=安装 class="nav-link text-wrap d-inline-block w-100"> 安装 </a> <nav id=toc-toc-6-2 class="nav flex-column pl-2"> <a href=#wei-debian-ubuntuan-zhuang title=为Debian/Ubuntu安装 class="nav-link text-wrap d-inline-block w-100"> 为Debian/Ubuntu安装 </a> <a href=#wei-centos-redhatan-zhuang title=为CentOS/RedHat安装 class="nav-link text-wrap d-inline-block w-100"> 为CentOS/RedHat安装 </a> <a href=#shi-yong-dockeran-zhuang title=使用Docker安装 class="nav-link text-wrap d-inline-block w-100"> 使用Docker安装 </a> <a href=#shi-yong-yuan-ma-an-zhuang title=使用源码安装 class="nav-link text-wrap d-inline-block w-100"> 使用源码安装 </a> </nav> <a href=#qi-dong title=启动 class="nav-link text-wrap d-inline-block w-100"> 启动 </a> </nav> <a href=#hang-ban-fei-xing-shu-ju title=航班飞行数据 class="nav-link text-wrap d-inline-block w-100"> 航班飞行数据 </a> <nav id=toc-toc-7 class="nav flex-column pl-2"> <a href=#cong-yuan-shi-shu-ju-dao-ru title=从原始数据导入 class="nav-link text-wrap d-inline-block w-100"> 从原始数据导入 </a> <a href=#xia-zai-yu-chu-li-hao-de-fen-qu-shu-ju title=下载预处理好的分区数据 class="nav-link text-wrap d-inline-block w-100"> 下载预处理好的分区数据 </a> <a href=#cha-xun title=查询： class="nav-link text-wrap d-inline-block w-100"> 查询： </a> </nav> <a href=#niu-yue-shi-chu-zu-che-shu-ju title=纽约市出租车数据 class="nav-link text-wrap d-inline-block w-100"> 纽约市出租车数据 </a> <nav id=toc-toc-8 class="nav flex-column pl-2"> <a href=#zen-yang-dao-ru-yuan-shi-shu-ju title=怎样导入原始数据 class="nav-link text-wrap d-inline-block w-100"> 怎样导入原始数据 </a> <a href=#xia-zai-yu-chu-li-hao-de-fen-qu-shu-ju_1 title=下载预处理好的分区数据 class="nav-link text-wrap d-inline-block w-100"> 下载预处理好的分区数据 </a> <a href=#dan-tai-fu-wu-qi-yun-xing-jie-guo title=单台服务器运行结果 class="nav-link text-wrap d-inline-block w-100"> 单台服务器运行结果 </a> <a href=#zong-jie title=总结 class="nav-link text-wrap d-inline-block w-100"> 总结 </a> </nav> <a href=#amplab-da-shu-ju-ji-zhun-ce-shi title="AMPLab 大数据基准测试" class="nav-link text-wrap d-inline-block w-100"> AMPLab 大数据基准测试 </a> <a href=#wei-ji-fang-wen-shu-ju title=维基访问数据 class="nav-link text-wrap d-inline-block w-100"> 维基访问数据 </a> <a href=#criteo-tbji-bie-dian-ji-ri-zhi title="Criteo TB级别点击日志" class="nav-link text-wrap d-inline-block w-100"> Criteo TB级别点击日志 </a> <a href=#star-schema-benchmark title="Star Schema Benchmark" class="nav-link text-wrap d-inline-block w-100"> Star Schema Benchmark </a> <a href=#interfaces title=客户端 class="nav-link text-wrap d-inline-block w-100"> 客户端 </a> <a href=#ming-ling-xing-ke-hu-duan title=命令行客户端 class="nav-link text-wrap d-inline-block w-100"> 命令行客户端 </a> <nav id=toc-toc-14 class="nav flex-column pl-2"> <a href=#shi-yong-fang-shi title=使用方式 class="nav-link text-wrap d-inline-block w-100"> 使用方式 </a> <a href=#interfaces_cli_configuration title=配置 class="nav-link text-wrap d-inline-block w-100"> 配置 </a> <nav id=toc-toc-14-2 class="nav flex-column pl-2"> <a href=#ming-ling-xing-can-shu title=命令行参数 class="nav-link text-wrap d-inline-block w-100"> 命令行参数 </a> <a href=#pei-zhi-wen-jian title=配置文件 class="nav-link text-wrap d-inline-block w-100"> 配置文件 </a> </nav> </nav> <a href=#yuan-sheng-ke-hu-duan-jie-kou-tcp title=原生客户端接口（TCP） class="nav-link text-wrap d-inline-block w-100"> 原生客户端接口（TCP） </a> <a href=#http-ke-hu-duan title="HTTP 客户端" class="nav-link text-wrap d-inline-block w-100"> HTTP 客户端 </a> <nav id=toc-toc-16 class="nav flex-column pl-2"> <a href=#xiang-ying-huan-chong title=响应缓冲 class="nav-link text-wrap d-inline-block w-100"> 响应缓冲 </a> </nav> <a href=#formats title=输入输出格式 class="nav-link text-wrap d-inline-block w-100"> 输入输出格式 </a> <nav id=toc-toc-17 class="nav flex-column pl-2"> <a href=#tabseparated title=TabSeparated class="nav-link text-wrap d-inline-block w-100"> TabSeparated </a> <nav id=toc-toc-17-1 class="nav flex-column pl-2"> <a href=#shu-ju-jie-xi-fang-shi title=数据解析方式 class="nav-link text-wrap d-inline-block w-100"> 数据解析方式 </a> </nav> <a href=#tabseparatedraw title=TabSeparatedRaw class="nav-link text-wrap d-inline-block w-100"> TabSeparatedRaw </a> <a href=#tabseparatedwithnames title=TabSeparatedWithNames class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNames </a> <a href=#tabseparatedwithnamesandtypes title=TabSeparatedWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNamesAndTypes </a> <a href=#format-template title=Template class="nav-link text-wrap d-inline-block w-100"> Template </a> <a href=#templateignorespaces title=TemplateIgnoreSpaces class="nav-link text-wrap d-inline-block w-100"> TemplateIgnoreSpaces </a> <a href=#tskv title=TSKV class="nav-link text-wrap d-inline-block w-100"> TSKV </a> <a href=#csv title=CSV class="nav-link text-wrap d-inline-block w-100"> CSV </a> <a href=#csvwithnames title=CSVWithNames class="nav-link text-wrap d-inline-block w-100"> CSVWithNames </a> <a href=#json title=JSON class="nav-link text-wrap d-inline-block w-100"> JSON </a> <a href=#jsoncompact title=JSONCompact class="nav-link text-wrap d-inline-block w-100"> JSONCompact </a> <a href=#jsoneachrow title=JSONEachRow class="nav-link text-wrap d-inline-block w-100"> JSONEachRow </a> <nav id=toc-toc-17-12 class="nav flex-column pl-2"> <a href=#jsoneachrow-nested title="Usage of Nested Structures" class="nav-link text-wrap d-inline-block w-100"> Usage of Nested Structures </a> </nav> <a href=#native title=Native class="nav-link text-wrap d-inline-block w-100"> Native </a> <a href=#null title=Null class="nav-link text-wrap d-inline-block w-100"> Null </a> <a href=#pretty title=Pretty class="nav-link text-wrap d-inline-block w-100"> Pretty </a> <a href=#prettycompact title=PrettyCompact class="nav-link text-wrap d-inline-block w-100"> PrettyCompact </a> <a href=#prettycompactmonoblock title=PrettyCompactMonoBlock class="nav-link text-wrap d-inline-block w-100"> PrettyCompactMonoBlock </a> <a href=#prettynoescapes title=PrettyNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyNoEscapes </a> <nav id=toc-toc-17-18 class="nav flex-column pl-2"> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyCompactNoEscapes </a> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettySpaceNoEscapes </a> </nav> <a href=#prettyspace title=PrettySpace class="nav-link text-wrap d-inline-block w-100"> PrettySpace </a> <a href=#rowbinary title=RowBinary class="nav-link text-wrap d-inline-block w-100"> RowBinary </a> <a href=#data-format-values title=Values class="nav-link text-wrap d-inline-block w-100"> Values </a> <a href=#vertical title=Vertical class="nav-link text-wrap d-inline-block w-100"> Vertical </a> <a href=#verticalraw title=VerticalRaw class="nav-link text-wrap d-inline-block w-100"> VerticalRaw </a> <a href=#xml title=XML class="nav-link text-wrap d-inline-block w-100"> XML </a> <a href=#capnproto title=CapnProto class="nav-link text-wrap d-inline-block w-100"> CapnProto </a> </nav> <a href=#jdbc-qu-dong title="JDBC 驱动" class="nav-link text-wrap d-inline-block w-100"> JDBC 驱动 </a> <a href=#odbc-qu-dong title="ODBC 驱动" class="nav-link text-wrap d-inline-block w-100"> ODBC 驱动 </a> <a href=#c-ke-hu-duan-ku title="C ++客户端库" class="nav-link text-wrap d-inline-block w-100"> C ++客户端库 </a> <a href=#di-san-fang-kai-fa-de-ku title=第三方开发的库 class="nav-link text-wrap d-inline-block w-100"> 第三方开发的库 </a> <a href=#di-san-fang-ji-cheng-ku title=第三方集成库 class="nav-link text-wrap d-inline-block w-100"> 第三方集成库 </a> <nav id=toc-toc-22 class="nav flex-column pl-2"> <a href=#ji-jian-chan-pin title=基建产品 class="nav-link text-wrap d-inline-block w-100"> 基建产品 </a> <a href=#bian-cheng-yu-yan-sheng-tai-xi-tong title=编程语言生态系统 class="nav-link text-wrap d-inline-block w-100"> 编程语言生态系统 </a> </nav> <a href=#di-san-fang-kai-fa-de-ke-shi-hua-jie-mian title=第三方开发的可视化界面 class="nav-link text-wrap d-inline-block w-100"> 第三方开发的可视化界面 </a> <nav id=toc-toc-23 class="nav flex-column pl-2"> <a href=#kai-yuan title=开源 class="nav-link text-wrap d-inline-block w-100"> 开源 </a> <nav id=toc-toc-23-1 class="nav flex-column pl-2"> <a href=#tabix title=Tabix class="nav-link text-wrap d-inline-block w-100"> Tabix </a> <a href=#houseops title=HouseOps class="nav-link text-wrap d-inline-block w-100"> HouseOps </a> <a href=#lighthouse title=LightHouse class="nav-link text-wrap d-inline-block w-100"> LightHouse </a> <a href=#dbeaver title=DBeaver class="nav-link text-wrap d-inline-block w-100"> DBeaver </a> <a href=#clickhouse-cli title=clickhouse-cli class="nav-link text-wrap d-inline-block w-100"> clickhouse-cli </a> <a href=#clickhouse-flamegraph title=clickhouse-flamegraph class="nav-link text-wrap d-inline-block w-100"> clickhouse-flamegraph </a> </nav> <a href=#shang-ye title=商业 class="nav-link text-wrap d-inline-block w-100"> 商业 </a> <nav id=toc-toc-23-2 class="nav flex-column pl-2"> <a href=#datagrip title=DataGrip class="nav-link text-wrap d-inline-block w-100"> DataGrip </a> </nav> </nav> <a href=#lai-zi-di-san-fang-kai-fa-ren-yuan-de-dai-li-fu-wu-qi title=来自第三方开发人员的代理服务器 class="nav-link text-wrap d-inline-block w-100"> 来自第三方开发人员的代理服务器 </a> <nav id=toc-toc-24 class="nav flex-column pl-2"> <a href=#kittenhouse title=KittenHouse class="nav-link text-wrap d-inline-block w-100"> KittenHouse </a> <a href=#clickhouse-bulk title=ClickHouse-Bulk class="nav-link text-wrap d-inline-block w-100"> ClickHouse-Bulk </a> </nav> <a href=#data_types title=数据类型 class="nav-link text-wrap d-inline-block w-100"> 数据类型 </a> <a href=#uint8-uint16-uint32-uint64-int8-int16-int32-int64 title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-wrap d-inline-block w-100"> UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64 </a> <nav id=toc-toc-26 class="nav flex-column pl-2"> <a href=#zheng-xing-fan-wei title=整型范围 class="nav-link text-wrap d-inline-block w-100"> 整型范围 </a> <a href=#wu-fu-hao-zheng-xing-fan-wei title=无符号整型范围 class="nav-link text-wrap d-inline-block w-100"> 无符号整型范围 </a> </nav> <a href=#float32-float64 title="Float32, Float64" class="nav-link text-wrap d-inline-block w-100"> Float32, Float64 </a> <nav id=toc-toc-27 class="nav flex-column pl-2"> <a href=#shi-yong-fu-dian-shu title=使用浮点数 class="nav-link text-wrap d-inline-block w-100"> 使用浮点数 </a> <a href=#data_type-float-nan-inf title="NaN and Inf" class="nav-link text-wrap d-inline-block w-100"> NaN and Inf </a> </nav> <a href=#decimal-p-s-decimal32-s-decimal64-s-decimal128-s title="Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)" class="nav-link text-wrap d-inline-block w-100"> Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S) </a> <nav id=toc-toc-28 class="nav flex-column pl-2"> <a href=#can-shu title=参数 class="nav-link text-wrap d-inline-block w-100"> 参数 </a> <a href=#shi-jin-zhi-zhi-fan-wei title=十进制值范围 class="nav-link text-wrap d-inline-block w-100"> 十进制值范围 </a> <a href=#nei-bu-biao-shi-fang-shi title=内部表示方式 class="nav-link text-wrap d-inline-block w-100"> 内部表示方式 </a> <a href=#yun-suan-he-jie-guo-lei-xing title=运算和结果类型 class="nav-link text-wrap d-inline-block w-100"> 运算和结果类型 </a> <a href=#yi-chu-jian-cha title=溢出检查 class="nav-link text-wrap d-inline-block w-100"> 溢出检查 </a> </nav> <a href=#boolean-values title="Boolean Values" class="nav-link text-wrap d-inline-block w-100"> Boolean Values </a> <a href=#string title=String class="nav-link text-wrap d-inline-block w-100"> String </a> <nav id=toc-toc-30 class="nav flex-column pl-2"> <a href=#bian-ma title=编码 class="nav-link text-wrap d-inline-block w-100"> 编码 </a> </nav> <a href=#fixedstring title=FixedString class="nav-link text-wrap d-inline-block w-100"> FixedString </a> <a href=#uuid-data-type title=UUID class="nav-link text-wrap d-inline-block w-100"> UUID </a> <nav id=toc-toc-32 class="nav flex-column pl-2"> <a href=#how-to-generate title="How to generate" class="nav-link text-wrap d-inline-block w-100"> How to generate </a> <a href=#usage-example title="Usage example" class="nav-link text-wrap d-inline-block w-100"> Usage example </a> <a href=#restrictions title=Restrictions class="nav-link text-wrap d-inline-block w-100"> Restrictions </a> </nav> <a href=#date title=Date class="nav-link text-wrap d-inline-block w-100"> Date </a> <a href=#data_type-datetime title=DateTime class="nav-link text-wrap d-inline-block w-100"> DateTime </a> <nav id=toc-toc-34 class="nav flex-column pl-2"> <a href=#shi-qu title=时区 class="nav-link text-wrap d-inline-block w-100"> 时区 </a> </nav> <a href=#enum8-enum16 title="Enum8, Enum16" class="nav-link text-wrap d-inline-block w-100"> Enum8, Enum16 </a> <nav id=toc-toc-35 class="nav flex-column pl-2"> <a href=#yong-fa-shi-li title=用法示例 class="nav-link text-wrap d-inline-block w-100"> 用法示例 </a> <a href=#gui-ze-ji-yong-fa title=规则及用法 class="nav-link text-wrap d-inline-block w-100"> 规则及用法 </a> </nav> <a href=#data_type-array title=Array(T) class="nav-link text-wrap d-inline-block w-100"> Array(T) </a> <nav id=toc-toc-36 class="nav flex-column pl-2"> <a href=#chuang-jian-shu-zu title=创建数组 class="nav-link text-wrap d-inline-block w-100"> 创建数组 </a> <a href=#shi-yong-shu-ju-lei-xing title=使用数据类型 class="nav-link text-wrap d-inline-block w-100"> 使用数据类型 </a> </nav> <a href=#data_type-aggregatefunction title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-wrap d-inline-block w-100"> AggregateFunction(name, types_of_arguments...) </a> <nav id=toc-toc-37 class="nav flex-column pl-2"> <a href=#shi-yong-zhi-nan title=使用指南 class="nav-link text-wrap d-inline-block w-100"> 使用指南 </a> <nav id=toc-toc-37-1 class="nav flex-column pl-2"> <a href=#shu-ju-xie-ru title=数据写入 class="nav-link text-wrap d-inline-block w-100"> 数据写入 </a> <a href=#shu-ju-cha-xun title=数据查询 class="nav-link text-wrap d-inline-block w-100"> 数据查询 </a> </nav> <a href=#shi-yong-shi-li title=使用示例 class="nav-link text-wrap d-inline-block w-100"> 使用示例 </a> </nav> <a href=#tuple-t1-t2 title="Tuple(T1, T2, ...)" class="nav-link text-wrap d-inline-block w-100"> Tuple(T1, T2, ...) </a> <nav id=toc-toc-38 class="nav flex-column pl-2"> <a href=#chuang-jian-yuan-zu title=创建元组 class="nav-link text-wrap d-inline-block w-100"> 创建元组 </a> <a href=#yuan-zu-zhong-de-shu-ju-lei-xing title=元组中的数据类型 class="nav-link text-wrap d-inline-block w-100"> 元组中的数据类型 </a> </nav> <a href=#data_type-nullable title=Nullable(TypeName) class="nav-link text-wrap d-inline-block w-100"> Nullable(TypeName) </a> <nav id=toc-toc-39 class="nav flex-column pl-2"> <a href=#cun-chu-te-xing title=存储特性 class="nav-link text-wrap d-inline-block w-100"> 存储特性 </a> <a href=#yong-fa-shi-li_1 title=用法示例 class="nav-link text-wrap d-inline-block w-100"> 用法示例 </a> </nav> <a href=#qian-tao-shu-ju-jie-gou title=嵌套数据结构 class="nav-link text-wrap d-inline-block w-100"> 嵌套数据结构 </a> <a href=#nested-name1-type1-name2-type2 title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-wrap d-inline-block w-100"> Nested(Name1 Type1, Name2 Type2, ...) </a> <a href=#special-data-types title="Special Data Types" class="nav-link text-wrap d-inline-block w-100"> Special Data Types </a> <a href=#expression title=Expression class="nav-link text-wrap d-inline-block w-100"> Expression </a> <a href=#set title=Set class="nav-link text-wrap d-inline-block w-100"> Set </a> <a href=#nothing title=Nothing class="nav-link text-wrap d-inline-block w-100"> Nothing </a> <a href=#data-type-interval title=Interval class="nav-link text-wrap d-inline-block w-100"> Interval </a> <nav id=toc-toc-46 class="nav flex-column pl-2"> <a href=#data-type-interval-usage-remarks title="Usage Remarks" class="nav-link text-wrap d-inline-block w-100"> Usage Remarks </a> <a href=#see-also title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#domains title=Domains class="nav-link text-wrap d-inline-block w-100"> Domains </a> <nav id=toc-toc-47 class="nav flex-column pl-2"> <a href=#domainsde-e-wai-te-xing title=Domains的额外特性 class="nav-link text-wrap d-inline-block w-100"> Domains的额外特性 </a> <a href=#domainslei-xing-de-xian-zhi title=Domains类型的限制 class="nav-link text-wrap d-inline-block w-100"> Domains类型的限制 </a> <a href=#ipv4 title=IPv4 class="nav-link text-wrap d-inline-block w-100"> IPv4 </a> <nav id=toc-toc-47-3 class="nav flex-column pl-2"> <a href=#ji-ben-shi-yong title=基本使用 class="nav-link text-wrap d-inline-block w-100"> 基本使用 </a> </nav> <a href=#ipv6 title=IPv6 class="nav-link text-wrap d-inline-block w-100"> IPv6 </a> <nav id=toc-toc-47-4 class="nav flex-column pl-2"> <a href=#ji-ben-yong-fa title=基本用法 class="nav-link text-wrap d-inline-block w-100"> 基本用法 </a> </nav> </nav> <a href=#shu-ju-ku-yin-qing title=数据库引擎 class="nav-link text-wrap d-inline-block w-100"> 数据库引擎 </a> <a href=#mysql title=MySQL class="nav-link text-wrap d-inline-block w-100"> MySQL </a> <nav id=toc-toc-49 class="nav flex-column pl-2"> <a href=#create-database title="CREATE DATABASE" class="nav-link text-wrap d-inline-block w-100"> CREATE DATABASE </a> <a href=#zhi-chi-de-lei-xing-dui-ying title=支持的类型对应 class="nav-link text-wrap d-inline-block w-100"> 支持的类型对应 </a> </nav> <a href=#biao-yin-qing title=表引擎 class="nav-link text-wrap d-inline-block w-100"> 表引擎 </a> <a href=#yin-qing-lei-xing title=引擎类型 class="nav-link text-wrap d-inline-block w-100"> 引擎类型 </a> <nav id=toc-toc-51 class="nav flex-column pl-2"> <a href=#mergetree title=MergeTree class="nav-link text-wrap d-inline-block w-100"> MergeTree </a> <a href=#log title=Log class="nav-link text-wrap d-inline-block w-100"> Log </a> <a href=#intergation-engines title="Intergation engines" class="nav-link text-wrap d-inline-block w-100"> Intergation engines </a> <a href=#yong-yu-qi-ta-te-ding-gong-neng-de-yin-qing title=用于其他特定功能的引擎 class="nav-link text-wrap d-inline-block w-100"> 用于其他特定功能的引擎 </a> </nav> <a href=#xu-ni-lie title=虚拟列 class="nav-link text-wrap d-inline-block w-100"> 虚拟列 </a> <a href=#table_engines-mergetree title=MergeTree class="nav-link text-wrap d-inline-block w-100"> MergeTree </a> <nav id=toc-toc-53 class="nav flex-column pl-2"> <a href=#table_engine-mergetree-creating-a-table title=建表 class="nav-link text-wrap d-inline-block w-100"> 建表 </a> <a href=#shu-ju-cun-chu title=数据存储 class="nav-link text-wrap d-inline-block w-100"> 数据存储 </a> <a href=#primary-keys-and-indexes-in-queries title=主键和索引在查询中的表现 class="nav-link text-wrap d-inline-block w-100"> 主键和索引在查询中的表现 </a> <nav id=toc-toc-53-3 class="nav flex-column pl-2"> <a href=#zhu-jian-de-xuan-ze title=主键的选择 class="nav-link text-wrap d-inline-block w-100"> 主键的选择 </a> <a href=#xuan-ze-gen-pai-xu-jian-bu-yi-yang-zhu-jian title=选择跟排序键不一样主键 class="nav-link text-wrap d-inline-block w-100"> 选择跟排序键不一样主键 </a> <a href=#suo-yin-he-fen-qu-zai-cha-xun-zhong-de-ying-yong title=索引和分区在查询中的应用 class="nav-link text-wrap d-inline-block w-100"> 索引和分区在查询中的应用 </a> <a href=#tiao-shu-suo-yin-fen-duan-hui-zong-suo-yin-shi-yan-xing-de title=跳数索引（分段汇总索引，实验性的） class="nav-link text-wrap d-inline-block w-100"> 跳数索引（分段汇总索引，实验性的） </a> <nav id=toc-toc-53-3-4 class="nav flex-column pl-2"> <a href=#suo-yin-de-ke-yong-lei-xing title=索引的可用类型 class="nav-link text-wrap d-inline-block w-100"> 索引的可用类型 </a> </nav> </nav> <a href=#bing-fa-shu-ju-fang-wen title=并发数据访问 class="nav-link text-wrap d-inline-block w-100"> 并发数据访问 </a> </nav> <a href=#table_engines-replication title=数据副本 class="nav-link text-wrap d-inline-block w-100"> 数据副本 </a> <nav id=toc-toc-54 class="nav flex-column pl-2"> <a href=#creating-replicated-tables title=创建复制表 class="nav-link text-wrap d-inline-block w-100"> 创建复制表 </a> <a href=#gu-zhang-hui-fu title=故障恢复 class="nav-link text-wrap d-inline-block w-100"> 故障恢复 </a> <a href=#zai-shu-ju-wan-quan-diu-shi-hou-de-hui-fu title=在数据完全丢失后的恢复 class="nav-link text-wrap d-inline-block w-100"> 在数据完全丢失后的恢复 </a> <a href=#mergetree-zhuan-huan-wei-replicatedmergetree title="MergeTree 转换为 ReplicatedMergeTree" class="nav-link text-wrap d-inline-block w-100"> MergeTree 转换为 ReplicatedMergeTree </a> <a href=#replicatedmergetree-zhuan-huan-wei-mergetree title="ReplicatedMergeTree 转换为 MergeTree" class="nav-link text-wrap d-inline-block w-100"> ReplicatedMergeTree 转换为 MergeTree </a> <a href=#dang-zookeeper-ji-qun-zhong-de-yuan-shu-ju-diu-shi-huo-sun-pi-shi-hui-fu-fang-fa title="当 ZooKeeper 集群中的元数据丢失或损坏时恢复方法" class="nav-link text-wrap d-inline-block w-100"> 当 ZooKeeper 集群中的元数据丢失或损坏时恢复方法 </a> </nav> <a href=#zi-ding-yi-fen-qu-jian title=自定义分区键 class="nav-link text-wrap d-inline-block w-100"> 自定义分区键 </a> <a href=#replacingmergetree title=ReplacingMergeTree class="nav-link text-wrap d-inline-block w-100"> ReplacingMergeTree </a> <nav id=toc-toc-56 class="nav flex-column pl-2"> <a href=#jian-biao title=建表 class="nav-link text-wrap d-inline-block w-100"> 建表 </a> </nav> <a href=#summingmergetree title=SummingMergeTree class="nav-link text-wrap d-inline-block w-100"> SummingMergeTree </a> <nav id=toc-toc-57 class="nav flex-column pl-2"> <a href=#jian-biao_1 title=建表 class="nav-link text-wrap d-inline-block w-100"> 建表 </a> <a href=#yong-fa-shi-li_2 title=用法示例 class="nav-link text-wrap d-inline-block w-100"> 用法示例 </a> <a href=#data-processing title=数据处理 class="nav-link text-wrap d-inline-block w-100"> 数据处理 </a> <nav id=toc-toc-57-3 class="nav flex-column pl-2"> <a href=#hui-zong-de-tong-yong-gui-ze title=汇总的通用规则 class="nav-link text-wrap d-inline-block w-100"> 汇总的通用规则 </a> <a href=#aggregatefunction-lie-zhong-de-hui-zong title="AggregateFunction 列中的汇总" class="nav-link text-wrap d-inline-block w-100"> AggregateFunction 列中的汇总 </a> <a href=#qian-tao-jie-gou title=嵌套结构 class="nav-link text-wrap d-inline-block w-100"> 嵌套结构 </a> </nav> </nav> <a href=#aggregatingmergetree title=AggregatingMergeTree class="nav-link text-wrap d-inline-block w-100"> AggregatingMergeTree </a> <nav id=toc-toc-58 class="nav flex-column pl-2"> <a href=#jian-biao_2 title=建表 class="nav-link text-wrap d-inline-block w-100"> 建表 </a> <a href=#select-he-insert title="SELECT 和 INSERT" class="nav-link text-wrap d-inline-block w-100"> SELECT 和 INSERT </a> <a href=#ju-he-wu-hua-shi-tu-de-shi-li title=聚合物化视图的示例 class="nav-link text-wrap d-inline-block w-100"> 聚合物化视图的示例 </a> </nav> <a href=#table_engine-collapsingmergetree title=CollapsingMergeTree class="nav-link text-wrap d-inline-block w-100"> CollapsingMergeTree </a> <nav id=toc-toc-59 class="nav flex-column pl-2"> <a href=#jian-biao_3 title=建表 class="nav-link text-wrap d-inline-block w-100"> 建表 </a> <a href=#table_engine-collapsingmergetree-collapsing title=折叠 class="nav-link text-wrap d-inline-block w-100"> 折叠 </a> <nav id=toc-toc-59-2 class="nav flex-column pl-2"> <a href=#shu-ju title=数据 class="nav-link text-wrap d-inline-block w-100"> 数据 </a> <a href=#table_engine-collapsingmergetree-collapsing-algorithm title=算法 class="nav-link text-wrap d-inline-block w-100"> 算法 </a> </nav> <a href=#shi-li title=示例 class="nav-link text-wrap d-inline-block w-100"> 示例 </a> </nav> <a href=#versionedcollapsingmergetree title=VersionedCollapsingMergeTree class="nav-link text-wrap d-inline-block w-100"> VersionedCollapsingMergeTree </a> <nav id=toc-toc-60 class="nav flex-column pl-2"> <a href=#creating-a-table title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#table_engines_versionedcollapsingmergetree title=Collapsing class="nav-link text-wrap d-inline-block w-100"> Collapsing </a> <nav id=toc-toc-60-2 class="nav flex-column pl-2"> <a href=#data title=Data class="nav-link text-wrap d-inline-block w-100"> Data </a> <a href=#table_engines-versionedcollapsingmergetree-algorithm title=Algorithm class="nav-link text-wrap d-inline-block w-100"> Algorithm </a> </nav> <a href=#selecting-data title="Selecting Data" class="nav-link text-wrap d-inline-block w-100"> Selecting Data </a> <a href=#example-of-use title="Example of Use" class="nav-link text-wrap d-inline-block w-100"> Example of Use </a> </nav> <a href=#graphitemergetree title=GraphiteMergeTree class="nav-link text-wrap d-inline-block w-100"> GraphiteMergeTree </a> <nav id=toc-toc-61 class="nav flex-column pl-2"> <a href=#creating-a-table_1 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#rollup-configuration title="Rollup configuration" class="nav-link text-wrap d-inline-block w-100"> Rollup configuration </a> <nav id=toc-toc-61-2 class="nav flex-column pl-2"> <a href=#required-columns title="Required Columns" class="nav-link text-wrap d-inline-block w-100"> Required Columns </a> <a href=#patterns title=Patterns class="nav-link text-wrap d-inline-block w-100"> Patterns </a> <a href=#configuration-example title="Configuration Example" class="nav-link text-wrap d-inline-block w-100"> Configuration Example </a> </nav> </nav> <a href=#table_engines-log_engine_family title=日志引擎系列 class="nav-link text-wrap d-inline-block w-100"> 日志引擎系列 </a> <nav id=toc-toc-62 class="nav flex-column pl-2"> <a href=#table_engines-log_engine_family-common_properties title=共同属性 class="nav-link text-wrap d-inline-block w-100"> 共同属性 </a> <a href=#table_engines-log_engine_family-differences title=差异 class="nav-link text-wrap d-inline-block w-100"> 差异 </a> </nav> <a href=#table_engines-stripelog title=StripeLog class="nav-link text-wrap d-inline-block w-100"> StripeLog </a> <nav id=toc-toc-63 class="nav flex-column pl-2"> <a href=#table_engines-stripelog-creating-a-table title=建表 class="nav-link text-wrap d-inline-block w-100"> 建表 </a> <a href=#table_engines-stripelog-writing-the-data title=写数据 class="nav-link text-wrap d-inline-block w-100"> 写数据 </a> <a href=#table_engines-stripelog-reading-the-data title=读数据 class="nav-link text-wrap d-inline-block w-100"> 读数据 </a> <a href=#table_engines-stripelog-example-of-use title=使用示例 class="nav-link text-wrap d-inline-block w-100"> 使用示例 </a> </nav> <a href=#log_1 title=Log class="nav-link text-wrap d-inline-block w-100"> Log </a> <a href=#tinylog title=TinyLog class="nav-link text-wrap d-inline-block w-100"> TinyLog </a> <a href=#kafka title=Kafka class="nav-link text-wrap d-inline-block w-100"> Kafka </a> <nav id=toc-toc-66 class="nav flex-column pl-2"> <a href=#pei-zhi title=配置 class="nav-link text-wrap d-inline-block w-100"> 配置 </a> </nav> <a href=#mysql_1 title=MySQL class="nav-link text-wrap d-inline-block w-100"> MySQL </a> <a href=#table_engine-jdbc title=JDBC class="nav-link text-wrap d-inline-block w-100"> JDBC </a> <nav id=toc-toc-68 class="nav flex-column pl-2"> <a href=#creating-a-table_2 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#usage-example_1 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> <a href=#see-also_1 title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#table_engine-odbc title=ODBC class="nav-link text-wrap d-inline-block w-100"> ODBC </a> <nav id=toc-toc-69 class="nav flex-column pl-2"> <a href=#creating-a-table_3 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#usage-example_2 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> <a href=#see-also_2 title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#table_engines-hdfs title=HDFS class="nav-link text-wrap d-inline-block w-100"> HDFS </a> <nav id=toc-toc-70 class="nav flex-column pl-2"> <a href=#usage title=Usage class="nav-link text-wrap d-inline-block w-100"> Usage </a> <a href=#implementation-details title="Implementation Details" class="nav-link text-wrap d-inline-block w-100"> Implementation Details </a> </nav> <a href=#distributed title=Distributed class="nav-link text-wrap d-inline-block w-100"> Distributed </a> <a href=#external-data-for-query-processing title="External Data for Query Processing" class="nav-link text-wrap d-inline-block w-100"> External Data for Query Processing </a> <a href=#dictionary title=Dictionary class="nav-link text-wrap d-inline-block w-100"> Dictionary </a> <a href=#merge title=Merge class="nav-link text-wrap d-inline-block w-100"> Merge </a> <nav id=toc-toc-74 class="nav flex-column pl-2"> <a href=#xu-ni-lie_1 title=虚拟列 class="nav-link text-wrap d-inline-block w-100"> 虚拟列 </a> </nav> <a href=#table_engines-file title=File(InputFormat) class="nav-link text-wrap d-inline-block w-100"> File(InputFormat) </a> <nav id=toc-toc-75 class="nav flex-column pl-2"> <a href=#zai-clickhouse-fu-wu-qi-zhong-de-shi-yong title="在 ClickHouse 服务器中的使用" class="nav-link text-wrap d-inline-block w-100"> 在 ClickHouse 服务器中的使用 </a> <a href=#zai-clickhouse-local-zhong-de-shi-yong title="在 Clickhouse-local 中的使用" class="nav-link text-wrap d-inline-block w-100"> 在 Clickhouse-local 中的使用 </a> <a href=#gong-neng-shi-xian title=功能实现 class="nav-link text-wrap d-inline-block w-100"> 功能实现 </a> </nav> <a href=#null_1 title=Null class="nav-link text-wrap d-inline-block w-100"> Null </a> <a href=#set_1 title=Set class="nav-link text-wrap d-inline-block w-100"> Set </a> <a href=#join title=Join class="nav-link text-wrap d-inline-block w-100"> Join </a> <a href=#table_engines-url title="URL(URL, Format)" class="nav-link text-wrap d-inline-block w-100"> URL(URL, Format) </a> <nav id=toc-toc-79 class="nav flex-column pl-2"> <a href=#zai-clickhouse-fu-wu-qi-zhong-shi-yong-yin-qing title="在 ClickHouse 服务器中使用引擎" class="nav-link text-wrap d-inline-block w-100"> 在 ClickHouse 服务器中使用引擎 </a> <a href=#gong-neng-shi-xian_1 title=功能实现 class="nav-link text-wrap d-inline-block w-100"> 功能实现 </a> </nav> <a href=#view title=View class="nav-link text-wrap d-inline-block w-100"> View </a> <a href=#wu-hua-shi-tu title=物化视图 class="nav-link text-wrap d-inline-block w-100"> 物化视图 </a> <a href=#memory title=Memory class="nav-link text-wrap d-inline-block w-100"> Memory </a> <a href=#buffer title=Buffer class="nav-link text-wrap d-inline-block w-100"> Buffer </a> <a href=#sql-reference title="SQL Reference" class="nav-link text-wrap d-inline-block w-100"> SQL Reference </a> <a href=#select-cha-xun-yu-fa title="SELECT 查询语法" class="nav-link text-wrap d-inline-block w-100"> SELECT 查询语法 </a> <nav id=toc-toc-85 class="nav flex-column pl-2"> <a href=#select-from title="FROM 子句" class="nav-link text-wrap d-inline-block w-100"> FROM 子句 </a> <a href=#select-sample-clause title="SAMPLE 子句" class="nav-link text-wrap d-inline-block w-100"> SAMPLE 子句 </a> <a href=#select-array-join-clause title="ARRAY JOIN 子句" class="nav-link text-wrap d-inline-block w-100"> ARRAY JOIN 子句 </a> <a href=#select-join title="JOIN 子句" class="nav-link text-wrap d-inline-block w-100"> JOIN 子句 </a> <nav id=toc-toc-85-4 class="nav flex-column pl-2"> <a href=#nullde-chu-li title=Null的处理 class="nav-link text-wrap d-inline-block w-100"> Null的处理 </a> </nav> <a href=#where-zi-ju title="WHERE 子句" class="nav-link text-wrap d-inline-block w-100"> WHERE 子句 </a> <a href=#prewhere-zi-ju title="PREWHERE 子句" class="nav-link text-wrap d-inline-block w-100"> PREWHERE 子句 </a> <a href=#select-group-by-clause title="GROUP BY 子句" class="nav-link text-wrap d-inline-block w-100"> GROUP BY 子句 </a> <nav id=toc-toc-85-7 class="nav flex-column pl-2"> <a href=#null-chu-li title="NULL 处理" class="nav-link text-wrap d-inline-block w-100"> NULL 处理 </a> <a href=#with-totals-xiu-shi-fu title="WITH TOTALS 修饰符" class="nav-link text-wrap d-inline-block w-100"> WITH TOTALS 修饰符 </a> <a href=#select-group-by-in-external-memory title="GROUP BY 使用外部存储设备" class="nav-link text-wrap d-inline-block w-100"> GROUP BY 使用外部存储设备 </a> </nav> <a href=#limit-n-by-zi-ju title="LIMIT N BY 子句" class="nav-link text-wrap d-inline-block w-100"> LIMIT N BY 子句 </a> <a href=#having-zi-ju title="HAVING 子句" class="nav-link text-wrap d-inline-block w-100"> HAVING 子句 </a> <a href=#select-order-by title="ORDER BY 子句" class="nav-link text-wrap d-inline-block w-100"> ORDER BY 子句 </a> <a href=#select-zi-ju title="SELECT 子句" class="nav-link text-wrap d-inline-block w-100"> SELECT 子句 </a> <a href=#select-distinct title="DISTINCT 子句" class="nav-link text-wrap d-inline-block w-100"> DISTINCT 子句 </a> <a href=#limit-zi-ju title="LIMIT 子句" class="nav-link text-wrap d-inline-block w-100"> LIMIT 子句 </a> <a href=#union-all-zi-ju title="UNION ALL 子句" class="nav-link text-wrap d-inline-block w-100"> UNION ALL 子句 </a> <a href=#into-outfile-zi-ju title="INTO OUTFILE 子句" class="nav-link text-wrap d-inline-block w-100"> INTO OUTFILE 子句 </a> <a href=#format-zi-ju title="FORMAT 子句" class="nav-link text-wrap d-inline-block w-100"> FORMAT 子句 </a> <a href=#select-in-operators title="IN 运算符" class="nav-link text-wrap d-inline-block w-100"> IN 运算符 </a> <nav id=toc-toc-85-17 class="nav flex-column pl-2"> <a href=#null-chu-li_1 title="NULL 处理" class="nav-link text-wrap d-inline-block w-100"> NULL 处理 </a> <a href=#select-distributed-subqueries title=分布式子查询 class="nav-link text-wrap d-inline-block w-100"> 分布式子查询 </a> </nav> <a href=#extreme-values title="Extreme Values" class="nav-link text-wrap d-inline-block w-100"> Extreme Values </a> <a href=#zhu-yi-shi-xiang title=注意事项 class="nav-link text-wrap d-inline-block w-100"> 注意事项 </a> <a href=#insert title=INSERT class="nav-link text-wrap d-inline-block w-100"> INSERT </a> <nav id=toc-toc-85-20 class="nav flex-column pl-2"> <a href=#insert_query_insert-select title=使用SELECT的结果写入 class="nav-link text-wrap d-inline-block w-100"> 使用SELECT的结果写入 </a> <a href=#xing-neng-de-zhu-yi-shi-xiang title=性能的注意事项 class="nav-link text-wrap d-inline-block w-100"> 性能的注意事项 </a> </nav> <a href=#create-database_1 title="CREATE DATABASE" class="nav-link text-wrap d-inline-block w-100"> CREATE DATABASE </a> <a href=#create-table-query title="CREATE TABLE" class="nav-link text-wrap d-inline-block w-100"> CREATE TABLE </a> <nav id=toc-toc-85-22 class="nav flex-column pl-2"> <a href=#create-default-values title=默认值 class="nav-link text-wrap d-inline-block w-100"> 默认值 </a> <a href=#constraints title=Constraints class="nav-link text-wrap d-inline-block w-100"> Constraints </a> <a href=#create-query-common-purpose-codecs title="Common purpose codecs" class="nav-link text-wrap d-inline-block w-100"> Common purpose codecs </a> </nav> <a href=#lin-shi-biao title=临时表 class="nav-link text-wrap d-inline-block w-100"> 临时表 </a> <a href=#fen-bu-shi-ddlcha-xun-on-cluster-zi-ju title="分布式DDL查询 （ON CLUSTER 子句）" class="nav-link text-wrap d-inline-block w-100"> 分布式DDL查询 （ON CLUSTER 子句） </a> <a href=#create-view title="CREATE VIEW" class="nav-link text-wrap d-inline-block w-100"> CREATE VIEW </a> <a href=#query_language_queries_alter title=ALTER class="nav-link text-wrap d-inline-block w-100"> ALTER </a> <nav id=toc-toc-85-26 class="nav flex-column pl-2"> <a href=#column-manipulations title="Column Manipulations" class="nav-link text-wrap d-inline-block w-100"> Column Manipulations </a> <nav id=toc-toc-85-26-1 class="nav flex-column pl-2"> <a href=#alter_add-column title="ADD COLUMN" class="nav-link text-wrap d-inline-block w-100"> ADD COLUMN </a> <a href=#alter_drop-column title="DROP COLUMN" class="nav-link text-wrap d-inline-block w-100"> DROP COLUMN </a> <a href=#alter_clear-column title="CLEAR COLUMN" class="nav-link text-wrap d-inline-block w-100"> CLEAR COLUMN </a> <a href=#alter_comment-column title="COMMENT COLUMN" class="nav-link text-wrap d-inline-block w-100"> COMMENT COLUMN </a> <a href=#alter_modify-column title="MODIFY COLUMN" class="nav-link text-wrap d-inline-block w-100"> MODIFY COLUMN </a> <a href=#alter-query-limitations title="ALTER Query Limitations" class="nav-link text-wrap d-inline-block w-100"> ALTER Query Limitations </a> </nav> <a href=#manipulations-with-key-expressions title="Manipulations With Key Expressions" class="nav-link text-wrap d-inline-block w-100"> Manipulations With Key Expressions </a> <a href=#manipulations-with-data-skipping-indices title="Manipulations With Data Skipping Indices" class="nav-link text-wrap d-inline-block w-100"> Manipulations With Data Skipping Indices </a> <a href=#manipulations-with-constraints title="Manipulations with constraints" class="nav-link text-wrap d-inline-block w-100"> Manipulations with constraints </a> <a href=#alter_manipulations-with-partitions title="Manipulations With Partitions and Parts" class="nav-link text-wrap d-inline-block w-100"> Manipulations With Partitions and Parts </a> <nav id=toc-toc-85-26-5 class="nav flex-column pl-2"> <a href=#alter_detach-partition title="DETACH PARTITION" class="nav-link text-wrap d-inline-block w-100"> DETACH PARTITION </a> <a href=#alter_drop-partition title="DROP PARTITION" class="nav-link text-wrap d-inline-block w-100"> DROP PARTITION </a> <a href=#alter_drop-detached title="DROP DETACHED PARTITION|PART" class="nav-link text-wrap d-inline-block w-100"> DROP DETACHED PARTITION|PART </a> <a href=#alter_attach-partition title="ATTACH PARTITION|PART" class="nav-link text-wrap d-inline-block w-100"> ATTACH PARTITION|PART </a> <a href=#alter_replace-partition title="REPLACE PARTITION" class="nav-link text-wrap d-inline-block w-100"> REPLACE PARTITION </a> <a href=#alter_clear-column-partition title="CLEAR COLUMN IN PARTITION" class="nav-link text-wrap d-inline-block w-100"> CLEAR COLUMN IN PARTITION </a> <a href=#alter_freeze-partition title="FREEZE PARTITION" class="nav-link text-wrap d-inline-block w-100"> FREEZE PARTITION </a> <a href=#alter_clear-index-partition title="CLEAR INDEX IN PARTITION" class="nav-link text-wrap d-inline-block w-100"> CLEAR INDEX IN PARTITION </a> <a href=#alter_fetch-partition title="FETCH PARTITION" class="nav-link text-wrap d-inline-block w-100"> FETCH PARTITION </a> <a href=#alter_move-partition title="MOVE PARTITION|PART" class="nav-link text-wrap d-inline-block w-100"> MOVE PARTITION|PART </a> <a href=#alter-how-to-specify-part-expr title="How To Set Partition Expression" class="nav-link text-wrap d-inline-block w-100"> How To Set Partition Expression </a> </nav> <a href=#synchronicity-of-alter-queries title="Synchronicity of ALTER Queries" class="nav-link text-wrap d-inline-block w-100"> Synchronicity of ALTER Queries </a> <a href=#alter-mutations title=Mutations class="nav-link text-wrap d-inline-block w-100"> Mutations </a> </nav> </nav> <a href=#query_language-system title="SYSTEM Queries" class="nav-link text-wrap d-inline-block w-100"> SYSTEM Queries </a> <nav id=toc-toc-86 class="nav flex-column pl-2"> <a href=#query_language-system-reload-dictionaries title="RELOAD DICTIONARIES" class="nav-link text-wrap d-inline-block w-100"> RELOAD DICTIONARIES </a> <a href=#query_language-system-reload-dictionary title="RELOAD DICTIONARY dictionary_name" class="nav-link text-wrap d-inline-block w-100"> RELOAD DICTIONARY dictionary_name </a> <a href=#query_language-system-drop-dns-cache title="DROP DNS CACHE" class="nav-link text-wrap d-inline-block w-100"> DROP DNS CACHE </a> <a href=#query_language-system-drop-marks-cache title="DROP MARKS CACHE" class="nav-link text-wrap d-inline-block w-100"> DROP MARKS CACHE </a> <a href=#query_language-system-flush_logs title="FLUSH LOGS" class="nav-link text-wrap d-inline-block w-100"> FLUSH LOGS </a> <a href=#query_language-system-reload-config title="RELOAD CONFIG" class="nav-link text-wrap d-inline-block w-100"> RELOAD CONFIG </a> <a href=#query_language-system-shutdown title=SHUTDOWN class="nav-link text-wrap d-inline-block w-100"> SHUTDOWN </a> <a href=#query_language-system-kill title=KILL class="nav-link text-wrap d-inline-block w-100"> KILL </a> <a href=#query_language-system-distributed title="Managing Distributed Tables" class="nav-link text-wrap d-inline-block w-100"> Managing Distributed Tables </a> <nav id=toc-toc-86-9 class="nav flex-column pl-2"> <a href=#query_language-system-stop-distributed-sends title="STOP DISTRIBUTED SENDS" class="nav-link text-wrap d-inline-block w-100"> STOP DISTRIBUTED SENDS </a> <a href=#query_language-system-flush-distributed title="FLUSH DISTRIBUTED" class="nav-link text-wrap d-inline-block w-100"> FLUSH DISTRIBUTED </a> <a href=#query_language-system-start-distributed-sends title="START DISTRIBUTED SENDS" class="nav-link text-wrap d-inline-block w-100"> START DISTRIBUTED SENDS </a> <a href=#query_language-system-stop-merges title="STOP MERGES" class="nav-link text-wrap d-inline-block w-100"> STOP MERGES </a> <a href=#query_language-system-start-merges title="START MERGES" class="nav-link text-wrap d-inline-block w-100"> START MERGES </a> </nav> </nav> <a href=#show-queries title="SHOW Queries" class="nav-link text-wrap d-inline-block w-100"> SHOW Queries </a> <nav id=toc-toc-87 class="nav flex-column pl-2"> <a href=#show-create-table title="SHOW CREATE TABLE" class="nav-link text-wrap d-inline-block w-100"> SHOW CREATE TABLE </a> <a href=#show-databases title="SHOW DATABASES" class="nav-link text-wrap d-inline-block w-100"> SHOW DATABASES </a> <a href=#show-processlist title="SHOW PROCESSLIST" class="nav-link text-wrap d-inline-block w-100"> SHOW PROCESSLIST </a> <a href=#show-tables title="SHOW TABLES" class="nav-link text-wrap d-inline-block w-100"> SHOW TABLES </a> </nav> <a href=#miscellaneous-queries title="Miscellaneous Queries" class="nav-link text-wrap d-inline-block w-100"> Miscellaneous Queries </a> <nav id=toc-toc-88 class="nav flex-column pl-2"> <a href=#attach title=ATTACH class="nav-link text-wrap d-inline-block w-100"> ATTACH </a> <a href=#check-table title="CHECK TABLE" class="nav-link text-wrap d-inline-block w-100"> CHECK TABLE </a> <a href=#misc-describe-table title="DESCRIBE TABLE" class="nav-link text-wrap d-inline-block w-100"> DESCRIBE TABLE </a> <a href=#detach title=DETACH class="nav-link text-wrap d-inline-block w-100"> DETACH </a> <a href=#drop title=DROP class="nav-link text-wrap d-inline-block w-100"> DROP </a> <a href=#exists title=EXISTS class="nav-link text-wrap d-inline-block w-100"> EXISTS </a> <a href=#kill-query title="KILL QUERY" class="nav-link text-wrap d-inline-block w-100"> KILL QUERY </a> <a href=#kill-mutation title="KILL MUTATION" class="nav-link text-wrap d-inline-block w-100"> KILL MUTATION </a> <a href=#misc_operations-optimize title=OPTIMIZE class="nav-link text-wrap d-inline-block w-100"> OPTIMIZE </a> <a href=#misc_operations-rename title=RENAME class="nav-link text-wrap d-inline-block w-100"> RENAME </a> <a href=#query-set title=SET class="nav-link text-wrap d-inline-block w-100"> SET </a> <a href=#truncate title=TRUNCATE class="nav-link text-wrap d-inline-block w-100"> TRUNCATE </a> <a href=#use title=USE class="nav-link text-wrap d-inline-block w-100"> USE </a> </nav> <a href=#han-shu title=函数 class="nav-link text-wrap d-inline-block w-100"> 函数 </a> <nav id=toc-toc-89 class="nav flex-column pl-2"> <a href=#qiang-lei-xing title=强类型 class="nav-link text-wrap d-inline-block w-100"> 强类型 </a> <a href=#chang-jian-de-zi-biao-da-shi-xiao-chu title=常见的子表达式消除 class="nav-link text-wrap d-inline-block w-100"> 常见的子表达式消除 </a> <a href=#jie-guo-lei-xing title=结果类型 class="nav-link text-wrap d-inline-block w-100"> 结果类型 </a> <a href=#chang-liang title=常量 class="nav-link text-wrap d-inline-block w-100"> 常量 </a> <a href=#nullzhi-chu-li title=NULL值处理 class="nav-link text-wrap d-inline-block w-100"> NULL值处理 </a> <a href=#bu-ke-bian-xing title=不可变性 class="nav-link text-wrap d-inline-block w-100"> 不可变性 </a> <a href=#cuo-wu-chu-li title=错误处理 class="nav-link text-wrap d-inline-block w-100"> 错误处理 </a> <a href=#biao-da-shi-can-shu-de-ji-suan title=表达式参数的计算 class="nav-link text-wrap d-inline-block w-100"> 表达式参数的计算 </a> <a href=#zhi-xing-fen-bu-shi-cha-xun-chu-li-de-gong-neng title=执行分布式查询处理的功能 class="nav-link text-wrap d-inline-block w-100"> 执行分布式查询处理的功能 </a> </nav> <a href=#suan-zhu-han-shu title=算术函数 class="nav-link text-wrap d-inline-block w-100"> 算术函数 </a> <nav id=toc-toc-90 class="nav flex-column pl-2"> <a href=#plus-a-b-a-b title="plus(a, b), a + b" class="nav-link text-wrap d-inline-block w-100"> plus(a, b), a + b </a> <a href=#minus-a-b-a-b title="minus(a, b), a - b" class="nav-link text-wrap d-inline-block w-100"> minus(a, b), a - b </a> <a href=#multiply-a-b-a-b title="multiply(a, b), a * b" class="nav-link text-wrap d-inline-block w-100"> multiply(a, b), a * b </a> <a href=#divide-a-b-a-b title="divide(a, b), a / b" class="nav-link text-wrap d-inline-block w-100"> divide(a, b), a / b </a> <a href=#intdiv-a-b title="intDiv(a, b)" class="nav-link text-wrap d-inline-block w-100"> intDiv(a, b) </a> <a href=#intdivorzero-a-b title="intDivOrZero(a, b)" class="nav-link text-wrap d-inline-block w-100"> intDivOrZero(a, b) </a> <a href=#modulo-a-b-a-b title="modulo(a, b), a % b" class="nav-link text-wrap d-inline-block w-100"> modulo(a, b), a % b </a> <a href=#negate-a-a title="negate(a), -a" class="nav-link text-wrap d-inline-block w-100"> negate(a), -a </a> <a href=#arithm_func-abs title=abs(a) class="nav-link text-wrap d-inline-block w-100"> abs(a) </a> <a href=#gcd-a-b title="gcd(a, b)" class="nav-link text-wrap d-inline-block w-100"> gcd(a, b) </a> <a href=#lcm-a-b title="lcm(a, b)" class="nav-link text-wrap d-inline-block w-100"> lcm(a, b) </a> </nav> <a href=#bi-jiao-han-shu title=比较函数 class="nav-link text-wrap d-inline-block w-100"> 比较函数 </a> <nav id=toc-toc-91 class="nav flex-column pl-2"> <a href=#equals-a-b-and-a-b-operator title="equals, a = b and a == b operator" class="nav-link text-wrap d-inline-block w-100"> equals, a = b and a == b operator </a> <a href=#notequals-a-operator-b-and-a-b title="notEquals, a ! operator= b and a &lt;&gt; b" class="nav-link text-wrap d-inline-block w-100"> notEquals, a ! operator= b and a &amp;lt;&amp;gt; b </a> <a href=#less-operator title="less, &lt; operator" class="nav-link text-wrap d-inline-block w-100"> less, &amp;lt; operator </a> <a href=#greater-operator title="greater, &gt; operator" class="nav-link text-wrap d-inline-block w-100"> greater, &amp;gt; operator </a> <a href=#lessorequals-operator title="lessOrEquals, &lt;= operator" class="nav-link text-wrap d-inline-block w-100"> lessOrEquals, &amp;lt;= operator </a> <a href=#greaterorequals-operator title="greaterOrEquals, &gt;= operator" class="nav-link text-wrap d-inline-block w-100"> greaterOrEquals, &amp;gt;= operator </a> </nav> <a href=#luo-ji-han-shu title=逻辑函数 class="nav-link text-wrap d-inline-block w-100"> 逻辑函数 </a> <nav id=toc-toc-92 class="nav flex-column pl-2"> <a href=#and-and-operator title="and, AND operator" class="nav-link text-wrap d-inline-block w-100"> and, AND operator </a> <a href=#or-or-operator title="or, OR operator" class="nav-link text-wrap d-inline-block w-100"> or, OR operator </a> <a href=#not-not-operator title="not, NOT operator" class="nav-link text-wrap d-inline-block w-100"> not, NOT operator </a> <a href=#xor title=xor class="nav-link text-wrap d-inline-block w-100"> xor </a> </nav> <a href=#lei-xing-zhuan-huan-han-shu title=类型转换函数 class="nav-link text-wrap d-inline-block w-100"> 类型转换函数 </a> <nav id=toc-toc-93 class="nav flex-column pl-2"> <a href=#touint8-touint16-touint32-touint64 title="toUInt8, toUInt16, toUInt32, toUInt64" class="nav-link text-wrap d-inline-block w-100"> toUInt8, toUInt16, toUInt32, toUInt64 </a> <a href=#toint8-toint16-toint32-toint64 title="toInt8, toInt16, toInt32, toInt64" class="nav-link text-wrap d-inline-block w-100"> toInt8, toInt16, toInt32, toInt64 </a> <a href=#tofloat32-tofloat64 title="toFloat32, toFloat64" class="nav-link text-wrap d-inline-block w-100"> toFloat32, toFloat64 </a> <a href=#todate-todatetime title="toDate, toDateTime" class="nav-link text-wrap d-inline-block w-100"> toDate, toDateTime </a> <a href=#touint8orzero-touint16orzero-touint32orzero-touint64orzero-toint8orzero-toint16orzero-toint32orzero-toint64orzero-tofloat32orzero-tofloat64orzero-todateorzero-todatetimeorzero title="toUInt8OrZero, toUInt16OrZero, toUInt32OrZero, toUInt64OrZero, toInt8OrZero, toInt16OrZero, toInt32OrZero, toInt64OrZero, toFloat32OrZero, toFloat64OrZero, toDateOrZero, toDateTimeOrZero" class="nav-link text-wrap d-inline-block w-100"> toUInt8OrZero, toUInt16OrZero, toUInt32OrZero, toUInt64OrZero, toInt8OrZero, toInt16OrZero, toInt32OrZero, toInt64OrZero, toFloat32OrZero, toFloat64OrZero, toDateOrZero, toDateTimeOrZero </a> <a href=#touint8ornull-touint16ornull-touint32ornull-touint64ornull-toint8ornull-toint16ornull-toint32ornull-toint64ornull-tofloat32ornull-tofloat64ornull-todateornull-todatetimeornull title="toUInt8OrNull, toUInt16OrNull, toUInt32OrNull, toUInt64OrNull, toInt8OrNull, toInt16OrNull, toInt32OrNull, toInt64OrNull, toFloat32OrNull, toFloat64OrNull, toDateOrNull, toDateTimeOrNull" class="nav-link text-wrap d-inline-block w-100"> toUInt8OrNull, toUInt16OrNull, toUInt32OrNull, toUInt64OrNull, toInt8OrNull, toInt16OrNull, toInt32OrNull, toInt64OrNull, toFloat32OrNull, toFloat64OrNull, toDateOrNull, toDateTimeOrNull </a> <a href=#tostring title=toString class="nav-link text-wrap d-inline-block w-100"> toString </a> <a href=#todecimal32-value-s-todecimal64-value-s-todecimal128-value-s title="toDecimal32(value, S), toDecimal64(value, S), toDecimal128(value, S)" class="nav-link text-wrap d-inline-block w-100"> toDecimal32(value, S), toDecimal64(value, S), toDecimal128(value, S) </a> <a href=#tofixedstring-s-n title="toFixedString(s, N)" class="nav-link text-wrap d-inline-block w-100"> toFixedString(s, N) </a> <a href=#tostringcuttozero-s title=toStringCutToZero(s) class="nav-link text-wrap d-inline-block w-100"> toStringCutToZero(s) </a> <a href=#reinterpretasuint8-reinterpretasuint16-reinterpretasuint32-reinterpretasuint64 title="reinterpretAsUInt8, reinterpretAsUInt16, reinterpretAsUInt32, reinterpretAsUInt64" class="nav-link text-wrap d-inline-block w-100"> reinterpretAsUInt8, reinterpretAsUInt16, reinterpretAsUInt32, reinterpretAsUInt64 </a> <a href=#reinterpretasint8-reinterpretasint16-reinterpretasint32-reinterpretasint64 title="reinterpretAsInt8, reinterpretAsInt16, reinterpretAsInt32, reinterpretAsInt64" class="nav-link text-wrap d-inline-block w-100"> reinterpretAsInt8, reinterpretAsInt16, reinterpretAsInt32, reinterpretAsInt64 </a> <a href=#reinterpretasfloat32-reinterpretasfloat64 title="reinterpretAsFloat32, reinterpretAsFloat64" class="nav-link text-wrap d-inline-block w-100"> reinterpretAsFloat32, reinterpretAsFloat64 </a> <a href=#reinterpretasdate-reinterpretasdatetime title="reinterpretAsDate, reinterpretAsDateTime" class="nav-link text-wrap d-inline-block w-100"> reinterpretAsDate, reinterpretAsDateTime </a> <a href=#reinterpretasstring title=reinterpretAsString class="nav-link text-wrap d-inline-block w-100"> reinterpretAsString </a> <a href=#reinterpretasfixedstring title=reinterpretAsFixedString class="nav-link text-wrap d-inline-block w-100"> reinterpretAsFixedString </a> <a href=#type_conversion_function-cast title="CAST(x, t)" class="nav-link text-wrap d-inline-block w-100"> CAST(x, t) </a> <a href=#function-tointerval title="toIntervalYear, toIntervalQuarter, toIntervalMonth, toIntervalWeek, toIntervalDay, toIntervalHour, toIntervalMinute, toIntervalSecond" class="nav-link text-wrap d-inline-block w-100"> toIntervalYear, toIntervalQuarter, toIntervalMonth, toIntervalWeek, toIntervalDay, toIntervalHour, toIntervalMinute, toIntervalSecond </a> <a href=#type_conversion_functions-parsedatetimebesteffort title=parseDateTimeBestEffort class="nav-link text-wrap d-inline-block w-100"> parseDateTimeBestEffort </a> <a href=#parsedatetimebesteffortornull title=parseDateTimeBestEffortOrNull class="nav-link text-wrap d-inline-block w-100"> parseDateTimeBestEffortOrNull </a> <a href=#parsedatetimebesteffortorzero title=parseDateTimeBestEffortOrZero class="nav-link text-wrap d-inline-block w-100"> parseDateTimeBestEffortOrZero </a> </nav> <a href=#shi-jian-ri-qi-han-shu title=时间日期函数 class="nav-link text-wrap d-inline-block w-100"> 时间日期函数 </a> <nav id=toc-toc-94 class="nav flex-column pl-2"> <a href=#totimezone title=toTimeZone class="nav-link text-wrap d-inline-block w-100"> toTimeZone </a> <a href=#toyear title=toYear class="nav-link text-wrap d-inline-block w-100"> toYear </a> <a href=#toquarter title=toQuarter class="nav-link text-wrap d-inline-block w-100"> toQuarter </a> <a href=#tomonth title=toMonth class="nav-link text-wrap d-inline-block w-100"> toMonth </a> <a href=#todayofyear title=toDayOfYear class="nav-link text-wrap d-inline-block w-100"> toDayOfYear </a> <a href=#todayofmonth title=toDayOfMonth class="nav-link text-wrap d-inline-block w-100"> toDayOfMonth </a> <a href=#todayofweek title=toDayOfWeek class="nav-link text-wrap d-inline-block w-100"> toDayOfWeek </a> <a href=#tohour title=toHour class="nav-link text-wrap d-inline-block w-100"> toHour </a> <a href=#tominute title=toMinute class="nav-link text-wrap d-inline-block w-100"> toMinute </a> <a href=#tosecond title=toSecond class="nav-link text-wrap d-inline-block w-100"> toSecond </a> <a href=#tounixtimestamp title=toUnixTimestamp class="nav-link text-wrap d-inline-block w-100"> toUnixTimestamp </a> <a href=#tostartofyear title=toStartOfYear class="nav-link text-wrap d-inline-block w-100"> toStartOfYear </a> <a href=#tostartofisoyear title=toStartOfISOYear class="nav-link text-wrap d-inline-block w-100"> toStartOfISOYear </a> <a href=#tostartofquarter title=toStartOfQuarter class="nav-link text-wrap d-inline-block w-100"> toStartOfQuarter </a> <a href=#tostartofmonth title=toStartOfMonth class="nav-link text-wrap d-inline-block w-100"> toStartOfMonth </a> <a href=#tomonday title=toMonday class="nav-link text-wrap d-inline-block w-100"> toMonday </a> <a href=#tostartofday title=toStartOfDay class="nav-link text-wrap d-inline-block w-100"> toStartOfDay </a> <a href=#tostartofhour title=toStartOfHour class="nav-link text-wrap d-inline-block w-100"> toStartOfHour </a> <a href=#tostartofminute title=toStartOfMinute class="nav-link text-wrap d-inline-block w-100"> toStartOfMinute </a> <a href=#tostartoffiveminute title=toStartOfFiveMinute class="nav-link text-wrap d-inline-block w-100"> toStartOfFiveMinute </a> <a href=#tostartoftenminutes title=toStartOfTenMinutes class="nav-link text-wrap d-inline-block w-100"> toStartOfTenMinutes </a> <a href=#tostartoffifteenminutes title=toStartOfFifteenMinutes class="nav-link text-wrap d-inline-block w-100"> toStartOfFifteenMinutes </a> <a href=#tostartofinterval-time-or-data-interval-x-unit-time-zone title="toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone])" class="nav-link text-wrap d-inline-block w-100"> toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone]) </a> <a href=#totime title=toTime class="nav-link text-wrap d-inline-block w-100"> toTime </a> <a href=#torelativeyearnum title=toRelativeYearNum class="nav-link text-wrap d-inline-block w-100"> toRelativeYearNum </a> <a href=#torelativequarternum title=toRelativeQuarterNum class="nav-link text-wrap d-inline-block w-100"> toRelativeQuarterNum </a> <a href=#torelativemonthnum title=toRelativeMonthNum class="nav-link text-wrap d-inline-block w-100"> toRelativeMonthNum </a> <a href=#torelativeweeknum title=toRelativeWeekNum class="nav-link text-wrap d-inline-block w-100"> toRelativeWeekNum </a> <a href=#torelativedaynum title=toRelativeDayNum class="nav-link text-wrap d-inline-block w-100"> toRelativeDayNum </a> <a href=#torelativehournum title=toRelativeHourNum class="nav-link text-wrap d-inline-block w-100"> toRelativeHourNum </a> <a href=#torelativeminutenum title=toRelativeMinuteNum class="nav-link text-wrap d-inline-block w-100"> toRelativeMinuteNum </a> <a href=#torelativesecondnum title=toRelativeSecondNum class="nav-link text-wrap d-inline-block w-100"> toRelativeSecondNum </a> <a href=#toisoyear title=toISOYear class="nav-link text-wrap d-inline-block w-100"> toISOYear </a> <a href=#toisoweek title=toISOWeek class="nav-link text-wrap d-inline-block w-100"> toISOWeek </a> <a href=#now title=now class="nav-link text-wrap d-inline-block w-100"> now </a> <a href=#today title=today class="nav-link text-wrap d-inline-block w-100"> today </a> <a href=#yesterday title=yesterday class="nav-link text-wrap d-inline-block w-100"> yesterday </a> <a href=#timeslot title=timeSlot class="nav-link text-wrap d-inline-block w-100"> timeSlot </a> <a href=#toyyyymm title=toYYYYMM class="nav-link text-wrap d-inline-block w-100"> toYYYYMM </a> <a href=#toyyyymmdd title=toYYYYMMDD class="nav-link text-wrap d-inline-block w-100"> toYYYYMMDD </a> <a href=#toyyyymmddhhmmss title=toYYYYMMDDhhmmss class="nav-link text-wrap d-inline-block w-100"> toYYYYMMDDhhmmss </a> <a href=#addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters title="addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters" class="nav-link text-wrap d-inline-block w-100"> addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters </a> <a href=#subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters title="subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters" class="nav-link text-wrap d-inline-block w-100"> subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters </a> <a href=#datediff-unit-t1-t2-timezone title="dateDiff('unit', t1, t2, [timezone])" class="nav-link text-wrap d-inline-block w-100"> dateDiff('unit', t1, t2, [timezone]) </a> <a href=#timeslots-starttime-duration-size title="timeSlots(StartTime, Duration,[, Size])" class="nav-link text-wrap d-inline-block w-100"> timeSlots(StartTime, Duration,[, Size]) </a> <a href=#formatdatetime-time-format-timezone title="formatDateTime(Time, Format[, Timezone])" class="nav-link text-wrap d-inline-block w-100"> formatDateTime(Time, Format[, Timezone]) </a> </nav> <a href=#zi-fu-chuan-han-shu title=字符串函数 class="nav-link text-wrap d-inline-block w-100"> 字符串函数 </a> <nav id=toc-toc-95 class="nav flex-column pl-2"> <a href=#string_functions-empty title=empty class="nav-link text-wrap d-inline-block w-100"> empty </a> <a href=#notempty title=notEmpty class="nav-link text-wrap d-inline-block w-100"> notEmpty </a> <a href=#length title=length class="nav-link text-wrap d-inline-block w-100"> length </a> <a href=#lengthutf8 title=lengthUTF8 class="nav-link text-wrap d-inline-block w-100"> lengthUTF8 </a> <a href=#char-length-char-length title="char_length, CHAR_LENGTH" class="nav-link text-wrap d-inline-block w-100"> char_length, CHAR_LENGTH </a> <a href=#character-length-character-length title="character_length, CHARACTER_LENGTH" class="nav-link text-wrap d-inline-block w-100"> character_length, CHARACTER_LENGTH </a> <a href=#lower-lcase title="lower, lcase" class="nav-link text-wrap d-inline-block w-100"> lower, lcase </a> <a href=#upper-ucase title="upper, ucase" class="nav-link text-wrap d-inline-block w-100"> upper, ucase </a> <a href=#lowerutf8 title=lowerUTF8 class="nav-link text-wrap d-inline-block w-100"> lowerUTF8 </a> <a href=#upperutf8 title=upperUTF8 class="nav-link text-wrap d-inline-block w-100"> upperUTF8 </a> <a href=#isvalidutf8 title=isValidUTF8 class="nav-link text-wrap d-inline-block w-100"> isValidUTF8 </a> <a href=#tovalidutf8 title=toValidUTF8 class="nav-link text-wrap d-inline-block w-100"> toValidUTF8 </a> <nav id=toc-toc-95-12 class="nav flex-column pl-2"> <a href=#shi-li_1 title=示例 class="nav-link text-wrap d-inline-block w-100"> 示例 </a> </nav> <a href=#reverse title=reverse class="nav-link text-wrap d-inline-block w-100"> reverse </a> <a href=#reverseutf8 title=reverseUTF8 class="nav-link text-wrap d-inline-block w-100"> reverseUTF8 </a> <a href=#format-pattern-s0-s1 title="format(pattern, s0, s1, ...)" class="nav-link text-wrap d-inline-block w-100"> format(pattern, s0, s1, ...) </a> <a href=#concat-s1-s2 title="concat(s1, s2, ...)" class="nav-link text-wrap d-inline-block w-100"> concat(s1, s2, ...) </a> <a href=#concatassumeinjective-s1-s2 title="concatAssumeInjective(s1, s2, ...)" class="nav-link text-wrap d-inline-block w-100"> concatAssumeInjective(s1, s2, ...) </a> <a href=#substring-s-offset-length-mid-s-offset-length-substr-s-offset-length title="substring(s, offset, length), mid(s, offset, length), substr(s, offset, length)" class="nav-link text-wrap d-inline-block w-100"> substring(s, offset, length), mid(s, offset, length), substr(s, offset, length) </a> <a href=#substringutf8-s-offset-length title="substringUTF8(s, offset, length)" class="nav-link text-wrap d-inline-block w-100"> substringUTF8(s, offset, length) </a> <a href=#appendtrailingcharifabsent-s-c title="appendTrailingCharIfAbsent(s, c)" class="nav-link text-wrap d-inline-block w-100"> appendTrailingCharIfAbsent(s, c) </a> <a href=#convertcharset-s-from-to title="convertCharset(s, from, to)" class="nav-link text-wrap d-inline-block w-100"> convertCharset(s, from, to) </a> <a href=#base64encode-s title=base64Encode(s) class="nav-link text-wrap d-inline-block w-100"> base64Encode(s) </a> <a href=#base64decode-s title=base64Decode(s) class="nav-link text-wrap d-inline-block w-100"> base64Decode(s) </a> <a href=#trybase64decode-s title=tryBase64Decode(s) class="nav-link text-wrap d-inline-block w-100"> tryBase64Decode(s) </a> <a href=#endswith-s-suffix title="endsWith(s, suffix)" class="nav-link text-wrap d-inline-block w-100"> endsWith(s, suffix) </a> <a href=#startswith-s-prefix title="startsWith(s, prefix)" class="nav-link text-wrap d-inline-block w-100"> startsWith(s, prefix) </a> <a href=#trimleft-s title=trimLeft(s) class="nav-link text-wrap d-inline-block w-100"> trimLeft(s) </a> <a href=#trimright-s title=trimRight(s) class="nav-link text-wrap d-inline-block w-100"> trimRight(s) </a> <a href=#trimboth-s title=trimBoth(s) class="nav-link text-wrap d-inline-block w-100"> trimBoth(s) </a> </nav> <a href=#zi-fu-chuan-sou-suo-han-shu title=字符串搜索函数 class="nav-link text-wrap d-inline-block w-100"> 字符串搜索函数 </a> <nav id=toc-toc-96 class="nav flex-column pl-2"> <a href=#position-haystack-needle-locate-haystack-needle title="position(haystack, needle), locate(haystack, needle)" class="nav-link text-wrap d-inline-block w-100"> position(haystack, needle), locate(haystack, needle) </a> <a href=#positionutf8-haystack-needle title="positionUTF8(haystack, needle)" class="nav-link text-wrap d-inline-block w-100"> positionUTF8(haystack, needle) </a> <a href=#multisearchallpositions-haystack-needle1-needle2-needlen title="multiSearchAllPositions(haystack, [needle1, needle2, ..., needlen])" class="nav-link text-wrap d-inline-block w-100"> multiSearchAllPositions(haystack, [needle1, needle2, ..., needlen]) </a> <a href=#multisearchfirstposition-haystack-needle1-needle2-needlen title="multiSearchFirstPosition(haystack, [needle1, needle2, ..., needlen])" class="nav-link text-wrap d-inline-block w-100"> multiSearchFirstPosition(haystack, [needle1, needle2, ..., needlen]) </a> <a href=#multisearchfirstindex-haystack-needle1-needle2-needlen title="multiSearchFirstIndex(haystack, [needle1, needle2, ..., needlen])" class="nav-link text-wrap d-inline-block w-100"> multiSearchFirstIndex(haystack, [needle1, needle2, ..., needlen]) </a> <a href=#multisearchany-haystack-needle1-needle2-needlen title="multiSearchAny(haystack, [needle1, needle2, ..., needlen])" class="nav-link text-wrap d-inline-block w-100"> multiSearchAny(haystack, [needle1, needle2, ..., needlen]) </a> <a href=#match-haystack-pattern title="match(haystack, pattern)" class="nav-link text-wrap d-inline-block w-100"> match(haystack, pattern) </a> <a href=#multimatchany-haystack-pattern1-pattern2-patternn title="multiMatchAny(haystack, [pattern1, pattern2, ..., patternn])" class="nav-link text-wrap d-inline-block w-100"> multiMatchAny(haystack, [pattern1, pattern2, ..., patternn]) </a> <a href=#multimatchanyindex-haystack-pattern1-pattern2-patternn title="multiMatchAnyIndex(haystack, [pattern1, pattern2, ..., patternn])" class="nav-link text-wrap d-inline-block w-100"> multiMatchAnyIndex(haystack, [pattern1, pattern2, ..., patternn]) </a> <a href=#multifuzzymatchany-haystack-distance-pattern1-pattern2-patternn title="multiFuzzyMatchAny(haystack, distance, [pattern1, pattern2, ..., patternn])" class="nav-link text-wrap d-inline-block w-100"> multiFuzzyMatchAny(haystack, distance, [pattern1, pattern2, ..., patternn]) </a> <a href=#multifuzzymatchanyindex-haystack-distance-pattern1-pattern2-patternn title="multiFuzzyMatchAnyIndex(haystack, distance, [pattern1, pattern2, ..., patternn])" class="nav-link text-wrap d-inline-block w-100"> multiFuzzyMatchAnyIndex(haystack, distance, [pattern1, pattern2, ..., patternn]) </a> <a href=#extract-haystack-pattern title="extract(haystack, pattern)" class="nav-link text-wrap d-inline-block w-100"> extract(haystack, pattern) </a> <a href=#extractall-haystack-pattern title="extractAll(haystack, pattern)" class="nav-link text-wrap d-inline-block w-100"> extractAll(haystack, pattern) </a> <a href=#like-haystack-pattern-haystack-like-pattern-operator title="like(haystack, pattern), haystack LIKE pattern operator" class="nav-link text-wrap d-inline-block w-100"> like(haystack, pattern), haystack LIKE pattern operator </a> <a href=#notlike-haystack-pattern-haystack-not-like-pattern-operator title="notLike(haystack, pattern), haystack NOT LIKE pattern operator" class="nav-link text-wrap d-inline-block w-100"> notLike(haystack, pattern), haystack NOT LIKE pattern operator </a> <a href=#ngramdistance-haystack-needle title="ngramDistance(haystack, needle)" class="nav-link text-wrap d-inline-block w-100"> ngramDistance(haystack, needle) </a> <a href=#ngramsearch-haystack-needle title="ngramSearch(haystack, needle)" class="nav-link text-wrap d-inline-block w-100"> ngramSearch(haystack, needle) </a> </nav> <a href=#zi-fu-chuan-ti-huan-han-shu title=字符串替换函数 class="nav-link text-wrap d-inline-block w-100"> 字符串替换函数 </a> <nav id=toc-toc-97 class="nav flex-column pl-2"> <a href=#replaceone-haystack-pattern-replacement title="replaceOne(haystack, pattern, replacement)" class="nav-link text-wrap d-inline-block w-100"> replaceOne(haystack, pattern, replacement) </a> <a href=#replaceall-haystack-pattern-replacement-replace-haystack-pattern-replacement title="replaceAll(haystack, pattern, replacement), replace(haystack, pattern, replacement)" class="nav-link text-wrap d-inline-block w-100"> replaceAll(haystack, pattern, replacement), replace(haystack, pattern, replacement) </a> <a href=#replaceregexpone-haystack-pattern-replacement title="replaceRegexpOne(haystack, pattern, replacement)" class="nav-link text-wrap d-inline-block w-100"> replaceRegexpOne(haystack, pattern, replacement) </a> <a href=#replaceregexpall-haystack-pattern-replacement title="replaceRegexpAll(haystack, pattern, replacement)" class="nav-link text-wrap d-inline-block w-100"> replaceRegexpAll(haystack, pattern, replacement) </a> <a href=#regexpquotemeta-s title=regexpQuoteMeta(s) class="nav-link text-wrap d-inline-block w-100"> regexpQuoteMeta(s) </a> </nav> <a href=#tiao-jian-han-shu title=条件函数 class="nav-link text-wrap d-inline-block w-100"> 条件函数 </a> <nav id=toc-toc-98 class="nav flex-column pl-2"> <a href=#if-cond-then-else-cond-operator-then-else title="if(cond, then, else), cond ? operator then : else" class="nav-link text-wrap d-inline-block w-100"> if(cond, then, else), cond ? operator then : else </a> <a href=#multiif title=multiIf class="nav-link text-wrap d-inline-block w-100"> multiIf </a> </nav> <a href=#shu-xue-han-shu title=数学函数 class="nav-link text-wrap d-inline-block w-100"> 数学函数 </a> <nav id=toc-toc-99 class="nav flex-column pl-2"> <a href=#e title=e() class="nav-link text-wrap d-inline-block w-100"> e() </a> <a href=#pi title=pi() class="nav-link text-wrap d-inline-block w-100"> pi() </a> <a href=#exp-x title=exp(x) class="nav-link text-wrap d-inline-block w-100"> exp(x) </a> <a href=#log-x-ln-x title="log(x), ln(x)" class="nav-link text-wrap d-inline-block w-100"> log(x), ln(x) </a> <a href=#exp2-x title=exp2(x) class="nav-link text-wrap d-inline-block w-100"> exp2(x) </a> <a href=#log2-x title=log2(x) class="nav-link text-wrap d-inline-block w-100"> log2(x) </a> <a href=#exp10-x title=exp10(x) class="nav-link text-wrap d-inline-block w-100"> exp10(x) </a> <a href=#log10-x title=log10(x) class="nav-link text-wrap d-inline-block w-100"> log10(x) </a> <a href=#sqrt-x title=sqrt(x) class="nav-link text-wrap d-inline-block w-100"> sqrt(x) </a> <a href=#cbrt-x title=cbrt(x) class="nav-link text-wrap d-inline-block w-100"> cbrt(x) </a> <a href=#erf-x title=erf(x) class="nav-link text-wrap d-inline-block w-100"> erf(x) </a> <a href=#erfc-x title=erfc(x) class="nav-link text-wrap d-inline-block w-100"> erfc(x) </a> <a href=#lgamma-x title=lgamma(x) class="nav-link text-wrap d-inline-block w-100"> lgamma(x) </a> <a href=#tgamma-x title=tgamma(x) class="nav-link text-wrap d-inline-block w-100"> tgamma(x) </a> <a href=#sin-x title=sin(x) class="nav-link text-wrap d-inline-block w-100"> sin(x) </a> <a href=#cos-x title=cos(x) class="nav-link text-wrap d-inline-block w-100"> cos(x) </a> <a href=#tan-x title=tan(x) class="nav-link text-wrap d-inline-block w-100"> tan(x) </a> <a href=#asin-x title=asin(x) class="nav-link text-wrap d-inline-block w-100"> asin(x) </a> <a href=#acos-x title=acos(x) class="nav-link text-wrap d-inline-block w-100"> acos(x) </a> <a href=#atan-x title=atan(x) class="nav-link text-wrap d-inline-block w-100"> atan(x) </a> <a href=#pow-x-y-power-x-y title="pow(x, y), power(x, y)" class="nav-link text-wrap d-inline-block w-100"> pow(x, y), power(x, y) </a> <a href=#intexp2 title=intExp2 class="nav-link text-wrap d-inline-block w-100"> intExp2 </a> <a href=#intexp10 title=intExp10 class="nav-link text-wrap d-inline-block w-100"> intExp10 </a> </nav> <a href=#qu-zheng-han-shu title=取整函数 class="nav-link text-wrap d-inline-block w-100"> 取整函数 </a> <nav id=toc-toc-100 class="nav flex-column pl-2"> <a href=#floor-x-n title="floor(x[, N])" class="nav-link text-wrap d-inline-block w-100"> floor(x[, N]) </a> <a href=#ceil-x-n-ceiling-x-n title="ceil(x[, N]), ceiling(x[, N])" class="nav-link text-wrap d-inline-block w-100"> ceil(x[, N]), ceiling(x[, N]) </a> <a href=#rounding_functions-round title="round(x[, N])" class="nav-link text-wrap d-inline-block w-100"> round(x[, N]) </a> <nav id=toc-toc-100-3 class="nav flex-column pl-2"> <a href=#shi-li_2 title=示例 class="nav-link text-wrap d-inline-block w-100"> 示例 </a> </nav> <a href=#roundtoexp2-num title=roundToExp2(num) class="nav-link text-wrap d-inline-block w-100"> roundToExp2(num) </a> <a href=#roundduration-num title=roundDuration(num) class="nav-link text-wrap d-inline-block w-100"> roundDuration(num) </a> <a href=#roundage-num title=roundAge(num) class="nav-link text-wrap d-inline-block w-100"> roundAge(num) </a> <a href=#rounddown-num-arr title="roundDown(num, arr)" class="nav-link text-wrap d-inline-block w-100"> roundDown(num, arr) </a> </nav> <a href=#shu-zu-han-shu title=数组函数 class="nav-link text-wrap d-inline-block w-100"> 数组函数 </a> <nav id=toc-toc-101 class="nav flex-column pl-2"> <a href=#empty title=empty class="nav-link text-wrap d-inline-block w-100"> empty </a> <a href=#notempty_1 title=notEmpty class="nav-link text-wrap d-inline-block w-100"> notEmpty </a> <a href=#array_functions-length title=length class="nav-link text-wrap d-inline-block w-100"> length </a> <a href=#emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64 title="emptyArrayUInt8, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64" class="nav-link text-wrap d-inline-block w-100"> emptyArrayUInt8, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64 </a> <a href=#emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64 title="emptyArrayInt8, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64" class="nav-link text-wrap d-inline-block w-100"> emptyArrayInt8, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64 </a> <a href=#emptyarrayfloat32-emptyarrayfloat64 title="emptyArrayFloat32, emptyArrayFloat64" class="nav-link text-wrap d-inline-block w-100"> emptyArrayFloat32, emptyArrayFloat64 </a> <a href=#emptyarraydate-emptyarraydatetime title="emptyArrayDate, emptyArrayDateTime" class="nav-link text-wrap d-inline-block w-100"> emptyArrayDate, emptyArrayDateTime </a> <a href=#emptyarraystring title=emptyArrayString class="nav-link text-wrap d-inline-block w-100"> emptyArrayString </a> <a href=#emptyarraytosingle title=emptyArrayToSingle class="nav-link text-wrap d-inline-block w-100"> emptyArrayToSingle </a> <a href=#range-n title=range(N) class="nav-link text-wrap d-inline-block w-100"> range(N) </a> <a href=#array-x1-operator-x1 title="array(x1, ...), operator [x1, ...]" class="nav-link text-wrap d-inline-block w-100"> array(x1, ...), operator [x1, ...] </a> <a href=#arrayconcat title=arrayConcat class="nav-link text-wrap d-inline-block w-100"> arrayConcat </a> <a href=#arrayelement-arr-n-operator-arr-n title="arrayElement(arr, n), operator arr[n]" class="nav-link text-wrap d-inline-block w-100"> arrayElement(arr, n), operator arr[n] </a> <a href=#has-arr-elem title="has(arr, elem)" class="nav-link text-wrap d-inline-block w-100"> has(arr, elem) </a> <a href=#hasall title=hasAll class="nav-link text-wrap d-inline-block w-100"> hasAll </a> <a href=#hasany title=hasAny class="nav-link text-wrap d-inline-block w-100"> hasAny </a> <a href=#indexof-arr-x title="indexOf(arr, x)" class="nav-link text-wrap d-inline-block w-100"> indexOf(arr, x) </a> <a href=#countequal-arr-x title="countEqual(arr, x)" class="nav-link text-wrap d-inline-block w-100"> countEqual(arr, x) </a> <a href=#array_functions-arrayenumerate title=arrayEnumerate(arr) class="nav-link text-wrap d-inline-block w-100"> arrayEnumerate(arr) </a> <a href=#arrayenumerateuniq-arr title="arrayEnumerateUniq(arr, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayEnumerateUniq(arr, ...) </a> <a href=#arraypopback title=arrayPopBack class="nav-link text-wrap d-inline-block w-100"> arrayPopBack </a> <a href=#arraypopfront title=arrayPopFront class="nav-link text-wrap d-inline-block w-100"> arrayPopFront </a> <a href=#arraypushback title=arrayPushBack class="nav-link text-wrap d-inline-block w-100"> arrayPushBack </a> <a href=#arraypushfront title=arrayPushFront class="nav-link text-wrap d-inline-block w-100"> arrayPushFront </a> <a href=#arrayresize title=arrayResize class="nav-link text-wrap d-inline-block w-100"> arrayResize </a> <a href=#arrayslice title=arraySlice class="nav-link text-wrap d-inline-block w-100"> arraySlice </a> <a href=#array_functions-reverse-sort title="arraySort([func,] arr, ...)" class="nav-link text-wrap d-inline-block w-100"> arraySort([func,] arr, ...) </a> <a href=#array_functions-reverse-sort title="arrayReverseSort([func,] arr, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayReverseSort([func,] arr, ...) </a> <a href=#arrayuniq-arr title="arrayUniq(arr, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayUniq(arr, ...) </a> <a href=#array_functions-join title=arrayJoin(arr) class="nav-link text-wrap d-inline-block w-100"> arrayJoin(arr) </a> <a href=#arraydifference-arr title=arrayDifference(arr) class="nav-link text-wrap d-inline-block w-100"> arrayDifference(arr) </a> <a href=#arraydistinct-arr title=arrayDistinct(arr) class="nav-link text-wrap d-inline-block w-100"> arrayDistinct(arr) </a> <a href=#arrayenumeratedense-arr title=arrayEnumerateDense(arr) class="nav-link text-wrap d-inline-block w-100"> arrayEnumerateDense(arr) </a> <a href=#arrayintersect-arr title=arrayIntersect(arr) class="nav-link text-wrap d-inline-block w-100"> arrayIntersect(arr) </a> <a href=#arrayreduce-agg-func-arr1 title="arrayReduce(agg_func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayReduce(agg_func, arr1, ...) </a> <a href=#arrayreverse-arr title=arrayReverse(arr) class="nav-link text-wrap d-inline-block w-100"> arrayReverse(arr) </a> </nav> <a href=#zi-fu-chuan-chai-fen-he-bing-han-shu title=字符串拆分合并函数 class="nav-link text-wrap d-inline-block w-100"> 字符串拆分合并函数 </a> <nav id=toc-toc-102 class="nav flex-column pl-2"> <a href=#splitbychar-separator-s title="splitByChar(separator, s)" class="nav-link text-wrap d-inline-block w-100"> splitByChar(separator, s) </a> <a href=#splitbystring-separator-s title="splitByString(separator, s)" class="nav-link text-wrap d-inline-block w-100"> splitByString(separator, s) </a> <a href=#arraystringconcat-arr-separator title="arrayStringConcat(arr[, separator])" class="nav-link text-wrap d-inline-block w-100"> arrayStringConcat(arr[, separator]) </a> <a href=#alphatokens-s title=alphaTokens(s) class="nav-link text-wrap d-inline-block w-100"> alphaTokens(s) </a> </nav> <a href=#wei-cao-zuo-han-shu title=位操作函数 class="nav-link text-wrap d-inline-block w-100"> 位操作函数 </a> <nav id=toc-toc-103 class="nav flex-column pl-2"> <a href=#bitand-a-b title="bitAnd(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitAnd(a, b) </a> <a href=#bitor-a-b title="bitOr(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitOr(a, b) </a> <a href=#bitxor-a-b title="bitXor(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitXor(a, b) </a> <a href=#bitnot-a title=bitNot(a) class="nav-link text-wrap d-inline-block w-100"> bitNot(a) </a> <a href=#bitshiftleft-a-b title="bitShiftLeft(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitShiftLeft(a, b) </a> <a href=#bitshiftright-a-b title="bitShiftRight(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitShiftRight(a, b) </a> <a href=#bitrotateleft-a-b title="bitRotateLeft(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitRotateLeft(a, b) </a> <a href=#bitrotateright-a-b title="bitRotateRight(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitRotateRight(a, b) </a> <a href=#bittest-a-b title="bitTest(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitTest(a, b) </a> <a href=#bittestall-a-b title="bitTestAll(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitTestAll(a, b) </a> <a href=#bittestany-a-b title="bitTestAny(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitTestAny(a, b) </a> </nav> <a href=#wei-tu-han-shu title=位图函数 class="nav-link text-wrap d-inline-block w-100"> 位图函数 </a> <nav id=toc-toc-104 class="nav flex-column pl-2"> <a href=#bitmapbuild title=bitmapBuild class="nav-link text-wrap d-inline-block w-100"> bitmapBuild </a> <a href=#bitmaptoarray title=bitmapToArray class="nav-link text-wrap d-inline-block w-100"> bitmapToArray </a> <a href=#bitmapsubsetinrange title=bitmapSubsetInRange class="nav-link text-wrap d-inline-block w-100"> bitmapSubsetInRange </a> <a href=#bitmapsubsetlimit title=bitmapSubsetLimit class="nav-link text-wrap d-inline-block w-100"> bitmapSubsetLimit </a> <a href=#bitmapcontains title=bitmapContains class="nav-link text-wrap d-inline-block w-100"> bitmapContains </a> <a href=#bitmaphasany title=bitmapHasAny class="nav-link text-wrap d-inline-block w-100"> bitmapHasAny </a> <a href=#bitmaphasall title=bitmapHasAll class="nav-link text-wrap d-inline-block w-100"> bitmapHasAll </a> <a href=#bitmapand title=bitmapAnd class="nav-link text-wrap d-inline-block w-100"> bitmapAnd </a> <a href=#bitmapor title=bitmapOr class="nav-link text-wrap d-inline-block w-100"> bitmapOr </a> <a href=#bitmapxor title=bitmapXor class="nav-link text-wrap d-inline-block w-100"> bitmapXor </a> <a href=#bitmapandnot title=bitmapAndnot class="nav-link text-wrap d-inline-block w-100"> bitmapAndnot </a> <a href=#bitmapcardinality title=bitmapCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapCardinality </a> <a href=#bitmapmin title=bitmapMin class="nav-link text-wrap d-inline-block w-100"> bitmapMin </a> <a href=#bitmapmax title=bitmapMax class="nav-link text-wrap d-inline-block w-100"> bitmapMax </a> <a href=#bitmapandcardinality title=bitmapAndCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapAndCardinality </a> <a href=#bitmaporcardinality title=bitmapOrCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapOrCardinality </a> <a href=#bitmapxorcardinality title=bitmapXorCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapXorCardinality </a> <a href=#bitmapandnotcardinality title=bitmapAndnotCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapAndnotCardinality </a> </nav> <a href=#hashhan-shu title=Hash函数 class="nav-link text-wrap d-inline-block w-100"> Hash函数 </a> <nav id=toc-toc-105 class="nav flex-column pl-2"> <a href=#halfmd5 title=halfMD5 class="nav-link text-wrap d-inline-block w-100"> halfMD5 </a> <a href=#md5 title=MD5 class="nav-link text-wrap d-inline-block w-100"> MD5 </a> <a href=#siphash64 title=sipHash64 class="nav-link text-wrap d-inline-block w-100"> sipHash64 </a> <a href=#hash_functions-siphash128 title=sipHash128 class="nav-link text-wrap d-inline-block w-100"> sipHash128 </a> <a href=#cityhash64 title=cityHash64 class="nav-link text-wrap d-inline-block w-100"> cityHash64 </a> <a href=#inthash32 title=intHash32 class="nav-link text-wrap d-inline-block w-100"> intHash32 </a> <a href=#inthash64 title=intHash64 class="nav-link text-wrap d-inline-block w-100"> intHash64 </a> <a href=#sha1 title=SHA1 class="nav-link text-wrap d-inline-block w-100"> SHA1 </a> <a href=#sha224 title=SHA224 class="nav-link text-wrap d-inline-block w-100"> SHA224 </a> <a href=#sha256 title=SHA256 class="nav-link text-wrap d-inline-block w-100"> SHA256 </a> <a href=#urlhash-url-n title="URLHash(url[, N])" class="nav-link text-wrap d-inline-block w-100"> URLHash(url[, N]) </a> <a href=#farmhash64 title=farmHash64 class="nav-link text-wrap d-inline-block w-100"> farmHash64 </a> <a href=#hash_functions-javahash title=javaHash class="nav-link text-wrap d-inline-block w-100"> javaHash </a> <a href=#hivehash title=hiveHash class="nav-link text-wrap d-inline-block w-100"> hiveHash </a> <a href=#metrohash64 title=metroHash64 class="nav-link text-wrap d-inline-block w-100"> metroHash64 </a> <a href=#jumpconsistenthash title=jumpConsistentHash class="nav-link text-wrap d-inline-block w-100"> jumpConsistentHash </a> <a href=#murmurhash2-32-murmurhash2-64 title="murmurHash2_32, murmurHash2_64" class="nav-link text-wrap d-inline-block w-100"> murmurHash2_32, murmurHash2_64 </a> <a href=#murmurhash3-32-murmurhash3-64-murmurhash3-128 title="murmurHash3_32, murmurHash3_64, murmurHash3_128" class="nav-link text-wrap d-inline-block w-100"> murmurHash3_32, murmurHash3_64, murmurHash3_128 </a> <a href=#xxhash32-xxhash64 title="xxHash32, xxHash64" class="nav-link text-wrap d-inline-block w-100"> xxHash32, xxHash64 </a> </nav> <a href=#sui-ji-han-shu title=随机函数 class="nav-link text-wrap d-inline-block w-100"> 随机函数 </a> <nav id=toc-toc-106 class="nav flex-column pl-2"> <a href=#rand title=rand class="nav-link text-wrap d-inline-block w-100"> rand </a> <a href=#rand64 title=rand64 class="nav-link text-wrap d-inline-block w-100"> rand64 </a> <a href=#randconstant title=randConstant class="nav-link text-wrap d-inline-block w-100"> randConstant </a> </nav> <a href=#bian-ma-han-shu title=编码函数 class="nav-link text-wrap d-inline-block w-100"> 编码函数 </a> <nav id=toc-toc-107 class="nav flex-column pl-2"> <a href=#hex title=hex class="nav-link text-wrap d-inline-block w-100"> hex </a> <a href=#unhex-str title=unhex(str) class="nav-link text-wrap d-inline-block w-100"> unhex(str) </a> <a href=#uuidstringtonum-str title=UUIDStringToNum(str) class="nav-link text-wrap d-inline-block w-100"> UUIDStringToNum(str) </a> <a href=#uuidnumtostring-str title=UUIDNumToString(str) class="nav-link text-wrap d-inline-block w-100"> UUIDNumToString(str) </a> <a href=#bitmasktolist-num title=bitmaskToList(num) class="nav-link text-wrap d-inline-block w-100"> bitmaskToList(num) </a> <a href=#bitmasktoarray-num title=bitmaskToArray(num) class="nav-link text-wrap d-inline-block w-100"> bitmaskToArray(num) </a> </nav> <a href=#uuidhan-shu title=UUID函数 class="nav-link text-wrap d-inline-block w-100"> UUID函数 </a> <nav id=toc-toc-108 class="nav flex-column pl-2"> <a href=#uuid_function-generate title=generateUUIDv4 class="nav-link text-wrap d-inline-block w-100"> generateUUIDv4 </a> <a href=#touuid-x title="toUUID (x)" class="nav-link text-wrap d-inline-block w-100"> toUUID (x) </a> <a href=#uuidstringtonum title=UUIDStringToNum class="nav-link text-wrap d-inline-block w-100"> UUIDStringToNum </a> <a href=#uuidnumtostring title=UUIDNumToString class="nav-link text-wrap d-inline-block w-100"> UUIDNumToString </a> <a href=#ling-qing-can-yue title=另请参阅 class="nav-link text-wrap d-inline-block w-100"> 另请参阅 </a> </nav> <a href=#urlhan-shu title=URL函数 class="nav-link text-wrap d-inline-block w-100"> URL函数 </a> <nav id=toc-toc-109 class="nav flex-column pl-2"> <a href=#urljie-qu-han-shu title=URL截取函数 class="nav-link text-wrap d-inline-block w-100"> URL截取函数 </a> <nav id=toc-toc-109-1 class="nav flex-column pl-2"> <a href=#protocol title=protocol class="nav-link text-wrap d-inline-block w-100"> protocol </a> <a href=#domain title=domain class="nav-link text-wrap d-inline-block w-100"> domain </a> <a href=#domainwithoutwww title=domainWithoutWWW class="nav-link text-wrap d-inline-block w-100"> domainWithoutWWW </a> <a href=#topleveldomain title=topLevelDomain class="nav-link text-wrap d-inline-block w-100"> topLevelDomain </a> <a href=#firstsignificantsubdomain title=firstSignificantSubdomain class="nav-link text-wrap d-inline-block w-100"> firstSignificantSubdomain </a> <a href=#cuttofirstsignificantsubdomain title=cutToFirstSignificantSubdomain class="nav-link text-wrap d-inline-block w-100"> cutToFirstSignificantSubdomain </a> <a href=#path title=path class="nav-link text-wrap d-inline-block w-100"> path </a> <a href=#pathfull title=pathFull class="nav-link text-wrap d-inline-block w-100"> pathFull </a> <a href=#querystring title=queryString class="nav-link text-wrap d-inline-block w-100"> queryString </a> <a href=#fragment title=fragment class="nav-link text-wrap d-inline-block w-100"> fragment </a> <a href=#querystringandfragment title=queryStringAndFragment class="nav-link text-wrap d-inline-block w-100"> queryStringAndFragment </a> <a href=#extracturlparameter-url-name title="extractURLParameter(URL, name)" class="nav-link text-wrap d-inline-block w-100"> extractURLParameter(URL, name) </a> <a href=#extracturlparameters-url title=extractURLParameters(URL) class="nav-link text-wrap d-inline-block w-100"> extractURLParameters(URL) </a> <a href=#extracturlparameternames-url title=extractURLParameterNames(URL) class="nav-link text-wrap d-inline-block w-100"> extractURLParameterNames(URL) </a> <a href=#urlhierarchy-url title=URLHierarchy(URL) class="nav-link text-wrap d-inline-block w-100"> URLHierarchy(URL) </a> <a href=#urlpathhierarchy-url title=URLPathHierarchy(URL) class="nav-link text-wrap d-inline-block w-100"> URLPathHierarchy(URL) </a> <a href=#decodeurlcomponent-url title=decodeURLComponent(URL) class="nav-link text-wrap d-inline-block w-100"> decodeURLComponent(URL) </a> </nav> <a href=#shan-chu-urlzhong-de-bu-fen-nei-rong title=删除URL中的部分内容 class="nav-link text-wrap d-inline-block w-100"> 删除URL中的部分内容 </a> <nav id=toc-toc-109-2 class="nav flex-column pl-2"> <a href=#cutwww title=cutWWW class="nav-link text-wrap d-inline-block w-100"> cutWWW </a> <a href=#cutquerystring title=cutQueryString class="nav-link text-wrap d-inline-block w-100"> cutQueryString </a> <a href=#cutfragment title=cutFragment class="nav-link text-wrap d-inline-block w-100"> cutFragment </a> <a href=#cutquerystringandfragment title=cutQueryStringAndFragment class="nav-link text-wrap d-inline-block w-100"> cutQueryStringAndFragment </a> <a href=#cuturlparameter-url-name title="cutURLParameter(URL, name)" class="nav-link text-wrap d-inline-block w-100"> cutURLParameter(URL, name) </a> </nav> </nav> <a href=#iphan-shu title=IP函数 class="nav-link text-wrap d-inline-block w-100"> IP函数 </a> <nav id=toc-toc-110 class="nav flex-column pl-2"> <a href=#ipv4numtostring-num title=IPv4NumToString(num) class="nav-link text-wrap d-inline-block w-100"> IPv4NumToString(num) </a> <a href=#ipv4stringtonum-s title=IPv4StringToNum(s) class="nav-link text-wrap d-inline-block w-100"> IPv4StringToNum(s) </a> <a href=#ipv4numtostringclassc-num title=IPv4NumToStringClassC(num) class="nav-link text-wrap d-inline-block w-100"> IPv4NumToStringClassC(num) </a> <nav id=toc-toc-110-3 class="nav flex-column pl-2"> <a href=#ipv6numtostring-x title=IPv6NumToString(x) class="nav-link text-wrap d-inline-block w-100"> IPv6NumToString(x) </a> </nav> <a href=#ipv6stringtonum-s title=IPv6StringToNum(s) class="nav-link text-wrap d-inline-block w-100"> IPv6StringToNum(s) </a> <a href=#ipv4toipv6-x title=IPv4ToIPv6(x) class="nav-link text-wrap d-inline-block w-100"> IPv4ToIPv6(x) </a> <a href=#cutipv6-x-bitstocutforipv6-bitstocutforipv4 title="cutIPv6(x, bitsToCutForIPv6, bitsToCutForIPv4)" class="nav-link text-wrap d-inline-block w-100"> cutIPv6(x, bitsToCutForIPv6, bitsToCutForIPv4) </a> <a href=#ipv4cidrtorange-ipv4-cidr title="IPv4CIDRToRange(ipv4, cidr)," class="nav-link text-wrap d-inline-block w-100"> IPv4CIDRToRange(ipv4, cidr), </a> <a href=#ipv6cidrtorange-ipv6-cidr title="IPv6CIDRToRange(ipv6, cidr)," class="nav-link text-wrap d-inline-block w-100"> IPv6CIDRToRange(ipv6, cidr), </a> <a href=#toipv4-string title=toIPv4(string) class="nav-link text-wrap d-inline-block w-100"> toIPv4(string) </a> <a href=#toipv6-string title=toIPv6(string) class="nav-link text-wrap d-inline-block w-100"> toIPv6(string) </a> </nav> <a href=#jsonhan-shu title=JSON函数 class="nav-link text-wrap d-inline-block w-100"> JSON函数 </a> <nav id=toc-toc-111 class="nav flex-column pl-2"> <a href=#visitparamhas-params-name title="visitParamHas(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamHas(params, name) </a> <a href=#visitparamextractuint-params-name title="visitParamExtractUInt(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractUInt(params, name) </a> <a href=#visitparamextractint-params-name title="visitParamExtractInt(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractInt(params, name) </a> <a href=#visitparamextractfloat-params-name title="visitParamExtractFloat(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractFloat(params, name) </a> <a href=#visitparamextractbool-params-name title="visitParamExtractBool(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractBool(params, name) </a> <a href=#visitparamextractraw-params-name title="visitParamExtractRaw(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractRaw(params, name) </a> <a href=#visitparamextractstring-params-name title="visitParamExtractString(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractString(params, name) </a> <a href=#jsonhas-json-indices-or-keys title="JSONHas(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONHas(json[, indices_or_keys]...) </a> <a href=#jsonlength-json-indices-or-keys title="JSONLength(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONLength(json[, indices_or_keys]...) </a> <a href=#jsontype-json-indices-or-keys title="JSONType(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONType(json[, indices_or_keys]...) </a> <a href=#jsonextractuint-json-indices-or-keys title="JSONExtractUInt(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractUInt(json[, indices_or_keys]...) </a> <a href=#jsonextractint-json-indices-or-keys title="JSONExtractInt(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractInt(json[, indices_or_keys]...) </a> <a href=#jsonextractfloat-json-indices-or-keys title="JSONExtractFloat(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractFloat(json[, indices_or_keys]...) </a> <a href=#jsonextractbool-json-indices-or-keys title="JSONExtractBool(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractBool(json[, indices_or_keys]...) </a> <a href=#jsonextractstring-json-indices-or-keys title="JSONExtractString(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractString(json[, indices_or_keys]...) </a> <a href=#jsonextract-json-indices-or-keys-return-type title="JSONExtract(json[, indices_or_keys...], return_type)" class="nav-link text-wrap d-inline-block w-100"> JSONExtract(json[, indices_or_keys...], return_type) </a> <a href=#jsonextractkeysandvalues-json-indices-or-keys-value-type title="JSONExtractKeysAndValues(json[, indices_or_keys...], value_type)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractKeysAndValues(json[, indices_or_keys...], value_type) </a> <a href=#jsonextractraw-json-indices-or-keys title="JSONExtractRaw(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractRaw(json[, indices_or_keys]...) </a> </nav> <a href=#gao-jie-han-shu title=高阶函数 class="nav-link text-wrap d-inline-block w-100"> 高阶函数 </a> <nav id=toc-toc-112 class="nav flex-column pl-2"> <a href=#yun-suan-fu-lambda-params-expr-han-shu title="-&gt; 运算符, lambda(params, expr) 函数" class="nav-link text-wrap d-inline-block w-100"> -&amp;gt; 运算符, lambda(params, expr) 函数 </a> <nav id=toc-toc-112-1 class="nav flex-column pl-2"> <a href=#arraymap-func-arr1 title="arrayMap(func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayMap(func, arr1, ...) </a> <a href=#arrayfilter-func-arr1 title="arrayFilter(func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayFilter(func, arr1, ...) </a> <a href=#arraycount-func-arr1 title="arrayCount([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayCount([func,] arr1, ...) </a> <a href=#arrayexists-func-arr1 title="arrayExists([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayExists([func,] arr1, ...) </a> <a href=#arrayall-func-arr1 title="arrayAll([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayAll([func,] arr1, ...) </a> <a href=#arraysum-func-arr1 title="arraySum([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arraySum([func,] arr1, ...) </a> <a href=#arrayfirst-func-arr1 title="arrayFirst(func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayFirst(func, arr1, ...) </a> <a href=#arrayfirstindex-func-arr1 title="arrayFirstIndex(func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayFirstIndex(func, arr1, ...) </a> <a href=#arraycumsum-func-arr1 title="arrayCumSum([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayCumSum([func,] arr1, ...) </a> <a href=#arraycumsumnonnegative-arr title=arrayCumSumNonNegative(arr) class="nav-link text-wrap d-inline-block w-100"> arrayCumSumNonNegative(arr) </a> <a href=#arraysort-func-arr1 title="arraySort([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arraySort([func,] arr1, ...) </a> <a href=#arrayreversesort-func-arr1 title="arrayReverseSort([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayReverseSort([func,] arr1, ...) </a> </nav> </nav> <a href=#zi-dian-han-shu title=字典函数 class="nav-link text-wrap d-inline-block w-100"> 字典函数 </a> <nav id=toc-toc-113 class="nav flex-column pl-2"> <a href=#dictgetuint8-dictgetuint16-dictgetuint32-dictgetuint64 title="dictGetUInt8, dictGetUInt16, dictGetUInt32, dictGetUInt64" class="nav-link text-wrap d-inline-block w-100"> dictGetUInt8, dictGetUInt16, dictGetUInt32, dictGetUInt64 </a> <a href=#dictgetint8-dictgetint16-dictgetint32-dictgetint64 title="dictGetInt8, dictGetInt16, dictGetInt32, dictGetInt64" class="nav-link text-wrap d-inline-block w-100"> dictGetInt8, dictGetInt16, dictGetInt32, dictGetInt64 </a> <a href=#dictgetfloat32-dictgetfloat64 title="dictGetFloat32, dictGetFloat64" class="nav-link text-wrap d-inline-block w-100"> dictGetFloat32, dictGetFloat64 </a> <a href=#dictgetdate-dictgetdatetime title="dictGetDate, dictGetDateTime" class="nav-link text-wrap d-inline-block w-100"> dictGetDate, dictGetDateTime </a> <a href=#dictgetuuid title=dictGetUUID class="nav-link text-wrap d-inline-block w-100"> dictGetUUID </a> <a href=#dictgetstring title=dictGetString class="nav-link text-wrap d-inline-block w-100"> dictGetString </a> <a href=#ext_dict_functions_dictGetTOrDefault title=dictGetTOrDefault class="nav-link text-wrap d-inline-block w-100"> dictGetTOrDefault </a> <a href=#dictisin title=dictIsIn class="nav-link text-wrap d-inline-block w-100"> dictIsIn </a> <a href=#dictgethierarchy title=dictGetHierarchy class="nav-link text-wrap d-inline-block w-100"> dictGetHierarchy </a> <a href=#dicthas title=dictHas class="nav-link text-wrap d-inline-block w-100"> dictHas </a> </nav> <a href=#functions-for-working-with-yandex-metrica-dictionaries title="Functions for working with Yandex.Metrica dictionaries" class="nav-link text-wrap d-inline-block w-100"> Functions for working with Yandex.Metrica dictionaries </a> <nav id=toc-toc-114 class="nav flex-column pl-2"> <a href=#multiple-geobases title="Multiple geobases" class="nav-link text-wrap d-inline-block w-100"> Multiple geobases </a> <nav id=toc-toc-114-1 class="nav flex-column pl-2"> <a href=#regiontocity-id-geobase title="regionToCity(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToCity(id[, geobase]) </a> <a href=#regiontoarea-id-geobase title="regionToArea(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToArea(id[, geobase]) </a> <a href=#regiontodistrict-id-geobase title="regionToDistrict(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToDistrict(id[, geobase]) </a> <a href=#regiontocountry-id-geobase title="regionToCountry(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToCountry(id[, geobase]) </a> <a href=#regiontocontinent-id-geobase title="regionToContinent(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToContinent(id[, geobase]) </a> <a href=#regiontopopulation-id-geobase title="regionToPopulation(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToPopulation(id[, geobase]) </a> <a href=#regionin-lhs-rhs-geobase title="regionIn(lhs, rhs[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionIn(lhs, rhs[, geobase]) </a> <a href=#regionhierarchy-id-geobase title="regionHierarchy(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionHierarchy(id[, geobase]) </a> <a href=#regiontoname-id-lang title="regionToName(id[, lang])" class="nav-link text-wrap d-inline-block w-100"> regionToName(id[, lang]) </a> </nav> </nav> <a href=#inyun-suan-fu-xiang-guan-han-shu title=IN运算符相关函数 class="nav-link text-wrap d-inline-block w-100"> IN运算符相关函数 </a> <nav id=toc-toc-115 class="nav flex-column pl-2"> <a href=#in-notin-globalin-globalnotin title="in, notIn, globalIn, globalNotIn" class="nav-link text-wrap d-inline-block w-100"> in, notIn, globalIn, globalNotIn </a> <a href=#tuple-x-y-operator-x-y title="tuple(x, y, ...), operator (x, y, ...)" class="nav-link text-wrap d-inline-block w-100"> tuple(x, y, ...), operator (x, y, ...) </a> <a href=#tupleelement-tuple-n-operator-x-n title="tupleElement(tuple, n), operator x.N" class="nav-link text-wrap d-inline-block w-100"> tupleElement(tuple, n), operator x.N </a> </nav> <a href=#functions_arrayjoin title=arrayJoin函数 class="nav-link text-wrap d-inline-block w-100"> arrayJoin函数 </a> <a href=#geohan-shu title=GEO函数 class="nav-link text-wrap d-inline-block w-100"> GEO函数 </a> <nav id=toc-toc-117 class="nav flex-column pl-2"> <a href=#greatcircledistance title=greatCircleDistance class="nav-link text-wrap d-inline-block w-100"> greatCircleDistance </a> <a href=#pointinellipses title=pointInEllipses class="nav-link text-wrap d-inline-block w-100"> pointInEllipses </a> <a href=#pointinpolygon title=pointInPolygon class="nav-link text-wrap d-inline-block w-100"> pointInPolygon </a> <a href=#geohashencode title=geohashEncode class="nav-link text-wrap d-inline-block w-100"> geohashEncode </a> <a href=#geohashdecode title=geohashDecode class="nav-link text-wrap d-inline-block w-100"> geohashDecode </a> <a href=#geotoh3 title=geoToH3 class="nav-link text-wrap d-inline-block w-100"> geoToH3 </a> <a href=#geohashesinbox title=geohashesInBox class="nav-link text-wrap d-inline-block w-100"> geohashesInBox </a> </nav> <a href=#nullablechu-li-han-shu title=Nullable处理函数 class="nav-link text-wrap d-inline-block w-100"> Nullable处理函数 </a> <nav id=toc-toc-118 class="nav flex-column pl-2"> <a href=#isnull title=isNull class="nav-link text-wrap d-inline-block w-100"> isNull </a> <a href=#isnotnull title=isNotNull class="nav-link text-wrap d-inline-block w-100"> isNotNull </a> <a href=#coalesce title=coalesce class="nav-link text-wrap d-inline-block w-100"> coalesce </a> <a href=#ifnull title=ifNull class="nav-link text-wrap d-inline-block w-100"> ifNull </a> <a href=#nullif title=nullIf class="nav-link text-wrap d-inline-block w-100"> nullIf </a> <a href=#assumenotnull title=assumeNotNull class="nav-link text-wrap d-inline-block w-100"> assumeNotNull </a> <a href=#tonullable title=toNullable class="nav-link text-wrap d-inline-block w-100"> toNullable </a> </nav> <a href=#ji-qi-xue-xi-han-shu title=机器学习函数 class="nav-link text-wrap d-inline-block w-100"> 机器学习函数 </a> <nav id=toc-toc-119 class="nav flex-column pl-2"> <a href=#machine_learning_methods-evalmlmethod title="evalMLMethod (prediction)" class="nav-link text-wrap d-inline-block w-100"> evalMLMethod (prediction) </a> <a href=#stochastic-linear-regression title="Stochastic Linear Regression" class="nav-link text-wrap d-inline-block w-100"> Stochastic Linear Regression </a> <a href=#stochastic-logistic-regression title="Stochastic Logistic Regression" class="nav-link text-wrap d-inline-block w-100"> Stochastic Logistic Regression </a> </nav> <a href=#qi-ta-han-shu title=其他函数 class="nav-link text-wrap d-inline-block w-100"> 其他函数 </a> <nav id=toc-toc-120 class="nav flex-column pl-2"> <a href=#hostname title=hostName() class="nav-link text-wrap d-inline-block w-100"> hostName() </a> <a href=#basename title=basename class="nav-link text-wrap d-inline-block w-100"> basename </a> <a href=#visiblewidth-x title=visibleWidth(x) class="nav-link text-wrap d-inline-block w-100"> visibleWidth(x) </a> <a href=#totypename-x title=toTypeName(x) class="nav-link text-wrap d-inline-block w-100"> toTypeName(x) </a> <a href=#function-blocksize title=blockSize() class="nav-link text-wrap d-inline-block w-100"> blockSize() </a> <a href=#materialize-x title=materialize(x) class="nav-link text-wrap d-inline-block w-100"> materialize(x) </a> <a href=#ignore title=ignore(...) class="nav-link text-wrap d-inline-block w-100"> ignore(...) </a> <a href=#sleep-seconds title=sleep(seconds) class="nav-link text-wrap d-inline-block w-100"> sleep(seconds) </a> <a href=#sleepeachrow-seconds title=sleepEachRow(seconds) class="nav-link text-wrap d-inline-block w-100"> sleepEachRow(seconds) </a> <a href=#currentdatabase title=currentDatabase() class="nav-link text-wrap d-inline-block w-100"> currentDatabase() </a> <a href=#isfinite-x title=isFinite(x) class="nav-link text-wrap d-inline-block w-100"> isFinite(x) </a> <a href=#isinfinite-x title=isInfinite(x) class="nav-link text-wrap d-inline-block w-100"> isInfinite(x) </a> <a href=#isnan-x title=isNaN(x) class="nav-link text-wrap d-inline-block w-100"> isNaN(x) </a> <a href=#hascolumnintable-hostname-username-password-database-table-column title="hasColumnInTable(['hostname'[, 'username'[, 'password']],] 'database', 'table', 'column')" class="nav-link text-wrap d-inline-block w-100"> hasColumnInTable(['hostname'[, 'username'[, 'password']],] 'database', 'table', 'column') </a> <a href=#function-bar title=bar class="nav-link text-wrap d-inline-block w-100"> bar </a> <a href=#transform title=transform class="nav-link text-wrap d-inline-block w-100"> transform </a> <a href=#formatreadablesize-x title=formatReadableSize(x) class="nav-link text-wrap d-inline-block w-100"> formatReadableSize(x) </a> <a href=#least-a-b title="least(a, b)" class="nav-link text-wrap d-inline-block w-100"> least(a, b) </a> <a href=#greatest-a-b title="greatest(a, b)" class="nav-link text-wrap d-inline-block w-100"> greatest(a, b) </a> <a href=#uptime title=uptime() class="nav-link text-wrap d-inline-block w-100"> uptime() </a> <a href=#version title=version() class="nav-link text-wrap d-inline-block w-100"> version() </a> <a href=#timezone title=timezone() class="nav-link text-wrap d-inline-block w-100"> timezone() </a> <a href=#blocknumber title=blockNumber class="nav-link text-wrap d-inline-block w-100"> blockNumber </a> <a href=#function-rownumberinblock title=rowNumberInBlock class="nav-link text-wrap d-inline-block w-100"> rowNumberInBlock </a> <a href=#rownumberinallblocks title=rowNumberInAllBlocks() class="nav-link text-wrap d-inline-block w-100"> rowNumberInAllBlocks() </a> <a href=#other_functions-runningdifference title=runningDifference(x) class="nav-link text-wrap d-inline-block w-100"> runningDifference(x) </a> <a href=#runningdifferencestartingwithfirstvalue title=runningDifferenceStartingWithFirstValue class="nav-link text-wrap d-inline-block w-100"> runningDifferenceStartingWithFirstValue </a> <a href=#macnumtostring-num title=MACNumToString(num) class="nav-link text-wrap d-inline-block w-100"> MACNumToString(num) </a> <a href=#macstringtonum-s title=MACStringToNum(s) class="nav-link text-wrap d-inline-block w-100"> MACStringToNum(s) </a> <a href=#macstringtooui-s title=MACStringToOUI(s) class="nav-link text-wrap d-inline-block w-100"> MACStringToOUI(s) </a> <a href=#getsizeofenumtype title=getSizeOfEnumType class="nav-link text-wrap d-inline-block w-100"> getSizeOfEnumType </a> <a href=#tocolumntypename title=toColumnTypeName class="nav-link text-wrap d-inline-block w-100"> toColumnTypeName </a> <a href=#dumpcolumnstructure title=dumpColumnStructure class="nav-link text-wrap d-inline-block w-100"> dumpColumnStructure </a> <a href=#defaultvalueofargumenttype title=defaultValueOfArgumentType class="nav-link text-wrap d-inline-block w-100"> defaultValueOfArgumentType </a> <a href=#indexhint title=indexHint class="nav-link text-wrap d-inline-block w-100"> indexHint </a> <a href=#replicate title=replicate class="nav-link text-wrap d-inline-block w-100"> replicate </a> <a href=#filesystemavailable title=filesystemAvailable class="nav-link text-wrap d-inline-block w-100"> filesystemAvailable </a> <a href=#filesystemcapacity title=filesystemCapacity class="nav-link text-wrap d-inline-block w-100"> filesystemCapacity </a> <a href=#function-finalizeaggregation title=finalizeAggregation class="nav-link text-wrap d-inline-block w-100"> finalizeAggregation </a> <a href=#function-runningaccumulate title=runningAccumulate class="nav-link text-wrap d-inline-block w-100"> runningAccumulate </a> <a href=#joinget-join-storage-table-name-get-column-join-key title="joinGet('join_storage_table_name', 'get_column', join_key)" class="nav-link text-wrap d-inline-block w-100"> joinGet('join_storage_table_name', 'get_column', join_key) </a> <a href=#modelevaluate-model-name title="modelEvaluate(model_name, ...)" class="nav-link text-wrap d-inline-block w-100"> modelEvaluate(model_name, ...) </a> <a href=#throwif-x title=throwIf(x) class="nav-link text-wrap d-inline-block w-100"> throwIf(x) </a> </nav> <a href=#aggregate_functions title="Aggregate functions" class="nav-link text-wrap d-inline-block w-100"> Aggregate functions </a> <nav id=toc-toc-121 class="nav flex-column pl-2"> <a href=#null-processing title="NULL processing" class="nav-link text-wrap d-inline-block w-100"> NULL processing </a> </nav> <a href=#function-reference title="Function Reference" class="nav-link text-wrap d-inline-block w-100"> Function Reference </a> <nav id=toc-toc-122 class="nav flex-column pl-2"> <a href=#agg_function-count title=count class="nav-link text-wrap d-inline-block w-100"> count </a> <a href=#agg_function-any title=any(x) class="nav-link text-wrap d-inline-block w-100"> any(x) </a> <a href=#anyheavy-x title=anyHeavy(x) class="nav-link text-wrap d-inline-block w-100"> anyHeavy(x) </a> <a href=#anylast-x title=anyLast(x) class="nav-link text-wrap d-inline-block w-100"> anyLast(x) </a> <a href=#groupbitand title=groupBitAnd class="nav-link text-wrap d-inline-block w-100"> groupBitAnd </a> <a href=#groupbitor title=groupBitOr class="nav-link text-wrap d-inline-block w-100"> groupBitOr </a> <a href=#groupbitxor title=groupBitXor class="nav-link text-wrap d-inline-block w-100"> groupBitXor </a> <a href=#groupbitmap title=groupBitmap class="nav-link text-wrap d-inline-block w-100"> groupBitmap </a> <a href=#agg_function-min title=min(x) class="nav-link text-wrap d-inline-block w-100"> min(x) </a> <a href=#agg_function-max title=max(x) class="nav-link text-wrap d-inline-block w-100"> max(x) </a> <a href=#agg_function-argMin title="argMin(arg, val)" class="nav-link text-wrap d-inline-block w-100"> argMin(arg, val) </a> <a href=#agg_function-argMax title="argMax(arg, val)" class="nav-link text-wrap d-inline-block w-100"> argMax(arg, val) </a> <a href=#agg_function-sum title=sum(x) class="nav-link text-wrap d-inline-block w-100"> sum(x) </a> <a href=#sumwithoverflow-x title=sumWithOverflow(x) class="nav-link text-wrap d-inline-block w-100"> sumWithOverflow(x) </a> <a href=#agg_functions-summap title="sumMap(key, value)" class="nav-link text-wrap d-inline-block w-100"> sumMap(key, value) </a> <a href=#skewpop title=skewPop class="nav-link text-wrap d-inline-block w-100"> skewPop </a> <a href=#skewsamp title=skewSamp class="nav-link text-wrap d-inline-block w-100"> skewSamp </a> <a href=#kurtpop title=kurtPop class="nav-link text-wrap d-inline-block w-100"> kurtPop </a> <a href=#kurtsamp title=kurtSamp class="nav-link text-wrap d-inline-block w-100"> kurtSamp </a> <a href=#agg_function-timeseriesgroupsum title="timeSeriesGroupSum(uid, timestamp, value)" class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupSum(uid, timestamp, value) </a> <a href=#agg_function-timeseriesgroupratesum title="timeSeriesGroupRateSum(uid, ts, val)" class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupRateSum(uid, ts, val) </a> <a href=#agg_function-avg title=avg(x) class="nav-link text-wrap d-inline-block w-100"> avg(x) </a> <a href=#agg_function-uniq title=uniq class="nav-link text-wrap d-inline-block w-100"> uniq </a> <a href=#agg_function-uniqcombined title=uniqCombined class="nav-link text-wrap d-inline-block w-100"> uniqCombined </a> <a href=#agg_function-uniqcombined64 title=uniqCombined64 class="nav-link text-wrap d-inline-block w-100"> uniqCombined64 </a> <a href=#agg_function-uniqhll12 title=uniqHLL12 class="nav-link text-wrap d-inline-block w-100"> uniqHLL12 </a> <a href=#agg_function-uniqexact title=uniqExact class="nav-link text-wrap d-inline-block w-100"> uniqExact </a> <a href=#agg_function-grouparray title="groupArray(x), groupArray(max_size)(x)" class="nav-link text-wrap d-inline-block w-100"> groupArray(x), groupArray(max_size)(x) </a> <a href=#grouparrayinsertat-x title=groupArrayInsertAt(x) class="nav-link text-wrap d-inline-block w-100"> groupArrayInsertAt(x) </a> <a href=#agg_function-grouparraymovingsum title=groupArrayMovingSum class="nav-link text-wrap d-inline-block w-100"> groupArrayMovingSum </a> <a href=#agg_function-grouparraymovingavg title=groupArrayMovingAvg class="nav-link text-wrap d-inline-block w-100"> groupArrayMovingAvg </a> <a href=#groupuniqarray-x-groupuniqarray-max-size-x title="groupUniqArray(x), groupUniqArray(max_size)(x)" class="nav-link text-wrap d-inline-block w-100"> groupUniqArray(x), groupUniqArray(max_size)(x) </a> <a href=#agg_function-quantile title=quantile(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantile(level)(x) </a> <a href=#quantiledeterministic-level-x-determinator title="quantileDeterministic(level)(x, determinator)" class="nav-link text-wrap d-inline-block w-100"> quantileDeterministic(level)(x, determinator) </a> <a href=#agg_function-quantiletiming title=quantileTiming class="nav-link text-wrap d-inline-block w-100"> quantileTiming </a> <a href=#quantiletimingweighted-level-x-weight title="quantileTimingWeighted(level)(x, weight)" class="nav-link text-wrap d-inline-block w-100"> quantileTimingWeighted(level)(x, weight) </a> <a href=#quantileexact-level-x title=quantileExact(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantileExact(level)(x) </a> <a href=#quantileexactweighted-level-x-weight title="quantileExactWeighted(level)(x, weight)" class="nav-link text-wrap d-inline-block w-100"> quantileExactWeighted(level)(x, weight) </a> <a href=#quantiletdigest-level-x title=quantileTDigest(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantileTDigest(level)(x) </a> <a href=#median-x title=median(x) class="nav-link text-wrap d-inline-block w-100"> median(x) </a> <a href=#quantiles-level1-level2-x title="quantiles(level1, level2, ...)(x)" class="nav-link text-wrap d-inline-block w-100"> quantiles(level1, level2, ...)(x) </a> <a href=#varsamp-x title=varSamp(x) class="nav-link text-wrap d-inline-block w-100"> varSamp(x) </a> <a href=#varpop-x title=varPop(x) class="nav-link text-wrap d-inline-block w-100"> varPop(x) </a> <a href=#stddevsamp-x title=stddevSamp(x) class="nav-link text-wrap d-inline-block w-100"> stddevSamp(x) </a> <a href=#stddevpop-x title=stddevPop(x) class="nav-link text-wrap d-inline-block w-100"> stddevPop(x) </a> <a href=#topk-n-column title=topK(N)(column) class="nav-link text-wrap d-inline-block w-100"> topK(N)(column) </a> <a href=#covarsamp-x-y title="covarSamp(x, y)" class="nav-link text-wrap d-inline-block w-100"> covarSamp(x, y) </a> <a href=#covarpop-x-y title="covarPop(x, y)" class="nav-link text-wrap d-inline-block w-100"> covarPop(x, y) </a> <a href=#corr-x-y title="corr(x, y)" class="nav-link text-wrap d-inline-block w-100"> corr(x, y) </a> <a href=#simplelinearregression title=simpleLinearRegression class="nav-link text-wrap d-inline-block w-100"> simpleLinearRegression </a> <a href=#agg_functions-stochasticlinearregression title=stochasticLinearRegression class="nav-link text-wrap d-inline-block w-100"> stochasticLinearRegression </a> <nav id=toc-toc-122-51 class="nav flex-column pl-2"> <a href=#agg_functions-stochasticlinearregression-parameters title=Parameters class="nav-link text-wrap d-inline-block w-100"> Parameters </a> <a href=#agg_functions-stochasticlinearregression-usage title=Usage class="nav-link text-wrap d-inline-block w-100"> Usage </a> <a href=#agg_functions-stochasticlinearregression-notes title=Notes class="nav-link text-wrap d-inline-block w-100"> Notes </a> </nav> <a href=#agg_functions-stochasticlogisticregression title=stochasticLogisticRegression class="nav-link text-wrap d-inline-block w-100"> stochasticLogisticRegression </a> <nav id=toc-toc-122-52 class="nav flex-column pl-2"> <a href=#agg_functions-stochasticlogisticregression-parameters title=Parameters class="nav-link text-wrap d-inline-block w-100"> Parameters </a> </nav> <a href=#groupbitmapand title=groupBitmapAnd class="nav-link text-wrap d-inline-block w-100"> groupBitmapAnd </a> <a href=#groupbitmapor title=groupBitmapOr class="nav-link text-wrap d-inline-block w-100"> groupBitmapOr </a> <a href=#groupbitmapxor title=groupBitmapXor class="nav-link text-wrap d-inline-block w-100"> groupBitmapXor </a> </nav> <a href=#aggregate_functions_combinators title="Aggregate function combinators" class="nav-link text-wrap d-inline-block w-100"> Aggregate function combinators </a> <nav id=toc-toc-123 class="nav flex-column pl-2"> <a href=#agg-functions-combinator-if title=-If class="nav-link text-wrap d-inline-block w-100"> -If </a> <a href=#agg-functions-combinator-array title=-Array class="nav-link text-wrap d-inline-block w-100"> -Array </a> <a href=#agg-functions-combinator-state title=-State class="nav-link text-wrap d-inline-block w-100"> -State </a> <a href=#aggregate_functions_combinators_merge title=-Merge class="nav-link text-wrap d-inline-block w-100"> -Merge </a> <a href=#aggregate_functions_combinators_mergestate title=-MergeState class="nav-link text-wrap d-inline-block w-100"> -MergeState </a> <a href=#agg-functions-combinator-foreach title=-ForEach class="nav-link text-wrap d-inline-block w-100"> -ForEach </a> <a href=#agg-functions-combinator-ordefault title=-OrDefault class="nav-link text-wrap d-inline-block w-100"> -OrDefault </a> <a href=#agg-functions-combinator-ornull title=-OrNull class="nav-link text-wrap d-inline-block w-100"> -OrNull </a> <a href=#agg_functions-combinator-resample title=-Resample class="nav-link text-wrap d-inline-block w-100"> -Resample </a> </nav> <a href=#aggregate_functions_parametric title="Parametric aggregate functions" class="nav-link text-wrap d-inline-block w-100"> Parametric aggregate functions </a> <nav id=toc-toc-124 class="nav flex-column pl-2"> <a href=#histogram title=histogram class="nav-link text-wrap d-inline-block w-100"> histogram </a> <a href=#function-sequencematch title="sequenceMatch(pattern)(timestamp, cond1, cond2, ...)" class="nav-link text-wrap d-inline-block w-100"> sequenceMatch(pattern)(timestamp, cond1, cond2, ...) </a> <a href=#function-sequencecount title="sequenceCount(pattern)(time, cond1, cond2, ...)" class="nav-link text-wrap d-inline-block w-100"> sequenceCount(pattern)(time, cond1, cond2, ...) </a> <a href=#windowfunnel-window-timestamp-cond1-cond2-cond3 title="windowFunnel(window)(timestamp, cond1, cond2, cond3, ...)" class="nav-link text-wrap d-inline-block w-100"> windowFunnel(window)(timestamp, cond1, cond2, cond3, ...) </a> <a href=#retention-cond1-cond2 title="retention(cond1, cond2, ...)" class="nav-link text-wrap d-inline-block w-100"> retention(cond1, cond2, ...) </a> <a href=#uniqupto-n-x title=uniqUpTo(N)(x) class="nav-link text-wrap d-inline-block w-100"> uniqUpTo(N)(x) </a> <a href=#summapfiltered-keys-to-keep-keys-values title="sumMapFiltered(keys_to_keep)(keys, values)" class="nav-link text-wrap d-inline-block w-100"> sumMapFiltered(keys_to_keep)(keys, values) </a> </nav> <a href=#table-functions title="Table Functions" class="nav-link text-wrap d-inline-block w-100"> Table Functions </a> <a href=#file title=file class="nav-link text-wrap d-inline-block w-100"> file </a> <a href=#merge_1 title=merge class="nav-link text-wrap d-inline-block w-100"> merge </a> <a href=#numbers title=numbers class="nav-link text-wrap d-inline-block w-100"> numbers </a> <a href=#remote-remotesecure title="remote, remoteSecure" class="nav-link text-wrap d-inline-block w-100"> remote, remoteSecure </a> <a href=#url title=url class="nav-link text-wrap d-inline-block w-100"> url </a> <a href=#mysql_2 title=mysql class="nav-link text-wrap d-inline-block w-100"> mysql </a> <nav id=toc-toc-131 class="nav flex-column pl-2"> <a href=#usage-example_3 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> <a href=#see-also_3 title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#table_function-jdbc title=jdbc class="nav-link text-wrap d-inline-block w-100"> jdbc </a> <a href=#table_functions-odbc title=odbc class="nav-link text-wrap d-inline-block w-100"> odbc </a> <nav id=toc-toc-133 class="nav flex-column pl-2"> <a href=#usage-example_4 title="Usage example" class="nav-link text-wrap d-inline-block w-100"> Usage example </a> <a href=#see-also_4 title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#hdfs title=hdfs class="nav-link text-wrap d-inline-block w-100"> hdfs </a> <a href=#input title=input class="nav-link text-wrap d-inline-block w-100"> input </a> <a href=#dictionaries title=Dictionaries class="nav-link text-wrap d-inline-block w-100"> Dictionaries </a> <a href=#dicts-external_dicts title="External Dictionaries" class="nav-link text-wrap d-inline-block w-100"> External Dictionaries </a> <a href=#dicts-external_dicts_dict title="Configuring an External Dictionary" class="nav-link text-wrap d-inline-block w-100"> Configuring an External Dictionary </a> <a href=#dicts-external_dicts_dict_layout title="Storing Dictionaries in Memory" class="nav-link text-wrap d-inline-block w-100"> Storing Dictionaries in Memory </a> <nav id=toc-toc-139 class="nav flex-column pl-2"> <a href=#ways-to-store-dictionaries-in-memory title="Ways to Store Dictionaries in Memory" class="nav-link text-wrap d-inline-block w-100"> Ways to Store Dictionaries in Memory </a> <nav id=toc-toc-139-1 class="nav flex-column pl-2"> <a href=#flat title=flat class="nav-link text-wrap d-inline-block w-100"> flat </a> <a href=#dicts-external_dicts_dict_layout-hashed title=hashed class="nav-link text-wrap d-inline-block w-100"> hashed </a> <a href=#dicts-external_dicts_dict_layout-sparse_hashed title=sparse_hashed class="nav-link text-wrap d-inline-block w-100"> sparse_hashed </a> <a href=#complex-key-hashed title=complex_key_hashed class="nav-link text-wrap d-inline-block w-100"> complex_key_hashed </a> <a href=#range-hashed title=range_hashed class="nav-link text-wrap d-inline-block w-100"> range_hashed </a> <a href=#cache title=cache class="nav-link text-wrap d-inline-block w-100"> cache </a> <a href=#complex-key-cache title=complex_key_cache class="nav-link text-wrap d-inline-block w-100"> complex_key_cache </a> <a href=#ip-trie title=ip_trie class="nav-link text-wrap d-inline-block w-100"> ip_trie </a> </nav> </nav> <a href=#dictionary-updates title="Dictionary Updates" class="nav-link text-wrap d-inline-block w-100"> Dictionary Updates </a> <a href=#dicts-external_dicts_dict_sources title="Sources of External Dictionaries" class="nav-link text-wrap d-inline-block w-100"> Sources of External Dictionaries </a> <nav id=toc-toc-141 class="nav flex-column pl-2"> <a href=#dicts-external_dicts_dict_sources-local_file title="Local File" class="nav-link text-wrap d-inline-block w-100"> Local File </a> <a href=#dicts-external_dicts_dict_sources-executable title="Executable File" class="nav-link text-wrap d-inline-block w-100"> Executable File </a> <a href=#dicts-external_dicts_dict_sources-http title=HTTP(s) class="nav-link text-wrap d-inline-block w-100"> HTTP(s) </a> <a href=#dicts-external_dicts_dict_sources-odbc title=ODBC class="nav-link text-wrap d-inline-block w-100"> ODBC </a> <nav id=toc-toc-141-4 class="nav flex-column pl-2"> <a href=#known-vulnerability-of-the-odbc-dictionary-functionality title="Known vulnerability of the ODBC dictionary functionality" class="nav-link text-wrap d-inline-block w-100"> Known vulnerability of the ODBC dictionary functionality </a> <a href=#example-of-connecting-postgresql title="Example of Connecting PostgreSQL" class="nav-link text-wrap d-inline-block w-100"> Example of Connecting PostgreSQL </a> <a href=#example-of-connecting-ms-sql-server title="Example of Connecting MS SQL Server" class="nav-link text-wrap d-inline-block w-100"> Example of Connecting MS SQL Server </a> </nav> <a href=#dbms title=DBMS class="nav-link text-wrap d-inline-block w-100"> DBMS </a> <nav id=toc-toc-141-5 class="nav flex-column pl-2"> <a href=#dicts-external_dicts_dict_sources-mysql title=MySQL class="nav-link text-wrap d-inline-block w-100"> MySQL </a> <a href=#dicts-external_dicts_dict_sources-clickhouse title=ClickHouse class="nav-link text-wrap d-inline-block w-100"> ClickHouse </a> <a href=#dicts-external_dicts_dict_sources-mongodb title=MongoDB class="nav-link text-wrap d-inline-block w-100"> MongoDB </a> <a href=#dicts-external_dicts_dict_sources-redis title=Redis class="nav-link text-wrap d-inline-block w-100"> Redis </a> </nav> </nav> <a href=#dictionary-key-and-fields title="Dictionary Key and Fields" class="nav-link text-wrap d-inline-block w-100"> Dictionary Key and Fields </a> <nav id=toc-toc-142 class="nav flex-column pl-2"> <a href=#ext_dict_structure-key title=Key class="nav-link text-wrap d-inline-block w-100"> Key </a> <nav id=toc-toc-142-1 class="nav flex-column pl-2"> <a href=#numeric-key title="Numeric Key" class="nav-link text-wrap d-inline-block w-100"> Numeric Key </a> <a href=#composite-key title="Composite Key" class="nav-link text-wrap d-inline-block w-100"> Composite Key </a> </nav> <a href=#ext_dict_structure-attributes title=Attributes class="nav-link text-wrap d-inline-block w-100"> Attributes </a> </nav> <a href=#internal_dicts title="Internal dictionaries" class="nav-link text-wrap d-inline-block w-100"> Internal dictionaries </a> <a href=#cao-zuo-fu title=操作符 class="nav-link text-wrap d-inline-block w-100"> 操作符 </a> <nav id=toc-toc-144 class="nav flex-column pl-2"> <a href=#xia-biao-yun-suan-fu title=下标运算符 class="nav-link text-wrap d-inline-block w-100"> 下标运算符 </a> <a href=#fu-hao title=负号 class="nav-link text-wrap d-inline-block w-100"> 负号 </a> <a href=#cheng-hao-chu-hao-he-qu-yu title=乘号、除号和取余 class="nav-link text-wrap d-inline-block w-100"> 乘号、除号和取余 </a> <a href=#jia-hao-he-jian-hao title=加号和减号 class="nav-link text-wrap d-inline-block w-100"> 加号和减号 </a> <a href=#guan-xi-yun-suan-fu title=关系运算符 class="nav-link text-wrap d-inline-block w-100"> 关系运算符 </a> <a href=#ji-he-guan-xi-yun-suan-fu title=集合关系运算符 class="nav-link text-wrap d-inline-block w-100"> 集合关系运算符 </a> <a href=#luo-ji-fei title=逻辑非 class="nav-link text-wrap d-inline-block w-100"> 逻辑非 </a> <a href=#luo-ji-yu title=逻辑与 class="nav-link text-wrap d-inline-block w-100"> 逻辑与 </a> <a href=#luo-ji-huo title=逻辑或 class="nav-link text-wrap d-inline-block w-100"> 逻辑或 </a> <a href=#tiao-jian-yun-suan-fu title=条件运算符 class="nav-link text-wrap d-inline-block w-100"> 条件运算符 </a> <a href=#operators-datetime title="Operators for Working with Dates and Times" class="nav-link text-wrap d-inline-block w-100"> Operators for Working with Dates and Times </a> <nav id=toc-toc-144-11 class="nav flex-column pl-2"> <a href=#operator-extract title=EXTRACT class="nav-link text-wrap d-inline-block w-100"> EXTRACT </a> <a href=#operator-interval title=INTERVAL class="nav-link text-wrap d-inline-block w-100"> INTERVAL </a> </nav> <a href=#operator_case title=CASE条件表达式 class="nav-link text-wrap d-inline-block w-100"> CASE条件表达式 </a> <a href=#lian-jie-yun-suan-fu title=连接运算符 class="nav-link text-wrap d-inline-block w-100"> 连接运算符 </a> <a href=#chuang-jian-lambda-han-shu title="创建 Lambda 函数" class="nav-link text-wrap d-inline-block w-100"> 创建 Lambda 函数 </a> <a href=#chuang-jian-shu-zu_1 title=创建数组 class="nav-link text-wrap d-inline-block w-100"> 创建数组 </a> <a href=#chuang-jian-yuan-zu_1 title=创建元组 class="nav-link text-wrap d-inline-block w-100"> 创建元组 </a> <a href=#jie-he-fang-shi title=结合方式 class="nav-link text-wrap d-inline-block w-100"> 结合方式 </a> <a href=#pan-duan-shi-fou-wei-null title="判断是否为 NULL" class="nav-link text-wrap d-inline-block w-100"> 判断是否为 NULL </a> <nav id=toc-toc-144-18 class="nav flex-column pl-2"> <a href=#operator-is-null title="IS NULL" class="nav-link text-wrap d-inline-block w-100"> IS NULL </a> <a href=#is-not-null title="IS NOT NULL" class="nav-link text-wrap d-inline-block w-100"> IS NOT NULL </a> </nav> </nav> <a href=#syntax title=Syntax class="nav-link text-wrap d-inline-block w-100"> Syntax </a> <nav id=toc-toc-145 class="nav flex-column pl-2"> <a href=#spaces title=Spaces class="nav-link text-wrap d-inline-block w-100"> Spaces </a> <a href=#comments title=Comments class="nav-link text-wrap d-inline-block w-100"> Comments </a> <a href=#syntax-keywords title=Keywords class="nav-link text-wrap d-inline-block w-100"> Keywords </a> <a href=#syntax-identifiers title=Identifiers class="nav-link text-wrap d-inline-block w-100"> Identifiers </a> <a href=#literals title=Literals class="nav-link text-wrap d-inline-block w-100"> Literals </a> <nav id=toc-toc-145-5 class="nav flex-column pl-2"> <a href=#numeric title=Numeric class="nav-link text-wrap d-inline-block w-100"> Numeric </a> <a href=#syntax-string-literal title=String class="nav-link text-wrap d-inline-block w-100"> String </a> <a href=#compound title=Compound class="nav-link text-wrap d-inline-block w-100"> Compound </a> <a href=#null-literal title=NULL class="nav-link text-wrap d-inline-block w-100"> NULL </a> </nav> <a href=#functions title=Functions class="nav-link text-wrap d-inline-block w-100"> Functions </a> <a href=#operators title=Operators class="nav-link text-wrap d-inline-block w-100"> Operators </a> <a href=#data-types-and-database-table-engines title="Data Types and Database Table Engines" class="nav-link text-wrap d-inline-block w-100"> Data Types and Database Table Engines </a> <a href=#syntax-expression_aliases title="Expression Aliases" class="nav-link text-wrap d-inline-block w-100"> Expression Aliases </a> <nav id=toc-toc-145-9 class="nav flex-column pl-2"> <a href=#notes-on-usage title="Notes on Usage" class="nav-link text-wrap d-inline-block w-100"> Notes on Usage </a> </nav> <a href=#asterisk title=Asterisk class="nav-link text-wrap d-inline-block w-100"> Asterisk </a> <a href=#syntax-expressions title=Expressions class="nav-link text-wrap d-inline-block w-100"> Expressions </a> </nav> <a href=#operations title=Operations class="nav-link text-wrap d-inline-block w-100"> Operations </a> <a href=#requirements title=Requirements class="nav-link text-wrap d-inline-block w-100"> Requirements </a> <nav id=toc-toc-147 class="nav flex-column pl-2"> <a href=#cpu_1 title=CPU class="nav-link text-wrap d-inline-block w-100"> CPU </a> <a href=#ram title=RAM class="nav-link text-wrap d-inline-block w-100"> RAM </a> <a href=#swap-file title="Swap File" class="nav-link text-wrap d-inline-block w-100"> Swap File </a> <a href=#storage-subsystem title="Storage Subsystem" class="nav-link text-wrap d-inline-block w-100"> Storage Subsystem </a> <a href=#network title=Network class="nav-link text-wrap d-inline-block w-100"> Network </a> <a href=#software title=Software class="nav-link text-wrap d-inline-block w-100"> Software </a> </nav> <a href=#monitoring title=Monitoring class="nav-link text-wrap d-inline-block w-100"> Monitoring </a> <nav id=toc-toc-148 class="nav flex-column pl-2"> <a href=#resource-utilization title="Resource Utilization" class="nav-link text-wrap d-inline-block w-100"> Resource Utilization </a> <a href=#clickhouse-server-metrics title="ClickHouse Server Metrics" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Server Metrics </a> </nav> <a href=#troubleshooting title=Troubleshooting class="nav-link text-wrap d-inline-block w-100"> Troubleshooting </a> <nav id=toc-toc-149 class="nav flex-column pl-2"> <a href=#troubleshooting-installation-errors title=Installation class="nav-link text-wrap d-inline-block w-100"> Installation </a> <nav id=toc-toc-149-1 class="nav flex-column pl-2"> <a href=#you-cannot-get-deb-packages-from-clickhouse-repository-with-apt-get title="You Cannot Get Deb Packages from ClickHouse Repository With apt-get" class="nav-link text-wrap d-inline-block w-100"> You Cannot Get Deb Packages from ClickHouse Repository With apt-get </a> </nav> <a href=#troubleshooting-accepts-no-connections title="Connecting to the Server" class="nav-link text-wrap d-inline-block w-100"> Connecting to the Server </a> <nav id=toc-toc-149-2 class="nav flex-column pl-2"> <a href=#server-is-not-running title="Server Is Not Running" class="nav-link text-wrap d-inline-block w-100"> Server Is Not Running </a> <a href=#configuration-parameters title="Configuration Parameters" class="nav-link text-wrap d-inline-block w-100"> Configuration Parameters </a> </nav> <a href=#troubleshooting-does-not-process-queries title="Query Processing" class="nav-link text-wrap d-inline-block w-100"> Query Processing </a> <a href=#troubleshooting-too-slow title="Efficiency of Query Processing" class="nav-link text-wrap d-inline-block w-100"> Efficiency of Query Processing </a> </nav> <a href=#usage-recommendations title="Usage Recommendations" class="nav-link text-wrap d-inline-block w-100"> Usage Recommendations </a> <nav id=toc-toc-150 class="nav flex-column pl-2"> <a href=#cpu_2 title=CPU class="nav-link text-wrap d-inline-block w-100"> CPU </a> <a href=#hyper-threading title=Hyper-threading class="nav-link text-wrap d-inline-block w-100"> Hyper-threading </a> <a href=#turbo-boost title="Turbo Boost" class="nav-link text-wrap d-inline-block w-100"> Turbo Boost </a> <a href=#cpu-scaling-governor title="CPU Scaling Governor" class="nav-link text-wrap d-inline-block w-100"> CPU Scaling Governor </a> <a href=#cpu-limitations title="CPU Limitations" class="nav-link text-wrap d-inline-block w-100"> CPU Limitations </a> <a href=#ram_1 title=RAM class="nav-link text-wrap d-inline-block w-100"> RAM </a> <a href=#swap-file_1 title="Swap File" class="nav-link text-wrap d-inline-block w-100"> Swap File </a> <a href=#huge-pages title="Huge Pages" class="nav-link text-wrap d-inline-block w-100"> Huge Pages </a> <a href=#storage-subsystem_1 title="Storage Subsystem" class="nav-link text-wrap d-inline-block w-100"> Storage Subsystem </a> <a href=#raid title=RAID class="nav-link text-wrap d-inline-block w-100"> RAID </a> <a href=#file-system title="File System" class="nav-link text-wrap d-inline-block w-100"> File System </a> <a href=#linux-kernel title="Linux Kernel" class="nav-link text-wrap d-inline-block w-100"> Linux Kernel </a> <a href=#network_1 title=Network class="nav-link text-wrap d-inline-block w-100"> Network </a> <a href=#zookeeper title=ZooKeeper class="nav-link text-wrap d-inline-block w-100"> ZooKeeper </a> </nav> <a href=#clickhouse-update title="ClickHouse Update" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Update </a> <a href=#access-rights title="Access Rights" class="nav-link text-wrap d-inline-block w-100"> Access Rights </a> <a href=#data-backup title="Data Backup" class="nav-link text-wrap d-inline-block w-100"> Data Backup </a> <nav id=toc-toc-153 class="nav flex-column pl-2"> <a href=#duplicating-source-data-somewhere-else title="Duplicating Source Data Somewhere Else" class="nav-link text-wrap d-inline-block w-100"> Duplicating Source Data Somewhere Else </a> <a href=#filesystem-snapshots title="Filesystem Snapshots" class="nav-link text-wrap d-inline-block w-100"> Filesystem Snapshots </a> <a href=#clickhouse-copier title=clickhouse-copier class="nav-link text-wrap d-inline-block w-100"> clickhouse-copier </a> <a href=#manipulations-with-parts title="Manipulations with Parts" class="nav-link text-wrap d-inline-block w-100"> Manipulations with Parts </a> </nav> <a href=#configuration_files title="Configuration Files" class="nav-link text-wrap d-inline-block w-100"> Configuration Files </a> <a href=#quotas title=Quotas class="nav-link text-wrap d-inline-block w-100"> Quotas </a> <a href=#system-tables title="System tables" class="nav-link text-wrap d-inline-block w-100"> System tables </a> <nav id=toc-toc-156 class="nav flex-column pl-2"> <a href=#system_tables-asynchronous_metrics title=system.asynchronous_metrics class="nav-link text-wrap d-inline-block w-100"> system.asynchronous_metrics </a> <a href=#system-clusters title=system.clusters class="nav-link text-wrap d-inline-block w-100"> system.clusters </a> <a href=#system-columns title=system.columns class="nav-link text-wrap d-inline-block w-100"> system.columns </a> <a href=#system_contributors title=system.contributors class="nav-link text-wrap d-inline-block w-100"> system.contributors </a> <a href=#system-databases title=system.databases class="nav-link text-wrap d-inline-block w-100"> system.databases </a> <a href=#system_tables-detached_parts title=system.detached_parts class="nav-link text-wrap d-inline-block w-100"> system.detached_parts </a> <a href=#system-dictionaries title=system.dictionaries class="nav-link text-wrap d-inline-block w-100"> system.dictionaries </a> <a href=#system_tables-events title=system.events class="nav-link text-wrap d-inline-block w-100"> system.events </a> <a href=#system-functions title=system.functions class="nav-link text-wrap d-inline-block w-100"> system.functions </a> <a href=#system-graphite-retentions title=system.graphite_retentions class="nav-link text-wrap d-inline-block w-100"> system.graphite_retentions </a> <a href=#system-merges title=system.merges class="nav-link text-wrap d-inline-block w-100"> system.merges </a> <a href=#system_tables-metrics title=system.metrics class="nav-link text-wrap d-inline-block w-100"> system.metrics </a> <a href=#system-numbers title=system.numbers class="nav-link text-wrap d-inline-block w-100"> system.numbers </a> <a href=#system-numbers-mt title=system.numbers_mt class="nav-link text-wrap d-inline-block w-100"> system.numbers_mt </a> <a href=#system-one title=system.one class="nav-link text-wrap d-inline-block w-100"> system.one </a> <a href=#system_tables-parts title=system.parts class="nav-link text-wrap d-inline-block w-100"> system.parts </a> <a href=#system_tables-part-log title=system.part_log class="nav-link text-wrap d-inline-block w-100"> system.part_log </a> <a href=#system_tables-processes title=system.processes class="nav-link text-wrap d-inline-block w-100"> system.processes </a> <a href=#system_tables-query-log title=system.query_log class="nav-link text-wrap d-inline-block w-100"> system.query_log </a> <a href=#system_tables-replicas title=system.replicas class="nav-link text-wrap d-inline-block w-100"> system.replicas </a> <a href=#system-settings title=system.settings class="nav-link text-wrap d-inline-block w-100"> system.settings </a> <a href=#system-tables_1 title=system.tables class="nav-link text-wrap d-inline-block w-100"> system.tables </a> <a href=#system-zookeeper title=system.zookeeper class="nav-link text-wrap d-inline-block w-100"> system.zookeeper </a> <a href=#system_tables-mutations title=system.mutations class="nav-link text-wrap d-inline-block w-100"> system.mutations </a> <a href=#system_tables-disks title=system.disks class="nav-link text-wrap d-inline-block w-100"> system.disks </a> <a href=#system_tables-storage_policies title=system.storage_policies class="nav-link text-wrap d-inline-block w-100"> system.storage_policies </a> </nav> <a href=#server_settings title="Server configuration parameters" class="nav-link text-wrap d-inline-block w-100"> Server configuration parameters </a> <a href=#server-settings title="Server settings" class="nav-link text-wrap d-inline-block w-100"> Server settings </a> <nav id=toc-toc-158 class="nav flex-column pl-2"> <a href=#builtin-dictionaries-reload-interval title=builtin_dictionaries_reload_interval class="nav-link text-wrap d-inline-block w-100"> builtin_dictionaries_reload_interval </a> <a href=#compression title=compression class="nav-link text-wrap d-inline-block w-100"> compression </a> <a href=#default-database title=default_database class="nav-link text-wrap d-inline-block w-100"> default_database </a> <a href=#default-profile title=default_profile class="nav-link text-wrap d-inline-block w-100"> default_profile </a> <a href=#server_settings-dictionaries_config title=dictionaries_config class="nav-link text-wrap d-inline-block w-100"> dictionaries_config </a> <a href=#server_settings-dictionaries_lazy_load title=dictionaries_lazy_load class="nav-link text-wrap d-inline-block w-100"> dictionaries_lazy_load </a> <a href=#server_settings-format_schema_path title=format_schema_path class="nav-link text-wrap d-inline-block w-100"> format_schema_path </a> <a href=#server_settings-graphite title=graphite class="nav-link text-wrap d-inline-block w-100"> graphite </a> <a href=#server_settings-graphite_rollup title=graphite_rollup class="nav-link text-wrap d-inline-block w-100"> graphite_rollup </a> <a href=#http-port-https-port title=http_port/https_port class="nav-link text-wrap d-inline-block w-100"> http_port/https_port </a> <a href=#http-server-default-response title=http_server_default_response class="nav-link text-wrap d-inline-block w-100"> http_server_default_response </a> <a href=#server_settings-include_from title=include_from class="nav-link text-wrap d-inline-block w-100"> include_from </a> <a href=#interserver-http-port title=interserver_http_port class="nav-link text-wrap d-inline-block w-100"> interserver_http_port </a> <a href=#interserver-http-host title=interserver_http_host class="nav-link text-wrap d-inline-block w-100"> interserver_http_host </a> <a href=#server-settings-interserver_http_credentials title=interserver_http_credentials class="nav-link text-wrap d-inline-block w-100"> interserver_http_credentials </a> <a href=#keep-alive-timeout title=keep_alive_timeout class="nav-link text-wrap d-inline-block w-100"> keep_alive_timeout </a> <a href=#server_settings-listen_host title=listen_host class="nav-link text-wrap d-inline-block w-100"> listen_host </a> <a href=#server_settings-logger title=logger class="nav-link text-wrap d-inline-block w-100"> logger </a> <a href=#macros title=macros class="nav-link text-wrap d-inline-block w-100"> macros </a> <a href=#server-mark-cache-size title=mark_cache_size class="nav-link text-wrap d-inline-block w-100"> mark_cache_size </a> <a href=#max-concurrent-queries title=max_concurrent_queries class="nav-link text-wrap d-inline-block w-100"> max_concurrent_queries </a> <a href=#max-connections title=max_connections class="nav-link text-wrap d-inline-block w-100"> max_connections </a> <a href=#max-open-files title=max_open_files class="nav-link text-wrap d-inline-block w-100"> max_open_files </a> <a href=#max-table-size-to-drop title=max_table_size_to_drop class="nav-link text-wrap d-inline-block w-100"> max_table_size_to_drop </a> <a href=#server_settings-merge_tree title=merge_tree class="nav-link text-wrap d-inline-block w-100"> merge_tree </a> <a href=#server_settings-openssl title=openSSL class="nav-link text-wrap d-inline-block w-100"> openSSL </a> <a href=#server_settings-part-log title=part_log class="nav-link text-wrap d-inline-block w-100"> part_log </a> <a href=#server_settings-path title=path class="nav-link text-wrap d-inline-block w-100"> path </a> <a href=#server_settings-query-log title=query_log class="nav-link text-wrap d-inline-block w-100"> query_log </a> <a href=#query-masking-rules title=query_masking_rules class="nav-link text-wrap d-inline-block w-100"> query_masking_rules </a> <a href=#server_settings_remote_servers title=remote_servers class="nav-link text-wrap d-inline-block w-100"> remote_servers </a> <a href=#server_settings-timezone title=timezone class="nav-link text-wrap d-inline-block w-100"> timezone </a> <a href=#server_settings-tcp_port title=tcp_port class="nav-link text-wrap d-inline-block w-100"> tcp_port </a> <a href=#server_settings-tcp_port_secure title=tcp_port_secure class="nav-link text-wrap d-inline-block w-100"> tcp_port_secure </a> <a href=#tmp-path title=tmp_path class="nav-link text-wrap d-inline-block w-100"> tmp_path </a> <a href=#server-settings-uncompressed_cache_size title=uncompressed_cache_size class="nav-link text-wrap d-inline-block w-100"> uncompressed_cache_size </a> <a href=#server_settings-user_files_path title=user_files_path class="nav-link text-wrap d-inline-block w-100"> user_files_path </a> <a href=#users-config title=users_config class="nav-link text-wrap d-inline-block w-100"> users_config </a> <a href=#server-settings_zookeeper title=zookeeper class="nav-link text-wrap d-inline-block w-100"> zookeeper </a> <a href=#server-settings-use_minimalistic_part_header_in_zookeeper title=use_minimalistic_part_header_in_zookeeper class="nav-link text-wrap d-inline-block w-100"> use_minimalistic_part_header_in_zookeeper </a> <a href=#server-settings-disable_internal_dns_cache title=disable_internal_dns_cache class="nav-link text-wrap d-inline-block w-100"> disable_internal_dns_cache </a> <a href=#server-settings-dns_cache_update_period title=dns_cache_update_period class="nav-link text-wrap d-inline-block w-100"> dns_cache_update_period </a> </nav> <a href=#settings title=Settings class="nav-link text-wrap d-inline-block w-100"> Settings </a> <a href=#permissions_for_queries title="Permissions for queries" class="nav-link text-wrap d-inline-block w-100"> Permissions for queries </a> <nav id=toc-toc-160 class="nav flex-column pl-2"> <a href=#settings_readonly title=readonly class="nav-link text-wrap d-inline-block w-100"> readonly </a> <a href=#settings_allow_ddl title=allow_ddl class="nav-link text-wrap d-inline-block w-100"> allow_ddl </a> </nav> <a href=#restrictions-on-query-complexity title="Restrictions on query complexity" class="nav-link text-wrap d-inline-block w-100"> Restrictions on query complexity </a> <nav id=toc-toc-161 class="nav flex-column pl-2"> <a href=#query_complexity_readonly title=readonly class="nav-link text-wrap d-inline-block w-100"> readonly </a> <a href=#settings_max_memory_usage title=max_memory_usage class="nav-link text-wrap d-inline-block w-100"> max_memory_usage </a> <a href=#max-memory-usage-for-user title=max_memory_usage_for_user class="nav-link text-wrap d-inline-block w-100"> max_memory_usage_for_user </a> <a href=#max-memory-usage-for-all-queries title=max_memory_usage_for_all_queries class="nav-link text-wrap d-inline-block w-100"> max_memory_usage_for_all_queries </a> <a href=#max-rows-to-read title=max_rows_to_read class="nav-link text-wrap d-inline-block w-100"> max_rows_to_read </a> <a href=#max-bytes-to-read title=max_bytes_to_read class="nav-link text-wrap d-inline-block w-100"> max_bytes_to_read </a> <a href=#read-overflow-mode title=read_overflow_mode class="nav-link text-wrap d-inline-block w-100"> read_overflow_mode </a> <a href=#max-rows-to-group-by title=max_rows_to_group_by class="nav-link text-wrap d-inline-block w-100"> max_rows_to_group_by </a> <a href=#group-by-overflow-mode title=group_by_overflow_mode class="nav-link text-wrap d-inline-block w-100"> group_by_overflow_mode </a> <a href=#max-rows-to-sort title=max_rows_to_sort class="nav-link text-wrap d-inline-block w-100"> max_rows_to_sort </a> <a href=#max-bytes-to-sort title=max_bytes_to_sort class="nav-link text-wrap d-inline-block w-100"> max_bytes_to_sort </a> <a href=#sort-overflow-mode title=sort_overflow_mode class="nav-link text-wrap d-inline-block w-100"> sort_overflow_mode </a> <a href=#max-result-rows title=max_result_rows class="nav-link text-wrap d-inline-block w-100"> max_result_rows </a> <a href=#max-result-bytes title=max_result_bytes class="nav-link text-wrap d-inline-block w-100"> max_result_bytes </a> <a href=#result-overflow-mode title=result_overflow_mode class="nav-link text-wrap d-inline-block w-100"> result_overflow_mode </a> <a href=#max-execution-time title=max_execution_time class="nav-link text-wrap d-inline-block w-100"> max_execution_time </a> <a href=#timeout-overflow-mode title=timeout_overflow_mode class="nav-link text-wrap d-inline-block w-100"> timeout_overflow_mode </a> <a href=#min-execution-speed title=min_execution_speed class="nav-link text-wrap d-inline-block w-100"> min_execution_speed </a> <a href=#timeout-before-checking-execution-speed title=timeout_before_checking_execution_speed class="nav-link text-wrap d-inline-block w-100"> timeout_before_checking_execution_speed </a> <a href=#max-columns-to-read title=max_columns_to_read class="nav-link text-wrap d-inline-block w-100"> max_columns_to_read </a> <a href=#max-temporary-columns title=max_temporary_columns class="nav-link text-wrap d-inline-block w-100"> max_temporary_columns </a> <a href=#max-temporary-non-const-columns title=max_temporary_non_const_columns class="nav-link text-wrap d-inline-block w-100"> max_temporary_non_const_columns </a> <a href=#max-subquery-depth title=max_subquery_depth class="nav-link text-wrap d-inline-block w-100"> max_subquery_depth </a> <a href=#max-pipeline-depth title=max_pipeline_depth class="nav-link text-wrap d-inline-block w-100"> max_pipeline_depth </a> <a href=#max-ast-depth title=max_ast_depth class="nav-link text-wrap d-inline-block w-100"> max_ast_depth </a> <a href=#max-ast-elements title=max_ast_elements class="nav-link text-wrap d-inline-block w-100"> max_ast_elements </a> <a href=#max-rows-in-set title=max_rows_in_set class="nav-link text-wrap d-inline-block w-100"> max_rows_in_set </a> <a href=#max-bytes-in-set title=max_bytes_in_set class="nav-link text-wrap d-inline-block w-100"> max_bytes_in_set </a> <a href=#set-overflow-mode title=set_overflow_mode class="nav-link text-wrap d-inline-block w-100"> set_overflow_mode </a> <a href=#max-rows-in-distinct title=max_rows_in_distinct class="nav-link text-wrap d-inline-block w-100"> max_rows_in_distinct </a> <a href=#max-bytes-in-distinct title=max_bytes_in_distinct class="nav-link text-wrap d-inline-block w-100"> max_bytes_in_distinct </a> <a href=#distinct-overflow-mode title=distinct_overflow_mode class="nav-link text-wrap d-inline-block w-100"> distinct_overflow_mode </a> <a href=#max-rows-to-transfer title=max_rows_to_transfer class="nav-link text-wrap d-inline-block w-100"> max_rows_to_transfer </a> <a href=#max-bytes-to-transfer title=max_bytes_to_transfer class="nav-link text-wrap d-inline-block w-100"> max_bytes_to_transfer </a> <a href=#transfer-overflow-mode title=transfer_overflow_mode class="nav-link text-wrap d-inline-block w-100"> transfer_overflow_mode </a> </nav> <a href=#settings_1 title=Settings class="nav-link text-wrap d-inline-block w-100"> Settings </a> <nav id=toc-toc-162 class="nav flex-column pl-2"> <a href=#distributed-product-mode title=distributed_product_mode class="nav-link text-wrap d-inline-block w-100"> distributed_product_mode </a> <a href=#enable-optimize-predicate-expression title=enable_optimize_predicate_expression class="nav-link text-wrap d-inline-block w-100"> enable_optimize_predicate_expression </a> <a href=#settings-fallback_to_stale_replicas_for_distributed_queries title=fallback_to_stale_replicas_for_distributed_queries class="nav-link text-wrap d-inline-block w-100"> fallback_to_stale_replicas_for_distributed_queries </a> <a href=#settings-force_index_by_date title=force_index_by_date class="nav-link text-wrap d-inline-block w-100"> force_index_by_date </a> <a href=#force-primary-key title=force_primary_key class="nav-link text-wrap d-inline-block w-100"> force_primary_key </a> <a href=#format-schema title=format_schema class="nav-link text-wrap d-inline-block w-100"> format_schema </a> <a href=#fsync-metadata title=fsync_metadata class="nav-link text-wrap d-inline-block w-100"> fsync_metadata </a> <a href=#settings-enable_http_compression title=enable_http_compression class="nav-link text-wrap d-inline-block w-100"> enable_http_compression </a> <a href=#settings-http_zlib_compression_level title=http_zlib_compression_level class="nav-link text-wrap d-inline-block w-100"> http_zlib_compression_level </a> <a href=#settings-http_native_compression_disable_checksumming_on_decompress title=http_native_compression_disable_checksumming_on_decompress class="nav-link text-wrap d-inline-block w-100"> http_native_compression_disable_checksumming_on_decompress </a> <a href=#settings-send_progress_in_http_headers title=send_progress_in_http_headers class="nav-link text-wrap d-inline-block w-100"> send_progress_in_http_headers </a> <a href=#settings-input_format_allow_errors_num title=input_format_allow_errors_num class="nav-link text-wrap d-inline-block w-100"> input_format_allow_errors_num </a> <a href=#settings-input_format_allow_errors_ratio title=input_format_allow_errors_ratio class="nav-link text-wrap d-inline-block w-100"> input_format_allow_errors_ratio </a> <a href=#settings-input_format_values_interpret_expressions title=input_format_values_interpret_expressions class="nav-link text-wrap d-inline-block w-100"> input_format_values_interpret_expressions </a> <a href=#settings-input_format_values_deduce_templates_of_expressions title=input_format_values_deduce_templates_of_expressions class="nav-link text-wrap d-inline-block w-100"> input_format_values_deduce_templates_of_expressions </a> <a href=#settings-input_format_values_accurate_types_of_literals title=input_format_values_accurate_types_of_literals class="nav-link text-wrap d-inline-block w-100"> input_format_values_accurate_types_of_literals </a> <a href=#session_settings-input_format_defaults_for_omitted_fields title=input_format_defaults_for_omitted_fields class="nav-link text-wrap d-inline-block w-100"> input_format_defaults_for_omitted_fields </a> <a href=#settings-input_format_tsv_empty_as_default title=input_format_tsv_empty_as_default class="nav-link text-wrap d-inline-block w-100"> input_format_tsv_empty_as_default </a> <a href=#settings-input_format_null_as_default title=input_format_null_as_default class="nav-link text-wrap d-inline-block w-100"> input_format_null_as_default </a> <a href=#settings-input_format_skip_unknown_fields title=input_format_skip_unknown_fields class="nav-link text-wrap d-inline-block w-100"> input_format_skip_unknown_fields </a> <a href=#settings-input_format_import_nested_json title=input_format_import_nested_json class="nav-link text-wrap d-inline-block w-100"> input_format_import_nested_json </a> <a href=#settings-input_format_with_names_use_header title=input_format_with_names_use_header class="nav-link text-wrap d-inline-block w-100"> input_format_with_names_use_header </a> <a href=#settings-date_time_input_format title=date_time_input_format class="nav-link text-wrap d-inline-block w-100"> date_time_input_format </a> <a href=#settings-join_default_strictness title=join_default_strictness class="nav-link text-wrap d-inline-block w-100"> join_default_strictness </a> <a href=#settings-join_any_take_last_row title=join_any_take_last_row class="nav-link text-wrap d-inline-block w-100"> join_any_take_last_row </a> <a href=#settings-join_use_nulls title=join_use_nulls class="nav-link text-wrap d-inline-block w-100"> join_use_nulls </a> <a href=#settings-join_any_take_last_row title=join_any_take_last_row class="nav-link text-wrap d-inline-block w-100"> join_any_take_last_row </a> <a href=#max-block-size title=max_block_size class="nav-link text-wrap d-inline-block w-100"> max_block_size </a> <a href=#preferred-block-size-bytes title=preferred_block_size_bytes class="nav-link text-wrap d-inline-block w-100"> preferred_block_size_bytes </a> <a href=#setting-merge_tree_uniform_read_distribution title=merge_tree_uniform_read_distribution class="nav-link text-wrap d-inline-block w-100"> merge_tree_uniform_read_distribution </a> <a href=#setting-merge_tree_min_rows_for_concurrent_read title=merge_tree_min_rows_for_concurrent_read class="nav-link text-wrap d-inline-block w-100"> merge_tree_min_rows_for_concurrent_read </a> <a href=#setting-merge_tree_min_bytes_for_concurrent_read title=merge_tree_min_bytes_for_concurrent_read class="nav-link text-wrap d-inline-block w-100"> merge_tree_min_bytes_for_concurrent_read </a> <a href=#setting-merge_tree_min_rows_for_seek title=merge_tree_min_rows_for_seek class="nav-link text-wrap d-inline-block w-100"> merge_tree_min_rows_for_seek </a> <a href=#setting-merge_tree_min_bytes_for_seek title=merge_tree_min_bytes_for_seek class="nav-link text-wrap d-inline-block w-100"> merge_tree_min_bytes_for_seek </a> <a href=#setting-merge_tree_coarse_index_granularity title=merge_tree_coarse_index_granularity class="nav-link text-wrap d-inline-block w-100"> merge_tree_coarse_index_granularity </a> <a href=#setting-merge_tree_max_rows_to_use_cache title=merge_tree_max_rows_to_use_cache class="nav-link text-wrap d-inline-block w-100"> merge_tree_max_rows_to_use_cache </a> <a href=#setting-merge_tree_max_bytes_to_use_cache title=merge_tree_max_bytes_to_use_cache class="nav-link text-wrap d-inline-block w-100"> merge_tree_max_bytes_to_use_cache </a> <a href=#settings-min_bytes_to_use_direct_io title=min_bytes_to_use_direct_io class="nav-link text-wrap d-inline-block w-100"> min_bytes_to_use_direct_io </a> <a href=#settings-log-queries title=log_queries class="nav-link text-wrap d-inline-block w-100"> log_queries </a> <a href=#settings-max_insert_block_size title=max_insert_block_size class="nav-link text-wrap d-inline-block w-100"> max_insert_block_size </a> <a href=#settings-max_replica_delay_for_distributed_queries title=max_replica_delay_for_distributed_queries class="nav-link text-wrap d-inline-block w-100"> max_replica_delay_for_distributed_queries </a> <a href=#settings-max_threads title=max_threads class="nav-link text-wrap d-inline-block w-100"> max_threads </a> <a href=#max-compress-block-size title=max_compress_block_size class="nav-link text-wrap d-inline-block w-100"> max_compress_block_size </a> <a href=#min-compress-block-size title=min_compress_block_size class="nav-link text-wrap d-inline-block w-100"> min_compress_block_size </a> <a href=#settings-mark_cache_min_lifetime title=mark_cache_min_lifetime class="nav-link text-wrap d-inline-block w-100"> mark_cache_min_lifetime </a> <a href=#settings-max_query_size title=max_query_size class="nav-link text-wrap d-inline-block w-100"> max_query_size </a> <a href=#interactive-delay title=interactive_delay class="nav-link text-wrap d-inline-block w-100"> interactive_delay </a> <a href=#connect-timeout-receive-timeout-send-timeout title="connect_timeout, receive_timeout, send_timeout" class="nav-link text-wrap d-inline-block w-100"> connect_timeout, receive_timeout, send_timeout </a> <a href=#poll-interval title=poll_interval class="nav-link text-wrap d-inline-block w-100"> poll_interval </a> <a href=#max-distributed-connections title=max_distributed_connections class="nav-link text-wrap d-inline-block w-100"> max_distributed_connections </a> <a href=#distributed-connections-pool-size title=distributed_connections_pool_size class="nav-link text-wrap d-inline-block w-100"> distributed_connections_pool_size </a> <a href=#connect-timeout-with-failover-ms title=connect_timeout_with_failover_ms class="nav-link text-wrap d-inline-block w-100"> connect_timeout_with_failover_ms </a> <a href=#connections-with-failover-max-tries title=connections_with_failover_max_tries class="nav-link text-wrap d-inline-block w-100"> connections_with_failover_max_tries </a> <a href=#extremes title=extremes class="nav-link text-wrap d-inline-block w-100"> extremes </a> <a href=#setting-use_uncompressed_cache title=use_uncompressed_cache class="nav-link text-wrap d-inline-block w-100"> use_uncompressed_cache </a> <a href=#replace-running-query title=replace_running_query class="nav-link text-wrap d-inline-block w-100"> replace_running_query </a> <a href=#stream-flush-interval-ms title=stream_flush_interval_ms class="nav-link text-wrap d-inline-block w-100"> stream_flush_interval_ms </a> <a href=#settings-load_balancing title=load_balancing class="nav-link text-wrap d-inline-block w-100"> load_balancing </a> <nav id=toc-toc-162-58 class="nav flex-column pl-2"> <a href=#load_balancing-random title="Random (by default)" class="nav-link text-wrap d-inline-block w-100"> Random (by default) </a> <a href=#load_balancing-nearest_hostname title="Nearest Hostname" class="nav-link text-wrap d-inline-block w-100"> Nearest Hostname </a> <a href=#load_balancing-in_order title="In Order" class="nav-link text-wrap d-inline-block w-100"> In Order </a> <a href=#load_balancing-first_or_random title="First or Random" class="nav-link text-wrap d-inline-block w-100"> First or Random </a> </nav> <a href=#settings-prefer_localhost_replica title=prefer_localhost_replica class="nav-link text-wrap d-inline-block w-100"> prefer_localhost_replica </a> <a href=#totals-mode title=totals_mode class="nav-link text-wrap d-inline-block w-100"> totals_mode </a> <a href=#totals-auto-threshold title=totals_auto_threshold class="nav-link text-wrap d-inline-block w-100"> totals_auto_threshold </a> <a href=#settings-max_parallel_replicas title=max_parallel_replicas class="nav-link text-wrap d-inline-block w-100"> max_parallel_replicas </a> <a href=#compile title=compile class="nav-link text-wrap d-inline-block w-100"> compile </a> <a href=#min-count-to-compile title=min_count_to_compile class="nav-link text-wrap d-inline-block w-100"> min_count_to_compile </a> <a href=#session_settings-output_format_json_quote_64bit_integers title=output_format_json_quote_64bit_integers class="nav-link text-wrap d-inline-block w-100"> output_format_json_quote_64bit_integers </a> <a href=#settings-format_csv_delimiter title=format_csv_delimiter class="nav-link text-wrap d-inline-block w-100"> format_csv_delimiter </a> <a href=#settings-input_format_csv_unquoted_null_literal_as_null title=input_format_csv_unquoted_null_literal_as_null class="nav-link text-wrap d-inline-block w-100"> input_format_csv_unquoted_null_literal_as_null </a> <a href=#settings-insert_quorum title=insert_quorum class="nav-link text-wrap d-inline-block w-100"> insert_quorum </a> <a href=#settings-insert_quorum_timeout title=insert_quorum_timeout class="nav-link text-wrap d-inline-block w-100"> insert_quorum_timeout </a> <a href=#settings-select_sequential_consistency title=select_sequential_consistency class="nav-link text-wrap d-inline-block w-100"> select_sequential_consistency </a> <a href=#settings-max_network_bytes title=max_network_bytes class="nav-link text-wrap d-inline-block w-100"> max_network_bytes </a> <a href=#settings-max_network_bandwidth title=max_network_bandwidth class="nav-link text-wrap d-inline-block w-100"> max_network_bandwidth </a> <a href=#settings-max_network_bandwidth_for_user title=max_network_bandwidth_for_user class="nav-link text-wrap d-inline-block w-100"> max_network_bandwidth_for_user </a> <a href=#settings-max_network_bandwidth_for_all_users title=max_network_bandwidth_for_all_users class="nav-link text-wrap d-inline-block w-100"> max_network_bandwidth_for_all_users </a> <a href=#settings-allow_experimental_cross_to_join_conversion title=allow_experimental_cross_to_join_conversion class="nav-link text-wrap d-inline-block w-100"> allow_experimental_cross_to_join_conversion </a> <a href=#settings-count_distinct_implementation title=count_distinct_implementation class="nav-link text-wrap d-inline-block w-100"> count_distinct_implementation </a> <a href=#settings-skip_unavailable_shards title=skip_unavailable_shards class="nav-link text-wrap d-inline-block w-100"> skip_unavailable_shards </a> <a href=#setting-optimize_throw_if_noop title=optimize_throw_if_noop class="nav-link text-wrap d-inline-block w-100"> optimize_throw_if_noop </a> <a href=#settings-distributed_replica_error_half_life title=distributed_replica_error_half_life class="nav-link text-wrap d-inline-block w-100"> distributed_replica_error_half_life </a> <a href=#settings-distributed_replica_error_cap title=distributed_replica_error_cap class="nav-link text-wrap d-inline-block w-100"> distributed_replica_error_cap </a> <a href=#setting-os_thread_priority title=os_thread_priority class="nav-link text-wrap d-inline-block w-100"> os_thread_priority </a> </nav> <a href=#settings-profiles title="Settings profiles" class="nav-link text-wrap d-inline-block w-100"> Settings profiles </a> <a href=#user-settings title="User settings" class="nav-link text-wrap d-inline-block w-100"> User settings </a> <nav id=toc-toc-164 class="nav flex-column pl-2"> <a href=#user-name-password title=user_name/password class="nav-link text-wrap d-inline-block w-100"> user_name/password </a> <a href=#user-name-networks title=user_name/networks class="nav-link text-wrap d-inline-block w-100"> user_name/networks </a> <a href=#user-name-profile title=user_name/profile class="nav-link text-wrap d-inline-block w-100"> user_name/profile </a> <a href=#user-name-quota title=user_name/quota class="nav-link text-wrap d-inline-block w-100"> user_name/quota </a> <a href=#user-name-databases title=user_name/databases class="nav-link text-wrap d-inline-block w-100"> user_name/databases </a> </nav> <a href=#constraints-on-settings title="Constraints on Settings" class="nav-link text-wrap d-inline-block w-100"> Constraints on Settings </a> <a href=#clickhouse-utility title="ClickHouse Utility" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Utility </a> <a href=#clickhouse-copier_1 title=clickhouse-copier class="nav-link text-wrap d-inline-block w-100"> clickhouse-copier </a> <nav id=toc-toc-167 class="nav flex-column pl-2"> <a href=#running-clickhouse-copier title="Running clickhouse-copier" class="nav-link text-wrap d-inline-block w-100"> Running clickhouse-copier </a> <a href=#format-of-zookeeper-xml title="Format of zookeeper.xml" class="nav-link text-wrap d-inline-block w-100"> Format of zookeeper.xml </a> <a href=#configuration-of-copying-tasks title="Configuration of copying tasks" class="nav-link text-wrap d-inline-block w-100"> Configuration of copying tasks </a> </nav> <a href=#clickhouse-local title=clickhouse-local class="nav-link text-wrap d-inline-block w-100"> clickhouse-local </a> <nav id=toc-toc-168 class="nav flex-column pl-2"> <a href=#usage_1 title=Usage class="nav-link text-wrap d-inline-block w-100"> Usage </a> <a href=#examples title=Examples class="nav-link text-wrap d-inline-block w-100"> Examples </a> </nav> <a href=#chang-jian-wen-ti title=常见问题 class="nav-link text-wrap d-inline-block w-100"> 常见问题 </a> <nav id=toc-toc-169 class="nav flex-column pl-2"> <a href=#wei-shi-yao-bu-shi-yong-mapreducezhi-lei-de-chan-pin-ni title=为什么不使用MapReduce之类的产品呢? class="nav-link text-wrap d-inline-block w-100"> 为什么不使用MapReduce之类的产品呢? </a> <a href=#oracle-odbc-encodings title="What to do if I have a problem with encodings when using Oracle through ODBC?" class="nav-link text-wrap d-inline-block w-100"> What to do if I have a problem with encodings when using Oracle through ODBC? </a> </nav> <a href=#clickhouse-kai-fa title="ClickHouse 开发" class="nav-link text-wrap d-inline-block w-100"> ClickHouse 开发 </a> <a href=#clickhouse-jia-gou-gai-shu title="ClickHouse 架构概述" class="nav-link text-wrap d-inline-block w-100"> ClickHouse 架构概述 </a> <nav id=toc-toc-171 class="nav flex-column pl-2"> <a href=#lie-columns title=列（Columns） class="nav-link text-wrap d-inline-block w-100"> 列（Columns） </a> <a href=#field title=Field class="nav-link text-wrap d-inline-block w-100"> Field </a> <a href=#chou-xiang-lou-dong title=抽象漏洞 class="nav-link text-wrap d-inline-block w-100"> 抽象漏洞 </a> <a href=#shu-ju-lei-xing title=数据类型 class="nav-link text-wrap d-inline-block w-100"> 数据类型 </a> <a href=#kuai-block title=块（Block） class="nav-link text-wrap d-inline-block w-100"> 块（Block） </a> <a href=#kuai-liu-block-streams title="块流（Block Streams）" class="nav-link text-wrap d-inline-block w-100"> 块流（Block Streams） </a> <a href=#ge-shi-formats title=格式（Formats） class="nav-link text-wrap d-inline-block w-100"> 格式（Formats） </a> <a href=#i-o title=I/O class="nav-link text-wrap d-inline-block w-100"> I/O </a> <a href=#biao-tables title=表（Tables） class="nav-link text-wrap d-inline-block w-100"> 表（Tables） </a> <a href=#jie-xi-qi-parsers title=解析器（Parsers） class="nav-link text-wrap d-inline-block w-100"> 解析器（Parsers） </a> <a href=#jie-shi-qi-interpreters title=解释器（Interpreters） class="nav-link text-wrap d-inline-block w-100"> 解释器（Interpreters） </a> <a href=#han-shu-functions title=函数（Functions） class="nav-link text-wrap d-inline-block w-100"> 函数（Functions） </a> <a href=#ju-he-han-shu title=聚合函数 class="nav-link text-wrap d-inline-block w-100"> 聚合函数 </a> <a href=#fu-wu-qi-server title=服务器（Server） class="nav-link text-wrap d-inline-block w-100"> 服务器（Server） </a> <a href=#fen-bu-shi-cha-xun-zhi-xing title=分布式查询执行 class="nav-link text-wrap d-inline-block w-100"> 分布式查询执行 </a> <a href=#merge-tree title="Merge Tree" class="nav-link text-wrap d-inline-block w-100"> Merge Tree </a> <a href=#fu-zhi-replication title=复制（Replication） class="nav-link text-wrap d-inline-block w-100"> 复制（Replication） </a> </nav> <a href=#ru-he-gou-jian-clickhouse-fa-bu-bao title="如何构建 ClickHouse 发布包" class="nav-link text-wrap d-inline-block w-100"> 如何构建 ClickHouse 发布包 </a> <nav id=toc-toc-172 class="nav flex-column pl-2"> <a href=#an-zhuang-git-he-pbuilder title="安装 Git 和 Pbuilder" class="nav-link text-wrap d-inline-block w-100"> 安装 Git 和 Pbuilder </a> <a href=#la-qu-clickhouse-yuan-ma title="拉取 ClickHouse 源码" class="nav-link text-wrap d-inline-block w-100"> 拉取 ClickHouse 源码 </a> <a href=#yun-xing-fa-bu-jiao-ben title=运行发布脚本 class="nav-link text-wrap d-inline-block w-100"> 运行发布脚本 </a> </nav> <a href=#ru-he-zai-kai-fa-guo-cheng-zhong-bian-yi-clickhouse title="如何在开发过程中编译 ClickHouse" class="nav-link text-wrap d-inline-block w-100"> 如何在开发过程中编译 ClickHouse </a> <nav id=toc-toc-173 class="nav flex-column pl-2"> <a href=#an-zhuang-git-he-cmake title="安装 Git 和 CMake" class="nav-link text-wrap d-inline-block w-100"> 安装 Git 和 CMake </a> <a href=#an-zhuang-gcc-7 title="安装 GCC 7" class="nav-link text-wrap d-inline-block w-100"> 安装 GCC 7 </a> <nav id=toc-toc-173-2 class="nav flex-column pl-2"> <a href=#an-zhuang-ppa-bao title="安装 PPA 包" class="nav-link text-wrap d-inline-block w-100"> 安装 PPA 包 </a> <a href=#yuan-ma-an-zhuang-gcc title="源码安装 gcc" class="nav-link text-wrap d-inline-block w-100"> 源码安装 gcc </a> </nav> <a href=#shi-yong-gcc-7-lai-bian-yi title="使用 GCC 7 来编译" class="nav-link text-wrap d-inline-block w-100"> 使用 GCC 7 来编译 </a> <a href=#an-zhuang-suo-xu-de-gong-ju-yi-lai-ku title=安装所需的工具依赖库 class="nav-link text-wrap d-inline-block w-100"> 安装所需的工具依赖库 </a> <a href=#la-qu-clickhouse-yuan-ma_1 title="拉取 ClickHouse 源码" class="nav-link text-wrap d-inline-block w-100"> 拉取 ClickHouse 源码 </a> <a href=#bian-yi-clickhouse title="编译 ClickHouse" class="nav-link text-wrap d-inline-block w-100"> 编译 ClickHouse </a> </nav> <a href=#zai-mac-os-x-zhong-bian-yi-clickhouse title="在 Mac OS X 中编译 ClickHouse" class="nav-link text-wrap d-inline-block w-100"> 在 Mac OS X 中编译 ClickHouse </a> <nav id=toc-toc-174 class="nav flex-column pl-2"> <a href=#an-zhuang-homebrew title="安装 Homebrew" class="nav-link text-wrap d-inline-block w-100"> 安装 Homebrew </a> <a href=#an-zhuang-bian-yi-qi-gong-ju-ku title=安装编译器，工具库 class="nav-link text-wrap d-inline-block w-100"> 安装编译器，工具库 </a> <a href=#la-qu-clickhouse-yuan-ma_2 title="拉取 ClickHouse 源码" class="nav-link text-wrap d-inline-block w-100"> 拉取 ClickHouse 源码 </a> <a href=#bian-yi-clickhouse_1 title="编译 ClickHouse" class="nav-link text-wrap d-inline-block w-100"> 编译 ClickHouse </a> <a href=#zhu-yi-shi-xiang_1 title=注意事项 class="nav-link text-wrap d-inline-block w-100"> 注意事项 </a> </nav> <a href=#how-to-build-clickhouse-on-linux-for-mac-os-x title="How to Build ClickHouse on Linux for Mac OS X" class="nav-link text-wrap d-inline-block w-100"> How to Build ClickHouse on Linux for Mac OS X </a> <a href=#install-clang-8 title="Install Clang-8" class="nav-link text-wrap d-inline-block w-100"> Install Clang-8 </a> <a href=#install-cross-compilation-toolset title="Install Cross-Compilation Toolset" class="nav-link text-wrap d-inline-block w-100"> Install Cross-Compilation Toolset </a> <a href=#build-clickhouse title="Build ClickHouse" class="nav-link text-wrap d-inline-block w-100"> Build ClickHouse </a> <a href=#ru-he-bian-xie-c-dai-ma title="如何编写 C++ 代码" class="nav-link text-wrap d-inline-block w-100"> 如何编写 C++ 代码 </a> <nav id=toc-toc-179 class="nav flex-column pl-2"> <a href=#yi-ban-jian-yi title=一般建议 class="nav-link text-wrap d-inline-block w-100"> 一般建议 </a> <a href=#ge-shi-hua title=格式化 class="nav-link text-wrap d-inline-block w-100"> 格式化 </a> <a href=#comments_1 title=Comments class="nav-link text-wrap d-inline-block w-100"> Comments </a> <a href=#names title=Names class="nav-link text-wrap d-inline-block w-100"> Names </a> <a href=#ru-he-bian-xie-dai-ma title=如何编写代码 class="nav-link text-wrap d-inline-block w-100"> 如何编写代码 </a> <a href=#mei-you-yong-dao-de-c-te-xing title="没有用到的 C++ 特性。" class="nav-link text-wrap d-inline-block w-100"> 没有用到的 C++ 特性。 </a> <a href=#ping-tai title=平台 class="nav-link text-wrap d-inline-block w-100"> 平台 </a> <a href=#gong-ju title=工具 class="nav-link text-wrap d-inline-block w-100"> 工具 </a> <a href=#ku title=库 class="nav-link text-wrap d-inline-block w-100"> 库 </a> <a href=#yi-ban-jian-yi_1 title=一般建议 class="nav-link text-wrap d-inline-block w-100"> 一般建议 </a> <a href=#qi-ta-jian-yi title=其他建议 class="nav-link text-wrap d-inline-block w-100"> 其他建议 </a> </nav> <a href=#clickhouse-ce-shi title="ClickHouse 测试" class="nav-link text-wrap d-inline-block w-100"> ClickHouse 测试 </a> <nav id=toc-toc-180 class="nav flex-column pl-2"> <a href=#gong-neng-xing-ce-shi title=功能性测试 class="nav-link text-wrap d-inline-block w-100"> 功能性测试 </a> <a href=#yi-zhi-de-bug title=已知的bug class="nav-link text-wrap d-inline-block w-100"> 已知的bug </a> <a href=#ji-cheng-ce-shi title=集成测试 class="nav-link text-wrap d-inline-block w-100"> 集成测试 </a> <a href=#dan-yuan-ce-shi title=单元测试 class="nav-link text-wrap d-inline-block w-100"> 单元测试 </a> <a href=#xing-neng-ce-shi title=性能测试 class="nav-link text-wrap d-inline-block w-100"> 性能测试 </a> <a href=#ce-shi-gong-ju-he-jiao-ben title=测试工具和脚本 class="nav-link text-wrap d-inline-block w-100"> 测试工具和脚本 </a> <a href=#za-xiang-ce-shi title=杂项测试 class="nav-link text-wrap d-inline-block w-100"> 杂项测试 </a> <a href=#shou-dong-ce-shi title=手动测试 class="nav-link text-wrap d-inline-block w-100"> 手动测试 </a> <a href=#ce-shi-huan-jing title=测试环境 class="nav-link text-wrap d-inline-block w-100"> 测试环境 </a> <a href=#fu-zai-ce-shi title=负载测试 class="nav-link text-wrap d-inline-block w-100"> 负载测试 </a> <a href=#bian-yi-ce-shi title=编译测试 class="nav-link text-wrap d-inline-block w-100"> 编译测试 </a> <a href=#ce-shi-xie-yi-jian-rong-xing title=测试协议兼容性 class="nav-link text-wrap d-inline-block w-100"> 测试协议兼容性 </a> <a href=#lai-zi-bian-yi-qi-de-bang-zhu title=来自编译器的帮助 class="nav-link text-wrap d-inline-block w-100"> 来自编译器的帮助 </a> <a href=#sanitizers title=Sanitizers class="nav-link text-wrap d-inline-block w-100"> Sanitizers </a> <a href=#mo-hu-ce-shi title=模糊测试 class="nav-link text-wrap d-inline-block w-100"> 模糊测试 </a> <a href=#an-quan-shen-ji title=安全审计 class="nav-link text-wrap d-inline-block w-100"> 安全审计 </a> <a href=#jing-tai-fen-xi title=静态分析 class="nav-link text-wrap d-inline-block w-100"> 静态分析 </a> <a href=#qi-ta-qiang-hua title=其他强化 class="nav-link text-wrap d-inline-block w-100"> 其他强化 </a> <a href=#dai-ma-feng-ge title=代码风格 class="nav-link text-wrap d-inline-block w-100"> 代码风格 </a> <a href=#metrica-b2b-ce-shi title="Metrica B2B 测试" class="nav-link text-wrap d-inline-block w-100"> Metrica B2B 测试 </a> <a href=#ce-shi-fu-gai-lu title=测试覆盖率 class="nav-link text-wrap d-inline-block w-100"> 测试覆盖率 </a> <a href=#zi-dong-hua-ce-shi title=自动化测试 class="nav-link text-wrap d-inline-block w-100"> 自动化测试 </a> </nav> <a href=#third-party-libraries-used title="Third-Party Libraries Used" class="nav-link text-wrap d-inline-block w-100"> Third-Party Libraries Used </a> <nav id=toc-toc-181 class="nav flex-column pl-2"> <a href=#q3-2019 title="Q3 2019" class="nav-link text-wrap d-inline-block w-100"> Q3 2019 </a> <a href=#q4-2019 title="Q4 2019" class="nav-link text-wrap d-inline-block w-100"> Q4 2019 </a> <a href=#clickhouse-release-v19-16-2-2-2019-10-30 title="ClickHouse release v19.16.2.2, 2019-10-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v19.16.2.2, 2019-10-30 </a> <nav id=toc-toc-181-3 class="nav flex-column pl-2"> <a href=#backward-incompatible-change title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#new-feature title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#code-cleanup title="Code cleanup" class="nav-link text-wrap d-inline-block w-100"> Code cleanup </a> </nav> <a href=#clickhouse-release-19-15-4-10-2019-10-31 title="ClickHouse release 19.15.4.10, 2019-10-31" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.15.4.10, 2019-10-31 </a> <nav id=toc-toc-181-4 class="nav flex-column pl-2"> <a href=#bug-fix_1 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-15-3-6-2019-10-09 title="ClickHouse release 19.15.3.6, 2019-10-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.15.3.6, 2019-10-09 </a> <nav id=toc-toc-181-5 class="nav flex-column pl-2"> <a href=#bug-fix_2 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-15-2-2-2019-10-01 title="ClickHouse release 19.15.2.2, 2019-10-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.15.2.2, 2019-10-01 </a> <nav id=toc-toc-181-6 class="nav flex-column pl-2"> <a href=#new-feature_1 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#experimental-feature title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100"> Experimental Feature </a> <a href=#improvement_1 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#build-testing-packaging-improvement_1 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#bug-fix_3 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#backward-incompatible-change_1 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-14-7-15-2019-10-02 title="ClickHouse release 19.14.7.15, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.14.7.15, 2019-10-02 </a> <nav id=toc-toc-181-7 class="nav flex-column pl-2"> <a href=#bug-fix_4 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-14-6-12-2019-09-19 title="ClickHouse release 19.14.6.12, 2019-09-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.14.6.12, 2019-09-19 </a> <nav id=toc-toc-181-8 class="nav flex-column pl-2"> <a href=#bug-fix_5 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#build-testing-packaging-improvement_2 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-14-3-3-2019-09-10 title="ClickHouse release 19.14.3.3, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.14.3.3, 2019-09-10 </a> <nav id=toc-toc-181-9 class="nav flex-column pl-2"> <a href=#new-feature_2 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#experimental-feature_1 title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100"> Experimental Feature </a> <a href=#bug-fix_6 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> <a href=#improvement_2 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement_1 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_3 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change_2 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-13-6-51-2019-10-02 title="ClickHouse release 19.13.6.51, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.6.51, 2019-10-02 </a> <nav id=toc-toc-181-10 class="nav flex-column pl-2"> <a href=#bug-fix_7 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-13-5-44-2019-09-20 title="ClickHouse release 19.13.5.44, 2019-09-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.5.44, 2019-09-20 </a> <nav id=toc-toc-181-11 class="nav flex-column pl-2"> <a href=#bug-fix_8 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-13-4-32-2019-09-10 title="ClickHouse release 19.13.4.32, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.4.32, 2019-09-10 </a> <nav id=toc-toc-181-12 class="nav flex-column pl-2"> <a href=#bug-fix_9 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix_1 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-11-13-74-2019-11-01 title="ClickHouse release 19.11.13.74, 2019-11-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.13.74, 2019-11-01 </a> <nav id=toc-toc-181-13 class="nav flex-column pl-2"> <a href=#bug-fix_10 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-12-69-2019-10-02 title="ClickHouse release 19.11.12.69, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.12.69, 2019-10-02 </a> <nav id=toc-toc-181-14 class="nav flex-column pl-2"> <a href=#bug-fix_11 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-10-54-2019-09-10 title="ClickHouse release 19.11.10.54, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.10.54, 2019-09-10 </a> <nav id=toc-toc-181-15 class="nav flex-column pl-2"> <a href=#bug-fix_12 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-9-52-2019-09-6 title="ClickHouse release 19.11.9.52, 2019-09-6" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.9.52, 2019-09-6 </a> <nav id=toc-toc-181-16 class="nav flex-column pl-2"> <a href=#security-fix_2 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-13-3-26-2019-08-22 title="ClickHouse release 19.13.3.26, 2019-08-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.3.26, 2019-08-22 </a> <nav id=toc-toc-181-17 class="nav flex-column pl-2"> <a href=#bug-fix_13 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix_3 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-13-2-19-2019-08-14 title="ClickHouse release 19.13.2.19, 2019-08-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.2.19, 2019-08-14 </a> <nav id=toc-toc-181-18 class="nav flex-column pl-2"> <a href=#new-feature_3 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#backward-incompatible-change_3 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#experimental-features title="Experimental features" class="nav-link text-wrap d-inline-block w-100"> Experimental features </a> <a href=#bug-fix_14 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement_3 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement_2 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_4 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-11-11-57-2019-09-13 title="ClickHouse release 19.11.11.57, 2019-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.11.57, 2019-09-13 </a> <a href=#clickhouse-release-19-11-8-46-2019-08-22 title="ClickHouse release 19.11.8.46, 2019-08-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.8.46, 2019-08-22 </a> <nav id=toc-toc-181-20 class="nav flex-column pl-2"> <a href=#bug-fix_15 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-7-40-2019-08-14 title="ClickHouse release 19.11.7.40, 2019-08-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.7.40, 2019-08-14 </a> <nav id=toc-toc-181-21 class="nav flex-column pl-2"> <a href=#bug-fix_16 title="Bug fix" class="nav-link text-wrap d-inline-block w-100"> Bug fix </a> <a href=#improvement_4 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> </nav> <a href=#clickhouse-release-19-11-5-28-2019-08-05 title="ClickHouse release 19.11.5.28, 2019-08-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.5.28, 2019-08-05 </a> <nav id=toc-toc-181-22 class="nav flex-column pl-2"> <a href=#bug-fix_17 title="Bug fix" class="nav-link text-wrap d-inline-block w-100"> Bug fix </a> <a href=#backward-incompatible-change_4 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-11-4-24-2019-08-01 title="ClickHouse release 19.11.4.24, 2019-08-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.4.24, 2019-08-01 </a> <nav id=toc-toc-181-23 class="nav flex-column pl-2"> <a href=#bug-fix_18 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#build-testing-packaging-improvement_5 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change_5 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-11-3-11-2019-07-18 title="ClickHouse release 19.11.3.11, 2019-07-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.3.11, 2019-07-18 </a> <nav id=toc-toc-181-24 class="nav flex-column pl-2"> <a href=#new-feature_4 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix_19 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement_5 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement_3 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_6 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change_6 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-10-1-5-2019-07-12 title="ClickHouse release 19.10.1.5, 2019-07-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.10.1.5, 2019-07-12 </a> <nav id=toc-toc-181-25 class="nav flex-column pl-2"> <a href=#new-feature_5 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix_20 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement_6 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement_4 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_7 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-9-3-31-2019-07-05 title="ClickHouse release 19.9.3.31, 2019-07-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.9.3.31, 2019-07-05 </a> <nav id=toc-toc-181-26 class="nav flex-column pl-2"> <a href=#bug-fix_21 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-7-5-29-2019-07-05 title="ClickHouse release 19.7.5.29, 2019-07-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.7.5.29, 2019-07-05 </a> <nav id=toc-toc-181-27 class="nav flex-column pl-2"> <a href=#bug-fix_22 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-9-2-4-2019-06-24 title="ClickHouse release 19.9.2.4, 2019-06-24" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.9.2.4, 2019-06-24 </a> <nav id=toc-toc-181-28 class="nav flex-column pl-2"> <a href=#new-feature_6 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#improvement_7 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#bug-fix_23 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#build-testing-packaging-improvement_8 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-8-3-8-2019-06-11 title="ClickHouse release 19.8.3.8, 2019-06-11" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.8.3.8, 2019-06-11 </a> <nav id=toc-toc-181-29 class="nav flex-column pl-2"> <a href=#new-features title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#improvements title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#bug-fixes title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#documentation title=Documentation class="nav-link text-wrap d-inline-block w-100"> Documentation </a> <a href=#build-testing-packaging-improvements title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-7-5-27-2019-06-09 title="ClickHouse release 19.7.5.27, 2019-06-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.7.5.27, 2019-06-09 </a> <nav id=toc-toc-181-30 class="nav flex-column pl-2"> <a href=#new-features_1 title="New features" class="nav-link text-wrap d-inline-block w-100"> New features </a> <a href=#bug-fixes_1 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-7-3-9-2019-05-30 title="ClickHouse release 19.7.3.9, 2019-05-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.7.3.9, 2019-05-30 </a> <nav id=toc-toc-181-31 class="nav flex-column pl-2"> <a href=#new-features_2 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#bug-fixes_2 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#performance-improvements_1 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#documentation_1 title=Documentation class="nav-link text-wrap d-inline-block w-100"> Documentation </a> <a href=#build-testing-packaging-improvements_1 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-6-3-18-2019-06-13 title="ClickHouse release 19.6.3.18, 2019-06-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.6.3.18, 2019-06-13 </a> <nav id=toc-toc-181-32 class="nav flex-column pl-2"> <a href=#bug-fixes_3 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-6-2-11-2019-05-13 title="ClickHouse release 19.6.2.11, 2019-05-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.6.2.11, 2019-05-13 </a> <nav id=toc-toc-181-33 class="nav flex-column pl-2"> <a href=#new-features_3 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features_1 title="Experimental Features" class="nav-link text-wrap d-inline-block w-100"> Experimental Features </a> <a href=#improvements_1 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements_2 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#backward-incompatible-changes title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#bug-fixes_4 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvements_2 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-5-4-22-2019-05-13 title="ClickHouse release 19.5.4.22, 2019-05-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.5.4.22, 2019-05-13 </a> <nav id=toc-toc-181-34 class="nav flex-column pl-2"> <a href=#bug-fixes_5 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-5-3-8-2019-04-18 title="ClickHouse release 19.5.3.8, 2019-04-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.5.3.8, 2019-04-18 </a> <nav id=toc-toc-181-35 class="nav flex-column pl-2"> <a href=#bug-fixes_6 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-5-2-6-2019-04-15 title="ClickHouse release 19.5.2.6, 2019-04-15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.5.2.6, 2019-04-15 </a> <nav id=toc-toc-181-36 class="nav flex-column pl-2"> <a href=#new-features_4 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#improvement_8 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#bug-fix_24 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#backward-incompatible-change_7 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#performance-improvement_5 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_9 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-4-4-33-2019-04-17 title="ClickHouse release 19.4.4.33, 2019-04-17" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.4.33, 2019-04-17 </a> <nav id=toc-toc-181-37 class="nav flex-column pl-2"> <a href=#bug-fixes_7 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements_2 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> </nav> <a href=#clickhouse-release-19-4-3-11-2019-04-02 title="ClickHouse release 19.4.3.11, 2019-04-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.3.11, 2019-04-02 </a> <nav id=toc-toc-181-38 class="nav flex-column pl-2"> <a href=#bug-fixes_8 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvement_10 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-4-2-7-2019-03-30 title="ClickHouse release 19.4.2.7, 2019-03-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.2.7, 2019-03-30 </a> <nav id=toc-toc-181-39 class="nav flex-column pl-2"> <a href=#bug-fixes_9 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-4-1-3-2019-03-19 title="ClickHouse release 19.4.1.3, 2019-03-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.1.3, 2019-03-19 </a> <nav id=toc-toc-181-40 class="nav flex-column pl-2"> <a href=#bug-fixes_10 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-4-0-49-2019-03-09 title="ClickHouse release 19.4.0.49, 2019-03-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.0.49, 2019-03-09 </a> <nav id=toc-toc-181-41 class="nav flex-column pl-2"> <a href=#new-features_5 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#bug-fixes_11 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements_3 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements_3 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#build-testing-packaging-improvement_11 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-3-9-1-2019-04-02 title="ClickHouse release 19.3.9.1, 2019-04-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.9.1, 2019-04-02 </a> <nav id=toc-toc-181-42 class="nav flex-column pl-2"> <a href=#bug-fixes_12 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvement_12 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-3-7-2019-03-12 title="ClickHouse release 19.3.7, 2019-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.7, 2019-03-12 </a> <nav id=toc-toc-181-43 class="nav flex-column pl-2"> <a href=#bug-fixes_13 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-3-6-2019-03-02 title="ClickHouse release 19.3.6, 2019-03-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.6, 2019-03-02 </a> <nav id=toc-toc-181-44 class="nav flex-column pl-2"> <a href=#bug-fixes_14 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> <a href=#build-testing-packaging-improvements_3 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-3-5-2019-02-21 title="ClickHouse release 19.3.5, 2019-02-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.5, 2019-02-21 </a> <nav id=toc-toc-181-45 class="nav flex-column pl-2"> <a href=#bug-fixes_15 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-3-4-2019-02-16 title="ClickHouse release 19.3.4, 2019-02-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.4, 2019-02-16 </a> <nav id=toc-toc-181-46 class="nav flex-column pl-2"> <a href=#improvements_4 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#bug-fixes_16 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvements_4 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-3-3-2019-02-13 title="ClickHouse release 19.3.3, 2019-02-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.3, 2019-02-13 </a> <nav id=toc-toc-181-47 class="nav flex-column pl-2"> <a href=#new-features_6 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features_2 title="Experimental features" class="nav-link text-wrap d-inline-block w-100"> Experimental features </a> <a href=#bug-fixes_17 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvements_5 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> <a href=#backward-incompatible-changes_1 title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#performance-improvements_4 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#improvements_5 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> </nav> <a href=#clickhouse-release-19-1-14-2019-03-14 title="ClickHouse release 19.1.14, 2019-03-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.14, 2019-03-14 </a> <a href=#clickhouse-release-19-1-13-2019-03-12 title="ClickHouse release 19.1.13, 2019-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.13, 2019-03-12 </a> <a href=#clickhouse-release-19-1-10-2019-03-03 title="ClickHouse release 19.1.10, 2019-03-03" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.10, 2019-03-03 </a> <a href=#clickhouse-release-19-1-9-2019-02-21 title="ClickHouse release 19.1.9, 2019-02-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.9, 2019-02-21 </a> <nav id=toc-toc-181-51 class="nav flex-column pl-2"> <a href=#bug-fixes_18 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-1-8-2019-02-16 title="ClickHouse release 19.1.8, 2019-02-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.8, 2019-02-16 </a> <nav id=toc-toc-181-52 class="nav flex-column pl-2"> <a href=#bug-fixes_19 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-1-7-2019-02-15 title="ClickHouse release 19.1.7, 2019-02-15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.7, 2019-02-15 </a> <nav id=toc-toc-181-53 class="nav flex-column pl-2"> <a href=#bug-fixes_20 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-1-6-2019-01-24 title="ClickHouse release 19.1.6, 2019-01-24" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.6, 2019-01-24 </a> <nav id=toc-toc-181-54 class="nav flex-column pl-2"> <a href=#new-features_7 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features_3 title="Experimental features" class="nav-link text-wrap d-inline-block w-100"> Experimental features </a> <a href=#bug-fixes_21 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements_6 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements_5 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#backward-incompatible-changes_2 title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#build-testing-packaging-improvements_6 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-18-16-1-2018-12-21 title="ClickHouse release 18.16.1, 2018-12-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.16.1, 2018-12-21 </a> <nav id=toc-toc-181-55 class="nav flex-column pl-2"> <a href=#bug-fixes_22 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements_7 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-improvements title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-16-0-2018-12-14 title="ClickHouse release 18.16.0, 2018-12-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.16.0, 2018-12-14 </a> <nav id=toc-toc-181-56 class="nav flex-column pl-2"> <a href=#new-features_8 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_23 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements_8 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-improvements_1 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> <a href=#backward-incompatible-changes_3 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-14-19-2018-12-19 title="ClickHouse release 18.14.19, 2018-12-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.19, 2018-12-19 </a> <nav id=toc-toc-181-57 class="nav flex-column pl-2"> <a href=#bug-fixes_24 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-improvements_2 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-14-18-2018-12-04 title="ClickHouse release 18.14.18, 2018-12-04" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.18, 2018-12-04 </a> <nav id=toc-toc-181-58 class="nav flex-column pl-2"> <a href=#bug-fixes_25 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-14-17-2018-11-30 title="ClickHouse release 18.14.17, 2018-11-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.17, 2018-11-30 </a> <nav id=toc-toc-181-59 class="nav flex-column pl-2"> <a href=#bug-fixes_26 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-15-2018-11-21 title="ClickHouse release 18.14.15, 2018-11-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.15, 2018-11-21 </a> <nav id=toc-toc-181-60 class="nav flex-column pl-2"> <a href=#bug-fixes_27 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-14-2018-11-20 title="ClickHouse release 18.14.14, 2018-11-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.14, 2018-11-20 </a> <nav id=toc-toc-181-61 class="nav flex-column pl-2"> <a href=#bug-fixes_28 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes_1 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-14-13-2018-11-08 title="ClickHouse release 18.14.13, 2018-11-08" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.13, 2018-11-08 </a> <nav id=toc-toc-181-62 class="nav flex-column pl-2"> <a href=#bug-fixes_29 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#performance-improvements_6 title="Performance improvements:" class="nav-link text-wrap d-inline-block w-100"> Performance improvements: </a> <a href=#build-improvements_3 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-14-12-2018-11-02 title="ClickHouse release 18.14.12, 2018-11-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.12, 2018-11-02 </a> <nav id=toc-toc-181-63 class="nav flex-column pl-2"> <a href=#bug-fixes_30 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-11-2018-10-29 title="ClickHouse release 18.14.11, 2018-10-29" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.11, 2018-10-29 </a> <nav id=toc-toc-181-64 class="nav flex-column pl-2"> <a href=#bug-fixes_31 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-10-2018-10-23 title="ClickHouse release 18.14.10, 2018-10-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.10, 2018-10-23 </a> <a href=#clickhouse-release-18-14-9-2018-10-16 title="ClickHouse release 18.14.9, 2018-10-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.9, 2018-10-16 </a> <nav id=toc-toc-181-66 class="nav flex-column pl-2"> <a href=#new-features_9 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features_4 title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#improvements_9 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_32 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_4 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-12-17-2018-09-16 title="ClickHouse release 18.12.17, 2018-09-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.17, 2018-09-16 </a> <nav id=toc-toc-181-67 class="nav flex-column pl-2"> <a href=#new-features_10 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_33 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_5 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-12-14-2018-09-13 title="ClickHouse release 18.12.14, 2018-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.14, 2018-09-13 </a> <nav id=toc-toc-181-68 class="nav flex-column pl-2"> <a href=#new-features_11 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_10 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#bug-fixes_34 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-12-13-2018-09-10 title="ClickHouse release 18.12.13, 2018-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.13, 2018-09-10 </a> <nav id=toc-toc-181-69 class="nav flex-column pl-2"> <a href=#new-features_12 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features_5 title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#improvements_11 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_35 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#security-fix_4 title="Security fix:" class="nav-link text-wrap d-inline-block w-100"> Security fix: </a> <a href=#backward-incompatible-changes_6 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#build-changes_2 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-10-3-2018-08-13 title="ClickHouse release 18.10.3, 2018-08-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.10.3, 2018-08-13 </a> <nav id=toc-toc-181-70 class="nav flex-column pl-2"> <a href=#new-features_13 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_12 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_36 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_7 title="Backward incompatible changes" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes </a> <a href=#build-changes_3 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-6-0-2018-08-02 title="ClickHouse release 18.6.0, 2018-08-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.6.0, 2018-08-02 </a> <nav id=toc-toc-181-71 class="nav flex-column pl-2"> <a href=#new-features_14 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_13 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> </nav> <a href=#clickhouse-release-18-5-1-2018-07-31 title="ClickHouse release 18.5.1, 2018-07-31" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.5.1, 2018-07-31 </a> <nav id=toc-toc-181-72 class="nav flex-column pl-2"> <a href=#new-features_15 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_14 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_37 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-4-0-2018-07-28 title="ClickHouse release 18.4.0, 2018-07-28" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.4.0, 2018-07-28 </a> <nav id=toc-toc-181-73 class="nav flex-column pl-2"> <a href=#new-features_16 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_15 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_38 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_8 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-1-0-2018-07-23 title="ClickHouse release 18.1.0, 2018-07-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.1.0, 2018-07-23 </a> <nav id=toc-toc-181-74 class="nav flex-column pl-2"> <a href=#new-features_17 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_16 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_39 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_9 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54394-2018-07-12 title="ClickHouse release 1.1.54394, 2018-07-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54394, 2018-07-12 </a> <nav id=toc-toc-181-75 class="nav flex-column pl-2"> <a href=#new-features_18 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_40 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54390-2018-07-06 title="ClickHouse release 1.1.54390, 2018-07-06" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54390, 2018-07-06 </a> <nav id=toc-toc-181-76 class="nav flex-column pl-2"> <a href=#new-features_19 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_17 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_41 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#security-fix_5 title="Security fix:" class="nav-link text-wrap d-inline-block w-100"> Security fix: </a> </nav> <a href=#clickhouse-release-1-1-54388-2018-06-28 title="ClickHouse release 1.1.54388, 2018-06-28" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54388, 2018-06-28 </a> <nav id=toc-toc-181-77 class="nav flex-column pl-2"> <a href=#new-features_20 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features_6 title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#bug-fixes_42 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements_18 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-changes_4 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> <a href=#backward-incompatible-changes_10 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54385-2018-06-01 title="ClickHouse release 1.1.54385, 2018-06-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54385, 2018-06-01 </a> <nav id=toc-toc-181-78 class="nav flex-column pl-2"> <a href=#bug-fixes_43 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54383-2018-05-22 title="ClickHouse release 1.1.54383, 2018-05-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54383, 2018-05-22 </a> <nav id=toc-toc-181-79 class="nav flex-column pl-2"> <a href=#bug-fixes_44 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54381-2018-05-14 title="ClickHouse release 1.1.54381, 2018-05-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54381, 2018-05-14 </a> <nav id=toc-toc-181-80 class="nav flex-column pl-2"> <a href=#bug-fixes_45 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54380-2018-04-21 title="ClickHouse release 1.1.54380, 2018-04-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54380, 2018-04-21 </a> <nav id=toc-toc-181-81 class="nav flex-column pl-2"> <a href=#new-features_21 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_19 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_46 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_11 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54378-2018-04-16 title="ClickHouse release 1.1.54378, 2018-04-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54378, 2018-04-16 </a> <nav id=toc-toc-181-82 class="nav flex-column pl-2"> <a href=#new-features_22 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_20 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_47 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes_5 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> <a href=#backward-incompatible-changes_12 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54370-2018-03-16 title="ClickHouse release 1.1.54370, 2018-03-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54370, 2018-03-16 </a> <nav id=toc-toc-181-83 class="nav flex-column pl-2"> <a href=#new-features_23 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_21 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_48 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54362-2018-03-11 title="Clickhouse Release 1.1.54362, 2018-03-11" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54362, 2018-03-11 </a> <nav id=toc-toc-181-84 class="nav flex-column pl-2"> <a href=#new-features_24 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_22 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_49 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_13 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54343-2018-02-05 title="Clickhouse Release 1.1.54343, 2018-02-05" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54343, 2018-02-05 </a> <a href=#clickhouse-release-1-1-54342-2018-01-22 title="Clickhouse Release 1.1.54342, 2018-01-22" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54342, 2018-01-22 </a> <a href=#clickhouse-release-1-1-54337-2018-01-18 title="Clickhouse Release 1.1.54337, 2018-01-18" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54337, 2018-01-18 </a> <nav id=toc-toc-181-87 class="nav flex-column pl-2"> <a href=#new-features_25 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#performance-optimizations title="Performance optimizations:" class="nav-link text-wrap d-inline-block w-100"> Performance optimizations: </a> <a href=#bug-fixes_50 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-improvements_4 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> <a href=#backward-incompatible-changes_14 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#please-note-when-upgrading title="Please note when upgrading:" class="nav-link text-wrap d-inline-block w-100"> Please note when upgrading: </a> </nav> <a href=#clickhouse-release-1-1-54327-2017-12-21 title="ClickHouse release 1.1.54327, 2017-12-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54327, 2017-12-21 </a> <a href=#clickhouse-release-1-1-54318-2017-11-30 title="ClickHouse release 1.1.54318, 2017-11-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54318, 2017-11-30 </a> <a href=#clickhouse-release-1-1-54310-2017-11-01 title="ClickHouse release 1.1.54310, 2017-11-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54310, 2017-11-01 </a> <nav id=toc-toc-181-90 class="nav flex-column pl-2"> <a href=#new-features_26 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#backward-incompatible-changes_15 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#bug-fixes_51 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-improvements_5 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-1-1-54304-2017-10-19 title="ClickHouse release 1.1.54304, 2017-10-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54304, 2017-10-19 </a> <nav id=toc-toc-181-91 class="nav flex-column pl-2"> <a href=#new-features_27 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_52 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54292-2017-09-20 title="ClickHouse release 1.1.54292, 2017-09-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54292, 2017-09-20 </a> <nav id=toc-toc-181-92 class="nav flex-column pl-2"> <a href=#new-features_28 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_53 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54289-2017-09-13 title="ClickHouse release 1.1.54289, 2017-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54289, 2017-09-13 </a> <nav id=toc-toc-181-93 class="nav flex-column pl-2"> <a href=#new-features_29 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_54 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improved-workflow-for-developing-and-assembling-clickhouse title="Improved workflow for developing and assembling ClickHouse:" class="nav-link text-wrap d-inline-block w-100"> Improved workflow for developing and assembling ClickHouse: </a> <a href=#please-note-when-upgrading_1 title="Please note when upgrading:" class="nav-link text-wrap d-inline-block w-100"> Please note when upgrading: </a> </nav> <a href=#clickhouse-release-1-1-54284-2017-08-29 title="ClickHouse release 1.1.54284, 2017-08-29" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54284, 2017-08-29 </a> <a href=#clickhouse-release-1-1-54282-2017-08-23 title="ClickHouse release 1.1.54282, 2017-08-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54282, 2017-08-23 </a> <a href=#clickhouse-release-1-1-54276-2017-08-16 title="Clickhouse Release 1.1.54276, 2017-08-16" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54276, 2017-08-16 </a> <nav id=toc-toc-181-96 class="nav flex-column pl-2"> <a href=#new-features_30 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#main-changes title="Main changes:" class="nav-link text-wrap d-inline-block w-100"> Main changes: </a> <a href=#backward-incompatible-changes_16 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#complete-list-of-changes title="Complete list of changes:" class="nav-link text-wrap d-inline-block w-100"> Complete list of changes: </a> <a href=#bug-fixes_55 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improved-workflow-for-developing-and-assembling-clickhouse_1 title="Improved workflow for developing and assembling ClickHouse:" class="nav-link text-wrap d-inline-block w-100"> Improved workflow for developing and assembling ClickHouse: </a> </nav> <a href=#clickhouse-release-1-1-54245-2017-07-04 title="ClickHouse release 1.1.54245, 2017-07-04" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54245, 2017-07-04 </a> <nav id=toc-toc-181-97 class="nav flex-column pl-2"> <a href=#new-features_31 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#backward-incompatible-changes_17 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#minor-changes title="Minor changes:" class="nav-link text-wrap d-inline-block w-100"> Minor changes: </a> <a href=#bug-fixes_56 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#fixed-in-clickhouse-release-19-13-6-1-2019-09-20 title="Fixed in ClickHouse Release 19.13.6.1, 2019-09-20" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 19.13.6.1, 2019-09-20 </a> <nav id=toc-toc-181-98 class="nav flex-column pl-2"> <a href=#cve-2019-18657 title=CVE-2019-18657 class="nav-link text-wrap d-inline-block w-100"> CVE-2019-18657 </a> </nav> <a href=#fixed-in-clickhouse-release-18-12-13-2018-09-10 title="Fixed in ClickHouse Release 18.12.13, 2018-09-10" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 18.12.13, 2018-09-10 </a> <nav id=toc-toc-181-99 class="nav flex-column pl-2"> <a href=#cve-2018-14672 title=CVE-2018-14672 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14672 </a> </nav> <a href=#fixed-in-clickhouse-release-18-10-3-2018-08-13 title="Fixed in ClickHouse Release 18.10.3, 2018-08-13" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 18.10.3, 2018-08-13 </a> <nav id=toc-toc-181-100 class="nav flex-column pl-2"> <a href=#cve-2018-14671 title=CVE-2018-14671 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14671 </a> </nav> <a href=#fixed-in-clickhouse-release-1-1-54388-2018-06-28 title="Fixed in ClickHouse Release 1.1.54388, 2018-06-28" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 1.1.54388, 2018-06-28 </a> <nav id=toc-toc-181-101 class="nav flex-column pl-2"> <a href=#cve-2018-14668 title=CVE-2018-14668 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14668 </a> </nav> <a href=#fixed-in-clickhouse-release-1-1-54390-2018-07-06 title="Fixed in ClickHouse Release 1.1.54390, 2018-07-06" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 1.1.54390, 2018-07-06 </a> <nav id=toc-toc-181-102 class="nav flex-column pl-2"> <a href=#cve-2018-14669 title=CVE-2018-14669 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14669 </a> </nav> <a href=#fixed-in-clickhouse-release-1-1-54131-2017-01-10 title="Fixed in ClickHouse Release 1.1.54131, 2017-01-10" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 1.1.54131, 2017-01-10 </a> <nav id=toc-toc-181-103 class="nav flex-column pl-2"> <a href=#cve-2018-14670 title=CVE-2018-14670 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14670 </a> </nav> </nav> </nav> </div> </div> </div> <div id=content-wrapper class="col-md-10 p-2 p-md-5"> <div id=content> <script async type=text/javascript>
            
            document.write("<p><a name=\"../index/\"></a><a name=\"index/\"></a><a name=\"../../../../index/\"></a><a name=\"../../../index/\"></a><a name=\"../../index/\"></a><a name=\"../../../../../index/\"></a></p>\n<h2 id=\"shi-yao-shi-clickhouse\">\u4ec0\u4e48\u662fClickHouse\uff1f<a class=\"headerlink\" href=\"#shi-yao-shi-clickhouse\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse\u662f\u4e00\u4e2a\u7528\u4e8e\u8054\u673a\u5206\u6790(OLAP)\u7684\u5217\u5f0f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf(DBMS)\u3002</p>\n<p>\u5728\u4f20\u7edf\u7684\u884c\u5f0f\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6570\u636e\u6309\u5982\u4e0b\u987a\u5e8f\u5b58\u50a8\uff1a</p>\n<table>\n<thead>\n<tr>\n<th>Row</th>\n<th>WatchID</th>\n<th>JavaEnable</th>\n<th>Title</th>\n<th>GoodEvent</th>\n<th>EventTime</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>#0</td>\n<td>89354350662</td>\n<td>1</td>\n<td>Investor Relations</td>\n<td>1</td>\n<td>2016-05-18 05:19:20</td>\n</tr>\n<tr>\n<td>#1</td>\n<td>90329509958</td>\n<td>0</td>\n<td>Contact us</td>\n<td>1</td>\n<td>2016-05-18 08:10:20</td>\n</tr>\n<tr>\n<td>#2</td>\n<td>89953706054</td>\n<td>1</td>\n<td>Mission</td>\n<td>1</td>\n<td>2016-05-18 07:38:00</td>\n</tr>\n<tr>\n<td>#N</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<p>\u5904\u4e8e\u540c\u4e00\u884c\u4e2d\u7684\u6570\u636e\u603b\u662f\u88ab\u7269\u7406\u7684\u5b58\u50a8\u5728\u4e00\u8d77\u3002</p>\n<p class=\"grey\">\u5e38\u89c1\u7684\u884c\u5f0f\u6570\u636e\u5e93\u7cfb\u7edf\u6709\uff1a MySQL\u3001Postgres\u548cMS SQL Server\u3002<br /></p>\n<p>\u5728\u5217\u5f0f\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6570\u636e\u6309\u5982\u4e0b\u7684\u987a\u5e8f\u5b58\u50a8\uff1a</p>\n<table>\n<thead>\n<tr>\n<th>Row:</th>\n<th>#0</th>\n<th>#1</th>\n<th>#2</th>\n<th>#N</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>WatchID:</td>\n<td>89354350662</td>\n<td>90329509958</td>\n<td>89953706054</td>\n<td>...</td>\n</tr>\n<tr>\n<td>JavaEnable:</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>...</td>\n</tr>\n<tr>\n<td>Title:</td>\n<td>Investor Relations</td>\n<td>Contact us</td>\n<td>Mission</td>\n<td>...</td>\n</tr>\n<tr>\n<td>GoodEvent:</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>...</td>\n</tr>\n<tr>\n<td>EventTime:</td>\n<td>2016-05-18 05:19:20</td>\n<td>2016-05-18 08:10:20</td>\n<td>2016-05-18 07:38:00</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<p>\u8be5\u793a\u4f8b\u4e2d\u53ea\u5c55\u793a\u4e86\u6570\u636e\u5728\u5217\u5f0f\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u6392\u5217\u987a\u5e8f\u3002<br />\n\u5bf9\u4e8e\u5b58\u50a8\u800c\u8a00\uff0c\u5217\u5f0f\u6570\u636e\u5e93\u603b\u662f\u5c06\u540c\u4e00\u5217\u7684\u6570\u636e\u5b58\u50a8\u5728\u4e00\u8d77\uff0c\u4e0d\u540c\u5217\u7684\u6570\u636e\u4e5f\u603b\u662f\u5206\u5f00\u5b58\u50a8\u3002</p>\n<p class=\"grey\">\u5e38\u89c1\u7684\u5217\u5f0f\u6570\u636e\u5e93\u6709\uff1a Vertica\u3001 Paraccel (Actian Matrix\uff0cAmazon Redshift)\u3001 Sybase IQ\u3001 Exasol\u3001 Infobright\u3001 InfiniDB\u3001 MonetDB (VectorWise\uff0c Actian Vector)\u3001 LucidDB\u3001 SAP HANA\u3001 Google Dremel\u3001 Google PowerDrill\u3001 Druid\u3001 kdb+\u3002<br /></p>\n<p>\u4e0d\u540c\u7684\u5b58\u50a8\u65b9\u5f0f\u9002\u5408\u4e0d\u540c\u7684\u573a\u666f\uff0c\u8fd9\u91cc\u7684\u67e5\u8be2\u573a\u666f\u5305\u62ec\uff1a \u8fdb\u884c\u4e86\u54ea\u4e9b\u67e5\u8be2\uff0c\u591a\u4e45\u67e5\u8be2\u4e00\u6b21\u4ee5\u53ca\u5404\u7c7b\u67e5\u8be2\u7684\u6bd4\u4f8b\uff1b \u6bcf\u79cd\u67e5\u8be2\u8bfb\u53d6\u591a\u5c11\u6570\u636e\u2014\u2014\u2014\u2014\u884c\u3001\u5217\u548c\u5b57\u8282\uff1b\u8bfb\u53d6\u6570\u636e\u548c\u5199\u5165\u6570\u636e\u4e4b\u95f4\u7684\u5173\u7cfb\uff1b\u4f7f\u7528\u7684\u6570\u636e\u96c6\u5927\u5c0f\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u672c\u5730\u7684\u6570\u636e\u96c6\uff1b\u662f\u5426\u4f7f\u7528\u4e8b\u52a1,\u4ee5\u53ca\u5b83\u4eec\u662f\u5982\u4f55\u8fdb\u884c\u9694\u79bb\u7684\uff1b\u6570\u636e\u7684\u590d\u5236\u673a\u5236\u4e0e\u6570\u636e\u7684\u5b8c\u6574\u6027\u8981\u6c42\uff1b\u6bcf\u79cd\u7c7b\u578b\u7684\u67e5\u8be2\u8981\u6c42\u7684\u5ef6\u8fdf\u4e0e\u541e\u5410\u91cf\u7b49\u7b49\u3002</p>\n<p>\u7cfb\u7edf\u8d1f\u8f7d\u8d8a\u9ad8\uff0c\u6839\u636e\u4f7f\u7528\u573a\u666f\u8fdb\u884c\u5b9a\u5236\u5316\u5c31\u8d8a\u91cd\u8981\uff0c\u5e76\u4e14\u5b9a\u5236\u5c06\u4f1a\u53d8\u7684\u8d8a\u7cbe\u7ec6\u3002\u6ca1\u6709\u4e00\u4e2a\u7cfb\u7edf\u540c\u6837\u9002\u7528\u4e8e\u660e\u663e\u4e0d\u540c\u7684\u573a\u666f\u3002\u5982\u679c\u7cfb\u7edf\u9002\u7528\u4e8e\u5e7f\u6cdb\u7684\u573a\u666f\uff0c\u5728\u8d1f\u8f7d\u9ad8\u7684\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u573a\u666f\u53ef\u4ee5\u4f1a\u88ab\u516c\u5e73\u4f46\u4f4e\u6548\u5904\u7406\uff0c\u6216\u8005\u9ad8\u6548\u5904\u7406\u4e00\u5c0f\u90e8\u5206\u573a\u666f\u3002</p>\n<h3 id=\"olapchang-jing-de-guan-jian-te-zheng\">OLAP\u573a\u666f\u7684\u5173\u952e\u7279\u5f81<a class=\"headerlink\" href=\"#olapchang-jing-de-guan-jian-te-zheng\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>\u5927\u591a\u6570\u662f\u8bfb\u8bf7\u6c42</li>\n<li>\u6570\u636e\u603b\u662f\u4ee5\u76f8\u5f53\u5927\u7684\u6279(&gt; 1000 rows)\u8fdb\u884c\u5199\u5165</li>\n<li>\u4e0d\u4fee\u6539\u5df2\u6dfb\u52a0\u7684\u6570\u636e</li>\n<li>\u6bcf\u6b21\u67e5\u8be2\u90fd\u4ece\u6570\u636e\u5e93\u4e2d\u8bfb\u53d6\u5927\u91cf\u7684\u884c\uff0c\u4f46\u662f\u540c\u65f6\u53c8\u4ec5\u9700\u8981\u5c11\u91cf\u7684\u5217</li>\n<li>\u5bbd\u8868\uff0c\u5373\u6bcf\u4e2a\u8868\u5305\u542b\u7740\u5927\u91cf\u7684\u5217</li>\n<li>\u8f83\u5c11\u7684\u67e5\u8be2(\u901a\u5e38\u6bcf\u53f0\u670d\u52a1\u5668\u6bcf\u79d2\u6570\u767e\u4e2a\u67e5\u8be2\u6216\u66f4\u5c11)</li>\n<li>\u5bf9\u4e8e\u7b80\u5355\u67e5\u8be2\uff0c\u5141\u8bb8\u5ef6\u8fdf\u5927\u7ea650\u6beb\u79d2</li>\n<li>\u5217\u4e2d\u7684\u6570\u636e\u76f8\u5bf9\u8f83\u5c0f\uff1a \u6570\u5b57\u548c\u77ed\u5b57\u7b26\u4e32(\u4f8b\u5982\uff0c\u6bcf\u4e2aURL 60\u4e2a\u5b57\u8282)</li>\n<li>\u5904\u7406\u5355\u4e2a\u67e5\u8be2\u65f6\u9700\u8981\u9ad8\u541e\u5410\u91cf\uff08\u6bcf\u4e2a\u670d\u52a1\u5668\u6bcf\u79d2\u9ad8\u8fbe\u6570\u5341\u4ebf\u884c\uff09</li>\n<li>\u4e8b\u52a1\u4e0d\u662f\u5fc5\u987b\u7684</li>\n<li>\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u8981\u6c42\u4f4e</li>\n<li>\u6bcf\u4e00\u4e2a\u67e5\u8be2\u9664\u4e86\u4e00\u4e2a\u5927\u8868\u5916\u90fd\u5f88\u5c0f</li>\n<li>\u67e5\u8be2\u7ed3\u679c\u660e\u663e\u5c0f\u4e8e\u6e90\u6570\u636e\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u6570\u636e\u88ab\u8fc7\u6ee4\u6216\u805a\u5408\u540e\u80fd\u591f\u88ab\u76db\u653e\u5728\u5355\u53f0\u670d\u52a1\u5668\u7684\u5185\u5b58\u4e2d</li>\n</ul>\n<p>\u5f88\u5bb9\u6613\u53ef\u4ee5\u770b\u51fa\uff0cOLAP\u573a\u666f\u4e0e\u5176\u4ed6\u6d41\u884c\u573a\u666f(\u4f8b\u5982,OLTP\u6216K/V)\u6709\u5f88\u5927\u7684\u4e0d\u540c\uff0c \u56e0\u6b64\u60f3\u8981\u4f7f\u7528OLTP\u6216Key-Value\u6570\u636e\u5e93\u53bb\u9ad8\u6548\u7684\u5904\u7406\u5206\u6790\u67e5\u8be2\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u4f8b\u5982\uff0c\u4f7f\u7528OLAP\u6570\u636e\u5e93\u53bb\u5904\u7406\u5206\u6790\u8bf7\u6c42\u901a\u5e38\u8981\u4f18\u4e8e\u4f7f\u7528MongoDB\u6216Redis\u53bb\u5904\u7406\u5206\u6790\u8bf7\u6c42\u3002</p>\n<h3 id=\"lie-shi-shu-ju-ku-geng-gua-he-olapchang-jing-de-yuan-yin\">\u5217\u5f0f\u6570\u636e\u5e93\u66f4\u9002\u5408OLAP\u573a\u666f\u7684\u539f\u56e0<a class=\"headerlink\" href=\"#lie-shi-shu-ju-ku-geng-gua-he-olapchang-jing-de-yuan-yin\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5217\u5f0f\u6570\u636e\u5e93\u66f4\u9002\u5408\u4e8eOLAP\u573a\u666f(\u5bf9\u4e8e\u5927\u591a\u6570\u67e5\u8be2\u800c\u8a00\uff0c\u5904\u7406\u901f\u5ea6\u81f3\u5c11\u63d0\u9ad8\u4e86100\u500d)\uff0c\u4e0b\u9762\u8be6\u7ec6\u89e3\u91ca\u4e86\u539f\u56e0(\u901a\u8fc7\u56fe\u7247\u66f4\u6709\u5229\u4e8e\u76f4\u89c2\u7406\u89e3)\uff1a</p>\n<p><strong>\u884c\u5f0f</strong></p>\n<p><img alt=\"Row oriented\" src=\"../images/row_oriented.gif\" /></p>\n<p><strong>\u5217\u5f0f</strong></p>\n<p><img alt=\"Column oriented\" src=\"../images/column_oriented.gif\" /></p>\n<p>\u770b\u5230\u5dee\u522b\u4e86\u4e48\uff1f\u4e0b\u9762\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u4e3a\u4ec0\u4e48\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002</p>\n<h4 id=\"input-output\">Input/output<a class=\"headerlink\" href=\"#input-output\" title=\"Permanent link\">&para;</a></h4>\n<ol>\n<li>\u9488\u5bf9\u5206\u6790\u7c7b\u67e5\u8be2\uff0c\u901a\u5e38\u53ea\u9700\u8981\u8bfb\u53d6\u8868\u7684\u4e00\u5c0f\u90e8\u5206\u5217\u3002\u5728\u5217\u5f0f\u6570\u636e\u5e93\u4e2d\u4f60\u53ef\u4ee5\u53ea\u8bfb\u53d6\u4f60\u9700\u8981\u7684\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5982\u679c\u53ea\u9700\u8981\u8bfb\u53d6100\u5217\u4e2d\u76845\u5217\uff0c\u8fd9\u5c06\u5e2e\u52a9\u4f60\u6700\u5c11\u51cf\u5c1120\u500d\u7684I/O\u6d88\u8017\u3002</li>\n<li>\u7531\u4e8e\u6570\u636e\u603b\u662f\u6253\u5305\u6210\u6279\u91cf\u8bfb\u53d6\u7684\uff0c\u6240\u4ee5\u538b\u7f29\u662f\u975e\u5e38\u5bb9\u6613\u7684\u3002\u540c\u65f6\u6570\u636e\u6309\u5217\u5206\u522b\u5b58\u50a8\u8fd9\u4e5f\u66f4\u5bb9\u6613\u538b\u7f29\u3002\u8fd9\u8fdb\u4e00\u6b65\u964d\u4f4e\u4e86I/O\u7684\u4f53\u79ef\u3002</li>\n<li>\u7531\u4e8eI/O\u7684\u964d\u4f4e\uff0c\u8fd9\u5c06\u5e2e\u52a9\u66f4\u591a\u7684\u6570\u636e\u88ab\u7cfb\u7edf\u7f13\u5b58\u3002</li>\n</ol>\n<p>\u4f8b\u5982\uff0c\u67e5\u8be2\u201c\u7edf\u8ba1\u6bcf\u4e2a\u5e7f\u544a\u5e73\u53f0\u7684\u8bb0\u5f55\u6570\u91cf\u201d\u9700\u8981\u8bfb\u53d6\u201c\u5e7f\u544a\u5e73\u53f0ID\u201d\u8fd9\u4e00\u5217\uff0c\u5b83\u5728\u672a\u538b\u7f29\u7684\u60c5\u51b5\u4e0b\u9700\u89811\u4e2a\u5b57\u8282\u8fdb\u884c\u5b58\u50a8\u3002\u5982\u679c\u5927\u90e8\u5206\u6d41\u91cf\u4e0d\u662f\u6765\u81ea\u5e7f\u544a\u5e73\u53f0\uff0c\u90a3\u4e48\u8fd9\u4e00\u5217\u81f3\u5c11\u53ef\u4ee5\u4ee5\u5341\u500d\u7684\u538b\u7f29\u7387\u88ab\u538b\u7f29\u3002\u5f53\u91c7\u7528\u5feb\u901f\u538b\u7f29\u7b97\u6cd5\uff0c\u5b83\u7684\u89e3\u538b\u901f\u5ea6\u6700\u5c11\u5728\u5341\u4ebf\u5b57\u8282(\u672a\u538b\u7f29\u6570\u636e)\u6bcf\u79d2\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8fd9\u4e2a\u67e5\u8be2\u53ef\u4ee5\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u4ee5\u6bcf\u79d2\u5927\u7ea6\u51e0\u5341\u4ebf\u884c\u7684\u901f\u5ea6\u8fdb\u884c\u5904\u7406\u3002\u8fd9\u5b9e\u9645\u4e0a\u662f\u5f53\u524d\u5b9e\u73b0\u7684\u901f\u5ea6\u3002</p>\n<details>\n<p><summary>\u793a\u4f8b</summary></p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client\nClickHouse client version <span class=\"m\">0</span>.0.52053.\nConnecting to localhost:9000.\nConnected to ClickHouse server version <span class=\"m\">0</span>.0.52053.\n\n:<span class=\"o\">)</span> SELECT CounterID, count<span class=\"o\">()</span> FROM hits GROUP BY CounterID ORDER BY count<span class=\"o\">()</span> DESC LIMIT <span class=\"m\">20</span>\n\nSELECT\n    CounterID,\n    count<span class=\"o\">()</span>\nFROM hits\nGROUP BY CounterID\nORDER BY count<span class=\"o\">()</span> DESC\nLIMIT <span class=\"m\">20</span>\n\n\u250c\u2500CounterID\u2500\u252c\u2500\u2500count<span class=\"o\">()</span>\u2500\u2510\n\u2502    <span class=\"m\">114208</span> \u2502 <span class=\"m\">56057344</span> \u2502\n\u2502    <span class=\"m\">115080</span> \u2502 <span class=\"m\">51619590</span> \u2502\n\u2502      <span class=\"m\">3228</span> \u2502 <span class=\"m\">44658301</span> \u2502\n\u2502     <span class=\"m\">38230</span> \u2502 <span class=\"m\">42045932</span> \u2502\n\u2502    <span class=\"m\">145263</span> \u2502 <span class=\"m\">42042158</span> \u2502\n\u2502     <span class=\"m\">91244</span> \u2502 <span class=\"m\">38297270</span> \u2502\n\u2502    <span class=\"m\">154139</span> \u2502 <span class=\"m\">26647572</span> \u2502\n\u2502    <span class=\"m\">150748</span> \u2502 <span class=\"m\">24112755</span> \u2502\n\u2502    <span class=\"m\">242232</span> \u2502 <span class=\"m\">21302571</span> \u2502\n\u2502    <span class=\"m\">338158</span> \u2502 <span class=\"m\">13507087</span> \u2502\n\u2502     <span class=\"m\">62180</span> \u2502 <span class=\"m\">12229491</span> \u2502\n\u2502     <span class=\"m\">82264</span> \u2502 <span class=\"m\">12187441</span> \u2502\n\u2502    <span class=\"m\">232261</span> \u2502 <span class=\"m\">12148031</span> \u2502\n\u2502    <span class=\"m\">146272</span> \u2502 <span class=\"m\">11438516</span> \u2502\n\u2502    <span class=\"m\">168777</span> \u2502 <span class=\"m\">11403636</span> \u2502\n\u2502   <span class=\"m\">4120072</span> \u2502 <span class=\"m\">11227824</span> \u2502\n\u2502  <span class=\"m\">10938808</span> \u2502 <span class=\"m\">10519739</span> \u2502\n\u2502     <span class=\"m\">74088</span> \u2502  <span class=\"m\">9047015</span> \u2502\n\u2502    <span class=\"m\">115079</span> \u2502  <span class=\"m\">8837972</span> \u2502\n\u2502    <span class=\"m\">337234</span> \u2502  <span class=\"m\">8205961</span> \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n<span class=\"m\">20</span> rows in set. Elapsed: <span class=\"m\">0</span>.153 sec. Processed <span class=\"m\">1</span>.00 billion rows, <span class=\"m\">4</span>.00 GB <span class=\"o\">(</span><span class=\"m\">6</span>.53 billion rows/s., <span class=\"m\">26</span>.10 GB/s.<span class=\"o\">)</span>\n\n:<span class=\"o\">)</span>\n</code></pre></div>\n\n\n</details>\n<h4 id=\"cpu\">CPU<a class=\"headerlink\" href=\"#cpu\" title=\"Permanent link\">&para;</a></h4>\n<p>\u7531\u4e8e\u6267\u884c\u4e00\u4e2a\u67e5\u8be2\u9700\u8981\u5904\u7406\u5927\u91cf\u7684\u884c\uff0c\u56e0\u6b64\u5728\u6574\u4e2a\u5411\u91cf\u4e0a\u6267\u884c\u6240\u6709\u64cd\u4f5c\u5c06\u6bd4\u5728\u6bcf\u4e00\u884c\u4e0a\u6267\u884c\u6240\u6709\u64cd\u4f5c\u66f4\u52a0\u9ad8\u6548\u3002\u540c\u65f6\u8fd9\u5c06\u6709\u52a9\u4e8e\u5b9e\u73b0\u4e00\u4e2a\u51e0\u4e4e\u6ca1\u6709\u8c03\u7528\u6210\u672c\u7684\u67e5\u8be2\u5f15\u64ce\u3002\u5982\u679c\u4f60\u4e0d\u8fd9\u6837\u505a\uff0c\u4f7f\u7528\u4efb\u4f55\u4e00\u4e2a\u673a\u68b0\u786c\u76d8\uff0c\u67e5\u8be2\u5f15\u64ce\u90fd\u4e0d\u53ef\u907f\u514d\u7684\u505c\u6b62CPU\u8fdb\u884c\u7b49\u5f85\u3002\u6240\u4ee5\uff0c\u5728\u6570\u636e\u6309\u5217\u5b58\u50a8\u5e76\u4e14\u6309\u5217\u6267\u884c\u662f\u5f88\u6709\u610f\u4e49\u7684\u3002</p>\n<p>\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\uff1a</p>\n<ol>\n<li>\n<p>\u5411\u91cf\u5f15\u64ce\uff1a\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u4e3a\u5411\u91cf\u800c\u4e0d\u662f\u4e3a\u5355\u4e2a\u503c\u7f16\u5199\u7684\u3002\u8fd9\u610f\u5473\u7740\u591a\u4e2a\u64cd\u4f5c\u4e4b\u95f4\u7684\u4e0d\u518d\u9700\u8981\u9891\u7e41\u7684\u8c03\u7528\uff0c\u5e76\u4e14\u8c03\u7528\u7684\u6210\u672c\u57fa\u672c\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002\u64cd\u4f5c\u4ee3\u7801\u5305\u542b\u4e00\u4e2a\u4f18\u5316\u7684\u5185\u90e8\u5faa\u73af\u3002</p>\n</li>\n<li>\n<p>\u4ee3\u7801\u751f\u6210\uff1a\u751f\u6210\u4e00\u6bb5\u4ee3\u7801\uff0c\u5305\u542b\u67e5\u8be2\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u3002</p>\n</li>\n</ol>\n<p>\u8fd9\u662f\u4e0d\u5e94\u8be5\u5728\u4e00\u4e2a\u901a\u7528\u6570\u636e\u5e93\u4e2d\u5b9e\u73b0\u7684\uff0c\u56e0\u4e3a\u8fd9\u5728\u8fd0\u884c\u7b80\u5355\u67e5\u8be2\u65f6\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002\u4f46\u662f\u4e5f\u6709\u4f8b\u5916\uff0c\u4f8b\u5982\uff0cMemSQL\u4f7f\u7528\u4ee3\u7801\u751f\u6210\u6765\u51cf\u5c11\u5904\u7406SQL\u67e5\u8be2\u7684\u5ef6\u8fdf(\u53ea\u662f\u4e3a\u4e86\u6bd4\u8f83\uff0c\u5206\u6790\u578b\u6570\u636e\u5e93\u901a\u5e38\u9700\u8981\u4f18\u5316\u7684\u662f\u541e\u5410\u800c\u4e0d\u662f\u5ef6\u8fdf)\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u4e3a\u4e86\u63d0\u9ad8CPU\u6548\u7387\uff0c\u67e5\u8be2\u8bed\u8a00\u5fc5\u987b\u662f\u58f0\u660e\u578b\u7684(SQL\u6216MDX)\uff0c \u6216\u8005\u81f3\u5c11\u4e00\u4e2a\u5411\u91cf(J\uff0cK)\u3002 \u67e5\u8be2\u5e94\u8be5\u53ea\u5305\u542b\u9690\u5f0f\u5faa\u73af\uff0c\u5141\u8bb8\u8fdb\u884c\u4f18\u5316\u3002</p>\n<p><a name=\"../../../introduction/distinctive_features/\"></a><a name=\"introduction/distinctive_features/\"></a><a name=\"../introduction/distinctive_features/\"></a><a name=\"../../introduction/distinctive_features/\"></a><a name=\"distinctive_features/\"></a><a name=\"../../../../../introduction/distinctive_features/\"></a><a name=\"../../../../introduction/distinctive_features/\"></a></p>\n<h2 id=\"clickhousede-du-te-gong-neng\">ClickHouse\u7684\u72ec\u7279\u529f\u80fd<a class=\"headerlink\" href=\"#clickhousede-du-te-gong-neng\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"zhen-zheng-de-lie-shi-shu-ju-ku-guan-li-xi-tong\">\u771f\u6b63\u7684\u5217\u5f0f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf<a class=\"headerlink\" href=\"#zhen-zheng-de-lie-shi-shu-ju-ku-guan-li-xi-tong\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u4e00\u4e2a\u771f\u6b63\u7684\u5217\u5f0f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d\uff0c\u9664\u4e86\u6570\u636e\u672c\u8eab\u5916\u4e0d\u5e94\u8be5\u5b58\u5728\u5176\u4ed6\u989d\u5916\u7684\u6570\u636e\u3002\u8fd9\u610f\u5473\u7740\u4e3a\u4e86\u907f\u514d\u5728\u503c\u65c1\u8fb9\u5b58\u50a8\u5b83\u4eec\u7684\u957f\u5ea6\u201cnumber\u201d\uff0c\u4f60\u5fc5\u987b\u652f\u6301\u56fa\u5b9a\u957f\u5ea6\u6570\u503c\u7c7b\u578b\u3002\u4f8b\u5982\uff0c10\u4ebf\u4e2aUInt8\u7c7b\u578b\u7684\u6570\u636e\u5728\u672a\u538b\u7f29\u7684\u60c5\u51b5\u4e0b\u5927\u7ea6\u6d88\u80171GB\u5de6\u53f3\u7684\u7a7a\u95f4\uff0c\u5982\u679c\u4e0d\u662f\u8fd9\u6837\u7684\u8bdd\uff0c\u8fd9\u5c06\u5bf9CPU\u7684\u4f7f\u7528\u4ea7\u751f\u5f3a\u70c8\u5f71\u54cd\u3002\u5373\u4f7f\u662f\u5728\u672a\u538b\u7f29\u7684\u60c5\u51b5\u4e0b\uff0c\u7d27\u51d1\u7684\u5b58\u50a8\u6570\u636e\u4e5f\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u56e0\u4e3a\u89e3\u538b\u7f29\u7684\u901f\u5ea6\u4e3b\u8981\u53d6\u51b3\u4e8e\u672a\u538b\u7f29\u6570\u636e\u7684\u5927\u5c0f\u3002</p>\n<p>\u8fd9\u662f\u975e\u5e38\u503c\u5f97\u6ce8\u610f\u7684\uff0c\u56e0\u4e3a\u5728\u4e00\u4e9b\u5176\u4ed6\u7cfb\u7edf\u4e2d\u4e5f\u53ef\u4ee5\u5c06\u4e0d\u540c\u7684\u5217\u5206\u522b\u8fdb\u884c\u5b58\u50a8\uff0c\u4f46\u7531\u4e8e\u5bf9\u5176\u4ed6\u573a\u666f\u8fdb\u884c\u7684\u4f18\u5316\uff0c\u4f7f\u5176\u65e0\u6cd5\u6709\u6548\u7684\u5904\u7406\u5206\u6790\u67e5\u8be2\u3002\u4f8b\u5982\uff1a HBase\uff0cBigTable\uff0cCassandra\uff0cHyperTable\u3002\u5728\u8fd9\u4e9b\u7cfb\u7edf\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5f97\u5230\u6bcf\u79d2\u6570\u5341\u4e07\u7684\u541e\u5410\u80fd\u529b\uff0c\u4f46\u662f\u65e0\u6cd5\u5f97\u5230\u6bcf\u79d2\u51e0\u4ebf\u884c\u7684\u541e\u5410\u80fd\u529b\u3002</p>\n<p>\u9700\u8981\u8bf4\u660e\u7684\u662f\uff0cClickHouse\u4e0d\u5355\u5355\u662f\u4e00\u4e2a\u6570\u636e\u5e93\uff0c \u5b83\u662f\u4e00\u4e2a\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u3002\u56e0\u4e3a\u5b83\u5141\u8bb8\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u8868\u548c\u6570\u636e\u5e93\u3001\u52a0\u8f7d\u6570\u636e\u548c\u8fd0\u884c\u67e5\u8be2\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u914d\u7f6e\u6216\u91cd\u542f\u670d\u52a1\u3002</p>\n<h3 id=\"shu-ju-ya-suo\">\u6570\u636e\u538b\u7f29<a class=\"headerlink\" href=\"#shu-ju-ya-suo\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u4e00\u4e9b\u5217\u5f0f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d(\u4f8b\u5982\uff1aInfiniDB CE \u548c MonetDB) \u5e76\u6ca1\u6709\u4f7f\u7528\u6570\u636e\u538b\u7f29\u3002\u4f46\u662f, \u82e5\u60f3\u8fbe\u5230\u6bd4\u8f83\u4f18\u5f02\u7684\u6027\u80fd\uff0c\u6570\u636e\u538b\u7f29\u786e\u5b9e\u8d77\u5230\u4e86\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528\u3002</p>\n<h3 id=\"shu-ju-de-ci-pan-cun-chu\">\u6570\u636e\u7684\u78c1\u76d8\u5b58\u50a8<a class=\"headerlink\" href=\"#shu-ju-de-ci-pan-cun-chu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8bb8\u591a\u7684\u5217\u5f0f\u6570\u636e\u5e93(\u5982 SAP HANA, Google PowerDrill)\u53ea\u80fd\u5728\u5185\u5b58\u4e2d\u5de5\u4f5c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u9020\u6210\u6bd4\u5b9e\u9645\u66f4\u591a\u7684\u8bbe\u5907\u9884\u7b97\u3002ClickHouse\u88ab\u8bbe\u8ba1\u7528\u4e8e\u5de5\u4f5c\u5728\u4f20\u7edf\u78c1\u76d8\u4e0a\u7684\u7cfb\u7edf\uff0c\u5b83\u63d0\u4f9b\u6bcfGB\u66f4\u4f4e\u7684\u5b58\u50a8\u6210\u672c\uff0c\u4f46\u5982\u679c\u6709\u53ef\u4ee5\u4f7f\u7528SSD\u548c\u5185\u5b58\uff0c\u5b83\u4e5f\u4f1a\u5408\u7406\u7684\u5229\u7528\u8fd9\u4e9b\u8d44\u6e90\u3002</p>\n<h3 id=\"duo-he-xin-bing-xing-chu-li\">\u591a\u6838\u5fc3\u5e76\u884c\u5904\u7406<a class=\"headerlink\" href=\"#duo-he-xin-bing-xing-chu-li\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse\u4f1a\u4f7f\u7528\u670d\u52a1\u5668\u4e0a\u4e00\u5207\u53ef\u7528\u7684\u8d44\u6e90\uff0c\u4ece\u800c\u4ee5\u6700\u81ea\u7136\u7684\u65b9\u5f0f\u5e76\u884c\u5904\u7406\u5927\u578b\u67e5\u8be2\u3002</p>\n<h3 id=\"duo-fu-wu-qi-fen-bu-shi-chu-li\">\u591a\u670d\u52a1\u5668\u5206\u5e03\u5f0f\u5904\u7406<a class=\"headerlink\" href=\"#duo-fu-wu-qi-fen-bu-shi-chu-li\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0a\u9762\u63d0\u5230\u7684\u5217\u5f0f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d\uff0c\u51e0\u4e4e\u6ca1\u6709\u4e00\u4e2a\u652f\u6301\u5206\u5e03\u5f0f\u7684\u67e5\u8be2\u5904\u7406\u3002<br />\n\u5728ClickHouse\u4e2d\uff0c\u6570\u636e\u53ef\u4ee5\u4fdd\u5b58\u5728\u4e0d\u540c\u7684shard\u4e0a\uff0c\u6bcf\u4e00\u4e2ashard\u90fd\u7531\u4e00\u7ec4\u7528\u4e8e\u5bb9\u9519\u7684replica\u7ec4\u6210\uff0c\u67e5\u8be2\u53ef\u4ee5\u5e76\u884c\u5730\u5728\u6240\u6709shard\u4e0a\u8fdb\u884c\u5904\u7406\u3002\u8fd9\u4e9b\u5bf9\u7528\u6237\u6765\u8bf4\u662f\u900f\u660e\u7684</p>\n<h3 id=\"zhi-chi-sql\">\u652f\u6301SQL<a class=\"headerlink\" href=\"#zhi-chi-sql\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse\u652f\u6301\u57fa\u4e8eSQL\u7684\u58f0\u660e\u5f0f\u67e5\u8be2\u8bed\u8a00\uff0c\u8be5\u8bed\u8a00\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u662f\u4e0eSQL\u6807\u51c6\u517c\u5bb9\u7684\u3002<br />\n\u652f\u6301\u7684\u67e5\u8be2\u5305\u62ec GROUP BY\uff0cORDER BY\uff0cIN\uff0cJOIN\u4ee5\u53ca\u975e\u76f8\u5173\u5b50\u67e5\u8be2\u3002<br />\n\u4e0d\u652f\u6301\u7a97\u53e3\u51fd\u6570\u548c\u76f8\u5173\u5b50\u67e5\u8be2\u3002</p>\n<h3 id=\"xiang-liang-yin-qing\">\u5411\u91cf\u5f15\u64ce<a class=\"headerlink\" href=\"#xiang-liang-yin-qing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4e86\u9ad8\u6548\u7684\u4f7f\u7528CPU\uff0c\u6570\u636e\u4e0d\u4ec5\u4ec5\u6309\u5217\u5b58\u50a8\uff0c\u540c\u65f6\u8fd8\u6309\u5411\u91cf(\u5217\u7684\u4e00\u90e8\u5206)\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u6837\u53ef\u4ee5\u66f4\u52a0\u9ad8\u6548\u5730\u4f7f\u7528CPU\u3002</p>\n<h3 id=\"shi-shi-de-shu-ju-geng-xin\">\u5b9e\u65f6\u7684\u6570\u636e\u66f4\u65b0<a class=\"headerlink\" href=\"#shi-shi-de-shu-ju-geng-xin\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse\u652f\u6301\u5728\u8868\u4e2d\u5b9a\u4e49\u4e3b\u952e\u3002\u4e3a\u4e86\u4f7f\u67e5\u8be2\u80fd\u591f\u5feb\u901f\u5728\u4e3b\u952e\u4e2d\u8fdb\u884c\u8303\u56f4\u67e5\u627e\uff0c\u6570\u636e\u603b\u662f\u4ee5\u589e\u91cf\u7684\u65b9\u5f0f\u6709\u5e8f\u7684\u5b58\u50a8\u5728MergeTree\u4e2d\u3002\u56e0\u6b64\uff0c\u6570\u636e\u53ef\u4ee5\u6301\u7eed\u4e0d\u65ad\u5730\u9ad8\u6548\u7684\u5199\u5165\u5230\u8868\u4e2d\uff0c\u5e76\u4e14\u5199\u5165\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u5b58\u5728\u4efb\u4f55\u52a0\u9501\u7684\u884c\u4e3a\u3002</p>\n<h3 id=\"suo-yin\">\u7d22\u5f15<a class=\"headerlink\" href=\"#suo-yin\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6309\u7167\u4e3b\u952e\u5bf9\u6570\u636e\u8fdb\u884c\u6392\u5e8f\uff0c\u8fd9\u5c06\u5e2e\u52a9ClickHouse\u5728\u51e0\u5341\u6beb\u79d2\u4ee5\u5185\u5b8c\u6210\u5bf9\u6570\u636e\u7279\u5b9a\u503c\u6216\u8303\u56f4\u7684\u67e5\u627e\u3002</p>\n<h3 id=\"gua-he-zai-xian-cha-xun\">\u9002\u5408\u5728\u7ebf\u67e5\u8be2<a class=\"headerlink\" href=\"#gua-he-zai-xian-cha-xun\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u7ebf\u67e5\u8be2\u610f\u5473\u7740\u5728\u6ca1\u6709\u5bf9\u6570\u636e\u505a\u4efb\u4f55\u9884\u5904\u7406\u7684\u60c5\u51b5\u4e0b\u4ee5\u6781\u4f4e\u7684\u5ef6\u8fdf\u5904\u7406\u67e5\u8be2\u5e76\u5c06\u7ed3\u679c\u52a0\u8f7d\u5230\u7528\u6237\u7684\u9875\u9762\u4e2d\u3002");
            
            document.write("</p>\n<h3 id=\"zhi-chi-jin-si-ji-suan\">\u652f\u6301\u8fd1\u4f3c\u8ba1\u7b97<a class=\"headerlink\" href=\"#zhi-chi-jin-si-ji-suan\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse\u63d0\u4f9b\u5404\u79cd\u5404\u6837\u5728\u5141\u8bb8\u727a\u7272\u6570\u636e\u7cbe\u5ea6\u7684\u60c5\u51b5\u4e0b\u5bf9\u67e5\u8be2\u8fdb\u884c\u52a0\u901f\u7684\u65b9\u6cd5\uff1a</p>\n<ol>\n<li>\u7528\u4e8e\u8fd1\u4f3c\u8ba1\u7b97\u7684\u5404\u7c7b\u805a\u5408\u51fd\u6570\uff0c\u5982\uff1adistinct values, medians, quantiles</li>\n<li>\u57fa\u4e8e\u6570\u636e\u7684\u90e8\u5206\u6837\u672c\u8fdb\u884c\u8fd1\u4f3c\u67e5\u8be2\u3002\u8fd9\u65f6\uff0c\u4ec5\u4f1a\u4ece\u78c1\u76d8\u68c0\u7d22\u5c11\u90e8\u5206\u6bd4\u4f8b\u7684\u6570\u636e\u3002</li>\n<li>\u4e0d\u4f7f\u7528\u5168\u90e8\u7684\u805a\u5408\u6761\u4ef6\uff0c\u901a\u8fc7\u968f\u673a\u9009\u62e9\u6709\u9650\u4e2a\u6570\u636e\u805a\u5408\u6761\u4ef6\u8fdb\u884c\u805a\u5408\u3002\u8fd9\u5728\u6570\u636e\u805a\u5408\u6761\u4ef6\u6ee1\u8db3\u67d0\u4e9b\u5206\u5e03\u6761\u4ef6\u4e0b\uff0c\u5728\u63d0\u4f9b\u76f8\u5f53\u51c6\u786e\u7684\u805a\u5408\u7ed3\u679c\u7684\u540c\u65f6\u964d\u4f4e\u4e86\u8ba1\u7b97\u8d44\u6e90\u7684\u4f7f\u7528\u3002</li>\n</ol>\n<h3 id=\"zhi-chi-shu-ju-fu-zhi-he-shu-ju-wan-zheng-xing\">\u652f\u6301\u6570\u636e\u590d\u5236\u548c\u6570\u636e\u5b8c\u6574\u6027<a class=\"headerlink\" href=\"#zhi-chi-shu-ju-fu-zhi-he-shu-ju-wan-zheng-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse\u4f7f\u7528\u5f02\u6b65\u7684\u591a\u4e3b\u590d\u5236\u6280\u672f\u3002\u5f53\u6570\u636e\u88ab\u5199\u5165\u4efb\u4f55\u4e00\u4e2a\u53ef\u7528\u526f\u672c\u540e\uff0c\u7cfb\u7edf\u4f1a\u5728\u540e\u53f0\u5c06\u6570\u636e\u5206\u53d1\u7ed9\u5176\u4ed6\u526f\u672c\uff0c\u4ee5\u4fdd\u8bc1\u7cfb\u7edf\u5728\u4e0d\u540c\u526f\u672c\u4e0a\u4fdd\u6301\u76f8\u540c\u7684\u6570\u636e\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0bClickHouse\u80fd\u5728\u6545\u969c\u540e\u81ea\u52a8\u6062\u590d\uff0c\u5728\u4e00\u4e9b\u5c11\u6570\u7684\u590d\u6742\u60c5\u51b5\u4e0b\u9700\u8981\u624b\u52a8\u6062\u590d\u3002</p>\n<p>\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 <a href=\"#../operations/table_engines/replication/\">\u6570\u636e\u590d\u5236</a>\u3002</p>\n<p><a name=\"introduction/features_considered_disadvantages/\"></a><a name=\"../../../introduction/features_considered_disadvantages/\"></a><a name=\"../../../../../introduction/features_considered_disadvantages/\"></a><a name=\"../introduction/features_considered_disadvantages/\"></a><a name=\"../../../../introduction/features_considered_disadvantages/\"></a><a name=\"../../introduction/features_considered_disadvantages/\"></a><a name=\"features_considered_disadvantages/\"></a></p>\n<h2 id=\"clickhouseke-yi-kao-lu-que-dian-de-gong-neng\">ClickHouse\u53ef\u4ee5\u8003\u8651\u7f3a\u70b9\u7684\u529f\u80fd<a class=\"headerlink\" href=\"#clickhouseke-yi-kao-lu-que-dian-de-gong-neng\" title=\"Permanent link\">&para;</a></h2>\n<ol>\n<li>\u6ca1\u6709\u5b8c\u6574\u7684\u4e8b\u52a1\u652f\u6301\u3002</li>\n<li>\u7f3a\u5c11\u9ad8\u9891\u7387\uff0c\u4f4e\u5ef6\u8fdf\u7684\u4fee\u6539\u6216\u5220\u9664\u5df2\u5b58\u5728\u6570\u636e\u7684\u80fd\u529b\u3002\u4ec5\u80fd\u7528\u4e8e\u6279\u91cf\u5220\u9664\u6216\u4fee\u6539\u6570\u636e\uff0c\u4f46\u8fd9\u7b26\u5408 <a href=\"https://gdpr-info.eu\" rel=\"external nofollow noreferrer\">GDPR</a>\u3002</li>\n<li>\u7a00\u758f\u7d22\u5f15\u4f7f\u5f97ClickHouse\u4e0d\u9002\u5408\u901a\u8fc7\u5176\u952e\u68c0\u7d22\u5355\u884c\u7684\u70b9\u67e5\u8be2\u3002</li>\n</ol>\n<p><a name=\"../../../../../introduction/performance/\"></a><a name=\"../../../introduction/performance/\"></a><a name=\"../introduction/performance/\"></a><a name=\"introduction/performance/\"></a><a name=\"../../introduction/performance/\"></a><a name=\"../../../../introduction/performance/\"></a><a name=\"performance/\"></a></p>\n<h2 id=\"performance\">Performance<a class=\"headerlink\" href=\"#performance\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6839\u636eYandex\u7684\u5185\u90e8\u6d4b\u8bd5\u7ed3\u679c\uff0cClickHouse\u8868\u73b0\u51fa\u4e86\u6bd4\u540c\u7c7b\u53ef\u6bd4\u8f83\u4ea7\u54c1\u66f4\u4f18\u7684\u6027\u80fd\u3002\u4f60\u53ef\u4ee5\u5728 <a href=\"https://clickhouse.yandex/benchmark.html\" rel=\"external nofollow noreferrer\">\u8fd9\u91cc</a> \u67e5\u770b\u5177\u4f53\u7684\u6d4b\u8bd5\u7ed3\u679c\u3002</p>\n<p>\u8bb8\u591a\u5176\u4ed6\u7684\u6d4b\u8bd5\u4e5f\u8bc1\u5b9e\u8fd9\u4e00\u70b9\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e92\u8054\u7f51\u641c\u7d22\u5230\u5b83\u4eec\uff0c\u6216\u8005\u4f60\u4e5f\u53ef\u4ee5\u4ece <a href=\"https://clickhouse.yandex/#independent-benchmarks\" rel=\"external nofollow noreferrer\">\u6211\u4eec\u6536\u96c6\u7684\u90e8\u5206\u76f8\u5173\u8fde\u63a5</a> \u4e2d\u67e5\u770b\u3002</p>\n<h3 id=\"dan-ge-da-cha-xun-de-tun-tu-liang\">\u5355\u4e2a\u5927\u67e5\u8be2\u7684\u541e\u5410\u91cf<a class=\"headerlink\" href=\"#dan-ge-da-cha-xun-de-tun-tu-liang\" title=\"Permanent link\">&para;</a></h3>\n<p>\u541e\u5410\u91cf\u53ef\u4ee5\u4f7f\u7528\u6bcf\u79d2\u5904\u7406\u7684\u884c\u6570\u6216\u6bcf\u79d2\u5904\u7406\u7684\u5b57\u8282\u6570\u6765\u8861\u91cf\u3002\u5982\u679c\u6570\u636e\u88ab\u653e\u7f6e\u5728page cache\u4e2d\uff0c\u5219\u4e00\u4e2a\u4e0d\u592a\u590d\u6742\u7684\u67e5\u8be2\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u5927\u7ea6\u80fd\u591f\u4ee52-10GB\uff0fs\uff08\u672a\u538b\u7f29\uff09\u7684\u901f\u5ea6\u8fdb\u884c\u5904\u7406\uff08\u5bf9\u4e8e\u7b80\u5355\u7684\u67e5\u8be2\uff0c\u901f\u5ea6\u53ef\u4ee5\u8fbe\u523030GB\uff0fs\uff09\u3002\u5982\u679c\u6570\u636e\u6ca1\u6709\u5728page cache\u4e2d\u7684\u8bdd\uff0c\u90a3\u4e48\u901f\u5ea6\u5c06\u53d6\u51b3\u4e8e\u4f60\u7684\u78c1\u76d8\u7cfb\u7edf\u548c\u6570\u636e\u7684\u538b\u7f29\u7387\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a\u78c1\u76d8\u5141\u8bb8\u4ee5400MB\uff0fs\u7684\u901f\u5ea6\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u4e14\u6570\u636e\u538b\u7f29\u7387\u662f3\uff0c\u5219\u6570\u636e\u7684\u5904\u7406\u901f\u5ea6\u4e3a1.2GB/s\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u4f60\u662f\u5728\u63d0\u53d6\u4e00\u4e2a10\u5b57\u8282\u7684\u5217\uff0c\u90a3\u4e48\u5b83\u7684\u5904\u7406\u901f\u5ea6\u5927\u7ea6\u662f1-2\u4ebf\u884c\u6bcf\u79d2\u3002</p>\n<p>\u5bf9\u4e8e\u5206\u5e03\u5f0f\u5904\u7406\uff0c\u5904\u7406\u901f\u5ea6\u51e0\u4e4e\u662f\u7ebf\u6027\u6269\u5c55\u7684\uff0c\u4f46\u8fd9\u53d7\u9650\u4e8e\u805a\u5408\u6216\u6392\u5e8f\u7684\u7ed3\u679c\u4e0d\u662f\u90a3\u4e48\u5927\u7684\u60c5\u51b5\u4e0b\u3002</p>\n<h3 id=\"chu-li-duan-cha-xun-de-yan-chi-shi-jian\">\u5904\u7406\u77ed\u67e5\u8be2\u7684\u5ef6\u8fdf\u65f6\u95f4<a class=\"headerlink\" href=\"#chu-li-duan-cha-xun-de-yan-chi-shi-jian\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u4e00\u4e2a\u67e5\u8be2\u4f7f\u7528\u4e3b\u952e\u5e76\u4e14\u6ca1\u6709\u592a\u591a\u884c(\u51e0\u5341\u4e07)\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4e14\u6ca1\u6709\u67e5\u8be2\u592a\u591a\u7684\u5217\uff0c\u90a3\u4e48\u5728\u6570\u636e\u88abpage cache\u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u7684\u5ef6\u8fdf\u5e94\u8be5\u5c0f\u4e8e50\u6beb\u79d2(\u5728\u6700\u4f73\u7684\u60c5\u51b5\u4e0b\u5e94\u8be5\u5c0f\u4e8e10\u6beb\u79d2)\u3002 \u5426\u5219\uff0c\u5ef6\u8fdf\u53d6\u51b3\u4e8e\u6570\u636e\u7684\u67e5\u627e\u6b21\u6570\u3002\u5982\u679c\u4f60\u5f53\u524d\u4f7f\u7528\u7684\u662fHDD\uff0c\u5728\u6570\u636e\u6ca1\u6709\u52a0\u8f7d\u7684\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u6240\u9700\u8981\u7684\u5ef6\u8fdf\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u516c\u5f0f\u8ba1\u7b97\u5f97\u77e5\uff1a \u67e5\u627e\u65f6\u95f4\uff0810 ms\uff09 * \u67e5\u8be2\u7684\u5217\u7684\u6570\u91cf * \u67e5\u8be2\u7684\u6570\u636e\u5757\u7684\u6570\u91cf\u3002</p>\n<h3 id=\"chu-li-da-liang-duan-cha-xun-de-tun-tu-liang\">\u5904\u7406\u5927\u91cf\u77ed\u67e5\u8be2\u7684\u541e\u5410\u91cf<a class=\"headerlink\" href=\"#chu-li-da-liang-duan-cha-xun-de-tun-tu-liang\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cClickHouse\u53ef\u4ee5\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u6bcf\u79d2\u5904\u7406\u6570\u767e\u4e2a\u67e5\u8be2\uff08\u5728\u6700\u4f73\u7684\u60c5\u51b5\u4e0b\u6700\u591a\u53ef\u4ee5\u5904\u7406\u6570\u5343\u4e2a\uff09\u3002\u4f46\u662f\u7531\u4e8e\u8fd9\u4e0d\u9002\u7528\u4e8e\u5206\u6790\u578b\u573a\u666f\u3002\u56e0\u6b64\u6211\u4eec\u5efa\u8bae\u6bcf\u79d2\u6700\u591a\u67e5\u8be2100\u6b21\u3002</p>\n<h3 id=\"shu-ju-de-xie-ru-xing-neng\">\u6570\u636e\u7684\u5199\u5165\u6027\u80fd<a class=\"headerlink\" href=\"#shu-ju-de-xie-ru-xing-neng\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6211\u4eec\u5efa\u8bae\u6bcf\u6b21\u5199\u5165\u4e0d\u5c11\u4e8e1000\u884c\u7684\u6279\u91cf\u5199\u5165\uff0c\u6216\u6bcf\u79d2\u4e0d\u8d85\u8fc7\u4e00\u4e2a\u5199\u5165\u8bf7\u6c42\u3002\u5f53\u4f7f\u7528tab-separated\u683c\u5f0f\u5c06\u4e00\u4efd\u6570\u636e\u5199\u5165\u5230MergeTree\u8868\u4e2d\u65f6\uff0c\u5199\u5165\u901f\u5ea6\u5927\u7ea6\u4e3a50\u5230200MB/s\u3002\u5982\u679c\u60a8\u5199\u5165\u7684\u6570\u636e\u6bcf\u884c\u4e3a1Kb\uff0c\u90a3\u4e48\u5199\u5165\u7684\u901f\u5ea6\u4e3a50\uff0c000\u5230200\uff0c000\u884c\u6bcf\u79d2\u3002\u5982\u679c\u60a8\u7684\u884c\u66f4\u5c0f\uff0c\u90a3\u4e48\u5199\u5165\u901f\u5ea6\u5c06\u66f4\u9ad8\u3002\u4e3a\u4e86\u63d0\u9ad8\u5199\u5165\u6027\u80fd\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2aINSERT\u8fdb\u884c\u5e76\u884c\u5199\u5165\uff0c\u8fd9\u5c06\u5e26\u6765\u7ebf\u6027\u7684\u6027\u80fd\u63d0\u5347\u3002</p>\n<p><a name=\"../../introduction/ya_metrika_task/\"></a><a name=\"../../../introduction/ya_metrika_task/\"></a><a name=\"ya_metrika_task/\"></a><a name=\"../introduction/ya_metrika_task/\"></a><a name=\"../../../../introduction/ya_metrika_task/\"></a><a name=\"introduction/ya_metrika_task/\"></a><a name=\"../../../../../introduction/ya_metrika_task/\"></a></p>\n<h2 id=\"yandex-metricade-shi-yong-an-li\">Yandex.Metrica\u7684\u4f7f\u7528\u6848\u4f8b<a class=\"headerlink\" href=\"#yandex-metricade-shi-yong-an-li\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse\u6700\u521d\u662f\u4e3a <a href=\"https://metrica.yandex.com/\" rel=\"external nofollow noreferrer\">Yandex.Metrica</a> <a href=\"http://w3techs.com/technologies/overview/traffic_analysis/all\" rel=\"external nofollow noreferrer\">\u4e16\u754c\u7b2c\u4e8c\u5927Web\u5206\u6790\u5e73\u53f0</a> \u800c\u5f00\u53d1\u7684\u3002\u591a\u5e74\u6765\u4e00\u76f4\u4f5c\u4e3a\u8be5\u7cfb\u7edf\u7684\u6838\u5fc3\u7ec4\u4ef6\u88ab\u8be5\u7cfb\u7edf\u6301\u7eed\u4f7f\u7528\u7740\u3002\u76ee\u524d\u4e3a\u6b62\uff0c\u8be5\u7cfb\u7edf\u5728ClickHouse\u4e2d\u6709\u8d85\u8fc713\u4e07\u4ebf\u6761\u8bb0\u5f55\uff0c\u5e76\u4e14\u6bcf\u5929\u8d85\u8fc7200\u591a\u4ebf\u4e2a\u4e8b\u4ef6\u88ab\u5904\u7406\u3002\u5b83\u5141\u8bb8\u76f4\u63a5\u4ece\u539f\u59cb\u6570\u636e\u4e2d\u52a8\u6001\u67e5\u8be2\u5e76\u751f\u6210\u62a5\u544a\u3002\u672c\u6587\u7b80\u8981\u4ecb\u7ecd\u4e86ClickHouse\u5728\u5176\u65e9\u671f\u53d1\u5c55\u9636\u6bb5\u7684\u76ee\u6807\u3002</p>\n<p>Yandex.Metrica\u57fa\u4e8e\u7528\u6237\u5b9a\u4e49\u7684\u5b57\u6bb5\uff0c\u5bf9\u5b9e\u65f6\u8bbf\u95ee\u3001\u8fde\u63a5\u4f1a\u8bdd\uff0c\u751f\u6210\u5b9e\u65f6\u7684\u7edf\u8ba1\u62a5\u8868\u3002\u8fd9\u79cd\u9700\u6c42\u5f80\u5f80\u9700\u8981\u590d\u6742\u805a\u5408\u65b9\u5f0f\uff0c\u6bd4\u5982\u5bf9\u8bbf\u95ee\u7528\u6237\u8fdb\u884c\u53bb\u91cd\u3002\u6784\u5efa\u62a5\u8868\u7684\u6570\u636e\uff0c\u662f\u5b9e\u65f6\u63a5\u6536\u5b58\u50a8\u7684\u65b0\u6570\u636e\u3002</p>\n<p>\u622a\u81f32014\u5e744\u6708\uff0cYandex.Metrica\u6bcf\u5929\u8ddf\u8e2a\u5927\u7ea6120\u4ebf\u4e2a\u4e8b\u4ef6\uff08\u7528\u6237\u7684\u70b9\u51fb\u548c\u6d4f\u89c8\uff09\u3002\u4e3a\u4e86\u53ef\u4ee5\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u62a5\u8868\uff0c\u6211\u4eec\u5fc5\u987b\u5b58\u50a8\u5168\u90e8\u8fd9\u4e9b\u4e8b\u4ef6\u3002\u540c\u65f6\uff0c\u8fd9\u4e9b\u67e5\u8be2\u53ef\u80fd\u9700\u8981\u5728\u51e0\u767e\u6beb\u79d2\u5185\u626b\u63cf\u6570\u767e\u4e07\u884c\u7684\u6570\u636e\uff0c\u6216\u5728\u51e0\u79d2\u5185\u626b\u63cf\u6570\u4ebf\u884c\u7684\u6570\u636e\u3002</p>\n<h3 id=\"yandex-metricayi-ji-qi-ta-yandexfu-wu-de-shi-yong-an-li\">Yandex.Metrica\u4ee5\u53ca\u5176\u4ed6Yandex\u670d\u52a1\u7684\u4f7f\u7528\u6848\u4f8b<a class=\"headerlink\" href=\"#yandex-metricayi-ji-qi-ta-yandexfu-wu-de-shi-yong-an-li\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728Yandex.Metrica\u4e2d\uff0cClickHouse\u88ab\u7528\u4e8e\u591a\u4e2a\u573a\u666f\u4e2d\u3002<br />\n\u5b83\u7684\u4e3b\u8981\u4efb\u52a1\u662f\u4f7f\u7528\u539f\u59cb\u6570\u636e\u5728\u7ebf\u7684\u63d0\u4f9b\u5404\u79cd\u6570\u636e\u62a5\u544a\u3002\u5b83\u4f7f\u7528374\u53f0\u670d\u52a1\u5668\u7684\u96c6\u7fa4\uff0c\u5b58\u50a8\u4e8620.3\u4e07\u4ebf\u884c\u7684\u6570\u636e\u3002\u5728\u53bb\u9664\u91cd\u590d\u4e0e\u526f\u672c\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c\u538b\u7f29\u540e\u7684\u6570\u636e\u8fbe\u5230\u4e862PB\u3002\u672a\u538b\u7f29\u524d\uff08TSV\u683c\u5f0f\uff09\u5b83\u5927\u6982\u670917PB\u3002</p>\n<p>ClickHouse\u8fd8\u88ab\u4f7f\u7528\u5728\uff1a</p>\n<ul>\n<li>\u5b58\u50a8\u6765\u81eaYandex.Metrica\u56de\u8bdd\u91cd\u653e\u6570\u636e\u3002</li>\n<li>\u5904\u7406\u4e2d\u95f4\u6570\u636e</li>\n<li>\u4e0eAnalytics\u4e00\u8d77\u6784\u5efa\u5168\u7403\u62a5\u8868\u3002</li>\n<li>\u4e3a\u8c03\u8bd5Yandex.Metrica\u5f15\u64ce\u8fd0\u884c\u67e5\u8be2</li>\n<li>\u5206\u6790\u6765\u81eaAPI\u548c\u7528\u6237\u754c\u9762\u7684\u65e5\u5fd7\u6570\u636e</li>\n</ul>\n<p>ClickHouse\u5728\u5176\u4ed6Yandex\u670d\u52a1\u4e2d\u81f3\u5c11\u670912\u4e2a\u5b89\u88c5\uff1asearch verticals, Market, Direct, business analytics, mobile development, AdFox, personal services\u7b49\u3002</p>\n<h3 id=\"ju-he-yu-fei-ju-he-shu-ju\">\u805a\u5408\u4e0e\u975e\u805a\u5408\u6570\u636e<a class=\"headerlink\" href=\"#ju-he-yu-fei-ju-he-shu-ju\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6709\u4e00\u79cd\u6d41\u884c\u7684\u89c2\u70b9\u8ba4\u4e3a\uff0c\u60f3\u8981\u6709\u6548\u7684\u8ba1\u7b97\u7edf\u8ba1\u6570\u636e\uff0c\u5fc5\u987b\u8981\u805a\u5408\u6570\u636e\uff0c\u56e0\u4e3a\u805a\u5408\u5c06\u964d\u4f4e\u6570\u636e\u91cf\u3002</p>\n<p>\u4f46\u662f\u6570\u636e\u805a\u5408\u662f\u4e00\u4e2a\u6709\u8bf8\u591a\u9650\u5236\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4f8b\u5982\uff1a</p>\n<ul>\n<li>\u4f60\u5fc5\u987b\u63d0\u524d\u77e5\u9053\u7528\u6237\u5b9a\u4e49\u7684\u62a5\u8868\u7684\u5b57\u6bb5\u5217\u8868</li>\n<li>\u7528\u6237\u65e0\u6cd5\u81ea\u5b9a\u4e49\u62a5\u8868</li>\n<li>\u5f53\u805a\u5408\u6761\u4ef6\u8fc7\u591a\u65f6\uff0c\u53ef\u80fd\u4e0d\u4f1a\u51cf\u5c11\u6570\u636e\uff0c\u805a\u5408\u662f\u65e0\u7528\u7684\u3002</li>\n<li>\u5b58\u5728\u5927\u91cf\u62a5\u8868\u65f6\uff0c\u6709\u592a\u591a\u7684\u805a\u5408\u53d8\u5316\uff08\u7ec4\u5408\u7206\u70b8\uff09</li>\n<li>\u5f53\u805a\u5408\u6761\u4ef6\u6709\u975e\u5e38\u5927\u7684\u57fa\u6570\u65f6\uff08\u5982\uff1aurl\uff09\uff0c\u6570\u636e\u91cf\u6ca1\u6709\u592a\u5927\u51cf\u5c11\uff08\u5c11\u4e8e\u4e24\u500d\uff09</li>\n<li>\u805a\u5408\u7684\u6570\u636e\u91cf\u53ef\u80fd\u4f1a\u589e\u957f\u800c\u4e0d\u662f\u6536\u7f29</li>\n<li>\u7528\u6237\u4e0d\u4f1a\u67e5\u770b\u6211\u4eec\u4e3a\u4ed6\u751f\u6210\u7684\u6240\u6709\u62a5\u544a\uff0c\u5927\u90e8\u5206\u8ba1\u7b97\u5c06\u662f\u65e0\u7528\u7684</li>\n<li>\u5404\u79cd\u805a\u5408\u53ef\u80fd\u8fdd\u80cc\u4e86\u6570\u636e\u7684\u903b\u8f91\u5b8c\u6574\u6027</li>\n</ul>\n<p>\u5982\u679c\u6211\u4eec\u76f4\u63a5\u4f7f\u7528\u975e\u805a\u5408\u6570\u636e\u800c\u4e0d\u8fdb\u884c\u4efb\u4f55\u805a\u5408\u65f6\uff0c\u6211\u4eec\u7684\u8ba1\u7b97\u91cf\u53ef\u80fd\u662f\u51cf\u5c11\u7684\u3002</p>\n<p>\u7136\u800c\uff0c\u76f8\u5bf9\u4e8e\u805a\u5408\u4e2d\u5f88\u5927\u4e00\u90e8\u5206\u5de5\u4f5c\u88ab\u79bb\u7ebf\u5b8c\u6210\uff0c\u5728\u7ebf\u8ba1\u7b97\u9700\u8981\u5c3d\u5feb\u7684\u5b8c\u6210\u8ba1\u7b97\uff0c\u56e0\u4e3a\u7528\u6237\u5728\u7b49\u5f85\u7ed3\u679c\u3002</p>\n<p>Yandex.Metrica \u6709\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u805a\u5408\u6570\u636e\u7684\u7cfb\u7edf\uff0c\u79f0\u4e3aMetrage\uff0c\u5b83\u53ef\u4ee5\u7528\u4f5c\u5927\u90e8\u5206\u62a5\u8868\u3002<br />\n\u4ece2009\u5e74\u5f00\u59cb\uff0cYandex.Metrica\u8fd8\u4e3a\u975e\u805a\u5408\u6570\u636e\u4f7f\u7528\u4e13\u95e8\u7684OLAP\u6570\u636e\u5e93\uff0c\u79f0\u4e3aOLAPServer\uff0c\u5b83\u4ee5\u524d\u7528\u4e8e\u62a5\u8868\u6784\u5efa\u7cfb\u7edf\u3002<br />\nOLAPServer\u53ef\u4ee5\u5f88\u597d\u7684\u5de5\u4f5c\u5728\u975e\u805a\u5408\u6570\u636e\u4e0a\uff0c\u4f46\u662f\u5b83\u6709\u8bf8\u591a\u9650\u5236\uff0c\u5bfc\u81f4\u65e0\u6cd5\u6839\u636e\u9700\u8981\u5c06\u5176\u7528\u4e8e\u6240\u6709\u62a5\u8868\u4e2d\u3002\u5982\uff0c\u7f3a\u5c11\u5bf9\u6570\u636e\u7c7b\u578b\u7684\u652f\u6301\uff08\u53ea\u652f\u6301\u6570\u636e\uff09\uff0c\u65e0\u6cd5\u5b9e\u65f6\u589e\u91cf\u7684\u66f4\u65b0\u6570\u636e\uff08\u53ea\u80fd\u901a\u8fc7\u6bcf\u5929\u91cd\u5199\u6570\u636e\u5b8c\u6210\uff09\u3002OLAPServer\u4e0d\u662f\u4e00\u4e2a\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u6570\u636e\u5e93\u3002</p>\n<p>\u4e3a\u4e86\u6d88\u9664OLAPServer\u7684\u8fd9\u4e9b\u5c40\u9650\u6027\uff0c\u89e3\u51b3\u6240\u6709\u62a5\u8868\u4f7f\u7528\u975e\u805a\u5408\u6570\u636e\u7684\u95ee\u9898\uff0c\u6211\u4eec\u5f00\u53d1\u4e86ClickHouse\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u3002</p>\n<p><a name=\"../../getting_started/\"></a><a name=\"../../../../../getting_started/\"></a><a name=\"../../../getting_started/\"></a><a name=\"../../../../getting_started/\"></a><a name=\"../getting_started/\"></a><a name=\"getting_started/\"></a></p>\n<h2 id=\"ru-men-zhi-nan\">\u5165\u95e8\u6307\u5357<a class=\"headerlink\" href=\"#ru-men-zhi-nan\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"xi-tong-yao-qiu\">\u7cfb\u7edf\u8981\u6c42<a class=\"headerlink\" href=\"#xi-tong-yao-qiu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u4ece\u5b98\u65b9\u4ed3\u5e93\u5b89\u88c5\uff0c\u9700\u8981\u786e\u4fdd\u60a8\u4f7f\u7528\u7684\u662fx86_64\u5904\u7406\u5668\u6784\u67b6\u7684Linux\u5e76\u4e14\u652f\u6301SSE 4.2\u6307\u4ee4\u96c6</p>\n<p>\u68c0\u67e5\u662f\u5426\u652f\u6301SSE 4.2\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>grep -q sse4_2 /proc/cpuinfo <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SSE 4.2 supported&quot;</span> <span class=\"o\">||</span> <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SSE 4.2 not supported&quot;</span>\n</code></pre></div>\n\n\n<p>\u6211\u4eec\u63a8\u8350\u4f7f\u7528Ubuntu\u6216\u8005Debian\u3002\u7ec8\u7aef\u5fc5\u987b\u4f7f\u7528UTF-8\u7f16\u7801\u3002</p>\n<p>\u57fa\u4e8erpm\u7684\u7cfb\u7edf,\u4f60\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u7684\u5b89\u88c5\u5305\uff1a<a href=\"https://packagecloud.io/altinity/clickhouse\">https://packagecloud.io/altinity/clickhouse</a> \u6216\u8005\u76f4\u63a5\u5b89\u88c5debian\u5b89\u88c5\u5305\u3002</p>\n<p>ClickHouse\u8fd8\u53ef\u4ee5\u5728FreeBSD\u4e0eMac OS X\u4e0a\u5de5\u4f5c\u3002\u540c\u65f6\u5b83\u53ef\u4ee5\u5728\u4e0d\u652f\u6301SSE 4.2\u7684x86_64\u6784\u67b6\u548cAArch64 CPUs\u4e0a\u7f16\u8bd1\u3002</p>\n<h3 id=\"an-zhuang\">\u5b89\u88c5<a class=\"headerlink\" href=\"#an-zhuang\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"wei-debian-ubuntuan-zhuang\">\u4e3aDebian/Ubuntu\u5b89\u88c5<a class=\"headerlink\" href=\"#wei-debian-ubuntuan-zhuang\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5728<code>/etc/apt/sources.list</code> (\u6216\u521b\u5efa<code>/etc/apt/sources.list.d/clickhouse.list</code>\u6587\u4ef6)\u4e2d\u6dfb\u52a0\u4ed3\u5e93\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ deb http://repo.yandex.ru/clickhouse/deb/stable/ main/\n</code></pre></div>\n\n\n<p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u6700\u65b0\u7684\u6d4b\u8bd5\u7248\u672c\uff0c\u8bf7\u4f7f\u7528'testing'\u66ff\u6362'stable'\u3002</p>\n<p>\u7136\u540e\u8fd0\u884c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install dirmngr    <span class=\"c1\"># optional</span>\n$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv E0C56BD4    <span class=\"c1\"># optional</span>\n$ sudo apt-get update\n$ sudo apt-get install clickhouse-client clickhouse-server\n</code></pre></div>\n\n\n<p>\u4f60\u4e5f\u53ef\u4ee5\u4ece\u8fd9\u91cc\u624b\u52a8\u4e0b\u8f7d\u5b89\u88c5\u5305\uff1a<a href=\"https://repo.yandex.ru/clickhouse/deb/stable/main/\">https://repo.yandex.ru/clickhouse/deb/stable/main/</a>\u3002</p>\n<p>ClickHouse\u5305\u542b\u8bbf\u95ee\u63a7\u5236\u914d\u7f6e\uff0c\u5b83\u4eec\u4f4d\u4e8e<code>users.xml</code>\u6587\u4ef6\u4e2d(\u4e0e'config.xml'\u540c\u76ee\u5f55)\u3002<br />\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5141\u8bb8\u4ece\u4efb\u4f55\u5730\u65b9\u4f7f\u7528\u9ed8\u8ba4\u7684\u2018default\u2019\u7528\u6237\u65e0\u5bc6\u7801\u7684\u8bbf\u95eeClickHouse\u3002\u53c2\u8003\u2018user/default/networks\u2019\u3002<br />\n\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\"Configuration files\"\u90e8\u5206\u3002</p>\n<h4 id=\"wei-centos-redhatan-zhuang\">\u4e3aCentOS/RedHat\u5b89\u88c5<a class=\"headerlink\" href=\"#wei-centos-redhatan-zhuang\" title=\"Permanent link\">&para;</a></h4>\n<p>Yandex ClickHouse\u56e2\u961f\u5efa\u8bae\u4f7f\u7528\u5b98\u65b9\u9884\u7f16\u8bd1\u7684<code>rpm</code>\u8f6f\u4ef6\u5305\uff0c\u7528\u4e8eCentOS\uff0cRedHat\u548c\u6240\u6709\u5176\u4ed6\u57fa\u4e8erpm\u7684Linux\u53d1\u884c\u7248\u3002</p>\n<p>\u9996\u5148\uff0c\u60a8\u9700\u8981\u6dfb\u52a0\u5b98\u65b9\u5b58\u50a8\u5e93\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo yum install yum-utils\n$ sudo rpm --import https://repo.yandex.ru/clickhouse/CLICKHOUSE-KEY.GPG\n$ sudo yum-config-manager --add-repo https://repo.yandex.ru/clickhouse/rpm/stable/x86_64\n</code></pre></div>\n\n\n<p>\u5982\u679c\u60a8\u60f3\u4f7f\u7528\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c06<code>stable</code>\u66ff\u6362\u4e3a<code>testing</code>\uff08\u5efa\u8bae\u60a8\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\uff09\u3002</p>\n<p>\u7136\u540e\u8fd0\u884c\u8fd9\u4e9b\u547d\u4ee4\u4ee5\u5b9e\u9645\u5b89\u88c5\u5305\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo yum install clickhouse-server clickhouse-client\n</code></pre></div>\n\n\n<p>\u60a8\u4e5f\u53ef\u4ee5\u4ece\u6b64\u5904\u624b\u52a8\u4e0b\u8f7d\u548c\u5b89\u88c5\u8f6f\u4ef6\u5305\uff1a<a href=\"https://repo.yandex.ru/clickhouse/rpm/stable/x86_64\">https://repo.yandex.ru/clickhouse/rpm/stable/x86_64</a>\u3002</p>\n<h4 id=\"shi-yong-dockeran-zhuang\">\u4f7f\u7528Docker\u5b89\u88c5<a class=\"headerlink\" href=\"#shi-yong-dockeran-zhuang\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8981\u5728Docker\u4e2d\u8fd0\u884cClickHouse\uff0c\u8bf7\u9075\u5faa<a href=\"https://hub.docker.com/r/yandex/clickhouse-server/\" rel=\"external nofollow noreferrer\">Docker Hub</a>\u4e0a\u7684\u6307\u5357\u3002\u8fd9\u4e9b\u955c\u50cf\u4f7f\u7528\u5b98\u65b9\u7684<code>deb</code>\u5305\u6784\u5efa\u3002</p>\n<h4 id=\"shi-yong-yuan-ma-an-zhuang\">\u4f7f\u7528\u6e90\u7801\u5b89\u88c5<a class=\"headerlink\" href=\"#shi-yong-yuan-ma-an-zhuang\" title=\"Permanent link\">&para;</a></h4>\n");
            
            document.write("<p>\u5177\u4f53\u7f16\u8bd1\u65b9\u5f0f\u53ef\u4ee5\u53c2\u8003build.md\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u7f16\u8bd1\u5e76\u5b89\u88c5\u5b83\u4eec\u3002<br />\n\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u800c\u4e0d\u8fdb\u884c\u5b89\u88c5\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>Client: dbms/programs/clickhouse-client\nServer: dbms/programs/clickhouse-server\n</code></pre></div>\n\n\n<p>\u5728\u670d\u52a1\u5668\u4e2d\u4e3a\u6570\u636e\u521b\u5efa\u5982\u4e0b\u76ee\u5f55\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>/opt/clickhouse/data/default/\n/opt/clickhouse/metadata/default/\n</code></pre></div>\n\n\n<p>(\u5b83\u4eec\u53ef\u4ee5\u5728server config\u4e2d\u914d\u7f6e\u3002)<br />\n\u4e3a\u9700\u8981\u7684\u7528\u6237\u8fd0\u884c\u2018chown\u2019</p>\n<p>\u65e5\u5fd7\u7684\u8def\u5f84\u53ef\u4ee5\u5728server config (src/dbms/programs/server/config.xml)\u4e2d\u914d\u7f6e\u3002</p>\n<h3 id=\"qi-dong\">\u542f\u52a8<a class=\"headerlink\" href=\"#qi-dong\" title=\"Permanent link\">&para;</a></h3>\n<p>\u53ef\u4ee5\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u5728\u540e\u53f0\u542f\u52a8\u670d\u52a1\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>sudo service clickhouse-server start\n</code></pre></div>\n\n\n<p>\u53ef\u4ee5\u5728<code>/var/log/clickhouse-server/</code>\u76ee\u5f55\u4e2d\u67e5\u770b\u65e5\u5fd7\u3002</p>\n<p>\u5982\u679c\u670d\u52a1\u6ca1\u6709\u542f\u52a8\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6 <code>/etc/clickhouse-server/config.xml</code>\u3002</p>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u4e2d\u76f4\u63a5\u542f\u52a8\u670d\u52a1\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>clickhouse-server --config-file<span class=\"o\">=</span>/etc/clickhouse-server/config.xml\n</code></pre></div>\n\n\n<p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u65e5\u5fd7\u5c06\u88ab\u6253\u5370\u5230\u63a7\u5236\u53f0\u4e2d\uff0c\u8fd9\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5f88\u65b9\u4fbf\u3002<br />\n\u5982\u679c\u914d\u7f6e\u6587\u4ef6\u5728\u5f53\u524d\u76ee\u5f55\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4e0d\u6307\u5b9a\u2018--config-file\u2019\u53c2\u6570\u3002\u5b83\u9ed8\u8ba4\u4f7f\u7528\u2018./config.xml\u2019\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u670d\u52a1\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>clickhouse-client\n</code></pre></div>\n\n\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5b83\u4f7f\u7528\u2018default\u2019\u7528\u6237\u65e0\u5bc6\u7801\u7684\u4e0elocalhost:9000\u670d\u52a1\u5efa\u7acb\u8fde\u63a5\u3002<br />\n\u5ba2\u6237\u7aef\u4e5f\u53ef\u4ee5\u7528\u4e8e\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\uff0c\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>clickhouse-client --host<span class=\"o\">=</span>example.com\n</code></pre></div>\n\n\n<p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\"Command-line client\"\u90e8\u5206\u3002</p>\n<p>\u68c0\u67e5\u7cfb\u7edf\u662f\u5426\u5de5\u4f5c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>milovidov@hostname:~/work/metrica/src/dbms/src/Client$ ./clickhouse-client\nClickHouse client version <span class=\"m\">0</span>.0.18749.\nConnecting to localhost:9000.\nConnected to ClickHouse server version <span class=\"m\">0</span>.0.18749.\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"mi\">1</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u25001\u2500\u2510\n\u2502 1 \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>\u606d\u559c\uff0c\u7cfb\u7edf\u5df2\u7ecf\u5de5\u4f5c\u4e86!</strong></p>\n<p>\u4e3a\u4e86\u7ee7\u7eed\u8fdb\u884c\u5b9e\u9a8c\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4e0b\u8f7d\u6d4b\u8bd5\u6570\u636e\u96c6\u3002</p>\n<p><a name=\"../../../../example_datasets/ontime/\"></a><a name=\"../../../../../../example_datasets/ontime/\"></a><a name=\"../getting_started/example_datasets/ontime/\"></a><a name=\"../../../getting_started/example_datasets/ontime/\"></a><a name=\"../../getting_started/example_datasets/ontime/\"></a><a name=\"ontime/\"></a><a name=\"example_datasets/ontime/\"></a><a name=\"../../../example_datasets/ontime/\"></a><a name=\"../../../../../example_datasets/ontime/\"></a><a name=\"../../../../getting_started/example_datasets/ontime/\"></a><a name=\"getting_started/example_datasets/ontime/\"></a><a name=\"../../example_datasets/ontime/\"></a><a name=\"../example_datasets/ontime/\"></a><a name=\"../../../../../getting_started/example_datasets/ontime/\"></a></p>\n<h2 id=\"hang-ban-fei-xing-shu-ju\">\u822a\u73ed\u98de\u884c\u6570\u636e<a class=\"headerlink\" href=\"#hang-ban-fei-xing-shu-ju\" title=\"Permanent link\">&para;</a></h2>\n<p>\u822a\u73ed\u98de\u884c\u6570\u636e\u6709\u4ee5\u4e0b\u4e24\u4e2a\u65b9\u5f0f\u83b7\u53d6\uff1a</p>\n<ul>\n<li>\u4ece\u539f\u59cb\u6570\u636e\u5bfc\u5165</li>\n<li>\u4e0b\u8f7d\u9884\u5904\u7406\u597d\u7684\u5206\u533a\u6570\u636e</li>\n</ul>\n<h3 id=\"cong-yuan-shi-shu-ju-dao-ru\">\u4ece\u539f\u59cb\u6570\u636e\u5bfc\u5165<a class=\"headerlink\" href=\"#cong-yuan-shi-shu-ju-dao-ru\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0b\u8f7d\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">for</span> s in <span class=\"sb\">`</span>seq <span class=\"m\">1987</span> <span class=\"m\">2018</span><span class=\"sb\">`</span>\n<span class=\"k\">do</span>\n<span class=\"k\">for</span> m in <span class=\"sb\">`</span>seq <span class=\"m\">1</span> <span class=\"m\">12</span><span class=\"sb\">`</span>\n<span class=\"k\">do</span>\nwget https://transtats.bts.gov/PREZIP/On_Time_Reporting_Carrier_On_Time_Performance_1987_present_<span class=\"si\">${</span><span class=\"nv\">s</span><span class=\"si\">}</span>_<span class=\"si\">${</span><span class=\"nv\">m</span><span class=\"si\">}</span>.zip\n<span class=\"k\">done</span>\n<span class=\"k\">done</span>\n</code></pre></div>\n\n\n<p>(\u5f15\u7528 <a href=\"https://github.com/Percona-Lab/ontime-airline-performance/blob/master/download.sh\">https://github.com/Percona-Lab/ontime-airline-performance/blob/master/download.sh</a> )</p>\n<p>\u521b\u5efa\u8868\u7ed3\u6784\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"o\">`</span><span class=\"n\">ontime</span><span class=\"o\">`</span> <span class=\"p\">(</span>\n  <span class=\"o\">`</span><span class=\"k\">Year</span><span class=\"o\">`</span> <span class=\"n\">UInt16</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Quarter</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"k\">Month</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DayofMonth</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DayOfWeek</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">FlightDate</span><span class=\"o\">`</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">UniqueCarrier</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">AirlineID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Carrier</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">FlightNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginAirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginAirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginCityMarketID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Origin</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginCityName</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginState</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginStateFips</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginStateName</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginWac</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestAirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestAirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestCityMarketID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Dest</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">DestCityName</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestState</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">DestStateFips</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestStateName</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestWac</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CRSDepTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepDelayMinutes</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepDel15</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepartureDelayGroups</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepTimeBlk</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">TaxiOut</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">TaxiIn</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span");
            
            document.write("><span class=\"n\">CRSArrTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrDelayMinutes</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrDel15</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrivalDelayGroups</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrTimeBlk</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Cancelled</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CancellationCode</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">Diverted</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CRSElapsedTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ActualElapsedTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">AirTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Flights</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Distance</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DistanceGroup</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CarrierDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">WeatherDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">NASDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">SecurityDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">LateAircraftDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">FirstDepTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">TotalAddGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">LongestAddGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivAirportLandings</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivReachedDest</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivActualElapsedTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivArrDelay</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivDistance</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">FlightDate</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"n\">FlightDate</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u52a0\u8f7d\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"k\">for</span> i in *.zip<span class=\"p\">;</span> <span class=\"k\">do</s");
            
            document.write("pan> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> unzip -cq <span class=\"nv\">$i</span> <span class=\"s1\">&#39;*.csv&#39;</span> <span class=\"p\">|</span> sed <span class=\"s1\">&#39;s/\\.00//g&#39;</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO ontime FORMAT CSVWithNames&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n</code></pre></div>\n\n\n<h3 id=\"xia-zai-yu-chu-li-hao-de-fen-qu-shu-ju\">\u4e0b\u8f7d\u9884\u5904\u7406\u597d\u7684\u5206\u533a\u6570\u636e<a class=\"headerlink\" href=\"#xia-zai-yu-chu-li-hao-de-fen-qu-shu-ju\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -O https://clickhouse-datasets.s3.yandex.net/ontime/partitions/ontime.tar\n$ tar xvf ontime.tar -C /var/lib/clickhouse <span class=\"c1\"># path to ClickHouse data directory</span>\n$ <span class=\"c1\"># check permissions of unpacked data, fix if required</span>\n$ sudo service clickhouse-server restart\n$ clickhouse-client --query <span class=\"s2\">&quot;select count(*) from datasets.ontime&quot;</span>\n</code></pre></div>\n\n\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Info</p>\n<p>\u5982\u679c\u8981\u8fd0\u884c\u4e0b\u9762\u7684SQL\u67e5\u8be2\uff0c\u5fc5\u987b\u4f7f\u7528\u5b8c\u6574\u7684\u8868\u540d\uff0c<br />\n<code>datasets.ontime</code>\u3002</p>\n</div>\n<h3 id=\"cha-xun\">\u67e5\u8be2\uff1a<a class=\"headerlink\" href=\"#cha-xun\" title=\"Permanent link\">&para;</a></h3>\n<p>Q0.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">c1</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"k\">Month</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c1</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"k\">Month</span>\n<span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Q1. \u67e5\u8be2\u4ece2000\u5e74\u52302008\u5e74\u6bcf\u5929\u7684\u822a\u73ed\u6570</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">DayOfWeek</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">DayOfWeek</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q2. \u67e5\u8be2\u4ece2000\u5e74\u52302008\u5e74\u6bcf\u5468\u5ef6\u8bef\u8d85\u8fc710\u5206\u949f\u7684\u822a\u73ed\u6570\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">DayOfWeek</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">DayOfWeek</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3. \u67e5\u8be22000\u5e74\u52302008\u5e74\u6bcf\u4e2a\u673a\u573a\u5ef6\u8bef\u8d85\u8fc710\u5206\u949f\u4ee5\u4e0a\u7684\u6b21\u6570</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Origin</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Origin</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q4. \u67e5\u8be22007\u5e74\u5404\u822a\u7a7a\u516c\u53f8\u5ef6\u8bef\u8d85\u8fc710\u5206\u949f\u4ee5\u4e0a\u7684\u6b21\u6570</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">=</span><span class=\"mi\">2007</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q5. \u67e5\u8be22007\u5e74\u5404\u822a\u7a7a\u516c\u53f8\u5ef6\u8bef\u8d85\u8fc710\u5206\u949f\u4ee5\u4e0a\u7684\u767e\u5206\u6bd4</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"o\">*</span><span class=\"mi\">100</span><span class=\"o\">/</span><span class=\"n\">c2</span> <span class=\"k\">as</span> <span class=\"n\">c3</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">Carrier</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span>\n        <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">=</span><span class=\"mi\">2007</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"p\">)</span>\n<span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">Carrier</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c2</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">=</span><span class=\"mi\">2007</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">c3</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u66f4\u597d\u7684\u67e5\u8be2\u7248\u672c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"mi\">100</span> <span class=\"k\">AS</span> <span class=\"n\">c3</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">=</span><span class=\"mi\">2007</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n</code></pre></div>\n\n\n<p>Q6. \u540c\u4e0a\u4e00\u4e2a\u67e5\u8be2\u4e00\u81f4,\u53ea\u662f\u67e5\u8be2\u8303\u56f4\u6269\u5927\u52302000\u5e74\u52302008\u5e74</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"o\">*</span><span class=\"mi\">100</span><span class=\"o\">/</span><span class=\"n\">c2</span> <span class=\"k\">as</span> <span class=\"n\">c3</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">Carrier</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span>\n        <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"p\">)</span>\n<span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">Carrier</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\"");
            
            document.write(">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c2</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">c3</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u66f4\u597d\u7684\u67e5\u8be2\u7248\u672c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"mi\">100</span> <span class=\"k\">AS</span> <span class=\"n\">c3</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q7. \u6bcf\u5e74\u822a\u73ed\u5ef6\u8bef\u8d85\u8fc710\u5206\u949f\u7684\u767e\u5206\u6bd4</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"n\">c1</span><span class=\"o\">/</span><span class=\"n\">c2</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">select</span>\n        <span class=\"k\">Year</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"mi\">100</span> <span class=\"k\">as</span> <span class=\"n\">c1</span>\n    <span class=\"k\">from</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span>\n<span class=\"p\">)</span>\n<span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">select</span>\n        <span class=\"k\">Year</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">c2</span>\n    <span class=\"k\">from</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u66f4\u597d\u7684\u67e5\u8be2\u7248\u672c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q8. \u6bcf\u5e74\u66f4\u53d7\u4eba\u4eec\u559c\u7231\u7684\u76ee\u7684\u5730</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">DestCityName</span><span class=\"p\">,</span> <span class=\"n\">uniqExact</span><span class=\"p\">(</span><span class=\"n\">OriginCityName</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">u</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">Year</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">2000</span> <span class=\"k\">and</span> <span class=\"k\">Year</span> <span class=\"o\">&lt;=</span> <span class=\"mi\">2010</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">DestCityName</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">u</span> <span class=\"k\">DESC</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q9.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c1</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q10.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n   <span class=\"k\">min</span><span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">),</span> <span class=\"k\">max</span><span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">),</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">cnt</span><span class=\"p\">,</span>\n   <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">ArrDelayMinutes</span><span class=\"o\">&gt;</span><span class=\"mi\">30</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">flights_delayed</span><span class=\"p\">,</span>\n   <span class=\"n\">round</span><span class=\"p\">(</span><span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">ArrDelayMinutes</span><span class=\"o\">&gt;</span><span class=\"mi\">30</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">),</span><span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">rate</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span>\n   <span class=\"n\">DayOfWeek</span> <span class=\"k\">NOT</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">OriginState</span> <span class=\"k\">NOT</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;AK&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;HI&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;PR&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;VI&#39;</span><span class=\"p\">)</span>\n   <span class=\"k\">AND</span> <span class=\"n\">DestState</span> <span class=\"k\">NOT</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;AK&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;HI&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;PR&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;VI&#39;</span><span class=\"p\">)</span>\n   <span class=\"k\">AND</span> <span class=\"n\">FlightDate</span> <span class=\"o\">&lt;</span> <span class=\"s1\">&#39;2010-01-01&#39;</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">by</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">HAVING</span> <span class=\"n\">cnt</span><span class=\"o\">&gt;</span><span class=\"mi\">100000</span> <span class=\"k\">and</span> <span class=\"k\">max</span><span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">)</span><span class=\"o\">&gt;</span><span class=\"mi\">1990</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">by</span> <span class=\"n\">rate</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">1000</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Bonus:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">cnt</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span><span class=\"k\">Month</span><span class=\"p\">,</span><span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">cnt</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">DepDel15</span><span class=\"o\">=</span><span class=\"mi\">1</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">,</span><span class=\"k\">Month</span>\n<span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">c1</span><span class=\"p\">)</span> <span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span><span class=\"k\">Month</span><span class=\"p\">,</span><span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c1</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">,</span><span class=\"k\">Month</span>\n<span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">DestCityName</span><span class=\"p\">,</span> <span class=\"n\">uniqExact</span><span class=\"p\">(</span><span class=\"n\">OriginCityName</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">u</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> ");
            
            document.write("<span class=\"n\">DestCityName</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">u</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">OriginCityName</span><span class=\"p\">,</span> <span class=\"n\">DestCityName</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">OriginCityName</span><span class=\"p\">,</span> <span class=\"n\">DestCityName</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">OriginCityName</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">OriginCityName</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u4e2a\u6027\u80fd\u6d4b\u8bd5\u7531Vadim Tkachenko\u63d0\u4f9b\u3002\u53c2\u8003\uff1a</p>\n<ul>\n<li><a href=\"https://www.percona.com/blog/2009/10/02/analyzing-air-traffic-performance-with-infobright-and-monetdb/\">https://www.percona.com/blog/2009/10/02/analyzing-air-traffic-performance-with-infobright-and-monetdb/</a></li>\n<li><a href=\"https://www.percona.com/blog/2009/10/26/air-traffic-queries-in-luciddb/\">https://www.percona.com/blog/2009/10/26/air-traffic-queries-in-luciddb/</a></li>\n<li><a href=\"https://www.percona.com/blog/2009/11/02/air-traffic-queries-in-infinidb-early-alpha/\">https://www.percona.com/blog/2009/11/02/air-traffic-queries-in-infinidb-early-alpha/</a></li>\n<li><a href=\"https://www.percona.com/blog/2014/04/21/using-apache-hadoop-and-impala-together-with-mysql-for-data-analysis/\">https://www.percona.com/blog/2014/04/21/using-apache-hadoop-and-impala-together-with-mysql-for-data-analysis/</a></li>\n<li><a href=\"https://www.percona.com/blog/2016/01/07/apache-spark-with-air-ontime-performance-data/\">https://www.percona.com/blog/2016/01/07/apache-spark-with-air-ontime-performance-data/</a></li>\n<li><a href=\"http://nickmakos.blogspot.ru/2012/08/analyzing-air-traffic-performance-with.html\">http://nickmakos.blogspot.ru/2012/08/analyzing-air-traffic-performance-with.html</a><br />\n<a name=\"../../../../../../example_datasets/nyc_taxi/\"></a><a name=\"nyc_taxi/\"></a><a name=\"../../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../../../../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../../../example_datasets/nyc_taxi/\"></a><a name=\"../example_datasets/nyc_taxi/\"></a><a name=\"getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../../example_datasets/nyc_taxi/\"></a><a name=\"../../../../example_datasets/nyc_taxi/\"></a><a name=\"../../../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../../../../../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../../../../../example_datasets/nyc_taxi/\"></a><a name=\"example_datasets/nyc_taxi/\"></a></li>\n</ul>\n<h2 id=\"niu-yue-shi-chu-zu-che-shu-ju\">\u7ebd\u7ea6\u5e02\u51fa\u79df\u8f66\u6570\u636e<a class=\"headerlink\" href=\"#niu-yue-shi-chu-zu-che-shu-ju\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7ebd\u7ea6\u5e02\u51fa\u79df\u8f66\u6570\u636e\u6709\u4ee5\u4e0b\u4e24\u4e2a\u65b9\u5f0f\u83b7\u53d6\uff1a</p>\n<p>\u4ece\u539f\u59cb\u6570\u636e\u5bfc\u5165<br />\n\u4e0b\u8f7d\u9884\u5904\u7406\u597d\u7684\u5206\u533a\u6570\u636e</p>\n<h3 id=\"zen-yang-dao-ru-yuan-shi-shu-ju\">\u600e\u6837\u5bfc\u5165\u539f\u59cb\u6570\u636e<a class=\"headerlink\" href=\"#zen-yang-dao-ru-yuan-shi-shu-ju\" title=\"Permanent link\">&para;</a></h3>\n<p>\u53ef\u4ee5\u53c2\u8003<a href=\"https://github.com/toddwschneider/nyc-taxi-data\">https://github.com/toddwschneider/nyc-taxi-data</a>\u548c<a href=\"http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html\">http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html</a>\u4e2d\u7684\u5173\u4e8e\u6570\u636e\u96c6\u7ed3\u6784\u63cf\u8ff0\u4e0e\u6570\u636e\u4e0b\u8f7d\u6307\u4ee4\u8bf4\u660e\u3002</p>\n<p>\u6570\u636e\u96c6\u5305\u542b227GB\u7684CSV\u6587\u4ef6\u3002\u8fd9\u5927\u7ea6\u9700\u8981\u4e00\u4e2a\u5c0f\u65f6\u7684\u4e0b\u8f7d\u65f6\u95f4(1Gbit\u5e26\u5bbd\u4e0b\uff0c\u5e76\u884c\u4e0b\u8f7d\u5927\u6982\u662f\u4e00\u534a\u65f6\u95f4)\u3002<br />\n\u4e0b\u8f7d\u65f6\u6ce8\u610f\u635f\u574f\u7684\u6587\u4ef6\u3002\u53ef\u4ee5\u68c0\u67e5\u6587\u4ef6\u5927\u5c0f\u5e76\u91cd\u65b0\u4e0b\u8f7d\u635f\u574f\u7684\u6587\u4ef6\u3002</p>\n<p>\u6709\u4e9b\u6587\u4ef6\u4e2d\u5305\u542b\u4e00\u4e9b\u65e0\u6548\u7684\u884c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u8bed\u53e5\u4fee\u590d\u4ed6\u4eec\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>sed -E <span class=\"s1\">&#39;/(.*,){18,}/d&#39;</span> data/yellow_tripdata_2010-02.csv &gt; data/yellow_tripdata_2010-02.csv_\nsed -E <span class=\"s1\">&#39;/(.*,){18,}/d&#39;</span> data/yellow_tripdata_2010-03.csv &gt; data/yellow_tripdata_2010-03.csv_\nmv data/yellow_tripdata_2010-02.csv_ data/yellow_tripdata_2010-02.csv\nmv data/yellow_tripdata_2010-03.csv_ data/yellow_tripdata_2010-03.csv\n</code></pre></div>\n\n\n<p>\u7136\u540e\u60a8\u5fc5\u987b\u5728PostgreSQL\u4e2d\u9884\u5904\u7406\u8fd9\u4e9b\u6570\u636e\u3002\u8fd9\u5c06\u521b\u5efa\u591a\u8fb9\u5f62\u4e2d\u7684\u70b9\uff08\u4ee5\u5339\u914d\u5728\u5730\u56fe\u4e2d\u7ebd\u7ea6\u5e02\u4e2d\u8303\u56f4\uff09\uff0c\u7136\u540e\u901a\u8fc7\u4f7f\u7528JOIN\u67e5\u8be2\u5c06\u6570\u636e\u5173\u8054\u7ec4\u5408\u5230\u4e00\u4e2a\u89c4\u8303\u7684\u8868\u4e2d\u3002\u4e3a\u4e86\u5b8c\u6210\u8fd9\u90e8\u5206\u64cd\u4f5c\uff0c\u60a8\u9700\u8981\u5b89\u88c5PostgreSQL\u7684\u540c\u65f6\u5b89\u88c5PostGIS\u63d2\u4ef6\u3002</p>\n<p>\u8fd0\u884c<code>initialize_database.sh</code>\u65f6\u8981\u5c0f\u5fc3\uff0c\u5e76\u624b\u52a8\u91cd\u65b0\u68c0\u67e5\u662f\u5426\u6b63\u786e\u521b\u5efa\u4e86\u6240\u6709\u8868\u3002</p>\n<p>\u5728PostgreSQL\u4e2d\u5904\u7406\u6bcf\u4e2a\u6708\u7684\u6570\u636e\u5927\u7ea6\u9700\u898120-30\u5206\u949f\uff0c\u603b\u5171\u5927\u7ea6\u9700\u898148\u5c0f\u65f6\u3002</p>\n<p>\u60a8\u53ef\u4ee5\u6309\u5982\u4e0b\u65b9\u5f0f\u68c0\u67e5\u4e0b\u8f7d\u7684\u884c\u6570\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">time</span> psql nyc-taxi-data -c <span class=\"s2\">&quot;SELECT count(*) FROM trips;&quot;</span>\n<span class=\"c1\">### Count</span>\n <span class=\"m\">1298979494</span>\n<span class=\"o\">(</span><span class=\"m\">1</span> row<span class=\"o\">)</span>\n\nreal    7m9.164s\n</code></pre></div>\n\n\n<p>(\u6839\u636eMark Litwintschik\u7684\u7cfb\u5217\u535a\u5ba2\u62a5\u9053\u6570\u636e\u7565\u591a\u4f5911\u4ebf\u884c)</p>\n<p>PostgreSQL\u5904\u7406\u8fd9\u4e9b\u6570\u636e\u5927\u6982\u9700\u8981370GB\u7684\u78c1\u76d8\u7a7a\u95f4\u3002</p>\n<p>\u4ecePostgreSQL\u4e2d\u5bfc\u51fa\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">COPY</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">vendor_id</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_datetime</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff_datetime</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">store_and_fwd_flag</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">rate_code_id</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_longitude</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_latitude</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff_longitude</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff_latitude</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">passenger_count</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">trip_distance</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">fare_amount</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">extra</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">mta_tax</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">tip_amount</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">tolls_amount</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">ehail_fee</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">improvement_surcharge</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">total_amount</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">payment_type</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">trip_type</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff</span><span class=\"p\">,</span>\n\n           <span class=\"n\">cab_types</span><span class=\"p\">.</span><span class=\"k\">type</span> <span class=\"n\">cab_type</span><span class=\"p\">,</span>\n\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">precipitation_tenths_of_mm</span> <span class=\"n\">rain</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">snow_depth_mm</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">snowfall_mm</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">max_temperature_tenths_degrees_celsius</span> <span class=\"n\">max_temp</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">min_temperature_tenths_degrees_celsius</span> <span class=\"n\">min_temp</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">average_wind_speed_tenths_of_meters_per_second</span> <span class=\"n\">wind</span><span class=\"p\">,</span>\n\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">gid</span> <span class=\"n\">pickup_nyct2010_gid</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">ctlabel</span> <span class=\"n\">pickup_ctlabel</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">borocode</span> <span class=\"n\">pickup_borocode</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">boroname</span> <span class=\"n\">pickup_boroname<");
            
            document.write("/span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">ct2010</span> <span class=\"n\">pickup_ct2010</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">boroct2010</span> <span class=\"n\">pickup_boroct2010</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">cdeligibil</span> <span class=\"n\">pickup_cdeligibil</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">ntacode</span> <span class=\"n\">pickup_ntacode</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">ntaname</span> <span class=\"n\">pickup_ntaname</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">puma</span> <span class=\"n\">pickup_puma</span><span class=\"p\">,</span>\n\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">gid</span> <span class=\"n\">dropoff_nyct2010_gid</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">ctlabel</span> <span class=\"n\">dropoff_ctlabel</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">borocode</span> <span class=\"n\">dropoff_borocode</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">boroname</span> <span class=\"n\">dropoff_boroname</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">ct2010</span> <span class=\"n\">dropoff_ct2010</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">boroct2010</span> <span class=\"n\">dropoff_boroct2010</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">cdeligibil</span> <span class=\"n\">dropoff_cdeligibil</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">ntacode</span> <span class=\"n\">dropoff_ntacode</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">ntaname</span> <span class=\"n\">dropoff_ntaname</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">puma</span> <span class=\"n\">dropoff_puma</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">trips</span>\n    <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">cab_types</span>\n        <span class=\"k\">ON</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">cab_type_id</span> <span class=\"o\">=</span> <span class=\"n\">cab_types</span><span class=\"p\">.</span><span class=\"n\">id</span>\n    <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">central_park_weather_observations_raw</span> <span class=\"n\">weather</span>\n        <span class=\"k\">ON</span> <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"nb\">date</span> <span class=\"o\">=</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_datetime</span><span class=\"p\">::</span><span class=\"nb\">date</span>\n    <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">nyct2010</span> <span class=\"n\">pick_up</span>\n        <span class=\"k\">ON</span> <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">gid</span> <span class=\"o\">=</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_nyct2010_gid</span>\n    <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">nyct2010</span> <span class=\"n\">drop_off</span>\n        <span class=\"k\">ON</span> <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">gid</span> <span class=\"o\">=</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff_nyct2010_gid</span>\n<span class=\"p\">)</span> <span class=\"k\">TO</span> <span class=\"s1\">&#39;/opt/milovidov/nyc-taxi-data/trips.tsv&#39;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u6570\u636e\u5feb\u7167\u7684\u521b\u5efa\u901f\u5ea6\u7ea6\u4e3a\u6bcf\u79d250 MB\u3002 \u5728\u521b\u5efa\u5feb\u7167\u65f6\uff0cPostgreSQL\u4ee5\u6bcf\u79d2\u7ea628 MB\u7684\u901f\u5ea6\u4ece\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\u3002<br />\n\u8fd9\u5927\u7ea6\u9700\u89815\u4e2a\u5c0f\u65f6\u3002 \u6700\u7ec8\u751f\u6210\u7684TSV\u6587\u4ef6\u4e3a590612904969 bytes\u3002</p>\n<p>\u5728ClickHouse\u4e2d\u521b\u5efa\u4e34\u65f6\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">trips</span>\n<span class=\"p\">(</span>\n<span class=\"n\">trip_id</span>                 <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n<span class=\"n\">vendor_id</span>               <span class=\"n\">String</span><span class=\"p\">,</span>\n<span class=\"n\">pickup_datetime</span>         <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n<span class=\"n\">dropoff_datetime</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">DateTime</span><span class=\"p\">),</span>\n<span class=\"n\">store_and_fwd_flag</span>      <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)),</span>\n<span class=\"n\">rate_code_id</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_longitude</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_latitude</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_longitude</span>       <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_latitude</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">passenger_count</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">trip_distance</span>           <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">fare_amount</span>             <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">extra</span>                   <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">mta_tax</span>                 <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">tip_amount</span>              <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">tolls_amount</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">ehail_fee</span>               <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">improvement_surcharge</span>   <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">total_amount</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">payment_type</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">trip_type</span>               <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup</span>                  <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff</span>                 <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">cab_type</span>                <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">precipitation</span>           <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">snow_depth</span>              <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">snowfall</span>                <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">max_temperature</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">min_temperature</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">average_wind_speed</span>      <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_nyct2010_gid</span>     <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_ctlabel</span>          <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_borocode</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_boroname</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_ct2010</span>           <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_boroct2010</span>       <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\"");
            
            document.write(">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_cdeligibil</span>       <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)),</span>\n<span class=\"n\">pickup_ntacode</span>          <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_ntaname</span>          <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_puma</span>             <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_nyct2010_gid</span>    <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_ctlabel</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_borocode</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_boroname</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_ct2010</span>          <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_boroct2010</span>      <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_cdeligibil</span>      <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_ntacode</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_ntaname</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_puma</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u63a5\u4e0b\u6765,\u9700\u8981\u5c06\u5b57\u6bb5\u8f6c\u6362\u4e3a\u66f4\u6b63\u786e\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5e76\u4e14\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\uff0c\u6d88\u9664NULL\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">time</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO trips FORMAT TabSeparated&quot;</span> &lt; trips.tsv\n\nreal    75m56.214s\n</code></pre></div>\n\n\n<p>\u6570\u636e\u7684\u8bfb\u53d6\u901f\u5ea6\u4e3a112-140 Mb/\u79d2\u3002<br />\n\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u5c06\u6570\u636e\u52a0\u8f7d\u5230Log\u8868\u4e2d\u9700\u898176\u5206\u949f\u3002<br />\n\u8fd9\u4e2a\u8868\u4e2d\u7684\u6570\u636e\u9700\u8981\u4f7f\u7528142 GB\u7684\u78c1\u76d8\u7a7a\u95f4.</p>\n<p>\uff08\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528<code>COPY ... TO PROGRAM</code>\u4ecePostgres\u4e2d\u5bfc\u5165\u6570\u636e\uff09</p>\n<p>\u7531\u4e8e\u6570\u636e\u4e2d\u4e0e\u5929\u6c14\u76f8\u5173\u7684\u6240\u6709\u6570\u636e\uff08precipitation......average_wind_speed\uff09\u90fd\u586b\u5145\u4e86NULL\u3002 \u6240\u4ee5\uff0c\u6211\u4eec\u5c06\u4ece\u6700\u7ec8\u6570\u636e\u96c6\u4e2d\u5220\u9664\u5b83\u4eec</p>\n<p>\u9996\u5148\uff0c\u6211\u4eec\u4f7f\u7528\u5355\u53f0\u670d\u52a1\u5668\u521b\u5efa\u8868\uff0c\u540e\u9762\u6211\u4eec\u5c06\u5728\u591a\u53f0\u8282\u70b9\u4e0a\u521b\u5efa\u8fd9\u4e9b\u8868\u3002</p>\n<p>\u521b\u5efa\u8868\u7ed3\u6784\u5e76\u5199\u5165\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">trips_mergetree</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">pickup_date</span><span class=\"p\">,</span> <span class=\"n\">pickup_datetime</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n<span class=\"k\">AS</span> <span class=\"k\">SELECT</span>\n\n<span class=\"n\">trip_id</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">vendor_id</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;1&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CMT&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;VTS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DDS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02512&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02598&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">11</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02617&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02682&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">13</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02764&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">14</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">vendor_id</span><span class=\"p\">,</span>\n<span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">pickup_datetime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_date</span><span class=\"p\">,</span>\n<span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_datetime</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_datetime</span><span class=\"p\">,</span>\n<span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">dropoff_datetime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_date</span><span class=\"p\">,</span>\n<span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_datetime</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_datetime</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">store_and_fwd_flag</span><span class=\"p\">)</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Y&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;1&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">store_and_fwd_flag</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">rate_code_id</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">rate_code_id</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_longitude</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_longitude</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_latitude</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_latitude</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_longitude</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_longitude</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_latitude</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_latitude</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">passenger_count</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">trip_distance</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">trip_distance</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">fare_amount</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">fare_amount</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">extra</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">extra</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">mta_tax</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">mta_tax</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">tip_amount</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">tip_amount</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">tolls_amount</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">tolls_amount</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">ehail_fee</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">ehail_fee</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">improvement_surcharge</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">improvement_surcharge</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">total_amount</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">total_amount</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">((</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">payment_type</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pt</span><span class=\"p\">)</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;CSH&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CASH&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Cash&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CAS&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Cas&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;1&#39;</span><span class=\"p\">)");
            
            document.write("</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;CSH&#39;</span> <span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"n\">pt</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;CRD&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Credit&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Cre&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CRE&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CREDIT&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2&#39;</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;CRE&#39;</span> <span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"n\">pt</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;NOC&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;No Charge&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;No&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;3&#39;</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;NOC&#39;</span> <span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"n\">pt</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;DIS&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Dispute&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Dis&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;4&#39;</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;DIS&#39;</span> <span class=\"p\">:</span> <span class=\"s1\">&#39;UNK&#39;</span><span class=\"p\">)))</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;CSH&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CRE&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;UNK&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;NOC&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DIS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">payment_type_</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">trip_type</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">trip_type</span><span class=\"p\">,</span>\n<span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">pickup</span><span class=\"p\">),</span> <span class=\"mi\">25</span><span class=\"p\">),</span> <span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">,</span> <span class=\"mi\">25</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup</span><span class=\"p\">,</span>\n<span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">dropoff</span><span class=\"p\">),</span> <span class=\"mi\">25</span><span class=\"p\">),</span> <span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">,</span> <span class=\"mi\">25</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">cab_type</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;yellow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;green&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;uber&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">cab_type</span><span class=\"p\">,</span>\n\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_nyct2010_gid</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_nyct2010_gid</span><span class=\"p\">,</span>\n<span class=\"n\">toFloat32</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_ctlabel</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_ctlabel</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_borocode</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_borocode</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_boroname</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_boroname</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_ct2010</span><span class=\"p\">,</span> <span class=\"s1\">&#39;000000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">6</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_ct2010</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_boroct2010</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0000000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">7</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_boroct2010</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_cdeligibil</span><span class=\"p\">,</span> <span class=\"s1\">&#39; &#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39; &#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;E&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;I&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_cdeligibil</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_ntacode</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_ntacode</span><span class=\"p\">,</span>\n\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_ntaname</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum16</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Airport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Allerton-Pelham Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Annadale-Huguenot-Prince\\&#39;</span><span class=\"n\">s</span> <span class=\"n\">Bay</span><span class=\"o\">-</span><span class=\"n\">Eltingville</span><span class=\"s1\">&#39; = 3, &#39;</span><span class=\"n\">Arden</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 4, &#39;</span><span class=\"n\">Astoria</span><span class=\"s1\">&#39; = 5, &#39;</span><span class=\"n\">Auburndale</span><span class=\"s1\">&#39; = 6, &#39;</span><span class=\"n\">Baisley</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 7, &#39;</span><span class=\"n\">Bath</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 8, &#39;</span><span class=\"n\">Battery</span> <span class=\"n\">Park</span> <span class=\"n\">City</span><span class=\"o\">-</span><span class=\"k\">Lower</span> <span class=\"n\">Manhattan</span><span class=\"s1\">&#39; = 9, &#39;</span><span class=\"n\">Bay</span> <span class=\"n\">Ridge</span><span class=\"s1\">&#39; = 10, &#39;</span><span class=\"n\">Bayside</span><span class=\"o\">-</span><span class=\"n\">Bayside</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 11, &#39;</span><span class=\"n\">Bedford</span><span class=\"s1\">&#39; = 12, &#39;</span><span class=\"n\">Bedford</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Fordham</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 13, &#39;</span><span class=\"n\">Bellerose</span><span class=\"s1\">&#39; = 14, &#39;</span><span class=\"n\">Belmont</span><span class=\"s1\">&#39; = 15, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 16, &#39;</span><span class=\"n\">Bensonhurst</span> <span");
            
            document.write(" class=\"n\">West</span><span class=\"s1\">&#39; = 17, &#39;</span><span class=\"n\">Borough</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 18, &#39;</span><span class=\"n\">Breezy</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Belle</span> <span class=\"n\">Harbor</span><span class=\"o\">-</span><span class=\"n\">Rockaway</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Broad</span> <span class=\"n\">Channel</span><span class=\"s1\">&#39; = 19, &#39;</span><span class=\"n\">Briarwood</span><span class=\"o\">-</span><span class=\"n\">Jamaica</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 20, &#39;</span><span class=\"n\">Brighton</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 21, &#39;</span><span class=\"n\">Bronxdale</span><span class=\"s1\">&#39; = 22, &#39;</span><span class=\"n\">Brooklyn</span> <span class=\"n\">Heights</span><span class=\"o\">-</span><span class=\"n\">Cobble</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 23, &#39;</span><span class=\"n\">Brownsville</span><span class=\"s1\">&#39; = 24, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 25, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 26, &#39;</span><span class=\"n\">Cambria</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 27, &#39;</span><span class=\"n\">Canarsie</span><span class=\"s1\">&#39; = 28, &#39;</span><span class=\"n\">Carroll</span> <span class=\"n\">Gardens</span><span class=\"o\">-</span><span class=\"n\">Columbia</span> <span class=\"n\">Street</span><span class=\"o\">-</span><span class=\"n\">Red</span> <span class=\"n\">Hook</span><span class=\"s1\">&#39; = 29, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"o\">-</span><span class=\"n\">Polo</span> <span class=\"n\">Grounds</span><span class=\"s1\">&#39; = 30, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 31, &#39;</span><span class=\"n\">Charleston</span><span class=\"o\">-</span><span class=\"n\">Richmond</span> <span class=\"n\">Valley</span><span class=\"o\">-</span><span class=\"n\">Tottenville</span><span class=\"s1\">&#39; = 32, &#39;</span><span class=\"n\">Chinatown</span><span class=\"s1\">&#39; = 33, &#39;</span><span class=\"n\">Claremont</span><span class=\"o\">-</span><span class=\"n\">Bathgate</span><span class=\"s1\">&#39; = 34, &#39;</span><span class=\"n\">Clinton</span><span class=\"s1\">&#39; = 35, &#39;</span><span class=\"n\">Clinton</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 36, &#39;</span><span class=\"n\">Co</span><span class=\"o\">-</span><span class=\"n\">op</span> <span class=\"n\">City</span><span class=\"s1\">&#39; = 37, &#39;</span><span class=\"n\">College</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 38, &#39;</span><span class=\"n\">Corona</span><span class=\"s1\">&#39; = 39, &#39;</span><span class=\"n\">Crotona</span> <span class=\"n\">Park</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 40, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 41, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 42, &#39;</span><span class=\"n\">Cypress</span> <span class=\"n\">Hills</span><span class=\"o\">-</span><span class=\"n\">City</span> <span class=\"n\">Line</span><span class=\"s1\">&#39; = 43, &#39;</span><span class=\"n\">DUMBO</span><span class=\"o\">-</span><span class=\"n\">Vinegar</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Downtown</span> <span class=\"n\">Brooklyn</span><span class=\"o\">-</span><span class=\"n\">Boerum</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 44, &#39;</span><span class=\"n\">Douglas</span> <span class=\"n\">Manor</span><span class=\"o\">-</span><span class=\"n\">Douglaston</span><span class=\"o\">-</span><span class=\"n\">Little</span> <span class=\"n\">Neck</span><span class=\"s1\">&#39; = 45, &#39;</span><span class=\"n\">Dyker</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 46, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Concourse</span><span class=\"o\">-</span><span class=\"n\">Concourse</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 47, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 48, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flatbush</span><span class=\"o\">-</span><span class=\"n\">Farragut</span><span class=\"s1\">&#39; = 49, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 50, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 51, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 52, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span><span class=\"s1\">&#39; = 53, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span> <span class=\"p\">(</span><span class=\"n\">Pennsylvania</span> <span class=\"n\">Ave</span><span class=\"p\">)</span><span class=\"s1\">&#39; = 54, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Tremont</span><span class=\"s1\">&#39; = 55, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 56, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Williamsburg</span><span class=\"s1\">&#39; = 57, &#39;</span><span class=\"n\">Eastchester</span><span class=\"o\">-</span><span class=\"n\">Edenwald</span><span class=\"o\">-</span><span class=\"n\">Baychester</span><span class=\"s1\">&#39; = 58, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 59, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"o\">-</span><span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 60, &#39;</span><span class=\"n\">Erasmus</span><span class=\"s1\">&#39; = 61, &#39;</span><span class=\"n\">Far</span> <span class=\"n\">Rockaway</span><span class=\"o\">-</span><span class=\"n\">Bayswater</span><span class=\"s1\">&#39; = 62, &#39;</span><span class=\"n\">Flatbush</span><span class=\"s1\">&#39; = 63, &#39;</span><span class=\"n\">Flatlands</span><span class=\"s1\">&#39; = 64, &#39;</span><span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 65, &#39;</span><span class=\"n\">Fordham</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 66, &#39;</span><span class=\"n\">Forest</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 67, &#39;</span><span class=\"n\">Fort</span> <span class=\"n\">Greene</span><span class=\"s1\">&#39; = 68, &#39;</span><span class=\"n\">Fresh</span> <span class=\"n\">Meadows</span><span class=\"o\">-</span><span class=\"n\">Utopia</span><span class=\"s1\">&#39; = 69, &#39;</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Totten</span><span class=\"o\">-</span><span class=\"n\">Bay</span> <span class=\"n\">Terrace</span><span class=\"o\">-</span><span class=\"n\">Clearview</span><span class=\"s1\">&#39; = 70, &#39;</span><span class=\"n\">Georgetown</span><span class=\"o\">-</span><span class=\"n\">Marine</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Bergen</span> <span class=\"n\">Beach</span><span class=\"o\">-</span><span class=\"n\">Mill</span> <span class=\"n\">Basin</span><span class=\"s1\">&#39; = 71, &#39;</span><span class=\"n\">Glen</span> <span class=\"n\">Oaks</span><span class=\"o\">-</span><span class=\"n\">Floral</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"k\">New</span> <span class=\"n\">Hyde</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 72, &#39;</span><span class=\"n\">Glendale</span><span class=\"s1\">&#39; = 73, &#39;</span><span class=\"n\">Gramercy</span><span class=\"s1\">&#39; = 74, &#39;</span><span class=\"n\">Grasmere</span><span class=\"o\">-</span><span class=\"n\">Arrochar</span><span class=\"o\">-</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Wadsworth</span><span class=\"s1\">&#39; = 75, &#39;</span><span class=\"n\">Gravesend</span><span class=\"s1\">&#39; = 76, &#39;</span><span class=\"n\">Great</span> <span class=\"n\">Kills</span><span class=\"s1\">&#39; = 77, &#39;</span><span class=\"n\">Greenpoint</span><span class=\"s1\">&#39; = 78, &#39;</span><span class=\"n\">Grymes</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Clifton</span><span class=\"o\">-</span><span class=\"n\">Fox</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 79, &#39;</span><span class=\"n\">Hamilton</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 80, &#39;</span><span class=\"n\">Hammels</span><span class=\"o\">-</span><span class=\"n\">Arverne</span><span class=\"o\">-</span><span class=\"n\">Edgemere</span><span class=\"s1\">&#39; = 81, &#39;</span><span class=\"n\">Highbridge</span><span class=\"s1\">&#39; = 82, &#39;</span><span class=\"n\">Hollis</span><span class=\"s1\">&#39; = 83, &#39;</span><span class=\"n\">Homecrest</span><span class=\"s1\">&#39; = 84, &#39;</span><span class=\"n\">Hudson</span> <span class=\"n\">Yards</span><span class=\"o\">-</span><span class=\"n\">Chelsea</span><span class=\"o\">-</span><span class=\"n\">Flatiron</span><span class=\"o\">-</span><span class=\"k\">Union</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 85, &#39;</span><span class=\"n\">Hunters</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Sunnyside</span><span class=\"o\">-</span><span class=\"n\">West</span> <span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 86, &#39;</span><span class=\"n\">Hunts</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 87, &#39;</span><span class=\"n\">Jackson</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 88, &#39;</span><span class=\"n\">Jamaica</span><span class=\"s1\">&#39; = 89, &#39;</span><span class=\"n\">Jamaica</span> <span class=\"n\">Estates</span><span class=\"o\">-</span><span class=\"n\">Holliswood</span><span class=\"s1\">&#39; = 90, &#39;</span><span class=\"n\">Kensington</span><span class=\"o\">-</span><span class=\"n\">Ocean</span> <span class=\"n\">Parkway</span><span class=\"s1\">&#");
            
            document.write("39; = 91, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span><span class=\"s1\">&#39; = 92, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 93, &#39;</span><span class=\"n\">Kingsbridge</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 94, &#39;</span><span class=\"n\">Laurelton</span><span class=\"s1\">&#39; = 95, &#39;</span><span class=\"n\">Lenox</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Roosevelt</span> <span class=\"n\">Island</span><span class=\"s1\">&#39; = 96, &#39;</span><span class=\"n\">Lincoln</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 97, &#39;</span><span class=\"n\">Lindenwood</span><span class=\"o\">-</span><span class=\"n\">Howard</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 98, &#39;</span><span class=\"n\">Longwood</span><span class=\"s1\">&#39; = 99, &#39;</span><span class=\"k\">Lower</span> <span class=\"n\">East</span> <span class=\"n\">Side</span><span class=\"s1\">&#39; = 100, &#39;</span><span class=\"n\">Madison</span><span class=\"s1\">&#39; = 101, &#39;</span><span class=\"n\">Manhattanville</span><span class=\"s1\">&#39; = 102, &#39;</span><span class=\"n\">Marble</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Inwood</span><span class=\"s1\">&#39; = 103, &#39;</span><span class=\"n\">Mariner</span><span class=\"err\">\\</span><span class=\"s1\">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Maspeth&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Melrose South-Mott Haven North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Middle Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">107</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midtown-Midtown South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">108</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morningside Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">110</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morrisania-Melrose&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">111</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mott Haven-Port Morris&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mount Hope&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">113</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill-Kips Bay&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">115</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Brighton-Silver Lake&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Dorp-Midland Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">117</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">118</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Corona&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Side-South Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">121</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Norwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">122</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakland Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakwood-Oakwood Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">124</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">125</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Parkway South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">126</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Astoria&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">127</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">129</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Park Slope-Gowanus&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">130</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Parkchester&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">131</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">132</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Parkway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">133</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">134</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Port Richmond&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">135</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">136</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">137</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">138</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensboro Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">139</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rego Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">141</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Richmond Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ridgewood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">143</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rikers Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rosedale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">145</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rossville-Woodrow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rugby-Remsen Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">147</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">148</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Seagate-Coney Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">149</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">150</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">151</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Bruckner&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">152</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">153</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Jamaica&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">154</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">155</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">156</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens South-Brookville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">157</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">158</span><span class=\"p\">,</span> <span class=\"s1\">&#39;St. Albans&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">159</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stapleton-Rosebank&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">160</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Starrett City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">161</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Steinway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">163</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">164</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park East&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park West&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">166</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">167</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Turtle Bay-East Midtown&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">168</span><span class=\"p\">,</span> <span class=\"s1\">&#39;University Heights-Morris Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper East ");
            
            document.write("Side-Carnegie Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">170</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper West Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">171</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Cortlandt Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">172</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">173</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">174</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">175</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Brighton&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">176</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Concourse&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">177</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Farms-Bronx River&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">178</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">179</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">180</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westchester-Unionport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">181</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westerleigh&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">182</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Whitestone&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">183</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsbridge-Olinville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">184</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsburg&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Windsor Terrace&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">186</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodhaven&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">187</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodlawn-Wakefield&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">188</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodside&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">189</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Yorkville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">191</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">192</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">193</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">194</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">195</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_ntaname</span><span class=\"p\">,</span>\n\n<span class=\"n\">toUInt16</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_puma</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_puma</span><span class=\"p\">,</span>\n\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_nyct2010_gid</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_nyct2010_gid</span><span class=\"p\">,</span>\n<span class=\"n\">toFloat32</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_ctlabel</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_ctlabel</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_borocode</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_borocode</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_boroname</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_boroname</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_ct2010</span><span class=\"p\">,</span> <span class=\"s1\">&#39;000000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">6</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_ct2010</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_boroct2010</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0000000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">7</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_boroct2010</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_cdeligibil</span><span class=\"p\">,</span> <span class=\"s1\">&#39; &#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39; &#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;E&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;I&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_cdeligibil</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_ntacode</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_ntacode</span><span class=\"p\">,</span>\n\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_ntaname</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum16</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Airport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Allerton-Pelham Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Annadale-Huguenot-Prince\\&#39;</span><span class=\"n\">s</span> <span class=\"n\">Bay</span><span class=\"o\">-</span><span class=\"n\">Eltingville</span><span class=\"s1\">&#39; = 3, &#39;</span><span class=\"n\">Arden</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 4, &#39;</span><span class=\"n\">Astoria</span><span class=\"s1\">&#39; = 5, &#39;</span><span class=\"n\">Auburndale</span><span class=\"s1\">&#39; = 6, &#39;</span><span class=\"n\">Baisley</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 7, &#39;</span><span class=\"n\">Bath</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 8, &#39;</span><span class=\"n\">Battery</span> <span class=\"n\">Park</span> <span class=\"n\">City</span><span class=\"o\">-</span><span class=\"k\">Lower</span> <span class=\"n\">Manhattan</span><span class=\"s1\">&#39; = 9, &#39;</span><span class=\"n\">Bay</span> <span class=\"n\">Ridge</span><span class=\"s1\">&#39; = 10, &#39;</span><span class=\"n\">Bayside</span><span class=\"o\">-</span><span class=\"n\">Bayside</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 11, &#39;</span><span class=\"n\">Bedford</span><span class=\"s1\">&#39; = 12, &#39;</span><span class=\"n\">Bedford</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Fordham</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 13, &#39;</span><span class=\"n\">Bellerose</span><span class=\"s1\">&#39; = 14, &#39;</span><span class=\"n\">Belmont</span><span class=\"s1\">&#39; = 15, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 16, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">West</span><span class=\"s1\">&#39; = 17, &#39;</span><span class=\"n\">Borough</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 18, &#39;</span><span class=\"n\">Breezy</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Belle</span> <span class=\"n\">Harbor</span><span class=\"o\">-</span><span class=\"n\">Rockaway</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Broad</");
            
            document.write("span> <span class=\"n\">Channel</span><span class=\"s1\">&#39; = 19, &#39;</span><span class=\"n\">Briarwood</span><span class=\"o\">-</span><span class=\"n\">Jamaica</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 20, &#39;</span><span class=\"n\">Brighton</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 21, &#39;</span><span class=\"n\">Bronxdale</span><span class=\"s1\">&#39; = 22, &#39;</span><span class=\"n\">Brooklyn</span> <span class=\"n\">Heights</span><span class=\"o\">-</span><span class=\"n\">Cobble</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 23, &#39;</span><span class=\"n\">Brownsville</span><span class=\"s1\">&#39; = 24, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 25, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 26, &#39;</span><span class=\"n\">Cambria</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 27, &#39;</span><span class=\"n\">Canarsie</span><span class=\"s1\">&#39; = 28, &#39;</span><span class=\"n\">Carroll</span> <span class=\"n\">Gardens</span><span class=\"o\">-</span><span class=\"n\">Columbia</span> <span class=\"n\">Street</span><span class=\"o\">-</span><span class=\"n\">Red</span> <span class=\"n\">Hook</span><span class=\"s1\">&#39; = 29, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"o\">-</span><span class=\"n\">Polo</span> <span class=\"n\">Grounds</span><span class=\"s1\">&#39; = 30, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 31, &#39;</span><span class=\"n\">Charleston</span><span class=\"o\">-</span><span class=\"n\">Richmond</span> <span class=\"n\">Valley</span><span class=\"o\">-</span><span class=\"n\">Tottenville</span><span class=\"s1\">&#39; = 32, &#39;</span><span class=\"n\">Chinatown</span><span class=\"s1\">&#39; = 33, &#39;</span><span class=\"n\">Claremont</span><span class=\"o\">-</span><span class=\"n\">Bathgate</span><span class=\"s1\">&#39; = 34, &#39;</span><span class=\"n\">Clinton</span><span class=\"s1\">&#39; = 35, &#39;</span><span class=\"n\">Clinton</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 36, &#39;</span><span class=\"n\">Co</span><span class=\"o\">-</span><span class=\"n\">op</span> <span class=\"n\">City</span><span class=\"s1\">&#39; = 37, &#39;</span><span class=\"n\">College</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 38, &#39;</span><span class=\"n\">Corona</span><span class=\"s1\">&#39; = 39, &#39;</span><span class=\"n\">Crotona</span> <span class=\"n\">Park</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 40, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 41, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 42, &#39;</span><span class=\"n\">Cypress</span> <span class=\"n\">Hills</span><span class=\"o\">-</span><span class=\"n\">City</span> <span class=\"n\">Line</span><span class=\"s1\">&#39; = 43, &#39;</span><span class=\"n\">DUMBO</span><span class=\"o\">-</span><span class=\"n\">Vinegar</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Downtown</span> <span class=\"n\">Brooklyn</span><span class=\"o\">-</span><span class=\"n\">Boerum</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 44, &#39;</span><span class=\"n\">Douglas</span> <span class=\"n\">Manor</span><span class=\"o\">-</span><span class=\"n\">Douglaston</span><span class=\"o\">-</span><span class=\"n\">Little</span> <span class=\"n\">Neck</span><span class=\"s1\">&#39; = 45, &#39;</span><span class=\"n\">Dyker</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 46, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Concourse</span><span class=\"o\">-</span><span class=\"n\">Concourse</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 47, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 48, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flatbush</span><span class=\"o\">-</span><span class=\"n\">Farragut</span><span class=\"s1\">&#39; = 49, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 50, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 51, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 52, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span><span class=\"s1\">&#39; = 53, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span> <span class=\"p\">(</span><span class=\"n\">Pennsylvania</span> <span class=\"n\">Ave</span><span class=\"p\">)</span><span class=\"s1\">&#39; = 54, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Tremont</span><span class=\"s1\">&#39; = 55, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 56, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Williamsburg</span><span class=\"s1\">&#39; = 57, &#39;</span><span class=\"n\">Eastchester</span><span class=\"o\">-</span><span class=\"n\">Edenwald</span><span class=\"o\">-</span><span class=\"n\">Baychester</span><span class=\"s1\">&#39; = 58, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 59, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"o\">-</span><span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 60, &#39;</span><span class=\"n\">Erasmus</span><span class=\"s1\">&#39; = 61, &#39;</span><span class=\"n\">Far</span> <span class=\"n\">Rockaway</span><span class=\"o\">-</span><span class=\"n\">Bayswater</span><span class=\"s1\">&#39; = 62, &#39;</span><span class=\"n\">Flatbush</span><span class=\"s1\">&#39; = 63, &#39;</span><span class=\"n\">Flatlands</span><span class=\"s1\">&#39; = 64, &#39;</span><span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 65, &#39;</span><span class=\"n\">Fordham</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 66, &#39;</span><span class=\"n\">Forest</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 67, &#39;</span><span class=\"n\">Fort</span> <span class=\"n\">Greene</span><span class=\"s1\">&#39; = 68, &#39;</span><span class=\"n\">Fresh</span> <span class=\"n\">Meadows</span><span class=\"o\">-</span><span class=\"n\">Utopia</span><span class=\"s1\">&#39; = 69, &#39;</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Totten</span><span class=\"o\">-</span><span class=\"n\">Bay</span> <span class=\"n\">Terrace</span><span class=\"o\">-</span><span class=\"n\">Clearview</span><span class=\"s1\">&#39; = 70, &#39;</span><span class=\"n\">Georgetown</span><span class=\"o\">-</span><span class=\"n\">Marine</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Bergen</span> <span class=\"n\">Beach</span><span class=\"o\">-</span><span class=\"n\">Mill</span> <span class=\"n\">Basin</span><span class=\"s1\">&#39; = 71, &#39;</span><span class=\"n\">Glen</span> <span class=\"n\">Oaks</span><span class=\"o\">-</span><span class=\"n\">Floral</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"k\">New</span> <span class=\"n\">Hyde</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 72, &#39;</span><span class=\"n\">Glendale</span><span class=\"s1\">&#39; = 73, &#39;</span><span class=\"n\">Gramercy</span><span class=\"s1\">&#39; = 74, &#39;</span><span class=\"n\">Grasmere</span><span class=\"o\">-</span><span class=\"n\">Arrochar</span><span class=\"o\">-</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Wadsworth</span><span class=\"s1\">&#39; = 75, &#39;</span><span class=\"n\">Gravesend</span><span class=\"s1\">&#39; = 76, &#39;</span><span class=\"n\">Great</span> <span class=\"n\">Kills</span><span class=\"s1\">&#39; = 77, &#39;</span><span class=\"n\">Greenpoint</span><span class=\"s1\">&#39; = 78, &#39;</span><span class=\"n\">Grymes</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Clifton</span><span class=\"o\">-</span><span class=\"n\">Fox</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 79, &#39;</span><span class=\"n\">Hamilton</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 80, &#39;</span><span class=\"n\">Hammels</span><span class=\"o\">-</span><span class=\"n\">Arverne</span><span class=\"o\">-</span><span class=\"n\">Edgemere</span><span class=\"s1\">&#39; = 81, &#39;</span><span class=\"n\">Highbridge</span><span class=\"s1\">&#39; = 82, &#39;</span><span class=\"n\">Hollis</span><span class=\"s1\">&#39; = 83, &#39;</span><span class=\"n\">Homecrest</span><span class=\"s1\">&#39; = 84, &#39;</span><span class=\"n\">Hudson</span> <span class=\"n\">Yards</span><span class=\"o\">-</span><span class=\"n\">Chelsea</span><span class=\"o\">-</span><span class=\"n\">Flatiron</span><span class=\"o\">-</span><span class=\"k\">Union</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 85, &#39;</span><span class=\"n\">Hunters</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Sunnyside</span><span class=\"o\">-</span><span class=\"n\">West</span> <span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 86, &#39;</span><span class=\"n\">Hunts</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 87, &#39;</span><span class=\"n\">Jackson</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 88, &#39;</span><span class=\"n\">Jamaica</span><span class=\"s1\">&#39; = 89, &#39;</span><span class=\"n\">Jamaica</span> <span class=\"n\">Estates</span><span class=\"o\">-</span><span class=\"n\">Holliswood</span><span class=\"s1\">&#39; = 90, &#39;</span><span class=\"n\">Kensington</span><span class=\"o\">-</span><span class=\"n\">Ocean</span> <span class=\"n\">Parkway</span><span class=\"s1\">&#39; = 91, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span><span class=\"s1\">&#39; = 92, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 93, &#39;</span><span class=\"n\">Kingsbridge</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 94, &#39;</span><span class=\"n\">Laurelton</span><span class=\"s1\">&#39; = 95, &#39;</span><span ");
            
            document.write("class=\"n\">Lenox</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Roosevelt</span> <span class=\"n\">Island</span><span class=\"s1\">&#39; = 96, &#39;</span><span class=\"n\">Lincoln</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 97, &#39;</span><span class=\"n\">Lindenwood</span><span class=\"o\">-</span><span class=\"n\">Howard</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 98, &#39;</span><span class=\"n\">Longwood</span><span class=\"s1\">&#39; = 99, &#39;</span><span class=\"k\">Lower</span> <span class=\"n\">East</span> <span class=\"n\">Side</span><span class=\"s1\">&#39; = 100, &#39;</span><span class=\"n\">Madison</span><span class=\"s1\">&#39; = 101, &#39;</span><span class=\"n\">Manhattanville</span><span class=\"s1\">&#39; = 102, &#39;</span><span class=\"n\">Marble</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Inwood</span><span class=\"s1\">&#39; = 103, &#39;</span><span class=\"n\">Mariner</span><span class=\"err\">\\</span><span class=\"s1\">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Maspeth&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Melrose South-Mott Haven North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Middle Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">107</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midtown-Midtown South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">108</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morningside Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">110</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morrisania-Melrose&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">111</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mott Haven-Port Morris&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mount Hope&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">113</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill-Kips Bay&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">115</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Brighton-Silver Lake&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Dorp-Midland Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">117</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">118</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Corona&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Side-South Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">121</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Norwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">122</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakland Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakwood-Oakwood Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">124</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">125</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Parkway South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">126</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Astoria&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">127</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">129</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Park Slope-Gowanus&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">130</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Parkchester&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">131</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">132</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Parkway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">133</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">134</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Port Richmond&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">135</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">136</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">137</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">138</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensboro Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">139</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rego Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">141</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Richmond Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ridgewood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">143</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rikers Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rosedale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">145</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rossville-Woodrow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rugby-Remsen Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">147</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">148</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Seagate-Coney Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">149</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">150</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">151</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Bruckner&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">152</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">153</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Jamaica&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">154</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">155</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">156</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens South-Brookville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">157</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">158</span><span class=\"p\">,</span> <span class=\"s1\">&#39;St. Albans&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">159</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stapleton-Rosebank&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">160</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Starrett City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">161</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Steinway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">163</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">164</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park East&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park West&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">166</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">167</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Turtle Bay-East Midtown&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">168</span><span class=\"p\">,</span> <span class=\"s1\">&#39;University Heights-Morris Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">170</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper West Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">171</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Cortlandt Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">172</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Nest-Morris Park-Westchester Square&#3");
            
            document.write("9;</span> <span class=\"o\">=</span> <span class=\"mi\">173</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">174</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">175</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Brighton&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">176</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Concourse&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">177</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Farms-Bronx River&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">178</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">179</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">180</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westchester-Unionport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">181</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westerleigh&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">182</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Whitestone&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">183</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsbridge-Olinville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">184</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsburg&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Windsor Terrace&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">186</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodhaven&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">187</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodlawn-Wakefield&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">188</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodside&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">189</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Yorkville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">191</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">192</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">193</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">194</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">195</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_ntaname</span><span class=\"p\">,</span>\n\n<span class=\"n\">toUInt16</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_puma</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_puma</span>\n\n<span class=\"k\">FROM</span> <span class=\"n\">trips</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u9700\u89813030\u79d2\uff0c\u901f\u5ea6\u7ea6\u4e3a\u6bcf\u79d2428,000\u884c\u3002<br />\n\u8981\u52a0\u5feb\u901f\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528<code>Log</code>\u5f15\u64ce\u66ff\u6362'MergeTree`\u5f15\u64ce\u6765\u521b\u5efa\u8868\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e0b\u8f7d\u901f\u5ea6\u8d85\u8fc7200\u79d2\u3002</p>\n<p>\u8fd9\u4e2a\u8868\u9700\u8981\u4f7f\u7528126GB\u7684\u78c1\u76d8\u7a7a\u95f4\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">formatReadableSize</span><span class=\"p\">(</span><span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">bytes</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">parts</span> <span class=\"k\">WHERE</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;trips_mergetree&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">active</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500formatReadableSize(sum(bytes))\u2500\u2510\n\u2502 126.18 GiB                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>\u9664\u6b64\u4e4b\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u5728MergeTree\u4e0a\u8fd0\u884cOPTIMIZE\u67e5\u8be2\u6765\u8fdb\u884c\u4f18\u5316\u3002\u4f46\u8fd9\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u56e0\u4e3a\u5373\u4f7f\u5728\u6ca1\u6709\u8fdb\u884c\u4f18\u5316\u7684\u60c5\u51b5\u4e0b\u5b83\u7684\u8868\u73b0\u4f9d\u7136\u662f\u5f88\u597d\u7684\u3002</p>\n<h3 id=\"xia-zai-yu-chu-li-hao-de-fen-qu-shu-ju_1\">\u4e0b\u8f7d\u9884\u5904\u7406\u597d\u7684\u5206\u533a\u6570\u636e<a class=\"headerlink\" href=\"#xia-zai-yu-chu-li-hao-de-fen-qu-shu-ju_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -O https://clickhouse-datasets.s3.yandex.net/trips_mergetree/partitions/trips_mergetree.tar\n$ tar xvf trips_mergetree.tar -C /var/lib/clickhouse <span class=\"c1\"># path to ClickHouse data directory</span>\n$ <span class=\"c1\"># check permissions of unpacked data, fix if required</span>\n$ sudo service clickhouse-server restart\n$ clickhouse-client --query <span class=\"s2\">&quot;select count(*) from datasets.trips_mergetree&quot;</span>\n</code></pre></div>\n\n\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Info</p>\n</div>\n<p>\u5982\u679c\u8981\u8fd0\u884c\u4e0b\u9762\u7684SQL\u67e5\u8be2\uff0c\u5fc5\u987b\u4f7f\u7528\u5b8c\u6574\u7684\u8868\u540d\uff0c<br />\n<code>datasets.trips_mergetree</code>\u3002</p>\n<h3 id=\"dan-tai-fu-wu-qi-yun-xing-jie-guo\">\u5355\u53f0\u670d\u52a1\u5668\u8fd0\u884c\u7ed3\u679c<a class=\"headerlink\" href=\"#dan-tai-fu-wu-qi-yun-xing-jie-guo\" title=\"Permanent link\">&para;</a></h3>\n<p>Q1:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">cab_type</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">cab_type</span>\n</code></pre></div>\n\n\n<p>0.490 seconds.</p>\n<p>Q2:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">total_amount</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">passenger_count</span>\n</code></pre></div>\n\n\n<p>1.224 seconds.</p>\n<p>Q3:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">pickup_date</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"k\">year</span>\n</code></pre></div>\n\n\n<p>2.104 seconds.</p>\n<p>Q4:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">pickup_date</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">round</span><span class=\"p\">(</span><span class=\"n\">trip_distance</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">distance</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">distance</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">DESC</span>\n</code></pre></div>\n\n\n<p>3.593 seconds.</p>\n<p>\u6211\u4eec\u4f7f\u7528\u7684\u662f\u5982\u4e0b\u914d\u7f6e\u7684\u670d\u52a1\u5668\uff1a</p>\n<p>Two Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz, 16 physical kernels total,128 GiB RAM,8x6 TB HD on hardware RAID-5</p>\n<p>\u6267\u884c\u65f6\u95f4\u662f\u53d6\u4e09\u6b21\u8fd0\u884c\u4e2d\u6700\u597d\u7684\u503c\uff0c\u4f46\u662f\u4ece\u7b2c\u4e8c\u6b21\u67e5\u8be2\u5f00\u59cb\uff0c\u67e5\u8be2\u5c31\u8bb2\u4ece\u6587\u4ef6\u7cfb\u7edf\u7684\u7f13\u5b58\u4e2d\u8bfb\u53d6\u6570\u636e\u3002\u540c\u65f6\u5728\u6bcf\u6b21\u8bfb\u53d6\u548c\u5904\u7406\u540e\u4e0d\u5728\u8fdb\u884c\u7f13\u5b58\u3002</p>\n<p>\u5728\u4e09\u53f0\u670d\u52a1\u5668\u4e2d\u521b\u5efa\u8868\u7ed3\u6784\uff1a</p>\n<p>\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u4e2d\u8fd0\u884c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">default</span><span class=\"p\">.</span><span class=\"n\">trips_mergetree_third</span> <span class=\"p\">(</span> <span class=\"n\">trip_id</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span> <span class=\"n\">vendor_id</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;1&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CMT&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;VTS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DDS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02512&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02598&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">11</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02617&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02682&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">13</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02764&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">14</span><span class=\"p\">),</span> <span class=\"n\">pickup_date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">pickup_datetime</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span> <span class=\"n\">dropoff_date</span> <span class=\"nb\">Date</span><span class=\"p\">");
            
            document.write(",</span> <span class=\"n\">dropoff_datetime</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span> <span class=\"n\">store_and_fwd_flag</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">rate_code_id</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">pickup_longitude</span> <span class=\"n\">Float64</span><span class=\"p\">,</span> <span class=\"n\">pickup_latitude</span> <span class=\"n\">Float64</span><span class=\"p\">,</span> <span class=\"n\">dropoff_longitude</span> <span class=\"n\">Float64</span><span class=\"p\">,</span> <span class=\"n\">dropoff_latitude</span> <span class=\"n\">Float64</span><span class=\"p\">,</span> <span class=\"n\">passenger_count</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">trip_distance</span> <span class=\"n\">Float64</span><span class=\"p\">,</span> <span class=\"n\">fare_amount</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">extra</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">mta_tax</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">tip_amount</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">tolls_amount</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">ehail_fee</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">improvement_surcharge</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">total_amount</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">payment_type_</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;UNK&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSH&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CRE&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;NOC&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DIS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">),</span> <span class=\"n\">trip_type</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">pickup</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">25</span><span class=\"p\">),</span> <span class=\"n\">dropoff</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">25</span><span class=\"p\">),</span> <span class=\"n\">cab_type</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;yellow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;green&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;uber&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">),</span> <span class=\"n\">pickup_nyct2010_gid</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">pickup_ctlabel</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">pickup_borocode</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">pickup_boroname</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">),</span> <span class=\"n\">pickup_ct2010</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span> <span class=\"n\">pickup_boroct2010</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">),</span> <span class=\"n\">pickup_cdeligibil</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39; &#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;E&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;I&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"n\">pickup_ntacode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">),</span> <span class=\"n\">pickup_ntaname</span> <span class=\"n\">Enum16</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Airport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Allerton-Pelham Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Annadale-Huguenot-Prince\\&#39;</span><span class=\"n\">s</span> <span class=\"n\">Bay</span><span class=\"o\">-</span><span class=\"n\">Eltingville</span><span class=\"s1\">&#39; = 3, &#39;</span><span class=\"n\">Arden</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 4, &#39;</span><span class=\"n\">Astoria</span><span class=\"s1\">&#39; = 5, &#39;</span><span class=\"n\">Auburndale</span><span class=\"s1\">&#39; = 6, &#39;</span><span class=\"n\">Baisley</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 7, &#39;</span><span class=\"n\">Bath</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 8, &#39;</span><span class=\"n\">Battery</span> <span class=\"n\">Park</span> <span class=\"n\">City</span><span class=\"o\">-</span><span class=\"k\">Lower</span> <span class=\"n\">Manhattan</span><span class=\"s1\">&#39; = 9, &#39;</span><span class=\"n\">Bay</span> <span class=\"n\">Ridge</span><span class=\"s1\">&#39; = 10, &#39;</span><span class=\"n\">Bayside</span><span class=\"o\">-</span><span class=\"n\">Bayside</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 11, &#39;</span><span class=\"n\">Bedford</span><span class=\"s1\">&#39; = 12, &#39;</span><span class=\"n\">Bedford</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Fordham</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 13, &#39;</span><span class=\"n\">Bellerose</span><span class=\"s1\">&#39; = 14, &#39;</span><span class=\"n\">Belmont</span><span class=\"s1\">&#39; = 15, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 16, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">West</span><span class=\"s1\">&#39; = 17, &#39;</span><span class=\"n\">Borough</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 18, &#39;</span><span class=\"n\">Breezy</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Belle</span> <span class=\"n\">Harbor</span><span class=\"o\">-</span><span class=\"n\">Rockaway</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Broad</span> <span class=\"n\">Channel</span><span class=\"s1\">&#39; = 19, &#39;</span><span class=\"n\">Briarwood</span><span class=\"o\">-</span><span class=\"n\">Jamaica</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 20, &#39;</span><span class=\"n\">Brighton</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 21, &#39;</span><span class=\"n\">Bronxdale</span><span class=\"s1\">&#39; = 22, &#39;</span><span class=\"n\">Brooklyn</span> <span class=\"n\">Heights</span><span class=\"o\">-</span><span class=\"n\">Cobble</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 23, &#39;</span><span class=\"n\">Brownsville</span><span class=\"s1\">&#39; = 24, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 25, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 26, &#39;</span><span class=\"n\">Cambria</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 27, &#39;</span><span class=\"n\">Canarsie</span><span class=\"s1\">&#39; = 28, &#39;</span><span class=\"n\">Carroll</span> <span class=\"n\">Gardens</span><span class=\"o\">-</span><span class=\"n\">Columbia</span> <span class=\"n\">Street</span><span class=\"o\">-</span><span class=\"n\">Red</span> <span class=\"n\">Hook</span><span class=\"s1\">&#39; = 29, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"o\">-</span><span class=\"n\">Polo</span> <span class=\"n\">Grounds</span><span class=\"s1\">&#39; = 30, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 31, &#39;</span><span class=\"n\">Charleston</span><span class=\"o\">-</span><span class=\"n\">Richmond</span> <span class=\"n\">Valley</span><span class=\"o\">-</span><span class=\"n\">Tottenville</span><span class=\"s1\">&#39; = 32, &#39;</span><span class=\"n\">Chinatown</span><span class=\"s1\">&#39; = 33, &#39;</span><span class=\"n\">Claremont</span><span class=\"o\">-</span><span class=\"n\">Bathgate</span><span class=\"s1\">&#39; = 34, &#39;</span><span class=\"n\">Clinton</span><span class=\"s1\">&#39; = 35, &#39;</span><span class=\"n\">Clinton</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 36, &#39;</span><span class=\"n\">Co</span><span class=\"o\">-</span><span class=\"n\">op</span> <span class=\"n\">City</span><span class=\"s1\">&#39; = 37, &#39;</span><span class=\"n\">College</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 38, &#39;</span><span class=\"n\">Corona</span><span class=\"s1\">&#39; = 39, &#39;</span><span class=\"n\">Crotona</span> <span class=\"n\">Park</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 40, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span c");
            
            document.write("lass=\"n\">North</span><span class=\"s1\">&#39; = 41, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 42, &#39;</span><span class=\"n\">Cypress</span> <span class=\"n\">Hills</span><span class=\"o\">-</span><span class=\"n\">City</span> <span class=\"n\">Line</span><span class=\"s1\">&#39; = 43, &#39;</span><span class=\"n\">DUMBO</span><span class=\"o\">-</span><span class=\"n\">Vinegar</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Downtown</span> <span class=\"n\">Brooklyn</span><span class=\"o\">-</span><span class=\"n\">Boerum</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 44, &#39;</span><span class=\"n\">Douglas</span> <span class=\"n\">Manor</span><span class=\"o\">-</span><span class=\"n\">Douglaston</span><span class=\"o\">-</span><span class=\"n\">Little</span> <span class=\"n\">Neck</span><span class=\"s1\">&#39; = 45, &#39;</span><span class=\"n\">Dyker</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 46, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Concourse</span><span class=\"o\">-</span><span class=\"n\">Concourse</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 47, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 48, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flatbush</span><span class=\"o\">-</span><span class=\"n\">Farragut</span><span class=\"s1\">&#39; = 49, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 50, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 51, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 52, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span><span class=\"s1\">&#39; = 53, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span> <span class=\"p\">(</span><span class=\"n\">Pennsylvania</span> <span class=\"n\">Ave</span><span class=\"p\">)</span><span class=\"s1\">&#39; = 54, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Tremont</span><span class=\"s1\">&#39; = 55, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 56, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Williamsburg</span><span class=\"s1\">&#39; = 57, &#39;</span><span class=\"n\">Eastchester</span><span class=\"o\">-</span><span class=\"n\">Edenwald</span><span class=\"o\">-</span><span class=\"n\">Baychester</span><span class=\"s1\">&#39; = 58, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 59, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"o\">-</span><span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 60, &#39;</span><span class=\"n\">Erasmus</span><span class=\"s1\">&#39; = 61, &#39;</span><span class=\"n\">Far</span> <span class=\"n\">Rockaway</span><span class=\"o\">-</span><span class=\"n\">Bayswater</span><span class=\"s1\">&#39; = 62, &#39;</span><span class=\"n\">Flatbush</span><span class=\"s1\">&#39; = 63, &#39;</span><span class=\"n\">Flatlands</span><span class=\"s1\">&#39; = 64, &#39;</span><span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 65, &#39;</span><span class=\"n\">Fordham</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 66, &#39;</span><span class=\"n\">Forest</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 67, &#39;</span><span class=\"n\">Fort</span> <span class=\"n\">Greene</span><span class=\"s1\">&#39; = 68, &#39;</span><span class=\"n\">Fresh</span> <span class=\"n\">Meadows</span><span class=\"o\">-</span><span class=\"n\">Utopia</span><span class=\"s1\">&#39; = 69, &#39;</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Totten</span><span class=\"o\">-</span><span class=\"n\">Bay</span> <span class=\"n\">Terrace</span><span class=\"o\">-</span><span class=\"n\">Clearview</span><span class=\"s1\">&#39; = 70, &#39;</span><span class=\"n\">Georgetown</span><span class=\"o\">-</span><span class=\"n\">Marine</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Bergen</span> <span class=\"n\">Beach</span><span class=\"o\">-</span><span class=\"n\">Mill</span> <span class=\"n\">Basin</span><span class=\"s1\">&#39; = 71, &#39;</span><span class=\"n\">Glen</span> <span class=\"n\">Oaks</span><span class=\"o\">-</span><span class=\"n\">Floral</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"k\">New</span> <span class=\"n\">Hyde</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 72, &#39;</span><span class=\"n\">Glendale</span><span class=\"s1\">&#39; = 73, &#39;</span><span class=\"n\">Gramercy</span><span class=\"s1\">&#39; = 74, &#39;</span><span class=\"n\">Grasmere</span><span class=\"o\">-</span><span class=\"n\">Arrochar</span><span class=\"o\">-</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Wadsworth</span><span class=\"s1\">&#39; = 75, &#39;</span><span class=\"n\">Gravesend</span><span class=\"s1\">&#39; = 76, &#39;</span><span class=\"n\">Great</span> <span class=\"n\">Kills</span><span class=\"s1\">&#39; = 77, &#39;</span><span class=\"n\">Greenpoint</span><span class=\"s1\">&#39; = 78, &#39;</span><span class=\"n\">Grymes</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Clifton</span><span class=\"o\">-</span><span class=\"n\">Fox</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 79, &#39;</span><span class=\"n\">Hamilton</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 80, &#39;</span><span class=\"n\">Hammels</span><span class=\"o\">-</span><span class=\"n\">Arverne</span><span class=\"o\">-</span><span class=\"n\">Edgemere</span><span class=\"s1\">&#39; = 81, &#39;</span><span class=\"n\">Highbridge</span><span class=\"s1\">&#39; = 82, &#39;</span><span class=\"n\">Hollis</span><span class=\"s1\">&#39; = 83, &#39;</span><span class=\"n\">Homecrest</span><span class=\"s1\">&#39; = 84, &#39;</span><span class=\"n\">Hudson</span> <span class=\"n\">Yards</span><span class=\"o\">-</span><span class=\"n\">Chelsea</span><span class=\"o\">-</span><span class=\"n\">Flatiron</span><span class=\"o\">-</span><span class=\"k\">Union</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 85, &#39;</span><span class=\"n\">Hunters</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Sunnyside</span><span class=\"o\">-</span><span class=\"n\">West</span> <span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 86, &#39;</span><span class=\"n\">Hunts</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 87, &#39;</span><span class=\"n\">Jackson</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 88, &#39;</span><span class=\"n\">Jamaica</span><span class=\"s1\">&#39; = 89, &#39;</span><span class=\"n\">Jamaica</span> <span class=\"n\">Estates</span><span class=\"o\">-</span><span class=\"n\">Holliswood</span><span class=\"s1\">&#39; = 90, &#39;</span><span class=\"n\">Kensington</span><span class=\"o\">-</span><span class=\"n\">Ocean</span> <span class=\"n\">Parkway</span><span class=\"s1\">&#39; = 91, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span><span class=\"s1\">&#39; = 92, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 93, &#39;</span><span class=\"n\">Kingsbridge</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 94, &#39;</span><span class=\"n\">Laurelton</span><span class=\"s1\">&#39; = 95, &#39;</span><span class=\"n\">Lenox</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Roosevelt</span> <span class=\"n\">Island</span><span class=\"s1\">&#39; = 96, &#39;</span><span class=\"n\">Lincoln</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 97, &#39;</span><span class=\"n\">Lindenwood</span><span class=\"o\">-</span><span class=\"n\">Howard</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 98, &#39;</span><span class=\"n\">Longwood</span><span class=\"s1\">&#39; = 99, &#39;</span><span class=\"k\">Lower</span> <span class=\"n\">East</span> <span class=\"n\">Side</span><span class=\"s1\">&#39; = 100, &#39;</span><span class=\"n\">Madison</span><span class=\"s1\">&#39; = 101, &#39;</span><span class=\"n\">Manhattanville</span><span class=\"s1\">&#39; = 102, &#39;</span><span class=\"n\">Marble</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Inwood</span><span class=\"s1\">&#39; = 103, &#39;</span><span class=\"n\">Mariner</span><span class=\"err\">\\</span><span class=\"s1\">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Maspeth&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Melrose South-Mott Haven North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Middle Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">107</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midtown-Midtown South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">108</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morningside Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">110</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morrisania-Melrose&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">111</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mott Haven-Port Morris&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mount Hope&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">113</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill-Kips Bay&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">115</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Brighton-Silver Lake&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Dorp-Midland Beach&#39;</s");
            
            document.write("pan> <span class=\"o\">=</span> <span class=\"mi\">117</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">118</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Corona&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Side-South Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">121</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Norwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">122</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakland Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakwood-Oakwood Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">124</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">125</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Parkway South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">126</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Astoria&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">127</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">129</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Park Slope-Gowanus&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">130</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Parkchester&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">131</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">132</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Parkway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">133</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">134</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Port Richmond&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">135</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">136</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">137</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">138</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensboro Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">139</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rego Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">141</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Richmond Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ridgewood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">143</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rikers Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rosedale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">145</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rossville-Woodrow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rugby-Remsen Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">147</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">148</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Seagate-Coney Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">149</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">150</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">151</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Bruckner&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">152</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">153</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Jamaica&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">154</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">155</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">156</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens South-Brookville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">157</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">158</span><span class=\"p\">,</span> <span class=\"s1\">&#39;St. Albans&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">159</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stapleton-Rosebank&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">160</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Starrett City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">161</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Steinway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">163</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">164</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park East&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park West&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">166</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">167</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Turtle Bay-East Midtown&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">168</span><span class=\"p\">,</span> <span class=\"s1\">&#39;University Heights-Morris Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">170</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper West Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">171</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Cortlandt Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">172</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">173</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">174</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">175</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Brighton&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">176</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Concourse&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">177</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Farms-Bronx River&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">178</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">179</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">180</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westchester-Unionport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">181</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westerleigh&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">182</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Whitestone&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">183</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsbridge-Olinville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">184</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsburg&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Windsor Terrace&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">186</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodhaven&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">187</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodlawn-Wakefield&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">188</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodside&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">189</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Yorkville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">191</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">192</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">193</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Queens&#39;</s");
            
            document.write("pan> <span class=\"o\">=</span> <span class=\"mi\">194</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">195</span><span class=\"p\">),</span> <span class=\"n\">pickup_puma</span> <span class=\"n\">UInt16</span><span class=\"p\">,</span> <span class=\"n\">dropoff_nyct2010_gid</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">dropoff_ctlabel</span> <span class=\"n\">Float32</span><span class=\"p\">,</span> <span class=\"n\">dropoff_borocode</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">dropoff_boroname</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">),</span> <span class=\"n\">dropoff_ct2010</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span> <span class=\"n\">dropoff_boroct2010</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">),</span> <span class=\"n\">dropoff_cdeligibil</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39; &#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;E&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;I&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"n\">dropoff_ntacode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">),</span> <span class=\"n\">dropoff_ntaname</span> <span class=\"n\">Enum16</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Airport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Allerton-Pelham Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Annadale-Huguenot-Prince\\&#39;</span><span class=\"n\">s</span> <span class=\"n\">Bay</span><span class=\"o\">-</span><span class=\"n\">Eltingville</span><span class=\"s1\">&#39; = 3, &#39;</span><span class=\"n\">Arden</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 4, &#39;</span><span class=\"n\">Astoria</span><span class=\"s1\">&#39; = 5, &#39;</span><span class=\"n\">Auburndale</span><span class=\"s1\">&#39; = 6, &#39;</span><span class=\"n\">Baisley</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 7, &#39;</span><span class=\"n\">Bath</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 8, &#39;</span><span class=\"n\">Battery</span> <span class=\"n\">Park</span> <span class=\"n\">City</span><span class=\"o\">-</span><span class=\"k\">Lower</span> <span class=\"n\">Manhattan</span><span class=\"s1\">&#39; = 9, &#39;</span><span class=\"n\">Bay</span> <span class=\"n\">Ridge</span><span class=\"s1\">&#39; = 10, &#39;</span><span class=\"n\">Bayside</span><span class=\"o\">-</span><span class=\"n\">Bayside</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 11, &#39;</span><span class=\"n\">Bedford</span><span class=\"s1\">&#39; = 12, &#39;</span><span class=\"n\">Bedford</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Fordham</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 13, &#39;</span><span class=\"n\">Bellerose</span><span class=\"s1\">&#39; = 14, &#39;</span><span class=\"n\">Belmont</span><span class=\"s1\">&#39; = 15, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 16, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">West</span><span class=\"s1\">&#39; = 17, &#39;</span><span class=\"n\">Borough</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 18, &#39;</span><span class=\"n\">Breezy</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Belle</span> <span class=\"n\">Harbor</span><span class=\"o\">-</span><span class=\"n\">Rockaway</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Broad</span> <span class=\"n\">Channel</span><span class=\"s1\">&#39; = 19, &#39;</span><span class=\"n\">Briarwood</span><span class=\"o\">-</span><span class=\"n\">Jamaica</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 20, &#39;</span><span class=\"n\">Brighton</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 21, &#39;</span><span class=\"n\">Bronxdale</span><span class=\"s1\">&#39; = 22, &#39;</span><span class=\"n\">Brooklyn</span> <span class=\"n\">Heights</span><span class=\"o\">-</span><span class=\"n\">Cobble</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 23, &#39;</span><span class=\"n\">Brownsville</span><span class=\"s1\">&#39; = 24, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 25, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 26, &#39;</span><span class=\"n\">Cambria</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 27, &#39;</span><span class=\"n\">Canarsie</span><span class=\"s1\">&#39; = 28, &#39;</span><span class=\"n\">Carroll</span> <span class=\"n\">Gardens</span><span class=\"o\">-</span><span class=\"n\">Columbia</span> <span class=\"n\">Street</span><span class=\"o\">-</span><span class=\"n\">Red</span> <span class=\"n\">Hook</span><span class=\"s1\">&#39; = 29, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"o\">-</span><span class=\"n\">Polo</span> <span class=\"n\">Grounds</span><span class=\"s1\">&#39; = 30, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 31, &#39;</span><span class=\"n\">Charleston</span><span class=\"o\">-</span><span class=\"n\">Richmond</span> <span class=\"n\">Valley</span><span class=\"o\">-</span><span class=\"n\">Tottenville</span><span class=\"s1\">&#39; = 32, &#39;</span><span class=\"n\">Chinatown</span><span class=\"s1\">&#39; = 33, &#39;</span><span class=\"n\">Claremont</span><span class=\"o\">-</span><span class=\"n\">Bathgate</span><span class=\"s1\">&#39; = 34, &#39;</span><span class=\"n\">Clinton</span><span class=\"s1\">&#39; = 35, &#39;</span><span class=\"n\">Clinton</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 36, &#39;</span><span class=\"n\">Co</span><span class=\"o\">-</span><span class=\"n\">op</span> <span class=\"n\">City</span><span class=\"s1\">&#39; = 37, &#39;</span><span class=\"n\">College</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 38, &#39;</span><span class=\"n\">Corona</span><span class=\"s1\">&#39; = 39, &#39;</span><span class=\"n\">Crotona</span> <span class=\"n\">Park</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 40, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 41, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 42, &#39;</span><span class=\"n\">Cypress</span> <span class=\"n\">Hills</span><span class=\"o\">-</span><span class=\"n\">City</span> <span class=\"n\">Line</span><span class=\"s1\">&#39; = 43, &#39;</span><span class=\"n\">DUMBO</span><span class=\"o\">-</span><span class=\"n\">Vinegar</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Downtown</span> <span class=\"n\">Brooklyn</span><span class=\"o\">-</span><span class=\"n\">Boerum</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 44, &#39;</span><span class=\"n\">Douglas</span> <span class=\"n\">Manor</span><span class=\"o\">-</span><span class=\"n\">Douglaston</span><span class=\"o\">-</span><span class=\"n\">Little</span> <span class=\"n\">Neck</span><span class=\"s1\">&#39; = 45, &#39;</span><span class=\"n\">Dyker</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 46, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Concourse</span><span class=\"o\">-</span><span class=\"n\">Concourse</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 47, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 48, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flatbush</span><span class=\"o\">-</span><span class=\"n\">Farragut</span><span class=\"s1\">&#39; = 49, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 50, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 51, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 52, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span><span class=\"s1\">&#39; = 53, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span> <span class=\"p\">(</span><span class=\"n\">Pennsylvania</span> <span class=\"n\">Ave</span><span class=\"p\">)</span><span class=\"s1\">&#39; = 54, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Tremont</span><span class=\"s1\">&#39; = 55, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 56, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Williamsburg</span><span class=\"s1\">&#39; = 57, &#39;</span><span class=\"n\">Eastchester</span><span class=\"o\">-</span><span class=\"n\">Edenwald</span><span class=\"o\">-</span><span class=\"n\">Baychester</span><span class=\"s1\">&#39; = 58, &#39;</span><span class=\"n\">Elmhurst</span");
            
            document.write("><span class=\"s1\">&#39; = 59, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"o\">-</span><span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 60, &#39;</span><span class=\"n\">Erasmus</span><span class=\"s1\">&#39; = 61, &#39;</span><span class=\"n\">Far</span> <span class=\"n\">Rockaway</span><span class=\"o\">-</span><span class=\"n\">Bayswater</span><span class=\"s1\">&#39; = 62, &#39;</span><span class=\"n\">Flatbush</span><span class=\"s1\">&#39; = 63, &#39;</span><span class=\"n\">Flatlands</span><span class=\"s1\">&#39; = 64, &#39;</span><span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 65, &#39;</span><span class=\"n\">Fordham</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 66, &#39;</span><span class=\"n\">Forest</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 67, &#39;</span><span class=\"n\">Fort</span> <span class=\"n\">Greene</span><span class=\"s1\">&#39; = 68, &#39;</span><span class=\"n\">Fresh</span> <span class=\"n\">Meadows</span><span class=\"o\">-</span><span class=\"n\">Utopia</span><span class=\"s1\">&#39; = 69, &#39;</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Totten</span><span class=\"o\">-</span><span class=\"n\">Bay</span> <span class=\"n\">Terrace</span><span class=\"o\">-</span><span class=\"n\">Clearview</span><span class=\"s1\">&#39; = 70, &#39;</span><span class=\"n\">Georgetown</span><span class=\"o\">-</span><span class=\"n\">Marine</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Bergen</span> <span class=\"n\">Beach</span><span class=\"o\">-</span><span class=\"n\">Mill</span> <span class=\"n\">Basin</span><span class=\"s1\">&#39; = 71, &#39;</span><span class=\"n\">Glen</span> <span class=\"n\">Oaks</span><span class=\"o\">-</span><span class=\"n\">Floral</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"k\">New</span> <span class=\"n\">Hyde</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 72, &#39;</span><span class=\"n\">Glendale</span><span class=\"s1\">&#39; = 73, &#39;</span><span class=\"n\">Gramercy</span><span class=\"s1\">&#39; = 74, &#39;</span><span class=\"n\">Grasmere</span><span class=\"o\">-</span><span class=\"n\">Arrochar</span><span class=\"o\">-</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Wadsworth</span><span class=\"s1\">&#39; = 75, &#39;</span><span class=\"n\">Gravesend</span><span class=\"s1\">&#39; = 76, &#39;</span><span class=\"n\">Great</span> <span class=\"n\">Kills</span><span class=\"s1\">&#39; = 77, &#39;</span><span class=\"n\">Greenpoint</span><span class=\"s1\">&#39; = 78, &#39;</span><span class=\"n\">Grymes</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Clifton</span><span class=\"o\">-</span><span class=\"n\">Fox</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 79, &#39;</span><span class=\"n\">Hamilton</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 80, &#39;</span><span class=\"n\">Hammels</span><span class=\"o\">-</span><span class=\"n\">Arverne</span><span class=\"o\">-</span><span class=\"n\">Edgemere</span><span class=\"s1\">&#39; = 81, &#39;</span><span class=\"n\">Highbridge</span><span class=\"s1\">&#39; = 82, &#39;</span><span class=\"n\">Hollis</span><span class=\"s1\">&#39; = 83, &#39;</span><span class=\"n\">Homecrest</span><span class=\"s1\">&#39; = 84, &#39;</span><span class=\"n\">Hudson</span> <span class=\"n\">Yards</span><span class=\"o\">-</span><span class=\"n\">Chelsea</span><span class=\"o\">-</span><span class=\"n\">Flatiron</span><span class=\"o\">-</span><span class=\"k\">Union</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 85, &#39;</span><span class=\"n\">Hunters</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Sunnyside</span><span class=\"o\">-</span><span class=\"n\">West</span> <span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 86, &#39;</span><span class=\"n\">Hunts</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 87, &#39;</span><span class=\"n\">Jackson</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 88, &#39;</span><span class=\"n\">Jamaica</span><span class=\"s1\">&#39; = 89, &#39;</span><span class=\"n\">Jamaica</span> <span class=\"n\">Estates</span><span class=\"o\">-</span><span class=\"n\">Holliswood</span><span class=\"s1\">&#39; = 90, &#39;</span><span class=\"n\">Kensington</span><span class=\"o\">-</span><span class=\"n\">Ocean</span> <span class=\"n\">Parkway</span><span class=\"s1\">&#39; = 91, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span><span class=\"s1\">&#39; = 92, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 93, &#39;</span><span class=\"n\">Kingsbridge</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 94, &#39;</span><span class=\"n\">Laurelton</span><span class=\"s1\">&#39; = 95, &#39;</span><span class=\"n\">Lenox</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Roosevelt</span> <span class=\"n\">Island</span><span class=\"s1\">&#39; = 96, &#39;</span><span class=\"n\">Lincoln</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 97, &#39;</span><span class=\"n\">Lindenwood</span><span class=\"o\">-</span><span class=\"n\">Howard</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 98, &#39;</span><span class=\"n\">Longwood</span><span class=\"s1\">&#39; = 99, &#39;</span><span class=\"k\">Lower</span> <span class=\"n\">East</span> <span class=\"n\">Side</span><span class=\"s1\">&#39; = 100, &#39;</span><span class=\"n\">Madison</span><span class=\"s1\">&#39; = 101, &#39;</span><span class=\"n\">Manhattanville</span><span class=\"s1\">&#39; = 102, &#39;</span><span class=\"n\">Marble</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Inwood</span><span class=\"s1\">&#39; = 103, &#39;</span><span class=\"n\">Mariner</span><span class=\"err\">\\</span><span class=\"s1\">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Maspeth&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Melrose South-Mott Haven North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Middle Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">107</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midtown-Midtown South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">108</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morningside Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">110</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morrisania-Melrose&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">111</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mott Haven-Port Morris&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mount Hope&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">113</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill-Kips Bay&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">115</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Brighton-Silver Lake&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Dorp-Midland Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">117</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">118</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Corona&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Side-South Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">121</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Norwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">122</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakland Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakwood-Oakwood Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">124</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">125</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Parkway South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">126</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Astoria&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">127</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">129</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Park Slope-Gowanus&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">130</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Parkchester&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">131</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">132</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Parkway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">133</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">134</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Port Richmond&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">135</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">136</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">137</span><s");
            
            document.write("pan class=\"p\">,</span> <span class=\"s1\">&#39;Queens Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">138</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensboro Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">139</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rego Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">141</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Richmond Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ridgewood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">143</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rikers Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rosedale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">145</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rossville-Woodrow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rugby-Remsen Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">147</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">148</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Seagate-Coney Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">149</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">150</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">151</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Bruckner&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">152</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">153</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Jamaica&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">154</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">155</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">156</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens South-Brookville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">157</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">158</span><span class=\"p\">,</span> <span class=\"s1\">&#39;St. Albans&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">159</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stapleton-Rosebank&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">160</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Starrett City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">161</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Steinway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">163</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">164</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park East&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park West&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">166</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">167</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Turtle Bay-East Midtown&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">168</span><span class=\"p\">,</span> <span class=\"s1\">&#39;University Heights-Morris Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">170</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper West Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">171</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Cortlandt Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">172</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">173</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">174</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">175</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Brighton&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">176</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Concourse&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">177</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Farms-Bronx River&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">178</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">179</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">180</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westchester-Unionport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">181</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westerleigh&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">182</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Whitestone&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">183</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsbridge-Olinville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">184</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsburg&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Windsor Terrace&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">186</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodhaven&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">187</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodlawn-Wakefield&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">188</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodside&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">189</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Yorkville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">191</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">192</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">193</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">194</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">195</span><span class=\"p\">),</span> <span class=\"n\">dropoff_puma</span> <span class=\"n\">UInt16</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">pickup_date</span><span class=\"p\">,</span> <span class=\"n\">pickup_datetime</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5728\u4e4b\u524d\u7684\u670d\u52a1\u5668\u4e2d\u8fd0\u884c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">trips_mergetree_x3</span> <span class=\"k\">AS</span> <span class=\"n\">trips_mergetree_third</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Distributed</span><span class=\"p\">(</span><span class=\"n\">perftest</span><span class=\"p\">,</span> <span class=\"k\">default</span><span class=\"p\">,</span> <span class=\"n\">trips_mergetree_third</span><span class=\"p\">,</span> <span class=\"n\">rand</span><span class=\"p\">())</span>\n</code></pre></div>\n\n\n<p>\u8fd0\u884c\u5982\u4e0b\u67e5\u8be2\u91cd\u65b0\u5206\u5e03\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">trips_mergetree_x3</span> <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u4e2a\u67e5\u8be2\u9700\u8981\u8fd0\u884c2454\u79d2\u3002</p>\n<p>\u5728\u4e09\u53f0\u670d\u52a1\u5668\u96c6\u7fa4\u4e2d\u8fd0\u884c\u7684\u7ed3\u679c\uff1a</p>\n<p>Q1: 0.212 seconds.<br />\nQ2: 0.438 seconds.<br />\nQ3: 0.733 seconds.<br />\nQ4: 1.241 seconds.</p>\n<p>\u4e0d\u51fa\u610f\u6599\uff0c\u67e5\u8be2\u662f\u7ebf\u6027\u6269\u5c55\u7684\u3002</p>\n<p>\u6211\u4eec\u540c\u65f6\u5728140\u53f0\u670d\u52a1\u5668\u7684\u96c6\u7fa4\u4e2d\u8fd0\u884c\u7684\u7ed3\u679c\uff1a</p>\n<p>Q1: 0.028 sec.<br />\nQ2: 0.043 sec.<br />\nQ3: 0.051 sec.<br />\nQ4: 0.072 sec.</p>\n<p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u5904\u7406\u65f6\u95f4\u9996\u5148\u7531\u7f51\u7edc\u5ef6\u8fdf\u786e\u5b9a\u3002<br />\n\u6211\u4eec\u4f7f\u7528\u4f4d\u4e8e\u82ac\u5170\u7684Yandex\u6570\u636e\u4e2d\u5fc3\u4e2d\u7684\u5ba2\u6237\u7aef\u53bb\u4f4d\u4e8e\u4fc4\u7f57\u65af\u7684\u96c6\u7fa4\u4e0a\u8fd0\u884c\u67e5\u8be2\uff0c\u8fd9\u589e\u52a0\u4e86\u5927\u7ea620\u6beb\u79d2\u7684\u5ef6\u8fdf\u3002</p>\n<h3 id=\"zong-jie\">\u603b\u7ed3<a class=\"headerlink\" href=\"#zong-jie\" title=\"Permanent link\">&para;</a></h3>\n<table>\n<thead>\n<tr>\n<th>servers</th>\n<th>Q1</th>\n<th>Q2</th>\n<th>Q3</th>\n<th>Q4</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>0.490</td>\n<td>1.224</td>\n<td>2.104</td>\n<td>3.593</td>\n</tr>\n<tr>\n<td>3</td>\n<td>0.212</td>\n<td>0.438</td>\n<td>0.733</td>\n<td>1.241</td>\n</tr>\n<tr>\n<td>140</td>\n<td>0.028</td>\n<td>0.043</td>\n<td>0.051</td>\n<td>0.072</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"amplab_benchmark/\"></a><a name=\"../../example_datasets/amplab_benchmark/\"></a><a name=\"../../../../../example_datasets/amplab_benchmark/\"></a><a name=\"example_datasets/amplab_benchmark/\"></a><a name=\"../../../../getting_started/");
            
            document.write("example_datasets/amplab_benchmark/\"></a><a name=\"../../../../../../example_datasets/amplab_benchmark/\"></a><a name=\"../../../../example_datasets/amplab_benchmark/\"></a><a name=\"getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"../../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"../../../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"../../../../../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"../example_datasets/amplab_benchmark/\"></a><a name=\"../../../example_datasets/amplab_benchmark/\"></a></p>\n<h2 id=\"amplab-da-shu-ju-ji-zhun-ce-shi\">AMPLab \u5927\u6570\u636e\u57fa\u51c6\u6d4b\u8bd5<a class=\"headerlink\" href=\"#amplab-da-shu-ju-ji-zhun-ce-shi\" title=\"Permanent link\">&para;</a></h2>\n<p>\u53c2\u8003 <a href=\"https://amplab.cs.berkeley.edu/benchmark/\">https://amplab.cs.berkeley.edu/benchmark/</a></p>\n<p>\u9700\u8981\u60a8\u5728<a href=\"https://aws.amazon.com\">https://aws.amazon.com</a>\u6ce8\u518c\u4e00\u4e2a\u514d\u8d39\u7684\u8d26\u53f7\u3002\u6ce8\u518c\u65f6\u9700\u8981\u60a8\u63d0\u4f9b\u4fe1\u7528\u5361\u3001\u90ae\u7bb1\u3001\u7535\u8bdd\u7b49\u4fe1\u606f\u3002\u4e4b\u540e\u53ef\u4ee5\u5728<a href=\"https://console.aws.amazon.com/iam/home?nc2=h_m_sc#security_credential\">https://console.aws.amazon.com/iam/home?nc2=h_m_sc#security_credential</a>\u83b7\u53d6\u65b0\u7684\u8bbf\u95ee\u5bc6\u94a5</p>\n<p>\u5728\u63a7\u5236\u53f0\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install s3cmd\n$ mkdir tiny<span class=\"p\">;</span> <span class=\"nb\">cd</span> tiny<span class=\"p\">;</span>\n$ s3cmd sync s3://big-data-benchmark/pavlo/text-deflate/tiny/ .\n$ <span class=\"nb\">cd</span> ..\n$ mkdir 1node<span class=\"p\">;</span> <span class=\"nb\">cd</span> 1node<span class=\"p\">;</span>\n$ s3cmd sync s3://big-data-benchmark/pavlo/text-deflate/1node/ .\n$ <span class=\"nb\">cd</span> ..\n$ mkdir 5nodes<span class=\"p\">;</span> <span class=\"nb\">cd</span> 5nodes<span class=\"p\">;</span>\n$ s3cmd sync s3://big-data-benchmark/pavlo/text-deflate/5nodes/ .\n$ <span class=\"nb\">cd</span> ..\n</code></pre></div>\n\n\n<p>\u5728ClickHouse\u8fd0\u884c\u5982\u4e0b\u67e5\u8be2\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">rankings_tiny</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">pageURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">pageRank</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">avgDuration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">uservisits_tiny</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">sourceIP</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">destinationURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">visitDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">adRevenue</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserAgent</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">cCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">),</span>\n    <span class=\"n\">lCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span>\n    <span class=\"n\">searchWord</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">duration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">rankings_1node</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">pageURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">pageRank</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">avgDuration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">uservisits_1node</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">sourceIP</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">destinationURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">visitDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">adRevenue</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserAgent</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">cCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">),</span>\n    <span class=\"n\">lCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span>\n    <span class=\"n\">searchWord</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">duration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">rankings_5nodes_on_single</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">pageURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">pageRank</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">avgDuration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">uservisits_5nodes_on_single</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">sourceIP</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">destinationURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">visitDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">adRevenue</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserAgent</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">cCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">),</span>\n    <span class=\"n\">lCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span>\n    <span class=\"n\">searchWord</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">duration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>\u56de\u5230\u63a7\u5236\u53f0\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"k\">for</span> i in tiny/rankings/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO rankings_tiny FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in tiny/uservisits/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO uservisits_tiny FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in 1node/rankings/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO rankings_1node FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in 1node/uservisits/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO uservisits_1node FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in 5nodes/rankings/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO rankings_5nodes_on_single FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in 5nodes/uservisits/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> cl");
            
            document.write("ickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO uservisits_5nodes_on_single FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n</code></pre></div>\n\n\n<p>\u7b80\u5355\u7684\u67e5\u8be2\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">pageURL</span><span class=\"p\">,</span> <span class=\"n\">pageRank</span> <span class=\"k\">FROM</span> <span class=\"n\">rankings_1node</span> <span class=\"k\">WHERE</span> <span class=\"n\">pageRank</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1000</span>\n\n<span class=\"k\">SELECT</span> <span class=\"k\">substring</span><span class=\"p\">(</span><span class=\"n\">sourceIP</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">),</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">adRevenue</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">uservisits_1node</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">substring</span><span class=\"p\">(</span><span class=\"n\">sourceIP</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">sourceIP</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">adRevenue</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">totalRevenue</span><span class=\"p\">,</span>\n    <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">pageRank</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pageRank</span>\n<span class=\"k\">FROM</span> <span class=\"n\">rankings_1node</span> <span class=\"k\">ALL</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">sourceIP</span><span class=\"p\">,</span>\n        <span class=\"n\">destinationURL</span> <span class=\"k\">AS</span> <span class=\"n\">pageURL</span><span class=\"p\">,</span>\n        <span class=\"n\">adRevenue</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">uservisits_1node</span>\n    <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">visitDate</span> <span class=\"o\">&gt;</span> <span class=\"s1\">&#39;1980-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">visitDate</span> <span class=\"o\">&lt;</span> <span class=\"s1\">&#39;1980-04-01&#39;</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"n\">pageURL</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">sourceIP</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">totalRevenue</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">1</span>\n</code></pre></div>\n\n\n<p><a name=\"../example_datasets/wikistat/\"></a><a name=\"getting_started/example_datasets/wikistat/\"></a><a name=\"../../../../example_datasets/wikistat/\"></a><a name=\"../../getting_started/example_datasets/wikistat/\"></a><a name=\"../../../../../getting_started/example_datasets/wikistat/\"></a><a name=\"../../../../../example_datasets/wikistat/\"></a><a name=\"../getting_started/example_datasets/wikistat/\"></a><a name=\"../../../../../../example_datasets/wikistat/\"></a><a name=\"../../../example_datasets/wikistat/\"></a><a name=\"wikistat/\"></a><a name=\"../../example_datasets/wikistat/\"></a><a name=\"example_datasets/wikistat/\"></a><a name=\"../../../getting_started/example_datasets/wikistat/\"></a><a name=\"../../../../getting_started/example_datasets/wikistat/\"></a></p>\n<h2 id=\"wei-ji-fang-wen-shu-ju\">\u7ef4\u57fa\u8bbf\u95ee\u6570\u636e<a class=\"headerlink\" href=\"#wei-ji-fang-wen-shu-ju\" title=\"Permanent link\">&para;</a></h2>\n<p>\u53c2\u8003: <a href=\"http://dumps.wikimedia.org/other/pagecounts-raw/\">http://dumps.wikimedia.org/other/pagecounts-raw/</a></p>\n<p>\u521b\u5efa\u8868\u7ed3\u6784\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">wikistat</span>\n<span class=\"p\">(</span>\n    <span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">time</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">project</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">subproject</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">path</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">hits</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">size</span> <span class=\"n\">UInt64</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">time</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>\u52a0\u8f7d\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"k\">for</span> i in <span class=\"o\">{</span><span class=\"m\">2007</span>..2016<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"k\">for</span> j in <span class=\"o\">{</span><span class=\"m\">01</span>..12<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span>-<span class=\"nv\">$j</span> &gt;<span class=\"p\">&amp;</span><span class=\"m\">2</span><span class=\"p\">;</span> curl -sSL <span class=\"s2\">&quot;http://dumps.wikimedia.org/other/pagecounts-raw/</span><span class=\"nv\">$i</span><span class=\"s2\">/</span><span class=\"nv\">$i</span><span class=\"s2\">-</span><span class=\"nv\">$j</span><span class=\"s2\">/&quot;</span> <span class=\"p\">|</span> grep -oE <span class=\"s1\">&#39;pagecounts-[0-9]+-[0-9]+\\.gz&#39;</span><span class=\"p\">;</span> <span class=\"k\">done</span><span class=\"p\">;</span> <span class=\"k\">done</span> <span class=\"p\">|</span> sort <span class=\"p\">|</span> uniq <span class=\"p\">|</span> tee links.txt\n$ cat links.txt <span class=\"p\">|</span> <span class=\"k\">while</span> <span class=\"nb\">read</span> link<span class=\"p\">;</span> <span class=\"k\">do</span> wget http://dumps.wikimedia.org/other/pagecounts-raw/<span class=\"k\">$(</span><span class=\"nb\">echo</span> <span class=\"nv\">$link</span> <span class=\"p\">|</span> sed -r <span class=\"s1\">&#39;s/pagecounts-([0-9]{4})([0-9]{2})[0-9]{2}-[0-9]+\\.gz/\\1/&#39;</span><span class=\"k\">)</span>/<span class=\"k\">$(</span><span class=\"nb\">echo</span> <span class=\"nv\">$link</span> <span class=\"p\">|</span> sed -r <span class=\"s1\">&#39;s/pagecounts-([0-9]{4})([0-9]{2})[0-9]{2}-[0-9]+\\.gz/\\1-\\2/&#39;</span><span class=\"k\">)</span>/<span class=\"nv\">$link</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ ls -1 /opt/wikistat/ <span class=\"p\">|</span> grep gz <span class=\"p\">|</span> <span class=\"k\">while</span> <span class=\"nb\">read</span> i<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> gzip -cd /opt/wikistat/<span class=\"nv\">$i</span> <span class=\"p\">|</span> ./wikistat-loader --time<span class=\"o\">=</span><span class=\"s2\">&quot;</span><span class=\"k\">$(</span><span class=\"nb\">echo</span> -n <span class=\"nv\">$i</span> <span class=\"p\">|</span> sed -r <span class=\"s1\">&#39;s/pagecounts-([0-9]{4})([0-9]{2})([0-9]{2})-([0-9]{2})([0-9]{2})([0-9]{2})\\.gz/\\1-\\2-\\3 \\4-00-00/&#39;</span><span class=\"k\">)</span><span class=\"s2\">&quot;</span> <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO wikistat FORMAT TabSeparated&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n</code></pre></div>\n\n\n<p><a name=\"../getting_started/example_datasets/criteo/\"></a><a name=\"../../../../../../example_datasets/criteo/\"></a><a name=\"getting_started/example_datasets/criteo/\"></a><a name=\"../../../../../getting_started/example_datasets/criteo/\"></a><a name=\"../../../../getting_started/example_datasets/criteo/\"></a><a name=\"criteo/\"></a><a name=\"../../../../example_datasets/criteo/\"></a><a name=\"../../../example_datasets/criteo/\"></a><a name=\"../example_datasets/criteo/\"></a><a name=\"example_datasets/criteo/\"></a><a name=\"../../example_datasets/criteo/\"></a><a name=\"../../../../../example_datasets/criteo/\"></a><a name=\"../../../getting_started/example_datasets/criteo/\"></a><a name=\"../../getting_started/example_datasets/criteo/\"></a></p>\n<h2 id=\"criteo-tbji-bie-dian-ji-ri-zhi\">Criteo TB\u7ea7\u522b\u70b9\u51fb\u65e5\u5fd7<a class=\"headerlink\" href=\"#criteo-tbji-bie-dian-ji-ri-zhi\" title=\"Permanent link\">&para;</a></h2>\n<p>\u53ef\u4ee5\u4ece<a href=\"http://labs.criteo.com/downloads/download-terabyte-click-logs/\">http://labs.criteo.com/downloads/download-terabyte-click-logs/</a>\u4e0a\u4e0b\u8f7d\u6570\u636e</p>\n<p>\u521b\u5efa\u539f\u59cb\u6570\u636e\u5bf9\u5e94\u7684\u8868\u7ed3\u6784\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">criteo_log</span> <span class=\"p\">(</span><span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">clicked</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">int1</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int2</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int3</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int4</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int5</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int6</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int7</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"nb\">int8</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int9</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int10</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int11</s");
            
            document.write("pan> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int12</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int13</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">cat1</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat2</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat3</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat4</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat5</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat6</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat7</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat8</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat9</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat10</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat11</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat12</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat13</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat14</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat15</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat16</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat17</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat18</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat19</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat20</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat21</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat22</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat23</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat24</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat25</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat26</span> <span class=\"n\">String</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span>\n</code></pre></div>\n\n\n<p>\u4e0b\u8f7d\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"k\">for</span> i in <span class=\"o\">{</span><span class=\"m\">00</span>..23<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zcat datasets/criteo/day_<span class=\"si\">${</span><span class=\"nv\">i</span><span class=\"p\">#0</span><span class=\"si\">}</span>.gz <span class=\"p\">|</span> sed -r <span class=\"s1\">&#39;s/^/2000-01-&#39;</span><span class=\"si\">${</span><span class=\"nv\">i</span><span class=\"p\">/00/24</span><span class=\"si\">}</span><span class=\"s1\">&#39;\\t/&#39;</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO criteo_log FORMAT TabSeparated&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n</code></pre></div>\n\n\n<p>\u521b\u5efa\u8f6c\u6362\u540e\u7684\u6570\u636e\u5bf9\u5e94\u7684\u8868\u7ed3\u6784\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">criteo</span>\n<span class=\"p\">(</span>\n    <span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">clicked</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">int1</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int2</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int3</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int4</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int5</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int6</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int7</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"nb\">int8</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int9</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int10</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int11</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int12</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int13</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat1</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat2</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat3</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat4</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat5</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat6</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat7</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat8</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat9</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat10</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat11</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat12</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat13</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat14</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat15</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat16</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat17</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat18</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat19</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat20</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat21</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat22</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat23</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat24</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat25</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat26</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">icat1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">icat1</span><span class=\"p\">)),</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5c06\u7b2c\u4e00\u5f20\u8868\u4e2d\u7684\u539f\u59cb\u6570\u636e\u8f6c\u5316\u5199\u5165\u5230\u7b2c\u4e8c\u5f20\u8868\u4e2d\u53bb\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">criteo</span> <span class=\"k\">SELECT</span> <span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">clicked</span><span class=\"p\">,</span> <span class=\"n\">int1</span><span class=\"p\">,</span> <span class=\"n\">int2</span><span class=\"p\">,</span> <span class=\"n\">int3</span><span class=\"p\">,</span> <span class=\"n\">int4</span><span class=\"p\">,</span> <span class=\"n\">int5</span><span class=\"p\">,</span> <span class=\"n\">int6</span><span class=\"p\">,</span> <span class=\"n\">int7</span><span class=\"p\">,</span> <span class=\"nb\">int8</span><span class=\"p\">,</span> <span class=\"n\">int9</span><span class=\"p\">,</span> <span class=\"n\">int10</span><span class=\"p\">,</span> <span class=\"n\">int11</span><span class=\"p\">,</span> <span class=\"n\">int12</span><span class=\"p\">,</span> <span class=\"n\">int13</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat1</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat1</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat2</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat2</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat3</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat3</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat4</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat4</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat5</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat5</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat6</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat6</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</s");
            
            document.write("pan><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat7</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat7</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat8</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat8</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat9</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat9</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat10</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat10</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat11</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat11</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat12</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat12</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat13</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat13</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat14</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat14</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat15</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat15</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat16</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat16</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat17</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat17</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat18</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat18</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat19</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat19</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat20</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat20</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat21</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat21</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat22</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat22</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat23</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat23</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat24</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat24</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat25</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat25</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat26</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat26</span> <span class=\"k\">FROM</span> <span class=\"n\">criteo_log</span><span class=\"p\">;</span>\n\n<span class=\"k\">DROP</span> <span class=\"k\">TABLE</span> <span class=\"n\">criteo_log</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../example_datasets/star_schema/\"></a><a name=\"../../../getting_started/example_datasets/star_schema/\"></a><a name=\"../../../../../../example_datasets/star_schema/\"></a><a name=\"../../../../example_datasets/star_schema/\"></a><a name=\"../../../../../example_datasets/star_schema/\"></a><a name=\"../../../../getting_started/example_datasets/star_schema/\"></a><a name=\"star_schema/\"></a><a name=\"../../../example_datasets/star_schema/\"></a><a name=\"getting_started/example_datasets/star_schema/\"></a><a name=\"example_datasets/star_schema/\"></a><a name=\"../../../../../getting_started/example_datasets/star_schema/\"></a><a name=\"../getting_started/example_datasets/star_schema/\"></a><a name=\"../example_datasets/star_schema/\"></a><a name=\"../../getting_started/example_datasets/star_schema/\"></a></p>\n<h2 id=\"star-schema-benchmark\">Star Schema Benchmark<a class=\"headerlink\" href=\"#star-schema-benchmark\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7f16\u8bd1 dbgen:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ git clone git@github.com:vadimtk/ssb-dbgen.git\n$ <span class=\"nb\">cd</span> ssb-dbgen\n$ make\n</code></pre></div>\n\n\n<p>\u5f00\u59cb\u751f\u6210\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ ./dbgen -s <span class=\"m\">1000</span> -T c\n$ ./dbgen -s <span class=\"m\">1000</span> -T l\n$ ./dbgen -s <span class=\"m\">1000</span> -T p\n$ ./dbgen -s <span class=\"m\">1000</span> -T s\n$ ./dbgen -s <span class=\"m\">1000</span> -T d\n</code></pre></div>\n\n\n<p>\u5728ClickHouse\u4e2d\u521b\u5efa\u8868\u7ed3\u6784\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">customer</span>\n<span class=\"p\">(</span>\n        <span class=\"n\">C_CUSTKEY</span>       <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"n\">C_NAME</span>          <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">C_ADDRESS</span>       <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">C_CITY</span>          <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">C_NATION</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">C_REGION</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">C_PHONE</span>         <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">C_MKTSEGMENT</span>    <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">C_CUSTKEY</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">lineorder</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">LO_ORDERKEY</span>             <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_LINENUMBER</span>           <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_CUSTKEY</span>              <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_PARTKEY</span>              <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_SUPPKEY</span>              <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_ORDERDATE</span>            <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_ORDERPRIORITY</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n    <span class=\"n\">LO_SHIPPRIORITY</span>         <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_QUANTITY</span>             <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_EXTENDEDPRICE</span>        <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_ORDTOTALPRICE</span>        <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_DISCOUNT</span>             <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_REVENUE</span>              <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_SUPPLYCOST</span>           <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_TAX</span>                  <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_COMMITDATE</span>           <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_SHIPMODE</span>             <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTr");
            
            document.write("ee</span> <span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">,</span> <span class=\"n\">LO_ORDERKEY</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">part</span>\n<span class=\"p\">(</span>\n        <span class=\"n\">P_PARTKEY</span>       <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"n\">P_NAME</span>          <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">P_MFGR</span>          <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_CATEGORY</span>      <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_BRAND</span>         <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_COLOR</span>         <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_TYPE</span>          <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_SIZE</span>          <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n        <span class=\"n\">P_CONTAINER</span>     <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">P_PARTKEY</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">supplier</span>\n<span class=\"p\">(</span>\n        <span class=\"n\">S_SUPPKEY</span>       <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"n\">S_NAME</span>          <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">S_ADDRESS</span>       <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">S_CITY</span>          <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">S_NATION</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">S_REGION</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">S_PHONE</span>         <span class=\"n\">String</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">S_SUPPKEY</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u5199\u5165\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO customer FORMAT CSV&quot;</span> &lt; customer.tbl\n$ clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO part FORMAT CSV&quot;</span> &lt; part.tbl\n$ clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO supplier FORMAT CSV&quot;</span> &lt; supplier.tbl\n$ clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO lineorder FORMAT CSV&quot;</span> &lt; lineorder.tbl\n</code></pre></div>\n\n\n<p>\u5c06\u201c\u661f\u578b\u6a21\u578b\u201d\u8f6c\u6362\u4e3a\u975e\u89c4\u8303\u5316\u7684\u201c\u5e73\u9762\u6a21\u578b\u201d\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">max_memory_usage</span> <span class=\"o\">=</span> <span class=\"mi\">20000000000</span><span class=\"p\">,</span> <span class=\"n\">allow_experimental_multiple_joins_emulation</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">lineorder_flat</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span>\n<span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">,</span> <span class=\"n\">LO_ORDERKEY</span><span class=\"p\">)</span> <span class=\"k\">AS</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"p\">.</span><span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"p\">.</span><span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"n\">p</span><span class=\"p\">.</span><span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">lineorder</span> <span class=\"n\">l</span>\n <span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"n\">customer</span> <span class=\"k\">c</span> <span class=\"k\">ON</span> <span class=\"p\">(</span><span class=\"k\">c</span><span class=\"p\">.</span><span class=\"n\">C_CUSTKEY</span> <span class=\"o\">=</span> <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">LO_CUSTKEY</span><span class=\"p\">)</span>\n <span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"n\">supplier</span> <span class=\"n\">s</span> <span class=\"k\">ON</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">.</span><span class=\"n\">S_SUPPKEY</span> <span class=\"o\">=</span> <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">LO_SUPPKEY</span><span class=\"p\">)</span>\n <span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"n\">part</span> <span class=\"n\">p</span> <span class=\"k\">ON</span>  <span class=\"p\">(</span><span class=\"n\">p</span><span class=\"p\">.</span><span class=\"n\">P_PARTKEY</span> <span class=\"o\">=</span> <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">LO_PARTKEY</span><span class=\"p\">);</span>\n\n<span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"n\">C_CUSTKEY</span><span class=\"p\">,</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"n\">S_SUPPKEY</span><span class=\"p\">,</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"n\">P_PARTKEY</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Running the queries:</p>\n<p>Q1.1</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_EXTENDEDPRICE</span> <span class=\"o\">*</span> <span class=\"n\">LO_DISCOUNT</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">1993</span> <span class=\"k\">AND</span> <span class=\"n\">LO_DISCOUNT</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">1</span> <span class=\"k\">AND</span> <span class=\"mi\">3</span> <span class=\"k\">AND</span> <span class=\"n\">LO_QUANTITY</span> <span class=\"o\">&lt;</span> <span class=\"mi\">25</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q1.2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_EXTENDEDPRICE</span> <span class=\"o\">*</span> <span class=\"n\">LO_DISCOUNT</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">199401</span> <span class=\"k\">AND</span> <span class=\"n\">LO_DISCOUNT</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">4</span> <span class=\"k\">AND</span> <span class=\"mi\">6</span> <span class=\"k\">AND</span> <span class=\"n\">LO_QUANTITY</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">26</span> <span class=\"k\">AND</span> <span class=\"mi\">35</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q1.3</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_EXTENDEDPRICE</span> <span class=\"o\">*</span> <span class=\"n\">LO_DISCOUNT</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">toISOWeek</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">6</span> <span class=\"k\">AND</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">1994</span> <span class=\"k\">AND</span> <span class=\"n\">LO_DISCOUNT</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">5</span> <span class=\"k\">AND</span> <span class=\"mi\">7</span> <span class=\"k\">AND</span> <span class=\"n\">LO_QUANTITY</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">26</span> <span class=\"k\">AND</span> <span class=\"mi\">35</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q2.1</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">),</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORD");
            
            document.write("ERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">P_CATEGORY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#12&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q2.2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">),</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">BETWEEN</span> <span class=\"s1\">&#39;MFGR#2221&#39;</span> <span class=\"k\">AND</span> <span class=\"s1\">&#39;MFGR#2228&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;ASIA&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q2.3</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">),</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">P_BRAND</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#2239&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;EUROPE&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3.1</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">C_NATION</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">C_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;ASIA&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;ASIA&#39;</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">1992</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&lt;=</span> <span class=\"mi\">1997</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">C_NATION</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"k\">year</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span> <span class=\"k\">asc</span><span class=\"p\">,</span> <span class=\"n\">revenue</span> <span class=\"k\">desc</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3.2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">C_NATION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED STATES&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_NATION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED STATES&#39;</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">1992</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&lt;=</span> <span class=\"mi\">1997</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"k\">year</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span> <span class=\"k\">asc</span><span class=\"p\">,</span> <span class=\"n\">revenue</span> <span class=\"k\">desc</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3.3</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">C_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">C_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI5&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">S_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">S_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI5&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">1992</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&lt;=</span> <span class=\"mi\">1997</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"k\">year</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span> <span class=\"k\">asc</span><span class=\"p\">,</span> <span class=\"n\">revenue</span> <span class=\"k\">desc</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3.4</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">C_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">C_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI5&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">S_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">S_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI5&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;199712&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"k\">year</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span> <span class=\"k\">asc</span><span class=\"p\">,</span> <span class=\"n\">revenue</span> <span class=\"k\">desc</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q4.1</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">C_NATION</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span> <span class");
            
            document.write("=\"o\">-</span> <span class=\"n\">LO_SUPPLYCOST</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">profit</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">C_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">P_MFGR</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">P_MFGR</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#2&#39;</span><span class=\"p\">)</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">C_NATION</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">C_NATION</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q4.2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"n\">P_CATEGORY</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span> <span class=\"o\">-</span> <span class=\"n\">LO_SUPPLYCOST</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">profit</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">C_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"k\">year</span> <span class=\"o\">=</span> <span class=\"mi\">1997</span> <span class=\"k\">OR</span> <span class=\"k\">year</span> <span class=\"o\">=</span> <span class=\"mi\">1998</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">P_MFGR</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">P_MFGR</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#2&#39;</span><span class=\"p\">)</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"n\">P_CATEGORY</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"n\">P_CATEGORY</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q4.3</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span> <span class=\"o\">-</span> <span class=\"n\">LO_SUPPLYCOST</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">profit</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">S_NATION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED STATES&#39;</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"k\">year</span> <span class=\"o\">=</span> <span class=\"mi\">1997</span> <span class=\"k\">OR</span> <span class=\"k\">year</span> <span class=\"o\">=</span> <span class=\"mi\">1998</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">P_CATEGORY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#14&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><a name=\"interfaces/\"></a><a name=\"../interfaces/\"></a><a name=\"../../interfaces/\"></a><a name=\"../../../../../interfaces/\"></a><a name=\"../../../interfaces/\"></a><a name=\"../../../../interfaces/\"></a></p>\n<h2 id=\"interfaces\">\u5ba2\u6237\u7aef<a class=\"headerlink\" href=\"#interfaces\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse\u63d0\u4f9b\u4e86\u4e24\u4e2a\u7f51\u7edc\u63a5\u53e3\uff08\u4e24\u8005\u90fd\u53ef\u4ee5\u9009\u62e9\u5305\u88c5\u5728TLS\u4e2d\u4ee5\u63d0\u9ad8\u5b89\u5168\u6027\uff09\uff1a</p>\n<ul>\n<li><a href=\"#http/\">HTTP</a>\uff0c\u8bb0\u5f55\u5728\u6848\uff0c\u6613\u4e8e\u4f7f\u7528.</li>\n<li><a href=\"#tcp/\">\u672c\u5730\u4ebaTCP</a>\uff0c\u8fd9\u6709\u8f83\u5c11\u7684\u5f00\u9500.</li>\n</ul>\n<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9002\u5f53\u7684\u5de5\u5177\u6216\u5e93\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u4e0e\u8fd9\u4e9b\u5de5\u5177\u6216\u5e93\u8fdb\u884c\u4ea4\u4e92\u3002 Yandex\u7684\u5b98\u65b9\u652f\u6301\u5982\u4e0b\uff1a\n* <a href=\"#cli/\">\u547d\u4ee4\u884c\u5ba2\u6237\u7aef</a>\n* <a href=\"#jdbc/\">JDBC\u9a71\u52a8\u7a0b\u5e8f</a>\n* <a href=\"#odbc/\">ODBC\u9a71\u52a8\u7a0b\u5e8f</a>\n* <a href=\"#cpp/\">C++\u5ba2\u6237\u7aef\u5e93</a></p>\n<p>\u8fd8\u6709\u8bb8\u591a\u7b2c\u4e09\u65b9\u5e93\u53ef\u4f9b\u4f7f\u7528ClickHouse\uff1a\n* <a href=\"#third-party/client_libraries/\">\u5ba2\u6237\u7aef\u5e93</a>\n* <a href=\"#third-party/integrations/\">\u96c6\u6210</a>\n* <a href=\"#third-party/gui/\">\u53ef\u89c6\u754c\u9762</a></p>\n<p><a name=\"../../../../../interfaces/cli/\"></a><a name=\"../../../../interfaces/cli/\"></a><a name=\"interfaces/cli/\"></a><a name=\"../../interfaces/cli/\"></a><a name=\"cli/\"></a><a name=\"../../../interfaces/cli/\"></a><a name=\"../interfaces/cli/\"></a></p>\n<h2 id=\"ming-ling-xing-ke-hu-duan\">\u547d\u4ee4\u884c\u5ba2\u6237\u7aef<a class=\"headerlink\" href=\"#ming-ling-xing-ke-hu-duan\" title=\"Permanent link\">&para;</a></h2>\n<p>\u901a\u8fc7\u547d\u4ee4\u884c\u6765\u8bbf\u95ee ClickHouse\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>clickhouse-client</code></p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client\nClickHouse client version <span class=\"m\">0</span>.0.26176.\nConnecting to localhost:9000.\nConnected to ClickHouse server version <span class=\"m\">0</span>.0.26176.:<span class=\"o\">)</span>\n</code></pre></div>\n\n\n<p>\u8be5\u5ba2\u6237\u7aef\u652f\u6301\u547d\u4ee4\u884c\u53c2\u6570\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u3002\u67e5\u770b\u66f4\u591a\uff0c\u8bf7\u770b \"<a href=\"#interfaces_cli_configuration\">\u914d\u7f6e</a>\"</p>\n<h3 id=\"shi-yong-fang-shi\">\u4f7f\u7528\u65b9\u5f0f<a class=\"headerlink\" href=\"#shi-yong-fang-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd9\u4e2a\u5ba2\u6237\u7aef\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u4ea4\u4e92\u5f0f\u4e0e\u975e\u4ea4\u4e92\u5f0f\uff08\u6279\u91cf\uff09\u4e24\u79cd\u6a21\u5f0f\u3002<br />\n\u4f7f\u7528\u6279\u91cf\u6a21\u5f0f\uff0c\u8981\u6307\u5b9a <code>query</code> \u53c2\u6570\uff0c\u6216\u8005\u53d1\u9001\u6570\u636e\u5230 <code>stdin</code>\uff08\u5b83\u4f1a\u68c0\u67e5 <code>stdin</code> \u662f\u5426\u662f Terminal\uff09\uff0c\u6216\u8005\u4e24\u79cd\u540c\u65f6\u4f7f\u7528\u3002<br />\n\u5b83\u4e0e HTTP \u63a5\u53e3\u5f88\u76f8\u4f3c\uff0c\u5f53\u4f7f\u7528 <code>query</code> \u53c2\u6570\u53d1\u9001\u6570\u636e\u5230 <code>stdin</code> \u65f6\uff0c\u5ba2\u6237\u7aef\u8bf7\u6c42\u5c31\u662f\u4e00\u884c\u4e00\u884c\u7684 <code>stdin</code> \u8f93\u5165\u4f5c\u4e3a <code>query</code> \u7684\u53c2\u6570\u3002\u8fd9\u79cd\u65b9\u5f0f\u5728\u5927\u89c4\u6a21\u7684\u63d2\u5165\u8bf7\u6c42\u4e2d\u975e\u5e38\u65b9\u4fbf\u3002</p>\n<p>\u4f7f\u7528\u8fd9\u4e2a\u5ba2\u6237\u7aef\u63d2\u5165\u6570\u636e\u7684\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> -ne <span class=\"s2\">&quot;1, &#39;some text&#39;, &#39;2016-08-14 00:00:00&#39;\\n2, &#39;some more text&#39;, &#39;2016-08-14 00:00:01&#39;&quot;</span> <span class=\"p\">|</span> clickhouse-client --database<span class=\"o\">=</span><span class=\"nb\">test</span> --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test FORMAT CSV&quot;</span><span class=\"p\">;</span>\n\ncat <span class=\"s\">&lt;&lt;_EOF | clickhouse-client --database=test --query=&quot;INSERT INTO test FORMAT CSV&quot;;</span>\n<span class=\"s\">3, &#39;some text&#39;, &#39;2016-08-14 00:00:00&#39;</span>\n<span class=\"s\">4, &#39;some more text&#39;, &#39;2016-08-14 00:00:01&#39;</span>\n<span class=\"s\">_EOF</span>\n\ncat file.csv <span class=\"p\">|</span> clickhouse-client --database<span class=\"o\">=</span><span class=\"nb\">test</span> --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test FORMAT CSV&quot;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u5728\u6279\u91cf\u6a21\u5f0f\u4e2d\uff0c\u9ed8\u8ba4\u7684\u6570\u636e\u683c\u5f0f\u662f <code>TabSeparated</code> \u5206\u9694\u7684\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u67e5\u8be2\u6765\u7075\u6d3b\u8bbe\u7f6e FORMAT \u683c\u5f0f\u3002</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728\u6279\u91cf\u6a21\u5f0f\u4e2d\u53ea\u80fd\u6267\u884c\u5355\u4e2a\u67e5\u8be2\u3002\u4e3a\u4e86\u4ece\u4e00\u4e2a Script \u4e2d\u6267\u884c\u591a\u4e2a\u67e5\u8be2\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>--multiquery</code> \u53c2\u6570\u3002\u9664\u4e86 INSERT \u8bf7\u6c42\u5916\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5728\u4efb\u4f55\u5730\u65b9\u90fd\u6709\u7528\u3002\u67e5\u8be2\u7684\u7ed3\u679c\u4f1a\u8fde\u7eed\u4e14\u4e0d\u542b\u5206\u9694\u7b26\u5730\u8f93\u51fa\u3002<br />\n\u540c\u6837\u7684\uff0c\u4e3a\u4e86\u6267\u884c\u5927\u89c4\u6a21\u7684\u67e5\u8be2\uff0c\u60a8\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u67e5\u8be2\u6267\u884c\u4e00\u6b21 <code>clickhouse-client</code>\u3002\u4f46\u6ce8\u610f\u5230\u6bcf\u6b21\u542f\u52a8 <code>clickhouse-client</code> \u7a0b\u5e8f\u90fd\u9700\u8981\u6d88\u8017\u51e0\u5341\u6beb\u79d2\u65f6\u95f4\u3002</p>\n<p>\u5728\u4ea4\u4e92\u6a21\u5f0f\u4e0b\uff0c\u6bcf\u6761\u67e5\u8be2\u8fc7\u540e\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165\u4e0b\u4e00\u6761\u67e5\u8be2\u547d\u4ee4\u3002</p>\n<p>\u5982\u679c <code>multiline</code> \u6ca1\u6709\u6307\u5b9a\uff08\u9ed8\u8ba4\u6ca1\u6307\u5b9a\uff09\uff1a\u4e3a\u4e86\u6267\u884c\u67e5\u8be2\uff0c\u6309\u4e0b Enter \u5373\u53ef\u3002\u67e5\u8be2\u8bed\u53e5\u4e0d\u662f\u5fc5\u987b\u4f7f\u7528\u5206\u53f7\u7ed3\u5c3e\u3002\u5982\u679c\u9700\u8981\u5199\u4e00\u4e2a\u591a\u884c\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u53ef\u4ee5\u5728\u6362\u884c\u4e4b\u524d\u8f93\u5165\u4e00\u4e2a\u53cd\u659c\u6760<code>\\</code>\uff0c\u7136\u540e\u5728\u60a8\u6309\u4e0b Enter \u952e\u540e\uff0c\u60a8\u5c31\u53ef\u4ee5\u8f93\u5165\u5f53\u524d\u8bed\u53e5\u7684\u4e0b\u4e00\u884c\u67e5\u8be2\u4e86\u3002</p>\n<p>\u5982\u679c <code>multiline</code> \u6307\u5b9a\u4e86\uff1a\u4e3a\u4e86\u6267\u884c\u67e5\u8be2\uff0c\u9700\u8981\u4ee5\u5206\u53f7\u7ed3\u5c3e\u5e76\u4e14\u6309\u4e0b Enter \u952e\u3002\u5982\u679c\u884c\u672b\u6ca1\u6709\u5206\u53f7\uff0c\u5c06\u8ba4\u4e3a\u5f53\u524d\u8bed\u53e5\u5e76\u6ca1\u6709\u8f93\u5165\u5b8c\u800c\u8981\u6c42\u7ee7\u7eed\u8f93\u5165\u4e0b\u4e00\u884c\u3002</p>\n<p>\u82e5\u53ea\u8fd0\u884c\u5355\u4e2a\u67e5\u8be2\uff0c\u5206\u53f7\u540e\u9762\u7684\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002</p>\n<p>\u60a8\u53ef\u4ee5\u6307\u5b9a <code>\\G</code> \u6765\u66ff\u4ee3\u5206\u53f7\u6216\u8005\u5728\u5206\u53f7\u540e\u9762\uff0c\u8fd9\u8868\u793a <code>Vertical</code> \u7684\u683c\u5f0f\u3002\u5728\u8fd9\u79cd\u683c\u5f0f\u4e0b\uff0c\u6bcf\u4e00\u4e2a\u503c\u90fd\u4f1a\u6253\u5370\u5728\u4e0d\u540c\u7684\u884c\u4e2d\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5bf9\u4e8e\u5bbd\u8868\u6765\u8bf4\u5f88\u65b9\u4fbf\u3002\u8fd9\u4e2a\u4e0d\u5e38\u89c1\u7684\u7279\u6027\u662f\u4e3a\u4e86\u517c\u5bb9 MySQL \u547d\u4ee4\u800c\u52a0\u7684\u3002</p>\n<p>\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u662f\u57fa\u4e8e <code>readline</code> \u5e93\uff08<code>history</code> \u5e93\u6216\u8005 <code>libedit</code> \u5e93, \u6216\u4e0d\u57fa\u4e8e\u5176\u4ed6\u5e93, \u8fd9\u53d6\u51b3\u4e8e\u5ba2\u6237\u7aef\u662f\u5982\u4f55\u7f16\u8bd1\u7684\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5b83\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u719f\u6089\u7684\u5feb\u6377\u952e\u65b9\u5f0f\u6765\u64cd\u4f5c\u4ee5\u53ca\u4fdd\u7559\u5386\u53f2\u547d\u4ee4\u3002<br />\n\u5386\u53f2\u547d\u4ee4\u4f1a\u5199\u5165\u5728 <code>~/.clickhouse-client-history</code> \u4e2d\u3002</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u7684\u683c\u5f0f\u662f <code>PrettyCompact</code>\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 FORMAT \u8bbe\u7f6e\u6839\u636e\u4e0d\u540c\u67e5\u8be2\u6765\u4fee\u6539\u683c\u5f0f\uff0c\u6216\u8005\u901a\u8fc7\u5728\u67e5\u8be2\u672b\u5c3e\u6307\u5b9a <code>\\G</code> \u5b57\u7b26\uff0c\u6216\u901a\u8fc7\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528 <code>--format</code> or <code>--vertical</code> \u53c2\u6570\uff0c\u6216\u4f7f\u7528\u5ba2\u6237\u7aef\u7684\u914d\u7f6e\u6587\u4ef6\u3002</p>\n<p>\u82e5\u8981\u9000\u51fa\u5ba2\u6237\u7aef\uff0c\u4f7f\u7528 Ctrl+D \uff08\u6216 Ctrl+C\uff09\uff0c\u6216\u8005\u8f93\u5165\u4ee5\u4e0b\u5176\u4e2d\u4e00\u4e2a\u547d\u4ee4\uff1a<code>exit</code>, <code>quit</code>, <code>logout</code>, <code>\u0443\u0447\u0448\u0435</code>, <code>\u0439\u0433\u0448\u0435</code>, <code>\u0434\u0449\u043f\u0449\u0433\u0435</code>, <code>exit;</code>, <code>quit;</code>, <code>logout;</code>, <code>\u0443\u0447\u0448\u0435\u0436</code>, <code>\u0439\u0433\u0448\u0435\u0436</code>, <code>\u0434\u0449\u043f\u0449\u0433\u0435\u0436</code>, <code>q</code>, <code>\u0439</code>, <code>q</code>, <code>Q</code>, <code>:q</code>, <code>\u0439</code>, <code>\u0419</code>, <code>\u0416\u0439</code></p>\n<p>\u5f53\u6267\u884c\u4e00\u4e2a\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u5ba2\u6237\u7aef\u4f1a\u663e\u793a\uff1a</p>\n<ol>\n<li>\u8fdb\u5ea6, \u8fdb\u5ea6\u4f1a\u6bcf\u79d2\u66f4\u65b0\u5341\u6b21 \uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff09\u3002 \u5bf9\u4e8e\u5f88\u5feb\u7684\u67e5\u8be2\uff0c\u8fdb\u5ea6\u53ef\u80fd\u6ca1\u6709\u65f6\u95f4\u663e\u793a\u3002</li>\n<li>\u4e3a\u4e86\u8c03\u8bd5\u4f1a\u663e\u793a\u89e3\u6790\u4e14\u683c\u5f0f\u5316\u540e\u7684\u67e5\u8be2\u8bed\u53e5\u3002</li>\n<li>\u6307\u5b9a\u683c\u5f0f\u7684\u8f93\u51fa\u7ed3\u679c\u3002</li>\n<li>\u8f93\u51fa\u7ed3\u679c\u7684\u884c\u6570\u7684\u884c\u6570\uff0c\u7ecf\u8fc7\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u67e5\u8be2\u5904\u7406\u7684\u901f\u5ea6\u3002</li>\n</ol>\n<p>\u60a8\u53ef\u4ee5\u901a\u8fc7 Ctrl+C \u6765\u53d6\u6d88\u4e00\u4e2a\u957f\u65f6\u95f4\u7684\u67e5\u8be2\u3002\u7136\u800c\uff0c\u60a8\u4f9d\u7136\u9700\u8981\u7b49\u5f85\u670d\u52a1\u7aef\u6765\u4e2d\u6b62\u8bf7\u6c42\u3002\u5728\u67d0\u4e2a\u9636\u6bb5\u53bb\u53d6\u6d88\u67e5\u8be2\u662f\u4e0d\u53ef\u80fd\u7684\u3002\u5982\u679c\u60a8\u4e0d\u7b49\u5f85\u5e76\u518d\u6b21\u6309\u4e0b Ctrl + C\uff0c\u5ba2\u6237\u7aef\u5c06\u4f1a\u9000\u51fa\u3002</p>\n<p>\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u5141\u8bb8\u901a\u8fc7\u5916\u90e8\u6570\u636e \uff08\u5916\u90e8\u4e34\u65f6\u8868\uff09 \u6765\u67e5\u8be2\u3002\u66f4\u591a\u76f8\u5173\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 \"<a href=\"#../operations/table_engines/external_data/\">\u5916\u90e8\u6570\u636e\u67e5\u8be2\u5904\u7406</a>\".</p>\n<h3 id=\"interfaces_cli_configuration\">\u914d\u7f6e<a class=\"headerlink\" href=\"#interfaces_cli_configuration\" title=\"Permanent link\">&para;</a></h3>\n<p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4f20\u5165\u53c2\u6570\u5230 <code>clickhouse-client</code> \u4e2d \uff08\u6240\u6709\u7684\u53c2\u6570\u90fd\u6709\u9ed8\u8ba4\u503c\uff09\uff1a</p>\n<ul>\n<li>\n<p>\u901a\u8fc7\u547d\u4ee4\u884c</p>\n<p>\u547d\u4ee4\u884c\u53c2\u6570\u4f1a\u8986\u76d6\u9ed8\u8ba4\u503c\u548c\u914d\u7f6e\u6587\u4ef6\u7684\u914d\u7f6e\u3002</p>\n</li>\n<li>\n<p>\u914d\u7f6e\u6587\u4ef6</p>\n<p>\u914d\u7f6e\u6587\u4ef6\u7684\u914d\u7f6e\u4f1a\u8986\u76d6\u9ed8\u8ba4\u503c</p>\n</li>\n</ul>\n<h4 id=\"ming-ling-xing-can-shu\">\u547d\u4ee4\u884c\u53c2\u6570<a class=\"headerlink\" href=\"#ming-ling-xing-can-shu\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>--host, -h</code> -\u2013 \u670d\u52a1\u7aef\u7684 host \u540d\u79f0, \u9ed8\u8ba4\u662f 'localhost'\u3002 \u60a8\u53ef");
            
            document.write("\u4ee5\u9009\u62e9\u4f7f\u7528 host \u540d\u79f0\u6216\u8005 IPv4 \u6216 IPv6 \u5730\u5740\u3002</li>\n<li><code>--port</code> \u2013 \u8fde\u63a5\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u503c\uff1a 9000\u3002\u6ce8\u610f HTTP \u63a5\u53e3\u4ee5\u53ca TCP \u539f\u751f\u63a5\u53e3\u662f\u4f7f\u7528\u4e0d\u540c\u7aef\u53e3\u7684\u3002</li>\n<li><code>--user, -u</code> \u2013 \u7528\u6237\u540d\u3002 \u9ed8\u8ba4\u503c\uff1a default\u3002</li>\n<li><code>--password</code> \u2013 \u5bc6\u7801\u3002 \u9ed8\u8ba4\u503c\uff1a \u7a7a\u5b57\u7b26\u4e32\u3002</li>\n<li><code>--query, -q</code> \u2013 \u975e\u4ea4\u4e92\u6a21\u5f0f\u4e0b\u7684\u67e5\u8be2\u8bed\u53e5.</li>\n<li><code>--database, -d</code> \u2013 \u9ed8\u8ba4\u5f53\u524d\u64cd\u4f5c\u7684\u6570\u636e\u5e93. \u9ed8\u8ba4\u503c\uff1a \u670d\u52a1\u7aef\u9ed8\u8ba4\u7684\u914d\u7f6e \uff08\u9ed8\u8ba4\u662f <code>default</code>\uff09\u3002</li>\n<li><code>--multiline, -m</code> \u2013 \u5982\u679c\u6307\u5b9a\uff0c\u5141\u8bb8\u591a\u884c\u8bed\u53e5\u67e5\u8be2\uff08Enter \u4ec5\u4ee3\u8868\u6362\u884c\uff0c\u4e0d\u4ee3\u8868\u67e5\u8be2\u8bed\u53e5\u5b8c\u7ed3\uff09\u3002</li>\n<li><code>--multiquery, -n</code> \u2013 \u5982\u679c\u6307\u5b9a, \u5141\u8bb8\u5904\u7406\u7528\u9017\u53f7\u5206\u9694\u7684\u591a\u4e2a\u67e5\u8be2\uff0c\u53ea\u5728\u975e\u4ea4\u4e92\u6a21\u5f0f\u4e0b\u751f\u6548\u3002</li>\n<li><code>--format, -f</code> \u2013 \u4f7f\u7528\u6307\u5b9a\u7684\u9ed8\u8ba4\u683c\u5f0f\u8f93\u51fa\u7ed3\u679c\u3002</li>\n<li><code>--vertical, -E</code> \u2013 \u5982\u679c\u6307\u5b9a\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528\u5782\u76f4\u683c\u5f0f\u8f93\u51fa\u7ed3\u679c\u3002\u8fd9\u4e0e '--format=Vertical' \u76f8\u540c\u3002\u5728\u8fd9\u79cd\u683c\u5f0f\u4e2d\uff0c\u6bcf\u4e2a\u503c\u90fd\u5728\u5355\u72ec\u7684\u884c\u4e0a\u6253\u5370\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5bf9\u663e\u793a\u5bbd\u8868\u5f88\u6709\u5e2e\u52a9\u3002</li>\n<li><code>--time, -t</code> \u2013 \u5982\u679c\u6307\u5b9a\uff0c\u975e\u4ea4\u4e92\u6a21\u5f0f\u4e0b\u4f1a\u6253\u5370\u67e5\u8be2\u6267\u884c\u7684\u65f6\u95f4\u5230 'stderr' \u4e2d\u3002</li>\n<li><code>--stacktrace</code> \u2013 \u5982\u679c\u6307\u5b9a\uff0c\u5982\u679c\u51fa\u73b0\u5f02\u5e38\uff0c\u4f1a\u6253\u5370\u5806\u6808\u8ddf\u8e2a\u4fe1\u606f\u3002</li>\n<li><code>-config-file</code> \u2013 \u914d\u7f6e\u6587\u4ef6\u7684\u540d\u79f0\u3002</li>\n</ul>\n<h4 id=\"pei-zhi-wen-jian\">\u914d\u7f6e\u6587\u4ef6<a class=\"headerlink\" href=\"#pei-zhi-wen-jian\" title=\"Permanent link\">&para;</a></h4>\n<p><code>clickhouse-client</code> \u4f7f\u7528\u4e00\u4e0b\u7b2c\u4e00\u4e2a\u5b58\u5728\u7684\u6587\u4ef6\uff1a</p>\n<ul>\n<li>\u901a\u8fc7 <code>-config-file</code> \u53c2\u6570\u6307\u5b9a\u7684\u6587\u4ef6.</li>\n<li><code>./clickhouse-client.xml</code></li>\n<li><code>\\~/.clickhouse-client/config.xml</code></li>\n<li><code>/etc/clickhouse-client/config.xml</code></li>\n</ul>\n<p>\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;config&gt;</span>\n    <span class=\"nt\">&lt;user&gt;</span>username<span class=\"nt\">&lt;/user&gt;</span>\n    <span class=\"nt\">&lt;password&gt;</span>password<span class=\"nt\">&lt;/password&gt;</span>\n<span class=\"nt\">&lt;/config&gt;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../interfaces/tcp/\"></a><a name=\"../../../interfaces/tcp/\"></a><a name=\"interfaces/tcp/\"></a><a name=\"../../../../../interfaces/tcp/\"></a><a name=\"../interfaces/tcp/\"></a><a name=\"../../../../interfaces/tcp/\"></a><a name=\"tcp/\"></a></p>\n<h2 id=\"yuan-sheng-ke-hu-duan-jie-kou-tcp\">\u539f\u751f\u5ba2\u6237\u7aef\u63a5\u53e3\uff08TCP\uff09<a class=\"headerlink\" href=\"#yuan-sheng-ke-hu-duan-jie-kou-tcp\" title=\"Permanent link\">&para;</a></h2>\n<p>\u672c\u673a\u534f\u8bae\u7528\u4e8e <a href=\"#cli/\">\u547d\u4ee4\u884c\u5ba2\u6237\u7aef</a>\uff0c\u7528\u4e8e\u5206\u5e03\u5f0f\u67e5\u8be2\u5904\u7406\u671f\u95f4\u7684\u670d\u52a1\u5668\u95f4\u901a\u4fe1\uff0c\u4ee5\u53ca\u5176\u4ed6C ++\u7a0b\u5e8f\u3002 \u4e0d\u5e78\u7684\u662f\uff0c\u672c\u673aClickHouse\u534f\u8bae\u8fd8\u6ca1\u6709\u6b63\u5f0f\u7684\u89c4\u8303\uff0c\u4f46\u5b83\u53ef\u4ee5\u4eceClickHouse\u6e90\u4ee3\u7801\u8fdb\u884c\u9006\u5411\u5de5\u7a0b <a href=\"https://github.com/ClickHouse/ClickHouse/tree/master/dbms/src/Client\" rel=\"external nofollow noreferrer\">\u4ece\u8fd9\u91cc\u5f00\u59cb</a>\uff09\u548c/\u6216\u62e6\u622a\u548c\u5206\u6790TCP\u6d41\u91cf\u3002</p>\n<p><a name=\"../../../../../interfaces/http/\"></a><a name=\"../../interfaces/http/\"></a><a name=\"interfaces/http/\"></a><a name=\"../../../interfaces/http/\"></a><a name=\"../interfaces/http/\"></a><a name=\"http/\"></a><a name=\"../../../../interfaces/http/\"></a></p>\n<h2 id=\"http-ke-hu-duan\">HTTP \u5ba2\u6237\u7aef<a class=\"headerlink\" href=\"#http-ke-hu-duan\" title=\"Permanent link\">&para;</a></h2>\n<p>HTTP \u63a5\u53e3\u53ef\u4ee5\u8ba9\u4f60\u901a\u8fc7\u4efb\u4f55\u5e73\u53f0\u548c\u7f16\u7a0b\u8bed\u8a00\u6765\u4f7f\u7528 ClickHouse\u3002\u6211\u4eec\u7528 Java \u548c Perl \u4ee5\u53ca shell \u811a\u672c\u6765\u8bbf\u95ee\u5b83\u3002\u5728\u5176\u4ed6\u7684\u90e8\u95e8\u4e2d\uff0cHTTP \u63a5\u53e3\u4f1a\u7528\u5728 Perl\uff0cPython \u4ee5\u53ca Go \u4e2d\u3002HTTP \u63a5\u53e3\u6bd4 TCP \u539f\u751f\u63a5\u53e3\u66f4\u4e3a\u5c40\u9650\uff0c\u4f46\u662f\u5374\u6709\u66f4\u597d\u7684\u517c\u5bb9\u6027\u3002</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cclickhouse-server \u4f1a\u5728\u7aef\u53e3 8123 \u4e0a\u76d1\u63a7 HTTP \u8bf7\u6c42\uff08\u8fd9\u53ef\u4ee5\u5728\u914d\u7f6e\u4e2d\u4fee\u6539\uff09\u3002<br />\n\u5982\u679c\u4f60\u53d1\u9001\u4e86\u4e00\u4e2a\u4e0d\u5e26\u53c2\u6570\u7684 GET \u8bf7\u6c42\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32 \"Ok\"\uff08\u7ed3\u5c3e\u6709\u6362\u884c\uff09\u3002\u53ef\u4ee5\u5c06\u5b83\u7528\u5728\u5065\u5eb7\u68c0\u67e5\u811a\u672c\u4e2d\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span>\nOk.\n</code></pre></div>\n\n\n<p>\u901a\u8fc7 URL \u4e2d\u7684 <code>query</code> \u53c2\u6570\u6765\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u53d1\u9001 POST \u8bf7\u6c42\uff0c\u6216\u8005\u5c06\u67e5\u8be2\u7684\u5f00\u5934\u90e8\u5206\u653e\u5728 URL \u7684 <code>query</code> \u53c2\u6570\u4e2d\uff0c\u5176\u4ed6\u90e8\u5206\u653e\u5728 POST \u4e2d\uff08\u6211\u4eec\u4f1a\u5728\u540e\u9762\u89e3\u91ca\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\u662f\u6709\u5fc5\u8981\u7684\uff09\u3002URL \u7684\u5927\u5c0f\u4f1a\u9650\u5236\u5728 16 KB\uff0c\u6240\u4ee5\u53d1\u9001\u5927\u578b\u67e5\u8be2\u65f6\u8981\u65f6\u523b\u8bb0\u4f4f\u8fd9\u70b9\u3002</p>\n<p>\u5982\u679c\u8bf7\u6c42\u6210\u529f\uff0c\u5c06\u4f1a\u6536\u5230 200 \u7684\u54cd\u5e94\u72b6\u6001\u7801\u548c\u54cd\u5e94\u4e3b\u4f53\u4e2d\u7684\u7ed3\u679c\u3002<br />\n\u5982\u679c\u53d1\u751f\u4e86\u67d0\u4e2a\u5f02\u5e38\uff0c\u5c06\u4f1a\u6536\u5230 500 \u7684\u54cd\u5e94\u72b6\u6001\u7801\u548c\u54cd\u5e94\u4e3b\u4f53\u4e2d\u7684\u5f02\u5e38\u63cf\u8ff0\u4fe1\u606f\u3002</p>\n<p>\u5f53\u4f7f\u7528 GET \u65b9\u6cd5\u8bf7\u6c42\u65f6\uff0c<code>readonly</code> \u4f1a\u88ab\u8bbe\u7f6e\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u82e5\u8981\u4f5c\u4fee\u6539\u6570\u636e\u7684\u67e5\u8be2\uff0c\u53ea\u80fd\u53d1\u9001 POST \u65b9\u6cd5\u7684\u8bf7\u6c42\u3002\u53ef\u4ee5\u5c06\u67e5\u8be2\u901a\u8fc7 POST \u4e3b\u4f53\u53d1\u9001\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 URL \u53c2\u6570\u53d1\u9001\u3002</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT%201&#39;</span>\n<span class=\"m\">1</span>\n\n$ wget -O- -q <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT 1&#39;</span>\n<span class=\"m\">1</span>\n\n$ GET <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT 1&#39;</span>\n<span class=\"m\">1</span>\n\n$ <span class=\"nb\">echo</span> -ne <span class=\"s1\">&#39;GET /?query=SELECT%201 HTTP/1.0\\r\\n\\r\\n&#39;</span> <span class=\"p\">|</span> nc localhost <span class=\"m\">8123</span>\nHTTP/1.0 <span class=\"m\">200</span> OK\nConnection: Close\nDate: Fri, <span class=\"m\">16</span> Nov <span class=\"m\">2012</span> <span class=\"m\">19</span>:21:50 GMT\n\n<span class=\"m\">1</span>\n</code></pre></div>\n\n\n<p>\u53ef\u4ee5\u770b\u5230\uff0ccurl \u547d\u4ee4\u7531\u4e8e\u7a7a\u683c\u9700\u8981 URL \u8f6c\u4e49\uff0c\u6240\u4ee5\u4e0d\u662f\u5f88\u65b9\u4fbf\u3002\u5c3d\u7ba1 wget \u547d\u4ee4\u5bf9url\u505a\u4e86 URL \u8f6c\u4e49\uff0c\u4f46\u6211\u4eec\u5e76\u4e0d\u63a8\u8350\u4f7f\u7528\u4ed6\uff0c\u56e0\u4e3a\u5728 HTTP 1.1 \u534f\u8bae\u4e0b\u4f7f\u7528 keep-alive \u548c Transfer-Encoding: chunked \u5934\u90e8\u8bbe\u7f6e\u5b83\u5e76\u4e0d\u80fd\u5f88\u597d\u7684\u5de5\u4f5c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span> --data-binary @-\n<span class=\"m\">1</span>\n\n$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=&#39;</span> --data-binary @-\n<span class=\"m\">1</span>\n\n$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT&#39;</span> --data-binary @-\n<span class=\"m\">1</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u4e00\u90e8\u5206\u8bf7\u6c42\u662f\u901a\u8fc7\u53c2\u6570\u53d1\u9001\u7684\uff0c\u53e6\u5916\u4e00\u90e8\u5206\u901a\u8fc7 POST \u4e3b\u4f53\u53d1\u9001\uff0c\u4e24\u90e8\u5206\u67e5\u8be2\u4e4b\u95f4\u4f1a\u4e00\u884c\u7a7a\u884c\u63d2\u5165\u3002<br />\n\u9519\u8bef\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;ECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=SEL&#39;</span> --data-binary @-\nCode: <span class=\"m\">59</span>, e.displayText<span class=\"o\">()</span> <span class=\"o\">=</span> DB::Exception: Syntax error: failed at position <span class=\"m\">0</span>: SEL\nECT <span class=\"m\">1</span>\n, expected One of: SHOW TABLES, SHOW DATABASES, SELECT, INSERT, CREATE, ATTACH, RENAME, DROP, DETACH, USE, SET, OPTIMIZE., e.what<span class=\"o\">()</span> <span class=\"o\">=</span> DB::Exception\n</code></pre></div>\n\n\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd4\u56de\u7684\u6570\u636e\u662f TabSeparated \u683c\u5f0f\u7684\uff0c\u66f4\u591a\u4fe1\u606f\uff0c\u89c1 \"[\u6570\u636e\u683c\u5f0f]\" \u90e8\u5206\u3002<br />\n\u53ef\u4ee5\u4f7f\u7528 FORMAT \u8bbe\u7f6e\u67e5\u8be2\u6765\u8bf7\u6c42\u4e0d\u540c\u683c\u5f0f\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1 FORMAT Pretty&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?&#39;</span> --data-binary @-\n\u250f\u2501\u2501\u2501\u2513\n\u2503 <span class=\"m\">1</span> \u2503\n\u2521\u2501\u2501\u2501\u2529\n\u2502 <span class=\"m\">1</span> \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>INSERT \u5fc5\u987b\u901a\u8fc7 POST \u65b9\u6cd5\u6765\u63d2\u5165\u6570\u636e\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u5c06\u67e5\u8be2\u7684\u5f00\u5934\u90e8\u5206\u653e\u5728 URL \u53c2\u6570\u4e2d\uff0c\u7136\u540e\u7528 POST \u4e3b\u4f53\u4f20\u5165\u63d2\u5165\u7684\u6570\u636e\u3002\u63d2\u5165\u7684\u6570\u636e\u53ef\u4ee5\u662f\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4ece MySQL \u5bfc\u51fa\u7684\u4ee5 tab \u5206\u5272\u7684\u6570\u636e\u3002\u5728\u8fd9\u79cd\u65b9\u5f0f\u4e2d\uff0cINSERT \u67e5\u8be2\u53d6\u4ee3\u4e86 LOAD DATA LOCAL INFILE from MySQL\u3002</p>\n<p>\u793a\u4f8b: \u521b\u5efa\u4e00\u4e2a\u8868:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"s1\">&#39;CREATE TABLE t (a UInt8) ENGINE = Memory&#39;</span> <span class=\"p\">|</span> POST <span class=\"s1\">&#39;http://localhost:8123/&#39;</span>\n</code></pre></div>\n\n\n<p>\u4f7f\u7528\u7c7b\u4f3c INSERT \u7684\u67e5\u8be2\u6765\u63d2\u5165\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"s1\">&#39;INSERT INTO t VALUES (1),(2),(3)&#39;</span> <span class=\"p\">|</span> POST <span class=\"s1\">&#39;http://localhost:8123/&#39;</span>\n</code></pre></div>\n\n\n<p>\u6570\u636e\u53ef\u4ee5\u4ece\u67e5\u8be2\u4e2d\u5355\u72ec\u53d1\u9001\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"s1\">&#39;(4),(5),(6)&#39;</span> <span class=\"p\">|</span> POST <span class=\"s1\">&#39;http://localhost:8123/?query=INSERT INTO t VALUES&#39;</span>\n</code></pre></div>\n\n\n<p>\u53ef\u4ee5\u6307\u5b9a\u4efb\u4f55\u6570\u636e\u683c\u5f0f\u3002\u503c\u7684\u683c\u5f0f\u548c\u5199\u5165\u8868 <code>t</code> \u7684\u503c\u7684\u683c\u5f0f\u76f8\u540c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"s1\">&#39;(7),(8),(9)&#39;</span> <span class=\"p\">|</span> POST <span class=\"s1\">&#39;http://localhost:8123/?query=INSERT INTO t FORMAT Values&#39;</span>\n</code></pre></div>\n\n\n<p>\u82e5\u8981\u63d2\u5165 tab \u5206\u5272\u7684\u6570\u636e\uff0c\u9700\u8981\u6307\u5b9a\u5bf9\u5e94\u7684\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> -ne <span class=\"s1\">&#39;10\\n11\\n12\\n&#39;</span> <span class=\"p\">|</span> POST <span class=\"s1\">&#39;http://localhost:8123/?query=INSERT INTO t FORMAT TabSeparated&#39;</span>\n</code></pre></div>\n\n\n<p>\u4ece\u8868\u4e2d\u8bfb\u53d6\u5185\u5bb9\u3002\u7531\u4e8e\u67e5\u8be2\u5904\u7406\u662f\u5e76\u884c\u7684\uff0c\u6570\u636e\u4ee5\u968f\u673a\u987a\u5e8f\u8f93\u51fa\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>$ GET <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT a FROM t&#39;</span>\n<span class=\"m\">7</span>\n<span class=\"m\">8</span>\n<span class=\"m\">9</span>\n<span class=\"m\">10</span>\n<span class=\"m\">11</span>\n<span class=\"m\">12</span>\n<span class=\"m\">1</span>\n<span class=\"m\">2</span>\n<span class=\"m\">3</span>\n<span class=\"m\">4</span>\n<span class=\"m\">5</span>\n<span class=\"m\">6</span>\n</code></pre></div>\n\n\n<p>\u5220\u9664\u8868\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>POST <span class=\"s1\">&#39;http://localhost:8123/?query=DROP TABLE t&#39;</span>\n</code></pre></div>\n\n\n<p>\u6210\u529f\u8bf7\u6c42\u540e\u5e76\u4e0d\u4f1a\u8fd4\u56de\u6570\u636e\uff0c\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684\u54cd\u5e94\u4f53\u3002</p>\n<p>\u53ef\u4ee5\u901a\u8fc7\u538b\u7f29\u6765\u4f20\u8f93\u6570\u636e\u3002\u538b\u7f29\u7684\u6570\u636e\u6ca1\u6709\u4e00\u4e2a\u6807\u51c6\u7684\u683c\u5f0f\uff0c\u4f46\u4f60\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u538b\u7f29\u7a0b\u5e8f\u6765\u4f7f\u7528\u5b83(sudo apt-get install compressor-metrika-yandex\uff09\u3002</p>\n<p>\u5982\u679c\u5728 URL \u4e2d\u6307\u5b9a\u4e86 <code>compress=1</code> \uff0c\u670d\u52a1\u4f1a\u8fd4\u56de\u538b\u7f29\u7684\u6570\u636e\u3002<br />\n\u5982\u679c\u5728 URL \u4e2d\u6307\u5b9a\u4e86 <code>decompress=1</code> \uff0c\u670d\u52a1\u4f1a\u89e3\u538b\u901a\u8fc7 POST \u65b9\u6cd5\u53d1\u9001\u7684\u6570\u636e\u3002</p>\n<p>\u53ef\u4ee5\u901a\u8fc7\u4e3a\u6bcf\u4efd\u6570\u636e\u8fdb\u884c\u7acb\u5373\u538b\u7f29\u6765\u51cf\u5c11\u5927\u89c4\u6a21\u6570\u636e\u4f20\u8f93\u4e2d\u7684\u7f51\u7edc\u538b\u529b\u3002</p>\n<p>\u53ef\u4ee5\u6307\u5b9a 'database' \u53c2\u6570\u6765\u6307\u5b9a\u9ed8\u8ba4\u7684\u6570\u636e\u5e93\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT number FROM numbers LIMIT 10&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?database=system&#39;</span> --data-binary @-\n<span class=\"m\">0</span>\n<span class=\"m\">1</span>\n<span class=\"m\">2</span>\n<span class=\"m\">3</span>\n<span class=\"m\">4</span>\n<span class=\"m\">5</span>\n<span class=\"m\">6</span>\n<span class=\"m\">7</span>\n<span class=\"m\">8</span>\n<span class=\"m\">9</span>\n</code></pre></div>\n\n\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u9ed8\u8ba4\u6570\u636e\u5e93\u4f1a\u5728\u670d\u52a1\u7684\u914d\u7f6e\u4e2d\u6ce8\u518c\uff0c\u9ed8\u8ba4\u662f <code>default</code>\u3002\u6216\u8005\uff0c\u4e5f\u53ef\u4ee5\u5728\u8868\u540d\u4e4b\u524d\u4f7f\u7528\u4e00\u4e2a\u70b9\u6765\u6307\u5b9a\u6570\u636e\u5e93\u3002</p>\n<p>\u7528\u6237\u540d\u5bc6\u7801\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u6307\u5b9a\uff1a</p>\n<ol>\n<li>\u901a\u8fc7 HTTP Basic Authentication\u3002\u793a\u4f8b\uff1a</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://user:password@localhost:8123/&#39;</span> -d @-\n</code></pre></div>\n\n\n<ol start=\"2\">\n<li>\u901a\u8fc7 URL \u53c2\u6570 \u4e2d\u7684 'user' \u548c 'password'\u3002\u793a\u4f8b\uff1a</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?user=user&amp;password=password&#39;</span> -d @-\n</code></pre></div>\n\n\n<p>\u5982\u679c\u7528\u6237\u540d\u6ca1\u6709\u6307\u5b9a\uff0c\u9ed8\u8ba4\u7684\u7528\u6237\u662f <code>default</code>\u3002\u5982\u679c\u5bc6\u7801\u6ca1\u6709\u6307\u5b9a\uff0c\u9ed8\u8ba4\u4f1a\u4f7f\u7528\u7a7a\u5bc6\u7801\u3002<br />\n\u53ef\u4ee5\u4f7f\u7528 URL \u53c2\u6570\u6307\u5b9a\u914d\u7f6e\u6216\u8005\u8bbe\u7f6e\u6574\u4e2a\u914d\u7f6e\u6587\u4ef6\u6765\u5904\u7406\u5355\u4e2a\u67e5\u8be2\u3002\u793a\u4f8b\uff1a<code>http://localhost:8123/?p");
            
            document.write("rofile=web&amp;max_rows_to_read=1000000000&amp;query=SELECT+1</code></p>\n<p>\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \"<a href=\"#settings\">\u8bbe\u7f6e</a>\" \u90e8\u5206\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT number FROM system.numbers LIMIT 10&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?&#39;</span> --data-binary @-\n<span class=\"m\">0</span>\n<span class=\"m\">1</span>\n<span class=\"m\">2</span>\n<span class=\"m\">3</span>\n<span class=\"m\">4</span>\n<span class=\"m\">5</span>\n<span class=\"m\">6</span>\n<span class=\"m\">7</span>\n<span class=\"m\">8</span>\n<span class=\"m\">9</span>\n</code></pre></div>\n\n\n<p>\u66f4\u591a\u5173\u4e8e\u5176\u4ed6\u53c2\u6570\u7684\u4fe1\u606f\uff0c\u53c2\u89c1 \"<a href=\"#settings\">\u8bbe\u7f6e</a>\" \u90e8\u5206\u3002</p>\n<p>\u76f8\u6bd4\u8d77 TCP \u539f\u751f\u63a5\u53e3\uff0cHTTP \u63a5\u53e3\u4e0d\u652f\u6301\u4f1a\u8bdd\u548c\u4f1a\u8bdd\u8bbe\u7f6e\u7684\u6982\u5ff5\uff0c\u4e0d\u5141\u8bb8\u4e2d\u6b62\u67e5\u8be2\uff08\u51c6\u786e\u5730\u8bf4\uff0c\u53ea\u5728\u5c11\u6570\u60c5\u51b5\u4e0b\u5141\u8bb8\uff09\uff0c\u4e0d\u663e\u793a\u67e5\u8be2\u5904\u7406\u7684\u8fdb\u5c55\u3002\u6267\u884c\u89e3\u6790\u548c\u6570\u636e\u683c\u5f0f\u5316\u90fd\u662f\u5728\u670d\u52a1\u7aef\u5904\u7406\uff0c\u7f51\u7edc\u4e0a\u4f1a\u6bd4 TCP \u539f\u751f\u63a5\u53e3\u66f4\u4f4e\u6548\u3002</p>\n<p>\u53ef\u9009\u7684 <code>query_id</code> \u53c2\u6570\u53ef\u80fd\u5f53\u505a query ID \u4f20\u5165\uff08\u6216\u8005\u4efb\u4f55\u5b57\u7b26\u4e32\uff09\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \"<a href=\"#../operations/settings/settings/\">\u8bbe\u7f6e replace_running_query</a>\" \u90e8\u5206\u3002</p>\n<p>\u53ef\u9009\u7684 <code>quota_key</code> \u53c2\u6570\u53ef\u80fd\u5f53\u505a quota key \u4f20\u5165\uff08\u6216\u8005\u4efb\u4f55\u5b57\u7b26\u4e32\uff09\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \"<a href=\"#quotas\">\u914d\u989d</a>\" \u90e8\u5206\u3002</p>\n<p>HTTP \u63a5\u53e3\u5141\u8bb8\u4f20\u5165\u989d\u5916\u7684\u6570\u636e\uff08\u5916\u90e8\u4e34\u65f6\u8868\uff09\u6765\u67e5\u8be2\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 \"<a href=\"#../operations/table_engines/external_data/\">\u5916\u90e8\u6570\u636e\u67e5\u8be2\u5904\u7406</a>\" \u90e8\u5206\u3002</p>\n<h3 id=\"xiang-ying-huan-chong\">\u54cd\u5e94\u7f13\u51b2<a class=\"headerlink\" href=\"#xiang-ying-huan-chong\" title=\"Permanent link\">&para;</a></h3>\n<p>\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u7aef\u542f\u7528\u54cd\u5e94\u7f13\u51b2\u3002\u63d0\u4f9b\u4e86 <code>buffer_size</code> \u548c <code>wait_end_of_query</code> \u4e24\u4e2aURL \u53c2\u6570\u6765\u8fbe\u6b64\u76ee\u7684\u3002</p>\n<p><code>buffer_size</code> \u51b3\u5b9a\u4e86\u67e5\u8be2\u7ed3\u679c\u8981\u5728\u670d\u52a1\u5185\u5b58\u4e2d\u7f13\u51b2\u591a\u5c11\u4e2a\u5b57\u8282\u6570\u636e. \u5982\u679c\u54cd\u5e94\u4f53\u6bd4\u8fd9\u4e2a\u9608\u503c\u5927\uff0c\u7f13\u51b2\u533a\u4f1a\u5199\u5165\u5230 HTTP \u7ba1\u9053\uff0c\u5269\u4e0b\u7684\u6570\u636e\u4e5f\u76f4\u63a5\u53d1\u5230 HTTP \u7ba1\u9053\u4e2d\u3002</p>\n<p>\u4e3a\u4e86\u786e\u4fdd\u6574\u4e2a\u54cd\u5e94\u4f53\u88ab\u7f13\u51b2\uff0c\u53ef\u4ee5\u8bbe\u7f6e <code>wait_end_of_query=1</code>\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b58\u5165\u5185\u5b58\u7684\u6570\u636e\u4f1a\u88ab\u7f13\u51b2\u5230\u670d\u52a1\u7aef\u7684\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u4e2d\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code>curl -sS <span class=\"s1\">&#39;http://localhost:8123/?max_result_bytes=4000000&amp;buffer_size=3000000&amp;wait_end_of_query=1&#39;</span> -d <span class=\"s1\">&#39;SELECT toUInt8(number) FROM system.numbers LIMIT 9000000 FORMAT RowBinary&#39;</span>\n</code></pre></div>\n\n\n<p>\u67e5\u8be2\u8bf7\u6c42\u54cd\u5e94\u72b6\u6001\u7801\u548c HTTP \u5934\u88ab\u53d1\u9001\u5230\u5ba2\u6237\u7aef\u540e\uff0c\u82e5\u53d1\u751f\u67e5\u8be2\u5904\u7406\u51fa\u9519\uff0c\u4f7f\u7528\u7f13\u51b2\u533a\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u7684\u53d1\u751f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u54cd\u5e94\u4e3b\u4f53\u7684\u7ed3\u5c3e\u4f1a\u5199\u5165\u4e00\u6761\u9519\u8bef\u6d88\u606f\uff0c\u800c\u5728\u5ba2\u6237\u7aef\uff0c\u53ea\u80fd\u5728\u89e3\u6790\u9636\u6bb5\u68c0\u6d4b\u5230\u8be5\u9519\u8bef\u3002</p>\n<p><a name=\"../interfaces/formats/\"></a><a name=\"../../../../../interfaces/formats/\"></a><a name=\"interfaces/formats/\"></a><a name=\"../../../../interfaces/formats/\"></a><a name=\"../../../interfaces/formats/\"></a><a name=\"../../interfaces/formats/\"></a><a name=\"formats/\"></a></p>\n<h2 id=\"formats\">\u8f93\u5165\u8f93\u51fa\u683c\u5f0f<a class=\"headerlink\" href=\"#formats\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse \u53ef\u4ee5\u63a5\u53d7\u591a\u79cd\u6570\u636e\u683c\u5f0f\uff0c\u53ef\u4ee5\u5728 (<code>INSERT</code>) \u4ee5\u53ca (<code>SELECT</code>) \u8bf7\u6c42\u4e2d\u4f7f\u7528\u3002</p>\n<p>\u4e0b\u5217\u8868\u683c\u5217\u51fa\u4e86\u652f\u6301\u7684\u6570\u636e\u683c\u5f0f\u4ee5\u53ca\u5728 (<code>INSERT</code>) \u4ee5\u53ca (<code>SELECT</code>) \u8bf7\u6c42\u4e2d\u4f7f\u7528\u5b83\u4eec\u7684\u65b9\u5f0f\u3002</p>\n<table>\n<thead>\n<tr>\n<th>\u683c\u5f0f</th>\n<th>INSERT</th>\n<th>SELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"#tabseparated\">TabSeparated</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#tabseparatedraw\">TabSeparatedRaw</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#tabseparatedwithnames\">TabSeparatedWithNames</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#tabseparatedwithnamesandtypes\">TabSeparatedWithNamesAndTypes</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#format-template\">Template</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#templateignorespaces\">TemplateIgnoreSpaces</a></td>\n<td>\u2714</td>\n<td>\u2717</td>\n</tr>\n<tr>\n<td><a href=\"#csv\">CSV</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#csvwithnames\">CSVWithNames</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#data-format-values\">Values</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#vertical\">Vertical</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#verticalraw\">VerticalRaw</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#json\">JSON</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#jsoncompact\">JSONCompact</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#jsoneachrow\">JSONEachRow</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#tskv\">TSKV</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#pretty\">Pretty</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#prettycompact\">PrettyCompact</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#prettycompactmonoblock\">PrettyCompactMonoBlock</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#prettynoescapes\">PrettyNoEscapes</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#prettyspace\">PrettySpace</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#rowbinary\">RowBinary</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#native\">Native</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#null\">Null</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#xml\">XML</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#capnproto\">CapnProto</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"tabseparated\">TabSeparated<a class=\"headerlink\" href=\"#tabseparated\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728 TabSeparated \u683c\u5f0f\u4e2d\uff0c\u6570\u636e\u6309\u884c\u5199\u5165\u3002\u6bcf\u884c\u5305\u542b\u7531\u5236\u8868\u7b26\u5206\u9694\u7684\u503c\u3002\u9664\u4e86\u884c\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u503c\uff08\u540e\u9762\u7d27\u8ddf\u6362\u884c\u7b26\uff09\u4e4b\u5916\uff0c\u6bcf\u4e2a\u503c\u90fd\u8ddf\u968f\u4e00\u4e2a\u5236\u8868\u7b26\u3002 \u5728\u4efb\u4f55\u5730\u65b9\u90fd\u53ef\u4ee5\u4f7f\u7528\u4e25\u683c\u7684 Unix \u547d\u4ee4\u884c\u3002\u6700\u540e\u4e00\u884c\u8fd8\u5fc5\u987b\u5728\u6700\u540e\u5305\u542b\u6362\u884c\u7b26\u3002\u503c\u4ee5\u6587\u672c\u683c\u5f0f\u7f16\u5199\uff0c\u4e0d\u5305\u542b\u5f15\u53f7\uff0c\u5e76\u4e14\u8981\u8f6c\u4e49\u7279\u6b8a\u5b57\u7b26\u3002</p>\n<p>\u8fd9\u79cd\u683c\u5f0f\u4e5f\u53ef\u4ee5\u7528 <code>TSV</code> \u6765\u8868\u793a\u3002</p>\n<p>TabSeparated \u683c\u5f0f\u975e\u5e38\u65b9\u4fbf\u7528\u4e8e\u81ea\u5b9a\u4e49\u7a0b\u5e8f\u6216\u811a\u672c\u5904\u7406\u6570\u636e\u3002HTTP \u5ba2\u6237\u7aef\u63a5\u53e3\u9ed8\u8ba4\u4f1a\u7528\u8fd9\u79cd\u683c\u5f0f\uff0c\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u6279\u91cf\u6a21\u5f0f\u4e0b\u4e5f\u4f1a\u7528\u8fd9\u79cd\u683c\u5f0f\u3002\u8fd9\u79cd\u683c\u5f0f\u5141\u8bb8\u5728\u4e0d\u540c\u6570\u636e\u5e93\u4e4b\u95f4\u4f20\u8f93\u6570\u636e\u3002\u4f8b\u5982\uff0c\u4ece MYSQL \u4e2d\u5bfc\u51fa\u6570\u636e\u7136\u540e\u5bfc\u5165\u5230 ClickHouse \u4e2d\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p>\n<p>TabSeparated \u683c\u5f0f\u652f\u6301\u8f93\u51fa\u6570\u636e\u603b\u503c\uff08\u5f53\u4f7f\u7528 WITH TOTALS\uff09 \u4ee5\u53ca\u6781\u503c\uff08\u5f53 'extremes' \u8bbe\u7f6e\u662f1\uff09\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u603b\u503c\u548c\u6781\u503c\b\u8f93\u51fa\u5728\u4e3b\u6570\u636e\u7684\u540e\u9762\u3002\u4e3b\u8981\u7684\u6570\u636e\uff0c\u603b\u503c\uff0c\u6781\u503c\u4f1a\u4ee5\u4e00\u4e2a\u7a7a\u884c\u9694\u5f00\uff0c\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"k\">WITH</span> <span class=\"n\">TOTALS</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"n\">FORMAT</span> <span class=\"n\">TabSeparated</span><span class=\"o\">``</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">17</span>      <span class=\"mi\">1406958</span>\n<span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">18</span>      <span class=\"mi\">1383658</span>\n<span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">19</span>      <span class=\"mi\">1405797</span>\n<span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">20</span>      <span class=\"mi\">1353623</span>\n<span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">21</span>      <span class=\"mi\">1245779</span>\n<span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">22</span>      <span class=\"mi\">1031592</span>\n<span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">23</span>      <span class=\"mi\">1046491</span>\n\n<span class=\"mi\">0000</span><span class=\"o\">-</span><span class=\"mi\">00</span><span class=\"o\">-</span><span class=\"mi\">00</span>      <span class=\"mi\">8873898</span>\n\n<span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">17</span>      <span class=\"mi\">1031592</span>\n<span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">23</span>      <span class=\"mi\">1406958</span>\n</code></pre></div>\n\n\n<h4 id=\"shu-ju-jie-xi-fang-shi\">\u6570\u636e\u89e3\u6790\u65b9\u5f0f<a class=\"headerlink\" href=\"#shu-ju-jie-xi-fang-shi\" title=\"Permanent link\">&para;</a></h4>\n<p>\u6574\u6570\u4ee5\u5341\u8fdb\u5236\u5f62\u5f0f\u5199\u5165\u3002\u6570\u5b57\u5728\u5f00\u5934\u53ef\u4ee5\u5305\u542b\u989d\u5916\u7684 <code>+</code> \u5b57\u7b26\uff08\u89e3\u6790\u65f6\u5ffd\u7565\uff0c\u683c\u5f0f\u5316\u65f6\u4e0d\u8bb0\u5f55\uff09\u3002\u975e\u8d1f\u6570\u4e0d\u80fd\u5305\u542b\u8d1f\u53f7\u3002 \u8bfb\u53d6\u65f6\uff0c\u5141\u8bb8\u5c06\u7a7a\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u96f6\uff0c\u6216\u8005\uff08\u5bf9\u4e8e\u5e26\u7b26\u53f7\u7684\u7c7b\u578b\uff09\u5c06\u4ec5\u5305\u542b\u8d1f\u53f7\u7684\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u96f6\u3002 \u4e0d\u7b26\u5408\u76f8\u5e94\u6570\u636e\u7c7b\u578b\u7684\u6570\u5b57\u53ef\u80fd\u4f1a\u88ab\u89e3\u6790\u4e3a\u4e0d\u540c\u7684\u6570\u5b57\uff0c\u800c\u4e0d\u4f1a\u663e\u793a\u9519\u8bef\u6d88\u606f\u3002</p>\n<p>\u6d6e\u70b9\u6570\u4ee5\u5341\u8fdb\u5236\u5f62\u5f0f\u5199\u5165\u3002\u70b9\u53f7\u7528\u4f5c\u5c0f\u6570\u70b9\u5206\u9694\u7b26\u3002\u652f\u6301\u6307\u6570\u7b49\u7b26\u53f7\uff0c\u5982'inf'\uff0c'+ inf'\uff0c'-inf'\u548c'nan'\u3002 \u6d6e\u70b9\u6570\u7684\u8f93\u5165\u53ef\u4ee5\u4ee5\u5c0f\u6570\u70b9\u5f00\u59cb\u6216\u7ed3\u675f\u3002<br />\n\u683c\u5f0f\u5316\u7684\u65f6\u5019\uff0c\u6d6e\u70b9\u6570\u7684\u7cbe\u786e\u5ea6\u53ef\u80fd\u4f1a\u4e22\u5931\u3002<br />\n\u89e3\u6790\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u4e25\u683c\u9700\u8981\u53bb\u8bfb\u53d6\u4e0e\u673a\u5668\u53ef\u4ee5\u8868\u793a\u7684\u6700\u63a5\u8fd1\u7684\u6570\u503c\u3002</p>\n<p>\u65e5\u671f\u4f1a\u4ee5 YYYY-MM-DD \u683c\u5f0f\u5199\u5165\u548c\u89e3\u6790\uff0c\u4f46\u4f1a\u4ee5\u4efb\u4f55\u5b57\u7b26\u4f5c\u4e3a\u5206\u9694\u7b26\u3002<br />\n\u5e26\u65f6\u95f4\u7684\u65e5\u671f\u4f1a\u4ee5 YYYY-MM-DD hh:mm:ss \u683c\u5f0f\u5199\u5165\u548c\u89e3\u6790\uff0c\u4f46\u4f1a\u4ee5\u4efb\u4f55\u5b57\u7b26\u4f5c\u4e3a\u5206\u9694\u7b26\u3002<br />\n\u8fd9\u4e00\u5207\u90fd\u53d1\u751f\u5728\u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\u542f\u52a8\u65f6\u7684\u7cfb\u7edf\u65f6\u533a\uff08\u53d6\u51b3\u4e8e\u54ea\u4e00\u79cd\u683c\u5f0f\u7684\u6570\u636e\uff09\u3002\u5bf9\u4e8e\u5177\u6709\u65f6\u95f4\u7684\u65e5\u671f\uff0c\u590f\u65f6\u5236\u65f6\u95f4\u672a\u6307\u5b9a\u3002 \u56e0\u6b64\uff0c\u5982\u679c\u8f6c\u50a8\u5728\u590f\u4ee4\u65f6\u4e2d\u6709\u65f6\u95f4\uff0c\u5219\u8f6c\u50a8\u4e0d\u4f1a\u660e\u786e\u5730\u5339\u914d\u6570\u636e\uff0c\u89e3\u6790\u5c06\u9009\u62e9\u4e24\u8005\u4e4b\u4e00\u3002<br />\n\u5728\u8bfb\u53d6\u64cd\u4f5c\u671f\u95f4\uff0c\u4e0d\u6b63\u786e\u7684\u65e5\u671f\u548c\u5177\u6709\u65f6\u95f4\u7684\u65e5\u671f\u53ef\u4ee5\u4f7f\u7528\u81ea\u7136\u6ea2\u51fa\u6216\u7a7a\u65e5\u671f\u548c\u65f6\u95f4\u8fdb\u884c\u5206\u6790\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u9519\u8bef\u6d88\u606f\u3002</p>\n<p>\u6709\u4e2a\u4f8b\u5916\u60c5\u51b5\uff0cUnix \u65f6\u95f4\u6233\u683c\u5f0f\uff0810\u4e2a\u5341\u8fdb\u5236\u6570\u5b57\uff09\u4e5f\u652f\u6301\u4f7f\u7528\u65f6\u95f4\u89e3\u6790\u65e5\u671f\u3002\u7ed3\u679c\u4e0d\u662f\u65f6\u533a\u76f8\u5173\u7684\u3002\u683c\u5f0f YYYY-MM-DD hh:mm:ss\u548c NNNNNNNNNN \u4f1a\u81ea\u52a8\u533a\u5206\u3002</p>\n<p>\u5b57\u7b26\u4e32\u4ee5\u53cd\u659c\u7ebf\u8f6c\u4e49\u7684\u7279\u6b8a\u5b57\u7b26\u8f93\u51fa\u3002 \u4ee5\u4e0b\u8f6c\u4e49\u5e8f\u5217\u7528\u4e8e\u8f93\u51fa\uff1a<code>\\b</code>\uff0c<code>\\f</code>\uff0c<code>\\r</code>\uff0c<code>\\n</code>\uff0c<code>\\t</code>\uff0c<code>\\0</code>\uff0c<code>\\'</code>\uff0c<code>\\\\</code>\u3002 \u89e3\u6790\u8fd8\u652f\u6301<code>\\a</code>\uff0c<code>\\v</code>\u548c<code>\\xHH</code>\uff08\u5341\u516d\u8fdb\u5236\u8f6c\u4e49\u5b57\u7b26\uff09\u548c\u4efb\u4f55<code>\\c</code>\u5b57\u7b26\uff0c\u5176\u4e2d<code>c</code>\u662f\u4efb\u4f55\u5b57\u7b26\uff08\u8fd9\u4e9b\u5e8f\u5217\u88ab\u8f6c\u6362\u4e3a<code>c</code>\uff09\u3002 \u56e0\u6b64\uff0c\u8bfb\u53d6\u6570\u636e\u652f\u6301\u53ef\u4ee5\u5c06\u6362\u884c\u7b26\u5199\u4e3a<code>\\n</code>\u6216<code>\\</code>\u7684\u683c\u5f0f\uff0c\u6216\u8005\u6362\u884c\u3002\u4f8b\u5982\uff0c\u5b57\u7b26\u4e32 <code>Hello world</code> \u5728\u5355\u8bcd\u4e4b\u95f4\u6362\u884c\u800c\u4e0d\u662f\u7a7a\u683c\u53ef\u4ee5\u89e3\u6790\u4e3a\u4ee5\u4e0b\u4efb\u4f55\u5f62\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Hello</span><span class=\"err\">\\</span><span class=\"n\">nworld</span>\n\n<span class=\"n\">Hello</span><span class=\"err\">\\</span>\n<span class=\"n\">world</span>\n</code></pre></div>\n\n\n<p>\u7b2c\u4e8c\u79cd\u5f62\u5f0f\u662f\u652f\u6301\u7684\uff0c\u56e0\u4e3a MySQL \u8bfb\u53d6 tab-separated \u683c\u5f0f\u6570\u636e\u96c6\u7684\u65f6\u5019\u4e5f\u4f1a\u4f7f\u7528\u5b83\u3002</p>\n<p>\u5728 TabSeparated \u683c\u5f0f\u4e2d\u4f20\u9012\u6570\u636e\u65f6\u9700\u8981\u8f6c\u4e49\u7684\u6700\u5c0f\u5b57\u7b26\u96c6\u4e3a\uff1aTab\uff0c\u6362\u884c\u7b26\uff08LF\uff09\u548c\u53cd\u659c\u6760\u3002</p>\n<p>\u53ea\u6709\u4e00\u5c0f\u7ec4\u7b26\u53f7\u4f1a\u88ab\u8f6c\u4e49\u3002\u4f60\u53ef\u4ee5\u8f7b\u6613\u5730\u627e\u5230\u4e00\u4e2a\u5b57\u7b26\u4e32\u503c\uff0c\u4f46\u8fd9\u4e0d\u4f1a\u6b63\u5e38\u5728\u4f60\u7684\u7ec8\u7aef\u663e\u793a\u3002</p>\n<p>\u6570\u7ec4\u5199\u5728\u65b9\u62ec\u53f7\u5185\u7684\u9017\u53f7\u5206\u9694\u503c\u5217\u8868\u4e2d\u3002 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6570\u7ec4\u4e2d\u7684\u6570\u5b57\u9879\u76ee\u4f1a\u88ab\u62fc\u51d1\uff0c\u4f46\u65e5\u671f\uff0c\u5e26\u65f6\u95f4\u7684\u65e5\u671f\u4ee5\u53ca\u5b57\u7b26\u4e32\u5c06\u4f7f\u7528\u4e0e\u4e0a\u9762\u76f8\u540c\u7684\u8f6c\u4e49\u89c4\u5219\u7528\u5355\u5f15\u53f7\u5f15\u8d77\u6765\u3002</p>\n<p><a href=\"#../query_language/syntax/\">NULL</a> \u5c06\u8f93\u51fa\u4e3a <code>\\N</code>\u3002</p>\n<h3 id=\"tabseparatedraw\">TabSeparatedRaw<a class=\"headerlink\" href=\"#tabseparatedraw\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e <code>TabSeparated</code> \u683c\u5f0f\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u884c\u6570\u636e\u662f\u4e0d\u4f1a\u88ab\u8f6c\u4e49\u7684\u3002<br />\n\u8be5\u683c\u5f0f\u4ec5\u9002\u7528\u4e8e\u8f93\u51fa\u67e5\u8be2\u7ed3\u679c\uff0c\u4f46\u4e0d\u9002\u7528\u4e8e\u89e3\u6790\u8f93\u5165\uff08\u5c06\u6570\u636e\u63d2\u5165\u5230\u8868\u4e2d\uff09\u3002</p>\n<p>\u8fd9\u79cd\u683c\u5f0f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u540d\u79f0 <code>TSVRaw</code> \u6765\u8868\u793a\u3002</p>\n<h3 id=\"tabseparatedwithnames\">TabSeparatedWithNames<a class=\"headerlink\" href=\"#tabseparatedwithnames\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e <code>TabSeparated</code> \u683c\u5f0f\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u7b2c\u4e00\u884c\u4f1a\u663e\u793a\u5217\u7684\u540d\u79f0\u3002<br />\n\u5728\u89e3\u6790\u8fc7\u7a0b\u4e2d\uff0c\u7b2c\u4e00\u884c\u5b8c\u5168\u88ab\u5ffd\u7565\u3002\u60a8\u4e0d\u80fd\u4f7f\u7528\u5217\u540d\u6765\u786e\u5b9a\u5176\u4f4d\u7f6e\u6216\u68c0\u67e5\u5176\u6b63\u786e\u6027\u3002<br />\n\uff08\u672a\u6765\u53ef\u80fd\u4f1a\u52a0\u5165\u89e3\u6790\u5934\u884c\u7684\u529f\u80fd\uff09</p>\n<p>\u8fd9\u79cd\u683c\u5f0f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u540d\u79f0 <code>TSVWithNames</code> \u6765\u8868\u793a\u3002</p>\n<h3 id=\"tabseparatedwithnamesandtypes\">TabSeparatedWithNamesAndTypes<a class=\"headerlink\" href=\"#tabseparatedwithnamesandtypes\" title=\"Permanent link\">&para;</a></h3>\n<p");
            
            document.write(">\u4e0e <code>TabSeparated</code> \u683c\u5f0f\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u7b2c\u4e00\u884c\u4f1a\u663e\u793a\u5217\u7684\u540d\u79f0\uff0c\u7b2c\u4e8c\u884c\u4f1a\u663e\u793a\u5217\u7684\u7c7b\u578b\u3002<br />\n\u5728\u89e3\u6790\u8fc7\u7a0b\u4e2d\uff0c\u7b2c\u4e00\u884c\u548c\u7b2c\u4e8c\u884c\u5b8c\u5168\u88ab\u5ffd\u7565\u3002</p>\n<p>\u8fd9\u79cd\u683c\u5f0f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u540d\u79f0 <code>TSVWithNamesAndTypes</code> \u6765\u8868\u793a\u3002</p>\n<h3 id=\"format-template\">Template<a class=\"headerlink\" href=\"#format-template\" title=\"Permanent link\">&para;</a></h3>\n<p>This format allows to specify a custom format string with placeholders for values with specified escaping rule.</p>\n<p>It uses settings <code>format_schema</code>, <code>format_schema_rows</code>, <code>format_schema_rows_between_delimiter</code> and some settings of other formats (e.g. <code>output_format_json_quote_64bit_integers</code> when using <code>JSON</code> escaping, see further)</p>\n<p>Format string <code>format_schema_rows</code> specifies rows format with the following syntax:</p>\n<p><code>delimiter_1${column_1:serializeAs_1}delimiter_2${column_2:serializeAs_2} ... delimiter_N</code>,</p>\n<p>where <code>delimiter_i</code> is a delimiter between values (<code>$</code> symbol can be escaped as <code>$$</code>), <br />\n<code>column_i</code> is a name of a column whose values are to be selected or inserted (if empty, then column will be skipped), <br />\n<code>serializeAs_i</code> is an escaping rule for the column values. The following escaping rules are supported:</p>\n<ul>\n<li><code>CSV</code>, <code>JSON</code>, <code>XML</code> (similarly to the formats of the same names)</li>\n<li><code>Escaped</code> (similarly to <code>TSV</code>)</li>\n<li><code>Quoted</code> (similarly to <code>Values</code>)</li>\n<li><code>Raw</code> (without escaping, similarly to <code>TSVRaw</code>)</li>\n<li><code>None</code> (no escaping rule, see further)</li>\n</ul>\n<p>If escaping rule is omitted, then<code>None</code> will be used. <code>XML</code> and <code>Raw</code> are suitable only for output.</p>\n<p>So, for the following format string:</p>\n<div class=\"codehilite\"><pre><span></span><code>`Search phrase: <span class=\"cp\">${</span><span class=\"n\">SearchPhrase</span><span class=\"p\">:</span><span class=\"n\">Quoted</span><span class=\"cp\">}</span>, count: <span class=\"cp\">${</span><span class=\"n\">c</span><span class=\"p\">:</span><span class=\"n\">Escaped</span><span class=\"cp\">}</span>, ad price: $$${price:JSON};`\n</code></pre></div>\n\n\n<p>the values of <code>SearchPhrase</code>, <code>c</code> and <code>price</code> columns, which are escaped as <code>Quoted</code>, <code>Escaped</code> and <code>JSON</code> will be printed (for select) or will be expected (for insert) between <code>Search phrase:</code>, <code>, count:</code>, <code>, ad price: $</code> and <code>;</code> delimiters respectively. For example:</p>\n<p><code>Search phrase: 'bathroom interior design', count: 2166, ad price: $3;</code></p>\n<p>The <code>format_schema_rows_between_delimiter</code> setting specifies delimiter between rows, which is printed (or expected) after every row except the last one (<code>\\n</code> by default)</p>\n<p>Format string <code>format_schema</code> has the same syntax as <code>format_schema_rows</code> and allows to specify a prefix, a suffix and a way to print some additional information. It contains the following placeholders instead of column names:</p>\n<ul>\n<li><code>data</code> is the rows with data in <code>format_schema_rows</code> format, separated by <code>format_schema_rows_between_delimiter</code>. This placeholder must be the first placeholder in the format string.</li>\n<li><code>totals</code> is the row with total values in <code>format_schema_rows</code> format (when using WITH TOTALS)</li>\n<li><code>min</code> is the row with minimum values in <code>format_schema_rows</code> format (when extremes is set to 1)</li>\n<li><code>max</code> is the row with maximum values in <code>format_schema_rows</code> format (when extremes is set to 1)</li>\n<li><code>rows</code> is the total number of output rows</li>\n<li><code>rows_before_limit</code> is the minimal number of rows there would have been without LIMIT. Output only if the query contains LIMIT. If the query contains GROUP BY, rows_before_limit_at_least is the exact number of rows there would have been without a LIMIT.</li>\n<li><code>time</code> is the request execution time in seconds</li>\n<li><code>rows_read</code> is the number of rows have been read</li>\n<li><code>bytes_read</code> is the number of bytes (uncompressed) have been read</li>\n</ul>\n<p>The placeholders <code>data</code>, <code>totals</code>, <code>min</code> and <code>max</code> must not have escaping rule specified (or <code>None</code> must be specified explicitly). The remaining placeholders may have any escaping rule specified.<br />\n If the <code>format_schema</code> setting is an empty string, <code>${data}</code> is used as default value.<br />\n  For insert queries format allows to skip some columns or some fields if prefix or suffix (see example).</p>\n<p><code>Select</code> example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">SearchPhrase</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">SearchPhrase</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span>\n<span class=\"n\">FORMAT</span> <span class=\"k\">Template</span> \n<span class=\"n\">SETTINGS</span> <span class=\"n\">format_schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&lt;!DOCTYPE HTML&gt;</span>\n<span class=\"s1\">&lt;html&gt; &lt;head&gt; &lt;title&gt;Search phrases&lt;/title&gt; &lt;/head&gt;</span>\n<span class=\"s1\"> &lt;body&gt;</span>\n<span class=\"s1\">  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Search phrases&lt;/caption&gt;</span>\n<span class=\"s1\">    &lt;tr&gt; &lt;th&gt;Search phrase&lt;/th&gt; &lt;th&gt;Count&lt;/th&gt; &lt;/tr&gt;</span>\n<span class=\"s1\">    ${data}</span>\n<span class=\"s1\">  &lt;/table&gt;</span>\n<span class=\"s1\">  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Max&lt;/caption&gt;</span>\n<span class=\"s1\">    ${max}</span>\n<span class=\"s1\">  &lt;/table&gt;</span>\n<span class=\"s1\">  &lt;b&gt;Processed ${rows_read:XML} rows in ${time:XML} sec&lt;/b&gt;</span>\n<span class=\"s1\"> &lt;/body&gt;</span>\n<span class=\"s1\">&lt;/html&gt;&#39;</span><span class=\"p\">,</span>\n<span class=\"n\">format_schema_rows</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&lt;tr&gt; &lt;td&gt;${SearchPhrase:XML}&lt;/td&gt; &lt;td&gt;${\u0441:XML}&lt;/td&gt; &lt;/tr&gt;&#39;</span><span class=\"p\">,</span>\n<span class=\"n\">format_schema_rows_between_delimiter</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;\\n    &#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cp\">&lt;!DOCTYPE HTML&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>Search phrases<span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n <span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">table</span> <span class=\"na\">border</span><span class=\"o\">=</span><span class=\"s\">&quot;1&quot;</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">caption</span><span class=\"p\">&gt;</span>Search phrases<span class=\"p\">&lt;/</span><span class=\"nt\">caption</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Search phrase<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Count<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>8267016<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>bathroom interior design<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>2166<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>yandex<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>1655<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>spring 2014 fashion<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>1549<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\"");
            
            document.write(">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>freeform photos<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>1480<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">table</span> <span class=\"na\">border</span><span class=\"o\">=</span><span class=\"s\">&quot;1&quot;</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">caption</span><span class=\"p\">&gt;</span>Max<span class=\"p\">&lt;/</span><span class=\"nt\">caption</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>8873898<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">b</span><span class=\"p\">&gt;</span>Processed 3095973 rows in 0.1569913 sec<span class=\"p\">&lt;/</span><span class=\"nt\">b</span><span class=\"p\">&gt;</span>\n <span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</code></pre></div>\n\n\n<p><code>Insert</code> example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Some header</span>\n<span class=\"err\">Page views: 5, User id: 4324182021466249494, Useless field: hello, Duration: 146, Sign: -1</span>\n<span class=\"err\">Page views: 6, User id: 4324182021466249494, Useless field: world, Duration: 185, Sign: 1</span>\n<span class=\"err\">Total rows: 2</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UserActivity</span> <span class=\"n\">FORMAT</span> <span class=\"k\">Template</span> <span class=\"n\">SETTINGS</span> \n<span class=\"n\">format_schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Some header\\n${data}\\nTotal rows: ${:CSV}\\n&#39;</span><span class=\"p\">,</span> \n<span class=\"n\">format_schema_rows</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Page views: ${PageViews:CSV}, User id: ${UserID:CSV}, Useless field: ${:CSV}, Duration: ${Duration:CSV}, Sign: ${Sign:CSV}&#39;</span>\n</code></pre></div>\n\n\n<p><code>PageViews</code>, <code>UserID</code>, <code>Duration</code> and <code>Sign</code> inside placeholders are names of columns in the table. Values after <code>Useless field</code> in rows and after <code>\\nTotal rows:</code> in suffix will be ignored.<br />\nAll delimiters in the input data must be strictly equal to delimiters in specified format strings.</p>\n<h3 id=\"templateignorespaces\">TemplateIgnoreSpaces<a class=\"headerlink\" href=\"#templateignorespaces\" title=\"Permanent link\">&para;</a></h3>\n<p>This format is suitable only for input.<br />\nSimilar to <code>Template</code>,  but skips whitespace characters between delimiters and values in the input stream. However, if format strings contain whitespace characters, these characters will be expected in the input stream. Also allows to specify empty placeholders (<code>${}</code> or <code>${:None}</code>) to split some delimiter into separate parts to ignore spaces between them. Such placeholders are used only for skipping whitespace characters. <br />\nIt's possible to read <code>JSON</code> using this format, if values of columns have the same order in all rows. For example, the following request can be used for inserting data from output example of format <a href=\"#json\">JSON</a>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"k\">table_name</span> <span class=\"n\">FORMAT</span> <span class=\"n\">TemplateIgnoreSpaces</span> <span class=\"n\">SETTINGS</span>\n<span class=\"n\">format_schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;{${}&quot;meta&quot;${}:${:JSON},${}&quot;data&quot;${}:${}[${data}]${},${}&quot;totals&quot;${}:${:JSON},${}&quot;extremes&quot;${}:${:JSON},${}&quot;rows&quot;${}:${:JSON},${}&quot;rows_before_limit_at_least&quot;${}:${:JSON}${}}&#39;</span><span class=\"p\">,</span>\n<span class=\"n\">format_schema_rows</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;{${}&quot;SearchPhrase&quot;${}:${}${phrase:JSON}${},${}&quot;c&quot;${}:${}${cnt:JSON}${}}&#39;</span><span class=\"p\">,</span>\n<span class=\"n\">format_schema_rows_between_delimiter</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;,&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"tskv\">TSKV<a class=\"headerlink\" href=\"#tskv\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e <code>TabSeparated</code> \u683c\u5f0f\u7c7b\u4f3c\uff0c\u4f46\u5b83\u8f93\u51fa\u7684\u662f <code>name=value</code> \u7684\u683c\u5f0f\u3002\u540d\u79f0\u4f1a\u548c <code>TabSeparated</code> \u683c\u5f0f\u4e00\u6837\u88ab\u8f6c\u4e49\uff0c<code>=</code> \u5b57\u7b26\u4e5f\u4f1a\u88ab\u8f6c\u4e49\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SearchPhrase=   count()=8267016</span>\n<span class=\"err\">SearchPhrase=bathroom interior design    count()=2166</span>\n<span class=\"err\">SearchPhrase=yandex     count()=1655</span>\n<span class=\"err\">SearchPhrase=2014 spring fashion    count()=1549</span>\n<span class=\"err\">SearchPhrase=freeform photos       count()=1480</span>\n<span class=\"err\">SearchPhrase=angelina jolie    count()=1245</span>\n<span class=\"err\">SearchPhrase=omsk       count()=1112</span>\n<span class=\"err\">SearchPhrase=photos of dog breeds    count()=1091</span>\n<span class=\"err\">SearchPhrase=curtain designs        count()=1064</span>\n<span class=\"err\">SearchPhrase=baku       count()=1000</span>\n</code></pre></div>\n\n\n<p><a href=\"#../query_language/syntax/\">NULL</a> \u8f93\u51fa\u4e3a <code>\\N</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"n\">FORMAT</span> <span class=\"n\">TSKV</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">x=1 y=\\N</span>\n</code></pre></div>\n\n\n<p>\u5f53\u6709\u5927\u91cf\u7684\u5c0f\u5217\u65f6\uff0c\u8fd9\u79cd\u683c\u5f0f\u662f\u4f4e\u6548\u7684\uff0c\u901a\u5e38\u6ca1\u6709\u7406\u7531\u4f7f\u7528\u5b83\u3002\u5b83\u88ab\u7528\u4e8e Yandex \u516c\u53f8\u7684\u4e00\u4e9b\u90e8\u95e8\u3002</p>\n<p>\u6570\u636e\u7684\u8f93\u51fa\u548c\u89e3\u6790\u90fd\u652f\u6301\u8fd9\u79cd\u683c\u5f0f\u3002\u5bf9\u4e8e\u89e3\u6790\uff0c\u4efb\u4f55\u987a\u5e8f\u90fd\u652f\u6301\u4e0d\u540c\u5217\u7684\u503c\u3002\u53ef\u4ee5\u7701\u7565\u67d0\u4e9b\u503c\uff0c\u7528 <code>-</code> \u8868\u793a\uff0c \u5b83\u4eec\u88ab\u89c6\u4e3a\u7b49\u4e8e\u5b83\u4eec\u7684\u9ed8\u8ba4\u503c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u96f6\u548c\u7a7a\u884c\u88ab\u7528\u4f5c\u9ed8\u8ba4\u503c\u3002\u4f5c\u4e3a\u9ed8\u8ba4\u503c\uff0c\u4e0d\u652f\u6301\u8868\u4e2d\u6307\u5b9a\u7684\u590d\u6742\u503c\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u5e26\u7b49\u53f7\u6216\u503c\uff0c\u53ef\u4ee5\u7528\u9644\u52a0\u5b57\u6bb5 <code>tskv</code> \u6765\u8868\u793a\uff0c\u8fd9\u79cd\u5728\u89e3\u6790\u4e0a\u662f\u88ab\u5141\u8bb8\u7684\u3002\u8fd9\u6837\u7684\u8bdd\u8be5\u5b57\u6bb5\u88ab\u5ffd\u7565\u3002</p>\n<h3 id=\"csv\">CSV<a class=\"headerlink\" href=\"#csv\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6309\u9017\u53f7\u5206\u9694\u7684\u6570\u636e\u683c\u5f0f(<a href=\"https://tools.ietf.org/html/rfc4180\" rel=\"external nofollow noreferrer\">RFC</a>)\u3002</p>\n<p>\u683c\u5f0f\u5316\u7684\u65f6\u5019\uff0c\u884c\u662f\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\u7684\u3002\u5b57\u7b26\u4e32\u4e2d\u7684\u53cc\u5f15\u53f7\u4f1a\u4ee5\u4e24\u4e2a\u53cc\u5f15\u53f7\u8f93\u51fa\uff0c\u9664\u6b64\u4e4b\u5916\u6ca1\u6709\u5176\u4ed6\u89c4\u5219\u6765\u505a\u5b57\u7b26\u8f6c\u4e49\u4e86\u3002\u65e5\u671f\u548c\u65f6\u95f4\u4e5f\u4f1a\u4ee5\u53cc\u5f15\u53f7\u5305\u62ec\u3002\u6570\u5b57\u7684\u8f93\u51fa\u4e0d\u5e26\u5f15\u53f7\u3002\u503c\u7531\u4e00\u4e2a\u5355\u72ec\u7684\u5b57\u7b26\u9694\u5f00\uff0c\u8fd9\u4e2a\u5b57\u7b26\u9ed8\u8ba4\u662f <code>,</code>\u3002\u884c\u4f7f\u7528 Unix \u6362\u884c\u7b26\uff08LF\uff09\u5206\u9694\u3002 \u6570\u7ec4\u5e8f\u5217\u5316\u6210 CSV \u89c4\u5219\u5982\u4e0b\uff1a\u9996\u5148\u5c06\u6570\u7ec4\u5e8f\u5217\u5316\u4e3a TabSeparated \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u5b57\u7b26\u4e32\u7528\u53cc\u5f15\u53f7\u5305\u62ec\u8f93\u51fa\u5230 CSV\u3002CSV \u683c\u5f0f\u7684\u5143\u7ec4\u88ab\u5e8f\u5217\u5316\u4e3a\u5355\u72ec\u7684\u5217\uff08\u5373\u5b83\u4eec\u5728\u5143\u7ec4\u4e2d\u7684\u5d4c\u5957\u5173\u7cfb\u4f1a\u4e22\u5931\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">clickhouse-client --format_csv_delimiter=&quot;|&quot; --query=&quot;INSERT INTO test.csv FORMAT CSV&quot; &lt; data.csv</span>\n</code></pre></div>\n\n\n<p>&ast;\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u95f4\u9694\u7b26\u662f <code>,</code> \uff0c\u5728 <a href=\"#settings-format_csv_delimiter\">format_csv_delimiter</a> \u4e2d\u53ef\u4ee5\u4e86\u89e3\u66f4\u591a\u95f4\u9694\u7b26\u914d\u7f6e\u3002</p>\n<p>\u89e3\u6790\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528\u6216\u4e0d\u4f7f\u7528\u5f15\u53f7\u6765\u89e3\u6790\u6240\u6709\u503c\u3002\u652f\u6301\u53cc\u5f15\u53f7\u548c\u5355\u5f15\u53f7\u3002\u884c\u4e5f\u53ef\u4ee5\u4e0d\u7528\u5f15\u53f7\u6392\u5217\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u88ab\u89e3\u6790\u4e3a\u9017\u53f7\u6216\u6362\u884c\u7b26\uff08CR \u6216 LF\uff09\u3002\u5728\u89e3\u6790\u4e0d\u5e26\u5f15\u53f7\u7684\u884c\u65f6\uff0c\u82e5\u8fdd\u53cd RFC \u89c4\u5219\uff0c\u4f1a\u5ffd\u7565\u524d\u5bfc\u548c\u5c3e\u968f\u7684\u7a7a\u683c\u548c\u5236\u8868\u7b26\u3002 \u5bf9\u4e8e\u6362\u884c\uff0c\u5168\u90e8\u652f\u6301 Unix\uff08LF\uff09\uff0cWindows\uff08CR LF\uff09\u548c Mac OS Classic\uff08CR LF\uff09\u3002</p>\n<p><code>NULL</code> \u5c06\u8f93\u51fa\u4e3a <code>\\N</code>\u3002</p>\n<p>CSV \u683c\u5f0f\u662f\u548c TabSeparated \u4e00\u6837\u7684\u65b9\u5f0f\u8f93\u51fa\u603b\u6570\u548c\u6781\u503c\u3002</p>\n<h3 id=\"csvwithnames\">CSVWithNames<a class=\"headerlink\" href=\"#csvwithnames\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f1a\u8f93\u51fa\u5e26\u5934\u90e8\u884c\uff0c\u548c <code>TabSeparatedWithNames</code> \u4e00\u6837\u3002</p>\n<h3 id=\"json\">JSON<a class=\"headerlink\" href=\"#json\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee5 JSON \u683c\u5f0f\u8f93\u51fa\u6570\u636e\u3002\u9664\u4e86\u6570\u636e\u8868\u4e4b\u5916\uff0c\u5b83\u8fd8\u8f93\u51fa\u5217\u540d\u79f0\u548c\u7c7b\u578b\u4ee5\u53ca\u4e00\u4e9b\u9644\u52a0\u4fe1\u606f\uff1a\u8f93\u51fa\u884c\u7684\u603b\u6570\u4ee5\u53ca\u5728\u6ca1\u6709 LIMIT \u65f6\u53ef\u4ee5\u8f93\u51fa\u7684\u884c\u6570\u3002 \u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">SearchPhrase</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">SearchPhrase</span> <span class=\"k\">WITH</span> <span class=\"n\">TOTALS</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSON</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n        <span class=\"nt\">&quot;meta&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;SearchPhrase&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;String&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;c&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;UInt64&quot;</span>\n                <span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;data&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span>");
            
            document.write("<span class=\"p\">:</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;8267016&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;bathroom interior design&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;2166&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;yandex&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1655&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;spring 2014 fashion&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1549&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;freeform photos&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1480&quot;</span>\n                <span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;totals&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;8873898&quot;</span>\n        <span class=\"p\">},</span>\n\n        <span class=\"nt\">&quot;extremes&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;min&quot;</span><span class=\"p\">:</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1480&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"nt\">&quot;max&quot;</span><span class=\"p\">:</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;8267016&quot;</span>\n                <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n\n        <span class=\"nt\">&quot;rows&quot;</span><span class=\"p\">:</span> <span class=\"mi\">5</span><span class=\"p\">,</span>\n\n        <span class=\"nt\">&quot;rows_before_limit_at_least&quot;</span><span class=\"p\">:</span> <span class=\"mi\">141137</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>JSON \u4e0e JavaScript \u517c\u5bb9\u3002\u4e3a\u4e86\u786e\u4fdd\u8fd9\u4e00\u70b9\uff0c\u4e00\u4e9b\u5b57\u7b26\u88ab\u53e6\u5916\u8f6c\u4e49\uff1a\u659c\u7ebf<code>/</code>\u88ab\u8f6c\u4e49\u4e3a<code>\\/</code>; \u66ff\u4ee3\u7684\u6362\u884c\u7b26 <code>U+2028</code> \u548c <code>U+2029</code> \u4f1a\u6253\u65ad\u4e00\u4e9b\u6d4f\u89c8\u5668\u89e3\u6790\uff0c\u5b83\u4eec\u4f1a\u88ab\u8f6c\u4e49\u4e3a <code>\\uXXXX</code>\u3002 ASCII \u63a7\u5236\u5b57\u7b26\u88ab\u8f6c\u4e49\uff1a\u9000\u683c\uff0c\u6362\u9875\uff0c\u6362\u884c\uff0c\u56de\u8f66\u548c\u6c34\u5e73\u5236\u8868\u7b26\u88ab\u66ff\u6362\u4e3a<code>\\b</code>\uff0c<code>\\f</code>\uff0c<code>\\n</code>\uff0c<code>\\r</code>\uff0c<code>\\t</code> \u4f5c\u4e3a\u4f7f\u7528<code>\\uXXXX</code>\u5e8f\u5217\u768400-1F\u8303\u56f4\u5185\u7684\u5269\u4f59\u5b57\u8282\u3002 \u65e0\u6548\u7684 UTF-8 \u5e8f\u5217\u66f4\u6539\u4e3a\u66ff\u6362\u5b57\u7b26 \uff0c\u56e0\u6b64\u8f93\u51fa\u6587\u672c\u5c06\u5305\u542b\u6709\u6548\u7684 UTF-8 \u5e8f\u5217\u3002 \u4e3a\u4e86\u4e0e JavaScript \u517c\u5bb9\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cInt64 \u548c UInt64 \u6574\u6570\u7528\u53cc\u5f15\u53f7\u5f15\u8d77\u6765\u3002\u8981\u9664\u53bb\u5f15\u53f7\uff0c\u53ef\u4ee5\u5c06\u914d\u7f6e\u53c2\u6570 output_format_json_quote_64bit_integers \u8bbe\u7f6e\u4e3a0\u3002</p>\n<p><code>rows</code> \u2013 \u7ed3\u679c\u8f93\u51fa\u7684\u884c\u6570\u3002</p>\n<p><code>rows_before_limit_at_least</code> \u53bb\u6389 LIMIT \u8fc7\u6ee4\u540e\u7684\u6700\u5c0f\u884c\u603b\u6570\u3002 \u53ea\u4f1a\u5728\u67e5\u8be2\u5305\u542b LIMIT \u6761\u4ef6\u65f6\u8f93\u51fa\u3002<br />\n\u82e5\u67e5\u8be2\u5305\u542b GROUP BY\uff0crows_before_limit_at_least \u5c31\u662f\u53bb\u6389 LIMIT \u540e\u8fc7\u6ee4\u540e\u7684\u51c6\u786e\u884c\u6570\u3002</p>\n<p><code>totals</code> \u2013 \u603b\u503c \uff08\u5f53\u4f7f\u7528 TOTALS \u6761\u4ef6\u65f6\uff09\u3002</p>\n<p><code>extremes</code> \u2013 \u6781\u503c \uff08\u5f53 extremes \u8bbe\u7f6e\u4e3a 1\u65f6\uff09\u3002</p>\n<p>\u8be5\u683c\u5f0f\u4ec5\u9002\u7528\u4e8e\u8f93\u51fa\u67e5\u8be2\u7ed3\u679c\uff0c\u4f46\u4e0d\u9002\u7528\u4e8e\u89e3\u6790\u8f93\u5165\uff08\u5c06\u6570\u636e\u63d2\u5165\u5230\u8868\u4e2d\uff09\u3002</p>\n<p>ClickHouse \u652f\u6301 <a href=\"#../query_language/syntax/\">NULL</a>, \u5728 JSON \u683c\u5f0f\u4e2d\u4ee5 <code>null</code> \u8f93\u51fa\u6765\u8868\u793a.</p>\n<p>\u53c2\u8003 JSONEachRow \u683c\u5f0f\u3002</p>\n<h3 id=\"jsoncompact\">JSONCompact<a class=\"headerlink\" href=\"#jsoncompact\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e JSON \u683c\u5f0f\u4e0d\u540c\u7684\u662f\u5b83\u4ee5\u6570\u7ec4\u7684\u65b9\u5f0f\u8f93\u51fa\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u4ee5\u7ed3\u6784\u4f53\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n        <span class=\"nt\">&quot;meta&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;SearchPhrase&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;String&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;c&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;UInt64&quot;</span>\n                <span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;data&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">[</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;8267016&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;bathroom interior design&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;2166&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;yandex&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;1655&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;fashion trends spring 2014&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;1549&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;freeform photo&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;1480&quot;</span><span class=\"p\">]</span>\n        <span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;totals&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"s2\">&quot;8873898&quot;</span><span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;extremes&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;min&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"s2\">&quot;1480&quot;</span><span class=\"p\">],</span>\n                <span class=\"nt\">&quot;max&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"s2\">&quot;8267016&quot;</span><span class=\"p\">]</span>\n        <span class=\"p\">},</span>\n\n        <span class=\"nt\">&quot;rows&quot;</span><span class=\"p\">:</span> <span class=\"mi\">5</span><span class=\"p\">,</span>\n\n        <span class=\"nt\">&quot;rows_before_limit_at_least&quot;</span><span class=\"p\">:</span> <span class=\"mi\">141137</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u79cd\u683c\u5f0f\u4ec5\u4ec5\u9002\u7528\u4e8e\u8f93\u51fa\u7ed3\u679c\u96c6\uff0c\u800c\u4e0d\u9002\u7528\u4e8e\u89e3\u6790\uff08\u5c06\u6570\u636e\u63d2\u5165\u5230\u8868\u4e2d\uff09\u3002<br />\n\u53c2\u8003 <code>JSONEachRow</code> \u683c\u5f0f\u3002</p>\n<h3 id=\"jsoneachrow\">JSONEachRow<a class=\"headerlink\" href=\"#jsoneachrow\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u6570\u636e\u7ed3\u679c\u6bcf\u4e00\u884c\u4ee5 JSON \u7ed3\u6784\u4f53\u8f93\u51fa\uff08\u6362\u884c\u5206\u5272 JSON \u7ed3\u6784\u4f53\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;8267016&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;bathroom interior design&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;2166&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;yandex&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1655&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;2014 spring fashion&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1549&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;freeform photo&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1480&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;angelina jolie&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1245&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;omsk&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1112&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">");
            
            document.write("{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;photos of dog breeds&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1091&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;curtain designs&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1064&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;baku&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1000&quot;</span><span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>\u4e0e JSON \u683c\u5f0f\u4e0d\u540c\u7684\u662f\uff0c\u6ca1\u6709\u66ff\u6362\u65e0\u6548\u7684UTF-8\u5e8f\u5217\u3002\u4efb\u4f55\u4e00\u7ec4\u5b57\u8282\u90fd\u53ef\u4ee5\u5728\u884c\u4e2d\u8f93\u51fa\u3002\u8fd9\u662f\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a\u8fd9\u6837\u6570\u636e\u53ef\u4ee5\u88ab\u683c\u5f0f\u5316\u800c\u4e0d\u4f1a\u4e22\u5931\u4efb\u4f55\u4fe1\u606f\u3002\u503c\u7684\u8f6c\u4e49\u65b9\u5f0f\u4e0eJSON\u76f8\u540c\u3002</p>\n<p>\u5bf9\u4e8e\u89e3\u6790\uff0c\u4efb\u4f55\u987a\u5e8f\u90fd\u652f\u6301\u4e0d\u540c\u5217\u7684\u503c\u3002\u53ef\u4ee5\u7701\u7565\u67d0\u4e9b\u503c - \u5b83\u4eec\u88ab\u89c6\u4e3a\u7b49\u4e8e\u5b83\u4eec\u7684\u9ed8\u8ba4\u503c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u96f6\u548c\u7a7a\u884c\u88ab\u7528\u4f5c\u9ed8\u8ba4\u503c\u3002 \u4f5c\u4e3a\u9ed8\u8ba4\u503c\uff0c\u4e0d\u652f\u6301\u8868\u4e2d\u6307\u5b9a\u7684\u590d\u6742\u503c\u3002\u5143\u7d20\u4e4b\u95f4\u7684\u7a7a\u767d\u5b57\u7b26\u88ab\u5ffd\u7565\u3002\u5982\u679c\u5728\u5bf9\u8c61\u4e4b\u540e\u653e\u7f6e\u9017\u53f7\uff0c\u5b83\u5c06\u88ab\u5ffd\u7565\u3002\u5bf9\u8c61\u4e0d\u4e00\u5b9a\u5fc5\u987b\u7528\u65b0\u884c\u5206\u9694\u3002</p>\n<h4 id=\"jsoneachrow-nested\">Usage of Nested Structures<a class=\"headerlink\" href=\"#jsoneachrow-nested\" title=\"Permanent link\">&para;</a></h4>\n<p>If you have a table with the <a href=\"#../data_types/nested_data_structures/nested/\">Nested</a> data type columns, you can insert JSON data having the same structure. Enable this functionality with the <a href=\"#settings-input_format_import_nested_json\">input_format_import_nested_json</a> setting.</p>\n<p>For example, consider the following table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">json_each_row_nested</span> <span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"n\">Nested</span> <span class=\"p\">(</span><span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">i</span> <span class=\"n\">Int32</span><span class=\"p\">)</span> <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span>\n</code></pre></div>\n\n\n<p>As you can find in the <code>Nested</code> data type description, ClickHouse treats each component of the nested structure as a separate column, <code>n.s</code> and <code>n.i</code> for our table. So you can insert the data the following way:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">json_each_row_nested</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSONEachRow</span> <span class=\"err\">{</span><span class=\"ss\">&quot;n.s&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"ss\">&quot;abc&quot;</span><span class=\"p\">,</span> <span class=\"ss\">&quot;def&quot;</span><span class=\"p\">],</span> <span class=\"ss\">&quot;n.i&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">]</span><span class=\"err\">}</span>\n</code></pre></div>\n\n\n<p>To insert data as hierarchical JSON object set <a href=\"#settings-input_format_import_nested_json\">input_format_import_nested_json=1</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n    <span class=\"nt\">&quot;n&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">&quot;s&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;abc&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;def&quot;</span><span class=\"p\">],</span>\n        <span class=\"nt\">&quot;i&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>Without this setting ClickHouse throws the exception.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">settings</span> <span class=\"k\">WHERE</span> <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;input_format_import_nested_json&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u2510\n\u2502 input_format_import_nested_json \u2502 0     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">json_each_row_nested</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSONEachRow</span> <span class=\"err\">{</span><span class=\"ss\">&quot;n&quot;</span><span class=\"p\">:</span> <span class=\"err\">{</span><span class=\"ss\">&quot;s&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"ss\">&quot;abc&quot;</span><span class=\"p\">,</span> <span class=\"ss\">&quot;def&quot;</span><span class=\"p\">],</span> <span class=\"ss\">&quot;i&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">]</span><span class=\"err\">}}</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Code: 117. DB::Exception: Unknown field found while parsing JSONEachRow format: n: (at row 1)\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">input_format_import_nested_json</span><span class=\"o\">=</span><span class=\"mi\">1</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">json_each_row_nested</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSONEachRow</span> <span class=\"err\">{</span><span class=\"ss\">&quot;n&quot;</span><span class=\"p\">:</span> <span class=\"err\">{</span><span class=\"ss\">&quot;s&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"ss\">&quot;abc&quot;</span><span class=\"p\">,</span> <span class=\"ss\">&quot;def&quot;</span><span class=\"p\">],</span> <span class=\"ss\">&quot;i&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">]</span><span class=\"err\">}}</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">json_each_row_nested</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500n.s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500n.i\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;abc&#39;,&#39;def&#39;] \u2502 [1,23] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"native\">Native<a class=\"headerlink\" href=\"#native\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6700\u9ad8\u6027\u80fd\u7684\u683c\u5f0f\u3002 \u636e\u901a\u8fc7\u4e8c\u8fdb\u5236\u683c\u5f0f\u7684\u5757\u8fdb\u884c\u5199\u5165\u548c\u8bfb\u53d6\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u5757\uff0c\u8be5\u5757\u4e2d\u7684\u884c\u6570\uff0c\u5217\u6570\uff0c\u5217\u540d\u79f0\u548c\u7c7b\u578b\u4ee5\u53ca\u5217\u7684\u90e8\u5206\u5c06\u88ab\u76f8\u7ee7\u8bb0\u5f55\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u8fd9\u79cd\u683c\u5f0f\u662f \u201c\u5217\u5f0f\u201d\u7684 - \u5b83\u4e0d\u4f1a\u5c06\u5217\u8f6c\u6362\u4e3a\u884c\u3002 \u8fd9\u662f\u7528\u4e8e\u5728\u670d\u52a1\u5668\u4e4b\u95f4\u8fdb\u884c\u4ea4\u4e92\u7684\u672c\u5730\u754c\u9762\u4e2d\u4f7f\u7528\u7684\u683c\u5f0f\uff0c\u7528\u4e8e\u4f7f\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u548c C++ \u5ba2\u6237\u7aef\u3002</p>\n<p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u683c\u5f0f\u5feb\u901f\u751f\u6210\u53ea\u80fd\u7531 ClickHouse DBMS \u8bfb\u53d6\u7684\u683c\u5f0f\u3002\u4f46\u81ea\u5df1\u5904\u7406\u8fd9\u79cd\u683c\u5f0f\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002</p>\n<h3 id=\"null\">Null<a class=\"headerlink\" href=\"#null\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6ca1\u6709\u8f93\u51fa\u3002\u4f46\u662f\uff0c\u67e5\u8be2\u5df2\u5904\u7406\u5b8c\u6bd5\uff0c\u5e76\u4e14\u5728\u4f7f\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u65f6\uff0c\u6570\u636e\u5c06\u4f20\u8f93\u5230\u5ba2\u6237\u7aef\u3002\u8fd9\u4ec5\u7528\u4e8e\u6d4b\u8bd5\uff0c\u5305\u62ec\u751f\u4ea7\u529b\u6d4b\u8bd5\u3002<br />\n\u663e\u7136\uff0c\u8fd9\u79cd\u683c\u5f0f\u53ea\u9002\u7528\u4e8e\u8f93\u51fa\uff0c\u4e0d\u9002\u7528\u4e8e\u89e3\u6790\u3002</p>\n<h3 id=\"pretty\">Pretty<a class=\"headerlink\" href=\"#pretty\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u6570\u636e\u4ee5\u8868\u683c\u5f62\u5f0f\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 ANSI \u8f6c\u4e49\u5b57\u7b26\u5728\u7ec8\u7aef\u4e2d\u8bbe\u7f6e\u989c\u8272\u3002<br />\n\u5b83\u4f1a\u7ed8\u5236\u4e00\u4e2a\u5b8c\u6574\u7684\u8868\u683c\uff0c\u6bcf\u884c\u6570\u636e\u5728\u7ec8\u7aef\u4e2d\u5360\u7528\u4e24\u884c\u3002<br />\n\u6bcf\u4e00\u4e2a\u7ed3\u679c\u5757\u90fd\u4f1a\u4ee5\u5355\u72ec\u7684\u8868\u683c\u8f93\u51fa\u3002\u8fd9\u662f\u5f88\u6709\u5fc5\u8981\u7684\uff0c\u4ee5\u4fbf\u7ed3\u679c\u5757\u4e0d\u7528\u7f13\u51b2\u7ed3\u679c\u8f93\u51fa\uff08\u7f13\u51b2\u5728\u53ef\u4ee5\u9884\u89c1\u7ed3\u679c\u96c6\u5bbd\u5ea6\u7684\u65f6\u5019\u662f\u5f88\u6709\u5fc5\u8981\u7684\uff09\u3002</p>\n<p><a href=\"#../query_language/syntax/\">NULL</a> \u8f93\u51fa\u4e3a <code>\u1d3a\u1d41\u1d38\u1d38</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4e3a\u907f\u514d\u5c06\u592a\u591a\u6570\u636e\u4f20\u8f93\u5230\u7ec8\u7aef\uff0c\u53ea\u6253\u5370\u524d10,000\u884c\u3002 \u5982\u679c\u884c\u6570\u5927\u4e8e\u6216\u7b49\u4e8e10,000\uff0c\u5219\u4f1a\u663e\u793a\u6d88\u606f\u201cShowed first 10 000\u201d\u3002<br />\n\u8be5\u683c\u5f0f\u4ec5\u9002\u7528\u4e8e\u8f93\u51fa\u67e5\u8be2\u7ed3\u679c\uff0c\u4f46\u4e0d\u9002\u7528\u4e8e\u89e3\u6790\u8f93\u5165\uff08\u5c06\u6570\u636e\u63d2\u5165\u5230\u8868\u4e2d\uff09\u3002</p>\n<p>Pretty\u683c\u5f0f\u652f\u6301\u8f93\u51fa\u603b\u503c\uff08\u5f53\u4f7f\u7528 WITH TOTALS \u65f6\uff09\u548c\u6781\u503c\uff08\u5f53 <code>extremes</code> \u8bbe\u7f6e\u4e3a1\u65f6\uff09\u3002 \u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u603b\u6570\u503c\u548c\u6781\u503c\u5728\u4e3b\u6570\u636e\u4e4b\u540e\u4ee5\u5355\u72ec\u7684\u8868\u683c\u5f62\u5f0f\u8f93\u51fa\u3002 \u793a\u4f8b\uff08\u4ee5 PrettyCompact \u683c\u5f0f\u663e\u793a\uff09\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"k\">WITH</span> <span class=\"n\">TOTALS</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"n\">FORMAT</span> <span class=\"n\">PrettyCompact</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500</span><span class=\"n\">EventDate</span><span class=\"err\">\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"k\">c</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">17</span> <span class=\"err\">\u2502</span> <span class=\"mi\">1406958</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">18</span> <span class=\"err\">\u2502</span> <span class=\"mi\">1383658</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">19</span> <span class=\"err\">\u2502</span> <span class=\"mi\">1405797</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"err\">\u2502</span> <span class=\"mi\">1353623</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">21</span> <span class=\"err\">\u2502</span> <span class=\"mi\">124");
            
            document.write("5779</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">22</span> <span class=\"err\">\u2502</span> <span class=\"mi\">1031592</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">23</span> <span class=\"err\">\u2502</span> <span class=\"mi\">1046491</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"n\">Totals</span><span class=\"p\">:</span>\n<span class=\"err\">\u250c\u2500\u2500</span><span class=\"n\">EventDate</span><span class=\"err\">\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"k\">c</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">0000</span><span class=\"o\">-</span><span class=\"mi\">00</span><span class=\"o\">-</span><span class=\"mi\">00</span> <span class=\"err\">\u2502</span> <span class=\"mi\">8873898</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"n\">Extremes</span><span class=\"p\">:</span>\n<span class=\"err\">\u250c\u2500\u2500</span><span class=\"n\">EventDate</span><span class=\"err\">\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"k\">c</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">17</span> <span class=\"err\">\u2502</span> <span class=\"mi\">1031592</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2014</span><span class=\"o\">-</span><span class=\"mi\">03</span><span class=\"o\">-</span><span class=\"mi\">23</span> <span class=\"err\">\u2502</span> <span class=\"mi\">1406958</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"prettycompact\">PrettyCompact<a class=\"headerlink\" href=\"#prettycompact\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e <code>Pretty</code> \u683c\u5f0f\u4e0d\u4e00\u6837\u7684\u662f\uff0c<code>PrettyCompact</code> \u53bb\u6389\u4e86\u884c\u4e4b\u95f4\u7684\u8868\u683c\u5206\u5272\u7ebf\uff0c\u8fd9\u6837\u4f7f\u5f97\u7ed3\u679c\u66f4\u52a0\u7d27\u51d1\u3002\u8fd9\u79cd\u683c\u5f0f\u4f1a\u5728\u4ea4\u4e92\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u4e0b\u9ed8\u8ba4\u4f7f\u7528\u3002</p>\n<h3 id=\"prettycompactmonoblock\">PrettyCompactMonoBlock<a class=\"headerlink\" href=\"#prettycompactmonoblock\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e <code>PrettyCompact</code> \u683c\u5f0f\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u5b83\u652f\u6301 10,000 \u884c\u6570\u636e\u7f13\u51b2\uff0c\u7136\u540e\u8f93\u51fa\u5728\u4e00\u4e2a\u8868\u683c\u4e2d\uff0c\u4e0d\u4f1a\u6309\u7167\u5757\u6765\u533a\u5206</p>\n<h3 id=\"prettynoescapes\">PrettyNoEscapes<a class=\"headerlink\" href=\"#prettynoescapes\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e <code>Pretty</code> \u683c\u5f0f\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u5b83\u4e0d\u4f7f\u7528 ANSI \u5b57\u7b26\u8f6c\u4e49\uff0c \u8fd9\u5728\u6d4f\u89c8\u5668\u663e\u793a\u6570\u636e\u4ee5\u53ca\u5728\u4f7f\u7528 <code>watch</code> \u547d\u4ee4\u884c\u5de5\u5177\u662f\u6709\u5fc5\u8981\u7684\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>watch -n1 <span class=\"s2\">&quot;clickhouse-client --query=&#39;SELECT event, value FROM system.events FORMAT PrettyCompactNoEscapes&#39;&quot;</span>\n</code></pre></div>\n\n\n<p>\u60a8\u53ef\u4ee5\u4f7f\u7528 HTTP \u63a5\u53e3\u6765\u83b7\u53d6\u6570\u636e\uff0c\u663e\u793a\u5728\u6d4f\u89c8\u5668\u4e2d\u3002</p>\n<h4 id=\"prettycompactnoescapes\">PrettyCompactNoEscapes<a class=\"headerlink\" href=\"#prettycompactnoescapes\" title=\"Permanent link\">&para;</a></h4>\n<p>\u7528\u6cd5\u7c7b\u4f3c\u4e0a\u8ff0\u3002</p>\n<h4 id=\"prettyspacenoescapes\">PrettySpaceNoEscapes<a class=\"headerlink\" href=\"#prettyspacenoescapes\" title=\"Permanent link\">&para;</a></h4>\n<p>\u7528\u6cd5\u7c7b\u4f3c\u4e0a\u8ff0\u3002</p>\n<h3 id=\"prettyspace\">PrettySpace<a class=\"headerlink\" href=\"#prettyspace\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e <code>PrettyCompact</code>(#prettycompact) \u683c\u5f0f\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u5b83\u4f7f\u7528\u7a7a\u683c\u6765\u4ee3\u66ff\u7f51\u683c\u6765\u663e\u793a\u6570\u636e\u3002</p>\n<h3 id=\"rowbinary\">RowBinary<a class=\"headerlink\" href=\"#rowbinary\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee5\u4e8c\u8fdb\u5236\u683c\u5f0f\u9010\u884c\u683c\u5f0f\u5316\u548c\u89e3\u6790\u6570\u636e\u3002\u884c\u548c\u503c\u8fde\u7eed\u5217\u51fa\uff0c\u6ca1\u6709\u5206\u9694\u7b26\u3002<br />\n\u8fd9\u79cd\u683c\u5f0f\u6bd4 Native \u683c\u5f0f\u6548\u7387\u4f4e\uff0c\u56e0\u4e3a\u5b83\u662f\u57fa\u4e8e\u884c\u7684\u3002</p>\n<p>\u6574\u6570\u4f7f\u7528\u56fa\u5b9a\u957f\u5ea6\u7684\u5c0f\u7aef\u8868\u793a\u6cd5\u3002 \u4f8b\u5982\uff0cUInt64 \u4f7f\u75288\u4e2a\u5b57\u8282\u3002<br />\nDateTime \u88ab\u8868\u793a\u4e3a UInt32 \u7c7b\u578b\u7684Unix \u65f6\u95f4\u6233\u503c\u3002<br />\nDate \u88ab\u8868\u793a\u4e3a UInt16 \u5bf9\u8c61\uff0c\u5b83\u7684\u503c\u4e3a 1970-01-01\u4ee5\u6765\u7684\u5929\u6570\u3002<br />\n\u5b57\u7b26\u4e32\u8868\u793a\u4e3a varint \u957f\u5ea6\uff08\u65e0\u7b26\u53f7 <a href=\"https://en.wikipedia.org/wiki/LEB128\" rel=\"external nofollow noreferrer\">LEB128</a>\uff09\uff0c\u540e\u8ddf\u5b57\u7b26\u4e32\u7684\u5b57\u8282\u6570\u3002<br />\nFixedString \u88ab\u7b80\u5355\u5730\u8868\u793a\u4e3a\u4e00\u4e2a\u5b57\u8282\u5e8f\u5217\u3002</p>\n<p>\u6570\u7ec4\u8868\u793a\u4e3a varint \u957f\u5ea6\uff08\u65e0\u7b26\u53f7 <a href=\"https://en.wikipedia.org/wiki/LEB128\" rel=\"external nofollow noreferrer\">LEB128</a>\uff09\uff0c\u540e\u8ddf\u6709\u5e8f\u7684\u6570\u7ec4\u5143\u7d20\u3002</p>\n<p>\u5bf9\u4e8e <a href=\"#null-literal\">NULL</a> \u7684\u652f\u6301\uff0c \u4e00\u4e2a\u4e3a 1 \u6216 0 \u7684\u5b57\u8282\u4f1a\u52a0\u5728\u6bcf\u4e2a <a href=\"#../data_types/nullable/\">Nullable</a> \u503c\u524d\u9762\u3002\u5982\u679c\u4e3a 1, \u90a3\u4e48\u8be5\u503c\u5c31\u662f <code>NULL</code>\u3002 \u5982\u679c\u4e3a 0\uff0c\u5219\u4e0d\u4e3a <code>NULL</code>\u3002</p>\n<h3 id=\"data-format-values\">Values<a class=\"headerlink\" href=\"#data-format-values\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u62ec\u53f7\u4e2d\u6253\u5370\u6bcf\u4e00\u884c\u3002\u884c\u7531\u9017\u53f7\u5206\u9694\u3002\u6700\u540e\u4e00\u884c\u4e4b\u540e\u6ca1\u6709\u9017\u53f7\u3002\u62ec\u53f7\u5185\u7684\u503c\u4e5f\u7528\u9017\u53f7\u5206\u9694\u3002\u6570\u5b57\u4ee5\u5341\u8fdb\u5236\u683c\u5f0f\u8f93\u51fa\uff0c\u4e0d\u542b\u5f15\u53f7\u3002 \u6570\u7ec4\u4ee5\u65b9\u62ec\u53f7\u8f93\u51fa\u3002\u5e26\u6709\u65f6\u95f4\u7684\u5b57\u7b26\u4e32\uff0c\u65e5\u671f\u548c\u65f6\u95f4\u7528\u5f15\u53f7\u5305\u56f4\u8f93\u51fa\u3002\u8f6c\u4e49\u5b57\u7b26\u7684\u89e3\u6790\u89c4\u5219\u4e0e <a href=\"#tabseparated\">TabSeparated</a> \u683c\u5f0f\u7c7b\u4f3c\u3002 \u5728\u683c\u5f0f\u5316\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u63d2\u5165\u989d\u5916\u7684\u7a7a\u683c\uff0c\u4f46\u5728\u89e3\u6790\u8fc7\u7a0b\u4e2d\uff0c\u7a7a\u683c\u662f\u88ab\u5141\u8bb8\u5e76\u8df3\u8fc7\u7684\uff08\u9664\u4e86\u6570\u7ec4\u503c\u4e4b\u5916\u7684\u7a7a\u683c\uff0c\u8fd9\u662f\u4e0d\u5141\u8bb8\u7684\uff09\u3002<a href=\"#../query_language/syntax/\">NULL</a> \u4e3a <code>NULL</code>\u3002</p>\n<p>\u4ee5 Values \u683c\u5f0f\u4f20\u9012\u6570\u636e\u65f6\u9700\u8981\u8f6c\u4e49\u7684\u6700\u5c0f\u5b57\u7b26\u96c6\u662f\uff1a\u5355\u5f15\u53f7\u548c\u53cd\u659c\u7ebf\u3002</p>\n<p>\u8fd9\u662f <code>INSERT INTO t VALUES ...</code> \u4e2d\u53ef\u4ee5\u4f7f\u7528\u7684\u683c\u5f0f\uff0c\u4f46\u60a8\u4e5f\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e\u67e5\u8be2\u7ed3\u679c\u3002</p>\n<h3 id=\"vertical\">Vertical<a class=\"headerlink\" href=\"#vertical\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u6307\u5b9a\u7684\u5217\u540d\u5728\u5355\u72ec\u7684\u884c\u4e0a\u6253\u5370\u6bcf\u4e2a\u503c\u3002\u5982\u679c\u6bcf\u884c\u90fd\u5305\u542b\u5927\u91cf\u5217\uff0c\u5219\u6b64\u683c\u5f0f\u4fbf\u4e8e\u6253\u5370\u4e00\u884c\u6216\u51e0\u884c\u3002</p>\n<p><a href=\"#../query_language/syntax/\">NULL</a> \u8f93\u51fa\u4e3a <code>\u1d3a\u1d41\u1d38\u1d38</code>\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"n\">FORMAT</span> <span class=\"n\">Vertical</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Row 1:</span>\n<span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500</span>\n<span class=\"c\">x: 1</span>\n<span class=\"c\">y: \u1d3a\u1d41\u1d38\u1d38</span>\n</code></pre></div>\n\n\n<p>\u8be5\u683c\u5f0f\u4ec5\u9002\u7528\u4e8e\u8f93\u51fa\u67e5\u8be2\u7ed3\u679c\uff0c\u4f46\u4e0d\u9002\u7528\u4e8e\u89e3\u6790\u8f93\u5165\uff08\u5c06\u6570\u636e\u63d2\u5165\u5230\u8868\u4e2d\uff09\u3002</p>\n<h3 id=\"verticalraw\">VerticalRaw<a class=\"headerlink\" href=\"#verticalraw\" title=\"Permanent link\">&para;</a></h3>\n<p>\u548c <code>Vertical</code> \u683c\u5f0f\u4e0d\u540c\u70b9\u5728\u4e8e\uff0c\u884c\u662f\u4e0d\u4f1a\u88ab\u8f6c\u4e49\u7684\u3002<br />\n\u8fd9\u79cd\u683c\u5f0f\u4ec5\u4ec5\u9002\u7528\u4e8e\u8f93\u51fa\uff0c\u4f46\u4e0d\u9002\u7528\u4e8e\u89e3\u6790\u8f93\u5165\uff08\u5c06\u6570\u636e\u63d2\u5165\u5230\u8868\u4e2d\uff09\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SHOW</span> <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">geonames</span> <span class=\"n\">FORMAT</span> <span class=\"n\">VerticalRaw</span><span class=\"p\">;</span>\n<span class=\"k\">Row</span> <span class=\"mi\">1</span><span class=\"p\">:</span>\n<span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500</span>\n<span class=\"k\">statement</span><span class=\"p\">:</span> <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">default</span><span class=\"p\">.</span><span class=\"n\">geonames</span> <span class=\"p\">(</span> <span class=\"n\">geonameid</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span> <span class=\"nb\">date</span> <span class=\"nb\">Date</span> <span class=\"k\">DEFAULT</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2017-12-08&#39;</span> <span class=\"k\">AS</span> <span class=\"nb\">Date</span><span class=\"p\">))</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">geonameid</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"s1\">&#39;string with \\&#39;</span><span class=\"n\">quotes</span><span class=\"err\">\\</span><span class=\"s1\">&#39; and \\t with some special \\n characters&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">test</span> <span class=\"n\">FORMAT</span> <span class=\"n\">VerticalRaw</span><span class=\"p\">;</span>\n<span class=\"k\">Row</span> <span class=\"mi\">1</span><span class=\"p\">:</span>\n<span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500</span>\n<span class=\"n\">test</span><span class=\"p\">:</span> <span class=\"n\">string</span> <span class=\"k\">with</span> <span class=\"s1\">&#39;quotes&#39;</span> <span class=\"k\">and</span>   <span class=\"k\">with</span> <span class=\"k\">some</span> <span class=\"n\">special</span>\n <span class=\"n\">characters</span>\n</code></pre></div>\n\n\n<p>\u548c Vertical \u683c\u5f0f\u76f8\u6bd4\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">:) SELECT &#39;string with \\&#39;quotes\\&#39; and \\t with some special \\n characters&#39; AS test FORMAT Vertical;</span>\n<span class=\"err\">Row 1:</span>\n<span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500</span>\n<span class=\"c\">test: string with \\&#39;quotes\\&#39; and \\t with some special \\n characters</span>\n</code></pre></div>\n\n\n<h3 id=\"xml\">XML<a class=\"headerlink\" href=\"#xml\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8be5\u683c\u5f0f\u4ec5\u9002\u7528\u4e8e\u8f93\u51fa\u67e5\u8be2\u7ed3\u679c\uff0c\u4f46\u4e0d\u9002\u7528\u4e8e\u89e3\u6790\u8f93\u5165\uff0c\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cp\">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt;</span>\n<span class=\"nt\">&lt;result&gt;</span>\n        <span class=\"nt\">&lt;meta&gt;</span>\n                <span class=\"nt\">&lt;columns&gt;</span>\n                        <span class=\"nt\">&lt;column&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>SearchPhrase<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n                        <span class=\"nt\">&lt;/column&gt;</span>\n                        <span class=\"nt\">&lt;column&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>count()<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>UInt64<span class=\"nt\">&lt;/type&gt;</span>\n                        <span class=\"nt\">&lt;/column&gt;</span>\n                <span class=\"nt\">&lt;/columns&gt;</span>\n        <span class=\"nt\">&lt;/meta&gt;</span>\n        <span class=\"nt\">&lt;data&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>8267016<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>bathroom interior design<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>2166<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>yandex<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1655<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt");
            
            document.write(";</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>2014 spring fashion<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1549<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>freeform photos<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1480<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>angelina jolie<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1245<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>omsk<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1112<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>photos of dog breeds<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1091<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>curtain designs<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1064<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>baku<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1000<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n        <span class=\"nt\">&lt;/data&gt;</span>\n        <span class=\"nt\">&lt;rows&gt;</span>10<span class=\"nt\">&lt;/rows&gt;</span>\n        <span class=\"nt\">&lt;rows_before_limit_at_least&gt;</span>141137<span class=\"nt\">&lt;/rows_before_limit_at_least&gt;</span>\n<span class=\"nt\">&lt;/result&gt;</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u5217\u540d\u79f0\u6ca1\u6709\u53ef\u63a5\u53d7\u7684\u683c\u5f0f\uff0c\u5219\u4ec5\u4f7f\u7528 <code>field</code> \u4f5c\u4e3a\u5143\u7d20\u540d\u79f0\u3002 \u901a\u5e38\uff0cXML \u7ed3\u6784\u9075\u5faa JSON \u7ed3\u6784\u3002<br />\n\u5c31\u50cfJSON\u4e00\u6837\uff0c\u5c06\u65e0\u6548\u7684 UTF-8 \u5b57\u7b26\u90fd\u4f5c\u66ff\u6362\uff0c\u4ee5\u4fbf\u8f93\u51fa\u6587\u672c\u5c06\u5305\u542b\u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u5e8f\u5217\u3002</p>\n<p>\u5728\u5b57\u7b26\u4e32\u503c\u4e2d\uff0c\u5b57\u7b26 <code>&lt;</code> \u548c <code>\uff06</code> \u88ab\u8f6c\u4e49\u4e3a <code>&lt;</code> \u548c <code>\uff06</code>\u3002</p>\n<p>\u6570\u7ec4\u8f93\u51fa\u4e3a <code>&lt;array&gt; &lt;elem&gt; Hello &lt;/ elem&gt; &lt;elem&gt; World &lt;/ elem&gt; ... &lt;/ array&gt;</code>\uff0c\u5143\u7ec4\u8f93\u51fa\u4e3a <code>&lt;tuple&gt; &lt;elem&gt; Hello &lt;/ elem&gt; &lt;elem&gt; World &lt;/ ELEM&gt; ... &lt;/tuple&gt;</code> \u3002</p>\n<h3 id=\"capnproto\">CapnProto<a class=\"headerlink\" href=\"#capnproto\" title=\"Permanent link\">&para;</a></h3>\n<p>Cap'n Proto \u662f\u4e00\u79cd\u4e8c\u8fdb\u5236\u6d88\u606f\u683c\u5f0f\uff0c\u7c7b\u4f3c Protocol Buffers \u548c Thriftis\uff0c\u4f46\u4e0e JSON \u6216 MessagePack \u683c\u5f0f\u4e0d\u4e00\u6837\u3002</p>\n<p>Cap'n Proto \u6d88\u606f\u683c\u5f0f\u662f\u4e25\u683c\u7c7b\u578b\u7684\uff0c\u800c\u4e0d\u662f\u81ea\u6211\u63cf\u8ff0\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u4e0d\u9700\u8981\u5916\u90e8\u7684\u63cf\u8ff0\u3002\u8fd9\u79cd\u683c\u5f0f\u53ef\u4ee5\u5b9e\u65f6\u5730\u5e94\u7528\uff0c\u5e76\u9488\u5bf9\u6bcf\u4e2a\u67e5\u8be2\u8fdb\u884c\u7f13\u5b58\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">SearchPhrase</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n       <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">SearchPhrase</span> <span class=\"n\">FORMAT</span> <span class=\"n\">CapnProto</span> <span class=\"n\">SETTINGS</span> <span class=\"k\">schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;schema:Message&#39;</span>\n</code></pre></div>\n\n\n<p>\u5176\u4e2d <code>schema.capnp</code> \u63cf\u8ff0\u5982\u4e0b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">struct</span> <span class=\"n\">Message</span> <span class=\"p\">{</span>\n  <span class=\"n\">SearchPhrase</span> <span class=\"mi\">@0</span> <span class=\"o\">:</span><span class=\"n\">Text</span><span class=\"p\">;</span>\n  <span class=\"n\">c</span> <span class=\"mi\">@1</span> <span class=\"o\">:</span><span class=\"n\">Uint64</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>\u683c\u5f0f\u6587\u4ef6\u5b58\u50a8\u7684\u76ee\u5f55\u53ef\u4ee5\u5728\u670d\u52a1\u914d\u7f6e\u4e2d\u7684 <a href=\"#../operations/server_settings/settings/\"> format_schema_path </a> \u6307\u5b9a\u3002</p>\n<p>Cap'n Proto \u53cd\u5e8f\u5217\u5316\u662f\u5f88\u9ad8\u6548\u7684\uff0c\u901a\u5e38\u4e0d\u4f1a\u589e\u52a0\u7cfb\u7edf\u7684\u8d1f\u8f7d\u3002</p>\n<p><a name=\"../../../../../interfaces/jdbc/\"></a><a name=\"interfaces/jdbc/\"></a><a name=\"jdbc/\"></a><a name=\"../../../interfaces/jdbc/\"></a><a name=\"../../interfaces/jdbc/\"></a><a name=\"../../../../interfaces/jdbc/\"></a><a name=\"../interfaces/jdbc/\"></a></p>\n<h2 id=\"jdbc-qu-dong\">JDBC \u9a71\u52a8<a class=\"headerlink\" href=\"#jdbc-qu-dong\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><strong><a href=\"https://github.com/ClickHouse/clickhouse-jdbc\" rel=\"external nofollow noreferrer\">\u5b98\u65b9JDBC \u7684\u9a71\u52a8</a></strong></li>\n<li>\u4e09\u65b9\u63d0\u4f9b\u7684 JDBC \u9a71\u52a8:</li>\n<li><a href=\"https://github.com/housepower/ClickHouse-Native-JDBC\" rel=\"external nofollow noreferrer\">ClickHouse-Native-JDBC</a></li>\n<li><a href=\"https://github.com/blynkkk/clickhouse4j\" rel=\"external nofollow noreferrer\">clickhouse4j</a></li>\n</ul>\n<p><a name=\"../../../interfaces/odbc/\"></a><a name=\"odbc/\"></a><a name=\"../interfaces/odbc/\"></a><a name=\"interfaces/odbc/\"></a><a name=\"../../../../../interfaces/odbc/\"></a><a name=\"../../../../interfaces/odbc/\"></a><a name=\"../../interfaces/odbc/\"></a></p>\n<h2 id=\"odbc-qu-dong\">ODBC \u9a71\u52a8<a class=\"headerlink\" href=\"#odbc-qu-dong\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li>ClickHouse\u5b98\u65b9\u6709 ODBC \u7684\u9a71\u52a8\u3002 \u89c1 <a href=\"https://github.com/ClickHouse/clickhouse-odbc\" rel=\"external nofollow noreferrer\">\u8fd9\u91cc</a>\u3002</li>\n</ul>\n<p><a name=\"../../interfaces/cpp/\"></a><a name=\"cpp/\"></a><a name=\"interfaces/cpp/\"></a><a name=\"../../../../../interfaces/cpp/\"></a><a name=\"../interfaces/cpp/\"></a><a name=\"../../../interfaces/cpp/\"></a><a name=\"../../../../interfaces/cpp/\"></a></p>\n<h2 id=\"c-ke-hu-duan-ku\">C ++\u5ba2\u6237\u7aef\u5e93<a class=\"headerlink\" href=\"#c-ke-hu-duan-ku\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8bf7\u53c2\u9605\u4ee5\u4e0b\u7f51\u7ad9\u7684\u81ea\u8ff0\u6587\u4ef6<a href=\"https://github.com/ClickHouse/clickhouse-cpp\" rel=\"external nofollow noreferrer\">clickhouse-cpp</a>\u8d44\u6599\u5e93\u3002</p>\n<p><a name=\"../../../../interfaces/third-party/client_libraries/\"></a><a name=\"../../../../../third-party/client_libraries/\"></a><a name=\"../../third-party/client_libraries/\"></a><a name=\"../../../third-party/client_libraries/\"></a><a name=\"../../../../third-party/client_libraries/\"></a><a name=\"../third-party/client_libraries/\"></a><a name=\"../../../../../../third-party/client_libraries/\"></a><a name=\"client_libraries/\"></a><a name=\"../../interfaces/third-party/client_libraries/\"></a><a name=\"../../../../../interfaces/third-party/client_libraries/\"></a><a name=\"interfaces/third-party/client_libraries/\"></a><a name=\"../interfaces/third-party/client_libraries/\"></a><a name=\"../../../interfaces/third-party/client_libraries/\"></a><a name=\"third-party/client_libraries/\"></a></p>\n<h2 id=\"di-san-fang-kai-fa-de-ku\">\u7b2c\u4e09\u65b9\u5f00\u53d1\u7684\u5e93<a class=\"headerlink\" href=\"#di-san-fang-kai-fa-de-ku\" title=\"Permanent link\">&para;</a></h2>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">\u653e\u5f03</p>\n<p>Yandex\u4e0d\u7ef4\u62a4\u4e0b\u9762\u5217\u51fa\u7684\u5e93\uff0c\u4e5f\u6ca1\u6709\u8fdb\u884c\u4efb\u4f55\u5e7f\u6cdb\u7684\u6d4b\u8bd5\u4ee5\u786e\u4fdd\u5176\u8d28\u91cf\u3002</p>\n</div>\n<ul>\n<li>Python<ul>\n<li><a href=\"https://github.com/Infinidat/infi.clickhouse_orm\" rel=\"external nofollow noreferrer\">infi.clickhouse_orm</a></li>\n<li><a href=\"https://github.com/mymarilyn/clickhouse-driver\" rel=\"external nofollow noreferrer\">clickhouse-driver</a></li>\n<li><a href=\"https://github.com/yurial/clickhouse-client\" rel=\"external nofollow noreferrer\">clickhouse-client</a></li>\n</ul>\n</li>\n<li>PHP<ul>\n<li><a href=\"https://github.com/SeasX/SeasClick\" rel=\"external nofollow noreferrer\">SeasClick</a></li>\n<li><a href=\"https://github.com/smi2/phpClickHouse\" rel=\"external nofollow noreferrer\">phpClickHouse</a></li>\n<li><a href=\"https://github.com/8bitov/clickhouse-php-client\" rel=\"external nofollow noreferrer\">clickhouse-php-client</a></li>\n<li><a href=\"https://github.com/bozerkins/clickhouse-client\" rel=\"external nofollow noreferrer\">clickhouse-client</a></li>\n<li><a href=\"https://github.com/SevaCode/PhpClickHouseClient\" rel=\"external nofollow noreferrer\">PhpClickHouseClient</a></li>\n</ul>\n</li>\n<li>Go<ul>\n<li><a href=\"https://github.com/kshvakov/clickhouse/\" rel=\"external nofollow noreferrer\">clickhouse</a></li>\n<li><a href=\"https://github.com/roistat/go-clickhouse\" rel=\"external nofollow noreferrer\">go-clickhouse</a></li>\n<li><a href=\"https://github.com/mailru/go-clickhouse\" rel=\"external nofollow noreferrer\">mailrugo-clickhouse</a></li>\n<li><a href=\"https://github.com/leprosus/golang-clickhouse\" rel=\"external nofollow noreferrer\">golang-clickhouse</a></li>\n</ul>\n</li>\n<li>NodeJs<ul>\n<li><a href=\"https://github.com/TimonKK/clickhouse\" rel=\"external nofollow noreferrer\">clickhouse (NodeJs)</a></li>\n<li><a href=\"https://github.com/apla/node-clickhouse\" rel=\"external nofollow noreferrer\">node-clickhouse</a></li>\n</ul>\n</li>\n<li>Perl<ul>\n<li><a href=\"https://github.com/elcamlost/perl-DBD-ClickHouse\" rel=\"external nofollow noreferrer\">perl-DBD-ClickHouse</a></li>\n<li><a href=\"https://metacpan.org/release/HTTP-ClickHouse\" rel=\"external nofollow noreferrer\">HTTP-ClickHouse</a></li>\n<li><a href=\"https://metacpan.org/release/AnyEvent-ClickHouse\" rel=\"external nofollow noreferrer\">AnyEvent-ClickHouse</a></li>\n</ul>\n</li>\n<li>Ruby<ul>\n<li><a href=\"https://github.com/archan937/clickhouse\" rel=\"external nofollow noreferrer\">clickhouse (Ruby)</a></li>\n</ul>\n</li>\n<li>R<ul>\n<li><a href=\"https://github.com/hannesmuehleisen/clickhouse-r\" rel=\"external nofollow noreferrer\">clickhouse-r</a></li>\n<li><a href=\"https://github.com/IMSMWU/RClickhouse\" rel=\"external nofollow noreferrer\">RClickhouse</a></li>\n</ul>\n</li>\n<li>Java<ul>\n<li><a href=\"https://github.com/VirtusAI/clickhouse-client-java\" rel=\"external nofollow noreferrer\">clickhouse-client-java</a></li>\n</ul>\n</li>\n<l");
            
            document.write("i>Scala<ul>\n<li><a href=\"https://github.com/crobox/clickhouse-scala-client\" rel=\"external nofollow noreferrer\">clickhouse-scala-client</a></li>\n</ul>\n</li>\n<li>Kotlin<ul>\n<li><a href=\"https://github.com/TanVD/AORM\" rel=\"external nofollow noreferrer\">AORM</a></li>\n</ul>\n</li>\n<li>C#<ul>\n<li><a href=\"https://github.com/killwort/ClickHouse-Net\" rel=\"external nofollow noreferrer\">ClickHouse.Ado</a></li>\n<li><a href=\"https://github.com/ilyabreev/ClickHouse.Net\" rel=\"external nofollow noreferrer\">ClickHouse.Net</a></li>\n</ul>\n</li>\n<li>Elixir<ul>\n<li><a href=\"https://github.com/appodeal/clickhousex/\" rel=\"external nofollow noreferrer\">clickhousex</a></li>\n</ul>\n</li>\n<li>Nim<ul>\n<li><a href=\"https://github.com/leonardoce/nim-clickhouse\" rel=\"external nofollow noreferrer\">nim-clickhouse</a></li>\n</ul>\n</li>\n</ul>\n<p><a name=\"../../../../../third-party/integrations/\"></a><a name=\"third-party/integrations/\"></a><a name=\"integrations/\"></a><a name=\"../../../interfaces/third-party/integrations/\"></a><a name=\"../../../../interfaces/third-party/integrations/\"></a><a name=\"../../../../../../third-party/integrations/\"></a><a name=\"../../interfaces/third-party/integrations/\"></a><a name=\"../../../third-party/integrations/\"></a><a name=\"../../../../third-party/integrations/\"></a><a name=\"interfaces/third-party/integrations/\"></a><a name=\"../interfaces/third-party/integrations/\"></a><a name=\"../../../../../interfaces/third-party/integrations/\"></a><a name=\"../third-party/integrations/\"></a><a name=\"../../third-party/integrations/\"></a></p>\n<h2 id=\"di-san-fang-ji-cheng-ku\">\u7b2c\u4e09\u65b9\u96c6\u6210\u5e93<a class=\"headerlink\" href=\"#di-san-fang-ji-cheng-ku\" title=\"Permanent link\">&para;</a></h2>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">\u58f0\u660e</p>\n<p>Yandex\u4e0d\u7ef4\u62a4\u4e0b\u9762\u5217\u51fa\u7684\u5e93\uff0c\u4e5f\u6ca1\u6709\u8fdb\u884c\u4efb\u4f55\u5e7f\u6cdb\u7684\u6d4b\u8bd5\u4ee5\u786e\u4fdd\u5176\u8d28\u91cf\u3002</p>\n</div>\n<h3 id=\"ji-jian-chan-pin\">\u57fa\u5efa\u4ea7\u54c1<a class=\"headerlink\" href=\"#ji-jian-chan-pin\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>\u5173\u7cfb\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf<ul>\n<li><a href=\"https://www.mysql.com\" rel=\"external nofollow noreferrer\">MySQL</a><ul>\n<li><a href=\"https://github.com/sysown/proxysql/wiki/ClickHouse-Support\" rel=\"external nofollow noreferrer\">ProxySQL</a></li>\n<li><a href=\"https://github.com/Altinity/clickhouse-mysql-data-reader\" rel=\"external nofollow noreferrer\">clickhouse-mysql-data-reader</a></li>\n<li><a href=\"https://github.com/larsnovikov/horgh-replicator\" rel=\"external nofollow noreferrer\">horgh-replicator</a></li>\n</ul>\n</li>\n<li><a href=\"https://www.postgresql.org\" rel=\"external nofollow noreferrer\">PostgreSQL</a><ul>\n<li><a href=\"https://github.com/Percona-Lab/clickhousedb_fdw\" rel=\"external nofollow noreferrer\">clickhousedb_fdw</a></li>\n<li><a href=\"https://github.com/Infinidat/infi.clickhouse_fdw\" rel=\"external nofollow noreferrer\">infi.clickhouse_fdw</a> (\u4f7f\u7528 <a href=\"https://github.com/Infinidat/infi.clickhouse_orm\" rel=\"external nofollow noreferrer\">infi.clickhouse_orm</a>)</li>\n<li><a href=\"https://github.com/mkabilov/pg2ch\" rel=\"external nofollow noreferrer\">pg2ch</a></li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Microsoft_SQL_Server\" rel=\"external nofollow noreferrer\">MSSQL</a><ul>\n<li><a href=\"https://github.com/zlzforever/ClickHouseMigrator\" rel=\"external nofollow noreferrer\">ClickHouseMightrator</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\u6d88\u606f\u961f\u5217<ul>\n<li><a href=\"https://kafka.apache.org\" rel=\"external nofollow noreferrer\">Kafka</a><ul>\n<li><a href=\"https://github.com/housepower/clickhouse_sinker\" rel=\"external nofollow noreferrer\">clickhouse_sinker</a> (\u4f7f\u7528 <a href=\"https://github.com/kshvakov/clickhouse/\" rel=\"external nofollow noreferrer\">Go client</a>)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\u5bf9\u8c61\u5b58\u50a8<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Amazon_S3\" rel=\"external nofollow noreferrer\">S3</a><ul>\n<li><a href=\"https://github.com/AlexAkulov/clickhouse-backup\" rel=\"external nofollow noreferrer\">clickhouse-backup</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\u5bb9\u5668\u7f16\u6392<ul>\n<li><a href=\"https://kubernetes.io\" rel=\"external nofollow noreferrer\">Kubernetes</a><ul>\n<li><a href=\"https://github.com/Altinity/clickhouse-operator\" rel=\"external nofollow noreferrer\">clickhouse-operator</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\u914d\u7f6e\u7ba1\u7406<ul>\n<li><a href=\"https://puppet.com\" rel=\"external nofollow noreferrer\">puppet</a><ul>\n<li><a href=\"https://forge.puppet.com/innogames/clickhouse\" rel=\"external nofollow noreferrer\">innogames/clickhouse</a></li>\n<li><a href=\"https://forge.puppet.com/mfedotov/clickhouse\" rel=\"external nofollow noreferrer\">mfedotov/clickhouse</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\u76d1\u63a7<ul>\n<li><a href=\"https://graphiteapp.org\" rel=\"external nofollow noreferrer\">Graphite</a><ul>\n<li><a href=\"https://github.com/yandex/graphouse\" rel=\"external nofollow noreferrer\">graphouse</a></li>\n<li><a href=\"https://github.com/lomik/carbon-clickhouse\" rel=\"external nofollow noreferrer\">carbon-clickhouse</a></li>\n</ul>\n</li>\n<li><a href=\"https://grafana.com/\" rel=\"external nofollow noreferrer\">Grafana</a><ul>\n<li><a href=\"https://github.com/Vertamedia/clickhouse-grafana\" rel=\"external nofollow noreferrer\">clickhouse-grafana</a></li>\n</ul>\n</li>\n<li><a href=\"https://prometheus.io/\" rel=\"external nofollow noreferrer\">Prometheus</a><ul>\n<li><a href=\"https://github.com/f1yegor/clickhouse_exporter\" rel=\"external nofollow noreferrer\">clickhouse_exporter</a></li>\n<li><a href=\"https://github.com/Percona-Lab/PromHouse\" rel=\"external nofollow noreferrer\">PromHouse</a></li>\n</ul>\n</li>\n<li><a href=\"https://www.nagios.org/\" rel=\"external nofollow noreferrer\">Nagios</a><ul>\n<li><a href=\"https://github.com/exogroup/check_clickhouse/\" rel=\"external nofollow noreferrer\">check_clickhouse</a></li>\n</ul>\n</li>\n<li><a href=\"https://www.zabbix.com\" rel=\"external nofollow noreferrer\">Zabbix</a><ul>\n<li><a href=\"https://github.com/Altinity/clickhouse-zabbix-template\" rel=\"external nofollow noreferrer\">clickhouse-zabbix-template</a></li>\n</ul>\n</li>\n<li><a href=\"https://sematext.com/\" rel=\"external nofollow noreferrer\">Sematext</a><ul>\n<li><a href=\"https://github.com/sematext/sematext-agent-integrations/tree/master/clickhouse\" rel=\"external nofollow noreferrer\">clickhouse\u79ef\u5206</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\u8bb0\u5f55<ul>\n<li><a href=\"https://www.rsyslog.com/\" rel=\"external nofollow noreferrer\">rsyslog</a><ul>\n<li><a href=\"https://www.rsyslog.com/doc/master/configuration/modules/omclickhouse.html\" rel=\"external nofollow noreferrer\">omclickhouse</a></li>\n</ul>\n</li>\n<li><a href=\"https://www.fluentd.org\" rel=\"external nofollow noreferrer\">fluentd</a><ul>\n<li><a href=\"https://github.com/flant/loghouse\" rel=\"external nofollow noreferrer\">loghouse</a> (\u5bf9\u4e8e <a href=\"https://kubernetes.io\" rel=\"external nofollow noreferrer\">Kubernetes</a>)</li>\n</ul>\n</li>\n<li><a href=\"https://www.sematext.com/logagent\" rel=\"external nofollow noreferrer\">logagent</a><ul>\n<li><a href=\"https://sematext.com/docs/logagent/output-plugin-clickhouse/\" rel=\"external nofollow noreferrer\">logagent output-plugin-clickhouse</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\u5730\u7406<ul>\n<li><a href=\"https://dev.maxmind.com/geoip/\" rel=\"external nofollow noreferrer\">MaxMind</a><ul>\n<li><a href=\"https://github.com/AlexeyKupershtokh/clickhouse-maxmind-geoip\" rel=\"external nofollow noreferrer\">clickhouse-maxmind-geoip</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"bian-cheng-yu-yan-sheng-tai-xi-tong\">\u7f16\u7a0b\u8bed\u8a00\u751f\u6001\u7cfb\u7edf<a class=\"headerlink\" href=\"#bian-cheng-yu-yan-sheng-tai-xi-tong\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Python<ul>\n<li><a href=\"https://www.sqlalchemy.org\" rel=\"external nofollow noreferrer\">SQLAlchemy</a><ul>\n<li><a href=\"https://github.com/cloudflare/sqlalchemy-clickhouse\" rel=\"external nofollow noreferrer\">sqlalchemy-clickhouse</a> (\u4f7f\u7528 <a href=\"https://github.com/Infinidat/infi.clickhouse_orm\" rel=\"external nofollow noreferrer\">infi.clickhouse_orm</a>)</li>\n</ul>\n</li>\n<li><a href=\"https://pandas.pydata.org\" rel=\"external nofollow noreferrer\">pandas</a><ul>\n<li><a href=\"https://github.com/kszucs/pandahouse\" rel=\"external nofollow noreferrer\">pandahouse</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>R<ul>\n<li><a href=\"https://db.rstudio.com/dplyr/\" rel=\"external nofollow noreferrer\">dplyr</a><ul>\n<li><a href=\"https://github.com/IMSMWU/RClickhouse\" rel=\"external nofollow noreferrer\">RClickhouse</a> (\u4f7f\u7528 <a href=\"https://github.com/artpaul/clickhouse-cpp\" rel=\"external nofollow noreferrer\">clickhouse-cpp</a>)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Java<ul>\n<li><a href=\"http://hadoop.apache.org\" rel=\"external nofollow noreferrer\">Hadoop</a><ul>\n<li><a href=\"https://github.com/jaykelin/clickhouse-hdfs-loader\" rel=\"external nofollow noreferrer\">clickhouse-hdfs-loader</a> (\u4f7f\u7528 <a href=\"#../../query_language/table_functions/jdbc/\">JDBC</a>)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Scala<ul>\n<li><a href=\"https://akka.io\" rel=\"external nofollow noreferrer\">Akka</a><ul>\n<li><a href=\"https://github.com/crobox/clickhouse-scala-client\" rel=\"external nofollow noreferrer\">clickhouse-scala-client</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>C#<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/ado-net-overview\" rel=\"external nofollow noreferrer\">ADO.NET</a><ul>\n<li><a href=\"https://github.com/killwort/ClickHouse-Net\" rel=\"external nofollow noreferrer\">ClickHouse.Ado</a></li>\n<li><a href=\"https://github.com/ilyabreev/ClickHouse.Net\" rel=\"external nofollow noreferrer\">ClickHouse.Net</a></li>\n<li><a href=\"https://github.com/ilyabreev/ClickHouse.Net.Migrations\" rel=\"external nofollow noreferrer\">ClickHouse.Net.Migrations</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Elixir<ul>\n<li><a href=\"https://github.com/elixir-ecto/ecto\" rel=\"external nofollow noreferrer\">Ecto</a><ul>\n<li><a href=\"https://github.com/appodeal/clickhouse_ecto\" rel=\"external nofollow noreferrer\">clickhouse_ecto</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a name=\"../../../../../../third-party/gui/\"></a><a name=\"../third-party/gui/\"></a><a name=\"../../../../../interfaces/third-party/gui/\"></a><a name=\"../../../../third-party/gui/\"></a><a name=\"../../third-party/gui/\"></a><a name=\"../../../interfaces/third-party/gui/\"></a><a name=\"../../interfaces/third-party/gui/\"></a><a name=\"../../../../interfaces/third-party/gui/\"></a><a name=\"third-party/gui/\"></a><a name=\"../../../../../third-party/gui/\"></a><a name=\"../interfaces/third-party/gui/\"></a><a name=\"gui/\"></a");
            
            document.write("><a name=\"interfaces/third-party/gui/\"></a><a name=\"../../../third-party/gui/\"></a></p>\n<h2 id=\"di-san-fang-kai-fa-de-ke-shi-hua-jie-mian\">\u7b2c\u4e09\u65b9\u5f00\u53d1\u7684\u53ef\u89c6\u5316\u754c\u9762<a class=\"headerlink\" href=\"#di-san-fang-kai-fa-de-ke-shi-hua-jie-mian\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"kai-yuan\">\u5f00\u6e90<a class=\"headerlink\" href=\"#kai-yuan\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"tabix\">Tabix<a class=\"headerlink\" href=\"#tabix\" title=\"Permanent link\">&para;</a></h4>\n<p>ClickHouse Web \u754c\u9762 <a href=\"https://github.com/tabixio/tabix\" rel=\"external nofollow noreferrer\">Tabix</a>.</p>\n<p>\u4e3b\u8981\u529f\u80fd\uff1a</p>\n<ul>\n<li>\u6d4f\u89c8\u5668\u76f4\u63a5\u8fde\u63a5 ClickHouse\uff0c\u4e0d\u9700\u8981\u5b89\u88c5\u5176\u4ed6\u8f6f\u4ef6\u3002</li>\n<li>\u9ad8\u4eae\u8bed\u6cd5\u7684\u7f16\u8f91\u5668\u3002</li>\n<li>\u81ea\u52a8\u547d\u4ee4\u8865\u5168\u3002</li>\n<li>\u67e5\u8be2\u547d\u4ee4\u6267\u884c\u7684\u56fe\u5f62\u5206\u6790\u5de5\u5177\u3002</li>\n<li>\u914d\u8272\u65b9\u6848\u9009\u9879\u3002</li>\n</ul>\n<p><a href=\"https://tabix.io/doc/\" rel=\"external nofollow noreferrer\">Tabix \u6587\u6863</a>.</p>\n<h4 id=\"houseops\">HouseOps<a class=\"headerlink\" href=\"#houseops\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://github.com/HouseOps/HouseOps\" rel=\"external nofollow noreferrer\">HouseOps</a> \u662f\u4e00\u4e2a\u4ea4\u4e92\u5f0f UI/IDE \u5de5\u5177\uff0c\u53ef\u4ee5\u8fd0\u884c\u5728 OSX, Linux and Windows \u5e73\u53f0\u4e2d\u3002</p>\n<p>\u4e3b\u8981\u529f\u80fd\uff1a</p>\n<ul>\n<li>\u67e5\u8be2\u9ad8\u4eae\u8bed\u6cd5\u63d0\u793a\uff0c\u53ef\u4ee5\u4ee5\u8868\u683c\u6216 JSON \u683c\u5f0f\u67e5\u770b\u6570\u636e\u3002</li>\n<li>\u652f\u6301\u5bfc\u51fa CSV \u6216 JSON \u683c\u5f0f\u6570\u636e\u3002</li>\n<li>\u652f\u6301\u67e5\u770b\u67e5\u8be2\u6267\u884c\u7684\u8be6\u60c5\uff0c\u652f\u6301 KILL \u67e5\u8be2\u3002</li>\n<li>\u56fe\u5f62\u5316\u663e\u793a\uff0c\u652f\u6301\u663e\u793a\u6570\u636e\u5e93\u4e2d\u6240\u6709\u7684\u8868\u548c\u5217\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</li>\n<li>\u5feb\u901f\u67e5\u770b\u5217\u5360\u7528\u7684\u7a7a\u95f4\u3002</li>\n<li>\u670d\u52a1\u914d\u7f6e\u3002</li>\n</ul>\n<p>\u4ee5\u4e0b\u529f\u80fd\u6b63\u5728\u8ba1\u5212\u5f00\u53d1\uff1a<br />\n- \u6570\u636e\u5e93\u7ba1\u7406<br />\n- \u7528\u6237\u7ba1\u7406<br />\n- \u5b9e\u65f6\u6570\u636e\u5206\u6790<br />\n- \u96c6\u7fa4\u76d1\u63a7<br />\n- \u96c6\u7fa4\u7ba1\u7406<br />\n- \u76d1\u63a7\u526f\u672c\u60c5\u51b5\u4ee5\u53ca Kafka \u5f15\u64ce\u8868</p>\n<h4 id=\"lighthouse\">LightHouse<a class=\"headerlink\" href=\"#lighthouse\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://github.com/VKCOM/lighthouse\" rel=\"external nofollow noreferrer\">LightHouse</a> \u662fClickHouse\u7684\u8f7b\u91cf\u7ea7Web\u754c\u9762\u3002</p>\n<p>\u7279\u5f81\uff1a</p>\n<ul>\n<li>\u5305\u542b\u8fc7\u6ee4\u548c\u5143\u6570\u636e\u7684\u8868\u5217\u8868\u3002</li>\n<li>\u5e26\u6709\u8fc7\u6ee4\u548c\u6392\u5e8f\u7684\u8868\u683c\u9884\u89c8\u3002</li>\n<li>\u53ea\u8bfb\u67e5\u8be2\u6267\u884c\u3002</li>\n</ul>\n<h4 id=\"dbeaver\">DBeaver<a class=\"headerlink\" href=\"#dbeaver\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://dbeaver.io/\" rel=\"external nofollow noreferrer\">DBeaver</a> \u5177\u6709ClickHouse\u652f\u6301\u7684\u901a\u7528\u684c\u9762\u6570\u636e\u5e93\u5ba2\u6237\u7aef\u3002</p>\n<p>\u7279\u5f81\uff1a</p>\n<ul>\n<li>\u4f7f\u7528\u8bed\u6cd5\u9ad8\u4eae\u663e\u793a\u67e5\u8be2\u5f00\u53d1\u3002</li>\n<li>\u8868\u683c\u9884\u89c8\u3002</li>\n<li>\u81ea\u52a8\u5b8c\u6210\u3002</li>\n</ul>\n<h4 id=\"clickhouse-cli\">clickhouse-cli<a class=\"headerlink\" href=\"#clickhouse-cli\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://github.com/hatarist/clickhouse-cli\" rel=\"external nofollow noreferrer\">clickhouse-cli</a> \u662fClickHouse\u7684\u66ff\u4ee3\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\uff0c\u7528Python 3\u7f16\u5199\u3002</p>\n<p>\u7279\u5f81\uff1a<br />\n - \u81ea\u52a8\u5b8c\u6210\u3002<br />\n - \u67e5\u8be2\u548c\u6570\u636e\u8f93\u51fa\u7684\u8bed\u6cd5\u9ad8\u4eae\u663e\u793a\u3002<br />\n - \u5bfb\u547c\u673a\u652f\u6301\u6570\u636e\u8f93\u51fa\u3002<br />\n - \u81ea\u5b9a\u4e49PostgreSQL\u7c7b\u547d\u4ee4\u3002</p>\n<h4 id=\"clickhouse-flamegraph\">clickhouse-flamegraph<a class=\"headerlink\" href=\"#clickhouse-flamegraph\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://github.com/Slach/clickhouse-flamegraph\" rel=\"external nofollow noreferrer\">clickhouse-flamegraph</a> \u662f\u4e00\u4e2a\u53ef\u89c6\u5316\u7684\u4e13\u4e1a\u5de5\u5177<code>system.trace_log</code>\u5982<a href=\"http://www.brendangregg.com/flamegraphs.html\" rel=\"external nofollow noreferrer\">flamegraph</a>.</p>\n<h3 id=\"shang-ye\">\u5546\u4e1a<a class=\"headerlink\" href=\"#shang-ye\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"datagrip\">DataGrip<a class=\"headerlink\" href=\"#datagrip\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://www.jetbrains.com/datagrip/\" rel=\"external nofollow noreferrer\">DataGrip</a> \u662fJetBrains\u7684\u6570\u636e\u5e93IDE\uff0c\u4e13\u95e8\u652f\u6301ClickHouse\u3002 \u5b83\u8fd8\u5d4c\u5165\u5230\u5176\u4ed6\u57fa\u4e8eIntelliJ\u7684\u5de5\u5177\u4e2d\uff1aPyCharm\uff0cIntelliJ IDEA\uff0cGoLand\uff0cPhpStorm\u7b49\u3002</p>\n<p>\u7279\u5f81\uff1a</p>\n<ul>\n<li>\u975e\u5e38\u5feb\u901f\u7684\u4ee3\u7801\u5b8c\u6210\u3002</li>\n<li>ClickHouse\u8bed\u6cd5\u9ad8\u4eae\u663e\u793a\u3002</li>\n<li>\u652f\u6301ClickHouse\u7279\u6709\u7684\u529f\u80fd\uff0c\u4f8b\u5982\u5d4c\u5957\u5217\uff0c\u8868\u5f15\u64ce\u3002</li>\n<li>\u6570\u636e\u7f16\u8f91\u5668\u3002</li>\n<li>\u91cd\u6784\u3002</li>\n<li>\u641c\u7d22\u548c\u5bfc\u822a\u3002</li>\n</ul>\n<p><a name=\"third-party/proxy/\"></a><a name=\"../../../../third-party/proxy/\"></a><a name=\"../../../../../third-party/proxy/\"></a><a name=\"../../third-party/proxy/\"></a><a name=\"../third-party/proxy/\"></a><a name=\"../../../third-party/proxy/\"></a><a name=\"../../../interfaces/third-party/proxy/\"></a><a name=\"../../../../../../third-party/proxy/\"></a><a name=\"../../interfaces/third-party/proxy/\"></a><a name=\"interfaces/third-party/proxy/\"></a><a name=\"../../../../../interfaces/third-party/proxy/\"></a><a name=\"../interfaces/third-party/proxy/\"></a><a name=\"../../../../interfaces/third-party/proxy/\"></a><a name=\"proxy/\"></a></p>\n<h2 id=\"lai-zi-di-san-fang-kai-fa-ren-yuan-de-dai-li-fu-wu-qi\">\u6765\u81ea\u7b2c\u4e09\u65b9\u5f00\u53d1\u4eba\u5458\u7684\u4ee3\u7406\u670d\u52a1\u5668<a class=\"headerlink\" href=\"#lai-zi-di-san-fang-kai-fa-ren-yuan-de-dai-li-fu-wu-qi\" title=\"Permanent link\">&para;</a></h2>\n<p><a href=\"https://github.com/Vertamedia/chproxy\" rel=\"external nofollow noreferrer\">chproxy</a> \u662fClickHouse\u6570\u636e\u5e93\u7684http\u4ee3\u7406\u548c\u8d1f\u8f7d\u5747\u8861\u5668\u3002</p>\n<p>\u7279\u5f81</p>\n<p><em>\u6bcf\u7528\u6237\u8def\u7531\u548c\u54cd\u5e94\u7f13\u5b58\u3002<br />\n</em>\u7075\u6d3b\u7684\u9650\u5236\u3002<br />\n*\u81ea\u52a8SSL\u8bc1\u4e66\u7eed\u8ba2\u3002</p>\n<p>\u5728Go\u4e2d\u5b9e\u73b0\u3002</p>\n<h3 id=\"kittenhouse\">KittenHouse<a class=\"headerlink\" href=\"#kittenhouse\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"https://github.com/VKCOM/kittenhouse\" rel=\"external nofollow noreferrer\">KittenHouse</a> \u8bbe\u8ba1\u4e3aClickHouse\u548c\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u672c\u5730\u4ee3\u7406\uff0c\u4ee5\u9632\u5728\u5e94\u7528\u7a0b\u5e8f\u7aef\u7f13\u51b2INSERT\u6570\u636e\u662f\u4e0d\u53ef\u80fd\u6216\u4e0d\u65b9\u4fbf\u7684\u3002</p>\n<p>\u7279\u5f81\uff1a</p>\n<p><em>\u5185\u5b58\u548c\u78c1\u76d8\u6570\u636e\u7f13\u51b2\u3002<br />\n</em>\u6bcf\u8868\u8def\u7531\u3002<br />\n*\u8d1f\u8f7d\u5e73\u8861\u548c\u5065\u5eb7\u68c0\u67e5\u3002</p>\n<p>\u5728Go\u4e2d\u5b9e\u73b0\u3002</p>\n<h3 id=\"clickhouse-bulk\">ClickHouse-Bulk<a class=\"headerlink\" href=\"#clickhouse-bulk\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"https://github.com/nikepan/clickhouse-bulk\" rel=\"external nofollow noreferrer\">ClickHouse-Bulk</a> \u662f\u4e00\u4e2a\u7b80\u5355\u7684ClickHouse\u63d2\u5165\u6536\u96c6\u5668\u3002</p>\n<p>\u7279\u5f81\uff1a</p>\n<p><em>\u5206\u7ec4\u8bf7\u6c42\u5e76\u6309\u9608\u503c\u6216\u95f4\u9694\u53d1\u9001\u3002<br />\n</em>\u591a\u4e2a\u8fdc\u7a0b\u670d\u52a1\u5668\u3002<br />\n*\u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\u3002</p>\n<p>\u5728Go\u4e2d\u5b9e\u73b0\u3002</p>\n<p><a name=\"data_types/\"></a><a name=\"../../../../data_types/\"></a><a name=\"../../data_types/\"></a><a name=\"../../../../../data_types/\"></a><a name=\"../../../data_types/\"></a><a name=\"../data_types/\"></a></p>\n<h2 id=\"data_types\">\u6570\u636e\u7c7b\u578b<a class=\"headerlink\" href=\"#data_types\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse \u53ef\u4ee5\u5728\u6570\u636e\u8868\u4e2d\u5b58\u50a8\u591a\u79cd\u6570\u636e\u7c7b\u578b\u3002</p>\n<p>\u672c\u8282\u63cf\u8ff0 ClickHouse \u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4ee5\u53ca\u4f7f\u7528\u6216\u8005\u5b9e\u73b0\u5b83\u4eec\u65f6\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u7684\u6ce8\u610f\u4e8b\u9879\u3002<br />\n<a name=\"int_uint/\"></a><a name=\"../../../../../data_types/int_uint/\"></a><a name=\"data_types/int_uint/\"></a><a name=\"../data_types/int_uint/\"></a><a name=\"../../data_types/int_uint/\"></a><a name=\"../../../data_types/int_uint/\"></a><a name=\"../../../../data_types/int_uint/\"></a></p>\n<h2 id=\"uint8-uint16-uint32-uint64-int8-int16-int32-int64\">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64<a class=\"headerlink\" href=\"#uint8-uint16-uint32-uint64-int8-int16-int32-int64\" title=\"Permanent link\">&para;</a></h2>\n<p>\u56fa\u5b9a\u957f\u5ea6\u7684\u6574\u578b\uff0c\u5305\u62ec\u6709\u7b26\u53f7\u6574\u578b\u6216\u65e0\u7b26\u53f7\u6574\u578b\u3002</p>\n<h3 id=\"zheng-xing-fan-wei\">\u6574\u578b\u8303\u56f4<a class=\"headerlink\" href=\"#zheng-xing-fan-wei\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Int8 - [-128 : 127]</li>\n<li>Int16 - [-32768 : 32767]</li>\n<li>Int32 - [-2147483648 : 2147483647]</li>\n<li>Int64 - [-9223372036854775808 : 9223372036854775807]</li>\n</ul>\n<h3 id=\"wu-fu-hao-zheng-xing-fan-wei\">\u65e0\u7b26\u53f7\u6574\u578b\u8303\u56f4<a class=\"headerlink\" href=\"#wu-fu-hao-zheng-xing-fan-wei\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>UInt8 - [0 : 255]</li>\n<li>UInt16 - [0 : 65535]</li>\n<li>UInt32 - [0 : 4294967295]</li>\n<li>UInt64 - [0 : 18446744073709551615]<br />\n<a name=\"../data_types/float/\"></a><a name=\"../../../../../data_types/float/\"></a><a name=\"../../../../data_types/float/\"></a><a name=\"../../../data_types/float/\"></a><a name=\"float/\"></a><a name=\"../../data_types/float/\"></a><a name=\"data_types/float/\"></a></li>\n</ul>\n<h2 id=\"float32-float64\">Float32, Float64<a class=\"headerlink\" href=\"#float32-float64\" title=\"Permanent link\">&para;</a></h2>\n<p><a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"external nofollow noreferrer\">\u6d6e\u70b9\u6570</a>\u3002</p>\n<p>\u7c7b\u578b\u4e0e\u4ee5\u4e0b C \u8bed\u8a00\u4e2d\u7c7b\u578b\u662f\u76f8\u540c\u7684\uff1a</p>\n<ul>\n<li><code>Float32</code> - <code>float</code></li>\n<li><code>Float64</code> - <code>double</code></li>\n</ul>\n<p>\u6211\u4eec\u5efa\u8bae\u60a8\u5c3d\u53ef\u80fd\u4ee5\u6574\u6570\u5f62\u5f0f\u5b58\u50a8\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5c06\u56fa\u5b9a\u7cbe\u5ea6\u7684\u6570\u5b57\u8f6c\u6362\u4e3a\u6574\u6570\u503c\uff0c\u4f8b\u5982\u8d27\u5e01\u6570\u91cf\u6216\u9875\u9762\u52a0\u8f7d\u65f6\u95f4\u7528\u6beb\u79d2\u4e3a\u5355\u4f4d\u8868\u793a</p>\n<h3 id=\"shi-yong-fu-dian-shu\">\u4f7f\u7528\u6d6e\u70b9\u6570<a class=\"headerlink\" href=\"#shi-yong-fu-dian-shu\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>\u5bf9\u6d6e\u70b9\u6570\u8fdb\u884c\u8ba1\u7b97\u53ef\u80fd\u5f15\u8d77\u56db\u820d\u4e94\u5165\u7684\u8bef\u5dee\u3002</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"mi\">1</span> <span class=\"o\">-</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">9</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500minus(1, 0.9)\u2500\u2510</span>\n<span class=\"err\">\u2502 0.09999999999999998 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<ul>\n<li>\n<p>\u8ba1\u7b97\u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\u8ba1\u7b97\u65b9\u6cd5\uff08\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5904\u7406\u5668\u7c7b\u578b\u548c\u4f53\u7cfb\u7ed3\u6784\uff09</p>\n</li>\n<li>\n<p>\u6d6e\u70b9\u8ba1\u7b97\u7ed3\u679c\u53ef\u80fd\u662f\u8bf8\u5982\u65e0\u7a77\u5927\uff08<code>INF</code>\uff09\u548c\"\u975e\u6570\u5b57\"\uff08<code>NaN</code>\uff09\u3002\u5bf9\u6d6e\u70b9\u6570\u8ba1\u7b97\u7684\u65f6\u5019\u5e94\u8be5\u8003\u8651\u5230\u8fd9\u70b9\u3002</p>\n</li>\n<li>\n<p>\u5f53\u4e00\u884c\u884c\u9605\u8bfb\u6d6e\u70b9\u6570\u7684\u65f6\u5019\uff0c\u6d6e\u70b9\u6570\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u662f\u673a\u5668\u6700\u8fd1\u663e\u793a\u7684\u6570\u503c\u3002</p>\n</li>\n</ul>\n<h3 id=\"data_type-float-nan-inf\">NaN and Inf<a class=\"headerlink\" href=\"#data_type-float-nan-inf\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e\u6807\u51c6SQL\u76f8\u6bd4\uff0cClickHouse \u652f\u6301\u4ee5\u4e0b\u7c7b\u522b\u7684\u6d6e\u70b9\u6570\uff1a</p>\n<ul>\n<li><code>Inf</code> \u2013 \u6b63\u65e0\u7a77</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span> <span class=\"o\">/</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500divide(0.5, 0)\u2500\u2510</span>\n<span class=\"err\">\u2502            inf \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<ul>\n<li><code>-Inf</code> \u2013 \u8d1f\u65e0\u7a77</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">-</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span> <span class=\"o\">/</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500divide(-0.5, 0)\u2500\u2510</span>\n<span class=\"err\">\u2502            -inf \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<ul>\n<li><code>NaN</code> \u2013 \u975e\u6570\u5b57</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT 0 / 0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500divide(0, 0)\u2500\u2510</span>\n<span class=\"err\">\u2502          nan \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u53ef\u4ee5\u5728 <a href=\"#../query_language/select/\">ORDER BY \u5b50\u53e5</a> \u67e5\u770b\u66f4\u591a\u5173\u4e8e <code>NaN</code> \u6392\u5e8f\u7684\u89c4\u5219\u3002<br />\n<a name=\"../../data_types/decimal/\"></a><a name=\"../../../data_types/decimal/\"></a><a name=\"../data_types/decimal/\"></a><a name=\"decimal/\"></a><a name=\"../../../../../data_types/decimal/\"></a><a name=\"data_types/decimal/\"></a><a name=\"../../../../data_types/decimal/\"></a></p>\n<h2 id=\"decimal-p-s-decimal32-s-decimal64-s-decimal128-s\">Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)<a class=\"headerlink\" href=\"#decimal-p-s-decimal32-s-decimal64-s-decimal128-s\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6709\u7b26\u53f7\u7684\u5b9a\u70b9\u6570\uff0c\u53ef\u5728\u52a0\u3001\u51cf\u548c\u4e58\u6cd5\u8fd0\u7b97\u8fc7\u7a0b");
            
            document.write("\u4e2d\u4fdd\u6301\u7cbe\u5ea6\u3002\u5bf9\u4e8e\u9664\u6cd5\uff0c\u6700\u4f4e\u6709\u6548\u6570\u5b57\u4f1a\u88ab\u4e22\u5f03\uff08\u4e0d\u820d\u5165\uff09\u3002</p>\n<h3 id=\"can-shu\">\u53c2\u6570<a class=\"headerlink\" href=\"#can-shu\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>P - \u7cbe\u5ea6\u3002\u6709\u6548\u8303\u56f4\uff1a[1:38]\uff0c\u51b3\u5b9a\u53ef\u4ee5\u6709\u591a\u5c11\u4e2a\u5341\u8fdb\u5236\u6570\u5b57\uff08\u5305\u62ec\u5206\u6570\uff09\u3002</li>\n<li>S - \u89c4\u6a21\u3002\u6709\u6548\u8303\u56f4\uff1a[0\uff1aP]\uff0c\u51b3\u5b9a\u6570\u5b57\u7684\u5c0f\u6570\u90e8\u5206\u4e2d\u5305\u542b\u7684\u5c0f\u6570\u4f4d\u6570\u3002</li>\n</ul>\n<p>\u5bf9\u4e8e\u4e0d\u540c\u7684 P \u53c2\u6570\u503c Decimal \u8868\u793a\uff0c\u4ee5\u4e0b\u4f8b\u5b50\u90fd\u662f\u540c\u4e49\u7684\uff1a<br />\n- P from [ 1 : 9 ] - for Decimal32(S)<br />\n- P from [ 10 : 18 ] - for Decimal64(S)<br />\n- P from [ 19 : 38 ] - for Decimal128(S)</p>\n<h3 id=\"shi-jin-zhi-zhi-fan-wei\">\u5341\u8fdb\u5236\u503c\u8303\u56f4<a class=\"headerlink\" href=\"#shi-jin-zhi-zhi-fan-wei\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Decimal32(S) - ( -1 * 10^(9 - S), 1 * 10^(9 - S) )</li>\n<li>Decimal64(S) - ( -1 * 10^(18 - S), 1 * 10^(18 - S) )</li>\n<li>Decimal128(S) - ( -1 * 10^(38 - S), 1 * 10^(38 - S) )</li>\n</ul>\n<p>\u4f8b\u5982\uff0cDecimal32(4) \u53ef\u4ee5\u8868\u793a -99999.9999 \u81f3 99999.9999 \u7684\u6570\u503c\uff0c\u6b65\u957f\u4e3a0.0001\u3002</p>\n<h3 id=\"nei-bu-biao-shi-fang-shi\">\u5185\u90e8\u8868\u793a\u65b9\u5f0f<a class=\"headerlink\" href=\"#nei-bu-biao-shi-fang-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6570\u636e\u91c7\u7528\u4e0e\u81ea\u8eab\u4f4d\u5bbd\u76f8\u540c\u7684\u6709\u7b26\u53f7\u6574\u6570\u5b58\u50a8\u3002\u8fd9\u4e2a\u6570\u5728\u5185\u5b58\u4e2d\u5b9e\u9645\u8303\u56f4\u4f1a\u9ad8\u4e8e\u4e0a\u8ff0\u8303\u56f4\uff0c\u4ece String \u8f6c\u6362\u5230\u5341\u8fdb\u5236\u6570\u7684\u65f6\u5019\u4f1a\u505a\u5bf9\u5e94\u7684\u68c0\u67e5\u3002</p>\n<p>\u7531\u4e8e\u73b0\u4ee3CPU\u4e0d\u652f\u6301128\u4f4d\u6570\u5b57\uff0c\u56e0\u6b64 Decimal128 \u4e0a\u7684\u64cd\u4f5c\u7531\u8f6f\u4ef6\u6a21\u62df\u3002\u6240\u4ee5 Decimal128 \u7684\u8fd0\u7b97\u901f\u5ea6\u660e\u663e\u6162\u4e8e Decimal32/Decimal64\u3002</p>\n<h3 id=\"yun-suan-he-jie-guo-lei-xing\">\u8fd0\u7b97\u548c\u7ed3\u679c\u7c7b\u578b<a class=\"headerlink\" href=\"#yun-suan-he-jie-guo-lei-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9Decimal\u7684\u4e8c\u8fdb\u5236\u8fd0\u7b97\u5bfc\u81f4\u66f4\u5bbd\u7684\u7ed3\u679c\u7c7b\u578b\uff08\u65e0\u8bba\u53c2\u6570\u7684\u987a\u5e8f\u5982\u4f55\uff09\u3002</p>\n<ul>\n<li>Decimal64(S1) <op> Decimal32(S2) -&gt; Decimal64(S)</li>\n<li>Decimal128(S1) <op> Decimal32(S2) -&gt; Decimal128(S)</li>\n<li>Decimal128(S1) <op> Decimal64(S2) -&gt; Decimal128(S)</li>\n</ul>\n<p>\u7cbe\u5ea6\u53d8\u5316\u7684\u89c4\u5219\uff1a</p>\n<ul>\n<li>\u52a0\u6cd5\uff0c\u51cf\u6cd5\uff1aS = max(S1, S2)\u3002</li>\n<li>\u4e58\u6cd5\uff1aS = S1 + S2\u3002</li>\n<li>\u9664\u6cd5\uff1aS = S1\u3002</li>\n</ul>\n<p>\u5bf9\u4e8e Decimal \u548c\u6574\u6570\u4e4b\u95f4\u7684\u7c7b\u4f3c\u64cd\u4f5c\uff0c\u7ed3\u679c\u662f\u4e0e\u53c2\u6570\u5927\u5c0f\u76f8\u540c\u7684\u5341\u8fdb\u5236\u3002</p>\n<p>\u672a\u5b9a\u4e49Decimal\u548cFloat32/Float64\u4e4b\u95f4\u7684\u51fd\u6570\u3002\u8981\u6267\u884c\u6b64\u7c7b\u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\uff1atoDecimal32\u3001toDecimal64\u3001toDecimal128 \u6216 toFloat32\uff0ctoFloat64\uff0c\u9700\u8981\u663e\u5f0f\u5730\u8f6c\u6362\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u3002\u6ce8\u610f\uff0c\u7ed3\u679c\u5c06\u5931\u53bb\u7cbe\u5ea6\uff0c\u7c7b\u578b\u8f6c\u6362\u662f\u6602\u8d35\u7684\u64cd\u4f5c\u3002</p>\n<p>Decimal\u4e0a\u7684\u4e00\u4e9b\u51fd\u6570\u8fd4\u56de\u7ed3\u679c\u4e3aFloat64\uff08\u4f8b\u5982\uff0cvar\u6216stddev\uff09\u3002\u5bf9\u4e8e\u5176\u4e2d\u4e00\u4e9b\uff0c\u4e2d\u95f4\u8ba1\u7b97\u53d1\u751f\u5728Decimal\u4e2d\u3002\u5bf9\u4e8e\u6b64\u7c7b\u51fd\u6570\uff0c\u5c3d\u7ba1\u7ed3\u679c\u7c7b\u578b\u76f8\u540c\uff0c\u4f46Float64\u548cDecimal\u4e2d\u76f8\u540c\u6570\u636e\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u540c\u3002</p>\n<h3 id=\"yi-chu-jian-cha\">\u6ea2\u51fa\u68c0\u67e5<a class=\"headerlink\" href=\"#yi-chu-jian-cha\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u5bf9 Decimal \u7c7b\u578b\u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u6570\u503c\u53ef\u80fd\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002\u5206\u6570\u4e2d\u7684\u8fc7\u591a\u6570\u5b57\u88ab\u4e22\u5f03\uff08\u4e0d\u662f\u820d\u5165\u7684\uff09\u3002\u6574\u6570\u4e2d\u7684\u8fc7\u591a\u6570\u5b57\u5c06\u5bfc\u81f4\u5f02\u5e38\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT toDecimal32(2, 4) AS x, x / 3</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500divide(toDecimal32(2, 4), 3)\u2500\u2510</span>\n<span class=\"err\">\u2502 2.0000 \u2502                       0.6666 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT toDecimal32(4.2, 8) AS x, x * x</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">DB::Exception: Scale is out of bounds.</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT toDecimal32(4.2, 8) AS x, 6 * x</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">DB::Exception: Decimal math overflow.</span>\n</code></pre></div>\n\n\n<p>\u68c0\u67e5\u6ea2\u51fa\u4f1a\u5bfc\u81f4\u8ba1\u7b97\u53d8\u6162\u3002\u5982\u679c\u5df2\u77e5\u6ea2\u51fa\u4e0d\u53ef\u80fd\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e<code>decimal_check_overflow</code>\u6765\u7981\u7528\u6ea2\u51fa\u68c0\u67e5\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6ea2\u51fa\u5c06\u5bfc\u81f4\u7ed3\u679c\u4e0d\u6b63\u786e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SET decimal_check_overflow = 0;</span>\n<span class=\"err\">SELECT toDecimal32(4.2, 8) AS x, 6 * x</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500multiply(6, toDecimal32(4.2, 8))\u2500\u2510</span>\n<span class=\"err\">\u2502 4.20000000 \u2502                     -17.74967296 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u6ea2\u51fa\u68c0\u67e5\u4e0d\u4ec5\u53d1\u751f\u5728\u7b97\u672f\u8fd0\u7b97\u4e0a\uff0c\u8fd8\u53d1\u751f\u5728\u6bd4\u8f83\u8fd0\u7b97\u4e0a\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT toDecimal32(1, 8) &lt; 100</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">DB::Exception: Can&#39;t compare.</span>\n</code></pre></div>\n\n\n<p><a name=\"boolean/\"></a><a name=\"../../data_types/boolean/\"></a><a name=\"data_types/boolean/\"></a><a name=\"../../../../data_types/boolean/\"></a><a name=\"../../../../../data_types/boolean/\"></a><a name=\"../../../data_types/boolean/\"></a><a name=\"../data_types/boolean/\"></a></p>\n<h2 id=\"boolean-values\">Boolean Values<a class=\"headerlink\" href=\"#boolean-values\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6ca1\u6709\u5355\u72ec\u7684\u7c7b\u578b\u6765\u5b58\u50a8\u5e03\u5c14\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 UInt8 \u7c7b\u578b\uff0c\u53d6\u503c\u9650\u5236\u4e3a 0 \u6216 1\u3002<br />\n<a name=\"../../data_types/string/\"></a><a name=\"data_types/string/\"></a><a name=\"../../../../../data_types/string/\"></a><a name=\"../../../../data_types/string/\"></a><a name=\"../data_types/string/\"></a><a name=\"string/\"></a><a name=\"../../../data_types/string/\"></a></p>\n<h2 id=\"string\">String<a class=\"headerlink\" href=\"#string\" title=\"Permanent link\">&para;</a></h2>\n<p>\u5b57\u7b26\u4e32\u53ef\u4ee5\u4efb\u610f\u957f\u5ea6\u7684\u3002\u5b83\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u7684\u5b57\u8282\u96c6\uff0c\u5305\u542b\u7a7a\u5b57\u8282\u3002\u56e0\u6b64\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\u53ef\u4ee5\u4ee3\u66ff\u5176\u4ed6 DBMSs \u4e2d\u7684 VARCHAR\u3001BLOB\u3001CLOB \u7b49\u7c7b\u578b\u3002</p>\n<h3 id=\"bian-ma\">\u7f16\u7801<a class=\"headerlink\" href=\"#bian-ma\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse \u6ca1\u6709\u7f16\u7801\u7684\u6982\u5ff5\u3002\u5b57\u7b26\u4e32\u53ef\u4ee5\u662f\u4efb\u610f\u7684\u5b57\u8282\u96c6\uff0c\u6309\u5b83\u4eec\u539f\u672c\u7684\u65b9\u5f0f\u8fdb\u884c\u5b58\u50a8\u548c\u8f93\u51fa\u3002<br />\n\u82e5\u9700\u5b58\u50a8\u6587\u672c\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 UTF-8 \u7f16\u7801\u3002\u81f3\u5c11\uff0c\u5982\u679c\u4f60\u7684\u7ec8\u7aef\u4f7f\u7528UTF-8\uff08\u63a8\u8350\uff09\uff0c\u8fd9\u6837\u8bfb\u5199\u5c31\u4e0d\u9700\u8981\u8fdb\u884c\u4efb\u4f55\u7684\u8f6c\u6362\u4e86\u3002<br />\n\u540c\u6837\uff0c\u5bf9\u4e0d\u540c\u7684\u7f16\u7801\u6587\u672c ClickHouse \u4f1a\u6709\u4e0d\u540c\u5904\u7406\u5b57\u7b26\u4e32\u7684\u51fd\u6570\u3002<br />\n\u6bd4\u5982\uff0c<code>length</code> \u51fd\u6570\u53ef\u4ee5\u8ba1\u7b97\u5b57\u7b26\u4e32\u5305\u542b\u7684\u5b57\u8282\u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u7136\u800c <code>lengthUTF8</code> \u51fd\u6570\u662f\u5047\u8bbe\u5b57\u7b26\u4e32\u4ee5 UTF-8 \u7f16\u7801\uff0c\u8ba1\u7b97\u7684\u662f\u5b57\u7b26\u4e32\u5305\u542b\u7684 Unicode \u5b57\u7b26\u7684\u957f\u5ea6\u3002</p>\n<p><a name=\"../../../../data_types/fixedstring/\"></a><a name=\"../../../../../data_types/fixedstring/\"></a><a name=\"fixedstring/\"></a><a name=\"data_types/fixedstring/\"></a><a name=\"../data_types/fixedstring/\"></a><a name=\"../../data_types/fixedstring/\"></a><a name=\"../../../data_types/fixedstring/\"></a></p>\n<h2 id=\"fixedstring\">FixedString<a class=\"headerlink\" href=\"#fixedstring\" title=\"Permanent link\">&para;</a></h2>\n<p>\u56fa\u5b9a\u957f\u5ea6 N \u7684\u5b57\u7b26\u4e32\uff08N \u5fc5\u987b\u662f\u4e25\u683c\u7684\u6b63\u81ea\u7136\u6570\uff09\u3002</p>\n<p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u8bed\u6cd5\u5bf9\u5217\u58f0\u660e\u4e3a<code>FixedString</code>\u7c7b\u578b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"o\">&lt;</span><span class=\"k\">column_name</span><span class=\"o\">&gt;</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"n\">N</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5176\u4e2d<code>N</code>\u8868\u793a\u81ea\u7136\u6570\u3002</p>\n<p>\u5f53\u6570\u636e\u7684\u957f\u5ea6\u6070\u597d\u4e3aN\u4e2a\u5b57\u8282\u65f6\uff0c<code>FixedString</code>\u7c7b\u578b\u662f\u9ad8\u6548\u7684\u3002 \u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u8fd9\u53ef\u80fd\u4f1a\u964d\u4f4e\u6548\u7387\u3002</p>\n<p>\u53ef\u4ee5\u6709\u6548\u5b58\u50a8\u5728<code>FixedString</code>\u7c7b\u578b\u7684\u5217\u4e2d\u7684\u503c\u7684\u793a\u4f8b\uff1a</p>\n<ul>\n<li>\u4e8c\u8fdb\u5236\u8868\u793a\u7684IP\u5730\u5740\uff08IPv6\u4f7f\u7528<code>FixedString(16)</code>\uff09</li>\n<li>\u8bed\u8a00\u4ee3\u7801\uff08ru_RU, en_US ... \uff09</li>\n<li>\u8d27\u5e01\u4ee3\u7801\uff08USD, RUB ... \uff09</li>\n<li>\u4e8c\u8fdb\u5236\u8868\u793a\u7684\u54c8\u5e0c\u503c\uff08MD5\u4f7f\u7528<code>FixedString(16)</code>\uff0cSHA256\u4f7f\u7528<code>FixedString(32)</code>\uff09</li>\n</ul>\n<p>\u8bf7\u4f7f\u7528<a href=\"#uuid/\">UUID</a>\u6570\u636e\u7c7b\u578b\u6765\u5b58\u50a8UUID\u503c\uff0c\u3002</p>\n<p>\u5f53\u5411ClickHouse\u4e2d\u63d2\u5165\u6570\u636e\u65f6,</p>\n<ul>\n<li>\u5982\u679c\u5b57\u7b26\u4e32\u5305\u542b\u7684\u5b57\u8282\u6570\u5c11\u4e8e`N',\u5c06\u5bf9\u5b57\u7b26\u4e32\u672b\u5c3e\u8fdb\u884c\u7a7a\u5b57\u8282\u586b\u5145\u3002</li>\n<li>\u5982\u679c\u5b57\u7b26\u4e32\u5305\u542b\u7684\u5b57\u8282\u6570\u5927\u4e8e<code>N</code>,\u5c06\u629b\u51fa<code>Too large value for FixedString(N)</code>\u5f02\u5e38\u3002</li>\n</ul>\n<p>\u5f53\u505a\u6570\u636e\u67e5\u8be2\u65f6\uff0cClickHouse\u4e0d\u4f1a\u5220\u9664\u5b57\u7b26\u4e32\u672b\u5c3e\u7684\u7a7a\u5b57\u8282\u3002 \u5982\u679c\u4f7f\u7528<code>WHERE</code>\u5b50\u53e5\uff0c\u5219\u987b\u8981\u624b\u52a8\u6dfb\u52a0\u7a7a\u5b57\u8282\u4ee5\u5339\u914d<code>FixedString</code>\u7684\u503c\u3002 \u4ee5\u4e0b\u793a\u4f8b\u9610\u660e\u4e86\u5982\u4f55\u5c06<code>WHERE</code>\u5b50\u53e5\u4e0e<code>FixedString</code>\u4e00\u8d77\u4f7f\u7528\u3002</p>\n<p>\u8003\u8651\u5e26\u6709<code>FixedString\uff082)</code>\u5217\u7684\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2510\n\u2502 b     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>\u67e5\u8be2\u8bed\u53e5<code>SELECT * FROM FixedStringTable WHERE a = 'b'</code> \u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u7ed3\u679c\u3002\u8bf7\u4f7f\u7528\u7a7a\u5b57\u8282\u6765\u586b\u5145\u7b5b\u9009\u6761\u4ef6\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">FixedStringTable</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;b\\0&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500a\u2500\u2510\n\u2502 b \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>\u8fd9\u79cd\u65b9\u5f0f\u4e0eMySQL\u7684<code>CHAR</code>\u7c7b\u578b\u7684\u65b9\u5f0f\u4e0d\u540c\uff08MySQL\u4e2d\u4f7f\u7528\u7a7a\u683c\u586b\u5145\u5b57\u7b26\u4e32\uff0c\u5e76\u5728\u8f93\u51fa\u65f6\u5220\u9664\u7a7a\u683c\uff09\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c<code>FixedString(N)</code>\u7684\u957f\u5ea6\u662f\u4e2a\u5e38\u91cf\u3002\u4ec5\u7531\u7a7a\u5b57\u7b26\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\uff0c\u51fd\u6570<a href=\"#array_functions-length\">length</a>\u8fd4\u56de\u503c\u4e3a<code>N</code>,\u800c\u51fd\u6570<a href=\"#string_functions-empty\">empty</a>\u7684\u8fd4\u56de\u503c\u4e3a<code>1</code>\u3002</p>\n<p><a name=\"../../../../data_types/uuid/\"></a><a name=\"../data_types/uuid/\"></a><a name=\"uuid/\"></a><a name=\"../../../../../data_types/uuid/\"></a><a name=\"data_types/uuid/\"></a><a name=\"../../../data_types/uuid/\"></a><a name=\"../../data_types/uuid/\"></a></p>\n<h2 id=\"uuid-data-type\">UUID<a class=\"headerlink\" href=\"#uuid-data-type\" title=\"Permanent link\">&para;</a></h2>\n<p>A universally unique identifier (UUID) is a 16-byte number used to identify records. For detailed information about the UUID, see <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier\" rel=\"external nofollow noreferrer\">Wikipedia</a>.</p>\n<p>The example of UUID type value is represented below: </p>\n<div class=\"codehilite\"><pre><span></span><code>61f0c404-5cb3-11e7-907b-a6006ad3dba0\n</code></pre></div>\n\n\n<p>If you do not specify the UUID column value when inserting a new record, the UUID value is filled with zero:</p>\n<div class=\"codehilite\"><pre><span></span><code>00000000-0000-0000-0000-000000000000\n</code></pre></div>\n\n\n<h3 id=\"how-to-generate\">How to generate<a class=\"headerlink\" href=\"#how-to-generate\" title=\"Permanent link\">&para;</a></h3>\n<p>To generate the UUID value, ClickHouse provides the <a href=\"#../query_language/functions/uuid_functions/\">generateUUIDv4</a> function.</p>\n<h3 id=\"usage-example\">Usage example<a class=\"headerlink\" href=\"#usage-example\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Example 1</strong></p>\n<p>This example demonstrates creating a table with the UUID type column and inserting a value into the table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_uuid</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"n\">UUID</span><span class=\"p\">,</span> <span class=\"n\">y</span> <span class=\"n\">String</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_uuid</span> <span class=\"k\">SELECT</span> <span class=\"n\">generateUUIDv4</span><span class=\"p\">(),</span> <span class=\"s1\">&#39;Example 1&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_uuid</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500y\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 417ddc5d-e556-4d27-95dd-a34d84e46a50 \u2502 Example 1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500");
            
            document.write("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>Example 2</strong></p>\n<p>In this example, the UUID column value is not specified when inserting a new record.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_uuid</span> <span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Example 2&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_uuid</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500y\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 417ddc5d-e556-4d27-95dd-a34d84e46a50 \u2502 Example 1 \u2502\n\u2502 00000000-0000-0000-0000-000000000000 \u2502 Example 2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"restrictions\">Restrictions<a class=\"headerlink\" href=\"#restrictions\" title=\"Permanent link\">&para;</a></h3>\n<p>The UUID data type only supports functions which <a href=\"#string/\">String</a> data type also supports (for example, <a href=\"#agg_function-min\">min</a>, <a href=\"#agg_function-max\">max</a>, and <a href=\"#agg_function-count\">count</a>).</p>\n<p>The UUID data type is not supported by arithmetic operations (for example, <a href=\"#arithm_func-abs\">abs</a>) or aggregate functions, such as <a href=\"#agg_function-sum\">sum</a> and <a href=\"#agg_function-avg\">avg</a>.</p>\n<p><a name=\"../../../../data_types/date/\"></a><a name=\"data_types/date/\"></a><a name=\"../../data_types/date/\"></a><a name=\"../data_types/date/\"></a><a name=\"../../../../../data_types/date/\"></a><a name=\"date/\"></a><a name=\"../../../data_types/date/\"></a></p>\n<h2 id=\"date\">Date<a class=\"headerlink\" href=\"#date\" title=\"Permanent link\">&para;</a></h2>\n<p>\u65e5\u671f\u7c7b\u578b\uff0c\u7528\u4e24\u4e2a\u5b57\u8282\u5b58\u50a8\uff0c\u8868\u793a\u4ece 1970-01-01 (\u65e0\u7b26\u53f7) \u5230\u5f53\u524d\u7684\u65e5\u671f\u503c\u3002\u5141\u8bb8\u5b58\u50a8\u4ece Unix \u7eaa\u5143\u5f00\u59cb\u5230\u7f16\u8bd1\u9636\u6bb5\u5b9a\u4e49\u7684\u4e0a\u9650\u9608\u503c\u5e38\u91cf\uff08\u76ee\u524d\u4e0a\u9650\u662f2106\u5e74\uff0c\u4f46\u6700\u7ec8\u5b8c\u5168\u652f\u6301\u7684\u5e74\u4efd\u4e3a2105\uff09\u3002\u6700\u5c0f\u503c\u8f93\u51fa\u4e3a0000-00-00\u3002</p>\n<p>\u65e5\u671f\u4e2d\u6ca1\u6709\u5b58\u50a8\u65f6\u533a\u4fe1\u606f\u3002<br />\n<a name=\"data_types/datetime/\"></a><a name=\"datetime/\"></a><a name=\"../../../../data_types/datetime/\"></a><a name=\"../../data_types/datetime/\"></a><a name=\"../../../data_types/datetime/\"></a><a name=\"../../../../../data_types/datetime/\"></a><a name=\"../data_types/datetime/\"></a></p>\n<h2 id=\"data_type-datetime\">DateTime<a class=\"headerlink\" href=\"#data_type-datetime\" title=\"Permanent link\">&para;</a></h2>\n<p>\u65f6\u95f4\u6233\u7c7b\u578b\u3002\u7528\u56db\u4e2a\u5b57\u8282\uff08\u65e0\u7b26\u53f7\u7684\uff09\u5b58\u50a8 Unix \u65f6\u95f4\u6233\uff09\u3002\u5141\u8bb8\u5b58\u50a8\u4e0e\u65e5\u671f\u7c7b\u578b\u76f8\u540c\u7684\u8303\u56f4\u5185\u7684\u503c\u3002\u6700\u5c0f\u503c\u4e3a 0000-00-00 00:00:00\u3002\u65f6\u95f4\u6233\u7c7b\u578b\u503c\u7cbe\u786e\u5230\u79d2\uff08\u6ca1\u6709\u95f0\u79d2\uff09\u3002</p>\n<h3 id=\"shi-qu\">\u65f6\u533a<a class=\"headerlink\" href=\"#shi-qu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u542f\u52a8\u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\u65f6\u7684\u7cfb\u7edf\u65f6\u533a\uff0c\u65f6\u95f4\u6233\u662f\u4ece\u6587\u672c\uff08\u5206\u89e3\u4e3a\u7ec4\u4ef6\uff09\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u5e76\u8fd4\u56de\u3002\u5728\u6587\u672c\u683c\u5f0f\u4e2d\uff0c\u6709\u5173\u590f\u4ee4\u65f6\u7684\u4fe1\u606f\u4f1a\u4e22\u5931\u3002</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u670d\u52a1\u7684\u65f6\u5019\u4f1a\u4f7f\u7528\u670d\u52a1\u7aef\u65f6\u533a\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u542f\u7528\u5ba2\u6237\u7aef\u547d\u4ee4\u884c\u9009\u9879 <code>--use_client_time_zone</code> \u6765\u8bbe\u7f6e\u4f7f\u7528\u5ba2\u6237\u7aef\u65f6\u95f4\u3002</p>\n<p>\u56e0\u6b64\uff0c\u5728\u5904\u7406\u6587\u672c\u65e5\u671f\u65f6\uff08\u4f8b\u5982\uff0c\u5728\u4fdd\u5b58\u6587\u672c\u8f6c\u50a8\u65f6\uff09\uff0c\u8bf7\u8bb0\u4f4f\u5728\u590f\u4ee4\u65f6\u66f4\u6539\u671f\u95f4\u53ef\u80fd\u5b58\u5728\u6b67\u4e49\uff0c\u5982\u679c\u65f6\u533a\u53d1\u751f\u66f4\u6539\uff0c\u5219\u53ef\u80fd\u5b58\u5728\u5339\u914d\u6570\u636e\u7684\u95ee\u9898\u3002<br />\n<a name=\"../../../data_types/enum/\"></a><a name=\"../../../../data_types/enum/\"></a><a name=\"data_types/enum/\"></a><a name=\"../data_types/enum/\"></a><a name=\"../../../../../data_types/enum/\"></a><a name=\"enum/\"></a><a name=\"../../data_types/enum/\"></a></p>\n<h2 id=\"enum8-enum16\">Enum8, Enum16<a class=\"headerlink\" href=\"#enum8-enum16\" title=\"Permanent link\">&para;</a></h2>\n<p>\u5305\u62ec <code>Enum8</code> \u548c <code>Enum16</code> \u7c7b\u578b\u3002<code>Enum</code> \u4fdd\u5b58 <code>'string'= integer</code> \u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u5728 ClickHouse \u4e2d\uff0c\u5c3d\u7ba1\u7528\u6237\u4f7f\u7528\u7684\u662f\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u4f46\u6240\u6709\u542b\u6709 <code>Enum</code> \u6570\u636e\u7c7b\u578b\u7684\u64cd\u4f5c\u90fd\u662f\u6309\u7167\u5305\u542b\u6574\u6570\u7684\u503c\u6765\u6267\u884c\u3002\u8fd9\u5728\u6027\u80fd\u65b9\u9762\u6bd4\u4f7f\u7528 <code>String</code> \u6570\u636e\u7c7b\u578b\u66f4\u6709\u6548\u3002</p>\n<ul>\n<li><code>Enum8</code> \u7528 <code>'String'= Int8</code> \u5bf9\u63cf\u8ff0\u3002</li>\n<li><code>Enum16</code> \u7528 <code>'String'= Int16</code> \u5bf9\u63cf\u8ff0\u3002</li>\n</ul>\n<h3 id=\"yong-fa-shi-li\">\u7528\u6cd5\u793a\u4f8b<a class=\"headerlink\" href=\"#yong-fa-shi-li\" title=\"Permanent link\">&para;</a></h3>\n<p>\u521b\u5efa\u4e00\u4e2a\u5e26\u6709\u4e00\u4e2a\u679a\u4e3e <code>Enum8('hello' = 1, 'world' = 2)</code> \u7c7b\u578b\u7684\u5217\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">CREATE TABLE t_enum</span>\n<span class=\"err\">(</span>\n<span class=\"err\">    x Enum8(&#39;hello&#39; = 1, &#39;world&#39; = 2)</span>\n<span class=\"err\">)</span>\n<span class=\"err\">ENGINE = TinyLog</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u4e2a <code>x</code> \u5217\u53ea\u80fd\u5b58\u50a8\u7c7b\u578b\u5b9a\u4e49\u4e2d\u5217\u51fa\u7684\u503c\uff1a<code>'hello'</code>\u6216<code>'world'</code>\u3002\u5982\u679c\u60a8\u5c1d\u8bd5\u4fdd\u5b58\u4efb\u4f55\u5176\u4ed6\u503c\uff0cClickHouse \u629b\u51fa\u5f02\u5e38\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_enum</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;world&#39;</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">)</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_enum</span> <span class=\"k\">VALUES</span>\n\n<span class=\"n\">Ok</span><span class=\"p\">.</span>\n\n<span class=\"mi\">3</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">insert</span> <span class=\"k\">into</span> <span class=\"n\">t_enum</span> <span class=\"k\">values</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_enum</span> <span class=\"k\">VALUES</span>\n\n\n<span class=\"k\">Exception</span> <span class=\"k\">on</span> <span class=\"n\">client</span><span class=\"p\">:</span>\n<span class=\"n\">Code</span><span class=\"p\">:</span> <span class=\"mi\">49</span><span class=\"p\">.</span> <span class=\"n\">DB</span><span class=\"p\">::</span><span class=\"k\">Exception</span><span class=\"p\">:</span> <span class=\"k\">Unknown</span> <span class=\"n\">element</span> <span class=\"s1\">&#39;a&#39;</span> <span class=\"k\">for</span> <span class=\"k\">type</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5f53\u60a8\u4ece\u8868\u4e2d\u67e5\u8be2\u6570\u636e\u65f6\uff0cClickHouse \u4ece <code>Enum</code> \u4e2d\u8f93\u51fa\u5b57\u7b26\u4e32\u503c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_enum</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">hello</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">world</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">hello</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u9700\u8981\u770b\u5230\u5bf9\u5e94\u884c\u7684\u6570\u503c\uff0c\u5219\u5fc5\u987b\u5c06 <code>Enum</code> \u503c\u8f6c\u6362\u4e3a\u6574\u6570\u7c7b\u578b\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Int8&#39;</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_enum</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Int8&#39;</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>               <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span>               <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span>               <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5728\u67e5\u8be2\u4e2d\u521b\u5efa\u679a\u4e3e\u503c\uff0c\u60a8\u8fd8\u9700\u8981\u4f7f\u7528 <code>CAST</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Enum8(\\&#39;</span><span class=\"n\">a</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 1, \\&#39;</span><span class=\"n\">b</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 2)&#39;</span><span class=\"p\">))</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Enum8(\\&#39;</span><span class=\"n\">a</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 1, \\&#39;</span><span class=\"n\">b</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 2)&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">)</span>                              <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"gui-ze-ji-yong-fa\">\u89c4\u5219\u53ca\u7528\u6cd5<a class=\"headerlink\" href=\"#gui-ze-ji-yong-fa\" title=\"Permanent link\">&para;</a></h3>\n<p><code>Enum8</code> \u7c7b\u578b\u7684\u6bcf\u4e2a\u503c\u8303\u56f4\u662f <code>-128 ... 127</code>\uff0c<code>Enum16</code> \u7c7b\u578b\u7684\u6bcf\u4e2a\u503c\u8303\u56f4\u662f <code>-32768 ... 32767</code>\u3002\u6240\u6709\u7684\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\u90fd\u5fc5\u987b\u662f\u4e0d\u4e00\u6837\u7684\u3002\u5141\u8bb8\u5b58\u5728\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c\u67d0\u4e2a Enum \u7c7b\u578b\u88ab\u6307\u5b9a\u4e86\uff08\u5728\u8868\u5b9a\u4e49\u7684\u65f6\u5019\uff09\uff0c\u6570\u5b57\u53ef\u4ee5\u662f\u4efb\u610f\u987a\u5e8f\u3002\u7136\u800c\uff0c\u987a\u5e8f\u5e76\u4e0d\u91cd\u8981\u3002</p>\n<p><code>Enum</code> \u4e2d\u7684\u5b57\u7b26\u4e32\u548c\u6570\u503c\u90fd\u4e0d\u80fd\u662f <a href=\"#../query_language/syntax/\">NULL</a>\u3002</p>\n<p><code>Enum</code> \u5305\u542b\u5728 <a href=\"#nullable/\">Nullable</a> \u7c7b\u578b\u4e2d\u3002\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u4f7f\u7528\u6b64\u67e5\u8be2\u521b\u5efa\u4e00\u4e2a\u8868</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">CREATE TABLE t_enum_nullable</span>\n<span class=\"err\">(</span>\n<span class=\"err\">    x Nullable( Enum8(&#39;hello&#39; = 1, &#39;world&#39; = 2) )</span>\n<span class=\"err\">)</span>\n<span class=\"err\">ENGINE = TinyLog</span>\n</code></pre></div>\n\n\n<p>\u4e0d\u4ec5\u53ef\u4ee5\u5b58\u50a8 <code>'hello'</code> \u548c <code>'world'</code> \uff0c\u8fd8\u53ef\u4ee5\u5b58\u50a8 <code>NULL</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code");
            
            document.write("><span class=\"err\">INSERT INTO t_enum_nullable Values(&#39;hello&#39;),(&#39;world&#39;),(NULL)</span>\n</code></pre></div>\n\n\n<p>\u5728\u5185\u5b58\u4e2d\uff0c<code>Enum</code> \u5217\u7684\u5b58\u50a8\u65b9\u5f0f\u4e0e\u76f8\u5e94\u6570\u503c\u7684 <code>Int8</code> \u6216 <code>Int16</code> \u76f8\u540c\u3002</p>\n<p>\u5f53\u4ee5\u6587\u672c\u65b9\u5f0f\u8bfb\u53d6\u7684\u65f6\u5019\uff0cClickHouse \u5c06\u503c\u89e3\u6790\u6210\u5b57\u7b26\u4e32\u7136\u540e\u53bb\u679a\u4e3e\u503c\u7684\u96c6\u5408\u4e2d\u641c\u7d22\u5bf9\u5e94\u5b57\u7b26\u4e32\u3002\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u5f53\u8bfb\u53d6\u6587\u672c\u683c\u5f0f\u7684\u65f6\u5019\uff0c\u4f1a\u6839\u636e\u8bfb\u53d6\u5230\u7684\u5b57\u7b26\u4e32\u53bb\u627e\u5bf9\u5e94\u7684\u6570\u503c\u3002\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u4f1a\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p>\u5f53\u4ee5\u6587\u672c\u5f62\u5f0f\u5199\u5165\u65f6\uff0cClickHouse \u5c06\u503c\u89e3\u6790\u6210\u5b57\u7b26\u4e32\u5199\u5165\u3002\u5982\u679c\u5217\u6570\u636e\u5305\u542b\u5783\u573e\u6570\u636e\uff08\u4e0d\u662f\u6765\u81ea\u6709\u6548\u96c6\u5408\u7684\u6570\u5b57\uff09\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002Enum \u7c7b\u578b\u4ee5\u4e8c\u8fdb\u5236\u8bfb\u53d6\u548c\u5199\u5165\u7684\u65b9\u5f0f\u4e0e <code>Int8</code> \u548c <code>Int16</code> \u7c7b\u578b\u4e00\u6837\u7684\u3002</p>\n<p>\u9690\u5f0f\u9ed8\u8ba4\u503c\u662f\u6570\u503c\u6700\u5c0f\u7684\u503c\u3002</p>\n<p>\u5728 <code>ORDER BY</code>\uff0c<code>GROUP BY</code>\uff0c<code>IN</code>\uff0c<code>DISTINCT</code> \u7b49\u7b49\u4e2d\uff0cEnum \u7684\u884c\u4e3a\u4e0e\u76f8\u5e94\u7684\u6570\u5b57\u76f8\u540c\u3002\u4f8b\u5982\uff0c\u6309\u6570\u5b57\u6392\u5e8f\u3002\u5bf9\u4e8e\u7b49\u5f0f\u8fd0\u7b97\u7b26\u548c\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff0cEnum \u7684\u5de5\u4f5c\u673a\u5236\u4e0e\u5b83\u4eec\u5728\u5e95\u5c42\u6570\u503c\u4e0a\u7684\u5de5\u4f5c\u673a\u5236\u76f8\u540c\u3002</p>\n<p>\u679a\u4e3e\u503c\u4e0d\u80fd\u4e0e\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\u3002\u679a\u4e3e\u53ef\u4ee5\u4e0e\u5e38\u91cf\u5b57\u7b26\u4e32\u8fdb\u884c\u6bd4\u8f83\u3002\u5982\u679c\u4e0e\u4e4b\u6bd4\u8f83\u7684\u5b57\u7b26\u4e32\u4e0d\u662f\u6709\u6548Enum\u503c\uff0c\u5219\u5c06\u5f15\u53d1\u5f02\u5e38\u3002\u53ef\u4ee5\u4f7f\u7528 IN \u8fd0\u7b97\u7b26\u6765\u5224\u65ad\u4e00\u4e2a Enum \u662f\u5426\u5b58\u5728\u4e8e\u67d0\u4e2a Enum \u96c6\u5408\u4e2d\uff0c\u5176\u4e2d\u96c6\u5408\u4e2d\u7684 Enum \u9700\u8981\u7528\u5b57\u7b26\u4e32\u8868\u793a\u3002</p>\n<p>\u5927\u591a\u6570\u5177\u6709\u6570\u5b57\u548c\u5b57\u7b26\u4e32\u7684\u8fd0\u7b97\u5e76\u4e0d\u9002\u7528\u4e8eEnums\uff1b\u4f8b\u5982\uff0cEnum \u7c7b\u578b\u4e0d\u80fd\u548c\u4e00\u4e2a\u6570\u503c\u76f8\u52a0\u3002\u4f46\u662f\uff0cEnum\u6709\u4e00\u4e2a\u539f\u751f\u7684 <code>toString</code> \u51fd\u6570\uff0c\u5b83\u8fd4\u56de\u5b83\u7684\u5b57\u7b26\u4e32\u503c\u3002</p>\n<p>Enum \u503c\u4f7f\u7528 <code>toT</code> \u51fd\u6570\u53ef\u4ee5\u8f6c\u6362\u6210\u6570\u503c\u7c7b\u578b\uff0c\u5176\u4e2d T \u662f\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u3002\u82e5 <code>T</code> \u6070\u597d\u5bf9\u5e94 Enum \u7684\u5e95\u5c42\u6570\u503c\u7c7b\u578b\uff0c\u8fd9\u4e2a\u8f6c\u6362\u662f\u96f6\u6d88\u8017\u7684\u3002</p>\n<p>Enum \u7c7b\u578b\u53ef\u4ee5\u88ab <code>ALTER</code> \u65e0\u6210\u672c\u5730\u4fee\u6539\u5bf9\u5e94\u96c6\u5408\u7684\u503c\u3002\u53ef\u4ee5\u901a\u8fc7 <code>ALTER</code> \u64cd\u4f5c\u6765\u589e\u52a0\u6216\u5220\u9664 Enum \u7684\u6210\u5458\uff08\u53ea\u8981\u8868\u6ca1\u6709\u7528\u5230\u8be5\u503c\uff0c\u5220\u9664\u90fd\u662f\u5b89\u5168\u7684\uff09\u3002\u4f5c\u4e3a\u5b89\u5168\u4fdd\u969c\uff0c\u6539\u53d8\u4e4b\u524d\u4f7f\u7528\u8fc7\u7684 Enum \u6210\u5458\u5c06\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p>\u901a\u8fc7 <code>ALTER</code> \u64cd\u4f5c\uff0c\u53ef\u4ee5\u5c06 <code>Enum8</code> \u8f6c\u6210 <code>Enum16</code>\uff0c\u53cd\u4e4b\u4ea6\u7136\uff0c\u5c31\u50cf <code>Int8</code> \u8f6c <code>Int16</code>\u4e00\u6837\u3002<br />\n<a name=\"../../data_types/array/\"></a><a name=\"array/\"></a><a name=\"../data_types/array/\"></a><a name=\"../../../../../data_types/array/\"></a><a name=\"../../../../data_types/array/\"></a><a name=\"../../../data_types/array/\"></a><a name=\"data_types/array/\"></a></p>\n<h2 id=\"data_type-array\">Array(T)<a class=\"headerlink\" href=\"#data_type-array\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7531 <code>T</code> \u7c7b\u578b\u5143\u7d20\u7ec4\u6210\u7684\u6570\u7ec4\u3002</p>\n<p><code>T</code> \u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\uff0c\u5305\u542b\u6570\u7ec4\u7c7b\u578b\u3002 \u4f46\u4e0d\u63a8\u8350\u4f7f\u7528\u591a\u7ef4\u6570\u7ec4\uff0cClickHouse \u5bf9\u591a\u7ef4\u6570\u7ec4\u7684\u652f\u6301\u6709\u9650\u3002\u4f8b\u5982\uff0c\u4e0d\u80fd\u5b58\u50a8\u5728 <code>MergeTree</code> \u8868\u4e2d\u5b58\u50a8\u591a\u7ef4\u6570\u7ec4\u3002</p>\n<h3 id=\"chuang-jian-shu-zu\">\u521b\u5efa\u6570\u7ec4<a class=\"headerlink\" href=\"#chuang-jian-shu-zu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u60a8\u53ef\u4ee5\u4f7f\u7528array\u51fd\u6570\u6765\u521b\u5efa\u6570\u7ec4\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">array(T)</span>\n</code></pre></div>\n\n\n<p>\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u65b9\u62ec\u53f7\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">[]</span>\n</code></pre></div>\n\n\n<p>\u521b\u5efa\u6570\u7ec4\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">)</span>            <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">])</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">)</span>       <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<h3 id=\"shi-yong-shu-ju-lei-xing\">\u4f7f\u7528\u6570\u636e\u7c7b\u578b<a class=\"headerlink\" href=\"#shi-yong-shu-ju-lei-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse\u4f1a\u81ea\u52a8\u68c0\u6d4b\u6570\u7ec4\u5143\u7d20,\u5e76\u6839\u636e\u5143\u7d20\u8ba1\u7b97\u51fa\u5b58\u50a8\u8fd9\u4e9b\u5143\u7d20\u6700\u5c0f\u7684\u6570\u636e\u7c7b\u578b\u3002\u5982\u679c\u5728\u5143\u7d20\u4e2d\u5b58\u5728 <a href=\"#null-literal\">NULL</a> \u6216\u5b58\u5728 <a href=\"#data_type-nullable\">Nullable</a> \u7c7b\u578b\u5143\u7d20\uff0c\u90a3\u4e48\u6570\u7ec4\u7684\u5143\u7d20\u7c7b\u578b\u5c06\u4f1a\u53d8\u6210 <a href=\"#nullable/\">Nullable</a>\u3002</p>\n<p>\u5982\u679c ClickHouse \u65e0\u6cd5\u786e\u5b9a\u6570\u636e\u7c7b\u578b\uff0c\u5b83\u5c06\u4ea7\u751f\u5f02\u5e38\u3002\u5f53\u5c1d\u8bd5\u540c\u65f6\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u5b57\u7b26\u4e32\u548c\u6570\u5b57\u7684\u6570\u7ec4\u65f6\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5 (<code>SELECT array(1, 'a')</code>)\u3002</p>\n<p>\u81ea\u52a8\u6570\u636e\u7c7b\u578b\u68c0\u6d4b\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"k\">NULL</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">))</span>        <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u60a8\u5c1d\u8bd5\u521b\u5efa\u4e0d\u517c\u5bb9\u7684\u6570\u636e\u7c7b\u578b\u6570\u7ec4\uff0cClickHouse \u5c06\u5f15\u53d1\u5f02\u5e38\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">]</span>\n\n<span class=\"n\">Received</span> <span class=\"k\">exception</span> <span class=\"k\">from</span> <span class=\"n\">server</span> <span class=\"p\">(</span><span class=\"k\">version</span> <span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">54388</span><span class=\"p\">):</span>\n<span class=\"n\">Code</span><span class=\"p\">:</span> <span class=\"mi\">386</span><span class=\"p\">.</span> <span class=\"n\">DB</span><span class=\"p\">::</span><span class=\"k\">Exception</span><span class=\"p\">:</span> <span class=\"n\">Received</span> <span class=\"k\">from</span> <span class=\"n\">localhost</span><span class=\"p\">:</span><span class=\"mi\">9000</span><span class=\"p\">,</span> <span class=\"mi\">127</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">1</span><span class=\"p\">.</span> <span class=\"n\">DB</span><span class=\"p\">::</span><span class=\"k\">Exception</span><span class=\"p\">:</span> <span class=\"n\">There</span> <span class=\"k\">is</span> <span class=\"k\">no</span> <span class=\"n\">supertype</span> <span class=\"k\">for</span> <span class=\"n\">types</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">String</span> <span class=\"n\">because</span> <span class=\"k\">some</span> <span class=\"k\">of</span> <span class=\"n\">them</span> <span class=\"k\">are</span> <span class=\"n\">String</span><span class=\"o\">/</span><span class=\"n\">FixedString</span> <span class=\"k\">and</span> <span class=\"k\">some</span> <span class=\"k\">of</span>");
            
            document.write(" <span class=\"n\">them</span> <span class=\"k\">are</span> <span class=\"k\">not</span><span class=\"p\">.</span>\n\n<span class=\"mi\">0</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">246</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p><a name=\"../../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../../../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../../../nested_data_structures/aggregatefunction/\"></a><a name=\"../../nested_data_structures/aggregatefunction/\"></a><a name=\"../../../nested_data_structures/aggregatefunction/\"></a><a name=\"nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../../nested_data_structures/aggregatefunction/\"></a><a name=\"aggregatefunction/\"></a><a name=\"../../../../../data_types/nested_data_structures/aggregatefunction/\"></a></p>\n<h2 id=\"data_type-aggregatefunction\">AggregateFunction(name, types_of_arguments...)<a class=\"headerlink\" href=\"#data_type-aggregatefunction\" title=\"Permanent link\">&para;</a></h2>\n<p>\u805a\u5408\u51fd\u6570\u7684\u4e2d\u95f4\u72b6\u6001\uff0c\u53ef\u4ee5\u901a\u8fc7\u805a\u5408\u51fd\u6570\u540d\u79f0\u52a0<code>-State</code>\u540e\u7f00\u7684\u5f62\u5f0f\u5f97\u5230\u5b83\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u5f53\u60a8\u9700\u8981\u8bbf\u95ee\u8be5\u7c7b\u578b\u7684\u6700\u7ec8\u72b6\u6001\u6570\u636e\u65f6\uff0c\u60a8\u9700\u8981\u4ee5\u76f8\u540c\u7684\u805a\u5408\u51fd\u6570\u540d\u52a0<code>-Merge</code>\u540e\u7f00\u7684\u5f62\u5f0f\u6765\u5f97\u5230\u6700\u7ec8\u72b6\u6001\u6570\u636e\u3002</p>\n<p><code>AggregateFunction</code> \u2014 \u53c2\u6570\u5316\u7684\u6570\u636e\u7c7b\u578b\u3002</p>\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li>\n<p>\u805a\u5408\u51fd\u6570\u540d</p>\n<p>\u5982\u679c\u51fd\u6570\u5177\u5907\u591a\u4e2a\u53c2\u6570\u5217\u8868\uff0c\u8bf7\u5728\u6b64\u5904\u6307\u5b9a\u5176\u4ed6\u53c2\u6570\u5217\u8868\u4e2d\u7684\u503c\u3002</p>\n</li>\n<li>\n<p>\u805a\u5408\u51fd\u6570\u53c2\u6570\u7684\u7c7b\u578b</p>\n</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">column1</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">uniq</span><span class=\"p\">,</span> <span class=\"n\">UInt64</span><span class=\"p\">),</span>\n    <span class=\"n\">column2</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">anyIf</span><span class=\"p\">,</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">UInt8</span><span class=\"p\">),</span>\n    <span class=\"n\">column3</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">quantiles</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">9</span><span class=\"p\">),</span> <span class=\"n\">UInt64</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u4e0a\u8ff0\u4e2d\u7684<a href=\"#agg_function-uniq\">uniq</a>\uff0c anyIf (<a href=\"#agg_function-any\">any</a>+<a href=\"#agg-functions-combinator-if\">If</a>) \u4ee5\u53ca <a href=\"#../../query_language/agg_functions/reference/\">quantiles</a> \u90fd\u4e3aClickHouse\u4e2d\u652f\u6301\u7684\u805a\u5408\u51fd\u6570\u3002</p>\n<h3 id=\"shi-yong-zhi-nan\">\u4f7f\u7528\u6307\u5357<a class=\"headerlink\" href=\"#shi-yong-zhi-nan\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"shu-ju-xie-ru\">\u6570\u636e\u5199\u5165<a class=\"headerlink\" href=\"#shu-ju-xie-ru\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5f53\u9700\u8981\u5199\u5165\u6570\u636e\u65f6\uff0c\u60a8\u9700\u8981\u5c06\u6570\u636e\u5305\u542b\u5728<code>INSERT SELECT</code>\u8bed\u53e5\u4e2d\uff0c\u540c\u65f6\u5bf9\u4e8e<code>AggregateFunction</code>\u7c7b\u578b\u7684\u6570\u636e\uff0c\u60a8\u9700\u8981\u4f7f\u7528\u5bf9\u5e94\u7684\u4ee5<code>-State</code>\u4e3a\u540e\u7f00\u7684\u51fd\u6570\u8fdb\u884c\u5904\u7406\u3002</p>\n<p><strong>\u51fd\u6570\u4f7f\u7528\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniqState</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span>\n<span class=\"n\">quantilesState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">9</span><span class=\"p\">)(</span><span class=\"n\">SendTiming</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u4e0d\u540c\u4e8e<code>uniq</code>\u548c<code>quantiles</code>\u51fd\u6570\u8fd4\u56de\u805a\u5408\u7ed3\u679c\u7684\u6700\u7ec8\u503c\uff0c\u4ee5<code>-State</code>\u540e\u7f00\u7684\u51fd\u6570\u603b\u662f\u8fd4\u56de<code>AggregateFunction</code>\u7c7b\u578b\u7684\u6570\u636e\u7684\u4e2d\u95f4\u72b6\u6001\u3002</p>\n<p>\u5bf9\u4e8e<code>SELECT</code>\u800c\u8a00\uff0c<code>AggregateFunction</code>\u7c7b\u578b\u603b\u662f\u4ee5\u7279\u5b9a\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u5c55\u73b0\u5728\u6240\u6709\u7684\u8f93\u51fa\u683c\u5f0f\u4e2d\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528<code>SELECT</code>\u8bed\u53e5\u5c06\u51fd\u6570\u7684\u72b6\u6001\u6570\u636e\u8f6c\u50a8\u4e3a<code>TabSeparated</code>\u683c\u5f0f\u7684\u540c\u65f6\u4f7f\u7528<code>INSERT</code>\u8bed\u53e5\u5c06\u6570\u636e\u8f6c\u50a8\u56de\u53bb\u3002</p>\n<h4 id=\"shu-ju-cha-xun\">\u6570\u636e\u67e5\u8be2<a class=\"headerlink\" href=\"#shu-ju-cha-xun\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5f53\u4ece<code>AggregatingMergeTree</code>\u8868\u4e2d\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u5bf9\u4e8e<code>AggregateFunction</code>\u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u60a8\u9700\u8981\u4f7f\u7528\u4ee5<code>-Merge</code>\u4e3a\u540e\u7f00\u7684\u76f8\u540c\u805a\u5408\u51fd\u6570\u6765\u805a\u5408\u6570\u636e\u3002\u5bf9\u4e8e\u975e<code>AggregateFunction</code>\u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u8bf7\u5c06\u5b83\u4eec\u5305\u542b\u5728<code>GROUP BY</code>\u5b50\u53e5\u4e2d\u3002</p>\n<p>\u4ee5<code>-Merge</code>\u4e3a\u540e\u7f00\u7684\u805a\u5408\u51fd\u6570\uff0c\u53ef\u4ee5\u5c06\u591a\u4e2a<code>AggregateFunction</code>\u7c7b\u578b\u7684\u4e2d\u95f4\u72b6\u6001\u7ec4\u5408\u8ba1\u7b97\u4e3a\u6700\u7ec8\u7684\u805a\u5408\u7ed3\u679c\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5982\u4e0b\u7684\u4e24\u4e2a\u67e5\u8be2\u8fd4\u56de\u7684\u7ed3\u679c\u603b\u662f\u4e00\u81f4\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">uniqMerge</span><span class=\"p\">(</span><span class=\"k\">state</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"n\">uniqState</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">state</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">RegionID</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<h3 id=\"shi-yong-shi-li\">\u4f7f\u7528\u793a\u4f8b<a class=\"headerlink\" href=\"#shi-yong-shi-li\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8bf7\u53c2\u9605 <a href=\"#../../operations/table_engines/aggregatingmergetree/\">AggregatingMergeTree</a> \u7684\u8bf4\u660e</p>\n<p><a name=\"../../../../data_types/tuple/\"></a><a name=\"../../../data_types/tuple/\"></a><a name=\"../data_types/tuple/\"></a><a name=\"../../data_types/tuple/\"></a><a name=\"tuple/\"></a><a name=\"../../../../../data_types/tuple/\"></a><a name=\"data_types/tuple/\"></a></p>\n<h2 id=\"tuple-t1-t2\">Tuple(T1, T2, ...)<a class=\"headerlink\" href=\"#tuple-t1-t2\" title=\"Permanent link\">&para;</a></h2>\n<p>\u5143\u7ec4\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u90fd\u6709\u5355\u72ec\u7684 <a href=\"#data_types\">\u7c7b\u578b</a>\u3002</p>\n<p>\u4e0d\u80fd\u5728\u8868\u4e2d\u5b58\u50a8\u5143\u7ec4\uff08\u9664\u4e86\u5185\u5b58\u8868\uff09\u3002\u5b83\u4eec\u53ef\u4ee5\u7528\u4e8e\u4e34\u65f6\u5217\u5206\u7ec4\u3002\u5728\u67e5\u8be2\u4e2d\uff0cIN \u8868\u8fbe\u5f0f\u548c\u5e26\u7279\u5b9a\u53c2\u6570\u7684 lambda \u51fd\u6570\u53ef\u4ee5\u6765\u5bf9\u4e34\u65f6\u5217\u8fdb\u884c\u5206\u7ec4\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <a href=\"#../query_language/select/\">IN \u64cd\u4f5c\u7b26</a> and <a href=\"#../query_language/functions/higher_order_functions/\">Higher order functions</a>\u3002</p>\n<p>\u5143\u7ec4\u53ef\u4ee5\u662f\u67e5\u8be2\u7684\u7ed3\u679c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8eJSON\u4ee5\u5916\u7684\u6587\u672c\u683c\u5f0f\uff0c\u62ec\u53f7\u4e2d\u7684\u503c\u662f\u9017\u53f7\u5206\u9694\u7684\u3002\u5728JSON\u683c\u5f0f\u4e2d\uff0c\u5143\u7ec4\u4f5c\u4e3a\u6570\u7ec4\u8f93\u51fa\uff08\u5728\u65b9\u62ec\u53f7\u4e2d\uff09\u3002</p>\n<h3 id=\"chuang-jian-yuan-zu\">\u521b\u5efa\u5143\u7ec4<a class=\"headerlink\" href=\"#chuang-jian-yuan-zu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u6765\u521b\u5efa\u5143\u7ec4\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">tuple(T1, T2, ...)</span>\n</code></pre></div>\n\n\n<p>\u521b\u5efa\u5143\u7ec4\u7684\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"err\">\u2502</span> <span class=\"n\">Tuple</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">String</span><span class=\"p\">)</span>      <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">021</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<h3 id=\"yuan-zu-zhong-de-shu-ju-lei-xing\">\u5143\u7ec4\u4e2d\u7684\u6570\u636e\u7c7b\u578b<a class=\"headerlink\" href=\"#yuan-zu-zhong-de-shu-ju-lei-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u52a8\u6001\u521b\u5efa\u5143\u7ec4\u65f6\uff0cClickHouse \u4f1a\u81ea\u52a8\u4e3a\u5143\u7ec4\u7684\u6bcf\u4e00\u4e2a\u53c2\u6570\u8d4b\u4e88\u6700\u5c0f\u53ef\u8868\u8fbe\u7684\u7c7b\u578b\u3002\u5982\u679c\u53c2\u6570\u4e3a <a href=\"#null-literal\">NULL</a>\uff0c\u90a3\u8fd9\u4e2a\u5143\u7ec4\u5bf9\u5e94\u5143\u7d20\u662f <a href=\"#nullable/\">Nullable</a>\u3002</p>\n<p>\u81ea\u52a8\u6570\u636e\u7c7b\u578b\u68c0\u6d4b\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><");
            
            document.write("span class=\"p\">))</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"k\">NULL</span><span class=\"p\">)</span> <span class=\"err\">\u2502</span> <span class=\"n\">Tuple</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"k\">Nothing</span><span class=\"p\">))</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p><a name=\"data_types/nullable/\"></a><a name=\"nullable/\"></a><a name=\"../../data_types/nullable/\"></a><a name=\"../../../../../data_types/nullable/\"></a><a name=\"../data_types/nullable/\"></a><a name=\"../../../../data_types/nullable/\"></a><a name=\"../../../data_types/nullable/\"></a></p>\n<h2 id=\"data_type-nullable\">Nullable(TypeName)<a class=\"headerlink\" href=\"#data_type-nullable\" title=\"Permanent link\">&para;</a></h2>\n<p>\u5141\u8bb8\u7528\u7279\u6b8a\u6807\u8bb0 (<a href=\"#../query_language/syntax/\">NULL</a>) \u8868\u793a\"\u7f3a\u5931\u503c\"\uff0c\u53ef\u4ee5\u4e0e <code>TypeName</code> \u7684\u6b63\u5e38\u503c\u5b58\u653e\u4e00\u8d77\u3002\u4f8b\u5982\uff0c<code>Nullable(Int8)</code> \u7c7b\u578b\u7684\u5217\u53ef\u4ee5\u5b58\u50a8 <code>Int8</code> \u7c7b\u578b\u503c\uff0c\u800c\u6ca1\u6709\u503c\u7684\u884c\u5c06\u5b58\u50a8 <code>NULL</code>\u3002</p>\n<p>\u5bf9\u4e8e <code>TypeName</code>\uff0c\u4e0d\u80fd\u4f7f\u7528\u590d\u5408\u6570\u636e\u7c7b\u578b <a href=\"#array/\">Array</a> \u548c <a href=\"#tuple/\">Tuple</a>\u3002\u590d\u5408\u6570\u636e\u7c7b\u578b\u53ef\u4ee5\u5305\u542b <code>Nullable</code> \u7c7b\u578b\u503c\uff0c\u4f8b\u5982<code>Array(Nullable(Int8))</code>\u3002</p>\n<p><code>Nullable</code> \u7c7b\u578b\u5b57\u6bb5\u4e0d\u80fd\u5305\u542b\u5728\u8868\u7d22\u5f15\u4e2d\u3002</p>\n<p>\u9664\u975e\u5728 ClickHouse \u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219 <code>NULL</code> \u662f\u4efb\u4f55 <code>Nullable</code> \u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\u3002</p>\n<h3 id=\"cun-chu-te-xing\">\u5b58\u50a8\u7279\u6027<a class=\"headerlink\" href=\"#cun-chu-te-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8981\u5728\u8868\u7684\u5217\u4e2d\u5b58\u50a8 <code>Nullable</code> \u7c7b\u578b\u503c\uff0cClickHouse \u9664\u4e86\u4f7f\u7528\u5e26\u6709\u503c\u7684\u666e\u901a\u6587\u4ef6\u5916\uff0c\u8fd8\u4f7f\u7528\u5e26\u6709 <code>NULL</code> \u63a9\u7801\u7684\u5355\u72ec\u6587\u4ef6\u3002 \u63a9\u7801\u6587\u4ef6\u4e2d\u7684\u6761\u76ee\u5141\u8bb8 ClickHouse \u533a\u5206\u6bcf\u4e2a\u8868\u884c\u7684 <code>NULL</code> \u548c\u76f8\u5e94\u6570\u636e\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\u3002 \u7531\u4e8e\u9644\u52a0\u4e86\u65b0\u6587\u4ef6\uff0c<code>Nullable</code> \u5217\u4e0e\u7c7b\u4f3c\u7684\u666e\u901a\u6587\u4ef6\u76f8\u6bd4\u6d88\u8017\u989d\u5916\u7684\u5b58\u50a8\u7a7a\u95f4\u3002</p>\n<div class=\"admonition \u6ce8\u610f\u70b9\">\n<p class=\"admonition-title\">\u6ce8\u610f\u70b9</p>\n<p>\u4f7f\u7528 <code>Nullable</code> \u51e0\u4e4e\u603b\u662f\u5bf9\u6027\u80fd\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u5728\u8bbe\u8ba1\u6570\u636e\u5e93\u65f6\u8bf7\u8bb0\u4f4f\u8fd9\u4e00\u70b9</p>\n</div>\n<p>\u63a9\u7801\u6587\u4ef6\u4e2d\u7684\u6761\u76ee\u5141\u8bb8ClickHouse\u533a\u5206\u6bcf\u4e2a\u8868\u884c\u7684\u5bf9\u5e94\u6570\u636e\u7c7b\u578b\u7684\"NULL\"\u548c\u9ed8\u8ba4\u503c\u7531\u4e8e\u6709\u989d\u5916\u7684\u6587\u4ef6\uff0c\"Nullable\"\u5217\u6bd4\u666e\u901a\u5217\u6d88\u8017\u66f4\u591a\u7684\u5b58\u50a8\u7a7a\u95f4</p>\n<h3 id=\"yong-fa-shi-li_1\">\u7528\u6cd5\u793a\u4f8b<a class=\"headerlink\" href=\"#yong-fa-shi-li_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_null</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"nb\">Int8</span><span class=\"p\">,</span> <span class=\"n\">y</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"nb\">Int8</span><span class=\"p\">))</span> <span class=\"n\">ENGINE</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_null</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"n\">y</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500plus(x, y)\u2500\u2510\n\u2502       \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502          5 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h2 id=\"qian-tao-shu-ju-jie-gou\">\u5d4c\u5957\u6570\u636e\u7ed3\u6784<a class=\"headerlink\" href=\"#qian-tao-shu-ju-jie-gou\" title=\"Permanent link\">&para;</a></h2>\n<p><a name=\"../nested_data_structures/nested/\"></a><a name=\"../../../../../../nested_data_structures/nested/\"></a><a name=\"../../../nested_data_structures/nested/\"></a><a name=\"../../../data_types/nested_data_structures/nested/\"></a><a name=\"../../data_types/nested_data_structures/nested/\"></a><a name=\"../../../../../data_types/nested_data_structures/nested/\"></a><a name=\"../../../../../nested_data_structures/nested/\"></a><a name=\"nested_data_structures/nested/\"></a><a name=\"../../../../data_types/nested_data_structures/nested/\"></a><a name=\"../../../../nested_data_structures/nested/\"></a><a name=\"data_types/nested_data_structures/nested/\"></a><a name=\"../../nested_data_structures/nested/\"></a><a name=\"../data_types/nested_data_structures/nested/\"></a><a name=\"nested/\"></a></p>\n<h2 id=\"nested-name1-type1-name2-type2\">Nested(Name1 Type1, Name2 Type2, ...)<a class=\"headerlink\" href=\"#nested-name1-type1-name2-type2\" title=\"Permanent link\">&para;</a></h2>\n<p>\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u7c7b\u4f3c\u4e8e\u5d4c\u5957\u8868\u3002\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u7684\u53c2\u6570\uff08\u5217\u540d\u548c\u7c7b\u578b\uff09\u4e0e CREATE \u67e5\u8be2\u7c7b\u4f3c\u3002\u6bcf\u4e2a\u8868\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u591a\u884c\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">CounterID</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">StartDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">Sign</span> <span class=\"nb\">Int8</span><span class=\"p\">,</span>\n    <span class=\"n\">IsNew</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">VisitID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"p\">...</span>\n    <span class=\"n\">Goals</span> <span class=\"n\">Nested</span>\n    <span class=\"p\">(</span>\n        <span class=\"n\">ID</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"nb\">Serial</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"n\">EventTime</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n        <span class=\"n\">Price</span> <span class=\"n\">Int64</span><span class=\"p\">,</span>\n        <span class=\"n\">OrderID</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">CurrencyID</span> <span class=\"n\">UInt32</span>\n    <span class=\"p\">),</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">StartDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">StartDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"n\">VisitID</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">,</span> <span class=\"n\">Sign</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u4e0a\u8ff0\u793a\u4f8b\u58f0\u660e\u4e86 <code>Goals</code> \u8fd9\u79cd\u5d4c\u5957\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5305\u542b\u8bbf\u5ba2\u8f6c\u5316\u76f8\u5173\u7684\u6570\u636e\uff08\u8bbf\u5ba2\u8fbe\u5230\u7684\u76ee\u6807\uff09\u3002\u5728 'visits' \u8868\u4e2d\u6bcf\u4e00\u884c\u90fd\u53ef\u4ee5\u5bf9\u5e94\u96f6\u4e2a\u6216\u8005\u4efb\u610f\u4e2a\u8f6c\u5316\u6570\u636e\u3002</p>\n<p>\u53ea\u652f\u6301\u4e00\u7ea7\u5d4c\u5957\u3002\u5d4c\u5957\u7ed3\u6784\u7684\u5217\u4e2d\uff0c\u82e5\u5217\u7684\u7c7b\u578b\u662f\u6570\u7ec4\u7c7b\u578b\uff0c\u90a3\u4e48\u8be5\u5217\u5176\u5b9e\u548c\u591a\u7ef4\u6570\u7ec4\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u76ee\u524d\u5d4c\u5957\u5c42\u7ea7\u7684\u652f\u6301\u5f88\u5c40\u9650\uff08MergeTree \u5f15\u64ce\u4e2d\u4e0d\u652f\u6301\u5b58\u50a8\u8fd9\u6837\u7684\u5217\uff09</p>\n<p>\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5904\u7406\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u65f6\uff0c\u4f1a\u6307\u5b9a\u4e00\u4e2a\u5355\u72ec\u7684\u5217\u3002\u4e3a\u4e86\u8fd9\u6837\u5b9e\u73b0\uff0c\u5217\u7684\u540d\u79f0\u4f1a\u4e0e\u70b9\u53f7\u8fde\u63a5\u8d77\u6765\u3002\u8fd9\u4e9b\u5217\u6784\u6210\u4e86\u4e00\u7ec4\u5339\u914d\u7c7b\u578b\u3002\u5728\u540c\u4e00\u6761\u5d4c\u5957\u6570\u636e\u4e2d\uff0c\u6240\u6709\u7684\u5217\u90fd\u5177\u6709\u76f8\u540c\u7684\u957f\u5ea6\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">,</span>\n    <span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">EventTime</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">)</span> <span class=\"o\">&lt;</span> <span class=\"mi\">5</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500Goals.ID\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500Goals.EventTime\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1073752,591325,591325]        \u2502 [&#39;2014-03-17 16:38:10&#39;,&#39;2014-03-17 16:38:48&#39;,&#39;2014-03-17 16:42:27&#39;]                       \u2502\n\u2502 [1073752]                      \u2502 [&#39;2014-03-17 00:28:25&#39;]                                                                   \u2502\n\u2502 [1073752]                      \u2502 [&#39;2014-03-17 10:46:20&#39;]                                                                   \u2502\n\u2502 [1073752,591325,591325,591325] \u2502 [&#39;2014-03-17 13:59:20&#39;,&#39;2014-03-17 22:17:55&#39;,&#39;2014-03-17 22:18:07&#39;,&#39;2014-03-17 22:18:51&#39;] \u2502\n\u2502 []                             \u2502 []                                                                                        \u2502\n\u2502 [1073752,591325,591325]        \u2502 [&#39;2014-03-17 11:37:06&#39;,&#39;2014-03-17 14:07:47&#39;,&#39;2014-03-17 14:36:21&#39;]                       \u2502\n\u2502 []                             \u2502 []                                                                                        \u2502\n\u2502 []                             \u2502 []                                                                                        \u2502\n\u2502 [591325,1073752]               \u2502 [&#39;2014-03-17 00:46:05&#39;,&#39;2014-03-17 00:46:05&#39;]                                             \u2502\n\u2502 [1073752,591325,591325,591325] \u2502 [&#39;2014-03-17 13:28:33&#39;,&#39;2014-03-17 13:30:26&#39;,&#39;2014-03-17 18:51:21&#39;,&#39;2014-03-17 18:51:45&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>\u6240\u4ee5\u53ef\u4ee5\u7b80\u5355\u5730\u628a\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u5f53\u505a\u662f\u6240\u6709\u5217\u90fd\u662f\u76f8\u540c\u957f\u5ea6\u7684\u591a\u5217\u6570\u7ec4\u3002</p>\n<p>SELECT \u67e5\u8be2\u53ea\u6709\u5728\u4f7f\u7528 ARRAY JOIN \u7684\u65f6\u5019\u624d\u53ef\u4ee5\u6307\u5b9a\u6574\u4e2a\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u7684\u540d\u79f0\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u8003 \"ARRAY JOIN \u5b50\u53e5\"\u3002\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">Goal</span><span class=\"p\">.</span><span class=\"n\">ID</span><spa");
            
            document.write("n class=\"p\">,</span>\n    <span class=\"n\">Goal</span><span class=\"p\">.</span><span class=\"n\">EventTime</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">Goals</span> <span class=\"k\">AS</span> <span class=\"n\">Goal</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">)</span> <span class=\"o\">&lt;</span> <span class=\"mi\">5</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500Goal.ID\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500Goal.EventTime\u2500\u2510\n\u2502 1073752 \u2502 2014-03-17 16:38:10 \u2502\n\u2502  591325 \u2502 2014-03-17 16:38:48 \u2502\n\u2502  591325 \u2502 2014-03-17 16:42:27 \u2502\n\u2502 1073752 \u2502 2014-03-17 00:28:25 \u2502\n\u2502 1073752 \u2502 2014-03-17 10:46:20 \u2502\n\u2502 1073752 \u2502 2014-03-17 13:59:20 \u2502\n\u2502  591325 \u2502 2014-03-17 22:17:55 \u2502\n\u2502  591325 \u2502 2014-03-17 22:18:07 \u2502\n\u2502  591325 \u2502 2014-03-17 22:18:51 \u2502\n\u2502 1073752 \u2502 2014-03-17 11:37:06 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>\u4e0d\u80fd\u5bf9\u6574\u4e2a\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u6267\u884c SELECT\u3002\u53ea\u80fd\u660e\u786e\u5217\u51fa\u5c5e\u4e8e\u5b83\u4e00\u90e8\u5206\u5217\u3002</p>\n<p>\u5bf9\u4e8e INSERT \u67e5\u8be2\uff0c\u53ef\u4ee5\u5355\u72ec\u5730\u4f20\u5165\u6240\u6709\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u5217\u6570\u7ec4\uff08\u5047\u5982\u5b83\u4eec\u662f\u5355\u72ec\u7684\u5217\u6570\u7ec4\uff09\u3002\u5728\u63d2\u5165\u8fc7\u7a0b\u4e2d\uff0c\u7cfb\u7edf\u4f1a\u68c0\u67e5\u5b83\u4eec\u662f\u5426\u6709\u76f8\u540c\u7684\u957f\u5ea6\u3002</p>\n<p>\u5bf9\u4e8e DESCRIBE \u67e5\u8be2\uff0c\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u5217\u4f1a\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u5206\u522b\u5217\u51fa\u6765\u3002</p>\n<p>ALTER \u67e5\u8be2\u5bf9\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u7684\u64cd\u4f5c\u975e\u5e38\u6709\u9650\u3002<br />\n<a name=\"../../../data_types/special_data_types/\"></a><a name=\"../data_types/special_data_types/\"></a><a name=\"../../../../../data_types/special_data_types/\"></a><a name=\"special_data_types/\"></a><a name=\"../../../../data_types/special_data_types/\"></a><a name=\"data_types/special_data_types/\"></a><a name=\"../../data_types/special_data_types/\"></a></p>\n<h2 id=\"special-data-types\">Special Data Types<a class=\"headerlink\" href=\"#special-data-types\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7279\u6b8a\u6570\u636e\u7c7b\u578b\u7684\u503c\u65e2\u4e0d\u80fd\u5b58\u5728\u8868\u4e2d\u4e5f\u4e0d\u80fd\u5728\u7ed3\u679c\u4e2d\u8f93\u51fa\uff0c\u4f46\u53ef\u7528\u4e8e\u67e5\u8be2\u7684\u4e2d\u95f4\u7ed3\u679c\u3002<br />\n<a name=\"../../special_../expression/\"></a><a name=\"../../../special_../expression/\"></a><a name=\"../../../../../special_../expression/\"></a><a name=\"data_types/special_data_types/expression/\"></a><a name=\"../../data_types/special_data_types/expression/\"></a><a name=\"../data_types/special_data_types/expression/\"></a><a name=\"../special_../expression/\"></a><a name=\"../../../../../../special_../expression/\"></a><a name=\"special_data_types/expression/\"></a><a name=\"../../../../../data_types/special_data_types/expression/\"></a><a name=\"expression/\"></a><a name=\"../../../../special_../expression/\"></a><a name=\"../../../../data_types/special_data_types/expression/\"></a><a name=\"../../../data_types/special_data_types/expression/\"></a></p>\n<h2 id=\"expression\">Expression<a class=\"headerlink\" href=\"#expression\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7528\u4e8e\u8868\u793a\u9ad8\u9636\u51fd\u6570\u4e2d\u7684Lambd\u8868\u8fbe\u5f0f\u3002<a name=\"data_types/special_data_types/set/\"></a><a name=\"../../../../../data_types/special_data_types/set/\"></a><a name=\"../../../data_types/special_data_types/set/\"></a><a name=\"../../special_../set/\"></a><a name=\"../../../special_../set/\"></a><a name=\"../../data_types/special_data_types/set/\"></a><a name=\"../../../../special_../set/\"></a><a name=\"../../../../data_types/special_data_types/set/\"></a><a name=\"../special_../set/\"></a><a name=\"../data_types/special_data_types/set/\"></a><a name=\"set/\"></a><a name=\"special_data_types/set/\"></a><a name=\"../../../../../special_../set/\"></a><a name=\"../../../../../../special_../set/\"></a></p>\n<h2 id=\"set\">Set<a class=\"headerlink\" href=\"#set\" title=\"Permanent link\">&para;</a></h2>\n<p>\u53ef\u4ee5\u7528\u5728 IN \u8868\u8fbe\u5f0f\u7684\u53f3\u534a\u90e8\u5206\u3002</p>\n<p><a name=\"data_types/special_data_types/nothing/\"></a><a name=\"../../../../../data_types/special_data_types/nothing/\"></a><a name=\"../../../special_../nothing/\"></a><a name=\"../special_../nothing/\"></a><a name=\"../../../../data_types/special_data_types/nothing/\"></a><a name=\"../../../data_types/special_data_types/nothing/\"></a><a name=\"../../../../../special_../nothing/\"></a><a name=\"../data_types/special_data_types/nothing/\"></a><a name=\"../../special_../nothing/\"></a><a name=\"../../../../special_../nothing/\"></a><a name=\"../../../../../../special_../nothing/\"></a><a name=\"nothing/\"></a><a name=\"special_data_types/nothing/\"></a><a name=\"../../data_types/special_data_types/nothing/\"></a></p>\n<h2 id=\"nothing\">Nothing<a class=\"headerlink\" href=\"#nothing\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6b64\u6570\u636e\u7c7b\u578b\u7684\u552f\u4e00\u76ee\u7684\u662f\u8868\u793a\u4e0d\u662f\u671f\u671b\u503c\u7684\u60c5\u51b5\u3002 \u6240\u4ee5\u4e0d\u80fd\u521b\u5efa\u4e00\u4e2a <code>Nothing</code> \u7c7b\u578b\u7684\u503c\u3002</p>\n<p>\u4f8b\u5982\uff0c\u6587\u672c <a href=\"#null-literal\">NULL</a> \u7684\u7c7b\u578b\u4e3a <code>Nullable(Nothing)</code>\u3002\u8be6\u60c5\u8bf7\u89c1 <a href=\"#../../data_types/nullable/\">Nullable</a>\u3002</p>\n<p><code>Nothing</code> \u7c7b\u578b\u4e5f\u53ef\u4ee5\u7528\u6765\u8868\u793a\u7a7a\u6570\u7ec4\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>:<span class=\"o\">)</span> SELECT toTypeName<span class=\"o\">(</span>array<span class=\"o\">())</span>\n\nSELECT toTypeName<span class=\"o\">([])</span>\n\n\u250c\u2500toTypeName<span class=\"o\">(</span>array<span class=\"o\">())</span>\u2500\u2510\n\u2502 Array<span class=\"o\">(</span>Nothing<span class=\"o\">)</span>      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n<span class=\"m\">1</span> rows in set. Elapsed: <span class=\"m\">0</span>.062 sec.\n</code></pre></div>\n\n\n<p><a name=\"../../data_types/special_data_types/interval/\"></a><a name=\"../../../../data_types/special_data_types/interval/\"></a><a name=\"data_types/special_data_types/interval/\"></a><a name=\"../../../../special_../interval/\"></a><a name=\"../data_types/special_data_types/interval/\"></a><a name=\"interval/\"></a><a name=\"../../../../../data_types/special_data_types/interval/\"></a><a name=\"../special_../interval/\"></a><a name=\"special_data_types/interval/\"></a><a name=\"../../../../../special_../interval/\"></a><a name=\"../../special_../interval/\"></a><a name=\"../../../../../../special_../interval/\"></a><a name=\"../../../special_../interval/\"></a><a name=\"../../../data_types/special_data_types/interval/\"></a></p>\n<h2 id=\"data-type-interval\">Interval<a class=\"headerlink\" href=\"#data-type-interval\" title=\"Permanent link\">&para;</a></h2>\n<p>The family of data types representing time and date intervals. The resulting types of the <a href=\"#operator-interval\">INTERVAL</a> operator.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>You can't use the <code>Interval</code> data types for storing values in tables.</p>\n</div>\n<p>Structure:</p>\n<ul>\n<li>Time interval as unsigned integer value.</li>\n<li>Type of an interval.</li>\n</ul>\n<p>Supported interval types:</p>\n<ul>\n<li><code>SECOND</code></li>\n<li><code>MINUTE</code></li>\n<li><code>HOUR</code></li>\n<li><code>DAY</code></li>\n<li><code>WEEK</code></li>\n<li><code>MONTH</code></li>\n<li><code>QUARTER</code></li>\n<li><code>YEAR</code></li>\n</ul>\n<p>For each interval type, there is the separated data type. For example, the <code>DAY</code> interval is expressed as the <code>IntervalDay</code> data type:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"nb\">INTERVAL</span> <span class=\"mi\">4</span> <span class=\"k\">DAY</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(toIntervalDay(4))\u2500\u2510\n\u2502 IntervalDay                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"data-type-interval-usage-remarks\">Usage Remarks<a class=\"headerlink\" href=\"#data-type-interval-usage-remarks\" title=\"Permanent link\">&para;</a></h3>\n<p>You can use <code>Interval</code>-type values in arithmetical operations with <a href=\"#../../data_types/date/\">Date</a> and <a href=\"#../../data_types/datetime/\">DateTime</a>-type values. For example, you can add 4 days to the current time:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"k\">as</span> <span class=\"n\">current_date_time</span><span class=\"p\">,</span> <span class=\"n\">current_date_time</span> <span class=\"o\">+</span> <span class=\"nb\">INTERVAL</span> <span class=\"mi\">4</span> <span class=\"k\">DAY</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500current_date_time\u2500\u252c\u2500plus(now(), toIntervalDay(4))\u2500\u2510\n\u2502 2019-10-23 10:58:45 \u2502           2019-10-27 10:58:45 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Intervals of different types can't be combined. You can't use intervals like <code>4 DAY 1 HOUR</code>, express intervals in the units that smaller or equal the the smallest unit of the interval. For example, <code>1 day and an hour</code> interval can be expressed as <code>25 HOUR</code> or <code>90000 SECOND</code>.</p>\n<p>You can't perform arithmetical operations with the <code>Interval</code>-type values, but you can add intervals of different types consequently to some value. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">current_date_time</span><span class=\"p\">,</span> <span class=\"n\">current_date_time</span> <span class=\"o\">+</span> <span class=\"nb\">INTERVAL</span> <span class=\"mi\">4</span> <span class=\"k\">DAY</span> <span class=\"o\">+</span> <span class=\"nb\">INTERVAL</span> <span class=\"mi\">3</span> <span class=\"n\">HOUR</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500current_date_time\u2500\u252c\u2500plus(plus(now(), toIntervalDay(4)), toIntervalHour(3))\u2500\u2510\n\u2502 2019-10-23 11:16:28 \u2502                                    2019-10-27 14:16:28 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The following query causes the exception:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">select</span> <span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">current_date_time</span><span class=\"p\">,</span> <span class=\"n\">current_date_time</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"nb\">INTERVAL</span> <span class=\"mi\">4</span> <span class=\"k\">DAY</span> <span class=\"o\">+</span> <span class=\"nb\">INTERVAL</span> <span class=\"mi\">3</span> <span class=\"n\">HOUR</span><span class=\"p\">)</span>\n</code></pr");
            
            document.write("e></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Received exception from server (version 19.14.1):\nCode: 43. DB::Exception: Received from localhost:9000. DB::Exception: Wrong argument types for function plus: if one argument is Interval, then another must be Date or DateTime.. \n</code></pre></div>\n\n\n<h3 id=\"see-also\">See Also<a class=\"headerlink\" href=\"#see-also\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#operator-interval\">INTERVAL</a> operator</li>\n<li><a href=\"#function-tointerval\">toInterval</a> type convertion functions<br />\n<a name=\"domains/overview/\"></a><a name=\"../../../../../data_types/domains/overview/\"></a><a name=\"../../../../../../domains/overview/\"></a><a name=\"../../../data_types/domains/overview/\"></a><a name=\"../../domains/overview/\"></a><a name=\"../../../../data_types/domains/overview/\"></a><a name=\"../../../../domains/overview/\"></a><a name=\"../domains/overview/\"></a><a name=\"data_types/domains/overview/\"></a><a name=\"../../../../../domains/overview/\"></a><a name=\"../../../domains/overview/\"></a><a name=\"overview/\"></a><a name=\"../data_types/domains/overview/\"></a><a name=\"../../data_types/domains/overview/\"></a></li>\n</ul>\n<h2 id=\"domains\">Domains<a class=\"headerlink\" href=\"#domains\" title=\"Permanent link\">&para;</a></h2>\n<p>Domain\u7c7b\u578b\u662f\u7279\u5b9a\u5b9e\u73b0\u7684\u7c7b\u578b\uff0c\u5b83\u603b\u662f\u4e0e\u67d0\u4e2a\u73b0\u5b58\u7684\u57fa\u7840\u7c7b\u578b\u4fdd\u6301\u4e8c\u8fdb\u5236\u517c\u5bb9\u7684\u540c\u65f6\u6dfb\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u7279\u6027\uff0c\u4ee5\u80fd\u591f\u5728\u7ef4\u6301\u78c1\u76d8\u6570\u636e\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u8fd9\u4e9b\u989d\u5916\u7684\u7279\u6027\u3002\u76ee\u524dClickHouse\u6682\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49domain\u7c7b\u578b\u3002</p>\n<p>\u5982\u679c\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u5730\u65b9\u4f7f\u7528\u4e0eDomain\u7c7b\u578b\u4e8c\u8fdb\u5236\u517c\u5bb9\u7684\u57fa\u7840\u7c7b\u578b\uff0c\u90a3\u4e48\u5728\u76f8\u540c\u7684\u5730\u65b9\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528Domain\u7c7b\u578b\uff0c\u4f8b\u5982\uff1a</p>\n<ul>\n<li>\u4f7f\u7528Domain\u7c7b\u578b\u4f5c\u4e3a\u8868\u4e2d\u5217\u7684\u7c7b\u578b</li>\n<li>\u5bf9Domain\u7c7b\u578b\u7684\u5217\u8fdb\u884c\u8bfb/\u5199\u6570\u636e</li>\n<li>\u5982\u679c\u4e0eDomain\u4e8c\u8fdb\u5236\u517c\u5bb9\u7684\u57fa\u7840\u7c7b\u578b\u53ef\u4ee5\u4f5c\u4e3a\u7d22\u5f15\uff0c\u90a3\u4e48Domain\u7c7b\u578b\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u7d22\u5f15</li>\n<li>\u5c06Domain\u7c7b\u578b\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\u4f7f\u7528</li>\n<li>\u5176\u4ed6</li>\n</ul>\n<h4 id=\"domainsde-e-wai-te-xing\">Domains\u7684\u989d\u5916\u7279\u6027<a class=\"headerlink\" href=\"#domainsde-e-wai-te-xing\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>\u5728\u6267\u884cSHOW CREATE TABLE \u6216 DESCRIBE TABLE\u65f6\uff0c\u5176\u5bf9\u5e94\u7684\u5217\u603b\u662f\u5c55\u793a\u4e3aDomain\u7c7b\u578b\u7684\u540d\u79f0</li>\n<li>\u5728INSERT INTO domain_table(domain_column) VALUES(...)\u4e2d\u8f93\u5165\u6570\u636e\u603b\u662f\u4ee5\u66f4\u4eba\u6027\u5316\u7684\u683c\u5f0f\u8fdb\u884c\u8f93\u5165</li>\n<li>\u5728SELECT domain_column FROM domain_table\u4e2d\u6570\u636e\u603b\u662f\u4ee5\u66f4\u4eba\u6027\u5316\u7684\u683c\u5f0f\u8f93\u51fa</li>\n<li>\u5728INSERT INTO domain_table FORMAT CSV ...\u4e2d\uff0c\u5b9e\u73b0\u5916\u90e8\u6e90\u6570\u636e\u4ee5\u66f4\u4eba\u6027\u5316\u7684\u683c\u5f0f\u8f7d\u5165</li>\n</ul>\n<h4 id=\"domainslei-xing-de-xian-zhi\">Domains\u7c7b\u578b\u7684\u9650\u5236<a class=\"headerlink\" href=\"#domainslei-xing-de-xian-zhi\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>\u65e0\u6cd5\u901a\u8fc7<code>ALTER TABLE</code>\u5c06\u57fa\u7840\u7c7b\u578b\u7684\u7d22\u5f15\u8f6c\u6362\u4e3aDomain\u7c7b\u578b\u7684\u7d22\u5f15\u3002</li>\n<li>\u5f53\u4ece\u5176\u4ed6\u5217\u6216\u8868\u63d2\u5165\u6570\u636e\u65f6\uff0c\u65e0\u6cd5\u5c06string\u7c7b\u578b\u7684\u503c\u9690\u5f0f\u5730\u8f6c\u6362\u4e3aDomain\u7c7b\u578b\u7684\u503c\u3002</li>\n<li>\u65e0\u6cd5\u5bf9\u5b58\u50a8\u4e3aDomain\u7c7b\u578b\u7684\u503c\u6dfb\u52a0\u7ea6\u675f\u3002</li>\n</ul>\n<p><a name=\"../data_types/domains/ipv4/\"></a><a name=\"../../../../../data_types/domains/ipv4/\"></a><a name=\"../../../domains/ipv4/\"></a><a name=\"../../domains/ipv4/\"></a><a name=\"../../../../../domains/ipv4/\"></a><a name=\"../../data_types/domains/ipv4/\"></a><a name=\"ipv4/\"></a><a name=\"../domains/ipv4/\"></a><a name=\"../../../../../../domains/ipv4/\"></a><a name=\"domains/ipv4/\"></a><a name=\"../../../../domains/ipv4/\"></a><a name=\"../../../../data_types/domains/ipv4/\"></a><a name=\"data_types/domains/ipv4/\"></a><a name=\"../../../data_types/domains/ipv4/\"></a></p>\n<h3 id=\"ipv4\">IPv4<a class=\"headerlink\" href=\"#ipv4\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IPv4</code>\u662f\u4e0e<code>UInt32</code>\u7c7b\u578b\u4fdd\u6301\u4e8c\u8fdb\u5236\u517c\u5bb9\u7684Domain\u7c7b\u578b\uff0c\u5176\u7528\u4e8e\u5b58\u50a8IPv4\u5730\u5740\u7684\u503c\u3002\u5b83\u63d0\u4f9b\u4e86\u66f4\u4e3a\u7d27\u51d1\u7684\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684\u540c\u65f6\u652f\u6301\u8bc6\u522b\u53ef\u8bfb\u6027\u66f4\u52a0\u53cb\u597d\u7684\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\u3002</p>\n<h4 id=\"ji-ben-shi-yong\">\u57fa\u672c\u4f7f\u7528<a class=\"headerlink\" href=\"#ji-ben-shi-yong\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"k\">from</span> <span class=\"n\">IPv4</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">url</span><span class=\"p\">;</span>\n\n<span class=\"k\">DESCRIBE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500name\u2500\u252c\u2500type\u2500\u2500\u2500\u252c\u2500default_type\u2500\u252c\u2500default_expression\u2500\u252c\u2500comment\u2500\u252c\u2500codec_expression\u2500\u2510</span>\n<span class=\"err\">\u2502 url  \u2502 String \u2502              \u2502                    \u2502         \u2502                  \u2502</span>\n<span class=\"err\">\u2502 from \u2502 IPv4   \u2502              \u2502                    \u2502         \u2502                  \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u540c\u65f6\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>IPv4</code>\u7c7b\u578b\u7684\u5217\u4f5c\u4e3a\u4e3b\u952e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"k\">from</span> <span class=\"n\">IPv4</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">from</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u5728\u5199\u5165\u4e0e\u67e5\u8be2\u65f6\uff0c<code>IPv4</code>\u7c7b\u578b\u80fd\u591f\u8bc6\u522b\u53ef\u8bfb\u6027\u66f4\u52a0\u53cb\u597d\u7684\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;https://wikipedia.org&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;116.253.40.133&#39;</span><span class=\"p\">)(</span><span class=\"s1\">&#39;https://clickhouse.yandex&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;183.247.232.58&#39;</span><span class=\"p\">)(</span><span class=\"s1\">&#39;https://clickhouse.yandex/docs/en/&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;116.106.34.242&#39;</span><span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500url\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500from\u2500\u2510</span>\n<span class=\"err\">\u2502 https://clickhouse.yandex/docs/en/ \u2502 116.106.34.242 \u2502</span>\n<span class=\"err\">\u2502 https://wikipedia.org              \u2502 116.253.40.133 \u2502</span>\n<span class=\"err\">\u2502 https://clickhouse.yandex          \u2502 183.247.232.58 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u540c\u65f6\u5b83\u63d0\u4f9b\u66f4\u4e3a\u7d27\u51d1\u7684\u4e8c\u8fdb\u5236\u5b58\u50a8\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">),</span> <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(from)\u2500\u252c\u2500hex(from)\u2500\u2510</span>\n<span class=\"err\">\u2502 IPv4             \u2502 B7F7E83A  \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4e0d\u53ef\u9690\u5f0f\u8f6c\u6362\u4e3a\u9664<code>UInt32</code>\u4ee5\u5916\u7684\u5176\u4ed6\u7c7b\u578b\u7c7b\u578b\u3002\u5982\u679c\u8981\u5c06<code>IPv4</code>\u7c7b\u578b\u7684\u503c\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>IPv4NumToString()</code>\u663e\u793a\u7684\u8fdb\u884c\u8f6c\u6362\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">),</span> <span class=\"n\">IPv4NumToString</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">s</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(IPv4NumToString(from))\u2500\u252c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 String                            \u2502 183.247.232.58 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u6216\u53ef\u4ee5\u4f7f\u7528<code>CAST</code>\u5c06\u5b83\u8f6c\u6362\u4e3a<code>UInt32</code>\u7c7b\u578b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">),</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">from</span> <span class=\"k\">as</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">i</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(CAST(from, &#39;UInt32&#39;))\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500i\u2500\u2510</span>\n<span class=\"err\">\u2502 UInt32                           \u2502 3086477370 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"../../domains/ipv6/\"></a><a name=\"../../../../domains/ipv6/\"></a><a name=\"../../../domains/ipv6/\"></a><a name=\"../../../../../data_types/domains/ipv6/\"></a><a name=\"domains/ipv6/\"></a><a name=\"../../../../../../domains/ipv6/\"></a><a name=\"../../../../../domains/ipv6/\"></a><a name=\"../domains/ipv6/\"></a><a name=\"data_types/domains/ipv6/\"></a><a name=\"../../data_types/domains/ipv6/\"></a><a name=\"../data_types/domains/ipv6/\"></a><a name=\"../../../../data_types/domains/ipv6/\"></a><a name=\"ipv6/\"></a><a name=\"../../../data_types/domains/ipv6/\"></a></p>\n<h3 id=\"ipv6\">IPv6<a class=\"headerlink\" href=\"#ipv6\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IPv6</code>\u662f\u4e0e<code>FixedString(16)</code>\u7c7b\u578b\u4fdd\u6301\u4e8c\u8fdb\u5236\u517c\u5bb9\u7684Domain\u7c7b\u578b\uff0c\u5176\u7528\u4e8e\u5b58\u50a8IPv6\u5730\u5740\u7684\u503c\u3002\u5b83\u63d0\u4f9b\u4e86\u66f4\u4e3a\u7d27\u51d1\u7684\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684\u540c\u65f6\u652f\u6301\u8bc6\u522b\u53ef\u8bfb\u6027\u66f4\u52a0\u53cb\u597d\u7684\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\u3002</p>\n<h4 id=\"ji-ben-yong-fa\">\u57fa\u672c\u7528\u6cd5<a class=\"headerlink\" href=\"#ji-ben-yong-fa\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"k\">from</span> <");
            
            document.write("span class=\"n\">IPv6</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">url</span><span class=\"p\">;</span>\n\n<span class=\"k\">DESCRIBE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500name\u2500\u252c\u2500type\u2500\u2500\u2500\u252c\u2500default_type\u2500\u252c\u2500default_expression\u2500\u252c\u2500comment\u2500\u252c\u2500codec_expression\u2500\u2510</span>\n<span class=\"err\">\u2502 url  \u2502 String \u2502              \u2502                    \u2502         \u2502                  \u2502</span>\n<span class=\"err\">\u2502 from \u2502 IPv6   \u2502              \u2502                    \u2502         \u2502                  \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u540c\u65f6\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>IPv6</code>\u7c7b\u578b\u7684\u5217\u4f5c\u4e3a\u4e3b\u952e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"k\">from</span> <span class=\"n\">IPv6</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">from</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u5728\u5199\u5165\u4e0e\u67e5\u8be2\u65f6\uff0c<code>IPv6</code>\u7c7b\u578b\u80fd\u591f\u8bc6\u522b\u53ef\u8bfb\u6027\u66f4\u52a0\u53cb\u597d\u7684\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;https://wikipedia.org&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2a02:aa08:e000:3100::2&#39;</span><span class=\"p\">)(</span><span class=\"s1\">&#39;https://clickhouse.yandex&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2001:44c8:129:2632:33:0:252:2&#39;</span><span class=\"p\">)(</span><span class=\"s1\">&#39;https://clickhouse.yandex/docs/en/&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2a02:e980:1e::1&#39;</span><span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500url\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500from\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 https://clickhouse.yandex          \u2502 2001:44c8:129:2632:33:0:252:2 \u2502</span>\n<span class=\"err\">\u2502 https://clickhouse.yandex/docs/en/ \u2502 2a02:e980:1e::1               \u2502</span>\n<span class=\"err\">\u2502 https://wikipedia.org              \u2502 2a02:aa08:e000:3100::2        \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u540c\u65f6\u5b83\u63d0\u4f9b\u66f4\u4e3a\u7d27\u51d1\u7684\u4e8c\u8fdb\u5236\u5b58\u50a8\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">),</span> <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(from)\u2500\u252c\u2500hex(from)\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 IPv6             \u2502 200144C8012926320033000002520002 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4e0d\u53ef\u9690\u5f0f\u8f6c\u6362\u4e3a\u9664<code>FixedString(16)</code>\u4ee5\u5916\u7684\u5176\u4ed6\u7c7b\u578b\u7c7b\u578b\u3002\u5982\u679c\u8981\u5c06<code>IPv6</code>\u7c7b\u578b\u7684\u503c\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>IPv6NumToString()</code>\u663e\u793a\u7684\u8fdb\u884c\u8f6c\u6362\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">),</span> <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">s</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(IPv6NumToString(from))\u2500\u252c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 String                            \u2502 2001:44c8:129:2632:33:0:252:2 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u6216\u4f7f\u7528<code>CAST</code>\u5c06\u5176\u8f6c\u6362\u4e3a<code>FixedString(16)</code>\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">),</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">from</span> <span class=\"k\">as</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">16</span><span class=\"p\">))</span> <span class=\"k\">as</span> <span class=\"n\">i</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(CAST(from, &#39;FixedString(16)&#39;))\u2500\u252c\u2500i\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 FixedString(16)                           \u2502  \ufffd\ufffd\ufffd \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"../../database_engines/\"></a><a name=\"../../../../database_engines/\"></a><a name=\"database_engines/\"></a><a name=\"../database_engines/\"></a><a name=\"../../../database_engines/\"></a><a name=\"../../../../../database_engines/\"></a></p>\n<h2 id=\"shu-ju-ku-yin-qing\">\u6570\u636e\u5e93\u5f15\u64ce<a class=\"headerlink\" href=\"#shu-ju-ku-yin-qing\" title=\"Permanent link\">&para;</a></h2>\n<p>\u60a8\u4f7f\u7528\u7684\u6240\u6709\u8868\u90fd\u662f\u7531\u6570\u636e\u5e93\u5f15\u64ce\u6240\u63d0\u4f9b\u7684</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cClickHouse\u4f7f\u7528\u81ea\u5df1\u7684\u6570\u636e\u5e93\u5f15\u64ce\uff0c\u8be5\u5f15\u64ce\u63d0\u4f9b\u53ef\u914d\u7f6e\u7684<a href=\"#../operations/table_engines/\">\u8868\u5f15\u64ce</a>\u548c<a href=\"#../query_language/syntax/\">\u6240\u6709\u652f\u6301\u7684SQL\u8bed\u6cd5</a>.</p>\n<p>\u9664\u6b64\u4e4b\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u4ee5\u4e0b\u7684\u6570\u636e\u5e93\u5f15\u64ce\uff1a</p>\n<ul>\n<li><a href=\"#mysql/\">MySQL</a></li>\n</ul>\n<p><a name=\"../../../../../database_engines/mysql/\"></a><a name=\"database_engines/mysql/\"></a><a name=\"../../database_engines/mysql/\"></a><a name=\"../database_engines/mysql/\"></a><a name=\"../../../../database_engines/mysql/\"></a><a name=\"mysql/\"></a><a name=\"../../../database_engines/mysql/\"></a></p>\n<h2 id=\"mysql\">MySQL<a class=\"headerlink\" href=\"#mysql\" title=\"Permanent link\">&para;</a></h2>\n<p>MySQL\u5f15\u64ce\u7528\u4e8e\u5c06\u8fdc\u7a0b\u7684MySQL\u670d\u52a1\u5668\u4e2d\u7684\u8868\u6620\u5c04\u5230ClickHouse\u4e2d\uff0c\u5e76\u5141\u8bb8\u60a8\u5bf9\u8868\u8fdb\u884c<code>INSERT</code>\u548c<code>SELECT</code>\u67e5\u8be2\uff0c\u4ee5\u65b9\u4fbf\u60a8\u5728ClickHouse\u4e0eMySQL\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u4ea4\u6362\u3002</p>\n<p><code>MySQL</code>\u6570\u636e\u5e93\u5f15\u64ce\u4f1a\u5c06\u5bf9\u5176\u7684\u67e5\u8be2\u8f6c\u6362\u4e3aMySQL\u8bed\u6cd5\u5e76\u53d1\u9001\u5230MySQL\u670d\u52a1\u5668\u4e2d\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u6267\u884c\u8bf8\u5982<code>SHOW TABLES</code>\u6216<code>SHOW CREATE TABLE</code>\u4e4b\u7c7b\u7684\u64cd\u4f5c\u3002</p>\n<p>\u4f46\u60a8\u65e0\u6cd5\u5bf9\u5176\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p>\n<ul>\n<li><code>ATTACH</code>/<code>DETACH</code></li>\n<li><code>DROP</code></li>\n<li><code>RENAME</code></li>\n<li><code>CREATE TABLE</code></li>\n<li><code>ALTER</code></li>\n</ul>\n<h3 id=\"create-database\">CREATE DATABASE<a class=\"headerlink\" href=\"#create-database\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">DATABASE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">db_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MySQL</span><span class=\"p\">(</span><span class=\"s1\">&#39;host:port&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;database&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>MySQL\u6570\u636e\u5e93\u5f15\u64ce\u53c2\u6570</strong></p>\n<ul>\n<li><code>host:port</code> \u2014 \u94fe\u63a5\u7684MySQL\u5730\u5740\u3002</li>\n<li><code>database</code> \u2014 \u94fe\u63a5\u7684MySQL\u6570\u636e\u5e93\u3002</li>\n<li><code>user</code> \u2014 \u94fe\u63a5\u7684MySQL\u7528\u6237\u3002</li>\n<li><code>password</code> \u2014 \u94fe\u63a5\u7684MySQL\u7528\u6237\u5bc6\u7801\u3002</li>\n</ul>\n<h3 id=\"zhi-chi-de-lei-xing-dui-ying\">\u652f\u6301\u7684\u7c7b\u578b\u5bf9\u5e94<a class=\"headerlink\" href=\"#zhi-chi-de-lei-xing-dui-ying\" title=\"Permanent link\">&para;</a></h3>\n<p>MySQL | ClickHouse<br />\n<a name=\"../../../../../operations/table_engines/\"></a><a name=\"operations/table_engines/\"></a><a name=\"../../../operations/table_engines/\"></a><a name=\"../../../../operations/table_engines/\"></a><a name=\"../operations/table_engines/\"></a><a name=\"../../operations/table_engines/\"></a><a name=\"table_engines/\"></a></p>\n<h2 id=\"biao-yin-qing\">\u8868\u5f15\u64ce<a class=\"headerlink\" href=\"#biao-yin-qing\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8868\u5f15\u64ce\uff08\u5373\u8868\u7684\u7c7b\u578b\uff09\u51b3\u5b9a\u4e86\uff1a</p>\n<ul>\n<li>\u6570\u636e\u7684\u5b58\u50a8\u65b9\u5f0f\u548c\u4f4d\u7f6e\uff0c\u5199\u5230\u54ea\u91cc\u4ee5\u53ca\u4ece\u54ea\u91cc\u8bfb\u53d6\u6570\u636e</li>\n<li>\u652f\u6301\u54ea\u4e9b\u67e5\u8be2\u4ee5\u53ca\u5982\u4f55\u652f\u6301\u3002</li>\n<li>\u5e76\u53d1\u6570\u636e\u8bbf\u95ee\u3002</li>\n<li>\u7d22\u5f15\u7684\u4f7f\u7528\uff08\u5982\u679c\u5b58\u5728\uff09\u3002</li>\n<li>\u662f\u5426\u53ef\u4ee5\u6267\u884c\u591a\u7ebf\u7a0b\u8bf7\u6c42\u3002</li>\n<li>\u6570\u636e\u590d\u5236\u53c2\u6570\u3002</li>\n</ul>\n<h2 id=\"yin-qing-lei-xing\">\u5f15\u64ce\u7c7b\u578b<a class=\"headerlink\" href=\"#yin-qing-lei-xing\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"mergetree\">MergeTree<a class=\"headerlink\" href=\"#mergetree\" title=\"Permanent link\">&para;</a></h3>\n<p>\u9002\u7528\u4e8e\u9ad8\u8d1f\u8f7d\u4efb\u52a1\u7684\u6700\u901a\u7528\u548c\u529f\u80fd\u6700\u5f3a\u5927\u7684\u8868\u5f15\u64ce\u3002\u8fd9\u4e9b\u5f15\u64ce\u7684\u5171\u540c\u7279\u70b9\u662f\u53ef\u4ee5\u5feb\u901f\u63d2\u5165\u6570\u636e\u5e76\u8fdb\u884c\u540e\u7eed\u7684\u540e\u53f0\u6570\u636e\u5904\u7406\u3002 MergeTree\u7cfb\u5217\u5f15\u64ce\u652f\u6301\u6570\u636e\u590d\u5236\uff08\u4f7f\u7528<a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/replication/\" rel=\"external nofollow noreferrer\">Replicated*</a> \u7684\u5f15\u64ce\u7248\u672c\uff09\uff0c\u5206\u533a\u548c\u4e00\u4e9b\u5176\u4ed6\u5f15\u64ce\u4e0d\u652f\u6301\u7684\u5176\u4ed6\u529f\u80fd\u3002</p>\n<p>\u8be5\u7c7b\u578b\u7684\u5f15\u64ce\uff1a\n* <a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/mergetree/\" rel=\"external nofollow noreferrer\">MergeTree</a>\n* <a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/replacingmergetree/\" rel=\"external nofollow noreferrer\">ReplacingMergeTree</a>\n* <a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/summingmergetree/\" rel=\"external nofollow noreferrer\">SummingMergeTree</a>\n* <a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/aggregatingmergetr");
            
            document.write("ee/\" rel=\"external nofollow noreferrer\">AggregatingMergeTree</a>\n* <a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/collapsingmergetree/\" rel=\"external nofollow noreferrer\">CollapsingMergeTree</a>\n* <a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/versionedcollapsingmergetree/\" rel=\"external nofollow noreferrer\">VersionedCollapsingMergeTree</a>\n* <a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/graphitemergetree/\" rel=\"external nofollow noreferrer\">GraphiteMergeTree</a></p>\n<h3 id=\"log\">Log<a class=\"headerlink\" href=\"#log\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5177\u6709\u6700\u5c0f\u529f\u80fd\u7684<a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/log_family/\" rel=\"external nofollow noreferrer\">\u8f7b\u91cf\u7ea7\u5f15\u64ce</a>\u3002\u5f53\u60a8\u9700\u8981\u5feb\u901f\u5199\u5165\u8bb8\u591a\u5c0f\u8868\uff08\u6700\u591a\u7ea6100\u4e07\u884c\uff09\u5e76\u5728\u4ee5\u540e\u6574\u4f53\u8bfb\u53d6\u5b83\u4eec\u65f6\uff0c\u8be5\u7c7b\u578b\u7684\u5f15\u64ce\u662f\u6700\u6709\u6548\u7684\u3002</p>\n<p>\u8be5\u7c7b\u578b\u7684\u5f15\u64ce\uff1a</p>\n<ul>\n<li>[TinyLog](<a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/tinylog/\">https://clickhouse.yandex/docs/en/operations/table_engines/tinylog/</a>\uff09</li>\n<li>[StripeLog](<a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/stripelog/\">https://clickhouse.yandex/docs/en/operations/table_engines/stripelog/</a>\uff09</li>\n<li>[Log](<a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/log/\">https://clickhouse.yandex/docs/en/operations/table_engines/log/</a>\uff09</li>\n</ul>\n<h3 id=\"intergation-engines\">Intergation engines<a class=\"headerlink\" href=\"#intergation-engines\" title=\"Permanent link\">&para;</a></h3>\n<p>\u7528\u4e8e\u4e0e\u5176\u4ed6\u7684\u6570\u636e\u5b58\u50a8\u4e0e\u5904\u7406\u7cfb\u7edf\u96c6\u6210\u7684\u5f15\u64ce\u3002<br />\n\u8be5\u7c7b\u578b\u7684\u5f15\u64ce\uff1a</p>\n<ul>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/kafka/\" rel=\"external nofollow noreferrer\">Kafka</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/mysql/\" rel=\"external nofollow noreferrer\">MySQL</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/odbc/\" rel=\"external nofollow noreferrer\">ODBC</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/jdbc/\" rel=\"external nofollow noreferrer\">JDBC</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/hdfs/\" rel=\"external nofollow noreferrer\">HDFS</a></li>\n</ul>\n<h3 id=\"yong-yu-qi-ta-te-ding-gong-neng-de-yin-qing\">\u7528\u4e8e\u5176\u4ed6\u7279\u5b9a\u529f\u80fd\u7684\u5f15\u64ce<a class=\"headerlink\" href=\"#yong-yu-qi-ta-te-ding-gong-neng-de-yin-qing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8be5\u7c7b\u578b\u7684\u5f15\u64ce\uff1a</p>\n<ul>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/distributed/\" rel=\"external nofollow noreferrer\">Distributed</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/materializedview/\" rel=\"external nofollow noreferrer\">MaterializedView</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/dictionary/\" rel=\"external nofollow noreferrer\">Dictionary</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/merge/\" rel=\"external nofollow noreferrer\">Merge</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/file/\" rel=\"external nofollow noreferrer\">File</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/null/\" rel=\"external nofollow noreferrer\">Null</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/set/\" rel=\"external nofollow noreferrer\">Set</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/join/\" rel=\"external nofollow noreferrer\">Join</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/url/\" rel=\"external nofollow noreferrer\">URL</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/view/\" rel=\"external nofollow noreferrer\">View</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/memory/\" rel=\"external nofollow noreferrer\">Memory</a></li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/buffer/\" rel=\"external nofollow noreferrer\">Buffer</a></li>\n</ul>\n<h2 id=\"xu-ni-lie\">\u865a\u62df\u5217<a class=\"headerlink\" href=\"#xu-ni-lie\" title=\"Permanent link\">&para;</a></h2>\n<p>\u865a\u62df\u5217\u662f\u8868\u5f15\u64ce\u7ec4\u6210\u7684\u4e00\u90e8\u5206\uff0c\u5b83\u5728\u5bf9\u5e94\u7684\u8868\u5f15\u64ce\u7684\u6e90\u4ee3\u7801\u4e2d\u5b9a\u4e49\u3002</p>\n<p>\u60a8\u4e0d\u80fd\u5728 <code>CREATE TABLE</code> \u4e2d\u6307\u5b9a\u865a\u62df\u5217\uff0c\u5e76\u4e14\u865a\u62df\u5217\u4e0d\u4f1a\u5305\u542b\u5728 <code>SHOW CREATE TABLE</code> \u548c <code>DESCRIBE TABLE</code> \u7684\u67e5\u8be2\u7ed3\u679c\u4e2d\u3002\u865a\u62df\u5217\u662f\u53ea\u8bfb\u7684\uff0c\u6240\u4ee5\u60a8\u4e0d\u80fd\u5411\u865a\u62df\u5217\u4e2d\u5199\u5165\u6570\u636e\u3002</p>\n<p>\u5982\u679c\u60f3\u8981\u67e5\u8be2\u865a\u62df\u5217\u4e2d\u7684\u6570\u636e\uff0c\u60a8\u5fc5\u987b\u5728SELECT\u67e5\u8be2\u4e2d\u5305\u542b\u865a\u62df\u5217\u7684\u540d\u5b57\u3002SELECT * \u4e0d\u4f1a\u8fd4\u56de\u865a\u62df\u5217\u7684\u5185\u5bb9\u3002</p>\n<p>\u82e5\u60a8\u521b\u5efa\u7684\u8868\u4e2d\u6709\u4e00\u5217\u4e0e\u865a\u62df\u5217\u7684\u540d\u5b57\u76f8\u540c\uff0c\u90a3\u4e48\u865a\u62df\u5217\u5c06\u4e0d\u80fd\u518d\u88ab\u8bbf\u95ee\u3002\u6211\u4eec\u4e0d\u5efa\u8bae\u60a8\u8fd9\u6837\u505a\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u5217\u540d\u7684\u51b2\u7a81\uff0c\u865a\u62df\u5217\u7684\u540d\u5b57\u4e00\u822c\u90fd\u4ee5\u4e0b\u5212\u7ebf\u5f00\u5934\u3002<br />\n<a name=\"table_engines/mergetree/\"></a><a name=\"../../../table_engines/mergetree/\"></a><a name=\"../../../../table_engines/mergetree/\"></a><a name=\"../../table_engines/mergetree/\"></a><a name=\"../../../../../operations/table_engines/mergetree/\"></a><a name=\"../../../../../table_engines/mergetree/\"></a><a name=\"../table_engines/mergetree/\"></a><a name=\"../../operations/table_engines/mergetree/\"></a><a name=\"mergetree/\"></a><a name=\"../../../operations/table_engines/mergetree/\"></a><a name=\"../../../../operations/table_engines/mergetree/\"></a><a name=\"../../../../../../table_engines/mergetree/\"></a><a name=\"operations/table_engines/mergetree/\"></a><a name=\"../operations/table_engines/mergetree/\"></a></p>\n<h2 id=\"table_engines-mergetree\">MergeTree<a class=\"headerlink\" href=\"#table_engines-mergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>Clickhouse \u4e2d\u6700\u5f3a\u5927\u7684\u8868\u5f15\u64ce\u5f53\u5c5e <code>MergeTree</code> \uff08\u5408\u5e76\u6811\uff09\u5f15\u64ce\u53ca\u8be5\u7cfb\u5217\uff08<code>*MergeTree</code>\uff09\u4e2d\u7684\u5176\u4ed6\u5f15\u64ce\u3002</p>\n<p><code>MergeTree</code> \u5f15\u64ce\u7cfb\u5217\u7684\u57fa\u672c\u7406\u5ff5\u5982\u4e0b\u3002\u5f53\u4f60\u6709\u5de8\u91cf\u6570\u636e\u8981\u63d2\u5165\u5230\u8868\u4e2d\uff0c\u4f60\u8981\u9ad8\u6548\u5730\u4e00\u6279\u6279\u5199\u5165\u6570\u636e\u7247\u6bb5\uff0c\u5e76\u5e0c\u671b\u8fd9\u4e9b\u6570\u636e\u7247\u6bb5\u5728\u540e\u53f0\u6309\u7167\u4e00\u5b9a\u89c4\u5219\u5408\u5e76\u3002\u76f8\u6bd4\u5728\u63d2\u5165\u65f6\u4e0d\u65ad\u4fee\u6539\uff08\u91cd\u5199\uff09\u6570\u636e\u8fdb\u5b58\u50a8\uff0c\u8fd9\u79cd\u7b56\u7565\u4f1a\u9ad8\u6548\u5f88\u591a\u3002</p>\n<p>\u4e3b\u8981\u7279\u70b9:</p>\n<ul>\n<li>\n<p>\u5b58\u50a8\u7684\u6570\u636e\u6309\u4e3b\u952e\u6392\u5e8f\u3002</p>\n<p>\u8fd9\u8ba9\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7528\u4e8e\u5feb\u901f\u68c0\u7d22\u6570\u636e\u7684\u5c0f\u7a00\u758f\u7d22\u5f15\u3002</p>\n</li>\n<li>\n<p>\u5141\u8bb8\u4f7f\u7528\u5206\u533a\uff0c\u5982\u679c\u6307\u5b9a\u4e86 <a href=\"#custom_partitioning_key/\">\u5206\u533a\u952e</a> \u7684\u8bdd\u3002</p>\n<p>\u5728\u76f8\u540c\u6570\u636e\u96c6\u548c\u76f8\u540c\u7ed3\u679c\u96c6\u7684\u60c5\u51b5\u4e0b ClickHouse \u4e2d\u67d0\u4e9b\u5e26\u5206\u533a\u7684\u64cd\u4f5c\u4f1a\u6bd4\u666e\u901a\u64cd\u4f5c\u66f4\u5feb\u3002\u67e5\u8be2\u4e2d\u6307\u5b9a\u4e86\u5206\u533a\u952e\u65f6 ClickHouse \u4f1a\u81ea\u52a8\u622a\u53d6\u5206\u533a\u6570\u636e\u3002\u8fd9\u4e5f\u6709\u6548\u589e\u52a0\u4e86\u67e5\u8be2\u6027\u80fd\u3002</p>\n</li>\n<li>\n<p>\u652f\u6301\u6570\u636e\u526f\u672c\u3002</p>\n<p><code>ReplicatedMergeTree</code> \u7cfb\u5217\u7684\u8868\u4fbf\u662f\u7528\u4e8e\u6b64\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <a href=\"#replication/\">\u6570\u636e\u526f\u672c</a> \u4e00\u8282\u3002</p>\n</li>\n<li>\n<p>\u652f\u6301\u6570\u636e\u91c7\u6837\u3002</p>\n<p>\u9700\u8981\u7684\u8bdd\uff0c\u4f60\u53ef\u4ee5\u7ed9\u8868\u8bbe\u7f6e\u4e00\u4e2a\u91c7\u6837\u65b9\u6cd5\u3002</p>\n</li>\n</ul>\n<div class=\"admonition \u6ce8\u610f\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p><a href=\"#merge/\">Merge</a> \u5f15\u64ce\u5e76\u4e0d\u5c5e\u4e8e <code>*MergeTree</code> \u7cfb\u5217\u3002</p>\n</div>\n<h3 id=\"table_engine-mergetree-creating-a-table\">\u5efa\u8868<a class=\"headerlink\" href=\"#table_engine-mergetree-creating-a-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span><span class=\"w\"> </span><span class=\"nc\">TABLE</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IF NOT EXISTS</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">db.</span><span class=\"o\">]</span><span class=\"n\">table_name</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ON CLUSTER cluster</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">name1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr1</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">name2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type2</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr2</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">...</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">INDEX</span><span class=\"w\"> </span><span class=\"n\">index_name1</span><span class=\"w\"> </span><span class=\"n\">expr1</span><span class=\"w\"> </span><span class=\"n\">TYPE</span><span class=\"w\"> </span><span class=\"n\">type1</span><span class=\"p\">(...)</span><span class=\"w\"> </span><span class=\"n\">GRANULARITY</span><span class=\"w\"> </span><span class=\"n\">value1</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">INDEX</span><span class=\"w\"> </span><span class=\"n\">index_name2</span><span class=\"w\"> </span><span class=\"n\">expr2</span><span class=\"w\"> </span><span class=\"n\">TYPE</span><span class=\"w\"> </span><span class=\"n\">type2</span><span class=\"p\">(...)</span><span class=\"w\"> </span><span class=\"n\">GRANULARITY</span><span class=\"w\"> </span><span class=\"n\">value2</span><span class=\"w\"></span>\n<span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">ENGINE</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">MergeTree</span><span class=\"p\">()</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">PARTITION BY expr</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">ORDER BY expr</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">PRIMARY KEY expr</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">SAMPLE BY expr</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">SETTINGS name=value, ...</span><span class=\"o\">]</span><span class=\"w\"></span>\n</code></pre></div>\n\n\n<p>\u8bf7\u6c42\u53c2\u6570\u7684\u63cf\u8ff0\uff0c\u53c2\u8003 <a href=\"#../../query_language/create/\">\u8bf7\u6c42\u63cf\u8ff0</a> \u3002</p>\n<p><strong>\u5b50\u53e5</strong></p>\n<ul>\n<li>\n<p><code>ENGINE</code> - \u5f15\u64ce\u540d\u548c\u53c2\u6570\u3002 <code>ENGINE = MergeTree()</code>. <code>MergeTree</code> \u5f15\u64ce\u6ca1\u6709\u53c2\u6570\u3002</p>\n</li>\n<li>\n<p><code>PARTITION BY</code> \u2014 <a href=\"#custom_partitioning_key/\">\u5206\u533a\u952e</a> \u3002</p>\n<p>\u8981\u6309\u6708\u5206\u533a\uff0c\u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f <code>toYYYYMM(date_column)</code> \uff0c\u8fd9\u91cc\u7684 <code>date_column</code> \u662f\u4e00\u4e2a <a href=\"#../../data_types/date/\">Date</a> \u7c7b\u578b\u7684\u5217\u3002\u8fd9\u91cc\u8be5\u5206\u533a\u540d\u683c\u5f0f\u4f1a\u662f <code>\"YYYYMM\"</code> \u8fd9\u6837\u3002</p>\n</li>\n<li>\n<p><code>ORDER BY</code> \u2014 \u8868\u7684\u6392\u5e8f\u952e\u3002</p>\n<p>\u53ef\u4ee5\u662f\u4e00\u7ec4\u5217\u7684\u5143\u7ec4\u6216\u4efb\u610f\u7684\u8868\u8fbe\u5f0f\u3002 \u4f8b\u5982: <code>ORDER BY (CounterID, EventDate)</code> \u3002</p>\n</li>\n<li>\n<p><code>PRIMARY KEY</code> - \u4e3b\u952e\uff0c\u5982\u679c\u8981\u8bbe\u6210 <a href=\"#mergetree/\">\u8ddf\u6392\u5e8f\u952e\u4e0d\u76f8\u540c</a>\u3002</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3b\u952e\u8ddf\u6392\u5e8f\u952e\uff08\u7531 <code>ORDER BY</code> \u5b50\u53e5\u6307\u5b9a\uff09\u76f8\u540c\u3002<br />\n\u56e0\u6b64\uff0c\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u4e0d\u9700\u8981\u518d\u4e13\u95e8\u6307\u5b9a\u4e00\u4e2a <code>PRIMARY KEY</code> \u5b50\u53e5\u3002</p>\n</li>\n<li>\n<p><code>SAMPLE BY</code> \u2014 \u7528\u4e8e\u62bd\u6837\u7684\u8868\u8fbe\u5f0f\u3002</p>\n<p>\u5982\u679c\u8981\u7528\u62bd\u6837\u8868\u8fbe\u5f0f\uff0c\u4e3b\u952e\u4e2d\u5fc5\u987b\u5305\u542b\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u3002\u4f8b\u5982\uff1a<br />\n<code>SAMPLE BY intHash32(UserID) ORDER BY (CounterID, EventDate, intHash32(UserID))</code> \u3002</p>\n</li>\n<li>\n<p><code>SETTINGS</code> \u2014 \u5f71\u54cd <code>MergeTree</cod");
            
            document.write("e> \u6027\u80fd\u7684\u989d\u5916\u53c2\u6570\uff1a</p>\n<ul>\n<li><code>index_granularity</code> \u2014 \u7d22\u5f15\u7c92\u5ea6\u3002\u5373\u7d22\u5f15\u4e2d\u76f8\u90bb\u300e\u6807\u8bb0\u300f\u95f4\u7684\u6570\u636e\u884c\u6570\u3002\u9ed8\u8ba4\u503c\uff0c8192 \u3002\u8be5\u5217\u8868\u4e2d\u6240\u6709\u53ef\u7528\u7684\u53c2\u6570\u53ef\u4ee5\u4ece\u8fd9\u91cc\u67e5\u770b <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/src/Storages/MergeTree/MergeTreeSettings.h\" rel=\"external nofollow noreferrer\">MergeTreeSettings.h</a> \u3002</li>\n<li><code>use_minimalistic_part_header_in_zookeeper</code> \u2014 \u6570\u636e\u7247\u6bb5\u5934\u5728 ZooKeeper \u4e2d\u7684\u5b58\u50a8\u65b9\u5f0f\u3002\u5982\u679c\u8bbe\u7f6e\u4e86 <code>use_minimalistic_part_header_in_zookeeper=1</code> \uff0cZooKeeper \u4f1a\u5b58\u50a8\u66f4\u5c11\u7684\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u53c2\u8003\u300e\u670d\u52a1\u914d\u7f6e\u53c2\u6570\u300f\u8fd9\u7ae0\u4e2d\u7684 <a href=\"#server-settings-use_minimalistic_part_header_in_zookeeper\">\u8bbe\u7f6e\u63cf\u8ff0</a> \u3002</li>\n<li><code>min_merge_bytes_to_use_direct_io</code> \u2014 \u4f7f\u7528\u76f4\u63a5 I/O \u6765\u64cd\u4f5c\u78c1\u76d8\u7684\u5408\u5e76\u64cd\u4f5c\u65f6\u8981\u6c42\u7684\u6700\u5c0f\u6570\u636e\u91cf\u3002\u5408\u5e76\u6570\u636e\u7247\u6bb5\u65f6\uff0cClickHouse \u4f1a\u8ba1\u7b97\u8981\u88ab\u5408\u5e76\u7684\u6240\u6709\u6570\u636e\u7684\u603b\u5b58\u50a8\u7a7a\u95f4\u3002\u5982\u679c\u5927\u5c0f\u8d85\u8fc7\u4e86 <code>min_merge_bytes_to_use_direct_io</code> \u8bbe\u7f6e\u7684\u5b57\u8282\u6570\uff0c\u5219 ClickHouse \u5c06\u4f7f\u7528\u76f4\u63a5 I/O \u63a5\u53e3\uff08<code>O_DIRECT</code> \u9009\u9879\uff09\u5bf9\u78c1\u76d8\u8bfb\u5199\u3002\u5982\u679c\u8bbe\u7f6e <code>min_merge_bytes_to_use_direct_io = 0</code> \uff0c\u5219\u4f1a\u7981\u7528\u76f4\u63a5 I/O\u3002\u9ed8\u8ba4\u503c\uff1a<code>10 * 1024 * 1024 * 1024</code> \u5b57\u8282\u3002</li>\n</ul>\n</li>\n</ul>\n<p><strong>\u793a\u4f8b\u914d\u7f6e</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">ENGINE MergeTree() PARTITION BY toYYYYMM(EventDate) ORDER BY (CounterID, EventDate, intHash32(UserID)) SAMPLE BY intHash32(UserID) SETTINGS index_granularity=8192</span>\n</code></pre></div>\n\n\n<p>\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u8bbe\u4e3a\u6309\u6708\u5206\u533a\u3002</p>\n<p>\u540c\u65f6\u6211\u4eec\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u6309\u7528\u6237ID\u54c8\u5e0c\u7684\u62bd\u6837\u8868\u8fbe\u5f0f\u3002\u8fd9\u8ba9\u4f60\u53ef\u4ee5\u6709\u8be5\u8868\u4e2d\u6bcf\u4e2a <code>CounterID</code> \u548c <code>EventDate</code> \u4e0b\u9762\u7684\u6570\u636e\u7684\u4f2a\u968f\u673a\u5206\u5e03\u3002\u5982\u679c\u4f60\u5728\u67e5\u8be2\u65f6\u6307\u5b9a\u4e86 <a href=\"#select-sample-clause\">SAMPLE</a> \u5b50\u53e5\u3002 ClickHouse\u4f1a\u8fd4\u56de\u5bf9\u4e8e\u7528\u6237\u5b50\u96c6\u7684\u4e00\u4e2a\u5747\u5300\u7684\u4f2a\u968f\u673a\u6570\u636e\u91c7\u6837\u3002</p>\n<p><code>index_granularity</code> \u53ef\u7701\u7565\uff0c\u9ed8\u8ba4\u503c\u4e3a 8192 \u3002</p>\n<details>\n<p><summary>\u5df2\u5f03\u7528\u7684\u5efa\u8868\u65b9\u6cd5</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u4e0d\u8981\u5728\u65b0\u7248\u9879\u76ee\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u53ef\u80fd\u7684\u8bdd\uff0c\u8bf7\u5c06\u65e7\u9879\u76ee\u5207\u6362\u5230\u4e0a\u8ff0\u65b9\u6cd5\u3002</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span><span class=\"w\"> </span><span class=\"nc\">TABLE</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IF NOT EXISTS</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">db.</span><span class=\"o\">]</span><span class=\"n\">table_name</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ON CLUSTER cluster</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">name1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr1</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">name2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type2</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr2</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">...</span><span class=\"w\"></span>\n<span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">ENGINE</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">=</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nc\">date</span><span class=\"o\">-</span><span class=\"k\">column</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">, sampling_expression</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">key</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">index_granularity</span><span class=\"p\">)</span><span class=\"w\"></span>\n</code></pre></div>\n\n\n<p><strong>MergeTree() \u53c2\u6570</strong></p>\n<ul>\n<li><code>date-column</code> \u2014 \u7c7b\u578b\u4e3a <a href=\"#../../data_types/date/\">Date</a> \u7684\u5217\u540d\u3002ClickHouse \u4f1a\u81ea\u52a8\u4f9d\u636e\u8fd9\u4e2a\u5217\u6309\u6708\u521b\u5efa\u5206\u533a\u3002\u5206\u533a\u540d\u683c\u5f0f\u4e3a <code>\"YYYYMM\"</code> \u3002</li>\n<li><code>sampling_expression</code> \u2014 \u91c7\u6837\u8868\u8fbe\u5f0f\u3002</li>\n<li><code>(primary, key)</code> \u2014 \u4e3b\u952e\u3002\u7c7b\u578b \u2014 <a href=\"#../../data_types/tuple/\">Tuple()</a></li>\n<li><code>index_granularity</code> \u2014 \u7d22\u5f15\u7c92\u5ea6\u3002\u5373\u7d22\u5f15\u4e2d\u76f8\u90bb\u300e\u6807\u8bb0\u300f\u95f4\u7684\u6570\u636e\u884c\u6570\u3002\u8bbe\u4e3a 8192 \u53ef\u4ee5\u9002\u7528\u5927\u90e8\u5206\u573a\u666f\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">MergeTree(EventDate, intHash32(UserID), (CounterID, EventDate, intHash32(UserID)), 8192)</span>\n</code></pre></div>\n\n\n<p>\u5bf9\u4e8e\u4e3b\u8981\u7684\u914d\u7f6e\u65b9\u6cd5\uff0c\u8fd9\u91cc <code>MergeTree</code> \u5f15\u64ce\u8ddf\u524d\u9762\u7684\u4f8b\u5b50\u4e00\u6837\uff0c\u53ef\u4ee5\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u914d\u7f6e\u3002</p>\n</details>\n<h3 id=\"shu-ju-cun-chu\">\u6570\u636e\u5b58\u50a8<a class=\"headerlink\" href=\"#shu-ju-cun-chu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8868\u7531\u6309\u4e3b\u952e\u6392\u5e8f\u7684\u6570\u636e <em>\u7247\u6bb5</em> \u7ec4\u6210\u3002</p>\n<p>\u5f53\u6570\u636e\u88ab\u63d2\u5165\u5230\u8868\u4e2d\u65f6\uff0c\u4f1a\u5206\u6210\u6570\u636e\u7247\u6bb5\u5e76\u6309\u4e3b\u952e\u7684\u5b57\u5178\u5e8f\u6392\u5e8f\u3002\u4f8b\u5982\uff0c\u4e3b\u952e\u662f <code>(CounterID, Date)</code> \u65f6\uff0c\u7247\u6bb5\u4e2d\u6570\u636e\u6309 <code>CounterID</code> \u6392\u5e8f\uff0c\u5177\u6709\u76f8\u540c <code>CounterID</code> \u7684\u90e8\u5206\u6309 <code>Date</code> \u6392\u5e8f\u3002</p>\n<p>\u4e0d\u540c\u5206\u533a\u7684\u6570\u636e\u4f1a\u88ab\u5206\u6210\u4e0d\u540c\u7684\u7247\u6bb5\uff0cClickHouse \u5728\u540e\u53f0\u5408\u5e76\u6570\u636e\u7247\u6bb5\u4ee5\u4fbf\u66f4\u9ad8\u6548\u5b58\u50a8\u3002\u4e0d\u4f1a\u5408\u5e76\u6765\u81ea\u4e0d\u540c\u5206\u533a\u7684\u6570\u636e\u7247\u6bb5\u3002\u8fd9\u4e2a\u5408\u5e76\u673a\u5236\u5e76\u4e0d\u4fdd\u8bc1\u76f8\u540c\u4e3b\u952e\u7684\u6240\u6709\u884c\u90fd\u4f1a\u5408\u5e76\u5230\u540c\u4e00\u4e2a\u6570\u636e\u7247\u6bb5\u4e2d\u3002</p>\n<p>ClickHouse \u4f1a\u4e3a\u6bcf\u4e2a\u6570\u636e\u7247\u6bb5\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u6587\u4ef6\uff0c\u7d22\u5f15\u6587\u4ef6\u5305\u542b\u6bcf\u4e2a\u7d22\u5f15\u884c\uff08\u300e\u6807\u8bb0\u300f\uff09\u7684\u4e3b\u952e\u503c\u3002\u7d22\u5f15\u884c\u53f7\u5b9a\u4e49\u4e3a <code>n * index_granularity</code> \u3002\u6700\u5927\u7684 <code>n</code> \u7b49\u4e8e\u603b\u884c\u6570\u9664\u4ee5 <code>index_granularity</code> \u7684\u503c\u7684\u6574\u6570\u90e8\u5206\u3002\u5bf9\u4e8e\u6bcf\u5217\uff0c\u8ddf\u4e3b\u952e\u76f8\u540c\u7684\u7d22\u5f15\u884c\u5904\u4e5f\u4f1a\u5199\u5165\u300e\u6807\u8bb0\u300f\u3002\u8fd9\u4e9b\u300e\u6807\u8bb0\u300f\u8ba9\u4f60\u53ef\u4ee5\u76f4\u63a5\u627e\u5230\u6570\u636e\u6240\u5728\u7684\u5217\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u53ea\u7528\u4e00\u5355\u4e00\u5927\u8868\u5e76\u4e0d\u65ad\u5730\u4e00\u5757\u5757\u5f80\u91cc\u9762\u52a0\u5165\u6570\u636e \u2013 <code>MergeTree</code> \u5f15\u64ce\u7684\u5c31\u662f\u4e3a\u4e86\u8fd9\u6837\u7684\u573a\u666f\u3002</p>\n<h3 id=\"primary-keys-and-indexes-in-queries\">\u4e3b\u952e\u548c\u7d22\u5f15\u5728\u67e5\u8be2\u4e2d\u7684\u8868\u73b0<a class=\"headerlink\" href=\"#primary-keys-and-indexes-in-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6211\u4eec\u4ee5 <code>(CounterID, Date)</code> \u4ee5\u4e3b\u952e\u3002\u6392\u5e8f\u597d\u7684\u7d22\u5f15\u7684\u56fe\u793a\u4f1a\u662f\u4e0b\u9762\u8fd9\u6837\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">\u5168\u90e8\u6570\u636e</span><span class=\"w\">  </span><span class=\"err\">:</span><span class=\"w\">     </span><span class=\"o\">[</span><span class=\"n\">-------------------------------------------------------------------------</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"nl\">CounterID</span><span class=\"p\">:</span><span class=\"w\">      </span><span class=\"o\">[</span><span class=\"n\">aaaaaaaaaaaaaaaaaabbbbcdeeeeeeeeeeeeefgggggggghhhhhhhhhiiiiiiiiikllllllll</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"nc\">Date</span><span class=\"err\">:</span><span class=\"w\">           </span><span class=\"o\">[</span><span class=\"n\">1111111222222233331233211111222222333211111112122222223111112223311122333</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"nl\">\u6807\u8bb0</span><span class=\"p\">:</span><span class=\"w\">            </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"w\">    </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"w\">    </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\">    </span><span class=\"n\">b</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\">    </span><span class=\"n\">e</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"w\">    </span><span class=\"n\">e</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\">    </span><span class=\"n\">g</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"w\">    </span><span class=\"n\">h</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"w\">    </span><span class=\"n\">i</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"w\">    </span><span class=\"n\">i</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\">    </span><span class=\"n\">l</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\"></span>\n<span class=\"nl\">\u6807\u8bb0\u53f7</span><span class=\"p\">:</span><span class=\"w\">          </span><span class=\"mi\">0</span><span class=\"w\">      </span><span class=\"mi\">1</span><span class=\"w\">      </span><span class=\"mi\">2</span><span class=\"w\">      </span><span class=\"mi\">3</span><span class=\"w\">      </span><span class=\"mi\">4</span><span class=\"w\">      </span><span class=\"mi\">5</span><span class=\"w\">      </span><span class=\"mi\">6</span><span class=\"w\">      </span><span class=\"mi\">7</span><span class=\"w\">      </span><span class=\"mi\">8</span><span class=\"w\">      </span><span class=\"mi\">9</span><span class=\"w\">      </span><span class=\"mi\">10</span><span class=\"w\"></span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u6307\u5b9a\u67e5\u8be2\u5982\u4e0b\uff1a</p>\n<ul>\n<li><code>CounterID in ('a', 'h')</code>\uff0c\u670d\u52a1\u5668\u4f1a\u8bfb\u53d6\u6807\u8bb0\u53f7\u5728 <code>[0, 3)</code> \u548c <code>[6, 8)</code> \u533a\u95f4\u4e2d\u7684\u6570\u636e\u3002</li>\n<li><code>CounterID IN ('a', 'h') AND Date = 3</code>\uff0c\u670d\u52a1\u5668\u4f1a\u8bfb\u53d6\u6807\u8bb0\u53f7\u5728 <code>[1, 3)</code> \u548c <code>[7, 8)</code> \u533a\u95f4\u4e2d\u7684\u6570\u636e\u3002</li>\n<li><code>Date = 3</code>\uff0c\u670d\u52a1\u5668\u4f1a\u8bfb\u53d6\u6807\u8bb0\u53f7\u5728 <code>[1, 10]</code> \u533a\u95f4\u4e2d\u7684\u6570\u636e\u3002</li>\n</ul>\n<p>\u4e0a\u9762\u4f8b\u5b50\u53ef\u4ee5\u770b\u51fa\u4f7f\u7528\u7d22\u5f15\u901a\u5e38\u4f1a\u6bd4\u5168\u8868\u63cf\u8ff0\u8981\u9ad8\u6548\u3002</p>\n<p>\u7a00\u758f\u7d22\u5f15\u4f1a\u5f15\u8d77\u989d\u5916\u7684\u6570\u636e\u8bfb\u53d6\u3002\u5f53\u8bfb\u53d6\u4e3b\u952e\u5355\u4e2a\u533a\u95f4\u8303\u56f4\u7684\u6570\u636e\u65f6\uff0c\u6bcf\u4e2a\u6570\u636e\u5757\u4e2d\u6700\u591a\u4f1a\u591a\u8bfb <code>index_granularity * 2</code> \u884c\u989d\u5916\u7684\u6570\u636e\u3002\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u5f53 <code>index_granularity = 8192</code> \u65f6\uff0cClickHouse\u7684\u6027\u80fd\u5e76\u4e0d\u4f1a\u964d\u7ea7\u3002</p>\n<p>\u7a00\u758f\u7d22\u5f15\u8ba9\u4f60\u80fd\u64cd\u4f5c\u6709\u5de8\u91cf\u884c\u7684\u8868\u3002\u56e0\u4e3a\u8fd9\u4e9b\u7d22\u5f15\u662f\u5e38\u9a7b\u5185\u5b58\uff08RAM\uff09\u7684\u3002</p>\n<p>ClickHouse \u4e0d\u8981\u6c42\u4e3b\u952e\u60df\u4e00\u3002\u6240\u4ee5\uff0c\u4f60\u53ef\u4ee5\u63d2\u5165\u591a\u6761\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u884c\u3002</p>\n<h4 id=\"zhu-jian-de-xuan-ze\">\u4e3b\u952e\u7684\u9009\u62e9<a class=\"headerlink\" href=\"#zhu-jian-de-xuan-ze\" title=\"Permanent link\">&para;</a></h4>\n<p>\u4e3b\u952e\u4e2d\u5217\u7684\u6570\u91cf\u5e76\u6ca1\u6709\u660e\u786e\u7684\u9650\u5236\u3002\u4f9d\u636e\u6570\u636e\u7ed3\u6784\uff0c\u4f60\u5e94\u8be5\u8ba9\u4e3b\u952e\u5305\u542b\u591a\u4e9b\u6216\u5c11\u4e9b\u5217\u3002\u8fd9\u6837\u53ef\u4ee5\uff1a</p>\n<ul>\n<li>\n<p>\u6539\u5584\u7d22\u5f15\u7684\u6027\u80fd\u3002</p>\n<p>\u5982\u679c\u5f53\u524d\u4e3b\u952e\u662f <code>(a, b)</code> \uff0c\u7136\u540e\u52a0\u5165\u53e6\u4e00\u4e2a <code>c</code> \u5217\uff0c\u6ee1\u8db3\u4e0b\u9762\u6761\u4ef6\u65f6\uff0c\u5219\u53ef\u4ee5\u6539\u5584\u6027\u80fd\uff1a<br />\n- \u6709\u5e26\u6709 <code>c</code> \u5217\u6761\u4ef6\u7684\u67e5\u8be2\u3002<br />\n- \u5f88\u957f\u7684\u6570\u636e\u8303\u56f4\uff08 <code>index_granularity</code> \u7684\u6570\u500d\uff09\u91cc <code>(a, b)</code> \u90fd\u662f\u76f8\u540c\u7684\u503c\uff0c\u5e76\u4e14\u8fd9\u79cd\u7684\u60c5\u51b5\u5f88\u666e\u904d\u3002\u6362\u8a00\u4e4b\uff0c\u5c31\u662f\u52a0\u5165\u53e6\u4e00\u5217\u540e\uff0c\u53ef\u4ee5\u8ba9\u4f60\u7684\u67e5\u8be2\u7565\u8fc7\u5f88\u957f\u7684\u6570\u636e\u8303\u56f4\u3002</p>\n</li>\n<li>\n<p>\u6539\u5584\u6570\u636e\u538b\u7f29\u3002</p>\n<p>ClickHouse \u4ee5\u4e3b\u952e\u6392\u5e8f\u7247\u6bb5\u6570\u636e\uff0c\u6240\u4ee5\uff0c\u6570\u636e\u7684\u4e00\u81f4\u6027\u8d8a\u9ad8\uff0c\u538b\u7f29\u8d8a\u597d\u3002</p>\n</li>\n<li>\n<p><a href=\"#table_engine-collapsingmergetree\">CollapsingMergeTree</a> \u548c <a href=\"#summingmergetree/\">SummingMergeTree</a> \u5f15\u64ce\u91cc\uff0c\u6570\u636e\u5408\u5e76\u65f6\uff0c\u4f1a\u6709\u989d\u5916\u7684\u5904\u7406\u903b\u8f91\u3002</p>\n<p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6307\u5b9a\u4e00\u4e2a\u8ddf\u4e3b\u952e\u4e0d\u540c\u7684 <em>\u6392\u5e8f\u952e</em> \u4e5f\u662f\u6709\u610f\u4e49\u7684\u3002</p>\n</li>\n</ul>\n<p>\u957f\u7684\u4e3b\u952e\u4f1a\u5bf9\u63d2\u5165\u6027\u80fd\u548c\u5185\u5b58\u6d88\u8017\u6709\u8d1f\u9762\u5f71\u54cd\uff0c\u4f46\u4e3b\u952e\u4e2d\u989d\u5916\u7684\u5217\u5e76\u4e0d\u5f71\u54cd <code>SELECT</code> \u67e5\u8be2\u7684\u6027\u80fd\u3002</p>\n<h4 id=\"xuan-ze-gen-pai-xu-jian-bu-yi-yang-zhu-jian\">\u9009\u62e9\u8ddf\u6392\u5e8f\u952e\u4e0d\u4e00\u6837\u4e3b\u952e<a class=\"headerlink\" href=\"#xuan-ze-gen-pai-xu-jian-bu-yi-yang-zhu-jian\" title=\"Permanent link");
            
            document.write("\">&para;</a></h4>\n<p>\u6307\u5b9a\u4e00\u4e2a\u8ddf\u6392\u5e8f\u952e\uff08\u7528\u4e8e\u6392\u5e8f\u6570\u636e\u7247\u6bb5\u4e2d\u884c\u7684\u8868\u8fbe\u5f0f\uff09<br />\n\u4e0d\u4e00\u6837\u7684\u4e3b\u952e\uff08\u7528\u4e8e\u8ba1\u7b97\u5199\u5230\u7d22\u5f15\u6587\u4ef6\u7684\u6bcf\u4e2a\u6807\u8bb0\u503c\u7684\u8868\u8fbe\u5f0f\uff09\u662f\u53ef\u4ee5\u7684\u3002<br />\n\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e3b\u952e\u8868\u8fbe\u5f0f\u5143\u7ec4\u5fc5\u987b\u662f\u6392\u5e8f\u952e\u8868\u8fbe\u5f0f\u5143\u7ec4\u7684\u4e00\u4e2a\u524d\u7f00\u3002</p>\n<p>\u5f53\u4f7f\u7528 <a href=\"#summingmergetree/\">SummingMergeTree</a> \u548c<br />\n<a href=\"#aggregatingmergetree/\">AggregatingMergeTree</a> \u5f15\u64ce\u65f6\uff0c\u8fd9\u4e2a\u7279\u6027\u975e\u5e38\u6709\u7528\u3002<br />\n\u901a\u5e38\uff0c\u4f7f\u7528\u8fd9\u7c7b\u5f15\u64ce\u65f6\uff0c\u8868\u91cc\u5217\u5206\u4e24\u79cd\uff1a<em>\u7ef4\u5ea6</em> \u548c <em>\u5ea6\u91cf</em> \u3002<br />\n\u5178\u578b\u7684\u67e5\u8be2\u662f\u5728 <code>GROUP BY</code> \u5e76\u8fc7\u8651\u7ef4\u5ea6\u7684\u60c5\u51b5\u4e0b\u7edf\u8ba1\u5ea6\u91cf\u5217\u7684\u503c\u3002<br />\n\u50cf SummingMergeTree \u548c AggregatingMergeTree \uff0c\u7528\u76f8\u540c\u7684\u6392\u5e8f\u952e\u503c\u7edf\u8ba1\u884c\u65f6\uff0c<br />\n\u901a\u5e38\u4f1a\u52a0\u4e0a\u6240\u6709\u7684\u7ef4\u5ea6\u3002\u7ed3\u679c\u5c31\u662f\uff0c\u8fd9\u952e\u7684\u8868\u8fbe\u5f0f\u4f1a\u662f\u4e00\u957f\u4e32\u7684\u5217\u7ec4\u6210\uff0c<br />\n\u5e76\u4e14\u8fd9\u7ec4\u5217\u8fd8\u4f1a\u56e0\u4e3a\u65b0\u52a0\u7ef4\u5ea6\u5fc5\u987b\u9891\u7e41\u66f4\u65b0\u3002</p>\n<p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e3b\u952e\u4e2d\u4ec5\u9884\u7559\u5c11\u91cf\u5217\u4fdd\u8bc1\u9ad8\u6548\u8303\u56f4\u626b\u63cf\uff0c<br />\n\u5269\u4e0b\u7684\u7ef4\u5ea6\u5217\u653e\u5230\u6392\u5e8f\u952e\u5143\u7ec4\u91cc\u3002\u8fd9\u6837\u662f\u5408\u7406\u7684\u3002</p>\n<p><a href=\"#../../query_language/alter/\">\u6392\u5e8f\u952e\u7684\u4fee\u6539</a> \u662f\u8f7b\u91cf\u7ea7\u7684\u64cd\u4f5c\uff0c\u56e0\u4e3a\u4e00\u4e2a\u65b0\u5217\u540c\u65f6\u88ab\u52a0\u5165\u5230\u8868\u91cc\u548c\u6392\u5e8f\u952e\u540e\u65f6\uff0c\u5df2\u5b58\u5728\u7684\u6570\u636e\u7247\u6bb5\u5e76\u4e0d\u9700\u8981\u4fee\u6539\u3002\u7531\u4e8e\u65e7\u7684\u6392\u5e8f\u952e\u662f\u65b0\u6392\u5e8f\u952e\u7684\u524d\u7f00\uff0c\u5e76\u4e14\u521a\u521a\u6dfb\u52a0\u7684\u5217\u4e2d\u6ca1\u6709\u6570\u636e\uff0c\u56e0\u6b64\u5728\u8868\u4fee\u6539\u65f6\u7684\u6570\u636e\u5bf9\u4e8e\u65b0\u65e7\u7684\u6392\u5e8f\u952e\u6765\u8bf4\u90fd\u662f\u6709\u5e8f\u7684\u3002</p>\n<h4 id=\"suo-yin-he-fen-qu-zai-cha-xun-zhong-de-ying-yong\">\u7d22\u5f15\u548c\u5206\u533a\u5728\u67e5\u8be2\u4e2d\u7684\u5e94\u7528<a class=\"headerlink\" href=\"#suo-yin-he-fen-qu-zai-cha-xun-zhong-de-ying-yong\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5bf9\u4e8e <code>SELECT</code> \u67e5\u8be2\uff0cClickHouse \u5206\u6790\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\u3002\u5982\u679c <code>WHERE/PREWHERE</code> \u5b50\u53e5\u5177\u6709\u4e0b\u9762\u8fd9\u4e9b\u8868\u8fbe\u5f0f\uff08\u4f5c\u4e3a\u8c13\u8bcd\u94fe\u63a5\u4e00\u5b50\u9879\u6216\u6574\u4e2a\uff09\u5219\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\uff1a\u57fa\u4e8e\u4e3b\u952e\u6216\u5206\u533a\u952e\u7684\u5217\u6216\u8868\u8fbe\u5f0f\u7684\u90e8\u5206\u7684\u7b49\u5f0f\u6216\u6bd4\u8f83\u8fd0\u7b97\u8868\u8fbe\u5f0f\uff1b\u57fa\u4e8e\u4e3b\u952e\u6216\u5206\u533a\u952e\u7684\u5217\u6216\u8868\u8fbe\u5f0f\u7684\u56fa\u5b9a\u524d\u7f00\u7684 <code>IN</code> \u6216 <code>LIKE</code> \u8868\u8fbe\u5f0f\uff1b\u57fa\u4e8e\u4e3b\u952e\u6216\u5206\u533a\u952e\u7684\u5217\u7684\u67d0\u4e9b\u51fd\u6570\uff1b\u57fa\u4e8e\u4e3b\u952e\u6216\u5206\u533a\u952e\u7684\u8868\u8fbe\u5f0f\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u3002 <!-- It is too hard for me to translate this section as the original text completely. So I did it with my own understanding. If you have good idea, please help me. --></p>\n<p>\u56e0\u6b64\uff0c\u5728\u7d22\u5f15\u952e\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u533a\u95f4\u4e0a\u5feb\u901f\u5730\u8dd1\u67e5\u8be2\u90fd\u662f\u53ef\u80fd\u7684\u3002\u4e0b\u9762\u4f8b\u5b50\u4e2d\uff0c\u6307\u5b9a\u6807\u7b7e\uff1b\u6307\u5b9a\u6807\u7b7e\u548c\u65e5\u671f\u8303\u56f4\uff1b\u6307\u5b9a\u6807\u7b7e\u548c\u65e5\u671f\uff1b\u6307\u5b9a\u591a\u4e2a\u6807\u7b7e\u548c\u65e5\u671f\u8303\u56f4\u7b49\u8fd0\u884c\u67e5\u8be2\uff0c\u90fd\u4f1a\u975e\u5e38\u5feb\u3002</p>\n<p>\u5f53\u5f15\u64ce\u914d\u7f6e\u5982\u4e0b\u65f6\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">ENGINE MergeTree() PARTITION BY toYYYYMM(EventDate) ORDER BY (CounterID, EventDate) SETTINGS index_granularity=8192</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u67e5\u8be2\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">())</span> <span class=\"k\">AND</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">())</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span> <span class=\"k\">OR</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">42</span><span class=\"p\">)</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"p\">((</span><span class=\"n\">EventDate</span> <span class=\"o\">&gt;=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">EventDate</span> <span class=\"o\">&lt;=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-01-31&#39;</span><span class=\"p\">))</span> <span class=\"k\">OR</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-05-01&#39;</span><span class=\"p\">))</span> <span class=\"k\">AND</span> <span class=\"n\">CounterID</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"mi\">101500</span><span class=\"p\">,</span> <span class=\"mi\">731962</span><span class=\"p\">,</span> <span class=\"mi\">160656</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">OR</span> <span class=\"n\">EventDate</span> <span class=\"o\">!=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-05-01&#39;</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<p>ClickHouse \u4f1a\u4f9d\u636e\u4e3b\u952e\u7d22\u5f15\u526a\u6389\u4e0d\u7b26\u5408\u7684\u6570\u636e\uff0c\u4f9d\u636e\u6309\u6708\u5206\u533a\u7684\u5206\u533a\u952e\u526a\u6389\u90a3\u4e9b\u4e0d\u5305\u542b\u7b26\u5408\u6570\u636e\u7684\u5206\u533a\u3002</p>\n<p>\u4e0a\u6587\u7684\u67e5\u8be2\u663e\u793a\uff0c\u5373\u4f7f\u7d22\u5f15\u7528\u4e8e\u590d\u6742\u8868\u8fbe\u5f0f\u3002\u56e0\u4e3a\u8bfb\u8868\u64cd\u4f5c\u662f\u7ec4\u7ec7\u597d\u7684\uff0c\u6240\u4ee5\uff0c\u4f7f\u7528\u7d22\u5f15\u4e0d\u4f1a\u6bd4\u5b8c\u6574\u626b\u63cf\u6162\u3002</p>\n<p>\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u4e0d\u4f1a\u4f7f\u7528\u7d22\u5f15\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span> <span class=\"k\">OR</span> <span class=\"n\">URL</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%upyachka%&#39;</span>\n</code></pre></div>\n\n\n<p>\u8981\u68c0\u67e5 ClickHouse \u6267\u884c\u4e00\u4e2a\u67e5\u8be2\u65f6\u80fd\u5426\u4f7f\u7528\u7d22\u5f15\uff0c\u53ef\u8bbe\u7f6e <a href=\"#settings-force_index_by_date\">force_index_by_date</a> \u548c <a href=\"#../settings/settings/\">force_primary_key</a> \u3002</p>\n<p>\u6309\u6708\u5206\u533a\u7684\u5206\u533a\u952e\u662f\u53ea\u80fd\u8bfb\u53d6\u5305\u542b\u9002\u5f53\u8303\u56f4\u65e5\u671f\u7684\u6570\u636e\u5757\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5757\u4f1a\u5305\u542b\u5f88\u591a\u5929\uff08\u6700\u591a\u6574\u6708\uff09\u7684\u6570\u636e\u3002\u5728\u5757\u4e2d\uff0c\u6570\u636e\u6309\u4e3b\u952e\u6392\u5e8f\uff0c\u4e3b\u952e\u7b2c\u4e00\u5217\u53ef\u80fd\u4e0d\u5305\u542b\u65e5\u671f\u3002\u56e0\u6b64\uff0c\u4ec5\u4f7f\u7528\u65e5\u671f\u800c\u6ca1\u6709\u5e26\u4e3b\u952e\u524d\u7f00\u6761\u4ef6\u7684\u67e5\u8be2\u5c06\u4f1a\u5bfc\u81f4\u8bfb\u53d6\u8d85\u8fc7\u8fd9\u4e2a\u65e5\u671f\u8303\u56f4\u3002</p>\n<h4 id=\"tiao-shu-suo-yin-fen-duan-hui-zong-suo-yin-shi-yan-xing-de\">\u8df3\u6570\u7d22\u5f15\uff08\u5206\u6bb5\u6c47\u603b\u7d22\u5f15\uff0c\u5b9e\u9a8c\u6027\u7684\uff09<a class=\"headerlink\" href=\"#tiao-shu-suo-yin-fen-duan-hui-zong-suo-yin-shi-yan-xing-de\" title=\"Permanent link\">&para;</a></h4>\n<p>\u9700\u8981\u8bbe\u7f6e <code>allow_experimental_data_skipping_indices</code> \u4e3a 1 \u624d\u80fd\u4f7f\u7528\u6b64\u7d22\u5f15\u3002\uff08\u6267\u884c <code>SET allow_experimental_data_skipping_indices = 1</code>\uff09\u3002</p>\n<p>\u6b64\u7d22\u5f15\u5728 <code>CREATE</code> \u8bed\u53e5\u7684\u5217\u90e8\u5206\u91cc\u5b9a\u4e49\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INDEX</span> <span class=\"n\">index_name</span> <span class=\"n\">expr</span> <span class=\"k\">TYPE</span> <span class=\"k\">type</span><span class=\"p\">(...)</span> <span class=\"n\">GRANULARITY</span> <span class=\"n\">granularity_value</span>\n</code></pre></div>\n\n\n<p><code>*MergeTree</code> \u7cfb\u5217\u7684\u8868\u90fd\u80fd\u6307\u5b9a\u8df3\u6570\u7d22\u5f15\u3002</p>\n<p>\u8fd9\u4e9b\u7d22\u5f15\u662f\u7531\u6570\u636e\u5757\u6309\u7c92\u5ea6\u5206\u5272\u540e\u7684\u6bcf\u90e8\u5206\u5728\u6307\u5b9a\u8868\u8fbe\u5f0f\u4e0a\u6c47\u603b\u4fe1\u606f <code>granularity_value</code> \u7ec4\u6210\uff08\u7c92\u5ea6\u5927\u5c0f\u7528\u8868\u5f15\u64ce\u91cc <code>index_granularity</code> \u7684\u6307\u5b9a\uff09\u3002<br />\n\u8fd9\u4e9b\u6c47\u603b\u4fe1\u606f\u6709\u52a9\u4e8e\u7528 <code>where</code> \u8bed\u53e5\u8df3\u8fc7\u5927\u7247\u4e0d\u6ee1\u8db3\u7684\u6570\u636e\uff0c\u4ece\u800c\u51cf\u5c11 <code>SELECT</code> \u67e5\u8be2\u4ece\u78c1\u76d8\u8bfb\u53d6\u7684\u6570\u636e\u91cf\uff0c</p>\n<p>\u793a\u4f8b</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">u64</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">i32</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"p\">...</span>\n    <span class=\"k\">INDEX</span> <span class=\"n\">a</span> <span class=\"p\">(</span><span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"n\">i32</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"k\">TYPE</span> <span class=\"n\">minmax</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">3</span><span class=\"p\">,</span>\n    <span class=\"k\">INDEX</span> <span class=\"n\">b</span> <span class=\"p\">(</span><span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">))</span> <span class=\"k\">TYPE</span> <span class=\"k\">set</span><span class=\"p\">(</span><span class=\"mi\">1000</span><span class=\"p\">)</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">4</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span>\n<span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u4e0a\u4f8b\u4e2d\u7684\u7d22\u5f15\u80fd\u8ba9 ClickHouse \u6267\u884c\u4e0b\u9762\u8fd9\u4e9b\u67e5\u8be2\u65f6\u51cf\u5c11\u8bfb\u53d6\u6570\u636e\u91cf\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">s</span> <span class=\"o\">&lt;</span> <span class=\"s1\">&#39;z&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"n\">i32</span> <span class=\"o\">==</span> <span class=\"mi\">10</span> <span class=\"k\">AND</span> <span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">1234</span>\n</code></pre></div>\n\n\n<h5 id=\"suo-yin-de-ke-yong-lei-xing\">\u7d22\u5f15\u7684\u53ef\u7528\u7c7b\u578b<a class=\"headerlink\" href=\"#suo-yin-de-ke-yong-lei-xing\" title=\"Permanent link\">&para;</a></h5>\n<ul>\n<li>\n<p><code>minmax</code><br />\n\u5b58\u50a8\u6307\u5b9a\u8868\u8fbe\u5f0f\u7684\u6781\u503c\uff08\u5982\u679c\u8868\u8fbe\u5f0f\u662f <code>tuple</code> \uff0c\u5219\u5b58\u50a8 <code>tuple</code> \u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u6781\u503c\uff09\uff0c\u8fd9\u4e9b\u4fe1\u606f\u7528\u4e8e\u8df3\u8fc7\u6570\u636e\u5757\uff0c\u7c7b\u4f3c\u4e3b\u952e\u3002</p>\n</li>\n<li>\n<p><code>set(max_rows)</code><br />\n\u5b58\u50a8\u6307\u5b9a\u8868\u8fbe\u5f0f\u7684\u60df\u4e00\u503c\uff08\u4e0d\u8d85\u8fc7 <code>max_rows</code> \u4e2a\uff0c<code>max_rows=0</code> \u5219\u8868\u793a\u300e\u65e0\u9650\u5236\u300f\uff09\u3002\u8fd9\u4e9b\u4fe1\u606f\u53ef\u7528\u4e8e\u68c0\u67e5 <code>WHERE</code> \u8868\u8fbe\u5f0f\u662f\u5426\u6ee1\u8db3\u67d0\u4e2a\u6570\u636e\u5757\u3002</p>\n</li>\n<li>\n<p><code>ngrambf_v1(n, size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code> <br />\n\u5b58\u50a8\u5305\u542b\u6570\u636e\u5757\u4e2d\u6240\u6709 n \u5143\u77ed\u8bed\u7684 <a href=\"https://en.wikipedia.org/wiki/Bloom_filter\" rel=\"external nofollow noreferrer\">\u5e03\u9686\u8fc7\u6ee4\u5668</a> \u3002\u53ea\u53ef\u7528\u5728\u5b57\u7b26\u4e32\u4e0a\u3002<br />\n\u53ef\u7528\u4e8e\u4f18\u5316 <code>equals</code> \uff0c <code>like</code> \u548c <code>in</code> \u8868\u8fbe\u5f0f\u7684\u6027\u80fd\u3002<br />\n<code>n</code> -- \u77ed\u8bed\u957f\u5ea6\u3002<br />\n<code>size_of_bloom_filter_in_bytes</code> -- \u5e03\u9686\u8fc7\u6ee4\u5668\u5927\u5c0f\uff0c\u5355\u4f4d\u5b57\u8282\u3002\uff08\u56e0\u4e3a\u538b\u7f29\u5f97\u597d\uff0c\u53ef\u4ee5\u6307\u5b9a\u6bd4\u8f83\u5927\u7684\u503c\uff0c\u5982256\u6216512\uff09\u3002<br />\n<code>number_of_hash_functions</code> -- \u5e03\u9686\u8fc7\u6ee4\u5668\u4e2d\u4f7f\u7528\u7684 hash \u51fd\u6570\u7684\u4e2a\u6570\u3002<br />\n<code>random_seed</code> -- hash \u51fd\u6570\u7684\u968f\u673a\u79cd\u5b50\u3002</p>\n</li>\n<li>\n<p><code>tokenbf_v1(size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code> <br />\n\u8ddf <code>ngrambf_v1</code> \u7c7b\u4f3c\uff0c\u4e0d\u540c\u4e8e ngrams \u5b58\u50a8\u5b57\u7b26\u4e32\u6307\u5b9a\u957f\u5ea6\u7684\u6240\u6709\u7247\u6bb5\u3002\u5b83\u53ea\u5b58\u50a8\u88ab\u975e\u5b57\u6bcd\u6570\u636e\u5b57\u7b26\u5206\u5272\u7684\u7247\u6bb5\u3002</p>\n</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INDEX</span> <span class=\"n\">sample_index</span> <span class=\"p\">(</span><span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">))</span> <span class=\"k\">TYPE</span> <span class=\"n\">minmax</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">4</span>\n<span class=\"k\">INDEX</span> <span class=\"n\">sample_index2</span> <span class=\"p\">(</span><span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"k\">length</span><span class=\"p\">(</span><span ");
            
            document.write("class=\"n\">str</span><span class=\"p\">),</span> <span class=\"n\">i32</span> <span class=\"o\">+</span> <span class=\"n\">f64</span> <span class=\"o\">*</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">str</span><span class=\"p\">)</span> <span class=\"k\">TYPE</span> <span class=\"k\">set</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">)</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">4</span>\n<span class=\"k\">INDEX</span> <span class=\"n\">sample_index3</span> <span class=\"p\">(</span><span class=\"k\">lower</span><span class=\"p\">(</span><span class=\"n\">str</span><span class=\"p\">),</span> <span class=\"n\">str</span><span class=\"p\">)</span> <span class=\"k\">TYPE</span> <span class=\"n\">ngrambf_v1</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">256</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">4</span>\n</code></pre></div>\n\n\n<h3 id=\"bing-fa-shu-ju-fang-wen\">\u5e76\u53d1\u6570\u636e\u8bbf\u95ee<a class=\"headerlink\" href=\"#bing-fa-shu-ju-fang-wen\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5e94\u5bf9\u8868\u7684\u5e76\u53d1\u8bbf\u95ee\uff0c\u6211\u4eec\u4f7f\u7528\u591a\u7248\u672c\u673a\u5236\u3002\u6362\u8a00\u4e4b\uff0c\u5f53\u540c\u65f6\u8bfb\u548c\u66f4\u65b0\u8868\u65f6\uff0c\u6570\u636e\u4ece\u5f53\u524d\u67e5\u8be2\u5230\u7684\u4e00\u7ec4\u7247\u6bb5\u4e2d\u8bfb\u53d6\u3002\u6ca1\u6709\u5197\u957f\u7684\u7684\u9501\u3002\u63d2\u5165\u4e0d\u4f1a\u963b\u788d\u8bfb\u53d6\u3002</p>\n<p>\u5bf9\u8868\u7684\u8bfb\u64cd\u4f5c\u662f\u81ea\u52a8\u5e76\u884c\u7684\u3002</p>\n<p><a name=\"../table_engines/replication/\"></a><a name=\"../../../../../operations/table_engines/replication/\"></a><a name=\"../../../../../../table_engines/replication/\"></a><a name=\"../operations/table_engines/replication/\"></a><a name=\"table_engines/replication/\"></a><a name=\"../../table_engines/replication/\"></a><a name=\"../../operations/table_engines/replication/\"></a><a name=\"../../../../table_engines/replication/\"></a><a name=\"replication/\"></a><a name=\"../../../operations/table_engines/replication/\"></a><a name=\"../../../../operations/table_engines/replication/\"></a><a name=\"../../../table_engines/replication/\"></a><a name=\"../../../../../table_engines/replication/\"></a><a name=\"operations/table_engines/replication/\"></a></p>\n<h2 id=\"table_engines-replication\">\u6570\u636e\u526f\u672c<a class=\"headerlink\" href=\"#table_engines-replication\" title=\"Permanent link\">&para;</a></h2>\n<p>\u53ea\u6709 MergeTree \u7cfb\u5217\u91cc\u7684\u8868\u53ef\u652f\u6301\u526f\u672c\uff1a</p>\n<ul>\n<li>ReplicatedMergeTree</li>\n<li>ReplicatedSummingMergeTree</li>\n<li>ReplicatedReplacingMergeTree</li>\n<li>ReplicatedAggregatingMergeTree</li>\n<li>ReplicatedCollapsingMergeTree</li>\n<li>ReplicatedVersionedCollapsingMergeTree</li>\n<li>ReplicatedGraphiteMergeTree</li>\n</ul>\n<p>\u526f\u672c\u662f\u8868\u7ea7\u522b\u7684\uff0c\u4e0d\u662f\u6574\u4e2a\u670d\u52a1\u5668\u7ea7\u7684\u3002\u6240\u4ee5\uff0c\u670d\u52a1\u5668\u91cc\u53ef\u4ee5\u540c\u65f6\u6709\u590d\u5236\u8868\u548c\u975e\u590d\u5236\u8868\u3002</p>\n<p>\u526f\u672c\u4e0d\u4f9d\u8d56\u5206\u7247\u3002\u6bcf\u4e2a\u5206\u7247\u6709\u5b83\u81ea\u5df1\u7684\u72ec\u7acb\u526f\u672c\u3002</p>\n<p>\u5bf9\u4e8e <code>INSERT</code> \u548c <code>ALTER</code> \u8bed\u53e5\u64cd\u4f5c\u6570\u636e\u7684\u4f1a\u5728\u538b\u7f29\u7684\u60c5\u51b5\u4e0b\u88ab\u590d\u5236\uff08\u66f4\u591a\u4fe1\u606f\uff0c\u770b <a href=\"#query_language_queries_alter\">ALTER</a> \uff09\u3002</p>\n<p>\u800c <code>CREATE</code>\uff0c<code>DROP</code>\uff0c<code>ATTACH</code>\uff0c<code>DETACH</code> \u548c <code>RENAME</code> \u8bed\u53e5\u53ea\u4f1a\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff0c\u4e0d\u4f1a\u88ab\u590d\u5236\u3002</p>\n<ul>\n<li><code>The CREATE TABLE</code> \u5728\u8fd0\u884c\u6b64\u8bed\u53e5\u7684\u670d\u52a1\u5668\u4e0a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u53ef\u590d\u5236\u8868\u3002\u5982\u679c\u6b64\u8868\u5df2\u5b58\u5728\u5176\u4ed6\u670d\u52a1\u5668\u4e0a\uff0c\u5219\u7ed9\u8be5\u8868\u6dfb\u52a0\u65b0\u526f\u672c\u3002</li>\n<li><code>The DROP TABLE</code> \u5220\u9664\u8fd0\u884c\u6b64\u67e5\u8be2\u7684\u670d\u52a1\u5668\u4e0a\u7684\u526f\u672c\u3002</li>\n<li><code>The RENAME</code> \u91cd\u547d\u540d\u4e00\u4e2a\u526f\u672c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u53ef\u590d\u5236\u8868\u4e0d\u540c\u7684\u526f\u672c\u53ef\u4ee5\u6709\u4e0d\u540c\u7684\u540d\u79f0\u3002</li>\n</ul>\n<p>\u8981\u4f7f\u7528\u526f\u672c\uff0c\u9700\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e ZooKeeper \u96c6\u7fa4\u7684\u5730\u5740\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;zookeeper&gt;</span>\n    <span class=\"nt\">&lt;node</span> <span class=\"na\">index=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example1<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;node</span> <span class=\"na\">index=</span><span class=\"s\">&quot;2&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example2<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;node</span> <span class=\"na\">index=</span><span class=\"s\">&quot;3&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example3<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n<span class=\"nt\">&lt;/zookeeper&gt;</span>\n</code></pre></div>\n\n\n<p>\u9700\u8981 ZooKeeper 3.4.5 \u6216\u66f4\u9ad8\u7248\u672c\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u914d\u7f6e\u4efb\u4f55\u73b0\u6709\u7684 ZooKeeper \u96c6\u7fa4\uff0c\u7cfb\u7edf\u4f1a\u4f7f\u7528\u91cc\u9762\u7684\u76ee\u5f55\u6765\u5b58\u53d6\u5143\u6570\u636e\uff08\u8be5\u76ee\u5f55\u5728\u521b\u5efa\u53ef\u590d\u5236\u8868\u65f6\u6307\u5b9a\uff09\u3002</p>\n<p>\u5982\u679c\u914d\u7f6e\u6587\u4ef6\u4e2d\u6ca1\u6709\u8bbe\u7f6e ZooKeeper \uff0c\u5219\u65e0\u6cd5\u521b\u5efa\u590d\u5236\u8868\uff0c\u5e76\u4e14\u4efb\u4f55\u73b0\u6709\u7684\u590d\u5236\u8868\u90fd\u5c06\u53d8\u4e3a\u53ea\u8bfb\u3002</p>\n<p><code>SELECT</code> \u67e5\u8be2\u5e76\u4e0d\u9700\u8981\u501f\u52a9 ZooKeeper \uff0c\u590d\u672c\u5e76\u4e0d\u5f71\u54cd <code>SELECT</code> \u7684\u6027\u80fd\uff0c\u67e5\u8be2\u590d\u5236\u8868\u4e0e\u975e\u590d\u5236\u8868\u901f\u5ea6\u662f\u4e00\u6837\u7684\u3002\u67e5\u8be2\u5206\u5e03\u5f0f\u8868\u65f6\uff0cClickHouse\u7684\u5904\u7406\u65b9\u5f0f\u53ef\u901a\u8fc7\u8bbe\u7f6e <a href=\"#settings-max_replica_delay_for_distributed_queries\">max_replica_delay_for_distributed_queries</a> \u548c <a href=\"#../settings/settings/\">fallback_to_stale_replicas_for_distributed_queries</a> \u4fee\u6539\u3002</p>\n<p>\u5bf9\u4e8e\u6bcf\u4e2a <code>INSERT</code> \u8bed\u53e5\uff0c\u4f1a\u901a\u8fc7\u51e0\u4e2a\u4e8b\u52a1\u5c06\u5341\u6765\u4e2a\u8bb0\u5f55\u6dfb\u52a0\u5230 ZooKeeper\u3002\uff08\u786e\u5207\u5730\u8bf4\uff0c\u8fd9\u662f\u9488\u5bf9\u6bcf\u4e2a\u63d2\u5165\u7684\u6570\u636e\u5757; \u6bcf\u4e2a INSERT \u8bed\u53e5\u7684\u6bcf <code>max_insert_block_size = 1048576</code> \u884c\u548c\u6700\u540e\u5269\u4f59\u7684\u90fd\u5404\u7b97\u4f5c\u4e00\u4e2a\u5757\u3002\uff09\u76f8\u6bd4\u975e\u590d\u5236\u8868\uff0c\u5199 zk \u4f1a\u5bfc\u81f4 <code>INSERT</code> \u7684\u5ef6\u8fdf\u7565\u957f\u4e00\u4e9b\u3002\u4f46\u53ea\u8981\u4f60\u6309\u7167\u5efa\u8bae\u6bcf\u79d2\u4e0d\u8d85\u8fc7\u4e00\u4e2a <code>INSERT</code> \u5730\u6279\u91cf\u63d2\u5165\u6570\u636e\uff0c\u4e0d\u4f1a\u6709\u4efb\u4f55\u95ee\u9898\u3002\u4e00\u4e2a ZooKeeper \u96c6\u7fa4\u80fd\u7ed9\u6574\u4e2a ClickHouse \u96c6\u7fa4\u652f\u6491\u534f\u8c03\u6bcf\u79d2\u51e0\u767e\u4e2a <code>INSERT</code>\u3002\u6570\u636e\u63d2\u5165\u7684\u541e\u5410\u91cf\uff08\u6bcf\u79d2\u7684\u884c\u6570\uff09\u53ef\u4ee5\u8ddf\u4e0d\u7528\u590d\u5236\u7684\u6570\u636e\u4e00\u6837\u9ad8\u3002</p>\n<p>\u5bf9\u4e8e\u975e\u5e38\u5927\u7684\u96c6\u7fa4\uff0c\u4f60\u53ef\u4ee5\u628a\u4e0d\u540c\u7684 ZooKeeper \u96c6\u7fa4\u7528\u4e8e\u4e0d\u540c\u7684\u5206\u7247\u3002\u7136\u800c\uff0c\u5373\u4f7f Yandex.Metrica \u96c6\u7fa4\uff08\u5927\u7ea6300\u53f0\u670d\u52a1\u5668\uff09\u4e5f\u8bc1\u660e\u8fd8\u4e0d\u9700\u8981\u8fd9\u4e48\u505a\u3002</p>\n<p>\u590d\u5236\u662f\u591a\u4e3b\u5f02\u6b65\u3002 <code>INSERT</code> \u8bed\u53e5\uff08\u4ee5\u53ca <code>ALTER</code> \uff09\u53ef\u4ee5\u53d1\u7ed9\u4efb\u610f\u53ef\u7528\u7684\u670d\u52a1\u5668\u3002\u6570\u636e\u4f1a\u5148\u63d2\u5165\u5230\u6267\u884c\u8be5\u8bed\u53e5\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u7136\u540e\u88ab\u590d\u5236\u5230\u5176\u4ed6\u670d\u52a1\u5668\u3002\u7531\u4e8e\u5b83\u662f\u5f02\u6b65\u7684\uff0c\u5728\u5176\u4ed6\u526f\u672c\u4e0a\u6700\u8fd1\u63d2\u5165\u7684\u6570\u636e\u4f1a\u6709\u4e00\u4e9b\u5ef6\u8fdf\u3002\u5982\u679c\u90e8\u5206\u526f\u672c\u4e0d\u53ef\u7528\uff0c\u5219\u6570\u636e\u5728\u5176\u53ef\u7528\u65f6\u518d\u5199\u5165\u3002\u526f\u672c\u53ef\u7528\u7684\u60c5\u51b5\u4e0b\uff0c\u5219\u5ef6\u8fdf\u65f6\u957f\u662f\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u538b\u7f29\u6570\u636e\u5757\u6240\u9700\u7684\u65f6\u95f4\u3002</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cINSERT \u8bed\u53e5\u4ec5\u7b49\u5f85\u4e00\u4e2a\u526f\u672c\u5199\u5165\u6210\u529f\u540e\u8fd4\u56de\u3002\u5982\u679c\u6570\u636e\u53ea\u6210\u529f\u5199\u5165\u4e00\u4e2a\u526f\u672c\u540e\u8be5\u526f\u672c\u6240\u5728\u7684\u670d\u52a1\u5668\u4e0d\u518d\u5b58\u5728\uff0c\u5219\u5b58\u50a8\u7684\u6570\u636e\u4f1a\u4e22\u5931\u3002\u8981\u542f\u7528\u6570\u636e\u5199\u5165\u591a\u4e2a\u526f\u672c\u624d\u786e\u8ba4\u8fd4\u56de\uff0c\u4f7f\u7528 <code>insert_quorum</code> \u9009\u9879\u3002</p>\n<p>\u5355\u4e2a\u6570\u636e\u5757\u5199\u5165\u662f\u539f\u5b50\u7684\u3002 INSERT \u7684\u6570\u636e\u6309\u6bcf\u5757\u6700\u591a <code>max_insert_block_size = 1048576</code> \u884c\u8fdb\u884c\u5206\u5757\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c <code>INSERT</code> \u63d2\u5165\u7684\u884c\u5c11\u4e8e 1048576\uff0c\u5219\u8be5 INSERT \u662f\u539f\u5b50\u7684\u3002</p>\n<p>\u6570\u636e\u5757\u4f1a\u53bb\u91cd\u3002\u5bf9\u4e8e\u88ab\u591a\u6b21\u5199\u7684\u76f8\u540c\u6570\u636e\u5757\uff08\u5927\u5c0f\u76f8\u540c\u4e14\u5177\u6709\u76f8\u540c\u987a\u5e8f\u7684\u76f8\u540c\u884c\u7684\u6570\u636e\u5757\uff09\uff0c\u8be5\u5757\u4ec5\u4f1a\u5199\u5165\u4e00\u6b21\u3002\u8fd9\u6837\u8bbe\u8ba1\u7684\u539f\u56e0\u662f\u4e07\u4e00\u5728\u7f51\u7edc\u6545\u969c\u65f6\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u4e0d\u77e5\u9053\u6570\u636e\u662f\u5426\u6210\u529f\u5199\u5165DB\uff0c\u6b64\u65f6\u53ef\u4ee5\u7b80\u5355\u5730\u91cd\u590d <code>INSERT</code> \u3002\u628a\u76f8\u540c\u7684\u6570\u636e\u53d1\u9001\u7ed9\u591a\u4e2a\u526f\u672c INSERT \u5e76\u4e0d\u4f1a\u6709\u95ee\u9898\u3002\u56e0\u4e3a\u8fd9\u4e9b <code>INSERT</code> \u662f\u5b8c\u5168\u76f8\u540c\u7684\uff08\u4f1a\u88ab\u53bb\u91cd\uff09\u3002\u53bb\u91cd\u53c2\u6570\u53c2\u770b\u670d\u52a1\u5668\u8bbe\u7f6e <a href=\"#../server_settings/settings/\">merge_tree</a> \u3002\uff08\u6ce8\u610f\uff1aReplicated*MergeTree \u624d\u4f1a\u53bb\u91cd\uff0c\u4e0d\u9700\u8981 zookeeper \u7684\u4e0d\u5e26 MergeTree \u4e0d\u4f1a\u53bb\u91cd\uff09</p>\n<p>\u5728\u590d\u5236\u671f\u95f4\uff0c\u53ea\u6709\u8981\u63d2\u5165\u7684\u6e90\u6570\u636e\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u3002\u8fdb\u4e00\u6b65\u7684\u6570\u636e\u8f6c\u6362\uff08\u5408\u5e76\uff09\u4f1a\u5728\u6240\u6709\u526f\u672c\u4e0a\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u6267\u884c\u3002\u8fd9\u6837\u53ef\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u7f51\u7edc\u4f7f\u7528\uff0c\u8fd9\u610f\u5473\u7740\u5373\u4f7f\u526f\u672c\u5728\u4e0d\u540c\u7684\u6570\u636e\u4e2d\u5fc3\uff0c\u6570\u636e\u540c\u6b65\u4e5f\u80fd\u5de5\u4f5c\u826f\u597d\u3002\uff08\u80fd\u5728\u4e0d\u540c\u6570\u636e\u4e2d\u5fc3\u4e2d\u7684\u540c\u6b65\u6570\u636e\u662f\u526f\u672c\u673a\u5236\u7684\u4e3b\u8981\u76ee\u6807\u3002\uff09</p>\n<p>\u4f60\u53ef\u4ee5\u7ed9\u6570\u636e\u505a\u4efb\u610f\u591a\u7684\u526f\u672c\u3002Yandex.Metrica \u5728\u751f\u4ea7\u4e2d\u4f7f\u7528\u53cc\u526f\u672c\u3002\u67d0\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7ed9\u6bcf\u53f0\u670d\u52a1\u5668\u90fd\u4f7f\u7528 RAID-5 \u6216 RAID-6 \u548c RAID-10\u3002\u662f\u4e00\u79cd\u76f8\u5bf9\u53ef\u9760\u548c\u65b9\u4fbf\u7684\u89e3\u51b3\u65b9\u6848\u3002</p>\n<p>\u7cfb\u7edf\u4f1a\u76d1\u89c6\u526f\u672c\u6570\u636e\u540c\u6b65\u60c5\u51b5\uff0c\u5e76\u80fd\u5728\u53d1\u751f\u6545\u969c\u540e\u6062\u590d\u3002\u6545\u969c\u8f6c\u79fb\u662f\u81ea\u52a8\u7684\uff08\u5bf9\u4e8e\u5c0f\u7684\u6570\u636e\u5dee\u5f02\uff09\u6216\u534a\u81ea\u52a8\u7684\uff08\u5f53\u6570\u636e\u5dee\u5f02\u5f88\u5927\u65f6\uff0c\u8fd9\u53ef\u80fd\u610f\u5473\u662f\u6709\u914d\u7f6e\u9519\u8bef\uff09\u3002</p>\n<h3 id=\"creating-replicated-tables\">\u521b\u5efa\u590d\u5236\u8868<a class=\"headerlink\" href=\"#creating-replicated-tables\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u8868\u5f15\u64ce\u540d\u79f0\u4e0a\u52a0\u4e0a <code>Replicated</code> \u524d\u7f00\u3002\u4f8b\u5982\uff1a<code>ReplicatedMergeTree</code>\u3002</p>\n<p><strong>Replicated*MergeTree \u53c2\u6570</strong></p>\n<ul>\n<li><code>zoo_path</code> \u2014 ZooKeeper \u4e2d\u8be5\u8868\u7684\u8def\u5f84\u3002</li>\n<li><code>replica_name</code> \u2014 ZooKeeper \u4e2d\u7684\u8be5\u8868\u7684\u526f\u672c\u540d\u79f0\u3002</li>\n</ul>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">EventDate</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">CounterID</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ReplicatedMergeTree</span><span class=\"p\">(</span><span class=\"s1\">&#39;/clickhouse/tables/{layer}-{shard}/table_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;{replica}&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">EventDate</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">))</span>\n<span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5df2\u5f03\u7528\u7684\u5efa\u8868\u8bed\u6cd5\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">EventDate</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">CounterID</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ReplicatedMergeTree</span><span class=\"p\">(</span><span class=\"s1\">&#39;/clickhouse/tables/{layer}-{shard}/table_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;{replica}&#39;</span><span class=\"p\">,</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"n\">EventTime</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5982\u4e0a\u4f8b\u6240\u793a\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u5305\u542b\u5b8f\u66ff\u6362\u7684\u5360\u4f4d\u7b26\uff0c\u5373\u5927\u62ec\u53f7\u7684\u90e8\u5206\u3002\u5b83\u4eec\u4f1a\u88ab\u66ff\u6362\u4e3a\u914d\u7f6e\u6587\u4ef6\u91cc 'macros' \u90a3\u90e8\u5206\u914d\u7f6e\u7684\u503c\u3002\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;macros&gt;</span>\n    <span class=\"nt\">&lt;layer&gt;</span>05<span class=\"nt\">&lt;/layer&gt;</span>\n    <span class=\"nt\">&lt;shard&gt;</span>02<span class=\"nt\">&lt;/shard&gt;</span>\n    <span class=\"nt\">&lt;replica&gt;</span>example05-02-1.yandex.ru<span class=\"nt\">&lt;/replica&gt;</span>\n<span class=\"nt\">&lt;/macros&gt;</span>\n</code></pre></div>\n\n\n<p>\u201cZooKeeper \u4e2d\u8be5\u8868\u7684\u8def\u5f84\u201d\u5bf9\u6bcf\u4e2a\u53ef\u590d\u5236\u8868\u90fd\u8981\u662f\u552f\u4e00\u7684\u3002\u4e0d\u540c\u5206\u7247\u4e0a\u7684\u8868\u8981\u6709\u4e0d\u540c\u7684\u8def\u5f84\u3002<br />\n\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8def\u5f84\u5305\u542b\u4e0b\u9762\u8fd9\u4e9b\u90e8\u5206\uff1a</p>\n<p><code>/clickhouse/tables/</code> \u662f\u516c\u5171\u524d\u7f00\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u8fd9\u4e2a\u3002</p>\n<p><code>{layer}-{shard}</code> \u662f\u5206\u7247\u6807\u8bc6\u90e8\u5206\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u7531\u4e8e Yandex.Metrica \u96c6\u7fa4\u4f7f\u7528\u4e86\u4e24\u7ea7\u5206\u7247\uff0c\u6240\u4ee5\u5b83\u662f\u7531\u4e24\u90e8\u5206\u7ec4\u6210\u7684\u3002\u4f46\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\u6765\u8bf4\uff0c\u4f60\u53ea\u9700\u4fdd\u7559 {shard} \u5360\u4f4d\u7b26\u5373\u53ef\uff0c\u5b83\u4f1a\u66ff\u6362\u5c55\u5f00\u4e3a\u5206\u7247\u6807\u8bc6\u3002</p>\n<p><code>table_name</code> \u662f\u8be5\u8868\u5728 ZooKeeper");
            
            document.write(" \u4e2d\u7684\u540d\u79f0\u3002\u4f7f\u5176\u4e0e ClickHouse \u4e2d\u7684\u8868\u540d\u76f8\u540c\u6bd4\u8f83\u597d\u3002 \u8fd9\u91cc\u5b83\u88ab\u660e\u786e\u5b9a\u4e49\uff0c\u8ddf ClickHouse \u8868\u540d\u4e0d\u4e00\u6837\uff0c\u5b83\u5e76\u4e0d\u4f1a\u88ab RENAME \u8bed\u53e5\u4fee\u6539\u3002<br />\n<em>HINT</em>: you could add a database name in front of <code>table_name</code> as well. E.g. <code>db_name.table_name</code></p>\n<p>\u526f\u672c\u540d\u79f0\u7528\u4e8e\u6807\u8bc6\u540c\u4e00\u4e2a\u8868\u5206\u7247\u7684\u4e0d\u540c\u526f\u672c\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u5668\u540d\u79f0\uff0c\u5982\u4e0a\u4f8b\u6240\u793a\u3002\u540c\u4e2a\u5206\u7247\u4e2d\u4e0d\u540c\u526f\u672c\u7684\u526f\u672c\u540d\u79f0\u8981\u552f\u4e00\u3002</p>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u663e\u5f0f\u6307\u5b9a\u8fd9\u4e9b\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u5b8f\u66ff\u6362\u3002\u5bf9\u4e8e\u6d4b\u8bd5\u548c\u914d\u7f6e\u5c0f\u578b\u96c6\u7fa4\u8fd9\u53ef\u80fd\u4f1a\u5f88\u65b9\u4fbf\u3002\u4f46\u662f\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5219\u4e0d\u80fd\u4f7f\u7528\u5206\u5e03\u5f0f DDL \u8bed\u53e5\uff08<code>ON CLUSTER</code>\uff09\u3002</p>\n<p>\u4f7f\u7528\u5927\u578b\u96c6\u7fa4\u65f6\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u5b8f\u66ff\u6362\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u964d\u4f4e\u51fa\u9519\u7684\u53ef\u80fd\u6027\u3002</p>\n<p>\u5728\u6bcf\u4e2a\u526f\u672c\u670d\u52a1\u5668\u4e0a\u8fd0\u884c <code>CREATE TABLE</code> \u67e5\u8be2\u3002\u5c06\u521b\u5efa\u65b0\u7684\u590d\u5236\u8868\uff0c\u6216\u7ed9\u73b0\u6709\u8868\u6dfb\u52a0\u65b0\u526f\u672c\u3002</p>\n<p>\u5982\u679c\u5176\u4ed6\u526f\u672c\u4e0a\u5df2\u5305\u542b\u4e86\u67d0\u4e9b\u6570\u636e\uff0c\u5728\u8868\u4e0a\u6dfb\u52a0\u65b0\u526f\u672c\uff0c\u5219\u5728\u8fd0\u884c\u8bed\u53e5\u540e\uff0c\u6570\u636e\u4f1a\u4ece\u5176\u4ed6\u526f\u672c\u590d\u5236\u5230\u65b0\u526f\u672c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u65b0\u526f\u672c\u4f1a\u4e0e\u5176\u4ed6\u526f\u672c\u540c\u6b65\u3002</p>\n<p>\u8981\u5220\u9664\u526f\u672c\uff0c\u4f7f\u7528 <code>DROP TABLE</code>\u3002\u4f46\u5b83\u53ea\u5220\u9664\u90a3\u4e2a \u2013 \u4f4d\u4e8e\u8fd0\u884c\u8be5\u8bed\u53e5\u7684\u670d\u52a1\u5668\u4e0a\u7684\u526f\u672c\u3002</p>\n<h3 id=\"gu-zhang-hui-fu\">\u6545\u969c\u6062\u590d<a class=\"headerlink\" href=\"#gu-zhang-hui-fu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u670d\u52a1\u5668\u542f\u52a8\u65f6 ZooKeeper \u4e0d\u53ef\u7528\uff0c\u5219\u590d\u5236\u8868\u4f1a\u5207\u6362\u4e3a\u53ea\u8bfb\u6a21\u5f0f\u3002\u7cfb\u7edf\u4f1a\u5b9a\u671f\u5c1d\u8bd5\u53bb\u8fde\u63a5 ZooKeeper\u3002</p>\n<p>\u5982\u679c\u5728 <code>INSERT</code> \u671f\u95f4 ZooKeeper \u4e0d\u53ef\u7528\uff0c\u6216\u8005\u5728\u4e0e ZooKeeper \u4ea4\u4e92\u65f6\u53d1\u751f\u9519\u8bef\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p>\u8fde\u63a5\u5230 ZooKeeper \u540e\uff0c\u7cfb\u7edf\u4f1a\u68c0\u67e5\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6570\u636e\u96c6\u662f\u5426\u4e0e\u9884\u671f\u7684\u6570\u636e\u96c6\uff08 ZooKeeper \u5b58\u50a8\u6b64\u4fe1\u606f\uff09\u4e00\u81f4\u3002\u5982\u679c\u5b58\u5728\u8f7b\u5fae\u7684\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u901a\u8fc7\u4e0e\u526f\u672c\u540c\u6b65\u6570\u636e\u6765\u89e3\u51b3\u3002</p>\n<p>\u5982\u679c\u7cfb\u7edf\u68c0\u6d4b\u5230\u635f\u574f\u7684\u6570\u636e\u7247\u6bb5\uff08\u6587\u4ef6\u5927\u5c0f\u9519\u8bef\uff09\u6216\u65e0\u6cd5\u8bc6\u522b\u7684\u7247\u6bb5\uff08\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u4f46\u672a\u8bb0\u5f55\u5728 ZooKeeper \u4e2d\u7684\u90e8\u5206\uff09\uff0c\u5219\u4f1a\u628a\u5b83\u4eec\u79fb\u52a8\u5230 'detached' \u5b50\u76ee\u5f55\uff08\u4e0d\u4f1a\u5220\u9664\uff09\u3002\u800c\u526f\u672c\u4e2d\u5176\u4ed6\u4efb\u4f55\u7f3a\u5c11\u7684\u4f46\u6b63\u5e38\u6570\u636e\u7247\u6bb5\u90fd\u4f1a\u88ab\u590d\u5236\u540c\u6b65\u3002</p>\n<p>\u6ce8\u610f\uff0cClickHouse \u4e0d\u4f1a\u6267\u884c\u4efb\u4f55\u7834\u574f\u6027\u64cd\u4f5c\uff0c\u4f8b\u5982\u81ea\u52a8\u5220\u9664\u5927\u91cf\u6570\u636e\u3002</p>\n<p>\u5f53\u670d\u52a1\u5668\u542f\u52a8\uff08\u6216\u4e0e ZooKeeper \u5efa\u7acb\u65b0\u4f1a\u8bdd\uff09\u65f6\uff0c\u5b83\u53ea\u68c0\u67e5\u6240\u6709\u6587\u4ef6\u7684\u6570\u91cf\u548c\u5927\u5c0f\u3002 \u5982\u679c\u6587\u4ef6\u5927\u5c0f\u4e00\u81f4\u4f46\u4e2d\u95f4\u67d0\u5904\u5df2\u6709\u5b57\u8282\u88ab\u4fee\u6539\u8fc7\uff0c\u4e0d\u4f1a\u7acb\u5373\u88ab\u68c0\u6d4b\u5230\uff0c\u53ea\u6709\u5728\u5c1d\u8bd5\u8bfb\u53d6 <code>SELECT</code> \u67e5\u8be2\u7684\u6570\u636e\u65f6\u624d\u4f1a\u68c0\u6d4b\u5230\u3002\u8be5\u67e5\u8be2\u4f1a\u5f15\u53d1\u6821\u9a8c\u548c\u4e0d\u5339\u914d\u6216\u538b\u7f29\u5757\u5927\u5c0f\u4e0d\u4e00\u81f4\u7684\u5f02\u5e38\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u7247\u6bb5\u4f1a\u6dfb\u52a0\u5230\u9a8c\u8bc1\u961f\u5217\u4e2d\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u4ece\u5176\u4ed6\u526f\u672c\u4e2d\u590d\u5236\u3002</p>\n<p>\u5982\u679c\u672c\u5730\u6570\u636e\u96c6\u4e0e\u9884\u671f\u6570\u636e\u7684\u5dee\u5f02\u592a\u5927\uff0c\u5219\u4f1a\u89e6\u53d1\u5b89\u5168\u673a\u5236\u3002\u670d\u52a1\u5668\u5728\u65e5\u5fd7\u4e2d\u8bb0\u5f55\u6b64\u5185\u5bb9\u5e76\u62d2\u7edd\u542f\u52a8\u3002\u8fd9\u79cd\u60c5\u51b5\u5f88\u53ef\u80fd\u662f\u914d\u7f6e\u9519\u8bef\uff0c\u4f8b\u5982\uff0c\u4e00\u4e2a\u5206\u7247\u4e0a\u7684\u526f\u672c\u610f\u5916\u914d\u7f6e\u4e3a\u522b\u7684\u5206\u7247\u4e0a\u7684\u526f\u672c\u3002\u7136\u800c\uff0c\u6b64\u673a\u5236\u7684\u9608\u503c\u8bbe\u7f6e\u5f97\u76f8\u5f53\u4f4e\uff0c\u5728\u6b63\u5e38\u6545\u969c\u6062\u590d\u671f\u95f4\u53ef\u80fd\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u6062\u590d\u5219\u662f\u534a\u81ea\u52a8\u6a21\u5f0f\uff0c\u901a\u8fc7\u7528\u6237\u4e3b\u52a8\u64cd\u4f5c\u89e6\u53d1\u3002</p>\n<p>\u8981\u89e6\u53d1\u542f\u52a8\u6062\u590d\uff0c\u53ef\u5728 ZooKeeper \u4e2d\u521b\u5efa\u8282\u70b9 <code>/path_to_table/replica_name/flags/force_restore_data</code>\uff0c\u8282\u70b9\u503c\u53ef\u4ee5\u662f\u4efb\u4f55\u5185\u5bb9\uff0c\u6216\u8fd0\u884c\u547d\u4ee4\u6765\u6062\u590d\u6240\u6709\u7684\u53ef\u590d\u5236\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>sudo -u clickhouse touch /var/lib/clickhouse/flags/force_restore_data\n</code></pre></div>\n\n\n<p>\u7136\u540e\u91cd\u542f\u670d\u52a1\u5668\u3002\u542f\u52a8\u65f6\uff0c\u670d\u52a1\u5668\u4f1a\u5220\u9664\u8fd9\u4e9b\u6807\u5fd7\u5e76\u5f00\u59cb\u6062\u590d\u3002</p>\n<h3 id=\"zai-shu-ju-wan-quan-diu-shi-hou-de-hui-fu\">\u5728\u6570\u636e\u5b8c\u5168\u4e22\u5931\u540e\u7684\u6062\u590d<a class=\"headerlink\" href=\"#zai-shu-ju-wan-quan-diu-shi-hou-de-hui-fu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u670d\u52a1\u5668\u7684\u6240\u6709\u6570\u636e\u548c\u5143\u6570\u636e\u90fd\u6d88\u5931\u4e86\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\u6062\u590d\uff1a</p>\n<ol>\n<li>\u5728\u670d\u52a1\u5668\u4e0a\u5b89\u88c5 ClickHouse\u3002\u5728\u5305\u542b\u5206\u7247\u6807\u8bc6\u7b26\u548c\u526f\u672c\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u6b63\u786e\u5b9a\u4e49\u5b8f\u914d\u7f6e\uff0c\u5982\u679c\u6709\u7528\u5230\u7684\u8bdd\uff0c</li>\n<li>\u5982\u679c\u670d\u52a1\u5668\u4e0a\u6709\u975e\u590d\u5236\u8868\u5219\u5fc5\u987b\u624b\u52a8\u590d\u5236\uff0c\u53ef\u4ee5\u4ece\u526f\u672c\u670d\u52a1\u5668\u4e0a\uff08\u5728 <code>/var/lib/clickhouse/data/db_name/table_name/</code> \u76ee\u5f55\u4e2d\uff09\u590d\u5236\u5b83\u4eec\u7684\u6570\u636e\u3002</li>\n<li>\u4ece\u526f\u672c\u670d\u52a1\u5668\u4e0a\u4e2d\u590d\u5236\u4f4d\u4e8e <code>/var/lib/clickhouse/metadata/</code> \u4e2d\u7684\u8868\u5b9a\u4e49\u4fe1\u606f\u3002\u5982\u679c\u5728\u8868\u5b9a\u4e49\u4fe1\u606f\u4e2d\u663e\u5f0f\u6307\u5b9a\u4e86\u5206\u7247\u6216\u526f\u672c\u6807\u8bc6\u7b26\uff0c\u8bf7\u66f4\u6b63\u5b83\u4ee5\u4f7f\u5176\u5bf9\u5e94\u4e8e\u8be5\u526f\u672c\u3002\uff08\u53e6\u5916\uff0c\u542f\u52a8\u670d\u52a1\u5668\uff0c\u7136\u540e\u4f1a\u5728 <code>/var/lib/clickhouse/metadata/</code> \u4e2d\u7684.sql\u6587\u4ef6\u4e2d\u751f\u6210\u6240\u6709\u7684 <code>ATTACH TABLE</code> \u8bed\u53e5\u3002\uff09<br />\n4.\u8981\u5f00\u59cb\u6062\u590d\uff0cZooKeeper \u4e2d\u521b\u5efa\u8282\u70b9 <code>/path_to_table/replica_name/flags/force_restore_data</code>\uff0c\u8282\u70b9\u5185\u5bb9\u4e0d\u9650\uff0c\u6216\u8fd0\u884c\u547d\u4ee4\u6765\u6062\u590d\u6240\u6709\u590d\u5236\u7684\u8868\uff1a<code>sudo -u clickhouse touch /var/lib/clickhouse/flags/force_restore_data</code></li>\n</ol>\n<p>\u7136\u540e\u542f\u52a8\u670d\u52a1\u5668\uff08\u5982\u679c\u5b83\u5df2\u8fd0\u884c\u5219\u91cd\u542f\uff09\u3002\u6570\u636e\u4f1a\u4ece\u526f\u672c\u4e2d\u4e0b\u8f7d\u3002</p>\n<p>\u53e6\u4e00\u79cd\u6062\u590d\u65b9\u5f0f\u662f\u4ece ZooKeeper\uff08<code>/path_to_table/replica_name</code>\uff09\u4e2d\u5220\u9664\u6709\u6570\u636e\u4e22\u7684\u526f\u672c\u7684\u6240\u6709\u5143\u4fe1\u606f\uff0c\u7136\u540e\u518d\u6309\u7167\u201c<a href=\"#creating-replicated-tables\">\u521b\u5efa\u53ef\u590d\u5236\u8868</a>\u201d\u4e2d\u7684\u63cf\u8ff0\u91cd\u65b0\u521b\u5efa\u526f\u672c\u3002</p>\n<p>\u6062\u590d\u671f\u95f4\u7684\u7f51\u7edc\u5e26\u5bbd\u6ca1\u6709\u9650\u5236\u3002\u7279\u522b\u6ce8\u610f\u8fd9\u4e00\u70b9\uff0c\u5c24\u5176\u662f\u8981\u4e00\u6b21\u6062\u590d\u5f88\u591a\u526f\u672c\u3002</p>\n<h3 id=\"mergetree-zhuan-huan-wei-replicatedmergetree\">MergeTree \u8f6c\u6362\u4e3a ReplicatedMergeTree<a class=\"headerlink\" href=\"#mergetree-zhuan-huan-wei-replicatedmergetree\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6211\u4eec\u4f7f\u7528 <code>MergeTree</code> \u6765\u8868\u793a <code>MergeTree\u7cfb\u5217</code> \u4e2d\u7684\u6240\u6709\u8868\u5f15\u64ce\uff0c<code>ReplicatedMergeTree</code> \u540c\u7406\u3002</p>\n<p>\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u624b\u52a8\u540c\u6b65\u7684 <code>MergeTree</code> \u8868\uff0c\u60a8\u53ef\u4ee5\u5c06\u5176\u8f6c\u6362\u4e3a\u53ef\u590d\u5236\u8868\u3002\u5982\u679c\u4f60\u5df2\u7ecf\u5728 <code>MergeTree</code> \u8868\u4e2d\u6536\u96c6\u4e86\u5927\u91cf\u6570\u636e\uff0c\u5e76\u4e14\u73b0\u5728\u8981\u542f\u7528\u590d\u5236\uff0c\u5219\u53ef\u4ee5\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u3002</p>\n<p>\u5982\u679c\u5404\u4e2a\u526f\u672c\u4e0a\u7684\u6570\u636e\u4e0d\u4e00\u81f4\uff0c\u5219\u9996\u5148\u5bf9\u5176\u8fdb\u884c\u540c\u6b65\uff0c\u6216\u8005\u9664\u4fdd\u7559\u7684\u4e00\u4e2a\u526f\u672c\u5916\uff0c\u5220\u9664\u5176\u4ed6\u6240\u6709\u526f\u672c\u4e0a\u7684\u6570\u636e\u3002</p>\n<p>\u91cd\u547d\u540d\u73b0\u6709\u7684 MergeTree \u8868\uff0c\u7136\u540e\u4f7f\u7528\u65e7\u540d\u79f0\u521b\u5efa <code>ReplicatedMergeTree</code> \u8868\u3002<br />\n\u5c06\u6570\u636e\u4ece\u65e7\u8868\u79fb\u52a8\u5230\u65b0\u8868\uff08<code>/var/lib/clickhouse/data/db_name/table_name/</code>\uff09\u76ee\u5f55\u5185\u7684 'detached' \u76ee\u5f55\u4e2d\u3002<br />\n\u7136\u540e\u5728\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u4e0a\u8fd0\u884c<code>ALTER TABLE ATTACH PARTITION</code>\uff0c\u5c06\u8fd9\u4e9b\u6570\u636e\u7247\u6bb5\u6dfb\u52a0\u5230\u5de5\u4f5c\u96c6\u4e2d\u3002</p>\n<h3 id=\"replicatedmergetree-zhuan-huan-wei-mergetree\">ReplicatedMergeTree \u8f6c\u6362\u4e3a MergeTree<a class=\"headerlink\" href=\"#replicatedmergetree-zhuan-huan-wei-mergetree\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u5176\u4ed6\u540d\u79f0\u521b\u5efa MergeTree \u8868\u3002\u5c06\u5177\u6709<code>ReplicatedMergeTree</code>\u8868\u6570\u636e\u7684\u76ee\u5f55\u4e2d\u7684\u6240\u6709\u6570\u636e\u79fb\u52a8\u5230\u65b0\u8868\u7684\u6570\u636e\u76ee\u5f55\u4e2d\u3002\u7136\u540e\u5220\u9664<code>ReplicatedMergeTree</code>\u8868\u5e76\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u5668\u3002</p>\n<p>\u5982\u679c\u4f60\u60f3\u5728\u4e0d\u542f\u52a8\u670d\u52a1\u5668\u7684\u60c5\u51b5\u4e0b\u6e05\u9664 <code>ReplicatedMergeTree</code> \u8868\uff1a</p>\n<ul>\n<li>\u5220\u9664\u5143\u6570\u636e\u76ee\u5f55\u4e2d\u7684\u76f8\u5e94 <code>.sql</code> \u6587\u4ef6\uff08<code>/var/lib/clickhouse/metadata/</code>\uff09\u3002</li>\n<li>\u5220\u9664 ZooKeeper \u4e2d\u7684\u76f8\u5e94\u8def\u5f84\uff08<code>/path_to_table/replica_name</code>\uff09\u3002</li>\n</ul>\n<p>\u4e4b\u540e\uff0c\u4f60\u53ef\u4ee5\u542f\u52a8\u670d\u52a1\u5668\uff0c\u521b\u5efa\u4e00\u4e2a <code>MergeTree</code> \u8868\uff0c\u5c06\u6570\u636e\u79fb\u52a8\u5230\u5176\u76ee\u5f55\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u5668\u3002</p>\n<h3 id=\"dang-zookeeper-ji-qun-zhong-de-yuan-shu-ju-diu-shi-huo-sun-pi-shi-hui-fu-fang-fa\">\u5f53 ZooKeeper \u96c6\u7fa4\u4e2d\u7684\u5143\u6570\u636e\u4e22\u5931\u6216\u635f\u574f\u65f6\u6062\u590d\u65b9\u6cd5<a class=\"headerlink\" href=\"#dang-zookeeper-ji-qun-zhong-de-yuan-shu-ju-diu-shi-huo-sun-pi-shi-hui-fu-fang-fa\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c ZooKeeper \u4e2d\u7684\u6570\u636e\u4e22\u5931\u6216\u635f\u574f\uff0c\u5982\u4e0a\u6240\u8ff0\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u6570\u636e\u8f6c\u79fb\u5230\u975e\u590d\u5236\u8868\u6765\u4fdd\u5b58\u6570\u636e\u3002</p>\n<p><a name=\"table_engines/custom_partitioning_key/\"></a><a name=\"../table_engines/custom_partitioning_key/\"></a><a name=\"../../../../../table_engines/custom_partitioning_key/\"></a><a name=\"../../../../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../../../../../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../../../../../../table_engines/custom_partitioning_key/\"></a><a name=\"../../../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../../../table_engines/custom_partitioning_key/\"></a><a name=\"../../../../table_engines/custom_partitioning_key/\"></a><a name=\"../../table_engines/custom_partitioning_key/\"></a><a name=\"operations/table_engines/custom_partitioning_key/\"></a><a name=\"custom_partitioning_key/\"></a></p>\n<h2 id=\"zi-ding-yi-fen-qu-jian\">\u81ea\u5b9a\u4e49\u5206\u533a\u952e<a class=\"headerlink\" href=\"#zi-ding-yi-fen-qu-jian\" title=\"Permanent link\">&para;</a></h2>\n<p><a href=\"#mergetree/\">MergeTree</a> \u7cfb\u5217\u7684\u8868\uff08\u5305\u62ec <a href=\"#replication/\">\u53ef\u590d\u5236\u8868</a> \uff09\u53ef\u4ee5\u4f7f\u7528\u5206\u533a\u3002\u57fa\u4e8e MergeTree \u8868\u7684 <a href=\"#materializedview/\">\u7269\u5316\u89c6\u56fe</a> \u4e5f\u652f\u6301\u5206\u533a\u3002</p>\n<p>\u4e00\u4e2a\u5206\u533a\u662f\u6307\u6309\u6307\u5b9a\u89c4\u5219\u903b\u8f91\u7ec4\u5408\u4e00\u8d77\u7684\u8868\u7684\u8bb0\u5f55\u96c6\u3002\u53ef\u4ee5\u6309\u4efb\u610f\u6807\u51c6\u8fdb\u884c\u5206\u533a\uff0c\u5982\u6309\u6708\uff0c\u6309\u65e5\u6216\u6309\u4e8b\u4ef6\u7c7b\u578b\u3002\u4e3a\u4e86\u51cf\u5c11\u9700\u8981\u64cd\u4f5c\u7684\u6570\u636e\uff0c\u6bcf\u4e2a\u5206\u533a\u90fd\u662f\u5206\u5f00\u5b58\u50a8\u7684\u3002\u8bbf\u95ee\u6570\u636e\u65f6\uff0cClickHouse \u5c3d\u91cf\u4f7f\u7528\u8fd9\u4e9b\u5206\u533a\u7684\u6700\u5c0f\u5b50\u96c6\u3002</p>\n<p>\u5206\u533a\u662f\u5728 <a href=\"#table_engine-mergetree-creating-a-table\">\u5efa\u8868</a> \u7684 <code>PARTITION BY expr</code> \u5b50\u53e5\u4e2d\u6307\u5b9a\u3002\u5206\u533a\u952e\u53ef\u4ee5\u662f\u5173\u4e8e\u5217\u7684\u4efb\u4f55\u8868\u8fbe\u5f0f\u3002\u4f8b\u5982\uff0c\u6307\u5b9a\u6309\u6708\u5206\u533a\uff0c\u8868\u8fbe\u5f0f\u4e3a <code>toYYYYMM(date_column)</code>\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">VisitDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> \n    <span class=\"n\">Hour</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> \n    <span class=\"n\">ClientID</span> <span class=\"n\">UUID</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span>\n<span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">VisitDate</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">Hour</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u5206\u533a\u952e\u4e5f\u53ef\u4ee5\u662f\u8868\u8fbe\u5f0f\u5143\u7ec4\uff08\u7c7b\u4f3c <a href=\"#primary-keys-and-indexes-in-queries\">\u4e3b\u952e</a> \uff09\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ReplicatedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"s1\">&#39;/clickhouse/tables/name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;replica1&#39;</span><span class=\"p\">,</span> <span class=\"n\">Sign</span><span class=\"p\">)</span>\n<span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">toMonday</span><span class=\"p\">(</span><span class=\"n\">StartDate</span><span class=\"p\">),</span> <span class=\"n\">EventType</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">StartDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">));</span>\n</code></pre></div>\n\n\n<p>\u4e0a\u4f8b\u4e2d\uff0c\u6211\u4eec\u8bbe\u7f6e\u6309\u4e00\u5468\u5185\u7684\u4e8b\u4ef6\u7c7b\u578b\u5206\u533a\u3002</p>\n<p>\u65b0\u6570\u636e\u63d2\u5165\u5230\u8868\u4e2d\u65f6\uff0c\u8fd9\u4e9b\u6570\u636e\u4f1a\u5b58\u50a8\u4e3a\u6309\u4e3b\u952e\u6392\u5e8f\u7684\u65b0\u7247\u6bb5\uff08\u5757\uff09\u3002\u63d2\u5165\u540e 10-15 \u5206\u949f\uff0c\u540c\u4e00\u5206\u533a\u7684\u5404\u4e2a\u7247\u6bb5\u4f1a\u5408\u5e76\u4e3a\u4e00\u6574\u4e2a\u7247\u6bb5\u3002</p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u90a3\u4e9b\u6709\u76f8\u540c\u5206\u533a\u8868\u8fbe\u5f0f\u503c\u7684\u6570\u636e\u7247\u6bb5\u624d\u4f1a\u5408\u5e76\u3002\u8fd9\u610f\u5473\u7740 <strong>\u4f60\u4e0d\u5e94\u8be5\u7528\u592a\u7cbe\u7ec6\u7684\u5206\u533a\u65b9\u6848</strong>\uff08\u8d85\u8fc7\u4e00\u5343\u4e2a\u5206\u533a\uff09\u3002\u5426\u5219\uff0c\u4f1a\u56e0\u4e3a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u6570\u91cf\u548c\u9700\u8981\u627e\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u8fc7\u591a\uff0c\u5bfc\u81f4 <code>SELECT</code> \u67e5\u8be2\u6548\u7387\u4e0d\u4f73\u3002</p>\n</div>\n<p>\u53ef\u4ee5\u901a\u8fc7 <a href=\"#system_tables-parts\">system.parts</a> \u8868\u67e5\u770b\u8868\u7247\u6bb5\u548c\u5206\u533a\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a <code>visits</code> \u8868\uff0c\u6309\u6708\u5206\u533a\u3002\u5bf9 <code>system.parts</code> \u8868\u6267\u884c <code>SELECT</code>\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> \n    <span class=\"n\">partition</span><span class=\"p\">,</span>\n    <span class=\"n\">name</span><span class=\"p\">,</span> \n    <span class=\"n\">active</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">parts</span> \n<span class=\"k\">WHERE</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;visits&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500partition\u2500\u252c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500active\u2500\u2510</span>\n<span class=\"err\">\u2502 201901    \u2502 201901_1_3_1   \u2502      0 \u2502</span>\n<span class=\"err\">\u2502 201901    \u2502 201901_1_9_2   \u2502      1 \u2502</span>\n<span class=\"err\">\u2502 201901    \u2502 201901_8_8_0   \u2502      0 \u2502</span>\n<span class=\"err\">\u2502 201901    \u2502 201901_9_9_0   \u2502      0 \u2502</span>\n<span class=\"err\">\u2502 201902    \u2502 201902_4_6_1   \u2502      1 \u2502</span>\n<span class=\"err\">\u2502 201902    \u2502 201902_10_10_0 \u2502      1 \u2502</span>\n<span class=\"err\">\u2502 201902    \u2502 201902_11_11_0 \u2502      1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><code>partition</code> \u5217\u5b58\u50a8\u5206\u533a\u7684\u540d\u79f0\u3002\u6b64\u793a\u4f8b\u4e2d\u6709\u4e24\u4e2a\u5206\u533a\uff1a<code>201901</code> \u548c <code>201902</code>\u3002\u5728 <a href=\"#alter_manipulations-with-partitions\">ALTER ... PARTITION</a> \u8bed\u53e5\u4e2d\u4f60\u53ef\u4ee5\u4f7f\u7528\u8be5\u5217\u503c\u6765\u6307\u5b9a\u5206\u533a\u540d\u79f0\u3002</p>\n<p><code>name</code> \u5217\u4e3a\u5206\u533a\u4e2d\u6570\u636e\u7247\u6bb5\u7684\u540d\u79f0\u3002\u5728 <a href=\"#alter_attach-partition\">ALTER ATTACH PART</a> \u8bed\u53e5\u4e2d\u4f60\u53ef\u4ee5\u4f7f\u7528\u6b64\u5217\u503c\u4e2d\u6765\u6307\u5b9a\u7247\u6bb5\u540d\u79f0\u3002</p>\n<p>\u8fd9\u91cc\u6211\u4eec\u62c6\u89e3\u4e0b\u7b2c\u4e00\u90e8\u5206\u7684\u540d\u79f0\uff1a<code>201901_1_3_1</code>\uff1a</p>\n<ul>\n<li><code>201901</code> \u662f\u5206\u533a\u540d\u79f0\u3002</li>\n<li><code>1</code> \u662f\u6570\u636e\u5757\u7684\u6700\u5c0f\u7f16\u53f7\u3002</li>\n<li><code>3</code> \u662f\u6570\u636e\u5757\u7684\u6700\u5927\u7f16\u53f7\u3002</li>\n<li><code>1</code> \u662f\u5757\u7ea7\u522b\uff08\u5373\u5728\u7531\u5757\u7ec4\u6210\u7684\u5408\u5e76\u6811\u4e2d\uff0c\u8be5\u5757\u5728\u6811\u4e2d\u7684\u6df1\u5ea6\uff09\u3002</li>\n</ul>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u65e7\u7c7b\u578b\u8868\u7684\u7247\u6bb5\u540d\u79f0\u4e3a\uff1a<code>20190117_20190123_2_2_0</code>\uff08\u6700\u5c0f\u65e5\u671f - \u6700\u5927\u65e5\u671f - \u6700\u5c0f\u5757\u7f16\u53f7 - \u6700\u5927\u5757\u7f16\u53f7 - \u5757\u7ea7\u522b\uff09\u3002</p>\n</div>\n<p><code>active</code> \u5217\u4e3a\u7247\u6bb5\u72b6\u6001\u3002<code>1</cod");
            
            document.write("e> \u6fc0\u6d3b\u72b6\u6001\uff1b<code>0</code> \u975e\u6fc0\u6d3b\u72b6\u6001\u3002\u975e\u6fc0\u6d3b\u7247\u6bb5\u662f\u90a3\u4e9b\u5728\u5408\u5e76\u5230\u8f83\u5927\u7247\u6bb5\u4e4b\u540e\u5269\u4f59\u7684\u6e90\u6570\u636e\u7247\u6bb5\u3002\u635f\u574f\u7684\u6570\u636e\u7247\u6bb5\u4e5f\u8868\u793a\u4e3a\u975e\u6d3b\u52a8\u72b6\u6001\u3002</p>\n<p>\u6b63\u5982\u5728\u793a\u4f8b\u4e2d\u6240\u770b\u5230\u7684\uff0c\u540c\u4e00\u5206\u533a\u4e2d\u6709\u51e0\u4e2a\u72ec\u7acb\u7684\u7247\u6bb5\uff08\u4f8b\u5982\uff0c<code>201901_1_3_1</code>\u548c<code>201901_1_9_2</code>\uff09\u3002\u8fd9\u610f\u5473\u7740\u8fd9\u4e9b\u7247\u6bb5\u5c1a\u672a\u5408\u5e76\u3002ClickHouse \u5927\u7ea6\u5728\u63d2\u5165\u540e15\u5206\u949f\u5b9a\u671f\u62a5\u544a\u5408\u5e76\u64cd\u4f5c\uff0c\u5408\u5e76\u63d2\u5165\u7684\u6570\u636e\u7247\u6bb5\u3002\u6b64\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <a href=\"#misc_operations-optimize\">OPTIMIZE</a> \u8bed\u53e5\u76f4\u63a5\u6267\u884c\u5408\u5e76\u3002\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">OPTIMIZE</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201902</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500partition\u2500\u252c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500active\u2500\u2510</span>\n<span class=\"err\">\u2502 201901    \u2502 201901_1_3_1   \u2502      0 \u2502</span>\n<span class=\"err\">\u2502 201901    \u2502 201901_1_9_2   \u2502      1 \u2502</span>\n<span class=\"err\">\u2502 201901    \u2502 201901_8_8_0   \u2502      0 \u2502</span>\n<span class=\"err\">\u2502 201901    \u2502 201901_9_9_0   \u2502      0 \u2502</span>\n<span class=\"err\">\u2502 201902    \u2502 201902_4_6_1   \u2502      0 \u2502</span>\n<span class=\"err\">\u2502 201902    \u2502 201902_4_11_2  \u2502      1 \u2502</span>\n<span class=\"err\">\u2502 201902    \u2502 201902_10_10_0 \u2502      0 \u2502</span>\n<span class=\"err\">\u2502 201902    \u2502 201902_11_11_0 \u2502      0 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u975e\u6fc0\u6d3b\u7247\u6bb5\u4f1a\u5728\u5408\u5e76\u540e\u768410\u5206\u949f\u5de6\u53f3\u5220\u9664\u3002</p>\n<p>\u67e5\u770b\u7247\u6bb5\u548c\u5206\u533a\u4fe1\u606f\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u8fdb\u5165\u8868\u7684\u76ee\u5f55\uff1a<code>/var/lib/clickhouse/data/&lt;database&gt;/&lt;table&gt;/</code>\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>dev:/var/lib/clickhouse/data/default/visits$ ls -l\ntotal <span class=\"m\">40</span>\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">1</span> <span class=\"m\">16</span>:48 201901_1_3_1\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">16</span>:17 201901_1_9_2\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">15</span>:52 201901_8_8_0\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">15</span>:52 201901_9_9_0\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">16</span>:17 201902_10_10_0\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">16</span>:17 201902_11_11_0\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">16</span>:19 201902_4_11_2\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">12</span>:09 201902_4_6_1\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">1</span> <span class=\"m\">16</span>:48 detached\n</code></pre></div>\n\n\n<p>\u6587\u4ef6\u5939 '201901_1_1_0'\uff0c'201901_1_7_1' \u7b49\u662f\u7247\u6bb5\u7684\u76ee\u5f55\u3002\u6bcf\u4e2a\u7247\u6bb5\u90fd\u4e0e\u4e00\u4e2a\u5bf9\u5e94\u7684\u5206\u533a\u76f8\u5173\uff0c\u5e76\u4e14\u53ea\u5305\u542b\u8fd9\u4e2a\u6708\u7684\u6570\u636e\uff08\u672c\u4f8b\u4e2d\u7684\u8868\u6309\u6708\u5206\u533a\uff09\u3002</p>\n<p><code>detached</code> \u76ee\u5f55\u5b58\u653e\u7740\u4f7f\u7528 <a href=\"#alter_detach-partition\">DETACH</a> \u8bed\u53e5\u4ece\u8868\u4e2d\u5206\u79bb\u7684\u7247\u6bb5\u3002\u635f\u574f\u7684\u7247\u6bb5\u4e5f\u4f1a\u79fb\u5230\u8be5\u76ee\u5f55\uff0c\u800c\u4e0d\u662f\u5220\u9664\u3002\u670d\u52a1\u5668\u4e0d\u4f7f\u7528<code>detached</code>\u76ee\u5f55\u4e2d\u7684\u7247\u6bb5\u3002\u53ef\u4ee5\u968f\u65f6\u6dfb\u52a0\uff0c\u5220\u9664\u6216\u4fee\u6539\u6b64\u76ee\u5f55\u4e2d\u7684\u6570\u636e \u2013 \u5728\u8fd0\u884c <a href=\"#alter_attach-partition\">ATTACH</a> \u8bed\u53e5\u524d\uff0c\u670d\u52a1\u5668\u4e0d\u4f1a\u611f\u77e5\u5230\u3002</p>\n<p>\u6ce8\u610f\uff0c\u5728\u64cd\u4f5c\u670d\u52a1\u5668\u65f6\uff0c\u4f60\u4e0d\u80fd\u624b\u52a8\u66f4\u6539\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u7247\u6bb5\u96c6\u6216\u5176\u6570\u636e\uff0c\u56e0\u4e3a\u670d\u52a1\u5668\u4e0d\u4f1a\u611f\u77e5\u5230\u8fd9\u4e9b\u4fee\u6539\u3002\u5bf9\u4e8e\u975e\u590d\u5236\u8868\uff0c\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u505c\u6b62\u65f6\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\uff0c\u4f46\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\u3002\u5bf9\u4e8e\u590d\u5236\u8868\uff0c\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u4e0d\u8981\u66f4\u6539\u7247\u6bb5\u6587\u4ef6\u3002</p>\n<p>ClickHouse \u652f\u6301\u5bf9\u5206\u533a\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\uff1a\u5220\u9664\u5206\u533a\uff0c\u4ece\u4e00\u4e2a\u8868\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u8868\uff0c\u6216\u521b\u5efa\u5907\u4efd\u3002\u4e86\u89e3\u5206\u533a\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u8bf7\u53c2\u9605 <a href=\"#alter_manipulations-with-partitions\">\u5206\u533a\u548c\u7247\u6bb5\u7684\u64cd\u4f5c</a> \u4e00\u8282\u3002</p>\n<p><a name=\"../table_engines/replacingmergetree/\"></a><a name=\"../operations/table_engines/replacingmergetree/\"></a><a name=\"../../table_engines/replacingmergetree/\"></a><a name=\"../../operations/table_engines/replacingmergetree/\"></a><a name=\"../../../operations/table_engines/replacingmergetree/\"></a><a name=\"table_engines/replacingmergetree/\"></a><a name=\"../../../../../operations/table_engines/replacingmergetree/\"></a><a name=\"../../../table_engines/replacingmergetree/\"></a><a name=\"../../../../../../table_engines/replacingmergetree/\"></a><a name=\"../../../../table_engines/replacingmergetree/\"></a><a name=\"operations/table_engines/replacingmergetree/\"></a><a name=\"../../../../../table_engines/replacingmergetree/\"></a><a name=\"../../../../operations/table_engines/replacingmergetree/\"></a><a name=\"replacingmergetree/\"></a></p>\n<h2 id=\"replacingmergetree\">ReplacingMergeTree<a class=\"headerlink\" href=\"#replacingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8be5\u5f15\u64ce\u548c<a href=\"#mergetree/\">MergeTree</a>\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u5b83\u4f1a\u5220\u9664\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u91cd\u590d\u9879\u3002</p>\n<p>\u6570\u636e\u7684\u53bb\u91cd\u53ea\u4f1a\u5728\u5408\u5e76\u7684\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u3002\u5408\u5e76\u4f1a\u5728\u672a\u77e5\u7684\u65f6\u95f4\u5728\u540e\u53f0\u8fdb\u884c\uff0c\u56e0\u6b64\u4f60\u65e0\u6cd5\u9884\u5148\u4f5c\u51fa\u8ba1\u5212\u3002\u6709\u4e00\u4e9b\u6570\u636e\u53ef\u80fd\u4ecd\u672a\u88ab\u5904\u7406\u3002\u5c3d\u7ba1\u4f60\u53ef\u4ee5\u8c03\u7528 <code>OPTIMIZE</code> \u8bed\u53e5\u53d1\u8d77\u8ba1\u5212\u5916\u7684\u5408\u5e76\uff0c\u4f46\u8bf7\u4e0d\u8981\u6307\u671b\u4f7f\u7528\u5b83\uff0c\u56e0\u4e3a <code>OPTIMIZE</code> \u8bed\u53e5\u4f1a\u5f15\u53d1\u5bf9\u5927\u91cf\u6570\u636e\u7684\u8bfb\u548c\u5199\u3002</p>\n<p>\u56e0\u6b64\uff0c<code>ReplacingMergeTree</code> \u9002\u7528\u4e8e\u5728\u540e\u53f0\u6e05\u9664\u91cd\u590d\u7684\u6570\u636e\u4ee5\u8282\u7701\u7a7a\u95f4\uff0c\u4f46\u662f\u5b83\u4e0d\u4fdd\u8bc1\u6ca1\u6709\u91cd\u590d\u7684\u6570\u636e\u51fa\u73b0\u3002</p>\n<h3 id=\"jian-biao\">\u5efa\u8868<a class=\"headerlink\" href=\"#jian-biao\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ReplacingMergeTree</span><span class=\"p\">([</span><span class=\"n\">ver</span><span class=\"p\">])</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>\u8bf7\u6c42\u53c2\u6570\u7684\u63cf\u8ff0\uff0c\u53c2\u8003<a href=\"#../../query_language/create/\">\u8bf7\u6c42\u53c2\u6570</a>\u3002</p>\n<p><strong>ReplacingMergeTree Parameters</strong></p>\n<ul>\n<li>\n<p><code>ver</code> \u2014 \u7248\u672c\u5217\u3002\u7c7b\u578b\u4e3a <code>UInt*</code>, <code>Date</code> \u6216 <code>DateTime</code>\u3002\u53ef\u9009\u53c2\u6570\u3002</p>\n<p>\u5408\u5e76\u7684\u65f6\u5019\uff0c<code>ReplacingMergeTree</code> \u4ece\u6240\u6709\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u884c\u4e2d\u9009\u62e9\u4e00\u884c\u7559\u4e0b\uff1a<br />\n- \u5982\u679c <code>ver</code> \u5217\u672a\u6307\u5b9a\uff0c\u9009\u62e9\u6700\u540e\u4e00\u6761\u3002<br />\n- \u5982\u679c <code>ver</code> \u5217\u5df2\u6307\u5b9a\uff0c\u9009\u62e9 <code>ver</code> \u503c\u6700\u5927\u7684\u7248\u672c\u3002</p>\n</li>\n</ul>\n<p><strong>\u5b50\u53e5</strong></p>\n<p>\u521b\u5efa <code>ReplacingMergeTree</code> \u8868\u65f6\uff0c\u9700\u8981\u4e0e\u521b\u5efa <code>MergeTree</code> \u8868\u65f6\u76f8\u540c\u7684<a href=\"#mergetree/\">\u5b50\u53e5</a>\u3002</p>\n<details>\n<p><summary>\u5df2\u5f03\u7528\u7684\u5efa\u8868\u65b9\u6cd5</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u4e0d\u8981\u5728\u65b0\u9879\u76ee\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u53ef\u80fd\u7684\u8bdd\uff0c\u8bf7\u5c06\u65e7\u9879\u76ee\u5207\u6362\u5230\u4e0a\u8ff0\u65b9\u6cd5\u3002</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">ReplacingMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">ver</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p>\u9664\u4e86 <code>ver</code> \u7684\u6240\u6709\u53c2\u6570\u90fd\u4e0e <code>MergeTree</code> \u4e2d\u7684\u542b\u4e49\u76f8\u540c\u3002</p>\n<ul>\n<li><code>ver</code> - \u7248\u672c\u5217\u3002\u53ef\u9009\u53c2\u6570\uff0c\u6709\u5173\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\u4e0a\u6587\u3002</li>\n</ul>\n</details>\n<p><a name=\"../../../../operations/table_engines/summingmergetree/\"></a><a name=\"../../../../table_engines/summingmergetree/\"></a><a name=\"../../../../../../table_engines/summingmergetree/\"></a><a name=\"summingmergetree/\"></a><a name=\"../table_engines/summingmergetree/\"></a><a name=\"../../table_engines/summingmergetree/\"></a><a name=\"table_engines/summingmergetree/\"></a><a name=\"../../../table_engines/summingmergetree/\"></a><a name=\"../operations/table_engines/summingmergetree/\"></a><a name=\"../../../operations/table_engines/summingmergetree/\"></a><a name=\"../../operations/table_engines/summingmergetree/\"></a><a name=\"");
            
            document.write("../../../../../operations/table_engines/summingmergetree/\"></a><a name=\"operations/table_engines/summingmergetree/\"></a><a name=\"../../../../../table_engines/summingmergetree/\"></a></p>\n<h2 id=\"summingmergetree\">SummingMergeTree<a class=\"headerlink\" href=\"#summingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8be5\u5f15\u64ce\u7ee7\u627f\u81ea <a href=\"#mergetree/\">MergeTree</a>\u3002\u533a\u522b\u5728\u4e8e\uff0c\u5f53\u5408\u5e76 <code>SummingMergeTree</code> \u8868\u7684\u6570\u636e\u7247\u6bb5\u65f6\uff0cClickHouse \u4f1a\u628a\u6240\u6709\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u884c\u5408\u5e76\u4e3a\u4e00\u884c\uff0c\u8be5\u884c\u5305\u542b\u4e86\u88ab\u5408\u5e76\u7684\u884c\u4e2d\u5177\u6709\u6570\u503c\u6570\u636e\u7c7b\u578b\u7684\u5217\u7684\u6c47\u603b\u503c\u3002\u5982\u679c\u4e3b\u952e\u7684\u7ec4\u5408\u65b9\u5f0f\u4f7f\u5f97\u5355\u4e2a\u952e\u503c\u5bf9\u5e94\u4e8e\u5927\u91cf\u7684\u884c\uff0c\u5219\u53ef\u4ee5\u663e\u8457\u7684\u51cf\u5c11\u5b58\u50a8\u7a7a\u95f4\u5e76\u52a0\u5feb\u6570\u636e\u67e5\u8be2\u7684\u901f\u5ea6\u3002</p>\n<p>\u6211\u4eec\u63a8\u8350\u5c06\u8be5\u5f15\u64ce\u548c <code>MergeTree</code> \u4e00\u8d77\u4f7f\u7528\u3002\u4f8b\u5982\uff0c\u5728\u51c6\u5907\u505a\u62a5\u544a\u7684\u65f6\u5019\uff0c\u5c06\u5b8c\u6574\u7684\u6570\u636e\u5b58\u50a8\u5728 <code>MergeTree</code> \u8868\u4e2d\uff0c\u5e76\u4e14\u4f7f\u7528 <code>SummingMergeTree</code> \u6765\u5b58\u50a8\u805a\u5408\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u4f7f\u4f60\u907f\u514d\u56e0\u4e3a\u4f7f\u7528\u4e0d\u6b63\u786e\u7684\u4e3b\u952e\u7ec4\u5408\u65b9\u5f0f\u800c\u4e22\u5931\u6709\u4ef7\u503c\u7684\u6570\u636e\u3002</p>\n<h3 id=\"jian-biao_1\">\u5efa\u8868<a class=\"headerlink\" href=\"#jian-biao_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span><span class=\"w\"> </span><span class=\"nc\">TABLE</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IF NOT EXISTS</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">db.</span><span class=\"o\">]</span><span class=\"n\">table_name</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ON CLUSTER cluster</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">name1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr1</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">name2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type2</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr2</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">...</span><span class=\"w\"></span>\n<span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">ENGINE</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">SummingMergeTree</span><span class=\"p\">(</span><span class=\"o\">[</span><span class=\"n\">columns</span><span class=\"o\">]</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">PARTITION BY expr</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">ORDER BY expr</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">SAMPLE BY expr</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"o\">[</span><span class=\"n\">SETTINGS name=value, ...</span><span class=\"o\">]</span><span class=\"w\"></span>\n</code></pre></div>\n\n\n<p>\u8bf7\u6c42\u53c2\u6570\u7684\u63cf\u8ff0\uff0c\u53c2\u8003 <a href=\"#../../query_language/create/\">\u8bf7\u6c42\u63cf\u8ff0</a>\u3002</p>\n<p><strong>SummingMergeTree \u7684\u53c2\u6570</strong></p>\n<ul>\n<li>\n<p><code>columns</code> - \u5305\u542b\u4e86\u5c06\u8981\u88ab\u6c47\u603b\u7684\u5217\u7684\u5217\u540d\u7684\u5143\u7ec4\u3002\u53ef\u9009\u53c2\u6570\u3002<br />\n\u6240\u9009\u7684\u5217\u5fc5\u987b\u662f\u6570\u503c\u7c7b\u578b\uff0c\u5e76\u4e14\u4e0d\u53ef\u4f4d\u4e8e\u4e3b\u952e\u4e2d\u3002</p>\n<p>\u5982\u679c\u6ca1\u6709\u6307\u5b9a <code>columns</code>\uff0cClickHouse \u4f1a\u628a\u6240\u6709\u4e0d\u5728\u4e3b\u952e\u4e2d\u7684\u6570\u503c\u7c7b\u578b\u7684\u5217\u90fd\u8fdb\u884c\u6c47\u603b\u3002</p>\n</li>\n</ul>\n<p><strong>\u5b50\u53e5</strong></p>\n<p>\u521b\u5efa <code>SummingMergeTree</code> \u8868\u65f6\uff0c\u9700\u8981\u4e0e\u521b\u5efa <code>MergeTree</code> \u8868\u65f6\u76f8\u540c\u7684<a href=\"#mergetree/\">\u5b50\u53e5</a>\u3002</p>\n<details>\n<p><summary>\u5df2\u5f03\u7528\u7684\u5efa\u8868\u65b9\u6cd5</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u4e0d\u8981\u5728\u65b0\u9879\u76ee\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u53ef\u80fd\u7684\u8bdd\uff0c\u8bf7\u5c06\u65e7\u9879\u76ee\u5207\u6362\u5230\u4e0a\u8ff0\u65b9\u6cd5\u3002</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span><span class=\"w\"> </span><span class=\"nc\">TABLE</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IF NOT EXISTS</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">db.</span><span class=\"o\">]</span><span class=\"n\">table_name</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ON CLUSTER cluster</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">name1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr1</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">name2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type2</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr2</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">...</span><span class=\"w\"></span>\n<span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">ENGINE</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">=</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">SummingMergeTree</span><span class=\"p\">(</span><span class=\"nc\">date</span><span class=\"o\">-</span><span class=\"k\">column</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">, sampling_expression</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">key</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">index_granularity</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">columns</span><span class=\"o\">]</span><span class=\"p\">)</span><span class=\"w\"></span>\n</code></pre></div>\n\n\n<p>\u9664 <code>columns</code> \u5916\u7684\u6240\u6709\u53c2\u6570\u90fd\u4e0e <code>MergeTree</code> \u4e2d\u7684\u542b\u4e49\u76f8\u540c\u3002</p>\n<ul>\n<li><code>columns</code> \u2014 \u5305\u542b\u5c06\u8981\u88ab\u6c47\u603b\u7684\u5217\u7684\u5217\u540d\u7684\u5143\u7ec4\u3002\u53ef\u9009\u53c2\u6570\u3002\u6709\u5173\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\u4e0a\u6587\u3002</li>\n</ul>\n</details>\n<h3 id=\"yong-fa-shi-li_2\">\u7528\u6cd5\u793a\u4f8b<a class=\"headerlink\" href=\"#yong-fa-shi-li_2\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8003\u8651\u5982\u4e0b\u7684\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">summtt</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">key</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">value</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">SummingMergeTree</span><span class=\"p\">()</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">key</span>\n</code></pre></div>\n\n\n<p>\u5411\u5176\u4e2d\u63d2\u5165\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">:) INSERT INTO summtt Values(1,1),(1,2),(2,1)</span>\n</code></pre></div>\n\n\n<p>ClickHouse\u53ef\u80fd\u4e0d\u4f1a\u5b8c\u6574\u7684\u6c47\u603b\u6240\u6709\u884c\uff08<a href=\"#data-processing\">\u89c1\u4e0b\u6587</a>\uff09,\u56e0\u6b64\u6211\u4eec\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528\u4e86\u805a\u5408\u51fd\u6570 <code>sum</code> \u548c <code>GROUP BY</code> \u5b50\u53e5\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">key</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">summtt</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">key</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500key\u2500\u252c\u2500sum(value)\u2500\u2510</span>\n<span class=\"err\">\u2502   2 \u2502          1 \u2502</span>\n<span class=\"err\">\u2502   1 \u2502          3 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"data-processing\">\u6570\u636e\u5904\u7406<a class=\"headerlink\" href=\"#data-processing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5f53\u6570\u636e\u88ab\u63d2\u5165\u5230\u8868\u4e2d\u65f6\uff0c\u4ed6\u4eec\u5c06\u88ab\u539f\u6837\u4fdd\u5b58\u3002ClickHouse \u5b9a\u671f\u5408\u5e76\u63d2\u5165\u7684\u6570\u636e\u7247\u6bb5\uff0c\u5e76\u5728\u8fd9\u4e2a\u65f6\u5019\u5bf9\u6240\u6709\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u884c\u4e2d\u7684\u5217\u8fdb\u884c\u6c47\u603b\uff0c\u5c06\u8fd9\u4e9b\u884c\u66ff\u6362\u4e3a\u5305\u542b\u6c47\u603b\u6570\u636e\u7684\u4e00\u884c\u8bb0\u5f55\u3002</p>\n<p>ClickHouse \u4f1a\u6309\u7247\u6bb5\u5408\u5e76\u6570\u636e\uff0c\u4ee5\u81f3\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u7247\u6bb5\u4e2d\u4f1a\u5305\u542b\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u884c\uff0c\u5373\u5355\u4e2a\u6c47\u603b\u7247\u6bb5\u5c06\u4f1a\u662f\u4e0d\u5b8c\u6574\u7684\u3002\u56e0\u6b64\uff0c\u805a\u5408\u51fd\u6570 <a href=\"#agg_function-sum\">sum()</a> \u548c <code>GROUP BY</code> \u5b50\u53e5\u5e94\u8be5\u5728\uff08<code>SELECT</code>\uff09\u67e5\u8be2\u8bed\u53e5\u4e2d\u88ab\u4f7f\u7528\uff0c\u5982\u4e0a\u6587\u4e2d\u7684\u4f8b\u5b50\u6240\u8ff0\u3002</p>\n<h4 id=\"hui-zong-de-tong-yong-gui-ze\">\u6c47\u603b\u7684\u901a\u7528\u89c4\u5219<a class=\"headerlink\" href=\"#hui-zong-de-tong-yong-gui-ze\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5217\u4e2d\u6570\u503c\u7c7b\u578b\u7684\u503c\u4f1a\u88ab\u6c47\u603b\u3002\u8fd9\u4e9b\u5217\u7684\u96c6\u5408\u5728\u53c2\u6570 <code>columns</code> \u4e2d\u88ab\u5b9a\u4e49\u3002</p>\n<p>\u5982\u679c\u7528\u4e8e\u6c47\u603b\u7684\u6240\u6709\u5217\u4e2d\u7684\u503c\u5747\u4e3a0\uff0c\u5219\u8be5\u884c\u4f1a\u88ab\u5220\u9664\u3002</p>\n<p>\u5982\u679c\u5217\u4e0d\u5728\u4e3b\u952e\u4e2d\u4e14\u65e0\u6cd5\u88ab\u6c47\u603b\uff0c\u5219\u4f1a\u5728\u73b0\u6709\u7684\u503c\u4e2d\u4efb\u9009\u4e00\u4e2a\u3002</p>\n<p>\u4e3b\u952e\u6240\u5728\u7684\u5217\u4e2d\u7684\u503c\u4e0d\u4f1a\u88ab\u6c47\u603b\u3002</p>\n<h4 id=\"aggregatefunction-lie-zhong-de-hui-zong\">AggregateFunction \u5217\u4e2d\u7684\u6c47\u603b<a class=\"headerlink\" href=\"#aggregatefunction-lie-zhong-de-hui-zong\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5bf9\u4e8e <a href=\"#../../data_types/nested_data_structures/aggregatefunction/\">AggregateFunction \u7c7b\u578b</a>\u7684\u5217\uff0cClickHouse \u6839\u636e\u5bf9\u5e94\u51fd\u6570\u8868\u73b0\u4e3a <a href=\"#aggregatingmergetree/\">AggregatingMergeTree</a> \u5f15\u64ce\u7684\u805a\u5408\u3002</p>\n<h4 id=\"qian-tao-jie-gou\">\u5d4c\u5957\u7ed3\u6784<a class=\"headerlink\" href=\"#qian-tao-jie-gou\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8868\u4e2d\u53ef\u4ee5\u5177\u6709\u4ee5\u7279\u6b8a\u65b9\u5f0f\u5904\u7406\u7684\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u3002</p>\n<p>\u5982\u679c\u5d4c\u5957\u8868\u7684\u540d\u79f0\u4ee5 <code>Map</code> \u7ed3\u5c3e\uff0c\u5e76\u4e14\u5305\u542b\u81f3\u5c11\u4e24\u4e2a\u7b26\u5408\u4ee5\u4e0b\u6761\u4ef6\u7684\u5217\uff1a</p>\n<ul>\n<li>\u7b2c\u4e00\u5217\u662f\u6570\u503c\u7c7b\u578b <code>(*Int*, Date, DateTime)</code>\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a <code>key</code>,</li>\n<li>\u5176\u4ed6\u7684\u5217\u662f\u53ef\u8ba1\u7b97\u7684 <code>(*Int*, Float32/64)</code>\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a <code>(values...)</code>,</li>\n</ul>\n<p>\u7136\u540e\u8fd9\u4e2a\u5d4c\u5957\u8868\u4f1a\u88ab\u89e3\u91ca\u4e3a\u4e00\u4e2a <code>key =&gt; (values...)</code> \u7684\u6620\u5c04\uff0c\u5f53\u5408\u5e76\u5b83\u4eec\u7684\u884c\u65f6\uff0c\u4e24\u4e2a\u6570\u636e\u96c6\u4e2d\u7684\u5143\u7d20\u4f1a\u88ab\u6839\u636e <code>key</code> \u5408\u5e76\u4e3a\u76f8\u5e94\u7684 <code>(values...)</code> \u7684\u6c47\u603b\u503c\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">[(1, 100)] + [(2, 150)] -&gt; [(1, 100), (2, 150)]</span>\n<span class=\"k\">[(1, 100)] + [(1, 150)] -&gt; [(1, 250)]</span>\n<span class=\"k\">[(1, 100)] + [(1, 150), (2, 150)] -&gt; [(1, 250), (2, 150)]</span>\n<span class=\"k\">[(1, 100), (2, 150)] + [(1, -100)] -&gt; [(2, 150)]</span>\n</code></pre></div>\n\n\n<p>\u8bf7\u6c42\u6570\u636e\u65f6\uff0c\u4f7f\u7528 <a href=\"#../../query_language/agg_functions/reference/\">sumMap(key, value)</a> \u51fd\u6570\u6765\u5bf9 <code>Map</code> \u8fdb\u884c\u805a\u5408\u3002</p>\n<p>\u5bf9\u4e8e\u5d4c\u5957\u6570\u636e\u7ed3\u6784\uff0c\u4f60\u65e0\u9700\u5728\u5217\u7684\u5143\u7ec4\u4e2d\u6307\u5b9a\u5217\u4ee5\u8fdb\u884c\u6c47\u603b\u3002</p>\n<p><a name=\"../../../table_engines/aggregatingmergetree/\"></a><a name=\"../../table_engines/aggregatingmergetree/\"></a><a name=\"../../operations/table_engines/aggregatingmergetree/\"></a><a name=\"../../../../../table_engines/aggregatingmergetree/\"></a><a name=\"../operations/table_engines/aggregatingmergetree/\"></a><a name=\"table_engines/aggregatingmergetree/\"></a><a name=\"../../../../operations/table_engines/aggregatingmergetree/\"></a><a name=\"operations/table_engines/aggregatingmergetree/\"></a><a name=\"../../../../../operations/table_engines/aggregatingmergetree/\"></a><a name=\"../table_engines/aggregatingmergetree/\"></a><a name=\"../../../operations/table_engines/aggrega");
            
            document.write("tingmergetree/\"></a><a name=\"../../../../table_engines/aggregatingmergetree/\"></a><a name=\"../../../../../../table_engines/aggregatingmergetree/\"></a><a name=\"aggregatingmergetree/\"></a></p>\n<h2 id=\"aggregatingmergetree\">AggregatingMergeTree<a class=\"headerlink\" href=\"#aggregatingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8be5\u5f15\u64ce\u7ee7\u627f\u81ea <a href=\"#mergetree/\">MergeTree</a>\uff0c\u5e76\u6539\u53d8\u4e86\u6570\u636e\u7247\u6bb5\u7684\u5408\u5e76\u903b\u8f91\u3002 ClickHouse \u4f1a\u5c06\u76f8\u540c\u4e3b\u952e\u7684\u6240\u6709\u884c\uff08\u5728\u4e00\u4e2a\u6570\u636e\u7247\u6bb5\u5185\uff09\u66ff\u6362\u4e3a\u5355\u4e2a\u5b58\u50a8\u4e00\u7cfb\u5217\u805a\u5408\u51fd\u6570\u72b6\u6001\u7684\u884c\u3002</p>\n<p>\u53ef\u4ee5\u4f7f\u7528 <code>AggregatingMergeTree</code> \u8868\u6765\u505a\u589e\u91cf\u6570\u636e\u7edf\u8ba1\u805a\u5408\uff0c\u5305\u62ec\u7269\u5316\u89c6\u56fe\u7684\u6570\u636e\u805a\u5408\u3002</p>\n<p>\u5f15\u64ce\u9700\u4f7f\u7528 <a href=\"#../../data_types/nested_data_structures/aggregatefunction/\">AggregateFunction</a> \u7c7b\u578b\u6765\u5904\u7406\u6240\u6709\u5217\u3002</p>\n<p>\u5982\u679c\u8981\u6309\u4e00\u7ec4\u89c4\u5219\u6765\u5408\u5e76\u51cf\u5c11\u884c\u6570\uff0c\u5219\u4f7f\u7528 <code>AggregatingMergeTree</code> \u662f\u5408\u9002\u7684\u3002</p>\n<h3 id=\"jian-biao_2\">\u5efa\u8868<a class=\"headerlink\" href=\"#jian-biao_2\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">AggregatingMergeTree</span><span class=\"p\">()</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>\u8bed\u53e5\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605 <a href=\"#../../query_language/create/\">\u8bed\u53e5\u63cf\u8ff0</a>\u3002</p>\n<p><strong>\u5b50\u53e5</strong></p>\n<p>\u521b\u5efa <code>AggregatingMergeTree</code> \u8868\u65f6\uff0c\u9700\u7528\u8ddf\u521b\u5efa <code>MergeTree</code> \u8868\u4e00\u6837\u7684<a href=\"#mergetree/\">\u5b50\u53e5</a>\u3002</p>\n<details>\n<p><summary>\u5df2\u5f03\u7528\u7684\u5efa\u8868\u65b9\u6cd5</summary></p>\n<div class=\"admonition \u6ce8\u610f\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u4e0d\u8981\u5728\u65b0\u9879\u76ee\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u53ef\u80fd\u7684\u8bdd\uff0c\u8bf7\u5c06\u65e7\u9879\u76ee\u5207\u6362\u5230\u4e0a\u8ff0\u65b9\u6cd5\u3002</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">AggregatingMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u4e0a\u9762\u7684\u6240\u6709\u53c2\u6570\u8ddf <code>MergeTree</code> \u4e2d\u7684\u4e00\u6837\u3002</p>\n</details>\n<h3 id=\"select-he-insert\">SELECT \u548c INSERT<a class=\"headerlink\" href=\"#select-he-insert\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63d2\u5165\u6570\u636e\uff0c\u9700\u4f7f\u7528\u5e26\u6709\u805a\u5408 -State- \u51fd\u6570\u7684 <a href=\"#../../query_language/insert_into/\">INSERT SELECT</a> \u8bed\u53e5\u3002<br />\n\u4ece <code>AggregatingMergeTree</code> \u8868\u4e2d\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u9700\u4f7f\u7528 <code>GROUP BY</code> \u5b50\u53e5\u5e76\u4e14\u8981\u4f7f\u7528\u4e0e\u63d2\u5165\u65f6\u76f8\u540c\u7684\u805a\u5408\u51fd\u6570\uff0c\u4f46\u540e\u7f00\u8981\u6539\u4e3a <code>-Merge</code> \u3002</p>\n<p>\u5728 <code>SELECT</code> \u67e5\u8be2\u7684\u7ed3\u679c\u4e2d\uff0c\u5bf9\u4e8e ClickHouse \u7684\u6240\u6709\u8f93\u51fa\u683c\u5f0f <code>AggregateFunction</code> \u7c7b\u578b\u7684\u503c\u90fd\u5b9e\u73b0\u4e86\u7279\u5b9a\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u6cd5\u3002\u5982\u679c\u76f4\u63a5\u7528 <code>SELECT</code> \u5bfc\u51fa\u8fd9\u4e9b\u6570\u636e\uff0c\u4f8b\u5982\u5982\u7528 <code>TabSeparated</code> \u683c\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e9b\u5bfc\u51fa\u6570\u636e\u4e5f\u80fd\u76f4\u63a5\u7528 <code>INSERT</code> \u8bed\u53e5\u52a0\u8f7d\u5bfc\u5165\u3002</p>\n<h3 id=\"ju-he-wu-hua-shi-tu-de-shi-li\">\u805a\u5408\u7269\u5316\u89c6\u56fe\u7684\u793a\u4f8b<a class=\"headerlink\" href=\"#ju-he-wu-hua-shi-tu-de-shi-li\" title=\"Permanent link\">&para;</a></h3>\n<p>\u521b\u5efa\u4e00\u4e2a\u8ddf\u8e2a <code>test.visits</code> \u8868\u7684 <code>AggregatingMergeTree</code> \u7269\u5316\u89c6\u56fe\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"n\">MATERIALIZED</span> <span class=\"k\">VIEW</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">basic</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">AggregatingMergeTree</span><span class=\"p\">()</span> <span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">StartDate</span><span class=\"p\">)</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">StartDate</span><span class=\"p\">)</span>\n<span class=\"k\">AS</span> <span class=\"k\">SELECT</span>\n    <span class=\"n\">CounterID</span><span class=\"p\">,</span>\n    <span class=\"n\">StartDate</span><span class=\"p\">,</span>\n    <span class=\"n\">sumState</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span>    <span class=\"k\">AS</span> <span class=\"n\">Visits</span><span class=\"p\">,</span>\n    <span class=\"n\">uniqState</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Users</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">StartDate</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u5411 <code>test.visits</code> \u8868\u4e2d\u63d2\u5165\u6570\u636e\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u6570\u636e\u4f1a\u540c\u65f6\u63d2\u5165\u5230\u8868\u548c\u89c6\u56fe\u4e2d\uff0c\u5e76\u4e14\u89c6\u56fe <code>test.basic</code> \u4f1a\u5c06\u91cc\u9762\u7684\u6570\u636e\u805a\u5408\u3002</p>\n<p>\u8981\u83b7\u53d6\u805a\u5408\u6570\u636e\uff0c\u6211\u4eec\u9700\u8981\u5728 <code>test.basic</code> \u89c6\u56fe\u4e0a\u6267\u884c\u7c7b\u4f3c <code>SELECT ... GROUP BY ...</code> \u8fd9\u6837\u7684\u67e5\u8be2 \uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">StartDate</span><span class=\"p\">,</span>\n    <span class=\"n\">sumMerge</span><span class=\"p\">(</span><span class=\"n\">Visits</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Visits</span><span class=\"p\">,</span>\n    <span class=\"n\">uniqMerge</span><span class=\"p\">(</span><span class=\"n\">Users</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Users</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">basic</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">StartDate</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">StartDate</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><a name=\"table_engines/collapsingmergetree/\"></a><a name=\"collapsingmergetree/\"></a><a name=\"../table_engines/collapsingmergetree/\"></a><a name=\"../../../table_engines/collapsingmergetree/\"></a><a name=\"../../operations/table_engines/collapsingmergetree/\"></a><a name=\"../../../../table_engines/collapsingmergetree/\"></a><a name=\"../../../../operations/table_engines/collapsingmergetree/\"></a><a name=\"../../../../../table_engines/collapsingmergetree/\"></a><a name=\"../../../../../../table_engines/collapsingmergetree/\"></a><a name=\"../../../../../operations/table_engines/collapsingmergetree/\"></a><a name=\"../../table_engines/collapsingmergetree/\"></a><a name=\"../operations/table_engines/collapsingmergetree/\"></a><a name=\"../../../operations/table_engines/collapsingmergetree/\"></a><a name=\"operations/table_engines/collapsingmergetree/\"></a></p>\n<h2 id=\"table_engine-collapsingmergetree\">CollapsingMergeTree<a class=\"headerlink\" href=\"#table_engine-collapsingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8be5\u5f15\u64ce\u7ee7\u627f\u4e8e <a href=\"#mergetree/\">MergeTree</a>\uff0c\u5e76\u5728\u6570\u636e\u5757\u5408\u5e76\u7b97\u6cd5\u4e2d\u6dfb\u52a0\u4e86\u6298\u53e0\u884c\u7684\u903b\u8f91\u3002</p>\n<p><code>CollapsingMergeTree</code> \u4f1a\u5f02\u6b65\u7684\u5220\u9664\uff08\u6298\u53e0\uff09\u8fd9\u4e9b\u9664\u4e86\u7279\u5b9a\u5217 <code>Sign</code> \u6709 <code>1</code> \u548c <code>-1</code> \u7684\u503c\u4ee5\u5916\uff0c\u5176\u4f59\u6240\u6709\u5b57\u6bb5\u7684\u503c\u90fd\u76f8\u7b49\u7684\u6210\u5bf9\u7684\u884c\u3002\u6ca1\u6709\u6210\u5bf9\u7684\u884c\u4f1a\u88ab\u4fdd\u7559\u3002\u66f4\u591a\u7684\u7ec6\u8282\u8bf7\u770b\u672c\u6587\u7684<a href=\"#table_engine-collapsingmergetree-collapsing\">\u6298\u53e0</a>\u90e8\u5206\u3002</p>\n<p>\u56e0\u6b64\uff0c\u8be5\u5f15\u64ce\u53ef\u4ee5\u663e\u8457\u7684\u964d\u4f4e\u5b58\u50a8\u91cf\u5e76\u63d0\u9ad8 <code>SELECT</code> \u67e5\u8be2\u6548\u7387\u3002</p>\n<h3 id=\"jian-biao_3\">\u5efa\u8868<a class=\"headerlink\" href=\"#jian-biao_3\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">E");
            
            document.write("XISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">sign</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>\u8bf7\u6c42\u53c2\u6570\u7684\u63cf\u8ff0\uff0c\u53c2\u8003<a href=\"#../../query_language/create/\">\u8bf7\u6c42\u53c2\u6570</a>\u3002</p>\n<p><strong>CollapsingMergeTree \u53c2\u6570</strong></p>\n<ul>\n<li><code>sign</code> \u2014 \u7c7b\u578b\u5217\u7684\u540d\u79f0\uff1a <code>1</code> \u662f\u201c\u72b6\u6001\u201d\u884c\uff0c<code>-1</code> \u662f\u201c\u53d6\u6d88\u201d\u884c\u3002</li>\n</ul>\n<p>\u5217\u6570\u636e\u7c7b\u578b \u2014 <code>Int8</code>\u3002   </p>\n<p><strong>\u5b50\u53e5</strong></p>\n<p>\u521b\u5efa <code>CollapsingMergeTree</code> \u8868\u65f6\uff0c\u9700\u8981\u4e0e\u521b\u5efa <code>MergeTree</code> \u8868\u65f6\u76f8\u540c\u7684<a href=\"#table_engine-mergetree-creating-a-table\">\u5b50\u53e5</a>\u3002</p>\n<details>\n<p><summary>\u5df2\u5f03\u7528\u7684\u5efa\u8868\u65b9\u6cd5</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u4e0d\u8981\u5728\u65b0\u9879\u76ee\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u53ef\u80fd\u7684\u8bdd\uff0c\u8bf7\u5c06\u65e7\u9879\u76ee\u5207\u6362\u5230\u4e0a\u8ff0\u65b9\u6cd5\u3002</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"n\">sign</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u9664\u4e86 <code>sign</code> \u7684\u6240\u6709\u53c2\u6570\u90fd\u4e0e <code>MergeTree</code> \u4e2d\u7684\u542b\u4e49\u76f8\u540c\u3002</p>\n<ul>\n<li>\n<p><code>sign</code> \u2014 \u7c7b\u578b\u5217\u7684\u540d\u79f0\uff1a <code>1</code> \u662f\u201c\u72b6\u6001\u201d\u884c\uff0c<code>-1</code> \u662f\u201c\u53d6\u6d88\u201d\u884c\u3002</p>\n<p>\u5217\u6570\u636e\u7c7b\u578b \u2014 <code>Int8</code>\u3002</p>\n</li>\n</ul>\n</details>\n<h3 id=\"table_engine-collapsingmergetree-collapsing\">\u6298\u53e0<a class=\"headerlink\" href=\"#table_engine-collapsingmergetree-collapsing\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"shu-ju\">\u6570\u636e<a class=\"headerlink\" href=\"#shu-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8003\u8651\u4f60\u9700\u8981\u4e3a\u67d0\u4e2a\u5bf9\u8c61\u4fdd\u5b58\u4e0d\u65ad\u53d8\u5316\u7684\u6570\u636e\u7684\u60c5\u666f\u3002\u4f3c\u4e4e\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u4fdd\u5b58\u4e00\u884c\u8bb0\u5f55\u5e76\u5728\u5176\u53d1\u751f\u4efb\u4f55\u53d8\u5316\u65f6\u66f4\u65b0\u8bb0\u5f55\u662f\u5408\u4e4e\u903b\u8f91\u7684\uff0c\u4f46\u662f\u66f4\u65b0\u64cd\u4f5c\u5bf9 DBMS \u6765\u8bf4\u662f\u6602\u8d35\u4e14\u7f13\u6162\u7684\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u91cd\u5199\u5b58\u50a8\u4e2d\u7684\u6570\u636e\u3002\u5982\u679c\u4f60\u9700\u8981\u5feb\u901f\u7684\u5199\u5165\u6570\u636e\uff0c\u5219\u66f4\u65b0\u64cd\u4f5c\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\uff0c\u4f46\u662f\u4f60\u53ef\u4ee5\u6309\u4e0b\u9762\u7684\u63cf\u8ff0\u987a\u5e8f\u5730\u66f4\u65b0\u4e00\u4e2a\u5bf9\u8c61\u7684\u53d8\u5316\u3002</p>\n<p>\u5728\u5199\u5165\u884c\u7684\u65f6\u5019\u4f7f\u7528\u7279\u5b9a\u7684\u5217 <code>Sign</code>\u3002\u5982\u679c <code>Sign = 1</code> \u5219\u8868\u793a\u8fd9\u4e00\u884c\u662f\u5bf9\u8c61\u7684\u72b6\u6001\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u201c\u72b6\u6001\u201d\u884c\u3002\u5982\u679c <code>Sign = -1</code> \u5219\u8868\u793a\u662f\u5bf9\u5177\u6709\u76f8\u540c\u5c5e\u6027\u7684\u72b6\u6001\u884c\u7684\u53d6\u6d88\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u201c\u53d6\u6d88\u201d\u884c\u3002</p>\n<p>\u4f8b\u5982\uff0c\u6211\u4eec\u60f3\u8981\u8ba1\u7b97\u7528\u6237\u5728\u67d0\u4e2a\u7ad9\u70b9\u8bbf\u95ee\u7684\u9875\u9762\u9875\u9762\u6570\u4ee5\u53ca\u4ed6\u4eec\u5728\u90a3\u91cc\u505c\u7559\u7684\u65f6\u95f4\u3002\u5728\u67d0\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u5c06\u7528\u6237\u7684\u6d3b\u52a8\u72b6\u6001\u5199\u5165\u4e0b\u9762\u8fd9\u6837\u7684\u884c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u6211\u4eec\u5199\u5165\u4e0b\u9762\u7684\u4e24\u884c\u6765\u8bb0\u5f55\u7528\u6237\u6d3b\u52a8\u7684\u53d8\u5316\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u7b2c\u4e00\u884c\u53d6\u6d88\u4e86\u8fd9\u4e2a\u5bf9\u8c61\uff08\u7528\u6237\uff09\u7684\u72b6\u6001\u3002\u5b83\u9700\u8981\u590d\u5236\u88ab\u53d6\u6d88\u7684\u72b6\u6001\u884c\u7684\u6240\u6709\u9664\u4e86 <code>Sign</code> \u7684\u5c5e\u6027\u3002</p>\n<p>\u7b2c\u4e8c\u884c\u5305\u542b\u4e86\u5f53\u524d\u7684\u72b6\u6001\u3002</p>\n<p>\u56e0\u4e3a\u6211\u4eec\u53ea\u9700\u8981\u7528\u6237\u6d3b\u52a8\u7684\u6700\u540e\u72b6\u6001\uff0c\u8fd9\u4e9b\u884c</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u53ef\u4ee5\u5728\u6298\u53e0\u5bf9\u8c61\u7684\u5931\u6548\uff08\u8001\u7684\uff09\u72b6\u6001\u7684\u65f6\u5019\u88ab\u5220\u9664\u3002<code>CollapsingMergeTree</code> \u4f1a\u5728\u5408\u5e76\u6570\u636e\u7247\u6bb5\u7684\u65f6\u5019\u505a\u8fd9\u4ef6\u4e8b\u3002</p>\n<p>\u4e3a\u4ec0\u4e48\u6211\u4eec\u6bcf\u6b21\u6539\u53d8\u9700\u8981 2 \u884c\u53ef\u4ee5\u9605\u8bfb<a href=\"#table_engine-collapsingmergetree-collapsing-algorithm\">\u7b97\u6cd5</a>\u6bb5\u3002</p>\n<p><strong>\u8fd9\u79cd\u65b9\u6cd5\u7684\u7279\u6b8a\u5c5e\u6027</strong></p>\n<ol>\n<li>\u5199\u5165\u7684\u7a0b\u5e8f\u5e94\u8be5\u8bb0\u4f4f\u5bf9\u8c61\u7684\u72b6\u6001\u4ece\u800c\u53ef\u4ee5\u53d6\u6d88\u5b83\u3002\u201c\u53d6\u6d88\u201d\u5b57\u7b26\u4e32\u5e94\u8be5\u662f\u201c\u72b6\u6001\u201d\u5b57\u7b26\u4e32\u7684\u590d\u5236\uff0c\u9664\u4e86\u76f8\u53cd\u7684 <code>Sign</code>\u3002\u5b83\u589e\u52a0\u4e86\u5b58\u50a8\u7684\u521d\u59cb\u6570\u636e\u7684\u5927\u5c0f\uff0c\u4f46\u4f7f\u5f97\u5199\u5165\u6570\u636e\u66f4\u5feb\u901f\u3002</li>\n<li>\u7531\u4e8e\u5199\u5165\u7684\u8d1f\u8f7d\uff0c\u5217\u4e2d\u957f\u7684\u589e\u957f\u9635\u5217\u4f1a\u964d\u4f4e\u5f15\u64ce\u7684\u6548\u7387\u3002\u6570\u636e\u8d8a\u7b80\u5355\uff0c\u6548\u7387\u8d8a\u9ad8\u3002</li>\n<li><code>SELECT</code> \u7684\u7ed3\u679c\u5f88\u5927\u7a0b\u5ea6\u53d6\u51b3\u4e8e\u5bf9\u8c61\u53d8\u66f4\u5386\u53f2\u7684\u4e00\u81f4\u6027\u3002\u5728\u51c6\u5907\u63d2\u5165\u6570\u636e\u65f6\u8981\u51c6\u786e\u3002\u5728\u4e0d\u4e00\u81f4\u7684\u6570\u636e\u4e2d\u4f1a\u5f97\u5230\u4e0d\u53ef\u9884\u6599\u7684\u7ed3\u679c\uff0c\u4f8b\u5982\uff0c\u50cf\u4f1a\u8bdd\u6df1\u5ea6\u8fd9\u79cd\u975e\u8d1f\u6307\u6807\u7684\u8d1f\u503c\u3002</li>\n</ol>\n<h4 id=\"table_engine-collapsingmergetree-collapsing-algorithm\">\u7b97\u6cd5<a class=\"headerlink\" href=\"#table_engine-collapsingmergetree-collapsing-algorithm\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5f53 ClickHouse \u5408\u5e76\u6570\u636e\u7247\u6bb5\u65f6\uff0c\u6bcf\u7ec4\u5177\u6709\u76f8\u540c\u4e3b\u952e\u7684\u8fde\u7eed\u884c\u88ab\u51cf\u5c11\u5230\u4e0d\u8d85\u8fc7\u4e24\u884c\uff0c\u4e00\u884c <code>Sign = 1</code>\uff08\u201c\u72b6\u6001\u201d\u884c\uff09\uff0c\u53e6\u4e00\u884c <code>Sign = -1</code> \uff08\u201c\u53d6\u6d88\u201d\u884c\uff09\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u6570\u636e\u9879\u88ab\u6298\u53e0\u4e86\u3002</p>\n<p>\u5bf9\u6bcf\u4e2a\u7ed3\u679c\u7684\u6570\u636e\u90e8\u5206 ClickHouse \u4fdd\u5b58\uff1a</p>\n<ol>\n<li>\u7b2c\u4e00\u4e2a\u201c\u53d6\u6d88\u201d\u548c\u6700\u540e\u4e00\u4e2a\u201c\u72b6\u6001\u201d\u884c\uff0c\u5982\u679c\u201c\u72b6\u6001\u201d\u548c\u201c\u53d6\u6d88\u201d\u884c\u7684\u6570\u91cf\u5339\u914d</li>\n<li>\u6700\u540e\u4e00\u4e2a\u201c\u72b6\u6001\u201d\u884c\uff0c\u5982\u679c\u201c\u72b6\u6001\u201d\u884c\u6bd4\u201c\u53d6\u6d88\u201d\u884c\u591a\u4e00\u4e2a\u3002</li>\n<li>\u7b2c\u4e00\u4e2a\u201c\u53d6\u6d88\u201d\u884c\uff0c\u5982\u679c\u201c\u53d6\u6d88\u201d\u884c\u6bd4\u201c\u72b6\u6001\u201d\u884c\u591a\u4e00\u4e2a\u3002</li>\n<li>\n<p>\u6ca1\u6709\u884c\uff0c\u5728\u5176\u4ed6\u6240\u6709\u60c5\u51b5\u4e0b\u3002</p>\n<p>\u5408\u5e76\u4f1a\u7ee7\u7eed\uff0c\u4f46\u662f ClickHouse \u4f1a\u628a\u6b64\u60c5\u51b5\u89c6\u4e3a\u903b\u8f91\u9519\u8bef\u5e76\u5c06\u5176\u8bb0\u5f55\u5728\u670d\u52a1\u65e5\u5fd7\u4e2d\u3002\u8fd9\u4e2a\u9519\u8bef\u4f1a\u5728\u76f8\u540c\u7684\u6570\u636e\u88ab\u63d2\u5165\u8d85\u8fc7\u4e00\u6b21\u65f6\u51fa\u73b0\u3002</p>\n</li>\n</ol>\n<p>\u56e0\u6b64\uff0c\u6298\u53e0\u4e0d\u5e94\u8be5\u6539\u53d8\u7edf\u8ba1\u6570\u636e\u7684\u7ed3\u679c\u3002<br />\n\u53d8\u5316\u9010\u6e10\u5730\u88ab\u6298\u53e0\uff0c\u56e0\u6b64\u6700\u7ec8\u51e0\u4e4e\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u53ea\u5269\u4e0b\u4e86\u6700\u540e\u7684\u72b6\u6001\u3002</p>\n<p><code>Sign</code> \u662f\u5fc5\u987b\u7684\u56e0\u4e3a\u5408\u5e76\u7b97\u6cd5\u4e0d\u4fdd\u8bc1\u6240\u6709\u6709\u76f8\u540c\u4e3b\u952e\u7684\u884c\u90fd\u4f1a\u5728\u540c\u4e00\u4e2a\u7ed3\u679c\u6570\u636e\u7247\u6bb5\u4e2d\uff0c\u751a\u81f3\u662f\u5728\u540c\u4e00\u53f0\u7269\u7406\u670d\u52a1\u5668\u4e0a\u3002ClickHouse \u7528\u591a\u7ebf\u7a0b\u6765\u5904\u7406 <code>SELECT</code> \u8bf7\u6c42\uff0c\u6240\u4ee5\u5b83\u4e0d\u80fd\u9884\u6d4b\u7ed3\u679c\u4e2d\u884c\u7684\u987a\u5e8f\u3002\u5982\u679c\u8981\u4ece <code>CollapsingMergeTree</code> \u8868\u4e2d\u83b7\u53d6\u5b8c\u5168\u201c\u6298\u53e0\u201d\u540e\u7684\u6570\u636e\uff0c\u5219\u9700\u8981\u805a\u5408\u3002</p>\n<p>\u8981\u5b8c\u6210\u6298\u53e0\uff0c\u8bf7\u4f7f\u7528 <code>GROUP BY</code> \u5b50\u53e5\u548c\u7528\u4e8e\u5904\u7406\u7b26\u53f7\u7684\u805a\u5408\u51fd\u6570\u7f16\u5199\u8bf7\u6c42\u3002\u4f8b\u5982\uff0c\u8981\u8ba1\u7b97\u6570\u91cf\uff0c\u4f7f\u7528 <code>sum(Sign)</code> \u800c\u4e0d\u662f <code>count()</code>\u3002\u8981\u8ba1\u7b97\u67d0\u7269\u7684\u603b\u548c\uff0c\u4f7f\u7528 <code>sum(Sign * x)</code> \u800c\u4e0d\u662f <code>sum(x)</code>\uff0c\u5e76\u6dfb\u52a0 <code>HAVING sum(Sign) &gt; 0</code> \u5b50\u53e5\u3002</p>\n<p>\u805a\u5408\u4f53 <code>count</code>,<code>sum</code> \u548c <code>avg</code> \u53ef\u4ee5\u7528\u8fd9\u79cd\u65b9\u5f0f\u8ba1\u7b97\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u81f3\u5c11\u6709\u4e00\u4e2a\u672a\u88ab\u6298\u53e0\u7684\u72b6\u6001\uff0c\u5219\u53ef\u4ee5\u8ba1\u7b97 <code>uniq</code> \u805a\u5408\u3002<code>min</code> \u548c <code>max</code> \u805a\u5408\u65e0\u6cd5\u8ba1\u7b97\uff0c\u56e0\u4e3a <code>CollaspingMergeTree</code> \u4e0d\u4f1a\u4fdd\u5b58\u6298\u53e0\u72b6\u6001\u7684\u503c\u7684\u5386\u53f2\u8bb0\u5f55\u3002</p>\n<p>\u5982\u679c\u4f60\u9700\u8981\u5728\u4e0d\u8fdb\u884c\u805a\u5408\u7684\u60c5\u51b5\u4e0b\u83b7\u53d6\u6570\u636e\uff08\u4f8b\u5982\uff0c\u8981\u68c0\u67e5\u662f\u5426\u5b58\u5728\u6700\u65b0\u503c\u4e0e\u7279\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u884c\uff09\uff0c\u4f60\u53ef\u4ee5\u5728 <code>FROM</code> \u4ece\u53e5\u4e2d\u4f7f\u7528 <code>FINAL</code> \u4fee\u9970\u7b26\u3002\u8fd9\u79cd\u65b9\u6cd5\u663e\u7136\u662f\u66f4\u4f4e\u6548\u7684\u3002</p>\n<h3 id=\"shi-li\">\u793a\u4f8b<a class=\"headerlink\" href=\"#shi-li\" title=\"Permanent link\">&para;</a></h3>\n<p>\u793a\u4f8b\u6570\u636e:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5efa\u8868:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">UAct</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">PageViews</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">Duration</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">Sign</span> <span class=\"nb\">Int8</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span>\n</code></pre></div>\n\n\n<p>\u63d2\u5165\u6570\u636e:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UAct</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UAct</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span c");
            
            document.write("lass=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">),(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u6211\u4eec\u4f7f\u7528\u4e24\u6b21 <code>INSERT</code> \u8bf7\u6c42\u6765\u521b\u5efa\u4e24\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u7247\u6bb5\u3002\u5982\u679c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u8bf7\u6c42\u63d2\u5165\u6570\u636e\uff0cClickHouse \u53ea\u4f1a\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u7247\u6bb5\u4e14\u4e0d\u4f1a\u6267\u884c\u4efb\u4f55\u5408\u5e76\u64cd\u4f5c\u3002</p>\n<p>\u83b7\u53d6\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT * FROM UAct</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u6211\u4eec\u770b\u5230\u4e86\u4ec0\u4e48\uff0c\u54ea\u91cc\u6709\u6298\u53e0\uff1f</p>\n<p>\u901a\u8fc7\u4e24\u4e2a <code>INSERT</code> \u8bf7\u6c42\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e24\u4e2a\u6570\u636e\u7247\u6bb5\u3002<code>SELECT</code> \u8bf7\u6c42\u5728\u4e24\u4e2a\u7ebf\u7a0b\u4e2d\u88ab\u6267\u884c\uff0c\u6211\u4eec\u5f97\u5230\u4e86\u968f\u673a\u987a\u5e8f\u7684\u884c\u3002\u6ca1\u6709\u53d1\u751f\u6298\u53e0\u662f\u56e0\u4e3a\u8fd8\u6ca1\u6709\u5408\u5e76\u6570\u636e\u7247\u6bb5\u3002ClickHouse \u5728\u4e00\u4e2a\u6211\u4eec\u65e0\u6cd5\u9884\u6599\u7684\u672a\u77e5\u65f6\u523b\u5408\u5e76\u6570\u636e\u7247\u6bb5\u3002</p>\n<p>\u56e0\u6b64\u6211\u4eec\u9700\u8981\u805a\u5408\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">UserID</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">PageViews</span> <span class=\"o\">*</span> <span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">PageViews</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Duration</span> <span class=\"o\">*</span> <span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Duration</span>\n<span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span>\n<span class=\"k\">HAVING</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u2510</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u6211\u4eec\u4e0d\u9700\u8981\u805a\u5408\u5e76\u60f3\u8981\u5f3a\u5236\u8fdb\u884c\u6298\u53e0\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 <code>FROM</code> \u4ece\u53e5\u4e2d\u4f7f\u7528 <code>FINAL</code> \u4fee\u9970\u8bed\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">UAct</span> <span class=\"k\">FINAL</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510</span>\n<span class=\"err\">\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u79cd\u67e5\u8be2\u6570\u636e\u7684\u65b9\u6cd5\u662f\u975e\u5e38\u4f4e\u6548\u7684\u3002\u4e0d\u8981\u5728\u5927\u8868\u4e2d\u4f7f\u7528\u5b83\u3002</p>\n<p><a name=\"table_engines/versionedcollapsingmergetree/\"></a><a name=\"operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"versionedcollapsingmergetree/\"></a><a name=\"../../../../../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../table_engines/versionedcollapsingmergetree/\"></a></p>\n<h2 id=\"versionedcollapsingmergetree\">VersionedCollapsingMergeTree<a class=\"headerlink\" href=\"#versionedcollapsingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>This engine:</p>\n<ul>\n<li>Allows quick writing of object states that are continually changing.</li>\n<li>Deletes old object states in the background. This significantly reduces the volume of storage.</li>\n</ul>\n<p>See the section <a href=\"#table_engines_versionedcollapsingmergetree\">Collapsing</a> for details.</p>\n<p>The engine inherits from <a href=\"#table_engines-mergetree\">MergeTree</a> and adds the logic for collapsing rows to the algorithm for merging data parts. <code>VersionedCollapsingMergeTree</code> serves the same purpose as <a href=\"#collapsingmergetree/\">CollapsingMergeTree</a> but uses a different collapsing algorithm that allows inserting the data in any order with multiple threads. In particular, the <code>Version</code> column helps to collapse the rows properly even if they are inserted in the wrong order. In contrast, <code>CollapsingMergeTree</code> allows only strictly consecutive insertion.</p>\n<h3 id=\"creating-a-table\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">VersionedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">sign</span><span class=\"p\">,</span> <span class=\"k\">version</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>For a description of query parameters, see the <a href=\"#../../query_language/create/\">query description</a>.</p>\n<p><strong>Engine Parameters</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">VersionedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">sign</span><span class=\"p\">,</span> <span class=\"k\">version</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<ul>\n<li>\n<p><code>sign</code> \u2014 Name of the column with the type of row: <code>1</code> is a \"state\" row, <code>-1</code> is a \"cancel\" row.</p>\n<p>The column data type should be <code>Int8</code>.</p>\n</li>\n<li>\n<p><code>version</code> \u2014 Name of the column with the version of the object state.</p>\n<p>The column data type should be <code>UInt*</code>.</p>\n</li>\n</ul>\n<p><strong>Query Clauses</strong></p>\n<p>When creating a <code>VersionedCollapsingMergeTree</code> table, the same <a href=\"#mergetree/\">clauses</a> are required as when creating a <code>MergeTree</code> table.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects. If possible, switch the old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">VersionedCollapsingMergeTree</span><span cl");
            
            document.write("ass=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"n\">sign</span><span class=\"p\">,</span> <span class=\"k\">version</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>All of the parameters except <code>sign</code> and <code>version</code> have the same meaning as in <code>MergeTree</code>.</p>\n<ul>\n<li>\n<p><code>sign</code> \u2014 Name of the column with the type of row: <code>1</code> is a \"state\" row, <code>-1</code> is a \"cancel\" row.</p>\n<p>Column Data Type \u2014 <code>Int8</code>.</p>\n</li>\n<li>\n<p><code>version</code> \u2014 Name of the column with the version of the object state.</p>\n<p>The column data type should be <code>UInt*</code>.</p>\n</li>\n</ul>\n</details>\n<h3 id=\"table_engines_versionedcollapsingmergetree\">Collapsing<a class=\"headerlink\" href=\"#table_engines_versionedcollapsingmergetree\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"data\">Data<a class=\"headerlink\" href=\"#data\" title=\"Permanent link\">&para;</a></h4>\n<p>Consider a situation where you need to save continually changing data for some object. It is reasonable to have one row for an object and update the row whenever there are changes. However, the update operation is expensive and slow for a DBMS because it requires rewriting the data in the storage. Update is not acceptable if you need to write data quickly, but you can write the changes to an object sequentially as follows.</p>\n<p>Use the <code>Sign</code> column when writing the row. If <code>Sign = 1</code> it means that the row is a state of an object (let's call it the \"state\" row). If <code>Sign = -1</code> it indicates the cancellation of the state of an object with the same attributes (let's call it the \"cancel\" row). Also use the <code>Version</code> column, which should identify each state of an object with a separate number.</p>\n<p>For example, we want to calculate how many pages users visited on some site and how long they were there. At some point in time we write the following row with the state of user activity:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502       1 |\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>At some point later we register the change of user activity and write it with the following two rows.</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502       1 |\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502       2 |\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The first row cancels the previous state of the object (user). It should copy all of the fields of the canceled state except <code>Sign</code>.</p>\n<p>The second row contains the current state.</p>\n<p>Because we need only the last state of user activity, the rows</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502       1 |\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502       1 |\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>can be deleted, collapsing the invalid (old) state of the object. <code>VersionedCollapsingMergeTree</code> does this while merging the data parts.</p>\n<p>To find out why we need two rows for each change, see <a href=\"#table_engines-versionedcollapsingmergetree-algorithm\">Algorithm</a>.</p>\n<p><strong>Notes on Usage</strong></p>\n<ol>\n<li>The program that writes the data should remember the state of an object in order to cancel it. The \"cancel\" string should be a copy of the \"state\" string with the opposite <code>Sign</code>. This increases the initial size of storage but allows to write the data quickly.</li>\n<li>Long growing arrays in columns reduce the efficiency of the engine due to the load for writing. The more straightforward the data, the better the efficiency.</li>\n<li><code>SELECT</code> results depend strongly on the consistency of the history of object changes. Be accurate when preparing data for inserting. You can get unpredictable results with inconsistent data, such as negative values for non-negative metrics like session depth.</li>\n</ol>\n<h4 id=\"table_engines-versionedcollapsingmergetree-algorithm\">Algorithm<a class=\"headerlink\" href=\"#table_engines-versionedcollapsingmergetree-algorithm\" title=\"Permanent link\">&para;</a></h4>\n<p>When ClickHouse merges data parts, it deletes each pair of rows that have the same primary key and version and different <code>Sign</code>. The order of rows does not matter.</p>\n<p>When ClickHouse inserts data, it orders rows by the primary key. If the <code>Version</code> column is not in the primary key, ClickHouse adds it to the primary key implicitly as the last field and uses it for ordering.</p>\n<h3 id=\"selecting-data\">Selecting Data<a class=\"headerlink\" href=\"#selecting-data\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse doesn't guarantee that all of the rows with the same primary key will be in the same resulting data part or even on the same physical server. This is true both for writing the data and for subsequent merging of the data parts. In addition, ClickHouse processes <code>SELECT</code> queries with multiple threads, and it cannot predict the order of rows in the result. This means that aggregation is required if there is a need to get completely \"collapsed\" data from a <code>VersionedCollapsingMergeTree</code> table.</p>\n<p>To finalize collapsing, write a query with a <code>GROUP BY</code> clause and aggregate functions that account for the sign. For example, to calculate quantity, use <code>sum(Sign)</code> instead of <code>count()</code>. To calculate the sum of something, use <code>sum(Sign * x)</code> instead of <code>sum(x)</code>, and add <code>HAVING sum(Sign) &gt; 0</code>.</p>\n<p>The aggregates <code>count</code>, <code>sum</code> and <code>avg</code> can be calculated this way. The aggregate <code>uniq</code> can be calculated if an object has at least one non-collapsed state. The aggregates <code>min</code> and <code>max</code> can't be calculated because <code>VersionedCollapsingMergeTree</code> does not save the history of values of collapsed states.</p>\n<p>If you need to extract the data with \"collapsing\" but without aggregation (for example, to check whether rows are present whose newest values match certain conditions), you can use the <code>FINAL</code> modifier for the <code>FROM</code> clause. This approach is inefficient and should not be used with large tables.</p>\n<h3 id=\"example-of-use\">Example of Use<a class=\"headerlink\" href=\"#example-of-use\" title=\"Permanent link\">&para;</a></h3>\n<p>Example data:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502       1 |\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502       1 |\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502       2 |\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Creating the table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">UAct</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">PageViews</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">Duration</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">Sign</span> <span class=\"nb\">Int8</span><span class=\"p\">,</span>\n    <span class=\"k\">Version</span> <span class=\"n\">UInt8</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">VersionedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">,</span> <span class=\"k\">Version</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span>\n</code></pre></div>\n\n\n<p>Inserting the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UAct</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UAct</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>We use two <code>INSERT</code> queries to create two different data parts. If we insert the data with a single query, ClickHouse creates one data part and will never perform any merge.</p>\n<p>Getting the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n</code></pre></div>\n\n\n<div class=");
            
            document.write("\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502       1 \u2502\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502       2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>What do we see here and where are the collapsed parts?<br />\nWe created two data parts using two <code>INSERT</code> queries. The <code>SELECT</code> query was performed in two threads, and the result is a random order of rows.<br />\nCollapsing did not occur because the data parts have not been merged yet. ClickHouse merges data parts at an unknown point in time which we cannot predict.</p>\n<p>This is why we need aggregation:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">UserID</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">PageViews</span> <span class=\"o\">*</span> <span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">PageViews</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Duration</span> <span class=\"o\">*</span> <span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Duration</span><span class=\"p\">,</span>\n    <span class=\"k\">Version</span>\n<span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span><span class=\"p\">,</span> <span class=\"k\">Version</span>\n<span class=\"k\">HAVING</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502       2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>If we don't need aggregation and want to force collapsing, we can use the <code>FINAL</code> modifier for the <code>FROM</code> clause.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">UAct</span> <span class=\"k\">FINAL</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502       2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This is a very inefficient way to select data. Don't use it for large tables.</p>\n<p><a name=\"../../../operations/table_engines/graphitemergetree/\"></a><a name=\"../table_engines/graphitemergetree/\"></a><a name=\"../../../table_engines/graphitemergetree/\"></a><a name=\"../../operations/table_engines/graphitemergetree/\"></a><a name=\"../../../../table_engines/graphitemergetree/\"></a><a name=\"../../../../../table_engines/graphitemergetree/\"></a><a name=\"../../../../../operations/table_engines/graphitemergetree/\"></a><a name=\"operations/table_engines/graphitemergetree/\"></a><a name=\"../../../../../../table_engines/graphitemergetree/\"></a><a name=\"../../table_engines/graphitemergetree/\"></a><a name=\"table_engines/graphitemergetree/\"></a><a name=\"graphitemergetree/\"></a><a name=\"../../../../operations/table_engines/graphitemergetree/\"></a><a name=\"../operations/table_engines/graphitemergetree/\"></a></p>\n<h2 id=\"graphitemergetree\">GraphiteMergeTree<a class=\"headerlink\" href=\"#graphitemergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>This engine is designed for thinning and aggregating/averaging (rollup) <a href=\"http://graphite.readthedocs.io/en/latest/index.html\" rel=\"external nofollow noreferrer\">Graphite</a> data. It may be helpful to developers who want to use ClickHouse as a data store for Graphite.</p>\n<p>You can use any ClickHouse table engine to store the Graphite data if you don't need rollup, but if you need a rollup use <code>GraphiteMergeTree</code>. The engine reduces the volume of storage and increases the efficiency of queries from Graphite.</p>\n<p>The engine inherits properties from <a href=\"#mergetree/\">MergeTree</a>.</p>\n<h3 id=\"creating-a-table_1\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">Path</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">Time</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">Value</span> <span class=\"o\">&lt;</span><span class=\"n\">Numeric_type</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n    <span class=\"k\">Version</span> <span class=\"o\">&lt;</span><span class=\"n\">Numeric_type</span><span class=\"o\">&gt;</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">GraphiteMergeTree</span><span class=\"p\">(</span><span class=\"n\">config_section</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>See a detailed description of the <a href=\"#create-table-query\">CREATE TABLE</a> query.</p>\n<p>A table for the Graphite data should have the following columns for the following data:</p>\n<ul>\n<li>Metric name (Graphite sensor). Data type: <code>String</code>.</li>\n<li>Time of measuring the metric. Data type: <code>DateTime</code>.</li>\n<li>Value of the metric. Data type: any numeric.</li>\n<li>\n<p>Version of the metric. Data type: any numeric.</p>\n<p>ClickHouse saves the rows with the highest version or the last written if versions are the same. Other rows are deleted during the merge of data parts.</p>\n</li>\n</ul>\n<p>The names of these columns should be set in the rollup configuration.</p>\n<p><strong>GraphiteMergeTree parameters</strong></p>\n<ul>\n<li><code>config_section</code> \u2014 Name of the section in the configuration file, where are the rules of rollup set.</li>\n</ul>\n<p><strong>Query clauses</strong></p>\n<p>When creating a <code>GraphiteMergeTree</code> table, the same <a href=\"#table_engine-mergetree-creating-a-table\">clauses</a> are required, as when creating a <code>MergeTree</code> table.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects and, if possible, switch the old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">EventDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">Path</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">Time</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">Value</span> <span class=\"o\">&lt;</span><span class=\"n\">Numeric_type</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n    <span class=\"k\">Version</span> <span class=\"o\">&lt;</span><span class=\"n\">Numeric_type</span><span class=\"o\">&gt;</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">GraphiteMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"n\">config_section</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>All of the parameters excepting <code>config_section</code> have the same meaning as in <code>MergeTree</code>.</p>\n<ul>\n<li><code>config_section</code> \u2014 Name of the section in the configuration file, where are the rules of rollup set.</li>\n</ul>\n</details>\n<h3 id=\"rollup-configuration\">Rollup configuration<a class=\"headerlink\" href=\"#rollup-configuration\" title=\"Permanent link\">&para;</a></h3>\n<p>The settings for rollup are defined by the <a href=\"#server_settings-graphite_rollup\">graphite_rollup</a> parameter in the server configuration. The name of the parameter could be any. You can create several configurations and use them for different table");
            
            document.write("s.</p>\n<p>Rollup configuration structure:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">required-columns</span>\n<span class=\"err\">patterns</span>\n</code></pre></div>\n\n\n<h4 id=\"required-columns\">Required Columns<a class=\"headerlink\" href=\"#required-columns\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>path_column_name</code> \u2014 The name of the column storing the metric name (Graphite sensor). Default value: <code>Path</code>.</li>\n<li><code>time_column_name</code> \u2014 The name of the column storing the time of measuring the metric. Default value: <code>Time</code>.</li>\n<li><code>value_column_name</code> \u2014 The name of the column storing the value of the metric at the time set in <code>time_column_name</code>. Default value: <code>Value</code>.</li>\n<li><code>version_column_name</code> \u2014 The name of the column storing the version of the metric. Default value: <code>Timestamp</code>.</li>\n</ul>\n<h4 id=\"patterns\">Patterns<a class=\"headerlink\" href=\"#patterns\" title=\"Permanent link\">&para;</a></h4>\n<p>Structure of the <code>patterns</code> section:</p>\n<div class=\"codehilite\"><pre><span></span><code>pattern\n    regexp\n    function\npattern\n    regexp\n    age + precision\n    ...\npattern\n    regexp\n    function\n    age + precision\n    ...\npattern\n    ...\ndefault\n    function\n    age + precision\n    ...\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Attention</p>\n<p>Patterns must be strictly ordered:</p>\n<ol>\n<li>Patterns without <code>function</code> or <code>retention</code>.</li>\n<li>Patterns with both <code>function</code> and <code>retention</code>.</li>\n<li>Pattern <code>default</code>.</li>\n</ol>\n</div>\n<p>When processing a row, ClickHouse checks the rules in the <code>pattern</code> sections. Each of <code>pattern</code> (including <code>default</code>) sections can contain <code>function</code> parameter for aggregation, <code>retention</code> parameters or both. If the metric name matches the <code>regexp</code>, the rules from the <code>pattern</code> section (or sections) are applied; otherwise, the rules from the <code>default</code> section are used.</p>\n<p>Fields for <code>pattern</code> and <code>default</code> sections:</p>\n<ul>\n<li><code>regexp</code>\u2013 A pattern for the metric name.</li>\n<li><code>age</code> \u2013 The minimum age of the data in seconds.</li>\n<li><code>precision</code>\u2013 How precisely to define the age of the data in seconds. Should be a divisor for 86400 (seconds in a day).</li>\n<li><code>function</code> \u2013 The name of the aggregating function to apply to data whose age falls within the range <code>[age, age + precision]</code>.</li>\n</ul>\n<h4 id=\"configuration-example\">Configuration Example<a class=\"headerlink\" href=\"#configuration-example\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;graphite_rollup&gt;</span>\n    <span class=\"nt\">&lt;version_column_name&gt;</span>Version<span class=\"nt\">&lt;/version_column_name&gt;</span>\n    <span class=\"nt\">&lt;pattern&gt;</span>\n        <span class=\"nt\">&lt;regexp&gt;</span>click_cost<span class=\"nt\">&lt;/regexp&gt;</span>\n        <span class=\"nt\">&lt;function&gt;</span>any<span class=\"nt\">&lt;/function&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>0<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>5<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>86400<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>60<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n    <span class=\"nt\">&lt;/pattern&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"nt\">&lt;function&gt;</span>max<span class=\"nt\">&lt;/function&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>0<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>60<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>3600<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>300<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>86400<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>3600<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n<span class=\"nt\">&lt;/graphite_rollup&gt;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../table_engines/log_family/\"></a><a name=\"operations/table_engines/log_family/\"></a><a name=\"../../../table_engines/log_family/\"></a><a name=\"../../../../../table_engines/log_family/\"></a><a name=\"../../../../table_engines/log_family/\"></a><a name=\"../../../../../operations/table_engines/log_family/\"></a><a name=\"../../../operations/table_engines/log_family/\"></a><a name=\"log_family/\"></a><a name=\"table_engines/log_family/\"></a><a name=\"../table_engines/log_family/\"></a><a name=\"../operations/table_engines/log_family/\"></a><a name=\"../../../../../../table_engines/log_family/\"></a><a name=\"../../operations/table_engines/log_family/\"></a><a name=\"../../../../operations/table_engines/log_family/\"></a></p>\n<h2 id=\"table_engines-log_engine_family\">\u65e5\u5fd7\u5f15\u64ce\u7cfb\u5217<a class=\"headerlink\" href=\"#table_engines-log_engine_family\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8fd9\u4e9b\u5f15\u64ce\u662f\u4e3a\u4e86\u9700\u8981\u5199\u5165\u8bb8\u591a\u5c0f\u6570\u636e\u91cf\uff08\u5c11\u4e8e\u4e00\u767e\u4e07\u884c\uff09\u7684\u8868\u7684\u573a\u666f\u800c\u5f00\u53d1\u7684\u3002</p>\n<p>\u8fd9\u7cfb\u5217\u7684\u5f15\u64ce\u6709\uff1a</p>\n<ul>\n<li><a href=\"#stripelog/\">StripeLog</a></li>\n<li><a href=\"#log/\">Log</a></li>\n<li><a href=\"#tinylog/\">TinyLog</a></li>\n</ul>\n<h3 id=\"table_engines-log_engine_family-common_properties\">\u5171\u540c\u5c5e\u6027<a class=\"headerlink\" href=\"#table_engines-log_engine_family-common_properties\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5f15\u64ce\uff1a</p>\n<ul>\n<li>\u6570\u636e\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u3002</li>\n<li>\u5199\u5165\u65f6\u5c06\u6570\u636e\u8ffd\u52a0\u5728\u6587\u4ef6\u672b\u5c3e\u3002</li>\n<li>\u4e0d\u652f\u6301<a href=\"#alter-mutations\">\u7a81\u53d8</a>\u64cd\u4f5c\u3002</li>\n<li>\n<p>\u4e0d\u652f\u6301\u7d22\u5f15\u3002</p>\n<p>\u8fd9\u610f\u5473\u7740 <code>SELECT</code> \u5728\u8303\u56f4\u67e5\u8be2\u65f6\u6548\u7387\u4e0d\u9ad8\u3002</p>\n</li>\n<li>\n<p>\u975e\u539f\u5b50\u5730\u5199\u5165\u6570\u636e\u3002</p>\n<p>\u5982\u679c\u67d0\u4e9b\u4e8b\u60c5\u7834\u574f\u4e86\u5199\u64cd\u4f5c\uff0c\u4f8b\u5982\u670d\u52a1\u5668\u7684\u5f02\u5e38\u5173\u95ed\uff0c\u4f60\u5c06\u4f1a\u5f97\u5230\u4e00\u5f20\u5305\u542b\u4e86\u635f\u574f\u6570\u636e\u7684\u8868\u3002</p>\n</li>\n</ul>\n<h3 id=\"table_engines-log_engine_family-differences\">\u5dee\u5f02<a class=\"headerlink\" href=\"#table_engines-log_engine_family-differences\" title=\"Permanent link\">&para;</a></h3>\n<p><code>Log</code> \u548c <code>StripeLog</code> \u5f15\u64ce\u652f\u6301\uff1a</p>\n<ul>\n<li>\n<p>\u5e76\u53d1\u8bbf\u95ee\u6570\u636e\u7684\u9501\u3002</p>\n<p><code>INSERT</code> \u8bf7\u6c42\u6267\u884c\u8fc7\u7a0b\u4e2d\u8868\u4f1a\u88ab\u9501\u5b9a\uff0c\u5e76\u4e14\u5176\u4ed6\u7684\u8bfb\u5199\u6570\u636e\u7684\u8bf7\u6c42\u90fd\u4f1a\u7b49\u5f85\u76f4\u5230\u9501\u5b9a\u88ab\u89e3\u9664\u3002\u5982\u679c\u6ca1\u6709\u5199\u6570\u636e\u7684\u8bf7\u6c42\uff0c\u4efb\u610f\u6570\u91cf\u7684\u8bfb\u8bf7\u6c42\u90fd\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\u3002</p>\n</li>\n<li>\n<p>\u5e76\u884c\u8bfb\u53d6\u6570\u636e\u3002</p>\n<p>\u5728\u8bfb\u53d6\u6570\u636e\u65f6\uff0cClickHouse \u4f7f\u7528\u591a\u7ebf\u7a0b\u3002 \u6bcf\u4e2a\u7ebf\u7a0b\u5904\u7406\u4e0d\u540c\u7684\u6570\u636e\u5757\u3002</p>\n</li>\n</ul>\n<p><code>Log</code> \u5f15\u64ce\u4e3a\u8868\u4e2d\u7684\u6bcf\u4e00\u5217\u4f7f\u7528\u4e0d\u540c\u7684\u6587\u4ef6\u3002<code>StripeLog</code> \u5c06\u6240\u6709\u7684\u6570\u636e\u5b58\u50a8\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\u3002\u56e0\u6b64 <code>StripeLog</code> \u5f15\u64ce\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u4f7f\u7528\u66f4\u5c11\u7684\u63cf\u8ff0\u7b26\uff0c\u4f46\u662f <code>Log</code> \u5f15\u64ce\u63d0\u4f9b\u66f4\u9ad8\u7684\u8bfb\u6027\u80fd\u3002</p>\n<p><code>TingLog</code> \u5f15\u64ce\u662f\u8be5\u7cfb\u5217\u4e2d\u6700\u7b80\u5355\u7684\u5f15\u64ce\u5e76\u4e14\u63d0\u4f9b\u4e86\u6700\u5c11\u7684\u529f\u80fd\u548c\u6700\u4f4e\u7684\u6027\u80fd\u3002<code>TingLog</code> \u5f15\u64ce\u4e0d\u652f\u6301\u5e76\u884c\u8bfb\u53d6\u548c\u5e76\u53d1\u6570\u636e\u8bbf\u95ee\uff0c\u5e76\u5c06\u6bcf\u4e00\u5217\u5b58\u50a8\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u4e2d\u3002\u5b83\u6bd4\u5176\u4f59\u4e24\u79cd\u652f\u6301\u5e76\u884c\u8bfb\u53d6\u7684\u5f15\u64ce\u7684\u8bfb\u53d6\u901f\u5ea6\u66f4\u6162\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86\u548c <code>Log</code> \u5f15\u64ce\u540c\u6837\u591a\u7684\u63cf\u8ff0\u7b26\u3002\u4f60\u53ef\u4ee5\u5728\u7b80\u5355\u7684\u4f4e\u8d1f\u8f7d\u7684\u60c5\u666f\u4e0b\u4f7f\u7528\u5b83\u3002</p>\n<p><a name=\"../../../../../operations/table_engines/stripelog/\"></a><a name=\"../../../../../table_engines/stripelog/\"></a><a name=\"table_engines/stripelog/\"></a><a name=\"stripelog/\"></a><a name=\"../../../../../../table_engines/stripelog/\"></a><a name=\"../operations/table_engines/stripelog/\"></a><a name=\"../../../table_engines/stripelog/\"></a><a name=\"../../table_engines/stripelog/\"></a><a name=\"../../../operations/table_engines/stripelog/\"></a><a name=\"../../operations/table_engines/stripelog/\"></a><a name=\"../../../../operations/table_engines/stripelog/\"></a><a name=\"../../../../table_engines/stripelog/\"></a><a name=\"operations/table_engines/stripelog/\"></a><a name=\"../table_engines/stripelog/\"></a></p>\n<h2 id=\"table_engines-stripelog\">StripeLog<a class=\"headerlink\" href=\"#table_engines-stripelog\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8be5\u5f15\u64ce\u5c5e\u4e8e\u65e5\u5fd7\u5f15\u64ce\u7cfb\u5217\u3002\u8bf7\u5728<a href=\"#log_family/\">\u65e5\u5fd7\u5f15\u64ce\u7cfb\u5217</a>\u6587\u7ae0\u4e2d\u67e5\u770b\u5f15\u64ce\u7684\u5171\u540c\u5c5e\u6027\u548c\u5dee\u5f02\u3002</p>\n<p>\u5728\u4f60\u9700\u8981\u5199\u5165\u8bb8\u591a\u5c0f\u6570\u636e\u91cf\uff08\u5c0f\u4e8e\u4e00\u767e\u4e07\u884c\uff09\u7684\u8868\u7684\u573a\u666f\u4e0b\u4f7f\u7528\u8fd9\u4e2a\u5f15\u64ce\u3002</p>\n<h3 id=\"table_engines-stripelog-creating-a-table\">\u5efa\u8868<a class=\"headerlink\" href=\"#table_engines-stripelog-creating-a-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span><span class=\"w\"> </span><span class=\"nc\">TABLE</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IF NOT EXISTS</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">db.</span><span class=\"o\">]</span><span class=\"n\">table_name</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ON CLUSTER cluster</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">column1_name</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr1</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">column2_name</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">type2</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEFAULT|MATERIALIZED|ALIAS expr2</span><span class=\"o\">]</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">...</span><span class=\"w\"></span>\n<span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">ENGINE</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">StripeLog</span><span class=\"w\"></span>\n</code></pre></div>\n\n\n<p>\u67e5\u770b<a href=\"#create-table-query\">\u5efa\u8868</a>\u8bf7\u6c42\u7684\u8be6\u7ec6\u8bf4\u660e\u3002</p>\n<h3 id=\"table_engines-stripelog-writing-the-data\">\u5199\u6570\u636e<a class=\"headerlink\" href=\"#table_engines-stripelog-writing-the-data\" title=\"Permanent link\">&para;</a></h3>\n<p><code>StripeLog</code> \u5f15\u64ce\u5c06\u6240\u6709\u5217\u5b58\u50a8\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\u3002\u5bf9\u6bcf\u4e00\u6b21 <code>Insert</code> \u8bf7\u6c42\uff0cClickHouse \u5c06\u6570\u636e\u5757\u8ffd\u52a0\u5728\u8868\u6587\u4ef6\u7684\u672b\u5c3e\uff0c\u9010\u5217\u5199\u5165\u3002</p>\n");
            
            document.write("<p>ClickHouse \u4e3a\u6bcf\u5f20\u8868\u5199\u5165\u4ee5\u4e0b\u6587\u4ef6\uff1a</p>\n<ul>\n<li><code>data.bin</code> \u2014 \u6570\u636e\u6587\u4ef6\u3002</li>\n<li><code>index.mrk</code> \u2014 \u5e26\u6807\u8bb0\u7684\u6587\u4ef6\u3002\u6807\u8bb0\u5305\u542b\u4e86\u5df2\u63d2\u5165\u7684\u6bcf\u4e2a\u6570\u636e\u5757\u4e2d\u6bcf\u5217\u7684\u504f\u79fb\u91cf\u3002</li>\n</ul>\n<p><code>StripeLog</code> \u5f15\u64ce\u4e0d\u652f\u6301 <code>ALTER UPDATE</code> \u548c <code>ALTER DELETE</code> \u64cd\u4f5c\u3002</p>\n<h3 id=\"table_engines-stripelog-reading-the-data\">\u8bfb\u6570\u636e<a class=\"headerlink\" href=\"#table_engines-stripelog-reading-the-data\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5e26\u6807\u8bb0\u7684\u6587\u4ef6\u4f7f\u5f97 ClickHouse \u53ef\u4ee5\u5e76\u884c\u7684\u8bfb\u53d6\u6570\u636e\u3002\u8fd9\u610f\u5473\u7740 <code>SELECT</code> \u8bf7\u6c42\u8fd4\u56de\u884c\u7684\u987a\u5e8f\u662f\u4e0d\u53ef\u9884\u6d4b\u7684\u3002\u4f7f\u7528 <code>ORDER BY</code> \u5b50\u53e5\u5bf9\u884c\u8fdb\u884c\u6392\u5e8f\u3002</p>\n<h3 id=\"table_engines-stripelog-example-of-use\">\u4f7f\u7528\u793a\u4f8b<a class=\"headerlink\" href=\"#table_engines-stripelog-example-of-use\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5efa\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">stripe_log_table</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">message_type</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">StripeLog</span>\n</code></pre></div>\n\n\n<p>\u63d2\u5165\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">stripe_log_table</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">(),</span><span class=\"s1\">&#39;REGULAR&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;The first regular message&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">stripe_log_table</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">(),</span><span class=\"s1\">&#39;REGULAR&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;The second regular message&#39;</span><span class=\"p\">),(</span><span class=\"n\">now</span><span class=\"p\">(),</span><span class=\"s1\">&#39;WARNING&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;The first warning message&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u6211\u4eec\u4f7f\u7528\u4e24\u6b21 <code>INSERT</code> \u8bf7\u6c42\u4ece\u800c\u5728 <code>data.bin</code> \u6587\u4ef6\u4e2d\u521b\u5efa\u4e24\u4e2a\u6570\u636e\u5757\u3002</p>\n<p>ClickHouse \u5728\u67e5\u8be2\u6570\u636e\u65f6\u4f7f\u7528\u591a\u7ebf\u7a0b\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u8bfb\u53d6\u5355\u72ec\u7684\u6570\u636e\u5757\u5e76\u5728\u5b8c\u6210\u540e\u72ec\u7acb\u7684\u8fd4\u56de\u7ed3\u679c\u884c\u3002\u8fd9\u6837\u7684\u7ed3\u679c\u662f\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u4e2d\u5757\u7684\u987a\u5e8f\u548c\u8f93\u5165\u65f6\u76f8\u5e94\u5757\u7684\u987a\u5e8f\u662f\u4e0d\u540c\u7684\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">stripe_log_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500timestamp\u2500\u252c\u2500message_type\u2500\u252c\u2500message\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 2019-01-18 14:27:32 \u2502 REGULAR      \u2502 The second regular message \u2502</span>\n<span class=\"err\">\u2502 2019-01-18 14:34:53 \u2502 WARNING      \u2502 The first warning message  \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500timestamp\u2500\u252c\u2500message_type\u2500\u252c\u2500message\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 2019-01-18 14:23:43 \u2502 REGULAR      \u2502 The first regular message \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5bf9\u7ed3\u679c\u6392\u5e8f\uff08\u9ed8\u8ba4\u589e\u5e8f\uff09\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">stripe_log_table</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">timestamp</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500timestamp\u2500\u252c\u2500message_type\u2500\u252c\u2500message\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 2019-01-18 14:23:43 \u2502 REGULAR      \u2502 The first regular message  \u2502</span>\n<span class=\"err\">\u2502 2019-01-18 14:27:32 \u2502 REGULAR      \u2502 The second regular message \u2502</span>\n<span class=\"err\">\u2502 2019-01-18 14:34:53 \u2502 WARNING      \u2502 The first warning message  \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"../table_engines/log/\"></a><a name=\"../operations/table_engines/log/\"></a><a name=\"../../operations/table_engines/log/\"></a><a name=\"../../../../table_engines/log/\"></a><a name=\"../../../../../table_engines/log/\"></a><a name=\"log/\"></a><a name=\"../../../../operations/table_engines/log/\"></a><a name=\"../../../../../operations/table_engines/log/\"></a><a name=\"table_engines/log/\"></a><a name=\"operations/table_engines/log/\"></a><a name=\"../../../operations/table_engines/log/\"></a><a name=\"../../../../../../table_engines/log/\"></a><a name=\"../../table_engines/log/\"></a><a name=\"../../../table_engines/log/\"></a></p>\n<h2 id=\"log_1\">Log<a class=\"headerlink\" href=\"#log_1\" title=\"Permanent link\">&para;</a></h2>\n<p>\u65e5\u5fd7\u4e0e TinyLog \u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\"\u6807\u8bb0\" \u7684\u5c0f\u6587\u4ef6\u4e0e\u5217\u6587\u4ef6\u5b58\u5728\u4e00\u8d77\u3002\u8fd9\u4e9b\u6807\u8bb0\u5199\u5728\u6bcf\u4e2a\u6570\u636e\u5757\u4e0a\uff0c\u5e76\u4e14\u5305\u542b\u504f\u79fb\u91cf\uff0c\u8fd9\u4e9b\u504f\u79fb\u91cf\u6307\u793a\u4ece\u54ea\u91cc\u5f00\u59cb\u8bfb\u53d6\u6587\u4ef6\u4ee5\u4fbf\u8df3\u8fc7\u6307\u5b9a\u7684\u884c\u6570\u3002\u8fd9\u4f7f\u5f97\u53ef\u4ee5\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e2d\u8bfb\u53d6\u8868\u6570\u636e\u3002\u5bf9\u4e8e\u5e76\u53d1\u6570\u636e\u8bbf\u95ee\uff0c\u53ef\u4ee5\u540c\u65f6\u6267\u884c\u8bfb\u53d6\u64cd\u4f5c\uff0c\u800c\u5199\u5165\u64cd\u4f5c\u5219\u963b\u585e\u8bfb\u53d6\u548c\u5176\u5b83\u5199\u5165\u3002Log \u5f15\u64ce\u4e0d\u652f\u6301\u7d22\u5f15\u3002\u540c\u6837\uff0c\u5982\u679c\u5199\u5165\u8868\u5931\u8d25\uff0c\u5219\u8be5\u8868\u5c06\u88ab\u7834\u574f\uff0c\u5e76\u4e14\u4ece\u8be5\u8868\u8bfb\u53d6\u5c06\u8fd4\u56de\u9519\u8bef\u3002Log \u5f15\u64ce\u9002\u7528\u4e8e\u4e34\u65f6\u6570\u636e\uff0cwrite-once \u8868\u4ee5\u53ca\u6d4b\u8bd5\u6216\u6f14\u793a\u76ee\u7684\u3002</p>\n<p><a name=\"../operations/table_engines/tinylog/\"></a><a name=\"../../../../operations/table_engines/tinylog/\"></a><a name=\"../../table_engines/tinylog/\"></a><a name=\"tinylog/\"></a><a name=\"../../operations/table_engines/tinylog/\"></a><a name=\"../../../operations/table_engines/tinylog/\"></a><a name=\"../../../../../../table_engines/tinylog/\"></a><a name=\"../table_engines/tinylog/\"></a><a name=\"../../../../table_engines/tinylog/\"></a><a name=\"../../../table_engines/tinylog/\"></a><a name=\"../../../../../operations/table_engines/tinylog/\"></a><a name=\"../../../../../table_engines/tinylog/\"></a><a name=\"table_engines/tinylog/\"></a><a name=\"operations/table_engines/tinylog/\"></a></p>\n<h2 id=\"tinylog\">TinyLog<a class=\"headerlink\" href=\"#tinylog\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6700\u7b80\u5355\u7684\u8868\u5f15\u64ce\uff0c\u7528\u4e8e\u5c06\u6570\u636e\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u3002\u6bcf\u5217\u90fd\u5b58\u50a8\u5728\u5355\u72ec\u7684\u538b\u7f29\u6587\u4ef6\u4e2d\u3002\u5199\u5165\u65f6\uff0c\u6570\u636e\u5c06\u9644\u52a0\u5230\u6587\u4ef6\u672b\u5c3e\u3002</p>\n<p>\u5e76\u53d1\u6570\u636e\u8bbf\u95ee\u4e0d\u53d7\u4efb\u4f55\u9650\u5236\uff1a<br />\n - \u5982\u679c\u540c\u65f6\u4ece\u8868\u4e2d\u8bfb\u53d6\u5e76\u5728\u4e0d\u540c\u7684\u67e5\u8be2\u4e2d\u5199\u5165\uff0c\u5219\u8bfb\u53d6\u64cd\u4f5c\u5c06\u629b\u51fa\u5f02\u5e38<br />\n - \u5982\u679c\u540c\u65f6\u5199\u5165\u591a\u4e2a\u67e5\u8be2\u4e2d\u7684\u8868\uff0c\u5219\u6570\u636e\u5c06\u88ab\u7834\u574f\u3002</p>\n<p>\u8fd9\u79cd\u8868\u5f15\u64ce\u7684\u5178\u578b\u7528\u6cd5\u662f write-once\uff1a\u9996\u5148\u53ea\u5199\u5165\u4e00\u6b21\u6570\u636e\uff0c\u7136\u540e\u6839\u636e\u9700\u8981\u591a\u6b21\u8bfb\u53d6\u3002\u67e5\u8be2\u5728\u5355\u4e2a\u6d41\u4e2d\u6267\u884c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6b64\u5f15\u64ce\u9002\u7528\u4e8e\u76f8\u5bf9\u8f83\u5c0f\u7684\u8868\uff08\u5efa\u8bae\u6700\u591a1,000,000\u884c\uff09\u3002\u5982\u679c\u60a8\u6709\u8bb8\u591a\u5c0f\u8868\uff0c\u5219\u4f7f\u7528\u6b64\u8868\u5f15\u64ce\u662f\u9002\u5408\u7684\uff0c\u56e0\u4e3a\u5b83\u6bd4Log\u5f15\u64ce\u66f4\u7b80\u5355\uff08\u9700\u8981\u6253\u5f00\u7684\u6587\u4ef6\u66f4\u5c11\uff09\u3002\u5f53\u60a8\u62e5\u6709\u5927\u91cf\u5c0f\u8868\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u4f4e\u4e0b\uff0c\u4f46\u5728\u53ef\u80fd\u5df2\u7ecf\u5728\u5176\u5b83 DBMS \u65f6\u4f7f\u7528\u8fc7\uff0c\u5219\u60a8\u53ef\u80fd\u4f1a\u53d1\u73b0\u5207\u6362\u4f7f\u7528 TinyLog \u7c7b\u578b\u7684\u8868\u66f4\u5bb9\u6613\u3002<strong>\u4e0d\u652f\u6301\u7d22\u5f15</strong>\u3002</p>\n<p>\u5728 Yandex.Metrica \u4e2d\uff0cTinyLog \u8868\u7528\u4e8e\u5c0f\u6279\u91cf\u5904\u7406\u7684\u4e2d\u95f4\u6570\u636e\u3002</p>\n<p><a name=\"../../../table_engines/kafka/\"></a><a name=\"../../../../../operations/table_engines/kafka/\"></a><a name=\"../../table_engines/kafka/\"></a><a name=\"../../../operations/table_engines/kafka/\"></a><a name=\"../../../../../../table_engines/kafka/\"></a><a name=\"../table_engines/kafka/\"></a><a name=\"../../operations/table_engines/kafka/\"></a><a name=\"table_engines/kafka/\"></a><a name=\"operations/table_engines/kafka/\"></a><a name=\"../../../../../table_engines/kafka/\"></a><a name=\"kafka/\"></a><a name=\"../../../../table_engines/kafka/\"></a><a name=\"../operations/table_engines/kafka/\"></a><a name=\"../../../../operations/table_engines/kafka/\"></a></p>\n<h2 id=\"kafka\">Kafka<a class=\"headerlink\" href=\"#kafka\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6b64\u5f15\u64ce\u4e0e <a href=\"http://kafka.apache.org/\" rel=\"external nofollow noreferrer\">Apache Kafka</a> \u7ed3\u5408\u4f7f\u7528\u3002</p>\n<p>Kafka \u7279\u6027\uff1a</p>\n<ul>\n<li>\u53d1\u5e03\u6216\u8005\u8ba2\u9605\u6570\u636e\u6d41\u3002</li>\n<li>\u5bb9\u9519\u5b58\u50a8\u673a\u5236\u3002</li>\n<li>\u5904\u7406\u6d41\u6570\u636e\u3002</li>\n</ul>\n<p>\u8001\u7248\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format</span>\n<span class=\"err\">      [, kafka_row_delimiter, kafka_schema, kafka_num_consumers])</span>\n</code></pre></div>\n\n\n<p>\u65b0\u7248\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Kafka SETTINGS</span>\n<span class=\"err\">  kafka_broker_list = &#39;localhost:9092&#39;,</span>\n<span class=\"err\">  kafka_topic_list = &#39;topic1,topic2&#39;,</span>\n<span class=\"err\">  kafka_group_name = &#39;group1&#39;,</span>\n<span class=\"err\">  kafka_format = &#39;JSONEachRow&#39;,</span>\n<span class=\"err\">  kafka_row_delimiter = &#39;\\n&#39;,</span>\n<span class=\"err\">  kafka_schema = &#39;&#39;,</span>\n<span class=\"err\">  kafka_num_consumers = 2</span>\n</code></pre></div>\n\n\n<p>\u5fc5\u8981\u53c2\u6570\uff1a</p>\n<ul>\n<li><code>kafka_broker_list</code> \u2013 \u4ee5\u9017\u53f7\u5206\u9694\u7684 brokers \u5217\u8868 (<code>localhost:9092</code>)\u3002</li>\n<li><code>kafka_topic_list</code> \u2013 topic \u5217\u8868 (<code>my_topic</code>)\u3002</li>\n<li><code>kafka_group_name</code> \u2013 Kafka \u6d88\u8d39\u7ec4\u540d\u79f0 (<code>group1</code>)\u3002\u5982\u679c\u4e0d\u5e0c\u671b\u6d88\u606f\u5728\u96c6\u7fa4\u4e2d\u91cd\u590d\uff0c\u8bf7\u5728\u6bcf\u4e2a\u5206\u7247\u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u7ec4\u540d\u3002</li>\n<li><code>kafka_format</code> \u2013 \u6d88\u606f\u4f53\u683c\u5f0f\u3002\u4f7f\u7528\u4e0e SQL \u90e8\u5206\u7684 <code>FORMAT</code> \u51fd\u6570\u76f8\u540c\u8868\u793a\u65b9\u6cd5\uff0c\u4f8b\u5982 <code>JSONEachRow</code>\u3002\u4e86\u89e3\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 <code>Formats</code> \u90e8\u5206\u3002</li>\n</ul>\n<p>\u53ef\u9009\u53c2\u6570\uff1a</p>\n<ul>\n<li><code>kafka_row_delimiter</code> - \u6bcf\u4e2a\u6d88\u606f\u4f53\uff08\u8bb0\u5f55\uff09\u4e4b\u95f4\u7684\u5206\u9694\u7b26\u3002</li>\n<li><code>kafka_schema</code> \u2013 \u5982\u679c\u89e3\u6790\u683c\u5f0f\u9700\u8981\u4e00\u4e2a schema \u65f6\uff0c\u6b64\u53c2\u6570\u5fc5\u586b\u3002\u4f8b\u5982\uff0c<a href=\"https://capnproto.org/\" rel=\"external nofollow noreferrer\">Cap'n Proto</a> \u9700\u8981 schema \u6587\u4ef6\u8def\u5f84\u4ee5\u53ca\u6839\u5bf9\u8c61 <code>schema.capnp:Message</code> \u7684\u540d\u5b57\u3002</li>\n<li><code>kafka_num_consumers</code> \u2013 \u5355\u4e2a\u8868\u7684\u6d88\u8d39\u8005\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u662f\uff1a<code>1</code>\uff0c\u5982\u679c\u4e00\u4e2a\u6d88\u8d39\u8005\u7684\u541e\u5410\u91cf\u4e0d\u8db3\uff0c\u5219\u6307\u5b9a\u66f4\u591a\u7684\u6d88\u8d39\u8005\u3002\u6d88\u8d39\u8005\u7684\u603b\u6570\u4e0d\u5e94\u8be5\u8d85\u8fc7 topic \u4e2d\u5206\u533a\u7684\u6570\u91cf\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u5206\u533a\u53ea\u80fd\u5206\u914d\u4e00\u4e2a\u6d88\u8d39\u8005\u3002</li>\n</ul>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">queue</span> <span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:9092&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;topic&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;group1&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;JSONEachRow&#39;</span><span class=\"p\">);</span>\n\n  <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">queue</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span><span class=\"p\">;</span>\n\n  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">queue2</span> <span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span cl");
            
            document.write("ass=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span> <span class=\"n\">SETTINGS</span> <span class=\"n\">kafka_broker_list</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;localhost:9092&#39;</span><span class=\"p\">,</span>\n                            <span class=\"n\">kafka_topic_list</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;topic&#39;</span><span class=\"p\">,</span>\n                            <span class=\"n\">kafka_group_name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;group1&#39;</span><span class=\"p\">,</span>\n                            <span class=\"n\">kafka_format</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;JSONEachRow&#39;</span><span class=\"p\">,</span>\n                            <span class=\"n\">kafka_num_consumers</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">;</span>\n\n  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">queue2</span> <span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:9092&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;topic&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;group1&#39;</span><span class=\"p\">)</span>\n              <span class=\"n\">SETTINGS</span> <span class=\"n\">kafka_format</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;JSONEachRow&#39;</span><span class=\"p\">,</span>\n                       <span class=\"n\">kafka_num_consumers</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u6d88\u8d39\u7684\u6d88\u606f\u4f1a\u88ab\u81ea\u52a8\u8ffd\u8e2a\uff0c\u56e0\u6b64\u6bcf\u4e2a\u6d88\u606f\u5728\u4e0d\u540c\u7684\u6d88\u8d39\u7ec4\u91cc\u53ea\u4f1a\u8bb0\u5f55\u4e00\u6b21\u3002\u5982\u679c\u5e0c\u671b\u83b7\u5f97\u4e24\u6b21\u6570\u636e\uff0c\u5219\u4f7f\u7528\u53e6\u4e00\u4e2a\u7ec4\u540d\u521b\u5efa\u526f\u672c\u3002</p>\n<p>\u6d88\u8d39\u7ec4\u53ef\u4ee5\u7075\u6d3b\u914d\u7f6e\u5e76\u4e14\u5728\u96c6\u7fa4\u4e4b\u95f4\u540c\u6b65\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7fa4\u96c6\u4e2d\u670910\u4e2a\u4e3b\u9898\u548c5\u4e2a\u8868\u526f\u672c\uff0c\u5219\u6bcf\u4e2a\u526f\u672c\u5c06\u83b7\u5f972\u4e2a\u4e3b\u9898\u3002 \u5982\u679c\u526f\u672c\u6570\u91cf\u53d1\u751f\u53d8\u5316\uff0c\u4e3b\u9898\u5c06\u81ea\u52a8\u5728\u526f\u672c\u4e2d\u91cd\u65b0\u5206\u914d\u3002\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u8bf7\u8bbf\u95ee <a href=\"http://kafka.apache.org/intro\" rel=\"external nofollow noreferrer\">http://kafka.apache.org/intro</a>\u3002</p>\n<p><code>SELECT</code> \u67e5\u8be2\u5bf9\u4e8e\u8bfb\u53d6\u6d88\u606f\u5e76\u4e0d\u662f\u5f88\u6709\u7528\uff08\u8c03\u8bd5\u9664\u5916\uff09\uff0c\u56e0\u4e3a\u6bcf\u6761\u6d88\u606f\u53ea\u80fd\u88ab\u8bfb\u53d6\u4e00\u6b21\u3002\u4f7f\u7528\u7269\u5316\u89c6\u56fe\u521b\u5efa\u5b9e\u65f6\u7ebf\u7a0b\u66f4\u5b9e\u7528\u3002\u60a8\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a</p>\n<ol>\n<li>\u4f7f\u7528\u5f15\u64ce\u521b\u5efa\u4e00\u4e2a Kafka \u6d88\u8d39\u8005\u5e76\u4f5c\u4e3a\u4e00\u6761\u6570\u636e\u6d41\u3002</li>\n<li>\u521b\u5efa\u4e00\u4e2a\u7ed3\u6784\u8868\u3002</li>\n<li>\u521b\u5efa\u7269\u5316\u89c6\u56fe\uff0c\u6539\u89c6\u56fe\u4f1a\u5728\u540e\u53f0\u8f6c\u6362\u5f15\u64ce\u4e2d\u7684\u6570\u636e\u5e76\u5c06\u5176\u653e\u5165\u4e4b\u524d\u521b\u5efa\u7684\u8868\u4e2d\u3002</li>\n</ol>\n<p>\u5f53 <code>MATERIALIZED VIEW</code> \u6dfb\u52a0\u81f3\u5f15\u64ce\uff0c\u5b83\u5c06\u4f1a\u5728\u540e\u53f0\u6536\u96c6\u6570\u636e\u3002\u53ef\u4ee5\u6301\u7eed\u4e0d\u65ad\u5730\u4ece Kafka \u6536\u96c6\u6570\u636e\u5e76\u901a\u8fc7 <code>SELECT</code> \u5c06\u6570\u636e\u8f6c\u6362\u4e3a\u6240\u9700\u8981\u7684\u683c\u5f0f\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">queue</span> <span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:9092&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;topic&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;group1&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;JSONEachRow&#39;</span><span class=\"p\">);</span>\n\n  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">daily</span> <span class=\"p\">(</span>\n    <span class=\"k\">day</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">total</span> <span class=\"n\">UInt64</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">SummingMergeTree</span><span class=\"p\">(</span><span class=\"k\">day</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"k\">day</span><span class=\"p\">,</span> <span class=\"k\">level</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n\n  <span class=\"k\">CREATE</span> <span class=\"n\">MATERIALIZED</span> <span class=\"k\">VIEW</span> <span class=\"n\">consumer</span> <span class=\"k\">TO</span> <span class=\"n\">daily</span>\n    <span class=\"k\">AS</span> <span class=\"k\">SELECT</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"k\">timestamp</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"k\">day</span><span class=\"p\">,</span> <span class=\"k\">level</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">as</span> <span class=\"n\">total</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">queue</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">day</span><span class=\"p\">,</span> <span class=\"k\">level</span><span class=\"p\">;</span>\n\n  <span class=\"k\">SELECT</span> <span class=\"k\">level</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">total</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">daily</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">level</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>\u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u63a5\u53d7\u7684\u6d88\u606f\u88ab\u5206\u7ec4\u4e3a <a href=\"#settings-max_insert_block_size\">max_insert_block_size</a> \u5927\u5c0f\u7684\u5757\u3002\u5982\u679c\u672a\u5728 <a href=\"#../settings/settings/\">stream_flush_interval_ms</a> \u6beb\u79d2\u5185\u5f62\u6210\u5757\uff0c\u5219\u4e0d\u5173\u5fc3\u5757\u7684\u5b8c\u6574\u6027\uff0c\u90fd\u4f1a\u5c06\u6570\u636e\u5237\u65b0\u5230\u8868\u4e2d\u3002</p>\n<p>\u505c\u6b62\u63a5\u6536\u4e3b\u9898\u6570\u636e\u6216\u66f4\u6539\u8f6c\u6362\u903b\u8f91\uff0c\u8bf7 detach \u7269\u5316\u89c6\u56fe\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">  DETACH TABLE consumer;</span>\n<span class=\"err\">  ATTACH MATERIALIZED VIEW consumer;</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u4f7f\u7528 <code>ALTER</code> \u66f4\u6539\u76ee\u6807\u8868\uff0c\u4e3a\u4e86\u907f\u514d\u76ee\u6807\u8868\u4e0e\u89c6\u56fe\u4e2d\u7684\u6570\u636e\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\uff0c\u63a8\u8350\u505c\u6b62\u7269\u5316\u89c6\u56fe\u3002</p>\n<h3 id=\"pei-zhi\">\u914d\u7f6e<a class=\"headerlink\" href=\"#pei-zhi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e <code>GraphiteMergeTree</code> \u7c7b\u4f3c\uff0cKafka \u5f15\u64ce\u652f\u6301\u4f7f\u7528ClickHouse\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u6269\u5c55\u914d\u7f6e\u3002\u53ef\u4ee5\u4f7f\u7528\u4e24\u4e2a\u914d\u7f6e\u952e\uff1a\u5168\u5c40 (<code>kafka</code>) \u548c \u4e3b\u9898\u7ea7\u522b (<code>kafka_*</code>)\u3002\u9996\u5148\u5e94\u7528\u5168\u5c40\u914d\u7f6e\uff0c\u7136\u540e\u5e94\u7528\u4e3b\u9898\u7ea7\u914d\u7f6e\uff08\u5982\u679c\u5b58\u5728\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"c\">&lt;!-- Global configuration options for all tables of Kafka engine type --&gt;</span>\n  <span class=\"nt\">&lt;kafka&gt;</span>\n    <span class=\"nt\">&lt;debug&gt;</span>cgrp<span class=\"nt\">&lt;/debug&gt;</span>\n    <span class=\"nt\">&lt;auto_offset_reset&gt;</span>smallest<span class=\"nt\">&lt;/auto_offset_reset&gt;</span>\n  <span class=\"nt\">&lt;/kafka&gt;</span>\n\n  <span class=\"c\">&lt;!-- Configuration specific for topic &quot;logs&quot; --&gt;</span>\n  <span class=\"nt\">&lt;kafka_logs&gt;</span>\n    <span class=\"nt\">&lt;retry_backoff_ms&gt;</span>250<span class=\"nt\">&lt;/retry_backoff_ms&gt;</span>\n    <span class=\"nt\">&lt;fetch_min_bytes&gt;</span>100000<span class=\"nt\">&lt;/fetch_min_bytes&gt;</span>\n  <span class=\"nt\">&lt;/kafka_logs&gt;</span>\n</code></pre></div>\n\n\n<p>\u6709\u5173\u8be6\u7ec6\u914d\u7f6e\u9009\u9879\u5217\u8868\uff0c\u8bf7\u53c2\u9605 <a href=\"https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION.md\" rel=\"external nofollow noreferrer\">librdkafka configuration reference</a>\u3002\u5728 ClickHouse \u914d\u7f6e\u4e2d\u4f7f\u7528\u4e0b\u5212\u7ebf (<code>_</code>) \uff0c\u5e76\u4e0d\u662f\u4f7f\u7528\u70b9 (<code>.</code>)\u3002\u4f8b\u5982\uff0c<code>check.crcs=true</code> \u5c06\u662f <code>&lt;check_crcs&gt;true&lt;/check_crcs&gt;</code>\u3002</p>\n<p><a name=\"../../../../../operations/table_engines/mysql/\"></a><a name=\"table_engines/mysql/\"></a><a name=\"../../../../../../table_engines/mysql/\"></a><a name=\"../../../../operations/table_engines/mysql/\"></a><a name=\"operations/table_engines/mysql/\"></a><a name=\"../../../table_engines/mysql/\"></a><a name=\"../../../operations/table_engines/mysql/\"></a><a name=\"../../table_engines/mysql/\"></a><a name=\"../../../../table_engines/mysql/\"></a><a name=\"../../../../../table_engines/mysql/\"></a><a name=\"../table_engines/mysql/\"></a><a name=\"mysql/\"></a><a name=\"../../operations/table_engines/mysql/\"></a><a name=\"../operations/table_engines/mysql/\"></a></p>\n<h2 id=\"mysql_1\">MySQL<a class=\"headerlink\" href=\"#mysql_1\" title=\"Permanent link\">&para;</a></h2>\n<p>MySQL \u5f15\u64ce\u53ef\u4ee5\u5bf9\u5b58\u50a8\u5728\u8fdc\u7a0b MySQL \u670d\u52a1\u5668\u4e0a\u7684\u6570\u636e\u6267\u884c <code>SELECT</code> \u67e5\u8be2\u3002</p>\n<p>\u8c03\u7528\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">MySQL(&#39;host:port&#39;, &#39;database&#39;, &#39;table&#39;, &#39;user&#39;, &#39;password&#39;[, replace_query, &#39;on_duplicate_clause&#39;]);</span>\n</code></pre></div>\n\n\n<p><strong>\u8c03\u7528\u53c2\u6570</strong></p>\n<ul>\n<li><code>host:port</code> \u2014 MySQL \u670d\u52a1\u5668\u5730\u5740\u3002</li>\n<li><code>database</code> \u2014 \u6570\u636e\u5e93\u7684\u540d\u79f0\u3002</li>\n<li><code>table</code> \u2014 \u8868\u540d\u79f0\u3002</li>\n<li><code>user</code> \u2014 \u6570\u636e\u5e93\u7528\u6237\u3002</li>\n<li><code>password</code> \u2014 \u7528\u6237\u5bc6\u7801\u3002</li>\n<li><code>replace_query</code> \u2014 \u5c06 <code>INSERT INTO</code> \u67e5\u8be2\u662f\u5426\u66ff\u6362\u4e3a <code>REPLACE INTO</code> \u7684\u6807\u5fd7\u3002\u5982\u679c <code>replace_query=1</code>\uff0c\u5219\u66ff\u6362\u67e5\u8be2</li>\n<li><code>'on_duplicate_clause'</code> \u2014 \u5c06 <code>ON DUPLICATE KEY UPDATE 'on_duplicate_clause'</code> \u8868\u8fbe\u5f0f\u6dfb\u52a0\u5230 <code>INSERT</code> \u67e5\u8be2\u8bed\u53e5\u4e2d\u3002\u4f8b\u5982\uff1a<code>impression = VALUES(impression) + impression</code>\u3002\u5982\u679c\u9700\u8981\u6307\u5b9a <code>'on_duplicate_clause'</code>\uff0c\u5219\u9700\u8981\u8bbe\u7f6e <code>replace_query=0</code>\u3002\u5982\u679c\u540c\u65f6\u8bbe\u7f6e <code>replace_query = 1</code> \u548c <code>'on_duplicate_clause'</code>\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38\u3002</li>\n</ul>\n<p>\u6b64\u65f6\uff0c\u7b80\u5355\u7684 <code>WHERE</code> \u5b50\u53e5\uff08\u4f8b\u5982 <code>=, !=, &gt;, &gt;=, &lt;, &lt;=</code>\uff09\u662f\u5728 MySQL \u670d\u52a1\u5668\u4e0a\u6267\u884c\u3002</p>\n<p>\u5176\u4f59\u6761\u4ef6\u4ee5\u53ca <code>LIMIT</code> \u91c7\u6837\u7ea6\u675f\u8bed\u53e5\u4ec5\u5728\u5bf9MySQL\u7684\u67e5\u8be2\u5b8c\u6210\u540e\u624d\u5728ClickHouse\u4e2d\u6267\u884c\u3002</p>\n<p><code>MySQL</code> \u5f15\u64ce\u4e0d\u652f\u6301 <a href=\"#../../data_types/nullable/\">Nullable</a> \u6570\u636e\u7c7b\u578b\uff0c\u56e0\u6b64\uff0c\u5f53\u4eceMySQL\u8868\u4e2d\u8bfb\u53d6\u6570\u636e\u65f6\uff0c<code>NULL</code> \u5c06\u8f6c\u6362\u4e3a\u6307\u5b9a\u5217\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\uff08\u901a\u5e38\u4e3a0\u6216\u7a7a\u5b57\u7b26\u4e32\uff09\u3002</p>\n<p><a name=\"../../table_engines/jdbc/\"></a><a name=\"../../operations/table_engines/jdbc/\"></a><a name=\"../../../../../../table_engines/jdbc/\"></a><a name=\"../../../operations/table_engines/jdbc/\"></a><a name=\"operations/table_engines/jdbc/\"></a><a name=\"table_engines/jdbc/\"></a><a name=\"../../../table_engines/jdbc/\"></a><a name=\"jdbc/\"></a><a name=\"../table_engines/jdbc/\"></a><a name=\"../../../../operations/table_engines/jdbc/\"></a><a name=\"../../../../../operations/table_engines/jdbc/\"></a><a name=\"../operations/table_engines/jdbc/\"></a><a name=\"../../../../table_engines/jdbc/\"></a><a name=\"../../../../../table_engines/jdbc/\"></a></p>\n<h2 id=\"table_engine-jdbc\">JDBC<a class=\"headerlink\" href=\"#table_engine-jdbc\" title=\"Permanent link\">&para;<");
            
            document.write("/a></h2>\n<p>Allows ClickHouse to connect to external databases via <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"external nofollow noreferrer\">JDBC</a>.</p>\n<p>To implement the JDBC connection, ClickHouse uses the separate program <a href=\"https://github.com/alex-krash/clickhouse-jdbc-bridge\" rel=\"external nofollow noreferrer\">clickhouse-jdbc-bridge</a> that should run as a daemon.</p>\n<p>This engine supports the <a href=\"#../../data_types/nullable/\">Nullable</a> data type.</p>\n<h3 id=\"creating-a-table_2\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_2\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">JDBC</span><span class=\"p\">(</span><span class=\"n\">dbms_uri</span><span class=\"p\">,</span> <span class=\"n\">external_database</span><span class=\"p\">,</span> <span class=\"n\">external_table</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Engine Parameters</strong></p>\n<ul>\n<li>\n<p><code>dbms_uri</code> \u2014 URI of an external DBMS.</p>\n<p>Format: <code>jdbc:&lt;driver_name&gt;://&lt;host_name&gt;:&lt;port&gt;/?user=&lt;username&gt;&amp;password=&lt;password&gt;</code>.<br />\nExample for MySQL: <code>jdbc:mysql://localhost:3306/?user=root&amp;password=root</code>.</p>\n</li>\n<li>\n<p><code>external_database</code> \u2014 Database in an external DBMS.</p>\n</li>\n<li><code>external_table</code> \u2014 Name of the table in <code>external_database</code>.</li>\n</ul>\n<h3 id=\"usage-example_1\">Usage Example<a class=\"headerlink\" href=\"#usage-example_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Creating a table in MySQL server by connecting directly with it's console client:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+--------------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Creating a table in ClickHouse server and selecting data from it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">jdbc_table</span> <span class=\"n\">ENGINE</span> <span class=\"n\">JDBC</span><span class=\"p\">(</span><span class=\"s1\">&#39;jdbc:mysql://localhost:3306/?user=root&amp;password=root&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DESCRIBE</span> <span class=\"k\">TABLE</span> <span class=\"n\">jdbc_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500type\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500default_type\u2500\u252c\u2500default_expression\u2500\u2510\n\u2502 int_id             \u2502 Int32              \u2502              \u2502                    \u2502\n\u2502 int_nullable       \u2502 Nullable(Int32)    \u2502              \u2502                    \u2502\n\u2502 float              \u2502 Float32            \u2502              \u2502                    \u2502\n\u2502 float_nullable     \u2502 Nullable(Float32)  \u2502              \u2502                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">jdbc_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int_id\u2500\u252c\u2500int_nullable\u2500\u252c\u2500float\u2500\u252c\u2500float_nullable\u2500\u2510\n\u2502      1 \u2502         \u1d3a\u1d41\u1d38\u1d38 \u2502     2 \u2502           \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_1\">See Also<a class=\"headerlink\" href=\"#see-also_1\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#../../query_language/table_functions/jdbc/\">JDBC table function</a>.</li>\n</ul>\n<p><a name=\"operations/table_engines/odbc/\"></a><a name=\"odbc/\"></a><a name=\"../../../operations/table_engines/odbc/\"></a><a name=\"../../operations/table_engines/odbc/\"></a><a name=\"../../table_engines/odbc/\"></a><a name=\"../../../table_engines/odbc/\"></a><a name=\"../../../../../table_engines/odbc/\"></a><a name=\"../operations/table_engines/odbc/\"></a><a name=\"../../../../operations/table_engines/odbc/\"></a><a name=\"../table_engines/odbc/\"></a><a name=\"../../../../table_engines/odbc/\"></a><a name=\"table_engines/odbc/\"></a><a name=\"../../../../../../table_engines/odbc/\"></a><a name=\"../../../../../operations/table_engines/odbc/\"></a></p>\n<h2 id=\"table_engine-odbc\">ODBC<a class=\"headerlink\" href=\"#table_engine-odbc\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows ClickHouse to connect to external databases via <a href=\"https://en.wikipedia.org/wiki/Open_Database_Connectivity\" rel=\"external nofollow noreferrer\">ODBC</a>.</p>\n<p>To safely implement ODBC connections, ClickHouse uses a separate program <code>clickhouse-odbc-bridge</code>. If the ODBC driver is loaded directly from <code>clickhouse-server</code>, driver problems can crash the ClickHouse server. ClickHouse automatically starts <code>clickhouse-odbc-bridge</code> when it is required. The ODBC bridge program is installed from the same package as the <code>clickhouse-server</code>.</p>\n<p>This engine supports the <a href=\"#../../data_types/nullable/\">Nullable</a> data type.</p>\n<h3 id=\"creating-a-table_3\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_3\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ODBC</span><span class=\"p\">(</span><span class=\"n\">connection_settings</span><span class=\"p\">,</span> <span class=\"n\">external_database</span><span class=\"p\">,</span> <span class=\"n\">external_table</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>See a detailed description of the <a href=\"#create-table-query\">CREATE TABLE</a> query.</p>\n<p>The table structure can differ from the source table structure:</p>\n<ul>\n<li>Column names should be the same as in the source table, but you can use just some of these columns and in any order.</li>\n<li>Column types may differ from those in the source table. ClickHouse tries to <a href=\"#type_conversion_function-cast\">cast</a> values to the ClickHouse data types.</li>\n</ul>\n<p><strong>Engine Parameters</strong></p>\n<ul>\n<li><code>connection_settings</code> \u2014 Name of the section with connection settings in the <code>odbc.ini</code> file.</li>\n<li><code>external_database</code> \u2014 Name of a database in an external DBMS.</li>\n<li><code>external_table</code> \u2014 Name of a table in the <code>external_database</code>.</li>\n</ul>\n<h3 id=\"usage-example_2\">Usage Example<a class=\"headerlink\" href=\"#usage-example_2\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Retrieving data from the local MySQL installation via ODBC</strong></p>\n<p>This example is checked for Ubuntu Linux 18.04 and MySQL server 5.7.</p>\n<p>Ensure that unixODBC and MySQL Connector are installed.</p>\n<p>By default (if installed from packages), ClickHouse starts as user <code>clickhouse</code>. Thus, you need to create and configure this user in the MySQL server.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo mysql\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">CREATE</span> <span class=\"k\">USER</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"o\">@</span><span class=\"s1\">&#39;localhost&#39;</span> <span class=\"n\">IDENTIFIED</span> <span class=\"k\">BY</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"p\">;</span>\n<span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">GRANT</span> <span class=\"k\">ALL</span> <span class=\"k\">PRIVILEGES</span> <span class=\"k\">ON</span> <span class=\"o\">*</span><span class=\"p\">.</span><span class=\"o\">*</span> <span class=\"k\">TO</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"o\">@</span><span class=\"s1\">&#39;clickhouse&#39;</span> <span class=\"k\">WITH</span> <span class=\"k\">GRANT</span> <span class=\"k\">OPTION</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Then configure the connection in <code>/etc/odbc.ini</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat /etc/odbc.ini\n<span class=\"o\">[</span>mysqlconn<span class=\"o\">]</span>\n<span class=\"nv\">DRIVER</span> <span class=\"o\">=</span> /usr/local/lib/libmyodbc5w.so\n<span class=\"nv\">SERVER</span> <span class=\"o\">=</span> <span class=\"m\">127</span>.0.0.1\n<span class=\"nv\">PORT</span> <span class=\"o\">=</span> <span class=\"m\">3306</span>\n<span class=\"nv\">DATABASE</span> <spa");
            
            document.write("n class=\"o\">=</span> <span class=\"nb\">test</span>\n<span class=\"nv\">USERNAME</span> <span class=\"o\">=</span> clickhouse\n<span class=\"nv\">PASSWORD</span> <span class=\"o\">=</span> clickhouse\n</code></pre></div>\n\n\n<p>You can check the connection using the <code>isql</code> utility from the unixODBC installation.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ isql -v mysqlconn\n+---------------------------------------+\n<span class=\"p\">|</span> Connected!                            <span class=\"p\">|</span>\n<span class=\"p\">|</span>                                       <span class=\"p\">|</span>\n...\n</code></pre></div>\n\n\n<p>Table in MySQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+--------------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Table in ClickHouse, retrieving data from the MySQL table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">odbc_t</span>\n<span class=\"p\">(</span>\n    <span class=\"o\">`</span><span class=\"n\">int_id</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"n\">float_nullable</span><span class=\"o\">`</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ODBC</span><span class=\"p\">(</span><span class=\"s1\">&#39;DSN=mysqlconn&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">odbc_t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int_id\u2500\u252c\u2500float_nullable\u2500\u2510\n\u2502      1 \u2502           \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_2\">See Also<a class=\"headerlink\" href=\"#see-also_2\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#dicts-external_dicts_dict_sources-odbc\">ODBC external dictionaries</a></li>\n<li><a href=\"#../../query_language/table_functions/odbc/\">ODBC table function</a></li>\n</ul>\n<p><a name=\"../../../operations/table_engines/hdfs/\"></a><a name=\"../../../../table_engines/hdfs/\"></a><a name=\"../table_engines/hdfs/\"></a><a name=\"operations/table_engines/hdfs/\"></a><a name=\"../../../../../operations/table_engines/hdfs/\"></a><a name=\"hdfs/\"></a><a name=\"../../../../operations/table_engines/hdfs/\"></a><a name=\"../../table_engines/hdfs/\"></a><a name=\"../../../table_engines/hdfs/\"></a><a name=\"../../../../../../table_engines/hdfs/\"></a><a name=\"../operations/table_engines/hdfs/\"></a><a name=\"table_engines/hdfs/\"></a><a name=\"../../operations/table_engines/hdfs/\"></a><a name=\"../../../../../table_engines/hdfs/\"></a></p>\n<h2 id=\"table_engines-hdfs\">HDFS<a class=\"headerlink\" href=\"#table_engines-hdfs\" title=\"Permanent link\">&para;</a></h2>\n<p>This engine provides integration with <a href=\"https://en.wikipedia.org/wiki/Apache_Hadoop\" rel=\"external nofollow noreferrer\">Apache Hadoop</a> ecosystem by allowing to manage data on <a href=\"https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.htmll\" rel=\"external nofollow noreferrer\">HDFS</a>via ClickHouse. This engine is similar<br />\nto the <a href=\"#file/\">File</a> and <a href=\"#url/\">URL</a> engines, but provides Hadoop-specific features.</p>\n<h3 id=\"usage\">Usage<a class=\"headerlink\" href=\"#usage\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"n\">URI</span><span class=\"p\">,</span> <span class=\"n\">format</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The <code>URI</code> parameter is the whole file URI in HDFS.<br />\nThe <code>format</code> parameter specifies one of the available file formats. To perform<br />\n<code>SELECT</code> queries, the format must be supported for input, and to perform<br />\n<code>INSERT</code> queries -- for output. The available formats are listed in the<br />\n<a href=\"#formats\">Formats</a> section.<br />\nThe path part of <code>URI</code> may contain globs. In this case the table would be readonly.</p>\n<p><strong>Example:</strong></p>\n<p><strong>1.</strong> Set up the <code>hdfs_engine_table</code> table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hdfs_engine_table</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/other_storage&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>2.</strong> Fill file:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">hdfs_engine_table</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;three&#39;</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>3.</strong> Query the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">hdfs_engine_table</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u252c\u2500value\u2500\u2510\n\u2502 one  \u2502     1 \u2502\n\u2502 two  \u2502     2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"implementation-details\">Implementation Details<a class=\"headerlink\" href=\"#implementation-details\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Reads and writes can be parallel</li>\n<li>Not supported:<ul>\n<li><code>ALTER</code> and <code>SELECT...SAMPLE</code> operations.</li>\n<li>Indexes.</li>\n<li>Replication.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Globs in path</strong></p>\n<p>Multiple path components can have globs. For being processed file should exists and matches to the whole path pattern. Listing of files determines during <code>SELECT</code> (not at <code>CREATE</code> moment).</p>\n<ul>\n<li><code>*</code> \u2014 Substitutes any number of any characters except <code>/</code> including empty string.</li>\n<li><code>?</code> \u2014 Substitutes any single character.</li>\n<li><code>{some_string,another_string,yet_another_one}</code> \u2014 Substitutes any of strings <code>'some_string', 'another_string', 'yet_another_one'</code>.</li>\n<li><code>{N..M}</code> \u2014 Substitutes any number in range from N to M including both borders.</li>\n</ul>\n<p>Constructions with <code>{}</code> are similar to the <a href=\"#../../query_language/table_functions/remote/\">remote</a> table function.</p>\n<p><strong>Example</strong></p>\n<ol>\n<li>Suppose we have several files in TSV format with the following URIs on HDFS:</li>\n</ol>\n<ul>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_1'</li>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_2'</li>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_3'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_1'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_2'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_3'</li>\n</ul>\n<ol start=\"2\">\n<li>There are several ways to make a table consisting of all six files:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">table_with_range</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/some_file_{1..3}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Another way:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">table_with_question_mark</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/some_file_?&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Table consists of all the files in both directories (all files should satisfy format and schema described in query):</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">table_with_asterisk</span> <span class=\"p\">(</span><span c");
            
            document.write("lass=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/*&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>If the listing of files contains number ranges with leading zeros, use the construction with braces for each digit separately or use <code>?</code>.</p>\n</div>\n<p><strong>Example</strong></p>\n<p>Create table with files named <code>file000</code>, <code>file001</code>, ... , <code>file999</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">CREARE</span> <span class=\"k\">TABLE</span> <span class=\"n\">big_table</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/big_dir/file{0..9}{0..9}{0..9}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../../table_engines/distributed/\"></a><a name=\"../../../../../../table_engines/distributed/\"></a><a name=\"table_engines/distributed/\"></a><a name=\"../../../table_engines/distributed/\"></a><a name=\"../operations/table_engines/distributed/\"></a><a name=\"../../../../operations/table_engines/distributed/\"></a><a name=\"../../../../../operations/table_engines/distributed/\"></a><a name=\"../table_engines/distributed/\"></a><a name=\"../../../../table_engines/distributed/\"></a><a name=\"operations/table_engines/distributed/\"></a><a name=\"../../table_engines/distributed/\"></a><a name=\"../../../operations/table_engines/distributed/\"></a><a name=\"distributed/\"></a><a name=\"../../operations/table_engines/distributed/\"></a></p>\n<h2 id=\"distributed\">Distributed<a class=\"headerlink\" href=\"#distributed\" title=\"Permanent link\">&para;</a></h2>\n<p><strong>\u5206\u5e03\u5f0f\u5f15\u64ce\u672c\u8eab\u4e0d\u5b58\u50a8\u6570\u636e</strong>, \u4f46\u53ef\u4ee5\u5728\u591a\u4e2a\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u5206\u5e03\u5f0f\u67e5\u8be2\u3002<br />\n\u8bfb\u662f\u81ea\u52a8\u5e76\u884c\u7684\u3002\u8bfb\u53d6\u65f6\uff0c\u8fdc\u7a0b\u670d\u52a1\u5668\u8868\u7684\u7d22\u5f15\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u4f1a\u88ab\u4f7f\u7528\u3002<br />\n\u5206\u5e03\u5f0f\u5f15\u64ce\u53c2\u6570\uff1a\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u96c6\u7fa4\u540d\uff0c\u8fdc\u7a0b\u6570\u636e\u5e93\u540d\uff0c\u8fdc\u7a0b\u8868\u540d\uff0c\u6570\u636e\u5206\u7247\u952e\uff08\u53ef\u9009\uff09\u3002<br />\n\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Distributed(logs, default, hits[, sharding_key])</span>\n</code></pre></div>\n\n\n<p>\u5c06\u4f1a\u4ece\u4f4d\u4e8e\u201clogs\u201d\u96c6\u7fa4\u4e2d default.hits \u8868\u6240\u6709\u670d\u52a1\u5668\u4e0a\u8bfb\u53d6\u6570\u636e\u3002<br />\n\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0d\u4ec5\u7528\u4e8e\u8bfb\u53d6\u6570\u636e\uff0c\u8fd8\u4f1a\u5bf9\u5c3d\u53ef\u80fd\u6570\u636e\u505a\u90e8\u5206\u5904\u7406\u3002<br />\n\u4f8b\u5982\uff0c\u5bf9\u4e8e\u4f7f\u7528 GROUP BY \u7684\u67e5\u8be2\uff0c\u6570\u636e\u9996\u5148\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u805a\u5408\uff0c\u4e4b\u540e\u8fd4\u56de\u805a\u5408\u51fd\u6570\u7684\u4e2d\u95f4\u72b6\u6001\u7ed9\u67e5\u8be2\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u3002\u518d\u5728\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u4e0a\u8fdb\u4e00\u6b65\u6c47\u603b\u6570\u636e\u3002</p>\n<p>\u6570\u636e\u5e93\u540d\u53c2\u6570\u9664\u4e86\u7528\u6570\u636e\u5e93\u540d\u4e4b\u5916\uff0c\u4e5f\u53ef\u7528\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u5e38\u91cf\u8868\u8fbe\u5f0f\u3002\u4f8b\u5982\uff1acurrentDatabase()\u3002</p>\n<p>logs \u2013 \u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u96c6\u7fa4\u540d\u79f0\u3002</p>\n<p>\u96c6\u7fa4\u793a\u4f8b\u914d\u7f6e\u5982\u4e0b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;remote_servers&gt;</span>\n    <span class=\"nt\">&lt;logs&gt;</span>\n        <span class=\"nt\">&lt;shard&gt;</span>\n            <span class=\"c\">&lt;!-- Optional. Shard weight when writing data. Default: 1. --&gt;</span>\n            <span class=\"nt\">&lt;weight&gt;</span>1<span class=\"nt\">&lt;/weight&gt;</span>\n            <span class=\"c\">&lt;!-- Optional. Whether to write data to just one of the replicas. Default: false (write data to all replicas). --&gt;</span>\n            <span class=\"nt\">&lt;internal_replication&gt;</span>false<span class=\"nt\">&lt;/internal_replication&gt;</span>\n            <span class=\"nt\">&lt;replica&gt;</span>\n                <span class=\"nt\">&lt;host&gt;</span>example01-01-1<span class=\"nt\">&lt;/host&gt;</span>\n                <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n            <span class=\"nt\">&lt;/replica&gt;</span>\n            <span class=\"nt\">&lt;replica&gt;</span>\n                <span class=\"nt\">&lt;host&gt;</span>example01-01-2<span class=\"nt\">&lt;/host&gt;</span>\n                <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n            <span class=\"nt\">&lt;/replica&gt;</span>\n        <span class=\"nt\">&lt;/shard&gt;</span>\n        <span class=\"nt\">&lt;shard&gt;</span>\n            <span class=\"nt\">&lt;weight&gt;</span>2<span class=\"nt\">&lt;/weight&gt;</span>\n            <span class=\"nt\">&lt;internal_replication&gt;</span>false<span class=\"nt\">&lt;/internal_replication&gt;</span>\n            <span class=\"nt\">&lt;replica&gt;</span>\n                <span class=\"nt\">&lt;host&gt;</span>example01-02-1<span class=\"nt\">&lt;/host&gt;</span>\n                <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n            <span class=\"nt\">&lt;/replica&gt;</span>\n            <span class=\"nt\">&lt;replica&gt;</span>\n                <span class=\"nt\">&lt;host&gt;</span>example01-02-2<span class=\"nt\">&lt;/host&gt;</span>\n                <span class=\"nt\">&lt;secure&gt;</span>1<span class=\"nt\">&lt;/secure&gt;</span>\n                <span class=\"nt\">&lt;port&gt;</span>9440<span class=\"nt\">&lt;/port&gt;</span>\n            <span class=\"nt\">&lt;/replica&gt;</span>\n        <span class=\"nt\">&lt;/shard&gt;</span>\n    <span class=\"nt\">&lt;/logs&gt;</span>\n<span class=\"nt\">&lt;/remote_servers&gt;</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u91cc\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a\u2018logs\u2019\u7684\u96c6\u7fa4\uff0c\u5b83\u7531\u4e24\u4e2a\u5206\u7247\u7ec4\u6210\uff0c\u6bcf\u4e2a\u5206\u7247\u5305\u542b\u4e24\u4e2a\u526f\u672c\u3002<br />\n\u5206\u7247\u662f\u6307\u5305\u542b\u6570\u636e\u4e0d\u540c\u90e8\u5206\u7684\u670d\u52a1\u5668\uff08\u8981\u8bfb\u53d6\u6240\u6709\u6570\u636e\uff0c\u5fc5\u987b\u8bbf\u95ee\u6240\u6709\u5206\u7247\uff09\u3002<br />\n\u526f\u672c\u662f\u5b58\u50a8\u590d\u5236\u6570\u636e\u7684\u670d\u52a1\u5668\uff08\u8981\u8bfb\u53d6\u6240\u6709\u6570\u636e\uff0c\u8bbf\u95ee\u4efb\u4e00\u526f\u672c\u4e0a\u7684\u6570\u636e\u5373\u53ef\uff09\u3002</p>\n<p>\u96c6\u7fa4\u540d\u79f0\u4e0d\u80fd\u5305\u542b\u70b9\u53f7\u3002</p>\n<dl>\n<dt>\u6bcf\u4e2a\u670d\u52a1\u5668\u9700\u8981\u6307\u5b9a <code>host</code>\uff0c<code>port</code>\uff0c\u548c\u53ef\u9009\u7684 <code>user</code>\uff0c<code>password</code>\uff0c<code>secure</code>\uff0c<code>compression</code> \u7684\u53c2\u6570\uff1a</dt>\n<dd>\n<ul>\n<li><code>host</code> \u2013 \u8fdc\u7a0b\u670d\u52a1\u5668\u5730\u5740\u3002\u53ef\u4ee5\u57df\u540d\u3001IPv4\u6216IPv6\u3002\u5982\u679c\u6307\u5b9a\u57df\u540d\uff0c\u5219\u670d\u52a1\u5728\u542f\u52a8\u65f6\u53d1\u8d77\u4e00\u4e2a DNS \u8bf7\u6c42\uff0c\u5e76\u4e14\u8bf7\u6c42\u7ed3\u679c\u4f1a\u5728\u670d\u52a1\u5668\u8fd0\u884c\u671f\u95f4\u4e00\u76f4\u88ab\u8bb0\u5f55\u3002\u5982\u679c DNS \u8bf7\u6c42\u5931\u8d25\uff0c\u5219\u670d\u52a1\u4e0d\u4f1a\u542f\u52a8\u3002\u5982\u679c\u4f60\u4fee\u6539\u4e86 DNS \u8bb0\u5f55\uff0c\u5219\u9700\u8981\u91cd\u542f\u670d\u52a1\u3002</li>\n<li><code>port</code> \u2013 \u6d88\u606f\u4f20\u9012\u7684 TCP \u7aef\u53e3\uff08\u300ctcp_port\u300d\u914d\u7f6e\u901a\u5e38\u8bbe\u4e3a 9000\uff09\u3002\u4e0d\u8981\u8ddf http_port \u6df7\u6dc6\u3002</li>\n<li><code>user</code> \u2013 \u7528\u4e8e\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u7528\u6237\u540d\u3002\u9ed8\u8ba4\u503c\uff1adefault\u3002\u8be5\u7528\u6237\u5fc5\u987b\u6709\u6743\u9650\u8bbf\u95ee\u8be5\u8fdc\u7a0b\u670d\u52a1\u5668\u3002\u8bbf\u95ee\u6743\u9650\u914d\u7f6e\u5728 users.xml \u6587\u4ef6\u4e2d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b\u201c\u8bbf\u95ee\u6743\u9650\u201d\u90e8\u5206\u3002</li>\n<li><code>password</code> \u2013 \u7528\u4e8e\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u5bc6\u7801\u3002\u9ed8\u8ba4\u503c\uff1a\u7a7a\u5b57\u7b26\u4e32\u3002</li>\n<li><code>secure</code> \u2013 \u662f\u5426\u4f7f\u7528ssl\u8fdb\u884c\u8fde\u63a5\uff0c\u8bbe\u4e3atrue\u65f6\uff0c\u901a\u5e38\u4e5f\u5e94\u8be5\u8bbe\u7f6e <code>port</code> = 9440\u3002\u670d\u52a1\u5668\u4e5f\u8981\u76d1\u542c <tcp_port_secure>9440</tcp_port_secure> \u5e76\u6709\u6b63\u786e\u7684\u8bc1\u4e66\u3002</li>\n<li><code>compression</code> - \u662f\u5426\u4f7f\u7528\u6570\u636e\u538b\u7f29\u3002\u9ed8\u8ba4\u503c\uff1atrue\u3002</li>\n</ul>\n</dd>\n</dl>\n<p>\u914d\u7f6e\u4e86\u526f\u672c\uff0c\u8bfb\u53d6\u64cd\u4f5c\u4f1a\u4ece\u6bcf\u4e2a\u5206\u7247\u91cc\u9009\u62e9\u4e00\u4e2a\u53ef\u7528\u7684\u526f\u672c\u3002\u53ef\u914d\u7f6e\u8d1f\u8f7d\u5e73\u8861\u7b97\u6cd5\uff08\u6311\u9009\u526f\u672c\u7684\u65b9\u5f0f\uff09 - \u8bf7\u53c2\u9605\u201cload_balancing\u201d\u8bbe\u7f6e\u3002<br />\n\u5982\u679c\u8ddf\u670d\u52a1\u5668\u7684\u8fde\u63a5\u4e0d\u53ef\u7528\uff0c\u5219\u5728\u5c1d\u8bd5\u77ed\u8d85\u65f6\u7684\u91cd\u8fde\u3002\u5982\u679c\u91cd\u8fde\u5931\u8d25\uff0c\u5219\u9009\u62e9\u4e0b\u4e00\u4e2a\u526f\u672c\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002\u5982\u679c\u8ddf\u6240\u6709\u526f\u672c\u7684\u8fde\u63a5\u5c1d\u8bd5\u90fd\u5931\u8d25\uff0c\u5219\u5c1d\u8bd5\u7528\u76f8\u540c\u7684\u65b9\u5f0f\u518d\u91cd\u590d\u51e0\u6b21\u3002<br />\n\u8be5\u673a\u5236\u6709\u5229\u4e8e\u7cfb\u7edf\u53ef\u7528\u6027\uff0c\u4f46\u4e0d\u4fdd\u8bc1\u5b8c\u5168\u5bb9\u9519\uff1a\u5982\u6709\u8fdc\u7a0b\u670d\u52a1\u5668\u80fd\u591f\u63a5\u53d7\u8fde\u63a5\uff0c\u4f46\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u6216\u72b6\u51b5\u4e0d\u4f73\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a\uff08\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u64cd\u4f5c\u66f4\u5e94\u8be5\u79f0\u4e3a\u8fdc\u7a0b\u67e5\u8be2\uff0c\u800c\u4e0d\u662f\u5206\u5e03\u5f0f\u67e5\u8be2\uff09\u6216\u4efb\u610f\u591a\u4e2a\u5206\u7247\u3002\u5728\u6bcf\u4e2a\u5206\u7247\u4e2d\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a\u6216\u4efb\u610f\u591a\u4e2a\u526f\u672c\u3002\u4e0d\u540c\u5206\u7247\u53ef\u914d\u7f6e\u4e0d\u540c\u6570\u91cf\u7684\u526f\u672c\u3002</p>\n<p>\u53ef\u4ee5\u5728\u914d\u7f6e\u4e2d\u914d\u7f6e\u4efb\u610f\u6570\u91cf\u7684\u96c6\u7fa4\u3002</p>\n<p>\u8981\u67e5\u770b\u96c6\u7fa4\uff0c\u53ef\u4f7f\u7528\u201csystem.clusters\u201d\u8868\u3002</p>\n<p>\u901a\u8fc7\u5206\u5e03\u5f0f\u5f15\u64ce\u53ef\u4ee5\u50cf\u4f7f\u7528\u672c\u5730\u670d\u52a1\u5668\u4e00\u6837\u4f7f\u7528\u96c6\u7fa4\u3002\u4f46\u662f\uff0c\u96c6\u7fa4\u4e0d\u662f\u81ea\u52a8\u6269\u5c55\u7684\uff1a\u4f60\u5fc5\u987b\u7f16\u5199\u96c6\u7fa4\u914d\u7f6e\u5230\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u4e2d\uff08\u6700\u597d\uff0c\u7ed9\u6240\u6709\u96c6\u7fa4\u7684\u670d\u52a1\u5668\u5199\u4e0a\u5b8c\u6574\u914d\u7f6e\uff09\u3002</p>\n<p>\u4e0d\u652f\u6301\u7528\u5206\u5e03\u5f0f\u8868\u67e5\u8be2\u522b\u7684\u5206\u5e03\u5f0f\u8868\uff08\u9664\u975e\u8be5\u8868\u53ea\u6709\u4e00\u4e2a\u5206\u7247\uff09\u3002\u6216\u8005\u8bf4\uff0c\u8981\u7528\u5206\u5e03\u8868\u67e5\u67e5\u8be2\u201c\u6700\u7ec8\u201d\u7684\u6570\u636e\u8868\u3002</p>\n<p>\u5206\u5e03\u5f0f\u5f15\u64ce\u9700\u8981\u5c06\u96c6\u7fa4\u4fe1\u606f\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u96c6\u7fa4\u4fe1\u606f\u4f1a\u5373\u65f6\u66f4\u65b0\uff0c\u65e0\u9700\u91cd\u542f\u670d\u52a1\u5668\u3002\u5982\u679c\u4f60\u6bcf\u6b21\u662f\u8981\u5411\u4e0d\u786e\u5b9a\u7684\u4e00\u7ec4\u5206\u7247\u548c\u526f\u672c\u53d1\u9001\u67e5\u8be2\uff0c\u5219\u4e0d\u9002\u5408\u521b\u5efa\u5206\u5e03\u5f0f\u8868 - \u800c\u5e94\u8be5\u4f7f\u7528\u201c\u8fdc\u7a0b\u201d\u8868\u51fd\u6570\u3002 \u8bf7\u53c2\u9605\u201c\u8868\u51fd\u6570\u201d\u90e8\u5206\u3002</p>\n<p>\u5411\u96c6\u7fa4\u5199\u6570\u636e\u7684\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a</p>\n<p>\u4e00\uff0c\u81ea\u5df2\u6307\u5b9a\u8981\u5c06\u54ea\u4e9b\u6570\u636e\u5199\u5165\u54ea\u4e9b\u670d\u52a1\u5668\uff0c\u5e76\u76f4\u63a5\u5728\u6bcf\u4e2a\u5206\u7247\u4e0a\u6267\u884c\u5199\u5165\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5728\u5206\u5e03\u5f0f\u8868\u4e0a\u201c\u67e5\u8be2\u201d\uff0c\u5728\u6570\u636e\u8868\u4e0a INSERT\u3002<br />\n\u8fd9\u662f\u6700\u7075\u6d3b\u7684\u89e3\u51b3\u65b9\u6848 \u2013 \u4f60\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u5206\u7247\u65b9\u6848\uff0c\u5bf9\u4e8e\u590d\u6742\u4e1a\u52a1\u7279\u6027\u7684\u9700\u6c42\uff0c\u8fd9\u53ef\u80fd\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002<br />\n\u8fd9\u4e5f\u662f\u6700\u4f73\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u4e3a\u6570\u636e\u53ef\u4ee5\u5b8c\u5168\u72ec\u7acb\u5730\u5199\u5165\u4e0d\u540c\u7684\u5206\u7247\u3002</p>\n<p>\u4e8c\uff0c\u5728\u5206\u5e03\u5f0f\u8868\u4e0a\u6267\u884c INSERT\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5206\u5e03\u5f0f\u8868\u4f1a\u8de8\u670d\u52a1\u5668\u5206\u53d1\u63d2\u5165\u6570\u636e\u3002<br />\n\u4e3a\u4e86\u5199\u5165\u5206\u5e03\u5f0f\u8868\uff0c\u5fc5\u987b\u8981\u914d\u7f6e\u5206\u7247\u952e\uff08\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff09\u3002\u5f53\u7136\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u5206\u7247\uff0c\u5219\u5199\u64cd\u4f5c\u5728\u6ca1\u6709\u5206\u7247\u952e\u7684\u60c5\u51b5\u4e0b\u4e5f\u80fd\u5de5\u4f5c\uff0c\u56e0\u4e3a\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5206\u7247\u952e\u6ca1\u6709\u610f\u4e49\u3002</p>\n<p>\u6bcf\u4e2a\u5206\u7247\u90fd\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u6743\u91cd\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6743\u91cd\u7b49\u4e8e1\u3002\u6570\u636e\u4f9d\u636e\u5206\u7247\u6743\u91cd\u6309\u6bd4\u4f8b\u5206\u53d1\u5230\u5206\u7247\u4e0a\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6709\u4e24\u4e2a\u5206\u7247\uff0c\u7b2c\u4e00\u4e2a\u5206\u7247\u7684\u6743\u91cd\u662f9\uff0c\u800c\u7b2c\u4e8c\u4e2a\u5206\u7247\u7684\u6743\u91cd\u662f10\uff0c\u5219\u53d1\u9001 9 / 19 \u7684\u884c\u5230\u7b2c\u4e00\u4e2a\u5206\u7247\uff0c 10 / 19 \u7684\u884c\u5230\u7b2c\u4e8c\u4e2a\u5206\u7247\u3002</p>\n<p>\u5206\u7247\u53ef\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49 'internal_replication' \u53c2\u6570\u3002</p>\n<p>\u6b64\u53c2\u6570\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u65f6\uff0c\u5199\u64cd\u4f5c\u53ea\u9009\u4e00\u4e2a\u6b63\u5e38\u7684\u526f\u672c\u5199\u5165\u6570\u636e\u3002\u5982\u679c\u5206\u5e03\u5f0f\u8868\u7684\u5b50\u8868\u662f\u590d\u5236\u8868(*ReplicaMergeTree)\uff0c\u8bf7\u4f7f\u7528\u6b64\u65b9\u6848\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8fd9\u5176\u5b9e\u662f\u628a\u6570\u636e\u7684\u590d\u5236\u5de5\u4f5c\u4ea4\u7ed9\u5b9e\u9645\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u8868\u672c\u8eab\u800c\u4e0d\u662f\u5206\u5e03\u5f0f\u8868\u3002</p>\n<p>\u82e5\u6b64\u53c2\u6570\u8bbe\u7f6e\u4e3a\u201cfalse\u201d\uff08\u9ed8\u8ba4\u503c\uff09\uff0c\u5199\u64cd\u4f5c\u4f1a\u5c06\u6570\u636e\u5199\u5165\u6240\u6709\u526f\u672c\u3002\u5b9e\u8d28\u4e0a\uff0c\u8fd9\u610f\u5473\u7740\u8981\u5206\u5e03\u5f0f\u8868\u672c\u8eab\u6765\u590d\u5236\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u5982\u4f7f\u7528\u590d\u5236\u8868\u7684\u597d\uff0c\u56e0\u4e3a\u4e0d\u4f1a\u68c0\u67e5\u526f\u672c\u7684\u4e00\u81f4\u6027\uff0c\u5e76\u4e14\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u526f\u672c\u6570\u636e\u53ef\u80fd\u4f1a\u6709\u4e9b\u4e0d\u4e00\u6837\u3002</p>\n<p>\u9009\u62e9\u5c06\u4e00\u884c\u6570\u636e\u53d1\u9001\u5230\u54ea\u4e2a\u5206\u7247\u7684\u65b9\u6cd5\u662f\uff0c\u9996\u5148\u8ba1\u7b97\u5206\u7247\u8868\u8fbe\u5f0f\uff0c\u7136\u540e\u5c06\u8fd9\u4e2a\u8ba1\u7b97\u7ed3\u679c\u9664\u4ee5\u6240\u6709\u5206\u7247\u7684\u6743\u91cd\u603b\u548c\u5f97\u5230\u4f59\u6570\u3002\u8be5\u884c\u4f1a\u53d1\u9001\u5230\u90a3\u4e2a\u5305\u542b\u8be5\u4f59\u6570\u7684\u4ece'prev_weight'\u5230'prev_weights + weight'\u7684\u534a\u95ed\u534a\u5f00\u533a\u95f4\u5bf9\u5e94\u7684\u5206\u7247\u4e0a\uff0c\u5176\u4e2d 'prev_weights' \u662f\u8be5\u5206\u7247\u524d\u9762\u7684\u6240\u6709\u5206\u7247\u7684\u6743\u91cd\u548c\uff0c'weight' \u662f\u8be5\u5206\u7247\u7684\u6743\u91cd\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6709\u4e24\u4e2a\u5206\u7247\uff0c\u7b2c\u4e00\u4e2a\u5206\u7247\u6743\u91cd\u4e3a9\uff0c\u800c\u7b2c\u4e8c\u4e2a\u5206\u7247\u6743\u91cd\u4e3a10\uff0c\u5219\u4f59\u6570\u5728 [0,9) \u4e2d\u7684\u884c\u53d1\u7ed9\u7b2c\u4e00\u4e2a\u5206\u7247\uff0c\u4f59\u6570\u5728 [9,19) \u4e2d\u7684\u884c\u53d1\u7ed9\u7b2c\u4e8c\u4e2a\u5206\u7247\u3002</p>\n<p>\u5206\u7247\u8868\u8fbe\u5f0f\u53ef\u4ee5\u662f\u7531\u5e38\u91cf\u548c\u8868\u5217\u7ec4\u6210\u7684\u4efb\u4f55\u8fd4\u56de\u6574\u6570\u8868\u8fbe\u5f0f\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f 'rand()' \u6765\u968f\u673a\u5206\u914d\u6570\u636e\uff0c\u6216\u8005\u4f7f\u7528 'UserID' \u6765\u6309\u7528\u6237 ID \u7684\u4f59\u6570\u5206\u5e03\uff08\u76f8\u540c\u7528\u6237\u7684\u6570\u636e\u5c06\u5206\u914d\u5230\u5355\u4e2a\u5206\u7247\u4e0a\uff0c\u8fd9\u53ef\u964d\u4f4e\u5e26\u6709\u7528\u6237\u4fe1\u606f\u7684 IN \u548c JOIN \u7684\u8bed\u53e5\u8fd0\u884c\u7684\u590d\u6742\u5ea6\uff09\u3002\u5982\u679c\u8be5\u5217\u6570\u636e\u5206\u5e03\u4e0d\u591f\u5747\u5300\uff0c\u53ef\u4ee5\u5c06\u5176\u5305\u88c5\u5728\u6563\u5217\u51fd\u6570\u4e2d\uff1aintHash64(UserID)\u3002</p>\n<p>\u8fd9\u79cd\u7b80\u5355\u7684\u7528\u4f59\u6570\u6765\u9009\u62e9\u5206\u7247\u7684\u65b9\u6848\u662f\u6709\u5c40\u9650\u7684\uff0c\u5e76\u4e0d\u603b\u9002\u7528\u3002\u5b83\u9002\u7528\u4e8e\u4e2d\u578b\u548c\u5927\u578b\u6570\u636e\uff08\u6570\u5341\u53f0\u670d\u52a1\u5668\uff09\u7684\u573a\u666f\uff0c\u4f46\u4e0d\u9002\u7528\u4e8e\u5de8\u91cf\u6570\u636e\uff08\u6570\u767e\u53f0\u6216\u66f4\u591a\u670d\u52a1\u5668\uff09\u7684\u573a\u666f\u3002\u540e\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u6839\u636e\u4e1a\u52a1\u7279\u6027\u9700\u6c42\u8003\u8651\u7684\u5206\u7247\u65b9\u6848\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u7528\u5206\u5e03\u5f0f\u8868\u7684\u591a\u5206\u7247\u3002</p>\n<p>SELECT \u67e5\u8be2\u4f1a\u88ab\u53d1\u9001\u5230\u6240\u6709\u5206\u7247\uff0c\u5e76\u4e14\u65e0\u8bba\u6570\u636e\u5728\u5206\u7247\u4e2d\u5982\u4f55\u5206\u5e03\uff08\u5373\u4f7f\u6570\u636e\u5b8c\u5168\u968f\u673a\u5206\u5e03\uff09\u90fd\u53ef\u6b63\u5e38\u5de5\u4f5c\u3002\u6dfb\u52a0\u65b0\u5206\u7247\u65f6\uff0c\u4e0d\u5fc5\u5c06\u65e7\u6570\u636e\u4f20\u8f93\u5230\u8be5\u5206\u7247\u3002\u4f60\u53ef\u4ee5\u7ed9\u65b0\u5206\u7247\u5206\u914d\u5927\u6743\u91cd\u7136\u540e\u5199\u65b0\u6570\u636e - \u6570\u636e\u53ef\u80fd\u4f1a\u7a0d\u5206\u5e03\u4e0d\u5747\uff0c\u4f46\u67e5\u8be2\u4f1a\u6b63\u786e\u9ad8\u6548\u5730\u8fd0\u884c\u3002</p>\n<p>\u4e0b\u9762\u7684\u60c5\u51b5\uff0c\u4f60\u9700\u8981\u5173\u6ce8\u5206\u7247\u65b9\u6848\uff1a</p>\n<ul>\n<li>\u4f7f\u7528\u9700\u8981\u7279\u5b9a\u952e\u8fde\u63a5\u6570\u636e\uff08 IN \u6216 JOIN \uff09\u7684\u67e5\u8be2\u3002\u5982\u679c\u6570\u636e\u662f\u7528\u8be5\u952e\u8fdb\u884c\u5206\u7247\uff0c\u5219\u5e94\u4f7f\u7528\u672c\u5730 IN \u6216 JOIN \u800c\u4e0d\u662f GLOBAL IN \u6216 GLOBAL JOIN\uff0c\u8fd9\u6837\u6548\u7387\u66f4\u9ad8\u3002</li>\n<li>\u4f7f\u7528\u5927\u91cf\u670d\u52a1\u5668\uff08\u4e0a\u767e\u6216\u66f4\u591a\uff09\uff0c\u4f46\u6709\u5927\u91cf\u5c0f\u67e5\u8be2\uff08\u4e2a\u522b\u5ba2\u6237\u7684\u67e5\u8be2 - \u7f51\u7ad9\uff0c\u5e7f\u544a\u5546\u6216\u5408\u4f5c\u4f19\u4f34\uff09\u3002\u4e3a\u4e86\u4f7f\u5c0f\u67e5\u8be2\u4e0d\u5f71\u54cd\u6574\u4e2a\u96c6\u7fa4\uff0c\u8ba9\u5355\u4e2a\u5ba2\u6237\u7684\u6570\u636e\u5904\u4e8e\u5355\u4e2a\u5206\u7247\u4e0a\u662f\u6709\u610f\u4e49\u7684\u3002\u6216\u8005\uff0c\u6b63\u5982\u6211\u4eec\u5728 Yandex.Metrica \u4e2d\u6240\u505a\u7684\u90a3\u6837\uff0c\u4f60\u53ef\u4ee5\u914d\u7f6e\u4e24\u7ea7\u5206\u7247\uff1a\u5c06\u6574\u4e2a\u96c6\u7fa4\u5212\u5206\u4e3a\u201c\u5c42\u201d\uff0c\u4e00\u4e2a\u5c42\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u5206\u7247\u3002\u5355\u4e2a\u5ba2\u6237\u7684\u6570\u636e\u4f4d\u4e8e\u5355\u4e2a\u5c42\u4e0a\uff0c\u6839\u636e\u9700\u8981\u5c06\u5206\u7247\u6dfb\u52a0\u5230\u5c42\u4e2d\uff0c\u5c42\u4e2d\u7684\u6570\u636e\u968f\u673a\u5206\u5e03\u3002\u7136\u540e\u7ed9\u6bcf\u5c42\u521b\u5efa\u5206\u5e03\u5f0f\u8868\uff0c\u518d\u521b\u5efa\u4e00\u4e2a\u5168\u5c40\u7684\u5206\u5e03\u5f0f\u8868\u7528\u4e8e\u5168\u5c40\u7684\u67e5\u8be2\u3002</li>\n</ul>\n<p>\u6570\u636e\u662f\u5f02\u6b65\u5199\u5165\u7684\u3002\u5bf9\u4e8e\u5206\u5e03\u5f0f\u8868\u7684 INSERT\uff0c\u6570\u636e\u5757\u53ea\u5199\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u3002\u4e4b\u540e\u4f1a\u5c3d\u5feb\u5730\u5728\u540e\u53f0\u53d1\u9001\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u8868\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u5217\u8868\uff08\u7b49\u5f85\u53d1\u9001\u7684\u6570\u636e\uff09\u6765\u68c0\u67e5\u6570\u636e\u662f\u5426\u6210\u529f\u53d1\u9001\uff1a/var/lib/clickhouse/data/database/table/ \u3002</p>\n<p>\u5982\u679c\u5728 INSERT \u5230\u5206\u5e03\u5f0f\u8868\u65f6\u670d\u52a1\u5668\u8282\u70b9\u4e22\u5931\u6216\u91cd\u542f\uff08\u5982\uff0c\u8bbe\u5907\u6545\u969c\uff09\uff0c\u5219\u63d2\u5165\u7684\u6570\u636e\u53ef\u80fd\u4f1a\u4e22\u5931\u3002\u5982\u679c\u5728\u8868\u76ee\u5f55\u4e2d\u68c0\u6d4b\u5230\u635f\u574f\u7684\u6570\u636e\u5206\u7247\uff0c\u5219\u4f1a\u5c06\u5176\u8f6c\u79fb\u5230\u201cbroken\u201d\u5b50\u76ee\u5f55\uff0c\u5e76\u4e0d\u518d\u4f7f\u7528\u3002</p>\n<p>\u542f\u7528 max_parallel_replicas \u9009\u9879\u540e\uff0c\u4f1a\u5728\u5206\u8868\u7684\u6240\u6709\u526f\u672c\u4e0a\u5e76\u884c\u67e5\u8be2\u5904\u7406\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u201c\u8bbe\u7f6e\uff0cmax_parallel_replicas\u201d\u90e8\u5206\u3002</p>\n<p><a name=\"../../../../../table_engines/external_data/\"></a><a name=\"../../../../../operations/table_engines/external_data/\"></a><a name=\"../table_engines/external_data/\"></a><a name=\"external_data/\"></a><a name=\"../../../operations/table_engines/external_data/\"></a><a name=\"../../operations/table_engines/external_data/\"></a><a name=\"../../../../table_engines/external_data/\"></a><a name=\"../../table_engines/external_data/\"></a><a name=\"../operations/table_engines/external_data/\"></a><a name=\"../../../table_engines/external_data/\"></a><a name=\"../../../../../../table_engines/external_data/\"></a><a name=\"operations/table_engines/external_data/\"></a><a name=\"table_engines/external_data/\"></a><a name=\"../../../../operations/table_engines/external_data/\"></a></p>\n<h2 id=\"external-data-for-query-processing\">External Data for Query Processing<a class=\"headerlink\" href=\"#external-data-for-query-processing\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse \u5141\u8bb8\u5411\u670d\u52a1\u5668\u53d1\u9001\u5904\u7406\u67e5\u8be2\u6240\u9700\u7684\u6570\u636e\u4ee5\u53ca SELECT \u67e5\u8be2\u3002\u8fd9\u4e9b\u6570\u636e\u653e\u5728\u4e00\u4e2a\u4e34\u65f6\u8868\u4e2d\uff08\u8bf7\u53c2\u9605 \"\u4e34\u65f6\u8868\" \u4e00\u8282\uff09\uff0c\u53ef\u4ee5\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528\uff08\u4f8b\u5982\uff0c\u5728 IN \u64cd\u4f5c\u7b26\u4e2d\uff09\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u6709\u4e00\u4e2a\u5305\u542b\u91cd\u8981\u7528\u6237\u6807\u8bc6\u7b26\u7684\u6587\u672c\u6587\u4ef6\uff0c\u5219\u53ef\u4ee5\u5c06\u5176\u4e0e\u4f7f\u7528\u6b64\u5217\u8868\u8fc7\u6ee4\u7684\u67e5\u8be2\u4e00\u8d77\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u3002</p>\n<p>\u5982\u679c\u9700\u8981\u4f7f\u7528\u5927\u91cf\u5916\u90e8\u6570\u636e\u8fd0\u884c\u591a\u4e2a\u67e5\u8be2\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528\u8be5\u7279\u6027\u3002\u6700\u597d\u63d0\u524d\u628a\u6570\u636e\u4e0a\u4f20\u5230\u6570\u636e\u5e93\u3002</p>\n<p>\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\uff08\u5728\u975e\u4ea4\u4e92\u6a21\u5f0f\u4e0b\uff09\u6216\u4f7f\u7528 HTTP \u63a5\u53e3\u4e0a\u4f20\u5916\u90e8\u6570\u636e\u3002</p>\n<p>\u5728\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u4e2d\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u683c\u5f0f\u7684\u53c2\u6570\u90e8\u5206</p>\n<div class=\"codehilite\"><pre><span></span><code>--external --fil");
            
            document.write("e<span class=\"o\">=</span>... <span class=\"o\">[</span>--name<span class=\"o\">=</span>...<span class=\"o\">]</span> <span class=\"o\">[</span>--format<span class=\"o\">=</span>...<span class=\"o\">]</span> <span class=\"o\">[</span>--types<span class=\"o\">=</span>...<span class=\"p\">|</span>--structure<span class=\"o\">=</span>...<span class=\"o\">]</span>\n</code></pre></div>\n\n\n<p>\u5bf9\u4e8e\u4f20\u8f93\u7684\u8868\u7684\u6570\u91cf\uff0c\u53ef\u80fd\u6709\u591a\u4e2a\u8fd9\u6837\u7684\u90e8\u5206\u3002</p>\n<p><strong>--external</strong> \u2013 \u6807\u8bb0\u5b50\u53e5\u7684\u5f00\u59cb\u3002<br />\n<strong>--file</strong> \u2013 \u5e26\u6709\u8868\u5b58\u50a8\u7684\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u6216\u8005\uff0c\u5b83\u6307\u7684\u662fSTDIN\u3002<br />\n\u53ea\u80fd\u4ece stdin \u4e2d\u68c0\u7d22\u5355\u4e2a\u8868\u3002</p>\n<p>\u4ee5\u4e0b\u7684\u53c2\u6570\u662f\u53ef\u9009\u7684\uff1a<strong>--name</strong> \u2013 \u8868\u7684\u540d\u79f0\uff0c\u5982\u679c\u7701\u7565\uff0c\u5219\u91c7\u7528 _data\u3002<br />\n<strong>--format</strong> \u2013 \u6587\u4ef6\u4e2d\u7684\u6570\u636e\u683c\u5f0f\u3002 \u5982\u679c\u7701\u7565\uff0c\u5219\u4f7f\u7528 TabSeparated\u3002</p>\n<p>\u4ee5\u4e0b\u7684\u53c2\u6570\u5fc5\u9009\u4e00\u4e2a\uff1a<strong>--types</strong> \u2013 \u9017\u53f7\u5206\u9694\u5217\u7c7b\u578b\u7684\u5217\u8868\u3002\u4f8b\u5982\uff1a<code>UInt64,String</code>\u3002\u5217\u5c06\u88ab\u547d\u540d\u4e3a _1\uff0c_2\uff0c...<br />\n<strong>--structure</strong>\u2013 \u8868\u7ed3\u6784\u7684\u683c\u5f0f <code>UserID UInt64</code>\uff0c<code>URL String</code>\u3002\u5b9a\u4e49\u5217\u7684\u540d\u5b57\u4ee5\u53ca\u7c7b\u578b\u3002</p>\n<p>\u5728 \"file\" \u4e2d\u6307\u5b9a\u7684\u6587\u4ef6\u5c06\u7531 \"format\" \u4e2d\u6307\u5b9a\u7684\u683c\u5f0f\u89e3\u6790\uff0c\u4f7f\u7528\u5728 \"types\" \u6216 \"structure\" \u4e2d\u6307\u5b9a\u7684\u6570\u636e\u7c7b\u578b\u3002\u8be5\u8868\u5c06\u88ab\u4e0a\u4f20\u5230\u670d\u52a1\u5668\uff0c\u5e76\u5728\u4f5c\u4e3a\u540d\u79f0\u4e3a \"name\"\u4e34\u65f6\u8868\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> -ne <span class=\"s2\">&quot;1\\n2\\n3\\n&quot;</span> <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;SELECT count() FROM test.visits WHERE TraficSourceID IN _data&quot;</span> --external --file<span class=\"o\">=</span>- --types<span class=\"o\">=</span>Int8\n<span class=\"m\">849897</span>\ncat /etc/passwd <span class=\"p\">|</span> sed <span class=\"s1\">&#39;s/:/\\t/g&#39;</span> <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;SELECT shell, count() AS c FROM passwd GROUP BY shell ORDER BY c DESC&quot;</span> --external --file<span class=\"o\">=</span>- --name<span class=\"o\">=</span>passwd --structure<span class=\"o\">=</span><span class=\"s1\">&#39;login String, unused String, uid UInt16, gid UInt16, comment String, home String, shell String&#39;</span>\n/bin/sh <span class=\"m\">20</span>\n/bin/false      <span class=\"m\">5</span>\n/bin/bash       <span class=\"m\">4</span>\n/usr/sbin/nologin       <span class=\"m\">1</span>\n/bin/sync       <span class=\"m\">1</span>\n</code></pre></div>\n\n\n<p>\u5f53\u4f7f\u7528HTTP\u63a5\u53e3\u65f6\uff0c\u5916\u90e8\u6570\u636e\u4ee5 multipart/form-data \u683c\u5f0f\u4f20\u9012\u3002\u6bcf\u4e2a\u8868\u4f5c\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u4f20\u8f93\u3002\u8868\u540d\u53d6\u81ea\u6587\u4ef6\u540d\u3002\"query_string\" \u4f20\u9012\u53c2\u6570 \"name_format\"\u3001\"name_types\"\u548c\"name_structure\"\uff0c\u5176\u4e2d \"name\" \u662f\u8fd9\u4e9b\u53c2\u6570\u5bf9\u5e94\u7684\u8868\u7684\u540d\u79f0\u3002\u53c2\u6570\u7684\u542b\u4e49\u4e0e\u4f7f\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u65f6\u7684\u542b\u4e49\u76f8\u540c\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>cat /etc/passwd <span class=\"p\">|</span> sed <span class=\"s1\">&#39;s/:/\\t/g&#39;</span> &gt; passwd.tsv\n\ncurl -F <span class=\"s1\">&#39;passwd=@passwd.tsv;&#39;</span> <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT+shell,+count()+AS+c+FROM+passwd+GROUP+BY+shell+ORDER+BY+c+DESC&amp;passwd_structure=login+String,+unused+String,+uid+UInt16,+gid+UInt16,+comment+String,+home+String,+shell+String&#39;</span>\n/bin/sh <span class=\"m\">20</span>\n/bin/false      <span class=\"m\">5</span>\n/bin/bash       <span class=\"m\">4</span>\n/usr/sbin/nologin       <span class=\"m\">1</span>\n/bin/sync       <span class=\"m\">1</span>\n</code></pre></div>\n\n\n<p>\u5bf9\u4e8e\u5206\u5e03\u5f0f\u67e5\u8be2\uff0c\u5c06\u4e34\u65f6\u8868\u53d1\u9001\u5230\u6240\u6709\u8fdc\u7a0b\u670d\u52a1\u5668\u3002</p>\n<p><a name=\"table_engines/dictionary/\"></a><a name=\"../../../../../operations/table_engines/dictionary/\"></a><a name=\"../operations/table_engines/dictionary/\"></a><a name=\"../../../../../table_engines/dictionary/\"></a><a name=\"../table_engines/dictionary/\"></a><a name=\"../../../../operations/table_engines/dictionary/\"></a><a name=\"../../../../table_engines/dictionary/\"></a><a name=\"../../table_engines/dictionary/\"></a><a name=\"../../operations/table_engines/dictionary/\"></a><a name=\"../../../table_engines/dictionary/\"></a><a name=\"dictionary/\"></a><a name=\"operations/table_engines/dictionary/\"></a><a name=\"../../../operations/table_engines/dictionary/\"></a><a name=\"../../../../../../table_engines/dictionary/\"></a></p>\n<h2 id=\"dictionary\">Dictionary<a class=\"headerlink\" href=\"#dictionary\" title=\"Permanent link\">&para;</a></h2>\n<p><code>Dictionary</code> \u5f15\u64ce\u5c06\u5b57\u5178\u6570\u636e\u5c55\u793a\u4e3a\u4e00\u4e2aClickHouse\u7684\u8868\u3002</p>\n<p>\u4f8b\u5982\uff0c\u8003\u8651\u4f7f\u7528\u4e00\u4e2a\u5177\u6709\u4ee5\u4e0b\u914d\u7f6e\u7684 <code>products</code> \u5b57\u5178\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionaries&gt;</span>\n<span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>products<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;source&gt;</span>\n            <span class=\"nt\">&lt;odbc&gt;</span>\n                <span class=\"nt\">&lt;table&gt;</span>products<span class=\"nt\">&lt;/table&gt;</span>\n                <span class=\"nt\">&lt;connection_string&gt;</span>DSN=some-db-server<span class=\"nt\">&lt;/connection_string&gt;</span>\n            <span class=\"nt\">&lt;/odbc&gt;</span>\n        <span class=\"nt\">&lt;/source&gt;</span>\n        <span class=\"nt\">&lt;lifetime&gt;</span>\n            <span class=\"nt\">&lt;min&gt;</span>300<span class=\"nt\">&lt;/min&gt;</span>\n            <span class=\"nt\">&lt;max&gt;</span>360<span class=\"nt\">&lt;/max&gt;</span>\n        <span class=\"nt\">&lt;/lifetime&gt;</span>\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;flat/&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n        <span class=\"nt\">&lt;structure&gt;</span>\n            <span class=\"nt\">&lt;id&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>product_id<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;/id&gt;</span>\n            <span class=\"nt\">&lt;attribute&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>title<span class=\"nt\">&lt;/name&gt;</span>\n                <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n                <span class=\"nt\">&lt;null_value&gt;&lt;/null_value&gt;</span>\n            <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;/structure&gt;</span>\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/dictionaries&gt;</span>\n</code></pre></div>\n\n\n<p>\u67e5\u8be2\u5b57\u5178\u4e2d\u7684\u6570\u636e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">select</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"k\">type</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">,</span> <span class=\"n\">attribute</span><span class=\"p\">.</span><span class=\"k\">names</span><span class=\"p\">,</span> <span class=\"n\">attribute</span><span class=\"p\">.</span><span class=\"n\">types</span><span class=\"p\">,</span> <span class=\"n\">bytes_allocated</span><span class=\"p\">,</span> <span class=\"n\">element_count</span><span class=\"p\">,</span><span class=\"k\">source</span> <span class=\"k\">from</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">dictionaries</span> <span class=\"k\">where</span> <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;products&#39;</span><span class=\"p\">;</span>                     \n\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">name</span><span class=\"p\">,</span>\n    <span class=\"k\">type</span><span class=\"p\">,</span>\n    <span class=\"k\">key</span><span class=\"p\">,</span>\n    <span class=\"n\">attribute</span><span class=\"p\">.</span><span class=\"k\">names</span><span class=\"p\">,</span>\n    <span class=\"n\">attribute</span><span class=\"p\">.</span><span class=\"n\">types</span><span class=\"p\">,</span>\n    <span class=\"n\">bytes_allocated</span><span class=\"p\">,</span>\n    <span class=\"n\">element_count</span><span class=\"p\">,</span>\n    <span class=\"k\">source</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">dictionaries</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;products&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u252c\u2500type\u2500\u252c\u2500key\u2500\u2500\u2500\u2500\u252c\u2500attribute.names\u2500\u252c\u2500attribute.types\u2500\u252c\u2500bytes_allocated\u2500\u252c\u2500element_count\u2500\u252c\u2500source\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 products \u2502 Flat \u2502 UInt64 \u2502 [&#39;title&#39;]       \u2502 [&#39;String&#39;]      \u2502        23065376 \u2502        175032 \u2502 ODBC: .products \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <a href=\"#../../query_language/functions/ext_dict_functions/\">dictGet*</a> \u51fd\u6570\u6765\u83b7\u53d6\u8fd9\u79cd\u683c\u5f0f\u7684\u5b57\u5178\u6570\u636e\u3002</p>\n<p>\u5f53\u4f60\u9700\u8981\u83b7\u53d6\u539f\u59cb\u6570\u636e\uff0c\u6216\u8005\u662f\u60f3\u8981\u4f7f\u7528 <code>JOIN</code> \u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u8fd9\u79cd\u89c6\u56fe\u5e76\u6ca1\u6709\u4ec0\u4e48\u5e2e\u52a9\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u60c5\u51b5\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>Dictionary</code> \u5f15\u64ce\uff0c\u5b83\u53ef\u4ee5\u5c06\u5b57\u5178\u6570\u636e\u5c55\u793a\u5728\u8868\u4e2d\u3002</p>\n<p>\u8bed\u6cd5\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">CREATE TABLE %table_name% (%fields%) engine = Dictionary(%dictionary_name%)`</span>\n</code></pre></div>\n\n\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">create</span> <span class=\"k\">table</span> <span class=\"n\">products</span> <span class=\"p\">(</span><span class=\"n\">product_id</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span> <span class=\"n\">title</span> <span class=\"n\">String</span><span class=\"p\">)</span> <span class=\"n\">Engine</span> <span class=\"o\">=</span> <span class=\"k\">Dictionary</span><span class=\"p\">(</span><span class=\"n\">products</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">products</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">product_id</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">title</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"k\">Dictionary</span><span class=\"p\">(</span><span class=\"n\">products</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Ok</span><span class=\"p\">.</span>\n\n<span class=\"mi\">0</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">004</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u770b\u4e00\u770b\u8868\u4e2d\u7684\u5185\u5bb9\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">select</span> <span class=\"o\">*</span> <span class=\"k\">from</span> <span class=\"n\">products</span> <span class=\"k\">limit</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n");
            
            document.write("\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">products</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">1</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500</span><span class=\"n\">product_id</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">title</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span>        <span class=\"mi\">152689</span> <span class=\"err\">\u2502</span> <span class=\"k\">Some</span> <span class=\"n\">item</span>       <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">006</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p><a name=\"../operations/table_engines/merge/\"></a><a name=\"operations/table_engines/merge/\"></a><a name=\"merge/\"></a><a name=\"../../table_engines/merge/\"></a><a name=\"../../../../../table_engines/merge/\"></a><a name=\"../../operations/table_engines/merge/\"></a><a name=\"table_engines/merge/\"></a><a name=\"../../../../operations/table_engines/merge/\"></a><a name=\"../../../operations/table_engines/merge/\"></a><a name=\"../../../../table_engines/merge/\"></a><a name=\"../table_engines/merge/\"></a><a name=\"../../../table_engines/merge/\"></a><a name=\"../../../../../../table_engines/merge/\"></a><a name=\"../../../../../operations/table_engines/merge/\"></a></p>\n<h2 id=\"merge\">Merge<a class=\"headerlink\" href=\"#merge\" title=\"Permanent link\">&para;</a></h2>\n<p><code>Merge</code> \u5f15\u64ce (\u4e0d\u8981\u8ddf <code>MergeTree</code> \u5f15\u64ce\u6df7\u6dc6) \u672c\u8eab\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u4f46\u53ef\u7528\u4e8e\u540c\u65f6\u4ece\u4efb\u610f\u591a\u4e2a\u5176\u4ed6\u7684\u8868\u4e2d\u8bfb\u53d6\u6570\u636e\u3002<br />\n\u8bfb\u662f\u81ea\u52a8\u5e76\u884c\u7684\uff0c\u4e0d\u652f\u6301\u5199\u5165\u3002\u8bfb\u53d6\u65f6\uff0c\u90a3\u4e9b\u88ab\u771f\u6b63\u8bfb\u53d6\u5230\u6570\u636e\u7684\u8868\u7684\u7d22\u5f15\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u4f1a\u88ab\u4f7f\u7528\u3002<br />\n<code>Merge</code> \u5f15\u64ce\u7684\u53c2\u6570\uff1a\u4e00\u4e2a\u6570\u636e\u5e93\u540d\u548c\u4e00\u4e2a\u7528\u4e8e\u5339\u914d\u8868\u540d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Merge(hits, &#39;^WatchLog&#39;)</span>\n</code></pre></div>\n\n\n<p>\u6570\u636e\u4f1a\u4ece <code>hits</code> \u6570\u636e\u5e93\u4e2d\u8868\u540d\u5339\u914d\u6b63\u5219 '<code>^WatchLog</code>' \u7684\u8868\u4e2d\u8bfb\u53d6\u3002</p>\n<p>\u9664\u4e86\u6570\u636e\u5e93\u540d\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528\u4e00\u4e2a\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u5e38\u91cf\u8868\u8fbe\u5f0f\u3002\u4f8b\u5982\uff0c <code>currentDatabase()</code> \u3002</p>\n<p>\u6b63\u5219\u8868\u8fbe\u5f0f \u2014 <a href=\"https://github.com/google/re2\" rel=\"external nofollow noreferrer\">re2</a> (\u652f\u6301 PCRE \u4e00\u4e2a\u5b50\u96c6\u7684\u529f\u80fd)\uff0c\u5927\u5c0f\u5199\u654f\u611f\u3002<br />\n\u4e86\u89e3\u5173\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u8f6c\u4e49\u5b57\u7b26\u7684\u8bf4\u660e\u53ef\u53c2\u770b \"match\" \u4e00\u8282\u3002</p>\n<p>\u5f53\u9009\u62e9\u9700\u8981\u8bfb\u7684\u8868\u65f6\uff0c<code>Merge</code> \u8868\u672c\u8eab\u4f1a\u88ab\u6392\u9664\uff0c\u5373\u4f7f\u5b83\u5339\u914d\u4e0a\u4e86\u8be5\u6b63\u5219\u3002\u8fd9\u6837\u8bbe\u8ba1\u4e3a\u4e86\u907f\u514d\u5faa\u73af\u3002<br />\n\u5f53\u7136\uff0c\u662f\u80fd\u591f\u521b\u5efa\u4e24\u4e2a\u76f8\u4e92\u65e0\u9650\u9012\u5f52\u8bfb\u53d6\u5bf9\u65b9\u6570\u636e\u7684 <code>Merge</code> \u8868\u7684\uff0c\u4f46\u8fd9\u5e76\u6ca1\u6709\u4ec0\u4e48\u610f\u4e49\u3002</p>\n<p><code>Merge</code> \u5f15\u64ce\u7684\u4e00\u4e2a\u5178\u578b\u5e94\u7528\u662f\u53ef\u4ee5\u50cf\u4f7f\u7528\u4e00\u5f20\u8868\u4e00\u6837\u4f7f\u7528\u5927\u91cf\u7684 <code>TinyLog</code> \u8868\u3002</p>\n<p>\u793a\u4f8b 2 \uff1a</p>\n<p>\u6211\u4eec\u5047\u5b9a\u4f60\u6709\u4e00\u4e2a\u65e7\u8868\uff08WatchLog_old\uff09\uff0c\u4f60\u60f3\u6539\u53d8\u6570\u636e\u5206\u533a\u4e86\uff0c\u4f46\u53c8\u4e0d\u60f3\u628a\u65e7\u6570\u636e\u8f6c\u79fb\u5230\u65b0\u8868\uff08WatchLog_new\uff09\u91cc\uff0c\u5e76\u4e14\u4f60\u9700\u8981\u540c\u65f6\u80fd\u770b\u5230\u8fd9\u4e24\u4e2a\u8868\u7684\u6570\u636e\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">WatchLog_old</span><span class=\"p\">(</span><span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">UserId</span> <span class=\"n\">Int64</span><span class=\"p\">,</span> <span class=\"n\">EventType</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">Cnt</span> <span class=\"n\">UInt64</span><span class=\"p\">)</span> \n<span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">UserId</span><span class=\"p\">,</span> <span class=\"n\">EventType</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">WatchLog_old</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01&#39;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;hit&#39;</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">WatchLog_new</span><span class=\"p\">(</span><span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">UserId</span> <span class=\"n\">Int64</span><span class=\"p\">,</span> <span class=\"n\">EventType</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">Cnt</span> <span class=\"n\">UInt64</span><span class=\"p\">)</span> \n<span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">MergeTree</span> <span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"nb\">date</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">UserId</span><span class=\"p\">,</span> <span class=\"n\">EventType</span><span class=\"p\">)</span> <span class=\"n\">SETTINGS</span> <span class=\"n\">index_granularity</span><span class=\"o\">=</span><span class=\"mi\">8192</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">WatchLog_new</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-02&#39;</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;hit&#39;</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">WatchLog</span> <span class=\"k\">as</span> <span class=\"n\">WatchLog_old</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">Merge</span><span class=\"p\">(</span><span class=\"n\">currentDatabase</span><span class=\"p\">(),</span> <span class=\"s1\">&#39;^WatchLog&#39;</span><span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">WatchLog</span>\n\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"nb\">date</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">UserId</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">EventType</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">Cnt</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2018</span><span class=\"o\">-</span><span class=\"mi\">01</span><span class=\"o\">-</span><span class=\"mi\">01</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">1</span> <span class=\"err\">\u2502</span> <span class=\"n\">hit</span>       <span class=\"err\">\u2502</span>   <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518</span>\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"nb\">date</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">UserId</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">EventType</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">Cnt</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2018</span><span class=\"o\">-</span><span class=\"mi\">01</span><span class=\"o\">-</span><span class=\"mi\">02</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">2</span> <span class=\"err\">\u2502</span> <span class=\"n\">hit</span>       <span class=\"err\">\u2502</span>   <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"xu-ni-lie_1\">\u865a\u62df\u5217<a class=\"headerlink\" href=\"#xu-ni-lie_1\" title=\"Permanent link\">&para;</a></h3>\n<p>\u865a\u62df\u5217\u662f\u4e00\u79cd\u7531\u8868\u5f15\u64ce\u63d0\u4f9b\u800c\u4e0d\u662f\u5728\u8868\u5b9a\u4e49\u4e2d\u7684\u5217\u3002\u6362\u79cd\u8bf4\u6cd5\u5c31\u662f\uff0c\u8fd9\u4e9b\u5217\u5e76\u6ca1\u6709\u5728 <code>CREATE TABLE</code> \u4e2d\u6307\u5b9a\uff0c\u4f46\u53ef\u4ee5\u5728 <code>SELECT</code> \u4e2d\u4f7f\u7528\u3002</p>\n<p>\u4e0b\u9762\u5217\u51fa\u865a\u62df\u5217\u8ddf\u666e\u901a\u5217\u7684\u4e0d\u540c\u70b9\uff1a</p>\n<ul>\n<li>\u865a\u62df\u5217\u4e0d\u5728\u8868\u7ed3\u6784\u5b9a\u4e49\u91cc\u6307\u5b9a\u3002</li>\n<li>\u4e0d\u80fd\u7528 <code>INSERT</code> \u5411\u865a\u62df\u5217\u5199\u6570\u636e\u3002</li>\n<li>\u4f7f\u7528\u4e0d\u6307\u5b9a\u5217\u540d\u7684 <code>INSERT</code> \u8bed\u53e5\u65f6\uff0c\u865a\u62df\u5217\u8981\u4f1a\u88ab\u5ffd\u7565\u6389\u3002</li>\n<li>\u4f7f\u7528\u661f\u53f7\u901a\u914d\u7b26\uff08 <code>SELECT *</code> \uff09\u65f6\u865a\u62df\u5217\u4e0d\u4f1a\u5305\u542b\u5728\u91cc\u9762\u3002</li>\n<li>\u865a\u62df\u5217\u4e0d\u4f1a\u51fa\u73b0\u5728 <code>SHOW CREATE TABLE</code> \u548c <code>DESC TABLE</code> \u7684\u67e5\u8be2\u7ed3\u679c\u91cc\u3002</li>\n</ul>\n<p><code>Merge</code> \u7c7b\u578b\u7684\u8868\u5305\u62ec\u4e00\u4e2a <code>String</code> \u7c7b\u578b\u7684 <code>_table</code> \u865a\u62df\u5217\u3002\uff08\u5982\u679c\u8be5\u8868\u672c\u6765\u5df2\u6709\u4e86\u4e00\u4e2a <code>_table</code> \u7684\u5217\uff0c\u90a3\u8fd9\u4e2a\u865a\u62df\u5217\u4f1a\u547d\u540d\u4e3a <code>_table1</code> \uff1b\u5982\u679c <code>_table1</code> \u4e5f\u672c\u5c31\u5b58\u5728\u4e86\uff0c\u90a3\u8fd9\u4e2a\u865a\u62df\u5217\u4f1a\u88ab\u547d\u540d\u4e3a <code>_table2</code> \uff0c\u4f9d\u6b64\u7c7b\u63a8\uff09\u8be5\u5217\u5305\u542b\u88ab\u8bfb\u6570\u636e\u7684\u8868\u540d\u3002</p>\n<p>\u5982\u679c <code>WHERE/PREWHERE</code> \u5b50\u53e5\u5305\u542b\u4e86\u5e26 <code>_table</code> \u7684\u6761\u4ef6\uff0c\u5e76\u4e14\u6ca1\u6709\u4f9d\u8d56\u5176\u4ed6\u7684\u5217\uff08\u5982\u4f5c\u4e3a\u8868\u8fbe\u5f0f\u8c13\u8bcd\u94fe\u63a5\u7684\u4e00\u4e2a\u5b50\u9879\u6216\u4f5c\u4e3a\u6574\u4e2a\u7684\u8868\u8fbe\u5f0f\uff09\uff0c\u8fd9\u4e9b\u6761\u4ef6\u7684\u4f5c\u7528\u4f1a\u50cf\u7d22\u5f15\u4e00\u6837\u3002\u8fd9\u4e9b\u6761\u4ef6\u4f1a\u5728\u90a3\u4e9b\u53ef\u80fd\u88ab\u8bfb\u6570\u636e\u7684\u8868\u7684\u8868\u540d\u4e0a\u6267\u884c\uff0c\u5e76\u4e14\u8bfb\u64cd\u4f5c\u53ea\u4f1a\u5728\u90a3\u4e9b\u6ee1\u8db3\u4e86\u8be5\u6761\u4ef6\u7684\u8868\u4e0a\u53bb\u6267\u884c\u3002</p>\n<p><a name=\"../../../../table_engines/file/\"></a><a name=\"file/\"></a><a name=\"../../../../../operations/table_engines/file/\"></a><a name=\"../../../../../table_engines/file/\"></a><a name=\"../../operations/table_engines/file/\"></a><a name=\"operations/table_engines/file/\"></a><a name=\"../../../../../../table_engines/file/\"></a><a name=\"../../../operations/table_engines/file/\"></a><a name=\"../table_engines/file/\"></a><a name=\"../../../table_engines/file/\"></a><a name=\"../../table_engines/file/\"></a><a name=\"table_engines/file/\"></a><a name=\"../operations/table_engines/file/\"></a><a name=\"../../../../operations/table_engines/file/\"></a></p>\n<h2 id=\"table_engines-file\">File(InputFormat)<a class=\"headerlink\" href=\"#table_engines-file\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6570\u636e\u6e90\u662f\u4ee5 Clickhouse \u652f\u6301\u7684\u4e00\u79cd\u8f93\u5165\u683c\u5f0f\uff08TabSeparated\uff0cNative\u7b49\uff09\u5b58\u50a8\u6570\u636e\u7684\u6587\u4ef6\u3002</p>\n<p>\u7528\u6cd5\u793a\u4f8b\uff1a</p>\n<ul>\n<li>\u4ece ClickHouse \u5bfc\u51fa\u6570\u636e\u5230\u6587\u4ef6\u3002</li>\n<li>\u5c06\u6570\u636e\u4ece\u4e00\u79cd\u683c\u5f0f\u8f6c\u6362\u4e3a\u53e6\u4e00\u79cd\u683c\u5f0f\u3002</li>\n<li>\u901a\u8fc7\u7f16\u8f91\u78c1\u76d8\u4e0a\u7684\u6587\u4ef6\u6765\u66f4\u65b0 ClickHouse \u4e2d\u7684\u6570\u636e\u3002</li>\n</ul>\n<h3 id=\"zai-clickhouse-fu-wu-qi-zhong-de-shi-yong\">\u5728 ClickHouse \u670d\u52a1\u5668\u4e2d\u7684\u4f7f\u7528<a class=\"headerlink\" href=\"#zai-clickhouse-fu-wu-qi-zhong-de-shi-yong\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">File(Format)</span>\n</code></pre></div>\n\n\n<p>\u9009\u7528\u7684 <code>Format</code> \u9700\u8981\u652f\u6301 <code>INSERT</code> \u6216 <code>SELECT</code> \u3002\u6709\u5173\u652f\u6301\u683c\u5f0f\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 <a href=\"#formats\">\u683c\u5f0f</a>\u3002</p>\n<p>ClickHouse \u4e0d\u652f\u6301\u7ed9 <code>File</code> \u6307\u5b9a\u6587\u4ef6\u7cfb\u7edf\u8def\u5f84\u3002\u5b83\u4f7f\u7528\u670d\u52a1\u5668\u914d\u7f6e\u4e2d <a href=\"#../server_settings/settings/\">path</a> \u8bbe\u5b9a\u7684\u6587\u4ef6\u5939\u3002</p>\n<p>\u4f7f\u7528 <code>File(Format)</code> \u521b\u5efa\u8868\u65f6\uff0c\u5b83\u4f1a\u5728\u8be5\u6587\u4ef6\u5939\u4e2d\u521b\u5efa\u7a7a\u7684\u5b50\u76ee\u5f55\u3002\u5f53\u6570\u636e\u5199\u5165\u8be5\u8868\u65f6\uff0c\u5b83\u4f1a\u5199\u5230\u8be5\u5b50\u76ee\u5f55\u4e2d\u7684 <code>data.Format</code> \u6587\u4ef6\u4e2d\u3002</p>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u6587\u4ef6\u7cfb\u7edf\u4e2d\u624b\u52a8\u521b\u5efa\u8fd9\u4e9b\u5b50\u6587\u4ef6\u5939\u548c\u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7 <a href=\"#../../query_language/misc/\">ATTACH</a> \u5c06\u5176\u521b\u5efa\u4e3a\u5177\u6709\u5bf9\u5e94\u540d\u79f0\u7684\u8868\uff0c\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u4ece\u8be5\u6587\u4ef6\u4e2d\u67e5\u8be2\u6570\u636e\u4e86\u3002</p>\n<div class=\"admonition \u6ce8\u610f\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u6ce8\u610f\u8fd9\u4e2a\u529f\u80fd\uff0c\u56e0\u4e3a ClickHouse \u4e0d\u4f1a\u8ddf\u8e2a\u8fd9\u4e9b\u6587\u4ef6\u5728\u5916\u90e8\u7684\u66f4\u6539\u3002\u5728 ClickHouse \u4e2d\u548c ClickHouse \u5916\u90e8\u540c\u65f6\u5199\u5165\u4f1a\u9020\u6210\u7ed3\u679c\u662f\u4e0d\u786e\u5b9a\u7684\u3002</p>\n</div>\n<p><strong>\u793a\u4f8b\uff1a</strong></p>\n<p><strong>1.</strong> \u521b\u5efa <code>file_engine_table</code> \u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">file_engine_table</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span cla");
            
            document.write("ss=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">File</span><span class=\"p\">(</span><span class=\"n\">TabSeparated</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cClickhouse \u4f1a\u521b\u5efa\u76ee\u5f55 <code>/var/lib/clickhouse/data/default/file_engine_table</code> \u3002</p>\n<p><strong>2.</strong> \u624b\u52a8\u521b\u5efa <code>/var/lib/clickhouse/data/default/file_engine_table/data.TabSeparated</code> \u6587\u4ef6\uff0c\u5e76\u4e14\u5305\u542b\u5185\u5bb9\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat data.TabSeparated\none <span class=\"m\">1</span>\ntwo <span class=\"m\">2</span>\n</code></pre></div>\n\n\n<p><strong>3.</strong> \u67e5\u8be2\u8fd9\u4e9b\u6570\u636e:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">file_engine_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500name\u2500\u252c\u2500value\u2500\u2510</span>\n<span class=\"err\">\u2502 one  \u2502     1 \u2502</span>\n<span class=\"err\">\u2502 two  \u2502     2 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"zai-clickhouse-local-zhong-de-shi-yong\">\u5728 Clickhouse-local \u4e2d\u7684\u4f7f\u7528<a class=\"headerlink\" href=\"#zai-clickhouse-local-zhong-de-shi-yong\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528 <a href=\"#../utils/clickhouse-local/\">clickhouse-local</a> \u65f6\uff0cFile \u5f15\u64ce\u9664\u4e86 <code>Format</code> \u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u63a5\u53d7\u6587\u4ef6\u8def\u5f84\u53c2\u6570\u3002\u53ef\u4ee5\u4f7f\u7528\u6570\u5b57\u6216\u4eba\u7c7b\u53ef\u8bfb\u7684\u540d\u79f0\u6765\u6307\u5b9a\u6807\u51c6\u8f93\u5165/\u8f93\u51fa\u6d41\uff0c\u4f8b\u5982 <code>0</code> \u6216 <code>stdin</code>\uff0c<code>1</code> \u6216 <code>stdout</code>\u3002<br />\n<strong>\u4f8b\u5982\uff1a</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> -e <span class=\"s2\">&quot;1,2\\n3,4&quot;</span> <span class=\"p\">|</span> clickhouse-local -q <span class=\"s2\">&quot;CREATE TABLE table (a Int64, b Int64) ENGINE = File(CSV, stdin); SELECT a, b FROM table; DROP TABLE table&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"gong-neng-shi-xian\">\u529f\u80fd\u5b9e\u73b0<a class=\"headerlink\" href=\"#gong-neng-shi-xian\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>\u8bfb\u64cd\u4f5c\u53ef\u652f\u6301\u5e76\u53d1\uff0c\u4f46\u5199\u64cd\u4f5c\u4e0d\u652f\u6301</li>\n<li>\u4e0d\u652f\u6301:</li>\n<li><code>ALTER</code></li>\n<li><code>SELECT ... SAMPLE</code></li>\n<li>\u7d22\u5f15</li>\n<li>\u526f\u672c</li>\n</ul>\n<p><a name=\"../../../../../operations/table_engines/null/\"></a><a name=\"../../table_engines/null/\"></a><a name=\"../../../operations/table_engines/null/\"></a><a name=\"operations/table_engines/null/\"></a><a name=\"../../../../table_engines/null/\"></a><a name=\"../../../../../../table_engines/null/\"></a><a name=\"table_engines/null/\"></a><a name=\"../../operations/table_engines/null/\"></a><a name=\"../table_engines/null/\"></a><a name=\"../../../../../table_engines/null/\"></a><a name=\"null/\"></a><a name=\"../../../../operations/table_engines/null/\"></a><a name=\"../operations/table_engines/null/\"></a><a name=\"../../../table_engines/null/\"></a></p>\n<h2 id=\"null_1\">Null<a class=\"headerlink\" href=\"#null_1\" title=\"Permanent link\">&para;</a></h2>\n<p>\u5f53\u5199\u5165 Null \u7c7b\u578b\u7684\u8868\u65f6\uff0c\u5c06\u5ffd\u7565\u6570\u636e\u3002\u4ece Null \u7c7b\u578b\u7684\u8868\u4e2d\u8bfb\u53d6\u65f6\uff0c\u8fd4\u56de\u7a7a\u3002</p>\n<p>\u4f46\u662f\uff0c\u53ef\u4ee5\u5728 Null \u7c7b\u578b\u7684\u8868\u4e0a\u521b\u5efa\u7269\u5316\u89c6\u56fe\u3002\u5199\u5165\u8868\u7684\u6570\u636e\u5c06\u8f6c\u53d1\u5230\u89c6\u56fe\u4e2d\u3002</p>\n<p><a name=\"table_engines/set/\"></a><a name=\"../../operations/table_engines/set/\"></a><a name=\"../../table_engines/set/\"></a><a name=\"../../../../../../table_engines/set/\"></a><a name=\"../../../../operations/table_engines/set/\"></a><a name=\"../table_engines/set/\"></a><a name=\"../../../table_engines/set/\"></a><a name=\"operations/table_engines/set/\"></a><a name=\"../../../../../operations/table_engines/set/\"></a><a name=\"../../../operations/table_engines/set/\"></a><a name=\"../../../../table_engines/set/\"></a><a name=\"set/\"></a><a name=\"../operations/table_engines/set/\"></a><a name=\"../../../../../table_engines/set/\"></a></p>\n<h2 id=\"set_1\">Set<a class=\"headerlink\" href=\"#set_1\" title=\"Permanent link\">&para;</a></h2>\n<p>\u59cb\u7ec8\u5b58\u5728\u4e8e RAM \u4e2d\u7684\u6570\u636e\u96c6\u3002\u5b83\u9002\u7528\u4e8eIN\u8fd0\u7b97\u7b26\u7684\u53f3\u4fa7\uff08\u8bf7\u53c2\u89c1 \"IN\u8fd0\u7b97\u7b26\" \u90e8\u5206\uff09\u3002</p>\n<p>\u53ef\u4ee5\u4f7f\u7528 INSERT \u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e\u3002\u65b0\u5143\u7d20\u5c06\u6dfb\u52a0\u5230\u6570\u636e\u96c6\u4e2d\uff0c\u800c\u91cd\u590d\u9879\u5c06\u88ab\u5ffd\u7565\u3002\u4f46\u662f\u4e0d\u80fd\u5bf9\u6b64\u7c7b\u578b\u8868\u6267\u884c SELECT \u8bed\u53e5\u3002\u68c0\u7d22\u6570\u636e\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u5728 IN \u8fd0\u7b97\u7b26\u7684\u53f3\u534a\u90e8\u5206\u4f7f\u7528\u5b83\u3002</p>\n<p>\u6570\u636e\u59cb\u7ec8\u5b58\u5728\u4e8e RAM \u4e2d\u3002\u5bf9\u4e8e INSERT\uff0c\u63d2\u5165\u6570\u636e\u5757\u4e5f\u4f1a\u5199\u5165\u78c1\u76d8\u4e0a\u7684\u8868\u76ee\u5f55\u3002\u542f\u52a8\u670d\u52a1\u5668\u65f6\uff0c\u6b64\u6570\u636e\u5c06\u52a0\u8f7d\u5230 RAM\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u91cd\u65b0\u542f\u52a8\u540e\uff0c\u6570\u636e\u4ecd\u7136\u5b58\u5728\u3002</p>\n<p>\u5bf9\u4e8e\u5f3a\u5236\u670d\u52a1\u5668\u91cd\u542f\uff0c\u78c1\u76d8\u4e0a\u7684\u6570\u636e\u5757\u53ef\u80fd\u4f1a\u4e22\u5931\u6216\u635f\u574f\u3002\u5728\u6570\u636e\u5757\u635f\u574f\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u9700\u8981\u624b\u52a8\u5220\u9664\u5305\u542b\u635f\u574f\u6570\u636e\u7684\u6587\u4ef6\u3002</p>\n<p><a name=\"../operations/table_engines/join/\"></a><a name=\"../../../../../operations/table_engines/join/\"></a><a name=\"../../../table_engines/join/\"></a><a name=\"../../table_engines/join/\"></a><a name=\"../../operations/table_engines/join/\"></a><a name=\"../../../../../../table_engines/join/\"></a><a name=\"join/\"></a><a name=\"../../../../operations/table_engines/join/\"></a><a name=\"../table_engines/join/\"></a><a name=\"../../../../table_engines/join/\"></a><a name=\"table_engines/join/\"></a><a name=\"../../../operations/table_engines/join/\"></a><a name=\"../../../../../table_engines/join/\"></a><a name=\"operations/table_engines/join/\"></a></p>\n<h2 id=\"join\">Join<a class=\"headerlink\" href=\"#join\" title=\"Permanent link\">&para;</a></h2>\n<p>\u52a0\u8f7d\u597d\u7684 JOIN \u8868\u6570\u636e\u4f1a\u5e38\u9a7b\u5185\u5b58\u4e2d\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Join(ANY|ALL, LEFT|INNER, k1[, k2, ...])</span>\n</code></pre></div>\n\n\n<p>\u5f15\u64ce\u53c2\u6570\uff1a<code>ANY|ALL</code> \u2013 \u8fde\u63a5\u4fee\u9970\uff1b<code>LEFT|INNER</code> \u2013 \u8fde\u63a5\u7c7b\u578b\u3002\u66f4\u591a\u4fe1\u606f\u53ef\u53c2\u8003 <a href=\"#select-join\">JOIN\u5b50\u53e5</a>\u3002<br />\n\u8fd9\u4e9b\u53c2\u6570\u8bbe\u7f6e\u4e0d\u7528\u5e26\u5f15\u53f7\uff0c\u4f46\u5fc5\u987b\u4e0e\u8981 JOIN \u8868\u5339\u914d\u3002 k1\uff0ck2\uff0c\u2026\u2026\u662f USING \u5b50\u53e5\u4e2d\u8981\u7528\u4e8e\u8fde\u63a5\u7684\u5173\u952e\u5217\u3002</p>\n<p>\u6b64\u5f15\u64ce\u8868\u4e0d\u80fd\u7528\u4e8e GLOBAL JOIN \u3002</p>\n<p>\u7c7b\u4f3c\u4e8e Set \u5f15\u64ce\uff0c\u53ef\u4ee5\u4f7f\u7528 INSERT \u5411\u8868\u4e2d\u6dfb\u52a0\u6570\u636e\u3002\u8bbe\u7f6e\u4e3a ANY \u65f6\uff0c\u91cd\u590d\u952e\u7684\u6570\u636e\u4f1a\u88ab\u5ffd\u7565\uff08\u4ec5\u4e00\u6761\u7528\u4e8e\u8fde\u63a5\uff09\u3002\u8bbe\u7f6e\u4e3a ALL \u65f6\uff0c\u91cd\u590d\u952e\u7684\u6570\u636e\u90fd\u4f1a\u7528\u4e8e\u8fde\u63a5\u3002\u4e0d\u80fd\u76f4\u63a5\u5bf9 JOIN \u8868\u8fdb\u884c SELECT\u3002\u68c0\u7d22\u5176\u6570\u636e\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u5c06\u5176\u4f5c\u4e3a JOIN \u8bed\u53e5\u53f3\u8fb9\u7684\u8868\u3002</p>\n<p>\u8ddf Set \u5f15\u64ce\u7c7b\u4f3c\uff0cJoin \u5f15\u64ce\u628a\u6570\u636e\u5b58\u50a8\u5728\u78c1\u76d8\u4e2d\u3002</p>\n<p><a name=\"../../../operations/table_engines/url/\"></a><a name=\"url/\"></a><a name=\"../operations/table_engines/url/\"></a><a name=\"../../../../operations/table_engines/url/\"></a><a name=\"../table_engines/url/\"></a><a name=\"../../../../../operations/table_engines/url/\"></a><a name=\"../../operations/table_engines/url/\"></a><a name=\"operations/table_engines/url/\"></a><a name=\"../../../../../table_engines/url/\"></a><a name=\"../../table_engines/url/\"></a><a name=\"../../../../table_engines/url/\"></a><a name=\"../../../../../../table_engines/url/\"></a><a name=\"table_engines/url/\"></a><a name=\"../../../table_engines/url/\"></a></p>\n<h2 id=\"table_engines-url\">URL(URL, Format)<a class=\"headerlink\" href=\"#table_engines-url\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7528\u4e8e\u7ba1\u7406\u8fdc\u7a0b HTTP/HTTPS \u670d\u52a1\u5668\u4e0a\u7684\u6570\u636e\u3002\u8be5\u5f15\u64ce\u7c7b\u4f3c<br />\n<a href=\"#file/\">File</a> \u5f15\u64ce\u3002</p>\n<h3 id=\"zai-clickhouse-fu-wu-qi-zhong-shi-yong-yin-qing\">\u5728 ClickHouse \u670d\u52a1\u5668\u4e2d\u4f7f\u7528\u5f15\u64ce<a class=\"headerlink\" href=\"#zai-clickhouse-fu-wu-qi-zhong-shi-yong-yin-qing\" title=\"Permanent link\">&para;</a></h3>\n<p><code>Format</code> \u5fc5\u987b\u662f ClickHouse \u53ef\u4ee5\u7528\u4e8e<br />\n<code>SELECT</code> \u67e5\u8be2\u7684\u4e00\u79cd\u683c\u5f0f\uff0c\u82e5\u6709\u5fc5\u8981\uff0c\u8fd8\u8981\u53ef\u7528\u4e8e <code>INSERT</code> \u3002\u6709\u5173\u652f\u6301\u683c\u5f0f\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u67e5\u770b<br />\n<a href=\"#formats\">Formats</a>\u3002</p>\n<p><code>URL</code> \u5fc5\u987b\u7b26\u5408\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u7b26\u7684\u7ed3\u6784\u3002\u6307\u5b9a\u7684URL\u5fc5\u987b\u6307\u5411\u4e00\u4e2a<br />\nHTTP \u6216 HTTPS \u670d\u52a1\u5668\u3002\u5bf9\u4e8e\u670d\u52a1\u7aef\u54cd\u5e94\uff0c<br />\n\u4e0d\u9700\u8981\u4efb\u4f55\u989d\u5916\u7684 HTTP \u5934\u6807\u8bb0\u3002</p>\n<p><code>INSERT</code> \u548c <code>SELECT</code> \u67e5\u8be2\u4f1a\u5206\u522b\u8f6c\u6362\u4e3a <code>POST</code> \u548c <code>GET</code> \u8bf7\u6c42\u3002<br />\n\u5bf9\u4e8e <code>POST</code> \u8bf7\u6c42\u7684\u5904\u7406\uff0c\u8fdc\u7a0b\u670d\u52a1\u5668\u5fc5\u987b\u652f\u6301<br />\n<a href=\"https://en.wikipedia.org/wiki/Chunked_transfer_encoding\" rel=\"external nofollow noreferrer\">\u5206\u5757\u4f20\u8f93\u7f16\u7801</a>\u3002</p>\n<p><strong>\u793a\u4f8b\uff1a</strong></p>\n<p><strong>1.</strong> \u5728 Clickhouse \u670d\u52a1\u4e0a\u521b\u5efa\u4e00\u4e2a <code>url_engine_table</code> \u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">url_engine_table</span> <span class=\"p\">(</span><span class=\"n\">word</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt64</span><span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">URL</span><span class=\"p\">(</span><span class=\"s1\">&#39;http://127.0.0.1:12345/&#39;</span><span class=\"p\">,</span> <span class=\"n\">CSV</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>2.</strong> \u7528\u6807\u51c6\u7684 Python 3 \u5de5\u5177\u5e93\u521b\u5efa\u4e00\u4e2a\u57fa\u672c\u7684 HTTP \u670d\u52a1\u5e76<br />\n\u542f\u52a8\u5b83\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">from</span> <span class=\"nn\">http.server</span> <span class=\"kn\">import</span> <span class=\"n\">BaseHTTPRequestHandler</span><span class=\"p\">,</span> <span class=\"n\">HTTPServer</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">CSVHTTPServer</span><span class=\"p\">(</span><span class=\"n\">BaseHTTPRequestHandler</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">do_GET</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">send_response</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">send_header</span><span class=\"p\">(</span><span class=\"s1\">&#39;Content-type&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;text/csv&#39;</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">end_headers</span><span class=\"p\">()</span>\n\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wfile</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"nb\">bytes</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello,1</span><span class=\"se\">\\n</span><span class=\"s1\">World,2</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;utf-8&quot;</span><span class=\"p\">))</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;__main__&quot;</span><span class=\"p\">:</span>\n    <span class=\"n\">server_address</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s1\">&#39;127.0.0.1&#39;</span><span class=\"p\">,</span> <span class=\"mi\">12345</span><span class=\"p\">)</span>\n    <span class=\"n\">HTTPServer</span><span class=\"p\">(</span><span class=\"n\">server_address</span><span class=\"p\">,</span> <span class=\"n\">CSVHTTPServer</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">serve_forever</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>python3 server.py\n</code></pre></div>\n\n\n<p><strong>3.</strong> \u67e5\u8be2\u8bf7\u6c42:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">url_engine_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>");
            
            document.write("<span class=\"err\">\u250c\u2500word\u2500\u2500\u252c\u2500value\u2500\u2510</span>\n<span class=\"err\">\u2502 Hello \u2502     1 \u2502</span>\n<span class=\"err\">\u2502 World \u2502     2 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"gong-neng-shi-xian_1\">\u529f\u80fd\u5b9e\u73b0<a class=\"headerlink\" href=\"#gong-neng-shi-xian_1\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>\u8bfb\u5199\u64cd\u4f5c\u90fd\u652f\u6301\u5e76\u53d1</li>\n<li>\u4e0d\u652f\u6301\uff1a<ul>\n<li><code>ALTER</code> \u548c <code>SELECT...SAMPLE</code> \u64cd\u4f5c\u3002</li>\n<li>\u7d22\u5f15\u3002</li>\n<li>\u526f\u672c\u3002</li>\n</ul>\n</li>\n</ul>\n<p><a name=\"../../../../../../table_engines/view/\"></a><a name=\"../../../operations/table_engines/view/\"></a><a name=\"../../../table_engines/view/\"></a><a name=\"../../operations/table_engines/view/\"></a><a name=\"operations/table_engines/view/\"></a><a name=\"../../../../../operations/table_engines/view/\"></a><a name=\"../../../../table_engines/view/\"></a><a name=\"../../../../../table_engines/view/\"></a><a name=\"view/\"></a><a name=\"table_engines/view/\"></a><a name=\"../table_engines/view/\"></a><a name=\"../../../../operations/table_engines/view/\"></a><a name=\"../operations/table_engines/view/\"></a><a name=\"../../table_engines/view/\"></a></p>\n<h2 id=\"view\">View<a class=\"headerlink\" href=\"#view\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7528\u4e8e\u6784\u5efa\u89c6\u56fe\uff08\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <code>CREATE VIEW \u67e5\u8be2</code>\uff09\u3002 \u5b83\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u4ec5\u5b58\u50a8\u6307\u5b9a\u7684 <code>SELECT</code> \u67e5\u8be2\u3002 \u4ece\u8868\u4e2d\u8bfb\u53d6\u65f6\uff0c\u5b83\u4f1a\u8fd0\u884c\u6b64\u67e5\u8be2\uff08\u5e76\u4ece\u67e5\u8be2\u4e2d\u5220\u9664\u6240\u6709\u4e0d\u5fc5\u8981\u7684\u5217\uff09\u3002</p>\n<p><a name=\"../../../operations/table_engines/materializedview/\"></a><a name=\"../../../../../../table_engines/materializedview/\"></a><a name=\"operations/table_engines/materializedview/\"></a><a name=\"../../../../operations/table_engines/materializedview/\"></a><a name=\"../operations/table_engines/materializedview/\"></a><a name=\"../../table_engines/materializedview/\"></a><a name=\"materializedview/\"></a><a name=\"../../../table_engines/materializedview/\"></a><a name=\"../../../../table_engines/materializedview/\"></a><a name=\"../../operations/table_engines/materializedview/\"></a><a name=\"../../../../../table_engines/materializedview/\"></a><a name=\"../../../../../operations/table_engines/materializedview/\"></a><a name=\"../table_engines/materializedview/\"></a><a name=\"table_engines/materializedview/\"></a></p>\n<h2 id=\"wu-hua-shi-tu\">\u7269\u5316\u89c6\u56fe<a class=\"headerlink\" href=\"#wu-hua-shi-tu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7269\u5316\u89c6\u56fe\u7684\u4f7f\u7528\uff08\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 <a href=\"#../../query_language/create/\">CREATE TABLE</a> \uff09\u3002\u5b83\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u4e0d\u540c\u7684\u5f15\u64ce\u6765\u5b58\u50a8\u6570\u636e\uff0c\u8fd9\u4e2a\u5f15\u64ce\u8981\u5728\u521b\u5efa\u7269\u5316\u89c6\u56fe\u65f6\u6307\u5b9a\u3002\u5f53\u4ece\u8868\u4e2d\u8bfb\u53d6\u65f6\uff0c\u5b83\u5c31\u4f1a\u4f7f\u7528\u8be5\u5f15\u64ce\u3002</p>\n<p><a name=\"../../../../../../table_engines/memory/\"></a><a name=\"../../../../table_engines/memory/\"></a><a name=\"table_engines/memory/\"></a><a name=\"../../../table_engines/memory/\"></a><a name=\"../../../../../table_engines/memory/\"></a><a name=\"../../operations/table_engines/memory/\"></a><a name=\"operations/table_engines/memory/\"></a><a name=\"../../../../../operations/table_engines/memory/\"></a><a name=\"memory/\"></a><a name=\"../../table_engines/memory/\"></a><a name=\"../../../operations/table_engines/memory/\"></a><a name=\"../../../../operations/table_engines/memory/\"></a><a name=\"../operations/table_engines/memory/\"></a><a name=\"../table_engines/memory/\"></a></p>\n<h2 id=\"memory\">Memory<a class=\"headerlink\" href=\"#memory\" title=\"Permanent link\">&para;</a></h2>\n<p>Memory \u5f15\u64ce\u4ee5\u672a\u538b\u7f29\u7684\u5f62\u5f0f\u5c06\u6570\u636e\u5b58\u50a8\u5728 RAM \u4e2d\u3002\u6570\u636e\u5b8c\u5168\u4ee5\u8bfb\u53d6\u65f6\u83b7\u5f97\u7684\u5f62\u5f0f\u5b58\u50a8\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u4ece\u8fd9\u5f20\u8868\u4e2d\u8bfb\u53d6\u662f\u5f88\u8f7b\u677e\u7684\u3002\u5e76\u53d1\u6570\u636e\u8bbf\u95ee\u662f\u540c\u6b65\u7684\u3002\u9501\u8303\u56f4\u5c0f\uff1a\u8bfb\u5199\u64cd\u4f5c\u4e0d\u4f1a\u76f8\u4e92\u963b\u585e\u3002\u4e0d\u652f\u6301\u7d22\u5f15\u3002\u9605\u8bfb\u662f\u5e76\u884c\u5316\u7684\u3002\u5728\u7b80\u5355\u67e5\u8be2\u4e0a\u8fbe\u5230\u6700\u5927\u751f\u4ea7\u7387\uff08\u8d85\u8fc710 GB /\u79d2\uff09\uff0c\u56e0\u4e3a\u6ca1\u6709\u78c1\u76d8\u8bfb\u53d6\uff0c\u4e0d\u9700\u8981\u89e3\u538b\u7f29\u6216\u53cd\u5e8f\u5217\u5316\u6570\u636e\u3002\uff08\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u4e0e MergeTree \u5f15\u64ce\u7684\u6027\u80fd\u51e0\u4e4e\u4e00\u6837\u9ad8\uff09\u3002\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u5668\u65f6\uff0c\u8868\u4e2d\u7684\u6570\u636e\u6d88\u5931\uff0c\u8868\u5c06\u53d8\u4e3a\u7a7a\u3002\u901a\u5e38\uff0c\u4f7f\u7528\u6b64\u8868\u5f15\u64ce\u662f\u4e0d\u5408\u7406\u7684\u3002\u4f46\u662f\uff0c\u5b83\u53ef\u7528\u4e8e\u6d4b\u8bd5\uff0c\u4ee5\u53ca\u5728\u76f8\u5bf9\u8f83\u5c11\u7684\u884c\uff08\u6700\u591a\u7ea6100,000,000\uff09\u4e0a\u9700\u8981\u6700\u9ad8\u6027\u80fd\u7684\u67e5\u8be2\u3002</p>\n<p>Memory \u5f15\u64ce\u662f\u7531\u7cfb\u7edf\u7528\u4e8e\u4e34\u65f6\u8868\u8fdb\u884c\u5916\u90e8\u6570\u636e\u7684\u67e5\u8be2\uff08\u8bf7\u53c2\u9605 \"\u5916\u90e8\u6570\u636e\u7528\u4e8e\u8bf7\u6c42\u5904\u7406\" \u90e8\u5206\uff09\uff0c\u4ee5\u53ca\u7528\u4e8e\u5b9e\u73b0 <code>GLOBAL IN</code>\uff08\u8bf7\u53c2\u89c1 \"IN \u8fd0\u7b97\u7b26\" \u90e8\u5206\uff09\u3002</p>\n<p><a name=\"../../table_engines/buffer/\"></a><a name=\"../../operations/table_engines/buffer/\"></a><a name=\"../../../table_engines/buffer/\"></a><a name=\"../../../../operations/table_engines/buffer/\"></a><a name=\"buffer/\"></a><a name=\"../../../../table_engines/buffer/\"></a><a name=\"../operations/table_engines/buffer/\"></a><a name=\"table_engines/buffer/\"></a><a name=\"../../../../../../table_engines/buffer/\"></a><a name=\"../../../../../table_engines/buffer/\"></a><a name=\"operations/table_engines/buffer/\"></a><a name=\"../../../operations/table_engines/buffer/\"></a><a name=\"../table_engines/buffer/\"></a><a name=\"../../../../../operations/table_engines/buffer/\"></a></p>\n<h2 id=\"buffer\">Buffer<a class=\"headerlink\" href=\"#buffer\" title=\"Permanent link\">&para;</a></h2>\n<p>\u7f13\u51b2\u6570\u636e\u5199\u5165 RAM \u4e2d\uff0c\u5468\u671f\u6027\u5730\u5c06\u6570\u636e\u5237\u65b0\u5230\u53e6\u4e00\u4e2a\u8868\u3002\u5728\u8bfb\u53d6\u64cd\u4f5c\u65f6\uff0c\u540c\u65f6\u4ece\u7f13\u51b2\u533a\u548c\u53e6\u4e00\u4e2a\u8868\u8bfb\u53d6\u6570\u636e\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Buffer(database, table, num_layers, min_time, max_time, min_rows, max_rows, min_bytes, max_bytes)</span>\n</code></pre></div>\n\n\n<p>\u5f15\u64ce\u7684\u53c2\u6570\uff1adatabase\uff0ctable - \u8981\u5237\u65b0\u6570\u636e\u7684\u8868\u3002\u53ef\u4ee5\u4f7f\u7528\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u5e38\u91cf\u8868\u8fbe\u5f0f\u800c\u4e0d\u662f\u6570\u636e\u5e93\u540d\u79f0\u3002 num_layers - \u5e76\u884c\u5c42\u6570\u3002\u5728\u7269\u7406\u4e0a\uff0c\u8be5\u8868\u5c06\u8868\u793a\u4e3a num_layers \u4e2a\u72ec\u7acb\u7f13\u51b2\u533a\u3002\u5efa\u8bae\u503c\u4e3a16\u3002min_time\uff0cmax_time\uff0cmin_rows\uff0cmax_rows\uff0cmin_bytes\uff0cmax_bytes - \u4ece\u7f13\u51b2\u533a\u5237\u65b0\u6570\u636e\u7684\u6761\u4ef6\u3002</p>\n<p>\u5982\u679c\u6ee1\u8db3\u6240\u6709 \"min\" \u6761\u4ef6\u6216\u81f3\u5c11\u4e00\u4e2a \"max\" \u6761\u4ef6\uff0c\u5219\u4ece\u7f13\u51b2\u533a\u5237\u65b0\u6570\u636e\u5e76\u5c06\u5176\u5199\u5165\u76ee\u6807\u8868\u3002min_time\uff0cmax_time \u2014 \u4ece\u7b2c\u4e00\u6b21\u5199\u5165\u7f13\u51b2\u533a\u65f6\u8d77\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6761\u4ef6\u3002min_rows\uff0cmax_rows - \u7f13\u51b2\u533a\u4e2d\u884c\u6570\u7684\u6761\u4ef6\u3002min_bytes\uff0cmax_bytes - \u7f13\u51b2\u533a\u4e2d\u5b57\u8282\u6570\u7684\u6761\u4ef6\u3002</p>\n<p>\u5199\u5165\u65f6\uff0c\u6570\u636e\u4ece num_layers \u4e2a\u7f13\u51b2\u533a\u4e2d\u968f\u673a\u63d2\u5165\u3002\u6216\u8005\uff0c\u5982\u679c\u63d2\u5165\u6570\u636e\u7684\u5927\u5c0f\u8db3\u591f\u5927\uff08\u5927\u4e8e max_rows \u6216 max_bytes \uff09\uff0c\u5219\u4f1a\u7ed5\u8fc7\u7f13\u51b2\u533a\u5c06\u5176\u5199\u5165\u76ee\u6807\u8868\u3002</p>\n<p>\u6bcf\u4e2a \"num_layers\" \u7f13\u51b2\u533a\u5237\u65b0\u6570\u636e\u7684\u6761\u4ef6\u662f\u5206\u522b\u8ba1\u7b97\u3002\u4f8b\u5982\uff0c\u5982\u679c num_layers = 16 \u4e14 max_bytes = 100000000\uff0c\u5219\u6700\u5927RAM\u6d88\u8017\u5c06\u4e3a1.6 GB\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">merge</span><span class=\"p\">.</span><span class=\"n\">hits_buffer</span> <span class=\"k\">AS</span> <span class=\"n\">merge</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Buffer</span><span class=\"p\">(</span><span class=\"n\">merge</span><span class=\"p\">,</span> <span class=\"n\">hits</span><span class=\"p\">,</span> <span class=\"mi\">16</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"mi\">10000</span><span class=\"p\">,</span> <span class=\"mi\">1000000</span><span class=\"p\">,</span> <span class=\"mi\">10000000</span><span class=\"p\">,</span> <span class=\"mi\">100000000</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u521b\u5efa\u4e00\u4e2a \"merge.hits_buffer\" \u8868\uff0c\u5176\u7ed3\u6784\u4e0e \"merge.hits\" \u76f8\u540c\uff0c\u5e76\u4f7f\u7528 Buffer \u5f15\u64ce\u3002\u5199\u5165\u6b64\u8868\u65f6\uff0c\u6570\u636e\u7f13\u51b2\u5728 RAM \u4e2d\uff0c\u7136\u540e\u5199\u5165 \"merge.hits\" \u8868\u3002\u521b\u5efa\u4e8616\u4e2a\u7f13\u51b2\u533a\u3002\u5982\u679c\u5df2\u7ecf\u8fc7\u4e86100\u79d2\uff0c\u6216\u8005\u5df2\u5199\u5165100\u4e07\u884c\uff0c\u6216\u8005\u5df2\u5199\u5165100 MB\u6570\u636e\uff0c\u5219\u5237\u65b0\u6bcf\u4e2a\u7f13\u51b2\u533a\u7684\u6570\u636e\uff1b\u6216\u8005\u5982\u679c\u540c\u65f6\u5df2\u7ecf\u8fc7\u4e8610\u79d2\u5e76\u4e14\u5df2\u7ecf\u5199\u5165\u4e8610,000\u884c\u548c10 MB\u7684\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5982\u679c\u53ea\u5199\u4e86\u4e00\u884c\uff0c\u90a3\u4e48\u5728100\u79d2\u4e4b\u540e\uff0c\u90fd\u4f1a\u88ab\u5237\u65b0\u3002\u4f46\u662f\u5982\u679c\u5199\u4e86\u5f88\u591a\u884c\uff0c\u6570\u636e\u5c06\u4f1a\u66f4\u5feb\u5730\u5237\u65b0\u3002</p>\n<p>\u5f53\u670d\u52a1\u5668\u505c\u6b62\u65f6\uff0c\u4f7f\u7528 DROP TABLE \u6216 DETACH TABLE\uff0c\u7f13\u51b2\u533a\u6570\u636e\u4e5f\u4f1a\u5237\u65b0\u5230\u76ee\u6807\u8868\u3002</p>\n<p>\u53ef\u4ee5\u4e3a\u6570\u636e\u5e93\u548c\u8868\u540d\u5728\u5355\u4e2a\u5f15\u53f7\u4e2d\u8bbe\u7f6e\u7a7a\u5b57\u7b26\u4e32\u3002\u8fd9\u8868\u793a\u6ca1\u6709\u76ee\u7684\u5730\u8868\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53\u8fbe\u5230\u6570\u636e\u5237\u65b0\u6761\u4ef6\u65f6\uff0c\u7f13\u51b2\u5668\u88ab\u7b80\u5355\u5730\u6e05\u9664\u3002\u8fd9\u53ef\u80fd\u5bf9\u4e8e\u4fdd\u6301\u6570\u636e\u7a97\u53e3\u5728\u5185\u5b58\u4e2d\u662f\u6709\u7528\u7684\u3002</p>\n<p>\u4ece Buffer \u8868\u8bfb\u53d6\u65f6\uff0c\u5c06\u4ece\u7f13\u51b2\u533a\u548c\u76ee\u6807\u8868\uff08\u5982\u679c\u6709\uff09\u5904\u7406\u6570\u636e\u3002<br />\n\u8bf7\u6ce8\u610f\uff0cBuffer \u8868\u4e0d\u652f\u6301\u7d22\u5f15\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u88ab\u5b8c\u5168\u626b\u63cf\uff0c\u5bf9\u4e8e\u5927\u7f13\u51b2\u533a\u6765\u8bf4\u53ef\u80fd\u5f88\u6162\u3002\uff08\u5bf9\u4e8e\u76ee\u6807\u8868\u4e2d\u7684\u6570\u636e\uff0c\u5c06\u4f7f\u7528\u5b83\u652f\u6301\u7684\u7d22\u5f15\u3002\uff09</p>\n<p>\u5982\u679c Buffer \u8868\u4e2d\u7684\u5217\u96c6\u4e0e\u76ee\u6807\u8868\u4e2d\u7684\u5217\u96c6\u4e0d\u5339\u914d\uff0c\u5219\u4f1a\u63d2\u5165\u4e24\u4e2a\u8868\u4e2d\u5b58\u5728\u7684\u5217\u7684\u5b50\u96c6\u3002</p>\n<p>\u5982\u679c\u7c7b\u578b\u4e0e Buffer \u8868\u548c\u76ee\u6807\u8868\u4e2d\u7684\u67d0\u5217\u4e0d\u5339\u914d\uff0c\u5219\u4f1a\u5728\u670d\u52a1\u5668\u65e5\u5fd7\u4e2d\u8f93\u5165\u9519\u8bef\u6d88\u606f\u5e76\u6e05\u9664\u7f13\u51b2\u533a\u3002<br />\n\u5982\u679c\u5728\u5237\u65b0\u7f13\u51b2\u533a\u65f6\u76ee\u6807\u8868\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u53d1\u751f\u540c\u6837\u7684\u60c5\u51b5\u3002</p>\n<p>\u5982\u679c\u9700\u8981\u4e3a\u76ee\u6807\u8868\u548c Buffer \u8868\u8fd0\u884c ALTER\uff0c\u6211\u4eec\u5efa\u8bae\u5148\u5220\u9664 Buffer \u8868\uff0c\u4e3a\u76ee\u6807\u8868\u8fd0\u884c ALTER\uff0c\u7136\u540e\u518d\u6b21\u521b\u5efa Buffer \u8868\u3002</p>\n<p>\u5982\u679c\u670d\u52a1\u5668\u5f02\u5e38\u91cd\u542f\uff0c\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u5c06\u4e22\u5931\u3002</p>\n<p>PREWHERE\uff0cFINAL \u548c SAMPLE \u5bf9\u7f13\u51b2\u8868\u4e0d\u8d77\u4f5c\u7528\u3002\u8fd9\u4e9b\u6761\u4ef6\u5c06\u4f20\u9012\u5230\u76ee\u6807\u8868\uff0c\u4f46\u4e0d\u7528\u4e8e\u5904\u7406\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5efa\u8bae\u53ea\u4f7f\u7528Buffer\u8868\u8fdb\u884c\u5199\u5165\uff0c\u540c\u65f6\u4ece\u76ee\u6807\u8868\u8fdb\u884c\u8bfb\u53d6\u3002</p>\n<p>\u5c06\u6570\u636e\u6dfb\u52a0\u5230\u7f13\u51b2\u533a\u65f6\uff0c\u5176\u4e2d\u4e00\u4e2a\u7f13\u51b2\u533a\u88ab\u9501\u5b9a\u3002\u5982\u679c\u540c\u65f6\u4ece\u8868\u6267\u884c\u8bfb\u64cd\u4f5c\uff0c\u5219\u4f1a\u5bfc\u81f4\u5ef6\u8fdf\u3002</p>\n<p>\u63d2\u5165\u5230 Buffer \u8868\u4e2d\u7684\u6570\u636e\u53ef\u80fd\u4ee5\u4e0d\u540c\u7684\u987a\u5e8f\u548c\u4e0d\u540c\u7684\u5757\u5199\u5165\u76ee\u6807\u8868\u4e2d\u3002\u56e0\u6b64\uff0cBuffer \u8868\u5f88\u96be\u7528\u4e8e\u6b63\u786e\u5199\u5165 CollapsingMergeTree\u3002\u4e3a\u907f\u514d\u51fa\u73b0\u95ee\u9898\uff0c\u60a8\u53ef\u4ee5\u5c06 \"num_layers\" \u8bbe\u7f6e\u4e3a1\u3002</p>\n<p>\u5982\u679c\u76ee\u6807\u8868\u662f\u590d\u5236\u8868\uff0c\u5219\u5728\u5199\u5165 Buffer \u8868\u65f6\u4f1a\u4e22\u5931\u590d\u5236\u8868\u7684\u67d0\u4e9b\u9884\u671f\u7279\u5f81\u3002\u6570\u636e\u90e8\u5206\u7684\u884c\u6b21\u5e8f\u548c\u5927\u5c0f\u7684\u968f\u673a\u53d8\u5316\u5bfc\u81f4\u6570\u636e\u4e0d\u80fd\u53bb\u91cd\uff0c\u8fd9\u610f\u5473\u7740\u65e0\u6cd5\u5bf9\u590d\u5236\u8868\u8fdb\u884c\u53ef\u9760\u7684 \"exactly once\" \u5199\u5165\u3002</p>\n<p>\u7531\u4e8e\u8fd9\u4e9b\u7f3a\u70b9\uff0c\u6211\u4eec\u53ea\u5efa\u8bae\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\u4f7f\u7528 Buffer \u8868\u3002</p>\n<p>\u5f53\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u4ece\u5927\u91cf\u670d\u52a1\u5668\u63a5\u6536\u5230\u592a\u591a INSERTs \u5e76\u4e14\u5728\u63d2\u5165\u4e4b\u524d\u65e0\u6cd5\u7f13\u51b2\u6570\u636e\u65f6\u4f7f\u7528 Buffer \u8868\uff0c\u8fd9\u610f\u5473\u7740\u8fd9\u4e9b INSERTs \u4e0d\u80fd\u8db3\u591f\u5feb\u5730\u6267\u884c\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u4e00\u6b21\u63d2\u5165\u4e00\u884c\u6570\u636e\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u5373\u4f7f\u5bf9\u4e8e Buffer \u8868\u4e5f\u662f\u5982\u6b64\u3002\u8fd9\u5c06\u53ea\u4ea7\u751f\u6bcf\u79d2\u51e0\u5343\u884c\u7684\u901f\u5ea6\uff0c\u800c\u63d2\u5165\u66f4\u5927\u7684\u6570\u636e\u5757\u6bcf\u79d2\u53ef\u4ee5\u4ea7\u751f\u8d85\u8fc7\u4e00\u767e\u4e07\u884c\uff08\u53c2\u89c1 \"\u6027\u80fd\" \u90e8\u5206\uff09\u3002</p>\n<p><a name=\"../query_language/\"></a><a name=\"../../query_language/\"></a><a name=\"query_language/\"></a><a name=\"../../../../query_language/\"></a><a name=\"../../../../../query_language/\"></a><a name=\"../../../query_language/\"></a></p>\n<h2 id=\"sql-reference\">SQL Reference<a class=\"headerlink\" href=\"#sql-reference\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"#select/\">SELECT</a></li>\n<li><a href=\"#insert_into/\">INSERT INTO</a></li>\n<li><a href=\"#create/\">CREATE</a></li>\n<li><a href=\"#query_language_queries_alter\">ALTER</a></li>\n<li><a href=\"#misc/\">Other types of queries</a></li>\n</ul>\n<p><a name=\"select/\"></a><a name=\"../../query_language/select/\"></a><a name=\"../../../../query_language/select/\"></a><a name=\"query_language/select/\"></a><a name=\"../../../query_language/select/\"></a><a name=\"../query_language/select/\"></a><a name=\"../../../../../query_language/select/\"></a></p>\n<h2 id=\"select-cha-xun-yu-fa\">SELECT \u67e5\u8be2\u8bed\u6cd5<a class=\"headerlink\" href=\"#select-cha-xun-yu-fa\" title=\"Permanent link\">&para;</a></h2>\n<p><code>SELECT</code> \u8bed\u53e5\u7528\u4e8e\u6267\u884c\u6570\u636e\u7684\u68c0\u7d22\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"p\">[</span><span class=\"k\">DISTINCT</span><span class=\"p\">]</span> <span class=\"n\">expr_list</span>\n    <span class=\"p\">[</span><span class=\"k\">FROM</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"o\">|</span> <span class=\"p\">(</span><span class=\"n\">subquery</span><span class=\"p\">)</span> <span class=\"o\">|</span> <span class=\"n\">table_function</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">FINAL</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"n\">sample_coeff</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"p\">...]</span>\n    <span class=\"p\">[</span><span class=\"k\">GLOBAL</span><span class=\"p\">]</span> <span class=\"k\">ANY</span><span class=\"o\">|</span><span class=\"k\">ALL</span> <span class=\"k\">INNER</span><span class=\"o\">|</span><span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"p\">(</span><span class=\"n\">subquery</span><span class=\"p\">)</span><span class=\"o\">|</span><span class=\"k\">table</span> <span class=\"k\">USING</span> <span class=\"n\">columns_list</span>\n    <span class=\"p\">[</span><span class=\"n\">PREWHERE</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"k\">WHERE</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">expr_list</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">WITH</span> <span class=\"n\">TOTALS</span><span class=\"p\">]</span>\n    <");
            
            document.write("span class=\"p\">[</span><span class=\"k\">HAVING</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr_list</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"k\">LIMIT</span> <span class=\"p\">[</span><span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"p\">]</span><span class=\"n\">m</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"k\">UNION</span> <span class=\"k\">ALL</span> <span class=\"p\">...]</span>\n    <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n    <span class=\"p\">[</span><span class=\"k\">LIMIT</span> <span class=\"n\">n</span> <span class=\"k\">BY</span> <span class=\"n\">columns</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>\u6240\u6709\u7684\u5b50\u53e5\u90fd\u662f\u53ef\u9009\u7684\uff0c\u9664\u4e86SELECT\u4e4b\u540e\u7684\u8868\u8fbe\u5f0f\u5217\u8868(expr_list)\u3002<br />\n\u4e0b\u9762\u5c06\u6309\u7167\u67e5\u8be2\u8fd0\u884c\u7684\u987a\u5e8f\u9010\u4e00\u5bf9\u5404\u4e2a\u5b50\u53e5\u8fdb\u884c\u8bf4\u660e\u3002</p>\n<p>\u5982\u679c\u67e5\u8be2\u4e2d\u4e0d\u5305\u542b<code>DISTINCT</code>\uff0c<code>GROUP BY</code>\uff0c<code>ORDER BY</code>\u5b50\u53e5\u4ee5\u53ca<code>IN</code>\u548c<code>JOIN</code>\u5b50\u67e5\u8be2\uff0c\u90a3\u4e48\u5b83\u5c06\u4ec5\u4f7f\u7528O(1)\u6570\u91cf\u7684\u5185\u5b58\u6765\u5b8c\u5168\u6d41\u5f0f\u7684\u5904\u7406\u67e5\u8be2<br />\n\u5426\u5219\uff0c\u8fd9\u4e2a\u67e5\u8be2\u5c06\u6d88\u8017\u5927\u91cf\u7684\u5185\u5b58\uff0c\u9664\u975e\u4f60\u6307\u5b9a\u4e86\u8fd9\u4e9b\u7cfb\u7edf\u914d\u7f6e\uff1a<code>max_memory_usage</code>, <code>max_rows_to_group_by</code>, <code>max_rows_to_sort</code>, <code>max_rows_in_distinct</code>, <code>max_bytes_in_distinct</code>, <code>max_rows_in_set</code>, <code>max_bytes_in_set</code>, <code>max_rows_in_join</code>, <code>max_bytes_in_join</code>, <code>max_bytes_before_external_sort</code>, <code>max_bytes_before_external_group_by</code>\u3002\u5b83\u4eec\u89c4\u5b9a\u4e86\u53ef\u4ee5\u4f7f\u7528\u5916\u90e8\u6392\u5e8f\uff08\u5c06\u4e34\u65f6\u8868\u5b58\u50a8\u5230\u78c1\u76d8\u4e2d\uff09\u4ee5\u53ca\u5916\u90e8\u805a\u5408\uff0c<code>\u76ee\u524d\u7cfb\u7edf\u4e0d\u5b58\u5728\u5173\u4e8eJoin\u7684\u914d\u7f6e</code>\uff0c\u66f4\u591a\u5173\u4e8e\u5b83\u4eec\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u53c2\u89c1\u201c\u914d\u7f6e\u201d\u90e8\u5206\u3002</p>\n<h4 id=\"select-from\">FROM \u5b50\u53e5<a class=\"headerlink\" href=\"#select-from\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5982\u679c\u67e5\u8be2\u4e2d\u4e0d\u5305\u542bFROM\u5b50\u53e5\uff0c\u90a3\u4e48\u5c06\u8bfb\u53d6<code>system.one</code>\u3002<br />\n<code>system.one</code>\u4e2d\u4ec5\u5305\u542b\u4e00\u884c\u6570\u636e\uff08\u6b64\u8868\u5b9e\u73b0\u4e86\u4e0e\u5176\u4ed6\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d\u7684DUAL\u76f8\u540c\u7684\u529f\u80fd\uff09\u3002</p>\n<p>FROM\u5b50\u53e5\u89c4\u5b9a\u4e86\u5c06\u4ece\u54ea\u4e2a\u8868\u3001\u6216\u5b50\u67e5\u8be2\u3001\u6216\u8868\u51fd\u6570\u4e2d\u8bfb\u53d6\u6570\u636e\uff1b\u540c\u65f6ARRAY JOIN\u5b50\u53e5\u548cJOIN\u5b50\u53e5\u4e5f\u53ef\u4ee5\u51fa\u73b0\u5728\u8fd9\u91cc\uff08\u89c1\u540e\u6587\uff09\u3002</p>\n<p>\u53ef\u4ee5\u4f7f\u7528\u5305\u542b\u5728\u62ec\u53f7\u91cc\u7684\u5b50\u67e5\u8be2\u6765\u66ff\u4ee3\u8868\u3002<br />\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b50\u67e5\u8be2\u7684\u5904\u7406\u5c06\u4f1a\u6784\u5efa\u5728\u5916\u90e8\u7684\u67e5\u8be2\u5185\u90e8\u3002<br />\n\u4e0d\u540c\u4e8eSQL\u6807\u51c6\uff0c\u5b50\u67e5\u8be2\u540e\u65e0\u9700\u6307\u5b9a\u522b\u540d\u3002\u4e3a\u4e86\u517c\u5bb9\uff0c\u4f60\u53ef\u4ee5\u5728\u5b50\u67e5\u8be2\u540e\u6dfb\u52a0\u2018AS \u522b\u540d\u2019\uff0c\u4f46\u662f\u6307\u5b9a\u7684\u540d\u5b57\u4e0d\u80fd\u88ab\u4f7f\u7528\u5728\u4efb\u4f55\u5730\u65b9\u3002</p>\n<p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8868\u51fd\u6570\u6765\u4ee3\u66ff\u8868\uff0c\u6709\u5173\u4fe1\u606f\uff0c\u53c2\u89c1\u201c\u8868\u51fd\u6570\u201d\u3002</p>\n<p>\u6267\u884c\u67e5\u8be2\u65f6\uff0c\u5728\u67e5\u8be2\u4e2d\u5217\u51fa\u7684\u6240\u6709\u5217\u90fd\u5c06\u4ece\u5bf9\u5e94\u7684\u8868\u4e2d\u63d0\u53d6\u6570\u636e\uff1b\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u5b50\u67e5\u8be2\u7684\u65b9\u5f0f\uff0c\u5219\u4efb\u4f55\u5728\u5916\u90e8\u67e5\u8be2\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u5b50\u67e5\u8be2\u5c06\u4ece\u67e5\u8be2\u4e2d\u5ffd\u7565\u5b83\u4eec\uff1b<br />\n\u5982\u679c\u4f60\u7684\u67e5\u8be2\u6ca1\u6709\u5217\u51fa\u4efb\u4f55\u7684\u5217\uff08\u4f8b\u5982\uff0cSELECT count() FROM t\uff09\uff0c\u5219\u5c06\u989d\u5916\u7684\u4ece\u8868\u4e2d\u63d0\u53d6\u4e00\u4e9b\u5217\uff08\u6700\u597d\u7684\u60c5\u51b5\u4e0b\u662f\u6700\u5c0f\u7684\u5217\uff09\uff0c\u4ee5\u4fbf\u8ba1\u7b97\u884c\u6570\u3002</p>\n<p>\u6700\u540e\u7684FINAL\u4fee\u9970\u7b26\u4ec5\u80fd\u591f\u88ab\u4f7f\u7528\u5728SELECT from CollapsingMergeTree\u573a\u666f\u4e2d\u3002\u5f53\u4f60\u4e3aFROM\u6307\u5b9a\u4e86FINAL\u4fee\u9970\u7b26\u65f6\uff0c\u4f60\u7684\u67e5\u8be2\u7ed3\u679c\u5c06\u4f1a\u5728\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u88ab\u805a\u5408\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u5c06\u5728\u5355\u4e2a\u6d41\u4e2d\u8bfb\u53d6\u6240\u6709\u76f8\u5173\u7684\u4e3b\u952e\u5217\uff0c\u540c\u65f6\u5bf9\u9700\u8981\u7684\u6570\u636e\u8fdb\u884c\u5408\u5e76\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5f53\u4f7f\u7528FINAL\u4fee\u9970\u7b26\u65f6\uff0c\u67e5\u8be2\u5c06\u4f1a\u5904\u7406\u7684\u66f4\u6162\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4f60\u5e94\u8be5\u907f\u514d\u4f7f\u7528FINAL\u4fee\u9970\u7b26\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u201cCollapsingMergeTree\u5f15\u64ce\u201d\u90e8\u5206\u3002</p>\n<h4 id=\"select-sample-clause\">SAMPLE \u5b50\u53e5<a class=\"headerlink\" href=\"#select-sample-clause\" title=\"Permanent link\">&para;</a></h4>\n<p>\u901a\u8fc7SAMPLE\u5b50\u53e5\u7528\u6237\u53ef\u4ee5\u8fdb\u884c\u8fd1\u4f3c\u67e5\u8be2\u5904\u7406\uff0c\u8fd1\u4f3c\u67e5\u8be2\u5904\u7406\u4ec5\u80fd\u5de5\u4f5c\u5728MergeTree*\u7c7b\u578b\u7684\u8868\u4e2d\uff0c\u5e76\u4e14\u5728\u521b\u5efa\u8868\u65f6\u9700\u8981\u60a8\u6307\u5b9a\u91c7\u6837\u8868\u8fbe\u5f0f\uff08\u53c2\u89c1\u201cMergeTree \u5f15\u64ce\u201d\u90e8\u5206\uff09\u3002</p>\n<p><code>SAMPLE</code>\u5b50\u53e5\u53ef\u4ee5\u4f7f\u7528<code>SAMPLE k</code>\u6765\u8868\u793a\uff0c\u5176\u4e2dk\u53ef\u4ee5\u662f0\u52301\u7684\u5c0f\u6570\u503c\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u6b63\u6574\u6570\u503c\u3002</p>\n<p>\u5f53k\u4e3a0\u52301\u7684\u5c0f\u6570\u65f6\uff0c\u67e5\u8be2\u5c06\u4f7f\u7528'k'\u4f5c\u4e3a\u767e\u5206\u6bd4\u9009\u53d6\u6570\u636e\u3002\u4f8b\u5982\uff0c<code>SAMPLE 0.1</code>\u67e5\u8be2\u53ea\u4f1a\u68c0\u7d22\u6570\u636e\u603b\u91cf\u768410%\u3002<br />\n\u5f53k\u4e3a\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u6b63\u6574\u6570\u65f6\uff0c\u67e5\u8be2\u5c06\u4f7f\u7528'k'\u4f5c\u4e3a\u6700\u5927\u6837\u672c\u6570\u3002\u4f8b\u5982\uff0c <code>SAMPLE 10000000</code>\u67e5\u8be2\u53ea\u4f1a\u68c0\u7d22\u6700\u591a10\uff0c000\uff0c000\u884c\u6570\u636e\u3002</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">Title</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"o\">*</span> <span class=\"mi\">10</span> <span class=\"k\">AS</span> <span class=\"n\">PageViews</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits_distributed</span>\n<span class=\"n\">SAMPLE</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">1</span>\n<span class=\"k\">WHERE</span>\n    <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span>\n    <span class=\"k\">AND</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">EventDate</span><span class=\"p\">)</span> <span class=\"o\">&gt;=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2013-01-29&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">AND</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">EventDate</span><span class=\"p\">)</span> <span class=\"o\">&lt;=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2013-02-04&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">AND</span> <span class=\"k\">NOT</span> <span class=\"n\">DontCountHits</span>\n    <span class=\"k\">AND</span> <span class=\"k\">NOT</span> <span class=\"n\">Refresh</span>\n    <span class=\"k\">AND</span> <span class=\"n\">Title</span> <span class=\"o\">!=</span> <span class=\"s1\">&#39;&#39;</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Title</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">PageViews</span> <span class=\"k\">DESC</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1000</span>\n</code></pre></div>\n\n\n<p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u67e5\u8be2\u5c06\u68c0\u7d22\u6570\u636e\u603b\u91cf\u76840.1 \uff0810%\uff09\u7684\u6570\u636e\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u67e5\u8be2\u4e0d\u4f1a\u81ea\u52a8\u6821\u6b63\u805a\u5408\u51fd\u6570\u6700\u7ec8\u7684\u7ed3\u679c\uff0c\u6240\u4ee5\u4e3a\u4e86\u5f97\u5230\u66f4\u52a0\u7cbe\u786e\u7684\u7ed3\u679c\uff0c\u9700\u8981\u5c06<code>count()</code>\u7684\u7ed3\u679c\u624b\u52a8\u4e58\u4ee510\u3002</p>\n<p>\u5f53\u4f7f\u7528\u50cf<code>SAMPLE 10000000</code>\u8fd9\u6837\u7684\u65b9\u5f0f\u8fdb\u884c\u8fd1\u4f3c\u67e5\u8be2\u65f6\uff0c\u7531\u4e8e\u6ca1\u6709\u4e86\u4efb\u4f55\u5173\u4e8e\u5c06\u4f1a\u5904\u7406\u4e86\u54ea\u4e9b\u6570\u636e\u6216\u805a\u5408\u51fd\u6570\u5e94\u8be5\u88ab\u4e58\u4ee5\u51e0\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u9002\u5408\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\u4f7f\u7528\u3002</p>\n<p>\u4f7f\u7528\u76f8\u540c\u7684\u91c7\u6837\u7387\u5f97\u5230\u7684\u7ed3\u679c\u603b\u662f\u4e00\u81f4\u7684\uff1a\u5982\u679c\u6211\u4eec\u80fd\u591f\u770b\u5230\u6240\u6709\u53ef\u80fd\u5b58\u5728\u5728\u8868\u4e2d\u7684\u6570\u636e\uff0c\u90a3\u4e48\u76f8\u540c\u7684\u91c7\u6837\u7387\u603b\u662f\u80fd\u591f\u5f97\u5230\u76f8\u540c\u7684\u7ed3\u679c\uff08\u5728\u5efa\u8868\u65f6\u4f7f\u7528\u76f8\u540c\u7684\u91c7\u6837\u8868\u8fbe\u5f0f\uff09\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u7cfb\u7edf\u5728\u4e0d\u540c\u7684\u65f6\u95f4\uff0c\u4e0d\u540c\u7684\u670d\u52a1\u5668\uff0c\u4e0d\u540c\u8868\u4e0a\u603b\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u5bf9\u6570\u636e\u8fdb\u884c\u91c7\u6837\u3002</p>\n<p>\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u91c7\u6837\u7684\u65b9\u5f0f\u83b7\u53d6\u5230\u4e0e\u4e0d\u8fdb\u884c\u91c7\u6837\u76f8\u540c\u7684\u7528\u6237ID\u7684\u5217\u8868\u3002\u8fd9\u5c06\u8868\u660e\uff0c\u4f60\u53ef\u4ee5\u5728IN\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528\u91c7\u6837\uff0c\u6216\u8005\u4f7f\u7528\u91c7\u6837\u7684\u7ed3\u679c\u4e0e\u5176\u4ed6\u67e5\u8be2\u8fdb\u884c\u5173\u8054\u3002</p>\n<h4 id=\"select-array-join-clause\">ARRAY JOIN \u5b50\u53e5<a class=\"headerlink\" href=\"#select-array-join-clause\" title=\"Permanent link\">&para;</a></h4>\n<p>ARRAY JOIN\u5b50\u53e5\u53ef\u4ee5\u5e2e\u52a9\u67e5\u8be2\u8fdb\u884c\u4e0e\u6570\u7ec4\u548cnested\u6570\u636e\u7c7b\u578b\u7684\u8fde\u63a5\u3002\u5b83\u6709\u70b9\u7c7b\u4f3carrayJoin\u51fd\u6570\uff0c\u4f46\u5b83\u7684\u529f\u80fd\u66f4\u5e7f\u6cdb\u3002</p>\n<p><code>ARRAY JOIN</code> \u672c\u8d28\u4e0a\u7b49\u540c\u4e8e<code>INNERT JOIN</code>\u6570\u7ec4\u3002 \u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">arrays_test</span> <span class=\"p\">(</span><span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">arr</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">))</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">arrays_test</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">arr</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span>\n\n<span class=\"n\">Ok</span><span class=\"p\">.</span>\n\n<span class=\"mi\">0</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">arrays_test</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;World&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Goodbye&#39;</span><span class=\"p\">,</span> <span class=\"p\">[])</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">arrays_test</span> <span class=\"k\">VALUES</span>\n\n<span class=\"n\">Ok</span><span class=\"p\">.</span>\n\n<span class=\"mi\">3</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">arr</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Goodbye</span> <span class=\"err\">\u2502</span> <span class=\"p\">[]</span>      <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">3</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span> <span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">arr</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hell");
            
            document.write("o</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u4f60\u8fd8\u53ef\u4ee5\u4e3aARRAY JOIN\u5b50\u53e5\u6307\u5b9a\u4e00\u4e2a\u522b\u540d\uff0c\u8fd9\u65f6\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u522b\u540d\u6765\u8bbf\u95ee\u6570\u7ec4\u4e2d\u7684\u6570\u636e\uff0c\u4f46\u662f\u6570\u636e\u672c\u8eab\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7\u539f\u6765\u7684\u540d\u79f0\u8fdb\u884c\u8bbf\u95ee\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span> <span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">arr</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">a</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u5f53\u591a\u4e2a\u5177\u6709\u76f8\u540c\u5927\u5c0f\u7684\u6570\u7ec4\u4f7f\u7528\u9017\u53f7\u5206\u5272\u51fa\u73b0\u5728ARRAY JOIN\u5b50\u53e5\u4e2d\u65f6\uff0cARRAY JOIN\u4f1a\u5c06\u5b83\u4eec\u540c\u65f6\u6267\u884c\uff08\u76f4\u63a5\u5408\u5e76\uff0c\u800c\u4e0d\u662f\u5b83\u4eec\u7684\u7b1b\u5361\u5c14\u79ef\uff09\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">mapped</span> <span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">arrayMap</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">-&gt;</span> <span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">mapped</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">mapped</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">arrayMap</span><span class=\"p\">(</span><span class=\"n\">lambda</span><span class=\"p\">(</span><span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">),</span> <span class=\"n\">plus</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)),</span> <span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">mapped</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">arr</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">a</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">num</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">mapped</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">6</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span");
            
            document.write(" class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">arr</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">a</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">num</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>               <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>               <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]</span>             <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]</span>             <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">3</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]</span>             <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u53e6\u5916ARRAY JOIN\u4e5f\u53ef\u4ee5\u5de5\u4f5c\u5728nested\u6570\u636e\u7ed3\u6784\u4e0a\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">nested_test</span> <span class=\"p\">(</span><span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">nest</span> <span class=\"n\">Nested</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">y</span> <span class=\"n\">UInt32</span><span class=\"p\">))</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">nested_test</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">nest</span> <span class=\"n\">Nested</span><span class=\"p\">(</span>\n    <span class=\"n\">x</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">y</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span>\n\n<span class=\"n\">Ok</span><span class=\"p\">.</span>\n\n<span class=\"mi\">0</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">006</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">nested_test</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;World&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Goodbye&#39;</span><span class=\"p\">,</span> <span class=\"p\">[],</span> <span class=\"p\">[])</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">nested_test</span> <span class=\"k\">VALUES</span>\n\n<span class=\"n\">Ok</span><span class=\"p\">.</span>\n\n<span class=\"mi\">3</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]</span>    <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Goodbye</span> <span class=\"err\">\u2502</span> <span class=\"p\">[]</span>      <span class=\"err\">\u2502</span> <span class=\"p\">[]</span>         <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">3</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span> <span class=\"k\">FROM</span> <span class=\"n\">nested_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><s");
            
            document.write("pan class=\"n\">x</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">10</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">20</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">30</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">40</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">50</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u5f53\u4f60\u5728ARRAY JOIN\u6307\u5b9anested\u6570\u636e\u7c7b\u578b\u7684\u540d\u79f0\u65f6\uff0c\u5176\u4f5c\u7528\u4e0e\u4e0e\u5305\u542b\u6240\u6709\u6570\u7ec4\u5143\u7d20\u7684ARRAY JOIN\u76f8\u540c\uff0c\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span> <span class=\"k\">FROM</span> <span class=\"n\">nested_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">10</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">20</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">30</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">40</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>     <span class=\"mi\">50</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u662f\u53ef\u4ee5\u8fd0\u884c\u7684\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span> <span class=\"k\">FROM</span> <span class=\"n\">nested_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">1</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]</span>    <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">2</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]</span>    <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">3</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">4</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">5</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u4e3a\u4e86\u65b9\u4fbf\u4f7f\u7528\u539f\u6765\u7684nested\u7c7b\u578b\u7684\u6570\u7ec4\uff0c\u4f60\u53ef\u4ee5\u4e3anested\u7c7b\u578b\u5b9a\u4e49\u4e00\u4e2a\u522b\u540d\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span> <span class=\"k\">FROM</span> <span class=\"n\">nested_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span> <span class=\"k\">AS</span> <span class=\"n\">n</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span> <span class=\"k\">AS</span> <span class=\"n\">n</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span");
            
            document.write("> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">10</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]</span>    <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">20</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]</span>    <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">30</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">40</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">50</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">001</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u4f7f\u7528arrayEnumerate\u51fd\u6570\u7684\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">num</span> <span class=\"k\">FROM</span> <span class=\"n\">nested_test</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span> <span class=\"k\">AS</span> <span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"n\">num</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span> <span class=\"k\">AS</span> <span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">s</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2500\u252c\u2500</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">num</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">10</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]</span>    <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">20</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]</span>   <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]</span>    <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">30</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">40</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">World</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">5</span> <span class=\"err\">\u2502</span>  <span class=\"mi\">50</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">5</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>\u5728\u4e00\u4e2a\u67e5\u8be2\u4e2d\u53ea\u80fd\u51fa\u73b0\u4e00\u4e2aARRAY JOIN\u5b50\u53e5\u3002</p>\n<p>\u5982\u679c\u5728WHERE/PREWHERE\u5b50\u53e5\u4e2d\u4f7f\u7528\u4e86ARRAY JOIN\u5b50\u53e5\u7684\u7ed3\u679c\uff0c\u5b83\u5c06\u4f18\u5148\u4e8eWHERE/PREWHERE\u5b50\u53e5\u6267\u884c\uff0c\u5426\u5219\u5b83\u5c06\u5728WHERE/PRWHERE\u5b50\u53e5\u4e4b\u540e\u6267\u884c\uff0c\u4ee5\u4fbf\u51cf\u5c11\u8ba1\u7b97\u3002</p>\n<h4 id=\"select-join\">JOIN \u5b50\u53e5<a class=\"headerlink\" href=\"#select-join\" title=\"Permanent link\">&para;</a></h4>\n<p>JOIN\u5b50\u53e5\u7528\u4e8e\u8fde\u63a5\u6570\u636e\uff0c\u4f5c\u7528\u4e0e<a href=\"https://en.wikipedia.org/wiki/Join_(SQL)\" rel=\"external nofollow noreferrer\">SQL JOIN</a>\u7684\u5b9a\u4e49\u76f8\u540c\u3002</p>\n<div class=\"admonition info\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u4e0e <a href=\"#select-array-join-clause\">ARRAY JOIN</a> \u6ca1\u6709\u5173\u7cfb.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">&lt;</span><span class=\"n\">expr_list</span><span class=\"o\">&gt;</span>\n<span class=\"k\">FROM</span> <span class=\"o\">&lt;</span><span class=\"n\">left_subquery</span><span class=\"o\">&gt;</span>\n<span class=\"p\">[</span><span class=\"k\">G");
            
            document.write("LOBAL</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">ANY</span><span class=\"o\">|</span><span class=\"k\">ALL</span><span class=\"p\">]</span> <span class=\"k\">INNER</span><span class=\"o\">|</span><span class=\"k\">LEFT</span><span class=\"o\">|</span><span class=\"k\">RIGHT</span><span class=\"o\">|</span><span class=\"k\">FULL</span><span class=\"o\">|</span><span class=\"k\">CROSS</span> <span class=\"p\">[</span><span class=\"k\">OUTER</span><span class=\"p\">]</span> <span class=\"k\">JOIN</span> <span class=\"o\">&lt;</span><span class=\"n\">right_subquery</span><span class=\"o\">&gt;</span>\n<span class=\"p\">(</span><span class=\"k\">ON</span> <span class=\"o\">&lt;</span><span class=\"n\">expr_list</span><span class=\"o\">&gt;</span><span class=\"p\">)</span><span class=\"o\">|</span><span class=\"p\">(</span><span class=\"k\">USING</span> <span class=\"o\">&lt;</span><span class=\"n\">column_list</span><span class=\"o\">&gt;</span><span class=\"p\">)</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u53ef\u4ee5\u4f7f\u7528\u5177\u4f53\u7684\u8868\u540d\u6765\u4ee3\u66ff<code>&lt;left_subquery&gt;</code>\u4e0e<code>&lt;right_subquery&gt;</code>\u3002\u4f46\u8fd9\u4e0e\u4f7f\u7528<code>SELECT * FROM table</code>\u5b50\u67e5\u8be2\u7684\u65b9\u5f0f\u76f8\u540c\u3002\u9664\u975e\u4f60\u7684\u8868\u662f[Join](../operations/table_engines/join.md<br />\n<strong>\u652f\u6301\u7684<code>JOIN</code>\u7c7b\u578b</strong></p>\n<ul>\n<li><code>INNER JOIN</code></li>\n<li><code>LEFT OUTER JOIN</code></li>\n<li><code>RIGHT OUTER JOIN</code></li>\n<li><code>FULL OUTER JOIN</code></li>\n<li><code>CROSS JOIN</code></li>\n</ul>\n<p>\u4f60\u53ef\u4ee5\u8df3\u8fc7\u9ed8\u8ba4\u7684<code>OUTER</code>\u5173\u952e\u5b57\u3002</p>\n<p><strong><code>ANY</code> \u4e0e <code>ALL</code></strong></p>\n<p>\u5728\u4f7f\u7528<code>ALL</code>\u4fee\u9970\u7b26\u5bf9JOIN\u8fdb\u884c\u4fee\u9970\u65f6\uff0c\u5982\u679c\u53f3\u8868\u4e2d\u5b58\u5728\u591a\u4e2a\u4e0e\u5de6\u8868\u5173\u8054\u7684\u6570\u636e\uff0c\u90a3\u4e48\u7cfb\u7edf\u5219\u5c06\u53f3\u8868\u4e2d\u6240\u6709\u53ef\u4ee5\u4e0e\u5de6\u8868\u5173\u8054\u7684\u6570\u636e\u5168\u90e8\u8fd4\u56de\u5728\u7ed3\u679c\u4e2d\u3002\u8fd9\u4e0eSQL\u6807\u51c6\u7684JOIN\u884c\u4e3a\u76f8\u540c\u3002<br />\n\u5728\u4f7f\u7528<code>ANY</code>\u4fee\u9970\u7b26\u5bf9JOIN\u8fdb\u884c\u4fee\u9970\u65f6\uff0c\u5982\u679c\u53f3\u8868\u4e2d\u5b58\u5728\u591a\u4e2a\u4e0e\u5de6\u8868\u5173\u8054\u7684\u6570\u636e\uff0c\u90a3\u4e48\u7cfb\u7edf\u4ec5\u8fd4\u56de\u7b2c\u4e00\u4e2a\u4e0e\u5de6\u8868\u5339\u914d\u7684\u7ed3\u679c\u3002\u5982\u679c\u5de6\u8868\u4e0e\u53f3\u8868\u4e00\u4e00\u5bf9\u5e94\uff0c\u4e0d\u5b58\u5728\u591a\u4f59\u7684\u884c\u65f6\uff0c<code>ANY</code>\u4e0e<code>ALL</code>\u7684\u7ed3\u679c\u76f8\u540c\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728\u4f1a\u8bdd\u4e2d\u901a\u8fc7\u8bbe\u7f6e <a href=\"#../operations/settings/settings/\">join_default_strictness</a> \u6765\u6307\u5b9a\u9ed8\u8ba4\u7684JOIN\u4fee\u9970\u7b26\u3002</p>\n<p><strong><code>GLOBAL</code> distribution</strong></p>\n<p>\u5f53\u4f7f\u7528\u666e\u901a\u7684<code>JOIN</code>\u65f6\uff0c\u67e5\u8be2\u5c06\u88ab\u53d1\u9001\u7ed9\u8fdc\u7a0b\u7684\u670d\u52a1\u5668\u3002\u5e76\u5728\u8fd9\u4e9b\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u751f\u6210\u53f3\u8868\u5e76\u4e0e\u5b83\u4eec\u5173\u8054\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u53f3\u8868\u6765\u81ea\u4e8e\u5404\u4e2a\u670d\u52a1\u5668\u672c\u8eab\u3002</p>\n<p>\u5f53\u4f7f\u7528<code>GLOBAL ... JOIN</code>\uff0c\u9996\u5148\u4f1a\u5728\u8bf7\u6c42\u670d\u52a1\u5668\u4e0a\u8ba1\u7b97\u53f3\u8868\u5e76\u4ee5\u4e34\u65f6\u8868\u7684\u65b9\u5f0f\u5c06\u5176\u53d1\u9001\u5230\u6240\u6709\u670d\u52a1\u5668\u3002\u8fd9\u65f6\u6bcf\u53f0\u670d\u52a1\u5668\u5c06\u76f4\u63a5\u4f7f\u7528\u5b83\u8fdb\u884c\u8ba1\u7b97\u3002</p>\n<p>\u4f7f\u7528<code>GLOBAL</code>\u65f6\u9700\u8981\u5c0f\u5fc3\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u9605 <a href=\"#select-distributed-subqueries\">Distributed subqueries</a> \u90e8\u5206\u3002</p>\n<p><strong>\u4f7f\u7528\u5efa\u8bae</strong></p>\n<p>\u4ece\u5b50\u67e5\u8be2\u4e2d\u5220\u9664\u6240\u6709<code>JOIN</code>\u4e0d\u9700\u8981\u7684\u5217\u3002</p>\n<p>\u5f53\u6267\u884c<code>JOIN</code>\u67e5\u8be2\u65f6\uff0c\u56e0\u4e3a\u4e0e\u5176\u4ed6\u9636\u6bb5\u76f8\u6bd4\u6ca1\u6709\u8fdb\u884c\u6267\u884c\u987a\u5e8f\u7684\u4f18\u5316\uff1aJOIN\u4f18\u5148\u4e8eWHERE\u4e0e\u805a\u5408\u6267\u884c\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u663e\u793a\u7684\u6307\u5b9a\u6267\u884c\u987a\u5e8f\uff0c\u6211\u4eec\u63a8\u8350\u4f60\u4f7f\u7528\u5b50\u67e5\u8be2\u7684\u65b9\u5f0f\u6267\u884c<code>JOIN</code>\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">CounterID</span><span class=\"p\">,</span>\n    <span class=\"n\">hits</span><span class=\"p\">,</span>\n    <span class=\"n\">visits</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">CounterID</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">hits</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">CounterID</span>\n<span class=\"p\">)</span> <span class=\"k\">ANY</span> <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">CounterID</span><span class=\"p\">,</span>\n        <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">visits</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">CounterID</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"n\">CounterID</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">hits</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500CounterID\u2500\u252c\u2500\u2500\u2500hits\u2500\u252c\u2500visits\u2500\u2510</span>\n<span class=\"err\">\u2502   1143050 \u2502 523264 \u2502  13665 \u2502</span>\n<span class=\"err\">\u2502    731962 \u2502 475698 \u2502 102716 \u2502</span>\n<span class=\"err\">\u2502    722545 \u2502 337212 \u2502 108187 \u2502</span>\n<span class=\"err\">\u2502    722889 \u2502 252197 \u2502  10547 \u2502</span>\n<span class=\"err\">\u2502   2237260 \u2502 196036 \u2502   9522 \u2502</span>\n<span class=\"err\">\u2502  23057320 \u2502 147211 \u2502   7689 \u2502</span>\n<span class=\"err\">\u2502    722818 \u2502  90109 \u2502  17847 \u2502</span>\n<span class=\"err\">\u2502     48221 \u2502  85379 \u2502   4652 \u2502</span>\n<span class=\"err\">\u2502  19762435 \u2502  77807 \u2502   7026 \u2502</span>\n<span class=\"err\">\u2502    722884 \u2502  77492 \u2502  11056 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5b50\u67e5\u8be2\u4e0d\u5141\u8bb8\u60a8\u8bbe\u7f6e\u522b\u540d\u6216\u5728\u5176\u4ed6\u5730\u65b9\u5f15\u7528\u5b83\u4eec\u3002<br />\n<code>USING</code>\u4e2d\u6307\u5b9a\u7684\u5217\u5fc5\u987b\u5728\u4e24\u4e2a\u5b50\u67e5\u8be2\u4e2d\u5177\u6709\u76f8\u540c\u7684\u540d\u79f0\uff0c\u800c\u5176\u4ed6\u5217\u5fc5\u987b\u5177\u6709\u4e0d\u540c\u7684\u540d\u79f0\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u522b\u540d\u7684\u65b9\u5f0f\u6765\u66f4\u6539\u5b50\u67e5\u8be2\u4e2d\u7684\u5217\u540d\uff08\u793a\u4f8b\u4e2d\u5c31\u5206\u522b\u4f7f\u7528\u4e86'hits'\u4e0e'visits'\u522b\u540d\uff09\u3002</p>\n<p><code>USING</code>\u5b50\u53e5\u7528\u4e8e\u6307\u5b9a\u8981\u8fdb\u884c\u94fe\u63a5\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5217\uff0c\u7cfb\u7edf\u4f1a\u5c06\u8fd9\u4e9b\u5217\u5728\u4e24\u5f20\u8868\u4e2d\u76f8\u7b49\u7684\u503c\u8fde\u63a5\u8d77\u6765\u3002\u5982\u679c\u5217\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u62ec\u53f7\u5305\u88f9\u3002\u540c\u65f6JOIN\u4e0d\u652f\u6301\u5176\u4ed6\u66f4\u590d\u6742\u7684Join\u65b9\u5f0f\u3002</p>\n<p>\u53f3\u8868\uff08\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\uff09\u5c06\u4f1a\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\u3002\u5982\u679c\u6ca1\u6709\u8db3\u591f\u7684\u5185\u5b58\uff0c\u5219\u65e0\u6cd5\u8fd0\u884c<code>JOIN</code>\u3002</p>\n<p>\u53ea\u80fd\u5728\u67e5\u8be2\u4e2d\u6307\u5b9a\u4e00\u4e2a<code>JOIN</code>\u3002\u82e5\u8981\u8fd0\u884c\u591a\u4e2a<code>JOIN</code>\uff0c\u4f60\u53ef\u4ee5\u5c06\u5b83\u4eec\u653e\u5165\u5b50\u67e5\u8be2\u4e2d\u3002</p>\n<p>\u6bcf\u6b21\u8fd0\u884c\u76f8\u540c\u7684<code>JOIN</code>\u67e5\u8be2\uff0c\u603b\u662f\u4f1a\u518d\u6b21\u8ba1\u7b97 - \u6ca1\u6709\u7f13\u5b58\u7ed3\u679c\u3002 \u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528\u2018Join\u2019\u5f15\u64ce\uff0c\u5b83\u662f\u4e00\u4e2a\u9884\u5904\u7406\u7684Join\u6570\u636e\u7ed3\u6784\uff0c\u603b\u662f\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1\u201cJoin\u5f15\u64ce\u201d\u90e8\u5206\u3002</p>\n<p>\u5728\u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u4f7f\u7528<code>IN</code>\u4ee3\u66ff<code>JOIN</code>\u5c06\u4f1a\u5f97\u5230\u66f4\u9ad8\u7684\u6548\u7387\u3002\u5728\u5404\u79cd\u7c7b\u578b\u7684JOIN\u4e2d\uff0c\u6700\u9ad8\u6548\u7684\u662f<code>ANY LEFT JOIN</code>\uff0c\u7136\u540e\u662f<code>ANY INNER JOIN</code>\uff0c\u6548\u7387\u6700\u5dee\u7684\u662f<code>ALL LEFT JOIN</code>\u4ee5\u53ca<code>ALL INNER JOIN</code>\u3002</p>\n<p>\u5982\u679c\u4f60\u9700\u8981\u4f7f\u7528<code>JOIN</code>\u6765\u5173\u8054\u4e00\u4e9b\u7eac\u5ea6\u8868\uff08\u5305\u542b\u7eac\u5ea6\u5c5e\u6027\u7684\u4e00\u4e9b\u76f8\u5bf9\u6bd4\u8f83\u5c0f\u7684\u8868\uff0c\u4f8b\u5982\u5e7f\u544a\u6d3b\u52a8\u7684\u540d\u79f0\uff09\uff0c\u90a3\u4e48<code>JOIN</code>\u53ef\u80fd\u4e0d\u662f\u597d\u7684\u9009\u62e9\uff0c\u56e0\u4e3a\u8bed\u6cd5\u8d1f\u8d23\uff0c\u5e76\u4e14\u6bcf\u6b21\u67e5\u8be2\u90fd\u5c06\u91cd\u65b0\u8bbf\u95ee\u8fd9\u4e9b\u8868\u3002\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u60a8\u5e94\u8be5\u4f7f\u7528\u201c\u5916\u90e8\u5b57\u5178\u201d\u7684\u529f\u80fd\u6765\u66ff\u6362<code>JOIN</code>\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 <a href=\"#dicts/external_dicts/\">\u5916\u90e8\u5b57\u5178</a> \u90e8\u5206\u3002</p>\n<h5 id=\"nullde-chu-li\">Null\u7684\u5904\u7406<a class=\"headerlink\" href=\"#nullde-chu-li\" title=\"Permanent link\">&para;</a></h5>\n<p>JOIN\u7684\u884c\u4e3a\u53d7 <a href=\"#../operations/settings/settings/\">join_use_nulls</a> \u7684\u5f71\u54cd\u3002\u5f53<code>join_use_nulls=1</code>\u65f6\uff0c<code>JOIN</code>\u7684\u5de5\u4f5c\u4e0eSQL\u6807\u51c6\u76f8\u540c\u3002</p>\n<p>\u5982\u679cJOIN\u7684key\u662f <a href=\"#../data_types/nullable/\">Nullable</a> \u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u5219\u5176\u4e2d\u81f3\u5c11\u4e00\u4e2a\u5b58\u5728 <a href=\"#syntax/\">NULL</a> \u503c\u7684key\u4e0d\u4f1a\u88ab\u5173\u8054\u3002</p>\n<h4 id=\"where-zi-ju\">WHERE \u5b50\u53e5<a class=\"headerlink\" href=\"#where-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5982\u679c\u5b58\u5728WHERE\u5b50\u53e5, \u5219\u5728\u8be5\u5b50\u53e5\u4e2d\u5fc5\u987b\u5305\u542b\u4e00\u4e2aUInt8\u7c7b\u578b\u7684\u8868\u8fbe\u5f0f\u3002 \u8fd9\u4e2a\u8868\u8fbe\u662f\u901a\u5e38\u662f\u4e00\u4e2a\u5e26\u6709\u6bd4\u8f83\u548c\u903b\u8f91\u7684\u8868\u8fbe\u5f0f\u3002<br />\n\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5c06\u4f1a\u5728\u6240\u6709\u6570\u636e\u8f6c\u6362\u524d\u7528\u6765\u8fc7\u6ee4\u6570\u636e\u3002</p>\n<p>\u5982\u679c\u5728\u652f\u6301\u7d22\u5f15\u7684\u6570\u636e\u5e93\u8868\u5f15\u64ce\u4e2d\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5c06\u88ab\u8bc4\u4f30\u662f\u5426\u4f7f\u7528\u7d22\u5f15\u3002</p>\n<h4 id=\"prewhere-zi-ju\">PREWHERE \u5b50\u53e5<a class=\"headerlink\" href=\"#prewhere-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd9\u4e2a\u5b50\u53e5\u4e0eWHERE\u5b50\u53e5\u7684\u610f\u601d\u76f8\u540c\u3002\u4e3b\u8981\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u8868\u6570\u636e\u7684\u8bfb\u53d6\u3002<br />\n\u5f53\u4f7f\u7528PREWHERE\u65f6\uff0c\u9996\u5148\u53ea\u8bfb\u53d6PREWHERE\u8868\u8fbe\u5f0f\u4e2d\u9700\u8981\u7684\u5217\u3002\u7136\u540e\u5728\u6839\u636ePREWHERE\u6267\u884c\u7684\u7ed3\u679c\u8bfb\u53d6\u5176\u4ed6\u9700\u8981\u7684\u5217\u3002</p>\n<p>\u5982\u679c\u5728\u8fc7\u6ee4\u6761\u4ef6\u4e2d\u6709\u5c11\u91cf\u4e0d\u9002\u5408\u7d22\u5f15\u8fc7\u6ee4\u7684\u5217\uff0c\u4f46\u662f\u5b83\u4eec\u53c8\u53ef\u4ee5\u63d0\u4f9b\u5f88\u5f3a\u7684\u8fc7\u6ee4\u80fd\u529b\u3002\u8fd9\u65f6\u4f7f\u7528PREWHERE\u662f\u6709\u610f\u4e49\u7684\uff0c\u56e0\u4e3a\u5b83\u5c06\u5e2e\u52a9\u51cf\u5c11\u6570\u636e\u7684\u8bfb\u53d6\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5728\u4e00\u4e2a\u9700\u8981\u63d0\u53d6\u5927\u91cf\u5217\u7684\u67e5\u8be2\u4e2d\u4e3a\u5c11\u90e8\u5206\u5217\u7f16\u5199PREWHERE\u662f\u5f88\u6709\u4f5c\u7528\u7684\u3002</p>\n<p>PREWHERE \u4ec5\u652f\u6301<code>*MergeTree</code>\u7cfb\u5217\u5f15\u64ce\u3002</p>\n<p>\u5728\u4e00\u4e2a\u67e5\u8be2\u4e2d\u53ef\u4ee5\u540c\u65f6\u6307\u5b9aPREWHERE\u548cWHERE\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cPREWHERE\u4f18\u5148\u4e8eWHERE\u6267\u884c\u3002</p>\n<p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cPREWHERE\u4e0d\u9002\u5408\u7528\u4e8e\u5df2\u7ecf\u5b58\u5728\u4e8e\u7d22\u5f15\u4e2d\u7684\u5217\uff0c\u56e0\u4e3a\u5f53\u5217\u5df2\u7ecf\u5b58\u5728\u4e8e\u7d22\u5f15\u4e2d\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u6ee1\u8db3\u7d22\u5f15\u7684\u6570\u636e\u5757\u624d\u4f1a\u88ab\u8bfb\u53d6\u3002</p>\n<p>\u5982\u679c\u5c06'optimize_move_to_prewhere'\u8bbe\u7f6e\u4e3a1\uff0c\u5e76\u4e14\u5728\u67e5\u8be2\u4e2d\u4e0d\u5305\u542bPREWHERE\uff0c\u5219\u7cfb\u7edf\u5c06\u81ea\u52a8\u7684\u628a\u9002\u5408PREWHERE\u8868\u8fbe\u5f0f\u7684\u90e8\u5206\u4eceWHERE\u4e2d\u62bd\u79bb\u5230PREWHERE\u4e2d\u3002</p>\n<h4 id=\"select-group-by-clause\">GROUP BY \u5b50\u53e5<a class=\"headerlink\" href=\"#select-group-by-clause\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd9\u662f\u5217\u5f0f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d\u6700\u91cd\u8981\u7684\u4e00\u90e8\u5206\u3002</p>\n<p>\u5982\u679c\u5b58\u5728GROUP BY\u5b50\u53e5\uff0c\u5219\u5728\u8be5\u5b50\u53e5\u4e2d\u5fc5\u987b\u5305\u542b\u4e00\u4e2a\u8868\u8fbe\u5f0f\u5217\u8868\u3002\u5176\u4e2d\u6bcf\u4e2a\u8868\u8fbe\u5f0f\u5c06\u4f1a\u88ab\u79f0\u4e4b\u4e3a\u201ckey\u201d\u3002<br />\nSELECT\uff0cHAVING\uff0cORDER BY\u5b50\u53e5\u4e2d\u7684\u8868\u8fbe\u5f0f\u5217\u8868\u5fc5\u987b\u6765\u81ea\u4e8e\u8fd9\u4e9b\u201ckey\u201d\u6216\u805a\u5408\u51fd\u6570\u3002\u7b80\u800c\u8a00\u4e4b\uff0c\u88ab\u9009\u62e9\u7684\u5217\u4e2d\u4e0d\u80fd\u5305\u542b\u975e\u805a\u5408\u51fd\u6570\u6216key\u4e4b\u5916\u7684\u5176\u4ed6\u5217\u3002</p>\n<p>\u5982\u679c\u67e5\u8be2\u8868\u8fbe\u5f0f\u5217\u8868\u4e2d\u4ec5\u5305\u542b\u805a\u5408\u51fd\u6570\uff0c\u5219\u53ef\u4ee5\u7701\u7565GROUP BY\u5b50\u53e5\uff0c\u8fd9\u65f6\u4f1a\u5047\u5b9a\u5c06\u6240\u6709\u6570\u636e\u805a\u5408\u6210\u4e00\u7ec4\u7a7a\u201ckey\u201d\u3002</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">count</span><span class=\"p\">(),</span>\n    <span class=\"n\">median</span><span class=\"p\">(</span><span class=\"n\">FetchTiming</span> <span class=\"o\">&gt;</span> <span class=\"mi\">60</span> <span class=\"o\">?</span> <span class=\"mi\">60</span> <span class=\"p\">:</span> <span class=\"n\">FetchTiming</span><span class=\"p\">),</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Refresh</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits</span>\n</code></pre></div>\n\n\n<p>\u4e0eSQL\u6807\u51c6\u4e0d\u540c\u7684\u662f\uff0c\u5982\u679c\u8868\u4e2d\u4e0d\u5b58\u5728\u4efb\u4f55\u6570\u636e\uff08\u53ef\u80fd\u8868\u672c\u8eab\u4e2d\u5c31\u4e0d\u5b58\u5728\u4efb\u4f55\u6570\u636e\uff0c\u6216\u8005\u7531\u4e8e\u88abWHERE\u6761\u4ef6\u8fc7\u6ee4\u6389\u4e86\uff09\uff0c\u5c06\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u5305\u542b\u805a\u5408\u51fd\u6570\u521d\u59cb\u503c\u7684\u7ed3\u679c\u3002</p>\n<p>\u4e0eMySQL\u4e0d\u540c\u7684\u662f\uff08\u5b9e\u9645\u4e0a\u8fd9\u662f\u7b26\u5408SQL\u6807\u51c6\u7684\uff09\uff0c\u4f60\u4e0d\u80fd\u591f\u83b7\u5f97\u4e00\u4e2a\u4e0d\u5728key\u4e2d\u7684\u975e\u805a\u5408\u51fd\u6570\u5217\uff08\u9664\u4e86\u5e38\u91cf\u8868\u8fbe\u5f0f\uff09\u3002\u4f46\u662f\u4f60\u53ef\u4ee5\u4f7f\u7528\u2018any\u2019\uff08\u8fd4\u56de\u9047\u5230\u7684\u7b2c\u4e00\u4e2a\u503c\uff09\u3001max\u3001min\u7b49\u805a\u5408\u51fd\u6570\u4f7f\u5b83\u5de5\u4f5c\u3002</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">domainWithoutWWW</span><span class=\"p\">(</span><span class=\"n\">URL</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">domain</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">(),</span>\n    <span class=\"k\">any</span><span class=\"p\">(</span><span class=\"n\">Title</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">title</span> <span class=\"c1\">-- getting the first occurred page header for each domain.</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">domain</span>\n</code></pre></div>\n\n\n<p>GROUP BY\u5b50\u53e5\u4f1a\u4e3a\u9047\u5230\u7684\u6bcf\u4e00\u4e2a\u4e0d\u540c\u7684key\u8ba1\u7b97\u4e00\u7ec4\u805a\u5408\u51fd\u6570\u7684\u503c\u3002</p>\n<p>\u5728GROUP BY\u5b50\u53e5\u4e2d\u4e0d\u652f\u6301\u4f7f\u7528Array\u7c7b\u578b\u7684\u5217\u3002</p>\n<p>\u5e38\u91cf\u4e0d\u80fd\u4f5c\u4e3a\u805a\u5408\u51fd\u6570\u7684\u53c2\u6570\u4f20\u5165\u805a\u5408\u51fd\u6570\u4e2d\u3002\u4f8b\u5982\uff1a sum(1)\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f60\u53ef\u4ee5\u7701\u7565\u5e38\u91cf\u3002\u4f8b\u5982\uff1a<code>count()</code>\u3002</p>\n<h5 id=\"null-chu-li\">NULL \u5904\u7406<a class=\"headerlink\" href=\"#null-chu-li\" title=\"Permanent link\">&para;</a></h5>\n<p>\u5bf9\u4e8eGROUP BY\u5b50\u53e5\uff0cClickHouse\u5c06 <a href=\"#syntax/\">NULL</a> \u89e3\u91ca\u4e3a\u4e00\u4e2a\u503c\uff0c\u5e76\u4e14\u652f\u6301<code>NULL=NULL</code>\u3002</p>\n<p>\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u5c06\u8bf4\u660e\u8fd9\u5c06\u610f\u5473\u7740\u4ec0\u4e48\u3002</p>\n<p>\u5047\u8bbe\u4f60\u6709\u8fd9\u6837\u4e00\u5f20\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502    2 \u2502</span>\n<span class=\"err\">\u2502 2 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 3 \u2502    2 \u2502</span>\n<span class=\"err\">\u2502 3 \u2502    3 \u2502</span>\n<span class=\"err\">\u2502 3 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8fd0\u884c<code>SELECT sum(x), y FROM t_null_big GROUP BY y</code>\u4f60\u5c06\u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500sum(x)\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502      4 \u2502    2 \u2502</span>\n<span class=\"err\">\u2502      3 \u2502    3 \u2502</span>\n<span class=\"err\">\u2502      5 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4f60\u53ef\u4ee5\u770b\u5230GROUP BY\u4e3a<code>y=NULL</code>\u7684\u805a\u5408\u4e86x\u3002</p>\n<p>\u5982\u679c\u4f60\u5728\u5411<code>GROUP BY</code>\u4e2d\u653e\u5165\u51e0\u4e2akey\uff0c\u7ed3\u679c\u5c06\u5217\u51fa\u6240\u6709\u7684\u7ec4\u5408\u53ef\u80fd\u3002\u5c31\u50cf<code>NULL</code>\u662f\u4e00\u4e2a\u7279\u5b9a\u7684\u503c\u4e00\u6837\u3002</p>\n<h5 id=\"with-totals-xiu-shi-fu\">WITH TOTALS \u4fee\u9970\u7b26<a c");
            
            document.write("lass=\"headerlink\" href=\"#with-totals-xiu-shi-fu\" title=\"Permanent link\">&para;</a></h5>\n<p>\u5982\u679c\u4f60\u6307\u5b9a\u4e86WITH TOTALS\u4fee\u9970\u7b26\uff0c\u4f60\u5c06\u4f1a\u5728\u7ed3\u679c\u4e2d\u5f97\u5230\u4e00\u4e2a\u88ab\u989d\u5916\u8ba1\u7b97\u51fa\u7684\u884c\u3002\u5728\u8fd9\u4e00\u884c\u4e2d\u5c06\u5305\u542b\u6240\u6709key\u7684\u9ed8\u8ba4\u503c\uff08\u96f6\u6216\u8005\u7a7a\u503c\uff09\uff0c\u4ee5\u53ca\u6240\u6709\u805a\u5408\u51fd\u6570\u5bf9\u6240\u6709\u88ab\u9009\u62e9\u6570\u636e\u884c\u7684\u805a\u5408\u7ed3\u679c\u3002</p>\n<p>\u8be5\u884c\u4ec5\u5728JSON*, TabSeparated*, Pretty*\u8f93\u51fa\u683c\u5f0f\u4e2d\u4e0e\u5176\u4ed6\u884c\u5206\u5f00\u8f93\u51fa\u3002</p>\n<p>\u5728JSON*\u8f93\u51fa\u683c\u5f0f\u4e2d\uff0c\u8fd9\u884c\u5c06\u51fa\u73b0\u5728Json\u7684\u2018totals\u2019\u5b57\u6bb5\u4e2d\u3002\u5728TabSeparated*\u8f93\u51fa\u683c\u5f0f\u4e2d\uff0c\u8fd9\u884c\u5c06\u4f4d\u4e8e\u5176\u4ed6\u7ed3\u679c\u4e4b\u540e\uff0c\u540c\u65f6\u4e0e\u5176\u4ed6\u7ed3\u679c\u4f7f\u7528\u7a7a\u767d\u884c\u5206\u9694\u3002\u5728Pretty*\u8f93\u51fa\u683c\u5f0f\u4e2d\uff0c\u8fd9\u884c\u5c06\u4f5c\u4e3a\u5355\u72ec\u7684\u8868\u5728\u6240\u6709\u7ed3\u679c\u4e4b\u540e\u8f93\u51fa\u3002</p>\n<p>\u5f53<code>WITH TOTALS</code>\u4e0eHAVING\u5b50\u53e5\u540c\u65f6\u5b58\u5728\u65f6\uff0c\u5b83\u7684\u884c\u4e3a\u53d7\u2018totals_mode\u2019\u914d\u7f6e\u7684\u5f71\u54cd\u3002<br />\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>totals_mode = 'before_having'</code>\uff0c\u8fd9\u65f6<code>WITH TOTALS</code>\u5c06\u4f1a\u5728HAVING\u524d\u8ba1\u7b97\u6700\u591a\u4e0d\u8d85\u8fc7<code>max_rows_to_group_by</code>\u884c\u7684\u6570\u636e\u3002</p>\n<p>\u5728<code>group_by_overflow_mode = 'any'</code>\u5e76\u6307\u5b9a\u4e86<code>max_rows_to_group_by</code>\u7684\u60c5\u51b5\u4e0b\uff0c<code>WITH TOTALS</code>\u7684\u884c\u4e3a\u53d7<code>totals_mode</code>\u7684\u5f71\u54cd\u3002</p>\n<p><code>after_having_exclusive</code> - \u5728HAVING\u540e\u8fdb\u884c\u8ba1\u7b97\uff0c\u8ba1\u7b97\u4e0d\u8d85\u8fc7<code>max_rows_to_group_by</code>\u884c\u7684\u6570\u636e\u3002</p>\n<p><code>after_having_inclusive</code> - \u5728HAVING\u540e\u8fdb\u884c\u8ba1\u7b97\uff0c\u8ba1\u7b97\u4e0d\u5c11\u4e8e<code>max_rows_to_group_by</code>\u884c\u7684\u6570\u636e\u3002</p>\n<p><code>after_having_auto</code> - \u5728HAVING\u540e\u8fdb\u884c\u8ba1\u7b97\uff0c\u91c7\u7528\u7edf\u8ba1\u901a\u8fc7HAVING\u7684\u884c\u6570\uff0c\u5728\u8d85\u8fc7\u4e0d\u8d85\u8fc7\u2018max_rows_to_group_by\u2019\u6307\u5b9a\u503c\uff08\u9ed8\u8ba4\u4e3a50%\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u5305\u542b\u6240\u6709\u884c\u7684\u7ed3\u679c\u3002\u5426\u5219\u6392\u9664\u8fd9\u4e9b\u7ed3\u679c\u3002</p>\n<p><code>totals_auto_threshold</code> - \u9ed8\u8ba4 0.5\uff0c\u662f<code>after_having_auto</code>\u7684\u53c2\u6570\u3002</p>\n<p>\u5982\u679c<code>group_by_overflow_mode != 'any'</code>\u5e76\u6ca1\u6709\u6307\u5b9a<code>max_rows_to_group_by</code>\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u6a21\u5f0f\u90fd\u4e0e<code>after_having</code>\u76f8\u540c\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728\u5b50\u67e5\u8be2\uff0c\u5305\u542b\u5b50\u67e5\u8be2\u7684JOIN\u5b50\u53e5\u4e2d\u4f7f\u7528WITH TOTALS\uff08\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u5404\u81ea\u7684\u603b\u503c\u4f1a\u88ab\u7ec4\u5408\u5728\u4e00\u8d77\uff09\u3002</p>\n<h5 id=\"select-group-by-in-external-memory\">GROUP BY \u4f7f\u7528\u5916\u90e8\u5b58\u50a8\u8bbe\u5907<a class=\"headerlink\" href=\"#select-group-by-in-external-memory\" title=\"Permanent link\">&para;</a></h5>\n<p>\u4f60\u53ef\u4ee5\u5728GROUP BY\u4e2d\u5141\u8bb8\u5c06\u4e34\u65f6\u6570\u636e\u8f6c\u5b58\u5230\u78c1\u76d8\u4e0a\uff0c\u4ee5\u9650\u5236\u5bf9\u5185\u5b58\u7684\u4f7f\u7528\u3002<br />\n<code>max_bytes_before_external_group_by</code>\u8fd9\u4e2a\u914d\u7f6e\u786e\u5b9a\u4e86\u5728GROUP BY\u4e2d\u542f\u52a8\u5c06\u4e34\u65f6\u6570\u636e\u8f6c\u5b58\u5230\u78c1\u76d8\u4e0a\u7684\u5185\u5b58\u9608\u503c\u3002\u5982\u679c\u4f60\u5c06\u5b83\u8bbe\u7f6e\u4e3a0\uff08\u8fd9\u662f\u9ed8\u8ba4\u503c\uff09\uff0c\u8fd9\u9879\u529f\u80fd\u5c06\u88ab\u7981\u7528\u3002</p>\n<p>\u5f53\u4f7f\u7528<code>max_bytes_before_external_group_by</code>\u65f6\uff0c\u6211\u4eec\u5efa\u8bae\u5c06max_memory_usage\u8bbe\u7f6e\u4e3a\u5b83\u7684\u4e24\u500d\u3002\u8fd9\u662f\u56e0\u4e3a\u4e00\u4e2a\u805a\u5408\u9700\u8981\u4e24\u4e2a\u9636\u6bb5\u6765\u5b8c\u6210\uff1a\uff081\uff09\u8bfb\u53d6\u6570\u636e\u5e76\u5f62\u6210\u4e2d\u95f4\u6570\u636e \uff082\uff09\u5408\u5e76\u4e2d\u95f4\u6570\u636e\u3002\u4e34\u65f6\u6570\u636e\u7684\u8f6c\u5b58\u53ea\u4f1a\u53d1\u751f\u5728\u7b2c\u4e00\u4e2a\u9636\u6bb5\u3002\u5982\u679c\u6ca1\u6709\u53d1\u751f\u4e34\u65f6\u6587\u4ef6\u7684\u8f6c\u5b58\uff0c\u90a3\u4e48\u9636\u6bb5\u4e8c\u5c06\u6700\u591a\u6d88\u8017\u4e0e1\u9636\u6bb5\u76f8\u540c\u7684\u5185\u5b58\u5927\u5c0f\u3002</p>\n<p>\u4f8b\u5982\uff1a\u5982\u679c\u5c06<code>max_memory_usage</code>\u8bbe\u7f6e\u4e3a10000000000\u5e76\u4e14\u4f60\u60f3\u8981\u5f00\u542f\u5916\u90e8\u805a\u5408\uff0c\u90a3\u4e48\u4f60\u9700\u8981\u5c06<code>max_bytes_before_external_group_by</code>\u8bbe\u7f6e\u4e3a10000000000\u7684\u540c\u65f6\u5c06<code>max_memory_usage</code>\u8bbe\u7f6e\u4e3a20000000000\u3002\u5f53\u5916\u90e8\u805a\u5408\u88ab\u89e6\u53d1\u65f6\uff08\u5982\u679c\u521a\u597d\u53ea\u5f62\u6210\u4e86\u4e00\u4efd\u4e34\u65f6\u6570\u636e\uff09\uff0c\u5b83\u7684\u5185\u5b58\u4f7f\u7528\u91cf\u5c06\u4f1a\u7a0d\u9ad8\u4e0e<code>max_bytes_before_external_group_by</code>\u3002</p>\n<p>\u5728\u5206\u5e03\u5f0f\u67e5\u8be2\u5904\u7406\u4e2d\uff0c\u5916\u90e8\u805a\u5408\u5c06\u4f1a\u5728\u8fdc\u7a0b\u7684\u670d\u52a1\u5668\u4e2d\u6267\u884c\u3002\u4e3a\u4e86\u4f7f\u8bf7\u6c42\u670d\u52a1\u5668\u53ea\u4f7f\u7528\u8f83\u5c11\u7684\u5185\u5b58\uff0c\u53ef\u4ee5\u8bbe\u7f6e<code>distributed_aggregation_memory_efficient</code>\u4e3a1\u3002</p>\n<p>\u5f53\u5408\u5e76\u88ab\u5237\u5230\u78c1\u76d8\u7684\u4e34\u65f6\u6570\u636e\u4ee5\u53ca\u5408\u5e76\u8fdc\u7a0b\u7684\u670d\u52a1\u5668\u8fd4\u56de\u7684\u7ed3\u679c\u65f6\uff0c\u5982\u679c\u5728\u542f\u52a8<code>distributed_aggregation_memory_efficient</code>\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u4f1a\u6d88\u80171/256 * \u7ebf\u7a0b\u6570\u7684\u603b\u5185\u5b58\u5927\u5c0f\u3002</p>\n<p>\u5f53\u542f\u52a8\u5916\u90e8\u805a\u5408\u65f6\uff0c\u5982\u679c\u6570\u636e\u7684\u5927\u5c0f\u5c0f\u4e8e<code>max_bytes_before_external_group_by</code>\u8bbe\u7f6e\u7684\u503c\uff08\u6570\u636e\u6ca1\u6709\u88ab\u5237\u5230\u78c1\u76d8\u4e2d\uff09\uff0c\u90a3\u4e48\u6570\u636e\u7684\u805a\u5408\u901f\u5ea6\u5c06\u4f1a\u548c\u6ca1\u6709\u542f\u52a8\u5916\u90e8\u805a\u5408\u65f6\u4e00\u6837\u5feb\u3002\u5982\u679c\u6709\u4e34\u65f6\u6570\u636e\u88ab\u5237\u5230\u4e86\u78c1\u76d8\u4e2d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u67e5\u8be2\u7684\u8fd0\u884c\u65f6\u95f4\u5c06\u4f1a\u88ab\u5ef6\u957f\u51e0\u500d\uff08\u5927\u7ea6\u662f3\u500d\uff09\u3002</p>\n<p>\u5982\u679c\u4f60\u5728GROUP BY\u540e\u9762\u5b58\u5728ORDER BY\u5b50\u53e5\uff0c\u5e76\u4e14ORDER BY\u540e\u9762\u5b58\u5728\u4e00\u4e2a\u6781\u5c0f\u9650\u5236\u7684LIMIT\uff0c\u90a3\u4e48ORDER BY\u5b50\u53e5\u5c06\u4e0d\u4f1a\u4f7f\u7528\u592a\u591a\u5185\u5b58\u3002<br />\n\u5426\u5219\u8bf7\u4e0d\u8981\u5fd8\u8bb0\u542f\u52a8\u5916\u90e8\u6392\u5e8f(<code>max_bytes_before_external_sort</code>)\u3002</p>\n<h4 id=\"limit-n-by-zi-ju\">LIMIT N BY \u5b50\u53e5<a class=\"headerlink\" href=\"#limit-n-by-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>LIMIT N BY\u5b50\u53e5\u548cLIMIT\u6ca1\u6709\u5173\u7cfb, LIMIT N BY COLUMNS \u5b50\u53e5\u53ef\u4ee5\u7528\u6765\u5728\u6bcf\u4e00\u4e2aCOLUMNS\u5206\u7ec4\u4e2d\u6c42\u5f97\u6700\u5927\u7684N\u884c\u6570\u636e\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u4eec\u540c\u65f6\u7528\u5728\u4e00\u4e2a\u67e5\u8be2\u4e2d\u3002LIMIT N BY\u5b50\u53e5\u4e2d\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u591a\u4e2a\u5206\u7ec4\u5b57\u6bb5\u8868\u8fbe\u5f0f\u5217\u8868\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">domainWithoutWWW</span><span class=\"p\">(</span><span class=\"n\">URL</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">domain</span><span class=\"p\">,</span>\n    <span class=\"n\">domainWithoutWWW</span><span class=\"p\">(</span><span class=\"n\">REFERRER_URL</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">referrer</span><span class=\"p\">,</span>\n    <span class=\"n\">device_type</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"n\">cnt</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">domain</span><span class=\"p\">,</span> <span class=\"n\">referrer</span><span class=\"p\">,</span> <span class=\"n\">device_type</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">cnt</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">5</span> <span class=\"k\">BY</span> <span class=\"k\">domain</span><span class=\"p\">,</span> <span class=\"n\">device_type</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">100</span>\n</code></pre></div>\n\n\n<p>\u67e5\u8be2\u5c06\u4f1a\u4e3a\u6bcf\u4e2a<code>domain, device_type</code>\u7684\u7ec4\u5408\u9009\u51fa\u524d5\u4e2a\u8bbf\u95ee\u6700\u591a\u7684\u6570\u636e\uff0c\u4f46\u662f\u7ed3\u679c\u6700\u591a\u5c06\u4e0d\u8d85\u8fc7100\u884c\uff08<code>LIMIT n BY + LIMIT</code>\uff09\u3002</p>\n<h4 id=\"having-zi-ju\">HAVING \u5b50\u53e5<a class=\"headerlink\" href=\"#having-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>HAVING\u5b50\u53e5\u53ef\u4ee5\u7528\u6765\u8fc7\u6ee4GROUP BY\u4e4b\u540e\u7684\u6570\u636e\uff0c\u7c7b\u4f3c\u4e8eWHERE\u5b50\u53e5\u3002<br />\nWHERE\u4e8eHAVING\u4e0d\u540c\u4e4b\u5904\u5728\u4e8eWHERE\u5728\u805a\u5408\u524d(GROUP BY)\u6267\u884c\uff0cHAVING\u5728\u805a\u5408\u540e\u6267\u884c\u3002<br />\n\u5982\u679c\u4e0d\u5b58\u5728\u805a\u5408\uff0c\u5219\u4e0d\u80fd\u4f7f\u7528HAVING\u3002</p>\n<h4 id=\"select-order-by\">ORDER BY \u5b50\u53e5<a class=\"headerlink\" href=\"#select-order-by\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5982\u679c\u5b58\u5728ORDER BY \u5b50\u53e5\uff0c\u5219\u8be5\u5b50\u53e5\u4e2d\u5fc5\u987b\u5b58\u5728\u4e00\u4e2a\u8868\u8fbe\u5f0f\u5217\u8868\uff0c\u8868\u8fbe\u5f0f\u5217\u8868\u4e2d\u6bcf\u4e00\u4e2a\u8868\u8fbe\u5f0f\u90fd\u53ef\u4ee5\u5206\u914d\u4e00\u4e2aDESC\u6216ASC\uff08\u6392\u5e8f\u7684\u65b9\u5411\uff09\u3002\u5982\u679c\u6ca1\u6709\u6307\u660e\u6392\u5e8f\u7684\u65b9\u5411\uff0c\u5c06\u5047\u5b9a\u4ee5ASC\u7684\u65b9\u5f0f\u8fdb\u884c\u6392\u5e8f\u3002\u5176\u4e2dASC\u8868\u793a\u6309\u7167\u5347\u5e8f\u6392\u5e8f\uff0cDESC\u6309\u7167\u964d\u5e8f\u6392\u5e8f\u3002\u793a\u4f8b\uff1a<code>ORDER BY Visits DESC, SearchPhrase</code></p>\n<p>\u5bf9\u4e8e\u5b57\u7b26\u4e32\u7684\u6392\u5e8f\u6765\u8bb2\uff0c\u4f60\u53ef\u4ee5\u4e3a\u5176\u6307\u5b9a\u4e00\u4e2a\u6392\u5e8f\u89c4\u5219\uff0c\u5728\u6307\u5b9a\u6392\u5e8f\u89c4\u5219\u65f6\uff0c\u6392\u5e8f\u603b\u662f\u4e0d\u4f1a\u533a\u5206\u5927\u5c0f\u5199\u3002\u5e76\u4e14\u5982\u679c\u4e0eASC\u6216DESC\u540c\u65f6\u51fa\u73b0\u65f6\uff0c\u6392\u5e8f\u89c4\u5219\u5fc5\u987b\u5728\u5b83\u4eec\u7684\u540e\u9762\u6307\u5b9a\u3002\u4f8b\u5982\uff1a<code>ORDER BY SearchPhrase COLLATE 'tr'</code> - \u4f7f\u7528\u571f\u8033\u5176\u5b57\u6bcd\u8868\u5bf9\u5b83\u8fdb\u884c\u5347\u5e8f\u6392\u5e8f\uff0c\u540c\u65f6\u6392\u5e8f\u65f6\u4e0d\u4f1a\u533a\u5206\u5927\u5c0f\u5199\uff0c\u5e76\u6309\u7167UTF-8\u5b57\u7b26\u96c6\u8fdb\u884c\u7f16\u7801\u3002</p>\n<p>\u6211\u4eec\u63a8\u8350\u53ea\u5728\u5c11\u91cf\u7684\u6570\u636e\u96c6\u4e2d\u4f7f\u7528COLLATE\uff0c\u56e0\u4e3aCOLLATE\u7684\u6548\u7387\u8fdc\u4f4e\u4e8e\u6b63\u5e38\u7684\u5b57\u8282\u6392\u5e8f\u3002</p>\n<p>\u9488\u5bf9\u6392\u5e8f\u8868\u8fbe\u5f0f\u4e2d\u76f8\u540c\u503c\u7684\u884c\u5c06\u4ee5\u4efb\u610f\u7684\u987a\u5e8f\u8fdb\u884c\u8f93\u51fa\uff0c\u8fd9\u662f\u4e0d\u786e\u5b9a\u7684\uff08\u6bcf\u6b21\u90fd\u53ef\u80fd\u4e0d\u540c\uff09\u3002<br />\n\u5982\u679c\u7701\u7565ORDER BY\u5b50\u53e5\uff0c\u5219\u7ed3\u679c\u7684\u987a\u5e8f\u4e5f\u662f\u4e0d\u56fa\u5b9a\u7684\u3002</p>\n<p><code>NaN</code> \u548c <code>NULL</code> \u7684\u6392\u5e8f\u89c4\u5219\uff1a</p>\n<ul>\n<li>\u5f53\u4f7f\u7528<code>NULLS FIRST</code>\u4fee\u9970\u7b26\u65f6\uff0c\u5c06\u4f1a\u5148\u8f93\u51fa<code>NULL</code>\uff0c\u7136\u540e\u662f<code>NaN</code>\uff0c\u6700\u540e\u624d\u662f\u5176\u4ed6\u503c\u3002</li>\n<li>\u5f53\u4f7f\u7528<code>NULLS LAST</code>\u4fee\u9970\u7b26\u65f6\uff0c\u5c06\u4f1a\u5148\u8f93\u51fa\u5176\u4ed6\u503c\uff0c\u7136\u540e\u662f<code>NaN</code>\uff0c\u6700\u540e\u624d\u662f<code>NULL</code>\u3002</li>\n<li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0e\u4f7f\u7528<code>NULLS LAST</code>\u4fee\u9970\u7b26\u76f8\u540c\u3002</li>\n</ul>\n<p>\u793a\u4f8b:</p>\n<p>\u5047\u8bbe\u5b58\u5728\u5982\u4e0b\u4e00\u5f20\u8868</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    2 \u2502</span>\n<span class=\"err\">\u2502 1 \u2502  nan \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    2 \u2502</span>\n<span class=\"err\">\u2502 3 \u2502    4 \u2502</span>\n<span class=\"err\">\u2502 5 \u2502    6 \u2502</span>\n<span class=\"err\">\u2502 6 \u2502  nan \u2502</span>\n<span class=\"err\">\u2502 7 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 6 \u2502    7 \u2502</span>\n<span class=\"err\">\u2502 8 \u2502    9 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8fd0\u884c\u67e5\u8be2 <code>SELECT * FROM t_null_nan ORDER BY y NULLS FIRST</code> \u5c06\u83b7\u5f97\u5982\u4e0b\u7ed3\u679c:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 7 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 1 \u2502  nan \u2502</span>\n<span class=\"err\">\u2502 6 \u2502  nan \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    2 \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    2 \u2502</span>\n<span class=\"err\">\u2502 3 \u2502    4 \u2502</span>\n<span class=\"err\">\u2502 5 \u2502    6 \u2502</span>\n<span class=\"err\">\u2502 6 \u2502    7 \u2502</span>\n<span class=\"err\">\u2502 8 \u2502    9 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5f53\u4f7f\u7528\u6d6e\u70b9\u7c7b\u578b\u7684\u6570\u503c\u8fdb\u884c\u6392\u5e8f\u65f6\uff0c\u4e0d\u7ba1\u6392\u5e8f\u7684\u987a\u5e8f\u5982\u4f55\uff0cNaNs\u603b\u662f\u51fa\u73b0\u5728\u6240\u6709\u503c\u7684\u540e\u9762\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5f53\u4f60\u4f7f\u7528\u5347\u5e8f\u6392\u5217\u4e00\u4e2a\u6d6e\u70b9\u6570\u503c\u5217\u65f6\uff0cNaNs\u597d\u50cf\u6bd4\u6240\u6709\u503c\u90fd\u8981\u5927\u3002\u53cd\u4e4b\uff0c\u5f53\u4f60\u4f7f\u7528\u964d\u5e8f\u6392\u5217\u4e00\u4e2a\u6d6e\u70b9\u6570\u503c\u5217\u65f6\uff0cNaNs\u597d\u50cf\u6bd4\u6240\u6709\u503c\u90fd\u5c0f\u3002</p>\n<p>\u5982\u679c\u4f60\u5728ORDER BY\u5b50\u53e5\u540e\u9762\u5b58\u5728LIMIT\u5e76\u7ed9\u5b9a\u4e86\u8f83\u5c0f\u7684\u6570\u503c\uff0c\u5219\u5c06\u4f1a\u4f7f\u7528\u8f83\u5c11\u7684\u5185\u5b58\u3002\u5426\u5219\uff0c\u5185\u5b58\u7684\u4f7f\u7528\u91cf\u5c06\u4e0e\u9700\u8981\u6392\u5e8f\u7684\u6570\u636e\u6210\u6b63\u6bd4\u3002\u5bf9\u4e8e\u5206\u5e03\u5f0f\u67e5\u8be2\uff0c\u5982\u679c\u7701\u7565\u4e86GROUP BY\uff0c\u5219\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u90e8\u5206\u6392\u5e8f\uff0c\u6700\u540e\u5728\u8bf7\u6c42\u670d\u52a1\u5668\u4e0a\u5408\u5e76\u6392\u5e8f\u7ed3\u679c\u3002\u8fd9\u610f\u5473\u8fd9\u5bf9\u4e8e\u5206\u5e03\u5f0f\u67e5\u8be2\u800c\u8a00\uff0c\u8981\u6392\u5e8f\u7684\u6570\u636e\u91cf\u53ef\u4ee5\u5927\u4e8e\u5355\u53f0\u670d\u52a1\u5668\u7684\u5185\u5b58\u3002</p>\n<p>\u5982\u679c\u6ca1\u6709\u8db3\u591f\u7684\u5185\u5b58\uff0c\u53ef\u4ee5\u4f7f\u7528\u5916\u90e8\u6392\u5e8f\uff08\u5728\u78c1\u76d8\u4e2d\u521b\u5efa\u4e00\u4e9b\u4e34\u65f6\u6587\u4ef6\uff09\u3002\u53ef\u4ee5\u4f7f\u7528<code>max_bytes_before_external_sort</code>\u6765\u8bbe\u7f6e\u5916\u90e8\u6392\u5e8f\uff0c\u5982\u679c\u4f60\u8bb2\u5b83\u8bbe\u7f6e\u4e3a0\uff08\u9ed8\u8ba4\uff09\uff0c\u5219\u8868\u793a\u7981\u7528\u5916\u90e8\u6392\u5e8f\u529f\u80fd\u3002\u5982\u679c\u542f\u7528\u8be5\u529f\u80fd\u3002\u5f53\u8981\u6392\u5e8f\u7684\u6570\u636e\u91cf\u8fbe\u5230\u6240\u6307\u5b9a\u7684\u5b57\u8282\u6570\u65f6\uff0c\u5f53\u524d\u6392\u5e8f\u7684\u7ed3\u679c\u4f1a\u88ab\u8f6c\u5b58\u5230\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u4e2d\u53bb\u3002\u5f53\u5168\u90e8\u6570\u636e\u8bfb\u53d6\u5b8c\u6bd5\u540e\uff0c\u6240\u6709\u7684\u4e34\u65f6\u6587\u4ef6\u5c06\u4f1a\u5408\u5e76\u6210\u6700\u7ec8\u8f93\u51fa\u7ed3\u679c\u3002\u8fd9\u4e9b\u4e34\u65f6\u6587\u4ef6\u5c06\u4f1a\u5199\u5230config\u6587\u4ef6\u914d\u7f6e\u7684/var/lib/clickhouse/tmp/\u76ee\u5f55\u4e2d\uff08\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539'tmp_path'\u914d\u7f6e\u8c03\u6574\u8be5\u76ee\u5f55\u7684\u4f4d\u7f6e\uff09\u3002</p>\n<p>\u67e5\u8be2\u8fd0\u884c\u4f7f\u7528\u7684\u5185\u5b58\u8981\u9ad8\u4e8e\u2018max_bytes_before_external_sort\u2019\uff0c\u4e3a\u6b64\uff0c\u8fd9\u4e2a\u914d\u7f6e\u5fc5\u987b\u8981\u8fdc\u8fdc\u5c0f\u4e8e\u2018max_memory_usage\u2019\u914d\u7f6e\u7684\u503c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u7684\u670d\u52a1\u5668\u6709128GB\u7684\u5185\u5b58\u53bb\u8fd0\u884c\u4e00\u4e2a\u67e5\u8be2\uff0c\u90a3\u4e48\u63a8\u8350\u4f60\u5c06\u2018max_memory_usage\u2019\u8bbe\u7f6e\u4e3a100GB\uff0c\u2018max_bytes_before_external_sort\u2019\u8bbe\u7f6e\u4e3a80GB\u3002</p>\n<p>\u5916\u90e8\u6392\u5e8f\u6548\u7387\u8981\u8fdc\u4f4e\u4e8e\u5728\u5185\u5b58\u4e2d\u6392\u5e8f\u3002</p>\n<h4 id=\"select-zi-ju\">SELECT \u5b50\u53e5<a class=\"headerlink\" href=\"#select-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5728\u5b8c\u6210\u4e0a\u8ff0\u5217\u51fa\u7684\u6240\u6709\u5b50\u53e5\u540e\uff0c\u5c06\u5bf9SELECT\u5b50\u53e5\u4e2d\u7684\u8868\u8fbe\u5f0f\u8fdb\u884c\u5206\u6790\u3002<br />\n\u5177\u4f53\u6765\u8bb2\uff0c\u5982\u679c\u5728\u5b58\u5728\u805a\u5408\u51fd\u6570\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5bf9\u805a\u5408\u51fd\u6570\u4e4b\u524d\u7684\u8868\u8fbe\u5f0f\u8fdb\u884c\u5206\u6790\u3002<br />\n\u805a\u5408\u51fd\u6570\u4e0e\u805a\u5408\u51fd\u6570\u4e4b\u524d\u7684\u8868\u8fbe\u5f0f\u90fd\u5c06\u5728\u805a\u5408\u671f\u95f4\u5b8c\u6210\u8ba1\u7b97\uff08GROUP BY\uff09\u3002<br />\n\u5c31\u50cf\u4ed6\u4eec\u672c\u8eab\u5c31\u5df2\u7ecf\u5b58\u5728\u7ed3\u679c\u4e0a\u4e00\u6837\u3002</p>\n<h4 id=\"select-distinct\">DISTINCT \u5b50\u53e5<a class=\"headerlink\" href=\"#select-distinct\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5982\u679c\u5b58\u5728DISTINCT\u5b50\u53e5\uff0c\u5219\u4f1a\u5bf9\u7ed3\u679c\u4e2d\u7684\u5b8c\u5168\u76f8\u540c\u7684\u884c\u8fdb\u884c\u53bb\u91cd\u3002<br />\n\u5728GROUP BY\u4e0d\u5305\u542b\u805a\u5408\u51fd\u6570\uff0c\u5e76\u5bf9\u5168\u90e8SELECT\u90e8\u5206\u90fd\u5305\u542b\u5728GROUP BY\u4e2d\u65f6\u7684\u4f5c\u7528\u4e00\u6837\u3002\u4f46\u8be5\u5b50\u53e5\u8fd8\u662f\u4e0eGROUP BY\u5b50\u53e5\u5b58\u5728\u4ee5\u4e0b\u51e0\u70b9\u4e0d\u540c\uff1a</p>\n<ul>\n<li>\u53ef\u4ee5\u4e0eGROUP BY\u914d\u5408\u4f7f\u7528\u3002</li>\n<li>\u5f53\u4e0d\u5b58\u5728ORDER BY\u5b50\u53e5\u5e76\u5b58\u5728LIMIT\u5b50\u53e5\u65f6\uff0c\u67e5\u8be2\u5c06\u5728\u540c\u65f6\u6ee1\u8db3DISTINCT\u4e0eLIMIT\u7684\u60c5\u51b5\u4e0b\u7acb\u5373\u505c\u6b62\u67e5\u8be2\u3002</li>\n<li>\u5728\u5904\u7406\u6570\u636e\u7684\u540c\u65f6\u8f93\u51fa\u7ed3\u679c\uff0c\u5e76\u4e0d\u662f\u7b49\u5f85\u6574\u4e2a\u67e5\u8be2\u5168\u90e8\u5b8c\u6210\u3002</li>\n</ul>\n<p>\u5728SELECT\u8868\u8fbe\u5f0f\u4e2d\u5b58\u5728Array\u7c7b\u578b\u7684\u5217\u65f6\uff0c\u4e0d\u80fd\u4f7f\u7528DISTINCT\u3002</p>\n<p><code>DISTINCT</code>\u53ef\u4ee5\u4e0e <a href=\"#syntax/\">NULL</a>\u4e00\u8d77\u5de5\u4f5c\uff0c\u5c31\u597d\u50cf<code>NULL</code>\u4ec5\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u503c\u4e00\u6837\uff0c\u5e76\u4e14<code>NULL=NULL</code>\u3002\u6362\u800c\u8a00\u4e4b\uff0c\u5728<code>DISTINCT</code>\u7684\u7ed3\u679c\u4e2d\uff0c\u4e0e<code>NULL</code>\u4e0d\u540c\u7684\u7ec4\u5408\u4ec5\u80fd\u51fa\u73b0\u4e00\u6b21\u3002</p>\n<h4 id=\"limit-zi-ju\">LIMIT \u5b50\u53e5<a class=\"headerlink\" href=\"#limit-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>LIMIT m \u7528\u4e8e\u5728\u67e5\u8be2\u7ed3\u679c\u4e2d\u9009\u62e9\u524dm\u884c\u6570\u636e\u3002<br />\nLIMIT n, m \u7528\u4e8e\u5728\u67e5\u8be2\u7ed3\u679c\u4e2d\u9009\u62e9\u4ecen\u884c\u5f00\u59cb\u7684m\u884c\u6570\u636e\u3002</p>\n<p>\u2018n\u2019\u4e0e\u2018m\u2019\u5fc5\u987b\u662f\u6b63\u6574\u6570\u3002</p>\n<p>\u5982\u679c\u6ca1\u6709\u6307\u5b9aORDER BY\u5b50\u53e5\uff0c\u5219\u7ed3\u679c\u53ef\u80fd\u662f\u4efb\u610f\u7684\u987a\u5e8f\uff0c\u5e76\u4e14\u662f\u4e0d\u786e\u5b9a\u7684\u3002</p>\n<h4 id=\"union-all-zi-ju\">UNION ALL \u5b50\u53e5<a class=\"headerlink\" href=\"#union-all-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>UNION ALL\u5b50\u53e5\u53ef\u4ee5\u7ec4\u5408\u4efb\u610f\u6570\u91cf\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"mi\">1</span> <span class=\"k\">AS</span> <span class=\"k\">table</span><span class=\"p\">,</span> <span class=\"n\">toInt64</span><span class=\"p\">(</span><span class=\"k\">count</span><span class=\"p\">())</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">CounterID</span>\n\n<span class=\"k\">UNION</span> <span class=\"k\">ALL</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"mi\">2</span> <span class=\"k\">AS</span> <span class=\"k\">table</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">CounterID</span>\n    <span class=\"k\">HAVING</span> <span class=\"k\">c</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<p>\u4ec5\u652f\u6301UNION ALL\uff0c\u4e0d\u652f\u6301\u5176\u4ed6UNION\u89c4\u5219(UNION DISTINCT)\u3002\u5982\u679c\u4f60\u9700\u8981UNION DISTINCT\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528UNION ALL\u4e2d\u5305\u542bSELECT DISTINCT\u7684\u5b50\u67e5\u8be2\u7684\u65b9\u5f0f\u3002</p>\n<p>UNION ALL\u4e2d\u7684\u67e5\u8be2\u53ef\u4ee5\u540c\u65f6\u8fd0\u884c\uff0c\u5b83\u4eec\u7684\u7ed3\u679c\u5c06\u88ab\u6df7\u5408\u5230\u4e00\u8d77\u3002</p>\n<p>\u8fd9\u4e9b\u67e5\u8be2\u7684\u7ed3\u679c\u7ed3\u679c\u5fc5\u987b\u76f8\u540c\uff08\u5217\u7684\u6570\u91cf\u548c\u7c7b\u578b\uff09\u3002\u5217\u540d\u53ef\u4ee5\u662f\u4e0d\u540c\u7684\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6700\u7ec8\u7ed3\u679c\u7684\u5217\u540d\u5c06\u4ece\u7b2c\u4e00\u4e2a\u67e5\u8be2\u4e2d\u83b7\u53d6\u3002UNION");
            
            document.write("\u4f1a\u4e3a\u67e5\u8be2\u4e4b\u95f4\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7ec4\u5408\u7684\u4e24\u4e2a\u67e5\u8be2\u4e2d\u5305\u542b\u76f8\u540c\u7684\u5b57\u6bb5\uff0c\u5e76\u4e14\u662f\u7c7b\u578b\u517c\u5bb9\u7684<code>Nullable</code>\u548cnon-<code>Nullable</code>\uff0c\u5219\u7ed3\u679c\u5c06\u4f1a\u5c06\u8be5\u5b57\u6bb5\u8f6c\u6362\u4e3a<code>Nullable</code>\u7c7b\u578b\u7684\u5b57\u6bb5\u3002</p>\n<p>\u4f5c\u4e3aUNION ALL\u67e5\u8be2\u7684\u90e8\u5206\u4e0d\u80fd\u5305\u542b\u5728\u62ec\u53f7\u5185\u3002ORDER BY\u4e0eLIMIT\u5b50\u53e5\u5e94\u8be5\u88ab\u5e94\u7528\u5728\u6bcf\u4e2a\u67e5\u8be2\u4e2d\uff0c\u800c\u4e0d\u662f\u6700\u7ec8\u7684\u67e5\u8be2\u4e2d\u3002\u5982\u679c\u4f60\u9700\u8981\u505a\u6700\u7ec8\u7ed3\u679c\u8f6c\u6362\uff0c\u4f60\u53ef\u4ee5\u5c06UNION ALL\u4f5c\u4e3a\u4e00\u4e2a\u5b50\u67e5\u8be2\u5305\u542b\u5728FROM\u5b50\u53e5\u4e2d\u3002</p>\n<h4 id=\"into-outfile-zi-ju\">INTO OUTFILE \u5b50\u53e5<a class=\"headerlink\" href=\"#into-outfile-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p><code>INTO OUTFILE filename</code> \u5b50\u53e5\u7528\u4e8e\u5c06\u67e5\u8be2\u7ed3\u679c\u91cd\u5b9a\u5411\u8f93\u51fa\u5230\u6307\u5b9a\u6587\u4ef6\u4e2d\uff08filename\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u503c\uff09\u3002<br />\n\u4e0eMySQL\u4e0d\u540c\uff0c\u6267\u884c\u7684\u7ed3\u679c\u6587\u4ef6\u5c06\u5728\u5ba2\u6237\u7aef\u5efa\u7acb\uff0c\u5982\u679c\u6587\u4ef6\u5df2\u5b58\u5728\uff0c\u67e5\u8be2\u5c06\u4f1a\u5931\u8d25\u3002<br />\n\u6b64\u547d\u4ee4\u53ef\u4ee5\u5de5\u4f5c\u5728\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u4e0eclickhouse-local\u4e2d\uff08\u901a\u8fc7HTTP\u501f\u53e3\u53d1\u9001\u5c06\u4f1a\u5931\u8d25\uff09\u3002</p>\n<p>\u9ed8\u8ba4\u7684\u8f93\u51fa\u683c\u5f0f\u662fTabSeparated\uff08\u4e0e\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u7684\u6279\u5904\u7406\u6a21\u5f0f\u76f8\u540c\uff09\u3002</p>\n<h4 id=\"format-zi-ju\">FORMAT \u5b50\u53e5<a class=\"headerlink\" href=\"#format-zi-ju\" title=\"Permanent link\">&para;</a></h4>\n<p>'FORMAT format' \u5b50\u53e5\u7528\u4e8e\u6307\u5b9a\u8fd4\u56de\u6570\u636e\u7684\u683c\u5f0f\u3002<br />\n\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u65b9\u4fbf\u7684\u8f6c\u6362\u6216\u521b\u5efa\u6570\u636e\u7684\u8f6c\u50a8\u3002<br />\n\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1\u201c\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\u201d\u90e8\u5206\u3002<br />\n\u5982\u679c\u4e0d\u5b58\u5728FORMAT\u5b50\u53e5\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u7684\u683c\u5f0f\uff0c\u8fd9\u5c06\u53d6\u51b3\u4e0eDB\u7684\u914d\u7f6e\u4ee5\u53ca\u6240\u4f7f\u7528\u7684\u5ba2\u6237\u7aef\u3002\u5bf9\u4e8e\u6279\u91cf\u6a21\u5f0f\u7684HTTP\u5ba2\u6237\u7aef\u548c\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u800c\u8a00\uff0c\u9ed8\u8ba4\u7684\u683c\u5f0f\u662fTabSeparated\u3002\u5bf9\u4e8e\u4ea4\u4e92\u6a21\u5f0f\u4e0b\u7684\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\uff0c\u9ed8\u8ba4\u7684\u683c\u5f0f\u662fPrettyCompact\uff08\u5b83\u6709\u66f4\u52a0\u7f8e\u89c2\u7684\u683c\u5f0f\uff09\u3002</p>\n<p>\u5f53\u4f7f\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u65f6\uff0c\u6570\u636e\u4ee5\u5185\u90e8\u9ad8\u6548\u7684\u683c\u5f0f\u5728\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u8fdb\u884c\u4f20\u9012\u3002\u5ba2\u6237\u7aef\u5c06\u5355\u72ec\u7684\u89e3\u6790FORMAT\u5b50\u53e5\uff0c\u4ee5\u5e2e\u52a9\u6570\u636e\u683c\u5f0f\u7684\u8f6c\u6362\uff08\u8fd9\u5c06\u51cf\u8f7b\u7f51\u7edc\u548c\u670d\u52a1\u5668\u7684\u8d1f\u8f7d\uff09\u3002</p>\n<h4 id=\"select-in-operators\">IN \u8fd0\u7b97\u7b26<a class=\"headerlink\" href=\"#select-in-operators\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5bf9\u4e8e<code>IN</code>\u3001<code>NOT IN</code>\u3001<code>GLOBAL IN</code>\u3001<code>GLOBAL NOT IN</code>\u64cd\u4f5c\u7b26\u88ab\u5206\u522b\u5b9e\u73b0\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u529f\u80fd\u975e\u5e38\u4e30\u5bcc\u3002</p>\n<p>\u8fd0\u7b97\u7b26\u7684\u5de6\u4fa7\u662f\u5355\u5217\u6216\u5217\u7684\u5143\u7ec4\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">UserID</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"mi\">456</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"p\">...</span>\n<span class=\"k\">SELECT</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">IN</span> <span class=\"p\">((</span><span class=\"mi\">34</span><span class=\"p\">,</span> <span class=\"mi\">123</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">101500</span><span class=\"p\">,</span> <span class=\"mi\">456</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u5de6\u4fa7\u662f\u5355\u4e2a\u5217\u5e76\u4e14\u662f\u4e00\u4e2a\u7d22\u5f15\uff0c\u5e76\u4e14\u53f3\u4fa7\u662f\u4e00\u7ec4\u5e38\u91cf\u65f6\uff0c\u7cfb\u7edf\u5c06\u4f7f\u7528\u7d22\u5f15\u6765\u5904\u7406\u67e5\u8be2\u3002</p>\n<p>\u4e0d\u8981\u5728\u5217\u8868\u4e2d\u5217\u51fa\u592a\u591a\u7684\u503c\uff08\u767e\u4e07\uff09\u3002\u5982\u679c\u6570\u636e\u96c6\u5f88\u5927\uff0c\u5c06\u5b83\u4eec\u653e\u5165\u4e34\u65f6\u8868\u4e2d\uff08\u53ef\u4ee5\u53c2\u8003\u201c\u201d\uff09, \u7136\u540e\u4f7f\u7528\u5b50\u67e5\u8be2\u3002<br />\nDon't list too many values explicitly (i.e. millions). If a data set is large, put it in a temporary table (for example, see the section \"External data for query processing\"), then use a subquery.</p>\n<p>\u53f3\u4fa7\u53ef\u4ee5\u662f\u4e00\u4e2a\u7531\u5e38\u91cf\u8868\u8fbe\u5f0f\u7ec4\u6210\u7684\u5143\u7ec4\u5217\u8868\uff08\u50cf\u4e0a\u9762\u7684\u4f8b\u5b50\u4e00\u6837\uff09\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u6570\u636e\u5e93\u4e2d\u7684\u8868\u7684\u540d\u79f0\uff0c\u6216\u662f\u4e00\u4e2a\u5305\u542b\u5728\u62ec\u53f7\u4e2d\u7684\u5b50\u67e5\u8be2\u3002</p>\n<p>\u5982\u679c\u53f3\u4fa7\u662f\u4e00\u4e2a\u8868\u7684\u540d\u5b57\uff08\u4f8b\u5982\uff0c<code>UserID IN users</code>\uff09\uff0c\u8fd9\u76f8\u5f53\u4e8e<code>UserID IN (SELECT * FROM users)</code>\u3002\u5728\u67e5\u8be2\u4e0e\u5916\u90e8\u6570\u636e\u8868\u7ec4\u5408\u4f7f\u7528\u65f6\u53ef\u4ee5\u4f7f\u7528\u8be5\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c\u67e5\u8be2\u4e0e\u5305\u542buser IDS\u7684\u2018users\u2019\u4e34\u65f6\u8868\u4e00\u8d77\u88ab\u53d1\u9001\u7684\u540c\u65f6\u9700\u8981\u5bf9\u7ed3\u679c\u8fdb\u884c\u8fc7\u6ee4\u65f6\u3002</p>\n<p>\u5982\u679c\u64cd\u4f5c\u7b26\u7684\u53f3\u4fa7\u662f\u4e00\u4e2aSet\u5f15\u64ce\u7684\u8868\u65f6\uff08\u6570\u636e\u603b\u662f\u5728\u5185\u5b58\u4e2d\u51c6\u5907\u597d\uff09\uff0c\u5219\u4e0d\u4f1a\u6bcf\u6b21\u90fd\u4e3a\u67e5\u8be2\u521b\u5efa\u65b0\u7684\u6570\u636e\u96c6\u3002</p>\n<p>\u5b50\u67e5\u8be2\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u5217\u4ee5\u4e0a\u7684\u5143\u7ec4\u6765\u8fdb\u884c\u8fc7\u6ee4\u3002<br />\n\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">UserID</span> <span class=\"k\">FROM</span> <span class=\"p\">...)</span> <span class=\"k\">FROM</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>IN\u64cd\u4f5c\u7b26\u7684\u5de6\u53f3\u4e24\u4fa7\u5e94\u5177\u6709\u76f8\u540c\u7684\u7c7b\u578b\u3002</p>\n<p>IN\u64cd\u4f5c\u7b26\u7684\u5b50\u67e5\u8be2\u4e2d\u53ef\u4ee5\u51fa\u73b0\u4efb\u610f\u5b50\u53e5\uff0c\u5305\u542b\u805a\u5408\u51fd\u6570\u4e0elambda\u51fd\u6570\u3002<br />\n\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">EventDate</span><span class=\"p\">,</span>\n    <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">UserID</span> <span class=\"k\">IN</span>\n    <span class=\"p\">(</span>\n        <span class=\"k\">SELECT</span> <span class=\"n\">UserID</span>\n        <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n        <span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-03-17&#39;</span><span class=\"p\">)</span>\n    <span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">ratio</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"k\">ASC</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500EventDate\u2500\u252c\u2500\u2500\u2500\u2500ratio\u2500\u2510</span>\n<span class=\"err\">\u2502 2014-03-17 \u2502        1 \u2502</span>\n<span class=\"err\">\u2502 2014-03-18 \u2502 0.807696 \u2502</span>\n<span class=\"err\">\u2502 2014-03-19 \u2502 0.755406 \u2502</span>\n<span class=\"err\">\u2502 2014-03-20 \u2502 0.723218 \u2502</span>\n<span class=\"err\">\u2502 2014-03-21 \u2502 0.697021 \u2502</span>\n<span class=\"err\">\u2502 2014-03-22 \u2502 0.647851 \u2502</span>\n<span class=\"err\">\u2502 2014-03-23 \u2502 0.648416 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4e3a3\u670817\u65e5\u4e4b\u540e\u7684\u6bcf\u4e00\u5929\u8ba1\u7b97\u4e0e3\u670817\u65e5\u8bbf\u95ee\u8be5\u7f51\u7ad9\u7684\u7528\u6237\u6d4f\u89c8\u7f51\u9875\u7684\u767e\u5206\u6bd4\u3002<br />\nIN\u5b50\u53e5\u4e2d\u7684\u5b50\u67e5\u8be2\u4ec5\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u4e00\u6b21\u3002\u4e0d\u80fd\u591f\u662f\u76f8\u5173\u5b50\u67e5\u8be2\u3002</p>\n<h5 id=\"null-chu-li_1\">NULL \u5904\u7406<a class=\"headerlink\" href=\"#null-chu-li_1\" title=\"Permanent link\">&para;</a></h5>\n<p>\u5728\u5904\u7406\u4e2d\uff0cIN\u64cd\u4f5c\u7b26\u603b\u662f\u5047\u5b9a <a href=\"#syntax/\">NULL</a> \u503c\u7684\u64cd\u4f5c\u7ed3\u679c\u603b\u662f\u7b49\u4e8e<code>0</code>\uff0c\u800c\u4e0d\u7ba1<code>NULL</code>\u4f4d\u4e8e\u5de6\u4fa7\u8fd8\u662f\u53f3\u4fa7\u3002<code>NULL</code>\u503c\u4e0d\u5e94\u8be5\u5305\u542b\u5728\u4efb\u4f55\u6570\u636e\u96c6\u4e2d\uff0c\u5b83\u4eec\u5f7c\u6b64\u4e0d\u80fd\u591f\u5bf9\u5e94\uff0c\u5e76\u4e14\u4e0d\u80fd\u591f\u6bd4\u8f83\u3002</p>\n<p>\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\u6709\u4e00\u4e2a<code>t_null</code>\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    3 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8fd0\u884c\u67e5\u8be2<code>SELECT x FROM t_null WHERE y IN (NULL,3)</code>\u5c06\u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u2510</span>\n<span class=\"err\">\u2502 2 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4f60\u53ef\u4ee5\u770b\u5230\u5728\u67e5\u8be2\u7ed3\u679c\u4e2d\u4e0d\u5b58\u5728<code>y = NULL</code>\u7684\u7ed3\u679c\u3002\u8fd9\u662f\u56e0\u4e3aClickHouse\u65e0\u6cd5\u786e\u5b9a<code>NULL</code>\u662f\u5426\u5305\u542b\u5728<code>(NULL,3)</code>\u6570\u636e\u96c6\u4e2d\uff0c\u5bf9\u4e8e\u8fd9\u6b21\u6bd4\u8f83\u64cd\u4f5c\u8fd4\u56de\u4e86<code>0</code>\uff0c\u5e76\u4e14\u5728<code>SELECT</code>\u7684\u6700\u7ec8\u8f93\u51fa\u4e2d\u6392\u9664\u4e86\u8fd9\u884c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">y</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"k\">in</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>                     <span class=\"mi\">0</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span>                     <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h5 id=\"select-distributed-subqueries\">\u5206\u5e03\u5f0f\u5b50\u67e5\u8be2<a class=\"headerlink\" href=\"#select-distributed-subqueries\" title=\"Permanent link\">&para;</a></h5>\n<p>\u5bf9\u4e8e\u5e26\u6709\u5b50\u67e5\u8be2\u7684\uff08\u7c7b\u4f3c\u4e0eJOINs\uff09IN\u4e2d\uff0c\u6709\u4e24\u79cd\u9009\u62e9:\u666e\u901a\u7684<code>IN</code>\uff0f<code>JOIN</code>\u4e0e<code>GLOBAL IN</code> \uff0f <code>GLOBAL JOIN</code>\u3002\u5b83\u4eec\u5bf9\u4e8e\u5206\u5e03\u5f0f\u67e5\u8be2\u7684\u5904\u7406\u8fd0\u884c\u65b9\u5f0f\u662f\u4e0d\u540c\u7684\u3002</p>\n<div class=\"admonition \u6ce8\u610f\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u8bf7\u8bb0\u4f4f\uff0c\u4e0b\u9762\u63cf\u8ff0\u7684\u7b97\u6cd5\u53ef\u80fd\u56e0\u4e3a\u6839\u636e <a href=\"#../operations/settings/settings/\">settings</a> \u914d\u7f6e\u7684\u4e0d\u540c\u800c\u4e0d\u540c\u3002</p>\n</div>\n<p>\u5f53\u4f7f\u7528\u666e\u901a\u7684IN\u65f6\uff0c\u67e5\u8be2\u603b\u662f\u88ab\u53d1\u9001\u5230\u8fdc\u7a0b\u7684\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u5728\u6bcf\u4e2a\u670d\u52a1\u5668\u4e2d\u8fd0\u884c\u201cIN\u201d\u6216\u201cJOIN\u201d\u5b50\u53e5\u4e2d\u7684\u5b50\u67e5\u8be2\u3002</p>\n<p>\u5f53\u4f7f\u7528<code>GLOBAL IN</code> / <code>GLOBAL JOIN</code>\u65f6\uff0c\u9996\u5148\u4f1a\u4e3a<code>GLOBAL IN</code> / <code>GLOBAL JOIN</code>\u8fd0\u884c\u6240\u6709\u5b50\u67e5\u8be2\uff0c\u5e76\u5c06\u7ed3\u679c\u6536\u96c6\u5230\u4e34\u65f6\u8868\u4e2d\uff0c\u5e76\u5c06\u4e34\u65f6\u8868\u53d1\u9001\u5230\u6bcf\u4e2a\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u5e76\u4f7f\u7528\u8be5\u4e34\u65f6\u8868\u8fd0\u884c\u67e5\u8be2\u3002</p>\n<p>\u5bf9\u4e8e\u975e\u5206\u5e03\u5f0f\u67e5\u8be2\uff0c\u8bf7\u4f7f\u7528\u666e\u901a\u7684<code>IN</code> \uff0f <code>JOIN</code>\u3002</p>\n<p>\u5728\u5206\u5e03\u5f0f\u67e5\u8be2\u4e2d\u4f7f\u7528<code>IN</code> / <code>JOIN</code>\u5b50\u53e5\u4e2d\u4f7f\u7528\u5b50\u67e5\u8be2\u9700\u8981\u5c0f\u5fc3\u3002</p>\n<p>\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u4e9b\u4f8b\u5b50\u3002\u5047\u8bbe\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u670d\u52a1\u5668\u90fd\u5b58\u5728\u4e00\u4e2a\u6b63\u5e38\u8868<strong>local_table</strong>\u3002\u4e0e\u4e00\u4e2a\u5206\u5e03\u5f0f\u8868<strong>distributed_table</strong>\u3002</p>\n<p>\u5bf9\u4e8e\u6240\u6709\u67e5\u8be2<strong>distributed_table</strong>\u7684\u67e5\u8be2\uff0c\u67e5\u8be2\u4f1a\u88ab\u53d1\u9001\u5230\u6240\u6709\u7684\u8fdc\u7a0b\u670d\u52a1\u5668\u5e76\u4f7f\u7528<strong>local_table</strong>\u8868\u8fd0\u884c\u67e5\u8be2\u3002</p>\n<p>\u4f8b\u5982\uff0c\u67e5\u8be2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">distributed_table</span>\n</code></pre></div>\n\n\n<p>\u5c06\u53d1\u9001\u5982\u4e0b\u67e5\u8be2\u5230\u6240\u6709\u8fdc\u7a0b\u670d\u52a1\u5668</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">local_table</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u65f6\u5c06\u5e76\u884c\u7684\u6267\u884c\u5b83\u4eec\uff0c\u76f4\u5230\u8fbe\u5230\u53ef\u4ee5\u7ec4\u5408\u6570\u636e\u7684\u4e2d\u95f4\u7ed3\u679c\u72b6\u6001\u3002\u7136\u540e\u4e2d\u95f4\u7ed3\u679c\u5c06\u8fd4\u56de\u5230\u8bf7\u6c42\u670d\u52a1\u5668\u5e76\u5728\u8bf7\u6c42\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u5408\u5e76\uff0c\u6700\u7ec8\u5c06\u7ed3\u679c\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002</p>\n<p>\u73b0\u5728\u8ba9\u6211\u8fd0\u884c\u4e00\u4e2a\u5e26\u6709IN\u7684\u67e5\u8be2\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">distributed_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"n\">UserID</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"n\">UserID</span> <span class=\"k\">FROM</span> <span class=\"n\">local_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<ul>\n<li>\u8ba1\u7b97\u4e24\u4e2a\u7ad9\u70b9\u7684\u7528\u6237\u4ea4\u96c6\u3002</li>\n</ul>\n<p>\u6b64\u67e5\u8be2\u5c06\u88ab\u53d1\u9001\u7ed9\u6240\u6709\u7684\u8fdc\u7a0b\u670d\u52a1\u5668</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">local_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"n\">UserID</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"n\">UserID</span> <span class=\"k\">FROM</span> <span class=\"n\">local_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u6362\u53e5\u8bdd\u8bf4\uff0cIN\u5b50\u53e5\u4e2d\u7684\u6570\u636e\u96c6\u5c06\u88ab\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\u88ab\u72ec\u7acb\u7684\u6536\u96c6\uff0c\u4ec5\u4e0e\u6bcf\u53f0\u670d");
            
            document.write("\u52a1\u5668\u4e0a\u7684\u672c\u5730\u5b58\u50a8\u4e0a\u7684\u6570\u636e\u8ba1\u7b97\u4ea4\u96c6\u3002</p>\n<p>\u5982\u679c\u60a8\u5df2\u7ecf\u5c06\u6570\u636e\u5206\u6563\u5230\u4e86\u96c6\u7fa4\u7684\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u5e76\u4e14\u5355\u4e2aUserID\u7684\u6570\u636e\u5b8c\u5168\u5206\u5e03\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\uff0c\u90a3\u4e48\u8fd9\u5c06\u662f\u6b63\u786e\u4e14\u6700\u4f73\u7684\u67e5\u8be2\u65b9\u5f0f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u9700\u8981\u7684\u6570\u636e\u90fd\u53ef\u4ee5\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u7684\u672c\u5730\u8fdb\u884c\u83b7\u53d6\u3002\u5426\u5219\uff0c\u7ed3\u679c\u5c06\u662f\u4e0d\u51c6\u786e\u7684\u3002\u6211\u4eec\u5c06\u8fd9\u79cd\u67e5\u8be2\u79f0\u4e3a\u201clocal IN\u201d\u3002</p>\n<p>\u4e3a\u4e86\u4fee\u6b63\u8fd9\u79cd\u5728\u6570\u636e\u968f\u673a\u5206\u5e03\u7684\u96c6\u7fa4\u4e2d\u7684\u5de5\u4f5c\uff0c\u4f60\u53ef\u4ee5\u5728\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528<strong>distributed_table</strong>\u3002\u67e5\u8be2\u5c06\u66f4\u6539\u4e3a\u8fd9\u6837\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">distributed_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"n\">UserID</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"n\">UserID</span> <span class=\"k\">FROM</span> <span class=\"n\">distributed_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u6b64\u67e5\u8be2\u5c06\u88ab\u53d1\u9001\u7ed9\u6240\u6709\u7684\u8fdc\u7a0b\u670d\u52a1\u5668</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">local_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"n\">UserID</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"n\">UserID</span> <span class=\"k\">FROM</span> <span class=\"n\">distributed_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5b50\u67e5\u8be2\u5c06\u5728\u6bcf\u4e2a\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u3002\u56e0\u4e3a\u5b50\u67e5\u8be2\u4f7f\u7528\u5206\u5e03\u5f0f\u8868\uff0c\u6240\u6709\u6bcf\u4e2a\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7684\u5b50\u67e5\u8be2\u5c06\u67e5\u8be2\u518d\u6b21\u53d1\u9001\u7ed9\u6240\u6709\u7684\u8fdc\u7a0b\u670d\u52a1\u5668</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">UserID</span> <span class=\"k\">FROM</span> <span class=\"n\">local_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span>\n</code></pre></div>\n\n\n<p>\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u62e5\u6709100\u53f0\u670d\u52a1\u5668\u7684\u96c6\u7fa4\uff0c\u6267\u884c\u6574\u4e2a\u67e5\u8be2\u5c06\u9700\u898110\uff0c000\u6b21\u8bf7\u6c42\uff0c\u8fd9\u901a\u5e38\u88ab\u8ba4\u4e3a\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\u3002</p>\n<p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528GLOBAL IN\u6765\u66ff\u4ee3IN\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u5b83\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">distributed_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"n\">UserID</span> <span class=\"k\">GLOBAL</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"n\">UserID</span> <span class=\"k\">FROM</span> <span class=\"n\">distributed_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5728\u8bf7\u6c42\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u5b50\u67e5\u8be2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">UserID</span> <span class=\"k\">FROM</span> <span class=\"n\">distributed_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span>\n</code></pre></div>\n\n\n<p>\u5c06\u7ed3\u679c\u653e\u5165\u5185\u5b58\u4e2d\u7684\u4e34\u65f6\u8868\u4e2d\u3002\u7136\u540e\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u6bcf\u4e00\u53f0\u8fdc\u7a0b\u670d\u52a1\u5668</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">local_table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"n\">UserID</span> <span class=\"k\">GLOBAL</span> <span class=\"k\">IN</span> <span class=\"n\">_data1</span>\n</code></pre></div>\n\n\n<p>\u4e34\u65f6\u8868<code>_data1</code>\u4e5f\u4f1a\u968f\u7740\u67e5\u8be2\u4e00\u8d77\u53d1\u9001\u5230\u6bcf\u4e00\u53f0\u8fdc\u7a0b\u670d\u52a1\u5668\uff08\u4e34\u65f6\u8868\u7684\u540d\u79f0\u7531\u5177\u4f53\u5b9e\u73b0\u5b9a\u4e49\uff09\u3002</p>\n<p>\u8fd9\u6bd4\u4f7f\u7528\u666e\u901a\u7684IN\u66f4\u52a0\u7406\u60f3\uff0c\u4f46\u662f\uff0c\u8bf7\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a</p>\n<ol>\n<li>\u521b\u5efa\u4e34\u65f6\u8868\u65f6\uff0c\u6570\u636e\u4e0d\u662f\u552f\u4e00\u7684\uff0c\u4e3a\u4e86\u51cf\u5c11\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u7684\u6570\u636e\u91cf\uff0c\u8bf7\u5728\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528DISTINCT\uff08\u4f60\u4e0d\u9700\u8981\u5728\u666e\u901a\u7684IN\u4e2d\u8fd9\u4e48\u505a\uff09</li>\n<li>\u4e34\u65f6\u8868\u5c06\u53d1\u9001\u5230\u6240\u6709\u8fdc\u7a0b\u670d\u52a1\u5668\u3002\u5176\u4e2d\u4f20\u8f93\u4e0d\u8003\u8651\u7f51\u7edc\u7684\u62d3\u6251\u7ed3\u6784\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u670910\u4e2a\u8fdc\u7a0b\u670d\u52a1\u5668\u5b58\u5728\u4e0e\u8bf7\u6c42\u670d\u52a1\u5668\u975e\u5e38\u8fdc\u7684\u6570\u636e\u4e2d\u5fc3\u4e2d\uff0c\u5219\u6570\u636e\u5c06\u901a\u8fc7\u901a\u9053\u53d1\u9001\u6570\u636e\u5230\u8fdc\u7a0b\u6570\u636e\u4e2d\u5fc310\u6b21\u3002\u4f7f\u7528GLOBAL IN\u65f6\u5e94\u907f\u514d\u5927\u6570\u636e\u96c6\u3002</li>\n<li>\u5f53\u5411\u8fdc\u7a0b\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\u65f6\uff0c\u7f51\u7edc\u5e26\u5bbd\u7684\u9650\u5236\u662f\u4e0d\u53ef\u914d\u7f6e\u7684\uff0c\u8fd9\u53ef\u80fd\u4f1a\u7f51\u7edc\u7684\u8d1f\u8f7d\u9020\u6210\u538b\u529b\u3002</li>\n<li>\u5c1d\u8bd5\u5c06\u6570\u636e\u8de8\u670d\u52a1\u5668\u5206\u5e03\uff0c\u8fd9\u6837\u4f60\u5c06\u4e0d\u9700\u8981\u4f7f\u7528GLOBAL IN\u3002</li>\n<li>\u5982\u679c\u4f60\u9700\u8981\u7ecf\u5e38\u4f7f\u7528GLOBAL IN\uff0c\u8bf7\u89c4\u5212\u4f60\u7684ClickHouse\u96c6\u7fa4\u4f4d\u7f6e\uff0c\u4ee5\u4fbf\u526f\u672c\u4e4b\u95f4\u4e0d\u5b58\u5728\u8de8\u6570\u636e\u4e2d\u5fc3\uff0c\u5e76\u4e14\u5b83\u4eec\u4e4b\u95f4\u5177\u6709\u5feb\u901f\u7684\u7f51\u7edc\u4ea4\u6362\u80fd\u529b\uff0c\u4ee5\u4fbf\u67e5\u8be2\u53ef\u4ee5\u5b8c\u5168\u5728\u4e00\u4e2a\u6570\u636e\u4e2d\u5fc3\u5185\u5b8c\u6210\u3002</li>\n</ol>\n<p>\u53e6\u5916\uff0c\u5728<code>GLOBAL IN</code>\u5b50\u53e5\u4e2d\u4f7f\u7528\u672c\u5730\u8868\u4e5f\u662f\u6709\u7528\u7684\uff0c\u6bd4\u5982\uff0c\u672c\u5730\u8868\u4ec5\u5728\u8bf7\u6c42\u670d\u52a1\u5668\u4e0a\u53ef\u7528\uff0c\u5e76\u4e14\u60a8\u5e0c\u671b\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u4f7f\u7528\u6765\u81ea\u672c\u5730\u8868\u7684\u6570\u636e\u3002</p>\n<h4 id=\"extreme-values\">Extreme Values<a class=\"headerlink\" href=\"#extreme-values\" title=\"Permanent link\">&para;</a></h4>\n<p>\u9664\u4e86\u7ed3\u679c\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u83b7\u5f97\u7ed3\u679c\u5217\u7684\u6700\u5927\u503c\u4e0e\u6700\u5c0f\u503c\uff0c\u53ef\u4ee5\u5c06<strong>extremes</strong>\u914d\u7f6e\u8bbe\u7f6e\u62101\u6765\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u6700\u5927\u503c\u6700\u5c0f\u503c\u7684\u8ba1\u7b97\u662f\u9488\u5bf9\u4e8e\u6570\u5b57\u7c7b\u578b\uff0c\u65e5\u671f\u7c7b\u578b\u8fdb\u884c\u8ba1\u7b97\u7684\uff0c\u5bf9\u4e8e\u5176\u4ed6\u5217\uff0c\u5c06\u4f1a\u8f93\u51fa\u9ed8\u8ba4\u503c\u3002</p>\n<p>\u989d\u5916\u8ba1\u7b97\u7684\u4e24\u884c\u7ed3\u679c - \u6700\u5927\u503c\u4e0e\u6700\u5c0f\u503c\uff0c\u8fd9\u4e24\u884c\u989d\u5916\u7684\u7ed3\u679c\u4ec5\u5728JSON*, TabSeparated*, and Pretty* \u683c\u5f0f\u4e0e\u5176\u4ed6\u884c\u5206\u5f00\u7684\u8f93\u51fa\u65b9\u5f0f\u8f93\u51fa\uff0c\u4e0d\u652f\u6301\u5176\u4ed6\u8f93\u51fa\u683c\u5f0f\u3002</p>\n<p>\u5728JSON*\u683c\u5f0f\u4e2d\uff0cExtreme\u503c\u5728\u5355\u72ec\u7684'extremes'\u5b57\u6bb5\u4e2d\u3002\u5728TabSeparated*\u683c\u5f0f\u4e2d\uff0c\u5728\u5176\u4ed6\u7ed3\u679c\u4e0e'totals'\u4e4b\u540e\u8f93\u51fa\uff0c\u5e76\u4f7f\u7528\u7a7a\u884c\u4e0e\u5176\u5206\u9694\u3002\u5728Pretty* \u683c\u5f0f\u4e2d\uff0c\u5c06\u5728\u5176\u4ed6\u7ed3\u679c\u4e0e'totals'\u540e\u4ee5\u5355\u72ec\u7684\u8868\u683c\u8f93\u51fa\u3002</p>\n<p>\u5982\u679c\u5728\u8ba1\u7b97Extreme\u503c\u7684\u540c\u65f6\u5305\u542bLIMIT\u3002extremes\u7684\u8ba1\u7b97\u7ed3\u679c\u5c06\u5305\u542boffset\u8df3\u8fc7\u7684\u884c\u3002\u5728\u6d41\u5f0f\u7684\u8bf7\u6c42\u4e2d\uff0c\u5b83\u53ef\u80fd\u8fd8\u5305\u542b\u591a\u4f59LIMIT\u7684\u5c11\u91cf\u884c\u7684\u503c\u3002</p>\n<h4 id=\"zhu-yi-shi-xiang\">\u6ce8\u610f\u4e8b\u9879<a class=\"headerlink\" href=\"#zhu-yi-shi-xiang\" title=\"Permanent link\">&para;</a></h4>\n<p>\u4e0d\u540c\u4e8eMySQL, <code>GROUP BY</code>\u4e0e<code>ORDER BY</code>\u5b50\u53e5\u4e0d\u652f\u6301\u4f7f\u7528\u5217\u7684\u4f4d\u7f6e\u4fe1\u606f\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f46\u8fd9\u5b9e\u9645\u4e0a\u662f\u7b26\u5408SQL\u6807\u51c6\u7684\u3002<br />\n\u4f8b\u5982\uff0c<code>GROUP BY 1, 2</code>\u5c06\u88ab\u89e3\u91ca\u4e3a\u6309\u7167\u5e38\u91cf\u8fdb\u884c\u5206\u7ec4\uff08\u5373\uff0c\u6240\u6709\u7684\u884c\u5c06\u4f1a\u88ab\u805a\u5408\u6210\u4e00\u884c\uff09\u3002</p>\n<p>\u53ef\u4ee5\u5728\u67e5\u8be2\u7684\u4efb\u4f55\u90e8\u5206\u4f7f\u7528AS\u3002</p>\n<p>\u53ef\u4ee5\u5728\u67e5\u8be2\u7684\u4efb\u4f55\u90e8\u5206\u6dfb\u52a0\u661f\u53f7\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u8868\u8fbe\u5f0f\u3002\u5728\u5206\u6790\u67e5\u8be2\u65f6\uff0c\u661f\u53f7\u88ab\u66ff\u6362\u4e3a\u6240\u6709\u7684\u5217\uff08\u4e0d\u5305\u542b<code>MATERIALIZED</code>\u4e0e<code>ALIAS</code>\u7684\u5217\uff09\u3002<br />\n\u53ea\u6709\u5c11\u6570\u60c5\u51b5\u4e0b\u4f7f\u7528\u661f\u53f7\u662f\u5408\u7406\u7684\uff1a</p>\n<ul>\n<li>\u521b\u5efa\u8868\u8f6c\u50a8\u65f6\u3002</li>\n<li>\u5bf9\u4e8e\u4ec5\u5305\u542b\u51e0\u4e2a\u5217\u7684\u8868\uff0c\u5982\u7cfb\u7edf\u8868.</li>\n<li>\u83b7\u53d6\u8868\u4e2d\u7684\u5217\u4fe1\u606f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5e94\u8be5\u4f7f\u7528<code>LIMIT 1</code>\u3002\u4f46\u662f\uff0c\u66f4\u597d\u7684\u529e\u6cd5\u662f\u4f7f\u7528<code>DESC TABLE</code>\u3002</li>\n<li>\u5f53\u4f7f\u7528<code>PREWHERE</code>\u5728\u5c11\u6570\u7684\u51e0\u4e2a\u5217\u4e0a\u505a\u5f3a\u8fc7\u6ee4\u65f6\u3002</li>\n<li>\u5728\u5b50\u67e5\u8be2\u4e2d\uff08\u56e0\u4e3a\u5916\u90e8\u67e5\u8be2\u4e0d\u9700\u8981\u7684\u5217\u88ab\u6392\u9664\u5728\u5b50\u67e5\u8be2\u4e4b\u5916\uff09\u3002</li>\n</ul>\n<p>\u5728\u6240\u6709\u7684\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e0d\u5efa\u8bae\u4f7f\u7528\u661f\u53f7\uff0c\u56e0\u4e3a\u5b83\u662f\u5217\u5f0f\u6570\u636e\u5e93\u7684\u7f3a\u70b9\u800c\u4e0d\u662f\u4f18\u70b9\u3002</p>\n<p><a name=\"../../../../query_language/insert_into/\"></a><a name=\"../query_language/insert_into/\"></a><a name=\"../../query_language/insert_into/\"></a><a name=\"../../../query_language/insert_into/\"></a><a name=\"query_language/insert_into/\"></a><a name=\"../../../../../query_language/insert_into/\"></a><a name=\"insert_into/\"></a></p>\n<h3 id=\"insert\">INSERT<a class=\"headerlink\" href=\"#insert\" title=\"Permanent link\">&para;</a></h3>\n<p>INSERT\u67e5\u8be2\u4e3b\u8981\u7528\u4e8e\u5411\u7cfb\u7edf\u4e2d\u6dfb\u52a0\u6570\u636e.</p>\n<p>\u67e5\u8be2\u7684\u57fa\u672c\u683c\u5f0f:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[(</span><span class=\"n\">c1</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"n\">c3</span><span class=\"p\">)]</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">v11</span><span class=\"p\">,</span> <span class=\"n\">v12</span><span class=\"p\">,</span> <span class=\"n\">v13</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">v21</span><span class=\"p\">,</span> <span class=\"n\">v22</span><span class=\"p\">,</span> <span class=\"n\">v23</span><span class=\"p\">),</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u60a8\u53ef\u4ee5\u5728\u67e5\u8be2\u4e2d\u6307\u5b9a\u63d2\u5165\u7684\u5217\u7684\u5217\u8868\uff0c\u5982\uff1a<code>[(c1, c2, c3)]</code>\u3002\u5bf9\u4e8e\u5b58\u5728\u4e8e\u8868\u7ed3\u6784\u4e2d\u4f46\u4e0d\u5b58\u5728\u4e8e\u63d2\u5165\u5217\u8868\u4e2d\u7684\u5217\uff0c\u5b83\u4eec\u5c06\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u586b\u5145\u6570\u636e\uff1a</p>\n<ul>\n<li>\u5982\u679c\u5b58\u5728<code>DEFAULT</code>\u8868\u8fbe\u5f0f\uff0c\u6839\u636e<code>DEFAULT</code>\u8868\u8fbe\u5f0f\u8ba1\u7b97\u88ab\u586b\u5145\u7684\u503c\u3002</li>\n<li>\u5982\u679c\u6ca1\u6709\u5b9a\u4e49<code>DEFAULT</code>\u8868\u8fbe\u5f0f\uff0c\u5219\u586b\u5145\u96f6\u6216\u7a7a\u5b57\u7b26\u4e32\u3002</li>\n</ul>\n<p>\u5982\u679c <a href=\"#../operations/settings/settings/\">strict_insert_defaults=1</a>\uff0c\u4f60\u5fc5\u987b\u5728\u67e5\u8be2\u4e2d\u5217\u51fa\u6240\u6709\u6ca1\u6709\u5b9a\u4e49<code>DEFAULT</code>\u8868\u8fbe\u5f0f\u7684\u5217\u3002</p>\n<p>\u6570\u636e\u53ef\u4ee5\u4ee5ClickHouse\u652f\u6301\u7684\u4efb\u4f55 <a href=\"#formats\">\u8f93\u5165\u8f93\u51fa\u683c\u5f0f</a> \u4f20\u9012\u7ed9INSERT\u3002\u683c\u5f0f\u7684\u540d\u79f0\u5fc5\u987b\u663e\u793a\u7684\u6307\u5b9a\u5728\u67e5\u8be2\u4e2d\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[(</span><span class=\"n\">c1</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"n\">c3</span><span class=\"p\">)]</span> <span class=\"n\">FORMAT</span> <span class=\"n\">format_name</span> <span class=\"n\">data_set</span>\n</code></pre></div>\n\n\n<p>\u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u67e5\u8be2\u6240\u4f7f\u7528\u7684\u8f93\u5165\u683c\u5f0f\u5c31\u4e0e\u4e0a\u9762INSERT ... VALUES\u7684\u4e2d\u4f7f\u7528\u7684\u8f93\u5165\u683c\u5f0f\u76f8\u540c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[(</span><span class=\"n\">c1</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"n\">c3</span><span class=\"p\">)]</span> <span class=\"n\">FORMAT</span> <span class=\"k\">Values</span> <span class=\"p\">(</span><span class=\"n\">v11</span><span class=\"p\">,</span> <span class=\"n\">v12</span><span class=\"p\">,</span> <span class=\"n\">v13</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">v21</span><span class=\"p\">,</span> <span class=\"n\">v22</span><span class=\"p\">,</span> <span class=\"n\">v23</span><span class=\"p\">),</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>ClickHouse\u4f1a\u6e05\u9664\u6570\u636e\u524d\u6240\u6709\u7684\u7a7a\u767d\u5b57\u7b26\u4e0e\u4e00\u884c\u6458\u8981\u4fe1\u606f\uff08\u5982\u679c\u9700\u8981\u7684\u8bdd\uff09\u3002\u6240\u4ee5\u5728\u8fdb\u884c\u67e5\u8be2\u65f6\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u5c06\u6570\u636e\u653e\u5165\u5230\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\u540d\u79f0\u540e\u7684\u65b0\u7684\u4e00\u884c\u4e2d\u53bb\uff08\u5982\u679c\u6570\u636e\u662f\u4ee5\u7a7a\u767d\u5b57\u7b26\u5f00\u59cb\u7684\uff0c\u8fd9\u5c06\u975e\u5e38\u91cd\u8981\uff09\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t</span> <span class=\"n\">FORMAT</span> <span class=\"n\">TabSeparated</span>\n<span class=\"mi\">11</span>  <span class=\"n\">Hello</span><span class=\"p\">,</span> <span class=\"n\">world</span><span class=\"o\">!</span>\n<span class=\"mi\">22</span>  <span class=\"n\">Qwerty</span>\n</code></pre></div>\n\n\n<p>\u5728\u4f7f\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u6216HTTP\u5ba2\u6237\u7aef\u65f6\uff0c\u4f60\u53ef\u4ee5\u5c06\u5177\u4f53\u7684\u67e5\u8be2\u8bed\u53e5\u4e0e\u6570\u636e\u5206\u5f00\u53d1\u9001\u3002\u66f4\u591a\u5177\u4f53\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\u201c<a href=\"#interfaces\">\u5ba2\u6237\u7aef</a>\u201d\u90e8\u5206\u3002</p>\n<h4 id=\"insert_query_insert-select\">\u4f7f\u7528<code>SELECT</code>\u7684\u7ed3\u679c\u5199\u5165<a class=\"headerlink\" href=\"#insert_query_insert-select\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[(</span><span class=\"n\">c1</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"n\">c3</span><span class=\"p\">)]</span> <span class=\"k\">SELECT</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u5199\u5165\u4e0eSELECT\u7684\u5217\u7684\u5bf9\u5e94\u5173\u7cfb\u662f\u4f7f\u7528\u4f4d\u7f6e\u6765\u8fdb\u884c\u5bf9\u5e94\u7684\uff0c\u5c3d\u7ba1\u5b83\u4eec\u5728SELECT\u8868\u8fbe\u5f0f\u4e0eINSERT\u4e2d\u7684\u540d\u79f0\u53ef\u80fd\u662f\u4e0d\u540c\u7684\u3002\u5982\u679c\u9700\u8981\uff0c\u4f1a\u5bf9");
            
            document.write("\u5b83\u4eec\u6267\u884c\u5bf9\u5e94\u7684\u7c7b\u578b\u8f6c\u6362\u3002</p>\n<p>\u9664\u4e86VALUES\u683c\u5f0f\u4e4b\u5916\uff0c\u5176\u4ed6\u683c\u5f0f\u4e2d\u7684\u6570\u636e\u90fd\u4e0d\u5141\u8bb8\u51fa\u73b0\u8bf8\u5982<code>now()</code>\uff0c<code>1 + 2</code>\u7b49\u8868\u8fbe\u5f0f\u3002VALUES\u683c\u5f0f\u5141\u8bb8\u60a8\u6709\u9650\u5ea6\u7684\u4f7f\u7528\u8fd9\u4e9b\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u4e0d\u5efa\u8bae\u60a8\u8fd9\u4e48\u505a\uff0c\u56e0\u4e3a\u6267\u884c\u8fd9\u4e9b\u8868\u8fbe\u5f0f\u603b\u662f\u4f4e\u6548\u7684\u3002</p>\n<p>\u7cfb\u7edf\u4e0d\u652f\u6301\u7684\u5176\u4ed6\u7528\u4e8e\u4fee\u6539\u6570\u636e\u7684\u67e5\u8be2\uff1a<code>UPDATE</code>, <code>DELETE</code>, <code>REPLACE</code>, <code>MERGE</code>, <code>UPSERT</code>, <code>INSERT UPDATE</code>\u3002<br />\n\u4f46\u662f\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>ALTER TABLE ... DROP PARTITION</code>\u67e5\u8be2\u6765\u5220\u9664\u4e00\u4e9b\u65e7\u7684\u6570\u636e\u3002</p>\n<h4 id=\"xing-neng-de-zhu-yi-shi-xiang\">\u6027\u80fd\u7684\u6ce8\u610f\u4e8b\u9879<a class=\"headerlink\" href=\"#xing-neng-de-zhu-yi-shi-xiang\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5728\u8fdb\u884c<code>INSERT</code>\u65f6\u5c06\u4f1a\u5bf9\u5199\u5165\u7684\u6570\u636e\u8fdb\u884c\u4e00\u4e9b\u5904\u7406\uff0c\u6309\u7167\u4e3b\u952e\u6392\u5e8f\uff0c\u6309\u7167\u6708\u4efd\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u533a\u7b49\u3002\u6240\u4ee5\u5982\u679c\u5728\u60a8\u7684\u5199\u5165\u6570\u636e\u4e2d\u5305\u542b\u591a\u4e2a\u6708\u4efd\u7684\u6df7\u5408\u6570\u636e\u65f6\uff0c\u5c06\u4f1a\u663e\u8457\u7684\u964d\u4f4e<code>INSERT</code>\u7684\u6027\u80fd\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff1a</p>\n<ul>\n<li>\u6570\u636e\u603b\u662f\u4ee5\u5c3d\u91cf\u5927\u7684batch\u8fdb\u884c\u5199\u5165\uff0c\u5982\u6bcf\u6b21\u5199\u5165100,000\u884c\u3002</li>\n<li>\u6570\u636e\u5728\u5199\u5165ClickHouse\u524d\u9884\u5148\u7684\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u7ec4\u3002</li>\n</ul>\n<p>\u5728\u4ee5\u4e0b\u7684\u60c5\u51b5\u4e0b\uff0c\u6027\u80fd\u4e0d\u4f1a\u4e0b\u964d\uff1a</p>\n<ul>\n<li>\u6570\u636e\u603b\u662f\u88ab\u5b9e\u65f6\u7684\u5199\u5165\u3002</li>\n<li>\u5199\u5165\u7684\u6570\u636e\u5df2\u7ecf\u6309\u7167\u65f6\u95f4\u6392\u5e8f\u3002</li>\n</ul>\n<p><a name=\"../query_language/create/\"></a><a name=\"../../../../../query_language/create/\"></a><a name=\"../../query_language/create/\"></a><a name=\"../../../query_language/create/\"></a><a name=\"../../../../query_language/create/\"></a><a name=\"query_language/create/\"></a><a name=\"create/\"></a></p>\n<h3 id=\"create-database_1\">CREATE DATABASE<a class=\"headerlink\" href=\"#create-database_1\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8be5\u67e5\u8be2\u7528\u4e8e\u6839\u636e\u6307\u5b9a\u540d\u79f0\u521b\u5efa\u6570\u636e\u5e93\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">DATABASE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">db_name</span>\n</code></pre></div>\n\n\n<p>\u6570\u636e\u5e93\u5176\u5b9e\u53ea\u662f\u7528\u4e8e\u5b58\u653e\u8868\u7684\u4e00\u4e2a\u76ee\u5f55\u3002<br />\n\u5982\u679c\u67e5\u8be2\u4e2d\u5b58\u5728<code>IF NOT EXISTS</code>\uff0c\u5219\u5f53\u6570\u636e\u5e93\u5df2\u7ecf\u5b58\u5728\u65f6\uff0c\u8be5\u67e5\u8be2\u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u9519\u8bef\u3002</p>\n<h3 id=\"create-table-query\">CREATE TABLE<a class=\"headerlink\" href=\"#create-table-query\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9\u4e8e<code>CREATE TABLE</code>\uff0c\u5b58\u5728\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span>\n</code></pre></div>\n\n\n<p>\u5728\u6307\u5b9a\u7684\u2018db\u2019\u6570\u636e\u5e93\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a\u2018name\u2019\u7684\u8868\uff0c\u5982\u679c\u67e5\u8be2\u4e2d\u6ca1\u6709\u5305\u542b\u2018db\u2019\uff0c\u5219\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d\u9009\u62e9\u7684\u6570\u636e\u5e93\u4f5c\u4e3a\u2018db\u2019\u3002\u540e\u9762\u7684\u662f\u5305\u542b\u5728\u62ec\u53f7\u4e2d\u7684\u8868\u7ed3\u6784\u4ee5\u53ca\u8868\u5f15\u64ce\u7684\u58f0\u660e\u3002<br />\n\u5176\u4e2d\u8868\u7ed3\u6784\u58f0\u660e\u662f\u4e00\u4e2a\u5305\u542b\u4e00\u7ec4\u5217\u63cf\u8ff0\u58f0\u660e\u7684\u7ec4\u5408\u3002\u5982\u679c\u8868\u5f15\u64ce\u662f\u652f\u6301\u7d22\u5f15\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728\u8868\u5f15\u64ce\u7684\u53c2\u6570\u4e2d\u5bf9\u5176\u8fdb\u884c\u8bf4\u660e\u3002</p>\n<p>\u5728\u6700\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\uff0c\u5217\u63cf\u8ff0\u662f\u6307<code>\u540d\u79f0 \u7c7b\u578b</code>\u8fd9\u6837\u7684\u5b50\u53e5\u3002\u4f8b\u5982\uff1a <code>RegionID UInt32</code>\u3002<br />\n\u4f46\u662f\u4e5f\u53ef\u4ee5\u4e3a\u5217\u53e6\u5916\u5b9a\u4e49\u9ed8\u8ba4\u503c\u8868\u8fbe\u5f0f\uff08\u89c1\u540e\u6587\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"k\">AS</span> <span class=\"p\">[</span><span class=\"n\">db2</span><span class=\"p\">.]</span><span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>\u521b\u5efa\u4e00\u4e2a\u4e0e<code>db2.name2</code>\u5177\u6709\u76f8\u540c\u7ed3\u6784\u7684\u8868\uff0c\u540c\u65f6\u4f60\u53ef\u4ee5\u5bf9\u5176\u6307\u5b9a\u4e0d\u540c\u7684\u8868\u5f15\u64ce\u58f0\u660e\u3002\u5982\u679c\u6ca1\u6709\u8868\u5f15\u64ce\u58f0\u660e\uff0c\u5219\u521b\u5efa\u7684\u8868\u5c06\u4e0e<code>db2.name2</code>\u4f7f\u7528\u76f8\u540c\u7684\u8868\u5f15\u64ce\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span> <span class=\"k\">AS</span> <span class=\"k\">SELECT</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u4f7f\u7528\u6307\u5b9a\u7684\u5f15\u64ce\u521b\u5efa\u4e00\u4e2a\u4e0e<code>SELECT</code>\u5b50\u53e5\u7684\u7ed3\u679c\u5177\u6709\u76f8\u540c\u7ed3\u6784\u7684\u8868\uff0c\u5e76\u4f7f\u7528<code>SELECT</code>\u5b50\u53e5\u7684\u7ed3\u679c\u586b\u5145\u5b83\u3002</p>\n<p>\u4ee5\u4e0a\u6240\u6709\u60c5\u51b5\uff0c\u5982\u679c\u6307\u5b9a\u4e86<code>IF NOT EXISTS</code>\uff0c\u90a3\u4e48\u5728\u8be5\u8868\u5df2\u7ecf\u5b58\u5728\u7684\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u9519\u8bef\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u51e0\u4e4e\u4e0d\u4f1a\u505a\u4efb\u4f55\u4e8b\u60c5\u3002</p>\n<p>\u5728<code>ENGINE</code>\u5b50\u53e5\u540e\u8fd8\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u5176\u4ed6\u7684\u5b50\u53e5\uff0c\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u53ef\u4ee5\u53c2\u8003 <a href=\"#../operations/table_engines/\">\u8868\u5f15\u64ce</a> \u4e2d\u5173\u4e8e\u5efa\u8868\u7684\u63cf\u8ff0\u3002</p>\n<h4 id=\"create-default-values\">\u9ed8\u8ba4\u503c<a class=\"headerlink\" href=\"#create-default-values\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5728\u5217\u63cf\u8ff0\u4e2d\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\u4e3a\u5217\u6307\u5b9a\u9ed8\u8ba4\u8868\u8fbe\u5f0f\uff1a<code>DEFAULT expr</code>\uff0c<code>MATERIALIZED expr</code>\uff0c<code>ALIAS expr</code>\u3002<br />\n\u793a\u4f8b\uff1a<code>URLDomain String DEFAULT domain(URL)</code>\u3002</p>\n<p>\u5982\u679c\u5728\u5217\u63cf\u8ff0\u4e2d\u672a\u5b9a\u4e49\u4efb\u4f55\u9ed8\u8ba4\u8868\u8fbe\u5f0f\uff0c\u90a3\u4e48\u7cfb\u7edf\u5c06\u4f1a\u6839\u636e\u7c7b\u578b\u8bbe\u7f6e\u5bf9\u5e94\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\uff1a\u6570\u503c\u7c7b\u578b\u4e3a\u96f6\u3001\u5b57\u7b26\u4e32\u7c7b\u578b\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3001\u6570\u7ec4\u7c7b\u578b\u4e3a\u7a7a\u6570\u7ec4\u3001\u65e5\u671f\u7c7b\u578b\u4e3a\u20180000-00-00\u2019\u4ee5\u53ca\u65f6\u95f4\u7c7b\u578b\u4e3a\u20180000-00-00 00:00:00\u2019\u3002\u4e0d\u652f\u6301\u4f7f\u7528NULL\u4f5c\u4e3a\u666e\u901a\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\u3002</p>\n<p>\u5982\u679c\u5b9a\u4e49\u4e86\u9ed8\u8ba4\u8868\u8fbe\u5f0f\uff0c\u5219\u53ef\u4ee5\u4e0d\u5b9a\u4e49\u5217\u7684\u7c7b\u578b\u3002\u5982\u679c\u6ca1\u6709\u660e\u786e\u7684\u5b9a\u4e49\u7c7b\u7684\u7c7b\u578b\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u8868\u8fbe\u5f0f\u7684\u7c7b\u578b\u3002\u4f8b\u5982\uff1a<code>EventDate DEFAULT toDate(EventTime)</code> - \u6700\u7ec8\u2018EventDate\u2019\u5c06\u4f7f\u7528\u2018Date\u2019\u4f5c\u4e3a\u7c7b\u578b\u3002</p>\n<p>\u5982\u679c\u540c\u65f6\u6307\u5b9a\u4e86\u9ed8\u8ba4\u8868\u8fbe\u5f0f\u4e0e\u5217\u7684\u7c7b\u578b\uff0c\u5219\u5c06\u4f7f\u7528\u7c7b\u578b\u8f6c\u6362\u51fd\u6570\u5c06\u9ed8\u8ba4\u8868\u8fbe\u5f0f\u8f6c\u6362\u4e3a\u6307\u5b9a\u7684\u7c7b\u578b\u3002\u4f8b\u5982\uff1a<code>Hits UInt32 DEFAULT 0</code>\u4e0e<code>Hits UInt32 DEFAULT toUInt32(0)</code>\u610f\u601d\u76f8\u540c\u3002</p>\n<p>\u9ed8\u8ba4\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5305\u542b\u5e38\u91cf\u6216\u8868\u7684\u4efb\u610f\u5176\u4ed6\u5217\u3002\u5f53\u521b\u5efa\u6216\u66f4\u6539\u8868\u7ed3\u6784\u65f6\uff0c\u7cfb\u7edf\u5c06\u4f1a\u8fd0\u884c\u68c0\u67e5\uff0c\u786e\u4fdd\u4e0d\u4f1a\u5305\u542b\u5faa\u73af\u4f9d\u8d56\u3002\u5bf9\u4e8eINSERT, \u5b83\u4ec5\u68c0\u67e5\u8868\u8fbe\u5f0f\u662f\u5426\u662f\u53ef\u4ee5\u89e3\u6790\u7684 - \u5b83\u4eec\u53ef\u4ee5\u4ece\u4e2d\u8ba1\u7b97\u51fa\u6240\u6709\u9700\u8981\u7684\u5217\u7684\u9ed8\u8ba4\u503c\u3002</p>\n<p><code>DEFAULT expr</code></p>\n<p>\u666e\u901a\u7684\u9ed8\u8ba4\u503c\uff0c\u5982\u679cINSERT\u4e2d\u4e0d\u5305\u542b\u6307\u5b9a\u7684\u5217\uff0c\u90a3\u4e48\u5c06\u901a\u8fc7\u8868\u8fbe\u5f0f\u8ba1\u7b97\u5b83\u7684\u9ed8\u8ba4\u503c\u5e76\u586b\u5145\u5b83\u3002</p>\n<p><code>MATERIALIZED expr</code></p>\n<p>\u7269\u5316\u8868\u8fbe\u5f0f\uff0c\u88ab\u8be5\u8868\u8fbe\u5f0f\u6307\u5b9a\u7684\u5217\u4e0d\u80fd\u5305\u542b\u5728INSERT\u7684\u5217\u8868\u4e2d\uff0c\u56e0\u4e3a\u5b83\u603b\u662f\u88ab\u8ba1\u7b97\u51fa\u6765\u7684\u3002<br />\n\u5bf9\u4e8eINSERT\u800c\u8a00\uff0c\u4e0d\u9700\u8981\u8003\u8651\u8fd9\u4e9b\u5217\u3002<br />\n\u53e6\u5916\uff0c\u5728SELECT\u67e5\u8be2\u4e2d\u5982\u679c\u5305\u542b\u661f\u53f7\uff0c\u6b64\u5217\u4e0d\u4f1a\u88ab\u7528\u6765\u66ff\u6362\u661f\u53f7\uff0c\u8fd9\u662f\u56e0\u4e3a\u8003\u8651\u5230\u6570\u636e\u8f6c\u50a8\uff0c\u5728\u4f7f\u7528<code>SELECT *</code>\u67e5\u8be2\u51fa\u7684\u7ed3\u679c\u603b\u80fd\u591f\u88ab'INSERT'\u56de\u8868\u3002</p>\n<p><code>ALIAS expr</code></p>\n<p>\u522b\u540d\u3002\u8fd9\u6837\u7684\u5217\u4e0d\u4f1a\u5b58\u50a8\u5728\u8868\u4e2d\u3002<br />\n\u5b83\u7684\u503c\u4e0d\u80fd\u591f\u901a\u8fc7INSERT\u5199\u5165\uff0c\u540c\u65f6\u4f7f\u7528SELECT\u67e5\u8be2\u661f\u53f7\u65f6\uff0c\u8fd9\u4e9b\u5217\u4e5f\u4e0d\u4f1a\u88ab\u7528\u6765\u66ff\u6362\u661f\u53f7\u3002<br />\n\u4f46\u662f\u5b83\u4eec\u53ef\u4ee5\u663e\u793a\u7684\u7528\u4e8eSELECT\u4e2d\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5728\u67e5\u8be2\u5206\u6790\u4e2d\u522b\u540d\u5c06\u88ab\u66ff\u6362\u3002</p>\n<p>\u5f53\u4f7f\u7528ALTER\u67e5\u8be2\u5bf9\u6dfb\u52a0\u65b0\u7684\u5217\u65f6\uff0c\u4e0d\u540c\u4e8e\u4e3a\u6240\u6709\u65e7\u6570\u636e\u6dfb\u52a0\u8fd9\u4e2a\u5217\uff0c\u5bf9\u4e8e\u9700\u8981\u5728\u65e7\u6570\u636e\u4e2d\u67e5\u8be2\u65b0\u5217\uff0c\u53ea\u4f1a\u5728\u67e5\u8be2\u65f6\u52a8\u6001\u8ba1\u7b97\u8fd9\u4e2a\u65b0\u5217\u7684\u503c\u3002\u4f46\u662f\u5982\u679c\u65b0\u5217\u7684\u9ed8\u8ba4\u8868\u793a\u4e2d\u4f9d\u8d56\u5176\u4ed6\u5217\u7684\u503c\u8fdb\u884c\u8ba1\u7b97\uff0c\u90a3\u4e48\u540c\u6837\u4f1a\u52a0\u8f7d\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5217\u7684\u6570\u636e\u3002</p>\n<p>\u5982\u679c\u4f60\u5411\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u5217\uff0c\u5e76\u5728\u4e4b\u540e\u7684\u4e00\u6bb5\u65f6\u95f4\u540e\u4fee\u6539\u5b83\u7684\u9ed8\u8ba4\u8868\u8fbe\u5f0f\uff0c\u5219\u65e7\u6570\u636e\u4e2d\u7684\u503c\u5c06\u4f1a\u88ab\u6539\u53d8\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u8fd0\u884c\u540e\u53f0\u5408\u5e76\u65f6\uff0c\u7f3a\u5c11\u7684\u5217\u7684\u503c\u5c06\u88ab\u8ba1\u7b97\u540e\u5199\u5165\u5230\u5408\u5e76\u540e\u7684\u6570\u636e\u90e8\u5206\u4e2d\u3002</p>\n<p>\u4e0d\u80fd\u591f\u4e3anested\u7c7b\u578b\u7684\u5217\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002</p>\n<h4 id=\"constraints\">Constraints<a class=\"headerlink\" href=\"#constraints\" title=\"Permanent link\">&para;</a></h4>\n<p>WARNING: This feature is experimental. Correct work is not guaranteed on non-MergeTree family engines.</p>\n<p>Along with columns descriptions constraints could be defined:</p>\n<p>``sql<br />\nCREATE TABLE [IF NOT EXISTS] [db.]table_name [ON CLUSTER cluster]<br />\n(<br />\n    name1 [type1] [DEFAULT|MATERIALIZED|ALIAS expr1] [compression_codec] [TTL expr1],<br />\n    ...<br />\n    CONSTRAINT constraint_name_1 CHECK boolean_expr_1,<br />\n    ...<br />\n) ENGINE = engine</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">`</span><span class=\"n\">boolean_expr_1</span><span class=\"err\">`</span> <span class=\"n\">could</span> <span class=\"n\">by</span> <span class=\"n\">any</span> <span class=\"n\">boolean</span> <span class=\"n\">expression</span><span class=\"p\">.</span> <span class=\"n\">If</span> <span class=\"n\">constraints</span> <span class=\"n\">are</span> <span class=\"n\">defined</span> <span class=\"k\">for</span> <span class=\"n\">the</span> <span class=\"n\">table</span><span class=\"p\">,</span> <span class=\"n\">each</span> <span class=\"n\">of</span> <span class=\"n\">them</span> <span class=\"n\">will</span> <span class=\"n\">be</span> <span class=\"n\">checked</span> <span class=\"k\">for</span> <span class=\"n\">every</span> <span class=\"n\">row</span> <span class=\"k\">in</span> <span class=\"err\">`</span><span class=\"n\">INSERT</span><span class=\"err\">`</span> <span class=\"n\">query</span><span class=\"p\">.</span> <span class=\"n\">If</span> <span class=\"n\">any</span> <span class=\"n\">constraint</span> <span class=\"n\">is</span> <span class=\"n\">not</span> <span class=\"n\">satisfied</span> <span class=\"err\">\u2014</span> <span class=\"n\">server</span> <span class=\"n\">will</span> <span class=\"n\">raise</span> <span class=\"n\">an</span> <span class=\"n\">exception</span> <span class=\"n\">with</span> <span class=\"n\">constraint</span> <span class=\"n\">name</span> <span class=\"n\">and</span> <span class=\"n\">checking</span> <span class=\"n\">expression</span><span class=\"p\">.</span>\n\n<span class=\"n\">Adding</span> <span class=\"n\">large</span> <span class=\"n\">amount</span> <span class=\"n\">of</span> <span class=\"n\">constraints</span> <span class=\"n\">can</span> <span class=\"n\">negatively</span> <span class=\"n\">affect</span> <span class=\"n\">performance</span> <span class=\"n\">of</span> <span class=\"n\">big</span> <span class=\"err\">`</span><span class=\"n\">INSERT</span><span class=\"err\">`</span> <span class=\"n\">queries</span><span class=\"p\">.</span>\n\n<span class=\"cp\">#### TTL expression</span>\n\n<span class=\"n\">Defines</span> <span class=\"n\">storage</span> <span class=\"n\">time</span> <span class=\"k\">for</span> <span class=\"n\">values</span><span class=\"p\">.</span> <span class=\"n\">Can</span> <span class=\"n\">be</span> <span class=\"n\">specified</span> <span class=\"n\">only</span> <span class=\"k\">for</span> <span class=\"n\">MergeTree</span><span class=\"o\">-</span><span class=\"n\">family</span> <span class=\"n\">tables</span><span class=\"p\">.</span> <span class=\"n\">For</span> <span class=\"n\">the</span> <span class=\"n\">detailed</span> <span class=\"n\">description</span><span class=\"p\">,</span> <span class=\"n\">see</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"k\">for</span> <span class=\"n\">columns</span> <span class=\"n\">and</span> <span class=\"n\">tables</span><span class=\"p\">](..</span><span class=\"o\">/</span><span class=\"n\">operations</span><span class=\"o\">/</span><span class=\"n\">table_engines</span><span class=\"o\">/</span><span class=\"n\">mergetree</span><span class=\"p\">.</span><span class=\"n\">md</span><span class=\"err\">#</span><span class=\"n\">table_engine</span><span class=\"o\">-</span><span class=\"n\">mergetree</s");
            
            document.write("pan><span class=\"o\">-</span><span class=\"n\">ttl</span><span class=\"p\">).</span>\n\n<span class=\"cp\">### Column Compression Codecs</span>\n\n<span class=\"n\">By</span> <span class=\"k\">default</span><span class=\"p\">,</span> <span class=\"n\">ClickHouse</span> <span class=\"n\">applies</span> <span class=\"n\">to</span> <span class=\"n\">columns</span> <span class=\"n\">the</span> <span class=\"n\">compression</span> <span class=\"n\">method</span><span class=\"p\">,</span> <span class=\"n\">defined</span> <span class=\"k\">in</span> <span class=\"p\">[</span><span class=\"n\">server</span> <span class=\"n\">settings</span><span class=\"p\">](..</span><span class=\"o\">/</span><span class=\"n\">operations</span><span class=\"o\">/</span><span class=\"n\">server_settings</span><span class=\"o\">/</span><span class=\"n\">settings</span><span class=\"p\">.</span><span class=\"n\">md</span><span class=\"err\">#</span><span class=\"n\">compression</span><span class=\"p\">).</span> <span class=\"n\">Also</span><span class=\"p\">,</span> <span class=\"n\">you</span> <span class=\"n\">can</span> <span class=\"n\">define</span> <span class=\"n\">compression</span> <span class=\"n\">method</span> <span class=\"k\">for</span> <span class=\"n\">each</span> <span class=\"n\">individual</span> <span class=\"n\">column</span> <span class=\"k\">in</span> <span class=\"n\">the</span> <span class=\"err\">`</span><span class=\"n\">CREATE</span> <span class=\"n\">TABLE</span><span class=\"err\">`</span> <span class=\"n\">query</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<p>CREATE TABLE codec_example<br />\n(<br />\n    dt Date CODEC(ZSTD),<br />\n    ts DateTime CODEC(LZ4HC),<br />\n    float_value Float32 CODEC(NONE),<br />\n    double_value Float64 CODEC(LZ4HC(9))<br />\n    value Float32 CODEC(Delta, ZSTD)<br />\n)<br />\nENGINE = <Engine><br />\n...</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">If</span> <span class=\"n\">a</span> <span class=\"n\">codec</span> <span class=\"k\">is</span> <span class=\"n\">specified</span><span class=\"p\">,</span> <span class=\"n\">the</span> <span class=\"k\">default</span> <span class=\"n\">codec</span> <span class=\"n\">doesn</span><span class=\"s1\">&#39;t apply. Codecs can be combined in a pipeline, for example, `CODEC(Delta, ZSTD)`. To select the best codecs combination for you project, pass benchmarks, similar to described in the Altinity [New Encodings to Improve ClickHouse Efficiency](https://www.altinity.com/blog/2019/7/new-encodings-to-improve-clickhouse) article.</span>\n\n<span class=\"s1\">!!!warning</span>\n<span class=\"s1\">    You cannot decompress ClickHouse database files with external utilities, for example, `lz4`. Use the special utility, [clickhouse-compressor](https://github.com/ClickHouse/ClickHouse/tree/master/dbms/programs/compressor).</span>\n\n<span class=\"s1\">Compression is supported for the table engines:</span>\n\n<span class=\"s1\">- [*MergeTree](../operations/table_engines/mergetree.md) family</span>\n<span class=\"s1\">- [*Log](../operations/table_engines/log_family.md) family</span>\n<span class=\"s1\">- [Set](../operations/table_engines/set.md)</span>\n<span class=\"s1\">- [Join](../operations/table_engines/join.md)</span>\n\n<span class=\"s1\">ClickHouse supports common purpose codecs and specialized codecs.</span>\n\n<span class=\"s1\">#### Specialized codecs {#create-query-specialized-codecs}</span>\n\n<span class=\"s1\">These codecs are designed to make compression more effective using specifities of the data. Some of this codecs don&#39;</span><span class=\"n\">t</span> <span class=\"n\">compress</span> <span class=\"n\">data</span> <span class=\"k\">by</span> <span class=\"n\">itself</span><span class=\"p\">,</span> <span class=\"n\">but</span> <span class=\"n\">they</span> <span class=\"n\">prepare</span> <span class=\"n\">data</span> <span class=\"k\">to</span> <span class=\"n\">be</span> <span class=\"n\">compressed</span> <span class=\"n\">better</span> <span class=\"k\">by</span> <span class=\"n\">common</span> <span class=\"n\">purpose</span> <span class=\"n\">codecs</span><span class=\"p\">.</span>\n\n<span class=\"n\">Specialized</span> <span class=\"n\">codecs</span><span class=\"p\">:</span>\n\n<span class=\"o\">-</span> <span class=\"ss\">`Delta(delta_bytes)`</span> <span class=\"err\">\u2014</span> <span class=\"n\">Compression</span> <span class=\"n\">approach</span> <span class=\"k\">in</span> <span class=\"n\">which</span> <span class=\"n\">raw</span> <span class=\"k\">values</span> <span class=\"n\">are</span> <span class=\"n\">replaced</span> <span class=\"k\">by</span> <span class=\"n\">the</span> <span class=\"n\">difference</span> <span class=\"n\">of</span> <span class=\"n\">two</span> <span class=\"n\">neighboring</span> <span class=\"k\">values</span><span class=\"p\">,</span> <span class=\"n\">except</span> <span class=\"k\">for</span> <span class=\"n\">the</span> <span class=\"n\">first</span> <span class=\"n\">value</span> <span class=\"n\">that</span> <span class=\"n\">stays</span> <span class=\"n\">unchanged</span><span class=\"p\">.</span> <span class=\"n\">Up</span> <span class=\"k\">to</span> <span class=\"ss\">`delta_bytes`</span> <span class=\"n\">are</span> <span class=\"n\">used</span> <span class=\"k\">for</span> <span class=\"n\">storing</span> <span class=\"n\">delta</span> <span class=\"k\">values</span><span class=\"p\">,</span> <span class=\"n\">so</span> <span class=\"ss\">`delta_bytes`</span> <span class=\"k\">is</span> <span class=\"n\">the</span> <span class=\"n\">maximum</span> <span class=\"n\">size</span> <span class=\"n\">of</span> <span class=\"n\">raw</span> <span class=\"k\">values</span><span class=\"p\">.</span> <span class=\"n\">Possible</span> <span class=\"ss\">`delta_bytes`</span> <span class=\"k\">values</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">.</span> <span class=\"n\">The</span> <span class=\"k\">default</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"ss\">`delta_bytes`</span> <span class=\"k\">is</span> <span class=\"ss\">`sizeof(type)`</span> <span class=\"k\">if</span> <span class=\"n\">equal</span> <span class=\"k\">to</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"k\">or</span> <span class=\"mi\">8</span><span class=\"p\">.</span> <span class=\"k\">In</span> <span class=\"k\">all</span> <span class=\"n\">other</span> <span class=\"n\">cases</span><span class=\"p\">,</span> <span class=\"n\">it</span><span class=\"s1\">&#39;s 1.</span>\n<span class=\"s1\">- `DoubleDelta` \u2014 Calculates delta of deltas and writes it in compact binary form. Optimal compression rates are achieved for monotonic sequences with a constant stride, such as time series data. Can be used with any fixed-width type. Implements the algorithm used in Gorilla TSDB, extending it to support 64-bit types. Uses 1 extra bit for 32-byte deltas: 5-bit prefixes instead of 4-bit prefixes. For additional information, see Compressing Time Stamps in [Gorilla: A Fast, Scalable, In-Memory Time Series Database](http://www.vldb.org/pvldb/vol8/p1816-teller.pdf).</span>\n<span class=\"s1\">- `Gorilla` \u2014 Calculates XOR between current and previous value and writes it in compact binary form. Efficient when storing a series of floating point values that change slowly, because the best compression rate is achieved when neighboring values are binary equal. Implements the algorithm used in Gorilla TSDB, extending it to support 64-bit types. For additional information, see Compressing Values in [Gorilla: A Fast, Scalable, In-Memory Time Series Database](http://www.vldb.org/pvldb/vol8/p1816-teller.pdf).</span>\n<span class=\"s1\">- `T64` \u2014 Compression approach that crops unused high bits of values in integer data types (including `Enum`, `Date` and `DateTime`). At each step of its algorithm, codec takes a block of 64 values, puts them into 64x64 bit matrix, transposes it, crops the unused bits of values and returns the rest as a sequence. Unused bits are the bits, that don&#39;</span><span class=\"n\">t</span> <span class=\"n\">differ</span> <span class=\"k\">between</span> <span class=\"n\">maximum</span> <span class=\"k\">and</span> <span class=\"n\">minimum</span> <span class=\"k\">values</span> <span class=\"k\">in</span> <span class=\"n\">the</span> <span class=\"n\">whole</span> <span class=\"n\">data</span> <span class=\"n\">part</span> <span class=\"k\">for</span> <span class=\"n\">which</span> <span class=\"n\">the</span> <span class=\"n\">compression</span> <span class=\"k\">is</span> <span class=\"n\">used</span><span class=\"p\">.</span>\n\n<span class=\"ss\">`DoubleDelta`</span> <span class=\"k\">and</span> <span class=\"ss\">`Gorilla`</span> <span class=\"n\">codecs</span> <span class=\"n\">are</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">Gorilla</span> <span class=\"n\">TSDB</span> <span class=\"k\">as</span> <span class=\"n\">the</span> <span class=\"n\">components</span> <span class=\"n\">of</span> <span class=\"n\">its</span> <span class=\"n\">compressing</span> <span class=\"n\">algorithm</span><span class=\"p\">.</span> <span class=\"n\">Gorilla</span> <span class=\"n\">approach</span> <span class=\"k\">is</span> <span class=\"n\">effective</span> <span class=\"k\">in</span> <span class=\"n\">scenarios</span> <span class=\"k\">when</span> <span class=\"n\">there</span> <span class=\"k\">is</span> <span class=\"n\">a</span> <span class=\"n\">sequence</span> <span class=\"n\">of</span> <span class=\"n\">slowly</span> <span class=\"n\">changing</span> <span class=\"k\">values</span> <span class=\"k\">with</span> <span class=\"n\">their</span> <span class=\"n\">timestamps</span><span class=\"p\">.</span> <span class=\"n\">Timestamps</span> <span class=\"n\">are</span> <span class=\"n\">effectively</span> <span class=\"n\">compressed</span> <span class=\"k\">by</span> <span class=\"n\">the</span> <span class=\"ss\">`DoubleDelta`</span> <span class=\"n\">codec</span><span class=\"p\">,</span> <span class=\"k\">and</span> <span class=\"k\">values</span> <span class=\"n\">are</span> <span class=\"n\">effectively</span> <span class=\"n\">compressed</span> <span class=\"k\">by</span> <span class=\"n\">the</span> <span class=\"ss\">`Gorilla`</span> <span class=\"n\">codec</span><span class=\"p\">.</span> <span class=\"k\">For</span> <span class=\"n\">example</span><span clas");
            
            document.write("s=\"p\">,</span> <span class=\"k\">to</span> <span class=\"n\">get</span> <span class=\"n\">an</span> <span class=\"n\">effectively</span> <span class=\"n\">stored</span> <span class=\"k\">table</span><span class=\"p\">,</span> <span class=\"n\">you</span> <span class=\"n\">can</span> <span class=\"k\">create</span> <span class=\"n\">it</span> <span class=\"k\">in</span> <span class=\"n\">the</span> <span class=\"n\">following</span> <span class=\"n\">configuration</span><span class=\"p\">:</span>\n\n<span class=\"ss\">``</span><span class=\"o\">`</span><span class=\"k\">sql</span>\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"nf\">codec_example</span>\n<span class=\"p\">(</span>\n    <span class=\"kt\">timestamp</span> <span class=\"kt\">DateTime</span> <span class=\"nf\">CODEC</span><span class=\"p\">(</span><span class=\"n\">DoubleDelta</span><span class=\"p\">),</span>\n    <span class=\"n\">slow_values</span> <span class=\"n\">Float32</span> <span class=\"nf\">CODEC</span><span class=\"p\">(</span><span class=\"n\">Gorilla</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"kp\">ENGINE</span> <span class=\"o\">=</span> <span class=\"nf\">MergeTree</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<h4 id=\"create-query-common-purpose-codecs\">Common purpose codecs<a class=\"headerlink\" href=\"#create-query-common-purpose-codecs\" title=\"Permanent link\">&para;</a></h4>\n<p>Codecs:</p>\n<ul>\n<li><code>NONE</code> \u2014 No compression.</li>\n<li><code>LZ4</code> \u2014 Lossless <a href=\"https://github.com/lz4/lz4\" rel=\"external nofollow noreferrer\">data compression algorithm</a> used by default. Applies LZ4 fast compression.</li>\n<li><code>LZ4HC[(level)]</code> \u2014 LZ4 HC (high compression) algorithm with configurable level. Default level: 9. Setting <code>level &lt;= 0</code> applies the default level. Possible levels: [1, 12]. Recommended level range: [4, 9].</li>\n<li><code>ZSTD[(level)]</code> \u2014 <a href=\"https://en.wikipedia.org/wiki/Zstandard\" rel=\"external nofollow noreferrer\">ZSTD compression algorithm</a> with configurable <code>level</code>. Possible levels: [1, 22]. Default value: 1.</li>\n</ul>\n<p>High compression levels useful for asymmetric scenarios, like compress once, decompress a lot of times. Greater levels stands for better compression and higher CPU usage.</p>\n<h3 id=\"lin-shi-biao\">\u4e34\u65f6\u8868<a class=\"headerlink\" href=\"#lin-shi-biao\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse\u652f\u6301\u4e34\u65f6\u8868\uff0c\u5176\u5177\u6709\u4ee5\u4e0b\u7279\u5f81\uff1a</p>\n<ul>\n<li>\u5f53\u56de\u8bdd\u7ed3\u675f\u65f6\uff0c\u4e34\u65f6\u8868\u5c06\u968f\u4f1a\u8bdd\u4e00\u8d77\u6d88\u5931\uff0c\u8fd9\u5305\u542b\u94fe\u63a5\u4e2d\u65ad\u3002</li>\n<li>\u4e34\u65f6\u8868\u4ec5\u80fd\u591f\u4f7f\u7528Memory\u8868\u5f15\u64ce\u3002</li>\n<li>\u65e0\u6cd5\u4e3a\u4e34\u65f6\u8868\u6307\u5b9a\u6570\u636e\u5e93\u3002\u5b83\u662f\u5728\u6570\u636e\u5e93\u4e4b\u5916\u521b\u5efa\u7684\u3002</li>\n<li>\u5982\u679c\u4e34\u65f6\u8868\u4e0e\u53e6\u4e00\u4e2a\u8868\u540d\u79f0\u76f8\u540c\uff0c\u90a3\u4e48\u5f53\u5728\u67e5\u8be2\u65f6\u6ca1\u6709\u663e\u793a\u7684\u6307\u5b9adb\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u4f18\u5148\u4f7f\u7528\u4e34\u65f6\u8868\u3002</li>\n<li>\u5bf9\u4e8e\u5206\u5e03\u5f0f\u5904\u7406\uff0c\u67e5\u8be2\u4e2d\u4f7f\u7528\u7684\u4e34\u65f6\u8868\u5c06\u88ab\u4f20\u9012\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\u3002</li>\n</ul>\n<p>\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u8bed\u6cd5\u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TEMPORARY</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4e34\u65f6\u8868\u4e0d\u662f\u624b\u52a8\u521b\u5efa\u7684\uff0c\u53ea\u6709\u5728\u5206\u5e03\u5f0f\u67e5\u8be2\u5904\u7406\u4e2d\u4f7f\u7528<code>(GLOBAL) IN</code>\u65f6\u4e3a\u5916\u90e8\u6570\u636e\u521b\u5efa\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u53ef\u4ee5\u53c2\u8003\u76f8\u5173\u7ae0\u8282\u3002</p>\n<h3 id=\"fen-bu-shi-ddlcha-xun-on-cluster-zi-ju\">\u5206\u5e03\u5f0fDDL\u67e5\u8be2 \uff08ON CLUSTER \u5b50\u53e5\uff09<a class=\"headerlink\" href=\"#fen-bu-shi-ddlcha-xun-on-cluster-zi-ju\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9\u4e8e <code>CREATE</code>\uff0c <code>DROP</code>\uff0c <code>ALTER</code>\uff0c\u4ee5\u53ca<code>RENAME</code>\u67e5\u8be2\uff0c\u7cfb\u7edf\u652f\u6301\u5176\u8fd0\u884c\u5728\u6574\u4e2a\u96c6\u7fa4\u4e0a\u3002<br />\n\u4f8b\u5982\uff0c\u4ee5\u4e0b\u67e5\u8be2\u5c06\u5728<code>cluster</code>\u96c6\u7fa4\u7684\u6240\u6709\u8282\u70b9\u4e0a\u521b\u5efa\u540d\u4e3a<code>all_hits</code>\u7684<code>Distributed</code>\u8868\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span> <span class=\"n\">all_hits</span> <span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span> <span class=\"p\">(</span><span class=\"n\">p</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">i</span> <span class=\"n\">Int32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Distributed</span><span class=\"p\">(</span><span class=\"k\">cluster</span><span class=\"p\">,</span> <span class=\"k\">default</span><span class=\"p\">,</span> <span class=\"n\">hits</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u4e3a\u4e86\u80fd\u591f\u6b63\u786e\u7684\u8fd0\u884c\u8fd9\u79cd\u67e5\u8be2\uff0c\u6bcf\u53f0\u4e3b\u673a\u5fc5\u987b\u5177\u6709\u76f8\u540c\u7684cluster\u58f0\u660e\uff08\u4e3a\u4e86\u7b80\u5316\u914d\u7f6e\u7684\u540c\u6b65\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528zookeeper\u7684\u65b9\u5f0f\u8fdb\u884c\u914d\u7f6e\uff09\u3002\u540c\u65f6\u8fd9\u4e9b\u4e3b\u673a\u8fd8\u5fc5\u987b\u94fe\u63a5\u5230zookeeper\u670d\u52a1\u5668\u3002<br />\n\u8fd9\u4e2a\u67e5\u8be2\u5c06\u6700\u7ec8\u5728\u96c6\u7fa4\u7684\u6bcf\u53f0\u4e3b\u673a\u4e0a\u8fd0\u884c\uff0c\u5373\u4f7f\u4e00\u4e9b\u4e3b\u673a\u5f53\u524d\u5904\u4e8e\u4e0d\u53ef\u7528\u72b6\u6001\u3002\u540c\u65f6\u5b83\u8fd8\u4fdd\u8bc1\u4e86\u6240\u6709\u7684\u67e5\u8be2\u5728\u5355\u53f0\u4e3b\u673a\u4e2d\u7684\u6267\u884c\u987a\u5e8f\u3002</p>\n<h3 id=\"create-view\">CREATE VIEW<a class=\"headerlink\" href=\"#create-view\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"p\">[</span><span class=\"n\">MATERIALIZED</span><span class=\"p\">]</span> <span class=\"k\">VIEW</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">TO</span><span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">POPULATE</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"k\">SELECT</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u521b\u5efa\u4e00\u4e2a\u89c6\u56fe\u3002\u5b83\u5b58\u5728\u4e24\u79cd\u53ef\u9009\u62e9\u7684\u7c7b\u578b\uff1a\u666e\u901a\u89c6\u56fe\u4e0e\u7269\u5316\u89c6\u56fe\u3002</p>\n<p>\u666e\u901a\u89c6\u56fe\u4e0d\u5b58\u50a8\u4efb\u4f55\u6570\u636e\uff0c\u53ea\u662f\u6267\u884c\u4ece\u53e6\u4e00\u4e2a\u8868\u4e2d\u7684\u8bfb\u53d6\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u666e\u901a\u89c6\u56fe\u53ea\u662f\u4fdd\u5b58\u4e86\u89c6\u56fe\u7684\u67e5\u8be2\uff0c\u5f53\u4ece\u89c6\u56fe\u4e2d\u67e5\u8be2\u65f6\uff0c\u6b64\u67e5\u8be2\u88ab\u4f5c\u4e3a\u5b50\u67e5\u8be2\u7528\u4e8e\u66ff\u6362FROM\u5b50\u53e5\u3002</p>\n<p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u4f60\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u89c6\u56fe\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">VIEW</span> <span class=\"k\">view</span> <span class=\"k\">AS</span> <span class=\"k\">SELECT</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>\u8fd8\u6709\u4e00\u4e2a\u67e5\u8be2\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"k\">view</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u4e2a\u67e5\u8be2\u5b8c\u5168\u7b49\u4ef7\u4e8e\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p>\u7269\u5316\u89c6\u56fe\u5b58\u50a8\u7684\u6570\u636e\u662f\u7531\u76f8\u5e94\u7684SELECT\u67e5\u8be2\u8f6c\u6362\u5f97\u6765\u7684\u3002</p>\n<p>\u5728\u521b\u5efa\u7269\u5316\u89c6\u56fe\u65f6\uff0c\u4f60\u8fd8\u5fc5\u987b\u6307\u5b9a\u8868\u7684\u5f15\u64ce - \u5c06\u4f1a\u4f7f\u7528\u8fd9\u4e2a\u8868\u5f15\u64ce\u5b58\u50a8\u6570\u636e\u3002</p>\n<p>\u76ee\u524d\u7269\u5316\u89c6\u56fe\u7684\u5de5\u4f5c\u539f\u7406\uff1a\u5f53\u5c06\u6570\u636e\u5199\u5165\u5230\u7269\u5316\u89c6\u56fe\u4e2dSELECT\u5b50\u53e5\u6240\u6307\u5b9a\u7684\u8868\u65f6\uff0c\u63d2\u5165\u7684\u6570\u636e\u4f1a\u901a\u8fc7SELECT\u5b50\u53e5\u67e5\u8be2\u8fdb\u884c\u8f6c\u6362\u5e76\u5c06\u6700\u7ec8\u7ed3\u679c\u63d2\u5165\u5230\u89c6\u56fe\u4e2d\u3002</p>\n<p>\u5982\u679c\u521b\u5efa\u7269\u5316\u89c6\u56fe\u65f6\u6307\u5b9a\u4e86POPULATE\u5b50\u53e5\uff0c\u5219\u5728\u521b\u5efa\u65f6\u5c06\u8be5\u8868\u7684\u6570\u636e\u63d2\u5165\u5230\u7269\u5316\u89c6\u56fe\u4e2d\u3002\u5c31\u50cf\u4f7f\u7528<code>CREATE TABLE ... AS SELECT ...</code>\u4e00\u6837\u3002\u5426\u5219\uff0c\u7269\u5316\u89c6\u56fe\u53ea\u4f1a\u5305\u542b\u5728\u7269\u5316\u89c6\u56fe\u521b\u5efa\u540e\u7684\u65b0\u5199\u5165\u7684\u6570\u636e\u3002\u6211\u4eec\u4e0d\u63a8\u8350\u4f7f\u7528POPULATE\uff0c\u56e0\u4e3a\u5728\u89c6\u56fe\u521b\u5efa\u671f\u95f4\u5199\u5165\u7684\u6570\u636e\u5c06\u4e0d\u4f1a\u5199\u5165\u5176\u4e2d\u3002</p>\n<p>\u5f53\u4e00\u4e2a<code>SELECT</code>\u5b50\u53e5\u5305\u542b<code>DISTINCT</code>, <code>GROUP BY</code>, <code>ORDER BY</code>, <code>LIMIT</code>\u65f6\uff0c\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u4ec5\u4f1a\u5728\u63d2\u5165\u6570\u636e\u65f6\u5728\u6bcf\u4e2a\u5355\u72ec\u7684\u6570\u636e\u5757\u4e0a\u6267\u884c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u5728\u5176\u4e2d\u5305\u542b\u4e86<code>GROUP BY</code>\uff0c\u5219\u53ea\u4f1a\u5728\u67e5\u8be2\u671f\u95f4\u8fdb\u884c\u805a\u5408\uff0c\u4f46\u805a\u5408\u8303\u56f4\u4ec5\u9650\u4e8e\u5355\u4e2a\u6279\u7684\u5199\u5165\u6570\u636e\u3002\u6570\u636e\u4e0d\u4f1a\u8fdb\u4e00\u6b65\u88ab\u805a\u5408\u3002\u4f46\u662f\u5f53\u4f60\u4f7f\u7528\u4e00\u4e9b\u5176\u4ed6\u6570\u636e\u805a\u5408\u5f15\u64ce\u65f6\u8fd9\u662f\u4f8b\u5916\u7684\uff0c\u5982\uff1a<code>SummingMergeTree</code>\u3002</p>\n<p>\u76ee\u524d\u5bf9\u7269\u5316\u89c6\u56fe\u6267\u884c<code>ALTER</code>\u662f\u4e0d\u652f\u6301\u7684\uff0c\u56e0\u6b64\u8fd9\u53ef\u80fd\u662f\u4e0d\u65b9\u4fbf\u7684\u3002\u5982\u679c\u7269\u5316\u89c6\u56fe\u662f\u4f7f\u7528\u7684<code>TO [db.]name</code>\u7684\u65b9\u5f0f\u8fdb\u884c\u6784\u5efa\u7684\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>DETACH</code>\u8bed\u53e5\u73b0\u5c06\u89c6\u56fe\u5265\u79bb\uff0c\u7136\u540e\u4f7f\u7528<code>ALTER</code>\u8fd0\u884c\u5728\u76ee\u6807\u8868\u4e0a\uff0c\u7136\u540e\u4f7f\u7528<code>ATTACH</code>\u5c06\u4e4b\u524d\u5265\u79bb\u7684\u8868\u91cd\u65b0\u52a0\u8f7d\u8fdb\u6765\u3002</p>\n<p>\u89c6\u56fe\u770b\u8d77\u6765\u548c\u666e\u901a\u7684\u8868\u76f8\u540c\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7<code>SHOW TABLES</code>\u67e5\u770b\u5230\u5b83\u4eec\u3002</p>\n<p>\u6ca1\u6709\u5355\u72ec\u7684\u5220\u9664\u89c6\u56fe\u7684\u8bed\u6cd5\u3002\u5982\u679c\u8981\u5220\u9664\u89c6\u56fe\uff0c\u8bf7\u4f7f\u7528<code>DROP TABLE</code>\u3002</p>\n<p><a name=\"../../../query_language/alter/\"></a><a name=\"../query_language/alter/\"></a><a name=\"../../../../../query_language/alter/\"></a><a name=\"../../query_language/alter/\"></a><a name=\"alter/\"></a><a name=\"query_language/alter/\"></a><a name=\"../../../../query_language/alter/\"></a></p>\n<h3 id=\"query_language_queries_alter\">ALTER<a class=\"headerlink\" href=\"#query_language_queries_alter\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>ALTER</code> query is only supported for <code>*MergeTree</code> tables, as well as <code>Merge</code>and<code>Distributed</code>. The query has several variations.</p>\n<h4 id=\"column-manipulations\">Column Manipulations<a class=\"headerlink\" href=\"#column-manipulations\" title=\"Permanent link\">&para;</a></h4>\n<p>Changing the table structure.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">].</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span> <span class=\"k\">ADD</span><span class=\"o\">|</span><span class=\"k\">DROP</span><span class=\"o\">|</span><span class=\"n\">CLEAR</span><span class=\"o\">|</span><span class=\"k\">COMMENT</span><span class=\"o\">|</span><span class=\"k\">MODIFY</span> <span class=\"k\">COLUMN</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>In the query, specify a list of one or more comma-separated actions.<br />\nEach action is an operation on a column.</p>\n<p>The following actions are supported:</p>\n<ul>\n<li><a href=\"#alter_add-column\">ADD COLUMN</a> \u2014 Adds a new column to the table.</li>\n<li><a href=\"#alter_drop-column\">DROP COLUMN</a> \u2014 Deletes the column.</li>\n<li><a href=\"#alter_clear-column\">CLEAR COLUMN</a> \u2014 Resets column values.</li>\n<li><a href=\"#alter_comment-column\">COMMENT COLUMN</a> \u2014 Adds a text comment to the column.</li>\n<li><a href=\"#alter_modify-");
            
            document.write("column\">MODIFY COLUMN</a> \u2014 Changes column's type and/or default expression.</li>\n</ul>\n<p>These actions are described in detail below.</p>\n<h5 id=\"alter_add-column\">ADD COLUMN<a class=\"headerlink\" href=\"#alter_add-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ADD</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">type</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">default_expr</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">AFTER</span> <span class=\"n\">name_after</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Adds a new column to the table with the specified <code>name</code>, <code>type</code>, and <code>default_expr</code> (see the section <a href=\"#create-default-values\">Default expressions</a>).</p>\n<p>If the <code>IF NOT EXISTS</code> clause is included, the query won't return an error if the column already exists. If you specify <code>AFTER name_after</code> (the name of another column), the column is added after the specified one in the list of table columns. Otherwise, the column is added to the end of the table. Note that there is no way to add a column to the beginning of a table. For a chain of actions, <code>name_after</code> can be the name of a column that is added in one of the previous actions.</p>\n<p>Adding a column just changes the table structure, without performing any actions with data. The data doesn't appear on the disk after <code>ALTER</code>. If the data is missing for a column when reading from the table, it is filled in with default values (by performing the default expression if there is one, or using zeros or empty strings). The column appears on the disk after merging data parts (see <a href=\"#../operations/table_engines/mergetree/\">MergeTree</a>).</p>\n<p>This approach allows us to complete the <code>ALTER</code> query instantly, without increasing the volume of old data.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"k\">ADD</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span> <span class=\"n\">String</span> <span class=\"k\">AFTER</span> <span class=\"n\">user_id</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_drop-column\">DROP COLUMN<a class=\"headerlink\" href=\"#alter_drop-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span>\n</code></pre></div>\n\n\n<p>Deletes the column with the name <code>name</code>. If the <code>IF EXISTS</code> clause is specified, the query won't return an error if the column doesn't exist.</p>\n<p>Deletes data from the file system. Since this deletes entire files, the query is completed almost instantly.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_clear-column\">CLEAR COLUMN<a class=\"headerlink\" href=\"#alter_clear-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">CLEAR</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_name</span>\n</code></pre></div>\n\n\n<p>Resets all data in a column for a specified partition. Read more about setting the partition name in the section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>If the <code>IF EXISTS</code> clause is specified, the query won't return an error if the column doesn't exist.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">CLEAR</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">tuple</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_comment-column\">COMMENT COLUMN<a class=\"headerlink\" href=\"#alter_comment-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">COMMENT</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span> <span class=\"s1\">&#39;comment&#39;</span>\n</code></pre></div>\n\n\n<p>Adds a comment to the column. If the <code>IF EXISTS</code> clause is specified, the query won't return an error if the column doesn't exist.</p>\n<p>Each column can have one comment. If a comment already exists for the column, a new comment overwrites the previous comment.</p>\n<p>Comments are stored in the <code>comment_expression</code> column returned by the <a href=\"#misc-describe-table\">DESCRIBE TABLE</a> query.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"k\">COMMENT</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span> <span class=\"s1\">&#39;The table shows the browser used for accessing the site.&#39;</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_modify-column\">MODIFY COLUMN<a class=\"headerlink\" href=\"#alter_modify-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">MODIFY</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">type</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">default_expr</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This query changes the <code>name</code> column's type to <code>type</code> and/or the default expression to <code>default_expr</code>. If the <code>IF EXISTS</code> clause is specified, the query won't return an error if the column doesn't exist.</p>\n<p>When changing the type, values are converted as if the <a href=\"#functions/type_conversion_functions/\">toType</a> functions were applied to them. If only the default expression is changed, the query doesn't do anything complex, and is completed almost instantly.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"k\">MODIFY</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Changing the column type is the only complex action \u2013 it changes the contents of files with data. For large tables, this may take a long time.</p>\n<p>There are several processing stages:</p>\n<ul>\n<li>Preparing temporary (new) files with modified data.</li>\n<li>Renaming old files.</li>\n<li>Renaming the temporary (new) files to the old names.</li>\n<li>Deleting the old files.</li>\n</ul>\n<p>Only the first stage takes time. If there is a failure at this stage, the data is not changed.<br />\nIf there is a failure during one of the successive stages, data can be restored manually. The exception is if the old files were deleted from the file system but the data for the new files did not get written to the disk and was lost.</p>\n<p>The <code>ALTER</code> query for changing columns is replicated. The instructions are saved in ZooKeeper, then each replica applies them. All <code>ALTER</code> queries are run in the same order. The query waits for the appropriate actions to be completed on the other replicas. However, a query to change columns in a replicated table can be interrupted, and all actions will be performed asynchronously.</p>\n<h5 id=\"alter-query-limitations\">ALTER Query Limitations<a class=\"headerlink\" href=\"#alter-query-limitations\" title=\"Permanent link\">&para;</a></h5>\n<p>The <code>ALTER</code> query lets you create and delete separate elements (columns) in nested data structures, but not whole nested data structures. To add a nested data structure, you can add columns with a name like <code>name.nested_name</code> and the type <code>Array(T)</code>. A nested data structure is equivalent to multiple array columns with a name that has the same prefix before the dot.</p>\n<p>There is no support for deleting columns in the primary key or the sampling key (columns that are used in the <code>ENGINE</code> expression). Changing the type for columns that are included in the primary key is only possible if this change does not cause the data to be modified (for example, you are allowed to add values to an Enum or to change a type from <code>DateTime</code> to <code>UInt32</code>).</p>\n<p>If the <code>ALTER</code> query is not sufficient to make the table changes you need, you can create a new table, copy the data to it using the <a href=\"#insert_query_insert-select\">INSERT SELECT</a> query, then switch the tables using the <a href=\"#misc_operations-rename\">RENAME</a> query and delete the old table. You can use the <a href=\"#../operations/utils/clickhouse-copier/\">clickhouse-copier</a> as an alternative to the <code>INSERT SELECT</code> query.</p>\n<p>The <code>ALTER</code> query blocks all reads and writes for the table. In other words, if a long <code>SELECT</code> is running at the time of the <code>ALTER</code> query, the <code>ALTER</code> query will wait for it to complete. At the same time, all new queries to the same table will wait while this <code>ALTER</code> is running.</p>\n<p>For tables");
            
            document.write(" that don't store data themselves (such as <code>Merge</code> and <code>Distributed</code>), <code>ALTER</code> just changes the table structure, and does not change the structure of subordinate tables. For example, when running ALTER for a <code>Distributed</code> table, you will also need to run <code>ALTER</code> for the tables on all remote servers.</p>\n<h4 id=\"manipulations-with-key-expressions\">Manipulations With Key Expressions<a class=\"headerlink\" href=\"#manipulations-with-key-expressions\" title=\"Permanent link\">&para;</a></h4>\n<p>The following command is supported:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">MODIFY</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">new_expression</span>\n</code></pre></div>\n\n\n<p>It only works for tables in the <a href=\"#../operations/table_engines/mergetree/\"><code>MergeTree</code></a> family (including<br />\n<a href=\"#../operations/table_engines/replication/\">replicated</a> tables). The command changes the<br />\n<a href=\"#../operations/table_engines/mergetree/\">sorting key</a> of the table<br />\nto <code>new_expression</code> (an expression or a tuple of expressions). Primary key remains the same.</p>\n<p>The command is lightweight in a sense that it only changes metadata. To keep the property that data part<br />\nrows are ordered by the sorting key expression you cannot add expressions containing existing columns<br />\nto the sorting key (only columns added by the <code>ADD COLUMN</code> command in the same <code>ALTER</code> query).</p>\n<h4 id=\"manipulations-with-data-skipping-indices\">Manipulations With Data Skipping Indices<a class=\"headerlink\" href=\"#manipulations-with-data-skipping-indices\" title=\"Permanent link\">&para;</a></h4>\n<p>It only works for tables in the <a href=\"#../operations/table_engines/mergetree/\"><code>*MergeTree</code></a> family (including<br />\n<a href=\"#../operations/table_engines/replication/\">replicated</a> tables). The following operations<br />\nare available:</p>\n<ul>\n<li>\n<p><code>ALTER TABLE [db].name ADD INDEX name expression TYPE type GRANULARITY value AFTER name [AFTER name2]</code> - Adds index description to tables metadata.</p>\n</li>\n<li>\n<p><code>ALTER TABLE [db].name DROP INDEX name</code> - Removes index description from tables metadata and deletes index files from disk.</p>\n</li>\n</ul>\n<p>These commands are lightweight in a sense that they only change metadata or remove files.<br />\nAlso, they are replicated (syncing indices metadata through ZooKeeper).</p>\n<h4 id=\"manipulations-with-constraints\">Manipulations with constraints<a class=\"headerlink\" href=\"#manipulations-with-constraints\" title=\"Permanent link\">&para;</a></h4>\n<p>See more on <a href=\"#constraints\">constraints</a></p>\n<p>Constraints could be added or deleted using following syntax:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">].</span><span class=\"n\">name</span> <span class=\"k\">ADD</span> <span class=\"k\">CONSTRAINT</span> <span class=\"k\">constraint_name</span> <span class=\"k\">CHECK</span> <span class=\"n\">expression</span><span class=\"p\">;</span>\n<span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">].</span><span class=\"n\">name</span> <span class=\"k\">DROP</span> <span class=\"k\">CONSTRAINT</span> <span class=\"k\">constraint_name</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Queries will add or remove metadata about constraints from table so they are processed immediately.</p>\n<p>Constraint check <em>will not be executed</em> on existing data if it was added.</p>\n<p>All changes on replicated tables are broadcasting to ZooKeeper so will be applied on other replicas.</p>\n<h4 id=\"alter_manipulations-with-partitions\">Manipulations With Partitions and Parts<a class=\"headerlink\" href=\"#alter_manipulations-with-partitions\" title=\"Permanent link\">&para;</a></h4>\n<p>The following operations with <a href=\"#../operations/table_engines/custom_partitioning_key/\">partitions</a> are available:</p>\n<ul>\n<li><a href=\"#alter_detach-partition\">DETACH PARTITION</a> \u2013 Moves a partition to the <code>detached</code> directory and forget it.</li>\n<li><a href=\"#alter_drop-partition\">DROP PARTITION</a> \u2013 Deletes a partition.</li>\n<li><a href=\"#alter_attach-partition\">ATTACH PART|PARTITION</a> \u2013 Adds a part or partition from the <code>detached</code> directory to the table.</li>\n<li><a href=\"#alter_replace-partition\">REPLACE PARTITION</a> - Copies the data partition from one table to another.</li>\n<li><a href=\"#alter_clear-column-partition\">CLEAR COLUMN IN PARTITION</a> - Resets the value of a specified column in a partition.</li>\n<li><a href=\"#alter_clear-index-partition\">CLEAR INDEX IN PARTITION</a> - Resets the specified secondary index in a partition.</li>\n<li><a href=\"#alter_freeze-partition\">FREEZE PARTITION</a> \u2013 Creates a backup of a partition.</li>\n<li><a href=\"#alter_fetch-partition\">FETCH PARTITION</a> \u2013 Downloads a partition from another server.</li>\n<li><a href=\"#alter_move-partition\">MOVE PARTITION|PART</a> \u2013 Move partition/data part to another disk or volume.                                                                                                                   </li>\n</ul>\n<h5 id=\"alter_detach-partition\">DETACH PARTITION<a class=\"headerlink\" href=\"#alter_detach-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"n\">DETACH</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Moves all data for the specified partition to the <code>detached</code> directory. The server forgets about the detached data partition as if it does not exist. The server will not know about this data until you make the <a href=\"#alter_attach-partition\">ATTACH</a> query.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">DETACH</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201901</span>\n</code></pre></div>\n\n\n<p>Read about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>After the query is executed, you can do whatever you want with the data in the <code>detached</code> directory \u2014 delete it from the file system, or just leave it.</p>\n<p>This query is replicated \u2013 it moves the data to the <code>detached</code> directory on all replicas. Note that you can execute this query only on a leader replica. To find out if a replica is a leader, perform the <code>SELECT</code> query to the <a href=\"#system_tables-replicas\">system.replicas</a> table. Alternatively, it is easier to make a <code>DETACH</code> query on all replicas - all the replicas throw an exception, except the leader replica.</p>\n<h5 id=\"alter_drop-partition\">DROP PARTITION<a class=\"headerlink\" href=\"#alter_drop-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">DROP</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Deletes the specified partition from the table. This query tags the partition as inactive and deletes data completely, approximately in 10 minutes.</p>\n<p>Read about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>The query is replicated \u2013 it deletes data on all replicas.</p>\n<h5 id=\"alter_drop-detached\">DROP DETACHED PARTITION|PART<a class=\"headerlink\" href=\"#alter_drop-detached\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">DROP</span> <span class=\"n\">DETACHED</span> <span class=\"n\">PARTITION</span><span class=\"o\">|</span><span class=\"n\">PART</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Removes the specified part or all parts of the specified partition from <code>detached</code>.<br />\nRead more about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<h5 id=\"alter_attach-partition\">ATTACH PARTITION|PART<a class=\"headerlink\" href=\"#alter_attach-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"n\">ATTACH</span> <span class=\"n\">PARTITION</span><span class=\"o\">|</span><span class=\"n\">PART</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Adds data to the table from the <code>detached</code> directory. It is possible to add data for an entire partition or for a separate part. Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">ATTACH</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201901</span><span class=\"p\">;</span>\n<span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">ATTACH</span> <span class=\"n\">PART</span> <span class=\"mi\">201901</span><span class=\"n\">_2_2_0</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Read more about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>This query is replicated. Each replica checks whether there is data in the <code>detached</code> directory. If the data is in this directory, the query checks the integrity, verifies that it matches the data on the server that initiated the query. If everything is correct, the query adds data to the replica. If not, it downloads data from th");
            
            document.write("e query requestor replica, or from another replica where the data has already been added.</p>\n<p>So you can put data to the <code>detached</code> directory on one replica, and use the <code>ALTER ... ATTACH</code> query to add it to the table on all replicas.</p>\n<h5 id=\"alter_replace-partition\">REPLACE PARTITION<a class=\"headerlink\" href=\"#alter_replace-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">table2</span> <span class=\"k\">REPLACE</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span> <span class=\"k\">FROM</span> <span class=\"n\">table1</span>\n</code></pre></div>\n\n\n<p>This query copies the data partition from the <code>table1</code> to <code>table2</code>. Note that data won't be deleted from <code>table1</code>.</p>\n<p>For the query to run successfully, the following conditions must be met:</p>\n<ul>\n<li>Both tables must have the same structure.</li>\n<li>Both tables must have the same partition key.</li>\n</ul>\n<h5 id=\"alter_clear-column-partition\">CLEAR COLUMN IN PARTITION<a class=\"headerlink\" href=\"#alter_clear-column-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"n\">CLEAR</span> <span class=\"k\">COLUMN</span> <span class=\"k\">column_name</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Resets all values in the specified column in a partition. If the <code>DEFAULT</code> clause was determined when creating a table, this query sets the column value to a specified default value.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">CLEAR</span> <span class=\"k\">COLUMN</span> <span class=\"n\">hour</span> <span class=\"k\">in</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201902</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_freeze-partition\">FREEZE PARTITION<a class=\"headerlink\" href=\"#alter_freeze-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">FREEZE</span> <span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This query creates a local backup of a specified partition. If the <code>PARTITION</code> clause is omitted, the query creates the backup of all partitions at once.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The entire backup process is performed without stopping the server.</p>\n</div>\n<p>Note that for old-styled tables you can specify the prefix of the partition name (for example, '2019') - then the query creates the backup for all the corresponding partitions. Read about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>At the time of execution, for a data snapshot, the query creates hardlinks to a table data. Hardlinks are placed in the directory <code>/var/lib/clickhouse/shadow/N/...</code>, where:</p>\n<ul>\n<li><code>/var/lib/clickhouse/</code> is the working ClickHouse directory specified in the config.</li>\n<li><code>N</code> is the incremental number of the backup.</li>\n</ul>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>If you use <a href=\"#table_engine-mergetree-multiple-volumes\">a set of disks for data storage in a table</a>, the <code>shadow/N</code> directory appears on every disk, storing data parts that matched by the <code>PARTITION</code> expression.</p>\n</div>\n<p>The same structure of directories is created inside the backup as inside <code>/var/lib/clickhouse/</code>. The query performs 'chmod' for all files, forbidding writing into them.</p>\n<p>After creating the backup, you can copy the data from <code>/var/lib/clickhouse/shadow/</code> to the remote server and then delete it from the local server. Note that the <code>ALTER t FREEZE PARTITION</code> query is not replicated. It creates a local backup only on the local server.</p>\n<p>The query creates backup almost instantly (but first it waits for the current queries to the corresponding table to finish running).</p>\n<p><code>ALTER TABLE t FREEZE PARTITION</code> copies only the data, not table metadata. To make a backup of table metadata, copy the file <code>/var/lib/clickhouse/metadata/database/table.sql</code></p>\n<p>To restore data from a backup, do the following:</p>\n<ol>\n<li>Create the table if it does not exist. To view the query, use the .sql file (replace <code>ATTACH</code> in it with <code>CREATE</code>).</li>\n<li>Copy the data from the <code>data/database/table/</code> directory inside the backup to the <code>/var/lib/clickhouse/data/database/table/detached/</code> directory.</li>\n<li>Run <code>ALTER TABLE t ATTACH PARTITION</code> queries to add the data to a table.</li>\n</ol>\n<p>Restoring from a backup doesn't require stopping the server.</p>\n<p>For more information about backups and restoring data, see the <a href=\"#../operations/backup/\">Data Backup</a> section.</p>\n<h5 id=\"alter_clear-index-partition\">CLEAR INDEX IN PARTITION<a class=\"headerlink\" href=\"#alter_clear-index-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"n\">CLEAR</span> <span class=\"k\">INDEX</span> <span class=\"n\">index_name</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>The query works similar to <code>CLEAR COLUMN</code>, but it resets an index instead of a column data.</p>\n<h5 id=\"alter_fetch-partition\">FETCH PARTITION<a class=\"headerlink\" href=\"#alter_fetch-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">FETCH</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span> <span class=\"k\">FROM</span> <span class=\"s1\">&#39;path-in-zookeeper&#39;</span>\n</code></pre></div>\n\n\n<p>Downloads a partition from another server. This query only works for the replicated tables.</p>\n<p>The query does the following:</p>\n<ol>\n<li>Downloads the partition from the specified shard. In 'path-in-zookeeper' you must specify a path to the shard in ZooKeeper.</li>\n<li>Then the query puts the downloaded data to the <code>detached</code> directory of the <code>table_name</code> table. Use the <a href=\"#alter_attach-partition\">ATTACH PARTITION|PART</a> query to add the data to the table.</li>\n</ol>\n<p>For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">users</span> <span class=\"k\">FETCH</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201902</span> <span class=\"k\">FROM</span> <span class=\"s1\">&#39;/clickhouse/tables/01-01/visits&#39;</span><span class=\"p\">;</span>\n<span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">users</span> <span class=\"n\">ATTACH</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201902</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Note that:</p>\n<ul>\n<li>The <code>ALTER ... FETCH PARTITION</code> query isn't replicated. It places the partition to the <code>detached</code> directory only on the local server.</li>\n<li>The <code>ALTER TABLE ... ATTACH</code> query is replicated. It adds the data to all replicas. The data is added to one of the replicas from the <code>detached</code> directory, and to the others - from neighboring replicas.</li>\n</ul>\n<p>Before downloading, the system checks if the partition exists and the table structure matches. The most appropriate replica is selected automatically from the healthy replicas.</p>\n<p>Although the query is called <code>ALTER TABLE</code>, it does not change the table structure and does not immediately change the data available in the table.</p>\n<h5 id=\"alter_move-partition\">MOVE PARTITION|PART<a class=\"headerlink\" href=\"#alter_move-partition\" title=\"Permanent link\">&para;</a></h5>\n<p>Moves partitions or data parts to another volume or disk for <code>MergeTree</code>-engine tables. See <a href=\"#table_engine-mergetree-multiple-volumes\">Using Multiple Block Devices for Data Storage</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">MOVE</span> <span class=\"n\">PARTITION</span><span class=\"o\">|</span><span class=\"n\">PART</span> <span class=\"n\">partition_expr</span> <span class=\"k\">TO</span> <span class=\"n\">DISK</span><span class=\"o\">|</span><span class=\"n\">VOLUME</span> <span class=\"s1\">&#39;disk_name&#39;</span>\n</code></pre></div>\n\n\n<p>The <code>ALTER TABLE t MOVE</code> query:</p>\n<ul>\n<li>Not replicated, because different replicas can have different storage policies.</li>\n<li>Returns an error if the specified disk or volume is not configured. Query also returns an error if conditions of data moving, that specified in the storage policy, can't be applied.</li>\n<li>Can return an error in the case, when data to be moved is already moved by a background process, concurrent <code>ALTER TABLE t MOVE</code> query or as a result of background data merging. A user shouldn't perform any additional actions in this case.</li>\n</ul>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"k\">MOVE</span> <span class=\"n\">PART</span> <span class=\"s1\">&#39;20190301_14343_16206_438&#39;</span> <span class=\"k\">TO</span> <span class=\"n\">VOLUME</span> <span class=\"s1\">&#39;slow&#39;</span>\n<span class=\"k\">ALTER</span> <span class=\"k\">");
            
            document.write("TABLE</span> <span class=\"n\">hits</span> <span class=\"k\">MOVE</span> <span class=\"n\">PARTITION</span> <span class=\"s1\">&#39;2019-09-01&#39;</span> <span class=\"k\">TO</span> <span class=\"n\">DISK</span> <span class=\"s1\">&#39;fast_ssd&#39;</span>\n</code></pre></div>\n\n\n<h5 id=\"alter-how-to-specify-part-expr\">How To Set Partition Expression<a class=\"headerlink\" href=\"#alter-how-to-specify-part-expr\" title=\"Permanent link\">&para;</a></h5>\n<p>You can specify the partition expression in <code>ALTER ... PARTITION</code> queries in different ways:</p>\n<ul>\n<li>As a value from the <code>partition</code> column of the <code>system.parts</code> table. For example, <code>ALTER TABLE visits DETACH PARTITION 201901</code>.</li>\n<li>As the expression from the table column. Constants and constant expressions are supported. For example, <code>ALTER TABLE visits DETACH PARTITION toYYYYMM(toDate('2019-01-25'))</code>.</li>\n<li>Using the partition ID. Partition ID is a string identifier of the partition (human-readable, if possible) that is used as the names of partitions in the file system and in ZooKeeper. The partition ID must be specified in the <code>PARTITION ID</code> clause, in a single quotes. For example, <code>ALTER TABLE visits DETACH PARTITION ID '201901'</code>.</li>\n<li>In the <a href=\"#alter_attach-partition\">ALTER ATTACH PART</a> and <a href=\"#alter_drop-detached\">DROP DETACHED PART</a> query, to specify the name of a part, use string literal with a value from the <code>name</code> column of the <a href=\"#system_tables-detached_parts\">system.detached_parts</a> table. For example, <code>ALTER TABLE visits ATTACH PART '201901_1_1_0'</code>.</li>\n</ul>\n<p>Usage of quotes when specifying the partition depends on the type of partition expression. For example, for the <code>String</code> type, you have to specify its name in quotes (<code>'</code>). For the <code>Date</code> and <code>Int*</code> types no quotes are needed.</p>\n<p>For old-style tables, you can specify the partition either as a number <code>201901</code> or a string <code>'201901'</code>. The syntax for the new-style tables is stricter with types (similar to the parser for the VALUES input format).</p>\n<p>All the rules above are also true for the <a href=\"#misc_operations-optimize\">OPTIMIZE</a> query. If you need to specify the only partition when optimizing a non-partitioned table, set the expression <code>PARTITION tuple()</code>. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">OPTIMIZE</span> <span class=\"k\">TABLE</span> <span class=\"n\">table_not_partitioned</span> <span class=\"n\">PARTITION</span> <span class=\"n\">tuple</span><span class=\"p\">()</span> <span class=\"k\">FINAL</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>The examples of <code>ALTER ... PARTITION</code> queries are demonstrated in the tests <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/tests/queries/0_stateless/00502_custom_partitioning_local.sql\" rel=\"external nofollow noreferrer\"><code>00502_custom_partitioning_local</code></a> and <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/tests/queries/0_stateless/00502_custom_partitioning_replicated_zookeeper.sql\" rel=\"external nofollow noreferrer\"><code>00502_custom_partitioning_replicated_zookeeper</code></a>.</p>\n<h4 id=\"synchronicity-of-alter-queries\">Synchronicity of ALTER Queries<a class=\"headerlink\" href=\"#synchronicity-of-alter-queries\" title=\"Permanent link\">&para;</a></h4>\n<p>For non-replicatable tables, all <code>ALTER</code> queries are performed synchronously. For replicatable tables, the query just adds instructions for the appropriate actions to <code>ZooKeeper</code>, and the actions themselves are performed as soon as possible. However, the query can wait for these actions to be completed on all the replicas.</p>\n<p>For <code>ALTER ... ATTACH|DETACH|DROP</code> queries, you can use the <code>replication_alter_partitions_sync</code> setting to set up waiting.<br />\nPossible values: <code>0</code> \u2013 do not wait; <code>1</code> \u2013 only wait for own execution (default); <code>2</code> \u2013 wait for all.</p>\n<h4 id=\"alter-mutations\">Mutations<a class=\"headerlink\" href=\"#alter-mutations\" title=\"Permanent link\">&para;</a></h4>\n<p>Mutations are an ALTER query variant that allows changing or deleting rows in a table. In contrast to standard <code>UPDATE</code> and <code>DELETE</code> queries that are intended for point data changes, mutations are intended for heavy operations that change a lot of rows in a table. Supported for the <code>MergeTree</code> family of table engines including the engines with replication support.</p>\n<p>Existing tables are ready for mutations as-is (no conversion necessary), but after the first mutation is applied to a table, its metadata format becomes incompatible with previous server versions and falling back to a previous version becomes impossible.</p>\n<p>Currently available commands:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"k\">DELETE</span> <span class=\"k\">WHERE</span> <span class=\"n\">filter_expr</span>\n</code></pre></div>\n\n\n<p>The <code>filter_expr</code> must be of type <code>UInt8</code>. The query deletes rows in the table for which this expression takes a non-zero value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"k\">UPDATE</span> <span class=\"n\">column1</span> <span class=\"o\">=</span> <span class=\"n\">expr1</span> <span class=\"p\">[,</span> <span class=\"p\">...]</span> <span class=\"k\">WHERE</span> <span class=\"n\">filter_expr</span>\n</code></pre></div>\n\n\n<p>The <code>filter_expr</code> must be of type <code>UInt8</code>. This query updates values of specified columns to the values of corresponding expressions in rows for which the <code>filter_expr</code> takes a non-zero value. Values are casted to the column type using the <code>CAST</code> operator. Updating columns that are used in the calculation of the primary or the partition key is not supported.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"n\">MATERIALIZE</span> <span class=\"k\">INDEX</span> <span class=\"n\">name</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_name</span>\n</code></pre></div>\n\n\n<p>The query rebuilds the secondary index <code>name</code> in the partition <code>partition_name</code>.</p>\n<p>One query can contain several commands separated by commas.</p>\n<p>For *MergeTree tables mutations execute by rewriting whole data parts. There is no atomicity - parts are substituted for mutated parts as soon as they are ready and a <code>SELECT</code> query that started executing during a mutation will see data from parts that have already been mutated along with data from parts that have not been mutated yet.</p>\n<p>Mutations are totally ordered by their creation order and are applied to each part in that order. Mutations are also partially ordered with INSERTs - data that was inserted into the table before the mutation was submitted will be mutated and data that was inserted after that will not be mutated. Note that mutations do not block INSERTs in any way.</p>\n<p>A mutation query returns immediately after the mutation entry is added (in case of replicated tables to ZooKeeper, for nonreplicated tables - to the filesystem). The mutation itself executes asynchronously using the system profile settings. To track the progress of mutations you can use the <a href=\"#system_tables-mutations\"><code>system.mutations</code></a> table. A mutation that was successfully submitted will continue to execute even if ClickHouse servers are restarted. There is no way to roll back the mutation once it is submitted, but if the mutation is stuck for some reason it can be cancelled with the <a href=\"#kill-mutation\"><code>KILL MUTATION</code></a> query.</p>\n<p>Entries for finished mutations are not deleted right away (the number of preserved entries is determined by the <code>finished_mutations_to_keep</code> storage engine parameter). Older mutation entries are deleted.</p>\n<p><a name=\"../../../../query_language/system/\"></a><a name=\"../../../query_language/system/\"></a><a name=\"../../query_language/system/\"></a><a name=\"../query_language/system/\"></a><a name=\"system/\"></a><a name=\"../../../../../query_language/system/\"></a><a name=\"query_language/system/\"></a></p>\n<h2 id=\"query_language-system\">SYSTEM Queries<a class=\"headerlink\" href=\"#query_language-system\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"#query_language-system-reload-dictionaries\">RELOAD DICTIONARIES</a></li>\n<li><a href=\"#query_language-system-reload-dictionary\">RELOAD DICTIONARY</a></li>\n<li><a href=\"#query_language-system-drop-dns-cache\">DROP DNS CACHE</a></li>\n<li><a href=\"#query_language-system-drop-marks-cache\">DROP MARKS CACHE</a></li>\n<li><a href=\"#query_language-system-flush_logs\">FLUSH LOGS</a></li>\n<li><a href=\"#query_language-system-reload-config\">RELOAD CONFIG</a></li>\n<li><a href=\"#query_language-system-shutdown\">SHUTDOWN</a></li>\n<li><a href=\"#query_language-system-kill\">KILL</a></li>\n<li><a href=\"#query_language-system-stop-distributed-sends\">STOP DISTRIBUTED SENDS</a></li>\n<li><a href=\"#query_language-system-flush-distributed\">FLUSH DISTRIBUTED</a></li>\n<li><a href=\"#query_language-system-start-distributed-sends\">START DISTRIBUTED SENDS</a></li>\n<li><a href=\"#query_language-system-stop-merges\">STOP MERGES</a></li>\n<li><a href=\"#query_language-system-start-merges\">START MERGES</a></li>\n</ul>\n<h3 id=\"query_language-system-reload-dictionaries\">RELOAD DICTIONARIES<a class=\"headerlink\" href=\"#query_language-system-reload-dictionaries\" title=\"Permanent link\">&para;</a></h3>\n<p>Reloads all dictionaries that have been successfully loaded before.<br />\nBy ");
            
            document.write("default, dictionaries are loaded lazily (see <a href=\"#server_settings-dictionaries_lazy_load\">dictionaries_lazy_load</a>), so instead of being loaded automatically at startup, they are initialized on first access through dictGet function or SELECT from tables with ENGINE = Dictionary. The <code>SYSTEM RELOAD DICTIONARIES</code> query reloads such dictionaries (LOADED).<br />\nAlways returns <code>Ok.</code> regardless of the result of the dictionary update.</p>\n<h3 id=\"query_language-system-reload-dictionary\">RELOAD DICTIONARY dictionary_name<a class=\"headerlink\" href=\"#query_language-system-reload-dictionary\" title=\"Permanent link\">&para;</a></h3>\n<p>Completely reloads a dictionary <code>dictionary_name</code>, regardless of the state of the dictionary (LOADED / NOT_LOADED / FAILED).<br />\nAlways returns <code>Ok.</code> regardless of the result of updating the dictionary.<br />\nThe status of the dictionary can be checked by querying the <code>system.dictionaries</code> table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">status</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">dictionaries</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<h3 id=\"query_language-system-drop-dns-cache\">DROP DNS CACHE<a class=\"headerlink\" href=\"#query_language-system-drop-dns-cache\" title=\"Permanent link\">&para;</a></h3>\n<p>Resets ClickHouse's internal DNS cache. Sometimes (for old ClickHouse versions) it is necessary to use this command when changing the infrastructure (changing the IP address of another ClickHouse server or the server used by dictionaries).</p>\n<p>For more convenient (automatic) cache management, see disable_internal_dns_cache, dns_cache_update_period parameters.</p>\n<h3 id=\"query_language-system-drop-marks-cache\">DROP MARKS CACHE<a class=\"headerlink\" href=\"#query_language-system-drop-marks-cache\" title=\"Permanent link\">&para;</a></h3>\n<p>Resets the mark cache. Used in development of ClickHouse and performance tests.</p>\n<h3 id=\"query_language-system-flush_logs\">FLUSH LOGS<a class=\"headerlink\" href=\"#query_language-system-flush_logs\" title=\"Permanent link\">&para;</a></h3>\n<p>Flushes buffers of log messages to system tables (e.g. system.query_log). Allows you to not wait 7.5 seconds when debugging.</p>\n<h3 id=\"query_language-system-reload-config\">RELOAD CONFIG<a class=\"headerlink\" href=\"#query_language-system-reload-config\" title=\"Permanent link\">&para;</a></h3>\n<p>Reloads ClickHouse configuration. Used when configuration is stored in ZooKeeeper.</p>\n<h3 id=\"query_language-system-shutdown\">SHUTDOWN<a class=\"headerlink\" href=\"#query_language-system-shutdown\" title=\"Permanent link\">&para;</a></h3>\n<p>Normally shuts down ClickHouse (like <code>service clickhouse-server stop</code> / <code>kill {$pid_clickhouse-server}</code>)</p>\n<h3 id=\"query_language-system-kill\">KILL<a class=\"headerlink\" href=\"#query_language-system-kill\" title=\"Permanent link\">&para;</a></h3>\n<p>Aborts ClickHouse process (like <code>kill -9 {$ pid_clickhouse-server}</code>)</p>\n<h3 id=\"query_language-system-distributed\">Managing Distributed Tables<a class=\"headerlink\" href=\"#query_language-system-distributed\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse can manage <a href=\"#../operations/table_engines/distributed/\">distributed</a> tables. When a user inserts data into these tables, ClickHouse first creates a queue of the data that should be sent to cluster nodes, then asynchronously sends it. You can manage queue processing with the <a href=\"#query_language-system-stop-distributed-sends\">STOP DISTRIBUTED SENDS</a>, <a href=\"#query_language-system-flush-distributed\">FLUSH DISTRIBUTED</a>, and <a href=\"#query_language-system-start-distributed-sends\">START DISTRIBUTED SENDS</a> queries. You can also synchronously insert distributed data with the <code>insert_distributed_sync</code> setting.</p>\n<h4 id=\"query_language-system-stop-distributed-sends\">STOP DISTRIBUTED SENDS<a class=\"headerlink\" href=\"#query_language-system-stop-distributed-sends\" title=\"Permanent link\">&para;</a></h4>\n<p>Disables background data distribution when inserting data into distributed tables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SYSTEM</span> <span class=\"n\">STOP</span> <span class=\"n\">DISTRIBUTED</span> <span class=\"n\">SENDS</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"o\">&lt;</span><span class=\"n\">distributed_table_name</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"query_language-system-flush-distributed\">FLUSH DISTRIBUTED<a class=\"headerlink\" href=\"#query_language-system-flush-distributed\" title=\"Permanent link\">&para;</a></h4>\n<p>Forces ClickHouse to send data to cluster nodes synchronously. If any nodes are unavailable, ClickHouse throws an exception and stops query execution. You can retry the query until it succeeds, which will happen when all nodes are back online.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SYSTEM</span> <span class=\"n\">FLUSH</span> <span class=\"n\">DISTRIBUTED</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"o\">&lt;</span><span class=\"n\">distributed_table_name</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"query_language-system-start-distributed-sends\">START DISTRIBUTED SENDS<a class=\"headerlink\" href=\"#query_language-system-start-distributed-sends\" title=\"Permanent link\">&para;</a></h4>\n<p>Enables background data distribution when inserting data into distributed tables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SYSTEM</span> <span class=\"k\">START</span> <span class=\"n\">DISTRIBUTED</span> <span class=\"n\">SENDS</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"o\">&lt;</span><span class=\"n\">distributed_table_name</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"query_language-system-stop-merges\">STOP MERGES<a class=\"headerlink\" href=\"#query_language-system-stop-merges\" title=\"Permanent link\">&para;</a></h4>\n<p>Provides possibility to stop background merges for tables in the MergeTree family:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SYSTEM</span> <span class=\"n\">STOP</span> <span class=\"n\">MERGES</span> <span class=\"p\">[[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">merge_tree_family_table_name</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>!!! note \"Note\":<br />\n<code>DETACH / ATTACH</code> table will start background merges for the table even in case when merges have been stopped for all MergeTree tables before.</p>\n<h4 id=\"query_language-system-start-merges\">START MERGES<a class=\"headerlink\" href=\"#query_language-system-start-merges\" title=\"Permanent link\">&para;</a></h4>\n<p>Provides possibility to start background merges for tables in the MergeTree family:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SYSTEM</span> <span class=\"k\">START</span> <span class=\"n\">MERGES</span> <span class=\"p\">[[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">merge_tree_family_table_name</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p><a name=\"../../query_language/show/\"></a><a name=\"../query_language/show/\"></a><a name=\"../../../../query_language/show/\"></a><a name=\"../../../../../query_language/show/\"></a><a name=\"../../../query_language/show/\"></a><a name=\"query_language/show/\"></a><a name=\"show/\"></a></p>\n<h2 id=\"show-queries\">SHOW Queries<a class=\"headerlink\" href=\"#show-queries\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"show-create-table\">SHOW CREATE TABLE<a class=\"headerlink\" href=\"#show-create-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"k\">CREATE</span> <span class=\"p\">[</span><span class=\"k\">TEMPORARY</span><span class=\"p\">]</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Returns a single <code>String</code>-type 'statement' column, which contains a single value \u2013 the <code>CREATE</code> query used for creating the specified table.</p>\n<h3 id=\"show-databases\">SHOW DATABASES<a class=\"headerlink\" href=\"#show-databases\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"n\">DATABASES</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Prints a list of all databases.<br />\nThis query is identical to <code>SELECT name FROM system.databases [INTO OUTFILE filename] [FORMAT format]</code>.</p>\n<h3 id=\"show-processlist\">SHOW PROCESSLIST<a class=\"headerlink\" href=\"#show-processlist\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"n\">PROCESSLIST</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Outputs the content of the <a href=\"#system_tables-processes\">system.processes</a> table, that contains a list of queries that is being processed at the moment, excepting <code>SHOW PROCESSLIST</code> queries.</p>\n<p>The <code>SELECT * FROM system.processes</code> query returns data about all the current queries.</p>\n<p>Tip (execute in the console):</p>\n<div class=\"codehilite\"><pre><span></span><code>$ watch -n1 <span ");
            
            document.write("class=\"s2\">&quot;clickhouse-client --query=&#39;SHOW PROCESSLIST&#39;&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"show-tables\">SHOW TABLES<a class=\"headerlink\" href=\"#show-tables\" title=\"Permanent link\">&para;</a></h3>\n<p>Displays a list of tables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"p\">[</span><span class=\"k\">TEMPORARY</span><span class=\"p\">]</span> <span class=\"n\">TABLES</span> <span class=\"p\">[</span><span class=\"k\">FROM</span> <span class=\"o\">&lt;</span><span class=\"n\">db</span><span class=\"o\">&gt;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">LIKE</span> <span class=\"s1\">&#39;&lt;pattern&gt;&#39;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">LIMIT</span> <span class=\"o\">&lt;</span><span class=\"n\">N</span><span class=\"o\">&gt;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"o\">&lt;</span><span class=\"n\">filename</span><span class=\"o\">&gt;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"o\">&lt;</span><span class=\"n\">format</span><span class=\"o\">&gt;</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>If the <code>FROM</code> clause is not specified, the query returns the list of tables from the current database.</p>\n<p>You can get the same results as the <code>SHOW TABLES</code> query in the following way:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">name</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">tables</span> <span class=\"k\">WHERE</span> <span class=\"k\">database</span> <span class=\"o\">=</span> <span class=\"o\">&lt;</span><span class=\"n\">db</span><span class=\"o\">&gt;</span> <span class=\"p\">[</span><span class=\"k\">AND</span> <span class=\"n\">name</span> <span class=\"k\">LIKE</span> <span class=\"o\">&lt;</span><span class=\"n\">pattern</span><span class=\"o\">&gt;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">LIMIT</span> <span class=\"o\">&lt;</span><span class=\"n\">N</span><span class=\"o\">&gt;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"o\">&lt;</span><span class=\"n\">filename</span><span class=\"o\">&gt;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"o\">&lt;</span><span class=\"n\">format</span><span class=\"o\">&gt;</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p><strong>Example</strong></p>\n<p>The following query selects the first two rows from the list of tables in the <code>system</code> database, whose names contain <code>co</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"n\">TABLES</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%co%&#39;</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 aggregate_function_combinators \u2502\n\u2502 collations                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../query_language/misc/\"></a><a name=\"query_language/misc/\"></a><a name=\"../../../../query_language/misc/\"></a><a name=\"../../../../../query_language/misc/\"></a><a name=\"../../query_language/misc/\"></a><a name=\"misc/\"></a><a name=\"../query_language/misc/\"></a></p>\n<h2 id=\"miscellaneous-queries\">Miscellaneous Queries<a class=\"headerlink\" href=\"#miscellaneous-queries\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"attach\">ATTACH<a class=\"headerlink\" href=\"#attach\" title=\"Permanent link\">&para;</a></h3>\n<p>This query is exactly the same as <code>CREATE</code>, but</p>\n<ul>\n<li>Instead of the word <code>CREATE</code> it uses the word <code>ATTACH</code>.</li>\n<li>The query does not create data on the disk, but assumes that data is already in the appropriate places, and just adds information about the table to the server.<br />\nAfter executing an ATTACH query, the server will know about the existence of the table.</li>\n</ul>\n<p>If the table was previously detached (<code>DETACH</code>), meaning that its structure is known, you can use shorthand without defining the structure.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ATTACH</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This query is used when starting the server. The server stores table metadata as files with <code>ATTACH</code> queries, which it simply runs at launch (with the exception of system tables, which are explicitly created on the server).</p>\n<h3 id=\"check-table\">CHECK TABLE<a class=\"headerlink\" href=\"#check-table\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks if the data in the table is corrupted.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CHECK</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span>\n</code></pre></div>\n\n\n<p>The <code>CHECK TABLE</code> query compares actual file sizes with the expected values which are stored on the server. If the file sizes do not match the stored values, it means the data is corrupted. This can be caused, for example, by a system crash during query execution.</p>\n<p>The query response contains the <code>result</code> column with a single row. The row has a value of<br />\n<a href=\"#../data_types/boolean/\">Boolean</a> type:</p>\n<ul>\n<li>0 - The data in the table is corrupted.</li>\n<li>1 - The data maintains integrity.</li>\n</ul>\n<p>The <code>CHECK TABLE</code> query supports the following table engines:</p>\n<ul>\n<li><a href=\"#../operations/table_engines/log/\">Log</a></li>\n<li><a href=\"#../operations/table_engines/tinylog/\">TinyLog</a></li>\n<li><a href=\"#../operations/table_engines/stripelog/\">StripeLog</a></li>\n<li><a href=\"#../operations/table_engines/mergetree/\">MergeTree family</a></li>\n</ul>\n<p>Performed over the tables with another table engines causes an exception.</p>\n<p>Engines from the <code>*Log</code> family don't provide automatic data recovery on failure. Use the <code>CHECK TABLE</code> query to track data loss in a timely manner.</p>\n<p>For <code>MergeTree</code> family engines, the <code>CHECK TABLE</code> query shows a check status for every individual data part of a table on the local server.</p>\n<p><strong>If the data is corrupted</strong></p>\n<p>If the table is corrupted, you can copy the non-corrupted data to another table. To do this:</p>\n<ol>\n<li>Create a new table with the same structure as damaged table. To do this execute the query <code>CREATE TABLE &lt;new_table_name&gt; AS &lt;damaged_table_name&gt;</code>.</li>\n<li>Set the <a href=\"#settings-max_threads\">max_threads</a> value to 1 to process the next query in a single thread. To do this run the query <code>SET max_threads = 1</code>.</li>\n<li>Execute the query <code>INSERT INTO &lt;new_table_name&gt; SELECT * FROM &lt;damaged_table_name&gt;</code>. This request copies the non-corrupted data from the damaged table to another table. Only the data before the corrupted part will be copied.</li>\n<li>Restart the <code>clickhouse-client</code> to reset the <code>max_threads</code> value.</li>\n</ol>\n<h3 id=\"misc-describe-table\">DESCRIBE TABLE<a class=\"headerlink\" href=\"#misc-describe-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DESC</span><span class=\"o\">|</span><span class=\"k\">DESCRIBE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Returns the following <code>String</code> type columns:</p>\n<ul>\n<li><code>name</code> \u2014 Column name.</li>\n<li><code>type</code>\u2014 Column type.</li>\n<li><code>default_type</code> \u2014 Clause that is used in <a href=\"#create-default-values\">default expression</a> (<code>DEFAULT</code>, <code>MATERIALIZED</code> or <code>ALIAS</code>). Column contains an empty string, if the default expression isn't specified.</li>\n<li><code>default_expression</code> \u2014 Value specified in the <code>DEFAULT</code> clause.</li>\n<li><code>comment_expression</code> \u2014 Comment text.</li>\n</ul>\n<p>Nested data structures are output in \"expanded\" format. Each column is shown separately, with the name after a dot.</p>\n<h3 id=\"detach\">DETACH<a class=\"headerlink\" href=\"#detach\" title=\"Permanent link\">&para;</a></h3>\n<p>Deletes information about the 'name' table from the server. The server stops knowing about the table's existence.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">DETACH</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This does not delete the table's data or metadata. On the next server launch, the server will read the metadata and find out about the table again.<br />\nSimilarly, a \"detached\" table can be re-attached using the <code>ATTACH</code> query (with the exception of system tables, which do not have metadata stored for them).</p>\n<p>There is no <code>DETACH DATABASE</code> query.</p>\n<h3 id=\"drop\">DROP<a class=");
            
            document.write("\"headerlink\" href=\"#drop\" title=\"Permanent link\">&para;</a></h3>\n<p>This query has two types: <code>DROP DATABASE</code> and <code>DROP TABLE</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"k\">DATABASE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">db</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Deletes all tables inside the 'db' database, then deletes the 'db' database itself.<br />\nIf <code>IF EXISTS</code> is specified, it doesn't return an error if the database doesn't exist.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"p\">[</span><span class=\"k\">TEMPORARY</span><span class=\"p\">]</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Deletes the table.<br />\nIf <code>IF EXISTS</code> is specified, it doesn't return an error if the table doesn't exist or the database doesn't exist.</p>\n<h3 id=\"exists\">EXISTS<a class=\"headerlink\" href=\"#exists\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">EXISTS</span> <span class=\"p\">[</span><span class=\"k\">TEMPORARY</span><span class=\"p\">]</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Returns a single <code>UInt8</code>-type column, which contains the single value <code>0</code> if the table or database doesn't exist, or <code>1</code> if the table exists in the specified database.</p>\n<h3 id=\"kill-query\">KILL QUERY<a class=\"headerlink\" href=\"#kill-query\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">KILL</span> <span class=\"n\">QUERY</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n  <span class=\"k\">WHERE</span> <span class=\"o\">&lt;</span><span class=\"k\">where</span> <span class=\"n\">expression</span> <span class=\"k\">to</span> <span class=\"k\">SELECT</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">processes</span> <span class=\"n\">query</span><span class=\"o\">&gt;</span>\n  <span class=\"p\">[</span><span class=\"n\">SYNC</span><span class=\"o\">|</span><span class=\"n\">ASYNC</span><span class=\"o\">|</span><span class=\"n\">TEST</span><span class=\"p\">]</span>\n  <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Attempts to forcibly terminate the currently running queries.<br />\nThe queries to terminate are selected from the system.processes table using the criteria defined in the <code>WHERE</code> clause of the <code>KILL</code> query.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- Forcibly terminates all queries with the specified query_id:</span>\n<span class=\"n\">KILL</span> <span class=\"n\">QUERY</span> <span class=\"k\">WHERE</span> <span class=\"n\">query_id</span><span class=\"o\">=</span><span class=\"s1\">&#39;2-857d-4a57-9ee0-327da5d60a90&#39;</span>\n\n<span class=\"c1\">-- Synchronously terminates all queries run by &#39;username&#39;:</span>\n<span class=\"n\">KILL</span> <span class=\"n\">QUERY</span> <span class=\"k\">WHERE</span> <span class=\"k\">user</span><span class=\"o\">=</span><span class=\"s1\">&#39;username&#39;</span> <span class=\"n\">SYNC</span>\n</code></pre></div>\n\n\n<p>Read-only users can only stop their own queries.</p>\n<p>By default, the asynchronous version of queries is used (<code>ASYNC</code>), which doesn't wait for confirmation that queries have stopped.</p>\n<p>The synchronous version (<code>SYNC</code>) waits for all queries to stop and displays information about each process as it stops.<br />\nThe response contains the <code>kill_status</code> column, which can take the following values:</p>\n<ol>\n<li>'finished' \u2013 The query was terminated successfully.</li>\n<li>'waiting' \u2013 Waiting for the query to end after sending it a signal to terminate.</li>\n<li>The other values \u200b\u200bexplain why the query can't be stopped.</li>\n</ol>\n<p>A test query (<code>TEST</code>) only checks the user's rights and displays a list of queries to stop.</p>\n<h3 id=\"kill-mutation\">KILL MUTATION<a class=\"headerlink\" href=\"#kill-mutation\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">KILL</span> <span class=\"n\">MUTATION</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n  <span class=\"k\">WHERE</span> <span class=\"o\">&lt;</span><span class=\"k\">where</span> <span class=\"n\">expression</span> <span class=\"k\">to</span> <span class=\"k\">SELECT</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">mutations</span> <span class=\"n\">query</span><span class=\"o\">&gt;</span>\n  <span class=\"p\">[</span><span class=\"n\">TEST</span><span class=\"p\">]</span>\n  <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Tries to cancel and remove <a href=\"#alter-mutations\">mutations</a> that are currently executing. Mutations to cancel are selected from the <a href=\"#system_tables-mutations\"><code>system.mutations</code></a> table using the filter specified by the <code>WHERE</code> clause of the <code>KILL</code> query.</p>\n<p>A test query (<code>TEST</code>) only checks the user's rights and displays a list of queries to stop.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- Cancel and remove all mutations of the single table:</span>\n<span class=\"n\">KILL</span> <span class=\"n\">MUTATION</span> <span class=\"k\">WHERE</span> <span class=\"k\">database</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;default&#39;</span> <span class=\"k\">AND</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;table&#39;</span>\n\n<span class=\"c1\">-- Cancel the specific mutation:</span>\n<span class=\"n\">KILL</span> <span class=\"n\">MUTATION</span> <span class=\"k\">WHERE</span> <span class=\"k\">database</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;default&#39;</span> <span class=\"k\">AND</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;table&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">mutation_id</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;mutation_3.txt&#39;</span>\n</code></pre></div>\n\n\n<p>The query is useful when a mutation is stuck and cannot finish (e.g. if some function in the mutation query throws an exception when applied to the data contained in the table).</p>\n<p>Changes already made by the mutation are not rolled back.</p>\n<h3 id=\"misc_operations-optimize\">OPTIMIZE<a class=\"headerlink\" href=\"#misc_operations-optimize\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">OPTIMIZE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"n\">partition</span> <span class=\"o\">|</span> <span class=\"n\">PARTITION</span> <span class=\"n\">ID</span> <span class=\"s1\">&#39;partition_id&#39;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">FINAL</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This query tries to initialize an unscheduled merge of data parts for tables with a table engine from the <a href=\"#../operations/table_engines/mergetree/\">MergeTree</a> family. Other kinds of table engines aren't supported.</p>\n<p>When <code>OPTIMIZE</code> is used with the <a href=\"#../operations/table_engines/replication/\">ReplicatedMergeTree</a> family of table engines, ClickHouse creates a task for merging and waits for execution on all nodes (if the <code>replication_alter_partitions_sync</code> setting is enabled).</p>\n<ul>\n<li>If <code>OPTIMIZE</code> doesn't perform a merge for any reason, it doesn't notify the client. To enable notifications, use the <a href=\"#setting-optimize_throw_if_noop\">optimize_throw_if_noop</a> setting.</li>\n<li>If you specify a <code>PARTITION</code>, only the specified partition is optimized. <a href=\"#alter-how-to-specify-part-expr\">How to set partition expression</a>.</li>\n<li>If you specify <code>FINAL</code>, optimization is performed even when all the data is already in one part.</li>\n</ul>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p><code>OPTIMIZE</code> can't fix the \"Too many parts\" error.</p>\n</div>\n<h3 id=\"misc_operations-rename\">RENAME<a class=\"headerlink\" href=\"#misc_operations-rename\" title=\"Permanent link\">&para;</a></h3>\n<p>Renames one or more tables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">RENAME</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db11</span><span class=\"p\">.]</span><span class=\"n\">name11</span> <span class=\"k\">TO</span> <span class=\"p\">[</span><span class=\"n\">db12</span><span class=\"p\">.]</span><span class=\"n\">name12</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">db21</span><span class=\"p\">.]</span><spa");
            
            document.write("n class=\"n\">name21</span> <span class=\"k\">TO</span> <span class=\"p\">[</span><span class=\"n\">db22</span><span class=\"p\">.]</span><span class=\"n\">name22</span><span class=\"p\">,</span> <span class=\"p\">...</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>All tables are renamed under global locking. Renaming tables is a light operation. If you indicated another database after TO, the table will be moved to this database. However, the directories with databases must reside in the same file system (otherwise, an error is returned).</p>\n<h3 id=\"query-set\">SET<a class=\"headerlink\" href=\"#query-set\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">param</span> <span class=\"o\">=</span> <span class=\"n\">value</span>\n</code></pre></div>\n\n\n<p>Assigns <code>value</code> to the <code>param</code> <a href=\"#../operations/settings/\">setting</a> for the current session. You cannot change <a href=\"#../operations/server_settings/\">server settings</a> this way.</p>\n<p>You can also set all the values from the specified settings profile in a single query.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">profile</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;profile-name-from-the-settings-file&#39;</span>\n</code></pre></div>\n\n\n<p>For more information, see <a href=\"#../operations/settings/settings/\">Settings</a>.</p>\n<h3 id=\"truncate\">TRUNCATE<a class=\"headerlink\" href=\"#truncate\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">TRUNCATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Removes all data from a table. When the clause <code>IF EXISTS</code> is omitted, the query returns an error if the table does not exist.</p>\n<p>The <code>TRUNCATE</code> query is not supported for <a href=\"#../operations/table_engines/view/\">View</a>, <a href=\"#../operations/table_engines/file/\">File</a>, <a href=\"#../operations/table_engines/url/\">URL</a> and <a href=\"#../operations/table_engines/null/\">Null</a> table engines.</p>\n<h3 id=\"use\">USE<a class=\"headerlink\" href=\"#use\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">USE</span> <span class=\"n\">db</span>\n</code></pre></div>\n\n\n<p>Lets you set the current database for the session.<br />\nThe current database is used for searching for tables if the database is not explicitly defined in the query with a dot before the table name.<br />\nThis query can't be made when using the HTTP protocol, since there is no concept of a session.</p>\n<p><a name=\"../../../../../query_language/functions/\"></a><a name=\"../../query_language/functions/\"></a><a name=\"../../../../query_language/functions/\"></a><a name=\"query_language/functions/\"></a><a name=\"../query_language/functions/\"></a><a name=\"../../../query_language/functions/\"></a><a name=\"functions/\"></a></p>\n<h2 id=\"han-shu\">\u51fd\u6570<a class=\"headerlink\" href=\"#han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse\u4e2d\u81f3\u5c11\u5b58\u5728\u4e24\u79cd\u7c7b\u578b\u7684\u51fd\u6570 - \u5e38\u89c4\u51fd\u6570\uff08\u5b83\u4eec\u79f0\u4e4b\u4e3a\u201c\u51fd\u6570\u201d\uff09\u548c\u805a\u5408\u51fd\u6570\u3002 \u5e38\u89c4\u51fd\u6570\u7684\u5de5\u4f5c\u5c31\u50cf\u5206\u522b\u4e3a\u6bcf\u4e00\u884c\u6267\u884c\u4e00\u6b21\u51fd\u6570\u8ba1\u7b97\u4e00\u6837\uff08\u5bf9\u4e8e\u6bcf\u4e00\u884c\uff0c\u51fd\u6570\u7684\u7ed3\u679c\u4e0d\u4f9d\u8d56\u4e8e\u5176\u4ed6\u884c\uff09\u3002 \u805a\u5408\u51fd\u6570\u5219\u4ece\u5404\u884c\u7d2f\u79ef\u4e00\u7ec4\u503c\uff08\u5373\u51fd\u6570\u7684\u7ed3\u679c\u4ee5\u6765\u6574\u4e2a\u7ed3\u679c\u96c6\uff09\u3002</p>\n<p>\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u5e38\u89c4\u51fd\u6570\u3002 \u6709\u5173\u805a\u5408\u51fd\u6570\uff0c\u8bf7\u53c2\u9605\u201c\u805a\u5408\u51fd\u6570\u201d\u4e00\u8282\u3002</p>\n<p>\\ *  - 'arrayJoin'\u51fd\u6570\u4e0e\u8868\u51fd\u6570\u5747\u5c5e\u4e8e\u7b2c\u4e09\u79cd\u7c7b\u578b\u7684\u51fd\u6570\u3002\\ *</p>\n<h3 id=\"qiang-lei-xing\">\u5f3a\u7c7b\u578b<a class=\"headerlink\" href=\"#qiang-lei-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e\u6807\u51c6SQL\u76f8\u6bd4\uff0cClickHouse\u5177\u6709\u5f3a\u7c7b\u578b\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u5b83\u4e0d\u4f1a\u5728\u7c7b\u578b\u4e4b\u95f4\u8fdb\u884c\u9690\u5f0f\u8f6c\u6362\u3002 \u6bcf\u4e2a\u51fd\u6570\u9002\u7528\u4e8e\u7279\u5b9a\u7684\u4e00\u7ec4\u7c7b\u578b\u3002 \u8fd9\u610f\u5473\u7740\u6709\u65f6\u60a8\u9700\u8981\u4f7f\u7528\u7c7b\u578b\u8f6c\u6362\u51fd\u6570\u3002</p>\n<h3 id=\"chang-jian-de-zi-biao-da-shi-xiao-chu\">\u5e38\u89c1\u7684\u5b50\u8868\u8fbe\u5f0f\u6d88\u9664<a class=\"headerlink\" href=\"#chang-jian-de-zi-biao-da-shi-xiao-chu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u67e5\u8be2\u4e2d\u5177\u6709\u76f8\u540cAST\uff08\u76f8\u540c\u8bed\u53e5\u6216\u8bed\u6cd5\u5206\u6790\u7ed3\u679c\u76f8\u540c\uff09\u7684\u6240\u6709\u8868\u8fbe\u5f0f\u90fd\u88ab\u89c6\u4e3a\u5177\u6709\u76f8\u540c\u7684\u503c\u3002 \u8fd9\u6837\u7684\u8868\u8fbe\u5f0f\u88ab\u8fde\u63a5\u5e76\u6267\u884c\u4e00\u6b21\u3002 \u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u53ef\u4ee5\u6d88\u9664\u76f8\u540c\u7684\u5b50\u67e5\u8be2\u3002</p>\n<h3 id=\"jie-guo-lei-xing\">\u7ed3\u679c\u7c7b\u578b<a class=\"headerlink\" href=\"#jie-guo-lei-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6240\u6709\u51fd\u6570\u90fd\u53ea\u80fd\u591f\u8fd4\u56de\u4e00\u4e2a\u8fd4\u56de\u503c\u3002 \u7ed3\u679c\u7c7b\u578b\u901a\u5e38\u7531\u53c2\u6570\u7684\u7c7b\u578b\u51b3\u5b9a\u3002 \u4f46tupleElement\u51fd\u6570\uff08a.N\u8fd0\u7b97\u7b26\uff09\u548ctoFixedString\u51fd\u6570\u662f\u4f8b\u5916\u7684\u3002</p>\n<h3 id=\"chang-liang\">\u5e38\u91cf<a class=\"headerlink\" href=\"#chang-liang\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u67d0\u4e9b\u51fd\u6570\u7684\u67d0\u4e9b\u53c2\u6570\u53ea\u80fd\u662f\u5e38\u91cf\u3002 \u4f8b\u5982\uff0cLIKE\u8fd0\u7b97\u7b26\u7684\u53f3\u53c2\u6570\u5fc5\u987b\u662f\u5e38\u91cf\u3002<br />\n\u51e0\u4e4e\u6240\u6709\u51fd\u6570\u90fd\u4e3a\u5e38\u91cf\u53c2\u6570\u8fd4\u56de\u5e38\u91cf\u3002 \u9664\u4e86\u7528\u4e8e\u751f\u6210\u968f\u673a\u6570\u7684\u51fd\u6570\u3002<br />\n'now'\u51fd\u6570\u4e3a\u5728\u4e0d\u540c\u65f6\u95f4\u8fd0\u884c\u7684\u67e5\u8be2\u8fd4\u56de\u4e0d\u540c\u7684\u503c\uff0c\u4f46\u7ed3\u679c\u88ab\u89c6\u4e3a\u5e38\u91cf\uff0c\u56e0\u4e3a\u5e38\u91cf\u5728\u5355\u4e2a\u67e5\u8be2\u4e2d\u5f88\u91cd\u8981\u3002<br />\n\u5e38\u91cf\u8868\u8fbe\u5f0f\u4e5f\u88ab\u89c6\u4e3a\u5e38\u91cf\uff08\u4f8b\u5982\uff0cLIKE\u8fd0\u7b97\u7b26\u7684\u53f3\u534a\u90e8\u5206\u53ef\u4ee5\u7531\u591a\u4e2a\u5e38\u91cf\u6784\u9020\uff09\u3002</p>\n<p>\u5bf9\u4e8e\u5e38\u91cf\u548c\u975e\u5e38\u91cf\u53c2\u6570\uff0c\u53ef\u4ee5\u4ee5\u4e0d\u540c\u65b9\u5f0f\u5b9e\u73b0\u51fd\u6570\uff08\u6267\u884c\u4e0d\u540c\u7684\u4ee3\u7801\uff09\u3002 \u4f46\u662f\uff0c\u5bf9\u4e8e\u5305\u542b\u76f8\u540c\u6570\u636e\u7684\u5e38\u91cf\u548c\u975e\u5e38\u91cf\u53c2\u6570\u5b83\u4eec\u7684\u7ed3\u679c\u5e94\u8be5\u662f\u4e00\u81f4\u7684\u3002</p>\n<h3 id=\"nullzhi-chu-li\">NULL\u503c\u5904\u7406<a class=\"headerlink\" href=\"#nullzhi-chu-li\" title=\"Permanent link\">&para;</a></h3>\n<p>\u51fd\u6570\u5177\u6709\u4ee5\u4e0b\u884c\u4e3a\uff1a</p>\n<ul>\n<li>\u5982\u679c\u51fd\u6570\u7684\u53c2\u6570\u81f3\u5c11\u4e00\u4e2a\u662f\u201cNULL\u201d\uff0c\u5219\u51fd\u6570\u7ed3\u679c\u4e5f\u662f\u201cNULL\u201d\u3002</li>\n<li>\u5728\u6bcf\u4e2a\u51fd\u6570\u7684\u63cf\u8ff0\u4e2d\u5355\u72ec\u6307\u5b9a\u7684\u7279\u6b8a\u884c\u4e3a\u3002\u5728ClickHouse\u6e90\u4ee3\u7801\u4e2d\uff0c\u8fd9\u4e9b\u51fd\u6570\u5177\u6709\u201cUseDefaultImplementationForNulls = false\u201d\u3002</li>\n</ul>\n<h3 id=\"bu-ke-bian-xing\">\u4e0d\u53ef\u53d8\u6027<a class=\"headerlink\" href=\"#bu-ke-bian-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u51fd\u6570\u4e0d\u80fd\u66f4\u6539\u5176\u53c2\u6570\u7684\u503c - \u4efb\u4f55\u66f4\u6539\u90fd\u5c06\u4f5c\u4e3a\u7ed3\u679c\u8fd4\u56de\u3002\u56e0\u6b64\uff0c\u8ba1\u7b97\u5355\u72ec\u51fd\u6570\u7684\u7ed3\u679c\u4e0d\u4f9d\u8d56\u4e8e\u5728\u67e5\u8be2\u4e2d\u5199\u5165\u51fd\u6570\u7684\u987a\u5e8f\u3002</p>\n<h3 id=\"cuo-wu-chu-li\">\u9519\u8bef\u5904\u7406<a class=\"headerlink\" href=\"#cuo-wu-chu-li\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u6570\u636e\u65e0\u6548\uff0c\u67d0\u4e9b\u51fd\u6570\u53ef\u80fd\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c06\u53d6\u6d88\u67e5\u8be2\u5e76\u5c06\u9519\u8bef\u4fe1\u606f\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\u5bf9\u4e8e\u5206\u5e03\u5f0f\u5904\u7406\uff0c\u5f53\u5176\u4e2d\u4e00\u4e2a\u670d\u52a1\u5668\u53d1\u751f\u5f02\u5e38\u65f6\uff0c\u5176\u4ed6\u670d\u52a1\u5668\u4e5f\u4f1a\u5c1d\u8bd5\u4e2d\u6b62\u67e5\u8be2\u3002</p>\n<h3 id=\"biao-da-shi-can-shu-de-ji-suan\">\u8868\u8fbe\u5f0f\u53c2\u6570\u7684\u8ba1\u7b97<a class=\"headerlink\" href=\"#biao-da-shi-can-shu-de-ji-suan\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u51e0\u4e4e\u6240\u6709\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u67d0\u4e9b\u51fd\u6570\u53ef\u80fd\u65e0\u6cd5\u9884\u5148\u8ba1\u7b97\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u3002\u8fd9\u901a\u5e38\u662f\u8fd0\u7b97\u7b26<code>&amp;&amp;</code>\uff0c<code>||</code>\u548c<code>? :</code>\u3002<br />\n\u4f46\u662f\u5728ClickHouse\u4e2d\uff0c\u51fd\u6570\uff08\u8fd0\u7b97\u7b26\uff09\u7684\u53c2\u6570\u603b\u662f\u88ab\u9884\u5148\u8ba1\u7b97\u3002\u8fd9\u662f\u56e0\u4e3a\u4e00\u6b21\u8bc4\u4f30\u5217\u7684\u6574\u4e2a\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u5206\u522b\u8ba1\u7b97\u6bcf\u4e00\u884c\u3002</p>\n<h3 id=\"zhi-xing-fen-bu-shi-cha-xun-chu-li-de-gong-neng\">\u6267\u884c\u5206\u5e03\u5f0f\u67e5\u8be2\u5904\u7406\u7684\u529f\u80fd<a class=\"headerlink\" href=\"#zhi-xing-fen-bu-shi-cha-xun-chu-li-de-gong-neng\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9\u4e8e\u5206\u5e03\u5f0f\u67e5\u8be2\u5904\u7406\uff0c\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u5c3d\u53ef\u80fd\u591a\u7684\u67e5\u8be2\u5904\u7406\u9636\u6bb5\uff0c\u5e76\u4e14\u5728\u8bf7\u6c42\u8005\u670d\u52a1\u5668\u4e0a\u6267\u884c\u5176\u4f59\u9636\u6bb5\uff08\u5408\u5e76\u4e2d\u95f4\u7ed3\u679c\u548c\u4e4b\u540e\u7684\u6240\u6709\u5185\u5bb9\uff09\u3002</p>\n<p>\u8fd9\u610f\u5473\u7740\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\u529f\u80fd\u3002<br />\n\u4f8b\u5982\uff0c\u5728\u67e5\u8be2<code>SELECT f\uff08sum\uff08g\uff08x\uff09\uff09\uff09FROM distributed_table GROUP BY h\uff08y\uff09\u4e2d\uff0c</code></p>\n<ul>\n<li>\u5982\u679c<code>distributed_table</code>\u81f3\u5c11\u6709\u4e24\u4e2a\u5206\u7247\uff0c\u5219\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u51fd\u6570'g'\u548c'h'\uff0c\u5e76\u5728\u8bf7\u6c42\u670d\u52a1\u5668\u4e0a\u6267\u884c\u51fd\u6570'f'\u3002</li>\n<li>\u5982\u679c<code>distributed_table</code>\u53ea\u6709\u4e00\u4e2a\u5206\u7247\uff0c\u5219\u5728\u8be5\u5206\u7247\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\u6240\u6709'f'\uff0c'g'\u548c'h'\u529f\u80fd\u3002</li>\n</ul>\n<p>\u51fd\u6570\u7684\u7ed3\u679c\u901a\u5e38\u4e0d\u4f9d\u8d56\u4e8e\u5b83\u5728\u54ea\u4e2a\u670d\u52a1\u5668\u4e0a\u6267\u884c\u3002\u4f46\u662f\uff0c\u6709\u65f6\u8fd9\u5f88\u91cd\u8981\u3002<br />\n\u4f8b\u5982\uff0c\u4f7f\u7528\u5b57\u5178\u7684\u51fd\u6570\u65f6\u5c06\u4f7f\u7528\u8fd0\u884c\u5b83\u4eec\u7684\u670d\u52a1\u5668\u4e0a\u5b58\u5728\u7684\u5b57\u5178\u3002<br />\n\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f<code>hostName</code>\u51fd\u6570\uff0c\u5b83\u8fd4\u56de\u8fd0\u884c\u5b83\u7684\u670d\u52a1\u5668\u7684\u540d\u79f0\uff0c\u4ee5\u4fbf\u5728<code>SELECT</code>\u67e5\u8be2\u4e2d\u5bf9\u670d\u52a1\u5668\u8fdb\u884c<code>GROUP BY</code>\u3002</p>\n<p>\u5982\u679c\u67e5\u8be2\u4e2d\u7684\u51fd\u6570\u5728\u8bf7\u6c42\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff0c\u4f46\u60a8\u9700\u8981\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u5b83\uff0c\u5219\u53ef\u4ee5\u5c06\u5176\u5305\u88c5\u5728\u201cany\u201d\u805a\u5408\u51fd\u6570\u4e2d\uff0c\u6216\u5c06\u5176\u6dfb\u52a0\u5230\u201cGROUP BY\u201d\u4e2d\u3002</p>\n<p><a name=\"../../../../functions/arithmetic_functions/\"></a><a name=\"arithmetic_functions/\"></a><a name=\"../../../query_language/functions/arithmetic_functions/\"></a><a name=\"query_language/functions/arithmetic_functions/\"></a><a name=\"../../functions/arithmetic_functions/\"></a><a name=\"functions/arithmetic_functions/\"></a><a name=\"../functions/arithmetic_functions/\"></a><a name=\"../../../../../query_language/functions/arithmetic_functions/\"></a><a name=\"../../../../query_language/functions/arithmetic_functions/\"></a><a name=\"../../../../../functions/arithmetic_functions/\"></a><a name=\"../../../functions/arithmetic_functions/\"></a><a name=\"../../query_language/functions/arithmetic_functions/\"></a><a name=\"../../../../../../functions/arithmetic_functions/\"></a><a name=\"../query_language/functions/arithmetic_functions/\"></a></p>\n<h2 id=\"suan-zhu-han-shu\">\u7b97\u672f\u51fd\u6570<a class=\"headerlink\" href=\"#suan-zhu-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u5bf9\u4e8e\u6240\u6709\u7b97\u672f\u51fd\u6570\uff0c\u7ed3\u679c\u7c7b\u578b\u4e3a\u7ed3\u679c\u9002\u5408\u7684\u6700\u5c0f\u6570\u5b57\u7c7b\u578b\uff08\u5982\u679c\u5b58\u5728\u8fd9\u6837\u7684\u7c7b\u578b\uff09\u3002\u6700\u5c0f\u6570\u5b57\u7c7b\u578b\u662f\u6839\u636e\u6570\u5b57\u7684\u4f4d\u6570\uff0c\u662f\u5426\u6709\u7b26\u53f7\u4ee5\u53ca\u662f\u5426\u662f\u6d6e\u70b9\u7c7b\u578b\u800c\u540c\u65f6\u8fdb\u884c\u7684\u3002\u5982\u679c\u6ca1\u6709\u8db3\u591f\u7684\u4f4d\uff0c\u5219\u91c7\u7528\u6700\u9ad8\u4f4d\u7c7b\u578b\u3002</p>\n<p>\u4f8b\u5982:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(0)\u2500\u252c\u2500toTypeName(plus(0, 0))\u2500\u252c\u2500toTypeName(plus(plus(0, 0), 0))\u2500\u252c\u2500toTypeName(plus(plus(plus(0, 0), 0), 0))\u2500\u2510</span>\n<span class=\"err\">\u2502 UInt8         \u2502 UInt16                 \u2502 UInt32                          \u2502 UInt64                                   \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u7b97\u672f\u51fd\u6570\u9002\u7528\u4e8eUInt8\uff0cUInt16\uff0cUInt32\uff0cUInt64\uff0cInt8\uff0cInt16\uff0cInt32\uff0cInt64\uff0cFloat32\u6216Float64\u4e2d\u7684\u4efb\u4f55\u7c7b\u578b\u3002</p>\n<p>\u6ea2\u51fa\u7684\u4ea7\u751f\u65b9\u5f0f\u4e0eC++\u76f8\u540c\u3002</p>\n<h3 id=\"plus-a-b-a-b\">plus(a, b), a + b<a class=\"headerlink\" href=\"#plus-a-b-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u6570\u5b57\u7684\u603b\u548c\u3002<br />\n\u60a8\u8fd8\u53ef\u4ee5\u5c06Date\u6216DateTime\u4e0e\u6574\u6570\u8fdb\u884c\u76f8\u52a0\u3002\u5728Date\u7684\u60c5\u51b5\u4e0b\uff0c\u6dfb\u52a0\u7684\u6574\u6570\u610f\u5473\u7740\u6dfb\u52a0\u76f8\u5e94\u7684\u5929\u6570\u3002\u5bf9\u4e8eDateTime\uff0c\u8fd9\u610f\u5473\u8fd9\u6dfb\u52a0\u76f8\u5e94\u7684\u63cf\u8ff0\u3002</p>\n<h3 id=\"minus-a-b-a-b\">minus(a, b), a - b<a class=\"headerlink\" href=\"#minus-a-b-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u6570\u5b57\u4e4b\u95f4\u7684\u5dee\uff0c\u7ed3\u679c\u603b\u662f\u6709\u7b26\u53f7\u7684\u3002</p>\n<p>\u60a8\u8fd8\u53ef\u4ee5\u5c06Date\u6216DateTime\u4e0e\u6574\u6570\u8fdb\u884c\u76f8\u51cf\u3002\u89c1\u4e0a\u9762\u7684'plus'\u3002</p>\n<h3 id=\"multiply-a-b-a-b\">multiply(a, b), a * b<a class=\"headerlink\" href=\"#multiply-a-b-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u6570\u5b57\u7684\u4e58\u79ef\u3002</p>\n<h3 id=\"divide-a-b-a-b\">divide(a, b), a / b<a class=\"headerlink\" href=\"#divide-a-b-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u6570\u5b57\u7684\u5546\u3002\u7ed3\u679c\u7c7b\u578b\u59cb\u7ec8\u662f\u6d6e\u70b9\u7c7b\u578b\u3002<br />\n\u5b83\u4e0d\u662f\u6574\u6570\u9664\u6cd5\u3002\u5bf9\u4e8e\u6574\u6570\u9664\u6cd5\uff0c\u8bf7\u4f7f\u7528'intDiv'\u51fd\u6570\u3002<br />\n\u5f53\u9664\u4ee5\u96f6\u65f6\uff0c\u4f60\u5f97\u5230'inf'\uff0c'- inf'\u6216'nan'\u3002</p>\n<h3 id=\"intdiv-a-b\">intDiv(a, b)<a class=\"headerlink\" href=\"#intdiv-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u6574\u6570\u6570\u5b57\u7684\u5546\uff0c\u5411\u4e0b\u820d\u5165\uff08\u6309\u7edd\u5bf9\u503c\uff09\u3002<br />\n\u9664\u4ee5\u96f6\u6216\u5c06\u6700\u5c0f\u8d1f\u6570\u9664\u4ee5-1\u65f6\u629b\u51fa\u5f02\u5e38\u3002</p>\n<h3 id=\"intdivorzero-a-b\">intDivOrZero(a, b)<a class=\"headerlink\" href=\"#intdivorzero-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e'intDiv'\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u5b83\u5728\u9664\u4ee5\u96f6\u6216\u5c06\u6700\u5c0f\u8d1f\u6570\u9664\u4ee5-1\u65f6\u8fd4\u56de\u96f6\u3002</p>\n<h3 id=\"modulo-a-b-a-b\">modulo(a, b), a % b<a class=\"headerlink\" href=\"");
            
            document.write("#modulo-a-b-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u9664\u6cd5\u540e\u7684\u4f59\u6570\u3002<br />\n\u5982\u679c\u53c2\u6570\u662f\u6d6e\u70b9\u6570\uff0c\u5219\u901a\u8fc7\u5220\u9664\u5c0f\u6570\u90e8\u5206\u5c06\u5b83\u4eec\u9884\u8f6c\u6362\u4e3a\u6574\u6570\u3002<br />\n\u5176\u4f59\u90e8\u5206\u4e0eC++\u4e2d\u7684\u542b\u4e49\u76f8\u540c\u3002\u622a\u65ad\u9664\u6cd5\u7528\u4e8e\u8d1f\u6570\u3002<br />\n\u9664\u4ee5\u96f6\u6216\u5c06\u6700\u5c0f\u8d1f\u6570\u9664\u4ee5-1\u65f6\u629b\u51fa\u5f02\u5e38\u3002</p>\n<h3 id=\"negate-a-a\">negate(a), -a<a class=\"headerlink\" href=\"#negate-a-a\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u4e00\u4e2a\u6570\u5b57\u7684<br />\n\u7528\u53cd\u8f6c\u7b26\u53f7\u8ba1\u7b97\u4e00\u4e2a\u6570\u5b57\u3002\u7ed3\u679c\u59cb\u7ec8\u662f\u7b7e\u540d\u7684\u3002<br />\nCalculates a number with the reverse sign. The result is always signed.</p>\n<h3 id=\"arithm_func-abs\">abs(a)<a class=\"headerlink\" href=\"#arithm_func-abs\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u6570\u5b57\uff08a\uff09\u7684\u7edd\u5bf9\u503c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679ca \uff06lt; 0\uff0c\u5b83\u8fd4\u56de-a\u3002\u5bf9\u4e8e\u65e0\u7b26\u53f7\u7c7b\u578b\uff0c\u5b83\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u5bf9\u4e8e\u6709\u7b26\u53f7\u6574\u6570\u7c7b\u578b\uff0c\u5b83\u8fd4\u56de\u65e0\u7b26\u53f7\u6570\u3002</p>\n<h3 id=\"gcd-a-b\">gcd(a, b)<a class=\"headerlink\" href=\"#gcd-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u6570\u5b57\u7684\u6700\u5927\u516c\u7ea6\u6570\u3002<br />\n\u9664\u4ee5\u96f6\u6216\u5c06\u6700\u5c0f\u8d1f\u6570\u9664\u4ee5-1\u65f6\u629b\u51fa\u5f02\u5e38\u3002</p>\n<h3 id=\"lcm-a-b\">lcm(a, b)<a class=\"headerlink\" href=\"#lcm-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u6570\u5b57\u7684\u6700\u5c0f\u516c\u500d\u6570\u3002<br />\n\u9664\u4ee5\u96f6\u6216\u5c06\u6700\u5c0f\u8d1f\u6570\u9664\u4ee5-1\u65f6\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p><a name=\"../../../functions/comparison_functions/\"></a><a name=\"../../query_language/functions/comparison_functions/\"></a><a name=\"comparison_functions/\"></a><a name=\"../../../query_language/functions/comparison_functions/\"></a><a name=\"../../../../../functions/comparison_functions/\"></a><a name=\"../functions/comparison_functions/\"></a><a name=\"../../functions/comparison_functions/\"></a><a name=\"../query_language/functions/comparison_functions/\"></a><a name=\"query_language/functions/comparison_functions/\"></a><a name=\"functions/comparison_functions/\"></a><a name=\"../../../../../../functions/comparison_functions/\"></a><a name=\"../../../../../query_language/functions/comparison_functions/\"></a><a name=\"../../../../functions/comparison_functions/\"></a><a name=\"../../../../query_language/functions/comparison_functions/\"></a></p>\n<h2 id=\"bi-jiao-han-shu\">\u6bd4\u8f83\u51fd\u6570<a class=\"headerlink\" href=\"#bi-jiao-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6bd4\u8f83\u51fd\u6570\u59cb\u7ec8\u8fd4\u56de0\u62161\uff08UInt8\uff09\u3002</p>\n<p>\u53ef\u4ee5\u6bd4\u8f83\u4ee5\u4e0b\u7c7b\u578b\uff1a</p>\n<ul>\n<li>Numbers</li>\n<li>String \u548c FixedString</li>\n<li>Date</li>\n<li>DateTime</li>\n</ul>\n<p>\u4ee5\u4e0a\u6bcf\u4e2a\u7ec4\u5185\u7684\u7c7b\u578b\u5747\u53ef\u4e92\u76f8\u6bd4\u8f83\uff0c\u4f46\u662f\u5bf9\u4e8e\u4e0d\u540c\u7ec4\u7684\u7c7b\u578b\u95f4\u4e0d\u80fd\u591f\u8fdb\u884c\u6bd4\u8f83\u3002</p>\n<p>\u4f8b\u5982\uff0c\u60a8\u65e0\u6cd5\u5c06\u65e5\u671f\u4e0e\u5b57\u7b26\u4e32\u8fdb\u884c\u6bd4\u8f83\u3002\u60a8\u5fc5\u987b\u4f7f\u7528\u51fd\u6570\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u65e5\u671f\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p>\n<p>\u5b57\u7b26\u4e32\u6309\u5b57\u8282\u8fdb\u884c\u6bd4\u8f83\u3002\u8f83\u77ed\u7684\u5b57\u7b26\u4e32\u5c0f\u4e8e\u4ee5\u5176\u5f00\u5934\u5e76\u4e14\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u5b57\u7b26\u7684\u6240\u6709\u5b57\u7b26\u4e32\u3002</p>\n<p>\u6ce8\u610f\u3002\u76f4\u52301.1.54134\u7248\u672c\uff0c\u6709\u7b26\u53f7\u548c\u65e0\u7b26\u53f7\u6570\u5b57\u7684\u6bd4\u8f83\u65b9\u5f0f\u4e0eC++\u76f8\u540c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5728SELECT 9223372036854775807 \uff06gt; -1 \u7b49\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u80fd\u4f1a\u5f97\u5230\u9519\u8bef\u7684\u7ed3\u679c\u3002 \u6b64\u884c\u4e3a\u5728\u7248\u672c1.1.54134\u4e2d\u5df2\u66f4\u6539\uff0c\u73b0\u5728\u5728\u6570\u5b66\u4e0a\u662f\u6b63\u786e\u7684\u3002</p>\n<h3 id=\"equals-a-b-and-a-b-operator\">equals, a = b and a == b operator<a class=\"headerlink\" href=\"#equals-a-b-and-a-b-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"notequals-a-operator-b-and-a-b\">notEquals, a ! operator= b and a <code>&lt;&gt;</code> b<a class=\"headerlink\" href=\"#notequals-a-operator-b-and-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"less-operator\">less, <code>&lt; operator</code><a class=\"headerlink\" href=\"#less-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"greater-operator\">greater, <code>&gt; operator</code><a class=\"headerlink\" href=\"#greater-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"lessorequals-operator\">lessOrEquals, <code>&lt;= operator</code><a class=\"headerlink\" href=\"#lessorequals-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"greaterorequals-operator\">greaterOrEquals, <code>&gt;= operator</code><a class=\"headerlink\" href=\"#greaterorequals-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><a name=\"../functions/logical_functions/\"></a><a name=\"query_language/functions/logical_functions/\"></a><a name=\"../../../query_language/functions/logical_functions/\"></a><a name=\"../../query_language/functions/logical_functions/\"></a><a name=\"../../../../query_language/functions/logical_functions/\"></a><a name=\"../../../../functions/logical_functions/\"></a><a name=\"functions/logical_functions/\"></a><a name=\"../../../../../query_language/functions/logical_functions/\"></a><a name=\"../../functions/logical_functions/\"></a><a name=\"../../../../../functions/logical_functions/\"></a><a name=\"../query_language/functions/logical_functions/\"></a><a name=\"../../../functions/logical_functions/\"></a><a name=\"../../../../../../functions/logical_functions/\"></a><a name=\"logical_functions/\"></a></p>\n<h2 id=\"luo-ji-han-shu\">\u903b\u8f91\u51fd\u6570<a class=\"headerlink\" href=\"#luo-ji-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u903b\u8f91\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4efb\u4f55\u6570\u5b57\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5e76\u8fd4\u56deUInt8\u7c7b\u578b\u76840\u62161\u3002</p>\n<p>\u5f53\u5411\u51fd\u6570\u4f20\u9012\u96f6\u65f6\uff0c\u51fd\u6570\u5c06\u5224\u5b9a\u4e3a\u201cfalse\u201d\uff0c\u5426\u5219\uff0c\u4efb\u4f55\u5176\u4ed6\u975e\u96f6\u7684\u503c\u90fd\u5c06\u88ab\u5224\u5b9a\u4e3a\u201ctrue\u201d\u3002</p>\n<h3 id=\"and-and-operator\">and, AND operator<a class=\"headerlink\" href=\"#and-and-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"or-or-operator\">or, OR operator<a class=\"headerlink\" href=\"#or-or-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"not-not-operator\">not, NOT operator<a class=\"headerlink\" href=\"#not-not-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"xor\">xor<a class=\"headerlink\" href=\"#xor\" title=\"Permanent link\">&para;</a></h3>\n<p><a name=\"../../../../query_language/functions/type_conversion_functions/\"></a><a name=\"../../functions/type_conversion_functions/\"></a><a name=\"functions/type_conversion_functions/\"></a><a name=\"../../../functions/type_conversion_functions/\"></a><a name=\"../../query_language/functions/type_conversion_functions/\"></a><a name=\"query_language/functions/type_conversion_functions/\"></a><a name=\"../../../../../../functions/type_conversion_functions/\"></a><a name=\"type_conversion_functions/\"></a><a name=\"../../../../../query_language/functions/type_conversion_functions/\"></a><a name=\"../query_language/functions/type_conversion_functions/\"></a><a name=\"../../../../functions/type_conversion_functions/\"></a><a name=\"../../../../../functions/type_conversion_functions/\"></a><a name=\"../functions/type_conversion_functions/\"></a><a name=\"../../../query_language/functions/type_conversion_functions/\"></a></p>\n<h2 id=\"lei-xing-zhuan-huan-han-shu\">\u7c7b\u578b\u8f6c\u6362\u51fd\u6570<a class=\"headerlink\" href=\"#lei-xing-zhuan-huan-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"touint8-touint16-touint32-touint64\">toUInt8, toUInt16, toUInt32, toUInt64<a class=\"headerlink\" href=\"#touint8-touint16-touint32-touint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"toint8-toint16-toint32-toint64\">toInt8, toInt16, toInt32, toInt64<a class=\"headerlink\" href=\"#toint8-toint16-toint32-toint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"tofloat32-tofloat64\">toFloat32, toFloat64<a class=\"headerlink\" href=\"#tofloat32-tofloat64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"todate-todatetime\">toDate, toDateTime<a class=\"headerlink\" href=\"#todate-todatetime\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"touint8orzero-touint16orzero-touint32orzero-touint64orzero-toint8orzero-toint16orzero-toint32orzero-toint64orzero-tofloat32orzero-tofloat64orzero-todateorzero-todatetimeorzero\">toUInt8OrZero, toUInt16OrZero, toUInt32OrZero, toUInt64OrZero, toInt8OrZero, toInt16OrZero, toInt32OrZero, toInt64OrZero, toFloat32OrZero, toFloat64OrZero, toDateOrZero, toDateTimeOrZero<a class=\"headerlink\" href=\"#touint8orzero-touint16orzero-touint32orzero-touint64orzero-toint8orzero-toint16orzero-toint32orzero-toint64orzero-tofloat32orzero-tofloat64orzero-todateorzero-todatetimeorzero\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"touint8ornull-touint16ornull-touint32ornull-touint64ornull-toint8ornull-toint16ornull-toint32ornull-toint64ornull-tofloat32ornull-tofloat64ornull-todateornull-todatetimeornull\">toUInt8OrNull, toUInt16OrNull, toUInt32OrNull, toUInt64OrNull, toInt8OrNull, toInt16OrNull, toInt32OrNull, toInt64OrNull, toFloat32OrNull, toFloat64OrNull, toDateOrNull, toDateTimeOrNull<a class=\"headerlink\" href=\"#touint8ornull-touint16ornull-touint32ornull-touint64ornull-toint8ornull-toint16ornull-toint32ornull-toint64ornull-tofloat32ornull-tofloat64ornull-todateornull-todatetimeornull\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"tostring\">toString<a class=\"headerlink\" href=\"#tostring\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd9\u4e9b\u51fd\u6570\u7528\u4e8e\u5728\u6570\u5b57\u3001\u5b57\u7b26\u4e32\uff08\u4e0d\u5305\u542bFixedString\uff09\u3001Date\u4ee5\u53caDateTime\u4e4b\u95f4\u4e92\u76f8\u8f6c\u6362\u3002<br />\n\u6240\u6709\u7684\u51fd\u6570\u90fd\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u3002</p>\n<p>\u5f53\u5c06\u5176\u4ed6\u7c7b\u578b\u8f6c\u6362\u5230\u5b57\u7b26\u4e32\u6216\u4ece\u5b57\u7b26\u4e32\u8f6c\u6362\u5230\u5176\u4ed6\u7c7b\u578b\u65f6\uff0c\u4f7f\u7528\u4e0eTabSeparated\u683c\u5f0f\u76f8\u540c\u7684\u89c4\u5219\u5bf9\u5b57\u7b26\u4e32\u7684\u503c\u8fdb\u884c\u683c\u5f0f\u5316\u6216\u89e3\u6790\u3002\u5982\u679c\u65e0\u6cd5\u89e3\u6790\u5b57\u7b26\u4e32\u5219\u629b\u51fa\u5f02\u5e38\u5e76\u53d6\u6d88\u67e5\u8be2\u3002</p>\n<p>\u5f53\u5c06Date\u8f6c\u6362\u4e3a\u6570\u5b57\u6216\u53cd\u4e4b\uff0cDate\u5bf9\u5e94Unix\u65f6\u95f4\u6233\u7684\u5929\u6570\u3002<br />\n\u5c06DataTime\u8f6c\u6362\u4e3a\u6570\u5b57\u6216\u53cd\u4e4b\uff0cDateTime\u5bf9\u5e94Unix\u65f6\u95f4\u6233\u7684\u79d2\u6570\u3002</p>\n<p>toDate/toDateTime\u51fd\u6570\u7684\u65e5\u671f\u548c\u65e5\u671f\u65f6\u95f4\u683c\u5f0f\u5b9a\u4e49\u5982\u4e0b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">YYYY-MM-DD</span>\n<span class=\"err\">YYYY-MM-DD hh:mm:ss</span>\n</code></pre></div>\n\n\n<p>\u4f8b\u5916\u7684\u662f\uff0c\u5982\u679c\u5c06UInt32\u3001Int32\u3001UInt64\u6216Int64\u7c7b\u578b\u7684\u6570\u503c\u8f6c\u6362\u4e3aDate\u7c7b\u578b\uff0c\u5e76\u4e14\u5176\u5bf9\u5e94\u7684\u503c\u5927\u4e8e\u7b49\u4e8e65536\uff0c\u5219\u8be5\u6570\u503c\u5c06\u88ab\u89e3\u6790\u6210unix\u65f6\u95f4\u6233\uff08\u800c\u4e0d\u662f\u5bf9\u5e94\u7684\u5929\u6570\uff09\u3002\u8fd9\u610f\u5473\u7740\u5141\u8bb8\u5199\u5165\u2018toDate(unix_timestamp)\u2019\u8fd9\u79cd\u5e38\u89c1\u60c5\u51b5\uff0c\u5426\u5219\u8fd9\u5c06\u662f\u9519\u8bef\u7684\uff0c\u5e76\u4e14\u9700\u8981\u4fbf\u643a\u66f4\u52a0\u7e41\u7410\u7684\u2018toDate(toDateTime(unix_timestamp))\u2019\u3002</p>\n<p>Date\u4e0eDateTime\u4e4b\u95f4\u7684\u8f6c\u6362\u4ee5\u66f4\u4e3a\u81ea\u7136\u7684\u65b9\u5f0f\u8fdb\u884c\uff1a\u901a\u8fc7\u6dfb\u52a0\u7a7a\u7684time\u6216\u5220\u9664time\u3002</p>\n<p>\u6570\u503c\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\u4e0eC++\u4e2d\u4e0d\u540c\u6570\u5b57\u7c7b\u578b\u4e4b\u95f4\u7684\u8d4b\u503c\u76f8\u540c\u7684\u89c4\u5219\u3002</p>\n<p>\u6b64\u5916\uff0cDateTime\u53c2\u6570\u7684toString\u51fd\u6570\u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e2d\u5305\u542b\u65f6\u533a\u540d\u79f0\u3002 \u4f8b\u5982\uff1a<code>Asia/Yekaterinburg</code>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u65f6\u95f4\u6839\u636e\u6307\u5b9a\u7684\u65f6\u533a\u8fdb\u884c\u683c\u5f0f\u5316\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">now_local</span><span class=\"p\">,</span>\n    <span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">(),</span> <span class=\"s1\">&#39;Asia/Yekaterinburg&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">now_yekat</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500now_local\u2500\u252c\u2500now_yekat\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 2016-06-15 00:11:21 \u2502 2016-06-15 02:11:21 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u53e6\u8bf7\u53c2\u9605<code>toUnixTimestamp</code>\u51fd\u6570\u3002</p>\n<h3 id=\"todecimal32-value-s-todecimal64-value-s-todecimal128-value-s\">toDecimal32(value, S), toDecimal64(value, S), toDecimal128(value, S)<a class=\"headerlink\" href=\"#todecimal32-value-s-todecimal64-value-s-todecimal128-value-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06<code>value</code>\u8f6c\u6362\u4e3a\u7cbe\u5ea6\u4e3a<code>S</code>\u7684<a href=\"#../../data_types/decimal/\">Decimal</a>\u3002<code>value</code>\u53ef\u4ee5\u662f\u6570\u5b57\u6216\u5b57\u7b26\u4e32\u3002<code>S</code>\u53c2\u6570\u4e3a\u6307\u5b9a\u7684\u5c0f\u6570\u4f4d\u6570\u3002</p>\n<h3 id=\"tofixedstring-s-n\">toFixedString(s, N)<a class=\"headerlink\" href=\"#tofixedstring-s-n\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06String\u7c7b\u578b\u7684\u53c2\u6570\u8f6c\u6362\u4e3aFixedString(N)\u7c7b\u578b\u7684\u503c\uff08\u5177\u6709\u56fa\u5b9a\u957f\u5ea6N\u7684\u5b57\u7b26\u4e32\uff09\u3002N\u5fc5\u987b\u662f\u4e00\u4e2a\u5e38\u91cf\u3002<br />\n\u5982\u679c\u5b57\u7b26\u4e32\u7684\u5b57\u8282\u6570\u5c11\u4e8eN\uff0c\u5219\u5411\u53f3\u586b\u5145\u7a7a\u5b57\u8282\u3002\u5982\u679c\u5b57\u7b26\u4e32\u7684\u5b57\u8282\u6570\u591a\u4e8eN\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002</p>\n<h3 id=\"tostringcuttozero-s\">toStringCutToZero(s)<a class=\"headerlink\" href=\"#tostringcuttozero-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7String\u6216FixedString\u53c2\u6570\u3002\u8fd4\u56deString\uff0c\u5176\u5185\u5bb9\u5728\u627e\u5230\u7684\u7b2c\u4e00\u4e2a\u96f6\u5b57\u8282\u5904\u88ab\u622a\u65ad\u3002</p>\n");
            
            document.write("<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">toStringCutToZero</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">s_cut</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500s_cut\u2500\u2510</span>\n<span class=\"err\">\u2502 foo\\0\\0\\0\\0\\0 \u2502 foo   \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo\\0bar&#39;</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">toStringCutToZero</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">s_cut</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500s_cut\u2500\u2510</span>\n<span class=\"err\">\u2502 foo\\0bar\\0 \u2502 foo   \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"reinterpretasuint8-reinterpretasuint16-reinterpretasuint32-reinterpretasuint64\">reinterpretAsUInt8, reinterpretAsUInt16, reinterpretAsUInt32, reinterpretAsUInt64<a class=\"headerlink\" href=\"#reinterpretasuint8-reinterpretasuint16-reinterpretasuint32-reinterpretasuint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"reinterpretasint8-reinterpretasint16-reinterpretasint32-reinterpretasint64\">reinterpretAsInt8, reinterpretAsInt16, reinterpretAsInt32, reinterpretAsInt64<a class=\"headerlink\" href=\"#reinterpretasint8-reinterpretasint16-reinterpretasint32-reinterpretasint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"reinterpretasfloat32-reinterpretasfloat64\">reinterpretAsFloat32, reinterpretAsFloat64<a class=\"headerlink\" href=\"#reinterpretasfloat32-reinterpretasfloat64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"reinterpretasdate-reinterpretasdatetime\">reinterpretAsDate, reinterpretAsDateTime<a class=\"headerlink\" href=\"#reinterpretasdate-reinterpretasdatetime\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd9\u4e9b\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u653e\u5728\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u5b57\u8282\u89e3\u91ca\u4e3a\u4e3b\u673a\u987a\u5e8f\u4e2d\u7684\u6570\u5b57\uff08little endian\uff09\u3002\u5982\u679c\u5b57\u7b26\u4e32\u4e0d\u591f\u957f\uff0c\u5219\u51fd\u6570\u5c31\u50cf\u4f7f\u7528\u5fc5\u8981\u6570\u91cf\u7684\u7a7a\u5b57\u8282\u586b\u5145\u5b57\u7b26\u4e32\u4e00\u6837\u3002\u5982\u679c\u5b57\u7b26\u4e32\u6bd4\u9700\u8981\u7684\u957f\uff0c\u5219\u5ffd\u7565\u989d\u5916\u7684\u5b57\u8282\u3002Date\u88ab\u89e3\u91ca\u4e3aUnix\u65f6\u95f4\u6233\u7684\u5929\u6570\uff0cDateTime\u88ab\u89e3\u91ca\u4e3aUnix\u65f6\u95f4\u6233\u3002</p>\n<h3 id=\"reinterpretasstring\">reinterpretAsString<a class=\"headerlink\" href=\"#reinterpretasstring\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6b64\u51fd\u6570\u63a5\u53d7\u6570\u5b57\u3001Date\u6216DateTime\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d\u5305\u542b\u8868\u793a\u4e3b\u673a\u987a\u5e8f\uff08\u5c0f\u7aef\uff09\u7684\u76f8\u5e94\u503c\u7684\u5b57\u8282\u3002\u4ece\u672b\u5c3e\u5220\u9664\u7a7a\u5b57\u8282\u3002\u4f8b\u5982\uff0cUInt32\u7c7b\u578b\u503c255\u662f\u4e00\u4e2a\u5b57\u8282\u957f\u7684\u5b57\u7b26\u4e32\u3002</p>\n<h3 id=\"reinterpretasfixedstring\">reinterpretAsFixedString<a class=\"headerlink\" href=\"#reinterpretasfixedstring\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6b64\u51fd\u6570\u63a5\u53d7\u6570\u5b57\u3001Date\u6216DateTime\uff0c\u5e76\u8fd4\u56de\u5305\u542b\u8868\u793a\u4e3b\u673a\u987a\u5e8f\uff08\u5c0f\u7aef\uff09\u7684\u76f8\u5e94\u503c\u7684\u5b57\u8282\u7684FixedString\u3002\u4ece\u672b\u5c3e\u5220\u9664\u7a7a\u5b57\u8282\u3002\u4f8b\u5982\uff0cUInt32\u7c7b\u578b\u503c255\u662f\u4e00\u4e2a\u957f\u5ea6\u4e3a\u4e00\u4e2a\u5b57\u8282\u7684FixedString\u3002</p>\n<h3 id=\"type_conversion_function-cast\">CAST(x, t)<a class=\"headerlink\" href=\"#type_conversion_function-cast\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u2018x\u2019\u8f6c\u6362\u4e3a\u2018t\u2019\u6570\u636e\u7c7b\u578b\u3002\u8fd8\u652f\u6301\u8bed\u6cd5CAST\uff08x AS t\uff09</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"s1\">&#39;2016-06-15 23:00:00&#39;</span> <span class=\"k\">AS</span> <span class=\"k\">timestamp</span><span class=\"p\">,</span>\n    <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">timestamp</span> <span class=\"k\">AS</span> <span class=\"n\">DateTime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">datetime</span><span class=\"p\">,</span>\n    <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">timestamp</span> <span class=\"k\">AS</span> <span class=\"nb\">Date</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span>\n    <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"s1\">&#39;String&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">string</span><span class=\"p\">,</span>\n    <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"s1\">&#39;FixedString(22)&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">fixed_string</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500timestamp\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500datetime\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500date\u2500\u252c\u2500string\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500fixed_string\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 2016-06-15 23:00:00 \u2502 2016-06-15 23:00:00 \u2502 2016-06-15 \u2502 2016-06-15 23:00:00 \u2502 2016-06-15 23:00:00\\0\\0\\0 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5c06\u53c2\u6570\u8f6c\u6362\u4e3aFixedString(N)\uff0c\u4ec5\u9002\u7528\u4e8eString\u6216FixedString(N)\u7c7b\u578b\u7684\u53c2\u6570\u3002</p>\n<p>\u652f\u6301\u5c06\u6570\u636e\u8f6c\u6362\u4e3a<a href=\"#../../data_types/nullable/\">Nullable</a>\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"nb\">Int8</span>          <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"nb\">Int8</span>          <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Nullable(UInt16)&#39;</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Nullable(UInt16)&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt16</span><span class=\"p\">)</span>                        <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt16</span><span class=\"p\">)</span>                        <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"function-tointerval\">toIntervalYear, toIntervalQuarter, toIntervalMonth, toIntervalWeek, toIntervalDay, toIntervalHour, toIntervalMinute, toIntervalSecond<a class=\"headerlink\" href=\"#function-tointerval\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u6570\u5b57\u7c7b\u578b\u53c2\u6570\u8f6c\u6362\u4e3aInterval\u7c7b\u578b\uff08\u65f6\u95f4\u533a\u95f4\uff09\u3002<br />\nInterval\u7c7b\u578b\u5b9e\u9645\u4e0a\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u7c7b\u578b\u7684\u6570\u636e\u76f4\u63a5\u4e0eDate\u6216DateTime\u6267\u884c\u7b97\u672f\u8fd0\u7b97\u3002\u540c\u65f6\uff0cClickHouse\u4e3aInterval\u7c7b\u578b\u6570\u636e\u7684\u58f0\u660e\u63d0\u4f9b\u4e86\u66f4\u65b9\u4fbf\u7684\u8bed\u6cd5\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span>\n    <span class=\"nb\">INTERVAL</span> <span class=\"mi\">1</span> <span class=\"n\">WEEK</span> <span class=\"k\">AS</span> <span class=\"n\">interval_week</span><span class=\"p\">,</span>\n    <span class=\"n\">toIntervalWeek</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">interval_to_week</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"nb\">date</span> <span class=\"o\">+</span> <span class=\"n\">interval_week</span><span class=\"p\">,</span>\n    <span class=\"nb\">date</span> <span class=\"o\">+</span> <span class=\"n\">interval_to_week</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500plus(date, interval_week)\u2500\u252c\u2500plus(date, interval_to_week)\u2500\u2510</span>\n<span class=\"err\">\u2502                2019-01-08 \u2502                   2019-01-08 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"type_conversion_functions-parsedatetimebesteffort\">parseDateTimeBestEffort<a class=\"headerlink\" href=\"#type_conversion_functions-parsedatetimebesteffort\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u6570\u5b57\u7c7b\u578b\u53c2\u6570\u89e3\u6790\u4e3aDate\u6216DateTime\u7c7b\u578b\u3002<br />\n\u4e0etoDate\u548ctoDateTime\u4e0d\u540c\uff0cparseDateTimeBestEffort\u53ef\u4ee5\u8fdb\u884c\u66f4\u590d\u6742\u7684\u65e5\u671f\u683c\u5f0f\u3002<br />\n\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u94fe\u63a5\uff1a<a href=\"https://xkcd.com/1179/\" rel=\"external nofollow noreferrer\">\u590d\u6742\u65e5\u671f\u683c\u5f0f</a>\u3002</p>\n<h3 id=\"parsedatetimebesteffortornull\">parseDateTimeBestEffortOrNull<a class=\"headerlink\" href=\"#parsedatetimebesteffortornull\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<a href=\"#type_conversion_functions-parsedatetimebesteffort\">parseDateTimeBestEffort</a>\u76f8\u540c\uff0c\u4f46\u5b83\u9047\u5230\u65e0\u6cd5\u5904\u7406\u7684\u65e5\u671f\u683c\u5f0f\u65f6\u8fd4\u56denull\u3002</p>\n<h3 id=\"parsedatetimebesteffortorzero\">parseDateTimeBestEffortOrZero<a class=\"headerlink\" href=\"#parsedatetimebesteffortorzero\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<a href=\"#type_conversion_functions-parsedatetimebesteffort\">parseDateTimeBestEffort</a>\u76f8\u540c\uff0c\u4f46\u5b83\u9047\u5230\u65e0\u6cd5\u5904\u7406\u7684\u65e5\u671f\u683c\u5f0f\u65f6\u8fd4\u56de\u96f6Date\u6216\u96f6DateTime\u3002</p>\n<p><a name=\"../../../../../functions/date_time_functions/\"></a><a name=\"../query_language/functions/date_time_functions/\"></a><a name=\"../functions/date_time_functions/\"></a><a name=\"../../functions/date_time_functions/\"></a><a name=\"../../../../../../functions/date_time_functions/\"></a><a name=\"functions/date_time_functions/\"></a><a name=\"../../../functions/date_time_functions/\"></a><a name=\"../../../../../query_language/functions/date_time_functions/\"></a><a name=\"../../../query_language/functions/date_time_functions/\"></a><a name=\"../../../../query_language/functions/date_time_functions/\"></a><a name=\"../../query_language/functions/date_time_functions/\"></a><a name=\"date_time_functions/\"></a><a name=\"../../../../fu");
            
            document.write("nctions/date_time_functions/\"></a><a name=\"query_language/functions/date_time_functions/\"></a></p>\n<h2 id=\"shi-jian-ri-qi-han-shu\">\u65f6\u95f4\u65e5\u671f\u51fd\u6570<a class=\"headerlink\" href=\"#shi-jian-ri-qi-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u652f\u6301\u65f6\u533a\u3002</p>\n<p>\u6240\u6709\u7684\u65f6\u95f4\u65e5\u671f\u51fd\u6570\u90fd\u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2a\u53ef\u9009\u53c2\u6570\u4e2d\u63a5\u53d7\u65f6\u533a\u53c2\u6570\u3002\u793a\u4f8b\uff1aAsia / Yekaterinburg\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u4f7f\u7528\u6307\u5b9a\u7684\u65f6\u533a\u800c\u4e0d\u662f\u672c\u5730\uff08\u9ed8\u8ba4\uff09\u65f6\u533a\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2016-06-15 23:00:00&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">time</span><span class=\"p\">,</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">date_local</span><span class=\"p\">,</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Asia/Yekaterinburg&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">date_yekat</span><span class=\"p\">,</span>\n    <span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"s1\">&#39;US/Samoa&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">time_samoa</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500time\u2500\u252c\u2500date_local\u2500\u252c\u2500date_yekat\u2500\u252c\u2500time_samoa\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 2016-06-15 23:00:00 \u2502 2016-06-15 \u2502 2016-06-16 \u2502 2016-06-15 09:00:00 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4ec5\u652f\u6301\u4e0eUTC\u76f8\u5dee\u4e00\u6574\u5c0f\u65f6\u7684\u65f6\u533a\u3002</p>\n<h3 id=\"totimezone\">toTimeZone<a class=\"headerlink\" href=\"#totimezone\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u6307\u5b9a\u7684\u65f6\u533a\u3002</p>\n<h3 id=\"toyear\">toYear<a class=\"headerlink\" href=\"#toyear\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5e74\u4efd\u7f16\u53f7\uff08AD\uff09\u7684UInt16\u7c7b\u578b\u7684\u6570\u5b57\u3002</p>\n<h3 id=\"toquarter\">toQuarter<a class=\"headerlink\" href=\"#toquarter\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5b63\u5ea6\u7f16\u53f7\u7684UInt8\u7c7b\u578b\u7684\u6570\u5b57\u3002</p>\n<h3 id=\"tomonth\">toMonth<a class=\"headerlink\" href=\"#tomonth\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u6708\u4efd\u7f16\u53f7\uff081-12\uff09\u7684UInt8\u7c7b\u578b\u7684\u6570\u5b57\u3002</p>\n<h3 id=\"todayofyear\">toDayOfYear<a class=\"headerlink\" href=\"#todayofyear\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u5e74\u4e2d\u7684\u67d0\u4e00\u5929\u7684\u7f16\u53f7\u7684UInt16\uff081-366\uff09\u7c7b\u578b\u7684\u6570\u5b57\u3002</p>\n<h3 id=\"todayofmonth\">toDayOfMonth<a class=\"headerlink\" href=\"#todayofmonth\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u6708\u4e2d\u7684\u67d0\u4e00\u5929\u7684\u7f16\u53f7\u7684UInt8\uff081-31\uff09\u7c7b\u578b\u7684\u6570\u5b57\u3002</p>\n<h3 id=\"todayofweek\">toDayOfWeek<a class=\"headerlink\" href=\"#todayofweek\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u5468\u4e2d\u7684\u67d0\u4e00\u5929\u7684\u7f16\u53f7\u7684UInt8\uff08\u5468\u4e00\u662f1, \u5468\u65e5\u662f7\uff09\u7c7b\u578b\u7684\u6570\u5b57\u3002</p>\n<h3 id=\"tohour\">toHour<a class=\"headerlink\" href=\"#tohour\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u8f6c\u6362\u4e3a\u5305\u542b24\u5c0f\u65f6\u5236\uff080-23\uff09\u5c0f\u65f6\u6570\u7684UInt8\u6570\u5b57\u3002<br />\n\u8fd9\u4e2a\u51fd\u6570\u5047\u8bbe\u5982\u679c\u65f6\u949f\u5411\u524d\u79fb\u52a8\uff0c\u5b83\u662f\u4e00\u4e2a\u5c0f\u65f6\uff0c\u53d1\u751f\u5728\u51cc\u66682\u70b9\uff0c\u5982\u679c\u65f6\u949f\u88ab\u79fb\u56de\uff0c\u5b83\u662f\u4e00\u4e2a\u5c0f\u65f6\uff0c\u53d1\u751f\u5728\u51cc\u66683\u70b9\uff08\u8fd9\u5e76\u975e\u603b\u662f\u5982\u6b64 - \u5373\u4f7f\u5728\u83ab\u65af\u79d1\u65f6\u949f\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u4e24\u6b21\u6539\u53d8\uff09\u3002</p>\n<h3 id=\"tominute\">toMinute<a class=\"headerlink\" href=\"#tominute\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u5c0f\u65f6\u4e2d\u5206\u949f\u6570\uff080-59\uff09\u7684UInt8\u6570\u5b57\u3002</p>\n<h3 id=\"tosecond\">toSecond<a class=\"headerlink\" href=\"#tosecond\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u5206\u949f\u4e2d\u79d2\u6570\uff080-59\uff09\u7684UInt8\u6570\u5b57\u3002<br />\n\u95f0\u79d2\u4e0d\u8ba1\u7b97\u5728\u5185\u3002</p>\n<h3 id=\"tounixtimestamp\">toUnixTimestamp<a class=\"headerlink\" href=\"#tounixtimestamp\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u8f6c\u6362\u4e3aunix\u65f6\u95f4\u6233\u3002</p>\n<h3 id=\"tostartofyear\">toStartOfYear<a class=\"headerlink\" href=\"#tostartofyear\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u672c\u5e74\u7684\u7b2c\u4e00\u5929\u3002<br />\n\u8fd4\u56deDate\u7c7b\u578b\u3002</p>\n<h3 id=\"tostartofisoyear\">toStartOfISOYear<a class=\"headerlink\" href=\"#tostartofisoyear\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230ISO\u672c\u5e74\u7684\u7b2c\u4e00\u5929\u3002<br />\n\u8fd4\u56deDate\u7c7b\u578b\u3002</p>\n<h3 id=\"tostartofquarter\">toStartOfQuarter<a class=\"headerlink\" href=\"#tostartofquarter\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u672c\u5b63\u5ea6\u7684\u7b2c\u4e00\u5929\u3002<br />\n\u8fd4\u56deDate\u7c7b\u578b\u3002</p>\n<h3 id=\"tostartofmonth\">toStartOfMonth<a class=\"headerlink\" href=\"#tostartofmonth\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u672c\u6708\u7684\u7b2c\u4e00\u5929\u3002<br />\n\u8fd4\u56deDate\u7c7b\u578b\u3002</p>\n<div class=\"admonition \u6ce8\u610f\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n</div>\n<p>\u89e3\u6790\u4e0d\u6b63\u786e\u65e5\u671f\u7684\u884c\u4e3a\u662f\u7279\u5b9a\u4e8e\u5b9e\u73b0\u7684\u3002 ClickHouse\u53ef\u80fd\u4f1a\u8fd4\u56de\u96f6\u65e5\u671f\uff0c\u629b\u51fa\u5f02\u5e38\u6216\u6267\u884c\u201cnatural\u201d\u6ea2\u51fa\u3002</p>\n<h3 id=\"tomonday\">toMonday<a class=\"headerlink\" href=\"#tomonday\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u672c\u5468\u7684\u661f\u671f\u4e00\u3002<br />\n\u8fd4\u56deDate\u7c7b\u578b\u3002</p>\n<h3 id=\"tostartofday\">toStartOfDay<a class=\"headerlink\" href=\"#tostartofday\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u5411\u524d\u53d6\u6574\u5230\u5f53\u65e5\u7684\u5f00\u59cb\u3002</p>\n<h3 id=\"tostartofhour\">toStartOfHour<a class=\"headerlink\" href=\"#tostartofhour\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u5411\u524d\u53d6\u6574\u5230\u5f53\u524d\u5c0f\u65f6\u7684\u5f00\u59cb\u3002</p>\n<h3 id=\"tostartofminute\">toStartOfMinute<a class=\"headerlink\" href=\"#tostartofminute\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u5411\u524d\u53d6\u6574\u5230\u5f53\u524d\u5206\u949f\u7684\u5f00\u59cb\u3002</p>\n<h3 id=\"tostartoffiveminute\">toStartOfFiveMinute<a class=\"headerlink\" href=\"#tostartoffiveminute\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u4ee5\u4e94\u5206\u949f\u4e3a\u5355\u4f4d\u5411\u524d\u53d6\u6574\u5230\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u70b9\u3002</p>\n<h3 id=\"tostartoftenminutes\">toStartOfTenMinutes<a class=\"headerlink\" href=\"#tostartoftenminutes\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u4ee5\u5341\u5206\u949f\u4e3a\u5355\u4f4d\u5411\u524d\u53d6\u6574\u5230\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u70b9\u3002</p>\n<h3 id=\"tostartoffifteenminutes\">toStartOfFifteenMinutes<a class=\"headerlink\" href=\"#tostartoffifteenminutes\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u4ee5\u5341\u4e94\u5206\u949f\u4e3a\u5355\u4f4d\u5411\u524d\u53d6\u6574\u5230\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u70b9\u3002</p>\n<h3 id=\"tostartofinterval-time-or-data-interval-x-unit-time-zone\">toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone])<a class=\"headerlink\" href=\"#tostartofinterval-time-or-data-interval-x-unit-time-zone\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd9\u662f\u540d\u4e3a<code>toStartOf*</code>\u7684\u6240\u6709\u51fd\u6570\u7684\u901a\u7528\u51fd\u6570\u3002\u4f8b\u5982\uff0c<br />\n<code>toStartOfInterval\uff08t\uff0cINTERVAL 1 year\uff09</code>\u8fd4\u56de\u4e0e<code>toStartOfYear\uff08t\uff09</code>\u76f8\u540c\u7684\u7ed3\u679c\uff0c<br />\n<code>toStartOfInterval\uff08t\uff0cINTERVAL 1 month\uff09</code>\u8fd4\u56de\u4e0e<code>toStartOfMonth\uff08t\uff09</code>\u76f8\u540c\u7684\u7ed3\u679c\uff0c<br />\n<code>toStartOfInterval\uff08t\uff0cINTERVAL 1 day\uff09</code>\u8fd4\u56de\u4e0e<code>toStartOfDay\uff08t\uff09</code>\u76f8\u540c\u7684\u7ed3\u679c\uff0c<br />\n<code>toStartOfInterval\uff08t\uff0cINTERVAL 15 minute\uff09</code>\u8fd4\u56de\u4e0e<code>toStartOfFifteenMinutes\uff08t\uff09</code>\u76f8\u540c\u7684\u7ed3\u679c\u3002</p>\n<h3 id=\"totime\">toTime<a class=\"headerlink\" href=\"#totime\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u4e2d\u7684\u65e5\u671f\u8f6c\u6362\u4e3a\u4e00\u4e2a\u56fa\u5b9a\u7684\u65e5\u671f\uff0c\u540c\u65f6\u4fdd\u7559\u65f6\u95f4\u90e8\u5206\u3002</p>\n<h3 id=\"torelativeyearnum\">toRelativeYearNum<a class=\"headerlink\" href=\"#torelativeyearnum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5e74\u4efd\u7684\u7f16\u53f7\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002</p>\n<h3 id=\"torelativequarternum\">toRelativeQuarterNum<a class=\"headerlink\" href=\"#torelativequarternum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5b63\u5ea6\u7684\u6570\u5b57\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002</p>\n<h3 id=\"torelativemonthnum\">toRelativeMonthNum<a class=\"headerlink\" href=\"#torelativemonthnum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u6708\u4efd\u7684\u7f16\u53f7\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002</p>\n<h3 id=\"torelativeweeknum\">toRelativeWeekNum<a class=\"headerlink\" href=\"#torelativeweeknum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u661f\u671f\u6570\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002</p>\n<h3 id=\"torelativedaynum\">toRelativeDayNum<a class=\"headerlink\" href=\"#torelativedaynum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5f53\u5929\u7684\u7f16\u53f7\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002</p>\n<h3 id=\"torelativehournum\">toRelativeHourNum<a class=\"headerlink\" href=\"#torelativehournum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u8f6c\u6362\u4e3a\u5c0f\u65f6\u6570\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002</p>\n<h3 id=\"torelativeminutenum\">toRelativeMinuteNum<a class=\"headerlink\" href=\"#torelativeminutenum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u8f6c\u6362\u4e3a\u5206\u949f\u6570\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002</p>\n<h3 id=\"torelativesecondnum\">toRelativeSecondNum<a class=\"headerlink\" href=\"#torelativesecondnum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06DateTime\u8f6c\u6362\u4e3a\u79d2\u6570\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002</p>\n<h3 id=\"toisoyear\">toISOYear<a class=\"headerlink\" href=\"#toisoyear\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542bISO\u5e74\u4efd\u7684UInt16\u7c7b\u578b\u7684\u7f16\u53f7\u3002</p>\n<h3 id=\"toisoweek\">toISOWeek<a class=\"headerlink\" href=\"#toisoweek\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542bISO\u5468\u6570\u7684UInt8\u7c7b\u578b\u7684\u7f16\u53f7\u3002</p>\n<h3 id=\"now\">now<a class=\"headerlink\" href=\"#now\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\u5e76\u5728\u8bf7\u6c42\u6267\u884c\u65f6\u7684\u67d0\u4e00\u523b\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\uff08DateTime\uff09\u3002<br />\n\u6b64\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5e38\u91cf\uff0c\u5373\u65f6\u8bf7\u6c42\u9700\u8981\u5f88\u957f\u65f6\u95f4\u80fd\u591f\u5b8c\u6210\u3002</p>\n<h3 id=\"today\">today<a class=\"headerlink\" href=\"#today\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\u5e76\u5728\u8bf7\u6c42\u6267\u884c\u65f6\u7684\u67d0\u4e00\u523b\u8fd4\u56de\u5f53\u524d\u65e5\u671f(Date)\u3002<br />\n\u5176\u529f\u80fd\u4e0e'toDate\uff08now\uff08\uff09\uff09'\u76f8\u540c\u3002</p>\n<h3 id=\"yesterday\">yesterday<a class=\"headerlink\" href=\"#yesterday\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\u5e76\u5728\u8bf7\u6c42\u6267\u884c\u65f6\u7684\u67d0\u4e00\u523b\u8fd4\u56de\u6628\u5929\u7684\u65e5\u671f(Date)\u3002<br />\n\u5176\u529f\u80fd\u4e0e'today\uff08\uff09 -  1'\u76f8\u540c\u3002</p>\n<h3 id=\"timeslot\">timeSlot<a class=\"headerlink\" href=\"#timeslot\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u65f6\u95f4\u5411\u524d\u53d6\u6574\u534a\u5c0f\u65f6\u3002<br />\n\u6b64\u529f\u80fd\u7528\u4e8eYandex.Metrica\uff0c\u56e0\u4e3a\u5982\u679c\u8ddf\u8e2a\u6807\u8bb0\u663e\u793a\u5355\u4e2a\u7528\u6237\u7684\u8fde\u7eed\u7efc\u5408\u6d4f\u89c8\u91cf\u5728\u65f6\u95f4\u4e0a\u4e25\u683c\u8d85\u8fc7\u6b64\u6570\u91cf\uff0c\u5219\u534a\u5c0f\u65f6\u662f\u5c06\u4f1a\u8bdd\u5206\u6210\u4e24\u4e2a\u4f1a\u8bdd\u7684\u6700\u77ed\u65f6\u95f4\u3002\u8fd9\u610f\u5473\u7740\uff08tag id\uff0cuser id\uff0ctime slot\uff09\u53ef\u7528\u4e8e\u641c\u7d22\u76f8\u5e94\u4f1a\u8bdd\u4e2d\u5305\u542b\u7684\u7efc\u5408\u6d4f\u89c8\u91cf\u3002</p>\n<h3 id=\"toyyyymm\">toYYYYMM<a class=\"headerlink\" href=\"#toyyyymm\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5e74\u4efd\u548c\u6708\u4efd\u7f16\u53f7\u7684UInt32\u7c7b\u578b\u7684\u6570\u5b57\uff08YYYY * 100 + MM\uff09\u3002</p>\n<h3 id=\"toyyyymmdd\">toYYYYMMDD<a class=\"headerlink\" href=\"#toyyyymmdd\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5e74\u4efd\u548c\u6708\u4efd\u7f16\u53f7\u7684UInt32\u7c7b\u578b\u7684\u6570\u5b57\uff08YYYY * 10000 + MM * 100 + DD\uff09\u3002</p>\n<h3 id=\"toyyyymmddhhmmss\">toYYYYMMDDhhmmss<a class=\"headerlink\" href=\"#toyyyymmddhhmmss\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5e74\u4efd\u548c\u6708\u4efd\u7f16\u53f7\u7684UInt64\u7c7b\u578b\u7684\u6570\u5b57\uff08YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss\uff09\u3002</p>\n<h3 id=\"addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters\">addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters<a class=\"headerlink\" href=\"#addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters\" title=\"Permanent link\">&para;</a></h3>\n<p>\u51fd\u6570\u5c06\u4e00\u6bb5\u65f6\u95f4\u95f4\u9694\u6dfb\u52a0\u5230Date/DateTime\uff0c\u7136\u540e\u8fd4\u56deDate/DateTime\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span>\n    <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 00:00:00&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span cl");
            
            document.write("ass=\"n\">date_time</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">addYears</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">add_years_with_date</span><span class=\"p\">,</span>\n    <span class=\"n\">addYears</span><span class=\"p\">(</span><span class=\"n\">date_time</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">add_years_with_date_time</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500add_years_with_date\u2500\u252c\u2500add_years_with_date_time\u2500\u2510</span>\n<span class=\"err\">\u2502          2019-01-01 \u2502      2019-01-01 00:00:00 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters\">subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters<a class=\"headerlink\" href=\"#subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters\" title=\"Permanent link\">&para;</a></h3>\n<p>\u51fd\u6570\u5c06Date/DateTime\u51cf\u53bb\u4e00\u6bb5\u65f6\u95f4\u95f4\u9694\uff0c\u7136\u540e\u8fd4\u56deDate/DateTime\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span>\n    <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-01-01 00:00:00&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">date_time</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">subtractYears</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">subtract_years_with_date</span><span class=\"p\">,</span>\n    <span class=\"n\">subtractYears</span><span class=\"p\">(</span><span class=\"n\">date_time</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">subtract_years_with_date_time</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500subtract_years_with_date\u2500\u252c\u2500subtract_years_with_date_time\u2500\u2510</span>\n<span class=\"err\">\u2502               2018-01-01 \u2502           2018-01-01 00:00:00 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"datediff-unit-t1-t2-timezone\">dateDiff('unit', t1, t2, [timezone])<a class=\"headerlink\" href=\"#datediff-unit-t1-t2-timezone\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4ee5'unit'\u4e3a\u5355\u4f4d\u8868\u793a\u7684\u4e24\u4e2a\u65f6\u95f4\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u4f8b\u5982<code>'hours'</code>\u3002 't1'\u548c't2'\u53ef\u4ee5\u662fDate\u6216DateTime\uff0c\u5982\u679c\u6307\u5b9a'timezone'\uff0c\u5b83\u5c06\u5e94\u7528\u4e8e\u4e24\u4e2a\u53c2\u6570\u3002\u5982\u679c\u4e0d\u662f\uff0c\u5219\u4f7f\u7528\u6765\u81ea\u6570\u636e\u7c7b\u578b't1'\u548c't2'\u7684\u65f6\u533a\u3002\u5982\u679c\u65f6\u533a\u4e0d\u76f8\u540c\uff0c\u5219\u7ed3\u679c\u5c06\u662f\u672a\u5b9a\u4e49\u7684\u3002</p>\n<p>Supported unit values:</p>\n<table>\n<thead>\n<tr>\n<th>unit</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>second</td>\n</tr>\n<tr>\n<td>minute</td>\n</tr>\n<tr>\n<td>hour</td>\n</tr>\n<tr>\n<td>day</td>\n</tr>\n<tr>\n<td>week</td>\n</tr>\n<tr>\n<td>month</td>\n</tr>\n<tr>\n<td>quarter</td>\n</tr>\n<tr>\n<td>year</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"timeslots-starttime-duration-size\">timeSlots(StartTime, Duration,[, Size])<a class=\"headerlink\" href=\"#timeslots-starttime-duration-size\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5b83\u8fd4\u56de\u4e00\u4e2a\u65f6\u95f4\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u62ec\u4ece\u4ece\u201cStartTime\u201d\u5f00\u59cb\u5230\u201cStartTime + Duration \u79d2\u201d\u5185\u7684\u6240\u6709\u7b26\u5408\u201csize\u201d\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u6b65\u957f\u7684\u65f6\u95f4\u70b9\u3002\u5176\u4e2d\u201csize\u201d\u662f\u4e00\u4e2a\u53ef\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a1800\u3002<br />\n\u4f8b\u5982\uff0c<code>timeSlots(toDateTime('2012-01-01 12:20:00')\uff0c600) = [toDateTime\uff08'2012-01-01 12:00:00'\uff09\uff0ctoDateTime\uff08'2012-01-01 12:30:00' \uff09]</code>\u3002<br />\n\u8fd9\u5bf9\u4e8e\u641c\u7d22\u5728\u76f8\u5e94\u4f1a\u8bdd\u4e2d\u7efc\u5408\u6d4f\u89c8\u91cf\u662f\u975e\u5e38\u6709\u7528\u7684\u3002</p>\n<h3 id=\"formatdatetime-time-format-timezone\">formatDateTime(Time, Format[, Timezone])<a class=\"headerlink\" href=\"#formatdatetime-time-format-timezone\" title=\"Permanent link\">&para;</a></h3>\n<p>\u51fd\u6570\u6839\u636e\u7ed9\u5b9a\u7684\u683c\u5f0f\u5b57\u7b26\u4e32\u6765\u683c\u5f0f\u5316\u65f6\u95f4\u3002\u8bf7\u6ce8\u610f\uff1a\u683c\u5f0f\u5b57\u7b26\u4e32\u5fc5\u987b\u662f\u5e38\u91cf\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982\uff1a\u5355\u4e2a\u7ed3\u679c\u5217\u4e0d\u80fd\u6709\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u3002</p>\n<p>\u652f\u6301\u7684\u683c\u5f0f\u4fee\u9970\u7b26\uff1a<br />\n(\"Example\" \u5217\u662f\u5bf9<code>2018-01-02 22:33:44</code>\u7684\u683c\u5f0f\u5316\u7ed3\u679c)</p>\n<table>\n<thead>\n<tr>\n<th>Modifier</th>\n<th>Description</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>%C</td>\n<td>year divided by 100 and truncated to integer (00-99)</td>\n<td>20</td>\n</tr>\n<tr>\n<td>%d</td>\n<td>day of the month, zero-padded (01-31)</td>\n<td>02</td>\n</tr>\n<tr>\n<td>%D</td>\n<td>Short MM/DD/YY date, equivalent to %m/%d/%y</td>\n<td>01/02/2018</td>\n</tr>\n<tr>\n<td>%e</td>\n<td>day of the month, space-padded ( 1-31)</td>\n<td>2</td>\n</tr>\n<tr>\n<td>%F</td>\n<td>short YYYY-MM-DD date, equivalent to %Y-%m-%d</td>\n<td>2018-01-02</td>\n</tr>\n<tr>\n<td>%H</td>\n<td>hour in 24h format (00-23)</td>\n<td>22</td>\n</tr>\n<tr>\n<td>%I</td>\n<td>hour in 12h format (01-12)</td>\n<td>10</td>\n</tr>\n<tr>\n<td>%j</td>\n<td>day of the year (001-366)</td>\n<td>002</td>\n</tr>\n<tr>\n<td>%m</td>\n<td>month as a decimal number (01-12)</td>\n<td>01</td>\n</tr>\n<tr>\n<td>%M</td>\n<td>minute (00-59)</td>\n<td>33</td>\n</tr>\n<tr>\n<td>%n</td>\n<td>new-line character ('\\n')</td>\n<td></td>\n</tr>\n<tr>\n<td>%p</td>\n<td>AM or PM designation</td>\n<td>PM</td>\n</tr>\n<tr>\n<td>%R</td>\n<td>24-hour HH:MM time, equivalent to %H:%M</td>\n<td>22:33</td>\n</tr>\n<tr>\n<td>%S</td>\n<td>second (00-59)</td>\n<td>44</td>\n</tr>\n<tr>\n<td>%t</td>\n<td>horizontal-tab character ('\\t')</td>\n<td></td>\n</tr>\n<tr>\n<td>%T</td>\n<td>ISO 8601 time format (HH:MM:SS), equivalent to %H:%M:%S</td>\n<td>22:33:44</td>\n</tr>\n<tr>\n<td>%u</td>\n<td>ISO 8601 weekday as number with Monday as 1 (1-7)</td>\n<td>2</td>\n</tr>\n<tr>\n<td>%V</td>\n<td>ISO 8601 week number (01-53)</td>\n<td>01</td>\n</tr>\n<tr>\n<td>%w</td>\n<td>weekday as a decimal number with Sunday as 0 (0-6)</td>\n<td>2</td>\n</tr>\n<tr>\n<td>%y</td>\n<td>Year, last two digits (00-99)</td>\n<td>18</td>\n</tr>\n<tr>\n<td>%Y</td>\n<td>Year</td>\n<td>2018</td>\n</tr>\n<tr>\n<td>%%</td>\n<td>a % sign</td>\n<td>%</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"../../../functions/string_functions/\"></a><a name=\"../../../../query_language/functions/string_functions/\"></a><a name=\"query_language/functions/string_functions/\"></a><a name=\"../../../query_language/functions/string_functions/\"></a><a name=\"../../functions/string_functions/\"></a><a name=\"string_functions/\"></a><a name=\"../../../../functions/string_functions/\"></a><a name=\"../../query_language/functions/string_functions/\"></a><a name=\"../query_language/functions/string_functions/\"></a><a name=\"../../../../../functions/string_functions/\"></a><a name=\"../functions/string_functions/\"></a><a name=\"../../../../../../functions/string_functions/\"></a><a name=\"../../../../../query_language/functions/string_functions/\"></a><a name=\"functions/string_functions/\"></a></p>\n<h2 id=\"zi-fu-chuan-han-shu\">\u5b57\u7b26\u4e32\u51fd\u6570<a class=\"headerlink\" href=\"#zi-fu-chuan-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"string_functions-empty\">empty<a class=\"headerlink\" href=\"#string_functions-empty\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9\u4e8e\u7a7a\u5b57\u7b26\u4e32\u8fd4\u56de1\uff0c\u5bf9\u4e8e\u975e\u7a7a\u5b57\u7b26\u4e32\u8fd4\u56de0\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt8\u3002<br />\n\u5982\u679c\u5b57\u7b26\u4e32\u5305\u542b\u81f3\u5c11\u4e00\u4e2a\u5b57\u8282\uff0c\u5219\u8be5\u5b57\u7b26\u4e32\u88ab\u89c6\u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u5373\u4f7f\u8fd9\u662f\u4e00\u4e2a\u7a7a\u683c\u6216\u7a7a\u5b57\u7b26\u3002<br />\n\u8be5\u51fd\u6570\u4e5f\u9002\u7528\u4e8e\u6570\u7ec4\u3002</p>\n<h3 id=\"notempty\">notEmpty<a class=\"headerlink\" href=\"#notempty\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9\u4e8e\u7a7a\u5b57\u7b26\u4e32\u8fd4\u56de0\uff0c\u5bf9\u4e8e\u975e\u7a7a\u5b57\u7b26\u4e32\u8fd4\u56de1\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt8\u3002<br />\n\u8be5\u51fd\u6570\u4e5f\u9002\u7528\u4e8e\u6570\u7ec4\u3002</p>\n<h3 id=\"length\">length<a class=\"headerlink\" href=\"#length\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u5b57\u8282\u957f\u5ea6\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt64\u3002<br />\n\u8be5\u51fd\u6570\u4e5f\u9002\u7528\u4e8e\u6570\u7ec4\u3002</p>\n<h3 id=\"lengthutf8\">lengthUTF8<a class=\"headerlink\" href=\"#lengthutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5047\u5b9a\u5b57\u7b26\u4e32\u4ee5UTF-8\u7f16\u7801\u7ec4\u6210\u7684\u6587\u672c\uff0c\u8fd4\u56de\u6b64\u5b57\u7b26\u4e32\u7684Unicode\u5b57\u7b26\u957f\u5ea6\u3002\u5982\u679c\u4f20\u5165\u7684\u5b57\u7b26\u4e32\u4e0d\u662fUTF-8\u7f16\u7801\uff0c\u5219\u51fd\u6570\u53ef\u80fd\u8fd4\u56de\u4e00\u4e2a\u9884\u671f\u5916\u7684\u503c\uff08\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff09\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt64\u3002</p>\n<h3 id=\"char-length-char-length\">char_length, CHAR_LENGTH<a class=\"headerlink\" href=\"#char-length-char-length\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5047\u5b9a\u5b57\u7b26\u4e32\u4ee5UTF-8\u7f16\u7801\u7ec4\u6210\u7684\u6587\u672c\uff0c\u8fd4\u56de\u6b64\u5b57\u7b26\u4e32\u7684Unicode\u5b57\u7b26\u957f\u5ea6\u3002\u5982\u679c\u4f20\u5165\u7684\u5b57\u7b26\u4e32\u4e0d\u662fUTF-8\u7f16\u7801\uff0c\u5219\u51fd\u6570\u53ef\u80fd\u8fd4\u56de\u4e00\u4e2a\u9884\u671f\u5916\u7684\u503c\uff08\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff09\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt64\u3002</p>\n<h3 id=\"character-length-character-length\">character_length, CHARACTER_LENGTH<a class=\"headerlink\" href=\"#character-length-character-length\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5047\u5b9a\u5b57\u7b26\u4e32\u4ee5UTF-8\u7f16\u7801\u7ec4\u6210\u7684\u6587\u672c\uff0c\u8fd4\u56de\u6b64\u5b57\u7b26\u4e32\u7684Unicode\u5b57\u7b26\u957f\u5ea6\u3002\u5982\u679c\u4f20\u5165\u7684\u5b57\u7b26\u4e32\u4e0d\u662fUTF-8\u7f16\u7801\uff0c\u5219\u51fd\u6570\u53ef\u80fd\u8fd4\u56de\u4e00\u4e2a\u9884\u671f\u5916\u7684\u503c\uff08\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff09\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt64\u3002</p>\n<h3 id=\"lower-lcase\">lower, lcase<a class=\"headerlink\" href=\"#lower-lcase\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684ASCII\u8f6c\u6362\u4e3a\u5c0f\u5199\u3002</p>\n<h3 id=\"upper-ucase\">upper, ucase<a class=\"headerlink\" href=\"#upper-ucase\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684ASCII\u8f6c\u6362\u4e3a\u5927\u5199\u3002</p>\n<h3 id=\"lowerutf8\">lowerUTF8<a class=\"headerlink\" href=\"#lowerutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u51fd\u6570\u5047\u8bbe\u5b57\u7b26\u4e32\u662f\u4ee5UTF-8\u7f16\u7801\u6587\u672c\u7684\u5b57\u7b26\u96c6\u3002<br />\n\u540c\u65f6\u51fd\u6570\u4e0d\u68c0\u6d4b\u8bed\u8a00\u3002\u56e0\u6b64\u5bf9\u571f\u8033\u5176\u4eba\u6765\u8bf4\uff0c\u7ed3\u679c\u53ef\u80fd\u4e0d\u5b8c\u5168\u6b63\u786e\u3002<br />\n\u5982\u679cUTF-8\u5b57\u8282\u5e8f\u5217\u7684\u957f\u5ea6\u5bf9\u4e8e\u4ee3\u7801\u70b9\u7684\u5927\u5199\u548c\u5c0f\u5199\u4e0d\u540c\uff0c\u5219\u8be5\u4ee3\u7801\u70b9\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u6b63\u786e\u3002<br />\n\u5982\u679c\u5b57\u7b26\u4e32\u5305\u542b\u4e00\u7ec4\u975eUTF-8\u7684\u5b57\u8282\uff0c\u5219\u5c06\u5f15\u53d1\u672a\u5b9a\u4e49\u884c\u4e3a\u3002</p>\n<h3 id=\"upperutf8\">upperUTF8<a class=\"headerlink\" href=\"#upperutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u51fd\u6570\u5047\u8bbe\u5b57\u7b26\u4e32\u662f\u4ee5UTF-8\u7f16\u7801\u6587\u672c\u7684\u5b57\u7b26\u96c6\u3002<br />\n\u540c\u65f6\u51fd\u6570\u4e0d\u68c0\u6d4b\u8bed\u8a00\u3002\u56e0\u6b64\u5bf9\u571f\u8033\u5176\u4eba\u6765\u8bf4\uff0c\u7ed3\u679c\u53ef\u80fd\u4e0d\u5b8c\u5168\u6b63\u786e\u3002<br />\n\u5982\u679cUTF-8\u5b57\u8282\u5e8f\u5217\u7684\u957f\u5ea6\u5bf9\u4e8e\u4ee3\u7801\u70b9\u7684\u5927\u5199\u548c\u5c0f\u5199\u4e0d\u540c\uff0c\u5219\u8be5\u4ee3\u7801\u70b9\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u6b63\u786e\u3002<br />\n\u5982\u679c\u5b57\u7b26\u4e32\u5305\u542b\u4e00\u7ec4\u975eUTF-8\u7684\u5b57\u8282\uff0c\u5219\u5c06\u5f15\u53d1\u672a\u5b9a\u4e49\u884c\u4e3a\u3002</p>\n<h3 id=\"isvalidutf8\">isValidUTF8<a class=\"headerlink\" href=\"#isvalidutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u5b57\u7b26\u4e32\u662f\u5426\u4e3a\u6709\u6548\u7684UTF-8\u7f16\u7801\uff0c\u662f\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"tovalidutf8\">toValidUTF8<a class=\"headerlink\" href=\"#tovalidutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>\u7528<code>\ufffd</code>\uff08U+FFFD\uff09\u5b57\u7b26\u66ff\u6362\u65e0\u6548\u7684UTF-8\u5b57\u7b26\u3002\u6240\u6709\u8fde\u7eed\u7684\u65e0\u6548\u5b57\u7b26\u90fd\u4f1a\u88ab\u66ff\u6362\u4e3a\u4e00\u4e2a\u66ff\u6362\u5b57\u7b26\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">toValidUTF8( input_string )</span>\n</code></pre></div>\n\n\n<p>\u53c2\u6570\uff1a</p>\n<ul>\n<li>input_string \u2014 \u4efb\u4f55\u4e00\u4e2a<a href=\"#../../data_types/string/\">String</a>\u7c7b\u578b\u7684\u5bf9\u8c61\u3002</li>\n</ul>\n<p>\u8fd4\u56de\u503c\uff1a \u6709\u6548\u7684UTF-8\u5b57\u7b26\u4e32\u3002</p>\n<h4 id=\"shi-li_1\">\u793a\u4f8b<a class=\"headerlink\" href=\"#shi-li_1\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toValidUTF8</span><span class=\"p\">(</span><span class=\"s1\">&#39;\\x61\\xF0\\x80\\x80\\x80b&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toValidUTF8(&#39;a\ufffd\ufffd\ufffd\ufffdb&#39;)\u2500\u2510\n\u2502 a\ufffdb                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"reverse\">reverse<a class=\"headerlink\" href=\"#reverse\" title=\"Permanent link\">&para;</a></h3>\n<p>\u53cd\u8f6c\u5b57\u7b26\u4e32\u3002</p>\n<h3 i");
            
            document.write("d=\"reverseutf8\">reverseUTF8<a class=\"headerlink\" href=\"#reverseutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee5Unicode\u5b57\u7b26\u4e3a\u5355\u4f4d\u53cd\u8f6cUTF-8\u7f16\u7801\u7684\u5b57\u7b26\u4e32\u3002\u5982\u679c\u5b57\u7b26\u4e32\u4e0d\u662fUTF-8\u7f16\u7801\uff0c\u5219\u53ef\u80fd\u83b7\u53d6\u5230\u4e00\u4e2a\u975e\u9884\u671f\u7684\u7ed3\u679c\uff08\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff09\u3002</p>\n<h3 id=\"format-pattern-s0-s1\">format(pattern, s0, s1, ...)<a class=\"headerlink\" href=\"#format-pattern-s0-s1\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u5e38\u91cf\u5b57\u7b26\u4e32<code>pattern</code>\u683c\u5f0f\u5316\u5176\u4ed6\u53c2\u6570\u3002<code>pattern</code>\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u7531\u5927\u62ec\u53f7<code>{}</code>\u5305\u56f4\u7684\u201c\u66ff\u6362\u5b57\u6bb5\u201d\u3002 \u672a\u88ab\u5305\u542b\u5728\u5927\u62ec\u53f7\u4e2d\u7684\u4efb\u4f55\u5185\u5bb9\u90fd\u88ab\u89c6\u4e3a\u6587\u672c\u5185\u5bb9\uff0c\u5b83\u5c06\u539f\u6837\u4fdd\u7559\u5728\u8fd4\u56de\u503c\u4e2d\u3002 \u5982\u679c\u4f60\u9700\u8981\u5728\u6587\u672c\u5185\u5bb9\u4e2d\u5305\u542b\u4e00\u4e2a\u5927\u62ec\u53f7\u5b57\u7b26\uff0c\u5b83\u53ef\u4ee5\u901a\u8fc7\u52a0\u500d\u6765\u8f6c\u4e49\uff1a<code>{{</code>\u548c<code>}}</code>\u3002 \u5b57\u6bb5\u540d\u79f0\u53ef\u4ee5\u662f\u6570\u5b57\uff08\u4ece\u96f6\u5f00\u59cb\uff09\u6216\u7a7a\uff08\u7136\u540e\u5c06\u5b83\u4eec\u89c6\u4e3a\u8fde\u7eed\u6570\u5b57\uff09</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">format</span><span class=\"p\">(</span><span class=\"s1\">&#39;{1} {0} {1}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;World&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"s1\">&#39;{1} {0} {1}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;World&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"n\">World</span> <span class=\"n\">Hello</span>                       <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">format</span><span class=\"p\">(</span><span class=\"s1\">&#39;{} {}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;World&#39;</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"s1\">&#39;{} {}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;World&#39;</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Hello</span> <span class=\"n\">World</span>                       <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"concat-s1-s2\">concat(s1, s2, ...)<a class=\"headerlink\" href=\"#concat-s1-s2\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u53c2\u6570\u4e2d\u7684\u591a\u4e2a\u5b57\u7b26\u4e32\u62fc\u63a5\uff0c\u4e0d\u5e26\u5206\u9694\u7b26\u3002</p>\n<h3 id=\"concatassumeinjective-s1-s2\">concatAssumeInjective(s1, s2, ...)<a class=\"headerlink\" href=\"#concatassumeinjective-s1-s2\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<a href=\"#concat-s1-s2\">concat</a>\u76f8\u540c\uff0c\u533a\u522b\u5728\u4e8e\uff0c\u4f60\u9700\u8981\u4fdd\u8bc1concat(s1, s2, s3) -&gt; s4\u662f\u5355\u5c04\u7684\uff0c\u5b83\u5c06\u7528\u4e8eGROUP BY\u7684\u4f18\u5316\u3002</p>\n<h3 id=\"substring-s-offset-length-mid-s-offset-length-substr-s-offset-length\">substring(s, offset, length), mid(s, offset, length), substr(s, offset, length)<a class=\"headerlink\" href=\"#substring-s-offset-length-mid-s-offset-length-substr-s-offset-length\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u622a\u53d6\u6307\u5b9a\u4f4d\u7f6e\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u4ee5\u2018offset\u2019\u4f4d\u7f6e\u4e3a\u5f00\u5934\uff0c\u957f\u5ea6\u4e3a\u2018length\u2019\u7684\u5b50\u4e32\u3002\u2018offset\u2019\u4ece1\u5f00\u59cb\uff08\u4e0e\u6807\u51c6SQL\u76f8\u540c\uff09\u3002\u2018offset\u2019\u548c\u2018length\u2019\u53c2\u6570\u5fc5\u987b\u662f\u5e38\u91cf\u3002</p>\n<h3 id=\"substringutf8-s-offset-length\">substringUTF8(s, offset, length)<a class=\"headerlink\" href=\"#substringutf8-s-offset-length\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e\u2018substring\u2019\u76f8\u540c\uff0c\u4f46\u5176\u64cd\u4f5c\u5355\u4f4d\u4e3aUnicode\u5b57\u7b26\uff0c\u51fd\u6570\u5047\u8bbe\u5b57\u7b26\u4e32\u662f\u4ee5UTF-8\u8fdb\u884c\u7f16\u7801\u7684\u6587\u672c\u3002\u5982\u679c\u4e0d\u662f\u5219\u53ef\u80fd\u8fd4\u56de\u4e00\u4e2a\u9884\u671f\u5916\u7684\u7ed3\u679c\uff08\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff09\u3002</p>\n<h3 id=\"appendtrailingcharifabsent-s-c\">appendTrailingCharIfAbsent(s, c)<a class=\"headerlink\" href=\"#appendtrailingcharifabsent-s-c\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u2018s\u2019\u5b57\u7b26\u4e32\u975e\u7a7a\u5e76\u4e14\u672b\u5c3e\u4e0d\u5305\u542b\u2018c\u2019\u5b57\u7b26\uff0c\u5219\u5c06\u2018c\u2019\u5b57\u7b26\u9644\u52a0\u5230\u672b\u5c3e\u3002</p>\n<h3 id=\"convertcharset-s-from-to\">convertCharset(s, from, to)<a class=\"headerlink\" href=\"#convertcharset-s-from-to\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4ece\u2018from\u2019\u4e2d\u7684\u7f16\u7801\u8f6c\u6362\u4e3a\u2018to\u2019\u4e2d\u7684\u7f16\u7801\u7684\u5b57\u7b26\u4e32\u2018s\u2019\u3002</p>\n<h3 id=\"base64encode-s\">base64Encode(s)<a class=\"headerlink\" href=\"#base64encode-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u5b57\u7b26\u4e32\u2018s\u2019\u7f16\u7801\u6210base64</p>\n<h3 id=\"base64decode-s\">base64Decode(s)<a class=\"headerlink\" href=\"#base64decode-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528base64\u5c06\u5b57\u7b26\u4e32\u89e3\u7801\u6210\u539f\u59cb\u5b57\u7b26\u4e32\u3002\u5982\u679c\u5931\u8d25\u5219\u629b\u51fa\u5f02\u5e38\u3002</p>\n<h3 id=\"trybase64decode-s\">tryBase64Decode(s)<a class=\"headerlink\" href=\"#trybase64decode-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528base64\u5c06\u5b57\u7b26\u4e32\u89e3\u7801\u6210\u539f\u59cb\u5b57\u7b26\u4e32\u3002\u4f46\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u5c06\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</p>\n<h3 id=\"endswith-s-suffix\">endsWith(s, suffix)<a class=\"headerlink\" href=\"#endswith-s-suffix\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u662f\u5426\u4ee5\u6307\u5b9a\u7684\u540e\u7f00\u7ed3\u5c3e\u3002\u5982\u679c\u5b57\u7b26\u4e32\u4ee5\u6307\u5b9a\u7684\u540e\u7f00\u7ed3\u675f\uff0c\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"startswith-s-prefix\">startsWith(s, prefix)<a class=\"headerlink\" href=\"#startswith-s-prefix\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u662f\u5426\u4ee5\u6307\u5b9a\u7684\u524d\u7f00\u5f00\u5934\u3002\u5982\u679c\u5b57\u7b26\u4e32\u4ee5\u6307\u5b9a\u7684\u524d\u7f00\u5f00\u5934\uff0c\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"trimleft-s\">trimLeft(s)<a class=\"headerlink\" href=\"#trimleft-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7528\u4e8e\u5220\u9664\u5de6\u4fa7\u7684\u7a7a\u767d\u5b57\u7b26\u3002</p>\n<h3 id=\"trimright-s\">trimRight(s)<a class=\"headerlink\" href=\"#trimright-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7528\u4e8e\u5220\u9664\u53f3\u4fa7\u7684\u7a7a\u767d\u5b57\u7b26\u3002</p>\n<h3 id=\"trimboth-s\">trimBoth(s)<a class=\"headerlink\" href=\"#trimboth-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7528\u4e8e\u5220\u9664\u4efb\u4e00\u4fa7\u7684\u7a7a\u767d\u5b57\u7b26\u3002</p>\n<p><a name=\"../../functions/string_search_functions/\"></a><a name=\"../../../../functions/string_search_functions/\"></a><a name=\"string_search_functions/\"></a><a name=\"functions/string_search_functions/\"></a><a name=\"../functions/string_search_functions/\"></a><a name=\"../../../query_language/functions/string_search_functions/\"></a><a name=\"../../../../../query_language/functions/string_search_functions/\"></a><a name=\"../../../../../functions/string_search_functions/\"></a><a name=\"../../query_language/functions/string_search_functions/\"></a><a name=\"../../../../../../functions/string_search_functions/\"></a><a name=\"../query_language/functions/string_search_functions/\"></a><a name=\"../../../functions/string_search_functions/\"></a><a name=\"../../../../query_language/functions/string_search_functions/\"></a><a name=\"query_language/functions/string_search_functions/\"></a></p>\n<h2 id=\"zi-fu-chuan-sou-suo-han-shu\">\u5b57\u7b26\u4e32\u641c\u7d22\u51fd\u6570<a class=\"headerlink\" href=\"#zi-fu-chuan-sou-suo-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u4e0b\u5217\u6240\u6709\u51fd\u6570\u5728\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\u533a\u5206\u5927\u5c0f\u5199\u3002\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\uff0c\u5b58\u5728\u5355\u72ec\u7684\u53d8\u4f53\u3002</p>\n<h3 id=\"position-haystack-needle-locate-haystack-needle\">position(haystack, needle), locate(haystack, needle)<a class=\"headerlink\" href=\"#position-haystack-needle-locate-haystack-needle\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u5b57\u7b26\u4e32<code>haystack</code>\u4e2d\u641c\u7d22\u5b50\u4e32<code>needle</code>\u3002<br />\n\u8fd4\u56de\u5b50\u4e32\u7684\u4f4d\u7f6e\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\uff0c\u4ece1\u5f00\u59cb\uff0c\u5982\u679c\u672a\u627e\u5230\u5b50\u4e32\uff0c\u5219\u8fd4\u56de0\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\uff0c\u8bf7\u4f7f\u7528\u51fd\u6570<code>positionCaseInsensitive</code>\u3002</p>\n<h3 id=\"positionutf8-haystack-needle\">positionUTF8(haystack, needle)<a class=\"headerlink\" href=\"#positionutf8-haystack-needle\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>position</code>\u76f8\u540c\uff0c\u4f46\u4f4d\u7f6e\u4ee5Unicode\u5b57\u7b26\u8fd4\u56de\u3002\u6b64\u51fd\u6570\u5de5\u4f5c\u5728UTF-8\u7f16\u7801\u7684\u6587\u672c\u5b57\u7b26\u96c6\u4e2d\u3002\u5982\u975e\u6b64\u7f16\u7801\u7684\u5b57\u7b26\u96c6\uff0c\u5219\u8fd4\u56de\u4e00\u4e9b\u975e\u9884\u671f\u7ed3\u679c\uff08\u4ed6\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff09\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\uff0c\u8bf7\u4f7f\u7528\u51fd\u6570<code>positionCaseInsensitiveUTF8</code>\u3002</p>\n<h3 id=\"multisearchallpositions-haystack-needle1-needle2-needlen\">multiSearchAllPositions(haystack, [needle<sub>1</sub>, needle<sub>2</sub>, ..., needle<sub>n</sub>])<a class=\"headerlink\" href=\"#multisearchallpositions-haystack-needle1-needle2-needlen\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>position</code>\u76f8\u540c\uff0c\u4f46\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u6240\u6709\u5339\u914dneedle<sub>i</sub>\u7684\u4f4d\u7f6e\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\u6216/\u548cUTF-8\u683c\u5f0f\uff0c\u4f7f\u7528\u51fd\u6570<code>multiSearchAllPositionsCaseInsensitive\uff0cmultiSearchAllPositionsUTF8\uff0cmultiSearchAllPositionsCaseInsensitiveUTF8</code>\u3002</p>\n<h3 id=\"multisearchfirstposition-haystack-needle1-needle2-needlen\">multiSearchFirstPosition(haystack, [needle<sub>1</sub>, needle<sub>2</sub>, ..., needle<sub>n</sub>])<a class=\"headerlink\" href=\"#multisearchfirstposition-haystack-needle1-needle2-needlen\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>position</code>\u76f8\u540c\uff0c\u4f46\u8fd4\u56de\u5728<code>haystack</code>\u4e2d\u4e0eneedles\u5b57\u7b26\u4e32\u5339\u914d\u7684\u6700\u5de6\u504f\u79fb\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\u6216/\u548cUTF-8\u683c\u5f0f\uff0c\u4f7f\u7528\u51fd\u6570<code>multiSearchFirstPositionCaseInsensitive\uff0cmultiSearchFirstPositionUTF8\uff0cmultiSearchFirstPositionCaseInsensitiveUTF8</code>\u3002</p>\n<h3 id=\"multisearchfirstindex-haystack-needle1-needle2-needlen\">multiSearchFirstIndex(haystack, [needle<sub>1</sub>, needle<sub>2</sub>, ..., needle<sub>n</sub>])<a class=\"headerlink\" href=\"#multisearchfirstindex-haystack-needle1-needle2-needlen\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u5728\u5b57\u7b26\u4e32<code>haystack</code>\u4e2d\u6700\u5148\u67e5\u627e\u5230\u7684needle<sub>i</sub>\u7684\u7d22\u5f15<code>i</code>\uff08\u4ece1\u5f00\u59cb\uff09\uff0c\u6ca1\u6709\u627e\u5230\u4efb\u4f55\u5339\u914d\u9879\u5219\u8fd4\u56de0\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\u6216/\u548cUTF-8\u683c\u5f0f\uff0c\u4f7f\u7528\u51fd\u6570<code>multiSearchFirstIndexCaseInsensitive\uff0cmultiSearchFirstIndexUTF8\uff0cmultiSearchFirstIndexCaseInsensitiveUTF8</code>\u3002</p>\n<h3 id=\"multisearchany-haystack-needle1-needle2-needlen\">multiSearchAny(haystack, [needle<sub>1</sub>, needle<sub>2</sub>, ..., needle<sub>n</sub>])<a class=\"headerlink\" href=\"#multisearchany-haystack-needle1-needle2-needlen\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c<code>haystack</code>\u4e2d\u81f3\u5c11\u5b58\u5728\u4e00\u4e2aneedle<sub>i</sub>\u5339\u914d\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\u6216/\u548cUTF-8\u683c\u5f0f\uff0c\u4f7f\u7528\u51fd\u6570<code>multiSearchAnyCaseInsensitive\uff0cmultiSearchAnyUTF8\uff0cmultiSearchAnyCaseInsensitiveUTF8</code>\u3002</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u5728\u6240\u6709<code>multiSearch*</code>\u51fd\u6570\u4e2d\uff0c\u7531\u4e8e\u5b9e\u73b0\u89c4\u8303\uff0cneedles\u7684\u6570\u91cf\u5e94\u5c0f\u4e8e2<sup>8</sup>\u3002</p>\n</div>\n<h3 id=\"match-haystack-pattern\">match(haystack, pattern)<a class=\"headerlink\" href=\"#match-haystack-pattern\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u5b57\u7b26\u4e32\u662f\u5426\u4e0e<code>pattern</code>\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002<code>pattern</code>\u53ef\u4ee5\u662f\u4e00\u4e2a\u4efb\u610f\u7684<code>re2</code>\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 <code>re2</code>\u6b63\u5219\u8868\u8fbe\u5f0f\u7684<a href=\"https://github.com/google/re2/wiki/Syntax\" rel=\"external nofollow noreferrer\">\u8bed\u6cd5</a>\u6bd4Perl\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u5b58\u5728\u66f4\u591a\u9650\u5236\u3002</p>\n<p>\u5982\u679c\u4e0d\u5339\u914d\u8fd4\u56de0\uff0c\u5426\u5219\u8fd4\u56de1\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u53cd\u659c\u6760\u7b26\u53f7\uff08<code>\\</code>\uff09\u7528\u4e8e\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u8f6c\u4e49\u3002\u7531\u4e8e\u5b57\u7b26\u4e32\u4e2d\u91c7\u7528\u76f8\u540c\u7684\u7b26\u53f7\u6765\u8fdb\u884c\u8f6c\u4e49\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u8f6c\u4e49\u7b26\u53f7\uff0c\u5fc5\u987b\u5728\u5b57\u7b26\u4e32\u6587\u5b57\u4e2d\u5199\u5165\u4e24\u4e2a\u53cd\u659c\u6760\uff08\\\uff09\u3002</p>\n<p>\u6b63\u5219\u8868\u8fbe\u5f0f\u4e0e\u5b57\u7b26\u4e32\u4e00\u8d77\u4f7f\u7528\uff0c\u5c31\u50cf\u5b83\u662f\u4e00\u7ec4\u5b57\u8282\u4e00\u6837\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u4e0d\u80fd\u5305\u542b\u7a7a\u5b57\u8282\u3002<br />\n\u5bf9\u4e8e\u5728\u5b57\u7b26\u4e32\u4e2d\u641c\u7d22\u5b50\u5b57\u7b26\u4e32\u7684\u6a21\u5f0f\uff0c\u6700\u597d\u4f7f\u7528LIKE\u6216\u201cposition\u201d\uff0c\u56e0\u4e3a\u5b83\u4eec\u66f4\u52a0\u9ad8\u6548\u3002</p>\n<h3 id=\"multimatchany-haystack-pattern1-pattern2-patternn\">multiMatchAny(haystack, [pattern<sub>1</sub>, pattern<sub>2</sub>, ..., pattern<sub>n</sub>])<a class=\"headerlink\" href=\"#multimatchany-haystack-pattern1-pattern2-patternn\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>match</code>\u76f8\u540c\uff0c\u4f46\u5982\u679c\u6240\u6709\u6b63\u5219\u8868\u8fbe\u5f0f\u90fd\u4e0d\u5339\u914d\uff0c\u5219\u8fd4\u56de0\uff1b\u5982\u679c\u4efb\u4f55\u6a21\u5f0f\u5339\u914d\uff0c\u5219\u8fd4\u56de1\u3002\u5b83\u4f7f\u7528<a href=\"https://github.com/intel/hyperscan\" rel=\"external nofollow noreferrer\">hyperscan</a>\u5e93\u3002\u5bf9\u4e8e\u5728\u5b57\u7b26\u4e32\u4e2d\u641c\u7d22\u5b50\u5b57\u7b26\u4e32\u7684\u6a21\u5f0f\uff0c\u6700\u597d\u4f7f\u7528\u201cmultisearchany\u201d\uff0c\u56e0\u4e3a\u5b83\u66f4\u9ad8\u6548\u3002</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u4efb\u4f55<code>haystack</code>\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e2<sup>32</ sup>\u5b57\u8282\uff0c\u5426\u5219\u629b\u51fa\u5f02\u5e38\u3002\u8fd9\u79cd\u9650\u5236\u662f\u56e0\u4e3ahyperscan API\u800c\u4ea7\u751f\u7684\u3002</p>\n</div>\n<h3 id=\"multimatchanyindex");
            
            document.write("-haystack-pattern1-pattern2-patternn\">multiMatchAnyIndex(haystack, [pattern<sub>1</sub>, pattern<sub>2</sub>, ..., pattern<sub>n</sub>])<a class=\"headerlink\" href=\"#multimatchanyindex-haystack-pattern1-pattern2-patternn\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>multiMatchAny</code>\u76f8\u540c\uff0c\u4f46\u8fd4\u56de\u4e0ehaystack\u5339\u914d\u7684\u4efb\u4f55\u5185\u5bb9\u7684\u7d22\u5f15\u4f4d\u7f6e\u3002</p>\n<h3 id=\"multifuzzymatchany-haystack-distance-pattern1-pattern2-patternn\">multiFuzzyMatchAny(haystack, distance, [pattern<sub>1</sub>, pattern<sub>2</sub>, ..., pattern<sub>n</sub>])<a class=\"headerlink\" href=\"#multifuzzymatchany-haystack-distance-pattern1-pattern2-patternn\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>multiMatchAny</code>\u76f8\u540c\uff0c\u4f46\u5982\u679c\u5728haystack\u80fd\u591f\u67e5\u627e\u5230\u4efb\u4f55\u6a21\u5f0f\u5339\u914d\u80fd\u591f\u5728\u6307\u5b9a\u7684<a href=\"https://en.wikipedia.org/wiki/Edit_distance\" rel=\"external nofollow noreferrer\">\u7f16\u8f91\u8ddd\u79bb</a>\u5185\u8fdb\u884c\u5339\u914d\uff0c\u5219\u8fd4\u56de1\u3002\u6b64\u529f\u80fd\u4e5f\u5904\u4e8e\u5b9e\u9a8c\u6a21\u5f0f\uff0c\u53ef\u80fd\u975e\u5e38\u6162\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605<a href=\"https://intel.github.io/hyperscan/dev-reference/compilation.html#approximate-matching\" rel=\"external nofollow noreferrer\">hyperscan\u6587\u6863</a>\u3002</p>\n<h3 id=\"multifuzzymatchanyindex-haystack-distance-pattern1-pattern2-patternn\">multiFuzzyMatchAnyIndex(haystack, distance, [pattern<sub>1</sub>, pattern<sub>2</sub>, ..., pattern<sub>n</sub>])<a class=\"headerlink\" href=\"#multifuzzymatchanyindex-haystack-distance-pattern1-pattern2-patternn\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>multiFuzzyMatchAny</code>\u76f8\u540c\uff0c\u4f46\u8fd4\u56de\u5339\u914d\u9879\u7684\u5339\u914d\u80fd\u5bb9\u7684\u7d22\u5f15\u4f4d\u7f6e\u3002</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p><code>multiFuzzyMatch*</code>\u51fd\u6570\u4e0d\u652f\u6301UTF-8\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u7531\u4e8ehyperscan\u9650\u5236\uff0c\u8fd9\u4e9b\u8868\u8fbe\u5f0f\u88ab\u6309\u5b57\u8282\u89e3\u6790\u3002</p>\n</div>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u5982\u8981\u5173\u95ed\u6240\u6709hyperscan\u51fd\u6570\u7684\u4f7f\u7528\uff0c\u8bf7\u8bbe\u7f6e<code>SET allow_hyperscan = 0;</code>\u3002</p>\n</div>\n<h3 id=\"extract-haystack-pattern\">extract(haystack, pattern)<a class=\"headerlink\" href=\"#extract-haystack-pattern\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u622a\u53d6\u5b57\u7b26\u4e32\u3002\u5982\u679c\u2018haystack\u2019\u4e0e\u2018pattern\u2019\u4e0d\u5339\u914d\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u4e0d\u5305\u542b\u5b50\u6a21\u5f0f\uff0c\u5b83\u5c06\u83b7\u53d6\u4e0e\u6574\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u5b50\u4e32\u3002\u5426\u5219\uff0c\u5b83\u5c06\u83b7\u53d6\u4e0e\u7b2c\u4e00\u4e2a\u5b50\u6a21\u5f0f\u5339\u914d\u7684\u5b50\u4e32\u3002</p>\n<h3 id=\"extractall-haystack-pattern\">extractAll(haystack, pattern)<a class=\"headerlink\" href=\"#extractall-haystack-pattern\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u63d0\u53d6\u5b57\u7b26\u4e32\u7684\u6240\u6709\u7247\u6bb5\u3002\u5982\u679c\u2018haystack\u2019\u4e0e\u2018pattern\u2019\u6b63\u5219\u8868\u8fbe\u5f0f\u4e0d\u5339\u914d\uff0c\u5219\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u3002\u5426\u5219\u8fd4\u56de\u6240\u6709\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u5b57\u7b26\u4e32\u6570\u7ec4\u3002\u901a\u5e38\uff0c\u884c\u4e3a\u4e0e\u2018extract\u2019\u51fd\u6570\u76f8\u540c\uff08\u5b83\u91c7\u7528\u7b2c\u4e00\u4e2a\u5b50\u6a21\u5f0f\uff0c\u5982\u679c\u6ca1\u6709\u5b50\u6a21\u5f0f\uff0c\u5219\u91c7\u7528\u6574\u4e2a\u8868\u8fbe\u5f0f\uff09\u3002</p>\n<h3 id=\"like-haystack-pattern-haystack-like-pattern-operator\">like(haystack, pattern), haystack LIKE pattern operator<a class=\"headerlink\" href=\"#like-haystack-pattern-haystack-like-pattern-operator\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u5b57\u7b26\u4e32\u662f\u5426\u4e0e\u7b80\u5355\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002<br />\n\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5305\u542b\u7684\u5143\u7b26\u53f7\u6709<code>\uff05</code>\u548c<code>_</code>\u3002</p>\n<p><code>%</code> \u8868\u793a\u4efb\u4f55\u5b57\u8282\u6570\uff08\u5305\u62ec\u96f6\u5b57\u7b26\uff09\u3002</p>\n<p><code>_</code> \u8868\u793a\u4efb\u4f55\u4e00\u4e2a\u5b57\u8282\u3002</p>\n<p>\u53ef\u4ee5\u4f7f\u7528\u53cd\u659c\u6760\uff08<code>\\</code>\uff09\u6765\u5bf9\u5143\u7b26\u53f7\u8fdb\u884c\u8f6c\u4e49\u3002\u8bf7\u53c2\u9605\u201cmatch\u201d\u51fd\u6570\u8bf4\u660e\u4e2d\u6709\u5173\u8f6c\u4e49\u7684\u8bf4\u660e\u3002</p>\n<p>\u5bf9\u4e8e\u50cf<code>\uff05needle\uff05</code>\u8fd9\u6837\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u6539\u51fd\u6570\u4e0e<code>position</code>\u51fd\u6570\u4e00\u6837\u5feb\u3002<br />\n\u5bf9\u4e8e\u5176\u4ed6\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u51fd\u6570\u4e0e\u2018match\u2019\u51fd\u6570\u76f8\u540c\u3002</p>\n<h3 id=\"notlike-haystack-pattern-haystack-not-like-pattern-operator\">notLike(haystack, pattern), haystack NOT LIKE pattern operator<a class=\"headerlink\" href=\"#notlike-haystack-pattern-haystack-not-like-pattern-operator\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e\u2018like\u2019\u51fd\u6570\u8fd4\u56de\u76f8\u53cd\u7684\u7ed3\u679c\u3002</p>\n<h3 id=\"ngramdistance-haystack-needle\">ngramDistance(haystack, needle)<a class=\"headerlink\" href=\"#ngramdistance-haystack-needle\" title=\"Permanent link\">&para;</a></h3>\n<p>\u57fa\u4e8e4-gram\u8ba1\u7b97<code>haystack</code>\u548c<code>needle</code>\u4e4b\u95f4\u7684\u8ddd\u79bb\uff1a\u8ba1\u7b97\u4e24\u4e2a4-gram\u96c6\u5408\u4e4b\u95f4\u7684\u5bf9\u79f0\u5dee\u5f02\uff0c\u5e76\u7528\u5b83\u4eec\u7684\u57fa\u6570\u548c\u5bf9\u5176\u8fdb\u884c\u5f52\u4e00\u5316\u3002\u8fd4\u56de0\u52301\u4e4b\u95f4\u7684\u4efb\u4f55\u6d6e\u70b9\u6570 -- \u8d8a\u63a5\u8fd10\u5219\u8868\u793a\u8d8a\u591a\u7684\u5b57\u7b26\u4e32\u5f7c\u6b64\u76f8\u4f3c\u3002\u5982\u679c\u5e38\u91cf\u7684<code>needle</code>\u6216<code>haystack</code>\u8d85\u8fc732KB\uff0c\u51fd\u6570\u5c06\u629b\u51fa\u5f02\u5e38\u3002\u5982\u679c\u975e\u5e38\u91cf\u7684<code>haystack</code>\u6216<code>needle</code>\u5b57\u7b26\u4e32\u8d85\u8fc732Kb\uff0c\u5219\u8ddd\u79bb\u59cb\u7ec8\u4e3a1\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\u6216/\u548cUTF-8\u683c\u5f0f\uff0c\u4f7f\u7528\u51fd\u6570<code>ngramDistanceCaseInsensitive\uff0cngramDistanceUTF8\uff0cngramDistanceCaseInsensitiveUTF8</code>\u3002</p>\n<h3 id=\"ngramsearch-haystack-needle\">ngramSearch(haystack, needle)<a class=\"headerlink\" href=\"#ngramsearch-haystack-needle\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>ngramDistance</code>\u76f8\u540c\uff0c\u4f46\u8ba1\u7b97<code>needle</code>\u548c<code>haystack</code>\u4e4b\u95f4\u7684\u975e\u5bf9\u79f0\u5dee\u5f02\u2014\u2014<code>needle</code>\u7684n-gram\u51cf\u53bb<code>needle</code>\u5f52\u4e00\u5316n-gram\u3002\u53ef\u7528\u4e8e\u6a21\u7cca\u5b57\u7b26\u4e32\u641c\u7d22\u3002</p>\n<p>\u5bf9\u4e8e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u641c\u7d22\u6216/\u548cUTF-8\u683c\u5f0f\uff0c\u4f7f\u7528\u51fd\u6570<code>ngramSearchCaseInsensitive\uff0cngramSearchUTF8\uff0cngramSearchCaseInsensitiveUTF8</code>\u3002</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u5bf9\u4e8eUTF-8\uff0c\u6211\u4eec\u4f7f\u75283-gram\u3002\u6240\u6709\u8fd9\u4e9b\u90fd\u4e0d\u662f\u5b8c\u5168\u516c\u5e73\u7684n-gram\u8ddd\u79bb\u3002\u6211\u4eec\u4f7f\u75282\u5b57\u8282\u54c8\u5e0c\u6765\u6563\u5217n-gram\uff0c\u7136\u540e\u8ba1\u7b97\u8fd9\u4e9b\u54c8\u5e0c\u8868\u4e4b\u95f4\u7684\uff08\u975e\uff09\u5bf9\u79f0\u5dee\u5f02 - \u53ef\u80fd\u4f1a\u53d1\u751f\u51b2\u7a81\u3002\u5bf9\u4e8eUTF-8\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u683c\u5f0f\uff0c\u6211\u4eec\u4e0d\u4f7f\u7528\u516c\u5e73\u7684<code>tolower</code>\u51fd\u6570 - \u6211\u4eec\u5c06\u6bcf\u4e2aUnicode\u5b57\u7b26\u5b57\u8282\u7684\u7b2c5\u4f4d\uff08\u4ece\u96f6\u5f00\u59cb\uff09\u548c\u5b57\u8282\u7684\u7b2c\u4e00\u4f4d\u5f52\u96f6 - \u8fd9\u9002\u7528\u4e8e\u62c9\u4e01\u8bed\uff0c\u4e3b\u8981\u7528\u4e8e\u6240\u6709\u897f\u91cc\u5c14\u5b57\u6bcd\u3002</p>\n</div>\n<p><a name=\"../../../../../functions/string_replace_functions/\"></a><a name=\"../functions/string_replace_functions/\"></a><a name=\"functions/string_replace_functions/\"></a><a name=\"../query_language/functions/string_replace_functions/\"></a><a name=\"../../query_language/functions/string_replace_functions/\"></a><a name=\"../../functions/string_replace_functions/\"></a><a name=\"string_replace_functions/\"></a><a name=\"../../../query_language/functions/string_replace_functions/\"></a><a name=\"../../../functions/string_replace_functions/\"></a><a name=\"../../../../../../functions/string_replace_functions/\"></a><a name=\"query_language/functions/string_replace_functions/\"></a><a name=\"../../../../functions/string_replace_functions/\"></a><a name=\"../../../../query_language/functions/string_replace_functions/\"></a><a name=\"../../../../../query_language/functions/string_replace_functions/\"></a></p>\n<h2 id=\"zi-fu-chuan-ti-huan-han-shu\">\u5b57\u7b26\u4e32\u66ff\u6362\u51fd\u6570<a class=\"headerlink\" href=\"#zi-fu-chuan-ti-huan-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"replaceone-haystack-pattern-replacement\">replaceOne(haystack, pattern, replacement)<a class=\"headerlink\" href=\"#replaceone-haystack-pattern-replacement\" title=\"Permanent link\">&para;</a></h3>\n<p>\u7528\u2018replacement\u2019\u5b50\u4e32\u66ff\u6362\u2018haystack\u2019\u4e2d\u4e0e\u2018pattern\u2019\u5b50\u4e32\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5339\u914d\u9879\uff08\u5982\u679c\u5b58\u5728\uff09\u3002<br />\n\u2018pattern\u2019\u548c\u2018replacement\u2019\u5fc5\u987b\u662f\u5e38\u91cf\u3002</p>\n<h3 id=\"replaceall-haystack-pattern-replacement-replace-haystack-pattern-replacement\">replaceAll(haystack, pattern, replacement), replace(haystack, pattern, replacement)<a class=\"headerlink\" href=\"#replaceall-haystack-pattern-replacement-replace-haystack-pattern-replacement\" title=\"Permanent link\">&para;</a></h3>\n<p>\u7528\u2018replacement\u2019\u5b50\u4e32\u66ff\u6362\u2018haystack\u2019\u4e2d\u51fa\u73b0\u7684\u6240\u6709\u2018pattern\u2019\u5b50\u4e32\u3002</p>\n<h3 id=\"replaceregexpone-haystack-pattern-replacement\">replaceRegexpOne(haystack, pattern, replacement)<a class=\"headerlink\" href=\"#replaceregexpone-haystack-pattern-replacement\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u2018pattern\u2019\u6b63\u5219\u8868\u8fbe\u5f0f\u66ff\u6362\u3002 \u2018pattern\u2019\u53ef\u4ee5\u662f\u4efb\u610f\u4e00\u4e2a\u6709\u6548\u7684re2\u6b63\u5219\u8868\u8fbe\u5f0f\u3002<br />\n\u5982\u679c\u5b58\u5728\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u5339\u914d\u9879\uff0c\u4ec5\u66ff\u6362\u7b2c\u4e00\u4e2a\u5339\u914d\u9879\u3002<br />\n\u540c\u65f6\u2018replacement\u2019\u53ef\u4ee5\u6307\u5b9a\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7684\u6355\u83b7\u7ec4\u3002\u53ef\u4ee5\u5305\u542b<code>\\0-\\9</code>\u3002<br />\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u51fd\u6570\u5c06\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u6574\u4e2a\u5339\u914d\u9879\u66ff\u6362\u2018\\0\u2019\u3002\u4f7f\u7528\u5176\u4ed6\u4e0e\u4e4b\u5bf9\u5e94\u7684\u5b50\u6a21\u5f0f\u66ff\u6362\u5bf9\u5e94\u7684\u2018\\1-\\9\u2019\u3002\u8981\u5728\u6a21\u7248\u4e2d\u4f7f\u7528\u2018\\\u2019\u5b57\u7b26\uff0c\u8bf7\u4f7f\u7528\u2018\\\u2019\u5c06\u5176\u8f6c\u4e49\u3002<br />\n\u53e6\u5916\u8fd8\u8bf7\u8bb0\u4f4f\uff0c\u5b57\u7b26\u4e32\u6587\u5b57\u9700\u8981\u989d\u5916\u7684\u8f6c\u4e49\u3002</p>\n<p>\u793a\u4f8b1.\u5c06\u65e5\u671f\u8f6c\u6362\u4e3a\u7f8e\u56fd\u683c\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">DISTINCT</span>\n    <span class=\"n\">EventDate</span><span class=\"p\">,</span>\n    <span class=\"n\">replaceRegexpOne</span><span class=\"p\">(</span><span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"n\">EventDate</span><span class=\"p\">),</span> <span class=\"s1\">&#39;(\\\\d{4})-(\\\\d{2})-(\\\\d{2})&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;\\\\2/\\\\3/\\\\1&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">7</span>\n<span class=\"n\">FORMAT</span> <span class=\"n\">TabSeparated</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">2014-03-17      03/17/2014</span>\n<span class=\"err\">2014-03-18      03/18/2014</span>\n<span class=\"err\">2014-03-19      03/19/2014</span>\n<span class=\"err\">2014-03-20      03/20/2014</span>\n<span class=\"err\">2014-03-21      03/21/2014</span>\n<span class=\"err\">2014-03-22      03/22/2014</span>\n<span class=\"err\">2014-03-23      03/23/2014</span>\n</code></pre></div>\n\n\n<p>\u793a\u4f8b2.\u590d\u5236\u5b57\u7b26\u4e32\u5341\u6b21\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">replaceRegexpOne</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, World!&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;.*&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World! \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"replaceregexpall-haystack-pattern-replacement\">replaceRegexpAll(haystack, pattern, replacement)<a class=\"headerlink\" href=\"#replaceregexpall-haystack-pattern-replacement\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0ereplaceRegexpOne\u76f8\u540c\uff0c\u4f46\u4f1a\u66ff\u6362\u6240\u6709\u51fa\u73b0\u7684\u5339\u914d\u9879\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">replaceRegexpAll</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, World!&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;.&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;\\\\0\\\\0&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 HHeelllloo,,  WWoorrlldd!! \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u4f8b\u5916\u7684\u662f\uff0c\u5982\u679c\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6355\u83b7\u7a7a\u767d\u5b50\u4e32\uff0c\u5219\u4ec5\u4f1a\u8fdb\u884c\u4e00\u6b21\u66ff\u6362\u3002<br />\n\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">replaceRegexpAll</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, World!&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;^&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;here: &#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span c");
            
            document.write("lass=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 here: Hello, World! \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"regexpquotemeta-s\">regexpQuoteMeta(s)<a class=\"headerlink\" href=\"#regexpquotemeta-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8be5\u51fd\u6570\u7528\u4e8e\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u67d0\u4e9b\u9884\u5b9a\u4e49\u5b57\u7b26\u4e4b\u524d\u6dfb\u52a0\u53cd\u659c\u6760\u3002<br />\n\u9884\u5b9a\u4e49\u5b57\u7b26\uff1a'0'\uff0c'\\'\uff0c'|'\uff0c'('\uff0c')'\uff0c'^'\uff0c'$'\uff0c'\u3002'\uff0c'['\uff0c']'\uff0c'\uff1f'\uff0c'* '\uff0c'+'\uff0c'{'\uff0c'\uff1a'\uff0c' - '\u3002<br />\n\u8fd9\u4e2a\u5b9e\u73b0\u4e0ere2 :: RE2 :: QuoteMeta\u7565\u6709\u4e0d\u540c\u3002\u5b83\u4ee5\\0\u800c\u4e0d\u662f\\x00\u8f6c\u4e49\u96f6\u5b57\u8282\uff0c\u5b83\u53ea\u8f6c\u4e49\u6240\u9700\u7684\u5b57\u7b26\u3002<br />\n\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u94fe\u63a5\uff1a[RE2]\uff08<a href=\"https://github.com/google/re2/blob/master/re2/re2.cc#L473\">https://github.com/google/re2/blob/master/re2/re2.cc#L473</a>\uff09</p>\n<p><a name=\"../../../../../query_language/functions/conditional_functions/\"></a><a name=\"conditional_functions/\"></a><a name=\"../../../../../../functions/conditional_functions/\"></a><a name=\"../../../../../functions/conditional_functions/\"></a><a name=\"../../../functions/conditional_functions/\"></a><a name=\"query_language/functions/conditional_functions/\"></a><a name=\"../../functions/conditional_functions/\"></a><a name=\"functions/conditional_functions/\"></a><a name=\"../../query_language/functions/conditional_functions/\"></a><a name=\"../../../query_language/functions/conditional_functions/\"></a><a name=\"../functions/conditional_functions/\"></a><a name=\"../../../../functions/conditional_functions/\"></a><a name=\"../../../../query_language/functions/conditional_functions/\"></a><a name=\"../query_language/functions/conditional_functions/\"></a></p>\n<h2 id=\"tiao-jian-han-shu\">\u6761\u4ef6\u51fd\u6570<a class=\"headerlink\" href=\"#tiao-jian-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"if-cond-then-else-cond-operator-then-else\">if(cond, then, else), cond ? operator then : else<a class=\"headerlink\" href=\"#if-cond-then-else-cond-operator-then-else\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c<code>cond \uff01= 0</code>\u5219\u8fd4\u56de<code>then</code>\uff0c\u5982\u679c<code>cond = 0</code>\u5219\u8fd4\u56de<code>else</code>\u3002<br />\n<code>cond</code>\u5fc5\u987b\u662f<code>UInt8</code>\u7c7b\u578b\uff0c<code>then</code>\u548c<code>else</code>\u5fc5\u987b\u5b58\u5728\u6700\u4f4e\u7684\u5171\u540c\u7c7b\u578b\u3002</p>\n<p><code>then</code>\u548c<code>else</code>\u53ef\u4ee5\u662f<code>NULL</code></p>\n<h3 id=\"multiif\">multiIf<a class=\"headerlink\" href=\"#multiif\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5141\u8bb8\u60a8\u5728\u67e5\u8be2\u4e2d\u66f4\u7d27\u51d1\u5730\u7f16\u5199<a href=\"#operator_case\">CASE</a>\u8fd0\u7b97\u7b26\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">multiIf(cond_1, then_1, cond_2, then_2...else)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>cond_N</code> \u2014 \u51fd\u6570\u8fd4\u56de<code>then_N</code>\u7684\u6761\u4ef6\u3002</li>\n<li><code>then_N</code> \u2014 \u6267\u884c\u65f6\u51fd\u6570\u7684\u7ed3\u679c\u3002</li>\n<li><code>else</code> \u2014 \u5982\u679c\u6ca1\u6709\u6ee1\u8db3\u4efb\u4f55\u6761\u4ef6\uff0c\u5219\u4e3a\u51fd\u6570\u7684\u7ed3\u679c\u3002</li>\n</ul>\n<p>\u8be5\u51fd\u6570\u63a5\u53d7<code>2N + 1</code>\u53c2\u6570\u3002</p>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>\u8be5\u51fd\u6570\u8fd4\u56de\u503c\u201cthen_N\u201d\u6216\u201celse\u201d\u4e4b\u4e00\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6761\u4ef6<code>cond_N</code>\u3002</p>\n<p><strong>\u793a\u4f8b</strong></p>\n<p>\u5b58\u5728\u5982\u4e0b\u4e00\u5f20\u8868</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    3 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u6267\u884c\u67e5\u8be2 <code>SELECT multiIf(isNull(y) x, y &lt; 3, y, NULL) FROM t_null</code>\u3002\u7ed3\u679c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500multiIf(isNull(y), x, less(y, 3), y, NULL)\u2500\u2510</span>\n<span class=\"err\">\u2502                                          1 \u2502</span>\n<span class=\"err\">\u2502                                       \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../../query_language/functions/math_functions/\"></a><a name=\"functions/math_functions/\"></a><a name=\"../../../../query_language/functions/math_functions/\"></a><a name=\"../functions/math_functions/\"></a><a name=\"../../../functions/math_functions/\"></a><a name=\"../../../../functions/math_functions/\"></a><a name=\"../../../../../functions/math_functions/\"></a><a name=\"../../functions/math_functions/\"></a><a name=\"math_functions/\"></a><a name=\"../../../../../../functions/math_functions/\"></a><a name=\"../../query_language/functions/math_functions/\"></a><a name=\"query_language/functions/math_functions/\"></a><a name=\"../../../query_language/functions/math_functions/\"></a><a name=\"../query_language/functions/math_functions/\"></a></p>\n<h2 id=\"shu-xue-han-shu\">\u6570\u5b66\u51fd\u6570<a class=\"headerlink\" href=\"#shu-xue-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u4ee5\u4e0b\u6240\u6709\u7684\u51fd\u6570\u90fd\u8fd4\u56de\u4e00\u4e2aFloat64\u7c7b\u578b\u7684\u6570\u503c\u3002\u8fd4\u56de\u7ed3\u679c\u603b\u662f\u4ee5\u5c3d\u53ef\u80fd\u6700\u5927\u7cbe\u5ea6\u8fd4\u56de\uff0c\u4f46\u8fd8\u662f\u53ef\u80fd\u4e0e\u673a\u5668\u4e2d\u53ef\u8868\u793a\u6700\u63a5\u8fd1\u8be5\u503c\u7684\u6570\u5b57\u4e0d\u540c\u3002</p>\n<h3 id=\"e\">e()<a class=\"headerlink\" href=\"#e\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u63a5\u8fd1\u6570\u5b66\u5e38\u91cfe\u7684Float64\u6570\u5b57\u3002</p>\n<h3 id=\"pi\">pi()<a class=\"headerlink\" href=\"#pi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u63a5\u8fd1\u6570\u5b66\u5e38\u91cf\u03c0\u7684Float64\u6570\u5b57\u3002</p>\n<h3 id=\"exp-x\">exp(x)<a class=\"headerlink\" href=\"#exp-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u7684\u6307\u6570\u3002</p>\n<h3 id=\"log-x-ln-x\">log(x), ln(x)<a class=\"headerlink\" href=\"#log-x-ln-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u7684\u81ea\u7136\u5bf9\u6570\u3002</p>\n<h3 id=\"exp2-x\">exp2(x)<a class=\"headerlink\" href=\"#exp2-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u76842\u7684x\u6b21\u5e42\u3002</p>\n<h3 id=\"log2-x\">log2(x)<a class=\"headerlink\" href=\"#log2-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u7684\u5e952\u5bf9\u6570\u3002</p>\n<h3 id=\"exp10-x\">exp10(x)<a class=\"headerlink\" href=\"#exp10-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u768410\u7684x\u6b21\u5e42\u3002</p>\n<h3 id=\"log10-x\">log10(x)<a class=\"headerlink\" href=\"#log10-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u7684\u5e9510\u5bf9\u6570\u3002</p>\n<h3 id=\"sqrt-x\">sqrt(x)<a class=\"headerlink\" href=\"#sqrt-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u7684\u5e73\u65b9\u6839\u3002</p>\n<h3 id=\"cbrt-x\">cbrt(x)<a class=\"headerlink\" href=\"#cbrt-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u7684\u7acb\u65b9\u6839\u3002</p>\n<h3 id=\"erf-x\">erf(x)<a class=\"headerlink\" href=\"#erf-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c'x'\u662f\u975e\u8d1f\u6570\uff0c\u90a3\u4e48erf(x / \u03c3\u221a2)<g>\u662f\u5177\u6709\u6b63\u6001\u5206\u5e03\u4e14\u6807\u51c6\u504f\u5dee\u4e3a\u201c\u03c3\u201d\u7684\u968f\u673a\u53d8\u91cf\u7684\u503c\u4e0e\u9884\u671f\u503c\u4e4b\u95f4\u7684\u8ddd\u79bb\u5927\u4e8e\u201cx\u201d\u3002</p>\n<p>\u793a\u4f8b \uff08\u4e09\u897f\u683c\u739b\u51c6\u5219\uff09:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">erf</span><span class=\"p\">(</span><span class=\"mi\">3</span> <span class=\"o\">/</span> <span class=\"n\">sqrt</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500erf(divide(3, sqrt(2)))\u2500\u2510</span>\n<span class=\"err\">\u2502      0.9973002039367398 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"erfc-x\">erfc(x)<a class=\"headerlink\" href=\"#erfc-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a\u63a5\u8fd11 - erf(x)\u7684Float64\u6570\u5b57\uff0c\u4f46\u4e0d\u4f1a\u4e22\u5931\u5927\u201cx\u201d\u503c\u7684\u7cbe\u5ea6\u3002</p>\n<h3 id=\"lgamma-x\">lgamma(x)<a class=\"headerlink\" href=\"#lgamma-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dex\u7684\u7edd\u5bf9\u503c\u7684\u81ea\u7136\u5bf9\u6570\u7684\u4f3d\u739b\u51fd\u6570\u3002</p>\n<h3 id=\"tgamma-x\">tgamma(x)<a class=\"headerlink\" href=\"#tgamma-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dex\u7684\u4f3d\u739b\u51fd\u6570\u3002</p>\n<h3 id=\"sin-x\">sin(x)<a class=\"headerlink\" href=\"#sin-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dex\u7684\u4e09\u89d2\u6b63\u5f26\u503c\u3002</p>\n<h3 id=\"cos-x\">cos(x)<a class=\"headerlink\" href=\"#cos-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dex\u7684\u4e09\u89d2\u4f59\u5f26\u503c\u3002</p>\n<h3 id=\"tan-x\">tan(x)<a class=\"headerlink\" href=\"#tan-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dex\u7684\u4e09\u89d2\u6b63\u5207\u503c\u3002</p>\n<h3 id=\"asin-x\">asin(x)<a class=\"headerlink\" href=\"#asin-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dex\u7684\u53cd\u4e09\u89d2\u6b63\u5f26\u503c\u3002</p>\n<h3 id=\"acos-x\">acos(x)<a class=\"headerlink\" href=\"#acos-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dex\u7684\u53cd\u4e09\u89d2\u4f59\u5f26\u503c\u3002</p>\n<h3 id=\"atan-x\">atan(x)<a class=\"headerlink\" href=\"#atan-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dex\u7684\u53cd\u4e09\u89d2\u6b63\u5207\u503c\u3002</p>\n<h3 id=\"pow-x-y-power-x-y\">pow(x, y), power(x, y)<a class=\"headerlink\" href=\"#pow-x-y-power-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7x\u548cy\u4e24\u4e2a\u53c2\u6570\u3002\u8fd4\u56dex\u7684y\u6b21\u65b9\u3002</p>\n<h3 id=\"intexp2\">intExp2<a class=\"headerlink\" href=\"#intexp2\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u76842\u7684x\u6b21\u5e42\uff08UInt64\uff09\u3002</p>\n<h3 id=\"intexp10\">intExp10<a class=\"headerlink\" href=\"#intexp10\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u503c\u7c7b\u578b\u7684\u53c2\u6570\u5e76\u8fd4\u56de\u5b83\u768410\u7684x\u6b21\u5e42\uff08UInt64\uff09\u3002</p>\n<p><a name=\"../../../functions/rounding_functions/\"></a><a name=\"../../../../../functions/rounding_functions/\"></a><a name=\"../functions/rounding_functions/\"></a><a name=\"../../../query_language/functions/rounding_functions/\"></a><a name=\"functions/rounding_functions/\"></a><a name=\"../query_language/functions/rounding_functions/\"></a><a name=\"../../../../../query_language/functions/rounding_functions/\"></a><a name=\"../../query_language/functions/rounding_functions/\"></a><a name=\"rounding_functions/\"></a><a name=\"../../functions/rounding_functions/\"></a><a name=\"../../../../query_language/functions/rounding_functions/\"></a><a name=\"../../../../functions/rounding_functions/\"></a><a name=\"../../../../../../functions/rounding_functions/\"></a><a name=\"query_language/functions/rounding_functions/\"></a></p>\n<h2 id=\"qu-zheng-han-shu\">\u53d6\u6574\u51fd\u6570<a class=\"headerlink\" href=\"#qu-zheng-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"floor-x-n\">floor(x[, N])<a class=\"headerlink\" href=\"#floor-x-n\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8ex\u7684\u6700\u5927\u820d\u5165\u6570\u3002\u8be5\u51fd\u6570\u4f7f\u7528\u53c2\u6570\u4e581/10N\uff0c\u5982\u679c1/10N\u4e0d\u7cbe\u786e\uff0c\u5219\u9009\u62e9\u6700\u63a5\u8fd1\u7684\u7cbe\u786e\u7684\u9002\u5f53\u6570\u636e\u7c7b\u578b\u7684\u6570\u3002<br />\n\u2018N\u2019\u662f\u4e00\u4e2a\u6574\u6570\u5e38\u91cf\uff0c\u53ef\u9009\u53c2\u6570\u3002\u9ed8\u8ba4\u4e3a0\uff0c\u8fd9\u610f\u5473\u7740\u4e0d\u5bf9\u5176\u8fdb\u884c\u820d\u5165\u3002<br />\n\u2018N\u2019\u53ef\u4ee5\u662f\u8d1f\u6570\u3002</p>\n<p>\u793a\u4f8b: <code>floor(123.45, 1) = 123.4, floor(123.45, -1) = 120.</code></p>\n<p><code>x</code>\u662f\u4efb\u4f55\u6570\u5b57\u7c7b\u578b\u3002\u7ed3\u679c\u4e0e\u5176\u4e3a\u76f8\u540c\u7c7b\u578b\u3002<br />\n\u5bf9\u4e8e\u6574\u6570\u53c2\u6570\uff0c\u4f7f\u7528\u8d1f\u2018N\u2019\u503c\u8fdb\u884c\u820d\u5165\u662f\u6709\u610f\u4e49\u7684\uff08\u5bf9\u4e8e\u975e\u8d1f\u201cN\u201d\uff0c\u8be5\u51fd\u6570\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\uff09\u3002<br />\n\u5982\u679c\u53d6\u6574\u5bfc\u81f4\u6ea2\u51fa\uff08\u4f8b\u5982\uff0cfloor(-128\uff0c-1)\uff09\uff0c\u5219\u8fd4\u56de\u7279\u5b9a\u4e8e\u5b9e\u73b0\u7684\u7ed3\u679c\u3002</p>\n<h3 id=\"ceil-x-n-ceiling-x-n\">ceil(x[, N]), ceiling(x[, N])<a class=\"headerlink\" href=\"#ceil-x-n-ceiling-x-n\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e'x'\u7684\u6700\u5c0f\u820d\u5165\u6570\u3002\u5728\u5176\u4ed6\u65b9\u9762\uff0c\u5b83\u4e0e'floor'\u529f\u80fd\u76f8\u540c\uff08\u89c1\u4e0a\u6587\uff09\u3002</p>\n<h3 id=\"rounding_functions-round\">round(x[, N])<a class=\"headerlink\" href=\"#rounding_functions-round\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u503c\u53d6\u6574\u5230\u6307\u5b9a\u7684\u5c0f\u6570\u4f4d\u6570\u3002</p>\n<p>\u8be5\u51fd\u6570\u6309\u987a\u5e8f\u8fd4\u56de\u6700\u8fd1\u7684\u6570\u5b57\u3002\u5982\u679c\u7ed9\u5b9a\u6570\u5b57\u5305\u542b\u591a\u4e2a\u6700\u8fd1\u6570\u5b57\uff0c\u5219\u51fd\u6570\u8fd4\u56de\u5176\u4e2d\u6700\u63a5\u8fd1\u5076\u6570\u7684\u6570\u5b57\uff08\u94f6\u884c\u7684\u53d6\u6574\u65b9\u5f0f\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">round(expression [, decimal_places])</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570\uff1a</strong></p>\n<ul>\n<li><code>expression</code> \u2014 \u8981\u8fdb\u884c\u53d6\u6574\u7684\u6570\u5b57\u3002\u53ef\u4ee5\u662f\u4efb\u4f55\u8fd4\u56de\u6570\u5b57<a href=\"#data_types\">\u7c7b\u578b</a>\u7684<a href=\"#syntax-expressions\">\u8868\u8fbe\u5f0f</a>\u3002</li>\n<li><code>decimal-places</code> \u2014 \u6574\u6570\u7c7b\u578b\u3002<ul>\n<li>\u5982\u679c<code>decimal-places &gt; 0</code>\uff0c\u5219\u8be5\u51fd\u6570\u5c06\u503c\u820d\u5165\u5c0f\u6570\u70b9\u53f3\u4fa7\u3002</li>\n<li>\u5982\u679c<code>decimal-places &lt; 0</code>\uff0c\u5219\u8be5\u51fd\u6570\u5c06\u5c0f\u6570\u70b9\u5de6\u4fa7\u7684\u503c\u56db\u820d\u4e94\u5165\u3002</li>\n<li>\u5982\u679c<code>decimal-places = 0</code>\uff0c\u5219\u8be5\u51fd\u6570\u5c06\u8be5\u503c\u820d\u5165\u4e3a\u6574\u6570\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7701\u7565\u53c2\u6570\u3002</li>\n</ul>\n</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c\uff1a</str");
            
            document.write("ong></p>\n<p>\u4e0e\u8f93\u5165\u6570\u5b57\u76f8\u540c\u7c7b\u578b\u7684\u53d6\u6574\u540e\u7684\u6570\u5b57\u3002</p>\n<h4 id=\"shi-li_2\">\u793a\u4f8b<a class=\"headerlink\" href=\"#shi-li_2\" title=\"Permanent link\">&para;</a></h4>\n<p><strong>\u4f7f\u7528\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"nb\">number</span> <span class=\"o\">/</span> <span class=\"mi\">2</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">round</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">3</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500\u2500x\u2500\u252c\u2500round(divide(number, 2))\u2500\u2510</span>\n<span class=\"err\">\u2502   0 \u2502                        0 \u2502</span>\n<span class=\"err\">\u2502 0.5 \u2502                        0 \u2502</span>\n<span class=\"err\">\u2502   1 \u2502                        1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><strong>\u53d6\u6574\u7684\u793a\u4f8b</strong></p>\n<p>\u53d6\u6574\u5230\u6700\u8fd1\u7684\u6570\u5b57\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">round(3.2, 0) = 3</span>\n<span class=\"err\">round(4.1267, 2) = 4.13</span>\n<span class=\"err\">round(22,-1) = 20</span>\n<span class=\"err\">round(467,-2) = 500</span>\n<span class=\"err\">round(-467,-2) = -500</span>\n</code></pre></div>\n\n\n<p>\u94f6\u884c\u7684\u53d6\u6574\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">round(3.5) = 4</span>\n<span class=\"err\">round(4.5) = 4</span>\n<span class=\"err\">round(3.55, 1) = 3.6</span>\n<span class=\"err\">round(3.65, 1) = 3.6</span>\n</code></pre></div>\n\n\n<h3 id=\"roundtoexp2-num\">roundToExp2(num)<a class=\"headerlink\" href=\"#roundtoexp2-num\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u5b57\u3002\u5982\u679c\u6570\u5b57\u5c0f\u4e8e1\uff0c\u5219\u8fd4\u56de0\u3002\u5426\u5219\uff0c\u5b83\u5c06\u6570\u5b57\u5411\u4e0b\u820d\u5165\u5230\u6700\u63a5\u8fd1\u7684\uff08\u6574\u4e2a\u975e\u8d1f\uff092\u7684x\u6b21\u5e42\u3002</p>\n<h3 id=\"roundduration-num\">roundDuration(num)<a class=\"headerlink\" href=\"#roundduration-num\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u5b57\u3002\u5982\u679c\u6570\u5b57\u5c0f\u4e8e1\uff0c\u5219\u8fd4\u56de0\u3002\u5426\u5219\uff0c\u5b83\u5c06\u6570\u5b57\u5411\u4e0b\u820d\u5165\u4e3a\u96c6\u5408\u4e2d\u7684\u6570\u5b57\uff1a1\uff0c10\uff0c30\uff0c60\uff0c120\uff0c180\uff0c240\uff0c300\uff0c600\uff0c1200\uff0c1800\uff0c3600\uff0c7200\uff0c18000\uff0c36000\u3002\u6b64\u51fd\u6570\u7528\u4e8eYandex.Metrica\u62a5\u8868\u4e2d\u8ba1\u7b97\u4f1a\u8bdd\u7684\u6301\u7eed\u65f6\u957f\u3002</p>\n<h3 id=\"roundage-num\">roundAge(num)<a class=\"headerlink\" href=\"#roundage-num\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u5b57\u3002\u5982\u679c\u6570\u5b57\u5c0f\u4e8e18\uff0c\u5219\u8fd4\u56de0\u3002\u5426\u5219\uff0c\u5b83\u5c06\u6570\u5b57\u5411\u4e0b\u820d\u5165\u4e3a\u96c6\u5408\u4e2d\u7684\u6570\u5b57\uff1a18\uff0c25\uff0c35\uff0c45\uff0c55\u3002\u6b64\u51fd\u6570\u7528\u4e8eYandex.Metrica\u62a5\u8868\u4e2d\u7528\u6237\u5e74\u9f84\u7684\u8ba1\u7b97\u3002</p>\n<h3 id=\"rounddown-num-arr\">roundDown(num, arr)<a class=\"headerlink\" href=\"#rounddown-num-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6570\u5b57\uff0c\u5c06\u5176\u5411\u4e0b\u820d\u5165\u5230\u6307\u5b9a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u3002\u5982\u679c\u8be5\u503c\u5c0f\u4e8e\u6570\u7ec4\u4e2d\u7684\u6700\u4f4e\u8fb9\u754c\uff0c\u5219\u8fd4\u56de\u6700\u4f4e\u8fb9\u754c\u3002</p>\n<p><a name=\"../../../../../query_language/functions/array_functions/\"></a><a name=\"../../../query_language/functions/array_functions/\"></a><a name=\"../../../../../functions/array_functions/\"></a><a name=\"../query_language/functions/array_functions/\"></a><a name=\"../../../../../../functions/array_functions/\"></a><a name=\"../../../functions/array_functions/\"></a><a name=\"array_functions/\"></a><a name=\"../functions/array_functions/\"></a><a name=\"functions/array_functions/\"></a><a name=\"../../functions/array_functions/\"></a><a name=\"../../../../functions/array_functions/\"></a><a name=\"query_language/functions/array_functions/\"></a><a name=\"../../../../query_language/functions/array_functions/\"></a><a name=\"../../query_language/functions/array_functions/\"></a></p>\n<h2 id=\"shu-zu-han-shu\">\u6570\u7ec4\u51fd\u6570<a class=\"headerlink\" href=\"#shu-zu-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"empty\">empty<a class=\"headerlink\" href=\"#empty\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9\u4e8e\u7a7a\u6570\u7ec4\u8fd4\u56de1\uff0c\u5bf9\u4e8e\u975e\u7a7a\u6570\u7ec4\u8fd4\u56de0\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt8\u3002<br />\n\u8be5\u51fd\u6570\u4e5f\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\u3002</p>\n<h3 id=\"notempty_1\">notEmpty<a class=\"headerlink\" href=\"#notempty_1\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9\u4e8e\u7a7a\u6570\u7ec4\u8fd4\u56de0\uff0c\u5bf9\u4e8e\u975e\u7a7a\u6570\u7ec4\u8fd4\u56de1\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt8\u3002<br />\n\u8be5\u51fd\u6570\u4e5f\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\u3002</p>\n<h3 id=\"array_functions-length\">length<a class=\"headerlink\" href=\"#array_functions-length\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u4e2a\u6570\u3002<br />\n\u7ed3\u679c\u7c7b\u578b\u662fUInt64\u3002<br />\n\u8be5\u51fd\u6570\u4e5f\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\u3002</p>\n<h3 id=\"emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64\">emptyArrayUInt8, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64<a class=\"headerlink\" href=\"#emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64\">emptyArrayInt8, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64<a class=\"headerlink\" href=\"#emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"emptyarrayfloat32-emptyarrayfloat64\">emptyArrayFloat32, emptyArrayFloat64<a class=\"headerlink\" href=\"#emptyarrayfloat32-emptyarrayfloat64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"emptyarraydate-emptyarraydatetime\">emptyArrayDate, emptyArrayDateTime<a class=\"headerlink\" href=\"#emptyarraydate-emptyarraydatetime\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"emptyarraystring\">emptyArrayString<a class=\"headerlink\" href=\"#emptyarraystring\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\u5e76\u8fd4\u56de\u9002\u5f53\u7c7b\u578b\u7684\u7a7a\u6570\u7ec4\u3002</p>\n<h3 id=\"emptyarraytosingle\">emptyArrayToSingle<a class=\"headerlink\" href=\"#emptyarraytosingle\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u7a7a\u6570\u7ec4\u5e76\u8fd4\u56de\u4e00\u4e2a\u4ec5\u5305\u542b\u4e00\u4e2a\u9ed8\u8ba4\u503c\u5143\u7d20\u7684\u6570\u7ec4\u3002</p>\n<h3 id=\"range-n\">range(N)<a class=\"headerlink\" href=\"#range-n\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4ece0\u5230N-1\u7684\u6570\u5b57\u6570\u7ec4\u3002<br />\n\u4ee5\u9632\u4e07\u4e00\uff0c\u5982\u679c\u5728\u6570\u636e\u5757\u4e2d\u521b\u5efa\u603b\u957f\u5ea6\u8d85\u8fc7100,000,000\u4e2a\u5143\u7d20\u7684\u6570\u7ec4\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002</p>\n<h3 id=\"array-x1-operator-x1\">array(x1, ...), operator [x1, ...]<a class=\"headerlink\" href=\"#array-x1-operator-x1\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u51fd\u6570\u7684\u53c2\u6570\u4f5c\u4e3a\u6570\u7ec4\u5143\u7d20\u521b\u5efa\u4e00\u4e2a\u6570\u7ec4\u3002<br />\n\u53c2\u6570\u5fc5\u987b\u662f\u5e38\u91cf\uff0c\u5e76\u4e14\u5177\u6709\u6700\u5c0f\u516c\u5171\u7c7b\u578b\u7684\u7c7b\u578b\u3002\u5fc5\u987b\u81f3\u5c11\u4f20\u9012\u4e00\u4e2a\u53c2\u6570\uff0c\u5426\u5219\u5c06\u4e0d\u6e05\u695a\u8981\u521b\u5efa\u54ea\u79cd\u7c7b\u578b\u7684\u6570\u7ec4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u4e0d\u80fd\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u6765\u521b\u5efa\u4e00\u4e2a\u7a7a\u6570\u7ec4\uff08\u4e3a\u6b64\uff0c\u4f7f\u7528\u4e0a\u9762\u63cf\u8ff0\u7684'emptyArray \\ *'\u51fd\u6570\uff09\u3002<br />\n\u8fd4\u56de'Array\uff08T\uff09'\u7c7b\u578b\u7684\u7ed3\u679c\uff0c\u5176\u4e2d'T'\u662f\u4f20\u9012\u7684\u53c2\u6570\u4e2d\u6700\u5c0f\u7684\u516c\u5171\u7c7b\u578b\u3002</p>\n<h3 id=\"arrayconcat\">arrayConcat<a class=\"headerlink\" href=\"#arrayconcat\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5408\u5e76\u53c2\u6570\u4e2d\u4f20\u9012\u7684\u6240\u6709\u6570\u7ec4\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">arrayConcat(arrays)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>arrays</code> \u2013 \u4efb\u610f\u6570\u91cf\u7684<a href=\"#../../data_types/array/\">Array</a>\u7c7b\u578b\u7684\u53c2\u6570.<br />\n<strong>\u793a\u4f8b</strong></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayConcat</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,3,4,5,6] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arrayelement-arr-n-operator-arr-n\">arrayElement(arr, n), operator arr[n]<a class=\"headerlink\" href=\"#arrayelement-arr-n-operator-arr-n\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ece\u6570\u7ec4<code>arr</code>\u4e2d\u83b7\u53d6\u7d22\u5f15\u4e3a\u201cn\u201d\u7684\u5143\u7d20\u3002 <code>n</code>\u5fc5\u987b\u662f\u4efb\u4f55\u6574\u6570\u7c7b\u578b\u3002<br />\n\u6570\u7ec4\u4e2d\u7684\u7d22\u5f15\u4ece\u4e00\u5f00\u59cb\u3002<br />\n\u652f\u6301\u8d1f\u7d22\u5f15\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u9009\u62e9\u4ece\u672b\u5c3e\u5f00\u59cb\u7f16\u53f7\u7684\u76f8\u5e94\u5143\u7d20\u3002\u4f8b\u5982\uff0c<code>arr [-1]</code>\u662f\u6570\u7ec4\u4e2d\u7684\u6700\u540e\u4e00\u9879\u3002</p>\n<p>\u5982\u679c\u7d22\u5f15\u8d85\u51fa\u6570\u7ec4\u7684\u8fb9\u754c\uff0c\u5219\u8fd4\u56de\u9ed8\u8ba4\u503c\uff08\u6570\u5b57\u4e3a0\uff0c\u5b57\u7b26\u4e32\u4e3a\u7a7a\u5b57\u7b26\u4e32\u7b49\uff09\u3002</p>\n<h3 id=\"has-arr-elem\">has(arr, elem)<a class=\"headerlink\" href=\"#has-arr-elem\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5'arr'\u6570\u7ec4\u662f\u5426\u5177\u6709'elem'\u5143\u7d20\u3002<br />\n\u5982\u679c\u5143\u7d20\u4e0d\u5728\u6570\u7ec4\u4e2d\uff0c\u5219\u8fd4\u56de0;\u5982\u679c\u5728\uff0c\u5219\u8fd4\u56de1\u3002</p>\n<p><code>NULL</code> \u503c\u7684\u5904\u7406\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">has</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">has</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>                       <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"hasall\">hasAll<a class=\"headerlink\" href=\"#hasall\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u4e00\u4e2a\u6570\u7ec4\u662f\u5426\u662f\u53e6\u4e00\u4e2a\u6570\u7ec4\u7684\u5b50\u96c6\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">hasAll(set, subset)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>set</code> \u2013 \u5177\u6709\u4e00\u7ec4\u5143\u7d20\u7684\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u7ec4\u3002</li>\n<li><code>subset</code> \u2013 \u4efb\u4f55\u7c7b\u578b\u7684\u6570\u7ec4\uff0c\u5176\u5143\u7d20\u5e94\u8be5\u88ab\u6d4b\u8bd5\u4e3a<code>set</code>\u7684\u5b50\u96c6\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li><code>1</code>\uff0c \u5982\u679c<code>set</code>\u5305\u542b<code>subset</code>\u4e2d\u7684\u6240\u6709\u5143\u7d20\u3002</li>\n<li><code>0</code>\uff0c \u5426\u5219\u3002</li>\n</ul>\n<p><strong>\u7279\u6b8a\u7684\u5b9a\u4e49</strong></p>\n<ul>\n<li>\u7a7a\u6570\u7ec4\u662f\u4efb\u4f55\u6570\u7ec4\u7684\u5b50\u96c6\u3002</li>\n<li>\u201cNull\u201d\u4f5c\u4e3a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u503c\u8fdb\u884c\u5904\u7406\u3002</li>\n<li>\u5ffd\u7565\u4e24\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u503c\u7684\u987a\u5e8f\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<p><code>SELECT hasAll([], [])</code> returns 1.</p>\n<p><code>SELECT hasAll([1, Null], [Null])</code> returns 1.</p>\n<p><code>SELECT hasAll([1.0, 2, 3, 4], [1, 3])</code> returns 1.</p>\n<p><code>SELECT hasAll(['a', 'b'], ['a'])</code> returns 1.</p>\n<p><code>SELECT hasAll([1], ['a'])</code> returns 0.</p>\n<p><code>SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [3, 5]])</code> returns 0.</p>\n<h3 id=\"hasany\">hasAny<a class=\"headerlink\" href=\"#hasany\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u4e24\u4e2a\u6570\u7ec4\u662f\u5426\u5b58\u5728\u4ea4\u96c6\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">hasAny(array1, array2)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>array1</code> \u2013 \u5177\u6709\u4e00\u7ec4\u5143\u7d20\u7684\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u7ec4\u3002</li>\n<li><code>array2</code> \u2013 \u5177\u6709\u4e00\u7ec4\u5143\u7d20\u7684\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u7ec4\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li><code>1</code>\uff0c \u5982\u679c<code>array1</code>\u548c<code>array2</code>\u5b58\u5728\u4ea4\u96c6\u3002</li>\n<li><code>0</code>\uff0c \u5426\u5219\u3002</li>\n</ul>\n<p><strong>\u7279\u6b8a\u7684\u5b9a\u4e49</strong></p>\n<ul>\n<li>\u201cNull\u201d\u4f5c\u4e3a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u503c\u8fdb\u884c\u5904\u7406\u3002</li>\n<li>\u5ffd\u7565\u4e24\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u503c\u7684\u987a\u5e8f\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<p><code>SELECT hasAny([1], [])</code> returns <code>0</code>.</p>\n<p><code>SELECT hasAny([Null], [Null, 1])</code> returns <code>1</code>.</p>\n<p><code>SELECT hasAny([-128, 1., 512], [1])</code> returns <code>1</code>.</p>\n<p><code>SELECT hasAny([[1, 2], [3, 4]], ['a', 'c'])</code> returns <code>0</code>.</p>\n<p><");
            
            document.write("code>SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [1, 2]])</code> returns <code>1</code>.</p>\n<h3 id=\"indexof-arr-x\">indexOf(arr, x)<a class=\"headerlink\" href=\"#indexof-arr-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u6570\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u2018x\u2019\u5143\u7d20\u7684\u7d22\u5f15\uff08\u4ece1\u5f00\u59cb\uff09\uff0c\u5982\u679c\u2018x\u2019\u5143\u7d20\u4e0d\u5b58\u5728\u5728\u6570\u7ec4\u4e2d\uff0c\u5219\u8fd4\u56de0\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">indexOf</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"k\">NULL</span><span class=\"p\">,</span><span class=\"k\">NULL</span><span class=\"p\">],</span><span class=\"k\">NULL</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">indexOf</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">indexOf</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>                                 <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8bbe\u7f6e\u4e3a\u201cNULL\u201d\u7684\u5143\u7d20\u5c06\u4f5c\u4e3a\u666e\u901a\u7684\u5143\u7d20\u503c\u5904\u7406\u3002</p>\n<h3 id=\"countequal-arr-x\">countEqual(arr, x)<a class=\"headerlink\" href=\"#countequal-arr-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u6570\u7ec4\u4e2d\u7b49\u4e8ex\u7684\u5143\u7d20\u7684\u4e2a\u6570\u3002\u76f8\u5f53\u4e8earrayCount\uff08elem  - &gt; elem = x\uff0carr\uff09\u3002</p>\n<p><code>NULL</code>\u503c\u5c06\u4f5c\u4e3a\u5355\u72ec\u7684\u5143\u7d20\u503c\u5904\u7406\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">countEqual</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">countEqual</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>                                    <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"array_functions-arrayenumerate\">arrayEnumerate(arr)<a class=\"headerlink\" href=\"#array_functions-arrayenumerate\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de Array [1, 2, 3, ..., length (arr) ]</p>\n<p>\u6b64\u529f\u80fd\u901a\u5e38\u4e0eARRAY JOIN\u4e00\u8d77\u4f7f\u7528\u3002\u5b83\u5141\u8bb8\u5728\u5e94\u7528ARRAY JOIN\u540e\u4e3a\u6bcf\u4e2a\u6570\u7ec4\u8ba1\u7b97\u4e00\u6b21\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">Reaches</span><span class=\"p\">,</span>\n    <span class=\"n\">countIf</span><span class=\"p\">(</span><span class=\"n\">num</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Hits</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span>\n    <span class=\"n\">GoalsReached</span><span class=\"p\">,</span>\n    <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">GoalsReached</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">160656</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500Reaches\u2500\u252c\u2500\u2500Hits\u2500\u2510</span>\n<span class=\"err\">\u2502   95606 \u2502 31406 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0cReaches\u662f\u8f6c\u6362\u6b21\u6570\uff08\u5e94\u7528ARRAY JOIN\u540e\u63a5\u6536\u7684\u5b57\u7b26\u4e32\uff09\uff0cHits\u662f\u6d4f\u89c8\u91cf\uff08ARRAY JOIN\u4e4b\u524d\u7684\u5b57\u7b26\u4e32\uff09\u3002\u5728\u8fd9\u79cd\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u66f4\u8f7b\u677e\u5730\u83b7\u5f97\u76f8\u540c\u7684\u7ed3\u679c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">GoalsReached</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">Reaches</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">Hits</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">160656</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">notEmpty</span><span class=\"p\">(</span><span class=\"n\">GoalsReached</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500Reaches\u2500\u252c\u2500\u2500Hits\u2500\u2510</span>\n<span class=\"err\">\u2502   95606 \u2502 31406 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u6b64\u529f\u80fd\u4e5f\u53ef\u7528\u4e8e\u9ad8\u9636\u51fd\u6570\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u83b7\u53d6\u4e0e\u6761\u4ef6\u5339\u914d\u7684\u5143\u7d20\u7684\u6570\u7ec4\u7d22\u5f15\u3002</p>\n<h3 id=\"arrayenumerateuniq-arr\">arrayEnumerateUniq(arr, ...)<a class=\"headerlink\" href=\"#arrayenumerateuniq-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e0e\u6e90\u6570\u7ec4\u5927\u5c0f\u76f8\u540c\u7684\u6570\u7ec4\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u8868\u793a\u4e0e\u5176\u4e0b\u6807\u5bf9\u5e94\u7684\u6e90\u6570\u7ec4\u5143\u7d20\u5728\u6e90\u6570\u7ec4\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u3002<br />\n\u4f8b\u5982\uff1aarrayEnumerateUniq\uff08\\ [10,20,10,30 ]\uff09= \\ [1,1,2,1 ]\u3002</p>\n<p>\u4f7f\u7528ARRAY JOIN\u548c\u6570\u7ec4\u5143\u7d20\u7684\u805a\u5408\u65f6\uff0c\u6b64\u51fd\u6570\u5f88\u6709\u7528\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span> <span class=\"k\">AS</span> <span class=\"n\">GoalID</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Reaches</span><span class=\"p\">,</span>\n    <span class=\"n\">sumIf</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">,</span> <span class=\"n\">num</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Visits</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span>\n    <span class=\"n\">Goals</span><span class=\"p\">,</span>\n    <span class=\"n\">arrayEnumerateUniq</span><span class=\"p\">(</span><span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">160656</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">GoalID</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">Reaches</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500GoalID\u2500\u252c\u2500Reaches\u2500\u252c\u2500Visits\u2500\u2510</span>\n<span class=\"err\">\u2502   53225 \u2502    3214 \u2502   1097 \u2502</span>\n<span class=\"err\">\u2502 2825062 \u2502    3188 \u2502   1097 \u2502</span>\n<span class=\"err\">\u2502   56600 \u2502    2803 \u2502    488 \u2502</span>\n<span class=\"err\">\u2502 1989037 \u2502    2401 \u2502    365 \u2502</span>\n<span class=\"err\">\u2502 2830064 \u2502    2396 \u2502    910 \u2502</span>\n<span class=\"err\">\u2502 1113562 \u2502    2372 \u2502    373 \u2502</span>\n<span class=\"err\">\u2502 3270895 \u2502    2262 \u2502    812 \u2502</span>\n<span class=\"err\">\u2502 1084657 \u2502    2262 \u2502    345 \u2502</span>\n<span class=\"err\">\u2502   56599 \u2502    2260 \u2502    799 \u2502</span>\n<span class=\"err\">\u2502 3271094 \u2502    2256 \u2502    812 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6bcf\u4e2aGoalID\u90fd\u8ba1\u7b97\u8f6c\u6362\u6b21\u6570\uff08\u76ee\u6807\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u8fbe\u5230\u7684\u76ee\u6807\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u8f6c\u6362\uff09\u548c\u4f1a\u8bdd\u6570\u3002\u5982\u679c\u6ca1\u6709ARRAY JOIN\uff0c\u6211\u4eec\u4f1a\u5c06\u4f1a\u8bdd\u6570\u8ba1\u4e3a\u603b\u548c\uff08Sign\uff09\u3002\u4f46\u5728\u8fd9\u79cd\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u884c\u4e58\u4ee5\u5d4c\u5957\u7684Goals\u7ed3\u6784\uff0c\u56e0\u6b64\u4e3a\u4e86\u5728\u6b64\u4e4b\u540e\u8ba1\u7b97\u6bcf\u4e2a\u4f1a\u8bdd\u4e00\u6b21\uff0c\u6211\u4eec\u5c06\u4e00\u4e2a\u6761\u4ef6\u5e94\u7528\u4e8earrayEnumerateUniq\uff08Goals.ID\uff09\u51fd\u6570\u7684\u503c\u3002</p>\n<p>arrayEnumerateUniq\u51fd\u6570\u53ef\u4ee5\u4f7f\u7528\u4e0e\u53c2\u6570\u5927\u5c0f\u76f8\u540c\u7684\u591a\u4e2a\u6570\u7ec4\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8e\u6240\u6709\u9635\u5217\u4e2d\u76f8\u540c\u4f4d\u7f6e\u7684\u5143\u7d20\u5143\u7ec4\uff0c\u8003\u8651\u552f\u4e00\u6027\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayEnumerateUniq</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,1,1,2,1] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5f53\u4f7f\u7528\u5e26\u6709\u5d4c\u5957\u6570\u636e\u7ed3\u6784\u7684ARRAY JOIN\u5e76\u5728\u6b64\u7ed3\u6784\u4e2d\u8de8\u591a\u4e2a\u5143\u7d20\u8fdb\u4e00\u6b65\u805a\u5408\u65f6\uff0c\u8fd9\u662f\u5fc5\u9700\u7684\u3002</p>\n<h3 id=\"arraypopback\">arrayPopBack<a class=\"headerlink\" href=\"#arraypopback\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ece\u6570\u7ec4\u4e2d\u5220\u9664\u6700\u540e\u4e00\u9879\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">arrayPopBack(array)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>array</code> \u2013 \u6570\u7ec4\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayPopBack</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehi");
            
            document.write("lite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arraypopfront\">arrayPopFront<a class=\"headerlink\" href=\"#arraypopfront\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ece\u6570\u7ec4\u4e2d\u5220\u9664\u7b2c\u4e00\u9879\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">arrayPopFront(array)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>array</code> \u2013 \u6570\u7ec4\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayPopFront</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [2,3] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arraypushback\">arrayPushBack<a class=\"headerlink\" href=\"#arraypushback\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\u5230\u6570\u7ec4\u7684\u672b\u5c3e\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">arrayPushBack(array, single_value)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>array</code> \u2013 \u6570\u7ec4\u3002</li>\n<li><code>single_value</code> \u2013 \u5355\u4e2a\u503c\u3002\u53ea\u80fd\u5c06\u6570\u5b57\u6dfb\u52a0\u5230\u5e26\u6570\u5b57\u7684\u6570\u7ec4\u4e2d\uff0c\u5e76\u4e14\u53ea\u80fd\u5c06\u5b57\u7b26\u4e32\u6dfb\u52a0\u5230\u5b57\u7b26\u4e32\u6570\u7ec4\u4e2d\u3002\u6dfb\u52a0\u6570\u5b57\u65f6\uff0cClickHouse\u4f1a\u81ea\u52a8\u4e3a\u6570\u7ec4\u7684\u6570\u636e\u7c7b\u578b\u8bbe\u7f6e<code>single_value</code>\u7c7b\u578b\u3002\u6709\u5173ClickHouse\u4e2d\u6570\u636e\u7c7b\u578b\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u201c<a href=\"#data_types\">\u6570\u636e\u7c7b\u578b</a>\u201d\u3002\u53ef\u4ee5\u662f'NULL<code>\u3002\u8be5\u51fd\u6570\u5411\u6570\u7ec4\u6dfb\u52a0\u4e00\u4e2a\u201cNULL\u201d\u5143\u7d20\uff0c\u6570\u7ec4\u5143\u7d20\u7684\u7c7b\u578b\u8f6c\u6362\u4e3a</code>Nullable`\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayPushBack</span><span class=\"p\">([</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">],</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [&#39;a&#39;,&#39;b&#39;] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arraypushfront\">arrayPushFront<a class=\"headerlink\" href=\"#arraypushfront\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u4e00\u4e2a\u5143\u7d20\u6dfb\u52a0\u5230\u6570\u7ec4\u7684\u5f00\u5934\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">arrayPushFront(array, single_value)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>array</code> \u2013 \u6570\u7ec4\u3002</li>\n<li><code>single_value</code> \u2013 \u5355\u4e2a\u503c\u3002\u53ea\u80fd\u5c06\u6570\u5b57\u6dfb\u52a0\u5230\u5e26\u6570\u5b57\u7684\u6570\u7ec4\u4e2d\uff0c\u5e76\u4e14\u53ea\u80fd\u5c06\u5b57\u7b26\u4e32\u6dfb\u52a0\u5230\u5b57\u7b26\u4e32\u6570\u7ec4\u4e2d\u3002\u6dfb\u52a0\u6570\u5b57\u65f6\uff0cClickHouse\u4f1a\u81ea\u52a8\u4e3a\u6570\u7ec4\u7684\u6570\u636e\u7c7b\u578b\u8bbe\u7f6e<code>single_value</code>\u7c7b\u578b\u3002\u6709\u5173ClickHouse\u4e2d\u6570\u636e\u7c7b\u578b\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u201c<a href=\"#data_types\">\u6570\u636e\u7c7b\u578b</a>\u201d\u3002\u53ef\u4ee5\u662f'NULL<code>\u3002\u8be5\u51fd\u6570\u5411\u6570\u7ec4\u6dfb\u52a0\u4e00\u4e2a\u201cNULL\u201d\u5143\u7d20\uff0c\u6570\u7ec4\u5143\u7d20\u7684\u7c7b\u578b\u8f6c\u6362\u4e3a</code>Nullable`\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayPushBack</span><span class=\"p\">([</span><span class=\"s1\">&#39;b&#39;</span><span class=\"p\">],</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [&#39;a&#39;,&#39;b&#39;] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arrayresize\">arrayResize<a class=\"headerlink\" href=\"#arrayresize\" title=\"Permanent link\">&para;</a></h3>\n<p>\u66f4\u6539\u6570\u7ec4\u7684\u957f\u5ea6\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">arrayResize(array, size[, extender])</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>array</code> \u2014 \u6570\u7ec4.</li>\n<li><code>size</code> \u2014 \u6570\u7ec4\u6240\u9700\u7684\u957f\u5ea6\u3002<ul>\n<li>\u5982\u679c<code>size</code>\u5c0f\u4e8e\u6570\u7ec4\u7684\u539f\u59cb\u5927\u5c0f\uff0c\u5219\u6570\u7ec4\u5c06\u4ece\u53f3\u4fa7\u622a\u65ad\u3002</li>\n</ul>\n</li>\n<li>\u5982\u679c<code>size</code>\u5927\u4e8e\u6570\u7ec4\u7684\u521d\u59cb\u5927\u5c0f\uff0c\u5219\u4f7f\u7528<code>extender</code>\u503c\u6216\u6570\u7ec4\u9879\u7684\u6570\u636e\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\u5c06\u6570\u7ec4\u6269\u5c55\u5230\u53f3\u4fa7\u3002</li>\n<li><code>extender</code> \u2014 \u6269\u5c55\u6570\u7ec4\u7684\u503c\u3002\u53ef\u4ee5\u662f'NULL`\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c:</strong></p>\n<p>\u4e00\u4e2a<code>size</code>\u957f\u5ea6\u7684\u6570\u7ec4\u3002</p>\n<p><strong>\u8c03\u7528\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayResize</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">arrayResize</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"mi\">3</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">]</span>             <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayResize</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">arrayResize</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"k\">NULL</span><span class=\"p\">,</span><span class=\"k\">NULL</span><span class=\"p\">]</span>             <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arrayslice\">arraySlice<a class=\"headerlink\" href=\"#arrayslice\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u5b50\u6570\u7ec4\uff0c\u5305\u542b\u4ece\u6307\u5b9a\u4f4d\u7f6e\u7684\u6307\u5b9a\u957f\u5ea6\u7684\u5143\u7d20\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">arraySlice(array, offset[, length])</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>array</code> \u2013  \u6570\u7ec4\u3002</li>\n<li><code>offset</code> \u2013 \u6570\u7ec4\u7684\u504f\u79fb\u3002\u6b63\u503c\u8868\u793a\u5de6\u4fa7\u7684\u504f\u79fb\u91cf\uff0c\u8d1f\u503c\u8868\u793a\u53f3\u4fa7\u7684\u7f29\u8fdb\u503c\u3002\u6570\u7ec4\u4e0b\u6807\u4ece1\u5f00\u59cb\u3002</li>\n<li><code>length</code> - \u5b50\u6570\u7ec4\u7684\u957f\u5ea6\u3002\u5982\u679c\u6307\u5b9a\u8d1f\u503c\uff0c\u5219\u8be5\u51fd\u6570\u8fd4\u56de<code>[offset\uff0carray_length  -  length</code>\u3002\u5982\u679c\u7701\u7565\u8be5\u503c\uff0c\u5219\u8be5\u51fd\u6570\u8fd4\u56de<code>[offset\uff0cthe_end_of_array]</code>\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySlice</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [2,NULL,4] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8bbe\u7f6e\u4e3a\u201cNULL\u201d\u7684\u6570\u7ec4\u5143\u7d20\u4f5c\u4e3a\u666e\u901a\u7684\u6570\u7ec4\u5143\u7d20\u503c\u5904\u7406\u3002</p>\n<h3 id=\"array_functions-reverse-sort\">arraySort([func,] arr, ...)<a class=\"headerlink\" href=\"#array_functions-reverse-sort\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee5\u5347\u5e8f\u5bf9<code>arr</code>\u6570\u7ec4\u7684\u5143\u7d20\u8fdb\u884c\u6392\u5e8f\u3002\u5982\u679c\u6307\u5b9a\u4e86<code>func</code>\u51fd\u6570\uff0c\u5219\u6392\u5e8f\u987a\u5e8f\u7531<code>func</code>\u51fd\u6570\u7684\u8c03\u7528\u7ed3\u679c\u51b3\u5b9a\u3002\u5982\u679c<code>func</code>\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\uff0c\u90a3\u4e48<code>arraySort</code>\u51fd\u6570\u4e5f\u5c06\u89e3\u6790\u4e0e<code>func</code>\u51fd\u6570\u53c2\u6570\u76f8\u540c\u6570\u91cf\u7684\u6570\u7ec4\u53c2\u6570\u3002\u66f4\u8be6\u7ec6\u7684\u793a\u4f8b\u5728<code>arraySort</code>\u7684\u672b\u5c3e\u3002</p>\n<p>\u6574\u6570\u6392\u5e8f\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arraySort([1, 3, 3, 0])\u2500\u2510</span>\n<span class=\"err\">\u2502 [0,1,3,3]               \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5b57\u7b26\u4e32\u6392\u5e8f\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">([</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;!&#39;</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arraySort([&#39;hello&#39;, &#39;world&#39;, &#39;!&#39;])\u2500\u2510</span>\n<span class=\"err\">\u2502 [&#39;!&#39;,&#39;hello&#39;,&#39;world&#39;]              \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><code>NULL</code>\uff0c<code>NaN</code>\u548c<code>Inf</code>\u7684\u6392\u5e8f\u987a\u5e8f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"n\">inf</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"n\">inf</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arraySort([1, nan, 2, NULL, 3, nan, -4, NULL, inf, -inf])\u2500\u2510</span>\n<span class=\"err\">\u2502 [-inf,-4,1,2,3,inf,nan,nan,NULL,NULL]                     \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<ul>\n<li><code>-Inf</code> \u662f\u6570\u7ec4\u4e2d\u7684\u7b2c\u4e00\u4e2a\u3002</li>\n<li><code>NULL</code> \u662f\u6570\u7ec4\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u3002</li>\n<li><code>NaN</code> \u5728<code>NULL</code>\u7684\u524d\u9762\u3002</li>\n<li><code>Inf</code> \u5728<code>NaN</code>\u7684\u524d\u9762\u3002</li>\n</ul>\n<p>\u6ce8\u610f\uff1a<code>arraySort</code>\u662f<a href=\"#higher_order_functions/\">\u9ad8\u9636\u51fd\u6570</a>\u3002\u60a8\u53ef\u4ee5\u5c06lambda\u51fd\u6570\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9\u5b83\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6392\u5e8f\u987a\u5e8f\u7531lambda\u51fd\u6570\u7684\u8c03\u7528\u7ed3\u679c\u51b3\u5b9a\u3002</p>\n<p>\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u5982\u4e0b\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span clas");
            
            document.write("s=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"o\">-</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [3,2,1] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5bf9\u4e8e\u6e90\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\uff0clambda\u51fd\u6570\u8fd4\u56de\u6392\u5e8f\u952e\uff0c\u5373[1 -&gt; -1, 2 -&gt; -2, 3 -&gt; -3]\u3002\u7531\u4e8e<code>arraySort</code>\u51fd\u6570\u6309\u5347\u5e8f\u5bf9\u952e\u8fdb\u884c\u6392\u5e8f\uff0c\u56e0\u6b64\u7ed3\u679c\u4e3a[3,2,1]\u3002\u56e0\u6b64\uff0c<code>(x) -&gt; -x</code> lambda\u51fd\u6570\u5c06\u6392\u5e8f\u8bbe\u7f6e\u4e3a<a href=\"#array_functions-reverse-sort\">\u964d\u5e8f</a>\u3002</p>\n<p>lambda\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u9700\u8981\u4e3a<code>arraySort</code>\u4f20\u9012\u4e0elambda\u53c2\u6570\u4e2a\u6570\u76f8\u540c\u7684\u6570\u7ec4\u3002\u51fd\u6570\u4f7f\u7528\u7b2c\u4e00\u4e2a\u8f93\u5165\u7684\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u7ec4\u6210\u8fd4\u56de\u7ed3\u679c\uff1b\u4f7f\u7528\u63a5\u4e0b\u6765\u4f20\u5165\u7684\u6570\u7ec4\u4f5c\u4e3a\u6392\u5e8f\u952e\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [&#39;world&#39;, &#39;hello&#39;] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u91cc\uff0c\u5728\u7b2c\u4e8c\u4e2a\u6570\u7ec4\uff08[2, 1]\uff09\u4e2d\u5b9a\u4e49\u4e86\u7b2c\u4e00\u4e2a\u6570\u7ec4\uff08['hello'\uff0c'world']\uff09\u7684\u76f8\u5e94\u5143\u7d20\u7684\u6392\u5e8f\u952e\uff0c\u5373['hello' -&gt; 2\uff0c'world' -&gt; 1]\u3002 \u7531\u4e8elambda\u51fd\u6570\u4e2d\u6ca1\u6709\u4f7f\u7528<code>x</code>\uff0c\u56e0\u6b64\u6e90\u6570\u7ec4\u4e2d\u7684\u5b9e\u9645\u503c\u4e0d\u4f1a\u5f71\u54cd\u7ed3\u679c\u7684\u987a\u5e8f\u3002\u6240\u4ee5\uff0c\u2018world\u2019\u5c06\u662f\u7ed3\u679c\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u2018hello\u2019\u5c06\u662f\u7ed3\u679c\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u3002</p>\n<p>\u5176\u4ed6\u793a\u4f8b\u5982\u4e0b\u6240\u793a\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s1\">&#39;c&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500</span><span class=\"n\">res</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"o\">-</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500</span><span class=\"n\">res</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"admonition \u6ce8\u610f\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u4e3a\u4e86\u63d0\u9ad8\u6392\u5e8f\u6548\u7387\uff0c \u4f7f\u7528\u4e86<a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"external nofollow noreferrer\">Schwartzian transform</a>\u3002</p>\n</div>\n<h3 id=\"array_functions-reverse-sort\">arrayReverseSort([func,] arr, ...)<a class=\"headerlink\" href=\"#array_functions-reverse-sort\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee5\u964d\u5e8f\u5bf9<code>arr</code>\u6570\u7ec4\u7684\u5143\u7d20\u8fdb\u884c\u6392\u5e8f\u3002\u5982\u679c\u6307\u5b9a\u4e86<code>func</code>\u51fd\u6570\uff0c\u5219\u6392\u5e8f\u987a\u5e8f\u7531<code>func</code>\u51fd\u6570\u7684\u8c03\u7528\u7ed3\u679c\u51b3\u5b9a\u3002\u5982\u679c<code>func</code>\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\uff0c\u90a3\u4e48<code>arrayReverseSort</code>\u51fd\u6570\u4e5f\u5c06\u89e3\u6790\u4e0e<code>func</code>\u51fd\u6570\u53c2\u6570\u76f8\u540c\u6570\u91cf\u7684\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u3002\u66f4\u8be6\u7ec6\u7684\u793a\u4f8b\u5728<code>arrayReverseSort</code>\u7684\u672b\u5c3e\u3002</p>\n<p>\u6574\u6570\u6392\u5e8f\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arrayReverseSort([1, 3, 3, 0])\u2500\u2510</span>\n<span class=\"err\">\u2502 [3,3,1,0]                      \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5b57\u7b26\u4e32\u6392\u5e8f\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">([</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;!&#39;</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arrayReverseSort([&#39;hello&#39;, &#39;world&#39;, &#39;!&#39;])\u2500\u2510</span>\n<span class=\"err\">\u2502 [&#39;world&#39;,&#39;hello&#39;,&#39;!&#39;]                     \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><code>NULL</code>\uff0c<code>NaN</code>\u548c<code>Inf</code>\u7684\u6392\u5e8f\u987a\u5e8f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"n\">inf</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"n\">inf</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500</span><span class=\"n\">res</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"n\">inf</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"o\">-</span><span class=\"n\">inf</span><span class=\"p\">,</span><span class=\"n\">nan</span><span class=\"p\">,</span><span class=\"n\">nan</span><span class=\"p\">,</span><span class=\"k\">NULL</span><span class=\"p\">,</span><span class=\"k\">NULL</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<ul>\n<li><code>Inf</code> \u662f\u6570\u7ec4\u4e2d\u7684\u7b2c\u4e00\u4e2a\u3002</li>\n<li><code>NULL</code> \u662f\u6570\u7ec4\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u3002</li>\n<li><code>NaN</code> \u5728<code>NULL</code>\u7684\u524d\u9762\u3002</li>\n<li><code>-Inf</code> \u5728<code>NaN</code>\u7684\u524d\u9762\u3002</li>\n</ul>\n<p>\u6ce8\u610f\uff1a<code>arraySort</code>\u662f<a href=\"#higher_order_functions/\">\u9ad8\u9636\u51fd\u6570</a>\u3002\u60a8\u53ef\u4ee5\u5c06lambda\u51fd\u6570\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9\u5b83\u3002\u5982\u4e0b\u793a\u4f8b\u6240\u793a\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"o\">-</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,3] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u6570\u7ec4\u6309\u4ee5\u4e0b\u65b9\u5f0f\u6392\u5e8f\uff1a<br />\nThe array is sorted in the following way:</p>\n<ol>\n<li>\u9996\u5148\uff0c\u6839\u636elambda\u51fd\u6570\u7684\u8c03\u7528\u7ed3\u679c\u5bf9\u6e90\u6570\u7ec4\uff08[1, 2, 3]\uff09\u8fdb\u884c\u6392\u5e8f\u3002 \u7ed3\u679c\u662f[3, 2, 1]\u3002</li>\n<li>\u53cd\u8f6c\u4e0a\u4e00\u6b65\u83b7\u5f97\u7684\u6570\u7ec4\u3002 \u6240\u4ee5\uff0c\u6700\u7ec8\u7684\u7ed3\u679c\u662f[1, 2, 3]\u3002</li>\n</ol>\n<p>lambda\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u9700\u8981\u4e3a<code>arrayReverseSort</code>\u4f20\u9012\u4e0elambda\u53c2\u6570\u4e2a\u6570\u76f8\u540c\u7684\u6570\u7ec4\u3002\u51fd\u6570\u4f7f\u7528\u7b2c\u4e00\u4e2a\u8f93\u5165\u7684\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u7ec4\u6210\u8fd4\u56de\u7ed3\u679c\uff1b\u4f7f\u7528\u63a5\u4e0b\u6765\u4f20\u5165\u7684\u6570\u7ec4\u4f5c\u4e3a\u6392\u5e8f\u952e\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></");
            
            document.write("div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500</span><span class=\"n\">res</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;world&#39;</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6570\u7ec4\u6309\u4ee5\u4e0b\u65b9\u5f0f\u6392\u5e8f\uff1a</p>\n<ol>\n<li>\u9996\u5148\uff0c\u6839\u636elambda\u51fd\u6570\u7684\u8c03\u7528\u7ed3\u679c\u5bf9\u6e90\u6570\u7ec4\uff08['hello'\uff0c'world']\uff09\u8fdb\u884c\u6392\u5e8f\u3002 \u5176\u4e2d\uff0c\u5728\u7b2c\u4e8c\u4e2a\u6570\u7ec4\uff08[2,1]\uff09\u4e2d\u5b9a\u4e49\u4e86\u6e90\u6570\u7ec4\u4e2d\u76f8\u5e94\u5143\u7d20\u7684\u6392\u5e8f\u952e\u3002 \u6240\u4ee5\uff0c\u6392\u5e8f\u7ed3\u679c['world'\uff0c'hello']\u3002</li>\n<li>\u53cd\u8f6c\u4e0a\u4e00\u6b65\u9aa4\u4e2d\u83b7\u5f97\u7684\u6392\u5e8f\u6570\u7ec4\u3002 \u6240\u4ee5\uff0c\u6700\u7ec8\u7684\u7ed3\u679c\u662f['hello'\uff0c'world']\u3002</li>\n</ol>\n<p>\u5176\u4ed6\u793a\u4f8b\u5982\u4e0b\u6240\u793a\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c&#39;</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500</span><span class=\"n\">res</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"o\">-</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500</span><span class=\"n\">res</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arrayuniq-arr\">arrayUniq(arr, ...)<a class=\"headerlink\" href=\"#arrayuniq-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u4f20\u9012\u4e00\u4e2a\u53c2\u6570\uff0c\u5219\u8ba1\u7b97\u6570\u7ec4\u4e2d\u4e0d\u540c\u5143\u7d20\u7684\u6570\u91cf\u3002<br />\n\u5982\u679c\u4f20\u9012\u4e86\u591a\u4e2a\u53c2\u6570\uff0c\u5219\u5b83\u8ba1\u7b97\u591a\u4e2a\u6570\u7ec4\u4e2d\u76f8\u5e94\u4f4d\u7f6e\u7684\u4e0d\u540c\u5143\u7d20\u5143\u7ec4\u7684\u6570\u91cf\u3002</p>\n<p>\u5982\u679c\u8981\u83b7\u53d6\u6570\u7ec4\u4e2d\u552f\u4e00\u9879\u7684\u5217\u8868\uff0c\u53ef\u4ee5\u4f7f\u7528arrayReduce\uff08'groupUniqArray'\uff0carr\uff09\u3002</p>\n<h3 id=\"array_functions-join\">arrayJoin(arr)<a class=\"headerlink\" href=\"#array_functions-join\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e00\u4e2a\u7279\u6b8a\u7684\u529f\u80fd\u3002\u8bf7\u53c2\u89c1<a href=\"#functions_arrayjoin\">\u201cArrayJoin\u51fd\u6570\u201d</a>\u90e8\u5206\u3002</p>\n<h3 id=\"arraydifference-arr\">arrayDifference(arr)<a class=\"headerlink\" href=\"#arraydifference-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u6240\u6709\u76f8\u90bb\u5143\u7d20\u5bf9\u4e4b\u95f4\u7684\u5dee\u503c\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayDifference</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arrayDifference([1, 2, 3, 4])\u2500\u2510</span>\n<span class=\"err\">\u2502 [0,1,1,1]                     \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arraydistinct-arr\">arrayDistinct(arr)<a class=\"headerlink\" href=\"#arraydistinct-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u6240\u6709\u6570\u7ec4\u4e2d\u4e0d\u540c\u5143\u7d20\u7684\u6570\u7ec4\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayDistinct</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arrayDistinct([1, 2, 2, 3, 1])\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,3]                        \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arrayenumeratedense-arr\">arrayEnumerateDense(arr)<a class=\"headerlink\" href=\"#arrayenumeratedense-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e0e\u6e90\u6570\u7ec4\u5927\u5c0f\u76f8\u540c\u7684\u6570\u7ec4\uff0c\u6307\u793a\u6bcf\u4e2a\u5143\u7d20\u9996\u6b21\u51fa\u73b0\u5728\u6e90\u6570\u7ec4\u4e2d\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff1aarrayEnumerateDense\uff08[10,20,10,30]\uff09= [1,2,1,3]\u3002</p>\n<h3 id=\"arrayintersect-arr\">arrayIntersect(arr)<a class=\"headerlink\" href=\"#arrayintersect-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u6240\u6709\u6570\u7ec4\u5143\u7d20\u7684\u4ea4\u96c6\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">arrayIntersect</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">no_intersect</span><span class=\"p\">,</span>\n    <span class=\"n\">arrayIntersect</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"k\">intersect</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500no_intersect\u2500\u252c\u2500intersect\u2500\u2510</span>\n<span class=\"err\">\u2502 []           \u2502 [1]       \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"arrayreduce-agg-func-arr1\">arrayReduce(agg_func, arr1, ...)<a class=\"headerlink\" href=\"#arrayreduce-agg-func-arr1\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u805a\u5408\u51fd\u6570\u5e94\u7528\u4e8e\u6570\u7ec4\u5e76\u8fd4\u56de\u5176\u7ed3\u679c\u3002\u5982\u679c\u805a\u5408\u51fd\u6570\u5177\u6709\u591a\u4e2a\u53c2\u6570\uff0c\u5219\u6b64\u51fd\u6570\u53ef\u5e94\u7528\u4e8e\u76f8\u540c\u5927\u5c0f\u7684\u591a\u4e2a\u6570\u7ec4\u3002</p>\n<p>arrayReduce\uff08'agg_func'\uff0carr1\uff0c...\uff09 - \u5c06\u805a\u5408\u51fd\u6570<code>agg_func</code>\u5e94\u7528\u4e8e\u6570\u7ec4<code>arr1 ...</code>\u3002\u5982\u679c\u4f20\u9012\u4e86\u591a\u4e2a\u6570\u7ec4\uff0c\u5219\u76f8\u5e94\u4f4d\u7f6e\u4e0a\u7684\u5143\u7d20\u5c06\u4f5c\u4e3a\u591a\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9\u805a\u5408\u51fd\u6570\u3002\u4f8b\u5982\uff1aSELECT arrayReduce\uff08'max'\uff0c[1,2,3]\uff09= 3</p>\n<h3 id=\"arrayreverse-arr\">arrayReverse(arr)<a class=\"headerlink\" href=\"#arrayreverse-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e0e\u6e90\u6570\u7ec4\u5927\u5c0f\u76f8\u540c\u7684\u6570\u7ec4\uff0c\u5305\u542b\u53cd\u8f6c\u6e90\u6570\u7ec4\u7684\u6240\u6709\u5143\u7d20\u7684\u7ed3\u679c\u3002</p>\n<p><a name=\"../../../../../query_language/functions/splitting_merging_functions/\"></a><a name=\"../../functions/splitting_merging_functions/\"></a><a name=\"functions/splitting_merging_functions/\"></a><a name=\"../functions/splitting_merging_functions/\"></a><a name=\"../../../functions/splitting_merging_functions/\"></a><a name=\"../../../../../../functions/splitting_merging_functions/\"></a><a name=\"../query_language/functions/splitting_merging_functions/\"></a><a name=\"../../../../functions/splitting_merging_functions/\"></a><a name=\"../../query_language/functions/splitting_merging_functions/\"></a><a name=\"query_language/functions/splitting_merging_functions/\"></a><a name=\"../../../query_language/functions/splitting_merging_functions/\"></a><a name=\"../../../../../functions/splitting_merging_functions/\"></a><a name=\"../../../../query_language/functions/splitting_merging_functions/\"></a><a name=\"splitting_merging_functions/\"></a></p>\n<h2 id=\"zi-fu-chuan-chai-fen-he-bing-han-shu\">\u5b57\u7b26\u4e32\u62c6\u5206\u5408\u5e76\u51fd\u6570<a class=\"headerlink\" href=\"#zi-fu-chuan-chai-fen-he-bing-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"splitbychar-separator-s\">splitByChar(separator, s)<a class=\"headerlink\" href=\"#splitbychar-separator-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u5b57\u7b26\u4e32\u4ee5\u2018separator\u2019\u62c6\u5206\u6210\u591a\u4e2a\u5b50\u4e32\u3002\u2018separator\u2019\u5fc5\u987b\u4e3a\u4ec5\u5305\u542b\u4e00\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u5e38\u91cf\u3002<br />\n\u8fd4\u56de\u62c6\u5206\u540e\u7684\u5b50\u4e32\u7684\u6570\u7ec4\u3002 \u5982\u679c\u5206\u9694\u7b26\u51fa\u73b0\u5728\u5b57\u7b26\u4e32\u7684\u5f00\u5934\u6216\u7ed3\u5c3e\uff0c\u6216\u8005\u5982\u679c\u6709\u591a\u4e2a\u8fde\u7eed\u7684\u5206\u9694\u7b26\uff0c\u5219\u5c06\u5728\u5bf9\u5e94\u4f4d\u7f6e\u586b\u5145\u7a7a\u7684\u5b50\u4e32\u3002</p>\n<h3 id=\"splitbystring-separator-s\">splitByString(separator, s)<a class=\"headerlink\" href=\"#splitbystring-separator-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e\u4e0a\u9762\u76f8\u540c\uff0c\u4f46\u5b83\u4f7f\u7528\u591a\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u4f5c\u4e3a\u5206\u9694\u7b26\u3002 \u8be5\u5b57\u7b26\u4e32\u5fc5\u987b\u4e3a\u975e\u7a7a\u3002</p>\n<h3 id=\"arraystringconcat-arr-separator\">arrayStringConcat(arr[, separator])<a class=\"headerlink\" href=\"#arraystringconcat-arr-separator\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528separator\u5c06\u6570\u7ec4\u4e2d\u5217\u51fa\u7684\u5b57\u7b26\u4e32\u62fc\u63a5\u8d77\u6765\u3002\u2018separator\u2019\u662f\u4e00\u4e2a\u53ef\u9009\u53c2\u6570\uff1a\u4e00\u4e2a\u5e38\u91cf\u5b57\u7b26\u4e32\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002<br />\n\u8fd4\u56de\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u3002</p>\n<h3 id=\"alphatokens-s\">alphaTokens(s)<a class=\"headerlink\" href=\"#alphatokens-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ece\u8303\u56f4a-z\u548cA-Z\u4e2d\u9009\u62e9\u8fde\u7eed\u5b57\u8282\u7684\u5b50\u5b57\u7b26\u4e32\u3002\u8fd4\u56de\u5b50\u5b57\u7b26\u4e32\u6570\u7ec4\u3002</p>\n<p><strong>\u793a\u4f8b\uff1a</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">alphaTokens</span><span class=\"p\">(</span><span class=\"s1\">&#39;abca1abc&#39;</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">alphaTokens</span><span class=\"p\">(</span><span class=\"s1\">&#39;abca1abc&#39;</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"s1\">&#39;abca&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">]</span>          <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"../../functions/bit_functions/\"></a><a name=\"bit_functions/\"></a><a name=\"../../../functions/bit_functions/\"></a><a name=\"..");
            
            document.write("/../../../functions/bit_functions/\"></a><a name=\"../query_language/functions/bit_functions/\"></a><a name=\"../../../../../../functions/bit_functions/\"></a><a name=\"../../query_language/functions/bit_functions/\"></a><a name=\"../../../query_language/functions/bit_functions/\"></a><a name=\"../../../../query_language/functions/bit_functions/\"></a><a name=\"../../../../../query_language/functions/bit_functions/\"></a><a name=\"../../../../../functions/bit_functions/\"></a><a name=\"functions/bit_functions/\"></a><a name=\"../functions/bit_functions/\"></a><a name=\"query_language/functions/bit_functions/\"></a></p>\n<h2 id=\"wei-cao-zuo-han-shu\">\u4f4d\u64cd\u4f5c\u51fd\u6570<a class=\"headerlink\" href=\"#wei-cao-zuo-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u4f4d\u64cd\u4f5c\u51fd\u6570\u9002\u7528\u4e8eUInt8\uff0cUInt16\uff0cUInt32\uff0cUInt64\uff0cInt8\uff0cInt16\uff0cInt32\uff0cInt64\uff0cFloat32\u6216Float64\u4e2d\u7684\u4efb\u4f55\u7c7b\u578b\u3002</p>\n<p>\u7ed3\u679c\u7c7b\u578b\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u5176\u4f4d\u6570\u7b49\u4e8e\u5176\u53c2\u6570\u7684\u6700\u5927\u4f4d\u3002\u5982\u679c\u81f3\u5c11\u6709\u4e00\u4e2a\u53c2\u6570\u4e3a\u6709\u7b26\u6570\u5b57\uff0c\u5219\u7ed3\u679c\u4e3a\u6709\u7b26\u6570\u5b57\u3002\u5982\u679c\u53c2\u6570\u662f\u6d6e\u70b9\u6570\uff0c\u5219\u5c06\u5176\u5f3a\u5236\u8f6c\u6362\u4e3aInt64\u3002</p>\n<h3 id=\"bitand-a-b\">bitAnd(a, b)<a class=\"headerlink\" href=\"#bitand-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitor-a-b\">bitOr(a, b)<a class=\"headerlink\" href=\"#bitor-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitxor-a-b\">bitXor(a, b)<a class=\"headerlink\" href=\"#bitxor-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitnot-a\">bitNot(a)<a class=\"headerlink\" href=\"#bitnot-a\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitshiftleft-a-b\">bitShiftLeft(a, b)<a class=\"headerlink\" href=\"#bitshiftleft-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitshiftright-a-b\">bitShiftRight(a, b)<a class=\"headerlink\" href=\"#bitshiftright-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitrotateleft-a-b\">bitRotateLeft(a, b)<a class=\"headerlink\" href=\"#bitrotateleft-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitrotateright-a-b\">bitRotateRight(a, b)<a class=\"headerlink\" href=\"#bitrotateright-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bittest-a-b\">bitTest(a, b)<a class=\"headerlink\" href=\"#bittest-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bittestall-a-b\">bitTestAll(a, b)<a class=\"headerlink\" href=\"#bittestall-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bittestany-a-b\">bitTestAny(a, b)<a class=\"headerlink\" href=\"#bittestany-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p><a name=\"bitmap_functions/\"></a><a name=\"../../../../functions/bitmap_functions/\"></a><a name=\"../../../../../../functions/bitmap_functions/\"></a><a name=\"query_language/functions/bitmap_functions/\"></a><a name=\"../../../../../functions/bitmap_functions/\"></a><a name=\"../../../../../query_language/functions/bitmap_functions/\"></a><a name=\"functions/bitmap_functions/\"></a><a name=\"../../functions/bitmap_functions/\"></a><a name=\"../../../functions/bitmap_functions/\"></a><a name=\"../../query_language/functions/bitmap_functions/\"></a><a name=\"../../../../query_language/functions/bitmap_functions/\"></a><a name=\"../../../query_language/functions/bitmap_functions/\"></a><a name=\"../query_language/functions/bitmap_functions/\"></a><a name=\"../functions/bitmap_functions/\"></a></p>\n<h2 id=\"wei-tu-han-shu\">\u4f4d\u56fe\u51fd\u6570<a class=\"headerlink\" href=\"#wei-tu-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u4f4d\u56fe\u51fd\u6570\u7528\u4e8e\u5bf9\u4e24\u4e2a\u4f4d\u56fe\u5bf9\u8c61\u8fdb\u884c\u8ba1\u7b97\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a\u4f4d\u56fe\u51fd\u6570\uff0c\u5b83\u90fd\u5c06\u8fd4\u56de\u4e00\u4e2a\u4f4d\u56fe\u5bf9\u8c61\uff0c\u4f8b\u5982and\uff0cor\uff0cxor\uff0cnot\u7b49\u7b49\u3002</p>\n<p>\u4f4d\u56fe\u5bf9\u8c61\u6709\u4e24\u79cd\u6784\u9020\u65b9\u6cd5\u3002\u4e00\u4e2a\u662f\u7531\u805a\u5408\u51fd\u6570groupBitmapState\u6784\u9020\u7684\uff0c\u53e6\u4e00\u4e2a\u662f\u7531Array Object\u6784\u9020\u7684\u3002\u540c\u65f6\u8fd8\u53ef\u4ee5\u5c06\u4f4d\u56fe\u5bf9\u8c61\u8f6c\u5316\u4e3a\u6570\u7ec4\u5bf9\u8c61\u3002</p>\n<p>\u6211\u4eec\u4f7f\u7528RoaringBitmap\u5b9e\u9645\u5b58\u50a8\u4f4d\u56fe\u5bf9\u8c61\uff0c\u5f53\u57fa\u6570\u5c0f\u4e8e\u6216\u7b49\u4e8e32\u65f6\uff0c\u5b83\u4f7f\u7528Set\u4fdd\u5b58\u3002\u5f53\u57fa\u6570\u5927\u4e8e32\u65f6\uff0c\u5b83\u4f7f\u7528RoaringBitmap\u4fdd\u5b58\u3002\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u4f4e\u57fa\u6570\u96c6\u7684\u5b58\u50a8\u66f4\u5feb\u7684\u539f\u56e0\u3002</p>\n<p>\u6709\u5173RoaringBitmap\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a<a href=\"https://github.com/RoaringBitmap/CRoaring\" rel=\"external nofollow noreferrer\">CRoaring</a>\u3002</p>\n<h3 id=\"bitmapbuild\">bitmapBuild<a class=\"headerlink\" href=\"#bitmapbuild\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ece\u65e0\u7b26\u53f7\u6574\u6570\u6570\u7ec4\u6784\u5efa\u4f4d\u56fe\u5bf9\u8c61\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapBuild(array)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>array</code> \u2013 \u65e0\u7b26\u53f7\u6574\u6570\u6570\u7ec4.</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmaptoarray\">bitmapToArray<a class=\"headerlink\" href=\"#bitmaptoarray\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u4f4d\u56fe\u8f6c\u6362\u4e3a\u6574\u6570\u6570\u7ec4\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapToArray(bitmap)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61.</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,3,4,5] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapsubsetinrange\">bitmapSubsetInRange<a class=\"headerlink\" href=\"#bitmapsubsetinrange\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u4f4d\u56fe\u6307\u5b9a\u8303\u56f4\uff08\u4e0d\u5305\u542brange_end\uff09\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u4f4d\u56fe\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapSubsetInRange(bitmap, range_start, range_end)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61.</li>\n<li><code>range_start</code> \u2013 \u8303\u56f4\u8d77\u59cb\u70b9\uff08\u542b\uff09.</li>\n<li><code>range_end</code> \u2013 \u8303\u56f4\u7ed3\u675f\u70b9\uff08\u4e0d\u542b\uff09.</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapSubsetInRange</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">,</span><span class=\"mi\">16</span><span class=\"p\">,</span><span class=\"mi\">17</span><span class=\"p\">,</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">19</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">,</span><span class=\"mi\">21</span><span class=\"p\">,</span><span class=\"mi\">22</span><span class=\"p\">,</span><span class=\"mi\">23</span><span class=\"p\">,</span><span class=\"mi\">24</span><span class=\"p\">,</span><span class=\"mi\">25</span><span class=\"p\">,</span><span class=\"mi\">26</span><span class=\"p\">,</span><span class=\"mi\">27</span><span class=\"p\">,</span><span class=\"mi\">28</span><span class=\"p\">,</span><span class=\"mi\">29</span><span class=\"p\">,</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">31</span><span class=\"p\">,</span><span class=\"mi\">32</span><span class=\"p\">,</span><span class=\"mi\">33</span><span class=\"p\">,</span><span class=\"mi\">100</span><span class=\"p\">,</span><span class=\"mi\">200</span><span class=\"p\">,</span><span class=\"mi\">500</span><span class=\"p\">]),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">)))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [30,31,32,33,100] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapsubsetlimit\">bitmapSubsetLimit<a class=\"headerlink\" href=\"#bitmapsubsetlimit\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u4f4d\u56fe\u6307\u5b9a\u8303\u56f4\uff08\u8d77\u59cb\u70b9\u548c\u6570\u76ee\u4e0a\u9650\uff09\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u4f4d\u56fe\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapSubsetLimit(bitmap, range_start, limit)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61.</li>\n<li><code>range_start</code> \u2013 \u8303\u56f4\u8d77\u59cb\u70b9\uff08\u542b\uff09.</li>\n<li><code>limit</code> \u2013 \u5b50\u4f4d\u56fe\u57fa\u6570\u4e0a\u9650.</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapSubsetInRange</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">,</span><span class=\"mi\">16</span><span class=\"p\">,</span><span class=\"mi\">17</span><span class=\"p\">,</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"");
            
            document.write("mi\">19</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">,</span><span class=\"mi\">21</span><span class=\"p\">,</span><span class=\"mi\">22</span><span class=\"p\">,</span><span class=\"mi\">23</span><span class=\"p\">,</span><span class=\"mi\">24</span><span class=\"p\">,</span><span class=\"mi\">25</span><span class=\"p\">,</span><span class=\"mi\">26</span><span class=\"p\">,</span><span class=\"mi\">27</span><span class=\"p\">,</span><span class=\"mi\">28</span><span class=\"p\">,</span><span class=\"mi\">29</span><span class=\"p\">,</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">31</span><span class=\"p\">,</span><span class=\"mi\">32</span><span class=\"p\">,</span><span class=\"mi\">33</span><span class=\"p\">,</span><span class=\"mi\">100</span><span class=\"p\">,</span><span class=\"mi\">200</span><span class=\"p\">,</span><span class=\"mi\">500</span><span class=\"p\">]),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">)))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [30,31,32,33,100,200,500] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapcontains\">bitmapContains<a class=\"headerlink\" href=\"#bitmapcontains\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u4f4d\u56fe\u662f\u5426\u5305\u542b\u6307\u5b9a\u5143\u7d20\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapContains(haystack, needle)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>haystack</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61.</li>\n<li><code>needle</code> \u2013 \u5143\u7d20\uff0c\u7c7b\u578bUInt32.</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapContains</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">]),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">9</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502  1  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmaphasany\">bitmapHasAny<a class=\"headerlink\" href=\"#bitmaphasany\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>hasAny(array\uff0carray)</code>\u7c7b\u4f3c\uff0c\u5982\u679c\u4f4d\u56fe\u6709\u4efb\u4f55\u516c\u5171\u5143\u7d20\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002<br />\n\u5bf9\u4e8e\u7a7a\u4f4d\u56fe\uff0c\u8fd4\u56de0\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapHasAny(bitmap,bitmap)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapHasAny</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502  1  \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmaphasall\">bitmapHasAll<a class=\"headerlink\" href=\"#bitmaphasall\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<code>hasAll(array\uff0carray)</code>\u7c7b\u4f3c\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u4f4d\u56fe\u5305\u542b\u7b2c\u4e8c\u4e2a\u4f4d\u56fe\u7684\u6240\u6709\u5143\u7d20\uff0c\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002<br />\n\u5982\u679c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u7a7a\u4f4d\u56fe\uff0c\u5219\u8fd4\u56de1\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapHasAll(bitmap,bitmap)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap \u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapHasAll</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502  0  \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapand\">bitmapAnd<a class=\"headerlink\" href=\"#bitmapand\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4e24\u4e2a\u4f4d\u56fe\u5bf9\u8c61\u8fdb\u884c\u4e0e\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u4f4d\u56fe\u5bf9\u8c61\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapAnd(bitmap1,bitmap2)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap1</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n<li><code>bitmap2</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapAnd</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">])))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502 [3] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapor\">bitmapOr<a class=\"headerlink\" href=\"#bitmapor\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4e24\u4e2a\u4f4d\u56fe\u5bf9\u8c61\u8fdb\u884c\u6216\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u4f4d\u56fe\u5bf9\u8c61\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapOr(bitmap1,bitmap2)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap1</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n<li><code>bitmap2</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapOr</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">])))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,3,4,5] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapxor\">bitmapXor<a class=\"headerlink\" href=\"#bitmapxor\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4e24\u4e2a\u4f4d\u56fe\u5bf9\u8c61\u8fdb\u884c\u5f02\u6216\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u4f4d\u56fe\u5bf9\u8c61\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapXor(bitmap1,bitmap2)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap1</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n<li><code>bitmap2</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapXor</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">])))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,4,5] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapandnot\">bitmapAndnot<a class=\"headerlink\" href=\"#bitmapandnot\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u4e24\u4e2a\u4f4d\u56fe\u7684\u5dee\u5f02\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u4f4d\u56fe\u5bf9\u8c61\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapAndnot(bitmap1,bitmap2)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap1</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n<li><code>bitmap2</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapAndnot</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">])))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapcardinality\">bitmapCardinality<a class=\"headerlink\" href=\"#bitmapcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2aUInt64\u7c7b\u578b\u7684\u6570\u503c\uff0c\u8868\u793a\u4f4d\u56fe\u5bf9\u8c61\u7684\u57fa\u6570\u3002</p>\n");
            
            document.write("<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapCardinality(bitmap)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   5 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapmin\">bitmapMin<a class=\"headerlink\" href=\"#bitmapmin\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2aUInt64\u7c7b\u578b\u7684\u6570\u503c\uff0c\u8868\u793a\u4f4d\u56fe\u4e2d\u7684\u6700\u5c0f\u503c\u3002\u5982\u679c\u4f4d\u56fe\u4e3a\u7a7a\u5219\u8fd4\u56deUINT32_MAX\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapMin(bitmap)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapMin</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapmax\">bitmapMax<a class=\"headerlink\" href=\"#bitmapmax\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2aUInt64\u7c7b\u578b\u7684\u6570\u503c\uff0c\u8868\u793a\u4f4d\u56fe\u4e2d\u7684\u6700\u5927\u503c\u3002\u5982\u679c\u4f4d\u56fe\u4e3a\u7a7a\u5219\u8fd4\u56de0\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapMax(bitmap)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapMax</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   5 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapandcardinality\">bitmapAndCardinality<a class=\"headerlink\" href=\"#bitmapandcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4e24\u4e2a\u4f4d\u56fe\u5bf9\u8c61\u8fdb\u884c\u4e0e\u64cd\u4f5c\uff0c\u8fd4\u56de\u7ed3\u679c\u4f4d\u56fe\u7684\u57fa\u6570\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapAndCardinality(bitmap1,bitmap2)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap1</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n<li><code>bitmap2</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapAndCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmaporcardinality\">bitmapOrCardinality<a class=\"headerlink\" href=\"#bitmaporcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4e24\u4e2a\u4f4d\u56fe\u8fdb\u884c\u6216\u8fd0\u7b97\uff0c\u8fd4\u56de\u7ed3\u679c\u4f4d\u56fe\u7684\u57fa\u6570\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapOrCardinality(bitmap1,bitmap2)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap1</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n<li><code>bitmap2</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapOrCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   5 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapxorcardinality\">bitmapXorCardinality<a class=\"headerlink\" href=\"#bitmapxorcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4e24\u4e2a\u4f4d\u56fe\u8fdb\u884c\u5f02\u6216\u8fd0\u7b97\uff0c\u8fd4\u56de\u7ed3\u679c\u4f4d\u56fe\u7684\u57fa\u6570\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapXorCardinality(bitmap1,bitmap2)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap1</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n<li><code>bitmap2</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapXorCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   4 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapandnotcardinality\">bitmapAndnotCardinality<a class=\"headerlink\" href=\"#bitmapandnotcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u4e24\u4e2a\u4f4d\u56fe\u7684\u5dee\u5f02\uff0c\u8fd4\u56de\u7ed3\u679c\u4f4d\u56fe\u7684\u57fa\u6570\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapAndnotCardinality(bitmap1,bitmap2)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>bitmap1</code> \u2013 \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n<li><code>bitmap2</code> - \u4f4d\u56fe\u5bf9\u8c61\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapAndnotCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   2 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"../functions/hash_functions/\"></a><a name=\"../../functions/hash_functions/\"></a><a name=\"../../../../../../functions/hash_functions/\"></a><a name=\"../query_language/functions/hash_functions/\"></a><a name=\"../../../../functions/hash_functions/\"></a><a name=\"../../../functions/hash_functions/\"></a><a name=\"../../../../../functions/hash_functions/\"></a><a name=\"query_language/functions/hash_functions/\"></a><a name=\"../../../../../query_language/functions/hash_functions/\"></a><a name=\"functions/hash_functions/\"></a><a name=\"../../../query_language/functions/hash_functions/\"></a><a name=\"../../query_language/functions/hash_functions/\"></a><a name=\"hash_functions/\"></a><a name=\"../../../../query_language/functions/hash_functions/\"></a></p>\n<h2 id=\"hashhan-shu\">Hash\u51fd\u6570<a class=\"headerlink\" href=\"#hashhan-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>Hash\u51fd\u6570\u53ef\u4ee5\u7528\u4e8e\u5c06\u5143\u7d20\u4e0d\u53ef\u9006\u7684\u4f2a\u968f\u673a\u6253\u4e71\u3002</p>\n<h3 id=\"halfmd5\">halfMD5<a class=\"headerlink\" href=\"#halfmd5\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684MD5\u3002\u7136\u540e\u83b7\u53d6\u7ed3\u679c\u7684\u524d8\u4e2a\u5b57\u8282\u5e76\u5c06\u5b83\u4eec\u4f5c\u4e3aUInt64\uff08\u5927\u7aef\uff09\u8fd4\u56de\u3002<br />\n\u6b64\u51fd\u6570\u76f8\u5f53\u4f4e\u6548\uff08500\u4e07\u4e2a\u77ed\u5b57\u7b26\u4e32/\u79d2/\u6838\u5fc3\uff09\u3002<br />\n\u5982\u679c\u60a8\u4e0d\u9700\u8981\u4e00\u5b9a\u4f7f\u7528MD5\uff0c\u8bf7\u4f7f\u7528\u2018sipHash64\u2019\u51fd\u6570\u3002</p>\n<h3 id=\"md5\">MD5<a class=\"headerlink\" href=\"#md5\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684MD5\u5e76\u5c06\u7ed3\u679c\u653e\u5165FixedString(16)\u4e2d\u8fd4\u56de\u3002<br />\n\u5982\u679c\u60a8\u53ea\u662f\u9700\u8981\u4e00\u4e2a128\u4f4d\u7684hash\uff0c\u540c\u65f6\u4e0d\u9700\u8981\u4e00\u5b9a\u4f7f\u7528MD5\uff0c\u8bf7\u4f7f\u7528\u2018sipHash128\u2019\u51fd\u6570\u3002<br />\n\u5982\u679c\u60a8\u8981\u83b7\u5f97\u4e0emd5sum\u7a0b\u5e8f\u76f8\u540c\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u8bf7\u4f7f\u7528lower(hex(MD5(s)))\u3002</p>\n<h3 id=\"siphash64\">sipHash64<a class=\"headerlink\" href=\"#siphash64\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684SipHash\u3002<br />\n\u63a5\u53d7String\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8fd4\u56deUInt64\u3002<br />\nSipHash\u662f\u4e00\u79cd\u52a0\u5bc6\u54c8\u5e0c\u51fd\u6570\u3002\u5b83\u7684\u5904\u7406\u6027\u80fd\u81f3\u5c11\u6bd4MD5\u5feb\u4e09\u500d\u3002<br />\n\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u94fe\u63a5\uff1a<a href=\"https://131002.net/siphash/\">https://131002.net/siphash/</a></p>\n<h3 id=\"hash_functions-siphash128\">sipHash128<a class=\"headerlink\" href=\"#hash_functions-siphash128\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684SipHash\u3002<br />\n\u63a5\u53d7String\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8fd4\u56deFixedString(16)\u3002<br />\n\u4e0esipHash64\u51fd\u6570\u7684\u4e0d\u540c\u5728\u4e8e\u5b83\u7684\u6700\u7ec8\u8ba1\u7b97\u7ed3\u679c\u4e3a128\u4f4d\u3002</p>\n<h3 id=\"cityhash64\">cityHash64<a class=\"headerlink\" href=\"#cityhash64\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u4efb\u610f\u6570\u91cf\u5b57\u7b26\u4e32\u7684CityHash64\u6216\u4f7f\u7528\u7279\u5b9a\u5b9e\u73b0\u7684Hash\u51fd\u6570\u8ba1\u7b97\u4efb\u610f\u6570\u91cf\u5176\u4ed6\u7c7b\u578b\u7684Hash\u3002<br />\n\u5bf9\u4e8e\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528CityHash\u7b97\u6cd5\u3002 ");
            
            document.write("\u8fd9\u662f\u4e00\u4e2a\u5feb\u901f\u7684\u975e\u52a0\u5bc6\u54c8\u5e0c\u51fd\u6570\uff0c\u7528\u4e8e\u5b57\u7b26\u4e32\u3002<br />\n\u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u4f7f\u7528\u7279\u5b9a\u5b9e\u73b0\u7684Hash\u51fd\u6570\uff0c\u8fd9\u662f\u4e00\u79cd\u5feb\u901f\u7684\u975e\u52a0\u5bc6\u7684\u6563\u5217\u51fd\u6570\u3002<br />\n\u5982\u679c\u4f20\u9012\u4e86\u591a\u4e2a\u53c2\u6570\uff0c\u5219\u4f7f\u7528CityHash\u7ec4\u5408\u8fd9\u4e9b\u53c2\u6570\u7684Hash\u7ed3\u679c\u3002<br />\n\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u8ba1\u7b97\u6574\u4e2a\u8868\u7684checksum\uff0c\u5176\u7ed3\u679c\u53d6\u51b3\u4e8e\u884c\u7684\u987a\u5e8f\uff1a<code>SELECT sum(cityHash64(*)) FROM table</code>\u3002</p>\n<h3 id=\"inthash32\">intHash32<a class=\"headerlink\" href=\"#inthash32\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e3a\u4efb\u4f55\u7c7b\u578b\u7684\u6574\u6570\u8ba1\u7b9732\u4f4d\u7684\u54c8\u5e0c\u3002<br />\n\u8fd9\u662f\u76f8\u5bf9\u9ad8\u6548\u7684\u975e\u52a0\u5bc6Hash\u51fd\u6570\u3002</p>\n<h3 id=\"inthash64\">intHash64<a class=\"headerlink\" href=\"#inthash64\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ece\u4efb\u4f55\u7c7b\u578b\u7684\u6574\u6570\u8ba1\u7b9764\u4f4d\u54c8\u5e0c\u7801\u3002<br />\n\u5b83\u7684\u5de5\u4f5c\u901f\u5ea6\u6bd4intHash32\u51fd\u6570\u5feb\u3002</p>\n<h3 id=\"sha1\">SHA1<a class=\"headerlink\" href=\"#sha1\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"sha224\">SHA224<a class=\"headerlink\" href=\"#sha224\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"sha256\">SHA256<a class=\"headerlink\" href=\"#sha256\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684SHA-1\uff0cSHA-224\u6216SHA-256\uff0c\u5e76\u5c06\u7ed3\u679c\u5b57\u8282\u96c6\u8fd4\u56de\u4e3aFixedString(20)\uff0cFixedString(28)\u6216FixedString(32)\u3002<br />\n\u8be5\u51fd\u6570\u76f8\u5f53\u4f4e\u6548\uff08SHA-1\u5927\u7ea6500\u4e07\u4e2a\u77ed\u5b57\u7b26\u4e32/\u79d2/\u6838\u5fc3\uff0c\u800cSHA-224\u548cSHA-256\u5927\u7ea6220\u4e07\u4e2a\u77ed\u5b57\u7b26\u4e32/\u79d2/\u6838\u5fc3\uff09\u3002<br />\n\u6211\u4eec\u5efa\u8bae\u4ec5\u5728\u5fc5\u987b\u4f7f\u7528\u8fd9\u4e9bHash\u51fd\u6570\u4e14\u65e0\u6cd5\u66f4\u6539\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u8fd9\u4e9b\u51fd\u6570\u3002<br />\n\u5373\u4f7f\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4ecd\u5efa\u8bae\u5c06\u51fd\u6570\u91c7\u7528\u5728\u5199\u5165\u6570\u636e\u65f6\u4f7f\u7528\u9884\u8ba1\u7b97\u7684\u65b9\u5f0f\u5c06\u5176\u8ba1\u7b97\u5b8c\u6bd5\u3002\u800c\u4e0d\u662f\u5728SELECT\u4e2d\u8ba1\u7b97\u5b83\u4eec\u3002</p>\n<h3 id=\"urlhash-url-n\">URLHash(url[, N])<a class=\"headerlink\" href=\"#urlhash-url-n\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e00\u79cd\u5feb\u901f\u7684\u975e\u52a0\u5bc6\u54c8\u5e0c\u51fd\u6570\uff0c\u7528\u4e8e\u89c4\u8303\u5316\u7684\u4eceURL\u83b7\u5f97\u7684\u5b57\u7b26\u4e32\u3002<br />\n<code>URLHash(s)</code> - \u4ece\u4e00\u4e2a\u5b57\u7b26\u4e32\u8ba1\u7b97\u4e00\u4e2a\u54c8\u5e0c\uff0c\u5982\u679c\u7ed3\u5c3e\u5b58\u5728\u5c3e\u968f\u7b26\u53f7<code>/</code>\uff0c<code>\uff1f</code>\u6216<code>#</code>\u5219\u5ffd\u7565\u3002<br />\n<code>URLHash\uff08s\uff0cN\uff09</code> - \u8ba1\u7b97URL\u5c42\u6b21\u7ed3\u6784\u4e2d\u5b57\u7b26\u4e32\u5230N\u7ea7\u522b\u7684\u54c8\u5e0c\u503c\uff0c\u5982\u679c\u672b\u5c3e\u5b58\u5728\u5c3e\u968f\u7b26\u53f7<code>/</code>\uff0c<code>\uff1f</code>\u6216<code>#</code>\u5219\u5ffd\u7565\u3002<br />\nURL\u7684\u5c42\u7ea7\u4e0eURLHierarchy\u4e2d\u7684\u5c42\u7ea7\u76f8\u540c\u3002 \u6b64\u51fd\u6570\u88ab\u7528\u4e8eYandex.Metrica\u3002</p>\n<h3 id=\"farmhash64\">farmHash64<a class=\"headerlink\" href=\"#farmhash64\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684FarmHash64\u3002<br />\n\u63a5\u53d7\u4e00\u4e2aString\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deUInt64\u3002<br />\n\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u94fe\u63a5\uff1a<a href=\"https://github.com/google/farmhash\" rel=\"external nofollow noreferrer\">FarmHash64</a></p>\n<h3 id=\"hash_functions-javahash\">javaHash<a class=\"headerlink\" href=\"#hash_functions-javahash\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684JavaHash\u3002<br />\n\u63a5\u53d7\u4e00\u4e2aString\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deInt32\u3002<br />\n\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u94fe\u63a5\uff1a<a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/478a4add975b/src/share/classes/java/lang/String.java#l1452\" rel=\"external nofollow noreferrer\">JavaHash</a></p>\n<h3 id=\"hivehash\">hiveHash<a class=\"headerlink\" href=\"#hivehash\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684HiveHash\u3002<br />\n\u63a5\u53d7\u4e00\u4e2aString\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deInt32\u3002<br />\n\u4e0e<a href=\"#hash_functions-javahash\">JavaHash</a>\u76f8\u540c\uff0c\u4f46\u4e0d\u4f1a\u8fd4\u56de\u8d1f\u6570\u3002</p>\n<h3 id=\"metrohash64\">metroHash64<a class=\"headerlink\" href=\"#metrohash64\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684MetroHash\u3002<br />\n\u63a5\u53d7\u4e00\u4e2aString\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deUInt64\u3002<br />\n\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u94fe\u63a5\uff1a<a href=\"http://www.jandrewrogers.com/2015/05/27/metrohash/\" rel=\"external nofollow noreferrer\">MetroHash64</a></p>\n<h3 id=\"jumpconsistenthash\">jumpConsistentHash<a class=\"headerlink\" href=\"#jumpconsistenthash\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97UInt64\u7684JumpConsistentHash\u3002<br />\n\u63a5\u53d7UInt64\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deInt32\u3002<br />\n\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u94fe\u63a5\uff1a<a href=\"https://arxiv.org/pdf/1406.2294.pdf\" rel=\"external nofollow noreferrer\">JumpConsistentHash</a></p>\n<h3 id=\"murmurhash2-32-murmurhash2-64\">murmurHash2_32, murmurHash2_64<a class=\"headerlink\" href=\"#murmurhash2-32-murmurhash2-64\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684MurmurHash2\u3002<br />\n\u63a5\u53d7\u4e00\u4e2aString\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deUInt64\u6216UInt32\u3002<br />\n\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u94fe\u63a5\uff1a<a href=\"https://github.com/aappleby/smhasher\" rel=\"external nofollow noreferrer\">MurmurHash2</a></p>\n<h3 id=\"murmurhash3-32-murmurhash3-64-murmurhash3-128\">murmurHash3_32, murmurHash3_64, murmurHash3_128<a class=\"headerlink\" href=\"#murmurhash3-32-murmurhash3-64-murmurhash3-128\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684MurmurHash3\u3002<br />\n\u63a5\u53d7\u4e00\u4e2aString\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deUInt64\u6216UInt32\u6216FixedString(16)\u3002<br />\n\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u94fe\u63a5\uff1a<a href=\"https://github.com/aappleby/smhasher\" rel=\"external nofollow noreferrer\">MurmurHash3</a></p>\n<h3 id=\"xxhash32-xxhash64\">xxHash32, xxHash64<a class=\"headerlink\" href=\"#xxhash32-xxhash64\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684xxHash\u3002<br />\n\u63a5\u53d7\u4e00\u4e2aString\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deUInt64\u6216UInt32\u3002<br />\n\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u94fe\u63a5\uff1a<a href=\"http://cyan4973.github.io/xxHash/\" rel=\"external nofollow noreferrer\">xxHash</a></p>\n<p><a name=\"../query_language/functions/random_functions/\"></a><a name=\"../../../query_language/functions/random_functions/\"></a><a name=\"../../../../../functions/random_functions/\"></a><a name=\"../../../../query_language/functions/random_functions/\"></a><a name=\"../../../../functions/random_functions/\"></a><a name=\"functions/random_functions/\"></a><a name=\"../../../../../query_language/functions/random_functions/\"></a><a name=\"../../../../../../functions/random_functions/\"></a><a name=\"../functions/random_functions/\"></a><a name=\"../../../functions/random_functions/\"></a><a name=\"random_functions/\"></a><a name=\"../../functions/random_functions/\"></a><a name=\"../../query_language/functions/random_functions/\"></a><a name=\"query_language/functions/random_functions/\"></a></p>\n<h2 id=\"sui-ji-han-shu\">\u968f\u673a\u51fd\u6570<a class=\"headerlink\" href=\"#sui-ji-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u968f\u673a\u51fd\u6570\u4f7f\u7528\u975e\u52a0\u5bc6\u65b9\u5f0f\u751f\u6210\u4f2a\u968f\u673a\u6570\u5b57\u3002</p>\n<p>\u6240\u6709\u968f\u673a\u51fd\u6570\u90fd\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u6216\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\u3002<br />\n\u60a8\u53ef\u4ee5\u5411\u5b83\u4f20\u9012\u4efb\u4f55\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u4f46\u4f20\u9012\u7684\u53c2\u6570\u5c06\u4e0d\u4f1a\u4f7f\u7528\u5728\u4efb\u4f55\u968f\u673a\u6570\u751f\u6210\u8fc7\u7a0b\u4e2d\u3002<br />\n\u6b64\u53c2\u6570\u7684\u552f\u4e00\u76ee\u7684\u662f\u9632\u6b62\u516c\u5171\u5b50\u8868\u8fbe\u5f0f\u6d88\u9664\uff0c\u4ee5\u4fbf\u5728\u76f8\u540c\u7684\u67e5\u8be2\u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u968f\u673a\u51fd\u6570\u751f\u6210\u4e0d\u540c\u7684\u968f\u673a\u6570\u3002</p>\n<h3 id=\"rand\">rand<a class=\"headerlink\" href=\"#rand\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2aUInt32\u7c7b\u578b\u7684\u968f\u673a\u6570\u5b57\uff0c\u6240\u6709UInt32\u7c7b\u578b\u7684\u6570\u5b57\u88ab\u751f\u6210\u7684\u6982\u7387\u5747\u76f8\u7b49\u3002\u6b64\u51fd\u6570\u7ebf\u6027\u540c\u4e8e\u7684\u65b9\u5f0f\u751f\u6210\u968f\u673a\u6570\u3002</p>\n<h3 id=\"rand64\">rand64<a class=\"headerlink\" href=\"#rand64\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2aUInt64\u7c7b\u578b\u7684\u968f\u673a\u6570\u5b57\uff0c\u6240\u6709UInt64\u7c7b\u578b\u7684\u6570\u5b57\u88ab\u751f\u6210\u7684\u6982\u7387\u5747\u76f8\u7b49\u3002\u6b64\u51fd\u6570\u7ebf\u6027\u540c\u4e8e\u7684\u65b9\u5f0f\u751f\u6210\u968f\u673a\u6570\u3002</p>\n<h3 id=\"randconstant\">randConstant<a class=\"headerlink\" href=\"#randconstant\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2aUInt32\u7c7b\u578b\u7684\u968f\u673a\u6570\u5b57\uff0c\u8be5\u51fd\u6570\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u4ec5\u4e3a\u6bcf\u4e2a\u6570\u636e\u5757\u53c2\u6570\u4e00\u4e2a\u968f\u673a\u6570\u3002</p>\n<p><a name=\"../../../functions/encoding_functions/\"></a><a name=\"../functions/encoding_functions/\"></a><a name=\"../../../../../functions/encoding_functions/\"></a><a name=\"../../../../../query_language/functions/encoding_functions/\"></a><a name=\"functions/encoding_functions/\"></a><a name=\"../../functions/encoding_functions/\"></a><a name=\"../../../../functions/encoding_functions/\"></a><a name=\"../../../query_language/functions/encoding_functions/\"></a><a name=\"query_language/functions/encoding_functions/\"></a><a name=\"encoding_functions/\"></a><a name=\"../../../../../../functions/encoding_functions/\"></a><a name=\"../../query_language/functions/encoding_functions/\"></a><a name=\"../../../../query_language/functions/encoding_functions/\"></a><a name=\"../query_language/functions/encoding_functions/\"></a></p>\n<h2 id=\"bian-ma-han-shu\">\u7f16\u7801\u51fd\u6570<a class=\"headerlink\" href=\"#bian-ma-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"hex\">hex<a class=\"headerlink\" href=\"#hex\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7<code>String</code>\uff0c<code>unsigned integer</code>\uff0c<code>Date</code>\u6216<code>DateTime</code>\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56de\u5305\u542b\u53c2\u6570\u7684\u5341\u516d\u8fdb\u5236\u8868\u793a\u7684\u5b57\u7b26\u4e32\u3002\u4f7f\u7528\u5927\u5199\u5b57\u6bcd<code>A-F</code>\u3002\u4e0d\u4f7f\u7528<code>0x</code>\u524d\u7f00\u6216<code>h</code>\u540e\u7f00\u3002\u5bf9\u4e8e\u5b57\u7b26\u4e32\uff0c\u6240\u6709\u5b57\u8282\u90fd\u7b80\u5355\u5730\u7f16\u7801\u4e3a\u4e24\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u5b57\u3002\u6570\u5b57\u8f6c\u6362\u4e3a\u5927\u7aef\uff08\u201c\u6613\u9605\u8bfb\u201d\uff09\u683c\u5f0f\u3002\u5bf9\u4e8e\u6570\u5b57\uff0c\u53bb\u9664\u5176\u4e2d\u8f83\u65e7\u7684\u96f6\uff0c\u4f46\u4ec5\u9650\u6574\u4e2a\u5b57\u8282\u3002\u4f8b\u5982\uff0c<code>hex\uff081\uff09='01'</code>\u3002 <code>Date</code>\u88ab\u7f16\u7801\u4e3a\u81eaUnix\u65f6\u95f4\u5f00\u59cb\u4ee5\u6765\u7684\u5929\u6570\u3002 <code>DateTime</code>\u7f16\u7801\u4e3a\u81eaUnix\u65f6\u95f4\u5f00\u59cb\u4ee5\u6765\u7684\u79d2\u6570\u3002</p>\n<h3 id=\"unhex-str\">unhex(str)<a class=\"headerlink\" href=\"#unhex-str\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u5305\u542b\u4efb\u610f\u6570\u91cf\u7684\u5341\u516d\u8fdb\u5236\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de\u5305\u542b\u76f8\u5e94\u5b57\u8282\u7684\u5b57\u7b26\u4e32\u3002\u652f\u6301\u5927\u5199\u548c\u5c0f\u5199\u5b57\u6bcdA-F\u3002\u5341\u516d\u8fdb\u5236\u6570\u5b57\u7684\u6570\u91cf\u4e0d\u5fc5\u662f\u5076\u6570\u3002\u5982\u679c\u662f\u5947\u6570\uff0c\u5219\u6700\u540e\u4e00\u4f4d\u6570\u88ab\u89e3\u91ca\u4e3a00-0F\u5b57\u8282\u7684\u4f4e\u4f4d\u3002\u5982\u679c\u53c2\u6570\u5b57\u7b26\u4e32\u5305\u542b\u9664\u5341\u516d\u8fdb\u5236\u6570\u5b57\u4ee5\u5916\u7684\u4efb\u4f55\u5185\u5bb9\uff0c\u5219\u8fd4\u56de\u4e00\u4e9b\u5b9e\u73b0\u5b9a\u4e49\u7684\u7ed3\u679c\uff08\u4e0d\u629b\u51fa\u5f02\u5e38\uff09\u3002<br />\n\u5982\u679c\u8981\u5c06\u7ed3\u679c\u8f6c\u6362\u4e3a\u6570\u5b57\uff0c\u53ef\u4ee5\u4f7f\u7528\u201creverse\u201d\u548c\u201creinterpretAsType\u201d\u51fd\u6570\u3002</p>\n<h3 id=\"uuidstringtonum-str\">UUIDStringToNum(str)<a class=\"headerlink\" href=\"#uuidstringtonum-str\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u5305\u542b36\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\uff0c\u683c\u5f0f\u4e3a\u201c123e4567-e89b-12d3-a456-426655440000\u201d\uff0c\u5e76\u5c06\u5176\u8f6c\u5316\u4e3aFixedString\uff0816\uff09\u8fd4\u56de\u3002</p>\n<h3 id=\"uuidnumtostring-str\">UUIDNumToString(str)<a class=\"headerlink\" href=\"#uuidnumtostring-str\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7FixedString\uff0816\uff09\u503c\u3002\u8fd4\u56de\u5305\u542b36\u4e2a\u5b57\u7b26\u7684\u6587\u672c\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002</p>\n<h3 id=\"bitmasktolist-num\">bitmaskToList(num)<a class=\"headerlink\" href=\"#bitmasktolist-num\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u3002\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u7ec42\u7684\u5e42\u5217\u8868\uff0c\u5176\u5217\u8868\u4e2d\u7684\u6240\u6709\u503c\u76f8\u52a0\u7b49\u4e8e\u8fd9\u4e2a\u6574\u6570\u3002\u5217\u8868\u4f7f\u7528\u9017\u53f7\u5206\u5272\uff0c\u6309\u5347\u5e8f\u6392\u5217\u3002</p>\n<h3 id=\"bitmasktoarray-num\">bitmaskToArray(num)<a class=\"headerlink\" href=\"#bitmasktoarray-num\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u3002\u8fd4\u56de\u4e00\u4e2aUInt64\u7c7b\u578b\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u7ec42\u7684\u5e42\u5217\u8868\uff0c\u5176\u5217\u8868\u4e2d\u7684\u6240\u6709\u503c\u76f8\u52a0\u7b49\u4e8e\u8fd9\u4e2a\u6574\u6570\u3002\u6570\u7ec4\u4e2d\u7684\u6570\u5b57\u6309\u5347\u5e8f\u6392\u5217\u3002</p>\n<p><a name=\"../../query_language/functions/uuid_functions/\"></a><a name=\"../../../../functions/uuid_functions/\"></a><a name=\"uuid_functions/\"></a><a name=\"query_language/functions/uuid_functions/\"></a><a name=\"../../../../../../functions/uuid_functions/\"></a><a name=\"../../../../../query_language/functions/uuid_functions/\"></a><a name=\"../../functions/uuid_functions/\"></a><a name=\"../../../../../functions/uuid_functions/\"></a><a name=\"functions/uuid_functions/\"></a><a name=\"../functions/uuid_functions/\"></a><a name=\"../query_language/functions/uuid_functions/\"></a><a name=\"../../../functions/uuid_functions/\"></a><a name=\"../../../../query_language/functions/uuid_functions/\"></a><a name=\"../../../query_language/functions/uuid_functions/\"></a></p>\n<h2 id=\"uuidhan-shu\">UUID\u51fd\u6570<a class=\"headerlink\" href=\"#uuidhan-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u4e0b\u9762\u5217\u51fa\u4e86\u6240\u6709UUID\u7684\u76f8\u5173\u51fd\u6570</p>\n<h3 id=\"uuid_function-generate\">generateUUIDv4<a class=\"headerlink\" href=\"#uuid_function-generate\" title=\"Permanent link\">&para;</a></h3>\n<p>\u751f\u6210\u4e00\u4e2aUUID\uff08<a href=\"https://tools.ietf.org/html/rfc4122#section-4.4\" rel=\"external nofollow noreferrer\">\u7248\u672c4</a>\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">generateUUIDv4</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>UUID\u7c7b\u578b\u7684\u503c\u3002</p>\n<p><strong>\u4f7f\u7528\u793a\u4f8b</strong></p>\n<p>\u6b64\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u5728\u8868\u4e2d\u521b\u5efaUUID\u7c7b\u578b\u7684\u5217\uff0c\u5e76\u5bf9\u5176\u5199\u5165\u6570\u636e\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_uuid</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"n\">UUID</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">TinyLog</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_uuid</span> <span class=\"k\">SELECT</span> <span class=\"n\">generateUUIDv4</span><span class=\"p\">()</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_uuid</span>\n\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500");
            
            document.write("\u2500\u2500\u2500\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">f4bf890f</span><span class=\"o\">-</span><span class=\"n\">f9dc</span><span class=\"o\">-</span><span class=\"mi\">4332</span><span class=\"o\">-</span><span class=\"n\">ad5c</span><span class=\"o\">-</span><span class=\"mi\">0</span><span class=\"n\">c18e73f28e9</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"touuid-x\">toUUID (x)<a class=\"headerlink\" href=\"#touuid-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06String\u7c7b\u578b\u7684\u503c\u8f6c\u6362\u4e3aUUID\u7c7b\u578b\u7684\u503c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">toUUID</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>UUID\u7c7b\u578b\u7684\u503c</p>\n<p><strong>\u4f7f\u7528\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">toUUID</span><span class=\"p\">(</span><span class=\"s1\">&#39;61f0c404-5cb3-11e7-907b-a6006ad3dba0&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">uuid</span>\n\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"n\">uuid</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">61</span><span class=\"n\">f0c404</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"n\">cb3</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"n\">e7</span><span class=\"o\">-</span><span class=\"mi\">907</span><span class=\"n\">b</span><span class=\"o\">-</span><span class=\"n\">a6006ad3dba0</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"uuidstringtonum\">UUIDStringToNum<a class=\"headerlink\" href=\"#uuidstringtonum\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2aString\u7c7b\u578b\u7684\u503c\uff0c\u5176\u4e2d\u5305\u542b36\u4e2a\u5b57\u7b26\u4e14\u683c\u5f0f\u4e3a<code>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</code>\uff0c\u5c06\u5176\u8f6c\u6362\u4e3aUUID\u7684\u6570\u503c\u5e76\u4ee5<a href=\"#../../data_types/fixedstring/\">FixedString(16)</a>\u5c06\u5176\u8fd4\u56de\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">UUIDStringToNum</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>FixedString(16)</p>\n<p><strong>\u4f7f\u7528\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span>\n    <span class=\"s1\">&#39;612f3c40-5d3b-217e-707b-6a546a3d7b29&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">uuid</span><span class=\"p\">,</span>\n    <span class=\"n\">UUIDStringToNum</span><span class=\"p\">(</span><span class=\"n\">uuid</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">bytes</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">uuid</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">bytes</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">612</span><span class=\"n\">f3c40</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"n\">d3b</span><span class=\"o\">-</span><span class=\"mi\">217</span><span class=\"n\">e</span><span class=\"o\">-</span><span class=\"mi\">707</span><span class=\"n\">b</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">a546a3d7b29</span> <span class=\"err\">\u2502</span> <span class=\"n\">a</span><span class=\"o\">/&lt;@</span><span class=\"p\">];</span><span class=\"o\">!~</span><span class=\"n\">p</span><span class=\"err\">{</span><span class=\"n\">jTj</span><span class=\"o\">=</span><span class=\"err\">{</span><span class=\"p\">)</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"uuidnumtostring\">UUIDNumToString<a class=\"headerlink\" href=\"#uuidnumtostring\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2a<a href=\"#../../data_types/fixedstring/\">FixedString(16)</a>\u7c7b\u578b\u7684\u503c\uff0c\u8fd4\u56de\u5176\u5bf9\u5e94\u7684String\u8868\u73b0\u5f62\u5f0f\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">UUIDNumToString</span><span class=\"p\">(</span><span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">16</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>String.</p>\n<p><strong>\u4f7f\u7528\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"s1\">&#39;a/&lt;@];!~p{jTj={)&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">bytes</span><span class=\"p\">,</span>\n    <span class=\"n\">UUIDNumToString</span><span class=\"p\">(</span><span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">bytes</span><span class=\"p\">,</span> <span class=\"mi\">16</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">uuid</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">bytes</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">uuid</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">a</span><span class=\"o\">/&lt;@</span><span class=\"p\">];</span><span class=\"o\">!~</span><span class=\"n\">p</span><span class=\"err\">{</span><span class=\"n\">jTj</span><span class=\"o\">=</span><span class=\"err\">{</span><span class=\"p\">)</span> <span class=\"err\">\u2502</span> <span class=\"mi\">612</span><span class=\"n\">f3c40</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"n\">d3b</span><span class=\"o\">-</span><span class=\"mi\">217</span><span class=\"n\">e</span><span class=\"o\">-</span><span class=\"mi\">707</span><span class=\"n\">b</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">a546a3d7b29</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"ling-qing-can-yue\">\u53e6\u8bf7\u53c2\u9605<a class=\"headerlink\" href=\"#ling-qing-can-yue\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#ext_dict_functions/\">dictGetUUID</a></li>\n</ul>\n<p><a name=\"../../../../query_language/functions/url_functions/\"></a><a name=\"../../../query_language/functions/url_functions/\"></a><a name=\"../../../functions/url_functions/\"></a><a name=\"../../query_language/functions/url_functions/\"></a><a name=\"../../../../../query_language/functions/url_functions/\"></a><a name=\"../../../../functions/url_functions/\"></a><a name=\"query_language/functions/url_functions/\"></a><a name=\"url_functions/\"></a><a name=\"../../functions/url_functions/\"></a><a name=\"../../../../../functions/url_functions/\"></a><a name=\"../../../../../../functions/url_functions/\"></a><a name=\"../functions/url_functions/\"></a><a name=\"../query_language/functions/url_functions/\"></a><a name=\"functions/url_functions/\"></a></p>\n<h2 id=\"urlhan-shu\">URL\u51fd\u6570<a class=\"headerlink\" href=\"#urlhan-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6240\u6709\u8fd9\u4e9b\u529f\u80fd\u90fd\u4e0d\u9075\u5faaRFC\u3002\u5b83\u4eec\u88ab\u6700\u5927\u7a0b\u5ea6\u7b80\u5316\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</p>\n<h3 id=\"urljie-qu-han-shu\">URL\u622a\u53d6\u51fd\u6570<a class=\"headerlink\" href=\"#urljie-qu-han-shu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679cURL\u4e2d\u6ca1\u6709\u8981\u622a\u53d6\u7684\u5185\u5bb9\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</p>\n<h4 id=\"protocol\">protocol<a class=\"headerlink\" href=\"#protocol\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56deURL\u7684\u534f\u8bae\u3002\u4f8b\u5982\uff1a http\u3001ftp\u3001mailto\u3001magnet...</p>\n<h4 id=\"domain\">domain<a class=\"headerlink\" href=\"#domain\" title=\"Permanent link\">&para;</a></h4>\n<p>\u83b7\u53d6\u57df\u540d\u3002</p>\n<h4 id=\"domainwithoutwww\">domainWithoutWWW<a class=\"headerlink\" href=\"#domainwithoutwww\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u57df\u540d\u5e76\u5220\u9664\u7b2c\u4e00\u4e2a\u2018www.\u2019\u3002</p>\n<h4 id=\"topleveldomain\">topLevelDomain<a class=\"headerlink\" href=\"#topleveldomain\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u9876\u7ea7\u57df\u540d\u3002\u4f8b\u5982\uff1a.ru\u3002</p>\n<h4 id=\"firstsignificantsubdomain\">firstSignificantSubdomain<a class=\"headerlink\" href=\"#firstsignificantsubdomain\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u201c\u7b2c\u4e00\u4e2a\u6709\u6548\u5b50\u57df\u540d\u201d\u3002\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u6807\u51c6\u6982\u5ff5\uff0c\u4ec5\u7528\u4e8eYandex.Metrica\u3002\u5982\u679c\u9876\u7ea7\u57df\u540d\u4e3a\u2018com\u2019\uff0c\u2018net\u2019\uff0c\u2018org\u2019\u6216\u8005\u2018co\u2019\u5219\u7b2c\u4e00\u4e2a\u6709\u6548\u5b50\u57df\u540d\u4e3a\u4e8c\u7ea7\u57df\u540d\u3002\u5426\u5219\u5219\u8fd4\u56de\u4e09\u7ea7\u57df\u540d\u3002\u4f8b\u5982\uff0cirstSignificantSubdomain ('<a href=\"https://news.yandex.ru/\">https://news.yandex.ru/</a>') = 'yandex '\uff0c firstSignificantSubdomain ('<a href=\"https://news.yandex.com.tr/\">https://news.yandex.com.tr/</a>') = 'yandex '\u3002\u4e00\u4e9b\u5b9e\u73b0\u7ec6\u8282\u5728\u672a\u6765\u53ef\u80fd\u4f1a\u8fdb\u884c\u6539\u53d8\u3002</p>\n<h4 id=\"cuttofirstsignificantsubdomain\">cutToFirstSignificantSubdomain<a class=\"headerlink\" href=\"#cuttofirstsignificantsubdomain\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u5305\u542b\u9876\u7ea7\u57df\u540d\u4e0e\u7b2c\u4e00\u4e2a\u6709\u6548\u5b50\u57df\u540d\u4e4b\u95f4\u7684\u5185\u5bb9\uff08\u8bf7\u53c2\u9605\u4e0a\u9762\u7684\u5185\u5bb9\uff09\u3002</p>\n<p>\u4f8b\u5982\uff0c <code>cutToFirstSignificantSubdomain('https://news.yandex.com.tr/') = 'yandex.com.tr'</code>.</p>\n<h4 id=\"path\">path<a class=\"headerlink\" href=\"#path\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56deURL\u8def\u5f84\u3002\u4f8b\u5982\uff1a<code>/top/news.html</code>\uff0c\u4e0d\u5305\u542b\u8bf7\u6c42\u53c2\u6570\u3002</p>\n<h4 id=\"pathfull\">pathFull<a class=\"headerlink\" href=\"#pathfull\" title=\"Permanent link\">&para;</a></h4>\n<p>\u4e0e\u4e0a\u9762\u76f8\u540c\uff0c\u4f46\u5305\u62ec\u8bf7\u6c42\u53c2\u6570\u548cfragment\u3002\u4f8b\u5982\uff1a/top/news.html?page=2#comments</p>\n<h4 id=\"querystring\">queryString<a class=\"headerlink\" href=\"#querystring\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u8bf7\u6c42\u53c2\u6570\u3002\u4f8b\u5982\uff1apage=1&amp;lr=213\u3002\u8bf7\u6c42\u53c2\u6570\u4e0d\u5305\u542b\u95ee\u53f7\u5df2\u7ecf# \u4ee5\u53ca# \u4e4b\u540e\u6240\u6709\u7684\u5185\u5bb9\u3002</p>\n<h4 id=\"fragment\">fragment<a class=\"headerlink\" href=\"#fragment\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56deURL\u7684fragment\u6807\u8bc6\u3002fragment\u4e0d\u5305\u542b#\u3002</p>\n<h4 id=\"querystringandfragment\">queryStringAndFragment<a class=\"headerlink\" href=\"#querystringandfragment\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u8bf7\u6c42\u53c2\u6570\u548cfragment\u6807\u8bc6\u3002\u4f8b\u5982\uff1apage=1#29390\u3002</p>\n<h4 id=\"extracturlparameter-url-name\">extractURLParameter(URL, name)<a class=\"headerlink\" href=\"#extracturlparameter-url-name\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56deURL\u8bf7\u6c42\u53c2\u6570\u4e2d\u540d\u79f0\u4e3a\u2018name\u2019\u7684\u53c2\u6570\u3002\u5982\u679c\u4e0d\u5b58\u5728\u5219\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c\u5b58\u5728\u591a\u4e2a\u5339\u914d\u9879\u5219\u8fd4\u56de\u7b2c\u4e00\u4e2a\u76f8\u5339\u914d\u7684\u3002\u6b64\u51fd\u6570\u5047\u8bbe\u53c2\u6570\u540d\u79f0\u4e0e\u53c2\u6570\u503c\u5728url\u4e2d\u7684\u7f16\u7801\u65b9\u5f0f\u76f8\u540c\u3002</p>\n<h4 id=\"extracturlparameters-url\">extractURLParameters(URL)<a class=\"headerlink\" href=\"#extracturlparameters-url\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u4ee5name=value\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f\u8fd4\u56deurl\u7684\u6240\u6709\u8bf7\u6c42\u53c2\u6570\u3002\u4e0d\u4ee5\u4efb\u4f55\u7f16\u7801\u89e3\u6790\u4efb\u4f55\u5185\u5bb9\u3002</p>\n<h4 id=\"extracturlparameternames-url\">extractURLParameterNames(URL)<a class=\"headerlink\" href=\"#extracturlparameternames-url\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u542burl\u7684\u6240\u6709\u8bf7\u6c42\u53c2\u6570\u7684\u540d\u79f0\u3002\u4e0d\u4ee5\u4efb\u4f55\u7f16\u7801\u89e3\u6790\u4efb\u4f55\u5185\u5bb9\u3002</p>\n<h4 id=\"urlhierarchy-url\">URLHierarchy(URL)<a class=\"headerlink\" href=\"#urlhierarchy-url\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u4ee5/\u5207\u5272\u7684URL\u7684\u6240\u6709\u5185\u5bb9\u3002\uff1f\u5c06\u88ab\u5305\u542b\u5728URL\u8def\u5f84\u4ee5\u53ca\u8bf7\u6c42\u53c2\u6570\u4e2d\u3002\u8fde\u7eed\u7684\u5206\u5272\u7b26\u53f7\u88ab\u8bb0\u4e3a\u4e00\u4e2a\u3002</p>\n<h4 id=\"urlpathhierarchy-url\">URLPathHierarchy(URL)<a class=\"headerlink\" href=\"#urlpathhierarchy-url\" title=\"Permanent link\">&para;</a></h4>\n<p>\u4e0e\u4e0a\u9762\u76f8\u540c\uff0c\u4f46\u7ed3\u679c\u4e0d\u5305\u542b\u534f\u8bae\u548chost\u90e8\u5206\u3002 /element(root)\u4e0d\u5305\u62ec\u5728\u5185\u3002\u8be5\u51fd\u6570\u7528\u4e8e\u5728Yan");
            
            document.write("dex.Metric\u4e2d\u5b9e\u73b0\u5bfc\u51faURL\u7684\u6811\u5f62\u7ed3\u6784\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">URLPathHierarchy(&#39;https://example.com/browse/CONV-6788&#39;) =</span>\n<span class=\"err\">[</span>\n<span class=\"err\">    &#39;/browse/&#39;,</span>\n<span class=\"err\">    &#39;/browse/CONV-6788&#39;</span>\n<span class=\"err\">]</span>\n</code></pre></div>\n\n\n<h4 id=\"decodeurlcomponent-url\">decodeURLComponent(URL)<a class=\"headerlink\" href=\"#decodeurlcomponent-url\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u5df2\u7ecf\u89e3\u7801\u7684URL\u3002<br />\n\u4f8b\u5982:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">decodeURLComponent</span><span class=\"p\">(</span><span class=\"s1\">&#39;http://127.0.0.1:8123/?query=SELECT%201%3B&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">DecodedURL</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500DecodedURL\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 http://127.0.0.1:8123/?query=SELECT 1; \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"shan-chu-urlzhong-de-bu-fen-nei-rong\">\u5220\u9664URL\u4e2d\u7684\u90e8\u5206\u5185\u5bb9<a class=\"headerlink\" href=\"#shan-chu-urlzhong-de-bu-fen-nei-rong\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679cURL\u4e2d\u4e0d\u5305\u542b\u6307\u5b9a\u7684\u90e8\u5206\uff0c\u5219URL\u4e0d\u53d8\u3002</p>\n<h4 id=\"cutwww\">cutWWW<a class=\"headerlink\" href=\"#cutwww\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5220\u9664\u5f00\u59cb\u7684\u7b2c\u4e00\u4e2a'www.'\u3002</p>\n<h4 id=\"cutquerystring\">cutQueryString<a class=\"headerlink\" href=\"#cutquerystring\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5220\u9664\u8bf7\u6c42\u53c2\u6570\u3002\u95ee\u53f7\u4e5f\u5c06\u88ab\u5220\u9664\u3002</p>\n<h4 id=\"cutfragment\">cutFragment<a class=\"headerlink\" href=\"#cutfragment\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5220\u9664fragment\u6807\u8bc6\u3002#\u540c\u6837\u4e5f\u4f1a\u88ab\u5220\u9664\u3002</p>\n<h4 id=\"cutquerystringandfragment\">cutQueryStringAndFragment<a class=\"headerlink\" href=\"#cutquerystringandfragment\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5220\u9664\u8bf7\u6c42\u53c2\u6570\u4ee5\u53cafragment\u6807\u8bc6\u3002\u95ee\u53f7\u4ee5\u53ca#\u4e5f\u4f1a\u88ab\u5220\u9664\u3002</p>\n<h4 id=\"cuturlparameter-url-name\">cutURLParameter(URL, name)<a class=\"headerlink\" href=\"#cuturlparameter-url-name\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5220\u9664URL\u4e2d\u540d\u79f0\u4e3a\u2018name\u2019\u7684\u53c2\u6570\u3002\u6539\u51fd\u6570\u5047\u8bbe\u53c2\u6570\u540d\u79f0\u4ee5\u53ca\u53c2\u6570\u503c\u7ecf\u8fc7URL\u76f8\u540c\u7684\u7f16\u7801\u3002</p>\n<p><a name=\"query_language/functions/ip_address_functions/\"></a><a name=\"../functions/ip_address_functions/\"></a><a name=\"../query_language/functions/ip_address_functions/\"></a><a name=\"../../../../functions/ip_address_functions/\"></a><a name=\"../../../../query_language/functions/ip_address_functions/\"></a><a name=\"../../../functions/ip_address_functions/\"></a><a name=\"ip_address_functions/\"></a><a name=\"../../query_language/functions/ip_address_functions/\"></a><a name=\"../../../query_language/functions/ip_address_functions/\"></a><a name=\"functions/ip_address_functions/\"></a><a name=\"../../../../../query_language/functions/ip_address_functions/\"></a><a name=\"../../functions/ip_address_functions/\"></a><a name=\"../../../../../functions/ip_address_functions/\"></a><a name=\"../../../../../../functions/ip_address_functions/\"></a></p>\n<h2 id=\"iphan-shu\">IP\u51fd\u6570<a class=\"headerlink\" href=\"#iphan-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"ipv4numtostring-num\">IPv4NumToString(num)<a class=\"headerlink\" href=\"#ipv4numtostring-num\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2aUInt32\uff08\u5927\u7aef\uff09\u8868\u793a\u7684IPv4\u7684\u5730\u5740\uff0c\u8fd4\u56de\u76f8\u5e94IPv4\u7684\u5b57\u7b26\u4e32\u8868\u73b0\u5f62\u5f0f\uff0c\u683c\u5f0f\u4e3aA.B.C.D\uff08\u4ee5\u70b9\u5206\u5272\u7684\u5341\u8fdb\u5236\u6570\u5b57\uff09\u3002</p>\n<h3 id=\"ipv4stringtonum-s\">IPv4StringToNum(s)<a class=\"headerlink\" href=\"#ipv4stringtonum-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0eIPv4NumToString\u51fd\u6570\u76f8\u53cd\u3002\u5982\u679cIPv4\u5730\u5740\u683c\u5f0f\u65e0\u6548\uff0c\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"ipv4numtostringclassc-num\">IPv4NumToStringClassC(num)<a class=\"headerlink\" href=\"#ipv4numtostringclassc-num\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0eIPv4NumToString\u7c7b\u4f3c\uff0c\u4f46\u4f7f\u7528xxx\u66ff\u6362\u6700\u540e\u4e00\u4e2a\u5b57\u8282\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">IPv4NumToStringClassC</span><span class=\"p\">(</span><span class=\"n\">ClientIP</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500k\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500c\u2500\u2510</span>\n<span class=\"err\">\u2502 83.149.9.xxx   \u2502 26238 \u2502</span>\n<span class=\"err\">\u2502 217.118.81.xxx \u2502 26074 \u2502</span>\n<span class=\"err\">\u2502 213.87.129.xxx \u2502 25481 \u2502</span>\n<span class=\"err\">\u2502 83.149.8.xxx   \u2502 24984 \u2502</span>\n<span class=\"err\">\u2502 217.118.83.xxx \u2502 22797 \u2502</span>\n<span class=\"err\">\u2502 78.25.120.xxx  \u2502 22354 \u2502</span>\n<span class=\"err\">\u2502 213.87.131.xxx \u2502 21285 \u2502</span>\n<span class=\"err\">\u2502 78.25.121.xxx  \u2502 20887 \u2502</span>\n<span class=\"err\">\u2502 188.162.65.xxx \u2502 19694 \u2502</span>\n<span class=\"err\">\u2502 83.149.48.xxx  \u2502 17406 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u7531\u4e8e\u4f7f\u7528'xxx'\u662f\u4e0d\u89c4\u8303\u7684\uff0c\u56e0\u6b64\u5c06\u6765\u53ef\u80fd\u4f1a\u66f4\u6539\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u4e0d\u8981\u4f9d\u8d56\u6b64\u683c\u5f0f\u3002</p>\n<h4 id=\"ipv6numtostring-x\">IPv6NumToString(x)<a class=\"headerlink\" href=\"#ipv6numtostring-x\" title=\"Permanent link\">&para;</a></h4>\n<p>\u63a5\u53d7FixedString(16)\u7c7b\u578b\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\u7684IPv6\u5730\u5740\u3002\u4ee5\u6587\u672c\u683c\u5f0f\u8fd4\u56de\u6b64\u5730\u5740\u7684\u5b57\u7b26\u4e32\u3002<br />\nIPv6\u6620\u5c04\u7684IPv4\u5730\u5740\u4ee5::ffff:111.222.33\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"s1\">&#39;2A0206B8000000000000000000000011&#39;</span><span class=\"p\">),</span> <span class=\"mi\">16</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">addr</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500addr\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 2a02:6b8::11 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"n\">ClientIP6</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">),</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits_all</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">today</span><span class=\"p\">()</span> <span class=\"k\">AND</span> <span class=\"k\">substring</span><span class=\"p\">(</span><span class=\"n\">ClientIP6</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">12</span><span class=\"p\">)</span> <span class=\"o\">!=</span> <span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"s1\">&#39;00000000000000000000FFFF&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500IPv6NumToString(ClientIP6)\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500c\u2500\u2510</span>\n<span class=\"err\">\u2502 2a02:2168:aaa:bbbb::2                   \u2502 24695 \u2502</span>\n<span class=\"err\">\u2502 2a02:2698:abcd:abcd:abcd:abcd:8888:5555 \u2502 22408 \u2502</span>\n<span class=\"err\">\u2502 2a02:6b8:0:fff::ff                      \u2502 16389 \u2502</span>\n<span class=\"err\">\u2502 2a01:4f8:111:6666::2                    \u2502 16016 \u2502</span>\n<span class=\"err\">\u2502 2a02:2168:888:222::1                    \u2502 15896 \u2502</span>\n<span class=\"err\">\u2502 2a01:7e00::ffff:ffff:ffff:222           \u2502 14774 \u2502</span>\n<span class=\"err\">\u2502 2a02:8109:eee:ee:eeee:eeee:eeee:eeee    \u2502 14443 \u2502</span>\n<span class=\"err\">\u2502 2a02:810b:8888:888:8888:8888:8888:8888  \u2502 14345 \u2502</span>\n<span class=\"err\">\u2502 2a02:6b8:0:444:4444:4444:4444:4444      \u2502 14279 \u2502</span>\n<span class=\"err\">\u2502 2a01:7e00::ffff:ffff:ffff:ffff          \u2502 13880 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"n\">ClientIP6</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">),</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits_all</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">today</span><span class=\"p\">()</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500IPv6NumToString(ClientIP6)\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510</span>\n<span class=\"err\">\u2502 ::ffff:94.26.111.111       \u2502 747440 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:37.143.222.4        \u2502 529483 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:5.166.111.99        \u2502 317707 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:46.38.11.77         \u2502 263086 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:79.105.111.111      \u2502 186611 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:93.92.111.88        \u2502 176773 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:84.53.111.33        \u2502 158709 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:217.118.11.22       \u2502 154004 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:217.118.11.33       \u2502 148449 \u2502</span>\n<span class=\"err\">\u2502 ::ffff:217.118.11.44       \u2502 148243 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"ipv6stringtonum-s\">IPv6StringToNum(s)<a class=\"headerlink\" href=\"#ipv6stringtonum-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0eIPv6NumToString\u7684\u76f8\u53cd\u3002\u5982\u679cIPv6\u5730\u5740\u683c\u5f0f\u65e0\u6548\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u8282\u5b57\u7b26\u4e32\u3002<br />\n\u5341\u516d\u8fdb\u5236\u53ef\u4ee5\u662f\u5927\u5199\u7684\u6216\u5c0f\u5199\u7684\u3002</p>\n<h3 id=\"ipv4toipv6-x\">IPv4ToIPv6(x)<a");
            
            document.write(" class=\"headerlink\" href=\"#ipv4toipv6-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2aUInt32\u7c7b\u578b\u7684IPv4\u5730\u5740\uff0c\u8fd4\u56deFixedString(16)\u7c7b\u578b\u7684IPv6\u5730\u5740\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"n\">IPv4ToIPv6</span><span class=\"p\">(</span><span class=\"n\">IPv4StringToNum</span><span class=\"p\">(</span><span class=\"s1\">&#39;192.168.0.1&#39;</span><span class=\"p\">)))</span> <span class=\"k\">AS</span> <span class=\"n\">addr</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500addr\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 ::ffff:192.168.0.1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"cutipv6-x-bitstocutforipv6-bitstocutforipv4\">cutIPv6(x, bitsToCutForIPv6, bitsToCutForIPv4)<a class=\"headerlink\" href=\"#cutipv6-x-bitstocutforipv6-bitstocutforipv4\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2aFixedString(16)\u7c7b\u578b\u7684IPv6\u5730\u5740\uff0c\u8fd4\u56de\u4e00\u4e2aString\uff0c\u8fd9\u4e2aString\u4e2d\u5305\u542b\u4e86\u5220\u9664\u6307\u5b9a\u4f4d\u4e4b\u540e\u7684\u5730\u5740\u7684\u6587\u672c\u683c\u5f0f\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"n\">IPv6StringToNum</span><span class=\"p\">(</span><span class=\"s1\">&#39;2001:0DB8:AC10:FE01:FEED:BABE:CAFE:F00D&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">ipv6</span><span class=\"p\">,</span>\n    <span class=\"n\">IPv4ToIPv6</span><span class=\"p\">(</span><span class=\"n\">IPv4StringToNum</span><span class=\"p\">(</span><span class=\"s1\">&#39;192.168.0.1&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">ipv4</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">cutIPv6</span><span class=\"p\">(</span><span class=\"n\">ipv6</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n    <span class=\"n\">cutIPv6</span><span class=\"p\">(</span><span class=\"n\">ipv4</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500cutIPv6(ipv6, 2, 0)\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500cutIPv6(ipv4, 0, 2)\u2500\u2510</span>\n<span class=\"err\">\u2502 2001:db8:ac10:fe01:feed:babe:cafe:0 \u2502 ::ffff:192.168.0.0  \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"ipv4cidrtorange-ipv4-cidr\">IPv4CIDRToRange(ipv4, cidr),<a class=\"headerlink\" href=\"#ipv4cidrtorange-ipv4-cidr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2aIPv4\u5730\u5740\u4ee5\u53ca\u4e00\u4e2aUInt8\u7c7b\u578b\u7684CIDR\u3002\u8fd4\u56de\u5305\u542b\u5b50\u7f51\u6700\u4f4e\u8303\u56f4\u4ee5\u53ca\u6700\u9ad8\u8303\u56f4\u7684\u5143\u7ec4\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">IPv4CIDRToRange</span><span class=\"p\">(</span><span class=\"n\">toIPv4</span><span class=\"p\">(</span><span class=\"s1\">&#39;192.168.5.2&#39;</span><span class=\"p\">),</span> <span class=\"mi\">16</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500IPv4CIDRToRange(toIPv4(&#39;192.168.5.2&#39;), 16)\u2500\u2510</span>\n<span class=\"err\">\u2502 (&#39;192.168.0.0&#39;,&#39;192.168.255.255&#39;)          \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"ipv6cidrtorange-ipv6-cidr\">IPv6CIDRToRange(ipv6, cidr),<a class=\"headerlink\" href=\"#ipv6cidrtorange-ipv6-cidr\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2aIPv6\u5730\u5740\u4ee5\u53ca\u4e00\u4e2aUInt8\u7c7b\u578b\u7684CIDR\u3002\u8fd4\u56de\u5305\u542b\u5b50\u7f51\u6700\u4f4e\u8303\u56f4\u4ee5\u53ca\u6700\u9ad8\u8303\u56f4\u7684\u5143\u7ec4\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">IPv6CIDRToRange</span><span class=\"p\">(</span><span class=\"n\">toIPv6</span><span class=\"p\">(</span><span class=\"s1\">&#39;2001:0db8:0000:85a3:0000:0000:ac1f:8001&#39;</span><span class=\"p\">),</span> <span class=\"mi\">32</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500IPv6CIDRToRange(toIPv6(&#39;2001:0db8:0000:85a3:0000:0000:ac1f:8001&#39;), 32)\u2500\u2510</span>\n<span class=\"err\">\u2502 (&#39;2001:db8::&#39;,&#39;2001:db8:ffff:ffff:ffff:ffff:ffff:ffff&#39;)                \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"toipv4-string\">toIPv4(string)<a class=\"headerlink\" href=\"#toipv4-string\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IPv4StringToNum()</code>\u7684\u522b\u540d\uff0c\u5b83\u91c7\u7528\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684IPv4\u5730\u5740\u5e76\u8fd4\u56de<a href=\"#../../data_types/domains/ipv4/\">IPv4</a>\u7c7b\u578b\u7684\u503c\uff0c\u8be5\u4e8c\u8fdb\u5236\u503c\u7b49\u4e8e<code>IPv4StringToNum()</code>\u8fd4\u56de\u7684\u503c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"s1\">&#39;171.225.130.45&#39;</span> <span class=\"k\">as</span> <span class=\"n\">IPv4_string</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">IPv4StringToNum</span><span class=\"p\">(</span><span class=\"n\">IPv4_string</span><span class=\"p\">)),</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">toIPv4</span><span class=\"p\">(</span><span class=\"n\">IPv4_string</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(IPv4StringToNum(IPv4_string))\u2500\u252c\u2500toTypeName(toIPv4(IPv4_string))\u2500\u2510</span>\n<span class=\"err\">\u2502 UInt32                                   \u2502 IPv4                            \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"s1\">&#39;171.225.130.45&#39;</span> <span class=\"k\">as</span> <span class=\"n\">IPv4_string</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"n\">IPv4StringToNum</span><span class=\"p\">(</span><span class=\"n\">IPv4_string</span><span class=\"p\">)),</span>\n    <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"n\">toIPv4</span><span class=\"p\">(</span><span class=\"n\">IPv4_string</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500hex(IPv4StringToNum(IPv4_string))\u2500\u252c\u2500hex(toIPv4(IPv4_string))\u2500\u2510</span>\n<span class=\"err\">\u2502 ABE1822D                          \u2502 ABE1822D                 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"toipv6-string\">toIPv6(string)<a class=\"headerlink\" href=\"#toipv6-string\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IPv6StringToNum()</code>\u7684\u522b\u540d\uff0c\u5b83\u91c7\u7528\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684IPv6\u5730\u5740\u5e76\u8fd4\u56de<a href=\"#../../data_types/domains/ipv6/\">IPv6</a>\u7c7b\u578b\u7684\u503c\uff0c\u8be5\u4e8c\u8fdb\u5236\u503c\u7b49\u4e8e<code>IPv6StringToNum()</code>\u8fd4\u56de\u7684\u503c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"s1\">&#39;2001:438:ffff::407d:1bc1&#39;</span> <span class=\"k\">as</span> <span class=\"n\">IPv6_string</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">IPv6StringToNum</span><span class=\"p\">(</span><span class=\"n\">IPv6_string</span><span class=\"p\">)),</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">toIPv6</span><span class=\"p\">(</span><span class=\"n\">IPv6_string</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(IPv6StringToNum(IPv6_string))\u2500\u252c\u2500toTypeName(toIPv6(IPv6_string))\u2500\u2510</span>\n<span class=\"err\">\u2502 FixedString(16)                          \u2502 IPv6                            \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"s1\">&#39;2001:438:ffff::407d:1bc1&#39;</span> <span class=\"k\">as</span> <span class=\"n\">IPv6_string</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"n\">IPv6StringToNum</span><span class=\"p\">(</span><span class=\"n\">IPv6_string</span><span class=\"p\">)),</span>\n    <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"n\">toIPv6</span><span class=\"p\">(</span><span class=\"n\">IPv6_string</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500hex(IPv6StringToNum(IPv6_string))\u2500\u252c\u2500hex(toIPv6(IPv6_string))\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 20010438FFFF000000000000407D1BC1  \u2502 20010438FFFF000000000000407D1BC1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"json_functions/\"></a><a name=\"../../../query_language/functions/json_functions/\"></a><a name=\"../../../../../query_language/functions/json_functions/\"></a><a name=\"../../../../../../functions/json_functions/\"></a><a name=\"../../query_language/functions/json_functions/\"></a><a name=\"functions/json_functions/\"></a><a name=\"../../../../query_language/functions/json_functions/\"></a><a name=\"../../../functions/json_functions/\"></a><a name=\"query_language/functions/json_functions/\"></a><a name=\"../query_language/functions/json_functions/\"></a><a name=\"../functions/json_functions/\"></a><a name=\"../../functions/json_functions/\"></a><a name=\"../../../../functions/json_functions/\"></a><a name=\"../../../../../functions/json_functions/\"></a></p>\n<h2 id=\"jsonhan-shu\">JSON\u51fd\u6570<a class=\"headerlink\" href=\"#jsonhan-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u5728Yandex.Metrica\u4e2d\uff0c\u7528\u6237\u4f7f\u7528JSON\u4f5c\u4e3a\u8bbf\u95ee\u53c2\u6570\u3002\u4e3a\u4e86\u5904\u7406\u8fd9\u4e9bJSON\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e9b\u51fd\u6570\u3002\uff08\u5c3d\u7ba1\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cJSON\u662f\u9884\u5148\u8fdb\u884c\u989d\u5916\u5904\u7406\u7684\uff0c\u5e76\u5c06\u7ed3\u679c\u503c\u653e\u5728\u5355\u72ec\u7684\u5217\u4e2d\u3002\uff09\u6240\u6709\u7684\u8fd9\u4e9b\u51fd\u6570\u90fd\u8fdb\u884c\u4e86\u5c3d\u53ef\u80fd\u7684\u5047\u8bbe\u3002\u4ee5\u4f7f\u51fd\u6570\u80fd\u591f\u5c3d\u5feb\u7684\u5b8c\u6210\u5de5\u4f5c\u3002</p>\n<p>\u6211\u4eec\u5bf9JSON\u683c\u5f0f\u505a\u4e86\u5982\u4e0b\u5047\u8bbe\uff1a</p>\n<ol>\n<li>\u5b57\u6bb5\u540d\u79f0\uff08\u51fd\u6570\u7684\u53c2\u6570\uff09\u5fc5\u987b\u4f7f\u5e38\u91cf\u3002</li>\n<li>\u5b57\u6bb5\u540d\u79f0\u5fc5\u987b\u4f7f\u7528\u89c4\u8303\u7684\u7f16\u7801\u3002\u4f8b\u5982\uff1a<code>visitParamHas('{\"abc\":\"def\"}', 'abc') = 1</code>\uff0c\u4f46\u662f <code>visitParamHas('{\"\\\\u0061\\\\u0062\\\\u0063\":\"def\"}', 'abc') = 0</code></li>\n<li>\u51fd\u6570\u53ef\u4ee5\u968f\u610f\u7684\u5728\u591a\u5c42\u5d4c\u5957\u7ed3\u6784\u4e0b\u67e5\u627e\u5b57\u6bb5\u3002\u5982\u679c\u5b58\u5728\u591a\u4e2a\u5339\u914d\u5b57\u6bb5\uff0c\u5219\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\u5b57\u6bb5\u3002</li>\n<li>JSON\u9664\u5b57\u7b26\u4e32\u6587\u672c\u5916\u4e0d\u5b58\u5728\u7a7a\u683c\u5b57\u7b26\u3002</li>\n</ol>\n<h3 id=\"visitparamhas-params-name\">visitParamHas(params, name)<a class=\"headerlink\" href=\"#visitparamhas-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u662f\u5426\u5b58\u5728\u201cname\u201d\u540d\u79f0\u7684\u5b57\u6bb5</p>\n<h3 id=\"visitparamextractuint-params-name\">visitParamExtractUInt(params, name)<a class=\"headerli");
            
            document.write("nk\" href=\"#visitparamextractuint-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u540d\u4e3a\u201cname\u201d\u7684\u5b57\u6bb5\u7684\u503c\u89e3\u6790\u6210UInt64\u3002\u5982\u679c\u8fd9\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5b57\u6bb5\uff0c\u51fd\u6570\u5c06\u5c1d\u8bd5\u4ece\u5b57\u7b26\u4e32\u7684\u5f00\u5934\u89e3\u6790\u4e00\u4e2a\u6570\u5b57\u3002\u5982\u679c\u8be5\u5b57\u6bb5\u4e0d\u5b58\u5728\uff0c\u6216\u65e0\u6cd5\u4ece\u5b83\u4e2d\u89e3\u6790\u5230\u6570\u5b57\uff0c\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"visitparamextractint-params-name\">visitParamExtractInt(params, name)<a class=\"headerlink\" href=\"#visitparamextractint-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0evisitParamExtractUInt\u76f8\u540c\uff0c\u4f46\u8fd4\u56deInt64\u3002</p>\n<h3 id=\"visitparamextractfloat-params-name\">visitParamExtractFloat(params, name)<a class=\"headerlink\" href=\"#visitparamextractfloat-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0evisitParamExtractUInt\u76f8\u540c\uff0c\u4f46\u8fd4\u56deFloat64\u3002</p>\n<h3 id=\"visitparamextractbool-params-name\">visitParamExtractBool(params, name)<a class=\"headerlink\" href=\"#visitparamextractbool-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>\u89e3\u6790true/false\u503c\u3002\u5176\u7ed3\u679c\u662fUInt8\u7c7b\u578b\u7684\u3002</p>\n<h3 id=\"visitparamextractraw-params-name\">visitParamExtractRaw(params, name)<a class=\"headerlink\" href=\"#visitparamextractraw-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u5b57\u6bb5\u7684\u503c\uff0c\u5305\u542b\u7a7a\u683c\u7b26\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">visitParamExtractRaw(&#39;{&quot;abc&quot;:&quot;\\\\n\\\\u0000&quot;}&#39;, &#39;abc&#39;) = &#39;&quot;\\\\n\\\\u0000&quot;&#39;</span>\n<span class=\"err\">visitParamExtractRaw(&#39;{&quot;abc&quot;:{&quot;def&quot;:[1,2,3]}}&#39;, &#39;abc&#39;) = &#39;{&quot;def&quot;:[1,2,3]}&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"visitparamextractstring-params-name\">visitParamExtractString(params, name)<a class=\"headerlink\" href=\"#visitparamextractstring-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u53cc\u5f15\u53f7\u89e3\u6790\u5b57\u7b26\u4e32\u3002\u8fd9\u4e2a\u503c\u6ca1\u6709\u8fdb\u884c\u8f6c\u4e49\u3002\u5982\u679c\u8f6c\u4e49\u5931\u8d25\uff0c\u5b83\u5c06\u8fd4\u56de\u4e00\u4e2a\u7a7a\u767d\u5b57\u7b26\u4e32\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">visitParamExtractString(&#39;{&quot;abc&quot;:&quot;\\\\n\\\\u0000&quot;}&#39;, &#39;abc&#39;) = &#39;\\n\\0&#39;</span>\n<span class=\"err\">visitParamExtractString(&#39;{&quot;abc&quot;:&quot;\\\\u263a&quot;}&#39;, &#39;abc&#39;) = &#39;\u263a&#39;</span>\n<span class=\"err\">visitParamExtractString(&#39;{&quot;abc&quot;:&quot;\\\\u263&quot;}&#39;, &#39;abc&#39;) = &#39;&#39;</span>\n<span class=\"err\">visitParamExtractString(&#39;{&quot;abc&quot;:&quot;hello}&#39;, &#39;abc&#39;) = &#39;&#39;</span>\n</code></pre></div>\n\n\n<p>\u76ee\u524d\u4e0d\u652f\u6301<code>\\uXXXX\\uYYYY</code>\u8fd9\u4e9b\u5b57\u7b26\u7f16\u7801\uff0c\u8fd9\u4e9b\u7f16\u7801\u4e0d\u5728\u57fa\u672c\u591a\u6587\u79cd\u5e73\u9762\u4e2d\uff08\u5b83\u4eec\u88ab\u8f6c\u5316\u4e3aCESU-8\u800c\u4e0d\u662fUTF-8\uff09\u3002</p>\n<p>\u4ee5\u4e0b\u51fd\u6570\u57fa\u4e8e<a href=\"https://github.com/lemire/simdjson\" rel=\"external nofollow noreferrer\">simdjson</a>\uff0c\u4e13\u4e3a\u66f4\u590d\u6742\u7684JSON\u89e3\u6790\u8981\u6c42\u800c\u8bbe\u8ba1\u3002\u4f46\u4e0a\u8ff0\u5047\u8bbe2\u4ecd\u7136\u9002\u7528\u3002</p>\n<h3 id=\"jsonhas-json-indices-or-keys\">JSONHas(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonhas-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679cJSON\u4e2d\u5b58\u5728\u8be5\u503c\uff0c\u5219\u8fd4\u56de<code>1</code>\u3002</p>\n<p>\u5982\u679c\u8be5\u503c\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de<code>0</code>\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">select JSONHas(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;) = 1</span>\n<span class=\"err\">select JSONHas(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;, 4) = 0</span>\n</code></pre></div>\n\n\n<p><code>indices_or_keys</code>\u53ef\u4ee5\u662f\u96f6\u4e2a\u6216\u591a\u4e2a\u53c2\u6570\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u53c2\u6570\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u6216\u6574\u6570\u3002</p>\n<ul>\n<li>String = \u6309\u6210\u5458\u540d\u79f0\u8bbf\u95eeJSON\u5bf9\u8c61\u6210\u5458\u3002</li>\n<li>\u6b63\u6574\u6570 = \u4ece\u5934\u5f00\u59cb\u8bbf\u95ee\u7b2cn\u4e2a\u6210\u5458/\u6210\u5458\u540d\u79f0\u3002</li>\n<li>\u8d1f\u6574\u6570 = \u4ece\u672b\u5c3e\u8bbf\u95ee\u7b2cn\u4e2a\u6210\u5458/\u6210\u5458\u540d\u79f0\u3002</li>\n</ul>\n<p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u6574\u6570\u6765\u8bbf\u95eeJSON\u6570\u7ec4\u548cJSON\u5bf9\u8c61\u3002</p>\n<p>\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">select JSONExtractKey(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, 1) = &#39;a&#39;</span>\n<span class=\"err\">select JSONExtractKey(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, 2) = &#39;b&#39;</span>\n<span class=\"err\">select JSONExtractKey(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, -1) = &#39;b&#39;</span>\n<span class=\"err\">select JSONExtractKey(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, -2) = &#39;a&#39;</span>\n<span class=\"err\">select JSONExtractString(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, 1) = &#39;hello&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonlength-json-indices-or-keys\">JSONLength(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonlength-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56deJSON\u6570\u7ec4\u6216JSON\u5bf9\u8c61\u7684\u957f\u5ea6\u3002</p>\n<p>\u5982\u679c\u8be5\u503c\u4e0d\u5b58\u5728\u6216\u7c7b\u578b\u9519\u8bef\uff0c\u5c06\u8fd4\u56de<code>0</code>\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">select JSONLength(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;) = 3</span>\n<span class=\"err\">select JSONLength(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;) = 2</span>\n</code></pre></div>\n\n\n<h3 id=\"jsontype-json-indices-or-keys\">JSONType(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsontype-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56deJSON\u503c\u7684\u7c7b\u578b\u3002</p>\n<p>\u5982\u679c\u8be5\u503c\u4e0d\u5b58\u5728\uff0c\u5c06\u8fd4\u56de<code>Null</code>\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">select JSONType(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;) = &#39;Object&#39;</span>\n<span class=\"err\">select JSONType(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;a&#39;) = &#39;String&#39;</span>\n<span class=\"err\">select JSONType(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;) = &#39;Array&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextractuint-json-indices-or-keys\">JSONExtractUInt(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractuint-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"jsonextractint-json-indices-or-keys\">JSONExtractInt(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractint-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"jsonextractfloat-json-indices-or-keys\">JSONExtractFloat(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractfloat-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"jsonextractbool-json-indices-or-keys\">JSONExtractBool(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractbool-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>\u89e3\u6790JSON\u5e76\u63d0\u53d6\u503c\u3002\u8fd9\u4e9b\u51fd\u6570\u7c7b\u4f3c\u4e8e<code>visitParam*</code>\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u8be5\u503c\u4e0d\u5b58\u5728\u6216\u7c7b\u578b\u9519\u8bef\uff0c\u5c06\u8fd4\u56de<code>0</code>\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">select JSONExtractInt(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;, 1) = -100</span>\n<span class=\"err\">select JSONExtractFloat(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;, 2) = 200.0</span>\n<span class=\"err\">select JSONExtractUInt(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;, -1) = 300</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextractstring-json-indices-or-keys\">JSONExtractString(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractstring-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>\u89e3\u6790JSON\u5e76\u63d0\u53d6\u5b57\u7b26\u4e32\u3002\u6b64\u51fd\u6570\u7c7b\u4f3c\u4e8e<code>visitParamExtractString</code>\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u8be5\u503c\u4e0d\u5b58\u5728\u6216\u7c7b\u578b\u9519\u8bef\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</p>\n<p>\u8be5\u503c\u672a\u8f6c\u4e49\u3002\u5982\u679cunescaping\u5931\u8d25\uff0c\u5219\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">select JSONExtractString(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;a&#39;) = &#39;hello&#39;</span>\n<span class=\"err\">select JSONExtractString(&#39;{&quot;abc&quot;:&quot;\\\\n\\\\u0000&quot;}&#39;, &#39;abc&#39;) = &#39;\\n\\0&#39;</span>\n<span class=\"err\">select JSONExtractString(&#39;{&quot;abc&quot;:&quot;\\\\u263a&quot;}&#39;, &#39;abc&#39;) = &#39;\u263a&#39;</span>\n<span class=\"err\">select JSONExtractString(&#39;{&quot;abc&quot;:&quot;\\\\u263&quot;}&#39;, &#39;abc&#39;) = &#39;&#39;</span>\n<span class=\"err\">select JSONExtractString(&#39;{&quot;abc&quot;:&quot;hello}&#39;, &#39;abc&#39;) = &#39;&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextract-json-indices-or-keys-return-type\">JSONExtract(json[, indices_or_keys...], return_type)<a class=\"headerlink\" href=\"#jsonextract-json-indices-or-keys-return-type\" title=\"Permanent link\">&para;</a></h3>\n<p>\u89e3\u6790JSON\u5e76\u63d0\u53d6\u7ed9\u5b9aClickHouse\u6570\u636e\u7c7b\u578b\u7684\u503c\u3002</p>\n<p>\u8fd9\u662f\u4ee5\u524d\u7684<code>JSONExtract&lt;type&gt;\u51fd\u6570\u7684\u53d8\u4f53\u3002\n\u8fd9\u610f\u5473\u7740</code>JSONExtract(..., 'String')<code>\u8fd4\u56de\u4e0e</code>JSONExtractString()<code>\u8fd4\u56de\u5b8c\u5168\u76f8\u540c\u3002</code>JSONExtract(..., 'Float64')<code>\u8fd4\u56de\u4e8e</code>JSONExtractFloat()`\u8fd4\u56de\u5b8c\u5168\u76f8\u540c\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT JSONExtract(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;Tuple(String, Array(Float64))&#39;) = (&#39;hello&#39;,[-100,200,300])</span>\n<span class=\"err\">SELECT JSONExtract(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;Tuple(b Array(Float64), a String)&#39;) = ([-100,200,300],&#39;hello&#39;)</span>\n<span class=\"err\">SELECT JSONExtract(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;, &#39;Array(Nullable(Int8))&#39;) = [-100, NULL, NULL]</span>\n<span class=\"err\">SELECT JSONExtract(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;, 4, &#39;Nullable(Int64)&#39;) = NULL</span>\n<span class=\"err\">SELECT JSONExtract(&#39;{&quot;passed&quot;: true}&#39;, &#39;passed&#39;, &#39;UInt8&#39;) = 1</span>\n<span class=\"err\">SELECT JSONExtract(&#39;{&quot;day&quot;: &quot;Thursday&quot;}&#39;, &#39;day&#39;, &#39;Enum8(\\&#39;Sunday\\&#39; = 0, \\&#39;Monday\\&#39; = 1, \\&#39;Tuesday\\&#39; = 2, \\&#39;Wednesday\\&#39; = 3, \\&#39;Thursday\\&#39; = 4, \\&#39;Friday\\&#39; = 5, \\&#39;Saturday\\&#39; = 6)&#39;) = &#39;Thursday&#39;</span>\n<span class=\"err\">SELECT JSONExtract(&#39;{&quot;day&quot;: 5}&#39;, &#39;day&#39;, &#39;Enum8(\\&#39;Sunday\\&#39; = 0, \\&#39;Monday\\&#39; = 1, \\&#39;Tuesday\\&#39; = 2, \\&#39;Wednesday\\&#39; = 3, \\&#39;Thursday\\&#39; = 4, \\&#39;Friday\\&#39; = 5, \\&#39;Saturday\\&#39; = 6)&#39;) = &#39;Friday&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextractkeysandvalues-json-indices-or-keys-value-type\">JSONExtractKeysAndValues(json[, indices_or_keys...], value_type)<a class=\"headerlink\" href=\"#jsonextractkeysandvalues-json-indices-or-keys-value-type\" title=\"Permanent link\">");
            
            document.write("&para;</a></h3>\n<p>\u4eceJSON\u4e2d\u89e3\u6790\u952e\u503c\u5bf9\uff0c\u5176\u4e2d\u503c\u662f\u7ed9\u5b9a\u7684ClickHouse\u6570\u636e\u7c7b\u578b\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT JSONExtractKeysAndValues(&#39;{&quot;x&quot;: {&quot;a&quot;: 5, &quot;b&quot;: 7, &quot;c&quot;: 11}}&#39;, &#39;x&#39;, &#39;Int8&#39;) = [(&#39;a&#39;,5),(&#39;b&#39;,7),(&#39;c&#39;,11)];</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextractraw-json-indices-or-keys\">JSONExtractRaw(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractraw-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56deJSON\u7684\u90e8\u5206\u3002</p>\n<p>\u5982\u679c\u90e8\u4ef6\u4e0d\u5b58\u5728\u6216\u7c7b\u578b\u9519\u8bef\uff0c\u5c06\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">select JSONExtractRaw(&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;, &#39;b&#39;) = &#39;[-100, 200.0, 300]&#39;</span>\n</code></pre></div>\n\n\n<p><a name=\"functions/higher_order_functions/\"></a><a name=\"../../../query_language/functions/higher_order_functions/\"></a><a name=\"../../../../../../functions/higher_order_functions/\"></a><a name=\"higher_order_functions/\"></a><a name=\"../../../../../query_language/functions/higher_order_functions/\"></a><a name=\"../functions/higher_order_functions/\"></a><a name=\"../../../functions/higher_order_functions/\"></a><a name=\"../query_language/functions/higher_order_functions/\"></a><a name=\"../../../../functions/higher_order_functions/\"></a><a name=\"query_language/functions/higher_order_functions/\"></a><a name=\"../../../../query_language/functions/higher_order_functions/\"></a><a name=\"../../../../../functions/higher_order_functions/\"></a><a name=\"../../functions/higher_order_functions/\"></a><a name=\"../../query_language/functions/higher_order_functions/\"></a></p>\n<h2 id=\"gao-jie-han-shu\">\u9ad8\u9636\u51fd\u6570<a class=\"headerlink\" href=\"#gao-jie-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"yun-suan-fu-lambda-params-expr-han-shu\"><code>-&gt;</code> \u8fd0\u7b97\u7b26, lambda(params, expr) \u51fd\u6570<a class=\"headerlink\" href=\"#yun-suan-fu-lambda-params-expr-han-shu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u7528\u4e8e\u63cf\u8ff0\u4e00\u4e2alambda\u51fd\u6570\u7528\u6765\u4f20\u9012\u7ed9\u5176\u4ed6\u9ad8\u9636\u51fd\u6570\u3002\u7bad\u5934\u7684\u5de6\u4fa7\u6709\u4e00\u4e2a\u5f62\u5f0f\u53c2\u6570\uff0c\u5b83\u53ef\u4ee5\u662f\u4e00\u4e2a\u6807\u8bc6\u7b26\u6216\u591a\u4e2a\u6807\u8bc6\u7b26\u6240\u7ec4\u6210\u7684\u5143\u7956\u3002\u7bad\u5934\u7684\u53f3\u4fa7\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u5728\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5f62\u5f0f\u53c2\u6570\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u6807\u8bc6\u7b26\u6216\u8868\u7684\u4efb\u4f55\u4e00\u4e2a\u5217\u540d\u3002</p>\n<p>\u793a\u4f8b: <code>x -&gt; 2 * x, str -&gt; str != Referer.</code></p>\n<p>\u9ad8\u9636\u51fd\u6570\u53ea\u80fd\u63a5\u53d7lambda\u51fd\u6570\u4f5c\u4e3a\u5176\u53c2\u6570\u3002</p>\n<p>\u9ad8\u9636\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\u7684lambda\u51fd\u6570\u4f5c\u4e3a\u5176\u53c2\u6570\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9ad8\u9636\u51fd\u6570\u9700\u8981\u540c\u65f6\u4f20\u9012\u51e0\u4e2a\u957f\u5ea6\u76f8\u7b49\u7684\u6570\u7ec4\uff0c\u8fd9\u4e9b\u6570\u7ec4\u5c06\u88ab\u4f20\u9012\u7ed9lambda\u53c2\u6570\u3002</p>\n<p>\u9664\u4e86'arrayMap'\u548c'arrayFilter'\u4ee5\u5916\u7684\u6240\u6709\u5176\u4ed6\u51fd\u6570\uff0c\u90fd\u53ef\u4ee5\u7701\u7565\u7b2c\u4e00\u4e2a\u53c2\u6570\uff08lambda\u51fd\u6570\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9ed8\u8ba4\u8fd4\u56de\u6570\u7ec4\u5143\u7d20\u672c\u8eab\u3002</p>\n<h4 id=\"arraymap-func-arr1\">arrayMap(func, arr1, ...)<a class=\"headerlink\" href=\"#arraymap-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u5c06arr<br />\n\u5c06\u4ece'func'\u51fd\u6570\u7684\u539f\u59cb\u5e94\u7528\u7a0b\u5e8f\u83b7\u5f97\u7684\u6570\u7ec4\u8fd4\u56de\u5230'arr'\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u3002<br />\nReturns an array obtained from the original application of the 'func' function to each element in the 'arr' array.</p>\n<h4 id=\"arrayfilter-func-arr1\">arrayFilter(func, arr1, ...)<a class=\"headerlink\" href=\"#arrayfilter-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array containing only the elements in 'arr1' for which 'func' returns something other than 0.</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayFilter</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">-&gt;</span> <span class=\"n\">x</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%World%&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc World&#39;</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [&#39;abc World&#39;] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">arrayFilter</span><span class=\"p\">(</span>\n        <span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">x</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%World%&#39;</span><span class=\"p\">,</span>\n        <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">),</span>\n        <span class=\"p\">[</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc World&#39;</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">arr</span><span class=\"p\">)</span>\n    <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502 [2] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h4 id=\"arraycount-func-arr1\">arrayCount([func,] arr1, ...)<a class=\"headerlink\" href=\"#arraycount-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u6570\u7ec4arr\u4e2d\u975e\u96f6\u5143\u7d20\u7684\u6570\u91cf\uff0c\u5982\u679c\u6307\u5b9a\u4e86\u2018func\u2019\uff0c\u5219\u901a\u8fc7\u2018func\u2019\u7684\u8fd4\u56de\u503c\u786e\u5b9a\u5143\u7d20\u662f\u5426\u4e3a\u975e\u96f6\u5143\u7d20\u3002</p>\n<h4 id=\"arrayexists-func-arr1\">arrayExists([func,] arr1, ...)<a class=\"headerlink\" href=\"#arrayexists-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u6570\u7ec4\u2018arr\u2019\u4e2d\u662f\u5426\u5b58\u5728\u975e\u96f6\u5143\u7d20\uff0c\u5982\u679c\u6307\u5b9a\u4e86\u2018func\u2019\uff0c\u5219\u4f7f\u7528\u2018func\u2019\u7684\u8fd4\u56de\u503c\u786e\u5b9a\u5143\u7d20\u662f\u5426\u4e3a\u975e\u96f6\u5143\u7d20\u3002</p>\n<h4 id=\"arrayall-func-arr1\">arrayAll([func,] arr1, ...)<a class=\"headerlink\" href=\"#arrayall-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u6570\u7ec4\u2018arr\u2019\u4e2d\u662f\u5426\u5b58\u5728\u4e3a\u96f6\u7684\u5143\u7d20\uff0c\u5982\u679c\u6307\u5b9a\u4e86\u2018func\u2019\uff0c\u5219\u4f7f\u7528\u2018func\u2019\u7684\u8fd4\u56de\u503c\u786e\u5b9a\u5143\u7d20\u662f\u5426\u4e3a\u96f6\u5143\u7d20\u3002</p>\n<h4 id=\"arraysum-func-arr1\">arraySum([func,] arr1, ...)<a class=\"headerlink\" href=\"#arraysum-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8ba1\u7b97arr\u6570\u7ec4\u7684\u603b\u548c\uff0c\u5982\u679c\u6307\u5b9a\u4e86\u2018func\u2019\uff0c\u5219\u901a\u8fc7\u2018func\u2019\u7684\u8fd4\u56de\u503c\u8ba1\u7b97\u6570\u7ec4\u7684\u603b\u548c\u3002</p>\n<h4 id=\"arrayfirst-func-arr1\">arrayFirst(func, arr1, ...)<a class=\"headerlink\" href=\"#arrayfirst-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u6570\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5143\u7d20\uff0c\u51fd\u6570\u4f7f\u7528\u2018func\u2019\u5339\u914d\u6240\u6709\u5143\u7d20\uff0c\u76f4\u5230\u627e\u5230\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5143\u7d20\u3002</p>\n<h4 id=\"arrayfirstindex-func-arr1\">arrayFirstIndex(func, arr1, ...)<a class=\"headerlink\" href=\"#arrayfirstindex-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u6570\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5143\u7d20\u7684\u4e0b\u6807\u7d22\u5f15\uff0c\u51fd\u6570\u4f7f\u7528\u2018func\u2019\u5339\u914d\u6240\u6709\u5143\u7d20\uff0c\u76f4\u5230\u627e\u5230\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5143\u7d20\u3002</p>\n<h4 id=\"arraycumsum-func-arr1\">arrayCumSum([func,] arr1, ...)<a class=\"headerlink\" href=\"#arraycumsum-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u6e90\u6570\u7ec4\u90e8\u5206\u6570\u636e\u7684\u603b\u548c\uff0c\u5982\u679c\u6307\u5b9a\u4e86<code>func</code>\u51fd\u6570\uff0c\u5219\u4f7f\u7528<code>func</code>\u7684\u8fd4\u56de\u503c\u8ba1\u7b97\u603b\u548c\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayCumSum</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1, 2, 3, 4] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h4 id=\"arraycumsumnonnegative-arr\">arrayCumSumNonNegative(arr)<a class=\"headerlink\" href=\"#arraycumsumnonnegative-arr\" title=\"Permanent link\">&para;</a></h4>\n<p>\u4e0earrayCumSum\u76f8\u540c\uff0c\u8fd4\u56de\u6e90\u6570\u7ec4\u90e8\u5206\u6570\u636e\u7684\u603b\u548c\u3002\u4e0d\u540c\u4e8earrayCumSum\uff0c\u5f53\u8fd4\u56de\u503c\u5305\u542b\u5c0f\u4e8e\u96f6\u7684\u503c\u65f6\uff0c\u8be5\u503c\u66ff\u6362\u4e3a\u96f6\uff0c\u540e\u7eed\u8ba1\u7b97\u4f7f\u7528\u96f6\u7ee7\u7eed\u8ba1\u7b97\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayCumSumNonNegative</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,0,1] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h4 id=\"arraysort-func-arr1\">arraySort([func,] arr1, ...)<a class=\"headerlink\" href=\"#arraysort-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u5347\u5e8f\u6392\u5e8f<code>arr1</code>\u7684\u7ed3\u679c\u3002\u5982\u679c\u6307\u5b9a\u4e86<code>func</code>\u51fd\u6570\uff0c\u5219\u6392\u5e8f\u987a\u5e8f\u7531<code>func</code>\u7684\u7ed3\u679c\u51b3\u5b9a\u3002</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"external nofollow noreferrer\">Schwartzian\u53d8\u6362</a>\u7528\u4e8e\u63d0\u9ad8\u6392\u5e8f\u6548\u7387\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [&#39;world&#39;, &#39;hello&#39;] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8bf7\u6ce8\u610f\uff0cNULL\u548cNaN\u5728\u6700\u540e\uff08NaN\u5728NULL\u4e4b\u524d\uff09\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arraySort([1, nan, 2, NULL, 3, nan, 4, NULL])\u2500\u2510</span>\n<span class=\"err\">\u2502 [1,2,3,4,nan,nan,NULL,NULL]                   \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h4 id=\"arrayreversesort-func-arr1\">arrayReverseSort([func,] arr1, ...)<a class=\"headerlink\" href=\"#arrayreversesort-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8fd4\u56de\u964d\u5e8f\u6392\u5e8f<code>arr1</code>\u7684\u7ed3\u679c\u3002\u5982\u679c\u6307\u5b9a\u4e86<code>func</code>\u51fd\u6570\uff0c\u5219\u6392\u5e8f\u987a\u5e8f\u7531<code>func</code>\u7684\u7ed3\u679c\u51b3\u5b9a\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0cNULL\u548cNaN\u5728\u6700\u540e\uff08NaN\u5728NULL\u4e4b\u524d\uff09\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT");
            
            document.write("</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500arrayReverseSort([1, nan, 2, NULL, 3, nan, 4, NULL])\u2500\u2510</span>\n<span class=\"err\">\u2502 [4,3,2,1,nan,nan,NULL,NULL]                          \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"ext_dict_functions/\"></a><a name=\"../functions/ext_dict_functions/\"></a><a name=\"../../functions/ext_dict_functions/\"></a><a name=\"../../../functions/ext_dict_functions/\"></a><a name=\"query_language/functions/ext_dict_functions/\"></a><a name=\"../../../../functions/ext_dict_functions/\"></a><a name=\"../../../../../functions/ext_dict_functions/\"></a><a name=\"../../../query_language/functions/ext_dict_functions/\"></a><a name=\"../../../../query_language/functions/ext_dict_functions/\"></a><a name=\"../../query_language/functions/ext_dict_functions/\"></a><a name=\"../../../../../../functions/ext_dict_functions/\"></a><a name=\"../query_language/functions/ext_dict_functions/\"></a><a name=\"../../../../../query_language/functions/ext_dict_functions/\"></a><a name=\"functions/ext_dict_functions/\"></a></p>\n<h2 id=\"zi-dian-han-shu\">\u5b57\u5178\u51fd\u6570<a class=\"headerlink\" href=\"#zi-dian-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6709\u5173\u8fde\u63a5\u548c\u914d\u7f6e\u5916\u90e8\u8bcd\u5178\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605<a href=\"#../dicts/external_dicts/\">\u5916\u90e8\u8bcd\u5178</a>\u3002</p>\n<h3 id=\"dictgetuint8-dictgetuint16-dictgetuint32-dictgetuint64\">dictGetUInt8, dictGetUInt16, dictGetUInt32, dictGetUInt64<a class=\"headerlink\" href=\"#dictgetuint8-dictgetuint16-dictgetuint32-dictgetuint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"dictgetint8-dictgetint16-dictgetint32-dictgetint64\">dictGetInt8, dictGetInt16, dictGetInt32, dictGetInt64<a class=\"headerlink\" href=\"#dictgetint8-dictgetint16-dictgetint32-dictgetint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"dictgetfloat32-dictgetfloat64\">dictGetFloat32, dictGetFloat64<a class=\"headerlink\" href=\"#dictgetfloat32-dictgetfloat64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"dictgetdate-dictgetdatetime\">dictGetDate, dictGetDateTime<a class=\"headerlink\" href=\"#dictgetdate-dictgetdatetime\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"dictgetuuid\">dictGetUUID<a class=\"headerlink\" href=\"#dictgetuuid\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"dictgetstring\">dictGetString<a class=\"headerlink\" href=\"#dictgetstring\" title=\"Permanent link\">&para;</a></h3>\n<p><code>dictGetT('dict_name', 'attr_name', id)</code></p>\n<ul>\n<li>\u4f7f\u7528'id'\u952e\u83b7\u53d6dict_name\u5b57\u5178\u4e2dattr_name\u5c5e\u6027\u7684\u503c\u3002<code>dict_name</code>\u548c<code>attr_name</code>\u662f\u5e38\u91cf\u5b57\u7b26\u4e32\u3002<code>id</code>\u5fc5\u987b\u662fUInt64\u3002<br />\n\u5982\u679c\u5b57\u5178\u4e2d\u6ca1\u6709<code>id</code>\u952e\uff0c\u5219\u8fd4\u56de\u5b57\u5178\u63cf\u8ff0\u4e2d\u6307\u5b9a\u7684\u9ed8\u8ba4\u503c\u3002</li>\n</ul>\n<h3 id=\"ext_dict_functions_dictGetTOrDefault\">dictGetTOrDefault<a class=\"headerlink\" href=\"#ext_dict_functions_dictGetTOrDefault\" title=\"Permanent link\">&para;</a></h3>\n<p><code>dictGetTOrDefault('dict_name', 'attr_name', id, default)</code></p>\n<p>\u4e0e<code>dictGetT</code>\u51fd\u6570\u76f8\u540c\uff0c\u4f46\u9ed8\u8ba4\u503c\u53d6\u81ea\u51fd\u6570\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u3002</p>\n<h3 id=\"dictisin\">dictIsIn<a class=\"headerlink\" href=\"#dictisin\" title=\"Permanent link\">&para;</a></h3>\n<p><code>dictIsIn ('dict_name', child_id, ancestor_id)</code></p>\n<ul>\n<li>\u5bf9\u4e8e'dict_name'\u5206\u5c42\u5b57\u5178\uff0c\u67e5\u627e'child_id'\u952e\u662f\u5426\u4f4d\u4e8e'ancestor_id'\u5185\uff08\u6216\u5339\u914d'ancestor_id'\uff09\u3002\u8fd4\u56deUInt8\u3002</li>\n</ul>\n<h3 id=\"dictgethierarchy\">dictGetHierarchy<a class=\"headerlink\" href=\"#dictgethierarchy\" title=\"Permanent link\">&para;</a></h3>\n<p><code>dictGetHierarchy('dict_name', id)</code></p>\n<ul>\n<li>\u5bf9\u4e8e'dict_name'\u5206\u5c42\u5b57\u5178\uff0c\u8fd4\u56de\u4ece'id'\u5f00\u59cb\u5e76\u6cbf\u7236\u5143\u7d20\u94fe\u7ee7\u7eed\u7684\u5b57\u5178\u952e\u6570\u7ec4\u3002\u8fd4\u56deArray\uff08UInt64\uff09</li>\n</ul>\n<h3 id=\"dicthas\">dictHas<a class=\"headerlink\" href=\"#dicthas\" title=\"Permanent link\">&para;</a></h3>\n<p><code>dictHas('dict_name', id)</code></p>\n<ul>\n<li>\u68c0\u67e5\u5b57\u5178\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7684<code>id</code>\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de0;\u5982\u679c\u5b58\u5728\uff0c\u5219\u8fd4\u56de1\u3002</li>\n</ul>\n<p><a name=\"../../../functions/ym_dict_functions/\"></a><a name=\"functions/ym_dict_functions/\"></a><a name=\"ym_dict_functions/\"></a><a name=\"../../../../../query_language/functions/ym_dict_functions/\"></a><a name=\"../../../../query_language/functions/ym_dict_functions/\"></a><a name=\"../../../query_language/functions/ym_dict_functions/\"></a><a name=\"../../../../../functions/ym_dict_functions/\"></a><a name=\"../../functions/ym_dict_functions/\"></a><a name=\"query_language/functions/ym_dict_functions/\"></a><a name=\"../functions/ym_dict_functions/\"></a><a name=\"../../query_language/functions/ym_dict_functions/\"></a><a name=\"../query_language/functions/ym_dict_functions/\"></a><a name=\"../../../../../../functions/ym_dict_functions/\"></a><a name=\"../../../../functions/ym_dict_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-yandex-metrica-dictionaries\">Functions for working with Yandex.Metrica dictionaries<a class=\"headerlink\" href=\"#functions-for-working-with-yandex-metrica-dictionaries\" title=\"Permanent link\">&para;</a></h2>\n<p>In order for the functions below to work, the server config must specify the paths and addresses for getting all the Yandex.Metrica dictionaries. The dictionaries are loaded at the first call of any of these functions. If the reference lists can't be loaded, an exception is thrown.</p>\n<p>For information about creating reference lists, see the section \"Dictionaries\".</p>\n<h3 id=\"multiple-geobases\">Multiple geobases<a class=\"headerlink\" href=\"#multiple-geobases\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports working with multiple alternative geobases (regional hierarchies) simultaneously, in order to support various perspectives on which countries certain regions belong to.</p>\n<p>The 'clickhouse-server' config specifies the file with the regional hierarchy::<code>&lt;path_to_regions_hierarchy_file&gt;/opt/geo/regions_hierarchy.txt&lt;/path_to_regions_hierarchy_file&gt;</code></p>\n<p>Besides this file, it also searches for files nearby that have the _ symbol and any suffix appended to the name (before the file extension).<br />\nFor example, it will also find the file <code>/opt/geo/regions_hierarchy_ua.txt</code>, if present.</p>\n<p><code>ua</code> is called the dictionary key. For a dictionary without a suffix, the key is an empty string.</p>\n<p>All the dictionaries are re-loaded in runtime (once every certain number of seconds, as defined in the builtin_dictionaries_reload_interval config parameter, or once an hour by default). However, the list of available dictionaries is defined one time, when the server starts.</p>\n<p>All functions for working with regions have an optional argument at the end \u2013 the dictionary key. It is referred to as the geobase.<br />\nExample:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">regionToCountry(RegionID) \u2013 Uses the default dictionary: /opt/geo/regions_hierarchy.txt</span>\n<span class=\"err\">regionToCountry(RegionID, &#39;&#39;) \u2013 Uses the default dictionary: /opt/geo/regions_hierarchy.txt</span>\n<span class=\"err\">regionToCountry(RegionID, &#39;ua&#39;) \u2013 Uses the dictionary for the &#39;ua&#39; key: /opt/geo/regions_hierarchy_ua.txt</span>\n</code></pre></div>\n\n\n<h4 id=\"regiontocity-id-geobase\">regionToCity(id[, geobase])<a class=\"headerlink\" href=\"#regiontocity-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Accepts a UInt32 number \u2013 the region ID from the Yandex geobase. If this region is a city or part of a city, it returns the region ID for the appropriate city. Otherwise, returns 0.</p>\n<h4 id=\"regiontoarea-id-geobase\">regionToArea(id[, geobase])<a class=\"headerlink\" href=\"#regiontoarea-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Converts a region to an area (type 5 in the geobase). In every other way, this function is the same as 'regionToCity'.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">DISTINCT</span> <span class=\"n\">regionToName</span><span class=\"p\">(</span><span class=\"n\">regionToArea</span><span class=\"p\">(</span><span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"nb\">number</span><span class=\"p\">),</span> <span class=\"s1\">&#39;ua&#39;</span><span class=\"p\">))</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">15</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500regionToName(regionToArea(toUInt32(number), \\&#39;ua\\&#39;))\u2500\u2510</span>\n<span class=\"err\">\u2502                                                      \u2502</span>\n<span class=\"err\">\u2502 Moscow and Moscow region                             \u2502</span>\n<span class=\"err\">\u2502 St. Petersburg and Leningrad region                  \u2502</span>\n<span class=\"err\">\u2502 Belgorod region                                      \u2502</span>\n<span class=\"err\">\u2502 Ivanovsk region                                      \u2502</span>\n<span class=\"err\">\u2502 Kaluga region                                        \u2502</span>\n<span class=\"err\">\u2502 Kostroma region                                      \u2502</span>\n<span class=\"err\">\u2502 Kursk region                                         \u2502</span>\n<span class=\"err\">\u2502 Lipetsk region                                       \u2502</span>\n<span class=\"err\">\u2502 Orlov region                                         \u2502</span>\n<span class=\"err\">\u2502 Ryazan region                                        \u2502</span>\n<span class=\"err\">\u2502 Smolensk region                                      \u2502</span>\n<span class=\"err\">\u2502 Tambov region                                        \u2502</span>\n<span class=\"err\">\u2502 Tver region                                          \u2502</span>\n<span class=\"err\">\u2502 Tula region                                          \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h4 id=\"regiontodistrict-id-geobase\">regionToDistrict(id[, geobase])<a class=\"headerlink\" href=\"#regiontodistrict-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Converts a region to a federal district (typ");
            
            document.write("e 4 in the geobase). In every other way, this function is the same as 'regionToCity'.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">DISTINCT</span> <span class=\"n\">regionToName</span><span class=\"p\">(</span><span class=\"n\">regionToDistrict</span><span class=\"p\">(</span><span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"nb\">number</span><span class=\"p\">),</span> <span class=\"s1\">&#39;ua&#39;</span><span class=\"p\">))</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">15</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500regionToName(regionToDistrict(toUInt32(number), \\&#39;ua\\&#39;))\u2500\u2510</span>\n<span class=\"err\">\u2502                                                          \u2502</span>\n<span class=\"err\">\u2502 Central federal district                                 \u2502</span>\n<span class=\"err\">\u2502 Northwest federal district                               \u2502</span>\n<span class=\"err\">\u2502 South federal district                                   \u2502</span>\n<span class=\"err\">\u2502 North Caucases federal district                          \u2502</span>\n<span class=\"err\">\u2502 Privolga federal district                                \u2502</span>\n<span class=\"err\">\u2502 Ural federal district                                    \u2502</span>\n<span class=\"err\">\u2502 Siberian federal district                                \u2502</span>\n<span class=\"err\">\u2502 Far East federal district                                \u2502</span>\n<span class=\"err\">\u2502 Scotland                                                 \u2502</span>\n<span class=\"err\">\u2502 Faroe Islands                                            \u2502</span>\n<span class=\"err\">\u2502 Flemish region                                           \u2502</span>\n<span class=\"err\">\u2502 Brussels capital region                                  \u2502</span>\n<span class=\"err\">\u2502 Wallonia                                                 \u2502</span>\n<span class=\"err\">\u2502 Federation of Bosnia and Herzegovina                     \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h4 id=\"regiontocountry-id-geobase\">regionToCountry(id[, geobase])<a class=\"headerlink\" href=\"#regiontocountry-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Converts a region to a country. In every other way, this function is the same as 'regionToCity'.<br />\nExample: <code>regionToCountry(toUInt32(213)) = 225</code> converts Moscow (213) to Russia (225).</p>\n<h4 id=\"regiontocontinent-id-geobase\">regionToContinent(id[, geobase])<a class=\"headerlink\" href=\"#regiontocontinent-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Converts a region to a continent. In every other way, this function is the same as 'regionToCity'.<br />\nExample: <code>regionToContinent(toUInt32(213)) = 10001</code> converts Moscow (213) to Eurasia (10001).</p>\n<h4 id=\"regiontopopulation-id-geobase\">regionToPopulation(id[, geobase])<a class=\"headerlink\" href=\"#regiontopopulation-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Gets the population for a region.<br />\nThe population can be recorded in files with the geobase. See the section \"External dictionaries\".<br />\nIf the population is not recorded for the region, it returns 0.<br />\nIn the Yandex geobase, the population might be recorded for child regions, but not for parent regions.</p>\n<h4 id=\"regionin-lhs-rhs-geobase\">regionIn(lhs, rhs[, geobase])<a class=\"headerlink\" href=\"#regionin-lhs-rhs-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Checks whether a 'lhs' region belongs to a 'rhs' region. Returns a UInt8 number equal to 1 if it belongs, or 0 if it doesn't belong.<br />\nThe relationship is reflexive \u2013 any region also belongs to itself.</p>\n<h4 id=\"regionhierarchy-id-geobase\">regionHierarchy(id[, geobase])<a class=\"headerlink\" href=\"#regionhierarchy-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Accepts a UInt32 number \u2013 the region ID from the Yandex geobase. Returns an array of region IDs consisting of the passed region and all parents along the chain.<br />\nExample: <code>regionHierarchy(toUInt32(213)) = [213,1,3,225,10001,10000]</code>.</p>\n<h4 id=\"regiontoname-id-lang\">regionToName(id[, lang])<a class=\"headerlink\" href=\"#regiontoname-id-lang\" title=\"Permanent link\">&para;</a></h4>\n<p>Accepts a UInt32 number \u2013 the region ID from the Yandex geobase. A string with the name of the language can be passed as a second argument. Supported languages are: ru, en, ua, uk, by, kz, tr. If the second argument is omitted, the language 'ru' is used. If the language is not supported, an exception is thrown. Returns a string \u2013 the name of the region in the corresponding language. If the region with the specified ID doesn't exist, an empty string is returned.</p>\n<p><code>ua</code> and <code>uk</code> both mean Ukrainian.</p>\n<p><a name=\"../../../../../functions/in_functions/\"></a><a name=\"../../../../../../functions/in_functions/\"></a><a name=\"../../../../../query_language/functions/in_functions/\"></a><a name=\"../functions/in_functions/\"></a><a name=\"../../functions/in_functions/\"></a><a name=\"../../../../query_language/functions/in_functions/\"></a><a name=\"../../../query_language/functions/in_functions/\"></a><a name=\"../query_language/functions/in_functions/\"></a><a name=\"../../../functions/in_functions/\"></a><a name=\"../../query_language/functions/in_functions/\"></a><a name=\"query_language/functions/in_functions/\"></a><a name=\"../../../../functions/in_functions/\"></a><a name=\"functions/in_functions/\"></a><a name=\"in_functions/\"></a></p>\n<h2 id=\"inyun-suan-fu-xiang-guan-han-shu\">IN\u8fd0\u7b97\u7b26\u76f8\u5173\u51fd\u6570<a class=\"headerlink\" href=\"#inyun-suan-fu-xiang-guan-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"in-notin-globalin-globalnotin\">in, notIn, globalIn, globalNotIn<a class=\"headerlink\" href=\"#in-notin-globalin-globalnotin\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8bf7\u53c2\u9605<a href=\"#select-in-operators\">IN \u8fd0\u7b97\u7b26</a>\u90e8\u5206\u3002</p>\n<h3 id=\"tuple-x-y-operator-x-y\">tuple(x, y, ...), operator (x, y, ...)<a class=\"headerlink\" href=\"#tuple-x-y-operator-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>\u51fd\u6570\u7528\u4e8e\u5bf9\u591a\u4e2a\u5217\u8fdb\u884c\u5206\u7ec4\u3002<br />\n\u5bf9\u4e8e\u5177\u6709\u7c7b\u578bT1\uff0cT2\uff0c...\u7684\u5217\uff0c\u5b83\u8fd4\u56de\u5305\u542b\u8fd9\u4e9b\u5217\u7684\u5143\u7ec4\uff08T1\uff0cT2\uff0c...\uff09\u3002 \u6267\u884c\u8be5\u51fd\u6570\u6ca1\u6709\u4efb\u4f55\u6210\u672c\u3002<br />\n\u5143\u7ec4\u901a\u5e38\u7528\u4f5cIN\u8fd0\u7b97\u7b26\u7684\u4e2d\u95f4\u53c2\u6570\u503c\uff0c\u6216\u7528\u4e8e\u521b\u5efalambda\u51fd\u6570\u7684\u5f62\u53c2\u5217\u8868\u3002 \u5143\u7ec4\u4e0d\u80fd\u5199\u5165\u8868\u3002</p>\n<h3 id=\"tupleelement-tuple-n-operator-x-n\">tupleElement(tuple, n), operator x.N<a class=\"headerlink\" href=\"#tupleelement-tuple-n-operator-x-n\" title=\"Permanent link\">&para;</a></h3>\n<p>\u51fd\u6570\u7528\u4e8e\u4ece\u5143\u7ec4\u4e2d\u83b7\u53d6\u5217\u3002<br />\n'N'\u662f\u5217\u7d22\u5f15\uff0c\u4ece1\u5f00\u59cb\u3002N\u5fc5\u987b\u662f\u5e38\u91cf\u6b63\u6574\u6570\u5e38\u6570\uff0c\u5e76\u4e14\u4e0d\u5927\u4e8e\u5143\u7ec4\u7684\u5927\u5c0f\u3002<br />\n\u6267\u884c\u8be5\u51fd\u6570\u6ca1\u6709\u4efb\u4f55\u6210\u672c\u3002</p>\n<p><a name=\"../../../../../../functions/array_join/\"></a><a name=\"array_join/\"></a><a name=\"../../../../functions/array_join/\"></a><a name=\"../../../../../functions/array_join/\"></a><a name=\"query_language/functions/array_join/\"></a><a name=\"../../functions/array_join/\"></a><a name=\"../query_language/functions/array_join/\"></a><a name=\"../functions/array_join/\"></a><a name=\"../../../functions/array_join/\"></a><a name=\"../../../../../query_language/functions/array_join/\"></a><a name=\"../../../query_language/functions/array_join/\"></a><a name=\"functions/array_join/\"></a><a name=\"../../query_language/functions/array_join/\"></a><a name=\"../../../../query_language/functions/array_join/\"></a></p>\n<h2 id=\"functions_arrayjoin\">arrayJoin\u51fd\u6570<a class=\"headerlink\" href=\"#functions_arrayjoin\" title=\"Permanent link\">&para;</a></h2>\n<p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u51fd\u6570\u3002</p>\n<p>\u666e\u901a\u51fd\u6570\u4e0d\u4f1a\u66f4\u6539\u7ed3\u679c\u96c6\u7684\u884c\u6570\uff0c\u800c\u53ea\u662f\u8ba1\u7b97\u6bcf\u884c\u4e2d\u7684\u503c\uff08map\uff09\u3002<br />\n\u805a\u5408\u51fd\u6570\u5c06\u591a\u884c\u538b\u7f29\u5230\u4e00\u884c\u4e2d\uff08fold\u6216reduce\uff09\u3002<br />\n'arrayJoin'\u51fd\u6570\u83b7\u53d6\u6bcf\u4e00\u884c\u5e76\u5c06\u4ed6\u4eec\u5c55\u5f00\u5230\u591a\u884c\uff08unfold\uff09\u3002</p>\n<p>\u6b64\u51fd\u6570\u5c06\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u5c06\u8be5\u884c\u5728\u7ed3\u679c\u96c6\u4e2d\u590d\u5236\u6570\u7ec4\u5143\u7d20\u4e2a\u6570\u3002<br />\n\u9664\u4e86\u5e94\u7528\u6b64\u51fd\u6570\u7684\u5217\u4e2d\u7684\u503c\u4e4b\u5916\uff0c\u7b80\u5355\u5730\u590d\u5236\u5217\u4e2d\u7684\u6240\u6709\u503c;\u5b83\u88ab\u66ff\u6362\u4e3a\u76f8\u5e94\u7684\u6570\u7ec4\u503c\u3002</p>\n<p>\u67e5\u8be2\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a<code>arrayJoin</code>\u51fd\u6570\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8f6c\u6362\u88ab\u6267\u884c\u591a\u6b21\u3002</p>\n<p>\u8bf7\u6ce8\u610fSELECT\u67e5\u8be2\u4e2d\u7684ARRAY JOIN\u8bed\u6cd5\uff0c\u5b83\u63d0\u4f9b\u4e86\u66f4\u5e7f\u6cdb\u7684\u53ef\u80fd\u6027\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayJoin</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">src</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dst</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"n\">src</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500dst\u2500\u252c\u2500\\&#39;Hello\\&#39;\u2500\u252c\u2500src\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502   1 \u2502 Hello     \u2502 [1,2,3] \u2502</span>\n<span class=\"err\">\u2502   2 \u2502 Hello     \u2502 [1,2,3] \u2502</span>\n<span class=\"err\">\u2502   3 \u2502 Hello     \u2502 [1,2,3] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"geo/\"></a><a name=\"../../../query_language/functions/geo/\"></a><a name=\"../../../functions/geo/\"></a><a name=\"../../../../../../functions/geo/\"></a><a name=\"../../../../functions/geo/\"></a><a name=\"../../functions/geo/\"></a><a name=\"../../../../../query_language/functions/geo/\"></a><a name=\"query_language/functions/geo/\"></a><a name=\"../../../../query_language/functions/geo/\"></a><a name=\"functions/geo/\"></a><a name=\"../../query_language/functions/geo/\"></a><a name=\"../../../../../functions/geo/\"></a><a name=\"../functions/geo/\"></a><a name=\"../query_language/functions/geo/\"></a></p>\n<h2 id=\"geohan-shu\">GEO\u51fd\u6570<a class=\"headerlink\" href=\"#geohan-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"greatcircledistance\">greatCircleDistance<a class=\"headerlink\" href=\"#greatcircledistance\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528<a href=\"https://en.wikipedia.org/wiki/Great-circle_distance\" rel=\"external nofollow noreferrer\">great-circle distance\u516c\u5f0f</a>\u8ba1\u7b97\u5730\u7403\u8868\u9762\u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">greatCircleDistance</span><span class=\"p\">(</span><span class=\"n\">lon1Deg</span><span class=\"p\">,</span> <span class=\"n\">lat1Deg</span><span class=\"p\">,</span> <span class=\"n\">lon2Deg</span><span class=\"p\">,</span> <span class=\"n\">lat2Deg</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>\u8f93\u5165\u53c2\u6570</strong></p>\n<ul>\n<li><code>lon1Deg</code> \u2014 \u7b2c\u4e00\u4e2a\u70b9\u7684\u7ecf\u5ea6\uff0c\u5355\u4f4d\uff1a\u5ea6\uff0c\u8303\u56f4\uff1a <code>[-180\u00b0, 180\u00b0]</code>\u3002</li>\n<li><code>lat1Deg</code> \u2014 \u7b2c\u4e00\u4e2a\u70b9\u7684\u7eac\u5ea6\uff0c\u5355\u4f4d\uff1a\u5ea6\uff0c\u8303\u56f4\uff1a <code>[-90\u00b0, 90\u00b0]</code>\u3002</li>\n<li><code>lon2Deg</code> \u2014 \u7b2c");
            
            document.write("\u4e8c\u4e2a\u70b9\u7684\u7ecf\u5ea6\uff0c\u5355\u4f4d\uff1a\u5ea6\uff0c\u8303\u56f4\uff1a <code>[-180\u00b0, 180\u00b0]</code>\u3002</li>\n<li><code>lat2Deg</code> \u2014 \u7b2c\u4e8c\u4e2a\u70b9\u7684\u7eac\u5ea6\uff0c\u5355\u4f4d\uff1a\u5ea6\uff0c\u8303\u56f4\uff1a <code>[-90\u00b0, 90\u00b0]</code>\u3002</li>\n</ul>\n<p>\u6b63\u503c\u5bf9\u5e94\u5317\u7eac\u548c\u4e1c\u7ecf\uff0c\u8d1f\u503c\u5bf9\u5e94\u5357\u7eac\u548c\u897f\u7ecf\u3002</p>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>\u5730\u7403\u8868\u9762\u7684\u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u4ee5\u7c73\u4e3a\u5355\u4f4d\u3002</p>\n<p>\u5f53\u8f93\u5165\u53c2\u6570\u503c\u8d85\u51fa\u89c4\u5b9a\u7684\u8303\u56f4\u65f6\u5c06\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">greatCircleDistance</span><span class=\"p\">(</span><span class=\"mi\">55</span><span class=\"p\">.</span><span class=\"mi\">755831</span><span class=\"p\">,</span> <span class=\"mi\">37</span><span class=\"p\">.</span><span class=\"mi\">617673</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">55</span><span class=\"p\">.</span><span class=\"mi\">755831</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">37</span><span class=\"p\">.</span><span class=\"mi\">617673</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500greatCircleDistance(55.755831, 37.617673, -55.755831, -37.617673)\u2500\u2510\n\u2502                                                14132374.194975413 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"pointinellipses\">pointInEllipses<a class=\"headerlink\" href=\"#pointinellipses\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u6307\u5b9a\u7684\u70b9\u662f\u5426\u81f3\u5c11\u5305\u542b\u5728\u6307\u5b9a\u7684\u4e00\u4e2a\u692d\u5706\u4e2d\u3002<br />\n\u4e0b\u8ff0\u4e2d\u7684\u5750\u6807\u662f\u51e0\u4f55\u56fe\u5f62\u5728\u7b1b\u5361\u5c14\u5750\u6807\u7cfb\u4e2d\u7684\u4f4d\u7f6e\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">pointInEllipses</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">x\u2080</span><span class=\"p\">,</span> <span class=\"n\">y\u2080</span><span class=\"p\">,</span> <span class=\"n\">a\u2080</span><span class=\"p\">,</span> <span class=\"n\">b\u2080</span><span class=\"p\">,...,</span><span class=\"n\">x\u2099</span><span class=\"p\">,</span> <span class=\"n\">y\u2099</span><span class=\"p\">,</span> <span class=\"n\">a\u2099</span><span class=\"p\">,</span> <span class=\"n\">b\u2099</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>\u8f93\u5165\u53c2\u6570</strong></p>\n<ul>\n<li><code>x, y</code> \u2014 \u5e73\u9762\u4e0a\u67d0\u4e2a\u70b9\u7684\u5750\u6807\u3002</li>\n<li><code>x\u1d62, y\u1d62</code> \u2014 \u7b2ci\u4e2a\u692d\u5706\u7684\u4e2d\u5fc3\u5750\u6807\u3002</li>\n<li><code>a\u1d62, b\u1d62</code> \u2014 \u4ee5x, y\u5750\u6807\u4e3a\u5355\u4f4d\u7684\u7b2ci\u4e2a\u692d\u5706\u7684\u8f74\u3002</li>\n</ul>\n<p>\u8f93\u5165\u53c2\u6570\u7684\u4e2a\u6570\u5fc5\u987b\u662f<code>2+4\u22c5n</code>\uff0c\u5176\u4e2d<code>n</code>\u662f\u692d\u5706\u7684\u6570\u91cf\u3002</p>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>\u5982\u679c\u8be5\u70b9\u81f3\u5c11\u5305\u542b\u5728\u4e00\u4e2a\u692d\u5706\u4e2d\uff0c\u5219\u8fd4\u56de<code>1</code>\uff1b\u5426\u5219\uff0c\u5219\u8fd4\u56de<code>0</code>\u3002</p>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">pointInEllipses</span><span class=\"p\">(</span><span class=\"mi\">55</span><span class=\"p\">.</span><span class=\"mi\">755831</span><span class=\"p\">,</span> <span class=\"mi\">37</span><span class=\"p\">.</span><span class=\"mi\">617673</span><span class=\"p\">,</span> <span class=\"mi\">55</span><span class=\"p\">.</span><span class=\"mi\">755831</span><span class=\"p\">,</span> <span class=\"mi\">37</span><span class=\"p\">.</span><span class=\"mi\">617673</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500pointInEllipses(55.755831, 37.617673, 55.755831, 37.617673, 1., 2.)\u2500\u2510\n\u2502                                                                   1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"pointinpolygon\">pointInPolygon<a class=\"headerlink\" href=\"#pointinpolygon\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u6307\u5b9a\u7684\u70b9\u662f\u5426\u5305\u542b\u5728\u6307\u5b9a\u7684\u591a\u8fb9\u5f62\u4e2d\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">pointInPolygon</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">),</span> <span class=\"p\">[(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"k\">c</span><span class=\"p\">,</span> <span class=\"n\">d</span><span class=\"p\">)</span> <span class=\"p\">...],</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p><strong>\u8f93\u5165\u53c2\u6570</strong></p>\n<ul>\n<li><code>(x, y)</code> \u2014 \u5e73\u9762\u4e0a\u67d0\u4e2a\u70b9\u7684\u5750\u6807\u3002<a href=\"#../../data_types/tuple/\">Tuple</a>\u7c7b\u578b\uff0c\u5305\u542b\u5750\u6807\u7684\u4e24\u4e2a\u6570\u5b57\u3002</li>\n<li><code>[(a, b), (c, d) ...]</code> \u2014 \u591a\u8fb9\u5f62\u7684\u9876\u70b9\u3002<a href=\"#../../data_types/array/\">Array</a>\u7c7b\u578b\u3002\u6bcf\u4e2a\u9876\u70b9\u7531\u4e00\u5bf9\u5750\u6807<code>(a, b)</code>\u8868\u793a\u3002\u9876\u70b9\u53ef\u4ee5\u6309\u987a\u65f6\u9488\u6216\u9006\u65f6\u9488\u6307\u5b9a\u3002\u9876\u70b9\u7684\u4e2a\u6570\u5e94\u8be5\u5927\u4e8e\u7b49\u4e8e3\u3002\u540c\u65f6\u53ea\u80fd\u662f\u5e38\u91cf\u7684\u3002</li>\n<li>\u8be5\u51fd\u6570\u8fd8\u652f\u6301\u9542\u7a7a\u7684\u591a\u8fb9\u5f62\uff08\u5207\u9664\u90e8\u5206\uff09\u3002\u5982\u679c\u9700\u8981\uff0c\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u7684\u5176\u4ed6\u53c2\u6570\u5b9a\u4e49\u9700\u8981\u5207\u9664\u90e8\u5206\u7684\u591a\u8fb9\u5f62\u3002(The function does not support non-simply-connected polygons.)</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>\u5982\u679c\u5750\u6807\u70b9\u5b58\u5728\u5728\u591a\u8fb9\u5f62\u8303\u56f4\u5185\uff0c\u5219\u8fd4\u56de<code>1</code>\u3002\u5426\u5219\u8fd4\u56de<code>0</code>\u3002<br />\n\u5982\u679c\u5750\u6807\u4f4d\u4e8e\u591a\u8fb9\u5f62\u7684\u8fb9\u754c\u4e0a\uff0c\u5219\u8be5\u51fd\u6570\u53ef\u80fd\u8fd4\u56de<code>1</code>\uff0c\u6216\u53ef\u80fd\u8fd4\u56de<code>0</code>\u3002</p>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">pointInPolygon</span><span class=\"p\">((</span><span class=\"mi\">3</span><span class=\"p\">.,</span> <span class=\"mi\">3</span><span class=\"p\">.),</span> <span class=\"p\">[(</span><span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502   1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"geohashencode\">geohashEncode<a class=\"headerlink\" href=\"#geohashencode\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u7ecf\u5ea6\u548c\u7eac\u5ea6\u7f16\u7801\u4e3ageohash-string\uff0c\u8bf7\u53c2\u9605\uff08<a href=\"http://geohash.org/,https://en.wikipedia.org/wiki/Geohash\">http://geohash.org/,https://en.wikipedia.org/wiki/Geohash</a>\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">geohashEncode</span><span class=\"p\">(</span><span class=\"n\">longitude</span><span class=\"p\">,</span> <span class=\"n\">latitude</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"k\">precision</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p><strong>\u8f93\u5165\u503c</strong></p>\n<ul>\n<li>longitude - \u8981\u7f16\u7801\u7684\u5750\u6807\u7684\u7ecf\u5ea6\u90e8\u5206\u3002\u5176\u503c\u5e94\u5728<code>[-180\u00b0\uff0c180\u00b0]</code>\u8303\u56f4\u5185</li>\n<li>latitude - \u8981\u7f16\u7801\u7684\u5750\u6807\u7684\u7eac\u5ea6\u90e8\u5206\u3002\u5176\u503c\u5e94\u5728<code>[-90\u00b0\uff0c90\u00b0]</code>\u8303\u56f4\u5185</li>\n<li>precision - \u53ef\u9009\uff0c\u751f\u6210\u7684geohash-string\u7684\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a<code>12</code>\u3002\u53d6\u503c\u8303\u56f4\u4e3a<code>[1,12]</code>\u3002\u4efb\u4f55\u5c0f\u4e8e<code>1</code>\u6216\u5927\u4e8e<code>12</code>\u7684\u503c\u90fd\u4f1a\u9ed8\u8ba4\u8f6c\u6362\u4e3a<code>12</code>\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u5750\u6807\u7f16\u7801\u7684\u5b57\u7b26\u4e32\uff08\u4f7f\u7528base32\u7f16\u7801\u7684\u4fee\u6539\u7248\u672c\uff09\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">geohashEncode</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">.</span><span class=\"mi\">60302734375</span><span class=\"p\">,</span> <span class=\"mi\">42</span><span class=\"p\">.</span><span class=\"mi\">593994140625</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ezs42d000000 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"geohashdecode\">geohashDecode<a class=\"headerlink\" href=\"#geohashdecode\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u4efb\u4f55geohash\u7f16\u7801\u7684\u5b57\u7b26\u4e32\u89e3\u7801\u4e3a\u7ecf\u5ea6\u548c\u7eac\u5ea6\u3002</p>\n<p><strong>\u8f93\u5165\u503c</strong></p>\n<ul>\n<li>encoded string - geohash\u7f16\u7801\u7684\u5b57\u7b26\u4e32\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>(longitude, latitude) - \u7ecf\u5ea6\u548c\u7eac\u5ea6\u7684<code>Float64</code>\u503c\u76842\u5143\u7ec4\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">geohashDecode</span><span class=\"p\">(</span><span class=\"s1\">&#39;ezs42&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 (-5.60302734375,42.60498046875) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"geotoh3\">geoToH3<a class=\"headerlink\" href=\"#geotoh3\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u6307\u5b9a\u7684\u5206\u8fa8\u7387\u7684<a href=\"https://uber.github.io/h3/#/documentation/overview/introduction\" rel=\"external nofollow noreferrer\">H3</a>\u7d22\u5f15<code>(lon, lat)</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">geoToH3</span><span class=\"p\">(</span><span class=\"n\">lon</span><span class=\"p\">,</span> <span class=\"n\">lat</span><span class=\"p\">,</span> <span class=\"n\">resolution</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>\u8f93\u5165\u503c</strong></p>\n<ul>\n<li><code>lon</code> \u2014 \u7ecf\u5ea6\u3002 <a href=\"#../../data_types/float/\">Float64</a>\u7c7b\u578b\u3002</li>\n<li><code>lat</code> \u2014 \u7eac\u5ea6\u3002 <a href=\"#../../data_types/float/\">Float64</a>\u7c7b\u578b\u3002</li>\n<li><code>resolution</code> \u2014 \u7d22\u5f15\u7684\u5206\u8fa8\u7387\u3002 \u53d6\u503c\u8303\u56f4\u4e3a: <code>[0, 15]</code>\u3002 <a href=\"#../../data_types/int_uint/\">UInt8</a>\u7c7b\u578b\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>H3\u4e2d\u516d\u8fb9\u5f62\u7684\u7d22\u5f15\u503c\u3002</li>\n<li>\u53d1\u751f\u5f02\u5e38\u65f6\u8fd4\u56de0\u3002</li>\n</ul>\n<p><a href=\"#../../data_types/int_uint/\">UInt64</a>\u7c7b\u578b\u3002</p>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">geoToH3</span><span class=\"p\">(</span><span class=\"mi\">37</span><span class=\"p\">.</span><span class=\"mi\">79506683</span><span class=\"p\">,</span> <span class=\"mi\">55</span><span class=\"p\">.</span><span class=\"mi\">71290588</span><span class=\"p\">,</span> <span class=\"mi\">15</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">h3Index</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500h3Index\u2500\u2510\n\u2502 644325524701193974 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"geohashesinbox\">geohashesInBox<a class=\"headerlink\" href=\"#geohashesinbox\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u5728\u6307\u5b9a\u7cbe\u5ea6\u4e0b\u8ba1\u7b97\u6700\u5c0f\u5305\u542b\u6307\u5b9a\u7684\u7ecf\u7eac\u8303\u56f4\u7684\u6700\u5c0f\u56fe\u5f62\u7684geohash\u6570\u7ec4\u3002</p>\n<p><strong>\u8f93\u5165\u503c</strong></p>\n<ul>\n<li>longitude_min - \u6700\u5c0f\u7ecf\u5ea6\u3002\u5176\u503c\u5e94\u5728<code>[-180\u00b0\uff0c180\u00b0]</code>\u8303\u56f4\u5185</li>\n<li>latitude_min - \u6700\u5c0f\u7eac\u5ea6\u3002\u5176\u503c\u5e94\u5728<code>[-90\u00b0\uff0c90\u00b0]</code>\u8303\u56f4\u5185</li>\n<li>longitude_max - \u6700\u5927\u7ecf\u5ea6\u3002\u5176\u503c\u5e94\u5728<code>[-180\u00b0\uff0c180\u00b0]</code>\u8303\u56f4\u5185</li>\n<li>latitude_max - \u6700\u5927\u7eac\u5ea6\u3002\u5176\u503c\u5e94\u5728<code>[-90\u00b0\uff0c90\u00b0]</code>\u8303\u56f4\u5185</li>\n<li>precision - geohash\u7684\u7cbe\u5ea6\u3002\u5176\u503c\u5e94\u5728<code>[1, 12]</");
            
            document.write("code>\u5185\u7684<code>UInt8</code>\u7c7b\u578b\u7684\u6570\u5b57</li>\n</ul>\n<p>\u8bf7\u6ce8\u610f\uff0c\u4e0a\u8ff0\u6240\u6709\u7684\u5750\u6807\u53c2\u6570\u5fc5\u987b\u540c\u4e3a<code>Float32</code>\u6216<code>Float64</code>\u4e2d\u7684\u4e00\u79cd\u7c7b\u578b\u3002</p>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u5305\u542b\u6307\u5b9a\u8303\u56f4\u5185\u7684\u6307\u5b9a\u7cbe\u5ea6\u7684geohash\u5b57\u7b26\u4e32\u6570\u7ec4\u3002\u6ce8\u610f\uff0c\u60a8\u4e0d\u5e94\u8be5\u4f9d\u8d56\u8fd4\u56de\u6570\u7ec4\u4e2dgeohash\u7684\u987a\u5e8f\u3002</li>\n<li>[] - \u5f53\u4f20\u5165\u7684\u6700\u5c0f\u7ecf\u7eac\u5ea6\u5927\u4e8e\u6700\u5927\u7ecf\u7eac\u5ea6\u65f6\u5c06\u8fd4\u56de\u4e00\u4e2a\u7a7a\u6570\u7ec4\u3002</li>\n</ul>\n<p>\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u751f\u6210\u7684\u6570\u7ec4\u957f\u5ea6\u8d85\u8fc710000\u65f6\uff0c\u5219\u51fd\u6570\u5c06\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">geohashesInBox</span><span class=\"p\">(</span><span class=\"mi\">24</span><span class=\"p\">.</span><span class=\"mi\">48</span><span class=\"p\">,</span> <span class=\"mi\">40</span><span class=\"p\">.</span><span class=\"mi\">56</span><span class=\"p\">,</span> <span class=\"mi\">24</span><span class=\"p\">.</span><span class=\"mi\">785</span><span class=\"p\">,</span> <span class=\"mi\">40</span><span class=\"p\">.</span><span class=\"mi\">81</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">thasos</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500thasos\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;sx1q&#39;,&#39;sx1r&#39;,&#39;sx32&#39;,&#39;sx1w&#39;,&#39;sx1x&#39;,&#39;sx38&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../../query_language/functions/functions_for_nulls/\"></a><a name=\"../query_language/functions/functions_for_nulls/\"></a><a name=\"../../functions/functions_for_nulls/\"></a><a name=\"../../../../../../functions/functions_for_nulls/\"></a><a name=\"../../../../functions/functions_for_nulls/\"></a><a name=\"../../query_language/functions/functions_for_nulls/\"></a><a name=\"../../../../../functions/functions_for_nulls/\"></a><a name=\"functions_for_nulls/\"></a><a name=\"../functions/functions_for_nulls/\"></a><a name=\"../../../functions/functions_for_nulls/\"></a><a name=\"../../../../../query_language/functions/functions_for_nulls/\"></a><a name=\"functions/functions_for_nulls/\"></a><a name=\"../../../query_language/functions/functions_for_nulls/\"></a><a name=\"query_language/functions/functions_for_nulls/\"></a></p>\n<h2 id=\"nullablechu-li-han-shu\">Nullable\u5904\u7406\u51fd\u6570<a class=\"headerlink\" href=\"#nullablechu-li-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"isnull\">isNull<a class=\"headerlink\" href=\"#isnull\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u53c2\u6570\u662f\u5426\u4e3a<a href=\"#null\">NULL</a>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">isNull(x)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>x</code> \u2014 \u4e00\u4e2a\u975e\u590d\u5408\u6570\u636e\u7c7b\u578b\u7684\u503c\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li><code>1</code> \u5982\u679c<code>x</code>\u4e3a<code>NULL</code>\u3002</li>\n<li><code>0</code> \u5982\u679c<code>x</code>\u4e0d\u4e3a<code>NULL</code>\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<p>\u5b58\u5728\u4ee5\u4e0b\u5185\u5bb9\u7684\u8868</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    3 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5bf9\u5176\u8fdb\u884c\u67e5\u8be2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">x</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"k\">WHERE</span> <span class=\"k\">isNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">x</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">isNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">010</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<h3 id=\"isnotnull\">isNotNull<a class=\"headerlink\" href=\"#isnotnull\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u53c2\u6570\u662f\u5426\u4e0d\u4e3a <a href=\"#null\">NULL</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">isNotNull(x)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>x</code> \u2014 \u4e00\u4e2a\u975e\u590d\u5408\u6570\u636e\u7c7b\u578b\u7684\u503c\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li><code>0</code> \u5982\u679c<code>x</code>\u4e3a<code>NULL</code>\u3002</li>\n<li><code>1</code> \u5982\u679c<code>x</code>\u4e0d\u4e3a<code>NULL</code>\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<p>\u5b58\u5728\u4ee5\u4e0b\u5185\u5bb9\u7684\u8868</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    3 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5bf9\u5176\u8fdb\u884c\u67e5\u8be2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">x</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"k\">WHERE</span> <span class=\"n\">isNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">x</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">isNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">010</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<h3 id=\"coalesce\">coalesce<a class=\"headerlink\" href=\"#coalesce\" title=\"Permanent link\">&para;</a></h3>\n<p>\u68c0\u67e5\u4ece\u5de6\u5230\u53f3\u662f\u5426\u4f20\u9012\u4e86\u201cNULL\u201d\u53c2\u6570\u5e76\u8fd4\u56de\u7b2c\u4e00\u4e2a\u975e<code>'NULL</code>\u53c2\u6570\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">coalesce(x,...)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li>\u4efb\u4f55\u6570\u91cf\u7684\u975e\u590d\u5408\u7c7b\u578b\u7684\u53c2\u6570\u3002\u6240\u6709\u53c2\u6570\u5fc5\u987b\u4e0e\u6570\u636e\u7c7b\u578b\u517c\u5bb9\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u7b2c\u4e00\u4e2a\u975e'NULL`\u53c2\u6570\u3002</li>\n<li><code>NULL</code>\uff0c\u5982\u679c\u6240\u6709\u53c2\u6570\u90fd\u662f'NULL`\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<p>\u8003\u8651\u53ef\u4ee5\u6307\u5b9a\u591a\u79cd\u8054\u7cfb\u5ba2\u6237\u7684\u65b9\u5f0f\u7684\u8054\u7cfb\u4eba\u5217\u8868\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u252c\u2500mail\u2500\u252c\u2500phone\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500icq\u2500\u2510</span>\n<span class=\"err\">\u2502 client 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502 123-45-67 \u2502  123 \u2502</span>\n<span class=\"err\">\u2502 client 2 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502 \u1d3a\u1d41\u1d38\u1d38      \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><code>mail</code>\u548c<code>phone</code>\u5b57\u6bb5\u662fString\u7c7b\u578b\uff0c\u4f46<code>icq</code>\u5b57\u6bb5\u662f<code>UInt32</code>\uff0c\u6240\u4ee5\u5b83\u9700\u8981\u8f6c\u6362\u4e3a<code>String</code>\u3002</p>\n<p>\u4ece\u8054\u7cfb\u4eba\u5217\u8868\u4e2d\u83b7\u53d6\u5ba2\u6237\u7684\u7b2c\u4e00\u4e2a\u53ef\u7528\u8054\u7cfb\u65b9\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">coalesce</span><span class=\"p\">(</span><span class=\"n\">mail</span><span class=\"p\">,</span> <span class=\"n\">phone</span><span class=\"p\">,</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">icq</span><span class=\"p\">,</span><span class=\"s1\">&#39;Nullable(String)&#39;</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"n\">aBook</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">coalesce</span><span class=\"p\">(</span><span class=\"n\">mail</span><span class=\"p\">,</span> <span class=\"n\">phone</span><span class=\"p\">,</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">icq</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Nullable(String)&#39;</span><span class=\"p\">))</span>\n<span class=\"k\">FROM</span> <span class=\"n\">aBook</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">name</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u252c\u2500</span><span class=\"n\">coalesce</span><span class=\"p\">(</span><span class=\"n\">mail</span><span class=\"p\">,</span> <span class=\"n\">phone</span><span class=\"p\">,</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">icq</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Nullable(String)&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">client</span> <span class=\"mi\">1</span> <span class=\"err\">\u2502</span> <span class=\"mi\">123</span><span class=\"o\">-</span><span class=\"mi\">45</span><span class=\"o\">-</span><span class=\"mi\">67</span>                                            <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">client</span> <span class=\"mi\">2</span> <span class=\"err\">\u2502</span> <span class=\"err\">\u1d3a\u1d41\u1d38\u1d38</span>                                                 <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">2</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">006</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<h3 id=\"ifnull\">ifNull<a class=\"headerlink\" href=\"#ifnull\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u201cNULL\u201d\uff0c\u5219\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u503c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">ifNull(x,alt)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>x</code> \u2014 \u8981\u68c0\u67e5\u201cNULL\u201d\u7684\u503c\u3002</li>\n<li><code>alt</code> \u2014 \u5982\u679c<code>x</code>\u4e3a'NULL`\uff0c\u51fd\u6570\u8fd4\u56de\u7684\u503c\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>The value <code>x</code>, if <code>x</code> is not <code>NULL</code>.</li>\n<li>The value <code>alt</code>, if <code>x</code> is <code>NULL</code>.</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\"");
            
            document.write(">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">a</span>                <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">b</span>                 <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"nullif\">nullIf<a class=\"headerlink\" href=\"#nullif\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u53c2\u6570\u76f8\u7b49\uff0c\u5219\u8fd4\u56de<code>NULL</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">nullIf(x, y)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<p><code>x</code>, <code>y</code> \u2014 \u7528\u4e8e\u6bd4\u8f83\u7684\u503c\u3002 \u5b83\u4eec\u5fc5\u987b\u662f\u7c7b\u578b\u517c\u5bb9\u7684\uff0c\u5426\u5219\u5c06\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u5982\u679c\u53c2\u6570\u76f8\u7b49\uff0c\u5219\u4e3a<code>NULL</code>\u3002</li>\n<li>\u5982\u679c\u53c2\u6570\u4e0d\u76f8\u7b49\uff0c\u5219\u4e3a<code>x</code>\u503c\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">nullIf</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"k\">nullIf</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>         <span class=\"err\">\u1d3a\u1d41\u1d38\u1d38</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">nullIf</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"k\">nullIf</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>            <span class=\"mi\">1</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"assumenotnull\">assumeNotNull<a class=\"headerlink\" href=\"#assumenotnull\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06<a href=\"#../../data_types/nullable/\">Nullable</a>\u7c7b\u578b\u7684\u503c\u8f6c\u6362\u4e3a\u975e<code>Nullable</code>\u7c7b\u578b\u7684\u503c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">assumeNotNull(x)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570\uff1a</strong></p>\n<ul>\n<li><code>x</code> \u2014 \u539f\u59cb\u503c\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u5982\u679c<code>x</code>\u4e0d\u4e3a<code>NULL</code>\uff0c\u8fd4\u56de\u975e<code>Nullable</code>\u7c7b\u578b\u7684\u539f\u59cb\u503c\u3002</li>\n<li>\u5982\u679c<code>x</code>\u4e3a<code>NULL</code>\uff0c\u8fd4\u56de\u5bf9\u5e94\u975e<code>Nullable</code>\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<p>\u5b58\u5728\u5982\u4e0b<code>t_null</code>\u8868\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_null</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"k\">statement</span><span class=\"err\">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">default</span><span class=\"p\">.</span><span class=\"n\">t_null</span> <span class=\"p\">(</span> <span class=\"n\">x</span> <span class=\"nb\">Int8</span><span class=\"p\">,</span>  <span class=\"n\">y</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"nb\">Int8</span><span class=\"p\">))</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510</span>\n<span class=\"err\">\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502</span>\n<span class=\"err\">\u2502 2 \u2502    3 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u5c06\u5217<code>y</code>\u4f5c\u4e3a<code>assumeNotNull</code>\u51fd\u6570\u7684\u53c2\u6570\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>                <span class=\"mi\">0</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span>                <span class=\"mi\">3</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"nb\">Int8</span>                         <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"nb\">Int8</span>                         <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"tonullable\">toNullable<a class=\"headerlink\" href=\"#tonullable\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u53c2\u6570\u7684\u7c7b\u578b\u8f6c\u6362\u4e3a<code>Nullable</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">toNullable(x)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570\uff1a</strong></p>\n<ul>\n<li><code>x</code> \u2014 \u4efb\u4f55\u975e\u590d\u5408\u7c7b\u578b\u7684\u503c\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u8f93\u5165\u7684\u503c\uff0c\u4f46\u5176\u7c7b\u578b\u4e3a<code>Nullable</code>\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">UInt8</span>          <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">toNullable</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">))</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">toNullable</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">)</span>            <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../../query_language/functions/machine_learning_functions/\"></a><a name=\"../../functions/machine_learning_functions/\"></a><a name=\"../../../../functions/machine_learning_functions/\"></a><a name=\"functions/machine_learning_functions/\"></a><a name=\"machine_learning_functions/\"></a><a name=\"query_language/functions/machine_learning_functions/\"></a><a name=\"../../../query_language/functions/machine_learning_functions/\"></a><a name=\"../../../functions/machine_learning_functions/\"></a><a name=\"../../../../../../functions/machine_learning_functions/\"></a><a name=\"../query_language/functions/machine_learning_functions/\"></a><a name=\"../../../../query_language/functions/machine_learning_functions/\"></a><a name=\"../../../../../functions/machine_learning_functions/\"></a><a name=\"../functions/machine_learning_functions/\"></a><a name=\"../../query_language/functions/machine_learning_functions/\"></a></p>\n<h2 id=\"ji-qi-xue-xi-han-shu\">\u673a\u5668\u5b66\u4e60\u51fd\u6570<a class=\"headerlink\" href=\"#ji-qi-xue-xi-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"machine_learning_methods-evalmlmethod\">evalMLMethod (prediction)<a class=\"headerlink\" href=\"#machine_learning_methods-evalmlmethod\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u62df\u5408\u56de\u5f52\u6a21\u578b\u7684\u9884\u6d4b\u8bf7\u4f7f\u7528<code>evalMLMethod</code>\u51fd\u6570\u3002 \u8bf7\u53c2\u9605<code>linearRegression</code>\u4e2d\u7684\u94fe\u63a5\u3002</p>\n<h3 id=\"stochastic-linear-regression\">Stochastic Linear Regression<a class=\"headerlink\" href=\"#stochastic-linear-regression\" title=\"Permanent link\">&para;</a></h3>\n<p><code>stochasticLinearRegression</code>\u805a\u5408\u51fd\u6570\u4f7f\u7528\u7ebf\u6027\u6a21\u578b\u548cMSE\u635f\u5931\u51fd\u6570\u5b9e\u73b0\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u6cd5\u3002 \u4f7f\u7528<code>evalMLMethod</code>\u6765\u9884\u6d4b\u65b0\u6570\u636e\u3002<br />\n\u8bf7\u53c2\u9605\u793a\u4f8b\u548c\u6ce8\u91ca<a href=\"#agg_functions-stochasticlinearregression\">\u6b64\u5904</a>\u3002</p>\n<h3 id=\"stochastic-logistic-regression\">Stochastic Logistic Regression<a class=\"headerlink\" href=\"#stochastic-logistic-regression\" title=\"Permanent link\">&para;</a></h3>\n<p><code>stochasticLogisticRegression</code>\u805a\u5408\u51fd\u6570\u5b9e\u73b0\u4e86\u4e8c\u5143\u5206\u7c7b\u95ee\u9898\u7684\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u6cd5\u3002 \u4f7f\u7528<code>evalMLMethod</code>\u6765\u9884\u6d4b\u65b0\u6570\u636e\u3002<br />\n\u8bf7\u53c2\u9605\u793a\u4f8b\u548c\u6ce8\u91ca<a href=\"#agg_functions-stochasticlogisticregression\">\u6b64\u5904</a>\u3002<br />\n<a name=\"other_functions/\"></a><a name=\"query_language/functions/other_functions/\"></a><a name=\"../../../../functions/other_functions/\"></a><a name=\"../../query_language/functions/other_functions/\"></a><a name=\"../../../../../query_language/functions/other_functions/\"></a><a name=\"../../../functions/other_functions/\"></a><a name=\"../query_language/functions/other_functions/\"></a><a name=\"../../../../query_language/functions/other_functions/\"></a><a name=\"../../functions/other_functions/\"></a><a name=\"../../../../../../functions/other_functions/\"></a><a name=\"../functions/other_functions/\"></a><a name=\"../../../../../functions/other_functions/\"></a><a name=\"functions/other_functions/\"></a");
            
            document.write("><a name=\"../../../query_language/functions/other_functions/\"></a></p>\n<h2 id=\"qi-ta-han-shu\">\u5176\u4ed6\u51fd\u6570<a class=\"headerlink\" href=\"#qi-ta-han-shu\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"hostname\">hostName()<a class=\"headerlink\" href=\"#hostname\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d\u5305\u542b\u6267\u884c\u6b64\u51fd\u6570\u7684\u4e3b\u673a\u7684\u540d\u79f0\u3002 \u5bf9\u4e8e\u5206\u5e03\u5f0f\u5904\u7406\uff0c\u5982\u679c\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u6b64\u51fd\u6570\uff0c\u5219\u5c06\u8fd4\u56de\u8fdc\u7a0b\u670d\u52a1\u5668\u4e3b\u673a\u7684\u540d\u79f0\u3002</p>\n<h3 id=\"basename\">basename<a class=\"headerlink\" href=\"#basename\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u6700\u540e\u4e00\u4e2a\u659c\u6760\u6216\u53cd\u659c\u6760\u540e\u7684\u5b57\u7b26\u4e32\u6587\u672c\u3002 \u6b64\u51fd\u6570\u901a\u5e38\u7528\u4e8e\u4ece\u8def\u5f84\u4e2d\u63d0\u53d6\u6587\u4ef6\u540d\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">basename( expr )</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570</strong></p>\n<ul>\n<li><code>expr</code> \u2014 \u4efb\u4f55\u4e00\u4e2a\u8fd4\u56de<a href=\"#../../data_types/string/\">String</a>\u7ed3\u679c\u7684\u8868\u8fbe\u5f0f\u3002<a href=\"#../../data_types/string/\">String</a></li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<p>\u4e00\u4e2aString\u7c7b\u578b\u7684\u503c\uff0c\u5176\u5305\u542b\uff1a</p>\n<ul>\n<li>\n<p>\u5728\u6700\u540e\u4e00\u4e2a\u659c\u6760\u6216\u53cd\u659c\u6760\u540e\u7684\u5b57\u7b26\u4e32\u6587\u672c\u5185\u5bb9\u3002</p>\n<p>\u5982\u679c\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u4ee5\u659c\u6746\u6216\u53cd\u659c\u6746\u7ed3\u5c3e\uff0c\u4f8b\u5982\uff1a<code>/</code>\u6216<code>c:\\</code>\uff0c\u51fd\u6570\u5c06\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u3002</p>\n</li>\n<li>\n<p>\u5982\u679c\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u4e2d\u4e0d\u5305\u542b\u659c\u6746\u6216\u53cd\u659c\u6760\uff0c\u51fd\u6570\u8fd4\u56de\u8f93\u5165\u5b57\u7b26\u4e32\u672c\u8eab\u3002</p>\n</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"s1\">&#39;some/long/path/to/file&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">basename</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500a\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500basename(&#39;some\\\\long\\\\path\\\\to\\\\file&#39;)\u2500\u2510\n\u2502 some\\long\\path\\to\\file \u2502 file                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"s1\">&#39;some\\\\long\\\\path\\\\to\\\\file&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">basename</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500a\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500basename(&#39;some\\\\long\\\\path\\\\to\\\\file&#39;)\u2500\u2510\n\u2502 some\\long\\path\\to\\file \u2502 file                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"s1\">&#39;some-file-name&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">basename</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500a\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500basename(&#39;some-file-name&#39;)\u2500\u2510\n\u2502 some-file-name \u2502 some-file-name             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"visiblewidth-x\">visibleWidth(x)<a class=\"headerlink\" href=\"#visiblewidth-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee5\u6587\u672c\u683c\u5f0f\uff08\u4ee5\u5236\u8868\u7b26\u5206\u9694\uff09\u5411\u63a7\u5236\u53f0\u8f93\u51fa\u503c\u65f6\uff0c\u8ba1\u7b97\u8fd1\u4f3c\u5bbd\u5ea6\u3002<br />\n\u7cfb\u7edf\u4f7f\u7528\u6b64\u51fd\u6570\u5b9e\u73b0Pretty\u683c\u5f0f\u3002<br />\nCalculates the approximate width when outputting values to the console in text format (tab-separated).<br />\nThis function is used by the system for implementing Pretty formats.</p>\n<p><code>NULL</code> is represented as a string corresponding to <code>NULL</code> in <code>Pretty</code> formats.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">visibleWidth</span><span class=\"p\">(</span><span class=\"k\">NULL</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">visibleWidth</span><span class=\"p\">(</span><span class=\"k\">NULL</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>                  <span class=\"mi\">4</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"totypename-x\">toTypeName(x)<a class=\"headerlink\" href=\"#totypename-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u5305\u542b\u53c2\u6570\u7684\u7c7b\u578b\u540d\u79f0\u7684\u5b57\u7b26\u4e32\u3002</p>\n<p>\u5982\u679c\u5c06<code>NULL</code>\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\uff0c\u90a3\u4e48\u5b83\u8fd4\u56de<code>Nullable\uff08Nothing\uff09</code>\u7c7b\u578b\uff0c\u5b83\u5bf9\u5e94\u4e8eClickHouse\u4e2d\u7684\u5185\u90e8<code>NULL</code>\u3002</p>\n<h3 id=\"function-blocksize\">blockSize()<a class=\"headerlink\" href=\"#function-blocksize\" title=\"Permanent link\">&para;</a></h3>\n<p>\u83b7\u53d6Block\u7684\u5927\u5c0f\u3002<br />\n\u5728ClickHouse\u4e2d\uff0c\u67e5\u8be2\u59cb\u7ec8\u5de5\u4f5c\u5728Block\uff08\u5305\u542b\u5217\u7684\u90e8\u5206\u7684\u96c6\u5408\uff09\u4e0a\u3002\u6b64\u51fd\u6570\u5141\u8bb8\u60a8\u83b7\u53d6\u8c03\u7528\u5176\u7684\u5757\u7684\u5927\u5c0f\u3002</p>\n<h3 id=\"materialize-x\">materialize(x)<a class=\"headerlink\" href=\"#materialize-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c06\u4e00\u4e2a\u5e38\u91cf\u5217\u53d8\u4e3a\u4e00\u4e2a\u975e\u5e38\u91cf\u5217\u3002<br />\n\u5728ClickHouse\u4e2d\uff0c\u975e\u5e38\u91cf\u5217\u548c\u5e38\u91cf\u5217\u5728\u5185\u5b58\u4e2d\u7684\u8868\u793a\u65b9\u5f0f\u4e0d\u540c\u3002\u5c3d\u7ba1\u51fd\u6570\u5bf9\u4e8e\u5e38\u91cf\u5217\u548c\u975e\u5e38\u91cf\u603b\u662f\u8fd4\u56de\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u4f46\u5b83\u4eec\u7684\u5de5\u4f5c\u65b9\u5f0f\u53ef\u80fd\u5b8c\u5168\u4e0d\u540c\uff08\u6267\u884c\u4e0d\u540c\u7684\u4ee3\u7801\uff09\u3002\u6b64\u51fd\u6570\u7528\u4e8e\u8c03\u8bd5\u8fd9\u79cd\u884c\u4e3a\u3002</p>\n<h3 id=\"ignore\">ignore(...)<a class=\"headerlink\" href=\"#ignore\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\uff0c\u5305\u62ec<code>NULL</code>\u3002\u59cb\u7ec8\u8fd4\u56de0\u3002<br />\n\u4f46\u662f\uff0c\u51fd\u6570\u7684\u53c2\u6570\u603b\u662f\u88ab\u8ba1\u7b97\u7684\u3002\u8be5\u51fd\u6570\u53ef\u4ee5\u7528\u4e8e\u57fa\u51c6\u6d4b\u8bd5\u3002</p>\n<h3 id=\"sleep-seconds\">sleep(seconds)<a class=\"headerlink\" href=\"#sleep-seconds\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u6bcf\u4e2aBlock\u4e0a\u4f11\u7720'seconds'\u79d2\u3002\u53ef\u4ee5\u662f\u6574\u6570\u6216\u6d6e\u70b9\u6570\u3002</p>\n<h3 id=\"sleepeachrow-seconds\">sleepEachRow(seconds)<a class=\"headerlink\" href=\"#sleepeachrow-seconds\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u6bcf\u884c\u4e0a\u4f11\u7720'seconds'\u79d2\u3002\u53ef\u4ee5\u662f\u6574\u6570\u6216\u6d6e\u70b9\u6570\u3002</p>\n<h3 id=\"currentdatabase\">currentDatabase()<a class=\"headerlink\" href=\"#currentdatabase\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u5f53\u524d\u6570\u636e\u5e93\u7684\u540d\u79f0\u3002<br />\n\u5f53\u60a8\u9700\u8981\u5728CREATE TABLE\u4e2d\u7684\u8868\u5f15\u64ce\u53c2\u6570\u4e2d\u6307\u5b9a\u6570\u636e\u5e93\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u51fd\u6570\u3002</p>\n<h3 id=\"isfinite-x\">isFinite(x)<a class=\"headerlink\" href=\"#isfinite-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7Float32\u6216Float64\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u662finfinite\u4e14\u4e0d\u662fNaN\uff0c\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"isinfinite-x\">isInfinite(x)<a class=\"headerlink\" href=\"#isinfinite-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7Float32\u6216Float64\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5982\u679c\u53c2\u6570\u662finfinite\uff0c\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002\u6ce8\u610fNaN\u8fd4\u56de0\u3002</p>\n<h3 id=\"isnan-x\">isNaN(x)<a class=\"headerlink\" href=\"#isnan-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7Float32\u6216Float64\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5982\u679c\u53c2\u6570\u662fNan\uff0c\u5219\u8fd4\u56de1\uff0c\u5426\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"hascolumnintable-hostname-username-password-database-table-column\">hasColumnInTable(['hostname'[, 'username'[, 'password']],] 'database', 'table', 'column')<a class=\"headerlink\" href=\"#hascolumnintable-hostname-username-password-database-table-column\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts constant strings: database name, table name, and column name. Returns a UInt8 constant expression equal to 1 if there is a column, otherwise 0. If the hostname parameter is set, the test will run on a remote server.<br />\nThe function throws an exception if the table does not exist.<br />\nFor elements in a nested data structure, the function checks for the existence of a column. For the nested data structure itself, the function returns 0.</p>\n<h3 id=\"function-bar\">bar<a class=\"headerlink\" href=\"#function-bar\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528unicode\u6784\u5efa\u56fe\u8868\u3002</p>\n<p><code>bar(x, min, max, width)</code> \u5f53<code>x = max</code>\u65f6\uff0c \u7ed8\u5236\u4e00\u4e2a\u5bbd\u5ea6\u4e0e<code>(x - min)</code>\u6210\u6b63\u6bd4\u4e14\u7b49\u4e8e<code>width</code>\u7684\u5b57\u7b26\u5e26\u3002</p>\n<p>\u53c2\u6570:</p>\n<ul>\n<li><code>x</code> \u2014 \u8981\u663e\u793a\u7684\u5c3a\u5bf8\u3002</li>\n<li><code>min, max</code> \u2014 \u6574\u6570\u5e38\u91cf\uff0c\u8be5\u503c\u5fc5\u987b\u662f<code>Int64</code>\u3002</li>\n<li><code>width</code> \u2014 \u5e38\u91cf\uff0c\u53ef\u4ee5\u662f\u6b63\u6574\u6570\u6216\u5c0f\u6570\u3002</li>\n</ul>\n<p>\u5b57\u7b26\u5e26\u7684\u7ed8\u5236\u7cbe\u5ea6\u662f\u7b26\u53f7\u7684\u516b\u5206\u4e4b\u4e00\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">toHour</span><span class=\"p\">(</span><span class=\"n\">EventTime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">h</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span><span class=\"p\">,</span>\n    <span class=\"n\">bar</span><span class=\"p\">(</span><span class=\"k\">c</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">600000</span><span class=\"p\">,</span> <span class=\"mi\">20</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">bar</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">h</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">h</span> <span class=\"k\">ASC</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500\u2500h\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u252c\u2500bar\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502  0 \u2502 292907 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258b         \u2502</span>\n<span class=\"err\">\u2502  1 \u2502 180563 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588             \u2502</span>\n<span class=\"err\">\u2502  2 \u2502 114861 \u2502 \u2588\u2588\u2588\u258b               \u2502</span>\n<span class=\"err\">\u2502  3 \u2502  85069 \u2502 \u2588\u2588\u258b                \u2502</span>\n<span class=\"err\">\u2502  4 \u2502  68543 \u2502 \u2588\u2588\u258e                \u2502</span>\n<span class=\"err\">\u2502  5 \u2502  78116 \u2502 \u2588\u2588\u258c                \u2502</span>\n<span class=\"err\">\u2502  6 \u2502 113474 \u2502 \u2588\u2588\u2588\u258b               \u2502</span>\n<span class=\"err\">\u2502  7 \u2502 170678 \u2502 \u2588\u2588\u2588\u2588\u2588\u258b             \u2502</span>\n<span class=\"err\">\u2502  8 \u2502 278380 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e         \u2502</span>\n<span class=\"err\">\u2502  9 \u2502 391053 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588      \u2502</span>\n<span class=\"err\">\u2502 10 \u2502 457681 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e   \u2502</span>\n<span class=\"err\">\u2502 11 \u2502 493667 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d  \u2502</span>\n<span class=\"err\">\u2502 12 \u2502 509641 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a  \u2502</span>\n<span class=\"err\">\u2502 13 \u2502 522947 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d \u2502</span>\n<span class=\"err\">\u2502 14 \u2502 539954 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a \u2502</span>\n<span class=\"err\">\u2502 15 \u2502 528460 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258c \u2502</span>\n<span class=\"err\">\u2502 16 \u2502 539201 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a \u2502</span>\n<span class=\"err\">\u2502 17 \u2502 523539 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d \u2502</span>\n<span class=\"err\">\u2502 18 \u2502 506467 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a  \u2502</span>\n<span class=\"err\">\u2502 19 \u2502 520915 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e \u2502</span>\n<span class=\"err\">\u2502 20 \u2502 521665 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d \u2502</span>\n<span class=\"err\">\u2502 21 \u2502 542078 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 \u2502</span>\n<span class=\"err\">\u2502 22 \u2502 493642 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d  \u2502</span>\n<span class=\"err\">\u2502 23 \u2502 400397 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e     \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"transform\">transform<a class=\"headerlink\" href=\"#transform\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6839\u636e\u5b9a\u4e49\uff0c\u5c06\u67d0\u4e9b\u5143\u7d20\u8f6c\u6362\u4e3a\u5176\u4ed6\u5143\u7d20\u3002<br />\n\u6b64\u51fd\u6570\u6709\u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\uff1a</p>\n<ol>\n<li><code>transform(x, array_from, array_to, default)</code></li>\n</ol>\n<p><code>x</code> \u2013 \u8981\u8f6c\u6362\u7684\u503c\u3002</p>\n<p><code>array_from</code> \u2013 \u7528\u4e8e\u8f6c\u6362\u7684\u5e38\u91cf\u6570\u7ec4\u3002</p>\n<p><code>array_to</code> \u2013 \u5c06\u2018from\u2019\u4e2d\u7684\u503c\u8f6c\u6362\u4e3a\u7684\u5e38\u91cf\u6570\u7ec4\u3002</p>\n<p><code>default</code> \u2013 \u5982\u679c\u2018x\u2019\u4e0d\u7b49\u4e8e\u2018from\u2019\u4e2d\u7684\u4efb\u4f55\u503c\uff0c\u5219\u9ed8\u8ba4\u8f6c\u6362\u7684\u503c\u3002</p>\n<p><code>array_from</code> \u548c <code>array_to</code> \u2013 \u62e5\u6709\u76f8\u540c\u5927\u5c0f\u7684\u6570\u7ec4\u3002</p>\n<p>\u7c7b\u578b\u7ea6\u675f:</p>\n<p><code>transform(T, Array(T), Array(U), U) -&gt; U</code");
            
            document.write("></p>\n<p><code>T</code>\u548c<code>U</code>\u53ef\u4ee5\u662fString\uff0cDate\uff0cDateTime\u6216\u4efb\u610f\u6570\u503c\u7c7b\u578b\u7684\u3002<br />\n\u5bf9\u4e8e\u76f8\u540c\u7684\u5b57\u6bcd\uff08T\u6216U\uff09\uff0c\u5982\u679c\u6570\u503c\u7c7b\u578b\uff0c\u90a3\u4e48\u5b83\u4eec\u4e0d\u53ef\u4e0d\u5b8c\u5168\u5339\u914d\u7684\uff0c\u53ea\u9700\u8981\u5177\u5907\u5171\u540c\u7684\u7c7b\u578b\u5373\u53ef\u3002<br />\n\u4f8b\u5982\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662fInt64\u7c7b\u578b\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662fArray(UInt16)\u7c7b\u578b\u3002</p>\n<p>\u5982\u679c'x'\u503c\u7b49\u4e8e'array_from'\u6570\u7ec4\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\uff0c\u5b83\u5c06\u4ece'array_to'\u6570\u7ec4\u8fd4\u56de\u4e00\u4e2a\u5bf9\u5e94\u7684\u5143\u7d20\uff08\u4e0b\u6807\u76f8\u540c\uff09\u3002\u5426\u5219\uff0c\u5b83\u8fd4\u56de'default'\u3002\u5982\u679c'array_from'\u5339\u914d\u5230\u4e86\u591a\u4e2a\u5143\u7d20\uff0c\u5219\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5143\u7d20\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">transform</span><span class=\"p\">(</span><span class=\"n\">SearchEngineID</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s1\">&#39;Yandex&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Google&#39;</span><span class=\"p\">],</span> <span class=\"s1\">&#39;Other&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">title</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">SearchEngineID</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">title</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500title\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510</span>\n<span class=\"err\">\u2502 Yandex    \u2502 498635 \u2502</span>\n<span class=\"err\">\u2502 Google    \u2502 229872 \u2502</span>\n<span class=\"err\">\u2502 Other     \u2502 104472 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<ol start=\"2\">\n<li><code>transform(x, array_from, array_to)</code></li>\n</ol>\n<p>\u4e0e\u7b2c\u4e00\u79cd\u4e0d\u540c\u5728\u4e8e\u7701\u7565\u4e86'default'\u53c2\u6570\u3002<br />\n\u5982\u679c'x'\u503c\u7b49\u4e8e'array_from'\u6570\u7ec4\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\uff0c\u5b83\u5c06\u4ece'array_to'\u6570\u7ec4\u8fd4\u56de\u76f8\u5e94\u7684\u5143\u7d20\uff08\u4e0b\u6807\u76f8\u540c\uff09\u3002 \u5426\u5219\uff0c\u5b83\u8fd4\u56de'x'\u3002</p>\n<p>\u7c7b\u578b\u7ea6\u675f:</p>\n<p><code>transform(T, Array(T), Array(T)) -&gt; T</code></p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">transform</span><span class=\"p\">(</span><span class=\"k\">domain</span><span class=\"p\">(</span><span class=\"n\">Referer</span><span class=\"p\">),</span> <span class=\"p\">[</span><span class=\"s1\">&#39;yandex.ru&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;google.ru&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;vk.com&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s1\">&#39;www.yandex&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;example.com&#39;</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">s</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">domain</span><span class=\"p\">(</span><span class=\"n\">Referer</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510</span>\n<span class=\"err\">\u2502                \u2502 2906259 \u2502</span>\n<span class=\"err\">\u2502 www.yandex     \u2502  867767 \u2502</span>\n<span class=\"err\">\u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588.ru     \u2502  313599 \u2502</span>\n<span class=\"err\">\u2502 mail.yandex.ru \u2502  107147 \u2502</span>\n<span class=\"err\">\u2502 \u2588\u2588\u2588\u2588\u2588\u2588.ru      \u2502  100355 \u2502</span>\n<span class=\"err\">\u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588.ru   \u2502   65040 \u2502</span>\n<span class=\"err\">\u2502 news.yandex.ru \u2502   64515 \u2502</span>\n<span class=\"err\">\u2502 \u2588\u2588\u2588\u2588\u2588\u2588.net     \u2502   59141 \u2502</span>\n<span class=\"err\">\u2502 example.com    \u2502   57316 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"formatreadablesize-x\">formatReadableSize(x)<a class=\"headerlink\" href=\"#formatreadablesize-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u5927\u5c0f\uff08\u5b57\u8282\u6570\uff09\u3002\u8fd4\u56de\u5e26\u6709\u540e\u7f00\uff08KiB, MiB\u7b49\uff09\u7684\u5b57\u7b26\u4e32\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">arrayJoin</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1024</span><span class=\"p\">,</span> <span class=\"mi\">1024</span><span class=\"o\">*</span><span class=\"mi\">1024</span><span class=\"p\">,</span> <span class=\"mi\">192851925</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">filesize_bytes</span><span class=\"p\">,</span>\n    <span class=\"n\">formatReadableSize</span><span class=\"p\">(</span><span class=\"n\">filesize_bytes</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">filesize</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500filesize_bytes\u2500\u252c\u2500filesize\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502              1 \u2502 1.00 B     \u2502</span>\n<span class=\"err\">\u2502           1024 \u2502 1.00 KiB   \u2502</span>\n<span class=\"err\">\u2502        1048576 \u2502 1.00 MiB   \u2502</span>\n<span class=\"err\">\u2502      192851925 \u2502 183.92 MiB \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"least-a-b\">least(a, b)<a class=\"headerlink\" href=\"#least-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dea\u548cb\u4e2d\u7684\u6700\u5c0f\u503c\u3002</p>\n<h3 id=\"greatest-a-b\">greatest(a, b)<a class=\"headerlink\" href=\"#greatest-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56dea\u548cb\u7684\u6700\u5927\u503c\u3002</p>\n<h3 id=\"uptime\">uptime()<a class=\"headerlink\" href=\"#uptime\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u7684\u79d2\u6570\u3002</p>\n<h3 id=\"version\">version()<a class=\"headerlink\" href=\"#version\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u8fd4\u56de\u670d\u52a1\u5668\u7684\u7248\u672c\u3002</p>\n<h3 id=\"timezone\">timezone()<a class=\"headerlink\" href=\"#timezone\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u670d\u52a1\u5668\u7684\u65f6\u533a\u3002</p>\n<h3 id=\"blocknumber\">blockNumber<a class=\"headerlink\" href=\"#blocknumber\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u884c\u6240\u5728\u7684Block\u7684\u5e8f\u5217\u53f7\u3002</p>\n<h3 id=\"function-rownumberinblock\">rowNumberInBlock<a class=\"headerlink\" href=\"#function-rownumberinblock\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u884c\u6240\u5728Block\u4e2d\u884c\u7684\u5e8f\u5217\u53f7\u3002 \u9488\u5bf9\u4e0d\u540c\u7684Block\u59cb\u7ec8\u91cd\u65b0\u8ba1\u7b97\u3002</p>\n<h3 id=\"rownumberinallblocks\">rowNumberInAllBlocks()<a class=\"headerlink\" href=\"#rownumberinallblocks\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u884c\u6240\u5728\u7ed3\u679c\u96c6\u4e2d\u7684\u5e8f\u5217\u53f7\u3002\u6b64\u51fd\u6570\u4ec5\u8003\u8651\u53d7\u5f71\u54cd\u7684Block\u3002</p>\n<h3 id=\"other_functions-runningdifference\">runningDifference(x)<a class=\"headerlink\" href=\"#other_functions-runningdifference\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8ba1\u7b97\u6570\u636e\u5757\u4e2d\u76f8\u90bb\u884c\u7684\u503c\u4e4b\u95f4\u7684\u5dee\u5f02\u3002<br />\n\u5bf9\u4e8e\u7b2c\u4e00\u884c\u8fd4\u56de0\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u540e\u7eed\u884c\u8fd4\u56de\u4e0e\u524d\u4e00\u884c\u7684\u5dee\u5f02\u3002</p>\n<p>\u51fd\u6570\u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\u53d7\u5f71\u54cd\u7684Block\u548cBlock\u4e2d\u7684\u6570\u636e\u987a\u5e8f\u3002<br />\n\u5982\u679c\u4f7f\u7528ORDER BY\u521b\u5efa\u5b50\u67e5\u8be2\u5e76\u4ece\u5b50\u67e5\u8be2\u5916\u90e8\u8c03\u7528\u8be5\u51fd\u6570\uff0c\u5219\u53ef\u4ee5\u83b7\u5f97\u9884\u671f\u7ed3\u679c\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">EventID</span><span class=\"p\">,</span>\n    <span class=\"n\">EventTime</span><span class=\"p\">,</span>\n    <span class=\"n\">runningDifference</span><span class=\"p\">(</span><span class=\"n\">EventTime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">delta</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">EventID</span><span class=\"p\">,</span>\n        <span class=\"n\">EventTime</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">events</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2016-11-24&#39;</span>\n    <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">EventTime</span> <span class=\"k\">ASC</span>\n    <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500EventID\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500EventTime\u2500\u252c\u2500delta\u2500\u2510</span>\n<span class=\"err\">\u2502    1106 \u2502 2016-11-24 00:00:04 \u2502     0 \u2502</span>\n<span class=\"err\">\u2502    1107 \u2502 2016-11-24 00:00:05 \u2502     1 \u2502</span>\n<span class=\"err\">\u2502    1108 \u2502 2016-11-24 00:00:05 \u2502     0 \u2502</span>\n<span class=\"err\">\u2502    1109 \u2502 2016-11-24 00:00:09 \u2502     4 \u2502</span>\n<span class=\"err\">\u2502    1110 \u2502 2016-11-24 00:00:10 \u2502     1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"runningdifferencestartingwithfirstvalue\">runningDifferenceStartingWithFirstValue<a class=\"headerlink\" href=\"#runningdifferencestartingwithfirstvalue\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0e<a href=\"#other_functions-runningdifference\">runningDifference</a>\u76f8\u540c\uff0c\u533a\u522b\u5728\u4e8e\u7b2c\u4e00\u884c\u8fd4\u56de\u7b2c\u4e00\u884c\u7684\u503c\uff0c\u540e\u7eed\u6bcf\u4e2a\u540e\u7eed\u884c\u8fd4\u56de\u4e0e\u4e0a\u4e00\u884c\u7684\u5dee\u503c\u3002</p>\n<h3 id=\"macnumtostring-num\">MACNumToString(num)<a class=\"headerlink\" href=\"#macnumtostring-num\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u4e00\u4e2aUInt64\u7c7b\u578b\u7684\u6570\u5b57\u3002 \u5c06\u5176\u89e3\u91ca\u4e3abig endian\u7684MAC\u5730\u5740\u3002 \u8fd4\u56de\u5305\u542b\u76f8\u5e94MAC\u5730\u5740\u7684\u5b57\u7b26\u4e32\uff0c\u683c\u5f0f\u4e3aAA:BB:CC:DD:EE:FF\uff08\u4ee5\u5192\u53f7\u5206\u9694\u7684\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u7684\u6570\u5b57\uff09\u3002</p>\n<h3 id=\"macstringtonum-s\">MACStringToNum(s)<a class=\"headerlink\" href=\"#macstringtonum-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4e0eMACNumToString\u76f8\u53cd\u3002 \u5982\u679cMAC\u5730\u5740\u683c\u5f0f\u65e0\u6548\uff0c\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"macstringtooui-s\">MACStringToOUI(s)<a class=\"headerlink\" href=\"#macstringtooui-s\" title=\"Permanent link\">&para;</a></h3>\n<p>\u63a5\u53d7\u683c\u5f0f\u4e3aAA:BB:CC:DD:EE:FF\uff08\u5341\u516d\u8fdb\u5236\u5f62\u5f0f\u7684\u5192\u53f7\u5206\u9694\u6570\u5b57\uff09\u7684MAC\u5730\u5740\u3002 \u8fd4\u56de\u524d\u4e09\u4e2a\u516b\u4f4d\u5b57\u8282\u4f5c\u4e3aUInt64\u7f16\u53f7\u3002 \u5982\u679cMAC\u5730\u5740\u683c\u5f0f\u65e0\u6548\uff0c\u5219\u8fd4\u56de0\u3002</p>\n<h3 id=\"getsizeofenumtype\">getSizeOfEnumType<a class=\"headerlink\" href=\"#getsizeofenumtype\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de<a href=\"#../../data_types/enum/\">Enum</a>\u4e2d\u7684\u679a\u4e3e\u6570\u91cf\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">getSizeOfEnumType(value)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>value</code> \u2014 <code>Enum</code>\u7c7b\u578b\u7684\u503c\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li><code>Enum</code>\u7684\u679a\u4e3e\u6570\u91cf\u3002</li>\n<li>\u5982\u679c\u7c7b\u578b\u4e0d\u662f<code>Enum</code>\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">getSizeOfEnumType</span><span class=\"p\">(</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&");
            
            document.write("#39;b&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"p\">)</span> <span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">x</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"tocolumntypename\">toColumnTypeName<a class=\"headerlink\" href=\"#tocolumntypename\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u5728RAM\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u7684\u540d\u79f0\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">toColumnTypeName(value)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>value</code> \u2014 \u4efb\u4f55\u7c7b\u578b\u7684\u503c\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5176\u5185\u5bb9\u662f<code>value</code>\u5728RAM\u4e2d\u7684\u7c7b\u578b\u540d\u79f0\u3002</li>\n</ul>\n<p><strong><code>toTypeName ' \u4e0e ' toColumnTypeName</code>\u7684\u533a\u522b\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">select</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">DateTime</span><span class=\"p\">))</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DateTime&#39;</span><span class=\"p\">))</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DateTime&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">DateTime</span>                                            <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">008</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">select</span> <span class=\"n\">toColumnTypeName</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">DateTime</span><span class=\"p\">))</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">toColumnTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DateTime&#39;</span><span class=\"p\">))</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">toColumnTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DateTime&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">Const</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">)</span>                                             <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8be5\u793a\u4f8b\u663e\u793a<code>DateTime</code>\u6570\u636e\u7c7b\u578b\u4f5c\u4e3a<code>Const(UInt32)</code>\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u3002</p>\n<h3 id=\"dumpcolumnstructure\">dumpColumnStructure<a class=\"headerlink\" href=\"#dumpcolumnstructure\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8f93\u51fa\u5728RAM\u4e2d\u7684\u6570\u636e\u7ed3\u679c\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">dumpColumnStructure(value)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>value</code> \u2014 \u4efb\u4f55\u7c7b\u578b\u7684\u503c.</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5176\u5185\u5bb9\u662f<code>value</code>\u5728RAM\u4e2d\u7684\u6570\u636e\u7ed3\u6784\u7684\u8be6\u7ec6\u63cf\u8ff0\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">dumpColumnStructure</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DateTime&#39;</span><span class=\"p\">))</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">dumpColumnStructure</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DateTime&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span> <span class=\"n\">Const</span><span class=\"p\">(</span><span class=\"k\">size</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">UInt32</span><span class=\"p\">(</span><span class=\"k\">size</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">))</span>                  <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"defaultvalueofargumenttype\">defaultValueOfArgumentType<a class=\"headerlink\" href=\"#defaultvalueofargumenttype\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8f93\u51fa\u6570\u636e\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\u3002</p>\n<p>\u4e0d\u5305\u62ec\u7528\u6237\u8bbe\u7f6e\u7684\u81ea\u5b9a\u4e49\u5217\u7684\u9ed8\u8ba4\u503c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">defaultValueOfArgumentType(expression)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>expression</code> \u2014 \u4efb\u610f\u7c7b\u578b\u7684\u503c\u6216\u5bfc\u81f4\u4efb\u610f\u7c7b\u578b\u503c\u7684\u8868\u8fbe\u5f0f\u3002</li>\n</ul>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>\u6570\u503c\u7c7b\u578b\u8fd4\u56de<code>0</code>\u3002</li>\n<li>\u5b57\u7b26\u4e32\u7c7b\u578b\u8fd4\u56de\u7a7a\u7684\u5b57\u7b26\u4e32\u3002</li>\n<li><a href=\"#../../data_types/nullable/\">Nullable</a>\u7c7b\u578b\u8fd4\u56de<code>\u1d3a\u1d41\u1d38\u1d38</code>\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"mi\">1</span> <span class=\"k\">AS</span> <span class=\"nb\">Int8</span><span class=\"p\">)</span> <span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Int8&#39;</span><span class=\"p\">))</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Int8&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>                                           <span class=\"mi\">0</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n\n<span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"mi\">1</span> <span class=\"k\">AS</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"nb\">Int8</span><span class=\"p\">)</span> <span class=\"p\">)</span> <span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Nullable(Int8)&#39;</span><span class=\"p\">))</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Nullable(Int8)&#39;</span><span class=\"p\">))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>                                                  <span class=\"err\">\u1d3a\u1d41\u1d38\u1d38</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">002</span> <span class=\"n\">sec</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<h3 id=\"indexhint\">indexHint<a class=\"headerlink\" href=\"#indexhint\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8f93\u51fa\u7b26\u5408\u7d22\u5f15\u9009\u62e9\u8303\u56f4\u5185\u7684\u6240\u6709\u6570\u636e\uff0c\u540c\u65f6\u4e0d\u5b9e\u7528\u53c2\u6570\u4e2d\u7684\u8868\u8fbe\u5f0f\u8fdb\u884c\u8fc7\u6ee4\u3002</p>\n<p>\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u8868\u8fbe\u5f0f\u53c2\u6570\u5c06\u4e0d\u4f1a\u88ab\u8ba1\u7b97\uff0c\u4f46ClickHouse\u4f7f\u7528\u53c2\u6570\u4e2d\u7684\u8868\u8fbe\u5f0f\u8fdb\u884c\u7d22\u5f15\u8fc7\u6ee4\u3002</p>\n<p><strong>\u8fd4\u56de\u503c</strong></p>\n<ul>\n<li>1\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<p>\u8fd9\u662f\u4e00\u4e2a\u5305\u542b<a href=\"#../../getting_started/example_datasets/ontime/\">ontime</a>\u6d4b\u8bd5\u6570\u636e\u96c6\u7684\u6d4b\u8bd5\u8868\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"k\">count</span><span class=\"p\">()</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">4276457</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>\u8be5\u8868\u4f7f\u7528<code>(FlightDate, (Year, FlightDate))</code>\u4f5c\u4e3a\u7d22\u5f15\u3002</p>\n<p>\u5bf9\u8be5\u8868\u8fdb\u884c\u5982\u4e0b\u7684\u67e5\u8be2\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">ontime</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY<");
            
            document.write("/span> <span class=\"n\">k</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span> <span class=\"k\">ASC</span>\n\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"n\">k</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"k\">count</span><span class=\"p\">()</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">01</span><span class=\"o\">-</span><span class=\"mi\">01</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">13970</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">01</span><span class=\"o\">-</span><span class=\"mi\">02</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">15882</span> <span class=\"err\">\u2502</span>\n<span class=\"p\">........................</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">09</span><span class=\"o\">-</span><span class=\"mi\">28</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">16411</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">09</span><span class=\"o\">-</span><span class=\"mi\">29</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">16384</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">09</span><span class=\"o\">-</span><span class=\"mi\">30</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">12520</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">273</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">072</span> <span class=\"n\">sec</span><span class=\"p\">.</span> <span class=\"n\">Processed</span> <span class=\"mi\">4</span><span class=\"p\">.</span><span class=\"mi\">28</span> <span class=\"n\">million</span> <span class=\"k\">rows</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">.</span><span class=\"mi\">55</span> <span class=\"n\">MB</span> <span class=\"p\">(</span><span class=\"mi\">59</span><span class=\"p\">.</span><span class=\"mi\">00</span> <span class=\"n\">million</span> <span class=\"k\">rows</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">.,</span> <span class=\"mi\">118</span><span class=\"p\">.</span><span class=\"mi\">01</span> <span class=\"n\">MB</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">.)</span>\n</code></pre></div>\n\n\n<p>\u5728\u8fd9\u4e2a\u67e5\u8be2\u4e2d\uff0c\u7531\u4e8e\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\uff0c\u6240\u4ee5ClickHouse\u5c06\u5904\u7406\u6574\u4e2a\u8868\u7684\u6240\u6709\u6570\u636e(<code>Processed 4.28 million rows</code>)\u3002\u4f7f\u7528\u4e0b\u9762\u7684\u67e5\u8be2\u5c1d\u8bd5\u4f7f\u7528\u7d22\u5f15\u8fdb\u884c\u67e5\u8be2\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">ontime</span> <span class=\"k\">WHERE</span> <span class=\"n\">k</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2017-09-15&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">k</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2017-09-15&#39;</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span> <span class=\"k\">ASC</span>\n\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"n\">k</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"k\">count</span><span class=\"p\">()</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">09</span><span class=\"o\">-</span><span class=\"mi\">15</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">16428</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">1</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">014</span> <span class=\"n\">sec</span><span class=\"p\">.</span> <span class=\"n\">Processed</span> <span class=\"mi\">32</span><span class=\"p\">.</span><span class=\"mi\">74</span> <span class=\"n\">thousand</span> <span class=\"k\">rows</span><span class=\"p\">,</span> <span class=\"mi\">65</span><span class=\"p\">.</span><span class=\"mi\">49</span> <span class=\"n\">KB</span> <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">.</span><span class=\"mi\">31</span> <span class=\"n\">million</span> <span class=\"k\">rows</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">.,</span> <span class=\"mi\">4</span><span class=\"p\">.</span><span class=\"mi\">63</span> <span class=\"n\">MB</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">.)</span>\n</code></pre></div>\n\n\n<p>\u5728\u6700\u540e\u4e00\u884c\u7684\u663e\u793a\u4e2d\uff0c\u901a\u8fc7\u7d22\u5f15ClickHouse\u5904\u7406\u7684\u884c\u6570\u660e\u663e\u51cf\u5c11\uff08<code>Processed 32.74 thousand rows</code>\uff09\u3002</p>\n<p>\u73b0\u5728\u5c06\u8868\u8fbe\u5f0f<code>k = '2017-09-15'</code>\u4f20\u9012\u7ed9<code>indexHint</code>\u51fd\u6570\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:)</span> <span class=\"k\">SELECT</span> <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">ontime</span> <span class=\"k\">WHERE</span> <span class=\"n\">indexHint</span><span class=\"p\">(</span><span class=\"n\">k</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2017-09-15&#39;</span><span class=\"p\">)</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">indexHint</span><span class=\"p\">(</span><span class=\"n\">k</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2017-09-15&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span> <span class=\"k\">ASC</span>\n\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"n\">k</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"k\">count</span><span class=\"p\">()</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">09</span><span class=\"o\">-</span><span class=\"mi\">14</span> <span class=\"err\">\u2502</span>    <span class=\"mi\">7071</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">09</span><span class=\"o\">-</span><span class=\"mi\">15</span> <span class=\"err\">\u2502</span>   <span class=\"mi\">16428</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">09</span><span class=\"o\">-</span><span class=\"mi\">16</span> <span class=\"err\">\u2502</span>    <span class=\"mi\">1077</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">09</span><span class=\"o\">-</span><span class=\"mi\">30</span> <span class=\"err\">\u2502</span>    <span class=\"mi\">8167</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"mi\">4</span> <span class=\"k\">rows</span> <span class=\"k\">in</span> <span class=\"k\">set</span><span class=\"p\">.</span> <span class=\"n\">Elapsed</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">004</span> <span class=\"n\">sec</span><span class=\"p\">.</span> <span class=\"n\">Processed</span> <span class=\"mi\">32</span><span class=\"p\">.</span><span class=\"mi\">74</span> <span class=\"n\">thousand</span> <span class=\"k\">rows</span><span class=\"p\">,</span> <span class=\"mi\">65</span><span class=\"p\">.</span><span class=\"mi\">49</span> <span class=\"n\">KB</span> <span class=\"p\">(</span><span class=\"mi\">8</span><span class=\"p\">.</span><span class=\"mi\">97</span> <span class=\"n\">million</span> <span class=\"k\">rows</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">.,</span> <span class=\"mi\">17</span><span class=\"p\">.</span><span class=\"mi\">94</span> <span class=\"n\">MB</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">.)</span>\n</code></pre></div>\n\n\n<p>\u5bf9\u4e8e\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u6839\u636eClickHouse\u663e\u793aClickHouse\u4e0e\u4e0a\u4e00\u6b21\u76f8\u540c\u7684\u65b9\u5f0f\u5e94\u7528\u4e86\u7d22\u5f15\uff08<code>Processed 32.74 thousand rows</code>\uff09\u3002\u4f46\u662f\uff0c\u6700\u7ec8\u8fd4\u56de\u7684\u7ed3\u679c\u96c6\u4e2d\u5e76\u6ca1\u6709\u6839\u636e<code>k = '2017-09-15'</code>\u8868\u8fbe\u5f0f\u8fdb\u884c\u8fc7\u6ee4\u7ed3\u679c\u3002</p>\n<p>\u7531\u4e8eClickHouse\u4e2d\u4f7f\u7528\u7a00\u758f\u7d22\u5f15\uff0c\u56e0\u6b64\u5728\u8bfb\u53d6\u8303\u56f4\u65f6\uff08\u672c\u793a\u4f8b\u4e2d\u4e3a\u76f8\u90bb\u65e5\u671f\uff09\uff0c\u201c\u989d\u5916\u201d\u7684\u6570\u636e\u5c06\u5305\u542b\u5728\u7d22\u5f15\u7ed3\u679c\u4e2d\u3002\u4f7f\u7528<code>indexHint</code>\u51fd\u6570\u53ef\u4ee5\u67e5\u770b\u5230\u5b83\u4eec\u3002</p>\n<h3 id=\"replicate\">replicate<a class=\"headerlink\" href=\"#replicate\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u5355\u4e2a\u503c\u586b\u5145\u4e00\u4e2a\u6570\u7ec4\u3002</p>\n<p>\u7528\u4e8e<a href=\"#functions_arrayjoin\">arrayJoin</a>\u7684\u5185\u90e8\u5b9e\u73b0\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">replicate(x, arr)</span>\n</code></pre></div>\n\n\n<p><strong>\u53c2\u6570:</strong></p>\n<ul>\n<li><code>arr</code> \u2014 \u539f\u59cb\u6570\u7ec4\u3002 ClickHouse\u521b\u5efa\u4e00\u4e2a\u4e0e\u539f\u59cb\u6570\u636e\u957f\u5ea6\u76f8\u540c\u7684\u65b0\u6570\u7ec4");
            
            document.write("\uff0c\u5e76\u7528\u503c<code>x</code>\u586b\u5145\u5b83\u3002</li>\n<li><code>x</code> \u2014 \u751f\u6210\u7684\u6570\u7ec4\u5c06\u88ab\u586b\u5145\u7684\u503c\u3002</li>\n</ul>\n<p><strong>\u8f93\u51fa</strong></p>\n<ul>\n<li>\u4e00\u4e2a\u88ab<code>x</code>\u586b\u5145\u7684\u6570\u7ec4\u3002</li>\n</ul>\n<p><strong>\u793a\u4f8b</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">replicate</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c&#39;</span><span class=\"p\">])</span>\n\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">replicate</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c&#39;</span><span class=\"p\">])</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">]</span>                       <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"filesystemavailable\">filesystemAvailable<a class=\"headerlink\" href=\"#filesystemavailable\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u78c1\u76d8\u7684\u5269\u4f59\u7a7a\u95f4\u4fe1\u606f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684path\u914d\u7f6e\u8bc4\u4f30\u6b64\u4fe1\u606f\u3002</p>\n<h3 id=\"filesystemcapacity\">filesystemCapacity<a class=\"headerlink\" href=\"#filesystemcapacity\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8fd4\u56de\u78c1\u76d8\u7684\u5bb9\u91cf\u4fe1\u606f\uff0c\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u3002\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684path\u914d\u7f6e\u8bc4\u4f30\u6b64\u4fe1\u606f\u3002</p>\n<h3 id=\"function-finalizeaggregation\">finalizeAggregation<a class=\"headerlink\" href=\"#function-finalizeaggregation\" title=\"Permanent link\">&para;</a></h3>\n<p>\u83b7\u53d6\u805a\u5408\u51fd\u6570\u7684\u72b6\u6001\u3002\u8fd4\u56de\u805a\u5408\u7ed3\u679c\uff08\u6700\u7ec8\u72b6\u6001\uff09\u3002</p>\n<h3 id=\"function-runningaccumulate\">runningAccumulate<a class=\"headerlink\" href=\"#function-runningaccumulate\" title=\"Permanent link\">&para;</a></h3>\n<p>\u83b7\u53d6\u805a\u5408\u51fd\u6570\u7684\u72b6\u6001\u5e76\u8fd4\u56de\u5176\u5177\u4f53\u7684\u503c\u3002\u8fd9\u662f\u4ece\u7b2c\u4e00\u884c\u5230\u5f53\u524d\u884c\u7684\u6240\u6709\u884c\u7d2f\u8ba1\u7684\u7ed3\u679c\u3002</p>\n<p>\u4f8b\u5982\uff0c\u83b7\u53d6\u805a\u5408\u51fd\u6570\u7684\u72b6\u6001\uff08\u793a\u4f8brunningAccumulate(uniqState(UserID))\uff09\uff0c\u5bf9\u4e8e\u6570\u636e\u5757\u7684\u6bcf\u4e00\u884c\uff0c\u8fd4\u56de\u6240\u6709\u5148\u524d\u884c\u548c\u5f53\u524d\u884c\u7684\u72b6\u6001\u5408\u5e76\u540e\u7684\u805a\u5408\u51fd\u6570\u7684\u7ed3\u679c\u3002<br />\n\u56e0\u6b64\uff0c\u51fd\u6570\u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\u5206\u533a\u4e2d\u6570\u636e\u5757\u7684\u987a\u5e8f\u4ee5\u53ca\u6570\u636e\u5757\u4e2d\u884c\u7684\u987a\u5e8f\u3002</p>\n<h3 id=\"joinget-join-storage-table-name-get-column-join-key\">joinGet('join_storage_table_name', 'get_column', join_key)<a class=\"headerlink\" href=\"#joinget-join-storage-table-name-get-column-join-key\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u6307\u5b9a\u7684\u8fde\u63a5\u952e\u4eceJoin\u7c7b\u578b\u5f15\u64ce\u7684\u8868\u4e2d\u83b7\u53d6\u6570\u636e\u3002</p>\n<h3 id=\"modelevaluate-model-name\">modelEvaluate(model_name, ...)<a class=\"headerlink\" href=\"#modelevaluate-model-name\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4f7f\u7528\u5916\u90e8\u6a21\u578b\u8ba1\u7b97\u3002<br />\n\u63a5\u53d7\u6a21\u578b\u7684\u540d\u79f0\u4ee5\u53ca\u6a21\u578b\u7684\u53c2\u6570\u3002\u8fd4\u56deFloat64\u7c7b\u578b\u7684\u503c\u3002</p>\n<h3 id=\"throwif-x\">throwIf(x)<a class=\"headerlink\" href=\"#throwif-x\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u53c2\u6570\u4e0d\u4e3a\u96f6\u5219\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p><a name=\"query_language/agg_functions/\"></a><a name=\"../query_language/agg_functions/\"></a><a name=\"../../../../query_language/agg_functions/\"></a><a name=\"../../../query_language/agg_functions/\"></a><a name=\"../../query_language/agg_functions/\"></a><a name=\"agg_functions/\"></a><a name=\"../../../../../query_language/agg_functions/\"></a></p>\n<h2 id=\"aggregate_functions\">Aggregate functions<a class=\"headerlink\" href=\"#aggregate_functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Aggregate functions work in the <a href=\"http://www.sql-tutorial.com/sql-aggregate-functions-sql-tutorial\" rel=\"external nofollow noreferrer\">normal</a> way as expected by database experts.</p>\n<p>ClickHouse also supports:</p>\n<ul>\n<li><a href=\"#aggregate_functions_parametric\">Parametric aggregate functions</a>, which accept other parameters in addition to columns.</li>\n<li><a href=\"#aggregate_functions_combinators\">Combinators</a>, which change the behavior of aggregate functions.</li>\n</ul>\n<h3 id=\"null-processing\">NULL processing<a class=\"headerlink\" href=\"#null-processing\" title=\"Permanent link\">&para;</a></h3>\n<p>During aggregation, all <code>NULL</code>s are skipped.</p>\n<p><strong>Examples:</strong></p>\n<p>Consider this table:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510\n\u2502 1 \u2502    2 \u2502\n\u2502 2 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502 3 \u2502    2 \u2502\n\u2502 3 \u2502    3 \u2502\n\u2502 3 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Let's say you need to total the values in the <code>y</code> column:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null_big</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500sum(y)\u2500\u2510</span>\n<span class=\"err\">\u2502      7 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>The <code>sum</code> function interprets <code>NULL</code> as <code>0</code>. In particular, this means that if the function receives input of a selection where all the values are <code>NULL</code>, then the result will be <code>0</code>, not <code>NULL</code>.</p>\n<p>Now you can use the <code>groupArray</code> function to create an array from the <code>y</code> column:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupArray</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null_big</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500groupArray(y)\u2500\u2510\n\u2502 [2,2,3]       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><code>groupArray</code> does not include <code>NULL</code> in the resulting array.</p>\n<p><a name=\"../../query_language/agg_functions/reference/\"></a><a name=\"agg_functions/reference/\"></a><a name=\"../agg_functions/reference/\"></a><a name=\"../../../query_language/agg_functions/reference/\"></a><a name=\"../../agg_functions/reference/\"></a><a name=\"../../../../agg_functions/reference/\"></a><a name=\"../../../../../../agg_functions/reference/\"></a><a name=\"../../../../../agg_functions/reference/\"></a><a name=\"../../../../../query_language/agg_functions/reference/\"></a><a name=\"../query_language/agg_functions/reference/\"></a><a name=\"../../../../query_language/agg_functions/reference/\"></a><a name=\"../../../agg_functions/reference/\"></a><a name=\"query_language/agg_functions/reference/\"></a><a name=\"reference/\"></a></p>\n<h2 id=\"function-reference\">Function Reference<a class=\"headerlink\" href=\"#function-reference\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"agg_function-count\">count<a class=\"headerlink\" href=\"#agg_function-count\" title=\"Permanent link\">&para;</a></h3>\n<p>Counts the number of rows or not-NULL values.</p>\n<p>ClickHouse supports the following syntaxes for <code>count</code>:<br />\n- <code>count(expr)</code> or <code>COUNT(DISTINCT expr)</code>.<br />\n- <code>count()</code> or <code>COUNT(*)</code>. The <code>count()</code> syntax is ClickHouse-specific.</p>\n<p><strong>Parameters</strong></p>\n<p>The function can take:</p>\n<ul>\n<li>Zero parameters.</li>\n<li>One <a href=\"#syntax-expressions\">expression</a>.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>If the function is called without parameters it counts the number of rows.</li>\n<li>If the <a href=\"#syntax-expressions\">expression</a> is passed, then the function counts how many times this expression returned not null. If the expression returns a <a href=\"#../../data_types/nullable/\">Nullable</a>-type value, then the result of <code>count</code> stays not <code>Nullable</code>. The function returns 0 if the expression returned <code>NULL</code> for all the rows.</li>\n</ul>\n<p>In both cases the type of the returned value is <a href=\"#../../data_types/int_uint/\">UInt64</a>.</p>\n<p><strong>Details</strong></p>\n<p>ClickHouse supports the <code>COUNT(DISTINCT ...)</code> syntax. The behavior of this construction depends on the <a href=\"#settings-count_distinct_implementation\">count_distinct_implementation</a> setting. It defines which of the <a href=\"#agg_function-uniq\">uniq*</a> functions is used to perform the operation. The default is the <a href=\"#agg_function-uniqexact\">uniqExact</a> function.</p>\n<p>The <code>SELECT count() FROM table</code> query is not optimized, because the number of entries in the table is not stored separately. It chooses a small column from the table and counts the number of values in it.</p>\n<p><strong>Examples</strong></p>\n<p>Example 1:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500count()\u2500\u2510\n\u2502       5 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Example 2:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">settings</span> <span class=\"k\">WHERE</span> <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;count_distinct_implementation&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 count_distinct_implementation \u2502 uniqExact \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"k\">DISTINCT</span> <span class=\"n\">num</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500uniqExact(num)\u2500\u2510\n\u2502              3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This example shows that <code>count(DISTINCT num)</code> is performed by the <code>uniqExact</code> function according to the <code>count_distinct_implementation</code> setting value.</p>\n<h3 id=\"agg_function-any\">any(x)<a class=\"headerlink\" href=\"#agg_function-any\" title=\"Permanent link\">&para;</a></h3>\n<p>Selects the first encountered value.<br />\nThe query can be executed in any order and even in a different order each time, so the result of this function is indeterminate.<br />\nTo get a determinate result, you ca");
            
            document.write("n use the 'min' or 'max' function instead of 'any'.</p>\n<p>In some cases, you can rely on the order of execution. This applies to cases when SELECT comes from a subquery that uses ORDER BY.</p>\n<p>When a <code>SELECT</code> query has the <code>GROUP BY</code> clause or at least one aggregate function, ClickHouse (in contrast to MySQL) requires that all expressions in the <code>SELECT</code>, <code>HAVING</code>, and <code>ORDER BY</code> clauses be calculated from keys or from aggregate functions. In other words, each column selected from the table must be used either in keys or inside aggregate functions. To get behavior like in MySQL, you can put the other columns in the <code>any</code> aggregate function.</p>\n<h3 id=\"anyheavy-x\">anyHeavy(x)<a class=\"headerlink\" href=\"#anyheavy-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Selects a frequently occurring value using the <a href=\"http://www.cs.umd.edu/~samir/498/karp.pdf\" rel=\"external nofollow noreferrer\">heavy hitters</a> algorithm. If there is a value that occurs more than in half the cases in each of the query's execution threads, this value is returned. Normally, the result is nondeterministic.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">anyHeavy</span><span class=\"p\">(</span><span class=\"k\">column</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Arguments</strong></p>\n<ul>\n<li><code>column</code> \u2013 The column name.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Take the <a href=\"#../../getting_started/example_datasets/ontime/\">OnTime</a> data set and select any frequently occurring value in the <code>AirlineID</code> column.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">anyHeavy</span><span class=\"p\">(</span><span class=\"n\">AirlineID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500res\u2500\u2510\n\u2502 19690 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"anylast-x\">anyLast(x)<a class=\"headerlink\" href=\"#anylast-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Selects the last value encountered.<br />\nThe result is just as indeterminate as for the <code>any</code> function.</p>\n<h3 id=\"groupbitand\">groupBitAnd<a class=\"headerlink\" href=\"#groupbitand\" title=\"Permanent link\">&para;</a></h3>\n<p>Applies bitwise <code>AND</code> for series of numbers.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitAnd</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>UInt*</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt*</code> type.</p>\n<p><strong>Example</strong></p>\n<p>Test data:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n00101100 = 44\n00011100 = 28\n00001101 = 13\n01010101 = 85\n</code></pre></div>\n\n\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitAnd</span><span class=\"p\">(</span><span class=\"n\">num</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<p>Where <code>num</code> is the column with the test data.</p>\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n00000100 = 4\n</code></pre></div>\n\n\n<h3 id=\"groupbitor\">groupBitOr<a class=\"headerlink\" href=\"#groupbitor\" title=\"Permanent link\">&para;</a></h3>\n<p>Applies bitwise <code>OR</code> for series of numbers.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitOr</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>UInt*</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt*</code> type.</p>\n<p><strong>Example</strong></p>\n<p>Test data:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n00101100 = 44\n00011100 = 28\n00001101 = 13\n01010101 = 85\n</code></pre></div>\n\n\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitOr</span><span class=\"p\">(</span><span class=\"n\">num</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<p>Where <code>num</code> is the column with the test data.</p>\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n01111101 = 125\n</code></pre></div>\n\n\n<h3 id=\"groupbitxor\">groupBitXor<a class=\"headerlink\" href=\"#groupbitxor\" title=\"Permanent link\">&para;</a></h3>\n<p>Applies bitwise <code>XOR</code> for series of numbers.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitXor</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>UInt*</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt*</code> type.</p>\n<p><strong>Example</strong></p>\n<p>Test data:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n00101100 = 44\n00011100 = 28\n00001101 = 13\n01010101 = 85\n</code></pre></div>\n\n\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitXor</span><span class=\"p\">(</span><span class=\"n\">num</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<p>Where <code>num</code> is the column with the test data.</p>\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n01101000 = 104\n</code></pre></div>\n\n\n<h3 id=\"groupbitmap\">groupBitmap<a class=\"headerlink\" href=\"#groupbitmap\" title=\"Permanent link\">&para;</a></h3>\n<p>Bitmap or Aggregate calculations from a unsigned integer column, return cardinality of type UInt64, if add suffix -State, then return <a href=\"#../functions/bitmap_functions/\">bitmap object</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitmap</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>UInt*</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt64</code> type.</p>\n<p><strong>Example</strong></p>\n<p>Test data:</p>\n<div class=\"codehilite\"><pre><span></span><code>UserID\n1\n1\n2\n3\n</code></pre></div>\n\n\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitmap</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">num</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>num\n3\n</code></pre></div>\n\n\n<h3 id=\"agg_function-min\">min(x)<a class=\"headerlink\" href=\"#agg_function-min\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the minimum.</p>\n<h3 id=\"agg_function-max\">max(x)<a class=\"headerlink\" href=\"#agg_function-max\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the maximum.</p>\n<h3 id=\"agg_function-argMin\">argMin(arg, val)<a class=\"headerlink\" href=\"#agg_function-argMin\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the 'arg' value for a minimal 'val' value. If there are several different values of 'arg' for minimal values of 'val', the first of these values encountered is output.</p>\n<p><strong>Example:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500user\u2500\u2500\u2500\u2500\u2500\u252c\u2500salary\u2500\u2510\n\u2502 director \u2502   5000 \u2502\n\u2502 manager  \u2502   3000 \u2502\n\u2502 worker   \u2502   1000 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">argMin</span><span class=\"p\">(</span><span class=\"k\">user</span><span class=\"p\">,</span> <span class=\"n\">salary</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">salary</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500argMin(user, salary)\u2500\u2510\n\u2502 worker               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"agg_function-argMax\">argMax(arg, val)<a class=\"headerlink\" href=\"#agg_function-argMax\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the 'arg' value for a maximum 'val' value. If there are several different values of 'arg' for maximum values of 'val', the first of these values encountered is output.</p>\n<h3 id=\"agg_function-sum\">sum(x)<a class=\"headerlink\" href=\"#agg_function-sum\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the sum.<br />\nOnly works for numbers.</p>\n<h3 id=\"sumwithoverflow-x\">sumWithOverflow(x)<a class=\"headerlink\" href=\"#sumwithoverflow-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the sum of the numbers, using the same data type for the result as for the input parameters. If the sum exceeds the maximum value for this data type, the function returns an error.</p>\n<p>Only works for numbers.</p>\n<h3 id=\"agg_functions-summap\">sumMap(key, value)<a class=\"headerlink\" href=\"#agg_functions-summap\" title=\"Permanent link\">&para;</a></h3>\n<p>Totals the 'value' array according to the keys specified in the 'key' array.<br />\nThe number of elements in 'key' and 'value' must be the same for each row that is totaled.<br />\nReturns a tuple of two arrays: keys in sorted order, and values \u200b\u200bsummed for the corresponding keys.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">sum_map</span><span class=\"p\">(</span>\n    <span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">timeslot</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">statusMap</span> <span class=\"n\">Nested</span><span class=\"p\">(</span>\n        <span class=\"n\">status</span> <span");
            
            document.write(" class=\"n\">UInt16</span><span class=\"p\">,</span>\n        <span class=\"n\">requests</span> <span class=\"n\">UInt64</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">sum_map</span> <span class=\"k\">VALUES</span>\n    <span class=\"p\">(</span><span class=\"s1\">&#39;2000-01-01&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2000-01-01 00:00:00&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">]),</span>\n    <span class=\"p\">(</span><span class=\"s1\">&#39;2000-01-01&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2000-01-01 00:00:00&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">]),</span>\n    <span class=\"p\">(</span><span class=\"s1\">&#39;2000-01-01&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2000-01-01 00:01:00&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">]),</span>\n    <span class=\"p\">(</span><span class=\"s1\">&#39;2000-01-01&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2000-01-01 00:01:00&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">7</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">]);</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">timeslot</span><span class=\"p\">,</span>\n    <span class=\"n\">sumMap</span><span class=\"p\">(</span><span class=\"n\">statusMap</span><span class=\"p\">.</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">statusMap</span><span class=\"p\">.</span><span class=\"n\">requests</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">sum_map</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">timeslot</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500timeslot\u2500\u252c\u2500sumMap(statusMap.status, statusMap.requests)\u2500\u2510\n\u2502 2000-01-01 00:00:00 \u2502 ([1,2,3,4,5],[10,10,20,10,10])               \u2502\n\u2502 2000-01-01 00:01:00 \u2502 ([4,5,6,7,8],[10,10,20,10,10])               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"skewpop\">skewPop<a class=\"headerlink\" href=\"#skewpop\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the <a href=\"https://en.wikipedia.org/wiki/Skewness\" rel=\"external nofollow noreferrer\">skewness</a> of a sequence.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">skewPop</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number.</p>\n<p><strong>Returned value</strong></p>\n<p>The skewness of the given distribution. Type \u2014 <a href=\"#../../data_types/float/\">Float64</a></p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">skewPop</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">series_with_value_column</span>\n</code></pre></div>\n\n\n<h3 id=\"skewsamp\">skewSamp<a class=\"headerlink\" href=\"#skewsamp\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the <a href=\"https://en.wikipedia.org/wiki/Skewness\" rel=\"external nofollow noreferrer\">sample skewness</a> of a sequence.</p>\n<p>It represents an unbiased estimate of the skewness of a random variable if passed values form its sample.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">skewSamp</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number.</p>\n<p><strong>Returned value</strong></p>\n<p>The skewness of the given distribution. Type \u2014 <a href=\"#../../data_types/float/\">Float64</a>. If <code>n &lt;= 1</code> (<code>n</code> is the size of the sample), then the function returns <code>nan</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">skewSamp</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">series_with_value_column</span>\n</code></pre></div>\n\n\n<h3 id=\"kurtpop\">kurtPop<a class=\"headerlink\" href=\"#kurtpop\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the <a href=\"https://en.wikipedia.org/wiki/Kurtosis\" rel=\"external nofollow noreferrer\">kurtosis</a> of a sequence.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">kurtPop</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number.</p>\n<p><strong>Returned value</strong></p>\n<p>The kurtosis of the given distribution. Type \u2014 <a href=\"#../../data_types/float/\">Float64</a></p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">kurtPop</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">series_with_value_column</span>\n</code></pre></div>\n\n\n<h3 id=\"kurtsamp\">kurtSamp<a class=\"headerlink\" href=\"#kurtsamp\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the <a href=\"https://en.wikipedia.org/wiki/Kurtosis\" rel=\"external nofollow noreferrer\">sample kurtosis</a> of a sequence.</p>\n<p>It represents an unbiased estimate of the kurtosis of a random variable if passed values form its sample.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">kurtSamp</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number.</p>\n<p><strong>Returned value</strong></p>\n<p>The kurtosis of the given distribution. Type \u2014 <a href=\"#../../data_types/float/\">Float64</a>. If <code>n &lt;= 1</code> (<code>n</code> is a size of the sample), then the function returns <code>nan</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">kurtSamp</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">series_with_value_column</span>\n</code></pre></div>\n\n\n<h3 id=\"agg_function-timeseriesgroupsum\">timeSeriesGroupSum(uid, timestamp, value)<a class=\"headerlink\" href=\"#agg_function-timeseriesgroupsum\" title=\"Permanent link\">&para;</a></h3>\n<p><code>timeSeriesGroupSum</code> can aggregate different time series that sample timestamp not alignment.<br />\nIt will use linear interpolation between two sample timestamp and then sum time-series together.</p>\n<ul>\n<li><code>uid</code> is the time series unique id, <code>UInt64</code>.</li>\n<li><code>timestamp</code> is Int64 type in order to support millisecond or microsecond.</li>\n<li><code>value</code> is the metric.</li>\n</ul>\n<p>The function returns array of tuples with <code>(timestamp, aggregated_value)</code> pairs.</p>\n<p>Before using this function make sure <code>timestamp</code> is in ascending order.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500uid\u2500\u252c\u2500timestamp\u2500\u252c\u2500value\u2500\u2510\n\u2502 1   \u2502     2     \u2502   0.2 \u2502\n\u2502 1   \u2502     7     \u2502   0.7 \u2502\n\u2502 1   \u2502    12     \u2502   1.2 \u2502\n\u2502 1   \u2502    17     \u2502   1.7 \u2502\n\u2502 1   \u2502    25     \u2502   2.5 \u2502\n\u2502 2   \u2502     3     \u2502   0.6 \u2502\n\u2502 2   \u2502     8     \u2502   1.6 \u2502\n\u2502 2   \u2502    12     \u2502   2.4 \u2502\n\u2502 2   \u2502    18     \u2502   3.6 \u2502\n\u2502 2   \u2502    24     \u2502   4.8 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">time_series</span><span class=\"p\">(</span>\n    <span class=\"n\">uid</span>       <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">Int64</span><span class=\"p\">,</span>\n    <span class=\"n\">value</span>     <span class=\"n\">Float64</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">time_series</span> <span class=\"k\">VALUES</span>\n    <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">2</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">7</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"m");
            
            document.write("i\">12</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">2</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">17</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">7</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">25</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">),</span>\n    <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">6</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">6</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">.</span><span class=\"mi\">4</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">.</span><span class=\"mi\">6</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">24</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">.</span><span class=\"mi\">8</span><span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">timeSeriesGroupSum</span><span class=\"p\">(</span><span class=\"n\">uid</span><span class=\"p\">,</span> <span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">time_series</span> <span class=\"k\">order</span> <span class=\"k\">by</span> <span class=\"k\">timestamp</span> <span class=\"k\">ASC</span>\n<span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>And the result will be:</p>\n<div class=\"codehilite\"><pre><span></span><code>[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]\n</code></pre></div>\n\n\n<h3 id=\"agg_function-timeseriesgroupratesum\">timeSeriesGroupRateSum(uid, ts, val)<a class=\"headerlink\" href=\"#agg_function-timeseriesgroupratesum\" title=\"Permanent link\">&para;</a></h3>\n<p>Similarly timeSeriesGroupRateSum, timeSeriesGroupRateSum will Calculate the rate of time-series and then sum rates together.<br />\nAlso, timestamp should be in ascend order before use this function.</p>\n<p>Use this function, the result above case will be:</p>\n<div class=\"codehilite\"><pre><span></span><code>[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]\n</code></pre></div>\n\n\n<h3 id=\"agg_function-avg\">avg(x)<a class=\"headerlink\" href=\"#agg_function-avg\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the average.<br />\nOnly works for numbers.<br />\nThe result is always Float64.</p>\n<h3 id=\"agg_function-uniq\">uniq<a class=\"headerlink\" href=\"#agg_function-uniq\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the approximate number of different values of the argument.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">[,</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>A <a href=\"#../../data_types/int_uint/\">UInt64</a>-type number.</li>\n</ul>\n<p><strong>Implementation details</strong></p>\n<p>Function:</p>\n<ul>\n<li>Calculates a hash for all parameters in the aggregate, then uses it in calculations.</li>\n<li>\n<p>Uses an adaptive sampling algorithm. For the calculation state, the function uses a sample of element hash values up to 65536.</p>\n<p>This algorithm is very accurate and very efficient on the CPU. When the query contains several of these functions, using <code>uniq</code> is almost as fast as using other aggregate functions.</p>\n</li>\n<li>\n<p>Provides the result deterministically (it doesn't depend on the query processing order).</p>\n</li>\n</ul>\n<p>We recommend using this function in almost all scenarios.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_function-uniqcombined\">uniqCombined</a></li>\n<li><a href=\"#agg_function-uniqcombined64\">uniqCombined64</a></li>\n<li><a href=\"#agg_function-uniqhll12\">uniqHLL12</a></li>\n<li><a href=\"#agg_function-uniqexact\">uniqExact</a></li>\n</ul>\n<h3 id=\"agg_function-uniqcombined\">uniqCombined<a class=\"headerlink\" href=\"#agg_function-uniqcombined\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the approximate number of different argument values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniqCombined</span><span class=\"p\">(</span><span class=\"n\">HLL_precision</span><span class=\"p\">)(</span><span class=\"n\">x</span><span class=\"p\">[,</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p>The <code>uniqCombined</code> function is a good choice for calculating the number of different values.</p>\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>\n<p><code>HLL_precision</code> is the base-2 logarithm of the number of cells in <a href=\"https://en.wikipedia.org/wiki/HyperLogLog\" rel=\"external nofollow noreferrer\">HyperLogLog</a>. Optional, you can use the function as <code>uniqCombined(x[, ...])</code>. The default value for <code>HLL_precision</code> is 17, which is effectively 96 KiB of space (2^17 cells, 6 bits each).</p>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>A number <a href=\"#../../data_types/int_uint/\">UInt64</a>-type number.</li>\n</ul>\n<p><strong>Implementation details</strong></p>\n<p>Function:</p>\n<ul>\n<li>Calculates a hash (64-bit hash for <code>String</code> and 32-bit otherwise) for all parameters in the aggregate, then uses it in calculations.</li>\n<li>\n<p>Uses a combination of three algorithms: array, hash table, and HyperLogLog with an error correction table.</p>\n<p>For a small number of distinct elements, an array is used. When the set size is larger, a hash table is used. For a larger number of elements, HyperLogLog is used, which will occupy a fixed amount of memory.</p>\n</li>\n<li>\n<p>Provides the result deterministically (it doesn't depend on the query processing order).</p>\n</li>\n</ul>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Since it uses 32-bit hash for non-<code>String</code> type, the result will have very high error for cardinalities significantly larger than <code>UINT_MAX</code> (error will raise quickly after a few tens of billions of distinct values), hence in this case you should use <a href=\"#agg_function-uniqcombined64\">uniqCombined64</a></p>\n</div>\n<p>Compared to the <a href=\"#agg_function-uniq\">uniq</a> function, the <code>uniqCombined</code>:</p>\n<ul>\n<li>Consumes several times less memory.</li>\n<li>Calculates with several times higher accuracy.</li>\n<li>Usually has slightly lower performance. In some scenarios, <code>uniqCombined</code> can perform better than <code>uniq</code>, for example, with distributed queries that transmit a large number of aggregation states over the network.</li>\n</ul>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_function-uniq\">uniq</a></li>\n<li><a href=\"#agg_function-uniqcombined64\">uniqCombined64</a></li>\n<li><a href=\"#agg_function-uniqhll12\">uniqHLL12</a></li>\n<li><a href=\"#agg_function-uniqexact\">uniqExact</a></li>\n</ul>\n<h3 id=\"agg_function-uniqcombined64\">uniqCombined64<a class=\"headerlink\" href=\"#agg_function-uniqcombined64\" title=\"Permanent link\">&para;</a></h3>\n<p>Same as <a href=\"#agg_function-uniqcombined\">uniqCombined</a>, but uses 64-bit hash for all data types.</p>\n<h3 id=\"agg_function-uniqhll12\">uniqHLL12<a class=\"headerlink\" href=\"#agg_function-uniqhll12\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the approximate number of different argument values, using the <a href=\"https://en.wikipedia.org/wiki/HyperLogLog\" rel=\"external nofollow noreferrer\">HyperLogLog</a> algorithm.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniqHLL12</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">[,</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>A <a href=\"#../../data_types/int_uint/\">UInt64</a>-type number.</li>\n</ul>\n<p><strong>Implementation details</strong></p>\n<p>Function:</p>\n<ul>\n<li>Calculates a hash for all parameters in the aggregate, then uses it in calculations.</li>\n<li>\n<p>Uses the HyperLogLog algorithm to approximate the number of different argument values.</p>\n<p>212 5-bit cells are used. The size of the state is slightly more than 2.5 KB. The result is not very accurate (up to ~10% error) for small data sets (&lt;10K elements). However, the result is fairly accurate for high-cardinality data sets (10K-100M), with a maximum error of ~1.6%. Starting from 100M, the estimation error increases, and the function will return very inaccurate results for data sets with extremely high cardinality (1B+ elements).</p>\n</li>\n<li>\n<p>Provides the determinate result (it doesn't depend on the query processing order).</p>\n</li>\n</ul>\n<p>We don't recommend using this function. In most cases, use the <a href=\"#agg_function-uniq\">uniq</a> or <a href=\"#agg_function-uniqcombined\">uniqCombined</a> function.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_functio");
            
            document.write("n-uniq\">uniq</a></li>\n<li><a href=\"#agg_function-uniqcombined\">uniqCombined</a></li>\n<li><a href=\"#agg_function-uniqexact\">uniqExact</a></li>\n</ul>\n<h3 id=\"agg_function-uniqexact\">uniqExact<a class=\"headerlink\" href=\"#agg_function-uniqexact\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the exact number of different argument values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniqExact</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">[,</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p>Use the <code>uniqExact</code> function if you absolutely need an exact result. Otherwise use the <a href=\"#agg_function-uniq\">uniq</a> function.</p>\n<p>The <code>uniqExact</code> function uses more memory than <code>uniq</code>, because the size of the state has unbounded growth as the number of different values increases.</p>\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_function-uniq\">uniq</a></li>\n<li><a href=\"#agg_function-uniqcombined\">uniqCombined</a></li>\n<li><a href=\"#agg_function-uniqhll12\">uniqHLL12</a></li>\n</ul>\n<h3 id=\"agg_function-grouparray\">groupArray(x), groupArray(max_size)(x)<a class=\"headerlink\" href=\"#agg_function-grouparray\" title=\"Permanent link\">&para;</a></h3>\n<p>Creates an array of argument values.<br />\nValues can be added to the array in any (indeterminate) order.</p>\n<p>The second version (with the <code>max_size</code> parameter) limits the size of the resulting array to <code>max_size</code> elements.<br />\nFor example, <code>groupArray (1) (x)</code> is equivalent to <code>[any (x)]</code>.</p>\n<p>In some cases, you can still rely on the order of execution. This applies to cases when <code>SELECT</code> comes from a subquery that uses <code>ORDER BY</code>.</p>\n<h3 id=\"grouparrayinsertat-x\">groupArrayInsertAt(x)<a class=\"headerlink\" href=\"#grouparrayinsertat-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Inserts a value into the array in the specified position.</p>\n<p>Accepts the value and position as input. If several values \u200b\u200bare inserted into the same position, any of them might end up in the resulting array (the first one will be used in the case of single-threaded execution). If no value is inserted into a position, the position is assigned the default value.</p>\n<p>Optional parameters:</p>\n<ul>\n<li>The default value for substituting in empty positions.</li>\n<li>The length of the resulting array. This allows you to receive arrays of the same size for all the aggregate keys. When using this parameter, the default value must be specified.</li>\n</ul>\n<h3 id=\"agg_function-grouparraymovingsum\">groupArrayMovingSum<a class=\"headerlink\" href=\"#agg_function-grouparraymovingsum\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the moving sum of input values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"n\">numbers_for_summing</span><span class=\"p\">)</span>\n<span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"n\">window_size</span><span class=\"p\">)(</span><span class=\"n\">numbers_for_summing</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The function can take the window size as a parameter. If left unspecified, the function takes the window size equal to the number of rows in the column.</p>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>numbers_for_summing</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> resulting in a numeric data type value.</li>\n<li><code>window_size</code> \u2014 Size of the calculation window.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Array of the same size and type as the input data.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>The sample table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t</span>\n<span class=\"p\">(</span>\n    <span class=\"o\">`</span><span class=\"nb\">int</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"nb\">float</span><span class=\"o\">`</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"nb\">dec</span><span class=\"o\">`</span> <span class=\"n\">Decimal32</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int\u2500\u252c\u2500float\u2500\u252c\u2500\u2500dec\u2500\u2510\n\u2502   1 \u2502   1.1 \u2502 1.10 \u2502\n\u2502   2 \u2502   2.2 \u2502 2.20 \u2502\n\u2502   4 \u2502   4.4 \u2502 4.40 \u2502\n\u2502   7 \u2502  7.77 \u2502 7.77 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The queries:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">I</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"nb\">float</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">F</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"nb\">dec</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">D</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500I\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500F\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,3,7,14] \u2502 [1.1,3.3000002,7.7000003,15.47] \u2502 [1.10,3.30,7.70,15.47] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">I</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">float</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">F</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">dec</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">D</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500I\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500F\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,3,6,11] \u2502 [1.1,3.3000002,6.6000004,12.17] \u2502 [1.10,3.30,6.60,12.17] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"agg_function-grouparraymovingavg\">groupArrayMovingAvg<a class=\"headerlink\" href=\"#agg_function-grouparraymovingavg\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the moving average of input values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"n\">numbers_for_summing</span><span class=\"p\">)</span>\n<span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"n\">window_size</span><span class=\"p\">)(</span><span class=\"n\">numbers_for_summing</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The function can take the window size as a parameter. If left unspecified, the function takes the window size equal to the number of rows in the column.</p>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>numbers_for_summing</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> resulting in a numeric data type value.</li>\n<li><code>window_size</code> \u2014 Size of the calculation window.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Array of the same size and type as the input data.</li>\n</ul>\n<p>The function uses <a href=\"https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero\" rel=\"external nofollow noreferrer\">rounding towards zero</a>. It truncates the decimal places insignificant for the resulting data type.</p>\n<p><strong>Example</strong></p>\n<p>The sample table <code>b</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t</span>\n<span class=\"p\">(</span>\n    <span class=\"o\">`</span><span class=\"nb\">int</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"nb\">float</span><span class=\"o\">`</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"nb\">dec</span><span class=\"o\">`</span> <span class=\"n\">Decimal32</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int\u2500\u252c\u2500float\u2500\u252c\u2500\u2500dec\u2500\u2510\n\u2502   1 \u2502   1.1 \u2502 1.10 \u2502\n\u2502   2 \u2502   2.2 \u2502 2.20 \u2502\n\u2502   4 \u2502   4.4 \u2502 4.40 \u2502\n\u2502   7 \u2502  7.77 \u2502 7.77 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The queries:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">I</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"nb\">float</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">F</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"nb\">dec</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">D</span>\n<span class=\"k\">FROM</span> <span class=\"n");
            
            document.write("\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500I\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500F\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [0,0,1,3] \u2502 [0.275,0.82500005,1.9250001,3.8675] \u2502 [0.27,0.82,1.92,3.86] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">I</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">float</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">F</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">dec</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">D</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500I\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500F\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [0,1,3,5] \u2502 [0.55,1.6500001,3.3000002,6.085] \u2502 [0.55,1.65,3.30,6.08] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"groupuniqarray-x-groupuniqarray-max-size-x\">groupUniqArray(x), groupUniqArray(max_size)(x)<a class=\"headerlink\" href=\"#groupuniqarray-x-groupuniqarray-max-size-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Creates an array from different argument values. Memory consumption is the same as for the <code>uniqExact</code> function.</p>\n<p>The second version (with the <code>max_size</code> parameter) limits the size of the resulting array to <code>max_size</code> elements.<br />\nFor example, <code>groupUniqArray(1)(x)</code> is equivalent to <code>[any(x)]</code>.</p>\n<h3 id=\"agg_function-quantile\">quantile(level)(x)<a class=\"headerlink\" href=\"#agg_function-quantile\" title=\"Permanent link\">&para;</a></h3>\n<p>Approximates the <code>level</code> quantile. <code>level</code> is a constant, a floating-point number from 0 to 1.<br />\nWe recommend using a <code>level</code> value in the range of <code>[0.01, 0.99]</code><br />\nDon't use a <code>level</code> value equal to 0 or 1 \u2013 use the <code>min</code> and <code>max</code> functions for these cases.</p>\n<p>In this function, as well as in all functions for calculating quantiles, the <code>level</code> parameter can be omitted. In this case, it is assumed to be equal to 0.5 (in other words, the function will calculate the median).</p>\n<p>Works for numbers, dates, and dates with times.<br />\nReturns: for numbers \u2013 <code>Float64</code>; for dates \u2013 a date; for dates with times \u2013 a date with time.</p>\n<p>Uses <a href=\"https://en.wikipedia.org/wiki/Reservoir_sampling\" rel=\"external nofollow noreferrer\">reservoir sampling</a> with a reservoir size up to 8192.<br />\nIf necessary, the result is output with linear approximation from the two neighboring values.<br />\nThis algorithm provides very low accuracy. See also: <code>quantileTiming</code>, <code>quantileTDigest</code>, <code>quantileExact</code>.</p>\n<p>The result depends on the order of running the query, and is nondeterministic.</p>\n<p>When using multiple <code>quantile</code> (and similar) functions with different levels in a query, the internal states are not combined (that is, the query works less efficiently than it could). In this case, use the <code>quantiles</code> (and similar) functions.</p>\n<h3 id=\"quantiledeterministic-level-x-determinator\">quantileDeterministic(level)(x, determinator)<a class=\"headerlink\" href=\"#quantiledeterministic-level-x-determinator\" title=\"Permanent link\">&para;</a></h3>\n<p>Works the same way as the <code>quantile</code> function, but the result is deterministic and does not depend on the order of query execution.</p>\n<p>To achieve this, the function takes a second argument \u2013 the \"determinator\". This is a number whose hash is used instead of a random number generator in the reservoir sampling algorithm. For the function to work correctly, the same determinator value should not occur too often. For the determinator, you can use an event ID, user ID, and so on.</p>\n<p>Don't use this function for calculating timings. There is a more suitable function for this purpose: <code>quantileTiming</code>.</p>\n<h3 id=\"agg_function-quantiletiming\">quantileTiming<a class=\"headerlink\" href=\"#agg_function-quantiletiming\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the quantile of the specified level with determined precision. The function is intended for calculating page loading time quantiles in milliseconds. </p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">quantileTiming</span><span class=\"p\">(</span><span class=\"k\">level</span><span class=\"p\">)(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>level</code> \u2014 Quantile level. Range: [0, 1].</li>\n<li>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a <a href=\"#../../data_types/float/\">Float*</a>-type number. The function expects input values in unix timestamp format in milliseconds, but it doesn't validate format.</p>\n<ul>\n<li>If negative values are passed to the function, the behavior is undefined.</li>\n<li>If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Accuracy</strong></p>\n<p>The calculation is accurate if:</p>\n<ul>\n<li>Total number of values doesn't exceed 5670.</li>\n<li>Total number of values exceeds 5670, but the page loading time is less than 1024ms.</li>\n</ul>\n<p>Otherwise, the result of the calculation is rounded to the nearest multiple of 16 ms.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>For calculating page loading time quantiles, this function is more effective and accurate than <a href=\"#agg_function-quantile\">quantile</a>.</p>\n</div>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>Quantile of the specified level.</li>\n</ul>\n<p>Type: <code>Float32</code>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>If no values are passed to the function (when using <code>quantileTimingIf</code>), <a href=\"#data_type-float-nan-inf\">NaN</a> is returned. The purpose of this is to differentiate these cases from cases that result in zero. See <a href=\"#select-order-by\">ORDER BY clause</a> for notes on sorting <code>NaN</code> values.</p>\n</div>\n<p>The result is deterministic (it doesn't depend on the query processing order).</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">quantileTiming</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">)(</span><span class=\"nb\">number</span> <span class=\"o\">/</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500quantileTiming(0.5)(divide(number, 2))\u2500\u2510\n\u2502                                      2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"quantiletimingweighted-level-x-weight\">quantileTimingWeighted(level)(x, weight)<a class=\"headerlink\" href=\"#quantiletimingweighted-level-x-weight\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from the <code>quantileTiming</code> function in that it has a second argument, \"weights\". Weight is a non-negative integer.<br />\nThe result is calculated as if the <code>x</code> value were passed <code>weight</code> number of times to the <code>quantileTiming</code> function.</p>\n<h3 id=\"quantileexact-level-x\">quantileExact(level)(x)<a class=\"headerlink\" href=\"#quantileexact-level-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the quantile of 'level' exactly. To do this, all the passed values \u200b\u200bare combined into an array, which is then partially sorted. Therefore, the function consumes O(n) memory, where 'n' is the number of values that were passed. However, for a small number of values, the function is very effective.</p>\n<h3 id=\"quantileexactweighted-level-x-weight\">quantileExactWeighted(level)(x, weight)<a class=\"headerlink\" href=\"#quantileexactweighted-level-x-weight\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the quantile of 'level' exactly. In addition, each value is counted with its weight, as if it is present 'weight' times. The arguments of the function can be considered as histograms, where the value 'x' corresponds to a histogram \"column\" of the height 'weight', and the function itself can be considered as a summation of histograms.</p>\n<p>A hash table is used as the algorithm. Because of this, if the passed values \u200b\u200bare frequently repeated, the function consumes less RAM than <code>quantileExact</code>. You can use this function instead of <code>quantileExact</code> and specify the weight as 1.</p>\n<h3 id=\"quantiletdigest-level-x\">quantileTDigest(level)(x)<a class=\"headerlink\" href=\"#quantiletdigest-level-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Approximates the quantile level using the <a href=\"https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf\" rel=\"external nofollow noreferrer\">t-digest</a> algorithm. The maximum error is 1%. Memory consumption by State is proportional to the logarithm of the number of passed values.</p>\n<p>The performance of the function is lower than for <code>quantile</code> or <code>quantileTiming</code>. In terms of the ratio of State size to precision, this function is much better than <code>quantile</code>.</p>\n<p>The result depends on the order of running the query, and is nondeterministic.</p>\n<h3 id=\"median-x\">median(x)<a class=\"headerlink\" href=\"#median-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Al");
            
            document.write("l the quantile functions have corresponding median functions: <code>median</code>, <code>medianDeterministic</code>, <code>medianTiming</code>, <code>medianTimingWeighted</code>, <code>medianExact</code>, <code>medianExactWeighted</code>, <code>medianTDigest</code>. They are synonyms and their behavior is identical.</p>\n<h3 id=\"quantiles-level1-level2-x\">quantiles(level1, level2, ...)(x)<a class=\"headerlink\" href=\"#quantiles-level1-level2-x\" title=\"Permanent link\">&para;</a></h3>\n<p>All the quantile functions also have corresponding quantiles functions: <code>quantiles</code>, <code>quantilesDeterministic</code>, <code>quantilesTiming</code>, <code>quantilesTimingWeighted</code>, <code>quantilesExact</code>, <code>quantilesExactWeighted</code>, <code>quantilesTDigest</code>. These functions calculate all the quantiles of the listed levels in one pass, and return an array of the resulting values.</p>\n<h3 id=\"varsamp-x\">varSamp(x)<a class=\"headerlink\" href=\"#varsamp-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the amount <code>\u03a3((x - x\u0305)^2) / (n - 1)</code>, where <code>n</code> is the sample size and <code>x\u0305</code>is the average value of <code>x</code>.</p>\n<p>It represents an unbiased estimate of the variance of a random variable if passed values form its sample.</p>\n<p>Returns <code>Float64</code>. When <code>n &lt;= 1</code>, returns <code>+\u221e</code>.</p>\n<h3 id=\"varpop-x\">varPop(x)<a class=\"headerlink\" href=\"#varpop-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the amount <code>\u03a3((x - x\u0305)^2) / n</code>, where <code>n</code> is the sample size and <code>x\u0305</code>is the average value of <code>x</code>.</p>\n<p>In other words, dispersion for a set of values. Returns <code>Float64</code>.</p>\n<h3 id=\"stddevsamp-x\">stddevSamp(x)<a class=\"headerlink\" href=\"#stddevsamp-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The result is equal to the square root of <code>varSamp(x)</code>.</p>\n<h3 id=\"stddevpop-x\">stddevPop(x)<a class=\"headerlink\" href=\"#stddevpop-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The result is equal to the square root of <code>varPop(x)</code>.</p>\n<h3 id=\"topk-n-column\">topK(N)(column)<a class=\"headerlink\" href=\"#topk-n-column\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns an array of the most frequent values in the specified column. The resulting array is sorted in descending order of frequency of values (not by the values themselves).</p>\n<p>Implements the <a href=\"http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf\" rel=\"external nofollow noreferrer\"> Filtered Space-Saving</a> algorithm for analyzing TopK, based on the reduce-and-combine algorithm from <a href=\"https://arxiv.org/pdf/1401.0702.pdf\" rel=\"external nofollow noreferrer\">Parallel Space Saving</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">topK</span><span class=\"p\">(</span><span class=\"n\">N</span><span class=\"p\">)(</span><span class=\"k\">column</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>This function doesn't provide a guaranteed result. In certain situations, errors might occur and it might return frequent values that aren't the most frequent values.</p>\n<p>We recommend using the <code>N &lt; 10</code> value; performance is reduced with large <code>N</code> values. Maximum value of <code>N = 65536</code>.</p>\n<p><strong>Arguments</strong></p>\n<ul>\n<li>'N' is the number of values.</li>\n<li>' x ' \u2013 The column.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Take the <a href=\"#../../getting_started/example_datasets/ontime/\">OnTime</a> data set and select the three most frequently occurring values in the <code>AirlineID</code> column.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">topK</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)(</span><span class=\"n\">AirlineID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [19393,19790,19805] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"covarsamp-x-y\">covarSamp(x, y)<a class=\"headerlink\" href=\"#covarsamp-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the value of <code>\u03a3((x - x\u0305)(y - y\u0305)) / (n - 1)</code>.</p>\n<p>Returns Float64. When <code>n &lt;= 1</code>, returns +\u221e.</p>\n<h3 id=\"covarpop-x-y\">covarPop(x, y)<a class=\"headerlink\" href=\"#covarpop-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the value of <code>\u03a3((x - x\u0305)(y - y\u0305)) / n</code>.</p>\n<h3 id=\"corr-x-y\">corr(x, y)<a class=\"headerlink\" href=\"#corr-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the Pearson correlation coefficient: <code>\u03a3((x - x\u0305)(y - y\u0305)) / sqrt(\u03a3((x - x\u0305)^2) * \u03a3((y - y\u0305)^2))</code>.</p>\n<h3 id=\"simplelinearregression\">simpleLinearRegression<a class=\"headerlink\" href=\"#simplelinearregression\" title=\"Permanent link\">&para;</a></h3>\n<p>Performs simple (unidimensional) linear regression.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">simpleLinearRegression</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Parameters:</p>\n<ul>\n<li><code>x</code> \u2014 Column with dependent variable values.</li>\n<li><code>y</code> \u2014 Column with explanatory variable values.</li>\n</ul>\n<p>Returned values:</p>\n<p>Constants <code>(a, b)</code> of the resulting line <code>y = a*x + b</code>.</p>\n<p><strong>Examples</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReduce</span><span class=\"p\">(</span><span class=\"s1\">&#39;simpleLinearRegression&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [0, 1, 2, 3])\u2500\u2510\n\u2502 (1,0)                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReduce</span><span class=\"p\">(</span><span class=\"s1\">&#39;simpleLinearRegression&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [3, 4, 5, 6])\u2500\u2510\n\u2502 (1,3)                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"agg_functions-stochasticlinearregression\">stochasticLinearRegression<a class=\"headerlink\" href=\"#agg_functions-stochasticlinearregression\" title=\"Permanent link\">&para;</a></h3>\n<p>This function implements stochastic linear regression. It supports custom parameters for learning rate, L2 regularization coefficient, mini-batch size and has few methods for updating weights (<a href=\"https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Adam\" rel=\"external nofollow noreferrer\">Adam</a> (used by default), <a href=\"https://en.wikipedia.org/wiki/Stochastic_gradient_descent\" rel=\"external nofollow noreferrer\">simple SGD</a>, <a href=\"https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Momentum\" rel=\"external nofollow noreferrer\">Momentum</a>, <a href=\"https://mipt.ru/upload/medialibrary/d7e/41-91.pdf\" rel=\"external nofollow noreferrer\">Nesterov</a>).</p>\n<h4 id=\"agg_functions-stochasticlinearregression-parameters\">Parameters<a class=\"headerlink\" href=\"#agg_functions-stochasticlinearregression-parameters\" title=\"Permanent link\">&para;</a></h4>\n<p>There are 4 customizable parameters. They are passed to the function sequentially, but there is no need to pass all four - default values will be used, however good model required some parameter tuning.</p>\n<div class=\"codehilite\"><pre><span></span><code>stochasticLinearRegression(1.0, 1.0, 10, &#39;SGD&#39;)\n</code></pre></div>\n\n\n<ol>\n<li><code>learning rate</code> is the coefficient on step length, when gradient descent step is performed. Too big learning rate may cause infinite weights of the model. Default is <code>0.00001</code>.</li>\n<li><code>l2 regularization coefficient</code> which may help to prevent overfitting. Default is <code>0.1</code>.</li>\n<li><code>mini-batch size</code> sets the number of elements, which gradients will be computed and summed to perform one step of gradient descent. Pure stochastic descent uses one element, however having small batches(about 10 elements) make gradient steps more stable. Default is <code>15</code>.</li>\n<li><code>method for updating weights</code>, they are: <code>Adam</code> (by default), <code>SGD</code>, <code>Momentum</code>, <code>Nesterov</code>. <code>Momentum</code> and <code>Nesterov</code> require little bit more computations and memory, however they happen to be useful in terms of speed of convergance and stability of stochastic gradient methods.</li>\n</ol>\n<h4 id=\"agg_functions-stochasticlinearregression-usage\">Usage<a class=\"headerlink\" href=\"#agg_functions-stochasticlinearregression-usage\" title=\"Permanent link\">&para;</a></h4>\n<p><code>stochasticLinearRegression</code> is used in two steps: fitting the model and predicting on ne");
            
            document.write("w data. In order to fit the model and save its state for later usage we use <code>-State</code> combinator, which basically saves the state (model weights, etc).<br />\nTo predict we use function <a href=\"#machine_learning_methods-evalmlmethod\">evalMLMethod</a>, which takes a state as an argument as well as features to predict on.</p>\n<p><a name=\"stochasticlinearregression-usage-fitting\"></a></p>\n<p><strong>1.</strong> Fitting</p>\n<p>Such query may be used.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span> <span class=\"n\">train_data</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">param1</span> <span class=\"n\">Float64</span><span class=\"p\">,</span>\n    <span class=\"n\">param2</span> <span class=\"n\">Float64</span><span class=\"p\">,</span>\n    <span class=\"n\">target</span> <span class=\"n\">Float64</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">your_model</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span> <span class=\"k\">AS</span> <span class=\"k\">SELECT</span>\n<span class=\"n\">stochasticLinearRegressionState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SGD&#39;</span><span class=\"p\">)(</span><span class=\"n\">target</span><span class=\"p\">,</span> <span class=\"n\">param1</span><span class=\"p\">,</span> <span class=\"n\">param2</span><span class=\"p\">)</span>\n<span class=\"k\">AS</span> <span class=\"k\">state</span> <span class=\"k\">FROM</span> <span class=\"n\">train_data</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Here we also need to insert data into <code>train_data</code> table. The number of parameters is not fixed, it depends only on number of arguments, passed into <code>linearRegressionState</code>. They all must be numeric values.<br />\nNote that the column with target value(which we would like to learn to predict) is inserted as the first argument.</p>\n<p><strong>2.</strong> Predicting</p>\n<p>After saving a state into the table, we may use it multiple times for prediction, or even merge with other states and create new even better models.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"k\">state</span> <span class=\"k\">FROM</span> <span class=\"n\">your_model</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">model</span> <span class=\"k\">SELECT</span>\n<span class=\"n\">evalMLMethod</span><span class=\"p\">(</span><span class=\"n\">model</span><span class=\"p\">,</span> <span class=\"n\">param1</span><span class=\"p\">,</span> <span class=\"n\">param2</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">test_data</span>\n</code></pre></div>\n\n\n<p>The query will return a column of predicted values. Note that first argument of <code>evalMLMethod</code> is <code>AggregateFunctionState</code> object, next are columns of features.</p>\n<p><code>test_data</code> is a table like <code>train_data</code> but may not contain target value.</p>\n<h4 id=\"agg_functions-stochasticlinearregression-notes\">Notes<a class=\"headerlink\" href=\"#agg_functions-stochasticlinearregression-notes\" title=\"Permanent link\">&para;</a></h4>\n<ol>\n<li>\n<p>To merge two models user may create such query:<br />\n<code>sql\n    SELECT state1 + state2 FROM your_models</code><br />\n    where <code>your_models</code> table contains both models. This query will return new <code>AggregateFunctionState</code> object.</p>\n</li>\n<li>\n<p>User may fetch weights of the created model for its own purposes without saving the model if no <code>-State</code> combinator is used.<br />\n<code>sql\n    SELECT stochasticLinearRegression(0.01)(target, param1, param2) FROM train_data</code><br />\n    Such query will fit the model and return its weights - first are weights, which correspond to the parameters of the model, the last one is bias. So in the example above the query will return a column with 3 values.</p>\n</li>\n</ol>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_functions-stochasticlogisticregression\">stochasticLogisticRegression</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression\" rel=\"external nofollow noreferrer\">Difference between linear and logistic regressions</a></li>\n</ul>\n<h3 id=\"agg_functions-stochasticlogisticregression\">stochasticLogisticRegression<a class=\"headerlink\" href=\"#agg_functions-stochasticlogisticregression\" title=\"Permanent link\">&para;</a></h3>\n<p>This function implements stochastic logistic regression. It can be used for binary classification problem, supports the same custom parameters as stochasticLinearRegression and works the same way.</p>\n<h4 id=\"agg_functions-stochasticlogisticregression-parameters\">Parameters<a class=\"headerlink\" href=\"#agg_functions-stochasticlogisticregression-parameters\" title=\"Permanent link\">&para;</a></h4>\n<p>Parameters are exactly the same as in stochasticLinearRegression:<br />\n<code>learning rate</code>, <code>l2 regularization coefficient</code>, <code>mini-batch size</code>, <code>method for updating weights</code>.<br />\nFor more information see <a href=\"#agg_functions-stochasticlinearregression-parameters\">parameters</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code>stochasticLogisticRegression(1.0, 1.0, 10, &#39;SGD&#39;)\n</code></pre></div>\n\n\n<ol>\n<li>\n<p>Fitting</p>\n<p>See the <code>Fitting</code> section in the <a href=\"#stochasticlinearregression-usage-fitting\">stochasticLinearRegression</a> description.</p>\n<p>Predicted labels have to be in [-1, 1].</p>\n</li>\n<li>\n<p>Predicting</p>\n<p>Using saved state we can predict probability of object having label <code>1</code>.</p>\n<p><code>sql\nWITH (SELECT state FROM your_model) AS model SELECT\nevalMLMethod(model, param1, param2) FROM test_data</code></p>\n<p>The query will return a column of probabilities. Note that first argument of <code>evalMLMethod</code> is <code>AggregateFunctionState</code> object, next are columns of features.</p>\n<p>We can also set a bound of probability, which assigns elements to different labels.</p>\n<p><code>sql\nSELECT ans &lt; 1.1 AND ans &gt; 0.5 FROM\n(WITH (SELECT state FROM your_model) AS model SELECT\nevalMLMethod(model, param1, param2) AS ans FROM test_data)</code></p>\n<p>Then the result will be labels.</p>\n<p><code>test_data</code> is a table like <code>train_data</code> but may not contain target value.</p>\n</li>\n</ol>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_functions-stochasticlinearregression\">stochasticLinearRegression</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression\" rel=\"external nofollow noreferrer\">Difference between linear and logistic regressions.</a></li>\n</ul>\n<h3 id=\"groupbitmapand\">groupBitmapAnd<a class=\"headerlink\" href=\"#groupbitmapand\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculations the AND of a bitmap column, return cardinality of type UInt64, if add suffix -State, then return <a href=\"#../functions/bitmap_functions/\">bitmap object</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitmapAnd</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt64</code> type.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"k\">TABLE</span> <span class=\"k\">IF</span> <span class=\"k\">EXISTS</span> <span class=\"n\">bitmap_column_expr_test2</span><span class=\"p\">;</span>\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">bitmap_column_expr_test2</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">tag_id</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">z</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">groupBitmap</span><span class=\"p\">,</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">tag_id</span><span class=\"p\">;</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag1&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag2&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">");
            
            document.write("([</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag3&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">([</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">groupBitmapAnd</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">WHERE</span> <span class=\"k\">like</span><span class=\"p\">(</span><span class=\"n\">tag_id</span><span class=\"p\">,</span> <span class=\"s1\">&#39;tag%&#39;</span><span class=\"p\">);</span>\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">groupBitmapAnd</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>               <span class=\"mi\">3</span>   <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">(</span><span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">groupBitmapAndState</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)))</span> <span class=\"k\">FROM</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">WHERE</span> <span class=\"k\">like</span><span class=\"p\">(</span><span class=\"n\">tag_id</span><span class=\"p\">,</span> <span class=\"s1\">&#39;tag%&#39;</span><span class=\"p\">);</span>\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">arraySort</span><span class=\"p\">(</span><span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">groupBitmapAndState</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">]</span>                                         <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"groupbitmapor\">groupBitmapOr<a class=\"headerlink\" href=\"#groupbitmapor\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculations the OR of a bitmap column, return cardinality of type UInt64, if add suffix -State, then return <a href=\"#../functions/bitmap_functions/\">bitmap object</a>. This is equivalent to <code>groupBitmapMerge</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitmapOr</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt64</code> type.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"k\">TABLE</span> <span class=\"k\">IF</span> <span class=\"k\">EXISTS</span> <span class=\"n\">bitmap_column_expr_test2</span><span class=\"p\">;</span>\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">bitmap_column_expr_test2</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">tag_id</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">z</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">groupBitmap</span><span class=\"p\">,</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">tag_id</span><span class=\"p\">;</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag1&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag2&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">([</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag3&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">([</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">groupBitmapOr</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">WHERE</span> <span class=\"k\">like</span><span class=\"p\">(</span><span class=\"n\">tag_id</span><span class=\"p\">,</span> <span class=\"s1\">&#39;tag%&#39;</span><span class=\"p\">);</span>\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">groupBitmapOr</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>             <span class=\"mi\">15</span>   <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">(</span><span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">groupBitmapOrState</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)))</span> <span class=\"k\">FROM</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">WHERE</span> <span class=\"k\">like</span><span class=\"p\">(</span><span class=\"n\">tag_id</span><span class=\"p\">,</span> <span class=\"s1\">&#39;tag%&#39;</span><span class=\"p\">);</span>\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">arraySort</span><span class=\"p\">(</span><span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">groupBitmapOrState</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">]</span>           <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"groupbitmapxor\">groupBitmapXor<a class=\"headerlink\" href=\"#groupb");
            
            document.write("itmapxor\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculations the XOR of a bitmap column, return cardinality of type UInt64, if add suffix -State, then return <a href=\"#../functions/bitmap_functions/\">bitmap object</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitmapOr</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt64</code> type.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"k\">TABLE</span> <span class=\"k\">IF</span> <span class=\"k\">EXISTS</span> <span class=\"n\">bitmap_column_expr_test2</span><span class=\"p\">;</span>\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">bitmap_column_expr_test2</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">tag_id</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">z</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">groupBitmap</span><span class=\"p\">,</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">tag_id</span><span class=\"p\">;</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag1&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag2&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">([</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;tag3&#39;</span><span class=\"p\">,</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"k\">cast</span><span class=\"p\">([</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt32</span><span class=\"p\">))));</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">groupBitmapXor</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">WHERE</span> <span class=\"k\">like</span><span class=\"p\">(</span><span class=\"n\">tag_id</span><span class=\"p\">,</span> <span class=\"s1\">&#39;tag%&#39;</span><span class=\"p\">);</span>\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">groupBitmapXor</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span>              <span class=\"mi\">10</span>   <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">(</span><span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">groupBitmapXorState</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)))</span> <span class=\"k\">FROM</span> <span class=\"n\">bitmap_column_expr_test2</span> <span class=\"k\">WHERE</span> <span class=\"k\">like</span><span class=\"p\">(</span><span class=\"n\">tag_id</span><span class=\"p\">,</span> <span class=\"s1\">&#39;tag%&#39;</span><span class=\"p\">);</span>\n<span class=\"err\">\u250c\u2500</span><span class=\"n\">arraySort</span><span class=\"p\">(</span><span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">groupBitmapXorState</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)))</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">]</span>                       <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p><a name=\"../query_language/agg_functions/combinators/\"></a><a name=\"../agg_functions/combinators/\"></a><a name=\"../../../../query_language/agg_functions/combinators/\"></a><a name=\"agg_functions/combinators/\"></a><a name=\"../../query_language/agg_functions/combinators/\"></a><a name=\"../../../../../query_language/agg_functions/combinators/\"></a><a name=\"query_language/agg_functions/combinators/\"></a><a name=\"../../../../agg_functions/combinators/\"></a><a name=\"../../../query_language/agg_functions/combinators/\"></a><a name=\"../../../agg_functions/combinators/\"></a><a name=\"../../../../../../agg_functions/combinators/\"></a><a name=\"../../agg_functions/combinators/\"></a><a name=\"combinators/\"></a><a name=\"../../../../../agg_functions/combinators/\"></a></p>\n<h2 id=\"aggregate_functions_combinators\">Aggregate function combinators<a class=\"headerlink\" href=\"#aggregate_functions_combinators\" title=\"Permanent link\">&para;</a></h2>\n<p>The name of an aggregate function can have a suffix appended to it. This changes the way the aggregate function works.</p>\n<h3 id=\"agg-functions-combinator-if\">-If<a class=\"headerlink\" href=\"#agg-functions-combinator-if\" title=\"Permanent link\">&para;</a></h3>\n<p>The suffix -If can be appended to the name of any aggregate function. In this case, the aggregate function accepts an extra argument \u2013 a condition (Uint8 type). The aggregate function processes only the rows that trigger the condition. If the condition was not triggered even once, it returns a default value (usually zeros or empty strings).</p>\n<p>Examples: <code>sumIf(column, cond)</code>, <code>countIf(cond)</code>, <code>avgIf(x, cond)</code>, <code>quantilesTimingIf(level1, level2)(x, cond)</code>, <code>argMinIf(arg, val, cond)</code> and so on.</p>\n<p>With conditional aggregate functions, you can calculate aggregates for several conditions at once, without using subqueries and <code>JOIN</code>s. For example, in Yandex.Metrica, conditional aggregate functions are used to implement the segment comparison functionality.</p>\n<h3 id=\"agg-functions-combinator-array\">-Array<a class=\"headerlink\" href=\"#agg-functions-combinator-array\" title=\"Permanent link\">&para;</a></h3>\n<p>The -Array suffix can be appended to any aggregate function. In this case, the aggregate function takes arguments of the 'Array(T)' type (arrays) instead of 'T' type arguments. If the aggregate function accepts multiple arguments, this must be arrays of equal lengths. When processing arrays, the aggregate function works like the original aggregate function across all array elements.</p>\n<p>Example 1: <code>sumArray(arr)</code> - Totals all the elements of all 'arr' arrays. In this example, it could have been written more simply: <code>sum(arraySum(arr))</code>.</p>\n<p>Example 2: <code>uniqArray(arr)</code> \u2013 Counts the number of unique elements in all 'arr' arrays. This could be done an easier way: <code>uniq(arrayJoin(arr))</code>, but it's not always possible to add 'arrayJoin' to a query.</p>\n<p>-If and -Array can be combined. However, 'Array' must come first, then 'If'. Examples: <code>uniqArrayIf(arr, cond)</code>, <code>quantilesTimingArrayIf(level1, level2)(arr, cond)</code>. Due to this order, the 'cond' argument won't be an array.</p>\n<h3 id=\"agg-functions-combinator-state\">-State<a class=\"headerlink\" href=\"#agg-functions-combinator-state\" title=\"Permanent link\">&para;</a></h3>\n<p>If you apply this combinator, the aggregate function doesn't return the resulting value (such as the number of unique values for the <a href=\"#agg_function-uniq\">uniq</a> function), but an intermediate state of the aggregation (for <code>uniq</code>, this is the hash table for calculating the number of unique values). This is an <code>Aggrega");
            
            document.write("teFunction(...)</code> that can be used for further processing or stored in a table to finish aggregating later.</p>\n<p>To work with these states, use:</p>\n<ul>\n<li><a href=\"#../../operations/table_engines/aggregatingmergetree/\">AggregatingMergeTree</a> table engine.</li>\n<li><a href=\"#function-finalizeaggregation\">finalizeAggregation</a> function.</li>\n<li><a href=\"#function-runningaccumulate\">runningAccumulate</a> function.</li>\n<li><a href=\"#aggregate_functions_combinators_merge\">-Merge</a> combinator.</li>\n<li><a href=\"#aggregate_functions_combinators_mergestate\">-MergeState</a> combinator.</li>\n</ul>\n<h3 id=\"aggregate_functions_combinators_merge\">-Merge<a class=\"headerlink\" href=\"#aggregate_functions_combinators_merge\" title=\"Permanent link\">&para;</a></h3>\n<p>If you apply this combinator, the aggregate function takes the intermediate aggregation state as an argument, combines the states to finish aggregation, and returns the resulting value.</p>\n<h3 id=\"aggregate_functions_combinators_mergestate\">-MergeState<a class=\"headerlink\" href=\"#aggregate_functions_combinators_mergestate\" title=\"Permanent link\">&para;</a></h3>\n<p>Merges the intermediate aggregation states in the same way as the -Merge combinator. However, it doesn't return the resulting value, but an intermediate aggregation state, similar to the -State combinator.</p>\n<h3 id=\"agg-functions-combinator-foreach\">-ForEach<a class=\"headerlink\" href=\"#agg-functions-combinator-foreach\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts an aggregate function for tables into an aggregate function for arrays that aggregates the corresponding array items and returns an array of results. For example, <code>sumForEach</code> for the arrays <code>[1, 2]</code>, <code>[3, 4, 5]</code>and<code>[6, 7]</code>returns the result <code>[10, 13, 5]</code> after adding together the corresponding array items.</p>\n<h3 id=\"agg-functions-combinator-ordefault\">-OrDefault<a class=\"headerlink\" href=\"#agg-functions-combinator-ordefault\" title=\"Permanent link\">&para;</a></h3>\n<p>Fills the default value of the aggregate function's return type if there is nothing to aggregate.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"nb\">number</span><span class=\"p\">),</span> <span class=\"n\">avgOrDefault</span><span class=\"p\">(</span><span class=\"nb\">number</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500avg(number)\u2500\u252c\u2500avgOrDefault(number)\u2500\u2510\n\u2502         nan \u2502                    0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"agg-functions-combinator-ornull\">-OrNull<a class=\"headerlink\" href=\"#agg-functions-combinator-ornull\" title=\"Permanent link\">&para;</a></h3>\n<p>Fills <code>null</code> if there is nothing to aggregate. The return column will be nullable.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"nb\">number</span><span class=\"p\">),</span> <span class=\"n\">avgOrNull</span><span class=\"p\">(</span><span class=\"nb\">number</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500avg(number)\u2500\u252c\u2500avgOrNull(number)\u2500\u2510\n\u2502         nan \u2502              \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>-OrDefault and -OrNull can be combined with other combinators. It is useful when the aggregate function does not accept the empty input.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">avgOrNullIf</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">x</span> <span class=\"o\">&gt;</span> <span class=\"mi\">10</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">23</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500avgOrNullIf(x, greater(x, 10))\u2500\u2510\n\u2502                           \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"agg_functions-combinator-resample\">-Resample<a class=\"headerlink\" href=\"#agg_functions-combinator-resample\" title=\"Permanent link\">&para;</a></h3>\n<p>Lets you divide data into groups, and then separately aggregates the data in those groups. Groups are created by splitting the values from one column into intervals.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"o\">&lt;</span><span class=\"n\">aggFunction</span><span class=\"o\">&gt;</span><span class=\"n\">Resample</span><span class=\"p\">(</span><span class=\"k\">start</span><span class=\"p\">,</span> <span class=\"k\">end</span><span class=\"p\">,</span> <span class=\"n\">step</span><span class=\"p\">)(</span><span class=\"o\">&lt;</span><span class=\"n\">aggFunction_params</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">resampling_key</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>start</code> \u2014 Starting value of the whole required interval for <code>resampling_key</code> values.</li>\n<li><code>stop</code> \u2014 Ending value of the whole required interval for <code>resampling_key</code> values. The whole interval doesn't include the <code>stop</code> value <code>[start, stop)</code>.</li>\n<li><code>step</code> \u2014 Step for separating the whole interval into subintervals. The <code>aggFunction</code> is executed over each of those subintervals independently.</li>\n<li><code>resampling_key</code> \u2014 Column whose values are used for separating data into intervals.</li>\n<li><code>aggFunction_params</code> \u2014 <code>aggFunction</code> parameters.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Array of <code>aggFunction</code> results for each subinterval.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Consider the <code>people</code> table with the following data:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u252c\u2500age\u2500\u252c\u2500wage\u2500\u2510\n\u2502 John   \u2502  16 \u2502   10 \u2502\n\u2502 Alice  \u2502  30 \u2502   15 \u2502\n\u2502 Mary   \u2502  35 \u2502    8 \u2502\n\u2502 Evelyn \u2502  48 \u2502 11.5 \u2502\n\u2502 David  \u2502  62 \u2502  9.9 \u2502\n\u2502 Brian  \u2502  60 \u2502   16 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Let's get the names of the people whose age lies in the intervals of <code>[30,60)</code> and <code>[60,75)</code>. Since we use integer representation for age, we get ages in the <code>[30, 59]</code> and <code>[60,74]</code> intervals.</p>\n<p>To aggregate names in an array, we use the <a href=\"#agg_function-grouparray\">groupArray</a> aggregate function. It takes one argument. In our case, it's the <code>name</code> column. The <code>groupArrayResample</code> function should use the <code>age</code> column to aggregate names by age. To define the required intervals, we pass the <code>30, 75, 30</code> arguments into the <code>groupArrayResample</code> function.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupArrayResample</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">75</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">)(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">people</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500groupArrayResample(30, 75, 30)(name, age)\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [[&#39;Alice&#39;,&#39;Mary&#39;,&#39;Evelyn&#39;],[&#39;David&#39;,&#39;Brian&#39;]] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Consider the results.</p>\n<p><code>Jonh</code> is out of the sample because he's too young. Other people are distributed according to the specified age intervals.</p>\n<p>Now let's count the total number of people and their average wage in the specified age intervals.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">countResample</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">75</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">)(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">amount</span><span class=\"p\">,</span>\n    <span class=\"n\">avgResample</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">75</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">)(</span><span class=\"n\">wage</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">avg_wage</span>\n<span class=\"k\">FROM</span> <span class=\"n\">people</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500amount\u2500\u252c\u2500avg_wage\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [3,2]  \u2502 [11.5,12.949999809265137] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../agg_functions/parametric_functions/\"></a><a name=\"query_language/agg_functions/parametric_functions/\"></a><a name=\"../query_language/agg_functions/parametric_functions/\"></a><a name=\"../../../../agg_functions/parametric_functions/\"></a><a name=\"../../../../../agg_functions/parametric_functions/\"></a><a name=\"../../../query_language/agg_functions/parametric_functions/\"></a><a name=\"../../../../../query_language/agg_functions/parametric_functions/\"></a><a name=\"agg_functions/parametric_functions/\"></a><a name=\"../../agg_functions/parametric_functions/\"></a><a name=\"../../../../../../agg_functions/parametric_functions/\"></a><a name=\"../../../../que");
            
            document.write("ry_language/agg_functions/parametric_functions/\"></a><a name=\"parametric_functions/\"></a><a name=\"../../query_language/agg_functions/parametric_functions/\"></a><a name=\"../../../agg_functions/parametric_functions/\"></a></p>\n<h2 id=\"aggregate_functions_parametric\">Parametric aggregate functions<a class=\"headerlink\" href=\"#aggregate_functions_parametric\" title=\"Permanent link\">&para;</a></h2>\n<p>Some aggregate functions can accept not only argument columns (used for compression), but a set of parameters \u2013 constants for initialization. The syntax is two pairs of brackets instead of one. The first is for parameters, and the second is for arguments.</p>\n<h3 id=\"histogram\">histogram<a class=\"headerlink\" href=\"#histogram\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates an adaptive histogram. It doesn't guarantee precise results.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"n\">number_of_bins</span><span class=\"p\">)(</span><span class=\"k\">values</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The functions uses <a href=\"http://jmlr.org/papers/volume11/ben-haim10a/ben-haim10a.pdf\" rel=\"external nofollow noreferrer\">A Streaming Parallel Decision Tree Algorithm</a>. The borders of histogram bins are adjusted as new data enters a function. In common case, the widths of bins are not equal.</p>\n<p><strong>Parameters</strong></p>\n<p><code>number_of_bins</code> \u2014 Upper limit for the number of bins in the histogram. The function automatically calculates the number of bins. It tries to reach the specified number of bins, but if it fails, it uses fewer bins.<br />\n<code>values</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> resulting in input values.</p>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>\n<p><a href=\"#../../data_types/array/\">Array</a> of <a href=\"#../../data_types/tuple/\">Tuples</a> of the following format:</p>\n<p><code>[(lower_1, upper_1, height_1), ... (lower_N, upper_N, height_N)]</code></p>\n<ul>\n<li><code>lower</code> \u2014 Lower bound of the bin.</li>\n<li><code>upper</code> \u2014 Upper bound of the bin.</li>\n<li><code>height</code> \u2014 Calculated height of the bin.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)(</span><span class=\"nb\">number</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span> \n<span class=\"k\">FROM</span> <span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"o\">*</span> \n    <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span> \n    <span class=\"k\">LIMIT</span> <span class=\"mi\">20</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500histogram(5)(plus(number, 1))\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [(1,4.5,4),(4.5,8.5,4),(8.5,12.75,4.125),(12.75,17,4.625),(17,20,3.25)] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>You can visualize a histogram with the <a href=\"#function-bar\">bar</a> function, for example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span> <span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)(</span><span class=\"n\">rand</span><span class=\"p\">()</span> <span class=\"o\">%</span> <span class=\"mi\">100</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">hist</span>\n<span class=\"k\">SELECT</span> \n    <span class=\"n\">arrayJoin</span><span class=\"p\">(</span><span class=\"n\">hist</span><span class=\"p\">).</span><span class=\"mi\">3</span> <span class=\"k\">AS</span> <span class=\"n\">height</span><span class=\"p\">,</span> \n    <span class=\"n\">bar</span><span class=\"p\">(</span><span class=\"n\">height</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">bar</span>\n<span class=\"k\">FROM</span> \n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n    <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span>\n    <span class=\"k\">LIMIT</span> <span class=\"mi\">20</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500height\u2500\u252c\u2500bar\u2500\u2500\u2500\u2510\n\u2502  2.125 \u2502 \u2588\u258b    \u2502\n\u2502   3.25 \u2502 \u2588\u2588\u258c   \u2502\n\u2502  5.625 \u2502 \u2588\u2588\u2588\u2588\u258f \u2502\n\u2502  5.625 \u2502 \u2588\u2588\u2588\u2588\u258f \u2502\n\u2502  3.375 \u2502 \u2588\u2588\u258c   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>In this case, you should remember that you don't know the histogram bin borders.</p>\n<h3 id=\"function-sequencematch\">sequenceMatch(pattern)(timestamp, cond1, cond2, ...)<a class=\"headerlink\" href=\"#function-sequencematch\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether the sequence contains an event chain that matches the pattern.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">sequenceMatch</span><span class=\"p\">(</span><span class=\"n\">pattern</span><span class=\"p\">)(</span><span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"n\">cond1</span><span class=\"p\">,</span> <span class=\"n\">cond2</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Events that occur at the same second may lay in the sequence in an undefined order affecting the result.</p>\n</div>\n<p><strong>Parameters</strong></p>\n<ul>\n<li>\n<p><code>pattern</code> \u2014 Pattern string. See <a href=\"#sequence-function-pattern-syntax\">Pattern syntax</a>.</p>\n</li>\n<li>\n<p><code>timestamp</code> \u2014 Column considered to contain time data. Typical data types are <code>Date</code> and <code>DateTime</code>. You can also use any of the supported <a href=\"#../../data_types/int_uint/\">UInt</a> data types.</p>\n</li>\n<li>\n<p><code>cond1</code>, <code>cond2</code> \u2014 Conditions that describe the chain of events. Data type: <code>UInt8</code>. You can pass up to 32 condition arguments. The function takes only the events described in these conditions into account. If the sequence contains data that isn't described in a condition, the function skips them.</p>\n</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>1, if the pattern is matched.</li>\n<li>0, if the pattern isn't matched.</li>\n</ul>\n<p>Type: <code>UInt8</code>.</p>\n<p><a name=\"sequence-function-pattern-syntax\"></a><br />\n<strong>Pattern syntax</strong></p>\n<ul>\n<li>\n<p><code>(?N)</code> \u2014 Matches the condition argument at position <code>N</code>. Conditions are numbered in the <code>[1, 32]</code> range. For example, <code>(?1)</code> matches the argument passed to the <code>cond1</code> parameter.</p>\n</li>\n<li>\n<p><code>.*</code> \u2014 Matches any number of events. You don't need conditional arguments to match this element of the pattern.</p>\n</li>\n<li>\n<p><code>(?t operator value)</code> \u2014 Sets the time in seconds that should separate two events. For example, pattern <code>(?1)(?t&gt;1800)(?2)</code> matches events that occur more than 1800 seconds from each other. An arbitrary number of any events can lay between these events. You can use the <code>&gt;=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&lt;=</code> operators.</p>\n</li>\n</ul>\n<p><strong>Examples</strong></p>\n<p>Consider data in the <code>t</code> table:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500time\u2500\u252c\u2500number\u2500\u2510\n\u2502    1 \u2502      1 \u2502\n\u2502    2 \u2502      3 \u2502\n\u2502    3 \u2502      2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Perform the query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">sequenceMatch</span><span class=\"p\">(</span><span class=\"s1\">&#39;(?1)(?2)&#39;</span><span class=\"p\">)(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500sequenceMatch(&#39;(?1)(?2)&#39;)(time, equals(number, 1), equals(number, 2))\u2500\u2510\n\u2502                                                                     1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The function found the event chain where number 2 follows number 1. It skipped number 3 between them, because the number is not described as an event. If we want to take this number into account when searching for the event chain given in the example, we should make a condition for it.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">sequenceMatch</span><span class=\"p\">(</span><span class=\"s1\">&#39;(?1)(?2)&#39;</span><span class=\"p\">)(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500sequenceMatch(&#39;(?1)(?2)&#39;)(time, equals(number, 1), equals(number, 2), equals(number, 3))\u2500\u2510\n\u2502                                                                                        0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>In this case, the function couldn't find the event chain matching the pattern, because the event for number 3 occured between 1 and 2. If in the same case we checked the condition for number 4, the sequence would match the pattern.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">sequenceM");
            
            document.write("atch</span><span class=\"p\">(</span><span class=\"s1\">&#39;(?1)(?2)&#39;</span><span class=\"p\">)(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500sequenceMatch(&#39;(?1)(?2)&#39;)(time, equals(number, 1), equals(number, 2), equals(number, 4))\u2500\u2510\n\u2502                                                                                        1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#function-sequencecount\">sequenceCount</a></li>\n</ul>\n<h3 id=\"function-sequencecount\">sequenceCount(pattern)(time, cond1, cond2, ...)<a class=\"headerlink\" href=\"#function-sequencecount\" title=\"Permanent link\">&para;</a></h3>\n<p>Counts the number of event chains that matched the pattern. The function searches event chains that don't overlap. It starts to search for the next chain after the current chain is matched.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Events that occur at the same second may lay in the sequence in an undefined order affecting the result.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">sequenceCount</span><span class=\"p\">(</span><span class=\"n\">pattern</span><span class=\"p\">)(</span><span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"n\">cond1</span><span class=\"p\">,</span> <span class=\"n\">cond2</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li>\n<p><code>pattern</code> \u2014 Pattern string. See <a href=\"#sequence-function-pattern-syntax\">Pattern syntax</a>.</p>\n</li>\n<li>\n<p><code>timestamp</code> \u2014 Column considered to contain time data. Typical data types are <code>Date</code> and <code>DateTime</code>. You can also use any of the supported <a href=\"#../../data_types/int_uint/\">UInt</a> data types.</p>\n</li>\n<li>\n<p><code>cond1</code>, <code>cond2</code> \u2014 Conditions that describe the chain of events. Data type: <code>UInt8</code>. You can pass up to 32 condition arguments. The function takes only the events described in these conditions into account. If the sequence contains data that isn't described in a condition, the function skips them.</p>\n</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Number of non-overlapping event chains that are matched.</li>\n</ul>\n<p>Type: <code>UInt64</code>.</p>\n<p><strong>Example</strong></p>\n<p>Consider data in the <code>t</code> table:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500time\u2500\u252c\u2500number\u2500\u2510\n\u2502    1 \u2502      1 \u2502\n\u2502    2 \u2502      3 \u2502\n\u2502    3 \u2502      2 \u2502\n\u2502    4 \u2502      1 \u2502\n\u2502    5 \u2502      3 \u2502\n\u2502    6 \u2502      2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Count how many times the number 2 occurs after the number 1 with any amount of other numbers between them:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">sequenceCount</span><span class=\"p\">(</span><span class=\"s1\">&#39;(?1).*(?2)&#39;</span><span class=\"p\">)(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500sequenceCount(&#39;(?1).*(?2)&#39;)(time, equals(number, 1), equals(number, 2))\u2500\u2510\n\u2502                                                                       2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#function-sequencematch\">sequenceMatch</a></li>\n</ul>\n<h3 id=\"windowfunnel-window-timestamp-cond1-cond2-cond3\">windowFunnel(window)(timestamp, cond1, cond2, cond3, ...)<a class=\"headerlink\" href=\"#windowfunnel-window-timestamp-cond1-cond2-cond3\" title=\"Permanent link\">&para;</a></h3>\n<p>Searches for event chains in a sliding time window and calculates the maximum number of events that occurred from the chain.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">windowFunnel(window)(timestamp, cond1, cond2, cond3, ...)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>window</code> \u2014 Length of the sliding window in seconds.</li>\n<li><code>timestamp</code> \u2014 Name of the column containing the timestamp. Data types supported: <code>Date</code>, <code>DateTime</code>, and other unsigned integer types (note that even though timestamp supports the <code>UInt64</code> type, it's value can't exceed the Int64 maximum, which is 2^63 - 1).</li>\n<li><code>cond1</code>, <code>cond2</code>... \u2014 Conditions or data describing the chain of events. Data type: <code>UInt8</code>. Values can be 0 or 1.</li>\n</ul>\n<p><strong>Algorithm</strong></p>\n<ul>\n<li>The function searches for data that triggers the first condition in the chain and sets the event counter to 1. This is the moment when the sliding window starts.</li>\n<li>If events from the chain occur sequentially within the window, the counter is incremented. If the sequence of events is disrupted, the counter isn't incremented.</li>\n<li>If the data has multiple event chains at varying points of completion, the function will only output the size of the longest chain.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>Integer. The maximum number of consecutive triggered conditions from the chain within the sliding time window. All the chains in the selection are analyzed.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Determine if one hour is enough for the user to select a phone and purchase it in the online store.</p>\n<p>Set the following chain of events:</p>\n<ol>\n<li>The user logged in to their account on the store (<code>eventID=1001</code>).</li>\n<li>The user searches for a phone (<code>eventID = 1003, product = 'phone'</code>).</li>\n<li>The user placed an order (<code>eventID = 1009</code>).</li>\n</ol>\n<p>To find out how far the user <code>user_id</code> could get through the chain in an hour in January of 2017, make the query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">level</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">user_id</span><span class=\"p\">,</span>\n        <span class=\"n\">windowFunnel</span><span class=\"p\">(</span><span class=\"mi\">3600</span><span class=\"p\">)(</span><span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"n\">eventID</span> <span class=\"o\">=</span> <span class=\"mi\">1001</span><span class=\"p\">,</span> <span class=\"n\">eventID</span> <span class=\"o\">=</span> <span class=\"mi\">1003</span> <span class=\"k\">AND</span> <span class=\"n\">product</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;phone&#39;</span><span class=\"p\">,</span> <span class=\"n\">eventID</span> <span class=\"o\">=</span> <span class=\"mi\">1009</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">level</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">trend_event</span>\n    <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">event_date</span> <span class=\"o\">&gt;=</span> <span class=\"s1\">&#39;2017-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">event_date</span> <span class=\"o\">&lt;=</span> <span class=\"s1\">&#39;2017-01-31&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">user_id</span>\n<span class=\"p\">)</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">level</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">level</span>\n</code></pre></div>\n\n\n<p>Simply, the level value could only be 0, 1, 2, 3, it means the maxium event action stage that one user could reach.</p>\n<h3 id=\"retention-cond1-cond2\">retention(cond1, cond2, ...)<a class=\"headerlink\" href=\"#retention-cond1-cond2\" title=\"Permanent link\">&para;</a></h3>\n<p>Retention refers to the ability of a company or product to retain its customers over some specified periods.</p>\n<p><code>cond1</code>, <code>cond2</code> ... is from one to 32 arguments of type UInt8 that indicate whether a certain condition was met for the event</p>\n<p>Example:</p>\n<p>Consider you are doing a website analytics, intend to calculate the retention of customers</p>\n<p>This could be easily calculate by <code>retention</code></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">r1</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">r2</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">r3</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">uid</span><span class=\"p\">,</span>\n        <span class=\"n\">retention</span><span class=\"p\">(</span><span class=\"nb\">date</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2018-08-10&#39;</span><spa");
            
            document.write("n class=\"p\">,</span> <span class=\"nb\">date</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2018-08-11&#39;</span><span class=\"p\">,</span> <span class=\"nb\">date</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2018-08-12&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">r</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">events</span>\n    <span class=\"k\">WHERE</span> <span class=\"nb\">date</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;2018-08-10&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2018-08-11&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2018-08-12&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">uid</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Simply, <code>r1</code> means the number of unique visitors who met the <code>cond1</code> condition, <code>r2</code> means the number of unique visitors who met <code>cond1</code> and <code>cond2</code> conditions, <code>r3</code> means the number of unique visitors who met <code>cond1</code> and <code>cond3</code> conditions.</p>\n<h3 id=\"uniqupto-n-x\">uniqUpTo(N)(x)<a class=\"headerlink\" href=\"#uniqupto-n-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the number of different argument values \u200b\u200bif it is less than or equal to N. If the number of different argument values is greater than N, it returns N + 1.</p>\n<p>Recommended for use with small Ns, up to 10. The maximum value of N is 100.</p>\n<p>For the state of an aggregate function, it uses the amount of memory equal to 1 + N * the size of one value of bytes.<br />\nFor strings, it stores a non-cryptographic hash of 8 bytes. That is, the calculation is approximated for strings.</p>\n<p>The function also works for several arguments.</p>\n<p>It works as fast as possible, except for cases when a large N value is used and the number of unique values is slightly less than N.</p>\n<p>Usage example:</p>\n<div class=\"codehilite\"><pre><span></span><code>Problem: Generate a report that shows only keywords that produced at least 5 unique users.\nSolution: Write in the GROUP BY query SearchPhrase HAVING uniqUpTo(4)(UserID) &gt;= 5\n</code></pre></div>\n\n\n<h3 id=\"summapfiltered-keys-to-keep-keys-values\">sumMapFiltered(keys_to_keep)(keys, values)<a class=\"headerlink\" href=\"#summapfiltered-keys-to-keep-keys-values\" title=\"Permanent link\">&para;</a></h3>\n<p>Same behavior as <a href=\"#agg_functions-summap\">sumMap</a> except that an array of keys is passed as a parameter. This can be especially useful when working with a high cardinality of keys.<br />\n<a name=\"../../query_language/table_functions/\"></a><a name=\"query_language/table_functions/\"></a><a name=\"../query_language/table_functions/\"></a><a name=\"table_functions/\"></a><a name=\"../../../../../query_language/table_functions/\"></a><a name=\"../../../query_language/table_functions/\"></a><a name=\"../../../../query_language/table_functions/\"></a></p>\n<h2 id=\"table-functions\">Table Functions<a class=\"headerlink\" href=\"#table-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Table functions are methods for constructing tables.</p>\n<p>You can use table functions in:</p>\n<ul>\n<li>\n<p><a href=\"#create-table-query\">CREATE TABLE AS <table_function()></a> query.</p>\n<p>It's one of the methods of creating a table.</p>\n</li>\n<li>\n<p><a href=\"#select-from\">FROM</a> clause of the <code>SELECT</code> query.</p>\n<p>The method for creating a temporary table that is available only in the current query. The table is deleted when the query finishes.</p>\n</li>\n</ul>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>You can't use table functions if the <a href=\"#settings_allow_ddl\">allow_ddl</a> setting is disabled.</p>\n</div>\n<p>Function | Description<br />\n<a name=\"../../../../../table_functions/file/\"></a><a name=\"../../../table_functions/file/\"></a><a name=\"file/\"></a><a name=\"../../../../../query_language/table_functions/file/\"></a><a name=\"../../../query_language/table_functions/file/\"></a><a name=\"../../../../query_language/table_functions/file/\"></a><a name=\"../../table_functions/file/\"></a><a name=\"../../../../table_functions/file/\"></a><a name=\"../../../../../../table_functions/file/\"></a><a name=\"../../query_language/table_functions/file/\"></a><a name=\"query_language/table_functions/file/\"></a><a name=\"../table_functions/file/\"></a><a name=\"table_functions/file/\"></a><a name=\"../query_language/table_functions/file/\"></a></p>\n<h2 id=\"file\">file<a class=\"headerlink\" href=\"#file\" title=\"Permanent link\">&para;</a></h2>\n<p>Creates a table from a file. This table function is similar to <a href=\"#url/\">url</a> and <a href=\"#hdfs/\">hdfs</a> ones.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">file</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">format</span><span class=\"p\">,</span> <span class=\"k\">structure</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Input parameters</strong></p>\n<ul>\n<li><code>path</code> \u2014 The relative path to the file from <a href=\"#server_settings-user_files_path\">user_files_path</a>. Path to file support following globs in readonly mode: <code>*</code>, <code>?</code>, <code>{abc,def}</code> and <code>{N..M}</code> where <code>N</code>, <code>M</code> \u2014 numbers, <code>`'abc', 'def'</code> \u2014 strings.</li>\n<li><code>format</code> \u2014  The <a href=\"#formats\">format</a> of the file.</li>\n<li><code>structure</code> \u2014 Structure of the table. Format <code>'column1_name column1_type, column2_name column2_type, ...'</code>.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>A table with the specified structure for reading or writing data in the specified file.</p>\n<p><strong>Example</strong></p>\n<p>Setting <code>user_files_path</code> and the contents of the file <code>test.csv</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ grep user_files_path /etc/clickhouse-server/config.xml\n    &lt;user_files_path&gt;/var/lib/clickhouse/user_files/&lt;/user_files_path&gt;\n\n$ cat /var/lib/clickhouse/user_files/test.csv\n    <span class=\"m\">1</span>,2,3\n    <span class=\"m\">3</span>,2,1\n    <span class=\"m\">78</span>,43,45\n</code></pre></div>\n\n\n<p>Table from<code>test.csv</code> and selection of the first two rows from it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;test.csv&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;column1 UInt32, column2 UInt32, column3 UInt32&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500column1\u2500\u252c\u2500column2\u2500\u252c\u2500column3\u2500\u2510\n\u2502       1 \u2502       2 \u2502       3 \u2502\n\u2502       3 \u2502       2 \u2502       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- getting the first 10 lines of a table that contains 3 columns of UInt32 type from a CSV file</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;test.csv&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;column1 UInt32, column2 UInt32, column3 UInt32&#39;</span><span class=\"p\">)</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<p><strong>Globs in path</strong></p>\n<p>Multiple path components can have globs. For being processed file should exists and matches to the whole path pattern (not only suffix or prefix).</p>\n<ul>\n<li><code>*</code> \u2014 Substitutes any number of any characters except <code>/</code> including empty string.</li>\n<li><code>?</code> \u2014 Substitutes any single character.</li>\n<li><code>{some_string,another_string,yet_another_one}</code> \u2014 Substitutes any of strings <code>'some_string', 'another_string', 'yet_another_one'</code>.</li>\n<li><code>{N..M}</code> \u2014 Substitutes any number in range from N to M including both borders.</li>\n</ul>\n<p>Constructions with <code>{}</code> are similar to the <a href=\"#../../query_language/table_functions/remote/\">remote table function</a>).</p>\n<p><strong>Example</strong></p>\n<ol>\n<li>Suppose we have several files with the following relative paths:</li>\n</ol>\n<ul>\n<li>'some_dir/some_file_1'</li>\n<li>'some_dir/some_file_2'</li>\n<li>'some_dir/some_file_3'</li>\n<li>'another_dir/some_file_1'</li>\n<li>'another_dir/some_file_2'</li>\n<li>'another_dir/some_file_3'</li>\n</ul>\n<ol start=\"2\">\n<li>Query the amount of rows in these files:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;{some,another}_dir/some_file_{1..3}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<ol start=\"3\">\n<li>Query the amount of rows in all files of these two directories:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;{some,another}_dir/*&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>If your listing of files contains number ranges with leading zeros, use the construction with braces for each digit separately or use <code>?</code>.</p>\n</div>\n<p><strong>Example</strong></p>\n<p>Q");
            
            document.write("uery the data from files named <code>file000</code>, <code>file001</code>, ... , <code>file999</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;big_dir/file{0..9}{0..9}{0..9}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"merge/\"></a><a name=\"../../../../query_language/table_functions/merge/\"></a><a name=\"../query_language/table_functions/merge/\"></a><a name=\"../../../../../query_language/table_functions/merge/\"></a><a name=\"query_language/table_functions/merge/\"></a><a name=\"../../table_functions/merge/\"></a><a name=\"../../../../table_functions/merge/\"></a><a name=\"../../query_language/table_functions/merge/\"></a><a name=\"../../../../../table_functions/merge/\"></a><a name=\"../../../query_language/table_functions/merge/\"></a><a name=\"../../../../../../table_functions/merge/\"></a><a name=\"../table_functions/merge/\"></a><a name=\"table_functions/merge/\"></a><a name=\"../../../table_functions/merge/\"></a></p>\n<h2 id=\"merge_1\">merge<a class=\"headerlink\" href=\"#merge_1\" title=\"Permanent link\">&para;</a></h2>\n<p><code>merge(db_name, 'tables_regexp')</code> \u2013 Creates a temporary Merge table. For more information, see the section \"Table engines, Merge\".</p>\n<p>The table structure is taken from the first table encountered that matches the regular expression.</p>\n<p><a name=\"../query_language/table_functions/numbers/\"></a><a name=\"table_functions/numbers/\"></a><a name=\"../../../query_language/table_functions/numbers/\"></a><a name=\"numbers/\"></a><a name=\"../../../../table_functions/numbers/\"></a><a name=\"../../../../../query_language/table_functions/numbers/\"></a><a name=\"../../query_language/table_functions/numbers/\"></a><a name=\"../../../../../../table_functions/numbers/\"></a><a name=\"../../../../../table_functions/numbers/\"></a><a name=\"../../../../query_language/table_functions/numbers/\"></a><a name=\"../../table_functions/numbers/\"></a><a name=\"../table_functions/numbers/\"></a><a name=\"query_language/table_functions/numbers/\"></a><a name=\"../../../table_functions/numbers/\"></a></p>\n<h2 id=\"numbers\">numbers<a class=\"headerlink\" href=\"#numbers\" title=\"Permanent link\">&para;</a></h2>\n<p><code>numbers(N)</code> \u2013 Returns a table with the single 'number' column (UInt64) that contains integers from 0 to N-1.<br />\n<code>numbers(N, M)</code> - Returns a table with the single 'number' column (UInt64) that contains integers from N to (N + M - 1).</p>\n<p>Similar to the <code>system.numbers</code> table, it can be used for testing and generating successive values, <code>numbers(N, M)</code> more efficient than <code>system.numbers</code>.</p>\n<p>The following queries are equivalent:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">);</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">);</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- Generate a sequence of dates from 2010-01-01 to 2010-12-31</span>\n<span class=\"k\">select</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2010-01-01&#39;</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"nb\">number</span> <span class=\"k\">as</span> <span class=\"n\">d</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">365</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../../table_functions/remote/\"></a><a name=\"../../../../table_functions/remote/\"></a><a name=\"../../query_language/table_functions/remote/\"></a><a name=\"../../table_functions/remote/\"></a><a name=\"../table_functions/remote/\"></a><a name=\"query_language/table_functions/remote/\"></a><a name=\"../../../query_language/table_functions/remote/\"></a><a name=\"../../../../../query_language/table_functions/remote/\"></a><a name=\"../query_language/table_functions/remote/\"></a><a name=\"../../../table_functions/remote/\"></a><a name=\"remote/\"></a><a name=\"../../../../query_language/table_functions/remote/\"></a><a name=\"table_functions/remote/\"></a><a name=\"../../../../../../table_functions/remote/\"></a></p>\n<h2 id=\"remote-remotesecure\">remote, remoteSecure<a class=\"headerlink\" href=\"#remote-remotesecure\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows you to access remote servers without creating a <code>Distributed</code> table.</p>\n<p>Signatures:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">remote</span><span class=\"p\">(</span><span class=\"s1\">&#39;addresses_expr&#39;</span><span class=\"p\">,</span> <span class=\"n\">db</span><span class=\"p\">,</span> <span class=\"k\">table</span><span class=\"p\">[,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">[,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">]])</span>\n<span class=\"n\">remote</span><span class=\"p\">(</span><span class=\"s1\">&#39;addresses_expr&#39;</span><span class=\"p\">,</span> <span class=\"n\">db</span><span class=\"p\">.</span><span class=\"k\">table</span><span class=\"p\">[,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">[,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">]])</span>\n</code></pre></div>\n\n\n<p><code>addresses_expr</code> \u2013 An expression that generates addresses of remote servers. This may be just one server address. The server address is <code>host:port</code>, or just <code>host</code>. The host can be specified as the server name, or as the IPv4 or IPv6 address. An IPv6 address is specified in square brackets. The port is the TCP port on the remote server. If the port is omitted, it uses <code>tcp_port</code> from the server's config file (by default, 9000).</p>\n<div class=\"admonition important\">\n<p class=\"admonition-title\">Important</p>\n<p>The port is required for an IPv6 address.</p>\n</div>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-01-1\nexample01-01-1:9000\nlocalhost\n127.0.0.1\n[::]:9000\n[2a02:6b8:0:1111::11]:9000\n</code></pre></div>\n\n\n<p>Multiple addresses can be comma-separated. In this case, ClickHouse will use distributed processing, so it will send the query to all specified addresses (like to shards with different data).</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-01-1,example01-02-1\n</code></pre></div>\n\n\n<p>Part of the expression can be specified in curly brackets. The previous example can be written as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-0{1,2}-1\n</code></pre></div>\n\n\n<p>Curly brackets can contain a range of numbers separated by two dots (non-negative integers). In this case, the range is expanded to a set of values that generate shard addresses. If the first number starts with zero, the values are formed with the same zero alignment. The previous example can be written as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-{01..02}-1\n</code></pre></div>\n\n\n<p>If you have multiple pairs of curly brackets, it generates the direct product of the corresponding sets.</p>\n<p>Addresses and parts of addresses in curly brackets can be separated by the pipe symbol (|). In this case, the corresponding sets of addresses are interpreted as replicas, and the query will be sent to the first healthy replica. However, the replicas are iterated in the order currently set in the <a href=\"#../../operations/settings/settings/\">load_balancing</a> setting.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-{01..02}-{1|2}\n</code></pre></div>\n\n\n<p>This example specifies two shards that each have two replicas.</p>\n<p>The number of addresses generated is limited by a constant. Right now this is 1000 addresses.</p>\n<p>Using the <code>remote</code> table function is less optimal than creating a <code>Distributed</code> table, because in this case, the server connection is re-established for every request. In addition, if host names are set, the names are resolved, and errors are not counted when working with various replicas. When processing a large number of queries, always create the <code>Distributed</code> table ahead of time, and don't use the <code>remote</code> table function.</p>\n<p>The <code>remote</code> table function can be useful in the following cases:</p>\n<ul>\n<li>Accessing a specific server for data comparison, debugging, and testing.</li>\n<li>Queries between various ClickHouse clusters for research purposes.</li>\n<li>Infrequent distributed requests that are made manually.</li>\n<li>Distributed requests where the set of servers is re-defined each time.</li>\n</ul>\n<p>If the user is not specified, <code>default</code> is used.<br />\nIf the password is not specified, an empty password is used.</p>\n<p><code>remoteSecure</code> - same as <code>remote</code> but with secured connection. Default port \u2014 <a href=\"#server_settings-tcp_port_secure\">tcp_port_secure</a> from config or 9440.</p>\n<p><a name=\"../table_functions/url/\"></a><a name=\"url/\"></a><a name=\"../../../query_language/table_functions/url/\"></a><a name=\"../../../../table_functions/url/\"></a><a name=\"../../query_language/table_functions/url/\"></a><a name=\"../query_language/table_functions/url/\"></a><a name=\"../../../../../table_functions/url/\"></a><a name=\"../../../../../query_language/table_functions/url/\"></a><a name=\"../../table_functions/url/\"></");
            
            document.write("a><a name=\"../../../../../../table_functions/url/\"></a><a name=\"../../../../query_language/table_functions/url/\"></a><a name=\"query_language/table_functions/url/\"></a><a name=\"../../../table_functions/url/\"></a><a name=\"table_functions/url/\"></a></p>\n<h2 id=\"url\">url<a class=\"headerlink\" href=\"#url\" title=\"Permanent link\">&para;</a></h2>\n<p><code>url(URL, format, structure)</code> - returns a table created from the <code>URL</code> with given<br />\n<code>format</code> and <code>structure</code>.</p>\n<p>URL - HTTP or HTTPS server address, which can accept <code>GET</code> and/or <code>POST</code> requests.</p>\n<p>format - <a href=\"#formats\">format</a> of the data.</p>\n<p>structure - table structure in <code>'UserID UInt64, Name String'</code> format. Determines column names and types.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- getting the first 3 lines of a table that contains columns of String and UInt32 type from HTTP-server which answers in CSV format.</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"s1\">&#39;http://127.0.0.1:12345/&#39;</span><span class=\"p\">,</span> <span class=\"n\">CSV</span><span class=\"p\">,</span> <span class=\"s1\">&#39;column1 String, column2 UInt32&#39;</span><span class=\"p\">)</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">3</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../query_language/table_functions/mysql/\"></a><a name=\"../../../../table_functions/mysql/\"></a><a name=\"../query_language/table_functions/mysql/\"></a><a name=\"../../../../../query_language/table_functions/mysql/\"></a><a name=\"table_functions/mysql/\"></a><a name=\"../table_functions/mysql/\"></a><a name=\"../../../../../table_functions/mysql/\"></a><a name=\"../../table_functions/mysql/\"></a><a name=\"../../../table_functions/mysql/\"></a><a name=\"../../query_language/table_functions/mysql/\"></a><a name=\"../../../../../../table_functions/mysql/\"></a><a name=\"query_language/table_functions/mysql/\"></a><a name=\"../../../../query_language/table_functions/mysql/\"></a><a name=\"mysql/\"></a></p>\n<h2 id=\"mysql_2\">mysql<a class=\"headerlink\" href=\"#mysql_2\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows <code>SELECT</code> queries to be performed on data that is stored on a remote MySQL server.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">mysql</span><span class=\"p\">(</span><span class=\"s1\">&#39;host:port&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;database&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">[,</span> <span class=\"n\">replace_query</span><span class=\"p\">,</span> <span class=\"s1\">&#39;on_duplicate_clause&#39;</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>host:port</code> \u2014 MySQL server address.</li>\n<li><code>database</code> \u2014 Remote database name.</li>\n<li><code>table</code> \u2014 Remote table name.</li>\n<li><code>user</code> \u2014 MySQL user.</li>\n<li><code>password</code> \u2014 User password.</li>\n<li><code>replace_query</code> \u2014 Flag that converts <code>INSERT INTO</code> queries to <code>REPLACE INTO</code>. If <code>replace_query=1</code>, the query is replaced.</li>\n<li>\n<p><code>on_duplicate_clause</code> \u2014 The <code>ON DUPLICATE KEY on_duplicate_clause</code> expression that is added to the <code>INSERT</code> query.</p>\n<p>Example: <code>INSERT INTO t (c1,c2) VALUES ('a', 2) ON DUPLICATE KEY UPDATE c2 = c2 + 1</code>, where <code>on_duplicate_clause</code> is <code>UPDATE c2 = c2 + 1</code>. See the MySQL documentation to find which <code>on_duplicate_clause</code> you can use with the <code>ON DUPLICATE KEY</code> clause.</p>\n<p>To specify <code>on_duplicate_clause</code> you need to pass <code>0</code> to the <code>replace_query</code> parameter. If you simultaneously pass <code>replace_query = 1</code> and <code>on_duplicate_clause</code>, ClickHouse generates an exception.</p>\n</li>\n</ul>\n<p>Simple <code>WHERE</code> clauses such as <code>=, !=, &gt;, &gt;=, &lt;, &lt;=</code> are currently executed on the MySQL server.</p>\n<p>The rest of the conditions and the <code>LIMIT</code> sampling constraint are executed in ClickHouse only after the query to MySQL finishes.</p>\n<p><strong>Returned Value</strong></p>\n<p>A table object with the same columns as the original MySQL table.</p>\n<h3 id=\"usage-example_3\">Usage Example<a class=\"headerlink\" href=\"#usage-example_3\" title=\"Permanent link\">&para;</a></h3>\n<p>Table in MySQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+--------------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Selecting data from ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">mysql</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:3306&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;bayonet&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;123&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int_id\u2500\u252c\u2500int_nullable\u2500\u252c\u2500float\u2500\u252c\u2500float_nullable\u2500\u2510\n\u2502      1 \u2502         \u1d3a\u1d41\u1d38\u1d38 \u2502     2 \u2502           \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_3\">See Also<a class=\"headerlink\" href=\"#see-also_3\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#../../operations/table_engines/mysql/\">The 'MySQL' table engine</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-mysql\">Using MySQL as a source of external dictionary</a></li>\n</ul>\n<p><a name=\"../../../../../query_language/table_functions/jdbc/\"></a><a name=\"../query_language/table_functions/jdbc/\"></a><a name=\"table_functions/jdbc/\"></a><a name=\"../../query_language/table_functions/jdbc/\"></a><a name=\"jdbc/\"></a><a name=\"../../table_functions/jdbc/\"></a><a name=\"../table_functions/jdbc/\"></a><a name=\"../../../../../../table_functions/jdbc/\"></a><a name=\"../../../table_functions/jdbc/\"></a><a name=\"../../../query_language/table_functions/jdbc/\"></a><a name=\"../../../../table_functions/jdbc/\"></a><a name=\"../../../../../table_functions/jdbc/\"></a><a name=\"../../../../query_language/table_functions/jdbc/\"></a><a name=\"query_language/table_functions/jdbc/\"></a></p>\n<h2 id=\"table_function-jdbc\">jdbc<a class=\"headerlink\" href=\"#table_function-jdbc\" title=\"Permanent link\">&para;</a></h2>\n<p><code>jdbc(jdbc_connection_uri, schema, table)</code> - returns table that is connected via JDBC driver.</p>\n<p>This table function requires separate <code>clickhouse-jdbc-bridge</code> program to be running.<br />\nIt supports Nullable types (based on DDL of remote table that is queried).</p>\n<p><strong>Examples</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">jdbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;jdbc:mysql://localhost:3306/?user=root&amp;password=root&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;schema&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">jdbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;mysql://localhost:3306/?user=root&amp;password=root&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;schema&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">jdbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;datasource://mysql-local&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;schema&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"../../table_functions/odbc/\"></a><a name=\"odbc/\"></a><a name=\"../table_functions/odbc/\"></a><a name=\"../../../table_functions/odbc/\"></a><a name=\"../query_language/table_functions/odbc/\"></a><a name=\"query_language/table_functions/odbc/\"></a><a name=\"../../../query_language/table_functions/odbc/\"></a><a name=\"../../../../query_language/table_functions/odbc/\"></a><a name=\"../../../../table_functions/odbc/\"></a><a name=\"../../../../../../table_functions/odbc/\"></a><a name=\"../../query_language/table_functions/odbc/\"></a><a name=\"table_functions/odbc/\"></a><a name=\"../../../../../query_language/table_functions/odbc/\"></a><a name=\"../../../../../table_functions/odbc/\"></a></p>\n<h2 id=\"table_functions-odbc\">odbc<a class=\"headerlink\" href=\"#table_functions-odbc\" title=\"Permanent link\">&para;</a></h2>\n<p>Returns table that is connected via <a href=\"https://en.wikipedia.org/wiki/Open_Database_Connectivity\" rel=\"external nofollow noreferrer\">ODBC</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">odbc</span><span class=\"p\">(</span><span class=\"n\">connection_settings</span><span class=\"p\">,</span> <span class=\"n\">external_da");
            
            document.write("tabase</span><span class=\"p\">,</span> <span class=\"n\">external_table</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Parameters:</p>\n<ul>\n<li><code>connection_settings</code> \u2014 Name of the section with connection settings in the <code>odbc.ini</code> file.</li>\n<li><code>external_database</code> \u2014 Name of a database in an external DBMS.</li>\n<li><code>external_table</code> \u2014 Name of a table in the <code>external_database</code>.</li>\n</ul>\n<p>To safely implement ODBC connections, ClickHouse uses a separate program <code>clickhouse-odbc-bridge</code>. If the ODBC driver is loaded directly from <code>clickhouse-server</code>, driver problems can crash the ClickHouse server. ClickHouse automatically starts <code>clickhouse-odbc-bridge</code> when it is required. The ODBC bridge program is installed from the same package as the <code>clickhouse-server</code>.</p>\n<p>The fields with the <code>NULL</code> values from the external table are converted into the default values for the base data type. For example, if a remote MySQL table field has the <code>INT NULL</code> type it is converted to 0 (the default value for ClickHouse <code>Int32</code> data type).</p>\n<h3 id=\"usage-example_4\">Usage example<a class=\"headerlink\" href=\"#usage-example_4\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Getting data from the local MySQL installation via ODBC</strong></p>\n<p>This example is checked for Ubuntu Linux 18.04 and MySQL server 5.7.</p>\n<p>Ensure that unixODBC and MySQL Connector are installed.</p>\n<p>By default (if installed from packages), ClickHouse starts as user <code>clickhouse</code>. Thus you need to create and configure this user in the MySQL server.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo mysql\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">CREATE</span> <span class=\"k\">USER</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"o\">@</span><span class=\"s1\">&#39;localhost&#39;</span> <span class=\"n\">IDENTIFIED</span> <span class=\"k\">BY</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"p\">;</span>\n<span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">GRANT</span> <span class=\"k\">ALL</span> <span class=\"k\">PRIVILEGES</span> <span class=\"k\">ON</span> <span class=\"o\">*</span><span class=\"p\">.</span><span class=\"o\">*</span> <span class=\"k\">TO</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"o\">@</span><span class=\"s1\">&#39;clickhouse&#39;</span> <span class=\"k\">WITH</span> <span class=\"k\">GRANT</span> <span class=\"k\">OPTION</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Then configure the connection in <code>/etc/odbc.ini</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat /etc/odbc.ini\n<span class=\"o\">[</span>mysqlconn<span class=\"o\">]</span>\n<span class=\"nv\">DRIVER</span> <span class=\"o\">=</span> /usr/local/lib/libmyodbc5w.so\n<span class=\"nv\">SERVER</span> <span class=\"o\">=</span> <span class=\"m\">127</span>.0.0.1\n<span class=\"nv\">PORT</span> <span class=\"o\">=</span> <span class=\"m\">3306</span>\n<span class=\"nv\">DATABASE</span> <span class=\"o\">=</span> <span class=\"nb\">test</span>\n<span class=\"nv\">USERNAME</span> <span class=\"o\">=</span> clickhouse\n<span class=\"nv\">PASSWORD</span> <span class=\"o\">=</span> clickhouse\n</code></pre></div>\n\n\n<p>You can check the connection using the <code>isql</code> utility from the unixODBC installation.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ isql -v mysqlconn\n+---------------------------------------+\n<span class=\"p\">|</span> Connected!                            <span class=\"p\">|</span>\n<span class=\"p\">|</span>                                       <span class=\"p\">|</span>\n...\n</code></pre></div>\n\n\n<p>Table in MySQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+--------------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Retrieving data from the MySQL table in ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">odbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;DSN=mysqlconn&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int_id\u2500\u252c\u2500int_nullable\u2500\u252c\u2500float\u2500\u252c\u2500float_nullable\u2500\u2510\n\u2502      1 \u2502            0 \u2502     2 \u2502              0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_4\">See Also<a class=\"headerlink\" href=\"#see-also_4\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#dicts-external_dicts_dict_sources-odbc\">ODBC external dictionaries</a></li>\n<li><a href=\"#../../operations/table_engines/odbc/\">ODBC table engine</a>.</li>\n</ul>\n<p><a name=\"../../../query_language/table_functions/hdfs/\"></a><a name=\"../../../table_functions/hdfs/\"></a><a name=\"../../../../../query_language/table_functions/hdfs/\"></a><a name=\"../../../../query_language/table_functions/hdfs/\"></a><a name=\"../../../../table_functions/hdfs/\"></a><a name=\"hdfs/\"></a><a name=\"../table_functions/hdfs/\"></a><a name=\"../../table_functions/hdfs/\"></a><a name=\"../../../../../table_functions/hdfs/\"></a><a name=\"../query_language/table_functions/hdfs/\"></a><a name=\"../../query_language/table_functions/hdfs/\"></a><a name=\"query_language/table_functions/hdfs/\"></a><a name=\"../../../../../../table_functions/hdfs/\"></a><a name=\"table_functions/hdfs/\"></a></p>\n<h2 id=\"hdfs\">hdfs<a class=\"headerlink\" href=\"#hdfs\" title=\"Permanent link\">&para;</a></h2>\n<p>Creates a table from files in HDFS. This table function is similar to <a href=\"#url/\">url</a> and <a href=\"#file/\">file</a> ones.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"n\">URI</span><span class=\"p\">,</span> <span class=\"n\">format</span><span class=\"p\">,</span> <span class=\"k\">structure</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Input parameters</strong></p>\n<ul>\n<li><code>URI</code> \u2014 The relative URI to the file in HDFS. Path to file support following globs in readonly mode: <code>*</code>, <code>?</code>, <code>{abc,def}</code> and <code>{N..M}</code> where <code>N</code>, <code>M</code> \u2014 numbers, <code>`'abc', 'def'</code> \u2014 strings.</li>\n<li><code>format</code> \u2014  The <a href=\"#formats\">format</a> of the file.</li>\n<li><code>structure</code> \u2014 Structure of the table. Format <code>'column1_name column1_type, column2_name column2_type, ...'</code>.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>A table with the specified structure for reading or writing data in the specified file.</p>\n<p><strong>Example</strong></p>\n<p>Table from <code>hdfs://hdfs1:9000/test</code> and selection of the first two rows from it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;column1 UInt32, column2 UInt32, column3 UInt32&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500column1\u2500\u252c\u2500column2\u2500\u252c\u2500column3\u2500\u2510\n\u2502       1 \u2502       2 \u2502       3 \u2502\n\u2502       3 \u2502       2 \u2502       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>Globs in path</strong></p>\n<p>Multiple path components can have globs. For being processed file should exists and matches to the whole path pattern (not only suffix or prefix).</p>\n<ul>\n<li><code>*</code> \u2014 Substitutes any number of any characters except <code>/</code> including empty string.</li>\n<li><code>?</code> \u2014 Substitutes any single character.</li>\n<li><code>{some_string,another_string,yet_another_one}</code> \u2014 Substitutes any of strings <code>'some_string', 'another_string', 'yet_another_one'</code>.</li>\n<li><code>{N..M}</code> \u2014 Substitutes any number in range from N to M including both borders.</li>\n</ul>\n<p>Constructions with <code>{}</code> are similar to the <a href=\"#../../query_language/table_functions/remote/\">remote table function</a>).</p>\n<p><strong>Example</strong></p>\n<ol>\n<li>Suppose that we have several files with following URIs on HDFS:</li>\n</ol>\n<ul>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_1'</li>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_2'</li>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_3'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_1'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_2'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_3'</li>\n</ul>\n<ol start=\"2\">\n<li>Query the amount of rows in these files:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/some_file_{1..3}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<ol start=\"3\">\n<li>Query the amount of rows in all files of these two directories:</li>\n</ol>\n<d");
            
            document.write("iv class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/*&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>If your listing of files contains number ranges with leading zeros, use the construction with braces for each digit separately or use <code>?</code>.</p>\n</div>\n<p><strong>Example</strong></p>\n<p>Query the data from files named <code>file000</code>, <code>file001</code>, ... , <code>file999</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/big_dir/file{0..9}{0..9}{0..9}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"query_language/table_functions/input/\"></a><a name=\"table_functions/input/\"></a><a name=\"../../table_functions/input/\"></a><a name=\"../../../../../table_functions/input/\"></a><a name=\"../../../../../../table_functions/input/\"></a><a name=\"../../../../query_language/table_functions/input/\"></a><a name=\"../../../../table_functions/input/\"></a><a name=\"../../query_language/table_functions/input/\"></a><a name=\"../../../../../query_language/table_functions/input/\"></a><a name=\"../../../table_functions/input/\"></a><a name=\"../../../query_language/table_functions/input/\"></a><a name=\"input/\"></a><a name=\"../query_language/table_functions/input/\"></a><a name=\"../table_functions/input/\"></a></p>\n<h2 id=\"input\">input<a class=\"headerlink\" href=\"#input\" title=\"Permanent link\">&para;</a></h2>\n<p><code>input(structure)</code> - table function that allows effectively convert and insert data sent to the<br />\nserver with given structure to the table with another structure.</p>\n<p><code>structure</code> - structure of data sent to the server in following format <code>'column1_name column1_type, column2_name column2_type, ...'</code>.<br />\nFor example, <code>'id UInt32, name String'</code>.</p>\n<p>This function can be used only in <code>INSERT SELECT</code> query and only once but otherwise behaves like ordinary table function<br />\n(for example, it can be used in subquery, etc.).</p>\n<p>Data can be sent in any way like for ordinary <code>INSERT</code> query and passed in any available <a href=\"#formats\">format</a><br />\nthat must be specified in the end of query (unlike ordinary <code>INSERT SELECT</code>).</p>\n<p>The main feature of this function is that when server receives data from client it simultaneously converts it<br />\naccording to the list of expressions in the <code>SELECT</code> clause and inserts into the target table. Temporary table<br />\nwith all transferred data is not created.</p>\n<p><strong>Examples</strong></p>\n<ul>\n<li>Let the <code>test</code> table has the following structure <code>(a String, b String)</code><br />\nand data in <code>data.csv</code> has a different structure <code>(col1 String, col2 Date, col3 Int32)</code>. Query for insert<br />\ndata from the <code>data.csv</code> into the <code>test</code> table with simultaneous conversion looks like this:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>$ cat data.csv <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test SELECT lower(col1), col3 * col3 FROM input(&#39;col1 String, col2 Date, col3 Int32&#39;) FORMAT CSV&quot;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<ul>\n<li>If <code>data.csv</code> contains data of the same structure <code>test_structure</code> as the table <code>test</code> then these two queries are equal: </li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>$ cat data.csv <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test FORMAT CSV&quot;</span>\n$ cat data.csv <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test SELECT * FROM input(&#39;test_structure&#39;) FORMAT CSV&quot;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../query_language/dicts/\"></a><a name=\"../../../../query_language/dicts/\"></a><a name=\"../query_language/dicts/\"></a><a name=\"../../../../../query_language/dicts/\"></a><a name=\"query_language/dicts/\"></a><a name=\"dicts/\"></a><a name=\"../../../query_language/dicts/\"></a></p>\n<h2 id=\"dictionaries\">Dictionaries<a class=\"headerlink\" href=\"#dictionaries\" title=\"Permanent link\">&para;</a></h2>\n<p>A dictionary is a mapping (<code>key -&gt; attributes</code>) that is convenient for various types of reference lists.</p>\n<p>ClickHouse supports special functions for working with dictionaries that can be used in queries. It is easier and more efficient to use dictionaries with functions than a <code>JOIN</code> with reference tables.</p>\n<p><a href=\"#null\">NULL</a> values can't be stored in a dictionary.</p>\n<p>ClickHouse supports:</p>\n<ul>\n<li><a href=\"#internal_dicts\">Built-in dictionaries</a> with a specific <a href=\"#../functions/ym_dict_functions/\">set of functions</a>.</li>\n<li><a href=\"#external_dicts/\">Plug-in (external) dictionaries</a> with a <a href=\"#../functions/ext_dict_functions/\">set of functions</a>.</li>\n</ul>\n<p><a name=\"../../dicts/external_dicts/\"></a><a name=\"external_dicts/\"></a><a name=\"../dicts/external_dicts/\"></a><a name=\"../../../../../dicts/external_dicts/\"></a><a name=\"../../../../../../dicts/external_dicts/\"></a><a name=\"../../../dicts/external_dicts/\"></a><a name=\"../query_language/dicts/external_dicts/\"></a><a name=\"query_language/dicts/external_dicts/\"></a><a name=\"../../../query_language/dicts/external_dicts/\"></a><a name=\"../../../../query_language/dicts/external_dicts/\"></a><a name=\"../../../../dicts/external_dicts/\"></a><a name=\"dicts/external_dicts/\"></a><a name=\"../../query_language/dicts/external_dicts/\"></a><a name=\"../../../../../query_language/dicts/external_dicts/\"></a></p>\n<h2 id=\"dicts-external_dicts\">External Dictionaries<a class=\"headerlink\" href=\"#dicts-external_dicts\" title=\"Permanent link\">&para;</a></h2>\n<p>You can add your own dictionaries from various data sources. The data source for a dictionary can be a local text or executable file, an HTTP(s) resource, or another DBMS. For more information, see \"<a href=\"#external_dicts_dict_sources/\">Sources for external dictionaries</a>\".</p>\n<p>ClickHouse:</p>\n<blockquote>\n<ul>\n<li>Fully or partially stores dictionaries in RAM.</li>\n<li>Periodically updates dictionaries and dynamically loads missing values. In other words, dictionaries can be loaded dynamically.</li>\n</ul>\n</blockquote>\n<p>The configuration of external dictionaries is located in one or more files. The path to the configuration is specified in the <a href=\"#server_settings-dictionaries_config\">dictionaries_config</a> parameter.</p>\n<p>Dictionaries can be loaded at server startup or at first use, depending on the <a href=\"#server_settings-dictionaries_lazy_load\">dictionaries_lazy_load</a> setting.</p>\n<p>The dictionary configuration file has the following format:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;comment&gt;</span>An optional element with any content. Ignored by the ClickHouse server.<span class=\"nt\">&lt;/comment&gt;</span>\n\n    <span class=\"c\">&lt;!--Optional element. File name with substitutions--&gt;</span>\n    <span class=\"nt\">&lt;include_from&gt;</span>/etc/metrika.xml<span class=\"nt\">&lt;/include_from&gt;</span>\n\n\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"c\">&lt;!-- Dictionary configuration. --&gt;</span>\n        <span class=\"c\">&lt;!-- There can be any number of &lt;dictionary&gt; sections in the configuration file. --&gt;</span>\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>You can <a href=\"#external_dicts_dict/\">configure</a> any number of dictionaries in the same file.</p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>You can convert values for a small dictionary by describing it in a <code>SELECT</code> query (see the <a href=\"#../functions/other_functions/\">transform</a> function). This functionality is not related to external dictionaries.</p>\n</div>\n<p><strong>See also</strong></p>\n<ul>\n<li><a href=\"#../functions/ext_dict_functions/\">Functions for Working with External Dictionaries</a></li>\n</ul>\n<p><a name=\"../../query_language/dicts/external_dicts_dict/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict/\"></a><a name=\"../dicts/external_dicts_dict/\"></a><a name=\"../../dicts/external_dicts_dict/\"></a><a name=\"../../../query_language/dicts/external_dicts_dict/\"></a><a name=\"../../../dicts/external_dicts_dict/\"></a><a name=\"../../../../../dicts/external_dicts_dict/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict/\"></a><a name=\"../query_language/dicts/external_dicts_dict/\"></a><a name=\"../../../../dicts/external_dicts_dict/\"></a><a name=\"external_dicts_dict/\"></a><a name=\"../../../../../../dicts/external_dicts_dict/\"></a><a name=\"dicts/external_dicts_dict/\"></a><a name=\"query_language/dicts/external_dicts_dict/\"></a></p>\n<h2 id=\"dicts-external_dicts_dict\">Configuring an External Dictionary<a class=\"headerlink\" href=\"#dicts-external_dicts_dict\" title=\"Permanent link\">&para;</a></h2>\n<p>The dictionary configuration has the following structure:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    <span class=\"nt\">&lt;name&gt;</span>dict_name<span class=\"nt\">&lt;/name&gt;</span>\n\n ");
            
            document.write("   <span class=\"nt\">&lt;source&gt;</span>\n      <span class=\"c\">&lt;!-- Source configuration --&gt;</span>\n    <span class=\"nt\">&lt;/source&gt;</span>\n\n    <span class=\"nt\">&lt;layout&gt;</span>\n      <span class=\"c\">&lt;!-- Memory layout configuration --&gt;</span>\n    <span class=\"nt\">&lt;/layout&gt;</span>\n\n    <span class=\"nt\">&lt;structure&gt;</span>\n      <span class=\"c\">&lt;!-- Complex key configuration --&gt;</span>\n    <span class=\"nt\">&lt;/structure&gt;</span>\n\n    <span class=\"nt\">&lt;lifetime&gt;</span>\n      <span class=\"c\">&lt;!-- Lifetime of dictionary in memory --&gt;</span>\n    <span class=\"nt\">&lt;/lifetime&gt;</span>\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<ul>\n<li>name \u2013 The identifier that can be used to access the dictionary. Use the characters <code>[a-zA-Z0-9_\\-]</code>.</li>\n<li><a href=\"#external_dicts_dict_sources/\">source</a> \u2014 Source of the dictionary.</li>\n<li><a href=\"#external_dicts_dict_layout/\">layout</a> \u2014 Dictionary layout in memory.</li>\n<li><a href=\"#external_dicts_dict_structure/\">structure</a> \u2014 Structure of the dictionary . A key and attributes that can be retrieved by this key.</li>\n<li><a href=\"#external_dicts_dict_lifetime/\">lifetime</a> \u2014 Frequency of dictionary updates.</li>\n</ul>\n<p><a name=\"../../../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"../../../../dicts/external_dicts_dict_layout/\"></a><a name=\"../../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"external_dicts_dict_layout/\"></a><a name=\"dicts/external_dicts_dict_layout/\"></a><a name=\"../../dicts/external_dicts_dict_layout/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"../../../../../../dicts/external_dicts_dict_layout/\"></a><a name=\"../dicts/external_dicts_dict_layout/\"></a><a name=\"../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"../../../../../dicts/external_dicts_dict_layout/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"../../../dicts/external_dicts_dict_layout/\"></a></p>\n<h2 id=\"dicts-external_dicts_dict_layout\">Storing Dictionaries in Memory<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_layout\" title=\"Permanent link\">&para;</a></h2>\n<p>There are a variety of ways to store dictionaries in memory.</p>\n<p>We recommend <a href=\"#flat\">flat</a>, <a href=\"#dicts-external_dicts_dict_layout-hashed\">hashed</a> and <a href=\"#complex-key-hashed\">complex_key_hashed</a>. which provide optimal processing speed.</p>\n<p>Caching is not recommended because of potentially poor performance and difficulties in selecting optimal parameters. Read more in the section \"<a href=\"#cache\">cache</a>\".</p>\n<p>There are several ways to improve dictionary performance:</p>\n<ul>\n<li>Call the function for working with the dictionary after <code>GROUP BY</code>.</li>\n<li>Mark attributes to extract as injective. An attribute is called injective if different attribute values correspond to different keys. So when <code>GROUP BY</code> uses a function that fetches an attribute value by the key, this function is automatically taken out of <code>GROUP BY</code>.</li>\n</ul>\n<p>ClickHouse generates an exception for errors with dictionaries. Examples of errors:</p>\n<ul>\n<li>The dictionary being accessed could not be loaded.</li>\n<li>Error querying a <code>cached</code> dictionary.</li>\n</ul>\n<p>You can view the list of external dictionaries and their statuses in the <code>system.dictionaries</code> table.</p>\n<p>The configuration looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        ...\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;layout_type&gt;</span>\n                <span class=\"c\">&lt;!-- layout settings --&gt;</span>\n            <span class=\"nt\">&lt;/layout_type&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n        ...\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"ways-to-store-dictionaries-in-memory\">Ways to Store Dictionaries in Memory<a class=\"headerlink\" href=\"#ways-to-store-dictionaries-in-memory\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#flat\">flat</a></li>\n<li><a href=\"#dicts-external_dicts_dict_layout-hashed\">hashed</a></li>\n<li><a href=\"#dicts-external_dicts_dict_layout-sparse_hashed\">sparse_hashed</a></li>\n<li><a href=\"#cache\">cache</a></li>\n<li><a href=\"#range-hashed\">range_hashed</a></li>\n<li><a href=\"#complex-key-hashed\">complex_key_hashed</a></li>\n<li><a href=\"#complex-key-cache\">complex_key_cache</a></li>\n<li><a href=\"#ip-trie\">ip_trie</a></li>\n</ul>\n<h4 id=\"flat\">flat<a class=\"headerlink\" href=\"#flat\" title=\"Permanent link\">&para;</a></h4>\n<p>The dictionary is completely stored in memory in the form of flat arrays. How much memory does the dictionary use? The amount is proportional to the size of the largest key (in space used).</p>\n<p>The dictionary key has the <code>UInt64</code> type and the value is limited to 500,000. If a larger key is discovered when creating the dictionary, ClickHouse throws an exception and does not create the dictionary.</p>\n<p>All types of sources are supported. When updating, data (from a file or from a table) is read in its entirety.</p>\n<p>This method provides the best performance among all available methods of storing the dictionary.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n  <span class=\"nt\">&lt;flat</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"dicts-external_dicts_dict_layout-hashed\">hashed<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_layout-hashed\" title=\"Permanent link\">&para;</a></h4>\n<p>The dictionary is completely stored in memory in the form of a hash table. The dictionary can contain any number of elements with any identifiers In practice, the number of keys can reach tens of millions of items.</p>\n<p>All types of sources are supported. When updating, data (from a file or from a table) is read in its entirety.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n  <span class=\"nt\">&lt;hashed</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"dicts-external_dicts_dict_layout-sparse_hashed\">sparse_hashed<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_layout-sparse_hashed\" title=\"Permanent link\">&para;</a></h4>\n<p>Similar to <code>hashed</code>, but uses less memory in favor more CPU usage.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n  <span class=\"nt\">&lt;sparse_hashed</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"complex-key-hashed\">complex_key_hashed<a class=\"headerlink\" href=\"#complex-key-hashed\" title=\"Permanent link\">&para;</a></h4>\n<p>This type of storage is for use with composite <a href=\"#external_dicts_dict_structure/\">keys</a>. Similar to <code>hashed</code>.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n  <span class=\"nt\">&lt;complex_key_hashed</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"range-hashed\">range_hashed<a class=\"headerlink\" href=\"#range-hashed\" title=\"Permanent link\">&para;</a></h4>\n<p>The dictionary is stored in memory in the form of a hash table with an ordered array of ranges and their corresponding values.</p>\n<p>This storage method works the same way as hashed and allows using date/time (arbitrary numeric type) ranges in addition to the key.</p>\n<p>Example: The table contains discounts for each advertiser in the format:</p>\n<div class=\"codehilite\"><pre><span></span><code>+---------------+---------------------+-------------------+--------+\n| advertiser id | discount start date | discount end date | amount |\n+===============+=====================+===================+========+\n| 123           | 2015-01-01          | 2015-01-15        | 0.15   |\n+---------------+---------------------+-------------------+--------+\n| 123           | 2015-01-16          | 2015-01-31        | 0.25   |\n+---------------+---------------------+-------------------+--------+\n| 456           | 2015-01-01          | 2015-01-15        | 0.05   |\n+---------------+---------------------+-------------------+--------+\n</code></pre></div>\n\n\n<p>To use a sample for date ranges, define the <code>range_min</code> and <code>range_max</code> elements in the <a href=\"#external_dicts_dict_structure/\">structure</a>. These elements must contain elements <code>name</code> and<code>type</code> (if <code>type</code> is not specified, the default type will be used - Date). <code>type</code> can be any numeric type (Date / DateTime / UInt64 / Int32 / others).</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;structure&gt;</span>\n    <span class=\"nt\">&lt;id&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>Id<span class=\"nt\">&lt;/name&gt;</span>\n    <span class=\"nt\">&lt;/id&gt;</span>\n    <span class=\"nt\">&lt;range_min&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>first<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;type&gt;</span>Date<span class=\"nt\">&lt;/type&gt;</span>\n    <span class=\"nt\">&lt;/range_min&gt;</span>\n    <span class=\"nt\">&lt;range_max&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>last<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;type&gt;</span>Date<span class=\"nt\">&lt;/type&gt;</span>\n    <span class=\"nt\">&lt;/range_max&gt;</span>\n    ...\n</code></pre></div>\n\n\n<p>To work with these dictionaries, you need to pass an additional argument to the <code>dictGetT</code> function, for which a range is selected:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGetT</span><span class=\"p\">(</span>");
            
            document.write("<span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;attr_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">id</span><span class=\"p\">,</span> <span class=\"nb\">date</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>This function returns the value for the specified <code>id</code>s and the date range that includes the passed date.</p>\n<p>Details of the algorithm:</p>\n<ul>\n<li>If the <code>id</code> is not found or a range is not found for the <code>id</code>, it returns the default value for the dictionary.</li>\n<li>If there are overlapping ranges, you can use any.</li>\n<li>If the range delimiter is <code>NULL</code> or an invalid date (such as 1900-01-01 or 2039-01-01), the range is left open. The range can be open on both sides.</li>\n</ul>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n        <span class=\"nt\">&lt;dictionary&gt;</span>\n\n                ...\n\n                <span class=\"nt\">&lt;layout&gt;</span>\n                        <span class=\"nt\">&lt;range_hashed</span> <span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;/layout&gt;</span>\n\n                <span class=\"nt\">&lt;structure&gt;</span>\n                        <span class=\"nt\">&lt;id&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>Abcdef<span class=\"nt\">&lt;/name&gt;</span>\n                        <span class=\"nt\">&lt;/id&gt;</span>\n                        <span class=\"nt\">&lt;range_min&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>StartTimeStamp<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>UInt64<span class=\"nt\">&lt;/type&gt;</span>\n                        <span class=\"nt\">&lt;/range_min&gt;</span>\n                        <span class=\"nt\">&lt;range_max&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>EndTimeStamp<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>UInt64<span class=\"nt\">&lt;/type&gt;</span>\n                        <span class=\"nt\">&lt;/range_max&gt;</span>\n                        <span class=\"nt\">&lt;attribute&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>XXXType<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n                                <span class=\"nt\">&lt;null_value</span> <span class=\"nt\">/&gt;</span>\n                        <span class=\"nt\">&lt;/attribute&gt;</span>\n                <span class=\"nt\">&lt;/structure&gt;</span>\n\n        <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"cache\">cache<a class=\"headerlink\" href=\"#cache\" title=\"Permanent link\">&para;</a></h4>\n<p>The dictionary is stored in a cache that has a fixed number of cells. These cells contain frequently used elements.</p>\n<p>When searching for a dictionary, the cache is searched first. For each block of data, all keys that are not found in the cache or are outdated are requested from the source using <code>SELECT attrs... FROM db.table WHERE id IN (k1, k2, ...)</code>. The received data is then written to the cache.</p>\n<p>For cache dictionaries, the expiration <a href=\"#external_dicts_dict_lifetime/\">lifetime</a> of data in the cache can be set. If more time than <code>lifetime</code> has passed since loading the data in a cell, the cell's value is not used, and it is re-requested the next time it needs to be used.<br />\nThis is the least effective of all the ways to store dictionaries. The speed of the cache depends strongly on correct settings and the usage scenario. A cache type dictionary performs well only when the hit rates are high enough (recommended 99% and higher). You can view the average hit rate in the <code>system.dictionaries</code> table.</p>\n<p>To improve cache performance, use a subquery with <code>LIMIT</code>, and call the function with the dictionary externally.</p>\n<p>Supported <a href=\"#external_dicts_dict_sources/\">sources</a>: MySQL, ClickHouse, executable, HTTP.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n    <span class=\"nt\">&lt;cache&gt;</span>\n        <span class=\"c\">&lt;!-- The size of the cache, in number of cells. Rounded up to a power of two. --&gt;</span>\n        <span class=\"nt\">&lt;size_in_cells&gt;</span>1000000000<span class=\"nt\">&lt;/size_in_cells&gt;</span>\n    <span class=\"nt\">&lt;/cache&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<p>Set a large enough cache size. You need to experiment to select the number of cells:</p>\n<ol>\n<li>Set some value.</li>\n<li>Run queries until the cache is completely full.</li>\n<li>Assess memory consumption using the <code>system.dictionaries</code> table.</li>\n<li>Increase or decrease the number of cells until the required memory consumption is reached.</li>\n</ol>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Do not use ClickHouse as a source, because it is slow to process queries with random reads.</p>\n</div>\n<h4 id=\"complex-key-cache\">complex_key_cache<a class=\"headerlink\" href=\"#complex-key-cache\" title=\"Permanent link\">&para;</a></h4>\n<p>This type of storage is for use with composite <a href=\"#external_dicts_dict_structure/\">keys</a>. Similar to <code>cache</code>.</p>\n<h4 id=\"ip-trie\">ip_trie<a class=\"headerlink\" href=\"#ip-trie\" title=\"Permanent link\">&para;</a></h4>\n<p>This type of storage is for mapping network prefixes (IP addresses) to metadata such as ASN.</p>\n<p>Example: The table contains network prefixes and their corresponding AS number and country code:</p>\n<div class=\"codehilite\"><pre><span></span><code>  +-----------------+-------+--------+\n  | prefix          | asn   | cca2   |\n  +=================+=======+========+\n  | 202.79.32.0/20  | 17501 | NP     |\n  +-----------------+-------+--------+\n  | 2620:0:870::/48 | 3856  | US     |\n  +-----------------+-------+--------+\n  | 2a02:6b8:1::/48 | 13238 | RU     |\n  +-----------------+-------+--------+\n  | 2001:db8::/32   | 65536 | ZZ     |\n  +-----------------+-------+--------+\n</code></pre></div>\n\n\n<p>When using this type of layout, the structure must have a composite key.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;structure&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>\n        <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>prefix<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n        <span class=\"nt\">&lt;/attribute&gt;</span>\n    <span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>asn<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>UInt32<span class=\"nt\">&lt;/type&gt;</span>\n            <span class=\"nt\">&lt;null_value</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/attribute&gt;</span>\n    <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>cca2<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n            <span class=\"nt\">&lt;null_value&gt;</span>??<span class=\"nt\">&lt;/null_value&gt;</span>\n    <span class=\"nt\">&lt;/attribute&gt;</span>\n    ...\n</code></pre></div>\n\n\n<p>The key must have only one String type attribute that contains an allowed IP prefix. Other types are not supported yet.</p>\n<p>For queries, you must use the same functions (<code>dictGetT</code> with a tuple) as for dictionaries with composite keys:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGetT</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;attr_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"n\">ip</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<p>The function takes either <code>UInt32</code> for IPv4, or <code>FixedString(16)</code> for IPv6:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGetString</span><span class=\"p\">(</span><span class=\"s1\">&#39;prefix&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;asn&#39;</span><span class=\"p\">,</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"n\">IPv6StringToNum</span><span class=\"p\">(</span><span class=\"s1\">&#39;2001:db8::1&#39;</span><span class=\"p\">)))</span>\n</code></pre></div>\n\n\n<p>Other types are not supported yet. The function returns the attribute for the prefix that corresponds to this IP address. If there are overlapping prefixes, the most specific one is returned.</p>\n<p>Data is stored in a <code>trie</code>. It must completely fit into RAM.</p>\n<p><a name=\"../dicts/external_dicts_dict_lifetime/\"></a><a name=\"query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"external_dicts_dict_lifetime/\"></a><a name=\"../../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../dicts/external_dicts_dict_lifetime/\"></a></p>\n<h2 id=\"dictionary-updates\">Dictionary Updates<a class=\"headerlink\" href=\"#dictionary-updates\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse periodically updates the dictionaries. The update interval for");
            
            document.write(" fully downloaded dictionaries and the invalidation interval for cached dictionaries are defined in the <code>&lt;lifetime&gt;</code> tag in seconds.</p>\n<p>Dictionary updates (other than loading for first use) do not block queries. During updates, the old version of a dictionary is used. If an error occurs during an update, the error is written to the server log, and queries continue using the old version of dictionaries.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    ...\n    <span class=\"nt\">&lt;lifetime&gt;</span>300<span class=\"nt\">&lt;/lifetime&gt;</span>\n    ...\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<p>Setting <code>&lt;lifetime&gt; 0&lt;/lifetime&gt;</code> prevents updating dictionaries.</p>\n<p>You can set a time interval for upgrades, and ClickHouse will choose a uniformly random time within this range. This is necessary in order to distribute the load on the dictionary source when upgrading on a large number of servers.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    ...\n    <span class=\"nt\">&lt;lifetime&gt;</span>\n        <span class=\"nt\">&lt;min&gt;</span>300<span class=\"nt\">&lt;/min&gt;</span>\n        <span class=\"nt\">&lt;max&gt;</span>360<span class=\"nt\">&lt;/max&gt;</span>\n    <span class=\"nt\">&lt;/lifetime&gt;</span>\n    ...\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<p>When upgrading the dictionaries, the ClickHouse server applies different logic depending on the type of <a href=\"#external_dicts_dict_sources/\"> source</a>:</p>\n<ul>\n<li>For a text file, it checks the time of modification. If the time differs from the previously recorded time, the dictionary is updated.</li>\n<li>For MyISAM tables, the time of modification is checked using a <code>SHOW TABLE STATUS</code> query.</li>\n<li>Dictionaries from other sources are updated every time by default.</li>\n</ul>\n<p>For MySQL (InnoDB), ODBC and ClickHouse sources, you can set up a query that will update the dictionaries only if they really changed, rather than each time. To do this, follow these steps:</p>\n<ul>\n<li>The dictionary table must have a field that always changes when the source data is updated.</li>\n<li>The settings of the source must specify a query that retrieves the changing field. The ClickHouse server interprets the query result as a row, and if this row has changed relative to its previous state, the dictionary is updated. Specify the query in the <code>&lt;invalidate_query&gt;</code> field in the settings for the <a href=\"#external_dicts_dict_sources/\">source</a>.</li>\n</ul>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    ...\n    <span class=\"nt\">&lt;odbc&gt;</span>\n      ...\n      <span class=\"nt\">&lt;invalidate_query&gt;</span>SELECT update_time FROM dictionary_source where id = 1<span class=\"nt\">&lt;/invalidate_query&gt;</span>\n    <span class=\"nt\">&lt;/odbc&gt;</span>\n    ...\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../dicts/external_dicts_dict_sources/\"></a><a name=\"../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"external_dicts_dict_sources/\"></a><a name=\"dicts/external_dicts_dict_sources/\"></a><a name=\"../../../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../../dicts/external_dicts_dict_sources/\"></a><a name=\"../../../dicts/external_dicts_dict_sources/\"></a><a name=\"../dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../../../dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../dicts/external_dicts_dict_sources/\"></a><a name=\"../../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"query_language/dicts/external_dicts_dict_sources/\"></a></p>\n<h2 id=\"dicts-external_dicts_dict_sources\">Sources of External Dictionaries<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources\" title=\"Permanent link\">&para;</a></h2>\n<p>An external dictionary can be connected from many different sources.</p>\n<p>The configuration looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n  <span class=\"nt\">&lt;dictionary&gt;</span>\n    ...\n    <span class=\"nt\">&lt;source&gt;</span>\n      <span class=\"nt\">&lt;source_type&gt;</span>\n        <span class=\"c\">&lt;!-- Source configuration --&gt;</span>\n      <span class=\"nt\">&lt;/source_type&gt;</span>\n    <span class=\"nt\">&lt;/source&gt;</span>\n    ...\n  <span class=\"nt\">&lt;/dictionary&gt;</span>\n  ...\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>The source is configured in the <code>source</code> section.</p>\n<p>Types of sources (<code>source_type</code>):</p>\n<ul>\n<li><a href=\"#dicts-external_dicts_dict_sources-local_file\">Local file</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-executable\">Executable file</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-http\">HTTP(s)</a></li>\n<li>DBMS<ul>\n<li><a href=\"#dicts-external_dicts_dict_sources-odbc\">ODBC</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-mysql\">MySQL</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-clickhouse\">ClickHouse</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-mongodb\">MongoDB</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-redis\">Redis</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"dicts-external_dicts_dict_sources-local_file\">Local File<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-local_file\" title=\"Permanent link\">&para;</a></h3>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n  <span class=\"nt\">&lt;file&gt;</span>\n    <span class=\"nt\">&lt;path&gt;</span>/opt/dictionaries/os.tsv<span class=\"nt\">&lt;/path&gt;</span>\n    <span class=\"nt\">&lt;format&gt;</span>TabSeparated<span class=\"nt\">&lt;/format&gt;</span>\n  <span class=\"nt\">&lt;/file&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>path</code> \u2013 The absolute path to the file.</li>\n<li><code>format</code> \u2013 The file format. All the formats described in \"<a href=\"#formats\">Formats</a>\" are supported.</li>\n</ul>\n<h3 id=\"dicts-external_dicts_dict_sources-executable\">Executable File<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-executable\" title=\"Permanent link\">&para;</a></h3>\n<p>Working with executable files depends on <a href=\"#external_dicts_dict_layout/\">how the dictionary is stored in memory</a>. If the dictionary is stored using <code>cache</code> and <code>complex_key_cache</code>, ClickHouse requests the necessary keys by sending a request to the executable file's STDIN. Otherwise, ClickHouse starts executable file and treats its output as dictionary data.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;executable&gt;</span>\n        <span class=\"nt\">&lt;command&gt;</span>cat /opt/dictionaries/os.tsv<span class=\"nt\">&lt;/command&gt;</span>\n        <span class=\"nt\">&lt;format&gt;</span>TabSeparated<span class=\"nt\">&lt;/format&gt;</span>\n    <span class=\"nt\">&lt;/executable&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>command</code> \u2013 The absolute path to the executable file, or the file name (if the program directory is written to <code>PATH</code>).</li>\n<li><code>format</code> \u2013 The file format. All the formats described in \"<a href=\"#formats\">Formats</a>\" are supported.</li>\n</ul>\n<h3 id=\"dicts-external_dicts_dict_sources-http\">HTTP(s)<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-http\" title=\"Permanent link\">&para;</a></h3>\n<p>Working with an HTTP(s) server depends on <a href=\"#external_dicts_dict_layout/\">how the dictionary is stored in memory</a>. If the dictionary is stored using <code>cache</code> and <code>complex_key_cache</code>, ClickHouse requests the necessary keys by sending a request via the <code>POST</code> method.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;http&gt;</span>\n        <span class=\"nt\">&lt;url&gt;</span>http://[::1]/os.tsv<span class=\"nt\">&lt;/url&gt;</span>\n        <span class=\"nt\">&lt;format&gt;</span>TabSeparated<span class=\"nt\">&lt;/format&gt;</span>\n        <span class=\"nt\">&lt;credentials&gt;</span>\n            <span class=\"nt\">&lt;user&gt;</span>user<span class=\"nt\">&lt;/user&gt;</span>\n            <span class=\"nt\">&lt;password&gt;</span>password<span class=\"nt\">&lt;/password&gt;</span>\n        <span class=\"nt\">&lt;/credentials&gt;</span>\n        <span class=\"nt\">&lt;headers&gt;</span>\n            <span class=\"nt\">&lt;header&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>API-KEY<span class=\"nt\">&lt;/name&gt;</span>\n                <span class=\"nt\">&lt;value&gt;</span>key<span class=\"nt\">&lt;/value&gt;</span>\n            <span class=\"nt\">&lt;/header&gt;</span>\n        <span class=\"nt\">&lt;/headers&gt;</span>\n    <span class=\"nt\">&lt;/http&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>In order for ClickHouse to access an HTTPS resource, you must <a href=\"#server_settings-openssl\">configure openSSL</a> in the server configuration.</p>\n<p>Setting fields:</p>\n<ul>\n<li><code>url</code> \u2013 The source URL.</li>\n<li><code>format</code> \u2013 The file format. All the formats described in \"<a href=\"#formats\">Formats</a>\" are supported.</li>\n<li><code>credentials</code> \u2013 Basic HTTP authentification. Optional parameter.<ul>\n<li><code>user</code> \u2013 Username required for the authentification.</li>\n<li><code>password</code> \u2013 Password required for the authentification.</li>\n</ul>\n</li>\n<li><code>headers</code> \u2013 All custom HTTP headers entries used for the HTTP request. Optional parameter.<ul>\n<li><code>header</code> \u2013 Single HTTP header entry.<ul>\n<li><cod");
            
            document.write("e>name</code> \u2013 Identifiant name used for the header send on the request.</li>\n<li><code>value</code> \u2013 Value set for a specific identifiant name.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"dicts-external_dicts_dict_sources-odbc\">ODBC<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-odbc\" title=\"Permanent link\">&para;</a></h3>\n<p>You can use this method to connect any database that has an ODBC driver.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;odbc&gt;</span>\n    <span class=\"nt\">&lt;db&gt;</span>DatabaseName<span class=\"nt\">&lt;/db&gt;</span>\n    <span class=\"nt\">&lt;table&gt;</span>ShemaName.TableName<span class=\"nt\">&lt;/table&gt;</span>\n    <span class=\"nt\">&lt;connection_string&gt;</span>DSN=some_parameters<span class=\"nt\">&lt;/connection_string&gt;</span>\n    <span class=\"nt\">&lt;invalidate_query&gt;</span>SQL_QUERY<span class=\"nt\">&lt;/invalidate_query&gt;</span>\n<span class=\"nt\">&lt;/odbc&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>db</code> \u2013 Name of the database. Omit it if the database name is set in the <code>&lt;connection_string&gt;</code> parameters.</li>\n<li><code>table</code> \u2013 Name of the table and schema if exists.</li>\n<li><code>connection_string</code> \u2013 Connection string.</li>\n<li><code>invalidate_query</code> \u2013 Query for checking the dictionary status. Optional parameter. Read more in the section <a href=\"#external_dicts_dict_lifetime/\">Updating dictionaries</a>.</li>\n</ul>\n<p>ClickHouse receives quoting symbols from ODBC-driver and quote all settings in queries to driver, so it's necessary to set table name accordingly to table name case in database.</p>\n<p>If you have a problems with encodings when using Oracle, see the corresponding <a href=\"#oracle-odbc-encodings\">FAQ</a> article.</p>\n<h4 id=\"known-vulnerability-of-the-odbc-dictionary-functionality\">Known vulnerability of the ODBC dictionary functionality<a class=\"headerlink\" href=\"#known-vulnerability-of-the-odbc-dictionary-functionality\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>When connecting to the database through the ODBC driver connection parameter <code>Servername</code> can be substituted. In this case values of <code>USERNAME</code> and <code>PASSWORD</code> from <code>odbc.ini</code> are sent to the remote server and can be compromised.</p>\n</div>\n<p><strong>Example of insecure use</strong></p>\n<p>Let's configure unixODBC for PostgreSQL. Content of <code>/etc/odbc.ini</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>[gregtest]\nDriver = /usr/lib/psqlodbca.so\nServername = localhost\nPORT = 5432\nDATABASE = test_db\n##OPTION = 3\nUSERNAME = test\nPASSWORD = test\n</code></pre></div>\n\n\n<p>If you then make a query such as</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">odbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;DSN=gregtest;Servername=some-server.com&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test_db&#39;</span><span class=\"p\">);</span>    \n</code></pre></div>\n\n\n<p>ODBC driver will send values of <code>USERNAME</code> and <code>PASSWORD</code> from <code>odbc.ini</code> to <code>some-server.com</code>.</p>\n<h4 id=\"example-of-connecting-postgresql\">Example of Connecting PostgreSQL<a class=\"headerlink\" href=\"#example-of-connecting-postgresql\" title=\"Permanent link\">&para;</a></h4>\n<p>Ubuntu OS.</p>\n<p>Installing unixODBC and the ODBC driver for PostgreSQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install -y unixodbc odbcinst odbc-postgresql\n</code></pre></div>\n\n\n<p>Configuring <code>/etc/odbc.ini</code> (or <code>~/.odbc.ini</code>):</p>\n<div class=\"codehilite\"><pre><span></span><code>    [DEFAULT]\n    Driver = myconnection\n\n    [myconnection]\n    Description         = PostgreSQL connection to my_db\n    Driver              = PostgreSQL Unicode\n    Database            = my_db\n    Servername          = 127.0.0.1\n    UserName            = username\n    Password            = password\n    Port                = 5432\n    Protocol            = 9.3\n    ReadOnly            = No\n    RowVersioning       = No\n    ShowSystemTables    = No\n    ConnSettings        =\n</code></pre></div>\n\n\n<p>The dictionary configuration in ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>table_name<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;source&gt;</span>\n            <span class=\"nt\">&lt;odbc&gt;</span>\n                <span class=\"c\">&lt;!-- You can specify the following parameters in connection_string: --&gt;</span>\n                <span class=\"c\">&lt;!-- DSN=myconnection;UID=username;PWD=password;HOST=127.0.0.1;PORT=5432;DATABASE=my_db --&gt;</span>\n                <span class=\"nt\">&lt;connection_string&gt;</span>DSN=myconnection<span class=\"nt\">&lt;/connection_string&gt;</span>\n                <span class=\"nt\">&lt;table&gt;</span>postgresql_table<span class=\"nt\">&lt;/table&gt;</span>\n            <span class=\"nt\">&lt;/odbc&gt;</span>\n        <span class=\"nt\">&lt;/source&gt;</span>\n        <span class=\"nt\">&lt;lifetime&gt;</span>\n            <span class=\"nt\">&lt;min&gt;</span>300<span class=\"nt\">&lt;/min&gt;</span>\n            <span class=\"nt\">&lt;max&gt;</span>360<span class=\"nt\">&lt;/max&gt;</span>\n        <span class=\"nt\">&lt;/lifetime&gt;</span>\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;hashed/&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n        <span class=\"nt\">&lt;structure&gt;</span>\n            <span class=\"nt\">&lt;id&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>id<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;/id&gt;</span>\n            <span class=\"nt\">&lt;attribute&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>some_column<span class=\"nt\">&lt;/name&gt;</span>\n                <span class=\"nt\">&lt;type&gt;</span>UInt64<span class=\"nt\">&lt;/type&gt;</span>\n                <span class=\"nt\">&lt;null_value&gt;</span>0<span class=\"nt\">&lt;/null_value&gt;</span>\n            <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;/structure&gt;</span>\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>You may need to edit <code>odbc.ini</code> to specify the full path to the library with the driver <code>DRIVER=/usr/local/lib/psqlodbcw.so</code>.</p>\n<h4 id=\"example-of-connecting-ms-sql-server\">Example of Connecting MS SQL Server<a class=\"headerlink\" href=\"#example-of-connecting-ms-sql-server\" title=\"Permanent link\">&para;</a></h4>\n<p>Ubuntu OS.</p>\n<p>Installing the driver: :</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install tdsodbc freetds-bin sqsh\n</code></pre></div>\n\n\n<p>Configuring the driver:</p>\n<div class=\"codehilite\"><pre><span></span><code>    $ cat /etc/freetds/freetds.conf\n    ...\n\n    <span class=\"o\">[</span>MSSQL<span class=\"o\">]</span>\n    <span class=\"nv\">host</span> <span class=\"o\">=</span> <span class=\"m\">192</span>.168.56.101\n    <span class=\"nv\">port</span> <span class=\"o\">=</span> <span class=\"m\">1433</span>\n    tds <span class=\"nv\">version</span> <span class=\"o\">=</span> <span class=\"m\">7</span>.0\n    client <span class=\"nv\">charset</span> <span class=\"o\">=</span> UTF-8\n\n    $ cat /etc/odbcinst.ini\n    ...\n\n    <span class=\"o\">[</span>FreeTDS<span class=\"o\">]</span>\n    <span class=\"nv\">Description</span>     <span class=\"o\">=</span> FreeTDS\n    <span class=\"nv\">Driver</span>          <span class=\"o\">=</span> /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so\n    <span class=\"nv\">Setup</span>           <span class=\"o\">=</span> /usr/lib/x86_64-linux-gnu/odbc/libtdsS.so\n    <span class=\"nv\">FileUsage</span>       <span class=\"o\">=</span> <span class=\"m\">1</span>\n    <span class=\"nv\">UsageCount</span>      <span class=\"o\">=</span> <span class=\"m\">5</span>\n\n    $ cat ~/.odbc.ini\n    ...\n\n    <span class=\"o\">[</span>MSSQL<span class=\"o\">]</span>\n    <span class=\"nv\">Description</span>     <span class=\"o\">=</span> FreeTDS\n    <span class=\"nv\">Driver</span>          <span class=\"o\">=</span> FreeTDS\n    <span class=\"nv\">Servername</span>      <span class=\"o\">=</span> MSSQL\n    <span class=\"nv\">Database</span>        <span class=\"o\">=</span> <span class=\"nb\">test</span>\n    <span class=\"nv\">UID</span>             <span class=\"o\">=</span> <span class=\"nb\">test</span>\n    <span class=\"nv\">PWD</span>             <span class=\"o\">=</span> <span class=\"nb\">test</span>\n    <span class=\"nv\">Port</span>            <span class=\"o\">=</span> <span class=\"m\">1433</span>\n</code></pre></div>\n\n\n<p>Configuring the dictionary in ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>test<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;source&gt;</span>\n            <span class=\"nt\">&lt;odbc&gt;</span>\n                <span class=\"nt\">&lt;table&gt;</span>dict<span class=\"nt\">&lt;/table&gt;</span>\n                <span class=\"nt\">&lt;connection_string&gt;</span>DSN=MSSQL;UID=test;PWD=test<span class=\"nt\">&lt;/connection_string&gt;</span>\n            <span class=\"nt\">&lt;/odbc&gt;</span>\n        <span class=\"nt\">&lt;/source&gt;</span>\n\n        <span class=\"nt\">&lt;lifetime&gt;</span>\n            <span class=\"nt\">&lt;min&gt;</span>300<span class=\"nt\">&lt;/min&gt;</span>\n            <span class=\"nt\">&lt;max&gt;</span>360<span class=\"nt\">&lt;/max&gt;</span>\n        <span class=\"nt\">&lt;/lifetime&gt;</span>\n\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;flat</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n\n        <span class=\"nt\">&lt;structure&gt;</span>\n            <span class=\"nt\">&lt;id&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>k<span class=\"nt\">&lt;/name&");
            
            document.write("gt;</span>\n            <span class=\"nt\">&lt;/id&gt;</span>\n            <span class=\"nt\">&lt;attribute&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>s<span class=\"nt\">&lt;/name&gt;</span>\n                <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n                <span class=\"nt\">&lt;null_value&gt;&lt;/null_value&gt;</span>\n            <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;/structure&gt;</span>\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"dbms\">DBMS<a class=\"headerlink\" href=\"#dbms\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"dicts-external_dicts_dict_sources-mysql\">MySQL<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-mysql\" title=\"Permanent link\">&para;</a></h4>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n  <span class=\"nt\">&lt;mysql&gt;</span>\n      <span class=\"nt\">&lt;port&gt;</span>3306<span class=\"nt\">&lt;/port&gt;</span>\n      <span class=\"nt\">&lt;user&gt;</span>clickhouse<span class=\"nt\">&lt;/user&gt;</span>\n      <span class=\"nt\">&lt;password&gt;</span>qwerty<span class=\"nt\">&lt;/password&gt;</span>\n      <span class=\"nt\">&lt;replica&gt;</span>\n          <span class=\"nt\">&lt;host&gt;</span>example01-1<span class=\"nt\">&lt;/host&gt;</span>\n          <span class=\"nt\">&lt;priority&gt;</span>1<span class=\"nt\">&lt;/priority&gt;</span>\n      <span class=\"nt\">&lt;/replica&gt;</span>\n      <span class=\"nt\">&lt;replica&gt;</span>\n          <span class=\"nt\">&lt;host&gt;</span>example01-2<span class=\"nt\">&lt;/host&gt;</span>\n          <span class=\"nt\">&lt;priority&gt;</span>1<span class=\"nt\">&lt;/priority&gt;</span>\n      <span class=\"nt\">&lt;/replica&gt;</span>\n      <span class=\"nt\">&lt;db&gt;</span>db_name<span class=\"nt\">&lt;/db&gt;</span>\n      <span class=\"nt\">&lt;table&gt;</span>table_name<span class=\"nt\">&lt;/table&gt;</span>\n      <span class=\"nt\">&lt;where&gt;</span>id=10<span class=\"nt\">&lt;/where&gt;</span>\n      <span class=\"nt\">&lt;invalidate_query&gt;</span>SQL_QUERY<span class=\"nt\">&lt;/invalidate_query&gt;</span>\n  <span class=\"nt\">&lt;/mysql&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li>\n<p><code>port</code> \u2013 The port on the MySQL server. You can specify it for all replicas, or for each one individually (inside <code>&lt;replica&gt;</code>).</p>\n</li>\n<li>\n<p><code>user</code> \u2013 Name of the MySQL user. You can specify it for all replicas, or for each one individually (inside <code>&lt;replica&gt;</code>).</p>\n</li>\n<li>\n<p><code>password</code> \u2013 Password of the MySQL user. You can specify it for all replicas, or for each one individually (inside <code>&lt;replica&gt;</code>).</p>\n</li>\n<li>\n<p><code>replica</code> \u2013 Section of replica configurations. There can be multiple sections.</p>\n<ul>\n<li><code>replica/host</code> \u2013 The MySQL host.</li>\n</ul>\n<p>* <code>replica/priority</code> \u2013 The replica priority. When attempting to connect, ClickHouse traverses the replicas in order of priority. The lower the number, the higher the priority.</p>\n</li>\n<li>\n<p><code>db</code> \u2013 Name of the database.</p>\n</li>\n<li>\n<p><code>table</code> \u2013 Name of the table.</p>\n</li>\n<li>\n<p><code>where</code> \u2013 The selection criteria. Optional parameter.</p>\n</li>\n<li>\n<p><code>invalidate_query</code> \u2013 Query for checking the dictionary status. Optional parameter. Read more in the section <a href=\"#external_dicts_dict_lifetime/\">Updating dictionaries</a>.</p>\n</li>\n</ul>\n<p>MySQL can be connected on a local host via sockets. To do this, set <code>host</code> and <code>socket</code>.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n  <span class=\"nt\">&lt;mysql&gt;</span>\n      <span class=\"nt\">&lt;host&gt;</span>localhost<span class=\"nt\">&lt;/host&gt;</span>\n      <span class=\"nt\">&lt;socket&gt;</span>/path/to/socket/file.sock<span class=\"nt\">&lt;/socket&gt;</span>\n      <span class=\"nt\">&lt;user&gt;</span>clickhouse<span class=\"nt\">&lt;/user&gt;</span>\n      <span class=\"nt\">&lt;password&gt;</span>qwerty<span class=\"nt\">&lt;/password&gt;</span>\n      <span class=\"nt\">&lt;db&gt;</span>db_name<span class=\"nt\">&lt;/db&gt;</span>\n      <span class=\"nt\">&lt;table&gt;</span>table_name<span class=\"nt\">&lt;/table&gt;</span>\n      <span class=\"nt\">&lt;where&gt;</span>id=10<span class=\"nt\">&lt;/where&gt;</span>\n      <span class=\"nt\">&lt;invalidate_query&gt;</span>SQL_QUERY<span class=\"nt\">&lt;/invalidate_query&gt;</span>\n  <span class=\"nt\">&lt;/mysql&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"dicts-external_dicts_dict_sources-clickhouse\">ClickHouse<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-clickhouse\" title=\"Permanent link\">&para;</a></h4>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;clickhouse&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example01-01-1<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n        <span class=\"nt\">&lt;user&gt;</span>default<span class=\"nt\">&lt;/user&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n        <span class=\"nt\">&lt;db&gt;</span>default<span class=\"nt\">&lt;/db&gt;</span>\n        <span class=\"nt\">&lt;table&gt;</span>ids<span class=\"nt\">&lt;/table&gt;</span>\n        <span class=\"nt\">&lt;where&gt;</span>id=10<span class=\"nt\">&lt;/where&gt;</span>\n    <span class=\"nt\">&lt;/clickhouse&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>host</code> \u2013 The ClickHouse host. If it is a local host, the query is processed without any network activity. To improve fault tolerance, you can create a <a href=\"#../../operations/table_engines/distributed/\">Distributed</a> table and enter it in subsequent configurations.</li>\n<li><code>port</code> \u2013 The port on the ClickHouse server.</li>\n<li><code>user</code> \u2013 Name of the ClickHouse user.</li>\n<li><code>password</code> \u2013 Password of the ClickHouse user.</li>\n<li><code>db</code> \u2013 Name of the database.</li>\n<li><code>table</code> \u2013 Name of the table.</li>\n<li><code>where</code> \u2013 The selection criteria. May be omitted.</li>\n<li><code>invalidate_query</code> \u2013 Query for checking the dictionary status. Optional parameter. Read more in the section <a href=\"#external_dicts_dict_lifetime/\">Updating dictionaries</a>.</li>\n</ul>\n<h4 id=\"dicts-external_dicts_dict_sources-mongodb\">MongoDB<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-mongodb\" title=\"Permanent link\">&para;</a></h4>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;mongodb&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>localhost<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>27017<span class=\"nt\">&lt;/port&gt;</span>\n        <span class=\"nt\">&lt;user&gt;&lt;/user&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n        <span class=\"nt\">&lt;db&gt;</span>test<span class=\"nt\">&lt;/db&gt;</span>\n        <span class=\"nt\">&lt;collection&gt;</span>dictionary_source<span class=\"nt\">&lt;/collection&gt;</span>\n    <span class=\"nt\">&lt;/mongodb&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>host</code> \u2013 The MongoDB host.</li>\n<li><code>port</code> \u2013 The port on the MongoDB server.</li>\n<li><code>user</code> \u2013 Name of the MongoDB user.</li>\n<li><code>password</code> \u2013 Password of the MongoDB user.</li>\n<li><code>db</code> \u2013 Name of the database.</li>\n<li><code>collection</code> \u2013 Name of the collection.</li>\n</ul>\n<h4 id=\"dicts-external_dicts_dict_sources-redis\">Redis<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-redis\" title=\"Permanent link\">&para;</a></h4>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;redis&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>localhost<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>6379<span class=\"nt\">&lt;/port&gt;</span>\n        <span class=\"nt\">&lt;storage_type&gt;</span>simple<span class=\"nt\">&lt;/storage_type&gt;</span>\n        <span class=\"nt\">&lt;db_index&gt;</span>0<span class=\"nt\">&lt;/db_index&gt;</span>\n    <span class=\"nt\">&lt;/redis&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>host</code> \u2013 The Redis host.</li>\n<li><code>port</code> \u2013 The port on the Redis server.</li>\n<li><code>storage_type</code> \u2013 The structure of internal Redis storage using for work with keys. <code>simple</code> is for simple sources and for hashed single key sources, <code>hash_map</code> is for hashed sources with two keys. Ranged sources and cache sources with complex key are unsupported. May be omitted, default value is <code>simple</code>.</li>\n<li><code>db_index</code> \u2013 The specific numeric index of Redis logical database. May be omitted, default value is 0.</li>\n</ul>\n<p><a name=\"../../../../../../dicts/external_dicts_dict_structure/\"></a><a name=\"../../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"../../../../dicts/external_dicts_dict_structure/\"></a><a name=\"../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"../../../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"external_dicts_dict_structure/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"../dicts/external_dicts_dict_structure/\"></a><a name=\"dicts/external_dicts_dict_structure/\"></a><a name=\"../../../../../dicts/external_dicts_dict_structure/\"></a><a name=\"../../../dicts/external_dicts_dict");
            
            document.write("_structure/\"></a><a name=\"../../dicts/external_dicts_dict_structure/\"></a></p>\n<h2 id=\"dictionary-key-and-fields\">Dictionary Key and Fields<a class=\"headerlink\" href=\"#dictionary-key-and-fields\" title=\"Permanent link\">&para;</a></h2>\n<p>The <code>&lt;structure&gt;</code> clause describes the dictionary key and fields available for queries.</p>\n<p>Overall structure:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    <span class=\"nt\">&lt;structure&gt;</span>\n        <span class=\"nt\">&lt;id&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>Id<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;/id&gt;</span>\n\n        <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"c\">&lt;!-- Attribute parameters --&gt;</span>\n        <span class=\"nt\">&lt;/attribute&gt;</span>\n\n        ...\n\n    <span class=\"nt\">&lt;/structure&gt;</span>\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<p>Columns are described in the structure:</p>\n<ul>\n<li><code>&lt;id&gt;</code> \u2014 <a href=\"#ext_dict_structure-key\">Key column</a>.</li>\n<li><code>&lt;attribute&gt;</code> \u2014 <a href=\"#ext_dict_structure-attributes\">Data column</a>. There can be a large number of columns.</li>\n</ul>\n<h3 id=\"ext_dict_structure-key\">Key<a class=\"headerlink\" href=\"#ext_dict_structure-key\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports the following types of keys:</p>\n<ul>\n<li>Numeric key. UInt64. Defined in the tag <code>&lt;id&gt;</code> .</li>\n<li>Composite key. Set of values of different types. Defined in the tag <code>&lt;key&gt;</code> .</li>\n</ul>\n<p>A structure can contain either <code>&lt;id&gt;</code> or <code>&lt;key&gt;</code> .</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>The key doesn't need to be defined separately in attributes.</p>\n</div>\n<h4 id=\"numeric-key\">Numeric Key<a class=\"headerlink\" href=\"#numeric-key\" title=\"Permanent link\">&para;</a></h4>\n<p>Type: <code>UInt64</code>.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;id&gt;</span>\n    <span class=\"nt\">&lt;name&gt;</span>Id<span class=\"nt\">&lt;/name&gt;</span>\n<span class=\"nt\">&lt;/id&gt;</span>\n</code></pre></div>\n\n\n<p>Configuration fields:</p>\n<ul>\n<li><code>name</code> \u2013 The name of the column with keys.</li>\n</ul>\n<h4 id=\"composite-key\">Composite Key<a class=\"headerlink\" href=\"#composite-key\" title=\"Permanent link\">&para;</a></h4>\n<p>The key can be a <code>tuple</code> from any types of fields. The <a href=\"#external_dicts_dict_layout/\">layout</a> in this case must be <code>complex_key_hashed</code> or <code>complex_key_cache</code>.</p>\n<div class=\"admonition tip\">\n<p class=\"admonition-title\">Tip</p>\n<p>A composite key can consist of a single element. This makes it possible to use a string as the key, for instance.</p>\n</div>\n<p>The key structure is set in the element <code>&lt;key&gt;</code>. Key fields are specified in the same format as the dictionary <a href=\"#external_dicts_dict_structure/\">attributes</a>. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;structure&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>\n        <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>field1<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n        <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>field2<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>UInt32<span class=\"nt\">&lt;/type&gt;</span>\n        <span class=\"nt\">&lt;/attribute&gt;</span>\n        ...\n    <span class=\"nt\">&lt;/key&gt;</span>\n...\n</code></pre></div>\n\n\n<p>For a query to the <code>dictGet*</code> function, a tuple is passed as the key. Example: <code>dictGetString('dict_name', 'attr_name', tuple('string for field1', num_for_field2))</code>.</p>\n<h3 id=\"ext_dict_structure-attributes\">Attributes<a class=\"headerlink\" href=\"#ext_dict_structure-attributes\" title=\"Permanent link\">&para;</a></h3>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;structure&gt;</span>\n    ...\n    <span class=\"nt\">&lt;attribute&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>Name<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;type&gt;</span>ClickHouseDataType<span class=\"nt\">&lt;/type&gt;</span>\n        <span class=\"nt\">&lt;null_value&gt;&lt;/null_value&gt;</span>\n        <span class=\"nt\">&lt;expression&gt;</span>rand64()<span class=\"nt\">&lt;/expression&gt;</span>\n        <span class=\"nt\">&lt;hierarchical&gt;</span>true<span class=\"nt\">&lt;/hierarchical&gt;</span>\n        <span class=\"nt\">&lt;injective&gt;</span>true<span class=\"nt\">&lt;/injective&gt;</span>\n        <span class=\"nt\">&lt;is_object_id&gt;</span>true<span class=\"nt\">&lt;/is_object_id&gt;</span>\n    <span class=\"nt\">&lt;/attribute&gt;</span>\n<span class=\"nt\">&lt;/structure&gt;</span>\n</code></pre></div>\n\n\n<p>Configuration fields:</p>\n<p>Tag | Description | Required<br />\n<a name=\"../query_language/dicts/internal_dicts/\"></a><a name=\"../../../../query_language/dicts/internal_dicts/\"></a><a name=\"../../../../../../dicts/internal_dicts/\"></a><a name=\"../../query_language/dicts/internal_dicts/\"></a><a name=\"../../../../dicts/internal_dicts/\"></a><a name=\"../../../query_language/dicts/internal_dicts/\"></a><a name=\"internal_dicts/\"></a><a name=\"dicts/internal_dicts/\"></a><a name=\"../dicts/internal_dicts/\"></a><a name=\"../../../../../query_language/dicts/internal_dicts/\"></a><a name=\"../../dicts/internal_dicts/\"></a><a name=\"query_language/dicts/internal_dicts/\"></a><a name=\"../../../../../dicts/internal_dicts/\"></a><a name=\"../../../dicts/internal_dicts/\"></a></p>\n<h2 id=\"internal_dicts\">Internal dictionaries<a class=\"headerlink\" href=\"#internal_dicts\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse contains a built-in feature for working with a geobase.</p>\n<p>This allows you to:</p>\n<ul>\n<li>Use a region's ID to get its name in the desired language.</li>\n<li>Use a region's ID to get the ID of a city, area, federal district, country, or continent.</li>\n<li>Check whether a region is part of another region.</li>\n<li>Get a chain of parent regions.</li>\n</ul>\n<p>All the functions support \"translocality,\" the ability to simultaneously use different perspectives on region ownership. For more information, see the section \"Functions for working with Yandex.Metrica dictionaries\".</p>\n<p>The internal dictionaries are disabled in the default package.<br />\nTo enable them, uncomment the parameters <code>path_to_regions_hierarchy_file</code> and <code>path_to_regions_names_files</code> in the server configuration file.</p>\n<p>The geobase is loaded from text files.</p>\n<p>Place the <code>regions_hierarchy*.txt</code> files into the <code>path_to_regions_hierarchy_file</code> directory. This configuration parameter must contain the path to the <code>regions_hierarchy.txt</code> file (the default regional hierarchy), and the other files (<code>regions_hierarchy_ua.txt</code>) must be located in the same directory.</p>\n<p>Put the <code>regions_names_*.txt</code> files in the <code>path_to_regions_names_files</code> directory.</p>\n<p>You can also create these files yourself. The file format is as follows:</p>\n<p><code>regions_hierarchy*.txt</code>: TabSeparated (no header), columns:</p>\n<ul>\n<li>region ID (<code>UInt32</code>)</li>\n<li>parent region ID (<code>UInt32</code>)</li>\n<li>region type (<code>UInt8</code>): 1 - continent, 3 - country, 4 - federal district, 5 - region, 6 - city; other types don't have values</li>\n<li>population (<code>UInt32</code>) \u2014 optional column</li>\n</ul>\n<p><code>regions_names_*.txt</code>: TabSeparated (no header), columns:</p>\n<ul>\n<li>region ID (<code>UInt32</code>)</li>\n<li>region name (<code>String</code>) \u2014 Can't contain tabs or line feeds, even escaped ones.</li>\n</ul>\n<p>A flat array is used for storing in RAM. For this reason, IDs shouldn't be more than a million.</p>\n<p>Dictionaries can be updated without restarting the server. However, the set of available dictionaries is not updated.<br />\nFor updates, the file modification times are checked. If a file has changed, the dictionary is updated.<br />\nThe interval to check for changes is configured in the <code>builtin_dictionaries_reload_interval</code> parameter.<br />\nDictionary updates (other than loading at first use) do not block queries. During updates, queries use the old versions of dictionaries. If an error occurs during an update, the error is written to the server log, and queries continue using the old version of dictionaries.</p>\n<p>We recommend periodically updating the dictionaries with the geobase. During an update, generate new files and write them to a separate location. When everything is ready, rename them to the files used by the server.</p>\n<p>There are also functions for working with OS identifiers and Yandex.Metrica search engines, but they shouldn't be used.</p>\n<p><a name=\"../../../../query_language/operators/\"></a><a name=\"../query_language/operators/\"></a><a name=\"../../query_language/operators/\"></a><a name=\"operators/\"></a><a name=\"../../../query_language/operators/\"></a><a name=\"query_language/operators/\"></a><a name=\"../../../../../query_language/operators/\"></a></p>\n<h2 id=\"cao-zuo-fu\">\u64cd\u4f5c\u7b26<a class=\"headerlink\" href=\"#cao-zuo-fu\" title=\"Permanent link\">&para;</a></h2>\n<p>\u6240\u6709\u7684\u64cd\u4f5c\u7b26\uff08\u8fd0\u7b97\u7b26\uff09\u90fd\u4f1a\u5728\u67e5\u8be2\u65f6\u4f9d\u636e\u4ed6\u4eec\u7684\u4f18\u5148\u7ea7\u53ca\u5176\u7ed3\u5408\u987a\u5e8f\u5728\u88ab\u89e3\u6790\u65f6\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u51fd\u6570\u3002\u4e0b\u9762\u6309\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u5217\u51fa\u5404\u7ec4\u8fd0\u7b97\u7b26\u53ca\u5176\u5bf9\u5e94\u7684\u51fd\u6570\uff1a</p>\n<h3 id=\"xia-biao-yun-suan-fu\">\u4e0b\u6807\u8fd0\u7b97\u7b26<a class=\"headerlink\" href=\"#xia-biao-yun-suan-fu\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a[N]</code> \u2013 \u6570\u7ec4\u4e2d\u7684\u7b2cN\u4e2a\u5143\u7d20; \u5bf9\u5e94\u51fd\u6570 <code>arrayElement(a, N)</code></p>\n<p><code>a.N</code> \u2013 \u5143\u7ec4\u4e2d\u7b2cN\u4e2a\u5143\u7d20; \u5bf9\u5e94\u51fd\u6570 <code>tupleElement(a, N)</code></p>\n<h3 id=\"fu-hao\">\u8d1f\u53f7<a class=\"headerlink\" href=\"#fu-hao\" title=\"Permanent link\">&para;</a></h3>\n<p><code>-a</code>  \u2013 \u5bf9\u5e94\u51fd\u6570 <code>negate(a)</code></p>\n<h3 id=\"cheng-hao-chu-hao-he-qu-yu\">\u4e58\u53f7\u3001\u9664\u53f7\u548c\u53d6\u4f59<a class=\"headerlink\" href=\"#cheng-hao-chu-hao-he-qu-yu\" title=\"Permane");
            
            document.write("nt link\">&para;</a></h3>\n<p><code>a * b</code>  \u2013 \u5bf9\u5e94\u51fd\u6570 <code>multiply(a, b)</code></p>\n<p><code>a / b</code>  \u2013 \u5bf9\u5e94\u51fd\u6570 <code>divide(a, b)</code></p>\n<p><code>a % b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>modulo(a, b)</code></p>\n<h3 id=\"jia-hao-he-jian-hao\">\u52a0\u53f7\u548c\u51cf\u53f7<a class=\"headerlink\" href=\"#jia-hao-he-jian-hao\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a + b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>plus(a, b)</code></p>\n<p><code>a - b</code>  \u2013 \u5bf9\u5e94\u51fd\u6570 <code>minus(a, b)</code></p>\n<h3 id=\"guan-xi-yun-suan-fu\">\u5173\u7cfb\u8fd0\u7b97\u7b26<a class=\"headerlink\" href=\"#guan-xi-yun-suan-fu\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a = b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>equals(a, b)</code></p>\n<p><code>a == b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>equals(a, b)</code></p>\n<p><code>a != b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>notEquals(a, b)</code></p>\n<p><code>a &lt;&gt; b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>notEquals(a, b)</code></p>\n<p><code>a &lt;= b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>lessOrEquals(a, b)</code></p>\n<p><code>a &gt;= b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>greaterOrEquals(a, b)</code></p>\n<p><code>a &lt; b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>less(a, b)</code></p>\n<p><code>a &gt; b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>greater(a, b)</code></p>\n<p><code>a LIKE s</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>like(a, b)</code></p>\n<p><code>a NOT LIKE s</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>notLike(a, b)</code></p>\n<p><code>a BETWEEN b AND c</code> \u2013 \u7b49\u4ef7\u4e8e <code>a &gt;= b AND a &lt;= c</code> </p>\n<h3 id=\"ji-he-guan-xi-yun-suan-fu\">\u96c6\u5408\u5173\u7cfb\u8fd0\u7b97\u7b26<a class=\"headerlink\" href=\"#ji-he-guan-xi-yun-suan-fu\" title=\"Permanent link\">&para;</a></h3>\n<p><em>\u8be6\u89c1\u6b64\u8282 <a href=\"#select-in-operators\">IN \u76f8\u5173\u64cd\u4f5c\u7b26</a> \u3002</em></p>\n<p><code>a IN ...</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>in(a, b)</code></p>\n<p><code>a NOT IN ...</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>notIn(a, b)</code></p>\n<p><code>a GLOBAL IN ...</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>globalIn(a, b)</code></p>\n<p><code>a GLOBAL NOT IN ...</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>globalNotIn(a, b)</code></p>\n<h3 id=\"luo-ji-fei\">\u903b\u8f91\u975e<a class=\"headerlink\" href=\"#luo-ji-fei\" title=\"Permanent link\">&para;</a></h3>\n<p><code>NOT a</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>not(a)</code></p>\n<h3 id=\"luo-ji-yu\">\u903b\u8f91\u4e0e<a class=\"headerlink\" href=\"#luo-ji-yu\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a AND b</code> \u2013 \u5bf9\u5e94\u51fd\u6570<code>and(a, b)</code></p>\n<h3 id=\"luo-ji-huo\">\u903b\u8f91\u6216<a class=\"headerlink\" href=\"#luo-ji-huo\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a OR b</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>or(a, b)</code></p>\n<h3 id=\"tiao-jian-yun-suan-fu\">\u6761\u4ef6\u8fd0\u7b97\u7b26<a class=\"headerlink\" href=\"#tiao-jian-yun-suan-fu\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a ? b : c</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>if(a, b, c)</code></p>\n<p>\u6ce8\u610f:</p>\n<p>\u6761\u4ef6\u8fd0\u7b97\u7b26\u4f1a\u5148\u8ba1\u7b97\u8868\u8fbe\u5f0fb\u548c\u8868\u8fbe\u5f0fc\u7684\u503c\uff0c\u518d\u6839\u636e\u8868\u8fbe\u5f0fa\u7684\u771f\u5047\uff0c\u8fd4\u56de\u76f8\u5e94\u7684\u503c\u3002\u5982\u679c\u8868\u8fbe\u5f0fb\u548c\u8868\u8fbe\u5f0fc\u662f <a href=\"#functions_arrayjoin\">arrayJoin()</a> \u51fd\u6570\uff0c\u5219\u4e0d\u7ba1\u8868\u8fbe\u5f0fa\u662f\u771f\u662f\u5047\uff0c\u6bcf\u884c\u90fd\u4f1a\u88ab\u590d\u5236\u5c55\u5f00\u3002</p>\n<h3 id=\"operators-datetime\">Operators for Working with Dates and Times<a class=\"headerlink\" href=\"#operators-datetime\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"operator-extract\">EXTRACT<a class=\"headerlink\" href=\"#operator-extract\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">EXTRACT</span><span class=\"p\">(</span><span class=\"n\">part</span> <span class=\"k\">FROM</span> <span class=\"nb\">date</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Extracts a part from a given date. For example, you can retrieve a month from a given date, or a second from a time.</p>\n<p>The <code>part</code> parameter specifies which part of the date to retrieve. The following values are available:</p>\n<ul>\n<li><code>DAY</code> \u2014 The day of the month. Possible values: 1\u201331.</li>\n<li><code>MONTH</code> \u2014 The number of a month. Possible values: 1\u201312.</li>\n<li><code>YEAR</code> \u2014 The year.</li>\n<li><code>SECOND</code> \u2014 The second. Possible values: 0\u201359.</li>\n<li><code>MINUTE</code> \u2014 The minute. Possible values: 0\u201359.</li>\n<li><code>HOUR</code> \u2014 The hour. Possible values: 0\u201323.</li>\n</ul>\n<p>The <code>part</code> parameter is case-insensitive.</p>\n<p>The <code>date</code> parameter specifies the date or the time to process. Either <a href=\"#../data_types/date/\">Date</a> or <a href=\"#../data_types/datetime/\">DateTime</a> type is supported.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">EXTRACT</span><span class=\"p\">(</span><span class=\"k\">DAY</span> <span class=\"k\">FROM</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2017-06-15&#39;</span><span class=\"p\">));</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">EXTRACT</span><span class=\"p\">(</span><span class=\"k\">MONTH</span> <span class=\"k\">FROM</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2017-06-15&#39;</span><span class=\"p\">));</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">EXTRACT</span><span class=\"p\">(</span><span class=\"k\">YEAR</span> <span class=\"k\">FROM</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2017-06-15&#39;</span><span class=\"p\">));</span>\n</code></pre></div>\n\n\n<p>In the following example we create a table and insert into it a value with the <code>DateTime</code> type.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">Orders</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">OrderId</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">OrderName</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">OrderDate</span> <span class=\"n\">DateTime</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">Orders</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Jarlsberg Cheese&#39;</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2008-10-11 13:23:44&#39;</span><span class=\"p\">));</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderYear</span><span class=\"p\">,</span>\n    <span class=\"n\">toMonth</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderMonth</span><span class=\"p\">,</span>\n    <span class=\"n\">toDayOfMonth</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderDay</span><span class=\"p\">,</span>\n    <span class=\"n\">toHour</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderHour</span><span class=\"p\">,</span>\n    <span class=\"n\">toMinute</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderMinute</span><span class=\"p\">,</span>\n    <span class=\"n\">toSecond</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderSecond</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">Orders</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500OrderYear\u2500\u252c\u2500OrderMonth\u2500\u252c\u2500OrderDay\u2500\u252c\u2500OrderHour\u2500\u252c\u2500OrderMinute\u2500\u252c\u2500OrderSecond\u2500\u2510\n\u2502      2008 \u2502         10 \u2502       11 \u2502        13 \u2502          23 \u2502          44 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>You can see more examples in <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/tests/queries/0_stateless/00619_extract.sql\" rel=\"external nofollow noreferrer\">tests</a>.</p>\n<h4 id=\"operator-interval\">INTERVAL<a class=\"headerlink\" href=\"#operator-interval\" title=\"Permanent link\">&para;</a></h4>\n<p>Creates an <a href=\"#../data_types/special_data_types/interval/\">Interval</a>-type value that should be used in arithmetical operations with <a href=\"#../data_types/date/\">Date</a> and <a href=\"#../data_types/datetime/\">DateTime</a>-type values.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">current_date_time</span><span class=\"p\">,</span> <span class=\"n\">current_date_time</span> <span class=\"o\">+</span> <span class=\"nb\">INTERVAL</span> <span class=\"mi\">4</span> <span class=\"k\">DAY</span> <span class=\"o\">+</span> <span class=\"nb\">INTERVAL</span> <span class=\"mi\">3</span> <span class=\"n\">HOUR</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500current_date_time\u2500\u252c\u2500plus(plus(now(), toIntervalDay(4)), toIntervalHour(3))\u2500\u2510\n\u2502 2019-10-23 11:16:28 \u2502                                    2019-10-27 14:16:28 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#../data_types/special_data_types/interval/\">Interval</a> data type</li>\n<li><a href=\"#function-tointerval\">toInterval</a> type convertion functions</li>\n</ul>\n<h3 id=\"operator_case\">CASE\u6761\u4ef6\u8868\u8fbe\u5f0f<a class=\"headerlink\" href=\"#operator_case\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CASE</span> <span class=\"p\">[</span><span class=\"n\">x</span><span class=\"p\">]</span>\n    <span class=\"k\">WHEN</span> <span class=\"n\">a</span> <span class=\"k\">THEN</span> <span class=\"n\">b</span>\n    <span class=\"p\">[</span><span class=\"k\">WHEN</span> <span class=\"p\">...</span> <span class=\"k\">THEN</span> <span class=\"p\">...]</span>\n    <span class=\"p\">[</span><span class=\"k\">ELSE</span> <span class=\"k\">c</span><span class=\"p\">]</span>\n<span class=\"k\">END</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u6307\u5b9a\u4e86 <code>x</code> \uff0c\u8be5\u8868\u8fbe\u5f0f\u4f1a\u8f6c\u6362\u4e3a <code>transform(x, [a, ...], [b, ...], c)</code> \u51fd\u6570\u3002\u5426\u5219\u8f6c\u6362\u4e3a <code>multiIf(a, b, ..., c)</code></p>\n<p");
            
            document.write(">\u5982\u679c\u8be5\u8868\u8fbe\u5f0f\u4e2d\u6ca1\u6709 <code>ELSE c</code> \u5b50\u53e5\uff0c\u5219\u9ed8\u8ba4\u503c\u5c31\u662f <code>NULL</code></p>\n<p>\u4f46 <code>transform</code> \u51fd\u6570\u4e0d\u652f\u6301 <code>NULL</code> <!-- If <code>x</code> is NULL, return NULL; if <code>c</code> is NULL, work fine. --></p>\n<h3 id=\"lian-jie-yun-suan-fu\">\u8fde\u63a5\u8fd0\u7b97\u7b26<a class=\"headerlink\" href=\"#lian-jie-yun-suan-fu\" title=\"Permanent link\">&para;</a></h3>\n<p><code>s1 || s2</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>concat(s1, s2)</code></p>\n<h3 id=\"chuang-jian-lambda-han-shu\">\u521b\u5efa Lambda \u51fd\u6570<a class=\"headerlink\" href=\"#chuang-jian-lambda-han-shu\" title=\"Permanent link\">&para;</a></h3>\n<p><code>x -&gt; expr</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>lambda(x, expr)</code></p>\n<p>\u63a5\u4e0b\u6765\u7684\u8fd9\u4e9b\u64cd\u4f5c\u7b26\u56e0\u4e3a\u5176\u672c\u8eab\u662f\u62ec\u53f7\u6ca1\u6709\u4f18\u5148\u7ea7\uff1a</p>\n<h3 id=\"chuang-jian-shu-zu_1\">\u521b\u5efa\u6570\u7ec4<a class=\"headerlink\" href=\"#chuang-jian-shu-zu_1\" title=\"Permanent link\">&para;</a></h3>\n<p><code>[x1, ...]</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>array(x1, ...)</code></p>\n<h3 id=\"chuang-jian-yuan-zu_1\">\u521b\u5efa\u5143\u7ec4<a class=\"headerlink\" href=\"#chuang-jian-yuan-zu_1\" title=\"Permanent link\">&para;</a></h3>\n<p><code>(x1, x2, ...)</code> \u2013 \u5bf9\u5e94\u51fd\u6570 <code>tuple(x2, x2, ...)</code></p>\n<h3 id=\"jie-he-fang-shi\">\u7ed3\u5408\u65b9\u5f0f<a class=\"headerlink\" href=\"#jie-he-fang-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6240\u6709\u7684\u540c\u7ea7\u64cd\u4f5c\u7b26\u4ece\u5de6\u5230\u53f3\u7ed3\u5408\u3002\u4f8b\u5982\uff0c <code>1 + 2 + 3</code> \u4f1a\u8f6c\u6362\u6210 <code>plus(plus(1, 2), 3)</code>\u3002<br />\n\u6240\u4ee5\uff0c\u6709\u65f6\u4ed6\u4eec\u4f1a\u8ddf\u6211\u4eec\u9884\u671f\u7684\u4e0d\u592a\u4e00\u6837\u3002\u4f8b\u5982\uff0c <code>SELECT 4 &gt; 2 &gt; 3</code> \u7684\u7ed3\u679c\u662f0\u3002</p>\n<p>\u4e3a\u4e86\u9ad8\u6548\uff0c <code>and</code> \u548c <code>or</code> \u51fd\u6570\u652f\u6301\u4efb\u610f\u591a\u53c2\u6570\uff0c\u4e00\u8fde\u4e32\u7684 <code>AND</code> \u548c <code>OR</code> \u8fd0\u7b97\u7b26\u4f1a\u8f6c\u6362\u6210\u5176\u5bf9\u5e94\u7684\u5355\u4e2a\u51fd\u6570\u3002</p>\n<h3 id=\"pan-duan-shi-fou-wei-null\">\u5224\u65ad\u662f\u5426\u4e3a <code>NULL</code><a class=\"headerlink\" href=\"#pan-duan-shi-fou-wei-null\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse \u652f\u6301 <code>IS NULL</code> \u548c <code>IS NOT NULL</code> \u3002</p>\n<h4 id=\"operator-is-null\">IS NULL<a class=\"headerlink\" href=\"#operator-is-null\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>\u5bf9\u4e8e <a href=\"#../data_types/nullable/\">Nullable</a> \u7c7b\u578b\u7684\u503c\uff0c <code>IS NULL</code> \u4f1a\u8fd4\u56de\uff1a<ul>\n<li><code>1</code> \u503c\u4e3a <code>NULL</code></li>\n<li><code>0</code> \u5426\u5219</li>\n</ul>\n</li>\n<li>\u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c <code>IS NULL</code> \u603b\u4f1a\u8fd4\u56de <code>0</code></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>:<span class=\"o\">)</span> SELECT x+100 FROM t_null WHERE y IS NULL\n\nSELECT x + <span class=\"m\">100</span>\nFROM t_null\nWHERE isNull<span class=\"o\">(</span>y<span class=\"o\">)</span>\n\n\u250c\u2500plus<span class=\"o\">(</span>x, <span class=\"m\">100</span><span class=\"o\">)</span>\u2500\u2510\n\u2502          <span class=\"m\">101</span> \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n<span class=\"m\">1</span> rows in set. Elapsed: <span class=\"m\">0</span>.002 sec.\n</code></pre></div>\n\n\n<h4 id=\"is-not-null\">IS NOT NULL<a class=\"headerlink\" href=\"#is-not-null\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>\u5bf9\u4e8e <a href=\"#../data_types/nullable/\">Nullable</a> \u7c7b\u578b\u7684\u503c\uff0c <code>IS NOT NULL</code> \u4f1a\u8fd4\u56de\uff1a<ul>\n<li><code>0</code> \u503c\u4e3a <code>NULL</code></li>\n<li><code>1</code> \u5426\u5219</li>\n</ul>\n</li>\n<li>\u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c<code>IS NOT NULL</code> \u603b\u4f1a\u8fd4\u56de <code>1</code></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>:<span class=\"o\">)</span> SELECT * FROM t_null WHERE y IS NOT NULL\n\nSELECT *\nFROM t_null\nWHERE isNotNull<span class=\"o\">(</span>y<span class=\"o\">)</span>\n\n\u250c\u2500x\u2500\u252c\u2500y\u2500\u2510\n\u2502 <span class=\"m\">2</span> \u2502 <span class=\"m\">3</span> \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518\n\n<span class=\"m\">1</span> rows in set. Elapsed: <span class=\"m\">0</span>.002 sec.\n</code></pre></div>\n\n\n<p><a name=\"../../../../query_language/syntax/\"></a><a name=\"../../../query_language/syntax/\"></a><a name=\"syntax/\"></a><a name=\"../../../../../query_language/syntax/\"></a><a name=\"../../query_language/syntax/\"></a><a name=\"query_language/syntax/\"></a><a name=\"../query_language/syntax/\"></a></p>\n<h2 id=\"syntax\">Syntax<a class=\"headerlink\" href=\"#syntax\" title=\"Permanent link\">&para;</a></h2>\n<p>There are two types of parsers in the system: the full SQL parser (a recursive descent parser), and the data format parser (a fast stream parser).<br />\nIn all cases except the <code>INSERT</code> query, only the full SQL parser is used.<br />\nThe <code>INSERT</code> query uses both parsers:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello, world&#39;</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;def&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The <code>INSERT INTO t VALUES</code> fragment is parsed by the full parser, and the data <code>(1, 'Hello, world'), (2, 'abc'), (3, 'def')</code> is parsed by the fast stream parser. You can also turn on the full parser for the data by using the <a href=\"#settings-input_format_values_interpret_expressions\">input_format_values_interpret_expressions</a> setting. When <code>input_format_values_interpret_expressions = 1</code>, ClickHouse first tries to parse values with the fast stream parser. If it fails, ClickHouse tries to use the full parser for the data, treating it like an SQL <a href=\"#syntax-expressions\">expression</a>.</p>\n<p>Data can have any format. When a query is received, the server calculates no more than <a href=\"#settings-max_query_size\">max_query_size</a> bytes of the request in RAM (by default, 1 MB), and the rest is stream parsed.<br />\nThis means the system doesn't have problems with large <code>INSERT</code> queries, like MySQL does.</p>\n<p>When using the <code>Values</code> format in an <code>INSERT</code> query, it may seem that data is parsed the same as expressions in a <code>SELECT</code> query, but this is not true. The <code>Values</code> format is much more limited.</p>\n<p>Next we will cover the full parser. For more information about format parsers, see the <a href=\"#../interfaces/formats/\">Formats</a> section.</p>\n<h3 id=\"spaces\">Spaces<a class=\"headerlink\" href=\"#spaces\" title=\"Permanent link\">&para;</a></h3>\n<p>There may be any number of space symbols between syntactical constructions (including the beginning and end of a query). Space symbols include the space, tab, line feed, CR, and form feed.</p>\n<h3 id=\"comments\">Comments<a class=\"headerlink\" href=\"#comments\" title=\"Permanent link\">&para;</a></h3>\n<p>SQL-style and C-style comments are supported.<br />\nSQL-style comments: from <code>--</code> to the end of the line. The space after <code>--</code> can be omitted.<br />\nComments in C-style: from <code>/*</code> to <code>*/</code>. These comments can be multiline. Spaces are not required here, either.</p>\n<h3 id=\"syntax-keywords\">Keywords<a class=\"headerlink\" href=\"#syntax-keywords\" title=\"Permanent link\">&para;</a></h3>\n<p>Keywords (such as <code>SELECT</code>) are not case-sensitive. Everything else (column names, functions, and so on), in contrast to standard SQL, is case-sensitive.</p>\n<p>Keywords are not reserved (they are just parsed as keywords in the corresponding context). If you use <a href=\"#syntax-identifiers\">identifiers</a> the same as the keywords, enclose them into quotes. For example, the query <code>SELECT \"FROM\" FROM table_name</code> is valid if the table <code>table_name</code> has column with the name <code>\"FROM\"</code>.</p>\n<h3 id=\"syntax-identifiers\">Identifiers<a class=\"headerlink\" href=\"#syntax-identifiers\" title=\"Permanent link\">&para;</a></h3>\n<p>Identifiers are:</p>\n<ul>\n<li>Cluster, database, table, partition and column names.</li>\n<li>Functions.</li>\n<li>Data types.</li>\n<li><a href=\"#syntax-expression_aliases\">Expression aliases</a>.</li>\n</ul>\n<p>Identifiers can be quoted or non-quoted. It is recommended to use non-quoted identifiers.</p>\n<p>Non-quoted identifiers must match the regex <code>^[a-zA-Z_][0-9a-zA-Z_]*$</code> and can not be equal to <a href=\"#syntax-keywords\">keywords</a>.  Examples: <code>x, _1, X_y__Z123_.</code></p>\n<p>If you want to use identifiers the same as keywords or you want to use other symbols in identifiers, quote it using double quotes or backticks, for example, <code>\"id\"</code>, <code>`id`</code>.</p>\n<h3 id=\"literals\">Literals<a class=\"headerlink\" href=\"#literals\" title=\"Permanent link\">&para;</a></h3>\n<p>There are: numeric, string, compound and <code>NULL</code> literals.</p>\n<h4 id=\"numeric\">Numeric<a class=\"headerlink\" href=\"#numeric\" title=\"Permanent link\">&para;</a></h4>\n<p>A numeric literal tries to be parsed:</p>\n<ul>\n<li>First as a 64-bit signed number, using the <a href=\"https://en.cppreference.com/w/cpp/string/byte/strtoul\" rel=\"external nofollow noreferrer\">strtoull</a> function.</li>\n<li>If unsuccessful, as a 64-bit unsigned number, using the <a href=\"https://en.cppreference.com/w/cpp/string/byte/strtol\" rel=\"external nofollow noreferrer\">strtoll</a> function.</li>\n<li>If unsuccessful, as a floating-point number using the <a href=\"https://en.cppreference.com/w/cpp/string/byte/strtof\" rel=\"external nofollow noreferrer\">strtod</a> function.</li>\n<li>Otherwise, an error is returned.</li>\n</ul>\n<p>The corresponding value will have the smallest type that the value fits in.<br />\nFor example, 1 is parsed as <code>UInt8</code>, but 256 is parsed as <code>UInt16</code>. For more information, see <a href=\"#../data_types/\">Data types</a>.</p>\n<p>Examples: <code>1</code>, <code>18446744073709551615</code>, <code>0xDEADBEEF</code>, <code>01</code>, <code>0.1</code>, <code>1e100</code>, <code>-1e-100</code>, <code>inf</code>, <code>nan</code>.</p>\n<h4 id=\"syntax-string-literal\">String<a class=\"headerlink\" href=\"#syntax-string-literal\" title=\"Permanent link\">&para;</a></h4>\n<p>Only string literals in single quotes are supported. The enclosed characters can be backslash-escaped. The following escape sequences have a corresponding special value: <code>\\b</code>, <code>\\f</code>, <code>\\r</code>, <code>\\n</code>, <code>\\t</code>, <code>\\0</code>, <code>\\a</code>, <code>\\v</code>, <code>\\xHH</code>. In all other cases, escape sequences in the format <code>\\c</code>, where <code>c</code> is any character, are converted to <code>c</code>. This means that you can use the sequences <code>\\'</code>and<code>\\\\</code>. The value will have the <a href=\"#../data_types/string/\">String</a> type.</p>\n<p>The minimum set of ch");
            
            document.write("aracters that you need to escape in string literals: <code>'</code> and <code>\\</code>. Single quote can be escaped with the single quote, literals <code>'It\\'s'</code> and <code>'It''s'</code> are equal.</p>\n<h4 id=\"compound\">Compound<a class=\"headerlink\" href=\"#compound\" title=\"Permanent link\">&para;</a></h4>\n<p>Constructions are supported for arrays: <code>[1, 2, 3]</code> and tuples: <code>(1, 'Hello, world!', 2)</code>..<br />\nActually, these are not literals, but expressions with the array creation operator and the tuple creation operator, respectively.<br />\nAn array must consist of at least one item, and a tuple must have at least two items.<br />\nTuples have a special purpose for use in the <code>IN</code> clause of a <code>SELECT</code> query. Tuples can be obtained as the result of a query, but they can't be saved to a database (with the exception of <a href=\"#../operations/table_engines/memory/\">Memory</a> tables).</p>\n<h4 id=\"null-literal\">NULL<a class=\"headerlink\" href=\"#null-literal\" title=\"Permanent link\">&para;</a></h4>\n<p>Indicates that the value is missing.</p>\n<p>In order to store <code>NULL</code> in a table field, it must be of the <a href=\"#../data_types/nullable/\">Nullable</a> type.</p>\n<p>Depending on the data format (input or output), <code>NULL</code> may have a different representation. For more information, see the documentation for <a href=\"#formats\">data formats</a>.</p>\n<p>There are many nuances to processing <code>NULL</code>. For example, if at least one of the arguments of a comparison operation is <code>NULL</code>, the result of this operation will also be <code>NULL</code>. The same is true for multiplication, addition, and other operations. For more information, read the documentation for each operation.</p>\n<p>In queries, you can check <code>NULL</code> using the <a href=\"#operator-is-null\">IS NULL</a> and <a href=\"#operators/\">IS NOT NULL</a> operators and the related functions <code>isNull</code> and <code>isNotNull</code>.</p>\n<h3 id=\"functions\">Functions<a class=\"headerlink\" href=\"#functions\" title=\"Permanent link\">&para;</a></h3>\n<p>Functions are written like an identifier with a list of arguments (possibly empty) in brackets. In contrast to standard SQL, the brackets are required, even for an empty arguments list. Example: <code>now()</code>.<br />\nThere are regular and aggregate functions (see the section \"Aggregate functions\"). Some aggregate functions can contain two lists of arguments in brackets. Example: <code>quantile (0.9) (x)</code>. These aggregate functions are called \"parametric\" functions, and the arguments in the first list are called \"parameters\". The syntax of aggregate functions without parameters is the same as for regular functions.</p>\n<h3 id=\"operators\">Operators<a class=\"headerlink\" href=\"#operators\" title=\"Permanent link\">&para;</a></h3>\n<p>Operators are converted to their corresponding functions during query parsing, taking their priority and associativity into account.<br />\nFor example, the expression <code>1 + 2 * 3 + 4</code> is transformed to <code>plus(plus(1, multiply(2, 3)), 4)</code>.</p>\n<h3 id=\"data-types-and-database-table-engines\">Data Types and Database Table Engines<a class=\"headerlink\" href=\"#data-types-and-database-table-engines\" title=\"Permanent link\">&para;</a></h3>\n<p>Data types and table engines in the <code>CREATE</code> query are written the same way as identifiers or functions. In other words, they may or may not contain an arguments list in brackets. For more information, see the sections \"Data types,\" \"Table engines,\" and \"CREATE\".</p>\n<h3 id=\"syntax-expression_aliases\">Expression Aliases<a class=\"headerlink\" href=\"#syntax-expression_aliases\" title=\"Permanent link\">&para;</a></h3>\n<p>An alias is a user-defined name for an expression in a query.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">expr</span> <span class=\"k\">AS</span> <span class=\"k\">alias</span>\n</code></pre></div>\n\n\n<ul>\n<li>\n<p><code>AS</code> \u2014 The keyword for defining aliases. You can define the alias for a table name or a column name in a <code>SELECT</code> clause without using the <code>AS</code> keyword.</p>\n<p>For example, <code>SELECT table_name_alias.column_name FROM table_name table_name_alias</code>.</p>\n<p>In the <a href=\"#type_conversion_function-cast\">CAST</a> function, the <code>AS</code> keyword has another meaning. See the description of the function.</p>\n</li>\n<li>\n<p><code>expr</code> \u2014 Any expression supported by ClickHouse.</p>\n<p>For example, <code>SELECT column_name * 2 AS double FROM some_table</code>.</p>\n</li>\n<li>\n<p><code>alias</code> \u2014 Name for <code>expr</code>. Aliases should comply with the <a href=\"#syntax-identifiers\">identifiers</a> syntax.</p>\n<p>For example, <code>SELECT \"table t\".column_name FROM table_name AS \"table t\"</code>.</p>\n</li>\n</ul>\n<h4 id=\"notes-on-usage\">Notes on Usage<a class=\"headerlink\" href=\"#notes-on-usage\" title=\"Permanent link\">&para;</a></h4>\n<p>Aliases are global for a query or subquery and you can define an alias in any part of a query for any expression. For example, <code>SELECT (1 AS n) + 2, n</code>.</p>\n<p>Aliases are not visible in subqueries and between subqueries. For example, while executing the query <code>SELECT (SELECT sum(b.a) + num FROM b) - a.a AS num FROM a</code> ClickHouse generates the exception <code>Unknown identifier: num</code>.</p>\n<p>If an alias is defined for the result columns in the <code>SELECT</code> clause of a subquery, these columns are visible in the outer query. For example, <code>SELECT n + m FROM (SELECT 1 AS n, 2 AS m)</code>.</p>\n<p>Be careful with aliases that are the same as column or table names. Let's consider the following example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">a</span> <span class=\"nb\">Int</span><span class=\"p\">,</span>\n    <span class=\"n\">b</span> <span class=\"nb\">Int</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">argMax</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">),</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">b</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">b</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Received exception from server (version 18.14.17):\nCode: 184. DB::Exception: Received from localhost:9000, 127.0.0.1. DB::Exception: Aggregate function sum(b) is found inside another aggregate function in query.\n</code></pre></div>\n\n\n<p>In this example, we declared table <code>t</code> with column <code>b</code>. Then, when selecting data, we defined the <code>sum(b) AS b</code> alias. As aliases are global, ClickHouse substituted the literal <code>b</code> in the expression <code>argMax(a, b)</code> with the expression <code>sum(b)</code>. This substitution caused the exception.</p>\n<h3 id=\"asterisk\">Asterisk<a class=\"headerlink\" href=\"#asterisk\" title=\"Permanent link\">&para;</a></h3>\n<p>In a <code>SELECT</code> query, an asterisk can replace the expression. For more information, see the section \"SELECT\".</p>\n<h3 id=\"syntax-expressions\">Expressions<a class=\"headerlink\" href=\"#syntax-expressions\" title=\"Permanent link\">&para;</a></h3>\n<p>An expression is a function, identifier, literal, application of an operator, expression in brackets, subquery, or asterisk. It can also contain an alias.<br />\nA list of expressions is one or more expressions separated by commas.<br />\nFunctions and operators, in turn, can have expressions as arguments.</p>\n<p><a name=\"operations/\"></a><a name=\"../../../operations/\"></a><a name=\"../../../../operations/\"></a><a name=\"../../../../../operations/\"></a><a name=\"../operations/\"></a><a name=\"../../operations/\"></a></p>\n<h2 id=\"operations\">Operations<a class=\"headerlink\" href=\"#operations\" title=\"Permanent link\">&para;</a></h2>\n<p><a name=\"../operations/requirements/\"></a><a name=\"../../../operations/requirements/\"></a><a name=\"requirements/\"></a><a name=\"operations/requirements/\"></a><a name=\"../../operations/requirements/\"></a><a name=\"../../../../../operations/requirements/\"></a><a name=\"../../../../operations/requirements/\"></a></p>\n<h2 id=\"requirements\">Requirements<a class=\"headerlink\" href=\"#requirements\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"cpu_1\">CPU<a class=\"headerlink\" href=\"#cpu_1\" title=\"Permanent link\">&para;</a></h3>\n<p>For installation from prebuilt deb packages, use a CPU with x86_64 architecture and support for SSE 4.2 instructions. To run ClickHouse with processors that do not support SSE 4.2 or have AArch64 or PowerPC64LE architecture, you should build ClickHouse from sources.</p>\n<p>ClickHouse implements parallel data processing and uses all the hardware resources available. When choosing a processor, take into account that ClickHouse works more efficiently at configurations with a large number of cores but a lower clock rate than at configurations with fewer cores and a higher clock rate. For example, 16 cores with 2600 MHz is preferable to 8 cores with 3600 MHz.</p>\n<p>Use of <strong>Turbo Boost</strong> and <strong>hyper-threading</strong> technologies is recommended. It significantly improves performance with a typical load.</p>\n<h3 id=\"ram\">RAM<a class=\"headerlink\" href=\"#ram\" title=\"Permanent link\">&para;</a></h3>\n<p>We recommend to use a minimum of 4GB of RAM in order to perform non-trivial queries. The ClickHouse server can run with a much smaller amount of RAM, but it requires memory for processing queries.</p>\n<p>The required volume of RAM depends on:</p>\n<ul>\n<li>The complexity of queries.</li>\n<li>The amount of data that is processed in queries.</li>\n</ul>\n<p>To calculate the required volume of RAM, you should estimate the size of temporary data for <a href=\"#select-group-by-clause\">GROUP BY</a>, <a href=\"#select-disti");
            
            document.write("nct\">DISTINCT</a>, <a href=\"#select-join\">JOIN</a> and other operations you use.</p>\n<p>ClickHouse can use external memory for temporary data. See <a href=\"#select-group-by-in-external-memory\">GROUP BY in External Memory</a> for details.</p>\n<h3 id=\"swap-file\">Swap File<a class=\"headerlink\" href=\"#swap-file\" title=\"Permanent link\">&para;</a></h3>\n<p>Disable the swap file for production environments.</p>\n<h3 id=\"storage-subsystem\">Storage Subsystem<a class=\"headerlink\" href=\"#storage-subsystem\" title=\"Permanent link\">&para;</a></h3>\n<p>You need to have 2GB of free disk space to install ClickHouse.</p>\n<p>The volume of storage required for your data should be calculated separately. Assessment should include:</p>\n<ul>\n<li>\n<p>Estimation of the data volume.</p>\n<p>You can take a sample of the data and get the average size of a row from it. Then multiply the value by the number of rows you plan to store.</p>\n</li>\n<li>\n<p>The data compression coefficient.</p>\n<p>To estimate the data compression coefficient, load a sample of your data into ClickHouse and compare the actual size of the data with the size of the table stored. For example, clickstream data is usually compressed by 6-10 times.</p>\n</li>\n</ul>\n<p>To calculate the final volume of data to be stored, apply the compression coefficient to the estimated data volume. If you plan to store data in several replicas, then multiply the estimated volume by the number of replicas.</p>\n<h3 id=\"network\">Network<a class=\"headerlink\" href=\"#network\" title=\"Permanent link\">&para;</a></h3>\n<p>If possible, use networks of 10G or higher class.</p>\n<p>The network bandwidth is critical for processing distributed queries with a large amount of intermediate data. In addition, network speed affects replication processes.</p>\n<h3 id=\"software\">Software<a class=\"headerlink\" href=\"#software\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse is developed for the Linux family of operating systems. The recommended Linux distribution is Ubuntu. The <code>tzdata</code> package should be installed in the system.</p>\n<p>ClickHouse can also work in other operating system families. See details in the <a href=\"#../getting_started/\">Getting started</a> section of the documentation.<br />\n<a name=\"monitoring/\"></a><a name=\"../../../operations/monitoring/\"></a><a name=\"../../../../operations/monitoring/\"></a><a name=\"../../operations/monitoring/\"></a><a name=\"../../../../../operations/monitoring/\"></a><a name=\"operations/monitoring/\"></a><a name=\"../operations/monitoring/\"></a></p>\n<h2 id=\"monitoring\">Monitoring<a class=\"headerlink\" href=\"#monitoring\" title=\"Permanent link\">&para;</a></h2>\n<p>You can monitor:</p>\n<ul>\n<li>Utilization of hardware resources.</li>\n<li>ClickHouse server metrics.</li>\n</ul>\n<h3 id=\"resource-utilization\">Resource Utilization<a class=\"headerlink\" href=\"#resource-utilization\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse does not monitor the state of hardware resources by itself.</p>\n<p>It is highly recommended to set up monitoring for:</p>\n<ul>\n<li>\n<p>Load and temperature on processors.</p>\n<p>You can use <a href=\"https://en.wikipedia.org/wiki/Dmesg\" rel=\"external nofollow noreferrer\">dmesg</a>, <a href=\"https://www.linux.org/docs/man8/turbostat.html\" rel=\"external nofollow noreferrer\">turbostat</a> or other instruments.</p>\n</li>\n<li>\n<p>Utilization of storage system, RAM and network.</p>\n</li>\n</ul>\n<h3 id=\"clickhouse-server-metrics\">ClickHouse Server Metrics<a class=\"headerlink\" href=\"#clickhouse-server-metrics\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse server has embedded instruments for self-state monitoring.</p>\n<p>To track server events use server logs. See the <a href=\"#server_settings-logger\">logger</a> section of the configuration file.</p>\n<p>ClickHouse collects:</p>\n<ul>\n<li>Different metrics of how the server uses computational resources.</li>\n<li>Common statistics on query processing.</li>\n</ul>\n<p>You can find metrics in the <a href=\"#system_tables-metrics\">system.metrics</a>, <a href=\"#system_tables-events\">system.events</a>, and <a href=\"#system_tables-asynchronous_metrics\">system.asynchronous_metrics</a> tables.</p>\n<p>You can configure ClickHouse to export metrics to <a href=\"https://github.com/graphite-project\" rel=\"external nofollow noreferrer\">Graphite</a>. See the <a href=\"#server_settings-graphite\">Graphite section</a> in the ClickHouse server configuration file. Before configuring export of metrics, you should set up Graphite by following their official <a href=\"https://graphite.readthedocs.io/en/latest/install.html\" rel=\"external nofollow noreferrer\">guide</a>.</p>\n<p>Additionally, you can monitor server availability through the HTTP API. Send the <code>HTTP GET</code> request to <code>/</code>. If the server is available, it responds with <code>200 OK</code>.</p>\n<p>To monitor servers in a cluster configuration, you should set the <a href=\"#settings-max_replica_delay_for_distributed_queries\">max_replica_delay_for_distributed_queries</a> parameter and use the HTTP resource <code>/replicas-delay</code>. A request to <code>/replicas-delay</code> returns <code>200 OK</code> if the replica is available and is not delayed behind the other replicas. If a replica is delayed, it returns information about the gap.<br />\n<a name=\"../../operations/troubleshooting/\"></a><a name=\"../../../../../operations/troubleshooting/\"></a><a name=\"../../../operations/troubleshooting/\"></a><a name=\"../../../../operations/troubleshooting/\"></a><a name=\"operations/troubleshooting/\"></a><a name=\"troubleshooting/\"></a><a name=\"../operations/troubleshooting/\"></a></p>\n<h2 id=\"troubleshooting\">Troubleshooting<a class=\"headerlink\" href=\"#troubleshooting\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"#troubleshooting-installation-errors\">Installation</a></li>\n<li><a href=\"#troubleshooting-accepts-no-connections\">Connecting to the server</a></li>\n<li><a href=\"#troubleshooting-does-not-process-queries\">Query processing</a></li>\n<li><a href=\"#troubleshooting-too-slow\">Efficiency of query processing</a></li>\n</ul>\n<h3 id=\"troubleshooting-installation-errors\">Installation<a class=\"headerlink\" href=\"#troubleshooting-installation-errors\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"you-cannot-get-deb-packages-from-clickhouse-repository-with-apt-get\">You Cannot Get Deb Packages from ClickHouse Repository With apt-get<a class=\"headerlink\" href=\"#you-cannot-get-deb-packages-from-clickhouse-repository-with-apt-get\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Check firewall settings.</li>\n<li>If you cannot access the repository for any reason, download packages as described in the <a href=\"#../getting_started/\">Getting started</a> article and install them manually using the <code>sudo dpkg -i &lt;packages&gt;</code> command. You will also need the <code>tzdata</code> package.</li>\n</ul>\n<h3 id=\"troubleshooting-accepts-no-connections\">Connecting to the Server<a class=\"headerlink\" href=\"#troubleshooting-accepts-no-connections\" title=\"Permanent link\">&para;</a></h3>\n<p>Possible issues:</p>\n<ul>\n<li>The server is not running.</li>\n<li>Unexpected or wrong configuration parameters.</li>\n</ul>\n<h4 id=\"server-is-not-running\">Server Is Not Running<a class=\"headerlink\" href=\"#server-is-not-running\" title=\"Permanent link\">&para;</a></h4>\n<p><strong>Check if server is runnnig</strong></p>\n<p>Command:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo service clickhouse-server status\n</code></pre></div>\n\n\n<p>If the server is not running, start it with the command:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo service clickhouse-server start\n</code></pre></div>\n\n\n<p><strong>Check logs</strong></p>\n<p>The main log of <code>clickhouse-server</code> is in <code>/var/log/clickhouse-server/clickhouse-server.log</code> by default.</p>\n<p>If the server started successfully, you should see the strings:</p>\n<ul>\n<li><code>&lt;Information&gt; Application: starting up.</code> \u2014 Server started.</li>\n<li><code>&lt;Information&gt; Application: Ready for connections.</code> \u2014 Server is running and ready for connections.</li>\n</ul>\n<p>If <code>clickhouse-server</code> start failed with a configuration error, you should see the <code>&lt;Error&gt;</code> string with an error description. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code>2019.01.11 15:23:25.549505 [ 45 ] {} &lt;Error&gt; ExternalDictionaries: Failed reloading &#39;event2id&#39; external dictionary: Poco::Exception. Code: 1000, e.code() = 111, e.displayText() = Connection refused, e.what() = Connection refused\n</code></pre></div>\n\n\n<p>If you don't see an error at the end of the file, look through the entire file starting from the string:</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;Information&gt; Application: starting up.\n</code></pre></div>\n\n\n<p>If you try to start a second instance of <code>clickhouse-server</code> on the server, you see the following log:</p>\n<div class=\"codehilite\"><pre><span></span><code>2019.01.11 15:25:11.151730 [ 1 ] {} &lt;Information&gt; : Starting ClickHouse 19.1.0 with revision 54413\n2019.01.11 15:25:11.154578 [ 1 ] {} &lt;Information&gt; Application: starting up\n2019.01.11 15:25:11.156361 [ 1 ] {} &lt;Information&gt; StatusFile: Status file ./status already exists - unclean restart. Contents:\nPID: 8510\nStarted at: 2019-01-11 15:24:23\nRevision: 54413\n\n2019.01.11 15:25:11.156673 [ 1 ] {} &lt;Error&gt; Application: DB::Exception: Cannot lock file ./status. Another server instance in same directory is already running.\n2019.01.11 15:25:11.156682 [ 1 ] {} &lt;Information&gt; Application: shutting down\n2019.01.11 15:25:11.156686 [ 1 ] {} &lt;Debug&gt; Application: Uninitializing subsystem: Logging Subsystem\n2019.01.11 15:25:11.156716 [ 2 ] {} &lt;Information&gt; BaseDaemon: Stop SignalListener thread\n</code></pre></div>\n\n\n<p><strong>See system.d logs</strong></p>\n<p>If you don't find any useful information in <code>clickhouse-server</code> logs or there aren't any logs, you can view <code>system.d</code> logs using the command:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo journalctl -u clickhouse-server\n</code></pre></div>\n\n\n<p><strong>Start clickhouse-server in inter");
            
            document.write("active mode</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo -u clickhouse /usr/bin/clickhouse-server --config-file /etc/clickhouse-server/config.xml\n</code></pre></div>\n\n\n<p>This command starts the server as an interactive app with standard parameters of the autostart script. In this mode <code>clickhouse-server</code> prints all the event messages in the console.</p>\n<h4 id=\"configuration-parameters\">Configuration Parameters<a class=\"headerlink\" href=\"#configuration-parameters\" title=\"Permanent link\">&para;</a></h4>\n<p>Check:</p>\n<ul>\n<li>\n<p>Docker settings.</p>\n<p>If you run ClickHouse in Docker in an IPv6 network, make sure that <code>network=host</code> is set.</p>\n</li>\n<li>\n<p>Endpoint settings.</p>\n<p>Check <a href=\"#server_settings-listen_host\">listen_host</a> and <a href=\"#server_settings-tcp_port\">tcp_port</a> settings.</p>\n<p>ClickHouse server accepts localhost connections only by default.</p>\n</li>\n<li>\n<p>HTTP protocol settings.</p>\n<p>Check protocol settings for the HTTP API.</p>\n</li>\n<li>\n<p>Secure connection settings.</p>\n<p>Check:</p>\n<ul>\n<li>The <a href=\"#server_settings-tcp_port_secure\">tcp_port_secure</a> setting.</li>\n<li>Settings for <a href=\"#server_settings-openssl\">SSL sertificates</a>.</li>\n</ul>\n<p>Use proper parameters while connecting. For example, use the <code>port_secure</code> parameter with <code>clickhouse_client</code>.</p>\n</li>\n<li>\n<p>User settings.</p>\n<p>You might be using the wrong user name or password.</p>\n</li>\n</ul>\n<h3 id=\"troubleshooting-does-not-process-queries\">Query Processing<a class=\"headerlink\" href=\"#troubleshooting-does-not-process-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>If ClickHouse is not able to process the query, it sends an error description to the client. In the <code>clickhouse-client</code> you get a description of the error in the console. If you are using the HTTP interface, ClickHouse sends the error description in the response body. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span> --data-binary <span class=\"s2\">&quot;SELECT a&quot;</span>\nCode: <span class=\"m\">47</span>, e.displayText<span class=\"o\">()</span> <span class=\"o\">=</span> DB::Exception: Unknown identifier: a. Note that there are no tables <span class=\"o\">(</span>FROM clause<span class=\"o\">)</span> in your query, context: required_names: <span class=\"s1\">&#39;a&#39;</span> source_tables: table_aliases: private_aliases: column_aliases: public_columns: <span class=\"s1\">&#39;a&#39;</span> masked_columns: array_join_columns: source_columns: , e.what<span class=\"o\">()</span> <span class=\"o\">=</span> DB::Exception\n</code></pre></div>\n\n\n<p>If you start <code>clickhouse-client</code> with the <code>stack-trace</code> parameter, ClickHouse returns the server stack trace with the description of an error.</p>\n<p>You might see a message about a broken connection. In this case, you can repeat the query. If the connection breaks every time you perform the query, check the server logs for errors.</p>\n<h3 id=\"troubleshooting-too-slow\">Efficiency of Query Processing<a class=\"headerlink\" href=\"#troubleshooting-too-slow\" title=\"Permanent link\">&para;</a></h3>\n<p>If you see that ClickHouse is working too slowly, you need to profile the load on the server resources and network for your queries.</p>\n<p>You can use the clickhouse-benchmark utility to profile queries. It shows the number of queries processed per second, the number of rows processed per second, and percentiles of query processing times.<br />\n<a name=\"tips/\"></a><a name=\"../../../operations/tips/\"></a><a name=\"operations/tips/\"></a><a name=\"../../operations/tips/\"></a><a name=\"../../../../../operations/tips/\"></a><a name=\"../operations/tips/\"></a><a name=\"../../../../operations/tips/\"></a></p>\n<h2 id=\"usage-recommendations\">Usage Recommendations<a class=\"headerlink\" href=\"#usage-recommendations\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"cpu_2\">CPU<a class=\"headerlink\" href=\"#cpu_2\" title=\"Permanent link\">&para;</a></h3>\n<p>The SSE 4.2 instruction set must be supported. Modern processors (since 2008) support it.</p>\n<p>When choosing a processor, prefer a large number of cores and slightly slower clock rate over fewer cores and a higher clock rate.<br />\nFor example, 16 cores with 2600 MHz is better than 8 cores with 3600 MHz.</p>\n<h3 id=\"hyper-threading\">Hyper-threading<a class=\"headerlink\" href=\"#hyper-threading\" title=\"Permanent link\">&para;</a></h3>\n<p>Don't disable hyper-threading. It helps for some queries, but not for others.</p>\n<h3 id=\"turbo-boost\">Turbo Boost<a class=\"headerlink\" href=\"#turbo-boost\" title=\"Permanent link\">&para;</a></h3>\n<p>Turbo Boost is highly recommended. It significantly improves performance with a typical load.<br />\nYou can use <code>turbostat</code> to view the CPU's actual clock rate under a load.</p>\n<h3 id=\"cpu-scaling-governor\">CPU Scaling Governor<a class=\"headerlink\" href=\"#cpu-scaling-governor\" title=\"Permanent link\">&para;</a></h3>\n<p>Always use the <code>performance</code> scaling governor. The <code>on-demand</code> scaling governor works much worse with constantly high demand.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"s1\">&#39;performance&#39;</span> <span class=\"p\">|</span> sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor\n</code></pre></div>\n\n\n<h3 id=\"cpu-limitations\">CPU Limitations<a class=\"headerlink\" href=\"#cpu-limitations\" title=\"Permanent link\">&para;</a></h3>\n<p>Processors can overheat. Use <code>dmesg</code> to see if the CPU's clock rate was limited due to overheating.<br />\nThe restriction can also be set externally at the datacenter level. You can use <code>turbostat</code> to monitor it under a load.</p>\n<h3 id=\"ram_1\">RAM<a class=\"headerlink\" href=\"#ram_1\" title=\"Permanent link\">&para;</a></h3>\n<p>For small amounts of data (up to \\~200 GB compressed), it is best to use as much memory as the volume of data.<br />\nFor large amounts of data and when processing interactive (online) queries, you should use a reasonable amount of RAM (128 GB or more) so the hot data subset will fit in the cache of pages.<br />\nEven for data volumes of \\~50 TB per server, using 128 GB of RAM significantly improves query performance compared to 64 GB.</p>\n<h3 id=\"swap-file_1\">Swap File<a class=\"headerlink\" href=\"#swap-file_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Always disable the swap file. The only reason for not doing this is if you are using ClickHouse on your personal laptop.</p>\n<h3 id=\"huge-pages\">Huge Pages<a class=\"headerlink\" href=\"#huge-pages\" title=\"Permanent link\">&para;</a></h3>\n<p>Always disable transparent huge pages. It interferes with memory allocators, which leads to significant performance degradation.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"s1\">&#39;never&#39;</span> <span class=\"p\">|</span> sudo tee /sys/kernel/mm/transparent_hugepage/enabled\n</code></pre></div>\n\n\n<p>Use <code>perf top</code> to watch the time spent in the kernel for memory management.<br />\nPermanent huge pages also do not need to be allocated.</p>\n<h3 id=\"storage-subsystem_1\">Storage Subsystem<a class=\"headerlink\" href=\"#storage-subsystem_1\" title=\"Permanent link\">&para;</a></h3>\n<p>If your budget allows you to use SSD, use SSD.<br />\nIf not, use HDD. SATA HDDs 7200 RPM will do.</p>\n<p>Give preference to a lot of servers with local hard drives over a smaller number of servers with attached disk shelves.<br />\nBut for storing archives with rare queries, shelves will work.</p>\n<h3 id=\"raid\">RAID<a class=\"headerlink\" href=\"#raid\" title=\"Permanent link\">&para;</a></h3>\n<p>When using HDD, you can combine their RAID-10, RAID-5, RAID-6 or RAID-50.<br />\nFor Linux, software RAID is better (with <code>mdadm</code>). We don't recommend using LVM.<br />\nWhen creating RAID-10, select the <code>far</code> layout.<br />\nIf your budget allows, choose RAID-10.</p>\n<p>If you have more than 4 disks, use RAID-6 (preferred) or RAID-50, instead of RAID-5.<br />\nWhen using RAID-5, RAID-6 or RAID-50, always increase stripe_cache_size, since the default value is usually not the best choice.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> <span class=\"m\">4096</span> <span class=\"p\">|</span> sudo tee /sys/block/md2/md/stripe_cache_size\n</code></pre></div>\n\n\n<p>Calculate the exact number from the number of devices and the block size, using the formula: <code>2 * num_devices * chunk_size_in_bytes / 4096</code>.</p>\n<p>A block size of 1025 KB is sufficient for all RAID configurations.<br />\nNever set the block size too small or too large.</p>\n<p>You can use RAID-0 on SSD.<br />\nRegardless of RAID use, always use replication for data security.</p>\n<p>Enable NCQ with a long queue. For HDD, choose the CFQ scheduler, and for SSD, choose noop. Don't reduce the 'readahead' setting.<br />\nFor HDD, enable the write cache.</p>\n<h3 id=\"file-system\">File System<a class=\"headerlink\" href=\"#file-system\" title=\"Permanent link\">&para;</a></h3>\n<p>Ext4 is the most reliable option. Set the mount options <code>noatime, nobarrier</code>.<br />\nXFS is also suitable, but it hasn't been as thoroughly tested with ClickHouse.<br />\nMost other file systems should also work fine. File systems with delayed allocation work better.</p>\n<h3 id=\"linux-kernel\">Linux Kernel<a class=\"headerlink\" href=\"#linux-kernel\" title=\"Permanent link\">&para;</a></h3>\n<p>Don't use an outdated Linux kernel.</p>\n<h3 id=\"network_1\">Network<a class=\"headerlink\" href=\"#network_1\" title=\"Permanent link\">&para;</a></h3>\n<p>If you are using IPv6, increase the size of the route cache.<br />\nThe Linux kernel prior to 3.2 had a multitude of problems with IPv6 implementation.</p>\n<p>Use at least a 10 GB network, if possible. 1 Gb will also work, but it will be much worse for patching replicas with tens of terabytes of data, or for processing distributed queries with a large amount of intermediate data.</p>\n<h3 id=\"zookeeper\">ZooKeeper<a class=\"headerlink\" href=\"#zookeeper\" title=\"Permanent link\">&para;</a></h3>\n<p>You are probably already using ZooKeeper for other pur");
            
            document.write("poses. You can use the same installation of ZooKeeper, if it isn't already overloaded.</p>\n<p>It's best to use a fresh version of ZooKeeper \u2013 3.4.9 or later. The version in stable Linux distributions may be outdated.</p>\n<p>You should never use manually written scripts to transfer data between different ZooKeeper clusters, because the result will be incorrect for sequential nodes. Never use the \"zkcopy\" utility for the same reason: <a href=\"https://github.com/ksprojects/zkcopy/issues/15\">https://github.com/ksprojects/zkcopy/issues/15</a></p>\n<p>If you want to divide an existing ZooKeeper cluster into two, the correct way is to increase the number of its replicas and then reconfigure it as two independent clusters.</p>\n<p>Do not run ZooKeeper on the same servers as ClickHouse. Because ZooKeeper is very sensitive for latency and ClickHouse may utilize all available system resources.</p>\n<p>With the default settings, ZooKeeper is a time bomb:</p>\n<blockquote>\n<p>The ZooKeeper server won't delete files from old snapshots and logs when using the default configuration (see autopurge), and this is the responsibility of the operator.</p>\n</blockquote>\n<p>This bomb must be defused.</p>\n<p>The ZooKeeper (3.5.1) configuration below is used in the Yandex.Metrica production environment as of May 20, 2017:</p>\n<p>zoo.cfg:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">## http://hadoop.apache.org/zookeeper/docs/current/zookeeperAdmin.html</span>\n\n<span class=\"c1\">## The number of milliseconds of each tick</span>\n<span class=\"nv\">tickTime</span><span class=\"o\">=</span><span class=\"m\">2000</span>\n<span class=\"c1\">## The number of ticks that the initial</span>\n<span class=\"c1\">## synchronization phase can take</span>\n<span class=\"nv\">initLimit</span><span class=\"o\">=</span><span class=\"m\">30000</span>\n<span class=\"c1\">## The number of ticks that can pass between</span>\n<span class=\"c1\">## sending a request and getting an acknowledgement</span>\n<span class=\"nv\">syncLimit</span><span class=\"o\">=</span><span class=\"m\">10</span>\n\n<span class=\"nv\">maxClientCnxns</span><span class=\"o\">=</span><span class=\"m\">2000</span>\n\n<span class=\"nv\">maxSessionTimeout</span><span class=\"o\">=</span><span class=\"m\">60000000</span>\n<span class=\"c1\">## the directory where the snapshot is stored.</span>\n<span class=\"nv\">dataDir</span><span class=\"o\">=</span>/opt/zookeeper/<span class=\"o\">{{</span> cluster<span class=\"o\">[</span><span class=\"s1\">&#39;name&#39;</span><span class=\"o\">]</span> <span class=\"o\">}}</span>/data\n<span class=\"c1\">## Place the dataLogDir to a separate physical disc for better performance</span>\n<span class=\"nv\">dataLogDir</span><span class=\"o\">=</span>/opt/zookeeper/<span class=\"o\">{{</span> cluster<span class=\"o\">[</span><span class=\"s1\">&#39;name&#39;</span><span class=\"o\">]</span> <span class=\"o\">}}</span>/logs\n\nautopurge.snapRetainCount<span class=\"o\">=</span><span class=\"m\">10</span>\nautopurge.purgeInterval<span class=\"o\">=</span><span class=\"m\">1</span>\n\n\n<span class=\"c1\">## To avoid seeks ZooKeeper allocates space in the transaction log file in</span>\n<span class=\"c1\">## blocks of preAllocSize kilobytes. The default block size is 64M. One reason</span>\n<span class=\"c1\">## for changing the size of the blocks is to reduce the block size if snapshots</span>\n<span class=\"c1\">## are taken more often. (Also, see snapCount).</span>\n<span class=\"nv\">preAllocSize</span><span class=\"o\">=</span><span class=\"m\">131072</span>\n\n<span class=\"c1\">## Clients can submit requests faster than ZooKeeper can process them,</span>\n<span class=\"c1\">## especially if there are a lot of clients. To prevent ZooKeeper from running</span>\n<span class=\"c1\">## out of memory due to queued requests, ZooKeeper will throttle clients so that</span>\n<span class=\"c1\">## there is no more than globalOutstandingLimit outstanding requests in the</span>\n<span class=\"c1\">## system. The default limit is 1,000.ZooKeeper logs transactions to a</span>\n<span class=\"c1\">## transaction log. After snapCount transactions are written to a log file a</span>\n<span class=\"c1\">## snapshot is started and a new transaction log file is started. The default</span>\n<span class=\"c1\">## snapCount is 10,000.</span>\n<span class=\"nv\">snapCount</span><span class=\"o\">=</span><span class=\"m\">3000000</span>\n\n<span class=\"c1\">## If this option is defined, requests will be will logged to a trace file named</span>\n<span class=\"c1\">## traceFile.year.month.day.</span>\n<span class=\"c1\">##traceFile=</span>\n\n<span class=\"c1\">## Leader accepts client connections. Default value is &quot;yes&quot;. The leader machine</span>\n<span class=\"c1\">## coordinates updates. For higher update throughput at thes slight expense of</span>\n<span class=\"c1\">## read throughput the leader can be configured to not accept clients and focus</span>\n<span class=\"c1\">## on coordination.</span>\n<span class=\"nv\">leaderServes</span><span class=\"o\">=</span>yes\n\n<span class=\"nv\">standaloneEnabled</span><span class=\"o\">=</span><span class=\"nb\">false</span>\n<span class=\"nv\">dynamicConfigFile</span><span class=\"o\">=</span>/etc/zookeeper-<span class=\"o\">{{</span> cluster<span class=\"o\">[</span><span class=\"s1\">&#39;name&#39;</span><span class=\"o\">]</span> <span class=\"o\">}}</span>/conf/zoo.cfg.dynamic\n</code></pre></div>\n\n\n<p>Java version:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Java(TM) SE Runtime Environment (build 1.8.0_25-b17)</span>\n<span class=\"err\">Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)</span>\n</code></pre></div>\n\n\n<p>JVM parameters:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nv\">NAME</span><span class=\"o\">=</span>zookeeper-<span class=\"o\">{{</span> cluster<span class=\"o\">[</span><span class=\"s1\">&#39;name&#39;</span><span class=\"o\">]</span> <span class=\"o\">}}</span>\n<span class=\"nv\">ZOOCFGDIR</span><span class=\"o\">=</span>/etc/<span class=\"nv\">$NAME</span>/conf\n\n<span class=\"c1\">## TODO this is really ugly</span>\n<span class=\"c1\">## How to find out, which jars are needed?</span>\n<span class=\"c1\">## seems, that log4j requires the log4j.properties file to be in the classpath</span>\n<span class=\"nv\">CLASSPATH</span><span class=\"o\">=</span><span class=\"s2\">&quot;</span><span class=\"nv\">$ZOOCFGDIR</span><span class=\"s2\">:/usr/build/classes:/usr/build/lib/*.jar:/usr/share/zookeeper/zookeeper-3.5.1-metrika.jar:/usr/share/zookeeper/slf4j-log4j12-1.7.5.jar:/usr/share/zookeeper/slf4j-api-1.7.5.jar:/usr/share/zookeeper/servlet-api-2.5-20081211.jar:/usr/share/zookeeper/netty-3.7.0.Final.jar:/usr/share/zookeeper/log4j-1.2.16.jar:/usr/share/zookeeper/jline-2.11.jar:/usr/share/zookeeper/jetty-util-6.1.26.jar:/usr/share/zookeeper/jetty-6.1.26.jar:/usr/share/zookeeper/javacc.jar:/usr/share/zookeeper/jackson-mapper-asl-1.9.11.jar:/usr/share/zookeeper/jackson-core-asl-1.9.11.jar:/usr/share/zookeeper/commons-cli-1.2.jar:/usr/src/java/lib/*.jar:/usr/etc/zookeeper&quot;</span>\n\n<span class=\"nv\">ZOOCFG</span><span class=\"o\">=</span><span class=\"s2\">&quot;</span><span class=\"nv\">$ZOOCFGDIR</span><span class=\"s2\">/zoo.cfg&quot;</span>\n<span class=\"nv\">ZOO_LOG_DIR</span><span class=\"o\">=</span>/var/log/<span class=\"nv\">$NAME</span>\n<span class=\"nv\">USER</span><span class=\"o\">=</span>zookeeper\n<span class=\"nv\">GROUP</span><span class=\"o\">=</span>zookeeper\n<span class=\"nv\">PIDDIR</span><span class=\"o\">=</span>/var/run/<span class=\"nv\">$NAME</span>\n<span class=\"nv\">PIDFILE</span><span class=\"o\">=</span><span class=\"nv\">$PIDDIR</span>/<span class=\"nv\">$NAME</span>.pid\n<span class=\"nv\">SCRIPTNAME</span><span class=\"o\">=</span>/etc/init.d/<span class=\"nv\">$NAME</span>\n<span class=\"nv\">JAVA</span><span class=\"o\">=</span>/usr/bin/java\n<span class=\"nv\">ZOOMAIN</span><span class=\"o\">=</span><span class=\"s2\">&quot;org.apache.zookeeper.server.quorum.QuorumPeerMain&quot;</span>\n<span class=\"nv\">ZOO_LOG4J_PROP</span><span class=\"o\">=</span><span class=\"s2\">&quot;INFO,ROLLINGFILE&quot;</span>\n<span class=\"nv\">JMXLOCALONLY</span><span class=\"o\">=</span><span class=\"nb\">false</span>\n<span class=\"nv\">JAVA_OPTS</span><span class=\"o\">=</span><span class=\"s2\">&quot;-Xms{{ cluster.get(&#39;xms&#39;,&#39;128M&#39;) }} \\</span>\n<span class=\"s2\">    -Xmx{{ cluster.get(&#39;xmx&#39;,&#39;1G&#39;) }} \\</span>\n<span class=\"s2\">    -Xloggc:/var/log/</span><span class=\"nv\">$NAME</span><span class=\"s2\">/zookeeper-gc.log \\</span>\n<span class=\"s2\">    -XX:+UseGCLogFileRotation \\</span>\n<span class=\"s2\">    -XX:NumberOfGCLogFiles=16 \\</span>\n<span class=\"s2\">    -XX:GCLogFileSize=16M \\</span>\n<span class=\"s2\">    -verbose:gc \\</span>\n<span class=\"s2\">    -XX:+PrintGCTimeStamps \\</span>\n<span class=\"s2\">    -XX:+PrintGCDateStamps \\</span>\n<span class=\"s2\">    -XX:+PrintGCDetails</span>\n<span class=\"s2\">    -XX:+PrintTenuringDistribution \\</span>\n<span class=\"s2\">    -XX:+PrintGCApplicationStoppedTime \\</span>\n<span class=\"s2\">    -XX:+PrintGCApplicationConcurrentTime \\</span>\n<span class=\"s2\">    -XX:+PrintSafepointStatistics \\</span>\n<span class=\"s2\">    -XX:+UseParNewGC \\</span>\n<span class=\"s2\">    -XX:+UseConcMarkSweepGC \\</span>\n<span class=\"s2\">-XX:+CMSParallelRemarkEnabled&quot;</span>\n</code></pre></div>\n\n\n<p>Salt init:</p>\n<div class=\"codehilite\"><pre><span></span><code>description &quot;zookeeper-{{ cluster[&#39;name&#39;] }} centralized coordination service&quot;\n\nstart on runlevel [2345]\nstop on runlevel [!2345]\n\nrespawn\n\nlimit nofile 8192 8192\n\npre-start script\n    [ -r &quot;/etc/zookeeper-{{ cluster[&#39;name&#39;] }}/conf/environment&quot; ] || exit 0\n    . /etc/zookeeper-{{ cluster[&#39;name&#39;] }}/conf/environment\n    [ -d <span class=\"nv\">$ZOO_LOG_DIR</span> ] || mkdir -p <span class=\"nv\">$ZOO_LOG_DIR</span>\n    chown <span class=\"nv\">$USER</span>:<span class=\"nv\">$GROUP</span> <span class=\"nv\">$ZOO_LOG_DIR</span>\nend script\n\nscript\n    . /etc/zookeeper-{{ cluster[&#39;name&#39;] }}/conf/environment\n    [ -r /etc/default/zookeeper ] <span class=\"err\">&amp;&amp;</span> . /etc/default/zookeeper\n    if [ -z &quot;<span class=\"nv\">$JMXDISABLE</span>&quot; ]; then\n        JAVA_OPTS=&quot;<span class=\"nv\">$JAVA_OPTS</span> -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=<span class=\"nv\">");
            
            document.write("$JMXLOCALONLY</span>&quot;\n    fi\n    exec start-stop-daemon --start -c <span class=\"nv\">$USER</span> --exec <span class=\"nv\">$JAVA</span> --name zookeeper-{{ cluster[&#39;name&#39;] }} \\\n        -- -cp <span class=\"nv\">$CLASSPATH</span> <span class=\"nv\">$JAVA_OPTS</span> -Dzookeeper.log.dir=<span class=\"cp\">${</span><span class=\"n\">ZOO_LOG_DIR</span><span class=\"cp\">}</span> \\\n        -Dzookeeper.root.logger=<span class=\"cp\">${</span><span class=\"n\">ZOO_LOG4J_PROP</span><span class=\"cp\">}</span> <span class=\"nv\">$ZOOMAIN</span> <span class=\"nv\">$ZOOCFG</span>\nend script\n</code></pre></div>\n\n\n<p><a name=\"../../../../../operations/update/\"></a><a name=\"../../operations/update/\"></a><a name=\"../../../../operations/update/\"></a><a name=\"../../../operations/update/\"></a><a name=\"../operations/update/\"></a><a name=\"update/\"></a><a name=\"operations/update/\"></a></p>\n<h2 id=\"clickhouse-update\">ClickHouse Update<a class=\"headerlink\" href=\"#clickhouse-update\" title=\"Permanent link\">&para;</a></h2>\n<p>If ClickHouse was installed from deb packages, execute the following commands on the server:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get update\n$ sudo apt-get install clickhouse-client clickhouse-server\n$ sudo service clickhouse-server restart\n</code></pre></div>\n\n\n<p>If you installed ClickHouse using something other than the recommended deb packages, use the appropriate update method.</p>\n<p>ClickHouse does not support a distributed update. The operation should be performed consecutively on each separate server. Do not update all the servers on a cluster simultaneously, or the cluster will be unavailable for some time.<br />\n<a name=\"operations/access_rights/\"></a><a name=\"access_rights/\"></a><a name=\"../../../../operations/access_rights/\"></a><a name=\"../../../operations/access_rights/\"></a><a name=\"../operations/access_rights/\"></a><a name=\"../../../../../operations/access_rights/\"></a><a name=\"../../operations/access_rights/\"></a></p>\n<h2 id=\"access-rights\">Access Rights<a class=\"headerlink\" href=\"#access-rights\" title=\"Permanent link\">&para;</a></h2>\n<p>Users and access rights are set up in the user config. This is usually <code>users.xml</code>.</p>\n<p>Users are recorded in the <code>users</code> section. Here is a fragment of the <code>users.xml</code> file:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">&lt;!-- Users and ACL. --&gt;</span>\n<span class=\"nt\">&lt;users&gt;</span>\n    <span class=\"c\">&lt;!-- If the user name is not specified, the &#39;default&#39; user is used. --&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"c\">&lt;!-- Password could be specified in plaintext or in SHA256 (in hex format).</span>\n\n<span class=\"c\">             If you want to specify password in plaintext (not recommended), place it in &#39;password&#39; element.</span>\n<span class=\"c\">             Example: &lt;password&gt;qwerty&lt;/password&gt;.</span>\n<span class=\"c\">             Password could be empty.</span>\n\n<span class=\"c\">             If you want to specify SHA256, place it in &#39;password_sha256_hex&#39; element.</span>\n<span class=\"c\">             Example: &lt;password_sha256_hex&gt;65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5&lt;/password_sha256_hex&gt;</span>\n\n<span class=\"c\">             How to generate decent password:</span>\n<span class=\"c\">             Execute: PASSWORD=$(base64 &lt; /dev/urandom | head -c8); echo &quot;$PASSWORD&quot;; echo -n &quot;$PASSWORD&quot; | sha256sum | tr -d &#39;-&#39;</span>\n<span class=\"c\">             In first line will be password and in second - corresponding SHA256.</span>\n<span class=\"c\">        --&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n\n        <span class=\"c\">&lt;!-- A list of networks that access is allowed from.</span>\n<span class=\"c\">            Each list item has one of the following forms:</span>\n<span class=\"c\">            &lt;ip&gt; The IP address or subnet mask. For example: 198.51.100.0/24 or 2001:DB8::/32.</span>\n<span class=\"c\">            &lt;host&gt; Host name. For example: example01. A DNS query is made for verification, and all addresses obtained are compared with the address of the customer.</span>\n<span class=\"c\">            &lt;host_regexp&gt; Regular expression for host names. For example, ^example\\d\\d-\\d\\d-\\d\\.yandex\\.ru$</span>\n<span class=\"c\">                To check it, a DNS PTR request is made for the client&#39;s address and a regular expression is applied to the result.</span>\n<span class=\"c\">                Then another DNS query is made for the result of the PTR query, and all received address are compared to the client address.</span>\n<span class=\"c\">                We strongly recommend that the regex ends with \\.yandex\\.ru$.</span>\n\n<span class=\"c\">            If you are installing ClickHouse yourself, specify here:</span>\n<span class=\"c\">                &lt;networks&gt;</span>\n<span class=\"c\">                        &lt;ip&gt;::/0&lt;/ip&gt;</span>\n<span class=\"c\">                &lt;/networks&gt;</span>\n<span class=\"c\">        --&gt;</span>\n        <span class=\"nt\">&lt;networks</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;networks&quot;</span> <span class=\"nt\">/&gt;</span>\n\n        <span class=\"c\">&lt;!-- Settings profile for the user. --&gt;</span>\n        <span class=\"nt\">&lt;profile&gt;</span>default<span class=\"nt\">&lt;/profile&gt;</span>\n\n        <span class=\"c\">&lt;!-- Quota for the user. --&gt;</span>\n        <span class=\"nt\">&lt;quota&gt;</span>default<span class=\"nt\">&lt;/quota&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n\n    <span class=\"c\">&lt;!-- For requests from the Yandex.Metrica user interface via the API for data on specific counters. --&gt;</span>\n    <span class=\"nt\">&lt;web&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n        <span class=\"nt\">&lt;networks</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;networks&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;profile&gt;</span>web<span class=\"nt\">&lt;/profile&gt;</span>\n        <span class=\"nt\">&lt;quota&gt;</span>default<span class=\"nt\">&lt;/quota&gt;</span>\n        <span class=\"nt\">&lt;allow_databases&gt;</span>\n           <span class=\"nt\">&lt;database&gt;</span>test<span class=\"nt\">&lt;/database&gt;</span>\n        <span class=\"nt\">&lt;/allow_databases&gt;</span>\n    <span class=\"nt\">&lt;/web&gt;</span>\n</code></pre></div>\n\n\n<p>You can see a declaration from two users: <code>default</code>and<code>web</code>. We added the <code>web</code> user separately.</p>\n<p>The <code>default</code> user is chosen in cases when the username is not passed. The <code>default</code> user is also used for distributed query processing, if the configuration of the server or cluster doesn't specify the <code>user</code> and <code>password</code> (see the section on the <a href=\"#../operations/table_engines/distributed/\">Distributed</a> engine).</p>\n<p>The user that is used for exchanging information between servers combined in a cluster must not have substantial restrictions or quotas \u2013 otherwise, distributed queries will fail.</p>\n<p>The password is specified in clear text (not recommended) or in SHA-256. The hash isn't salted. In this regard, you should not consider these passwords as providing security against potential malicious attacks. Rather, they are necessary for protection from employees.</p>\n<p>A list of networks is specified that access is allowed from. In this example, the list of networks for both users is loaded from a separate file (<code>/etc/metrika.xml</code>) containing the <code>networks</code> substitution. Here is a fragment of it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    ...\n    <span class=\"nt\">&lt;networks&gt;</span>\n        <span class=\"nt\">&lt;ip&gt;</span>::/64<span class=\"nt\">&lt;/ip&gt;</span>\n        <span class=\"nt\">&lt;ip&gt;</span>203.0.113.0/24<span class=\"nt\">&lt;/ip&gt;</span>\n        <span class=\"nt\">&lt;ip&gt;</span>2001:DB8::/32<span class=\"nt\">&lt;/ip&gt;</span>\n        ...\n    <span class=\"nt\">&lt;/networks&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>You could define this list of networks directly in <code>users.xml</code>, or in a file in the <code>users.d</code> directory (for more information, see the section \"<a href=\"#configuration_files\">Configuration files</a>\").</p>\n<p>The config includes comments explaining how to open access from everywhere.</p>\n<p>For use in production, only specify <code>ip</code> elements (IP addresses and their masks), since using <code>host</code> and <code>hoost_regexp</code> might cause extra latency.</p>\n<p>Next the user settings profile is specified (see the section \"<a href=\"#settings/settings_profiles/\">Settings profiles</a>\"). You can specify the default profile, <code>default'</code>. The profile can have any name. You can specify the same profile for different users. The most important thing you can write in the settings profile is <code>readonly=1</code>, which ensures read-only access.<br />\nThen specify the quota to be used (see the section \"<a href=\"#quotas\">Quotas</a>\"). You can specify the default quota: <code>default</code>. It is set in the config by default to only count resource usage, without restricting it. The quota can have any name. You can specify the same quota for different users \u2013 in this case, resource usage is calculated for each user individually.</p>\n<p>In the optional <code>&lt;allow_databases&gt;</code> section, you can also specify a list of databases that the user can access. By default, all databases are available to the user. You can specify the <code>default</code> database. In this case, the user will receive access to the database by default.</p>\n<p>Access to the <code>system</code> database is always allowed (since this database is used for processing queries).</p>\n<p>The user can get a list of all databases and tables in them by using <code>SHOW</code> queries or system tables, even if access to individual databases isn't allowed.</p>\n<p>Database access is not related to the <a href=\"#settings_readonly\">readonly</");
            
            document.write("a> setting. You can't grant full access to one database and <code>readonly</code> access to another one.</p>\n<p><a name=\"../../../../../operations/backup/\"></a><a name=\"../../../../operations/backup/\"></a><a name=\"../../../operations/backup/\"></a><a name=\"operations/backup/\"></a><a name=\"../operations/backup/\"></a><a name=\"../../operations/backup/\"></a><a name=\"backup/\"></a></p>\n<h2 id=\"data-backup\">Data Backup<a class=\"headerlink\" href=\"#data-backup\" title=\"Permanent link\">&para;</a></h2>\n<p>While <a href=\"#table_engines/replication/\">replication</a> provides protection from hardware failures, it does not protect against human errors: accidental deletion of data, deletion of the wrong table or a table on the wrong cluster, and software bugs that result in incorrect data processing or data corruption. In many cases mistakes like these will affect all replicas. ClickHouse has built-in safeguards to prevent some types of mistakes \u2014 for example, by default <a href=\"https://github.com/ClickHouse/ClickHouse/blob/v18.14.18-stable/dbms/programs/server/config.xml#L322-L330\" rel=\"external nofollow noreferrer\">you can't just drop tables with a MergeTree-like engine containing more than 50 Gb of data</a>. However, these safeguards don't cover all possible cases and can be circumvented.</p>\n<p>In order to effectively mitigate possible human errors, you should carefully prepare a strategy for backing up and restoring your data <strong>in advance</strong>.</p>\n<p>Each company has different resources available and business requirements, so there's no universal solution for ClickHouse backups and restores that will fit every situation. What works for one gigabyte of data likely won't work for tens of petabytes. There are a variety of possible approaches with their own pros and cons, which will be discussed below. It is a good idea to use several approaches instead of just one in order to compensate for their various shortcomings.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Keep in mind that if you backed something up and never tried to restore it, chances are that restore will not work properly when you actually need it (or at least it will take longer than business can tolerate). So whatever backup approach you choose, make sure to automate the restore process as well, and practice it on a spare ClickHouse cluster regularly.</p>\n</div>\n<h3 id=\"duplicating-source-data-somewhere-else\">Duplicating Source Data Somewhere Else<a class=\"headerlink\" href=\"#duplicating-source-data-somewhere-else\" title=\"Permanent link\">&para;</a></h3>\n<p>Often data that is ingested into ClickHouse is delivered through some sort of persistent queue, such as <a href=\"https://kafka.apache.org\" rel=\"external nofollow noreferrer\">Apache Kafka</a>. In this case it is possible to configure an additional set of subscribers that will read the same data stream while it is being written to ClickHouse and store it in cold storage somewhere. Most companies already have some default recommended cold storage, which could be an object store or a distributed filesystem like <a href=\"https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html\" rel=\"external nofollow noreferrer\">HDFS</a>.</p>\n<h3 id=\"filesystem-snapshots\">Filesystem Snapshots<a class=\"headerlink\" href=\"#filesystem-snapshots\" title=\"Permanent link\">&para;</a></h3>\n<p>Some local filesystems provide snapshot functionality (for example, <a href=\"https://en.wikipedia.org/wiki/ZFS\" rel=\"external nofollow noreferrer\">ZFS</a>), but they might not be the best choice for serving live queries. A possible solution is to create additional replicas with this kind of filesystem and exclude them from the <a href=\"#table_engines/distributed/\">Distributed</a> tables that are used for <code>SELECT</code> queries. Snapshots on such replicas will be out of reach of any queries that modify data. As a bonus, these replicas might have special hardware configurations with more disks attached per server, which would be cost-effective.</p>\n<h3 id=\"clickhouse-copier\">clickhouse-copier<a class=\"headerlink\" href=\"#clickhouse-copier\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"#utils/clickhouse-copier/\">clickhouse-copier</a> is a versatile tool that was initially created to re-shard petabyte-sized tables. It can also be used for backup and restore purposes because it reliably copies data between ClickHouse tables and clusters.</p>\n<p>For smaller volumes of data, a simple <code>INSERT INTO ... SELECT ...</code> to remote tables might work as well.</p>\n<h3 id=\"manipulations-with-parts\">Manipulations with Parts<a class=\"headerlink\" href=\"#manipulations-with-parts\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse allows using the <code>ALTER TABLE ... FREEZE PARTITION ...</code> query to create a local copy of table partitions. This is implemented using hardlinks to the <code>/var/lib/clickhouse/shadow/</code> folder, so it usually does not consume extra disk space for old data. The created copies of files are not handled by ClickHouse server, so you can just leave them there: you will have a simple backup that doesn't require any additional external system, but it will still be prone to hardware issues. For this reason, it's better to remotely copy them to another location and then remove the local copies. Distributed filesystems and object stores are still a good options for this, but normal attached file servers with a large enough capacity might work as well (in this case the transfer will occur via the network filesystem or maybe <a href=\"https://en.wikipedia.org/wiki/Rsync\" rel=\"external nofollow noreferrer\">rsync</a>).</p>\n<p>For more information about queries related to partition manipulations, see the <a href=\"#alter_manipulations-with-partitions\">ALTER documentation</a>.</p>\n<p>A third-party tool is available to automate this approach: <a href=\"https://github.com/AlexAkulov/clickhouse-backup\" rel=\"external nofollow noreferrer\">clickhouse-backup</a>.</p>\n<p><a name=\"../../../operations/configuration_files/\"></a><a name=\"operations/configuration_files/\"></a><a name=\"../operations/configuration_files/\"></a><a name=\"../../../../../operations/configuration_files/\"></a><a name=\"configuration_files/\"></a><a name=\"../../../../operations/configuration_files/\"></a><a name=\"../../operations/configuration_files/\"></a></p>\n<h2 id=\"configuration_files\">Configuration Files<a class=\"headerlink\" href=\"#configuration_files\" title=\"Permanent link\">&para;</a></h2>\n<p>The main server config file is <code>config.xml</code>. It resides in the <code>/etc/clickhouse-server/</code> directory.</p>\n<p>Individual settings can be overridden in the <code>*.xml</code> and <code>*.conf</code> files in the <code>conf.d</code> and <code>config.d</code> directories next to the config file.</p>\n<p>The <code>replace</code> or <code>remove</code> attributes can be specified for the elements of these config files.</p>\n<p>If neither is specified, it combines the contents of elements recursively, replacing values of duplicate children.</p>\n<p>If <code>replace</code> is specified, it replaces the entire element with the specified one.</p>\n<p>If <code>remove</code> is specified, it deletes the element.</p>\n<p>The config can also define \"substitutions\". If an element has the <code>incl</code> attribute, the corresponding substitution from the file will be used as the value. By default, the path to the file with substitutions is <code>/etc/metrika.xml</code>. This can be changed in the <a href=\"#server_settings-include_from\">include_from</a> element in the server config. The substitution values are specified in <code>/yandex/substitution_name</code> elements in this file. If a substitution specified in <code>incl</code> does not exist, it is recorded in the log. To prevent ClickHouse from logging missing substitutions, specify the <code>optional=\"true\"</code> attribute (for example, settings for <a href=\"#macros\">macros</a> server_settings/settings.md)).</p>\n<p>Substitutions can also be performed from ZooKeeper. To do this, specify the attribute <code>from_zk = \"/path/to/node\"</code>. The element value is replaced with the contents of the node at <code>/path/to/node</code> in ZooKeeper. You can also put an entire XML subtree on the ZooKeeper node and it will be fully inserted into the source element.</p>\n<p>The <code>config.xml</code> file can specify a separate config with user settings, profiles, and quotas. The relative path to this config is set in the 'users_config' element. By default, it is <code>users.xml</code>. If <code>users_config</code> is omitted, the user settings, profiles, and quotas are specified directly in <code>config.xml</code>.</p>\n<p>In addition, <code>users_config</code> may have overrides in files from the <code>users_config.d</code> directory (for example, <code>users.d</code>) and substitutions. For example, you can have separate config file for each user like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat /etc/clickhouse-server/users.d/alice.xml\n<span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;users&gt;</span>\n      <span class=\"nt\">&lt;alice&gt;</span>\n          <span class=\"nt\">&lt;profile&gt;</span>analytics<span class=\"nt\">&lt;/profile&gt;</span>\n            <span class=\"nt\">&lt;networks&gt;</span>\n                  <span class=\"nt\">&lt;ip&gt;</span>::/0<span class=\"nt\">&lt;/ip&gt;</span>\n            <span class=\"nt\">&lt;/networks&gt;</span>\n          <span class=\"nt\">&lt;password_sha256_hex&gt;</span>...<span class=\"nt\">&lt;/password_sha256_hex&gt;</span>\n          <span class=\"nt\">&lt;quota&gt;</span>analytics<span class=\"nt\">&lt;/quota&gt;</span>\n      <span class=\"nt\">&lt;/alice&gt;</span>\n    <span class=\"nt\">&lt;/users&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>For each config file, the server also generates <code>file-preprocessed.xml</code> files when starting. These files contain all the completed substitutions and overrides, and they are intended for informational use. If ZooKeeper substitutions were used in the config files but ZooKeeper is not available on the server start, the server loads the configuration from the preprocessed fi");
            
            document.write("le.</p>\n<p>The server tracks changes in config files, as well as files and ZooKeeper nodes that were used when performing substitutions and overrides, and reloads the settings for users and clusters on the fly. This means that you can modify the cluster, users, and their settings without restarting the server.</p>\n<p><a name=\"../../../../operations/quotas/\"></a><a name=\"operations/quotas/\"></a><a name=\"../operations/quotas/\"></a><a name=\"../../../../../operations/quotas/\"></a><a name=\"../../../operations/quotas/\"></a><a name=\"../../operations/quotas/\"></a><a name=\"quotas/\"></a></p>\n<h2 id=\"quotas\">Quotas<a class=\"headerlink\" href=\"#quotas\" title=\"Permanent link\">&para;</a></h2>\n<p>Quotas allow you to limit resource usage over a period of time, or simply track the use of resources.<br />\nQuotas are set up in the user config. This is usually 'users.xml'.</p>\n<p>The system also has a feature for limiting the complexity of a single query. See the section \"Restrictions on query complexity\").</p>\n<p>In contrast to query complexity restrictions, quotas:</p>\n<ul>\n<li>Place restrictions on a set of queries that can be run over a period of time, instead of limiting a single query.</li>\n<li>Account for resources spent on all remote servers for distributed query processing.</li>\n</ul>\n<p>Let's look at the section of the 'users.xml' file that defines quotas.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">&lt;!-- Quotas --&gt;</span>\n<span class=\"nt\">&lt;quotas&gt;</span>\n    <span class=\"c\">&lt;!-- Quota name. --&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"c\">&lt;!-- Restrictions for a time period. You can set many intervals with different restrictions. --&gt;</span>\n        <span class=\"nt\">&lt;interval&gt;</span>\n            <span class=\"c\">&lt;!-- Length of the interval. --&gt;</span>\n            <span class=\"nt\">&lt;duration&gt;</span>3600<span class=\"nt\">&lt;/duration&gt;</span>\n\n            <span class=\"c\">&lt;!-- Unlimited. Just collect data for the specified time interval. --&gt;</span>\n            <span class=\"nt\">&lt;queries&gt;</span>0<span class=\"nt\">&lt;/queries&gt;</span>\n            <span class=\"nt\">&lt;errors&gt;</span>0<span class=\"nt\">&lt;/errors&gt;</span>\n            <span class=\"nt\">&lt;result_rows&gt;</span>0<span class=\"nt\">&lt;/result_rows&gt;</span>\n            <span class=\"nt\">&lt;read_rows&gt;</span>0<span class=\"nt\">&lt;/read_rows&gt;</span>\n            <span class=\"nt\">&lt;execution_time&gt;</span>0<span class=\"nt\">&lt;/execution_time&gt;</span>\n        <span class=\"nt\">&lt;/interval&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n</code></pre></div>\n\n\n<p>By default, the quota just tracks resource consumption for each hour, without limiting usage.<br />\nThe resource consumption calculated for each interval is output to the server log after each request.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;statbox&gt;</span>\n    <span class=\"c\">&lt;!-- Restrictions for a time period. You can set many intervals with different restrictions. --&gt;</span>\n    <span class=\"nt\">&lt;interval&gt;</span>\n        <span class=\"c\">&lt;!-- Length of the interval. --&gt;</span>\n        <span class=\"nt\">&lt;duration&gt;</span>3600<span class=\"nt\">&lt;/duration&gt;</span>\n\n        <span class=\"nt\">&lt;queries&gt;</span>1000<span class=\"nt\">&lt;/queries&gt;</span>\n        <span class=\"nt\">&lt;errors&gt;</span>100<span class=\"nt\">&lt;/errors&gt;</span>\n        <span class=\"nt\">&lt;result_rows&gt;</span>1000000000<span class=\"nt\">&lt;/result_rows&gt;</span>\n        <span class=\"nt\">&lt;read_rows&gt;</span>100000000000<span class=\"nt\">&lt;/read_rows&gt;</span>\n        <span class=\"nt\">&lt;execution_time&gt;</span>900<span class=\"nt\">&lt;/execution_time&gt;</span>\n    <span class=\"nt\">&lt;/interval&gt;</span>\n\n    <span class=\"nt\">&lt;interval&gt;</span>\n        <span class=\"nt\">&lt;duration&gt;</span>86400<span class=\"nt\">&lt;/duration&gt;</span>\n\n        <span class=\"nt\">&lt;queries&gt;</span>10000<span class=\"nt\">&lt;/queries&gt;</span>\n        <span class=\"nt\">&lt;errors&gt;</span>1000<span class=\"nt\">&lt;/errors&gt;</span>\n        <span class=\"nt\">&lt;result_rows&gt;</span>5000000000<span class=\"nt\">&lt;/result_rows&gt;</span>\n        <span class=\"nt\">&lt;read_rows&gt;</span>500000000000<span class=\"nt\">&lt;/read_rows&gt;</span>\n        <span class=\"nt\">&lt;execution_time&gt;</span>7200<span class=\"nt\">&lt;/execution_time&gt;</span>\n    <span class=\"nt\">&lt;/interval&gt;</span>\n<span class=\"nt\">&lt;/statbox&gt;</span>\n</code></pre></div>\n\n\n<p>For the 'statbox' quota, restrictions are set for every hour and for every 24 hours (86,400 seconds). The time interval is counted starting from an implementation-defined fixed moment in time. In other words, the 24-hour interval doesn't necessarily begin at midnight.</p>\n<p>When the interval ends, all collected values are cleared. For the next hour, the quota calculation starts over.</p>\n<p>Here are the amounts that can be restricted:</p>\n<p><code>queries</code> \u2013 The total number of requests.</p>\n<p><code>errors</code> \u2013 The number of queries that threw an exception.</p>\n<p><code>result_rows</code> \u2013 The total number of rows given as the result.</p>\n<p><code>read_rows</code> \u2013 The total number of source rows read from tables for running the query, on all remote servers.</p>\n<p><code>execution_time</code> \u2013 The total query execution time, in seconds (wall time).</p>\n<p>If the limit is exceeded for at least one time interval, an exception is thrown with a text about which restriction was exceeded, for which interval, and when the new interval begins (when queries can be sent again).</p>\n<p>Quotas can use the \"quota key\" feature in order to report on resources for multiple keys independently. Here is an example of this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">&lt;!-- For the global reports designer. --&gt;</span>\n<span class=\"nt\">&lt;web_global&gt;</span>\n    <span class=\"c\">&lt;!-- keyed \u2013 The quota_key &quot;key&quot; is passed in the query parameter,</span>\n<span class=\"c\">            and the quota is tracked separately for each key value.</span>\n<span class=\"c\">        For example, you can pass a Yandex.Metrica username as the key,</span>\n<span class=\"c\">            so the quota will be counted separately for each username.</span>\n<span class=\"c\">        Using keys makes sense only if quota_key is transmitted by the program, not by a user.</span>\n\n<span class=\"c\">        You can also write &lt;keyed_by_ip /&gt; so the IP address is used as the quota key.</span>\n<span class=\"c\">        (But keep in mind that users can change the IPv6 address fairly easily.)</span>\n<span class=\"c\">    --&gt;</span>\n    <span class=\"nt\">&lt;keyed</span> <span class=\"nt\">/&gt;</span>\n</code></pre></div>\n\n\n<p>The quota is assigned to users in the 'users' section of the config. See the section \"Access rights\".</p>\n<p>For distributed query processing, the accumulated amounts are stored on the requestor server. So if the user goes to another server, the quota there will \"start over\".</p>\n<p>When the server is restarted, quotas are reset.</p>\n<p><a name=\"system_tables/\"></a><a name=\"operations/system_tables/\"></a><a name=\"../operations/system_tables/\"></a><a name=\"../../../../../operations/system_tables/\"></a><a name=\"../../../operations/system_tables/\"></a><a name=\"../../../../operations/system_tables/\"></a><a name=\"../../operations/system_tables/\"></a></p>\n<h2 id=\"system-tables\">System tables<a class=\"headerlink\" href=\"#system-tables\" title=\"Permanent link\">&para;</a></h2>\n<p>System tables are used for implementing part of the system's functionality, and for providing access to information about how the system is working.<br />\nYou can't delete a system table (but you can perform DETACH).<br />\nSystem tables don't have files with data on the disk or files with metadata. The server creates all the system tables when it starts.<br />\nSystem tables are read-only.<br />\nThey are located in the 'system' database.</p>\n<h3 id=\"system_tables-asynchronous_metrics\">system.asynchronous_metrics<a class=\"headerlink\" href=\"#system_tables-asynchronous_metrics\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains metrics that are calculated periodically in the background. For example, the amount of RAM in use.</p>\n<p>Columns:</p>\n<ul>\n<li><code>metric</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Metric name.</li>\n<li><code>value</code> (<a href=\"#../data_types/float/\">Float64</a>) \u2014 Metric value.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">asynchronous_metrics</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500metric\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500value\u2500\u2510\n\u2502 jemalloc.background_thread.run_interval \u2502          0 \u2502\n\u2502 jemalloc.background_thread.num_runs     \u2502          0 \u2502\n\u2502 jemalloc.background_thread.num_threads  \u2502          0 \u2502\n\u2502 jemalloc.retained                       \u2502  422551552 \u2502\n\u2502 jemalloc.mapped                         \u2502 1682989056 \u2502\n\u2502 jemalloc.resident                       \u2502 1656446976 \u2502\n\u2502 jemalloc.metadata_thp                   \u2502          0 \u2502\n\u2502 jemalloc.metadata                       \u2502   10226856 \u2502\n\u2502 UncompressedCacheCells                  \u2502          0 \u2502\n\u2502 MarkCacheFiles                          \u2502          0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#monitoring/\">Monitoring</a> \u2014 Base concepts of ClickHouse monitoring.</li>\n<li><a href=\"#system_tables-metrics\">system.metrics</a> \u2014 Contains instantly calculated metrics.</li>\n<li><a href=\"#system_tables-events\">system.events</a> \u2014 Contains a number of events that have occurred.</li>\n</ul>\n<h3 id=\"system-clusters\">system.clusters<a class=\"headerlink\" href=\"#system-clusters\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about clusters available in the config file and the servers in them");
            
            document.write(".</p>\n<p>Columns:</p>\n<ul>\n<li><code>cluster</code> (String) \u2014 The cluster name.</li>\n<li><code>shard_num</code> (UInt32) \u2014 The shard number in the cluster, starting from 1.</li>\n<li><code>shard_weight</code> (UInt32) \u2014 The relative weight of the shard when writing data.</li>\n<li><code>replica_num</code> (UInt32) \u2014 The replica number in the shard, starting from 1.</li>\n<li><code>host_name</code> (String) \u2014 The host name, as specified in the config.</li>\n<li><code>host_address</code> (String) \u2014 The host IP address obtained from DNS.</li>\n<li><code>port</code> (UInt16) \u2014 The port to use for connecting to the server.</li>\n<li><code>user</code> (String) \u2014 The name of the user for connecting to the server.</li>\n<li><code>errors_count</code> (UInt32) - number of times this host failed to reach replica.</li>\n<li><code>estimated_recovery_time</code> (UInt32) - seconds left until replica error count is zeroed and it is considered to be back to normal.</li>\n</ul>\n<p>Please note that <code>errors_count</code> is updated once per query to the cluster, but <code>estimated_recovery_time</code> is recalculated on-demand. So there could be a case of non-zero <code>errors_count</code> and zero <code>estimated_recovery_time</code>, that next query will zero <code>errors_count</code> and try to use replica as if it has no errors.</p>\n<p><strong>See also</strong></p>\n<ul>\n<li><a href=\"#table_engines/distributed/\">Table engine Distributed</a></li>\n<li><a href=\"#settings-distributed_replica_error_cap\">distributed_replica_error_cap setting</a></li>\n<li><a href=\"#settings-distributed_replica_error_half_life\">distributed_replica_error_half_life setting</a></li>\n</ul>\n<h3 id=\"system-columns\">system.columns<a class=\"headerlink\" href=\"#system-columns\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about columns in all the tables.</p>\n<p>You can use this table to get information similar to the <a href=\"#misc-describe-table\">DESCRIBE TABLE</a> query, but for multiple tables at once.</p>\n<p>The <code>system.columns</code> table contains the following columns (the column type is shown in brackets):</p>\n<ul>\n<li><code>database</code> (String) \u2014 Database name.</li>\n<li><code>table</code> (String) \u2014 Table name.</li>\n<li><code>name</code> (String) \u2014 Column name.</li>\n<li><code>type</code> (String) \u2014 Column type.</li>\n<li><code>default_kind</code> (String) \u2014 Expression type (<code>DEFAULT</code>, <code>MATERIALIZED</code>, <code>ALIAS</code>) for the default value, or an empty string if it is not defined.</li>\n<li><code>default_expression</code> (String) \u2014 Expression for the default value, or an empty string if it is not defined.</li>\n<li><code>data_compressed_bytes</code> (UInt64) \u2014 The size of compressed data, in bytes.</li>\n<li><code>data_uncompressed_bytes</code> (UInt64) \u2014 The size of decompressed data, in bytes.</li>\n<li><code>marks_bytes</code> (UInt64) \u2014 The size of marks, in bytes.</li>\n<li><code>comment</code> (String) \u2014 Comment on the column, or an empty string if it is not defined.</li>\n<li><code>is_in_partition_key</code> (UInt8) \u2014 Flag that indicates whether the column is in the partition expression.</li>\n<li><code>is_in_sorting_key</code> (UInt8) \u2014 Flag that indicates whether the column is in the sorting key expression.</li>\n<li><code>is_in_primary_key</code> (UInt8) \u2014 Flag that indicates whether the column is in the primary key expression.</li>\n<li><code>is_in_sampling_key</code> (UInt8) \u2014 Flag that indicates whether the column is in the sampling key expression.</li>\n</ul>\n<h3 id=\"system_contributors\">system.contributors<a class=\"headerlink\" href=\"#system_contributors\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about contributors. All constributors in random order. The order is random at query execution time.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (String) \u2014 Contributor (author) name from git log.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">contributors</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Olga Khvostikova \u2502\n\u2502 Max Vetrov       \u2502\n\u2502 LiuYangkuan      \u2502\n\u2502 svladykin        \u2502\n\u2502 zamulla          \u2502\n\u2502 \u0160imon Podlipsk\u00fd  \u2502\n\u2502 BayoNet          \u2502\n\u2502 Ilya Khomutov    \u2502\n\u2502 Amy Krishnevsky  \u2502\n\u2502 Loud_Scream      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>To find out yourself in the table, use a query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">contributors</span> <span class=\"k\">WHERE</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;Olga Khvostikova&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Olga Khvostikova \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"system-databases\">system.databases<a class=\"headerlink\" href=\"#system-databases\" title=\"Permanent link\">&para;</a></h3>\n<p>This table contains a single String column called 'name' \u2013 the name of a database.<br />\nEach database that the server knows about has a corresponding entry in the table.<br />\nThis system table is used for implementing the <code>SHOW DATABASES</code> query.</p>\n<h3 id=\"system_tables-detached_parts\">system.detached_parts<a class=\"headerlink\" href=\"#system_tables-detached_parts\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about detached parts of <a href=\"#table_engines/mergetree/\">MergeTree</a> tables. The <code>reason</code> column specifies why the part was detached. For user-detached parts, the reason is empty. Such parts can be attached with <a href=\"#alter_attach-partition\">ALTER TABLE ATTACH PARTITION|PART</a> command. For the description of other columns, see <a href=\"#system_tables-parts\">system.parts</a>. If part name is invalid, values of some columns may be <code>NULL</code>. Such parts can be deleted with <a href=\"#alter_drop-detached\">ALTER TABLE DROP DETACHED PART</a>.</p>\n<h3 id=\"system-dictionaries\">system.dictionaries<a class=\"headerlink\" href=\"#system-dictionaries\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about external dictionaries.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (String) \u2014 Dictionary name.</li>\n<li><code>type</code> (String) \u2014 Dictionary type: Flat, Hashed, Cache.</li>\n<li><code>origin</code> (String) \u2014 Path to the configuration file that describes the dictionary.</li>\n<li><code>attribute.names</code> (Array(String)) \u2014 Array of attribute names provided by the dictionary.</li>\n<li><code>attribute.types</code> (Array(String)) \u2014 Corresponding array of attribute types that are provided by the dictionary.</li>\n<li><code>has_hierarchy</code> (UInt8) \u2014 Whether the dictionary is hierarchical.</li>\n<li><code>bytes_allocated</code> (UInt64) \u2014 The amount of RAM the dictionary uses.</li>\n<li><code>hit_rate</code> (Float64) \u2014 For cache dictionaries, the percentage of uses for which the value was in the cache.</li>\n<li><code>element_count</code> (UInt64) \u2014 The number of items stored in the dictionary.</li>\n<li><code>load_factor</code> (Float64) \u2014 The percentage filled in the dictionary (for a hashed dictionary, the percentage filled in the hash table).</li>\n<li><code>creation_time</code> (DateTime) \u2014 The time when the dictionary was created or last successfully reloaded.</li>\n<li><code>last_exception</code> (String) \u2014 Text of the error that occurs when creating or reloading the dictionary if the dictionary couldn't be created.</li>\n<li><code>source</code> (String) \u2014 Text describing the data source for the dictionary.</li>\n</ul>\n<p>Note that the amount of memory used by the dictionary is not proportional to the number of items stored in it. So for flat and cached dictionaries, all the memory cells are pre-assigned, regardless of how full the dictionary actually is.</p>\n<h3 id=\"system_tables-events\">system.events<a class=\"headerlink\" href=\"#system_tables-events\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about the number of events that have occurred in the system. For example, in the table, you can find how many <code>SELECT</code> queries were processed since the ClickHouse server started.</p>\n<p>Columns:</p>\n<ul>\n<li><code>event</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Event name.</li>\n<li><code>value</code> (<a href=\"#../data_types/int_uint/\">UInt64</a>) \u2014 Number of events occurred.</li>\n<li><code>description</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Event description.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">events</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500event\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u252c\u2500description\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Query                                 \u2502    12 \u2502 Number of queries to be interpreted and potentially executed. Does not include queries that failed to parse or were rejected due to AST size limits, quota limits or limits on the number of simultaneously running queries. May include internal queries initiated by ClickHouse itself. Does not count subqueries.                  \u2502\n\u2502 SelectQuery                           \u2502     8 \u2502 Same as Query, but only for SELECT queries.                                                                                                                                                                                                                \u2502\n\u2502 FileOpen                              \u2502    73 \u2502 Number of files opened.            ");
            
            document.write("                                                                                                                                                                                                                        \u2502\n\u2502 ReadBufferFromFileDescriptorRead      \u2502   155 \u2502 Number of reads (read/pread) from a file descriptor. Does not include sockets.                                                                                                                                                                             \u2502\n\u2502 ReadBufferFromFileDescriptorReadBytes \u2502  9931 \u2502 Number of bytes read from file descriptors. If the file is compressed, this will show the compressed data size.                                                                                                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#system_tables-asynchronous_metrics\">system.asynchronous_metrics</a> \u2014 Contains periodically calculated metrics.</li>\n<li><a href=\"#system_tables-metrics\">system.metrics</a> \u2014 Contains instantly calculated metrics.</li>\n<li><a href=\"#monitoring/\">Monitoring</a> \u2014 Base concepts of ClickHouse monitoring.</li>\n</ul>\n<h3 id=\"system-functions\">system.functions<a class=\"headerlink\" href=\"#system-functions\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about normal and aggregate functions.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code>(<code>String</code>) \u2013 The name of the function.</li>\n<li><code>is_aggregate</code>(<code>UInt8</code>) \u2014 Whether the function is aggregate.</li>\n</ul>\n<h3 id=\"system-graphite-retentions\">system.graphite_retentions<a class=\"headerlink\" href=\"#system-graphite-retentions\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about parameters <a href=\"#server_settings-graphite_rollup\">graphite_rollup</a> which are used in tables with <a href=\"#table_engines/graphitemergetree/\">*GraphiteMergeTree</a> engines.</p>\n<p>Columns:</p>\n<ul>\n<li><code>config_name</code>     (String) - <code>graphite_rollup</code> parameter name.</li>\n<li><code>regexp</code>          (String) - A pattern for the metric name.</li>\n<li><code>function</code>        (String) - The name of the aggregating function.</li>\n<li><code>age</code>             (UInt64) - The minimum age of the data in seconds.</li>\n<li><code>precision</code>       (UInt64) - How precisely to define the age of the data in seconds.</li>\n<li><code>priority</code>        (UInt16) - Pattern priority.</li>\n<li><code>is_default</code>      (UInt8) - Whether the pattern is the default.</li>\n<li><code>Tables.database</code> (Array(String)) - Array of names of database tables that use the <code>config_name</code> parameter.</li>\n<li><code>Tables.table</code>    (Array(String)) - Array of table names that use the <code>config_name</code> parameter.</li>\n</ul>\n<h3 id=\"system-merges\">system.merges<a class=\"headerlink\" href=\"#system-merges\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about merges and part mutations currently in process for tables in the MergeTree family.</p>\n<p>Columns:</p>\n<ul>\n<li><code>database</code> (String)  \u2014 The name of the database the table is in.</li>\n<li><code>table</code> (String) \u2014 Table name.</li>\n<li><code>elapsed</code> (Float64) \u2014 The time elapsed (in seconds) since the merge started.</li>\n<li><code>progress</code> (Float64) \u2014 The percentage of completed work from 0 to 1.</li>\n<li><code>num_parts</code> (UInt64) \u2014 The number of pieces to be merged.</li>\n<li><code>result_part_name</code> (String) \u2014 The name of the part that will be formed as the result of merging.</li>\n<li><code>is_mutation</code> (UInt8) - 1 if this process is a part mutation.</li>\n<li><code>total_size_bytes_compressed</code> (UInt64) \u2014 The total size of the compressed data in the merged chunks.</li>\n<li><code>total_size_marks</code> (UInt64) \u2014 The total number of marks in the merged parts.</li>\n<li><code>bytes_read_uncompressed</code> (UInt64) \u2014 Number of bytes read, uncompressed.</li>\n<li><code>rows_read</code> (UInt64) \u2014 Number of rows read.</li>\n<li><code>bytes_written_uncompressed</code> (UInt64) \u2014 Number of bytes written, uncompressed.</li>\n<li><code>rows_written</code> (UInt64) \u2014 Number of rows written.</li>\n</ul>\n<h3 id=\"system_tables-metrics\">system.metrics<a class=\"headerlink\" href=\"#system_tables-metrics\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains metrics which can be calculated instantly, or have a current value. For example, the number of simultaneously processed queries or the current replica delay. This table is always up to date.</p>\n<p>Columns:</p>\n<ul>\n<li><code>metric</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Metric name.</li>\n<li><code>value</code> (<a href=\"#../data_types/int_uint/\">Int64</a>) \u2014 Metric value.</li>\n<li><code>description</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Metric description.</li>\n</ul>\n<p>The list of supported metrics you can find in the <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/src/Common/CurrentMetrics.cpp\" rel=\"external nofollow noreferrer\">dbms/src/Common/CurrentMetrics.cpp</a> source file of ClickHouse.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">metrics</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500metric\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u252c\u2500description\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Query                      \u2502     1 \u2502 Number of executing queries                                                                                                                                                                      \u2502\n\u2502 Merge                      \u2502     0 \u2502 Number of executing background merges                                                                                                                                                            \u2502\n\u2502 PartMutation               \u2502     0 \u2502 Number of mutations (ALTER DELETE/UPDATE)                                                                                                                                                        \u2502\n\u2502 ReplicatedFetch            \u2502     0 \u2502 Number of data parts being fetched from replicas                                                                                                                                                \u2502\n\u2502 ReplicatedSend             \u2502     0 \u2502 Number of data parts being sent to replicas                                                                                                                                                      \u2502\n\u2502 ReplicatedChecks           \u2502     0 \u2502 Number of data parts checking for consistency                                                                                                                                                    \u2502\n\u2502 BackgroundPoolTask         \u2502     0 \u2502 Number of active tasks in BackgroundProcessingPool (merges, mutations, fetches, or replication queue bookkeeping)                                                                                \u2502\n\u2502 BackgroundSchedulePoolTask \u2502     0 \u2502 Number of active tasks in BackgroundSchedulePool. This pool is used for periodic ReplicatedMergeTree tasks, like cleaning old data parts, altering data parts, replica re-initialization, etc.   \u2502\n\u2502 DiskSpaceReservedForMerge  \u2502     0 \u2502 Disk space reserved for currently running background merges. It is slightly more than the total size of currently merging parts.                                                                     \u2502\n\u2502 DistributedSend            \u2502     0 \u2502 Number of connections to remote servers sending data that was INSERTed into Distributed tables. Both synchronous and asynchronous mode.                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#system_tables-asynchronous_metrics\">system.asynchronous_metrics</a> \u2014 Contains periodically calculated metrics.</li>\n<li><a href=\"#system_tables-events\">system.events</a> \u2014 Contains a number of events that occurred.</li>\n<li><a href=\"#monitoring/\">Monitoring</a> \u2014 Base concepts of ClickHouse monitoring.</li>\n</ul>\n<h3 id=\"system-numbers\">system.numbers<a class=\"headerlink\" href=\"#system-numbers\" title=\"Permanent link\">&para;</a></h3>\n<p>This table contains a single UInt64 column named 'number' that contains almost all the natural numbers starting from zero.<br />\nYou can use this table for tests, or if you need to do a brute force search.<br />\nReads from this table are not parallelized.</p>\n<h3 id=\"system-numbers-mt\">system.numbers_mt<a class=\"headerlink\" href=\"#system-numbers-mt\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as 'system.numbers' but reads are parallelized. The numbers can be returned in any order.<br />\nUsed for tests.</p>\n<h3 id=\"system-one\">system.one<a class=\"headerlink\" href=\"#system-one\" title=\"Permanent link\">&para;</a></h3>\n<p>This table contains a single row with a single 'dummy' UInt8 column containing the value 0.<br />\nThis table is used if a SELECT query doesn't specify the FROM clause.<br />\nThis is similar to the DUAL table found in other DBMSs.</p>\n<h3 id=\"system_tables-parts\">system.parts<a class=\"headerlink\" href=\"#system_tables-parts\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about parts of <a href=\"#table");
            
            document.write("_engines/mergetree/\">MergeTree</a> tables.</p>\n<p>Each row describes one data part.</p>\n<p>Columns:</p>\n<ul>\n<li>\n<p><code>partition</code> (String) \u2013 The partition name. To learn what a partition is, see the description of the <a href=\"#query_language_queries_alter\">ALTER</a> query.</p>\n<p>Formats:</p>\n<ul>\n<li><code>YYYYMM</code> for automatic partitioning by month.</li>\n<li><code>any_string</code> when partitioning manually.</li>\n</ul>\n</li>\n<li>\n<p><code>name</code> (<code>String</code>) \u2013 Name of the data part.</p>\n</li>\n<li><code>active</code> (<code>UInt8</code>) \u2013 Flag that indicates whether the data part is active. If a data part is active, it's used in a table. Otherwise, it's deleted. Inactive data parts remain after merging.</li>\n<li><code>marks</code> (<code>UInt64</code>) \u2013 The number of marks. To get the approximate number of rows in a data part, multiply <code>marks</code> by the index granularity (usually 8192) (this hint doesn't work for adaptive granularity).</li>\n<li><code>rows</code> (<code>UInt64</code>) \u2013 The number of rows.</li>\n<li><code>bytes_on_disk</code> (<code>UInt64</code>) \u2013 Total size of all the data part files in bytes.</li>\n<li><code>data_compressed_bytes</code> (<code>UInt64</code>) \u2013 Total size of compressed data in the data part. All the auxiliary files (for example, files with marks) are not included.</li>\n<li><code>data_uncompressed_bytes</code> (<code>UInt64</code>) \u2013 Total size of uncompressed data in the data part. All the auxiliary files (for example, files with marks) are not included.</li>\n<li><code>marks_bytes</code> (<code>UInt64</code>) \u2013 The size of the file with marks.</li>\n<li><code>modification_time</code> (<code>DateTime</code>) \u2013 The time the directory with the data part was modified. This usually corresponds to the time of data part creation.|</li>\n<li><code>remove_time</code> (<code>DateTime</code>) \u2013 The time when the data part became inactive.</li>\n<li><code>refcount</code> (<code>UInt32</code>) \u2013 The number of places where the data part is used. A value greater than 2 indicates that the data part is used in queries or merges.</li>\n<li><code>min_date</code> (<code>Date</code>) \u2013 The minimum value of the date key in the data part.</li>\n<li><code>max_date</code> (<code>Date</code>) \u2013 The maximum value of the date key in the data part.</li>\n<li><code>min_time</code> (<code>DateTime</code>) \u2013 The minimum value of the date and time key in the data part.</li>\n<li><code>max_time</code>(<code>DateTime</code>) \u2013 The maximum value of the date and time key in the data part.</li>\n<li><code>partition_id</code> (<code>String</code>) \u2013 ID of the partition.</li>\n<li><code>min_block_number</code> (<code>UInt64</code>) \u2013 The minimum number of data parts that make up the current part after merging.</li>\n<li><code>max_block_number</code> (<code>UInt64</code>) \u2013 The maximum number of data parts that make up the current part after merging.</li>\n<li><code>level</code> (<code>UInt32</code>) \u2013 Depth of the merge tree. Zero means that the current part was created by insert rather than by merging other parts.</li>\n<li><code>data_version</code> (<code>UInt64</code>) \u2013 Number that is used to determine which mutations should be applied to the data part (mutations with a  version higher than <code>data_version</code>).</li>\n<li><code>primary_key_bytes_in_memory</code> (<code>UInt64</code>) \u2013 The amount of memory (in bytes) used by primary key values.</li>\n<li><code>primary_key_bytes_in_memory_allocated</code> (<code>UInt64</code>) \u2013 The amount of memory (in bytes) reserved for primary key values.</li>\n<li><code>is_frozen</code> (<code>UInt8</code>) \u2013 Flag that shows that a partition data backup exists. 1, the backup exists. 0, the backup doesn't exist. For more details, see <a href=\"#alter_freeze-partition\">FREEZE PARTITION</a></li>\n<li><code>database</code> (<code>String</code>) \u2013 Name of the database.</li>\n<li><code>table</code> (<code>String</code>) \u2013 Name of the table.</li>\n<li><code>engine</code> (<code>String</code>) \u2013 Name of the table engine without parameters.</li>\n<li><code>path</code> (<code>String</code>) \u2013 Absolute path to the folder with data part files.</li>\n<li><code>disk</code> (<code>String</code>) \u2013 Name of a disk that stores the data part.</li>\n<li><code>hash_of_all_files</code> (<code>String</code>) \u2013 <a href=\"#hash_functions-siphash128\">sipHash128</a> of compressed files.</li>\n<li><code>hash_of_uncompressed_files</code> (<code>String</code>) \u2013 <a href=\"#hash_functions-siphash128\">sipHash128</a> of uncompressed files (files with marks, index file etc.).</li>\n<li><code>uncompressed_hash_of_compressed_files</code> (<code>String</code>) \u2013 <a href=\"#hash_functions-siphash128\">sipHash128</a> of data in the compressed files as if they were uncompressed.</li>\n<li><code>bytes</code> (<code>UInt64</code>) \u2013 Alias for <code>bytes_on_disk</code>.</li>\n<li><code>marks_size</code> (<code>UInt64</code>) \u2013 Alias for <code>marks_bytes</code>.</li>\n</ul>\n<h3 id=\"system_tables-part-log\">system.part_log<a class=\"headerlink\" href=\"#system_tables-part-log\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>system.part_log</code> table is created only if the <a href=\"#server_settings-part-log\">part_log</a> server setting is specified.</p>\n<p>This table contains information about events that occurred with <a href=\"#table_engines/custom_partitioning_key/\">data parts</a> in the <a href=\"#table_engines/mergetree/\">MergeTree</a> family tables, such as adding or merging data.</p>\n<p>The <code>system.part_log</code> table contains the following columns:</p>\n<ul>\n<li><code>event_type</code> (Enum) \u2014 Type of the event that occurred with the data part. Can have one of the following values:<ul>\n<li><code>NEW_PART</code> \u2014 Inserting of a new data part.</li>\n<li><code>MERGE_PARTS</code> \u2014 Merging of data parts.</li>\n<li><code>DOWNLOAD_PART</code> \u2014 Downloading a data part.</li>\n<li><code>REMOVE_PART</code> \u2014 Removing or detaching a data part using <a href=\"#alter_detach-partition\">DETACH PARTITION</a>.</li>\n<li><code>MUTATE_PART</code> \u2014 Mutating of a data part.</li>\n<li><code>MOVE_PART</code> \u2014 Moving the data part from the one disk to another one.</li>\n</ul>\n</li>\n<li><code>event_date</code> (Date) \u2014 Event date.</li>\n<li><code>event_time</code> (DateTime) \u2014 Event time.</li>\n<li><code>duration_ms</code> (UInt64) \u2014 Duration.</li>\n<li><code>database</code> (String) \u2014 Name of the database the data part is in.</li>\n<li><code>table</code> (String) \u2014 Name of the table the data part is in.</li>\n<li><code>part_name</code> (String) \u2014 Name of the data part.</li>\n<li><code>partition_id</code> (String) \u2014 ID of the partition that the data part was inserted to. The column takes the 'all' value if the partitioning is by <code>tuple()</code>.</li>\n<li><code>rows</code> (UInt64) \u2014 The number of rows in the data part.</li>\n<li><code>size_in_bytes</code> (UInt64) \u2014 Size of the data part in bytes.</li>\n<li><code>merged_from</code> (Array(String)) \u2014 An array of names of the parts which the current part was made up from (after the merge).</li>\n<li><code>bytes_uncompressed</code> (UInt64) \u2014 Size of uncompressed bytes.</li>\n<li><code>read_rows</code> (UInt64) \u2014 The number of rows was read during the merge.</li>\n<li><code>read_bytes</code> (UInt64) \u2014 The number of bytes was read during the merge.</li>\n<li><code>error</code> (UInt16) \u2014 The code number of the occurred error.</li>\n<li><code>exception</code> (String) \u2014 Text message of the occurred error.</li>\n</ul>\n<p>The <code>system.part_log</code> table is created after the first inserting data to the <code>MergeTree</code> table.</p>\n<h3 id=\"system_tables-processes\">system.processes<a class=\"headerlink\" href=\"#system_tables-processes\" title=\"Permanent link\">&para;</a></h3>\n<p>This system table is used for implementing the <code>SHOW PROCESSLIST</code> query.</p>\n<p>Columns:</p>\n<ul>\n<li><code>user</code> (String) \u2013 The user who made the query. Keep in mind that for distributed processing, queries are sent to remote servers under the <code>default</code> user. The field contains the username for a specific query, not for a query that this query initiated.</li>\n<li><code>address</code> (String) \u2013 The IP address the request was made from. The same for distributed processing. To track where a distributed query was originally made from, look at <code>system.processes</code> on the query requestor server.</li>\n<li><code>elapsed</code> (Float64) \u2013 The time in seconds since request execution started.</li>\n<li><code>rows_read</code> (UInt64) \u2013 The number of rows read from the table. For distributed processing, on the requestor server, this is the total for all remote servers.</li>\n<li><code>bytes_read</code> (UInt64) \u2013 The number of uncompressed bytes read from the table. For distributed processing, on the requestor server, this is the total for all remote servers.</li>\n<li><code>total_rows_approx</code> (UInt64) \u2013 The approximation of the total number of rows that should be read. For distributed processing, on the requestor server, this is the total for all remote servers. It can be updated during request processing, when new sources to process become known.</li>\n<li><code>memory_usage</code> (UInt64) \u2013 Amount of RAM the request uses. It might not include some types of dedicated memory.  See the  <a href=\"#settings_max_memory_usage\">max_memory_usage</a> setting.</li>\n<li><code>query</code> (String) \u2013 The query text. For <code>INSERT</code>, it doesn't include the data to insert.</li>\n<li><code>query_id</code> (String) \u2013 Query ID, if defined.</li>\n</ul>\n<h3 id=\"system_tables-query-log\">system.query_log<a class=\"headerlink\" href=\"#system_tables-query-log\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about execution of queries. For each query, you can see processing start time, duration of processing, error messages and other information.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The table doesn't contain input data for <code>INSERT</code> queries.</p>\n</div>\n<p>ClickHouse creates this table only if the <a href=\"#server_settings-query-log\">query_log</a> server parameter is specified. This parameter sets the logging rules, such as the logging interval or the name of");
            
            document.write(" the table the queries will be logged in.</p>\n<p>To enable query logging, set the <a href=\"#settings-log-queries\">log_queries</a> parameter to 1. For details, see the <a href=\"#settings/settings/\">Settings</a> section.</p>\n<p>The <code>system.query_log</code> table registers two kinds of queries:</p>\n<ol>\n<li>Initial queries that were run directly by the client.</li>\n<li>Child queries that were initiated by other queries (for distributed query execution). For these types of queries, information about the parent queries is shown in the <code>initial_*</code> columns.</li>\n</ol>\n<p>Columns:</p>\n<ul>\n<li><code>type</code> (<code>Enum8</code>) \u2014 Type of event that occurred when executing the query. Values:<ul>\n<li><code>'QueryStart' = 1</code> \u2014 Successful start of query execution.</li>\n<li><code>'QueryFinish' = 2</code> \u2014 Successful end of query execution.</li>\n<li><code>'ExceptionBeforeStart' = 3</code> \u2014 Exception before the start of query execution.</li>\n<li><code>'ExceptionWhileProcessing' = 4</code> \u2014 Exception during the query execution.</li>\n</ul>\n</li>\n<li><code>event_date</code> (Date) \u2014 Event date.</li>\n<li><code>event_time</code> (DateTime) \u2014 Event time.</li>\n<li><code>query_start_time</code> (DateTime) \u2014 Start time of query execution.</li>\n<li><code>query_duration_ms</code> (UInt64) \u2014 Duration of query execution.</li>\n<li><code>read_rows</code> (UInt64) \u2014 Number of read rows.</li>\n<li><code>read_bytes</code> (UInt64) \u2014 Number of read bytes.</li>\n<li><code>written_rows</code> (UInt64) \u2014 For <code>INSERT</code> queries, the number of written rows. For other queries, the column value is 0.</li>\n<li><code>written_bytes</code> (UInt64) \u2014 For <code>INSERT</code> queries, the number of written bytes. For other queries, the column value is 0.</li>\n<li><code>result_rows</code> (UInt64) \u2014 Number of rows in the result.</li>\n<li><code>result_bytes</code> (UInt64) \u2014 Number of bytes in the result.</li>\n<li><code>memory_usage</code> (UInt64) \u2014 Memory consumption by the query.</li>\n<li><code>query</code> (String) \u2014 Query string.</li>\n<li><code>exception</code> (String) \u2014 Exception message.</li>\n<li><code>stack_trace</code> (String) \u2014 Stack trace (a list of methods called before the error occurred). An empty string, if the query is completed successfully.</li>\n<li><code>is_initial_query</code> (UInt8) \u2014 Query type. Possible values:<ul>\n<li>1 \u2014 Query was initiated by the client.</li>\n<li>0 \u2014 Query was initiated by another query for distributed query execution.</li>\n</ul>\n</li>\n<li><code>user</code> (String) \u2014 Name of the user who initiated the current query.</li>\n<li><code>query_id</code> (String) \u2014 ID of the query.</li>\n<li><code>address</code> (FixedString(16)) \u2014 IP address the query was initiated from.</li>\n<li><code>port</code> (UInt16) \u2014 The server port that was used to receive the query.</li>\n<li><code>initial_user</code> (String) \u2014  Name of the user who ran the parent query (for distributed query execution).</li>\n<li><code>initial_query_id</code> (String) \u2014 ID of the parent query.</li>\n<li><code>initial_address</code> (FixedString(16)) \u2014 IP address that the parent query was launched from.</li>\n<li><code>initial_port</code> (UInt16) \u2014 The server port that was used to receive the parent query from the client.</li>\n<li><code>interface</code> (UInt8) \u2014 Interface that the query was initiated from. Possible values:<ul>\n<li>1 \u2014 TCP.</li>\n<li>2 \u2014 HTTP.</li>\n</ul>\n</li>\n<li><code>os_user</code> (String) \u2014 User's OS.</li>\n<li><code>client_hostname</code> (String) \u2014 Server name that the <a href=\"#../interfaces/cli/\">clickhouse-client</a> is connected to.</li>\n<li><code>client_name</code> (String) \u2014 The <a href=\"#../interfaces/cli/\">clickhouse-client</a> name.</li>\n<li><code>client_revision</code> (UInt32) \u2014 Revision of the <a href=\"#../interfaces/cli/\">clickhouse-client</a>.</li>\n<li><code>client_version_major</code> (UInt32) \u2014 Major version of the <a href=\"#../interfaces/cli/\">clickhouse-client</a>.</li>\n<li><code>client_version_minor</code> (UInt32) \u2014 Minor version of the <a href=\"#../interfaces/cli/\">clickhouse-client</a>.</li>\n<li><code>client_version_patch</code> (UInt32) \u2014 Patch component of the <a href=\"#../interfaces/cli/\">clickhouse-client</a> version.</li>\n<li><code>http_method</code> (UInt8) \u2014 HTTP method that initiated the query. Possible values:<ul>\n<li>0 \u2014 The query was launched from the TCP interface.</li>\n<li>1 \u2014 <code>GET</code> method was used.</li>\n<li>2 \u2014 <code>POST</code> method was used.</li>\n</ul>\n</li>\n<li><code>http_user_agent</code> (String) \u2014 The <code>UserAgent</code> header passed in the HTTP request.</li>\n<li><code>quota_key</code> (String) \u2014 The quota key specified in the <a href=\"#quotas/\">quotas</a> setting.</li>\n<li><code>revision</code> (UInt32) \u2014 ClickHouse revision.</li>\n<li><code>thread_numbers</code> (Array(UInt32)) \u2014 Number of threads that are participating in query execution.</li>\n<li><code>ProfileEvents.Names</code> (Array(String)) \u2014 Counters that measure the following metrics:<ul>\n<li>Time spent on reading and writing over the network.</li>\n<li>Time spent on reading and writing to a disk.</li>\n<li>Number of network errors.</li>\n<li>Time spent on waiting when the network bandwidth is limited.</li>\n</ul>\n</li>\n<li><code>ProfileEvents.Values</code> (Array(UInt64)) \u2014 Values of metrics that are listed in the&#160;<code>ProfileEvents.Names</code> column.</li>\n<li><code>Settings.Names</code> (Array(String)) \u2014 Names of settings that were changed when the client ran the query. To enable logging changes to settings, set the <code>log_query_settings</code> parameter to 1.</li>\n<li><code>Settings.Values</code> (Array(String)) \u2014 Values of settings that are listed in the <code>Settings.Names</code> column.</li>\n</ul>\n<p>Each query creates one or two rows in the <code>query_log</code> table, depending on the status of the query:</p>\n<ol>\n<li>If the query execution is successful, two events with types 1 and 2 are created (see the <code>type</code> column).</li>\n<li>If an error occurred during query processing, two events with types 1 and 4 are created.</li>\n<li>If an error occurred before launching the query, a single event with type 3 is created.</li>\n</ol>\n<p>By default, logs are added to the table at intervals of 7.5 seconds. You can set this interval in the <a href=\"#server_settings-query-log\">query_log</a> server setting (see the <code>flush_interval_milliseconds</code> parameter). To flush the logs forcibly from the memory buffer into the table, use the <code>SYSTEM FLUSH LOGS</code> query.</p>\n<p>When the table is deleted manually, it will be automatically created on the fly. Note that all the previous logs will be deleted.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The storage period for logs is unlimited. Logs aren't automatically deleted from the table. You need to organize the removal of outdated logs yourself.</p>\n</div>\n<p>You can specify an arbitrary partitioning key for the <code>system.query_log</code> table in the <a href=\"#server_settings-query-log\">query_log</a> server setting (see the <code>partition_by</code> parameter).</p>\n<h3 id=\"system_tables-replicas\">system.replicas<a class=\"headerlink\" href=\"#system_tables-replicas\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information and status for replicated tables residing on the local server.<br />\nThis table can be used for monitoring. The table contains a row for every Replicated* table.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">replicas</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;visits&#39;</span>\n<span class=\"n\">FORMAT</span> <span class=\"n\">Vertical</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Row 1:\n\u2500\u2500\u2500\u2500\u2500\u2500\ndatabase:           merge\ntable:              visits\nengine:             ReplicatedCollapsingMergeTree\nis_leader:          1\nis_readonly:        0\nis_session_expired: 0\nfuture_parts:       1\nparts_to_check:     0\nzookeeper_path:     /clickhouse/tables/01-06/visits\nreplica_name:       example01-06-1.yandex.ru\nreplica_path:       /clickhouse/tables/01-06/visits/replicas/example01-06-1.yandex.ru\ncolumns_version:    9\nqueue_size:         1\ninserts_in_queue:   0\nmerges_in_queue:    1\nlog_max_index:      596273\nlog_pointer:        596274\ntotal_replicas:     2\nactive_replicas:    2\n</code></pre></div>\n\n\n<p>Columns:</p>\n<div class=\"codehilite\"><pre><span></span><code>database:          Database name\ntable:              Table name\nengine:            Table engine name\n\nis_leader:          Whether the replica is the leader.\n\nOnly one replica at a time can be the leader. The leader is responsible for selecting background merges to perform.\nNote that writes can be performed to any replica that is available and has a session in ZK, regardless of whether it is a leader.\n\nis_readonly:        Whether the replica is in read-only mode.\nThis mode is turned on if the config doesn&#39;t have sections with ZooKeeper, if an unknown error occurred when reinitializing sessions in ZooKeeper, and during session reinitialization in ZooKeeper.\n\nis_session_expired: Whether the session with ZooKeeper has expired.\nBasically the same as &#39;is_readonly&#39;.\n\nfuture_parts:       The number of data parts that will appear as the result of INSERTs or merges that haven&#39;t been done yet.\n\nparts_to_check:    The number of data parts in the queue for verification.\nA part is put in the verification queue if there is suspicion that it might be damaged.\n\nzookeeper_path:     Path to table data in ZooKeeper.\nreplica_name:       Replica name in ZooKeeper. Different replicas of the same table have different names.\nreplica_path:      Path to replica data in ZooKeeper. The same as concatenating &#39;zookeeper_path/replicas/replica_path&#39;.\n\ncolumns_version:    Version number of the table structure.\nIndicates how many times ALTER was performed. If replicas have different versions, it means some replicas haven&#39;t made all of the ALTERs yet.\n\nqueue_size:         Size of the queue for ope");
            
            document.write("rations waiting to be performed.\nOperations include inserting blocks of data, merges, and certain other actions.\nIt usually coincides with &#39;future_parts&#39;.\n\ninserts_in_queue:   Number of inserts of blocks of data that need to be made.\nInsertions are usually replicated fairly quickly. If this number is large, it means something is wrong.\n\nmerges_in_queue:    The number of merges waiting to be made.\nSometimes merges are lengthy, so this value may be greater than zero for a long time.\n\nThe next 4 columns have a non-zero value only where there is an active session with ZK.\n\nlog_max_index:      Maximum entry number in the log of general activity.\nlog_pointer:        Maximum entry number in the log of general activity that the replica copied to its execution queue, plus one.\nIf log_pointer is much smaller than log_max_index, something is wrong.\n\ntotal_replicas:     The total number of known replicas of this table.\nactive_replicas:    The number of replicas of this table that have a session in ZooKeeper (i.e., the number of functioning replicas).\n</code></pre></div>\n\n\n<p>If you request all the columns, the table may work a bit slowly, since several reads from ZooKeeper are made for each row.<br />\nIf you don't request the last 4 columns (log_max_index, log_pointer, total_replicas, active_replicas), the table works quickly.</p>\n<p>For example, you can check that everything is working correctly like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">database</span><span class=\"p\">,</span>\n    <span class=\"k\">table</span><span class=\"p\">,</span>\n    <span class=\"n\">is_leader</span><span class=\"p\">,</span>\n    <span class=\"n\">is_readonly</span><span class=\"p\">,</span>\n    <span class=\"n\">is_session_expired</span><span class=\"p\">,</span>\n    <span class=\"n\">future_parts</span><span class=\"p\">,</span>\n    <span class=\"n\">parts_to_check</span><span class=\"p\">,</span>\n    <span class=\"n\">columns_version</span><span class=\"p\">,</span>\n    <span class=\"n\">queue_size</span><span class=\"p\">,</span>\n    <span class=\"n\">inserts_in_queue</span><span class=\"p\">,</span>\n    <span class=\"n\">merges_in_queue</span><span class=\"p\">,</span>\n    <span class=\"n\">log_max_index</span><span class=\"p\">,</span>\n    <span class=\"n\">log_pointer</span><span class=\"p\">,</span>\n    <span class=\"n\">total_replicas</span><span class=\"p\">,</span>\n    <span class=\"n\">active_replicas</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">replicas</span>\n<span class=\"k\">WHERE</span>\n       <span class=\"n\">is_readonly</span>\n    <span class=\"k\">OR</span> <span class=\"n\">is_session_expired</span>\n    <span class=\"k\">OR</span> <span class=\"n\">future_parts</span> <span class=\"o\">&gt;</span> <span class=\"mi\">20</span>\n    <span class=\"k\">OR</span> <span class=\"n\">parts_to_check</span> <span class=\"o\">&gt;</span> <span class=\"mi\">10</span>\n    <span class=\"k\">OR</span> <span class=\"n\">queue_size</span> <span class=\"o\">&gt;</span> <span class=\"mi\">20</span>\n    <span class=\"k\">OR</span> <span class=\"n\">inserts_in_queue</span> <span class=\"o\">&gt;</span> <span class=\"mi\">10</span>\n    <span class=\"k\">OR</span> <span class=\"n\">log_max_index</span> <span class=\"o\">-</span> <span class=\"n\">log_pointer</span> <span class=\"o\">&gt;</span> <span class=\"mi\">10</span>\n    <span class=\"k\">OR</span> <span class=\"n\">total_replicas</span> <span class=\"o\">&lt;</span> <span class=\"mi\">2</span>\n    <span class=\"k\">OR</span> <span class=\"n\">active_replicas</span> <span class=\"o\">&lt;</span> <span class=\"n\">total_replicas</span>\n</code></pre></div>\n\n\n<p>If this query doesn't return anything, it means that everything is fine.</p>\n<h3 id=\"system-settings\">system.settings<a class=\"headerlink\" href=\"#system-settings\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about settings that are currently in use.<br />\nI.e. used for executing the query you are using to read from the system.settings table.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (String) \u2014 Setting name.</li>\n<li><code>value</code> (String)  \u2014 Setting value.</li>\n<li><code>changed</code> (UInt8) \u2014 Whether the setting was explicitly defined in the config or explicitly changed.</li>\n</ul>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">settings</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">changed</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500changed\u2500\u2510\n\u2502 max_threads            \u2502 8           \u2502       1 \u2502\n\u2502 use_uncompressed_cache \u2502 0           \u2502       1 \u2502\n\u2502 load_balancing         \u2502 random      \u2502       1 \u2502\n\u2502 max_memory_usage       \u2502 10000000000 \u2502       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"system-tables_1\">system.tables<a class=\"headerlink\" href=\"#system-tables_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains metadata of each table that the server knows about. Detached tables are not shown in <code>system.tables</code>.</p>\n<p>This table contains the following columns (the column type is shown in brackets):</p>\n<ul>\n<li><code>database</code> (String) \u2014 The name of the database the table is in.</li>\n<li><code>name</code> (String) \u2014 Table name.</li>\n<li><code>engine</code> (String) \u2014 Table engine name (without parameters).</li>\n<li><code>is_temporary</code> (UInt8) - Flag that indicates whether the table is temporary.</li>\n<li><code>data_path</code> (String) - Path to the table data in the file system.</li>\n<li><code>metadata_path</code> (String) - Path to the table metadata in the file system.</li>\n<li><code>metadata_modification_time</code> (DateTime) - Time of latest modification of the table metadata.</li>\n<li><code>dependencies_database</code> (Array(String)) - Database dependencies.</li>\n<li><code>dependencies_table</code> (Array(String)) - Table dependencies (<a href=\"#table_engines/materializedview/\">MaterializedView</a> tables based on the current table).</li>\n<li><code>create_table_query</code> (String) - The query that was used to create the table.</li>\n<li><code>engine_full</code> (String) - Parameters of the table engine.</li>\n<li><code>partition_key</code> (String) - The partition key expression specified in the table.</li>\n<li><code>sorting_key</code> (String) - The sorting key expression specified in the table.</li>\n<li><code>primary_key</code> (String) - The primary key expression specified in the table.</li>\n<li><code>sampling_key</code> (String) - The sampling key expression specified in the table.</li>\n</ul>\n<p>The <code>system.tables</code> table is used in <code>SHOW TABLES</code> query implementation.</p>\n<h3 id=\"system-zookeeper\">system.zookeeper<a class=\"headerlink\" href=\"#system-zookeeper\" title=\"Permanent link\">&para;</a></h3>\n<p>The table does not exist if ZooKeeper is not configured. Allows reading data from the ZooKeeper cluster defined in the config.<br />\nThe query must have a 'path' equality condition in the WHERE clause. This is the path in ZooKeeper for the children that you want to get data for.</p>\n<p>The query <code>SELECT * FROM system.zookeeper WHERE path = '/clickhouse'</code> outputs data for all children on the <code>/clickhouse</code> node.<br />\nTo output data for all root nodes, write path = '/'.<br />\nIf the path specified in 'path' doesn't exist, an exception will be thrown.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (String) \u2014 The name of the node.</li>\n<li><code>path</code> (String) \u2014 The path to the node.</li>\n<li><code>value</code> (String) \u2014 Node value.</li>\n<li><code>dataLength</code> (Int32) \u2014 Size of the value.</li>\n<li><code>numChildren</code> (Int32) \u2014 Number of descendants.</li>\n<li><code>czxid</code> (Int64) \u2014 ID of the transaction that created the node.</li>\n<li><code>mzxid</code> (Int64) \u2014 ID of the transaction that last changed the node.</li>\n<li><code>pzxid</code> (Int64) \u2014 ID of the transaction that last deleted or added descendants.</li>\n<li><code>ctime</code> (DateTime) \u2014 Time of node creation.</li>\n<li><code>mtime</code> (DateTime) \u2014 Time of the last modification of the node.</li>\n<li><code>version</code> (Int32) \u2014 Node version: the number of times the node was changed.</li>\n<li><code>cversion</code> (Int32) \u2014 Number of added or removed descendants.</li>\n<li><code>aversion</code> (Int32) \u2014 Number of changes to the ACL.</li>\n<li><code>ephemeralOwner</code> (Int64) \u2014 For ephemeral nodes, the ID of the session that owns this node.</li>\n</ul>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">zookeeper</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;/clickhouse/tables/01-08/visits/replicas&#39;</span>\n<span class=\"n\">FORMAT</span> <span class=\"n\">Vertical</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Row 1:\n\u2500\u2500\u2500\u2500\u2500\u2500\nname:           example01-08-1.yandex.ru\nvalue:\nczxid:          932998691229\nmzxid:          932998691229\nctime:          2015-03-27 16:49:51\nmtime:          2015-03-27 16:49:51\nversion:        0\ncversion:       47\naversion:       0\nephemeralOwner: 0\ndataLength:     0\nnumChildren:    7\npzxid:          987021031383\npath:           /clickhouse/tables/01-08/visits/replicas\n\nRow 2:\n\u2500\u2500\u2500\u2500\u2500\u2500\nname:           example01-08-2.yandex.ru\nvalue:\nczxid:          933002738135\nmzxid:          933002738135\nctime:          2015-03-27 16:57:01\nmtime:          2015-03-27 16:57:01\nversion:        0\ncversion:       37\naversion:       0\nephemeralOwner: 0\ndataLength:     0\nnumChildren:    7\npzxid:          987021252247\npath:           /clickhouse/tables/01-08/visits/replicas\n</code></pre></div>\n\n\n<h3 id=\"system_tables-mutations\">system.mutations<a class=\"headerlink\" href=\"#system_tables-mutations\" title=\"Permanent link\">&para;</a></h3>\n<p>The table contains information about <a href=\"#alter-mutations\">mutations</a> of MergeTree tables and th");
            
            document.write("eir progress. Each mutation command is represented by a single row. The table has the following columns:</p>\n<p><strong>database</strong>, <strong>table</strong> - The name of the database and table to which the mutation was applied.</p>\n<p><strong>mutation_id</strong> - The ID of the mutation. For replicated tables these IDs correspond to znode names in the <code>&lt;table_path_in_zookeeper&gt;/mutations/</code> directory in ZooKeeper. For unreplicated tables the IDs correspond to file names in the data directory of the table.</p>\n<p><strong>command</strong> - The mutation command string (the part of the query after <code>ALTER TABLE [db.]table</code>).</p>\n<p><strong>create_time</strong> - When this mutation command was submitted for execution.</p>\n<p><strong>block_numbers.partition_id</strong>, <strong>block_numbers.number</strong> - A nested column. For mutations of replicated tables, it contains one record for each partition: the partition ID and the block number that was acquired by the mutation (in each partition, only parts that contain blocks with numbers less than the block number acquired by the mutation in that partition will be mutated). In non-replicated tables, block numbers in all partitions form a single sequence. This means that for mutations of non-replicated tables, the column will contain one record with a single block number acquired by the mutation.</p>\n<p><strong>parts_to_do</strong> - The number of data parts that need to be mutated for the mutation to finish.</p>\n<p><strong>is_done</strong> - Is the mutation done? Note that even if <code>parts_to_do = 0</code> it is possible that a mutation of a replicated table is not done yet because of a long-running INSERT that will create a new data part that will need to be mutated.</p>\n<p>If there were problems with mutating some parts, the following columns contain additional information:</p>\n<p><strong>latest_failed_part</strong> - The name of the most recent part that could not be mutated.</p>\n<p><strong>latest_fail_time</strong> - The time of the most recent part mutation failure.</p>\n<p><strong>latest_fail_reason</strong> - The exception message that caused the most recent part mutation failure.</p>\n<h3 id=\"system_tables-disks\">system.disks<a class=\"headerlink\" href=\"#system_tables-disks\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about disks defined in the <a href=\"#table_engine-mergetree-multiple-volumes_configure\">server configuration</a>. </p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Name of a disk in the server configuration.</li>\n<li><code>path</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Path to the mount point in the file system.</li>\n<li><code>free_space</code> (<a href=\"#../data_types/int_uint/\">UInt64</a>) \u2014 Free space on disk in bytes.</li>\n<li><code>total_space</code> (<a href=\"#../data_types/int_uint/\">UInt64</a>) \u2014 Disk volume in bytes.</li>\n<li><code>keep_free_space</code> (<a href=\"#../data_types/int_uint/\">UInt64</a>) \u2014 Amount of disk space that should stay free on disk in bytes. Defined in the <code>keep_free_space_bytes</code> parameter of disk configuration.</li>\n</ul>\n<h3 id=\"system_tables-storage_policies\">system.storage_policies<a class=\"headerlink\" href=\"#system_tables-storage_policies\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about storage policies and volumes defined in the <a href=\"#table_engine-mergetree-multiple-volumes_configure\">server configuration</a>.</p>\n<p>Columns:</p>\n<ul>\n<li><code>policy_name</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Name of the storage policy.</li>\n<li><code>volume_name</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Volume name defined in the storage policy.</li>\n<li><code>volume_priority</code> (<a href=\"#../data_types/int_uint/\">UInt64</a>) \u2014 Volume order number in the configuration.</li>\n<li><code>disks</code> (<a href=\"#../data_types/array/\">Array(String)</a>) \u2014 Disk names, defined in the storage policy.</li>\n<li><code>max_data_part_size</code> (<a href=\"#../data_types/int_uint/\">UInt64</a>) \u2014 Maximum size of a data part that can be stored on volume disks (0 \u2014 no limit).</li>\n<li><code>move_factor</code> (<a href=\"#..data_types/float/\">Float64</a>) \u2014 Ratio of free disk space. When the ratio exceeds the value of configuration parameter, ClickHouse start to move data to the next volume in order.</li>\n</ul>\n<p>If the storage policy contains more then one volume, then information for each volume is stored in the individual row of the table.</p>\n<p><a name=\"../../../../operations/server_settings/\"></a><a name=\"../operations/server_settings/\"></a><a name=\"operations/server_settings/\"></a><a name=\"../../../../../operations/server_settings/\"></a><a name=\"../../operations/server_settings/\"></a><a name=\"server_settings/\"></a><a name=\"../../../operations/server_settings/\"></a></p>\n<h2 id=\"server_settings\">Server configuration parameters<a class=\"headerlink\" href=\"#server_settings\" title=\"Permanent link\">&para;</a></h2>\n<p>This section contains descriptions of server settings that cannot be changed at the session or query level.</p>\n<p>These settings are stored in the <code>config.xml</code> file on the ClickHouse server.</p>\n<p>Other settings are described in the \"<a href=\"#settings\">Settings</a>\" section.</p>\n<p>Before studying the settings, read the <a href=\"#configuration_files\">Configuration files</a> section and note the use of substitutions (the <code>incl</code> and <code>optional</code> attributes).</p>\n<p><a name=\"server_settings/settings/\"></a><a name=\"settings/\"></a><a name=\"../../../server_settings/settings/\"></a><a name=\"../../../../server_settings/settings/\"></a><a name=\"../../../../operations/server_settings/settings/\"></a><a name=\"../../../../../server_settings/settings/\"></a><a name=\"../server_settings/settings/\"></a><a name=\"../../operations/server_settings/settings/\"></a><a name=\"../../server_settings/settings/\"></a><a name=\"../../../../../../server_settings/settings/\"></a><a name=\"operations/server_settings/settings/\"></a><a name=\"../../../operations/server_settings/settings/\"></a><a name=\"../operations/server_settings/settings/\"></a><a name=\"../../../../../operations/server_settings/settings/\"></a></p>\n<h2 id=\"server-settings\">Server settings<a class=\"headerlink\" href=\"#server-settings\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"builtin-dictionaries-reload-interval\">builtin_dictionaries_reload_interval<a class=\"headerlink\" href=\"#builtin-dictionaries-reload-interval\" title=\"Permanent link\">&para;</a></h3>\n<p>The interval in seconds before reloading built-in dictionaries.</p>\n<p>ClickHouse reloads built-in dictionaries every x seconds. This makes it possible to edit dictionaries \"on the fly\" without restarting the server.</p>\n<p>Default value: 3600.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;builtin_dictionaries_reload_interval&gt;</span>3600<span class=\"nt\">&lt;/builtin_dictionaries_reload_interval&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"compression\">compression<a class=\"headerlink\" href=\"#compression\" title=\"Permanent link\">&para;</a></h3>\n<p>Data compression settings.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Don't use it if you have just started using ClickHouse.</p>\n</div>\n<p>The configuration looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;compression&gt;</span>\n    <span class=\"nt\">&lt;case&gt;</span>\n      <span class=\"nt\">&lt;parameters/&gt;</span>\n    <span class=\"nt\">&lt;/case&gt;</span>\n    ...\n<span class=\"nt\">&lt;/compression&gt;</span>\n</code></pre></div>\n\n\n<p>You can configure multiple sections <code>&lt;case&gt;</code>.</p>\n<p>Block field <code>&lt;case&gt;</code>:</p>\n<ul>\n<li><code>min_part_size</code> \u2013 The minimum size of a table part.</li>\n<li><code>min_part_size_ratio</code> \u2013 The ratio of the minimum size of a table part to the full size of the table.</li>\n<li><code>method</code> \u2013 Compression method. Acceptable values \u200b: <code>lz4</code> or <code>zstd</code>(experimental).</li>\n</ul>\n<p>ClickHouse checks <code>min_part_size</code> and <code>min_part_size_ratio</code> and processes the <code>case</code> blocks that match these conditions. If none of the <code>&lt;case&gt;</code> matches, ClickHouse applies the <code>lz4</code> compression algorithm.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;compression</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;clickhouse_compression&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;case&gt;</span>\n        <span class=\"nt\">&lt;min_part_size&gt;</span>10000000000<span class=\"nt\">&lt;/min_part_size&gt;</span>\n        <span class=\"nt\">&lt;min_part_size_ratio&gt;</span>0.01<span class=\"nt\">&lt;/min_part_size_ratio&gt;</span>\n        <span class=\"nt\">&lt;method&gt;</span>zstd<span class=\"nt\">&lt;/method&gt;</span>\n    <span class=\"nt\">&lt;/case&gt;</span>\n<span class=\"nt\">&lt;/compression&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"default-database\">default_database<a class=\"headerlink\" href=\"#default-database\" title=\"Permanent link\">&para;</a></h3>\n<p>The default database.</p>\n<p>To get a list of databases, use the <a href=\"#show-databases\">SHOW DATABASES</a> query.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;default_database&gt;</span>default<span class=\"nt\">&lt;/default_database&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"default-profile\">default_profile<a class=\"headerlink\" href=\"#default-profile\" title=\"Permanent link\">&para;</a></h3>\n<p>Default settings profile.</p>\n<p>Settings profiles are located in the file specified in the parameter <code>user_config</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;default_profile&gt;</span>default<span class=\"nt\">&lt;/default_profile&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-dictionaries_config\">dictionaries_config<a class=\"headerlink\" href=\"#server_settings-dictionaries_config\" title=\"Permanent link\">&para;</a></h3>\n<p");
            
            document.write(">The path to the config file for external dictionaries.</p>\n<p>Path:</p>\n<ul>\n<li>Specify the absolute path or the path relative to the server config file.</li>\n<li>The path can contain wildcards * and ?.</li>\n</ul>\n<p>See also \"<a href=\"#../../query_language/dicts/external_dicts/\">External dictionaries</a>\".</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionaries_config&gt;</span>*_dictionary.xml<span class=\"nt\">&lt;/dictionaries_config&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-dictionaries_lazy_load\">dictionaries_lazy_load<a class=\"headerlink\" href=\"#server_settings-dictionaries_lazy_load\" title=\"Permanent link\">&para;</a></h3>\n<p>Lazy loading of dictionaries.</p>\n<p>If <code>true</code>, then each dictionary is created on first use. If dictionary creation failed, the function that was using the dictionary throws an exception.</p>\n<p>If <code>false</code>, all dictionaries are created when the server starts, and if there is an error, the server shuts down.</p>\n<p>The default is <code>true</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionaries_lazy_load&gt;</span>true<span class=\"nt\">&lt;/dictionaries_lazy_load&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-format_schema_path\">format_schema_path<a class=\"headerlink\" href=\"#server_settings-format_schema_path\" title=\"Permanent link\">&para;</a></h3>\n<p>The path to the directory with the schemes for the input data, such as schemas for the <a href=\"#capnproto\">CapnProto</a> format.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"c\">&lt;!-- Directory containing schema files for various input formats. --&gt;</span>\n  <span class=\"nt\">&lt;format_schema_path&gt;</span>format_schemas/<span class=\"nt\">&lt;/format_schema_path&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-graphite\">graphite<a class=\"headerlink\" href=\"#server_settings-graphite\" title=\"Permanent link\">&para;</a></h3>\n<p>Sending data to <a href=\"https://github.com/graphite-project\" rel=\"external nofollow noreferrer\">Graphite</a>.</p>\n<p>Settings:</p>\n<ul>\n<li>host \u2013 The Graphite server.</li>\n<li>port \u2013 The port on the Graphite server.</li>\n<li>interval \u2013 The interval for sending, in seconds.</li>\n<li>timeout \u2013 The timeout for sending data, in seconds.</li>\n<li>root_path \u2013 Prefix for keys.</li>\n<li>metrics \u2013 Sending data from a <a href=\"#system_tables-metrics\">system.metrics</a> table.</li>\n<li>events \u2013 Sending deltas data accumulated for the time period from a <a href=\"#system_tables-events\">system.events</a> table.</li>\n<li>events_cumulative \u2013 Sending cumulative data from a <a href=\"#system_tables-events\">system.events</a> table.</li>\n<li>asynchronous_metrics \u2013 Sending data from a <a href=\"#system_tables-asynchronous_metrics\">system.asynchronous_metrics</a> table.</li>\n</ul>\n<p>You can configure multiple <code>&lt;graphite&gt;</code> clauses. For instance, you can use this for sending different data at different intervals.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;graphite&gt;</span>\n    <span class=\"nt\">&lt;host&gt;</span>localhost<span class=\"nt\">&lt;/host&gt;</span>\n    <span class=\"nt\">&lt;port&gt;</span>42000<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;timeout&gt;</span>0.1<span class=\"nt\">&lt;/timeout&gt;</span>\n    <span class=\"nt\">&lt;interval&gt;</span>60<span class=\"nt\">&lt;/interval&gt;</span>\n    <span class=\"nt\">&lt;root_path&gt;</span>one_min<span class=\"nt\">&lt;/root_path&gt;</span>\n    <span class=\"nt\">&lt;metrics&gt;</span>true<span class=\"nt\">&lt;/metrics&gt;</span>\n    <span class=\"nt\">&lt;events&gt;</span>true<span class=\"nt\">&lt;/events&gt;</span>\n    <span class=\"nt\">&lt;events_cumulative&gt;</span>false<span class=\"nt\">&lt;/events_cumulative&gt;</span>\n    <span class=\"nt\">&lt;asynchronous_metrics&gt;</span>true<span class=\"nt\">&lt;/asynchronous_metrics&gt;</span>\n<span class=\"nt\">&lt;/graphite&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-graphite_rollup\">graphite_rollup<a class=\"headerlink\" href=\"#server_settings-graphite_rollup\" title=\"Permanent link\">&para;</a></h3>\n<p>Settings for thinning data for Graphite.</p>\n<p>For more details, see <a href=\"#../../operations/table_engines/graphitemergetree/\">GraphiteMergeTree</a>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;graphite_rollup_example&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"nt\">&lt;function&gt;</span>max<span class=\"nt\">&lt;/function&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>0<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>60<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>3600<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>300<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>86400<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>3600<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n<span class=\"nt\">&lt;/graphite_rollup_example&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"http-port-https-port\">http_port/https_port<a class=\"headerlink\" href=\"#http-port-https-port\" title=\"Permanent link\">&para;</a></h3>\n<p>The port for connecting to the server over HTTP(s).</p>\n<p>If <code>https_port</code> is specified, <a href=\"#server_settings-openssl\">openSSL</a> must be configured.</p>\n<p>If <code>http_port</code> is specified, the openSSL configuration is ignored even if it is set.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;https&gt;</span>0000<span class=\"nt\">&lt;/https&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"http-server-default-response\">http_server_default_response<a class=\"headerlink\" href=\"#http-server-default-response\" title=\"Permanent link\">&para;</a></h3>\n<p>The page that is shown by default when you access the ClickHouse HTTP(s) server.</p>\n<p><strong>Example</strong></p>\n<p>Opens <code>https://tabix.io/</code> when accessing <code>http://localhost: http_port</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;http_server_default_response&gt;</span>\n  <span class=\"cp\">&lt;![CDATA[&lt;html ng-app=&quot;SMI2&quot;&gt;&lt;head&gt;&lt;base href=&quot;http://ui.tabix.io/&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;div ui-view=&quot;&quot; class=&quot;content-ui&quot;&gt;&lt;/div&gt;&lt;script src=&quot;http://loader.tabix.io/master.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;]]&gt;</span>\n<span class=\"nt\">&lt;/http_server_default_response&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-include_from\">include_from<a class=\"headerlink\" href=\"#server_settings-include_from\" title=\"Permanent link\">&para;</a></h3>\n<p>The path to the file with substitutions.</p>\n<p>For more information, see the section \"<a href=\"#configuration_files\">Configuration files</a>\".</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;include_from&gt;</span>/etc/metrica.xml<span class=\"nt\">&lt;/include_from&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"interserver-http-port\">interserver_http_port<a class=\"headerlink\" href=\"#interserver-http-port\" title=\"Permanent link\">&para;</a></h3>\n<p>Port for exchanging data between ClickHouse servers.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;interserver_http_port&gt;</span>9009<span class=\"nt\">&lt;/interserver_http_port&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"interserver-http-host\">interserver_http_host<a class=\"headerlink\" href=\"#interserver-http-host\" title=\"Permanent link\">&para;</a></h3>\n<p>The host name that can be used by other servers to access this server.</p>\n<p>If omitted, it is defined in the same way as the <code>hostname-f</code> command.</p>\n<p>Useful for breaking away from a specific network interface.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;interserver_http_host&gt;</span>example.yandex.ru<span class=\"nt\">&lt;/interserver_http_host&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server-settings-interserver_http_credentials\">interserver_http_credentials<a class=\"headerlink\" href=\"#server-settings-interserver_http_credentials\" title=\"Permanent link\">&para;</a></h3>\n<p>The username and password used to authenticate during <a href=\"#../table_engines/replication/\">replication</a> with the Replicated* engines. These credentials are used only for communication between replicas and are unrelated to credentials for ClickHouse clients. The server is checking these credentials for connecting replicas and use the same credentials when connecting to other replicas. So, these credentials should be set the same for all replicas in a cluster.<br />\nBy default, the authentication is not used.</p>\n<p>This section contains the following parameters:</p>\n<ul>\n<li><code>user</code> \u2014 username.</li>\n<li><code>password</code> \u2014 password.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;interserver_http_credentials&gt;</span>\n    <span class=\"nt\">&lt;user&gt;</span>admin<span class=\"nt\">&lt;/user&gt;</span>\n    <span class=\"nt\">&lt;password&gt;</span>222<span class=\"nt\">&lt;/password&gt;</span>\n<span class=\"nt\">&lt;/interserver_http_credentials&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"keep-alive-timeout\">keep_alive_timeout<a class=\"headerlink\" href=\"#keep-alive-timeout\" title=\"Permanent link\">&para;</a></h3>\n<p>The number of seconds that ClickHouse waits for incoming requests before closing the ");
            
            document.write("connection. Defaults to 3 seconds.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;keep_alive_timeout&gt;</span>3<span class=\"nt\">&lt;/keep_alive_timeout&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-listen_host\">listen_host<a class=\"headerlink\" href=\"#server_settings-listen_host\" title=\"Permanent link\">&para;</a></h3>\n<p>Restriction on hosts that requests can come from. If you want the server to answer all of them, specify <code>::</code>.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;listen_host&gt;</span>::1<span class=\"nt\">&lt;/listen_host&gt;</span>\n<span class=\"nt\">&lt;listen_host&gt;</span>127.0.0.1<span class=\"nt\">&lt;/listen_host&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-logger\">logger<a class=\"headerlink\" href=\"#server_settings-logger\" title=\"Permanent link\">&para;</a></h3>\n<p>Logging settings.</p>\n<p>Keys:</p>\n<ul>\n<li>level \u2013 Logging level. Acceptable values: <code>trace</code>, <code>debug</code>, <code>information</code>, <code>warning</code>, <code>error</code>.</li>\n<li>log \u2013 The log file. Contains all the entries according to <code>level</code>.</li>\n<li>errorlog \u2013 Error log file.</li>\n<li>size \u2013 Size of the file. Applies to <code>log</code>and<code>errorlog</code>. Once the file reaches <code>size</code>, ClickHouse archives and renames it, and creates a new log file in its place.</li>\n<li>count \u2013 The number of archived log files that ClickHouse stores.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;logger&gt;</span>\n    <span class=\"nt\">&lt;level&gt;</span>trace<span class=\"nt\">&lt;/level&gt;</span>\n    <span class=\"nt\">&lt;log&gt;</span>/var/log/clickhouse-server/clickhouse-server.log<span class=\"nt\">&lt;/log&gt;</span>\n    <span class=\"nt\">&lt;errorlog&gt;</span>/var/log/clickhouse-server/clickhouse-server.err.log<span class=\"nt\">&lt;/errorlog&gt;</span>\n    <span class=\"nt\">&lt;size&gt;</span>1000M<span class=\"nt\">&lt;/size&gt;</span>\n    <span class=\"nt\">&lt;count&gt;</span>10<span class=\"nt\">&lt;/count&gt;</span>\n<span class=\"nt\">&lt;/logger&gt;</span>\n</code></pre></div>\n\n\n<p>Writing to the syslog is also supported. Config example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;logger&gt;</span>\n    <span class=\"nt\">&lt;use_syslog&gt;</span>1<span class=\"nt\">&lt;/use_syslog&gt;</span>\n    <span class=\"nt\">&lt;syslog&gt;</span>\n        <span class=\"nt\">&lt;address&gt;</span>syslog.remote:10514<span class=\"nt\">&lt;/address&gt;</span>\n        <span class=\"nt\">&lt;hostname&gt;</span>myhost.local<span class=\"nt\">&lt;/hostname&gt;</span>\n        <span class=\"nt\">&lt;facility&gt;</span>LOG_LOCAL6<span class=\"nt\">&lt;/facility&gt;</span>\n        <span class=\"nt\">&lt;format&gt;</span>syslog<span class=\"nt\">&lt;/format&gt;</span>\n    <span class=\"nt\">&lt;/syslog&gt;</span>\n<span class=\"nt\">&lt;/logger&gt;</span>\n</code></pre></div>\n\n\n<p>Keys:</p>\n<ul>\n<li>use_syslog \u2014 Required setting if you want to write to the syslog.</li>\n<li>address \u2014 The host[:port] of syslogd. If omitted, the local daemon is used.</li>\n<li>hostname \u2014 Optional. The name of the host that logs are sent from.</li>\n<li>facility \u2014 <a href=\"https://en.wikipedia.org/wiki/Syslog#Facility\" rel=\"external nofollow noreferrer\">The syslog facility keyword</a> in uppercase letters with the \"LOG_\" prefix: (<code>LOG_USER</code>, <code>LOG_DAEMON</code>, <code>LOG_LOCAL3</code>, and so on).<br />\nDefault value: <code>LOG_USER</code> if <code>address</code> is specified, <code>LOG_DAEMON otherwise.</code></li>\n<li>format \u2013 Message format. Possible values: <code>bsd</code> and <code>syslog.</code></li>\n</ul>\n<h3 id=\"macros\">macros<a class=\"headerlink\" href=\"#macros\" title=\"Permanent link\">&para;</a></h3>\n<p>Parameter substitutions for replicated tables.</p>\n<p>Can be omitted if replicated tables are not used.</p>\n<p>For more information, see the section \"<a href=\"#../../operations/table_engines/replication/\">Creating replicated tables</a>\".</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;macros</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;macros&quot;</span> <span class=\"na\">optional=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server-mark-cache-size\">mark_cache_size<a class=\"headerlink\" href=\"#server-mark-cache-size\" title=\"Permanent link\">&para;</a></h3>\n<p>Approximate size (in bytes) of the cache of marks used by table engines of the <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a> family.</p>\n<p>The cache is shared for the server and memory is allocated as needed. The cache size must be at least 5368709120.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>This parameter could be exceeded by the <a href=\"#settings-mark_cache_min_lifetime\">mark_cache_min_lifetime</a> setting.</p>\n</div>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;mark_cache_size&gt;</span>5368709120<span class=\"nt\">&lt;/mark_cache_size&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"max-concurrent-queries\">max_concurrent_queries<a class=\"headerlink\" href=\"#max-concurrent-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of simultaneously processed requests.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;max_concurrent_queries&gt;</span>100<span class=\"nt\">&lt;/max_concurrent_queries&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"max-connections\">max_connections<a class=\"headerlink\" href=\"#max-connections\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of inbound connections.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;max_connections&gt;</span>4096<span class=\"nt\">&lt;/max_connections&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"max-open-files\">max_open_files<a class=\"headerlink\" href=\"#max-open-files\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of open files.</p>\n<p>By default: <code>maximum</code>.</p>\n<p>We recommend using this option in Mac OS X, since the <code>getrlimit()</code> function returns an incorrect value.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;max_open_files&gt;</span>262144<span class=\"nt\">&lt;/max_open_files&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"max-table-size-to-drop\">max_table_size_to_drop<a class=\"headerlink\" href=\"#max-table-size-to-drop\" title=\"Permanent link\">&para;</a></h3>\n<p>Restriction on deleting tables.</p>\n<p>If the size of a <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a> table exceeds <code>max_table_size_to_drop</code> (in bytes), you can't delete it using a DROP query.</p>\n<p>If you still need to delete the table without restarting the ClickHouse server, create the <code>&lt;clickhouse-path&gt;/flags/force_drop_table</code> file and run the DROP query.</p>\n<p>Default value: 50 GB.</p>\n<p>The value 0 means that you can delete all tables without any restrictions.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;max_table_size_to_drop&gt;</span>0<span class=\"nt\">&lt;/max_table_size_to_drop&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-merge_tree\">merge_tree<a class=\"headerlink\" href=\"#server_settings-merge_tree\" title=\"Permanent link\">&para;</a></h3>\n<p>Fine tuning for tables in the <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>.</p>\n<p>For more information, see the MergeTreeSettings.h header file.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;merge_tree&gt;</span>\n    <span class=\"nt\">&lt;max_suspicious_broken_parts&gt;</span>5<span class=\"nt\">&lt;/max_suspicious_broken_parts&gt;</span>\n<span class=\"nt\">&lt;/merge_tree&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-openssl\">openSSL<a class=\"headerlink\" href=\"#server_settings-openssl\" title=\"Permanent link\">&para;</a></h3>\n<p>SSL client/server configuration.</p>\n<p>Support for SSL is provided by the <code>libpoco</code> library. The interface is described in the file <a href=\"https://github.com/ClickHouse-Extras/poco/blob/master/NetSSL_OpenSSL/include/Poco/Net/SSLManager.h\" rel=\"external nofollow noreferrer\">SSLManager.h</a></p>\n<p>Keys for server/client settings:</p>\n<ul>\n<li>privateKeyFile \u2013 The path to the file with the secret key of the PEM certificate. The file may contain a key and certificate at the same time.</li>\n<li>certificateFile \u2013 The path to the client/server certificate file in PEM format. You can omit it if <code>privateKeyFile</code> contains the certificate.</li>\n<li>caConfig \u2013 The path to the file or directory that contains trusted root certificates.</li>\n<li>verificationMode \u2013 The method for checking the node's certificates. Details are in the description of the <a href=\"https://github.com/ClickHouse-Extras/poco/blob/master/NetSSL_OpenSSL/include/Poco/Net/Context.h\" rel=\"external nofollow noreferrer\">Context</a> class. Possible values: <code>none</code>, <code>relaxed</code>, <code>strict</code>, <code>once</code>.</li>\n<li>verificationDepth \u2013 The maximum length of the verification chain. Verification will fail if the certificate chain length exceeds the set value.</li>\n<li>loadDefaultCAFile \u2013 Indicates that built-in CA certificates for OpenSSL will be used. Acceptable values: <code>true</code>, <code>false</code>.  |</li>\n<li>cipherList \u2013 Supported OpenSSL encryptions. For example: <code>ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH</code>.</li>\n<li>cacheSessions \u2013 Enables or disables caching sessions. Must be used in combination with <code>sessionIdContext</code>. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>sessionIdContext \u2013 A unique set of random characters that the server appends to each generated identifier. The length of the string must not exceed <code>SSL_MAX_SSL_SESSION_ID_LENGTH</code>. This parameter is always recommended, since it helps avoid pro");
            
            document.write("blems both if the server caches the session and if the client requested caching. Default value: <code>${application.name}</code>.</li>\n<li>sessionCacheSize \u2013 The maximum number of sessions that the server caches. Default value: 1024*20. 0 \u2013 Unlimited sessions.</li>\n<li>sessionTimeout \u2013 Time for caching the session on the server.</li>\n<li>extendedVerification \u2013 Automatically extended verification of certificates after the session ends. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>requireTLSv1 \u2013 Require a TLSv1 connection. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>requireTLSv1_1 \u2013 Require a TLSv1.1 connection. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>requireTLSv1 \u2013 Require a TLSv1.2 connection. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>fips \u2013 Activates OpenSSL FIPS mode. Supported if the library's OpenSSL version supports FIPS.</li>\n<li>privateKeyPassphraseHandler \u2013 Class (PrivateKeyPassphraseHandler subclass) that requests the passphrase for accessing the private key. For example: <code>&lt;privateKeyPassphraseHandler&gt;</code>, <code>&lt;name&gt;KeyFileHandler&lt;/name&gt;</code>, <code>&lt;options&gt;&lt;password&gt;test&lt;/password&gt;&lt;/options&gt;</code>, <code>&lt;/privateKeyPassphraseHandler&gt;</code>.</li>\n<li>invalidCertificateHandler \u2013 Class (subclass of CertificateHandler) for verifying invalid certificates. For example: <code>&lt;invalidCertificateHandler&gt; &lt;name&gt;ConsoleCertificateHandler&lt;/name&gt; &lt;/invalidCertificateHandler&gt;</code> .</li>\n<li>disableProtocols \u2013 Protocols that are not allowed to use.</li>\n<li>preferServerCiphers \u2013 Preferred server ciphers on the client.</li>\n</ul>\n<p><strong>Example of settings:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;openSSL&gt;</span>\n    <span class=\"nt\">&lt;server&gt;</span>\n        <span class=\"c\">&lt;!-- openssl req -subj &quot;/CN=localhost&quot; -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout /etc/clickhouse-server/server.key -out /etc/clickhouse-server/server.crt --&gt;</span>\n        <span class=\"nt\">&lt;certificateFile&gt;</span>/etc/clickhouse-server/server.crt<span class=\"nt\">&lt;/certificateFile&gt;</span>\n        <span class=\"nt\">&lt;privateKeyFile&gt;</span>/etc/clickhouse-server/server.key<span class=\"nt\">&lt;/privateKeyFile&gt;</span>\n        <span class=\"c\">&lt;!-- openssl dhparam -out /etc/clickhouse-server/dhparam.pem 4096 --&gt;</span>\n        <span class=\"nt\">&lt;dhParamsFile&gt;</span>/etc/clickhouse-server/dhparam.pem<span class=\"nt\">&lt;/dhParamsFile&gt;</span>\n        <span class=\"nt\">&lt;verificationMode&gt;</span>none<span class=\"nt\">&lt;/verificationMode&gt;</span>\n        <span class=\"nt\">&lt;loadDefaultCAFile&gt;</span>true<span class=\"nt\">&lt;/loadDefaultCAFile&gt;</span>\n        <span class=\"nt\">&lt;cacheSessions&gt;</span>true<span class=\"nt\">&lt;/cacheSessions&gt;</span>\n        <span class=\"nt\">&lt;disableProtocols&gt;</span>sslv2,sslv3<span class=\"nt\">&lt;/disableProtocols&gt;</span>\n        <span class=\"nt\">&lt;preferServerCiphers&gt;</span>true<span class=\"nt\">&lt;/preferServerCiphers&gt;</span>\n    <span class=\"nt\">&lt;/server&gt;</span>\n    <span class=\"nt\">&lt;client&gt;</span>\n        <span class=\"nt\">&lt;loadDefaultCAFile&gt;</span>true<span class=\"nt\">&lt;/loadDefaultCAFile&gt;</span>\n        <span class=\"nt\">&lt;cacheSessions&gt;</span>true<span class=\"nt\">&lt;/cacheSessions&gt;</span>\n        <span class=\"nt\">&lt;disableProtocols&gt;</span>sslv2,sslv3<span class=\"nt\">&lt;/disableProtocols&gt;</span>\n        <span class=\"nt\">&lt;preferServerCiphers&gt;</span>true<span class=\"nt\">&lt;/preferServerCiphers&gt;</span>\n        <span class=\"c\">&lt;!-- Use for self-signed: &lt;verificationMode&gt;none&lt;/verificationMode&gt; --&gt;</span>\n        <span class=\"nt\">&lt;invalidCertificateHandler&gt;</span>\n            <span class=\"c\">&lt;!-- Use for self-signed: &lt;name&gt;AcceptCertificateHandler&lt;/name&gt; --&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>RejectCertificateHandler<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;/invalidCertificateHandler&gt;</span>\n    <span class=\"nt\">&lt;/client&gt;</span>\n<span class=\"nt\">&lt;/openSSL&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-part-log\">part_log<a class=\"headerlink\" href=\"#server_settings-part-log\" title=\"Permanent link\">&para;</a></h3>\n<p>Logging events that are associated with <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>. For instance, adding or merging data. You can use the log to simulate merge algorithms and compare their characteristics. You can visualize the merge process.</p>\n<p>Queries are logged in the <a href=\"#system_tables-part-log\">system.part_log</a> table, not in a separate file. You can configure the name of this table in the <code>table</code> parameter (see below).</p>\n<p>Use the following parameters to configure logging:</p>\n<ul>\n<li><code>database</code> \u2013 Name of the database.</li>\n<li><code>table</code> \u2013 Name of the system table.</li>\n<li><code>partition_by</code> \u2013 Sets a <a href=\"#../../operations/table_engines/custom_partitioning_key/\">custom partitioning key</a>.</li>\n<li><code>flush_interval_milliseconds</code> \u2013 Interval for flushing data from the buffer in memory to the table.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;part_log&gt;</span>\n    <span class=\"nt\">&lt;database&gt;</span>system<span class=\"nt\">&lt;/database&gt;</span>\n    <span class=\"nt\">&lt;table&gt;</span>part_log<span class=\"nt\">&lt;/table&gt;</span>\n    <span class=\"nt\">&lt;partition_by&gt;</span>toMonday(event_date)<span class=\"nt\">&lt;/partition_by&gt;</span>\n    <span class=\"nt\">&lt;flush_interval_milliseconds&gt;</span>7500<span class=\"nt\">&lt;/flush_interval_milliseconds&gt;</span>\n<span class=\"nt\">&lt;/part_log&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-path\">path<a class=\"headerlink\" href=\"#server_settings-path\" title=\"Permanent link\">&para;</a></h3>\n<p>The path to the directory containing data.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The trailing slash is mandatory.</p>\n</div>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;path&gt;</span>/var/lib/clickhouse/<span class=\"nt\">&lt;/path&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-query-log\">query_log<a class=\"headerlink\" href=\"#server_settings-query-log\" title=\"Permanent link\">&para;</a></h3>\n<p>Setting for logging queries received with the <a href=\"#../settings/settings/\">log_queries=1</a> setting.</p>\n<p>Queries are logged in the <a href=\"#system_tables-query-log\">system.query_log</a> table, not in a separate file. You can change the name of the table in the <code>table</code> parameter (see below).</p>\n<p>Use the following parameters to configure logging:</p>\n<ul>\n<li><code>database</code> \u2013 Name of the database.</li>\n<li><code>table</code> \u2013 Name of the system table the queries will be logged in.</li>\n<li><code>partition_by</code> \u2013 Sets a <a href=\"#../../operations/table_engines/custom_partitioning_key/\">custom partitioning key</a> for a system table.</li>\n<li><code>flush_interval_milliseconds</code> \u2013 Interval for flushing data from the buffer in memory to the table.</li>\n</ul>\n<p>If the table doesn't exist, ClickHouse will create it. If the structure of the query log changed when the ClickHouse server was updated, the table with the old structure is renamed, and a new table is created automatically.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;query_log&gt;</span>\n    <span class=\"nt\">&lt;database&gt;</span>system<span class=\"nt\">&lt;/database&gt;</span>\n    <span class=\"nt\">&lt;table&gt;</span>query_log<span class=\"nt\">&lt;/table&gt;</span>\n    <span class=\"nt\">&lt;partition_by&gt;</span>toMonday(event_date)<span class=\"nt\">&lt;/partition_by&gt;</span>\n    <span class=\"nt\">&lt;flush_interval_milliseconds&gt;</span>7500<span class=\"nt\">&lt;/flush_interval_milliseconds&gt;</span>\n<span class=\"nt\">&lt;/query_log&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"query-masking-rules\">query_masking_rules<a class=\"headerlink\" href=\"#query-masking-rules\" title=\"Permanent link\">&para;</a></h3>\n<p>Regexp-based rules, which will be applied to queries as well as all log messages before storing them in server logs,<br />\n<code>system.query_log</code>, <code>system.text_log</code>, <code>system.processes</code> table, and in logs sent to client. That allows preventing<br />\nsensitive data leakage from SQL queries (like names / emails / personal<br />\nidentifiers / credit card numbers etc) to logs.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;query_masking_rules&gt;</span>\n    <span class=\"nt\">&lt;rule&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>hide SSN<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;regexp&gt;</span>(^|\\D)\\d{3}-\\d{2}-\\d{4}($|\\D)<span class=\"nt\">&lt;/regexp&gt;</span>\n        <span class=\"nt\">&lt;replace&gt;</span>000-00-0000<span class=\"nt\">&lt;/replace&gt;</span>\n    <span class=\"nt\">&lt;/rule&gt;</span>\n<span class=\"nt\">&lt;/query_masking_rules&gt;</span>\n</code></pre></div>\n\n\n<p>Config fields:<br />\n- <code>name</code> - name for the rule (optional)<br />\n- <code>regexp</code> - RE2 compatible regular expression (mandatory)<br />\n- <code>replace</code> - substitution string for sensitive data (optional, by default - six asterisks)</p>\n<p>The masking rules are applied on whole query (to prevent leaks of sensitive data from malformed / non parsable queries).</p>\n<p><code>system.events</code> table have counter <code>QueryMaskingRulesMatch</code> which have overall number of query masking rules matches.</p>\n<p>For distributed queries each server have to be configured separately, otherwise subquries passed to other<br />\nnodes will be stored without masking.</p>\n<h3 id=\"server_settings_remote_servers\">remote_servers<a class=\"headerlink\" href=\"#server_settings_remote_servers\" title=\"Permanent link\"");
            
            document.write(">&para;</a></h3>\n<p>Configuration of clusters used by the <a href=\"#../../operations/table_engines/distributed/\">Distributed</a> table engine and by the <code>cluster</code> table function.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;remote_servers</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;clickhouse_remote_servers&quot;</span> <span class=\"nt\">/&gt;</span>\n</code></pre></div>\n\n\n<p>For the value of the <code>incl</code> attribute, see the section \"<a href=\"#configuration_files\">Configuration files</a>\".</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#settings-skip_unavailable_shards\">skip_unavailable_shards</a></li>\n</ul>\n<h3 id=\"server_settings-timezone\">timezone<a class=\"headerlink\" href=\"#server_settings-timezone\" title=\"Permanent link\">&para;</a></h3>\n<p>The server's time zone.</p>\n<p>Specified as an IANA identifier for the UTC time zone or geographic location (for example, Africa/Abidjan).</p>\n<p>The time zone is necessary for conversions between String and DateTime formats when DateTime fields are output to text format (printed on the screen or in a file), and when getting DateTime from a string. In addition, the time zone is used in functions that work with the time and date if they didn't receive the time zone in the input parameters.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;timezone&gt;</span>Europe/Moscow<span class=\"nt\">&lt;/timezone&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-tcp_port\">tcp_port<a class=\"headerlink\" href=\"#server_settings-tcp_port\" title=\"Permanent link\">&para;</a></h3>\n<p>Port for communicating with clients over the TCP protocol.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;tcp_port&gt;</span>9000<span class=\"nt\">&lt;/tcp_port&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-tcp_port_secure\">tcp_port_secure<a class=\"headerlink\" href=\"#server_settings-tcp_port_secure\" title=\"Permanent link\">&para;</a></h3>\n<p>TCP port for secure communication with clients. Use it with <a href=\"#server_settings-openssl\">OpenSSL</a> settings.</p>\n<p><strong>Possible values</strong></p>\n<p>Positive integer.</p>\n<p><strong>Default value</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;tcp_port_secure&gt;</span>9440<span class=\"nt\">&lt;/tcp_port_secure&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"tmp-path\">tmp_path<a class=\"headerlink\" href=\"#tmp-path\" title=\"Permanent link\">&para;</a></h3>\n<p>Path to temporary data for processing large queries.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The trailing slash is mandatory.</p>\n</div>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;tmp_path&gt;</span>/var/lib/clickhouse/tmp/<span class=\"nt\">&lt;/tmp_path&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server-settings-uncompressed_cache_size\">uncompressed_cache_size<a class=\"headerlink\" href=\"#server-settings-uncompressed_cache_size\" title=\"Permanent link\">&para;</a></h3>\n<p>Cache size (in bytes) for uncompressed data used by table engines from the <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>.</p>\n<p>There is one shared cache for the server. Memory is allocated on demand. The cache is used if the option <a href=\"#setting-use_uncompressed_cache\">use_uncompressed_cache</a> is enabled.</p>\n<p>The uncompressed cache is advantageous for very short queries in individual cases.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;uncompressed_cache_size&gt;</span>8589934592<span class=\"nt\">&lt;/uncompressed_cache_size&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-user_files_path\">user_files_path<a class=\"headerlink\" href=\"#server_settings-user_files_path\" title=\"Permanent link\">&para;</a></h3>\n<p>The directory with user files. Used in the table function <a href=\"#../../query_language/table_functions/file/\">file()</a>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;user_files_path&gt;</span>/var/lib/clickhouse/user_files/<span class=\"nt\">&lt;/user_files_path&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"users-config\">users_config<a class=\"headerlink\" href=\"#users-config\" title=\"Permanent link\">&para;</a></h3>\n<p>Path to the file that contains:</p>\n<ul>\n<li>User configurations.</li>\n<li>Access rights.</li>\n<li>Settings profiles.</li>\n<li>Quota settings.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;users_config&gt;</span>users.xml<span class=\"nt\">&lt;/users_config&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server-settings_zookeeper\">zookeeper<a class=\"headerlink\" href=\"#server-settings_zookeeper\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains settings that allow ClickHouse to interact with a <a href=\"http://zookeeper.apache.org/\" rel=\"external nofollow noreferrer\">ZooKeeper</a> cluster.</p>\n<p>ClickHouse uses ZooKeeper for storing metadata of replicas when using replicated tables. If replicated tables are not used, this section of parameters can be omitted.</p>\n<p>This section contains the following parameters:</p>\n<ul>\n<li>\n<p><code>node</code> \u2014 ZooKeeper endpoint. You can set multiple endpoints.</p>\n<p>For example:</p>\n<p><code>xml\n&lt;node index=\"1\"&gt;\n    &lt;host&gt;example_host&lt;/host&gt;\n    &lt;port&gt;2181&lt;/port&gt;\n&lt;/node&gt;</code></p>\n<p>The <code>index</code> attribute specifies the node order when trying to connect to the ZooKeeper cluster.</p>\n</li>\n<li>\n<p><code>session_timeout</code> \u2014 Maximum timeout for the client session in milliseconds.</p>\n</li>\n<li><code>root</code> \u2014 The <a href=\"http://zookeeper.apache.org/doc/r3.5.5/zookeeperOver.html#Nodes+and+ephemeral+nodes\" rel=\"external nofollow noreferrer\">znode</a> that is used as the root for znodes used by the ClickHouse server. Optional.</li>\n<li><code>identity</code> \u2014 User and password, that can be required by ZooKeeper to give access to requested znodes. Optional.</li>\n</ul>\n<p><strong>Example configuration</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;zookeeper&gt;</span>\n    <span class=\"nt\">&lt;node&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example1<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;node&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example2<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;session_timeout_ms&gt;</span>30000<span class=\"nt\">&lt;/session_timeout_ms&gt;</span>\n    <span class=\"nt\">&lt;operation_timeout_ms&gt;</span>10000<span class=\"nt\">&lt;/operation_timeout_ms&gt;</span>\n    <span class=\"c\">&lt;!-- Optional. Chroot suffix. Should exist. --&gt;</span>\n    <span class=\"nt\">&lt;root&gt;</span>/path/to/zookeeper/node<span class=\"nt\">&lt;/root&gt;</span>\n    <span class=\"c\">&lt;!-- Optional. Zookeeper digest ACL string. --&gt;</span>\n    <span class=\"nt\">&lt;identity&gt;</span>user:password<span class=\"nt\">&lt;/identity&gt;</span>\n<span class=\"nt\">&lt;/zookeeper&gt;</span>\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#../../operations/table_engines/replication/\">Replication</a></li>\n<li><a href=\"http://zookeeper.apache.org/doc/current/zookeeperProgrammers.html\" rel=\"external nofollow noreferrer\">ZooKeeper Programmer's Guide</a></li>\n</ul>\n<h3 id=\"server-settings-use_minimalistic_part_header_in_zookeeper\">use_minimalistic_part_header_in_zookeeper<a class=\"headerlink\" href=\"#server-settings-use_minimalistic_part_header_in_zookeeper\" title=\"Permanent link\">&para;</a></h3>\n<p>Storage method for data part headers in ZooKeeper.</p>\n<p>This setting only applies to the <code>MergeTree</code> family. It can be specified:</p>\n<ul>\n<li>\n<p>Globally in the <a href=\"#server_settings-merge_tree\">merge_tree</a> section of the <code>config.xml</code> file.</p>\n<p>ClickHouse uses the setting for all the tables on the server. You can change the setting at any time. Existing tables change their behavior when the setting changes.</p>\n</li>\n<li>\n<p>For each individual table.</p>\n<p>When creating a table, specify the corresponding <a href=\"#table_engine-mergetree-creating-a-table\">engine setting</a>. The behavior of an existing table with this setting does not change, even if the global setting changes.</p>\n</li>\n</ul>\n<p><strong>Possible values</strong></p>\n<ul>\n<li>0 \u2014 Functionality is turned off.</li>\n<li>1 \u2014 Functionality is turned on.</li>\n</ul>\n<p>If <code>use_minimalistic_part_header_in_zookeeper = 1</code>, then <a href=\"#../table_engines/replication/\">replicated</a> tables store the headers of the data parts compactly using a single <code>znode</code>. If the table contains many columns, this storage method significantly reduces the volume of the data stored in Zookeeper.</p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>After applying <code>use_minimalistic_part_header_in_zookeeper = 1</code>, you can't downgrade the ClickHouse server to a version that doesn't support this setting. Be careful when upgrading ClickHouse on servers in a cluster. Don't upgrade all the servers at once. It is safer to test new versions of ClickHouse in a test environment, or on just a few servers of a cluster.</p>\n<p>Data part headers already stored with this setting can't be restored to their previous (non-compact) representation.</p>\n</div>\n<p><strong>Default value:</strong> 0.</p>\n<h3 id=\"server-settings-disable_internal_dns_cache\">disable_internal_dns_cache<a class=\"headerlink\" href=\"#server-settings-disable_internal_dns_cache\" title=\"Permanent link\">&para;</a></h3>\n<p>Disables the internal DNS cache. Recommended for operating ClickHouse in systems<br />\nwith frequently changing infrastructure such as Kubernetes.</p>\n<p><strong>Default value:</str");
            
            document.write("ong> 0.</p>\n<h3 id=\"server-settings-dns_cache_update_period\">dns_cache_update_period<a class=\"headerlink\" href=\"#server-settings-dns_cache_update_period\" title=\"Permanent link\">&para;</a></h3>\n<p>The period of updating IP addresses stored in the ClickHouse internal DNS cache (in seconds).<br />\nThe update is performed asynchronously, in a separate system thread.</p>\n<p><strong>Default value</strong>: 15.</p>\n<p><a name=\"operations/settings/\"></a><a name=\"settings/\"></a><a name=\"../operations/settings/\"></a><a name=\"../../../../operations/settings/\"></a><a name=\"../../../../../operations/settings/\"></a><a name=\"../../../operations/settings/\"></a><a name=\"../../operations/settings/\"></a></p>\n<h2 id=\"settings\">Settings<a class=\"headerlink\" href=\"#settings\" title=\"Permanent link\">&para;</a></h2>\n<p>There are multiple ways to make all the settings described below.<br />\nSettings are configured in layers, so each subsequent layer redefines the previous settings.</p>\n<p>Ways to configure settings, in order of priority:</p>\n<ul>\n<li>\n<p>Settings in the <code>users.xml</code> server configuration file.</p>\n<p>Set in the element <code>&lt;profiles&gt;</code>.</p>\n</li>\n<li>\n<p>Session settings.</p>\n<p>Send <code>SET setting=value</code> from the ClickHouse console client in interactive mode.<br />\nSimilarly, you can use ClickHouse sessions in the HTTP protocol. To do this, you need to specify the <code>session_id</code> HTTP parameter.</p>\n</li>\n<li>\n<p>Query settings.</p>\n<ul>\n<li>When starting the ClickHouse console client in non-interactive mode, set the startup parameter <code>--setting=value</code>.</li>\n<li>When using the HTTP API, pass CGI parameters (<code>URL?setting_1=value&amp;setting_2=value...</code>).</li>\n</ul>\n</li>\n</ul>\n<p>Settings that can only be made in the server config file are not covered in this section.</p>\n<p><a name=\"../../../../settings/permissions_for_queries/\"></a><a name=\"../../../../../operations/settings/permissions_for_queries/\"></a><a name=\"../settings/permissions_for_queries/\"></a><a name=\"../../../../../../settings/permissions_for_queries/\"></a><a name=\"permissions_for_queries/\"></a><a name=\"settings/permissions_for_queries/\"></a><a name=\"../../../../operations/settings/permissions_for_queries/\"></a><a name=\"../../../../../settings/permissions_for_queries/\"></a><a name=\"../../settings/permissions_for_queries/\"></a><a name=\"operations/settings/permissions_for_queries/\"></a><a name=\"../operations/settings/permissions_for_queries/\"></a><a name=\"../../../settings/permissions_for_queries/\"></a><a name=\"../../operations/settings/permissions_for_queries/\"></a><a name=\"../../../operations/settings/permissions_for_queries/\"></a></p>\n<h2 id=\"permissions_for_queries\">Permissions for queries<a class=\"headerlink\" href=\"#permissions_for_queries\" title=\"Permanent link\">&para;</a></h2>\n<p>Queries in ClickHouse can be divided into several types:</p>\n<ol>\n<li>Read data queries: <code>SELECT</code>, <code>SHOW</code>, <code>DESCRIBE</code>, <code>EXISTS</code>.</li>\n<li>Write data queries: <code>INSERT</code>, <code>OPTIMIZE</code>.</li>\n<li>Change settings queries: <code>SET</code>, <code>USE</code>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Data_definition_language\" rel=\"external nofollow noreferrer\">DDL</a> queries: <code>CREATE</code>, <code>ALTER</code>, <code>RENAME</code>, <code>ATTACH</code>, <code>DETACH</code>, <code>DROP</code> <code>TRUNCATE</code>.</li>\n<li><code>KILL QUERY</code>.</li>\n</ol>\n<p>The following settings regulate user permissions by the type of query:</p>\n<ul>\n<li><a href=\"#settings_readonly\">readonly</a> \u2014 Restricts permissions for all types of queries except DDL queries.</li>\n<li><a href=\"#settings_allow_ddl\">allow_ddl</a> \u2014 Restricts permissions for DDL queries.</li>\n</ul>\n<p><code>KILL QUERY</code> can be performed with any settings.</p>\n<h3 id=\"settings_readonly\">readonly<a class=\"headerlink\" href=\"#settings_readonly\" title=\"Permanent link\">&para;</a></h3>\n<p>Restricts permissions for read data, write data and change settings queries.</p>\n<p>See how the queries are divided into types <a href=\"#permissions_for_queries\">above</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 All queries are allowed.</li>\n<li>1 \u2014 Only read data queries are allowed.</li>\n<li>2 \u2014 Read data and change settings queries are allowed.</li>\n</ul>\n<p>After setting <code>readonly = 1</code>, the user can't change <code>readonly</code> and <code>allow_ddl</code> settings in the current session.</p>\n<p>When using the <code>GET</code> method in the <a href=\"#../../interfaces/http/\">HTTP interface</a>, <code>readonly = 1</code> is set automatically. To modify data, use the <code>POST</code> method.</p>\n<p>Setting <code>readonly = 1</code> prohibit the user from changing all the settings. There is a way to prohibit the user<br />\nfrom changing only specific settings, for details see <a href=\"#constraints_on_settings/\">constraints on settings</a>.</p>\n<p>Default value: 0</p>\n<h3 id=\"settings_allow_ddl\">allow_ddl<a class=\"headerlink\" href=\"#settings_allow_ddl\" title=\"Permanent link\">&para;</a></h3>\n<p>Allows or denies <a href=\"https://en.wikipedia.org/wiki/Data_definition_language\" rel=\"external nofollow noreferrer\">DDL</a> queries.</p>\n<p>See how the queries are divided into types <a href=\"#permissions_for_queries\">above</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 DDL queries are not allowed.</li>\n<li>1 \u2014 DDL queries are allowed.</li>\n</ul>\n<p>You can't execute <code>SET allow_ddl = 1</code> if <code>allow_ddl = 0</code> for the current session.</p>\n<p>Default value: 1</p>\n<p><a name=\"../settings/query_complexity/\"></a><a name=\"settings/query_complexity/\"></a><a name=\"../../../../settings/query_complexity/\"></a><a name=\"../../operations/settings/query_complexity/\"></a><a name=\"../../../../operations/settings/query_complexity/\"></a><a name=\"../../../../../../settings/query_complexity/\"></a><a name=\"operations/settings/query_complexity/\"></a><a name=\"../../../../../operations/settings/query_complexity/\"></a><a name=\"../../../operations/settings/query_complexity/\"></a><a name=\"../../../../../settings/query_complexity/\"></a><a name=\"query_complexity/\"></a><a name=\"../../settings/query_complexity/\"></a><a name=\"../../../settings/query_complexity/\"></a><a name=\"../operations/settings/query_complexity/\"></a></p>\n<h2 id=\"restrictions-on-query-complexity\">Restrictions on query complexity<a class=\"headerlink\" href=\"#restrictions-on-query-complexity\" title=\"Permanent link\">&para;</a></h2>\n<p>Restrictions on query complexity are part of the settings.<br />\nThey are used in order to provide safer execution from the user interface.<br />\nAlmost all the restrictions only apply to SELECTs.For distributed query processing, restrictions are applied on each server separately.</p>\n<p>Restrictions on the \"maximum amount of something\" can take the value 0, which means \"unrestricted\".<br />\nMost restrictions also have an 'overflow_mode' setting, meaning what to do when the limit is exceeded.<br />\nIt can take one of two values: <code>throw</code> or <code>break</code>. Restrictions on aggregation (group_by_overflow_mode) also have the value <code>any</code>.</p>\n<p><code>throw</code> \u2013 Throw an exception (default).</p>\n<p><code>break</code> \u2013 Stop executing the query and return the partial result, as if the source data ran out.</p>\n<p><code>any (only for group_by_overflow_mode)</code> \u2013 Continuing aggregation for the keys that got into the set, but don't add new keys to the set.</p>\n<h3 id=\"query_complexity_readonly\">readonly<a class=\"headerlink\" href=\"#query_complexity_readonly\" title=\"Permanent link\">&para;</a></h3>\n<p>With a value of 0, you can execute any queries.<br />\nWith a value of 1, you can only execute read requests (such as SELECT and SHOW). Requests for writing and changing settings (INSERT, SET) are prohibited.<br />\nWith a value of 2, you can process read queries (SELECT, SHOW) and change settings (SET).</p>\n<p>After enabling readonly mode, you can't disable it in the current session.</p>\n<p>When using the GET method in the HTTP interface, 'readonly = 1' is set automatically. In other words, for queries that modify data, you can only use the POST method. You can send the query itself either in the POST body, or in the URL parameter.</p>\n<h3 id=\"settings_max_memory_usage\">max_memory_usage<a class=\"headerlink\" href=\"#settings_max_memory_usage\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum amount of RAM to use for running a query on a single server.</p>\n<p>In the default configuration file, the maximum is 10 GB.</p>\n<p>The setting doesn't consider the volume of available memory or the total volume of memory on the machine.<br />\nThe restriction applies to a single query within a single server.<br />\nYou can use <code>SHOW PROCESSLIST</code> to see the current memory consumption for each query.<br />\nIn addition, the peak memory consumption is tracked for each query and written to the log.</p>\n<p>Memory usage is not monitored for the states of certain aggregate functions.</p>\n<p>Memory usage is not fully tracked for states of the aggregate functions <code>min</code>, <code>max</code>, <code>any</code>, <code>anyLast</code>, <code>argMin</code>, <code>argMax</code> from <code>String</code> and <code>Array</code> arguments.</p>\n<p>Memory consumption is also restricted by the parameters <code>max_memory_usage_for_user</code> and <code>max_memory_usage_for_all_queries</code>.</p>\n<h3 id=\"max-memory-usage-for-user\">max_memory_usage_for_user<a class=\"headerlink\" href=\"#max-memory-usage-for-user\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum amount of RAM to use for running a user's queries on a single server.</p>\n<p>Default values are defined in <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/src/Interpreters/Settings.h#L244\" rel=\"external nofollow noreferrer\">Settings.h</a>. By default, the amount is not restricted (<code>max_memory_usage_for_user = 0</code>).</p>\n<p>See also the description of <a href=\"#settings_max_memory_usage\">max_memory_usage</a>.</p>\n<h3 id=\"max-memory-usage-for-all-queries\">max_memory_usage_for_all_queries<a class=\"headerlink\" href=\"#max-memory-usage-for-all-queries\" title=\"Permanent link\">&par");
            
            document.write("a;</a></h3>\n<p>The maximum amount of RAM to use for running all queries on a single server.</p>\n<p>Default values are defined in <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/src/Interpreters/Settings.h#L245\" rel=\"external nofollow noreferrer\">Settings.h</a>. By default, the amount is not restricted (<code>max_memory_usage_for_all_queries = 0</code>).</p>\n<p>See also the description of <a href=\"#settings_max_memory_usage\">max_memory_usage</a>.</p>\n<h3 id=\"max-rows-to-read\">max_rows_to_read<a class=\"headerlink\" href=\"#max-rows-to-read\" title=\"Permanent link\">&para;</a></h3>\n<p>The following restrictions can be checked on each block (instead of on each row). That is, the restrictions can be broken a little.<br />\nWhen running a query in multiple threads, the following restrictions apply to each thread separately.</p>\n<p>Maximum number of rows that can be read from a table when running a query.</p>\n<h3 id=\"max-bytes-to-read\">max_bytes_to_read<a class=\"headerlink\" href=\"#max-bytes-to-read\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes (uncompressed data) that can be read from a table when running a query.</p>\n<h3 id=\"read-overflow-mode\">read_overflow_mode<a class=\"headerlink\" href=\"#read-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the volume of data read exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"max-rows-to-group-by\">max_rows_to_group_by<a class=\"headerlink\" href=\"#max-rows-to-group-by\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of unique keys received from aggregation. This setting lets you limit memory consumption when aggregating.</p>\n<h3 id=\"group-by-overflow-mode\">group_by_overflow_mode<a class=\"headerlink\" href=\"#group-by-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the number of unique keys for aggregation exceeds the limit: 'throw', 'break', or 'any'. By default, throw.<br />\nUsing the 'any' value lets you run an approximation of GROUP BY. The quality of this approximation depends on the statistical nature of the data.</p>\n<h3 id=\"max-rows-to-sort\">max_rows_to_sort<a class=\"headerlink\" href=\"#max-rows-to-sort\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of rows before sorting. This allows you to limit memory consumption when sorting.</p>\n<h3 id=\"max-bytes-to-sort\">max_bytes_to_sort<a class=\"headerlink\" href=\"#max-bytes-to-sort\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes before sorting.</p>\n<h3 id=\"sort-overflow-mode\">sort_overflow_mode<a class=\"headerlink\" href=\"#sort-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do if the number of rows received before sorting exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"max-result-rows\">max_result_rows<a class=\"headerlink\" href=\"#max-result-rows\" title=\"Permanent link\">&para;</a></h3>\n<p>Limit on the number of rows in the result. Also checked for subqueries, and on remote servers when running parts of a distributed query.</p>\n<h3 id=\"max-result-bytes\">max_result_bytes<a class=\"headerlink\" href=\"#max-result-bytes\" title=\"Permanent link\">&para;</a></h3>\n<p>Limit on the number of bytes in the result. The same as the previous setting.</p>\n<h3 id=\"result-overflow-mode\">result_overflow_mode<a class=\"headerlink\" href=\"#result-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do if the volume of the result exceeds one of the limits: 'throw' or 'break'. By default, throw.<br />\nUsing 'break' is similar to using LIMIT.</p>\n<h3 id=\"max-execution-time\">max_execution_time<a class=\"headerlink\" href=\"#max-execution-time\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum query execution time in seconds.<br />\nAt this time, it is not checked for one of the sorting stages, or when merging and finalizing aggregate functions.</p>\n<h3 id=\"timeout-overflow-mode\">timeout_overflow_mode<a class=\"headerlink\" href=\"#timeout-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do if the query is run longer than 'max_execution_time': 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"min-execution-speed\">min_execution_speed<a class=\"headerlink\" href=\"#min-execution-speed\" title=\"Permanent link\">&para;</a></h3>\n<p>Minimal execution speed in rows per second. Checked on every data block when 'timeout_before_checking_execution_speed' expires. If the execution speed is lower, an exception is thrown.</p>\n<h3 id=\"timeout-before-checking-execution-speed\">timeout_before_checking_execution_speed<a class=\"headerlink\" href=\"#timeout-before-checking-execution-speed\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks that execution speed is not too slow (no less than 'min_execution_speed'), after the specified time in seconds has expired.</p>\n<h3 id=\"max-columns-to-read\">max_columns_to_read<a class=\"headerlink\" href=\"#max-columns-to-read\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of columns that can be read from a table in a single query. If a query requires reading a greater number of columns, it throws an exception.</p>\n<h3 id=\"max-temporary-columns\">max_temporary_columns<a class=\"headerlink\" href=\"#max-temporary-columns\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of temporary columns that must be kept in RAM at the same time when running a query, including constant columns. If there are more temporary columns than this, it throws an exception.</p>\n<h3 id=\"max-temporary-non-const-columns\">max_temporary_non_const_columns<a class=\"headerlink\" href=\"#max-temporary-non-const-columns\" title=\"Permanent link\">&para;</a></h3>\n<p>The same thing as 'max_temporary_columns', but without counting constant columns.<br />\nNote that constant columns are formed fairly often when running a query, but they require approximately zero computing resources.</p>\n<h3 id=\"max-subquery-depth\">max_subquery_depth<a class=\"headerlink\" href=\"#max-subquery-depth\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum nesting depth of subqueries. If subqueries are deeper, an exception is thrown. By default, 100.</p>\n<h3 id=\"max-pipeline-depth\">max_pipeline_depth<a class=\"headerlink\" href=\"#max-pipeline-depth\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum pipeline depth. Corresponds to the number of transformations that each data block goes through during query processing. Counted within the limits of a single server. If the pipeline depth is greater, an exception is thrown. By default, 1000.</p>\n<h3 id=\"max-ast-depth\">max_ast_depth<a class=\"headerlink\" href=\"#max-ast-depth\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum nesting depth of a query syntactic tree. If exceeded, an exception is thrown.<br />\nAt this time, it isn't checked during parsing, but only after parsing the query. That is, a syntactic tree that is too deep can be created during parsing, but the query will fail. By default, 1000.</p>\n<h3 id=\"max-ast-elements\">max_ast_elements<a class=\"headerlink\" href=\"#max-ast-elements\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of elements in a query syntactic tree. If exceeded, an exception is thrown.<br />\nIn the same way as the previous setting, it is checked only after parsing the query. By default, 50,000.</p>\n<h3 id=\"max-rows-in-set\">max_rows_in_set<a class=\"headerlink\" href=\"#max-rows-in-set\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of rows for a data set in the IN clause created from a subquery.</p>\n<h3 id=\"max-bytes-in-set\">max_bytes_in_set<a class=\"headerlink\" href=\"#max-bytes-in-set\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes (uncompressed data) used by a set in the IN clause created from a subquery.</p>\n<h3 id=\"set-overflow-mode\">set_overflow_mode<a class=\"headerlink\" href=\"#set-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the amount of data exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"max-rows-in-distinct\">max_rows_in_distinct<a class=\"headerlink\" href=\"#max-rows-in-distinct\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of different rows when using DISTINCT.</p>\n<h3 id=\"max-bytes-in-distinct\">max_bytes_in_distinct<a class=\"headerlink\" href=\"#max-bytes-in-distinct\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes used by a hash table when using DISTINCT.</p>\n<h3 id=\"distinct-overflow-mode\">distinct_overflow_mode<a class=\"headerlink\" href=\"#distinct-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the amount of data exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"max-rows-to-transfer\">max_rows_to_transfer<a class=\"headerlink\" href=\"#max-rows-to-transfer\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of rows that can be passed to a remote server or saved in a temporary table when using GLOBAL IN.</p>\n<h3 id=\"max-bytes-to-transfer\">max_bytes_to_transfer<a class=\"headerlink\" href=\"#max-bytes-to-transfer\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes (uncompressed data) that can be passed to a remote server or saved in a temporary table when using GLOBAL IN.</p>\n<h3 id=\"transfer-overflow-mode\">transfer_overflow_mode<a class=\"headerlink\" href=\"#transfer-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the amount of data exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<p><a name=\"../../../../../../settings/settings/\"></a><a name=\"settings/\"></a><a name=\"../../operations/settings/settings/\"></a><a name=\"../../../operations/settings/settings/\"></a><a name=\"../operations/settings/settings/\"></a><a name=\"../../../../../operations/settings/settings/\"></a><a name=\"../settings/settings/\"></a><a name=\"../../settings/settings/\"></a><a name=\"../../../../settings/settings/\"></a><a name=\"../../../settings/settings/\"></a><a name=\"../../../../operations/settings/settings/\"></a><a name=\"../../../../../settings/settings/\"></a><a name=\"settings/settings/\"></a><a name=\"operations/settings/settings/\"></a></p>\n<h2 id=\"settings_1\">Settings<a class=\"headerlink\" href=\"#settings_1\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"distributed-product-mode\">distributed_product_mode<a class=\"headerlink\" href=\"#distributed-product-mode\" title=\"P");
            
            document.write("ermanent link\">&para;</a></h3>\n<p>Changes the behavior of <a href=\"#../../query_language/select/\">distributed subqueries</a>.</p>\n<p>ClickHouse applies this setting when the query contains the product of distributed tables, i.e. when the query for a distributed table contains a non-GLOBAL subquery for the distributed table.</p>\n<p>Restrictions:</p>\n<ul>\n<li>Only applied for IN and JOIN subqueries.</li>\n<li>Only if the FROM section uses a distributed table containing more than one shard.</li>\n<li>If the subquery concerns a distributed table containing more than one shard.</li>\n<li>Not used for a table-valued <a href=\"#../../query_language/table_functions/remote/\">remote</a> function.</li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li><code>deny</code> \u2014 Default value. Prohibits using these types of subqueries (returns the \"Double-distributed in/JOIN subqueries is denied\" exception).</li>\n<li><code>local</code> \u2014 Replaces the database and table in the subquery with local ones for the destination server (shard), leaving the normal <code>IN</code>/<code>JOIN.</code></li>\n<li><code>global</code> \u2014 Replaces the <code>IN</code>/<code>JOIN</code> query with <code>GLOBAL IN</code>/<code>GLOBAL JOIN.</code></li>\n<li><code>allow</code> \u2014 Allows the use of these types of subqueries.</li>\n</ul>\n<h3 id=\"enable-optimize-predicate-expression\">enable_optimize_predicate_expression<a class=\"headerlink\" href=\"#enable-optimize-predicate-expression\" title=\"Permanent link\">&para;</a></h3>\n<p>Turns on predicate pushdown in <code>SELECT</code> queries.</p>\n<p>Predicate pushdown may significantly reduce network traffic for distributed queries.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<p><strong>Usage</strong></p>\n<p>Consider the following queries:</p>\n<ol>\n<li><code>SELECT count() FROM test_table WHERE date = '2018-10-10'</code></li>\n<li><code>SELECT count() FROM (SELECT * FROM test_table) WHERE date = '2018-10-10'</code></li>\n</ol>\n<p>If <code>enable_optimize_predicate_expression = 1</code>, then the execution time of these queries is equal, because ClickHouse applies <code>WHERE</code> to the subquery when processing it.</p>\n<p>If <code>enable_optimize_predicate_expression = 0</code>, then the execution time of the second query is much longer, because the <code>WHERE</code> clause applies to all the data after the subquery finishes.</p>\n<h3 id=\"settings-fallback_to_stale_replicas_for_distributed_queries\">fallback_to_stale_replicas_for_distributed_queries<a class=\"headerlink\" href=\"#settings-fallback_to_stale_replicas_for_distributed_queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Forces a query to an out-of-date replica if updated data is not available. See \"<a href=\"#../../operations/table_engines/replication/\">Replication</a>\".</p>\n<p>ClickHouse selects the most relevant from the outdated replicas of the table.</p>\n<p>Used when performing <code>SELECT</code> from a distributed table that points to replicated tables.</p>\n<p>By default, 1 (enabled).</p>\n<h3 id=\"settings-force_index_by_date\">force_index_by_date<a class=\"headerlink\" href=\"#settings-force_index_by_date\" title=\"Permanent link\">&para;</a></h3>\n<p>Disables query execution if the index can't be used by date.</p>\n<p>Works with tables in the MergeTree family.</p>\n<p>If <code>force_index_by_date=1</code>, ClickHouse checks whether the query has a date key condition that can be used for restricting data ranges. If there is no suitable condition, it throws an exception. However, it does not check whether the condition actually reduces the amount of data to read. For example, the condition <code>Date != ' 2000-01-01 '</code> is acceptable even when it matches all the data in the table (i.e., running the query requires a full scan). For more information about ranges of data in MergeTree tables, see \"<a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>\".</p>\n<h3 id=\"force-primary-key\">force_primary_key<a class=\"headerlink\" href=\"#force-primary-key\" title=\"Permanent link\">&para;</a></h3>\n<p>Disables query execution if indexing by the primary key is not possible.</p>\n<p>Works with tables in the MergeTree family.</p>\n<p>If <code>force_primary_key=1</code>, ClickHouse checks to see if the query has a primary key condition that can be used for restricting data ranges. If there is no suitable condition, it throws an exception. However, it does not check whether the condition actually reduces the amount of data to read. For more information about data ranges in MergeTree tables, see \"<a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>\".</p>\n<h3 id=\"format-schema\">format_schema<a class=\"headerlink\" href=\"#format-schema\" title=\"Permanent link\">&para;</a></h3>\n<p>This parameter is useful when you are using formats that require a schema definition, such as <a href=\"https://capnproto.org/\" rel=\"external nofollow noreferrer\">Cap'n Proto</a> or <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"external nofollow noreferrer\">Protobuf</a>. The value depends on the format.</p>\n<h3 id=\"fsync-metadata\">fsync_metadata<a class=\"headerlink\" href=\"#fsync-metadata\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fsync.html\" rel=\"external nofollow noreferrer\">fsync</a> when writing <code>.sql</code> files. Enabled by default.</p>\n<p>It makes sense to disable it if the server has millions of tiny table chunks that are constantly being created and destroyed.</p>\n<h3 id=\"settings-enable_http_compression\">enable_http_compression<a class=\"headerlink\" href=\"#settings-enable_http_compression\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables data compression in the response to an HTTP request.</p>\n<p>For more information, read the <a href=\"#../../interfaces/http/\">HTTP interface description</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-http_zlib_compression_level\">http_zlib_compression_level<a class=\"headerlink\" href=\"#settings-http_zlib_compression_level\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the level of data compression in the response to an HTTP request if <a href=\"#settings-enable_http_compression\">enable_http_compression = 1</a>.</p>\n<p>Possible values: Numbers from 1 to 9.</p>\n<p>Default value: 3.</p>\n<h3 id=\"settings-http_native_compression_disable_checksumming_on_decompress\">http_native_compression_disable_checksumming_on_decompress<a class=\"headerlink\" href=\"#settings-http_native_compression_disable_checksumming_on_decompress\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables checksum verification when decompressing the HTTP POST data from the client. Used only for ClickHouse native compression format (not used with <code>gzip</code> or <code>deflate</code>).</p>\n<p>For more information, read the <a href=\"#../../interfaces/http/\">HTTP interface description</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-send_progress_in_http_headers\">send_progress_in_http_headers<a class=\"headerlink\" href=\"#settings-send_progress_in_http_headers\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables <code>X-ClickHouse-Progress</code> HTTP response headers in <code>clickhouse-server</code> responses.</p>\n<p>For more information, read the <a href=\"#../../interfaces/http/\">HTTP interface description</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-input_format_allow_errors_num\">input_format_allow_errors_num<a class=\"headerlink\" href=\"#settings-input_format_allow_errors_num\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the maximum number of acceptable errors when reading from text formats (CSV, TSV, etc.).</p>\n<p>The default value is 0.</p>\n<p>Always pair it with <code>input_format_allow_errors_ratio</code>.</p>\n<p>If an error occurred while reading rows but the error counter is still less than <code>input_format_allow_errors_num</code>, ClickHouse ignores the row and moves on to the next one.</p>\n<p>If both <code>input_format_allow_errors_num</code> and <code>input_format_allow_errors_ratio</code> are exceeded, ClickHouse throws an exception.</p>\n<h3 id=\"settings-input_format_allow_errors_ratio\">input_format_allow_errors_ratio<a class=\"headerlink\" href=\"#settings-input_format_allow_errors_ratio\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the maximum percentage of errors allowed when reading from text formats (CSV, TSV, etc.).<br />\nThe percentage of errors is set as a floating-point number between 0 and 1.</p>\n<p>The default value is 0.</p>\n<p>Always pair it with <code>input_format_allow_errors_num</code>.</p>\n<p>If an error occurred while reading rows but the error counter is still less than <code>input_format_allow_errors_ratio</code>, ClickHouse ignores the row and moves on to the next one.</p>\n<p>If both <code>input_format_allow_errors_num</code> and <code>input_format_allow_errors_ratio</code> are exceeded, ClickHouse throws an exception.</p>\n<h3 id=\"settings-input_format_values_interpret_expressions\">input_format_values_interpret_expressions<a class=\"headerlink\" href=\"#settings-input_format_values_interpret_expressions\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables the full SQL parser if the fast stream parser can't parse the data. This setting is used only for the <a href=\"#data-format-values\">Values</a> format at the data insertion. For more information about syntax parsing, see the <a href=\"#../../query_language/syntax/\">Syntax</a> section.</p>\n<p>Possible values:</p>\n<ul>\n<li>\n<p>0 \u2014 Disabled.</p>\n<p>In this case, you must provide formatted data. See the <a href=\"#../../interfaces/formats/\">Formats</a> section.</p>\n</li>\n<li>\n<p>1 \u2014 Enabled.</p>\n<p>In this case, you can use an SQL expression as a value, but data insertion is much slower this way. If you insert only formatted data, then ClickHouse behaves as if the setting value is 0.</p>\n</li>\n</ul>\n<p>Default value: 1.</p>\n<p><strong>Example of Use</strong></p>\n<p>Insert the <a href=\"#../../data_types/datet");
            
            document.write("ime/\">DateTime</a> type value with the different settings.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">input_format_values_interpret_expressions</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">datetime_t</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">())</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Exception on client:\nCode: 27. DB::Exception: Cannot parse input: expected ) before: now()): (at row 1)\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">input_format_values_interpret_expressions</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">datetime_t</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">())</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Ok.\n</code></pre></div>\n\n\n<p>The last query is equivalent to the following:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">input_format_values_interpret_expressions</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">datetime_t</span> <span class=\"k\">SELECT</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Ok.\n</code></pre></div>\n\n\n<h3 id=\"settings-input_format_values_deduce_templates_of_expressions\">input_format_values_deduce_templates_of_expressions<a class=\"headerlink\" href=\"#settings-input_format_values_deduce_templates_of_expressions\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables template deduction for an SQL expressions in <a href=\"#data-format-values\">Values</a> format. It allows to parse and interpret expressions in <code>Values</code> much faster if expressions in consecutive rows have the same structure. ClickHouse will try to deduce template of an expression, parse the following rows using this template and evaluate the expression on batch of successfully parsed rows. For the following query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">test</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"k\">lower</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">)),</span> <span class=\"p\">(</span><span class=\"k\">lower</span><span class=\"p\">(</span><span class=\"s1\">&#39;world&#39;</span><span class=\"p\">)),</span> <span class=\"p\">(</span><span class=\"k\">lower</span><span class=\"p\">(</span><span class=\"s1\">&#39;INSERT&#39;</span><span class=\"p\">)),</span> <span class=\"p\">(</span><span class=\"k\">upper</span><span class=\"p\">(</span><span class=\"s1\">&#39;Values&#39;</span><span class=\"p\">)),</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<ul>\n<li>if <code>input_format_values_interpret_expressions=1</code> and <code>format_values_deduce_templates_of_expressions=0</code> expressions will be interpreted separately for each row (this is very slow for large number of rows)</li>\n<li>if <code>input_format_values_interpret_expressions=0</code> and <code>format_values_deduce_templates_of_expressions=1</code> expressions in the first, second and third rows will be parsed using template <code>lower(String)</code> and interpreted together, expression is the forth row will be parsed with another template (<code>upper(String)</code>)</li>\n<li>if <code>input_format_values_interpret_expressions=1</code> and <code>format_values_deduce_templates_of_expressions=1</code> - the same as in previous case, but also allows fallback to interpreting expressions separately if it's not possible to deduce template.</li>\n</ul>\n<p>This feature is experimental, disabled by default.</p>\n<h3 id=\"settings-input_format_values_accurate_types_of_literals\">input_format_values_accurate_types_of_literals<a class=\"headerlink\" href=\"#settings-input_format_values_accurate_types_of_literals\" title=\"Permanent link\">&para;</a></h3>\n<p>This setting is used only when <code>input_format_values_deduce_templates_of_expressions = 1</code>. It can happen, that expressions for some column have the same structure, but contain numeric literals of different types, e.g</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">(...,</span> <span class=\"k\">abs</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"p\">...),</span>             <span class=\"c1\">-- UInt64 literal</span>\n<span class=\"p\">(...,</span> <span class=\"k\">abs</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">.</span><span class=\"mi\">141592654</span><span class=\"p\">),</span> <span class=\"p\">...),</span>   <span class=\"c1\">-- Float64 literal</span>\n<span class=\"p\">(...,</span> <span class=\"k\">abs</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"p\">...),</span>            <span class=\"c1\">-- Int64 literal</span>\n</code></pre></div>\n\n\n<p>When this setting is enabled, ClickHouse will check actual type of literal and will use expression template of the corresponding type. In some cases it may significantly slow down expression evaluation in <code>Values</code>. <br />\nWhen disabled, ClickHouse may use more general type for some literals (e.g. <code>Float64</code> or <code>Int64</code> instead of <code>UInt64</code> for <code>42</code>), but it may cause overflow and precision issues.<br />\nEnabled by default.</p>\n<h3 id=\"session_settings-input_format_defaults_for_omitted_fields\">input_format_defaults_for_omitted_fields<a class=\"headerlink\" href=\"#session_settings-input_format_defaults_for_omitted_fields\" title=\"Permanent link\">&para;</a></h3>\n<p>When performing <code>INSERT</code> queries, replace omitted input column values with default values of the respective columns. This option only applies to <a href=\"#jsoneachrow\">JSONEachRow</a>, <a href=\"#csv\">CSV</a> and <a href=\"#tabseparated\">TabSeparated</a> formats.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>When this option is enabled, extended table metadata are sent from server to client. It consumes additional computing resources on the server and can reduce performance.</p>\n</div>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<h3 id=\"settings-input_format_tsv_empty_as_default\">input_format_tsv_empty_as_default<a class=\"headerlink\" href=\"#settings-input_format_tsv_empty_as_default\" title=\"Permanent link\">&para;</a></h3>\n<p>When enabled, replace empty input fields in TSV with default values. For complex default expressions <code>input_format_defaults_for_omitted_fields</code> must be enabled too.</p>\n<p>Disabled by default.</p>\n<h3 id=\"settings-input_format_null_as_default\">input_format_null_as_default<a class=\"headerlink\" href=\"#settings-input_format_null_as_default\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables using default values if input data contain <code>NULL</code>, but data type of corresponding column in not <code>Nullable(T)</code> (for text input formats).</p>\n<h3 id=\"settings-input_format_skip_unknown_fields\">input_format_skip_unknown_fields<a class=\"headerlink\" href=\"#settings-input_format_skip_unknown_fields\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables skipping insertion of extra data.</p>\n<p>When writing data, ClickHouse throws an exception if input data contain columns that do not exist in the target table. If skipping is enabled, ClickHouse doesn't insert extra data and doesn't throw an exception.</p>\n<p>Supported formats:</p>\n<ul>\n<li><a href=\"#jsoneachrow\">JSONEachRow</a></li>\n<li><a href=\"#csvwithnames\">CSVWithNames</a></li>\n<li><a href=\"#tabseparatedwithnames\">TabSeparatedWithNames</a></li>\n<li><a href=\"#tskv\">TSKV</a></li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-input_format_import_nested_json\">input_format_import_nested_json<a class=\"headerlink\" href=\"#settings-input_format_import_nested_json\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables the insertion of JSON data with nested objects.</p>\n<p>Supported formats:</p>\n<ul>\n<li><a href=\"#jsoneachrow\">JSONEachRow</a></li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#jsoneachrow-nested\">Usage of Nested Structures</a> with the <code>JSONEachRow</code> format.</li>\n</ul>\n<h3 id=\"settings-input_format_with_names_use_header\">input_format_with_names_use_header<a class=\"headerlink\" href=\"#settings-input_format_with_names_use_header\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables checking the column order when inserting data.</p>\n<p>To improve insert performance, we recommend disabling this check if you are sure that the column order of the input data is the same as in the target table.</p>\n<p>Supported formats:</p>\n<ul>\n<li><a href=\"#csvwithnames\">CSVWithNames</a></li>\n<li><a href=\"#tabseparatedwithnames\">TabSeparatedWithNames</a></li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<h3 id=\"settings-date_time_input_format\">date_time_input_format<a class=\"headerlink\" href=\"#settings-date_time_input_format\" title=\"Permanent link\">&para;</a></h3>\n<p>Allows to choose a parser of text representation of date and time.</p>\n<p>The setting doesn't apply to <a href=\"#../../query_language/functions/date_time_functions/\">date and time functions</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>\n<p><code>'best_effort'</code> \u2014 Enables extended parsing.</p>\n<p>ClickHouse can parse the basic <code>YYYY-MM-DD HH:MM:SS</code> format and all <a href=\"https://en.wikipedia.org/wiki/ISO_860");
            
            document.write("1\" rel=\"external nofollow noreferrer\">ISO 8601</a> date and time formats. For example, <code>'2018-06-08T01:02:03.000Z'</code>.</p>\n</li>\n<li>\n<p><code>'basic'</code> \u2014 Use basic parser.</p>\n<p>ClickHouse can parse only the basic <code>YYYY-MM-DD HH:MM:SS</code> format. For example, <code>'2019-08-20 10:18:56'</code>.</p>\n</li>\n</ul>\n<p>Default value: <code>'basic'</code>.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#../../data_types/datetime/\">DateTime data type.</a></li>\n<li><a href=\"#../../query_language/functions/date_time_functions/\">Functions for working with dates and times.</a></li>\n</ul>\n<h3 id=\"settings-join_default_strictness\">join_default_strictness<a class=\"headerlink\" href=\"#settings-join_default_strictness\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets default strictness for <a href=\"#select-join\">JOIN clauses</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li><code>ALL</code> \u2014 If the right table has several matching rows, ClickHouse creates a <a href=\"https://en.wikipedia.org/wiki/Cartesian_product\" rel=\"external nofollow noreferrer\">Cartesian product</a> from matching rows. This is the normal <code>JOIN</code> behavior from standard SQL.</li>\n<li><code>ANY</code> \u2014 If the right table has several matching rows, only the first one found is joined. If the right table has only one matching row, the results of <code>ANY</code> and <code>ALL</code> are the same.</li>\n<li><code>ASOF</code> \u2014 For joining sequences with an uncertain match.</li>\n<li><code>Empty string</code> \u2014 If <code>ALL</code> or <code>ANY</code> is not specified in the query, ClickHouse throws an exception.</li>\n</ul>\n<p>Default value: <code>ALL</code>.</p>\n<h3 id=\"settings-join_any_take_last_row\">join_any_take_last_row<a class=\"headerlink\" href=\"#settings-join_any_take_last_row\" title=\"Permanent link\">&para;</a></h3>\n<p>Changes behavior of join operations with <code>ANY</code> strictness.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Attention</p>\n<p>This setting applies only for <code>JOIN</code> operations with <a href=\"#../table_engines/join/\">Join</a> engine tables.</p>\n</div>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 If the right table has more than one matching row, only the first one found is joined.</li>\n<li>1 \u2014 If the right table has more than one matching row, only the last one found is joined.</li>\n</ul>\n<p>Default value: 0.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#select-join\">JOIN clause</a></li>\n<li><a href=\"#../table_engines/join/\">Join table engine</a></li>\n<li><a href=\"#settings-join_default_strictness\">join_default_strictness</a></li>\n</ul>\n<h3 id=\"settings-join_use_nulls\">join_use_nulls<a class=\"headerlink\" href=\"#settings-join_use_nulls\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the type of <a href=\"#../../query_language/select/\">JOIN</a> behavior. When merging tables, empty cells may appear. ClickHouse fills them differently based on this setting.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 The empty cells are filled with the default value of the corresponding field type.</li>\n<li>1 \u2014 <code>JOIN</code> behaves the same way as in standard SQL. The type of the corresponding field is converted to <a href=\"#data_type-nullable\">Nullable</a>, and empty cells are filled with <a href=\"#../../query_language/syntax/\">NULL</a>.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-join_any_take_last_row\">join_any_take_last_row<a class=\"headerlink\" href=\"#settings-join_any_take_last_row\" title=\"Permanent link\">&para;</a></h3>\n<p>Changes the behavior of <code>ANY JOIN</code>. When disabled, <code>ANY JOIN</code> takes the first row found for a key. When enabled, <code>ANY JOIN</code> takes the last matched row if there are multiple rows for the same key. The setting is used only in <a href=\"#../table_engines/join/\">Join table engine</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<h3 id=\"max-block-size\">max_block_size<a class=\"headerlink\" href=\"#max-block-size\" title=\"Permanent link\">&para;</a></h3>\n<p>In ClickHouse, data is processed by blocks (sets of column parts). The internal processing cycles for a single block are efficient enough, but there are noticeable expenditures on each block. The <code>max_block_size</code> setting is a recommendation for what size of block (in number of rows) to load from tables. The block size shouldn't be too small, so that the expenditures on each block are still noticeable, but not too large, so that the query with LIMIT that is completed after the first block is processed quickly. The goal is to avoid consuming too much memory when extracting a large number of columns in multiple threads, and to preserve at least some cache locality.</p>\n<p>Default value: 65,536.</p>\n<p>Blocks the size of <code>max_block_size</code> are not always loaded from the table. If it is obvious that less data needs to be retrieved, a smaller block is processed.</p>\n<h3 id=\"preferred-block-size-bytes\">preferred_block_size_bytes<a class=\"headerlink\" href=\"#preferred-block-size-bytes\" title=\"Permanent link\">&para;</a></h3>\n<p>Used for the same purpose as <code>max_block_size</code>, but it sets the recommended block size in bytes by adapting it to the number of rows in the block.<br />\nHowever, the block size cannot be more than <code>max_block_size</code> rows.<br />\nBy default: 1,000,000. It only works when reading from MergeTree engines.</p>\n<h3 id=\"setting-merge_tree_uniform_read_distribution\">merge_tree_uniform_read_distribution<a class=\"headerlink\" href=\"#setting-merge_tree_uniform_read_distribution\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse uses multiple threads when reading from <a href=\"#../table_engines/mergetree/\">MergeTree*</a> tables. This setting turns on/off the uniform distribution of reading tasks over the working threads. The algorithm of the uniform distribution aims to make execution time for all the threads approximately equal in a <code>SELECT</code> query.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Do not use uniform read distribution.</li>\n<li>1 \u2014 Use uniform read distribution.</li>\n</ul>\n<p>Default value: 1.</p>\n<h3 id=\"setting-merge_tree_min_rows_for_concurrent_read\">merge_tree_min_rows_for_concurrent_read<a class=\"headerlink\" href=\"#setting-merge_tree_min_rows_for_concurrent_read\" title=\"Permanent link\">&para;</a></h3>\n<p>If the number of rows to be read from a file of a <a href=\"#../table_engines/mergetree/\">MergeTree*</a> table exceeds <code>merge_tree_min_rows_for_concurrent_read</code> then ClickHouse tries to perform a concurrent reading from this file on several threads.</p>\n<p>Possible values:</p>\n<ul>\n<li>Any positive integer.</li>\n</ul>\n<p>Default value: 163840.</p>\n<h3 id=\"setting-merge_tree_min_bytes_for_concurrent_read\">merge_tree_min_bytes_for_concurrent_read<a class=\"headerlink\" href=\"#setting-merge_tree_min_bytes_for_concurrent_read\" title=\"Permanent link\">&para;</a></h3>\n<p>If the number of bytes to read from one file of a <a href=\"#../table_engines/mergetree/\">MergeTree*</a>-engine table exceeds <code>merge_tree_min_bytes_for_concurrent_read</code>, then ClickHouse tries to concurrently read from this file from several threads.</p>\n<p>Possible values:</p>\n<ul>\n<li>Any positive integer.</li>\n</ul>\n<p>Default value: 240 \u2715 1024 \u2715 1024.</p>\n<h3 id=\"setting-merge_tree_min_rows_for_seek\">merge_tree_min_rows_for_seek<a class=\"headerlink\" href=\"#setting-merge_tree_min_rows_for_seek\" title=\"Permanent link\">&para;</a></h3>\n<p>If the distance between two data blocks to be read in one file is less than <code>merge_tree_min_rows_for_seek</code> rows, then ClickHouse does not seek through the file, but reads the data sequentially.</p>\n<p>Possible values:</p>\n<ul>\n<li>Any positive integer.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"setting-merge_tree_min_bytes_for_seek\">merge_tree_min_bytes_for_seek<a class=\"headerlink\" href=\"#setting-merge_tree_min_bytes_for_seek\" title=\"Permanent link\">&para;</a></h3>\n<p>If the distance between two data blocks to be read in one file is less than <code>merge_tree_min_bytes_for_seek</code> bytes, then ClickHouse sequentially reads range of file that contains both blocks, thus avoiding extra seek.</p>\n<p>Possible values:</p>\n<ul>\n<li>Any positive integer.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"setting-merge_tree_coarse_index_granularity\">merge_tree_coarse_index_granularity<a class=\"headerlink\" href=\"#setting-merge_tree_coarse_index_granularity\" title=\"Permanent link\">&para;</a></h3>\n<p>When searching data, ClickHouse checks the data marks in the index file. If ClickHouse finds that required keys are in some range, it divides this range into <code>merge_tree_coarse_index_granularity</code> subranges and searches the required keys there recursively.</p>\n<p>Possible values:</p>\n<ul>\n<li>Any positive even integer.</li>\n</ul>\n<p>Default value: 8.</p>\n<h3 id=\"setting-merge_tree_max_rows_to_use_cache\">merge_tree_max_rows_to_use_cache<a class=\"headerlink\" href=\"#setting-merge_tree_max_rows_to_use_cache\" title=\"Permanent link\">&para;</a></h3>\n<p>If ClickHouse should read more than <code>merge_tree_max_rows_to_use_cache</code> rows in one query, it doesn't use the cache of uncompressed blocks. </p>\n<p>The cache of uncompressed blocks stores data extracted for queries. ClickHouse uses this cache to speed up responses to repeated small queries. This setting protects the cache from trashing by queries that read a large amount of data. The <a href=\"#server-settings-uncompressed_cache_size\">uncompressed_cache_size</a> server setting defines the size of the cache of uncompressed blocks.</p>\n<p>Possible values:</p>\n<ul>\n<li>Any positive integer.</li>\n</ul>\n<p>Default value: 128 \u2715 8192.</p>\n<h3 id=\"setting-merge_tree_max_bytes_to_use_cache\">merge_tree_max_bytes_to_use_cache<a class=\"headerlink\" href=\"#setting-merge_tree_max_bytes_to_use_cache\" title=\"Permanent link\">&para;</a></h3>\n<p>If ClickHouse should read more than <code>merge_tree_max_bytes_to_use_cache</code> bytes in one query, it doesn't use the cache of uncompressed blocks.</p>\n<p>The cache of uncompressed blocks stores data extracted for queries. ClickHouse uses this cache to speed up responses to repeated small queries. This setti");
            
            document.write("ng protects the cache from trashing by queries that read a large amount of data. The <a href=\"#server-settings-uncompressed_cache_size\">uncompressed_cache_size</a> server setting defines the size of the cache of uncompressed blocks.</p>\n<p>Possible values:</p>\n<ul>\n<li>Any positive integer.</li>\n</ul>\n<p>Default value: 1920 \u2715 1024 \u2715 1024.</p>\n<h3 id=\"settings-min_bytes_to_use_direct_io\">min_bytes_to_use_direct_io<a class=\"headerlink\" href=\"#settings-min_bytes_to_use_direct_io\" title=\"Permanent link\">&para;</a></h3>\n<p>The minimum data volume required for using direct I/O access to the storage disk.</p>\n<p>ClickHouse uses this setting when reading data from tables. If the total storage volume of all the data to be read exceeds <code>min_bytes_to_use_direct_io</code> bytes, then ClickHouse reads the data from the storage disk with the <code>O_DIRECT</code> option.</p>\n<p><strong>Possible values</strong></p>\n<ul>\n<li>0 \u2014 Direct I/O is disabled.</li>\n<li>Positive integer.</li>\n</ul>\n<p><strong>Default value</strong>: 0.</p>\n<h3 id=\"settings-log-queries\">log_queries<a class=\"headerlink\" href=\"#settings-log-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Setting up query logging.</p>\n<p>Queries sent to ClickHouse with this setup are logged according to the rules in the <a href=\"#server_settings-query-log\">query_log</a> server configuration parameter.</p>\n<p><strong>Example</strong>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">log_queries=1</span>\n</code></pre></div>\n\n\n<h3 id=\"settings-max_insert_block_size\">max_insert_block_size<a class=\"headerlink\" href=\"#settings-max_insert_block_size\" title=\"Permanent link\">&para;</a></h3>\n<p>The size of blocks to form for insertion into a table.<br />\nThis setting only applies in cases when the server forms the blocks.<br />\nFor example, for an INSERT via the HTTP interface, the server parses the data format and forms blocks of the specified size.<br />\nBut when using clickhouse-client, the client parses the data itself, and the 'max_insert_block_size' setting on the server doesn't affect the size of the inserted blocks.<br />\nThe setting also doesn't have a purpose when using INSERT SELECT, since data is inserted using the same blocks that are formed after SELECT.</p>\n<p>Default value: 1,048,576.</p>\n<p>The default is slightly more than <code>max_block_size</code>. The reason for this is because certain table engines (<code>*MergeTree</code>) form a data part on the disk for each inserted block, which is a fairly large entity. Similarly, <code>*MergeTree</code> tables sort data during insertion, and a large enough block size allows sorting more data in RAM.</p>\n<h3 id=\"settings-max_replica_delay_for_distributed_queries\">max_replica_delay_for_distributed_queries<a class=\"headerlink\" href=\"#settings-max_replica_delay_for_distributed_queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Disables lagging replicas for distributed queries. See \"<a href=\"#../../operations/table_engines/replication/\">Replication</a>\".</p>\n<p>Sets the time in seconds. If a replica lags more than the set value, this replica is not used.</p>\n<p>Default value: 300.</p>\n<p>Used when performing <code>SELECT</code> from a distributed table that points to replicated tables.</p>\n<h3 id=\"settings-max_threads\">max_threads<a class=\"headerlink\" href=\"#settings-max_threads\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of query processing threads, excluding threads for retrieving data from remote servers (see the 'max_distributed_connections' parameter).</p>\n<p>This parameter applies to threads that perform the same stages of the query processing pipeline in parallel.<br />\nFor example, when reading from a table, if it is possible to evaluate expressions with functions, filter with WHERE and pre-aggregate for GROUP BY in parallel using at least 'max_threads' number of threads, then 'max_threads' are used.</p>\n<p>Default value: the number of physical CPU cores.</p>\n<p>If less than one SELECT query is normally run on a server at a time, set this parameter to a value slightly less than the actual number of processor cores.</p>\n<p>For queries that are completed quickly because of a LIMIT, you can set a lower 'max_threads'. For example, if the necessary number of entries are located in every block and max_threads = 8, then 8 blocks are retrieved, although it would have been enough to read just one.</p>\n<p>The smaller the <code>max_threads</code> value, the less memory is consumed.</p>\n<h3 id=\"max-compress-block-size\">max_compress_block_size<a class=\"headerlink\" href=\"#max-compress-block-size\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum size of blocks of uncompressed data before compressing for writing to a table. By default, 1,048,576 (1 MiB). If the size is reduced, the compression rate is significantly reduced, the compression and decompression speed increases slightly due to cache locality, and memory consumption is reduced. There usually isn't any reason to change this setting.</p>\n<p>Don't confuse blocks for compression (a chunk of memory consisting of bytes) with blocks for query processing (a set of rows from a table).</p>\n<h3 id=\"min-compress-block-size\">min_compress_block_size<a class=\"headerlink\" href=\"#min-compress-block-size\" title=\"Permanent link\">&para;</a></h3>\n<p>For <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>\" tables. In order to reduce latency when processing queries, a block is compressed when writing the next mark if its size is at least 'min_compress_block_size'. By default, 65,536.</p>\n<p>The actual size of the block, if the uncompressed data is less than 'max_compress_block_size', is no less than this value and no less than the volume of data for one mark.</p>\n<p>Let's look at an example. Assume that 'index_granularity' was set to 8192 during table creation.</p>\n<p>We are writing a UInt32-type column (4 bytes per value). When writing 8192 rows, the total will be 32 KB of data. Since min_compress_block_size = 65,536, a compressed block will be formed for every two marks.</p>\n<p>We are writing a URL column with the String type (average size of 60 bytes per value). When writing 8192 rows, the average will be slightly less than 500 KB of data. Since this is more than 65,536, a compressed block will be formed for each mark. In this case, when reading data from the disk in the range of a single mark, extra data won't be decompressed.</p>\n<p>There usually isn't any reason to change this setting.</p>\n<h3 id=\"settings-mark_cache_min_lifetime\">mark_cache_min_lifetime<a class=\"headerlink\" href=\"#settings-mark_cache_min_lifetime\" title=\"Permanent link\">&para;</a></h3>\n<p>If the value of <a href=\"#server-mark-cache-size\">mark_cache_size</a> setting is exceeded, delete only records older than mark_cache_min_lifetime seconds. If your hosts have low amount of RAM, it makes sense to lower this parameter.</p>\n<p>Default value: 10000 seconds.</p>\n<h3 id=\"settings-max_query_size\">max_query_size<a class=\"headerlink\" href=\"#settings-max_query_size\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum part of a query that can be taken to RAM for parsing with the SQL parser.<br />\nThe INSERT query also contains data for INSERT that is processed by a separate stream parser (that consumes O(1) RAM), which is not included in this restriction.</p>\n<p>Default value: 256 KiB.</p>\n<h3 id=\"interactive-delay\">interactive_delay<a class=\"headerlink\" href=\"#interactive-delay\" title=\"Permanent link\">&para;</a></h3>\n<p>The interval in microseconds for checking whether request execution has been canceled and sending the progress.</p>\n<p>Default value: 100,000 (checks for canceling and sends the progress ten times per second).</p>\n<h3 id=\"connect-timeout-receive-timeout-send-timeout\">connect_timeout, receive_timeout, send_timeout<a class=\"headerlink\" href=\"#connect-timeout-receive-timeout-send-timeout\" title=\"Permanent link\">&para;</a></h3>\n<p>Timeouts in seconds on the socket used for communicating with the client.</p>\n<p>Default value: 10, 300, 300.</p>\n<h3 id=\"poll-interval\">poll_interval<a class=\"headerlink\" href=\"#poll-interval\" title=\"Permanent link\">&para;</a></h3>\n<p>Lock in a wait loop for the specified number of seconds.</p>\n<p>Default value: 10.</p>\n<h3 id=\"max-distributed-connections\">max_distributed_connections<a class=\"headerlink\" href=\"#max-distributed-connections\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of simultaneous connections with remote servers for distributed processing of a single query to a single Distributed table. We recommend setting a value no less than the number of servers in the cluster.</p>\n<p>Default value: 1024.</p>\n<p>The following parameters are only used when creating Distributed tables (and when launching a server), so there is no reason to change them at runtime.</p>\n<h3 id=\"distributed-connections-pool-size\">distributed_connections_pool_size<a class=\"headerlink\" href=\"#distributed-connections-pool-size\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of simultaneous connections with remote servers for distributed processing of all queries to a single Distributed table. We recommend setting a value no less than the number of servers in the cluster.</p>\n<p>Default value: 1024.</p>\n<h3 id=\"connect-timeout-with-failover-ms\">connect_timeout_with_failover_ms<a class=\"headerlink\" href=\"#connect-timeout-with-failover-ms\" title=\"Permanent link\">&para;</a></h3>\n<p>The timeout in milliseconds for connecting to a remote server for a Distributed table engine, if the 'shard' and 'replica' sections are used in the cluster definition.<br />\nIf unsuccessful, several attempts are made to connect to various replicas.</p>\n<p>Default value: 50.</p>\n<h3 id=\"connections-with-failover-max-tries\">connections_with_failover_max_tries<a class=\"headerlink\" href=\"#connections-with-failover-max-tries\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of connection attempts with each replica for the Distributed table engine.</p>\n<p>Default value: 3.</p>\n<h3 id=\"extremes\">extremes<a class=\"headerlink\" href=\"#extremes\" title=\"Permanent link\">&para;</a></h3>\n<p>Whether to count extreme values (the minimums and maximums in columns of a query result)");
            
            document.write(". Accepts 0 or 1. By default, 0 (disabled).<br />\nFor more information, see the section \"Extreme values\".</p>\n<h3 id=\"setting-use_uncompressed_cache\">use_uncompressed_cache<a class=\"headerlink\" href=\"#setting-use_uncompressed_cache\" title=\"Permanent link\">&para;</a></h3>\n<p>Whether to use a cache of uncompressed blocks. Accepts 0 or 1. By default, 0 (disabled).<br />\nUsing the uncompressed cache (only for tables in the MergeTree family) can significantly reduce latency and increase throughput when working with a large number of short queries. Enable this setting for users who send frequent short requests. Also pay attention to the <a href=\"#server-settings-uncompressed_cache_size\">uncompressed_cache_size</a> configuration parameter (only set in the config file) \u2013 the size of uncompressed cache blocks. By default, it is 8 GiB. The uncompressed cache is filled in as needed and the least-used data is automatically deleted.</p>\n<p>For queries that read at least a somewhat large volume of data (one million rows or more), the uncompressed cache is disabled automatically in order to save space for truly small queries. This means that you can keep the 'use_uncompressed_cache' setting always set to 1.</p>\n<h3 id=\"replace-running-query\">replace_running_query<a class=\"headerlink\" href=\"#replace-running-query\" title=\"Permanent link\">&para;</a></h3>\n<p>When using the HTTP interface, the 'query_id' parameter can be passed. This is any string that serves as the query identifier.<br />\nIf a query from the same user with the same 'query_id' already exists at this time, the behavior depends on the 'replace_running_query' parameter.</p>\n<p><code>0</code> (default) \u2013 Throw an exception (don't allow the query to run if a query with the same 'query_id' is already running).</p>\n<p><code>1</code> \u2013 Cancel the old query and start running the new one.</p>\n<p>Yandex.Metrica uses this parameter set to 1 for implementing suggestions for segmentation conditions. After entering the next character, if the old query hasn't finished yet, it should be canceled.</p>\n<h3 id=\"stream-flush-interval-ms\">stream_flush_interval_ms<a class=\"headerlink\" href=\"#stream-flush-interval-ms\" title=\"Permanent link\">&para;</a></h3>\n<p>Works for tables with streaming in the case of a timeout, or when a thread generates <a href=\"#settings-max_insert_block_size\">max_insert_block_size</a> rows.</p>\n<p>The default value is 7500.</p>\n<p>The smaller the value, the more often data is flushed into the table. Setting the value too low leads to poor performance.</p>\n<h3 id=\"settings-load_balancing\">load_balancing<a class=\"headerlink\" href=\"#settings-load_balancing\" title=\"Permanent link\">&para;</a></h3>\n<p>Specifies the algorithm of replicas selection that is used for distributed query processing.</p>\n<p>ClickHouse supports the following algorithms of choosing replicas:</p>\n<ul>\n<li><a href=\"#load_balancing-random\">Random</a> (by default)</li>\n<li><a href=\"#load_balancing-nearest_hostname\">Nearest hostname</a></li>\n<li><a href=\"#load_balancing-in_order\">In order</a></li>\n<li><a href=\"#load_balancing-first_or_random\">First or random</a></li>\n</ul>\n<h4 id=\"load_balancing-random\">Random (by default)<a class=\"headerlink\" href=\"#load_balancing-random\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">load_balancing</span> <span class=\"o\">=</span> <span class=\"n\">random</span>\n</code></pre></div>\n\n\n<p>The number of errors is counted for each replica. The query is sent to the replica with the fewest errors, and if there are several of these, to any one of them.<br />\nDisadvantages: Server proximity is not accounted for; if the replicas have different data, you will also get different data.</p>\n<h4 id=\"load_balancing-nearest_hostname\">Nearest Hostname<a class=\"headerlink\" href=\"#load_balancing-nearest_hostname\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">load_balancing</span> <span class=\"o\">=</span> <span class=\"n\">nearest_hostname</span>\n</code></pre></div>\n\n\n<p>The number of errors is counted for each replica. Every 5 minutes, the number of errors is integrally divided by 2. Thus, the number of errors is calculated for a recent time with exponential smoothing. If there is one replica with a minimal number of errors (i.e. errors occurred recently on the other replicas), the query is sent to it. If there are multiple replicas with the same minimal number of errors, the query is sent to the replica with a host name that is most similar to the server's host name in the config file (for the number of different characters in identical positions, up to the minimum length of both host names).</p>\n<p>For instance, example01-01-1 and example01-01-2.yandex.ru are different in one position, while example01-01-1 and example01-02-2 differ in two places.<br />\nThis method might seem primitive, but it doesn't require external data about network topology, and it doesn't compare IP addresses, which would be complicated for our IPv6 addresses.</p>\n<p>Thus, if there are equivalent replicas, the closest one by name is preferred.<br />\nWe can also assume that when sending a query to the same server, in the absence of failures, a distributed query will also go to the same servers. So even if different data is placed on the replicas, the query will return mostly the same results.</p>\n<h4 id=\"load_balancing-in_order\">In Order<a class=\"headerlink\" href=\"#load_balancing-in_order\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">load_balancing</span> <span class=\"o\">=</span> <span class=\"n\">in_order</span>\n</code></pre></div>\n\n\n<p>Replicas with the same number of errors are accessed in the same order as they are specified in configuration.<br />\nThis method is appropriate when you know exactly which replica is preferable.</p>\n<h4 id=\"load_balancing-first_or_random\">First or Random<a class=\"headerlink\" href=\"#load_balancing-first_or_random\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">load_balancing</span> <span class=\"o\">=</span> <span class=\"n\">first_or_random</span>\n</code></pre></div>\n\n\n<p>This algorithm chooses the first replica in the set or a random replica if the first is unavailable. It's effective in cross-replication topology setups, but useless in other configurations.</p>\n<p>The <code>first_or_random</code> algorithm solves the problem of the <code>in_order</code> algorithm. With <code>in_order</code>, if one replica goes down, the next one gets a double load while the remaining replicas handle the usual amount of traffic. When using the <code>first_or_random</code> algorithm, load is evenly distributed among replicas that are still available.</p>\n<h3 id=\"settings-prefer_localhost_replica\">prefer_localhost_replica<a class=\"headerlink\" href=\"#settings-prefer_localhost_replica\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables/disables preferable using the localhost replica when processing distributed queries.</p>\n<p>Possible values:</p>\n<ul>\n<li>1 \u2014 ClickHouse always sends a query to the localhost replica if it exists.</li>\n<li>0 \u2014 ClickHouse uses the balancing strategy specified by the <a href=\"#settings-load_balancing\">load_balancing</a> setting.</li>\n</ul>\n<p>Default value: 1.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Disable this setting if you use <a href=\"#settings-max_parallel_replicas\">max_parallel_replicas</a>.</p>\n</div>\n<h3 id=\"totals-mode\">totals_mode<a class=\"headerlink\" href=\"#totals-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>How to calculate TOTALS when HAVING is present, as well as when max_rows_to_group_by and group_by_overflow_mode = 'any' are present.<br />\nSee the section \"WITH TOTALS modifier\".</p>\n<h3 id=\"totals-auto-threshold\">totals_auto_threshold<a class=\"headerlink\" href=\"#totals-auto-threshold\" title=\"Permanent link\">&para;</a></h3>\n<p>The threshold for <code>totals_mode = 'auto'</code>.<br />\nSee the section \"WITH TOTALS modifier\".</p>\n<h3 id=\"settings-max_parallel_replicas\">max_parallel_replicas<a class=\"headerlink\" href=\"#settings-max_parallel_replicas\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of replicas for each shard when executing a query.<br />\nFor consistency (to get different parts of the same data split), this option only works when the sampling key is set.<br />\nReplica lag is not controlled.</p>\n<h3 id=\"compile\">compile<a class=\"headerlink\" href=\"#compile\" title=\"Permanent link\">&para;</a></h3>\n<p>Enable compilation of queries. By default, 0 (disabled).</p>\n<p>Compilation is only used for part of the query-processing pipeline: for the first stage of aggregation (GROUP BY).<br />\nIf this portion of the pipeline was compiled, the query may run faster due to deployment of short cycles and inlining aggregate function calls. The maximum performance improvement (up to four times faster in rare cases) is seen for queries with multiple simple aggregate functions. Typically, the performance gain is insignificant. In very rare cases, it may slow down query execution.</p>\n<h3 id=\"min-count-to-compile\">min_count_to_compile<a class=\"headerlink\" href=\"#min-count-to-compile\" title=\"Permanent link\">&para;</a></h3>\n<p>How many times to potentially use a compiled chunk of code before running compilation. By default, 3.<br />\nFor testing, the value can be set to 0: compilation runs synchronously and the query waits for the end of the compilation process before continuing execution. For all other cases, use values \u200b\u200bstarting with 1. Compilation normally takes about 5-10 seconds.<br />\nIf the value is 1 or more, compilation occurs asynchronously in a separate thread. The result will be used as soon as it is ready, including queries that are currently running.</p>\n<p>Compiled code is required for each different combination of aggregate functions used in the query and the type of keys in the GROUP BY clause.<br />\nThe results of compilation are saved in the build directory in the form of .so files. There is no restriction on the number of compilation results, since they don't use very much space. Old results will be used after ser");
            
            document.write("ver restarts, except in the case of a server upgrade \u2013 in this case, the old results are deleted.</p>\n<h3 id=\"session_settings-output_format_json_quote_64bit_integers\">output_format_json_quote_64bit_integers<a class=\"headerlink\" href=\"#session_settings-output_format_json_quote_64bit_integers\" title=\"Permanent link\">&para;</a></h3>\n<p>If the value is true, integers appear in quotes when using JSON* Int64 and UInt64 formats (for compatibility with most JavaScript implementations); otherwise, integers are output without the quotes.</p>\n<h3 id=\"settings-format_csv_delimiter\">format_csv_delimiter<a class=\"headerlink\" href=\"#settings-format_csv_delimiter\" title=\"Permanent link\">&para;</a></h3>\n<p>The character interpreted as a delimiter in the CSV data. By default, the delimiter is <code>,</code>.</p>\n<h3 id=\"settings-input_format_csv_unquoted_null_literal_as_null\">input_format_csv_unquoted_null_literal_as_null<a class=\"headerlink\" href=\"#settings-input_format_csv_unquoted_null_literal_as_null\" title=\"Permanent link\">&para;</a></h3>\n<p>For CSV input format enables or disables parsing of unquoted <code>NULL</code> as literal (synonym for <code>\\N</code>).</p>\n<h3 id=\"settings-insert_quorum\">insert_quorum<a class=\"headerlink\" href=\"#settings-insert_quorum\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables quorum writes.</p>\n<ul>\n<li>If <code>insert_quorum &lt; 2</code>, the quorum writes are disabled.</li>\n<li>If <code>insert_quorum &gt;= 2</code>, the quorum writes are enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<p><strong>Quorum writes</strong></p>\n<p><code>INSERT</code> succeeds only when ClickHouse manages to correctly write data to the <code>insert_quorum</code> of replicas during the <code>insert_quorum_timeout</code>. If for any reason the number of replicas with successful writes does not reach the <code>insert_quorum</code>, the write is considered failed and ClickHouse will delete the inserted block from all the replicas where data has already been written.</p>\n<p>All the replicas in the quorum are consistent, i.e., they contain data from all previous <code>INSERT</code> queries. The <code>INSERT</code> sequence is linearized.</p>\n<p>When reading the data written from the <code>insert_quorum</code>, you can use the <a href=\"#settings-select_sequential_consistency\">select_sequential_consistency</a> option.</p>\n<p><strong>ClickHouse generates an exception</strong></p>\n<ul>\n<li>If the number of available replicas at the time of the query is less than the <code>insert_quorum</code>.</li>\n<li>At an attempt to write data when the previous block has not yet been inserted in the <code>insert_quorum</code> of replicas. This situation may occur if the user tries to perform an <code>INSERT</code> before the previous one with the <code>insert_quorum</code> is completed.</li>\n</ul>\n<p><strong>See also the following parameters:</strong></p>\n<ul>\n<li><a href=\"#settings-insert_quorum_timeout\">insert_quorum_timeout</a></li>\n<li><a href=\"#settings-select_sequential_consistency\">select_sequential_consistency</a></li>\n</ul>\n<h3 id=\"settings-insert_quorum_timeout\">insert_quorum_timeout<a class=\"headerlink\" href=\"#settings-insert_quorum_timeout\" title=\"Permanent link\">&para;</a></h3>\n<p>Quorum write timeout in seconds. If the timeout has passed and no write has taken place yet, ClickHouse will generate an exception and the client must repeat the query to write the same block to the same or any other replica.</p>\n<p>Default value: 60 seconds.</p>\n<p><strong>See also the following parameters:</strong></p>\n<ul>\n<li><a href=\"#settings-insert_quorum\">insert_quorum</a></li>\n<li><a href=\"#settings-select_sequential_consistency\">select_sequential_consistency</a></li>\n</ul>\n<h3 id=\"settings-select_sequential_consistency\">select_sequential_consistency<a class=\"headerlink\" href=\"#settings-select_sequential_consistency\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables sequential consistency for <code>SELECT</code> queries:</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<p><strong>Usage</strong></p>\n<p>When sequential consistency is enabled, ClickHouse allows the client to execute the <code>SELECT</code> query only for those replicas that contain data from all previous <code>INSERT</code> queries executed with <code>insert_quorum</code>. If the client refers to a partial replica, ClickHouse will generate an exception. The SELECT query will not include data that has not yet been written to the quorum of replicas.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#settings-insert_quorum\">insert_quorum</a></li>\n<li><a href=\"#settings-insert_quorum_timeout\">insert_quorum_timeout</a></li>\n</ul>\n<h3 id=\"settings-max_network_bytes\">max_network_bytes<a class=\"headerlink\" href=\"#settings-max_network_bytes\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the data volume (in bytes) that is received or transmitted over the network when executing a query. This setting applies to every individual query.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Data volume control is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-max_network_bandwidth\">max_network_bandwidth<a class=\"headerlink\" href=\"#settings-max_network_bandwidth\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the speed of the data exchange over the network in bytes per second. This setting applies to every query.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Bandwidth control is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-max_network_bandwidth_for_user\">max_network_bandwidth_for_user<a class=\"headerlink\" href=\"#settings-max_network_bandwidth_for_user\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the speed of the data exchange over the network in bytes per second. This setting applies to all concurrently running queries performed by a single user.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Control of the data speed is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-max_network_bandwidth_for_all_users\">max_network_bandwidth_for_all_users<a class=\"headerlink\" href=\"#settings-max_network_bandwidth_for_all_users\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the speed that data is exchanged at over the network in bytes per second. This setting applies to all concurrently running queries on the server.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Control of the data speed is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-allow_experimental_cross_to_join_conversion\">allow_experimental_cross_to_join_conversion<a class=\"headerlink\" href=\"#settings-allow_experimental_cross_to_join_conversion\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables:</p>\n<ol>\n<li>Rewriting queries for join from the syntax with commas to the <code>JOIN ON/USING</code> syntax. If the setting value is 0, ClickHouse doesn't process queries with syntax that uses commas, and throws an exception.</li>\n<li>Converting <code>CROSS JOIN</code> to <code>INNER JOIN</code> if <code>WHERE</code> conditions allow it.</li>\n</ol>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#select-join\">Multiple JOIN</a></li>\n</ul>\n<h3 id=\"settings-count_distinct_implementation\">count_distinct_implementation<a class=\"headerlink\" href=\"#settings-count_distinct_implementation\" title=\"Permanent link\">&para;</a></h3>\n<p>Specifies which of the <code>uniq*</code> functions should be used to perform the <a href=\"#agg_function-count\">COUNT(DISTINCT ...)</a> construction.</p>\n<p>Possible values:</p>\n<ul>\n<li><a href=\"#agg_function-uniq\">uniq</a></li>\n<li><a href=\"#agg_function-uniqcombined\">uniqCombined</a></li>\n<li><a href=\"#agg_function-uniqcombined64\">uniqCombined64</a></li>\n<li><a href=\"#agg_function-uniqhll12\">uniqHLL12</a></li>\n<li><a href=\"#agg_function-uniqexact\">uniqExact</a></li>\n</ul>\n<p>Default value: <code>uniqExact</code>.</p>\n<h3 id=\"settings-skip_unavailable_shards\">skip_unavailable_shards<a class=\"headerlink\" href=\"#settings-skip_unavailable_shards\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables silently skipping of unavailable shards.</p>\n<p>Shard is considered unavailable if all its replicas are unavailable. A replica is unavailable in the following cases:</p>\n<ul>\n<li>\n<p>ClickHouse can't connect to replica for any reason.</p>\n<p>When connecting to a replica, ClickHouse performs several attempts. If all these attempts fail, the replica is considered unavailable.</p>\n</li>\n<li>\n<p>Replica can't be resolved through DNS.</p>\n<p>If replica's hostname can't be resolved through DNS, it can indicate the following situations:</p>\n<ul>\n<li>\n<p>Replica's host has no DNS record. It can occur in systems with dynamic DNS, for example, <a href=\"https://kubernetes.io\" rel=\"external nofollow noreferrer\">Kubernetes</a>, where nodes can be unresolvable during downtime, and this is not an error.</p>\n</li>\n<li>\n<p>Configuration error. ClickHouse configuration file contains a wrong hostname.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li>\n<p>1 \u2014 skipping enabled.</p>\n<p>If a shard is unavailable, ClickHouse returns a result based on partial data and doesn't report node availability issues. </p>\n</li>\n<li>\n<p>0 \u2014 skipping disabled.</p>\n<p>If a shard is unavailable, ClickHouse throws an exception.</p>\n</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"setting-optimize_throw_if_noop\">optimize_throw_if_noop<a class=\"headerlink\" href=\"#setting-optimize_throw_if_noop\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables throwing an exception if an <a href=\"#misc_operations-optimize\">OPTIMIZE</a> query didn't perform a merge.</p>\n<p>By default, <code>OPTIMIZE</code> returns successfully even if it didn't do anything. This setting lets you differentiate these situations and get the reason in an exception message.</p>\n<p>Possible values:</p>\n<ul>\n<li>1 \u2014 Throwing an exception is enabled.</li>\n<li>0 \u2014 Throwing an exception is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-distributed_replica_error_half_life\">");
            
            document.write("distributed_replica_error_half_life<a class=\"headerlink\" href=\"#settings-distributed_replica_error_half_life\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Type: seconds</li>\n<li>Default value: 60 seconds</li>\n</ul>\n<p>Controls how fast errors of distributed tables are zeroed. Given that currently a replica was unavailabe for some time and accumulated 5 errors and distributed_replica_error_half_life is set to 1 second, then said replica is considered back to normal in 3 seconds since last error.</p>\n<p><strong> See also </strong></p>\n<ul>\n<li><a href=\"#../../operations/table_engines/distributed/\">Table engine Distributed</a></li>\n<li><a href=\"#settings-distributed_replica_error_cap\"><code>distributed_replica_error_cap</code></a></li>\n</ul>\n<h3 id=\"settings-distributed_replica_error_cap\">distributed_replica_error_cap<a class=\"headerlink\" href=\"#settings-distributed_replica_error_cap\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Type: unsigned int</li>\n<li>Default value: 1000</li>\n</ul>\n<p>Error count of each replica is capped at this value, preventing a single replica from accumulating to many errors.</p>\n<p><strong> See also </strong></p>\n<ul>\n<li><a href=\"#../../operations/table_engines/distributed/\">Table engine Distributed</a></li>\n<li><a href=\"#settings-distributed_replica_error_half_life\"><code>distributed_replica_error_half_life</code></a></li>\n</ul>\n<h3 id=\"setting-os_thread_priority\">os_thread_priority<a class=\"headerlink\" href=\"#setting-os_thread_priority\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the priority (<a href=\"https://en.wikipedia.org/wiki/Nice_(Unix)\" rel=\"external nofollow noreferrer\">nice</a>) for threads that execute queries. The OS scheduler considers this priority when choosing the next thread to run on each available CPU core.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>To use this setting, you need to set the <code>CAP_SYS_NICE</code> capability. The <code>clickhouse-server</code> package sets it up during installation. Some virtual environments don't allow you to set the <code>CAP_SYS_NICE</code> capability. In this case, <code>clickhouse-server</code> shows a message about it at the start.</p>\n</div>\n<p>Possible values:</p>\n<ul>\n<li>You can set values in the range <code>[-20, 19]</code>.</li>\n</ul>\n<p>Lower values mean higher priority. Threads with low <code>nice</code> priority values are executed more frequently than threads with high values. High values are preferable for long running non-interactive queries because it allows them to quickly give up resources in favor of short interactive queries when they arrive.</p>\n<p>Default value: 0.</p>\n<p><a href=\"https://clickhouse.yandex/docs/en/operations/settings/settings/\" rel=\"external nofollow noreferrer\">Original article</a> <!-- hide --><br />\n<a name=\"../../../settings/settings_profiles/\"></a><a name=\"settings/settings_profiles/\"></a><a name=\"../../operations/settings/settings_profiles/\"></a><a name=\"settings_profiles/\"></a><a name=\"../../../operations/settings/settings_profiles/\"></a><a name=\"../../settings/settings_profiles/\"></a><a name=\"../../../../../operations/settings/settings_profiles/\"></a><a name=\"../../../../operations/settings/settings_profiles/\"></a><a name=\"../settings/settings_profiles/\"></a><a name=\"../../../../settings/settings_profiles/\"></a><a name=\"operations/settings/settings_profiles/\"></a><a name=\"../../../../../settings/settings_profiles/\"></a><a name=\"../../../../../../settings/settings_profiles/\"></a><a name=\"../operations/settings/settings_profiles/\"></a></p>\n<h2 id=\"settings-profiles\">Settings profiles<a class=\"headerlink\" href=\"#settings-profiles\" title=\"Permanent link\">&para;</a></h2>\n<p>A settings profile is a collection of settings grouped under the same name. Each ClickHouse user has a profile.<br />\nTo apply all the settings in a profile, set the <code>profile</code> setting.</p>\n<p>Example:</p>\n<p>Install the <code>web</code> profile.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">profile</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;web&#39;</span>\n</code></pre></div>\n\n\n<p>Settings profiles are declared in the user config file. This is usually <code>users.xml</code>.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">&lt;!-- Settings profiles --&gt;</span>\n<span class=\"nt\">&lt;profiles&gt;</span>\n    <span class=\"c\">&lt;!-- Default settings --&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"c\">&lt;!-- The maximum number of threads when running a single query. --&gt;</span>\n        <span class=\"nt\">&lt;max_threads&gt;</span>8<span class=\"nt\">&lt;/max_threads&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n\n    <span class=\"c\">&lt;!-- Settings for quries from the user interface --&gt;</span>\n    <span class=\"nt\">&lt;web&gt;</span>\n        <span class=\"nt\">&lt;max_rows_to_read&gt;</span>1000000000<span class=\"nt\">&lt;/max_rows_to_read&gt;</span>\n        <span class=\"nt\">&lt;max_bytes_to_read&gt;</span>100000000000<span class=\"nt\">&lt;/max_bytes_to_read&gt;</span>\n\n        <span class=\"nt\">&lt;max_rows_to_group_by&gt;</span>1000000<span class=\"nt\">&lt;/max_rows_to_group_by&gt;</span>\n        <span class=\"nt\">&lt;group_by_overflow_mode&gt;</span>any<span class=\"nt\">&lt;/group_by_overflow_mode&gt;</span>\n\n        <span class=\"nt\">&lt;max_rows_to_sort&gt;</span>1000000<span class=\"nt\">&lt;/max_rows_to_sort&gt;</span>\n        <span class=\"nt\">&lt;max_bytes_to_sort&gt;</span>1000000000<span class=\"nt\">&lt;/max_bytes_to_sort&gt;</span>\n\n        <span class=\"nt\">&lt;max_result_rows&gt;</span>100000<span class=\"nt\">&lt;/max_result_rows&gt;</span>\n        <span class=\"nt\">&lt;max_result_bytes&gt;</span>100000000<span class=\"nt\">&lt;/max_result_bytes&gt;</span>\n        <span class=\"nt\">&lt;result_overflow_mode&gt;</span>break<span class=\"nt\">&lt;/result_overflow_mode&gt;</span>\n\n        <span class=\"nt\">&lt;max_execution_time&gt;</span>600<span class=\"nt\">&lt;/max_execution_time&gt;</span>\n        <span class=\"nt\">&lt;min_execution_speed&gt;</span>1000000<span class=\"nt\">&lt;/min_execution_speed&gt;</span>\n        <span class=\"nt\">&lt;timeout_before_checking_execution_speed&gt;</span>15<span class=\"nt\">&lt;/timeout_before_checking_execution_speed&gt;</span>\n\n        <span class=\"nt\">&lt;max_columns_to_read&gt;</span>25<span class=\"nt\">&lt;/max_columns_to_read&gt;</span>\n        <span class=\"nt\">&lt;max_temporary_columns&gt;</span>100<span class=\"nt\">&lt;/max_temporary_columns&gt;</span>\n        <span class=\"nt\">&lt;max_temporary_non_const_columns&gt;</span>50<span class=\"nt\">&lt;/max_temporary_non_const_columns&gt;</span>\n\n        <span class=\"nt\">&lt;max_subquery_depth&gt;</span>2<span class=\"nt\">&lt;/max_subquery_depth&gt;</span>\n        <span class=\"nt\">&lt;max_pipeline_depth&gt;</span>25<span class=\"nt\">&lt;/max_pipeline_depth&gt;</span>\n        <span class=\"nt\">&lt;max_ast_depth&gt;</span>50<span class=\"nt\">&lt;/max_ast_depth&gt;</span>\n        <span class=\"nt\">&lt;max_ast_elements&gt;</span>100<span class=\"nt\">&lt;/max_ast_elements&gt;</span>\n\n        <span class=\"nt\">&lt;readonly&gt;</span>1<span class=\"nt\">&lt;/readonly&gt;</span>\n    <span class=\"nt\">&lt;/web&gt;</span>\n<span class=\"nt\">&lt;/profiles&gt;</span>\n</code></pre></div>\n\n\n<p>The example specifies two profiles: <code>default</code> and <code>web</code>. The <code>default</code> profile has a special purpose: it must always be present and is applied when starting the server. In other words, the <code>default</code> profile contains default settings. The <code>web</code> profile is a regular profile that can be set using the <code>SET</code> query or using a URL parameter in an HTTP query.</p>\n<p>Settings profiles can inherit from each other. To use inheritance, indicate the <code>profile</code> setting before the other settings that are listed in the profile.</p>\n<p><a name=\"settings_users/\"></a><a name=\"../../../../../operations/settings/settings_users/\"></a><a name=\"../../settings/settings_users/\"></a><a name=\"../../operations/settings/settings_users/\"></a><a name=\"../../../operations/settings/settings_users/\"></a><a name=\"../../../../settings/settings_users/\"></a><a name=\"../settings/settings_users/\"></a><a name=\"../../../../operations/settings/settings_users/\"></a><a name=\"../../../../../../settings/settings_users/\"></a><a name=\"../../../settings/settings_users/\"></a><a name=\"settings/settings_users/\"></a><a name=\"../operations/settings/settings_users/\"></a><a name=\"operations/settings/settings_users/\"></a><a name=\"../../../../../settings/settings_users/\"></a></p>\n<h2 id=\"user-settings\">User settings<a class=\"headerlink\" href=\"#user-settings\" title=\"Permanent link\">&para;</a></h2>\n<p>The <code>users</code> section of the <code>user.xml</code> configuration file contains user settings.</p>\n<p>Structure of the <code>users</code> section:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;users&gt;</span>\n    <span class=\"c\">&lt;!-- If user name was not specified, &#39;default&#39; user is used. --&gt;</span>\n    <span class=\"nt\">&lt;user_name&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n        <span class=\"c\">&lt;!-- Or --&gt;</span>\n        <span class=\"nt\">&lt;password_sha256_hex&gt;&lt;/password_sha256_hex&gt;</span>\n\n        <span class=\"nt\">&lt;networks</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;networks&quot;</span> <span class=\"na\">replace=</span><span class=\"s\">&quot;replace&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;/networks&gt;</span>\n\n        <span class=\"nt\">&lt;profile&gt;</span>profile_name<span class=\"nt\">&lt;/profile&gt;</span>\n\n        <span class=\"nt\">&lt;quota&gt;</span>default<span class=\"nt\">&lt;/quota&gt;</span>\n\n        <span class=\"nt\">&lt;databases&gt;</span>\n            <span class=\"nt\">&lt;database_name&gt;</span>\n                <span class=\"nt\">&lt;table_name&gt;</span>\n                    <span class=\"nt\">&lt;filter&gt;</span>expression<span class=\"nt\">&lt;/filter&gt;</span>\n                <span class=\"nt\">&lt;table_name&gt;</span>\n            <span class=\"nt\">&lt;/database_nam");
            
            document.write("e&gt;</span>\n        <span class=\"nt\">&lt;/databases&gt;</span>\n    <span class=\"nt\">&lt;/user_name&gt;</span>\n    <span class=\"c\">&lt;!-- Other users settings --&gt;</span>\n<span class=\"nt\">&lt;/users&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"user-name-password\">user_name/password<a class=\"headerlink\" href=\"#user-name-password\" title=\"Permanent link\">&para;</a></h4>\n<p>Password could be specified in plaintext or in SHA256 (hex format).</p>\n<ul>\n<li>\n<p>To assign a password in plaintext (<strong>not recommended</strong>), place it in a <code>password</code> element.</p>\n<p>For example, <code>&lt;password&gt;qwerty&lt;/password&gt;</code>. The password can be left blank.</p>\n</li>\n<li>\n<p>To assign a password using its SHA256 hash, place it in a <code>password_sha256_hex</code> element.</p>\n<p>For example, <code>&lt;password_sha256_hex&gt;65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5&lt;/password_sha256_hex&gt;</code>.</p>\n<p>Example of how to generate a password from shell:</p>\n<p><code>PASSWORD=$(base64 &lt; /dev/urandom | head -c8); echo \"$PASSWORD\"; echo -n \"$PASSWORD\" | sha256sum | tr -d '-'</code></p>\n<p>The first line of the result is the password. The second line is the corresponding SHA256 hash.</p>\n</li>\n</ul>\n<h4 id=\"user-name-networks\">user_name/networks<a class=\"headerlink\" href=\"#user-name-networks\" title=\"Permanent link\">&para;</a></h4>\n<p>List of networks from which the user can connect to the ClickHouse server.</p>\n<p>Each element of the list can have one of the following forms:</p>\n<ul>\n<li>\n<p><code>&lt;ip&gt;</code> \u2014 IP address or network mask.</p>\n<p>Examples: <code>213.180.204.3</code>, <code>10.0.0.1/8</code>, <code>10.0.0.1/255.255.255.0</code>, <code>2a02:6b8::3</code>, <code>2a02:6b8::3/64</code>, <code>2a02:6b8::3/ffff:ffff:ffff:ffff::</code>.</p>\n</li>\n<li>\n<p><code>&lt;host&gt;</code> \u2014 Hostname.</p>\n<p>Example: <code>server01.yandex.ru</code>.</p>\n<p>To check access, a DNS query is performed, and all returned IP addresses are compared to the peer address.</p>\n</li>\n<li>\n<p><code>&lt;host_regexp&gt;</code> \u2014 Regular expression for hostnames.</p>\n<p>Example, <code>^server\\d\\d-\\d\\d-\\d\\.yandex\\.ru$</code></p>\n<p>To check access, a <a href=\"https://en.wikipedia.org/wiki/Reverse_DNS_lookup\" rel=\"external nofollow noreferrer\">DNS PTR query</a> is performed for the peer address and then the specified regexp is applied. Then, another DNS query is performed for the results of the PTR query and all the received addresses are compared to the peer address. We strongly recommend that regexp ends with $.</p>\n</li>\n</ul>\n<p>All results of DNS requests are cached until the server restarts.</p>\n<p><strong>Examples</strong></p>\n<p>To open access for user from any network, specify:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;ip&gt;</span>::/0<span class=\"nt\">&lt;/ip&gt;</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>It's insecure to open access from any network unless you have a firewall properly configured or the server is not directly connected to Internet.</p>\n</div>\n<p>To open access only from localhost, specify:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;ip&gt;</span>::1<span class=\"nt\">&lt;/ip&gt;</span>\n<span class=\"nt\">&lt;ip&gt;</span>127.0.0.1<span class=\"nt\">&lt;/ip&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"user-name-profile\">user_name/profile<a class=\"headerlink\" href=\"#user-name-profile\" title=\"Permanent link\">&para;</a></h4>\n<p>You can assign a settings profile for the user. Settings profiles are configured in a separate section of the <code>users.xml</code> file. For more information, see <a href=\"#settings_profiles/\">Profiles of Settings</a>.</p>\n<h4 id=\"user-name-quota\">user_name/quota<a class=\"headerlink\" href=\"#user-name-quota\" title=\"Permanent link\">&para;</a></h4>\n<p>Quotas allow you to track or limit resource usage over a period of time. Quotas are configured in the <code>quotas</code><br />\nsection of the <code>users.xml</code> configuration file.</p>\n<p>You can assign a quotas set for the user. For a detailed description of quotas configuration, see <a href=\"#quotas\">Quotas</a>.</p>\n<h4 id=\"user-name-databases\">user_name/databases<a class=\"headerlink\" href=\"#user-name-databases\" title=\"Permanent link\">&para;</a></h4>\n<p>In this section, you can you can limit rows that are returned by ClickHouse for <code>SELECT</code> queries made by the current user, thus implementing basic row-level security.</p>\n<p><strong>Example</strong></p>\n<p>The following configuration forces that user <code>user1</code> can only see the rows of <code>table1</code> as the result of <code>SELECT</code> queries, where the value of the <code>id</code> field is 1000.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;user1&gt;</span>\n    <span class=\"nt\">&lt;databases&gt;</span>\n        <span class=\"nt\">&lt;database_name&gt;</span>\n            <span class=\"nt\">&lt;table1&gt;</span>\n                <span class=\"nt\">&lt;filter&gt;</span>id = 1000<span class=\"nt\">&lt;/filter&gt;</span>\n            <span class=\"nt\">&lt;/table1&gt;</span>\n        <span class=\"nt\">&lt;/database_name&gt;</span>\n    <span class=\"nt\">&lt;/databases&gt;</span>\n<span class=\"nt\">&lt;/user1&gt;</span>\n</code></pre></div>\n\n\n<p>The <code>filter</code> can be any expression resulting in a <a href=\"#../../data_types/int_uint/\">UInt8</a>-type value. It usually contains comparisons and logical operators. Rows from <code>database_name.table1</code> where filter results to 0 are not returned for this user. The filtering is incompatible with <code>PREWHERE</code> operations and disables <code>WHERE\u2192PREWHERE</code> optimization.</p>\n<p><a name=\"../../../../../operations/settings/constraints_on_settings/\"></a><a name=\"constraints_on_settings/\"></a><a name=\"../settings/constraints_on_settings/\"></a><a name=\"../../../settings/constraints_on_settings/\"></a><a name=\"../operations/settings/constraints_on_settings/\"></a><a name=\"../../../operations/settings/constraints_on_settings/\"></a><a name=\"../../settings/constraints_on_settings/\"></a><a name=\"../../../../../../settings/constraints_on_settings/\"></a><a name=\"settings/constraints_on_settings/\"></a><a name=\"../../../../operations/settings/constraints_on_settings/\"></a><a name=\"../../operations/settings/constraints_on_settings/\"></a><a name=\"operations/settings/constraints_on_settings/\"></a><a name=\"../../../../../settings/constraints_on_settings/\"></a><a name=\"../../../../settings/constraints_on_settings/\"></a></p>\n<h2 id=\"constraints-on-settings\">Constraints on Settings<a class=\"headerlink\" href=\"#constraints-on-settings\" title=\"Permanent link\">&para;</a></h2>\n<p>The constraints on settings can be defined in the <code>users</code> section of the <code>user.xml</code> configuration file and prohibit users from changing some of the settings with the <code>SET</code> query.<br />\nThe constraints are defined as following:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;profiles&gt;</span>\n  <span class=\"nt\">&lt;user_name&gt;</span>\n    <span class=\"nt\">&lt;constraints&gt;</span>\n      <span class=\"nt\">&lt;setting_name_1&gt;</span>\n        <span class=\"nt\">&lt;min&gt;</span>lower_boundary<span class=\"nt\">&lt;/min&gt;</span>\n      <span class=\"nt\">&lt;/setting_name_1&gt;</span>\n      <span class=\"nt\">&lt;setting_name_2&gt;</span>\n        <span class=\"nt\">&lt;max&gt;</span>upper_boundary<span class=\"nt\">&lt;/max&gt;</span>\n      <span class=\"nt\">&lt;/setting_name_2&gt;</span>\n      <span class=\"nt\">&lt;setting_name_3&gt;</span>\n        <span class=\"nt\">&lt;min&gt;</span>lower_boundary<span class=\"nt\">&lt;/min&gt;</span>\n        <span class=\"nt\">&lt;max&gt;</span>upper_boundary<span class=\"nt\">&lt;/max&gt;</span>\n      <span class=\"nt\">&lt;/setting_name_3&gt;</span>\n      <span class=\"nt\">&lt;setting_name_4&gt;</span>\n        <span class=\"nt\">&lt;readonly/&gt;</span>\n      <span class=\"nt\">&lt;/setting_name_4&gt;</span>\n    <span class=\"nt\">&lt;/constraints&gt;</span>\n  <span class=\"nt\">&lt;/user_name&gt;</span>\n<span class=\"nt\">&lt;/profiles&gt;</span>\n</code></pre></div>\n\n\n<p>If user tries to violate the constraints an exception is thrown and the setting isn't actually changed.<br />\nThere are supported three types of constraints: <code>min</code>, <code>max</code>, <code>readonly</code>. The <code>min</code> and <code>max</code> constraints specify upper and lower boundaries for a numeric setting and can be used in combination. The <code>readonly</code> constraint specify that the user cannot change the corresponding setting at all.</p>\n<p><strong>Example:</strong> Let <code>users.xml</code> includes lines:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;profiles&gt;</span>\n  <span class=\"nt\">&lt;default&gt;</span>\n    <span class=\"nt\">&lt;max_memory_usage&gt;</span>10000000000<span class=\"nt\">&lt;/max_memory_usage&gt;</span>\n    <span class=\"nt\">&lt;force_index_by_date&gt;</span>0<span class=\"nt\">&lt;/force_index_by_date&gt;</span>\n    ...\n    <span class=\"nt\">&lt;constraints&gt;</span>\n      <span class=\"nt\">&lt;max_memory_usage&gt;</span>\n        <span class=\"nt\">&lt;min&gt;</span>5000000000<span class=\"nt\">&lt;/min&gt;</span>\n        <span class=\"nt\">&lt;max&gt;</span>20000000000<span class=\"nt\">&lt;/max&gt;</span>\n      <span class=\"nt\">&lt;/max_memory_usage&gt;</span>\n      <span class=\"nt\">&lt;force_index_by_date&gt;</span>\n        <span class=\"nt\">&lt;readonly/&gt;</span>\n      <span class=\"nt\">&lt;/force_index_by_date&gt;</span>\n    <span class=\"nt\">&lt;/constraints&gt;</span>\n  <span class=\"nt\">&lt;/default&gt;</span>\n<span class=\"nt\">&lt;/profiles&gt;</span>\n</code></pre></div>\n\n\n<p>The following queries all throw exceptions:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">max_memory_usage</span><span class=\"o\">=</span><span class=\"mi\">20000000001</span><span class=\"p\">;</span>\n<span class=\"k\">SET</span> <span class=\"n\">max_memory_usage</span><span class=\"o\">=</span><span class=\"mi\">4999999999</span><span class=\"p\">;</span>\n<span class=\"k\">SET</span> <span class=\"n\">force_index_");
            
            document.write("by_date</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Code: 452, e.displayText() = DB::Exception: Setting max_memory_usage should not be greater than 20000000000.\nCode: 452, e.displayText() = DB::Exception: Setting max_memory_usage should not be less than 5000000000.\nCode: 452, e.displayText() = DB::Exception: Setting force_index_by_date should not be changed.\n</code></pre></div>\n\n\n<p><strong>Note:</strong> the <code>default</code> profile has a special handling: all the constraints defined for the <code>default</code> profile become the default constraints, so they restrict all the users until they're overriden explicitly for these users.</p>\n<p><a name=\"../../operations/utils/\"></a><a name=\"../../../operations/utils/\"></a><a name=\"utils/\"></a><a name=\"../../../../../operations/utils/\"></a><a name=\"../../../../operations/utils/\"></a><a name=\"operations/utils/\"></a><a name=\"../operations/utils/\"></a></p>\n<h2 id=\"clickhouse-utility\">ClickHouse Utility<a class=\"headerlink\" href=\"#clickhouse-utility\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"#clickhouse-local/\">clickhouse-local</a> \u2014 Allows running SQL queries on data without stopping the ClickHouse server, similar to how <code>awk</code> does this.</li>\n<li><a href=\"#clickhouse-copier/\">clickhouse-copier</a> \u2014 Copies (and reshards) data from one cluster to another cluster.</li>\n</ul>\n<p><a name=\"../../../../../utils/clickhouse-copier/\"></a><a name=\"../../../operations/utils/clickhouse-copier/\"></a><a name=\"../utils/clickhouse-copier/\"></a><a name=\"../../../../../operations/utils/clickhouse-copier/\"></a><a name=\"utils/clickhouse-copier/\"></a><a name=\"../operations/utils/clickhouse-copier/\"></a><a name=\"../../utils/clickhouse-copier/\"></a><a name=\"../../../../../../utils/clickhouse-copier/\"></a><a name=\"operations/utils/clickhouse-copier/\"></a><a name=\"../../operations/utils/clickhouse-copier/\"></a><a name=\"../../../utils/clickhouse-copier/\"></a><a name=\"../../../../operations/utils/clickhouse-copier/\"></a><a name=\"clickhouse-copier/\"></a><a name=\"../../../../utils/clickhouse-copier/\"></a></p>\n<h2 id=\"clickhouse-copier_1\">clickhouse-copier<a class=\"headerlink\" href=\"#clickhouse-copier_1\" title=\"Permanent link\">&para;</a></h2>\n<p>Copies data from the tables in one cluster to tables in another (or the same) cluster.</p>\n<p>You can run multiple <code>clickhouse-copier</code> instances on different servers to perform the same job. ZooKeeper is used for syncing the processes.</p>\n<p>After starting, <code>clickhouse-copier</code>:</p>\n<ul>\n<li>\n<p>Connects to ZooKeeper and receives:</p>\n<ul>\n<li>Copying jobs.</li>\n<li>The state of the copying jobs.</li>\n</ul>\n</li>\n<li>\n<p>It performs the jobs.</p>\n<p>Each running process chooses the \"closest\" shard of the source cluster and copies the data into the destination cluster, resharding the data if necessary.</p>\n</li>\n</ul>\n<p><code>clickhouse-copier</code> tracks the changes in ZooKeeper and applies them on the fly.</p>\n<p>To reduce network traffic, we recommend running <code>clickhouse-copier</code> on the same server where the source data is located.</p>\n<h3 id=\"running-clickhouse-copier\">Running clickhouse-copier<a class=\"headerlink\" href=\"#running-clickhouse-copier\" title=\"Permanent link\">&para;</a></h3>\n<p>The utility should be run manually:</p>\n<div class=\"codehilite\"><pre><span></span><code>clickhouse-copier copier --daemon --config zookeeper.xml --task-path /task/path --base-dir /path/to/dir\n</code></pre></div>\n\n\n<p>Parameters:</p>\n<ul>\n<li><code>daemon</code> \u2014 Starts <code>clickhouse-copier</code> in daemon mode.</li>\n<li><code>config</code> \u2014 The path to the <code>zookeeper.xml</code> file with the parameters for the connection to ZooKeeper.</li>\n<li><code>task-path</code> \u2014 The path to the ZooKeeper node. This node is used for syncing <code>clickhouse-copier</code> processes and storing tasks. Tasks are stored in <code>$task-path/description</code>.</li>\n<li><code>base-dir</code> \u2014 The path to logs and auxiliary files. When it starts, <code>clickhouse-copier</code> creates <code>clickhouse-copier_YYYYMMHHSS_&lt;PID&gt;</code> subdirectories in <code>$base-dir</code>. If this parameter is omitted, the directories are created in the directory where <code>clickhouse-copier</code> was launched.</li>\n</ul>\n<h3 id=\"format-of-zookeeper-xml\">Format of zookeeper.xml<a class=\"headerlink\" href=\"#format-of-zookeeper-xml\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;logger&gt;</span>\n        <span class=\"nt\">&lt;level&gt;</span>trace<span class=\"nt\">&lt;/level&gt;</span>\n        <span class=\"nt\">&lt;size&gt;</span>100M<span class=\"nt\">&lt;/size&gt;</span>\n        <span class=\"nt\">&lt;count&gt;</span>3<span class=\"nt\">&lt;/count&gt;</span>\n    <span class=\"nt\">&lt;/logger&gt;</span>\n\n    <span class=\"nt\">&lt;zookeeper&gt;</span>\n        <span class=\"nt\">&lt;node</span> <span class=\"na\">index=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;host&gt;</span>127.0.0.1<span class=\"nt\">&lt;/host&gt;</span>\n            <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n        <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;/zookeeper&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"configuration-of-copying-tasks\">Configuration of copying tasks<a class=\"headerlink\" href=\"#configuration-of-copying-tasks\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"c\">&lt;!-- Configuration of clusters as in an ordinary server config --&gt;</span>\n    <span class=\"nt\">&lt;remote_servers&gt;</span>\n        <span class=\"nt\">&lt;source_cluster&gt;</span>\n            <span class=\"nt\">&lt;shard&gt;</span>\n                <span class=\"nt\">&lt;internal_replication&gt;</span>false<span class=\"nt\">&lt;/internal_replication&gt;</span>\n                    <span class=\"nt\">&lt;replica&gt;</span>\n                        <span class=\"nt\">&lt;host&gt;</span>127.0.0.1<span class=\"nt\">&lt;/host&gt;</span>\n                        <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n                    <span class=\"nt\">&lt;/replica&gt;</span>\n            <span class=\"nt\">&lt;/shard&gt;</span>\n            ...\n        <span class=\"nt\">&lt;/source_cluster&gt;</span>\n\n        <span class=\"nt\">&lt;destination_cluster&gt;</span>\n        ...\n        <span class=\"nt\">&lt;/destination_cluster&gt;</span>\n    <span class=\"nt\">&lt;/remote_servers&gt;</span>\n\n    <span class=\"c\">&lt;!-- How many simultaneously active workers are possible. If you run more workers superfluous workers will sleep. --&gt;</span>\n    <span class=\"nt\">&lt;max_workers&gt;</span>2<span class=\"nt\">&lt;/max_workers&gt;</span>\n\n    <span class=\"c\">&lt;!-- Setting used to fetch (pull) data from source cluster tables --&gt;</span>\n    <span class=\"nt\">&lt;settings_pull&gt;</span>\n        <span class=\"nt\">&lt;readonly&gt;</span>1<span class=\"nt\">&lt;/readonly&gt;</span>\n    <span class=\"nt\">&lt;/settings_pull&gt;</span>\n\n    <span class=\"c\">&lt;!-- Setting used to insert (push) data to destination cluster tables --&gt;</span>\n    <span class=\"nt\">&lt;settings_push&gt;</span>\n        <span class=\"nt\">&lt;readonly&gt;</span>0<span class=\"nt\">&lt;/readonly&gt;</span>\n    <span class=\"nt\">&lt;/settings_push&gt;</span>\n\n    <span class=\"c\">&lt;!-- Common setting for fetch (pull) and insert (push) operations. Also, copier process context uses it.</span>\n<span class=\"c\">         They are overlaid by &lt;settings_pull/&gt; and &lt;settings_push/&gt; respectively. --&gt;</span>\n    <span class=\"nt\">&lt;settings&gt;</span>\n        <span class=\"nt\">&lt;connect_timeout&gt;</span>3<span class=\"nt\">&lt;/connect_timeout&gt;</span>\n        <span class=\"c\">&lt;!-- Sync insert is set forcibly, leave it here just in case. --&gt;</span>\n        <span class=\"nt\">&lt;insert_distributed_sync&gt;</span>1<span class=\"nt\">&lt;/insert_distributed_sync&gt;</span>\n    <span class=\"nt\">&lt;/settings&gt;</span>\n\n    <span class=\"c\">&lt;!-- Copying tasks description.</span>\n<span class=\"c\">         You could specify several table task in the same task description (in the same ZooKeeper node), they will be performed</span>\n<span class=\"c\">         sequentially.</span>\n<span class=\"c\">    --&gt;</span>\n    <span class=\"nt\">&lt;tables&gt;</span>\n        <span class=\"c\">&lt;!-- A table task, copies one table. --&gt;</span>\n        <span class=\"nt\">&lt;table_hits&gt;</span>\n            <span class=\"c\">&lt;!-- Source cluster name (from &lt;remote_servers/&gt; section) and tables in it that should be copied --&gt;</span>\n            <span class=\"nt\">&lt;cluster_pull&gt;</span>source_cluster<span class=\"nt\">&lt;/cluster_pull&gt;</span>\n            <span class=\"nt\">&lt;database_pull&gt;</span>test<span class=\"nt\">&lt;/database_pull&gt;</span>\n            <span class=\"nt\">&lt;table_pull&gt;</span>hits<span class=\"nt\">&lt;/table_pull&gt;</span>\n\n            <span class=\"c\">&lt;!-- Destination cluster name and tables in which the data should be inserted --&gt;</span>\n            <span class=\"nt\">&lt;cluster_push&gt;</span>destination_cluster<span class=\"nt\">&lt;/cluster_push&gt;</span>\n            <span class=\"nt\">&lt;database_push&gt;</span>test<span class=\"nt\">&lt;/database_push&gt;</span>\n            <span class=\"nt\">&lt;table_push&gt;</span>hits2<span class=\"nt\">&lt;/table_push&gt;</span>\n\n            <span class=\"c\">&lt;!-- Engine of destination tables.</span>\n<span class=\"c\">                 If destination tables have not be created, workers create them using columns definition from source tables and engine</span>\n<span class=\"c\">                 definition from here.</span>\n\n<span class=\"c\">                 NOTE: If the first worker starts insert data and detects that destination partition is not empty then the partition will</span>\n<span class=\"c\">                 be dropped and refilled, take it into account if yo");
            
            document.write("u already have some data in destination tables. You could directly</span>\n<span class=\"c\">                 specify partitions that should be copied in &lt;enabled_partitions/&gt;, they should be in quoted format like partition column of</span>\n<span class=\"c\">                 system.parts table.</span>\n<span class=\"c\">            --&gt;</span>\n            <span class=\"nt\">&lt;engine&gt;</span>\n            ENGINE=ReplicatedMergeTree(&#39;/clickhouse/tables/{cluster}/{shard}/hits2&#39;, &#39;{replica}&#39;)\n            PARTITION BY toMonday(date)\n            ORDER BY (CounterID, EventDate)\n            <span class=\"nt\">&lt;/engine&gt;</span>\n\n            <span class=\"c\">&lt;!-- Sharding key used to insert data to destination cluster --&gt;</span>\n            <span class=\"nt\">&lt;sharding_key&gt;</span>jumpConsistentHash(intHash64(UserID), 2)<span class=\"nt\">&lt;/sharding_key&gt;</span>\n\n            <span class=\"c\">&lt;!-- Optional expression that filter data while pull them from source servers --&gt;</span>\n            <span class=\"nt\">&lt;where_condition&gt;</span>CounterID != 0<span class=\"nt\">&lt;/where_condition&gt;</span>\n\n            <span class=\"c\">&lt;!-- This section specifies partitions that should be copied, other partition will be ignored.</span>\n<span class=\"c\">                 Partition names should have the same format as</span>\n<span class=\"c\">                 partition column of system.parts table (i.e. a quoted text).</span>\n<span class=\"c\">                 Since partition key of source and destination cluster could be different,</span>\n<span class=\"c\">                 these partition names specify destination partitions.</span>\n\n<span class=\"c\">                 NOTE: In spite of this section is optional (if it is not specified, all partitions will be copied),</span>\n<span class=\"c\">                 it is strictly recommended to specify them explicitly.</span>\n<span class=\"c\">                 If you already have some ready paritions on destination cluster they</span>\n<span class=\"c\">                 will be removed at the start of the copying since they will be interpeted</span>\n<span class=\"c\">                 as unfinished data from the previous copying!!!</span>\n<span class=\"c\">            --&gt;</span>\n            <span class=\"nt\">&lt;enabled_partitions&gt;</span>\n                <span class=\"nt\">&lt;partition&gt;</span>&#39;2018-02-26&#39;<span class=\"nt\">&lt;/partition&gt;</span>\n                <span class=\"nt\">&lt;partition&gt;</span>&#39;2018-03-05&#39;<span class=\"nt\">&lt;/partition&gt;</span>\n                ...\n            <span class=\"nt\">&lt;/enabled_partitions&gt;</span>\n        <span class=\"nt\">&lt;/table_hits&gt;</span>\n\n        <span class=\"c\">&lt;!-- Next table to copy. It is not copied until previous table is copying. --&gt;</span>\n        <span class=\"nt\">&lt;/table_visits&gt;</span>\n        ...\n        <span class=\"nt\">&lt;/table_visits&gt;</span>\n        ...\n    <span class=\"nt\">&lt;/tables&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p><code>clickhouse-copier</code> tracks the changes in <code>/task/path/description</code> and applies them on the fly. For instance, if you change the value of <code>max_workers</code>, the number of processes running tasks will also change.</p>\n<p><a name=\"../utils/clickhouse-local/\"></a><a name=\"../operations/utils/clickhouse-local/\"></a><a name=\"clickhouse-local/\"></a><a name=\"../../../../utils/clickhouse-local/\"></a><a name=\"../../operations/utils/clickhouse-local/\"></a><a name=\"../../../../operations/utils/clickhouse-local/\"></a><a name=\"../../../operations/utils/clickhouse-local/\"></a><a name=\"utils/clickhouse-local/\"></a><a name=\"../../utils/clickhouse-local/\"></a><a name=\"../../../../../utils/clickhouse-local/\"></a><a name=\"../../../../../../utils/clickhouse-local/\"></a><a name=\"../../../../../operations/utils/clickhouse-local/\"></a><a name=\"../../../utils/clickhouse-local/\"></a><a name=\"operations/utils/clickhouse-local/\"></a></p>\n<h2 id=\"clickhouse-local\">clickhouse-local<a class=\"headerlink\" href=\"#clickhouse-local\" title=\"Permanent link\">&para;</a></h2>\n<p>The <code>clickhouse-local</code> program enables you to perform fast processing on local files, without having to deploy and configure the ClickHouse server.</p>\n<p>Accepts data that represent tables and queries them using <a href=\"#../../query_language/\">ClickHouse SQL dialect</a>.</p>\n<p><code>clickhouse-local</code> uses the same core as ClickHouse server, so it supports most of the features and the same set of formats and table engines.</p>\n<p>By default <code>clickhouse-local</code> does not have access to data on the same host, but it supports loading server configuration using <code>--config-file</code> argument.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>It is not recommended to load production server configuration into <code>clickhouse-local</code> because data can be damaged in case of human error.</p>\n</div>\n<h3 id=\"usage_1\">Usage<a class=\"headerlink\" href=\"#usage_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Basic usage:</p>\n<div class=\"codehilite\"><pre><span></span><code>clickhouse-local --structure <span class=\"s2\">&quot;table_structure&quot;</span> --input-format <span class=\"s2\">&quot;format_of_incoming_data&quot;</span> -q <span class=\"s2\">&quot;query&quot;</span>\n</code></pre></div>\n\n\n<p>Arguments:</p>\n<ul>\n<li><code>-S</code>, <code>--structure</code> \u2014 table structure for input data.</li>\n<li><code>-if</code>, <code>--input-format</code> \u2014 input format, <code>TSV</code> by default.</li>\n<li><code>-f</code>, <code>--file</code> \u2014 path to data, <code>stdin</code> by default.</li>\n<li><code>-q</code> <code>--query</code> \u2014 queries to execute with <code>;</code> as delimeter.</li>\n<li><code>-N</code>, <code>--table</code> \u2014 table name where to put output data, <code>table</code> by default.</li>\n<li><code>-of</code>, <code>--format</code>, <code>--output-format</code> \u2014 output format, <code>TSV</code> by default.</li>\n<li><code>--stacktrace</code> \u2014 whether to dump debug output in case of exception.</li>\n<li><code>--verbose</code> \u2014 more details on query execution.</li>\n<li><code>-s</code> \u2014 disables <code>stderr</code> logging.</li>\n<li><code>--config-file</code> \u2014 path to configuration file in same format as for ClickHouse server, by default the configuration empty.</li>\n<li><code>--help</code> \u2014 arguments references for <code>clickhouse-local</code>.</li>\n</ul>\n<p>Also there are arguments for each ClickHouse configuration variable which are more commonly used instead of <code>--config-file</code>.</p>\n<h3 id=\"examples\">Examples<a class=\"headerlink\" href=\"#examples\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">echo</span> -e <span class=\"s2\">&quot;1,2\\n3,4&quot;</span> <span class=\"p\">|</span> clickhouse-local -S <span class=\"s2\">&quot;a Int64, b Int64&quot;</span> -if <span class=\"s2\">&quot;CSV&quot;</span> -q <span class=\"s2\">&quot;SELECT * FROM table&quot;</span>\nRead <span class=\"m\">2</span> rows, <span class=\"m\">32</span>.00 B in <span class=\"m\">0</span>.000 sec., <span class=\"m\">5182</span> rows/sec., <span class=\"m\">80</span>.97 KiB/sec.\n<span class=\"m\">1</span>   <span class=\"m\">2</span>\n<span class=\"m\">3</span>   <span class=\"m\">4</span>\n</code></pre></div>\n\n\n<p>Previous example is the same as:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> -e <span class=\"s2\">&quot;1,2\\n3,4&quot;</span> <span class=\"p\">|</span> clickhouse-local -q <span class=\"s2\">&quot;CREATE TABLE table (a Int64, b Int64) ENGINE = File(CSV, stdin); SELECT a, b FROM table; DROP TABLE table&quot;</span>\nRead <span class=\"m\">2</span> rows, <span class=\"m\">32</span>.00 B in <span class=\"m\">0</span>.000 sec., <span class=\"m\">4987</span> rows/sec., <span class=\"m\">77</span>.93 KiB/sec.\n<span class=\"m\">1</span>   <span class=\"m\">2</span>\n<span class=\"m\">3</span>   <span class=\"m\">4</span>\n</code></pre></div>\n\n\n<p>Now let's output memory user for each Unix user:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ ps aux <span class=\"p\">|</span> tail -n +2 <span class=\"p\">|</span> awk <span class=\"s1\">&#39;{ printf(&quot;%s\\t%s\\n&quot;, $1, $4) }&#39;</span> <span class=\"p\">|</span> clickhouse-local -S <span class=\"s2\">&quot;user String, mem Float64&quot;</span> -q <span class=\"s2\">&quot;SELECT user, round(sum(mem), 2) as memTotal FROM table GROUP BY user ORDER BY memTotal DESC FORMAT Pretty&quot;</span>\nRead <span class=\"m\">186</span> rows, <span class=\"m\">4</span>.15 KiB in <span class=\"m\">0</span>.035 sec., <span class=\"m\">5302</span> rows/sec., <span class=\"m\">118</span>.34 KiB/sec.\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 user     \u2503 memTotal \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 bayonet  \u2502    <span class=\"m\">113</span>.5 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 root     \u2502      <span class=\"m\">8</span>.8 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n...\n</code></pre></div>\n\n\n<p><a name=\"../../../../faq/general/\"></a><a name=\"faq/general/\"></a><a name=\"../../../../../faq/general/\"></a><a name=\"../faq/general/\"></a><a name=\"../../faq/general/\"></a><a name=\"general/\"></a><a name=\"../../../faq/general/\"></a></p>\n<h2 id=\"chang-jian-wen-ti\">\u5e38\u89c1\u95ee\u9898<a class=\"headerlink\" href=\"#chang-jian-wen-ti\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"wei-shi-yao-bu-shi-yong-mapreducezhi-lei-de-chan-pin-ni\">\u4e3a\u4ec0\u4e48\u4e0d\u4f7f\u7528MapReduce\u4e4b\u7c7b\u7684\u4ea7\u54c1\u5462?<a class=\"headerlink\" href=\"#wei-shi-yao-bu-shi-yong-mapreducezhi-lei-de-chan-pin-ni\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6211\u4eec\u53ef\u4ee5\u5c06MapReduce\u8fd9\u7c7b\u7684\u7cfb\u7edf\u79f0\u4e3a\u5206\u5e03\u5f0f\u8ba1\u7b97\u7cfb\u7edf\uff0c\u5176reduce\u64cd\u4f5c\u57fa\u4e8e\u5206\u5e03\u5f0f\u6392\u5e8f\u3002\u5176\u4e2d\u6700\u5e38\u89c1\u7684\u5f00\u6e90\u89e3\u51b3\u65b9\u6848\u662f <a href=\"http://hadoop.apache.org\" rel=\"external nofollow noreferrer\">Apache Hadoop</a>\u3002 Yandex\u4f7f\u7528\u4ed6\u4eec\u7684\u5185\u90e8\u89e3\u51b3\u65b9\u6848YT\u3002</p>\n<p>\u8fd9\u4e9b\u7cfb\u7edf\u4e0d\u9002\u5408\u5728\u7ebf\u67e5\u8be2\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u5ef6\u8fdf\u9ad8\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5b83\u4eec\u4e0d\u80fd\u7528\u4f5cWeb\u63a5\u53e3\u7684\u540e\u7aef\u670d\u52a1\u3002\u8fd9\u4e9b\u7cfb\u7edf\u5bf9\u4e8e\u5b9e\u65f6\u6570\u636e\u66f4\u65b0\u662f\u6ca1\u6709\u7528\u7684\u3002\u5982\u679c\u64cd\u4f5c\u7684\u7ed3\u679c\u548c\u6240\u6709\u4e2d\u95f4\u7ed3\u679c\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u4f4d\u4e8e\u5355\u4e2a\u670d\u52a1\u5668\u7684\u5185\u5b58\u4e2d\uff0c\u5219\u5206\u5e03\u5f0f\u6392\u5e8f\u4e0d\u662f\u6267\u884creduce\u64cd\u4f5c\u7684\u6700\u4f73\u65b9\u5f0f\uff0c\u4f46\u8fd9\u901a\u5e38\u662f\u5728\u7ebf\u67e5\u8be2\u7684\u60c5\u51b5\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u54c8\u5e0c\u8868\u662f\u6267\u884creduce\u64cd\u4f5c\u7684\u6700\u4f73\u65b9\u5f0f\u3002\u4f18\u5316map-reduce\u4efb\u52a1\u7684\u5e38\u7528\u65b9\u6cd5\u662f\u4f7f\u7528\u5185\u5b58\u4e2d\u7684\u54c8\u5e0c\u8868\u8fdb\u884c\u9884\u805a\u5408\uff08\u90e8\u5206reduce\uff09\uff0c\u7528\u6237\u624b\u52a8\u6267\u884c\u6b64\u4f18\u5316\u64cd\u4f5c\u3002\u5206\u5e03\u5f0f\u6392\u5e8f\u662f\u8fd0\u884c\u7b80\u5355map-reduce\u4efb\u52a1\u65f6\u6027\u80fd\u964d\u4f4e\u7684\u4e3b\u8981\u539f\u56e0\u4e4b\u4e00\u3002</p>\n<p>\u5927\u591a\u6570MapReduce\u7cfb\u7edf\u5141\u8bb8\u60a8\u5728\u96c6\u7fa4\u4e0a\u6267\u884c\u4efb\u610f\u4ee3\u7801\u3002\u4f46\u662f\uff0c\u58f0\u660e\u6027\u67e5\u8be2\u8bed\u8a00\u66f4\u9002\u5408OLAP\uff0c\u4ee5\u4fbf\u5feb\u901f\u8fd0\u884c\u5b9e\u9a8c\u3002\u4f8b\u5982\uff0cHadoop\u5305\u542bHive\u548cPig\uff0cCloudera Impala\u6216Shark\uff08\u8fc7\u65f6\uff09for Spark\uff0c\u4ee5\u53caSpark SQL\u3001Presto\u548cApache Drill\u3002\u4e0e\u4e13\u4e1a\u7cfb\u7edf\u76f8\u6bd4\uff0c\u8fd0\u884c\u6b64\u7c7b\u4efb\u52a1\u65f6\u7684\u6027\u80fd\u975e\u5e38\u4e0d\u7406\u60f3\uff0c\u6240\u4ee5\u5c06\u8fd9\u4e9b\u7cfb\u7edf\u7528\u4f5cWeb\u63a5\u53e3\u7684\u540e\u7aef\u670d\u52a1\u662f\u4e0d\u73b0\u5b9e\u7684\uff0c\u56e0\u4e3a\u5ef6\u8fdf\u76f8\u5bf9\u8f83\u9ad8\u3002</p>\n<h3 id=\"oracle-odbc-encodings\">What to do if I have a pr");
            
            document.write("oblem with encodings when using Oracle through ODBC?<a class=\"headerlink\" href=\"#oracle-odbc-encodings\" title=\"Permanent link\">&para;</a></h3>\n<p>If you use Oracle through ODBC driver as a source of external dictionaries, you need to set up correctly value for the <code>NLS_LANG</code> variable in the <code>/etc/default/clickhouse</code>. For more details see the <a href=\"https://www.oracle.com/technetwork/products/globalization/nls-lang-099431.html\" rel=\"external nofollow noreferrer\">Oracle NLS_LANG FAQ</a>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">NLS_LANG=CHINESE_CHINA.ZHS16GBK</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../development/\"></a><a name=\"../../../development/\"></a><a name=\"development/\"></a><a name=\"../development/\"></a><a name=\"../../development/\"></a><a name=\"../../../../../development/\"></a></p>\n<h2 id=\"clickhouse-kai-fa\">ClickHouse \u5f00\u53d1<a class=\"headerlink\" href=\"#clickhouse-kai-fa\" title=\"Permanent link\">&para;</a></h2>\n<p><a name=\"../development/architecture/\"></a><a name=\"../../../../development/architecture/\"></a><a name=\"../../development/architecture/\"></a><a name=\"architecture/\"></a><a name=\"development/architecture/\"></a><a name=\"../../../../../development/architecture/\"></a><a name=\"../../../development/architecture/\"></a></p>\n<h2 id=\"clickhouse-jia-gou-gai-shu\">ClickHouse \u67b6\u6784\u6982\u8ff0<a class=\"headerlink\" href=\"#clickhouse-jia-gou-gai-shu\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse \u662f\u4e00\u4e2a\u771f\u6b63\u7684\u5217\u5f0f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff08DBMS)\u3002\u5728 ClickHouse \u4e2d\uff0c\u6570\u636e\u59cb\u7ec8\u662f\u6309\u5217\u5b58\u50a8\u7684\uff0c\u5305\u62ec\u77e2\u91cf\uff08\u5411\u91cf\u6216\u5217\u5757\uff09\u6267\u884c\u7684\u8fc7\u7a0b\u3002\u53ea\u8981\u6709\u53ef\u80fd\uff0c\u64cd\u4f5c\u90fd\u662f\u57fa\u4e8e\u77e2\u91cf\u8fdb\u884c\u5206\u6d3e\u7684\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u7684\u503c\uff0c\u8fd9\u88ab\u79f0\u4e3a\u201c\u77e2\u91cf\u5316\u67e5\u8be2\u6267\u884c\u201d\uff0c\u5b83\u6709\u5229\u4e8e\u964d\u4f4e\u5b9e\u9645\u7684\u6570\u636e\u5904\u7406\u5f00\u9500\u3002</p>\n<blockquote>\n<p>\u8fd9\u4e2a\u60f3\u6cd5\u5e76\u4e0d\u65b0\u9c9c\uff0c\u5176\u53ef\u4ee5\u8ffd\u6eaf\u5230 <code>APL</code> \u7f16\u7a0b\u8bed\u8a00\u53ca\u5176\u540e\u4ee3\uff1a<code>A +</code>\u3001<code>J</code>\u3001<code>K</code> \u548c <code>Q</code>\u3002\u77e2\u91cf\u7f16\u7a0b\u88ab\u5927\u91cf\u7528\u4e8e\u79d1\u5b66\u6570\u636e\u5904\u7406\u4e2d\u3002\u5373\u4f7f\u5728\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\uff0c\u8fd9\u4e2a\u60f3\u6cd5\u4e5f\u4e0d\u662f\u4ec0\u4e48\u65b0\u7684\u4e1c\u897f\uff1a\u6bd4\u5982\uff0c\u77e2\u91cf\u7f16\u7a0b\u4e5f\u88ab\u5927\u91cf\u7528\u4e8e <code>Vectorwise</code> \u7cfb\u7edf\u4e2d\u3002</p>\n</blockquote>\n<p>\u901a\u5e38\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u52a0\u901f\u67e5\u8be2\u5904\u7406\u7684\u65b9\u6cd5\uff1a\u77e2\u91cf\u5316\u67e5\u8be2\u6267\u884c\u548c\u8fd0\u884c\u65f6\u4ee3\u7801\u751f\u6210\u3002\u5728\u540e\u8005\u4e2d\uff0c\u52a8\u6001\u5730\u4e3a\u6bcf\u4e00\u7c7b\u67e5\u8be2\u751f\u6210\u4ee3\u7801\uff0c\u6d88\u9664\u4e86\u95f4\u63a5\u5206\u6d3e\u548c\u52a8\u6001\u5206\u6d3e\u3002\u8fd9\u4e24\u79cd\u65b9\u6cd5\u4e2d\uff0c\u5e76\u6ca1\u6709\u54ea\u4e00\u79cd\u4e25\u683c\u5730\u6bd4\u53e6\u4e00\u79cd\u597d\u3002\u8fd0\u884c\u65f6\u4ee3\u7801\u751f\u6210\u53ef\u4ee5\u66f4\u597d\u5730\u5c06\u591a\u4e2a\u64cd\u4f5c\u878d\u5408\u5728\u4e00\u8d77\uff0c\u4ece\u800c\u5145\u5206\u5229\u7528 CPU \u6267\u884c\u5355\u5143\u548c\u6d41\u6c34\u7ebf\u3002\u77e2\u91cf\u5316\u67e5\u8be2\u6267\u884c\u4e0d\u662f\u7279\u522b\u5b9e\u7528\uff0c\u56e0\u4e3a\u5b83\u6d89\u53ca\u5fc5\u987b\u5199\u5230\u7f13\u5b58\u5e76\u8bfb\u56de\u7684\u4e34\u65f6\u5411\u91cf\u3002\u5982\u679c L2 \u7f13\u5b58\u5bb9\u7eb3\u4e0d\u4e0b\u4e34\u65f6\u6570\u636e\uff0c\u90a3\u4e48\u8fd9\u5c06\u6210\u4e3a\u4e00\u4e2a\u95ee\u9898\u3002\u4f46\u77e2\u91cf\u5316\u67e5\u8be2\u6267\u884c\u66f4\u5bb9\u6613\u5229\u7528 CPU \u7684 SIMD \u529f\u80fd\u3002\u670b\u53cb\u5199\u7684\u4e00\u7bc7<a href=\"http://15721.courses.cs.cmu.edu/spring2016/papers/p5-sompolski.pdf\" rel=\"external nofollow noreferrer\">\u7814\u7a76\u8bba\u6587</a>\u8868\u660e\uff0c\u5c06\u4e24\u79cd\u65b9\u6cd5\u7ed3\u5408\u8d77\u6765\u662f\u66f4\u597d\u7684\u9009\u62e9\u3002ClickHouse \u4f7f\u7528\u4e86\u77e2\u91cf\u5316\u67e5\u8be2\u6267\u884c\uff0c\u540c\u65f6\u521d\u6b65\u63d0\u4f9b\u4e86\u6709\u9650\u7684\u8fd0\u884c\u65f6\u52a8\u6001\u4ee3\u7801\u751f\u6210\u3002</p>\n<h3 id=\"lie-columns\">\u5217\uff08Columns\uff09<a class=\"headerlink\" href=\"#lie-columns\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8981\u8868\u793a\u5185\u5b58\u4e2d\u7684\u5217\uff08\u5b9e\u9645\u4e0a\u662f\u5217\u5757\uff09\uff0c\u9700\u4f7f\u7528 <code>IColumn</code> \u63a5\u53e3\u3002\u8be5\u63a5\u53e3\u63d0\u4f9b\u4e86\u7528\u4e8e\u5b9e\u73b0\u5404\u79cd\u5173\u7cfb\u64cd\u4f5c\u7b26\u7684\u8f85\u52a9\u65b9\u6cd5\u3002\u51e0\u4e4e\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u4e0d\u53ef\u53d8\u7684\uff1a\u8fd9\u4e9b\u64cd\u4f5c\u4e0d\u4f1a\u66f4\u6539\u539f\u59cb\u5217\uff0c\u4f46\u662f\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4fee\u6539\u540e\u7684\u5217\u3002\u6bd4\u5982\uff0c<code>IColumn::filter</code> \u65b9\u6cd5\u63a5\u53d7\u8fc7\u6ee4\u5b57\u8282\u63a9\u7801\uff0c\u7528\u4e8e <code>WHERE</code> \u548c <code>HAVING</code> \u5173\u7cfb\u64cd\u4f5c\u7b26\u4e2d\u3002\u53e6\u5916\u7684\u4f8b\u5b50\uff1a<code>IColumn::permute</code> \u65b9\u6cd5\u652f\u6301 <code>ORDER BY</code> \u5b9e\u73b0\uff0c<code>IColumn::cut</code> \u65b9\u6cd5\u652f\u6301 <code>LIMIT</code> \u5b9e\u73b0\u7b49\u7b49\u3002</p>\n<p>\u4e0d\u540c\u7684 <code>IColumn</code> \u5b9e\u73b0\uff08<code>ColumnUInt8</code>\u3001<code>ColumnString</code> \u7b49\uff09\u8d1f\u8d23\u4e0d\u540c\u7684\u5217\u5185\u5b58\u5e03\u5c40\u3002\u5185\u5b58\u5e03\u5c40\u901a\u5e38\u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u6570\u7ec4\u3002\u5bf9\u4e8e\u6570\u636e\u7c7b\u578b\u4e3a\u6574\u578b\u7684\u5217\uff0c\u53ea\u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u6570\u7ec4\uff0c\u6bd4\u5982 <code>std::vector</code>\u3002\u5bf9\u4e8e <code>String</code> \u5217\u548c <code>Array</code> \u5217\uff0c\u5219\u7531\u4e24\u4e2a\u5411\u91cf\u7ec4\u6210\uff1a\u5176\u4e2d\u4e00\u4e2a\u5411\u91cf\u8fde\u7eed\u5b58\u50a8\u6240\u6709\u7684 <code>String</code> \u6216\u6570\u7ec4\u5143\u7d20\uff0c\u53e6\u4e00\u4e2a\u5b58\u50a8\u6bcf\u4e00\u4e2a <code>String</code> \u6216 <code>Array</code> \u7684\u8d77\u59cb\u5143\u7d20\u5728\u7b2c\u4e00\u4e2a\u5411\u91cf\u4e2d\u7684\u504f\u79fb\u3002\u800c <code>ColumnConst</code> \u5219\u4ec5\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u4e00\u4e2a\u503c\uff0c\u4f46\u662f\u770b\u8d77\u6765\u50cf\u4e00\u4e2a\u5217\u3002</p>\n<h3 id=\"field\">Field<a class=\"headerlink\" href=\"#field\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5c3d\u7ba1\u5982\u6b64\uff0c\u6709\u65f6\u5019\u4e5f\u53ef\u80fd\u9700\u8981\u5904\u7406\u5355\u4e2a\u503c\u3002\u8868\u793a\u5355\u4e2a\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>Field</code>\u3002<code>Field</code> \u662f <code>UInt64</code>\u3001<code>Int64</code>\u3001<code>Float64</code>\u3001<code>String</code> \u548c <code>Array</code> \u7ec4\u6210\u7684\u8054\u5408\u3002<code>IColumn</code> \u62e5\u6709 <code>operator[]</code> \u65b9\u6cd5\u6765\u83b7\u53d6\u7b2c <code>n</code> \u4e2a\u503c\u6210\u4e3a\u4e00\u4e2a <code>Field</code>\uff0c\u540c\u65f6\u4e5f\u62e5\u6709 <code>insert</code> \u65b9\u6cd5\u5c06\u4e00\u4e2a <code>Field</code> \u8ffd\u52a0\u5230\u4e00\u4e2a\u5217\u7684\u672b\u5c3e\u3002\u8fd9\u4e9b\u65b9\u6cd5\u5e76\u4e0d\u9ad8\u6548\uff0c\u56e0\u4e3a\u5b83\u4eec\u9700\u8981\u5904\u7406\u8868\u793a\u5355\u4e00\u503c\u7684\u4e34\u65f6 <code>Field</code> \u5bf9\u8c61\uff0c\u4f46\u662f\u6709\u66f4\u9ad8\u6548\u7684\u65b9\u6cd5\u6bd4\u5982 <code>insertFrom</code> \u548c <code>insertRangeFrom</code> \u7b49\u3002</p>\n<p><code>Field</code> \u4e2d\u5e76\u6ca1\u6709\u8db3\u591f\u7684\u5173\u4e8e\u4e00\u4e2a\u8868\uff08table\uff09\u7684\u7279\u5b9a\u6570\u636e\u7c7b\u578b\u7684\u4fe1\u606f\u3002\u6bd4\u5982\uff0c<code>UInt8</code>\u3001<code>UInt16</code>\u3001<code>UInt32</code> \u548c <code>UInt64</code> \u5728 <code>Field</code> \u4e2d\u5747\u8868\u793a\u4e3a <code>UInt64</code>\u3002</p>\n<h3 id=\"chou-xiang-lou-dong\">\u62bd\u8c61\u6f0f\u6d1e<a class=\"headerlink\" href=\"#chou-xiang-lou-dong\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IColumn</code> \u5177\u6709\u7528\u4e8e\u6570\u636e\u7684\u5e38\u89c1\u5173\u7cfb\u8f6c\u6362\u7684\u65b9\u6cd5\uff0c\u4f46\u8fd9\u4e9b\u65b9\u6cd5\u5e76\u4e0d\u80fd\u591f\u6ee1\u8db3\u6240\u6709\u9700\u6c42\u3002\u6bd4\u5982\uff0c<code>ColumnUInt64</code> \u6ca1\u6709\u7528\u4e8e\u8ba1\u7b97\u4e24\u5217\u548c\u7684\u65b9\u6cd5\uff0c<code>ColumnString</code> \u6ca1\u6709\u7528\u4e8e\u8fdb\u884c\u5b50\u4e32\u641c\u7d22\u7684\u65b9\u6cd5\u3002\u8fd9\u4e9b\u65e0\u6cd5\u8ba1\u7b97\u7684\u4f8b\u7a0b\u5728 <code>Icolumn</code> \u4e4b\u5916\u5b9e\u73b0\u3002</p>\n<p>\u5217\uff08Columns)\u4e0a\u7684\u5404\u79cd\u51fd\u6570\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 <code>Icolumn</code> \u7684\u65b9\u6cd5\u6765\u63d0\u53d6 <code>Field</code> \u503c\uff0c\u6216\u6839\u636e\u7279\u5b9a\u7684 <code>Icolumn</code> \u5b9e\u73b0\u7684\u6570\u636e\u5185\u5b58\u5e03\u5c40\u7684\u77e5\u8bc6\uff0c\u4ee5\u4e00\u79cd\u901a\u7528\u4f46\u4e0d\u9ad8\u6548\u7684\u65b9\u5f0f\u5b9e\u73b0\u3002\u4e3a\u6b64\uff0c\u51fd\u6570\u5c06\u4f1a\u8f6c\u6362\u4e3a\u7279\u5b9a\u7684 <code>IColumn</code> \u7c7b\u578b\u5e76\u76f4\u63a5\u5904\u7406\u5185\u90e8\u8868\u793a\u3002\u6bd4\u5982\uff0c<code>ColumnUInt64</code> \u5177\u6709 <code>getData</code> \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u5217\u7684\u5185\u90e8\u6570\u7ec4\u7684\u5f15\u7528\uff0c\u7136\u540e\u4e00\u4e2a\u5355\u72ec\u7684\u4f8b\u7a0b\u53ef\u4ee5\u76f4\u63a5\u8bfb\u5199\u6216\u586b\u5145\u8be5\u6570\u7ec4\u3002\u5b9e\u9645\u4e0a\uff0c\u201c\u62bd\u8c61\u6f0f\u6d1e\uff08leaky abstractions\uff09\u201d\u5141\u8bb8\u6211\u4eec\u4ee5\u66f4\u9ad8\u6548\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u5404\u79cd\u7279\u5b9a\u7684\u4f8b\u7a0b\u3002</p>\n<h3 id=\"shu-ju-lei-xing\">\u6570\u636e\u7c7b\u578b<a class=\"headerlink\" href=\"#shu-ju-lei-xing\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IDataType</code> \u8d1f\u8d23\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff1a\u8bfb\u5199\u4e8c\u8fdb\u5236\u6216\u6587\u672c\u5f62\u5f0f\u7684\u5217\u6216\u5355\u4e2a\u503c\u6784\u6210\u7684\u5757\u3002<code>IDataType</code> \u76f4\u63a5\u4e0e\u8868\u7684\u6570\u636e\u7c7b\u578b\u76f8\u5bf9\u5e94\u3002\u6bd4\u5982\uff0c\u6709 <code>DataTypeUInt32</code>\u3001<code>DataTypeDateTime</code>\u3001<code>DataTypeString</code> \u7b49\u6570\u636e\u7c7b\u578b\u3002</p>\n<p><code>IDataType</code> \u4e0e <code>IColumn</code> \u4e4b\u95f4\u7684\u5173\u8054\u5e76\u4e0d\u5927\u3002\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\u5728\u5185\u5b58\u4e2d\u80fd\u591f\u7528\u76f8\u540c\u7684 <code>IColumn</code> \u5b9e\u73b0\u6765\u8868\u793a\u3002\u6bd4\u5982\uff0c<code>DataTypeUInt32</code> \u548c <code>DataTypeDateTime</code> \u90fd\u662f\u7528 <code>ColumnUInt32</code> \u6216 <code>ColumnConstUInt32</code> \u6765\u8868\u793a\u7684\u3002\u53e6\u5916\uff0c\u76f8\u540c\u7684\u6570\u636e\u7c7b\u578b\u4e5f\u53ef\u4ee5\u7528\u4e0d\u540c\u7684 <code>IColumn</code> \u5b9e\u73b0\u6765\u8868\u793a\u3002\u6bd4\u5982\uff0c<code>DataTypeUInt8</code> \u65e2\u53ef\u4ee5\u4f7f\u7528 <code>ColumnUInt8</code> \u6765\u8868\u793a\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8fc7 <code>ColumnConstUInt8</code> \u6765\u8868\u793a\u3002</p>\n<p><code>IDataType</code> \u4ec5\u5b58\u50a8\u5143\u6570\u636e\u3002\u6bd4\u5982\uff0c<code>DataTypeUInt8</code> \u4e0d\u5b58\u50a8\u4efb\u4f55\u4e1c\u897f\uff08\u9664\u4e86 vptr\uff09\uff1b<code>DataTypeFixedString</code> \u4ec5\u5b58\u50a8 <code>N</code>\uff08\u56fa\u5b9a\u957f\u5ea6\u5b57\u7b26\u4e32\u7684\u4e32\u957f\u5ea6\uff09\u3002</p>\n<p><code>IDataType</code> \u5177\u6709\u9488\u5bf9\u5404\u79cd\u6570\u636e\u683c\u5f0f\u7684\u8f85\u52a9\u51fd\u6570\u3002\u6bd4\u5982\u5982\u4e0b\u4e00\u4e9b\u8f85\u52a9\u51fd\u6570\uff1a\u5e8f\u5217\u5316\u4e00\u4e2a\u503c\u5e76\u52a0\u4e0a\u53ef\u80fd\u7684\u5f15\u53f7\uff1b\u5e8f\u5217\u5316\u4e00\u4e2a\u503c\u7528\u4e8e JSON \u683c\u5f0f\uff1b\u5e8f\u5217\u5316\u4e00\u4e2a\u503c\u4f5c\u4e3a XML \u683c\u5f0f\u7684\u4e00\u90e8\u5206\u3002\u8f85\u52a9\u51fd\u6570\u4e0e\u6570\u636e\u683c\u5f0f\u5e76\u6ca1\u6709\u76f4\u63a5\u7684\u5bf9\u5e94\u3002\u6bd4\u5982\uff0c\u4e24\u79cd\u4e0d\u540c\u7684\u6570\u636e\u683c\u5f0f <code>Pretty</code> \u548c <code>TabSeparated</code> \u5747\u53ef\u4ee5\u4f7f\u7528 <code>IDataType</code> \u63a5\u53e3\u63d0\u4f9b\u7684 <code>serializeTextEscaped</code> \u8fd9\u4e00\u8f85\u52a9\u51fd\u6570\u3002</p>\n<h3 id=\"kuai-block\">\u5757\uff08Block\uff09<a class=\"headerlink\" href=\"#kuai-block\" title=\"Permanent link\">&para;</a></h3>\n<p><code>Block</code> \u662f\u8868\u793a\u5185\u5b58\u4e2d\u8868\u7684\u5b50\u96c6\uff08chunk\uff09\u7684\u5bb9\u5668\uff0c\u662f\u7531\u4e09\u5143\u7ec4\uff1a<code>(IColumn, IDataType, \u5217\u540d)</code> \u6784\u6210\u7684\u96c6\u5408\u3002\u5728\u67e5\u8be2\u6267\u884c\u671f\u95f4\uff0c\u6570\u636e\u662f\u6309 <code>Block</code> \u8fdb\u884c\u5904\u7406\u7684\u3002\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2a <code>Block</code>\uff0c\u90a3\u4e48\u5c31\u6709\u4e86\u6570\u636e\uff08\u5728 <code>IColumn</code> \u5bf9\u8c61\u4e2d\uff09\uff0c\u6709\u4e86\u6570\u636e\u7684\u7c7b\u578b\u4fe1\u606f\u544a\u8bc9\u6211\u4eec\u5982\u4f55\u5904\u7406\u8be5\u5217\uff0c\u540c\u65f6\u4e5f\u6709\u4e86\u5217\u540d\uff08\u6765\u81ea\u8868\u7684\u539f\u59cb\u5217\u540d\uff0c\u6216\u4eba\u4e3a\u6307\u5b9a\u7684\u7528\u4e8e\u4e34\u65f6\u8ba1\u7b97\u7ed3\u679c\u7684\u540d\u5b57\uff09\u3002</p>\n<p>\u5f53\u6211\u4eec\u904d\u5386\u4e00\u4e2a\u5757\u4e2d\u7684\u5217\u8fdb\u884c\u67d0\u4e9b\u51fd\u6570\u8ba1\u7b97\u65f6\uff0c\u4f1a\u628a\u7ed3\u679c\u5217\u52a0\u5165\u5230\u5757\u4e2d\uff0c\u4f46\u4e0d\u4f1a\u66f4\u6539\u51fd\u6570\u53c2\u6570\u4e2d\u7684\u5217\uff0c\u56e0\u4e3a\u64cd\u4f5c\u662f\u4e0d\u53ef\u53d8\u7684\u3002\u4e4b\u540e\uff0c\u4e0d\u9700\u8981\u7684\u5217\u53ef\u4ee5\u4ece\u5757\u4e2d\u5220\u9664\uff0c\u4f46\u4e0d\u662f\u4fee\u6539\u3002\u8fd9\u5bf9\u4e8e\u6d88\u9664\u516c\u5171\u5b50\u8868\u8fbe\u5f0f\u975e\u5e38\u65b9\u4fbf\u3002</p>\n<p><code>Block</code> \u7528\u4e8e\u5904\u7406\u6570\u636e\u5757\u3002\u6ce8\u610f\uff0c\u5bf9\u4e8e\u76f8\u540c\u7c7b\u578b\u7684\u8ba1\u7b97\uff0c\u5217\u540d\u548c\u7c7b\u578b\u5bf9\u4e0d\u540c\u7684\u5757\u4fdd\u6301\u76f8\u540c\uff0c\u4ec5\u5217\u6570\u636e\u4e0d\u540c\u3002\u6700\u597d\u628a\u5757\u6570\u636e\uff08block data\uff09\u548c\u5757\u5934\uff08block header\uff09\u5206\u79bb\u5f00\u6765\uff0c\u56e0\u4e3a\u5c0f\u5757\u5927\u5c0f\u4f1a\u56e0\u590d\u5236\u5171\u4eab\u6307\u9488\u548c\u5217\u540d\u800c\u5e26\u6765\u5f88\u9ad8\u7684\u4e34\u65f6\u5b57\u7b26\u4e32\u5f00\u9500\u3002</p>\n<h3 id=\"kuai-liu-block-streams\">\u5757\u6d41\uff08Block Streams\uff09<a class=\"headerlink\" href=\"#kuai-liu-block-streams\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5757\u6d41\u7528\u4e8e\u5904\u7406\u6570\u636e\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5757\u6d41\u4ece\u67d0\u4e2a\u5730\u65b9\u8bfb\u53d6\u6570\u636e\uff0c\u6267\u884c\u6570\u636e\u8f6c\u6362\uff0c\u6216\u5c06\u6570\u636e\u5199\u5230\u67d0\u4e2a\u5730\u65b9\u3002<code>IBlockInputStream</code> \u5177\u6709 <code>read</code> \u65b9\u6cd5\uff0c\u5176\u80fd\u591f\u5728\u6570\u636e\u53ef\u7528\u65f6\u83b7\u53d6\u4e0b\u4e00\u4e2a\u5757\u3002<code>IBlockOutputStream</code> \u5177\u6709 <code>write</code> \u65b9\u6cd5\uff0c\u5176\u80fd\u591f\u5c06\u5757\u5199\u5230\u67d0\u5904\u3002</p>\n<p>\u5757\u6d41\u8d1f\u8d23\uff1a</p>\n<ol>\n<li>\u8bfb\u6216\u5199\u4e00\u4e2a\u8868\u3002\u8868\u4ec5\u8fd4\u56de\u4e00\u4e2a\u6d41\u7528\u4e8e\u8bfb\u5199\u5757\u3002</li>\n<li>\u5b8c\u6210\u6570\u636e\u683c\u5f0f\u5316\u3002\u6bd4\u5982\uff0c\u5982\u679c\u4f60\u6253\u7b97\u5c06\u6570\u636e\u4ee5 <code>Pretty</code> \u683c\u5f0f\u8f93\u51fa\u5230\u7ec8\u7aef\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5757\u8f93\u51fa\u6d41\uff0c\u5c06\u5757\u5199\u5165\u8be5\u6d41\u4e2d\uff0c\u7136\u540e\u8fdb\u884c\u683c\u5f0f\u5316\u3002</li>\n<li>\u6267\u884c\u6570\u636e\u8f6c\u6362\u3002\u5047\u8bbe\u4f60\u73b0\u5728\u6709 <code>IBlockInputStream</code> \u5e76\u4e14\u6253\u7b97\u521b\u5efa\u4e00\u4e2a\u8fc7\u6ee4\u6d41\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a <code>FilterBlockInputStream</code> \u5e76\u7528 <code>IBlockInputStream</code> \u8fdb\u884c\u521d\u59cb\u5316\u3002\u4e4b\u540e\uff0c\u5f53\u4f60\u4ece <code>FilterBlockInputStream</code> \u4e2d\u62c9\u53d6\u5757\u65f6\uff0c\u4f1a\u4ece\u4f60\u7684\u6d41\u4e2d\u63d0\u53d6\u4e00\u4e2a\u5757\uff0c\u5bf9\u5176\u8fdb\u884c\u8fc7\u6ee4\uff0c\u7136\u540e\u5c06\u8fc7\u6ee4\u540e\u7684\u5757\u8fd4\u56de\u7ed9\u4f60\u3002\u67e5\u8be2\u6267\u884c\u6d41\u6c34\u7ebf\u5c31\u662f\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u8868\u793a\u7684\u3002</li>\n</ol>\n<p>\u8fd8\u6709\u4e00\u4e9b\u66f4\u590d\u6742\u7684\u8f6c\u6362\u3002\u6bd4\u5982\uff0c\u5f53\u4f60\u4ece <code>AggregatingBlockInputStream</code> \u62c9\u53d6\u6570\u636e\u65f6\uff0c\u4f1a\u4ece\u6570\u636e\u6e90\u8bfb\u53d6\u5168\u90e8\u6570\u636e\u8fdb\u884c\u805a\u96c6\uff0c\u7136\u540e\u5c06\u805a\u96c6\u540e\u7684\u6570\u636e\u6d41\u8fd4\u56de\u7ed9\u4f60\u3002\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff1a<code>UnionBlockInputStream</code> \u7684\u6784\u9020\u51fd\u6570\u63a5\u53d7\u591a\u4e2a\u8f93\u5165\u6e90\u548c\u591a\u4e2a\u7ebf\u7a0b\uff0c\u5176\u80fd\u591f\u542f\u52a8\u591a\u7ebf\u7a0b\u4ece\u591a\u4e2a\u8f93\u5165\u6e90\u5e76\u884c\u8bfb\u53d6\u6570\u636e\u3002</p>\n<blockquote>\n<p>\u5757\u6d41\u4f7f\u7528\u201cpull\u201d\u65b9\u6cd5\u6765\u63a7\u5236\u6d41\uff1a\u5f53\u4f60\u4ece\u7b2c\u4e00\u4e2a\u6d41\u4e2d\u62c9\u53d6\u5757\u65f6\uff0c\u5b83\u4f1a\u63a5\u7740\u4ece\u5d4c\u5957\u7684\u6d41\u4e2d\u62c9\u53d6\u6240\u9700\u7684\u5757\uff0c\u7136\u540e\u6574\u4e2a\u6267\u884c\u6d41\u6c34\u7ebf\u5f00\u59cb\u5de5\u4f5c\u3002\u201dpull\u201c\u548c\u201cpush\u201d\u90fd\u4e0d\u662f\u6700\u597d\u7684\u65b9\u6848\uff0c\u56e0\u4e3a\u63a7\u5236\u6d41\u4e0d\u662f\u660e\u786e\u7684\uff0c\u8fd9\u9650\u5236\u4e86\u5404\u79cd\u529f\u80fd\u7684\u5b9e\u73b0\uff0c\u6bd4\u5982\u591a\u4e2a\u67e5\u8be2\u540c\u6b65\u6267\u884c\uff08\u591a\u4e2a\u6d41\u6c34\u7ebf\u5408\u5e76\u5230\u4e00\u8d77\uff09\u3002\u8fd9\u4e2a\u9650\u5236\u53ef\u4ee5\u901a\u8fc7\u534f\u7a0b\u6216\u76f4\u63a5\u8fd0\u884c\u4e92\u76f8\u7b49\u5f85\u7684\u7ebf\u7a0b\u6765\u89e3\u51b3\u3002\u5982\u679c\u63a7\u5236\u6d41\u660e\u786e\uff0c\u90a3\u4e48\u6211\u4eec\u4f1a\u6709\u66f4\u591a\u7684\u53ef\u80fd\u6027\uff1a\u5982\u679c\u6211\u4eec\u5b9a\u4f4d\u4e86\u6570\u636e\u4ece\u4e00\u4e2a\u8ba1\u7b97\u5355\u5143\u4f20\u9012\u5230\u90a3\u4e9b\u5916\u90e8\u7684\u8ba1\u7b97\u5355\u5143\u4e2d\u5176\u4e2d\u4e00\u4e2a\u8ba1\u7b97\u5355\u5143\u7684\u903b\u8f91\u3002\u9605\u8bfb\u8fd9\u7bc7<a href=\"http://journal.stuffwithstuff.com/2013/01/13/iteration-inside-and-out/\" rel=\"external nofollow noreferrer\">\u6587\u7ae0</a>\u6765\u83b7\u53d6\u66f4\u591a\u7684\u60f3\u6cd5\u3002</p>\n</blockquote>\n<p>\u6211\u4eec\u9700\u8981\u6ce8\u610f\uff0c\u67e5\u8be2\u6267\u884c\u6d41\u6c34\u7ebf\u5728\u6bcf\u4e00\u6b65\u90fd\u4f1a\u521b\u5efa\u4e34\u65f6\u6570\u636e\u3002\u6211\u4eec\u8981\u5c3d\u91cf\u4f7f\u5757\u7684\u5927\u5c0f\u8db3\u591f\u5c0f\uff0c\u4ece\u800c CPU \u7f13\u5b58\u80fd\u591f\u5bb9\u7eb3\u4e0b\u4e34\u65f6\u6570\u636e\u3002\u5728\u8fd9\u4e2a\u5047\u8bbe\u4e0b\uff0c\u4e0e\u5176\u4ed6\u8ba1\u7b97\u76f8\u6bd4\uff0c\u8bfb\u5199\u4e34\u65f6\u6570\u636e\u51e0\u4e4e\u662f\u6ca1\u6709\u4efb\u4f55\u5f00\u9500\u7684\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u8003\u8651\u4e00\u79cd\u66ff\u4ee3\u65b9\u6848\uff1a\u5c06\u6d41\u6c34\u7ebf\u4e2d\u7684\u591a\u4e2a\u64cd\u4f5c\u878d\u5408\u5728\u4e00\u8d77\uff0c\u4f7f\u6d41\u6c34\u7ebf\u5c3d\u53ef\u80fd\u77ed\uff0c\u5e76\u5220\u9664\u5927\u91cf\u4e34\u65f6\u6570\u636e\u3002\u8fd9\u53ef\u80fd\u662f\u4e00\u4e2a\u4f18\u70b9\uff0c\u4f46\u540c\u65f6\u4e5f\u6709\u7f3a\u70b9\u3002\u6bd4\u5982\uff0c\u62c6\u5206\u6d41\u6c34\u7ebf\u4f7f\u5f97\u4e2d\u95f4\u6570\u636e\u7f13\u5b58\u3001\u83b7\u53d6\u540c\u65f6\u8fd0\u884c\u7684\u7c7b\u4f3c\u67e5\u8be2\u7684\u4e2d\u95f4\u6570\u636e\u4ee5\u53ca\u76f8\u4f3c\u67e5\u8be2\u7684\u6d41\u6c34\u7ebf\u5408\u5e76\u7b49\u529f\u80fd\u5f88\u5bb9\u6613\u5b9e\u73b0\u3002</p>\n<h3 id=\"ge-shi-formats\">\u683c\u5f0f\uff08Formats\uff09<a class=\"headerlink\" href=\"#ge-shi-formats\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6570\u636e\u683c\u5f0f\u540c\u5757\u6d41\u4e00\u8d77\u5b9e\u73b0\u3002\u65e2\u6709\u4ec5\u7528\u4e8e\u5411\u5ba2\u6237\u7aef\u8f93\u51fa\u6570\u636e\u7684\u201d\u5c55\u793a\u201c\u683c\u5f0f\uff0c\u5982 <code>IBlockOutputStream</code> \u63d0\u4f9b\u7684 <code>Pretty</code> \u683c\u5f0f\uff0c\u4e5f\u6709\u5176\u5b83\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\uff0c\u6bd4\u5982 <code>TabSeparated</code> \u6216 <code>JSONEachRow</code>\u3002</p>\n<p>\u6b64\u5916\u8fd8\u6709\u884c\u6d41\uff1a<code>IRowInputStream</code> \u548c <code>IRowOutputStream</code>\u3002\u5b83\u4eec\u5141\u8bb8\u4f60\u6309\u884c pull/push \u6570\u636e\uff0c\u800c\u4e0d\u662f\u6309\u5757\u3002\u884c\u6d41\u53ea\u9700\u8981\u7b80\u5355\u5730\u9762\u5411\u884c\u683c\u5f0f\u5b9e\u73b0\u3002\u5305\u88c5\u5668 <code>BlockInputStreamFromRowInputStream</code> \u548c <code>BlockOutputStreamFromRowOutputStream</code> \u5141\u8bb8\u4f60\u5c06\u9762\u5411\u884c\u7684\u6d41\u8f6c\u6362\u4e3a\u6b63\u5e38\u7684\u9762\u5411\u5757\u7684\u6d41\u3002</p>\n<h3 id=\"i-o\">I/O<a class=\"headerlink\" href=\"#i-o\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5bf9\u4e8e\u9762\u5411\u5b57\u8282\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u6709 <code>ReadBuffer</code> \u548c <code>WriteBuffer</code> \u8fd9\u4e24\u4e2a\u62bd\u8c61\u7c7b\u3002\u5b83\u4eec\u7528\u6765\u66ff\u4ee3 C++ \u7684 <code>iostream</code>\u3002\u4e0d\u7528\u62c5\u5fc3\uff1a\u6bcf\u4e2a\u6210\u719f\u7684 C++ \u9879\u76ee\u90fd\u4f1a\u6709\u5145\u5206\u7684\u7406\u7531\u4f7f\u7528\u67d0\u4e9b\u4e1c\u897f\u6765\u4ee3\u66ff <code>iostream</code>\u3002</p>\n<p><code>ReadBuffer</code> \u548c <code>WriteBuffer</code> \u7531\u4e00\u4e2a\u8fde\u7eed\u7684\u7f13\u51b2\u533a\u548c\u6307\u5411\u7f13\u51b2\u533a\u4e2d\u67d0\u4e2a\u4f4d\u7f6e\u7684\u4e00\u4e2a\u6307\u9488\u7ec4\u6210\u3002\u5b9e\u73b0\u4e2d\uff0c\u7f13\u51b2\u533a\u53ef\u80fd\u62e5\u6709\u5185\u5b58\uff0c\u4e5f\u53ef\u80fd\u4e0d\u62e5\u6709\u5185\u5b58\u3002\u6709\u4e00\u4e2a\u865a\u65b9\u6cd5\u4f1a\u4f7f\u7528\u968f\u540e\u7684\u6570\u636e\u6765\u586b\u5145\u7f13\u51b2\u533a\uff08\u9488\u5bf9 <code>ReadBuffer</code>\uff09\u6216\u5237\u65b0\u7f13\u51b2\u533a\uff08\u9488\u5bf9 <code>WriteBuffer</code>\uff09\uff0c\u8be5\u865a\u65b9\u6cd5\u5f88\u5c11\u88ab\u8c03\u7528\u3002</p>\n<p><code>ReadBuffer</code> \u548c <code>WriteBuffer</code> \u7684\u5b9e\u73b0\u7528\u4e8e\u5904\u7406\u6587\u4ef6\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u548c\u7f51\u7edc\u5957\u63a5\u5b57\uff08socket\uff09\uff0c\u4e5f\u7528\u4e8e\u5b9e\u73b0\u538b\u7f29\uff08<code>CompressedWriteBuffer</code> \u5728\u5199\u5165\u6570\u636e\u524d\u9700\u8981\u5148\u7528\u4e00\u4e2a <code>WriteBuffer</code> \u8fdb\u884c\u521d\u59cb\u5316\u5e76\u8fdb\u884c\u538b\u7f29\uff09\u548c\u5176\u5b83\u7528\u9014\u3002<code>ConcatReadBuffer</code>\u3001<code>LimitReadBuffer</code> \u548c <code>HashingWriteBuffer</code> \u7684\u7528\u9014\u6b63\u5982\u5176\u540d\u5b57\u6240\u63cf\u8ff0\u7684\u4e00\u6837\u3002</p>\n<p><code>ReadBuffer</code> \u548c <code>WriteBuffer</code> \u4ec5\u5904\u7406\u5b57\u8282\u3002\u4e3a\u4e86\u5b9e\u73b0\u683c\u5f0f\u5316\u8f93\u5165\u548c\u8f93\u51fa\uff08\u6bd4\u5982\u4ee5\u5341\u8fdb\u5236\u683c\u5f0f\u5199\u4e00\u4e2a\u6570\u5b57\uff09\uff0c<code>ReadHelpers</code> \u548c <code>WriteHelpers</code> \u5934\u6587\u4ef6\u4e2d\u6709\u4e00\u4e9b\u8f85\u52a9\u51fd\u6570\u53ef\u7528\u3002</p>\n<p>\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u4e0b\uff0c\u5f53\u4f60\u628a\u4e00\u4e2a\u7ed3\u679c\u96c6\u4ee5 <code>JSON</code> \u683c\u5f0f\u5199\u5230\u6807\u51c6\u8f93\u51fa\uff08stdout\uff09\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002\u4f60\u5df2\u7ecf\u51c6\u5907\u597d\u4ece <code>IBlockInputStream</code> \u83b7\u53d6\u7ed3\u679c\u96c6\uff0c\u7136\u540e\u521b\u5efa <code>WriteBufferFromFileDescriptor(STDOUT_FILENO)</code> \u7528\u4e8e\u5199\u5b57\u8282\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u521b\u5efa <code>JSONRowOutputStream</code> \u5e76\u7528 <code>WriteBuffer</code> \u521d\u59cb\u5316\uff0c\u7528\u4e8e\u5c06\u884c\u4ee5 <code>JSON</code> \u683c\u5f0f\u5199\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u4f60\u8fd8\u53ef\u4ee5\u5728\u5176\u4e0a\u521b\u5efa <code>BlockOutputStreamFromRowOutputStream</code>\uff0c\u5c06\u5176\u8868\u793a\u4e3a <code>IBlockOutputStream</code>\u3002\u7136\u540e\u8c03\u7528 <code>copyData</code> \u5c06\u6570\u636e\u4ece <code>IBlockInputStream</code> \u4f20\u8f93\u5230 <code>IBlockOutputStream</code>\uff0c\u4e00\u5207\u5de5\u4f5c\u6b63\u5e38\u3002\u5728\u5185\u90e8\uff0c<code>JSONRowOutputStream</code> \u4f1a\u5199\u5165 JSON \u5206\u9694\u7b26\uff0c\u5e76\u4ee5\u6307\u5411 <code>IColumn</code> \u7684\u5f15\u7528\u548c\u884c\u6570\u4f5c\u4e3a\u53c2\u6570\u8c03\u7528 <code>IDataType::serializeTextJSON</code> \u51fd\u6570\u3002\u968f\u540e\uff0c<code>IDataType::serializeTextJSON</code> \u5c06\u4f1a\u8c03\u7528 <code>WriteHelpers.h</code> \u4e2d\u7684\u4e00\u4e2a\u65b9\u6cd5\uff1a\u6bd4\u5982\uff0c<code>writeText</code> \u7528\u4e8e\u6570\u503c\u7c7b\u578b\uff0c<code>writeJSONString</code> \u7528\u4e8e <code>DataTypeString</code> \u3002</p>\n<h3 id=\"biao-tables\">\u8868\uff08Tables\uff09<a class=\"headerlink\" href=\"#biao-tables\" title=\"Permanent link\">&para;</a></h3>\n<p>\u8868\u7531 <code>IStorage</code> \u63a5\u53e3\u8868\u793a\u3002\u8be5\u63a5\u53e3\u7684\u4e0d\u540c\u5b9e\u73b0\u5bf9\u5e94\u4e0d\u540c\u7684\u8868\u5f15\u64ce\u3002\u6bd4\u5982 <code>StorageMergeTree</code>\u3001<code>StorageMemory</code> \u7b49\u3002\u8fd9\u4e9b\u7c7b\u7684\u5b9e\u4f8b\u5c31\u662f\u8868\u3002</p>\n<p><code>IStorage</code> \u4e2d\u6700\u91cd\u8981\u7684\u65b9\u6cd5\u662f <code>re");
            
            document.write("ad</code> \u548c <code>write</code>\uff0c\u9664\u6b64\u4e4b\u5916\u8fd8\u6709 <code>alter</code>\u3001<code>rename</code> \u548c <code>drop</code> \u7b49\u65b9\u6cd5\u3002<code>read</code> \u65b9\u6cd5\u63a5\u53d7\u5982\u4e0b\u53c2\u6570\uff1a\u9700\u8981\u4ece\u8868\u4e2d\u8bfb\u53d6\u7684\u5217\u96c6\uff0c\u9700\u8981\u6267\u884c\u7684 <code>AST</code> \u67e5\u8be2\uff0c\u4ee5\u53ca\u6240\u9700\u8fd4\u56de\u7684\u6d41\u7684\u6570\u91cf\u3002<code>read</code> \u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u6216\u591a\u4e2a <code>IBlockInputStream</code> \u5bf9\u8c61\uff0c\u4ee5\u53ca\u5728\u67e5\u8be2\u6267\u884c\u671f\u95f4\u5728\u4e00\u4e2a\u8868\u5f15\u64ce\u5185\u5b8c\u6210\u7684\u5173\u4e8e\u6570\u636e\u5904\u7406\u9636\u6bb5\u7684\u4fe1\u606f\u3002</p>\n<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c<code>read</code> \u65b9\u6cd5\u4ec5\u8d1f\u8d23\u4ece\u8868\u4e2d\u8bfb\u53d6\u6307\u5b9a\u7684\u5217\uff0c\u800c\u4e0d\u4f1a\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u6570\u636e\u5904\u7406\u3002\u8fdb\u4e00\u6b65\u7684\u6570\u636e\u5904\u7406\u5747\u7531\u67e5\u8be2\u89e3\u91ca\u5668\u5b8c\u6210\uff0c\u4e0d\u7531 <code>IStorage</code> \u8d1f\u8d23\u3002</p>\n<p>\u4f46\u662f\u4e5f\u6709\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\uff1a</p>\n<ul>\n<li>AST \u67e5\u8be2\u88ab\u4f20\u9012\u7ed9 <code>read</code> \u65b9\u6cd5\uff0c\u8868\u5f15\u64ce\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u5224\u65ad\u662f\u5426\u80fd\u591f\u4f7f\u7528\u7d22\u5f15\uff0c\u4ece\u800c\u4ece\u8868\u4e2d\u8bfb\u53d6\u66f4\u5c11\u7684\u6570\u636e\u3002</li>\n<li>\u6709\u65f6\u5019\uff0c\u8868\u5f15\u64ce\u80fd\u591f\u5c06\u6570\u636e\u5904\u7406\u5230\u4e00\u4e2a\u7279\u5b9a\u9636\u6bb5\u3002\u6bd4\u5982\uff0c<code>StorageDistributed</code> \u53ef\u4ee5\u5411\u8fdc\u7a0b\u670d\u52a1\u5668\u53d1\u9001\u67e5\u8be2\uff0c\u8981\u6c42\u5b83\u4eec\u5c06\u6765\u81ea\u4e0d\u540c\u7684\u8fdc\u7a0b\u670d\u52a1\u5668\u80fd\u591f\u5408\u5e76\u7684\u6570\u636e\u5904\u7406\u5230\u67d0\u4e2a\u9636\u6bb5\uff0c\u5e76\u8fd4\u56de\u9884\u5904\u7406\u540e\u7684\u6570\u636e\uff0c\u7136\u540e\u67e5\u8be2\u89e3\u91ca\u5668\u5b8c\u6210\u540e\u7eed\u7684\u6570\u636e\u5904\u7406\u3002</li>\n</ul>\n<p>\u8868\u7684 <code>read</code> \u65b9\u6cd5\u80fd\u591f\u8fd4\u56de\u591a\u4e2a <code>IBlockInputStream</code> \u5bf9\u8c61\u4ee5\u5141\u8bb8\u5e76\u884c\u5904\u7406\u6570\u636e\u3002\u591a\u4e2a\u5757\u8f93\u5165\u6d41\u80fd\u591f\u4ece\u4e00\u4e2a\u8868\u4e2d\u5e76\u884c\u8bfb\u53d6\u3002\u7136\u540e\u4f60\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u7684\u8f6c\u6362\u5bf9\u8fd9\u4e9b\u6d41\u8fdb\u884c\u88c5\u9970\uff08\u6bd4\u5982\u8868\u8fbe\u5f0f\u6c42\u503c\u6216\u8fc7\u6ee4\uff09\uff0c\u8f6c\u6362\u8fc7\u7a0b\u80fd\u591f\u72ec\u7acb\u8ba1\u7b97\uff0c\u5e76\u5728\u5176\u4e0a\u521b\u5efa\u4e00\u4e2a <code>UnionBlockInputStream</code>\uff0c\u4ee5\u5e76\u884c\u8bfb\u53d6\u591a\u4e2a\u6d41\u3002</p>\n<p>\u53e6\u5916\u4e5f\u6709 <code>TableFunction</code>\u3002<code>TableFunction</code> \u80fd\u591f\u5728\u67e5\u8be2\u7684 <code>FROM</code> \u5b57\u53e5\u4e2d\u8fd4\u56de\u4e00\u4e2a\u4e34\u65f6\u7684 <code>IStorage</code> \u4ee5\u4f9b\u4f7f\u7528\u3002</p>\n<p>\u8981\u5feb\u901f\u4e86\u89e3\u5982\u4f55\u5b9e\u73b0\u81ea\u5df1\u7684\u8868\u5f15\u64ce\uff0c\u53ef\u4ee5\u67e5\u770b\u4e00\u4e9b\u7b80\u5355\u7684\u8868\u5f15\u64ce\uff0c\u6bd4\u5982 <code>StorageMemory</code> \u6216 <code>StorageTinyLog</code>\u3002</p>\n<blockquote>\n<p>\u4f5c\u4e3a <code>read</code> \u65b9\u6cd5\u7684\u7ed3\u679c\uff0c<code>IStorage</code> \u8fd4\u56de <code>QueryProcessingStage</code> - \u5173\u4e8e storage \u91cc\u54ea\u90e8\u5206\u67e5\u8be2\u5df2\u7ecf\u88ab\u8ba1\u7b97\u7684\u4fe1\u606f\u3002\u5f53\u524d\u6211\u4eec\u4ec5\u6709\u975e\u5e38\u7c97\u7c92\u5ea6\u7684\u4fe1\u606f\u3002Storage \u65e0\u6cd5\u544a\u8bc9\u6211\u4eec\u201c\u5bf9\u4e8e\u8fd9\u4e2a\u8303\u56f4\u7684\u6570\u636e\uff0c\u6211\u5df2\u7ecf\u5904\u7406\u5b8c\u4e86 WHERE \u5b57\u53e5\u91cc\u7684\u8fd9\u90e8\u5206\u8868\u8fbe\u5f0f\u201d\u3002\u6211\u4eec\u9700\u8981\u5728\u8fd9\u4e2a\u5730\u65b9\u7ee7\u7eed\u52aa\u529b\u3002</p>\n</blockquote>\n<h3 id=\"jie-xi-qi-parsers\">\u89e3\u6790\u5668\uff08Parsers\uff09<a class=\"headerlink\" href=\"#jie-xi-qi-parsers\" title=\"Permanent link\">&para;</a></h3>\n<p>\u67e5\u8be2\u7531\u4e00\u4e2a\u624b\u5199\u9012\u5f52\u4e0b\u964d\u89e3\u6790\u5668\u89e3\u6790\u3002\u6bd4\u5982\uff0c <code>ParserSelectQuery</code> \u53ea\u662f\u9488\u5bf9\u67e5\u8be2\u7684\u4e0d\u540c\u90e8\u5206\u9012\u5f52\u5730\u8c03\u7528\u4e0b\u5c42\u89e3\u6790\u5668\u3002\u89e3\u6790\u5668\u521b\u5efa <code>AST</code>\u3002<code>AST</code> \u7531\u8282\u70b9\u8868\u793a\uff0c\u8282\u70b9\u662f <code>IAST</code> \u7684\u5b9e\u4f8b\u3002</p>\n<blockquote>\n<p>\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0c\u672a\u4f7f\u7528\u89e3\u6790\u5668\u751f\u6210\u5668\u3002</p>\n</blockquote>\n<h3 id=\"jie-shi-qi-interpreters\">\u89e3\u91ca\u5668\uff08Interpreters\uff09<a class=\"headerlink\" href=\"#jie-shi-qi-interpreters\" title=\"Permanent link\">&para;</a></h3>\n<p>\u89e3\u91ca\u5668\u8d1f\u8d23\u4ece <code>AST</code> \u521b\u5efa\u67e5\u8be2\u6267\u884c\u6d41\u6c34\u7ebf\u3002\u65e2\u6709\u4e00\u4e9b\u7b80\u5355\u7684\u89e3\u91ca\u5668\uff0c\u5982 <code>InterpreterExistsQuery</code> \u548c <code>InterpreterDropQuery</code>\uff0c\u4e5f\u6709\u66f4\u590d\u6742\u7684\u89e3\u91ca\u5668\uff0c\u5982 <code>InterpreterSelectQuery</code>\u3002\u67e5\u8be2\u6267\u884c\u6d41\u6c34\u7ebf\u7531\u5757\u8f93\u5165\u6216\u8f93\u51fa\u6d41\u7ec4\u6210\u3002\u6bd4\u5982\uff0c<code>SELECT</code> \u67e5\u8be2\u7684\u89e3\u91ca\u7ed3\u679c\u662f\u4ece <code>FROM</code> \u5b57\u53e5\u7684\u7ed3\u679c\u96c6\u4e2d\u8bfb\u53d6\u6570\u636e\u7684 <code>IBlockInputStream</code>\uff1b<code>INSERT</code> \u67e5\u8be2\u7684\u7ed3\u679c\u662f\u5199\u5165\u9700\u8981\u63d2\u5165\u7684\u6570\u636e\u7684 <code>IBlockOutputStream</code>\uff1b<code>SELECT INSERT</code> \u67e5\u8be2\u7684\u89e3\u91ca\u7ed3\u679c\u662f <code>IBlockInputStream</code>\uff0c\u5b83\u5728\u7b2c\u4e00\u6b21\u8bfb\u53d6\u65f6\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7ed3\u679c\u96c6\uff0c\u540c\u65f6\u5c06\u6570\u636e\u4ece <code>SELECT</code> \u590d\u5236\u5230 <code>INSERT</code>\u3002</p>\n<p><code>InterpreterSelectQuery</code> \u4f7f\u7528 <code>ExpressionAnalyzer</code> \u548c <code>ExpressionActions</code> \u673a\u5236\u6765\u8fdb\u884c\u67e5\u8be2\u5206\u6790\u548c\u8f6c\u6362\u3002\u8fd9\u662f\u5927\u591a\u6570\u57fa\u4e8e\u89c4\u5219\u7684\u67e5\u8be2\u4f18\u5316\u5b8c\u6210\u7684\u5730\u65b9\u3002<code>ExpressionAnalyzer</code> \u975e\u5e38\u6df7\u4e71\uff0c\u5e94\u8be5\u8fdb\u884c\u91cd\u5199\uff1a\u4e0d\u540c\u7684\u67e5\u8be2\u8f6c\u6362\u548c\u4f18\u5316\u5e94\u8be5\u88ab\u63d0\u53d6\u51fa\u6765\u5e76\u5212\u5206\u6210\u4e0d\u540c\u7684\u7c7b\uff0c\u4ece\u800c\u5141\u8bb8\u6a21\u5757\u5316\u8f6c\u6362\u6216\u67e5\u8be2\u3002</p>\n<h3 id=\"han-shu-functions\">\u51fd\u6570\uff08Functions\uff09<a class=\"headerlink\" href=\"#han-shu-functions\" title=\"Permanent link\">&para;</a></h3>\n<p>\u51fd\u6570\u65e2\u6709\u666e\u901a\u51fd\u6570\uff0c\u4e5f\u6709\u805a\u5408\u51fd\u6570\u3002\u5bf9\u4e8e\u805a\u5408\u51fd\u6570\uff0c\u8bf7\u770b\u4e0b\u4e00\u8282\u3002</p>\n<p>\u666e\u901a\u51fd\u6570\u4e0d\u4f1a\u6539\u53d8\u884c\u6570 - \u5b83\u4eec\u7684\u6267\u884c\u770b\u8d77\u6765\u5c31\u50cf\u662f\u72ec\u7acb\u5730\u5904\u7406\u6bcf\u4e00\u884c\u6570\u636e\u3002\u5b9e\u9645\u4e0a\uff0c\u51fd\u6570\u4e0d\u4f1a\u4f5c\u7528\u4e8e\u4e00\u4e2a\u5355\u72ec\u7684\u884c\u4e0a\uff0c\u800c\u662f\u4f5c\u7528\u5728\u4ee5 <code>Block</code> \u4e3a\u5355\u4f4d\u7684\u6570\u636e\u4e0a\uff0c\u4ee5\u5b9e\u73b0\u5411\u91cf\u67e5\u8be2\u6267\u884c\u3002</p>\n<p>\u8fd8\u6709\u4e00\u4e9b\u6742\u9879\u51fd\u6570\uff0c\u6bd4\u5982 <a href=\"#function-blocksize\">blockSize</a>\u3001<a href=\"#function-rownumberinblock\">rowNumberInBlock</a>\uff0c\u4ee5\u53ca <a href=\"#function-runningaccumulate\">runningAccumulate</a>\uff0c\u5b83\u4eec\u5bf9\u5757\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4e14\u4e0d\u9075\u4ece\u884c\u7684\u72ec\u7acb\u6027\u3002</p>\n<p>ClickHouse \u5177\u6709\u5f3a\u7c7b\u578b\uff0c\u56e0\u6b64\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\u4e0d\u4f1a\u53d1\u751f\u3002\u5982\u679c\u51fd\u6570\u4e0d\u652f\u6301\u67d0\u4e2a\u7279\u5b9a\u7684\u7c7b\u578b\u7ec4\u5408\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u4f46\u51fd\u6570\u53ef\u4ee5\u901a\u8fc7\u91cd\u8f7d\u4ee5\u652f\u6301\u8bb8\u591a\u4e0d\u540c\u7684\u7c7b\u578b\u7ec4\u5408\u3002\u6bd4\u5982\uff0c<code>plus</code> \u51fd\u6570\uff08\u7528\u4e8e\u5b9e\u73b0 <code>+</code> \u8fd0\u7b97\u7b26\uff09\u652f\u6301\u4efb\u610f\u6570\u5b57\u7c7b\u578b\u7684\u7ec4\u5408\uff1a<code>UInt8</code> + <code>Float32</code>\uff0c<code>UInt16</code> + <code>Int8</code> \u7b49\u3002\u540c\u65f6\uff0c\u4e00\u4e9b\u53ef\u53d8\u53c2\u6570\u7684\u51fd\u6570\u80fd\u591f\u7ea7\u63a5\u6536\u4efb\u610f\u6570\u76ee\u7684\u53c2\u6570\uff0c\u6bd4\u5982 <code>concat</code> \u51fd\u6570\u3002</p>\n<p>\u5b9e\u73b0\u51fd\u6570\u53ef\u80fd\u6709\u4e9b\u4e0d\u65b9\u4fbf\uff0c\u56e0\u4e3a\u51fd\u6570\u7684\u5b9e\u73b0\u9700\u8981\u5305\u542b\u6240\u6709\u652f\u6301\u8be5\u64cd\u4f5c\u7684\u6570\u636e\u7c7b\u578b\u548c <code>IColumn</code> \u7c7b\u578b\u3002\u6bd4\u5982\uff0c<code>plus</code> \u51fd\u6570\u80fd\u591f\u5229\u7528 C++ \u6a21\u677f\u9488\u5bf9\u4e0d\u540c\u7684\u6570\u5b57\u7c7b\u578b\u7ec4\u5408\u3001\u5e38\u91cf\u4ee5\u53ca\u975e\u5e38\u91cf\u7684\u5de6\u503c\u548c\u53f3\u503c\u8fdb\u884c\u4ee3\u7801\u751f\u6210\u3002</p>\n<blockquote>\n<p>\u8fd9\u662f\u4e00\u4e2a\u5b9e\u73b0\u52a8\u6001\u4ee3\u7801\u751f\u6210\u7684\u597d\u5730\u65b9\uff0c\u4ece\u800c\u80fd\u591f\u907f\u514d\u6a21\u677f\u4ee3\u7801\u81a8\u80c0\u3002\u540c\u6837\uff0c\u8fd0\u884c\u65f6\u4ee3\u7801\u751f\u6210\u4e5f\u4f7f\u5f97\u5b9e\u73b0\u878d\u5408\u51fd\u6570\u6210\u4e3a\u53ef\u80fd\uff0c\u6bd4\u5982\u878d\u5408\u201c\u4e58-\u52a0\u201d\uff0c\u6216\u8005\u5728\u5355\u5c42\u5faa\u73af\u8fed\u4ee3\u4e2d\u8fdb\u884c\u591a\u91cd\u6bd4\u8f83\u3002</p>\n</blockquote>\n<p>\u7531\u4e8e\u5411\u91cf\u67e5\u8be2\u6267\u884c\uff0c\u51fd\u6570\u4e0d\u4f1a\u201c\u77ed\u8def\u201d\u3002\u6bd4\u5982\uff0c\u5982\u679c\u4f60\u5199 <code>WHERE f(x) AND g(y)</code>\uff0c\u4e24\u8fb9\u90fd\u4f1a\u8fdb\u884c\u8ba1\u7b97\uff0c\u5373\u4f7f\u662f\u5bf9\u4e8e <code>f(x)</code> \u4e3a 0 \u7684\u884c\uff08\u9664\u975e <code>f(x)</code> \u662f\u96f6\u5e38\u91cf\u8868\u8fbe\u5f0f\uff09\u3002\u4f46\u662f\u5982\u679c <code>f(x)</code> \u7684\u9009\u62e9\u6761\u4ef6\u5f88\u9ad8\uff0c\u5e76\u4e14\u8ba1\u7b97 <code>f(x)</code> \u6bd4\u8ba1\u7b97 <code>g(y)</code> \u8981\u5212\u7b97\u5f97\u591a\uff0c\u90a3\u4e48\u6700\u597d\u8fdb\u884c\u591a\u904d\u8ba1\u7b97\uff1a\u9996\u5148\u8ba1\u7b97 <code>f(x)</code>\uff0c\u6839\u636e\u8ba1\u7b97\u7ed3\u679c\u5bf9\u5217\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\uff0c\u7136\u540e\u8ba1\u7b97 <code>g(y)</code>\uff0c\u4e4b\u540e\u53ea\u9700\u5bf9\u8f83\u5c0f\u6570\u91cf\u7684\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\u3002</p>\n<h3 id=\"ju-he-han-shu\">\u805a\u5408\u51fd\u6570<a class=\"headerlink\" href=\"#ju-he-han-shu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u805a\u5408\u51fd\u6570\u662f\u72b6\u6001\u51fd\u6570\u3002\u5b83\u4eec\u5c06\u4f20\u5165\u7684\u503c\u6fc0\u6d3b\u5230\u67d0\u4e2a\u72b6\u6001\uff0c\u5e76\u5141\u8bb8\u4f60\u4ece\u8be5\u72b6\u6001\u83b7\u53d6\u7ed3\u679c\u3002\u805a\u5408\u51fd\u6570\u4f7f\u7528 <code>IAggregateFunction</code> \u63a5\u53e3\u8fdb\u884c\u7ba1\u7406\u3002\u72b6\u6001\u53ef\u4ee5\u975e\u5e38\u7b80\u5355\uff08<code>AggregateFunctionCount</code> \u7684\u72b6\u6001\u53ea\u662f\u4e00\u4e2a\u5355\u4e00\u7684<code>UInt64</code> \u503c\uff09\uff0c\u4e5f\u53ef\u4ee5\u975e\u5e38\u590d\u6742\uff08<code>AggregateFunctionUniqCombined</code> \u7684\u72b6\u6001\u662f\u7531\u4e00\u4e2a\u7ebf\u6027\u6570\u7ec4\u3001\u4e00\u4e2a\u6563\u5217\u8868\u548c\u4e00\u4e2a <code>HyperLogLog</code> \u6982\u7387\u6570\u636e\u7ed3\u6784\u7ec4\u5408\u800c\u6210\u7684\uff09\u3002</p>\n<p>\u4e3a\u4e86\u80fd\u591f\u5728\u6267\u884c\u4e00\u4e2a\u57fa\u6570\u5f88\u5927\u7684 <code>GROUP BY</code> \u67e5\u8be2\u65f6\u5904\u7406\u591a\u4e2a\u805a\u5408\u72b6\u6001\uff0c\u9700\u8981\u5728 <code>Arena</code>\uff08\u4e00\u4e2a\u5185\u5b58\u6c60\uff09\u6216\u4efb\u4f55\u5408\u9002\u7684\u5185\u5b58\u5757\u4e2d\u5206\u914d\u72b6\u6001\u3002\u72b6\u6001\u53ef\u4ee5\u6709\u4e00\u4e2a\u975e\u5e73\u51e1\u7684\u6784\u9020\u5668\u548c\u6790\u6784\u5668\uff1a\u6bd4\u5982\uff0c\u590d\u6742\u7684\u805a\u5408\u72b6\u6001\u80fd\u591f\u81ea\u5df1\u5206\u914d\u989d\u5916\u7684\u5185\u5b58\u3002\u8fd9\u9700\u8981\u6ce8\u610f\u72b6\u6001\u7684\u521b\u5efa\u548c\u9500\u6bc1\u5e76\u6070\u5f53\u5730\u4f20\u9012\u72b6\u6001\u7684\u6240\u6709\u6743\uff0c\u4ee5\u8ddf\u8e2a\u8c01\u5c06\u4f55\u65f6\u9500\u6bc1\u72b6\u6001\u3002</p>\n<p>\u805a\u5408\u72b6\u6001\u53ef\u4ee5\u88ab\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff0c\u4ee5\u5728\u5206\u5e03\u5f0f\u67e5\u8be2\u6267\u884c\u671f\u95f4\u901a\u8fc7\u7f51\u7edc\u4f20\u9012\u6216\u8005\u5728\u5185\u5b58\u4e0d\u591f\u7684\u65f6\u5019\u5c06\u5176\u5199\u5230\u786c\u76d8\u3002\u805a\u5408\u72b6\u6001\u751a\u81f3\u53ef\u4ee5\u901a\u8fc7 <code>DataTypeAggregateFunction</code> \u5b58\u50a8\u5230\u4e00\u4e2a\u8868\u4e2d\uff0c\u4ee5\u5141\u8bb8\u6570\u636e\u7684\u589e\u91cf\u805a\u5408\u3002</p>\n<blockquote>\n<p>\u805a\u5408\u51fd\u6570\u72b6\u6001\u7684\u5e8f\u5217\u5316\u6570\u636e\u683c\u5f0f\u76ee\u524d\u5c1a\u672a\u7248\u672c\u5316\u3002\u5982\u679c\u53ea\u662f\u4e34\u65f6\u5b58\u50a8\u805a\u5408\u72b6\u6001\uff0c\u8fd9\u6837\u662f\u53ef\u4ee5\u7684\u3002\u4f46\u662f\u6211\u4eec\u6709 <code>AggregatingMergeTree</code> \u8868\u5f15\u64ce\u7528\u4e8e\u589e\u91cf\u805a\u5408\uff0c\u5e76\u4e14\u4eba\u4eec\u5df2\u7ecf\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528\u5b83\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5728\u672a\u6765\u5f53\u6211\u4eec\u66f4\u6539\u4efb\u4f55\u805a\u5408\u51fd\u6570\u7684\u5e8f\u5217\u5316\u683c\u5f0f\u65f6\u9700\u8981\u589e\u52a0\u5411\u540e\u517c\u5bb9\u7684\u652f\u6301\u3002</p>\n</blockquote>\n<h3 id=\"fu-wu-qi-server\">\u670d\u52a1\u5668\uff08Server\uff09<a class=\"headerlink\" href=\"#fu-wu-qi-server\" title=\"Permanent link\">&para;</a></h3>\n<p>\u670d\u52a1\u5668\u5b9e\u73b0\u4e86\u591a\u4e2a\u4e0d\u540c\u7684\u63a5\u53e3\uff1a</p>\n<ul>\n<li>\u4e00\u4e2a\u7528\u4e8e\u4efb\u4f55\u5916\u90e8\u5ba2\u6237\u7aef\u7684 HTTP \u63a5\u53e3\u3002</li>\n<li>\u4e00\u4e2a\u7528\u4e8e\u672c\u673a ClickHouse \u5ba2\u6237\u7aef\u4ee5\u53ca\u5728\u5206\u5e03\u5f0f\u67e5\u8be2\u6267\u884c\u4e2d\u8de8\u670d\u52a1\u5668\u901a\u4fe1\u7684 TCP \u63a5\u53e3\u3002</li>\n<li>\u4e00\u4e2a\u7528\u4e8e\u4f20\u8f93\u6570\u636e\u4ee5\u8fdb\u884c\u62f7\u8d1d\u7684\u63a5\u53e3\u3002</li>\n</ul>\n<p>\u5728\u5185\u90e8\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u6ca1\u6709\u534f\u7a0b\u3001\u7ea4\u7a0b\u7b49\u7684\u57fa\u7840\u591a\u7ebf\u7a0b\u670d\u52a1\u5668\u3002\u670d\u52a1\u5668\u4e0d\u662f\u4e3a\u5904\u7406\u9ad8\u901f\u7387\u7684\u7b80\u5355\u67e5\u8be2\u8bbe\u8ba1\u7684\uff0c\u800c\u662f\u4e3a\u5904\u7406\u76f8\u5bf9\u4f4e\u901f\u7387\u7684\u590d\u6742\u67e5\u8be2\u8bbe\u8ba1\u7684\uff0c\u6bcf\u4e00\u4e2a\u590d\u6742\u67e5\u8be2\u80fd\u591f\u5bf9\u5927\u91cf\u7684\u6570\u636e\u8fdb\u884c\u5904\u7406\u5206\u6790\u3002</p>\n<p>\u670d\u52a1\u5668\u4f7f\u7528\u5fc5\u8981\u7684\u67e5\u8be2\u6267\u884c\u9700\u8981\u7684\u73af\u5883\u521d\u59cb\u5316 <code>Context</code> \u7c7b\uff1a\u53ef\u7528\u6570\u636e\u5e93\u5217\u8868\u3001\u7528\u6237\u548c\u8bbf\u95ee\u6743\u9650\u3001\u8bbe\u7f6e\u3001\u96c6\u7fa4\u3001\u8fdb\u7a0b\u5217\u8868\u548c\u67e5\u8be2\u65e5\u5fd7\u7b49\u3002\u8fd9\u4e9b\u73af\u5883\u88ab\u89e3\u91ca\u5668\u4f7f\u7528\u3002</p>\n<p>\u6211\u4eec\u7ef4\u62a4\u4e86\u670d\u52a1\u5668 TCP \u534f\u8bae\u7684\u5b8c\u5168\u5411\u540e\u5411\u524d\u517c\u5bb9\u6027\uff1a\u65e7\u5ba2\u6237\u7aef\u53ef\u4ee5\u548c\u65b0\u670d\u52a1\u5668\u901a\u4fe1\uff0c\u65b0\u5ba2\u6237\u7aef\u4e5f\u53ef\u4ee5\u548c\u65e7\u670d\u52a1\u5668\u901a\u4fe1\u3002\u4f46\u662f\u6211\u4eec\u5e76\u4e0d\u60f3\u6c38\u4e45\u7ef4\u62a4\u5b83\uff0c\u6211\u4eec\u5c06\u5728\u5927\u7ea6\u4e00\u5e74\u540e\u5220\u9664\u5bf9\u65e7\u7248\u672c\u7684\u652f\u6301\u3002</p>\n<blockquote>\n<p>\u5bf9\u4e8e\u6240\u6709\u7684\u5916\u90e8\u5e94\u7528\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 HTTP \u63a5\u53e3\uff0c\u56e0\u4e3a\u8be5\u63a5\u53e3\u5f88\u7b80\u5355\uff0c\u5bb9\u6613\u4f7f\u7528\u3002TCP \u63a5\u53e3\u4e0e\u5185\u90e8\u6570\u636e\u7ed3\u6784\u7684\u8054\u7cfb\u66f4\u52a0\u7d27\u5bc6\uff1a\u5b83\u4f7f\u7528\u5185\u90e8\u683c\u5f0f\u4f20\u9012\u6570\u636e\u5757\uff0c\u5e76\u4f7f\u7528\u81ea\u5b9a\u4e49\u5e27\u6765\u538b\u7f29\u6570\u636e\u3002\u6211\u4eec\u6ca1\u6709\u53d1\u5e03\u8be5\u534f\u8bae\u7684 C \u5e93\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u94fe\u63a5\u5927\u90e8\u5206\u7684 ClickHouse \u4ee3\u7801\u5e93\uff0c\u8fd9\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002</p>\n</blockquote>\n<h3 id=\"fen-bu-shi-cha-xun-zhi-xing\">\u5206\u5e03\u5f0f\u67e5\u8be2\u6267\u884c<a class=\"headerlink\" href=\"#fen-bu-shi-cha-xun-zhi-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u96c6\u7fa4\u8bbe\u7f6e\u4e2d\u7684\u670d\u52a1\u5668\u5927\u591a\u662f\u72ec\u7acb\u7684\u3002\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u96c6\u7fa4\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u670d\u52a1\u5668\u4e0a\u521b\u5efa\u4e00\u4e2a <code>Distributed</code> \u8868\u3002<code>Distributed</code> \u8868\u672c\u8eab\u5e76\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u5b83\u53ea\u4e3a\u96c6\u7fa4\u7684\u591a\u4e2a\u8282\u70b9\u4e0a\u7684\u6240\u6709\u672c\u5730\u8868\u63d0\u4f9b\u4e00\u4e2a\u201c\u89c6\u56fe\uff08view\uff09\u201d\u3002\u5f53\u4ece <code>Distributed</code> \u8868\u4e2d\u8fdb\u884c SELECT \u65f6\uff0c\u5b83\u4f1a\u91cd\u5199\u8be5\u67e5\u8be2\uff0c\u6839\u636e\u8d1f\u8f7d\u5e73\u8861\u8bbe\u7f6e\u6765\u9009\u62e9\u8fdc\u7a0b\u8282\u70b9\uff0c\u5e76\u5c06\u67e5\u8be2\u53d1\u9001\u7ed9\u8282\u70b9\u3002<code>Distributed</code> \u8868\u8bf7\u6c42\u8fdc\u7a0b\u670d\u52a1\u5668\u5904\u7406\u67e5\u8be2\uff0c\u76f4\u5230\u53ef\u4ee5\u5408\u5e76\u6765\u81ea\u4e0d\u540c\u670d\u52a1\u5668\u7684\u4e2d\u95f4\u7ed3\u679c\u7684\u9636\u6bb5\u3002\u7136\u540e\u5b83\u63a5\u6536\u4e2d\u95f4\u7ed3\u679c\u5e76\u8fdb\u884c\u5408\u5e76\u3002\u5206\u5e03\u5f0f\u8868\u4f1a\u5c1d\u8bd5\u5c06\u5c3d\u53ef\u80fd\u591a\u7684\u5de5\u4f5c\u5206\u914d\u7ed9\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u4e0d\u4f1a\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u592a\u591a\u7684\u4e2d\u95f4\u6570\u636e\u3002</p>\n<blockquote>\n<p>\u5f53 <code>IN</code> \u6216 <code>JOIN</code> \u5b50\u53e5\u4e2d\u5305\u542b\u5b50\u67e5\u8be2\u5e76\u4e14\u6bcf\u4e2a\u5b50\u67e5\u8be2\u90fd\u4f7f\u7528\u5206\u5e03\u5f0f\u8868\u65f6\uff0c\u4e8b\u60c5\u4f1a\u53d8\u5f97\u66f4\u52a0\u590d\u6742\u3002\u6211\u4eec\u6709\u4e0d\u540c\u7684\u7b56\u7565\u6765\u6267\u884c\u8fd9\u4e9b\u67e5\u8be2\u3002</p>\n</blockquote>\n<p>\u5206\u5e03\u5f0f\u67e5\u8be2\u6267\u884c\u6ca1\u6709\u5168\u5c40\u67e5\u8be2\u8ba1\u5212\u3002\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u9488\u5bf9\u81ea\u5df1\u7684\u5de5\u4f5c\u90e8\u5206\u7684\u672c\u5730\u67e5\u8be2\u8ba1\u5212\u3002\u6211\u4eec\u4ec5\u6709\u7b80\u5355\u7684\u4e00\u6b21\u6027\u5206\u5e03\u5f0f\u67e5\u8be2\u6267\u884c\uff1a\u5c06\u67e5\u8be2\u53d1\u9001\u7ed9\u8fdc\u7a0b\u8282\u70b9\uff0c\u7136\u540e\u5408\u5e76\u7ed3\u679c\u3002\u4f46\u662f\u5bf9\u4e8e\u5177\u6709\u9ad8\u57fa\u6570\u7684 <code>GROUP BY</code> \u6216\u5177\u6709\u5927\u91cf\u4e34\u65f6\u6570\u636e\u7684 <code>JOIN</code> \u8fd9\u6837\u56f0\u96be\u7684\u67e5\u8be2\u7684\u6765\u8bf4\uff0c\u8fd9\u662f\u4e0d\u53ef\u884c\u7684\uff1a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u5728\u670d\u52a1\u5668\u4e4b\u95f4\u201c\u6539\u7ec4\u201d\u6570\u636e\uff0c\u8fd9\u9700\u8981\u989d\u5916\u7684\u534f\u8c03\u3002ClickHouse \u4e0d\u652f\u6301\u8fd9\u7c7b\u67e5\u8be2\u6267\u884c\uff0c\u6211\u4eec\u9700\u8981\u5728\u8fd9\u65b9\u9762\u8fdb\u884c\u52aa\u529b\u3002</p>\n<h3 id=\"merge-tree\">Merge Tree<a class=\"headerlink\" href=\"#merge-tree\" title=\"Permanent link\">&para;</a></h3>\n<p><code>MergeTree</code> \u662f\u4e00\u7cfb\u5217\u652f\u6301\u6309\u4e3b\u952e\u7d22\u5f15\u7684\u5b58\u50a8\u5f15\u64ce\u3002\u4e3b\u952e\u53ef\u4ee5\u662f\u4e00\u4e2a\u4efb\u610f\u7684\u5217\u6216\u8868\u8fbe\u5f0f\u7684\u5143\u7ec4\u3002<code>MergeTree</code> \u8868\u4e2d\u7684\u6570\u636e\u5b58\u50a8\u4e8e\u201c\u5206\u5757\u201d\u4e2d\u3002\u6bcf\u4e00\u4e2a\u5206\u5757\u4ee5\u4e3b\u952e\u5e8f\u5b58\u50a8\u6570\u636e\uff08\u6570\u636e\u6309\u4e3b\u952e\u5143\u7ec4\u7684\u5b57\u5178\u5e8f\u6392\u5e8f\uff09\u3002\u8868\u7684\u6240\u6709\u5217\u90fd\u5b58\u50a8\u5728\u8fd9\u4e9b\u201c\u5206\u5757\u201d\u4e2d\u5206\u79bb\u7684 <code>column.bin</code> \u6587\u4ef6\u4e2d\u3002<code>column.bin</code> \u6587\u4ef6\u7531\u538b\u7f29\u5757\u7ec4\u6210\uff0c\u6bcf\u4e00\u4e2a\u5757\u901a\u5e38\u662f 64 KB \u5230 1 MB \u5927\u5c0f\u7684\u672a\u538b\u7f29\u6570\u636e\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u5e73\u5747\u503c\u5927\u5c0f\u3002\u8fd9\u4e9b\u5757\u7531\u4e00\u4e2a\u63a5\u4e00\u4e2a\u8fde\u7eed\u653e\u7f6e\u7684\u5217\u503c\u7ec4\u6210\u3002\u6bcf\u4e00\u5217\u7684\u5217\u503c\u987a\u5e8f\u76f8\u540c\uff08\u987a\u5e8f\u7531\u4e3b\u952e\u5b9a\u4e49\uff09\uff0c\u56e0\u6b64\u5f53\u4f60\u6309\u591a\u5217\u8fdb\u884c\u8fed\u4ee3\u65f6\uff0c\u4f60\u80fd\u591f\u5f97\u5230\u76f8\u5e94\u5217\u7684\u503c\u3002</p>\n<p>\u4e3b\u952e\u672c\u8eab\u662f\u201c\u7a00\u758f\u201d\u7684\u3002\u5b83\u5e76\u4e0d\u662f\u7d22\u5f15\u5355\u4e00\u7684\u884c\uff0c\u800c\u662f\u7d22\u5f15\u67d0\u4e2a\u8303\u56f4\u5185\u7684\u6570\u636e\u3002\u4e00\u4e2a\u5355\u72ec\u7684 <code>primary.idx</code> \u6587\u4ef6\u5177\u6709\u6bcf\u4e2a\u7b2c N \u884c\u7684\u4e3b\u952e\u503c\uff0c\u5176\u4e2d N \u79f0\u4e3a <code>index_granularity</code>\uff08\u901a\u5e38\uff0cN = 8192\uff09\u3002\u540c\u65f6\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u5217\uff0c\u90fd\u6709\u5e26\u6709\u6807\u8bb0\u7684 <code>column.mrk</code> \u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u8bb0\u5f55\u7684\u662f\u6bcf\u4e2a\u7b2c N \u884c\u5728\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u504f\u79fb\u91cf\u3002\u6bcf\u4e2a\u6807\u8bb0\u662f\u4e00\u4e2a pair\uff1a\u6587\u4ef6\u4e2d\u7684\u504f\u79fb\u91cf\u5230\u538b\u7f29\u5757\u7684\u8d77\u59cb\uff0c\u4ee5\u53ca\u89e3\u538b\u7f29\u5757\u4e2d\u7684\u504f\u79fb\u91cf\u5230\u6570\u636e\u7684\u8d77\u59cb\u3002\u901a\u5e38\uff0c\u538b\u7f29\u5757\u6839\u636e\u6807\u8bb0\u5bf9\u9f50\uff0c\u5e76\u4e14\u89e3\u538b\u7f29\u5757\u4e2d\u7684\u504f\u79fb\u91cf\u4e3a 0\u3002<code>primary.idx</code> \u7684\u6570\u636e\u59cb\u7ec8\u9a7b\u7559\u5728\u5185\u5b58\uff0c\u540c\u65f6 <code>column.mrk</code> \u7684\u6570\u636e\u88ab\u7f13\u5b58\u3002</p>\n<p>\u5f53\u6211\u4eec\u8981\u4ece <code>MergeTree</code> \u7684\u4e00\u4e2a\u5206\u5757\u4e2d\u8bfb\u53d6\u90e8\u5206\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u4f1a\u67e5\u770b <code>primary.idx</code> \u6570\u636e\u5e76\u67e5\u627e\u53ef\u80fd\u5305\u542b\u6240\u8bf7\u6c42\u6570\u636e\u7684\u8303\u56f4\uff0c\u7136\u540e\u67e5\u770b <code>column.mrk</code> \u5e76\u8ba1\u7b97\u504f\u79fb\u91cf\u4ece\u800c\u5f97\u77e5\u4ece\u54ea\u91cc\u5f00\u59cb\u8bfb\u53d6\u4e9b\u8303\u56f4\u7684\u6570\u636e\u3002\u7531\u4e8e\u7a00\u758f\u6027\uff0c\u53ef\u80fd\u4f1a\u8bfb\u53d6\u989d\u5916\u7684\u6570\u636e\u3002ClickHouse \u4e0d\u9002\u7528\u4e8e\u9ad8\u8d1f\u8f7d\u7684\u7b80\u5355\u70b9\u67e5\u8be2\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u952e\uff0c\u6574\u4e2a <code>index_granularity</code> \u8303\u56f4\u7684\u884c\u7684\u6570\u636e\u90fd\u9700\u8981\u8bfb\u53d6\uff0c\u5e76\u4e14\u5bf9\u4e8e\u6bcf\u4e00\u5217\u9700\u8981\u89e3\u538b\u7f29\u6574\u4e2a\u538b\u7f29\u5757\u3002\u6211\u4eec\u4f7f\u7d22\u5f15\u7a00\u758f\uff0c\u662f\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u5355\u4e00\u7684\u670d\u52a1\u5668\u9700\u8981\u5728\u7d22\u5f15\u6ca1\u6709\u660e\u663e\u5185\u5b58\u6d88\u8017\u7684\u60c5\u51b5\u4e0b\uff0c\u7ef4\u62a4\u6570\u4e07\u4ebf\u884c\u7684\u6570\u636e\u3002\u53e6\u5916\uff0c\u7531\u4e8e\u4e3b\u952e\u662f\u7a00\u758f\u7684\uff0c\u5bfc\u81f4\u5176\u4e0d\u662f\u552f\u4e00\u7684\uff1a\u65e0\u6cd5\u5728 INSERT \u65f6\u68c0\u67e5\u4e00\u4e2a\u952e\u5728\u8868\u4e2d\u662f\u5426\u5b58\u5728\u3002\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u8868\u4e2d\u4f7f\u7528\u540c\u4e00\u4e2a\u952e\u521b\u5efa\u591a\u4e2a\u884c\u3002</p>\n<p>\u5f53\u4f60\u5411 <code>MergeTree</code> \u4e2d\u63d2\u5165\u4e00\u5806\u6570\u636e\u65f6\uff0c\u6570\u636e\u6309\u4e3b\u952e\u6392\u5e8f\u5e76\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u5206\u5757\u3002\u4e3a\u4e86\u4fdd\u8bc1\u5206\u5757\u7684\u6570\u91cf\u76f8\u5bf9\u8f83\u5c11\uff0c\u6709\u540e\u53f0\u7ebf\u7a0b\u5b9a\u671f\u9009\u62e9\u4e00\u4e9b\u5206\u5757\u5e76\u5c06\u5b83\u4eec\u5408\u5e76\u6210\u4e00\u4e2a\u6709\u5e8f\u7684\u5206\u5757\uff0c\u8fd9\u5c31\u662f <code>MergeTree</code> \u7684\u540d\u79f0\u6765\u6e90\u3002\u5f53\u7136\uff0c\u5408\u5e76\u4f1a\u5bfc\u81f4\u201c\u5199\u5165\u653e\u5927\u201d\u3002\u6240\u6709\u7684\u5206\u5757\u90fd\u662f\u4e0d\u53ef\u53d8\u7684\uff1a\u5b83\u4eec\u4ec5\u4f1a\u88ab\u521b\u5efa\u548c\u5220\u9664\uff0c\u4e0d\u4f1a\u88ab\u4fee\u6539\u3002\u5f53\u8fd0\u884c <code>SELECT</code> \u67e5\u8be2\u65f6\uff0c<code>MergeTree</code> \u4f1a\u4fdd\u5b58\u4e00\u4e2a\u8868\u7684\u5feb\u7167\uff08\u5206\u5757\u96c6\u5408\uff09\u3002\u5408\u5e76\u4e4b\u540e\uff0c\u8fd8\u4f1a\u4fdd\u7559\u65e7\u7684\u5206\u5757\u4e00\u6bb5\u65f6\u95f4\uff0c\u4ee5\u4fbf\u53d1\u751f\u6545\u969c\u540e\u66f4\u5bb9\u6613\u6062\u590d\uff0c\u56e0\u6b64\u5982\u679c\u6211\u4eec\u53d1\u73b0\u67d0\u4e9b\u5408\u5e76\u540e\u7684\u5206\u5757\u53ef\u80fd\u5df2\u635f\u574f\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u66ff\u6362\u4e3a\u539f\u5206\u5757\u3002</p>\n<p><code>MergeTree</code> \u4e0d\u662f LSM \u6811\uff0c\u56e0\u4e3a\u5b83\u4e0d\u5305\u542b\u201dmemtable\u201c\u548c\u201dlog\u201c\uff1a\u63d2\u5165\u7684\u6570\u636e\u76f4\u63a5\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u3002\u8fd9\u4f7f\u5f97\u5b83\u4ec5\u9002\u7528\u4e8e\u6279\u91cf\u63d2\u5165\u6570\u636e\uff0c\u800c\u4e0d\u9002\u7528\u4e8e\u975e\u5e38\u9891\u7e41\u5730\u4e00\u884c\u4e00\u884c\u63d2\u5165 - \u5927\u7ea6\u6bcf\u79d2\u4e00\u6b21\u662f\u6ca1\u95ee\u9898\u7684\uff0c\u4f46\u662f\u6bcf\u79d2\u4e00\u5343\u6b21\u5c31\u4f1a\u6709\u95ee\u9898\u3002\u6211\u4eec\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u5728\u6211\u4eec\u7684\u5e94\u7528\u4e2d\u6279\u91cf\u63d2\u5165\u6570\u636e\u3002</p>\n<blockquote>\n<p><code>MergeTree</code> \u8868\u53ea\u80fd\u6709\u4e00\u4e2a\uff08\u4e3b\uff09\u7d22\u5f15\uff1a\u6ca1\u6709\u4efb\u4f55\u8f85\u52a9\u7d22\u5f15\u3002\u5728\u4e00\u4e2a\u903b\u8f91\u8868\u4e0b\uff0c\u5141\u8bb8\u6709\u591a\u4e2a\u7269\u7406\u8868\u793a\uff0c\u6bd4\u5982\uff0c\u53ef\u4ee5\u4ee5\u591a\u4e2a\u7269\u7406\u987a\u5e8f\u5b58\u50a8\u6570\u636e\uff0c\u6216\u8005\u540c\u65f6\u8868\u793a\u9884\u805a\u5408\u6570\u636e\u548c\u539f\u59cb\u6570\u636e\u3002</p>\n</blockquote>\n<p>\u6709\u4e9b <code>MergeTree</code> \u5f15\u64ce\u4f1a\u5728\u540e\u53f0\u5408\u5e76\u671f\u95f4\u505a\u4e00\u4e9b\u989d\u5916\u5de5\u4f5c\uff0c\u6bd4\u5982 <code>CollapsingMergeTree</code> \u548c <code>AggregatingMergeTree</code>\u3002\u8fd9\u53ef\u4ee5\u89c6\u4e3a\u5bf9\u66f4\u65b0\u7684\u7279\u6b8a\u652f\u6301\u3002\u8bf7\u8bb0\u4f4f\u8fd9\u4e9b\u4e0d\u662f\u771f\u6b63\u7684\u66f4\u65b0\uff0c\u56e0\u4e3a\u7528\u6237\u901a\u5e38\u65e0\u6cd5\u63a7\u5236\u540e\u53f0\u5408\u5e76\u5c06\u4f1a\u6267\u884c\u7684\u65f6\u95f4\uff0c\u5e76\u4e14 <code>MergeTree</code> \u4e2d\u7684\u6570\u636e\u51e0\u4e4e\u603b\u662f\u5b58\u50a8\u5728\u591a\u4e2a\u5206\u5757\u4e2d\uff0c\u800c\u4e0d\u662f\u5b8c\u5168\u5408\u5e76\u7684\u5f62\u5f0f\u3002</p>\n<h3 id=\"fu-zhi-replication\">\u590d\u5236\uff08Replication\uff09<a class=\"headerlink\" href=\"#fu-zhi-replication\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse \u4e2d\u7684\u590d\u5236\u662f\u57fa\u4e8e\u8868\u5b9e\u73b0\u7684\u3002\u4f60\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709\u4e00\u4e9b\u53ef\u590d\u5236\u7684\u8868\u548c\u4e0d\u53ef\u590d\u5236\u7684\u8868\u3002\u4f60\u4e5f\u53ef\u4ee5\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u8868\u7684\u590d\u5236\uff0c\u6bd4\u5982\u4e00\u4e2a\u8868\u8fdb\u884c\u53cc\u56e0\u5b50\u590d\u5236\uff0c\u53e6\u4e00\u4e2a\u8fdb\u884c\u4e09\u56e0\u5b50\u590d\u5236\u3002</p>\n<p>\u590d\u5236\u662f\u5728 <code>ReplicatedMergeTree</code> \u5b58\u50a8\u5f15\u64ce\u4e2d\u5b9e\u73b0\u7684\u3002<code>ZooKeeper</code> \u4e2d\u7684\u8def\u5f84\u88ab\u6307\u5b9a\u4e3a\u5b58\u50a8\u5f15\u64ce\u7684\u53c2\u6570\u3002<code>ZooKeeper</code> \u4e2d\u6240\u6709\u5177\u6709\u76f8\u540c\u8def\u5f84\u7684\u8868\u4e92\u4e3a\u526f\u672c\uff1a\u5b83\u4eec\u540c\u6b65\u6570\u636e\u5e76\u4fdd\u6301\u4e00\u81f4\u6027\u3002\u53ea\u9700\u521b\u5efa\u6216\u5220\u9664\u8868\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u52a8\u6001\u6dfb\u52a0\u6216\u5220\u9664\u526f\u672c\u3002</p>\n<p>\u590d\u5236\u4f7f\u7528\u5f02\u6b65\u591a\u4e3b\u673a\u65b9\u6848\u3002\u4f60\u53ef\u4ee5\u5c06\u6570\u636e\u63d2\u5165\u5230\u4e0e <code>ZooKeeper</code> \u8fdb\u884c\u4f1a\u8bdd\u7684\u4efb\u610f\u526f\u672c\u4e2d\uff0c\u5e76\u5c06\u6570\u636e\u590d\u5236\u5230\u6240\u6709\u5176\u5b83\u526f\u672c\u4e2d\u3002\u7531\u4e8e ClickHouse \u4e0d\u652f\u6301 UPDATEs\uff0c\u56e0\u6b64\u590d\u5236\u662f\u65e0\u51b2\u7a81\u7684\u3002\u7531\u4e8e\u6ca1\u6709\u5bf9\u63d2\u5165\u7684\u4ef2\u88c1\u786e\u8ba4\uff0c\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u53d1\u751f\u6545\u969c\uff0c\u521a\u521a\u63d2\u5165\u7684\u6570\u636e\u53ef\u80fd\u4f1a\u4e22\u5931\u3002</p>\n<p>\u7528\u4e8e\u590d\u5236\u7684\u5143\u6570\u636e\u5b58\u50a8\u5728 ZooKeeper \u4e2d\u3002\u5176\u4e2d\u4e00\u4e2a\u590d\u5236\u65e5\u5fd7\u5217\u51fa\u4e86\u8981\u6267\u884c\u7684\u64cd\u4f5c\u3002\u64cd\u4f5c\u5305\u62ec\uff1a\u83b7\u53d6\u5206\u5757\u3001\u5408\u5e76\u5206\u5757\u548c\u5220\u9664\u5206\u533a\u7b49\u3002\u6bcf\u4e00\u4e2a\u526f\u672c\u5c06\u590d\u5236\u65e5\u5fd7\u590d\u5236\u5230\u5176\u961f\u5217\u4e2d\uff0c\u7136\u540e\u6267\u884c\u961f\u5217\u4e2d\u7684\u64cd\u4f5c\u3002\u6bd4\u5982\uff0c\u5728\u63d2\u5165\u65f6\uff0c\u5728\u590d\u5236\u65e5\u5fd7\u4e2d\u521b\u5efa\u201c\u83b7\u53d6\u5206\u5757\u201d\u8fd9\u4e00\u64cd\u4f5c\uff0c\u7136\u540e\u6bcf\u4e00\u4e2a\u526f\u672c\u90fd\u4f1a\u53bb\u4e0b\u8f7d\u8be5\u5206\u5757\u3002\u6240\u6709\u526f\u672c\u4e4b\u95f4\u4f1a\u534f\u8c03\u8fdb\u884c\u5408\u5e76\u4ee5\u83b7\u5f97\u76f8\u540c\u5b57\u8282\u7684\u7ed3\u679c\u3002\u6240\u6709\u7684\u5206\u5757\u5728\u6240\u6709\u7684\u526f\u672c\u4e0a\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u5408\u5e76\u3002\u4e3a\u5b9e\u73b0\u8be5\u76ee\u7684\uff0c\u5176\u4e2d\u4e00\u4e2a\u526f\u672c\u88ab\u9009\u4e3a\u9886\u5bfc\u8005\uff0c\u8be5\u526f\u672c\u9996\u5148\u8fdb\u884c\u5408\u5e76\uff0c\u5e76\u628a\u201c\u5408\u5e76\u5206\u5757\u201d\u64cd\u4f5c\u5199\u5230\u65e5\u5fd7\u4e2d\u3002</p>\n<p>\u590d\u5236\u662f\u7269\u7406\u7684\uff1a\u53ea\u6709\u538b\u7f29\u7684\u5206\u5757\u4f1a\u5728\u8282\u70b9\u4e4b\u95f4\u4f20\u8f93\uff0c\u67e5\u8be2\u5219\u4e0d\u4f1a\u3002\u4e3a\u4e86\u964d\u4f4e\u7f51\u7edc\u6210\u672c\uff08\u907f\u514d\u7f51\u7edc\u653e\u5927\uff09\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4f1a\u5728\u6bcf\u4e00\u4e2a\u526f\u672c\u4e0a\u72ec\u7acb\u5730\u5904\u7406\u5408\u5e76\u3002\u53ea\u6709\u5728\u5b58\u5728\u663e\u8457\u7684\u5408\u5e76\u5ef6\u8fdf\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u4f1a\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u5927\u5757\u7684\u5408\u5e76\u5206\u5757\u3002</p>\n<p>\u53e6\u5916\uff0c\u6bcf\u4e00\u4e2a\u526f\u672c\u5c06\u5176\u72b6\u6001\u4f5c\u4e3a\u5206\u5757\u548c\u6821\u9a8c\u548c\u7ec4\u6210\u7684\u96c6\u5408\u5b58\u50a8\u5728 ZooKeeper \u4e2d\u3002\u5f53\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u72b6\u6001\u4e0e ZooKeeper \u4e2d\u5f15\u7528\u7684\u72b6\u6001\u4e0d\u540c\u65f6\uff0c\u8be5\u526f\u672c\u4f1a\u901a\u8fc7\u4ece\u5176\u5b83\u526f\u672c\u4e0b\u8f7d\u7f3a\u5931\u548c\u635f\u574f\u7684\u5206\u5757\u6765\u6062\u590d\u5176\u4e00\u81f4\u6027\u3002\u5f53\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u4e2d\u51fa\u73b0\u4e00\u4e9b\u610f\u5916\u6216\u635f\u574f\u7684\u6570\u636e\u65f6\uff0cClickHouse \u4e0d\u4f1a\u5c06\u5176\u5220\u9664\uff0c\u800c\u662f\u5c06\u5176\u79fb\u52a8\u5230\u4e00\u4e2a\u5355\u72ec\u7684\u76ee\u5f55\u4e0b\u5e76\u5fd8\u8bb0\u5b83\u3002</p>\n<blockquote>\n<p>ClickHouse \u96c6\u7fa4\u7531\u72ec\u7acb\u7684\u5206\u7247\u7ec4\u6210\uff0c\u6bcf\u4e00\u4e2a\u5206\u7247\u7531\u591a\u4e2a\u526f\u672c\u7ec4\u6210\u3002\u96c6\u7fa4\u4e0d\u662f\u5f39\u6027\u7684\uff0c\u56e0\u6b64\u5728\u6dfb\u52a0\u65b0\u7684\u5206\u7247\u540e\uff0c\u6570\u636e\u4e0d\u4f1a\u81ea\u52a8\u5728\u5206\u7247\u4e4b\u95f4\u91cd\u65b0\u5e73\u8861\u3002\u76f8\u53cd\uff0c\u96c6\u7fa4\u8d1f\u8f7d\u5c06\u53d8\u5f97\u4e0d\u5747\u8861\u3002\u8be5\u5b9e\u73b0\u4e3a\u4f60\u63d0\u4f9b\u4e86\u66f4\u591a\u63a7\u5236\uff0c\u5bf9\u4e8e\u76f8\u5bf9\u8f83\u5c0f\u7684\u96c6\u7fa4\uff0c\u4f8b\u5982\u53ea\u6709\u6570\u5341\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\u6765\u8bf4\u662f\u5f88\u597d\u7684\u3002\u4f46\u662f\u5bf9\u4e8e\u6211\u4eec\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528\u7684\u5177\u6709\u6570\u767e\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\u6765\u8bf4\uff0c\u8fd9\u79cd\u65b9\u6cd5\u6210\u4e3a\u4e00\u4e2a\u91cd\u5927\u7f3a\u9677\u3002\u6211\u4eec\u5e94\u8be5\u5b9e\u73b0\u4e00\u4e2a\u8868\u5f15\u64ce\uff0c\u4f7f\u5f97\u8be5\u5f15\u64ce\u80fd\u591f\u8de8\u96c6\u7fa4\u6269\u5c55\u6570\u636e\uff0c\u540c\u65f6\u5177\u6709\u52a8\u6001\u590d\u5236\u7684\u533a\u57df\uff0c\u8fd9\u4e9b\u533a\u57df\u80fd\u591f\u5728\u96c6\u7fa4\u4e4b\u95f4\u81ea\u52a8\u62c6\u5206\u548c\u5e73\u8861\u3002</p>\n</blockquote>\n<p><a name=\"../../../../../development/build/\"></a><a name=\"build/\"></a><a name=\"../../development/build/\"></a><a name=\"../../../development/build/\"></a><a name=\"development/build/\"></a><a name=\"../../../../development/build/\"></a><a name=\"../development/build/\"></a></p>\n<h2 id=\"ru-he-gou-jian-clickhouse-fa-bu-bao\">\u5982\u4f55\u6784\u5efa ClickHouse \u53d1\u5e03\u5305<a class=\"headerlink\" href=\"#ru-he-gou-jian-clickhouse-fa-bu-bao\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"an-zhuang-git-he-pbuilder\">\u5b89\u88c5 Git \u548c Pbuilder<a class=\"headerlink\" href=\"#an-zhuang-git-he-pbuilder\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>sudo apt-get update\nsudo apt-get install git pbu");
            
            document.write("ilder debhelper lsb-release fakeroot sudo debian-archive-keyring debian-keyring\n</code></pre></div>\n\n\n<h3 id=\"la-qu-clickhouse-yuan-ma\">\u62c9\u53d6 ClickHouse \u6e90\u7801<a class=\"headerlink\" href=\"#la-qu-clickhouse-yuan-ma\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>git clone --recursive --branch stable https://github.com/yandex/ClickHouse.git\n<span class=\"nb\">cd</span> ClickHouse\n</code></pre></div>\n\n\n<h3 id=\"yun-xing-fa-bu-jiao-ben\">\u8fd0\u884c\u53d1\u5e03\u811a\u672c<a class=\"headerlink\" href=\"#yun-xing-fa-bu-jiao-ben\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>./release\n</code></pre></div>\n\n\n<h2 id=\"ru-he-zai-kai-fa-guo-cheng-zhong-bian-yi-clickhouse\">\u5982\u4f55\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7f16\u8bd1 ClickHouse<a class=\"headerlink\" href=\"#ru-he-zai-kai-fa-guo-cheng-zhong-bian-yi-clickhouse\" title=\"Permanent link\">&para;</a></h2>\n<p>\u4ee5\u4e0b\u6559\u7a0b\u662f\u5728 Ubuntu Linux \u4e2d\u8fdb\u884c\u7f16\u8bd1\u7684\u793a\u4f8b\u3002<br />\n\u901a\u8fc7\u9002\u5f53\u7684\u66f4\u6539\uff0c\u5b83\u5e94\u8be5\u53ef\u4ee5\u9002\u7528\u4e8e\u4efb\u4f55\u5176\u4ed6\u7684 Linux \u53d1\u884c\u7248\u3002<br />\n\u4ec5\u652f\u6301\u5177\u6709 SSE 4.2\u7684 x86_64\u3002 \u5bf9 AArch64 \u7684\u652f\u6301\u662f\u5b9e\u9a8c\u6027\u7684\u3002</p>\n<p>\u6d4b\u8bd5\u662f\u5426\u652f\u6301 SSE 4.2\uff0c\u6267\u884c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>grep -q sse4_2 /proc/cpuinfo <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SSE 4.2 supported&quot;</span> <span class=\"o\">||</span> <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SSE 4.2 not supported&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"an-zhuang-git-he-cmake\">\u5b89\u88c5 Git \u548c CMake<a class=\"headerlink\" href=\"#an-zhuang-git-he-cmake\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>sudo apt-get install git cmake ninja-build\n</code></pre></div>\n\n\n<p>Or cmake3 instead of cmake on older systems.<br />\n\u6216\u8005\u5728\u65e9\u671f\u7248\u672c\u7684\u7cfb\u7edf\u4e2d\u7528 cmake3 \u66ff\u4ee3 cmake</p>\n<h3 id=\"an-zhuang-gcc-7\">\u5b89\u88c5 GCC 7<a class=\"headerlink\" href=\"#an-zhuang-gcc-7\" title=\"Permanent link\">&para;</a></h3>\n<p>There are several ways to do this.</p>\n<h4 id=\"an-zhuang-ppa-bao\">\u5b89\u88c5 PPA \u5305<a class=\"headerlink\" href=\"#an-zhuang-ppa-bao\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code>sudo apt-get install software-properties-common\nsudo apt-add-repository ppa:ubuntu-toolchain-r/test\nsudo apt-get update\nsudo apt-get install gcc-7 g++-7\n</code></pre></div>\n\n\n<h4 id=\"yuan-ma-an-zhuang-gcc\">\u6e90\u7801\u5b89\u88c5 gcc<a class=\"headerlink\" href=\"#yuan-ma-an-zhuang-gcc\" title=\"Permanent link\">&para;</a></h4>\n<p>\u8bf7\u67e5\u770b <a href=\"https://github.com/yandex/ClickHouse/blob/master/utils/ci/build-gcc-from-sources.sh\" rel=\"external nofollow noreferrer\">utils/ci/build-gcc-from-sources.sh</a></p>\n<h3 id=\"shi-yong-gcc-7-lai-bian-yi\">\u4f7f\u7528 GCC 7 \u6765\u7f16\u8bd1<a class=\"headerlink\" href=\"#shi-yong-gcc-7-lai-bian-yi\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">export</span> <span class=\"nv\">CC</span><span class=\"o\">=</span>gcc-7\n<span class=\"nb\">export</span> <span class=\"nv\">CXX</span><span class=\"o\">=</span>g++-7\n</code></pre></div>\n\n\n<h3 id=\"an-zhuang-suo-xu-de-gong-ju-yi-lai-ku\">\u5b89\u88c5\u6240\u9700\u7684\u5de5\u5177\u4f9d\u8d56\u5e93<a class=\"headerlink\" href=\"#an-zhuang-suo-xu-de-gong-ju-yi-lai-ku\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>sudo apt-get install libicu-dev libreadline-dev\n</code></pre></div>\n\n\n<h3 id=\"la-qu-clickhouse-yuan-ma_1\">\u62c9\u53d6 ClickHouse \u6e90\u7801<a class=\"headerlink\" href=\"#la-qu-clickhouse-yuan-ma_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>git clone --recursive git@github.com:yandex/ClickHouse.git\n<span class=\"c1\">## or: git clone --recursive https://github.com/yandex/ClickHouse.git</span>\n\n<span class=\"nb\">cd</span> ClickHouse\n</code></pre></div>\n\n\n<p>For the latest stable version, switch to the <code>stable</code> branch.</p>\n<h3 id=\"bian-yi-clickhouse\">\u7f16\u8bd1 ClickHouse<a class=\"headerlink\" href=\"#bian-yi-clickhouse\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>mkdir build\n<span class=\"nb\">cd</span> build\ncmake ..\nninja\n<span class=\"nb\">cd</span> ..\n</code></pre></div>\n\n\n<p>\u82e5\u8981\u521b\u5efa\u4e00\u4e2a\u6267\u884c\u6587\u4ef6\uff0c \u6267\u884c <code>ninja clickhouse</code>\u3002<br />\n\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u4f7f\u5f97 <code>dbms/programs/clickhouse</code> \u6587\u4ef6\u53ef\u6267\u884c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>client</code> or <code>server</code> \u53c2\u6570\u8fd0\u884c\u3002</p>\n<p><a name=\"../../../../development/build_osx/\"></a><a name=\"build_osx/\"></a><a name=\"../../development/build_osx/\"></a><a name=\"../../../development/build_osx/\"></a><a name=\"../development/build_osx/\"></a><a name=\"../../../../../development/build_osx/\"></a><a name=\"development/build_osx/\"></a></p>\n<h2 id=\"zai-mac-os-x-zhong-bian-yi-clickhouse\">\u5728 Mac OS X \u4e2d\u7f16\u8bd1 ClickHouse<a class=\"headerlink\" href=\"#zai-mac-os-x-zhong-bian-yi-clickhouse\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse \u652f\u6301\u5728 Mac OS X 10.12 \u7248\u672c\u4e2d\u7f16\u8bd1\u3002\u82e5\u60a8\u5728\u7528\u66f4\u65e9\u7684\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5728\u6307\u4ee4\u4e2d\u4f7f\u7528 <code>Gentoo Prefix</code> \u548c <code>clang sl</code>.<br />\n\u901a\u8fc7\u9002\u5f53\u7684\u66f4\u6539\uff0c\u5b83\u5e94\u8be5\u53ef\u4ee5\u9002\u7528\u4e8e\u4efb\u4f55\u5176\u4ed6\u7684 Linux \u53d1\u884c\u7248\u3002</p>\n<h3 id=\"an-zhuang-homebrew\">\u5b89\u88c5 Homebrew<a class=\"headerlink\" href=\"#an-zhuang-homebrew\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>/usr/bin/ruby -e <span class=\"s2\">&quot;</span><span class=\"k\">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class=\"k\">)</span><span class=\"s2\">&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"an-zhuang-bian-yi-qi-gong-ju-ku\">\u5b89\u88c5\u7f16\u8bd1\u5668\uff0c\u5de5\u5177\u5e93<a class=\"headerlink\" href=\"#an-zhuang-bian-yi-qi-gong-ju-ku\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>brew install cmake ninja gcc icu4c mariadb-connector-c openssl libtool gettext readline\n</code></pre></div>\n\n\n<h3 id=\"la-qu-clickhouse-yuan-ma_2\">\u62c9\u53d6 ClickHouse \u6e90\u7801<a class=\"headerlink\" href=\"#la-qu-clickhouse-yuan-ma_2\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>git clone --recursive git@github.com:yandex/ClickHouse.git\n<span class=\"c1\">## or: git clone --recursive https://github.com/yandex/ClickHouse.git</span>\n\n<span class=\"nb\">cd</span> ClickHouse\n</code></pre></div>\n\n\n<p>For the latest stable version, switch to the <code>stable</code> branch.</p>\n<h3 id=\"bian-yi-clickhouse_1\">\u7f16\u8bd1 ClickHouse<a class=\"headerlink\" href=\"#bian-yi-clickhouse_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>mkdir build\n<span class=\"nb\">cd</span> build\ncmake .. -DCMAKE_CXX_COMPILER<span class=\"o\">=</span><span class=\"sb\">`</span>which g++-8<span class=\"sb\">`</span> -DCMAKE_C_COMPILER<span class=\"o\">=</span><span class=\"sb\">`</span>which gcc-8<span class=\"sb\">`</span>\nninja\n<span class=\"nb\">cd</span> ..\n</code></pre></div>\n\n\n<h3 id=\"zhu-yi-shi-xiang_1\">\u6ce8\u610f\u4e8b\u9879<a class=\"headerlink\" href=\"#zhu-yi-shi-xiang_1\" title=\"Permanent link\">&para;</a></h3>\n<p>\u82e5\u4f60\u60f3\u8fd0\u884c clickhouse-server\uff0c\u8bf7\u5148\u786e\u4fdd\u589e\u52a0\u7cfb\u7edf\u7684\u6700\u5927\u6587\u4ef6\u6570\u914d\u7f6e\u3002</p>\n<div class=\"admonition \u6ce8\u610f\">\n<p class=\"admonition-title\">\u6ce8\u610f</p>\n<p>\u53ef\u80fd\u9700\u8981\u7528 sudo</p>\n</div>\n<p>\u4e3a\u6b64\uff0c\u8bf7\u521b\u5efa\u4ee5\u4e0b\u6587\u4ef6\uff1a</p>\n<p>/Library/LaunchDaemons/limit.maxfiles.plist:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"cp\">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot;</span>\n<span class=\"cp\">        &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>\n<span class=\"nt\">&lt;plist</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.0&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;dict&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>Label<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;string&gt;</span>limit.maxfiles<span class=\"nt\">&lt;/string&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>ProgramArguments<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;array&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>launchctl<span class=\"nt\">&lt;/string&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>limit<span class=\"nt\">&lt;/string&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>maxfiles<span class=\"nt\">&lt;/string&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>524288<span class=\"nt\">&lt;/string&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>524288<span class=\"nt\">&lt;/string&gt;</span>\n    <span class=\"nt\">&lt;/array&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>RunAtLoad<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;true/&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>ServiceIPC<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;false/&gt;</span>\n  <span class=\"nt\">&lt;/dict&gt;</span>\n<span class=\"nt\">&lt;/plist&gt;</span>\n</code></pre></div>\n\n\n<p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo chown root:wheel /Library/LaunchDaemons/limit.maxfiles.plist\n</code></pre></div>\n\n\n<p>\u7136\u540e\u91cd\u542f\u3002</p>\n<p>\u53ef\u4ee5\u901a\u8fc7 <code>ulimit -n</code> \u547d\u4ee4\u6765\u68c0\u67e5\u662f\u5426\u751f\u6548\u3002</p>\n<p><a name=\"../../../../../development/build_cross/\"></a><a name=\"../../../development/build_cross/\"></a><a name=\"../../../../development/build_cross/\"></a><a name=\"development/build_cross/\"></a><a name=\"../../development/build_cross/\"></a><a name=\"build_cross/\"></a><a name=\"../development/build_cross/\"></a></p>\n<h2 id=\"how-to-build-clickhouse-on-linux-for-mac-os-x\">How to Build ClickHouse on Linux for Mac OS X<a class=\"headerlink\" href=\"#how-to-build-clickhouse-on-linux-for-mac-os-x\" title=\"Permanent link\">&para;</a></h2>\n<p>This is for the case when you have Linux machine and want to use it to build <code>clickhouse</code> binary that will run on OS X. This is intended for continuous integration checks that run on Linux servers. If you want to build ClickHouse directly on Mac OS X, then proceed with another instruction: <a href=\"https://clickhouse.yandex/docs/en/development/build_osx/\">https://clickhouse.yandex/docs/en/development/build_osx/</a></p>\n<p>The cross-build for Mac OS X is based on the Build instructions, follow them first.</p>\n<h2 id=\"install-clang-8\">Install Clang-8<a class=\"headerlink\" href=\"#install-clang-8\" title=\"Permanent link\">&para;</a></h2>\n<p>Follow the instructions from <a href=\"https://apt.llvm.org/\">https://apt.llvm.org/</a> for your Ubuntu or Debian setup.<br />\nFor example the commands for Bionic are like:</p>\n<div class=\"codehilite\"><pre><span></span><code>sudo <span class=\"nb\">echo</span> <span class=\"s2\">&quot;deb [trusted=yes] http://apt.llvm.org/bionic/ llvm-toolchain-bionic-8 main&quot;</span> &gt;&gt; /etc/apt/sources.list\nsudo apt-get install");
            
            document.write(" clang-8\n</code></pre></div>\n\n\n<h2 id=\"install-cross-compilation-toolset\">Install Cross-Compilation Toolset<a class=\"headerlink\" href=\"#install-cross-compilation-toolset\" title=\"Permanent link\">&para;</a></h2>\n<p>Let's remember the path where we install <code>cctools</code> as ${CCTOOLS}</p>\n<div class=\"codehilite\"><pre><span></span><code>mkdir <span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span>\n\ngit clone https://github.com/tpoechtrager/apple-libtapi.git\n<span class=\"nb\">cd</span> apple-libtapi\n<span class=\"nv\">INSTALLPREFIX</span><span class=\"o\">=</span><span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span> ./build.sh\n./install.sh\n<span class=\"nb\">cd</span> ..\n\ngit clone https://github.com/tpoechtrager/cctools-port.git\n<span class=\"nb\">cd</span> cctools-port/cctools\n./configure --prefix<span class=\"o\">=</span><span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span> --with-libtapi<span class=\"o\">=</span><span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span> --target<span class=\"o\">=</span>x86_64-apple-darwin\nmake install\n\n<span class=\"nb\">cd</span> <span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span>\nwget https://github.com/phracker/MacOSX-SDKs/releases/download/10.14-beta4/MacOSX10.14.sdk.tar.xz\ntar xJf MacOSX10.14.sdk.tar.xz\n</code></pre></div>\n\n\n<h2 id=\"build-clickhouse\">Build ClickHouse<a class=\"headerlink\" href=\"#build-clickhouse\" title=\"Permanent link\">&para;</a></h2>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">cd</span> ClickHouse\nmkdir build-osx\n<span class=\"nv\">CC</span><span class=\"o\">=</span>clang-8 <span class=\"nv\">CXX</span><span class=\"o\">=</span>clang++-8 cmake . -Bbuild-osx -DCMAKE_SYSTEM_NAME<span class=\"o\">=</span>Darwin <span class=\"se\">\\</span>\n    -DCMAKE_AR:FILEPATH<span class=\"o\">=</span><span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span>/bin/x86_64-apple-darwin-ar <span class=\"se\">\\</span>\n    -DCMAKE_RANLIB:FILEPATH<span class=\"o\">=</span><span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span>/bin/x86_64-apple-darwin-ranlib <span class=\"se\">\\</span>\n    -DLINKER_NAME<span class=\"o\">=</span><span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span>/bin/x86_64-apple-darwin-ld <span class=\"se\">\\</span>\n    -DSDK_PATH<span class=\"o\">=</span><span class=\"si\">${</span><span class=\"nv\">CCTOOLS</span><span class=\"si\">}</span>/MacOSX10.14.sdk\nninja -C build-osx\n</code></pre></div>\n\n\n<p>The resulting binary will have Mach-O executable format and can't be run on Linux.<br />\n<a name=\"../development/style/\"></a><a name=\"../../../development/style/\"></a><a name=\"../../../../../development/style/\"></a><a name=\"../../../../development/style/\"></a><a name=\"development/style/\"></a><a name=\"../../development/style/\"></a><a name=\"style/\"></a></p>\n<h2 id=\"ru-he-bian-xie-c-dai-ma\">\u5982\u4f55\u7f16\u5199 C++ \u4ee3\u7801<a class=\"headerlink\" href=\"#ru-he-bian-xie-c-dai-ma\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"yi-ban-jian-yi\">\u4e00\u822c\u5efa\u8bae<a class=\"headerlink\" href=\"#yi-ban-jian-yi\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u4ee5\u4e0b\u662f\u5efa\u8bae\uff0c\u800c\u4e0d\u662f\u8981\u6c42\u3002</p>\n<p><strong>2.</strong> \u5982\u679c\u4f60\u5728\u4fee\u6539\u4ee3\u7801\uff0c\u9075\u5b88\u5df2\u6709\u7684\u98ce\u683c\u662f\u6709\u610f\u4e49\u7684\u3002</p>\n<p><strong>3.</strong> \u4ee3\u7801\u7684\u98ce\u683c\u9700\u4fdd\u6301\u4e00\u81f4\u3002\u4e00\u81f4\u7684\u98ce\u683c\u6709\u5229\u4e8e\u9605\u8bfb\u4ee3\u7801\uff0c\u5e76\u4e14\u65b9\u4fbf\u68c0\u7d22\u4ee3\u7801\u3002</p>\n<p><strong>4.</strong> \u8bb8\u591a\u89c4\u5219\u6ca1\u6709\u903b\u8f91\u539f\u56e0\uff1b \u5b83\u4eec\u662f\u7531\u65e2\u5b9a\u7684\u505a\u6cd5\u51b3\u5b9a\u7684\u3002</p>\n<h3 id=\"ge-shi-hua\">\u683c\u5f0f\u5316<a class=\"headerlink\" href=\"#ge-shi-hua\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u5927\u591a\u6570\u683c\u5f0f\u5316\u53ef\u4ee5\u7528 <code>clang-format</code> \u81ea\u52a8\u5b8c\u6210\u3002</p>\n<p><strong>2.</strong> \u7f29\u8fdb\u662f4\u4e2a\u7a7a\u683c\u3002 \u914d\u7f6e\u5f00\u53d1\u73af\u5883\uff0c\u4f7f\u5f97 TAB \u4ee3\u8868\u6dfb\u52a0\u56db\u4e2a\u7a7a\u683c\u3002</p>\n<p><strong>3.</strong> \u5de6\u53f3\u82b1\u62ec\u53f7\u9700\u5728\u5355\u72ec\u7684\u884c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kr\">inline</span> <span class=\"kt\">void</span> <span class=\"nf\">readBoolText</span><span class=\"p\">(</span><span class=\"kt\">bool</span> <span class=\"o\">&amp;</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">ReadBuffer</span> <span class=\"o\">&amp;</span> <span class=\"n\">buf</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"kt\">char</span> <span class=\"n\">tmp</span> <span class=\"o\">=</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">;</span>\n    <span class=\"n\">readChar</span><span class=\"p\">(</span><span class=\"n\">tmp</span><span class=\"p\">,</span> <span class=\"n\">buf</span><span class=\"p\">);</span>\n    <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"n\">tmp</span> <span class=\"o\">!=</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>4.</strong> \u82e5\u6574\u4e2a\u65b9\u6cd5\u4f53\u4ec5\u6709\u4e00\u884c <code>\u63cf\u8ff0</code>\uff0c \u5219\u53ef\u4ee5\u653e\u5230\u5355\u72ec\u7684\u884c\u4e0a\u3002 \u5728\u82b1\u62ec\u53f7\u5468\u56f4\u653e\u7f6e\u7a7a\u683c\uff08\u9664\u4e86\u884c\u5c3e\u7684\u7a7a\u683c\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kr\">inline</span> <span class=\"kt\">size_t</span> <span class=\"nf\">mask</span><span class=\"p\">()</span> <span class=\"k\">const</span>                <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"n\">buf_size</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">;</span> <span class=\"p\">}</span>\n<span class=\"kr\">inline</span> <span class=\"kt\">size_t</span> <span class=\"nf\">place</span><span class=\"p\">(</span><span class=\"n\">HashValue</span> <span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"k\">const</span>    <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"n\">x</span> <span class=\"o\">&amp;</span> <span class=\"n\">mask</span><span class=\"p\">();</span> <span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>5.</strong> \u5bf9\u4e8e\u51fd\u6570\u3002 \u4e0d\u8981\u5728\u62ec\u53f7\u5468\u56f4\u653e\u7f6e\u7a7a\u683c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">void</span> <span class=\"n\">reinsert</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">Value</span> <span class=\"o\">&amp;</span> <span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">memcpy</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">buf</span><span class=\"p\">[</span><span class=\"n\">place_value</span><span class=\"p\">],</span> <span class=\"o\">&amp;</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">));</span>\n</code></pre></div>\n\n\n<p><strong>6.</strong> \u5728<code>if</code>\uff0c<code>for</code>\uff0c<code>while</code>\u548c\u5176\u4ed6\u8868\u8fbe\u5f0f\u4e2d\uff0c\u5728\u5f00\u62ec\u53f7\u524d\u9762\u63d2\u5165\u4e00\u4e2a\u7a7a\u683c\uff08\u4e0e\u51fd\u6570\u58f0\u660e\u76f8\u53cd\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kt\">size_t</span> <span class=\"n\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"n\">i</span> <span class=\"o\">&lt;</span> <span class=\"n\">rows</span><span class=\"p\">;</span> <span class=\"n\">i</span> <span class=\"o\">+=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"n\">index_granularity</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>7.</strong> \u5728\u4e8c\u5143\u8fd0\u7b97\u7b26\uff08<code>+</code>\uff0c<code>-</code>\uff0c<code>*</code>\uff0c<code>/</code>\uff0c<code>\uff05</code>\uff0c...\uff09\u548c\u4e09\u5143\u8fd0\u7b97\u7b26 <code>?:</code> \u5468\u56f4\u6dfb\u52a0\u7a7a\u683c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">UInt16</span> <span class=\"n\">year</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">100</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">10</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">);</span>\n<span class=\"n\">UInt8</span> <span class=\"n\">month</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">10</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">);</span>\n<span class=\"n\">UInt8</span> <span class=\"n\">day</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">8</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">10</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">9</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p><strong>8.</strong> \u82e5\u6709\u6362\u884c\uff0c\u65b0\u884c\u5e94\u8be5\u4ee5\u8fd0\u7b97\u7b26\u5f00\u5934\uff0c\u5e76\u4e14\u589e\u52a0\u5bf9\u5e94\u7684\u7f29\u8fdb\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">elapsed_ns</span><span class=\"p\">)</span>\n    <span class=\"n\">message</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; (&quot;</span>\n        <span class=\"o\">&lt;&lt;</span> <span class=\"n\">rows_read_on_server</span> <span class=\"o\">*</span> <span class=\"mi\">1000000000</span> <span class=\"o\">/</span> <span class=\"n\">elapsed_ns</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; rows/s., &quot;</span>\n        <span class=\"o\">&lt;&lt;</span> <span class=\"n\">bytes_read_on_server</span> <span class=\"o\">*</span> <span class=\"mf\">1000.0</span> <span class=\"o\">/</span> <s");
            
            document.write("pan class=\"n\">elapsed_ns</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; MB/s.) &quot;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>9.</strong> \u5982\u679c\u9700\u8981\uff0c\u53ef\u4ee5\u5728\u4e00\u884c\u5185\u4f7f\u7528\u7a7a\u683c\u6765\u5bf9\u9f50\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dst</span><span class=\"p\">.</span><span class=\"n\">ClickLogID</span>         <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"p\">.</span><span class=\"n\">LogID</span><span class=\"p\">;</span>\n<span class=\"n\">dst</span><span class=\"p\">.</span><span class=\"n\">ClickEventID</span>       <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"p\">.</span><span class=\"n\">EventID</span><span class=\"p\">;</span>\n<span class=\"n\">dst</span><span class=\"p\">.</span><span class=\"n\">ClickGoodEvent</span>     <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"p\">.</span><span class=\"n\">GoodEvent</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>10.</strong> \u4e0d\u8981\u5728 <code>.</code>\uff0c<code>-&gt;</code> \u5468\u56f4\u52a0\u5165\u7a7a\u683c</p>\n<p>\u5982\u6709\u5fc5\u8981\uff0c\u8fd0\u7b97\u7b26\u53ef\u4ee5\u5305\u88f9\u5230\u4e0b\u4e00\u884c\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u524d\u9762\u7684\u504f\u79fb\u91cf\u589e\u52a0\u3002</p>\n<p><strong>11.</strong> \u4e0d\u8981\u4f7f\u7528\u7a7a\u683c\u6765\u5206\u5f00\u4e00\u5143\u8fd0\u7b97\u7b26 (<code>--</code>, <code>++</code>, <code>*</code>, <code>&amp;</code>, ...) \u548c\u53c2\u6570\u3002</p>\n<p><strong>12.</strong> \u5728\u9017\u53f7\u540e\u9762\u52a0\u4e00\u4e2a\u7a7a\u683c\uff0c\u800c\u4e0d\u662f\u5728\u4e4b\u524d\u3002\u540c\u6837\u7684\u89c4\u5219\u4e5f\u9002\u5408 <code>for</code> \u5faa\u73af\u4e2d\u7684\u5206\u53f7\u3002</p>\n<p><strong>13.</strong> \u4e0d\u8981\u7528\u7a7a\u683c\u5206\u5f00 <code>[]</code> \u8fd0\u7b97\u7b26\u3002</p>\n<p><strong>14.</strong> \u5728 <code>template &lt;...&gt;</code> \u8868\u8fbe\u5f0f\u4e2d\uff0c\u5728 <code>template</code> \u548c <code>&lt;</code> \u4e2d\u52a0\u5165\u4e00\u4e2a\u7a7a\u683c\uff0c\u5728 <code>&lt;</code> \u540e\u9762\u6216\u5728 <code>&gt;</code> \u524d\u9762\u90fd\u4e0d\u8981\u6709\u7a7a\u683c\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">template</span> <span class=\"o\">&lt;</span><span class=\"k\">typename</span> <span class=\"n\">TKey</span><span class=\"p\">,</span> <span class=\"k\">typename</span> <span class=\"n\">TValue</span><span class=\"o\">&gt;</span>\n<span class=\"k\">struct</span> <span class=\"n\">AggregatedStatElement</span>\n<span class=\"p\">{}</span>\n</code></pre></div>\n\n\n<p><strong>15.</strong> \u5728\u7c7b\u548c\u7ed3\u6784\u4f53\u4e2d\uff0c <code>public</code>\uff0c <code>private</code> \u4ee5\u53ca <code>protected</code> \u540c <code>class/struct</code> \u65e0\u9700\u7f29\u8fdb\uff0c\u5176\u4ed6\u4ee3\u7801\u987b\u7f29\u8fdb\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">template</span> <span class=\"o\">&lt;</span><span class=\"k\">typename</span> <span class=\"n\">T</span><span class=\"o\">&gt;</span>\n<span class=\"k\">class</span> <span class=\"nc\">MultiVersion</span>\n<span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:</span>\n    <span class=\"c1\">/// Version of object for usage. shared_ptr manage lifetime of version.</span>\n    <span class=\"k\">using</span> <span class=\"n\">Version</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"k\">const</span> <span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"p\">;</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>16.</strong> \u5982\u679c\u5bf9\u6574\u4e2a\u6587\u4ef6\u4f7f\u7528\u76f8\u540c\u7684 <code>namespace</code>\uff0c\u5e76\u4e14\u6ca1\u6709\u5176\u4ed6\u91cd\u8981\u7684\u4e1c\u897f\uff0c\u5219 <code>namespace</code> \u4e2d\u4e0d\u9700\u8981\u504f\u79fb\u91cf\u3002</p>\n<p><strong>17.</strong> \u5728 <code>if</code>, <code>for</code>, <code>while</code> \u4e2d\u5305\u88f9\u7684\u4ee3\u7801\u5757\u4e2d\uff0c\u82e5\u4ee3\u7801\u662f\u4e00\u4e2a\u5355\u884c\u7684 <code>statement</code>\uff0c\u90a3\u4e48\u5927\u62ec\u53f7\u662f\u53ef\u9009\u7684\u3002 \u53ef\u4ee5\u5c06 <code>statement</code> \u653e\u5230\u4e00\u884c\u4e2d\u3002\u8fd9\u4e2a\u89c4\u5219\u540c\u6837\u9002\u7528\u4e8e\u5d4c\u5957\u7684 <code>if</code>\uff0c <code>for</code>\uff0c <code>while</code>\uff0c ...</p>\n<p>\u4f46\u662f\u5982\u679c\u5185\u90e8 <code>statement</code> \u5305\u542b\u5927\u62ec\u53f7\u6216 <code>else</code>\uff0c\u5219\u5916\u90e8\u5757\u5e94\u8be5\u7528\u5927\u62ec\u53f7\u62ec\u8d77\u6765\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// Finish write.</span>\n<span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"k\">auto</span> <span class=\"o\">&amp;</span> <span class=\"nl\">stream</span> <span class=\"p\">:</span> <span class=\"n\">streams</span><span class=\"p\">)</span>\n    <span class=\"n\">stream</span><span class=\"p\">.</span><span class=\"n\">second</span><span class=\"o\">-&gt;</span><span class=\"n\">finalize</span><span class=\"p\">();</span>\n</code></pre></div>\n\n\n<p><strong>18.</strong> \u884c\u7684\u67d0\u5c3e\u4e0d\u5e94\u8be5\u5305\u542b\u7a7a\u683c\u3002</p>\n<p><strong>19.</strong> \u6e90\u6587\u4ef6\u5e94\u8be5\u7528 UTF-8 \u7f16\u7801\u3002</p>\n<p><strong>20.</strong> \u975eASCII\u5b57\u7b26\u53ef\u7528\u4e8e\u5b57\u7b26\u4e32\u6587\u5b57\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;, &quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"p\">(</span><span class=\"n\">timer</span><span class=\"p\">.</span><span class=\"n\">elapsed</span><span class=\"p\">()</span> <span class=\"o\">/</span> <span class=\"n\">chunks_stats</span><span class=\"p\">.</span><span class=\"n\">hits</span><span class=\"p\">)</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; \u03bcsec/hit.&quot;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>21</strong> \u4e0d\u8981\u5728\u4e00\u884c\u4e2d\u5199\u5165\u591a\u4e2a\u8868\u8fbe\u5f0f\u3002</p>\n<p><strong>22.</strong> \u5c06\u51fd\u6570\u5185\u90e8\u7684\u4ee3\u7801\u6bb5\u5206\u7ec4\uff0c\u5e76\u5c06\u5b83\u4eec\u4e0e\u4e0d\u8d85\u8fc7\u4e00\u884c\u7684\u7a7a\u884c\u5206\u5f00\u3002</p>\n<p><strong>23.</strong> \u5c06 \u51fd\u6570\uff0c\u7c7b\u7528\u4e00\u4e2a\u6216\u4e24\u4e2a\u7a7a\u884c\u5206\u5f00\u3002</p>\n<p><strong>24.</strong> <code>const</code> \u5fc5\u987b\u5199\u5728\u7c7b\u578b\u540d\u79f0\u4e4b\u524d\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//correct</span>\n<span class=\"k\">const</span> <span class=\"kt\">char</span> <span class=\"o\">*</span> <span class=\"n\">pos</span>\n<span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span> <span class=\"n\">s</span>\n<span class=\"c1\">//incorrect</span>\n<span class=\"kt\">char</span> <span class=\"k\">const</span> <span class=\"o\">*</span> <span class=\"n\">pos</span>\n</code></pre></div>\n\n\n<p><strong>25.</strong> \u58f0\u660e\u6307\u9488\u6216\u5f15\u7528\u65f6\uff0c<code>*</code> \u548c <code>\uff06</code> \u7b26\u53f7\u4e24\u8fb9\u5e94\u8be5\u90fd\u7528\u7a7a\u683c\u5206\u9694\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//correct</span>\n<span class=\"k\">const</span> <span class=\"kt\">char</span> <span class=\"o\">*</span> <span class=\"n\">pos</span>\n<span class=\"c1\">//incorrect</span>\n<span class=\"k\">const</span> <span class=\"kt\">char</span><span class=\"o\">*</span> <span class=\"n\">pos</span>\n<span class=\"k\">const</span> <span class=\"kt\">char</span> <span class=\"o\">*</span><span class=\"n\">pos</span>\n</code></pre></div>\n\n\n<p><strong>26.</strong> \u4f7f\u7528\u6a21\u677f\u7c7b\u578b\u65f6\uff0c\u4f7f\u7528 <code>using</code> \u5173\u952e\u5b57\u5bf9\u5b83\u4eec\u8fdb\u884c\u522b\u540d\uff08\u6700\u7b80\u5355\u7684\u60c5\u51b5\u9664\u5916\uff09\u3002</p>\n<p>\u6362\u53e5\u8bdd\u8bf4\uff0c\u6a21\u677f\u53c2\u6570\u4ec5\u5728 <code>using</code> \u4e2d\u6307\u5b9a\uff0c\u5e76\u4e14\u4e0d\u5728\u4ee3\u7801\u4e2d\u91cd\u590d\u3002</p>\n<p><code>using</code>\u53ef\u4ee5\u5728\u672c\u5730\u58f0\u660e\uff0c\u4f8b\u5982\u5728\u51fd\u6570\u5185\u90e8\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//correct</span>\n<span class=\"k\">using</span> <span class=\"n\">FileStreams</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">map</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">,</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">Stream</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">;</span>\n<span class=\"n\">FileStreams</span> <span class=\"n\">streams</span><span class=\"p\">;</span>\n<span class=\"c1\">//incorrect</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">map</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">,</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">Stream</span><span class=\"o\">&gt;&gt;</span> <span class=\"n\">streams</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>27.</strong> \u4e0d\u8981\u5728\u4e00\u4e2a\u8bed\u53e5\u4e2d\u58f0\u660e\u4e0d\u540c\u7c7b\u578b\u7684\u591a\u4e2a\u53d8\u91cf\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//incorrect</span>\n<span class=\"kt\">int</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">y</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>28.</strong> \u4e0d\u8981\u4f7f\u7528C\u98ce\u683c\u7684\u7c7b\u578b\u8f6c\u6362\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//incorrect</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cerr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"p\">(</span><span class=\"kt\">int</span><span class=\"p\">)</span><span class=\"n\">c</span> <span class=\"o\">&lt;&lt;</span><span class=\"p\">;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n<span class=\"c1\">//correct</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cerr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"k\">static_cast</span><span class=\"o\">&lt;</span><span class=\"kt\">int</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>29.</strong> \u5728\u7c7b\u548c\u7ed3\u6784\u4e2d\uff0c\u7ec4\u6210\u5458\u548c\u51fd\u6570\u5206\u522b\u5728\u6bcf\u4e2a\u53ef\u89c1\u8303\u56f4\u5185\u3002</p>\n<p><strong>30.</strong> \u5bf9\u4e8e\u5c0f\u7c7b\u548c\u7ed3\u6784\uff0c\u6ca1\u6709\u5fc5\u8981\u5c06\u65b9\u6cd5\u58f0\u660e\u4e0e\u5b9e\u73b0\u5206\u5f00\u3002</p>\n<p>\u5bf9\u4e8e\u4efb\u4f55\u7c7b\u6216\u7ed3\u6784\u4e2d\u7684\u5c0f\u65b9\u6cd5\u4e5f\u662f\u5982\u6b64\u3002</p>\n<p>\u5bf9\u4e8e\u6a21\u677f\u5316\u7c7b\u548c\u7ed3\u6784\uff0c\u4e0d\u8981\u5c06\u65b9\u6cd5\u58f0\u660e\u4e0e\u5b9e\u73b0\u5206\u5f00\uff08\u56e0\u4e3a\u5426\u5219\u5b83\u4eec\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u8f6c\u6362\u5355\u5143\u4e2d\u5b9a\u4e49\uff09</p>\n<p><strong>31.</strong> \u60a8\u53ef\u4ee5\u5c06\u6362\u884c\u89c4\u5219\u5b9a\u5728140\u4e2a\u5b57\u7b26\uff0c\u800c\u4e0d\u662f80\u4e2a\u5b57\u7b26\u3002</p>\n<p><strong>32.</strong> \u5982\u679c\u4e0d\u9700\u8981 postfix\uff0c\u8bf7\u59cb\u7ec8\u4f7f\u7528\u524d\u7f00\u589e\u91cf/\u51cf\u91cf\u8fd0\u7b97\u7b26\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"n\">Names</span><span class=\"o\">::</span><span class=\"n\">const_iterator</span> <span class=\"n\">it</span> <span class=\"o\">=</span> <span class=\"n\">column_names</span><span class=\"p\">.</span><span class=\"n\">begin</span><span class=\"p\">();</span> <span class=\"n\">it</span> <span class=\"o\">!=</span> <span class=\"n\">column_names</span><span class=\"p\">.</span><span class=\"n\">end</span><span class=\"p\">();</span> <span class=\"o\">++</span><span class=\"n\">it</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<h3 id=\"comments_1\">Comments<a class=\"headerlink\" href=\"#comments_1\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u8bf7\u52a1\u5fc5\u4e3a\u6240\u6709\u975e\u5e38\u91cd\u8981\u7684\u4ee3\u7801\u90e8\u5206\u6dfb\u52a0\u6ce8\u91ca\u3002</p>\n<p>\u8fd9\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002 \u7f16\u5199\u6ce8\u91ca\u53ef\u80fd\u4f1a\u5e2e\u52a9\u60a8\u610f\u8bc6\u5230\u4ee3\u7801\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u6216\u8005\u8bbe\u8ba1\u9519\u8bef\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cm\">/** Part of piece of memory, that can be used.</span>\n<span class=\"cm\">  * For example, if internal_buffer is 1MB, and there was only 10 bytes loaded to buffer from file for reading,</span>\n<span class=\"cm\">  * then working_buffer will have size of only 10 bytes</span>\n<span class=\"cm\">  * (working_buffer.end() will point to position right after those 10 bytes available for read).</span>\n<span class=\"cm\">  */</span>\n</code></pre></div>\n\n\n<p><strong>2.</strong> \u6ce8\u91ca\u53ef\u4ee5\u5c3d\u53ef\u80fd\u8be6\u7ec6\u3002</p>\n<p><strong>3.</strong> \u5728\u4ed6\u4eec\u63cf\u8ff0\u7684\u4ee3\u7801\u4e4b\u524d\u653e\u7f6e\u6ce8\u91ca\u3002 \u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u6ce8\u91ca\u53ef\u4ee5\u5728\u4ee3\u7801\u4e4b\u540e\uff0c\u5728\u540c\u4e00\u884c\u4e0a\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cm\">/** Parses and executes the query.</span>\n<span class=\"cm\">*/</span>\n<span ");
            
            document.write("class=\"kt\">void</span> <span class=\"n\">executeQuery</span><span class=\"p\">(</span>\n    <span class=\"n\">ReadBuffer</span> <span class=\"o\">&amp;</span> <span class=\"n\">istr</span><span class=\"p\">,</span> <span class=\"c1\">/// Where to read the query from (and data for INSERT, if applicable)</span>\n    <span class=\"n\">WriteBuffer</span> <span class=\"o\">&amp;</span> <span class=\"n\">ostr</span><span class=\"p\">,</span> <span class=\"c1\">/// Where to write the result</span>\n    <span class=\"n\">Context</span> <span class=\"o\">&amp;</span> <span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"c1\">/// DB, tables, data types, engines, functions, aggregate functions...</span>\n    <span class=\"n\">BlockInputStreamPtr</span> <span class=\"o\">&amp;</span> <span class=\"n\">query_plan</span><span class=\"p\">,</span> <span class=\"c1\">/// Here could be written the description on how query was executed</span>\n    <span class=\"n\">QueryProcessingStage</span><span class=\"o\">::</span><span class=\"n\">Enum</span> <span class=\"n\">stage</span> <span class=\"o\">=</span> <span class=\"n\">QueryProcessingStage</span><span class=\"o\">::</span><span class=\"n\">Complete</span> <span class=\"c1\">/// Up to which stage process the SELECT query</span>\n    <span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>4.</strong> \u6ce8\u91ca\u5e94\u8be5\u53ea\u7528\u82f1\u6587\u64b0\u5199\u3002</p>\n<p><strong>5.</strong> \u5982\u679c\u60a8\u6b63\u5728\u7f16\u5199\u5e93\uff0c\u8bf7\u5728\u4e3b\u5934\u6587\u4ef6\u4e2d\u5305\u542b\u89e3\u91ca\u5b83\u7684\u8be6\u7ec6\u6ce8\u91ca\u3002</p>\n<p><strong>6.</strong> \u8bf7\u52ff\u6dfb\u52a0\u65e0\u6548\u7684\u6ce8\u91ca\u3002 \u7279\u522b\u662f\uff0c\u4e0d\u8981\u7559\u4e0b\u50cf\u8fd9\u6837\u7684\u7a7a\u6ce8\u91ca\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cm\">/*</span>\n<span class=\"cm\">* Procedure Name:</span>\n<span class=\"cm\">* Original procedure name:</span>\n<span class=\"cm\">* Author:</span>\n<span class=\"cm\">* Date of creation:</span>\n<span class=\"cm\">* Dates of modification:</span>\n<span class=\"cm\">* Modification authors:</span>\n<span class=\"cm\">* Original file name:</span>\n<span class=\"cm\">* Purpose:</span>\n<span class=\"cm\">* Intent:</span>\n<span class=\"cm\">* Designation:</span>\n<span class=\"cm\">* Classes used:</span>\n<span class=\"cm\">* Constants:</span>\n<span class=\"cm\">* Local variables:</span>\n<span class=\"cm\">* Parameters:</span>\n<span class=\"cm\">* Date of creation:</span>\n<span class=\"cm\">* Purpose:</span>\n<span class=\"cm\">*/</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u4e2a\u793a\u4f8b\u6765\u6e90\u4e8e <a href=\"http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/\" rel=\"external nofollow noreferrer\">http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/</a>\u3002</p>\n<p><strong>7.</strong> \u4e0d\u8981\u5728\u6bcf\u4e2a\u6587\u4ef6\u7684\u5f00\u5934\u5199\u5165\u5783\u573e\u6ce8\u91ca\uff08\u4f5c\u8005\uff0c\u521b\u5efa\u65e5\u671f...\uff09\u3002</p>\n<p><strong>8.</strong> \u5355\u884c\u6ce8\u91ca\u7528\u4e09\u4e2a\u659c\u6746\uff1a <code>///</code> \uff0c\u591a\u884c\u6ce8\u91ca\u4ee5 <code>/**</code>\u5f00\u59cb\u3002 \u8fd9\u4e9b\u6ce8\u91ca\u4f1a\u5f53\u505a\u6587\u6863\u3002</p>\n<p>\u6ce8\u610f\uff1a\u60a8\u53ef\u4ee5\u4f7f\u7528 Doxygen \u4ece\u8fd9\u4e9b\u6ce8\u91ca\u4e2d\u751f\u6210\u6587\u6863\u3002 \u4f46\u662f\u901a\u5e38\u4e0d\u4f7f\u7528 Doxygen\uff0c\u56e0\u4e3a\u5728 IDE \u4e2d\u5bfc\u822a\u4ee3\u7801\u66f4\u65b9\u4fbf\u3002</p>\n<p><strong>9.</strong> \u591a\u884c\u6ce8\u91ca\u7684\u5f00\u5934\u548c\u7ed3\u5c3e\u4e0d\u5f97\u6709\u7a7a\u884c\uff08\u5173\u95ed\u591a\u884c\u6ce8\u91ca\u7684\u884c\u9664\u5916\uff09\u3002</p>\n<p><strong>10.</strong> \u8981\u6ce8\u91ca\u6389\u4ee3\u7801\uff0c\u8bf7\u4f7f\u7528\u57fa\u672c\u6ce8\u91ca\uff0c\u800c\u4e0d\u662f\u201c\u8bb0\u5f55\u201d\u6ce8\u91ca\u3002</p>\n<p><strong>11.</strong> \u5728\u63d0\u4ea4\u4e4b\u524d\u5220\u9664\u4ee3\u7801\u7684\u65e0\u6548\u6ce8\u91ca\u90e8\u5206\u3002</p>\n<p><strong>12.</strong> \u4e0d\u8981\u5728\u6ce8\u91ca\u6216\u4ee3\u7801\u4e2d\u4f7f\u7528\u4eb5\u6e0e\u8bed\u8a00\u3002</p>\n<p><strong>13.</strong> \u4e0d\u8981\u4f7f\u7528\u5927\u5199\u5b57\u6bcd\u3002 \u4e0d\u8981\u4f7f\u7528\u8fc7\u591a\u7684\u6807\u70b9\u7b26\u53f7\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// WHAT THE FAIL???</span>\n</code></pre></div>\n\n\n<p><strong>14.</strong> \u4e0d\u8981\u4f7f\u7528\u6ce8\u91ca\u6765\u5236\u4f5c\u5206\u9694\u7b26\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">///******************************************************</span>\n</code></pre></div>\n\n\n<p><strong>15.</strong> \u4e0d\u8981\u5728\u6ce8\u91ca\u4e2d\u5f00\u59cb\u8ba8\u8bba\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// Why did you do this stuff?</span>\n</code></pre></div>\n\n\n<p><strong>16.</strong> \u6ca1\u6709\u5fc5\u8981\u5728\u5757\u7684\u672b\u5c3e\u5199\u4e00\u6761\u6ce8\u91ca\u6765\u63cf\u8ff0\u5b83\u7684\u542b\u4e49\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// for</span>\n</code></pre></div>\n\n\n<h3 id=\"names\">Names<a class=\"headerlink\" href=\"#names\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u5728\u53d8\u91cf\u548c\u7c7b\u6210\u5458\u7684\u540d\u79f0\u4e2d\u4f7f\u7528\u5e26\u4e0b\u5212\u7ebf\u7684\u5c0f\u5199\u5b57\u6bcd\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">size_t</span> <span class=\"n\">max_block_size</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>2.</strong> \u5bf9\u4e8e\u51fd\u6570\uff08\u65b9\u6cd5\uff09\u7684\u540d\u79f0\uff0c\u8bf7\u4f7f\u7528\u4ee5\u5c0f\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u9a7c\u5cf0\u6807\u8bc6\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">getName</span><span class=\"p\">()</span> <span class=\"k\">const</span> <span class=\"k\">override</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"s\">&quot;Memory&quot;</span><span class=\"p\">;</span> <span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>3.</strong> \u5bf9\u4e8e\u7c7b\uff08\u7ed3\u6784\uff09\u7684\u540d\u79f0\uff0c\u4f7f\u7528\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u9a7c\u5cf0\u6807\u8bc6\u3002\u63a5\u53e3\u540d\u79f0\u7528I\u524d\u7f00\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">class</span> <span class=\"nc\">StorageMemory</span> <span class=\"o\">:</span> <span class=\"k\">public</span> <span class=\"n\">IStorage</span>\n</code></pre></div>\n\n\n<p><strong>4.</strong> <code>using</code> \u7684\u547d\u540d\u65b9\u5f0f\u4e0e\u7c7b\u76f8\u540c\uff0c\u6216\u8005\u4ee5__t`\u547d\u540d\u3002</p>\n<p><strong>5.</strong> \u6a21\u677f\u7c7b\u578b\u53c2\u6570\u7684\u540d\u79f0\uff1a\u5728\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528<code>T</code>; <code>T</code>\uff0c<code>U</code>; <code>T1</code>\uff0c<code>T2</code>\u3002</p>\n<p>\u5bf9\u4e8e\u66f4\u590d\u6742\u7684\u60c5\u51b5\uff0c\u8981\u4e48\u9075\u5faa\u7c7b\u540d\u89c4\u5219\uff0c\u8981\u4e48\u6dfb\u52a0\u524d\u7f00<code>T</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">template</span> <span class=\"o\">&lt;</span><span class=\"k\">typename</span> <span class=\"n\">TKey</span><span class=\"p\">,</span> <span class=\"k\">typename</span> <span class=\"n\">TValue</span><span class=\"o\">&gt;</span>\n<span class=\"k\">struct</span> <span class=\"n\">AggregatedStatElement</span>\n</code></pre></div>\n\n\n<p><strong>6.</strong> \u6a21\u677f\u5e38\u91cf\u53c2\u6570\u7684\u540d\u79f0\uff1a\u9075\u5faa\u53d8\u91cf\u540d\u79f0\u7684\u89c4\u5219\uff0c\u6216\u8005\u5728\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 <code>N</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">template</span> <span class=\"o\">&lt;</span><span class=\"kt\">bool</span> <span class=\"n\">without_www</span><span class=\"o\">&gt;</span>\n<span class=\"k\">struct</span> <span class=\"n\">ExtractDomain</span>\n</code></pre></div>\n\n\n<p><strong>7.</strong> \u5bf9\u4e8e\u62bd\u8c61\u7c7b\u578b\uff08\u63a5\u53e3\uff09\uff0c\u7528 <code>I</code> \u524d\u7f00\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">class</span> <span class=\"nc\">IBlockInputStream</span>\n</code></pre></div>\n\n\n<p><strong>8.</strong> \u5982\u679c\u5728\u672c\u5730\u4f7f\u7528\u53d8\u91cf\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u77ed\u540d\u79f0\u3002</p>\n<p>\u5728\u6240\u6709\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u8bf7\u4f7f\u7528\u80fd\u63cf\u8ff0\u542b\u4e49\u7684\u540d\u79f0\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">bool</span> <span class=\"n\">info_successfully_loaded</span> <span class=\"o\">=</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>9.</strong> <code>define</code> \u548c\u5168\u5c40\u5e38\u91cf\u7684\u540d\u79f0\u4f7f\u7528\u5e26\u4e0b\u5212\u7ebf\u7684 <code>ALL_CAPS</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cp\">##define MAX_SRC_TABLE_NAMES_TO_STORE 1000</span>\n</code></pre></div>\n\n\n<p><strong>10.</strong> \u6587\u4ef6\u540d\u5e94\u4f7f\u7528\u4e0e\u5176\u5185\u5bb9\u76f8\u540c\u7684\u6837\u5f0f\u3002</p>\n<p>\u5982\u679c\u6587\u4ef6\u5305\u542b\u5355\u4e2a\u7c7b\uff0c\u5219\u4ee5\u4e0e\u8be5\u7c7b\u540d\u79f0\u76f8\u540c\u7684\u65b9\u5f0f\u547d\u540d\u8be5\u6587\u4ef6\u3002</p>\n<p>\u5982\u679c\u6587\u4ef6\u5305\u542b\u5355\u4e2a\u51fd\u6570\uff0c\u5219\u4ee5\u4e0e\u51fd\u6570\u540d\u79f0\u76f8\u540c\u7684\u65b9\u5f0f\u547d\u540d\u6587\u4ef6\u3002</p>\n<p><strong>11.</strong> \u5982\u679c\u540d\u79f0\u5305\u542b\u7f29\u5199\uff0c\u5219\uff1a</p>\n<ul>\n<li>\u5bf9\u4e8e\u53d8\u91cf\u540d\uff0c\u7f29\u5199\u5e94\u4f7f\u7528\u5c0f\u5199\u5b57\u6bcd <code>mysql_connection</code>\uff08\u4e0d\u662f <code>mySQL_connection</code> \uff09\u3002</li>\n<li>\u5bf9\u4e8e\u7c7b\u548c\u51fd\u6570\u7684\u540d\u79f0\uff0c\u8bf7\u5c06\u5927\u5199\u5b57\u6bcd\u4fdd\u7559\u5728\u7f29\u5199 <code>MySQLConnection</code>\uff08\u4e0d\u662f <code>MySqlConnection</code> \u3002</li>\n</ul>\n<p><strong>12.</strong> \u4ec5\u7528\u4e8e\u521d\u59cb\u5316\u7c7b\u6210\u5458\u7684\u6784\u9020\u65b9\u6cd5\u53c2\u6570\u7684\u547d\u540d\u65b9\u5f0f\u5e94\u4e0e\u7c7b\u6210\u5458\u76f8\u540c\uff0c\u4f46\u6700\u540e\u4f7f\u7528\u4e0b\u5212\u7ebf\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">FileQueueProcessor</span><span class=\"p\">(</span>\n    <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span> <span class=\"n\">path_</span><span class=\"p\">,</span>\n    <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span> <span class=\"n\">prefix_</span><span class=\"p\">,</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">FileHandler</span><span class=\"o\">&gt;</span> <span class=\"n\">handler_</span><span class=\"p\">)</span>\n    <span class=\"o\">:</span> <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"n\">path_</span><span class=\"p\">),</span>\n    <span class=\"n\">prefix</span><span class=\"p\">(</span><span class=\"n\">prefix_</span><span class=\"p\">),</span>\n    <span class=\"n\">handler</span><span class=\"p\">(</span><span class=\"n\">handler_</span><span class=\"p\">),</span>\n    <span class=\"n\">log</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">Logger</span><span class=\"o\">::</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s\">&quot;FileQueueProcessor&quot;</span><span class=\"p\">))</span>\n<span class=\"p\">{</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u6784\u9020\u51fd\u6570\u4f53\u4e2d\u672a\u4f7f\u7528\u8be5\u53c2\u6570\uff0c\u5219\u53ef\u4ee5\u7701\u7565\u4e0b\u5212\u7ebf\u540e\u7f00\u3002</p>\n<p><strong>13.</strong> \u5c40\u90e8\u53d8\u91cf\u548c\u7c7b\u6210\u5458\u7684\u540d\u79f0\u6ca1\u6709\u533a\u522b\uff08\u4e0d\u9700\u8981\u524d\u7f00\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">timer</span> <span class=\"p\">(</span><span class=\"n\">not</span> <span class=\"n\">m_timer</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>14.</strong> \u5bf9\u4e8e <code>enum</code> \u4e2d\u7684\u5e38\u91cf\uff0c\u8bf7\u4f7f\u7528\u5e26\u5927\u5199\u5b57\u6bcd\u7684\u9a7c\u5cf0\u6807\u8bc6\u3002ALL_CAPS \u4e5f\u53ef\u4ee5\u63a5\u53d7\u3002\u5982\u679c <code>enum</code> \u662f\u975e\u672c\u5730\u7684\uff0c\u8bf7\u4f7f\u7528 <code>enum class</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">enum</span> <span class=\"k\">class</span> <span class=\"nc\">CompressionMethod</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">QuickLZ</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span>\n    <span class=\"n\">LZ4</span>     <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n<span class=\"p\">};</span>\n</code></pre></div>\n\n\n<p><strong>15.</strong> \u6240\u6709\u540d\u5b57\u5fc5\u987b\u662f\u82f1\u6587\u3002\u4e0d\u5141\u8bb8\u97f3\u8bd1\u4fc4\u8bed\u5355\u8bcd\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">not Stroka</span>\n</code></pre></div>\n\n\n<p><strong>16.</strong> \u7f29\u5199\u987b\u662f\u4f17\u6240\u5468\u77e5\u7684\uff08\u5f53\u60a8\u53ef\u4ee5\u5728\u7ef4\u57fa\u767e\u79d1\u6216\u641c\u7d22\u5f15\u64ce\u4e2d\u8f7b\u677e\u627e\u5230\u7f29\u5199\u7684\u542b\u4e49\u65f6\uff09\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"ss\">`AST`</span><span class=\"p\">,</span> <span class=\"ss\">`SQL`</span><span class=\"p\">.</span>\n\n<span class=\"k\">Not</span> <span class=\"ss\">`NVDH`</span> <span class=\"p\">(</span><span class=\"n\">some</span> <span class=\"n\">random</span> <span class=\"n\">letters</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u7f29\u77ed\u7248\u672c\u662f\u5e38\u7528\u7684\uff0c\u5219\u53ef\u4ee5\u63a5\u53d7\u4e0d\u5b8c\u6574\u7684\u5355\u8bcd\u3002</p>\n<p>\u5982\u679c\u6ce8\u91ca\u4e2d\u65c1\u8fb9\u5305\u542b\u5168\u540d\uff0c\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7f29\u5199\u3002</p>\n<p><strong>17.</strong> C++ \u6e90\u7801\u6587\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3a <code>.cpp</code> \u62d3\u5c55\u540d\u3002 \u5934\u6587\u4ef6\u5fc5\u987b\u4e3a <code>.h</code> \u62d3\u5c55\u540d\u3002</p>\n<h3 id=\"ru-he-bian-xie-dai-ma\">\u5982\u4f55\u7f16\u5199\u4ee3\u7801<a class=\"headerlink\" href=\"#ru-he-bian-xie-dai-ma\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u5185\u5b58\u7ba1\u7406\u3002</p>\n<p>\u624b\u52a8\u5185\u5b58\u91ca\u653e (<code>delete</code>) \u53ea\u80fd\u5728\u5e93\u4ee3\u7801\u4e2d\u4f7f\u7528\u3002</p>\n<p>\u5728\u5e93\u4ee3\u7801\u4e2d\uff0c <code>delete</code> \u8fd0\u7b97\u7b26\u53ea\u80fd\u5728\u6790\u6784\u51fd\u6570\u4e2d\u4f7f\u7528\u3002</p>\n<p>\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4e2d\uff0c\u5185\u5b58\u5fc5\u987b\u7531\u62e5\u6709\u5b83\u7684\u5bf9\u8c61\u91ca\u653e\u3002</p>\n<p>\u793a\u4f8b\uff1a</p>\n<ul>\n<li>\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5c06\u5bf9\u8c61\u653e\u5728\u5806\u6808\u4e0a\uff0c\u6216\u4f7f\u5176\u6210\u4e3a\u53e6\u4e00\u4e2a\u7c7b\u7684\u6210\u5458\u3002</li>\n<li>\u5bf9\u4e8e\u5927\u91cf\u5c0f\u5bf9\u8c61\uff0c\u8bf7\u4f7f\u7528\u5bb9\u5668\u3002</li>\n<li>\u5bf9\u4e8e\u81ea\u52a8\u91ca\u653e\u5c11\u91cf\u5728\u5806\u4e2d\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528 <code>shared_ptr/unique_ptr</code>\u3002</li>\n</ul>\n<p><strong>2.</strong> \u8d44\u6e90\u7ba1");
            
            document.write("\u7406\u3002</p>\n<p>\u4f7f\u7528 <code>RAII</code> \u4ee5\u53ca\u67e5\u770b\u4ee5\u4e0a\u8bf4\u660e\u3002</p>\n<p><strong>3.</strong> \u9519\u8bef\u5904\u7406\u3002</p>\n<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ea\u9700\u8981\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\uff0c\u800c\u4e0d\u9700\u8981\u6355\u83b7\u5b83\uff08\u56e0\u4e3a<code>RAII</code>\uff09\u3002</p>\n<p>\u5728\u79bb\u7ebf\u6570\u636e\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u901a\u5e38\u53ef\u4ee5\u63a5\u53d7\u4e0d\u6355\u83b7\u5f02\u5e38\u3002</p>\n<p>\u5728\u5904\u7406\u7528\u6237\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u4e2d\uff0c\u901a\u5e38\u8db3\u4ee5\u6355\u83b7\u8fde\u63a5\u5904\u7406\u7a0b\u5e8f\u9876\u5c42\u7684\u5f02\u5e38\u3002</p>\n<p>\u5728\u7ebf\u7a0b\u51fd\u6570\u4e2d\uff0c\u4f60\u5e94\u8be5\u5728 <code>join</code> \u4e4b\u540e\u6355\u83b7\u5e76\u4fdd\u7559\u6240\u6709\u5f02\u5e38\u4ee5\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u91cd\u65b0\u629b\u51fa\u5b83\u4eec\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// If there weren&#39;t any calculations yet, calculate the first block synchronously</span>\n<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">started</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">calculate</span><span class=\"p\">();</span>\n    <span class=\"n\">started</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n<span class=\"k\">else</span> <span class=\"c1\">/// If calculations are already in progress, wait for the result</span>\n    <span class=\"n\">pool</span><span class=\"p\">.</span><span class=\"n\">wait</span><span class=\"p\">();</span>\n\n<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">exception</span><span class=\"p\">)</span>\n    <span class=\"n\">exception</span><span class=\"o\">-&gt;</span><span class=\"n\">rethrow</span><span class=\"p\">();</span>\n</code></pre></div>\n\n\n<p>\u4e0d\u5904\u7406\u5c31\u4e0d\u8981\u9690\u85cf\u5f02\u5e38\u3002 \u6c38\u8fdc\u4e0d\u8981\u76f2\u76ee\u5730\u628a\u6240\u6709\u5f02\u5e38\u90fd\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//Not correct</span>\n<span class=\"k\">catch</span> <span class=\"p\">(...)</span> <span class=\"p\">{}</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c\u60a8\u9700\u8981\u5ffd\u7565\u67d0\u4e9b\u5f02\u5e38\uff0c\u8bf7\u4ec5\u9488\u5bf9\u7279\u5b9a\u5f02\u5e38\u6267\u884c\u6b64\u64cd\u4f5c\u5e76\u91cd\u65b0\u629b\u51fa\u5176\u4f59\u5f02\u5e38\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">catch</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">DB</span><span class=\"o\">::</span><span class=\"n\">Exception</span> <span class=\"o\">&amp;</span> <span class=\"n\">e</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">.</span><span class=\"n\">code</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">ErrorCodes</span><span class=\"o\">::</span><span class=\"n\">UNKNOWN_AGGREGATE_FUNCTION</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"k\">nullptr</span><span class=\"p\">;</span>\n    <span class=\"k\">else</span>\n        <span class=\"k\">throw</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>\u5f53\u4f7f\u7528\u5177\u6709\u8fd4\u56de\u7801\u6216 <code>errno</code> \u7684\u51fd\u6570\u65f6\uff0c\u8bf7\u59cb\u7ec8\u68c0\u67e5\u7ed3\u679c\u5e76\u5728\u51fa\u73b0\u9519\u8bef\u65f6\u629b\u51fa\u5f02\u5e38\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">!=</span> <span class=\"n\">close</span><span class=\"p\">(</span><span class=\"n\">fd</span><span class=\"p\">))</span>\n    <span class=\"n\">throwFromErrno</span><span class=\"p\">(</span><span class=\"s\">&quot;Cannot close file &quot;</span> <span class=\"o\">+</span> <span class=\"n\">file_name</span><span class=\"p\">,</span> <span class=\"n\">ErrorCodes</span><span class=\"o\">::</span><span class=\"n\">CANNOT_CLOSE_FILE</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p><code>\u4e0d\u8981\u4f7f\u7528\u65ad\u8a00</code>\u3002</p>\n<p><strong>4.</strong> \u5f02\u5e38\u7c7b\u578b\u3002</p>\n<p>\u4e0d\u9700\u8981\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4e2d\u4f7f\u7528\u590d\u6742\u7684\u5f02\u5e38\u5c42\u6b21\u7ed3\u6784\u3002 \u7cfb\u7edf\u7ba1\u7406\u5458\u5e94\u8be5\u53ef\u4ee5\u7406\u89e3\u5f02\u5e38\u6587\u672c\u3002</p>\n<p><strong>5.</strong> \u4ece\u6790\u6784\u51fd\u6570\u4e2d\u629b\u51fa\u5f02\u5e38\u3002</p>\n<p>\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u4f46\u5141\u8bb8\u8fd9\u6837\u505a\u3002</p>\n<p>\u6309\u7167\u4ee5\u4e0b\u9009\u9879\uff1a</p>\n<ul>\n<li>\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\uff08 <code>done\uff08\uff09</code> \u6216 <code>finalize\uff08\uff09</code> \uff09\uff0c\u5b83\u5c06\u63d0\u524d\u5b8c\u6210\u6240\u6709\u53ef\u80fd\u5bfc\u81f4\u5f02\u5e38\u7684\u5de5\u4f5c\u3002 \u5982\u679c\u8c03\u7528\u4e86\u8be5\u51fd\u6570\uff0c\u5219\u7a0d\u540e\u5728\u6790\u6784\u51fd\u6570\u4e2d\u5e94\u8be5\u6ca1\u6709\u5f02\u5e38\u3002</li>\n<li>\u8fc7\u4e8e\u590d\u6742\u7684\u4efb\u52a1\uff08\u4f8b\u5982\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u6d88\u606f\uff09\u53ef\u4ee5\u653e\u5728\u5355\u72ec\u7684\u65b9\u6cd5\u4e2d\uff0c\u7c7b\u7528\u6237\u5fc5\u987b\u5728\u9500\u6bc1\u4e4b\u524d\u8c03\u7528\u5b83\u4eec\u3002</li>\n<li>\u5982\u679c\u6790\u6784\u51fd\u6570\u4e2d\u5b58\u5728\u5f02\u5e38\uff0c\u5219\u6700\u597d\u8bb0\u5f55\u5b83\u800c\u4e0d\u662f\u9690\u85cf\u5b83\uff08\u5982\u679c logger \u53ef\u7528\uff09\u3002</li>\n<li>\u5728\u7b80\u5355\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4f9d\u8d56\u4e8e<code>std::terminate</code>\uff08\u5bf9\u4e8eC++ 11\u4e2d\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a <code>noexcept</code> \u7684\u60c5\u51b5\uff09\u6765\u5904\u7406\u5f02\u5e38\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\u3002</li>\n</ul>\n<p><strong>6.</strong> \u533f\u540d\u4ee3\u7801\u5757\u3002</p>\n<p>\u60a8\u53ef\u4ee5\u5728\u5355\u4e2a\u51fd\u6570\u5185\u521b\u5efa\u5355\u72ec\u7684\u4ee3\u7801\u5757\uff0c\u4ee5\u4f7f\u67d0\u4e9b\u53d8\u91cf\u6210\u4e3a\u5c40\u90e8\u53d8\u91cf\uff0c\u4ee5\u4fbf\u5728\u9000\u51fa\u5757\u65f6\u8c03\u7528\u6790\u6784\u51fd\u6570\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Block</span> <span class=\"n\">block</span> <span class=\"o\">=</span> <span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">in</span><span class=\"o\">-&gt;</span><span class=\"n\">read</span><span class=\"p\">();</span>\n\n<span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">lock_guard</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">mutex</span><span class=\"o\">&gt;</span> <span class=\"n\">lock</span><span class=\"p\">(</span><span class=\"n\">mutex</span><span class=\"p\">);</span>\n    <span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">ready</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n    <span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">block</span> <span class=\"o\">=</span> <span class=\"n\">block</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">ready_any</span><span class=\"p\">.</span><span class=\"n\">set</span><span class=\"p\">();</span>\n</code></pre></div>\n\n\n<p><strong>7.</strong> \u591a\u7ebf\u7a0b\u3002</p>\n<p>\u5728\u79bb\u7ebf\u6570\u636e\u5904\u7406\u7a0b\u5e8f\u4e2d\uff1a</p>\n<ul>\n<li>\u5c1d\u8bd5\u5728\u5355\u4e2aCPU\u6838\u5fc3\u4e0a\u83b7\u5f97\u6700\u4f73\u6027\u80fd\u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5e76\u884c\u5316\u4ee3\u7801\u3002</li>\n</ul>\n<p>\u5728\u670d\u52a1\u7aef\u5e94\u7528\u4e2d\uff1a</p>\n<ul>\n<li>\u4f7f\u7528\u7ebf\u7a0b\u6c60\u6765\u5904\u7406\u8bf7\u6c42\u3002 \u6b64\u65f6\uff0c\u6211\u4eec\u8fd8\u6ca1\u6709\u4efb\u4f55\u9700\u8981\u7528\u6237\u7a7a\u95f4\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u4efb\u52a1\u3002</li>\n</ul>\n<p>Fork\u4e0d\u7528\u4e8e\u5e76\u884c\u5316\u3002</p>\n<p><strong>8.</strong> \u540c\u6b65\u7ebf\u7a0b\u3002</p>\n<p>\u901a\u5e38\u53ef\u4ee5\u4f7f\u4e0d\u540c\u7684\u7ebf\u7a0b\u4f7f\u7528\u4e0d\u540c\u7684\u5b58\u50a8\u5355\u5143\uff08\u751a\u81f3\u66f4\u597d\uff1a\u4e0d\u540c\u7684\u7f13\u5b58\u7ebf\uff09\uff0c\u5e76\u4e14\u4e0d\u4f7f\u7528\u4efb\u4f55\u7ebf\u7a0b\u540c\u6b65\uff08\u9664\u4e86<code>joinAll</code>\uff09\u3002</p>\n<p>\u5982\u679c\u9700\u8981\u540c\u6b65\uff0c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5728 <code>lock_guard</code> \u4e0b\u4f7f\u7528\u4e92\u65a5\u91cf\u5c31\u8db3\u591f\u4e86\u3002</p>\n<p>\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u7cfb\u7edf\u540c\u6b65\u539f\u8bed\u3002\u4e0d\u8981\u4f7f\u7528\u5fd9\u7b49\u5f85\u3002</p>\n<p>\u4ec5\u5728\u6700\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\u624d\u5e94\u4f7f\u7528\u539f\u5b50\u64cd\u4f5c\u3002</p>\n<p>\u9664\u975e\u662f\u60a8\u7684\u4e3b\u8981\u4e13\u4e1a\u9886\u57df\uff0c\u5426\u5219\u4e0d\u8981\u5c1d\u8bd5\u5b9e\u65bd\u65e0\u9501\u6570\u636e\u7ed3\u6784\u3002</p>\n<p><strong>9.</strong> \u6307\u9488\u548c\u5f15\u7528\u3002</p>\n<p>\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u8bf7\u7528\u5f15\u7528\u3002</p>\n<p><strong>10.</strong> \u5e38\u91cf\u3002</p>\n<p>\u4f7f\u7528 const \u5f15\u7528\uff0c\u6307\u5411\u5e38\u91cf\u7684\u6307\u9488\uff0c<code>const_iterator</code>\u548c const \u6307\u9488\u3002</p>\n<p>\u5c06 <code>const</code> \u89c6\u4e3a\u9ed8\u8ba4\u503c\uff0c\u4ec5\u5728\u5fc5\u8981\u65f6\u4f7f\u7528\u975e <code>const</code>\u3002</p>\n<p>\u5f53\u6309\u503c\u4f20\u9012\u53d8\u91cf\u65f6\uff0c\u4f7f\u7528 <code>const</code> \u901a\u5e38\u6ca1\u6709\u610f\u4e49\u3002</p>\n<p><strong>11.</strong> \u65e0\u7b26\u53f7\u3002</p>\n<p>\u5fc5\u8981\u65f6\u4f7f\u7528<code>unsigned</code>\u3002</p>\n<p><strong>12.</strong> \u6570\u503c\u7c7b\u578b\u3002</p>\n<p>\u4f7f\u7528 <code>UInt8</code>\uff0c <code>UInt16</code>\uff0c <code>UInt32</code>\uff0c <code>UInt64</code>\uff0c <code>Int8</code>\uff0c <code>Int16</code>\uff0c <code>Int32</code>\uff0c \u4ee5\u53ca <code>Int64</code>\uff0c <code>size_t</code>\uff0c <code>ssize_t</code> \u8fd8\u6709 <code>ptrdiff_t</code>\u3002</p>\n<p>\u4e0d\u8981\u4f7f\u7528\u8fd9\u4e9b\u7c7b\u578b\uff1a<code>signed / unsigned long</code>\uff0c<code>long long</code>\uff0c<code>short</code>\uff0c<code>signed / unsigned char</code>\uff0c<code>char</code>\u3002</p>\n<p><strong>13.</strong> \u53c2\u6570\u4f20\u9012\u3002</p>\n<p>\u901a\u8fc7\u5f15\u7528\u4f20\u9012\u590d\u6742\u7c7b\u578b \uff08\u5305\u62ec <code>std::string</code>\uff09\u3002</p>\n<p>\u5982\u679c\u51fd\u6570\u4e2d\u4f20\u9012\u5806\u4e2d\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u5219\u4f7f\u53c2\u6570\u7c7b\u578b\u4e3a <code>shared_ptr</code> \u6216\u8005 <code>unique_ptr</code>.</p>\n<p><strong>14.</strong> \u8fd4\u56de\u503c</p>\n<p>\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u4f7f\u7528 <code>return</code>\u3002\u4e0d\u8981\u4f7f\u7528 <code>[return std::move(res)]{.strike}</code>\u3002</p>\n<p>\u5982\u679c\u51fd\u6570\u5728\u5806\u4e0a\u5206\u914d\u5bf9\u8c61\u5e76\u8fd4\u56de\u5b83\uff0c\u8bf7\u4f7f\u7528 <code>shared_ptr</code> \u6216 <code>unique_ptr</code>\u3002</p>\n<p>\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u901a\u8fc7\u53c2\u6570\u8fd4\u56de\u503c\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53c2\u6570\u5e94\u8be5\u662f\u5f15\u7528\u4f20\u9012\u7684\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">using</span> <span class=\"n\">AggregateFunctionPtr</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">IAggregateFunction</span><span class=\"o\">&gt;</span><span class=\"p\">;</span>\n\n<span class=\"cm\">/** Allows creating an aggregate function by its name.</span>\n<span class=\"cm\">  */</span>\n<span class=\"k\">class</span> <span class=\"nc\">AggregateFunctionFactory</span>\n<span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:</span>\n    <span class=\"n\">AggregateFunctionFactory</span><span class=\"p\">();</span>\n    <span class=\"n\">AggregateFunctionPtr</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">String</span> <span class=\"o\">&amp;</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"k\">const</span> <span class=\"n\">DataTypes</span> <span class=\"o\">&amp;</span> <span class=\"n\">argument_types</span><span class=\"p\">)</span> <span class=\"k\">const</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>15.</strong> \u547d\u540d\u7a7a\u95f4\u3002</p>\n<p>\u6ca1\u6709\u5fc5\u8981\u4e3a\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4f7f\u7528\u5355\u72ec\u7684 <code>namespace</code> \u3002</p>\n<p>\u5c0f\u578b\u5e93\u4e5f\u4e0d\u9700\u8981\u8fd9\u4e2a\u3002</p>\n<p>\u5bf9\u4e8e\u4e2d\u5927\u578b\u5e93\uff0c\u987b\u5c06\u6240\u6709\u4ee3\u7801\u653e\u5728 <code>namespace</code> \u4e2d\u3002</p>\n<p>\u5728\u5e93\u7684 <code>.h</code> \u6587\u4ef6\u4e2d\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>namespace detail</code> \u6765\u9690\u85cf\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4e0d\u9700\u8981\u7684\u5b9e\u73b0\u7ec6\u8282\u3002</p>\n<p>\u5728 <code>.cpp</code> \u6587\u4ef6\u4e2d\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>static</code> \u6216\u533f\u540d\u547d\u540d\u7a7a\u95f4\u6765\u9690\u85cf\u7b26\u53f7\u3002</p>\n<p>\u540c\u6837 <code>namespace</code> \u53ef\u7528\u4e8e <code>enum</code> \u4ee5\u9632\u6b62\u76f8\u5e94\u7684\u540d\u79f0\u843d\u5165\u5916\u90e8 <code>namespace</code>\uff08\u4f46\u6700\u597d\u4f7f\u7528<code>enum class</code>\uff09\u3002</p>\n<p><strong>16.</strong> \u5ef6\u8fdf\u521d\u59cb\u5316\u3002</p>\n<p>\u5982\u679c\u521d\u59cb\u5316\u9700\u8981\u53c2\u6570\uff0c\u90a3\u4e48\u901a\u5e38\u4e0d\u5e94\u8be5\u7f16\u5199\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u7a0d\u540e\u60a8\u9700\u8981\u5ef6\u8fdf\u521d\u59cb\u5316\uff0c\u5219\u53ef\u4ee5\u6dfb\u52a0\u5c06\u521b\u5efa\u65e0\u6548\u5bf9\u8c61\u7684\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u3002 \u6216\u8005\uff0c\u5bf9\u4e8e\u5c11\u91cf\u5bf9\u8c61\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>shared_ptr / unique_ptr</code>\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Loader</span><span class=\"p\">(</span><span class=\"n\">DB</span><span class=\"o\">::</span><span class=\"n\">Connection</span> <span class=\"o\">*</span> <span class=\"n\">connection_</span><span class=\"p\">,</span> <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span> <span class=\"n\">query</span><span class=\"p\">,</span> <span class=\"kt\">size_t</span> <span class=\"n\">max_block_size_</span><span class=\"p\">);</span>\n\n<span class=\"c1\">/// For deferred initialization</span>\n<span class=\"n\">Loader</span><span class=\"p\">()</span> <span class=\"p\">{}</span>\n</code></pre></div>\n\n\n<p><strong>17.</strong> \u865a\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u8be5\u7c7b\u4e0d\u662f\u7528\u4e8e\u591a\u6001\u4f7f\u7528\uff0c\u5219\u4e0d\u9700\u8981\u5c06\u51fd\u6570\u8bbe\u7f6e\u4e3a\u865a\u62df\u3002\u8fd9\u4e5f\u9002\u7528\u4e8e\u6790\u6784\u51fd\u6570\u3002</p>\n<p><strong>18.</strong> \u7f16\u7801\u3002</p>\n<p>\u5728\u6240\u6709\u60c5\u51b5\u4e0b\u4f7f\u7528 UTF-8 \u7f16\u7801\u3002\u4f7f\u7528 <code>std::string</code> and <code>char *</code>\u3002\u4e0d\u8981\u4f7f\u7528 <code>std::wstring</code> \u548c <code>wchar_t</code>\u3002</p>\n<p><strong>19.</strong> \u65e5\u5fd7\u3002</p>\n<p>\u8bf7\u53c2\u9605\u4ee3\u7801\u4e2d\u7684\u793a\u4f8b\u3002</p>\n<p>\u5728\u63d0\u4ea4\u4e4b\u524d\uff0c\u5220\u9664\u6240\u6709\u65e0\u610f\u4e49\u548c\u8c03\u8bd5\u65e5\u5fd7\u8bb0\u5f55\uff0c\u4ee5\u53ca\u4efb\u4f55\u5176\u4ed6\u7c7b\u578b\u7684\u8c03\u8bd5\u8f93\u51fa\u3002</p>\n<p>\u5e94\u8be5\u907f\u514d\u5faa\u73af\u8bb0\u5f55\u65e5\u5fd7\uff0c\u5373\u4f7f\u5728 Trace \u7ea7\u522b\u4e5f\u662f\u5982\u6b64\u3002</p>\n<p>\u65e5\u5fd7\u5fc5\u987b\u5728\u4efb\u4f55\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\u90fd\u53ef\u8bfb\u3002</p>\n<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u53ea\u5e94\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4e2d\u4f7f\u7528\u65e5\u5fd7\u8bb0\u5f55\u3002</p>\n<p>\u65e5\u5fd7\u6d88\u606f\u5fc5\u987b\u7528\u82f1\u6587\u5199\u6210\u3002</p>\n<p>\u5bf9\u4e8e\u7cfb\u7edf\u7ba1\u7406\u5458\u6765\u8bf4\uff0c\u65e5\u5fd7\u6700\u597d\u662f\u53ef\u4ee5\u7406\u89e3\u7684\u3002</p>\n<p>\u4e0d\u8981\u5728\u65e5\u5fd7\u4e2d\u4f7f\u7528\u4eb5\u6e0e\u8bed\u8a00\u3002</p>\n<p>\u5728\u65e5\u5fd7\u4e2d\u4f7f\u7528UTF-8\u7f16\u7801\u3002 \u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u4e2d\u4f7f\u7528\u975eASCII\u5b57\u7b26\u3002</p>\n<p><strong>20.</strong> \u8f93\u5165-\u8f93\u51fa\u3002</p>\n<p>\u4e0d\u8981\u4f7f\u7528 <code>iostreams</code> \u5728\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6027\u80fd\u81f3\u5173\u91cd\u8981\u7684\u5185\u90e8\u5faa\u73af\u4e2d\uff08\u5e76\u4e14\u6c38\u8fdc\u4e0d\u8981\u4f7f\u7528 <code>stringstream</code> \uff09\u3002</p>\n<p>\u4f7f\u7528 <code>DB/IO</code> \u5e93\u66ff\u4ee3\u3002</p>\n<p><strong>21.</strong> \u65e5\u671f\u548c\u65f6\u95f4\u3002</p>\n<p>\u53c2\u8003 <code>DateLUT</code> \u5e93\u3002</p>\n<p><strong>22.</strong> \u5f15\u5165\u5934\u6587\u4ef6\u3002</p>\n<p>\u4e00\u76f4\u7528 <code>#pragma once</code> \u800c\u4e0d\u662f\u5176\u4ed6\u5b8f\u3002</p>\n<p><strong>23.</strong> using \u8bed\u6cd5</p>\n<p><code>using namespace</code> \u4e0d\u4f1a\u88ab\u4f7f\u7528\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u7279\u5b9a\u7684 <code>using</code>\u3002 \u4f46\u662f\u5728\u7c7b\u6216\u51fd\u6570\u4e2d\u4f7f\u5b83\u6210\u4e3a\u5c40\u90e8\u7684\u3002</p>\n<p><strong>24.</strong> \u4e0d\u8981\u4f7f\u7528 <code>trailing return type</code> \u4e3a\u5fc5\u8981\u7684\u529f\u80fd\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">[</span><span class=\"k\">auto</span> <span class=\"n\">f</span><span class=\"p\">()</span> <span class=\"o\">-&amp;</span><span class=\"n\">gt</span><span class=\"p\">;</span> <span class=\"kt\">void</span><span class=\"p\">;]{.</span><span class=\"n\">");
            
            document.write("strike</span><span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>25.</strong> \u58f0\u660e\u548c\u521d\u59cb\u5316\u53d8\u91cf\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//right way</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"s\">&quot;Hello&quot;</span><span class=\"p\">;</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">s</span><span class=\"p\">{</span><span class=\"s\">&quot;Hello&quot;</span><span class=\"p\">};</span>\n\n<span class=\"c1\">//wrong way</span>\n<span class=\"k\">auto</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">{</span><span class=\"s\">&quot;Hello&quot;</span><span class=\"p\">};</span>\n</code></pre></div>\n\n\n<p><strong>26.</strong> \u5bf9\u4e8e\u865a\u51fd\u6570\uff0c\u5728\u57fa\u7c7b\u4e2d\u7f16\u5199 <code>virtual</code>\uff0c\u4f46\u5728\u540e\u4ee3\u7c7b\u4e2d\u5199 <code>override</code> \u800c\u4e0d\u662f<code>virtual</code>\u3002</p>\n<h3 id=\"mei-you-yong-dao-de-c-te-xing\">\u6ca1\u6709\u7528\u5230\u7684 C++ \u7279\u6027\u3002<a class=\"headerlink\" href=\"#mei-you-yong-dao-de-c-te-xing\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u4e0d\u4f7f\u7528\u865a\u62df\u7ee7\u627f\u3002</p>\n<p><strong>2.</strong> \u4e0d\u4f7f\u7528 C++03 \u4e2d\u7684\u5f02\u5e38\u6807\u51c6\u3002</p>\n<h3 id=\"ping-tai\">\u5e73\u53f0<a class=\"headerlink\" href=\"#ping-tai\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u6211\u4eec\u4e3a\u7279\u5b9a\u5e73\u53f0\u7f16\u5199\u4ee3\u7801\u3002</p>\n<p>\u4f46\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u9996\u9009\u8de8\u5e73\u53f0\u6216\u53ef\u79fb\u690d\u4ee3\u7801\u3002</p>\n<p><strong>2.</strong> \u8bed\u8a00\uff1a C++17.</p>\n<p><strong>3.</strong> \u7f16\u8bd1\u5668\uff1a <code>gcc</code>\u3002 \u6b64\u65f6\uff082017\u5e7412\u6708\uff09\uff0c\u4ee3\u7801\u4f7f\u75287.2\u7248\u7f16\u8bd1\u3002\uff08\u5b83\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>clang 4</code> \u7f16\u8bd1\uff09</p>\n<p>\u4f7f\u7528\u6807\u51c6\u5e93 (<code>libstdc++</code> \u6216 <code>libc++</code>)\u3002</p>\n<p><strong>4.</strong> \u64cd\u4f5c\u7cfb\u7edf\uff1aLinux Ubuntu\uff0c\u4e0d\u6bd4 Precise \u65e9\u3002</p>\n<p><strong>5.</strong> \u4ee3\u7801\u662f\u4e3ax86_64 CPU\u67b6\u6784\u7f16\u5199\u7684\u3002</p>\n<p>CPU\u6307\u4ee4\u96c6\u662f\u6211\u4eec\u670d\u52a1\u5668\u4e2d\u652f\u6301\u7684\u6700\u5c0f\u96c6\u5408\u3002 \u76ee\u524d\uff0c\u5b83\u662fSSE 4.2\u3002</p>\n<p><strong>6.</strong> \u4f7f\u7528 <code>-Wall -Wextra -Werror</code> \u7f16\u8bd1\u53c2\u6570\u3002</p>\n<p><strong>7.</strong> \u5bf9\u6240\u6709\u5e93\u4f7f\u7528\u9759\u6001\u94fe\u63a5\uff0c\u9664\u4e86\u90a3\u4e9b\u96be\u4ee5\u9759\u6001\u8fde\u63a5\u7684\u5e93\uff08\u53c2\u89c1 <code>ldd</code> \u547d\u4ee4\u7684\u8f93\u51fa\uff09.</p>\n<p><strong>8.</strong> \u4f7f\u7528\u53d1\u5e03\u7684\u8bbe\u7f6e\u6765\u5f00\u53d1\u548c\u8c03\u8bd5\u4ee3\u7801\u3002</p>\n<h3 id=\"gong-ju\">\u5de5\u5177<a class=\"headerlink\" href=\"#gong-ju\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> KDevelop \u662f\u4e00\u4e2a\u597d\u7684 IDE.</p>\n<p><strong>2.</strong> \u8c03\u8bd5\u53ef\u4ee5\u4f7f\u7528 <code>gdb</code>\uff0c <code>valgrind</code> (<code>memcheck</code>)\uff0c <code>strace</code>\uff0c <code>-fsanitize=...</code>\uff0c \u6216 <code>tcmalloc_minimal_debug</code>.</p>\n<p><strong>3.</strong> \u5bf9\u4e8e\u6027\u80fd\u5206\u6790\uff0c\u4f7f\u7528 <code>Linux Perf</code>\uff0c <code>valgrind</code> (<code>callgrind</code>)\uff0c\u6216\u8005 <code>strace -cf</code>\u3002</p>\n<p><strong>4.</strong> \u6e90\u4ee3\u7801\u7528 Git \u4f5c\u7248\u672c\u63a7\u5236\u3002</p>\n<p><strong>5.</strong> \u4f7f\u7528 <code>CMake</code> \u6784\u5efa\u3002</p>\n<p><strong>6.</strong> \u7a0b\u5e8f\u7684\u53d1\u5e03\u4f7f\u7528 <code>deb</code> \u5b89\u88c5\u5305\u3002</p>\n<p><strong>7.</strong> \u63d0\u4ea4\u5230 master \u5206\u652f\u7684\u4ee3\u7801\u4e0d\u80fd\u7834\u574f\u7f16\u8bd1\u3002</p>\n<p>\u867d\u7136\u53ea\u6709\u9009\u5b9a\u7684\u4fee\u8ba2\u88ab\u8ba4\u4e3a\u662f\u53ef\u884c\u7684\u3002</p>\n<p><strong>8.</strong> \u5c3d\u53ef\u80fd\u7ecf\u5e38\u5730\u8fdb\u884c\u63d0\u4ea4\uff0c\u5373\u4f7f\u4ee3\u7801\u53ea\u662f\u90e8\u5206\u51c6\u5907\u597d\u4e86\u3002</p>\n<p>\u76ee\u7684\u660e\u786e\u7684\u529f\u80fd\uff0c\u4f7f\u7528\u5206\u652f\u3002</p>\n<p>\u5982\u679c <code>master</code> \u5206\u652f\u4e2d\u7684\u4ee3\u7801\u5c1a\u4e0d\u53ef\u6784\u5efa\uff0c\u8bf7\u5728 <code>push</code> \u4e4b\u524d\u5c06\u5176\u4ece\u6784\u5efa\u4e2d\u6392\u9664\u3002\u60a8\u9700\u8981\u5728\u51e0\u5929\u5185\u5b8c\u6210\u6216\u5220\u9664\u5b83\u3002</p>\n<p><strong>9.</strong> \u5bf9\u4e8e\u4e0d\u91cd\u8981\u7684\u66f4\u6539\uff0c\u8bf7\u4f7f\u7528\u5206\u652f\u5e76\u5728\u670d\u52a1\u5668\u4e0a\u53d1\u5e03\u5b83\u4eec\u3002</p>\n<p><strong>10.</strong> \u672a\u4f7f\u7528\u7684\u4ee3\u7801\u5c06\u4ece repo \u4e2d\u5220\u9664\u3002</p>\n<h3 id=\"ku\">\u5e93<a class=\"headerlink\" href=\"#ku\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u4f7f\u7528C ++ 14\u6807\u51c6\u5e93\uff08\u5141\u8bb8\u5b9e\u9a8c\u6027\u529f\u80fd\uff09\uff0c\u4ee5\u53ca <code>boost</code> \u548c <code>Poco</code> \u6846\u67b6\u3002</p>\n<p><strong>2.</strong> \u5982\u6709\u5fc5\u8981\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 OS \u5305\u4e2d\u63d0\u4f9b\u7684\u4efb\u4f55\u5df2\u77e5\u5e93\u3002</p>\n<p>\u5982\u679c\u6709\u4e00\u4e2a\u597d\u7684\u89e3\u51b3\u65b9\u6848\u5df2\u7ecf\u53ef\u7528\uff0c\u90a3\u5c31\u4f7f\u7528\u5b83\uff0c\u5373\u4f7f\u8fd9\u610f\u5473\u7740\u4f60\u5fc5\u987b\u5b89\u88c5\u53e6\u4e00\u4e2a\u5e93\u3002</p>\n<p>\uff08\u4f46\u8981\u51c6\u5907\u4ece\u4ee3\u7801\u4e2d\u5220\u9664\u4e0d\u597d\u7684\u5e93\uff09</p>\n<p><strong>3.</strong> \u5982\u679c\u8f6f\u4ef6\u5305\u6ca1\u6709\u60a8\u9700\u8981\u7684\u8f6f\u4ef6\u5305\u6216\u8005\u6709\u8fc7\u65f6\u7684\u7248\u672c\u6216\u9519\u8bef\u7684\u7f16\u8bd1\u7c7b\u578b\uff0c\u5219\u53ef\u4ee5\u5b89\u88c5\u4e0d\u5728\u8f6f\u4ef6\u5305\u4e2d\u7684\u5e93\u3002</p>\n<p><strong>4.</strong> \u5982\u679c\u5e93\u5f88\u5c0f\u5e76\u4e14\u6ca1\u6709\u81ea\u5df1\u7684\u590d\u6742\u6784\u5efa\u7cfb\u7edf\uff0c\u8bf7\u5c06\u6e90\u6587\u4ef6\u653e\u5728 <code>contrib</code> \u6587\u4ef6\u5939\u4e2d\u3002</p>\n<p><strong>5.</strong> \u59cb\u7ec8\u4f18\u5148\u8003\u8651\u5df2\u7ecf\u4f7f\u7528\u7684\u5e93\u3002</p>\n<h3 id=\"yi-ban-jian-yi_1\">\u4e00\u822c\u5efa\u8bae<a class=\"headerlink\" href=\"#yi-ban-jian-yi_1\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u5c3d\u53ef\u80fd\u7cbe\u7b80\u4ee3\u7801\u3002</p>\n<p><strong>2.</strong> \u5c1d\u8bd5\u7528\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5b9e\u73b0\u3002</p>\n<p><strong>3.</strong> \u5728\u4f60\u77e5\u9053\u4ee3\u7801\u662f\u5982\u4f55\u5de5\u4f5c\u4ee5\u53ca\u5185\u90e8\u5faa\u73af\u5982\u4f55\u8fd0\u4f5c\u4e4b\u524d\uff0c\u4e0d\u8981\u7f16\u5199\u4ee3\u7801\u3002</p>\n<p><strong>4.</strong> \u5728\u6700\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 <code>using</code> \u800c\u4e0d\u662f\u7c7b\u6216\u7ed3\u6784\u3002</p>\n<p><strong>5.</strong> \u5982\u679c\u53ef\u80fd\uff0c\u4e0d\u8981\u7f16\u5199\u590d\u5236\u6784\u9020\u51fd\u6570\uff0c\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u6790\u6784\u51fd\u6570\uff08\u865a\u62df\u51fd\u6570\u9664\u5916\uff0c\u5982\u679c\u7c7b\u5305\u542b\u81f3\u5c11\u4e00\u4e2a\u865a\u51fd\u6570\uff09\uff0c\u79fb\u52a8\u6784\u9020\u51fd\u6570\u6216\u79fb\u52a8\u8d4b\u503c\u8fd0\u7b97\u7b26\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u7f16\u8bd1\u5668\u751f\u6210\u7684\u51fd\u6570\u5fc5\u987b\u6b63\u5e38\u5de5\u4f5c\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 <code>default</code>\u3002</p>\n<p><strong>6.</strong> \u9f13\u52b1\u7b80\u5316\u4ee3\u7801\u3002 \u5c3d\u53ef\u80fd\u51cf\u5c0f\u4ee3\u7801\u7684\u5927\u5c0f\u3002</p>\n<h3 id=\"qi-ta-jian-yi\">\u5176\u4ed6\u5efa\u8bae<a class=\"headerlink\" href=\"#qi-ta-jian-yi\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> \u4ece <code>stddef.h</code> \u660e\u786e\u6307\u5b9a <code>std ::</code> \u7684\u7c7b\u578b\u3002</p>\n<p>\u4e0d\u63a8\u8350\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u5efa\u8bae\u5199 <code>size_t</code> \u800c\u4e0d\u662f <code>std::size_t</code>\uff0c\u56e0\u4e3a\u5b83\u66f4\u77ed\u3002</p>\n<p>\u4e5f\u63a5\u53d7\u6dfb\u52a0 <code>std::</code>\u3002</p>\n<p><strong>2.</strong> \u4e3a\u6807\u51c6C\u5e93\u4e2d\u7684\u51fd\u6570\u660e\u786e\u6307\u5b9a <code>std::</code></p>\n<p>\u4e0d\u63a8\u8350\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5199 <code>memcpy</code> \u800c\u4e0d\u662f<code>std::memcpy</code>\u3002</p>\n<p>\u539f\u56e0\u662f\u6709\u7c7b\u4f3c\u7684\u975e\u6807\u51c6\u529f\u80fd\uff0c\u4f8b\u5982 <code>memmem</code>\u3002\u6211\u4eec\u5076\u5c14\u4f1a\u4f7f\u7528\u8fd9\u4e9b\u529f\u80fd\u3002<code>namespace std</code>\u4e2d\u4e0d\u5b58\u5728\u8fd9\u4e9b\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u4f60\u5230\u5904\u90fd\u5199 <code>std::memcpy</code> \u800c\u4e0d\u662f <code>memcpy</code>\uff0c\u90a3\u4e48\u6ca1\u6709 <code>std::</code> \u7684 <code>memmem</code> \u4f1a\u663e\u5f97\u5f88\u5947\u602a\u3002</p>\n<p>\u4e0d\u8fc7\uff0c\u5982\u679c\u60a8\u613f\u610f\uff0c\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528 <code>std::</code>\u3002</p>\n<p><strong>3.</strong> \u5f53\u6807\u51c6C++\u5e93\u4e2d\u63d0\u4f9b\u76f8\u540c\u7684\u51fd\u6570\u65f6\uff0c\u4f7f\u7528C\u4e2d\u7684\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u5b83\u66f4\u9ad8\u6548\uff0c\u8fd9\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\u3002</p>\n<p>\u4f8b\u5982\uff0c\u4f7f\u7528<code>memcpy</code>\u800c\u4e0d\u662f<code>std::copy</code>\u6765\u590d\u5236\u5927\u5757\u5185\u5b58\u3002</p>\n<p><strong>4.</strong> \u51fd\u6570\u7684\u591a\u884c\u53c2\u6570\u3002</p>\n<p>\u5141\u8bb8\u4ee5\u4e0b\u4efb\u4f55\u5305\u88c5\u6837\u5f0f\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span>\n  <span class=\"n\">T1</span> <span class=\"n\">x1</span><span class=\"p\">,</span>\n  <span class=\"n\">T2</span> <span class=\"n\">x2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span>\n  <span class=\"kt\">size_t</span> <span class=\"n\">left</span><span class=\"p\">,</span> <span class=\"kt\">size_t</span> <span class=\"n\">right</span><span class=\"p\">,</span>\n  <span class=\"k\">const</span> <span class=\"o\">&amp;</span> <span class=\"n\">RangesInDataParts</span> <span class=\"n\">ranges</span><span class=\"p\">,</span>\n  <span class=\"kt\">size_t</span> <span class=\"n\">limit</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"kt\">size_t</span> <span class=\"n\">left</span><span class=\"p\">,</span> <span class=\"kt\">size_t</span> <span class=\"n\">right</span><span class=\"p\">,</span>\n  <span class=\"k\">const</span> <span class=\"o\">&amp;</span> <span class=\"n\">RangesInDataParts</span> <span class=\"n\">ranges</span><span class=\"p\">,</span>\n  <span class=\"kt\">size_t</span> <span class=\"n\">limit</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"kt\">size_t</span> <span class=\"n\">left</span><span class=\"p\">,</span> <span class=\"kt\">size_t</span> <span class=\"n\">right</span><span class=\"p\">,</span>\n      <span class=\"k\">const</span> <span class=\"o\">&amp;</span> <span class=\"n\">RangesInDataParts</span> <span class=\"n\">ranges</span><span class=\"p\">,</span>\n      <span class=\"kt\">size_t</span> <span class=\"n\">limit</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span>\n      <span class=\"kt\">size_t</span> <span class=\"n\">left</span><span class=\"p\">,</span>\n      <span class=\"kt\">size_t</span> <span class=\"n\">right</span><span class=\"p\">,</span>\n      <span class=\"k\">const</span> <span class=\"o\">&amp;</span> <span class=\"n\">RangesInDataParts</span> <span class=\"n\">ranges</span><span class=\"p\">,</span>\n      <span class=\"kt\">size_t</span> <span class=\"n\">limit</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"../development/tests/\"></a><a name=\"../../../../../development/tests/\"></a><a name=\"../../development/tests/\"></a><a name=\"../../../development/tests/\"></a><a name=\"../../../../development/tests/\"></a><a name=\"tests/\"></a><a name=\"development/tests/\"></a></p>\n<h2 id=\"clickhouse-ce-shi\">ClickHouse \u6d4b\u8bd5<a class=\"headerlink\" href=\"#clickhouse-ce-shi\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"gong-neng-xing-ce-shi\">\u529f\u80fd\u6027\u6d4b\u8bd5<a class=\"headerlink\" href=\"#gong-neng-xing-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u529f\u80fd\u6027\u6d4b\u8bd5\u662f\u6700\u7b80\u4fbf\u4f7f\u7528\u7684\u3002\u7edd\u5927\u90e8\u5206 ClickHouse \u7684\u529f\u80fd\u53ef\u4ee5\u901a\u8fc7\u529f\u80fd\u6027\u6d4b\u8bd5\u6765\u6d4b\u8bd5\uff0c\u4efb\u4f55\u4ee3\u7801\u7684\u66f4\u6539\u90fd\u5fc5\u987b\u901a\u8fc7\u8be5\u6d4b\u8bd5\u3002</p>\n<p>\u6bcf\u4e2a\u529f\u80fd\u6d4b\u8bd5\u4f1a\u5411\u6b63\u5728\u8fd0\u884c\u7684 ClickHouse\u670d \u52a1\u5668\u53d1\u9001\u4e00\u4e2a\u6216\u591a\u4e2a\u67e5\u8be2\uff0c\u5e76\u5c06\u7ed3\u679c\u4e0e\u9884\u671f\u7ed3\u679c\u8fdb\u884c\u6bd4\u8f83\u3002</p>\n<p>\u6d4b\u8bd5\u7528\u4f8b\u5728 <code>dbms/src/tests/queries</code> \u76ee\u5f55\u4e2d\u3002\u8fd9\u91cc\u6709\u4e24\u4e2a\u5b50\u76ee\u5f55\uff1a<code>stateless</code> \u548c <code>stateful</code>\u76ee\u5f55\u3002 \u65e0\u72b6\u6001\u7684\u6d4b\u8bd5\u65e0\u9700\u9884\u52a0\u8f7d\u6d4b\u8bd5\u6570\u636e\u96c6 - \u901a\u5e38\u662f\u5728\u6d4b\u8bd5\u8fd0\u884c\u671f\u95f4\u52a8\u6001\u521b\u5efa\u5c0f\u91cf\u7684\u6570\u636e\u96c6\u3002\u6709\u72b6\u6001\u6d4b\u8bd5\u9700\u8981\u6765\u81ea Yandex.Metrica \u7684\u9884\u52a0\u8f7d\u6d4b\u8bd5\u6570\u636e\uff0c\u800c\u4e0d\u5411\u4e00\u822c\u516c\u4f17\u63d0\u4f9b\u3002 \u6211\u4eec\u503e\u5411\u4e8e\u4ec5\u4f7f\u7528\u201c\u65e0\u72b6\u6001\u201d\u6d4b\u8bd5\u5e76\u907f\u514d\u6dfb\u52a0\u65b0\u7684\u201c\u6709\u72b6\u6001\u201d\u6d4b\u8bd5\u3002</p>\n<p>\u6bcf\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u53ef\u4ee5\u662f\u4e24\u79cd\u7c7b\u578b\u4e4b\u4e00\uff1a<code>.sql</code> \u548c <code>.sh</code>\u3002<code>.sql</code> \u6d4b\u8bd5\u6587\u4ef6\u662f\u7528\u4e8e\u7ba1\u7406<code>clickhouse-client --multiquery --testmode</code>\u7684\u7b80\u5355SQL\u811a\u672c\u3002<code>.sh</code> \u6d4b\u8bd5\u6587\u4ef6\u662f\u4e00\u4e2a\u53ef\u4ee5\u81ea\u5df1\u8fd0\u884c\u7684\u811a\u672c\u3002</p>\n<p>\u8981\u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\uff0c\u8bf7\u4f7f\u7528 <code>dbms/tests/clickhouse-test</code> \u5de5\u5177\uff0c\u7528 <code>--help</code> \u53ef\u4ee5\u83b7\u53d6\u6240\u6709\u7684\u9009\u9879\u5217\u8868\u3002\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\u6216\u8fd0\u884c\u6d4b\u8bd5\u540d\u79f0\u4e2d\u7684\u5b50\u5b57\u7b26\u4e32\u8fc7\u6ee4\u7684\u6d4b\u8bd5\u5b50\u96c6\uff1a<code>./clickhouse-test substring</code>\u3002</p>\n<p>\u8c03\u7528\u529f\u80fd\u6d4b\u8bd5\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5c06 <code>clickhouse-client</code> \u590d\u5236\u5230<code>/usr/bin/</code>\uff0c\u8fd0\u884c<code>clickhouse-server</code>\uff0c\u7136\u540e\u4ece\u81ea\u5df1\u7684\u76ee\u5f55\u8fd0\u884c<code>./ clickhouse-test</code>\u3002</p>\n<p>\u8981\u6dfb\u52a0\u65b0\u6d4b\u8bd5\uff0c\u8bf7\u5728 <code>dbms/src/tests/queries/0_stateless</code> \u76ee\u5f55\u5185\u6dfb\u52a0\u65b0\u7684 <code>.sql</code> \u6216 <code>.sh</code> \u6587\u4ef6\uff0c\u624b\u52a8\u68c0\u67e5\uff0c\u7136\u540e\u6309\u4ee5\u4e0b\u65b9\u5f0f\u751f\u6210 <code>.reference</code> \u6587\u4ef6\uff1a <code>clickhouse-client -n --testmode &lt; 00000_test.sql &gt; 00000_test.reference</code> or <code>./00000_test.sh &gt; ./00000_test.reference</code>\u3002</p>\n<p>\u6d4b\u8bd5\u5e94\u8be5\u53ea\u4f7f\u7528\uff08\u521b\u5efa\uff0c\u5220\u9664\u7b49\uff09<code>test</code> \u6570\u636e\u5e93\u4e2d\u7684\u8868\uff0c\u8fd9\u4e9b\u8868\u5047\u5b9a\u662f\u4e8b\u5148\u521b\u5efa\u7684; \u6d4b\u8bd5\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e34\u65f6\u8868\u3002</p>\n<p>\u5982\u679c\u8981\u5728\u529f\u80fd\u6d4b\u8bd5\u4e2d\u4f7f\u7528\u5206\u5e03\u5f0f\u67e5\u8be2\uff0c\u53ef\u4ee5\u5229\u7528 <code>remote</code> \u8868\u51fd\u6570\u548c <code>127.0.0.{1..2}</code> \u5730\u5740\u4e3a\u670d\u52a1\u5668\u67e5\u8be2\u81ea\u8eab; \u6216\u8005\u60a8\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u9884\u5b9a\u4e49\u7684\u6d4b\u8bd5\u96c6\u7fa4\uff0c\u4f8b\u5982<code>test_shard_localhost</code>\u3002</p>\n<p>\u6709\u4e9b\u6d4b\u8bd5\u5728\u540d\u79f0\u4e2d\u6807\u6709 <code>zookeeper</code>\uff0c<code>shard</code> \u6216 <code>long</code>\u3002<code>zookeeper</code> \u7528\u4e8e\u4f7f\u7528ZooKeeper\u7684\u6d4b\u8bd5; <code>shard</code> \u7528\u4e8e\u9700\u8981\u670d\u52a1\u5668\u76d1\u542c<code>127.0.0.*</code>\u7684\u6d4b\u8bd5\u3002<code>long</code> \u9002\u7528\u4e8e\u8fd0\u884c\u65f6\u95f4\u7a0d\u957f\u4e00\u79d2\u7684\u6d4b\u8bd5\u3002</p>\n<h3 id=\"yi-zhi-de-bug\">\u5df2\u77e5\u7684bug<a class=\"headerlink\" href=\"#yi-zhi-de-bug\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5982\u679c\u6211\u4eec\u77e5\u9053\u4e00\u4e9b\u53ef\u4ee5\u901a\u8fc7\u529f\u80fd\u6d4b\u8bd5\u8f7b\u677e\u590d\u5236\u7684\u9519\u8bef\uff0c\u6211\u4eec\u5c06\u51c6\u5907\u597d\u7684\u529f\u80fd\u6d4b\u8bd5\u653e\u5728 <code>dbms/src/tests/queries/bugs</code> \u76ee\u5f55\u4e2d\u3002\u5f53\u4fee\u590d\u9519\u8bef\u65f6\uff0c\u8fd9\u4e9b\u6d4b\u8bd5\u5c06\u88ab\u79fb\u52a8\u5230 <code>dbms/src/tests/queries/0_stateless</code> \u76ee\u5f55\u4e2d\u3002</p>\n<h3 id=\"ji-cheng-ce-shi\">\u96c6\u6210\u6d4b\u8bd5<a class=\"headerlink\" href=\"#ji-cheng-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u96c6\u6210\u6d4b\u8bd5\u5141\u8bb8\u5728\u96c6\u7fa4\u914d\u7f6e\u4e2d\u6d4b\u8bd5 ClickHouse\uff0c\u5e76\u4e0e\u5176\u4ed6\u670d\u52a1\u5668\uff08\u5982MySQL\uff0cPostgres\uff0cMongoDB\uff09\u8fdb\u884c ClickHouse \u4ea4\u4e92\u3002\u5b83\u4eec\u53ef\u7528\u4e8e\u6a21\u62df\u7f51\u7edc\u62c6\u5206\uff0c\u6570\u636e\u5305\u4e22\u5f03\u7b49\u3002\u8fd9\u4e9b\u6d4b\u8bd5\u5728Docker \u4e0b\u8fd0\u884c\uff0c\u5e76\u4f7f\u7528\u5404\u79cd\u8f6f\u4ef6\u521b\u5efa\u591a\u4e2a\u5bb9\u5668\u3002</p>\n<p>\u53c2\u8003 <code>dbms/tests/integration/README.md</code> \u6587\u6863\u5173\u4e8e\u5982\u4f55\u4f7f\u7528\u96c6\u6210\u6d4b\u8bd5\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0cClickHouse \u4e0e\u7b2c\u4e09\u65b9\u9a71\u52a8\u7a0b\u5e8f\u7684\u96c6\u6210\u672a\u7ecf\u8fc7\u6d4b\u8bd5\u3002\u6b64\u5916\uff0c\u6211\u4eec\u76ee\u524d\u8fd8\u6ca1\u6709\u4e0e JDBC \u548cODBC \u9a71\u52a8\u7a0b\u5e8f\u8fdb\u884c\u96c6\u6210\u6d4b\u8bd5\u3002</p>\n<h3 id=\"dan-yuan-ce-shi\">\u5355\u5143\u6d4b\u8bd5<a class=\"headerlink\" href=\"#dan-yuan-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5f53\u60a8\u60f3\u8981\u6d4b\u8bd5\u6574\u4e2a ClickHouse\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u72ec\u7acb\u7684\u5e93\u6216\u7c7b\u65f6\uff0c\u5355\u5143\u6d4b\u8bd5\u975e\u5e38\u6709\u7528\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528<code>ENABLE_TESTS</code> CMake \u9009\u9879\u542f\u7528\u6216\u7981\u7528\u6d4b");
            
            document.write("\u8bd5\u6784\u5efa\u3002\u5355\u5143\u6d4b\u8bd5\uff08\u548c\u5176\u4ed6\u6d4b\u8bd5\u7a0b\u5e8f\uff09\u4f4d\u4e8e\u4ee3\u7801\u4e2d\u7684<code>tests</code> \u5b50\u76ee\u5f55\u4e2d\u3002\u8981\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\uff0c\u8bf7\u952e\u5165 <code>ninja test</code>\u3002\u6709\u4e9b\u6d4b\u8bd5\u4f7f\u7528 <code>gtest</code>\uff0c\u4f46\u6709\u4e9b\u53ea\u662f\u5728\u6d4b\u8bd5\u5931\u8d25\u65f6\u8fd4\u56de\u975e\u96f6\u72b6\u6001\u7801\u3002</p>\n<p>\u5982\u679c\u4ee3\u7801\u5df2\u7ecf\u88ab\u529f\u80fd\u6d4b\u8bd5\u8986\u76d6\uff08\u5e76\u4e14\u529f\u80fd\u6d4b\u8bd5\u901a\u5e38\u4f7f\u7528\u8d77\u6765\u8981\u7b80\u5355\u5f97\u591a\uff09\uff0c\u5219\u4e0d\u4e00\u5b9a\u8981\u8fdb\u884c\u5355\u5143\u6d4b\u8bd5\u3002</p>\n<h3 id=\"xing-neng-ce-shi\">\u6027\u80fd\u6d4b\u8bd5<a class=\"headerlink\" href=\"#xing-neng-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6027\u80fd\u6d4b\u8bd5\u5141\u8bb8\u6d4b\u91cf\u548c\u6bd4\u8f83\u7efc\u5408\u67e5\u8be2\u4e2d ClickHouse \u7684\u67d0\u4e9b\u72ec\u7acb\u90e8\u5206\u7684\u6027\u80fd\u3002\u6d4b\u8bd5\u4f4d\u4e8e<code>dbms/tests/performance</code> \u76ee\u5f55\u4e2d\u3002\u6bcf\u4e2a\u6d4b\u8bd5\u90fd\u7531 <code>.xml</code> \u6587\u4ef6\u8868\u793a\uff0c\u5e76\u9644\u6709\u6d4b\u8bd5\u7528\u4f8b\u7684\u63cf\u8ff0\u3002\u4f7f\u7528 <code>clickhouse performance-test</code> \u5de5\u5177\uff08\u5d4c\u5165\u5728 <code>clickhouse</code> \u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\uff09\u8fd0\u884c\u6d4b\u8bd5\u3002\u8bf7\u53c2\u9605 <code>--help</code> \u4ee5\u8fdb\u884c\u8c03\u7528\u3002</p>\n<p>\u6bcf\u4e2a\u6d4b\u8bd5\u5728\u5faa\u73af\u4e2d\u8fd0\u884c\u4e00\u4e2a\u6216\u591a\u4e2a\u67e5\u8be2\uff08\u53ef\u80fd\u5e26\u6709\u53c2\u6570\u7ec4\u5408\uff09\uff0c\u5e76\u5177\u6709\u4e00\u4e9b\u505c\u6b62\u6761\u4ef6\uff08\u5982\u201c\u6700\u5927\u6267\u884c\u901f\u5ea6\u4e0d\u4f1a\u5728\u4e09\u79d2\u5185\u66f4\u6539\u201d\uff09\u5e76\u6d4b\u91cf\u4e00\u4e9b\u6709\u5173\u67e5\u8be2\u6027\u80fd\u7684\u6307\u6807\uff08\u5982\u201c\u6700\u5927\u6267\u884c\u901f\u5ea6\u201d\uff09\uff09\u3002\u67d0\u4e9b\u6d4b\u8bd5\u53ef\u4ee5\u5305\u542b\u9884\u52a0\u8f7d\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\u7684\u524d\u63d0\u6761\u4ef6\u3002</p>\n<p>\u5982\u679c\u8981\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u63d0\u9ad8 ClickHouse \u7684\u6027\u80fd\uff0c\u5e76\u4e14\u5982\u679c\u53ef\u4ee5\u5728\u7b80\u5355\u67e5\u8be2\u4e0a\u89c2\u5bdf\u5230\u6539\u8fdb\uff0c\u5219\u5f3a\u70c8\u5efa\u8bae\u7f16\u5199\u6027\u80fd\u6d4b\u8bd5\u3002\u5728\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u4f7f\u7528 <code>perf top</code> \u6216\u5176\u4ed6 perf \u5de5\u5177\u603b\u662f\u6709\u610f\u4e49\u7684\u3002</p>\n<p>\u6027\u80fd\u6d4b\u8bd5\u4e0d\u662f\u57fa\u4e8e\u6bcf\u4e2a\u63d0\u4ea4\u8fd0\u884c\u7684\u3002\u4e0d\u6536\u96c6\u6027\u80fd\u6d4b\u8bd5\u7ed3\u679c\uff0c\u6211\u4eec\u624b\u52a8\u6bd4\u8f83\u5b83\u4eec\u3002</p>\n<h3 id=\"ce-shi-gong-ju-he-jiao-ben\">\u6d4b\u8bd5\u5de5\u5177\u548c\u811a\u672c<a class=\"headerlink\" href=\"#ce-shi-gong-ju-he-jiao-ben\" title=\"Permanent link\">&para;</a></h3>\n<p><code>tests</code>\u76ee\u5f55\u4e2d\u7684\u4e00\u4e9b\u7a0b\u5e8f\u4e0d\u662f\u51c6\u5907\u6d4b\u8bd5\uff0c\u800c\u662f\u6d4b\u8bd5\u5de5\u5177\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e<code>Lexer</code>\uff0c\u6709\u4e00\u4e2a\u5de5\u5177<code>dbms/src/Parsers/tests/lexer</code> \u6807\u51c6\u8f93\u51fa\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u5de5\u5177\u4f5c\u4e3a\u4ee3\u7801\u793a\u4f8b\u4ee5\u53ca\u63a2\u7d22\u548c\u624b\u52a8\u6d4b\u8bd5\u3002</p>\n<p>\u60a8\u8fd8\u53ef\u4ee5\u5c06\u4e00\u5bf9\u6587\u4ef6 <code>.sh</code> \u548c <code>.reference</code> \u4e0e\u5de5\u5177\u653e\u5728\u4e00\u4e9b\u9884\u5b9a\u4e49\u7684\u8f93\u5165\u4e0a\u8fd0\u884c\u5b83 - \u7136\u540e\u53ef\u4ee5\u5c06\u811a\u672c\u7ed3\u679c\u4e0e <code>.reference</code> \u6587\u4ef6\u8fdb\u884c\u6bd4\u8f83\u3002\u8fd9\u4e9b\u6d4b\u8bd5\u4e0d\u662f\u81ea\u52a8\u5316\u7684\u3002</p>\n<h3 id=\"za-xiang-ce-shi\">\u6742\u9879\u6d4b\u8bd5<a class=\"headerlink\" href=\"#za-xiang-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6709\u4e00\u4e9b\u5916\u90e8\u5b57\u5178\u7684\u6d4b\u8bd5\u4f4d\u4e8e <code>dbms/tests/external_dictionaries</code>\uff0c\u673a\u5668\u5b66\u4e60\u6a21\u578b\u5728<code>dbms/tests/external_models</code>\u76ee\u5f55\u3002\u8fd9\u4e9b\u6d4b\u8bd5\u672a\u66f4\u65b0\uff0c\u5fc5\u987b\u8f6c\u79fb\u5230\u96c6\u6210\u6d4b\u8bd5\u3002</p>\n<p>\u5bf9\u4e8e\u5206\u5e03\u5f0f\u6570\u636e\u7684\u63d2\u5165\uff0c\u6709\u5355\u72ec\u7684\u6d4b\u8bd5\u3002\u6b64\u6d4b\u8bd5\u5728\u5355\u72ec\u7684\u670d\u52a1\u5668\u4e0a\u8fd0\u884c ClickHouse \u96c6\u7fa4\u5e76\u6a21\u62df\u5404\u79cd\u6545\u969c\u60c5\u51b5\uff1a\u7f51\u7edc\u62c6\u5206\uff0c\u6570\u636e\u5305\u4e22\u5f03\uff08ClickHouse \u8282\u70b9\u4e4b\u95f4\uff0cClickHouse \u548c ZooKeeper\u4e4b\u95f4\uff0cClickHouse \u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7b49\uff09\uff0c\u8fdb\u884c <code>kill -9</code>\uff0c<code>kill -STOP</code> \u548c<code>kill -CONT</code> \u7b49\u64cd\u4f5c\uff0c\u7c7b\u4f3c<a href=\"https://aphyr.com/tags/Jepsen\" rel=\"external nofollow noreferrer\">Jepsen</a>\u3002\u7136\u540e\uff0c\u6d4b\u8bd5\u68c0\u67e5\u662f\u5426\u5df2\u5199\u5165\u6240\u6709\u5df2\u786e\u8ba4\u7684\u63d2\u5165\uff0c\u5e76\u4e14\u6240\u6709\u5df2\u62d2\u7edd\u7684\u63d2\u5165\u90fd\u672a\u5199\u5165\u3002</p>\n<p>\u5728 ClickHouse \u5f00\u6e90\u4e4b\u524d\uff0c\u5206\u5e03\u5f0f\u6d4b\u8bd5\u662f\u7531\u5355\u72ec\u7684\u56e2\u961f\u7f16\u5199\u7684\uff0c\u4f46\u8be5\u56e2\u961f\u4e0d\u518d\u4f7f\u7528 ClickHouse\uff0c\u6d4b\u8bd5\u662f\u5728 Java \u4e2d\u610f\u5916\u7f16\u5199\u7684\u3002\u7531\u4e8e\u8fd9\u4e9b\u539f\u56e0\uff0c\u5fc5\u987b\u91cd\u5199\u5206\u5e03\u5f0f\u6d4b\u8bd5\u5e76\u5c06\u5176\u79fb\u81f3\u96c6\u6210\u6d4b\u8bd5\u3002</p>\n<h3 id=\"shou-dong-ce-shi\">\u624b\u52a8\u6d4b\u8bd5<a class=\"headerlink\" href=\"#shou-dong-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5f53\u60a8\u5f00\u53d1\u4e86\u65b0\u7684\u529f\u80fd\uff0c\u505a\u624b\u52a8\u6d4b\u8bd5\u4e5f\u662f\u5408\u7406\u7684\u3002\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u6765\u8fdb\u884c\uff1a</p>\n<p>\u7f16\u8bd1 ClickHouse\u3002\u5728\u547d\u4ee4\u884c\u4e2d\u8fd0\u884c ClickHouse\uff1a\u8fdb\u5165 <code>dbms/src/programs/clickhouse-server</code> \u76ee\u5f55\u5e76\u8fd0\u884c <code>./clickhouse-server</code>\u3002\u5b83\u4f1a\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u7684\u914d\u7f6e\u6587\u4ef6 (<code>config.xml</code>\uff0c <code>users.xml</code> \u4ee5\u53ca\u5728 <code>config.d</code> \u548c <code>users.d</code> \u76ee\u5f55\u7684\u6587\u4ef6)\u3002\u53ef\u4ee5\u4f7f\u7528 <code>dbms/src/programs/clickhouse-client/clickhouse-client</code> \u6765\u8fde\u63a5\u6570\u636e\u5e93\u3002</p>\n<p>\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u5b89\u88c5 ClickHouse \u8f6f\u4ef6\u5305\uff1a\u4ece Yandex \u5b58\u50a8\u5e93\u4e2d\u83b7\u5f97\u7a33\u5b9a\u7248\u672c\uff0c\u6216\u8005\u60a8\u53ef\u4ee5\u5728ClickHouse\u6e90\u6839\u76ee\u5f55\u4e2d\u4f7f\u7528 <code>./release</code> \u6784\u5efa\u81ea\u5df1\u7684\u8f6f\u4ef6\u5305\u3002\u7136\u540e\u4f7f\u7528 <code>sudo service clickhouse-server start</code> \u542f\u52a8\u670d\u52a1\u5668\uff08\u6216\u505c\u6b62\u670d\u52a1\u5668\uff09\u3002\u5728 <code>/etc/clickhouse-server/clickhouse-server.log</code> \u4e2d\u67e5\u627e\u65e5\u5fd7\u3002</p>\n<p>\u5f53\u60a8\u7684\u7cfb\u7edf\u4e0a\u5df2\u7ecf\u5b89\u88c5\u4e86 ClickHouse \u65f6\uff0c\u60a8\u53ef\u4ee5\u6784\u5efa\u4e00\u4e2a\u65b0\u7684 <code>clickhouse</code> \u4e8c\u8fdb\u5236\u6587\u4ef6\u5e76\u66ff\u6362\u73b0\u6709\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">sudo service clickhouse-server stop</span>\n<span class=\"err\">sudo cp ./clickhouse /usr/bin/</span>\n<span class=\"err\">sudo service clickhouse-server start</span>\n</code></pre></div>\n\n\n<p>\u60a8\u4e5f\u53ef\u4ee5\u505c\u6b62 clickhouse-server \u5e76\u4f7f\u7528\u76f8\u540c\u7684\u914d\u7f6e\u8fd0\u884c\u60a8\u81ea\u5df1\u7684\u670d\u52a1\u5668\uff0c\u65e5\u5fd7\u6253\u5370\u5230\u7ec8\u7aef\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">sudo service clickhouse-server stop</span>\n<span class=\"err\">sudo -u clickhouse /usr/bin/clickhouse server --config-file /etc/clickhouse-server/config.xml</span>\n</code></pre></div>\n\n\n<p>\u4f7f\u7528 gdb \u7684\u4e00\u4e2a\u793a\u4f8b:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">sudo -u clickhouse gdb --args /usr/bin/clickhouse server --config-file /etc/clickhouse-server/config.xml</span>\n</code></pre></div>\n\n\n<p>\u5982\u679c clickhouse-server \u5df2\u7ecf\u8fd0\u884c\u5e76\u4e14\u60a8\u4e0d\u60f3\u505c\u6b62\u5b83\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539 <code>config.xml</code> \u4e2d\u7684\u7aef\u53e3\u53f7\uff08\u6216\u5728 <code>config.d</code> \u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u4e2d\u8986\u76d6\u5b83\u4eec\uff09\uff0c\u914d\u7f6e\u9002\u5f53\u7684\u6570\u636e\u8def\u5f84\uff0c\u7136\u540e\u8fd0\u884c\u5b83\u3002</p>\n<p><code>clickhouse</code> \u4e8c\u8fdb\u5236\u6587\u4ef6\u51e0\u4e4e\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u9002\u7528\u4e8e\u5404\u79cd Linux \u53d1\u884c\u7248\u3002\u8981\u5feb\u901f\u5730\u6d4b\u8bd5\u670d\u52a1\u5668\u4e0a\u7684\u66f4\u6539\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u5c06\u65b0\u5efa\u7684 <code>clickhouse</code> \u4e8c\u8fdb\u5236\u6587\u4ef6 <code>scp</code> \u5230\u5176\u4ed6\u670d\u52a1\u5668\uff0c\u7136\u540e\u6309\u7167\u4e0a\u9762\u7684\u793a\u4f8b\u8fd0\u884c\u5b83\u3002</p>\n<h3 id=\"ce-shi-huan-jing\">\u6d4b\u8bd5\u73af\u5883<a class=\"headerlink\" href=\"#ce-shi-huan-jing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5728\u5c06\u7248\u672c\u53d1\u5e03\u4e3a\u7a33\u5b9a\u4e4b\u524d\uff0c\u6211\u4eec\u5c06\u5176\u90e8\u7f72\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d \u6d4b\u8bd5\u73af\u5883\u662f\u4e00\u4e2a\u5904\u7406[Yandex.Metrica]\uff08<a href=\"https://metrica.yandex.com/\">https://metrica.yandex.com/</a>\uff09\u603b\u6570\u636e\u76841/39\u90e8\u5206\u5927\u5c0f\u7684\u96c6\u7fa4\u3002 \u6211\u4eec\u4e0e Yandex.Metrica \u56e2\u961f\u516c\u7528\u6211\u4eec\u7684\u6d4b\u8bd5\u73af\u5883\u3002ClickHouse \u5728\u73b0\u6709\u6570\u636e\u7684\u57fa\u7840\u4e0a\u65e0\u9700\u505c\u673a\u5373\u53ef\u5347\u7ea7\u3002 \u6211\u4eec\u9996\u5148\u770b\u5230\u6570\u636e\u5904\u7406\u6210\u529f\u800c\u4e0d\u4f1a\u5b9e\u65f6\u6ede\u540e\uff0c\u590d\u5236\u7ee7\u7eed\u5de5\u4f5c\uff0c\u5e76\u4e14 Yandex.Metrica \u56e2\u961f\u65e0\u6cd5\u770b\u5230\u95ee\u9898\u3002 \u9996\u5148\u7684\u68c0\u67e5\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5b8c\u6210\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">SELECT hostName() AS h, any(version()), any(uptime()), max(UTCEventTime), count() FROM remote(&#39;example01-01-{1..3}t&#39;, merge, hits) WHERE EventDate &gt;= today() - 2 GROUP BY h ORDER BY h;</span>\n</code></pre></div>\n\n\n<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u8fd8\u90e8\u7f72\u5230 Yandex \u7684\u5408\u4f5c\u56e2\u961f\u7684\u6d4b\u8bd5\u73af\u5883\uff1a\u5e02\u573a\uff0c\u4e91\u7b49\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u6709\u4e00\u4e9b\u7528\u4e8e\u5f00\u53d1\u76ee\u7684\u7684\u786c\u4ef6\u670d\u52a1\u5668\u3002</p>\n<h3 id=\"fu-zai-ce-shi\">\u8d1f\u8f7d\u6d4b\u8bd5<a class=\"headerlink\" href=\"#fu-zai-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u90e8\u7f72\u5230\u6d4b\u8bd5\u73af\u5883\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u751f\u4ea7\u7fa4\u96c6\u4e2d\u7684\u67e5\u8be2\u8fd0\u884c\u8d1f\u8f7d\u6d4b\u8bd5\u3002 \u8fd9\u662f\u624b\u52a8\u5b8c\u6210\u7684\u3002</p>\n<p>\u786e\u4fdd\u5728\u751f\u4ea7\u96c6\u7fa4\u4e2d\u5f00\u542f\u4e86 <code>query_log</code> \u9009\u9879\u3002</p>\n<p>\u6536\u96c6\u4e00\u5929\u6216\u66f4\u591a\u7684\u67e5\u8be2\u65e5\u5fd7\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">clickhouse-client --query=&quot;SELECT DISTINCT query FROM system.query_log WHERE event_date = today() AND query LIKE &#39;%ym:%&#39; AND query NOT LIKE &#39;%system.query_log%&#39; AND type = 2 AND is_initial_query&quot; &gt; queries.tsv</span>\n</code></pre></div>\n\n\n<p>\u8fd9\u662f\u4e00\u4e2a\u590d\u6742\u7684\u4f8b\u5b50\u3002<code>type = 2</code> \u5c06\u8fc7\u6ee4\u6210\u529f\u6267\u884c\u7684\u67e5\u8be2\u3002<code>query LIKE'\uff05ym\uff1a\uff05'</code> \u7528\u4e8e\u4ece Yandex.Metrica \u4e2d\u9009\u62e9\u76f8\u5173\u67e5\u8be2\u3002<code>is_initial_query</code> \u662f\u4ec5\u9009\u62e9\u7531\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u67e5\u8be2\uff0c\u800c\u4e0d\u662f\u7531 ClickHouse \u672c\u8eab\uff08\u4f5c\u4e3a\u5206\u5e03\u5f0f\u67e5\u8be2\u5904\u7406\u7684\u4e00\u90e8\u5206\uff09\u3002</p>\n<p><code>scp</code> \u8fd9\u4efd\u65e5\u5fd7\u5230\u6d4b\u8bd5\u673a\u5668\uff0c\u5e76\u8fd0\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">clickhouse benchmark --concurrency 16 &lt; queries.tsv</span>\n</code></pre></div>\n\n\n<p>(\u53ef\u80fd\u4f60\u9700\u8981\u6307\u5b9a\u8fd0\u884c\u7684\u7528\u6237 <code>--user</code>)</p>\n<p>\u7136\u540e\u79bb\u5f00\u5b83\u4e00\u665a\u6216\u5468\u672b\u4f11\u606f\u4e00\u4e0b\u3002</p>\n<p>\u4f60\u8981\u68c0\u67e5\u4e0b <code>clickhouse-server</code> \u662f\u5426\u5d29\u6e83\uff0c\u5185\u5b58\u5360\u7528\u662f\u5426\u5408\u7406\uff0c\u6027\u80fd\u4e5f\u4e0d\u4f1a\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u964d\u4f4e\u3002</p>\n<p>\u7531\u4e8e\u67e5\u8be2\u548c\u73af\u5883\u7684\u9ad8\u5ea6\u53ef\u53d8\u6027\uff0c\u4e0d\u4f1a\u8bb0\u5f55\u7cbe\u786e\u7684\u67e5\u8be2\u6267\u884c\u65f6\u5e8f\u5e76\u4e14\u4e0d\u8fdb\u884c\u6bd4\u8f83\u3002</p>\n<h3 id=\"bian-yi-ce-shi\">\u7f16\u8bd1\u6d4b\u8bd5<a class=\"headerlink\" href=\"#bian-yi-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6784\u5efa\u6d4b\u8bd5\u5141\u8bb8\u68c0\u67e5\u6784\u5efa\u5728\u5404\u79cd\u66ff\u4ee3\u914d\u7f6e\u548c\u67d0\u4e9b\u5916\u90e8\u7cfb\u7edf\u4e0a\u662f\u5426\u88ab\u7834\u574f\u3002\u6d4b\u8bd5\u4f4d\u4e8e<code>ci</code>\u76ee\u5f55\u3002 \u5b83\u4eec\u4ece Docker\uff0cVagrant \u4e2d\u7684\u6e90\u4ee3\u7801\u8fd0\u884c\u6784\u5efa\uff0c\u6709\u65f6\u5728 Docker \u4e2d\u8fd0\u884c <code>qemu-user-static</code>\u3002\u8fd9\u4e9b\u6d4b\u8bd5\u6b63\u5728\u5f00\u53d1\u4e2d\uff0c\u6d4b\u8bd5\u8fd0\u884c\u4e0d\u662f\u81ea\u52a8\u5316\u7684\u3002</p>\n<p>\u52a8\u673a\uff1a</p>\n<p>\u901a\u5e38\u6211\u4eec\u4f1a\u5728 ClickHouse \u6784\u5efa\u7684\u5355\u4e2a\u7248\u672c\u4e0a\u53d1\u5e03\u5e76\u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\u3002 \u4f46\u662f\u6709\u4e00\u4e9b\u672a\u7ecf\u8fc7\u5f7b\u5e95\u6d4b\u8bd5\u7684\u66ff\u4ee3\u6784\u5efa\u7248\u672c\u3002 \u4f8b\u5b50\uff1a</p>\n<ul>\n<li>\u5728 FreeBSD \u4e2d\u7684\u6784\u5efa\uff1b</li>\n<li>\u5728 Debian \u4e2d\u4f7f\u7528\u7cfb\u7edf\u5305\u4e2d\u7684\u5e93\u8fdb\u884c\u6784\u5efa\uff1b</li>\n<li>\u4f7f\u7528\u5e93\u7684\u5171\u4eab\u94fe\u63a5\u6784\u5efa\uff1b</li>\n<li>\u5728 AArch64 \u5e73\u53f0\u8fdb\u884c\u6784\u5efa\u3002</li>\n</ul>\n<p>\u4f8b\u5982\uff0c\u4f7f\u7528\u7cfb\u7edf\u5305\u6784\u5efa\u662f\u4e0d\u597d\u7684\u505a\u6cd5\uff0c\u56e0\u4e3a\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u7cfb\u7edf\u5177\u6709\u7684\u786e\u5207\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u3002\u4f46 Debian \u7ef4\u62a4\u8005\u786e\u5b9e\u9700\u8981\u8fd9\u6837\u505a\u3002\u51fa\u4e8e\u8fd9\u4e2a\u539f\u56e0\uff0c\u6211\u4eec\u81f3\u5c11\u5fc5\u987b\u652f\u6301\u8fd9\u79cd\u6784\u5efa\u3002\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff1a\u5171\u4eab\u94fe\u63a5\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u9ebb\u70e6\u6765\u6e90\uff0c\u4f46\u662f\u5bf9\u4e8e\u4e00\u4e9b\u7231\u597d\u8005\u6765\u8bf4\u9700\u8981\u5b83\u3002</p>\n<p>\u867d\u7136\u6211\u4eec\u65e0\u6cd5\u5bf9\u6240\u6709\u6784\u5efa\u7248\u672c\u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\uff0c\u4f46\u6211\u4eec\u60f3\u8981\u68c0\u67e5\u81f3\u5c11\u4e0d\u4f1a\u7834\u574f\u5404\u79cd\u6784\u5efa\u53d8\u4f53\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u6784\u5efa\u6d4b\u8bd5\u3002</p>\n<h3 id=\"ce-shi-xie-yi-jian-rong-xing\">\u6d4b\u8bd5\u534f\u8bae\u517c\u5bb9\u6027<a class=\"headerlink\" href=\"#ce-shi-xie-yi-jian-rong-xing\" title=\"Permanent link\">&para;</a></h3>\n<p>\u5f53\u6211\u4eec\u6269\u5c55 ClickHouse \u7f51\u7edc\u534f\u8bae\u65f6\uff0c\u6211\u4eec\u624b\u52a8\u6d4b\u8bd5\u65e7\u7684 clickhouse-client \u4e0e\u65b0\u7684 clickhouse-server \u548c\u65b0\u7684clickhouse-client \u4e00\u8d77\u4f7f\u7528\u65e7\u7684 clickhouse-server (\u53ea\u9700\u4ece\u76f8\u5e94\u7684\u5305\u4e2d\u8fd0\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6)</p>\n<h3 id=\"lai-zi-bian-yi-qi-de-bang-zhu\">\u6765\u81ea\u7f16\u8bd1\u5668\u7684\u5e2e\u52a9<a class=\"headerlink\" href=\"#lai-zi-bian-yi-qi-de-bang-zhu\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse \u4e3b\u8981\u7684\u4ee3\u7801 (\u4f4d\u4e8e<code>dbms</code>\u76ee\u5f55\u4e2d) \u4f7f\u7528 <code>-Wall -Wextra -Werror</code> \u6784\u5efa\uff0c\u5e76\u5e26\u6709\u4e00\u4e9b\u5176\u4ed6\u5df2\u542f\u7528\u7684\u8b66\u544a\u3002 \u867d\u7136\u6ca1\u6709\u4e3a\u7b2c\u4e09\u65b9\u5e93\u542f\u7528\u8fd9\u4e9b\u9009\u9879\u3002</p>\n<p>Clang \u6709\u66f4\u591a\u6709\u7528\u7684\u8b66\u544a - \u60a8\u53ef\u4ee5\u4f7f\u7528 <code>-Weverything</code> \u67e5\u627e\u5b83\u4eec\u5e76\u9009\u62e9\u9ed8\u8ba4\u6784\u5efa\u7684\u4e1c\u897f\u3002</p>\n<p>\u5bf9\u4e8e\u751f\u4ea7\u6784\u5efa\uff0c\u4f7f\u7528 gcc\uff08\u5b83\u4ecd\u7136\u751f\u6210\u6bd4 clang \u7a0d\u9ad8\u6548\u7684\u4ee3\u7801\uff09\u3002\u5bf9\u4e8e\u5f00\u53d1\u6765\u8bf4\uff0cclang \u901a\u5e38\u66f4\u65b9\u4fbf\u4f7f\u7528\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u8c03\u8bd5\u6a21\u5f0f\u5728\u81ea\u5df1\u7684\u673a\u5668\u4e0a\u6784\u5efa\uff08\u4ee5\u8282\u7701\u7b14\u8bb0\u672c\u7535\u8111\u7684\u7535\u91cf\uff09\uff0c\u4f46\u8bf7\u6ce8\u610f\uff0c\u7531\u4e8e\u66f4\u597d\u7684\u63a7\u5236\u6d41\u7a0b\u548c\u8fc7\u7a0b\u5206\u6790\uff0c\u7f16\u8bd1\u5668\u4f7f\u7528 <code>-O3</code> \u4f1a\u751f\u6210\u66f4\u591a\u8b66\u544a\u3002 \u5f53\u4f7f\u7528 clang \u6784\u5efa\u65f6\uff0c\u4f7f\u7528 <code>libc++</code> \u800c\u4e0d\u662f <code>libstdc++</code>\uff0c\u5e76\u4e14\u5728\u4f7f\u7528\u8c03\u8bd5\u6a21\u5f0f\u6784\u5efa\u65f6\uff0c\u4f7f\u7528\u8c03\u8bd5\u7248\u672c\u7684 <code>libc++</code>\uff0c\u5b83\u5141\u8bb8\u5728\u8fd0\u884c\u65f6\u6355\u83b7\u66f4\u591a\u9519\u8bef\u3002</p>\n<h3 id=\"sanitizers\">Sanitizers<a class=\"headerlink\" href=\"#sanitizers\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Address sanitizer</strong>.<br />\n\u6211\u4eec\u5728\u6bcf\u4e2a\u63d0\u4ea4\u7684\u57fa\u7840\u4e0a\u5728 ASan \u4e0b\u8fd0\u884c\u529f\u80fd\u548c\u96c6\u6210\u6d4b\u8bd5\u3002</p>\n<p><strong>Valgrind (Memcheck)</strong>.<br />\n\u6211\u4eec\u5728 Valgrind \u8fc7\u591c\u8fdb\u884c\u529f\u80fd\u6d4b\u8bd5\u3002 \u8fd9\u9700\u8981\u51e0\u4e2a\u5c0f\u65f6\u3002 \u76ee\u524d\u5728 <code>re2</code> \u5e93\u4e2d\u6709\u4e00\u4e2a\u5df2\u77e5\u7684\u8bef\u62a5\uff0c\u8bf7\u53c2\u9605 <a href=\"https://research.swtch.com/sparse\" rel=\"external nofollow noreferrer\">\u6587\u7ae0</a>\u3002</p>\n<p><strong>Thread sanitizer</strong>.<br />\n\u6211\u4eec\u5728 TSan \u4e0b\u8fdb\u884c\u529f\u80fd\u6d4b\u8bd5\u3002ClickHouse \u5fc5\u987b\u901a\u8fc7\u6240\u6709\u6d4b\u8bd5\u3002\u5728 TSan \u4e0b\u8fd0\u884c\u4e0d\u662f\u81ea\u52a8\u5316\u7684\uff0c\u53ea\u662f\u5076\u5c14\u6267\u884c\u3002</p>\n<p><strong>Memory sanitizer</strong>.<br />\n\u76ee\u524d\u6211\u4eec\u4e0d\u4f7f\u7528 MSan\u3002</p>\n<p><strong>Undefined behaviour sanitizer.</strong><br />\n\u6211\u4eec\u4ecd\u7136\u4e0d\u4f1a\u5728\u6bcf\u6b21\u63d0\u4ea4\u7684\u57fa\u7840\u4e0a\u4f7f\u7528 UBSan\u3002 \u6709\u4e00\u4e9b\u5730\u65b9\u9700\u8981\u89e3\u51b3\u3002</p>\n<p><strong>Debug allocator.</strong><br />\n\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>DEBUG_TCMALLOC</code> CMake \u9009\u9879\u542f\u7528 <code>tcmalloc</code> \u7684\u8c03\u8bd5\u7248\u672c\u3002\u6211\u4eec\u5728\u6bcf\u6b21\u63d0\u4ea4\u7684\u57fa\u7840\u4e0a\u4f7f\u7528\u8c03\u8bd5\u5206\u914d\u5668\u8fd0\u884c\u6d4b\u8bd5\u3002</p>\n<p>\u66f4\u591a\u8bf7\u53c2\u9605 <code>dbms/tests/instructions/sanitizers.txt</code>\u3002</p>\n<h3 id=\"mo-hu-ce-shi\">\u6a21\u7cca\u6d4b\u8bd5<a class=\"headerlink\" href=\"#mo-hu-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6211\u4eec\u4f7f\u7528\u7b80\u5355\u7684\u6a21\u7cca\u6d4b\u8bd5\u6765\u751f\u6210\u968f\u673aSQL\u67e5\u8be2\u5e76\u68c0\u67e5\u670d\u52a1\u5668\u662f\u5426\u6b63\u5e38\uff0c\u4f7f\u7528 Address sanitizer \u6267\u884c\u6a21\u7cca\u6d4b\u8bd5\u3002\u4f60\u53ef\u4ee5\u5728<code>00746_sql_fuzzy.pl</code> \u627e\u5230\u5b83\u3002 \u6d4b\u8bd5\u5e94\u8fde\u7eed\u8fdb\u884c\uff08\u8fc7\u591c\u548c\u66f4\u957f\u65f6\u95f4\uff09\u3002</p>\n<p>\u622a\u81f32018\u5e7412\u6708\uff0c\u6211\u4eec\u4ecd\u7136\u4e0d\u4f7f\u7528\u5e93\u4ee3\u7801\u7684\u5b64\u7acb\u6a21\u7cca\u6d4b\u8bd5\u3002</p>\n<h3 id=\"an-quan-shen-ji\">\u5b89\u5168\u5ba1\u8ba1<a class=\"headerlink\" href=\"#an-quan-shen-ji\" title=\"Permanent link\">&para;</a></h3>\n<p>Yandex Cloud \u90e8\u95e8\u7684\u4eba\u5458\u4ece\u5b89\u5168\u89d2\u5ea6\u5bf9 ClickHouse \u529f\u80fd\u8fdb\u884c\u4e86\u4e00\u4e9b\u57fa\u672c\u6982\u8ff0\u3002</p>\n<h3 id=\"jing-tai-fen-xi\">\u9759\u6001\u5206\u6790<a class=\"headerlink\" href=\"#jing-tai-fen-xi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6211\u4eec\u5076\u5c14\u4f7f\u7528\u9759\u6001\u5206\u6790\u3002\u6211\u4eec\u5df2\u7ecf\u8bc4\u4f30\u8fc7 <code>clang-tidy</code>\uff0c <code>Coverity</code>\uff0c <code>cppcheck</code>\uff0c <code>PVS-Studio</code>\uff0c <code>tscancode</code>\u3002\u60a8\u5c06\u5728 <code>dbms/tests/instructions/</code> \u76ee\u5f55\u4e2d\u627e\u5230\u4f7f\u7528\u8bf4\u660e\u3002\u4f60\u4e5f\u53ef\u4ee5\u9605\u8bfb<a href=\"https://habr.com/company/yandex/blog/342018/\" rel=\"external nofollow noreferrer\">\u4fc4\u6587\u6587\u7ae0</a>.</p>\n<p>\u5982\u679c\u60a8\u4f7f\u7528 <code>CLion</code> \u4f5c\u4e3a IDE\uff0c\u60a8\u53ef\u4ee5\u5f00\u7bb1\u5373\u7528\u4e00\u4e9b <code>clang-tidy</code> \u68c0\u67e5\u3002</p>\n<h3 id=\"qi-ta-qiang-hua\">\u5176\u4ed6\u5f3a\u5316<a class=\"headerlink\" href=\"#qi-ta-qiang-hua\" title=\"Permanent link\">&para;</a></h3>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528 <code>FORTIFY_SOURCE</code>\u3002\u5b83\u51e0\u4e4e\u6ca1\u7528\uff0c\u4f46\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\u4ecd\u7136\u6709\u610f\u4e49\uff0c\u6211\u4eec\u4e0d\u4f1a\u7981\u7528\u5b83\u3002</p>\n<h3 id=\"dai-ma-feng-ge\">\u4ee3\u7801\u98ce\u683c<a class=\"headerlink\" href=\"#dai-ma-feng-ge\" title=\"Permanent link\">&para;</a></h3>\n<p>\u4ee3\u7801\u98ce\u683c\u5728<a href=\"https://clickhouse.yandex/docs/en/development/style/\" rel=\"external nofollow noreferrer\">\u8fd9\u91cc</a> \u6709\u8bf4\u660e\u3002</p>\n<p>\u8981\u68c0\u67e5\u4e00\u4e9b\u5e38\u89c1\u7684\u6837\u5f0f\u51b2\u7a81\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>utils/check-style</code> \u811a\u672c\u3002</p>\n<p>\u4e3a\u4e86\u5f3a\u5236\u4f60\u7684\u4ee3\u7801\u7684\u6b63\u786e\u98ce\u683c\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>clang-format</code> \u6587\u4ef6\u3002<code>.clang-format</code> \u4f4d\u4e8e\u6e90\u4ee3\u7801\u6839\u76ee\u5f55\uff0c \u5b83\u4e3b\u8981\u4e0e\u6211\u4eec\u7684\u5b9e\u9645\u4ee3\u7801\u98ce\u683c\u5bf9\u5e94\u3002\u4f46\u4e0d\u5efa\u8bae\u5c06 <code>clang-format</code> \u5e94\u7528\u4e8e\u73b0\u6709\u6587\u4ef6\uff0c\u56e0\u4e3a\u5b83\u4f1a\u4f7f\u683c\u5f0f\u53d8\u5f97\u66f4\u7cdf\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>clang-format-diff</code> \u5de5\u5177\uff0c\u60a8\u53ef\u4ee5\u5728 clang \u6e90\u4ee3\u7801\u5e93\u4e2d\u627e\u5230</p>\n<p>\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u5c1d\u8bd5<code>uncrustify</code> \u5de5\u5177\u6765\u683c\u5f0f\u5316\u60a8\u7684\u4ee3\u7801\u3002\u914d\u7f6e\u6587\u4ef6\u5728\u6e90\u4ee3\u7801\u7684\u6839\u76ee\u5f55\u4e2d\u7684<code>uncrustify.cfg</code>\u3002\u5b83\u6bd4 <code>clang-format</code> \u7ecf\u8fc7\u66f4\u5c11\u7684\u6d4b\u8bd5\u3002</p>\n<p><code>CLion</code> \u6709\u81ea\u5df1\u7684\u4ee3\u7801\u683c\u5f0f\u5316\u7a0b\u5e8f\uff0c\u5fc5\u987b\u8c03\u6574\u4e3a\u6211\u4eec\u7684\u4ee3\u7801\u98ce\u683c\u3002</p>\n<h3 id=\"metrica-b2b-ce-shi\">Metrica B2B \u6d4b\u8bd5<a class=\"headerlink\" href=\"#metrica-b2b-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6bcf\u4e2a ClickHouse \u7248\u672c\u90fd\u7ecf\u8fc7 Yandex Metrica \u548c AppMetrica \u5f15\u64ce\u7684\u6d4b\u8bd5\u3002\u6d4b\u8bd5\u548c\u7a33\u5b9a\u7248\u672c\u7684 ClickHouse \u90e8\u7f72\u5728\u865a\u62df\u673a\u4e0a\uff0c\u5e76\u4f7f\u7528\u5904\u7406\u8f93\u5165\u6570\u636e\u56fa\u5b9a\u6837\u672c\u7684\u5ea6\u91cf\u5f15\u64ce\u7684\u5c0f\u526f\u672c\u8fd0\u884c\u3002 \u5c06\u5ea6\u91cf\u5f15\u64ce\u7684\u4e24\u4e2a\u5b9e\u4f8b\u7684\u7ed3\u679c\u4e00\u8d77\u8fdb\u884c\u6bd4\u8f83</p>\n<p>\u8fd9\u4e9b\u6d4b\u8bd5\u662f\u7531\u5355\u72ec\u7684\u56e2\u961f\u81ea\u52a8\u5b8c\u6210\u7684\u3002\u7531\u4e8e\u79fb\u52a8\u90e8\u4ef6\u7684\u6570\u91cf\u5f88\u591a\uff0c\u5927\u90e8\u5206\u65f6\u95f4\u7684\u6d4b\u8bd5\u90fd\u662f\u5b8c\u5168\u65e0\u5173\u7684\uff0c\u5f88\u96be\u5f04\u6e05");
            
            document.write("\u695a\u3002\u5f88\u53ef\u80fd\u8fd9\u4e9b\u6d4b\u8bd5\u5bf9\u6211\u4eec\u6765\u8bf4\u662f\u8d1f\u503c\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u6d4b\u8bd5\u88ab\u8bc1\u660e\u662f\u6709\u7528\u7684\u5927\u7ea6\u4e00\u4e2a\u6216\u4e24\u4e2a\u500d\u7684\u6570\u767e\u3002</p>\n<h3 id=\"ce-shi-fu-gai-lu\">\u6d4b\u8bd5\u8986\u76d6\u7387<a class=\"headerlink\" href=\"#ce-shi-fu-gai-lu\" title=\"Permanent link\">&para;</a></h3>\n<p>\u622a\u81f32018\u5e747\u6708\uff0c\u6211\u4eec\u4e0d\u4f1a\u8ddf\u8e2a\u6d4b\u8bd5\u590d\u76d6\u7387\u3002</p>\n<h3 id=\"zi-dong-hua-ce-shi\">\u81ea\u52a8\u5316\u6d4b\u8bd5<a class=\"headerlink\" href=\"#zi-dong-hua-ce-shi\" title=\"Permanent link\">&para;</a></h3>\n<p>\u6211\u4eec\u4f7f\u7528 Yandex \u5185\u90e8 CI \u548c\u540d\u4e3a\"\u6c99\u7bb1\"\u7684\u4f5c\u4e1a\u81ea\u52a8\u5316\u7cfb\u7edf\u8fd0\u884c\u6d4b\u8bd5\u3002 \u6211\u4eec\u8fd8\u7ee7\u7eed\u4f7f\u7528 Jenkins\uff08\u53ef\u5728Yandex\u5185\u90e8\u4f7f\u7528\uff09\u3002</p>\n<p>\u6784\u5efa\u4f5c\u4e1a\u548c\u6d4b\u8bd5\u5728\u6c99\u7bb1\u4e2d\u6309\u6bcf\u6b21\u63d0\u4ea4\u7684\u57fa\u7840\u4e0a\u8fd0\u884c\u3002\u7ed3\u679c\u5305\u548c\u6d4b\u8bd5\u7ed3\u679c\u53d1\u5e03\u5728 GitHub \u4e0a\uff0c\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u94fe\u63a5\u4e0b\u8f7d\uff0c\u7ed3\u679c\u4f1a\u88ab\u6c38\u4e45\u5b58\u50a8\u3002\u5f53\u60a8\u5728 GitHub \u4e0a\u53d1\u9001\u62c9\u53d6\u8bf7\u6c42\u65f6\uff0c\u6211\u4eec\u5c06\u5176\u6807\u8bb0\u4e3a\"\u53ef\u4ee5\u6d4b\u8bd5\"\uff0c\u6211\u4eec\u7684 CI \u7cfb\u7edf\u5c06\u4e3a\u60a8\u6784\u5efa ClickHouse \u5305\uff08\u53d1\u5e03\uff0c\u8c03\u8bd5\uff0c\u5730\u5740\u6d88\u9664\u7b49\uff09\u3002</p>\n<p>\u7531\u4e8e\u65f6\u95f4\u548c\u8ba1\u7b97\u80fd\u529b\u7684\u9650\u5236\uff0c\u6211\u4eec\u4e0d\u4f7f\u7528 Travis CI\u3002</p>\n<p>\u5728 Jenkins\uff0c\u6211\u4eec\u8fd0\u884c\u5b57\u5178\u6d4b\u8bd5\uff0c\u6307\u6807B2B\u6d4b\u8bd5\u3002 \u6211\u4eec\u4f7f\u7528 Jenkins \u6765\u51c6\u5907\u548c\u53d1\u5e03\u7248\u672c\u3002 Jenkins\u662f\u4e00\u79cd\u4f20\u7edf\u7684\u6280\u672f\uff0c\u6240\u6709\u7684\u5de5\u4f5c\u5c06\u88ab\u8f6c\u79fb\u5230\u6c99\u7bb1\u4e2d\u3002</p>\n<p><a name=\"../development/contrib/\"></a><a name=\"../../development/contrib/\"></a><a name=\"contrib/\"></a><a name=\"development/contrib/\"></a><a name=\"../../../../development/contrib/\"></a><a name=\"../../../development/contrib/\"></a><a name=\"../../../../../development/contrib/\"></a></p>\n<h2 id=\"third-party-libraries-used\">Third-Party Libraries Used<a class=\"headerlink\" href=\"#third-party-libraries-used\" title=\"Permanent link\">&para;</a></h2>\n<table>\n<thead>\n<tr>\n<th>Library</th>\n<th>License</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>base64</td>\n<td><a href=\"https://github.com/aklomp/base64/blob/a27c565d1b6c676beaf297fe503c4518185666f7/LICENSE\" rel=\"external nofollow noreferrer\">BSD 2-Clause License</a></td>\n</tr>\n<tr>\n<td>boost</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/boost-extra/blob/6883b40449f378019aec792f9983ce3afc7ff16e/LICENSE_1_0.txt\" rel=\"external nofollow noreferrer\">Boost Software License 1.0</a></td>\n</tr>\n<tr>\n<td>brotli</td>\n<td><a href=\"https://github.com/google/brotli/blob/master/LICENSE\" rel=\"external nofollow noreferrer\">MIT</a></td>\n</tr>\n<tr>\n<td>capnproto</td>\n<td><a href=\"https://github.com/capnproto/capnproto/blob/master/LICENSE\" rel=\"external nofollow noreferrer\">MIT</a></td>\n</tr>\n<tr>\n<td>cctz</td>\n<td><a href=\"https://github.com/google/cctz/blob/4f9776a310f4952454636363def82c2bf6641d5f/LICENSE.txt\" rel=\"external nofollow noreferrer\">Apache License 2.0</a></td>\n</tr>\n<tr>\n<td>double-conversion</td>\n<td><a href=\"https://github.com/google/double-conversion/blob/cf2f0f3d547dc73b4612028a155b80536902ba02/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>FastMemcpy</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/libs/libmemcpy/impl/LICENSE\" rel=\"external nofollow noreferrer\">MIT</a></td>\n</tr>\n<tr>\n<td>googletest</td>\n<td><a href=\"https://github.com/google/googletest/blob/master/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>hyperscan</td>\n<td><a href=\"https://github.com/intel/hyperscan/blob/master/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>libbtrie</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/libbtrie/LICENSE\" rel=\"external nofollow noreferrer\">BSD 2-Clause License</a></td>\n</tr>\n<tr>\n<td>libcxxabi</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/libs/libglibc-compatibility/libcxxabi/LICENSE.TXT\" rel=\"external nofollow noreferrer\">BSD + MIT</a></td>\n</tr>\n<tr>\n<td>libdivide</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/libdivide/LICENSE.txt\" rel=\"external nofollow noreferrer\">Zlib License</a></td>\n</tr>\n<tr>\n<td>libgsasl</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/libgsasl/blob/3b8948a4042e34fb00b4fb987535dc9e02e39040/LICENSE\" rel=\"external nofollow noreferrer\">LGPL v2.1</a></td>\n</tr>\n<tr>\n<td>libhdfs3</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/libhdfs3/blob/bd6505cbb0c130b0db695305b9a38546fa880e5a/LICENSE.txt\" rel=\"external nofollow noreferrer\">Apache License 2.0</a></td>\n</tr>\n<tr>\n<td>libmetrohash</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/libmetrohash/LICENSE\" rel=\"external nofollow noreferrer\">Apache License 2.0</a></td>\n</tr>\n<tr>\n<td>libpcg-random</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/libpcg-random/LICENSE-APACHE.txt\" rel=\"external nofollow noreferrer\">Apache License 2.0</a></td>\n</tr>\n<tr>\n<td>libressl</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/ssl/blob/master/COPYING\" rel=\"external nofollow noreferrer\">OpenSSL License</a></td>\n</tr>\n<tr>\n<td>librdkafka</td>\n<td><a href=\"https://github.com/edenhill/librdkafka/blob/363dcad5a23dc29381cc626620e68ae418b3af19/LICENSE\" rel=\"external nofollow noreferrer\">BSD 2-Clause License</a></td>\n</tr>\n<tr>\n<td>libwidechar_width</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/libs/libwidechar_width/LICENSE\" rel=\"external nofollow noreferrer\">CC0 1.0 Universal</a></td>\n</tr>\n<tr>\n<td>llvm</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/llvm/blob/163def217817c90fb982a6daf384744d8472b92b/llvm/LICENSE.TXT\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>lz4</td>\n<td><a href=\"https://github.com/lz4/lz4/blob/c10863b98e1503af90616ae99725ecd120265dfb/LICENSE\" rel=\"external nofollow noreferrer\">BSD 2-Clause License</a></td>\n</tr>\n<tr>\n<td>mariadb-connector-c</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/mariadb-connector-c/blob/3.1/COPYING.LIB\" rel=\"external nofollow noreferrer\">LGPL v2.1</a></td>\n</tr>\n<tr>\n<td>murmurhash</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/murmurhash/LICENSE\" rel=\"external nofollow noreferrer\">Public Domain</a></td>\n</tr>\n<tr>\n<td>pdqsort</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/pdqsort/license.txt\" rel=\"external nofollow noreferrer\">Zlib License</a></td>\n</tr>\n<tr>\n<td>poco</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/poco/blob/fe5505e56c27b6ecb0dcbc40c49dc2caf4e9637f/LICENSE\" rel=\"external nofollow noreferrer\">Boost Software License - Version 1.0</a></td>\n</tr>\n<tr>\n<td>protobuf</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/protobuf/blob/12735370922a35f03999afff478e1c6d7aa917a4/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>re2</td>\n<td><a href=\"https://github.com/google/re2/blob/7cf8b88e8f70f97fd4926b56aa87e7f53b2717e0/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>UnixODBC</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/UnixODBC/tree/b0ad30f7f6289c12b76f04bfb9d466374bb32168\" rel=\"external nofollow noreferrer\">LGPL v2.1</a></td>\n</tr>\n<tr>\n<td>zlib-ng</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/zlib-ng/blob/develop/LICENSE.md\" rel=\"external nofollow noreferrer\">Zlib License</a></td>\n</tr>\n<tr>\n<td>zstd</td>\n<td><a href=\"https://github.com/facebook/zstd/blob/dev/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td><a name=\"../../../roadmap/\"></a><a name=\"../../../../roadmap/\"></a><a name=\"../../roadmap/\"></a><a name=\"../../../../../roadmap/\"></a><a name=\"roadmap/\"></a><a name=\"../roadmap/\"></a></td>\n<td></td>\n</tr>\n<tr>\n<td>## Roadmap</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"q3-2019\">Q3 2019<a class=\"headerlink\" href=\"#q3-2019\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>DDL for dictionaries</li>\n<li>Integration with S3-like object stores</li>\n<li>Multiple storages for hot/cold data, JBOD support</li>\n</ul>\n<h3 id=\"q4-2019\">Q4 2019<a class=\"headerlink\" href=\"#q4-2019\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>JOIN not limited by available memory</li>\n<li>Resource pools for more precise distribution of cluster capacity between users</li>\n<li>Fine-grained authorization</li>\n<li>Integration with external authentication services</li>\n</ul>\n<p><a name=\"../../../../changelog/\"></a><a name=\"../../../changelog/\"></a><a name=\"../../changelog/\"></a><a name=\"../../../../../changelog/\"></a><a name=\"../changelog/\"></a><a name=\"changelog/\"></a></p>\n<h3 id=\"clickhouse-release-v19-16-2-2-2019-10-30\">ClickHouse release v19.16.2.2, 2019-10-30<a class=\"headerlink\" href=\"#clickhouse-release-v19-16-2-2-2019-10-30\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"backward-incompatible-change\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add missing arity validation for count/counIf.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/issues/7095\" rel=\"external nofollow noreferrer\">#7095</a><br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7298\" rel=\"external nofollow noreferrer\">#7298</a> (<a href=\"https://github.com/Vdimir\" rel=\"external nofollow noreferrer\">Vdimir</a>)</li>\n<li>Remove legacy <code>asterisk_left_columns_only</code> setting (it was disabled by default).<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7335\" rel=\"external nofollow noreferrer\">#7335</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem<br />\nZuikov</a>)</li>\n<li>Format strings for Template data format are now specified in files.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7118\" rel=\"external nofollow noreferrer\">#7118</a><br />\n(<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n</ul>\n<h4 id=\"new-feature\">New Feature<a class=\"headerlink\" href=\"#new-feature\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Introduce uniqCombined64() to calculate cardinality greater than UINT_MAX.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7213\" rel=\"external nofollow noreferrer\">#7213</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7222\" rel=\"external nofollow noreferrer\">#7222</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat<br />\nKhuzhin</a>)</li>\n<li>Support Bloom filter indexes on Array columns.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/6984\" rel=\"external nofollow noreferrer\">#6984</a><br />\n(<a href=\"https://github.com/achimbab\" rel=\"external nofollow noreferrer\">achimbab</a>)</li>\n<li>Add a function <code>getMacro(name)</code> that returns String with the value of corresponding <code>&lt;macros&gt;</code><br />\n  from server configuration.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7240\" rel=\"external nofollow noreferrer\">#7240</a><br />\n(<a");
            
            document.write(" href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Set two configuration options for a dictionary based on an HTTP source: <code>credentials</code> and<br />\n<code>http-headers</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7092\" rel=\"external nofollow noreferrer\">#7092</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume<br />\nTassery</a>)</li>\n<li>Add a new ProfileEvent <code>Merge</code> that counts the number of launched background merges.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7093\" rel=\"external nofollow noreferrer\">#7093</a> (<a href=\"https://github.com/millb\" rel=\"external nofollow noreferrer\">Mikhail<br />\nKorotov</a>)</li>\n<li>Add fullHostName function that returns a fully qualified domain name.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/issues/7263\" rel=\"external nofollow noreferrer\">#7263</a><br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7291\" rel=\"external nofollow noreferrer\">#7291</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Add function <code>arraySplit</code> and <code>arrayReverseSplit</code> which split an array by \"cut off\"<br />\n  conditions. They are useful in time sequence handling.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7294\" rel=\"external nofollow noreferrer\">#7294</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Add new functions that return the Array of all matched indices in multiMatch family of functions.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7299\" rel=\"external nofollow noreferrer\">#7299</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila<br />\nKutenin</a>)</li>\n<li>Add a new database engine <code>Lazy</code> that is optimized for storing a large number of small -Log<br />\n  tables.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7171\" rel=\"external nofollow noreferrer\">#7171</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita<br />\nVasilev</a>)</li>\n<li>Add aggregate functions groupBitmapAnd, -Or, -Xor for bitmap columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7109\" rel=\"external nofollow noreferrer\">#7109</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang<br />\nYu</a>)</li>\n<li>Add aggregate function combinators -OrNull and -OrDefault, which return null<br />\n  or default values when there is nothing to aggregate.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7331\" rel=\"external nofollow noreferrer\">#7331</a><br />\n(<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Introduce CustomSeparated data format that supports custom escaping and<br />\n  delimiter rules.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7118\" rel=\"external nofollow noreferrer\">#7118</a><br />\n(<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n</ul>\n<h4 id=\"bug-fix\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix wrong query result if it has <code>WHERE IN (SELECT ...)</code> section and <code>optimize_read_in_order</code> is<br />\n  used. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7371\" rel=\"external nofollow noreferrer\">#7371</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton<br />\nPopov</a>)</li>\n<li>Disabled MariaDB authentication plugin, which depends on files outside of project.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7140\" rel=\"external nofollow noreferrer\">#7140</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy<br />\nBaranov</a>)</li>\n<li>Fix exception <code>Cannot convert column ... because it is constant but values of constants are\n  different in source and result</code> which could rarely happen when functions <code>now()</code>, <code>today()</code>,<br />\n<code>yesterday()</code>, <code>randConstant()</code> are used.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7156\" rel=\"external nofollow noreferrer\">#7156</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai<br />\nKochetov</a>)</li>\n<li>Fixed issue of using HTTP keep alive timeout instead of TCP keep alive timeout.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7351\" rel=\"external nofollow noreferrer\">#7351</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily<br />\nNemkov</a>)</li>\n<li>Fixed a segmentation fault in groupBitmapOr (issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/7109\" rel=\"external nofollow noreferrer\">#7109</a>).<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7289\" rel=\"external nofollow noreferrer\">#7289</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang<br />\nYu</a>)</li>\n<li>For materialized views the commit for Kafka is called after all data were written.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7175\" rel=\"external nofollow noreferrer\">#7175</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed wrong <code>duration_ms</code> value in <code>system.part_log</code> table. It was ten times off.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7172\" rel=\"external nofollow noreferrer\">#7172</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir<br />\nChebotarev</a>)</li>\n<li>A quick fix to resolve crash in LIVE VIEW table and re-enabling all LIVE VIEW tests.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7201\" rel=\"external nofollow noreferrer\">#7201</a><br />\n(<a href=\"https://github.com/vzakaznikov\" rel=\"external nofollow noreferrer\">vzakaznikov</a>)</li>\n<li>Serialize NULL values correctly in min/max indexes of MergeTree parts.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7234\" rel=\"external nofollow noreferrer\">#7234</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander<br />\nKuzmenkov</a>)</li>\n<li>Don't put virtual columns to .sql metadata when table is created as <code>CREATE TABLE AS</code>.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7183\" rel=\"external nofollow noreferrer\">#7183</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix segmentation fault in <code>ATTACH PART</code> query.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7185\" rel=\"external nofollow noreferrer\">#7185</a><br />\n(<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix wrong result for some queries given by the optimization of empty IN subqueries and empty<br />\n  INNER/RIGHT JOIN. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7284\" rel=\"external nofollow noreferrer\">#7284</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai<br />\nKochetov</a>)</li>\n<li>Fixing AddressSanitizer error in the LIVE VIEW getHeader() method.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7271\" rel=\"external nofollow noreferrer\">#7271</a><br />\n(<a href=\"https://github.com/vzakaznikov\" rel=\"external nofollow noreferrer\">vzakaznikov</a>)</li>\n</ul>\n<h4 id=\"improvement\">Improvement<a class=\"headerlink\" href=\"#improvement\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a message in case of queue_wait_max_ms wait takes place.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7390\" rel=\"external nofollow noreferrer\">#7390</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat<br />\nKhuzhin</a>)</li>\n<li>Made setting <code>s3_min_upload_part_size</code> table-level.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7059\" rel=\"external nofollow noreferrer\">#7059</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir<br />\nChebotarev</a>)</li>\n<li>Check TTL in StorageFactory. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7304\" rel=\"external nofollow noreferrer\">#7304</a><br />\n  (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Squash left-hand blocks in partial merge join (optimization).<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7122\" rel=\"external nofollow noreferrer\">#7122</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem<br />\nZuikov</a>)</li>\n<li>Do not allow non-deterministic functions in mutations of Replicated table engines, because this<br />\n  can introduce inconsistencies between replicas.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7247\" rel=\"external nofollow noreferrer\">#7247</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander<br />\nKazakov</a>)</li>\n<li>Disable memory tracker while converting exception stack trace to string. It can prevent the loss<br />\n  of error messages of type <code>Memory limit exceeded</code> on server, which caused the <code>Attempt to read\nafter eof</code> exception on client. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7264\" rel=\"external nofollow noreferrer\">#7264</a><br />\n(<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Miscellaneous format improvements. Resolves<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/issues/6033\" rel=\"external nofollow noreferrer\">#6033</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2633\" rel=\"external nofollow noreferrer\">#2633</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/issues/6611\" rel=\"external nofollow noreferrer\">#6611</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/issues/6742\" rel=\"external nofollow noreferrer\">#6742</a><br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7215\" rel=\"external nofollow noreferrer\">#7215</a><br />\n(<a href=\"https://github.com/tavplubix\" rel=\"external");
            
            document.write(" nofollow noreferrer\">tavplubix</a>)</li>\n<li>ClickHouse ignores values on the right side of IN operator that are not convertible to the left<br />\n  side type. Make it work properly for compound types -- Array and Tuple.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7283\" rel=\"external nofollow noreferrer\">#7283</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander<br />\nKuzmenkov</a>)</li>\n<li>Support missing inequalities for ASOF JOIN. It's possible to join less-or-equal variant and strict<br />\n  greater and less variants for ASOF column in ON syntax.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7282\" rel=\"external nofollow noreferrer\">#7282</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem<br />\nZuikov</a>)</li>\n<li>Optimize partial merge join. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7070\" rel=\"external nofollow noreferrer\">#7070</a><br />\n  (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Do not use more then 98K of memory in uniqCombined functions.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7236\" rel=\"external nofollow noreferrer\">#7236</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7270\" rel=\"external nofollow noreferrer\">#7270</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat<br />\nKhuzhin</a>)</li>\n<li>Flush parts of right-hand joining table on disk in PartialMergeJoin (if there is not enough<br />\n  memory). Load data back when needed.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7186\" rel=\"external nofollow noreferrer\">#7186</a><br />\n(<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"performance-improvement\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Speed up joinGet with const arguments by avoiding data duplication.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7359\" rel=\"external nofollow noreferrer\">#7359</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos<br />\nBird</a>)</li>\n<li>Return early if the subquery is empty.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7007\" rel=\"external nofollow noreferrer\">#7007</a> (<a href=\"https://github.com/nicelulu\" rel=\"external nofollow noreferrer\">\u5c0f\u8def</a>)</li>\n<li>Optimize parsing of SQL expression in Values.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/6781\" rel=\"external nofollow noreferrer\">#6781</a><br />\n(<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Disable some contribs for cross-compilation to Mac OS.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7101\" rel=\"external nofollow noreferrer\">#7101</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Add missing linking with PocoXML for clickhouse_common_io.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7200\" rel=\"external nofollow noreferrer\">#7200</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat<br />\nKhuzhin</a>)</li>\n<li>Accept multiple test filter arguments in clickhouse-test.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7226\" rel=\"external nofollow noreferrer\">#7226</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander<br />\nKuzmenkov</a>)</li>\n<li>Enable musl and jemalloc for ARM.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7300\" rel=\"external nofollow noreferrer\">#7300</a><br />\n  (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Added <code>--client-option</code> parameter to <code>clickhouse-test</code> to pass additional parameters to client.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7277\" rel=\"external nofollow noreferrer\">#7277</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai<br />\nKochetov</a>)</li>\n<li>Preserve existing configs on rpm package upgrade.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7103\" rel=\"external nofollow noreferrer\">#7103</a><br />\n(<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Fix errors detected by PVS. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7153\" rel=\"external nofollow noreferrer\">#7153</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem<br />\n  Zuikov</a>)</li>\n<li>Fix build for Darwin. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7149\" rel=\"external nofollow noreferrer\">#7149</a><br />\n  (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>glibc 2.29 compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7142\" rel=\"external nofollow noreferrer\">#7142</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos<br />\n  Bird</a>)</li>\n<li>Make sure dh_clean does not touch potential source files.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7205\" rel=\"external nofollow noreferrer\">#7205</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos<br />\nBird</a>)</li>\n<li>Attempt to avoid conflict when updating from altinity rpm - it has config file packaged separately<br />\n  in clickhouse-server-common.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7073\" rel=\"external nofollow noreferrer\">#7073</a><br />\n(<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Optimize some header files for faster rebuilds.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7212\" rel=\"external nofollow noreferrer\">#7212</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7231\" rel=\"external nofollow noreferrer\">#7231</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander<br />\nKuzmenkov</a>)</li>\n<li>Add performance tests for Date and DateTime. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7332\" rel=\"external nofollow noreferrer\">#7332</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily<br />\n  Nemkov</a>)</li>\n<li>Fix some tests that contained non-deterministic mutations.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7132\" rel=\"external nofollow noreferrer\">#7132</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander<br />\nKazakov</a>)</li>\n<li>Add build with MemorySanitizer to CI.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7066\" rel=\"external nofollow noreferrer\">#7066</a><br />\n  (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander Kuzmenkov</a>)</li>\n<li>Avoid use of uninitialized values in MetricsTransmitter.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7158\" rel=\"external nofollow noreferrer\">#7158</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat<br />\nKhuzhin</a>)</li>\n<li>Fix some issues in Fields found by MemorySanitizer.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7135\" rel=\"external nofollow noreferrer\">#7135</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7179\" rel=\"external nofollow noreferrer\">#7179</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander<br />\nKuzmenkov</a>), <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7376\" rel=\"external nofollow noreferrer\">#7376</a><br />\n(<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Fix undefined behavior in murmurhash32. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7388\" rel=\"external nofollow noreferrer\">#7388</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos<br />\n  Bird</a>)</li>\n<li>Fix undefined behavior in StoragesInfoStream. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7384\" rel=\"external nofollow noreferrer\">#7384</a><br />\n  (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed constant expressions folding for external database engines (MySQL, ODBC, JDBC). In previous<br />\n  versions it wasn't working for multiple constant expressions and was not working at all for Date,<br />\nDateTime and UUID. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/7245\" rel=\"external nofollow noreferrer\">#7245</a><br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7252\" rel=\"external nofollow noreferrer\">#7252</a><br />\n(<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixing ThreadSanitizer data race error in the LIVE VIEW when accessing no_users_thread variable.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7353\" rel=\"external nofollow noreferrer\">#7353</a><br />\n(<a href=\"https://github.com/vzakaznikov\" rel=\"external nofollow noreferrer\">vzakaznikov</a>)</li>\n<li>Get rid of malloc symbols in libcommon<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7134\" rel=\"external nofollow noreferrer\">#7134</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7065\" rel=\"external nofollow noreferrer\">#7065</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos<br />\nBird</a>)</li>\n<li>Add global flag ENABLE_LIBRARIES for disabling all libraries.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7063\" rel=\"external nofollow noreferrer\">#7063</a><br />\n(<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"code-cleanup\">Code cleanup<a class=\"headerlink\" href=\"#code-cleanup\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Generalize configuration repository to prepare for DDL for Dict");
            
            document.write("ionaries.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7155\" rel=\"external nofollow noreferrer\">#7155</a><br />\n  (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Parser for dictionaries DDL without any semantic.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7209\" rel=\"external nofollow noreferrer\">#7209</a><br />\n(<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Split ParserCreateQuery into different smaller parsers.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7253\" rel=\"external nofollow noreferrer\">#7253</a><br />\n(<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Small refactoring and renaming near external dictionaries.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7111\" rel=\"external nofollow noreferrer\">#7111</a><br />\n(<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Refactor some code to prepare for role-based access control. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7235\" rel=\"external nofollow noreferrer\">#7235</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly<br />\n  Baranov</a>)</li>\n<li>Some improvements in DatabaseOrdinary code.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7086\" rel=\"external nofollow noreferrer\">#7086</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita<br />\nVasilev</a>)</li>\n<li>Do not use iterators in find() and emplace() methods of hash tables.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7026\" rel=\"external nofollow noreferrer\">#7026</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander<br />\nKuzmenkov</a>)</li>\n<li>Fix getMultipleValuesFromConfig in case when parameter root is not empty. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7374\" rel=\"external nofollow noreferrer\">#7374</a><br />\n(<a href=\"https://github.com/millb\" rel=\"external nofollow noreferrer\">Mikhail Korotov</a>)</li>\n<li>Remove some copy-paste (TemporaryFile and TemporaryFileStream)<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7166\" rel=\"external nofollow noreferrer\">#7166</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem<br />\nZuikov</a>)</li>\n<li>Improved code readability a little bit (<code>MergeTreeData::getActiveContainingPart</code>).<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7361\" rel=\"external nofollow noreferrer\">#7361</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir<br />\nChebotarev</a>)</li>\n<li>Wait for all scheduled jobs, which are using local objects, if <code>ThreadPool::schedule(...)</code> throws<br />\n  an exception. Rename <code>ThreadPool::schedule(...)</code> to <code>ThreadPool::scheduleOrThrowOnError(...)</code> and<br />\nfix comments to make obvious that it may throw.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7350\" rel=\"external nofollow noreferrer\">#7350</a><br />\n(<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-15-4-10-2019-10-31\">ClickHouse release 19.15.4.10, 2019-10-31<a class=\"headerlink\" href=\"#clickhouse-release-19-15-4-10-2019-10-31\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_1\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added handling of SQL_TINYINT and SQL_BIGINT, and fix handling of SQL_FLOAT data source types in ODBC Bridge.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7491\" rel=\"external nofollow noreferrer\">#7491</a> (<a href=\"https://github.com/traceon\" rel=\"external nofollow noreferrer\">Denis Glazachev</a>)</li>\n<li>Allowed to have some parts on destination disk or volume in MOVE PARTITION.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7434\" rel=\"external nofollow noreferrer\">#7434</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir Chebotarev</a>)</li>\n<li>Fixed NULL-values in nullable columns through ODBC-bridge.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7402\" rel=\"external nofollow noreferrer\">#7402</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Fixed INSERT into Distributed non local node with MATERIALIZED columns.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7377\" rel=\"external nofollow noreferrer\">#7377</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fixed function getMultipleValuesFromConfig.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7374\" rel=\"external nofollow noreferrer\">#7374</a> (<a href=\"https://github.com/millb\" rel=\"external nofollow noreferrer\">Mikhail Korotov</a>)</li>\n<li>Fixed issue of using HTTP keep alive timeout instead of TCP keep alive timeout.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7351\" rel=\"external nofollow noreferrer\">#7351</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Wait for all jobs to finish on exception (fixes rare segfaults).<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7350\" rel=\"external nofollow noreferrer\">#7350</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Don't push to MVs when inserting into Kafka table.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7265\" rel=\"external nofollow noreferrer\">#7265</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Disable memory tracker for exception stack.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7264\" rel=\"external nofollow noreferrer\">#7264</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed bad code in transforming query for external database.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7252\" rel=\"external nofollow noreferrer\">#7252</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid use of uninitialized values in MetricsTransmitter.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7158\" rel=\"external nofollow noreferrer\">#7158</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Added example config with macros for tests (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-15-3-6-2019-10-09\">ClickHouse release 19.15.3.6, 2019-10-09<a class=\"headerlink\" href=\"#clickhouse-release-19-15-3-6-2019-10-09\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_2\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed bad_variant in hashed dictionary.<br />\n(<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed up bug with segmentation fault in ATTACH PART query.<br />\n(<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed time calculation in <code>MergeTreeData</code>.<br />\n(<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir Chebotarev</a>)</li>\n<li>Commit to Kafka explicitly after the writing is finalized.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7175\" rel=\"external nofollow noreferrer\">#7175</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Serialize NULL values correctly in min/max indexes of MergeTree parts.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/7234\" rel=\"external nofollow noreferrer\">#7234</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander Kuzmenkov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-15-2-2-2019-10-01\">ClickHouse release 19.15.2.2, 2019-10-01<a class=\"headerlink\" href=\"#clickhouse-release-19-15-2-2-2019-10-01\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_1\">New Feature<a class=\"headerlink\" href=\"#new-feature_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Tiered storage: support to use multiple storage volumes for tables with MergeTree engine. It's possible to store fresh data on SSD and automatically move old data to HDD. (<a href=\"https://clickhouse.github.io/clickhouse-presentations/meetup30/new_features/#12\" rel=\"external nofollow noreferrer\">example</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4918\" rel=\"external nofollow noreferrer\">#4918</a> (<a href=\"https://github.com/ObjatieGroba\" rel=\"external nofollow noreferrer\">Igr</a>)  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6489\" rel=\"external nofollow noreferrer\">#6489</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add table function <code>input</code> for reading incoming data in <code>INSERT SELECT</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5450\" rel=\"external nofollow noreferrer\">#5450</a> (<a href=\"https://github.com/palasonic1\" rel=\"external nofollow noreferrer\">palasonic1</a>)  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6832\" rel=\"external nofollow noreferrer\">#6832</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Add a <code>sparse_hashed</code> dictionary layout, that is functionally equivalent to the <code>hashed</code> layout, but is more memory efficient. It uses about twice as less memory at the cost of slower value retrieval. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6894\" rel=\"external nofollow noreferrer\">#6894</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Implement ability to define list of users for access to dictionaries. Only current connected database using. <a href=\"https://github.com");
            
            document.write("/ClickHouse/ClickHouse/pull/6907\" rel=\"external nofollow noreferrer\">#6907</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Add <code>LIMIT</code> option to <code>SHOW</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6944\" rel=\"external nofollow noreferrer\">#6944</a> (<a href=\"https://github.com/malkfilipp\" rel=\"external nofollow noreferrer\">Philipp Malkovsky</a>)</li>\n<li>Add <code>bitmapSubsetLimit(bitmap, range_start, limit)</code> function, that returns subset of the smallest <code>limit</code> values in set that is no smaller than <code>range_start</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6957\" rel=\"external nofollow noreferrer\">#6957</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Add <code>bitmapMin</code> and <code>bitmapMax</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6970\" rel=\"external nofollow noreferrer\">#6970</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Add function <code>repeat</code> related to <a href=\"https://github.com/yandex/ClickHouse/issues/6648\" rel=\"external nofollow noreferrer\">issue-6648</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6999\" rel=\"external nofollow noreferrer\">#6999</a> (<a href=\"https://github.com/ucasFL\" rel=\"external nofollow noreferrer\">flynn</a>)</li>\n</ul>\n<h4 id=\"experimental-feature\">Experimental Feature<a class=\"headerlink\" href=\"#experimental-feature\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Implement (in memory) Merge Join variant that does not change current pipeline. Result is partially sorted by merge key. Set <code>partial_merge_join = 1</code> to use this feature. The Merge Join is still in development. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6940\" rel=\"external nofollow noreferrer\">#6940</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Add <code>S3</code> engine and table function. It is still in development (no authentication support yet). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5596\" rel=\"external nofollow noreferrer\">#5596</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir Chebotarev</a>)</li>\n</ul>\n<h4 id=\"improvement_1\">Improvement<a class=\"headerlink\" href=\"#improvement_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Every message read from Kafka is inserted atomically. This resolves almost all known issues with Kafka engine. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6950\" rel=\"external nofollow noreferrer\">#6950</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Improvements for failover of Distributed queries. Shorten recovery time, also it is now configurable and can be seen in <code>system.clusters</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6399\" rel=\"external nofollow noreferrer\">#6399</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Support numeric values for Enums directly in <code>IN</code> section. #6766 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6941\" rel=\"external nofollow noreferrer\">#6941</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Support (optional, disabled by default) redirects on URL storage. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6914\" rel=\"external nofollow noreferrer\">#6914</a> (<a href=\"https://github.com/maqroll\" rel=\"external nofollow noreferrer\">maqroll</a>)</li>\n<li>Add information message when client with an older version connects to a server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6893\" rel=\"external nofollow noreferrer\">#6893</a> (<a href=\"https://github.com/malkfilipp\" rel=\"external nofollow noreferrer\">Philipp Malkovsky</a>)</li>\n<li>Remove maximum backoff sleep time limit for sending data in Distributed tables <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6895\" rel=\"external nofollow noreferrer\">#6895</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Add ability to send profile events (counters) with cumulative values to graphite. It can be enabled under <code>&lt;events_cumulative&gt;</code> in server <code>config.xml</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6969\" rel=\"external nofollow noreferrer\">#6969</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Add automatically cast type <code>T</code> to <code>LowCardinality(T)</code> while inserting data in column of type <code>LowCardinality(T)</code> in Native format via HTTP. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6891\" rel=\"external nofollow noreferrer\">#6891</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Add ability to use function <code>hex</code> without using <code>reinterpretAsString</code> for <code>Float32</code>, <code>Float64</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7024\" rel=\"external nofollow noreferrer\">#7024</a> (<a href=\"https://github.com/millb\" rel=\"external nofollow noreferrer\">Mikhail Korotov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_1\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add gdb-index to clickhouse binary with debug info. It will speed up startup time of <code>gdb</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6947\" rel=\"external nofollow noreferrer\">#6947</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Speed up deb packaging with patched dpkg-deb which uses <code>pigz</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6960\" rel=\"external nofollow noreferrer\">#6960</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Set <code>enable_fuzzing = 1</code> to enable libfuzzer instrumentation of all the project code. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7042\" rel=\"external nofollow noreferrer\">#7042</a> (<a href=\"https://github.com/kyprizel\" rel=\"external nofollow noreferrer\">kyprizel</a>)</li>\n<li>Add split build smoke test in CI. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7061\" rel=\"external nofollow noreferrer\">#7061</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add build with MemorySanitizer to CI. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7066\" rel=\"external nofollow noreferrer\">#7066</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">Alexander Kuzmenkov</a>)</li>\n<li>Replace <code>libsparsehash</code> with <code>sparsehash-c11</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6965\" rel=\"external nofollow noreferrer\">#6965</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n</ul>\n<h4 id=\"bug-fix_3\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed performance degradation of index analysis on complex keys on large tables. This fixes #6924. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7075\" rel=\"external nofollow noreferrer\">#7075</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix logical error causing segfaults when selecting from Kafka empty topic. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6909\" rel=\"external nofollow noreferrer\">#6909</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix too early MySQL connection close in <code>MySQLBlockInputStream.cpp</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6882\" rel=\"external nofollow noreferrer\">#6882</a> (<a href=\"https://github.com/clemrodriguez\" rel=\"external nofollow noreferrer\">Cl\u00e9ment Rodriguez</a>)</li>\n<li>Returned support for very old Linux kernels (fix <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6841\" rel=\"external nofollow noreferrer\">#6841</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6853\" rel=\"external nofollow noreferrer\">#6853</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix possible data loss in <code>insert select</code> query in case of empty block in input stream. #6834 #6862 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6911\" rel=\"external nofollow noreferrer\">#6911</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix for function <code>\u0410rrayEnumerateUniqRanked</code> with empty arrays in params <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6928\" rel=\"external nofollow noreferrer\">#6928</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix complex queries with array joins and global subqueries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6934\" rel=\"external nofollow noreferrer\">#6934</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix <code>Unknown identifier</code> error in ORDER BY and GROUP BY with multiple JOINs <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7022\" rel=\"external nofollow noreferrer\">#7022</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed <code>MSan</code> warning while executing function with <code>LowCardinality</code> argument. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7062\" rel=\"external nofollow noreferrer\">#7062</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_1\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatib");
            
            document.write("le-change_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Changed serialization format of bitmap<em> aggregate function states to improve performance. Serialized states of bitmap</em> from previous versions cannot be read. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6908\" rel=\"external nofollow noreferrer\">#6908</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-14-7-15-2019-10-02\">ClickHouse release 19.14.7.15, 2019-10-02<a class=\"headerlink\" href=\"#clickhouse-release-19-14-7-15-2019-10-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_4\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug fixes from 19.11.12.69.</li>\n<li>Fixed compatibility for distributed queries between 19.14 and earlier versions. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/7068\" rel=\"external nofollow noreferrer\">#7068</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7069\" rel=\"external nofollow noreferrer\">#7069</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-14-6-12-2019-09-19\">ClickHouse release 19.14.6.12, 2019-09-19<a class=\"headerlink\" href=\"#clickhouse-release-19-14-6-12-2019-09-19\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_5\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix for function <code>\u0410rrayEnumerateUniqRanked</code> with empty arrays in params. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6928\" rel=\"external nofollow noreferrer\">#6928</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed subquery name in queries with <code>ARRAY JOIN</code> and <code>GLOBAL IN subquery</code> with alias. Use subquery alias for external table name if it is specified. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6934\" rel=\"external nofollow noreferrer\">#6934</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_2\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix <a href=\"https://clickhouse-test-reports.s3.yandex.net/6944/aab95fd5175a513413c7395a73a82044bdafb906/functional_stateless_tests_(debug).html\" rel=\"external nofollow noreferrer\">flapping</a> test <code>00715_fetch_merged_or_mutated_part_zookeeper</code> by rewriting it to a shell scripts because it needs to wait for mutations to apply. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6977\" rel=\"external nofollow noreferrer\">#6977</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander Kazakov</a>)</li>\n<li>Fixed UBSan and MemSan failure in function <code>groupUniqArray</code> with emtpy array argument. It was caused by placing of empty <code>PaddedPODArray</code> into hash table zero cell because constructor for zero cell value was not called. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6937\" rel=\"external nofollow noreferrer\">#6937</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-14-3-3-2019-09-10\">ClickHouse release 19.14.3.3, 2019-09-10<a class=\"headerlink\" href=\"#clickhouse-release-19-14-3-3-2019-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_2\">New Feature<a class=\"headerlink\" href=\"#new-feature_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>WITH FILL</code> modifier for <code>ORDER BY</code>. (continuation of <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5069\" rel=\"external nofollow noreferrer\">#5069</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6610\" rel=\"external nofollow noreferrer\">#6610</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li><code>WITH TIES</code> modifier for <code>LIMIT</code>. (continuation of <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5069\" rel=\"external nofollow noreferrer\">#5069</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6610\" rel=\"external nofollow noreferrer\">#6610</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Parse unquoted <code>NULL</code> literal as NULL (if setting <code>format_csv_unquoted_null_literal_as_null=1</code>). Initialize null fields with default values if data type of this field is not nullable (if setting <code>input_format_null_as_default=1</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5990\" rel=\"external nofollow noreferrer\">#5990</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6055\" rel=\"external nofollow noreferrer\">#6055</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Support for wildcards in paths of table functions <code>file</code> and <code>hdfs</code>. If the path contains wildcards, the table will be readonly. Example of usage: <code>select * from hdfs('hdfs://hdfs1:9000/some_dir/another_dir/*/file{0..9}{0..9}')</code> and <code>select * from file('some_dir/{some_file,another_file,yet_another}.tsv', 'TSV', 'value UInt32')</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6092\" rel=\"external nofollow noreferrer\">#6092</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>New <code>system.metric_log</code> table which stores values of <code>system.events</code> and <code>system.metrics</code> with specified time interval. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6363\" rel=\"external nofollow noreferrer\">#6363</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6467\" rel=\"external nofollow noreferrer\">#6467</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6530\" rel=\"external nofollow noreferrer\">#6530</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow to write ClickHouse text logs to <code>system.text_log</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6037\" rel=\"external nofollow noreferrer\">#6037</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6103\" rel=\"external nofollow noreferrer\">#6103</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6164\" rel=\"external nofollow noreferrer\">#6164</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Show private symbols in stack traces (this is done via parsing symbol tables of ELF files). Added information about file and line number in stack traces if debug info is present. Speedup symbol name lookup with indexing symbols present in program. Added new SQL functions for introspection: <code>demangle</code> and <code>addressToLine</code>. Renamed function <code>symbolizeAddress</code> to <code>addressToSymbol</code> for consistency. Function <code>addressToSymbol</code> will return mangled name for performance reasons and you have to apply <code>demangle</code>. Added setting <code>allow_introspection_functions</code> which is turned off by default. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6201\" rel=\"external nofollow noreferrer\">#6201</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Table function <code>values</code> (the name is case-insensitive). It allows to read from <code>VALUES</code> list proposed in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5984\" rel=\"external nofollow noreferrer\">#5984</a>. Example: <code>SELECT * FROM VALUES('a UInt64, s String', (1, 'one'), (2, 'two'), (3, 'three'))</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6217\" rel=\"external nofollow noreferrer\">#6217</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6209\" rel=\"external nofollow noreferrer\">#6209</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Added an ability to alter storage settings. Syntax: <code>ALTER TABLE &lt;table&gt; MODIFY SETTING &lt;setting&gt; = &lt;value&gt;</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6366\" rel=\"external nofollow noreferrer\">#6366</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6669\" rel=\"external nofollow noreferrer\">#6669</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6685\" rel=\"external nofollow noreferrer\">#6685</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Support for removing of detached parts. Syntax: <code>ALTER TABLE &lt;table_name&gt; DROP DETACHED PART '&lt;part_id&gt;'</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6158\" rel=\"external nofollow noreferrer\">#6158</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Table constraints. Allows to add constraint to table definition which will be checked at insert. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5273\" rel=\"external nofollow noreferrer\">#5273</a> (<a href=\"https://github.com/NanoBjorn\" rel=\"external nofollow noreferrer\">Gleb Novikov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6652\" rel=\"external nofollow noreferrer\">#6652</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Suppport for cascaded materialized views. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6324\" rel=\"external nofollow noreferrer\">#6324</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Turn on query profiler by default to sample every query execution thread once a ");
            
            document.write("second. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6283\" rel=\"external nofollow noreferrer\">#6283</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Input format <code>ORC</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6454\" rel=\"external nofollow noreferrer\">#6454</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6703\" rel=\"external nofollow noreferrer\">#6703</a> (<a href=\"https://github.com/akonyaev90\" rel=\"external nofollow noreferrer\">akonyaev90</a>)</li>\n<li>Added two new functions: <code>sigmoid</code> and <code>tanh</code> (that are useful for machine learning applications). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6254\" rel=\"external nofollow noreferrer\">#6254</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Function <code>hasToken(haystack, token)</code>, <code>hasTokenCaseInsensitive(haystack, token)</code> to check if given token is in haystack. Token is a maximal length substring between two non alphanumeric ASCII characters (or boundaries of haystack). Token must be a constant string. Supported by tokenbf_v1 index specialization. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6596\" rel=\"external nofollow noreferrer\">#6596</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6662\" rel=\"external nofollow noreferrer\">#6662</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>New function <code>neighbor(value, offset[, default_value])</code>. Allows to reach prev/next value within column in a block of data. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5925\" rel=\"external nofollow noreferrer\">#5925</a> (<a href=\"https://github.com/alex-krash\" rel=\"external nofollow noreferrer\">Alex Krash</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/commit/6685365ab8c5b74f9650492c88a012596eb1b0c6\" rel=\"external nofollow noreferrer\">6685365ab8c5b74f9650492c88a012596eb1b0c6</a> <a href=\"https://github.com/ClickHouse/ClickHouse/commit/341e2e4587a18065c2da1ca888c73389f48ce36c\" rel=\"external nofollow noreferrer\">341e2e4587a18065c2da1ca888c73389f48ce36c</a> <a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">Alexey Milovidov</a></li>\n<li>Created a function <code>currentUser()</code>, returning login of authorized user. Added alias <code>user()</code> for compatibility with MySQL. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6470\" rel=\"external nofollow noreferrer\">#6470</a> (<a href=\"https://github.com/alex-krash\" rel=\"external nofollow noreferrer\">Alex Krash</a>)</li>\n<li>New aggregate functions <code>quantilesExactInclusive</code> and <code>quantilesExactExclusive</code> which were proposed in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5885\" rel=\"external nofollow noreferrer\">#5885</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6477\" rel=\"external nofollow noreferrer\">#6477</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Function <code>bitmapRange(bitmap, range_begin, range_end)</code> which returns new set with specified range (not include the <code>range_end</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6314\" rel=\"external nofollow noreferrer\">#6314</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Function <code>geohashesInBox(longitude_min, latitude_min, longitude_max, latitude_max, precision)</code> which creates array of precision-long strings of geohash-boxes covering provided area. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6127\" rel=\"external nofollow noreferrer\">#6127</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Implement support for INSERT query with <code>Kafka</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6012\" rel=\"external nofollow noreferrer\">#6012</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Added support for <code>_partition</code> and <code>_timestamp</code> virtual columns to Kafka engine. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6400\" rel=\"external nofollow noreferrer\">#6400</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Possibility to remove sensitive data from <code>query_log</code>, server logs, process list with regexp-based rules. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5710\" rel=\"external nofollow noreferrer\">#5710</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n</ul>\n<h4 id=\"experimental-feature_1\">Experimental Feature<a class=\"headerlink\" href=\"#experimental-feature_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Input and output data format <code>Template</code>. It allows to specify custom format string for input and output. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4354\" rel=\"external nofollow noreferrer\">#4354</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6727\" rel=\"external nofollow noreferrer\">#6727</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Implementation of <code>LIVE VIEW</code> tables that were originally proposed in <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2898\" rel=\"external nofollow noreferrer\">#2898</a>, prepared in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3925\" rel=\"external nofollow noreferrer\">#3925</a>, and then updated in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5541\" rel=\"external nofollow noreferrer\">#5541</a>. See <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5541\" rel=\"external nofollow noreferrer\">#5541</a> for detailed description. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5541\" rel=\"external nofollow noreferrer\">#5541</a> (<a href=\"https://github.com/vzakaznikov\" rel=\"external nofollow noreferrer\">vzakaznikov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6425\" rel=\"external nofollow noreferrer\">#6425</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6656\" rel=\"external nofollow noreferrer\">#6656</a> (<a href=\"https://github.com/vzakaznikov\" rel=\"external nofollow noreferrer\">vzakaznikov</a>) Note that <code>LIVE VIEW</code> feature may be removed in next versions.</li>\n</ul>\n<h4 id=\"bug-fix_6\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug fixes from 19.13 and 19.11.</li>\n<li>Fix segmentation fault when the table has skip indices and vertical merge happens. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6723\" rel=\"external nofollow noreferrer\">#6723</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix per-column TTL with non-trivial column defaults. Previously in case of force TTL merge with <code>OPTIMIZE ... FINAL</code> query, expired values was replaced by type defaults instead of user-specified column defaults. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6796\" rel=\"external nofollow noreferrer\">#6796</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix Kafka messages duplication problem on normal server restart. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6597\" rel=\"external nofollow noreferrer\">#6597</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed infinite loop when reading Kafka messages. Do not pause/resume consumer on subscription at all - otherwise it may get paused indefinitely in some scenarios. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6354\" rel=\"external nofollow noreferrer\">#6354</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix <code>Key expression contains comparison between inconvertible types</code> exception in <code>bitmapContains</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6136\" rel=\"external nofollow noreferrer\">#6136</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6146\" rel=\"external nofollow noreferrer\">#6146</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6156\" rel=\"external nofollow noreferrer\">#6156</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Fix segfault with enabled <code>optimize_skip_unused_shards</code> and missing sharding key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6384\" rel=\"external nofollow noreferrer\">#6384</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6514\" rel=\"external nofollow noreferrer\">#6514</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Removed extra verbose logging in MySQL interface <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6389\" rel=\"external nofollow noreferrer\">#6389</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Return ability to parse boolean settings from 'true' and 'false' in configuration file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6278\" rel=\"external nofollow noreferrer\">#6278</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</");
            
            document.write("a>)</li>\n<li>Fix crash in <code>quantile</code> and <code>median</code> function over <code>Nullable(Decimal128)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6378\" rel=\"external nofollow noreferrer\">#6378</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed possible incomplete result returned by <code>SELECT</code> query with <code>WHERE</code> condition on primary key contained conversion to Float type. It was caused by incorrect checking of monotonicity in <code>toFloat</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6248\" rel=\"external nofollow noreferrer\">#6248</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6374\" rel=\"external nofollow noreferrer\">#6374</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Check <code>max_expanded_ast_elements</code> setting for mutations. Clear mutations after <code>TRUNCATE TABLE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6205\" rel=\"external nofollow noreferrer\">#6205</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fix JOIN results for key columns when used with <code>join_use_nulls</code>. Attach Nulls instead of columns defaults. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6249\" rel=\"external nofollow noreferrer\">#6249</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix for skip indices with vertical merge and alter. Fix for <code>Bad size of marks file</code> exception. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6594\" rel=\"external nofollow noreferrer\">#6594</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6713\" rel=\"external nofollow noreferrer\">#6713</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix rare crash in <code>ALTER MODIFY COLUMN</code> and vertical merge when one of merged/altered parts is empty (0 rows) <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6746\" rel=\"external nofollow noreferrer\">#6746</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6780\" rel=\"external nofollow noreferrer\">#6780</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed bug in conversion of <code>LowCardinality</code> types in <code>AggregateFunctionFactory</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6257\" rel=\"external nofollow noreferrer\">#6257</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6281\" rel=\"external nofollow noreferrer\">#6281</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix wrong behavior and possible segfaults in <code>topK</code> and <code>topKWeighted</code> aggregated functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6404\" rel=\"external nofollow noreferrer\">#6404</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed unsafe code around <code>getIdentifier</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6401\" rel=\"external nofollow noreferrer\">#6401</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6409\" rel=\"external nofollow noreferrer\">#6409</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed bug in MySQL wire protocol (is used while connecting to ClickHouse form MySQL client). Caused by heap buffer overflow in <code>PacketPayloadWriteBuffer</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6212\" rel=\"external nofollow noreferrer\">#6212</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Fixed memory leak in <code>bitmapSubsetInRange</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6819\" rel=\"external nofollow noreferrer\">#6819</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Fix rare bug when mutation executed after granularity change. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6816\" rel=\"external nofollow noreferrer\">#6816</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Allow protobuf message with all fields by default. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6132\" rel=\"external nofollow noreferrer\">#6132</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Resolve a bug with <code>nullIf</code> function when we send a <code>NULL</code> argument on the second argument. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6446\" rel=\"external nofollow noreferrer\">#6446</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Fix rare bug with wrong memory allocation/deallocation in complex key cache dictionaries with string fields which leads to infinite memory consumption (looks like memory leak). Bug reproduces when string size was a power of two starting from eight (8, 16, 32, etc). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6447\" rel=\"external nofollow noreferrer\">#6447</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed Gorilla encoding on small sequences which caused exception <code>Cannot write after end of buffer</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6398\" rel=\"external nofollow noreferrer\">#6398</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6444\" rel=\"external nofollow noreferrer\">#6444</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Allow to use not nullable types in JOINs with <code>join_use_nulls</code> enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6705\" rel=\"external nofollow noreferrer\">#6705</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Disable <code>Poco::AbstractConfiguration</code> substitutions in query in <code>clickhouse-client</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6706\" rel=\"external nofollow noreferrer\">#6706</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid deadlock in <code>REPLACE PARTITION</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6677\" rel=\"external nofollow noreferrer\">#6677</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Using <code>arrayReduce</code> for constant arguments may lead to segfault. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6242\" rel=\"external nofollow noreferrer\">#6242</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6326\" rel=\"external nofollow noreferrer\">#6326</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix inconsistent parts which can appear if replica was restored after <code>DROP PARTITION</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6522\" rel=\"external nofollow noreferrer\">#6522</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6523\" rel=\"external nofollow noreferrer\">#6523</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed hang in <code>JSONExtractRaw</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6195\" rel=\"external nofollow noreferrer\">#6195</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6198\" rel=\"external nofollow noreferrer\">#6198</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug with incorrect skip indices serialization and aggregation with adaptive granularity. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6594\" rel=\"external nofollow noreferrer\">#6594</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6748\" rel=\"external nofollow noreferrer\">#6748</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix <code>WITH ROLLUP</code> and <code>WITH CUBE</code> modifiers of <code>GROUP BY</code> with two-level aggregation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6225\" rel=\"external nofollow noreferrer\">#6225</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix bug with writing secondary indices marks with adaptive granularity. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6126\" rel=\"external nofollow noreferrer\">#6126</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix initialization order while server startup. Since <code>StorageMergeTree::background_task_handle</code> is initialized in <code>startup()</code> the <code>MergeTreeBlockOutputStream::write()</code> may try to use it before initialization. Just check if it is initialized. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6080\" rel=\"external nofollow noreferrer\">#6080</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Clearing the data buffer from the previous read operation that was completed with an error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6026\" rel=\"external nofollow noreferrer\">#6026</a> (<a href=\"https://github.com/bopohaa\" rel=\"external nofollow noreferrer\">Nikolay</a>)</li>\n<li>Fix bug with enabling adaptive granularity when creating new replica for Replicated*MergeTree table. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6394\" rel=\"external nofollow noreferrer\">#6394</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6452\" rel=\"external nofollow noreferrer\">#6452</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed possible crash during server startup in case of ex");
            
            document.write("ception happened in <code>libunwind</code> during exception at access to uninitialised <code>ThreadStatus</code> structure. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6456\" rel=\"external nofollow noreferrer\">#6456</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n<li>Fix crash in <code>yandexConsistentHash</code> function. Found by fuzz test. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6304\" rel=\"external nofollow noreferrer\">#6304</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6305\" rel=\"external nofollow noreferrer\">#6305</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed the possibility of hanging queries when server is overloaded and global thread pool becomes near full. This have higher chance to happen on clusters with large number of shards (hundreds), because distributed queries allocate a thread per connection to each shard. For example, this issue may reproduce if a cluster of 330 shards is processing 30 concurrent distributed queries. This issue affects all versions starting from 19.2. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6301\" rel=\"external nofollow noreferrer\">#6301</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed logic of <code>arrayEnumerateUniqRanked</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6423\" rel=\"external nofollow noreferrer\">#6423</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix segfault when decoding symbol table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6603\" rel=\"external nofollow noreferrer\">#6603</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Fixed irrelevant exception in cast of <code>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn't contain Nulls (e.g. in query like <code>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6094\" rel=\"external nofollow noreferrer\">#6094</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6119\" rel=\"external nofollow noreferrer\">#6119</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Removed extra quoting of description in <code>system.settings</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6696\" rel=\"external nofollow noreferrer\">#6696</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6699\" rel=\"external nofollow noreferrer\">#6699</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid possible deadlock in <code>TRUNCATE</code> of Replicated table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6695\" rel=\"external nofollow noreferrer\">#6695</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix reading in order of sorting key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6189\" rel=\"external nofollow noreferrer\">#6189</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6543\" rel=\"external nofollow noreferrer\">#6543</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix bug opened by <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4405\" rel=\"external nofollow noreferrer\">#4405</a> (since 19.4.0). Reproduces in queries to Distributed tables over MergeTree tables when we doesn't query any columns (<code>SELECT 1</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6236\" rel=\"external nofollow noreferrer\">#6236</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed overflow in integer division of signed type to unsigned type. The behaviour was exactly as in C or C++ language (integer promotion rules) that may be surprising. Please note that the overflow is still possible when dividing large signed number to large unsigned number or vice-versa (but that case is less usual). The issue existed in all server versions. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6214\" rel=\"external nofollow noreferrer\">#6214</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6233\" rel=\"external nofollow noreferrer\">#6233</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Limit maximum sleep time for throttling when <code>max_execution_speed</code> or <code>max_execution_speed_bytes</code> is set. Fixed false errors like <code>Estimated query execution time (inf seconds) is too long</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5547\" rel=\"external nofollow noreferrer\">#5547</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6232\" rel=\"external nofollow noreferrer\">#6232</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed issues about using <code>MATERIALIZED</code> columns and aliases in <code>MaterializedView</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/448\" rel=\"external nofollow noreferrer\">#448</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3484\" rel=\"external nofollow noreferrer\">#3484</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3450\" rel=\"external nofollow noreferrer\">#3450</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2878\" rel=\"external nofollow noreferrer\">#2878</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2285\" rel=\"external nofollow noreferrer\">#2285</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3796\" rel=\"external nofollow noreferrer\">#3796</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6316\" rel=\"external nofollow noreferrer\">#6316</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix <code>FormatFactory</code> behaviour for input streams which are not implemented as processor. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6495\" rel=\"external nofollow noreferrer\">#6495</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed typo. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6631\" rel=\"external nofollow noreferrer\">#6631</a> (<a href=\"https://github.com/alexryndin\" rel=\"external nofollow noreferrer\">Alex Ryndin</a>)</li>\n<li>Typo in the error message ( is -&gt; are ). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6839\" rel=\"external nofollow noreferrer\">#6839</a> (<a href=\"https://github.com/den-crane\" rel=\"external nofollow noreferrer\">Denis Zhuravlev</a>)</li>\n<li>Fixed error while parsing of columns list from string if type contained a comma (this issue was relevant for <code>File</code>, <code>URL</code>, <code>HDFS</code> storages) <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6217\" rel=\"external nofollow noreferrer\">#6217</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6209\" rel=\"external nofollow noreferrer\">#6209</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n</ul>\n<h4 id=\"security-fix\">Security Fix<a class=\"headerlink\" href=\"#security-fix\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug security fixes from 19.13 and 19.11.</li>\n<li>Fixed the possibility of a fabricated query to cause server crash due to stack overflow in SQL parser. Fixed the possibility of stack overflow in Merge and Distributed tables, materialized views and conditions for row-level security that involve subqueries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6433\" rel=\"external nofollow noreferrer\">#6433</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"improvement_2\">Improvement<a class=\"headerlink\" href=\"#improvement_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Correct implementation of ternary logic for <code>AND/OR</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6048\" rel=\"external nofollow noreferrer\">#6048</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander Kazakov</a>)</li>\n<li>Now values and rows with expired TTL will be removed after <code>OPTIMIZE ... FINAL</code> query from old parts without TTL infos or with outdated TTL infos, e.g. after <code>ALTER ... MODIFY TTL</code> query. Added queries <code>SYSTEM STOP/START TTL MERGES</code> to disallow/allow assign merges with TTL and filter expired values in all merges. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6274\" rel=\"external nofollow noreferrer\">#6274</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Possibility to change the location of ClickHouse history file for client using <code>CLICKHOUSE_HISTORY_FILE</code> env. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6840\" rel=\"external nofollow noreferrer\">#6840</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Remove <code>dry_run</code> flag from <code>InterpreterSelectQuery</code>. ... <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6375\" rel=\"external nofollow noreferrer\">#6375</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Support <code>ASOF JOIN</code> with <code>ON</code> section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6211\" rel=\"external nofollow noreferrer\">#6211</a> (<a href=\"https://g");
            
            document.write("ithub.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Better support of skip indexes for mutations and replication. Support for <code>MATERIALIZE/CLEAR INDEX ... IN PARTITION</code> query. <code>UPDATE x = x</code> recalculates all indices that use column <code>x</code>.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5053\" rel=\"external nofollow noreferrer\">#5053</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Allow to <code>ATTACH</code> live views (for example, at the server startup) regardless to <code>allow_experimental_live_view</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6754\" rel=\"external nofollow noreferrer\">#6754</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>For stack traces gathered by query profiler, do not include stack frames generated by the query profiler itself. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6250\" rel=\"external nofollow noreferrer\">#6250</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Now table functions <code>values</code>, <code>file</code>, <code>url</code>, <code>hdfs</code> have support for ALIAS columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6255\" rel=\"external nofollow noreferrer\">#6255</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Throw an exception if <code>config.d</code> file doesn't have the corresponding root element as the config file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6123\" rel=\"external nofollow noreferrer\">#6123</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Print extra info in exception message for <code>no space left on device</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6182\" rel=\"external nofollow noreferrer\">#6182</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6252\" rel=\"external nofollow noreferrer\">#6252</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6352\" rel=\"external nofollow noreferrer\">#6352</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>When determining shards of a <code>Distributed</code> table to be covered by a read query (for <code>optimize_skip_unused_shards</code> = 1) ClickHouse now checks conditions from both <code>prewhere</code> and <code>where</code> clauses of select statement. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6521\" rel=\"external nofollow noreferrer\">#6521</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander Kazakov</a>)</li>\n<li>Enabled <code>SIMDJSON</code> for machines without AVX2 but with SSE 4.2 and PCLMUL instruction set. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6285\" rel=\"external nofollow noreferrer\">#6285</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6320\" rel=\"external nofollow noreferrer\">#6320</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>ClickHouse can work on filesystems without <code>O_DIRECT</code> support (such as ZFS and BtrFS) without additional tuning. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4449\" rel=\"external nofollow noreferrer\">#4449</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6730\" rel=\"external nofollow noreferrer\">#6730</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Support push down predicate for final subquery. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6120\" rel=\"external nofollow noreferrer\">#6120</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6162\" rel=\"external nofollow noreferrer\">#6162</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Better <code>JOIN ON</code> keys extraction <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6131\" rel=\"external nofollow noreferrer\">#6131</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Upated <code>SIMDJSON</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6285\" rel=\"external nofollow noreferrer\">#6285</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6306\" rel=\"external nofollow noreferrer\">#6306</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Optimize selecting of smallest column for <code>SELECT count()</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6344\" rel=\"external nofollow noreferrer\">#6344</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Added <code>strict</code> parameter in <code>windowFunnel()</code>. When the <code>strict</code> is set, the <code>windowFunnel()</code> applies conditions only for the unique values. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6548\" rel=\"external nofollow noreferrer\">#6548</a> (<a href=\"https://github.com/achimbab\" rel=\"external nofollow noreferrer\">achimbab</a>)</li>\n<li>Safer interface of <code>mysqlxx::Pool</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6150\" rel=\"external nofollow noreferrer\">#6150</a> (<a href=\"https://github.com/avasiliev\" rel=\"external nofollow noreferrer\">avasiliev</a>)</li>\n<li>Options line size when executing with <code>--help</code> option now corresponds with terminal size. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6590\" rel=\"external nofollow noreferrer\">#6590</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Disable \"read in order\" optimization for aggregation without keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6599\" rel=\"external nofollow noreferrer\">#6599</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>HTTP status code for <code>INCORRECT_DATA</code> and <code>TYPE_MISMATCH</code> error codes was changed from default <code>500 Internal Server Error</code> to <code>400 Bad Request</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6271\" rel=\"external nofollow noreferrer\">#6271</a> (<a href=\"https://github.com/a-rodin\" rel=\"external nofollow noreferrer\">Alexander Rodin</a>)</li>\n<li>Move Join object from <code>ExpressionAction</code> into <code>AnalyzedJoin</code>. <code>ExpressionAnalyzer</code> and <code>ExpressionAction</code> do not know about <code>Join</code> class anymore. Its logic is hidden by <code>AnalyzedJoin</code> iface. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6801\" rel=\"external nofollow noreferrer\">#6801</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed possible deadlock of distributed queries when one of shards is localhost but the query is sent via network connection. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6759\" rel=\"external nofollow noreferrer\">#6759</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Changed semantic of multiple tables <code>RENAME</code> to avoid possible deadlocks. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6757\" rel=\"external nofollow noreferrer\">#6757</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6756\" rel=\"external nofollow noreferrer\">#6756</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Rewritten MySQL compatibility server to prevent loading full packet payload in memory. Decreased memory consumption for each connection to approximately <code>2 * DBMS_DEFAULT_BUFFER_SIZE</code> (read/write buffers). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5811\" rel=\"external nofollow noreferrer\">#5811</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Move AST alias interpreting logic out of parser that doesn't have to know anything about query semantics. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6108\" rel=\"external nofollow noreferrer\">#6108</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Slightly more safe parsing of <code>NamesAndTypesList</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6408\" rel=\"external nofollow noreferrer\">#6408</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6410\" rel=\"external nofollow noreferrer\">#6410</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>clickhouse-copier</code>: Allow use <code>where_condition</code> from config with <code>partition_key</code> alias in query for checking partition existence (Earlier it was used only in reading data queries). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6577\" rel=\"external nofollow noreferrer\">#6577</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added optional message argument in <code>throwIf</code>. (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/5772\" rel=\"external nofollow noreferrer\">#5772</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6329\" rel=\"external nofollow noreferrer\">#6329</a> (<a href=\"https://github.com/Vdimir\" rel=\"external nofollow noreferrer\">Vdimir</a>)</li>\n<li>Server exception got while sending insertion data is now being processed in client as well. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5891\" rel=\"external nofollow noreferrer\">#5891</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6711\" rel=\"external nofollow noreferrer\">#6711</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Added a metric <cod");
            
            document.write("e>DistributedFilesToInsert</code> that shows the total number of files in filesystem that are selected to send to remote servers by Distributed tables. The number is summed across all shards. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6600\" rel=\"external nofollow noreferrer\">#6600</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Move most of JOINs prepare logic from <code>ExpressionAction/ExpressionAnalyzer</code> to <code>AnalyzedJoin</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6785\" rel=\"external nofollow noreferrer\">#6785</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix TSan <a href=\"https://clickhouse-test-reports.s3.yandex.net/6399/c1c1d1daa98e199e620766f1bd06a5921050a00d/functional_stateful_tests_(thread).html\" rel=\"external nofollow noreferrer\">warning</a> 'lock-order-inversion'. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6740\" rel=\"external nofollow noreferrer\">#6740</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Better information messages about lack of Linux capabilities. Logging fatal errors with \"fatal\" level, that will make it easier to find in <code>system.text_log</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6441\" rel=\"external nofollow noreferrer\">#6441</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>When enable dumping temporary data to the disk to restrict memory usage during <code>GROUP BY</code>, <code>ORDER BY</code>, it didn't check the free disk space. The fix add a new setting <code>min_free_disk_space</code>, when the free disk space it smaller then the threshold, the query will stop and throw <code>ErrorCodes::NOT_ENOUGH_SPACE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6678\" rel=\"external nofollow noreferrer\">#6678</a> (<a href=\"https://github.com/weiqxu\" rel=\"external nofollow noreferrer\">Weiqing Xu</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6691\" rel=\"external nofollow noreferrer\">#6691</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Removed recursive rwlock by thread. It makes no sense, because threads are reused between queries. <code>SELECT</code> query may acquire a lock in one thread, hold a lock from another thread and exit from first thread. In the same time, first thread can be reused by <code>DROP</code> query. This will lead to false \"Attempt to acquire exclusive lock recursively\" messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6771\" rel=\"external nofollow noreferrer\">#6771</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Split <code>ExpressionAnalyzer.appendJoin()</code>. Prepare a place in <code>ExpressionAnalyzer</code> for <code>MergeJoin</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6524\" rel=\"external nofollow noreferrer\">#6524</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Added <code>mysql_native_password</code> authentication plugin to MySQL compatibility server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6194\" rel=\"external nofollow noreferrer\">#6194</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Less number of <code>clock_gettime</code> calls; fixed ABI compatibility between debug/release in <code>Allocator</code> (insignificant issue). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6197\" rel=\"external nofollow noreferrer\">#6197</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Move <code>collectUsedColumns</code> from <code>ExpressionAnalyzer</code> to <code>SyntaxAnalyzer</code>. <code>SyntaxAnalyzer</code> makes <code>required_source_columns</code> itself now. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6416\" rel=\"external nofollow noreferrer\">#6416</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Add setting <code>joined_subquery_requires_alias</code> to require aliases for subselects and table functions in <code>FROM</code> that more than one table is present (i.e. queries with JOINs). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6733\" rel=\"external nofollow noreferrer\">#6733</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Extract <code>GetAggregatesVisitor</code> class from <code>ExpressionAnalyzer</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6458\" rel=\"external nofollow noreferrer\">#6458</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li><code>system.query_log</code>: change data type of <code>type</code> column to <code>Enum</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6265\" rel=\"external nofollow noreferrer\">#6265</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n<li>Static linking of <code>sha256_password</code> authentication plugin. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6512\" rel=\"external nofollow noreferrer\">#6512</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Avoid extra dependency for the setting <code>compile</code> to work. In previous versions, the user may get error like <code>cannot open crti.o</code>, <code>unable to find library -lc</code> etc. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6309\" rel=\"external nofollow noreferrer\">#6309</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>More validation of the input that may come from malicious replica. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6303\" rel=\"external nofollow noreferrer\">#6303</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Now <code>clickhouse-obfuscator</code> file is available in <code>clickhouse-client</code> package. In previous versions it was available as <code>clickhouse obfuscator</code> (with whitespace). <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5816\" rel=\"external nofollow noreferrer\">#5816</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6609\" rel=\"external nofollow noreferrer\">#6609</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Fixed deadlock when we have at least two queries that read at least two tables in different order and another query that performs DDL operation on one of tables. Fixed another very rare deadlock. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6764\" rel=\"external nofollow noreferrer\">#6764</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added <code>os_thread_ids</code> column to <code>system.processes</code> and <code>system.query_log</code> for better debugging possibilities. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6763\" rel=\"external nofollow noreferrer\">#6763</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>A workaround for PHP mysqlnd extension bugs which occur when <code>sha256_password</code> is used as a default authentication plugin (described in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6031\" rel=\"external nofollow noreferrer\">#6031</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6113\" rel=\"external nofollow noreferrer\">#6113</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Remove unneeded place with changed nullability columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6693\" rel=\"external nofollow noreferrer\">#6693</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Set default value of <code>queue_max_wait_ms</code> to zero, because current value (five seconds) makes no sense. There are rare circumstances when this settings has any use. Added settings <code>replace_running_query_max_wait_ms</code>, <code>kafka_max_wait_ms</code> and <code>connection_pool_max_wait_ms</code> for disambiguation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6692\" rel=\"external nofollow noreferrer\">#6692</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Extract <code>SelectQueryExpressionAnalyzer</code> from <code>ExpressionAnalyzer</code>. Keep the last one for non-select queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6499\" rel=\"external nofollow noreferrer\">#6499</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Removed duplicating input and output formats. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6239\" rel=\"external nofollow noreferrer\">#6239</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Allow user to override <code>poll_interval</code> and <code>idle_connection_timeout</code> settings on connection. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6230\" rel=\"external nofollow noreferrer\">#6230</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>MergeTree</code> now has an additional option <code>ttl_only_drop_parts</code> (disabled by default) to avoid partial pruning of parts, so that they dropped completely when all the rows in a part are expired. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6191\" rel=\"external nofollow noreferrer\">#6191</a> (<a href=\"https://github.com/svladykin\" rel=\"external nofollow noreferrer\">Sergi Vladykin</a>)</li>\n<li>Type checks for set index f");
            
            document.write("unctions. Throw exception if function got a wrong type. This fixes fuzz test with UBSan. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6511\" rel=\"external nofollow noreferrer\">#6511</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n</ul>\n<h4 id=\"performance-improvement_1\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Optimize queries with <code>ORDER BY expressions</code> clause, where <code>expressions</code> have coinciding prefix with sorting key in <code>MergeTree</code> tables. This optimization is controlled by <code>optimize_read_in_order</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6054\" rel=\"external nofollow noreferrer\">#6054</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6629\" rel=\"external nofollow noreferrer\">#6629</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Allow to use multiple threads during parts loading and removal. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6372\" rel=\"external nofollow noreferrer\">#6372</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6074\" rel=\"external nofollow noreferrer\">#6074</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6438\" rel=\"external nofollow noreferrer\">#6438</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Implemented batch variant of updating aggregate function states. It may lead to performance benefits. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6435\" rel=\"external nofollow noreferrer\">#6435</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Using <code>FastOps</code> library for functions <code>exp</code>, <code>log</code>, <code>sigmoid</code>, <code>tanh</code>. FastOps is a fast vector math library from Michael Parakhin (Yandex CTO). Improved performance of <code>exp</code> and <code>log</code> functions more than 6 times. The functions <code>exp</code> and <code>log</code> from <code>Float32</code> argument will return <code>Float32</code> (in previous versions they always return <code>Float64</code>). Now <code>exp(nan)</code> may return <code>inf</code>. The result of <code>exp</code> and <code>log</code> functions may be not the nearest machine representable number to the true answer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6254\" rel=\"external nofollow noreferrer\">#6254</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>) Using Danila Kutenin variant to make fastops working <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6317\" rel=\"external nofollow noreferrer\">#6317</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Disable consecutive key optimization for <code>UInt8/16</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6298\" rel=\"external nofollow noreferrer\">#6298</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6701\" rel=\"external nofollow noreferrer\">#6701</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Improved performance of <code>simdjson</code> library by getting rid of dynamic allocation in <code>ParsedJson::Iterator</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6479\" rel=\"external nofollow noreferrer\">#6479</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Pre-fault pages when allocating memory with <code>mmap()</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6667\" rel=\"external nofollow noreferrer\">#6667</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fix performance bug in <code>Decimal</code> comparison. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6380\" rel=\"external nofollow noreferrer\">#6380</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_3\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Remove Compiler (runtime template instantiation) because we've win over it's performance. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6646\" rel=\"external nofollow noreferrer\">#6646</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added performance test to show degradation of performance in gcc-9 in more isolated way. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6302\" rel=\"external nofollow noreferrer\">#6302</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added table function <code>numbers_mt</code>, which is multithreaded version of <code>numbers</code>. Updated performance tests with hash functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6554\" rel=\"external nofollow noreferrer\">#6554</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Comparison mode in <code>clickhouse-benchmark</code> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6220\" rel=\"external nofollow noreferrer\">#6220</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6343\" rel=\"external nofollow noreferrer\">#6343</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Best effort for printing stack traces. Also added <code>SIGPROF</code> as a debugging signal to print stack trace of a running thread. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6529\" rel=\"external nofollow noreferrer\">#6529</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Every function in its own file, part 10. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6321\" rel=\"external nofollow noreferrer\">#6321</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Remove doubled const <code>TABLE_IS_READ_ONLY</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6566\" rel=\"external nofollow noreferrer\">#6566</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Formatting changes for <code>StringHashMap</code> PR <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5417\" rel=\"external nofollow noreferrer\">#5417</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6700\" rel=\"external nofollow noreferrer\">#6700</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Better subquery for join creation in <code>ExpressionAnalyzer</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6824\" rel=\"external nofollow noreferrer\">#6824</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Remove a redundant condition (found by PVS Studio). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6775\" rel=\"external nofollow noreferrer\">#6775</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Separate the hash table interface for <code>ReverseIndex</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6672\" rel=\"external nofollow noreferrer\">#6672</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Refactoring of settings. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6689\" rel=\"external nofollow noreferrer\">#6689</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add comments for <code>set</code> index functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6319\" rel=\"external nofollow noreferrer\">#6319</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Increase OOM score in debug version on Linux. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6152\" rel=\"external nofollow noreferrer\">#6152</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>HDFS HA now work in debug build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6650\" rel=\"external nofollow noreferrer\">#6650</a> (<a href=\"https://github.com/weiqxu\" rel=\"external nofollow noreferrer\">Weiqing Xu</a>)</li>\n<li>Added a test to <code>transform_query_for_external_database</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6388\" rel=\"external nofollow noreferrer\">#6388</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add test for multiple materialized views for Kafka table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6509\" rel=\"external nofollow noreferrer\">#6509</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Make a better build scheme. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6500\" rel=\"external nofollow noreferrer\">#6500</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed <code>test_external_dictionaries</code> integration in case it was executed under non root user. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6507\" rel=\"external nofollow noreferrer\">#6507</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>The bug reproduces when total size of written packets exceeds <code>DBMS_DEFAULT_BUFFER_SIZE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6204\" rel=\"external nofollow noreferrer\">#6204</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Added a test for <code>RENAME</code> table race condition <a href=\"https://github.com/Clic");
            
            document.write("kHouse/ClickHouse/pull/6752\" rel=\"external nofollow noreferrer\">#6752</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid data race on Settings in <code>KILL QUERY</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6753\" rel=\"external nofollow noreferrer\">#6753</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add integration test for handling errors by a cache dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6755\" rel=\"external nofollow noreferrer\">#6755</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Disable parsing of ELF object files on Mac OS, because it makes no sense. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6578\" rel=\"external nofollow noreferrer\">#6578</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Attempt to make changelog generator better. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6327\" rel=\"external nofollow noreferrer\">#6327</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Adding <code>-Wshadow</code> switch to the GCC. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6325\" rel=\"external nofollow noreferrer\">#6325</a> (<a href=\"https://github.com/kreuzerkrieg\" rel=\"external nofollow noreferrer\">kreuzerkrieg</a>)</li>\n<li>Removed obsolete code for <code>mimalloc</code> support. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6715\" rel=\"external nofollow noreferrer\">#6715</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>zlib-ng</code> determines x86 capabilities and saves this info to global variables. This is done in defalteInit call, which may be made by different threads simultaneously. To avoid multithreaded writes, do it on library startup. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6141\" rel=\"external nofollow noreferrer\">#6141</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Regression test for a bug which in join which was fixed in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5192\" rel=\"external nofollow noreferrer\">#5192</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6147\" rel=\"external nofollow noreferrer\">#6147</a> (<a href=\"https://github.com/theruziev\" rel=\"external nofollow noreferrer\">Bakhtiyor Ruziev</a>)</li>\n<li>Fixed MSan report. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6144\" rel=\"external nofollow noreferrer\">#6144</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix flapping TTL test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6782\" rel=\"external nofollow noreferrer\">#6782</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed false data race in <code>MergeTreeDataPart::is_frozen</code> field. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6583\" rel=\"external nofollow noreferrer\">#6583</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed timeouts in fuzz test. In previous version, it managed to find false hangup in query <code>SELECT * FROM numbers_mt(gccMurmurHash(''))</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6582\" rel=\"external nofollow noreferrer\">#6582</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added debug checks to <code>static_cast</code> of columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6581\" rel=\"external nofollow noreferrer\">#6581</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Support for Oracle Linux in official RPM packages. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6356\" rel=\"external nofollow noreferrer\">#6356</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6585\" rel=\"external nofollow noreferrer\">#6585</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Changed json perftests from <code>once</code> to <code>loop</code> type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6536\" rel=\"external nofollow noreferrer\">#6536</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li><code>odbc-bridge.cpp</code> defines <code>main()</code> so it should not be included in <code>clickhouse-lib</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6538\" rel=\"external nofollow noreferrer\">#6538</a> (<a href=\"https://github.com/orivej\" rel=\"external nofollow noreferrer\">Orivej Desh</a>)</li>\n<li>Test for crash in <code>FULL|RIGHT JOIN</code> with nulls in right table's keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6362\" rel=\"external nofollow noreferrer\">#6362</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Added a test for the limit on expansion of aliases just in case. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6442\" rel=\"external nofollow noreferrer\">#6442</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Switched from <code>boost::filesystem</code> to <code>std::filesystem</code> where appropriate. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6253\" rel=\"external nofollow noreferrer\">#6253</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6385\" rel=\"external nofollow noreferrer\">#6385</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added RPM packages to website. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6251\" rel=\"external nofollow noreferrer\">#6251</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add a test for fixed <code>Unknown identifier</code> exception in <code>IN</code> section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6708\" rel=\"external nofollow noreferrer\">#6708</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Simplify <code>shared_ptr_helper</code> because people facing difficulties understanding it. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6675\" rel=\"external nofollow noreferrer\">#6675</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added performance tests for fixed Gorilla and DoubleDelta codec. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6179\" rel=\"external nofollow noreferrer\">#6179</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Split the integration test <code>test_dictionaries</code> into 4 separate tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6776\" rel=\"external nofollow noreferrer\">#6776</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix PVS-Studio warning in <code>PipelineExecutor</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6777\" rel=\"external nofollow noreferrer\">#6777</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Allow to use <code>library</code> dictionary source with ASan. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6482\" rel=\"external nofollow noreferrer\">#6482</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added option to generate changelog from a list of PRs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6350\" rel=\"external nofollow noreferrer\">#6350</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Lock the <code>TinyLog</code> storage when reading. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6226\" rel=\"external nofollow noreferrer\">#6226</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Check for broken symlinks in CI. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6634\" rel=\"external nofollow noreferrer\">#6634</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Increase timeout for \"stack overflow\" test because it may take a long time in debug build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6637\" rel=\"external nofollow noreferrer\">#6637</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added a check for double whitespaces. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6643\" rel=\"external nofollow noreferrer\">#6643</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix <code>new/delete</code> memory tracking when build with sanitizers. Tracking is not clear. It only prevents memory limit exceptions in tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6450\" rel=\"external nofollow noreferrer\">#6450</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Enable back the check of undefined symbols while linking. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6453\" rel=\"external nofollow noreferrer\">#6453</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Avoid rebuilding <code>hyperscan</code> every day. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6307\" rel=\"external nofollow noreferrer\">#6307</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed UBSan report ");
            
            document.write("in <code>ProtobufWriter</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6163\" rel=\"external nofollow noreferrer\">#6163</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Don't allow to use query profiler with sanitizers because it is not compatible. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6769\" rel=\"external nofollow noreferrer\">#6769</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add test for reloading a dictionary after fail by timer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6114\" rel=\"external nofollow noreferrer\">#6114</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix inconsistency in <code>PipelineExecutor::prepareProcessor</code> argument type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6494\" rel=\"external nofollow noreferrer\">#6494</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Added a test for bad URIs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6493\" rel=\"external nofollow noreferrer\">#6493</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added more checks to <code>CAST</code> function. This should get more information about segmentation fault in fuzzy test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6346\" rel=\"external nofollow noreferrer\">#6346</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Added <code>gcc-9</code> support to <code>docker/builder</code> container that builds image locally. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6333\" rel=\"external nofollow noreferrer\">#6333</a> (<a href=\"https://github.com/NanoBjorn\" rel=\"external nofollow noreferrer\">Gleb Novikov</a>)</li>\n<li>Test for primary key with <code>LowCardinality(String)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5044\" rel=\"external nofollow noreferrer\">#5044</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6219\" rel=\"external nofollow noreferrer\">#6219</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Fixed tests affected by slow stack traces printing. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6315\" rel=\"external nofollow noreferrer\">#6315</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add a test case for crash in <code>groupUniqArray</code> fixed in <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6029\" rel=\"external nofollow noreferrer\">#6029</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4402\" rel=\"external nofollow noreferrer\">#4402</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6129\" rel=\"external nofollow noreferrer\">#6129</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fixed indices mutations tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6645\" rel=\"external nofollow noreferrer\">#6645</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>In performance test, do not read query log for queries we didn't run. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6427\" rel=\"external nofollow noreferrer\">#6427</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Materialized view now could be created with any low cardinality types regardless to the setting about suspicious low cardinality types. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6428\" rel=\"external nofollow noreferrer\">#6428</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Updated tests for <code>send_logs_level</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6207\" rel=\"external nofollow noreferrer\">#6207</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix build under gcc-8.2. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6196\" rel=\"external nofollow noreferrer\">#6196</a> (<a href=\"https://github.com/zlobober\" rel=\"external nofollow noreferrer\">Max Akhmedov</a>)</li>\n<li>Fix build with internal libc++. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6724\" rel=\"external nofollow noreferrer\">#6724</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix shared build with <code>rdkafka</code> library <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6101\" rel=\"external nofollow noreferrer\">#6101</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixes for Mac OS build (incomplete). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6390\" rel=\"external nofollow noreferrer\">#6390</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6429\" rel=\"external nofollow noreferrer\">#6429</a> (<a href=\"https://github.com/alex-zaitsev\" rel=\"external nofollow noreferrer\">alex-zaitsev</a>)</li>\n<li>Fix \"splitted\" build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6618\" rel=\"external nofollow noreferrer\">#6618</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Other build fixes: <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6186\" rel=\"external nofollow noreferrer\">#6186</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6486\" rel=\"external nofollow noreferrer\">#6486</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6348\" rel=\"external nofollow noreferrer\">#6348</a> (<a href=\"https://github.com/Vxider\" rel=\"external nofollow noreferrer\">vxider</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6744\" rel=\"external nofollow noreferrer\">#6744</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6016\" rel=\"external nofollow noreferrer\">#6016</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6421\" rel=\"external nofollow noreferrer\">#6421</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6491\" rel=\"external nofollow noreferrer\">#6491</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_2\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed rarely used table function <code>catBoostPool</code> and storage <code>CatBoostPool</code>. If you have used this table function, please write email to <code>clickhouse-feedback@yandex-team.com</code>. Note that CatBoost integration remains and will be supported. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6279\" rel=\"external nofollow noreferrer\">#6279</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Disable <code>ANY RIGHT JOIN</code> and <code>ANY FULL JOIN</code> by default. Set <code>any_join_get_any_from_right_table</code> setting to enable them. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5126\" rel=\"external nofollow noreferrer\">#5126</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6351\" rel=\"external nofollow noreferrer\">#6351</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-13-6-51-2019-10-02\">ClickHouse release 19.13.6.51, 2019-10-02<a class=\"headerlink\" href=\"#clickhouse-release-19-13-6-51-2019-10-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_7\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug fixes from 19.11.12.69.</li>\n</ul>\n<h3 id=\"clickhouse-release-19-13-5-44-2019-09-20\">ClickHouse release 19.13.5.44, 2019-09-20<a class=\"headerlink\" href=\"#clickhouse-release-19-13-5-44-2019-09-20\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_8\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug fixes from 19.14.6.12.</li>\n<li>Fixed possible inconsistent state of table while executing <code>DROP</code> query for replicated table while zookeeper is not accessible. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6045\" rel=\"external nofollow noreferrer\">#6045</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6413\" rel=\"external nofollow noreferrer\">#6413</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n<li>Fix for data race in StorageMerge <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6717\" rel=\"external nofollow noreferrer\">#6717</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug introduced in query profiler which leads to endless recv from socket. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6386\" rel=\"external nofollow noreferrer\">#6386</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix excessive CPU usage while executing <code>JSONExtractRaw</code> function over a boolean value. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6208\" rel=\"external nofollow noreferrer\">#6208</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fixes the regression while pushing to materialized view. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6415\" rel=\"external nofollow noreferrer\">#6415</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Iv");
            
            document.write("an</a>)</li>\n<li>Table function <code>url</code> had the vulnerability allowed the attacker to inject arbitrary HTTP headers in the request. This issue was found by <a href=\"https://github.com/NSTikhomirov\" rel=\"external nofollow noreferrer\">Nikita Tikhomirov</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6466\" rel=\"external nofollow noreferrer\">#6466</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix useless <code>AST</code> check in Set index. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6510\" rel=\"external nofollow noreferrer\">#6510</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6651\" rel=\"external nofollow noreferrer\">#6651</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Fixed parsing of <code>AggregateFunction</code> values embedded in query. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6575\" rel=\"external nofollow noreferrer\">#6575</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6773\" rel=\"external nofollow noreferrer\">#6773</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Fixed wrong behaviour of <code>trim</code> functions family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6647\" rel=\"external nofollow noreferrer\">#6647</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-13-4-32-2019-09-10\">ClickHouse release 19.13.4.32, 2019-09-10<a class=\"headerlink\" href=\"#clickhouse-release-19-13-4-32-2019-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_9\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug security fixes from 19.11.9.52 and 19.11.10.54.</li>\n<li>Fixed data race in <code>system.parts</code> table and <code>ALTER</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6245\" rel=\"external nofollow noreferrer\">#6245</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6513\" rel=\"external nofollow noreferrer\">#6513</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed mismatched header in streams happened in case of reading from empty distributed table with sample and prewhere. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6167\" rel=\"external nofollow noreferrer\">#6167</a> (<a href=\"https://github.com/fancyqlx\" rel=\"external nofollow noreferrer\">Lixiang Qian</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6823\" rel=\"external nofollow noreferrer\">#6823</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed crash when using <code>IN</code> clause with a subquery with a tuple. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6125\" rel=\"external nofollow noreferrer\">#6125</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6550\" rel=\"external nofollow noreferrer\">#6550</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fix case with same column names in <code>GLOBAL JOIN ON</code> section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6181\" rel=\"external nofollow noreferrer\">#6181</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix crash when casting types to <code>Decimal</code> that do not support it. Throw exception instead. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6297\" rel=\"external nofollow noreferrer\">#6297</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed crash in <code>extractAll()</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6644\" rel=\"external nofollow noreferrer\">#6644</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Query transformation for <code>MySQL</code>, <code>ODBC</code>, <code>JDBC</code> table functions now works properly for <code>SELECT WHERE</code> queries with multiple <code>AND</code> expressions. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6381\" rel=\"external nofollow noreferrer\">#6381</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6676\" rel=\"external nofollow noreferrer\">#6676</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Added previous declaration checks for MySQL 8 integration. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6569\" rel=\"external nofollow noreferrer\">#6569</a> (<a href=\"https://github.com/rafaeldtinoco\" rel=\"external nofollow noreferrer\">Rafael David Tinoco</a>)</li>\n</ul>\n<h4 id=\"security-fix_1\">Security Fix<a class=\"headerlink\" href=\"#security-fix_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix two vulnerabilities in codecs in decompression phase (malicious user can fabricate compressed data that will lead to buffer overflow in decompression). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6670\" rel=\"external nofollow noreferrer\">#6670</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-13-74-2019-11-01\">ClickHouse release 19.11.13.74, 2019-11-01<a class=\"headerlink\" href=\"#clickhouse-release-19-11-13-74-2019-11-01\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_10\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed rare crash in <code>ALTER MODIFY COLUMN</code> and vertical merge when one of merged/altered parts is empty (0 rows). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6780\" rel=\"external nofollow noreferrer\">#6780</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Manual update of <code>SIMDJSON</code>. This fixes possible flooding of stderr files with bogus json diagnostic messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7548\" rel=\"external nofollow noreferrer\">#7548</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander Kazakov</a>)</li>\n<li>Fixed bug with <code>mrk</code> file extension for mutations (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-12-69-2019-10-02\">ClickHouse release 19.11.12.69, 2019-10-02<a class=\"headerlink\" href=\"#clickhouse-release-19-11-12-69-2019-10-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_11\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed performance degradation of index analysis on complex keys on large tables. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6924\" rel=\"external nofollow noreferrer\">#6924</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7075\" rel=\"external nofollow noreferrer\">#7075</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid rare SIGSEGV while sending data in tables with Distributed engine (<code>Failed to send batch: file with index XXXXX is absent</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7032\" rel=\"external nofollow noreferrer\">#7032</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix <code>Unknown identifier</code> with multiple joins. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5254\" rel=\"external nofollow noreferrer\">#5254</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/7022\" rel=\"external nofollow noreferrer\">#7022</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-10-54-2019-09-10\">ClickHouse release 19.11.10.54, 2019-09-10<a class=\"headerlink\" href=\"#clickhouse-release-19-11-10-54-2019-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_12\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Do store offsets for Kafka messages manually to be able to commit them all at once for all partitions. Fixes potential duplication in \"one consumer - many partitions\" scenario. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6872\" rel=\"external nofollow noreferrer\">#6872</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-9-52-2019-09-6\">ClickHouse release 19.11.9.52, 2019-09-6<a class=\"headerlink\" href=\"#clickhouse-release-19-11-9-52-2019-09-6\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Improve error handling in cache dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6737\" rel=\"external nofollow noreferrer\">#6737</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fixed bug in function <code>arrayEnumerateUniqRanked</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6779\" rel=\"external nofollow noreferrer\">#6779</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix <code>JSONExtract</code> function while extracting a <code>Tuple</code> from JSON. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6718\" rel=\"external nofollow noreferrer\">#6718</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fixed possible data loss after <code>ALTER DELETE</code> query on table with skipping index. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6224\" rel=\"external nofollow noreferrer\">#6224</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6282\" rel=\"external nofollow noreferrer\">#6282</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Fixed performance test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6392\" rel=\"external nofollow norefe");
            
            document.write("rrer\">#6392</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Parquet: Fix reading boolean columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6579\" rel=\"external nofollow noreferrer\">#6579</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed wrong behaviour of <code>nullIf</code> function for constant arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6518\" rel=\"external nofollow noreferrer\">#6518</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6580\" rel=\"external nofollow noreferrer\">#6580</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix Kafka messages duplication problem on normal server restart. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6597\" rel=\"external nofollow noreferrer\">#6597</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed an issue when long <code>ALTER UPDATE</code> or <code>ALTER DELETE</code> may prevent regular merges to run. Prevent mutations from executing if there is no enough free threads available. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6502\" rel=\"external nofollow noreferrer\">#6502</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6617\" rel=\"external nofollow noreferrer\">#6617</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed error with processing \"timezone\" in server configuration file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6709\" rel=\"external nofollow noreferrer\">#6709</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix kafka tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6805\" rel=\"external nofollow noreferrer\">#6805</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"security-fix_2\">Security Fix<a class=\"headerlink\" href=\"#security-fix_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>If the attacker has write access to ZooKeeper and is able to run custom server available from the network where ClickHouse run, it can create custom-built malicious server that will act as ClickHouse replica and register it in ZooKeeper. When another replica will fetch data part from malicious replica, it can force clickhouse-server to write to arbitrary path on filesystem. Found by Eldar Zaitov, information security team at Yandex. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6247\" rel=\"external nofollow noreferrer\">#6247</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-13-3-26-2019-08-22\">ClickHouse release 19.13.3.26, 2019-08-22<a class=\"headerlink\" href=\"#clickhouse-release-19-13-3-26-2019-08-22\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_13\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6543\" rel=\"external nofollow noreferrer\">#6543</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix NPE when using IN clause with a subquery with a tuple. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6125\" rel=\"external nofollow noreferrer\">#6125</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6550\" rel=\"external nofollow noreferrer\">#6550</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed an issue that if a stale replica becomes alive, it may still have data parts that were removed by DROP PARTITION. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6522\" rel=\"external nofollow noreferrer\">#6522</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6523\" rel=\"external nofollow noreferrer\">#6523</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed issue with parsing CSV <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6426\" rel=\"external nofollow noreferrer\">#6426</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6559\" rel=\"external nofollow noreferrer\">#6559</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed data race in system.parts table and ALTER query. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6245\" rel=\"external nofollow noreferrer\">#6245</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6513\" rel=\"external nofollow noreferrer\">#6513</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6514\" rel=\"external nofollow noreferrer\">#6514</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed possible data loss after <code>ALTER DELETE</code> query on table with skipping index. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6224\" rel=\"external nofollow noreferrer\">#6224</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6282\" rel=\"external nofollow noreferrer\">#6282</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n</ul>\n<h4 id=\"security-fix_3\">Security Fix<a class=\"headerlink\" href=\"#security-fix_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>If the attacker has write access to ZooKeeper and is able to run custom server available from the network where ClickHouse run, it can create custom-built malicious server that will act as ClickHouse replica and register it in ZooKeeper. When another replica will fetch data part from malicious replica, it can force clickhouse-server to write to arbitrary path on filesystem. Found by Eldar Zaitov, information security team at Yandex. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6247\" rel=\"external nofollow noreferrer\">#6247</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-13-2-19-2019-08-14\">ClickHouse release 19.13.2.19, 2019-08-14<a class=\"headerlink\" href=\"#clickhouse-release-19-13-2-19-2019-08-14\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_3\">New Feature<a class=\"headerlink\" href=\"#new-feature_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Sampling profiler on query level. <a href=\"https://gist.github.com/alexey-milovidov/92758583dd41c24c360fdb8d6a4da194\" rel=\"external nofollow noreferrer\">Example</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4247\" rel=\"external nofollow noreferrer\">#4247</a> (<a href=\"https://github.com/laplab\" rel=\"external nofollow noreferrer\">laplab</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6124\" rel=\"external nofollow noreferrer\">#6124</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6250\" rel=\"external nofollow noreferrer\">#6250</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6283\" rel=\"external nofollow noreferrer\">#6283</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6386\" rel=\"external nofollow noreferrer\">#6386</a></li>\n<li>Allow to specify a list of columns with <code>COLUMNS('regexp')</code> expression that works like a more sophisticated variant of <code>*</code> asterisk. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5951\" rel=\"external nofollow noreferrer\">#5951</a>  (<a href=\"https://github.com/mfridental\" rel=\"external nofollow noreferrer\">mfridental</a>), (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>CREATE TABLE AS table_function()</code> is now possible <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6057\" rel=\"external nofollow noreferrer\">#6057</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Adam optimizer for stochastic gradient descent is used by default in <code>stochasticLinearRegression()</code> and <code>stochasticLogisticRegression()</code> aggregate functions, because it shows good quality without almost any tuning. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6000\" rel=\"external nofollow noreferrer\">#6000</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Added functions for working with the \u0441ustom week number <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5212\" rel=\"external nofollow noreferrer\">#5212</a> (<a href=\"https://github.com/andyyzh\" rel=\"external nofollow noreferrer\">Andy Yang</a>)</li>\n<li><code>RENAME</code> queries now work with all storages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5953\" rel=\"external nofollow noreferrer\">#5953</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Now client receive logs from server with any desired level by setting <code>send_logs_level</code> regardless to the log level specified in server settings. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5964\" rel=\"external nofollow noreferrer\">#5964</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikit");
            
            document.write("a Mikhaylov</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_3\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The setting <code>input_format_defaults_for_omitted_fields</code> is enabled by default. Inserts in Distibuted tables need this setting to be the same on cluster (you need to set it before rolling update). It enables calculation of complex default expressions for omitted fields in <code>JSONEachRow</code> and <code>CSV*</code> formats. It should be the expected behaviour but may lead to negligible performance difference. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6043\" rel=\"external nofollow noreferrer\">#6043</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>), <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5625\" rel=\"external nofollow noreferrer\">#5625</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n</ul>\n<h4 id=\"experimental-features\">Experimental features<a class=\"headerlink\" href=\"#experimental-features\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>New query processing pipeline. Use <code>experimental_use_processors=1</code> option to enable it. Use for your own trouble. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4914\" rel=\"external nofollow noreferrer\">#4914</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h4 id=\"bug-fix_14\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Kafka integration has been fixed in this version.</li>\n<li>Fixed <code>DoubleDelta</code> encoding of <code>Int64</code> for large <code>DoubleDelta</code> values, improved <code>DoubleDelta</code> encoding for random data for <code>Int32</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5998\" rel=\"external nofollow noreferrer\">#5998</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Fixed overestimation of <code>max_rows_to_read</code> if the setting <code>merge_tree_uniform_read_distribution</code> is set to 0. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6019\" rel=\"external nofollow noreferrer\">#6019</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"improvement_3\">Improvement<a class=\"headerlink\" href=\"#improvement_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Throws an exception if <code>config.d</code> file doesn't have the corresponding root element as the config file <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6123\" rel=\"external nofollow noreferrer\">#6123</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n</ul>\n<h4 id=\"performance-improvement_2\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Optimize <code>count()</code>. Now it uses the smallest column (if possible). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6028\" rel=\"external nofollow noreferrer\">#6028</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_4\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Report memory usage in performance tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5899\" rel=\"external nofollow noreferrer\">#5899</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fix build with external <code>libcxx</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6010\" rel=\"external nofollow noreferrer\">#6010</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix shared build with <code>rdkafka</code> library <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6101\" rel=\"external nofollow noreferrer\">#6101</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-11-57-2019-09-13\">ClickHouse release 19.11.11.57, 2019-09-13<a class=\"headerlink\" href=\"#clickhouse-release-19-11-11-57-2019-09-13\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Fix logical error causing segfaults when selecting from Kafka empty topic. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6902\" rel=\"external nofollow noreferrer\">#6902</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6909\" rel=\"external nofollow noreferrer\">#6909</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix for function <code>\u0410rrayEnumerateUniqRanked</code> with empty arrays in params. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6928\" rel=\"external nofollow noreferrer\">#6928</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-8-46-2019-08-22\">ClickHouse release 19.11.8.46, 2019-08-22<a class=\"headerlink\" href=\"#clickhouse-release-19-11-8-46-2019-08-22\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_15\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6543\" rel=\"external nofollow noreferrer\">#6543</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix NPE when using IN clause with a subquery with a tuple. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6125\" rel=\"external nofollow noreferrer\">#6125</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6550\" rel=\"external nofollow noreferrer\">#6550</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed an issue that if a stale replica becomes alive, it may still have data parts that were removed by DROP PARTITION. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6522\" rel=\"external nofollow noreferrer\">#6522</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6523\" rel=\"external nofollow noreferrer\">#6523</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed issue with parsing CSV <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6426\" rel=\"external nofollow noreferrer\">#6426</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6559\" rel=\"external nofollow noreferrer\">#6559</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed data race in system.parts table and ALTER query. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6245\" rel=\"external nofollow noreferrer\">#6245</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6513\" rel=\"external nofollow noreferrer\">#6513</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6514\" rel=\"external nofollow noreferrer\">#6514</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-7-40-2019-08-14\">ClickHouse release 19.11.7.40, 2019-08-14<a class=\"headerlink\" href=\"#clickhouse-release-19-11-7-40-2019-08-14\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_16\">Bug fix<a class=\"headerlink\" href=\"#bug-fix_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Kafka integration has been fixed in this version.</li>\n<li>Fix segfault when using <code>arrayReduce</code> for constant arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6326\" rel=\"external nofollow noreferrer\">#6326</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed <code>toFloat()</code> monotonicity. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6374\" rel=\"external nofollow noreferrer\">#6374</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Fix segfault with enabled <code>optimize_skip_unused_shards</code> and missing sharding key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6384\" rel=\"external nofollow noreferrer\">#6384</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">CurtizJ</a>)</li>\n<li>Fixed logic of <code>arrayEnumerateUniqRanked</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6423\" rel=\"external nofollow noreferrer\">#6423</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Removed extra verbose logging from MySQL handler. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6389\" rel=\"external nofollow noreferrer\">#6389</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix wrong behavior and possible segfaults in <code>topK</code> and <code>topKWeighted</code> aggregated functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6404\" rel=\"external nofollow noreferrer\">#6404</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">CurtizJ</a>)</li>\n<li>Do not expose virtual columns in <code>system.columns</code> table. This is required for backward compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/64");
            
            document.write("06\" rel=\"external nofollow noreferrer\">#6406</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug with memory allocation for string fields in complex key cache dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6447\" rel=\"external nofollow noreferrer\">#6447</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix bug with enabling adaptive granularity when creating new replica for <code>Replicated*MergeTree</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6452\" rel=\"external nofollow noreferrer\">#6452</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix infinite loop when reading Kafka messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6354\" rel=\"external nofollow noreferrer\">#6354</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">abyss7</a>)</li>\n<li>Fixed the possibility of a fabricated query to cause server crash due to stack overflow in SQL parser and possibility of stack overflow in <code>Merge</code> and <code>Distributed</code> tables <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6433\" rel=\"external nofollow noreferrer\">#6433</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed Gorilla encoding error on small sequences. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6444\" rel=\"external nofollow noreferrer\">#6444</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Enmk</a>)</li>\n</ul>\n<h4 id=\"improvement_4\">Improvement<a class=\"headerlink\" href=\"#improvement_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Allow user to override <code>poll_interval</code> and <code>idle_connection_timeout</code> settings on connection. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6230\" rel=\"external nofollow noreferrer\">#6230</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-5-28-2019-08-05\">ClickHouse release 19.11.5.28, 2019-08-05<a class=\"headerlink\" href=\"#clickhouse-release-19-11-5-28-2019-08-05\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_17\">Bug fix<a class=\"headerlink\" href=\"#bug-fix_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the possibility of hanging queries when server is overloaded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6301\" rel=\"external nofollow noreferrer\">#6301</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix FPE in yandexConsistentHash function. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6304\" rel=\"external nofollow noreferrer\">#6304</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6126\" rel=\"external nofollow noreferrer\">#6126</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed bug in conversion of <code>LowCardinality</code> types in <code>AggregateFunctionFactory</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6257\" rel=\"external nofollow noreferrer\">#6257</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6281\" rel=\"external nofollow noreferrer\">#6281</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix parsing of <code>bool</code> settings from <code>true</code> and <code>false</code> strings in configuration files. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6278\" rel=\"external nofollow noreferrer\">#6278</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix rare bug with incompatible stream headers in queries to <code>Distributed</code> table over <code>MergeTree</code> table when part of <code>WHERE</code> moves to <code>PREWHERE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6236\" rel=\"external nofollow noreferrer\">#6236</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed overflow in integer division of signed type to unsigned type. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6214\" rel=\"external nofollow noreferrer\">#6214</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6233\" rel=\"external nofollow noreferrer\">#6233</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_4\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>Kafka</code> still broken.</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-4-24-2019-08-01\">ClickHouse release 19.11.4.24, 2019-08-01<a class=\"headerlink\" href=\"#clickhouse-release-19-11-4-24-2019-08-01\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_18\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_18\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix bug with writing secondary indices marks with adaptive granularity. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6126\" rel=\"external nofollow noreferrer\">#6126</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix <code>WITH ROLLUP</code> and <code>WITH CUBE</code> modifiers of <code>GROUP BY</code> with two-level aggregation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6225\" rel=\"external nofollow noreferrer\">#6225</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed hang in <code>JSONExtractRaw</code> function. Fixed <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6195\" rel=\"external nofollow noreferrer\">#6195</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6198\" rel=\"external nofollow noreferrer\">#6198</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix segfault in ExternalLoader::reloadOutdated(). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6082\" rel=\"external nofollow noreferrer\">#6082</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fixed the case when server may close listening sockets but not shutdown and continue serving remaining queries. You may end up with two running clickhouse-server processes. Sometimes, the server may return an error <code>bad_function_call</code> for remaining queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6231\" rel=\"external nofollow noreferrer\">#6231</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed useless and incorrect condition on update field for initial loading of external dictionaries via ODBC, MySQL, ClickHouse and HTTP. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6069\" rel=\"external nofollow noreferrer\">#6069</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6083\" rel=\"external nofollow noreferrer\">#6083</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed irrelevant exception in cast of <code>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn't contain Nulls (e.g. in query like <code>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6094\" rel=\"external nofollow noreferrer\">#6094</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6119\" rel=\"external nofollow noreferrer\">#6119</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix non-deterministic result of \"uniq\" aggregate function in extreme rare cases. The bug was present in all ClickHouse versions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6058\" rel=\"external nofollow noreferrer\">#6058</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Segfault when we set a little bit too high CIDR on the function <code>IPv6CIDRToRange</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6068\" rel=\"external nofollow noreferrer\">#6068</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Fixed small memory leak when server throw many exceptions from many different contexts. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6144\" rel=\"external nofollow noreferrer\">#6144</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix the situation when consumer got paused before subscription and not resumed afterwards. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6075\" rel=\"external nofollow noreferrer\">#6075</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>) Note that Kafka is broken in this version.</li>\n<li>Clearing the Kafka data buffer from the previous read operation that was completed with an error <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6026\" rel=\"external nofollow noreferrer\">#6026</a> (<a href=\"https://github.com/bopohaa\" rel=\"external nofollow noreferrer\">Nikolay</a>) Note that Kafka is broken in this version.</li>\n<li>Since <code>StorageMergeTree::background_task_handle</code> is initialized in <code>startup()</code> the <code>MergeTreeBlockOutputStream::write()</code> may try to use it before initialization. Just check if it is initialized. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6080\" rel=\"external nofollow noreferrer\">#6080</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_5\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_5\" title=\"Permanent link\">&para;</a></h4>");
            
            document.write("\n<ul>\n<li>Added official <code>rpm</code> packages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5740\" rel=\"external nofollow noreferrer\">#5740</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>) (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add an ability to build <code>.rpm</code> and <code>.tgz</code> packages with <code>packager</code> script. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5769\" rel=\"external nofollow noreferrer\">#5769</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixes for \"Arcadia\" build system. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6223\" rel=\"external nofollow noreferrer\">#6223</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_5\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>Kafka</code> is broken in this version.</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-3-11-2019-07-18\">ClickHouse release 19.11.3.11, 2019-07-18<a class=\"headerlink\" href=\"#clickhouse-release-19-11-3-11-2019-07-18\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_4\">New Feature<a class=\"headerlink\" href=\"#new-feature_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for prepared statements. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5331/\" rel=\"external nofollow noreferrer\">#5331</a> (<a href=\"https://github.com/sanych73\" rel=\"external nofollow noreferrer\">Alexander</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5630\" rel=\"external nofollow noreferrer\">#5630</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>DoubleDelta</code> and <code>Gorilla</code> column codecs <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5600\" rel=\"external nofollow noreferrer\">#5600</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Added <code>os_thread_priority</code> setting that allows to control the \"nice\" value of query processing threads that is used by OS to adjust dynamic scheduling priority. It requires <code>CAP_SYS_NICE</code> capabilities to work. This implements <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5858\" rel=\"external nofollow noreferrer\">#5858</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5909\" rel=\"external nofollow noreferrer\">#5909</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Implement <code>_topic</code>, <code>_offset</code>, <code>_key</code> columns for Kafka engine <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5382\" rel=\"external nofollow noreferrer\">#5382</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>) Note that Kafka is broken in this version.</li>\n<li>Add aggregate function combinator <code>-Resample</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5590\" rel=\"external nofollow noreferrer\">#5590</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Aggregate functions <code>groupArrayMovingSum(win_size)(x)</code> and <code>groupArrayMovingAvg(win_size)(x)</code>, which calculate moving sum/avg with or without window-size limitation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5595\" rel=\"external nofollow noreferrer\">#5595</a> (<a href=\"https://github.com/inv2004\" rel=\"external nofollow noreferrer\">inv2004</a>)</li>\n<li>Add synonim <code>arrayFlatten</code> &lt;-&gt; <code>flatten</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5764\" rel=\"external nofollow noreferrer\">#5764</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Intergate H3 function <code>geoToH3</code> from Uber. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4724\" rel=\"external nofollow noreferrer\">#4724</a> (<a href=\"https://github.com/BHYCHIK\" rel=\"external nofollow noreferrer\">Remen Ivan</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5805\" rel=\"external nofollow noreferrer\">#5805</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"bug-fix_19\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_19\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Implement DNS cache with asynchronous update. Separate thread resolves all hosts and updates DNS cache with period (setting <code>dns_cache_update_period</code>). It should help, when ip of hosts changes frequently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5857\" rel=\"external nofollow noreferrer\">#5857</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix segfault in <code>Delta</code> codec which affects columns with values less than 32 bits size. The bug led to random memory corruption. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5786\" rel=\"external nofollow noreferrer\">#5786</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix segfault in TTL merge with non-physical columns in block. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5819\" rel=\"external nofollow noreferrer\">#5819</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix rare bug in checking of part with <code>LowCardinality</code> column. Previously <code>checkDataPart</code> always fails for part with <code>LowCardinality</code> column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5832\" rel=\"external nofollow noreferrer\">#5832</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Avoid hanging connections when server thread pool is full. It is important for connections from <code>remote</code> table function or connections to a shard without replicas when there is long connection timeout. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5878\" rel=\"external nofollow noreferrer\">#5878</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5881\" rel=\"external nofollow noreferrer\">#5881</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Support for constant arguments to <code>evalMLModel</code> function. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5817\" rel=\"external nofollow noreferrer\">#5817</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5820\" rel=\"external nofollow noreferrer\">#5820</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed the issue when ClickHouse determines default time zone as <code>UCT</code> instead of <code>UTC</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5804\" rel=\"external nofollow noreferrer\">#5804</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5828\" rel=\"external nofollow noreferrer\">#5828</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed buffer underflow in <code>visitParamExtractRaw</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5901\" rel=\"external nofollow noreferrer\">#5901</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5902\" rel=\"external nofollow noreferrer\">#5902</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Now distributed <code>DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER</code> queries will be executed directly on leader replica. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5757\" rel=\"external nofollow noreferrer\">#5757</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix <code>coalesce</code> for <code>ColumnConst</code> with <code>ColumnNullable</code> + related changes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5755\" rel=\"external nofollow noreferrer\">#5755</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix the <code>ReadBufferFromKafkaConsumer</code> so that it keeps reading new messages after <code>commit()</code> even if it was stalled before <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5852\" rel=\"external nofollow noreferrer\">#5852</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix <code>FULL</code> and <code>RIGHT</code> JOIN results when joining on <code>Nullable</code> keys in right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5859\" rel=\"external nofollow noreferrer\">#5859</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Possible fix of infinite sleeping of low-priority queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5842\" rel=\"external nofollow noreferrer\">#5842</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix race condition, which cause that some queries may not appear in query_log after <code>SYSTEM FLUSH LOGS</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5456\" rel=\"external nofollow noreferrer\">#5456</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5685\" rel=\"external nofollow noreferrer\">#5685</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed <code>heap-use-after-free</code> ASan warning in ClusterCopier caused by watch which try to use already removed copier object. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5871\" rel=\"external nofollow noreferrer\">#5871</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed wrong <code>StringRef</code> pointer returned by some implementations of <co");
            
            document.write("de>IColumn::deserializeAndInsertFromArena</code>. This bug affected only unit-tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5973\" rel=\"external nofollow noreferrer\">#5973</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Prevent source and intermediate array join columns of masking same name columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5941\" rel=\"external nofollow noreferrer\">#5941</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix insert and select query to MySQL engine with MySQL style identifier quoting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5704\" rel=\"external nofollow noreferrer\">#5704</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Now <code>CHECK TABLE</code> query can work with MergeTree engine family. It returns check status and message if any for each part (or file in case of simplier engines). Also, fix bug in fetch of a broken part. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5865\" rel=\"external nofollow noreferrer\">#5865</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix SPLIT_SHARED_LIBRARIES runtime <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5793\" rel=\"external nofollow noreferrer\">#5793</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fixed time zone initialization when <code>/etc/localtime</code> is a relative symlink like <code>../usr/share/zoneinfo/Europe/Moscow</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5922\" rel=\"external nofollow noreferrer\">#5922</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>clickhouse-copier: Fix use-after free on shutdown <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5752\" rel=\"external nofollow noreferrer\">#5752</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Updated <code>simdjson</code>. Fixed the issue that some invalid JSONs with zero bytes successfully parse. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5938\" rel=\"external nofollow noreferrer\">#5938</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix shutdown of SystemLogs <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5802\" rel=\"external nofollow noreferrer\">#5802</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix hanging when condition in invalidate_query depends on a dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6011\" rel=\"external nofollow noreferrer\">#6011</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n</ul>\n<h4 id=\"improvement_5\">Improvement<a class=\"headerlink\" href=\"#improvement_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Allow unresolvable addresses in cluster configuration. They will be considered unavailable and tried to resolve at every connection attempt. This is especially useful for Kubernetes. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5714\" rel=\"external nofollow noreferrer\">#5714</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5924\" rel=\"external nofollow noreferrer\">#5924</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Close idle TCP connections (with one hour timeout by default). This is especially important for large clusters with multiple distributed tables on every server, because every server can possibly keep a connection pool to every other server, and after peak query concurrency, connections will stall. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5879\" rel=\"external nofollow noreferrer\">#5879</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5880\" rel=\"external nofollow noreferrer\">#5880</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Better quality of <code>topK</code> function. Changed the SavingSpace set behavior to remove the last element if the new element have a bigger weight. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5833\" rel=\"external nofollow noreferrer\">#5833</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5850\" rel=\"external nofollow noreferrer\">#5850</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>URL functions to work with domains now can work for incomplete URLs without scheme <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5725\" rel=\"external nofollow noreferrer\">#5725</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Checksums added to the <code>system.parts_columns</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5874\" rel=\"external nofollow noreferrer\">#5874</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n<li>Added <code>Enum</code> data type as a synonim for <code>Enum8</code> or <code>Enum16</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5886\" rel=\"external nofollow noreferrer\">#5886</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Full bit transpose variant for <code>T64</code> codec. Could lead to better compression with <code>zstd</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5742\" rel=\"external nofollow noreferrer\">#5742</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Condition on <code>startsWith</code> function now can uses primary key. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5310\" rel=\"external nofollow noreferrer\">#5310</a> and <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5882\" rel=\"external nofollow noreferrer\">#5882</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5919\" rel=\"external nofollow noreferrer\">#5919</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Allow to use <code>clickhouse-copier</code> with cross-replication cluster topology by permitting empty database name. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5745\" rel=\"external nofollow noreferrer\">#5745</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Use <code>UTC</code> as default timezone on a system without <code>tzdata</code> (e.g. bare Docker container). Before this patch, error message <code>Could not determine local time zone</code> was printed and server or client refused to start. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5827\" rel=\"external nofollow noreferrer\">#5827</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Returned back support for floating point argument in function <code>quantileTiming</code> for backward compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5911\" rel=\"external nofollow noreferrer\">#5911</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Show which table is missing column in error messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5768\" rel=\"external nofollow noreferrer\">#5768</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Disallow run query with same query_id by various users <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5430\" rel=\"external nofollow noreferrer\">#5430</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>More robust code for sending metrics to Graphite. It will work even during long multiple <code>RENAME TABLE</code> operation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5875\" rel=\"external nofollow noreferrer\">#5875</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>More informative error messages will be displayed when ThreadPool cannot schedule a task for execution. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5305\" rel=\"external nofollow noreferrer\">#5305</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5801\" rel=\"external nofollow noreferrer\">#5801</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Inverting ngramSearch to be more intuitive <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5807\" rel=\"external nofollow noreferrer\">#5807</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Add user parsing in HDFS engine builder <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5946\" rel=\"external nofollow noreferrer\">#5946</a> (<a href=\"https://github.com/akonyaev90\" rel=\"external nofollow noreferrer\">akonyaev90</a>)</li>\n<li>Update default value of <code>max_ast_elements parameter</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5933\" rel=\"external nofollow noreferrer\">#5933</a> (<a href=\"https://github.com/izebit\" rel=\"external nofollow noreferrer\">Artem Konovalov</a>)</li>\n<li>Added a notion of obsolete settings. The obsolete setting <code>allow_experimental_low_cardinality_type</code> can be used with no effect. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/0f15c01c6802f7ce1a1494c12c846be8c98944cd\" rel=\"external nofollow noreferrer\">0f15c01c6802f7ce1a1494c12c846be8c98944cd</a> <a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">Alexey Milovidov</a></li>\n</ul>\n<h4 id=\"performance-improvement_3\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Increase nu");
            
            document.write("mber of streams to SELECT from Merge table for more uniform distribution of threads. Added setting <code>max_streams_multiplier_for_merge_tables</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5797\" rel=\"external nofollow noreferrer\">#5797</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5915\" rel=\"external nofollow noreferrer\">#5915</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_6\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a backward compatibility test for client-server interaction with different versions of clickhouse. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5868\" rel=\"external nofollow noreferrer\">#5868</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Test coverage information in every commit and pull request. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5896\" rel=\"external nofollow noreferrer\">#5896</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Cooperate with address sanitizer to support our custom allocators (<code>Arena</code> and <code>ArenaWithFreeLists</code>) for better debugging of \"use-after-free\" errors. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5728\" rel=\"external nofollow noreferrer\">#5728</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Switch to <a href=\"https://github.com/llvm-mirror/libunwind\" rel=\"external nofollow noreferrer\">LLVM libunwind implementation</a> for C++ exception handling and for stack traces printing <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4828\" rel=\"external nofollow noreferrer\">#4828</a> (<a href=\"https://github.com/laplab\" rel=\"external nofollow noreferrer\">Nikita Lapkov</a>)</li>\n<li>Add two more warnings from -Weverything <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5923\" rel=\"external nofollow noreferrer\">#5923</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow to build ClickHouse with Memory Sanitizer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3949\" rel=\"external nofollow noreferrer\">#3949</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed ubsan report about <code>bitTest</code> function in fuzz test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5943\" rel=\"external nofollow noreferrer\">#5943</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Docker: added possibility to init a ClickHouse instance which requires authentication. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5727\" rel=\"external nofollow noreferrer\">#5727</a> (<a href=\"https://github.com/shurshun\" rel=\"external nofollow noreferrer\">Korviakov Andrey</a>)</li>\n<li>Update librdkafka to version 1.1.0 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5872\" rel=\"external nofollow noreferrer\">#5872</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Add global timeout for integration tests and disable some of them in tests code. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5741\" rel=\"external nofollow noreferrer\">#5741</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix some ThreadSanitizer failures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5854\" rel=\"external nofollow noreferrer\">#5854</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>The <code>--no-undefined</code> option forces the linker to check all external names for existence while linking. It's very useful to track real dependencies between libraries in the split build mode. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5855\" rel=\"external nofollow noreferrer\">#5855</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Added performance test for <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5797\" rel=\"external nofollow noreferrer\">#5797</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5914\" rel=\"external nofollow noreferrer\">#5914</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed compatibility with gcc-7. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5840\" rel=\"external nofollow noreferrer\">#5840</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added support for gcc-9. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5717\" rel=\"external nofollow noreferrer\">#5717</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5774\" rel=\"external nofollow noreferrer\">#5774</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error when libunwind can be linked incorrectly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5948\" rel=\"external nofollow noreferrer\">#5948</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a few warnings found by PVS-Studio. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5921\" rel=\"external nofollow noreferrer\">#5921</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added initial support for <code>clang-tidy</code> static analyzer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5806\" rel=\"external nofollow noreferrer\">#5806</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Convert BSD/Linux endian macros( 'be64toh' and 'htobe64') to the Mac OS X equivalents <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5785\" rel=\"external nofollow noreferrer\">#5785</a> (<a href=\"https://github.com/fredchenbj\" rel=\"external nofollow noreferrer\">Fu Chen</a>)</li>\n<li>Improved integration tests guide. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5796\" rel=\"external nofollow noreferrer\">#5796</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir Chebotarev</a>)</li>\n<li>Fixing build at macosx + gcc9 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5822\" rel=\"external nofollow noreferrer\">#5822</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Fix a hard-to-spot typo: aggreAGte -&gt; aggregate. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5753\" rel=\"external nofollow noreferrer\">#5753</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fix freebsd build <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5760\" rel=\"external nofollow noreferrer\">#5760</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Add link to experimental YouTube channel to website <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5845\" rel=\"external nofollow noreferrer\">#5845</a> (<a href=\"https://github.com/blinkov\" rel=\"external nofollow noreferrer\">Ivan Blinkov</a>)</li>\n<li>CMake: add option for coverage flags: WITH_COVERAGE <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5776\" rel=\"external nofollow noreferrer\">#5776</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix initial size of some inline PODArray's. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5787\" rel=\"external nofollow noreferrer\">#5787</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>clickhouse-server.postinst: fix os detection for centos 6 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5788\" rel=\"external nofollow noreferrer\">#5788</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added Arch linux package generation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5719\" rel=\"external nofollow noreferrer\">#5719</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir Chebotarev</a>)</li>\n<li>Split Common/config.h by libs (dbms) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5715\" rel=\"external nofollow noreferrer\">#5715</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixes for \"Arcadia\" build platform <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5795\" rel=\"external nofollow noreferrer\">#5795</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixes for unconventional build (gcc9, no submodules) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5792\" rel=\"external nofollow noreferrer\">#5792</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Require explicit type in unalignedStore because it was proven to be bug-prone <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5791\" rel=\"external nofollow noreferrer\">#5791</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fixes MacOS build <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5830\" rel=\"external nofollow noreferrer\">#5830</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Performance test concerning the new JIT feature with bigger dataset, as requested here <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5263\" rel=\"external nofollow noreferrer\">#5263</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5887\" rel=\"external nofollow noreferrer\">#5887</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Run stateful tests in stress test <a");
            
            document.write(" href=\"https://github.com/ClickHouse/ClickHouse/commit/12693e568722f11e19859742f56428455501fd2a\" rel=\"external nofollow noreferrer\">12693e568722f11e19859742f56428455501fd2a</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_6\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>Kafka</code> is broken in this version.</li>\n<li>Enable <code>adaptive_index_granularity</code> = 10MB by default for new <code>MergeTree</code> tables. If you created new MergeTree tables on version 19.11+, downgrade to versions prior to 19.6 will be impossible. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5628\" rel=\"external nofollow noreferrer\">#5628</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Removed obsolete undocumented embedded dictionaries that were used by Yandex.Metrica. The functions <code>OSIn</code>, <code>SEIn</code>, <code>OSToRoot</code>, <code>SEToRoot</code>, <code>OSHierarchy</code>, <code>SEHierarchy</code> are no longer available. If you are using these functions, write email to <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;\">&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;</a>. Note: at the last moment we decided to keep these functions for a while. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5780\" rel=\"external nofollow noreferrer\">#5780</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-10-1-5-2019-07-12\">ClickHouse release 19.10.1.5, 2019-07-12<a class=\"headerlink\" href=\"#clickhouse-release-19-10-1-5-2019-07-12\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_5\">New Feature<a class=\"headerlink\" href=\"#new-feature_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add new column codec: <code>T64</code>. Made for (U)IntX/EnumX/Data(Time)/DecimalX columns. It should be good for columns with constant or small range values. Codec itself allows enlarge or shrink data type without re-compression. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5557\" rel=\"external nofollow noreferrer\">#5557</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Add database engine <code>MySQL</code> that allow to view all the tables in remote MySQL server <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5599\" rel=\"external nofollow noreferrer\">#5599</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li><code>bitmapContains</code> implementation. It's 2x faster than <code>bitmapHasAny</code> if the second bitmap contains one element. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5535\" rel=\"external nofollow noreferrer\">#5535</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Support for <code>crc32</code> function (with behaviour exactly as in MySQL or PHP). Do not use it if you need a hash function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5661\" rel=\"external nofollow noreferrer\">#5661</a> (<a href=\"https://github.com/BHYCHIK\" rel=\"external nofollow noreferrer\">Remen Ivan</a>)</li>\n<li>Implemented <code>SYSTEM START/STOP DISTRIBUTED SENDS</code> queries to control asynchronous inserts into <code>Distributed</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4935\" rel=\"external nofollow noreferrer\">#4935</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n</ul>\n<h4 id=\"bug-fix_20\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_20\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Ignore query execution limits and max parts size for merge limits while executing mutations. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5659\" rel=\"external nofollow noreferrer\">#5659</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix bug which may lead to deduplication of normal blocks (extremely rare) and insertion of duplicate blocks (more often). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5549\" rel=\"external nofollow noreferrer\">#5549</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix of function <code>arrayEnumerateUniqRanked</code> for arguments with empty arrays <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5559\" rel=\"external nofollow noreferrer\">#5559</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Don't subscribe to Kafka topics without intent to poll any messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5698\" rel=\"external nofollow noreferrer\">#5698</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Make setting <code>join_use_nulls</code> get no effect for types that cannot be inside Nullable <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5700\" rel=\"external nofollow noreferrer\">#5700</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Fixed <code>Incorrect size of index granularity</code> errors <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5720\" rel=\"external nofollow noreferrer\">#5720</a> (<a href=\"https://github.com/coraxster\" rel=\"external nofollow noreferrer\">coraxster</a>)</li>\n<li>Fix Float to Decimal convert overflow <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5607\" rel=\"external nofollow noreferrer\">#5607</a> (<a href=\"https://github.com/coraxster\" rel=\"external nofollow noreferrer\">coraxster</a>)</li>\n<li>Flush buffer when <code>WriteBufferFromHDFS</code>'s destructor is called. This fixes writing into <code>HDFS</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5684\" rel=\"external nofollow noreferrer\">#5684</a> (<a href=\"https://github.com/eejoin\" rel=\"external nofollow noreferrer\">Xindong Peng</a>)</li>\n</ul>\n<h4 id=\"improvement_6\">Improvement<a class=\"headerlink\" href=\"#improvement_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Treat empty cells in <code>CSV</code> as default values when the setting <code>input_format_defaults_for_omitted_fields</code> is enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5625\" rel=\"external nofollow noreferrer\">#5625</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Non-blocking loading of external dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5567\" rel=\"external nofollow noreferrer\">#5567</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Network timeouts can be dynamically changed for already established connections according to the settings. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4558\" rel=\"external nofollow noreferrer\">#4558</a> (<a href=\"https://github.com/podshumok\" rel=\"external nofollow noreferrer\">Konstantin Podshumok</a>)</li>\n<li>Using \"public_suffix_list\" for functions <code>firstSignificantSubdomain</code>, <code>cutToFirstSignificantSubdomain</code>. It's using a perfect hash table generated by <code>gperf</code> with a list generated from the file: <a href=\"https://publicsuffix.org/list/public_suffix_list.dat\" rel=\"external nofollow noreferrer\">https://publicsuffix.org/list/public_suffix_list.dat</a>. (for example, now we recognize the domain <code>ac.uk</code> as non-significant). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5030\" rel=\"external nofollow noreferrer\">#5030</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Adopted <code>IPv6</code> data type in system tables; unified client info columns in <code>system.processes</code> and <code>system.query_log</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5640\" rel=\"external nofollow noreferrer\">#5640</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Using sessions for connections with MySQL compatibility protocol. #5476 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5646\" rel=\"external nofollow noreferrer\">#5646</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Support more <code>ALTER</code> queries <code>ON CLUSTER</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5593\" rel=\"external nofollow noreferrer\">#5593</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5613\" rel=\"external nofollow noreferrer\">#5613</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Support <code>&lt;logger&gt;</code> section in <code>clickhouse-local</code> config file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5540\" rel=\"external nofollow noreferrer\">#5540</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Allow run query with <code>remote</code> table function in <code>clickhouse-local</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5627\" rel=\"external nofollow noreferrer\">#5627</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"performance-improvement_4\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add the possibility to write the final mark at the end of MergeTree columns. It allows to avoid useless reads for keys that are out of table data range. It is enabled only if adaptive index granularity is in use. <a href=\"https://github.com/ClickHouse/Cli");
            
            document.write("ckHouse/pull/5624\" rel=\"external nofollow noreferrer\">#5624</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Improved performance of MergeTree tables on very slow filesystems by reducing number of <code>stat</code> syscalls. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5648\" rel=\"external nofollow noreferrer\">#5648</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed performance degradation in reading from MergeTree tables that was introduced in version 19.6. Fixes #5631. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5633\" rel=\"external nofollow noreferrer\">#5633</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_7\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Implemented <code>TestKeeper</code> as an implementation of ZooKeeper interface used for testing <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5643\" rel=\"external nofollow noreferrer\">#5643</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>) (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">levushkin aleksej</a>)</li>\n<li>From now on <code>.sql</code> tests can be run isolated by server, in parallel, with random database. It allows to run them faster, add new tests with custom server configurations, and be sure that different tests doesn't affect each other. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5554\" rel=\"external nofollow noreferrer\">#5554</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Remove <code>&lt;name&gt;</code> and <code>&lt;metrics&gt;</code> from performance tests <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5672\" rel=\"external nofollow noreferrer\">#5672</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Fixed \"select_format\" performance test for <code>Pretty</code> formats <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5642\" rel=\"external nofollow noreferrer\">#5642</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-9-3-31-2019-07-05\">ClickHouse release 19.9.3.31, 2019-07-05<a class=\"headerlink\" href=\"#clickhouse-release-19-9-3-31-2019-07-05\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_21\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_21\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix segfault in Delta codec which affects columns with values less than 32 bits size. The bug led to random memory corruption. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5786\" rel=\"external nofollow noreferrer\">#5786</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix rare bug in checking of part with LowCardinality column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5832\" rel=\"external nofollow noreferrer\">#5832</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix segfault in TTL merge with non-physical columns in block. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5819\" rel=\"external nofollow noreferrer\">#5819</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix potential infinite sleeping of low-priority queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5842\" rel=\"external nofollow noreferrer\">#5842</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix how ClickHouse determines default time zone as UCT instead of UTC. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5828\" rel=\"external nofollow noreferrer\">#5828</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug about executing distributed DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER queries on follower replica before leader replica. Now they will be executed directly on leader replica. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5757\" rel=\"external nofollow noreferrer\">#5757</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix race condition, which cause that some queries may not appear in query_log instantly after SYSTEM FLUSH LOGS query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5685\" rel=\"external nofollow noreferrer\">#5685</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Added missing support for constant arguments to <code>evalMLModel</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5820\" rel=\"external nofollow noreferrer\">#5820</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-7-5-29-2019-07-05\">ClickHouse release 19.7.5.29, 2019-07-05<a class=\"headerlink\" href=\"#clickhouse-release-19-7-5-29-2019-07-05\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_22\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_22\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix performance regression in some queries with JOIN. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5192\" rel=\"external nofollow noreferrer\">#5192</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-9-2-4-2019-06-24\">ClickHouse release 19.9.2.4, 2019-06-24<a class=\"headerlink\" href=\"#clickhouse-release-19-9-2-4-2019-06-24\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_6\">New Feature<a class=\"headerlink\" href=\"#new-feature_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Print information about frozen parts in <code>system.parts</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5471\" rel=\"external nofollow noreferrer\">#5471</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Ask client password on clickhouse-client start on tty if not set in arguments <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5092\" rel=\"external nofollow noreferrer\">#5092</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Implement <code>dictGet</code> and <code>dictGetOrDefault</code> functions for Decimal types. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5394\" rel=\"external nofollow noreferrer\">#5394</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"improvement_7\">Improvement<a class=\"headerlink\" href=\"#improvement_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Debian init: Add service stop timeout <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5522\" rel=\"external nofollow noreferrer\">#5522</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Add setting forbidden by default to create table with suspicious types for LowCardinality <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5448\" rel=\"external nofollow noreferrer\">#5448</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Regression functions return model weights when not used as State in function <code>evalMLMethod</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5411\" rel=\"external nofollow noreferrer\">#5411</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Rename and improve regression methods. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5492\" rel=\"external nofollow noreferrer\">#5492</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Clearer interfaces of string searchers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5586\" rel=\"external nofollow noreferrer\">#5586</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n</ul>\n<h4 id=\"bug-fix_23\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_23\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix potential data loss in Kafka <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5445\" rel=\"external nofollow noreferrer\">#5445</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix potential infinite loop in <code>PrettySpace</code> format when called with zero columns <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5560\" rel=\"external nofollow noreferrer\">#5560</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Fixed UInt32 overflow bug in linear models. Allow eval ML model for non-const model argument. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5516\" rel=\"external nofollow noreferrer\">#5516</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li><code>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> should not raise an exception if provided index does not exist <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5524\" rel=\"external nofollow noreferrer\">#5524</a> (<a href=\"https://github.com/NanoBjorn\" rel=\"external nofollow noreferrer\">Gleb Novikov</a>)</li>\n<li>Fix segfault with <code>bitmapHasAny</code> in scalar subquery <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5528\" rel=\"external nofollow noreferrer\">#5528</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Fixed error when replication connection pool doesn't retry to resolve host, even when DNS cache was dropped. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5534\" rel=\"external nofollow noreferrer\">#5534</a> (<a href=\"https://gi");
            
            document.write("thub.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>ALTER ... MODIFY TTL</code> on ReplicatedMergeTree. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5539\" rel=\"external nofollow noreferrer\">#5539</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix INSERT into Distributed table with MATERIALIZED column <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5429\" rel=\"external nofollow noreferrer\">#5429</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix bad alloc when truncate Join storage <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5437\" rel=\"external nofollow noreferrer\">#5437</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>)</li>\n<li>In recent versions of package tzdata some of files are symlinks now. The current mechanism for detecting default timezone gets broken and gives wrong names for some timezones. Now at least we force the timezone name to the contents of TZ if provided. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5443\" rel=\"external nofollow noreferrer\">#5443</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix some extremely rare cases with MultiVolnitsky searcher when the constant needles in sum are at least 16KB long. The algorithm missed or overwrote the previous results which can lead to the incorrect result of <code>multiSearchAny</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5588\" rel=\"external nofollow noreferrer\">#5588</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fix the issue when settings for ExternalData requests couldn't use ClickHouse settings. Also, for now, settings <code>date_time_input_format</code> and <code>low_cardinality_allow_in_native_format</code> cannot be used because of the ambiguity of names (in external data it can be interpreted as table format and in the query it can be a setting). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5455\" rel=\"external nofollow noreferrer\">#5455</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fix bug when parts were removed only from FS without dropping them from Zookeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5520\" rel=\"external nofollow noreferrer\">#5520</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Remove debug logging from MySQL protocol <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5478\" rel=\"external nofollow noreferrer\">#5478</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Skip ZNONODE during DDL query processing <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5489\" rel=\"external nofollow noreferrer\">#5489</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix mix <code>UNION ALL</code> result column type. There were cases with inconsistent data and column types of resulting columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5503\" rel=\"external nofollow noreferrer\">#5503</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Throw an exception on wrong integers in <code>dictGetT</code> functions instead of crash. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5446\" rel=\"external nofollow noreferrer\">#5446</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix wrong element_count and load_factor for hashed dictionary in <code>system.dictionaries</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5440\" rel=\"external nofollow noreferrer\">#5440</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_8\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed build without <code>Brotli</code> HTTP compression support (<code>ENABLE_BROTLI=OFF</code> cmake variable). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5521\" rel=\"external nofollow noreferrer\">#5521</a> (<a href=\"https://github.com/citrin\" rel=\"external nofollow noreferrer\">Anton Yuzhaninov</a>)</li>\n<li>Include roaring.h as roaring/roaring.h <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5523\" rel=\"external nofollow noreferrer\">#5523</a> (<a href=\"https://github.com/orivej\" rel=\"external nofollow noreferrer\">Orivej Desh</a>)</li>\n<li>Fix gcc9 warnings in hyperscan (#line directive is evil!) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5546\" rel=\"external nofollow noreferrer\">#5546</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fix all warnings when compiling with gcc-9. Fix some contrib issues. Fix gcc9 ICE and submit it to bugzilla. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5498\" rel=\"external nofollow noreferrer\">#5498</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fixed linking with lld <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5477\" rel=\"external nofollow noreferrer\">#5477</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Remove unused specializations in dictionaries <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5452\" rel=\"external nofollow noreferrer\">#5452</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Improvement performance tests for formatting and parsing tables for different types of files <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5497\" rel=\"external nofollow noreferrer\">#5497</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Fixes for parallel test run <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5506\" rel=\"external nofollow noreferrer\">#5506</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Docker: use configs from clickhouse-test <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5531\" rel=\"external nofollow noreferrer\">#5531</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix compile for FreeBSD <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5447\" rel=\"external nofollow noreferrer\">#5447</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Upgrade boost to 1.70 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5570\" rel=\"external nofollow noreferrer\">#5570</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix build clickhouse as submodule <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5574\" rel=\"external nofollow noreferrer\">#5574</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Improve JSONExtract performance tests <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5444\" rel=\"external nofollow noreferrer\">#5444</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-8-3-8-2019-06-11\">ClickHouse release 19.8.3.8, 2019-06-11<a class=\"headerlink\" href=\"#clickhouse-release-19-8-3-8-2019-06-11\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features\">New Features<a class=\"headerlink\" href=\"#new-features\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added functions to work with JSON <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4686\" rel=\"external nofollow noreferrer\">#4686</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5124\" rel=\"external nofollow noreferrer\">#5124</a>. (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Add a function basename, with a similar behaviour to a basename function, which exists in a lot of languages (<code>os.path.basename</code> in python, <code>basename</code> in PHP, etc...). Work with both an UNIX-like path or a Windows path. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5136\" rel=\"external nofollow noreferrer\">#5136</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Added <code>LIMIT n, m BY</code> or <code>LIMIT m OFFSET n BY</code> syntax to set offset of n for LIMIT BY clause. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5138\" rel=\"external nofollow noreferrer\">#5138</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Added new data type <code>SimpleAggregateFunction</code>, which allows to have columns with light aggregation in an <code>AggregatingMergeTree</code>. This can only be used with simple functions like <code>any</code>, <code>anyLast</code>, <code>sum</code>, <code>min</code>, <code>max</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4629\" rel=\"external nofollow noreferrer\">#4629</a> (<a href=\"https://github.com/bgranvea\" rel=\"external nofollow noreferrer\">Boris Granveaud</a>)</li>\n<li>Added support for non-constant arguments in function <code>ngramDistance</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5198\" rel=\"external nofollow noreferrer\">#5198</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Added functions <code>skewPop</code>, <code>skewSamp</code>, <code>kurtPop</code> and <code>kurtSamp</code> to compute for sequence skewness, sample skewness, kurtosis and sample kurtosis respectively. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5200\" rel=\"external nofollow noreferrer\">#5200</a> (<a href=\"https://github.");
            
            document.write("com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Support rename operation for <code>MaterializeView</code> storage. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5209\" rel=\"external nofollow noreferrer\">#5209</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Added server which allows connecting to ClickHouse using MySQL client. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4715\" rel=\"external nofollow noreferrer\">#4715</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Add <code>toDecimal*OrZero</code> and <code>toDecimal*OrNull</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5291\" rel=\"external nofollow noreferrer\">#5291</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Support Decimal types in functions: <code>quantile</code>, <code>quantiles</code>, <code>median</code>, <code>quantileExactWeighted</code>, <code>quantilesExactWeighted</code>, medianExactWeighted. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5304\" rel=\"external nofollow noreferrer\">#5304</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Added <code>toValidUTF8</code> function, which replaces all invalid UTF-8 characters by replacement character \ufffd (U+FFFD). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5322\" rel=\"external nofollow noreferrer\">#5322</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Added <code>format</code> function. Formatting constant pattern (simplified Python format pattern) with the strings listed in the arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5330\" rel=\"external nofollow noreferrer\">#5330</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Added <code>system.detached_parts</code> table containing information about detached parts of <code>MergeTree</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5353\" rel=\"external nofollow noreferrer\">#5353</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Added <code>ngramSearch</code> function to calculate the non-symmetric difference between needle and haystack. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5418\" rel=\"external nofollow noreferrer\">#5418</a><a href=\"https://github.com/ClickHouse/ClickHouse/pull/5422\" rel=\"external nofollow noreferrer\">#5422</a>  (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Implementation of basic machine learning methods (stochastic linear regression and logistic regression) using aggregate functions interface. Has different strategies for updating model weights (simple gradient descent, momentum method, Nesterov method). Also supports mini-batches of custom size. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4943\" rel=\"external nofollow noreferrer\">#4943</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Implementation of <code>geohashEncode</code> and <code>geohashDecode</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5003\" rel=\"external nofollow noreferrer\">#5003</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Added aggregate function <code>timeSeriesGroupSum</code>, which can aggregate different time series that sample timestamp not alignment. It will use linear interpolation between two sample timestamp and then sum time-series together. Added aggregate function <code>timeSeriesGroupRateSum</code>, which calculates the rate of time-series and then sum rates together. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4542\" rel=\"external nofollow noreferrer\">#4542</a> (<a href=\"https://github.com/LiuYangkuan\" rel=\"external nofollow noreferrer\">Yangkuan Liu</a>)</li>\n<li>Added functions <code>IPv4CIDRtoIPv4Range</code> and <code>IPv6CIDRtoIPv6Range</code> to calculate the lower and higher bounds for an IP in the subnet using a CIDR. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5095\" rel=\"external nofollow noreferrer\">#5095</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Add a X-ClickHouse-Summary header when we send a query using HTTP with enabled setting <code>send_progress_in_http_headers</code>. Return the usual information of X-ClickHouse-Progress, with additional information like how many rows and bytes were inserted in the query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5116\" rel=\"external nofollow noreferrer\">#5116</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n</ul>\n<h4 id=\"improvements\">Improvements<a class=\"headerlink\" href=\"#improvements\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added <code>max_parts_in_total</code> setting for MergeTree family of tables (default: 100 000) that prevents unsafe specification of partition key #5166. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5171\" rel=\"external nofollow noreferrer\">#5171</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>clickhouse-obfuscator</code>: derive seed for individual columns by combining initial seed with column name, not column position. This is intended to transform datasets with multiple related tables, so that tables will remain JOINable after transformation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5178\" rel=\"external nofollow noreferrer\">#5178</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added functions <code>JSONExtractRaw</code>, <code>JSONExtractKeyAndValues</code>. Renamed functions <code>jsonExtract&lt;type&gt;</code> to <code>JSONExtract&lt;type&gt;</code>. When something goes wrong these functions return the correspondent values, not <code>NULL</code>. Modified function <code>JSONExtract</code>, now it gets the return type from its last parameter and doesn't inject nullables. Implemented fallback to RapidJSON in case AVX2 instructions are not available. Simdjson library updated to a new version. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5235\" rel=\"external nofollow noreferrer\">#5235</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Now <code>if</code> and <code>multiIf</code> functions don't rely on the condition's <code>Nullable</code>, but rely on the branches for sql compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5238\" rel=\"external nofollow noreferrer\">#5238</a> (<a href=\"https://github.com/janplus\" rel=\"external nofollow noreferrer\">Jian Wu</a>)</li>\n<li><code>In</code> predicate now generates <code>Null</code> result from <code>Null</code> input like the <code>Equal</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5152\" rel=\"external nofollow noreferrer\">#5152</a> (<a href=\"https://github.com/janplus\" rel=\"external nofollow noreferrer\">Jian Wu</a>)</li>\n<li>Check the time limit every (flush_interval / poll_timeout) number of rows from Kafka. This allows to break the reading from Kafka consumer more frequently and to check the time limits for the top-level streams <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5249\" rel=\"external nofollow noreferrer\">#5249</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Link rdkafka with bundled SASL. It should allow to use SASL SCRAM authentication <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5253\" rel=\"external nofollow noreferrer\">#5253</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Batched version of RowRefList for ALL JOINS. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5267\" rel=\"external nofollow noreferrer\">#5267</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>clickhouse-server: more informative listen error messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5268\" rel=\"external nofollow noreferrer\">#5268</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Support dictionaries in clickhouse-copier for functions in <code>&lt;sharding_key&gt;</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5270\" rel=\"external nofollow noreferrer\">#5270</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Add new setting <code>kafka_commit_every_batch</code> to regulate Kafka committing policy.<br />\nIt allows to set commit mode: after every batch of messages is handled, or after the whole block is written to the storage. It's a trade-off between losing some messages or reading them twice in some extreme situations. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5308\" rel=\"external nofollow noreferrer\">#5308</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Make <code>windowFunnel</code> support other Unsigned Integer Types. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5320\" rel=\"external nofollow noreferrer\">#5320</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Allow to shadow virtual column <code>_table</code> in Merge engine. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5325\" rel=\"external nofollow noreferrer\">#5325</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Make <code>sequenceMatch</code> aggregate functions support other unsigned Integer types <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5339\" rel=\"external nofollow noreferrer\">#5339</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Better error messages if checksum mismatch ");
            
            document.write("is most likely caused by hardware failures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5355\" rel=\"external nofollow noreferrer\">#5355</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Check that underlying tables support sampling for <code>StorageMerge</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5366\" rel=\"external nofollow noreferrer\">#5366</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>\u0421lose MySQL connections after their usage in external dictionaries. It is related to issue #893. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5395\" rel=\"external nofollow noreferrer\">#5395</a> (<a href=\"https://github.com/clemrodriguez\" rel=\"external nofollow noreferrer\">Cl\u00e9ment Rodriguez</a>)</li>\n<li>Improvements of MySQL Wire Protocol. Changed name of format to MySQLWire. Using RAII for calling RSA_free. Disabling SSL if context cannot be created. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5419\" rel=\"external nofollow noreferrer\">#5419</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>clickhouse-client: allow to run with unaccessable history file (read-only, no disk space, file is directory, ...). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5431\" rel=\"external nofollow noreferrer\">#5431</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Respect query settings in asynchronous INSERTs into Distributed tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4936\" rel=\"external nofollow noreferrer\">#4936</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>)</li>\n<li>Renamed functions <code>leastSqr</code> to <code>simpleLinearRegression</code>, <code>LinearRegression</code> to <code>linearRegression</code>, <code>LogisticRegression</code> to <code>logisticRegression</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5391\" rel=\"external nofollow noreferrer\">#5391</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h4 id=\"performance-improvements\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Parallelize processing of parts of non-replicated MergeTree tables in ALTER MODIFY query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4639\" rel=\"external nofollow noreferrer\">#4639</a> (<a href=\"https://github.com/IvanKush\" rel=\"external nofollow noreferrer\">Ivan Kush</a>)</li>\n<li>Optimizations in regular expressions extraction. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5193\" rel=\"external nofollow noreferrer\">#5193</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5191\" rel=\"external nofollow noreferrer\">#5191</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Do not add right join key column to join result if it's used only in join on section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5260\" rel=\"external nofollow noreferrer\">#5260</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Freeze the Kafka buffer after first empty response. It avoids multiple invokations of <code>ReadBuffer::next()</code> for empty result in some row-parsing streams. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5283\" rel=\"external nofollow noreferrer\">#5283</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li><code>concat</code> function optimization for multiple arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5357\" rel=\"external nofollow noreferrer\">#5357</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Query optimisation. Allow push down IN statement while rewriting comm\u0430/cross join into inner one. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5396\" rel=\"external nofollow noreferrer\">#5396</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Upgrade our LZ4 implementation with reference one to have faster decompression. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5070\" rel=\"external nofollow noreferrer\">#5070</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Implemented MSD radix sort (based on kxsort), and partial sorting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5129\" rel=\"external nofollow noreferrer\">#5129</a> (<a href=\"https://github.com/kvinty\" rel=\"external nofollow noreferrer\">Evgenii Pravda</a>)</li>\n</ul>\n<h4 id=\"bug-fixes\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix push require columns with join <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5192\" rel=\"external nofollow noreferrer\">#5192</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed bug, when ClickHouse is run by systemd, the command <code>sudo service clickhouse-server forcerestart</code> was not working as expected. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5204\" rel=\"external nofollow noreferrer\">#5204</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix http error codes in DataPartsExchange (interserver http server on 9009 port always returned code 200, even on errors). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5216\" rel=\"external nofollow noreferrer\">#5216</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix SimpleAggregateFunction for String longer than MAX_SMALL_STRING_SIZE <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5311\" rel=\"external nofollow noreferrer\">#5311</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix error for <code>Decimal</code> to <code>Nullable(Decimal)</code> conversion in IN. Support other Decimal to Decimal conversions (including different scales). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5350\" rel=\"external nofollow noreferrer\">#5350</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed FPU clobbering in simdjson library that lead to wrong calculation of <code>uniqHLL</code> and <code>uniqCombined</code> aggregate function and math functions such as <code>log</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5354\" rel=\"external nofollow noreferrer\">#5354</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed handling mixed const/nonconst cases in JSON functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5435\" rel=\"external nofollow noreferrer\">#5435</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix <code>retention</code> function. Now all conditions that satisfy in a row of data are added to the data state. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5119\" rel=\"external nofollow noreferrer\">#5119</a> (<a href=\"https://github.com/nicelulu\" rel=\"external nofollow noreferrer\">\u5c0f\u8def</a>)</li>\n<li>Fix result type for <code>quantileExact</code> with Decimals. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5304\" rel=\"external nofollow noreferrer\">#5304</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"documentation\">Documentation<a class=\"headerlink\" href=\"#documentation\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Translate documentation for <code>CollapsingMergeTree</code> to chinese. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5168\" rel=\"external nofollow noreferrer\">#5168</a> (<a href=\"https://github.com/AlexZFX\" rel=\"external nofollow noreferrer\">\u5f20\u98ce\u5578</a>)</li>\n<li>Translate some documentation about table engines to chinese.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5134\" rel=\"external nofollow noreferrer\">#5134</a><br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5328\" rel=\"external nofollow noreferrer\">#5328</a><br />\n    (<a href=\"https://github.com/neverlee\" rel=\"external nofollow noreferrer\">never lee</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix some sanitizer reports that show probable use-after-free.<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5139\" rel=\"external nofollow noreferrer\">#5139</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5143\" rel=\"external nofollow noreferrer\">#5143</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5393\" rel=\"external nofollow noreferrer\">#5393</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Move performance tests out of separate directories for convenience. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5158\" rel=\"external nofollow noreferrer\">#5158</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix incorrect performance tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5255\" rel=\"external nofollow noreferrer\">#5255</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added a tool to calculate checksums caused by bit flips to debug hardware issues. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5334\" rel=\"external nofollow noreferrer\">#5334</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Make runner script more usable. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5340\" rel=\"external nofollow noreferrer\">#5340</a><a href=\"https://github.com/ClickHouse/Cli");
            
            document.write("ckHouse/pull/5360\" rel=\"external nofollow noreferrer\">#5360</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Add small instruction how to write performance tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5408\" rel=\"external nofollow noreferrer\">#5408</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add ability to make substitutions in create, fill and drop query in performance tests <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5367\" rel=\"external nofollow noreferrer\">#5367</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-7-5-27-2019-06-09\">ClickHouse release 19.7.5.27, 2019-06-09<a class=\"headerlink\" href=\"#clickhouse-release-19-7-5-27-2019-06-09\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_1\">New features<a class=\"headerlink\" href=\"#new-features_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added bitmap related functions <code>bitmapHasAny</code> and <code>bitmapHasAll</code> analogous to <code>hasAny</code> and <code>hasAll</code> functions for arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5279\" rel=\"external nofollow noreferrer\">#5279</a> (<a href=\"https://github.com/svladykin\" rel=\"external nofollow noreferrer\">Sergi Vladykin</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_1\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix segfault on <code>minmax</code> INDEX with Null value. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5246\" rel=\"external nofollow noreferrer\">#5246</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Mark all input columns in LIMIT BY as required output. It fixes 'Not found column' error in some distributed queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5407\" rel=\"external nofollow noreferrer\">#5407</a> (<a href=\"https://github.com/kvap\" rel=\"external nofollow noreferrer\">Constantin S. Pan</a>)</li>\n<li>Fix \"Column '0' already exists\" error in <code>SELECT .. PREWHERE</code> on column with DEFAULT <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5397\" rel=\"external nofollow noreferrer\">#5397</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix <code>ALTER MODIFY TTL</code> query on <code>ReplicatedMergeTree</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5539/commits\" rel=\"external nofollow noreferrer\">#5539</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Don't crash the server when Kafka consumers have failed to start. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5285\" rel=\"external nofollow noreferrer\">#5285</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed bitmap functions produce wrong result. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5359\" rel=\"external nofollow noreferrer\">#5359</a> (<a href=\"https://github.com/andyyzh\" rel=\"external nofollow noreferrer\">Andy Yang</a>)</li>\n<li>Fix element_count for hashed dictionary (do not include duplicates) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5440\" rel=\"external nofollow noreferrer\">#5440</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Use contents of environment variable TZ as the name for timezone. It helps to correctly detect default timezone in some cases.<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5443\" rel=\"external nofollow noreferrer\">#5443</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Do not try to convert integers in <code>dictGetT</code> functions, because it doesn't work correctly. Throw an exception instead. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5446\" rel=\"external nofollow noreferrer\">#5446</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix settings in ExternalData HTTP request. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5455\" rel=\"external nofollow noreferrer\">#5455</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila<br />\n  Kutenin</a>)</li>\n<li>Fix bug when parts were removed only from FS without dropping them from Zookeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5520\" rel=\"external nofollow noreferrer\">#5520</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix segmentation fault in <code>bitmapHasAny</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5528\" rel=\"external nofollow noreferrer\">#5528</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Fixed error when replication connection pool doesn't retry to resolve host, even when DNS cache was dropped. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5534\" rel=\"external nofollow noreferrer\">#5534</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>DROP INDEX IF EXISTS</code> query. Now <code>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> query doesn't raise an exception if provided index does not exist. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5524\" rel=\"external nofollow noreferrer\">#5524</a> (<a href=\"https://github.com/NanoBjorn\" rel=\"external nofollow noreferrer\">Gleb Novikov</a>)</li>\n<li>Fix union all supertype column. There were cases with inconsistent data and column types of resulting columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5503\" rel=\"external nofollow noreferrer\">#5503</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Skip ZNONODE during DDL query processing. Before if another node removes the znode in task queue, the one that<br />\ndid not process it, but already get list of children, will terminate the DDLWorker thread. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5489\" rel=\"external nofollow noreferrer\">#5489</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix INSERT into Distributed() table with MATERIALIZED column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5429\" rel=\"external nofollow noreferrer\">#5429</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-7-3-9-2019-05-30\">ClickHouse release 19.7.3.9, 2019-05-30<a class=\"headerlink\" href=\"#clickhouse-release-19-7-3-9-2019-05-30\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_2\">New Features<a class=\"headerlink\" href=\"#new-features_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Allow to limit the range of a setting that can be specified by user.<br />\n  These constraints can be set up in user settings profile.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/4931\" rel=\"external nofollow noreferrer\">#4931</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly<br />\nBaranov</a>)</li>\n<li>Add a second version of the function <code>groupUniqArray</code> with an optional<br />\n<code>max_size</code> parameter that limits the size of the resulting array. This<br />\nbehavior is similar to <code>groupArray(max_size)(x)</code> function.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5026\" rel=\"external nofollow noreferrer\">#5026</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume<br />\nTassery</a>)</li>\n<li>For TSVWithNames/CSVWithNames input file formats, column order can now be<br />\n  determined from file header. This is controlled by<br />\n<code>input_format_with_names_use_header</code> parameter.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5081\" rel=\"external nofollow noreferrer\">#5081</a><br />\n(<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_2\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Crash with uncompressed_cache + JOIN during merge (#5197)<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5133\" rel=\"external nofollow noreferrer\">#5133</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila<br />\nKutenin</a>)</li>\n<li>Segmentation fault on a clickhouse-client query to system tables. #5066<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5127\" rel=\"external nofollow noreferrer\">#5127</a><br />\n(<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Data loss on heavy load via KafkaEngine (#4736)<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5080\" rel=\"external nofollow noreferrer\">#5080</a><br />\n(<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5189\" rel=\"external nofollow noreferrer\">#5189</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_1\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Use radix sort for sorting by single numeric column in <code>ORDER BY</code> without<br />\n<code>LIMIT</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5106\" rel=\"external nofollow noreferrer\">#5106</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/4439\" rel=\"external nofollow noreferrer\">#4439</a><br />\n(<a href=\"https://github.com/kvinty\" rel=\"external nofollow nor");
            
            document.write("eferrer\">Evgenii Pravda</a>,<br />\n<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"documentation_1\">Documentation<a class=\"headerlink\" href=\"#documentation_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Translate documentation for some table engines to Chinese.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5107\" rel=\"external nofollow noreferrer\">#5107</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5094\" rel=\"external nofollow noreferrer\">#5094</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5087\" rel=\"external nofollow noreferrer\">#5087</a><br />\n(<a href=\"https://github.com/AlexZFX\" rel=\"external nofollow noreferrer\">\u5f20\u98ce\u5578</a>),<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5068\" rel=\"external nofollow noreferrer\">#5068</a> (<a href=\"https://github.com/neverlee\" rel=\"external nofollow noreferrer\">never<br />\nlee</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_1\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Print UTF-8 characters properly in <code>clickhouse-test</code>.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5084\" rel=\"external nofollow noreferrer\">#5084</a><br />\n(<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add command line parameter for clickhouse-client to always load suggestion<br />\n  data. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5102\" rel=\"external nofollow noreferrer\">#5102</a><br />\n(<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Resolve some of PVS-Studio warnings.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5082\" rel=\"external nofollow noreferrer\">#5082</a><br />\n(<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Update LZ4 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5040\" rel=\"external nofollow noreferrer\">#5040</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila<br />\n  Kutenin</a>)</li>\n<li>Add gperf to build requirements for upcoming pull request #5030.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5110\" rel=\"external nofollow noreferrer\">#5110</a><br />\n(<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-6-3-18-2019-06-13\">ClickHouse release 19.6.3.18, 2019-06-13<a class=\"headerlink\" href=\"#clickhouse-release-19-6-3-18-2019-06-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_3\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed IN condition pushdown for queries from table functions <code>mysql</code> and <code>odbc</code> and corresponding table engines. This fixes #3540 and #2384. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5313\" rel=\"external nofollow noreferrer\">#5313</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix deadlock in Zookeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5297\" rel=\"external nofollow noreferrer\">#5297</a> (<a href=\"https://github.com/github1youlc\" rel=\"external nofollow noreferrer\">github1youlc</a>)</li>\n<li>Allow quoted decimals in CSV. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5284\" rel=\"external nofollow noreferrer\">#5284</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a></li>\n<li>Disallow conversion from float Inf/NaN into Decimals (throw exception). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5282\" rel=\"external nofollow noreferrer\">#5282</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix data race in rename query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5247\" rel=\"external nofollow noreferrer\">#5247</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Temporarily disable LFAlloc. Usage of LFAlloc might lead to a lot of MAP_FAILED in allocating UncompressedCache and in a result to crashes of queries at high loaded servers. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/cfdba938ce22f16efeec504f7f90206a515b1280\" rel=\"external nofollow noreferrer\">cfdba93</a>(<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-6-2-11-2019-05-13\">ClickHouse release 19.6.2.11, 2019-05-13<a class=\"headerlink\" href=\"#clickhouse-release-19-6-2-11-2019-05-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_3\">New Features<a class=\"headerlink\" href=\"#new-features_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>TTL expressions for columns and tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4212\" rel=\"external nofollow noreferrer\">#4212</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Added support for <code>brotli</code> compression for HTTP responses (Accept-Encoding: br) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4388\" rel=\"external nofollow noreferrer\">#4388</a> (<a href=\"https://github.com/fandyushin\" rel=\"external nofollow noreferrer\">Mikhail</a>)</li>\n<li>Added new function <code>isValidUTF8</code> for checking whether a set of bytes is correctly utf-8 encoded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4934\" rel=\"external nofollow noreferrer\">#4934</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Add new load balancing policy <code>first_or_random</code> which sends queries to the first specified host and if it's inaccessible send queries to random hosts of shard. Useful for cross-replication topology setups. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5012\" rel=\"external nofollow noreferrer\">#5012</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n</ul>\n<h4 id=\"experimental-features_1\">Experimental Features<a class=\"headerlink\" href=\"#experimental-features_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add setting <code>index_granularity_bytes</code> (adaptive index granularity) for MergeTree* tables family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4826\" rel=\"external nofollow noreferrer\">#4826</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"improvements_1\">Improvements<a class=\"headerlink\" href=\"#improvements_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for non-constant and negative size and length arguments for function <code>substringUTF8</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4989\" rel=\"external nofollow noreferrer\">#4989</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Disable push-down to right table in left join, left table in right join, and both tables in full join. This fixes wrong JOIN results in some cases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4846\" rel=\"external nofollow noreferrer\">#4846</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li><code>clickhouse-copier</code>: auto upload task configuration from <code>--task-file</code> option <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4876\" rel=\"external nofollow noreferrer\">#4876</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added typos handler for storage factory and table functions factory. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4891\" rel=\"external nofollow noreferrer\">#4891</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Support asterisks and qualified asterisks for multiple joins without subqueries <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4898\" rel=\"external nofollow noreferrer\">#4898</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Make missing column error message more user friendly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4915\" rel=\"external nofollow noreferrer\">#4915</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_2\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Significant speedup of ASOF JOIN <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4924\" rel=\"external nofollow noreferrer\">#4924</a> (<a href=\"https://github.com/Gladdy\" rel=\"external nofollow noreferrer\">Martijn Bakker</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-changes\">Backward Incompatible Changes<a class=\"headerlink\" href=\"#backward-incompatible-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>HTTP header <code>Query-Id</code> was renamed to <code>X-ClickHouse-Query-Id</code> for consistency. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4972\" rel=\"external nofollow noreferrer\">#4972</a> (<a href=\"https://github.com/fandyushin\" rel=\"external nofollow noreferrer\">Mikhail</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_4\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed potential null pointer dereference in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4900\" rel=\"external nofollow noreferrer\">#4900</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed error on query with JOIN + ARRAY JOIN <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4938\" rel=\"external nofollow noreferrer\">#4938</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed");
            
            document.write(" hanging on start of the server when a dictionary depends on another dictionary via a database with engine=Dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4962\" rel=\"external nofollow noreferrer\">#4962</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Partially fix distributed_product_mode = local. It's possible to allow columns of local tables in where/having/order by/... via table aliases. Throw exception if table does not have alias. There's not possible to access to the columns without table aliases yet. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4986\" rel=\"external nofollow noreferrer\">#4986</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix potentially wrong result for <code>SELECT DISTINCT</code> with <code>JOIN</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5001\" rel=\"external nofollow noreferrer\">#5001</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5189\" rel=\"external nofollow noreferrer\">#5189</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_2\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed test failures when running clickhouse-server on different host <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4713\" rel=\"external nofollow noreferrer\">#4713</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>clickhouse-test: Disable color control sequences in non tty environment. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4937\" rel=\"external nofollow noreferrer\">#4937</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>clickhouse-test: Allow use any test database (remove <code>test.</code> qualification where it possible) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5008\" rel=\"external nofollow noreferrer\">#5008</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix ubsan errors <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5037\" rel=\"external nofollow noreferrer\">#5037</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Yandex LFAlloc was added to ClickHouse to allocate MarkCache and UncompressedCache data in different ways to catch segfaults more reliable <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4995\" rel=\"external nofollow noreferrer\">#4995</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Python util to help with backports and changelogs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4949\" rel=\"external nofollow noreferrer\">#4949</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-5-4-22-2019-05-13\">ClickHouse release 19.5.4.22, 2019-05-13<a class=\"headerlink\" href=\"#clickhouse-release-19-5-4-22-2019-05-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_5\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed possible crash in bitmap* functions <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5220\" rel=\"external nofollow noreferrer\">#5220</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5228\" rel=\"external nofollow noreferrer\">#5228</a> (<a href=\"https://github.com/andyyzh\" rel=\"external nofollow noreferrer\">Andy Yang</a>)</li>\n<li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5189\" rel=\"external nofollow noreferrer\">#5189</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error <code>Set for IN is not created yet in case of using single LowCardinality column in the left part of IN</code>. This error happened if LowCardinality column was the part of primary key. #5031 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5154\" rel=\"external nofollow noreferrer\">#5154</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Modification of retention function: If a row satisfies both the first and NTH condition, only the first satisfied condition is added to the data state. Now all conditions that satisfy in a row of data are added to the data state. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5119\" rel=\"external nofollow noreferrer\">#5119</a> (<a href=\"https://github.com/nicelulu\" rel=\"external nofollow noreferrer\">\u5c0f\u8def</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-5-3-8-2019-04-18\">ClickHouse release 19.5.3.8, 2019-04-18<a class=\"headerlink\" href=\"#clickhouse-release-19-5-3-8-2019-04-18\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_6\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed type of setting <code>max_partitions_per_insert_block</code> from boolean to UInt64. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5028\" rel=\"external nofollow noreferrer\">#5028</a> (<a href=\"https://github.com/mhsekhavat\" rel=\"external nofollow noreferrer\">Mohammad Hossein Sekhavat</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-5-2-6-2019-04-15\">ClickHouse release 19.5.2.6, 2019-04-15<a class=\"headerlink\" href=\"#clickhouse-release-19-5-2-6-2019-04-15\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_4\">New Features<a class=\"headerlink\" href=\"#new-features_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><a href=\"https://github.com/intel/hyperscan\" rel=\"external nofollow noreferrer\">Hyperscan</a> multiple regular expression matching was added (functions <code>multiMatchAny</code>, <code>multiMatchAnyIndex</code>, <code>multiFuzzyMatchAny</code>, <code>multiFuzzyMatchAnyIndex</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4780\" rel=\"external nofollow noreferrer\">#4780</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4841\" rel=\"external nofollow noreferrer\">#4841</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li><code>multiSearchFirstPosition</code> function was added. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4780\" rel=\"external nofollow noreferrer\">#4780</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Implement the predefined expression filter per row for tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4792\" rel=\"external nofollow noreferrer\">#4792</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>A new type of data skipping indices based on bloom filters (can be used for <code>equal</code>, <code>in</code> and <code>like</code> functions). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4499\" rel=\"external nofollow noreferrer\">#4499</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Added <code>ASOF JOIN</code> which allows to run queries that join to the most recent value known. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4774\" rel=\"external nofollow noreferrer\">#4774</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4867\" rel=\"external nofollow noreferrer\">#4867</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4863\" rel=\"external nofollow noreferrer\">#4863</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4875\" rel=\"external nofollow noreferrer\">#4875</a> (<a href=\"https://github.com/Gladdy\" rel=\"external nofollow noreferrer\">Martijn Bakker</a>, <a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Rewrite multiple <code>COMMA JOIN</code> to <code>CROSS JOIN</code>. Then rewrite them to <code>INNER JOIN</code> if possible. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4661\" rel=\"external nofollow noreferrer\">#4661</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"improvement_8\">Improvement<a class=\"headerlink\" href=\"#improvement_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>topK</code> and <code>topKWeighted</code> now supports custom <code>loadFactor</code> (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4252\" rel=\"external nofollow noreferrer\">#4252</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4634\" rel=\"external nofollow noreferrer\">#4634</a> (<a href=\"https://github.com/kirillDanshin\" rel=\"external nofollow noreferrer\">Kirill Danshin</a>)</li>\n<li>Allow to use <code>parallel_replicas_count &gt; 1</code> even for tables without sampling (the setting is simply ignored for them). In previous versions it was lead to exception. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4637\" rel=\"external nofollow noreferrer\">#4637</a> (<a href=\"https://github.com/digitalist\" rel=\"external nofollow noreferrer\">Alexey Elymanov</a>)</li>\n<li>Support for <code>CREATE OR REPLACE VIEW</code>. Allow to create a view or set a new definition in a single statement. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4654\" rel=\"external nofollow noreferrer\">#4654</a> (<a href=\"https://github.com/bgranvea\" rel=\"external nofollow noreferrer\">Boris Gr");
            
            document.write("anveaud</a>)</li>\n<li><code>Buffer</code> table engine now supports <code>PREWHERE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4671\" rel=\"external nofollow noreferrer\">#4671</a> (<a href=\"https://github.com/LiuYangkuan\" rel=\"external nofollow noreferrer\">Yangkuan Liu</a>)</li>\n<li>Add ability to start replicated table without metadata in zookeeper in <code>readonly</code> mode. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4691\" rel=\"external nofollow noreferrer\">#4691</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed flicker of progress bar in clickhouse-client. The issue was most noticeable when using <code>FORMAT Null</code> with streaming queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4811\" rel=\"external nofollow noreferrer\">#4811</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow to disable functions with <code>hyperscan</code> library on per user basis to limit potentially excessive and uncontrolled resource usage. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4816\" rel=\"external nofollow noreferrer\">#4816</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add version number logging in all errors. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4824\" rel=\"external nofollow noreferrer\">#4824</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added restriction to the <code>multiMatch</code> functions which requires string size to fit into <code>unsigned int</code>. Also added the number of arguments limit to the <code>multiSearch</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4834\" rel=\"external nofollow noreferrer\">#4834</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Improved usage of scratch space and error handling in Hyperscan. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4866\" rel=\"external nofollow noreferrer\">#4866</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fill <code>system.graphite_detentions</code> from a table config of <code>*GraphiteMergeTree</code> engine tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4584\" rel=\"external nofollow noreferrer\">#4584</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n<li>Rename <code>trigramDistance</code> function to <code>ngramDistance</code> and add more functions with <code>CaseInsensitive</code> and <code>UTF</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4602\" rel=\"external nofollow noreferrer\">#4602</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Improved data skipping indices calculation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4640\" rel=\"external nofollow noreferrer\">#4640</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Keep ordinary, <code>DEFAULT</code>, <code>MATERIALIZED</code> and <code>ALIAS</code> columns in a single list (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2867\" rel=\"external nofollow noreferrer\">#2867</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4707\" rel=\"external nofollow noreferrer\">#4707</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n</ul>\n<h4 id=\"bug-fix_24\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_24\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Avoid <code>std::terminate</code> in case of memory allocation failure. Now <code>std::bad_alloc</code> exception is thrown as expected. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4665\" rel=\"external nofollow noreferrer\">#4665</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixes capnproto reading from buffer. Sometimes files wasn't loaded successfully by HTTP. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4674\" rel=\"external nofollow noreferrer\">#4674</a> (<a href=\"https://github.com/smirnov-vs\" rel=\"external nofollow noreferrer\">Vladislav</a>)</li>\n<li>Fix error <code>Unknown log entry type: 0</code> after <code>OPTIMIZE TABLE FINAL</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4683\" rel=\"external nofollow noreferrer\">#4683</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Wrong arguments to <code>hasAny</code> or <code>hasAll</code> functions may lead to segfault. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4698\" rel=\"external nofollow noreferrer\">#4698</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Deadlock may happen while executing <code>DROP DATABASE dictionary</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4701\" rel=\"external nofollow noreferrer\">#4701</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix undefined behavior in <code>median</code> and <code>quantile</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4702\" rel=\"external nofollow noreferrer\">#4702</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Fix compression level detection when <code>network_compression_method</code> in lowercase. Broken in v19.1. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4706\" rel=\"external nofollow noreferrer\">#4706</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed ignorance of <code>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> setting (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4658\" rel=\"external nofollow noreferrer\">#4658</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4718\" rel=\"external nofollow noreferrer\">#4718</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix <code>histogram</code> function behaviour with <code>Distributed</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4741\" rel=\"external nofollow noreferrer\">#4741</a> (<a href=\"https://github.com/olegkv\" rel=\"external nofollow noreferrer\">olegkv</a>)</li>\n<li>Fixed tsan report <code>destroy of a locked mutex</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4742\" rel=\"external nofollow noreferrer\">#4742</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed TSan report on shutdown due to race condition in system logs usage. Fixed potential use-after-free on shutdown when part_log is enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4758\" rel=\"external nofollow noreferrer\">#4758</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix recheck parts in <code>ReplicatedMergeTreeAlterThread</code> in case of error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4772\" rel=\"external nofollow noreferrer\">#4772</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Arithmetic operations on intermediate aggregate function states were not working for constant arguments (such as subquery results). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4776\" rel=\"external nofollow noreferrer\">#4776</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Always backquote column names in metadata. Otherwise it's impossible to create a table with column named <code>index</code> (server won't restart due to malformed <code>ATTACH</code> query in metadata). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4782\" rel=\"external nofollow noreferrer\">#4782</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix crash in <code>ALTER ... MODIFY ORDER BY</code> on <code>Distributed</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4790\" rel=\"external nofollow noreferrer\">#4790</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>)</li>\n<li>Fix segfault in <code>JOIN ON</code> with enabled <code>enable_optimize_predicate_expression</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4794\" rel=\"external nofollow noreferrer\">#4794</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fix bug with adding an extraneous row after consuming a protobuf message from Kafka. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4808\" rel=\"external nofollow noreferrer\">#4808</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix crash of <code>JOIN</code> on not-nullable vs nullable column. Fix <code>NULLs</code> in right keys in <code>ANY JOIN</code> + <code>join_use_nulls</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4815\" rel=\"external nofollow noreferrer\">#4815</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4835\" rel=\"external nofollow noreferrer\">#4835</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed race condition in <code>SELECT</code> from <code>system.tables</code> if the table is renamed or altered concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4836\" rel=\"external nofollow noreferrer\">#4836</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed data race when fetching data part that is already obsolete. ");
            
            document.write("<a href=\"https://github.com/ClickHouse/ClickHouse/pull/4839\" rel=\"external nofollow noreferrer\">#4839</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed rare data race that can happen during <code>RENAME</code> table of MergeTree family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4844\" rel=\"external nofollow noreferrer\">#4844</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed segmentation fault in function <code>arrayIntersect</code>. Segmentation fault could happen if function was called with mixed constant and ordinary arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4847\" rel=\"external nofollow noreferrer\">#4847</a> (<a href=\"https://github.com/fancyqlx\" rel=\"external nofollow noreferrer\">Lixiang Qian</a>)</li>\n<li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4850\" rel=\"external nofollow noreferrer\">#4850</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4855\" rel=\"external nofollow noreferrer\">#4855</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix <code>No message received</code> exception while fetching parts between replicas. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4856\" rel=\"external nofollow noreferrer\">#4856</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>arrayIntersect</code> function wrong result in case of several repeated values in single array. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4871\" rel=\"external nofollow noreferrer\">#4871</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix a race condition during concurrent <code>ALTER COLUMN</code> queries that could lead to a server crash (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3421\" rel=\"external nofollow noreferrer\">#3421</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4592\" rel=\"external nofollow noreferrer\">#4592</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix incorrect result in <code>FULL/RIGHT JOIN</code> with const column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4723\" rel=\"external nofollow noreferrer\">#4723</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix duplicates in <code>GLOBAL JOIN</code> with asterisk. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4705\" rel=\"external nofollow noreferrer\">#4705</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix parameter deduction in <code>ALTER MODIFY</code> of column <code>CODEC</code> when column type is not specified. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4883\" rel=\"external nofollow noreferrer\">#4883</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Functions <code>cutQueryStringAndFragment()</code> and <code>queryStringAndFragment()</code> now works correctly when <code>URL</code> contains a fragment and no query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4894\" rel=\"external nofollow noreferrer\">#4894</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix rare bug when setting <code>min_bytes_to_use_direct_io</code> is greater than zero, which occures when thread have to seek backward in column file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4897\" rel=\"external nofollow noreferrer\">#4897</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix wrong argument types for aggregate functions with <code>LowCardinality</code> arguments (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4919\" rel=\"external nofollow noreferrer\">#4919</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4922\" rel=\"external nofollow noreferrer\">#4922</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix wrong name qualification in <code>GLOBAL JOIN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4969\" rel=\"external nofollow noreferrer\">#4969</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix function <code>toISOWeek</code> result for year 1970. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4988\" rel=\"external nofollow noreferrer\">#4988</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix <code>DROP</code>, <code>TRUNCATE</code> and <code>OPTIMIZE</code> queries duplication, when executed on <code>ON CLUSTER</code> for <code>ReplicatedMergeTree*</code> tables family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4991\" rel=\"external nofollow noreferrer\">#4991</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_7\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Rename setting <code>insert_sample_with_metadata</code> to setting <code>input_format_defaults_for_omitted_fields</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4771\" rel=\"external nofollow noreferrer\">#4771</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Added setting <code>max_partitions_per_insert_block</code> (with value 100 by default). If inserted block contains larger number of partitions, an exception is thrown. Set it to 0 if you want to remove the limit (not recommended). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4845\" rel=\"external nofollow noreferrer\">#4845</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Multi-search functions were renamed (<code>multiPosition</code> to <code>multiSearchAllPositions</code>, <code>multiSearch</code> to <code>multiSearchAny</code>, <code>firstMatch</code> to <code>multiSearchFirstIndex</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4780\" rel=\"external nofollow noreferrer\">#4780</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n</ul>\n<h4 id=\"performance-improvement_5\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Optimize Volnitsky searcher by inlining, giving about 5-10% search improvement for queries with many needles or many similar bigrams. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4862\" rel=\"external nofollow noreferrer\">#4862</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fix performance issue when setting <code>use_uncompressed_cache</code> is greater than zero, which appeared when all read data contained in cache. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4913\" rel=\"external nofollow noreferrer\">#4913</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_9\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Hardening debug build: more granular memory mappings and ASLR; add memory protection for mark cache and index. This allows to find more memory stomping bugs in case when ASan and MSan cannot do it. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4632\" rel=\"external nofollow noreferrer\">#4632</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add support for cmake variables <code>ENABLE_PROTOBUF</code>, <code>ENABLE_PARQUET</code> and <code>ENABLE_BROTLI</code> which allows to enable/disable the above features (same as we can do for librdkafka, mysql, etc). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4669\" rel=\"external nofollow noreferrer\">#4669</a> (<a href=\"https://github.com/silviucpp\" rel=\"external nofollow noreferrer\">Silviu Caragea</a>)</li>\n<li>Add ability to print process list and stacktraces of all threads if some queries are hung after test run. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4675\" rel=\"external nofollow noreferrer\">#4675</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add retries on <code>Connection loss</code> error in <code>clickhouse-test</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4682\" rel=\"external nofollow noreferrer\">#4682</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add freebsd build with vagrant and build with thread sanitizer to packager script. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4712\" rel=\"external nofollow noreferrer\">#4712</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4748\" rel=\"external nofollow noreferrer\">#4748</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Now user asked for password for user <code>'default'</code> during installation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4725\" rel=\"external nofollow noreferrer\">#4725</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Suppress warning in <code>rdkafka</code> library. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4740\" rel=\"external n");
            
            document.write("ofollow noreferrer\">#4740</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow ability to build without ssl. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4750\" rel=\"external nofollow noreferrer\">#4750</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Add a way to launch clickhouse-server image from a custom user. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4753\" rel=\"external nofollow noreferrer\">#4753</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n<li>Upgrade contrib boost to 1.69. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4793\" rel=\"external nofollow noreferrer\">#4793</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Disable usage of <code>mremap</code> when compiled with Thread Sanitizer. Surprisingly enough, TSan does not intercept <code>mremap</code> (though it does intercept <code>mmap</code>, <code>munmap</code>) that leads to false positives. Fixed TSan report in stateful tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4859\" rel=\"external nofollow noreferrer\">#4859</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add test checking using format schema via HTTP interface. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4864\" rel=\"external nofollow noreferrer\">#4864</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-4-33-2019-04-17\">ClickHouse release 19.4.4.33, 2019-04-17<a class=\"headerlink\" href=\"#clickhouse-release-19-4-4-33-2019-04-17\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_7\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Avoid <code>std::terminate</code> in case of memory allocation failure. Now <code>std::bad_alloc</code> exception is thrown as expected. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4665\" rel=\"external nofollow noreferrer\">#4665</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixes capnproto reading from buffer. Sometimes files wasn't loaded successfully by HTTP. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4674\" rel=\"external nofollow noreferrer\">#4674</a> (<a href=\"https://github.com/smirnov-vs\" rel=\"external nofollow noreferrer\">Vladislav</a>)</li>\n<li>Fix error <code>Unknown log entry type: 0</code> after <code>OPTIMIZE TABLE FINAL</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4683\" rel=\"external nofollow noreferrer\">#4683</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Wrong arguments to <code>hasAny</code> or <code>hasAll</code> functions may lead to segfault. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4698\" rel=\"external nofollow noreferrer\">#4698</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Deadlock may happen while executing <code>DROP DATABASE dictionary</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4701\" rel=\"external nofollow noreferrer\">#4701</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix undefined behavior in <code>median</code> and <code>quantile</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4702\" rel=\"external nofollow noreferrer\">#4702</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Fix compression level detection when <code>network_compression_method</code> in lowercase. Broken in v19.1. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4706\" rel=\"external nofollow noreferrer\">#4706</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed ignorance of <code>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> setting (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4658\" rel=\"external nofollow noreferrer\">#4658</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4718\" rel=\"external nofollow noreferrer\">#4718</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix <code>histogram</code> function behaviour with <code>Distributed</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4741\" rel=\"external nofollow noreferrer\">#4741</a> (<a href=\"https://github.com/olegkv\" rel=\"external nofollow noreferrer\">olegkv</a>)</li>\n<li>Fixed tsan report <code>destroy of a locked mutex</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4742\" rel=\"external nofollow noreferrer\">#4742</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed TSan report on shutdown due to race condition in system logs usage. Fixed potential use-after-free on shutdown when part_log is enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4758\" rel=\"external nofollow noreferrer\">#4758</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix recheck parts in <code>ReplicatedMergeTreeAlterThread</code> in case of error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4772\" rel=\"external nofollow noreferrer\">#4772</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Arithmetic operations on intermediate aggregate function states were not working for constant arguments (such as subquery results). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4776\" rel=\"external nofollow noreferrer\">#4776</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Always backquote column names in metadata. Otherwise it's impossible to create a table with column named <code>index</code> (server won't restart due to malformed <code>ATTACH</code> query in metadata). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4782\" rel=\"external nofollow noreferrer\">#4782</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix crash in <code>ALTER ... MODIFY ORDER BY</code> on <code>Distributed</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4790\" rel=\"external nofollow noreferrer\">#4790</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>)</li>\n<li>Fix segfault in <code>JOIN ON</code> with enabled <code>enable_optimize_predicate_expression</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4794\" rel=\"external nofollow noreferrer\">#4794</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fix bug with adding an extraneous row after consuming a protobuf message from Kafka. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4808\" rel=\"external nofollow noreferrer\">#4808</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4835\" rel=\"external nofollow noreferrer\">#4835</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed race condition in <code>SELECT</code> from <code>system.tables</code> if the table is renamed or altered concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4836\" rel=\"external nofollow noreferrer\">#4836</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed data race when fetching data part that is already obsolete. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4839\" rel=\"external nofollow noreferrer\">#4839</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed rare data race that can happen during <code>RENAME</code> table of MergeTree family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4844\" rel=\"external nofollow noreferrer\">#4844</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed segmentation fault in function <code>arrayIntersect</code>. Segmentation fault could happen if function was called with mixed constant and ordinary arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4847\" rel=\"external nofollow noreferrer\">#4847</a> (<a href=\"https://github.com/fancyqlx\" rel=\"external nofollow noreferrer\">Lixiang Qian</a>)</li>\n<li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4850\" rel=\"external nofollow noreferrer\">#4850</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix <code>No message received</code> exception while fetching parts between replicas. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4856\" rel=\"external nofollow noreferrer\">#4856</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>arrayIntersect</code> function wrong result in case of several repeated values in single array. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4871\" rel=\"external nofollow noreferrer\">#4871</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix a race condition during concurrent <code>ALTER COLUMN</code> queries that could lead to a server crash (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3421\" rel=\"external nofollow noreferrer\">#3421</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4592\" rel=\"ext");
            
            document.write("ernal nofollow noreferrer\">#4592</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix parameter deduction in <code>ALTER MODIFY</code> of column <code>CODEC</code> when column type is not specified. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4883\" rel=\"external nofollow noreferrer\">#4883</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Functions <code>cutQueryStringAndFragment()</code> and <code>queryStringAndFragment()</code> now works correctly when <code>URL</code> contains a fragment and no query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4894\" rel=\"external nofollow noreferrer\">#4894</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix rare bug when setting <code>min_bytes_to_use_direct_io</code> is greater than zero, which occures when thread have to seek backward in column file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4897\" rel=\"external nofollow noreferrer\">#4897</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix wrong argument types for aggregate functions with <code>LowCardinality</code> arguments (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4919\" rel=\"external nofollow noreferrer\">#4919</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4922\" rel=\"external nofollow noreferrer\">#4922</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix function <code>toISOWeek</code> result for year 1970. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4988\" rel=\"external nofollow noreferrer\">#4988</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix <code>DROP</code>, <code>TRUNCATE</code> and <code>OPTIMIZE</code> queries duplication, when executed on <code>ON CLUSTER</code> for <code>ReplicatedMergeTree*</code> tables family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4991\" rel=\"external nofollow noreferrer\">#4991</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"improvements_2\">Improvements<a class=\"headerlink\" href=\"#improvements_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Keep ordinary, <code>DEFAULT</code>, <code>MATERIALIZED</code> and <code>ALIAS</code> columns in a single list (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2867\" rel=\"external nofollow noreferrer\">#2867</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4707\" rel=\"external nofollow noreferrer\">#4707</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-3-11-2019-04-02\">ClickHouse release 19.4.3.11, 2019-04-02<a class=\"headerlink\" href=\"#clickhouse-release-19-4-3-11-2019-04-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_8\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4855\" rel=\"external nofollow noreferrer\">#4855</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4835\" rel=\"external nofollow noreferrer\">#4835</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_10\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a way to launch clickhouse-server image from a custom user. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4753\" rel=\"external nofollow noreferrer\">#4753</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-2-7-2019-03-30\">ClickHouse release 19.4.2.7, 2019-03-30<a class=\"headerlink\" href=\"#clickhouse-release-19-4-2-7-2019-03-30\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_9\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4850\" rel=\"external nofollow noreferrer\">#4850</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-1-3-2019-03-19\">ClickHouse release 19.4.1.3, 2019-03-19<a class=\"headerlink\" href=\"#clickhouse-release-19-4-1-3-2019-03-19\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_10\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed remote queries which contain both <code>LIMIT BY</code> and <code>LIMIT</code>. Previously, if <code>LIMIT BY</code> and <code>LIMIT</code> were used for remote query, <code>LIMIT</code> could happen before <code>LIMIT BY</code>, which led to too filtered result. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4708\" rel=\"external nofollow noreferrer\">#4708</a> (<a href=\"https://github.com/kvap\" rel=\"external nofollow noreferrer\">Constantin S. Pan</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-0-49-2019-03-09\">ClickHouse release 19.4.0.49, 2019-03-09<a class=\"headerlink\" href=\"#clickhouse-release-19-4-0-49-2019-03-09\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_5\">New Features<a class=\"headerlink\" href=\"#new-features_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added full support for <code>Protobuf</code> format (input and output, nested data structures). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4174\" rel=\"external nofollow noreferrer\">#4174</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4493\" rel=\"external nofollow noreferrer\">#4493</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Added bitmap functions with Roaring Bitmaps. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4207\" rel=\"external nofollow noreferrer\">#4207</a> (<a href=\"https://github.com/andyyzh\" rel=\"external nofollow noreferrer\">Andy Yang</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4568\" rel=\"external nofollow noreferrer\">#4568</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Parquet format support. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4448\" rel=\"external nofollow noreferrer\">#4448</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>N-gram distance was added for fuzzy string comparison. It is similar to q-gram metrics in R language. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4466\" rel=\"external nofollow noreferrer\">#4466</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Combine rules for graphite rollup from dedicated aggregation and retention patterns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4426\" rel=\"external nofollow noreferrer\">#4426</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n<li>Added <code>max_execution_speed</code> and <code>max_execution_speed_bytes</code> to limit resource usage. Added <code>min_execution_speed_bytes</code> setting to complement the <code>min_execution_speed</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4430\" rel=\"external nofollow noreferrer\">#4430</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Implemented function <code>flatten</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4555\" rel=\"external nofollow noreferrer\">#4555</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4409\" rel=\"external nofollow noreferrer\">#4409</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>, <a href=\"https://github.com/kzon\" rel=\"external nofollow noreferrer\">kzon</a>)</li>\n<li>Added functions <code>arrayEnumerateDenseRanked</code> and <code>arrayEnumerateUniqRanked</code> (it's like <code>arrayEnumerateUniq</code> but allows to fine tune array depth to look inside multidimensional arrays). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4475\" rel=\"external nofollow noreferrer\">#4475</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4601\" rel=\"external nofollow noreferrer\">#4601</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Multiple JOINS with some restrictions: no asterisks, no complex aliases in ON/WHERE/GROUP BY/... <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4462\" rel=\"external nofollow noreferrer\">#4462</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_11\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug fixes from 19.3 and 19.1.</li>\n<li>Fixed bug in data skipping indices: order of granules after INSERT was incorrect. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4407\" rel=\"external nofollow noreferrer\">#4407</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Fixed <code>set</code> index for <code>Nullable</code> and <code>LowCardinality</code> columns. Before it, <code>set</code> index with <code>Nullable</code> or <code>LowCardinality</code> column led to error <code>Data type must be deserialized with multiple str");
            
            document.write("eams</code> while selecting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4594\" rel=\"external nofollow noreferrer\">#4594</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Correctly set update_time on full <code>executable</code> dictionary update. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4551\" rel=\"external nofollow noreferrer\">#4551</a> (<a href=\"https://github.com/temoon\" rel=\"external nofollow noreferrer\">Tema Novikov</a>)</li>\n<li>Fix broken progress bar in 19.3. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4627\" rel=\"external nofollow noreferrer\">#4627</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Fixed inconsistent values of MemoryTracker when memory region was shrinked, in certain cases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4619\" rel=\"external nofollow noreferrer\">#4619</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed undefined behaviour in ThreadPool. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4612\" rel=\"external nofollow noreferrer\">#4612</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a very rare crash with the message <code>mutex lock failed: Invalid argument</code> that could happen when a MergeTree table was dropped concurrently with a SELECT. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4608\" rel=\"external nofollow noreferrer\">#4608</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>ODBC driver compatibility with <code>LowCardinality</code> data type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4381\" rel=\"external nofollow noreferrer\">#4381</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>FreeBSD: Fixup for <code>AIOcontextPool: Found io_event with unknown id 0</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4438\" rel=\"external nofollow noreferrer\">#4438</a> (<a href=\"https://github.com/urgordeadbeef\" rel=\"external nofollow noreferrer\">urgordeadbeef</a>)</li>\n<li><code>system.part_log</code> table was created regardless to configuration. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4483\" rel=\"external nofollow noreferrer\">#4483</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix undefined behaviour in <code>dictIsIn</code> function for cache dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4515\" rel=\"external nofollow noreferrer\">#4515</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed a deadlock when a SELECT query locks the same table multiple times (e.g. from different threads or when executing multiple subqueries) and there is a concurrent DDL query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4535\" rel=\"external nofollow noreferrer\">#4535</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Disable compile_expressions by default until we get own <code>llvm</code> contrib and can test it with <code>clang</code> and <code>asan</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4579\" rel=\"external nofollow noreferrer\">#4579</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Prevent <code>std::terminate</code> when <code>invalidate_query</code> for <code>clickhouse</code> external dictionary source has returned wrong resultset (empty or more than one row or more than one column). Fixed issue when the <code>invalidate_query</code> was performed every five seconds regardless to the <code>lifetime</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4583\" rel=\"external nofollow noreferrer\">#4583</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid deadlock when the <code>invalidate_query</code> for a dictionary with <code>clickhouse</code> source was involving <code>system.dictionaries</code> table or <code>Dictionaries</code> database (rare case). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4599\" rel=\"external nofollow noreferrer\">#4599</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixes for CROSS JOIN with empty WHERE. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4598\" rel=\"external nofollow noreferrer\">#4598</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed segfault in function \"replicate\" when constant argument is passed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4603\" rel=\"external nofollow noreferrer\">#4603</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix lambda function with predicate optimizer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4408\" rel=\"external nofollow noreferrer\">#4408</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Multiple JOINs multiple fixes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4595\" rel=\"external nofollow noreferrer\">#4595</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"improvements_3\">Improvements<a class=\"headerlink\" href=\"#improvements_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Support aliases in JOIN ON section for right table columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4412\" rel=\"external nofollow noreferrer\">#4412</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Result of multiple JOINs need correct result names to be used in subselects. Replace flat aliases with source names in result. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4474\" rel=\"external nofollow noreferrer\">#4474</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Improve push-down logic for joined statements. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4387\" rel=\"external nofollow noreferrer\">#4387</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_3\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improved heuristics of \"move to PREWHERE\" optimization. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4405\" rel=\"external nofollow noreferrer\">#4405</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Use proper lookup tables that uses HashTable's API for 8-bit and 16-bit keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4536\" rel=\"external nofollow noreferrer\">#4536</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Improved performance of string comparison. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4564\" rel=\"external nofollow noreferrer\">#4564</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Cleanup distributed DDL queue in a separate thread so that it doesn't slow down the main loop that processes distributed DDL tasks. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4502\" rel=\"external nofollow noreferrer\">#4502</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>When <code>min_bytes_to_use_direct_io</code> is set to 1, not every file was opened with O_DIRECT mode because the data size to read was sometimes underestimated by the size of one compressed block. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4526\" rel=\"external nofollow noreferrer\">#4526</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_11\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for clang-9 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4604\" rel=\"external nofollow noreferrer\">#4604</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix wrong <code>__asm__</code> instructions (again) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4621\" rel=\"external nofollow noreferrer\">#4621</a> (<a href=\"https://github.com/podshumok\" rel=\"external nofollow noreferrer\">Konstantin Podshumok</a>)</li>\n<li>Add ability to specify settings for <code>clickhouse-performance-test</code> from command line. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4437\" rel=\"external nofollow noreferrer\">#4437</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add dictionaries tests to integration tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4477\" rel=\"external nofollow noreferrer\">#4477</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added queries from the benchmark on the website to automated performance tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4496\" rel=\"external nofollow noreferrer\">#4496</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>xxhash.h</code> does not exist in external lz4 because it is an implementation detail and its symbols are namespaced with <code>XXH_NAMESPACE</code> macro.  When lz4 is external, xxHash has to be external too, and the dependents have to link to it. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4495\" rel=\"external nofollow noreferrer\">");
            
            document.write("#4495</a> (<a href=\"https://github.com/orivej\" rel=\"external nofollow noreferrer\">Orivej Desh</a>)</li>\n<li>Fixed a case when <code>quantileTiming</code> aggregate function can be called with negative or floating point argument (this fixes fuzz test with undefined behaviour sanitizer). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4506\" rel=\"external nofollow noreferrer\">#4506</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Spelling error correction. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4531\" rel=\"external nofollow noreferrer\">#4531</a> (<a href=\"https://github.com/sdk2\" rel=\"external nofollow noreferrer\">sdk2</a>)</li>\n<li>Fix compilation on Mac. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4371\" rel=\"external nofollow noreferrer\">#4371</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Build fixes for FreeBSD and various unusual build configurations. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4444\" rel=\"external nofollow noreferrer\">#4444</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-9-1-2019-04-02\">ClickHouse release 19.3.9.1, 2019-04-02<a class=\"headerlink\" href=\"#clickhouse-release-19-3-9-1-2019-04-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_12\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4855\" rel=\"external nofollow noreferrer\">#4855</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4835\" rel=\"external nofollow noreferrer\">#4835</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4850\" rel=\"external nofollow noreferrer\">#4850</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_12\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a way to launch clickhouse-server image from a custom user <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4753\" rel=\"external nofollow noreferrer\">#4753</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-7-2019-03-12\">ClickHouse release 19.3.7, 2019-03-12<a class=\"headerlink\" href=\"#clickhouse-release-19-3-7-2019-03-12\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_13\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed error in #3920. This error manifestate itself as random cache corruption (messages <code>Unknown codec family code</code>, <code>Cannot seek through file</code>) and segfaults. This bug first appeared in version 19.1 and is present in versions up to 19.1.10 and 19.3.6. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4623\" rel=\"external nofollow noreferrer\">#4623</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-6-2019-03-02\">ClickHouse release 19.3.6, 2019-03-02<a class=\"headerlink\" href=\"#clickhouse-release-19-3-6-2019-03-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_14\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>When there are more than 1000 threads in a thread pool, <code>std::terminate</code> may happen on thread exit. <a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4485\" rel=\"external nofollow noreferrer\">#4485</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4505\" rel=\"external nofollow noreferrer\">#4505</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Now it's possible to create <code>ReplicatedMergeTree*</code> tables with comments on columns without defaults and tables with columns codecs without comments and defaults. Also fix comparison of codecs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4523\" rel=\"external nofollow noreferrer\">#4523</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed crash on JOIN with array or tuple. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4552\" rel=\"external nofollow noreferrer\">#4552</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed crash in clickhouse-copier with the message <code>ThreadStatus not created</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4540\" rel=\"external nofollow noreferrer\">#4540</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed hangup on server shutdown if distributed DDLs were used. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4472\" rel=\"external nofollow noreferrer\">#4472</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Incorrect column numbers were printed in error message about text format parsing for columns with number greater than 10. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4484\" rel=\"external nofollow noreferrer\">#4484</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_3\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed build with AVX enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4527\" rel=\"external nofollow noreferrer\">#4527</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Enable extended accounting and IO accounting based on good known version instead of kernel under which it is compiled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4541\" rel=\"external nofollow noreferrer\">#4541</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Allow to skip setting of core_dump.size_limit, warning instead of throw if limit set fail. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4473\" rel=\"external nofollow noreferrer\">#4473</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Removed the <code>inline</code> tags of <code>void readBinary(...)</code> in <code>Field.cpp</code>. Also merged redundant <code>namespace DB</code> blocks. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4530\" rel=\"external nofollow noreferrer\">#4530</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-5-2019-02-21\">ClickHouse release 19.3.5, 2019-02-21<a class=\"headerlink\" href=\"#clickhouse-release-19-3-5-2019-02-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_15\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed bug with large http insert queries processing. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4454\" rel=\"external nofollow noreferrer\">#4454</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed backward incompatibility with old versions due to wrong implementation of <code>send_logs_level</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4445\" rel=\"external nofollow noreferrer\">#4445</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed backward incompatibility of table function <code>remote</code> introduced with column comments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4446\" rel=\"external nofollow noreferrer\">#4446</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-4-2019-02-16\">ClickHouse release 19.3.4, 2019-02-16<a class=\"headerlink\" href=\"#clickhouse-release-19-3-4-2019-02-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"improvements_4\">Improvements<a class=\"headerlink\" href=\"#improvements_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Table index size is not accounted for memory limits when doing <code>ATTACH TABLE</code> query. Avoided the possibility that a table cannot be attached after being detached. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4396\" rel=\"external nofollow noreferrer\">#4396</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Slightly raised up the limit on max string and array size received from ZooKeeper. It allows to continue to work with increased size of <code>CLIENT_JVMFLAGS=-Djute.maxbuffer=...</code> on ZooKeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4398\" rel=\"external nofollow noreferrer\">#4398</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow to repair abandoned replica even if it already has huge number of nodes in its queue. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4399\" rel=\"external nofollow noreferrer\">#4399</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add one required a");
            
            document.write("rgument to <code>SET</code> index (max stored rows number). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4386\" rel=\"external nofollow noreferrer\">#4386</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_16\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed <code>WITH ROLLUP</code> result for group by single <code>LowCardinality</code> key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4384\" rel=\"external nofollow noreferrer\">#4384</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed bug in the set index (dropping a granule if it contains more than <code>max_rows</code> rows). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4386\" rel=\"external nofollow noreferrer\">#4386</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>A lot of FreeBSD build fixes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4397\" rel=\"external nofollow noreferrer\">#4397</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed aliases substitution in queries with subquery containing same alias (issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4110\" rel=\"external nofollow noreferrer\">#4110</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4351\" rel=\"external nofollow noreferrer\">#4351</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_4\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add ability to run <code>clickhouse-server</code> for stateless tests in docker image. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4347\" rel=\"external nofollow noreferrer\">#4347</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-3-2019-02-13\">ClickHouse release 19.3.3, 2019-02-13<a class=\"headerlink\" href=\"#clickhouse-release-19-3-3-2019-02-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_6\">New Features<a class=\"headerlink\" href=\"#new-features_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>KILL MUTATION</code> statement that allows removing mutations that are for some reasons stuck. Added <code>latest_failed_part</code>, <code>latest_fail_time</code>, <code>latest_fail_reason</code> fields to the <code>system.mutations</code> table for easier troubleshooting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4287\" rel=\"external nofollow noreferrer\">#4287</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Added aggregate function <code>entropy</code> which computes Shannon entropy. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4238\" rel=\"external nofollow noreferrer\">#4238</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Added ability to send queries <code>INSERT INTO tbl VALUES (....</code> to server without splitting on <code>query</code> and <code>data</code> parts. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4301\" rel=\"external nofollow noreferrer\">#4301</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Generic implementation of <code>arrayWithConstant</code> function was added. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4322\" rel=\"external nofollow noreferrer\">#4322</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Implemented <code>NOT BETWEEN</code> comparison operator. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4228\" rel=\"external nofollow noreferrer\">#4228</a> (<a href=\"https://github.com/nezed\" rel=\"external nofollow noreferrer\">Dmitry Naumov</a>)</li>\n<li>Implement <code>sumMapFiltered</code> in order to be able to limit the number of keys for which values will be summed by <code>sumMap</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4129\" rel=\"external nofollow noreferrer\">#4129</a> (<a href=\"https://github.com/ercolanelli-leo\" rel=\"external nofollow noreferrer\">L\u00e9o Ercolanelli</a>)</li>\n<li>Added support of <code>Nullable</code> types in <code>mysql</code> table function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4198\" rel=\"external nofollow noreferrer\">#4198</a> (<a href=\"https://github.com/edonin\" rel=\"external nofollow noreferrer\">Emmanuel Donin de Rosi\u00e8re</a>)</li>\n<li>Support for arbitrary constant expressions in <code>LIMIT</code> clause. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4246\" rel=\"external nofollow noreferrer\">#4246</a> (<a href=\"https://github.com/k3box\" rel=\"external nofollow noreferrer\">k3box</a>)</li>\n<li>Added <code>topKWeighted</code> aggregate function that takes additional argument with (unsigned integer) weight. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4245\" rel=\"external nofollow noreferrer\">#4245</a> (<a href=\"https://github.com/andrewgolman\" rel=\"external nofollow noreferrer\">Andrew Golman</a>)</li>\n<li><code>StorageJoin</code> now supports <code>join_any_take_last_row</code> setting that allows overwriting existing values of the same key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3973\" rel=\"external nofollow noreferrer\">#3973</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added function <code>toStartOfInterval</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4304\" rel=\"external nofollow noreferrer\">#4304</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Added <code>RowBinaryWithNamesAndTypes</code> format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4200\" rel=\"external nofollow noreferrer\">#4200</a> (<a href=\"https://github.com/DarkWanderer\" rel=\"external nofollow noreferrer\">Oleg V. Kozlyuk</a>)</li>\n<li>Added <code>IPv4</code> and <code>IPv6</code> data types. More effective implementations of <code>IPv*</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3669\" rel=\"external nofollow noreferrer\">#3669</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Added function <code>toStartOfTenMinutes()</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4298\" rel=\"external nofollow noreferrer\">#4298</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Added <code>Protobuf</code> output format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4005\" rel=\"external nofollow noreferrer\">#4005</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4158\" rel=\"external nofollow noreferrer\">#4158</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Added brotli support for HTTP interface for data import (INSERTs). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4235\" rel=\"external nofollow noreferrer\">#4235</a> (<a href=\"https://github.com/fandyushin\" rel=\"external nofollow noreferrer\">Mikhail </a>)</li>\n<li>Added hints while user make typo in function name or type in command line client. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4239\" rel=\"external nofollow noreferrer\">#4239</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Added <code>Query-Id</code> to Server's HTTP Response header. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4231\" rel=\"external nofollow noreferrer\">#4231</a> (<a href=\"https://github.com/fandyushin\" rel=\"external nofollow noreferrer\">Mikhail </a>)</li>\n</ul>\n<h4 id=\"experimental-features_2\">Experimental features<a class=\"headerlink\" href=\"#experimental-features_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added <code>minmax</code> and <code>set</code> data skipping indices for MergeTree table engines family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4143\" rel=\"external nofollow noreferrer\">#4143</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Added conversion of <code>CROSS JOIN</code> to <code>INNER JOIN</code> if possible. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4221\" rel=\"external nofollow noreferrer\">#4221</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4266\" rel=\"external nofollow noreferrer\">#4266</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_17\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed <code>Not found column</code> for duplicate columns in <code>JOIN ON</code> section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4279\" rel=\"external nofollow noreferrer\">#4279</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Make <code>START REPLICATED SENDS</code> command start replicated sends. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4229\" rel=\"external nofollow noreferrer\">#4229</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Fixed aggregate functions execution with <code>Array(LowCardinality)</code> arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4055\" rel=\"external nofollow noreferrer\">#4055</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fixed wrong behaviour when doing <code>INSERT ... SELECT ... FROM file(...)</code> query and file has <code>CSVWithNames</code> or <code>TSVWIthNames</code> format and the first data row is missing. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4297\" rel=\"external nofollow noreferrer\">#4297</a> (<a href=\"https://github.co");
            
            document.write("m/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed crash on dictionary reload if dictionary not available. This bug was appeared in 19.1.6. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4188\" rel=\"external nofollow noreferrer\">#4188</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed <code>ALL JOIN</code> with duplicates in right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4184\" rel=\"external nofollow noreferrer\">#4184</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed segmentation fault with <code>use_uncompressed_cache=1</code> and exception with wrong uncompressed size. This bug was appeared in 19.1.6. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4186\" rel=\"external nofollow noreferrer\">#4186</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>compile_expressions</code> bug with comparison of big (more than int16) dates. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4341\" rel=\"external nofollow noreferrer\">#4341</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed infinite loop when selecting from table function <code>numbers(0)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4280\" rel=\"external nofollow noreferrer\">#4280</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Temporarily disable predicate optimization for <code>ORDER BY</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3890\" rel=\"external nofollow noreferrer\">#3890</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed <code>Illegal instruction</code> error when using base64 functions on old CPUs. This error has been reproduced only when ClickHouse was compiled with gcc-8. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4275\" rel=\"external nofollow noreferrer\">#4275</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed <code>No message received</code> error when interacting with PostgreSQL ODBC Driver through TLS connection. Also fixes segfault when using MySQL ODBC Driver. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4170\" rel=\"external nofollow noreferrer\">#4170</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed incorrect result when <code>Date</code> and <code>DateTime</code> arguments are used in branches of conditional operator (function <code>if</code>). Added generic case for function <code>if</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4243\" rel=\"external nofollow noreferrer\">#4243</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>ClickHouse dictionaries now load within <code>clickhouse</code> process. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4166\" rel=\"external nofollow noreferrer\">#4166</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed deadlock when <code>SELECT</code> from a table with <code>File</code> engine was retried after <code>No such file or directory</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4161\" rel=\"external nofollow noreferrer\">#4161</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed race condition when selecting from <code>system.tables</code> may give <code>table doesn't exist</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4313\" rel=\"external nofollow noreferrer\">#4313</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>clickhouse-client</code> can segfault on exit while loading data for command line suggestions if it was run in interactive mode. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4317\" rel=\"external nofollow noreferrer\">#4317</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a bug when the execution of mutations containing <code>IN</code> operators was producing incorrect results. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4099\" rel=\"external nofollow noreferrer\">#4099</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fixed error: if there is a database with <code>Dictionary</code> engine, all dictionaries forced to load at server startup, and if there is a dictionary with ClickHouse source from localhost, the dictionary cannot load. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4255\" rel=\"external nofollow noreferrer\">#4255</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error when system logs are tried to create again at server shutdown. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4254\" rel=\"external nofollow noreferrer\">#4254</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Correctly return the right type and properly handle locks in <code>joinGet</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4153\" rel=\"external nofollow noreferrer\">#4153</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Added <code>sumMapWithOverflow</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4151\" rel=\"external nofollow noreferrer\">#4151</a> (<a href=\"https://github.com/ercolanelli-leo\" rel=\"external nofollow noreferrer\">L\u00e9o Ercolanelli</a>)</li>\n<li>Fixed segfault with <code>allow_experimental_multiple_joins_emulation</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/52de2cd927f7b5257dd67e175f0a5560a48840d0\" rel=\"external nofollow noreferrer\">52de2c</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed bug with incorrect <code>Date</code> and <code>DateTime</code> comparison. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4237\" rel=\"external nofollow noreferrer\">#4237</a> (<a href=\"https://github.com/valexey\" rel=\"external nofollow noreferrer\">valexey</a>)</li>\n<li>Fixed fuzz test under undefined behavior sanitizer: added parameter type check for <code>quantile*Weighted</code> family of functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4145\" rel=\"external nofollow noreferrer\">#4145</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed rare race condition when removing of old data parts can fail with <code>File not found</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4378\" rel=\"external nofollow noreferrer\">#4378</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix install package with missing /etc/clickhouse-server/config.xml. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4343\" rel=\"external nofollow noreferrer\">#4343</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_5\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Debian package: correct /etc/clickhouse-server/preprocessed link according to config. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4205\" rel=\"external nofollow noreferrer\">#4205</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Various build fixes for FreeBSD. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4225\" rel=\"external nofollow noreferrer\">#4225</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added ability to create, fill and drop tables in perftest. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4220\" rel=\"external nofollow noreferrer\">#4220</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added a script to check for duplicate includes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4326\" rel=\"external nofollow noreferrer\">#4326</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added ability to run queries by index in performance test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4264\" rel=\"external nofollow noreferrer\">#4264</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Package with debug symbols is suggested to be installed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4274\" rel=\"external nofollow noreferrer\">#4274</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Refactoring of performance-test. Better logging and signals handling. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4171\" rel=\"external nofollow noreferrer\">#4171</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added docs to anonymized Yandex.Metrika datasets. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4164\" rel=\"external nofollow noreferrer\">#4164</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>\u0410dded tool for converting an old month-partitioned part to the custom-partitioned format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4195\" rel=\"external nofollow noreferrer\">#4195</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Added docs about two datasets in s3. <a href=\"https://gi");
            
            document.write("thub.com/ClickHouse/ClickHouse/pull/4144\" rel=\"external nofollow noreferrer\">#4144</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added script which creates changelog from pull requests description. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4169\" rel=\"external nofollow noreferrer\">#4169</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4173\" rel=\"external nofollow noreferrer\">#4173</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>) (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Added puppet module for Clickhouse. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4182\" rel=\"external nofollow noreferrer\">#4182</a> (<a href=\"https://github.com/MaxFedotov\" rel=\"external nofollow noreferrer\">Maxim Fedotov</a>)</li>\n<li>Added docs for a group of undocumented functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4168\" rel=\"external nofollow noreferrer\">#4168</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>ARM build fixes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4210\" rel=\"external nofollow noreferrer\">#4210</a><a href=\"https://github.com/ClickHouse/ClickHouse/pull/4306\" rel=\"external nofollow noreferrer\">#4306</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4291\" rel=\"external nofollow noreferrer\">#4291</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>) (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Dictionary tests now able to run from <code>ctest</code>.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4189\" rel=\"external nofollow noreferrer\">#4189</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Now <code>/etc/ssl</code> is used as default directory with SSL certificates. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4167\" rel=\"external nofollow noreferrer\">#4167</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added checking SSE and AVX instruction at start. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4234\" rel=\"external nofollow noreferrer\">#4234</a> (<a href=\"https://github.com/igron99\" rel=\"external nofollow noreferrer\">Igr</a>)</li>\n<li>Init script will wait server until start. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4281\" rel=\"external nofollow noreferrer\">#4281</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_1\">Backward Incompatible Changes<a class=\"headerlink\" href=\"#backward-incompatible-changes_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed <code>allow_experimental_low_cardinality_type</code> setting. <code>LowCardinality</code> data types are production ready. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4323\" rel=\"external nofollow noreferrer\">#4323</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Reduce mark cache size and uncompressed cache size accordingly to available memory amount. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4240\" rel=\"external nofollow noreferrer\">#4240</a> (<a href=\"https://github.com/k-lopatin\" rel=\"external nofollow noreferrer\">Lopatin Konstantin</a></li>\n<li>Added keyword <code>INDEX</code> in <code>CREATE TABLE</code> query. A column with name <code>index</code> must be quoted with backticks or double quotes: <code>`index`</code>.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4143\" rel=\"external nofollow noreferrer\">#4143</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li><code>sumMap</code> now promote result type instead of overflow. The old <code>sumMap</code> behavior can be obtained by using <code>sumMapWithOverflow</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4151\" rel=\"external nofollow noreferrer\">#4151</a> (<a href=\"https://github.com/ercolanelli-leo\" rel=\"external nofollow noreferrer\">L\u00e9o Ercolanelli</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_4\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>std::sort</code> replaced by <code>pdqsort</code> for queries without <code>LIMIT</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4236\" rel=\"external nofollow noreferrer\">#4236</a> (<a href=\"https://github.com/kvinty\" rel=\"external nofollow noreferrer\">Evgenii Pravda</a>)</li>\n<li>Now server reuse threads from global thread pool. This affects performance in some corner cases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4150\" rel=\"external nofollow noreferrer\">#4150</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"improvements_5\">Improvements<a class=\"headerlink\" href=\"#improvements_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Implemented AIO support for FreeBSD. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4305\" rel=\"external nofollow noreferrer\">#4305</a> (<a href=\"https://github.com/urgordeadbeef\" rel=\"external nofollow noreferrer\">urgordeadbeef</a>)</li>\n<li><code>SELECT * FROM a JOIN b USING a, b</code> now return <code>a</code> and <code>b</code> columns only from the left table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4141\" rel=\"external nofollow noreferrer\">#4141</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Allow <code>-C</code> option of client to work as <code>-c</code> option. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4232\" rel=\"external nofollow noreferrer\">#4232</a> (<a href=\"https://github.com/syominsergey\" rel=\"external nofollow noreferrer\">syominsergey</a>)</li>\n<li>Now option <code>--password</code> used without value requires password from stdin. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4230\" rel=\"external nofollow noreferrer\">#4230</a> (<a href=\"https://github.com/bsd-conqueror\" rel=\"external nofollow noreferrer\">BSD_Conqueror</a>)</li>\n<li>Added highlighting of unescaped metacharacters in string literals that contain <code>LIKE</code> expressions or regexps. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4327\" rel=\"external nofollow noreferrer\">#4327</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added cancelling of HTTP read only queries if client socket goes away. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4213\" rel=\"external nofollow noreferrer\">#4213</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Now server reports progress to keep client connections alive. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4215\" rel=\"external nofollow noreferrer\">#4215</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Slightly better message with reason for OPTIMIZE query with <code>optimize_throw_if_noop</code> setting enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4294\" rel=\"external nofollow noreferrer\">#4294</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added support of <code>--version</code> option for clickhouse server.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4251\" rel=\"external nofollow noreferrer\">#4251</a> (<a href=\"https://github.com/k-lopatin\" rel=\"external nofollow noreferrer\">Lopatin Konstantin</a>)</li>\n<li>Added <code>--help/-h</code> option to <code>clickhouse-server</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4233\" rel=\"external nofollow noreferrer\">#4233</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Added support for scalar subqueries with aggregate function state result. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4348\" rel=\"external nofollow noreferrer\">#4348</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Improved server shutdown time and ALTERs waiting time. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4372\" rel=\"external nofollow noreferrer\">#4372</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added info about the replicated_can_become_leader setting to system.replicas and add logging if the replica won't try to become leader. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4379\" rel=\"external nofollow noreferrer\">#4379</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-14-2019-03-14\">ClickHouse release 19.1.14, 2019-03-14<a class=\"headerlink\" href=\"#clickhouse-release-19-1-14-2019-03-14\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Fixed error <code>Column ... queried more than once</code> that may happen if the setting <code>asterisk_left_columns_only</code> is set to 1 in case of using <code>GLOBAL JOIN</code> with <code>SELECT *</code> (rare case). The issue does not exist in 19.3 and newer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4692/commits/6bac7d8d11a9b0d6de0b32b53c47eb2f6f8e7062\" rel=\"external nofollow noreferrer\">6bac7d8d</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-13-2019-03-12\">ClickHouse release 19.1.13, 2019-03-12<a class=\"headerlink\" href=\"#clickhouse-release-19-1-13-2019-03-12\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains exactly the same set of patches as 19.3.7.</p>\n<h3 id=\"clickhouse-release-19-1-10-2019-03-03\">ClickHouse release 19.1.10, 2019-03-03<a class=\"headerlink\" href=\"#clickhouse-release");
            
            document.write("-19-1-10-2019-03-03\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains exactly the same set of patches as 19.3.6.</p>\n<h3 id=\"clickhouse-release-19-1-9-2019-02-21\">ClickHouse release 19.1.9, 2019-02-21<a class=\"headerlink\" href=\"#clickhouse-release-19-1-9-2019-02-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_18\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_18\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed backward incompatibility with old versions due to wrong implementation of <code>send_logs_level</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4445\" rel=\"external nofollow noreferrer\">#4445</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed backward incompatibility of table function <code>remote</code> introduced with column comments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4446\" rel=\"external nofollow noreferrer\">#4446</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-8-2019-02-16\">ClickHouse release 19.1.8, 2019-02-16<a class=\"headerlink\" href=\"#clickhouse-release-19-1-8-2019-02-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_19\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_19\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix install package with missing /etc/clickhouse-server/config.xml. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4343\" rel=\"external nofollow noreferrer\">#4343</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-7-2019-02-15\">ClickHouse release 19.1.7, 2019-02-15<a class=\"headerlink\" href=\"#clickhouse-release-19-1-7-2019-02-15\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_20\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_20\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Correctly return the right type and properly handle locks in <code>joinGet</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4153\" rel=\"external nofollow noreferrer\">#4153</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Fixed error when system logs are tried to create again at server shutdown. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4254\" rel=\"external nofollow noreferrer\">#4254</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error: if there is a database with <code>Dictionary</code> engine, all dictionaries forced to load at server startup, and if there is a dictionary with ClickHouse source from localhost, the dictionary cannot load. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4255\" rel=\"external nofollow noreferrer\">#4255</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a bug when the execution of mutations containing <code>IN</code> operators was producing incorrect results. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4099\" rel=\"external nofollow noreferrer\">#4099</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li><code>clickhouse-client</code> can segfault on exit while loading data for command line suggestions if it was run in interactive mode. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4317\" rel=\"external nofollow noreferrer\">#4317</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed race condition when selecting from <code>system.tables</code> may give <code>table doesn't exist</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4313\" rel=\"external nofollow noreferrer\">#4313</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed deadlock when <code>SELECT</code> from a table with <code>File</code> engine was retried after <code>No such file or directory</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4161\" rel=\"external nofollow noreferrer\">#4161</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed an issue: local ClickHouse dictionaries are loaded via TCP, but should load within process. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4166\" rel=\"external nofollow noreferrer\">#4166</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed <code>No message received</code> error when interacting with PostgreSQL ODBC Driver through TLS connection. Also fixes segfault when using MySQL ODBC Driver. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4170\" rel=\"external nofollow noreferrer\">#4170</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Temporarily disable predicate optimization for <code>ORDER BY</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3890\" rel=\"external nofollow noreferrer\">#3890</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed infinite loop when selecting from table function <code>numbers(0)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4280\" rel=\"external nofollow noreferrer\">#4280</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed <code>compile_expressions</code> bug with comparison of big (more than int16) dates. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4341\" rel=\"external nofollow noreferrer\">#4341</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed segmentation fault with <code>uncompressed_cache=1</code> and exception with wrong uncompressed size. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4186\" rel=\"external nofollow noreferrer\">#4186</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>ALL JOIN</code> with duplicates in right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4184\" rel=\"external nofollow noreferrer\">#4184</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed wrong behaviour when doing <code>INSERT ... SELECT ... FROM file(...)</code> query and file has <code>CSVWithNames</code> or <code>TSVWIthNames</code> format and the first data row is missing. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4297\" rel=\"external nofollow noreferrer\">#4297</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed aggregate functions execution with <code>Array(LowCardinality)</code> arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4055\" rel=\"external nofollow noreferrer\">#4055</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Debian package: correct /etc/clickhouse-server/preprocessed link according to config. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4205\" rel=\"external nofollow noreferrer\">#4205</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed fuzz test under undefined behavior sanitizer: added parameter type check for <code>quantile*Weighted</code> family of functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4145\" rel=\"external nofollow noreferrer\">#4145</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Make <code>START REPLICATED SENDS</code> command start replicated sends. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4229\" rel=\"external nofollow noreferrer\">#4229</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Fixed <code>Not found column</code> for duplicate columns in JOIN ON section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4279\" rel=\"external nofollow noreferrer\">#4279</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Now <code>/etc/ssl</code> is used as default directory with SSL certificates. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4167\" rel=\"external nofollow noreferrer\">#4167</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed crash on dictionary reload if dictionary not available. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4188\" rel=\"external nofollow noreferrer\">#4188</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed bug with incorrect <code>Date</code> and <code>DateTime</code> comparison. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4237\" rel=\"external nofollow noreferrer\">#4237</a> (<a href=\"https://github.com/valexey\" rel=\"external nofollow noreferrer\">valexey</a>)</li>\n<li>Fixed incorrect result when <code>Date</code> and <code>DateTime</code> arguments are used in branches of conditional operator (function <code>if</code>). Added generic case for function <code>if</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4243\" rel=\"external nofollow noreferrer\">#4243</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-6-2019-01-24\">ClickHouse release 19.1.6, 2019-01-24<a class=\"headerlink\" href=\"#clickhouse-release-19-1-6-2019-01-24\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_7\">New Features<a class=\"headerlink\" href=\"#new-features_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Custom per column compression codecs for tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3899\" rel=\"external nofollow noreferrer\">#3899</a> <a href=\"https://githu");
            
            document.write("b.com/ClickHouse/ClickHouse/pull/4111\" rel=\"external nofollow noreferrer\">#4111</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>, <a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>, <a href=\"https://github.com/Sindbag\" rel=\"external nofollow noreferrer\">Anatoly</a>)</li>\n<li>Added compression codec <code>Delta</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4052\" rel=\"external nofollow noreferrer\">#4052</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Allow to <code>ALTER</code> compression codecs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4054\" rel=\"external nofollow noreferrer\">#4054</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added functions <code>left</code>, <code>right</code>, <code>trim</code>, <code>ltrim</code>, <code>rtrim</code>, <code>timestampadd</code>, <code>timestampsub</code> for SQL standard compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3826\" rel=\"external nofollow noreferrer\">#3826</a> (<a href=\"https://github.com/blinkov\" rel=\"external nofollow noreferrer\">Ivan Blinkov</a>)</li>\n<li>Support for write in <code>HDFS</code> tables and <code>hdfs</code> table function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4084\" rel=\"external nofollow noreferrer\">#4084</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added functions to search for multiple constant strings from big haystack: <code>multiPosition</code>, <code>multiSearch</code> ,<code>firstMatch</code> also with <code>-UTF8</code>, <code>-CaseInsensitive</code>, and <code>-CaseInsensitiveUTF8</code> variants. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4053\" rel=\"external nofollow noreferrer\">#4053</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Pruning of unused shards if <code>SELECT</code> query filters by sharding key (setting <code>optimize_skip_unused_shards</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3851\" rel=\"external nofollow noreferrer\">#3851</a> (<a href=\"https://github.com/kanterov\" rel=\"external nofollow noreferrer\">Gleb Kanterov</a>, <a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Allow <code>Kafka</code> engine to ignore some number of parsing errors per block. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4094\" rel=\"external nofollow noreferrer\">#4094</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Added support for <code>CatBoost</code> multiclass models evaluation. Function <code>modelEvaluate</code> returns tuple with per-class raw predictions for multiclass models. <code>libcatboostmodel.so</code> should be built with <a href=\"https://github.com/catboost/catboost/pull/607\" rel=\"external nofollow noreferrer\">#607</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3959\" rel=\"external nofollow noreferrer\">#3959</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Added functions <code>filesystemAvailable</code>, <code>filesystemFree</code>, <code>filesystemCapacity</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4097\" rel=\"external nofollow noreferrer\">#4097</a> (<a href=\"https://github.com/bgranvea\" rel=\"external nofollow noreferrer\">Boris Granveaud</a>)</li>\n<li>Added hashing functions <code>xxHash64</code> and <code>xxHash32</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3905\" rel=\"external nofollow noreferrer\">#3905</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Added <code>gccMurmurHash</code> hashing function (GCC flavoured Murmur hash) which uses the same hash seed as <a href=\"https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/functional_hash.h#L191\" rel=\"external nofollow noreferrer\">gcc</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4000\" rel=\"external nofollow noreferrer\">#4000</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Added hashing functions <code>javaHash</code>, <code>hiveHash</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3811\" rel=\"external nofollow noreferrer\">#3811</a> (<a href=\"https://github.com/shangshujie365\" rel=\"external nofollow noreferrer\">shangshujie365</a>)</li>\n<li>Added table function <code>remoteSecure</code>. Function works as <code>remote</code>, but uses secure connection. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4088\" rel=\"external nofollow noreferrer\">#4088</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"experimental-features_3\">Experimental features<a class=\"headerlink\" href=\"#experimental-features_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added multiple JOINs emulation (<code>allow_experimental_multiple_joins_emulation</code> setting). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3946\" rel=\"external nofollow noreferrer\">#3946</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_21\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_21\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Make <code>compiled_expression_cache_size</code> setting limited by default to lower memory consumption. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4041\" rel=\"external nofollow noreferrer\">#4041</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix a bug that led to hangups in threads that perform ALTERs of Replicated tables and in the thread that updates configuration from ZooKeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2947\" rel=\"external nofollow noreferrer\">#2947</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3891\" rel=\"external nofollow noreferrer\">#3891</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3934\" rel=\"external nofollow noreferrer\">#3934</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fixed a race condition when executing a distributed ALTER task. The race condition led to more than one replica trying to execute the task and all replicas except one failing with a ZooKeeper error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3904\" rel=\"external nofollow noreferrer\">#3904</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix a bug when <code>from_zk</code> config elements weren't refreshed after a request to ZooKeeper timed out. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2947\" rel=\"external nofollow noreferrer\">#2947</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3947\" rel=\"external nofollow noreferrer\">#3947</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix bug with wrong prefix for IPv4 subnet masks. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3945\" rel=\"external nofollow noreferrer\">#3945</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed crash (<code>std::terminate</code>) in rare cases when a new thread cannot be created due to exhausted resources. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3956\" rel=\"external nofollow noreferrer\">#3956</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug when in <code>remote</code> table function execution when wrong restrictions were used for in <code>getStructureOfRemoteTable</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4009\" rel=\"external nofollow noreferrer\">#4009</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix a leak of netlink sockets. They were placed in a pool where they were never deleted and new sockets were created at the start of a new thread when all current sockets were in use. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4017\" rel=\"external nofollow noreferrer\">#4017</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix bug with closing <code>/proc/self/fd</code> directory earlier than all fds were read from <code>/proc</code> after forking <code>odbc-bridge</code> subprocess. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4120\" rel=\"external nofollow noreferrer\">#4120</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed String to UInt monotonic conversion in case of usage String in primary key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3870\" rel=\"external nofollow noreferrer\">#3870</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed error in calculation of integer conversion function monotonicity. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3921\" rel=\"external nofollow noreferrer\">#3921</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed segfault in <code>arrayEnumerateUniq</code>, <code>arrayEnumerateDense</code> functions in case of some invalid arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3909\" rel=\"external nofollow noreferrer\">#3909</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix UB in StorageMerge. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3910\" rel=\"external nofollow noreferrer\">#3910</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Fixed segfault in functions <code>addDays</code>, <code>subtractDays</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3913\"");
            
            document.write(" rel=\"external nofollow noreferrer\">#3913</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error: functions <code>round</code>, <code>floor</code>, <code>trunc</code>, <code>ceil</code> may return bogus result when executed on integer argument and large negative scale. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3914\" rel=\"external nofollow noreferrer\">#3914</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a bug induced by 'kill query sync' which leads to a core dump. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3916\" rel=\"external nofollow noreferrer\">#3916</a> (<a href=\"https://github.com/fancyqlx\" rel=\"external nofollow noreferrer\">muVulDeePecker</a>)</li>\n<li>Fix bug with long delay after empty replication queue. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3928\" rel=\"external nofollow noreferrer\">#3928</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3932\" rel=\"external nofollow noreferrer\">#3932</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed excessive memory usage in case of inserting into table with <code>LowCardinality</code> primary key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3955\" rel=\"external nofollow noreferrer\">#3955</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fixed <code>LowCardinality</code> serialization for <code>Native</code> format in case of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3907\" rel=\"external nofollow noreferrer\">#3907</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4011\" rel=\"external nofollow noreferrer\">#4011</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fixed incorrect result while using distinct by single LowCardinality numeric column. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3895\" rel=\"external nofollow noreferrer\">#3895</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4012\" rel=\"external nofollow noreferrer\">#4012</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fixed specialized aggregation with LowCardinality key (in case when <code>compile</code> setting is enabled). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3886\" rel=\"external nofollow noreferrer\">#3886</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fix user and password forwarding for replicated tables queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3957\" rel=\"external nofollow noreferrer\">#3957</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>) (<a href=\"https://github.com/nicelulu\" rel=\"external nofollow noreferrer\">\u5c0f\u8def</a>)</li>\n<li>Fixed very rare race condition that can happen when listing tables in Dictionary database while reloading dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3970\" rel=\"external nofollow noreferrer\">#3970</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed incorrect result when HAVING was used with ROLLUP or CUBE. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3756\" rel=\"external nofollow noreferrer\">#3756</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3837\" rel=\"external nofollow noreferrer\">#3837</a> (<a href=\"https://github.com/reflection\" rel=\"external nofollow noreferrer\">Sam Chou</a>)</li>\n<li>Fixed column aliases for query with <code>JOIN ON</code> syntax and distributed tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3980\" rel=\"external nofollow noreferrer\">#3980</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed error in internal implementation of <code>quantileTDigest</code> (found by Artem Vakhrushev). This error never happens in ClickHouse and was relevant only for those who use ClickHouse codebase as a library directly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3935\" rel=\"external nofollow noreferrer\">#3935</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"improvements_6\">Improvements<a class=\"headerlink\" href=\"#improvements_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Support for <code>IF NOT EXISTS</code> in <code>ALTER TABLE ADD COLUMN</code> statements along with <code>IF EXISTS</code> in <code>DROP/MODIFY/CLEAR/COMMENT COLUMN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3900\" rel=\"external nofollow noreferrer\">#3900</a> (<a href=\"https://github.com/bgranvea\" rel=\"external nofollow noreferrer\">Boris Granveaud</a>)</li>\n<li>Function <code>parseDateTimeBestEffort</code>: support for formats <code>DD.MM.YYYY</code>, <code>DD.MM.YY</code>, <code>DD-MM-YYYY</code>, <code>DD-Mon-YYYY</code>, <code>DD/Month/YYYY</code> and similar. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3922\" rel=\"external nofollow noreferrer\">#3922</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>CapnProtoInputStream</code> now support jagged structures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4063\" rel=\"external nofollow noreferrer\">#4063</a> (<a href=\"https://github.com/Miniwoffer\" rel=\"external nofollow noreferrer\">Odin Hultgren Van Der Horst</a>)</li>\n<li>Usability improvement: added a check that server process is started from the data directory's owner. Do not allow to start server from root if the data belongs to non-root user. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3785\" rel=\"external nofollow noreferrer\">#3785</a> (<a href=\"https://github.com/sergey-v-galtsev\" rel=\"external nofollow noreferrer\">sergey-v-galtsev</a>)</li>\n<li>Better logic of checking required columns during analysis of queries with JOINs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3930\" rel=\"external nofollow noreferrer\">#3930</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Decreased the number of connections in case of large number of Distributed tables in a single server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3726\" rel=\"external nofollow noreferrer\">#3726</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Supported totals row for <code>WITH TOTALS</code> query for ODBC driver. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3836\" rel=\"external nofollow noreferrer\">#3836</a> (<a href=\"https://github.com/nightweb\" rel=\"external nofollow noreferrer\">Maksim Koritckiy</a>)</li>\n<li>Allowed to use <code>Enum</code>s as integers inside if function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3875\" rel=\"external nofollow noreferrer\">#3875</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Added <code>low_cardinality_allow_in_native_format</code> setting. If disabled, do not use <code>LowCadrinality</code> type in <code>Native</code> format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3879\" rel=\"external nofollow noreferrer\">#3879</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Removed some redundant objects from compiled expressions cache to lower memory usage. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4042\" rel=\"external nofollow noreferrer\">#4042</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add check that <code>SET send_logs_level = 'value'</code> query accept appropriate value. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3873\" rel=\"external nofollow noreferrer\">#3873</a> (<a href=\"https://github.com/s-mx\" rel=\"external nofollow noreferrer\">Sabyanin Maxim</a>)</li>\n<li>Fixed data type check in type conversion functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3896\" rel=\"external nofollow noreferrer\">#3896</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_5\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a MergeTree setting <code>use_minimalistic_part_header_in_zookeeper</code>. If enabled, Replicated tables will store compact part metadata in a single part znode. This can dramatically reduce ZooKeeper snapshot size (especially if the tables have a lot of columns). Note that after enabling this setting you will not be able to downgrade to a version that doesn't support it. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3960\" rel=\"external nofollow noreferrer\">#3960</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Add an DFA-based implementation for functions <code>sequenceMatch</code> and <code>sequenceCount</code> in case pattern doesn't contain time. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4004\" rel=\"external nofollow noreferrer\">#4004</a> (<a href=\"https://github.com/ercolanelli-leo\" rel=\"external nofollow noreferrer\">L\u00e9o Ercolanelli</a>)</li>\n<li>Performance improvement for integer numbers serialization. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3968\" rel=\"external nofollow noreferrer\">#3968</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Zero left padding PODArray so that -1 element is always valid and zeroed. It's used for branchless calculation of offsets. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3920\" rel=\"external nofollow noreferrer\">#3920</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Reverted <code>jemalloc</code> version which lead to pe");
            
            document.write("rformance degradation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4018\" rel=\"external nofollow noreferrer\">#4018</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_2\">Backward Incompatible Changes<a class=\"headerlink\" href=\"#backward-incompatible-changes_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed undocumented feature <code>ALTER MODIFY PRIMARY KEY</code> because it was superseded by the <code>ALTER MODIFY ORDER BY</code> command. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3887\" rel=\"external nofollow noreferrer\">#3887</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Removed function <code>shardByHash</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3833\" rel=\"external nofollow noreferrer\">#3833</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Forbid using scalar subqueries with result of type <code>AggregateFunction</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3865\" rel=\"external nofollow noreferrer\">#3865</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_6\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for PowerPC (<code>ppc64le</code>) build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4132\" rel=\"external nofollow noreferrer\">#4132</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Stateful functional tests are run on public available dataset. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3969\" rel=\"external nofollow noreferrer\">#3969</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error when the server cannot start with the <code>bash: /usr/bin/clickhouse-extract-from-config: Operation not permitted</code> message within Docker or systemd-nspawn. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4136\" rel=\"external nofollow noreferrer\">#4136</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Updated <code>rdkafka</code> library to v1.0.0-RC5. Used cppkafka instead of raw C interface. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4025\" rel=\"external nofollow noreferrer\">#4025</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Updated <code>mariadb-client</code> library. Fixed one of issues found by UBSan. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3924\" rel=\"external nofollow noreferrer\">#3924</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Some fixes for UBSan builds. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3926\" rel=\"external nofollow noreferrer\">#3926</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3021\" rel=\"external nofollow noreferrer\">#3021</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3948\" rel=\"external nofollow noreferrer\">#3948</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added per-commit runs of tests with UBSan build.</li>\n<li>Added per-commit runs of PVS-Studio static analyzer.</li>\n<li>Fixed bugs found by PVS-Studio. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4013\" rel=\"external nofollow noreferrer\">#4013</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed glibc compatibility issues. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4100\" rel=\"external nofollow noreferrer\">#4100</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Move Docker images to 18.10 and add compatibility file for glibc &gt;= 2.28 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3965\" rel=\"external nofollow noreferrer\">#3965</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add env variable if user don't want to chown directories in server Docker image. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3967\" rel=\"external nofollow noreferrer\">#3967</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Enabled most of the warnings from <code>-Weverything</code> in clang. Enabled <code>-Wpedantic</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3986\" rel=\"external nofollow noreferrer\">#3986</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added a few more warnings that are available only in clang 8. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3993\" rel=\"external nofollow noreferrer\">#3993</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Link to <code>libLLVM</code> rather than to individual LLVM libs when using shared linking. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3989\" rel=\"external nofollow noreferrer\">#3989</a> (<a href=\"https://github.com/orivej\" rel=\"external nofollow noreferrer\">Orivej Desh</a>)</li>\n<li>Added sanitizer variables for test images. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4072\" rel=\"external nofollow noreferrer\">#4072</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li><code>clickhouse-server</code> debian package will recommend <code>libcap2-bin</code> package to use <code>setcap</code> tool for setting capabilities. This is optional. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4093\" rel=\"external nofollow noreferrer\">#4093</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Improved compilation time, fixed includes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3898\" rel=\"external nofollow noreferrer\">#3898</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added performance tests for hash functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3918\" rel=\"external nofollow noreferrer\">#3918</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Fixed cyclic library dependences. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3958\" rel=\"external nofollow noreferrer\">#3958</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Improved compilation with low available memory. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4030\" rel=\"external nofollow noreferrer\">#4030</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added test script to reproduce performance degradation in <code>jemalloc</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4036\" rel=\"external nofollow noreferrer\">#4036</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed misspells in comments and string literals under <code>dbms</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4122\" rel=\"external nofollow noreferrer\">#4122</a> (<a href=\"https://github.com/maiha\" rel=\"external nofollow noreferrer\">maiha</a>)</li>\n<li>Fixed typos in comments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4089\" rel=\"external nofollow noreferrer\">#4089</a> (<a href=\"https://github.com/kvinty\" rel=\"external nofollow noreferrer\">Evgenii Pravda</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-18-16-1-2018-12-21\">ClickHouse release 18.16.1, 2018-12-21<a class=\"headerlink\" href=\"#clickhouse-release-18-16-1-2018-12-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_22\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_22\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error that led to problems with updating dictionaries with the ODBC source. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3825\" rel=\"external nofollow noreferrer\">#3825</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3829\" rel=\"external nofollow noreferrer\">#3829</a></li>\n<li>JIT compilation of aggregate functions now works with LowCardinality columns. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3838\" rel=\"external nofollow noreferrer\">#3838</a></li>\n</ul>\n<h4 id=\"improvements_7\">Improvements:<a class=\"headerlink\" href=\"#improvements_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>low_cardinality_allow_in_native_format</code> setting (enabled by default). When disabled, LowCardinality columns will be converted to ordinary columns for SELECT queries and ordinary columns will be expected for INSERT queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3879\" rel=\"external nofollow noreferrer\">#3879</a></li>\n</ul>\n<h4 id=\"build-improvements\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixes for builds on macOS and ARM.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-16-0-2018-12-14\">ClickHouse release 18.16.0, 2018-12-14<a class=\"headerlink\" href=\"#clickhouse-release-18-16-0-2018-12-14\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_8\">New features:<a class=\"headerlink\" href=\"#new-features_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>DEFAULT</code> expressions are evaluated for missing fields when loading data in semi-structured input formats (<code>JSONEachRow</code>, <code>TSKV</code>). The feature is enabled with the <code>insert_sample_with_metadata</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3555\" rel=\"external nofollow noreferrer\">#3555</a></li>\n<li>The <code>ALTER TABLE</code> query now ");
            
            document.write("has the <code>MODIFY ORDER BY</code> action for changing the sorting key when adding or removing a table column. This is useful for tables in the <code>MergeTree</code> family that perform additional tasks when merging based on this sorting key, such as <code>SummingMergeTree</code>, <code>AggregatingMergeTree</code>, and so on. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3581\" rel=\"external nofollow noreferrer\">#3581</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3755\" rel=\"external nofollow noreferrer\">#3755</a></li>\n<li>For tables in the <code>MergeTree</code> family, now you can specify a different sorting key (<code>ORDER BY</code>) and index (<code>PRIMARY KEY</code>). The sorting key can be longer than the index. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3581\" rel=\"external nofollow noreferrer\">#3581</a></li>\n<li>Added the <code>hdfs</code> table function and the <code>HDFS</code> table engine for importing and exporting data to HDFS. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3617\" rel=\"external nofollow noreferrer\">chenxing-xc</a></li>\n<li>Added functions for working with base64: <code>base64Encode</code>, <code>base64Decode</code>, <code>tryBase64Decode</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3350\" rel=\"external nofollow noreferrer\">Alexander Krasheninnikov</a></li>\n<li>Now you can use a parameter to configure the precision of the <code>uniqCombined</code> aggregate function (select the number of HyperLogLog cells). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3406\" rel=\"external nofollow noreferrer\">#3406</a></li>\n<li>Added the <code>system.contributors</code> table that contains the names of everyone who made commits in ClickHouse. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3452\" rel=\"external nofollow noreferrer\">#3452</a></li>\n<li>Added the ability to omit the partition for the <code>ALTER TABLE ... FREEZE</code> query in order to back up all partitions at once. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3514\" rel=\"external nofollow noreferrer\">#3514</a></li>\n<li>Added <code>dictGet</code> and <code>dictGetOrDefault</code> functions that don't require specifying the type of return value. The type is determined automatically from the dictionary description. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3564\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Now you can specify comments for a column in the table description and change it using <code>ALTER</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3377\" rel=\"external nofollow noreferrer\">#3377</a></li>\n<li>Reading is supported for <code>Join</code> type tables with simple keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3728\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Now you can specify the options <code>join_use_nulls</code>, <code>max_rows_in_join</code>, <code>max_bytes_in_join</code>, and <code>join_overflow_mode</code> when creating a <code>Join</code> type table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3728\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the <code>joinGet</code> function that allows you to use a <code>Join</code> type table like a dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3728\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the <code>partition_key</code>, <code>sorting_key</code>, <code>primary_key</code>, and <code>sampling_key</code> columns to the <code>system.tables</code> table in order to provide information about table keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3609\" rel=\"external nofollow noreferrer\">#3609</a></li>\n<li>Added the <code>is_in_partition_key</code>, <code>is_in_sorting_key</code>, <code>is_in_primary_key</code>, and <code>is_in_sampling_key</code> columns to the <code>system.columns</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3609\" rel=\"external nofollow noreferrer\">#3609</a></li>\n<li>Added the <code>min_time</code> and <code>max_time</code>  columns to the <code>system.parts</code> table. These columns are populated when the partitioning key is an expression consisting of <code>DateTime</code> columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3800\" rel=\"external nofollow noreferrer\">Emmanuel Donin de Rosi\u00e8re</a></li>\n</ul>\n<h4 id=\"bug-fixes_23\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_23\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixes and performance improvements for the <code>LowCardinality</code> data type. <code>GROUP BY</code> using <code>LowCardinality(Nullable(...))</code>. Getting the values of <code>extremes</code>. Processing high-order functions. <code>LEFT ARRAY JOIN</code>. Distributed <code>GROUP BY</code>. Functions that return <code>Array</code>. Execution of <code>ORDER BY</code>. Writing to <code>Distributed</code> tables (nicelulu). Backward compatibility for <code>INSERT</code> queries from old clients that implement the <code>Native</code> protocol. Support for <code>LowCardinality</code> for <code>JOIN</code>. Improved performance when working in a single stream. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3823\" rel=\"external nofollow noreferrer\">#3823</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3803\" rel=\"external nofollow noreferrer\">#3803</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3799\" rel=\"external nofollow noreferrer\">#3799</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3769\" rel=\"external nofollow noreferrer\">#3769</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3744\" rel=\"external nofollow noreferrer\">#3744</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3681\" rel=\"external nofollow noreferrer\">#3681</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3651\" rel=\"external nofollow noreferrer\">#3651</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3649\" rel=\"external nofollow noreferrer\">#3649</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3641\" rel=\"external nofollow noreferrer\">#3641</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3632\" rel=\"external nofollow noreferrer\">#3632</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3568\" rel=\"external nofollow noreferrer\">#3568</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3523\" rel=\"external nofollow noreferrer\">#3523</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3518\" rel=\"external nofollow noreferrer\">#3518</a></li>\n<li>Fixed how the <code>select_sequential_consistency</code> option works. Previously, when this setting was enabled, an incomplete result was sometimes returned after beginning to write to a new partition. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2863\" rel=\"external nofollow noreferrer\">#2863</a></li>\n<li>Databases are correctly specified when executing DDL <code>ON CLUSTER</code> queries and <code>ALTER UPDATE/DELETE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3772\" rel=\"external nofollow noreferrer\">#3772</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3460\" rel=\"external nofollow noreferrer\">#3460</a></li>\n<li>Databases are correctly specified for subqueries inside a VIEW. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3521\" rel=\"external nofollow noreferrer\">#3521</a></li>\n<li>Fixed a bug in <code>PREWHERE</code> with <code>FINAL</code> for <code>VersionedCollapsingMergeTree</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/7167bfd7b365538f7a91c4307ad77e552ab4e8c1\" rel=\"external nofollow noreferrer\">7167bfd7</a></li>\n<li>Now you can use <code>KILL QUERY</code> to cancel queries that have not started yet because they are waiting for the table to be locked. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3517\" rel=\"external nofollow noreferrer\">#3517</a></li>\n<li>Corrected date and time calculations if the clocks were moved back at midnight (this happens in Iran, and happened in Moscow from 1981 to 1983). Previously, this led to the time being reset a day earlier than necessary, and also caused incorrect formatting of the date and time in text format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3819\" rel=\"external nofollow noreferrer\">#3819</a></li>\n<li>Fixed bugs in some cases of <code>VIEW</code> and subqueries that omit the database. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3521\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed a race condition when simultaneously reading from a <code>MATERIALIZED VIEW</code> and deleting a <code>MATERIALIZED VIEW</code> due to not locking the internal <code>MATERIALIZED VIEW</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3404\" rel=\"external nofollow noreferrer\">#3404</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3694\" rel=\"external nofollow noreferrer\">#3694</a></li>\n<li>Fixed the error <code>Lock handler cannot be nullptr.</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3689\" rel=\"external nofollow noreferrer\">#3689</a></li>\n<li>Fixed query processing when the <code>compile_expressions</code> option is enabled (it's enabled by default). Nondeterministic constant expressions like the <code>now</code> function are no longer unfolded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3457\" rel=\"external nofollow noreferrer\">#3457</a></li>\n<li>Fixed a crash when specifying a non-constant scale argument in <code>toDecimal32/64/128</code> functions.</li>\n<li>Fixed an error when trying to insert an array with <code>NULL</code> elements in the <code>Values</code> format into a column of type <code>Array</code> without <code>Nullable</code> (if <code>input_format_values_interpret_expressions</code> = 1). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3487\" rel=\"external nofollow noreferrer\">#3487</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3503\" rel=\"external nofollow noreferrer\">#3503</a></li>\n<li>Fixed continuous error logging in <code>DDLWorker</code> if ZooKeeper is not available. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/8f50c620334988b28018213ec0092fe64238");
            
            document.write("47e2\" rel=\"external nofollow noreferrer\">8f50c620</a></li>\n<li>Fixed the return type for <code>quantile*</code> functions from <code>Date</code> and <code>DateTime</code> types of arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3580\" rel=\"external nofollow noreferrer\">#3580</a></li>\n<li>Fixed the <code>WITH</code> clause if it specifies a simple alias without expressions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3570\" rel=\"external nofollow noreferrer\">#3570</a></li>\n<li>Fixed processing of queries with named sub-queries and qualified column names when <code>enable_optimize_predicate_expression</code> is enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3588\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed the error <code>Attempt to attach to nullptr thread group</code> when working with materialized views. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3623\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>Fixed a crash when passing certain incorrect arguments to the <code>arrayReverse</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871\" rel=\"external nofollow noreferrer\">73e3a7b6</a></li>\n<li>Fixed the buffer overflow in the <code>extractURLParameter</code> function. Improved performance. Added correct processing of strings containing zero bytes. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/141e9799e49201d84ea8e951d1bed4fb6d3dacb5\" rel=\"external nofollow noreferrer\">141e9799</a></li>\n<li>Fixed buffer overflow in the <code>lowerUTF8</code> and <code>upperUTF8</code> functions. Removed the ability to execute these functions over <code>FixedString</code> type arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3662\" rel=\"external nofollow noreferrer\">#3662</a></li>\n<li>Fixed a rare race condition when deleting <code>MergeTree</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3680\" rel=\"external nofollow noreferrer\">#3680</a></li>\n<li>Fixed a race condition when reading from <code>Buffer</code> tables and simultaneously performing <code>ALTER</code> or <code>DROP</code> on the target tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3719\" rel=\"external nofollow noreferrer\">#3719</a></li>\n<li>Fixed a segfault if the <code>max_temporary_non_const_columns</code> limit was exceeded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3788\" rel=\"external nofollow noreferrer\">#3788</a></li>\n</ul>\n<h4 id=\"improvements_8\">Improvements:<a class=\"headerlink\" href=\"#improvements_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The server does not write the processed configuration files to the <code>/etc/clickhouse-server/</code> directory. Instead, it saves them in the <code>preprocessed_configs</code> directory inside <code>path</code>. This means that the <code>/etc/clickhouse-server/</code> directory doesn't have write access for the <code>clickhouse</code> user, which improves security. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2443\" rel=\"external nofollow noreferrer\">#2443</a></li>\n<li>The <code>min_merge_bytes_to_use_direct_io</code> option is set to 10 GiB by default. A merge that forms large parts of tables from the MergeTree family will be performed in <code>O_DIRECT</code> mode, which prevents excessive page cache eviction. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3504\" rel=\"external nofollow noreferrer\">#3504</a></li>\n<li>Accelerated server start when there is a very large number of tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3398\" rel=\"external nofollow noreferrer\">#3398</a></li>\n<li>Added a connection pool and HTTP <code>Keep-Alive</code> for connections between replicas. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3594\" rel=\"external nofollow noreferrer\">#3594</a></li>\n<li>If the query syntax is invalid, the <code>400 Bad Request</code> code is returned in the <code>HTTP</code> interface (500 was returned previously). <a href=\"https://github.com/ClickHouse/ClickHouse/commit/31bc680ac5f4bb1d0360a8ba4696fa84bb47d6ab\" rel=\"external nofollow noreferrer\">31bc680a</a></li>\n<li>The <code>join_default_strictness</code> option is set to <code>ALL</code> by default for compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/120e2cbe2ff4fbad626c28042d9b28781c805afe\" rel=\"external nofollow noreferrer\">120e2cbe</a></li>\n<li>Removed logging to <code>stderr</code> from the <code>re2</code> library for invalid or complex regular expressions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3723\" rel=\"external nofollow noreferrer\">#3723</a></li>\n<li>Added for the <code>Kafka</code> table engine: checks for subscriptions before beginning to read from Kafka; the kafka_max_block_size setting for the table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3396\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>The <code>cityHash64</code>, <code>farmHash64</code>, <code>metroHash64</code>, <code>sipHash64</code>, <code>halfMD5</code>, <code>murmurHash2_32</code>, <code>murmurHash2_64</code>, <code>murmurHash3_32</code>, and <code>murmurHash3_64</code> functions now work for any number of arguments and for arguments in the form of tuples. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3451\" rel=\"external nofollow noreferrer\">#3451</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3519\" rel=\"external nofollow noreferrer\">#3519</a></li>\n<li>The <code>arrayReverse</code> function now works with any types of arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871\" rel=\"external nofollow noreferrer\">73e3a7b6</a></li>\n<li>Added an optional parameter: the slot size for the <code>timeSlots</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3724\" rel=\"external nofollow noreferrer\">Kirill Shvakov</a></li>\n<li>For <code>FULL</code> and <code>RIGHT JOIN</code>, the <code>max_block_size</code> setting is used for a stream of non-joined data from the right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3699\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the <code>--secure</code> command line parameter in  <code>clickhouse-benchmark</code> and <code>clickhouse-performance-test</code> to enable TLS. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3688\" rel=\"external nofollow noreferrer\">#3688</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3690\" rel=\"external nofollow noreferrer\">#3690</a></li>\n<li>Type conversion when the structure of a <code>Buffer</code> type table does not match the structure of the destination table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3603\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a></li>\n<li>Added the <code>tcp_keep_alive_timeout</code> option to enable keep-alive packets after inactivity for the specified time interval. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3441\" rel=\"external nofollow noreferrer\">#3441</a></li>\n<li>Removed unnecessary quoting of values for the partition key in the <code>system.parts</code> table if it consists of a single column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3652\" rel=\"external nofollow noreferrer\">#3652</a></li>\n<li>The modulo function works for <code>Date</code> and <code>DateTime</code> data types. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3385\" rel=\"external nofollow noreferrer\">#3385</a></li>\n<li>Added synonyms for the <code>POWER</code>, <code>LN</code>, <code>LCASE</code>, <code>UCASE</code>, <code>REPLACE</code>, <code>LOCATE</code>, <code>SUBSTR</code>, and <code>MID</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3774\" rel=\"external nofollow noreferrer\">#3774</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3763\" rel=\"external nofollow noreferrer\">#3763</a> Some function names are case-insensitive for compatibility with the SQL standard. Added syntactic sugar <code>SUBSTRING(expr FROM start FOR length)</code> for compatibility with SQL. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3804\" rel=\"external nofollow noreferrer\">#3804</a></li>\n<li>Added the ability to <code>mlock</code> memory pages corresponding to <code>clickhouse-server</code>  executable code to prevent it from being forced out of memory. This feature is disabled by default. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3553\" rel=\"external nofollow noreferrer\">#3553</a></li>\n<li>Improved performance when reading from <code>O_DIRECT</code> (with the <code>min_bytes_to_use_direct_io</code> option enabled). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3405\" rel=\"external nofollow noreferrer\">#3405</a></li>\n<li>Improved performance of the <code>dictGet...OrDefault</code> function for a constant key argument and a non-constant default argument. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3563\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>The <code>firstSignificantSubdomain</code> function now processes the domains <code>gov</code>, <code>mil</code>, and <code>edu</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3601\" rel=\"external nofollow noreferrer\">Igor Hatarist</a> Improved performance. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3628\" rel=\"external nofollow noreferrer\">#3628</a></li>\n<li>Ability to specify custom environment variables for starting <code>clickhouse-server</code> using the <code>SYS-V init.d</code> script by defining <code>CLICKHOUSE_PROGRAM_ENV</code> in <code>/etc/default/clickhouse</code>.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/3612\" rel=\"external nofollow noreferrer\">Pavlo Bashynskyi</a></li>\n<li>Correct return code for the clickhouse-server init script. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3516\" rel=\"external nofollow noreferrer\">#3516</a></li>\n<li>The <code>system.metrics</code> table now has the <code>VersionInteger</code> metric, and <code>system.build_options</code> has the added line <code>VERSION_INTEGER</code>, which contains the numeric form of the ClickHouse versio");
            
            document.write("n, such as  <code>18016000</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3644\" rel=\"external nofollow noreferrer\">#3644</a></li>\n<li>Removed the ability to compare the <code>Date</code> type with a number to avoid potential errors like <code>date = 2018-12-17</code>, where quotes around the date are omitted by mistake. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3687\" rel=\"external nofollow noreferrer\">#3687</a></li>\n<li>Fixed the behavior of stateful functions like <code>rowNumberInAllBlocks</code>. They previously output a result that was one number larger due to starting during query analysis. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3729\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>If the <code>force_restore_data</code> file can't be deleted, an error message is displayed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3794\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n</ul>\n<h4 id=\"build-improvements_1\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Updated the <code>jemalloc</code> library, which fixes a potential memory leak. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3557\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Profiling with <code>jemalloc</code> is enabled by default in order to debug builds. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/2cc82f5cbe266421cd4c1165286c2c47e5ffcb15\" rel=\"external nofollow noreferrer\">2cc82f5c</a></li>\n<li>Added the ability to run integration tests when only <code>Docker</code> is installed on the system. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3650\" rel=\"external nofollow noreferrer\">#3650</a></li>\n<li>Added the fuzz expression test in SELECT queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3442\" rel=\"external nofollow noreferrer\">#3442</a></li>\n<li>Added a stress test for commits, which performs functional tests in parallel and in random order to detect more race conditions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3438\" rel=\"external nofollow noreferrer\">#3438</a></li>\n<li>Improved the method for starting clickhouse-server in a Docker image. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3663\" rel=\"external nofollow noreferrer\">Elghazal Ahmed</a></li>\n<li>For a Docker image, added support for initializing databases using files in the <code>/docker-entrypoint-initdb.d</code> directory. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3695\" rel=\"external nofollow noreferrer\">Konstantin Lebedev</a></li>\n<li>Fixes for builds on ARM. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3709\" rel=\"external nofollow noreferrer\">#3709</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_3\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed the ability to compare the <code>Date</code> type with a number. Instead of <code>toDate('2018-12-18') = 17883</code>, you must use explicit type conversion <code>= toDate(17883)</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3687\" rel=\"external nofollow noreferrer\">#3687</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-19-2018-12-19\">ClickHouse release 18.14.19, 2018-12-19<a class=\"headerlink\" href=\"#clickhouse-release-18-14-19-2018-12-19\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_24\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_24\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error that led to problems with updating dictionaries with the ODBC source. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3825\" rel=\"external nofollow noreferrer\">#3825</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3829\" rel=\"external nofollow noreferrer\">#3829</a></li>\n<li>Databases are correctly specified when executing DDL <code>ON CLUSTER</code> queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3460\" rel=\"external nofollow noreferrer\">#3460</a></li>\n<li>Fixed a segfault if the <code>max_temporary_non_const_columns</code> limit was exceeded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3788\" rel=\"external nofollow noreferrer\">#3788</a></li>\n</ul>\n<h4 id=\"build-improvements_2\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixes for builds on ARM.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-18-2018-12-04\">ClickHouse release 18.14.18, 2018-12-04<a class=\"headerlink\" href=\"#clickhouse-release-18-14-18-2018-12-04\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_25\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_25\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed error in <code>dictGet...</code> function for dictionaries of type <code>range</code>, if one of the arguments is constant and other is not. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3751\" rel=\"external nofollow noreferrer\">#3751</a></li>\n<li>Fixed error that caused messages <code>netlink: '...': attribute type 1 has an invalid length</code> to be printed in Linux kernel log, that was happening only on fresh enough versions of Linux kernel. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3749\" rel=\"external nofollow noreferrer\">#3749</a></li>\n<li>Fixed segfault in function <code>empty</code> for argument of <code>FixedString</code> type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3703\" rel=\"external nofollow noreferrer\">Daniel, Dao Quang Minh</a></li>\n<li>Fixed excessive memory allocation when using large value of <code>max_query_size</code> setting (a memory chunk of <code>max_query_size</code> bytes was preallocated at once). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3720\" rel=\"external nofollow noreferrer\">#3720</a></li>\n</ul>\n<h4 id=\"build-changes\">Build changes:<a class=\"headerlink\" href=\"#build-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed build with LLVM/Clang libraries of version 7 from the OS packages (these libraries are used for runtime query compilation). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3582\" rel=\"external nofollow noreferrer\">#3582</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-17-2018-11-30\">ClickHouse release 18.14.17, 2018-11-30<a class=\"headerlink\" href=\"#clickhouse-release-18-14-17-2018-11-30\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_26\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_26\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed cases when the ODBC bridge process did not terminate with the main server process. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3642\" rel=\"external nofollow noreferrer\">#3642</a></li>\n<li>Fixed synchronous insertion into the <code>Distributed</code> table with a columns list that differs from the column list of the remote table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3673\" rel=\"external nofollow noreferrer\">#3673</a></li>\n<li>Fixed a rare race condition that can lead to a crash when dropping a MergeTree table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3643\" rel=\"external nofollow noreferrer\">#3643</a></li>\n<li>Fixed a query deadlock in case when query thread creation fails with the <code>Resource temporarily unavailable</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3643\" rel=\"external nofollow noreferrer\">#3643</a></li>\n<li>Fixed parsing of the <code>ENGINE</code> clause when the <code>CREATE AS table</code> syntax was used and the <code>ENGINE</code> clause was specified before the <code>AS table</code> (the error resulted in ignoring the specified engine). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3692\" rel=\"external nofollow noreferrer\">#3692</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-15-2018-11-21\">ClickHouse release 18.14.15, 2018-11-21<a class=\"headerlink\" href=\"#clickhouse-release-18-14-15-2018-11-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_27\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_27\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The size of memory chunk was overestimated while deserializing the column of type <code>Array(String)</code> that leads to \"Memory limit exceeded\" errors. The issue appeared in version 18.12.13. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3589\" rel=\"external nofollow noreferrer\">#3589</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-14-2018-11-20\">ClickHouse release 18.14.14, 2018-11-20<a class=\"headerlink\" href=\"#clickhouse-release-18-14-14-2018-11-20\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_28\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_28\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed <code>ON CLUSTER</code> queries when cluster configured as secure (flag <code>&lt;secure&gt;</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3599\" rel=\"external nofollow noreferrer\">#3599</a></li>\n</ul>\n<h4 id=\"build-changes_1\">Build changes:<a class=\"headerlink\" href=\"#build-changes_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed problems (llvm-7 from system, macos) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3582\" rel=\"external nofollow noreferrer\">#3582</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-13-2018-11-08\">ClickHouse release 18.14.13, 2018-11-08<a class=\"headerlink\" href=\"#clickhouse-release-18-14-13-2018-11-08\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_29\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_29\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the <code>Block structure mismatch in MergingSorted stream</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3162\" rel=\"external nofollow noreferrer\">#3162</a></li>\n<li>Fixed <code>ON CLUSTER</code> queries in case when secure connections were turned on in the cluster config (the <code>&lt;secure&gt;</code> flag). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3465\" rel=\"external nofollow noreferrer\">#3465</a></li>\n<li>Fixed an error in queries that used <code>SAMPLE</code>, <code>PREWHERE</code> and alias columns. <a href=\"https://github.com/ClickHouse/Clic");
            
            document.write("kHouse/pull/3543\" rel=\"external nofollow noreferrer\">#3543</a></li>\n<li>Fixed a rare <code>unknown compression method</code> error when the <code>min_bytes_to_use_direct_io</code> setting was enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3544\" rel=\"external nofollow noreferrer\">3544</a></li>\n</ul>\n<h4 id=\"performance-improvements_6\">Performance improvements:<a class=\"headerlink\" href=\"#performance-improvements_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed performance regression of queries with <code>GROUP BY</code> of columns of UInt16 or Date type when executing on AMD EPYC processors. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3512\" rel=\"external nofollow noreferrer\">Igor Lapko</a></li>\n<li>Fixed performance regression of queries that process long strings. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3530\" rel=\"external nofollow noreferrer\">#3530</a></li>\n</ul>\n<h4 id=\"build-improvements_3\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improvements for simplifying the Arcadia build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3475\" rel=\"external nofollow noreferrer\">#3475</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3535\" rel=\"external nofollow noreferrer\">#3535</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-12-2018-11-02\">ClickHouse release 18.14.12, 2018-11-02<a class=\"headerlink\" href=\"#clickhouse-release-18-14-12-2018-11-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_30\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_30\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a crash on joining two unnamed subqueries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3505\" rel=\"external nofollow noreferrer\">#3505</a></li>\n<li>Fixed generating incorrect queries (with an empty <code>WHERE</code> clause) when querying external databases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3477\" rel=\"external nofollow noreferrer\">hotid</a></li>\n<li>Fixed using an incorrect timeout value in ODBC dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3511\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-11-2018-10-29\">ClickHouse release 18.14.11, 2018-10-29<a class=\"headerlink\" href=\"#clickhouse-release-18-14-11-2018-10-29\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_31\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_31\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the error <code>Block structure mismatch in UNION stream: different number of columns</code> in LIMIT queries. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2156\" rel=\"external nofollow noreferrer\">#2156</a></li>\n<li>Fixed errors when merging data in tables containing arrays inside Nested structures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3397\" rel=\"external nofollow noreferrer\">#3397</a></li>\n<li>Fixed incorrect query results if the <code>merge_tree_uniform_read_distribution</code> setting is disabled (it is enabled by default). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3429\" rel=\"external nofollow noreferrer\">#3429</a></li>\n<li>Fixed an error on inserts to a Distributed table in Native format. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3411\" rel=\"external nofollow noreferrer\">#3411</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-10-2018-10-23\">ClickHouse release 18.14.10, 2018-10-23<a class=\"headerlink\" href=\"#clickhouse-release-18-14-10-2018-10-23\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>The <code>compile_expressions</code> setting (JIT compilation of expressions) is disabled by default. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3410\" rel=\"external nofollow noreferrer\">#3410</a></li>\n<li>The <code>enable_optimize_predicate_expression</code> setting is disabled by default.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-9-2018-10-16\">ClickHouse release 18.14.9, 2018-10-16<a class=\"headerlink\" href=\"#clickhouse-release-18-14-9-2018-10-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_9\">New features:<a class=\"headerlink\" href=\"#new-features_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The <code>WITH CUBE</code> modifier for <code>GROUP BY</code> (the alternative syntax <code>GROUP BY CUBE(...)</code> is also available). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3172\" rel=\"external nofollow noreferrer\">#3172</a></li>\n<li>Added the <code>formatDateTime</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2770\" rel=\"external nofollow noreferrer\">Alexandr Krasheninnikov</a></li>\n<li>Added the <code>JDBC</code>  table engine and <code>jdbc</code>  table function (requires installing clickhouse-jdbc-bridge). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3210\" rel=\"external nofollow noreferrer\">Alexandr Krasheninnikov</a></li>\n<li>Added functions for working with the ISO week number: <code>toISOWeek</code>, <code>toISOYear</code>, <code>toStartOfISOYear</code>, and <code>toDayOfYear</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3146\" rel=\"external nofollow noreferrer\">#3146</a></li>\n<li>Now you can use <code>Nullable</code> columns for <code>MySQL</code> and <code>ODBC</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3362\" rel=\"external nofollow noreferrer\">#3362</a></li>\n<li>Nested data structures can be read as nested objects in <code>JSONEachRow</code> format. Added the <code>input_format_import_nested_json</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3144\" rel=\"external nofollow noreferrer\">Veloman Yunkan</a></li>\n<li>Parallel processing is available for many <code>MATERIALIZED VIEW</code>s when inserting data. See the <code>parallel_view_processing</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3208\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>Added the <code>SYSTEM FLUSH LOGS</code> query (forced log flushes to system tables such as <code>query_log</code>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3321\" rel=\"external nofollow noreferrer\">#3321</a></li>\n<li>Now you can use pre-defined <code>database</code> and <code>table</code> macros when declaring <code>Replicated</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3251\" rel=\"external nofollow noreferrer\">#3251</a></li>\n<li>Added the ability to read <code>Decimal</code>  type values in engineering notation (indicating powers of ten). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3153\" rel=\"external nofollow noreferrer\">#3153</a></li>\n</ul>\n<h4 id=\"experimental-features_4\">Experimental features:<a class=\"headerlink\" href=\"#experimental-features_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Optimization of the GROUP BY clause for <code>LowCardinality data types.</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3138\" rel=\"external nofollow noreferrer\">#3138</a></li>\n<li>Optimized calculation of expressions for <code>LowCardinality data types.</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3200\" rel=\"external nofollow noreferrer\">#3200</a></li>\n</ul>\n<h4 id=\"improvements_9\">Improvements:<a class=\"headerlink\" href=\"#improvements_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Significantly reduced memory consumption for queries with <code>ORDER BY</code> and <code>LIMIT</code>. See the <code>max_bytes_before_remerge_sort</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3205\" rel=\"external nofollow noreferrer\">#3205</a></li>\n<li>In the absence of <code>JOIN</code> (<code>LEFT</code>, <code>INNER</code>, ...), <code>INNER JOIN</code> is assumed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3147\" rel=\"external nofollow noreferrer\">#3147</a></li>\n<li>Qualified asterisks work correctly in queries with <code>JOIN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3202\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>The <code>ODBC</code> table engine correctly chooses the method for quoting identifiers in the SQL dialect of a remote database. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3210\" rel=\"external nofollow noreferrer\">Alexandr Krasheninnikov</a></li>\n<li>The <code>compile_expressions</code> setting (JIT compilation of expressions) is enabled by default.</li>\n<li>Fixed behavior for simultaneous DROP DATABASE/TABLE IF EXISTS and CREATE DATABASE/TABLE IF NOT EXISTS. Previously, a <code>CREATE DATABASE ... IF NOT EXISTS</code> query could return the error message \"File ... already exists\", and the <code>CREATE TABLE ... IF NOT EXISTS</code> and <code>DROP TABLE IF EXISTS</code> queries could return <code>Table ... is creating or attaching right now</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3101\" rel=\"external nofollow noreferrer\">#3101</a></li>\n<li>LIKE and IN expressions with a constant right half are passed to the remote server when querying from MySQL or ODBC tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3182\" rel=\"external nofollow noreferrer\">#3182</a></li>\n<li>Comparisons with constant expressions in a WHERE clause are passed to the remote server when querying from MySQL and ODBC tables. Previously, only comparisons with constants were passed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3182\" rel=\"external nofollow noreferrer\">#3182</a></li>\n<li>Correct calculation of row width in the terminal for <code>Pretty</code> formats, including strings with hieroglyphs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3257\" rel=\"external nofollow noreferrer\">Amos Bird</a>.</li>\n<li><code>ON CLUSTER</code> can be specified for <code>ALTER UPDATE</code> queries.</li>\n<li>Improved performance for reading data in <code>JSONEachRow</code> format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3332\" rel=\"external nofollow noreferrer\">#3332</a></li>\n<li>Added synonyms for the <code>LENGTH</code> and <code>CHARACTER_LENGTH</code> functions for compatibility. The <code>CONCAT</code> function is no longer case-sensitive. <a href=\"https://github.com/ClickHouse/C");
            
            document.write("lickHouse/pull/3306\" rel=\"external nofollow noreferrer\">#3306</a></li>\n<li>Added the <code>TIMESTAMP</code> synonym for the <code>DateTime</code> type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3390\" rel=\"external nofollow noreferrer\">#3390</a></li>\n<li>There is always space reserved for query_id in the server logs, even if the log line is not related to a query. This makes it easier to parse server text logs with third-party tools.</li>\n<li>Memory consumption by a query is logged when it exceeds the next level of an integer number of gigabytes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3205\" rel=\"external nofollow noreferrer\">#3205</a></li>\n<li>Added compatibility mode for the case when the client library that uses the Native protocol sends fewer columns by mistake than the server expects for the INSERT query. This scenario was possible when using the clickhouse-cpp library. Previously, this scenario caused the server to crash. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3171\" rel=\"external nofollow noreferrer\">#3171</a></li>\n<li>In a user-defined WHERE expression in <code>clickhouse-copier</code>, you can now use a <code>partition_key</code> alias (for additional filtering by source table partition). This is useful if the partitioning scheme changes during copying, but only changes slightly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3166\" rel=\"external nofollow noreferrer\">#3166</a></li>\n<li>The workflow of the <code>Kafka</code> engine has been moved to a background thread pool in order to automatically reduce the speed of data reading at high loads. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3215\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a>.</li>\n<li>Support for reading <code>Tuple</code> and <code>Nested</code> values of structures like <code>struct</code> in the <code>Cap'n'Proto format</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3216\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>The list of top-level domains for the <code>firstSignificantSubdomain</code> function now includes the domain <code>biz</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3219\" rel=\"external nofollow noreferrer\">decaseal</a></li>\n<li>In the configuration of external dictionaries, <code>null_value</code> is interpreted as the value of the default data type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3330\" rel=\"external nofollow noreferrer\">#3330</a></li>\n<li>Support for the <code>intDiv</code> and <code>intDivOrZero</code> functions for <code>Decimal</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/b48402e8712e2b9b151e0eef8193811d433a1264\" rel=\"external nofollow noreferrer\">b48402e8</a></li>\n<li>Support for the <code>Date</code>, <code>DateTime</code>, <code>UUID</code>, and <code>Decimal</code> types as a key for the <code>sumMap</code> aggregate function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3281\" rel=\"external nofollow noreferrer\">#3281</a></li>\n<li>Support for the <code>Decimal</code> data type in external dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3324\" rel=\"external nofollow noreferrer\">#3324</a></li>\n<li>Support for the <code>Decimal</code> data type in <code>SummingMergeTree</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3348\" rel=\"external nofollow noreferrer\">#3348</a></li>\n<li>Added specializations for <code>UUID</code> in <code>if</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3366\" rel=\"external nofollow noreferrer\">#3366</a></li>\n<li>Reduced the number of <code>open</code> and <code>close</code> system calls when reading from a <code>MergeTree table</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3283\" rel=\"external nofollow noreferrer\">#3283</a></li>\n<li>A <code>TRUNCATE TABLE</code> query can be executed on any replica (the query is passed to the leader replica). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3375\" rel=\"external nofollow noreferrer\">Kirill Shvakov</a></li>\n</ul>\n<h4 id=\"bug-fixes_32\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_32\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an issue with <code>Dictionary</code> tables for <code>range_hashed</code> dictionaries. This error occurred in version 18.12.17. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/1702\" rel=\"external nofollow noreferrer\">#1702</a></li>\n<li>Fixed an error when loading <code>range_hashed</code> dictionaries (the message <code>Unsupported type Nullable (...)</code>). This error occurred in version 18.12.17. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3362\" rel=\"external nofollow noreferrer\">#3362</a></li>\n<li>Fixed errors in the <code>pointInPolygon</code> function due to the accumulation of inaccurate calculations for polygons with a large number of vertices located close to each other. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3331\" rel=\"external nofollow noreferrer\">#3331</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3341\" rel=\"external nofollow noreferrer\">#3341</a></li>\n<li>If after merging data parts, the checksum for the resulting part differs from the result of the same merge in another replica, the result of the merge is deleted and the data part is downloaded from the other replica (this is the correct behavior). But after downloading the data part, it couldn't be added to the working set because of an error that the part already exists (because the data part was deleted with some delay after the merge). This led to cyclical attempts to download the same data. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3194\" rel=\"external nofollow noreferrer\">#3194</a></li>\n<li>Fixed incorrect calculation of total memory consumption by queries (because of incorrect calculation, the <code>max_memory_usage_for_all_queries</code> setting worked incorrectly and the <code>MemoryTracking</code> metric had an incorrect value). This error occurred in version 18.12.13. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3344\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>Fixed the functionality of <code>CREATE TABLE ... ON CLUSTER ... AS SELECT ...</code> This error occurred in version 18.12.13. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3247\" rel=\"external nofollow noreferrer\">#3247</a></li>\n<li>Fixed unnecessary preparation of data structures for <code>JOIN</code>s on the server that initiates the query if the <code>JOIN</code> is only performed on remote servers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3340\" rel=\"external nofollow noreferrer\">#3340</a></li>\n<li>Fixed bugs in the <code>Kafka</code> engine: deadlocks after exceptions when starting to read data, and locks upon completion <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3215\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a>.</li>\n<li>For <code>Kafka</code> tables, the optional <code>schema</code> parameter was not passed  (the schema of the <code>Cap'n'Proto</code> format). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3150\" rel=\"external nofollow noreferrer\">Vojtech Splichal</a></li>\n<li>If the ensemble of ZooKeeper servers has servers that accept the connection but then immediately close it instead of responding to the handshake, ClickHouse chooses to connect another server. Previously, this produced the error <code>Cannot read all data. Bytes read: 0. Bytes expected: 4.</code> and the server couldn't start. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/8218cf3a5f39a43401953769d6d12a0bb8d29da9\" rel=\"external nofollow noreferrer\">8218cf3a</a></li>\n<li>If the ensemble of ZooKeeper servers contains servers for which the DNS query returns an error, these servers are ignored. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/17b8e209221061325ad7ba0539f03c6e65f87f29\" rel=\"external nofollow noreferrer\">17b8e209</a></li>\n<li>Fixed type conversion between <code>Date</code> and <code>DateTime</code> when inserting data in the <code>VALUES</code> format (if <code>input_format_values_interpret_expressions = 1</code>). Previously, the conversion was performed between the numerical value of the number of days in Unix Epoch time and the Unix timestamp, which led to unexpected results. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3229\" rel=\"external nofollow noreferrer\">#3229</a></li>\n<li>Corrected type conversion between <code>Decimal</code> and integer numbers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3211\" rel=\"external nofollow noreferrer\">#3211</a></li>\n<li>Fixed errors in the <code>enable_optimize_predicate_expression</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3231\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed a parsing error in CSV format with floating-point numbers if a non-default CSV separator is used, such as <code>;</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3155\" rel=\"external nofollow noreferrer\">#3155</a></li>\n<li>Fixed the <code>arrayCumSumNonNegative</code> function (it does not accumulate negative values if the accumulator is less than zero). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3163\" rel=\"external nofollow noreferrer\">Aleksey Studnev</a></li>\n<li>Fixed how <code>Merge</code> tables work on top of <code>Distributed</code> tables when using <code>PREWHERE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3165\" rel=\"external nofollow noreferrer\">#3165</a></li>\n<li>Bug fixes in the <code>ALTER UPDATE</code> query.</li>\n<li>Fixed bugs in the <code>odbc</code> table function that appeared in version 18.12. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3197\" rel=\"external nofollow noreferrer\">#3197</a></li>\n<li>Fixed the operation of aggregate functions with <code>StateArray</code> combinators. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3188\" rel=\"external nofollow noreferrer\">#3188</a></li>\n<li>Fixed a crash when dividing a <code>Decimal</code> value by zero. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/69dd6609193beb4e7acd3e6ad216eca0ccfb8179\" rel=\"external nofoll");
            
            document.write("ow noreferrer\">69dd6609</a></li>\n<li>Fixed output of types for operations using <code>Decimal</code> and integer arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3224\" rel=\"external nofollow noreferrer\">#3224</a></li>\n<li>Fixed the segfault during <code>GROUP BY</code> on <code>Decimal128</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/3359ba06c39fcd05bfdb87d6c64154819621e13a\" rel=\"external nofollow noreferrer\">3359ba06</a></li>\n<li>The <code>log_query_threads</code> setting (logging information about each thread of query execution) now takes effect only if the <code>log_queries</code> option (logging information about queries) is set to 1. Since the <code>log_query_threads</code> option is enabled by default, information about threads was previously logged even if query logging was disabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3241\" rel=\"external nofollow noreferrer\">#3241</a></li>\n<li>Fixed an error in the distributed operation of the quantiles aggregate function (the error message <code>Not found column quantile...</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/commit/292a885533b8e3b41ce8993867069d14cbd5a664\" rel=\"external nofollow noreferrer\">292a8855</a></li>\n<li>Fixed the compatibility problem when working on a cluster of version 18.12.17 servers and older servers at the same time. For distributed queries with GROUP BY keys of both fixed and non-fixed length, if there was a large amount of data to aggregate, the returned data was not always fully aggregated (two different rows contained the same aggregation keys). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3254\" rel=\"external nofollow noreferrer\">#3254</a></li>\n<li>Fixed handling of substitutions in <code>clickhouse-performance-test</code>, if the query contains only part of the substitutions declared in the test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3263\" rel=\"external nofollow noreferrer\">#3263</a></li>\n<li>Fixed an error when using <code>FINAL</code> with <code>PREWHERE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3298\" rel=\"external nofollow noreferrer\">#3298</a></li>\n<li>Fixed an error when using <code>PREWHERE</code> over columns that were added during <code>ALTER</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3298\" rel=\"external nofollow noreferrer\">#3298</a></li>\n<li>Added a check for the absence of <code>arrayJoin</code> for <code>DEFAULT</code> and <code>MATERIALIZED</code> expressions. Previously, <code>arrayJoin</code> led to an error when inserting data. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3337\" rel=\"external nofollow noreferrer\">#3337</a></li>\n<li>Added a check for the absence of <code>arrayJoin</code> in a <code>PREWHERE</code> clause. Previously, this led to messages like <code>Size ... doesn't match</code> or <code>Unknown compression method</code> when executing queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3357\" rel=\"external nofollow noreferrer\">#3357</a></li>\n<li>Fixed segfault that could occur in rare cases after optimization that replaced AND chains from equality evaluations with the corresponding IN expression. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3339\" rel=\"external nofollow noreferrer\">liuyimin-bytedance</a></li>\n<li>Minor corrections to <code>clickhouse-benchmark</code>: previously, client information was not sent to the server; now the number of queries executed is calculated more accurately when shutting down and for limiting the number of iterations. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3351\" rel=\"external nofollow noreferrer\">#3351</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3352\" rel=\"external nofollow noreferrer\">#3352</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_4\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed the <code>allow_experimental_decimal_type</code> option. The <code>Decimal</code> data type is available for default use. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3329\" rel=\"external nofollow noreferrer\">#3329</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-12-17-2018-09-16\">ClickHouse release 18.12.17, 2018-09-16<a class=\"headerlink\" href=\"#clickhouse-release-18-12-17-2018-09-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_10\">New features:<a class=\"headerlink\" href=\"#new-features_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>invalidate_query</code> (the ability to specify a query to check whether an external dictionary needs to be updated) is implemented for the <code>clickhouse</code> source. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3126\" rel=\"external nofollow noreferrer\">#3126</a></li>\n<li>Added the ability to use <code>UInt*</code>, <code>Int*</code>, and <code>DateTime</code>  data types (along with the <code>Date</code> type) as a <code>range_hashed</code> external dictionary key that defines the boundaries of ranges. Now <code>NULL</code> can be used to designate an open range. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3123\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a></li>\n<li>The <code>Decimal</code> type now supports <code>var*</code> and <code>stddev*</code> aggregate functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3129\" rel=\"external nofollow noreferrer\">#3129</a></li>\n<li>The <code>Decimal</code> type now supports mathematical functions (<code>exp</code>, <code>sin</code> and so on.) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3129\" rel=\"external nofollow noreferrer\">#3129</a></li>\n<li>The <code>system.part_log</code> table now has the <code>partition_id</code> column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3089\" rel=\"external nofollow noreferrer\">#3089</a></li>\n</ul>\n<h4 id=\"bug-fixes_33\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_33\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>Merge</code> now works correctly on <code>Distributed</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3159\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed incompatibility (unnecessary dependency on the <code>glibc</code> version) that made it impossible to run ClickHouse on <code>Ubuntu Precise</code> and older versions. The incompatibility arose in version 18.12.13. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3130\" rel=\"external nofollow noreferrer\">#3130</a></li>\n<li>Fixed errors in the <code>enable_optimize_predicate_expression</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3107\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed a minor issue with backwards compatibility that appeared when working with a cluster of replicas on versions earlier than 18.12.13 and simultaneously creating a new replica of a table on a server with a newer version (shown in the message <code>Can not clone replica, because the ... updated to new ClickHouse version</code>, which is logical, but shouldn't happen). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3122\" rel=\"external nofollow noreferrer\">#3122</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_5\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The <code>enable_optimize_predicate_expression</code> option is enabled by default (which is rather optimistic). If query analysis errors occur that are related to searching for the column names, set <code>enable_optimize_predicate_expression</code> to 0. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3107\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-12-14-2018-09-13\">ClickHouse release 18.12.14, 2018-09-13<a class=\"headerlink\" href=\"#clickhouse-release-18-12-14-2018-09-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_11\">New features:<a class=\"headerlink\" href=\"#new-features_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for <code>ALTER UPDATE</code> queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3035\" rel=\"external nofollow noreferrer\">#3035</a></li>\n<li>Added the <code>allow_ddl</code> option, which restricts the user's access to DDL queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3104\" rel=\"external nofollow noreferrer\">#3104</a></li>\n<li>Added the <code>min_merge_bytes_to_use_direct_io</code> option for <code>MergeTree</code> engines, which allows you to set a threshold for the total size of the merge (when above the threshold, data part files will be handled using O_DIRECT). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3117\" rel=\"external nofollow noreferrer\">#3117</a></li>\n<li>The <code>system.merges</code> system table now contains the <code>partition_id</code> column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3099\" rel=\"external nofollow noreferrer\">#3099</a></li>\n</ul>\n<h4 id=\"improvements_10\">Improvements<a class=\"headerlink\" href=\"#improvements_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>If a data part remains unchanged during mutation, it isn't downloaded by replicas. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3103\" rel=\"external nofollow noreferrer\">#3103</a></li>\n<li>Autocomplete is available for names of settings when working with <code>clickhouse-client</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3106\" rel=\"external nofollow noreferrer\">#3106</a></li>\n</ul>\n<h4 id=\"bug-fixes_34\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_34\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added a check for the sizes of arrays that are elements of <code>Nested</code> type fields when inserting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3118\" rel=\"external nofollow noreferrer\">#3118</a></li>\n<li>Fixed an error updating external dictionaries with the <code>ODBC</code> source and <code>hashed</code> storage. This error occurred in version 18.12.13.</li>\n<li>Fixed a crash when creating a temporary table from a query with an <code>IN</code>");
            
            document.write(" condition. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3098\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed an error in aggregate functions for arrays that can have <code>NULL</code> elements. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3097\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-12-13-2018-09-10\">ClickHouse release 18.12.13, 2018-09-10<a class=\"headerlink\" href=\"#clickhouse-release-18-12-13-2018-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_12\">New features:<a class=\"headerlink\" href=\"#new-features_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>DECIMAL(digits, scale)</code> data type (<code>Decimal32(scale)</code>, <code>Decimal64(scale)</code>, <code>Decimal128(scale)</code>). To enable it, use the setting <code>allow_experimental_decimal_type</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2846\" rel=\"external nofollow noreferrer\">#2846</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2970\" rel=\"external nofollow noreferrer\">#2970</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3008\" rel=\"external nofollow noreferrer\">#3008</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3047\" rel=\"external nofollow noreferrer\">#3047</a></li>\n<li>New <code>WITH ROLLUP</code> modifier for <code>GROUP BY</code> (alternative syntax: <code>GROUP BY ROLLUP(...)</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2948\" rel=\"external nofollow noreferrer\">#2948</a></li>\n<li>In queries with JOIN, the star character expands to a list of columns in all tables, in compliance with the SQL standard. You can restore the old behavior by setting <code>asterisk_left_columns_only</code> to 1 on the user configuration level. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2787\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Added support for JOIN with table functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2907\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Autocomplete by pressing Tab in clickhouse-client. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2447\" rel=\"external nofollow noreferrer\">Sergey Shcherbin</a></li>\n<li>Ctrl+C in clickhouse-client clears a query that was entered. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2877\" rel=\"external nofollow noreferrer\">#2877</a></li>\n<li>Added the <code>join_default_strictness</code> setting (values: <code>\"</code>, <code>'any'</code>, <code>'all'</code>). This allows you to not specify <code>ANY</code> or <code>ALL</code> for <code>JOIN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2982\" rel=\"external nofollow noreferrer\">#2982</a></li>\n<li>Each line of the server log related to query processing shows the query ID. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>Now you can get query execution logs in clickhouse-client (use the <code>send_logs_level</code> setting). With distributed query processing, logs are cascaded from all the servers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>The <code>system.query_log</code> and <code>system.processes</code> (<code>SHOW PROCESSLIST</code>) tables now have information about all changed settings when you run a query (the nested structure of the <code>Settings</code> data). Added the <code>log_query_settings</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>The <code>system.query_log</code> and <code>system.processes</code> tables now show information about the number of threads that are participating in query execution (see the <code>thread_numbers</code> column). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>Added <code>ProfileEvents</code> counters that measure the time spent on reading and writing over the network and reading and writing to disk, the number of network errors, and the time spent waiting when network bandwidth is limited. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>Added <code>ProfileEvents</code>counters that contain the system metrics from rusage (you can use them to get information about CPU usage in userspace and the kernel, page faults, and context switches), as well as taskstats metrics (use these to obtain information about I/O wait time, CPU wait time, and the amount of data read and recorded, both with and without page cache). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>The <code>ProfileEvents</code> counters are applied globally and for each query, as well as for each query execution thread, which allows you to profile resource consumption by query  in detail. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>Added the <code>system.query_thread_log</code> table, which contains information about each query execution thread. Added the <code>log_query_threads</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>The <code>system.metrics</code> and <code>system.events</code> tables now have built-in documentation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3016\" rel=\"external nofollow noreferrer\">#3016</a></li>\n<li>Added the <code>arrayEnumerateDense</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2975\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the <code>arrayCumSumNonNegative</code> and <code>arrayDifference</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2942\" rel=\"external nofollow noreferrer\">Aleksey Studnev</a></li>\n<li>Added the <code>retention</code> aggregate function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2887\" rel=\"external nofollow noreferrer\">Sundy Li</a></li>\n<li>Now you can add (merge) states of aggregate functions by using the plus operator, and multiply the states of aggregate functions by a nonnegative constant. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3062\" rel=\"external nofollow noreferrer\">#3062</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3034\" rel=\"external nofollow noreferrer\">#3034</a></li>\n<li>Tables in the MergeTree family now have the virtual column <code>_partition_id</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3089\" rel=\"external nofollow noreferrer\">#3089</a></li>\n</ul>\n<h4 id=\"experimental-features_5\">Experimental features:<a class=\"headerlink\" href=\"#experimental-features_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>LowCardinality(T)</code> data type. This data type automatically creates a local dictionary of values and allows data processing without unpacking the dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2830\" rel=\"external nofollow noreferrer\">#2830</a></li>\n<li>Added a cache of JIT-compiled functions and a counter for the number of uses before compiling. To JIT compile expressions, enable the <code>compile_expressions</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2990\" rel=\"external nofollow noreferrer\">#2990</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3077\" rel=\"external nofollow noreferrer\">#3077</a></li>\n</ul>\n<h4 id=\"improvements_11\">Improvements:<a class=\"headerlink\" href=\"#improvements_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the problem with unlimited accumulation of the replication log when there are abandoned replicas. Added an effective recovery mode for replicas with a long lag.</li>\n<li>Improved performance of <code>GROUP BY</code> with multiple aggregation fields when one of them is string and the others are fixed length.</li>\n<li>Improved performance when using <code>PREWHERE</code> and with implicit transfer of expressions in <code>PREWHERE</code>.</li>\n<li>Improved parsing performance for text formats (<code>CSV</code>, <code>TSV</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2977\" rel=\"external nofollow noreferrer\">Amos Bird</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2980\" rel=\"external nofollow noreferrer\">#2980</a></li>\n<li>Improved performance of reading strings and arrays in binary formats. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2955\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Increased performance and reduced memory consumption for queries to <code>system.tables</code> and <code>system.columns</code> when there is a very large number of tables on a single server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2953\" rel=\"external nofollow noreferrer\">#2953</a></li>\n<li>Fixed a performance problem in the case of a large stream of queries that result in an error (the <code>_dl_addr</code> function is visible in <code>perf top</code>, but the server isn't using much CPU). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2938\" rel=\"external nofollow noreferrer\">#2938</a></li>\n<li>Conditions are cast into the View (when <code>enable_optimize_predicate_expression</code> is enabled). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2907\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Improvements to the functionality for the <code>UUID</code> data type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3074\" rel=\"external nofollow noreferrer\">#3074</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2985\" rel=\"external nofollow noreferrer\">#2985</a></li>\n<li>The <code>UUID</code> data type is supported in The-Alchemist dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2822\" rel=\"external nofollow noreferrer\">#2822</a></li>\n<li>The <code>visitParamExtractRaw</code> function works correctly with nested structures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2974\" rel=\"external nofollow noreferrer");
            
            document.write("\">Winter Zhang</a></li>\n<li>When the <code>input_format_skip_unknown_fields</code> setting is enabled, object fields in <code>JSONEachRow</code> format are skipped correctly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2958\" rel=\"external nofollow noreferrer\">BlahGeek</a></li>\n<li>For a <code>CASE</code> expression with conditions, you can now omit <code>ELSE</code>, which is equivalent to <code>ELSE NULL</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2920\" rel=\"external nofollow noreferrer\">#2920</a></li>\n<li>The operation timeout can now be configured when working with ZooKeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2971\" rel=\"external nofollow noreferrer\">urykhy</a></li>\n<li>You can specify an offset for <code>LIMIT n, m</code> as <code>LIMIT n OFFSET m</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2840\" rel=\"external nofollow noreferrer\">#2840</a></li>\n<li>You can use the <code>SELECT TOP n</code> syntax as an alternative for <code>LIMIT</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2840\" rel=\"external nofollow noreferrer\">#2840</a></li>\n<li>Increased the size of the queue to write to system tables, so the <code>SystemLog parameter queue is full</code> error doesn't happen as often.</li>\n<li>The <code>windowFunnel</code> aggregate function now supports events that meet multiple conditions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2801\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Duplicate columns can be used in a <code>USING</code> clause for <code>JOIN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3006\" rel=\"external nofollow noreferrer\">#3006</a></li>\n<li><code>Pretty</code> formats now have a limit on column alignment by width. Use the <code>output_format_pretty_max_column_pad_width</code> setting. If a value is wider, it will still be displayed in its entirety, but the other cells in the table will not be too wide. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3003\" rel=\"external nofollow noreferrer\">#3003</a></li>\n<li>The <code>odbc</code> table function now allows you to specify the database/schema name. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2885\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the ability to use a username specified in the <code>clickhouse-client</code> config file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2909\" rel=\"external nofollow noreferrer\">Vladimir Kozbin</a></li>\n<li>The <code>ZooKeeperExceptions</code> counter has been split into three counters: <code>ZooKeeperUserExceptions</code>, <code>ZooKeeperHardwareExceptions</code>, and <code>ZooKeeperOtherExceptions</code>.</li>\n<li><code>ALTER DELETE</code> queries work for materialized views.</li>\n<li>Added randomization when running the cleanup thread periodically for <code>ReplicatedMergeTree</code> tables in order to avoid periodic load spikes when there are a very large number of <code>ReplicatedMergeTree</code> tables.</li>\n<li>Support for <code>ATTACH TABLE ... ON CLUSTER</code> queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3025\" rel=\"external nofollow noreferrer\">#3025</a></li>\n</ul>\n<h4 id=\"bug-fixes_35\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_35\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an issue with <code>Dictionary</code> tables (throws the <code>Size of offsets doesn't match size of column</code> or <code>Unknown compression method</code> exception). This bug appeared in version 18.10.3. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2913\" rel=\"external nofollow noreferrer\">#2913</a></li>\n<li>Fixed a bug when merging <code>CollapsingMergeTree</code> tables if one of the data parts is empty (these parts are formed during merge or <code>ALTER DELETE</code> if all data was deleted), and the <code>vertical</code> algorithm was used for the merge. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3049\" rel=\"external nofollow noreferrer\">#3049</a></li>\n<li>Fixed a race condition during <code>DROP</code> or <code>TRUNCATE</code> for <code>Memory</code> tables with a simultaneous <code>SELECT</code>, which could lead to server crashes. This bug appeared in version 1.1.54388. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3038\" rel=\"external nofollow noreferrer\">#3038</a></li>\n<li>Fixed the possibility of data loss when inserting in <code>Replicated</code> tables if the <code>Session is expired</code> error is returned (data loss can be detected by the <code>ReplicatedDataLoss</code> metric). This error occurred in version 1.1.54378. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2939\" rel=\"external nofollow noreferrer\">#2939</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2949\" rel=\"external nofollow noreferrer\">#2949</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2964\" rel=\"external nofollow noreferrer\">#2964</a></li>\n<li>Fixed a segfault during <code>JOIN ... ON</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3000\" rel=\"external nofollow noreferrer\">#3000</a></li>\n<li>Fixed the error searching column names when the <code>WHERE</code> expression consists entirely of a qualified column name, such as <code>WHERE table.column</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2994\" rel=\"external nofollow noreferrer\">#2994</a></li>\n<li>Fixed the \"Not found column\" error that occurred when executing distributed queries if a single column consisting of an IN expression with a subquery is requested from a remote server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3087\" rel=\"external nofollow noreferrer\">#3087</a></li>\n<li>Fixed the <code>Block structure mismatch in UNION stream: different number of columns</code> error that occurred for distributed queries if one of the shards is local and the other is not, and optimization of the move to <code>PREWHERE</code> is triggered. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2226\" rel=\"external nofollow noreferrer\">#2226</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3037\" rel=\"external nofollow noreferrer\">#3037</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3055\" rel=\"external nofollow noreferrer\">#3055</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3065\" rel=\"external nofollow noreferrer\">#3065</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3073\" rel=\"external nofollow noreferrer\">#3073</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3090\" rel=\"external nofollow noreferrer\">#3090</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3093\" rel=\"external nofollow noreferrer\">#3093</a></li>\n<li>Fixed the <code>pointInPolygon</code> function for certain cases of non-convex polygons. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2910\" rel=\"external nofollow noreferrer\">#2910</a></li>\n<li>Fixed the incorrect result when comparing <code>nan</code> with integers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3024\" rel=\"external nofollow noreferrer\">#3024</a></li>\n<li>Fixed an error in the <code>zlib-ng</code> library that could lead to segfault in rare cases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2854\" rel=\"external nofollow noreferrer\">#2854</a></li>\n<li>Fixed a memory leak when inserting into a table with <code>AggregateFunction</code> columns, if the state of the aggregate function is not simple (allocates memory separately), and if a single insertion request results in multiple small blocks. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3084\" rel=\"external nofollow noreferrer\">#3084</a></li>\n<li>Fixed a race condition when creating and deleting the same <code>Buffer</code> or <code>MergeTree</code> table simultaneously.</li>\n<li>Fixed the possibility of a segfault when comparing tuples made up of certain non-trivial types, such as tuples. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2989\" rel=\"external nofollow noreferrer\">#2989</a></li>\n<li>Fixed the possibility of a segfault when running certain <code>ON CLUSTER</code> queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2960\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed an error in the <code>arrayDistinct</code> function for <code>Nullable</code> array elements. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2845\" rel=\"external nofollow noreferrer\">#2845</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2937\" rel=\"external nofollow noreferrer\">#2937</a></li>\n<li>The <code>enable_optimize_predicate_expression</code> option now correctly supports cases with <code>SELECT *</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2929\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed the segfault when re-initializing the ZooKeeper session. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2917\" rel=\"external nofollow noreferrer\">#2917</a></li>\n<li>Fixed potential blocking when working with ZooKeeper.</li>\n<li>Fixed incorrect code for adding nested data structures in a <code>SummingMergeTree</code>.</li>\n<li>When allocating memory for states of aggregate functions, alignment is correctly taken into account, which makes it possible to use operations that require alignment when implementing states of aggregate functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2808\" rel=\"external nofollow noreferrer\">chenxing-xc</a></li>\n</ul>\n<h4 id=\"security-fix_4\">Security fix:<a class=\"headerlink\" href=\"#security-fix_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Safe use of ODBC data sources. Interaction with ODBC drivers uses a separate <code>clickhouse-odbc-bridge</code> process. Errors in third-party ODBC drivers no longer cause problems with server stability or vulnerabilities. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2828\" rel=\"external nofollow noreferrer\">#2828</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2879\" rel=\"external nofollow noreferrer\">#2879</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2886\" rel=\"external nofollow noreferrer\">#2886</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2893\" rel=\"ext");
            
            document.write("ernal nofollow noreferrer\">#2893</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2921\" rel=\"external nofollow noreferrer\">#2921</a></li>\n<li>Fixed incorrect validation of the file path in the <code>catBoostPool</code> table function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2894\" rel=\"external nofollow noreferrer\">#2894</a></li>\n<li>The contents of system tables (<code>tables</code>, <code>databases</code>, <code>parts</code>, <code>columns</code>, <code>parts_columns</code>, <code>merges</code>, <code>mutations</code>, <code>replicas</code>, and <code>replication_queue</code>) are filtered according to the user's configured access to databases (<code>allow_databases</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2856\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_6\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>In queries with JOIN, the star character expands to a list of columns in all tables, in compliance with the SQL standard. You can restore the old behavior by setting <code>asterisk_left_columns_only</code> to 1 on the user configuration level.</li>\n</ul>\n<h4 id=\"build-changes_2\">Build changes:<a class=\"headerlink\" href=\"#build-changes_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Most integration tests can now be run by commit.</li>\n<li>Code style checks can also be run by commit.</li>\n<li>The <code>memcpy</code> implementation is chosen correctly when building on CentOS7/Fedora. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2912\" rel=\"external nofollow noreferrer\">Etienne Champetier</a></li>\n<li>When using clang to build, some warnings from <code>-Weverything</code> have been added, in addition to the regular <code>-Wall-Wextra -Werror</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2957\" rel=\"external nofollow noreferrer\">#2957</a></li>\n<li>Debugging the build uses the <code>jemalloc</code> debug option.</li>\n<li>The interface of the library for interacting with ZooKeeper is declared abstract. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2950\" rel=\"external nofollow noreferrer\">#2950</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-10-3-2018-08-13\">ClickHouse release 18.10.3, 2018-08-13<a class=\"headerlink\" href=\"#clickhouse-release-18-10-3-2018-08-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_13\">New features:<a class=\"headerlink\" href=\"#new-features_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>HTTPS can be used for replication. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2760\" rel=\"external nofollow noreferrer\">#2760</a></li>\n<li>Added the functions <code>murmurHash2_64</code>, <code>murmurHash3_32</code>, <code>murmurHash3_64</code>, and <code>murmurHash3_128</code> in addition to the existing <code>murmurHash2_32</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2791\" rel=\"external nofollow noreferrer\">#2791</a></li>\n<li>Support for Nullable types in the ClickHouse ODBC driver (<code>ODBCDriver2</code> output format). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2834\" rel=\"external nofollow noreferrer\">#2834</a></li>\n<li>Support for <code>UUID</code> in the key columns.</li>\n</ul>\n<h4 id=\"improvements_12\">Improvements:<a class=\"headerlink\" href=\"#improvements_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Clusters can be removed without restarting the server when they are deleted from the config files. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2777\" rel=\"external nofollow noreferrer\">#2777</a></li>\n<li>External dictionaries can be removed without restarting the server when they are removed from config files. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2779\" rel=\"external nofollow noreferrer\">#2779</a></li>\n<li>Added <code>SETTINGS</code> support for the <code>Kafka</code> table engine. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2781\" rel=\"external nofollow noreferrer\">Alexander Marshalov</a></li>\n<li>Improvements for the <code>UUID</code> data type (not yet complete). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2618\" rel=\"external nofollow noreferrer\">#2618</a></li>\n<li>Support for empty parts after merges in the <code>SummingMergeTree</code>, <code>CollapsingMergeTree</code> and <code>VersionedCollapsingMergeTree</code> engines. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2815\" rel=\"external nofollow noreferrer\">#2815</a></li>\n<li>Old records of completed mutations are deleted (<code>ALTER DELETE</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2784\" rel=\"external nofollow noreferrer\">#2784</a></li>\n<li>Added the <code>system.merge_tree_settings</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2841\" rel=\"external nofollow noreferrer\">Kirill Shvakov</a></li>\n<li>The <code>system.tables</code> table now has dependency columns: <code>dependencies_database</code> and <code>dependencies_table</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2851\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Added the <code>max_partition_size_to_drop</code> config option. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2782\" rel=\"external nofollow noreferrer\">#2782</a></li>\n<li>Added the <code>output_format_json_escape_forward_slashes</code> option. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2812\" rel=\"external nofollow noreferrer\">Alexander Bocharov</a></li>\n<li>Added the <code>max_fetch_partition_retries_count</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2831\" rel=\"external nofollow noreferrer\">#2831</a></li>\n<li>Added the <code>prefer_localhost_replica</code> setting for disabling the preference for a local replica and going to a local replica without inter-process interaction. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2832\" rel=\"external nofollow noreferrer\">#2832</a></li>\n<li>The <code>quantileExact</code> aggregate function returns <code>nan</code> in the case of aggregation on an empty <code>Float32</code> or <code>Float64</code> set. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2855\" rel=\"external nofollow noreferrer\">Sundy Li</a></li>\n</ul>\n<h4 id=\"bug-fixes_36\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_36\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed unnecessary escaping of the connection string parameters for ODBC, which made it impossible to establish a connection. This error occurred in version 18.6.0.</li>\n<li>Fixed the logic for processing <code>REPLACE PARTITION</code> commands in the replication queue. If there are two <code>REPLACE</code> commands for the same partition, the incorrect logic could cause one of them to remain in the replication queue and not be executed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2814\" rel=\"external nofollow noreferrer\">#2814</a></li>\n<li>Fixed a merge bug when all data parts were empty (parts that were formed from a merge or from <code>ALTER DELETE</code> if all data was deleted). This bug appeared in version 18.1.0. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2930\" rel=\"external nofollow noreferrer\">#2930</a></li>\n<li>Fixed an error for concurrent <code>Set</code> or <code>Join</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2823\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Fixed the <code>Block structure mismatch in UNION stream: different number of columns</code> error that occurred for <code>UNION ALL</code> queries inside a sub-query if one of the <code>SELECT</code> queries contains duplicate column names. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2094\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed a memory leak if an exception occurred when connecting to a MySQL server.</li>\n<li>Fixed incorrect clickhouse-client response code in case of a query error.</li>\n<li>Fixed incorrect behavior of materialized views containing DISTINCT. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2795\" rel=\"external nofollow noreferrer\">#2795</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_7\">Backward incompatible changes<a class=\"headerlink\" href=\"#backward-incompatible-changes_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed support for CHECK TABLE queries for Distributed tables.</li>\n</ul>\n<h4 id=\"build-changes_3\">Build changes:<a class=\"headerlink\" href=\"#build-changes_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The allocator has been replaced: <code>jemalloc</code> is now used instead of <code>tcmalloc</code>. In some scenarios, this increases speed up to 20%. However, there are queries that have slowed by up to 20%. Memory consumption has been reduced by approximately 10% in some scenarios, with improved stability. With highly competitive loads, CPU usage in userspace and in system shows just a slight increase. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2773\" rel=\"external nofollow noreferrer\">#2773</a></li>\n<li>Use of libressl from a submodule. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/1983\" rel=\"external nofollow noreferrer\">#1983</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2807\" rel=\"external nofollow noreferrer\">#2807</a></li>\n<li>Use of unixodbc from a submodule. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2789\" rel=\"external nofollow noreferrer\">#2789</a></li>\n<li>Use of mariadb-connector-c from a submodule. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2785\" rel=\"external nofollow noreferrer\">#2785</a></li>\n<li>Added functional test files to the repository that depend on the availability of test data (for the time being, without the test data itself).</li>\n</ul>\n<h3 id=\"clickhouse-release-18-6-0-2018-08-02\">ClickHouse release 18.6.0, 2018-08-02<a class=\"headerlink\" href=\"#clickhouse-release-18-6-0-2018-08-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_14\">New features:<a class=\"headerlink\" href=\"#new-features_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for ON expressions for the JOIN ON syntax:<br />\n<co");
            
            document.write("de>JOIN ON Expr([table.]column ...) = Expr([table.]column, ...) [AND Expr([table.]column, ...) = Expr([table.]column, ...) ...]</code><br />\nThe expression must be a chain of equalities joined by the AND operator. Each side of the equality can be an arbitrary expression over the columns of one of the tables. The use of fully qualified column names is supported (<code>table.name</code>, <code>database.table.name</code>, <code>table_alias.name</code>, <code>subquery_alias.name</code>) for the right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2742\" rel=\"external nofollow noreferrer\">#2742</a></li>\n<li>HTTPS can be enabled for replication. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2760\" rel=\"external nofollow noreferrer\">#2760</a></li>\n</ul>\n<h4 id=\"improvements_13\">Improvements:<a class=\"headerlink\" href=\"#improvements_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The server passes the patch component of its version to the client. Data about the patch version component is in <code>system.processes</code> and <code>query_log</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2646\" rel=\"external nofollow noreferrer\">#2646</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-5-1-2018-07-31\">ClickHouse release 18.5.1, 2018-07-31<a class=\"headerlink\" href=\"#clickhouse-release-18-5-1-2018-07-31\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_15\">New features:<a class=\"headerlink\" href=\"#new-features_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the hash function <code>murmurHash2_32</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2756\" rel=\"external nofollow noreferrer\">#2756</a>.</li>\n</ul>\n<h4 id=\"improvements_14\">Improvements:<a class=\"headerlink\" href=\"#improvements_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Now you can use the <code>from_env</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2741\" rel=\"external nofollow noreferrer\">#2741</a> attribute to set values in config files from environment variables.</li>\n<li>Added case-insensitive versions of the <code>coalesce</code>, <code>ifNull</code>, and <code>nullIf functions</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2752\" rel=\"external nofollow noreferrer\">#2752</a>.</li>\n</ul>\n<h4 id=\"bug-fixes_37\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_37\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a possible bug when starting a replica <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2759\" rel=\"external nofollow noreferrer\">#2759</a>.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-4-0-2018-07-28\">ClickHouse release 18.4.0, 2018-07-28<a class=\"headerlink\" href=\"#clickhouse-release-18-4-0-2018-07-28\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_16\">New features:<a class=\"headerlink\" href=\"#new-features_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added system tables: <code>formats</code>, <code>data_type_families</code>, <code>aggregate_function_combinators</code>, <code>table_functions</code>, <code>table_engines</code>, <code>collations</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2721\" rel=\"external nofollow noreferrer\">#2721</a>.</li>\n<li>Added the ability to use a table function instead of a table as an argument of a <code>remote</code> or <code>cluster table function</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2708\" rel=\"external nofollow noreferrer\">#2708</a>.</li>\n<li>Support for <code>HTTP Basic</code> authentication in the replication protocol <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2727\" rel=\"external nofollow noreferrer\">#2727</a>.</li>\n<li>The <code>has</code> function now allows searching for a numeric value in an array of <code>Enum</code> values <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2699\" rel=\"external nofollow noreferrer\">Maxim Khrisanfov</a>.</li>\n<li>Support for adding arbitrary message separators when reading from <code>Kafka</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2701\" rel=\"external nofollow noreferrer\">Amos Bird</a>.</li>\n</ul>\n<h4 id=\"improvements_15\">Improvements:<a class=\"headerlink\" href=\"#improvements_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The <code>ALTER TABLE t DELETE WHERE</code> query does not rewrite data parts that were not affected by the WHERE condition <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2694\" rel=\"external nofollow noreferrer\">#2694</a>.</li>\n<li>The <code>use_minimalistic_checksums_in_zookeeper</code> option for <code>ReplicatedMergeTree</code> tables is enabled by default. This setting was added in version 1.1.54378, 2018-04-16. Versions that are older than 1.1.54378 can no longer be installed.</li>\n<li>Support for running <code>KILL</code> and <code>OPTIMIZE</code> queries that specify <code>ON CLUSTER</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2689\" rel=\"external nofollow noreferrer\">Winter Zhang</a>.</li>\n</ul>\n<h4 id=\"bug-fixes_38\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_38\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the error <code>Column ... is not under an aggregate function and not in GROUP BY</code> for aggregation with an IN expression. This bug appeared in version 18.1.0. (<a href=\"https://github.com/ClickHouse/ClickHouse/commit/bbdd780be0be06a0f336775941cdd536878dd2c2\" rel=\"external nofollow noreferrer\">bbdd780b</a>)</li>\n<li>Fixed a bug in the <code>windowFunnel aggregate function</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2735\" rel=\"external nofollow noreferrer\">Winter Zhang</a>.</li>\n<li>Fixed a bug in the <code>anyHeavy</code>  aggregate function (<a href=\"https://github.com/ClickHouse/ClickHouse/commit/a2101df25a6a0fba99aa71f8793d762af2b801ee\" rel=\"external nofollow noreferrer\">a2101df2</a>)</li>\n<li>Fixed server crash when using the <code>countArray()</code> aggregate function.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_8\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Parameters for <code>Kafka</code> engine was changed from <code>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_schema, kafka_num_consumers])</code> to <code>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_row_delimiter, kafka_schema, kafka_num_consumers])</code>. If your tables use <code>kafka_schema</code> or <code>kafka_num_consumers</code> parameters, you have to manually edit the metadata files <code>path/metadata/database/table.sql</code> and add <code>kafka_row_delimiter</code> parameter with <code>''</code> value.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-1-0-2018-07-23\">ClickHouse release 18.1.0, 2018-07-23<a class=\"headerlink\" href=\"#clickhouse-release-18-1-0-2018-07-23\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_17\">New features:<a class=\"headerlink\" href=\"#new-features_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Support for the <code>ALTER TABLE t DELETE WHERE</code> query for non-replicated MergeTree tables (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2634\" rel=\"external nofollow noreferrer\">#2634</a>).</li>\n<li>Support for arbitrary types for the <code>uniq*</code> family of aggregate functions (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2010\" rel=\"external nofollow noreferrer\">#2010</a>).</li>\n<li>Support for arbitrary types in comparison operators (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2026\" rel=\"external nofollow noreferrer\">#2026</a>).</li>\n<li>The <code>users.xml</code> file allows setting a subnet mask in the format <code>10.0.0.1/255.255.255.0</code>. This is necessary for using masks for IPv6 networks with zeros in the middle (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2637\" rel=\"external nofollow noreferrer\">#2637</a>).</li>\n<li>Added the <code>arrayDistinct</code> function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2670\" rel=\"external nofollow noreferrer\">#2670</a>).</li>\n<li>The SummingMergeTree engine can now work with AggregateFunction type columns (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2566\" rel=\"external nofollow noreferrer\">Constantin S. Pan</a>).</li>\n</ul>\n<h4 id=\"improvements_16\">Improvements:<a class=\"headerlink\" href=\"#improvements_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Changed the numbering scheme for release versions. Now the first part contains the year of release (A.D., Moscow timezone, minus 2000), the second part contains the number for major changes (increases for most releases), and the third part is the patch version. Releases are still backwards compatible, unless otherwise stated in the changelog.</li>\n<li>Faster conversions of floating-point numbers to a string (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2664\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n<li>If some rows were skipped during an insert due to parsing errors (this is possible with the <code>input_allow_errors_num</code> and <code>input_allow_errors_ratio</code> settings enabled), the number of skipped rows is now written to the server log (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2669\" rel=\"external nofollow noreferrer\">Leonardo Cecchi</a>).</li>\n</ul>\n<h4 id=\"bug-fixes_39\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_39\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the TRUNCATE command for temporary tables (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2624\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n<li>Fixed a rare deadlock in the ZooKeeper client library that occurred when there was a network error while reading the response (<a href=\"https://github.com/ClickHouse/ClickHouse/commit/c315200e64b87e44bdf740707fc857d1fdf7e947\" rel=\"external nofollow noreferrer\">c315200</a>).</li>\n<li>Fixed an error during a CAST to Nullable types (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/1322\" rel=\"external nofollow noreferrer\">#1322</a>).</li>\n<li>Fixed the incorrect result of the <code>maxIntersection()</code> function when the boundaries of intervals coincided (<a href=\"https://github.com/C");
            
            document.write("lickHouse/ClickHouse/pull/2657\" rel=\"external nofollow noreferrer\">Michael Furmur</a>).</li>\n<li>Fixed incorrect transformation of the OR expression chain in a function argument (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2663\" rel=\"external nofollow noreferrer\">chenxing-xc</a>).</li>\n<li>Fixed performance degradation for queries containing <code>IN (subquery)</code> expressions inside another subquery (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2571\" rel=\"external nofollow noreferrer\">#2571</a>).</li>\n<li>Fixed incompatibility between servers with different versions in distributed queries that use a <code>CAST</code> function that isn't in uppercase letters (<a href=\"https://github.com/ClickHouse/ClickHouse/commit/fe8c4d64e434cacd4ceef34faa9005129f2190a5\" rel=\"external nofollow noreferrer\">fe8c4d6</a>).</li>\n<li>Added missing quoting of identifiers for queries to an external DBMS (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2635\" rel=\"external nofollow noreferrer\">#2635</a>).</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_9\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Converting a string containing the number zero to DateTime does not work. Example: <code>SELECT toDateTime('0')</code>. This is also the reason that <code>DateTime DEFAULT '0'</code> does not work in tables, as well as <code>&lt;null_value&gt;0&lt;/null_value&gt;</code> in dictionaries. Solution: replace <code>0</code> with <code>0000-00-00 00:00:00</code>.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54394-2018-07-12\">ClickHouse release 1.1.54394, 2018-07-12<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54394-2018-07-12\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_18\">New features:<a class=\"headerlink\" href=\"#new-features_18\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>histogram</code> aggregate function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2521\" rel=\"external nofollow noreferrer\">Mikhail Surin</a>).</li>\n<li>Now <code>OPTIMIZE TABLE ... FINAL</code> can be used without specifying partitions for <code>ReplicatedMergeTree</code> (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2600\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n</ul>\n<h4 id=\"bug-fixes_40\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_40\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a problem with a very small timeout for sockets (one second) for reading and writing when sending and downloading replicated data, which made it impossible to download larger parts if there is a load on the network or disk (it resulted in cyclical attempts to download parts). This error occurred in version 1.1.54388.</li>\n<li>Fixed issues when using chroot in ZooKeeper if you inserted duplicate data blocks in the table.</li>\n<li>The <code>has</code> function now works correctly for an array with Nullable elements (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2115\" rel=\"external nofollow noreferrer\">#2115</a>).</li>\n<li>The <code>system.tables</code> table now works correctly when used in distributed queries. The <code>metadata_modification_time</code> and <code>engine_full</code> columns are now non-virtual. Fixed an error that occurred if only these columns were queried from the table.</li>\n<li>Fixed how an empty <code>TinyLog</code> table works after inserting an empty data block (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2563\" rel=\"external nofollow noreferrer\">#2563</a>).</li>\n<li>The <code>system.zookeeper</code> table works if the value of the node in ZooKeeper is NULL.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54390-2018-07-06\">ClickHouse release 1.1.54390, 2018-07-06<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54390-2018-07-06\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_19\">New features:<a class=\"headerlink\" href=\"#new-features_19\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Queries can be sent in <code>multipart/form-data</code> format (in the <code>query</code> field), which is useful if external data is also sent for query processing (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2490\" rel=\"external nofollow noreferrer\">Olga Hvostikova</a>).</li>\n<li>Added the ability to enable or disable processing single or double quotes when reading data in CSV format. You can configure this in the <code>format_csv_allow_single_quotes</code> and <code>format_csv_allow_double_quotes</code> settings (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2574\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n<li>Now <code>OPTIMIZE TABLE ... FINAL</code> can be used without specifying the partition for non-replicated variants of <code>MergeTree</code> (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2599\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n</ul>\n<h4 id=\"improvements_17\">Improvements:<a class=\"headerlink\" href=\"#improvements_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improved performance, reduced memory consumption, and correct memory consumption tracking with use of the IN operator when a table index could be used (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2584\" rel=\"external nofollow noreferrer\">#2584</a>).</li>\n<li>Removed redundant checking of checksums when adding a data part. This is important when there are a large number of replicas, because in these cases the total number of checks was equal to N^2.</li>\n<li>Added support for <code>Array(Tuple(...))</code>  arguments for the <code>arrayEnumerateUniq</code> function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2573\" rel=\"external nofollow noreferrer\">#2573</a>).</li>\n<li>Added <code>Nullable</code> support for the <code>runningDifference</code> function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2594\" rel=\"external nofollow noreferrer\">#2594</a>).</li>\n<li>Improved query analysis performance when there is a very large number of expressions (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2572\" rel=\"external nofollow noreferrer\">#2572</a>).</li>\n<li>Faster selection of data parts for merging in <code>ReplicatedMergeTree</code> tables. Faster recovery of the ZooKeeper session (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2597\" rel=\"external nofollow noreferrer\">#2597</a>).</li>\n<li>The <code>format_version.txt</code> file for <code>MergeTree</code> tables is re-created if it is missing, which makes sense if ClickHouse is launched after copying the directory structure without files (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2593\" rel=\"external nofollow noreferrer\">Ciprian Hacman</a>).</li>\n</ul>\n<h4 id=\"bug-fixes_41\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_41\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a bug when working with ZooKeeper that could make it impossible to recover the session and readonly states of tables before restarting the server.</li>\n<li>Fixed a bug when working with ZooKeeper that could result in old nodes not being deleted if the session is interrupted.</li>\n<li>Fixed an error in the <code>quantileTDigest</code> function for Float arguments (this bug was introduced in version 1.1.54388) (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2553\" rel=\"external nofollow noreferrer\">Mikhail Surin</a>).</li>\n<li>Fixed a bug in the index for MergeTree tables if the primary key column is located inside the function for converting types between signed and unsigned integers of the same size (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2603\" rel=\"external nofollow noreferrer\">#2603</a>).</li>\n<li>Fixed segfault if <code>macros</code> are used but they aren't in the config file (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2570\" rel=\"external nofollow noreferrer\">#2570</a>).</li>\n<li>Fixed switching to the default database when reconnecting the client (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2583\" rel=\"external nofollow noreferrer\">#2583</a>).</li>\n<li>Fixed a bug that occurred when the <code>use_index_for_in_with_subqueries</code> setting was disabled.</li>\n</ul>\n<h4 id=\"security-fix_5\">Security fix:<a class=\"headerlink\" href=\"#security-fix_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Sending files is no longer possible when connected to MySQL (<code>LOAD DATA LOCAL INFILE</code>).</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54388-2018-06-28\">ClickHouse release 1.1.54388, 2018-06-28<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54388-2018-06-28\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_20\">New features:<a class=\"headerlink\" href=\"#new-features_20\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Support for the <code>ALTER TABLE t DELETE WHERE</code> query for replicated tables. Added the <code>system.mutations</code> table to track progress of this type of queries.</li>\n<li>Support for the <code>ALTER TABLE t [REPLACE|ATTACH] PARTITION</code> query for *MergeTree tables.</li>\n<li>Support for the <code>TRUNCATE TABLE</code> query (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2260\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Several new <code>SYSTEM</code> queries for replicated tables (<code>RESTART REPLICAS</code>, <code>SYNC REPLICA</code>, <code>[STOP|START] [MERGES|FETCHES|SENDS REPLICATED|REPLICATION QUEUES]</code>).</li>\n<li>Added the ability to write to a table with the MySQL engine and the corresponding table function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2294\" rel=\"external nofollow noreferrer\">sundy-li</a>).</li>\n<li>Added the <code>url()</code> table function and the <code>URL</code> table engine (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2501\" rel=\"external nofollow noreferrer\">Alexander Sapin</a>).</li>\n<li>Added the <code>windowFunnel</code>  aggregate function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2352\" rel=\"external nofollow noreferrer\">sundy-li</a>).</li>\n<li>New <code>startsWith</code> and <code>endsWith</code> functions for strings (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2429\" rel=\"external no");
            
            document.write("follow noreferrer\">Vadim Plakhtinsky</a>).</li>\n<li>The <code>numbers()</code> table function now allows you to specify the offset (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2535\" rel=\"external nofollow noreferrer\">Winter Zhang</a>).</li>\n<li>The password to <code>clickhouse-client</code> can be entered interactively.</li>\n<li>Server logs can now be sent to syslog (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2459\" rel=\"external nofollow noreferrer\">Alexander Krasheninnikov</a>).</li>\n<li>Support for logging in dictionaries with a shared library source (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2472\" rel=\"external nofollow noreferrer\">Alexander Sapin</a>).</li>\n<li>Support for custom CSV delimiters (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2263\" rel=\"external nofollow noreferrer\">Ivan Zhukov</a>)</li>\n<li>Added the <code>date_time_input_format</code> setting. If you switch this setting to <code>'best_effort'</code>, DateTime values will be read in a wide range of formats.</li>\n<li>Added the <code>clickhouse-obfuscator</code> utility for data obfuscation. Usage example: publishing data used in performance tests.</li>\n</ul>\n<h4 id=\"experimental-features_6\">Experimental features:<a class=\"headerlink\" href=\"#experimental-features_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the ability to calculate <code>and</code> arguments only where they are needed (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2272\" rel=\"external nofollow noreferrer\">Anastasia Tsarkova</a>)</li>\n<li>JIT compilation to native code is now available for some expressions (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2277\" rel=\"external nofollow noreferrer\">pyos</a>).</li>\n</ul>\n<h4 id=\"bug-fixes_42\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_42\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Duplicates no longer appear for a query with <code>DISTINCT</code> and <code>ORDER BY</code>.</li>\n<li>Queries with <code>ARRAY JOIN</code> and <code>arrayFilter</code> no longer return an incorrect result.</li>\n<li>Fixed an error when reading an array column from a Nested structure (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2066\" rel=\"external nofollow noreferrer\">#2066</a>).</li>\n<li>Fixed an error when analyzing queries with a HAVING clause like <code>HAVING tuple IN (...)</code>.</li>\n<li>Fixed an error when analyzing queries with recursive aliases.</li>\n<li>Fixed an error when reading from ReplacingMergeTree with a condition in PREWHERE that filters all rows (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2525\" rel=\"external nofollow noreferrer\">#2525</a>).</li>\n<li>User profile settings were not applied when using sessions in the HTTP interface.</li>\n<li>Fixed how settings are applied from the command line parameters in clickhouse-local.</li>\n<li>The ZooKeeper client library now uses the session timeout received from the server.</li>\n<li>Fixed a bug in the ZooKeeper client library when the client waited for the server response longer than the timeout.</li>\n<li>Fixed pruning of parts for queries with conditions on partition key columns (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2342\" rel=\"external nofollow noreferrer\">#2342</a>).</li>\n<li>Merges are now possible after <code>CLEAR COLUMN IN PARTITION</code> (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2315\" rel=\"external nofollow noreferrer\">#2315</a>).</li>\n<li>Type mapping in the ODBC table function has been fixed (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2268\" rel=\"external nofollow noreferrer\">sundy-li</a>).</li>\n<li>Type comparisons have been fixed for <code>DateTime</code> with and without the time zone (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2400\" rel=\"external nofollow noreferrer\">Alexander Bocharov</a>).</li>\n<li>Fixed syntactic parsing and formatting of the <code>CAST</code> operator.</li>\n<li>Fixed insertion into a materialized view for the Distributed table engine (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2411\" rel=\"external nofollow noreferrer\">Babacar Diass\u00e9</a>).</li>\n<li>Fixed a race condition when writing data from the <code>Kafka</code> engine to materialized views (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2448\" rel=\"external nofollow noreferrer\">Yangkuan Liu</a>).</li>\n<li>Fixed SSRF in the remote() table function.</li>\n<li>Fixed exit behavior of <code>clickhouse-client</code> in multiline mode (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2510\" rel=\"external nofollow noreferrer\">#2510</a>).</li>\n</ul>\n<h4 id=\"improvements_18\">Improvements:<a class=\"headerlink\" href=\"#improvements_18\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Background tasks in replicated tables are now performed in a thread pool instead of in separate threads (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/1722\" rel=\"external nofollow noreferrer\">Silviu Caragea</a>).</li>\n<li>Improved LZ4 compression performance.</li>\n<li>Faster analysis for queries with a large number of JOINs and sub-queries.</li>\n<li>The DNS cache is now updated automatically when there are too many network errors.</li>\n<li>Table inserts no longer occur if the insert into one of the materialized views is not possible because it has too many parts.</li>\n<li>Corrected the discrepancy in the event counters <code>Query</code>, <code>SelectQuery</code>, and <code>InsertQuery</code>.</li>\n<li>Expressions like <code>tuple IN (SELECT tuple)</code> are allowed if the tuple types match.</li>\n<li>A server with replicated tables can start even if you haven't configured ZooKeeper.</li>\n<li>When calculating the number of available CPU cores, limits on cgroups are now taken into account (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2325\" rel=\"external nofollow noreferrer\">Atri Sharma</a>).</li>\n<li>Added chown for config directories in the systemd config file (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2421\" rel=\"external nofollow noreferrer\">Mikhail Shiryaev</a>).</li>\n</ul>\n<h4 id=\"build-changes_4\">Build changes:<a class=\"headerlink\" href=\"#build-changes_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The gcc8 compiler can be used for builds.</li>\n<li>Added the ability to build llvm from submodule.</li>\n<li>The version of the librdkafka library has been updated to v0.11.4.</li>\n<li>Added the ability to use the system libcpuid library. The library version has been updated to 0.4.0.</li>\n<li>Fixed the build using the vectorclass library (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2274\" rel=\"external nofollow noreferrer\">Babacar Diass\u00e9</a>).</li>\n<li>Cmake now generates files for ninja by default (like when using <code>-G Ninja</code>).</li>\n<li>Added the ability to use the libtinfo library instead of libtermcap (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2519\" rel=\"external nofollow noreferrer\">Georgy Kondratiev</a>).</li>\n<li>Fixed a header file conflict in Fedora Rawhide (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2520\" rel=\"external nofollow noreferrer\">#2520</a>).</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_10\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed escaping in <code>Vertical</code> and <code>Pretty*</code> formats and deleted the <code>VerticalRaw</code> format.</li>\n<li>If servers with version 1.1.54388 (or newer) and servers with an older version are used simultaneously in a distributed query and the query has the <code>cast(x, 'Type')</code> expression without the <code>AS</code> keyword and doesn't have the word <code>cast</code> in uppercase, an exception will be thrown with a message like <code>Not found column cast(0, 'UInt8') in block</code>. Solution: Update the server on the entire cluster.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54385-2018-06-01\">ClickHouse release 1.1.54385, 2018-06-01<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54385-2018-06-01\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_43\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_43\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error that in some cases caused ZooKeeper operations to block.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54383-2018-05-22\">ClickHouse release 1.1.54383, 2018-05-22<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54383-2018-05-22\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_44\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_44\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a slowdown of replication queue if a table has many replicas.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54381-2018-05-14\">ClickHouse release 1.1.54381, 2018-05-14<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54381-2018-05-14\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_45\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_45\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a nodes leak in ZooKeeper when ClickHouse loses connection to ZooKeeper server.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54380-2018-04-21\">ClickHouse release 1.1.54380, 2018-04-21<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54380-2018-04-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_21\">New features:<a class=\"headerlink\" href=\"#new-features_21\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the table function <code>file(path, format, structure)</code>. An example reading bytes from <code>/dev/urandom</code>: <code>ln -s /dev/urandom /var/lib/clickhouse/user_files/random``clickhouse-client -q \"SELECT * FROM file('random', 'RowBinary', 'd UInt8') LIMIT 10\"</code>.</li>\n</ul>\n<h4 id=\"improvements_19\">Improvements:<a class=\"headerlink\" href=\"#improvements_19\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Subqueries can be wrapped in <code>()</code> brackets to enhance query readability. For example: <code>(SELECT 1) UNION ALL (SELECT 1)</code>.</li>\n<li>Simple <code>SELECT</code> queries from the <code>system.processes</code> table are not included in the <code>max_concurrent_queries</code> limit.</li>\n</ul>\n<h4 id=\"bug-fixes_46\">Bug fixes:<a class=\"he");
            
            document.write("aderlink\" href=\"#bug-fixes_46\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed incorrect behavior of the <code>IN</code> operator when select from <code>MATERIALIZED VIEW</code>.</li>\n<li>Fixed incorrect filtering by partition index in expressions like <code>partition_key_column IN (...)</code>.</li>\n<li>Fixed inability to execute <code>OPTIMIZE</code> query on non-leader replica if <code>REANAME</code> was performed on the table.</li>\n<li>Fixed the authorization error when executing <code>OPTIMIZE</code> or <code>ALTER</code> queries on a non-leader replica.</li>\n<li>Fixed freezing of <code>KILL QUERY</code>.</li>\n<li>Fixed an error in ZooKeeper client library which led to loss of watches, freezing of distributed DDL queue, and slowdowns in the replication queue if a non-empty <code>chroot</code> prefix is used in the ZooKeeper configuration.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_11\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed support for expressions like <code>(a, b) IN (SELECT (a, b))</code> (you can use the equivalent expression <code>(a, b) IN (SELECT a, b)</code>). In previous releases, these expressions led to undetermined <code>WHERE</code> filtering or caused errors.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54378-2018-04-16\">ClickHouse release 1.1.54378, 2018-04-16<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54378-2018-04-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_22\">New features:<a class=\"headerlink\" href=\"#new-features_22\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Logging level can be changed without restarting the server.</li>\n<li>Added the <code>SHOW CREATE DATABASE</code> query.</li>\n<li>The <code>query_id</code> can be passed to <code>clickhouse-client</code> (elBroom).</li>\n<li>New setting: <code>max_network_bandwidth_for_all_users</code>.</li>\n<li>Added support for <code>ALTER TABLE ... PARTITION ...</code> for <code>MATERIALIZED VIEW</code>.</li>\n<li>Added information about the size of data parts in uncompressed form in the system table.</li>\n<li>Server-to-server encryption support for distributed tables (<code>&lt;secure&gt;1&lt;/secure&gt;</code> in the replica config in <code>&lt;remote_servers&gt;</code>).</li>\n<li>Configuration of the table level for the <code>ReplicatedMergeTree</code> family in order to minimize the amount of data stored in Zookeeper: : <code>use_minimalistic_checksums_in_zookeeper = 1</code></li>\n<li>Configuration of the <code>clickhouse-client</code> prompt. By default, server names are now output to the prompt. The server's display name can be changed. It's also sent in the <code>X-ClickHouse-Display-Name</code> HTTP header (Kirill Shvakov).</li>\n<li>Multiple comma-separated <code>topics</code> can be specified for the <code>Kafka</code> engine  (Tobias Adamson)</li>\n<li>When a query is stopped by <code>KILL QUERY</code> or <code>replace_running_query</code>, the client receives the <code>Query was cancelled</code> exception instead of an incomplete result.</li>\n</ul>\n<h4 id=\"improvements_20\">Improvements:<a class=\"headerlink\" href=\"#improvements_20\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>ALTER TABLE ... DROP/DETACH PARTITION</code> queries are run at the front of the replication queue.</li>\n<li><code>SELECT ... FINAL</code> and <code>OPTIMIZE ... FINAL</code> can be used even when the table has a single data part.</li>\n<li>A <code>query_log</code> table is recreated on the fly if it was deleted manually (Kirill Shvakov).</li>\n<li>The <code>lengthUTF8</code> function runs faster (zhang2014).</li>\n<li>Improved performance of synchronous inserts in <code>Distributed</code> tables (<code>insert_distributed_sync = 1</code>) when there is a very large number of shards.</li>\n<li>The server accepts the <code>send_timeout</code> and <code>receive_timeout</code> settings from the client and applies them when connecting to the client (they are applied in reverse order: the server socket's <code>send_timeout</code> is set to the <code>receive_timeout</code> value received from the client, and vice versa).</li>\n<li>More robust crash recovery for asynchronous insertion into <code>Distributed</code> tables.</li>\n<li>The return type of the <code>countEqual</code> function changed from <code>UInt32</code> to <code>UInt64</code> (\u8c22\u78ca).</li>\n</ul>\n<h4 id=\"bug-fixes_47\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_47\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error with <code>IN</code> when the left side of the expression is <code>Nullable</code>.</li>\n<li>Correct results are now returned when using tuples with <code>IN</code> when some of the tuple components are in the table index.</li>\n<li>The <code>max_execution_time</code> limit now works correctly with distributed queries.</li>\n<li>Fixed errors when calculating the size of composite columns in the <code>system.columns</code> table.</li>\n<li>Fixed an error when creating a temporary table <code>CREATE TEMPORARY TABLE IF NOT EXISTS.</code></li>\n<li>Fixed errors in <code>StorageKafka</code> (##2075)</li>\n<li>Fixed server crashes from invalid arguments of certain aggregate functions.</li>\n<li>Fixed the error that prevented the <code>DETACH DATABASE</code> query from stopping background tasks for <code>ReplicatedMergeTree</code> tables.</li>\n<li><code>Too many parts</code> state is less likely to happen when inserting into aggregated materialized views (##2084).</li>\n<li>Corrected recursive handling of substitutions in the config if a substitution must be followed by another substitution on the same level.</li>\n<li>Corrected the syntax in the metadata file when creating a <code>VIEW</code> that uses a query with <code>UNION ALL</code>.</li>\n<li><code>SummingMergeTree</code> now works correctly for summation of nested data structures with a composite key.</li>\n<li>Fixed the possibility of a race condition when choosing the leader for <code>ReplicatedMergeTree</code> tables.</li>\n</ul>\n<h4 id=\"build-changes_5\">Build changes:<a class=\"headerlink\" href=\"#build-changes_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The build supports <code>ninja</code> instead of <code>make</code> and uses <code>ninja</code> by default for building releases.</li>\n<li>Renamed packages: <code>clickhouse-server-base</code> in <code>clickhouse-common-static</code>; <code>clickhouse-server-common</code> in <code>clickhouse-server</code>; <code>clickhouse-common-dbg</code> in <code>clickhouse-common-static-dbg</code>. To install, use <code>clickhouse-server clickhouse-client</code>. Packages with the old names will still load in the repositories for backward compatibility.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_12\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed the special interpretation of an IN expression if an array is specified on the left side. Previously, the expression <code>arr IN (set)</code> was interpreted as \"at least one <code>arr</code> element belongs to the <code>set</code>\". To get the same behavior in the new version, write <code>arrayExists(x -&gt; x IN (set), arr)</code>.</li>\n<li>Disabled the incorrect use of the socket option <code>SO_REUSEPORT</code>, which was incorrectly enabled by default in the Poco library. Note that on Linux there is no longer any reason to simultaneously specify the addresses <code>::</code> and <code>0.0.0.0</code> for listen \u2013 use just <code>::</code>, which allows listening to the connection both over IPv4 and IPv6 (with the default kernel config settings). You can also revert to the behavior from previous versions by specifying <code>&lt;listen_reuse_port&gt;1&lt;/listen_reuse_port&gt;</code> in the config.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54370-2018-03-16\">ClickHouse release 1.1.54370, 2018-03-16<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54370-2018-03-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_23\">New features:<a class=\"headerlink\" href=\"#new-features_23\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>system.macros</code> table and auto updating of macros when the config file is changed.</li>\n<li>Added the <code>SYSTEM RELOAD CONFIG</code> query.</li>\n<li>Added the <code>maxIntersections(left_col, right_col)</code> aggregate function, which returns the maximum number of simultaneously intersecting intervals <code>[left; right]</code>. The <code>maxIntersectionsPosition(left, right)</code> function returns the beginning of the \"maximum\" interval. (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2012\" rel=\"external nofollow noreferrer\">Michael Furmur</a>).</li>\n</ul>\n<h4 id=\"improvements_21\">Improvements:<a class=\"headerlink\" href=\"#improvements_21\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>When inserting data in a <code>Replicated</code> table, fewer requests are made to <code>ZooKeeper</code> (and most of the user-level errors have disappeared from the <code>ZooKeeper</code> log).</li>\n<li>Added the ability to create aliases for data sets. Example: <code>WITH (1, 2, 3) AS set SELECT number IN set FROM system.numbers LIMIT 10</code>.</li>\n</ul>\n<h4 id=\"bug-fixes_48\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_48\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the <code>Illegal PREWHERE</code> error when reading from Merge tables for <code>Distributed</code>tables.</li>\n<li>Added fixes that allow you to start clickhouse-server in IPv4-only Docker containers.</li>\n<li>Fixed a race condition when reading from system <code>system.parts_columns tables.</code></li>\n<li>Removed double buffering during a synchronous insert to a <code>Distributed</code> table, which could have caused the connection to timeout.</li>\n<li>Fixed a bug that caused excessively long waits for an unavailable replica before beginning a <code>SELECT</code> query.</li>\n<li>Fixed incorrect dates in the <code>system.parts</code> table.</li>\n<li>Fixed a bug that made it impossible to insert data in a <code>Replicated</code> table if <code>chroot</code> was non-empty in the configuration of the <code>ZooKe");
            
            document.write("eper</code> cluster.</li>\n<li>Fixed the vertical merging algorithm for an empty <code>ORDER BY</code> table.</li>\n<li>Restored the ability to use dictionaries in queries to remote tables, even if these dictionaries are not present on the requestor server. This functionality was lost in release 1.1.54362.</li>\n<li>Restored the behavior for queries like <code>SELECT * FROM remote('server2', default.table) WHERE col IN (SELECT col2 FROM default.table)</code> when the right side of the <code>IN</code> should use a remote <code>default.table</code> instead of a local one. This behavior was broken in version 1.1.54358.</li>\n<li>Removed extraneous error-level logging of <code>Not found column ... in block</code>.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54362-2018-03-11\">Clickhouse Release 1.1.54362, 2018-03-11<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54362-2018-03-11\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_24\">New features:<a class=\"headerlink\" href=\"#new-features_24\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Aggregation without <code>GROUP BY</code> for an empty set (such as <code>SELECT count(*) FROM table WHERE 0</code>) now returns a result with one row with null values for aggregate functions, in compliance with the SQL standard. To restore the old behavior (return an empty result), set <code>empty_result_for_aggregation_by_empty_set</code> to 1.</li>\n<li>Added type conversion for <code>UNION ALL</code>. Different alias names are allowed in <code>SELECT</code> positions in <code>UNION ALL</code>, in compliance with the SQL standard.</li>\n<li>Arbitrary expressions are supported in <code>LIMIT BY</code> clauses. Previously, it was only possible to use columns resulting from <code>SELECT</code>.</li>\n<li>An index of <code>MergeTree</code> tables is used when <code>IN</code> is applied to a tuple of expressions from the columns of the primary key. Example: <code>WHERE (UserID, EventDate) IN ((123, '2000-01-01'), ...)</code> (Anastasiya Tsarkova).</li>\n<li>Added the <code>clickhouse-copier</code> tool for copying between clusters and resharding data (beta).</li>\n<li>Added consistent hashing functions: <code>yandexConsistentHash</code>, <code>jumpConsistentHash</code>, <code>sumburConsistentHash</code>. They can be used as a sharding key in order to reduce the amount of network traffic during subsequent reshardings.</li>\n<li>Added functions: <code>arrayAny</code>, <code>arrayAll</code>, <code>hasAny</code>, <code>hasAll</code>, <code>arrayIntersect</code>, <code>arrayResize</code>.</li>\n<li>Added the <code>arrayCumSum</code> function (Javi Santana).</li>\n<li>Added the <code>parseDateTimeBestEffort</code>, <code>parseDateTimeBestEffortOrZero</code>, and <code>parseDateTimeBestEffortOrNull</code> functions to read the DateTime from a string containing text in a wide variety of possible formats.</li>\n<li>Data can be partially reloaded from external dictionaries during updating (load just the records in which the value of the specified field greater than in the previous download) (Arsen Hakobyan).</li>\n<li>Added the <code>cluster</code> table function. Example: <code>cluster(cluster_name, db, table)</code>. The <code>remote</code> table function can accept the cluster name as the first argument, if it is specified as an identifier.</li>\n<li>The <code>remote</code> and <code>cluster</code> table functions can be used in <code>INSERT</code> queries.</li>\n<li>Added the <code>create_table_query</code> and <code>engine_full</code> virtual columns to the <code>system.tables</code>table . The <code>metadata_modification_time</code> column is virtual.</li>\n<li>Added the <code>data_path</code> and <code>metadata_path</code> columns to <code>system.tables</code>and<code>system.databases</code> tables, and added the <code>path</code> column to the <code>system.parts</code> and <code>system.parts_columns</code> tables.</li>\n<li>Added additional information about merges in the <code>system.part_log</code> table.</li>\n<li>An arbitrary partitioning key can be used for the <code>system.query_log</code> table (Kirill Shvakov).</li>\n<li>The <code>SHOW TABLES</code> query now also shows temporary tables. Added temporary tables and the <code>is_temporary</code> column to <code>system.tables</code> (zhang2014).</li>\n<li>Added <code>DROP TEMPORARY TABLE</code> and <code>EXISTS TEMPORARY TABLE</code> queries (zhang2014).</li>\n<li>Support for <code>SHOW CREATE TABLE</code> for temporary tables (zhang2014).</li>\n<li>Added the <code>system_profile</code> configuration parameter for the settings used by internal processes.</li>\n<li>Support for loading <code>object_id</code> as an attribute in <code>MongoDB</code> dictionaries (Pavel Litvinenko).</li>\n<li>Reading <code>null</code> as the default value when loading data for an external dictionary with the <code>MongoDB</code> source (Pavel Litvinenko).</li>\n<li>Reading <code>DateTime</code> values in the <code>Values</code> format from a Unix timestamp without single quotes.</li>\n<li>Failover is supported in <code>remote</code> table functions for cases when some of the replicas are missing the requested table.</li>\n<li>Configuration settings can be overridden in the command line when you run <code>clickhouse-server</code>. Example: <code>clickhouse-server -- --logger.level=information</code>.</li>\n<li>Implemented the <code>empty</code> function from a <code>FixedString</code> argument: the function returns 1 if the string consists entirely of null bytes (zhang2014).</li>\n<li>Added the <code>listen_try</code>configuration parameter for listening to at least one of the listen addresses without quitting, if some of the addresses can't be listened to (useful for systems with disabled support for IPv4 or IPv6).</li>\n<li>Added the <code>VersionedCollapsingMergeTree</code> table engine.</li>\n<li>Support for rows and arbitrary numeric types for the <code>library</code> dictionary source.</li>\n<li><code>MergeTree</code> tables can be used without a primary key (you need to specify <code>ORDER BY tuple()</code>).</li>\n<li>A <code>Nullable</code> type can be <code>CAST</code> to a non-<code>Nullable</code> type if the argument is not <code>NULL</code>.</li>\n<li><code>RENAME TABLE</code> can be performed for <code>VIEW</code>.</li>\n<li>Added the <code>throwIf</code> function.</li>\n<li>Added the <code>odbc_default_field_size</code> option, which allows you to extend the maximum size of the value loaded from an ODBC source (by default, it is 1024).</li>\n<li>The <code>system.processes</code> table and <code>SHOW PROCESSLIST</code> now have the <code>is_cancelled</code> and <code>peak_memory_usage</code> columns.</li>\n</ul>\n<h4 id=\"improvements_22\">Improvements:<a class=\"headerlink\" href=\"#improvements_22\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Limits and quotas on the result are no longer applied to intermediate data for <code>INSERT SELECT</code> queries or for <code>SELECT</code> subqueries.</li>\n<li>Fewer false triggers of <code>force_restore_data</code> when checking the status of <code>Replicated</code> tables when the server starts.</li>\n<li>Added the <code>allow_distributed_ddl</code> option.</li>\n<li>Nondeterministic functions are not allowed in expressions for <code>MergeTree</code> table keys.</li>\n<li>Files with substitutions from <code>config.d</code> directories are loaded in alphabetical order.</li>\n<li>Improved performance of the <code>arrayElement</code> function in the case of a constant multidimensional array with an empty array as one of the elements. Example: <code>[[1], []][x]</code>.</li>\n<li>The server starts faster now when using configuration files with very large substitutions (for instance, very large lists of IP networks).</li>\n<li>When running a query, table valued functions run once. Previously, <code>remote</code> and <code>mysql</code>  table valued functions performed the same query twice to retrieve the table structure from a remote server.</li>\n<li>The <code>MkDocs</code> documentation generator is used.</li>\n<li>When you try to delete a table column that <code>DEFAULT</code>/<code>MATERIALIZED</code> expressions of other columns depend on, an exception is thrown (zhang2014).</li>\n<li>Added the ability to parse an empty line in text formats as the number 0 for <code>Float</code> data types. This feature was previously available but was lost in release 1.1.54342.</li>\n<li><code>Enum</code> values can be used in <code>min</code>, <code>max</code>, <code>sum</code> and some other functions. In these cases, it uses the corresponding numeric values. This feature was previously available but was lost in the release 1.1.54337.</li>\n<li>Added <code>max_expanded_ast_elements</code> to restrict the size of the AST after recursively expanding aliases.</li>\n</ul>\n<h4 id=\"bug-fixes_49\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_49\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed cases when unnecessary columns were removed from subqueries in error, or not removed from subqueries containing <code>UNION ALL</code>.</li>\n<li>Fixed a bug in merges for <code>ReplacingMergeTree</code> tables.</li>\n<li>Fixed synchronous insertions in <code>Distributed</code> tables (<code>insert_distributed_sync = 1</code>).</li>\n<li>Fixed segfault for certain uses of <code>FULL</code> and <code>RIGHT JOIN</code> with duplicate columns in subqueries.</li>\n<li>Fixed segfault for certain uses of <code>replace_running_query</code> and <code>KILL QUERY</code>.</li>\n<li>Fixed the order of the <code>source</code> and <code>last_exception</code> columns in the <code>system.dictionaries</code> table.</li>\n<li>Fixed a bug when the <code>DROP DATABASE</code> query did not delete the file with metadata.</li>\n<li>Fixed the <code>DROP DATABASE</code> query for <code>Dictionary</code> databases.</li>\n<li>Fixed the low precision of <code>uniqHLL12</code> and <code>uniqCombined</code> functions for cardinalities greater than 100 million items (Alex Bocharov).</li>\n<li>Fixed the calculation of implicit default values when necessary to simultaneously calculate default explicit expressions in <code>INSERT</code> queries (zhang2014).</li>\n<li>Fixed a rare case when a query to a <code>MergeTree</code> table could");
            
            document.write("n't finish (chenxing-xc).</li>\n<li>Fixed a crash that occurred when running a <code>CHECK</code> query for <code>Distributed</code> tables if all shards are local (chenxing.xc).</li>\n<li>Fixed a slight performance regression with functions that use regular expressions.</li>\n<li>Fixed a performance regression when creating multidimensional arrays from complex expressions.</li>\n<li>Fixed a bug that could cause an extra <code>FORMAT</code> section to appear in an <code>.sql</code> file with metadata.</li>\n<li>Fixed a bug that caused the <code>max_table_size_to_drop</code> limit to apply when trying to delete a <code>MATERIALIZED VIEW</code> looking at an explicitly specified table.</li>\n<li>Fixed incompatibility with old clients (old clients were sometimes sent data with the <code>DateTime('timezone')</code> type, which they do not understand).</li>\n<li>Fixed a bug when reading <code>Nested</code> column elements of structures that were added using <code>ALTER</code> but that are empty for the old partitions, when the conditions for these columns moved to <code>PREWHERE</code>.</li>\n<li>Fixed a bug when filtering tables by virtual <code>_table</code> columns in queries to <code>Merge</code> tables.</li>\n<li>Fixed a bug when using <code>ALIAS</code> columns in <code>Distributed</code> tables.</li>\n<li>Fixed a bug that made dynamic compilation impossible for queries with aggregate functions from the <code>quantile</code> family.</li>\n<li>Fixed a race condition in the query execution pipeline that occurred in very rare cases when using <code>Merge</code> tables with a large number of tables, and when using <code>GLOBAL</code> subqueries.</li>\n<li>Fixed a crash when passing arrays of different sizes to an <code>arrayReduce</code> function when using aggregate functions from multiple arguments.</li>\n<li>Prohibited the use of queries with <code>UNION ALL</code> in a <code>MATERIALIZED VIEW</code>.</li>\n<li>Fixed an error during initialization of the <code>part_log</code>  system table when the server starts (by default, <code>part_log</code> is disabled).</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_13\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed the <code>distributed_ddl_allow_replicated_alter</code> option. This behavior is enabled by default.</li>\n<li>Removed the <code>strict_insert_defaults</code> setting. If you were using this functionality, write to <code>clickhouse-feedback@yandex-team.com</code>.</li>\n<li>Removed the <code>UnsortedMergeTree</code> engine.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54343-2018-02-05\">Clickhouse Release 1.1.54343, 2018-02-05<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54343-2018-02-05\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Added macros support for defining cluster names in distributed DDL queries and constructors of Distributed tables: <code>CREATE TABLE distr ON CLUSTER '{cluster}' (...) ENGINE = Distributed('{cluster}', 'db', 'table')</code>.</li>\n<li>Now queries like <code>SELECT ... FROM table WHERE expr IN (subquery)</code> are processed using the <code>table</code> index.</li>\n<li>Improved processing of duplicates when inserting to Replicated tables, so they no longer slow down execution of the replication queue.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54342-2018-01-22\">Clickhouse Release 1.1.54342, 2018-01-22<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54342-2018-01-22\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains bug fixes for the previous release 1.1.54337:</p>\n<ul>\n<li>Fixed a regression in 1.1.54337: if the default user has readonly access, then the server refuses to start up with the message  <code>Cannot create database in readonly mode</code>.</li>\n<li>Fixed a regression in 1.1.54337: on systems with systemd, logs are always written to syslog regardless of the configuration; the watchdog script still uses init.d.</li>\n<li>Fixed a regression in 1.1.54337: wrong default configuration in the Docker image.</li>\n<li>Fixed nondeterministic behavior of GraphiteMergeTree (you can see it in log messages <code>Data after merge is not byte-identical to the data on another replicas</code>).</li>\n<li>Fixed a bug that may lead to inconsistent merges after OPTIMIZE query to Replicated tables (you may see it in log messages <code>Part ... intersects the previous part</code>).</li>\n<li>Buffer tables now work correctly when MATERIALIZED columns are present in the destination table (by zhang2014).</li>\n<li>Fixed a bug in implementation of NULL.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54337-2018-01-18\">Clickhouse Release 1.1.54337, 2018-01-18<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54337-2018-01-18\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_25\">New features:<a class=\"headerlink\" href=\"#new-features_25\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for storage of multi-dimensional arrays and tuples (<code>Tuple</code> data type) in tables.</li>\n<li>Support for table functions for <code>DESCRIBE</code> and <code>INSERT</code> queries. Added support for subqueries in  <code>DESCRIBE</code>. Examples: <code>DESC TABLE remote('host', default.hits)</code>; <code>DESC TABLE (SELECT 1)</code>; <code>INSERT INTO TABLE FUNCTION remote('host', default.hits)</code>. Support for <code>INSERT INTO TABLE</code> in addition to <code>INSERT INTO</code>.</li>\n<li>Improved support for time zones. The <code>DateTime</code> data type can be annotated with the timezone that is used for parsing and formatting in text formats. Example: <code>DateTime('Europe/Moscow')</code>. When timezones are specified in functions for <code>DateTime</code> arguments, the return type will track the timezone, and the value will be displayed as expected.</li>\n<li>Added the functions <code>toTimeZone</code>, <code>timeDiff</code>, <code>toQuarter</code>, <code>toRelativeQuarterNum</code>. The <code>toRelativeHour</code>/<code>Minute</code>/<code>Second</code> functions can take a value of type <code>Date</code> as an argument. The <code>now</code> function name is case-sensitive.</li>\n<li>Added the <code>toStartOfFifteenMinutes</code> function (Kirill Shvakov).</li>\n<li>Added the <code>clickhouse format</code> tool for formatting queries.</li>\n<li>Added the <code>format_schema_path</code>  configuration parameter (Marek Vavru\u015fa). It is used for specifying a schema in <code>Cap'n Proto</code> format. Schema files can be located only in the specified directory.</li>\n<li>Added support for config substitutions (<code>incl</code> and <code>conf.d</code>) for configuration of external dictionaries and models (Pavel Yakunin).</li>\n<li>Added a column with documentation for the  <code>system.settings</code> table (Kirill Shvakov).</li>\n<li>Added the <code>system.parts_columns</code> table with information about column sizes in each data part of <code>MergeTree</code> tables.</li>\n<li>Added the <code>system.models</code> table with information about loaded <code>CatBoost</code> machine learning models.</li>\n<li>Added the <code>mysql</code> and <code>odbc</code> table function and corresponding <code>MySQL</code> and <code>ODBC</code> table engines for accessing remote databases. This functionality is in the beta stage.</li>\n<li>Added the possibility to pass an argument of type <code>AggregateFunction</code>  for the <code>groupArray</code>  aggregate function (so you can create an array of states of some aggregate function).</li>\n<li>Removed restrictions on various combinations of aggregate function combinators. For example, you can use <code>avgForEachIf</code>  as well as <code>avgIfForEach</code>  aggregate functions, which have different behaviors.</li>\n<li>The <code>-ForEach</code>  aggregate function combinator is extended for the case of aggregate functions of multiple arguments.</li>\n<li>Added support for aggregate functions of <code>Nullable</code>  arguments even for cases when the function returns a non-<code>Nullable</code>  result (added with the contribution of Silviu Caragea). Example: <code>groupArray</code>, <code>groupUniqArray</code>, <code>topK</code>.</li>\n<li>Added the <code>max_client_network_bandwidth</code> for <code>clickhouse-client</code> (Kirill Shvakov).</li>\n<li>Users with the <code>readonly = 2</code>  setting are allowed to work with TEMPORARY tables (CREATE, DROP, INSERT...) (Kirill Shvakov).</li>\n<li>Added support for using multiple consumers with the <code>Kafka</code>  engine.  Extended configuration options for <code>Kafka</code>  (Marek Vavru\u0161a).</li>\n<li>Added the <code>intExp3</code>  and <code>intExp4</code>  functions.</li>\n<li>Added the <code>sumKahan</code>  aggregate function.</li>\n<li>Added the to * Number<em> OrNull functions, where * Number</em>  is a numeric type.</li>\n<li>Added support for <code>WITH</code> clauses for an <code>INSERT SELECT</code> query (author: zhang2014).</li>\n<li>Added settings: <code>http_connection_timeout</code>, <code>http_send_timeout</code>, <code>http_receive_timeout</code>. In particular, these settings are used for downloading data parts for replication. Changing these settings allows for faster failover if the network is overloaded.</li>\n<li>Added support for <code>ALTER</code> for tables of type <code>Null</code> (Anastasiya Tsarkova).</li>\n<li>The <code>reinterpretAsString</code>  function is extended for all data types that are stored contiguously in memory.</li>\n<li>Added the <code>--silent</code>  option for the <code>clickhouse-local</code>  tool. It suppresses printing query execution info in stderr.</li>\n<li>Added support for reading values of type <code>Date</code>  from text in a format where the month and/or day of the month is specified using a single digit instead of two digits (Amos Bird).</li>\n</ul>\n<h4 id=\"performance-optimizations\">Performance optimizations:<a class=\"headerlink\" href=\"#performance-optimizations\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improved performance of aggregate functions <code>min</code>, <code>max</code>, <code>any</code>, <code>anyLast</code>, <code>anyHeavy</code>, <code>argMin</code>, <code>argMax</code> from string arguments.</li>\n<li>Improve");
            
            document.write("d performance of the functions <code>isInfinite</code>, <code>isFinite</code>, <code>isNaN</code>, <code>roundToExp2</code>.</li>\n<li>Improved performance of parsing and formatting <code>Date</code> and <code>DateTime</code> type values  in text format.</li>\n<li>Improved performance and precision of parsing floating point numbers.</li>\n<li>Lowered memory usage for <code>JOIN</code>  in the case when the left and right parts have columns with identical names that are not contained in <code>USING</code> .</li>\n<li>Improved performance of aggregate functions <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code> by reducing computational stability. The old functions are available under the names <code>varSampStable</code>, <code>varPopStable</code>, <code>stddevSampStable</code>, <code>stddevPopStable</code>, <code>covarSampStable</code>, <code>covarPopStable</code>, <code>corrStable</code>.</li>\n</ul>\n<h4 id=\"bug-fixes_50\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_50\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed data deduplication after running a <code>DROP</code> or <code>DETACH PARTITION</code> query. In the previous version, dropping a partition and inserting the same data again was not working because inserted blocks were considered duplicates.</li>\n<li>Fixed a bug that could lead to incorrect interpretation of the <code>WHERE</code>  clause for <code>CREATE MATERIALIZED VIEW</code>  queries with <code>POPULATE</code> .</li>\n<li>Fixed a bug in using the <code>root_path</code> parameter in the <code>zookeeper_servers</code> configuration.</li>\n<li>Fixed unexpected results of passing the <code>Date</code>  argument to <code>toStartOfDay</code> .</li>\n<li>Fixed the <code>addMonths</code> and <code>subtractMonths</code>  functions and the arithmetic for <code>INTERVAL n MONTH</code>  in cases when the result has the previous year.</li>\n<li>Added missing support for the <code>UUID</code>  data type for <code>DISTINCT</code> , <code>JOIN</code> , and <code>uniq</code>  aggregate functions and external dictionaries (Evgeniy Ivanov). Support for <code>UUID</code>  is still incomplete.</li>\n<li>Fixed <code>SummingMergeTree</code>  behavior in cases when the rows summed to zero.</li>\n<li>Various fixes for the <code>Kafka</code>  engine (Marek Vavru\u0161a).</li>\n<li>Fixed incorrect behavior of the <code>Join</code>  table engine (Amos Bird).</li>\n<li>Fixed incorrect allocator behavior under FreeBSD and OS X.</li>\n<li>The <code>extractAll</code>  function now supports empty matches.</li>\n<li>Fixed an error that blocked usage of <code>libressl</code>  instead of <code>openssl</code> .</li>\n<li>Fixed the <code>CREATE TABLE AS SELECT</code>  query from temporary tables.</li>\n<li>Fixed non-atomicity of updating the replication queue. This could lead to replicas being out of sync until the server restarts.</li>\n<li>Fixed possible overflow in <code>gcd</code> , <code>lcm</code>  and <code>modulo</code>  (<code>%</code> operator) (Maks Skorokhod).</li>\n<li><code>-preprocessed</code>  files are now created after changing <code>umask</code>  (<code>umask</code>  can be changed in the config).</li>\n<li>Fixed a bug in the background check of parts (<code>MergeTreePartChecker</code> ) when using a custom partition key.</li>\n<li>Fixed parsing of tuples (values of the <code>Tuple</code>  data type) in text formats.</li>\n<li>Improved error messages about incompatible types passed to <code>multiIf</code> , <code>array</code>  and some other functions.</li>\n<li>Redesigned support for <code>Nullable</code> types. Fixed bugs that may lead to a server crash. Fixed almost all other bugs related to <code>NULL</code>  support: incorrect type conversions in INSERT SELECT, insufficient support for Nullable in HAVING and PREWHERE, <code>join_use_nulls</code>  mode, Nullable types as arguments of <code>OR</code>  operator, etc.</li>\n<li>Fixed various bugs related to internal semantics of data types. Examples: unnecessary summing of <code>Enum</code>  type fields in <code>SummingMergeTree</code> ; alignment of <code>Enum</code>  types in <code>Pretty</code>  formats, etc.</li>\n<li>Stricter checks for allowed combinations of composite columns.</li>\n<li>Fixed the overflow when specifying a very large parameter for the <code>FixedString</code>  data type.</li>\n<li>Fixed a bug in the <code>topK</code>  aggregate function in a generic case.</li>\n<li>Added the missing check for equality of array sizes in arguments of n-ary variants of aggregate functions with an <code>-Array</code>  combinator.</li>\n<li>Fixed a bug in <code>--pager</code> for <code>clickhouse-client</code> (author: ks1322).</li>\n<li>Fixed the precision of the <code>exp10</code>  function.</li>\n<li>Fixed the behavior of the <code>visitParamExtract</code>  function for better compliance with documentation.</li>\n<li>Fixed the crash when incorrect data types are specified.</li>\n<li>Fixed the behavior of <code>DISTINCT</code>  in the case when all columns are constants.</li>\n<li>Fixed query formatting in the case of using the <code>tupleElement</code>  function with a complex constant expression as the tuple element index.</li>\n<li>Fixed a bug in <code>Dictionary</code> tables for <code>range_hashed</code> dictionaries.</li>\n<li>Fixed a bug that leads to excessive rows in the result of <code>FULL</code>  and <code>RIGHT JOIN</code>  (Amos Bird).</li>\n<li>Fixed a server crash when creating and removing temporary files in <code>config.d</code>  directories during config reload.</li>\n<li>Fixed the <code>SYSTEM DROP DNS CACHE</code>  query: the cache was flushed but addresses of cluster nodes were not updated.</li>\n<li>Fixed the behavior of <code>MATERIALIZED VIEW</code>  after executing <code>DETACH TABLE</code>  for the table under the view (Marek Vavru\u0161a).</li>\n</ul>\n<h4 id=\"build-improvements_4\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The <code>pbuilder</code> tool is used for builds. The build process is almost completely independent of the build host environment.</li>\n<li>A single build is used for different OS versions. Packages and binaries have been made compatible with a wide range of Linux systems.</li>\n<li>Added the <code>clickhouse-test</code>  package. It can be used to run functional tests.</li>\n<li>The source tarball can now be published to the repository. It can be used to reproduce the build without using GitHub.</li>\n<li>Added limited integration with Travis CI. Due to limits on build time in Travis, only the debug build is tested and a limited subset of tests are run.</li>\n<li>Added support for <code>Cap'n'Proto</code>  in the default build.</li>\n<li>Changed the format of documentation sources from <code>Restricted Text</code> to <code>Markdown</code>.</li>\n<li>Added support for <code>systemd</code> (Vladimir Smirnov). It is disabled by default due to incompatibility with some OS images and can be enabled manually.</li>\n<li>For dynamic code generation, <code>clang</code>  and <code>lld</code>  are embedded into the <code>clickhouse</code>  binary. They can also be invoked as <code>clickhouse clang</code>  and <code>clickhouse lld</code> .</li>\n<li>Removed usage of GNU extensions from the code. Enabled the <code>-Wextra</code>  option. When building with <code>clang</code> the default is <code>libc++</code> instead of <code>libstdc++</code>.</li>\n<li>Extracted <code>clickhouse_parsers</code>  and <code>clickhouse_common_io</code>  libraries to speed up builds of various tools.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_14\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The format for marks in <code>Log</code>  type tables that contain <code>Nullable</code>  columns was changed in a backward incompatible way. If you have these tables, you should convert them to the <code>TinyLog</code>  type before starting up the new server version. To do this, replace <code>ENGINE = Log</code> with <code>ENGINE = TinyLog</code> in the corresponding <code>.sql</code> file in the <code>metadata</code> directory. If your table doesn't have <code>Nullable</code> columns or if the type of your table is not <code>Log</code>, then you don't need to do anything.</li>\n<li>Removed the <code>experimental_allow_extended_storage_definition_syntax</code> setting. Now this feature is enabled by default.</li>\n<li>The <code>runningIncome</code> function was renamed to <code>runningDifferenceStartingWithFirstvalue</code> to avoid confusion.</li>\n<li>Removed the <code>FROM ARRAY JOIN arr</code>  syntax when ARRAY JOIN is specified directly after FROM with no table (Amos Bird).</li>\n<li>Removed the <code>BlockTabSeparated</code>  format that was used solely for demonstration purposes.</li>\n<li>Changed the state format for aggregate functions <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code>. If you have stored states of these aggregate functions in tables (using the <code>AggregateFunction</code>  data type or materialized views with corresponding states), please write to <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;\">&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;</a>.</li>\n<li>In previous server versions there was an undocumented feature: if an aggregate function depends on parameters, you can still specify it without parameters in the AggregateFunction data type. Example: <code>AggregateFunction(quantiles, UInt64)</code> instead of <code>AggregateFunction(quantiles(0.5, 0.9), UInt64)</code>. This feature was lost. Although it was undocumented, we plan to support it again in future releases.</li>\n<li>Enum d");
            
            document.write("ata types cannot be used in min/max aggregate functions. This ability will be returned in the next release.</li>\n</ul>\n<h4 id=\"please-note-when-upgrading\">Please note when upgrading:<a class=\"headerlink\" href=\"#please-note-when-upgrading\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>When doing a rolling update on a cluster, at the point when some of the replicas are running the old version of ClickHouse and some are running the new version, replication is temporarily stopped and the message <code>unknown parameter 'shard'</code>  appears in the log. Replication will continue after all replicas of the cluster are updated.</li>\n<li>If different versions of ClickHouse are running on the cluster servers, it is possible that distributed queries using the following functions will have incorrect results: <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code>. You should update all cluster nodes.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54327-2017-12-21\">ClickHouse release 1.1.54327, 2017-12-21<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54327-2017-12-21\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains bug fixes for the previous release 1.1.54318:</p>\n<ul>\n<li>Fixed bug with possible race condition in replication that could lead to data loss. This issue affects versions 1.1.54310 and 1.1.54318. If you use one of these versions with Replicated tables, the update is strongly recommended. This issue shows in logs in Warning messages like <code>Part ... from own log doesn't exist.</code>  The issue is relevant even if you don't see these messages in logs.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54318-2017-11-30\">ClickHouse release 1.1.54318, 2017-11-30<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54318-2017-11-30\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains bug fixes for the previous release 1.1.54310:</p>\n<ul>\n<li>Fixed incorrect row deletions during merges in the SummingMergeTree engine</li>\n<li>Fixed a memory leak in unreplicated MergeTree engines</li>\n<li>Fixed performance degradation with frequent inserts in MergeTree engines</li>\n<li>Fixed an issue that was causing the replication queue to stop running</li>\n<li>Fixed rotation and archiving of server logs</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54310-2017-11-01\">ClickHouse release 1.1.54310, 2017-11-01<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54310-2017-11-01\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_26\">New features:<a class=\"headerlink\" href=\"#new-features_26\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Custom partitioning key for the MergeTree family of table engines.</li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/kafka/\" rel=\"external nofollow noreferrer\">Kafka</a>  table engine.</li>\n<li>Added support for loading <a href=\"https://catboost.yandex/\" rel=\"external nofollow noreferrer\">CatBoost</a>  models and applying them to data stored in ClickHouse.</li>\n<li>Added support for time zones with non-integer offsets from UTC.</li>\n<li>Added support for arithmetic operations with time intervals.</li>\n<li>The range of values for the Date and DateTime types is extended to the year 2105.</li>\n<li>Added the <code>CREATE MATERIALIZED VIEW x TO y</code>  query (specifies an existing table for storing the data of a materialized view).</li>\n<li>Added the <code>ATTACH TABLE</code> query without arguments.</li>\n<li>The processing logic for Nested columns with names ending in -Map in a SummingMergeTree table was extracted to the sumMap aggregate function. You can now specify such columns explicitly.</li>\n<li>Max size of the IP trie dictionary is increased to 128M entries.</li>\n<li>Added the getSizeOfEnumType function.</li>\n<li>Added the sumWithOverflow aggregate function.</li>\n<li>Added support for the Cap'n Proto input format.</li>\n<li>You can now customize compression level when using the zstd algorithm.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_15\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Creation of temporary tables with an engine other than Memory is not allowed.</li>\n<li>Explicit creation of tables with the View or MaterializedView engine is not allowed.</li>\n<li>During table creation, a new check verifies that the sampling key expression is included in the primary key.</li>\n</ul>\n<h4 id=\"bug-fixes_51\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_51\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed hangups when synchronously inserting into a Distributed table.</li>\n<li>Fixed nonatomic adding and removing of parts in Replicated tables.</li>\n<li>Data inserted into a materialized view is not subjected to unnecessary deduplication.</li>\n<li>Executing a query to a Distributed table for which the local replica is lagging and remote replicas are unavailable does not result in an error anymore.</li>\n<li>Users don't need access permissions to the <code>default</code>  database to create temporary tables anymore.</li>\n<li>Fixed crashing when specifying the Array type without arguments.</li>\n<li>Fixed hangups when the disk volume containing server logs is full.</li>\n<li>Fixed an overflow in the toRelativeWeekNum function for the first week of the Unix epoch.</li>\n</ul>\n<h4 id=\"build-improvements_5\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Several third-party libraries (notably Poco) were updated and converted to git submodules.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54304-2017-10-19\">ClickHouse release 1.1.54304, 2017-10-19<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54304-2017-10-19\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_27\">New features:<a class=\"headerlink\" href=\"#new-features_27\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>TLS support in the native protocol (to enable, set <code>tcp_ssl_port</code>  in <code>config.xml</code> ).</li>\n</ul>\n<h4 id=\"bug-fixes_52\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_52\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>ALTER</code> for replicated tables now tries to start running as soon as possible.</li>\n<li>Fixed crashing when reading data with the setting <code>preferred_block_size_bytes=0.</code></li>\n<li>Fixed crashes of <code>clickhouse-client</code> when pressing <code>Page Down</code></li>\n<li>Correct interpretation of certain complex queries with <code>GLOBAL IN</code> and <code>UNION ALL</code></li>\n<li><code>FREEZE PARTITION</code> always works atomically now.</li>\n<li>Empty POST requests now return a response with code 411.</li>\n<li>Fixed interpretation errors for expressions like <code>CAST(1 AS Nullable(UInt8)).</code></li>\n<li>Fixed an error when reading <code>Array(Nullable(String))</code> columns from <code>MergeTree</code> tables.</li>\n<li>Fixed crashing when parsing queries like <code>SELECT dummy AS dummy, dummy AS b</code></li>\n<li>Users are updated correctly with invalid <code>users.xml</code></li>\n<li>Correct handling when an executable dictionary returns a non-zero response code.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54292-2017-09-20\">ClickHouse release 1.1.54292, 2017-09-20<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54292-2017-09-20\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_28\">New features:<a class=\"headerlink\" href=\"#new-features_28\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the  <code>pointInPolygon</code> function for working with coordinates on a coordinate plane.</li>\n<li>Added the <code>sumMap</code> aggregate function for calculating the sum of arrays, similar to  <code>SummingMergeTree</code>.</li>\n<li>Added the <code>trunc</code> function. Improved performance of the rounding functions (<code>round</code>, <code>floor</code>, <code>ceil</code>, <code>roundToExp2</code>) and corrected the logic of how they work. Changed the logic of the <code>roundToExp2</code>  function for fractions and negative numbers.</li>\n<li>The ClickHouse executable file is now less dependent on the libc version. The same ClickHouse executable file can run on a wide variety of Linux systems. There is still a dependency when using compiled queries (with the setting <code>compile = 1</code> , which is not used by default).</li>\n<li>Reduced the time needed for dynamic compilation of queries.</li>\n</ul>\n<h4 id=\"bug-fixes_53\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_53\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error that sometimes produced <code>part ... intersects previous part</code>  messages and weakened replica consistency.</li>\n<li>Fixed an error that caused the server to lock up if ZooKeeper was unavailable during shutdown.</li>\n<li>Removed excessive logging when restoring replicas.</li>\n<li>Fixed an error in the UNION ALL implementation.</li>\n<li>Fixed an error in the concat function that occurred if the first column in a block has the Array type.</li>\n<li>Progress is now displayed correctly in the system.merges table.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54289-2017-09-13\">ClickHouse release 1.1.54289, 2017-09-13<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54289-2017-09-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_29\">New features:<a class=\"headerlink\" href=\"#new-features_29\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>SYSTEM</code> queries for server administration: <code>SYSTEM RELOAD DICTIONARY</code>, <code>SYSTEM RELOAD DICTIONARIES</code>, <code>SYSTEM DROP DNS CACHE</code>, <code>SYSTEM SHUTDOWN</code>, <code>SYSTEM KILL</code>.</li>\n<li>Added functions for working with arrays: <code>concat</code>, <code>arraySlice</code>, <code>arrayPushBack</code>, <code>arrayPushFront</code>, <code>arrayPopBack</code>, <code>arrayPopFront</code>.</li>\n<li>Added <code>root</code> and <code>identity</code> parameters for the ZooKeeper configuration. This allows you to isolate individual users on the same ZooKeeper cluster.</li>\n<li>Added aggregate functions <code>groupBitAnd</code>, <code>groupBitOr</code>, and <code");
            
            document.write(">groupBitXor</code> (for compatibility, they are also available under the names <code>BIT_AND</code>, <code>BIT_OR</code>, and <code>BIT_XOR</code>).</li>\n<li>External dictionaries can be loaded from MySQL by specifying a socket in the filesystem.</li>\n<li>External dictionaries can be loaded from MySQL over SSL (<code>ssl_cert</code>, <code>ssl_key</code>, <code>ssl_ca</code>  parameters).</li>\n<li>Added the <code>max_network_bandwidth_for_user</code> setting to restrict the overall bandwidth use for queries per user.</li>\n<li>Support for <code>DROP TABLE</code> for temporary tables.</li>\n<li>Support for reading <code>DateTime</code>  values in Unix timestamp format from the <code>CSV</code>  and <code>JSONEachRow</code>  formats.</li>\n<li>Lagging replicas in distributed queries are now excluded by default (the default threshold is 5 minutes).</li>\n<li>FIFO locking is used during ALTER: an ALTER query isn't blocked indefinitely for continuously running queries.</li>\n<li>Option to set <code>umask</code>  in the config file.</li>\n<li>Improved performance for queries with <code>DISTINCT</code> .</li>\n</ul>\n<h4 id=\"bug-fixes_54\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_54\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improved the process for deleting old nodes in ZooKeeper. Previously, old nodes sometimes didn't get deleted if there were very frequent inserts, which caused the server to be slow to shut down, among other things.</li>\n<li>Fixed randomization when choosing hosts for the connection to ZooKeeper.</li>\n<li>Fixed the exclusion of lagging replicas in distributed queries if the replica is localhost.</li>\n<li>Fixed an error where a data part in a <code>ReplicatedMergeTree</code>  table could be broken after running <code>ALTER MODIFY</code>  on an element in a <code>Nested</code>  structure.</li>\n<li>Fixed an error that could cause SELECT queries to \"hang\".</li>\n<li>Improvements to distributed DDL queries.</li>\n<li>Fixed the query <code>CREATE TABLE ... AS &lt;materialized view&gt;</code>.</li>\n<li>Resolved the deadlock in the <code>ALTER ... CLEAR COLUMN IN PARTITION</code>  query for <code>Buffer</code>  tables.</li>\n<li>Fixed the invalid default value for <code>Enum</code> s (0 instead of the minimum) when using the <code>JSONEachRow</code>  and <code>TSKV</code>  formats.</li>\n<li>Resolved the appearance of zombie processes when using a dictionary with an <code>executable</code>  source.</li>\n<li>Fixed segfault for the HEAD query.</li>\n</ul>\n<h4 id=\"improved-workflow-for-developing-and-assembling-clickhouse\">Improved workflow for developing and assembling ClickHouse:<a class=\"headerlink\" href=\"#improved-workflow-for-developing-and-assembling-clickhouse\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>You can use <code>pbuilder</code>  to build ClickHouse.</li>\n<li>You can use <code>libc++</code>  instead of <code>libstdc++</code> for builds on Linux.</li>\n<li>Added instructions for using static code analysis tools: <code>Coverage</code>, <code>clang-tidy</code>, <code>cppcheck</code>.</li>\n</ul>\n<h4 id=\"please-note-when-upgrading_1\">Please note when upgrading:<a class=\"headerlink\" href=\"#please-note-when-upgrading_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>There is now a higher default value for the MergeTree setting <code>max_bytes_to_merge_at_max_space_in_pool</code>  (the maximum total size of data parts to merge, in bytes): it has increased from 100 GiB to 150 GiB. This might result in large merges running after the server upgrade, which could cause an increased load on the disk subsystem. If the free space available on the server is less than twice the total amount of the merges that are running, this will cause all other merges to stop running, including merges of small data parts. As a result, INSERT queries will fail with the message \"Merges are processing significantly slower than inserts.\" Use the <code>SELECT * FROM system.merges</code>  query to monitor the situation. You can also check the <code>DiskSpaceReservedForMerge</code>  metric in the <code>system.metrics</code>  table, or in Graphite. You don't need to do anything to fix this, since the issue will resolve itself once the large merges finish. If you find this unacceptable, you can restore the previous value for the <code>max_bytes_to_merge_at_max_space_in_pool</code>  setting. To do this, go to the <merge_tree> section in config.xml, set <code>&lt;merge_tree&gt;``&lt;max_bytes_to_merge_at_max_space_in_pool&gt;107374182400&lt;/max_bytes_to_merge_at_max_space_in_pool&gt;</code> and restart the server.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54284-2017-08-29\">ClickHouse release 1.1.54284, 2017-08-29<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54284-2017-08-29\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>This is a bugfix release for the previous 1.1.54282 release. It fixes leaks in the parts directory in ZooKeeper.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54282-2017-08-23\">ClickHouse release 1.1.54282, 2017-08-23<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54282-2017-08-23\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains bug fixes for the previous release 1.1.54276:</p>\n<ul>\n<li>Fixed <code>DB::Exception: Assertion violation: !_path.empty()</code> when inserting into a Distributed table.</li>\n<li>Fixed parsing when inserting in RowBinary format if input data starts with';'.</li>\n<li>Errors during runtime compilation of certain aggregate functions (e.g. <code>groupArray()</code>).</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54276-2017-08-16\">Clickhouse Release 1.1.54276, 2017-08-16<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54276-2017-08-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_30\">New features:<a class=\"headerlink\" href=\"#new-features_30\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added an optional WITH section for a SELECT query. Example query: <code>WITH 1+1 AS a SELECT a, a*a</code></li>\n<li>INSERT can be performed synchronously in a Distributed table: OK is returned only after all the data is saved on all the shards. This is activated by the setting insert_distributed_sync=1.</li>\n<li>Added the UUID data type for working with 16-byte identifiers.</li>\n<li>Added aliases of CHAR, FLOAT and other types for compatibility with the Tableau.</li>\n<li>Added the functions toYYYYMM, toYYYYMMDD, and toYYYYMMDDhhmmss for converting time into numbers.</li>\n<li>You can use IP addresses (together with the hostname) to identify servers for clustered DDL queries.</li>\n<li>Added support for non-constant arguments and negative offsets in the function <code>substring(str, pos, len).</code></li>\n<li>Added the max_size parameter for the <code>groupArray(max_size)(column)</code> aggregate function, and optimized its performance.</li>\n</ul>\n<h4 id=\"main-changes\">Main changes:<a class=\"headerlink\" href=\"#main-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Security improvements: all server files are created with 0640 permissions (can be changed via <umask> config parameter).</li>\n<li>Improved error messages for queries with invalid syntax.</li>\n<li>Significantly reduced memory consumption and improved performance when merging large sections of MergeTree data.</li>\n<li>Significantly increased the performance of data merges for the ReplacingMergeTree engine.</li>\n<li>Improved performance for asynchronous inserts from a Distributed table by combining multiple source inserts. To enable this functionality, use the setting distributed_directory_monitor_batch_inserts=1.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_16\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Changed the binary format of aggregate states of <code>groupArray(array_column)</code> functions for arrays.</li>\n</ul>\n<h4 id=\"complete-list-of-changes\">Complete list of changes:<a class=\"headerlink\" href=\"#complete-list-of-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>output_format_json_quote_denormals</code> setting, which enables outputting nan and inf values in JSON format.</li>\n<li>Optimized stream allocation when reading from a Distributed table.</li>\n<li>Settings can be configured in readonly mode if the value doesn't change.</li>\n<li>Added the ability to retrieve non-integer granules of the MergeTree engine in order to meet restrictions on the block size specified in the preferred_block_size_bytes setting. The purpose is to reduce the consumption of RAM and increase cache locality when processing queries from tables with large columns.</li>\n<li>Efficient use of indexes that contain expressions like <code>toStartOfHour(x)</code> for conditions like <code>toStartOfHour(x) op \u0441onstexpr.</code></li>\n<li>Added new settings for MergeTree engines (the merge_tree section in config.xml):</li>\n<li>replicated_deduplication_window_seconds sets the number of seconds allowed for deduplicating inserts in Replicated tables.</li>\n<li>cleanup_delay_period sets how often to start cleanup to remove outdated data.</li>\n<li>replicated_can_become_leader can prevent a replica from becoming the leader (and assigning merges).</li>\n<li>Accelerated cleanup to remove outdated data from ZooKeeper.</li>\n<li>Multiple improvements and fixes for clustered DDL queries. Of particular interest is the new setting distributed_ddl_task_timeout, which limits the time to wait for a response from the servers in the cluster. If a ddl request has not been performed on all hosts, a response will contain a timeout error and a request will be executed in an async mode.</li>\n<li>Improved display of stack traces in the server logs.</li>\n<li>Added the \"none\" value for the compression method.</li>\n<li>You can use multiple dictionaries_config sections in config.xml.</li>\n<li>It is possible to connect to MySQL through a socket in the file system.</li>\n<li>The system.parts table has a new column with information about the size of marks, in bytes.</li>\n</ul>\n<h4 id=\"bug-fixes_55\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_55\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Distributed tables using a Merge table now work correctly for a SELECT query with a con");
            
            document.write("dition on the  <code>_table</code> field.</li>\n<li>Fixed a rare race condition in ReplicatedMergeTree when checking data parts.</li>\n<li>Fixed possible freezing on \"leader election\" when starting a server.</li>\n<li>The max_replica_delay_for_distributed_queries setting was ignored when using a local replica of the data source. This has been fixed.</li>\n<li>Fixed incorrect behavior of <code>ALTER TABLE CLEAR COLUMN IN PARTITION</code> when attempting to clean a non-existing column.</li>\n<li>Fixed an exception in the multiIf function when using empty arrays or strings.</li>\n<li>Fixed excessive memory allocations when deserializing Native format.</li>\n<li>Fixed incorrect auto-update of Trie dictionaries.</li>\n<li>Fixed an exception when running queries with a GROUP BY clause from a Merge table when using SAMPLE.</li>\n<li>Fixed a crash of GROUP BY when  using distributed_aggregation_memory_efficient=1.</li>\n<li>Now you can specify the database.table in the right side of IN and JOIN.</li>\n<li>Too many threads were used for parallel aggregation. This has been fixed.</li>\n<li>Fixed how the \"if\" function works with FixedString arguments.</li>\n<li>SELECT worked incorrectly from a Distributed table for shards with a weight of 0. This has been fixed.</li>\n<li>Running <code>CREATE VIEW IF EXISTS no longer causes crashes.</code></li>\n<li>Fixed incorrect behavior when input_format_skip_unknown_fields=1 is set and there are negative numbers.</li>\n<li>Fixed an infinite loop in the <code>dictGetHierarchy()</code> function if there is some invalid data in the dictionary.</li>\n<li>Fixed <code>Syntax error: unexpected (...)</code> errors  when running distributed queries with subqueries in an IN or JOIN clause and Merge tables.</li>\n<li>Fixed an incorrect interpretation of a SELECT query from Dictionary tables.</li>\n<li>Fixed the \"Cannot mremap\" error when using arrays in IN and JOIN clauses with more than 2 billion elements.</li>\n<li>Fixed the failover for dictionaries with MySQL as the source.</li>\n</ul>\n<h4 id=\"improved-workflow-for-developing-and-assembling-clickhouse_1\">Improved workflow for developing and assembling ClickHouse:<a class=\"headerlink\" href=\"#improved-workflow-for-developing-and-assembling-clickhouse_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Builds can be assembled in Arcadia.</li>\n<li>You can use gcc 7 to compile ClickHouse.</li>\n<li>Parallel builds using ccache+distcc are faster now.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54245-2017-07-04\">ClickHouse release 1.1.54245, 2017-07-04<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54245-2017-07-04\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_31\">New features:<a class=\"headerlink\" href=\"#new-features_31\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Distributed DDL (for example, <code>CREATE TABLE ON CLUSTER</code>)</li>\n<li>The replicated query <code>ALTER TABLE CLEAR COLUMN IN PARTITION.</code></li>\n<li>The engine for Dictionary tables (access to dictionary data in the form of a table).</li>\n<li>Dictionary database engine (this type of database automatically has Dictionary tables available for all the connected external dictionaries).</li>\n<li>You can check for updates to the dictionary by sending a request to the source.</li>\n<li>Qualified column names</li>\n<li>Quoting identifiers using double quotation marks.</li>\n<li>Sessions in the HTTP interface.</li>\n<li>The OPTIMIZE query for a Replicated table can can run not only on the leader.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_17\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed SET GLOBAL.</li>\n</ul>\n<h4 id=\"minor-changes\">Minor changes:<a class=\"headerlink\" href=\"#minor-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Now after an alert is triggered, the log prints the full stack trace.</li>\n<li>Relaxed the verification of the number of damaged/extra data parts at startup (there were too many false positives).</li>\n</ul>\n<h4 id=\"bug-fixes_56\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_56\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a bad connection \"sticking\" when inserting into a Distributed table.</li>\n<li>GLOBAL IN now works for a query from a Merge table that looks at a Distributed table.</li>\n<li>The incorrect number of cores was detected on a Google Compute Engine virtual machine. This has been fixed.</li>\n<li>Changes in how an executable source of cached external dictionaries works.</li>\n<li>Fixed the comparison of strings containing null characters.</li>\n<li>Fixed the comparison of Float32 primary key fields with constants.</li>\n<li>Previously, an incorrect estimate of the size of a field could lead to overly large allocations.</li>\n<li>Fixed a crash when querying a Nullable column added to a table using ALTER.</li>\n<li>Fixed a crash when sorting by a Nullable column, if the number of rows is less than LIMIT.</li>\n<li>Fixed an ORDER BY subquery consisting of only constant values.</li>\n<li>Previously, a Replicated table could remain in the invalid state after a failed DROP TABLE.</li>\n<li>Aliases for scalar subqueries with empty results are no longer lost.</li>\n<li>Now a query that used compilation does not fail with an error if the .so file gets damaged.<br />\n<a name=\"security_changelog/\"></a><a name=\"../../../../security_changelog/\"></a><a name=\"../../security_changelog/\"></a><a name=\"../security_changelog/\"></a><a name=\"../../../../../security_changelog/\"></a><a name=\"../../../security_changelog/\"></a></li>\n</ul>\n<h3 id=\"fixed-in-clickhouse-release-19-13-6-1-2019-09-20\">Fixed in ClickHouse Release 19.13.6.1, 2019-09-20<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-19-13-6-1-2019-09-20\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2019-18657\">CVE-2019-18657<a class=\"headerlink\" href=\"#cve-2019-18657\" title=\"Permanent link\">&para;</a></h4>\n<p>Table function <code>url</code> had the vulnerability allowed the attacker to inject arbitrary HTTP headers in the request.</p>\n<p>Credits: <a href=\"https://github.com/NSTikhomirov\" rel=\"external nofollow noreferrer\">Nikita Tikhomirov</a></p>\n<h3 id=\"fixed-in-clickhouse-release-18-12-13-2018-09-10\">Fixed in ClickHouse Release 18.12.13, 2018-09-10<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-18-12-13-2018-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14672\">CVE-2018-14672<a class=\"headerlink\" href=\"#cve-2018-14672\" title=\"Permanent link\">&para;</a></h4>\n<p>Functions for loading CatBoost models allowed path traversal and reading arbitrary files through error messages.</p>\n<p>Credits: Andrey Krasichkov of Yandex Information Security Team</p>\n<h3 id=\"fixed-in-clickhouse-release-18-10-3-2018-08-13\">Fixed in ClickHouse Release 18.10.3, 2018-08-13<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-18-10-3-2018-08-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14671\">CVE-2018-14671<a class=\"headerlink\" href=\"#cve-2018-14671\" title=\"Permanent link\">&para;</a></h4>\n<p>unixODBC allowed loading arbitrary shared objects from the file system which led to a Remote Code Execution vulnerability.</p>\n<p>Credits: Andrey Krasichkov and Evgeny Sidorov of Yandex Information Security Team</p>\n<h3 id=\"fixed-in-clickhouse-release-1-1-54388-2018-06-28\">Fixed in ClickHouse Release 1.1.54388, 2018-06-28<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-1-1-54388-2018-06-28\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14668\">CVE-2018-14668<a class=\"headerlink\" href=\"#cve-2018-14668\" title=\"Permanent link\">&para;</a></h4>\n<p>\"remote\" table function allowed arbitrary symbols in \"user\", \"password\" and \"default_database\" fields which led to Cross Protocol Request Forgery Attacks.</p>\n<p>Credits: Andrey Krasichkov of Yandex Information Security Team</p>\n<h3 id=\"fixed-in-clickhouse-release-1-1-54390-2018-07-06\">Fixed in ClickHouse Release 1.1.54390, 2018-07-06<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-1-1-54390-2018-07-06\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14669\">CVE-2018-14669<a class=\"headerlink\" href=\"#cve-2018-14669\" title=\"Permanent link\">&para;</a></h4>\n<p>ClickHouse MySQL client had \"LOAD DATA LOCAL INFILE\" functionality enabled that allowed a malicious MySQL database read arbitrary files from the connected ClickHouse server.</p>\n<p>Credits: Andrey Krasichkov and Evgeny Sidorov of Yandex Information Security Team</p>\n<h3 id=\"fixed-in-clickhouse-release-1-1-54131-2017-01-10\">Fixed in ClickHouse Release 1.1.54131, 2017-01-10<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-1-1-54131-2017-01-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14670\">CVE-2018-14670<a class=\"headerlink\" href=\"#cve-2018-14670\" title=\"Permanent link\">&para;</a></h4>\n<p>Incorrect configuration in deb package could lead to unauthorized use of the database.</p>\n<p>Credits: the UK's National Cyber Security Centre (NCSC)</p>");
            
        </script> </div> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
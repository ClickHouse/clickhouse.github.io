<!DOCTYPE html><html lang=ru data-version=v20.1 data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Подробный roadmap 2020 - Документация ClickHouse v20.1</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Подробный roadmap 2020 - Документация ClickHouse v20.1"><meta property=og:description content="Планы разработки ClickHouse 2020. Здесь собраны важные задачи на 2020 год. Многие из них присутствуют в GitHub Issues. Д"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Подробный roadmap 2020 - Документация ClickHouse v20.1"><meta name=description content="Планы разработки ClickHouse 2020. Здесь собраны важные задачи на 2020 год. Многие из них присутствуют в GitHub Issues. Д"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Подробный roadmap 2020 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/extended_roadmap.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ru.svg alt=Русский title=Русский width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v20.1/en/extended_roadmap/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v20.1/zh/extended_roadmap/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v20.1/es/extended_roadmap/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v20.1/fr/extended_roadmap/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v20.1/ru/extended_roadmap/ class="dropdown-item disabled"> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v20.1/ja/extended_roadmap/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v20.1/fa/extended_roadmap/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Многостраничный или одностраничный"> <a href=.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Многостраничная версия" title="Многостраничная версия"> </a> <a href=../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Одностраничная версия" title="Одностраничная версия"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Версия: <span class=text-light>v20.1</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ru/ class=dropdown-item> <span class=text-light>последняя</span> </a> <a href=/docs/v20.3/ru/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ru/ class="dropdown-item disable">v20.1</a> <a href=/docs/v19.17/ru/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ru/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ru/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ru/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ru/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/ru/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ru/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ru/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ru/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Введение class="nav-link text-light text-wrap dropdown-toggle px-0">Введение</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../introduction/distinctive_features/ title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a> <a href=../introduction/features_considered_disadvantages/ title="Особенности ClickHouse, которые могут считаться недостатками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Особенности ClickHouse, которые могут считаться недостатками</a> <a href=../introduction/performance/ title=Производительность class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a> <a href=../introduction/history/ title=История class="nav-link text-light text-wrap d-inline-block w-100 px-0">История</a> <a href=../introduction/info/ title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title="Начало работы" class="nav-link text-light text-wrap dropdown-toggle px-0">Начало работы</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../getting_started/install/ title=Установка class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка</a> <a href=../getting_started/tutorial/ title="Руководство для начинающих" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Руководство для начинающих</a> <a href=#sidebar-sidebar-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-4 title="Тестовые наборы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Тестовые наборы данных</a> <div id=sidebar-sidebar-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../getting_started/example_datasets/nyc_taxi/ title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a> <a href=../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../getting_started/example_datasets/criteo/ title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a> <a href=../getting_started/example_datasets/star_schema/ title="Схема «Звезда»" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Схема «Звезда»</a> <a href=../getting_started/example_datasets/metrica/ title="Данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные Яндекс.Метрики</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Интерфейсы class="nav-link text-light text-wrap dropdown-toggle px-0">Интерфейсы</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../interfaces/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../interfaces/cli/ title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a> <a href=../interfaces/tcp/ title="Нативный интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Нативный интерфейс (TCP)</a> <a href=../interfaces/http/ title=HTTP-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a> <a href=../interfaces/formats/ title="Форматы входных и выходных данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a> <a href=../interfaces/jdbc/ title=JDBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a> <a href=../interfaces/odbc/ title=ODBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a> <a href=../interfaces/cpp/ title="C++ клиентская библиотека" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ клиентская библиотека</a> <a href=#sidebar-sidebar-3-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9 title="От сторонних разработчиков" class="nav-link text-light text-wrap dropdown-toggle px-0">От сторонних разработчиков</a> <div id=sidebar-sidebar-3-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../interfaces/third-party/client_libraries/ title="Клиентские библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки</a> <a href=../interfaces/third-party/integrations/ title=Интеграции class="nav-link text-light text-wrap d-inline-block w-100 px-0">Интеграции</a> <a href=../interfaces/third-party/gui/ title="Визуальные интерфейсы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы</a> <a href=../interfaces/third-party/proxy/ title=Прокси class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title="Движки баз данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки баз данных</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../database_engines/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="Движки таблиц" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки таблиц</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/table_engines/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Семейство MergeTree" class="nav-link text-light text-wrap dropdown-toggle px-0">Семейство MergeTree</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/table_engines/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../operations/table_engines/replication/ title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a> <a href=../operations/table_engines/custom_partitioning_key/ title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a> <a href=../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../operations/table_engines/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Семейство Log" class="nav-link text-light text-wrap dropdown-toggle px-0">Семейство Log</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/table_engines/log_family/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../operations/table_engines/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../operations/table_engines/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../operations/table_engines/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-4 title=Интеграции class="nav-link text-light text-wrap dropdown-toggle px-0">Интеграции</a> <div id=sidebar-sidebar-5-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/table_engines/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../operations/table_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../operations/table_engines/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../operations/table_engines/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../operations/table_engines/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title=Особые class="nav-link text-light text-wrap dropdown-toggle px-0">Особые</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/table_engines/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../operations/table_engines/external_data/ title="Внешние данные" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные</a> <a href=../operations/table_engines/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../operations/table_engines/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../operations/table_engines/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../operations/table_engines/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../operations/table_engines/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../operations/table_engines/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../operations/table_engines/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../operations/table_engines/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../operations/table_engines/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../operations/table_engines/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../operations/table_engines/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="Справка по SQL" class="nav-link text-light text-wrap dropdown-toggle px-0">Справка по SQL</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../query_language/syntax/ title="Общий синтаксис" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общий синтаксис</a> <a href=#sidebar-sidebar-6-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-3 title=Запросы class="nav-link text-light text-wrap dropdown-toggle px-0">Запросы</a> <div id=sidebar-sidebar-6-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../query_language/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../query_language/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../query_language/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../query_language/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../query_language/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../query_language/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../query_language/misc/ title=Прочие class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие</a> </nav> </div> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Функции class="nav-link text-light text-wrap dropdown-toggle px-0">Функции</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../query_language/functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../query_language/functions/arithmetic_functions/ title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a> <a href=../query_language/functions/comparison_functions/ title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a> <a href=../query_language/functions/logical_functions/ title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a> <a href=../query_language/functions/type_conversion_functions/ title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a> <a href=../query_language/functions/date_time_functions/ title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a> <a href=../query_language/functions/string_functions/ title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a> <a href=../query_language/functions/string_search_functions/ title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a> <a href=../query_language/functions/string_replace_functions/ title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a> <a href=../query_language/functions/conditional_functions/ title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a> <a href=../query_language/functions/math_functions/ title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a> <a href=../query_language/functions/rounding_functions/ title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a> <a href=../query_language/functions/array_functions/ title="Функции по работе с массивами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции по работе с массивами</a> <a href=../query_language/functions/splitting_merging_functions/ title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a> <a href=../query_language/functions/bit_functions/ title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a> <a href=../query_language/functions/bitmap_functions/ title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a> <a href=../query_language/functions/hash_functions/ title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a> <a href=../query_language/functions/random_functions/ title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a> <a href=../query_language/functions/uuid_functions/ title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a> <a href=../query_language/functions/encoding_functions/ title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a> <a href=../query_language/functions/url_functions/ title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a> <a href=../query_language/functions/ip_address_functions/ title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a> <a href=../query_language/functions/json_functions/ title="Функции для работы с JSON." class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с JSON.</a> <a href=../query_language/functions/higher_order_functions/ title="Функции высшего порядка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции высшего порядка</a> <a href=../query_language/functions/ext_dict_functions/ title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a> <a href=../query_language/functions/ym_dict_functions/ title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a> <a href=../query_language/functions/in_functions/ title="Функции для реализации оператора IN." class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN.</a> <a href=../query_language/functions/array_join/ title="Функция arrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция arrayJoin</a> <a href=../query_language/functions/geo/ title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a> <a href=../query_language/functions/functions_for_nulls/ title="Функции c Nullable аргументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции c Nullable аргументами</a> <a href=../query_language/functions/machine_learning_functions/ title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a> <a href=../query_language/functions/other_functions/ title="Прочие функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие функции</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Агрегатные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Агрегатные функции</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../query_language/agg_functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../query_language/agg_functions/reference/ title="Справочник функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Справочник функций</a> <a href=../query_language/agg_functions/combinators/ title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a> <a href=../query_language/agg_functions/parametric_functions/ title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Табличные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Табличные функции</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../query_language/table_functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../query_language/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../query_language/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../query_language/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../query_language/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../query_language/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../query_language/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../query_language/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../query_language/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../query_language/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../query_language/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Словари class="nav-link text-light text-wrap dropdown-toggle px-0">Словари</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../query_language/dicts/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="Внешние словари" class="nav-link text-light text-wrap dropdown-toggle px-0">Внешние словари</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../query_language/dicts/external_dicts/ title="Общее описание" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общее описание</a> <a href=../query_language/dicts/external_dicts_dict/ title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a> <a href=../query_language/dicts/external_dicts_dict_layout/ title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a> <a href=../query_language/dicts/external_dicts_dict_lifetime/ title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a> <a href=../query_language/dicts/external_dicts_dict_sources/ title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a> <a href=../query_language/dicts/external_dicts_dict_structure/ title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a> </nav> </div> <a href=../query_language/dicts/internal_dicts/ title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a> </nav> </div> <a href=../query_language/operators/ title=Операторы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a> <a href=#sidebar-sidebar-6-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9 title="Типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Типы данных</a> <div id=sidebar-sidebar-6-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../data_types/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../data_types/boolean/ title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a> <a href=../data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=../data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-6-9-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9-16 title="Вложенные структуры данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Вложенные структуры данных</a> <div id=sidebar-sidebar-6-9-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=#sidebar-sidebar-6-9-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9-17 title="Служебные типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Служебные типы данных</a> <div id=sidebar-sidebar-6-9-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> </nav> </div> <a href=#sidebar-sidebar-6-9-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9-18 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-9-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Руководства class="nav-link text-light text-wrap dropdown-toggle px-0">Руководства</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../guides/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../guides/apply_catboost_model/ title="Применение CatBoost моделей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение CatBoost моделей</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Эксплуатация class="nav-link text-light text-wrap dropdown-toggle px-0">Эксплуатация</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../operations/requirements/ title=Требования class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a> <a href=../operations/monitoring/ title=Мониторинг class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a> <a href=../operations/troubleshooting/ title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a> <a href=../operations/tips/ title="Советы по эксплуатации" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Советы по эксплуатации</a> <a href=../operations/update/ title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a> <a href=../operations/access_rights/ title="Права доступа" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Права доступа</a> <a href=../operations/backup/ title="Резервное копирование" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование</a> <a href=../operations/configuration_files/ title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a> <a href=../operations/quotas/ title=Квоты class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a> <a href=../operations/system_tables/ title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a> <a href=../operations/performance_test/ title="Тестирование оборудования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Тестирование оборудования</a> <a href=#sidebar-sidebar-8-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-13 title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap dropdown-toggle px-0">Конфигурационные параметры сервера</a> <div id=sidebar-sidebar-8-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/server_settings/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../operations/server_settings/settings/ title="Серверные настройки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Серверные настройки</a> </nav> </div> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Настройки class="nav-link text-light text-wrap dropdown-toggle px-0">Настройки</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/settings/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../operations/settings/permissions_for_queries/ title="Разрешения на выполнение запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения на выполнение запросов</a> <a href=../operations/settings/query_complexity/ title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a> <a href=../operations/settings/settings/ title=Настройки class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a> <a href=../operations/settings/constraints_on_settings/ title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a> <a href=../operations/settings/settings_profiles/ title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a> <a href=../operations/settings/settings_users/ title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Утилиты class="nav-link text-light text-wrap dropdown-toggle px-0">Утилиты</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../operations/utils/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../operations/utils/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../operations/utils/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Разработка class="nav-link text-light text-wrap dropdown-toggle px-0">Разработка</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../development/architecture/ title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a> <a href=../development/build/ title="Как собрать ClickHouse на Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как собрать ClickHouse на Linux</a> <a href=../development/build_osx/ title="Как собрать ClickHouse на Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как собрать ClickHouse на Mac OS X</a> <a href=../development/build_cross_osx/ title="Как собрать ClickHouse на Linux для Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как собрать ClickHouse на Linux для Mac OS X</a> <a href=../development/style/ title="Как писать код на C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как писать код на C++</a> <a href=../development/tests/ title="Как запустить тесты" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как запустить тесты</a> <a href=../development/developer_instruction/ title="Инструкция для начинающего разработчика ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Инструкция для начинающего разработчика ClickHouse</a> <a href=../development/contrib/ title="Сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Сторонние библиотеки</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="Что нового" class="nav-link text-light text-wrap dropdown-toggle px-0">Что нового</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../changelog/ title=Changelog class="nav-link text-light text-wrap d-inline-block w-100 px-0">Changelog</a> <a href=../security_changelog/ title="Security changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security changelog</a> <a href=../roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../extended_roadmap/ title="Подробный roadmap 2020" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Подробный roadmap 2020</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../faq/general/ title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a> </nav> </div> <a href=../single/clickhouse_ru.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF-версия title=PDF-версия height=24 class="d-block mr-1 float-left"><div>PDF-версия</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=plany-razrabotki-clickhouse-2020>Планы разработки ClickHouse 2020.<a class=headerlink href=#plany-razrabotki-clickhouse-2020 title="Permanent link">&para;</a></h1> <p>Здесь собраны важные задачи на 2020 год. Многие из них присутствуют в GitHub Issues. Данный текст следует рассматривать как рабочий черновик со сводкой и кратким описанием задач, ссылками и материалами для быстрого доступа на одной странице. Классификация задач условная.</p> <p>Так как ClickHouse - open-source продукт, мы хотим, чтобы рабочий процесс был также максимально открытым. В связи с этим, вам следует ожидать наличия на данной странице несколько большего количества деталей описания рабочего процесса, чем вы могли бы предположить - настолько близко, насколько рабочий процесс видят разработчики. Так как неотъемлимой частью процесса разработки является исправление недостатков продукта и улучшение качества кода, на данной странице вы найдёте весьма подробные описания таких деталей. Для других open-source продуктов такой подход к разработке обычно нехарактерен. Благодаря тому, что для каждой задачи указаны её зависимости, вы сможете понять, какие подготовительные работы требуются, что позволяет более точно понимать сроки реализации.</p> <h2 id=1-khranenie-dannykh-indeksatsiia>1. Хранение данных, индексация.<a class=headerlink href=#1-khranenie-dannykh-indeksatsiia title="Permanent link">&para;</a></h2> <h3 id=1-1-indeksy-po-z-order-curve-normalized-z-order-curve>1.1. Индексы по z-Order curve, normalized z-Order curve.<a class=headerlink href=#1-1-indeksy-po-z-order-curve-normalized-z-order-curve title="Permanent link">&para;</a></h3> <p>Задача также относится к категории "17. Работа с географическими данными", так как geoHash - это частный случай z-Order curve.<br> Также связана с задачей 24.27 для нечёткого поиска полудубликатов строк, так как позволит индексировать min-hash.<br> Задача "normalized z-Order curve" в перспективе может быть полезна для БК и Метрики, так как позволяет смешивать OrderID и PageID и избежать дублирования данных.<br> В задаче также вводится способ индексации путём обращения функции нескольких аргументов на интервале, что имеет смысл для дальнейшего развития.</p> <p>Изначально делал <a href=https://github.com/achulkov2 rel="external nofollow noreferrer">Андрей Чулков</a>, ВШЭ, теперь доделывает <a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>, но сроки немного сдвинуты из-за задачи 25.9. Будем надеятся на реализацию к концу ноября. Впрочем, <a href=https://github.com/achulkov2 rel="external nofollow noreferrer">Андрей Чулков</a> скоро сможет помочь её доделать.</p> <h3 id=1-2-wait-free-katalog-baz-dannykh>1.2. Wait-free каталог баз данных.<a class=headerlink href=#1-2-wait-free-katalog-baz-dannykh title="Permanent link">&para;</a></h3> <p>Делает <a href=https://github.com/tavplubix rel="external nofollow noreferrer">Александр Токмаков</a>, первый рабочий вариант в декабре 2019. Нужно для DataLens и Яндекс.Метрики.</p> <p>Манипуляции с каталогом баз данных: запросы CREATE TABLE, DROP TABLE, RENAME TABLE и DATABASE, требуют синхронизации с помощью блокировок. Эта синхронизация становится весьма сложной, так как на неё полагается много внутренних структур данных.</p> <p>Предлагается реализовать альтернативный подход, в котором таблицы и базы данных являются всего лишь ссылками на persistent объекты. Подробное описание задачи: <a href=https://github.com/yandex/ClickHouse/issues/6787>https://github.com/yandex/ClickHouse/issues/6787</a></p> <h3 id=1-3-neblokiruiushchie-alter>1.3. Неблокирующие ALTER.<a class=headerlink href=#1-3-neblokiruiushchie-alter title="Permanent link">&para;</a></h3> <p>И полностью immutable куски. Делает <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>. Готов приступить к задаче в конце ноября 2019. Нужно для Яндекс.Метрики.</p> <h3 id=1-4-netranzitivnye-alter-stolbtsov>1.4. Нетранзитивные ALTER столбцов.<a class=headerlink href=#1-4-netranzitivnye-alter-stolbtsov title="Permanent link">&para;</a></h3> <p>Требует 1.3. Будет делать <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>.</p> <h3 id=1-5-alter-rename-column>1.5. ALTER RENAME COLUMN.<a class=headerlink href=#1-5-alter-rename-column title="Permanent link">&para;</a></h3> <p>Требует 1.3. Будет делать <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>.</p> <h3 id=1-6-polimorfnye-kuski-dannykh>1.6. Полиморфные куски данных.<a class=headerlink href=#1-6-polimorfnye-kuski-dannykh title="Permanent link">&para;</a></h3> <p>Делает <a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Антон Попов</a>, первый рабочий вариант в декабре. Пререквизит чтобы снизить сложность мелких INSERT, что в свою очередь нужно для 1.12, иначе задача 1.12 не сможет нормально работать. Особенно нужно для Яндекс.Облака.</p> <p>Данные в таблицах типа MergeTree в ClickHouse хранятся в виде набора независимых "кусков". Внутри куска, каждый столбец, а также индекс, хранится в отдельных файлах. Это сделано для возможности быстрых манипуляций со столбцами (пример - запрос ALTER DROP COLUMN). При вставке данных (INSERT), создаётся новый кусок. Для таблиц с большим количеством столбцов, запросы INSERT с маленьким количеством строк являются неэффективными, так как требуют создания большого количества файлов в файловой системе. Это является врождённой особенностью ClickHouse - одной из первой проблем, с которыми сталкиваются пользователи. Пользователям приходится буферизовывать данные и собирать их в более крупные пачки перед вставкой в ClickHouse.</p> <p>Для смягчения эффекта от этой проблемы, в ClickHouse существуют таблицы типа Buffer. Они накапливают данные в оперативке перед записью в другую таблицу. Впрочем, таблицы Buffer не являются полноценным решением проблемы из-за: - наличия блокировок при вставке; - переупорядочивание вставляемых данных; - неатомарность перекладывания данных из Buffer в результирующую таблицу.</p> <p>Вместо этого предлагается разрешить кускам таблиц типа MergeTree располагать данные в разных форматах. А именно: - в оперативной памяти; - на диске со всеми столбцами в одном файле; - на диске со столбцами в отдельных файлах: в зависимости от размера куска и прошедшего времени. Для размещения кусков в оперативной памяти, придётся также реализовать опциональную поддержку write-ahead log с настраиваемыми правилами по сбросу на диск. Это позволит избавиться от проблем с мелкими вставками для MergeTree таблиц. Для ReplicatedMergeTree таблиц, это решит проблему лишь частично.</p> <h3 id=1-7-buferizatsiia-i-wal-v-mergetree>1.7. Буферизация и WAL в MergeTree.<a class=headerlink href=#1-7-buferizatsiia-i-wal-v-mergetree title="Permanent link">&para;</a></h3> <p>Требует 1.6.</p> <h3 id=1-8-perenos-mezhdu-razdelami-po-ttl>1.8. Перенос между разделами по TTL.<a class=headerlink href=#1-8-perenos-mezhdu-razdelami-po-ttl title="Permanent link">&para;</a></h3> <p>Делает <a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарёв</a>, Altinity. Декабрь 2019.</p> <h3 id=1-9-ispolzovanie-ttl-dlia-prorezhivaniia-dannykh>1.9. Использование TTL для прореживания данных.<a class=headerlink href=#1-9-ispolzovanie-ttl-dlia-prorezhivaniia-dannykh title="Permanent link">&para;</a></h3> <p>Будет делать Сорокин Николай, ВШЭ и Яндекс.</p> <p>Сейчас пользователь может задать в таблице выражение, которое определяет, сколько времени хранятся данные. Обычно это выражение задаётся относительно значения столбца с датой - например: удалять данные через три месяца. <a href=https://clickhouse.yandex/docs/ru/operations/table_engines/mergetree/#table_engine-mergetree-ttl>https://clickhouse.yandex/docs/ru/operations/table_engines/mergetree/#table_engine-mergetree-ttl</a></p> <p>Это может быть задано для всей таблицы (тогда строки целиком удаляются после указанного времени) или для отдельных столбцов (тогда данные столбца физически удаляются с диска, а строки в таблице остаются; при чтении значений столбца, они читаются как значения по-умолчанию).</p> <p>Но пользователи также хотят более продвинутый вариант этой функциональности: не удалять строки или столбцы целиком, а прореживать их - оставлять меньшее количество строк.</p> <p>И тут есть несколько вариантов:<br> 1. По прошествии времени, оставлять каждую N-ую строку.<br> 2. По прошествии времени, выполнять агрегацию данных, заменяя значения некоторых столбцов на значения агрегатных функций от множества значений в нескольких строках.</p> <p>Пункт 1 не представляет интереса, так как уже реализован с помощью TTL выражений для удаления данных. В качестве этого выражения можно прописать, например, cityHash64(*) % 10 = 0 ? now() : event_time + INTERVAL 3 MONTH. Правда как-то неудобно получается.</p> <p>А вот пункт 2 требуется продумать. Не очевидно даже, какой лучше использовать синтаксис для этого при создании таблицы. Но мы придумаем - сразу видно несколько вариантов.</p> <p>Частный случай такой задачи уже есть в <a href=https://clickhouse.yandex/docs/ru/operations/table_engines/graphitemergetree/ >https://clickhouse.yandex/docs/ru/operations/table_engines/graphitemergetree/</a> Но это было сделано для конкретной задачи. А надо обобщить.</p> <h3 id=1-10-perezhatie-starykh-dannykh-v-fone>1.10. Пережатие старых данных в фоне.<a class=headerlink href=#1-10-perezhatie-starykh-dannykh-v-fone title="Permanent link">&para;</a></h3> <p>Будет делать Кирилл Барухов, ВШЭ, экспериментальная реализация к весне 2020. Нужно для Яндекс.Метрики.</p> <p>Алгоритмы сжатия типа LZ77 позволяют потратить больше времени на сжатие данных, чтобы сжать данные сильнее, но при этом без проигрыша по скорости разжатия данных. В частности, этим свойством обладает LZ4 и ZSTD, которые используются в ClickHouse. Это позволяет использовать свободные ресурсы CPU, когда сервер не нагружен, для пережатия данных, чтобы данные занимали меньше места на дисках, и при этом сохранить или даже улучшить скорость обработки запросов.</p> <p>В то же время, ClickHouse обычно используется для "импульсного" сценария нагрузки. Запрос от пользователя обрабатывается максимально быстро, используя все ресурсы CPU, но в среднем по времени, сервер недостаточно нагружен.</p> <p>Предлагается добавить в ClickHouse настройки по пережатию данных и фоновые потоки, выполняющие эту задачу.</p> <h3 id=1-11-virtualnaia-failovaia-sistema>1.11. Виртуальная файловая система.<a class=headerlink href=#1-11-virtualnaia-failovaia-sistema title="Permanent link">&para;</a></h3> <p>Нужно для Яндекс.Облака. Делает Александр, Яндекс.Облако, а также Олег Ершов, ВШЭ и Яндекс.</p> <p>ClickHouse использует для хранения данных локальную файловую систему. Существует сценарий работы, в котором размещение старых (архивных) данных было бы выгодно на удалённой файловой системе. Если файловая система POSIX совместимая, то это не составляет проблем: ClickHouse успешно работает с Ceph, GlusterFS, MooseFS. Также востребованным является сценарий использования S3 (из-за доступности в облаке) или HDFS (для интеграции с Hadoop). Но эти файловые системы не являются POSIX совместимыми. Хотя для них существуют FUSE драйверы, но скорость работы сильно страдает и поддержка неполная.</p> <p>ClickHouse использует небольшое подмножество функций ФС, но в то же время, и некоторые специфические части: симлинки и хардлинки, O_DIRECT. Предлагается выделить всё взаимодействие с файловой системой в отдельный интерфейс.</p> <h3 id=1-12-eksperimentalnaia-realizatsiia-vfs-poverkh-s3-i-hdfs>1.12. Экспериментальная реализация VFS поверх S3 и HDFS.<a class=headerlink href=#1-12-eksperimentalnaia-realizatsiia-vfs-poverkh-s3-i-hdfs title="Permanent link">&para;</a></h3> <p>Нужно для Яндекс.Облака. Требует 1.11. Желательно 1.6 и 1.18.<br> Делает Александр, Яндекс.Облако (сначала часть для S3), а также Олег Ершов, ВШЭ и Яндекс.</p> <h3 id=1-13-uskorenie-zaprosov-s-final>1.13. Ускорение запросов с FINAL.<a class=headerlink href=#1-13-uskorenie-zaprosov-s-final title="Permanent link">&para;</a></h3> <p>Требует 2.1. Делает <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>. Нужно для Яндекс.Метрики.</p> <h3 id=1-14-ne-pisat-stolbtsy-polnostiu-sostoiashchie-iz-nulei>1.14. Не писать столбцы, полностью состоящие из нулей.<a class=headerlink href=#1-14-ne-pisat-stolbtsy-polnostiu-sostoiashchie-iz-nulei title="Permanent link">&para;</a></h3> <p>В очереди. Простая задача, является небольшим пререквизитом для потенциальной поддержки полуструктурированных данных.</p> <h3 id=1-15-vozmozhnost-imet-raznyi-pervichnyi-kliuch-v-raznykh-kuskakh>1.15. Возможность иметь разный первичный ключ в разных кусках.<a class=headerlink href=#1-15-vozmozhnost-imet-raznyi-pervichnyi-kliuch-v-raznykh-kuskakh title="Permanent link">&para;</a></h3> <p>Сложная задача, только после 1.3.</p> <h3 id=1-16-neskolko-fizicheskikh-predstavlenii-dlia-odnogo-kuska-dannykh>1.16. Несколько физических представлений для одного куска данных.<a class=headerlink href=#1-16-neskolko-fizicheskikh-predstavlenii-dlia-odnogo-kuska-dannykh title="Permanent link">&para;</a></h3> <p>Сложная задача, только после 1.3 и 1.6. Позволяет компенсировать 21.20.</p> <h3 id=1-17-neskolko-sortirovok-dlia-odnoi-tablitsy>1.17. Несколько сортировок для одной таблицы.<a class=headerlink href=#1-17-neskolko-sortirovok-dlia-odnoi-tablitsy title="Permanent link">&para;</a></h3> <p>Сложная задача, только после 1.3 и 1.6.</p> <h3 id=1-18-otdelnoe-khranenie-failov-kuskov>1.18. Отдельное хранение файлов кусков.<a class=headerlink href=#1-18-otdelnoe-khranenie-failov-kuskov title="Permanent link">&para;</a></h3> <p>Требует 1.3 и 1.6. Полная замена hard links на sym links, что будет лучше для 1.12.</p> <h2 id=2-krupnye-refaktoringi>2. Крупные рефакторинги.<a class=headerlink href=#2-krupnye-refaktoringi title="Permanent link">&para;</a></h2> <p>Для обоснования необходимости смотрите ссылки в описании других задач.</p> <h3 id=2-1-peredelka-konveiera-vypolneniia-zaprosov-na-processors>2.1. Переделка конвейера выполнения запросов на Processors.<a class=headerlink href=#2-1-peredelka-konveiera-vypolneniia-zaprosov-na-processors title="Permanent link">&para;</a></h3> <p>Делает <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>. Финальная стадия разработки. Включение по-умолчанию в конце декабря 2019. Удаление старого кода в начале 2020.</p> <h3 id=2-2-infrastruktura-sobytii-metrik-ogranichenii-kvot-trassirovki>2.2. Инфраструктура событий/метрик/ограничений/квот/трассировки.<a class=headerlink href=#2-2-infrastruktura-sobytii-metrik-ogranichenii-kvot-trassirovki title="Permanent link">&para;</a></h3> <p>В очереди. <a href=https://gist.github.com/alexey-milovidov/d62d73222d83b9319dc519cbb13aeff6>https://gist.github.com/alexey-milovidov/d62d73222d83b9319dc519cbb13aeff6</a></p> <h3 id=2-3-perenos-stolbtsovogo-ser-de-iz-datatype-v-column>2.3. Перенос столбцового ser/de из DataType в Column.<a class=headerlink href=#2-3-perenos-stolbtsovogo-ser-de-iz-datatype-v-column title="Permanent link">&para;</a></h3> <p>В очереди.</p> <h3 id=2-4-perevod-lowcardinality-iz-datatype-v-column-dobavlenie-columnsparse>2.4. Перевод LowCardinality из DataType в Column. Добавление ColumnSparse.<a class=headerlink href=#2-4-perevod-lowcardinality-iz-datatype-v-column-dobavlenie-columnsparse title="Permanent link">&para;</a></h3> <p>Требует 2.3.</p> <h3 id=2-5-versionirovanie-sostoianii-agregatnykh-funktsii>2.5. Версионирование состояний агрегатных функций.<a class=headerlink href=#2-5-versionirovanie-sostoianii-agregatnykh-funktsii title="Permanent link">&para;</a></h3> <p>В очереди.</p> <h3 id=2-6-pravaia-chast-in-kak-tip-dannykh-vypolnenie-in-v-vide-skaliarnogo-podzaprosa>2.6. Правая часть IN как тип данных. Выполнение IN в виде скалярного подзапроса.<a class=headerlink href=#2-6-pravaia-chast-in-kak-tip-dannykh-vypolnenie-in-v-vide-skaliarnogo-podzaprosa title="Permanent link">&para;</a></h3> <p>Требует 2.1.</p> <h3 id=2-7-normalizatsiia-context>2.7. Нормализация Context.<a class=headerlink href=#2-7-normalizatsiia-context title="Permanent link">&para;</a></h3> <p>В очереди.</p> <h3 id=2-8-deklarativnyi-parser-zaprosov>2.8. Декларативный парсер запросов.<a class=headerlink href=#2-8-deklarativnyi-parser-zaprosov title="Permanent link">&para;</a></h3> <p>Низкий приоритет. Задачу хочет сделать <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван Лежанкин</a> в свободное время, но пока ничего нет.</p> <h3 id=2-9-loggirovnie-v-format-stile>2.9. Логгировние в format-стиле.<a class=headerlink href=#2-9-loggirovnie-v-format-stile title="Permanent link">&para;</a></h3> <p>Делает <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван Лежанкин</a>. Низкий приоритет.</p> <h3 id=2-10-zaprashivat-u-tablits-ne-stolbtsy-a-srezy>2.10. Запрашивать у таблиц не столбцы, а срезы.<a class=headerlink href=#2-10-zaprashivat-u-tablits-ne-stolbtsy-a-srezy title="Permanent link">&para;</a></h3> <p>В очереди.</p> <h3 id=2-11-razbiratelstvo-i-normalizatsiia-funktsionalnosti-dlia-bitmap>2.11. Разбирательство и нормализация функциональности для bitmap.<a class=headerlink href=#2-11-razbiratelstvo-i-normalizatsiia-funktsionalnosti-dlia-bitmap title="Permanent link">&para;</a></h3> <p>В очереди.</p> <h3 id=2-12-deklarativnye-signatury-funktsii>2.12. Декларативные сигнатуры функций.<a class=headerlink href=#2-12-deklarativnye-signatury-funktsii title="Permanent link">&para;</a></h3> <p>Задачу делает Алексей Миловидов. Прогресс 50% и разработка временно приостановлена.</p> <h3 id=2-13-kazhdaia-funktsiia-v-otdelnom-faile>2.13. Каждая функция в отдельном файле.<a class=headerlink href=#2-13-kazhdaia-funktsiia-v-otdelnom-faile title="Permanent link">&para;</a></h3> <p>Задачу делает Алексей Миловидов. Прогресс 80%. Потребуется помощь других разработчиков.</p> <h3 id=2-14-vse-funktsii-s-sostoianiem-peredelat-na-functionbuilder>2.14. Все функции с состоянием переделать на FunctionBuilder.<a class=headerlink href=#2-14-vse-funktsii-s-sostoianiem-peredelat-na-functionbuilder title="Permanent link">&para;</a></h3> <p>Долг <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>. Сейчас код находится в переходном состоянии, что неприемлемо.</p> <h3 id=2-15-funktsiia-subscribe-dlia-istorage>2.15. Функция subscribe для IStorage.<a class=headerlink href=#2-15-funktsiia-subscribe-dlia-istorage title="Permanent link">&para;</a></h3> <p>Для нормализации работы materialized views поверх Merge, Distributed, Kafka.</p> <h2 id=3-dokumentatsiia>3. Документация.<a class=headerlink href=#3-dokumentatsiia title="Permanent link">&para;</a></h2> <p>Здесь задачи только по инфраструктуре документации.</p> <h3 id=3-1-perenos-dokumentatsii-po-funktsiiam-v-kod>3.1. Перенос документации по функциям в код.<a class=headerlink href=#3-1-perenos-dokumentatsii-po-funktsiiam-v-kod title="Permanent link">&para;</a></h3> <p>Требует 2.12 и 2.13.</p> <h3 id=3-2-perenos-odnorodnykh-chastei-dokumentatsii-v-kod>3.2. Перенос однородных частей документации в код.<a class=headerlink href=#3-2-perenos-odnorodnykh-chastei-dokumentatsii-v-kod title="Permanent link">&para;</a></h3> <p>Требует 3.1.</p> <h3 id=3-3-ispravit-katastroficheski-otvratitelno-nepriemlemyi-poisk-po-dokumentatsii>3.3. Исправить катастрофически отвратительно неприемлемый поиск по документации.<a class=headerlink href=#3-3-ispravit-katastroficheski-otvratitelno-nepriemlemyi-poisk-po-dokumentatsii title="Permanent link">&para;</a></h3> <p><a href=https://github.com/blinkov/ rel="external nofollow noreferrer">Иван Блинков</a> - очень хороший человек. Сам сайт документации основан на технологиях, не удовлетворяющих требованиям задачи, и эти технологии трудно исправить.</p> <h3 id=3-4-dobavit-iaponskii-iazyk-v-dokumentatsiiu>3.4. + Добавить японский язык в документацию.<a class=headerlink href=#3-4-dobavit-iaponskii-iazyk-v-dokumentatsiiu title="Permanent link">&para;</a></h3> <p>Эту задачу сделает <a href=https://github.com/blinkov/ rel="external nofollow noreferrer">Иван Блинков</a>, до конца декабря 2019. Сделано.</p> <h2 id=4-setevoe-vzaimodeistvie>4. Сетевое взаимодействие.<a class=headerlink href=#4-setevoe-vzaimodeistvie title="Permanent link">&para;</a></h2> <h3 id=4-1-umenshenie-chisla-potokov-pri-raspredelionnykh-zaprosakh>4.1. Уменьшение числа потоков при распределённых запросах.<a class=headerlink href=#4-1-umenshenie-chisla-potokov-pri-raspredelionnykh-zaprosakh title="Permanent link">&para;</a></h3> <p><a href=https://github.com/laplab rel="external nofollow noreferrer">Никита Лапков</a>, весна 2020.</p> <h3 id=4-2-spekuliativnoe-vypolnenie-zaprosov-na-neskolkikh-replikakh>4.2. Спекулятивное выполнение запросов на нескольких репликах.<a class=headerlink href=#4-2-spekuliativnoe-vypolnenie-zaprosov-na-neskolkikh-replikakh title="Permanent link">&para;</a></h3> <p><a href=https://github.com/laplab rel="external nofollow noreferrer">Никита Лапков</a>, весна 2020. Нужно для Яндекс.Метрики. Требует 4.1.</p> <p>Если распределённый запрос затрагивает большое количество серверов, то время выполнения запросов часто становится большим из-за tail latencies - случайных редких замедлений отдельных серверов. Эту проблему можно избежать, отправляя один и тот же запрос сразу на несколько реплик, и используя данные с наиболее быстрой.</p> <p>Задача скрывает в себе много тонкостей, связанных с обработкой стадий выполнения запроса (соединение, обмен handshake, отправка запроса, получение заголовка результата, получение пакетов прогресса, получение данных), правильной возможностью настройки таймаутов, правильной отменой запросов.</p> <p>Сейчас для распределённых запросов используется по потоку на соединение. Это позволяет хорошо распараллелить вычисления над полученными данными и утилизировать сеть, но становится сильно избыточным для больших кластеров. Для примера, создание 1000 потоков для чтения данных из 1000 серверов кластера - лишь расходует ресурсы и увеличивает время выполнения запроса. Вместо этого необходимо использовать количество потоков не большее количества процессорных ядер, и мультиплексировать в одном потоке общение с серверами. Реализация нетривиальна, так как мультиплексировать необходимо каждую стадию общения по сети, включая установку соединения и обмен handshake.</p> <h3 id=4-3-ogranichenie-chisla-odnovremennykh-skachivanii-s-replik>4.3. Ограничение числа одновременных скачиваний с реплик.<a class=headerlink href=#4-3-ogranichenie-chisla-odnovremennykh-skachivanii-s-replik title="Permanent link">&para;</a></h3> <p>Дмитрий Григорьев, ВШЭ.<br> Изначально делал Олег Алексеенков, но пока решение не готово, хотя там не так уж много доделывать.</p> <h3 id=4-4-ogranichenie-setevoi-polosy-pri-replikatsii>4.4. Ограничение сетевой полосы при репликации.<a class=headerlink href=#4-4-ogranichenie-setevoi-polosy-pri-replikatsii title="Permanent link">&para;</a></h3> <p>Дмитрий Григорьев, ВШЭ.</p> <h3 id=4-5-vozmozhnost-prodolzhit-peredachu-kuska-dannykh-pri-replikatsii-posle-sboia>4.5. Возможность продолжить передачу куска данных при репликации после сбоя.<a class=headerlink href=#4-5-vozmozhnost-prodolzhit-peredachu-kuska-dannykh-pri-replikatsii-posle-sboia title="Permanent link">&para;</a></h3> <p>Дмитрий Григорьев, ВШЭ.</p> <h3 id=4-6-p2p-peredacha-dlia-global-podzaprosov>4.6. p2p передача для GLOBAL подзапросов.<a class=headerlink href=#4-6-p2p-peredacha-dlia-global-podzaprosov title="Permanent link">&para;</a></h3> <h3 id=4-7-lenivaia-zagruzka-mnozhestv-dlia-in-i-join-s-pomoshchiu-k-v-zaprosov>4.7. Ленивая загрузка множеств для IN и JOIN с помощью k/v запросов.<a class=headerlink href=#4-7-lenivaia-zagruzka-mnozhestv-dlia-in-i-join-s-pomoshchiu-k-v-zaprosov title="Permanent link">&para;</a></h3> <h3 id=4-8-razdelit-background-pool-dlia-fetch-i-merge>4.8. Разделить background pool для fetch и merge.<a class=headerlink href=#4-8-razdelit-background-pool-dlia-fetch-i-merge title="Permanent link">&para;</a></h3> <p>Дмитрий Григорьев, ВШЭ.<br> В очереди. Исправить проблему, что восстанавливающаяся реплика перестаёт мержить. Частично компенсируется 4.3.</p> <h2 id=5-operatsii>5. Операции.<a class=headerlink href=#5-operatsii title="Permanent link">&para;</a></h2> <h3 id=5-1-razdelenie-zadach-na-bolee-melkie-kuski-v-clickhouse-copier>5.1. Разделение задач на более мелкие куски в clickhouse-copier.<a class=headerlink href=#5-1-razdelenie-zadach-na-bolee-melkie-kuski-v-clickhouse-copier title="Permanent link">&para;</a></h3> <p>Нужно для Метрики, в очереди, но исполнитель не назначен, есть шанс успеть в 2019.</p> <h3 id=5-2-avtonastroika-limita-na-operativku-i-razmera-keshei>5.2. Автонастройка лимита на оперативку и размера кэшей.<a class=headerlink href=#5-2-avtonastroika-limita-na-operativku-i-razmera-keshei title="Permanent link">&para;</a></h3> <h3 id=5-3-vstroennaia-ruchka-dlia-prometheus-i-vozmozhno-solomon>5.3. Встроенная ручка для Prometheus и, возможно, Solomon.<a class=headerlink href=#5-3-vstroennaia-ruchka-dlia-prometheus-i-vozmozhno-solomon title="Permanent link">&para;</a></h3> <p>Простая задача. <a href=https://github.com/Vdimir>https://github.com/Vdimir</a></p> <h3 id=5-4-opt-in-soobshchat-v-kliente-esli-vyshla-novaia-versiia>5.4. Opt-in сообщать в клиенте, если вышла новая версия.<a class=headerlink href=#5-4-opt-in-soobshchat-v-kliente-esli-vyshla-novaia-versiia title="Permanent link">&para;</a></h3> <h3 id=5-5-lts-relizy>5.5. LTS релизы.<a class=headerlink href=#5-5-lts-relizy title="Permanent link">&para;</a></h3> <p>Требует 7.5. Задачу хочет Метрика, Облако, БК, Маркет и Altinity. Первой LTS версией уже стала версия 19.14.</p> <h2 id=6-instrumentirovanie>6. Инструментирование.<a class=headerlink href=#6-instrumentirovanie title="Permanent link">&para;</a></h2> <h3 id=6-1-ispravleniia-sempliruiushchego-profailera-zaprosov>6.1. Исправления сэмплирующего профайлера запросов.<a class=headerlink href=#6-1-ispravleniia-sempliruiushchego-profailera-zaprosov title="Permanent link">&para;</a></h3> <p>Михаил Филимонов, Altinity. Ноябрь 2019. Сделано.<br> Осталось ещё проверить работоспособность профайлера в первом потоке (что важно для INSERT).</p> <h3 id=6-2-dobavlenie-memory-profiler>6.2. Добавление memory profiler.<a class=headerlink href=#6-2-dobavlenie-memory-profiler title="Permanent link">&para;</a></h3> <p>Сравнительно простая задача, но только для опытных разработчиков. Нужна всем.</p> <h3 id=6-3-uchiot-operativki-total-rasshirit-ne-tolko-na-zaprosy>6.3. Учёт оперативки total расширить не только на запросы.<a class=headerlink href=#6-3-uchiot-operativki-total-rasshirit-ne-tolko-na-zaprosy title="Permanent link">&para;</a></h3> <p>Исправление долгоживущей проблемы с дрифтом учёта оперативки. Нужна для Метрики и БК.</p> <h3 id=6-4-podderzhka-perf-events-kak-metrik-zaprosa>6.4. Поддержка perf events как метрик запроса.<a class=headerlink href=#6-4-podderzhka-perf-events-kak-metrik-zaprosa title="Permanent link">&para;</a></h3> <p>Делает Андрей Скобцов, ВШЭ.</p> <p>В Linux существует возможность получать в программе информацию о счётчиках производительности и событиях, относящихся к CPU и ядру ОС. Подробнее смотрите <code>man perf_event_open</code>. Предлагается добавить эти метрики в ClickHouse для инструментирования запросов.</p> <h3 id=6-5-eksperimenty-s-llvm-x-ray>6.5. Эксперименты с LLVM X-Ray.<a class=headerlink href=#6-5-eksperimenty-s-llvm-x-ray title="Permanent link">&para;</a></h3> <p>Требует 2.2.</p> <h3 id=6-6-stek-treis-dlia-liubykh-iskliuchenii>6.6. Стек трейс для любых исключений.<a class=headerlink href=#6-6-stek-treis-dlia-liubykh-iskliuchenii title="Permanent link">&para;</a></h3> <p>Сейчас есть стек трейс для почти всех, но не всех исключений. Требует 7.4.</p> <h3 id=6-7-tablitsa-system-stack-trace>6.7. Таблица system.stack_trace.<a class=headerlink href=#6-7-tablitsa-system-stack-trace title="Permanent link">&para;</a></h3> <p>Сравнительно простая задача, но только для опытных разработчиков.</p> <h3 id=6-8-tablitsa-system-crashes>6.8. Таблица system.crashes.<a class=headerlink href=#6-8-tablitsa-system-crashes title="Permanent link">&para;</a></h3> <p>Сравнительно простая задача, но только для опытных разработчиков.</p> <h3 id=6-9-otpravliat-informatsiiu-klientu-esli-server-padaet-po-signalu>6.9. Отправлять информацию клиенту, если сервер падает по сигналу.<a class=headerlink href=#6-9-otpravliat-informatsiiu-klientu-esli-server-padaet-po-signalu title="Permanent link">&para;</a></h3> <h3 id=6-10-sbor-obshchikh-sistemnykh-metrik>6.10. Сбор общих системных метрик.<a class=headerlink href=#6-10-sbor-obshchikh-sistemnykh-metrik title="Permanent link">&para;</a></h3> <h2 id=7-soprovozhdenie-razrabotki>7. Сопровождение разработки.<a class=headerlink href=#7-soprovozhdenie-razrabotki title="Permanent link">&para;</a></h2> <h3 id=7-1-icu-v-submodules>7.1. + ICU в submodules.<a class=headerlink href=#7-1-icu-v-submodules title="Permanent link">&para;</a></h3> <p>Добавление в submodules также нужно для Аркадии (7.26).</p> <h3 id=7-2-llvm-v-submodules>7.2. + LLVM в submodules.<a class=headerlink href=#7-2-llvm-v-submodules title="Permanent link">&para;</a></h3> <p>Сделал Алексей Миловидов.</p> <h3 id=7-3-obnovlenie-poco>7.3. Обновление Poco.<a class=headerlink href=#7-3-obnovlenie-poco title="Permanent link">&para;</a></h3> <p>Алексанр Кузьменков.</p> <h3 id=7-4-vkliuchit-libc-libc-abi-pri-sborke-s-gcc>7.4. + Включить libc++, libc++-abi при сборке с gcc.<a class=headerlink href=#7-4-vkliuchit-libc-libc-abi-pri-sborke-s-gcc title="Permanent link">&para;</a></h3> <p>Сейчас включено только при сборке с clang, но продакшен сборка использует gcc.<br> Требует 7.2 и, возможно, 7.1 (только в случае новой версии ICU).</p> <h3 id=7-5-nachat-publikovat-lts-relizy>7.5. Начать публиковать LTS релизы.<a class=headerlink href=#7-5-nachat-publikovat-lts-relizy title="Permanent link">&para;</a></h3> <p><a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>.</p> <h3 id=7-6-pravilnyi-statisticheskii-test-dlia-comparison-mode-v-clickhouse-performance-test>7.6. Правильный статистический тест для comparison mode в clickhouse-performance-test.<a class=headerlink href=#7-6-pravilnyi-statisticheskii-test-dlia-comparison-mode-v-clickhouse-performance-test title="Permanent link">&para;</a></h3> <p>Задачу начал делать Дмитрий Рубашкин (ВШЭ). Сейчас продолжает <a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>.</p> <h3 id=7-7-dodelat-testy-pod-msan>7.7. Доделать тесты под MSan.<a class=headerlink href=#7-7-dodelat-testy-pod-msan title="Permanent link">&para;</a></h3> <p>Уже есть ASan, TSan, UBSan. Не хватает тестов под MSan. Они уже добавлены в CI, но не проходят.<br> <a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>.</p> <h3 id=7-8-dobavit-clang-tidy>7.8. Добавить clang-tidy.<a class=headerlink href=#7-8-dobavit-clang-tidy title="Permanent link">&para;</a></h3> <p>Уже есть PVS-Studio. Мы очень довольны, но этого недостаточно.</p> <h3 id=7-9-proverki-na-stil-imion-s-pomoshchiu-clang-tidy>7.9. Проверки на стиль имён с помощью clang-tidy.<a class=headerlink href=#7-9-proverki-na-stil-imion-s-pomoshchiu-clang-tidy title="Permanent link">&para;</a></h3> <h3 id=7-10-vkliuchenie-ubsan-i-msan-v-integratsionnykh-testakh>7.10. Включение UBSan и MSan в интеграционных тестах.<a class=headerlink href=#7-10-vkliuchenie-ubsan-i-msan-v-integratsionnykh-testakh title="Permanent link">&para;</a></h3> <p>UBSan включен в функциональных тестах, но не включен в интеграционных тестах. Требует 7.7.</p> <h3 id=7-11-vkliuchenie-san-v-unit-testakh>7.11. Включение *San в unit тестах.<a class=headerlink href=#7-11-vkliuchenie-san-v-unit-testakh title="Permanent link">&para;</a></h3> <p>У нас мало unit тестов по сравнению с функциональными тестами и их использование не обязательно. Но они всё-равно важны и нет причин не запускать их под всеми видами sanitizers.</p> <h3 id=7-12-pokazyvat-testovoe-pokrytie-novogo-koda-v-pr>7.12. Показывать тестовое покрытие нового кода в PR.<a class=headerlink href=#7-12-pokazyvat-testovoe-pokrytie-novogo-koda-v-pr title="Permanent link">&para;</a></h3> <p>Пока есть просто показ тестового покрытия всего кода.</p> <h3 id=7-13-vkliuchenie-analoga-weverything-v-gcc>7.13. + Включение аналога -Weverything в gcc.<a class=headerlink href=#7-13-vkliuchenie-analoga-weverything-v-gcc title="Permanent link">&para;</a></h3> <p>Мы используем -Wall -Wextra -Weverything -Werror.<br> При сборке с clang, -Weverything уже включено. Но в gcc есть уникальные warning-и, отсутствующие в clang.<br> Сделал Wolf Kreuzerkrieg.</p> <h3 id=7-14-alternativa-dlia-readline-i-libedit>7.14. Альтернатива для readline и libedit.<a class=headerlink href=#7-14-alternativa-dlia-readline-i-libedit title="Permanent link">&para;</a></h3> <p>Тагир Кускаров, ВШЭ. Посмотрим на <a href=https://github.com/AmokHuginnsson/replxx>https://github.com/AmokHuginnsson/replxx</a></p> <p>Для ввода запросов в интерактивном режиме в клиенте командной строки clickhouse-client используется библиотека readline или libedit.</p> <p>Библиотеки readline и libedit обладает следующими недостатками:<br> - (исправлено в новых версиях readline) Очень низкая производительность вставки больших кусков текста. Вставка каждого следующего символа имеет сложность O(n = количество предыдущих символов) и при вставке 1 МБ текста, скорость падает до десятков байт в секунду.<br> - Крайне сложно или невозможно реализовать подсветку синтаксиса по мере набора текста, а также autocomplete без нажатия дополнительных клавиш для вызова.<br> - Лицензия GPL (для readline) препятствует её включению в кодовую базу продукта.<br> - Плохо работает навигация по истории, если история вкючает запросы, не помещающиеся на экран.<br> - История сохраняется лишь при завершении работы клиента.<br> - При параллельной работе нескольких клиентов с одним файлом истории, сохраняется история только одного из клиентов.<br> - Плохо работает история для многострочных запросов.<br> - Излишняя экономия пересылаемых данных, что часто приводит к остаткам мусора в терминале.</p> <p>Кроме того, имеются следующие сложно достижимые достоинства:<br> - Поддержка right-to-left текста;<br> - Поддержка editrc конфигураций.</p> <p>В качестве альтернатив можно рассмотреть следующие варианты:<br> - Linenoise от Salvatore Sanfilippo. Достоинства: простота и компактность кода; высокая скорость работы. Недостатки: отсутствует поддержка Unicode; отсутствует автоматический перенос текста, что затрудняет работу с многострочными запросами.<br> - Linenoise с патчами для поддержки Unicode. Недостаток: теряется преимущество по скорости работы.<br> - Fish shell. Не является библиотекой, но представляет собой отличный пример, как можно реализовать подстветку синтаксиса и удобный autocomplete. Поддерживает Unicode, но работает весьма медленно.<br> - Python Prompt Toolkit. Не является подходящим решением для интеграции в C++ проект. Хорошие возможности по подсветке синтаксиса и autocomplete.</p> <p>Вместо этого предлагается в качестве примера изучить прототип текстового редактора Kilo: <a href=https://viewsourcecode.org/snaptoken/kilo/ >https://viewsourcecode.org/snaptoken/kilo/</a> и реализовать всю необходимую функциональность.</p> <h3 id=7-15-zamena-libressl-obratno-na-openssl>7.15. + Замена libressl обратно на openssl.<a class=headerlink href=#7-15-zamena-libressl-obratno-na-openssl title="Permanent link">&para;</a></h3> <p>Поводом использования libressl послужило желание нашего хорошего друга из известной компании несколько лет назад. Но сейчас ситуация состоит в том, что openssl продолжает развиваться, а libressl не особо, и можно спокойно менять обратно.</p> <p>Нужно для Яндекс.Облака для поддержки TLS 1.3.</p> <h3 id=7-16-tzdata-vnutri-binarnika>7.16. tzdata внутри бинарника.<a class=headerlink href=#7-16-tzdata-vnutri-binarnika title="Permanent link">&para;</a></h3> <p>Как в Аркадии, но только в качестве fallback.</p> <h3 id=7-17-dodelat-tgz-pakety>7.17. Доделать tgz пакеты.<a class=headerlink href=#7-17-dodelat-tgz-pakety title="Permanent link">&para;</a></h3> <p>Уже давно собираются универсальные tgz пакеты, но по нелепой случайности из них исчез install скрипт.<br> <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>. Может делегировать эту задачу кому угодно.</p> <h3 id=7-18-1-dodelat-binarniki-pod-mac>7.18.1. Доделать бинарники под Mac.<a class=headerlink href=#7-18-1-dodelat-binarniki-pod-mac title="Permanent link">&para;</a></h3> <p>Уже есть автосборка бинарников под Mac на каждый коммит и PR, но с недостатками.<br> <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван Лежанкин</a>. Требует 7.1, 7.2. Рекомендуется 7.14. Сейчас не хватает по крайней мере SSL и ICU. Нужно для Яндекс.Облака.</p> <h3 id=7-18-pomestit-ssylku-na-sobrannye-binarniki-pod-mac-na-sait>7.18. Поместить ссылку на собранные бинарники под Mac на сайт.<a class=headerlink href=#7-18-pomestit-ssylku-na-sobrannye-binarniki-pod-mac-na-sait title="Permanent link">&para;</a></h3> <p>Сейчас людям приходится делать несколько кликов, чтобы их скачать.<br> <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван Лежанкин</a> или <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>.</p> <h3 id=7-19-dodelat-proverit-avtosborku-pod-aarch64>7.19. + Доделать (проверить) автосборку под AArch64.<a class=headerlink href=#7-19-dodelat-proverit-avtosborku-pod-aarch64 title="Permanent link">&para;</a></h3> <p><a href=https://github.com/ClickHouse/ClickHouse/issues/8027#issuecomment-566670282>https://github.com/ClickHouse/ClickHouse/issues/8027#issuecomment-566670282</a><br> Проверили на настоящем сервере Huawei, а также в специальном Docker контейнере, который содержит внутри qemu-user-static.<br> Также можно проверить на Cavium, на Raspberry Pi а также на твоём Android телефоне.</p> <h3 id=7-20-avtosborka-dlia-freebsd-x86-64>7.20. Автосборка для FreeBSD x86_64.<a class=headerlink href=#7-20-avtosborka-dlia-freebsd-x86-64 title="Permanent link">&para;</a></h3> <p><a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван Лежанкин</a>.</p> <h3 id=7-21-avtosborka-dlia-linux-ppc64>7.21. Автосборка для Linux ppc64.<a class=headerlink href=#7-21-avtosborka-dlia-linux-ppc64 title="Permanent link">&para;</a></h3> <p><a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван Лежанкин</a>.</p> <h3 id=7-22-deshbord-dlia-pull-requests>7.22. Дэшборд для pull requests.<a class=headerlink href=#7-22-deshbord-dlia-pull-requests title="Permanent link">&para;</a></h3> <p>Дарья Петрова, УрФУ.</p> <p>Над ClickHouse одновременно работает большое количество разработчиков, которые оформляют свои изменения в виде pull requests. Когда непомерженных pull requests много, то возникает сложность с организацией работы - непонятно, на какой pull request смотреть в первую очередь.</p> <p>Предлагается реализовать простое одностраничное веб-приложение, в котором отображается список pull requests со следующей информацией:<br> - размер diff - количество изменённых строк;<br> - как давно было последнее обновление;<br> - типы изменённых файлов: C++, документация, скрипты сборки;<br> - наличие добавленных тестов;<br> - есть ли описание для changelog;<br> - изменены ли submodules;<br> - был ли разрешён запуск проверок CI;<br> - статусы проверок CI;<br> - количество approve от ревьюеров;</p> <p>Статусы проверок - наиболее важная часть. Так как для каждого PR выполняется несколько десятков проверок и наиболее медленные работают до нескольких часов, придётся:<br> - отображать сразу все проверки для каждого PR в виде красивой разноцветной матрицы с информацией по наведению мыши;<br> - отсортировать проверки по важности: например, если у внешнего разработчика проходят все проверки кроме стиля кода, то мы можем взять это в работу сами;<br> - если для предыдущего коммита проверка была завершена, а для последнего коммита ещё только идёт - то можно отображать в таблице статус предыдущей проверки более блёклым цветом.</p> <p>Предлагается реализовать несколько вариантов сортировок. Очевидное - по времени обновления, более интересно - некое ранжирование с целью выяснить, "что лучше взять в работу прямо сейчас".</p> <p>Похожие продукты уже есть, например: <a href=http://prs.mozilla.io/yandex:ClickHouse>http://prs.mozilla.io/yandex:ClickHouse</a> К сожалению, этот продукт заброшен, да и делает не совсем то, что нужно. По своему усмотрению, можно взять из него что-нибудь полезное.</p> <h3 id=7-23-funktsii-dlia-fuzzing>7.23. Функции для fuzzing.<a class=headerlink href=#7-23-funktsii-dlia-fuzzing title="Permanent link">&para;</a></h3> <p>Андрей Некрашевич, ВШЭ.</p> <p>Fuzzing тестирование - это тестирование случайными данными. Мы рассмотрим несколько подходов к этой задачи:</p> <ol> <li>Добавление в SQL диалект ClickHouse функций для генерации случайных данных (пример - случайные бинарные строки заданной длины, случайные валидные UTF-8 строки) и "порчи" данных (например, поменять значения случайных бит с заданной частотой). Это будет использовано для тестирования SQL-функций ClickHouse.</li> </ol> <p>Можно добавить функции:<br> <code>randomString(length)</code><br> <code>randomFixedString(length)</code><br> - строка заданной длины с равномерно распределёнными случайными байтами;<br> <code>randomStringASCII(length)</code><br> <code>randomStringUTF8(length)</code></p> <p><code>fuzzBits(s, inverse_probability)</code> - изменить каждый бит строки на противоположный с заданной вероятностью;<br> <code>fuzzBytes(s, inverse_probability)</code> - изменить каждый байт строки на равномерно случайный с заданной вероятностью;</p> <p>У каждой функции опциональный аргумент против склейки одинаковых выражений в запросе.</p> <p>Также можно сделать функции с детерминированным генератором случайных чисел (аргументом передаётся seed) для воспроизводимости тестовых кейсов.</p> <h3 id=7-24-fuzzing-leksera-i-parsera-zaprosov-kodekov-i-formatov>7.24. Fuzzing лексера и парсера запросов; кодеков и форматов.<a class=headerlink href=#7-24-fuzzing-leksera-i-parsera-zaprosov-kodekov-i-formatov title="Permanent link">&para;</a></h3> <p>Андрей Некрашевич, ВШЭ.</p> <p>Продолжение 7.23.</p> <ol start=2> <li> <p>Использование AFL или LibFuzzer для тестирования отдельных частей кодовой базы ClickHouse.</p> </li> <li> <p>Генерация и выполнение случайных синтаксически корректных запросов на случайных данных.</p> </li> </ol> <h3 id=7-25-sinkhronizatsiia-relizov-v-arkadiiu>7.25. Синхронизация релизов в Аркадию.<a class=headerlink href=#7-25-sinkhronizatsiia-relizov-v-arkadiiu title="Permanent link">&para;</a></h3> <p>Изначально занимался Олег Алексеенков. Сейчас он перешёл работать в дружественный отдел, но обещает продолжать синхронизацию.<br> Затем, возможно, <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван Лежанкин</a>. Но сейчас приостановлено, так как Максим из YT должен исправить регрессию производительности в анализе индекса.</p> <p>Максим из YT сказал, что сделает это после нового года.</p> <h3 id=7-26-pobaitovaia-identichnost-repozitoriia-s-arkadiei>7.26. Побайтовая идентичность репозитория с Аркадией.<a class=headerlink href=#7-26-pobaitovaia-identichnost-repozitoriia-s-arkadiei title="Permanent link">&para;</a></h3> <p>Команда DevTools. Прогресс по задаче под вопросом.</p> <h3 id=7-27-zapusk-avtotestov-v-arkadii>7.27. Запуск автотестов в Аркадии.<a class=headerlink href=#7-27-zapusk-avtotestov-v-arkadii title="Permanent link">&para;</a></h3> <p>Требует 7.26.</p> <h3 id=7-29-optsii-clickhouse-install-stop-start-vmesto-postinst-init-d-systemd-skriptov>7.29. Опции clickhouse install, stop, start вместо postinst, init.d, systemd скриптов.<a class=headerlink href=#7-29-optsii-clickhouse-install-stop-start-vmesto-postinst-init-d-systemd-skriptov title="Permanent link">&para;</a></h3> <p>Низкий приоритет.</p> <h3 id=7-30-vozmozhnost-perekliucheniia-binarnykh-failov-na-prodakshene-bez-vykladki-paketov>7.30. Возможность переключения бинарных файлов на продакшене без выкладки пакетов.<a class=headerlink href=#7-30-vozmozhnost-perekliucheniia-binarnykh-failov-na-prodakshene-bez-vykladki-paketov title="Permanent link">&para;</a></h3> <p>Низкий приоритет.</p> <h3 id=7-31-zerkalirovanie-nagruzki-mezhdu-serverami>7.31. Зеркалирование нагрузки между серверами.<a class=headerlink href=#7-31-zerkalirovanie-nagruzki-mezhdu-serverami title="Permanent link">&para;</a></h3> <p>В очереди. Нужно для Яндекс.Метрики.</p> <h3 id=7-32-obfuskatsiia-prodakshen-zaprosov>7.32. Обфускация продакшен запросов.<a class=headerlink href=#7-32-obfuskatsiia-prodakshen-zaprosov title="Permanent link">&para;</a></h3> <p>Роман Ильговский. Нужно для Яндекс.Метрики.</p> <p>Имея SQL запрос, требуется вывести структуру таблиц, на которых этот запрос будет выполнен, и заполнить эти таблицы случайными данными, такими, что результат этого запроса зависит от выбора подмножества данных.</p> <p>Для примера, если есть запрос <code>SELECT SearchPhrase, count(*) FROM table WHERE CounterID = 34 AND SearchPhrase LIKE '%ClickHouse%'</code>, то мы можем сделать вывод, что CounterID имеет числовой тип, а SearchPhrase - строковый. Заполнить таблицу данными, на которых отдельные условия <code>CounterID = 34</code> и <code>SearchPhrase LIKE '%ClickHouse%'</code> для некоторых строк выполнены, а для некоторых строк не выполнены.</p> <p>Обфускация запросов: имея секретные запросы и структуру таблиц, заменить имена полей и константы, чтобы запросы можно было использовать в качестве публично доступных тестов.</p> <h3 id=7-33-vykladyvat-patch-relizy-v-repozitorii-avtomaticheski>7.33. Выкладывать патч релизы в репозиторий автоматически.<a class=headerlink href=#7-33-vykladyvat-patch-relizy-v-repozitorii-avtomaticheski title="Permanent link">&para;</a></h3> <p><a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>. Может делегировать эту задачу кому угодно.</p> <h3 id=7-34-bekportirovat-bugfix-avtomaticheski>7.34. Бэкпортировать bugfix автоматически.<a class=headerlink href=#7-34-bekportirovat-bugfix-avtomaticheski title="Permanent link">&para;</a></h3> <p><a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>. Может делегировать эту задачу кому угодно.</p> <h3 id=7-35-nachalnye-pravila-dlia-avto-merge>7.35. Начальные правила для авто-merge.<a class=headerlink href=#7-35-nachalnye-pravila-dlia-avto-merge title="Permanent link">&para;</a></h3> <p>Зелёные проверки и два ревью.<br> <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>. Может делегировать эту задачу кому угодно.</p> <h3 id=7-36-poniatie-doverennykh-kontribiutorov>7.36. Понятие доверенных контрибьюторов.<a class=headerlink href=#7-36-poniatie-doverennykh-kontribiutorov title="Permanent link">&para;</a></h3> <p>Контрибьюторы, у которых есть 5 померженных PR. Для их новых PR автотесты запускаются сразу.<br> <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>. Может делегировать эту задачу кому угодно.</p> <h3 id=7-37-razobratsia-s-repo-yandex-ru>7.37. Разобраться с repo.yandex.ru.<a class=headerlink href=#7-37-razobratsia-s-repo-yandex-ru title="Permanent link">&para;</a></h3> <p>Есть жалобы на скорость загрузки и неудобство maintenance, operations, visibility.</p> <h2 id=8-integratsiia-s-vneshnimi-sistemami>8. Интеграция с внешними системами.<a class=headerlink href=#8-integratsiia-s-vneshnimi-sistemami title="Permanent link">&para;</a></h2> <h3 id=8-1-podderzhka-alter-modify-setting-dlia-kafka>8.1. Поддержка ALTER MODIFY SETTING для Kafka.<a class=headerlink href=#8-1-podderzhka-alter-modify-setting-dlia-kafka title="Permanent link">&para;</a></h3> <p>Altinity.</p> <h3 id=8-2-podderzhka-mongo-atlas-uri>8.2. Поддержка Mongo Atlas URI.<a class=headerlink href=#8-2-podderzhka-mongo-atlas-uri title="Permanent link">&para;</a></h3> <p><a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>.</p> <h3 id=8-3-dorabotki-globs-pravilnaia-podderzhka-diapazonov-umenshenie-chisla-odnovremennykh-stream-ov>8.3. Доработки globs (правильная поддержка диапазонов, уменьшение числа одновременных stream-ов).<a class=headerlink href=#8-3-dorabotki-globs-pravilnaia-podderzhka-diapazonov-umenshenie-chisla-odnovremennykh-stream-ov title="Permanent link">&para;</a></h3> <p><a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>.</p> <h3 id=8-4-unifikatsiia-file-hdfs-s3-pod-url>8.4. Унификация File, HDFS, S3 под URL.<a class=headerlink href=#8-4-unifikatsiia-file-hdfs-s3-pod-url title="Permanent link">&para;</a></h3> <h3 id=8-5-autentifikatsiia-v-s3>8.5. + Аутентификация в S3.<a class=headerlink href=#8-5-autentifikatsiia-v-s3 title="Permanent link">&para;</a></h3> <p><a href=https://github.com/excitoon rel="external nofollow noreferrer">Владимир Чеботарёв</a>, Altinity.</p> <h3 id=8-6-kerberos-autentifikatsiia-dlia-hdfs-i-kafka>8.6. Kerberos аутентификация для HDFS и Kafka.<a class=headerlink href=#8-6-kerberos-autentifikatsiia-dlia-hdfs-i-kafka title="Permanent link">&para;</a></h3> <p>Андрей Коняев, ArenaData.</p> <h3 id=8-7-ispravlenie-melochi-hdfs-na-ochen-starykh-iadrakh-linux>8.7. + Исправление мелочи HDFS на очень старых ядрах Linux.<a class=headerlink href=#8-7-ispravlenie-melochi-hdfs-na-ochen-starykh-iadrakh-linux title="Permanent link">&para;</a></h3> <p>В ядрах 2.6 отсутствует один системный вызов, который библиотека hdfs3 использует без необходимости.<br> Сделал Amos Bird.</p> <h3 id=8-8-podderzhka-virtualnykh-stolbtsov-s-imenem-faila-i-putiom>8.8. Поддержка виртуальных столбцов с именем файла и путём.<a class=headerlink href=#8-8-podderzhka-virtualnykh-stolbtsov-s-imenem-faila-i-putiom title="Permanent link">&para;</a></h3> <p><a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>.</p> <h3 id=8-9-podderzhka-szhatykh-failov-gz-bz-na-chtenie-i-zapis>8.9. + Поддержка сжатых файлов (gz, bz) на чтение и запись.<a class=headerlink href=#8-9-podderzhka-szhatykh-failov-gz-bz-na-chtenie-i-zapis title="Permanent link">&para;</a></h3> <p>Сделал <a href=https://github.com/apbodrov rel="external nofollow noreferrer">Andrey Bodrov</a></p> <h3 id=8-10-zapis-v-tablichnuiu-funktsiiu-odbc>8.10. Запись в табличную функцию ODBC.<a class=headerlink href=#8-10-zapis-v-tablichnuiu-funktsiiu-odbc title="Permanent link">&para;</a></h3> <p>Артемий Бобровский, ВШЭ</p> <h3 id=8-11-dvizhok-tablits-dlia-chteniia-iz-mongo>8.11. Движок таблиц для чтения из Mongo.<a class=headerlink href=#8-11-dvizhok-tablits-dlia-chteniia-iz-mongo title="Permanent link">&para;</a></h3> <p>Артемий Бобровский, ВШЭ</p> <h3 id=8-12-propusk-stolbtsov-v-formatakh-parquet-orc>8.12. Пропуск столбцов в форматах Parquet, ORC.<a class=headerlink href=#8-12-propusk-stolbtsov-v-formatakh-parquet-orc title="Permanent link">&para;</a></h3> <p>Артемий Бобровский, ВШЭ</p> <h3 id=8-13-podderzhka-massivov-v-parquet-orc>8.13. Поддержка массивов в Parquet, ORC.<a class=headerlink href=#8-13-podderzhka-massivov-v-parquet-orc title="Permanent link">&para;</a></h3> <p>Артемий Бобровский, ВШЭ</p> <h3 id=8-14-zapis-dannykh-v-orc>8.14. Запись данных в ORC.<a class=headerlink href=#8-14-zapis-dannykh-v-orc title="Permanent link">&para;</a></h3> <p>Возможно, Андрей Коняев, ArenaData (зависит от желания).</p> <h3 id=8-15-zapis-dannykh-v-capnproto>8.15. Запись данных в CapNProto.<a class=headerlink href=#8-15-zapis-dannykh-v-capnproto title="Permanent link">&para;</a></h3> <h3 id=8-16-podderzhka-formata-avro>8.16. Поддержка формата Avro.<a class=headerlink href=#8-16-podderzhka-formata-avro title="Permanent link">&para;</a></h3> <p>Павел Круглов, ВШЭ и Яндекс.</p> <p>Формат Apache Avro является компактным структурированным построчным бинарным форматом данных с внешней схемой. Этот формат часто используется совместно с Kafka и поддержка его в качестве одного из форматов ввода-вывода в ClickHouse является востребованной пользователями.</p> <h3 id=8-17-clickhouse-kak-mysql-replika>8.17. ClickHouse как MySQL реплика.<a class=headerlink href=#8-17-clickhouse-kak-mysql-replika title="Permanent link">&para;</a></h3> <p>Ильяс Адюгамов, ВШЭ.</p> <p>Реализовать возможность подписаться на row-based репликацию MySQL и сохранять полученные данные в CollapsingMergeTree или ReplacingMergeTree таблицы. Сторонние решения для этой задачи уже существуют: <a href=https://www.altinity.com/blog/2018/6/30/realtime-mysql-clickhouse-replication-in-practice>https://www.altinity.com/blog/2018/6/30/realtime-mysql-clickhouse-replication-in-practice</a> Также существует стороннее решение для PostgreSQL: <a href=https://github.com/mkabilov/pg2ch>https://github.com/mkabilov/pg2ch</a></p> <p>Встроенная в ClickHouse возможность работать в качестве реплики MySQL даст преимущества для дальнейшего развития.</p> <h3 id=8-18-clickhouse-kak-federated-mysql>8.18. + ClickHouse как Federated MySQL.<a class=headerlink href=#8-18-clickhouse-kak-federated-mysql title="Permanent link">&para;</a></h3> <p>Maxim Fedotov, Wargaming + Yuri Baranov, Яндекс.</p> <h3 id=8-19-integratsiia-s-rabbitmq>8.19. Интеграция с RabbitMQ.<a class=headerlink href=#8-19-integratsiia-s-rabbitmq title="Permanent link">&para;</a></h3> <p>Ксения Сумарокова, ВШЭ.</p> <p>В ClickHouse часто используется потоковый импорт данных из распределённой очереди. Наиболее популярно использование совместно с Kafka. Эта возможность уже есть.</p> <p>Следующей по востребованности является система очередей RabbitMQ. Её поддержка в ClickHouse отсутствует.</p> <h3 id=8-20-integratsiia-s-sqs>8.20. Интеграция с SQS.<a class=headerlink href=#8-20-integratsiia-s-sqs title="Permanent link">&para;</a></h3> <p>Низкий приоритет.</p> <h3 id=8-21-podderzhka-proizvolnogo-kolichestva-iazykov-dlia-imion-regionov>8.21. Поддержка произвольного количества языков для имён регионов.<a class=headerlink href=#8-21-podderzhka-proizvolnogo-kolichestva-iazykov-dlia-imion-regionov title="Permanent link">&para;</a></h3> <p>Нужно для БК. Декабрь 2019.</p> <h3 id=8-22-podderzhka-sintaksisa-dlia-peremennykh-v-stile-mysql>8.22. Поддержка синтаксиса для переменных в стиле MySQL.<a class=headerlink href=#8-22-podderzhka-sintaksisa-dlia-peremennykh-v-stile-mysql title="Permanent link">&para;</a></h3> <p>При парсинге запроса преобразовывать синтаксис вида <code>@@version_full</code> в вызов функции <code>getGlobalVariable('version_full')</code>. Поддержать популярные MySQL переменные. Может быть поможет Юрий Баранов, если будет энтузиазм.</p> <h3 id=8-23-podpiska-dlia-importa-obnovliaemykh-i-rotiruemykh-logov-v-fs>8.23. Подписка для импорта обновляемых и ротируемых логов в ФС.<a class=headerlink href=#8-23-podpiska-dlia-importa-obnovliaemykh-i-rotiruemykh-logov-v-fs title="Permanent link">&para;</a></h3> <p>Желательно 2.15.</p> <h2 id=9-bezopasnost>9. Безопасность.<a class=headerlink href=#9-bezopasnost title="Permanent link">&para;</a></h2> <h3 id=9-1-ogranichenie-na-khosty-v-zaprosakh-ko-vneshnim-sistemam>9.1. + Ограничение на хосты в запросах ко внешним системам.<a class=headerlink href=#9-1-ogranichenie-na-khosty-v-zaprosakh-ko-vneshnim-sistemam title="Permanent link">&para;</a></h3> <p>Михаил Коротов.</p> <h3 id=9-2-prednastroennye-imenovannye-soedineniia-k-vneshnim-bd>9.2. Преднастроенные именованные соединения к внешним БД.<a class=headerlink href=#9-2-prednastroennye-imenovannye-soedineniia-k-vneshnim-bd title="Permanent link">&para;</a></h3> <p>Валерий Батурин, ВШЭ.</p> <p>ClickHouse предоставляет возможность обратиться к внешней базе данных из языка запросов. Это реализовано в виде табличных функций. В параметрах к табличной функции указывается адрес удалённой базы данных (хост, порт), а также аутентификационные данные (имя пользователя, пароль). Аутентификационные данные указываются в запросе в открытом виде и, таким образом, попадают в историю запросов и в логи, что компрометирует безопасность системы.</p> <p>Вместо этого предлагается описывать необходимые данные в конфигурационном файле сервера или в отдельном сервисе и ссылаться на них по именам.</p> <h3 id=9-3-podderzhka-tls-dlia-zookeeper>9.3. Поддержка TLS для ZooKeeper.<a class=headerlink href=#9-3-podderzhka-tls-dlia-zookeeper title="Permanent link">&para;</a></h3> <h2 id=10-vneshnie-slovari>10. Внешние словари.<a class=headerlink href=#10-vneshnie-slovari title="Permanent link">&para;</a></h2> <h3 id=10-1-ispravlenie-zavisaniia-v-biblioteke-dostupa-k-yt>10.1. + Исправление зависания в библиотеке доступа к YT.<a class=headerlink href=#10-1-ispravlenie-zavisaniia-v-biblioteke-dostupa-k-yt title="Permanent link">&para;</a></h3> <p>Библиотека для доступа к YT не переживает учения.<br> Нужно для БК и Метрики. Поиск причин - <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>. Дальшейшее исправление возможно на стороне YT.</p> <p>Цитата: "Оказывается для YT-клиента зависания на несколько минут это нормально. Убрал внутренние ретраи, снизил таймауты. Однозначно станет лучше".</p> <h3 id=10-2-ispravlenie-sigill-v-biblioteke-dostupa-k-yt>10.2. Исправление SIGILL в библиотеке доступа к YT.<a class=headerlink href=#10-2-ispravlenie-sigill-v-biblioteke-dostupa-k-yt title="Permanent link">&para;</a></h3> <p>Код YT использует SIGILL вместо abort. Это, опять же, происходит при учениях.<br> Нужно для БК и Метрики. Поиск причин - <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>. Дальшейшее исправление возможно на стороне YT.</p> <h3 id=10-3-vozmozhnost-chteniia-dannykh-iz-staticheskikh-tablits-v-yt-slovariakh>10.3. Возможность чтения данных из статических таблиц в YT словарях.<a class=headerlink href=#10-3-vozmozhnost-chteniia-dannykh-iz-staticheskikh-tablits-v-yt-slovariakh title="Permanent link">&para;</a></h3> <p>Нужно для БК и Метрики.</p> <h3 id=10-4-slovar-iz-ydb-kikimr>10.4. Словарь из YDB (KikiMR).<a class=headerlink href=#10-4-slovar-iz-ydb-kikimr title="Permanent link">&para;</a></h3> <p>Нужно для Метрики, а делать будет таинственный незнакомец из команды KikiMR (под вопросом).</p> <h3 id=10-5-zakrytie-soedinenii-i-umenshenie-chisla-soedinenii-dlia-mysql-i-odbc>10.5. Закрытие соединений и уменьшение числа соединений для MySQL и ODBC.<a class=headerlink href=#10-5-zakrytie-soedinenii-i-umenshenie-chisla-soedinenii-dlia-mysql-i-odbc title="Permanent link">&para;</a></h3> <p>Нужно для Метрики.</p> <h3 id=10-6-slovari-iz-cassandra-i-couchbase>10.6. Словари из Cassandra и Couchbase.<a class=headerlink href=#10-6-slovari-iz-cassandra-i-couchbase title="Permanent link">&para;</a></h3> <h3 id=10-7-podderzhka-nullable-v-slovariakh>10.7. Поддержка Nullable в словарях.<a class=headerlink href=#10-7-podderzhka-nullable-v-slovariakh title="Permanent link">&para;</a></h3> <p>Артём Стрельцов, Николай Дегтеринский, Наталия Михненко, ВШЭ.</p> <h3 id=10-8-podderzhka-massivov-v-slovariakh>10.8. Поддержка массивов в словарях.<a class=headerlink href=#10-8-podderzhka-massivov-v-slovariakh title="Permanent link">&para;</a></h3> <p>Артём Стрельцов, Николай Дегтеринский, Наталия Михненко, ВШЭ.</p> <h3 id=10-9-umenshenie-blokirovok-dlia-cache-slovarei-za-schiot-odnovremennykh-zaprosov-odnogo-i-togo-zhe>10.9. Уменьшение блокировок для cache словарей за счёт одновременных запросов одного и того же.<a class=headerlink href=#10-9-umenshenie-blokirovok-dlia-cache-slovarei-za-schiot-odnovremennykh-zaprosov-odnogo-i-togo-zhe title="Permanent link">&para;</a></h3> <p>Нужно для БК, но мотивация задачи находится под вопросом, так как есть рабочее предположение о том, что данная задача не устраняет причину проблемы.</p> <h3 id=10-10-vozmozhnost-ispolzovaniia-starykh-znachenii-iz-cache-slovaria-poka-oni-perezaprashivaiutsia>10.10. Возможность использования старых значений из cache словаря пока они перезапрашиваются.<a class=headerlink href=#10-10-vozmozhnost-ispolzovaniia-starykh-znachenii-iz-cache-slovaria-poka-oni-perezaprashivaiutsia title="Permanent link">&para;</a></h3> <p>Нужно для БК и Метрики.</p> <h3 id=10-11-vozmozhnost-iskliuchitelno-asinkhronnykh-zaprosov-v-cache-slovariakh>10.11. Возможность исключительно асинхронных запросов в cache словарях.<a class=headerlink href=#10-11-vozmozhnost-iskliuchitelno-asinkhronnykh-zaprosov-v-cache-slovariakh title="Permanent link">&para;</a></h3> <p>Нужно для БК и Метрики. Требует 10.10.</p> <h3 id=10-12-layout-direct-dlia-slovarei>10.12. Layout direct для словарей.<a class=headerlink href=#10-12-layout-direct-dlia-slovarei title="Permanent link">&para;</a></h3> <p>Артём Стрельцов, Николай Дегтеринский, Наталия Михненко, ВШЭ.</p> <h3 id=10-13-ispolzovanie-join-kak-generic-layout-dlia-slovarei>10.13. Использование Join как generic layout для словарей.<a class=headerlink href=#10-13-ispolzovanie-join-kak-generic-layout-dlia-slovarei title="Permanent link">&para;</a></h3> <p>Артём Стрельцов, Николай Дегтеринский, Наталия Михненко, ВШЭ.</p> <h3 id=10-14-podderzhka-vsekh-tipov-v-funktsii-transform>10.14. Поддержка всех типов в функции transform.<a class=headerlink href=#10-14-podderzhka-vsekh-tipov-v-funktsii-transform title="Permanent link">&para;</a></h3> <h3 id=10-15-ispolzovanie-slovarei-kak-spetsializirovannogo-layout-dlia-join>10.15. Использование словарей как специализированного layout для Join.<a class=headerlink href=#10-15-ispolzovanie-slovarei-kak-spetsializirovannogo-layout-dlia-join title="Permanent link">&para;</a></h3> <h3 id=10-16-slovari-na-lokalnom-ssd>10.16. Словари на локальном SSD.<a class=headerlink href=#10-16-slovari-na-lokalnom-ssd title="Permanent link">&para;</a></h3> <p>Никита Васильев, ВШЭ и Яндекс.</p> <p>Реализовать в ClickHouse специализированный движок таблиц, подходящий для быстрых key-value запросов и оптимизированный для расположения данных на SSD. Это может быть: реализация на основе RocksDB; сериализованные RowBinary данные с индексом в оперативке; секретная очень эффективная структура данных, о которой я расскажу.</p> <p>Использовать эту структуру данных как отдельный вид словарей, как источник для cache словарей или как дополнительный уровень кэширования для cache словарей.</p> <h3 id=10-17-lokalnyi-damp-sostoianiia-slovaria-dlia-bystrogo-starta-servera>10.17. Локальный дамп состояния словаря для быстрого старта сервера.<a class=headerlink href=#10-17-lokalnyi-damp-sostoianiia-slovaria-dlia-bystrogo-starta-servera title="Permanent link">&para;</a></h3> <h3 id=10-18-tablitsa-join-ili-slovar-na-udalionnom-servere-kak-key-value-bd-dlia-cache-slovaria>10.18. Таблица Join или словарь на удалённом сервере как key-value БД для cache словаря.<a class=headerlink href=#10-18-tablitsa-join-ili-slovar-na-udalionnom-servere-kak-key-value-bd-dlia-cache-slovaria title="Permanent link">&para;</a></h3> <h3 id=10-19-vozmozhnost-zaregistrirovat-nekotorye-funktsii-ispolzuiushchie-slovari-pod-polzovatelskimi-imenami>10.19. Возможность зарегистрировать некоторые функции, использующие словари, под пользовательскими именами.<a class=headerlink href=#10-19-vozmozhnost-zaregistrirovat-nekotorye-funktsii-ispolzuiushchie-slovari-pod-polzovatelskimi-imenami title="Permanent link">&para;</a></h3> <h2 id=11-interfeisy>11. Интерфейсы.<a class=headerlink href=#11-interfeisy title="Permanent link">&para;</a></h2> <h3 id=11-1-vstavka-sostoianii-agregatnykh-funktsii-v-vide-kortezha-argumentov-ili-massiva-kortezhei-argumentov>11.1. Вставка состояний агрегатных функций в виде кортежа аргументов или массива кортежей аргументов.<a class=headerlink href=#11-1-vstavka-sostoianii-agregatnykh-funktsii-v-vide-kortezha-argumentov-ili-massiva-kortezhei-argumentov title="Permanent link">&para;</a></h3> <h3 id=11-2-vozmozhnost-ispolzovat-dvizhok-jdbc-iz-korobki>11.2. Возможность использовать движок JDBC из коробки.<a class=headerlink href=#11-2-vozmozhnost-ispolzovat-dvizhok-jdbc-iz-korobki title="Permanent link">&para;</a></h3> <p>Нужно разобраться, как упаковывать Java в статический бинарник, возможно AppImage. Или предоставить максимально простую инструкцию по установке jdbc-bridge. Может быть будет заинтересован Александр Крашенинников, Badoo, так как он разработал jdbc-bridge.</p> <h3 id=11-3-integratsionnye-testy-odbc-draivera-putiom-podkliucheniia-clickhouse-k-samomu-sebe-cherez-odbc>11.3. Интеграционные тесты ODBC драйвера путём подключения ClickHouse к самому себе через ODBC.<a class=headerlink href=#11-3-integratsionnye-testy-odbc-draivera-putiom-podkliucheniia-clickhouse-k-samomu-sebe-cherez-odbc title="Permanent link">&para;</a></h3> <p>Денис Глазачев, Altinity.</p> <h3 id=11-4-ispravlenie-upiachek-s-tipami-date-i-decimal-v-clickhouse-cpp>11.4. Исправление упячек с типами Date и Decimal в clickhouse-cpp.<a class=headerlink href=#11-4-ispravlenie-upiachek-s-tipami-date-i-decimal-v-clickhouse-cpp title="Permanent link">&para;</a></h3> <h3 id=11-5-podderzhka-tls-v-clickhouse-cpp>11.5. Поддержка TLS в clickhouse-cpp.<a class=headerlink href=#11-5-podderzhka-tls-v-clickhouse-cpp title="Permanent link">&para;</a></h3> <p>А знаете ли вы, что библиотеку clickhouse-cpp разрабатывал один хороший человек в свободное время?</p> <h3 id=11-6-integratsionnye-testy-clickhouse-cpp>11.6. Интеграционные тесты clickhouse-cpp.<a class=headerlink href=#11-6-integratsionnye-testy-clickhouse-cpp title="Permanent link">&para;</a></h3> <h3 id=11-7-interaktivnyi-rezhim-raboty-programmy-clickhouse-local>11.7. Интерактивный режим работы программы clickhouse-local.<a class=headerlink href=#11-7-interaktivnyi-rezhim-raboty-programmy-clickhouse-local title="Permanent link">&para;</a></h3> <h3 id=11-8-podderzhka-protokola-postgresql>11.8. Поддержка протокола PostgreSQL.<a class=headerlink href=#11-8-podderzhka-protokola-postgresql title="Permanent link">&para;</a></h3> <p>Элбакян Мовсес Андраникович, ВШЭ.</p> <p>В ClickHouse в прошлом году добавили поддержку wire-протокола MySQL. PostgreSQL, так же как MySQL, использует несложный протокол общения между клиентом и сервером, но свой собственный. Поддержка этого протокола является востребованной и откроет новые возможности для ClickHouse.</p> <h3 id=11-9-dorabotki-odbc-draivera>11.9. Доработки ODBC драйвера.<a class=headerlink href=#11-9-dorabotki-odbc-draivera title="Permanent link">&para;</a></h3> <p>Денис Глазачев, Altinity. Хороший прогресс по этой задаче.</p> <h3 id=11-10-prednastroennye-http-handlers-dlia-zaprosov>11.10. Преднастроенные HTTP handlers для запросов.<a class=headerlink href=#11-10-prednastroennye-http-handlers-dlia-zaprosov title="Permanent link">&para;</a></h3> <p>zhang2014</p> <p>Возможность описать в конфигурационном файле handler (путь в URL) для HTTP запросов к серверу, которому соответствует некоторый параметризованный запрос. Пользователь может вызвать этот обработчик и не должен передавать SQL запрос.</p> <h2 id=12-upravlenie-polzovateliami-i-dostupom>12. Управление пользователями и доступом.<a class=headerlink href=#12-upravlenie-polzovateliami-i-dostupom title="Permanent link">&para;</a></h2> <h3 id=12-1-role-based-access-control>12.1. Role Based Access Control.<a class=headerlink href=#12-1-role-based-access-control title="Permanent link">&para;</a></h3> <p><a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>. Финальная стадия разработки, рабочая версия в декабре 2019.</p> <h3 id=12-2-upravlenie-polzovateliami-i-pravami-dostupa-s-pomoshchiu-sql-zaprosov>12.2. Управление пользователями и правами доступа с помощью SQL запросов.<a class=headerlink href=#12-2-upravlenie-polzovateliami-i-pravami-dostupa-s-pomoshchiu-sql-zaprosov title="Permanent link">&para;</a></h3> <p><a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>. Финальная стадия разработки, рабочая версия в декабре 2019.</p> <h3 id=12-3-podkliuchenie-spravochnika-polzovatelei-i-prav-dostupa-iz-ldap>12.3. Подключение справочника пользователей и прав доступа из LDAP.<a class=headerlink href=#12-3-podkliuchenie-spravochnika-polzovatelei-i-prav-dostupa-iz-ldap title="Permanent link">&para;</a></h3> <p><a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>. Требует 12.1.</p> <h3 id=12-4-podkliuchenie-idm-sistemy-iandeksa-kak-spravochnika-polzovatelei-i-prav-dostupa>12.4. Подключение IDM системы Яндекса как справочника пользователей и прав доступа.<a class=headerlink href=#12-4-podkliuchenie-idm-sistemy-iandeksa-kak-spravochnika-polzovatelei-i-prav-dostupa title="Permanent link">&para;</a></h3> <p>Пока низкий приоритет. Нужно для Метрики. Требует 12.3.</p> <h3 id=12-5-pluggable-autentifikatsiia-s-pomoshchiu-kerberos-vozmozhno-podkliuchenie-gsasl>12.5. Pluggable аутентификация с помощью Kerberos (возможно, подключение GSASL).<a class=headerlink href=#12-5-pluggable-autentifikatsiia-s-pomoshchiu-kerberos-vozmozhno-podkliuchenie-gsasl title="Permanent link">&para;</a></h3> <p><a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>. Требует 12.1.</p> <h3 id=12-6-informatsiia-o-polzovateliakh-i-kvotakh-v-sistemnoi-tablitse>12.6. Информация о пользователях и квотах в системной таблице.<a class=headerlink href=#12-6-informatsiia-o-polzovateliakh-i-kvotakh-v-sistemnoi-tablitse title="Permanent link">&para;</a></h3> <p><a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>. Требует 12.1.</p> <h2 id=13-razdelenie-resursov-multi-tenancy>13. Разделение ресурсов, multi-tenancy.<a class=headerlink href=#13-razdelenie-resursov-multi-tenancy title="Permanent link">&para;</a></h2> <h3 id=13-1-overcommit-zaprosov-po-pamiati-i-vytesnenie>13.1. Overcommit запросов по памяти и вытеснение.<a class=headerlink href=#13-1-overcommit-zaprosov-po-pamiati-i-vytesnenie title="Permanent link">&para;</a></h3> <p>Требует 2.1. Способ реализации обсуждается.</p> <h3 id=13-2-obshchii-konveier-vypolneniia-na-server>13.2. Общий конвейер выполнения на сервер.<a class=headerlink href=#13-2-obshchii-konveier-vypolneniia-na-server title="Permanent link">&para;</a></h3> <p>Требует 2.1. <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>.</p> <h3 id=13-3-puly-resursov>13.3. Пулы ресурсов.<a class=headerlink href=#13-3-puly-resursov title="Permanent link">&para;</a></h3> <p>Требует 13.2 или сможем сделать более неудобную реализацию раньше.</p> <h2 id=14-dialekt-sql>14. Диалект SQL.<a class=headerlink href=#14-dialekt-sql title="Permanent link">&para;</a></h2> <h3 id=14-1-ispravlenie-semantiki-cast-dlia-nullable>14.1. Исправление семантики CAST для Nullable.<a class=headerlink href=#14-1-ispravlenie-semantiki-cast-dlia-nullable title="Permanent link">&para;</a></h3> <p>Нужно для DataLens. А также для внедрения в BI инструмент Looker.</p> <h3 id=14-2-podderzhka-with-dlia-podzaprosov>14.2. Поддержка WITH для подзапросов.<a class=headerlink href=#14-2-podderzhka-with-dlia-podzaprosov title="Permanent link">&para;</a></h3> <h3 id=14-3-podderzhka-podstanovok-dlia-mnozhestv-v-pravoi-chasti-in>14.3. Поддержка подстановок для множеств в правой части IN.<a class=headerlink href=#14-3-podderzhka-podstanovok-dlia-mnozhestv-v-pravoi-chasti-in title="Permanent link">&para;</a></h3> <h3 id=14-4-podderzhka-podstanovok-dlia-identifikatorov-imion-v-sql-zaprose>14.4. Поддержка подстановок для идентификаторов (имён) в SQL запросе.<a class=headerlink href=#14-4-podderzhka-podstanovok-dlia-identifikatorov-imion-v-sql-zaprose title="Permanent link">&para;</a></h3> <p>zhang2014</p> <h3 id=14-5-podderzhka-zadaniia-mnozhestva-kak-massiva-v-pravoi-chasti-sektsii-in>14.5. Поддержка задания множества как массива в правой части секции IN.<a class=headerlink href=#14-5-podderzhka-zadaniia-mnozhestva-kak-massiva-v-pravoi-chasti-sektsii-in title="Permanent link">&para;</a></h3> <p>Василий Немков, Altinity, делал эту задачу, но временно приостановил работу над ней в пользу других задач.</p> <h3 id=14-6-globalnyi-scope-dlia-with>14.6. Глобальный scope для WITH.<a class=headerlink href=#14-6-globalnyi-scope-dlia-with title="Permanent link">&para;</a></h3> <h3 id=14-7-nullable-dlia-with-rollup-with-cube-with-totals>14.7. Nullable для WITH ROLLUP, WITH CUBE, WITH TOTALS.<a class=headerlink href=#14-7-nullable-dlia-with-rollup-with-cube-with-totals title="Permanent link">&para;</a></h3> <p>Простая задача.</p> <h3 id=14-8-modifikatory-distinct-order-by-dlia-agregatnykh-funktsii>14.8. Модификаторы DISTINCT, ORDER BY для агрегатных функций.<a class=headerlink href=#14-8-modifikatory-distinct-order-by-dlia-agregatnykh-funktsii title="Permanent link">&para;</a></h3> <p>Софья Борзенкова, ВШЭ.</p> <p>В ClickHouse поддерживается вычисление COUNT(DISTINCT x). Предлагается добавить возможность использования модификатора DISTINCT для всех агрегатных функций. Например, AVG(DISTINCT x) - вычислить среднее значение для всех различных значений x. Под вопросом вариант, в котором фильтрация уникальных значений выполняется по одному выражению, а агрегация по другому.</p> <p>Результат некоторых агрегатных функций зависит от порядка данных. Предлагается реализовать модификатор ORDER BY, задающий порядок явно. Пример: groupArray(x ORDER BY y, z).</p> <h3 id=14-9-podderzhka-zaprosa-explain>14.9. Поддержка запроса EXPLAIN.<a class=headerlink href=#14-9-podderzhka-zaprosa-explain title="Permanent link">&para;</a></h3> <p>Требует 2.1. <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>.</p> <h3 id=14-10-arrayreduce-kak-funktsiia-vysshego-poriadka>14.10. arrayReduce как функция высшего порядка.<a class=headerlink href=#14-10-arrayreduce-kak-funktsiia-vysshego-poriadka title="Permanent link">&para;</a></h3> <h3 id=14-11-funktsii-dlia-grouping-sets>14.11. Функции для grouping sets.<a class=headerlink href=#14-11-funktsii-dlia-grouping-sets title="Permanent link">&para;</a></h3> <h3 id=14-12-funktsii-obrabotki-vremennykh-riadov>14.12. Функции обработки временных рядов.<a class=headerlink href=#14-12-funktsii-obrabotki-vremennykh-riadov title="Permanent link">&para;</a></h3> <p>Сложная задача, так как вводит новый класс функций и требует его обработку в оптимизаторе запросов.</p> <p>В time-series СУБД нужны функции, которые зависят от последовательности значений. Или даже от последовательности значений и их меток времени. Примеры: moving average, exponential smoothing, derivative, Holt-Winters forecast. Вычисление таких функций поддерживается в ClickHouse лишь частично. Так, ClickHouse поддерживает тип данных "массив" и позволяет реализовать эти функции как функции, принимающие массивы. Но гораздо удобнее для пользователя было бы иметь возможность применить такие функции к таблице (промежуточному результату запроса после сортировки).</p> <p>Это требует введение нового класса функций (помимо обычных и агрегатных функций) - такие функции будут иметь в коде ClickHouse свой собственный интерфейс, и их вычисление придётся отдельно учитывать в конвейере выполнения запросов. Для примера, вычисление обычных функций тривиально распараллеливается по процессорным ядрам и по серверам; вычисление агрегатных функций распараллеливается с некоторыми особенностями (работа с промежуточными состояниями вычислений, операция merge); а для функций по обработке временных рядов этот вопрос остаётся открытым - возможно, их придётся вычислять на одном сервере и в одном потоке.</p> <h3 id=14-13-primenimost-funktsii-vysshego-poriadka-dlia-kortezhei-i-nested>14.13. Применимость функций высшего порядка для кортежей и Nested.<a class=headerlink href=#14-13-primenimost-funktsii-vysshego-poriadka-dlia-kortezhei-i-nested title="Permanent link">&para;</a></h3> <h3 id=14-14-neiavnye-preobrazovaniia-tipov-konstant>14.14. Неявные преобразования типов констант.<a class=headerlink href=#14-14-neiavnye-preobrazovaniia-tipov-konstant title="Permanent link">&para;</a></h3> <p>Требует 2.12.</p> <h3 id=14-15-neiavnye-preobrazovaniia-tipov-pod-nastroikoi>14.15. Неявные преобразования типов под настройкой.<a class=headerlink href=#14-15-neiavnye-preobrazovaniia-tipov-pod-nastroikoi title="Permanent link">&para;</a></h3> <p>Требует 2.12. Для внедрения в BI инструмент Looker.</p> <h3 id=14-16-sinonimy-dlia-funktsii-iz-mysql>14.16. Синонимы для функций из MySQL.<a class=headerlink href=#14-16-sinonimy-dlia-funktsii-iz-mysql title="Permanent link">&para;</a></h3> <h3 id=14-17-vvesti-poniatie-stateful-funktsii>14.17. Ввести понятие stateful функций.<a class=headerlink href=#14-17-vvesti-poniatie-stateful-funktsii title="Permanent link">&para;</a></h3> <p>zhang2014.<br> Для runningDifference, neighbour - их учёт в оптимизаторе запросов.<br> В интерфейсе уже сделано. Надо проверить, что учитывается в нужных местах (например, что работает predicate pushdown сквозь ORDER BY, если таких функций нет).</p> <h3 id=14-18-union-distinct-i-vozmozhnost-vkliuchit-ego-po-umolchaniiu>14.18. UNION DISTINCT и возможность включить его по-умолчанию.<a class=headerlink href=#14-18-union-distinct-i-vozmozhnost-vkliuchit-ego-po-umolchaniiu title="Permanent link">&para;</a></h3> <p>Для BI систем.</p> <h3 id=14-19-sovmestimost-parsera-tipov-dannykh-s-sql>14.19. Совместимость парсера типов данных с SQL.<a class=headerlink href=#14-19-sovmestimost-parsera-tipov-dannykh-s-sql title="Permanent link">&para;</a></h3> <p>Для BI систем.</p> <h3 id=14-20-pozitsionnye-argumenty-dlia-group-by-i-order-by>14.20. Позиционные аргументы для GROUP BY и ORDER BY.<a class=headerlink href=#14-20-pozitsionnye-argumenty-dlia-group-by-i-order-by title="Permanent link">&para;</a></h3> <p>Тривиально и используется многими системами, но не входит в стандарт SQL.</p> <h3 id=14-21-privedenie-tipov-dlia-in-podzapros-i-dlia-join>14.21. Приведение типов для IN (подзапрос) и для JOIN.<a class=headerlink href=#14-21-privedenie-tipov-dlia-in-podzapros-i-dlia-join title="Permanent link">&para;</a></h3> <h2 id=15-uluchshenie-podderzhki-join>15. Улучшение поддержки JOIN.<a class=headerlink href=#15-uluchshenie-podderzhki-join title="Permanent link">&para;</a></h2> <h3 id=15-1-dovedenie-merge-join-do-prodakshena>15.1. Доведение merge JOIN до продакшена.<a class=headerlink href=#15-1-dovedenie-merge-join-do-prodakshena title="Permanent link">&para;</a></h3> <p>Артём Зуйков. Сейчас merge JOIN включается вручную опцией и всегда замедляет запросы. Хотим, чтобы он замедлял запросы только когда это неизбежно.<br> Кстати, смысл merge JOIN появляется только совместно с 15.2 и 15.3.</p> <h3 id=15-2-prokidyvanie-uslovii-v-outer-join>15.2. Прокидывание условий в OUTER JOIN.<a class=headerlink href=#15-2-prokidyvanie-uslovii-v-outer-join title="Permanent link">&para;</a></h3> <p>Возможно, Артём Зуйков, но задача ещё не продумана до конца. Возможно, требует 2.1.</p> <h3 id=15-3-logicheskii-vyvod-dlia-tsepochek-vida-on-t1-x-t2-y-where-t1-x-10>15.3. Логический вывод для цепочек вида ON t1.x = t2.y WHERE t1.x = 10<a class=headerlink href=#15-3-logicheskii-vyvod-dlia-tsepochek-vida-on-t1-x-t2-y-where-t1-x-10 title="Permanent link">&para;</a></h3> <p>Возможно, Артём Зуйков. Для полноценной работы 15.2.</p> <h3 id=15-4-distributed-join-s-pomoshchiu-pereraspredeleniia-dannykh>15.4. Distributed JOIN с помощью перераспределения данных.<a class=headerlink href=#15-4-distributed-join-s-pomoshchiu-pereraspredeleniia-dannykh title="Permanent link">&para;</a></h3> <p>Артём Зуйков.</p> <h3 id=15-5-ispolzovanie-kliucha-tablitsy-dlia-optimizatsii-merge-join>15.5. Использование ключа таблицы для оптимизации merge JOIN.<a class=headerlink href=#15-5-ispolzovanie-kliucha-tablitsy-dlia-optimizatsii-merge-join title="Permanent link">&para;</a></h3> <h3 id=15-6-semi-i-anti-join>15.6. + SEMI и ANTI JOIN.<a class=headerlink href=#15-6-semi-i-anti-join title="Permanent link">&para;</a></h3> <p>Артём Зуйков.</p> <h2 id=16-tipy-dannykh-i-funktsii>16. Типы данных и функции.<a class=headerlink href=#16-tipy-dannykh-i-funktsii title="Permanent link">&para;</a></h2> <h3 id=16-1-datetime64>16.1. DateTime64.<a class=headerlink href=#16-1-datetime64 title="Permanent link">&para;</a></h3> <p>Василий Немков, Altinity, декабрь 2019.</p> <h3 id=16-2-tip-dannykh-dlia-json>16.2. Тип данных для JSON.<a class=headerlink href=#16-2-tip-dannykh-dlia-json title="Permanent link">&para;</a></h3> <p>zhang2014</p> <h3 id=16-3-podderzhka-nekonstantnykh-argumentov-s-reguliarnymi-vyrazheniiami-v-funktsiiakh>16.3. Поддержка неконстантных аргументов с регулярными выражениями в функциях.<a class=headerlink href=#16-3-podderzhka-nekonstantnykh-argumentov-s-reguliarnymi-vyrazheniiami-v-funktsiiakh title="Permanent link">&para;</a></h3> <p>Данила Кутенин, но только после секретного изменения в работе.</p> <h3 id=16-4-funktsiia-rownumberforkey>16.4. Функция rowNumberForKey.<a class=headerlink href=#16-4-funktsiia-rownumberforkey title="Permanent link">&para;</a></h3> <h3 id=16-5-funktsii-dlia-xml-i-html-escape>16.5. Функции для XML и HTML escape.<a class=headerlink href=#16-5-funktsii-dlia-xml-i-html-escape title="Permanent link">&para;</a></h3> <h3 id=16-6-funktsii-normalizatsii-i-kheshirovaniia-sql-zaprosov>16.6. Функции нормализации и хэширования SQL запросов.<a class=headerlink href=#16-6-funktsii-normalizatsii-i-kheshirovaniia-sql-zaprosov title="Permanent link">&para;</a></h3> <h2 id=17-rabota-s-geograficheskimi-dannymi>17. Работа с географическими данными.<a class=headerlink href=#17-rabota-s-geograficheskimi-dannymi title="Permanent link">&para;</a></h2> <h3 id=17-1-geo-slovari-dlia-opredeleniia-regiona-po-koordinatam>17.1. Гео-словари для определения региона по координатам.<a class=headerlink href=#17-1-geo-slovari-dlia-opredeleniia-regiona-po-koordinatam title="Permanent link">&para;</a></h3> <p><a href=https://github.com/achulkov2 rel="external nofollow noreferrer">Андрей Чулков</a>, Антон Кваша, Артур Петуховский, ВШЭ.<br> Будет основано на коде от Арслана Урташева.</p> <p>ClickHouse не является geospatial СУБД. Тем не менее, в ClickHouse есть несколько функций для таких задач. Например, функция <code>pointInPolygon</code> позволяет быстро проверить попадание точек в полигон на плоскости. При этом, полигон задаётся в явном виде и должен быть константным для вызова функции (то есть - проверяется принадлежность многих точек одному полигону). Эта функциональность нужна, например, для рекламного таргетинга мобильных устройств по координатам.</p> <p>Похожая, но более сложная задача, которую ClickHouse пока не умеет решать - определение полигона среди множества полигонов, в которые попадают точки. Для примера: определение района города по географическим координатам. Для решения этой задачи нужно будет реализовать поддержку словарей с полигонами, в которых данные проиндексированы для быстрого поиска.</p> <h3 id=17-2-gis-tipy-dannykh-i-operatsii>17.2. GIS типы данных и операции.<a class=headerlink href=#17-2-gis-tipy-dannykh-i-operatsii title="Permanent link">&para;</a></h3> <p>Алексей Коряков, Алексей Илюхов, ВШЭ, Яндекс.Карты.</p> <p>Реализовать в ClickHouse типы данных для задач обработки геоинформационных данных: Point, Line, MultiLine, Polygon и операции над ними - проверка вхождения, пересечения. Вариантом минимум будет реализация этих операций в евклидовой системе координат. Дополнительно - на сфере и WGS84.</p> <h3 id=17-3-uskorenie-greatcircledistance>17.3. + Ускорение greatCircleDistance.<a class=headerlink href=#17-3-uskorenie-greatcircledistance title="Permanent link">&para;</a></h3> <p><a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>, основано на коде Андрея Аксёнова, получено разрешение на использование кода.</p> <h3 id=17-4-uskorenie-geohash-s-pomoshchiu-biblioteki-iz-arkadii>17.4. Ускорение geohash с помощью библиотеки из Аркадии.<a class=headerlink href=#17-4-uskorenie-geohash-s-pomoshchiu-biblioteki-iz-arkadii title="Permanent link">&para;</a></h3> <p>Предположительно, <a href=https://github.com/achulkov2 rel="external nofollow noreferrer">Андрей Чулков</a>. Получено одобрение от руководства.</p> <h3 id=17-5-proverki-v-funktsii-pointinpolygon>17.5. Проверки в функции pointInPolygon.<a class=headerlink href=#17-5-proverki-v-funktsii-pointinpolygon title="Permanent link">&para;</a></h3> <p><a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>. Сейчас функция тихо не работает в случае полигонов с самопересечениями, надо кидать исключение.</p> <h2 id=18-mashinnoe-obuchenie-i-statistika>18. Машинное обучение и статистика.<a class=headerlink href=#18-mashinnoe-obuchenie-i-statistika title="Permanent link">&para;</a></h2> <h3 id=18-1-inkrementalnaia-klasterizatsiia-dannykh>18.1. Инкрементальная кластеризация данных.<a class=headerlink href=#18-1-inkrementalnaia-klasterizatsiia-dannykh title="Permanent link">&para;</a></h3> <p>Александр Кожихов, Максим Кузнецов. Обнаружена фундаментальная проблема в реализации, доделывает предположительно <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>. Он может делегировать задачу кому угодно.</p> <h3 id=18-2-agregatnye-funktsii-dlia-statisticheskikh-testov>18.2. Агрегатные функции для статистических тестов.<a class=headerlink href=#18-2-agregatnye-funktsii-dlia-statisticheskikh-testov title="Permanent link">&para;</a></h3> <p>Артём Цыганов, Руденский Константин Игоревич, Семёнов Денис, ВШЭ.</p> <p>Предлагается реализовать в ClickHouse статистические тесты (Analysis of Variance, тесты нормальности распределения и т. п.) в виде агрегатных функций. Пример: <code>welchTTest(value, sample_idx)</code>.</p> <h3 id=18-3-infrastruktura-dlia-trenirovki-modelei-v-clickhouse>18.3. Инфраструктура для тренировки моделей в ClickHouse.<a class=headerlink href=#18-3-infrastruktura-dlia-trenirovki-modelei-v-clickhouse title="Permanent link">&para;</a></h3> <p>В очереди. Возможно, Александр Кожихов. У него сначала идёт задача 24.26.</p> <h2 id=19-uluchshenie-raboty-klastera>19. Улучшение работы кластера.<a class=headerlink href=#19-uluchshenie-raboty-klastera title="Permanent link">&para;</a></h2> <h3 id=19-1-parallelnye-kvorumnye-vstavki-bez-linearizuemosti>19.1. Параллельные кворумные вставки без линеаризуемости.<a class=headerlink href=#19-1-parallelnye-kvorumnye-vstavki-bez-linearizuemosti title="Permanent link">&para;</a></h3> <p>Александра Латышева, ВШЭ и Яндекс.</p> <p>Репликация данных в ClickHouse по-умолчанию является асинхронной без выделенного мастера. Это значит, что клиент, осуществляющий вставку данных, получает успешный ответ после того, как данные попали на один сервер; репликация данных по остальным серверам осуществляется в другой момент времени. Это ненадёжно, потому что допускает потерю только что вставленных данных при потере лишь одного сервера.</p> <p>Для решения этой проблемы, в ClickHouse есть возможность включить "кворумную" вставку. Это значит, что клиент, осуществляющий вставку данных, получает успешный ответ после того, как данные попали на несколько (кворум) серверов. Обеспечивается линеаризуемость: клиент, получает успешный ответ после того, как данные попали на несколько реплик, <em>которые содержат все предыдущие данные, вставленные с кворумом</em> (такие реплики можно называть "синхронными"), и при запросе SELECT можно выставить настройку, разрешающую только чтение с синхронных реплик.</p> <p>Если бы свойства линеаризуемости не было, то для трёх серверов A, B, C, значения кворума = 2, и для трёх вставок данных 1, 2, 3, возможна ситуация, что первая вставка прошла на серверы A и B, вторая прошла на серверы B и C, а третья - на серверы A и C, и теперь ни один из серверов не содержит полный набор данных 1, 2, 3.</p> <p>Как ни странно, такое свойство не нужно большинству пользователей. Оно запрещает параллельно выполняющиеся вставки. А пользователи хотят вставлять данные надёжно (на более чем одну реплику), но не важно, в каком порядке. Предлагается сделать опцию, которая отключает линеаризуемость.</p> <p>Иногда пользователь хочет реализовать кворумную вставку вручную: просто соединиться с несколькими репликами и вставть на них одинаковые данные (чтобы обеспечить надёжную вставку, не ориентируясь на то, как работает механизм репликации). Сейчас ожидания пользователя не оправдываются. В ClickHouse есть механизм дедупликации для обеспечения идемпотентности вставок. Вторая вставка с такими же данными (пусть даже на другую реплику) будет проигнорирована. Надо сделать так, чтобы вместо этого, вставка одинаковых данных на другую реплику, имела такой же эффект, как если бы эти данные были получены с помощью механизма репликации.</p> <h3 id=19-2-podkliuchenie-etcd-ili-consul-kak-alternativy-zookeeper>19.2. Подключение Etcd или Consul как альтернативы ZooKeeper.<a class=headerlink href=#19-2-podkliuchenie-etcd-ili-consul-kak-alternativy-zookeeper title="Permanent link">&para;</a></h3> <p>Алексей Лёвушкин, ВШЭ и Яндекс.</p> <p>Для координации реплик в ClickHouse используется ZooKeeper. Многие пользователи ClickHouse хотели бы иметь возможность использовать для координации некоторые другие системы вместо ZooKeeper. Рассматриваемыми вариантами таких систем являются Etcd, Consul, FoundationDB. Это весьма проблематично, так как эти системы существенно отличаются по интерфейсам и возможностям. Тем не менее, для того, чтобы эта задача стала возможной, в ClickHouse обобщён интерфейс взаимодействия с ZooKeeper, и теперь на его место можно подставлять другие реализации.</p> <p>В прошлом году, Алексей добавил модельную реализацию (mock) интерфейса ZooKeeper для тестирования. Сейчас предлагается сделать реализацию поверх Etcd, а также расширить возможности тестовой реализации.</p> <h3 id=19-3-podkliuchenie-yt-cypress-ili-ydb-kak-alternativy-zookeeper>19.3. Подключение YT Cypress или YDB как альтернативы ZooKeeper.<a class=headerlink href=#19-3-podkliuchenie-yt-cypress-ili-ydb-kak-alternativy-zookeeper title="Permanent link">&para;</a></h3> <p>Hold. Полезно для заказчиков внутри Яндекса, но есть риски.</p> <h3 id=19-4-internal-replication-auto>19.4. internal_replication = 'auto'.<a class=headerlink href=#19-4-internal-replication-auto title="Permanent link">&para;</a></h3> <h3 id=19-5-replitsiruemye-bazy-dannykh>19.5. Реплицируемые базы данных.<a class=headerlink href=#19-5-replitsiruemye-bazy-dannykh title="Permanent link">&para;</a></h3> <p>В очереди, возможно Валерий Батурин, ВШЭ.</p> <p>Репликация в ClickHouse работает на уровне отдельных таблиц. Это является очень гибким решением: на одном сервере одна из таблиц может быть не реплицирована, другая иметь двухкратную репликацию, а третья - реплицирована по всем серверам. Но если все таблицы в базе данных реплицированы одинаковым образом. то это затрудняет управление кластером. Например, при восстановлени сервера, требуется отдельно создавать реплику для каждой таблицы.</p> <p>Предлагается реализовать "движок баз данных", который осуществляет репликацию метаданных (множество имеющихся таблиц и лог DDL операций над ними: CREATE, DROP, RENAME, ALTER). Пользователь сможет создать реплицируемую базу данных; при её создании или восстановлении на другом сервере, все реплицируемые таблицы будут созданы автоматически.</p> <h3 id=19-6-odnovremennyi-vybor-kuskov-dlia-sliianiia-mnogimi-replikami-otkaz-ot-leader-election-v-zk>19.6. Одновременный выбор кусков для слияния многими репликами, отказ от leader election в ZK.<a class=headerlink href=#19-6-odnovremennyi-vybor-kuskov-dlia-sliianiia-mnogimi-replikami-otkaz-ot-leader-election-v-zk title="Permanent link">&para;</a></h3> <h3 id=19-7-vozmozhnost-zapisi-dannykh-pri-nedostupnosti-zk-i-otkaz-ot-lineinogo-poriadka-kuskov-v-bolshinstve-sluchaev>19.7. Возможность записи данных при недоступности ZK и отказ от линейного порядка кусков в большинстве случаев.<a class=headerlink href=#19-7-vozmozhnost-zapisi-dannykh-pri-nedostupnosti-zk-i-otkaz-ot-lineinogo-poriadka-kuskov-v-bolshinstve-sluchaev title="Permanent link">&para;</a></h3> <h3 id=19-8-otkaz-ot-khraneniia-v-zk-mnozhestva-kuskov-dlia-kazhdoi-repliki-otdelno>19.8. Отказ от хранения в ZK множества кусков для каждой реплики отдельно.<a class=headerlink href=#19-8-otkaz-ot-khraneniia-v-zk-mnozhestva-kuskov-dlia-kazhdoi-repliki-otdelno title="Permanent link">&para;</a></h3> <h3 id=19-9-otkaz-ot-khraneniia-v-zk-loga-vstavok-i-merzhei-obmen-dannymi-o-kuskakh-napriamuiu>19.9. Отказ от хранения в ZK лога вставок и мержей. Обмен данными о кусках напрямую.<a class=headerlink href=#19-9-otkaz-ot-khraneniia-v-zk-loga-vstavok-i-merzhei-obmen-dannymi-o-kuskakh-napriamuiu title="Permanent link">&para;</a></h3> <h3 id=19-10-oblachnye-tablitsy>19.10. Облачные таблицы.<a class=headerlink href=#19-10-oblachnye-tablitsy title="Permanent link">&para;</a></h3> <p>Требует 1.6, 19.1, 19.6, 19.7, 19.8, 19.9.</p> <h2 id=20-mutatsii-dannykh>20. Мутации данных.<a class=headerlink href=#20-mutatsii-dannykh title="Permanent link">&para;</a></h2> <p>Пока все задачи по точечным UPDATE/DELETE имеют низкий приоритет, но ожидаем взять в работу в середине 2020.</p> <h3 id=20-1-podderzhka-delete-putiom-zapominaniia-mnozhestva-zatronutykh-kuskov-i-kliuchei>20.1. Поддержка DELETE путём запоминания множества затронутых кусков и ключей.<a class=headerlink href=#20-1-podderzhka-delete-putiom-zapominaniia-mnozhestva-zatronutykh-kuskov-i-kliuchei title="Permanent link">&para;</a></h3> <h3 id=20-2-podderzhka-delete-putiom-preobrazovaniia-mnozhestva-kliuchei-v-mnozhestvo-row-numbers-na-replike-stolbtsa-flagov-i-indeksa-po-diapazonam>20.2. Поддержка DELETE путём преобразования множества ключей в множество row_numbers на реплике, столбца флагов и индекса по диапазонам.<a class=headerlink href=#20-2-podderzhka-delete-putiom-preobrazovaniia-mnozhestva-kliuchei-v-mnozhestvo-row-numbers-na-replike-stolbtsa-flagov-i-indeksa-po-diapazonam title="Permanent link">&para;</a></h3> <h3 id=20-3-podderzhka-lenivykh-delete-putiom-zapominaniia-vyrazhenii-i-preobrazovaniia-k-mnozhestvu-kliuchei-v-fone>20.3. Поддержка ленивых DELETE путём запоминания выражений и преобразования к множеству ключей в фоне.<a class=headerlink href=#20-3-podderzhka-lenivykh-delete-putiom-zapominaniia-vyrazhenii-i-preobrazovaniia-k-mnozhestvu-kliuchei-v-fone title="Permanent link">&para;</a></h3> <h3 id=20-4-podderzhka-update-s-pomoshchiu-preobrazovaniia-v-delete-i-vstavok>20.4. Поддержка UPDATE с помощью преобразования в DELETE и вставок.<a class=headerlink href=#20-4-podderzhka-update-s-pomoshchiu-preobrazovaniia-v-delete-i-vstavok title="Permanent link">&para;</a></h3> <h2 id=21-optimizatsii-proizvoditelnosti>21. Оптимизации производительности.<a class=headerlink href=#21-optimizatsii-proizvoditelnosti title="Permanent link">&para;</a></h2> <h3 id=21-1-parallelnyi-parsing-formatov>21.1. + Параллельный парсинг форматов.<a class=headerlink href=#21-1-parallelnyi-parsing-formatov title="Permanent link">&para;</a></h3> <p>Начинал Олег Ершов, доделывает Никита Михайлов, помогает <a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>. Готово.</p> <h3 id=21-2-parallelnoe-formatirovanie-formatov>21.2. Параллельное форматирование форматов.<a class=headerlink href=#21-2-parallelnoe-formatirovanie-formatov title="Permanent link">&para;</a></h3> <p>После 21.1, предположительно Никита Михайлов. Задача сильно проще чем 21.1.</p> <h3 id=21-3-ispravlenie-nizkoi-proizvoditelnosti-analiza-indeksa-v-sluchae-bolshogo-mnozhestva-v-sektsii-in>21.3. Исправление низкой производительности анализа индекса в случае большого множества в секции IN.<a class=headerlink href=#21-3-ispravlenie-nizkoi-proizvoditelnosti-analiza-indeksa-v-sluchae-bolshogo-mnozhestva-v-sektsii-in title="Permanent link">&para;</a></h3> <p>Нужно всем (Zen, БК, DataLens...) Пока ещё не выбран исполнитель.</p> <h3 id=21-4-ispolzovanie-order-by-kliucha-dlia-optimizatsii-group-by-i-distinct>21.4. Использование ORDER BY ключа для оптимизации GROUP BY и DISTINCT.<a class=headerlink href=#21-4-ispolzovanie-order-by-kliucha-dlia-optimizatsii-group-by-i-distinct title="Permanent link">&para;</a></h3> <p>Дмитрий Рубашкин, ВШЭ. Помогает Антон Попов.</p> <p>Если таблица имеет ключ сортировки, то возможно эффективное чтение упорядоченных данных. Если запрос содержит операцию GROUP BY, содержащую по крайней мере префикс от ключа сортировки таблицы, либо инъективные функции от него, то возможно более эффективное выполнение GROUP BY: промежуточный результат агрегации финализируется и отправляется клиенту как только в потоке данных при чтении из таблицы встретился следующий ключ.</p> <p>Аналогичную оптимизацию следует реализовать для DISTINCT и LIMIT BY.</p> <p>В прошлом году, аналогичное решение сделали для операции ORDER BY.</p> <h3 id=21-5-rasparallelivanie-insert-pri-insert-select-esli-eto-neobkhodimo>21.5. Распараллеливание INSERT при INSERT SELECT, если это необходимо.<a class=headerlink href=#21-5-rasparallelivanie-insert-pri-insert-select-esli-eto-neobkhodimo title="Permanent link">&para;</a></h3> <p><a href=https://github.com/Vxider rel="external nofollow noreferrer">Vxider</a>, ICT</p> <h3 id=21-6-umenshenie-chisla-potokov-dlia-select-v-sluchae-trivialnogo-insert-select>21.6. Уменьшение числа потоков для SELECT в случае тривиального INSERT SELECT.<a class=headerlink href=#21-6-umenshenie-chisla-potokov-dlia-select-v-sluchae-trivialnogo-insert-select title="Permanent link">&para;</a></h3> <h3 id=21-7-kesh-rezultatov-zaprosov>21.7. Кэш результатов запросов.<a class=headerlink href=#21-7-kesh-rezultatov-zaprosov title="Permanent link">&para;</a></h3> <p><a href=https://github.com/achimbab rel="external nofollow noreferrer">Achimbab</a>.</p> <h3 id=21-8-vzaimnaia-integratsiia-allokatora-i-kesha>21.8. Взаимная интеграция аллокатора и кэша.<a class=headerlink href=#21-8-vzaimnaia-integratsiia-allokatora-i-kesha title="Permanent link">&para;</a></h3> <p>Михаил Кот, ВШЭ. Задача сложная и рискованная.</p> <p>Для выделения памяти, аллокаторы запрашивают её у операционной системы (<code>mmap</code>). Это возможно только для достаточно крупных кусков памяти является довольно медленной операцией. Поэтому, современные аллокаторы кэшируют крупные куски памяти в программе. При вызове free, кусок памяти, как правило, не отдаётся ОС, а остаётся для последующего переиспользования. Для выделения мелких кусков памяти, крупные куски разбиваются с помощью специальных структур данных (free-list, heap, bitmap). Для уменьшения contention в многопоточных программах, эти структуры также делаются thread-локальными.</p> <p>Часто в программе есть кэши некоторых данных. Например - кэш данных после разжатия, использующийся чтобы сэкономить на повторных запросах одних и тех же данных. При вытеснении из кэша, блок данных освобождается (<code>free</code>) и данные, бывшие в кэше, становятся недоступными для переиспользования. Но если принимать во внимание то, как работает аллокатор памяти, то оказывается, что после освобождения памяти, данные всё ещё остаются доступными в программе. И если этот кусок памяти не будет выделен аллокатором снова, его можно было бы продолжить использовать в качестве кэша. Иными словами, в программе есть domain-specific кэш, а аллокатор имеет свой кэш, и они не знают друг о друге.</p> <p>Для domain-specific кэшей (как например, кэш разжатых данных) выгодно, чтобы они использовали как можно больший объём свободной памяти. Но в этом случае, памяти может не хватить для других структур данных в программе. Если аллокатор памяти знает про кэш, то выделение памяти можно было бы делать путём вытеснения данных из кэша.</p> <h3 id=21-8-1-otdelnyi-allokator-dlia-keshei-s-aslr>21.8.1. Отдельный аллокатор для кэшей с ASLR.<a class=headerlink href=#21-8-1-otdelnyi-allokator-dlia-keshei-s-aslr title="Permanent link">&para;</a></h3> <p>В прошлом году задачу пытался сделать Данила Кутенин с помощью lfalloc из Аркадии и mimalloc из Microsoft, но оба решения не были квалифицированы для использования в продакшене. Успешная реализация задачи 21.8 отменит необходимость в этой задаче, поэтому холд.</p> <h3 id=21-9-ispravit-push-down-vyrazhenii-s-pomoshchiu-processors>21.9. Исправить push-down выражений с помощью Processors.<a class=headerlink href=#21-9-ispravit-push-down-vyrazhenii-s-pomoshchiu-processors title="Permanent link">&para;</a></h3> <p><a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>. Требует 2.1.</p> <h3 id=21-10-uluchshenie-evristiki-prewhere>21.10. + Улучшение эвристики PREWHERE.<a class=headerlink href=#21-10-uluchshenie-evristiki-prewhere title="Permanent link">&para;</a></h3> <p>Amos Bird.</p> <h3 id=21-11-peephole-optimizatsii-zaprosov>21.11. Peephole оптимизации запросов.<a class=headerlink href=#21-11-peephole-optimizatsii-zaprosov title="Permanent link">&para;</a></h3> <p>Руслан Камалов, Михаил Малафеев, Виктор Гришанин, ВШЭ</p> <p>Реализовать в ClickHouse оптимизации запросов, основанные на упрощении отдельных небольших кусков выражений (так называемые "peephole" оптимизации). Примеры:<br> - Замена цепочек if на multiIf.<br> - Удаление min/max/any-агрегатов от выражений от ключей GROUP BY.<br> - Вынесение арифметических операций из агрегатных функций;<br> - Вынесение любых функций наружу any, anyLast.<br> - При GROUP BY по transform или if по строкам, замена строк на Enum.</p> <h3 id=21-12-algebraicheskie-optimizatsii-zaprosov>21.12. Алгебраические оптимизации запросов.<a class=headerlink href=#21-12-algebraicheskie-optimizatsii-zaprosov title="Permanent link">&para;</a></h3> <p>Руслан Камалов, Михаил Малафеев, Виктор Гришанин, ВШЭ</p> <p>Реализовать в ClickHouse оптимизации запросов, основанные на алгебраических свойствах функций. Примеры:<br> - Обращение инъективных функций в сравнениях на равенство.<br> - Вынесение инъективных функцию наружу uniq.<br> - Удаление монотонных функций из ORDER BY.<br> - Удаление избыточных выражений из ORDER BY.<br> - Удаление из GROUP BY функций от других ключей GROUP BY.<br> - Удаление дублирующихся DISTINCT, ORDER BY из подзапросов.</p> <h3 id=21-13-fusion-agregatnykh-funktsii>21.13. Fusion агрегатных функций.<a class=headerlink href=#21-13-fusion-agregatnykh-funktsii title="Permanent link">&para;</a></h3> <p>После или совместно с 21.11.</p> <h3 id=21-14-optimizatsiia-zaprosov-s-pomoshchiu-constraints>21.14. Оптимизация запросов с помощью constraints.<a class=headerlink href=#21-14-optimizatsiia-zaprosov-s-pomoshchiu-constraints title="Permanent link">&para;</a></h3> <p>Мария Нефедова, ВШЭ.</p> <p>Constraints позволяют задать выражение, истинность которого проверяется при вставке данных в таблицу. Предположение о том, что выражение истинно, может использоваться и для оптимизации запросов. Например, встретив в запросе точно такое же выражение, можно заменить его на константу 1.</p> <p>Если выражение содержит равенство, то встретив в запросе одну из частей равенства, её можно заменить на другую часть равенства, если это сделает проще чтение данных или вычисление выражения. Например, задан constraint: <code>URLDomain = domain(URL)</code>. Значит, выражение <code>domain(URL)</code> можно заменить на <code>URLDomain</code>.</p> <h3 id=21-15-mnogostupenchatoe-chtenie-dannykh-vmesto-prewhere>21.15. Многоступенчатое чтение данных вместо PREWHERE.<a class=headerlink href=#21-15-mnogostupenchatoe-chtenie-dannykh-vmesto-prewhere title="Permanent link">&para;</a></h3> <p>Требует 2.1 и 21.10.</p> <h3 id=21-16-optimizatsiia-group-by-s-bolshim-kolichestvom-agregatnykh-funktsii-putiom-vychisleniia-v-dva-prokhoda>21.16. Оптимизация GROUP BY с большим количеством агрегатных функций путём вычисления в два прохода.<a class=headerlink href=#21-16-optimizatsiia-group-by-s-bolshim-kolichestvom-agregatnykh-funktsii-putiom-vychisleniia-v-dva-prokhoda title="Permanent link">&para;</a></h3> <p>Нужно для БК.</p> <h3 id=21-17-optimizatsiia-group-by-pri-nalichii-order-by-po-tem-zhe-kliucham-s-limit>21.17. Оптимизация GROUP BY при наличии ORDER BY по тем же ключам с LIMIT.<a class=headerlink href=#21-17-optimizatsiia-group-by-pri-nalichii-order-by-po-tem-zhe-kliucham-s-limit title="Permanent link">&para;</a></h3> <p>Нужно для БК.</p> <h3 id=21-18-vnutrenniaia-parallelizatsiia-merzha-bolshikh-sostoianii-agregatnykh-funktsii>21.18. Внутренняя параллелизация мержа больших состояний агрегатных функций.<a class=headerlink href=#21-18-vnutrenniaia-parallelizatsiia-merzha-bolshikh-sostoianii-agregatnykh-funktsii title="Permanent link">&para;</a></h3> <h3 id=21-19-optimizatsiia-sortirovki>21.19. Оптимизация сортировки.<a class=headerlink href=#21-19-optimizatsiia-sortirovki title="Permanent link">&para;</a></h3> <p>Василий Морозов, Арслан Гумеров, Альберт Кидрачев, ВШЭ.<br> В прошлом году задачу начинал делать другой человек, но не добился достаточного прогресса.</p> <ol> <li>Оптимизация top sort.</li> </ol> <p>В ClickHouse используется неоптимальный вариант top sort. Суть его в том, что из каждого блока достаётся top N записей, а затем, все блоки мержатся. Но доставание top N записей у каждого следующего блока бессмысленно, если мы знаем, что из них в глобальный top N войдёт меньше. Конечно нужно реализовать вариацию на тему priority queue (heap) с быстрым пропуском целых блоков, если ни одна строка не попадёт в накопленный top.</p> <ol start=2> <li>Рекурсивный вариант сортировки по кортежам.</li> </ol> <p>Для сортировки по кортежам используется обычная сортировка с компаратором, который в цикле по элементам кортежа делает виртуальные вызовы <code>IColumn::compareAt</code>. Это неоптимально - как из-за короткого цикла по неизвестному в compile-time количеству элементов, так и из-за виртуальных вызовов. Чтобы обойтись без виртуальных вызовов, есть метод <code>IColumn::getPermutation</code>. Он используется в случае сортировки по одному столбцу. Есть вариант, что в случае сортировки по кортежу, что-то похожее тоже можно применить... например, сделать метод <code>updatePermutation</code>, принимающий аргументы offset и limit, и допереставляющий перестановку в диапазоне значений, в которых предыдущий столбец имел равные значения.</p> <ol start=3> <li>RadixSort для сортировки.</li> </ol> <p>Один наш знакомый начал делать задачу по попытке использования RadixSort для сортировки столбцов. Был сделан вариант indirect сортировки (для <code>getPermutation</code>), но не оптимизирован до конца - есть лишние ненужные перекладывания элементов. Для того, чтобы его оптимизировать, придётся добавить немного шаблонной магии (на последнем шаге что-то не копировать, вместо перекладывания индексов - складывать их в готовое место). Также этот человек добавил метод MSD Radix Sort для реализации radix partial sort. Но даже не проверил производительность.</p> <p>Наиболее содержательная часть задачи может состоять в применении Radix Sort для сортировки кортежей, расположенных в оперативке в виде Structure Of Arrays неизвестного в compile-time размера. Это может работать хуже, чем то, что описано в пункте 2... Но попробовать не помешает.</p> <ol start=4> <li>Three-way comparison sort.</li> </ol> <p>Виртуальный метод <code>compareAt</code> возвращает -1, 0, 1. Но алгоритмы сортировки сравнениями обычно рассчитаны на <code>operator&lt;</code> и не могут получить преимущества от three-way comparison. А можно ли написать так, чтобы преимущество было?</p> <ol start=5> <li>pdq partial sort</li> </ol> <p>Хороший алгоритм сортировки сравнениями <code>pdqsort</code> не имеет варианта partial sort. Заметим, что на практике, почти все сортировки в запросах ClickHouse являются partial_sort, так как <code>ORDER BY</code> почти всегда идёт с <code>LIMIT</code>. Кстати, Данила Кутенин уже попробовал это и показал, что в тривиальном случае преимущества нет. Но не очевидно, что нельзя сделать лучше.</p> <h3 id=21-20-ispolzovanie-materializovannykh-predstavlenii-dlia-optimizatsii-zaprosov>21.20. Использование материализованных представлений для оптимизации запросов.<a class=headerlink href=#21-20-ispolzovanie-materializovannykh-predstavlenii-dlia-optimizatsii-zaprosov title="Permanent link">&para;</a></h3> <p>В ByteDance есть готовая реализация, но они её боятся из-за, возможно, низкого качества кода.</p> <h3 id=21-21-chtenie-bolshikh-failov-s-pomoshchiu-mmap>21.21. Чтение больших файлов с помощью mmap.<a class=headerlink href=#21-21-chtenie-bolshikh-failov-s-pomoshchiu-mmap title="Permanent link">&para;</a></h3> <p>Тривиально, почти всё готово.</p> <h3 id=21-22-userspace-page-cache>21.22. Userspace page cache.<a class=headerlink href=#21-22-userspace-page-cache title="Permanent link">&para;</a></h3> <p>Требует 21.8.</p> <h3 id=21-23-uskorenie-raboty-s-vtorichnymi-indeksami>21.23. Ускорение работы с вторичными индексами.<a class=headerlink href=#21-23-uskorenie-raboty-s-vtorichnymi-indeksami title="Permanent link">&para;</a></h3> <p>zhang2014.</p> <h2 id=22-dolgi-i-nedodelannye-vozmozhnosti>22. Долги и недоделанные возможности.<a class=headerlink href=#22-dolgi-i-nedodelannye-vozmozhnosti title="Permanent link">&para;</a></h2> <h3 id=22-1-ispravlenie-nerabotaiushchikh-taimautov-esli-ispolzuetsia-tls>22.1. + Исправление неработающих таймаутов, если используется TLS.<a class=headerlink href=#22-1-ispravlenie-nerabotaiushchikh-taimautov-esli-ispolzuetsia-tls title="Permanent link">&para;</a></h3> <p>Нужно для Яндекс.Облака. Сделал Алексей Миловидов.</p> <h3 id=22-2-ubrat-vozmozhnost-izmenit-nastroiki-v-native-protokole-v-sluchae-readonly>22.2. Убрать возможность изменить настройки в native протоколе в случае readonly.<a class=headerlink href=#22-2-ubrat-vozmozhnost-izmenit-nastroiki-v-native-protokole-v-sluchae-readonly title="Permanent link">&para;</a></h3> <p>Алексей Миловидов или <a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>.</p> <h3 id=22-3-zashchita-ot-absurdno-zadannykh-polzovatelem-kodekov>22.3. Защита от абсурдно заданных пользователем кодеков.<a class=headerlink href=#22-3-zashchita-ot-absurdno-zadannykh-polzovatelem-kodekov title="Permanent link">&para;</a></h3> <p>В очереди, скорее всего <a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>.</p> <h3 id=22-4-ispravlenie-ostavshikhsia-deadlocks-v-tablichnykh-rwlock-akh>22.4. Исправление оставшихся deadlocks в табличных RWLock-ах.<a class=headerlink href=#22-4-ispravlenie-ostavshikhsia-deadlocks-v-tablichnykh-rwlock-akh title="Permanent link">&para;</a></h3> <p>Александр Казаков. Нужно для Яндекс.Метрики и Datalens.</p> <h3 id=22-5-ispravlenie-redkikh-srabatyvanii-tsan-v-stress-testakh-v-ci>22.5. Исправление редких срабатываний TSan в stress тестах в CI.<a class=headerlink href=#22-5-ispravlenie-redkikh-srabatyvanii-tsan-v-stress-testakh-v-ci title="Permanent link">&para;</a></h3> <p>Александр Казаков.</p> <h3 id=22-6-izmenenie-tolko-default-v-alter-table-mozhet-pomeniat-tip-stolbtsa>22.6. Изменение только DEFAULT в ALTER TABLE может поменять тип столбца.<a class=headerlink href=#22-6-izmenenie-tolko-default-v-alter-table-mozhet-pomeniat-tip-stolbtsa title="Permanent link">&para;</a></h3> <h3 id=22-7-row-level-security-ne-rabotaet-v-sluchae-nalichiia-v-zaprose-in-podzaprosov>22.7. Row-Level Security не работает в случае наличия в запросе IN подзапросов.<a class=headerlink href=#22-7-row-level-security-ne-rabotaet-v-sluchae-nalichiia-v-zaprose-in-podzaprosov title="Permanent link">&para;</a></h3> <p><a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>. Нужно для Метрики.</p> <h3 id=22-8-ispravit-deserializatsiiu-parametrov-dlia-parametrizovannykh-zaprosov>22.8. Исправить десериализацию параметров для параметризованных запросов.<a class=headerlink href=#22-8-ispravit-deserializatsiiu-parametrov-dlia-parametrizovannykh-zaprosov title="Permanent link">&para;</a></h3> <p>Хотел исправить Василий Немков, Altinity, но есть маленькие затруднения, наверное переделает Алексей Миловидов.</p> <h3 id=22-9-razobratsia-s-deserializatsiei-massivov-so-znacheniiami-po-umolchaniiu-v-protobuf-formate-v-sluchae-protobuf-3>22.9. Разобраться с десериализацией массивов со значениями по-умолчанию в Protobuf формате в случае protobuf 3.<a class=headerlink href=#22-9-razobratsia-s-deserializatsiei-massivov-so-znacheniiami-po-umolchaniiu-v-protobuf-formate-v-sluchae-protobuf-3 title="Permanent link">&para;</a></h3> <p><a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>. Возможно, это - фундаментальная проблема и следует её только документировать.</p> <h3 id=22-10-ispravlenie-drifta-pri-otslezhivanii-potrebleniia-pamiati-zaprosami>22.10. Исправление дрифта при отслеживании потребления памяти запросами.<a class=headerlink href=#22-10-ispravlenie-drifta-pri-otslezhivanii-potrebleniia-pamiati-zaprosami title="Permanent link">&para;</a></h3> <p>Требует 6.3., но можно улучшить отдельными хаками. Нужно Метрике и БК.</p> <h3 id=22-11-bolee-prostaia-ser-de-nastroek-zaprosov>22.11. + Более простая ser/de настроек запросов.<a class=headerlink href=#22-11-bolee-prostaia-ser-de-nastroek-zaprosov title="Permanent link">&para;</a></h3> <p>И пропуск неизвестных настроек. Важно для Метрики для упрощения апгрейда без изменения конфига.<br> <a href=https://github.com/vitlibar rel="external nofollow noreferrer">Виталий Баранов</a>, готово.</p> <h3 id=22-12-ispravlenie-nizkoi-proizvoditelnosti-chteniia-iz-kafka>22.12. + Исправление низкой производительности чтения из Kafka.<a class=headerlink href=#22-12-ispravlenie-nizkoi-proizvoditelnosti-chteniia-iz-kafka title="Permanent link">&para;</a></h3> <p>Для ClickHouse нехарактерно наличие кода, обладающего столь низкой производительностью. Практики разработки не подразумевают, что такой код должен попасть в продакшен без надлежащего тестирования производительности.</p> <p>Изначально было назначено на <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ивана Лежанкина</a>, но по неизвестной причине было не сделано в течение нескольких месяцев.<br> Сделал Михаил Филимонов, Altinity.</p> <h3 id=22-13-posmotret-pochemu-ne-rabotaiut-nekotorye-collations>22.13. + Посмотреть, почему не работают некоторые collations.<a class=headerlink href=#22-13-posmotret-pochemu-ne-rabotaiut-nekotorye-collations title="Permanent link">&para;</a></h3> <p>Изначально было назначено на <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ивана Лежанкина</a>, но в результате сделал Александр Сапин.</p> <h3 id=22-14-posmotret-pochemu-ne-rabotaet-storageset-dlia-mergetree-tablits-pri-nekotorykh-usloviiakh>22.14. Посмотреть, почему не работает StorageSet для MergeTree таблиц при некоторых условиях.<a class=headerlink href=#22-14-posmotret-pochemu-ne-rabotaet-storageset-dlia-mergetree-tablits-pri-nekotorykh-usloviiakh title="Permanent link">&para;</a></h3> <p>Вроде бы сделал Никита Михайлов - проверить существующие issues на эту тему.</p> <h3 id=22-15-normalizatsiia-kommitov-v-kafka-i-idempotentnosti-operatsii>22.15. Нормализация коммитов в Kafka и идемпотентности операций.<a class=headerlink href=#22-15-normalizatsiia-kommitov-v-kafka-i-idempotentnosti-operatsii title="Permanent link">&para;</a></h3> <p>Altinity.</p> <h3 id=22-16-ispravlenie-nizkoi-proizvoditelnosti-kodeka-doubledelta>22.16. Исправление низкой производительности кодека DoubleDelta.<a class=headerlink href=#22-16-ispravlenie-nizkoi-proizvoditelnosti-kodeka-doubledelta title="Permanent link">&para;</a></h3> <p>Василий Немков, Altinity - в процессе.</p> <p>Мы считаем важным, что код в ClickHouse содержит разумные оптимизации, основанные на анализе производительности. Но иногда бывают досадные исключения.</p> <h3 id=22-17-konsistentno-rabotaiushchii-populate-dlia-materializedview>22.17. Консистентно работающий POPULATE для MaterializedView.<a class=headerlink href=#22-17-konsistentno-rabotaiushchii-populate-dlia-materializedview title="Permanent link">&para;</a></h3> <h3 id=22-18-ispravlenie-zametnogo-padeniia-proizvoditelnosti-formatov-posle-dobavleniia-domenov-tipov>22.18. Исправление заметного падения производительности форматов после добавления доменов типов.<a class=headerlink href=#22-18-ispravlenie-zametnogo-padeniia-proizvoditelnosti-formatov-posle-dobavleniia-domenov-tipov title="Permanent link">&para;</a></h3> <p>Василий Немков, Altinity.</p> <h3 id=22-19-odnovremennoe-ispolzovanie-sample-i-prewhere>22.19. + Одновременное использование SAMPLE и PREWHERE.<a class=headerlink href=#22-19-odnovremennoe-ispolzovanie-sample-i-prewhere title="Permanent link">&para;</a></h3> <p>Нужно для Метрики. <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>, ноябрь 2019.</p> <h3 id=22-20-nepravilnaia-rabota-prewhere-pri-nekotorykh-usloviiakh>22.20. + Неправильная работа PREWHERE при некоторых условиях.<a class=headerlink href=#22-20-nepravilnaia-rabota-prewhere-pri-nekotorykh-usloviiakh title="Permanent link">&para;</a></h3> <p><a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>, декабрь 2019.</p> <h3 id=22-21-nepravilnoe-povedenie-datetime-v-raione-nachala-unix-epoch>22.21. Неправильное поведение DateTime в районе начала unix epoch.<a class=headerlink href=#22-21-nepravilnoe-povedenie-datetime-v-raione-nachala-unix-epoch title="Permanent link">&para;</a></h3> <p>Алексей Миловидов.</p> <h3 id=22-22-nullable-v-funktsii-transform-i-v-case-po-mnozhestvu-znachenii>22.22. Nullable в функции transform и в CASE по множеству значений.<a class=headerlink href=#22-22-nullable-v-funktsii-transform-i-v-case-po-mnozhestvu-znachenii title="Permanent link">&para;</a></h3> <p>После 10.14.</p> <p><a href=https://github.com/ClickHouse/ClickHouse/issues/7237>https://github.com/ClickHouse/ClickHouse/issues/7237</a><br> <a href=https://github.com/ClickHouse/ClickHouse/issues/2655>https://github.com/ClickHouse/ClickHouse/issues/2655</a></p> <h3 id=22-23-pravilnaia-obrabotka-nullable-v-funktsiiakh-kotorye-kidaiut-iskliuchenie-na-default-znachenii-modulo-intdiv>22.23. Правильная обработка Nullable в функциях, которые кидают исключение на default значении: modulo, intDiv.<a class=headerlink href=#22-23-pravilnaia-obrabotka-nullable-v-funktsiiakh-kotorye-kidaiut-iskliuchenie-na-default-znachenii-modulo-intdiv title="Permanent link">&para;</a></h3> <h3 id=22-24-izlishniaia-filtratsiia-odbc-connection-string>22.24. Излишняя фильтрация ODBC connection string.<a class=headerlink href=#22-24-izlishniaia-filtratsiia-odbc-connection-string title="Permanent link">&para;</a></h3> <p>Нужно для Метрики. Алексей Миловидов.</p> <h3 id=22-25-izbavitsia-ot-biblioteki-btrie>22.25. Избавиться от библиотеки btrie.<a class=headerlink href=#22-25-izbavitsia-ot-biblioteki-btrie title="Permanent link">&para;</a></h3> <p>Алексей Миловидов. Низкий приоритет.</p> <h3 id=22-26-plokhaia-proizvoditelnost-quantiletdigest>22.26. Плохая производительность quantileTDigest.<a class=headerlink href=#22-26-plokhaia-proizvoditelnost-quantiletdigest title="Permanent link">&para;</a></h3> <p>Алексей Миловидов или будет переназначено.</p> <h3 id=22-27-proverit-neskolko-pr-kotorye-byli-zakryty-zhang2014-i-sundy-li>22.27. Проверить несколько PR, которые были закрыты zhang2014 и sundy-li.<a class=headerlink href=#22-27-proverit-neskolko-pr-kotorye-byli-zakryty-zhang2014-i-sundy-li title="Permanent link">&para;</a></h3> <p>Алексей Миловидов.</p> <h3 id=22-28-izuchit-i-ispravit-povedenie-raboty-s-kafka-pri-rebalansirovke>22.28. Изучить и исправить поведение работы с Kafka при ребалансировке.<a class=headerlink href=#22-28-izuchit-i-ispravit-povedenie-raboty-s-kafka-pri-rebalansirovke title="Permanent link">&para;</a></h3> <p>Altinity.</p> <h3 id=22-29-uiazvimost-ddl-dlia-slovarei-executable>22.29. Уязвимость DDL для словарей executable.<a class=headerlink href=#22-29-uiazvimost-ddl-dlia-slovarei-executable title="Permanent link">&para;</a></h3> <p><a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a></p> <h2 id=23-default-festival>23. Default Festival.<a class=headerlink href=#23-default-festival title="Permanent link">&para;</a></h2> <h3 id=23-1-vkliuchenie-minimalistic-part-header-v-zookeeper>23.1. Включение minimalistic_part_header в ZooKeeper.<a class=headerlink href=#23-1-vkliuchenie-minimalistic-part-header-v-zookeeper title="Permanent link">&para;</a></h3> <p>Сильно уменьшает объём данных в ZooKeeper. Уже год в продакшене в Яндекс.Метрике.<br> Алексей Миловидов, ноябрь 2019.</p> <h3 id=23-2-vkliuchenie-distributed-aggregation-memory-efficient>23.2. Включение distributed_aggregation_memory_efficient.<a class=headerlink href=#23-2-vkliuchenie-distributed-aggregation-memory-efficient title="Permanent link">&para;</a></h3> <p>Есть риски меньшей производительности лёгких запросов, хотя производительность тяжёлых запросов всегда увеличивается.</p> <h3 id=23-3-vkliuchenie-min-bytes-to-external-sort-i-min-bytes-to-external-group-by>23.3. Включение min_bytes_to_external_sort и min_bytes_to_external_group_by.<a class=headerlink href=#23-3-vkliuchenie-min-bytes-to-external-sort-i-min-bytes-to-external-group-by title="Permanent link">&para;</a></h3> <p>Желательно 5.2. и 13.1.</p> <h3 id=23-4-vkliuchenie-sinkhronnoi-zapisi-v-distributed-tablitsy-po-umolchaniiu>23.4. Включение синхронной записи в Distributed таблицы по-умолчанию.<a class=headerlink href=#23-4-vkliuchenie-sinkhronnoi-zapisi-v-distributed-tablitsy-po-umolchaniiu title="Permanent link">&para;</a></h3> <p>Есть гипотеза, что плохо работает на очень больших кластерах.</p> <h3 id=23-5-vkliuchenie-compile-expressions>23.5. Включение compile_expressions.<a class=headerlink href=#23-5-vkliuchenie-compile-expressions title="Permanent link">&para;</a></h3> <p>Требует 7.2. Задачу изначально на 99% сделал Денис Скоробогатов, ВШЭ и Яндекс. Остальной процент доделывал Алексей Миловидов, а затем <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>.</p> <h3 id=23-6-vkliuchenie-uchiota-poriadka-stolbtsov-v-csv>23.6. Включение учёта порядка столбцов в CSV.<a class=headerlink href=#23-6-vkliuchenie-uchiota-poriadka-stolbtsov-v-csv title="Permanent link">&para;</a></h3> <p>Просто аккуратно включить.</p> <h3 id=23-7-vkliuchenie-null-as-default-v-csv>23.7. Включение NULL as Default в CSV.<a class=headerlink href=#23-7-vkliuchenie-null-as-default-v-csv title="Permanent link">&para;</a></h3> <p>Просто аккуратно включить.</p> <h3 id=23-8-vkliuchenie-optimizatsii-values>23.8. Включение оптимизации VALUES.<a class=headerlink href=#23-8-vkliuchenie-optimizatsii-values title="Permanent link">&para;</a></h3> <p>Просто аккуратно включить.</p> <h3 id=23-9-vkliuchenie-processors>23.9. Включение Processors.<a class=headerlink href=#23-9-vkliuchenie-processors title="Permanent link">&para;</a></h3> <p><a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>.</p> <h3 id=23-10-vkliuchenie-mlock-binarnika>23.10. Включение mlock бинарника.<a class=headerlink href=#23-10-vkliuchenie-mlock-binarnika title="Permanent link">&para;</a></h3> <p>Возможность mlock бинарника сделал Олег Алексеенков. Поможет, когда на серверах кроме ClickHouse работает много посторонних программ (мы иногда называем их в шутку "треш-программами").</p> <h2 id=24-eksperimentalnye-zadachi>24. Экспериментальные задачи.<a class=headerlink href=#24-eksperimentalnye-zadachi title="Permanent link">&para;</a></h2> <h3 id=24-1-veb-interfeis-dlia-prosmotra-sostoianiia-klastera-i-profilirovaniia-zaprosov>24.1. Веб-интерфейс для просмотра состояния кластера и профилирования запросов.<a class=headerlink href=#24-1-veb-interfeis-dlia-prosmotra-sostoianiia-klastera-i-profilirovaniia-zaprosov title="Permanent link">&para;</a></h3> <p>Антон Мамонов, УрФУ, Яндекс.</p> <p>Внутри ClickHouse есть богатые возможности по интроспекции и профилированию. Эти возможности доступны через системные таблицы и использовать их приходится путём формулирования SQL запросов. Это неудобно.</p> <p>Вместо этого предлагается сделать, чтобы ClickHouse отдавал HTML страницу, реализующую интерактивный web-интерфейс со следующими возможностями:<br> - отображение состояния кластеров (какие кластеры известны, статус каждого сервера);<br> - графики нагрузки текущего сервера или выбранного сервера кластера;<br> - обновляемый список запросов;<br> - просмотр лога запросов с наиболее востребованными фильтрациями по одной кнопке;<br> - просмотр лога на кластере, например - последние ошибки;<br> - просмотр метрик использования ресурсов, flame graph и pprof-граф для выбранных запросов;<br> - отчёт по использованию кластера (пример: количество ядер CPU по пользователям за сегодня).</p> <h3 id=24-2-eksperimentalnye-algoritmy-szhatiia>24.2. Экспериментальные алгоритмы сжатия.<a class=headerlink href=#24-2-eksperimentalnye-algoritmy-szhatiia title="Permanent link">&para;</a></h3> <p>Анастасия Наумова, ВШЭ.</p> <p>ClickHouse поддерживает LZ4 и ZSTD для сжатия данных. Эти алгоритмы являются парето-оптимальными по соотношению скорости и коэффициентам сжатия среди достаточно известных. Тем не менее, существуют менее известные алгоритмы сжатия, которые могут превзойти их по какому-либо критерию. Из потенциально более быстрых по сравнимом коэффициенте сжатия: Lizard, LZSSE, density. Из более сильных: bsc и csc. Необходимо изучить эти алгоритмы, добавить их поддержку в ClickHouse и исследовать их работу на тестовых датасетах.</p> <h3 id=24-3-eksperimentalnye-kodeki>24.3. Экспериментальные кодеки.<a class=headerlink href=#24-3-eksperimentalnye-kodeki title="Permanent link">&para;</a></h3> <p>Вероника Фалчикова, Лада Торчик, ВШЭ.</p> <p>Существуют специализированные алгоритмы кодирования числовых последовательностей: Group VarInt, MaskedVByte, PFOR. Необходимо изучить наиболее эффективные реализации этих алгоритмов. Примеры вы сможете найти на <a href=https://github.com/lemire>https://github.com/lemire</a> и <a href=https://github.com/powturbo/ >https://github.com/powturbo/</a> а также <a href=https://github.com/schizofreny/middle-out>https://github.com/schizofreny/middle-out</a></p> <p>Внедрить их в ClickHouse в виде кодеков и изучить их работу на тестовых датасетах.</p> <h3 id=24-4-shifrovanie-v-clickhouse-na-urovne-kuskov-dannykh>24.4. Шифрование в ClickHouse на уровне кусков данных.<a class=headerlink href=#24-4-shifrovanie-v-clickhouse-na-urovne-kuskov-dannykh title="Permanent link">&para;</a></h3> <p>Yuchen Dong, ICT.</p> <p>Данные в ClickHouse хранятся без шифрования. При наличии доступа к дискам, злоумышленник может прочитать данные. Предлагается реализовать два подхода к шифрованию:</p> <ol> <li>Шифрование блоков данных.<br> Шифрование данных столбцов на диске требуется реализовать в виде кодеков. Это позволит применять шифрование к отдельным столбцам; применять его после сжатия данных (эффективно, но менее безопасно) или без сжатия. Потребуется проработать работу с ключами: получение ключей из отдельного сервиса, правильная работа с ключами в оперативке. Отдельным вопросом стоит шифрование индексов.</li> </ol> <h3 id=24-5-podderzhka-funktsii-shifrovaniia-dlia-otdelnykh-znachenii>24.5. Поддержка функций шифрования для отдельных значений.<a class=headerlink href=#24-5-podderzhka-funktsii-shifrovaniia-dlia-otdelnykh-znachenii title="Permanent link">&para;</a></h3> <p>Yuchen Dong, ICT.</p> <p>Смотрите также 24.5.</p> <ol start=2> <li>Шифрование отдельных значений.<br> Для этого требуется реализовать функции шифрования и расшифрования, доступные из SQL. Для шифрования реализовать возможность добавления нужного количества случайных бит для исключения одинаковых зашифрованных значений на одинаковых данных. Это позволит реализовать возможность "забывания" данных без удаления строк таблицы: можно шифровать данные разных клиентов разными ключами, и для того, чтобы забыть данные одного клиента, потребуется всего лишь удалить ключ.</li> </ol> <h3 id=24-6-userspace-raid>24.6. Userspace RAID.<a class=headerlink href=#24-6-userspace-raid title="Permanent link">&para;</a></h3> <p>Глеб Новиков, ВШЭ.</p> <p>RAID позволяет одновременно увеличить надёжность хранения данных на дисках и увеличить скорость работы дискового массива. Обычно RAID настраивается с помощью встроенных возможностей ядра Linux (mdraid) или с помощью hardware контроллера. У этого есть следующие ограничения:</p> <ol> <li> <p>Иногда (в облачной инфраструктуре некоторых компаний) сервер предоставляется с отдельными дисками, подмонтированными в виде отдельных разделов (JBOD), без возможности создания RAID.</p> </li> <li> <p>В ClickHouse для обеспечения избыточности обычно используется репликация между серверами. Но при восстановлении одного из дисков RAID не используются данные с реплик, а в случае отказа одного из дисков в RAID-0, приходится передавать с реплики все данные, а не только данные, соответствующие одному из дисков. Это происходит, потому что RAID не интегрирован в ClickHouse и "не знает" про его особенности.</p> </li> <li> <p>Отсутствуют продвинутые варианты обеспечения избыточности, как например, LRC.</p> </li> </ol> <p>Для преодоления этих ограничений, предлагается реализовать в ClickHouse встроенный алгоритм расположения данных на дисках.</p> <h3 id=24-7-veroiatnostnye-struktury-dannykh-dlia-filtratsii-po-podzaprosam>24.7. Вероятностные структуры данных для фильтрации по подзапросам.<a class=headerlink href=#24-7-veroiatnostnye-struktury-dannykh-dlia-filtratsii-po-podzaprosam title="Permanent link">&para;</a></h3> <p>Рузель Ибрагимов, ВШЭ и Яндекс.</p> <p>Частой задачей является выполнение запроса с фильтрацией по множеству, полученному по подзапросу. Пример: найти пользователей, которые заходили на сайт сегодня и заходили неделю назад. Это выражается в виде запроса: <code>SELECT UserID FROM table WHERE EventDate = today() AND UserID IN (SELECT ...)</code>. При выполнении этого запроса, сначала выполняется подзапрос в правой части <code>IN</code> и формируется хэш-таблица в оперативке; затем эта хэш-таблица используется для фильтрации.</p> <p>Иногда объём данных достаточно большой, и хэш-таблица не помещается в оперативку. В этом случае можно рассмотреть в качестве варианта приближённый рассчёт: найти пользователей, которые заходили на сайт сегодня и наверное заходили неделю назад. Для этого можно вместо хэш-таблицы использовать Bloom Filter. Другая задача: найти пользователей, которые встречались, скорее всего, не менее некоторого количества раз. Для этого можно использовать Counting Bloom Filter. Также следует изучить структуры данных Quotient Filter и Cuckoo Filer, а ещё - секретный алгоритм Chaotic Map от Андрея Плахова.</p> <p>Предлагается реализовать это в языке запросов ClickHouse с помощью специального синтаксиса, например <code>x IN BLOOM FILTER (n, m) (SELECT ...)</code>.</p> <h3 id=24-8-spetsializatsiia-vektorizovannogo-koda-dlia-avx-avx2-avx512-i-arm-neon>24.8. Специализация векторизованного кода для AVX/AVX2/AVX512 и ARM NEON.<a class=headerlink href=#24-8-spetsializatsiia-vektorizovannogo-koda-dlia-avx-avx2-avx512-i-arm-neon title="Permanent link">&para;</a></h3> <p>Дмитрий Ковальков, ВШЭ и Яндекс.</p> <p>Подавляющее большинство кода ClickHouse написана для x86_64 с набором инструкций до SSE 4.2 включительно. Лишь отдельные редкие функции поддерживают AVX/AVX2/AVX512 с динамической диспетчеризацией.</p> <p>В первой части задачи, следует добавить в ClickHouse реализации некоторых примитивов, оптимизированные под более новый набор инструкций. Например, AVX2 реализацию генератора случайных чисел pcg: <a href=https://github.com/lemire/simdpcg>https://github.com/lemire/simdpcg</a></p> <p>Во второй части задачи, предлагается адаптировать существующие куски кода, использующие SSE intrinsics на AVX/AVX2 и сравнить производительность. Также рассматривается оптимизация под ARM NEON.</p> <h3 id=24-9-obshchii-podkhod-k-cpu-dispatching-v-fabrike-funktsii>24.9. Общий подход к CPU dispatching в фабрике функций.<a class=headerlink href=#24-9-obshchii-podkhod-k-cpu-dispatching-v-fabrike-funktsii title="Permanent link">&para;</a></h3> <p>Дмитрий Ковальков, ВШЭ и Яндекс.</p> <p>Продолжение 24.8.</p> <h3 id=24-10-podderzhka-tipov-half-bfloat16-unum>24.10. Поддержка типов half/bfloat16/unum.<a class=headerlink href=#24-10-podderzhka-tipov-half-bfloat16-unum title="Permanent link">&para;</a></h3> <p>Рустам Гусейн-заде, ВШЭ.</p> <h3 id=24-11-user-defined-functions>24.11. User Defined Functions.<a class=headerlink href=#24-11-user-defined-functions title="Permanent link">&para;</a></h3> <p>Игорь Минеев, ВШЭ.</p> <p>ClickHouse предоставляет достаточно богатый набор встроенных функций языка запросов, но не позволяет пользователю добавлять свои функции без редактировния исходников и перекомпиляции системы. Это мотивировано следующими потенциальными проблемами:</p> <ol> <li>ClickHouse является array-oriented системой, и все функции внутри кода принимают для обработки целые массивы, а не отдельные значения. Это усложняет внутренний интерфейс и делает его менее удобным для пользователя.</li> <li>Предоставление возможности подключения UDF в виде shared библиотек, потребовало бы фиксировать этот интерфейс или поддерживать обратную совместимость, тогда как мы бы хотели, при разработке ClickHouse, менять этот интерфейс по своему усмотрению без оглядки.</li> <li>Сложность внутренних структур данных повышает вероятность ошибок типа buffer overflow и повреждения памяти, что сильно затруднит сопровождение ClickHouse с пользовательскими функциями.</li> </ol> <p>Тем не менее, можно выбрать более аккуратный подход, избегающий непосредственной линковки с shared библиотеками.</p> <p>Сначала можно реализовать поддержку UDF в виде выражений, составленных из простых функций ClickHouse. В ClickHouse есть встроенная кодогенерация на LLVM, что позволит таким функциям работать весьма эффективно. Но этот подход весьма ограничен и поэтому не является исчерпывающим.</p> <p>Затем предлагается реализовать поддержку UDF в виде исходников на C++, которые компилируются в runtime, с использованием заголовочных файлов ClickHouse. Требование компиляции из исходников вместо shared библиотек, позволит ослабить необходимость в поддержке совместимости ABI.</p> <p>Для безопасности, потребуется исследовать возможность размещения буферов данных в shared memory для выполнения UDF в отдельных процессах с изоляцией по памяти. Возможно, для этого пригодится интеграция с Apache Arrow.</p> <p>Также рассматривается возможность написания UDF на Rust, а также использование Web Assembly. Отдельно можно рассмотреть подключение NumPy и R и других технологий, которые предоставляют операции над целыми массивами.</p> <h3 id=24-12-gpu-offloading>24.12. GPU offloading.<a class=headerlink href=#24-12-gpu-offloading title="Permanent link">&para;</a></h3> <p>Риск состоит в том, что даже известные GPU базы, такие как OmniSci, работают медленнее, чем ClickHouse.<br> Преимущество возможно только на полной сортировке и JOIN.<br> Алексей Соловей, nVidia и Рита Коннова, ВШЭ.</p> <p>В компании nVidia сделали прототип offloading вычисления GROUP BY с некоторыми из агрегатных функций в ClickHouse и обещат предоставить исходники в публичный доступ для дальнейшего развития. Предлагается изучить этот прототип и расширить его применимость для более широкого сценария использования. В качестве альтернативы, предлагается изучить исходные коды системы <code>OmniSci</code> или <code>Alenka</code> или библиотеку <code>CUB</code> <a href=https://nvlabs.github.io/cub/ >https://nvlabs.github.io/cub/</a> и применить некоторые из алгоритмов в ClickHouse.</p> <h3 id=24-13-stream-zaprosy>24.13. Stream запросы.<a class=headerlink href=#24-13-stream-zaprosy title="Permanent link">&para;</a></h3> <p>Пререквизит для ClickHouse как CEP-системы.</p> <h3 id=24-14-window-funktsii>24.14. Window функции.<a class=headerlink href=#24-14-window-funktsii title="Permanent link">&para;</a></h3> <p>Требует 2.1.</p> <h3 id=24-15-podderzhka-polustrukturirovannykh-dannykh>24.15. Поддержка полуструктурированных данных.<a class=headerlink href=#24-15-podderzhka-polustrukturirovannykh-dannykh title="Permanent link">&para;</a></h3> <p>Требует 1.14 и 2.10.</p> <h3 id=24-16-uluchshenie-evristiki-sliianii>24.16. Улучшение эвристики слияний.<a class=headerlink href=#24-16-uluchshenie-evristiki-sliianii title="Permanent link">&para;</a></h3> <p>В прошлом году исследование по этой задаче сделал Егор Соловьёв, ВШЭ и Яндекс.Такси. Его исследование показало, что алгоритм нельзя существенно улучшить путём изменения параметров. Но исследование лажовое, так как рассмотрен только уже использующийся алгоритм. То есть, задача остаётся открытой.</p> <h3 id=24-17-eksperimentalnye-sposoby-uskoreniia-parallelnogo-group-by>24.17. Экспериментальные способы ускорения параллельного GROUP BY.<a class=headerlink href=#24-17-eksperimentalnye-sposoby-uskoreniia-parallelnogo-group-by title="Permanent link">&para;</a></h3> <p>Максим Серебряков</p> <h3 id=24-18-ne-tcp-protokol-peredachi-failov-pri-replikatsii>24.18. Не TCP протокол передачи файлов при репликации.<a class=headerlink href=#24-18-ne-tcp-protokol-peredachi-failov-pri-replikatsii title="Permanent link">&para;</a></h3> <h3 id=24-19-promezhutochnoe-sostoianie-group-by-kak-struktura-dannykh-dlia-key-value-dostupa>24.19. Промежуточное состояние GROUP BY как структура данных для key-value доступа.<a class=headerlink href=#24-19-promezhutochnoe-sostoianie-group-by-kak-struktura-dannykh-dlia-key-value-dostupa title="Permanent link">&para;</a></h3> <h3 id=24-20-short-circuit-vychisleniia-nekotorykh-vyrazhenii>24.20. Short-circuit вычисления некоторых выражений.<a class=headerlink href=#24-20-short-circuit-vychisleniia-nekotorykh-vyrazhenii title="Permanent link">&para;</a></h3> <p>Два года назад задачу попробовала сделать Анастасия Царькова, ВШЭ и Яндекс, но реализация получилась слишком неудобной и её удалили.</p> <h3 id=24-21-realizatsiia-v-clickhouse-protokola-raspredelionnogo-konsensusa>24.21. Реализация в ClickHouse протокола распределённого консенсуса.<a class=headerlink href=#24-21-realizatsiia-v-clickhouse-protokola-raspredelionnogo-konsensusa title="Permanent link">&para;</a></h3> <p>Имеет смысл только после 19.2.</p> <h3 id=24-22-vyvod-tipov-po-bloku-dannykh-vyvod-formata-dannykh-po-primeru>24.22. Вывод типов по блоку данных. Вывод формата данных по примеру.<a class=headerlink href=#24-22-vyvod-tipov-po-bloku-dannykh-vyvod-formata-dannykh-po-primeru title="Permanent link">&para;</a></h3> <p>Эльмир Марданов, ВШЭ.</p> <p>ClickHouse является строго типизированной системой. Для того, чтобы прочитать данные в каком либо формате (например, CSV), требуется заранее указать типы данных. Если при чтении формата выясняется, что данные не могут быть прочитаны в рамках заданных типов, то кидается исключение.</p> <p>ClickHouse также может использоваться для быстрой аналитики по локальным файлам, без загрузки их в базу данных (программа <code>clickhouse-local</code>). В этом случае, его использование может заменить <code>awk</code>, <code>sed</code>, <code>grep</code>. Но остаётся неудобство - необходимость указания типов данных.</p> <p>Предлагается реализовать функциональность вывода типов по первому блоку данных путём применения эвристик и постепенного расширения типов.</p> <p>Другая экспериментальная задача - реализация эвристик для обработки данных в неизвестном построчном текстовом формате. Детектирование CSV, TSV, JSON, детектирование разделителей и форматов значений.</p> <h3 id=24-23-minimalnaia-podderzhka-tranzaktsii-dlia-mnozhestva-vstavok-chtenii>24.23. Минимальная поддержка транзакций для множества вставок/чтений.<a class=headerlink href=#24-23-minimalnaia-podderzhka-tranzaktsii-dlia-mnozhestva-vstavok-chtenii title="Permanent link">&para;</a></h3> <p>Максим Кузнецов, ВШЭ.</p> <p>Таблицы типа MergeTree состоят из набора независимых неизменяемых "кусков" данных. При вставках данных (INSERT), формируются новые куски. При модификациях данных (слияние кусков), формируются новые куски, а старые - становятся неактивными и перестают использоваться следующими запросами. Чтение данных (SELECT) производится из снэпшота множества кусков на некоторый момент времени. Таким образом, чтения и вставки не блокируют друг друга.</p> <p>Если же выполняется несколько запросов SELECT, то чтение данных может осуществляться из снэпшотов по состоянию на несколько разных моментов времени и быть неконсистентным. Пример: пользователю отображается отчёт из нескольких графиков и таблиц, но из-за того, что между разными запросами, данные успели обновиться, отображаемые данные не соответствуют друг другу.</p> <p>Пример с другой стороны - пользователь хочет осуществить несколько вставок (INSERT) в одну или несколько таблиц, но так, чтобы данные появились в них атомарно с точки зрения других запросов (SELECT).</p> <p>Для решения этих проблем, предлагается ввести глобальные метки времени для кусков данных (сейчас уже есть инкрементальные номера кусков, но они выделяются в рамках одной таблицы). Первым шагом сделаем эти метки времени в рамках сервера. Вторым шагом сделаем метки времени в рамках всех серверов, но неточные на основе локальных часов. Третьим шагом сделаем метки времени, выдаваемые сервисом координации.</p> <h3 id=24-24-realizatsiia-algoritmov-differential-privacy>24.24. Реализация алгоритмов differential privacy.<a class=headerlink href=#24-24-realizatsiia-algoritmov-differential-privacy title="Permanent link">&para;</a></h3> <p>Артём Вишняков, ВШЭ.</p> <p><a href=https://github.com/yandex/ClickHouse/issues/6874>https://github.com/yandex/ClickHouse/issues/6874</a></p> <h3 id=24-25-integratsiia-v-clickhouse-funktsionalnosti-obrabotki-http-user-agent>24.25. Интеграция в ClickHouse функциональности обработки HTTP User Agent.<a class=headerlink href=#24-25-integratsiia-v-clickhouse-funktsionalnosti-obrabotki-http-user-agent title="Permanent link">&para;</a></h3> <p>Есть хороший код в Яндекс.Метрике. Получено согласие от руководства.<br> Михаил Филитов, ВШЭ.</p> <h3 id=24-26-podderzhka-open-tracing-ili-analogov>24.26. Поддержка open tracing или аналогов.<a class=headerlink href=#24-26-podderzhka-open-tracing-ili-analogov title="Permanent link">&para;</a></h3> <p>Александр Кожихов, ВШЭ и Яндекс.YT.</p> <h3 id=24-27-realizatsiia-algoritmov-min-hash-sim-hash-dlia-nechiotkogo-poiska-poludublikatov>24.27. Реализация алгоритмов min-hash, sim-hash для нечёткого поиска полудубликатов.<a class=headerlink href=#24-27-realizatsiia-algoritmov-min-hash-sim-hash-dlia-nechiotkogo-poiska-poludublikatov title="Permanent link">&para;</a></h3> <p>ucasFL, ICT.</p> <p>Алгоритмы min-hash и sim-hash позволяют вычислить для текста несколько хэш-значений таких, что при небольшом изменении текста, по крайней мере один из хэшей не меняется. Вычисления можно реализовать на n-грамах и словарных шинглах. Предлагается добавить поддержку этих алгоритмов в виде функций в ClickHouse и изучить их применимость для задачи нечёткого поиска полудубликатов.</p> <h3 id=24-28-drugoi-sketch-dlia-kvantilei>24.28. Другой sketch для квантилей.<a class=headerlink href=#24-28-drugoi-sketch-dlia-kvantilei title="Permanent link">&para;</a></h3> <p>Похоже на quantileTiming, но с логарифмическими корзинами.</p> <h3 id=24-29-podderzhka-arrow-flight>24.29. Поддержка Arrow Flight.<a class=headerlink href=#24-29-podderzhka-arrow-flight title="Permanent link">&para;</a></h3> <h3 id=24-30-clickhouse-kak-grafovaia-subd>24.30. ClickHouse как графовая СУБД.<a class=headerlink href=#24-30-clickhouse-kak-grafovaia-subd title="Permanent link">&para;</a></h3> <p>Amos Bird, но его решение слишком громоздкое и пока не open-source.</p> <h3 id=24-31-korellirovannye-podzaprosy>24.31. Кореллированные подзапросы.<a class=headerlink href=#24-31-korellirovannye-podzaprosy title="Permanent link">&para;</a></h3> <p>Перепиывание в JOIN. Не раньше 21.11, 21.12, 21.9. Низкий приоритет.</p> <h3 id=24-32-podderzhka-grpc>24.32. Поддержка GRPC.<a class=headerlink href=#24-32-podderzhka-grpc title="Permanent link">&para;</a></h3> <p>Мария Конькова, ВШЭ и Яндекс.<br> Также смотрите 24.29.</p> <p>В ClickHouse есть два основных протокола: родной протокол общения между серверами и HTTP/1.1 протокол. HTTP/1.1 протокол удобен для работы из самых разных языков программирования, но, в отличие от родного протокола, не поддерживает двусторонний обмен информацией во время запроса:<br> - передачу информации о прогрессе во время выполнения запроса;<br> - передачу логов во время выполнения запроса;<br> - отмену выполнения запроса в тот момент как данные ещё не начали передаваться;</p> <p>Рассматривается вариант - поддержка GRPC в ClickHouse. Здесь есть неочевидные моменты, такие как - эффективная передача массивов данных в column-oriented формате - насколько удобно будет обернуть это в GRPC.</p> <h2 id=25-devrel>25. DevRel<a class=headerlink href=#25-devrel title="Permanent link">&para;</a></h2> <h3 id=25-1-perevod-instruktsii-dlia-nachinaiushchikh-razrabotchikov>25.1. + Перевод инструкции для начинающих разработчиков.<a class=headerlink href=#25-1-perevod-instruktsii-dlia-nachinaiushchikh-razrabotchikov title="Permanent link">&para;</a></h3> <p>Александр Казаков, ноябрь 2019.</p> <h3 id=25-2-vychitka-i-vykladka-stati-pro-obfuskatsiiu-dannykh-na-angliiskom>25.2. Вычитка и выкладка статьи про обфускацию данных на английском.<a class=headerlink href=#25-2-vychitka-i-vykladka-stati-pro-obfuskatsiiu-dannykh-na-angliiskom title="Permanent link">&para;</a></h3> <p>Эми, Александр Казаков, Алексей Миловидов, ноябрь 2019.<br> Готово к выкладке.</p> <h3 id=25-3-podgotovka-stati-sekrety-optimizatsii-proizvoditelnosti-clickhouse>25.3. Подготовка статьи "Секреты оптимизации производительности ClickHouse".<a class=headerlink href=#25-3-podgotovka-stati-sekrety-optimizatsii-proizvoditelnosti-clickhouse title="Permanent link">&para;</a></h3> <p>Алексей Миловидов, Леонид.</p> <h3 id=25-4-podgotovka-stati-profailer-zaprosov-trudnyi-put>25.4. Подготовка статьи "Профайлер запросов: трудный путь".<a class=headerlink href=#25-4-podgotovka-stati-profailer-zaprosov-trudnyi-put title="Permanent link">&para;</a></h3> <p>Алексей Миловидов, Леонид.</p> <h3 id=25-5-podgotovka-stati-testirovanie-clickhouse-kotoroe-my-zasluzhili>25.5. Подготовка статьи "Тестирование ClickHouse, которое мы заслужили".<a class=headerlink href=#25-5-podgotovka-stati-testirovanie-clickhouse-kotoroe-my-zasluzhili title="Permanent link">&para;</a></h3> <h3 id=25-6-perevod-etikh-statei-na-angliiskii>25.6. Перевод этих статей на английский.<a class=headerlink href=#25-6-perevod-etikh-statei-na-angliiskii title="Permanent link">&para;</a></h3> <p>Требует 25.3, 25.4, 25.5. Эми</p> <h3 id=25-7-perevod-stati-danily-kutenina-na-angliiskii>25.7. Перевод статьи Данилы Кутенина на английский.<a class=headerlink href=#25-7-perevod-stati-danily-kutenina-na-angliiskii title="Permanent link">&para;</a></h3> <p>Эми</p> <h3 id=25-8-vystuplenie-keynote-na-bdtc>25.8. + Выступление keynote на BDTC.<a class=headerlink href=#25-8-vystuplenie-keynote-na-bdtc title="Permanent link">&para;</a></h3> <p>Алексей Миловидов</p> <h3 id=25-9-podgotovka-dokladchikov-khvostikao-ilezhankin-nikitamikhailov-akuzm-i-drugie>25.9. Подготовка докладчиков: khvostikao, ilezhankin, nikitamikhailov, akuzm и другие.<a class=headerlink href=#25-9-podgotovka-dokladchikov-khvostikao-ilezhankin-nikitamikhailov-akuzm-i-drugie title="Permanent link">&para;</a></h3> <p><a href=https://github.com/stavrolia rel="external nofollow noreferrer">Ольга Хвостикова</a>, <a href=https://github.com/abyss7 rel="external nofollow noreferrer">Иван Лежанкин</a>, Никита Михайлов, <a href=https://github.com/akuzm rel="external nofollow noreferrer">Александр Кузьменков</a>.<br> Уже готовые докладчики: Алексей Миловидов, <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Николай Кочетов</a>, <a href=https://github.com/alesapin rel="external nofollow noreferrer">Александр Сапин</a>.<br> Получаем минимум 7 докладчиков в 2020 году.</p> <h3 id=25-10-mitapy-v-rossii-i-belarusi-moskva-x2-mitap-dlia-razrabotchikov-ili-khakaton-sankt-peterburg-minsk-nizhnii-novgorod-ekaterinburg-novosibirsk-i-ili-akademgorodok-innopolis-ili-kazan>25.10. Митапы в России и Беларуси: Москва x2 + митап для разработчиков или хакатон, Санкт-Петербург, Минск, Нижний Новгород, Екатеринбург, Новосибирск и/или Академгородок, Иннополис или Казань.<a class=headerlink href=#25-10-mitapy-v-rossii-i-belarusi-moskva-x2-mitap-dlia-razrabotchikov-ili-khakaton-sankt-peterburg-minsk-nizhnii-novgorod-ekaterinburg-novosibirsk-i-ili-akademgorodok-innopolis-ili-kazan title="Permanent link">&para;</a></h3> <p>Екатерина - организация</p> <h3 id=25-11-mitapy-zarubezhnye-vostok-ssha-niu-iork-vozmozhno-raleigh-vozmozhno-severo-zapad-sietl-kitai-pekin-snova-vozmozhno-mitap-dlia-razrabotchikov-ili-khakaton-london>25.11. Митапы зарубежные: восток США (Нью Йорк, возможно Raleigh), возможно северо-запад (Сиэтл), Китай (Пекин снова, возможно митап для разработчиков или хакатон), Лондон.<a class=headerlink href=#25-11-mitapy-zarubezhnye-vostok-ssha-niu-iork-vozmozhno-raleigh-vozmozhno-severo-zapad-sietl-kitai-pekin-snova-vozmozhno-mitap-dlia-razrabotchikov-ili-khakaton-london title="Permanent link">&para;</a></h3> <p><a href=https://github.com/blinkov/ rel="external nofollow noreferrer">Иван Блинков</a> - организация</p> <h3 id=25-12-statia-nauchnaia-pro-ustroistvo-khraneniia-dannykh-i-indeksov-ili-whitepaper-po-arkhitekture-est-variant-podat-na-vldb>25.12. Статья "научная" - про устройство хранения данных и индексов или whitepaper по архитектуре. Есть вариант подать на VLDB.<a class=headerlink href=#25-12-statia-nauchnaia-pro-ustroistvo-khraneniia-dannykh-i-indeksov-ili-whitepaper-po-arkhitekture-est-variant-podat-na-vldb title="Permanent link">&para;</a></h3> <p>Низкий приоритет. Алексей Миловидов.</p> <h3 id=25-13-uchastie-vo-vsekh-meropriiatiiakh-iandeksa-kotorye-sviazany-s-razrabotkoi-bekenda-c-razrabotkoi-ili-s-bazami-dannykh-vozmozhno-uchastie-v-devrel-meropriiatiiakh>25.13. Участие во всех мероприятиях Яндекса, которые связаны с разработкой бэкенда, C++ разработкой или с базами данных, возможно участие в DevRel мероприятиях.<a class=headerlink href=#25-13-uchastie-vo-vsekh-meropriiatiiakh-iandeksa-kotorye-sviazany-s-razrabotkoi-bekenda-c-razrabotkoi-ili-s-bazami-dannykh-vozmozhno-uchastie-v-devrel-meropriiatiiakh title="Permanent link">&para;</a></h3> <p>Алексей Миловидов и все подготовленные докладчики</p> <h3 id=25-14-konferentsii-v-rossii-vse-highload-vozmozhno-codefest-dump-ili-uwdc-vozmozhno-c-russia>25.14. Конференции в России: все HighLoad, возможно CodeFest, DUMP или UWDC, возможно C++ Russia.<a class=headerlink href=#25-14-konferentsii-v-rossii-vse-highload-vozmozhno-codefest-dump-ili-uwdc-vozmozhno-c-russia title="Permanent link">&para;</a></h3> <p>Алексей Миловидов и все подготовленные докладчики</p> <h3 id=25-15-konferentsii-zarubezhnye-percona-dataops-popytka-popast-na-bolee-krupnye>25.15. Конференции зарубежные: Percona, DataOps, попытка попасть на более крупные.<a class=headerlink href=#25-15-konferentsii-zarubezhnye-percona-dataops-popytka-popast-na-bolee-krupnye title="Permanent link">&para;</a></h3> <p>Алексей Миловидов и все подготовленные докладчики</p> <h3 id=25-16-sait-play-clickhouse>25.16. Сайт play.clickhouse.<a class=headerlink href=#25-16-sait-play-clickhouse title="Permanent link">&para;</a></h3> <p>Цель состоит в реализации сайта, на котором можно попробовать задавать произвольные запросы к временному экземпляру ClickHouse и изучать его поведение. Из похожих проектов можно отметить: <a href=https://godbolt.org/ rel="external nofollow noreferrer">Compiler Explorer</a>, <a href=http://ideone.com/ >http://ideone.com/</a>, <a href=http://sqlfiddle.com/ rel="external nofollow noreferrer">SQLFiddle</a>, <a href=https://www.db-fiddle.com/ rel="external nofollow noreferrer">DB-Fiddle</a>.</p> <p>С помощью такого сайта можно решать следующие задачи:<br> - ознакомление с языком запросов ClickHouse;<br> - демонстрация примеров из документации;<br> - демонстрация скорости работы на тестовых датасетах;<br> - сравнение поведения разных версий ClickHouse друг с другом;<br> - демонстрация неожиданного поведения или багов;</p> <p>Требуется проработать вопрос безопасности и изоляции инстансов (поднятие в контейнерах с ограничениями по сети), подключение тестовых датасетов с помощью copy-on-write файловой системы; органичения ресурсов.</p> <h3 id=25-17-vzaimodeistvie-s-vuzami-vshe-urfu-ict-beijing>25.17. Взаимодействие с ВУЗами: ВШЭ, УрФУ, ICT Beijing.<a class=headerlink href=#25-17-vzaimodeistvie-s-vuzami-vshe-urfu-ict-beijing title="Permanent link">&para;</a></h3> <p>Алексей Миловидов и вся группа разработки</p> <h3 id=25-18-lektsiia-v-shad>25.18. Лекция в ШАД.<a class=headerlink href=#25-18-lektsiia-v-shad title="Permanent link">&para;</a></h3> <p>Алексей Миловидов</p> <h3 id=25-19-uchastie-v-kurse-razrabotki-na-c-v-shad>25.19. Участие в курсе разработки на C++ в ШАД.<a class=headerlink href=#25-19-uchastie-v-kurse-razrabotki-na-c-v-shad title="Permanent link">&para;</a></h3> <h3 id=25-20-eshchio-odno-sravnenie-proizvoditelnosti-analiticheskikh-subd>25.20. Ещё одно сравнение производительности аналитических СУБД.<a class=headerlink href=#25-20-eshchio-odno-sravnenie-proizvoditelnosti-analiticheskikh-subd title="Permanent link">&para;</a></h3> <p>Матвей Бубнов, УрФУ</p> <p>Существуют мало известные специализированные СУБД, способные конкурировать с ClickHouse по скорости обработки некоторых классов запросов. Пример: <code>TDEngine</code> и <code>DolphinDB</code>, <code>VictoriaMetrics</code>, а также <code>Apache Doris</code> и <code>LocustDB</code>. Предлагается изучить и классифицировать архитектурные особенности этих систем - их особенности и преимущества. Установить эти системы, загрузить тестовые данные, изучить производительность. Проанализировать, за счёт чего достигаются преимущества.</p> <h3 id=25-21-povtornoe-nagrazhdenie-kontribiutorov-v-kitae>25.21. Повторное награждение контрибьюторов в Китае.<a class=headerlink href=#25-21-povtornoe-nagrazhdenie-kontribiutorov-v-kitae title="Permanent link">&para;</a></h3> <h3 id=25-22-on-site-pomoshch-s-clickhouse-kompaniiam-v-dni-riadom-s-meropriiatiiami>25.22. On-site помощь с ClickHouse компаниям в дни рядом с мероприятиями.<a class=headerlink href=#25-22-on-site-pomoshch-s-clickhouse-kompaniiam-v-dni-riadom-s-meropriiatiiami title="Permanent link">&para;</a></h3> <p><a href=https://github.com/blinkov/ rel="external nofollow noreferrer">Иван Блинков</a> - организация</p> <h3 id=25-23-novyi-merch-dlia-clickhouse>25.23. Новый мерч для ClickHouse.<a class=headerlink href=#25-23-novyi-merch-dlia-clickhouse title="Permanent link">&para;</a></h3> <h3 id=25-24-konkursy-bughunter-ili-optimizatsii-koda-na-c>25.24. Конкурсы bughunter или оптимизации кода на C++.<a class=headerlink href=#25-24-konkursy-bughunter-ili-optimizatsii-koda-na-c title="Permanent link">&para;</a></h3> <p>Проведение конкурсов должно начинаться для сотрудников Яндекса, пока нет согласования.</p> <h3 id=25-25-seminary-dlia-potentsialnykh-klientov-iandeks-oblaka>25.25. Семинары для потенциальных клиентов Яндекс.Облака.<a class=headerlink href=#25-25-seminary-dlia-potentsialnykh-klientov-iandeks-oblaka title="Permanent link">&para;</a></h3> <p>По мере необходимости. Алексей Миловидов, организация - Яндекс.Облако.</p> <h3 id=25-26-uchastie-v-gsoc>25.26. Участие в GSoC.<a class=headerlink href=#25-26-uchastie-v-gsoc title="Permanent link">&para;</a></h3> <p>Андрей Бородин пытается уговорить нас участвовать, но пока загружены задачей 25.17.</p> <h3 id=25-27-obnovit-sait-clickhouse>25.27. Обновить сайт ClickHouse.<a class=headerlink href=#25-27-obnovit-sait-clickhouse title="Permanent link">&para;</a></h3> <p>Иван Блинков. Есть риски.</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Собрано из <a href=https://github.com/ClickHouse/ClickHouse/commit/c1558f8c18e2727c5991cf923ee79710de89d1d0 rel="external nofollow noreferrer" target=_blank class=text-reset>c1558f8c18</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Cодержание</label> <a href=#1-khranenie-dannykh-indeksatsiia title="1. Хранение данных, индексация." class="nav-link text-wrap d-inline-block w-100"> 1. Хранение данных, индексация. </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#1-1-indeksy-po-z-order-curve-normalized-z-order-curve title="1.1. Индексы по z-Order curve, normalized z-Order curve." class="nav-link text-wrap d-inline-block w-100"> 1.1. Индексы по z-Order curve, normalized z-Order curve. </a> <a href=#1-2-wait-free-katalog-baz-dannykh title="1.2. Wait-free каталог баз данных." class="nav-link text-wrap d-inline-block w-100"> 1.2. Wait-free каталог баз данных. </a> <a href=#1-3-neblokiruiushchie-alter title="1.3. Неблокирующие ALTER." class="nav-link text-wrap d-inline-block w-100"> 1.3. Неблокирующие ALTER. </a> <a href=#1-4-netranzitivnye-alter-stolbtsov title="1.4. Нетранзитивные ALTER столбцов." class="nav-link text-wrap d-inline-block w-100"> 1.4. Нетранзитивные ALTER столбцов. </a> <a href=#1-5-alter-rename-column title="1.5. ALTER RENAME COLUMN." class="nav-link text-wrap d-inline-block w-100"> 1.5. ALTER RENAME COLUMN. </a> <a href=#1-6-polimorfnye-kuski-dannykh title="1.6. Полиморфные куски данных." class="nav-link text-wrap d-inline-block w-100"> 1.6. Полиморфные куски данных. </a> <a href=#1-7-buferizatsiia-i-wal-v-mergetree title="1.7. Буферизация и WAL в MergeTree." class="nav-link text-wrap d-inline-block w-100"> 1.7. Буферизация и WAL в MergeTree. </a> <a href=#1-8-perenos-mezhdu-razdelami-po-ttl title="1.8. Перенос между разделами по TTL." class="nav-link text-wrap d-inline-block w-100"> 1.8. Перенос между разделами по TTL. </a> <a href=#1-9-ispolzovanie-ttl-dlia-prorezhivaniia-dannykh title="1.9. Использование TTL для прореживания данных." class="nav-link text-wrap d-inline-block w-100"> 1.9. Использование TTL для прореживания данных. </a> <a href=#1-10-perezhatie-starykh-dannykh-v-fone title="1.10. Пережатие старых данных в фоне." class="nav-link text-wrap d-inline-block w-100"> 1.10. Пережатие старых данных в фоне. </a> <a href=#1-11-virtualnaia-failovaia-sistema title="1.11. Виртуальная файловая система." class="nav-link text-wrap d-inline-block w-100"> 1.11. Виртуальная файловая система. </a> <a href=#1-12-eksperimentalnaia-realizatsiia-vfs-poverkh-s3-i-hdfs title="1.12. Экспериментальная реализация VFS поверх S3 и HDFS." class="nav-link text-wrap d-inline-block w-100"> 1.12. Экспериментальная реализация VFS поверх S3 и HDFS. </a> <a href=#1-13-uskorenie-zaprosov-s-final title="1.13. Ускорение запросов с FINAL." class="nav-link text-wrap d-inline-block w-100"> 1.13. Ускорение запросов с FINAL. </a> <a href=#1-14-ne-pisat-stolbtsy-polnostiu-sostoiashchie-iz-nulei title="1.14. Не писать столбцы, полностью состоящие из нулей." class="nav-link text-wrap d-inline-block w-100"> 1.14. Не писать столбцы, полностью состоящие из нулей. </a> <a href=#1-15-vozmozhnost-imet-raznyi-pervichnyi-kliuch-v-raznykh-kuskakh title="1.15. Возможность иметь разный первичный ключ в разных кусках." class="nav-link text-wrap d-inline-block w-100"> 1.15. Возможность иметь разный первичный ключ в разных кусках. </a> <a href=#1-16-neskolko-fizicheskikh-predstavlenii-dlia-odnogo-kuska-dannykh title="1.16. Несколько физических представлений для одного куска данных." class="nav-link text-wrap d-inline-block w-100"> 1.16. Несколько физических представлений для одного куска данных. </a> <a href=#1-17-neskolko-sortirovok-dlia-odnoi-tablitsy title="1.17. Несколько сортировок для одной таблицы." class="nav-link text-wrap d-inline-block w-100"> 1.17. Несколько сортировок для одной таблицы. </a> <a href=#1-18-otdelnoe-khranenie-failov-kuskov title="1.18. Отдельное хранение файлов кусков." class="nav-link text-wrap d-inline-block w-100"> 1.18. Отдельное хранение файлов кусков. </a> </nav> <a href=#2-krupnye-refaktoringi title="2. Крупные рефакторинги." class="nav-link text-wrap d-inline-block w-100"> 2. Крупные рефакторинги. </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#2-1-peredelka-konveiera-vypolneniia-zaprosov-na-processors title="2.1. Переделка конвейера выполнения запросов на Processors." class="nav-link text-wrap d-inline-block w-100"> 2.1. Переделка конвейера выполнения запросов на Processors. </a> <a href=#2-2-infrastruktura-sobytii-metrik-ogranichenii-kvot-trassirovki title="2.2. Инфраструктура событий/метрик/ограничений/квот/трассировки." class="nav-link text-wrap d-inline-block w-100"> 2.2. Инфраструктура событий/метрик/ограничений/квот/трассировки. </a> <a href=#2-3-perenos-stolbtsovogo-ser-de-iz-datatype-v-column title="2.3. Перенос столбцового ser/de из DataType в Column." class="nav-link text-wrap d-inline-block w-100"> 2.3. Перенос столбцового ser/de из DataType в Column. </a> <a href=#2-4-perevod-lowcardinality-iz-datatype-v-column-dobavlenie-columnsparse title="2.4. Перевод LowCardinality из DataType в Column. Добавление ColumnSparse." class="nav-link text-wrap d-inline-block w-100"> 2.4. Перевод LowCardinality из DataType в Column. Добавление ColumnSparse. </a> <a href=#2-5-versionirovanie-sostoianii-agregatnykh-funktsii title="2.5. Версионирование состояний агрегатных функций." class="nav-link text-wrap d-inline-block w-100"> 2.5. Версионирование состояний агрегатных функций. </a> <a href=#2-6-pravaia-chast-in-kak-tip-dannykh-vypolnenie-in-v-vide-skaliarnogo-podzaprosa title="2.6. Правая часть IN как тип данных. Выполнение IN в виде скалярного подзапроса." class="nav-link text-wrap d-inline-block w-100"> 2.6. Правая часть IN как тип данных. Выполнение IN в виде скалярного подзапроса. </a> <a href=#2-7-normalizatsiia-context title="2.7. Нормализация Context." class="nav-link text-wrap d-inline-block w-100"> 2.7. Нормализация Context. </a> <a href=#2-8-deklarativnyi-parser-zaprosov title="2.8. Декларативный парсер запросов." class="nav-link text-wrap d-inline-block w-100"> 2.8. Декларативный парсер запросов. </a> <a href=#2-9-loggirovnie-v-format-stile title="2.9. Логгировние в format-стиле." class="nav-link text-wrap d-inline-block w-100"> 2.9. Логгировние в format-стиле. </a> <a href=#2-10-zaprashivat-u-tablits-ne-stolbtsy-a-srezy title="2.10. Запрашивать у таблиц не столбцы, а срезы." class="nav-link text-wrap d-inline-block w-100"> 2.10. Запрашивать у таблиц не столбцы, а срезы. </a> <a href=#2-11-razbiratelstvo-i-normalizatsiia-funktsionalnosti-dlia-bitmap title="2.11. Разбирательство и нормализация функциональности для bitmap." class="nav-link text-wrap d-inline-block w-100"> 2.11. Разбирательство и нормализация функциональности для bitmap. </a> <a href=#2-12-deklarativnye-signatury-funktsii title="2.12. Декларативные сигнатуры функций." class="nav-link text-wrap d-inline-block w-100"> 2.12. Декларативные сигнатуры функций. </a> <a href=#2-13-kazhdaia-funktsiia-v-otdelnom-faile title="2.13. Каждая функция в отдельном файле." class="nav-link text-wrap d-inline-block w-100"> 2.13. Каждая функция в отдельном файле. </a> <a href=#2-14-vse-funktsii-s-sostoianiem-peredelat-na-functionbuilder title="2.14. Все функции с состоянием переделать на FunctionBuilder." class="nav-link text-wrap d-inline-block w-100"> 2.14. Все функции с состоянием переделать на FunctionBuilder. </a> <a href=#2-15-funktsiia-subscribe-dlia-istorage title="2.15. Функция subscribe для IStorage." class="nav-link text-wrap d-inline-block w-100"> 2.15. Функция subscribe для IStorage. </a> </nav> <a href=#3-dokumentatsiia title="3. Документация." class="nav-link text-wrap d-inline-block w-100"> 3. Документация. </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#3-1-perenos-dokumentatsii-po-funktsiiam-v-kod title="3.1. Перенос документации по функциям в код." class="nav-link text-wrap d-inline-block w-100"> 3.1. Перенос документации по функциям в код. </a> <a href=#3-2-perenos-odnorodnykh-chastei-dokumentatsii-v-kod title="3.2. Перенос однородных частей документации в код." class="nav-link text-wrap d-inline-block w-100"> 3.2. Перенос однородных частей документации в код. </a> <a href=#3-3-ispravit-katastroficheski-otvratitelno-nepriemlemyi-poisk-po-dokumentatsii title="3.3. Исправить катастрофически отвратительно неприемлемый поиск по документации." class="nav-link text-wrap d-inline-block w-100"> 3.3. Исправить катастрофически отвратительно неприемлемый поиск по документации. </a> <a href=#3-4-dobavit-iaponskii-iazyk-v-dokumentatsiiu title="3.4. + Добавить японский язык в документацию." class="nav-link text-wrap d-inline-block w-100"> 3.4. + Добавить японский язык в документацию. </a> </nav> <a href=#4-setevoe-vzaimodeistvie title="4. Сетевое взаимодействие." class="nav-link text-wrap d-inline-block w-100"> 4. Сетевое взаимодействие. </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#4-1-umenshenie-chisla-potokov-pri-raspredelionnykh-zaprosakh title="4.1. Уменьшение числа потоков при распределённых запросах." class="nav-link text-wrap d-inline-block w-100"> 4.1. Уменьшение числа потоков при распределённых запросах. </a> <a href=#4-2-spekuliativnoe-vypolnenie-zaprosov-na-neskolkikh-replikakh title="4.2. Спекулятивное выполнение запросов на нескольких репликах." class="nav-link text-wrap d-inline-block w-100"> 4.2. Спекулятивное выполнение запросов на нескольких репликах. </a> <a href=#4-3-ogranichenie-chisla-odnovremennykh-skachivanii-s-replik title="4.3. Ограничение числа одновременных скачиваний с реплик." class="nav-link text-wrap d-inline-block w-100"> 4.3. Ограничение числа одновременных скачиваний с реплик. </a> <a href=#4-4-ogranichenie-setevoi-polosy-pri-replikatsii title="4.4. Ограничение сетевой полосы при репликации." class="nav-link text-wrap d-inline-block w-100"> 4.4. Ограничение сетевой полосы при репликации. </a> <a href=#4-5-vozmozhnost-prodolzhit-peredachu-kuska-dannykh-pri-replikatsii-posle-sboia title="4.5. Возможность продолжить передачу куска данных при репликации после сбоя." class="nav-link text-wrap d-inline-block w-100"> 4.5. Возможность продолжить передачу куска данных при репликации после сбоя. </a> <a href=#4-6-p2p-peredacha-dlia-global-podzaprosov title="4.6. p2p передача для GLOBAL подзапросов." class="nav-link text-wrap d-inline-block w-100"> 4.6. p2p передача для GLOBAL подзапросов. </a> <a href=#4-7-lenivaia-zagruzka-mnozhestv-dlia-in-i-join-s-pomoshchiu-k-v-zaprosov title="4.7. Ленивая загрузка множеств для IN и JOIN с помощью k/v запросов." class="nav-link text-wrap d-inline-block w-100"> 4.7. Ленивая загрузка множеств для IN и JOIN с помощью k/v запросов. </a> <a href=#4-8-razdelit-background-pool-dlia-fetch-i-merge title="4.8. Разделить background pool для fetch и merge." class="nav-link text-wrap d-inline-block w-100"> 4.8. Разделить background pool для fetch и merge. </a> </nav> <a href=#5-operatsii title="5. Операции." class="nav-link text-wrap d-inline-block w-100"> 5. Операции. </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#5-1-razdelenie-zadach-na-bolee-melkie-kuski-v-clickhouse-copier title="5.1. Разделение задач на более мелкие куски в clickhouse-copier." class="nav-link text-wrap d-inline-block w-100"> 5.1. Разделение задач на более мелкие куски в clickhouse-copier. </a> <a href=#5-2-avtonastroika-limita-na-operativku-i-razmera-keshei title="5.2. Автонастройка лимита на оперативку и размера кэшей." class="nav-link text-wrap d-inline-block w-100"> 5.2. Автонастройка лимита на оперативку и размера кэшей. </a> <a href=#5-3-vstroennaia-ruchka-dlia-prometheus-i-vozmozhno-solomon title="5.3. Встроенная ручка для Prometheus и, возможно, Solomon." class="nav-link text-wrap d-inline-block w-100"> 5.3. Встроенная ручка для Prometheus и, возможно, Solomon. </a> <a href=#5-4-opt-in-soobshchat-v-kliente-esli-vyshla-novaia-versiia title="5.4. Opt-in сообщать в клиенте, если вышла новая версия." class="nav-link text-wrap d-inline-block w-100"> 5.4. Opt-in сообщать в клиенте, если вышла новая версия. </a> <a href=#5-5-lts-relizy title="5.5. LTS релизы." class="nav-link text-wrap d-inline-block w-100"> 5.5. LTS релизы. </a> </nav> <a href=#6-instrumentirovanie title="6. Инструментирование." class="nav-link text-wrap d-inline-block w-100"> 6. Инструментирование. </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#6-1-ispravleniia-sempliruiushchego-profailera-zaprosov title="6.1. Исправления сэмплирующего профайлера запросов." class="nav-link text-wrap d-inline-block w-100"> 6.1. Исправления сэмплирующего профайлера запросов. </a> <a href=#6-2-dobavlenie-memory-profiler title="6.2. Добавление memory profiler." class="nav-link text-wrap d-inline-block w-100"> 6.2. Добавление memory profiler. </a> <a href=#6-3-uchiot-operativki-total-rasshirit-ne-tolko-na-zaprosy title="6.3. Учёт оперативки total расширить не только на запросы." class="nav-link text-wrap d-inline-block w-100"> 6.3. Учёт оперативки total расширить не только на запросы. </a> <a href=#6-4-podderzhka-perf-events-kak-metrik-zaprosa title="6.4. Поддержка perf events как метрик запроса." class="nav-link text-wrap d-inline-block w-100"> 6.4. Поддержка perf events как метрик запроса. </a> <a href=#6-5-eksperimenty-s-llvm-x-ray title="6.5. Эксперименты с LLVM X-Ray." class="nav-link text-wrap d-inline-block w-100"> 6.5. Эксперименты с LLVM X-Ray. </a> <a href=#6-6-stek-treis-dlia-liubykh-iskliuchenii title="6.6. Стек трейс для любых исключений." class="nav-link text-wrap d-inline-block w-100"> 6.6. Стек трейс для любых исключений. </a> <a href=#6-7-tablitsa-system-stack-trace title="6.7. Таблица system.stack_trace." class="nav-link text-wrap d-inline-block w-100"> 6.7. Таблица system.stack_trace. </a> <a href=#6-8-tablitsa-system-crashes title="6.8. Таблица system.crashes." class="nav-link text-wrap d-inline-block w-100"> 6.8. Таблица system.crashes. </a> <a href=#6-9-otpravliat-informatsiiu-klientu-esli-server-padaet-po-signalu title="6.9. Отправлять информацию клиенту, если сервер падает по сигналу." class="nav-link text-wrap d-inline-block w-100"> 6.9. Отправлять информацию клиенту, если сервер падает по сигналу. </a> <a href=#6-10-sbor-obshchikh-sistemnykh-metrik title="6.10. Сбор общих системных метрик." class="nav-link text-wrap d-inline-block w-100"> 6.10. Сбор общих системных метрик. </a> </nav> <a href=#7-soprovozhdenie-razrabotki title="7. Сопровождение разработки." class="nav-link text-wrap d-inline-block w-100"> 7. Сопровождение разработки. </a> <nav id=toc-toc-7 class="nav flex-column pl-2"> <a href=#7-1-icu-v-submodules title="7.1. + ICU в submodules." class="nav-link text-wrap d-inline-block w-100"> 7.1. + ICU в submodules. </a> <a href=#7-2-llvm-v-submodules title="7.2. + LLVM в submodules." class="nav-link text-wrap d-inline-block w-100"> 7.2. + LLVM в submodules. </a> <a href=#7-3-obnovlenie-poco title="7.3. Обновление Poco." class="nav-link text-wrap d-inline-block w-100"> 7.3. Обновление Poco. </a> <a href=#7-4-vkliuchit-libc-libc-abi-pri-sborke-s-gcc title="7.4. + Включить libc++, libc++-abi при сборке с gcc." class="nav-link text-wrap d-inline-block w-100"> 7.4. + Включить libc++, libc++-abi при сборке с gcc. </a> <a href=#7-5-nachat-publikovat-lts-relizy title="7.5. Начать публиковать LTS релизы." class="nav-link text-wrap d-inline-block w-100"> 7.5. Начать публиковать LTS релизы. </a> <a href=#7-6-pravilnyi-statisticheskii-test-dlia-comparison-mode-v-clickhouse-performance-test title="7.6. Правильный статистический тест для comparison mode в clickhouse-performance-test." class="nav-link text-wrap d-inline-block w-100"> 7.6. Правильный статистический тест для comparison mode в clickhouse-performance-test. </a> <a href=#7-7-dodelat-testy-pod-msan title="7.7. Доделать тесты под MSan." class="nav-link text-wrap d-inline-block w-100"> 7.7. Доделать тесты под MSan. </a> <a href=#7-8-dobavit-clang-tidy title="7.8. Добавить clang-tidy." class="nav-link text-wrap d-inline-block w-100"> 7.8. Добавить clang-tidy. </a> <a href=#7-9-proverki-na-stil-imion-s-pomoshchiu-clang-tidy title="7.9. Проверки на стиль имён с помощью clang-tidy." class="nav-link text-wrap d-inline-block w-100"> 7.9. Проверки на стиль имён с помощью clang-tidy. </a> <a href=#7-10-vkliuchenie-ubsan-i-msan-v-integratsionnykh-testakh title="7.10. Включение UBSan и MSan в интеграционных тестах." class="nav-link text-wrap d-inline-block w-100"> 7.10. Включение UBSan и MSan в интеграционных тестах. </a> <a href=#7-11-vkliuchenie-san-v-unit-testakh title="7.11. Включение *San в unit тестах." class="nav-link text-wrap d-inline-block w-100"> 7.11. Включение *San в unit тестах. </a> <a href=#7-12-pokazyvat-testovoe-pokrytie-novogo-koda-v-pr title="7.12. Показывать тестовое покрытие нового кода в PR." class="nav-link text-wrap d-inline-block w-100"> 7.12. Показывать тестовое покрытие нового кода в PR. </a> <a href=#7-13-vkliuchenie-analoga-weverything-v-gcc title="7.13. + Включение аналога -Weverything в gcc." class="nav-link text-wrap d-inline-block w-100"> 7.13. + Включение аналога -Weverything в gcc. </a> <a href=#7-14-alternativa-dlia-readline-i-libedit title="7.14. Альтернатива для readline и libedit." class="nav-link text-wrap d-inline-block w-100"> 7.14. Альтернатива для readline и libedit. </a> <a href=#7-15-zamena-libressl-obratno-na-openssl title="7.15. + Замена libressl обратно на openssl." class="nav-link text-wrap d-inline-block w-100"> 7.15. + Замена libressl обратно на openssl. </a> <a href=#7-16-tzdata-vnutri-binarnika title="7.16. tzdata внутри бинарника." class="nav-link text-wrap d-inline-block w-100"> 7.16. tzdata внутри бинарника. </a> <a href=#7-17-dodelat-tgz-pakety title="7.17. Доделать tgz пакеты." class="nav-link text-wrap d-inline-block w-100"> 7.17. Доделать tgz пакеты. </a> <a href=#7-18-1-dodelat-binarniki-pod-mac title="7.18.1. Доделать бинарники под Mac." class="nav-link text-wrap d-inline-block w-100"> 7.18.1. Доделать бинарники под Mac. </a> <a href=#7-18-pomestit-ssylku-na-sobrannye-binarniki-pod-mac-na-sait title="7.18. Поместить ссылку на собранные бинарники под Mac на сайт." class="nav-link text-wrap d-inline-block w-100"> 7.18. Поместить ссылку на собранные бинарники под Mac на сайт. </a> <a href=#7-19-dodelat-proverit-avtosborku-pod-aarch64 title="7.19. + Доделать (проверить) автосборку под AArch64." class="nav-link text-wrap d-inline-block w-100"> 7.19. + Доделать (проверить) автосборку под AArch64. </a> <a href=#7-20-avtosborka-dlia-freebsd-x86-64 title="7.20. Автосборка для FreeBSD x86_64." class="nav-link text-wrap d-inline-block w-100"> 7.20. Автосборка для FreeBSD x86_64. </a> <a href=#7-21-avtosborka-dlia-linux-ppc64 title="7.21. Автосборка для Linux ppc64." class="nav-link text-wrap d-inline-block w-100"> 7.21. Автосборка для Linux ppc64. </a> <a href=#7-22-deshbord-dlia-pull-requests title="7.22. Дэшборд для pull requests." class="nav-link text-wrap d-inline-block w-100"> 7.22. Дэшборд для pull requests. </a> <a href=#7-23-funktsii-dlia-fuzzing title="7.23. Функции для fuzzing." class="nav-link text-wrap d-inline-block w-100"> 7.23. Функции для fuzzing. </a> <a href=#7-24-fuzzing-leksera-i-parsera-zaprosov-kodekov-i-formatov title="7.24. Fuzzing лексера и парсера запросов; кодеков и форматов." class="nav-link text-wrap d-inline-block w-100"> 7.24. Fuzzing лексера и парсера запросов; кодеков и форматов. </a> <a href=#7-25-sinkhronizatsiia-relizov-v-arkadiiu title="7.25. Синхронизация релизов в Аркадию." class="nav-link text-wrap d-inline-block w-100"> 7.25. Синхронизация релизов в Аркадию. </a> <a href=#7-26-pobaitovaia-identichnost-repozitoriia-s-arkadiei title="7.26. Побайтовая идентичность репозитория с Аркадией." class="nav-link text-wrap d-inline-block w-100"> 7.26. Побайтовая идентичность репозитория с Аркадией. </a> <a href=#7-27-zapusk-avtotestov-v-arkadii title="7.27. Запуск автотестов в Аркадии." class="nav-link text-wrap d-inline-block w-100"> 7.27. Запуск автотестов в Аркадии. </a> <a href=#7-29-optsii-clickhouse-install-stop-start-vmesto-postinst-init-d-systemd-skriptov title="7.29. Опции clickhouse install, stop, start вместо postinst, init.d, systemd скриптов." class="nav-link text-wrap d-inline-block w-100"> 7.29. Опции clickhouse install, stop, start вместо postinst, init.d, systemd скриптов. </a> <a href=#7-30-vozmozhnost-perekliucheniia-binarnykh-failov-na-prodakshene-bez-vykladki-paketov title="7.30. Возможность переключения бинарных файлов на продакшене без выкладки пакетов." class="nav-link text-wrap d-inline-block w-100"> 7.30. Возможность переключения бинарных файлов на продакшене без выкладки пакетов. </a> <a href=#7-31-zerkalirovanie-nagruzki-mezhdu-serverami title="7.31. Зеркалирование нагрузки между серверами." class="nav-link text-wrap d-inline-block w-100"> 7.31. Зеркалирование нагрузки между серверами. </a> <a href=#7-32-obfuskatsiia-prodakshen-zaprosov title="7.32. Обфускация продакшен запросов." class="nav-link text-wrap d-inline-block w-100"> 7.32. Обфускация продакшен запросов. </a> <a href=#7-33-vykladyvat-patch-relizy-v-repozitorii-avtomaticheski title="7.33. Выкладывать патч релизы в репозиторий автоматически." class="nav-link text-wrap d-inline-block w-100"> 7.33. Выкладывать патч релизы в репозиторий автоматически. </a> <a href=#7-34-bekportirovat-bugfix-avtomaticheski title="7.34. Бэкпортировать bugfix автоматически." class="nav-link text-wrap d-inline-block w-100"> 7.34. Бэкпортировать bugfix автоматически. </a> <a href=#7-35-nachalnye-pravila-dlia-avto-merge title="7.35. Начальные правила для авто-merge." class="nav-link text-wrap d-inline-block w-100"> 7.35. Начальные правила для авто-merge. </a> <a href=#7-36-poniatie-doverennykh-kontribiutorov title="7.36. Понятие доверенных контрибьюторов." class="nav-link text-wrap d-inline-block w-100"> 7.36. Понятие доверенных контрибьюторов. </a> <a href=#7-37-razobratsia-s-repo-yandex-ru title="7.37. Разобраться с repo.yandex.ru." class="nav-link text-wrap d-inline-block w-100"> 7.37. Разобраться с repo.yandex.ru. </a> </nav> <a href=#8-integratsiia-s-vneshnimi-sistemami title="8. Интеграция с внешними системами." class="nav-link text-wrap d-inline-block w-100"> 8. Интеграция с внешними системами. </a> <nav id=toc-toc-8 class="nav flex-column pl-2"> <a href=#8-1-podderzhka-alter-modify-setting-dlia-kafka title="8.1. Поддержка ALTER MODIFY SETTING для Kafka." class="nav-link text-wrap d-inline-block w-100"> 8.1. Поддержка ALTER MODIFY SETTING для Kafka. </a> <a href=#8-2-podderzhka-mongo-atlas-uri title="8.2. Поддержка Mongo Atlas URI." class="nav-link text-wrap d-inline-block w-100"> 8.2. Поддержка Mongo Atlas URI. </a> <a href=#8-3-dorabotki-globs-pravilnaia-podderzhka-diapazonov-umenshenie-chisla-odnovremennykh-stream-ov title="8.3. Доработки globs (правильная поддержка диапазонов, уменьшение числа одновременных stream-ов)." class="nav-link text-wrap d-inline-block w-100"> 8.3. Доработки globs (правильная поддержка диапазонов, уменьшение числа одновременных stream-ов). </a> <a href=#8-4-unifikatsiia-file-hdfs-s3-pod-url title="8.4. Унификация File, HDFS, S3 под URL." class="nav-link text-wrap d-inline-block w-100"> 8.4. Унификация File, HDFS, S3 под URL. </a> <a href=#8-5-autentifikatsiia-v-s3 title="8.5. + Аутентификация в S3." class="nav-link text-wrap d-inline-block w-100"> 8.5. + Аутентификация в S3. </a> <a href=#8-6-kerberos-autentifikatsiia-dlia-hdfs-i-kafka title="8.6. Kerberos аутентификация для HDFS и Kafka." class="nav-link text-wrap d-inline-block w-100"> 8.6. Kerberos аутентификация для HDFS и Kafka. </a> <a href=#8-7-ispravlenie-melochi-hdfs-na-ochen-starykh-iadrakh-linux title="8.7. + Исправление мелочи HDFS на очень старых ядрах Linux." class="nav-link text-wrap d-inline-block w-100"> 8.7. + Исправление мелочи HDFS на очень старых ядрах Linux. </a> <a href=#8-8-podderzhka-virtualnykh-stolbtsov-s-imenem-faila-i-putiom title="8.8. Поддержка виртуальных столбцов с именем файла и путём." class="nav-link text-wrap d-inline-block w-100"> 8.8. Поддержка виртуальных столбцов с именем файла и путём. </a> <a href=#8-9-podderzhka-szhatykh-failov-gz-bz-na-chtenie-i-zapis title="8.9. + Поддержка сжатых файлов (gz, bz) на чтение и запись." class="nav-link text-wrap d-inline-block w-100"> 8.9. + Поддержка сжатых файлов (gz, bz) на чтение и запись. </a> <a href=#8-10-zapis-v-tablichnuiu-funktsiiu-odbc title="8.10. Запись в табличную функцию ODBC." class="nav-link text-wrap d-inline-block w-100"> 8.10. Запись в табличную функцию ODBC. </a> <a href=#8-11-dvizhok-tablits-dlia-chteniia-iz-mongo title="8.11. Движок таблиц для чтения из Mongo." class="nav-link text-wrap d-inline-block w-100"> 8.11. Движок таблиц для чтения из Mongo. </a> <a href=#8-12-propusk-stolbtsov-v-formatakh-parquet-orc title="8.12. Пропуск столбцов в форматах Parquet, ORC." class="nav-link text-wrap d-inline-block w-100"> 8.12. Пропуск столбцов в форматах Parquet, ORC. </a> <a href=#8-13-podderzhka-massivov-v-parquet-orc title="8.13. Поддержка массивов в Parquet, ORC." class="nav-link text-wrap d-inline-block w-100"> 8.13. Поддержка массивов в Parquet, ORC. </a> <a href=#8-14-zapis-dannykh-v-orc title="8.14. Запись данных в ORC." class="nav-link text-wrap d-inline-block w-100"> 8.14. Запись данных в ORC. </a> <a href=#8-15-zapis-dannykh-v-capnproto title="8.15. Запись данных в CapNProto." class="nav-link text-wrap d-inline-block w-100"> 8.15. Запись данных в CapNProto. </a> <a href=#8-16-podderzhka-formata-avro title="8.16. Поддержка формата Avro." class="nav-link text-wrap d-inline-block w-100"> 8.16. Поддержка формата Avro. </a> <a href=#8-17-clickhouse-kak-mysql-replika title="8.17. ClickHouse как MySQL реплика." class="nav-link text-wrap d-inline-block w-100"> 8.17. ClickHouse как MySQL реплика. </a> <a href=#8-18-clickhouse-kak-federated-mysql title="8.18. + ClickHouse как Federated MySQL." class="nav-link text-wrap d-inline-block w-100"> 8.18. + ClickHouse как Federated MySQL. </a> <a href=#8-19-integratsiia-s-rabbitmq title="8.19. Интеграция с RabbitMQ." class="nav-link text-wrap d-inline-block w-100"> 8.19. Интеграция с RabbitMQ. </a> <a href=#8-20-integratsiia-s-sqs title="8.20. Интеграция с SQS." class="nav-link text-wrap d-inline-block w-100"> 8.20. Интеграция с SQS. </a> <a href=#8-21-podderzhka-proizvolnogo-kolichestva-iazykov-dlia-imion-regionov title="8.21. Поддержка произвольного количества языков для имён регионов." class="nav-link text-wrap d-inline-block w-100"> 8.21. Поддержка произвольного количества языков для имён регионов. </a> <a href=#8-22-podderzhka-sintaksisa-dlia-peremennykh-v-stile-mysql title="8.22. Поддержка синтаксиса для переменных в стиле MySQL." class="nav-link text-wrap d-inline-block w-100"> 8.22. Поддержка синтаксиса для переменных в стиле MySQL. </a> <a href=#8-23-podpiska-dlia-importa-obnovliaemykh-i-rotiruemykh-logov-v-fs title="8.23. Подписка для импорта обновляемых и ротируемых логов в ФС." class="nav-link text-wrap d-inline-block w-100"> 8.23. Подписка для импорта обновляемых и ротируемых логов в ФС. </a> </nav> <a href=#9-bezopasnost title="9. Безопасность." class="nav-link text-wrap d-inline-block w-100"> 9. Безопасность. </a> <nav id=toc-toc-9 class="nav flex-column pl-2"> <a href=#9-1-ogranichenie-na-khosty-v-zaprosakh-ko-vneshnim-sistemam title="9.1. + Ограничение на хосты в запросах ко внешним системам." class="nav-link text-wrap d-inline-block w-100"> 9.1. + Ограничение на хосты в запросах ко внешним системам. </a> <a href=#9-2-prednastroennye-imenovannye-soedineniia-k-vneshnim-bd title="9.2. Преднастроенные именованные соединения к внешним БД." class="nav-link text-wrap d-inline-block w-100"> 9.2. Преднастроенные именованные соединения к внешним БД. </a> <a href=#9-3-podderzhka-tls-dlia-zookeeper title="9.3. Поддержка TLS для ZooKeeper." class="nav-link text-wrap d-inline-block w-100"> 9.3. Поддержка TLS для ZooKeeper. </a> </nav> <a href=#10-vneshnie-slovari title="10. Внешние словари." class="nav-link text-wrap d-inline-block w-100"> 10. Внешние словари. </a> <nav id=toc-toc-10 class="nav flex-column pl-2"> <a href=#10-1-ispravlenie-zavisaniia-v-biblioteke-dostupa-k-yt title="10.1. + Исправление зависания в библиотеке доступа к YT." class="nav-link text-wrap d-inline-block w-100"> 10.1. + Исправление зависания в библиотеке доступа к YT. </a> <a href=#10-2-ispravlenie-sigill-v-biblioteke-dostupa-k-yt title="10.2. Исправление SIGILL в библиотеке доступа к YT." class="nav-link text-wrap d-inline-block w-100"> 10.2. Исправление SIGILL в библиотеке доступа к YT. </a> <a href=#10-3-vozmozhnost-chteniia-dannykh-iz-staticheskikh-tablits-v-yt-slovariakh title="10.3. Возможность чтения данных из статических таблиц в YT словарях." class="nav-link text-wrap d-inline-block w-100"> 10.3. Возможность чтения данных из статических таблиц в YT словарях. </a> <a href=#10-4-slovar-iz-ydb-kikimr title="10.4. Словарь из YDB (KikiMR)." class="nav-link text-wrap d-inline-block w-100"> 10.4. Словарь из YDB (KikiMR). </a> <a href=#10-5-zakrytie-soedinenii-i-umenshenie-chisla-soedinenii-dlia-mysql-i-odbc title="10.5. Закрытие соединений и уменьшение числа соединений для MySQL и ODBC." class="nav-link text-wrap d-inline-block w-100"> 10.5. Закрытие соединений и уменьшение числа соединений для MySQL и ODBC. </a> <a href=#10-6-slovari-iz-cassandra-i-couchbase title="10.6. Словари из Cassandra и Couchbase." class="nav-link text-wrap d-inline-block w-100"> 10.6. Словари из Cassandra и Couchbase. </a> <a href=#10-7-podderzhka-nullable-v-slovariakh title="10.7. Поддержка Nullable в словарях." class="nav-link text-wrap d-inline-block w-100"> 10.7. Поддержка Nullable в словарях. </a> <a href=#10-8-podderzhka-massivov-v-slovariakh title="10.8. Поддержка массивов в словарях." class="nav-link text-wrap d-inline-block w-100"> 10.8. Поддержка массивов в словарях. </a> <a href=#10-9-umenshenie-blokirovok-dlia-cache-slovarei-za-schiot-odnovremennykh-zaprosov-odnogo-i-togo-zhe title="10.9. Уменьшение блокировок для cache словарей за счёт одновременных запросов одного и того же." class="nav-link text-wrap d-inline-block w-100"> 10.9. Уменьшение блокировок для cache словарей за счёт одновременных запросов одного и того же. </a> <a href=#10-10-vozmozhnost-ispolzovaniia-starykh-znachenii-iz-cache-slovaria-poka-oni-perezaprashivaiutsia title="10.10. Возможность использования старых значений из cache словаря пока они перезапрашиваются." class="nav-link text-wrap d-inline-block w-100"> 10.10. Возможность использования старых значений из cache словаря пока они перезапрашиваются. </a> <a href=#10-11-vozmozhnost-iskliuchitelno-asinkhronnykh-zaprosov-v-cache-slovariakh title="10.11. Возможность исключительно асинхронных запросов в cache словарях." class="nav-link text-wrap d-inline-block w-100"> 10.11. Возможность исключительно асинхронных запросов в cache словарях. </a> <a href=#10-12-layout-direct-dlia-slovarei title="10.12. Layout direct для словарей." class="nav-link text-wrap d-inline-block w-100"> 10.12. Layout direct для словарей. </a> <a href=#10-13-ispolzovanie-join-kak-generic-layout-dlia-slovarei title="10.13. Использование Join как generic layout для словарей." class="nav-link text-wrap d-inline-block w-100"> 10.13. Использование Join как generic layout для словарей. </a> <a href=#10-14-podderzhka-vsekh-tipov-v-funktsii-transform title="10.14. Поддержка всех типов в функции transform." class="nav-link text-wrap d-inline-block w-100"> 10.14. Поддержка всех типов в функции transform. </a> <a href=#10-15-ispolzovanie-slovarei-kak-spetsializirovannogo-layout-dlia-join title="10.15. Использование словарей как специализированного layout для Join." class="nav-link text-wrap d-inline-block w-100"> 10.15. Использование словарей как специализированного layout для Join. </a> <a href=#10-16-slovari-na-lokalnom-ssd title="10.16. Словари на локальном SSD." class="nav-link text-wrap d-inline-block w-100"> 10.16. Словари на локальном SSD. </a> <a href=#10-17-lokalnyi-damp-sostoianiia-slovaria-dlia-bystrogo-starta-servera title="10.17. Локальный дамп состояния словаря для быстрого старта сервера." class="nav-link text-wrap d-inline-block w-100"> 10.17. Локальный дамп состояния словаря для быстрого старта сервера. </a> <a href=#10-18-tablitsa-join-ili-slovar-na-udalionnom-servere-kak-key-value-bd-dlia-cache-slovaria title="10.18. Таблица Join или словарь на удалённом сервере как key-value БД для cache словаря." class="nav-link text-wrap d-inline-block w-100"> 10.18. Таблица Join или словарь на удалённом сервере как key-value БД для cache словаря. </a> <a href=#10-19-vozmozhnost-zaregistrirovat-nekotorye-funktsii-ispolzuiushchie-slovari-pod-polzovatelskimi-imenami title="10.19. Возможность зарегистрировать некоторые функции, использующие словари, под пользовательскими именами." class="nav-link text-wrap d-inline-block w-100"> 10.19. Возможность зарегистрировать некоторые функции, использующие словари, под пользовательскими именами. </a> </nav> <a href=#11-interfeisy title="11. Интерфейсы." class="nav-link text-wrap d-inline-block w-100"> 11. Интерфейсы. </a> <nav id=toc-toc-11 class="nav flex-column pl-2"> <a href=#11-1-vstavka-sostoianii-agregatnykh-funktsii-v-vide-kortezha-argumentov-ili-massiva-kortezhei-argumentov title="11.1. Вставка состояний агрегатных функций в виде кортежа аргументов или массива кортежей аргументов." class="nav-link text-wrap d-inline-block w-100"> 11.1. Вставка состояний агрегатных функций в виде кортежа аргументов или массива кортежей аргументов. </a> <a href=#11-2-vozmozhnost-ispolzovat-dvizhok-jdbc-iz-korobki title="11.2. Возможность использовать движок JDBC из коробки." class="nav-link text-wrap d-inline-block w-100"> 11.2. Возможность использовать движок JDBC из коробки. </a> <a href=#11-3-integratsionnye-testy-odbc-draivera-putiom-podkliucheniia-clickhouse-k-samomu-sebe-cherez-odbc title="11.3. Интеграционные тесты ODBC драйвера путём подключения ClickHouse к самому себе через ODBC." class="nav-link text-wrap d-inline-block w-100"> 11.3. Интеграционные тесты ODBC драйвера путём подключения ClickHouse к самому себе через ODBC. </a> <a href=#11-4-ispravlenie-upiachek-s-tipami-date-i-decimal-v-clickhouse-cpp title="11.4. Исправление упячек с типами Date и Decimal в clickhouse-cpp." class="nav-link text-wrap d-inline-block w-100"> 11.4. Исправление упячек с типами Date и Decimal в clickhouse-cpp. </a> <a href=#11-5-podderzhka-tls-v-clickhouse-cpp title="11.5. Поддержка TLS в clickhouse-cpp." class="nav-link text-wrap d-inline-block w-100"> 11.5. Поддержка TLS в clickhouse-cpp. </a> <a href=#11-6-integratsionnye-testy-clickhouse-cpp title="11.6. Интеграционные тесты clickhouse-cpp." class="nav-link text-wrap d-inline-block w-100"> 11.6. Интеграционные тесты clickhouse-cpp. </a> <a href=#11-7-interaktivnyi-rezhim-raboty-programmy-clickhouse-local title="11.7. Интерактивный режим работы программы clickhouse-local." class="nav-link text-wrap d-inline-block w-100"> 11.7. Интерактивный режим работы программы clickhouse-local. </a> <a href=#11-8-podderzhka-protokola-postgresql title="11.8. Поддержка протокола PostgreSQL." class="nav-link text-wrap d-inline-block w-100"> 11.8. Поддержка протокола PostgreSQL. </a> <a href=#11-9-dorabotki-odbc-draivera title="11.9. Доработки ODBC драйвера." class="nav-link text-wrap d-inline-block w-100"> 11.9. Доработки ODBC драйвера. </a> <a href=#11-10-prednastroennye-http-handlers-dlia-zaprosov title="11.10. Преднастроенные HTTP handlers для запросов." class="nav-link text-wrap d-inline-block w-100"> 11.10. Преднастроенные HTTP handlers для запросов. </a> </nav> <a href=#12-upravlenie-polzovateliami-i-dostupom title="12. Управление пользователями и доступом." class="nav-link text-wrap d-inline-block w-100"> 12. Управление пользователями и доступом. </a> <nav id=toc-toc-12 class="nav flex-column pl-2"> <a href=#12-1-role-based-access-control title="12.1. Role Based Access Control." class="nav-link text-wrap d-inline-block w-100"> 12.1. Role Based Access Control. </a> <a href=#12-2-upravlenie-polzovateliami-i-pravami-dostupa-s-pomoshchiu-sql-zaprosov title="12.2. Управление пользователями и правами доступа с помощью SQL запросов." class="nav-link text-wrap d-inline-block w-100"> 12.2. Управление пользователями и правами доступа с помощью SQL запросов. </a> <a href=#12-3-podkliuchenie-spravochnika-polzovatelei-i-prav-dostupa-iz-ldap title="12.3. Подключение справочника пользователей и прав доступа из LDAP." class="nav-link text-wrap d-inline-block w-100"> 12.3. Подключение справочника пользователей и прав доступа из LDAP. </a> <a href=#12-4-podkliuchenie-idm-sistemy-iandeksa-kak-spravochnika-polzovatelei-i-prav-dostupa title="12.4. Подключение IDM системы Яндекса как справочника пользователей и прав доступа." class="nav-link text-wrap d-inline-block w-100"> 12.4. Подключение IDM системы Яндекса как справочника пользователей и прав доступа. </a> <a href=#12-5-pluggable-autentifikatsiia-s-pomoshchiu-kerberos-vozmozhno-podkliuchenie-gsasl title="12.5. Pluggable аутентификация с помощью Kerberos (возможно, подключение GSASL)." class="nav-link text-wrap d-inline-block w-100"> 12.5. Pluggable аутентификация с помощью Kerberos (возможно, подключение GSASL). </a> <a href=#12-6-informatsiia-o-polzovateliakh-i-kvotakh-v-sistemnoi-tablitse title="12.6. Информация о пользователях и квотах в системной таблице." class="nav-link text-wrap d-inline-block w-100"> 12.6. Информация о пользователях и квотах в системной таблице. </a> </nav> <a href=#13-razdelenie-resursov-multi-tenancy title="13. Разделение ресурсов, multi-tenancy." class="nav-link text-wrap d-inline-block w-100"> 13. Разделение ресурсов, multi-tenancy. </a> <nav id=toc-toc-13 class="nav flex-column pl-2"> <a href=#13-1-overcommit-zaprosov-po-pamiati-i-vytesnenie title="13.1. Overcommit запросов по памяти и вытеснение." class="nav-link text-wrap d-inline-block w-100"> 13.1. Overcommit запросов по памяти и вытеснение. </a> <a href=#13-2-obshchii-konveier-vypolneniia-na-server title="13.2. Общий конвейер выполнения на сервер." class="nav-link text-wrap d-inline-block w-100"> 13.2. Общий конвейер выполнения на сервер. </a> <a href=#13-3-puly-resursov title="13.3. Пулы ресурсов." class="nav-link text-wrap d-inline-block w-100"> 13.3. Пулы ресурсов. </a> </nav> <a href=#14-dialekt-sql title="14. Диалект SQL." class="nav-link text-wrap d-inline-block w-100"> 14. Диалект SQL. </a> <nav id=toc-toc-14 class="nav flex-column pl-2"> <a href=#14-1-ispravlenie-semantiki-cast-dlia-nullable title="14.1. Исправление семантики CAST для Nullable." class="nav-link text-wrap d-inline-block w-100"> 14.1. Исправление семантики CAST для Nullable. </a> <a href=#14-2-podderzhka-with-dlia-podzaprosov title="14.2. Поддержка WITH для подзапросов." class="nav-link text-wrap d-inline-block w-100"> 14.2. Поддержка WITH для подзапросов. </a> <a href=#14-3-podderzhka-podstanovok-dlia-mnozhestv-v-pravoi-chasti-in title="14.3. Поддержка подстановок для множеств в правой части IN." class="nav-link text-wrap d-inline-block w-100"> 14.3. Поддержка подстановок для множеств в правой части IN. </a> <a href=#14-4-podderzhka-podstanovok-dlia-identifikatorov-imion-v-sql-zaprose title="14.4. Поддержка подстановок для идентификаторов (имён) в SQL запросе." class="nav-link text-wrap d-inline-block w-100"> 14.4. Поддержка подстановок для идентификаторов (имён) в SQL запросе. </a> <a href=#14-5-podderzhka-zadaniia-mnozhestva-kak-massiva-v-pravoi-chasti-sektsii-in title="14.5. Поддержка задания множества как массива в правой части секции IN." class="nav-link text-wrap d-inline-block w-100"> 14.5. Поддержка задания множества как массива в правой части секции IN. </a> <a href=#14-6-globalnyi-scope-dlia-with title="14.6. Глобальный scope для WITH." class="nav-link text-wrap d-inline-block w-100"> 14.6. Глобальный scope для WITH. </a> <a href=#14-7-nullable-dlia-with-rollup-with-cube-with-totals title="14.7. Nullable для WITH ROLLUP, WITH CUBE, WITH TOTALS." class="nav-link text-wrap d-inline-block w-100"> 14.7. Nullable для WITH ROLLUP, WITH CUBE, WITH TOTALS. </a> <a href=#14-8-modifikatory-distinct-order-by-dlia-agregatnykh-funktsii title="14.8. Модификаторы DISTINCT, ORDER BY для агрегатных функций." class="nav-link text-wrap d-inline-block w-100"> 14.8. Модификаторы DISTINCT, ORDER BY для агрегатных функций. </a> <a href=#14-9-podderzhka-zaprosa-explain title="14.9. Поддержка запроса EXPLAIN." class="nav-link text-wrap d-inline-block w-100"> 14.9. Поддержка запроса EXPLAIN. </a> <a href=#14-10-arrayreduce-kak-funktsiia-vysshego-poriadka title="14.10. arrayReduce как функция высшего порядка." class="nav-link text-wrap d-inline-block w-100"> 14.10. arrayReduce как функция высшего порядка. </a> <a href=#14-11-funktsii-dlia-grouping-sets title="14.11. Функции для grouping sets." class="nav-link text-wrap d-inline-block w-100"> 14.11. Функции для grouping sets. </a> <a href=#14-12-funktsii-obrabotki-vremennykh-riadov title="14.12. Функции обработки временных рядов." class="nav-link text-wrap d-inline-block w-100"> 14.12. Функции обработки временных рядов. </a> <a href=#14-13-primenimost-funktsii-vysshego-poriadka-dlia-kortezhei-i-nested title="14.13. Применимость функций высшего порядка для кортежей и Nested." class="nav-link text-wrap d-inline-block w-100"> 14.13. Применимость функций высшего порядка для кортежей и Nested. </a> <a href=#14-14-neiavnye-preobrazovaniia-tipov-konstant title="14.14. Неявные преобразования типов констант." class="nav-link text-wrap d-inline-block w-100"> 14.14. Неявные преобразования типов констант. </a> <a href=#14-15-neiavnye-preobrazovaniia-tipov-pod-nastroikoi title="14.15. Неявные преобразования типов под настройкой." class="nav-link text-wrap d-inline-block w-100"> 14.15. Неявные преобразования типов под настройкой. </a> <a href=#14-16-sinonimy-dlia-funktsii-iz-mysql title="14.16. Синонимы для функций из MySQL." class="nav-link text-wrap d-inline-block w-100"> 14.16. Синонимы для функций из MySQL. </a> <a href=#14-17-vvesti-poniatie-stateful-funktsii title="14.17. Ввести понятие stateful функций." class="nav-link text-wrap d-inline-block w-100"> 14.17. Ввести понятие stateful функций. </a> <a href=#14-18-union-distinct-i-vozmozhnost-vkliuchit-ego-po-umolchaniiu title="14.18. UNION DISTINCT и возможность включить его по-умолчанию." class="nav-link text-wrap d-inline-block w-100"> 14.18. UNION DISTINCT и возможность включить его по-умолчанию. </a> <a href=#14-19-sovmestimost-parsera-tipov-dannykh-s-sql title="14.19. Совместимость парсера типов данных с SQL." class="nav-link text-wrap d-inline-block w-100"> 14.19. Совместимость парсера типов данных с SQL. </a> <a href=#14-20-pozitsionnye-argumenty-dlia-group-by-i-order-by title="14.20. Позиционные аргументы для GROUP BY и ORDER BY." class="nav-link text-wrap d-inline-block w-100"> 14.20. Позиционные аргументы для GROUP BY и ORDER BY. </a> <a href=#14-21-privedenie-tipov-dlia-in-podzapros-i-dlia-join title="14.21. Приведение типов для IN (подзапрос) и для JOIN." class="nav-link text-wrap d-inline-block w-100"> 14.21. Приведение типов для IN (подзапрос) и для JOIN. </a> </nav> <a href=#15-uluchshenie-podderzhki-join title="15. Улучшение поддержки JOIN." class="nav-link text-wrap d-inline-block w-100"> 15. Улучшение поддержки JOIN. </a> <nav id=toc-toc-15 class="nav flex-column pl-2"> <a href=#15-1-dovedenie-merge-join-do-prodakshena title="15.1. Доведение merge JOIN до продакшена." class="nav-link text-wrap d-inline-block w-100"> 15.1. Доведение merge JOIN до продакшена. </a> <a href=#15-2-prokidyvanie-uslovii-v-outer-join title="15.2. Прокидывание условий в OUTER JOIN." class="nav-link text-wrap d-inline-block w-100"> 15.2. Прокидывание условий в OUTER JOIN. </a> <a href=#15-3-logicheskii-vyvod-dlia-tsepochek-vida-on-t1-x-t2-y-where-t1-x-10 title="15.3. Логический вывод для цепочек вида ON t1.x = t2.y WHERE t1.x = 10" class="nav-link text-wrap d-inline-block w-100"> 15.3. Логический вывод для цепочек вида ON t1.x = t2.y WHERE t1.x = 10 </a> <a href=#15-4-distributed-join-s-pomoshchiu-pereraspredeleniia-dannykh title="15.4. Distributed JOIN с помощью перераспределения данных." class="nav-link text-wrap d-inline-block w-100"> 15.4. Distributed JOIN с помощью перераспределения данных. </a> <a href=#15-5-ispolzovanie-kliucha-tablitsy-dlia-optimizatsii-merge-join title="15.5. Использование ключа таблицы для оптимизации merge JOIN." class="nav-link text-wrap d-inline-block w-100"> 15.5. Использование ключа таблицы для оптимизации merge JOIN. </a> <a href=#15-6-semi-i-anti-join title="15.6. + SEMI и ANTI JOIN." class="nav-link text-wrap d-inline-block w-100"> 15.6. + SEMI и ANTI JOIN. </a> </nav> <a href=#16-tipy-dannykh-i-funktsii title="16. Типы данных и функции." class="nav-link text-wrap d-inline-block w-100"> 16. Типы данных и функции. </a> <nav id=toc-toc-16 class="nav flex-column pl-2"> <a href=#16-1-datetime64 title="16.1. DateTime64." class="nav-link text-wrap d-inline-block w-100"> 16.1. DateTime64. </a> <a href=#16-2-tip-dannykh-dlia-json title="16.2. Тип данных для JSON." class="nav-link text-wrap d-inline-block w-100"> 16.2. Тип данных для JSON. </a> <a href=#16-3-podderzhka-nekonstantnykh-argumentov-s-reguliarnymi-vyrazheniiami-v-funktsiiakh title="16.3. Поддержка неконстантных аргументов с регулярными выражениями в функциях." class="nav-link text-wrap d-inline-block w-100"> 16.3. Поддержка неконстантных аргументов с регулярными выражениями в функциях. </a> <a href=#16-4-funktsiia-rownumberforkey title="16.4. Функция rowNumberForKey." class="nav-link text-wrap d-inline-block w-100"> 16.4. Функция rowNumberForKey. </a> <a href=#16-5-funktsii-dlia-xml-i-html-escape title="16.5. Функции для XML и HTML escape." class="nav-link text-wrap d-inline-block w-100"> 16.5. Функции для XML и HTML escape. </a> <a href=#16-6-funktsii-normalizatsii-i-kheshirovaniia-sql-zaprosov title="16.6. Функции нормализации и хэширования SQL запросов." class="nav-link text-wrap d-inline-block w-100"> 16.6. Функции нормализации и хэширования SQL запросов. </a> </nav> <a href=#17-rabota-s-geograficheskimi-dannymi title="17. Работа с географическими данными." class="nav-link text-wrap d-inline-block w-100"> 17. Работа с географическими данными. </a> <nav id=toc-toc-17 class="nav flex-column pl-2"> <a href=#17-1-geo-slovari-dlia-opredeleniia-regiona-po-koordinatam title="17.1. Гео-словари для определения региона по координатам." class="nav-link text-wrap d-inline-block w-100"> 17.1. Гео-словари для определения региона по координатам. </a> <a href=#17-2-gis-tipy-dannykh-i-operatsii title="17.2. GIS типы данных и операции." class="nav-link text-wrap d-inline-block w-100"> 17.2. GIS типы данных и операции. </a> <a href=#17-3-uskorenie-greatcircledistance title="17.3. + Ускорение greatCircleDistance." class="nav-link text-wrap d-inline-block w-100"> 17.3. + Ускорение greatCircleDistance. </a> <a href=#17-4-uskorenie-geohash-s-pomoshchiu-biblioteki-iz-arkadii title="17.4. Ускорение geohash с помощью библиотеки из Аркадии." class="nav-link text-wrap d-inline-block w-100"> 17.4. Ускорение geohash с помощью библиотеки из Аркадии. </a> <a href=#17-5-proverki-v-funktsii-pointinpolygon title="17.5. Проверки в функции pointInPolygon." class="nav-link text-wrap d-inline-block w-100"> 17.5. Проверки в функции pointInPolygon. </a> </nav> <a href=#18-mashinnoe-obuchenie-i-statistika title="18. Машинное обучение и статистика." class="nav-link text-wrap d-inline-block w-100"> 18. Машинное обучение и статистика. </a> <nav id=toc-toc-18 class="nav flex-column pl-2"> <a href=#18-1-inkrementalnaia-klasterizatsiia-dannykh title="18.1. Инкрементальная кластеризация данных." class="nav-link text-wrap d-inline-block w-100"> 18.1. Инкрементальная кластеризация данных. </a> <a href=#18-2-agregatnye-funktsii-dlia-statisticheskikh-testov title="18.2. Агрегатные функции для статистических тестов." class="nav-link text-wrap d-inline-block w-100"> 18.2. Агрегатные функции для статистических тестов. </a> <a href=#18-3-infrastruktura-dlia-trenirovki-modelei-v-clickhouse title="18.3. Инфраструктура для тренировки моделей в ClickHouse." class="nav-link text-wrap d-inline-block w-100"> 18.3. Инфраструктура для тренировки моделей в ClickHouse. </a> </nav> <a href=#19-uluchshenie-raboty-klastera title="19. Улучшение работы кластера." class="nav-link text-wrap d-inline-block w-100"> 19. Улучшение работы кластера. </a> <nav id=toc-toc-19 class="nav flex-column pl-2"> <a href=#19-1-parallelnye-kvorumnye-vstavki-bez-linearizuemosti title="19.1. Параллельные кворумные вставки без линеаризуемости." class="nav-link text-wrap d-inline-block w-100"> 19.1. Параллельные кворумные вставки без линеаризуемости. </a> <a href=#19-2-podkliuchenie-etcd-ili-consul-kak-alternativy-zookeeper title="19.2. Подключение Etcd или Consul как альтернативы ZooKeeper." class="nav-link text-wrap d-inline-block w-100"> 19.2. Подключение Etcd или Consul как альтернативы ZooKeeper. </a> <a href=#19-3-podkliuchenie-yt-cypress-ili-ydb-kak-alternativy-zookeeper title="19.3. Подключение YT Cypress или YDB как альтернативы ZooKeeper." class="nav-link text-wrap d-inline-block w-100"> 19.3. Подключение YT Cypress или YDB как альтернативы ZooKeeper. </a> <a href=#19-4-internal-replication-auto title="19.4. internal_replication = 'auto'." class="nav-link text-wrap d-inline-block w-100"> 19.4. internal_replication = 'auto'. </a> <a href=#19-5-replitsiruemye-bazy-dannykh title="19.5. Реплицируемые базы данных." class="nav-link text-wrap d-inline-block w-100"> 19.5. Реплицируемые базы данных. </a> <a href=#19-6-odnovremennyi-vybor-kuskov-dlia-sliianiia-mnogimi-replikami-otkaz-ot-leader-election-v-zk title="19.6. Одновременный выбор кусков для слияния многими репликами, отказ от leader election в ZK." class="nav-link text-wrap d-inline-block w-100"> 19.6. Одновременный выбор кусков для слияния многими репликами, отказ от leader election в ZK. </a> <a href=#19-7-vozmozhnost-zapisi-dannykh-pri-nedostupnosti-zk-i-otkaz-ot-lineinogo-poriadka-kuskov-v-bolshinstve-sluchaev title="19.7. Возможность записи данных при недоступности ZK и отказ от линейного порядка кусков в большинстве случаев." class="nav-link text-wrap d-inline-block w-100"> 19.7. Возможность записи данных при недоступности ZK и отказ от линейного порядка кусков в большинстве случаев. </a> <a href=#19-8-otkaz-ot-khraneniia-v-zk-mnozhestva-kuskov-dlia-kazhdoi-repliki-otdelno title="19.8. Отказ от хранения в ZK множества кусков для каждой реплики отдельно." class="nav-link text-wrap d-inline-block w-100"> 19.8. Отказ от хранения в ZK множества кусков для каждой реплики отдельно. </a> <a href=#19-9-otkaz-ot-khraneniia-v-zk-loga-vstavok-i-merzhei-obmen-dannymi-o-kuskakh-napriamuiu title="19.9. Отказ от хранения в ZK лога вставок и мержей. Обмен данными о кусках напрямую." class="nav-link text-wrap d-inline-block w-100"> 19.9. Отказ от хранения в ZK лога вставок и мержей. Обмен данными о кусках напрямую. </a> <a href=#19-10-oblachnye-tablitsy title="19.10. Облачные таблицы." class="nav-link text-wrap d-inline-block w-100"> 19.10. Облачные таблицы. </a> </nav> <a href=#20-mutatsii-dannykh title="20. Мутации данных." class="nav-link text-wrap d-inline-block w-100"> 20. Мутации данных. </a> <nav id=toc-toc-20 class="nav flex-column pl-2"> <a href=#20-1-podderzhka-delete-putiom-zapominaniia-mnozhestva-zatronutykh-kuskov-i-kliuchei title="20.1. Поддержка DELETE путём запоминания множества затронутых кусков и ключей." class="nav-link text-wrap d-inline-block w-100"> 20.1. Поддержка DELETE путём запоминания множества затронутых кусков и ключей. </a> <a href=#20-2-podderzhka-delete-putiom-preobrazovaniia-mnozhestva-kliuchei-v-mnozhestvo-row-numbers-na-replike-stolbtsa-flagov-i-indeksa-po-diapazonam title="20.2. Поддержка DELETE путём преобразования множества ключей в множество row_numbers на реплике, столбца флагов и индекса по диапазонам." class="nav-link text-wrap d-inline-block w-100"> 20.2. Поддержка DELETE путём преобразования множества ключей в множество row_numbers на реплике, столбца флагов и индекса по диапазонам. </a> <a href=#20-3-podderzhka-lenivykh-delete-putiom-zapominaniia-vyrazhenii-i-preobrazovaniia-k-mnozhestvu-kliuchei-v-fone title="20.3. Поддержка ленивых DELETE путём запоминания выражений и преобразования к множеству ключей в фоне." class="nav-link text-wrap d-inline-block w-100"> 20.3. Поддержка ленивых DELETE путём запоминания выражений и преобразования к множеству ключей в фоне. </a> <a href=#20-4-podderzhka-update-s-pomoshchiu-preobrazovaniia-v-delete-i-vstavok title="20.4. Поддержка UPDATE с помощью преобразования в DELETE и вставок." class="nav-link text-wrap d-inline-block w-100"> 20.4. Поддержка UPDATE с помощью преобразования в DELETE и вставок. </a> </nav> <a href=#21-optimizatsii-proizvoditelnosti title="21. Оптимизации производительности." class="nav-link text-wrap d-inline-block w-100"> 21. Оптимизации производительности. </a> <nav id=toc-toc-21 class="nav flex-column pl-2"> <a href=#21-1-parallelnyi-parsing-formatov title="21.1. + Параллельный парсинг форматов." class="nav-link text-wrap d-inline-block w-100"> 21.1. + Параллельный парсинг форматов. </a> <a href=#21-2-parallelnoe-formatirovanie-formatov title="21.2. Параллельное форматирование форматов." class="nav-link text-wrap d-inline-block w-100"> 21.2. Параллельное форматирование форматов. </a> <a href=#21-3-ispravlenie-nizkoi-proizvoditelnosti-analiza-indeksa-v-sluchae-bolshogo-mnozhestva-v-sektsii-in title="21.3. Исправление низкой производительности анализа индекса в случае большого множества в секции IN." class="nav-link text-wrap d-inline-block w-100"> 21.3. Исправление низкой производительности анализа индекса в случае большого множества в секции IN. </a> <a href=#21-4-ispolzovanie-order-by-kliucha-dlia-optimizatsii-group-by-i-distinct title="21.4. Использование ORDER BY ключа для оптимизации GROUP BY и DISTINCT." class="nav-link text-wrap d-inline-block w-100"> 21.4. Использование ORDER BY ключа для оптимизации GROUP BY и DISTINCT. </a> <a href=#21-5-rasparallelivanie-insert-pri-insert-select-esli-eto-neobkhodimo title="21.5. Распараллеливание INSERT при INSERT SELECT, если это необходимо." class="nav-link text-wrap d-inline-block w-100"> 21.5. Распараллеливание INSERT при INSERT SELECT, если это необходимо. </a> <a href=#21-6-umenshenie-chisla-potokov-dlia-select-v-sluchae-trivialnogo-insert-select title="21.6. Уменьшение числа потоков для SELECT в случае тривиального INSERT SELECT." class="nav-link text-wrap d-inline-block w-100"> 21.6. Уменьшение числа потоков для SELECT в случае тривиального INSERT SELECT. </a> <a href=#21-7-kesh-rezultatov-zaprosov title="21.7. Кэш результатов запросов." class="nav-link text-wrap d-inline-block w-100"> 21.7. Кэш результатов запросов. </a> <a href=#21-8-vzaimnaia-integratsiia-allokatora-i-kesha title="21.8. Взаимная интеграция аллокатора и кэша." class="nav-link text-wrap d-inline-block w-100"> 21.8. Взаимная интеграция аллокатора и кэша. </a> <a href=#21-8-1-otdelnyi-allokator-dlia-keshei-s-aslr title="21.8.1. Отдельный аллокатор для кэшей с ASLR." class="nav-link text-wrap d-inline-block w-100"> 21.8.1. Отдельный аллокатор для кэшей с ASLR. </a> <a href=#21-9-ispravit-push-down-vyrazhenii-s-pomoshchiu-processors title="21.9. Исправить push-down выражений с помощью Processors." class="nav-link text-wrap d-inline-block w-100"> 21.9. Исправить push-down выражений с помощью Processors. </a> <a href=#21-10-uluchshenie-evristiki-prewhere title="21.10. + Улучшение эвристики PREWHERE." class="nav-link text-wrap d-inline-block w-100"> 21.10. + Улучшение эвристики PREWHERE. </a> <a href=#21-11-peephole-optimizatsii-zaprosov title="21.11. Peephole оптимизации запросов." class="nav-link text-wrap d-inline-block w-100"> 21.11. Peephole оптимизации запросов. </a> <a href=#21-12-algebraicheskie-optimizatsii-zaprosov title="21.12. Алгебраические оптимизации запросов." class="nav-link text-wrap d-inline-block w-100"> 21.12. Алгебраические оптимизации запросов. </a> <a href=#21-13-fusion-agregatnykh-funktsii title="21.13. Fusion агрегатных функций." class="nav-link text-wrap d-inline-block w-100"> 21.13. Fusion агрегатных функций. </a> <a href=#21-14-optimizatsiia-zaprosov-s-pomoshchiu-constraints title="21.14. Оптимизация запросов с помощью constraints." class="nav-link text-wrap d-inline-block w-100"> 21.14. Оптимизация запросов с помощью constraints. </a> <a href=#21-15-mnogostupenchatoe-chtenie-dannykh-vmesto-prewhere title="21.15. Многоступенчатое чтение данных вместо PREWHERE." class="nav-link text-wrap d-inline-block w-100"> 21.15. Многоступенчатое чтение данных вместо PREWHERE. </a> <a href=#21-16-optimizatsiia-group-by-s-bolshim-kolichestvom-agregatnykh-funktsii-putiom-vychisleniia-v-dva-prokhoda title="21.16. Оптимизация GROUP BY с большим количеством агрегатных функций путём вычисления в два прохода." class="nav-link text-wrap d-inline-block w-100"> 21.16. Оптимизация GROUP BY с большим количеством агрегатных функций путём вычисления в два прохода. </a> <a href=#21-17-optimizatsiia-group-by-pri-nalichii-order-by-po-tem-zhe-kliucham-s-limit title="21.17. Оптимизация GROUP BY при наличии ORDER BY по тем же ключам с LIMIT." class="nav-link text-wrap d-inline-block w-100"> 21.17. Оптимизация GROUP BY при наличии ORDER BY по тем же ключам с LIMIT. </a> <a href=#21-18-vnutrenniaia-parallelizatsiia-merzha-bolshikh-sostoianii-agregatnykh-funktsii title="21.18. Внутренняя параллелизация мержа больших состояний агрегатных функций." class="nav-link text-wrap d-inline-block w-100"> 21.18. Внутренняя параллелизация мержа больших состояний агрегатных функций. </a> <a href=#21-19-optimizatsiia-sortirovki title="21.19. Оптимизация сортировки." class="nav-link text-wrap d-inline-block w-100"> 21.19. Оптимизация сортировки. </a> <a href=#21-20-ispolzovanie-materializovannykh-predstavlenii-dlia-optimizatsii-zaprosov title="21.20. Использование материализованных представлений для оптимизации запросов." class="nav-link text-wrap d-inline-block w-100"> 21.20. Использование материализованных представлений для оптимизации запросов. </a> <a href=#21-21-chtenie-bolshikh-failov-s-pomoshchiu-mmap title="21.21. Чтение больших файлов с помощью mmap." class="nav-link text-wrap d-inline-block w-100"> 21.21. Чтение больших файлов с помощью mmap. </a> <a href=#21-22-userspace-page-cache title="21.22. Userspace page cache." class="nav-link text-wrap d-inline-block w-100"> 21.22. Userspace page cache. </a> <a href=#21-23-uskorenie-raboty-s-vtorichnymi-indeksami title="21.23. Ускорение работы с вторичными индексами." class="nav-link text-wrap d-inline-block w-100"> 21.23. Ускорение работы с вторичными индексами. </a> </nav> <a href=#22-dolgi-i-nedodelannye-vozmozhnosti title="22. Долги и недоделанные возможности." class="nav-link text-wrap d-inline-block w-100"> 22. Долги и недоделанные возможности. </a> <nav id=toc-toc-22 class="nav flex-column pl-2"> <a href=#22-1-ispravlenie-nerabotaiushchikh-taimautov-esli-ispolzuetsia-tls title="22.1. + Исправление неработающих таймаутов, если используется TLS." class="nav-link text-wrap d-inline-block w-100"> 22.1. + Исправление неработающих таймаутов, если используется TLS. </a> <a href=#22-2-ubrat-vozmozhnost-izmenit-nastroiki-v-native-protokole-v-sluchae-readonly title="22.2. Убрать возможность изменить настройки в native протоколе в случае readonly." class="nav-link text-wrap d-inline-block w-100"> 22.2. Убрать возможность изменить настройки в native протоколе в случае readonly. </a> <a href=#22-3-zashchita-ot-absurdno-zadannykh-polzovatelem-kodekov title="22.3. Защита от абсурдно заданных пользователем кодеков." class="nav-link text-wrap d-inline-block w-100"> 22.3. Защита от абсурдно заданных пользователем кодеков. </a> <a href=#22-4-ispravlenie-ostavshikhsia-deadlocks-v-tablichnykh-rwlock-akh title="22.4. Исправление оставшихся deadlocks в табличных RWLock-ах." class="nav-link text-wrap d-inline-block w-100"> 22.4. Исправление оставшихся deadlocks в табличных RWLock-ах. </a> <a href=#22-5-ispravlenie-redkikh-srabatyvanii-tsan-v-stress-testakh-v-ci title="22.5. Исправление редких срабатываний TSan в stress тестах в CI." class="nav-link text-wrap d-inline-block w-100"> 22.5. Исправление редких срабатываний TSan в stress тестах в CI. </a> <a href=#22-6-izmenenie-tolko-default-v-alter-table-mozhet-pomeniat-tip-stolbtsa title="22.6. Изменение только DEFAULT в ALTER TABLE может поменять тип столбца." class="nav-link text-wrap d-inline-block w-100"> 22.6. Изменение только DEFAULT в ALTER TABLE может поменять тип столбца. </a> <a href=#22-7-row-level-security-ne-rabotaet-v-sluchae-nalichiia-v-zaprose-in-podzaprosov title="22.7. Row-Level Security не работает в случае наличия в запросе IN подзапросов." class="nav-link text-wrap d-inline-block w-100"> 22.7. Row-Level Security не работает в случае наличия в запросе IN подзапросов. </a> <a href=#22-8-ispravit-deserializatsiiu-parametrov-dlia-parametrizovannykh-zaprosov title="22.8. Исправить десериализацию параметров для параметризованных запросов." class="nav-link text-wrap d-inline-block w-100"> 22.8. Исправить десериализацию параметров для параметризованных запросов. </a> <a href=#22-9-razobratsia-s-deserializatsiei-massivov-so-znacheniiami-po-umolchaniiu-v-protobuf-formate-v-sluchae-protobuf-3 title="22.9. Разобраться с десериализацией массивов со значениями по-умолчанию в Protobuf формате в случае protobuf 3." class="nav-link text-wrap d-inline-block w-100"> 22.9. Разобраться с десериализацией массивов со значениями по-умолчанию в Protobuf формате в случае protobuf 3. </a> <a href=#22-10-ispravlenie-drifta-pri-otslezhivanii-potrebleniia-pamiati-zaprosami title="22.10. Исправление дрифта при отслеживании потребления памяти запросами." class="nav-link text-wrap d-inline-block w-100"> 22.10. Исправление дрифта при отслеживании потребления памяти запросами. </a> <a href=#22-11-bolee-prostaia-ser-de-nastroek-zaprosov title="22.11. + Более простая ser/de настроек запросов." class="nav-link text-wrap d-inline-block w-100"> 22.11. + Более простая ser/de настроек запросов. </a> <a href=#22-12-ispravlenie-nizkoi-proizvoditelnosti-chteniia-iz-kafka title="22.12. + Исправление низкой производительности чтения из Kafka." class="nav-link text-wrap d-inline-block w-100"> 22.12. + Исправление низкой производительности чтения из Kafka. </a> <a href=#22-13-posmotret-pochemu-ne-rabotaiut-nekotorye-collations title="22.13. + Посмотреть, почему не работают некоторые collations." class="nav-link text-wrap d-inline-block w-100"> 22.13. + Посмотреть, почему не работают некоторые collations. </a> <a href=#22-14-posmotret-pochemu-ne-rabotaet-storageset-dlia-mergetree-tablits-pri-nekotorykh-usloviiakh title="22.14. Посмотреть, почему не работает StorageSet для MergeTree таблиц при некоторых условиях." class="nav-link text-wrap d-inline-block w-100"> 22.14. Посмотреть, почему не работает StorageSet для MergeTree таблиц при некоторых условиях. </a> <a href=#22-15-normalizatsiia-kommitov-v-kafka-i-idempotentnosti-operatsii title="22.15. Нормализация коммитов в Kafka и идемпотентности операций." class="nav-link text-wrap d-inline-block w-100"> 22.15. Нормализация коммитов в Kafka и идемпотентности операций. </a> <a href=#22-16-ispravlenie-nizkoi-proizvoditelnosti-kodeka-doubledelta title="22.16. Исправление низкой производительности кодека DoubleDelta." class="nav-link text-wrap d-inline-block w-100"> 22.16. Исправление низкой производительности кодека DoubleDelta. </a> <a href=#22-17-konsistentno-rabotaiushchii-populate-dlia-materializedview title="22.17. Консистентно работающий POPULATE для MaterializedView." class="nav-link text-wrap d-inline-block w-100"> 22.17. Консистентно работающий POPULATE для MaterializedView. </a> <a href=#22-18-ispravlenie-zametnogo-padeniia-proizvoditelnosti-formatov-posle-dobavleniia-domenov-tipov title="22.18. Исправление заметного падения производительности форматов после добавления доменов типов." class="nav-link text-wrap d-inline-block w-100"> 22.18. Исправление заметного падения производительности форматов после добавления доменов типов. </a> <a href=#22-19-odnovremennoe-ispolzovanie-sample-i-prewhere title="22.19. + Одновременное использование SAMPLE и PREWHERE." class="nav-link text-wrap d-inline-block w-100"> 22.19. + Одновременное использование SAMPLE и PREWHERE. </a> <a href=#22-20-nepravilnaia-rabota-prewhere-pri-nekotorykh-usloviiakh title="22.20. + Неправильная работа PREWHERE при некоторых условиях." class="nav-link text-wrap d-inline-block w-100"> 22.20. + Неправильная работа PREWHERE при некоторых условиях. </a> <a href=#22-21-nepravilnoe-povedenie-datetime-v-raione-nachala-unix-epoch title="22.21. Неправильное поведение DateTime в районе начала unix epoch." class="nav-link text-wrap d-inline-block w-100"> 22.21. Неправильное поведение DateTime в районе начала unix epoch. </a> <a href=#22-22-nullable-v-funktsii-transform-i-v-case-po-mnozhestvu-znachenii title="22.22. Nullable в функции transform и в CASE по множеству значений." class="nav-link text-wrap d-inline-block w-100"> 22.22. Nullable в функции transform и в CASE по множеству значений. </a> <a href=#22-23-pravilnaia-obrabotka-nullable-v-funktsiiakh-kotorye-kidaiut-iskliuchenie-na-default-znachenii-modulo-intdiv title="22.23. Правильная обработка Nullable в функциях, которые кидают исключение на default значении: modulo, intDiv." class="nav-link text-wrap d-inline-block w-100"> 22.23. Правильная обработка Nullable в функциях, которые кидают исключение на default значении: modulo, intDiv. </a> <a href=#22-24-izlishniaia-filtratsiia-odbc-connection-string title="22.24. Излишняя фильтрация ODBC connection string." class="nav-link text-wrap d-inline-block w-100"> 22.24. Излишняя фильтрация ODBC connection string. </a> <a href=#22-25-izbavitsia-ot-biblioteki-btrie title="22.25. Избавиться от библиотеки btrie." class="nav-link text-wrap d-inline-block w-100"> 22.25. Избавиться от библиотеки btrie. </a> <a href=#22-26-plokhaia-proizvoditelnost-quantiletdigest title="22.26. Плохая производительность quantileTDigest." class="nav-link text-wrap d-inline-block w-100"> 22.26. Плохая производительность quantileTDigest. </a> <a href=#22-27-proverit-neskolko-pr-kotorye-byli-zakryty-zhang2014-i-sundy-li title="22.27. Проверить несколько PR, которые были закрыты zhang2014 и sundy-li." class="nav-link text-wrap d-inline-block w-100"> 22.27. Проверить несколько PR, которые были закрыты zhang2014 и sundy-li. </a> <a href=#22-28-izuchit-i-ispravit-povedenie-raboty-s-kafka-pri-rebalansirovke title="22.28. Изучить и исправить поведение работы с Kafka при ребалансировке." class="nav-link text-wrap d-inline-block w-100"> 22.28. Изучить и исправить поведение работы с Kafka при ребалансировке. </a> <a href=#22-29-uiazvimost-ddl-dlia-slovarei-executable title="22.29. Уязвимость DDL для словарей executable." class="nav-link text-wrap d-inline-block w-100"> 22.29. Уязвимость DDL для словарей executable. </a> </nav> <a href=#23-default-festival title="23. Default Festival." class="nav-link text-wrap d-inline-block w-100"> 23. Default Festival. </a> <nav id=toc-toc-23 class="nav flex-column pl-2"> <a href=#23-1-vkliuchenie-minimalistic-part-header-v-zookeeper title="23.1. Включение minimalistic_part_header в ZooKeeper." class="nav-link text-wrap d-inline-block w-100"> 23.1. Включение minimalistic_part_header в ZooKeeper. </a> <a href=#23-2-vkliuchenie-distributed-aggregation-memory-efficient title="23.2. Включение distributed_aggregation_memory_efficient." class="nav-link text-wrap d-inline-block w-100"> 23.2. Включение distributed_aggregation_memory_efficient. </a> <a href=#23-3-vkliuchenie-min-bytes-to-external-sort-i-min-bytes-to-external-group-by title="23.3. Включение min_bytes_to_external_sort и min_bytes_to_external_group_by." class="nav-link text-wrap d-inline-block w-100"> 23.3. Включение min_bytes_to_external_sort и min_bytes_to_external_group_by. </a> <a href=#23-4-vkliuchenie-sinkhronnoi-zapisi-v-distributed-tablitsy-po-umolchaniiu title="23.4. Включение синхронной записи в Distributed таблицы по-умолчанию." class="nav-link text-wrap d-inline-block w-100"> 23.4. Включение синхронной записи в Distributed таблицы по-умолчанию. </a> <a href=#23-5-vkliuchenie-compile-expressions title="23.5. Включение compile_expressions." class="nav-link text-wrap d-inline-block w-100"> 23.5. Включение compile_expressions. </a> <a href=#23-6-vkliuchenie-uchiota-poriadka-stolbtsov-v-csv title="23.6. Включение учёта порядка столбцов в CSV." class="nav-link text-wrap d-inline-block w-100"> 23.6. Включение учёта порядка столбцов в CSV. </a> <a href=#23-7-vkliuchenie-null-as-default-v-csv title="23.7. Включение NULL as Default в CSV." class="nav-link text-wrap d-inline-block w-100"> 23.7. Включение NULL as Default в CSV. </a> <a href=#23-8-vkliuchenie-optimizatsii-values title="23.8. Включение оптимизации VALUES." class="nav-link text-wrap d-inline-block w-100"> 23.8. Включение оптимизации VALUES. </a> <a href=#23-9-vkliuchenie-processors title="23.9. Включение Processors." class="nav-link text-wrap d-inline-block w-100"> 23.9. Включение Processors. </a> <a href=#23-10-vkliuchenie-mlock-binarnika title="23.10. Включение mlock бинарника." class="nav-link text-wrap d-inline-block w-100"> 23.10. Включение mlock бинарника. </a> </nav> <a href=#24-eksperimentalnye-zadachi title="24. Экспериментальные задачи." class="nav-link text-wrap d-inline-block w-100"> 24. Экспериментальные задачи. </a> <nav id=toc-toc-24 class="nav flex-column pl-2"> <a href=#24-1-veb-interfeis-dlia-prosmotra-sostoianiia-klastera-i-profilirovaniia-zaprosov title="24.1. Веб-интерфейс для просмотра состояния кластера и профилирования запросов." class="nav-link text-wrap d-inline-block w-100"> 24.1. Веб-интерфейс для просмотра состояния кластера и профилирования запросов. </a> <a href=#24-2-eksperimentalnye-algoritmy-szhatiia title="24.2. Экспериментальные алгоритмы сжатия." class="nav-link text-wrap d-inline-block w-100"> 24.2. Экспериментальные алгоритмы сжатия. </a> <a href=#24-3-eksperimentalnye-kodeki title="24.3. Экспериментальные кодеки." class="nav-link text-wrap d-inline-block w-100"> 24.3. Экспериментальные кодеки. </a> <a href=#24-4-shifrovanie-v-clickhouse-na-urovne-kuskov-dannykh title="24.4. Шифрование в ClickHouse на уровне кусков данных." class="nav-link text-wrap d-inline-block w-100"> 24.4. Шифрование в ClickHouse на уровне кусков данных. </a> <a href=#24-5-podderzhka-funktsii-shifrovaniia-dlia-otdelnykh-znachenii title="24.5. Поддержка функций шифрования для отдельных значений." class="nav-link text-wrap d-inline-block w-100"> 24.5. Поддержка функций шифрования для отдельных значений. </a> <a href=#24-6-userspace-raid title="24.6. Userspace RAID." class="nav-link text-wrap d-inline-block w-100"> 24.6. Userspace RAID. </a> <a href=#24-7-veroiatnostnye-struktury-dannykh-dlia-filtratsii-po-podzaprosam title="24.7. Вероятностные структуры данных для фильтрации по подзапросам." class="nav-link text-wrap d-inline-block w-100"> 24.7. Вероятностные структуры данных для фильтрации по подзапросам. </a> <a href=#24-8-spetsializatsiia-vektorizovannogo-koda-dlia-avx-avx2-avx512-i-arm-neon title="24.8. Специализация векторизованного кода для AVX/AVX2/AVX512 и ARM NEON." class="nav-link text-wrap d-inline-block w-100"> 24.8. Специализация векторизованного кода для AVX/AVX2/AVX512 и ARM NEON. </a> <a href=#24-9-obshchii-podkhod-k-cpu-dispatching-v-fabrike-funktsii title="24.9. Общий подход к CPU dispatching в фабрике функций." class="nav-link text-wrap d-inline-block w-100"> 24.9. Общий подход к CPU dispatching в фабрике функций. </a> <a href=#24-10-podderzhka-tipov-half-bfloat16-unum title="24.10. Поддержка типов half/bfloat16/unum." class="nav-link text-wrap d-inline-block w-100"> 24.10. Поддержка типов half/bfloat16/unum. </a> <a href=#24-11-user-defined-functions title="24.11. User Defined Functions." class="nav-link text-wrap d-inline-block w-100"> 24.11. User Defined Functions. </a> <a href=#24-12-gpu-offloading title="24.12. GPU offloading." class="nav-link text-wrap d-inline-block w-100"> 24.12. GPU offloading. </a> <a href=#24-13-stream-zaprosy title="24.13. Stream запросы." class="nav-link text-wrap d-inline-block w-100"> 24.13. Stream запросы. </a> <a href=#24-14-window-funktsii title="24.14. Window функции." class="nav-link text-wrap d-inline-block w-100"> 24.14. Window функции. </a> <a href=#24-15-podderzhka-polustrukturirovannykh-dannykh title="24.15. Поддержка полуструктурированных данных." class="nav-link text-wrap d-inline-block w-100"> 24.15. Поддержка полуструктурированных данных. </a> <a href=#24-16-uluchshenie-evristiki-sliianii title="24.16. Улучшение эвристики слияний." class="nav-link text-wrap d-inline-block w-100"> 24.16. Улучшение эвристики слияний. </a> <a href=#24-17-eksperimentalnye-sposoby-uskoreniia-parallelnogo-group-by title="24.17. Экспериментальные способы ускорения параллельного GROUP BY." class="nav-link text-wrap d-inline-block w-100"> 24.17. Экспериментальные способы ускорения параллельного GROUP BY. </a> <a href=#24-18-ne-tcp-protokol-peredachi-failov-pri-replikatsii title="24.18. Не TCP протокол передачи файлов при репликации." class="nav-link text-wrap d-inline-block w-100"> 24.18. Не TCP протокол передачи файлов при репликации. </a> <a href=#24-19-promezhutochnoe-sostoianie-group-by-kak-struktura-dannykh-dlia-key-value-dostupa title="24.19. Промежуточное состояние GROUP BY как структура данных для key-value доступа." class="nav-link text-wrap d-inline-block w-100"> 24.19. Промежуточное состояние GROUP BY как структура данных для key-value доступа. </a> <a href=#24-20-short-circuit-vychisleniia-nekotorykh-vyrazhenii title="24.20. Short-circuit вычисления некоторых выражений." class="nav-link text-wrap d-inline-block w-100"> 24.20. Short-circuit вычисления некоторых выражений. </a> <a href=#24-21-realizatsiia-v-clickhouse-protokola-raspredelionnogo-konsensusa title="24.21. Реализация в ClickHouse протокола распределённого консенсуса." class="nav-link text-wrap d-inline-block w-100"> 24.21. Реализация в ClickHouse протокола распределённого консенсуса. </a> <a href=#24-22-vyvod-tipov-po-bloku-dannykh-vyvod-formata-dannykh-po-primeru title="24.22. Вывод типов по блоку данных. Вывод формата данных по примеру." class="nav-link text-wrap d-inline-block w-100"> 24.22. Вывод типов по блоку данных. Вывод формата данных по примеру. </a> <a href=#24-23-minimalnaia-podderzhka-tranzaktsii-dlia-mnozhestva-vstavok-chtenii title="24.23. Минимальная поддержка транзакций для множества вставок/чтений." class="nav-link text-wrap d-inline-block w-100"> 24.23. Минимальная поддержка транзакций для множества вставок/чтений. </a> <a href=#24-24-realizatsiia-algoritmov-differential-privacy title="24.24. Реализация алгоритмов differential privacy." class="nav-link text-wrap d-inline-block w-100"> 24.24. Реализация алгоритмов differential privacy. </a> <a href=#24-25-integratsiia-v-clickhouse-funktsionalnosti-obrabotki-http-user-agent title="24.25. Интеграция в ClickHouse функциональности обработки HTTP User Agent." class="nav-link text-wrap d-inline-block w-100"> 24.25. Интеграция в ClickHouse функциональности обработки HTTP User Agent. </a> <a href=#24-26-podderzhka-open-tracing-ili-analogov title="24.26. Поддержка open tracing или аналогов." class="nav-link text-wrap d-inline-block w-100"> 24.26. Поддержка open tracing или аналогов. </a> <a href=#24-27-realizatsiia-algoritmov-min-hash-sim-hash-dlia-nechiotkogo-poiska-poludublikatov title="24.27. Реализация алгоритмов min-hash, sim-hash для нечёткого поиска полудубликатов." class="nav-link text-wrap d-inline-block w-100"> 24.27. Реализация алгоритмов min-hash, sim-hash для нечёткого поиска полудубликатов. </a> <a href=#24-28-drugoi-sketch-dlia-kvantilei title="24.28. Другой sketch для квантилей." class="nav-link text-wrap d-inline-block w-100"> 24.28. Другой sketch для квантилей. </a> <a href=#24-29-podderzhka-arrow-flight title="24.29. Поддержка Arrow Flight." class="nav-link text-wrap d-inline-block w-100"> 24.29. Поддержка Arrow Flight. </a> <a href=#24-30-clickhouse-kak-grafovaia-subd title="24.30. ClickHouse как графовая СУБД." class="nav-link text-wrap d-inline-block w-100"> 24.30. ClickHouse как графовая СУБД. </a> <a href=#24-31-korellirovannye-podzaprosy title="24.31. Кореллированные подзапросы." class="nav-link text-wrap d-inline-block w-100"> 24.31. Кореллированные подзапросы. </a> <a href=#24-32-podderzhka-grpc title="24.32. Поддержка GRPC." class="nav-link text-wrap d-inline-block w-100"> 24.32. Поддержка GRPC. </a> </nav> <a href=#25-devrel title="25. DevRel" class="nav-link text-wrap d-inline-block w-100"> 25. DevRel </a> <nav id=toc-toc-25 class="nav flex-column pl-2"> <a href=#25-1-perevod-instruktsii-dlia-nachinaiushchikh-razrabotchikov title="25.1. + Перевод инструкции для начинающих разработчиков." class="nav-link text-wrap d-inline-block w-100"> 25.1. + Перевод инструкции для начинающих разработчиков. </a> <a href=#25-2-vychitka-i-vykladka-stati-pro-obfuskatsiiu-dannykh-na-angliiskom title="25.2. Вычитка и выкладка статьи про обфускацию данных на английском." class="nav-link text-wrap d-inline-block w-100"> 25.2. Вычитка и выкладка статьи про обфускацию данных на английском. </a> <a href=#25-3-podgotovka-stati-sekrety-optimizatsii-proizvoditelnosti-clickhouse title="25.3. Подготовка статьи " секреты оптимизации производительности clickhouse&quot;.&quot; class="nav-link text-wrap d-inline-block w-100"> 25.3. Подготовка статьи "Секреты оптимизации производительности ClickHouse". </a> <a href=#25-4-podgotovka-stati-profailer-zaprosov-trudnyi-put title="25.4. Подготовка статьи " профайлер запросов: трудный путь&quot;.&quot; class="nav-link text-wrap d-inline-block w-100"> 25.4. Подготовка статьи "Профайлер запросов: трудный путь". </a> <a href=#25-5-podgotovka-stati-testirovanie-clickhouse-kotoroe-my-zasluzhili title="25.5. Подготовка статьи " тестирование clickhouse, которое мы заслужили&quot;.&quot; class="nav-link text-wrap d-inline-block w-100"> 25.5. Подготовка статьи "Тестирование ClickHouse, которое мы заслужили". </a> <a href=#25-6-perevod-etikh-statei-na-angliiskii title="25.6. Перевод этих статей на английский." class="nav-link text-wrap d-inline-block w-100"> 25.6. Перевод этих статей на английский. </a> <a href=#25-7-perevod-stati-danily-kutenina-na-angliiskii title="25.7. Перевод статьи Данилы Кутенина на английский." class="nav-link text-wrap d-inline-block w-100"> 25.7. Перевод статьи Данилы Кутенина на английский. </a> <a href=#25-8-vystuplenie-keynote-na-bdtc title="25.8. + Выступление keynote на BDTC." class="nav-link text-wrap d-inline-block w-100"> 25.8. + Выступление keynote на BDTC. </a> <a href=#25-9-podgotovka-dokladchikov-khvostikao-ilezhankin-nikitamikhailov-akuzm-i-drugie title="25.9. Подготовка докладчиков: khvostikao, ilezhankin, nikitamikhailov, akuzm и другие." class="nav-link text-wrap d-inline-block w-100"> 25.9. Подготовка докладчиков: khvostikao, ilezhankin, nikitamikhailov, akuzm и другие. </a> <a href=#25-10-mitapy-v-rossii-i-belarusi-moskva-x2-mitap-dlia-razrabotchikov-ili-khakaton-sankt-peterburg-minsk-nizhnii-novgorod-ekaterinburg-novosibirsk-i-ili-akademgorodok-innopolis-ili-kazan title="25.10. Митапы в России и Беларуси: Москва x2 + митап для разработчиков или хакатон, Санкт-Петербург, Минск, Нижний Новгород, Екатеринбург, Новосибирск и/или Академгородок, Иннополис или Казань." class="nav-link text-wrap d-inline-block w-100"> 25.10. Митапы в России и Беларуси: Москва x2 + митап для разработчиков или хакатон, Санкт-Петербург, Минск, Нижний Новгород, Екатеринбург, Новосибирск и/или Академгородок, Иннополис или Казань. </a> <a href=#25-11-mitapy-zarubezhnye-vostok-ssha-niu-iork-vozmozhno-raleigh-vozmozhno-severo-zapad-sietl-kitai-pekin-snova-vozmozhno-mitap-dlia-razrabotchikov-ili-khakaton-london title="25.11. Митапы зарубежные: восток США (Нью Йорк, возможно Raleigh), возможно северо-запад (Сиэтл), Китай (Пекин снова, возможно митап для разработчиков или хакатон), Лондон." class="nav-link text-wrap d-inline-block w-100"> 25.11. Митапы зарубежные: восток США (Нью Йорк, возможно Raleigh), возможно северо-запад (Сиэтл), Китай (Пекин снова, возможно митап для разработчиков или хакатон), Лондон. </a> <a href=#25-12-statia-nauchnaia-pro-ustroistvo-khraneniia-dannykh-i-indeksov-ili-whitepaper-po-arkhitekture-est-variant-podat-na-vldb title="25.12. Статья " научная&quot; - про устройство хранения данных и индексов или whitepaper по архитектуре. есть вариант подать на vldb.&quot; class="nav-link text-wrap d-inline-block w-100"> 25.12. Статья "научная" - про устройство хранения данных и индексов или whitepaper по архитектуре. Есть вариант подать на VLDB. </a> <a href=#25-13-uchastie-vo-vsekh-meropriiatiiakh-iandeksa-kotorye-sviazany-s-razrabotkoi-bekenda-c-razrabotkoi-ili-s-bazami-dannykh-vozmozhno-uchastie-v-devrel-meropriiatiiakh title="25.13. Участие во всех мероприятиях Яндекса, которые связаны с разработкой бэкенда, C++ разработкой или с базами данных, возможно участие в DevRel мероприятиях." class="nav-link text-wrap d-inline-block w-100"> 25.13. Участие во всех мероприятиях Яндекса, которые связаны с разработкой бэкенда, C++ разработкой или с базами данных, возможно участие в DevRel мероприятиях. </a> <a href=#25-14-konferentsii-v-rossii-vse-highload-vozmozhno-codefest-dump-ili-uwdc-vozmozhno-c-russia title="25.14. Конференции в России: все HighLoad, возможно CodeFest, DUMP или UWDC, возможно C++ Russia." class="nav-link text-wrap d-inline-block w-100"> 25.14. Конференции в России: все HighLoad, возможно CodeFest, DUMP или UWDC, возможно C++ Russia. </a> <a href=#25-15-konferentsii-zarubezhnye-percona-dataops-popytka-popast-na-bolee-krupnye title="25.15. Конференции зарубежные: Percona, DataOps, попытка попасть на более крупные." class="nav-link text-wrap d-inline-block w-100"> 25.15. Конференции зарубежные: Percona, DataOps, попытка попасть на более крупные. </a> <a href=#25-16-sait-play-clickhouse title="25.16. Сайт play.clickhouse." class="nav-link text-wrap d-inline-block w-100"> 25.16. Сайт play.clickhouse. </a> <a href=#25-17-vzaimodeistvie-s-vuzami-vshe-urfu-ict-beijing title="25.17. Взаимодействие с ВУЗами: ВШЭ, УрФУ, ICT Beijing." class="nav-link text-wrap d-inline-block w-100"> 25.17. Взаимодействие с ВУЗами: ВШЭ, УрФУ, ICT Beijing. </a> <a href=#25-18-lektsiia-v-shad title="25.18. Лекция в ШАД." class="nav-link text-wrap d-inline-block w-100"> 25.18. Лекция в ШАД. </a> <a href=#25-19-uchastie-v-kurse-razrabotki-na-c-v-shad title="25.19. Участие в курсе разработки на C++ в ШАД." class="nav-link text-wrap d-inline-block w-100"> 25.19. Участие в курсе разработки на C++ в ШАД. </a> <a href=#25-20-eshchio-odno-sravnenie-proizvoditelnosti-analiticheskikh-subd title="25.20. Ещё одно сравнение производительности аналитических СУБД." class="nav-link text-wrap d-inline-block w-100"> 25.20. Ещё одно сравнение производительности аналитических СУБД. </a> <a href=#25-21-povtornoe-nagrazhdenie-kontribiutorov-v-kitae title="25.21. Повторное награждение контрибьюторов в Китае." class="nav-link text-wrap d-inline-block w-100"> 25.21. Повторное награждение контрибьюторов в Китае. </a> <a href=#25-22-on-site-pomoshch-s-clickhouse-kompaniiam-v-dni-riadom-s-meropriiatiiami title="25.22. On-site помощь с ClickHouse компаниям в дни рядом с мероприятиями." class="nav-link text-wrap d-inline-block w-100"> 25.22. On-site помощь с ClickHouse компаниям в дни рядом с мероприятиями. </a> <a href=#25-23-novyi-merch-dlia-clickhouse title="25.23. Новый мерч для ClickHouse." class="nav-link text-wrap d-inline-block w-100"> 25.23. Новый мерч для ClickHouse. </a> <a href=#25-24-konkursy-bughunter-ili-optimizatsii-koda-na-c title="25.24. Конкурсы bughunter или оптимизации кода на C++." class="nav-link text-wrap d-inline-block w-100"> 25.24. Конкурсы bughunter или оптимизации кода на C++. </a> <a href=#25-25-seminary-dlia-potentsialnykh-klientov-iandeks-oblaka title="25.25. Семинары для потенциальных клиентов Яндекс.Облака." class="nav-link text-wrap d-inline-block w-100"> 25.25. Семинары для потенциальных клиентов Яндекс.Облака. </a> <a href=#25-26-uchastie-v-gsoc title="25.26. Участие в GSoC." class="nav-link text-wrap d-inline-block w-100"> 25.26. Участие в GSoC. </a> <a href=#25-27-obnovit-sait-clickhouse title="25.27. Обновить сайт ClickHouse." class="nav-link text-wrap d-inline-block w-100"> 25.27. Обновить сайт ClickHouse. </a> </nav> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
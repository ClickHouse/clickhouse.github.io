<!DOCTYPE html><html lang=en data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>SELECT - ClickHouse Documentation</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="SELECT - ClickHouse  Documentation"><meta property=og:description content="SELECT Queries Syntax SELECT performs data retrieval. [WITH expr_list|(subquery)] SELECT [DISTINCT] expr_list [FROM [db."><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="SELECT - ClickHouse  Documentation"><meta name=description content="SELECT Queries Syntax SELECT performs data retrieval. [WITH expr_list|(subquery)] SELECT [DISTINCT] expr_list [FROM [db."><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> SELECT </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/en/sql_reference/statements/select.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/en.svg alt=English title=English width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/sql_reference/statements/select/ class="dropdown-item disabled"> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Version: <span class=text-light>latest</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/en/ class="dropdown-item disable"> <span class=text-light>latest</span> </a> <a href=/docs/v20.3/en/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/en/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/en/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/en/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/en/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/en/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/en/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/en/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/en/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/en/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/en/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../introduction/distinctive_features/ title="Distinctive Features" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distinctive Features</a> <a href=../../../introduction/features_considered_disadvantages/ title="ClickHouse Features that Can Be Considered Disadvantages" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Features that Can Be Considered Disadvantages</a> <a href=../../../introduction/performance/ title=Performance class="nav-link text-light text-wrap d-inline-block w-100 px-0">Performance</a> <a href=../../../introduction/history/ title=History class="nav-link text-light text-wrap d-inline-block w-100 px-0">History</a> <a href=../../../introduction/adopters/ title=Adopters class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adopters</a> </nav> </div> <a href=../../../ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/install/ title=Installation class="nav-link text-light text-wrap d-inline-block w-100 px-0">Installation</a> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title="New York Taxi Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Data</a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting_started/example_datasets/criteo/ title="Terabyte Click Logs from Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Terabyte Click Logs from Criteo</a> <a href=../../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../../getting_started/example_datasets/metrica/ title="Yandex.Metrica Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica Data</a> </nav> </div> <a href=../../../getting_started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../../getting_started/playground/ title=Playground class="nav-link text-light text-wrap d-inline-block w-100 px-0">Playground</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../interfaces/cli/ title="Command-Line Client" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Command-Line Client</a> <a href=../../../interfaces/tcp/ title="Native Interface (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Native Interface (TCP)</a> <a href=../../../interfaces/http/ title="HTTP Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP Interface</a> <a href=../../../interfaces/mysql/ title="MySQL Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL Interface</a> <a href=../../../interfaces/formats/ title="Input and Output Formats" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Input and Output Formats</a> <a href=../../../interfaces/jdbc/ title="JDBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC Driver</a> <a href=../../../interfaces/odbc/ title="ODBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC Driver</a> <a href=../../../interfaces/cpp/ title="C++ Client Library" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ Client Library</a> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../interfaces/third-party/client_libraries/ title="Client Libraries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Client Libraries</a> <a href=../../../interfaces/third-party/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../interfaces/third-party/gui/ title="Visual Interfaces" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Visual Interfaces</a> <a href=../../../interfaces/third-party/proxy/ title=Proxies class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxies</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table_engines/mergetree_family/replication/ title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a> <a href=../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a> <a href=../../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../engines/table_engines/log_family/log_family/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../engines/table_engines/log_family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../engines/table_engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../../engines/table_engines/special/external_data/ title="External data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External data</a> <a href=../../../engines/table_engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../../engines/table_engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../../engines/table_engines/special/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../engines/table_engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../engines/table_engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../engines/table_engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table_engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../../engines/table_engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database_engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../sql_reference/statements/select/ title=SELECT class="nav-link text-white active text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql_reference/statements/misc/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=../../../sql_reference/syntax/ title=Syntax class="nav-link text-light text-wrap d-inline-block w-100 px-0">Syntax</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/functions/arithmetic_functions/ title=Arithmetic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arithmetic</a> <a href=../../../sql_reference/functions/comparison_functions/ title=Comparison class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparison</a> <a href=../../../sql_reference/functions/logical_functions/ title=Logical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Logical</a> <a href=../../../sql_reference/functions/type_conversion_functions/ title="Type Conversion" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Type Conversion</a> <a href=../../../sql_reference/functions/date_time_functions/ title="Working with Dates and Times" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Dates and Times</a> <a href=../../../sql_reference/functions/string_functions/ title="Working with strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with strings</a> <a href=../../../sql_reference/functions/string_search_functions/ title="For Searching Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Searching Strings</a> <a href=../../../sql_reference/functions/string_replace_functions/ title="For Replacing in Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Replacing in Strings</a> <a href=../../../sql_reference/functions/conditional_functions/ title=Conditional class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conditional</a> <a href=../../../sql_reference/functions/math_functions/ title=Mathematical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mathematical</a> <a href=../../../sql_reference/functions/rounding_functions/ title=Rounding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rounding</a> <a href=../../../sql_reference/functions/array_functions/ title="Working with Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Arrays</a> <a href=../../../sql_reference/functions/splitting_merging_functions/ title="Splitting and Merging Strings and Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Splitting and Merging Strings and Arrays</a> <a href=../../../sql_reference/functions/bit_functions/ title=Bit class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bit</a> <a href=../../../sql_reference/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../../sql_reference/functions/hash_functions/ title=Hash class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a> <a href=../../../sql_reference/functions/random_functions/ title="Generating Pseudo-Random Numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generating Pseudo-Random Numbers</a> <a href=../../../sql_reference/functions/encoding_functions/ title=Encoding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encoding</a> <a href=../../../sql_reference/functions/uuid_functions/ title="Working with UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with UUID</a> <a href=../../../sql_reference/functions/url_functions/ title="Working with URLs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with URLs</a> <a href=../../../sql_reference/functions/ip_address_functions/ title="Working with IP Addresses" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with IP Addresses</a> <a href=../../../sql_reference/functions/json_functions/ title="Working with JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with JSON</a> <a href=../../../sql_reference/functions/higher_order_functions/ title=Higher-Order class="nav-link text-light text-wrap d-inline-block w-100 px-0">Higher-Order</a> <a href=../../../sql_reference/functions/ext_dict_functions/ title="Working with External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with External Dictionaries</a> <a href=../../../sql_reference/functions/ym_dict_functions/ title="Working with Yandex.Metrica Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Yandex.Metrica Dictionaries</a> <a href=../../../sql_reference/functions/in_functions/ title="Implementing the IN Operator" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implementing the IN Operator</a> <a href=../../../sql_reference/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../sql_reference/functions/geo/ title="Working with geographical coordinates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with geographical coordinates</a> <a href=../../../sql_reference/functions/functions_for_nulls/ title="Working with Nullable arguments" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Nullable arguments</a> <a href=../../../sql_reference/functions/machine_learning_functions/ title="Machine Learning Functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Machine Learning Functions</a> <a href=../../../sql_reference/functions/introspection/ title=Introspection class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introspection</a> <a href=../../../sql_reference/functions/other_functions/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/aggregate_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/aggregate_functions/reference/ title=Reference class="nav-link text-light text-wrap d-inline-block w-100 px-0">Reference</a> <a href=../../../sql_reference/aggregate_functions/combinators/ title="Aggregate function combinators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aggregate function combinators</a> <a href=../../../sql_reference/aggregate_functions/parametric_functions/ title="Parametric aggregate functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parametric aggregate functions</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/table_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../sql_reference/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../../sql_reference/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../../sql_reference/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql_reference/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="General Description" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Description</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Configuring an External Dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuring an External Dictionary</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Storing Dictionaries in Memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Storing Dictionaries in Memory</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Dictionary Updates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Updates</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Sources of External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources of External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Dictionary Key and Fields" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Key and Fields</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Hierarchical dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hierarchical dictionaries</a> </nav> </div> <a href=../../../sql_reference/dictionaries/internal_dicts/ title="Internal Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Internal Dictionaries</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../sql_reference/data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../../sql_reference/data_types/boolean/ title=Boolean class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean</a> <a href=../../../sql_reference/data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../../sql_reference/data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql_reference/data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../sql_reference/data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=#sidebar-sidebar-6-8-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-6-8-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=../../../sql_reference/data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-6-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-6-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../../sql_reference/data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../sql_reference/data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../../sql_reference/data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> </nav> </div> <a href=#sidebar-sidebar-6-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../sql_reference/data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../../sql_reference/operators/ title=Operators class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operators</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../guides/apply_catboost_model/ title="Applying CatBoost Models" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Applying CatBoost Models</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/requirements/ title=Requirements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requirements</a> <a href=../../../operations/monitoring/ title=Monitoring class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoring</a> <a href=../../../operations/troubleshooting/ title=Troubleshooting class="nav-link text-light text-wrap d-inline-block w-100 px-0">Troubleshooting</a> <a href=../../../operations/update/ title="ClickHouse Update" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Update</a> <a href=../../../operations/access_rights/ title="Access Rights" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Access Rights</a> <a href=../../../operations/backup/ title="Data Backup" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Backup</a> <a href=../../../operations/configuration_files/ title="Configuration Files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration Files</a> <a href=../../../operations/quotas/ title=Quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quotas</a> <a href=#sidebar-sidebar-8-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-10 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-8-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../operations/optimizing_performance/sampling_query_profiler/ title="Query Profiling" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Query Profiling</a> </nav> </div> <a href=../../../operations/system_tables/ title="System Tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">System Tables</a> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_configuration_parameters/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/server_configuration_parameters/settings/ title="Server Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server Settings</a> </nav> </div> <a href=../../../operations/performance_test/ title="Testing Hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing Hardware</a> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/settings/permissions_for_queries/ title="Permissions for Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permissions for Queries</a> <a href=../../../operations/settings/query_complexity/ title="Restrictions on Query Complexity" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions on Query Complexity</a> <a href=../../../operations/settings/settings/ title=Settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a> <a href=../../../operations/settings/settings_profiles/ title="Settings Profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings Profiles</a> <a href=../../../operations/settings/constraints_on_settings/ title="Constraints on Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Constraints on Settings</a> <a href=../../../operations/settings/settings_users/ title="User Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">User Settings</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-benchmark class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a> </nav> </div> <a href=../../../operations/tips/ title="Usage Recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage Recommendations</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/developer_instruction/ title="The Beginner ClickHouse Developer Instruction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">The Beginner ClickHouse Developer Instruction</a> <a href=../../../development/architecture/ title="Overview of ClickHouse Architecture" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview of ClickHouse Architecture</a> <a href=../../../development/browse_code/ title="Browse ClickHouse Source Code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Browse ClickHouse Source Code</a> <a href=../../../development/build/ title="How to Build ClickHouse on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux</a> <a href=../../../development/build_osx/ title="How to Build ClickHouse on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Mac OS X</a> <a href=../../../development/build_cross_osx/ title="How to Build ClickHouse on Linux for Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for Mac OS X</a> <a href=../../../development/build_cross_arm/ title="How to Build ClickHouse on Linux for AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for AARCH64 (ARM64)</a> <a href=../../../development/style/ title="How to Write C++ Code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Write C++ Code</a> <a href=../../../development/tests/ title="How to Run ClickHouse Tests" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Run ClickHouse Tests</a> <a href=../../../development/contrib/ title="Third-Party Libraries Used" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party Libraries Used</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../commercial/cloud/ title="ClickHouse Cloud Service Providers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Cloud Service Providers</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../whats_new/roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../../whats_new/security_changelog/ title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../faq/general/ title="General Questions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Questions</a> </nav> </div> <a href=../../../single/clickhouse_en.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=select-queries-syntax>SELECT Queries Syntax<a class=headerlink href=#select-queries-syntax title="Permanent link">&para;</a></h1> <p><code>SELECT</code> performs data retrieval.</p> <div class=codehilite><pre><span></span><code><span class=p>[</span><span class=k>WITH</span> <span class=n>expr_list</span><span class=o>|</span><span class=p>(</span><span class=n>subquery</span><span class=p>)]</span>
<span class=k>SELECT</span> <span class=p>[</span><span class=k>DISTINCT</span><span class=p>]</span> <span class=n>expr_list</span>
<span class=p>[</span><span class=k>FROM</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span> <span class=o>|</span> <span class=p>(</span><span class=n>subquery</span><span class=p>)</span> <span class=o>|</span> <span class=n>table_function</span><span class=p>]</span> <span class=p>[</span><span class=k>FINAL</span><span class=p>]</span>
<span class=p>[</span><span class=n>SAMPLE</span> <span class=n>sample_coeff</span><span class=p>]</span>
<span class=p>[</span><span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=p>...]</span>
<span class=p>[</span><span class=k>GLOBAL</span><span class=p>]</span> <span class=p>[</span><span class=k>ANY</span><span class=o>|</span><span class=k>ALL</span><span class=p>]</span> <span class=p>[</span><span class=k>INNER</span><span class=o>|</span><span class=k>LEFT</span><span class=o>|</span><span class=k>RIGHT</span><span class=o>|</span><span class=k>FULL</span><span class=o>|</span><span class=k>CROSS</span><span class=p>]</span> <span class=p>[</span><span class=k>OUTER</span><span class=p>]</span> <span class=k>JOIN</span> <span class=p>(</span><span class=n>subquery</span><span class=p>)</span><span class=o>|</span><span class=k>table</span> <span class=k>USING</span> <span class=n>columns_list</span>
<span class=p>[</span><span class=n>PREWHERE</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>WHERE</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>GROUP</span> <span class=k>BY</span> <span class=n>expr_list</span><span class=p>]</span> <span class=p>[</span><span class=k>WITH</span> <span class=n>TOTALS</span><span class=p>]</span>
<span class=p>[</span><span class=k>HAVING</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>ORDER</span> <span class=k>BY</span> <span class=n>expr_list</span><span class=p>]</span>
<span class=p>[</span><span class=k>LIMIT</span> <span class=p>[</span><span class=n>offset_value</span><span class=p>,</span> <span class=p>]</span><span class=n>n</span> <span class=k>BY</span> <span class=n>columns</span><span class=p>]</span>
<span class=p>[</span><span class=k>LIMIT</span> <span class=p>[</span><span class=n>n</span><span class=p>,</span> <span class=p>]</span><span class=n>m</span><span class=p>]</span>
<span class=p>[</span><span class=k>UNION</span> <span class=k>ALL</span> <span class=p>...]</span>
<span class=p>[</span><span class=k>INTO</span> <span class=n>OUTFILE</span> <span class=n>filename</span><span class=p>]</span>
<span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>All the clauses are optional, except for the required list of expressions immediately after SELECT.<br> The clauses below are described in almost the same order as in the query execution conveyor.</p> <p>If the query omits the <code>DISTINCT</code>, <code>GROUP BY</code> and <code>ORDER BY</code> clauses and the <code>IN</code> and <code>JOIN</code> subqueries, the query will be completely stream processed, using O(1) amount of RAM.<br> Otherwise, the query might consume a lot of RAM if the appropriate restrictions are not specified: <code>max_memory_usage</code>, <code>max_rows_to_group_by</code>, <code>max_rows_to_sort</code>, <code>max_rows_in_distinct</code>, <code>max_bytes_in_distinct</code>, <code>max_rows_in_set</code>, <code>max_bytes_in_set</code>, <code>max_rows_in_join</code>, <code>max_bytes_in_join</code>, <code>max_bytes_before_external_sort</code>, <code>max_bytes_before_external_group_by</code>. For more information, see the section “Settings”. It is possible to use external sorting (saving temporary tables to a disk) and external aggregation. <code>The system does not have "merge join"</code>.</p> <h3 id=with-clause>WITH Clause<a class=headerlink href=#with-clause title="Permanent link">&para;</a></h3> <p>This section provides support for Common Table Expressions (<a href=https://en.wikipedia.org/wiki/Hierarchical_and_recursive_queries_in_SQL rel="external nofollow noreferrer">CTE</a>), with some limitations:<br> 1. Recursive queries are not supported<br> 2. When subquery is used inside WITH section, it’s result should be scalar with exactly one row<br> 3. Expression’s results are not available in subqueries<br> Results of WITH clause expressions can be used inside SELECT clause.</p> <p>Example 1: Using constant expression as “variable”</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=s1>&#39;2019-08-01 15:23:00&#39;</span> <span class=k>as</span> <span class=n>ts_upper_bound</span>
<span class=k>SELECT</span> <span class=o>*</span>
<span class=k>FROM</span> <span class=n>hits</span>
<span class=k>WHERE</span>
    <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=n>ts_upper_bound</span><span class=p>)</span> <span class=k>AND</span>
    <span class=n>EventTime</span> <span class=o>&lt;=</span> <span class=n>ts_upper_bound</span>
</code></pre></div> <p>Example 2: Evicting sum(bytes) expression result from SELECT clause column list</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span> <span class=k>as</span> <span class=n>s</span>
<span class=k>SELECT</span>
    <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>s</span><span class=p>),</span>
    <span class=k>table</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>parts</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=k>table</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>s</span>
</code></pre></div> <p>Example 3: Using results of scalar subquery</p> <div class=codehilite><pre><span></span><code><span class=cm>/* this example would return TOP 10 of most huge tables */</span>
<span class=k>WITH</span>
    <span class=p>(</span>
        <span class=k>SELECT</span> <span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span>
        <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>parts</span>
        <span class=k>WHERE</span> <span class=n>active</span>
    <span class=p>)</span> <span class=k>AS</span> <span class=n>total_disk_usage</span>
<span class=k>SELECT</span>
    <span class=p>(</span><span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span> <span class=o>/</span> <span class=n>total_disk_usage</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span> <span class=k>AS</span> <span class=n>table_disk_usage</span><span class=p>,</span>
    <span class=k>table</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>parts</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=k>table</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>table_disk_usage</span> <span class=k>DESC</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <p>Example 4: Re-using expression in subquery<br> As a workaround for current limitation for expression usage in subqueries, you may duplicate it.</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>]</span> <span class=k>AS</span> <span class=n>hello</span>
<span class=k>SELECT</span>
    <span class=n>hello</span><span class=p>,</span>
    <span class=o>*</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>WITH</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>]</span> <span class=k>AS</span> <span class=n>hello</span>
    <span class=k>SELECT</span> <span class=n>hello</span>
<span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─hello─────┬─hello─────┐
│ [&#39;hello&#39;] │ [&#39;hello&#39;] │
└───────────┴───────────┘
</code></pre></div> <h3 id=select-from>FROM Clause<a class=headerlink href=#select-from title="Permanent link">&para;</a></h3> <p>If the FROM clause is omitted, data will be read from the <code>system.one</code> table.<br> The <code>system.one</code> table contains exactly one row (this table fulfills the same purpose as the DUAL table found in other DBMSs).</p> <p>The <code>FROM</code> clause specifies the source to read data from:</p> <ul> <li>Table</li> <li>Subquery</li> <li><a href=../../table_functions/ >Table function</a></li> </ul> <p><code>ARRAY JOIN</code> and the regular <code>JOIN</code> may also be included (see below).</p> <p>Instead of a table, the <code>SELECT</code> subquery may be specified in parenthesis.<br> In contrast to standard SQL, a synonym does not need to be specified after a subquery.</p> <p>To execute a query, all the columns listed in the query are extracted from the appropriate table. Any columns not needed for the external query are thrown out of the subqueries.<br> If a query does not list any columns (for example, <code>SELECT count() FROM t</code>), some column is extracted from the table anyway (the smallest one is preferred), in order to calculate the number of rows.</p> <h4 id=select-from-final>FINAL Modifier<a class=headerlink href=#select-from-final title="Permanent link">&para;</a></h4> <p>Applicable when selecting data from tables from the <a href=../../../engines/table_engines/mergetree_family/mergetree/ >MergeTree</a>-engine family other than <code>GraphiteMergeTree</code>. When <code>FINAL</code> is specified, ClickHouse fully merges the data before returning the result and thus performs all data transformations that happen during merges for the given table engine.</p> <p>Also supported for:<br> - <a href=../../../engines/table_engines/mergetree_family/replication/ >Replicated</a> versions of <code>MergeTree</code> engines.<br> - <a href=../../../engines/table_engines/special/view/ >View</a>, <a href=../../../engines/table_engines/special/buffer/ >Buffer</a>, <a href=../../../engines/table_engines/special/distributed/ >Distributed</a>, and <a href=../../../engines/table_engines/special/materializedview/ >MaterializedView</a> engines that operate over other engines, provided they were created over <code>MergeTree</code>-engine tables.</p> <p>Queries that use <code>FINAL</code> are executed not as fast as similar queries that don’t, because:</p> <ul> <li>Query is executed in a single thread and data is merged during query execution.</li> <li>Queries with <code>FINAL</code> read primary key columns in addition to the columns specified in the query.</li> </ul> <p>In most cases, avoid using <code>FINAL</code>.</p> <h3 id=select-sample-clause>SAMPLE Clause<a class=headerlink href=#select-sample-clause title="Permanent link">&para;</a></h3> <p>The <code>SAMPLE</code> clause allows for approximated query processing.</p> <p>When data sampling is enabled, the query is not performed on all the data, but only on a certain fraction of data (sample). For example, if you need to calculate statistics for all the visits, it is enough to execute the query on the 1/10 fraction of all the visits and then multiply the result by 10.</p> <p>Approximated query processing can be useful in the following cases:</p> <ul> <li>When you have strict timing requirements (like \&lt;100ms) but you can’t justify the cost of additional hardware resources to meet them.</li> <li>When your raw data is not accurate, so approximation doesn’t noticeably degrade the quality.</li> <li>Business requirements target approximate results (for cost-effectiveness, or in order to market exact results to premium users).</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>You can only use sampling with the tables in the <a href=../../../engines/table_engines/mergetree_family/mergetree/ >MergeTree</a> family, and only if the sampling expression was specified during table creation (see <a href=../../../engines/table_engines/mergetree_family/mergetree/#table_engine-mergetree-creating-a-table>MergeTree engine</a>).</p> </div> <p>The features of data sampling are listed below:</p> <ul> <li>Data sampling is a deterministic mechanism. The result of the same <code>SELECT .. SAMPLE</code> query is always the same.</li> <li>Sampling works consistently for different tables. For tables with a single sampling key, a sample with the same coefficient always selects the same subset of possible data. For example, a sample of user IDs takes rows with the same subset of all the possible user IDs from different tables. This means that you can use the sample in subqueries in the <a href=#select-in-operators>IN</a> clause. Also, you can join samples using the <a href=#select-join>JOIN</a> clause.</li> <li>Sampling allows reading less data from a disk. Note that you must specify the sampling key correctly. For more information, see <a href=../../../engines/table_engines/mergetree_family/mergetree/#table_engine-mergetree-creating-a-table>Creating a MergeTree Table</a>.</li> </ul> <p>For the <code>SAMPLE</code> clause the following syntax is supported:</p> <table> <thead> <tr> <th>SAMPLE Clause Syntax</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>SAMPLE k</code></td> <td>Here <code>k</code> is the number from 0 to 1.The query is executed on <code>k</code> fraction of data. For example, <code>SAMPLE 0.1</code> runs the query on 10% of data. <a href=#select-sample-k>Read more</a></td> </tr> <tr> <td><code>SAMPLE n</code></td> <td>Here <code>n</code> is a sufficiently large integer.The query is executed on a sample of at least <code>n</code> rows (but not significantly more than this). For example, <code>SAMPLE 10000000</code> runs the query on a minimum of 10,000,000 rows. <a href=#select-sample-n>Read more</a></td> </tr> <tr> <td><code>SAMPLE k OFFSET m</code></td> <td>Here <code>k</code> and <code>m</code> are the numbers from 0 to 1.The query is executed on a sample of <code>k</code> fraction of the data. The data used for the sample is offset by <code>m</code> fraction. <a href=#select-sample-offset>Read more</a></td> </tr> </tbody> </table> <h4 id=select-sample-k>SAMPLE K<a class=headerlink href=#select-sample-k title="Permanent link">&para;</a></h4> <p>Here <code>k</code> is the number from 0 to 1 (both fractional and decimal notations are supported). For example, <code>SAMPLE 1/2</code> or <code>SAMPLE 0.5</code>.</p> <p>In a <code>SAMPLE k</code> clause, the sample is taken from the <code>k</code> fraction of data. The example is shown below:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>Title</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=o>*</span> <span class=mi>10</span> <span class=k>AS</span> <span class=n>PageViews</span>
<span class=k>FROM</span> <span class=n>hits_distributed</span>
<span class=n>SAMPLE</span> <span class=mi>0</span><span class=p>.</span><span class=mi>1</span>
<span class=k>WHERE</span>
    <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>Title</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>PageViews</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>1000</span>
</code></pre></div> <p>In this example, the query is executed on a sample from 0.1 (10%) of data. Values of aggregate functions are not corrected automatically, so to get an approximate result, the value <code>count()</code> is manually multiplied by 10.</p> <h4 id=select-sample-n>SAMPLE N<a class=headerlink href=#select-sample-n title="Permanent link">&para;</a></h4> <p>Here <code>n</code> is a sufficiently large integer. For example, <code>SAMPLE 10000000</code>.</p> <p>In this case, the query is executed on a sample of at least <code>n</code> rows (but not significantly more than this). For example, <code>SAMPLE 10000000</code> runs the query on a minimum of 10,000,000 rows.</p> <p>Since the minimum unit for data reading is one granule (its size is set by the <code>index_granularity</code> setting), it makes sense to set a sample that is much larger than the size of the granule.</p> <p>When using the <code>SAMPLE n</code> clause, you don’t know which relative percent of data was processed. So you don’t know the coefficient the aggregate functions should be multiplied by. Use the <code>_sample_factor</code> virtual column to get the approximate result.</p> <p>The <code>_sample_factor</code> column contains relative coefficients that are calculated dynamically. This column is created automatically when you <a href=../../../engines/table_engines/mergetree_family/mergetree/#table_engine-mergetree-creating-a-table>create</a> a table with the specified sampling key. The usage examples of the <code>_sample_factor</code> column are shown below.</p> <p>Let’s consider the table <code>visits</code>, which contains the statistics about site visits. The first example shows how to calculate the number of page views:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>sum</span><span class=p>(</span><span class=n>PageViews</span> <span class=o>*</span> <span class=n>_sample_factor</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>visits</span>
<span class=n>SAMPLE</span> <span class=mi>10000000</span>
</code></pre></div> <p>The next example shows how to calculate the total number of visits:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>sum</span><span class=p>(</span><span class=n>_sample_factor</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>visits</span>
<span class=n>SAMPLE</span> <span class=mi>10000000</span>
</code></pre></div> <p>The example below shows how to calculate the average session duration. Note that you don’t need to use the relative coefficient to calculate the average values.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>avg</span><span class=p>(</span><span class=n>Duration</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>visits</span>
<span class=n>SAMPLE</span> <span class=mi>10000000</span>
</code></pre></div> <h4 id=select-sample-offset>SAMPLE K OFFSET M<a class=headerlink href=#select-sample-offset title="Permanent link">&para;</a></h4> <p>Here <code>k</code> and <code>m</code> are numbers from 0 to 1. Examples are shown below.</p> <p><strong>Example 1</strong></p> <div class=codehilite><pre><span></span><code><span class=n>SAMPLE</span> <span class=mi>1</span><span class=o>/</span><span class=mi>10</span>
</code></pre></div> <p>In this example, the sample is 1/10th of all data:</p> <p><code>[++------------]</code></p> <p><strong>Example 2</strong></p> <div class=codehilite><pre><span></span><code><span class=n>SAMPLE</span> <span class=mi>1</span><span class=o>/</span><span class=mi>10</span> <span class=k>OFFSET</span> <span class=mi>1</span><span class=o>/</span><span class=mi>2</span>
</code></pre></div> <p>Here, a sample of 10% is taken from the second half of the data.</p> <p><code>[------++------]</code></p> <h3 id=select-array-join-clause>ARRAY JOIN Clause<a class=headerlink href=#select-array-join-clause title="Permanent link">&para;</a></h3> <p>Allows executing <code>JOIN</code> with an array or nested data structure. The intent is similar to the <a href=../../functions/array_join/#functions_arrayjoin>arrayJoin</a> function, but its functionality is broader.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>&lt;</span><span class=n>expr_list</span><span class=o>&gt;</span>
<span class=k>FROM</span> <span class=o>&lt;</span><span class=n>left_subquery</span><span class=o>&gt;</span>
<span class=p>[</span><span class=k>LEFT</span><span class=p>]</span> <span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=o>&lt;</span><span class=nb>array</span><span class=o>&gt;</span>
<span class=p>[</span><span class=k>WHERE</span><span class=o>|</span><span class=n>PREWHERE</span> <span class=o>&lt;</span><span class=n>expr</span><span class=o>&gt;</span><span class=p>]</span>
<span class=p>...</span>
</code></pre></div> <p>You can specify only a single <code>ARRAY JOIN</code> clause in a query.</p> <p>The query execution order is optimized when running <code>ARRAY JOIN</code>. Although <code>ARRAY JOIN</code> must always be specified before the <code>WHERE/PREWHERE</code> clause, it can be performed either before <code>WHERE/PREWHERE</code> (if the result is needed in this clause), or after completing it (to reduce the volume of calculations). The processing order is controlled by the query optimizer.</p> <p>Supported types of <code>ARRAY JOIN</code> are listed below:</p> <ul> <li><code>ARRAY JOIN</code> - In this case, empty arrays are not included in the result of <code>JOIN</code>.</li> <li><code>LEFT ARRAY JOIN</code> - The result of <code>JOIN</code> contains rows with empty arrays. The value for an empty array is set to the default value for the array element type (usually 0, empty string or NULL).</li> </ul> <p>The examples below demonstrate the usage of the <code>ARRAY JOIN</code> and <code>LEFT ARRAY JOIN</code> clauses. Let’s create a table with an <a href=../../data_types/array/ >Array</a> type column and insert values into it:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>arrays_test</span>
<span class=p>(</span>
    <span class=n>s</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>arr</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt8</span><span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>arrays_test</span>
<span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;Hello&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>]),</span> <span class=p>(</span><span class=s1>&#39;World&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>]),</span> <span class=p>(</span><span class=s1>&#39;Goodbye&#39;</span><span class=p>,</span> <span class=p>[]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s───────────┬─arr─────┐
│ Hello       │ [1,2]   │
│ World       │ [3,4,5] │
│ Goodbye     │ []      │
└─────────────┴─────────┘
</code></pre></div> <p>The example below uses the <code>ARRAY JOIN</code> clause:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─arr─┐
│ Hello │   1 │
│ Hello │   2 │
│ World │   3 │
│ World │   4 │
│ World │   5 │
└───────┴─────┘
</code></pre></div> <p>The next example uses the <code>LEFT ARRAY JOIN</code> clause:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=k>LEFT</span> <span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s───────────┬─arr─┐
│ Hello       │   1 │
│ Hello       │   2 │
│ World       │   3 │
│ World       │   4 │
│ World       │   5 │
│ Goodbye     │   0 │
└─────────────┴─────┘
</code></pre></div> <h4 id=using-aliases>Using Aliases<a class=headerlink href=#using-aliases title="Permanent link">&para;</a></h4> <p>An alias can be specified for an array in the <code>ARRAY JOIN</code> clause. In this case, an array item can be accessed by this alias, but the array itself is accessed by the original name. Example:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span><span class=p>,</span> <span class=n>a</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span> <span class=k>AS</span> <span class=n>a</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─arr─────┬─a─┐
│ Hello │ [1,2]   │ 1 │
│ Hello │ [1,2]   │ 2 │
│ World │ [3,4,5] │ 3 │
│ World │ [3,4,5] │ 4 │
│ World │ [3,4,5] │ 5 │
└───────┴─────────┴───┘
</code></pre></div> <p>Using aliases, you can perform <code>ARRAY JOIN</code> with an external array. For example:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr_external</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span> <span class=k>AS</span> <span class=n>arr_external</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s───────────┬─arr_external─┐
│ Hello       │            1 │
│ Hello       │            2 │
│ Hello       │            3 │
│ World       │            1 │
│ World       │            2 │
│ World       │            3 │
│ Goodbye     │            1 │
│ Goodbye     │            2 │
│ Goodbye     │            3 │
└─────────────┴──────────────┘
</code></pre></div> <p>Multiple arrays can be comma-separated in the <code>ARRAY JOIN</code> clause. In this case, <code>JOIN</code> is performed with them simultaneously (the direct sum, not the cartesian product). Note that all the arrays must have the same size. Example:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>num</span><span class=p>,</span> <span class=n>mapped</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span><span class=p>,</span> <span class=n>arrayMap</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>arr</span><span class=p>)</span> <span class=k>AS</span> <span class=n>mapped</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─arr─────┬─a─┬─num─┬─mapped─┐
│ Hello │ [1,2]   │ 1 │   1 │      2 │
│ Hello │ [1,2]   │ 2 │   2 │      3 │
│ World │ [3,4,5] │ 3 │   1 │      4 │
│ World │ [3,4,5] │ 4 │   2 │      5 │
│ World │ [3,4,5] │ 5 │   3 │      6 │
└───────┴─────────┴───┴─────┴────────┘
</code></pre></div> <p>The example below uses the <a href=../../functions/array_functions/#array_functions-arrayenumerate>arrayEnumerate</a> function:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>num</span><span class=p>,</span> <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─arr─────┬─a─┬─num─┬─arrayEnumerate(arr)─┐
│ Hello │ [1,2]   │ 1 │   1 │ [1,2]               │
│ Hello │ [1,2]   │ 2 │   2 │ [1,2]               │
│ World │ [3,4,5] │ 3 │   1 │ [1,2,3]             │
│ World │ [3,4,5] │ 4 │   2 │ [1,2,3]             │
│ World │ [3,4,5] │ 5 │   3 │ [1,2,3]             │
└───────┴─────────┴───┴─────┴─────────────────────┘
</code></pre></div> <h4 id=array-join-with-nested-data-structure>ARRAY JOIN With Nested Data Structure<a class=headerlink href=#array-join-with-nested-data-structure title="Permanent link">&para;</a></h4> <p><code>ARRAY</code>JOIN`` also works with <a href=../../data_types/nested_data_structures/nested/ >nested data structures</a>. Example:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>nested_test</span>
<span class=p>(</span>
    <span class=n>s</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>nest</span> <span class=n>Nested</span><span class=p>(</span>
    <span class=n>x</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=n>y</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>nested_test</span>
<span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;Hello&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span><span class=mi>20</span><span class=p>]),</span> <span class=p>(</span><span class=s1>&#39;World&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>30</span><span class=p>,</span><span class=mi>40</span><span class=p>,</span><span class=mi>50</span><span class=p>]),</span> <span class=p>(</span><span class=s1>&#39;Goodbye&#39;</span><span class=p>,</span> <span class=p>[],</span> <span class=p>[]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s───────┬─nest.x──┬─nest.y─────┐
│ Hello   │ [1,2]   │ [10,20]    │
│ World   │ [3,4,5] │ [30,40,50] │
│ Goodbye │ []      │ []         │
└─────────┴─────────┴────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>nest</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─nest.x─┬─nest.y─┐
│ Hello │      1 │     10 │
│ Hello │      2 │     20 │
│ World │      3 │     30 │
│ World │      4 │     40 │
│ World │      5 │     50 │
└───────┴────────┴────────┘
</code></pre></div> <p>When specifying names of nested data structures in <code>ARRAY JOIN</code>, the meaning is the same as <code>ARRAY JOIN</code> with all the array elements that it consists of. Examples are listed below:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─nest.x─┬─nest.y─┐
│ Hello │      1 │     10 │
│ Hello │      2 │     20 │
│ World │      3 │     30 │
│ World │      4 │     40 │
│ World │      5 │     50 │
└───────┴────────┴────────┘
</code></pre></div> <p>This variation also makes sense:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─nest.x─┬─nest.y─────┐
│ Hello │      1 │ [10,20]    │
│ Hello │      2 │ [10,20]    │
│ World │      3 │ [30,40,50] │
│ World │      4 │ [30,40,50] │
│ World │      5 │ [30,40,50] │
└───────┴────────┴────────────┘
</code></pre></div> <p>An alias may be used for a nested data structure, in order to select either the <code>JOIN</code> result or the source array. Example:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>n</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>n</span><span class=p>.</span><span class=n>y</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>nest</span> <span class=k>AS</span> <span class=n>n</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─n.x─┬─n.y─┬─nest.x──┬─nest.y─────┐
│ Hello │   1 │  10 │ [1,2]   │ [10,20]    │
│ Hello │   2 │  20 │ [1,2]   │ [10,20]    │
│ World │   3 │  30 │ [3,4,5] │ [30,40,50] │
│ World │   4 │  40 │ [3,4,5] │ [30,40,50] │
│ World │   5 │  50 │ [3,4,5] │ [30,40,50] │
└───────┴─────┴─────┴─────────┴────────────┘
</code></pre></div> <p>Example of using the <a href=../../functions/array_functions/#array_functions-arrayenumerate>arrayEnumerate</a> function:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>n</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>n</span><span class=p>.</span><span class=n>y</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span><span class=p>,</span> <span class=n>num</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>nest</span> <span class=k>AS</span> <span class=n>n</span><span class=p>,</span> <span class=n>arrayEnumerate</span><span class=p>(</span><span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─n.x─┬─n.y─┬─nest.x──┬─nest.y─────┬─num─┐
│ Hello │   1 │  10 │ [1,2]   │ [10,20]    │   1 │
│ Hello │   2 │  20 │ [1,2]   │ [10,20]    │   2 │
│ World │   3 │  30 │ [3,4,5] │ [30,40,50] │   1 │
│ World │   4 │  40 │ [3,4,5] │ [30,40,50] │   2 │
│ World │   5 │  50 │ [3,4,5] │ [30,40,50] │   3 │
└───────┴─────┴─────┴─────────┴────────────┴─────┘
</code></pre></div> <h3 id=select-join>JOIN Clause<a class=headerlink href=#select-join title="Permanent link">&para;</a></h3> <p>Joins the data in the normal <a href=https://en.wikipedia.org/wiki/Join_(SQL) rel="external nofollow noreferrer">SQL JOIN</a> sense.</p> <div class="admonition info"> <p class=admonition-title>Note</p> <p>Not related to <a href=#select-array-join-clause>ARRAY JOIN</a>.</p> </div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>&lt;</span><span class=n>expr_list</span><span class=o>&gt;</span>
<span class=k>FROM</span> <span class=o>&lt;</span><span class=n>left_subquery</span><span class=o>&gt;</span>
<span class=p>[</span><span class=k>GLOBAL</span><span class=p>]</span> <span class=p>[</span><span class=k>ANY</span><span class=o>|</span><span class=k>ALL</span><span class=p>]</span> <span class=p>[</span><span class=k>INNER</span><span class=o>|</span><span class=k>LEFT</span><span class=o>|</span><span class=k>RIGHT</span><span class=o>|</span><span class=k>FULL</span><span class=o>|</span><span class=k>CROSS</span><span class=p>]</span> <span class=p>[</span><span class=k>OUTER</span><span class=p>]</span> <span class=k>JOIN</span> <span class=o>&lt;</span><span class=n>right_subquery</span><span class=o>&gt;</span>
<span class=p>(</span><span class=k>ON</span> <span class=o>&lt;</span><span class=n>expr_list</span><span class=o>&gt;</span><span class=p>)</span><span class=o>|</span><span class=p>(</span><span class=k>USING</span> <span class=o>&lt;</span><span class=n>column_list</span><span class=o>&gt;</span><span class=p>)</span> <span class=p>...</span>
</code></pre></div> <p>The table names can be specified instead of <code>&lt;left_subquery&gt;</code> and <code>&lt;right_subquery&gt;</code>. This is equivalent to the <code>SELECT * FROM table</code> subquery, except in a special case when the table has the <a href=../../../engines/table_engines/special/join/ >Join</a> engine – an array prepared for joining.</p> <h4 id=select-join-types>Supported Types Of <code>JOIN</code><a class=headerlink href=#select-join-types title="Permanent link">&para;</a></h4> <ul> <li><code>INNER JOIN</code> (or <code>JOIN</code>)</li> <li><code>LEFT JOIN</code> (or <code>LEFT OUTER JOIN</code>)</li> <li><code>RIGHT JOIN</code> (or <code>RIGHT OUTER JOIN</code>)</li> <li><code>FULL JOIN</code> (or <code>FULL OUTER JOIN</code>)</li> <li><code>CROSS JOIN</code> (or <code>,</code> )</li> </ul> <p>See the standard <a href=https://en.wikipedia.org/wiki/Join_(SQL) rel="external nofollow noreferrer">SQL JOIN</a> description.</p> <h4 id=multiple-join>Multiple JOIN<a class=headerlink href=#multiple-join title="Permanent link">&para;</a></h4> <p>Performing queries, ClickHouse rewrites multi-table joins into the sequence of two-table joins. For example, if there are four tables for join ClickHouse joins the first and the second, then joins the result with the third table, and at the last step, it joins the fourth one.</p> <p>If a query contains the <code>WHERE</code> clause, ClickHouse tries to pushdown filters from this clause through the intermediate join. If it cannot apply the filter to each intermediate join, ClickHouse applies the filters after all joins are completed.</p> <p>We recommend the <code>JOIN ON</code> or <code>JOIN USING</code> syntax for creating queries. For example:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t1</span> <span class=k>JOIN</span> <span class=n>t2</span> <span class=k>ON</span> <span class=n>t1</span><span class=p>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>t2</span><span class=p>.</span><span class=n>a</span> <span class=k>JOIN</span> <span class=n>t3</span> <span class=k>ON</span> <span class=n>t1</span><span class=p>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>t3</span><span class=p>.</span><span class=n>a</span>
</code></pre></div> <p>You can use comma-separated lists of tables in the <code>FROM</code> clause. For example:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t1</span><span class=p>,</span> <span class=n>t2</span><span class=p>,</span> <span class=n>t3</span> <span class=k>WHERE</span> <span class=n>t1</span><span class=p>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>t2</span><span class=p>.</span><span class=n>a</span> <span class=k>AND</span> <span class=n>t1</span><span class=p>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>t3</span><span class=p>.</span><span class=n>a</span>
</code></pre></div> <p>Don’t mix these syntaxes.</p> <p>ClickHouse doesn’t directly support syntax with commas, so we don’t recommend using them. The algorithm tries to rewrite the query in terms of <code>CROSS JOIN</code> and <code>INNER JOIN</code> clauses and then proceeds to query processing. When rewriting the query, ClickHouse tries to optimize performance and memory consumption. By default, ClickHouse treats commas as an <code>INNER JOIN</code> clause and converts <code>INNER JOIN</code> to <code>CROSS JOIN</code> when the algorithm cannot guarantee that <code>INNER JOIN</code> returns the required data.</p> <h4 id=select-join-strictness>Strictness<a class=headerlink href=#select-join-strictness title="Permanent link">&para;</a></h4> <ul> <li><code>ALL</code> — If the right table has several matching rows, ClickHouse creates a <a href=https://en.wikipedia.org/wiki/Cartesian_product rel="external nofollow noreferrer">Cartesian product</a> from matching rows. This is the standard <code>JOIN</code> behavior in SQL.</li> <li><code>ANY</code> — If the right table has several matching rows, only the first one found is joined. If the right table has only one matching row, the results of queries with <code>ANY</code> and <code>ALL</code> keywords are the same.</li> <li><code>ASOF</code> — For joining sequences with a non-exact match. <code>ASOF JOIN</code> usage is described below.</li> </ul> <p><strong>ASOF JOIN Usage</strong></p> <p><code>ASOF JOIN</code> is useful when you need to join records that have no exact match.</p> <p>Tables for <code>ASOF JOIN</code> must have an ordered sequence column. This column cannot be alone in a table, and should be one of the data types: <code>UInt32</code>, <code>UInt64</code>, <code>Float32</code>, <code>Float64</code>, <code>Date</code>, and <code>DateTime</code>.</p> <p>Syntax <code>ASOF JOIN ... ON</code>:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>expressions_list</span>
<span class=k>FROM</span> <span class=n>table_1</span>
<span class=n>ASOF</span> <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>table_2</span>
<span class=k>ON</span> <span class=n>equi_cond</span> <span class=k>AND</span> <span class=n>closest_match_cond</span>
</code></pre></div> <p>You can use any number of equality conditions and exactly one closest match condition. For example, <code>SELECT count() FROM table_1 ASOF LEFT JOIN table_2 ON table_1.a == table_2.b AND table_2.t &lt;= table_1.t</code>.</p> <p>Conditions supported for the closest match: <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>.</p> <p>Syntax <code>ASOF JOIN ... USING</code>:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>expressions_list</span>
<span class=k>FROM</span> <span class=n>table_1</span>
<span class=n>ASOF</span> <span class=k>JOIN</span> <span class=n>table_2</span>
<span class=k>USING</span> <span class=p>(</span><span class=n>equi_column1</span><span class=p>,</span> <span class=p>...</span> <span class=n>equi_columnN</span><span class=p>,</span> <span class=n>asof_column</span><span class=p>)</span>
</code></pre></div> <p><code>ASOF JOIN</code> uses <code>equi_columnX</code> for joining on equality and <code>asof_column</code> for joining on the closest match with the <code>table_1.asof_column &gt;= table_2.asof_column</code> condition. The <code>asof_column</code> column always the last one in the <code>USING</code> clause.</p> <p>For example, consider the following tables:</p> <p>``` text<br> table_1 table_2</p> <p>event | ev_time | user_id event | ev_time | user_id</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/3166eab2dfc89323b9d756aeba6866381fd9c186 rel="external nofollow noreferrer" target=_blank class=text-reset>3166eab2df</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#with-clause title="WITH Clause" class="nav-link text-wrap d-inline-block w-100"> WITH Clause </a> <a href=#select-from title="FROM Clause" class="nav-link text-wrap d-inline-block w-100"> FROM Clause </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#select-from-final title="FINAL Modifier" class="nav-link text-wrap d-inline-block w-100"> FINAL Modifier </a> </nav> <a href=#select-sample-clause title="SAMPLE Clause" class="nav-link text-wrap d-inline-block w-100"> SAMPLE Clause </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#select-sample-k title="SAMPLE K" class="nav-link text-wrap d-inline-block w-100"> SAMPLE K </a> <a href=#select-sample-n title="SAMPLE N" class="nav-link text-wrap d-inline-block w-100"> SAMPLE N </a> <a href=#select-sample-offset title="SAMPLE K OFFSET M" class="nav-link text-wrap d-inline-block w-100"> SAMPLE K OFFSET M </a> </nav> <a href=#select-array-join-clause title="ARRAY JOIN Clause" class="nav-link text-wrap d-inline-block w-100"> ARRAY JOIN Clause </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#using-aliases title="Using Aliases" class="nav-link text-wrap d-inline-block w-100"> Using Aliases </a> <a href=#array-join-with-nested-data-structure title="ARRAY JOIN With Nested Data Structure" class="nav-link text-wrap d-inline-block w-100"> ARRAY JOIN With Nested Data Structure </a> </nav> <a href=#select-join title="JOIN Clause" class="nav-link text-wrap d-inline-block w-100"> JOIN Clause </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#select-join-types title="Supported Types Of JOIN" class="nav-link text-wrap d-inline-block w-100"> Supported Types Of JOIN </a> <a href=#multiple-join title="Multiple JOIN" class="nav-link text-wrap d-inline-block w-100"> Multiple JOIN </a> <a href=#select-join-strictness title=Strictness class="nav-link text-wrap d-inline-block w-100"> Strictness </a> </nav> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=en data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>2018 - ClickHouse Documentation</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="2018 - ClickHouse  Documentation"><meta property=og:description content="ClickHouse release 18.16 ClickHouse release 18.16.1, 2018-12-21 Bug fixes: Fixed an error that led to problems with upda"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="2018 - ClickHouse  Documentation"><meta name=description content="ClickHouse release 18.16 ClickHouse release 18.16.1, 2018-12-21 Bug fixes: Fixed an error that led to problems with upda"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> 2018 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/en/whats_new/changelog/2018.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/en.svg alt=English title=English width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/whats_new/changelog/2018/ class="dropdown-item disabled"> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/whats_new/changelog/2018/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Version: <span class=text-light>latest</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/en/ class="dropdown-item disable"> <span class=text-light>latest</span> </a> <a href=/docs/v20.3/en/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/en/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/en/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/en/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/en/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/en/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/en/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/en/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/en/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/en/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/en/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../introduction/distinctive_features/ title="Distinctive Features" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distinctive Features</a> <a href=../../../introduction/features_considered_disadvantages/ title="ClickHouse Features that Can Be Considered Disadvantages" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Features that Can Be Considered Disadvantages</a> <a href=../../../introduction/performance/ title=Performance class="nav-link text-light text-wrap d-inline-block w-100 px-0">Performance</a> <a href=../../../introduction/history/ title=History class="nav-link text-light text-wrap d-inline-block w-100 px-0">History</a> <a href=../../../introduction/adopters/ title=Adopters class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adopters</a> </nav> </div> <a href=../../../ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/install/ title=Installation class="nav-link text-light text-wrap d-inline-block w-100 px-0">Installation</a> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title="New York Taxi Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Data</a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting_started/example_datasets/criteo/ title="Terabyte Click Logs from Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Terabyte Click Logs from Criteo</a> <a href=../../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../../getting_started/example_datasets/metrica/ title="Yandex.Metrica Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica Data</a> </nav> </div> <a href=../../../getting_started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../../getting_started/playground/ title=Playground class="nav-link text-light text-wrap d-inline-block w-100 px-0">Playground</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../interfaces/cli/ title="Command-Line Client" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Command-Line Client</a> <a href=../../../interfaces/tcp/ title="Native Interface (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Native Interface (TCP)</a> <a href=../../../interfaces/http/ title="HTTP Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP Interface</a> <a href=../../../interfaces/mysql/ title="MySQL Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL Interface</a> <a href=../../../interfaces/formats/ title="Input and Output Formats" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Input and Output Formats</a> <a href=../../../interfaces/jdbc/ title="JDBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC Driver</a> <a href=../../../interfaces/odbc/ title="ODBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC Driver</a> <a href=../../../interfaces/cpp/ title="C++ Client Library" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ Client Library</a> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../interfaces/third-party/client_libraries/ title="Client Libraries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Client Libraries</a> <a href=../../../interfaces/third-party/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../interfaces/third-party/gui/ title="Visual Interfaces" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Visual Interfaces</a> <a href=../../../interfaces/third-party/proxy/ title=Proxies class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxies</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table_engines/mergetree_family/replication/ title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a> <a href=../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a> <a href=../../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../engines/table_engines/log_family/log_family/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../engines/table_engines/log_family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../engines/table_engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../../engines/table_engines/special/external_data/ title="External data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External data</a> <a href=../../../engines/table_engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../../engines/table_engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../../engines/table_engines/special/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../engines/table_engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../engines/table_engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../engines/table_engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table_engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../../engines/table_engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database_engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../sql_reference/statements/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql_reference/statements/misc/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=../../../sql_reference/syntax/ title=Syntax class="nav-link text-light text-wrap d-inline-block w-100 px-0">Syntax</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/functions/arithmetic_functions/ title=Arithmetic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arithmetic</a> <a href=../../../sql_reference/functions/comparison_functions/ title=Comparison class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparison</a> <a href=../../../sql_reference/functions/logical_functions/ title=Logical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Logical</a> <a href=../../../sql_reference/functions/type_conversion_functions/ title="Type Conversion" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Type Conversion</a> <a href=../../../sql_reference/functions/date_time_functions/ title="Working with Dates and Times" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Dates and Times</a> <a href=../../../sql_reference/functions/string_functions/ title="Working with strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with strings</a> <a href=../../../sql_reference/functions/string_search_functions/ title="For Searching Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Searching Strings</a> <a href=../../../sql_reference/functions/string_replace_functions/ title="For Replacing in Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Replacing in Strings</a> <a href=../../../sql_reference/functions/conditional_functions/ title=Conditional class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conditional</a> <a href=../../../sql_reference/functions/math_functions/ title=Mathematical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mathematical</a> <a href=../../../sql_reference/functions/rounding_functions/ title=Rounding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rounding</a> <a href=../../../sql_reference/functions/array_functions/ title="Working with Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Arrays</a> <a href=../../../sql_reference/functions/splitting_merging_functions/ title="Splitting and Merging Strings and Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Splitting and Merging Strings and Arrays</a> <a href=../../../sql_reference/functions/bit_functions/ title=Bit class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bit</a> <a href=../../../sql_reference/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../../sql_reference/functions/hash_functions/ title=Hash class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a> <a href=../../../sql_reference/functions/random_functions/ title="Generating Pseudo-Random Numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generating Pseudo-Random Numbers</a> <a href=../../../sql_reference/functions/encoding_functions/ title=Encoding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encoding</a> <a href=../../../sql_reference/functions/uuid_functions/ title="Working with UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with UUID</a> <a href=../../../sql_reference/functions/url_functions/ title="Working with URLs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with URLs</a> <a href=../../../sql_reference/functions/ip_address_functions/ title="Working with IP Addresses" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with IP Addresses</a> <a href=../../../sql_reference/functions/json_functions/ title="Working with JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with JSON</a> <a href=../../../sql_reference/functions/higher_order_functions/ title=Higher-Order class="nav-link text-light text-wrap d-inline-block w-100 px-0">Higher-Order</a> <a href=../../../sql_reference/functions/ext_dict_functions/ title="Working with External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with External Dictionaries</a> <a href=../../../sql_reference/functions/ym_dict_functions/ title="Working with Yandex.Metrica Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Yandex.Metrica Dictionaries</a> <a href=../../../sql_reference/functions/in_functions/ title="Implementing the IN Operator" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implementing the IN Operator</a> <a href=../../../sql_reference/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../sql_reference/functions/geo/ title="Working with geographical coordinates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with geographical coordinates</a> <a href=../../../sql_reference/functions/functions_for_nulls/ title="Working with Nullable arguments" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Nullable arguments</a> <a href=../../../sql_reference/functions/machine_learning_functions/ title="Machine Learning Functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Machine Learning Functions</a> <a href=../../../sql_reference/functions/introspection/ title=Introspection class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introspection</a> <a href=../../../sql_reference/functions/other_functions/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/aggregate_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/aggregate_functions/reference/ title=Reference class="nav-link text-light text-wrap d-inline-block w-100 px-0">Reference</a> <a href=../../../sql_reference/aggregate_functions/combinators/ title="Aggregate function combinators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aggregate function combinators</a> <a href=../../../sql_reference/aggregate_functions/parametric_functions/ title="Parametric aggregate functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parametric aggregate functions</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/table_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../sql_reference/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../../sql_reference/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../../sql_reference/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql_reference/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="General Description" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Description</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Configuring an External Dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuring an External Dictionary</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Storing Dictionaries in Memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Storing Dictionaries in Memory</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Dictionary Updates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Updates</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Sources of External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources of External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Dictionary Key and Fields" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Key and Fields</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Hierarchical dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hierarchical dictionaries</a> </nav> </div> <a href=../../../sql_reference/dictionaries/internal_dicts/ title="Internal Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Internal Dictionaries</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../sql_reference/data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../../sql_reference/data_types/boolean/ title=Boolean class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean</a> <a href=../../../sql_reference/data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../../sql_reference/data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql_reference/data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../sql_reference/data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=#sidebar-sidebar-6-8-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-6-8-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=../../../sql_reference/data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-6-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-6-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../../sql_reference/data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../sql_reference/data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../../sql_reference/data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> </nav> </div> <a href=#sidebar-sidebar-6-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../sql_reference/data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../../sql_reference/operators/ title=Operators class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operators</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../guides/apply_catboost_model/ title="Applying CatBoost Models" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Applying CatBoost Models</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/requirements/ title=Requirements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requirements</a> <a href=../../../operations/monitoring/ title=Monitoring class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoring</a> <a href=../../../operations/troubleshooting/ title=Troubleshooting class="nav-link text-light text-wrap d-inline-block w-100 px-0">Troubleshooting</a> <a href=../../../operations/update/ title="ClickHouse Update" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Update</a> <a href=../../../operations/access_rights/ title="Access Rights" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Access Rights</a> <a href=../../../operations/backup/ title="Data Backup" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Backup</a> <a href=../../../operations/configuration_files/ title="Configuration Files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration Files</a> <a href=../../../operations/quotas/ title=Quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quotas</a> <a href=#sidebar-sidebar-8-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-10 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-8-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../operations/optimizing_performance/sampling_query_profiler/ title="Query Profiling" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Query Profiling</a> </nav> </div> <a href=../../../operations/system_tables/ title="System Tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">System Tables</a> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_configuration_parameters/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/server_configuration_parameters/settings/ title="Server Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server Settings</a> </nav> </div> <a href=../../../operations/performance_test/ title="Testing Hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing Hardware</a> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/settings/permissions_for_queries/ title="Permissions for Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permissions for Queries</a> <a href=../../../operations/settings/query_complexity/ title="Restrictions on Query Complexity" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions on Query Complexity</a> <a href=../../../operations/settings/settings/ title=Settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a> <a href=../../../operations/settings/settings_profiles/ title="Settings Profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings Profiles</a> <a href=../../../operations/settings/constraints_on_settings/ title="Constraints on Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Constraints on Settings</a> <a href=../../../operations/settings/settings_users/ title="User Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">User Settings</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-benchmark class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a> </nav> </div> <a href=../../../operations/tips/ title="Usage Recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage Recommendations</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/developer_instruction/ title="The Beginner ClickHouse Developer Instruction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">The Beginner ClickHouse Developer Instruction</a> <a href=../../../development/architecture/ title="Overview of ClickHouse Architecture" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview of ClickHouse Architecture</a> <a href=../../../development/browse_code/ title="Browse ClickHouse Source Code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Browse ClickHouse Source Code</a> <a href=../../../development/build/ title="How to Build ClickHouse on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux</a> <a href=../../../development/build_osx/ title="How to Build ClickHouse on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Mac OS X</a> <a href=../../../development/build_cross_osx/ title="How to Build ClickHouse on Linux for Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for Mac OS X</a> <a href=../../../development/build_cross_arm/ title="How to Build ClickHouse on Linux for AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for AARCH64 (ARM64)</a> <a href=../../../development/style/ title="How to Write C++ Code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Write C++ Code</a> <a href=../../../development/tests/ title="How to Run ClickHouse Tests" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Run ClickHouse Tests</a> <a href=../../../development/contrib/ title="Third-Party Libraries Used" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party Libraries Used</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../commercial/cloud/ title="ClickHouse Cloud Service Providers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Cloud Service Providers</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats_new/changelog/2018/ title=2018 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../whats_new/roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../../whats_new/security_changelog/ title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../faq/general/ title="General Questions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Questions</a> </nav> </div> <a href=../../../single/clickhouse_en.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h2 id=clickhouse-release-18-16>ClickHouse release 18.16<a class=headerlink href=#clickhouse-release-18-16 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-16-1-2018-12-21>ClickHouse release 18.16.1, 2018-12-21<a class=headerlink href=#clickhouse-release-18-16-1-2018-12-21 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes>Bug fixes:<a class=headerlink href=#bug-fixes title="Permanent link">&para;</a></h4> <ul> <li>Fixed an error that led to problems with updating dictionaries with the ODBC source. <a href=https://github.com/ClickHouse/ClickHouse/issues/3825 rel="external nofollow noreferrer">#3825</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3829 rel="external nofollow noreferrer">#3829</a></li> <li>JIT compilation of aggregate functions now works with LowCardinality columns. <a href=https://github.com/ClickHouse/ClickHouse/issues/3838 rel="external nofollow noreferrer">#3838</a></li> </ul> <h4 id=improvements>Improvements:<a class=headerlink href=#improvements title="Permanent link">&para;</a></h4> <ul> <li>Added the <code>low_cardinality_allow_in_native_format</code> setting (enabled by default). When disabled, LowCardinality columns will be converted to ordinary columns for SELECT queries and ordinary columns will be expected for INSERT queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3879 rel="external nofollow noreferrer">#3879</a></li> </ul> <h4 id=build-improvements>Build improvements:<a class=headerlink href=#build-improvements title="Permanent link">&para;</a></h4> <ul> <li>Fixes for builds on macOS and ARM.</li> </ul> <h3 id=clickhouse-release-18-16-0-2018-12-14>ClickHouse release 18.16.0, 2018-12-14<a class=headerlink href=#clickhouse-release-18-16-0-2018-12-14 title="Permanent link">&para;</a></h3> <h4 id=new-features>New features:<a class=headerlink href=#new-features title="Permanent link">&para;</a></h4> <ul> <li><code>DEFAULT</code> expressions are evaluated for missing fields when loading data in semi-structured input formats (<code>JSONEachRow</code>, <code>TSKV</code>). The feature is enabled with the <code>insert_sample_with_metadata</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/3555 rel="external nofollow noreferrer">#3555</a></li> <li>The <code>ALTER TABLE</code> query now has the <code>MODIFY ORDER BY</code> action for changing the sorting key when adding or removing a table column. This is useful for tables in the <code>MergeTree</code> family that perform additional tasks when merging based on this sorting key, such as <code>SummingMergeTree</code>, <code>AggregatingMergeTree</code>, and so on. <a href=https://github.com/ClickHouse/ClickHouse/pull/3581 rel="external nofollow noreferrer">#3581</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3755 rel="external nofollow noreferrer">#3755</a></li> <li>For tables in the <code>MergeTree</code> family, now you can specify a different sorting key (<code>ORDER BY</code>) and index (<code>PRIMARY KEY</code>). The sorting key can be longer than the index. <a href=https://github.com/ClickHouse/ClickHouse/pull/3581 rel="external nofollow noreferrer">#3581</a></li> <li>Added the <code>hdfs</code> table function and the <code>HDFS</code> table engine for importing and exporting data to HDFS. <a href=https://github.com/ClickHouse/ClickHouse/pull/3617 rel="external nofollow noreferrer">chenxing-xc</a></li> <li>Added functions for working with base64: <code>base64Encode</code>, <code>base64Decode</code>, <code>tryBase64Decode</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3350 rel="external nofollow noreferrer">Alexander Krasheninnikov</a></li> <li>Now you can use a parameter to configure the precision of the <code>uniqCombined</code> aggregate function (select the number of HyperLogLog cells). <a href=https://github.com/ClickHouse/ClickHouse/pull/3406 rel="external nofollow noreferrer">#3406</a></li> <li>Added the <code>system.contributors</code> table that contains the names of everyone who made commits in ClickHouse. <a href=https://github.com/ClickHouse/ClickHouse/pull/3452 rel="external nofollow noreferrer">#3452</a></li> <li>Added the ability to omit the partition for the <code>ALTER TABLE ... FREEZE</code> query in order to back up all partitions at once. <a href=https://github.com/ClickHouse/ClickHouse/pull/3514 rel="external nofollow noreferrer">#3514</a></li> <li>Added <code>dictGet</code> and <code>dictGetOrDefault</code> functions that don’t require specifying the type of return value. The type is determined automatically from the dictionary description. <a href=https://github.com/ClickHouse/ClickHouse/pull/3564 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Now you can specify comments for a column in the table description and change it using <code>ALTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3377 rel="external nofollow noreferrer">#3377</a></li> <li>Reading is supported for <code>Join</code> type tables with simple keys. <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Now you can specify the options <code>join_use_nulls</code>, <code>max_rows_in_join</code>, <code>max_bytes_in_join</code>, and <code>join_overflow_mode</code> when creating a <code>Join</code> type table. <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Added the <code>joinGet</code> function that allows you to use a <code>Join</code> type table like a dictionary. <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Added the <code>partition_key</code>, <code>sorting_key</code>, <code>primary_key</code>, and <code>sampling_key</code> columns to the <code>system.tables</code> table in order to provide information about table keys. <a href=https://github.com/ClickHouse/ClickHouse/pull/3609 rel="external nofollow noreferrer">#3609</a></li> <li>Added the <code>is_in_partition_key</code>, <code>is_in_sorting_key</code>, <code>is_in_primary_key</code>, and <code>is_in_sampling_key</code> columns to the <code>system.columns</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/3609 rel="external nofollow noreferrer">#3609</a></li> <li>Added the <code>min_time</code> and <code>max_time</code> columns to the <code>system.parts</code> table. These columns are populated when the partitioning key is an expression consisting of <code>DateTime</code> columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/3800 rel="external nofollow noreferrer">Emmanuel Donin de Rosière</a></li> </ul> <h4 id=bug-fixes-1>Bug fixes:<a class=headerlink href=#bug-fixes-1 title="Permanent link">&para;</a></h4> <ul> <li>Fixes and performance improvements for the <code>LowCardinality</code> data type. <code>GROUP BY</code> using <code>LowCardinality(Nullable(...))</code>. Getting the values of <code>extremes</code>. Processing high-order functions. <code>LEFT ARRAY JOIN</code>. Distributed <code>GROUP BY</code>. Functions that return <code>Array</code>. Execution of <code>ORDER BY</code>. Writing to <code>Distributed</code> tables (nicelulu). Backward compatibility for <code>INSERT</code> queries from old clients that implement the <code>Native</code> protocol. Support for <code>LowCardinality</code> for <code>JOIN</code>. Improved performance when working in a single stream. <a href=https://github.com/ClickHouse/ClickHouse/pull/3823 rel="external nofollow noreferrer">#3823</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3803 rel="external nofollow noreferrer">#3803</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3799 rel="external nofollow noreferrer">#3799</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3769 rel="external nofollow noreferrer">#3769</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3744 rel="external nofollow noreferrer">#3744</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3681 rel="external nofollow noreferrer">#3681</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3651 rel="external nofollow noreferrer">#3651</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3649 rel="external nofollow noreferrer">#3649</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3641 rel="external nofollow noreferrer">#3641</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3632 rel="external nofollow noreferrer">#3632</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3568 rel="external nofollow noreferrer">#3568</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3523 rel="external nofollow noreferrer">#3523</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3518 rel="external nofollow noreferrer">#3518</a></li> <li>Fixed how the <code>select_sequential_consistency</code> option works. Previously, when this setting was enabled, an incomplete result was sometimes returned after beginning to write to a new partition. <a href=https://github.com/ClickHouse/ClickHouse/pull/2863 rel="external nofollow noreferrer">#2863</a></li> <li>Databases are correctly specified when executing DDL <code>ON CLUSTER</code> queries and <code>ALTER UPDATE/DELETE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3772 rel="external nofollow noreferrer">#3772</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3460 rel="external nofollow noreferrer">#3460</a></li> <li>Databases are correctly specified for subqueries inside a VIEW. <a href=https://github.com/ClickHouse/ClickHouse/pull/3521 rel="external nofollow noreferrer">#3521</a></li> <li>Fixed a bug in <code>PREWHERE</code> with <code>FINAL</code> for <code>VersionedCollapsingMergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/7167bfd7b365538f7a91c4307ad77e552ab4e8c1 rel="external nofollow noreferrer">7167bfd7</a></li> <li>Now you can use <code>KILL QUERY</code> to cancel queries that have not started yet because they are waiting for the table to be locked. <a href=https://github.com/ClickHouse/ClickHouse/pull/3517 rel="external nofollow noreferrer">#3517</a></li> <li>Corrected date and time calculations if the clocks were moved back at midnight (this happens in Iran, and happened in Moscow from 1981 to 1983). Previously, this led to the time being reset a day earlier than necessary, and also caused incorrect formatting of the date and time in text format. <a href=https://github.com/ClickHouse/ClickHouse/pull/3819 rel="external nofollow noreferrer">#3819</a></li> <li>Fixed bugs in some cases of <code>VIEW</code> and subqueries that omit the database. <a href=https://github.com/ClickHouse/ClickHouse/pull/3521 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed a race condition when simultaneously reading from a <code>MATERIALIZED VIEW</code> and deleting a <code>MATERIALIZED VIEW</code> due to not locking the internal <code>MATERIALIZED VIEW</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3404 rel="external nofollow noreferrer">#3404</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3694 rel="external nofollow noreferrer">#3694</a></li> <li>Fixed the error <code>Lock handler cannot be nullptr.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3689 rel="external nofollow noreferrer">#3689</a></li> <li>Fixed query processing when the <code>compile_expressions</code> option is enabled (it’s enabled by default). Nondeterministic constant expressions like the <code>now</code> function are no longer unfolded. <a href=https://github.com/ClickHouse/ClickHouse/pull/3457 rel="external nofollow noreferrer">#3457</a></li> <li>Fixed a crash when specifying a non-constant scale argument in <code>toDecimal32/64/128</code> functions.</li> <li>Fixed an error when trying to insert an array with <code>NULL</code> elements in the <code>Values</code> format into a column of type <code>Array</code> without <code>Nullable</code> (if <code>input_format_values_interpret_expressions</code> = 1). <a href=https://github.com/ClickHouse/ClickHouse/pull/3487 rel="external nofollow noreferrer">#3487</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3503 rel="external nofollow noreferrer">#3503</a></li> <li>Fixed continuous error logging in <code>DDLWorker</code> if ZooKeeper is not available. <a href=https://github.com/ClickHouse/ClickHouse/commit/8f50c620334988b28018213ec0092fe6423847e2 rel="external nofollow noreferrer">8f50c620</a></li> <li>Fixed the return type for <code>quantile*</code> functions from <code>Date</code> and <code>DateTime</code> types of arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/3580 rel="external nofollow noreferrer">#3580</a></li> <li>Fixed the <code>WITH</code> clause if it specifies a simple alias without expressions. <a href=https://github.com/ClickHouse/ClickHouse/pull/3570 rel="external nofollow noreferrer">#3570</a></li> <li>Fixed processing of queries with named sub-queries and qualified column names when <code>enable_optimize_predicate_expression</code> is enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/3588 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed the error <code>Attempt to attach to nullptr thread group</code> when working with materialized views. <a href=https://github.com/ClickHouse/ClickHouse/pull/3623 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>Fixed a crash when passing certain incorrect arguments to the <code>arrayReverse</code> function. <a href=https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871 rel="external nofollow noreferrer">73e3a7b6</a></li> <li>Fixed the buffer overflow in the <code>extractURLParameter</code> function. Improved performance. Added correct processing of strings containing zero bytes. <a href=https://github.com/ClickHouse/ClickHouse/commit/141e9799e49201d84ea8e951d1bed4fb6d3dacb5 rel="external nofollow noreferrer">141e9799</a></li> <li>Fixed buffer overflow in the <code>lowerUTF8</code> and <code>upperUTF8</code> functions. Removed the ability to execute these functions over <code>FixedString</code> type arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/3662 rel="external nofollow noreferrer">#3662</a></li> <li>Fixed a rare race condition when deleting <code>MergeTree</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3680 rel="external nofollow noreferrer">#3680</a></li> <li>Fixed a race condition when reading from <code>Buffer</code> tables and simultaneously performing <code>ALTER</code> or <code>DROP</code> on the target tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3719 rel="external nofollow noreferrer">#3719</a></li> <li>Fixed a segfault if the <code>max_temporary_non_const_columns</code> limit was exceeded. <a href=https://github.com/ClickHouse/ClickHouse/pull/3788 rel="external nofollow noreferrer">#3788</a></li> </ul> <h4 id=improvements-1>Improvements:<a class=headerlink href=#improvements-1 title="Permanent link">&para;</a></h4> <ul> <li>The server does not write the processed configuration files to the <code>/etc/clickhouse-server/</code> directory. Instead, it saves them in the <code>preprocessed_configs</code> directory inside <code>path</code>. This means that the <code>/etc/clickhouse-server/</code> directory doesn’t have write access for the <code>clickhouse</code> user, which improves security. <a href=https://github.com/ClickHouse/ClickHouse/pull/2443 rel="external nofollow noreferrer">#2443</a></li> <li>The <code>min_merge_bytes_to_use_direct_io</code> option is set to 10 GiB by default. A merge that forms large parts of tables from the MergeTree family will be performed in <code>O_DIRECT</code> mode, which prevents excessive page cache eviction. <a href=https://github.com/ClickHouse/ClickHouse/pull/3504 rel="external nofollow noreferrer">#3504</a></li> <li>Accelerated server start when there is a very large number of tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3398 rel="external nofollow noreferrer">#3398</a></li> <li>Added a connection pool and HTTP <code>Keep-Alive</code> for connections between replicas. <a href=https://github.com/ClickHouse/ClickHouse/pull/3594 rel="external nofollow noreferrer">#3594</a></li> <li>If the query syntax is invalid, the <code>400 Bad Request</code> code is returned in the <code>HTTP</code> interface (500 was returned previously). <a href=https://github.com/ClickHouse/ClickHouse/commit/31bc680ac5f4bb1d0360a8ba4696fa84bb47d6ab rel="external nofollow noreferrer">31bc680a</a></li> <li>The <code>join_default_strictness</code> option is set to <code>ALL</code> by default for compatibility. <a href=https://github.com/ClickHouse/ClickHouse/commit/120e2cbe2ff4fbad626c28042d9b28781c805afe rel="external nofollow noreferrer">120e2cbe</a></li> <li>Removed logging to <code>stderr</code> from the <code>re2</code> library for invalid or complex regular expressions. <a href=https://github.com/ClickHouse/ClickHouse/pull/3723 rel="external nofollow noreferrer">#3723</a></li> <li>Added for the <code>Kafka</code> table engine: checks for subscriptions before beginning to read from Kafka; the kafka_max_block_size setting for the table. <a href=https://github.com/ClickHouse/ClickHouse/pull/3396 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>The <code>cityHash64</code>, <code>farmHash64</code>, <code>metroHash64</code>, <code>sipHash64</code>, <code>halfMD5</code>, <code>murmurHash2_32</code>, <code>murmurHash2_64</code>, <code>murmurHash3_32</code>, and <code>murmurHash3_64</code> functions now work for any number of arguments and for arguments in the form of tuples. <a href=https://github.com/ClickHouse/ClickHouse/pull/3451 rel="external nofollow noreferrer">#3451</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3519 rel="external nofollow noreferrer">#3519</a></li> <li>The <code>arrayReverse</code> function now works with any types of arrays. <a href=https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871 rel="external nofollow noreferrer">73e3a7b6</a></li> <li>Added an optional parameter: the slot size for the <code>timeSlots</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/3724 rel="external nofollow noreferrer">Kirill Shvakov</a></li> <li>For <code>FULL</code> and <code>RIGHT JOIN</code>, the <code>max_block_size</code> setting is used for a stream of non-joined data from the right table. <a href=https://github.com/ClickHouse/ClickHouse/pull/3699 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Added the <code>--secure</code> command line parameter in <code>clickhouse-benchmark</code> and <code>clickhouse-performance-test</code> to enable TLS. <a href=https://github.com/ClickHouse/ClickHouse/pull/3688 rel="external nofollow noreferrer">#3688</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3690 rel="external nofollow noreferrer">#3690</a></li> <li>Type conversion when the structure of a <code>Buffer</code> type table does not match the structure of the destination table. <a href=https://github.com/ClickHouse/ClickHouse/pull/3603 rel="external nofollow noreferrer">Vitaly Baranov</a></li> <li>Added the <code>tcp_keep_alive_timeout</code> option to enable keep-alive packets after inactivity for the specified time interval. <a href=https://github.com/ClickHouse/ClickHouse/pull/3441 rel="external nofollow noreferrer">#3441</a></li> <li>Removed unnecessary quoting of values for the partition key in the <code>system.parts</code> table if it consists of a single column. <a href=https://github.com/ClickHouse/ClickHouse/pull/3652 rel="external nofollow noreferrer">#3652</a></li> <li>The modulo function works for <code>Date</code> and <code>DateTime</code> data types. <a href=https://github.com/ClickHouse/ClickHouse/pull/3385 rel="external nofollow noreferrer">#3385</a></li> <li>Added synonyms for the <code>POWER</code>, <code>LN</code>, <code>LCASE</code>, <code>UCASE</code>, <code>REPLACE</code>, <code>LOCATE</code>, <code>SUBSTR</code>, and <code>MID</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/3774 rel="external nofollow noreferrer">#3774</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3763 rel="external nofollow noreferrer">#3763</a> Some function names are case-insensitive for compatibility with the SQL standard. Added syntactic sugar <code>SUBSTRING(expr FROM start FOR length)</code> for compatibility with SQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/3804 rel="external nofollow noreferrer">#3804</a></li> <li>Added the ability to <code>mlock</code> memory pages corresponding to <code>clickhouse-server</code> executable code to prevent it from being forced out of memory. This feature is disabled by default. <a href=https://github.com/ClickHouse/ClickHouse/pull/3553 rel="external nofollow noreferrer">#3553</a></li> <li>Improved performance when reading from <code>O_DIRECT</code> (with the <code>min_bytes_to_use_direct_io</code> option enabled). <a href=https://github.com/ClickHouse/ClickHouse/pull/3405 rel="external nofollow noreferrer">#3405</a></li> <li>Improved performance of the <code>dictGet...OrDefault</code> function for a constant key argument and a non-constant default argument. <a href=https://github.com/ClickHouse/ClickHouse/pull/3563 rel="external nofollow noreferrer">Amos Bird</a></li> <li>The <code>firstSignificantSubdomain</code> function now processes the domains <code>gov</code>, <code>mil</code>, and <code>edu</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3601 rel="external nofollow noreferrer">Igor Hatarist</a> Improved performance. <a href=https://github.com/ClickHouse/ClickHouse/pull/3628 rel="external nofollow noreferrer">#3628</a></li> <li>Ability to specify custom environment variables for starting <code>clickhouse-server</code> using the <code>SYS-V init.d</code> script by defining <code>CLICKHOUSE_PROGRAM_ENV</code> in <code>/etc/default/clickhouse</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/3612 rel="external nofollow noreferrer">Pavlo Bashynskyi</a></li> <li>Correct return code for the clickhouse-server init script. <a href=https://github.com/ClickHouse/ClickHouse/pull/3516 rel="external nofollow noreferrer">#3516</a></li> <li>The <code>system.metrics</code> table now has the <code>VersionInteger</code> metric, and <code>system.build_options</code> has the added line <code>VERSION_INTEGER</code>, which contains the numeric form of the ClickHouse version, such as <code>18016000</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3644 rel="external nofollow noreferrer">#3644</a></li> <li>Removed the ability to compare the <code>Date</code> type with a number to avoid potential errors like <code>date = 2018-12-17</code>, where quotes around the date are omitted by mistake. <a href=https://github.com/ClickHouse/ClickHouse/pull/3687 rel="external nofollow noreferrer">#3687</a></li> <li>Fixed the behavior of stateful functions like <code>rowNumberInAllBlocks</code>. They previously output a result that was one number larger due to starting during query analysis. <a href=https://github.com/ClickHouse/ClickHouse/pull/3729 rel="external nofollow noreferrer">Amos Bird</a></li> <li>If the <code>force_restore_data</code> file can’t be deleted, an error message is displayed. <a href=https://github.com/ClickHouse/ClickHouse/pull/3794 rel="external nofollow noreferrer">Amos Bird</a></li> </ul> <h4 id=build-improvements-1>Build improvements:<a class=headerlink href=#build-improvements-1 title="Permanent link">&para;</a></h4> <ul> <li>Updated the <code>jemalloc</code> library, which fixes a potential memory leak. <a href=https://github.com/ClickHouse/ClickHouse/pull/3557 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Profiling with <code>jemalloc</code> is enabled by default in order to debug builds. <a href=https://github.com/ClickHouse/ClickHouse/commit/2cc82f5cbe266421cd4c1165286c2c47e5ffcb15 rel="external nofollow noreferrer">2cc82f5c</a></li> <li>Added the ability to run integration tests when only <code>Docker</code> is installed on the system. <a href=https://github.com/ClickHouse/ClickHouse/pull/3650 rel="external nofollow noreferrer">#3650</a></li> <li>Added the fuzz expression test in SELECT queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3442 rel="external nofollow noreferrer">#3442</a></li> <li>Added a stress test for commits, which performs functional tests in parallel and in random order to detect more race conditions. <a href=https://github.com/ClickHouse/ClickHouse/pull/3438 rel="external nofollow noreferrer">#3438</a></li> <li>Improved the method for starting clickhouse-server in a Docker image. <a href=https://github.com/ClickHouse/ClickHouse/pull/3663 rel="external nofollow noreferrer">Elghazal Ahmed</a></li> <li>For a Docker image, added support for initializing databases using files in the <code>/docker-entrypoint-initdb.d</code> directory. <a href=https://github.com/ClickHouse/ClickHouse/pull/3695 rel="external nofollow noreferrer">Konstantin Lebedev</a></li> <li>Fixes for builds on ARM. <a href=https://github.com/ClickHouse/ClickHouse/pull/3709 rel="external nofollow noreferrer">#3709</a></li> </ul> <h4 id=backward-incompatible-changes>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes title="Permanent link">&para;</a></h4> <ul> <li>Removed the ability to compare the <code>Date</code> type with a number. Instead of <code>toDate('2018-12-18') = 17883</code>, you must use explicit type conversion <code>= toDate(17883)</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3687 rel="external nofollow noreferrer">#3687</a></li> </ul> <h2 id=clickhouse-release-18-14>ClickHouse release 18.14<a class=headerlink href=#clickhouse-release-18-14 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-14-19-2018-12-19>ClickHouse release 18.14.19, 2018-12-19<a class=headerlink href=#clickhouse-release-18-14-19-2018-12-19 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-2>Bug fixes:<a class=headerlink href=#bug-fixes-2 title="Permanent link">&para;</a></h4> <ul> <li>Fixed an error that led to problems with updating dictionaries with the ODBC source. <a href=https://github.com/ClickHouse/ClickHouse/issues/3825 rel="external nofollow noreferrer">#3825</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3829 rel="external nofollow noreferrer">#3829</a></li> <li>Databases are correctly specified when executing DDL <code>ON CLUSTER</code> queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3460 rel="external nofollow noreferrer">#3460</a></li> <li>Fixed a segfault if the <code>max_temporary_non_const_columns</code> limit was exceeded. <a href=https://github.com/ClickHouse/ClickHouse/pull/3788 rel="external nofollow noreferrer">#3788</a></li> </ul> <h4 id=build-improvements-2>Build improvements:<a class=headerlink href=#build-improvements-2 title="Permanent link">&para;</a></h4> <ul> <li>Fixes for builds on ARM.</li> </ul> <h3 id=clickhouse-release-18-14-18-2018-12-04>ClickHouse release 18.14.18, 2018-12-04<a class=headerlink href=#clickhouse-release-18-14-18-2018-12-04 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-3>Bug fixes:<a class=headerlink href=#bug-fixes-3 title="Permanent link">&para;</a></h4> <ul> <li>Fixed error in <code>dictGet...</code> function for dictionaries of type <code>range</code>, if one of the arguments is constant and other is not. <a href=https://github.com/ClickHouse/ClickHouse/pull/3751 rel="external nofollow noreferrer">#3751</a></li> <li>Fixed error that caused messages <code>netlink: '...': attribute type 1 has an invalid length</code> to be printed in Linux kernel log, that was happening only on fresh enough versions of Linux kernel. <a href=https://github.com/ClickHouse/ClickHouse/pull/3749 rel="external nofollow noreferrer">#3749</a></li> <li>Fixed segfault in function <code>empty</code> for argument of <code>FixedString</code> type. <a href=https://github.com/ClickHouse/ClickHouse/pull/3703 rel="external nofollow noreferrer">Daniel, Dao Quang Minh</a></li> <li>Fixed excessive memory allocation when using large value of <code>max_query_size</code> setting (a memory chunk of <code>max_query_size</code> bytes was preallocated at once). <a href=https://github.com/ClickHouse/ClickHouse/pull/3720 rel="external nofollow noreferrer">#3720</a></li> </ul> <h4 id=build-changes>Build changes:<a class=headerlink href=#build-changes title="Permanent link">&para;</a></h4> <ul> <li>Fixed build with LLVM/Clang libraries of version 7 from the OS packages (these libraries are used for runtime query compilation). <a href=https://github.com/ClickHouse/ClickHouse/pull/3582 rel="external nofollow noreferrer">#3582</a></li> </ul> <h3 id=clickhouse-release-18-14-17-2018-11-30>ClickHouse release 18.14.17, 2018-11-30<a class=headerlink href=#clickhouse-release-18-14-17-2018-11-30 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-4>Bug fixes:<a class=headerlink href=#bug-fixes-4 title="Permanent link">&para;</a></h4> <ul> <li>Fixed cases when the ODBC bridge process did not terminate with the main server process. <a href=https://github.com/ClickHouse/ClickHouse/pull/3642 rel="external nofollow noreferrer">#3642</a></li> <li>Fixed synchronous insertion into the <code>Distributed</code> table with a columns list that differs from the column list of the remote table. <a href=https://github.com/ClickHouse/ClickHouse/pull/3673 rel="external nofollow noreferrer">#3673</a></li> <li>Fixed a rare race condition that can lead to a crash when dropping a MergeTree table. <a href=https://github.com/ClickHouse/ClickHouse/pull/3643 rel="external nofollow noreferrer">#3643</a></li> <li>Fixed a query deadlock in case when query thread creation fails with the <code>Resource temporarily unavailable</code> error. <a href=https://github.com/ClickHouse/ClickHouse/pull/3643 rel="external nofollow noreferrer">#3643</a></li> <li>Fixed parsing of the <code>ENGINE</code> clause when the <code>CREATE AS table</code> syntax was used and the <code>ENGINE</code> clause was specified before the <code>AS table</code> (the error resulted in ignoring the specified engine). <a href=https://github.com/ClickHouse/ClickHouse/pull/3692 rel="external nofollow noreferrer">#3692</a></li> </ul> <h3 id=clickhouse-release-18-14-15-2018-11-21>ClickHouse release 18.14.15, 2018-11-21<a class=headerlink href=#clickhouse-release-18-14-15-2018-11-21 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-5>Bug fixes:<a class=headerlink href=#bug-fixes-5 title="Permanent link">&para;</a></h4> <ul> <li>The size of memory chunk was overestimated while deserializing the column of type <code>Array(String)</code> that leads to “Memory limit exceeded” errors. The issue appeared in version 18.12.13. <a href=https://github.com/ClickHouse/ClickHouse/issues/3589 rel="external nofollow noreferrer">#3589</a></li> </ul> <h3 id=clickhouse-release-18-14-14-2018-11-20>ClickHouse release 18.14.14, 2018-11-20<a class=headerlink href=#clickhouse-release-18-14-14-2018-11-20 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-6>Bug fixes:<a class=headerlink href=#bug-fixes-6 title="Permanent link">&para;</a></h4> <ul> <li>Fixed <code>ON CLUSTER</code> queries when cluster configured as secure (flag <code>&lt;secure&gt;</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/3599 rel="external nofollow noreferrer">#3599</a></li> </ul> <h4 id=build-changes-1>Build changes:<a class=headerlink href=#build-changes-1 title="Permanent link">&para;</a></h4> <ul> <li>Fixed problems (llvm-7 from system, macos) <a href=https://github.com/ClickHouse/ClickHouse/pull/3582 rel="external nofollow noreferrer">#3582</a></li> </ul> <h3 id=clickhouse-release-18-14-13-2018-11-08>ClickHouse release 18.14.13, 2018-11-08<a class=headerlink href=#clickhouse-release-18-14-13-2018-11-08 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-7>Bug fixes:<a class=headerlink href=#bug-fixes-7 title="Permanent link">&para;</a></h4> <ul> <li>Fixed the <code>Block structure mismatch in MergingSorted stream</code> error. <a href=https://github.com/ClickHouse/ClickHouse/issues/3162 rel="external nofollow noreferrer">#3162</a></li> <li>Fixed <code>ON CLUSTER</code> queries in case when secure connections were turned on in the cluster config (the <code>&lt;secure&gt;</code> flag). <a href=https://github.com/ClickHouse/ClickHouse/pull/3465 rel="external nofollow noreferrer">#3465</a></li> <li>Fixed an error in queries that used <code>SAMPLE</code>, <code>PREWHERE</code> and alias columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/3543 rel="external nofollow noreferrer">#3543</a></li> <li>Fixed a rare <code>unknown compression method</code> error when the <code>min_bytes_to_use_direct_io</code> setting was enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/3544 rel="external nofollow noreferrer">3544</a></li> </ul> <h4 id=performance-improvements>Performance improvements:<a class=headerlink href=#performance-improvements title="Permanent link">&para;</a></h4> <ul> <li>Fixed performance regression of queries with <code>GROUP BY</code> of columns of UInt16 or Date type when executing on AMD EPYC processors. <a href=https://github.com/ClickHouse/ClickHouse/pull/3512 rel="external nofollow noreferrer">Igor Lapko</a></li> <li>Fixed performance regression of queries that process long strings. <a href=https://github.com/ClickHouse/ClickHouse/pull/3530 rel="external nofollow noreferrer">#3530</a></li> </ul> <h4 id=build-improvements-3>Build improvements:<a class=headerlink href=#build-improvements-3 title="Permanent link">&para;</a></h4> <ul> <li>Improvements for simplifying the Arcadia build. <a href=https://github.com/ClickHouse/ClickHouse/pull/3475 rel="external nofollow noreferrer">#3475</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/3535 rel="external nofollow noreferrer">#3535</a></li> </ul> <h3 id=clickhouse-release-18-14-12-2018-11-02>ClickHouse release 18.14.12, 2018-11-02<a class=headerlink href=#clickhouse-release-18-14-12-2018-11-02 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-8>Bug fixes:<a class=headerlink href=#bug-fixes-8 title="Permanent link">&para;</a></h4> <ul> <li>Fixed a crash on joining two unnamed subqueries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3505 rel="external nofollow noreferrer">#3505</a></li> <li>Fixed generating incorrect queries (with an empty <code>WHERE</code> clause) when querying external databases. <a href=https://github.com/ClickHouse/ClickHouse/pull/3477 rel="external nofollow noreferrer">hotid</a></li> <li>Fixed using an incorrect timeout value in ODBC dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3511 rel="external nofollow noreferrer">Marek Vavruša</a></li> </ul> <h3 id=clickhouse-release-18-14-11-2018-10-29>ClickHouse release 18.14.11, 2018-10-29<a class=headerlink href=#clickhouse-release-18-14-11-2018-10-29 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-9>Bug fixes:<a class=headerlink href=#bug-fixes-9 title="Permanent link">&para;</a></h4> <ul> <li>Fixed the error <code>Block structure mismatch in UNION stream: different number of columns</code> in LIMIT queries. <a href=https://github.com/ClickHouse/ClickHouse/issues/2156 rel="external nofollow noreferrer">#2156</a></li> <li>Fixed errors when merging data in tables containing arrays inside Nested structures. <a href=https://github.com/ClickHouse/ClickHouse/pull/3397 rel="external nofollow noreferrer">#3397</a></li> <li>Fixed incorrect query results if the <code>merge_tree_uniform_read_distribution</code> setting is disabled (it is enabled by default). <a href=https://github.com/ClickHouse/ClickHouse/pull/3429 rel="external nofollow noreferrer">#3429</a></li> <li>Fixed an error on inserts to a Distributed table in Native format. <a href=https://github.com/ClickHouse/ClickHouse/issues/3411 rel="external nofollow noreferrer">#3411</a></li> </ul> <h3 id=clickhouse-release-18-14-10-2018-10-23>ClickHouse release 18.14.10, 2018-10-23<a class=headerlink href=#clickhouse-release-18-14-10-2018-10-23 title="Permanent link">&para;</a></h3> <ul> <li>The <code>compile_expressions</code> setting (JIT compilation of expressions) is disabled by default. <a href=https://github.com/ClickHouse/ClickHouse/pull/3410 rel="external nofollow noreferrer">#3410</a></li> <li>The <code>enable_optimize_predicate_expression</code> setting is disabled by default.</li> </ul> <h3 id=clickhouse-release-18-14-9-2018-10-16>ClickHouse release 18.14.9, 2018-10-16<a class=headerlink href=#clickhouse-release-18-14-9-2018-10-16 title="Permanent link">&para;</a></h3> <h4 id=new-features-1>New features:<a class=headerlink href=#new-features-1 title="Permanent link">&para;</a></h4> <ul> <li>The <code>WITH CUBE</code> modifier for <code>GROUP BY</code> (the alternative syntax <code>GROUP BY CUBE(...)</code> is also available). <a href=https://github.com/ClickHouse/ClickHouse/pull/3172 rel="external nofollow noreferrer">#3172</a></li> <li>Added the <code>formatDateTime</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/2770 rel="external nofollow noreferrer">Alexandr Krasheninnikov</a></li> <li>Added the <code>JDBC</code> table engine and <code>jdbc</code> table function (requires installing clickhouse-jdbc-bridge). <a href=https://github.com/ClickHouse/ClickHouse/pull/3210 rel="external nofollow noreferrer">Alexandr Krasheninnikov</a></li> <li>Added functions for working with the ISO week number: <code>toISOWeek</code>, <code>toISOYear</code>, <code>toStartOfISOYear</code>, and <code>toDayOfYear</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3146 rel="external nofollow noreferrer">#3146</a></li> <li>Now you can use <code>Nullable</code> columns for <code>MySQL</code> and <code>ODBC</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3362 rel="external nofollow noreferrer">#3362</a></li> <li>Nested data structures can be read as nested objects in <code>JSONEachRow</code> format. Added the <code>input_format_import_nested_json</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/3144 rel="external nofollow noreferrer">Veloman Yunkan</a></li> <li>Parallel processing is available for many <code>MATERIALIZED VIEW</code>s when inserting data. See the <code>parallel_view_processing</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/3208 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>Added the <code>SYSTEM FLUSH LOGS</code> query (forced log flushes to system tables such as <code>query_log</code>) <a href=https://github.com/ClickHouse/ClickHouse/pull/3321 rel="external nofollow noreferrer">#3321</a></li> <li>Now you can use pre-defined <code>database</code> and <code>table</code> macros when declaring <code>Replicated</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3251 rel="external nofollow noreferrer">#3251</a></li> <li>Added the ability to read <code>Decimal</code> type values in engineering notation (indicating powers of ten). <a href=https://github.com/ClickHouse/ClickHouse/pull/3153 rel="external nofollow noreferrer">#3153</a></li> </ul> <h4 id=experimental-features>Experimental features:<a class=headerlink href=#experimental-features title="Permanent link">&para;</a></h4> <ul> <li>Optimization of the GROUP BY clause for <code>LowCardinality data types.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3138 rel="external nofollow noreferrer">#3138</a></li> <li>Optimized calculation of expressions for <code>LowCardinality data types.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3200 rel="external nofollow noreferrer">#3200</a></li> </ul> <h4 id=improvements-2>Improvements:<a class=headerlink href=#improvements-2 title="Permanent link">&para;</a></h4> <ul> <li>Significantly reduced memory consumption for queries with <code>ORDER BY</code> and <code>LIMIT</code>. See the <code>max_bytes_before_remerge_sort</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/3205 rel="external nofollow noreferrer">#3205</a></li> <li>In the absence of <code>JOIN</code> (<code>LEFT</code>, <code>INNER</code>, …), <code>INNER JOIN</code> is assumed. <a href=https://github.com/ClickHouse/ClickHouse/pull/3147 rel="external nofollow noreferrer">#3147</a></li> <li>Qualified asterisks work correctly in queries with <code>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3202 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>The <code>ODBC</code> table engine correctly chooses the method for quoting identifiers in the SQL dialect of a remote database. <a href=https://github.com/ClickHouse/ClickHouse/pull/3210 rel="external nofollow noreferrer">Alexandr Krasheninnikov</a></li> <li>The <code>compile_expressions</code> setting (JIT compilation of expressions) is enabled by default.</li> <li>Fixed behavior for simultaneous DROP DATABASE/TABLE IF EXISTS and CREATE DATABASE/TABLE IF NOT EXISTS. Previously, a <code>CREATE DATABASE ... IF NOT EXISTS</code> query could return the error message “File … already exists”, and the <code>CREATE TABLE ... IF NOT EXISTS</code> and <code>DROP TABLE IF EXISTS</code> queries could return <code>Table ... is creating or attaching right now</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3101 rel="external nofollow noreferrer">#3101</a></li> <li>LIKE and IN expressions with a constant right half are passed to the remote server when querying from MySQL or ODBC tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3182 rel="external nofollow noreferrer">#3182</a></li> <li>Comparisons with constant expressions in a WHERE clause are passed to the remote server when querying from MySQL and ODBC tables. Previously, only comparisons with constants were passed. <a href=https://github.com/ClickHouse/ClickHouse/pull/3182 rel="external nofollow noreferrer">#3182</a></li> <li>Correct calculation of row width in the terminal for <code>Pretty</code> formats, including strings with hieroglyphs. <a href=https://github.com/ClickHouse/ClickHouse/pull/3257 rel="external nofollow noreferrer">Amos Bird</a>.</li> <li><code>ON CLUSTER</code> can be specified for <code>ALTER UPDATE</code> queries.</li> <li>Improved performance for reading data in <code>JSONEachRow</code> format. <a href=https://github.com/ClickHouse/ClickHouse/pull/3332 rel="external nofollow noreferrer">#3332</a></li> <li>Added synonyms for the <code>LENGTH</code> and <code>CHARACTER_LENGTH</code> functions for compatibility. The <code>CONCAT</code> function is no longer case-sensitive. <a href=https://github.com/ClickHouse/ClickHouse/pull/3306 rel="external nofollow noreferrer">#3306</a></li> <li>Added the <code>TIMESTAMP</code> synonym for the <code>DateTime</code> type. <a href=https://github.com/ClickHouse/ClickHouse/pull/3390 rel="external nofollow noreferrer">#3390</a></li> <li>There is always space reserved for query_id in the server logs, even if the log line is not related to a query. This makes it easier to parse server text logs with third-party tools.</li> <li>Memory consumption by a query is logged when it exceeds the next level of an integer number of gigabytes. <a href=https://github.com/ClickHouse/ClickHouse/pull/3205 rel="external nofollow noreferrer">#3205</a></li> <li>Added compatibility mode for the case when the client library that uses the Native protocol sends fewer columns by mistake than the server expects for the INSERT query. This scenario was possible when using the clickhouse-cpp library. Previously, this scenario caused the server to crash. <a href=https://github.com/ClickHouse/ClickHouse/pull/3171 rel="external nofollow noreferrer">#3171</a></li> <li>In a user-defined WHERE expression in <code>clickhouse-copier</code>, you can now use a <code>partition_key</code> alias (for additional filtering by source table partition). This is useful if the partitioning scheme changes during copying, but only changes slightly. <a href=https://github.com/ClickHouse/ClickHouse/pull/3166 rel="external nofollow noreferrer">#3166</a></li> <li>The workflow of the <code>Kafka</code> engine has been moved to a background thread pool in order to automatically reduce the speed of data reading at high loads. <a href=https://github.com/ClickHouse/ClickHouse/pull/3215 rel="external nofollow noreferrer">Marek Vavruša</a>.</li> <li>Support for reading <code>Tuple</code> and <code>Nested</code> values of structures like <code>struct</code> in the <code>Cap'n'Proto format</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3216 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>The list of top-level domains for the <code>firstSignificantSubdomain</code> function now includes the domain <code>biz</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3219 rel="external nofollow noreferrer">decaseal</a></li> <li>In the configuration of external dictionaries, <code>null_value</code> is interpreted as the value of the default data type. <a href=https://github.com/ClickHouse/ClickHouse/pull/3330 rel="external nofollow noreferrer">#3330</a></li> <li>Support for the <code>intDiv</code> and <code>intDivOrZero</code> functions for <code>Decimal</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/b48402e8712e2b9b151e0eef8193811d433a1264 rel="external nofollow noreferrer">b48402e8</a></li> <li>Support for the <code>Date</code>, <code>DateTime</code>, <code>UUID</code>, and <code>Decimal</code> types as a key for the <code>sumMap</code> aggregate function. <a href=https://github.com/ClickHouse/ClickHouse/pull/3281 rel="external nofollow noreferrer">#3281</a></li> <li>Support for the <code>Decimal</code> data type in external dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3324 rel="external nofollow noreferrer">#3324</a></li> <li>Support for the <code>Decimal</code> data type in <code>SummingMergeTree</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3348 rel="external nofollow noreferrer">#3348</a></li> <li>Added specializations for <code>UUID</code> in <code>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3366 rel="external nofollow noreferrer">#3366</a></li> <li>Reduced the number of <code>open</code> and <code>close</code> system calls when reading from a <code>MergeTree table</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3283 rel="external nofollow noreferrer">#3283</a></li> <li>A <code>TRUNCATE TABLE</code> query can be executed on any replica (the query is passed to the leader replica). <a href=https://github.com/ClickHouse/ClickHouse/pull/3375 rel="external nofollow noreferrer">Kirill Shvakov</a></li> </ul> <h4 id=bug-fixes-10>Bug fixes:<a class=headerlink href=#bug-fixes-10 title="Permanent link">&para;</a></h4> <ul> <li>Fixed an issue with <code>Dictionary</code> tables for <code>range_hashed</code> dictionaries. This error occurred in version 18.12.17. <a href=https://github.com/ClickHouse/ClickHouse/pull/1702 rel="external nofollow noreferrer">#1702</a></li> <li>Fixed an error when loading <code>range_hashed</code> dictionaries (the message <code>Unsupported type Nullable (...)</code>). This error occurred in version 18.12.17. <a href=https://github.com/ClickHouse/ClickHouse/pull/3362 rel="external nofollow noreferrer">#3362</a></li> <li>Fixed errors in the <code>pointInPolygon</code> function due to the accumulation of inaccurate calculations for polygons with a large number of vertices located close to each other. <a href=https://github.com/ClickHouse/ClickHouse/pull/3331 rel="external nofollow noreferrer">#3331</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3341 rel="external nofollow noreferrer">#3341</a></li> <li>If after merging data parts, the checksum for the resulting part differs from the result of the same merge in another replica, the result of the merge is deleted and the data part is downloaded from the other replica (this is the correct behavior). But after downloading the data part, it couldn’t be added to the working set because of an error that the part already exists (because the data part was deleted with some delay after the merge). This led to cyclical attempts to download the same data. <a href=https://github.com/ClickHouse/ClickHouse/pull/3194 rel="external nofollow noreferrer">#3194</a></li> <li>Fixed incorrect calculation of total memory consumption by queries (because of incorrect calculation, the <code>max_memory_usage_for_all_queries</code> setting worked incorrectly and the <code>MemoryTracking</code> metric had an incorrect value). This error occurred in version 18.12.13. <a href=https://github.com/ClickHouse/ClickHouse/pull/3344 rel="external nofollow noreferrer">Marek Vavruša</a></li> <li>Fixed the functionality of <code>CREATE TABLE ... ON CLUSTER ... AS SELECT ...</code> This error occurred in version 18.12.13. <a href=https://github.com/ClickHouse/ClickHouse/pull/3247 rel="external nofollow noreferrer">#3247</a></li> <li>Fixed unnecessary preparation of data structures for <code>JOIN</code>s on the server that initiates the query if the <code>JOIN</code> is only performed on remote servers. <a href=https://github.com/ClickHouse/ClickHouse/pull/3340 rel="external nofollow noreferrer">#3340</a></li> <li>Fixed bugs in the <code>Kafka</code> engine: deadlocks after exceptions when starting to read data, and locks upon completion <a href=https://github.com/ClickHouse/ClickHouse/pull/3215 rel="external nofollow noreferrer">Marek Vavruša</a>.</li> <li>For <code>Kafka</code> tables, the optional <code>schema</code> parameter was not passed (the schema of the <code>Cap'n'Proto</code> format). <a href=https://github.com/ClickHouse/ClickHouse/pull/3150 rel="external nofollow noreferrer">Vojtech Splichal</a></li> <li>If the ensemble of ZooKeeper servers has servers that accept the connection but then immediately close it instead of responding to the handshake, ClickHouse chooses to connect another server. Previously, this produced the error <code>Cannot read all data. Bytes read: 0. Bytes expected: 4.</code> and the server couldn’t start. <a href=https://github.com/ClickHouse/ClickHouse/commit/8218cf3a5f39a43401953769d6d12a0bb8d29da9 rel="external nofollow noreferrer">8218cf3a</a></li> <li>If the ensemble of ZooKeeper servers contains servers for which the DNS query returns an error, these servers are ignored. <a href=https://github.com/ClickHouse/ClickHouse/commit/17b8e209221061325ad7ba0539f03c6e65f87f29 rel="external nofollow noreferrer">17b8e209</a></li> <li>Fixed type conversion between <code>Date</code> and <code>DateTime</code> when inserting data in the <code>VALUES</code> format (if <code>input_format_values_interpret_expressions = 1</code>). Previously, the conversion was performed between the numerical value of the number of days in Unix Epoch time and the Unix timestamp, which led to unexpected results. <a href=https://github.com/ClickHouse/ClickHouse/pull/3229 rel="external nofollow noreferrer">#3229</a></li> <li>Corrected type conversion between <code>Decimal</code> and integer numbers. <a href=https://github.com/ClickHouse/ClickHouse/pull/3211 rel="external nofollow noreferrer">#3211</a></li> <li>Fixed errors in the <code>enable_optimize_predicate_expression</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/3231 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed a parsing error in CSV format with floating-point numbers if a non-default CSV separator is used, such as <code>;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3155 rel="external nofollow noreferrer">#3155</a></li> <li>Fixed the <code>arrayCumSumNonNegative</code> function (it does not accumulate negative values if the accumulator is less than zero). <a href=https://github.com/ClickHouse/ClickHouse/pull/3163 rel="external nofollow noreferrer">Aleksey Studnev</a></li> <li>Fixed how <code>Merge</code> tables work on top of <code>Distributed</code> tables when using <code>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3165 rel="external nofollow noreferrer">#3165</a></li> <li>Bug fixes in the <code>ALTER UPDATE</code> query.</li> <li>Fixed bugs in the <code>odbc</code> table function that appeared in version 18.12. <a href=https://github.com/ClickHouse/ClickHouse/pull/3197 rel="external nofollow noreferrer">#3197</a></li> <li>Fixed the operation of aggregate functions with <code>StateArray</code> combinators. <a href=https://github.com/ClickHouse/ClickHouse/pull/3188 rel="external nofollow noreferrer">#3188</a></li> <li>Fixed a crash when dividing a <code>Decimal</code> value by zero. <a href=https://github.com/ClickHouse/ClickHouse/commit/69dd6609193beb4e7acd3e6ad216eca0ccfb8179 rel="external nofollow noreferrer">69dd6609</a></li> <li>Fixed output of types for operations using <code>Decimal</code> and integer arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/3224 rel="external nofollow noreferrer">#3224</a></li> <li>Fixed the segfault during <code>GROUP BY</code> on <code>Decimal128</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/3359ba06c39fcd05bfdb87d6c64154819621e13a rel="external nofollow noreferrer">3359ba06</a></li> <li>The <code>log_query_threads</code> setting (logging information about each thread of query execution) now takes effect only if the <code>log_queries</code> option (logging information about queries) is set to 1. Since the <code>log_query_threads</code> option is enabled by default, information about threads was previously logged even if query logging was disabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/3241 rel="external nofollow noreferrer">#3241</a></li> <li>Fixed an error in the distributed operation of the quantiles aggregate function (the error message <code>Not found column quantile...</code>). <a href=https://github.com/ClickHouse/ClickHouse/commit/292a885533b8e3b41ce8993867069d14cbd5a664 rel="external nofollow noreferrer">292a8855</a></li> <li>Fixed the compatibility problem when working on a cluster of version 18.12.17 servers and older servers at the same time. For distributed queries with GROUP BY keys of both fixed and non-fixed length, if there was a large amount of data to aggregate, the returned data was not always fully aggregated (two different rows contained the same aggregation keys). <a href=https://github.com/ClickHouse/ClickHouse/pull/3254 rel="external nofollow noreferrer">#3254</a></li> <li>Fixed handling of substitutions in <code>clickhouse-performance-test</code>, if the query contains only part of the substitutions declared in the test. <a href=https://github.com/ClickHouse/ClickHouse/pull/3263 rel="external nofollow noreferrer">#3263</a></li> <li>Fixed an error when using <code>FINAL</code> with <code>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3298 rel="external nofollow noreferrer">#3298</a></li> <li>Fixed an error when using <code>PREWHERE</code> over columns that were added during <code>ALTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3298 rel="external nofollow noreferrer">#3298</a></li> <li>Added a check for the absence of <code>arrayJoin</code> for <code>DEFAULT</code> and <code>MATERIALIZED</code> expressions. Previously, <code>arrayJoin</code> led to an error when inserting data. <a href=https://github.com/ClickHouse/ClickHouse/pull/3337 rel="external nofollow noreferrer">#3337</a></li> <li>Added a check for the absence of <code>arrayJoin</code> in a <code>PREWHERE</code> clause. Previously, this led to messages like <code>Size ... doesn't match</code> or <code>Unknown compression method</code> when executing queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3357 rel="external nofollow noreferrer">#3357</a></li> <li>Fixed segfault that could occur in rare cases after optimization that replaced AND chains from equality evaluations with the corresponding IN expression. <a href=https://github.com/ClickHouse/ClickHouse/pull/3339 rel="external nofollow noreferrer">liuyimin-bytedance</a></li> <li>Minor corrections to <code>clickhouse-benchmark</code>: previously, client information was not sent to the server; now the number of queries executed is calculated more accurately when shutting down and for limiting the number of iterations. <a href=https://github.com/ClickHouse/ClickHouse/pull/3351 rel="external nofollow noreferrer">#3351</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3352 rel="external nofollow noreferrer">#3352</a></li> </ul> <h4 id=backward-incompatible-changes-1>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-1 title="Permanent link">&para;</a></h4> <ul> <li>Removed the <code>allow_experimental_decimal_type</code> option. The <code>Decimal</code> data type is available for default use. <a href=https://github.com/ClickHouse/ClickHouse/pull/3329 rel="external nofollow noreferrer">#3329</a></li> </ul> <h2 id=clickhouse-release-18-12>ClickHouse release 18.12<a class=headerlink href=#clickhouse-release-18-12 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-12-17-2018-09-16>ClickHouse release 18.12.17, 2018-09-16<a class=headerlink href=#clickhouse-release-18-12-17-2018-09-16 title="Permanent link">&para;</a></h3> <h4 id=new-features-2>New features:<a class=headerlink href=#new-features-2 title="Permanent link">&para;</a></h4> <ul> <li><code>invalidate_query</code> (the ability to specify a query to check whether an external dictionary needs to be updated) is implemented for the <code>clickhouse</code> source. <a href=https://github.com/ClickHouse/ClickHouse/pull/3126 rel="external nofollow noreferrer">#3126</a></li> <li>Added the ability to use <code>UInt*</code>, <code>Int*</code>, and <code>DateTime</code> data types (along with the <code>Date</code> type) as a <code>range_hashed</code> external dictionary key that defines the boundaries of ranges. Now <code>NULL</code> can be used to designate an open range. <a href=https://github.com/ClickHouse/ClickHouse/pull/3123 rel="external nofollow noreferrer">Vasily Nemkov</a></li> <li>The <code>Decimal</code> type now supports <code>var*</code> and <code>stddev*</code> aggregate functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/3129 rel="external nofollow noreferrer">#3129</a></li> <li>The <code>Decimal</code> type now supports mathematical functions (<code>exp</code>, <code>sin</code> and so on.) <a href=https://github.com/ClickHouse/ClickHouse/pull/3129 rel="external nofollow noreferrer">#3129</a></li> <li>The <code>system.part_log</code> table now has the <code>partition_id</code> column. <a href=https://github.com/ClickHouse/ClickHouse/pull/3089 rel="external nofollow noreferrer">#3089</a></li> </ul> <h4 id=bug-fixes-11>Bug fixes:<a class=headerlink href=#bug-fixes-11 title="Permanent link">&para;</a></h4> <ul> <li><code>Merge</code> now works correctly on <code>Distributed</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3159 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed incompatibility (unnecessary dependency on the <code>glibc</code> version) that made it impossible to run ClickHouse on <code>Ubuntu Precise</code> and older versions. The incompatibility arose in version 18.12.13. <a href=https://github.com/ClickHouse/ClickHouse/pull/3130 rel="external nofollow noreferrer">#3130</a></li> <li>Fixed errors in the <code>enable_optimize_predicate_expression</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/3107 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed a minor issue with backwards compatibility that appeared when working with a cluster of replicas on versions earlier than 18.12.13 and simultaneously creating a new replica of a table on a server with a newer version (shown in the message <code>Can not clone replica, because the ... updated to new ClickHouse version</code>, which is logical, but shouldn’t happen). <a href=https://github.com/ClickHouse/ClickHouse/pull/3122 rel="external nofollow noreferrer">#3122</a></li> </ul> <h4 id=backward-incompatible-changes-2>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-2 title="Permanent link">&para;</a></h4> <ul> <li>The <code>enable_optimize_predicate_expression</code> option is enabled by default (which is rather optimistic). If query analysis errors occur that are related to searching for the column names, set <code>enable_optimize_predicate_expression</code> to 0. <a href=https://github.com/ClickHouse/ClickHouse/pull/3107 rel="external nofollow noreferrer">Winter Zhang</a></li> </ul> <h3 id=clickhouse-release-18-12-14-2018-09-13>ClickHouse release 18.12.14, 2018-09-13<a class=headerlink href=#clickhouse-release-18-12-14-2018-09-13 title="Permanent link">&para;</a></h3> <h4 id=new-features-3>New features:<a class=headerlink href=#new-features-3 title="Permanent link">&para;</a></h4> <ul> <li>Added support for <code>ALTER UPDATE</code> queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3035 rel="external nofollow noreferrer">#3035</a></li> <li>Added the <code>allow_ddl</code> option, which restricts the user’s access to DDL queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3104 rel="external nofollow noreferrer">#3104</a></li> <li>Added the <code>min_merge_bytes_to_use_direct_io</code> option for <code>MergeTree</code> engines, which allows you to set a threshold for the total size of the merge (when above the threshold, data part files will be handled using O_DIRECT). <a href=https://github.com/ClickHouse/ClickHouse/pull/3117 rel="external nofollow noreferrer">#3117</a></li> <li>The <code>system.merges</code> system table now contains the <code>partition_id</code> column. <a href=https://github.com/ClickHouse/ClickHouse/pull/3099 rel="external nofollow noreferrer">#3099</a></li> </ul> <h4 id=improvements-3>Improvements<a class=headerlink href=#improvements-3 title="Permanent link">&para;</a></h4> <ul> <li>If a data part remains unchanged during mutation, it isn’t downloaded by replicas. <a href=https://github.com/ClickHouse/ClickHouse/pull/3103 rel="external nofollow noreferrer">#3103</a></li> <li>Autocomplete is available for names of settings when working with <code>clickhouse-client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3106 rel="external nofollow noreferrer">#3106</a></li> </ul> <h4 id=bug-fixes-12>Bug fixes:<a class=headerlink href=#bug-fixes-12 title="Permanent link">&para;</a></h4> <ul> <li>Added a check for the sizes of arrays that are elements of <code>Nested</code> type fields when inserting. <a href=https://github.com/ClickHouse/ClickHouse/pull/3118 rel="external nofollow noreferrer">#3118</a></li> <li>Fixed an error updating external dictionaries with the <code>ODBC</code> source and <code>hashed</code> storage. This error occurred in version 18.12.13.</li> <li>Fixed a crash when creating a temporary table from a query with an <code>IN</code> condition. <a href=https://github.com/ClickHouse/ClickHouse/pull/3098 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed an error in aggregate functions for arrays that can have <code>NULL</code> elements. <a href=https://github.com/ClickHouse/ClickHouse/pull/3097 rel="external nofollow noreferrer">Winter Zhang</a></li> </ul> <h3 id=clickhouse-release-18-12-13-2018-09-10>ClickHouse release 18.12.13, 2018-09-10<a class=headerlink href=#clickhouse-release-18-12-13-2018-09-10 title="Permanent link">&para;</a></h3> <h4 id=new-features-4>New features:<a class=headerlink href=#new-features-4 title="Permanent link">&para;</a></h4> <ul> <li>Added the <code>DECIMAL(digits, scale)</code> data type (<code>Decimal32(scale)</code>, <code>Decimal64(scale)</code>, <code>Decimal128(scale)</code>). To enable it, use the setting <code>allow_experimental_decimal_type</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2846 rel="external nofollow noreferrer">#2846</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2970 rel="external nofollow noreferrer">#2970</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3008 rel="external nofollow noreferrer">#3008</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3047 rel="external nofollow noreferrer">#3047</a></li> <li>New <code>WITH ROLLUP</code> modifier for <code>GROUP BY</code> (alternative syntax: <code>GROUP BY ROLLUP(...)</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2948 rel="external nofollow noreferrer">#2948</a></li> <li>In queries with JOIN, the star character expands to a list of columns in all tables, in compliance with the SQL standard. You can restore the old behavior by setting <code>asterisk_left_columns_only</code> to 1 on the user configuration level. <a href=https://github.com/ClickHouse/ClickHouse/pull/2787 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Added support for JOIN with table functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/2907 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Autocomplete by pressing Tab in clickhouse-client. <a href=https://github.com/ClickHouse/ClickHouse/pull/2447 rel="external nofollow noreferrer">Sergey Shcherbin</a></li> <li>Ctrl+C in clickhouse-client clears a query that was entered. <a href=https://github.com/ClickHouse/ClickHouse/pull/2877 rel="external nofollow noreferrer">#2877</a></li> <li>Added the <code>join_default_strictness</code> setting (values: <code>"</code>, <code>'any'</code>, <code>'all'</code>). This allows you to not specify <code>ANY</code> or <code>ALL</code> for <code>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2982 rel="external nofollow noreferrer">#2982</a></li> <li>Each line of the server log related to query processing shows the query ID. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>Now you can get query execution logs in clickhouse-client (use the <code>send_logs_level</code> setting). With distributed query processing, logs are cascaded from all the servers. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>The <code>system.query_log</code> and <code>system.processes</code> (<code>SHOW PROCESSLIST</code>) tables now have information about all changed settings when you run a query (the nested structure of the <code>Settings</code> data). Added the <code>log_query_settings</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>The <code>system.query_log</code> and <code>system.processes</code> tables now show information about the number of threads that are participating in query execution (see the <code>thread_numbers</code> column). <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>Added <code>ProfileEvents</code> counters that measure the time spent on reading and writing over the network and reading and writing to disk, the number of network errors, and the time spent waiting when network bandwidth is limited. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>Added <code>ProfileEvents</code>counters that contain the system metrics from rusage (you can use them to get information about CPU usage in userspace and the kernel, page faults, and context switches), as well as taskstats metrics (use these to obtain information about I/O wait time, CPU wait time, and the amount of data read and recorded, both with and without page cache). <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>The <code>ProfileEvents</code> counters are applied globally and for each query, as well as for each query execution thread, which allows you to profile resource consumption by query in detail. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>Added the <code>system.query_thread_log</code> table, which contains information about each query execution thread. Added the <code>log_query_threads</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer">#2482</a></li> <li>The <code>system.metrics</code> and <code>system.events</code> tables now have built-in documentation. <a href=https://github.com/ClickHouse/ClickHouse/pull/3016 rel="external nofollow noreferrer">#3016</a></li> <li>Added the <code>arrayEnumerateDense</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/2975 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Added the <code>arrayCumSumNonNegative</code> and <code>arrayDifference</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/2942 rel="external nofollow noreferrer">Aleksey Studnev</a></li> <li>Added the <code>retention</code> aggregate function. <a href=https://github.com/ClickHouse/ClickHouse/pull/2887 rel="external nofollow noreferrer">Sundy Li</a></li> <li>Now you can add (merge) states of aggregate functions by using the plus operator, and multiply the states of aggregate functions by a nonnegative constant. <a href=https://github.com/ClickHouse/ClickHouse/pull/3062 rel="external nofollow noreferrer">#3062</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3034 rel="external nofollow noreferrer">#3034</a></li> <li>Tables in the MergeTree family now have the virtual column <code>_partition_id</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3089 rel="external nofollow noreferrer">#3089</a></li> </ul> <h4 id=experimental-features-1>Experimental features:<a class=headerlink href=#experimental-features-1 title="Permanent link">&para;</a></h4> <ul> <li>Added the <code>LowCardinality(T)</code> data type. This data type automatically creates a local dictionary of values and allows data processing without unpacking the dictionary. <a href=https://github.com/ClickHouse/ClickHouse/pull/2830 rel="external nofollow noreferrer">#2830</a></li> <li>Added a cache of JIT-compiled functions and a counter for the number of uses before compiling. To JIT compile expressions, enable the <code>compile_expressions</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/2990 rel="external nofollow noreferrer">#2990</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3077 rel="external nofollow noreferrer">#3077</a></li> </ul> <h4 id=improvements-4>Improvements:<a class=headerlink href=#improvements-4 title="Permanent link">&para;</a></h4> <ul> <li>Fixed the problem with unlimited accumulation of the replication log when there are abandoned replicas. Added an effective recovery mode for replicas with a long lag.</li> <li>Improved performance of <code>GROUP BY</code> with multiple aggregation fields when one of them is string and the others are fixed length.</li> <li>Improved performance when using <code>PREWHERE</code> and with implicit transfer of expressions in <code>PREWHERE</code>.</li> <li>Improved parsing performance for text formats (<code>CSV</code>, <code>TSV</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2977 rel="external nofollow noreferrer">Amos Bird</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2980 rel="external nofollow noreferrer">#2980</a></li> <li>Improved performance of reading strings and arrays in binary formats. <a href=https://github.com/ClickHouse/ClickHouse/pull/2955 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Increased performance and reduced memory consumption for queries to <code>system.tables</code> and <code>system.columns</code> when there is a very large number of tables on a single server. <a href=https://github.com/ClickHouse/ClickHouse/pull/2953 rel="external nofollow noreferrer">#2953</a></li> <li>Fixed a performance problem in the case of a large stream of queries that result in an error (the <code>_dl_addr</code> function is visible in <code>perf top</code>, but the server isn’t using much CPU). <a href=https://github.com/ClickHouse/ClickHouse/pull/2938 rel="external nofollow noreferrer">#2938</a></li> <li>Conditions are cast into the View (when <code>enable_optimize_predicate_expression</code> is enabled). <a href=https://github.com/ClickHouse/ClickHouse/pull/2907 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Improvements to the functionality for the <code>UUID</code> data type. <a href=https://github.com/ClickHouse/ClickHouse/pull/3074 rel="external nofollow noreferrer">#3074</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2985 rel="external nofollow noreferrer">#2985</a></li> <li>The <code>UUID</code> data type is supported in The-Alchemist dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/2822 rel="external nofollow noreferrer">#2822</a></li> <li>The <code>visitParamExtractRaw</code> function works correctly with nested structures. <a href=https://github.com/ClickHouse/ClickHouse/pull/2974 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>When the <code>input_format_skip_unknown_fields</code> setting is enabled, object fields in <code>JSONEachRow</code> format are skipped correctly. <a href=https://github.com/ClickHouse/ClickHouse/pull/2958 rel="external nofollow noreferrer">BlahGeek</a></li> <li>For a <code>CASE</code> expression with conditions, you can now omit <code>ELSE</code>, which is equivalent to <code>ELSE NULL</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2920 rel="external nofollow noreferrer">#2920</a></li> <li>The operation timeout can now be configured when working with ZooKeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/2971 rel="external nofollow noreferrer">urykhy</a></li> <li>You can specify an offset for <code>LIMIT n, m</code> as <code>LIMIT n OFFSET m</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2840 rel="external nofollow noreferrer">#2840</a></li> <li>You can use the <code>SELECT TOP n</code> syntax as an alternative for <code>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2840 rel="external nofollow noreferrer">#2840</a></li> <li>Increased the size of the queue to write to system tables, so the <code>SystemLog parameter queue is full</code> error doesn’t happen as often.</li> <li>The <code>windowFunnel</code> aggregate function now supports events that meet multiple conditions. <a href=https://github.com/ClickHouse/ClickHouse/pull/2801 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Duplicate columns can be used in a <code>USING</code> clause for <code>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3006 rel="external nofollow noreferrer">#3006</a></li> <li><code>Pretty</code> formats now have a limit on column alignment by width. Use the <code>output_format_pretty_max_column_pad_width</code> setting. If a value is wider, it will still be displayed in its entirety, but the other cells in the table will not be too wide. <a href=https://github.com/ClickHouse/ClickHouse/pull/3003 rel="external nofollow noreferrer">#3003</a></li> <li>The <code>odbc</code> table function now allows you to specify the database/schema name. <a href=https://github.com/ClickHouse/ClickHouse/pull/2885 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Added the ability to use a username specified in the <code>clickhouse-client</code> config file. <a href=https://github.com/ClickHouse/ClickHouse/pull/2909 rel="external nofollow noreferrer">Vladimir Kozbin</a></li> <li>The <code>ZooKeeperExceptions</code> counter has been split into three counters: <code>ZooKeeperUserExceptions</code>, <code>ZooKeeperHardwareExceptions</code>, and <code>ZooKeeperOtherExceptions</code>.</li> <li><code>ALTER DELETE</code> queries work for materialized views.</li> <li>Added randomization when running the cleanup thread periodically for <code>ReplicatedMergeTree</code> tables in order to avoid periodic load spikes when there are a very large number of <code>ReplicatedMergeTree</code> tables.</li> <li>Support for <code>ATTACH TABLE ... ON CLUSTER</code> queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3025 rel="external nofollow noreferrer">#3025</a></li> </ul> <h4 id=bug-fixes-13>Bug fixes:<a class=headerlink href=#bug-fixes-13 title="Permanent link">&para;</a></h4> <ul> <li>Fixed an issue with <code>Dictionary</code> tables (throws the <code>Size of offsets doesn't match size of column</code> or <code>Unknown compression method</code> exception). This bug appeared in version 18.10.3. <a href=https://github.com/ClickHouse/ClickHouse/issues/2913 rel="external nofollow noreferrer">#2913</a></li> <li>Fixed a bug when merging <code>CollapsingMergeTree</code> tables if one of the data parts is empty (these parts are formed during merge or <code>ALTER DELETE</code> if all data was deleted), and the <code>vertical</code> algorithm was used for the merge. <a href=https://github.com/ClickHouse/ClickHouse/pull/3049 rel="external nofollow noreferrer">#3049</a></li> <li>Fixed a race condition during <code>DROP</code> or <code>TRUNCATE</code> for <code>Memory</code> tables with a simultaneous <code>SELECT</code>, which could lead to server crashes. This bug appeared in version 1.1.54388. <a href=https://github.com/ClickHouse/ClickHouse/pull/3038 rel="external nofollow noreferrer">#3038</a></li> <li>Fixed the possibility of data loss when inserting in <code>Replicated</code> tables if the <code>Session is expired</code> error is returned (data loss can be detected by the <code>ReplicatedDataLoss</code> metric). This error occurred in version 1.1.54378. <a href=https://github.com/ClickHouse/ClickHouse/pull/2939 rel="external nofollow noreferrer">#2939</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2949 rel="external nofollow noreferrer">#2949</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2964 rel="external nofollow noreferrer">#2964</a></li> <li>Fixed a segfault during <code>JOIN ... ON</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3000 rel="external nofollow noreferrer">#3000</a></li> <li>Fixed the error searching column names when the <code>WHERE</code> expression consists entirely of a qualified column name, such as <code>WHERE table.column</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2994 rel="external nofollow noreferrer">#2994</a></li> <li>Fixed the “Not found column” error that occurred when executing distributed queries if a single column consisting of an IN expression with a subquery is requested from a remote server. <a href=https://github.com/ClickHouse/ClickHouse/pull/3087 rel="external nofollow noreferrer">#3087</a></li> <li>Fixed the <code>Block structure mismatch in UNION stream: different number of columns</code> error that occurred for distributed queries if one of the shards is local and the other is not, and optimization of the move to <code>PREWHERE</code> is triggered. <a href=https://github.com/ClickHouse/ClickHouse/pull/2226 rel="external nofollow noreferrer">#2226</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3037 rel="external nofollow noreferrer">#3037</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3055 rel="external nofollow noreferrer">#3055</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3065 rel="external nofollow noreferrer">#3065</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3073 rel="external nofollow noreferrer">#3073</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3090 rel="external nofollow noreferrer">#3090</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3093 rel="external nofollow noreferrer">#3093</a></li> <li>Fixed the <code>pointInPolygon</code> function for certain cases of non-convex polygons. <a href=https://github.com/ClickHouse/ClickHouse/pull/2910 rel="external nofollow noreferrer">#2910</a></li> <li>Fixed the incorrect result when comparing <code>nan</code> with integers. <a href=https://github.com/ClickHouse/ClickHouse/pull/3024 rel="external nofollow noreferrer">#3024</a></li> <li>Fixed an error in the <code>zlib-ng</code> library that could lead to segfault in rare cases. <a href=https://github.com/ClickHouse/ClickHouse/pull/2854 rel="external nofollow noreferrer">#2854</a></li> <li>Fixed a memory leak when inserting into a table with <code>AggregateFunction</code> columns, if the state of the aggregate function is not simple (allocates memory separately), and if a single insertion request results in multiple small blocks. <a href=https://github.com/ClickHouse/ClickHouse/pull/3084 rel="external nofollow noreferrer">#3084</a></li> <li>Fixed a race condition when creating and deleting the same <code>Buffer</code> or <code>MergeTree</code> table simultaneously.</li> <li>Fixed the possibility of a segfault when comparing tuples made up of certain non-trivial types, such as tuples. <a href=https://github.com/ClickHouse/ClickHouse/pull/2989 rel="external nofollow noreferrer">#2989</a></li> <li>Fixed the possibility of a segfault when running certain <code>ON CLUSTER</code> queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/2960 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed an error in the <code>arrayDistinct</code> function for <code>Nullable</code> array elements. <a href=https://github.com/ClickHouse/ClickHouse/pull/2845 rel="external nofollow noreferrer">#2845</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2937 rel="external nofollow noreferrer">#2937</a></li> <li>The <code>enable_optimize_predicate_expression</code> option now correctly supports cases with <code>SELECT *</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2929 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed the segfault when re-initializing the ZooKeeper session. <a href=https://github.com/ClickHouse/ClickHouse/pull/2917 rel="external nofollow noreferrer">#2917</a></li> <li>Fixed potential blocking when working with ZooKeeper.</li> <li>Fixed incorrect code for adding nested data structures in a <code>SummingMergeTree</code>.</li> <li>When allocating memory for states of aggregate functions, alignment is correctly taken into account, which makes it possible to use operations that require alignment when implementing states of aggregate functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/2808 rel="external nofollow noreferrer">chenxing-xc</a></li> </ul> <h4 id=security-fix>Security fix:<a class=headerlink href=#security-fix title="Permanent link">&para;</a></h4> <ul> <li>Safe use of ODBC data sources. Interaction with ODBC drivers uses a separate <code>clickhouse-odbc-bridge</code> process. Errors in third-party ODBC drivers no longer cause problems with server stability or vulnerabilities. <a href=https://github.com/ClickHouse/ClickHouse/pull/2828 rel="external nofollow noreferrer">#2828</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2879 rel="external nofollow noreferrer">#2879</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2886 rel="external nofollow noreferrer">#2886</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2893 rel="external nofollow noreferrer">#2893</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2921 rel="external nofollow noreferrer">#2921</a></li> <li>Fixed incorrect validation of the file path in the <code>catBoostPool</code> table function. <a href=https://github.com/ClickHouse/ClickHouse/pull/2894 rel="external nofollow noreferrer">#2894</a></li> <li>The contents of system tables (<code>tables</code>, <code>databases</code>, <code>parts</code>, <code>columns</code>, <code>parts_columns</code>, <code>merges</code>, <code>mutations</code>, <code>replicas</code>, and <code>replication_queue</code>) are filtered according to the user’s configured access to databases (<code>allow_databases</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2856 rel="external nofollow noreferrer">Winter Zhang</a></li> </ul> <h4 id=backward-incompatible-changes-3>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-3 title="Permanent link">&para;</a></h4> <ul> <li>In queries with JOIN, the star character expands to a list of columns in all tables, in compliance with the SQL standard. You can restore the old behavior by setting <code>asterisk_left_columns_only</code> to 1 on the user configuration level.</li> </ul> <h4 id=build-changes-2>Build changes:<a class=headerlink href=#build-changes-2 title="Permanent link">&para;</a></h4> <ul> <li>Most integration tests can now be run by commit.</li> <li>Code style checks can also be run by commit.</li> <li>The <code>memcpy</code> implementation is chosen correctly when building on CentOS7/Fedora. <a href=https://github.com/ClickHouse/ClickHouse/pull/2912 rel="external nofollow noreferrer">Etienne Champetier</a></li> <li>When using clang to build, some warnings from <code>-Weverything</code> have been added, in addition to the regular <code>-Wall-Wextra -Werror</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2957 rel="external nofollow noreferrer">#2957</a></li> <li>Debugging the build uses the <code>jemalloc</code> debug option.</li> <li>The interface of the library for interacting with ZooKeeper is declared abstract. <a href=https://github.com/ClickHouse/ClickHouse/pull/2950 rel="external nofollow noreferrer">#2950</a></li> </ul> <h2 id=clickhouse-release-18-10>ClickHouse release 18.10<a class=headerlink href=#clickhouse-release-18-10 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-10-3-2018-08-13>ClickHouse release 18.10.3, 2018-08-13<a class=headerlink href=#clickhouse-release-18-10-3-2018-08-13 title="Permanent link">&para;</a></h3> <h4 id=new-features-5>New features:<a class=headerlink href=#new-features-5 title="Permanent link">&para;</a></h4> <ul> <li>HTTPS can be used for replication. <a href=https://github.com/ClickHouse/ClickHouse/pull/2760 rel="external nofollow noreferrer">#2760</a></li> <li>Added the functions <code>murmurHash2_64</code>, <code>murmurHash3_32</code>, <code>murmurHash3_64</code>, and <code>murmurHash3_128</code> in addition to the existing <code>murmurHash2_32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2791 rel="external nofollow noreferrer">#2791</a></li> <li>Support for Nullable types in the ClickHouse ODBC driver (<code>ODBCDriver2</code> output format). <a href=https://github.com/ClickHouse/ClickHouse/pull/2834 rel="external nofollow noreferrer">#2834</a></li> <li>Support for <code>UUID</code> in the key columns.</li> </ul> <h4 id=improvements-5>Improvements:<a class=headerlink href=#improvements-5 title="Permanent link">&para;</a></h4> <ul> <li>Clusters can be removed without restarting the server when they are deleted from the config files. <a href=https://github.com/ClickHouse/ClickHouse/pull/2777 rel="external nofollow noreferrer">#2777</a></li> <li>External dictionaries can be removed without restarting the server when they are removed from config files. <a href=https://github.com/ClickHouse/ClickHouse/pull/2779 rel="external nofollow noreferrer">#2779</a></li> <li>Added <code>SETTINGS</code> support for the <code>Kafka</code> table engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/2781 rel="external nofollow noreferrer">Alexander Marshalov</a></li> <li>Improvements for the <code>UUID</code> data type (not yet complete). <a href=https://github.com/ClickHouse/ClickHouse/pull/2618 rel="external nofollow noreferrer">#2618</a></li> <li>Support for empty parts after merges in the <code>SummingMergeTree</code>, <code>CollapsingMergeTree</code> and <code>VersionedCollapsingMergeTree</code> engines. <a href=https://github.com/ClickHouse/ClickHouse/pull/2815 rel="external nofollow noreferrer">#2815</a></li> <li>Old records of completed mutations are deleted (<code>ALTER DELETE</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2784 rel="external nofollow noreferrer">#2784</a></li> <li>Added the <code>system.merge_tree_settings</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/2841 rel="external nofollow noreferrer">Kirill Shvakov</a></li> <li>The <code>system.tables</code> table now has dependency columns: <code>dependencies_database</code> and <code>dependencies_table</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2851 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Added the <code>max_partition_size_to_drop</code> config option. <a href=https://github.com/ClickHouse/ClickHouse/pull/2782 rel="external nofollow noreferrer">#2782</a></li> <li>Added the <code>output_format_json_escape_forward_slashes</code> option. <a href=https://github.com/ClickHouse/ClickHouse/pull/2812 rel="external nofollow noreferrer">Alexander Bocharov</a></li> <li>Added the <code>max_fetch_partition_retries_count</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/2831 rel="external nofollow noreferrer">#2831</a></li> <li>Added the <code>prefer_localhost_replica</code> setting for disabling the preference for a local replica and going to a local replica without inter-process interaction. <a href=https://github.com/ClickHouse/ClickHouse/pull/2832 rel="external nofollow noreferrer">#2832</a></li> <li>The <code>quantileExact</code> aggregate function returns <code>nan</code> in the case of aggregation on an empty <code>Float32</code> or <code>Float64</code> set. <a href=https://github.com/ClickHouse/ClickHouse/pull/2855 rel="external nofollow noreferrer">Sundy Li</a></li> </ul> <h4 id=bug-fixes-14>Bug fixes:<a class=headerlink href=#bug-fixes-14 title="Permanent link">&para;</a></h4> <ul> <li>Removed unnecessary escaping of the connection string parameters for ODBC, which made it impossible to establish a connection. This error occurred in version 18.6.0.</li> <li>Fixed the logic for processing <code>REPLACE PARTITION</code> commands in the replication queue. If there are two <code>REPLACE</code> commands for the same partition, the incorrect logic could cause one of them to remain in the replication queue and not be executed. <a href=https://github.com/ClickHouse/ClickHouse/pull/2814 rel="external nofollow noreferrer">#2814</a></li> <li>Fixed a merge bug when all data parts were empty (parts that were formed from a merge or from <code>ALTER DELETE</code> if all data was deleted). This bug appeared in version 18.1.0. <a href=https://github.com/ClickHouse/ClickHouse/pull/2930 rel="external nofollow noreferrer">#2930</a></li> <li>Fixed an error for concurrent <code>Set</code> or <code>Join</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2823 rel="external nofollow noreferrer">Amos Bird</a></li> <li>Fixed the <code>Block structure mismatch in UNION stream: different number of columns</code> error that occurred for <code>UNION ALL</code> queries inside a sub-query if one of the <code>SELECT</code> queries contains duplicate column names. <a href=https://github.com/ClickHouse/ClickHouse/pull/2094 rel="external nofollow noreferrer">Winter Zhang</a></li> <li>Fixed a memory leak if an exception occurred when connecting to a MySQL server.</li> <li>Fixed incorrect clickhouse-client response code in case of a query error.</li> <li>Fixed incorrect behavior of materialized views containing DISTINCT. <a href=https://github.com/ClickHouse/ClickHouse/issues/2795 rel="external nofollow noreferrer">#2795</a></li> </ul> <h4 id=backward-incompatible-changes-4>Backward incompatible changes<a class=headerlink href=#backward-incompatible-changes-4 title="Permanent link">&para;</a></h4> <ul> <li>Removed support for CHECK TABLE queries for Distributed tables.</li> </ul> <h4 id=build-changes-3>Build changes:<a class=headerlink href=#build-changes-3 title="Permanent link">&para;</a></h4> <ul> <li>The allocator has been replaced: <code>jemalloc</code> is now used instead of <code>tcmalloc</code>. In some scenarios, this increases speed up to 20%. However, there are queries that have slowed by up to 20%. Memory consumption has been reduced by approximately 10% in some scenarios, with improved stability. With highly competitive loads, CPU usage in userspace and in system shows just a slight increase. <a href=https://github.com/ClickHouse/ClickHouse/pull/2773 rel="external nofollow noreferrer">#2773</a></li> <li>Use of libressl from a submodule. <a href=https://github.com/ClickHouse/ClickHouse/pull/1983 rel="external nofollow noreferrer">#1983</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2807 rel="external nofollow noreferrer">#2807</a></li> <li>Use of unixodbc from a submodule. <a href=https://github.com/ClickHouse/ClickHouse/pull/2789 rel="external nofollow noreferrer">#2789</a></li> <li>Use of mariadb-connector-c from a submodule. <a href=https://github.com/ClickHouse/ClickHouse/pull/2785 rel="external nofollow noreferrer">#2785</a></li> <li>Added functional test files to the repository that depend on the availability of test data (for the time being, without the test data itself).</li> </ul> <h2 id=clickhouse-release-18-6>ClickHouse release 18.6<a class=headerlink href=#clickhouse-release-18-6 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-6-0-2018-08-02>ClickHouse release 18.6.0, 2018-08-02<a class=headerlink href=#clickhouse-release-18-6-0-2018-08-02 title="Permanent link">&para;</a></h3> <h4 id=new-features-6>New features:<a class=headerlink href=#new-features-6 title="Permanent link">&para;</a></h4> <ul> <li>Added support for ON expressions for the JOIN ON syntax:<br> <code>JOIN ON Expr([table.]column ...) = Expr([table.]column, ...) [AND Expr([table.]column, ...) = Expr([table.]column, ...) ...]</code><br> The expression must be a chain of equalities joined by the AND operator. Each side of the equality can be an arbitrary expression over the columns of one of the tables. The use of fully qualified column names is supported (<code>table.name</code>, <code>database.table.name</code>, <code>table_alias.name</code>, <code>subquery_alias.name</code>) for the right table. <a href=https://github.com/ClickHouse/ClickHouse/pull/2742 rel="external nofollow noreferrer">#2742</a></li> <li>HTTPS can be enabled for replication. <a href=https://github.com/ClickHouse/ClickHouse/pull/2760 rel="external nofollow noreferrer">#2760</a></li> </ul> <h4 id=improvements-6>Improvements:<a class=headerlink href=#improvements-6 title="Permanent link">&para;</a></h4> <ul> <li>The server passes the patch component of its version to the client. Data about the patch version component is in <code>system.processes</code> and <code>query_log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2646 rel="external nofollow noreferrer">#2646</a></li> </ul> <h2 id=clickhouse-release-18-5>ClickHouse release 18.5<a class=headerlink href=#clickhouse-release-18-5 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-5-1-2018-07-31>ClickHouse release 18.5.1, 2018-07-31<a class=headerlink href=#clickhouse-release-18-5-1-2018-07-31 title="Permanent link">&para;</a></h3> <h4 id=new-features-7>New features:<a class=headerlink href=#new-features-7 title="Permanent link">&para;</a></h4> <ul> <li>Added the hash function <code>murmurHash2_32</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2756 rel="external nofollow noreferrer">#2756</a>.</li> </ul> <h4 id=improvements-7>Improvements:<a class=headerlink href=#improvements-7 title="Permanent link">&para;</a></h4> <ul> <li>Now you can use the <code>from_env</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2741 rel="external nofollow noreferrer">#2741</a> attribute to set values in config files from environment variables.</li> <li>Added case-insensitive versions of the <code>coalesce</code>, <code>ifNull</code>, and <code>nullIf functions</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2752 rel="external nofollow noreferrer">#2752</a>.</li> </ul> <h4 id=bug-fixes-15>Bug fixes:<a class=headerlink href=#bug-fixes-15 title="Permanent link">&para;</a></h4> <ul> <li>Fixed a possible bug when starting a replica <a href=https://github.com/ClickHouse/ClickHouse/pull/2759 rel="external nofollow noreferrer">#2759</a>.</li> </ul> <h2 id=clickhouse-release-18-4>ClickHouse release 18.4<a class=headerlink href=#clickhouse-release-18-4 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-4-0-2018-07-28>ClickHouse release 18.4.0, 2018-07-28<a class=headerlink href=#clickhouse-release-18-4-0-2018-07-28 title="Permanent link">&para;</a></h3> <h4 id=new-features-8>New features:<a class=headerlink href=#new-features-8 title="Permanent link">&para;</a></h4> <ul> <li>Added system tables: <code>formats</code>, <code>data_type_families</code>, <code>aggregate_function_combinators</code>, <code>table_functions</code>, <code>table_engines</code>, <code>collations</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2721 rel="external nofollow noreferrer">#2721</a>.</li> <li>Added the ability to use a table function instead of a table as an argument of a <code>remote</code> or <code>cluster table function</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2708 rel="external nofollow noreferrer">#2708</a>.</li> <li>Support for <code>HTTP Basic</code> authentication in the replication protocol <a href=https://github.com/ClickHouse/ClickHouse/pull/2727 rel="external nofollow noreferrer">#2727</a>.</li> <li>The <code>has</code> function now allows searching for a numeric value in an array of <code>Enum</code> values <a href=https://github.com/ClickHouse/ClickHouse/pull/2699 rel="external nofollow noreferrer">Maxim Khrisanfov</a>.</li> <li>Support for adding arbitrary message separators when reading from <code>Kafka</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2701 rel="external nofollow noreferrer">Amos Bird</a>.</li> </ul> <h4 id=improvements-8>Improvements:<a class=headerlink href=#improvements-8 title="Permanent link">&para;</a></h4> <ul> <li>The <code>ALTER TABLE t DELETE WHERE</code> query does not rewrite data parts that were not affected by the WHERE condition <a href=https://github.com/ClickHouse/ClickHouse/pull/2694 rel="external nofollow noreferrer">#2694</a>.</li> <li>The <code>use_minimalistic_checksums_in_zookeeper</code> option for <code>ReplicatedMergeTree</code> tables is enabled by default. This setting was added in version 1.1.54378, 2018-04-16. Versions that are older than 1.1.54378 can no longer be installed.</li> <li>Support for running <code>KILL</code> and <code>OPTIMIZE</code> queries that specify <code>ON CLUSTER</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2689 rel="external nofollow noreferrer">Winter Zhang</a>.</li> </ul> <h4 id=bug-fixes-16>Bug fixes:<a class=headerlink href=#bug-fixes-16 title="Permanent link">&para;</a></h4> <ul> <li>Fixed the error <code>Column ... is not under an aggregate function and not in GROUP BY</code> for aggregation with an IN expression. This bug appeared in version 18.1.0. (<a href=https://github.com/ClickHouse/ClickHouse/commit/bbdd780be0be06a0f336775941cdd536878dd2c2 rel="external nofollow noreferrer">bbdd780b</a>)</li> <li>Fixed a bug in the <code>windowFunnel aggregate function</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2735 rel="external nofollow noreferrer">Winter Zhang</a>.</li> <li>Fixed a bug in the <code>anyHeavy</code> aggregate function (<a href=https://github.com/ClickHouse/ClickHouse/commit/a2101df25a6a0fba99aa71f8793d762af2b801ee rel="external nofollow noreferrer">a2101df2</a>)</li> <li>Fixed server crash when using the <code>countArray()</code> aggregate function.</li> </ul> <h4 id=backward-incompatible-changes-5>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-5 title="Permanent link">&para;</a></h4> <ul> <li>Parameters for <code>Kafka</code> engine was changed from <code>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_schema, kafka_num_consumers])</code> to <code>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_row_delimiter, kafka_schema, kafka_num_consumers])</code>. If your tables use <code>kafka_schema</code> or <code>kafka_num_consumers</code> parameters, you have to manually edit the metadata files <code>path/metadata/database/table.sql</code> and add <code>kafka_row_delimiter</code> parameter with <code>''</code> value.</li> </ul> <h2 id=clickhouse-release-18-1>ClickHouse release 18.1<a class=headerlink href=#clickhouse-release-18-1 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-18-1-0-2018-07-23>ClickHouse release 18.1.0, 2018-07-23<a class=headerlink href=#clickhouse-release-18-1-0-2018-07-23 title="Permanent link">&para;</a></h3> <h4 id=new-features-9>New features:<a class=headerlink href=#new-features-9 title="Permanent link">&para;</a></h4> <ul> <li>Support for the <code>ALTER TABLE t DELETE WHERE</code> query for non-replicated MergeTree tables (<a href=https://github.com/ClickHouse/ClickHouse/pull/2634 rel="external nofollow noreferrer">#2634</a>).</li> <li>Support for arbitrary types for the <code>uniq*</code> family of aggregate functions (<a href=https://github.com/ClickHouse/ClickHouse/issues/2010 rel="external nofollow noreferrer">#2010</a>).</li> <li>Support for arbitrary types in comparison operators (<a href=https://github.com/ClickHouse/ClickHouse/issues/2026 rel="external nofollow noreferrer">#2026</a>).</li> <li>The <code>users.xml</code> file allows setting a subnet mask in the format <code>10.0.0.1/255.255.255.0</code>. This is necessary for using masks for IPv6 networks with zeros in the middle (<a href=https://github.com/ClickHouse/ClickHouse/pull/2637 rel="external nofollow noreferrer">#2637</a>).</li> <li>Added the <code>arrayDistinct</code> function (<a href=https://github.com/ClickHouse/ClickHouse/pull/2670 rel="external nofollow noreferrer">#2670</a>).</li> <li>The SummingMergeTree engine can now work with AggregateFunction type columns (<a href=https://github.com/ClickHouse/ClickHouse/pull/2566 rel="external nofollow noreferrer">Constantin S. Pan</a>).</li> </ul> <h4 id=improvements-9>Improvements:<a class=headerlink href=#improvements-9 title="Permanent link">&para;</a></h4> <ul> <li>Changed the numbering scheme for release versions. Now the first part contains the year of release (A.D., Moscow timezone, minus 2000), the second part contains the number for major changes (increases for most releases), and the third part is the patch version. Releases are still backward compatible, unless otherwise stated in the changelog.</li> <li>Faster conversions of floating-point numbers to a string (<a href=https://github.com/ClickHouse/ClickHouse/pull/2664 rel="external nofollow noreferrer">Amos Bird</a>).</li> <li>If some rows were skipped during an insert due to parsing errors (this is possible with the <code>input_allow_errors_num</code> and <code>input_allow_errors_ratio</code> settings enabled), the number of skipped rows is now written to the server log (<a href=https://github.com/ClickHouse/ClickHouse/pull/2669 rel="external nofollow noreferrer">Leonardo Cecchi</a>).</li> </ul> <h4 id=bug-fixes-17>Bug fixes:<a class=headerlink href=#bug-fixes-17 title="Permanent link">&para;</a></h4> <ul> <li>Fixed the TRUNCATE command for temporary tables (<a href=https://github.com/ClickHouse/ClickHouse/pull/2624 rel="external nofollow noreferrer">Amos Bird</a>).</li> <li>Fixed a rare deadlock in the ZooKeeper client library that occurred when there was a network error while reading the response (<a href=https://github.com/ClickHouse/ClickHouse/commit/c315200e64b87e44bdf740707fc857d1fdf7e947 rel="external nofollow noreferrer">c315200</a>).</li> <li>Fixed an error during a CAST to Nullable types (<a href=https://github.com/ClickHouse/ClickHouse/issues/1322 rel="external nofollow noreferrer">#1322</a>).</li> <li>Fixed the incorrect result of the <code>maxIntersection()</code> function when the boundaries of intervals coincided (<a href=https://github.com/ClickHouse/ClickHouse/pull/2657 rel="external nofollow noreferrer">Michael Furmur</a>).</li> <li>Fixed incorrect transformation of the OR expression chain in a function argument (<a href=https://github.com/ClickHouse/ClickHouse/pull/2663 rel="external nofollow noreferrer">chenxing-xc</a>).</li> <li>Fixed performance degradation for queries containing <code>IN (subquery)</code> expressions inside another subquery (<a href=https://github.com/ClickHouse/ClickHouse/issues/2571 rel="external nofollow noreferrer">#2571</a>).</li> <li>Fixed incompatibility between servers with different versions in distributed queries that use a <code>CAST</code> function that isn’t in uppercase letters (<a href=https://github.com/ClickHouse/ClickHouse/commit/fe8c4d64e434cacd4ceef34faa9005129f2190a5 rel="external nofollow noreferrer">fe8c4d6</a>).</li> <li>Added missing quoting of identifiers for queries to an external DBMS (<a href=https://github.com/ClickHouse/ClickHouse/issues/2635 rel="external nofollow noreferrer">#2635</a>).</li> </ul> <h4 id=backward-incompatible-changes-6>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-6 title="Permanent link">&para;</a></h4> <ul> <li>Converting a string containing the number zero to DateTime does not work. Example: <code>SELECT toDateTime('0')</code>. This is also the reason that <code>DateTime DEFAULT '0'</code> does not work in tables, as well as <code>&lt;null_value&gt;0&lt;/null_value&gt;</code> in dictionaries. Solution: replace <code>0</code> with <code>0000-00-00 00:00:00</code>.</li> </ul> <h2 id=clickhouse-release-1-1>ClickHouse release 1.1<a class=headerlink href=#clickhouse-release-1-1 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-1-1-54394-2018-07-12>ClickHouse release 1.1.54394, 2018-07-12<a class=headerlink href=#clickhouse-release-1-1-54394-2018-07-12 title="Permanent link">&para;</a></h3> <h4 id=new-features-10>New features:<a class=headerlink href=#new-features-10 title="Permanent link">&para;</a></h4> <ul> <li>Added the <code>histogram</code> aggregate function (<a href=https://github.com/ClickHouse/ClickHouse/pull/2521 rel="external nofollow noreferrer">Mikhail Surin</a>).</li> <li>Now <code>OPTIMIZE TABLE ... FINAL</code> can be used without specifying partitions for <code>ReplicatedMergeTree</code> (<a href=https://github.com/ClickHouse/ClickHouse/pull/2600 rel="external nofollow noreferrer">Amos Bird</a>).</li> </ul> <h4 id=bug-fixes-18>Bug fixes:<a class=headerlink href=#bug-fixes-18 title="Permanent link">&para;</a></h4> <ul> <li>Fixed a problem with a very small timeout for sockets (one second) for reading and writing when sending and downloading replicated data, which made it impossible to download larger parts if there is a load on the network or disk (it resulted in cyclical attempts to download parts). This error occurred in version 1.1.54388.</li> <li>Fixed issues when using chroot in ZooKeeper if you inserted duplicate data blocks in the table.</li> <li>The <code>has</code> function now works correctly for an array with Nullable elements (<a href=https://github.com/ClickHouse/ClickHouse/issues/2115 rel="external nofollow noreferrer">#2115</a>).</li> <li>The <code>system.tables</code> table now works correctly when used in distributed queries. The <code>metadata_modification_time</code> and <code>engine_full</code> columns are now non-virtual. Fixed an error that occurred if only these columns were queried from the table.</li> <li>Fixed how an empty <code>TinyLog</code> table works after inserting an empty data block (<a href=https://github.com/ClickHouse/ClickHouse/issues/2563 rel="external nofollow noreferrer">#2563</a>).</li> <li>The <code>system.zookeeper</code> table works if the value of the node in ZooKeeper is NULL.</li> </ul> <h3 id=clickhouse-release-1-1-54390-2018-07-06>ClickHouse release 1.1.54390, 2018-07-06<a class=headerlink href=#clickhouse-release-1-1-54390-2018-07-06 title="Permanent link">&para;</a></h3> <h4 id=new-features-11>New features:<a class=headerlink href=#new-features-11 title="Permanent link">&para;</a></h4> <ul> <li>Queries can be sent in <code>multipart/form-data</code> format (in the <code>query</code> field), which is useful if external data is also sent for query processing (<a href=https://github.com/ClickHouse/ClickHouse/pull/2490 rel="external nofollow noreferrer">Olga Hvostikova</a>).</li> <li>Added the ability to enable or disable processing single or double quotes when reading data in CSV format. You can configure this in the <code>format_csv_allow_single_quotes</code> and <code>format_csv_allow_double_quotes</code> settings (<a href=https://github.com/ClickHouse/ClickHouse/pull/2574 rel="external nofollow noreferrer">Amos Bird</a>).</li> <li>Now <code>OPTIMIZE TABLE ... FINAL</code> can be used without specifying the partition for non-replicated variants of <code>MergeTree</code> (<a href=https://github.com/ClickHouse/ClickHouse/pull/2599 rel="external nofollow noreferrer">Amos Bird</a>).</li> </ul> <h4 id=improvements-10>Improvements:<a class=headerlink href=#improvements-10 title="Permanent link">&para;</a></h4> <ul> <li>Improved performance, reduced memory consumption, and correct memory consumption tracking with use of the IN operator when a table index could be used (<a href=https://github.com/ClickHouse/ClickHouse/pull/2584 rel="external nofollow noreferrer">#2584</a>).</li> <li>Removed redundant checking of checksums when adding a data part. This is important when there are a large number of replicas, because in these cases the total number of checks was equal to N^2.</li> <li>Added support for <code>Array(Tuple(...))</code> arguments for the <code>arrayEnumerateUniq</code> function (<a href=https://github.com/ClickHouse/ClickHouse/pull/2573 rel="external nofollow noreferrer">#2573</a>).</li> <li>Added <code>Nullable</code> support for the <code>runningDifference</code> function (<a href=https://github.com/ClickHouse/ClickHouse/pull/2594 rel="external nofollow noreferrer">#2594</a>).</li> <li>Improved query analysis performance when there is a very large number of expressions (<a href=https://github.com/ClickHouse/ClickHouse/pull/2572 rel="external nofollow noreferrer">#2572</a>).</li> <li>Faster selection of data parts for merging in <code>ReplicatedMergeTree</code> tables. Faster recovery of the ZooKeeper session (<a href=https://github.com/ClickHouse/ClickHouse/pull/2597 rel="external nofollow noreferrer">#2597</a>).</li> <li>The <code>format_version.txt</code> file for <code>MergeTree</code> tables is re-created if it is missing, which makes sense if ClickHouse is launched after copying the directory structure without files (<a href=https://github.com/ClickHouse/ClickHouse/pull/2593 rel="external nofollow noreferrer">Ciprian Hacman</a>).</li> </ul> <h4 id=bug-fixes-19>Bug fixes:<a class=headerlink href=#bug-fixes-19 title="Permanent link">&para;</a></h4> <ul> <li>Fixed a bug when working with ZooKeeper that could make it impossible to recover the session and readonly states of tables before restarting the server.</li> <li>Fixed a bug when working with ZooKeeper that could result in old nodes not being deleted if the session is interrupted.</li> <li>Fixed an error in the <code>quantileTDigest</code> function for Float arguments (this bug was introduced in version 1.1.54388) (<a href=https://github.com/ClickHouse/ClickHouse/pull/2553 rel="external nofollow noreferrer">Mikhail Surin</a>).</li> <li>Fixed a bug in the index for MergeTree tables if the primary key column is located inside the function for converting types between signed and unsigned integers of the same size (<a href=https://github.com/ClickHouse/ClickHouse/pull/2603 rel="external nofollow noreferrer">#2603</a>).</li> <li>Fixed segfault if <code>macros</code> are used but they aren’t in the config file (<a href=https://github.com/ClickHouse/ClickHouse/pull/2570 rel="external nofollow noreferrer">#2570</a>).</li> <li>Fixed switching to the default database when reconnecting the client (<a href=https://github.com/ClickHouse/ClickHouse/pull/2583 rel="external nofollow noreferrer">#2583</a>).</li> <li>Fixed a bug that occurred when the <code>use_index_for_in_with_subqueries</code> setting was disabled.</li> </ul> <h4 id=security-fix-1>Security fix:<a class=headerlink href=#security-fix-1 title="Permanent link">&para;</a></h4> <ul> <li>Sending files is no longer possible when connected to MySQL (<code>LOAD DATA LOCAL INFILE</code>).</li> </ul> <h3 id=clickhouse-release-1-1-54388-2018-06-28>ClickHouse release 1.1.54388, 2018-06-28<a class=headerlink href=#clickhouse-release-1-1-54388-2018-06-28 title="Permanent link">&para;</a></h3> <h4 id=new-features-12>New features:<a class=headerlink href=#new-features-12 title="Permanent link">&para;</a></h4> <ul> <li>Support for the <code>ALTER TABLE t DELETE WHERE</code> query for replicated tables. Added the <code>system.mutations</code> table to track progress of this type of queries.</li> <li>Support for the <code>ALTER TABLE t [REPLACE|ATTACH] PARTITION</code> query for *MergeTree tables.</li> <li>Support for the <code>TRUNCATE TABLE</code> query (<a href=https://github.com/ClickHouse/ClickHouse/pull/2260 rel="external nofollow noreferrer">Winter Zhang</a>)</li> <li>Several new <code>SYSTEM</code> queries for replicated tables (<code>RESTART REPLICAS</code>, <code>SYNC REPLICA</code>, <code>[STOP|START] [MERGES|FETCHES|SENDS REPLICATED|REPLICATION QUEUES]</code>).</li> <li>Added the ability to write to a table with the MySQL engine and the corresponding table function (<a href=https://github.com/ClickHouse/ClickHouse/pull/2294 rel="external nofollow noreferrer">sundy-li</a>).</li> <li>Added the <code>url()</code> table function and the <code>URL</code> table engine (<a href=https://github.com/ClickHouse/ClickHouse/pull/2501 rel="external nofollow noreferrer">Alexander Sapin</a>).</li> <li>Added the <code>windowFunnel</code> aggregate function (<a href=https://github.com/ClickHouse/ClickHouse/pull/2352 rel="external nofollow noreferrer">sundy-li</a>).</li> <li>New <code>startsWith</code> and <code>endsWith</code> functions for strings (<a href=https://github.com/ClickHouse/ClickHouse/pull/2429 rel="external nofollow noreferrer">Vadim Plakhtinsky</a>).</li> <li>The <code>numbers()</code> table function now allows you to specify the offset (<a href=https://github.com/ClickHouse/ClickHouse/pull/2535 rel="external nofollow noreferrer">Winter Zhang</a>).</li> <li>The password to <code>clickhouse-client</code> can be entered interactively.</li> <li>Server logs can now be sent to syslog (<a href=https://github.com/ClickHouse/ClickHouse/pull/2459 rel="external nofollow noreferrer">Alexander Krasheninnikov</a>).</li> <li>Support for logging in dictionaries with a shared library source (<a href=https://github.com/ClickHouse/ClickHouse/pull/2472 rel="external nofollow noreferrer">Alexander Sapin</a>).</li> <li>Support for custom CSV delimiters (<a href=https://github.com/ClickHouse/ClickHouse/pull/2263 rel="external nofollow noreferrer">Ivan Zhukov</a>)</li> <li>Added the <code>date_time_input_format</code> setting. If you switch this setting to <code>'best_effort'</code>, DateTime values will be read in a wide range of formats.</li> <li>Added the <code>clickhouse-obfuscator</code> utility for data obfuscation. Usage example: publishing data used in performance tests.</li> </ul> <h4 id=experimental-features-2>Experimental features:<a class=headerlink href=#experimental-features-2 title="Permanent link">&para;</a></h4> <ul> <li>Added the ability to calculate <code>and</code> arguments only where they are needed (<a href=https://github.com/ClickHouse/ClickHouse/pull/2272 rel="external nofollow noreferrer">Anastasia Tsarkova</a>)</li> <li>JIT compilation to native code is now available for some expressions (<a href=https://github.com/ClickHouse/ClickHouse/pull/2277 rel="external nofollow noreferrer">pyos</a>).</li> </ul> <h4 id=bug-fixes-20>Bug fixes:<a class=headerlink href=#bug-fixes-20 title="Permanent link">&para;</a></h4> <ul> <li>Duplicates no longer appear for a query with <code>DISTINCT</code> and <code>ORDER BY</code>.</li> <li>Queries with <code>ARRAY JOIN</code> and <code>arrayFilter</code> no longer return an incorrect result.</li> <li>Fixed an error when reading an array column from a Nested structure (<a href=https://github.com/ClickHouse/ClickHouse/issues/2066 rel="external nofollow noreferrer">#2066</a>).</li> <li>Fixed an error when analyzing queries with a HAVING clause like <code>HAVING tuple IN (...)</code>.</li> <li>Fixed an error when analyzing queries with recursive aliases.</li> <li>Fixed an error when reading from ReplacingMergeTree with a condition in PREWHERE that filters all rows (<a href=https://github.com/ClickHouse/ClickHouse/issues/2525 rel="external nofollow noreferrer">#2525</a>).</li> <li>User profile settings were not applied when using sessions in the HTTP interface.</li> <li>Fixed how settings are applied from the command line parameters in clickhouse-local.</li> <li>The ZooKeeper client library now uses the session timeout received from the server.</li> <li>Fixed a bug in the ZooKeeper client library when the client waited for the server response longer than the timeout.</li> <li>Fixed pruning of parts for queries with conditions on partition key columns (<a href=https://github.com/ClickHouse/ClickHouse/issues/2342 rel="external nofollow noreferrer">#2342</a>).</li> <li>Merges are now possible after <code>CLEAR COLUMN IN PARTITION</code> (<a href=https://github.com/ClickHouse/ClickHouse/issues/2315 rel="external nofollow noreferrer">#2315</a>).</li> <li>Type mapping in the ODBC table function has been fixed (<a href=https://github.com/ClickHouse/ClickHouse/pull/2268 rel="external nofollow noreferrer">sundy-li</a>).</li> <li>Type comparisons have been fixed for <code>DateTime</code> with and without the time zone (<a href=https://github.com/ClickHouse/ClickHouse/pull/2400 rel="external nofollow noreferrer">Alexander Bocharov</a>).</li> <li>Fixed syntactic parsing and formatting of the <code>CAST</code> operator.</li> <li>Fixed insertion into a materialized view for the Distributed table engine (<a href=https://github.com/ClickHouse/ClickHouse/pull/2411 rel="external nofollow noreferrer">Babacar Diassé</a>).</li> <li>Fixed a race condition when writing data from the <code>Kafka</code> engine to materialized views (<a href=https://github.com/ClickHouse/ClickHouse/pull/2448 rel="external nofollow noreferrer">Yangkuan Liu</a>).</li> <li>Fixed SSRF in the remote() table function.</li> <li>Fixed exit behavior of <code>clickhouse-client</code> in multiline mode (<a href=https://github.com/ClickHouse/ClickHouse/issues/2510 rel="external nofollow noreferrer">#2510</a>).</li> </ul> <h4 id=improvements-11>Improvements:<a class=headerlink href=#improvements-11 title="Permanent link">&para;</a></h4> <ul> <li>Background tasks in replicated tables are now performed in a thread pool instead of in separate threads (<a href=https://github.com/ClickHouse/ClickHouse/pull/1722 rel="external nofollow noreferrer">Silviu Caragea</a>).</li> <li>Improved LZ4 compression performance.</li> <li>Faster analysis for queries with a large number of JOINs and sub-queries.</li> <li>The DNS cache is now updated automatically when there are too many network errors.</li> <li>Table inserts no longer occur if the insert into one of the materialized views is not possible because it has too many parts.</li> <li>Corrected the discrepancy in the event counters <code>Query</code>, <code>SelectQuery</code>, and <code>InsertQuery</code>.</li> <li>Expressions like <code>tuple IN (SELECT tuple)</code> are allowed if the tuple types match.</li> <li>A server with replicated tables can start even if you haven’t configured ZooKeeper.</li> <li>When calculating the number of available CPU cores, limits on cgroups are now taken into account (<a href=https://github.com/ClickHouse/ClickHouse/pull/2325 rel="external nofollow noreferrer">Atri Sharma</a>).</li> <li>Added chown for config directories in the systemd config file (<a href=https://github.com/ClickHouse/ClickHouse/pull/2421 rel="external nofollow noreferrer">Mikhail Shiryaev</a>).</li> </ul> <h4 id=build-changes-4>Build changes:<a class=headerlink href=#build-changes-4 title="Permanent link">&para;</a></h4> <ul> <li>The gcc8 compiler can be used for builds.</li> <li>Added the ability to build llvm from submodule.</li> <li>The version of the librdkafka library has been updated to v0.11.4.</li> <li>Added the ability to use the system libcpuid library. The library version has been updated to 0.4.0.</li> <li>Fixed the build using the vectorclass library (<a href=https://github.com/ClickHouse/ClickHouse/pull/2274 rel="external nofollow noreferrer">Babacar Diassé</a>).</li> <li>Cmake now generates files for ninja by default (like when using <code>-G Ninja</code>).</li> <li>Added the ability to use the libtinfo library instead of libtermcap (<a href=https://github.com/ClickHouse/ClickHouse/pull/2519 rel="external nofollow noreferrer">Georgy Kondratiev</a>).</li> <li>Fixed a header file conflict in Fedora Rawhide (<a href=https://github.com/ClickHouse/ClickHouse/issues/2520 rel="external nofollow noreferrer">#2520</a>).</li> </ul> <h4 id=backward-incompatible-changes-7>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-7 title="Permanent link">&para;</a></h4> <ul> <li>Removed escaping in <code>Vertical</code> and <code>Pretty*</code> formats and deleted the <code>VerticalRaw</code> format.</li> <li>If servers with version 1.1.54388 (or newer) and servers with an older version are used simultaneously in a distributed query and the query has the <code>cast(x, 'Type')</code> expression without the <code>AS</code> keyword and doesn’t have the word <code>cast</code> in uppercase, an exception will be thrown with a message like <code>Not found column cast(0, 'UInt8') in block</code>. Solution: Update the server on the entire cluster.</li> </ul> <h3 id=clickhouse-release-1-1-54385-2018-06-01>ClickHouse release 1.1.54385, 2018-06-01<a class=headerlink href=#clickhouse-release-1-1-54385-2018-06-01 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-21>Bug fixes:<a class=headerlink href=#bug-fixes-21 title="Permanent link">&para;</a></h4> <ul> <li>Fixed an error that in some cases caused ZooKeeper operations to block.</li> </ul> <h3 id=clickhouse-release-1-1-54383-2018-05-22>ClickHouse release 1.1.54383, 2018-05-22<a class=headerlink href=#clickhouse-release-1-1-54383-2018-05-22 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-22>Bug fixes:<a class=headerlink href=#bug-fixes-22 title="Permanent link">&para;</a></h4> <ul> <li>Fixed a slowdown of replication queue if a table has many replicas.</li> </ul> <h3 id=clickhouse-release-1-1-54381-2018-05-14>ClickHouse release 1.1.54381, 2018-05-14<a class=headerlink href=#clickhouse-release-1-1-54381-2018-05-14 title="Permanent link">&para;</a></h3> <h4 id=bug-fixes-23>Bug fixes:<a class=headerlink href=#bug-fixes-23 title="Permanent link">&para;</a></h4> <ul> <li>Fixed a nodes leak in ZooKeeper when ClickHouse loses connection to ZooKeeper server.</li> </ul> <h3 id=clickhouse-release-1-1-54380-2018-04-21>ClickHouse release 1.1.54380, 2018-04-21<a class=headerlink href=#clickhouse-release-1-1-54380-2018-04-21 title="Permanent link">&para;</a></h3> <h4 id=new-features-13>New features:<a class=headerlink href=#new-features-13 title="Permanent link">&para;</a></h4> <ul> <li>Added the table function <code>file(path, format, structure)</code>. An example reading bytes from <code>/dev/urandom</code>: <code>ln -s /dev/urandom /var/lib/clickhouse/user_files/random``clickhouse-client -q "SELECT * FROM file('random', 'RowBinary', 'd UInt8') LIMIT 10"</code>.</li> </ul> <h4 id=improvements-12>Improvements:<a class=headerlink href=#improvements-12 title="Permanent link">&para;</a></h4> <ul> <li>Subqueries can be wrapped in <code>()</code> brackets to enhance query readability. For example: <code>(SELECT 1) UNION ALL (SELECT 1)</code>.</li> <li>Simple <code>SELECT</code> queries from the <code>system.processes</code> table are not included in the <code>max_concurrent_queries</code> limit.</li> </ul> <h4 id=bug-fixes-24>Bug fixes:<a class=headerlink href=#bug-fixes-24 title="Permanent link">&para;</a></h4> <ul> <li>Fixed incorrect behavior of the <code>IN</code> operator when select from <code>MATERIALIZED VIEW</code>.</li> <li>Fixed incorrect filtering by partition index in expressions like <code>partition_key_column IN (...)</code>.</li> <li>Fixed inability to execute <code>OPTIMIZE</code> query on non-leader replica if <code>REANAME</code> was performed on the table.</li> <li>Fixed the authorization error when executing <code>OPTIMIZE</code> or <code>ALTER</code> queries on a non-leader replica.</li> <li>Fixed freezing of <code>KILL QUERY</code>.</li> <li>Fixed an error in ZooKeeper client library which led to loss of watches, freezing of distributed DDL queue, and slowdowns in the replication queue if a non-empty <code>chroot</code> prefix is used in the ZooKeeper configuration.</li> </ul> <h4 id=backward-incompatible-changes-8>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-8 title="Permanent link">&para;</a></h4> <ul> <li>Removed support for expressions like <code>(a, b) IN (SELECT (a, b))</code> (you can use the equivalent expression <code>(a, b) IN (SELECT a, b)</code>). In previous releases, these expressions led to undetermined <code>WHERE</code> filtering or caused errors.</li> </ul> <h3 id=clickhouse-release-1-1-54378-2018-04-16>ClickHouse release 1.1.54378, 2018-04-16<a class=headerlink href=#clickhouse-release-1-1-54378-2018-04-16 title="Permanent link">&para;</a></h3> <h4 id=new-features-14>New features:<a class=headerlink href=#new-features-14 title="Permanent link">&para;</a></h4> <ul> <li>Logging level can be changed without restarting the server.</li> <li>Added the <code>SHOW CREATE DATABASE</code> query.</li> <li>The <code>query_id</code> can be passed to <code>clickhouse-client</code> (elBroom).</li> <li>New setting: <code>max_network_bandwidth_for_all_users</code>.</li> <li>Added support for <code>ALTER TABLE ... PARTITION ...</code> for <code>MATERIALIZED VIEW</code>.</li> <li>Added information about the size of data parts in uncompressed form in the system table.</li> <li>Server-to-server encryption support for distributed tables (<code>&lt;secure&gt;1&lt;/secure&gt;</code> in the replica config in <code>&lt;remote_servers&gt;</code>).</li> <li>Configuration of the table level for the <code>ReplicatedMergeTree</code> family in order to minimize the amount of data stored in Zookeeper: : <code>use_minimalistic_checksums_in_zookeeper = 1</code></li> <li>Configuration of the <code>clickhouse-client</code> prompt. By default, server names are now output to the prompt. The server’s display name can be changed. It’s also sent in the <code>X-ClickHouse-Display-Name</code> HTTP header (Kirill Shvakov).</li> <li>Multiple comma-separated <code>topics</code> can be specified for the <code>Kafka</code> engine (Tobias Adamson)</li> <li>When a query is stopped by <code>KILL QUERY</code> or <code>replace_running_query</code>, the client receives the <code>Query was canceled</code> exception instead of an incomplete result.</li> </ul> <h4 id=improvements-13>Improvements:<a class=headerlink href=#improvements-13 title="Permanent link">&para;</a></h4> <ul> <li><code>ALTER TABLE ... DROP/DETACH PARTITION</code> queries are run at the front of the replication queue.</li> <li><code>SELECT ... FINAL</code> and <code>OPTIMIZE ... FINAL</code> can be used even when the table has a single data part.</li> <li>A <code>query_log</code> table is recreated on the fly if it was deleted manually (Kirill Shvakov).</li> <li>The <code>lengthUTF8</code> function runs faster (zhang2014).</li> <li>Improved performance of synchronous inserts in <code>Distributed</code> tables (<code>insert_distributed_sync = 1</code>) when there is a very large number of shards.</li> <li>The server accepts the <code>send_timeout</code> and <code>receive_timeout</code> settings from the client and applies them when connecting to the client (they are applied in reverse order: the server socket’s <code>send_timeout</code> is set to the <code>receive_timeout</code> value received from the client, and vice versa).</li> <li>More robust crash recovery for asynchronous insertion into <code>Distributed</code> tables.</li> <li>The return type of the <code>countEqual</code> function changed from <code>UInt32</code> to <code>UInt64</code> (谢磊).</li> </ul> <h4 id=bug-fixes-25>Bug fixes:<a class=headerlink href=#bug-fixes-25 title="Permanent link">&para;</a></h4> <ul> <li>Fixed an error with <code>IN</code> when the left side of the expression is <code>Nullable</code>.</li> <li>Correct results are now returned when using tuples with <code>IN</code> when some of the tuple components are in the table index.</li> <li>The <code>max_execution_time</code> limit now works correctly with distributed queries.</li> <li>Fixed errors when calculating the size of composite columns in the <code>system.columns</code> table.</li> <li>Fixed an error when creating a temporary table <code>CREATE TEMPORARY TABLE IF NOT EXISTS.</code></li> <li>Fixed errors in <code>StorageKafka</code> (##2075)</li> <li>Fixed server crashes from invalid arguments of certain aggregate functions.</li> <li>Fixed the error that prevented the <code>DETACH DATABASE</code> query from stopping background tasks for <code>ReplicatedMergeTree</code> tables.</li> <li><code>Too many parts</code> state is less likely to happen when inserting into aggregated materialized views (##2084).</li> <li>Corrected recursive handling of substitutions in the config if a substitution must be followed by another substitution on the same level.</li> <li>Corrected the syntax in the metadata file when creating a <code>VIEW</code> that uses a query with <code>UNION ALL</code>.</li> <li><code>SummingMergeTree</code> now works correctly for summation of nested data structures with a composite key.</li> <li>Fixed the possibility of a race condition when choosing the leader for <code>ReplicatedMergeTree</code> tables.</li> </ul> <h4 id=build-changes-5>Build changes:<a class=headerlink href=#build-changes-5 title="Permanent link">&para;</a></h4> <ul> <li>The build supports <code>ninja</code> instead of <code>make</code> and uses <code>ninja</code> by default for building releases.</li> <li>Renamed packages: <code>clickhouse-server-base</code> in <code>clickhouse-common-static</code>; <code>clickhouse-server-common</code> in <code>clickhouse-server</code>; <code>clickhouse-common-dbg</code> in <code>clickhouse-common-static-dbg</code>. To install, use <code>clickhouse-server clickhouse-client</code>. Packages with the old names will still load in the repositories for backward compatibility.</li> </ul> <h4 id=backward-incompatible-changes-9>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-9 title="Permanent link">&para;</a></h4> <ul> <li>Removed the special interpretation of an IN expression if an array is specified on the left side. Previously, the expression <code>arr IN (set)</code> was interpreted as “at least one <code>arr</code> element belongs to the <code>set</code>”. To get the same behavior in the new version, write <code>arrayExists(x -&gt; x IN (set), arr)</code>.</li> <li>Disabled the incorrect use of the socket option <code>SO_REUSEPORT</code>, which was incorrectly enabled by default in the Poco library. Note that on Linux there is no longer any reason to simultaneously specify the addresses <code>::</code> and <code>0.0.0.0</code> for listen – use just <code>::</code>, which allows listening to the connection both over IPv4 and IPv6 (with the default kernel config settings). You can also revert to the behavior from previous versions by specifying <code>&lt;listen_reuse_port&gt;1&lt;/listen_reuse_port&gt;</code> in the config.</li> </ul> <h3 id=clickhouse-release-1-1-54370-2018-03-16>ClickHouse release 1.1.54370, 2018-03-16<a class=headerlink href=#clickhouse-release-1-1-54370-2018-03-16 title="Permanent link">&para;</a></h3> <h4 id=new-features-15>New features:<a class=headerlink href=#new-features-15 title="Permanent link">&para;</a></h4> <ul> <li>Added the <code>system.macros</code> table and auto updating of macros when the config file is changed.</li> <li>Added the <code>SYSTEM RELOAD CONFIG</code> query.</li> <li>Added the <code>maxIntersections(left_col, right_col)</code> aggregate function, which returns the maximum number of simultaneously intersecting intervals <code>[left; right]</code>. The <code>maxIntersectionsPosition(left, right)</code> function returns the beginning of the “maximum” interval. (<a href=https://github.com/ClickHouse/ClickHouse/pull/2012 rel="external nofollow noreferrer">Michael Furmur</a>).</li> </ul> <h4 id=improvements-14>Improvements:<a class=headerlink href=#improvements-14 title="Permanent link">&para;</a></h4> <ul> <li>When inserting data in a <code>Replicated</code> table, fewer requests are made to <code>ZooKeeper</code> (and most of the user-level errors have disappeared from the <code>ZooKeeper</code> log).</li> <li>Added the ability to create aliases for data sets. Example: <code>WITH (1, 2, 3) AS set SELECT number IN set FROM system.numbers LIMIT 10</code>.</li> </ul> <h4 id=bug-fixes-26>Bug fixes:<a class=headerlink href=#bug-fixes-26 title="Permanent link">&para;</a></h4> <ul> <li>Fixed the <code>Illegal PREWHERE</code> error when reading from Merge tables for <code>Distributed</code>tables.</li> <li>Added fixes that allow you to start clickhouse-server in IPv4-only Docker containers.</li> <li>Fixed a race condition when reading from system <code>system.parts_columns tables.</code></li> <li>Removed double buffering during a synchronous insert to a <code>Distributed</code> table, which could have caused the connection to timeout.</li> <li>Fixed a bug that caused excessively long waits for an unavailable replica before beginning a <code>SELECT</code> query.</li> <li>Fixed incorrect dates in the <code>system.parts</code> table.</li> <li>Fixed a bug that made it impossible to insert data in a <code>Replicated</code> table if <code>chroot</code> was non-empty in the configuration of the <code>ZooKeeper</code> cluster.</li> <li>Fixed the vertical merging algorithm for an empty <code>ORDER BY</code> table.</li> <li>Restored the ability to use dictionaries in queries to remote tables, even if these dictionaries are not present on the requestor server. This functionality was lost in release 1.1.54362.</li> <li>Restored the behavior for queries like <code>SELECT * FROM remote('server2', default.table) WHERE col IN (SELECT col2 FROM default.table)</code> when the right side of the <code>IN</code> should use a remote <code>default.table</code> instead of a local one. This behavior was broken in version 1.1.54358.</li> <li>Removed extraneous error-level logging of <code>Not found column ... in block</code>.</li> </ul> <h3 id=clickhouse-release-1-1-54362-2018-03-11>ClickHouse Release 1.1.54362, 2018-03-11<a class=headerlink href=#clickhouse-release-1-1-54362-2018-03-11 title="Permanent link">&para;</a></h3> <h4 id=new-features-16>New features:<a class=headerlink href=#new-features-16 title="Permanent link">&para;</a></h4> <ul> <li>Aggregation without <code>GROUP BY</code> for an empty set (such as <code>SELECT count(*) FROM table WHERE 0</code>) now returns a result with one row with null values for aggregate functions, in compliance with the SQL standard. To restore the old behavior (return an empty result), set <code>empty_result_for_aggregation_by_empty_set</code> to 1.</li> <li>Added type conversion for <code>UNION ALL</code>. Different alias names are allowed in <code>SELECT</code> positions in <code>UNION ALL</code>, in compliance with the SQL standard.</li> <li>Arbitrary expressions are supported in <code>LIMIT BY</code> clauses. Previously, it was only possible to use columns resulting from <code>SELECT</code>.</li> <li>An index of <code>MergeTree</code> tables is used when <code>IN</code> is applied to a tuple of expressions from the columns of the primary key. Example: <code>WHERE (UserID, EventDate) IN ((123, '2000-01-01'), ...)</code> (Anastasiya Tsarkova).</li> <li>Added the <code>clickhouse-copier</code> tool for copying between clusters and resharding data (beta).</li> <li>Added consistent hashing functions: <code>yandexConsistentHash</code>, <code>jumpConsistentHash</code>, <code>sumburConsistentHash</code>. They can be used as a sharding key in order to reduce the amount of network traffic during subsequent reshardings.</li> <li>Added functions: <code>arrayAny</code>, <code>arrayAll</code>, <code>hasAny</code>, <code>hasAll</code>, <code>arrayIntersect</code>, <code>arrayResize</code>.</li> <li>Added the <code>arrayCumSum</code> function (Javi Santana).</li> <li>Added the <code>parseDateTimeBestEffort</code>, <code>parseDateTimeBestEffortOrZero</code>, and <code>parseDateTimeBestEffortOrNull</code> functions to read the DateTime from a string containing text in a wide variety of possible formats.</li> <li>Data can be partially reloaded from external dictionaries during updating (load just the records in which the value of the specified field greater than in the previous download) (Arsen Hakobyan).</li> <li>Added the <code>cluster</code> table function. Example: <code>cluster(cluster_name, db, table)</code>. The <code>remote</code> table function can accept the cluster name as the first argument, if it is specified as an identifier.</li> <li>The <code>remote</code> and <code>cluster</code> table functions can be used in <code>INSERT</code> queries.</li> <li>Added the <code>create_table_query</code> and <code>engine_full</code> virtual columns to the <code>system.tables</code>table . The <code>metadata_modification_time</code> column is virtual.</li> <li>Added the <code>data_path</code> and <code>metadata_path</code> columns to <code>system.tables</code>and<code>system.databases</code> tables, and added the <code>path</code> column to the <code>system.parts</code> and <code>system.parts_columns</code> tables.</li> <li>Added additional information about merges in the <code>system.part_log</code> table.</li> <li>An arbitrary partitioning key can be used for the <code>system.query_log</code> table (Kirill Shvakov).</li> <li>The <code>SHOW TABLES</code> query now also shows temporary tables. Added temporary tables and the <code>is_temporary</code> column to <code>system.tables</code> (zhang2014).</li> <li>Added <code>DROP TEMPORARY TABLE</code> and <code>EXISTS TEMPORARY TABLE</code> queries (zhang2014).</li> <li>Support for <code>SHOW CREATE TABLE</code> for temporary tables (zhang2014).</li> <li>Added the <code>system_profile</code> configuration parameter for the settings used by internal processes.</li> <li>Support for loading <code>object_id</code> as an attribute in <code>MongoDB</code> dictionaries (Pavel Litvinenko).</li> <li>Reading <code>null</code> as the default value when loading data for an external dictionary with the <code>MongoDB</code> source (Pavel Litvinenko).</li> <li>Reading <code>DateTime</code> values in the <code>Values</code> format from a Unix timestamp without single quotes.</li> <li>Failover is supported in <code>remote</code> table functions for cases when some of the replicas are missing the requested table.</li> <li>Configuration settings can be overridden in the command line when you run <code>clickhouse-server</code>. Example: <code>clickhouse-server -- --logger.level=information</code>.</li> <li>Implemented the <code>empty</code> function from a <code>FixedString</code> argument: the function returns 1 if the string consists entirely of null bytes (zhang2014).</li> <li>Added the <code>listen_try</code>configuration parameter for listening to at least one of the listen addresses without quitting, if some of the addresses can’t be listened to (useful for systems with disabled support for IPv4 or IPv6).</li> <li>Added the <code>VersionedCollapsingMergeTree</code> table engine.</li> <li>Support for rows and arbitrary numeric types for the <code>library</code> dictionary source.</li> <li><code>MergeTree</code> tables can be used without a primary key (you need to specify <code>ORDER BY tuple()</code>).</li> <li>A <code>Nullable</code> type can be <code>CAST</code> to a non-<code>Nullable</code> type if the argument is not <code>NULL</code>.</li> <li><code>RENAME TABLE</code> can be performed for <code>VIEW</code>.</li> <li>Added the <code>throwIf</code> function.</li> <li>Added the <code>odbc_default_field_size</code> option, which allows you to extend the maximum size of the value loaded from an ODBC source (by default, it is 1024).</li> <li>The <code>system.processes</code> table and <code>SHOW PROCESSLIST</code> now have the <code>is_cancelled</code> and <code>peak_memory_usage</code> columns.</li> </ul> <h4 id=improvements-15>Improvements:<a class=headerlink href=#improvements-15 title="Permanent link">&para;</a></h4> <ul> <li>Limits and quotas on the result are no longer applied to intermediate data for <code>INSERT SELECT</code> queries or for <code>SELECT</code> subqueries.</li> <li>Fewer false triggers of <code>force_restore_data</code> when checking the status of <code>Replicated</code> tables when the server starts.</li> <li>Added the <code>allow_distributed_ddl</code> option.</li> <li>Nondeterministic functions are not allowed in expressions for <code>MergeTree</code> table keys.</li> <li>Files with substitutions from <code>config.d</code> directories are loaded in alphabetical order.</li> <li>Improved performance of the <code>arrayElement</code> function in the case of a constant multidimensional array with an empty array as one of the elements. Example: <code>[[1], []][x]</code>.</li> <li>The server starts faster now when using configuration files with very large substitutions (for instance, very large lists of IP networks).</li> <li>When running a query, table valued functions run once. Previously, <code>remote</code> and <code>mysql</code> table valued functions performed the same query twice to retrieve the table structure from a remote server.</li> <li>The <code>MkDocs</code> documentation generator is used.</li> <li>When you try to delete a table column that <code>DEFAULT</code>/<code>MATERIALIZED</code> expressions of other columns depend on, an exception is thrown (zhang2014).</li> <li>Added the ability to parse an empty line in text formats as the number 0 for <code>Float</code> data types. This feature was previously available but was lost in release 1.1.54342.</li> <li><code>Enum</code> values can be used in <code>min</code>, <code>max</code>, <code>sum</code> and some other functions. In these cases, it uses the corresponding numeric values. This feature was previously available but was lost in the release 1.1.54337.</li> <li>Added <code>max_expanded_ast_elements</code> to restrict the size of the AST after recursively expanding aliases.</li> </ul> <h4 id=bug-fixes-27>Bug fixes:<a class=headerlink href=#bug-fixes-27 title="Permanent link">&para;</a></h4> <ul> <li>Fixed cases when unnecessary columns were removed from subqueries in error, or not removed from subqueries containing <code>UNION ALL</code>.</li> <li>Fixed a bug in merges for <code>ReplacingMergeTree</code> tables.</li> <li>Fixed synchronous insertions in <code>Distributed</code> tables (<code>insert_distributed_sync = 1</code>).</li> <li>Fixed segfault for certain uses of <code>FULL</code> and <code>RIGHT JOIN</code> with duplicate columns in subqueries.</li> <li>Fixed segfault for certain uses of <code>replace_running_query</code> and <code>KILL QUERY</code>.</li> <li>Fixed the order of the <code>source</code> and <code>last_exception</code> columns in the <code>system.dictionaries</code> table.</li> <li>Fixed a bug when the <code>DROP DATABASE</code> query did not delete the file with metadata.</li> <li>Fixed the <code>DROP DATABASE</code> query for <code>Dictionary</code> databases.</li> <li>Fixed the low precision of <code>uniqHLL12</code> and <code>uniqCombined</code> functions for cardinalities greater than 100 million items (Alex Bocharov).</li> <li>Fixed the calculation of implicit default values when necessary to simultaneously calculate default explicit expressions in <code>INSERT</code> queries (zhang2014).</li> <li>Fixed a rare case when a query to a <code>MergeTree</code> table couldn’t finish (chenxing-xc).</li> <li>Fixed a crash that occurred when running a <code>CHECK</code> query for <code>Distributed</code> tables if all shards are local (chenxing.xc).</li> <li>Fixed a slight performance regression with functions that use regular expressions.</li> <li>Fixed a performance regression when creating multidimensional arrays from complex expressions.</li> <li>Fixed a bug that could cause an extra <code>FORMAT</code> section to appear in an <code>.sql</code> file with metadata.</li> <li>Fixed a bug that caused the <code>max_table_size_to_drop</code> limit to apply when trying to delete a <code>MATERIALIZED VIEW</code> looking at an explicitly specified table.</li> <li>Fixed incompatibility with old clients (old clients were sometimes sent data with the <code>DateTime('timezone')</code> type, which they do not understand).</li> <li>Fixed a bug when reading <code>Nested</code> column elements of structures that were added using <code>ALTER</code> but that are empty for the old partitions, when the conditions for these columns moved to <code>PREWHERE</code>.</li> <li>Fixed a bug when filtering tables by virtual <code>_table</code> columns in queries to <code>Merge</code> tables.</li> <li>Fixed a bug when using <code>ALIAS</code> columns in <code>Distributed</code> tables.</li> <li>Fixed a bug that made dynamic compilation impossible for queries with aggregate functions from the <code>quantile</code> family.</li> <li>Fixed a race condition in the query execution pipeline that occurred in very rare cases when using <code>Merge</code> tables with a large number of tables, and when using <code>GLOBAL</code> subqueries.</li> <li>Fixed a crash when passing arrays of different sizes to an <code>arrayReduce</code> function when using aggregate functions from multiple arguments.</li> <li>Prohibited the use of queries with <code>UNION ALL</code> in a <code>MATERIALIZED VIEW</code>.</li> <li>Fixed an error during initialization of the <code>part_log</code> system table when the server starts (by default, <code>part_log</code> is disabled).</li> </ul> <h4 id=backward-incompatible-changes-10>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-10 title="Permanent link">&para;</a></h4> <ul> <li>Removed the <code>distributed_ddl_allow_replicated_alter</code> option. This behavior is enabled by default.</li> <li>Removed the <code>strict_insert_defaults</code> setting. If you were using this functionality, write to <code>clickhouse-feedback@yandex-team.com</code>.</li> <li>Removed the <code>UnsortedMergeTree</code> engine.</li> </ul> <h3 id=clickhouse-release-1-1-54343-2018-02-05>ClickHouse Release 1.1.54343, 2018-02-05<a class=headerlink href=#clickhouse-release-1-1-54343-2018-02-05 title="Permanent link">&para;</a></h3> <ul> <li>Added macros support for defining cluster names in distributed DDL queries and constructors of Distributed tables: <code>CREATE TABLE distr ON CLUSTER '{cluster}' (...) ENGINE = Distributed('{cluster}', 'db', 'table')</code>.</li> <li>Now queries like <code>SELECT ... FROM table WHERE expr IN (subquery)</code> are processed using the <code>table</code> index.</li> <li>Improved processing of duplicates when inserting to Replicated tables, so they no longer slow down execution of the replication queue.</li> </ul> <h3 id=clickhouse-release-1-1-54342-2018-01-22>ClickHouse Release 1.1.54342, 2018-01-22<a class=headerlink href=#clickhouse-release-1-1-54342-2018-01-22 title="Permanent link">&para;</a></h3> <p>This release contains bug fixes for the previous release 1.1.54337:</p> <ul> <li>Fixed a regression in 1.1.54337: if the default user has readonly access, then the server refuses to start up with the message <code>Cannot create database in readonly mode</code>.</li> <li>Fixed a regression in 1.1.54337: on systems with systemd, logs are always written to syslog regardless of the configuration; the watchdog script still uses init.d.</li> <li>Fixed a regression in 1.1.54337: wrong default configuration in the Docker image.</li> <li>Fixed nondeterministic behavior of GraphiteMergeTree (you can see it in log messages <code>Data after merge is not byte-identical to the data on another replicas</code>).</li> <li>Fixed a bug that may lead to inconsistent merges after OPTIMIZE query to Replicated tables (you may see it in log messages <code>Part ... intersects the previous part</code>).</li> <li>Buffer tables now work correctly when MATERIALIZED columns are present in the destination table (by zhang2014).</li> <li>Fixed a bug in implementation of NULL.</li> </ul> <h3 id=clickhouse-release-1-1-54337-2018-01-18>ClickHouse Release 1.1.54337, 2018-01-18<a class=headerlink href=#clickhouse-release-1-1-54337-2018-01-18 title="Permanent link">&para;</a></h3> <h4 id=new-features-17>New features:<a class=headerlink href=#new-features-17 title="Permanent link">&para;</a></h4> <ul> <li>Added support for storage of multi-dimensional arrays and tuples (<code>Tuple</code> data type) in tables.</li> <li>Support for table functions for <code>DESCRIBE</code> and <code>INSERT</code> queries. Added support for subqueries in <code>DESCRIBE</code>. Examples: <code>DESC TABLE remote('host', default.hits)</code>; <code>DESC TABLE (SELECT 1)</code>; <code>INSERT INTO TABLE FUNCTION remote('host', default.hits)</code>. Support for <code>INSERT INTO TABLE</code> in addition to <code>INSERT INTO</code>.</li> <li>Improved support for time zones. The <code>DateTime</code> data type can be annotated with the timezone that is used for parsing and formatting in text formats. Example: <code>DateTime('Europe/Moscow')</code>. When timezones are specified in functions for <code>DateTime</code> arguments, the return type will track the timezone, and the value will be displayed as expected.</li> <li>Added the functions <code>toTimeZone</code>, <code>timeDiff</code>, <code>toQuarter</code>, <code>toRelativeQuarterNum</code>. The <code>toRelativeHour</code>/<code>Minute</code>/<code>Second</code> functions can take a value of type <code>Date</code> as an argument. The <code>now</code> function name is case-sensitive.</li> <li>Added the <code>toStartOfFifteenMinutes</code> function (Kirill Shvakov).</li> <li>Added the <code>clickhouse format</code> tool for formatting queries.</li> <li>Added the <code>format_schema_path</code> configuration parameter (Marek Vavruşa). It is used for specifying a schema in <code>Cap'n Proto</code> format. Schema files can be located only in the specified directory.</li> <li>Added support for config substitutions (<code>incl</code> and <code>conf.d</code>) for configuration of external dictionaries and models (Pavel Yakunin).</li> <li>Added a column with documentation for the <code>system.settings</code> table (Kirill Shvakov).</li> <li>Added the <code>system.parts_columns</code> table with information about column sizes in each data part of <code>MergeTree</code> tables.</li> <li>Added the <code>system.models</code> table with information about loaded <code>CatBoost</code> machine learning models.</li> <li>Added the <code>mysql</code> and <code>odbc</code> table function and corresponding <code>MySQL</code> and <code>ODBC</code> table engines for accessing remote databases. This functionality is in the beta stage.</li> <li>Added the possibility to pass an argument of type <code>AggregateFunction</code> for the <code>groupArray</code> aggregate function (so you can create an array of states of some aggregate function).</li> <li>Removed restrictions on various combinations of aggregate function combinators. For example, you can use <code>avgForEachIf</code> as well as <code>avgIfForEach</code> aggregate functions, which have different behaviors.</li> <li>The <code>-ForEach</code> aggregate function combinator is extended for the case of aggregate functions of multiple arguments.</li> <li>Added support for aggregate functions of <code>Nullable</code> arguments even for cases when the function returns a non-<code>Nullable</code> result (added with the contribution of Silviu Caragea). Example: <code>groupArray</code>, <code>groupUniqArray</code>, <code>topK</code>.</li> <li>Added the <code>max_client_network_bandwidth</code> for <code>clickhouse-client</code> (Kirill Shvakov).</li> <li>Users with the <code>readonly = 2</code> setting are allowed to work with TEMPORARY tables (CREATE, DROP, INSERT…) (Kirill Shvakov).</li> <li>Added support for using multiple consumers with the <code>Kafka</code> engine. Extended configuration options for <code>Kafka</code> (Marek Vavruša).</li> <li>Added the <code>intExp3</code> and <code>intExp4</code> functions.</li> <li>Added the <code>sumKahan</code> aggregate function.</li> <li>Added the to * Number* OrNull functions, where * Number* is a numeric type.</li> <li>Added support for <code>WITH</code> clauses for an <code>INSERT SELECT</code> query (author: zhang2014).</li> <li>Added settings: <code>http_connection_timeout</code>, <code>http_send_timeout</code>, <code>http_receive_timeout</code>. In particular, these settings are used for downloading data parts for replication. Changing these settings allows for faster failover if the network is overloaded.</li> <li>Added support for <code>ALTER</code> for tables of type <code>Null</code> (Anastasiya Tsarkova).</li> <li>The <code>reinterpretAsString</code> function is extended for all data types that are stored contiguously in memory.</li> <li>Added the <code>--silent</code> option for the <code>clickhouse-local</code> tool. It suppresses printing query execution info in stderr.</li> <li>Added support for reading values of type <code>Date</code> from text in a format where the month and/or day of the month is specified using a single digit instead of two digits (Amos Bird).</li> </ul> <h4 id=performance-optimizations>Performance optimizations:<a class=headerlink href=#performance-optimizations title="Permanent link">&para;</a></h4> <ul> <li>Improved performance of aggregate functions <code>min</code>, <code>max</code>, <code>any</code>, <code>anyLast</code>, <code>anyHeavy</code>, <code>argMin</code>, <code>argMax</code> from string arguments.</li> <li>Improved performance of the functions <code>isInfinite</code>, <code>isFinite</code>, <code>isNaN</code>, <code>roundToExp2</code>.</li> <li>Improved performance of parsing and formatting <code>Date</code> and <code>DateTime</code> type values in text format.</li> <li>Improved performance and precision of parsing floating point numbers.</li> <li>Lowered memory usage for <code>JOIN</code> in the case when the left and right parts have columns with identical names that are not contained in <code>USING</code> .</li> <li>Improved performance of aggregate functions <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code> by reducing computational stability. The old functions are available under the names <code>varSampStable</code>, <code>varPopStable</code>, <code>stddevSampStable</code>, <code>stddevPopStable</code>, <code>covarSampStable</code>, <code>covarPopStable</code>, <code>corrStable</code>.</li> </ul> <h4 id=bug-fixes-28>Bug fixes:<a class=headerlink href=#bug-fixes-28 title="Permanent link">&para;</a></h4> <ul> <li>Fixed data deduplication after running a <code>DROP</code> or <code>DETACH PARTITION</code> query. In the previous version, dropping a partition and inserting the same data again was not working because inserted blocks were considered duplicates.</li> <li>Fixed a bug that could lead to incorrect interpretation of the <code>WHERE</code> clause for <code>CREATE MATERIALIZED VIEW</code> queries with <code>POPULATE</code> .</li> <li>Fixed a bug in using the <code>root_path</code> parameter in the <code>zookeeper_servers</code> configuration.</li> <li>Fixed unexpected results of passing the <code>Date</code> argument to <code>toStartOfDay</code> .</li> <li>Fixed the <code>addMonths</code> and <code>subtractMonths</code> functions and the arithmetic for <code>INTERVAL n MONTH</code> in cases when the result has the previous year.</li> <li>Added missing support for the <code>UUID</code> data type for <code>DISTINCT</code> , <code>JOIN</code> , and <code>uniq</code> aggregate functions and external dictionaries (Evgeniy Ivanov). Support for <code>UUID</code> is still incomplete.</li> <li>Fixed <code>SummingMergeTree</code> behavior in cases when the rows summed to zero.</li> <li>Various fixes for the <code>Kafka</code> engine (Marek Vavruša).</li> <li>Fixed incorrect behavior of the <code>Join</code> table engine (Amos Bird).</li> <li>Fixed incorrect allocator behavior under FreeBSD and OS X.</li> <li>The <code>extractAll</code> function now supports empty matches.</li> <li>Fixed an error that blocked usage of <code>libressl</code> instead of <code>openssl</code> .</li> <li>Fixed the <code>CREATE TABLE AS SELECT</code> query from temporary tables.</li> <li>Fixed non-atomicity of updating the replication queue. This could lead to replicas being out of sync until the server restarts.</li> <li>Fixed possible overflow in <code>gcd</code> , <code>lcm</code> and <code>modulo</code> (<code>%</code> operator) (Maks Skorokhod).</li> <li><code>-preprocessed</code> files are now created after changing <code>umask</code> (<code>umask</code> can be changed in the config).</li> <li>Fixed a bug in the background check of parts (<code>MergeTreePartChecker</code> ) when using a custom partition key.</li> <li>Fixed parsing of tuples (values of the <code>Tuple</code> data type) in text formats.</li> <li>Improved error messages about incompatible types passed to <code>multiIf</code> , <code>array</code> and some other functions.</li> <li>Redesigned support for <code>Nullable</code> types. Fixed bugs that may lead to a server crash. Fixed almost all other bugs related to <code>NULL</code> support: incorrect type conversions in INSERT SELECT, insufficient support for Nullable in HAVING and PREWHERE, <code>join_use_nulls</code> mode, Nullable types as arguments of <code>OR</code> operator, etc.</li> <li>Fixed various bugs related to internal semantics of data types. Examples: unnecessary summing of <code>Enum</code> type fields in <code>SummingMergeTree</code> ; alignment of <code>Enum</code> types in <code>Pretty</code> formats, etc.</li> <li>Stricter checks for allowed combinations of composite columns.</li> <li>Fixed the overflow when specifying a very large parameter for the <code>FixedString</code> data type.</li> <li>Fixed a bug in the <code>topK</code> aggregate function in a generic case.</li> <li>Added the missing check for equality of array sizes in arguments of n-ary variants of aggregate functions with an <code>-Array</code> combinator.</li> <li>Fixed a bug in <code>--pager</code> for <code>clickhouse-client</code> (author: ks1322).</li> <li>Fixed the precision of the <code>exp10</code> function.</li> <li>Fixed the behavior of the <code>visitParamExtract</code> function for better compliance with documentation.</li> <li>Fixed the crash when incorrect data types are specified.</li> <li>Fixed the behavior of <code>DISTINCT</code> in the case when all columns are constants.</li> <li>Fixed query formatting in the case of using the <code>tupleElement</code> function with a complex constant expression as the tuple element index.</li> <li>Fixed a bug in <code>Dictionary</code> tables for <code>range_hashed</code> dictionaries.</li> <li>Fixed a bug that leads to excessive rows in the result of <code>FULL</code> and <code>RIGHT JOIN</code> (Amos Bird).</li> <li>Fixed a server crash when creating and removing temporary files in <code>config.d</code> directories during config reload.</li> <li>Fixed the <code>SYSTEM DROP DNS CACHE</code> query: the cache was flushed but addresses of cluster nodes were not updated.</li> <li>Fixed the behavior of <code>MATERIALIZED VIEW</code> after executing <code>DETACH TABLE</code> for the table under the view (Marek Vavruša).</li> </ul> <h4 id=build-improvements-4>Build improvements:<a class=headerlink href=#build-improvements-4 title="Permanent link">&para;</a></h4> <ul> <li>The <code>pbuilder</code> tool is used for builds. The build process is almost completely independent of the build host environment.</li> <li>A single build is used for different OS versions. Packages and binaries have been made compatible with a wide range of Linux systems.</li> <li>Added the <code>clickhouse-test</code> package. It can be used to run functional tests.</li> <li>The source tarball can now be published to the repository. It can be used to reproduce the build without using GitHub.</li> <li>Added limited integration with Travis CI. Due to limits on build time in Travis, only the debug build is tested and a limited subset of tests are run.</li> <li>Added support for <code>Cap'n'Proto</code> in the default build.</li> <li>Changed the format of documentation sources from <code>Restricted Text</code> to <code>Markdown</code>.</li> <li>Added support for <code>systemd</code> (Vladimir Smirnov). It is disabled by default due to incompatibility with some OS images and can be enabled manually.</li> <li>For dynamic code generation, <code>clang</code> and <code>lld</code> are embedded into the <code>clickhouse</code> binary. They can also be invoked as <code>clickhouse clang</code> and <code>clickhouse lld</code> .</li> <li>Removed usage of GNU extensions from the code. Enabled the <code>-Wextra</code> option. When building with <code>clang</code> the default is <code>libc++</code> instead of <code>libstdc++</code>.</li> <li>Extracted <code>clickhouse_parsers</code> and <code>clickhouse_common_io</code> libraries to speed up builds of various tools.</li> </ul> <h4 id=backward-incompatible-changes-11>Backward incompatible changes:<a class=headerlink href=#backward-incompatible-changes-11 title="Permanent link">&para;</a></h4> <ul> <li>The format for marks in <code>Log</code> type tables that contain <code>Nullable</code> columns was changed in a backward incompatible way. If you have these tables, you should convert them to the <code>TinyLog</code> type before starting up the new server version. To do this, replace <code>ENGINE = Log</code> with <code>ENGINE = TinyLog</code> in the corresponding <code>.sql</code> file in the <code>metadata</code> directory. If your table doesn’t have <code>Nullable</code> columns or if the type of your table is not <code>Log</code>, then you don’t need to do anything.</li> <li>Removed the <code>experimental_allow_extended_storage_definition_syntax</code> setting. Now this feature is enabled by default.</li> <li>The <code>runningIncome</code> function was renamed to <code>runningDifferenceStartingWithFirstvalue</code> to avoid confusion.</li> <li>Removed the <code>FROM ARRAY JOIN arr</code> syntax when ARRAY JOIN is specified directly after FROM with no table (Amos Bird).</li> <li>Removed the <code>BlockTabSeparated</code> format that was used solely for demonstration purposes.</li> <li>Changed the state format for aggregate functions <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code>. If you have stored states of these aggregate functions in tables (using the <code>AggregateFunction</code> data type or materialized views with corresponding states), please write to <a href=mailto:clickhouse-feedback@yandex-team.com>&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;</a>.</li> <li>In previous server versions there was an undocumented feature: if an aggregate function depends on parameters, you can still specify it without parameters in the AggregateFunction data type. Example: <code>AggregateFunction(quantiles, UInt64)</code> instead of <code>AggregateFunction(quantiles(0.5, 0.9), UInt64)</code>. This feature was lost. Although it was undocumented, we plan to support it again in future releases.</li> <li>Enum data types cannot be used in min/max aggregate functions. This ability will be returned in the next release.</li> </ul> <h4 id=please-note-when-upgrading>Please note when upgrading:<a class=headerlink href=#please-note-when-upgrading title="Permanent link">&para;</a></h4> <ul> <li>When doing a rolling update on a cluster, at the point when some of the replicas are running the old version of ClickHouse and some are running the new version, replication is temporarily stopped and the message <code>unknown parameter 'shard'</code> appears in the log. Replication will continue after all replicas of the cluster are updated.</li> <li>If different versions of ClickHouse are running on the cluster servers, it is possible that distributed queries using the following functions will have incorrect results: <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code>. You should update all cluster nodes.</li> </ul> <h2 id=changelog-for-2017><a href=https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/changelog/2017.md rel="external nofollow noreferrer">Changelog for 2017</a><a class=headerlink href=#changelog-for-2017 title="Permanent link">&para;</a></h2> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/25eae6abe035bda78634f17d15c9f05348d97aad rel="external nofollow noreferrer" target=_blank class=text-reset>25eae6abe0</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#clickhouse-release-18-16 title="ClickHouse release 18.16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.16 </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-16-1-2018-12-21 title="ClickHouse release 18.16.1, 2018-12-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.16.1, 2018-12-21 </a> <nav id=toc-toc-1-1 class="nav flex-column pl-2"> <a href=#bug-fixes title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-improvements title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-16-0-2018-12-14 title="ClickHouse release 18.16.0, 2018-12-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.16.0, 2018-12-14 </a> <nav id=toc-toc-1-2 class="nav flex-column pl-2"> <a href=#new-features title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes-1 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements-1 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-improvements-1 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> <a href=#backward-incompatible-changes title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> </nav> <a href=#clickhouse-release-18-14 title="ClickHouse release 18.14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14 </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-14-19-2018-12-19 title="ClickHouse release 18.14.19, 2018-12-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.19, 2018-12-19 </a> <nav id=toc-toc-2-1 class="nav flex-column pl-2"> <a href=#bug-fixes-2 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-improvements-2 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-14-18-2018-12-04 title="ClickHouse release 18.14.18, 2018-12-04" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.18, 2018-12-04 </a> <nav id=toc-toc-2-2 class="nav flex-column pl-2"> <a href=#bug-fixes-3 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-14-17-2018-11-30 title="ClickHouse release 18.14.17, 2018-11-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.17, 2018-11-30 </a> <nav id=toc-toc-2-3 class="nav flex-column pl-2"> <a href=#bug-fixes-4 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-15-2018-11-21 title="ClickHouse release 18.14.15, 2018-11-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.15, 2018-11-21 </a> <nav id=toc-toc-2-4 class="nav flex-column pl-2"> <a href=#bug-fixes-5 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-14-2018-11-20 title="ClickHouse release 18.14.14, 2018-11-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.14, 2018-11-20 </a> <nav id=toc-toc-2-5 class="nav flex-column pl-2"> <a href=#bug-fixes-6 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes-1 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-14-13-2018-11-08 title="ClickHouse release 18.14.13, 2018-11-08" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.13, 2018-11-08 </a> <nav id=toc-toc-2-6 class="nav flex-column pl-2"> <a href=#bug-fixes-7 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#performance-improvements title="Performance improvements:" class="nav-link text-wrap d-inline-block w-100"> Performance improvements: </a> <a href=#build-improvements-3 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-14-12-2018-11-02 title="ClickHouse release 18.14.12, 2018-11-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.12, 2018-11-02 </a> <nav id=toc-toc-2-7 class="nav flex-column pl-2"> <a href=#bug-fixes-8 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-11-2018-10-29 title="ClickHouse release 18.14.11, 2018-10-29" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.11, 2018-10-29 </a> <nav id=toc-toc-2-8 class="nav flex-column pl-2"> <a href=#bug-fixes-9 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-10-2018-10-23 title="ClickHouse release 18.14.10, 2018-10-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.10, 2018-10-23 </a> <a href=#clickhouse-release-18-14-9-2018-10-16 title="ClickHouse release 18.14.9, 2018-10-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.9, 2018-10-16 </a> <nav id=toc-toc-2-10 class="nav flex-column pl-2"> <a href=#new-features-1 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#improvements-2 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-10 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes-1 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> </nav> <a href=#clickhouse-release-18-12 title="ClickHouse release 18.12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12 </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-12-17-2018-09-16 title="ClickHouse release 18.12.17, 2018-09-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.17, 2018-09-16 </a> <nav id=toc-toc-3-1 class="nav flex-column pl-2"> <a href=#new-features-2 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes-11 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes-2 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-12-14-2018-09-13 title="ClickHouse release 18.12.14, 2018-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.14, 2018-09-13 </a> <nav id=toc-toc-3-2 class="nav flex-column pl-2"> <a href=#new-features-3 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-3 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#bug-fixes-12 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-12-13-2018-09-10 title="ClickHouse release 18.12.13, 2018-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.13, 2018-09-10 </a> <nav id=toc-toc-3-3 class="nav flex-column pl-2"> <a href=#new-features-4 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features-1 title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#improvements-4 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-13 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#security-fix title="Security fix:" class="nav-link text-wrap d-inline-block w-100"> Security fix: </a> <a href=#backward-incompatible-changes-3 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#build-changes-2 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> </nav> <a href=#clickhouse-release-18-10 title="ClickHouse release 18.10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.10 </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-10-3-2018-08-13 title="ClickHouse release 18.10.3, 2018-08-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.10.3, 2018-08-13 </a> <nav id=toc-toc-4-1 class="nav flex-column pl-2"> <a href=#new-features-5 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-5 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-14 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes-4 title="Backward incompatible changes" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes </a> <a href=#build-changes-3 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> </nav> <a href=#clickhouse-release-18-6 title="ClickHouse release 18.6" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.6 </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-6-0-2018-08-02 title="ClickHouse release 18.6.0, 2018-08-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.6.0, 2018-08-02 </a> <nav id=toc-toc-5-1 class="nav flex-column pl-2"> <a href=#new-features-6 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-6 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> </nav> </nav> <a href=#clickhouse-release-18-5 title="ClickHouse release 18.5" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.5 </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-5-1-2018-07-31 title="ClickHouse release 18.5.1, 2018-07-31" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.5.1, 2018-07-31 </a> <nav id=toc-toc-6-1 class="nav flex-column pl-2"> <a href=#new-features-7 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-7 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-15 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> </nav> <a href=#clickhouse-release-18-4 title="ClickHouse release 18.4" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.4 </a> <nav id=toc-toc-7 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-4-0-2018-07-28 title="ClickHouse release 18.4.0, 2018-07-28" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.4.0, 2018-07-28 </a> <nav id=toc-toc-7-1 class="nav flex-column pl-2"> <a href=#new-features-8 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-8 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-16 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes-5 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> </nav> <a href=#clickhouse-release-18-1 title="ClickHouse release 18.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.1 </a> <nav id=toc-toc-8 class="nav flex-column pl-2"> <a href=#clickhouse-release-18-1-0-2018-07-23 title="ClickHouse release 18.1.0, 2018-07-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.1.0, 2018-07-23 </a> <nav id=toc-toc-8-1 class="nav flex-column pl-2"> <a href=#new-features-9 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-9 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-17 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes-6 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> </nav> <a href=#clickhouse-release-1-1 title="ClickHouse release 1.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1 </a> <nav id=toc-toc-9 class="nav flex-column pl-2"> <a href=#clickhouse-release-1-1-54394-2018-07-12 title="ClickHouse release 1.1.54394, 2018-07-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54394, 2018-07-12 </a> <nav id=toc-toc-9-1 class="nav flex-column pl-2"> <a href=#new-features-10 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes-18 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54390-2018-07-06 title="ClickHouse release 1.1.54390, 2018-07-06" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54390, 2018-07-06 </a> <nav id=toc-toc-9-2 class="nav flex-column pl-2"> <a href=#new-features-11 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-10 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-19 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#security-fix-1 title="Security fix:" class="nav-link text-wrap d-inline-block w-100"> Security fix: </a> </nav> <a href=#clickhouse-release-1-1-54388-2018-06-28 title="ClickHouse release 1.1.54388, 2018-06-28" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54388, 2018-06-28 </a> <nav id=toc-toc-9-3 class="nav flex-column pl-2"> <a href=#new-features-12 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features-2 title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#bug-fixes-20 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements-11 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-changes-4 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> <a href=#backward-incompatible-changes-7 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54385-2018-06-01 title="ClickHouse release 1.1.54385, 2018-06-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54385, 2018-06-01 </a> <nav id=toc-toc-9-4 class="nav flex-column pl-2"> <a href=#bug-fixes-21 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54383-2018-05-22 title="ClickHouse release 1.1.54383, 2018-05-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54383, 2018-05-22 </a> <nav id=toc-toc-9-5 class="nav flex-column pl-2"> <a href=#bug-fixes-22 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54381-2018-05-14 title="ClickHouse release 1.1.54381, 2018-05-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54381, 2018-05-14 </a> <nav id=toc-toc-9-6 class="nav flex-column pl-2"> <a href=#bug-fixes-23 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54380-2018-04-21 title="ClickHouse release 1.1.54380, 2018-04-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54380, 2018-04-21 </a> <nav id=toc-toc-9-7 class="nav flex-column pl-2"> <a href=#new-features-13 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-12 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-24 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes-8 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54378-2018-04-16 title="ClickHouse release 1.1.54378, 2018-04-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54378, 2018-04-16 </a> <nav id=toc-toc-9-8 class="nav flex-column pl-2"> <a href=#new-features-14 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-13 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-25 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes-5 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> <a href=#backward-incompatible-changes-9 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54370-2018-03-16 title="ClickHouse release 1.1.54370, 2018-03-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54370, 2018-03-16 </a> <nav id=toc-toc-9-9 class="nav flex-column pl-2"> <a href=#new-features-15 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-14 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-26 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54362-2018-03-11 title="ClickHouse Release 1.1.54362, 2018-03-11" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 1.1.54362, 2018-03-11 </a> <nav id=toc-toc-9-10 class="nav flex-column pl-2"> <a href=#new-features-16 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements-15 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes-27 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes-10 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54343-2018-02-05 title="ClickHouse Release 1.1.54343, 2018-02-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 1.1.54343, 2018-02-05 </a> <a href=#clickhouse-release-1-1-54342-2018-01-22 title="ClickHouse Release 1.1.54342, 2018-01-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 1.1.54342, 2018-01-22 </a> <a href=#clickhouse-release-1-1-54337-2018-01-18 title="ClickHouse Release 1.1.54337, 2018-01-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 1.1.54337, 2018-01-18 </a> <nav id=toc-toc-9-13 class="nav flex-column pl-2"> <a href=#new-features-17 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#performance-optimizations title="Performance optimizations:" class="nav-link text-wrap d-inline-block w-100"> Performance optimizations: </a> <a href=#bug-fixes-28 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-improvements-4 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> <a href=#backward-incompatible-changes-11 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#please-note-when-upgrading title="Please note when upgrading:" class="nav-link text-wrap d-inline-block w-100"> Please note when upgrading: </a> </nav> </nav> <a href=#changelog-for-2017 title="Changelog for 2017" class="nav-link text-wrap d-inline-block w-100"> Changelog for 2017 </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
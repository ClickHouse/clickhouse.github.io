<!DOCTYPE html><html lang=en data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>2020 - ClickHouse Documentation</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="2020 - ClickHouse  Documentation"><meta property=og:description content="ClickHouse release v20.3 ClickHouse release v20.3.4.10, 2020-03-20 Bug Fix This release also contains all bug fixes from"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="2020 - ClickHouse  Documentation"><meta name=description content="ClickHouse release v20.3 ClickHouse release v20.3.4.10, 2020-03-20 Bug Fix This release also contains all bug fixes from"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> 2020 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/en/whats_new/changelog/index.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/en.svg alt=English title=English width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/whats_new/changelog/ class="dropdown-item disabled"> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/whats_new/changelog/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/whats_new/changelog/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/whats_new/changelog/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/whats_new/changelog/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/whats_new/changelog/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/whats_new/changelog/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Version: <span class=text-light>latest</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/en/ class="dropdown-item disable"> <span class=text-light>latest</span> </a> <a href=/docs/v20.3/en/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/en/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/en/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/en/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/en/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/en/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/en/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/en/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/en/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/en/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/en/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../introduction/distinctive_features/ title="Distinctive Features" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distinctive Features</a> <a href=../../introduction/features_considered_disadvantages/ title="ClickHouse Features that Can Be Considered Disadvantages" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Features that Can Be Considered Disadvantages</a> <a href=../../introduction/performance/ title=Performance class="nav-link text-light text-wrap d-inline-block w-100 px-0">Performance</a> <a href=../../introduction/history/ title=History class="nav-link text-light text-wrap d-inline-block w-100 px-0">History</a> <a href=../../introduction/adopters/ title=Adopters class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adopters</a> </nav> </div> <a href=../../ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/install/ title=Installation class="nav-link text-light text-wrap d-inline-block w-100 px-0">Installation</a> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title="New York Taxi Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Data</a> <a href=../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting_started/example_datasets/criteo/ title="Terabyte Click Logs from Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Terabyte Click Logs from Criteo</a> <a href=../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../getting_started/example_datasets/metrica/ title="Yandex.Metrica Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica Data</a> </nav> </div> <a href=../../getting_started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../getting_started/playground/ title=Playground class="nav-link text-light text-wrap d-inline-block w-100 px-0">Playground</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../interfaces/cli/ title="Command-Line Client" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Command-Line Client</a> <a href=../../interfaces/tcp/ title="Native Interface (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Native Interface (TCP)</a> <a href=../../interfaces/http/ title="HTTP Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP Interface</a> <a href=../../interfaces/mysql/ title="MySQL Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL Interface</a> <a href=../../interfaces/formats/ title="Input and Output Formats" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Input and Output Formats</a> <a href=../../interfaces/jdbc/ title="JDBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC Driver</a> <a href=../../interfaces/odbc/ title="ODBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC Driver</a> <a href=../../interfaces/cpp/ title="C++ Client Library" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ Client Library</a> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../interfaces/third-party/client_libraries/ title="Client Libraries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Client Libraries</a> <a href=../../interfaces/third-party/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../interfaces/third-party/gui/ title="Visual Interfaces" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Visual Interfaces</a> <a href=../../interfaces/third-party/proxy/ title=Proxies class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxies</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../engines/table_engines/mergetree_family/replication/ title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a> <a href=../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a> <a href=../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../engines/table_engines/log_family/log_family/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../engines/table_engines/log_family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../engines/table_engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../engines/table_engines/special/external_data/ title="External data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External data</a> <a href=../../engines/table_engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../engines/table_engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../engines/table_engines/special/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../engines/table_engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../engines/table_engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../engines/table_engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../engines/table_engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../engines/table_engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/database_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/database_engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../sql_reference/statements/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../sql_reference/statements/misc/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=../../sql_reference/syntax/ title=Syntax class="nav-link text-light text-wrap d-inline-block w-100 px-0">Syntax</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../sql_reference/functions/arithmetic_functions/ title=Arithmetic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arithmetic</a> <a href=../../sql_reference/functions/comparison_functions/ title=Comparison class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparison</a> <a href=../../sql_reference/functions/logical_functions/ title=Logical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Logical</a> <a href=../../sql_reference/functions/type_conversion_functions/ title="Type Conversion" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Type Conversion</a> <a href=../../sql_reference/functions/date_time_functions/ title="Working with Dates and Times" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Dates and Times</a> <a href=../../sql_reference/functions/string_functions/ title="Working with strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with strings</a> <a href=../../sql_reference/functions/string_search_functions/ title="For Searching Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Searching Strings</a> <a href=../../sql_reference/functions/string_replace_functions/ title="For Replacing in Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Replacing in Strings</a> <a href=../../sql_reference/functions/conditional_functions/ title=Conditional class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conditional</a> <a href=../../sql_reference/functions/math_functions/ title=Mathematical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mathematical</a> <a href=../../sql_reference/functions/rounding_functions/ title=Rounding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rounding</a> <a href=../../sql_reference/functions/array_functions/ title="Working with Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Arrays</a> <a href=../../sql_reference/functions/splitting_merging_functions/ title="Splitting and Merging Strings and Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Splitting and Merging Strings and Arrays</a> <a href=../../sql_reference/functions/bit_functions/ title=Bit class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bit</a> <a href=../../sql_reference/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../sql_reference/functions/hash_functions/ title=Hash class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a> <a href=../../sql_reference/functions/random_functions/ title="Generating Pseudo-Random Numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generating Pseudo-Random Numbers</a> <a href=../../sql_reference/functions/encoding_functions/ title=Encoding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encoding</a> <a href=../../sql_reference/functions/uuid_functions/ title="Working with UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with UUID</a> <a href=../../sql_reference/functions/url_functions/ title="Working with URLs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with URLs</a> <a href=../../sql_reference/functions/ip_address_functions/ title="Working with IP Addresses" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with IP Addresses</a> <a href=../../sql_reference/functions/json_functions/ title="Working with JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with JSON</a> <a href=../../sql_reference/functions/higher_order_functions/ title=Higher-Order class="nav-link text-light text-wrap d-inline-block w-100 px-0">Higher-Order</a> <a href=../../sql_reference/functions/ext_dict_functions/ title="Working with External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with External Dictionaries</a> <a href=../../sql_reference/functions/ym_dict_functions/ title="Working with Yandex.Metrica Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Yandex.Metrica Dictionaries</a> <a href=../../sql_reference/functions/in_functions/ title="Implementing the IN Operator" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implementing the IN Operator</a> <a href=../../sql_reference/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../sql_reference/functions/geo/ title="Working with geographical coordinates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with geographical coordinates</a> <a href=../../sql_reference/functions/functions_for_nulls/ title="Working with Nullable arguments" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Nullable arguments</a> <a href=../../sql_reference/functions/machine_learning_functions/ title="Machine Learning Functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Machine Learning Functions</a> <a href=../../sql_reference/functions/introspection/ title=Introspection class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introspection</a> <a href=../../sql_reference/functions/other_functions/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/aggregate_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../sql_reference/aggregate_functions/reference/ title=Reference class="nav-link text-light text-wrap d-inline-block w-100 px-0">Reference</a> <a href=../../sql_reference/aggregate_functions/combinators/ title="Aggregate function combinators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aggregate function combinators</a> <a href=../../sql_reference/aggregate_functions/parametric_functions/ title="Parametric aggregate functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parametric aggregate functions</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/table_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../sql_reference/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../sql_reference/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../sql_reference/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../sql_reference/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../sql_reference/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/dictionaries/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="General Description" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Description</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Configuring an External Dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuring an External Dictionary</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Storing Dictionaries in Memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Storing Dictionaries in Memory</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Dictionary Updates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Updates</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Sources of External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources of External Dictionaries</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Dictionary Key and Fields" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Key and Fields</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Hierarchical dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hierarchical dictionaries</a> </nav> </div> <a href=../../sql_reference/dictionaries/internal_dicts/ title="Internal Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Internal Dictionaries</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../sql_reference/data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../sql_reference/data_types/boolean/ title=Boolean class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean</a> <a href=../../sql_reference/data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../sql_reference/data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../sql_reference/data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../sql_reference/data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=#sidebar-sidebar-6-8-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-6-8-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=../../sql_reference/data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-6-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-6-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../sql_reference/data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../sql_reference/data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../sql_reference/data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> </nav> </div> <a href=#sidebar-sidebar-6-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../sql_reference/data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../sql_reference/operators/ title=Operators class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operators</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../guides/apply_catboost_model/ title="Applying CatBoost Models" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Applying CatBoost Models</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/requirements/ title=Requirements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requirements</a> <a href=../../operations/monitoring/ title=Monitoring class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoring</a> <a href=../../operations/troubleshooting/ title=Troubleshooting class="nav-link text-light text-wrap d-inline-block w-100 px-0">Troubleshooting</a> <a href=../../operations/update/ title="ClickHouse Update" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Update</a> <a href=../../operations/access_rights/ title="Access Rights" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Access Rights</a> <a href=../../operations/backup/ title="Data Backup" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Backup</a> <a href=../../operations/configuration_files/ title="Configuration Files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration Files</a> <a href=../../operations/quotas/ title=Quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quotas</a> <a href=#sidebar-sidebar-8-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-10 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-8-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../operations/optimizing_performance/sampling_query_profiler/ title="Query Profiling" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Query Profiling</a> </nav> </div> <a href=../../operations/system_tables/ title="System Tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">System Tables</a> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_configuration_parameters/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/server_configuration_parameters/settings/ title="Server Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server Settings</a> </nav> </div> <a href=../../operations/performance_test/ title="Testing Hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing Hardware</a> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/settings/permissions_for_queries/ title="Permissions for Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permissions for Queries</a> <a href=../../operations/settings/query_complexity/ title="Restrictions on Query Complexity" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions on Query Complexity</a> <a href=../../operations/settings/settings/ title=Settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a> <a href=../../operations/settings/settings_profiles/ title="Settings Profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings Profiles</a> <a href=../../operations/settings/constraints_on_settings/ title="Constraints on Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Constraints on Settings</a> <a href=../../operations/settings/settings_users/ title="User Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">User Settings</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utilities/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../operations/utilities/clickhouse-benchmark/ title=clickhouse-benchmark class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a> </nav> </div> <a href=../../operations/tips/ title="Usage Recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage Recommendations</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/developer_instruction/ title="The Beginner ClickHouse Developer Instruction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">The Beginner ClickHouse Developer Instruction</a> <a href=../../development/architecture/ title="Overview of ClickHouse Architecture" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview of ClickHouse Architecture</a> <a href=../../development/browse_code/ title="Browse ClickHouse Source Code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Browse ClickHouse Source Code</a> <a href=../../development/build/ title="How to Build ClickHouse on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux</a> <a href=../../development/build_osx/ title="How to Build ClickHouse on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Mac OS X</a> <a href=../../development/build_cross_osx/ title="How to Build ClickHouse on Linux for Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for Mac OS X</a> <a href=../../development/build_cross_arm/ title="How to Build ClickHouse on Linux for AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for AARCH64 (ARM64)</a> <a href=../../development/style/ title="How to Write C++ Code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Write C++ Code</a> <a href=../../development/tests/ title="How to Run ClickHouse Tests" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Run ClickHouse Tests</a> <a href=../../development/contrib/ title="Third-Party Libraries Used" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party Libraries Used</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../commercial/cloud/ title="ClickHouse Cloud Service Providers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Cloud Service Providers</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/changelog/ title=2020 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../whats_new/roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../whats_new/security_changelog/ title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../faq/general/ title="General Questions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Questions</a> </nav> </div> <a href=../../single/clickhouse_en.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h2 id=clickhouse-release-v20-3>ClickHouse release v20.3<a class=headerlink href=#clickhouse-release-v20-3 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-v20-3-4-10-2020-03-20>ClickHouse release v20.3.4.10, 2020-03-20<a class=headerlink href=#clickhouse-release-v20-3-4-10-2020-03-20 title="Permanent link">&para;</a></h3> <h4 id=bug-fix>Bug Fix<a class=headerlink href=#bug-fix title="Permanent link">&para;</a></h4> <ul> <li>This release also contains all bug fixes from 20.1.8.41</li> <li>Fix missing <code>rows_before_limit_at_least</code> for queries over http (with processors pipeline). This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9730 rel="external nofollow noreferrer">#9730</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9757 rel="external nofollow noreferrer">#9757</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> </ul> <h3 id=clickhouse-release-v20-3-3-6-2020-03-17>ClickHouse release v20.3.3.6, 2020-03-17<a class=headerlink href=#clickhouse-release-v20-3-3-6-2020-03-17 title="Permanent link">&para;</a></h3> <h4 id=bug-fix_1>Bug Fix<a class=headerlink href=#bug-fix_1 title="Permanent link">&para;</a></h4> <ul> <li>This release also contains all bug fixes from 20.1.7.38</li> <li>Fix bug in a replication that doesn't allow replication to work if the user has executed mutations on the previous version. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9645 rel="external nofollow noreferrer">#9645</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9652 rel="external nofollow noreferrer">#9652</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>). It makes version 20.3 backward compatible again.</li> <li>Add setting <code>use_compact_format_in_distributed_parts_names</code> which allows to write files for <code>INSERT</code> queries into <code>Distributed</code> table with more compact format. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9647 rel="external nofollow noreferrer">#9647</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9653 rel="external nofollow noreferrer">#9653</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>). It makes version 20.3 backward compatible again.</li> </ul> <h3 id=clickhouse-release-v20-3-2-1-2020-03-12>ClickHouse release v20.3.2.1, 2020-03-12<a class=headerlink href=#clickhouse-release-v20-3-2-1-2020-03-12 title="Permanent link">&para;</a></h3> <h4 id=backward-incompatible-change>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change title="Permanent link">&para;</a></h4> <ul> <li>Fixed the issue <code>file name too long</code> when sending data for <code>Distributed</code> tables for a large number of replicas. Fixed the issue that replica credentials were exposed in the server log. The format of directory name on disk was changed to <code>[shard{shard_index}[_replica{replica_index}]]</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8911 rel="external nofollow noreferrer">#8911</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>) After you upgrade to the new version, you will not be able to downgrade without manual intervention, because old server version does not recognize the new directory format. If you want to downgrade, you have to manually rename the corresponding directories to the old format. This change is relevant only if you have used asynchronous <code>INSERT</code>s to <code>Distributed</code> tables. In the version 20.3.3 we will introduce a setting that will allow you to enable the new format gradually.</li> <li>Changed the format of replication log entries for mutation commands. You have to wait for old mutations to process before installing the new version.</li> <li>Implement simple memory profiler that dumps stacktraces to <code>system.trace_log</code> every N bytes over soft allocation limit <a href=https://github.com/ClickHouse/ClickHouse/pull/8765 rel="external nofollow noreferrer">#8765</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/9472 rel="external nofollow noreferrer">#9472</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>) The column of <code>system.trace_log</code> was renamed from <code>timer_type</code> to <code>trace_type</code>. This will require changes in third-party performance analysis and flamegraph processing tools.</li> <li>Use OS thread id everywhere instead of internal thread number. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7477 rel="external nofollow noreferrer">#7477</a> Old <code>clickhouse-client</code> cannot receive logs that are send from the server when the setting <code>send_logs_level</code> is enabled, because the names and types of the structured log messages were changed. On the other hand, different server versions can send logs with different types to each other. When you don't use the <code>send_logs_level</code> setting, you should not care. <a href=https://github.com/ClickHouse/ClickHouse/pull/8954 rel="external nofollow noreferrer">#8954</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Remove <code>indexHint</code> function <a href=https://github.com/ClickHouse/ClickHouse/pull/9542 rel="external nofollow noreferrer">#9542</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Remove <code>findClusterIndex</code>, <code>findClusterValue</code> functions. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8641 rel="external nofollow noreferrer">#8641</a>. If you were using these functions, send an email to <code>clickhouse-feedback@yandex-team.com</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9543 rel="external nofollow noreferrer">#9543</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Now it's not allowed to create columns or add columns with <code>SELECT</code> subquery as default expression. <a href=https://github.com/ClickHouse/ClickHouse/pull/9481 rel="external nofollow noreferrer">#9481</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Require aliases for subqueries in JOIN. <a href=https://github.com/ClickHouse/ClickHouse/pull/9274 rel="external nofollow noreferrer">#9274</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Improved <code>ALTER MODIFY/ADD</code> queries logic. Now you cannot <code>ADD</code> column without type, <code>MODIFY</code> default expression doesn't change type of column and <code>MODIFY</code> type doesn't loose default expression value. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8669 rel="external nofollow noreferrer">#8669</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9227 rel="external nofollow noreferrer">#9227</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Require server to be restarted to apply the changes in logging configuration. This is a temporary workaround to avoid the bug where the server logs to a deleted log file (see <a href=https://github.com/ClickHouse/ClickHouse/issues/8696 rel="external nofollow noreferrer">#8696</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8707 rel="external nofollow noreferrer">#8707</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>The setting <code>experimental_use_processors</code> is enabled by default. This setting enables usage of the new query pipeline. This is internal refactoring and we expect no visible changes. If you will see any issues, set it to back zero. <a href=https://github.com/ClickHouse/ClickHouse/pull/8768 rel="external nofollow noreferrer">#8768</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> </ul> <h4 id=new-feature>New Feature<a class=headerlink href=#new-feature title="Permanent link">&para;</a></h4> <ul> <li>Add <code>Avro</code> and <code>AvroConfluent</code> input/output formats <a href=https://github.com/ClickHouse/ClickHouse/pull/8571 rel="external nofollow noreferrer">#8571</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer">Andrew Onyshchuk</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8957 rel="external nofollow noreferrer">#8957</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer">Andrew Onyshchuk</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8717 rel="external nofollow noreferrer">#8717</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Multi-threaded and non-blocking updates of expired keys in <code>cache</code> dictionaries (with optional permission to read old ones). <a href=https://github.com/ClickHouse/ClickHouse/pull/8303 rel="external nofollow noreferrer">#8303</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Add query <code>ALTER ... MATERIALIZE TTL</code>. It runs mutation that forces to remove expired data by TTL and recalculates meta-information about TTL in all parts. <a href=https://github.com/ClickHouse/ClickHouse/pull/8775 rel="external nofollow noreferrer">#8775</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Switch from HashJoin to MergeJoin (on disk) if needed <a href=https://github.com/ClickHouse/ClickHouse/pull/9082 rel="external nofollow noreferrer">#9082</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Added <code>MOVE PARTITION</code> command for <code>ALTER TABLE</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/4729 rel="external nofollow noreferrer">#4729</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6168 rel="external nofollow noreferrer">#6168</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Guillaume Tassery</a>)</li> <li>Reloading storage configuration from configuration file on the fly. <a href=https://github.com/ClickHouse/ClickHouse/pull/8594 rel="external nofollow noreferrer">#8594</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Allowed to change <code>storage_policy</code> to not less rich one. <a href=https://github.com/ClickHouse/ClickHouse/pull/8107 rel="external nofollow noreferrer">#8107</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Added support for globs/wildcards for S3 storage and table function. <a href=https://github.com/ClickHouse/ClickHouse/pull/8851 rel="external nofollow noreferrer">#8851</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Implement <code>bitAnd</code>, <code>bitOr</code>, <code>bitXor</code>, <code>bitNot</code> for <code>FixedString(N)</code> datatype. <a href=https://github.com/ClickHouse/ClickHouse/pull/9091 rel="external nofollow noreferrer">#9091</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Guillaume Tassery</a>)</li> <li>Added function <code>bitCount</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8702 rel="external nofollow noreferrer">#8702</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8708 rel="external nofollow noreferrer">#8708</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8749 rel="external nofollow noreferrer">#8749</a> (<a href=https://github.com/ikopylov rel="external nofollow noreferrer">ikopylov</a>)</li> <li>Add <code>generateRandom</code> table function to generate random rows with given schema. Allows to populate arbitrary test table with data. <a href=https://github.com/ClickHouse/ClickHouse/pull/8994 rel="external nofollow noreferrer">#8994</a> (<a href=https://github.com/qoega rel="external nofollow noreferrer">Ilya Yatsishin</a>)</li> <li><code>JSONEachRowFormat</code>: support special case when objects enclosed in top-level array. <a href=https://github.com/ClickHouse/ClickHouse/pull/8860 rel="external nofollow noreferrer">#8860</a> (<a href=https://github.com/Avogar rel="external nofollow noreferrer">Kruglov Pavel</a>)</li> <li>Now it's possible to create a column with <code>DEFAULT</code> expression which depends on a column with default <code>ALIAS</code> expression. <a href=https://github.com/ClickHouse/ClickHouse/pull/9489 rel="external nofollow noreferrer">#9489</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Allow to specify <code>--limit</code> more than the source data size in <code>clickhouse-obfuscator</code>. The data will repeat itself with different random seed. <a href=https://github.com/ClickHouse/ClickHouse/pull/9155 rel="external nofollow noreferrer">#9155</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Added <code>groupArraySample</code> function (similar to <code>groupArray</code>) with reservior sampling algorithm. <a href=https://github.com/ClickHouse/ClickHouse/pull/8286 rel="external nofollow noreferrer">#8286</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Now you can monitor the size of update queue in <code>cache</code>/<code>complex_key_cache</code> dictionaries via system metrics. <a href=https://github.com/ClickHouse/ClickHouse/pull/9413 rel="external nofollow noreferrer">#9413</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Allow to use CRLF as a line separator in CSV output format with setting <code>output_format_csv_crlf_end_of_line</code> is set to 1 <a href=https://github.com/ClickHouse/ClickHouse/pull/8934 rel="external nofollow noreferrer">#8934</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8935 rel="external nofollow noreferrer">#8935</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8963 rel="external nofollow noreferrer">#8963</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Implement more functions of the <a href=https://github.com/uber/h3 rel="external nofollow noreferrer">H3</a> API: <code>h3GetBaseCell</code>, <code>h3HexAreaM2</code>, <code>h3IndexesAreNeighbors</code>, <code>h3ToChildren</code>, <code>h3ToString</code> and <code>stringToH3</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8938 rel="external nofollow noreferrer">#8938</a> (<a href=https://github.com/nmandery rel="external nofollow noreferrer">Nico Mandery</a>)</li> <li>New setting introduced: <code>max_parser_depth</code> to control maximum stack size and allow large complex queries. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6681 rel="external nofollow noreferrer">#6681</a> and <a href=https://github.com/ClickHouse/ClickHouse/issues/7668 rel="external nofollow noreferrer">#7668</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8647 rel="external nofollow noreferrer">#8647</a> (<a href=https://github.com/qMBQx8GH rel="external nofollow noreferrer">Maxim Smirnov</a>)</li> <li>Add a setting <code>force_optimize_skip_unused_shards</code> setting to throw if skipping of unused shards is not possible <a href=https://github.com/ClickHouse/ClickHouse/pull/8805 rel="external nofollow noreferrer">#8805</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Allow to configure multiple disks/volumes for storing data for send in <code>Distributed</code> engine <a href=https://github.com/ClickHouse/ClickHouse/pull/8756 rel="external nofollow noreferrer">#8756</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Support storage policy (<code>&lt;tmp_policy&gt;</code>) for storing temporary data. <a href=https://github.com/ClickHouse/ClickHouse/pull/8750 rel="external nofollow noreferrer">#8750</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Added <code>X-ClickHouse-Exception-Code</code> HTTP header that is set if exception was thrown before sending data. This implements <a href=https://github.com/ClickHouse/ClickHouse/issues/4971 rel="external nofollow noreferrer">#4971</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8786 rel="external nofollow noreferrer">#8786</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Added function <code>ifNotFinite</code>. It is just a syntactic sugar: <code>ifNotFinite(x, y) = isFinite(x) ? x : y</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8710 rel="external nofollow noreferrer">#8710</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Added <code>last_successful_update_time</code> column in <code>system.dictionaries</code> table <a href=https://github.com/ClickHouse/ClickHouse/pull/9394 rel="external nofollow noreferrer">#9394</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Add <code>blockSerializedSize</code> function (size on disk without compression) <a href=https://github.com/ClickHouse/ClickHouse/pull/8952 rel="external nofollow noreferrer">#8952</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Add function <code>moduloOrZero</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9358 rel="external nofollow noreferrer">#9358</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Added system tables <code>system.zeros</code> and <code>system.zeros_mt</code> as well as tale functions <code>zeros()</code> and <code>zeros_mt()</code>. Tables (and table functions) contain single column with name <code>zero</code> and type <code>UInt8</code>. This column contains zeros. It is needed for test purposes as the fastest method to generate many rows. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6604 rel="external nofollow noreferrer">#6604</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9593 rel="external nofollow noreferrer">#9593</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> </ul> <h4 id=experimental-feature>Experimental Feature<a class=headerlink href=#experimental-feature title="Permanent link">&para;</a></h4> <ul> <li>Add new compact format of parts in <code>MergeTree</code>-family tables in which all columns are stored in one file. It helps to increase performance of small and frequent inserts. The old format (one file per column) is now called wide. Data storing format is controlled by settings <code>min_bytes_for_wide_part</code> and <code>min_rows_for_wide_part</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8290 rel="external nofollow noreferrer">#8290</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Support for S3 storage for <code>Log</code>, <code>TinyLog</code> and <code>StripeLog</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/8862 rel="external nofollow noreferrer">#8862</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer">Pavel Kovalenko</a>)</li> </ul> <h4 id=bug-fix_2>Bug Fix<a class=headerlink href=#bug-fix_2 title="Permanent link">&para;</a></h4> <ul> <li>Fixed inconsistent whitespaces in log messages. <a href=https://github.com/ClickHouse/ClickHouse/pull/9322 rel="external nofollow noreferrer">#9322</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix bug in which arrays of unnamed tuples were flattened as Nested structures on table creation. <a href=https://github.com/ClickHouse/ClickHouse/pull/8866 rel="external nofollow noreferrer">#8866</a> (<a href=https://github.com/achulkov2 rel="external nofollow noreferrer">achulkov2</a>)</li> <li>Fixed the issue when "Too many open files" error may happen if there are too many files matching glob pattern in <code>File</code> table or <code>file</code> table function. Now files are opened lazily. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8857 rel="external nofollow noreferrer">#8857</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8861 rel="external nofollow noreferrer">#8861</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>DROP TEMPORARY TABLE now drops only temporary table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8907 rel="external nofollow noreferrer">#8907</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Remove outdated partition when we shutdown the server or DETACH/ATTACH a table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8602 rel="external nofollow noreferrer">#8602</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Guillaume Tassery</a>)</li> <li>For how the default disk calculates the free space from <code>data</code> subdirectory. Fixed the issue when the amount of free space is not calculated correctly if the <code>data</code> directory is mounted to a separate device (rare case). This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7441 rel="external nofollow noreferrer">#7441</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9257 rel="external nofollow noreferrer">#9257</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Allow comma (cross) join with IN () inside. <a href=https://github.com/ClickHouse/ClickHouse/pull/9251 rel="external nofollow noreferrer">#9251</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Allow to rewrite CROSS to INNER JOIN if there's [NOT] LIKE operator in WHERE section. <a href=https://github.com/ClickHouse/ClickHouse/pull/9229 rel="external nofollow noreferrer">#9229</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Fix possible incorrect result after <code>GROUP BY</code> with enabled setting <code>distributed_aggregation_memory_efficient</code>. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9134 rel="external nofollow noreferrer">#9134</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9289 rel="external nofollow noreferrer">#9289</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Found keys were counted as missed in metrics of cache dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/9411 rel="external nofollow noreferrer">#9411</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Fix replication protocol incompatibility introduced in <a href=https://github.com/ClickHouse/ClickHouse/issues/8598 rel="external nofollow noreferrer">#8598</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9412 rel="external nofollow noreferrer">#9412</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fixed race condition on <code>queue_task_handle</code> at the startup of <code>ReplicatedMergeTree</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/9552 rel="external nofollow noreferrer">#9552</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>The token <code>NOT</code> didn't work in <code>SHOW TABLES NOT LIKE</code> query <a href=https://github.com/ClickHouse/ClickHouse/issues/8727 rel="external nofollow noreferrer">#8727</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8940 rel="external nofollow noreferrer">#8940</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Added range check to function <code>h3EdgeLengthM</code>. Without this check, buffer overflow is possible. <a href=https://github.com/ClickHouse/ClickHouse/pull/8945 rel="external nofollow noreferrer">#8945</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed up a bug in batched calculations of ternary logical OPs on multiple arguments (more than 10). <a href=https://github.com/ClickHouse/ClickHouse/pull/8718 rel="external nofollow noreferrer">#8718</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Alexander Kazakov</a>)</li> <li>Fix error of PREWHERE optimization, which could lead to segfaults or <code>Inconsistent number of columns got from MergeTreeRangeReader</code> exception. <a href=https://github.com/ClickHouse/ClickHouse/pull/9024 rel="external nofollow noreferrer">#9024</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fix unexpected <code>Timeout exceeded while reading from socket</code> exception, which randomly happens on secure connection before timeout actually exceeded and when query profiler is enabled. Also add <code>connect_timeout_with_failover_secure_ms</code> settings (default 100ms), which is similar to <code>connect_timeout_with_failover_ms</code>, but is used for secure connections (because SSL handshake is slower, than ordinary TCP connection) <a href=https://github.com/ClickHouse/ClickHouse/pull/9026 rel="external nofollow noreferrer">#9026</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fix bug with mutations finalization, when mutation may hang in state with <code>parts_to_do=0</code> and <code>is_done=0</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9022 rel="external nofollow noreferrer">#9022</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Use new ANY JOIN logic with <code>partial_merge_join</code> setting. It's possible to make <code>ANY|ALL|SEMI LEFT</code> and <code>ALL INNER</code> joins with <code>partial_merge_join=1</code> now. <a href=https://github.com/ClickHouse/ClickHouse/pull/8932 rel="external nofollow noreferrer">#8932</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Shard now clamps the settings got from the initiator to the shard's constaints instead of throwing an exception. This fix allows to send queries to a shard with another constraints. <a href=https://github.com/ClickHouse/ClickHouse/pull/9447 rel="external nofollow noreferrer">#9447</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Fixed memory management problem in <code>MergeTreeReadPool</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8791 rel="external nofollow noreferrer">#8791</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix <code>toDecimal*OrNull()</code> functions family when called with string <code>e</code>. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8312 rel="external nofollow noreferrer">#8312</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8764 rel="external nofollow noreferrer">#8764</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Make sure that <code>FORMAT Null</code> sends no data to the client. <a href=https://github.com/ClickHouse/ClickHouse/pull/8767 rel="external nofollow noreferrer">#8767</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Fix bug that timestamp in <code>LiveViewBlockInputStream</code> will not updated. <code>LIVE VIEW</code> is an experimental feature. <a href=https://github.com/ClickHouse/ClickHouse/pull/8644 rel="external nofollow noreferrer">#8644</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer">vxider</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8625 rel="external nofollow noreferrer">#8625</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer">vxider</a>)</li> <li>Fixed <code>ALTER MODIFY TTL</code> wrong behavior which did not allow to delete old TTL expressions. <a href=https://github.com/ClickHouse/ClickHouse/pull/8422 rel="external nofollow noreferrer">#8422</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fixed UBSan report in MergeTreeIndexSet. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9250 rel="external nofollow noreferrer">#9250</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9365 rel="external nofollow noreferrer">#9365</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed the behaviour of <code>match</code> and <code>extract</code> functions when haystack has zero bytes. The behaviour was wrong when haystack was constant. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9160 rel="external nofollow noreferrer">#9160</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9163 rel="external nofollow noreferrer">#9163</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/9345 rel="external nofollow noreferrer">#9345</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Avoid throwing from destructor in Apache Avro 3rd-party library. <a href=https://github.com/ClickHouse/ClickHouse/pull/9066 rel="external nofollow noreferrer">#9066</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer">Andrew Onyshchuk</a>)</li> <li>Don't commit a batch polled from <code>Kafka</code> partially as it can lead to holes in data. <a href=https://github.com/ClickHouse/ClickHouse/pull/8876 rel="external nofollow noreferrer">#8876</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Fix <code>joinGet</code> with nullable return types. <a href=https://github.com/ClickHouse/ClickHouse/issues/8919>https://github.com/ClickHouse/ClickHouse/issues/8919</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9014 rel="external nofollow noreferrer">#9014</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Fix data incompatibility when compressed with <code>T64</code> codec. <a href=https://github.com/ClickHouse/ClickHouse/pull/9016 rel="external nofollow noreferrer">#9016</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>) Fix data type ids in <code>T64</code> compression codec that leads to wrong (de)compression in affected versions. <a href=https://github.com/ClickHouse/ClickHouse/pull/9033 rel="external nofollow noreferrer">#9033</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Add setting <code>enable_early_constant_folding</code> and disable it in some cases that leads to errors. <a href=https://github.com/ClickHouse/ClickHouse/pull/9010 rel="external nofollow noreferrer">#9010</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Fix pushdown predicate optimizer with VIEW and enable the test <a href=https://github.com/ClickHouse/ClickHouse/pull/9011 rel="external nofollow noreferrer">#9011</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Winter Zhang</a>)</li> <li>Fix segfault in <code>Merge</code> tables, that can happen when reading from <code>File</code> storages <a href=https://github.com/ClickHouse/ClickHouse/pull/9387 rel="external nofollow noreferrer">#9387</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Added a check for storage policy in <code>ATTACH PARTITION FROM</code>, <code>REPLACE PARTITION</code>, <code>MOVE TO TABLE</code>. Otherwise it could make data of part inaccessible after restart and prevent ClickHouse to start. <a href=https://github.com/ClickHouse/ClickHouse/pull/9383 rel="external nofollow noreferrer">#9383</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix alters if there is TTL set for table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8800 rel="external nofollow noreferrer">#8800</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fix race condition that can happen when <code>SYSTEM RELOAD ALL DICTIONARIES</code> is executed while some dictionary is being modified/added/removed. <a href=https://github.com/ClickHouse/ClickHouse/pull/8801 rel="external nofollow noreferrer">#8801</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>In previous versions <code>Memory</code> database engine use empty data path, so tables are created in <code>path</code> directory (e.g. <code>/var/lib/clickhouse/</code>), not in data directory of database (e.g. <code>/var/lib/clickhouse/db_name</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8753 rel="external nofollow noreferrer">#8753</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fixed wrong log messages about missing default disk or policy. <a href=https://github.com/ClickHouse/ClickHouse/pull/9530 rel="external nofollow noreferrer">#9530</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix not(has()) for the bloom_filter index of array types. <a href=https://github.com/ClickHouse/ClickHouse/pull/9407 rel="external nofollow noreferrer">#9407</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer">achimbab</a>)</li> <li>Allow first column(s) in a table with <code>Log</code> engine be an alias <a href=https://github.com/ClickHouse/ClickHouse/pull/9231 rel="external nofollow noreferrer">#9231</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Fix order of ranges while reading from <code>MergeTree</code> table in one thread. It could lead to exceptions from <code>MergeTreeRangeReader</code> or wrong query results. <a href=https://github.com/ClickHouse/ClickHouse/pull/9050 rel="external nofollow noreferrer">#9050</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Make <code>reinterpretAsFixedString</code> to return <code>FixedString</code> instead of <code>String</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9052 rel="external nofollow noreferrer">#9052</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer">Andrew Onyshchuk</a>)</li> <li>Avoid extremely rare cases when the user can get wrong error message (<code>Success</code> instead of detailed error description). <a href=https://github.com/ClickHouse/ClickHouse/pull/9457 rel="external nofollow noreferrer">#9457</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Do not crash when using <code>Template</code> format with empty row template. <a href=https://github.com/ClickHouse/ClickHouse/pull/8785 rel="external nofollow noreferrer">#8785</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Metadata files for system tables could be created in wrong place <a href=https://github.com/ClickHouse/ClickHouse/pull/8653 rel="external nofollow noreferrer">#8653</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>) Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8581 rel="external nofollow noreferrer">#8581</a>.</li> <li>Fix data race on exception_ptr in cache dictionary <a href=https://github.com/ClickHouse/ClickHouse/issues/8303 rel="external nofollow noreferrer">#8303</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9379 rel="external nofollow noreferrer">#9379</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Do not throw an exception for query <code>ATTACH TABLE IF NOT EXISTS</code>. Previously it was thrown if table already exists, despite the <code>IF NOT EXISTS</code> clause. <a href=https://github.com/ClickHouse/ClickHouse/pull/8967 rel="external nofollow noreferrer">#8967</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fixed missing closing paren in exception message. <a href=https://github.com/ClickHouse/ClickHouse/pull/8811 rel="external nofollow noreferrer">#8811</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Avoid message <code>Possible deadlock avoided</code> at the startup of clickhouse-client in interactive mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/9455 rel="external nofollow noreferrer">#9455</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed the issue when padding at the end of base64 encoded value can be malformed. Update base64 library. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9491 rel="external nofollow noreferrer">#9491</a>, closes <a href=https://github.com/ClickHouse/ClickHouse/issues/9492 rel="external nofollow noreferrer">#9492</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9500 rel="external nofollow noreferrer">#9500</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Prevent losing data in <code>Kafka</code> in rare cases when exception happens after reading suffix but before commit. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9378 rel="external nofollow noreferrer">#9378</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9507 rel="external nofollow noreferrer">#9507</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Fixed exception in <code>DROP TABLE IF EXISTS</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8663 rel="external nofollow noreferrer">#8663</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer">Nikita Vasilev</a>)</li> <li>Fix crash when a user tries to <code>ALTER MODIFY SETTING</code> for old-formated <code>MergeTree</code> table engines family. <a href=https://github.com/ClickHouse/ClickHouse/pull/9435 rel="external nofollow noreferrer">#9435</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Support for UInt64 numbers that don't fit in Int64 in JSON-related functions. Update SIMDJSON to master. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9209 rel="external nofollow noreferrer">#9209</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9344 rel="external nofollow noreferrer">#9344</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed execution of inversed predicates when non-strictly monotinic functional index is used. <a href=https://github.com/ClickHouse/ClickHouse/pull/9223 rel="external nofollow noreferrer">#9223</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Alexander Kazakov</a>)</li> <li>Don't try to fold <code>IN</code> constant in <code>GROUP BY</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8868 rel="external nofollow noreferrer">#8868</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Fix bug in <code>ALTER DELETE</code> mutations which leads to index corruption. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9019 rel="external nofollow noreferrer">#9019</a> and <a href=https://github.com/ClickHouse/ClickHouse/issues/8982 rel="external nofollow noreferrer">#8982</a>. Additionally fix extremely rare race conditions in <code>ReplicatedMergeTree</code> <code>ALTER</code> queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/9048 rel="external nofollow noreferrer">#9048</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>When the setting <code>compile_expressions</code> is enabled, you can get <code>unexpected column</code> in <code>LLVMExecutableFunction</code> when we use <code>Nullable</code> type <a href=https://github.com/ClickHouse/ClickHouse/pull/8910 rel="external nofollow noreferrer">#8910</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Guillaume Tassery</a>)</li> <li>Multiple fixes for <code>Kafka</code> engine: 1) fix duplicates that were appearing during consumer group rebalance. 2) Fix rare 'holes' appeared when data were polled from several partitions with one poll and committed partially (now we always process / commit the whole polled block of messages). 3) Fix flushes by block size (before that only flushing by timeout was working properly). 4) better subscription procedure (with assignment feedback). 5) Make tests work faster (with default intervals and timeouts). Due to the fact that data was not flushed by block size before (as it should according to documentation), that PR may lead to some performance degradation with default settings (due to more often &amp; tinier flushes which are less optimal). If you encounter the performance issue after that change - please increase <code>kafka_max_block_size</code> in the table to the bigger value ( for example <code>CREATE TABLE ...Engine=Kafka ... SETTINGS ... kafka_max_block_size=524288</code>). Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7259 rel="external nofollow noreferrer">#7259</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8917 rel="external nofollow noreferrer">#8917</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Fix <code>Parameter out of bound</code> exception in some queries after PREWHERE optimizations. <a href=https://github.com/ClickHouse/ClickHouse/pull/8914 rel="external nofollow noreferrer">#8914</a> (<a href=https://github.com/bgiard rel="external nofollow noreferrer">Baudouin Giard</a>)</li> <li>Fixed the case of mixed-constness of arguments of function <code>arrayZip</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8705 rel="external nofollow noreferrer">#8705</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>When executing <code>CREATE</code> query, fold constant expressions in storage engine arguments. Replace empty database name with current database. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6508 rel="external nofollow noreferrer">#6508</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3492 rel="external nofollow noreferrer">#3492</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9262 rel="external nofollow noreferrer">#9262</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Now it's not possible to create or add columns with simple cyclic aliases like <code>a DEFAULT b, b DEFAULT a</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9603 rel="external nofollow noreferrer">#9603</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fixed a bug with double move which may corrupt original part. This is relevant if you use <code>ALTER TABLE MOVE</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8680 rel="external nofollow noreferrer">#8680</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Allow <code>interval</code> identifier to correctly parse without backticks. Fixed issue when a query cannot be executed even if the <code>interval</code> identifier is enclosed in backticks or double quotes. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9124 rel="external nofollow noreferrer">#9124</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9142 rel="external nofollow noreferrer">#9142</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed fuzz test and incorrect behaviour of <code>bitTestAll</code>/<code>bitTestAny</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/9143 rel="external nofollow noreferrer">#9143</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix possible crash/wrong number of rows in <code>LIMIT n WITH TIES</code> when there are a lot of rows equal to n'th row. <a href=https://github.com/ClickHouse/ClickHouse/pull/9464 rel="external nofollow noreferrer">#9464</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fix mutations with parts written with enabled <code>insert_quorum</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9463 rel="external nofollow noreferrer">#9463</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix data race at destruction of <code>Poco::HTTPServer</code>. It could happen when server is started and immediately shut down. <a href=https://github.com/ClickHouse/ClickHouse/pull/9468 rel="external nofollow noreferrer">#9468</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fix bug in which a misleading error message was shown when running <code>SHOW CREATE TABLE a_table_that_does_not_exist</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8899 rel="external nofollow noreferrer">#8899</a> (<a href=https://github.com/achulkov2 rel="external nofollow noreferrer">achulkov2</a>)</li> <li>Fixed <code>Parameters are out of bound</code> exception in some rare cases when we have a constant in the <code>SELECT</code> clause when we have an <code>ORDER BY</code> and a <code>LIMIT</code> clause. <a href=https://github.com/ClickHouse/ClickHouse/pull/8892 rel="external nofollow noreferrer">#8892</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Guillaume Tassery</a>)</li> <li>Fix mutations finalization, when already done mutation can have status <code>is_done=0</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9217 rel="external nofollow noreferrer">#9217</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Prevent from executing <code>ALTER ADD INDEX</code> for MergeTree tables with old syntax, because it doesn't work. <a href=https://github.com/ClickHouse/ClickHouse/pull/8822 rel="external nofollow noreferrer">#8822</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>During server startup do not access table, which <code>LIVE VIEW</code> depends on, so server will be able to start. Also remove <code>LIVE VIEW</code> dependencies when detaching <code>LIVE VIEW</code>. <code>LIVE VIEW</code> is an experimental feature. <a href=https://github.com/ClickHouse/ClickHouse/pull/8824 rel="external nofollow noreferrer">#8824</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fix possible segfault in <code>MergeTreeRangeReader</code>, while executing <code>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9106 rel="external nofollow noreferrer">#9106</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fix possible mismatched checksums with column TTLs. <a href=https://github.com/ClickHouse/ClickHouse/pull/9451 rel="external nofollow noreferrer">#9451</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fixed a bug when parts were not being moved in background by TTL rules in case when there is only one volume. <a href=https://github.com/ClickHouse/ClickHouse/pull/8672 rel="external nofollow noreferrer">#8672</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fixed the issue <code>Method createColumn() is not implemented for data type Set</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7799 rel="external nofollow noreferrer">#7799</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8674 rel="external nofollow noreferrer">#8674</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Now we will try finalize mutations more frequently. <a href=https://github.com/ClickHouse/ClickHouse/pull/9427 rel="external nofollow noreferrer">#9427</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix <code>intDiv</code> by minus one constant <a href=https://github.com/ClickHouse/ClickHouse/pull/9351 rel="external nofollow noreferrer">#9351</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Fix possible race condition in <code>BlockIO</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9356 rel="external nofollow noreferrer">#9356</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fix bug leading to server termination when trying to use / drop <code>Kafka</code> table created with wrong parameters. <a href=https://github.com/ClickHouse/ClickHouse/pull/9513 rel="external nofollow noreferrer">#9513</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Added workaround if OS returns wrong result for <code>timer_create</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/8837 rel="external nofollow noreferrer">#8837</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed error in usage of <code>min_marks_for_seek</code> parameter. Fixed the error message when there is no sharding key in Distributed table and we try to skip unused shards. <a href=https://github.com/ClickHouse/ClickHouse/pull/8908 rel="external nofollow noreferrer">#8908</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> </ul> <h4 id=improvement>Improvement<a class=headerlink href=#improvement title="Permanent link">&para;</a></h4> <ul> <li>Implement <code>ALTER MODIFY/DROP</code> queries on top of mutations for <code>ReplicatedMergeTree*</code> engines family. Now <code>ALTERS</code> blocks only at the metadata update stage, and don't block after that. <a href=https://github.com/ClickHouse/ClickHouse/pull/8701 rel="external nofollow noreferrer">#8701</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Add ability to rewrite CROSS to INNER JOINs with <code>WHERE</code> section containing unqialified names. <a href=https://github.com/ClickHouse/ClickHouse/pull/9512 rel="external nofollow noreferrer">#9512</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Make <code>SHOW TABLES</code> and <code>SHOW DATABASES</code> queries support the <code>WHERE</code> expressions and <code>FROM</code>/<code>IN</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9076 rel="external nofollow noreferrer">#9076</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer">sundyli</a>)</li> <li>Added a setting <code>deduplicate_blocks_in_dependent_materialized_views</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9070 rel="external nofollow noreferrer">#9070</a> (<a href=https://github.com/urykhy rel="external nofollow noreferrer">urykhy</a>)</li> <li>After recent changes MySQL client started to print binary strings in hex thereby making them not readable (<a href=https://github.com/ClickHouse/ClickHouse/issues/9032 rel="external nofollow noreferrer">#9032</a>). The workaround in ClickHouse is to mark string columns as UTF-8, which is not always, but usually the case. <a href=https://github.com/ClickHouse/ClickHouse/pull/9079 rel="external nofollow noreferrer">#9079</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Yuriy Baranov</a>)</li> <li>Add support of String and FixedString keys for <code>sumMap</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8903 rel="external nofollow noreferrer">#8903</a> (<a href=https://github.com/bgiard rel="external nofollow noreferrer">Baudouin Giard</a>)</li> <li>Support string keys in SummingMergeTree maps <a href=https://github.com/ClickHouse/ClickHouse/pull/8933 rel="external nofollow noreferrer">#8933</a> (<a href=https://github.com/bgiard rel="external nofollow noreferrer">Baudouin Giard</a>)</li> <li>Signal termination of thread to the thread pool even if the thread has thrown exception <a href=https://github.com/ClickHouse/ClickHouse/pull/8736 rel="external nofollow noreferrer">#8736</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer">Ding Xiang Fei</a>)</li> <li>Allow to set <code>query_id</code> in <code>clickhouse-benchmark</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9416 rel="external nofollow noreferrer">#9416</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Don't allow strange expressions in <code>ALTER TABLE ... PARTITION partition</code> query. This addresses <a href=https://github.com/ClickHouse/ClickHouse/issues/7192 rel="external nofollow noreferrer">#7192</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8835 rel="external nofollow noreferrer">#8835</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>The table <code>system.table_engines</code> now provides information about feature support (like <code>supports_ttl</code> or <code>supports_sort_order</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8830 rel="external nofollow noreferrer">#8830</a> (<a href=https://github.com/zlobober rel="external nofollow noreferrer">Max Akhmedov</a>)</li> <li>Enable <code>system.metric_log</code> by default. It will contain rows with values of ProfileEvents, CurrentMetrics collected with "collect_interval_milliseconds" interval (one second by default). The table is very small (usually in order of megabytes) and collecting this data by default is reasonable. <a href=https://github.com/ClickHouse/ClickHouse/pull/9225 rel="external nofollow noreferrer">#9225</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Initialize query profiler for all threads in a group, e.g. it allows to fully profile insert-queries. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6964 rel="external nofollow noreferrer">#6964</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8874 rel="external nofollow noreferrer">#8874</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Now temporary <code>LIVE VIEW</code> is created by <code>CREATE LIVE VIEW name WITH TIMEOUT [42] ...</code> instead of <code>CREATE TEMPORARY LIVE VIEW ...</code>, because the previous syntax was not consistent with <code>CREATE TEMPORARY TABLE ...</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9131 rel="external nofollow noreferrer">#9131</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Add text_log.level configuration parameter to limit entries that goes to <code>system.text_log</code> table <a href=https://github.com/ClickHouse/ClickHouse/pull/8809 rel="external nofollow noreferrer">#8809</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Allow to put downloaded part to a disks/volumes according to TTL rules <a href=https://github.com/ClickHouse/ClickHouse/pull/8598 rel="external nofollow noreferrer">#8598</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>For external MySQL dictionaries, allow to mutualize MySQL connection pool to "share" them among dictionaries. This option significantly reduces the number of connections to MySQL servers. <a href=https://github.com/ClickHouse/ClickHouse/pull/9409 rel="external nofollow noreferrer">#9409</a> (<a href=https://github.com/clemrodriguez rel="external nofollow noreferrer">Clément Rodriguez</a>)</li> <li>Show nearest query execution time for quantiles in <code>clickhouse-benchmark</code> output instead of interpolated values. It's better to show values that correspond to the execution time of some queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/8712 rel="external nofollow noreferrer">#8712</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Possibility to add key &amp; timestamp for the message when inserting data to Kafka. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7198 rel="external nofollow noreferrer">#7198</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8969 rel="external nofollow noreferrer">#8969</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>If server is run from terminal, highlight thread number, query id and log priority by colors. This is for improved readability of correlated log messages for developers. <a href=https://github.com/ClickHouse/ClickHouse/pull/8961 rel="external nofollow noreferrer">#8961</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Better exception message while loading tables for <code>Ordinary</code> database. <a href=https://github.com/ClickHouse/ClickHouse/pull/9527 rel="external nofollow noreferrer">#9527</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Implement <code>arraySlice</code> for arrays with aggregate function states. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9388 rel="external nofollow noreferrer">#9388</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9391 rel="external nofollow noreferrer">#9391</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Allow constant functions and constant arrays to be used on the right side of IN operator. <a href=https://github.com/ClickHouse/ClickHouse/pull/8813 rel="external nofollow noreferrer">#8813</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>If zookeeper exception has happened while fetching data for system.replicas, display it in a separate column. This implements <a href=https://github.com/ClickHouse/ClickHouse/issues/9137 rel="external nofollow noreferrer">#9137</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9138 rel="external nofollow noreferrer">#9138</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Atomically remove MergeTree data parts on destroy. <a href=https://github.com/ClickHouse/ClickHouse/pull/8402 rel="external nofollow noreferrer">#8402</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Support row-level security for Distributed tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/8926 rel="external nofollow noreferrer">#8926</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Now we recognize suffix (like KB, KiB...) in settings values. <a href=https://github.com/ClickHouse/ClickHouse/pull/8072 rel="external nofollow noreferrer">#8072</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Prevent out of memory while constructing result of a large JOIN. <a href=https://github.com/ClickHouse/ClickHouse/pull/8637 rel="external nofollow noreferrer">#8637</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Added names of clusters to suggestions in interactive mode in <code>clickhouse-client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8709 rel="external nofollow noreferrer">#8709</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Initialize query profiler for all threads in a group, e.g. it allows to fully profile insert-queries <a href=https://github.com/ClickHouse/ClickHouse/pull/8820 rel="external nofollow noreferrer">#8820</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Added column <code>exception_code</code> in <code>system.query_log</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8770 rel="external nofollow noreferrer">#8770</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Enabled MySQL compatibility server on port <code>9004</code> in the default server configuration file. Fixed password generation command in the example in configuration. <a href=https://github.com/ClickHouse/ClickHouse/pull/8771 rel="external nofollow noreferrer">#8771</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Yuriy Baranov</a>)</li> <li>Prevent abort on shutdown if the filesystem is readonly. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9094 rel="external nofollow noreferrer">#9094</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9100 rel="external nofollow noreferrer">#9100</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Better exception message when length is required in HTTP POST query. <a href=https://github.com/ClickHouse/ClickHouse/pull/9453 rel="external nofollow noreferrer">#9453</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Add <code>_path</code> and <code>_file</code> virtual columns to <code>HDFS</code> and <code>File</code> engines and <code>hdfs</code> and <code>file</code> table functions <a href=https://github.com/ClickHouse/ClickHouse/pull/8489 rel="external nofollow noreferrer">#8489</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Olga Khvostikova</a>)</li> <li>Fix error <code>Cannot find column</code> while inserting into <code>MATERIALIZED VIEW</code> in case if new column was added to view's internal table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8766 rel="external nofollow noreferrer">#8766</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8788 rel="external nofollow noreferrer">#8788</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer">vzakaznikov</a>) <a href=https://github.com/ClickHouse/ClickHouse/issues/8788 rel="external nofollow noreferrer">#8788</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8806 rel="external nofollow noreferrer">#8806</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8803 rel="external nofollow noreferrer">#8803</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fix progress over native client-server protocol, by send progress after final update (like logs). This may be relevant only to some third-party tools that are using native protocol. <a href=https://github.com/ClickHouse/ClickHouse/pull/9495 rel="external nofollow noreferrer">#9495</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Add a system metric tracking the number of client connections using MySQL protocol (<a href=https://github.com/ClickHouse/ClickHouse/issues/9013 rel="external nofollow noreferrer">#9013</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/9015 rel="external nofollow noreferrer">#9015</a> (<a href=https://github.com/Slach rel="external nofollow noreferrer">Eugene Klimov</a>)</li> <li>From now on, HTTP responses will have <code>X-ClickHouse-Timezone</code> header set to the same timezone value that <code>SELECT timezone()</code> would report. <a href=https://github.com/ClickHouse/ClickHouse/pull/9493 rel="external nofollow noreferrer">#9493</a> (<a href=https://github.com/traceon rel="external nofollow noreferrer">Denis Glazachev</a>)</li> </ul> <h4 id=performance-improvement>Performance Improvement<a class=headerlink href=#performance-improvement title="Permanent link">&para;</a></h4> <ul> <li>Improve performance of analysing index with IN <a href=https://github.com/ClickHouse/ClickHouse/pull/9261 rel="external nofollow noreferrer">#9261</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Simpler and more efficient code in Logical Functions + code cleanups. A followup to <a href=https://github.com/ClickHouse/ClickHouse/issues/8718 rel="external nofollow noreferrer">#8718</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8728 rel="external nofollow noreferrer">#8728</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Alexander Kazakov</a>)</li> <li>Overall performance improvement (in range of 5%..200% for affected queries) by ensuring even more strict aliasing with C++20 features. <a href=https://github.com/ClickHouse/ClickHouse/pull/9304 rel="external nofollow noreferrer">#9304</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>More strict aliasing for inner loops of comparison functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/9327 rel="external nofollow noreferrer">#9327</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>More strict aliasing for inner loops of arithmetic functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/9325 rel="external nofollow noreferrer">#9325</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>A ~3 times faster implementation for ColumnVector::replicate(), via which ColumnConst::convertToFullColumn() is implemented. Also will be useful in tests when materializing constants. <a href=https://github.com/ClickHouse/ClickHouse/pull/9293 rel="external nofollow noreferrer">#9293</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Alexander Kazakov</a>)</li> <li>Another minor performance improvement to <code>ColumnVector::replicate()</code> (this speeds up the <code>materialize</code> function and higher order functions) an even further improvement to <a href=https://github.com/ClickHouse/ClickHouse/issues/9293 rel="external nofollow noreferrer">#9293</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9442 rel="external nofollow noreferrer">#9442</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Alexander Kazakov</a>)</li> <li>Improved performance of <code>stochasticLinearRegression</code> aggregate function. This patch is contributed by Intel. <a href=https://github.com/ClickHouse/ClickHouse/pull/8652 rel="external nofollow noreferrer">#8652</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Improve performance of <code>reinterpretAsFixedString</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/9342 rel="external nofollow noreferrer">#9342</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Do not send blocks to client for <code>Null</code> format in processors pipeline. <a href=https://github.com/ClickHouse/ClickHouse/pull/8797 rel="external nofollow noreferrer">#8797</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8767 rel="external nofollow noreferrer">#8767</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> </ul> <h4 id=build-testing-packaging-improvement>Build/Testing/Packaging Improvement<a class=headerlink href=#build-testing-packaging-improvement title="Permanent link">&para;</a></h4> <ul> <li>Exception handling now works correctly on Windows Subsystem for Linux. See <a href=https://github.com/ClickHouse-Extras/libunwind/pull/3>https://github.com/ClickHouse-Extras/libunwind/pull/3</a> This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6480 rel="external nofollow noreferrer">#6480</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9564 rel="external nofollow noreferrer">#9564</a> (<a href=https://github.com/sobolevsv rel="external nofollow noreferrer">sobolevsv</a>)</li> <li>Replace <code>readline</code> with <code>replxx</code> for interactive line editing in <code>clickhouse-client</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8416 rel="external nofollow noreferrer">#8416</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Better build time and less template instantiations in FunctionsComparison. <a href=https://github.com/ClickHouse/ClickHouse/pull/9324 rel="external nofollow noreferrer">#9324</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Added integration with <code>clang-tidy</code> in CI. See also <a href=https://github.com/ClickHouse/ClickHouse/issues/6044 rel="external nofollow noreferrer">#6044</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9566 rel="external nofollow noreferrer">#9566</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Now we link ClickHouse in CI using <code>lld</code> even for <code>gcc</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9049 rel="external nofollow noreferrer">#9049</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Allow to randomize thread scheduling and insert glitches when <code>THREAD_FUZZER_*</code> environment variables are set. This helps testing. <a href=https://github.com/ClickHouse/ClickHouse/pull/9459 rel="external nofollow noreferrer">#9459</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Enable secure sockets in stateless tests <a href=https://github.com/ClickHouse/ClickHouse/pull/9288 rel="external nofollow noreferrer">#9288</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Make SPLIT_SHARED_LIBRARIES=OFF more robust <a href=https://github.com/ClickHouse/ClickHouse/pull/9156 rel="external nofollow noreferrer">#9156</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Make "performance_introspection_and_logging" test reliable to random server stuck. This may happen in CI environment. See also <a href=https://github.com/ClickHouse/ClickHouse/issues/9515 rel="external nofollow noreferrer">#9515</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9528 rel="external nofollow noreferrer">#9528</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Validate XML in style check. <a href=https://github.com/ClickHouse/ClickHouse/pull/9550 rel="external nofollow noreferrer">#9550</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed race condition in test <code>00738_lock_for_inner_table</code>. This test relied on sleep. <a href=https://github.com/ClickHouse/ClickHouse/pull/9555 rel="external nofollow noreferrer">#9555</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Remove performance tests of type <code>once</code>. This is needed to run all performance tests in statistical comparison mode (more reliable). <a href=https://github.com/ClickHouse/ClickHouse/pull/9557 rel="external nofollow noreferrer">#9557</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Added performance test for arithmetic functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/9326 rel="external nofollow noreferrer">#9326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Added performance test for <code>sumMap</code> and <code>sumMapWithOverflow</code> aggregate functions. Follow-up for <a href=https://github.com/ClickHouse/ClickHouse/issues/8933 rel="external nofollow noreferrer">#8933</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8947 rel="external nofollow noreferrer">#8947</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Ensure style of ErrorCodes by style check. <a href=https://github.com/ClickHouse/ClickHouse/pull/9370 rel="external nofollow noreferrer">#9370</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Add script for tests history. <a href=https://github.com/ClickHouse/ClickHouse/pull/8796 rel="external nofollow noreferrer">#8796</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Add GCC warning <code>-Wsuggest-override</code> to locate and fix all places where <code>override</code> keyword must be used. <a href=https://github.com/ClickHouse/ClickHouse/pull/8760 rel="external nofollow noreferrer">#8760</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer">kreuzerkrieg</a>)</li> <li>Ignore weak symbol under Mac OS X because it must be defined <a href=https://github.com/ClickHouse/ClickHouse/pull/9538 rel="external nofollow noreferrer">#9538</a> (<a href=https://github.com/ghost rel="external nofollow noreferrer">Deleted user</a>)</li> <li>Normalize running time of some queries in performance tests. This is done in preparation to run all the performance tests in comparison mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/9565 rel="external nofollow noreferrer">#9565</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix some tests to support pytest with query tests <a href=https://github.com/ClickHouse/ClickHouse/pull/9062 rel="external nofollow noreferrer">#9062</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Enable SSL in build with MSan, so server will not fail at startup when running stateless tests <a href=https://github.com/ClickHouse/ClickHouse/pull/9531 rel="external nofollow noreferrer">#9531</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fix database substitution in test results <a href=https://github.com/ClickHouse/ClickHouse/pull/9384 rel="external nofollow noreferrer">#9384</a> (<a href=https://github.com/qoega rel="external nofollow noreferrer">Ilya Yatsishin</a>)</li> <li>Build fixes for miscellaneous platforms <a href=https://github.com/ClickHouse/ClickHouse/pull/9381 rel="external nofollow noreferrer">#9381</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8755 rel="external nofollow noreferrer">#8755</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8631 rel="external nofollow noreferrer">#8631</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Added disks section to stateless-with-coverage test docker image <a href=https://github.com/ClickHouse/ClickHouse/pull/9213 rel="external nofollow noreferrer">#9213</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer">Pavel Kovalenko</a>)</li> <li>Get rid of in-source-tree files when building with GRPC <a href=https://github.com/ClickHouse/ClickHouse/pull/9588 rel="external nofollow noreferrer">#9588</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Slightly faster build time by removing SessionCleaner from Context. Make the code of SessionCleaner more simple. <a href=https://github.com/ClickHouse/ClickHouse/pull/9232 rel="external nofollow noreferrer">#9232</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Updated checking for hung queries in clickhouse-test script <a href=https://github.com/ClickHouse/ClickHouse/pull/8858 rel="external nofollow noreferrer">#8858</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Alexander Kazakov</a>)</li> <li>Removed some useless files from repository. <a href=https://github.com/ClickHouse/ClickHouse/pull/8843 rel="external nofollow noreferrer">#8843</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Changed type of math perftests from <code>once</code> to <code>loop</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8783 rel="external nofollow noreferrer">#8783</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Add docker image which allows to build interactive code browser HTML report for our codebase. <a href=https://github.com/ClickHouse/ClickHouse/pull/8781 rel="external nofollow noreferrer">#8781</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>) See <a href=https://clickhouse-test-reports.s3.yandex.net/codebrowser/html_report///ClickHouse/dbms/src/index.html rel="external nofollow noreferrer">Woboq Code Browser</a></li> <li>Suppress some test failures under MSan. <a href=https://github.com/ClickHouse/ClickHouse/pull/8780 rel="external nofollow noreferrer">#8780</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Speedup "exception while insert" test. This test often time out in debug-with-coverage build. <a href=https://github.com/ClickHouse/ClickHouse/pull/8711 rel="external nofollow noreferrer">#8711</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Updated <code>libcxx</code> and <code>libcxxabi</code> to master. In preparation to <a href=https://github.com/ClickHouse/ClickHouse/issues/9304 rel="external nofollow noreferrer">#9304</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9308 rel="external nofollow noreferrer">#9308</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix flacky test <code>00910_zookeeper_test_alter_compression_codecs</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9525 rel="external nofollow noreferrer">#9525</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Clean up duplicated linker flags. Make sure the linker won't look up an unexpected symbol. <a href=https://github.com/ClickHouse/ClickHouse/pull/9433 rel="external nofollow noreferrer">#9433</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Add <code>clickhouse-odbc</code> driver into test images. This allows to test interaction of ClickHouse with ClickHouse via its own ODBC driver. <a href=https://github.com/ClickHouse/ClickHouse/pull/9348 rel="external nofollow noreferrer">#9348</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Fix several bugs in unit tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/9047 rel="external nofollow noreferrer">#9047</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Enable <code>-Wmissing-include-dirs</code> GCC warning to eliminate all non-existing includes - mostly as a result of CMake scripting errors <a href=https://github.com/ClickHouse/ClickHouse/pull/8704 rel="external nofollow noreferrer">#8704</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer">kreuzerkrieg</a>)</li> <li>Describe reasons if query profiler cannot work. This is intended for <a href=https://github.com/ClickHouse/ClickHouse/issues/9049 rel="external nofollow noreferrer">#9049</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9144 rel="external nofollow noreferrer">#9144</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Update OpenSSL to upstream master. Fixed the issue when TLS connections may fail with the message <code>OpenSSL SSL_read: error:14094438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error</code> and <code>SSL Exception: error:2400006E:random number generator::error retrieving entropy</code>. The issue was present in version 20.1. <a href=https://github.com/ClickHouse/ClickHouse/pull/8956 rel="external nofollow noreferrer">#8956</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Update Dockerfile for server <a href=https://github.com/ClickHouse/ClickHouse/pull/8893 rel="external nofollow noreferrer">#8893</a> (<a href=https://github.com/ne-ray rel="external nofollow noreferrer">Ilya Mazaev</a>)</li> <li>Minor fixes in build-gcc-from-sources script <a href=https://github.com/ClickHouse/ClickHouse/pull/8774 rel="external nofollow noreferrer">#8774</a> (<a href=https://github.com/mnach rel="external nofollow noreferrer">Michael Nacharov</a>)</li> <li>Replace <code>numbers</code> to <code>zeros</code> in perftests where <code>number</code> column is not used. This will lead to more clean test results. <a href=https://github.com/ClickHouse/ClickHouse/pull/9600 rel="external nofollow noreferrer">#9600</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fix stack overflow issue when using initializer_list in Column constructors. <a href=https://github.com/ClickHouse/ClickHouse/pull/9367 rel="external nofollow noreferrer">#9367</a> (<a href=https://github.com/ghost rel="external nofollow noreferrer">Deleted user</a>)</li> <li>Upgrade librdkafka to v1.3.0. Enable bundled <code>rdkafka</code> and <code>gsasl</code> libraries on Mac OS X. <a href=https://github.com/ClickHouse/ClickHouse/pull/9000 rel="external nofollow noreferrer">#9000</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer">Andrew Onyshchuk</a>)</li> <li>build fix on GCC 9.2.0 <a href=https://github.com/ClickHouse/ClickHouse/pull/9306 rel="external nofollow noreferrer">#9306</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer">vxider</a>)</li> </ul> <h2 id=clickhouse-release-v20-1>ClickHouse release v20.1<a class=headerlink href=#clickhouse-release-v20-1 title="Permanent link">&para;</a></h2> <h3 id=clickhouse-release-v20-1-8-41-2020-03-20>ClickHouse release v20.1.8.41, 2020-03-20<a class=headerlink href=#clickhouse-release-v20-1-8-41-2020-03-20 title="Permanent link">&para;</a></h3> <h4 id=bug-fix_3>Bug Fix<a class=headerlink href=#bug-fix_3 title="Permanent link">&para;</a></h4> <ul> <li>Fix possible permanent <code>Cannot schedule a task</code> error (due to unhandled exception in <code>ParallelAggregatingBlockInputStream::Handler::onFinish/onFinishThread</code>). This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6833 rel="external nofollow noreferrer">#6833</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9154 rel="external nofollow noreferrer">#9154</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Fix excessive memory consumption in <code>ALTER</code> queries (mutations). This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9533 rel="external nofollow noreferrer">#9533</a> and <a href=https://github.com/ClickHouse/ClickHouse/issues/9670 rel="external nofollow noreferrer">#9670</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9754 rel="external nofollow noreferrer">#9754</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix bug in backquoting in external dictionaries DDL. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9619 rel="external nofollow noreferrer">#9619</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9734 rel="external nofollow noreferrer">#9734</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> </ul> <h3 id=clickhouse-release-v20-1-7-38-2020-03-18>ClickHouse release v20.1.7.38, 2020-03-18<a class=headerlink href=#clickhouse-release-v20-1-7-38-2020-03-18 title="Permanent link">&para;</a></h3> <h4 id=bug-fix_4>Bug Fix<a class=headerlink href=#bug-fix_4 title="Permanent link">&para;</a></h4> <ul> <li>Fixed incorrect internal function names for <code>sumKahan</code> and <code>sumWithOverflow</code>. I lead to exception while using this functions in remote queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/9636 rel="external nofollow noreferrer">#9636</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>). This issue was in all ClickHouse releases.</li> <li>Allow <code>ALTER ON CLUSTER</code> of <code>Distributed</code> tables with internal replication. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/3268 rel="external nofollow noreferrer">#3268</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9617 rel="external nofollow noreferrer">#9617</a> (<a href=https://github.com/shinoi2 rel="external nofollow noreferrer">shinoi2</a>). This issue was in all ClickHouse releases.</li> <li>Fix possible exceptions <code>Size of filter doesn't match size of column</code> and <code>Invalid number of rows in Chunk</code> in <code>MergeTreeRangeReader</code>. They could appear while executing <code>PREWHERE</code> in some cases. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9132 rel="external nofollow noreferrer">#9132</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9612 rel="external nofollow noreferrer">#9612</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fixed the issue: timezone was not preserved if you write a simple arithmetic expression like <code>time + 1</code> (in contrast to an expression like <code>time + INTERVAL 1 SECOND</code>). This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5743 rel="external nofollow noreferrer">#5743</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9323 rel="external nofollow noreferrer">#9323</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>). This issue was in all ClickHouse releases.</li> <li>Now it's not possible to create or add columns with simple cyclic aliases like <code>a DEFAULT b, b DEFAULT a</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9603 rel="external nofollow noreferrer">#9603</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fixed the issue when padding at the end of base64 encoded value can be malformed. Update base64 library. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9491 rel="external nofollow noreferrer">#9491</a>, closes <a href=https://github.com/ClickHouse/ClickHouse/issues/9492 rel="external nofollow noreferrer">#9492</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9500 rel="external nofollow noreferrer">#9500</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix data race at destruction of <code>Poco::HTTPServer</code>. It could happen when server is started and immediately shut down. <a href=https://github.com/ClickHouse/ClickHouse/pull/9468 rel="external nofollow noreferrer">#9468</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fix possible crash/wrong number of rows in <code>LIMIT n WITH TIES</code> when there are a lot of rows equal to n'th row. <a href=https://github.com/ClickHouse/ClickHouse/pull/9464 rel="external nofollow noreferrer">#9464</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fix possible mismatched checksums with column TTLs. <a href=https://github.com/ClickHouse/ClickHouse/pull/9451 rel="external nofollow noreferrer">#9451</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Fix crash when a user tries to <code>ALTER MODIFY SETTING</code> for old-formated <code>MergeTree</code> table engines family. <a href=https://github.com/ClickHouse/ClickHouse/pull/9435 rel="external nofollow noreferrer">#9435</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Now we will try finalize mutations more frequently. <a href=https://github.com/ClickHouse/ClickHouse/pull/9427 rel="external nofollow noreferrer">#9427</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix replication protocol incompatibility introduced in <a href=https://github.com/ClickHouse/ClickHouse/issues/8598 rel="external nofollow noreferrer">#8598</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9412 rel="external nofollow noreferrer">#9412</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix not(has()) for the bloom_filter index of array types. <a href=https://github.com/ClickHouse/ClickHouse/pull/9407 rel="external nofollow noreferrer">#9407</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer">achimbab</a>)</li> <li>Fixed the behaviour of <code>match</code> and <code>extract</code> functions when haystack has zero bytes. The behaviour was wrong when haystack was constant. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9160 rel="external nofollow noreferrer">#9160</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9163 rel="external nofollow noreferrer">#9163</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/9345 rel="external nofollow noreferrer">#9345</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> </ul> <h4 id=build-testing-packaging-improvement_1>Build/Testing/Packaging Improvement<a class=headerlink href=#build-testing-packaging-improvement_1 title="Permanent link">&para;</a></h4> <ul> <li>Exception handling now works correctly on Windows Subsystem for Linux. See <a href=https://github.com/ClickHouse-Extras/libunwind/pull/3>https://github.com/ClickHouse-Extras/libunwind/pull/3</a> This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6480 rel="external nofollow noreferrer">#6480</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9564 rel="external nofollow noreferrer">#9564</a> (<a href=https://github.com/sobolevsv rel="external nofollow noreferrer">sobolevsv</a>)</li> </ul> <h3 id=clickhouse-release-v20-1-6-30-2020-03-05>ClickHouse release v20.1.6.30, 2020-03-05<a class=headerlink href=#clickhouse-release-v20-1-6-30-2020-03-05 title="Permanent link">&para;</a></h3> <h4 id=bug-fix_5>Bug Fix<a class=headerlink href=#bug-fix_5 title="Permanent link">&para;</a></h4> <ul> <li>Fix data incompatibility when compressed with <code>T64</code> codec.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9039 rel="external nofollow noreferrer">#9039</a> <a href=https://github.com/abyss7 rel="external nofollow noreferrer">(abyss7)</a></li> <li>Fix order of ranges while reading from MergeTree table in one thread. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8964 rel="external nofollow noreferrer">#8964</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9050 rel="external nofollow noreferrer">#9050</a> <a href=https://github.com/CurtizJ rel="external nofollow noreferrer">(CurtizJ)</a></li> <li>Fix possible segfault in <code>MergeTreeRangeReader</code>, while executing <code>PREWHERE</code>. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9064 rel="external nofollow noreferrer">#9064</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9106 rel="external nofollow noreferrer">#9106</a> <a href=https://github.com/CurtizJ rel="external nofollow noreferrer">(CurtizJ)</a></li> <li>Fix <code>reinterpretAsFixedString</code> to return <code>FixedString</code> instead of <code>String</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9052 rel="external nofollow noreferrer">#9052</a> <a href=https://github.com/oandrew rel="external nofollow noreferrer">(oandrew)</a></li> <li>Fix <code>joinGet</code> with nullable return types. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8919 rel="external nofollow noreferrer">#8919</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9014 rel="external nofollow noreferrer">#9014</a> <a href=https://github.com/amosbird rel="external nofollow noreferrer">(amosbird)</a></li> <li>Fix fuzz test and incorrect behaviour of bitTestAll/bitTestAny functions.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9143 rel="external nofollow noreferrer">#9143</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">(alexey-milovidov)</a></li> <li>Fix the behaviour of match and extract functions when haystack has zero bytes. The behaviour was wrong when haystack was constant. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9160 rel="external nofollow noreferrer">#9160</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9163 rel="external nofollow noreferrer">#9163</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">(alexey-milovidov)</a></li> <li>Fixed execution of inversed predicates when non-strictly monotinic functional index is used. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9034 rel="external nofollow noreferrer">#9034</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9223 rel="external nofollow noreferrer">#9223</a> <a href=https://github.com/Akazz rel="external nofollow noreferrer">(Akazz)</a></li> <li>Allow to rewrite <code>CROSS</code> to <code>INNER JOIN</code> if there's <code>[NOT] LIKE</code> operator in <code>WHERE</code> section. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9191 rel="external nofollow noreferrer">#9191</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9229 rel="external nofollow noreferrer">#9229</a> <a href=https://github.com/4ertus2 rel="external nofollow noreferrer">(4ertus2)</a></li> <li>Allow first column(s) in a table with Log engine be an alias.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9231 rel="external nofollow noreferrer">#9231</a> <a href=https://github.com/abyss7 rel="external nofollow noreferrer">(abyss7)</a></li> <li>Allow comma join with <code>IN()</code> inside. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7314 rel="external nofollow noreferrer">#7314</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9251 rel="external nofollow noreferrer">#9251</a> <a href=https://github.com/4ertus2 rel="external nofollow noreferrer">(4ertus2)</a></li> <li>Improve <code>ALTER MODIFY/ADD</code> queries logic. Now you cannot <code>ADD</code> column without type, <code>MODIFY</code> default expression doesn't change type of column and <code>MODIFY</code> type doesn't loose default expression value. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8669 rel="external nofollow noreferrer">#8669</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9227 rel="external nofollow noreferrer">#9227</a> <a href=https://github.com/alesapin rel="external nofollow noreferrer">(alesapin)</a></li> <li>Fix mutations finalization, when already done mutation can have status is_done=0.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9217 rel="external nofollow noreferrer">#9217</a> <a href=https://github.com/alesapin rel="external nofollow noreferrer">(alesapin)</a></li> <li>Support "Processors" pipeline for system.numbers and system.numbers_mt. This also fixes the bug when <code>max_execution_time</code> is not respected.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7796 rel="external nofollow noreferrer">#7796</a> <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">(KochetovNicolai)</a></li> <li>Fix wrong counting of <code>DictCacheKeysRequestedFound</code> metric.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9411 rel="external nofollow noreferrer">#9411</a> <a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">(nikitamikhaylov)</a></li> <li>Added a check for storage policy in <code>ATTACH PARTITION FROM</code>, <code>REPLACE PARTITION</code>, <code>MOVE TO TABLE</code> which otherwise could make data of part inaccessible after restart and prevent ClickHouse to start.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9383 rel="external nofollow noreferrer">#9383</a> <a href=https://github.com/excitoon rel="external nofollow noreferrer">(excitoon)</a></li> <li>Fixed UBSan report in <code>MergeTreeIndexSet</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9250 rel="external nofollow noreferrer">#9250</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9365 rel="external nofollow noreferrer">#9365</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">(alexey-milovidov)</a></li> <li>Fix possible datarace in BlockIO.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9356 rel="external nofollow noreferrer">#9356</a> <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">(KochetovNicolai)</a></li> <li>Support for <code>UInt64</code> numbers that don't fit in Int64 in JSON-related functions. Update <code>SIMDJSON</code> to master. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9209 rel="external nofollow noreferrer">#9209</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9344 rel="external nofollow noreferrer">#9344</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">(alexey-milovidov)</a></li> <li>Fix the issue when the amount of free space is not calculated correctly if the data directory is mounted to a separate device. For default disk calculate the free space from data subdirectory. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7441 rel="external nofollow noreferrer">#7441</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9257 rel="external nofollow noreferrer">#9257</a> <a href=https://github.com/millb rel="external nofollow noreferrer">(millb)</a></li> <li>Fix the issue when TLS connections may fail with the message <code>OpenSSL SSL_read: error:14094438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error and SSL Exception: error:2400006E:random number generator::error retrieving entropy.</code> Update OpenSSL to upstream master.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/8956 rel="external nofollow noreferrer">#8956</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">(alexey-milovidov)</a></li> <li>When executing <code>CREATE</code> query, fold constant expressions in storage engine arguments. Replace empty database name with current database. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6508 rel="external nofollow noreferrer">#6508</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3492 rel="external nofollow noreferrer">#3492</a>. Also fix check for local address in ClickHouseDictionarySource.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9262 rel="external nofollow noreferrer">#9262</a> <a href=https://github.com/tavplubix rel="external nofollow noreferrer">(tabplubix)</a></li> <li>Fix segfault in <code>StorageMerge</code>, which can happen when reading from StorageFile.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9387 rel="external nofollow noreferrer">#9387</a> <a href=https://github.com/tavplubix rel="external nofollow noreferrer">(tabplubix)</a></li> <li>Prevent losing data in <code>Kafka</code> in rare cases when exception happens after reading suffix but before commit. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9378 rel="external nofollow noreferrer">#9378</a>. Related: <a href=https://github.com/ClickHouse/ClickHouse/issues/7175 rel="external nofollow noreferrer">#7175</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9507 rel="external nofollow noreferrer">#9507</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer">(filimonov)</a></li> <li>Fix bug leading to server termination when trying to use / drop <code>Kafka</code> table created with wrong parameters. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9494 rel="external nofollow noreferrer">#9494</a>. Incorporates <a href=https://github.com/ClickHouse/ClickHouse/issues/9507 rel="external nofollow noreferrer">#9507</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9513 rel="external nofollow noreferrer">#9513</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer">(filimonov)</a></li> </ul> <h4 id=new-feature_1>New Feature<a class=headerlink href=#new-feature_1 title="Permanent link">&para;</a></h4> <ul> <li>Add <code>deduplicate_blocks_in_dependent_materialized_views</code> option to control the behaviour of idempotent inserts into tables with materialized views. This new feature was added to the bugfix release by a special request from Altinity. <br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9070 rel="external nofollow noreferrer">#9070</a> <a href=https://github.com/urykhy rel="external nofollow noreferrer">(urykhy)</a></li> </ul> <h3 id=clickhouse-release-v20-1-2-4-2020-01-22>ClickHouse release v20.1.2.4, 2020-01-22<a class=headerlink href=#clickhouse-release-v20-1-2-4-2020-01-22 title="Permanent link">&para;</a></h3> <h4 id=backward-incompatible-change_1>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change_1 title="Permanent link">&para;</a></h4> <ul> <li>Make the setting <code>merge_tree_uniform_read_distribution</code> obsolete. The server still recognizes this setting but it has no effect. <a href=https://github.com/ClickHouse/ClickHouse/pull/8308 rel="external nofollow noreferrer">#8308</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Changed return type of the function <code>greatCircleDistance</code> to <code>Float32</code> because now the result of calculation is <code>Float32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7993 rel="external nofollow noreferrer">#7993</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Now it's expected that query parameters are represented in "escaped" format. For example, to pass string <code>a&lt;tab&gt;b</code> you have to write <code>a\tb</code> or <code>a\&lt;tab&gt;b</code> and respectively, <code>a%5Ctb</code> or <code>a%5C%09b</code> in URL. This is needed to add the possibility to pass NULL as <code>\N</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7488 rel="external nofollow noreferrer">#7488</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8517 rel="external nofollow noreferrer">#8517</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Enable <code>use_minimalistic_part_header_in_zookeeper</code> setting for <code>ReplicatedMergeTree</code> by default. This will significantly reduce amount of data stored in ZooKeeper. This setting is supported since version 19.1 and we already use it in production in multiple services without any issues for more than half a year. Disable this setting if you have a chance to downgrade to versions older than 19.1. <a href=https://github.com/ClickHouse/ClickHouse/pull/6850 rel="external nofollow noreferrer">#6850</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Data skipping indices are production ready and enabled by default. The settings <code>allow_experimental_data_skipping_indices</code>, <code>allow_experimental_cross_to_join_conversion</code> and <code>allow_experimental_multiple_joins_emulation</code> are now obsolete and do nothing. <a href=https://github.com/ClickHouse/ClickHouse/pull/7974 rel="external nofollow noreferrer">#7974</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Add new <code>ANY JOIN</code> logic for <code>StorageJoin</code> consistent with <code>JOIN</code> operation. To upgrade without changes in behaviour you need add <code>SETTINGS any_join_distinct_right_table_keys = 1</code> to Engine Join tables metadata or recreate these tables after upgrade. <a href=https://github.com/ClickHouse/ClickHouse/pull/8400 rel="external nofollow noreferrer">#8400</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Require server to be restarted to apply the changes in logging configuration. This is a temporary workaround to avoid the bug where the server logs to a deleted log file (see <a href=https://github.com/ClickHouse/ClickHouse/issues/8696 rel="external nofollow noreferrer">#8696</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8707 rel="external nofollow noreferrer">#8707</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> </ul> <h4 id=new-feature_2>New Feature<a class=headerlink href=#new-feature_2 title="Permanent link">&para;</a></h4> <ul> <li>Added information about part paths to <code>system.merges</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8043 rel="external nofollow noreferrer">#8043</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Add ability to execute <code>SYSTEM RELOAD DICTIONARY</code> query in <code>ON CLUSTER</code> mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/8288 rel="external nofollow noreferrer">#8288</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Guillaume Tassery</a>)</li> <li>Add ability to execute <code>CREATE DICTIONARY</code> queries in <code>ON CLUSTER</code> mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/8163 rel="external nofollow noreferrer">#8163</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Now user's profile in <code>users.xml</code> can inherit multiple profiles. <a href=https://github.com/ClickHouse/ClickHouse/pull/8343 rel="external nofollow noreferrer">#8343</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer">Mikhail f. Shiryaev</a>)</li> <li>Added <code>system.stack_trace</code> table that allows to look at stack traces of all server threads. This is useful for developers to introspect server state. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7576 rel="external nofollow noreferrer">#7576</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8344 rel="external nofollow noreferrer">#8344</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Add <code>DateTime64</code> datatype with configurable sub-second precision. <a href=https://github.com/ClickHouse/ClickHouse/pull/7170 rel="external nofollow noreferrer">#7170</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li>Add table function <code>clusterAllReplicas</code> which allows to query all the nodes in the cluster. <a href=https://github.com/ClickHouse/ClickHouse/pull/8493 rel="external nofollow noreferrer">#8493</a> (<a href=https://github.com/kiransunkari rel="external nofollow noreferrer">kiran sunkari</a>)</li> <li>Add aggregate function <code>categoricalInformationValue</code> which calculates the information value of a discrete feature. <a href=https://github.com/ClickHouse/ClickHouse/pull/8117 rel="external nofollow noreferrer">#8117</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Speed up parsing of data files in <code>CSV</code>, <code>TSV</code> and <code>JSONEachRow</code> format by doing it in parallel. <a href=https://github.com/ClickHouse/ClickHouse/pull/7780 rel="external nofollow noreferrer">#7780</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Add function <code>bankerRound</code> which performs banker's rounding. <a href=https://github.com/ClickHouse/ClickHouse/pull/8112 rel="external nofollow noreferrer">#8112</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Support more languages in embedded dictionary for region names: 'ru', 'en', 'ua', 'uk', 'by', 'kz', 'tr', 'de', 'uz', 'lv', 'lt', 'et', 'pt', 'he', 'vi'. <a href=https://github.com/ClickHouse/ClickHouse/pull/8189 rel="external nofollow noreferrer">#8189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Improvements in consistency of <code>ANY JOIN</code> logic. Now <code>t1 ANY LEFT JOIN t2</code> equals <code>t2 ANY RIGHT JOIN t1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7665 rel="external nofollow noreferrer">#7665</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Add setting <code>any_join_distinct_right_table_keys</code> which enables old behaviour for <code>ANY INNER JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7665 rel="external nofollow noreferrer">#7665</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Add new <code>SEMI</code> and <code>ANTI JOIN</code>. Old <code>ANY INNER JOIN</code> behaviour now available as <code>SEMI LEFT JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7665 rel="external nofollow noreferrer">#7665</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Added <code>Distributed</code> format for <code>File</code> engine and <code>file</code> table function which allows to read from <code>.bin</code> files generated by asynchronous inserts into <code>Distributed</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8535 rel="external nofollow noreferrer">#8535</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Add optional reset column argument for <code>runningAccumulate</code> which allows to reset aggregation results for each new key value. <a href=https://github.com/ClickHouse/ClickHouse/pull/8326 rel="external nofollow noreferrer">#8326</a> (<a href=https://github.com/kononencheg rel="external nofollow noreferrer">Sergey Kononenko</a>)</li> <li>Add ability to use ClickHouse as Prometheus endpoint. <a href=https://github.com/ClickHouse/ClickHouse/pull/7900 rel="external nofollow noreferrer">#7900</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer">vdimir</a>)</li> <li>Add section <code>&lt;remote_url_allow_hosts&gt;</code> in <code>config.xml</code> which restricts allowed hosts for remote table engines and table functions <code>URL</code>, <code>S3</code>, <code>HDFS</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7154 rel="external nofollow noreferrer">#7154</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Added function <code>greatCircleAngle</code> which calculates the distance on a sphere in degrees. <a href=https://github.com/ClickHouse/ClickHouse/pull/8105 rel="external nofollow noreferrer">#8105</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Changed Earth radius to be consistent with H3 library. <a href=https://github.com/ClickHouse/ClickHouse/pull/8105 rel="external nofollow noreferrer">#8105</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Added <code>JSONCompactEachRow</code> and <code>JSONCompactEachRowWithNamesAndTypes</code> formats for input and output. <a href=https://github.com/ClickHouse/ClickHouse/pull/7841 rel="external nofollow noreferrer">#7841</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Added feature for file-related table engines and table functions (<code>File</code>, <code>S3</code>, <code>URL</code>, <code>HDFS</code>) which allows to read and write <code>gzip</code> files based on additional engine parameter or file extension. <a href=https://github.com/ClickHouse/ClickHouse/pull/7840 rel="external nofollow noreferrer">#7840</a> (<a href=https://github.com/apbodrov rel="external nofollow noreferrer">Andrey Bodrov</a>)</li> <li>Added the <code>randomASCII(length)</code> function, generating a string with a random set of <a href=https://en.wikipedia.org/wiki/ASCII#Printable_characters rel="external nofollow noreferrer">ASCII</a> printable characters. <a href=https://github.com/ClickHouse/ClickHouse/pull/8401 rel="external nofollow noreferrer">#8401</a> (<a href=https://github.com/BayoNet rel="external nofollow noreferrer">BayoNet</a>)</li> <li>Added function <code>JSONExtractArrayRaw</code> which returns an array on unparsed json array elements from <code>JSON</code> string. <a href=https://github.com/ClickHouse/ClickHouse/pull/8081 rel="external nofollow noreferrer">#8081</a> (<a href=https://github.com/errx rel="external nofollow noreferrer">Oleg Matrokhin</a>)</li> <li>Add <code>arrayZip</code> function which allows to combine multiple arrays of equal lengths into one array of tuples. <a href=https://github.com/ClickHouse/ClickHouse/pull/8149 rel="external nofollow noreferrer">#8149</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Winter Zhang</a>)</li> <li>Add ability to move data between disks according to configured <code>TTL</code>-expressions for <code>*MergeTree</code> table engines family. <a href=https://github.com/ClickHouse/ClickHouse/pull/8140 rel="external nofollow noreferrer">#8140</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Added new aggregate function <code>avgWeighted</code> which allows to calculate weighted average. <a href=https://github.com/ClickHouse/ClickHouse/pull/7898 rel="external nofollow noreferrer">#7898</a> (<a href=https://github.com/apbodrov rel="external nofollow noreferrer">Andrey Bodrov</a>)</li> <li>Now parallel parsing is enabled by default for <code>TSV</code>, <code>TSKV</code>, <code>CSV</code> and <code>JSONEachRow</code> formats. <a href=https://github.com/ClickHouse/ClickHouse/pull/7894 rel="external nofollow noreferrer">#7894</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Add several geo functions from <code>H3</code> library: <code>h3GetResolution</code>, <code>h3EdgeAngle</code>, <code>h3EdgeLength</code>, <code>h3IsValid</code> and <code>h3kRing</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8034 rel="external nofollow noreferrer">#8034</a> (<a href=https://github.com/hombit rel="external nofollow noreferrer">Konstantin Malanchev</a>)</li> <li>Added support for brotli (<code>br</code>) compression in file-related storages and table functions. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8156 rel="external nofollow noreferrer">#8156</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8526 rel="external nofollow noreferrer">#8526</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Add <code>groupBit*</code> functions for the <code>SimpleAggregationFunction</code> type. <a href=https://github.com/ClickHouse/ClickHouse/pull/8485 rel="external nofollow noreferrer">#8485</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer">Guillaume Tassery</a>)</li> </ul> <h4 id=bug-fix_6>Bug Fix<a class=headerlink href=#bug-fix_6 title="Permanent link">&para;</a></h4> <ul> <li>Fix rename of tables with <code>Distributed</code> engine. Fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/7868 rel="external nofollow noreferrer">#7868</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8306 rel="external nofollow noreferrer">#8306</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Now dictionaries support <code>EXPRESSION</code> for attributes in arbitrary string in non-ClickHouse SQL dialect. <a href=https://github.com/ClickHouse/ClickHouse/pull/8098 rel="external nofollow noreferrer">#8098</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix broken <code>INSERT SELECT FROM mysql(...)</code> query. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8070 rel="external nofollow noreferrer">#8070</a> and <a href=https://github.com/ClickHouse/ClickHouse/issues/7960 rel="external nofollow noreferrer">#7960</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8234 rel="external nofollow noreferrer">#8234</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fix error "Mismatch column sizes" when inserting default <code>Tuple</code> from <code>JSONEachRow</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5653 rel="external nofollow noreferrer">#5653</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8606 rel="external nofollow noreferrer">#8606</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Now an exception will be thrown in case of using <code>WITH TIES</code> alongside <code>LIMIT BY</code>. Also add ability to use <code>TOP</code> with <code>LIMIT BY</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7472 rel="external nofollow noreferrer">#7472</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7637 rel="external nofollow noreferrer">#7637</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Fix unintendent dependency from fresh glibc version in <code>clickhouse-odbc-bridge</code> binary. <a href=https://github.com/ClickHouse/ClickHouse/pull/8046 rel="external nofollow noreferrer">#8046</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Fix bug in check function of <code>*MergeTree</code> engines family. Now it doesn't fail in case when we have equal amount of rows in last granule and last mark (non-final). <a href=https://github.com/ClickHouse/ClickHouse/pull/8047 rel="external nofollow noreferrer">#8047</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix insert into <code>Enum*</code> columns after <code>ALTER</code> query, when underlying numeric type is equal to table specified type. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7836 rel="external nofollow noreferrer">#7836</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7908 rel="external nofollow noreferrer">#7908</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Allowed non-constant negative "size" argument for function <code>substring</code>. It was not allowed by mistake. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/4832 rel="external nofollow noreferrer">#4832</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7703 rel="external nofollow noreferrer">#7703</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix parsing bug when wrong number of arguments passed to <code>(O|J)DBC</code> table engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/7709 rel="external nofollow noreferrer">#7709</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Using command name of the running clickhouse process when sending logs to syslog. In previous versions, empty string was used instead of command name. <a href=https://github.com/ClickHouse/ClickHouse/pull/8460 rel="external nofollow noreferrer">#8460</a> (<a href=https://github.com/mnach rel="external nofollow noreferrer">Michael Nacharov</a>)</li> <li>Fix check of allowed hosts for <code>localhost</code>. This PR fixes the solution provided in <a href=https://github.com/ClickHouse/ClickHouse/pull/8241 rel="external nofollow noreferrer">#8241</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8342 rel="external nofollow noreferrer">#8342</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Fix rare crash in <code>argMin</code> and <code>argMax</code> functions for long string arguments, when result is used in <code>runningAccumulate</code> function. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8325 rel="external nofollow noreferrer">#8325</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8341 rel="external nofollow noreferrer">#8341</a> (<a href=https://github.com/769344359 rel="external nofollow noreferrer">dinosaur</a>)</li> <li>Fix memory overcommit for tables with <code>Buffer</code> engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/8345 rel="external nofollow noreferrer">#8345</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Fixed potential bug in functions that can take <code>NULL</code> as one of the arguments and return non-NULL. <a href=https://github.com/ClickHouse/ClickHouse/pull/8196 rel="external nofollow noreferrer">#8196</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Better metrics calculations in thread pool for background processes for <code>MergeTree</code> table engines. <a href=https://github.com/ClickHouse/ClickHouse/pull/8194 rel="external nofollow noreferrer">#8194</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix function <code>IN</code> inside <code>WHERE</code> statement when row-level table filter is present. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6687 rel="external nofollow noreferrer">#6687</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8357 rel="external nofollow noreferrer">#8357</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Now an exception is thrown if the integral value is not parsed completely for settings values. <a href=https://github.com/ClickHouse/ClickHouse/pull/7678 rel="external nofollow noreferrer">#7678</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Fix exception when aggregate function is used in query to distributed table with more than two local shards. <a href=https://github.com/ClickHouse/ClickHouse/pull/8164 rel="external nofollow noreferrer">#8164</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer">小路</a>)</li> <li>Now bloom filter can handle zero length arrays and doesn't perform redundant calculations. <a href=https://github.com/ClickHouse/ClickHouse/pull/8242 rel="external nofollow noreferrer">#8242</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer">achimbab</a>)</li> <li>Fixed checking if a client host is allowed by matching the client host to <code>host_regexp</code> specified in <code>users.xml</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8241 rel="external nofollow noreferrer">#8241</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Relax ambiguous column check that leads to false positives in multiple <code>JOIN ON</code> section. <a href=https://github.com/ClickHouse/ClickHouse/pull/8385 rel="external nofollow noreferrer">#8385</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Fixed possible server crash (<code>std::terminate</code>) when the server cannot send or write data in <code>JSON</code> or <code>XML</code> format with values of <code>String</code> data type (that require <code>UTF-8</code> validation) or when compressing result data with Brotli algorithm or in some other rare cases. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7603 rel="external nofollow noreferrer">#7603</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8384 rel="external nofollow noreferrer">#8384</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix race condition in <code>StorageDistributedDirectoryMonitor</code> found by CI. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8364 rel="external nofollow noreferrer">#8364</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8383 rel="external nofollow noreferrer">#8383</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Now background merges in <code>*MergeTree</code> table engines family preserve storage policy volume order more accurately. <a href=https://github.com/ClickHouse/ClickHouse/pull/8549 rel="external nofollow noreferrer">#8549</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Now table engine <code>Kafka</code> works properly with <code>Native</code> format. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6731 rel="external nofollow noreferrer">#6731</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/7337 rel="external nofollow noreferrer">#7337</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/8003 rel="external nofollow noreferrer">#8003</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8016 rel="external nofollow noreferrer">#8016</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Fixed formats with headers (like <code>CSVWithNames</code>) which were throwing exception about EOF for table engine <code>Kafka</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8016 rel="external nofollow noreferrer">#8016</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Fixed a bug with making set from subquery in right part of <code>IN</code> section. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5767 rel="external nofollow noreferrer">#5767</a> and <a href=https://github.com/ClickHouse/ClickHouse/issues/2542 rel="external nofollow noreferrer">#2542</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7755 rel="external nofollow noreferrer">#7755</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Fix possible crash while reading from storage <code>File</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7756 rel="external nofollow noreferrer">#7756</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fixed reading of the files in <code>Parquet</code> format containing columns of type <code>list</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8334 rel="external nofollow noreferrer">#8334</a> (<a href=https://github.com/maxulan rel="external nofollow noreferrer">maxulan</a>)</li> <li>Fix error <code>Not found column</code> for distributed queries with <code>PREWHERE</code> condition dependent on sampling key if <code>max_parallel_replicas &gt; 1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7913 rel="external nofollow noreferrer">#7913</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fix error <code>Not found column</code> if query used <code>PREWHERE</code> dependent on table's alias and the result set was empty because of primary key condition. <a href=https://github.com/ClickHouse/ClickHouse/pull/7911 rel="external nofollow noreferrer">#7911</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fixed return type for functions <code>rand</code> and <code>randConstant</code> in case of <code>Nullable</code> argument. Now functions always return <code>UInt32</code> and never <code>Nullable(UInt32)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8204 rel="external nofollow noreferrer">#8204</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Disabled predicate push-down for <code>WITH FILL</code> expression. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7784 rel="external nofollow noreferrer">#7784</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7789 rel="external nofollow noreferrer">#7789</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Winter Zhang</a>)</li> <li>Fixed incorrect <code>count()</code> result for <code>SummingMergeTree</code> when <code>FINAL</code> section is used. <a href=https://github.com/ClickHouse/ClickHouse/issues/3280 rel="external nofollow noreferrer">#3280</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7786 rel="external nofollow noreferrer">#7786</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Fix possible incorrect result for constant functions from remote servers. It happened for queries with functions like <code>version()</code>, <code>uptime()</code>, etc. which returns different constant values for different servers. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7666 rel="external nofollow noreferrer">#7666</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7689 rel="external nofollow noreferrer">#7689</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fix complicated bug in push-down predicate optimization which leads to wrong results. This fixes a lot of issues on push-down predicate optimization. <a href=https://github.com/ClickHouse/ClickHouse/pull/8503 rel="external nofollow noreferrer">#8503</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Winter Zhang</a>)</li> <li>Fix crash in <code>CREATE TABLE .. AS dictionary</code> query. <a href=https://github.com/ClickHouse/ClickHouse/pull/8508 rel="external nofollow noreferrer">#8508</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Several improvements ClickHouse grammar in <code>.g4</code> file. <a href=https://github.com/ClickHouse/ClickHouse/pull/8294 rel="external nofollow noreferrer">#8294</a> (<a href=https://github.com/taiyang-li rel="external nofollow noreferrer">taiyang-li</a>)</li> <li>Fix bug that leads to crashes in <code>JOIN</code>s with tables with engine <code>Join</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7556 rel="external nofollow noreferrer">#7556</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/8254 rel="external nofollow noreferrer">#8254</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/7915 rel="external nofollow noreferrer">#7915</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/8100 rel="external nofollow noreferrer">#8100</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8298 rel="external nofollow noreferrer">#8298</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Fix redundant dictionaries reload on <code>CREATE DATABASE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7916 rel="external nofollow noreferrer">#7916</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Limit maximum number of streams for read from <code>StorageFile</code> and <code>StorageHDFS</code>. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7650>https://github.com/ClickHouse/ClickHouse/issues/7650</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7981 rel="external nofollow noreferrer">#7981</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix bug in <code>ALTER ... MODIFY ... CODEC</code> query, when user specify both default expression and codec. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8593 rel="external nofollow noreferrer">8593</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8614 rel="external nofollow noreferrer">#8614</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix error in background merge of columns with <code>SimpleAggregateFunction(LowCardinality)</code> type. <a href=https://github.com/ClickHouse/ClickHouse/pull/8613 rel="external nofollow noreferrer">#8613</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fixed type check in function <code>toDateTime64</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8375 rel="external nofollow noreferrer">#8375</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li>Now server do not crash on <code>LEFT</code> or <code>FULL JOIN</code> with and Join engine and unsupported <code>join_use_nulls</code> settings. <a href=https://github.com/ClickHouse/ClickHouse/pull/8479 rel="external nofollow noreferrer">#8479</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Now <code>DROP DICTIONARY IF EXISTS db.dict</code> query doesn't throw exception if <code>db</code> doesn't exist. <a href=https://github.com/ClickHouse/ClickHouse/pull/8185 rel="external nofollow noreferrer">#8185</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Fix possible crashes in table functions (<code>file</code>, <code>mysql</code>, <code>remote</code>) caused by usage of reference to removed <code>IStorage</code> object. Fix incorrect parsing of columns specified at insertion into table function. <a href=https://github.com/ClickHouse/ClickHouse/pull/7762 rel="external nofollow noreferrer">#7762</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Ensure network be up before starting <code>clickhouse-server</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7507 rel="external nofollow noreferrer">#7507</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8570 rel="external nofollow noreferrer">#8570</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Yu</a>)</li> <li>Fix timeouts handling for secure connections, so queries doesn't hang indefenitely. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8126 rel="external nofollow noreferrer">#8126</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8128 rel="external nofollow noreferrer">#8128</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix <code>clickhouse-copier</code>'s redundant contention between concurrent workers. <a href=https://github.com/ClickHouse/ClickHouse/pull/7816 rel="external nofollow noreferrer">#7816</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer">Ding Xiang Fei</a>)</li> <li>Now mutations doesn't skip attached parts, even if their mutation version were larger than current mutation version. <a href=https://github.com/ClickHouse/ClickHouse/pull/7812 rel="external nofollow noreferrer">#7812</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer">Zhichang Yu</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8250 rel="external nofollow noreferrer">#8250</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Ignore redundant copies of <code>*MergeTree</code> data parts after move to another disk and server restart. <a href=https://github.com/ClickHouse/ClickHouse/pull/7810 rel="external nofollow noreferrer">#7810</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix crash in <code>FULL JOIN</code> with <code>LowCardinality</code> in <code>JOIN</code> key. <a href=https://github.com/ClickHouse/ClickHouse/pull/8252 rel="external nofollow noreferrer">#8252</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Forbidden to use column name more than once in insert query like <code>INSERT INTO tbl (x, y, x)</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5465 rel="external nofollow noreferrer">#5465</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/7681 rel="external nofollow noreferrer">#7681</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7685 rel="external nofollow noreferrer">#7685</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Added fallback for detection the number of physical CPU cores for unknown CPUs (using the number of logical CPU cores). This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5239 rel="external nofollow noreferrer">#5239</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7726 rel="external nofollow noreferrer">#7726</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix <code>There's no column</code> error for materialized and alias columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/8210 rel="external nofollow noreferrer">#8210</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Fixed sever crash when <code>EXISTS</code> query was used without <code>TABLE</code> or <code>DICTIONARY</code> qualifier. Just like <code>EXISTS t</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8172 rel="external nofollow noreferrer">#8172</a>. This bug was introduced in version 19.17. <a href=https://github.com/ClickHouse/ClickHouse/pull/8213 rel="external nofollow noreferrer">#8213</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix rare bug with error <code>"Sizes of columns doesn't match"</code> that might appear when using <code>SimpleAggregateFunction</code> column. <a href=https://github.com/ClickHouse/ClickHouse/pull/7790 rel="external nofollow noreferrer">#7790</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer">Boris Granveaud</a>)</li> <li>Fix bug where user with empty <code>allow_databases</code> got access to all databases (and same for <code>allow_dictionaries</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/7793 rel="external nofollow noreferrer">#7793</a> (<a href=https://github.com/DeifyTheGod rel="external nofollow noreferrer">DeifyTheGod</a>)</li> <li>Fix client crash when server already disconnected from client. <a href=https://github.com/ClickHouse/ClickHouse/pull/8071 rel="external nofollow noreferrer">#8071</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Fix <code>ORDER BY</code> behaviour in case of sorting by primary key prefix and non primary key suffix. <a href=https://github.com/ClickHouse/ClickHouse/pull/7759 rel="external nofollow noreferrer">#7759</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Check if qualified column present in the table. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6836 rel="external nofollow noreferrer">#6836</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7758 rel="external nofollow noreferrer">#7758</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Fixed behavior with <code>ALTER MOVE</code> ran immediately after merge finish moves superpart of specified. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8103 rel="external nofollow noreferrer">#8103</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8104 rel="external nofollow noreferrer">#8104</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix possible server crash while using <code>UNION</code> with different number of columns. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7279 rel="external nofollow noreferrer">#7279</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7929 rel="external nofollow noreferrer">#7929</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fix size of result substring for function <code>substr</code> with negative size. <a href=https://github.com/ClickHouse/ClickHouse/pull/8589 rel="external nofollow noreferrer">#8589</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Now server does not execute part mutation in <code>MergeTree</code> if there are not enough free threads in background pool. <a href=https://github.com/ClickHouse/ClickHouse/pull/8588 rel="external nofollow noreferrer">#8588</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fix a minor typo on formatting <code>UNION ALL</code> AST. <a href=https://github.com/ClickHouse/ClickHouse/pull/7999 rel="external nofollow noreferrer">#7999</a> (<a href=https://github.com/litao91 rel="external nofollow noreferrer">litao91</a>)</li> <li>Fixed incorrect bloom filter results for negative numbers. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8317 rel="external nofollow noreferrer">#8317</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8566 rel="external nofollow noreferrer">#8566</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Winter Zhang</a>)</li> <li>Fixed potential buffer overflow in decompress. Malicious user can pass fabricated compressed data that will cause read after buffer. This issue was found by Eldar Zaitov from Yandex information security team. <a href=https://github.com/ClickHouse/ClickHouse/pull/8404 rel="external nofollow noreferrer">#8404</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix incorrect result because of integers overflow in <code>arrayIntersect</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7777 rel="external nofollow noreferrer">#7777</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Now <code>OPTIMIZE TABLE</code> query will not wait for offline replicas to perform the operation. <a href=https://github.com/ClickHouse/ClickHouse/pull/8314 rel="external nofollow noreferrer">#8314</a> (<a href=https://github.com/javisantana rel="external nofollow noreferrer">javi santana</a>)</li> <li>Fixed <code>ALTER TTL</code> parser for <code>Replicated*MergeTree</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/8318 rel="external nofollow noreferrer">#8318</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix communication between server and client, so server read temporary tables info after query failure. <a href=https://github.com/ClickHouse/ClickHouse/pull/8084 rel="external nofollow noreferrer">#8084</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Fix <code>bitmapAnd</code> function error when intersecting an aggregated bitmap and a scalar bitmap. <a href=https://github.com/ClickHouse/ClickHouse/pull/8082 rel="external nofollow noreferrer">#8082</a> (<a href=https://github.com/moon03432 rel="external nofollow noreferrer">Yue Huang</a>)</li> <li>Refine the definition of <code>ZXid</code> according to the ZooKeeper Programmer's Guide which fixes bug in <code>clickhouse-cluster-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8088 rel="external nofollow noreferrer">#8088</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer">Ding Xiang Fei</a>)</li> <li><code>odbc</code> table function now respects <code>external_table_functions_use_nulls</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/7506 rel="external nofollow noreferrer">#7506</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li>Fixed bug that lead to a rare data race. <a href=https://github.com/ClickHouse/ClickHouse/pull/8143 rel="external nofollow noreferrer">#8143</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Alexander Kazakov</a>)</li> <li>Now <code>SYSTEM RELOAD DICTIONARY</code> reloads a dictionary completely, ignoring <code>update_field</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7440 rel="external nofollow noreferrer">#7440</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8037 rel="external nofollow noreferrer">#8037</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Add ability to check if dictionary exists in create query. <a href=https://github.com/ClickHouse/ClickHouse/pull/8032 rel="external nofollow noreferrer">#8032</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix <code>Float*</code> parsing in <code>Values</code> format. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7817 rel="external nofollow noreferrer">#7817</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7870 rel="external nofollow noreferrer">#7870</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fix crash when we cannot reserve space in some background operations of <code>*MergeTree</code> table engines family. <a href=https://github.com/ClickHouse/ClickHouse/pull/7873 rel="external nofollow noreferrer">#7873</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix crash of merge operation when table contains <code>SimpleAggregateFunction(LowCardinality)</code> column. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8515 rel="external nofollow noreferrer">#8515</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8522 rel="external nofollow noreferrer">#8522</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Restore support of all ICU locales and add the ability to apply collations for constant expressions. Also add language name to <code>system.collations</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8051 rel="external nofollow noreferrer">#8051</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix bug when external dictionaries with zero minimal lifetime (<code>LIFETIME(MIN 0 MAX N)</code>, <code>LIFETIME(N)</code>) don't update in background. <a href=https://github.com/ClickHouse/ClickHouse/pull/7983 rel="external nofollow noreferrer">#7983</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix crash when external dictionary with ClickHouse source has subquery in query. <a href=https://github.com/ClickHouse/ClickHouse/pull/8351 rel="external nofollow noreferrer">#8351</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Fix incorrect parsing of file extension in table with engine <code>URL</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8157 rel="external nofollow noreferrer">#8157</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8419 rel="external nofollow noreferrer">#8419</a> (<a href=https://github.com/apbodrov rel="external nofollow noreferrer">Andrey Bodrov</a>)</li> <li>Fix <code>CHECK TABLE</code> query for <code>*MergeTree</code> tables without key. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7543 rel="external nofollow noreferrer">#7543</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7979 rel="external nofollow noreferrer">#7979</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fixed conversion of <code>Float64</code> to MySQL type. <a href=https://github.com/ClickHouse/ClickHouse/pull/8079 rel="external nofollow noreferrer">#8079</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Yuriy Baranov</a>)</li> <li>Now if table was not completely dropped because of server crash, server will try to restore and load it. <a href=https://github.com/ClickHouse/ClickHouse/pull/8176 rel="external nofollow noreferrer">#8176</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> <li>Fixed crash in table function <code>file</code> while inserting into file that doesn't exist. Now in this case file would be created and then insert would be processed. <a href=https://github.com/ClickHouse/ClickHouse/pull/8177 rel="external nofollow noreferrer">#8177</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Olga Khvostikova</a>)</li> <li>Fix rare deadlock which can happen when <code>trace_log</code> is in enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/7838 rel="external nofollow noreferrer">#7838</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Add ability to work with different types besides <code>Date</code> in <code>RangeHashed</code> external dictionary created from DDL query. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7899 rel="external nofollow noreferrer">7899</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8275 rel="external nofollow noreferrer">#8275</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fixes crash when <code>now64()</code> is called with result of another function. <a href=https://github.com/ClickHouse/ClickHouse/pull/8270 rel="external nofollow noreferrer">#8270</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li>Fixed bug with detecting client IP for connections through mysql wire protocol. <a href=https://github.com/ClickHouse/ClickHouse/pull/7743 rel="external nofollow noreferrer">#7743</a> (<a href=https://github.com/dmitriy-myz rel="external nofollow noreferrer">Dmitry Muzyka</a>)</li> <li>Fix empty array handling in <code>arraySplit</code> function. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7708 rel="external nofollow noreferrer">#7708</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7747 rel="external nofollow noreferrer">#7747</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Fixed the issue when <code>pid-file</code> of another running <code>clickhouse-server</code> may be deleted. <a href=https://github.com/ClickHouse/ClickHouse/pull/8487 rel="external nofollow noreferrer">#8487</a> (<a href=https://github.com/weiqxu rel="external nofollow noreferrer">Weiqing Xu</a>)</li> <li>Fix dictionary reload if it has <code>invalidate_query</code>, which stopped updates and some exception on previous update tries. <a href=https://github.com/ClickHouse/ClickHouse/pull/8029 rel="external nofollow noreferrer">#8029</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fixed error in function <code>arrayReduce</code> that may lead to "double free" and error in aggregate function combinator <code>Resample</code> that may lead to memory leak. Added aggregate function <code>aggThrow</code>. This function can be used for testing purposes. <a href=https://github.com/ClickHouse/ClickHouse/pull/8446 rel="external nofollow noreferrer">#8446</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> </ul> <h4 id=improvement_1>Improvement<a class=headerlink href=#improvement_1 title="Permanent link">&para;</a></h4> <ul> <li>Improved logging when working with <code>S3</code> table engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/8251 rel="external nofollow noreferrer">#8251</a> (<a href=https://github.com/GrigoryPervakov rel="external nofollow noreferrer">Grigory Pervakov</a>)</li> <li>Printed help message when no arguments are passed when calling <code>clickhouse-local</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5335 rel="external nofollow noreferrer">#5335</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8230 rel="external nofollow noreferrer">#8230</a> (<a href=https://github.com/Melancholic rel="external nofollow noreferrer">Andrey Nagorny</a>)</li> <li>Add setting <code>mutations_sync</code> which allows to wait <code>ALTER UPDATE/DELETE</code> queries synchronously. <a href=https://github.com/ClickHouse/ClickHouse/pull/8237 rel="external nofollow noreferrer">#8237</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Allow to set up relative <code>user_files_path</code> in <code>config.xml</code> (in the way similar to <code>format_schema_path</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/7632 rel="external nofollow noreferrer">#7632</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Add exception for illegal types for conversion functions with <code>-OrZero</code> postfix. <a href=https://github.com/ClickHouse/ClickHouse/pull/7880 rel="external nofollow noreferrer">#7880</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer">Andrey Konyaev</a>)</li> <li>Simplify format of the header of data sending to a shard in a distributed query. <a href=https://github.com/ClickHouse/ClickHouse/pull/8044 rel="external nofollow noreferrer">#8044</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li><code>Live View</code> table engine refactoring. <a href=https://github.com/ClickHouse/ClickHouse/pull/8519 rel="external nofollow noreferrer">#8519</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer">vzakaznikov</a>)</li> <li>Add additional checks for external dictionaries created from DDL-queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/8127 rel="external nofollow noreferrer">#8127</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Fix error <code>Column ... already exists</code> while using <code>FINAL</code> and <code>SAMPLE</code> together, e.g. <code>select count() from table final sample 1/2</code>. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5186 rel="external nofollow noreferrer">#5186</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7907 rel="external nofollow noreferrer">#7907</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Now table the first argument of <code>joinGet</code> function can be table indentifier. <a href=https://github.com/ClickHouse/ClickHouse/pull/7707 rel="external nofollow noreferrer">#7707</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Allow using <code>MaterializedView</code> with subqueries above <code>Kafka</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/8197 rel="external nofollow noreferrer">#8197</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Now background moves between disks run it the seprate thread pool. <a href=https://github.com/ClickHouse/ClickHouse/pull/7670 rel="external nofollow noreferrer">#7670</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li><code>SYSTEM RELOAD DICTIONARY</code> now executes synchronously. <a href=https://github.com/ClickHouse/ClickHouse/pull/8240 rel="external nofollow noreferrer">#8240</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Stack traces now display physical addresses (offsets in object file) instead of virtual memory addresses (where the object file was loaded). That allows the use of <code>addr2line</code> when binary is position independent and ASLR is active. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8360 rel="external nofollow noreferrer">#8360</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8387 rel="external nofollow noreferrer">#8387</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Support new syntax for row-level security filters: <code>&lt;table name='table_name'&gt;…&lt;/table&gt;</code>. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5779 rel="external nofollow noreferrer">#5779</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8381 rel="external nofollow noreferrer">#8381</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Now <code>cityHash</code> function can work with <code>Decimal</code> and <code>UUID</code> types. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5184 rel="external nofollow noreferrer">#5184</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7693 rel="external nofollow noreferrer">#7693</a> (<a href=https://github.com/millb rel="external nofollow noreferrer">Mikhail Korotov</a>)</li> <li>Removed fixed index granularity (it was 1024) from system logs because it's obsolete after implementation of adaptive granularity. <a href=https://github.com/ClickHouse/ClickHouse/pull/7698 rel="external nofollow noreferrer">#7698</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Enabled MySQL compatibility server when ClickHouse is compiled without SSL. <a href=https://github.com/ClickHouse/ClickHouse/pull/7852 rel="external nofollow noreferrer">#7852</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Yuriy Baranov</a>)</li> <li>Now server checksums distributed batches, which gives more verbose errors in case of corrupted data in batch. <a href=https://github.com/ClickHouse/ClickHouse/pull/7914 rel="external nofollow noreferrer">#7914</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Support <code>DROP DATABASE</code>, <code>DETACH TABLE</code>, <code>DROP TABLE</code> and <code>ATTACH TABLE</code> for <code>MySQL</code> database engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/8202 rel="external nofollow noreferrer">#8202</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer">Winter Zhang</a>)</li> <li>Add authentication in S3 table function and table engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/7623 rel="external nofollow noreferrer">#7623</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Added check for extra parts of <code>MergeTree</code> at different disks, in order to not allow to miss data parts at undefined disks. <a href=https://github.com/ClickHouse/ClickHouse/pull/8118 rel="external nofollow noreferrer">#8118</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Enable SSL support for Mac client and server. <a href=https://github.com/ClickHouse/ClickHouse/pull/8297 rel="external nofollow noreferrer">#8297</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Now ClickHouse can work as MySQL federated server (see <a href=https://dev.mysql.com/doc/refman/5.7/en/federated-create-server.html>https://dev.mysql.com/doc/refman/5.7/en/federated-create-server.html</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/7717 rel="external nofollow noreferrer">#7717</a> (<a href=https://github.com/MaxFedotov rel="external nofollow noreferrer">Maxim Fedotov</a>)</li> <li><code>clickhouse-client</code> now only enable <code>bracketed-paste</code> when multiquery is on and multiline is off. This fixes (#7757)[<a href=https://github.com/ClickHouse/ClickHouse/issues/7757>https://github.com/ClickHouse/ClickHouse/issues/7757</a>]. <a href=https://github.com/ClickHouse/ClickHouse/pull/7761 rel="external nofollow noreferrer">#7761</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Support <code>Array(Decimal)</code> in <code>if</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/7721 rel="external nofollow noreferrer">#7721</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Support Decimals in <code>arrayDifference</code>, <code>arrayCumSum</code> and <code>arrayCumSumNegative</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/7724 rel="external nofollow noreferrer">#7724</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Added <code>lifetime</code> column to <code>system.dictionaries</code> table. <a href=https://github.com/ClickHouse/ClickHouse/issues/6820 rel="external nofollow noreferrer">#6820</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7727 rel="external nofollow noreferrer">#7727</a> (<a href=https://github.com/kekekekule rel="external nofollow noreferrer">kekekekule</a>)</li> <li>Improved check for existing parts on different disks for <code>*MergeTree</code> table engines. Addresses <a href=https://github.com/ClickHouse/ClickHouse/issues/7660 rel="external nofollow noreferrer">#7660</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8440 rel="external nofollow noreferrer">#8440</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Integration with <code>AWS SDK</code> for <code>S3</code> interactions which allows to use all S3 features out of the box. <a href=https://github.com/ClickHouse/ClickHouse/pull/8011 rel="external nofollow noreferrer">#8011</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer">Pavel Kovalenko</a>)</li> <li>Added support for subqueries in <code>Live View</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/7792 rel="external nofollow noreferrer">#7792</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer">vzakaznikov</a>)</li> <li>Check for using <code>Date</code> or <code>DateTime</code> column from <code>TTL</code> expressions was removed. <a href=https://github.com/ClickHouse/ClickHouse/pull/7920 rel="external nofollow noreferrer">#7920</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Information about disk was added to <code>system.detached_parts</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/7833 rel="external nofollow noreferrer">#7833</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Now settings <code>max_(table|partition)_size_to_drop</code> can be changed without a restart. <a href=https://github.com/ClickHouse/ClickHouse/pull/7779 rel="external nofollow noreferrer">#7779</a> (<a href=https://github.com/GrigoryPervakov rel="external nofollow noreferrer">Grigory Pervakov</a>)</li> <li>Slightly better usability of error messages. Ask user not to remove the lines below <code>Stack trace:</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7897 rel="external nofollow noreferrer">#7897</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Better reading messages from <code>Kafka</code> engine in various formats after <a href=https://github.com/ClickHouse/ClickHouse/issues/7935 rel="external nofollow noreferrer">#7935</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8035 rel="external nofollow noreferrer">#8035</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Better compatibility with MySQL clients which don't support <code>sha2_password</code> auth plugin. <a href=https://github.com/ClickHouse/ClickHouse/pull/8036 rel="external nofollow noreferrer">#8036</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Yuriy Baranov</a>)</li> <li>Support more column types in MySQL compatibility server. <a href=https://github.com/ClickHouse/ClickHouse/pull/7975 rel="external nofollow noreferrer">#7975</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer">Yuriy Baranov</a>)</li> <li>Implement <code>ORDER BY</code> optimization for <code>Merge</code>, <code>Buffer</code> and <code>Materilized View</code> storages with underlying <code>MergeTree</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/8130 rel="external nofollow noreferrer">#8130</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer">Anton Popov</a>)</li> <li>Now we always use POSIX implementation of <code>getrandom</code> to have better compatibility with old kernels (&lt; 3.17). <a href=https://github.com/ClickHouse/ClickHouse/pull/7940 rel="external nofollow noreferrer">#7940</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Better check for valid destination in a move TTL rule. <a href=https://github.com/ClickHouse/ClickHouse/pull/8410 rel="external nofollow noreferrer">#8410</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Better checks for broken insert batches for <code>Distributed</code> table engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/7933 rel="external nofollow noreferrer">#7933</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Add column with array of parts name which mutations must process in future to <code>system.mutations</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8179 rel="external nofollow noreferrer">#8179</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Parallel merge sort optimization for processors. <a href=https://github.com/ClickHouse/ClickHouse/pull/8552 rel="external nofollow noreferrer">#8552</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>The settings <code>mark_cache_min_lifetime</code> is now obsolete and does nothing. In previous versions, mark cache can grow in memory larger than <code>mark_cache_size</code> to accomodate data within <code>mark_cache_min_lifetime</code> seconds. That was leading to confusion and higher memory usage than expected, that is especially bad on memory constrained systems. If you will see performance degradation after installing this release, you should increase the <code>mark_cache_size</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8484 rel="external nofollow noreferrer">#8484</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Preparation to use <code>tid</code> everywhere. This is needed for <a href=https://github.com/ClickHouse/ClickHouse/issues/7477 rel="external nofollow noreferrer">#7477</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8276 rel="external nofollow noreferrer">#8276</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> </ul> <h4 id=performance-improvement_1>Performance Improvement<a class=headerlink href=#performance-improvement_1 title="Permanent link">&para;</a></h4> <ul> <li>Performance optimizations in processors pipeline. <a href=https://github.com/ClickHouse/ClickHouse/pull/7988 rel="external nofollow noreferrer">#7988</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Non-blocking updates of expired keys in cache dictionaries (with permission to read old ones). <a href=https://github.com/ClickHouse/ClickHouse/pull/8303 rel="external nofollow noreferrer">#8303</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Compile ClickHouse without <code>-fno-omit-frame-pointer</code> globally to spare one more register. <a href=https://github.com/ClickHouse/ClickHouse/pull/8097 rel="external nofollow noreferrer">#8097</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Speedup <code>greatCircleDistance</code> function and add performance tests for it. <a href=https://github.com/ClickHouse/ClickHouse/pull/7307 rel="external nofollow noreferrer">#7307</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer">Olga Khvostikova</a>)</li> <li>Improved performance of function <code>roundDown</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8465 rel="external nofollow noreferrer">#8465</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Improved performance of <code>max</code>, <code>min</code>, <code>argMin</code>, <code>argMax</code> for <code>DateTime64</code> data type. <a href=https://github.com/ClickHouse/ClickHouse/pull/8199 rel="external nofollow noreferrer">#8199</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li>Improved performance of sorting without a limit or with big limit and external sorting. <a href=https://github.com/ClickHouse/ClickHouse/pull/8545 rel="external nofollow noreferrer">#8545</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Improved performance of formatting floating point numbers up to 6 times. <a href=https://github.com/ClickHouse/ClickHouse/pull/8542 rel="external nofollow noreferrer">#8542</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Improved performance of <code>modulo</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/7750 rel="external nofollow noreferrer">#7750</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Optimized <code>ORDER BY</code> and merging with single column key. <a href=https://github.com/ClickHouse/ClickHouse/pull/8335 rel="external nofollow noreferrer">#8335</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Better implementation for <code>arrayReduce</code>, <code>-Array</code> and <code>-State</code> combinators. <a href=https://github.com/ClickHouse/ClickHouse/pull/7710 rel="external nofollow noreferrer">#7710</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Now <code>PREWHERE</code> should be optimized to be at least as efficient as <code>WHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7769 rel="external nofollow noreferrer">#7769</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Improve the way <code>round</code> and <code>roundBankers</code> handling negative numbers. <a href=https://github.com/ClickHouse/ClickHouse/pull/8229 rel="external nofollow noreferrer">#8229</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer">hcz</a>)</li> <li>Improved decoding performance of <code>DoubleDelta</code> and <code>Gorilla</code> codecs by roughly 30-40%. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7082 rel="external nofollow noreferrer">#7082</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8019 rel="external nofollow noreferrer">#8019</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li>Improved performance of <code>base64</code> related functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/8444 rel="external nofollow noreferrer">#8444</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Added a function <code>geoDistance</code>. It is similar to <code>greatCircleDistance</code> but uses approximation to WGS-84 ellipsoid model. The performance of both functions are near the same. <a href=https://github.com/ClickHouse/ClickHouse/pull/8086 rel="external nofollow noreferrer">#8086</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Faster <code>min</code> and <code>max</code> aggregation functions for <code>Decimal</code> data type. <a href=https://github.com/ClickHouse/ClickHouse/pull/8144 rel="external nofollow noreferrer">#8144</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer">Artem Zuikov</a>)</li> <li>Vectorize processing <code>arrayReduce</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7608 rel="external nofollow noreferrer">#7608</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li><code>if</code> chains are now optimized as <code>multiIf</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8355 rel="external nofollow noreferrer">#8355</a> (<a href=https://github.com/kamalov-ruslan rel="external nofollow noreferrer">kamalov-ruslan</a>)</li> <li>Fix performance regression of <code>Kafka</code> table engine introduced in 19.15. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7261 rel="external nofollow noreferrer">#7261</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7935 rel="external nofollow noreferrer">#7935</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer">filimonov</a>)</li> <li>Removed "pie" code generation that <code>gcc</code> from Debian packages occasionally brings by default. <a href=https://github.com/ClickHouse/ClickHouse/pull/8483 rel="external nofollow noreferrer">#8483</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Parallel parsing data formats <a href=https://github.com/ClickHouse/ClickHouse/pull/6553 rel="external nofollow noreferrer">#6553</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer">Nikita Mikhaylov</a>)</li> <li>Enable optimized parser of <code>Values</code> with expressions by default (<code>input_format_values_deduce_templates_of_expressions=1</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8231 rel="external nofollow noreferrer">#8231</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer">tavplubix</a>)</li> </ul> <h4 id=build-testing-packaging-improvement_2>Build/Testing/Packaging Improvement<a class=headerlink href=#build-testing-packaging-improvement_2 title="Permanent link">&para;</a></h4> <ul> <li>Build fixes for <code>ARM</code> and in minimal mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/8304 rel="external nofollow noreferrer">#8304</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Add coverage file flush for <code>clickhouse-server</code> when std::atexit is not called. Also slightly improved logging in stateless tests with coverage. <a href=https://github.com/ClickHouse/ClickHouse/pull/8267 rel="external nofollow noreferrer">#8267</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Update LLVM library in contrib. Avoid using LLVM from OS packages. <a href=https://github.com/ClickHouse/ClickHouse/pull/8258 rel="external nofollow noreferrer">#8258</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Make bundled <code>curl</code> build fully quiet. <a href=https://github.com/ClickHouse/ClickHouse/pull/8232 rel="external nofollow noreferrer">#8232</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8203 rel="external nofollow noreferrer">#8203</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer">Pavel Kovalenko</a>)</li> <li>Fix some <code>MemorySanitizer</code> warnings. <a href=https://github.com/ClickHouse/ClickHouse/pull/8235 rel="external nofollow noreferrer">#8235</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Use <code>add_warning</code> and <code>no_warning</code> macros in <code>CMakeLists.txt</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8604 rel="external nofollow noreferrer">#8604</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer">Ivan</a>)</li> <li>Add support of Minio S3 Compatible object (<a href=https://min.io/ >https://min.io/</a>) for better integration tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/7863 rel="external nofollow noreferrer">#7863</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7875 rel="external nofollow noreferrer">#7875</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer">Pavel Kovalenko</a>)</li> <li>Imported <code>libc</code> headers to contrib. It allows to make builds more consistent across various systems (only for <code>x86_64-linux-gnu</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/5773 rel="external nofollow noreferrer">#5773</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Remove <code>-fPIC</code> from some libraries. <a href=https://github.com/ClickHouse/ClickHouse/pull/8464 rel="external nofollow noreferrer">#8464</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Clean <code>CMakeLists.txt</code> for curl. See <a href=https://github.com/ClickHouse/ClickHouse/pull/8011#issuecomment-569478910>https://github.com/ClickHouse/ClickHouse/pull/8011#issuecomment-569478910</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8459 rel="external nofollow noreferrer">#8459</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Silent warnings in <code>CapNProto</code> library. <a href=https://github.com/ClickHouse/ClickHouse/pull/8220 rel="external nofollow noreferrer">#8220</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Add performance tests for short string optimized hash tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/7679 rel="external nofollow noreferrer">#7679</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Now ClickHouse will build on <code>AArch64</code> even if <code>MADV_FREE</code> is not available. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8027 rel="external nofollow noreferrer">#8027</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8243 rel="external nofollow noreferrer">#8243</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Update <code>zlib-ng</code> to fix memory sanitizer problems. <a href=https://github.com/ClickHouse/ClickHouse/pull/7182 rel="external nofollow noreferrer">#7182</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8206 rel="external nofollow noreferrer">#8206</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Enable internal MySQL library on non-Linux system, because usage of OS packages is very fragile and usually doesn't work at all. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5765 rel="external nofollow noreferrer">#5765</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8426 rel="external nofollow noreferrer">#8426</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed build on some systems after enabling <code>libc++</code>. This supersedes <a href=https://github.com/ClickHouse/ClickHouse/issues/8374 rel="external nofollow noreferrer">#8374</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8380 rel="external nofollow noreferrer">#8380</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Make <code>Field</code> methods more type-safe to find more errors. <a href=https://github.com/ClickHouse/ClickHouse/pull/7386 rel="external nofollow noreferrer">#7386</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8209 rel="external nofollow noreferrer">#8209</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Added missing files to the <code>libc-headers</code> submodule. <a href=https://github.com/ClickHouse/ClickHouse/pull/8507 rel="external nofollow noreferrer">#8507</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix wrong <code>JSON</code> quoting in performance test output. <a href=https://github.com/ClickHouse/ClickHouse/pull/8497 rel="external nofollow noreferrer">#8497</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Now stack trace is displayed for <code>std::exception</code> and <code>Poco::Exception</code>. In previous versions it was available only for <code>DB::Exception</code>. This improves diagnostics. <a href=https://github.com/ClickHouse/ClickHouse/pull/8501 rel="external nofollow noreferrer">#8501</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Porting <code>clock_gettime</code> and <code>clock_nanosleep</code> for fresh glibc versions. <a href=https://github.com/ClickHouse/ClickHouse/pull/8054 rel="external nofollow noreferrer">#8054</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Enable <code>part_log</code> in example config for developers. <a href=https://github.com/ClickHouse/ClickHouse/pull/8609 rel="external nofollow noreferrer">#8609</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix async nature of reload in <code>01036_no_superfluous_dict_reload_on_create_database*</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8111 rel="external nofollow noreferrer">#8111</a> (<a href=https://github.com/azat rel="external nofollow noreferrer">Azat Khuzhin</a>)</li> <li>Fixed codec performance tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/8615 rel="external nofollow noreferrer">#8615</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li>Add install scripts for <code>.tgz</code> build and documentation for them. <a href=https://github.com/ClickHouse/ClickHouse/pull/8612 rel="external nofollow noreferrer">#8612</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8591 rel="external nofollow noreferrer">#8591</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Removed old <code>ZSTD</code> test (it was created in year 2016 to reproduce the bug that pre 1.0 version of ZSTD has had). This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8618 rel="external nofollow noreferrer">#8618</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8619 rel="external nofollow noreferrer">#8619</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed build on Mac OS Catalina. <a href=https://github.com/ClickHouse/ClickHouse/pull/8600 rel="external nofollow noreferrer">#8600</a> (<a href=https://github.com/meob rel="external nofollow noreferrer">meo</a>)</li> <li>Increased number of rows in codec performance tests to make results noticeable. <a href=https://github.com/ClickHouse/ClickHouse/pull/8574 rel="external nofollow noreferrer">#8574</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li>In debug builds, treat <code>LOGICAL_ERROR</code> exceptions as assertion failures, so that they are easier to notice. <a href=https://github.com/ClickHouse/ClickHouse/pull/8475 rel="external nofollow noreferrer">#8475</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Make formats-related performance test more deterministic. <a href=https://github.com/ClickHouse/ClickHouse/pull/8477 rel="external nofollow noreferrer">#8477</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Update <code>lz4</code> to fix a MemorySanitizer failure. <a href=https://github.com/ClickHouse/ClickHouse/pull/8181 rel="external nofollow noreferrer">#8181</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Suppress a known MemorySanitizer false positive in exception handling. <a href=https://github.com/ClickHouse/ClickHouse/pull/8182 rel="external nofollow noreferrer">#8182</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Update <code>gcc</code> and <code>g++</code> to version 9 in <code>build/docker/build.sh</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7766 rel="external nofollow noreferrer">#7766</a> (<a href=https://github.com/tlightsky rel="external nofollow noreferrer">TLightSky</a>)</li> <li>Add performance test case to test that <code>PREWHERE</code> is worse than <code>WHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7768 rel="external nofollow noreferrer">#7768</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Progress towards fixing one flacky test. <a href=https://github.com/ClickHouse/ClickHouse/pull/8621 rel="external nofollow noreferrer">#8621</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Avoid MemorySanitizer report for data from <code>libunwind</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8539 rel="external nofollow noreferrer">#8539</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Updated <code>libc++</code> to the latest version. <a href=https://github.com/ClickHouse/ClickHouse/pull/8324 rel="external nofollow noreferrer">#8324</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Build ICU library from sources. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6460 rel="external nofollow noreferrer">#6460</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8219 rel="external nofollow noreferrer">#8219</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Switched from <code>libressl</code> to <code>openssl</code>. ClickHouse should support TLS 1.3 and SNI after this change. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8171 rel="external nofollow noreferrer">#8171</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8218 rel="external nofollow noreferrer">#8218</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fixed UBSan report when using <code>chacha20_poly1305</code> from SSL (happens on connect to <a href=https://yandex.ru/ >https://yandex.ru/</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8214 rel="external nofollow noreferrer">#8214</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix mode of default password file for <code>.deb</code> linux distros. <a href=https://github.com/ClickHouse/ClickHouse/pull/8075 rel="external nofollow noreferrer">#8075</a> (<a href=https://github.com/proller rel="external nofollow noreferrer">proller</a>)</li> <li>Improved expression for getting <code>clickhouse-server</code> PID in <code>clickhouse-test</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8063 rel="external nofollow noreferrer">#8063</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer">Alexander Kazakov</a>)</li> <li>Updated contrib/googletest to v1.10.0. <a href=https://github.com/ClickHouse/ClickHouse/pull/8587 rel="external nofollow noreferrer">#8587</a> (<a href=https://github.com/Alex-Burmak rel="external nofollow noreferrer">Alexander Burmak</a>)</li> <li>Fixed ThreadSaninitizer report in <code>base64</code> library. Also updated this library to the latest version, but it doesn't matter. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8397 rel="external nofollow noreferrer">#8397</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8403 rel="external nofollow noreferrer">#8403</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Fix <code>00600_replace_running_query</code> for processors. <a href=https://github.com/ClickHouse/ClickHouse/pull/8272 rel="external nofollow noreferrer">#8272</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Remove support for <code>tcmalloc</code> to make <code>CMakeLists.txt</code> simpler. <a href=https://github.com/ClickHouse/ClickHouse/pull/8310 rel="external nofollow noreferrer">#8310</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Release gcc builds now use <code>libc++</code> instead of <code>libstdc++</code>. Recently <code>libc++</code> was used only with clang. This will improve consistency of build configurations and portability. <a href=https://github.com/ClickHouse/ClickHouse/pull/8311 rel="external nofollow noreferrer">#8311</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Enable ICU library for build with MemorySanitizer. <a href=https://github.com/ClickHouse/ClickHouse/pull/8222 rel="external nofollow noreferrer">#8222</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Suppress warnings from <code>CapNProto</code> library. <a href=https://github.com/ClickHouse/ClickHouse/pull/8224 rel="external nofollow noreferrer">#8224</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Removed special cases of code for <code>tcmalloc</code>, because it's no longer supported. <a href=https://github.com/ClickHouse/ClickHouse/pull/8225 rel="external nofollow noreferrer">#8225</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>In CI coverage task, kill the server gracefully to allow it to save the coverage report. This fixes incomplete coverage reports we've been seeing lately. <a href=https://github.com/ClickHouse/ClickHouse/pull/8142 rel="external nofollow noreferrer">#8142</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Performance tests for all codecs against <code>Float64</code> and <code>UInt64</code> values. <a href=https://github.com/ClickHouse/ClickHouse/pull/8349 rel="external nofollow noreferrer">#8349</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer">Vasily Nemkov</a>)</li> <li><code>termcap</code> is very much deprecated and lead to various problems (f.g. missing "up" cap and echoing <code>^J</code> instead of multi line) . Favor <code>terminfo</code> or bundled <code>ncurses</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7737 rel="external nofollow noreferrer">#7737</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Fix <code>test_storage_s3</code> integration test. <a href=https://github.com/ClickHouse/ClickHouse/pull/7734 rel="external nofollow noreferrer">#7734</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Support <code>StorageFile(&lt;format&gt;, null)</code> to insert block into given format file without actually write to disk. This is required for performance tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/8455 rel="external nofollow noreferrer">#8455</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> <li>Added argument <code>--print-time</code> to functional tests which prints execution time per test. <a href=https://github.com/ClickHouse/ClickHouse/pull/8001 rel="external nofollow noreferrer">#8001</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Added asserts to <code>KeyCondition</code> while evaluating RPN. This will fix warning from gcc-9. <a href=https://github.com/ClickHouse/ClickHouse/pull/8279 rel="external nofollow noreferrer">#8279</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Dump cmake options in CI builds. <a href=https://github.com/ClickHouse/ClickHouse/pull/8273 rel="external nofollow noreferrer">#8273</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Don't generate debug info for some fat libraries. <a href=https://github.com/ClickHouse/ClickHouse/pull/8271 rel="external nofollow noreferrer">#8271</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Make <code>log_to_console.xml</code> always log to stderr, regardless of is it interactive or not. <a href=https://github.com/ClickHouse/ClickHouse/pull/8395 rel="external nofollow noreferrer">#8395</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer">Alexander Kuzmenkov</a>)</li> <li>Removed some unused features from <code>clickhouse-performance-test</code> tool. <a href=https://github.com/ClickHouse/ClickHouse/pull/8555 rel="external nofollow noreferrer">#8555</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Now we will also search for <code>lld-X</code> with corresponding <code>clang-X</code> version. <a href=https://github.com/ClickHouse/ClickHouse/pull/8092 rel="external nofollow noreferrer">#8092</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer">alesapin</a>)</li> <li>Parquet build improvement. <a href=https://github.com/ClickHouse/ClickHouse/pull/8421 rel="external nofollow noreferrer">#8421</a> (<a href=https://github.com/maxulan rel="external nofollow noreferrer">maxulan</a>)</li> <li>More GCC warnings <a href=https://github.com/ClickHouse/ClickHouse/pull/8221 rel="external nofollow noreferrer">#8221</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer">kreuzerkrieg</a>)</li> <li>Package for Arch Linux now allows to run ClickHouse server, and not only client. <a href=https://github.com/ClickHouse/ClickHouse/pull/8534 rel="external nofollow noreferrer">#8534</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer">Vladimir Chebotarev</a>)</li> <li>Fix test with processors. Tiny performance fixes. <a href=https://github.com/ClickHouse/ClickHouse/pull/7672 rel="external nofollow noreferrer">#7672</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer">Nikolai Kochetov</a>)</li> <li>Update contrib/protobuf. <a href=https://github.com/ClickHouse/ClickHouse/pull/8256 rel="external nofollow noreferrer">#8256</a> (<a href=https://github.com/matwey rel="external nofollow noreferrer">Matwey V. Kornilov</a>)</li> <li>In preparation of switching to c++20 as a new year celebration. "May the C++ force be with ClickHouse." <a href=https://github.com/ClickHouse/ClickHouse/pull/8447 rel="external nofollow noreferrer">#8447</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer">Amos Bird</a>)</li> </ul> <h4 id=experimental-feature_1>Experimental Feature<a class=headerlink href=#experimental-feature_1 title="Permanent link">&para;</a></h4> <ul> <li>Added experimental setting <code>min_bytes_to_use_mmap_io</code>. It allows to read big files without copying data from kernel to userspace. The setting is disabled by default. Recommended threshold is about 64 MB, because mmap/munmap is slow. <a href=https://github.com/ClickHouse/ClickHouse/pull/8520 rel="external nofollow noreferrer">#8520</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> <li>Reworked quotas as a part of access control system. Added new table <code>system.quotas</code>, new functions <code>currentQuota</code>, <code>currentQuotaKey</code>, new SQL syntax <code>CREATE QUOTA</code>, <code>ALTER QUOTA</code>, <code>DROP QUOTA</code>, <code>SHOW QUOTA</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7257 rel="external nofollow noreferrer">#7257</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Allow skipping unknown settings with warnings instead of throwing exceptions. <a href=https://github.com/ClickHouse/ClickHouse/pull/7653 rel="external nofollow noreferrer">#7653</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> <li>Reworked row policies as a part of access control system. Added new table <code>system.row_policies</code>, new function <code>currentRowPolicies()</code>, new SQL syntax <code>CREATE POLICY</code>, <code>ALTER POLICY</code>, <code>DROP POLICY</code>, <code>SHOW CREATE POLICY</code>, <code>SHOW POLICIES</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7808 rel="external nofollow noreferrer">#7808</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer">Vitaly Baranov</a>)</li> </ul> <h4 id=security-fix>Security Fix<a class=headerlink href=#security-fix title="Permanent link">&para;</a></h4> <ul> <li>Fixed the possibility of reading directories structure in tables with <code>File</code> table engine. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/8536 rel="external nofollow noreferrer">#8536</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8537 rel="external nofollow noreferrer">#8537</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer">alexey-milovidov</a>)</li> </ul> <h2 id=changelog-for-2019><a href=https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/changelog/2019.md rel="external nofollow noreferrer">Changelog for 2019</a><a class=headerlink href=#changelog-for-2019 title="Permanent link">&para;</a></h2> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/25eae6abe035bda78634f17d15c9f05348d97aad rel="external nofollow noreferrer" target=_blank class=text-reset>25eae6abe0</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#clickhouse-release-v20-3 title="ClickHouse release v20.3" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.3 </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#clickhouse-release-v20-3-4-10-2020-03-20 title="ClickHouse release v20.3.4.10, 2020-03-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.3.4.10, 2020-03-20 </a> <nav id=toc-toc-1-1 class="nav flex-column pl-2"> <a href=#bug-fix title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-v20-3-3-6-2020-03-17 title="ClickHouse release v20.3.3.6, 2020-03-17" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.3.3.6, 2020-03-17 </a> <nav id=toc-toc-1-2 class="nav flex-column pl-2"> <a href=#bug-fix_1 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-v20-3-2-1-2020-03-12 title="ClickHouse release v20.3.2.1, 2020-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.3.2.1, 2020-03-12 </a> <nav id=toc-toc-1-3 class="nav flex-column pl-2"> <a href=#backward-incompatible-change title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#new-feature title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#experimental-feature title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100"> Experimental Feature </a> <a href=#bug-fix_2 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> </nav> <a href=#clickhouse-release-v20-1 title="ClickHouse release v20.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.1 </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#clickhouse-release-v20-1-8-41-2020-03-20 title="ClickHouse release v20.1.8.41, 2020-03-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.1.8.41, 2020-03-20 </a> <nav id=toc-toc-2-1 class="nav flex-column pl-2"> <a href=#bug-fix_3 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-v20-1-7-38-2020-03-18 title="ClickHouse release v20.1.7.38, 2020-03-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.1.7.38, 2020-03-18 </a> <nav id=toc-toc-2-2 class="nav flex-column pl-2"> <a href=#bug-fix_4 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#build-testing-packaging-improvement_1 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-v20-1-6-30-2020-03-05 title="ClickHouse release v20.1.6.30, 2020-03-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.1.6.30, 2020-03-05 </a> <nav id=toc-toc-2-3 class="nav flex-column pl-2"> <a href=#bug-fix_5 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#new-feature_1 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> </nav> <a href=#clickhouse-release-v20-1-2-4-2020-01-22 title="ClickHouse release v20.1.2.4, 2020-01-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release v20.1.2.4, 2020-01-22 </a> <nav id=toc-toc-2-4 class="nav flex-column pl-2"> <a href=#backward-incompatible-change_1 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#new-feature_2 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix_6 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement_1 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement_1 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_2 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#experimental-feature_1 title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100"> Experimental Feature </a> <a href=#security-fix title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> </nav> <a href=#changelog-for-2019 title="Changelog for 2019" class="nav-link text-wrap d-inline-block w-100"> Changelog for 2019 </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=en data-version=v19.15 data-single-page=true> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>ClickHouse v19.15 Documentation - ClickHouse v19.15 Documentation</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="ClickHouse v19.15 Documentation - ClickHouse v19.15 Documentation"><meta property=og:description content="ClickHouse is an open source column-oriented database management system that allows generating analytical data reports in real time using SQL queries."><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="ClickHouse v19.15 Documentation - ClickHouse v19.15 Documentation"><meta name=description content="ClickHouse is an open source distributed column-oriented database management system that allows generating analytical data reports in real time using SQL queries. Сreated by Yandex ClickHouse manages extremely large volumes of data in a stable and sustainable manner."><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> ClickHouse v19.15 Documentation </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/tree/master/docs title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/en.svg alt=English title=English width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v19.15/en/single/ class="dropdown-item disabled"> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v19.15/zh/single/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v19.15/es/single/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v19.15/fr/single/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v19.15/ru/single/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v19.15/ja/single/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v19.15/fa/single/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=.. role=button class="btn btn-dark-alt active" aria-pressed=false> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../single/ role=button class="btn btn-dark active" aria-pressed=false> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Version: <span class=text-light>v19.15</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/en/ class=dropdown-item> <span class=text-light>latest</span> </a> <a href=/docs/v20.3/en/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/en/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/en/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/en/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/en/ class="dropdown-item disable">v19.15</a> <a href=/docs/v19.14/en/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/en/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/en/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/en/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/en/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/en/ class=dropdown-item>v19.8</a> </div> </div> <div id=toc class="toc-left mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#what-is-clickhouse title="What is ClickHouse?" class="nav-link text-wrap d-inline-block w-100"> What is ClickHouse? </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#key-properties-of-the-olap-scenario title="Key Properties of the OLAP scenario" class="nav-link text-wrap d-inline-block w-100"> Key Properties of the OLAP scenario </a> <a href=#why-column-oriented-databases-work-better-in-the-olap-scenario title="Why Column-Oriented Databases Work Better in the OLAP Scenario" class="nav-link text-wrap d-inline-block w-100"> Why Column-Oriented Databases Work Better in the OLAP Scenario </a> <nav id=toc-toc-1-2 class="nav flex-column pl-2"> <a href=#input-output title=Input/output class="nav-link text-wrap d-inline-block w-100"> Input/output </a> <a href=#cpu title=CPU class="nav-link text-wrap d-inline-block w-100"> CPU </a> </nav> </nav> <a href=#distinctive-features-of-clickhouse title="Distinctive Features of ClickHouse" class="nav-link text-wrap d-inline-block w-100"> Distinctive Features of ClickHouse </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#true-column-oriented-dbms title="True Column-Oriented DBMS" class="nav-link text-wrap d-inline-block w-100"> True Column-Oriented DBMS </a> <a href=#data-compression title="Data Compression" class="nav-link text-wrap d-inline-block w-100"> Data Compression </a> <a href=#disk-storage-of-data title="Disk Storage of Data" class="nav-link text-wrap d-inline-block w-100"> Disk Storage of Data </a> <a href=#parallel-processing-on-multiple-cores title="Parallel Processing on Multiple Cores" class="nav-link text-wrap d-inline-block w-100"> Parallel Processing on Multiple Cores </a> <a href=#distributed-processing-on-multiple-servers title="Distributed Processing on Multiple Servers" class="nav-link text-wrap d-inline-block w-100"> Distributed Processing on Multiple Servers </a> <a href=#sql-support title="SQL Support" class="nav-link text-wrap d-inline-block w-100"> SQL Support </a> <a href=#vector-engine title="Vector Engine" class="nav-link text-wrap d-inline-block w-100"> Vector Engine </a> <a href=#real-time-data-updates title="Real-time Data Updates" class="nav-link text-wrap d-inline-block w-100"> Real-time Data Updates </a> <a href=#index title=Index class="nav-link text-wrap d-inline-block w-100"> Index </a> <a href=#suitable-for-online-queries title="Suitable for Online Queries" class="nav-link text-wrap d-inline-block w-100"> Suitable for Online Queries </a> <a href=#support-for-approximated-calculations title="Support for Approximated Calculations" class="nav-link text-wrap d-inline-block w-100"> Support for Approximated Calculations </a> <a href=#data-replication-and-data-integrity-support title="Data replication and data integrity support" class="nav-link text-wrap d-inline-block w-100"> Data replication and data integrity support </a> </nav> <a href=#clickhouse-features-that-can-be-considered-disadvantages title="ClickHouse Features that Can be Considered Disadvantages" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Features that Can be Considered Disadvantages </a> <a href=#performance title=Performance class="nav-link text-wrap d-inline-block w-100"> Performance </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#throughput-for-a-single-large-query title="Throughput for a Single Large Query" class="nav-link text-wrap d-inline-block w-100"> Throughput for a Single Large Query </a> <a href=#latency-when-processing-short-queries title="Latency When Processing Short Queries" class="nav-link text-wrap d-inline-block w-100"> Latency When Processing Short Queries </a> <a href=#throughput-when-processing-a-large-quantity-of-short-queries title="Throughput When Processing a Large Quantity of Short Queries" class="nav-link text-wrap d-inline-block w-100"> Throughput When Processing a Large Quantity of Short Queries </a> <a href=#performance-when-inserting-data title="Performance When Inserting Data" class="nav-link text-wrap d-inline-block w-100"> Performance When Inserting Data </a> </nav> <a href=#yandex-metrica-use-case title="Yandex.Metrica Use Case" class="nav-link text-wrap d-inline-block w-100"> Yandex.Metrica Use Case </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#usage-in-yandex-metrica-and-other-yandex-services title="Usage in Yandex.Metrica and Other Yandex Services" class="nav-link text-wrap d-inline-block w-100"> Usage in Yandex.Metrica and Other Yandex Services </a> <a href=#aggregated-and-non-aggregated-data title="Aggregated and Non-aggregated Data" class="nav-link text-wrap d-inline-block w-100"> Aggregated and Non-aggregated Data </a> </nav> <a href=#getting-started title="Getting Started" class="nav-link text-wrap d-inline-block w-100"> Getting Started </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#system-requirements title="System Requirements" class="nav-link text-wrap d-inline-block w-100"> System Requirements </a> <a href=#installation title=Installation class="nav-link text-wrap d-inline-block w-100"> Installation </a> <nav id=toc-toc-6-2 class="nav flex-column pl-2"> <a href=#from-deb-packages title="From DEB Packages" class="nav-link text-wrap d-inline-block w-100"> From DEB Packages </a> <a href=#from-rpm-packages title="From RPM Packages" class="nav-link text-wrap d-inline-block w-100"> From RPM Packages </a> <a href=#from-docker-image title="From Docker Image" class="nav-link text-wrap d-inline-block w-100"> From Docker Image </a> <a href=#from-sources title="From Sources" class="nav-link text-wrap d-inline-block w-100"> From Sources </a> </nav> <a href=#launch title=Launch class="nav-link text-wrap d-inline-block w-100"> Launch </a> </nav> <a href=#ontime title=OnTime class="nav-link text-wrap d-inline-block w-100"> OnTime </a> <nav id=toc-toc-7 class="nav flex-column pl-2"> <a href=#import-from-raw-data title="Import From Raw Data" class="nav-link text-wrap d-inline-block w-100"> Import From Raw Data </a> <a href=#download-of-prepared-partitions title="Download of Prepared Partitions" class="nav-link text-wrap d-inline-block w-100"> Download of Prepared Partitions </a> <a href=#queries title=Queries class="nav-link text-wrap d-inline-block w-100"> Queries </a> </nav> <a href=#new-york-taxi-data title="New York Taxi Data" class="nav-link text-wrap d-inline-block w-100"> New York Taxi Data </a> <nav id=toc-toc-8 class="nav flex-column pl-2"> <a href=#how-to-import-the-raw-data title="How to Import The Raw Data" class="nav-link text-wrap d-inline-block w-100"> How to Import The Raw Data </a> <a href=#download-of-prepared-partitions_1 title="Download of Prepared Partitions" class="nav-link text-wrap d-inline-block w-100"> Download of Prepared Partitions </a> <a href=#results-on-single-server title="Results on Single Server" class="nav-link text-wrap d-inline-block w-100"> Results on Single Server </a> <a href=#summary title=Summary class="nav-link text-wrap d-inline-block w-100"> Summary </a> </nav> <a href=#amplab-big-data-benchmark title="AMPLab Big Data Benchmark" class="nav-link text-wrap d-inline-block w-100"> AMPLab Big Data Benchmark </a> <a href=#wikistat title=WikiStat class="nav-link text-wrap d-inline-block w-100"> WikiStat </a> <a href=#terabyte-of-click-logs-from-criteo title="Terabyte of Click Logs from Criteo" class="nav-link text-wrap d-inline-block w-100"> Terabyte of Click Logs from Criteo </a> <a href=#star-schema-benchmark title="Star Schema Benchmark" class="nav-link text-wrap d-inline-block w-100"> Star Schema Benchmark </a> <a href=#anonymized-yandex-metrica-data title="Anonymized Yandex.Metrica Data" class="nav-link text-wrap d-inline-block w-100"> Anonymized Yandex.Metrica Data </a> <nav id=toc-toc-13 class="nav flex-column pl-2"> <a href=#obtaining-tables-from-prepared-partitions title="Obtaining Tables from Prepared Partitions" class="nav-link text-wrap d-inline-block w-100"> Obtaining Tables from Prepared Partitions </a> <a href=#obtaining-tables-from-compressed-tsv-file title="Obtaining Tables from Compressed tsv-file" class="nav-link text-wrap d-inline-block w-100"> Obtaining Tables from Compressed tsv-file </a> <a href=#queries_1 title=Queries class="nav-link text-wrap d-inline-block w-100"> Queries </a> </nav> <a href=#interfaces title=Interfaces class="nav-link text-wrap d-inline-block w-100"> Interfaces </a> <a href=#command-line-client title="Command-line Client" class="nav-link text-wrap d-inline-block w-100"> Command-line Client </a> <nav id=toc-toc-15 class="nav flex-column pl-2"> <a href=#cli_usage title=Usage class="nav-link text-wrap d-inline-block w-100"> Usage </a> <nav id=toc-toc-15-1 class="nav flex-column pl-2"> <a href=#cli-queries-with-parameters title="Queries with Parameters" class="nav-link text-wrap d-inline-block w-100"> Queries with Parameters </a> <nav id=toc-toc-15-1-1 class="nav flex-column pl-2"> <a href=#cli-queries-with-parameters-syntax title="Query Syntax" class="nav-link text-wrap d-inline-block w-100"> Query Syntax </a> <a href=#example title=Example class="nav-link text-wrap d-inline-block w-100"> Example </a> </nav> </nav> <a href=#interfaces_cli_configuration title=Configuring class="nav-link text-wrap d-inline-block w-100"> Configuring </a> <nav id=toc-toc-15-2 class="nav flex-column pl-2"> <a href=#command-line-options title="Command Line Options" class="nav-link text-wrap d-inline-block w-100"> Command Line Options </a> <a href=#configuration-files title="Configuration Files" class="nav-link text-wrap d-inline-block w-100"> Configuration Files </a> </nav> </nav> <a href=#native-interface-tcp title="Native Interface (TCP)" class="nav-link text-wrap d-inline-block w-100"> Native Interface (TCP) </a> <a href=#http_interface title="HTTP Interface" class="nav-link text-wrap d-inline-block w-100"> HTTP Interface </a> <nav id=toc-toc-17 class="nav flex-column pl-2"> <a href=#response-buffering title="Response Buffering" class="nav-link text-wrap d-inline-block w-100"> Response Buffering </a> <nav id=toc-toc-17-1 class="nav flex-column pl-2"> <a href=#cli-queries-with-parameters title="Queries with Parameters" class="nav-link text-wrap d-inline-block w-100"> Queries with Parameters </a> <a href=#example_1 title=Example class="nav-link text-wrap d-inline-block w-100"> Example </a> </nav> </nav> <a href=#formats title="Formats for Input and Output Data" class="nav-link text-wrap d-inline-block w-100"> Formats for Input and Output Data </a> <nav id=toc-toc-18 class="nav flex-column pl-2"> <a href=#tabseparated title=TabSeparated class="nav-link text-wrap d-inline-block w-100"> TabSeparated </a> <nav id=toc-toc-18-1 class="nav flex-column pl-2"> <a href=#data-formatting title="Data Formatting" class="nav-link text-wrap d-inline-block w-100"> Data Formatting </a> </nav> <a href=#tabseparatedraw title=TabSeparatedRaw class="nav-link text-wrap d-inline-block w-100"> TabSeparatedRaw </a> <a href=#tabseparatedwithnames title=TabSeparatedWithNames class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNames </a> <a href=#tabseparatedwithnamesandtypes title=TabSeparatedWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNamesAndTypes </a> <a href=#format-template title=Template class="nav-link text-wrap d-inline-block w-100"> Template </a> <a href=#templateignorespaces title=TemplateIgnoreSpaces class="nav-link text-wrap d-inline-block w-100"> TemplateIgnoreSpaces </a> <a href=#tskv title=TSKV class="nav-link text-wrap d-inline-block w-100"> TSKV </a> <a href=#csv title=CSV class="nav-link text-wrap d-inline-block w-100"> CSV </a> <a href=#csvwithnames title=CSVWithNames class="nav-link text-wrap d-inline-block w-100"> CSVWithNames </a> <a href=#json title=JSON class="nav-link text-wrap d-inline-block w-100"> JSON </a> <a href=#jsoncompact title=JSONCompact class="nav-link text-wrap d-inline-block w-100"> JSONCompact </a> <a href=#jsoneachrow title=JSONEachRow class="nav-link text-wrap d-inline-block w-100"> JSONEachRow </a> <nav id=toc-toc-18-12 class="nav flex-column pl-2"> <a href=#inserting-data title="Inserting Data" class="nav-link text-wrap d-inline-block w-100"> Inserting Data </a> <a href=#selecting-data title="Selecting Data" class="nav-link text-wrap d-inline-block w-100"> Selecting Data </a> <a href=#jsoneachrow-nested title="Usage of Nested Structures" class="nav-link text-wrap d-inline-block w-100"> Usage of Nested Structures </a> </nav> <a href=#native title=Native class="nav-link text-wrap d-inline-block w-100"> Native </a> <a href=#null title=Null class="nav-link text-wrap d-inline-block w-100"> Null </a> <a href=#pretty title=Pretty class="nav-link text-wrap d-inline-block w-100"> Pretty </a> <a href=#prettycompact title=PrettyCompact class="nav-link text-wrap d-inline-block w-100"> PrettyCompact </a> <a href=#prettycompactmonoblock title=PrettyCompactMonoBlock class="nav-link text-wrap d-inline-block w-100"> PrettyCompactMonoBlock </a> <a href=#prettynoescapes title=PrettyNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyNoEscapes </a> <nav id=toc-toc-18-18 class="nav flex-column pl-2"> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyCompactNoEscapes </a> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettySpaceNoEscapes </a> </nav> <a href=#prettyspace title=PrettySpace class="nav-link text-wrap d-inline-block w-100"> PrettySpace </a> <a href=#rowbinary title=RowBinary class="nav-link text-wrap d-inline-block w-100"> RowBinary </a> <a href=#rowbinarywithnamesandtypes title=RowBinaryWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> RowBinaryWithNamesAndTypes </a> <a href=#data-format-values title=Values class="nav-link text-wrap d-inline-block w-100"> Values </a> <a href=#vertical title=Vertical class="nav-link text-wrap d-inline-block w-100"> Vertical </a> <a href=#xml title=XML class="nav-link text-wrap d-inline-block w-100"> XML </a> <a href=#capnproto title=CapnProto class="nav-link text-wrap d-inline-block w-100"> CapnProto </a> <a href=#protobuf title=Protobuf class="nav-link text-wrap d-inline-block w-100"> Protobuf </a> <a href=#data-format-parquet title=Parquet class="nav-link text-wrap d-inline-block w-100"> Parquet </a> <nav id=toc-toc-18-27 class="nav flex-column pl-2"> <a href=#data-types-matching title="Data Types Matching" class="nav-link text-wrap d-inline-block w-100"> Data Types Matching </a> <a href=#inserting-and-selecting-data title="Inserting and Selecting Data" class="nav-link text-wrap d-inline-block w-100"> Inserting and Selecting Data </a> </nav> <a href=#formatschema title="Format Schema" class="nav-link text-wrap d-inline-block w-100"> Format Schema </a> </nav> <a href=#jdbc-driver title="JDBC Driver" class="nav-link text-wrap d-inline-block w-100"> JDBC Driver </a> <a href=#odbc-driver title="ODBC Driver" class="nav-link text-wrap d-inline-block w-100"> ODBC Driver </a> <a href=#client-libraries-from-third-party-developers title="Client Libraries from Third-party Developers" class="nav-link text-wrap d-inline-block w-100"> Client Libraries from Third-party Developers </a> <a href=#integration-libraries-from-third-party-developers title="Integration Libraries from Third-party Developers" class="nav-link text-wrap d-inline-block w-100"> Integration Libraries from Third-party Developers </a> <nav id=toc-toc-22 class="nav flex-column pl-2"> <a href=#infrastructure-products title="Infrastructure Products" class="nav-link text-wrap d-inline-block w-100"> Infrastructure Products </a> <a href=#programming-language-ecosystems title="Programming Language Ecosystems" class="nav-link text-wrap d-inline-block w-100"> Programming Language Ecosystems </a> </nav> <a href=#visual-interfaces-from-third-party-developers title="Visual Interfaces from Third-party Developers" class="nav-link text-wrap d-inline-block w-100"> Visual Interfaces from Third-party Developers </a> <nav id=toc-toc-23 class="nav flex-column pl-2"> <a href=#open-source title=Open-Source class="nav-link text-wrap d-inline-block w-100"> Open-Source </a> <nav id=toc-toc-23-1 class="nav flex-column pl-2"> <a href=#tabix title=Tabix class="nav-link text-wrap d-inline-block w-100"> Tabix </a> <a href=#houseops title=HouseOps class="nav-link text-wrap d-inline-block w-100"> HouseOps </a> <a href=#lighthouse title=LightHouse class="nav-link text-wrap d-inline-block w-100"> LightHouse </a> <a href=#dbeaver title=DBeaver class="nav-link text-wrap d-inline-block w-100"> DBeaver </a> <a href=#clickhouse-cli title=clickhouse-cli class="nav-link text-wrap d-inline-block w-100"> clickhouse-cli </a> <a href=#clickhouse-flamegraph title=clickhouse-flamegraph class="nav-link text-wrap d-inline-block w-100"> clickhouse-flamegraph </a> </nav> <a href=#commercial title=Commercial class="nav-link text-wrap d-inline-block w-100"> Commercial </a> <nav id=toc-toc-23-2 class="nav flex-column pl-2"> <a href=#datagrip title=DataGrip class="nav-link text-wrap d-inline-block w-100"> DataGrip </a> </nav> </nav> <a href=#proxy-servers-from-third-party-developers title="Proxy Servers from Third-party Developers" class="nav-link text-wrap d-inline-block w-100"> Proxy Servers from Third-party Developers </a> <nav id=toc-toc-24 class="nav flex-column pl-2"> <a href=#chproxy title=chproxy class="nav-link text-wrap d-inline-block w-100"> chproxy </a> <a href=#kittenhouse title=KittenHouse class="nav-link text-wrap d-inline-block w-100"> KittenHouse </a> <a href=#clickhouse-bulk title=ClickHouse-Bulk class="nav-link text-wrap d-inline-block w-100"> ClickHouse-Bulk </a> </nav> <a href=#data_types title="Data Types" class="nav-link text-wrap d-inline-block w-100"> Data Types </a> <a href=#uint8-uint16-uint32-uint64-int8-int16-int32-int64 title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-wrap d-inline-block w-100"> UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64 </a> <nav id=toc-toc-26 class="nav flex-column pl-2"> <a href=#int-ranges title="Int Ranges" class="nav-link text-wrap d-inline-block w-100"> Int Ranges </a> <a href=#uint-ranges title="Uint Ranges" class="nav-link text-wrap d-inline-block w-100"> Uint Ranges </a> </nav> <a href=#float32-float64 title="Float32, Float64" class="nav-link text-wrap d-inline-block w-100"> Float32, Float64 </a> <nav id=toc-toc-27 class="nav flex-column pl-2"> <a href=#using-floating-point-numbers title="Using Floating-point Numbers" class="nav-link text-wrap d-inline-block w-100"> Using Floating-point Numbers </a> <a href=#data_type-float-nan-inf title="NaN and Inf" class="nav-link text-wrap d-inline-block w-100"> NaN and Inf </a> </nav> <a href=#decimal-p-s-decimal32-s-decimal64-s-decimal128-s title="Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)" class="nav-link text-wrap d-inline-block w-100"> Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S) </a> <nav id=toc-toc-28 class="nav flex-column pl-2"> <a href=#parameters title=Parameters class="nav-link text-wrap d-inline-block w-100"> Parameters </a> <a href=#decimal-value-ranges title="Decimal value ranges" class="nav-link text-wrap d-inline-block w-100"> Decimal value ranges </a> <a href=#internal-representation title="Internal representation" class="nav-link text-wrap d-inline-block w-100"> Internal representation </a> <a href=#operations-and-result-type title="Operations and result type" class="nav-link text-wrap d-inline-block w-100"> Operations and result type </a> <a href=#overflow-checks title="Overflow checks" class="nav-link text-wrap d-inline-block w-100"> Overflow checks </a> </nav> <a href=#boolean-values title="Boolean Values" class="nav-link text-wrap d-inline-block w-100"> Boolean Values </a> <a href=#string title=String class="nav-link text-wrap d-inline-block w-100"> String </a> <nav id=toc-toc-30 class="nav flex-column pl-2"> <a href=#encodings title=Encodings class="nav-link text-wrap d-inline-block w-100"> Encodings </a> </nav> <a href=#fixedstring title=FixedString class="nav-link text-wrap d-inline-block w-100"> FixedString </a> <a href=#uuid-data-type title=UUID class="nav-link text-wrap d-inline-block w-100"> UUID </a> <nav id=toc-toc-32 class="nav flex-column pl-2"> <a href=#how-to-generate title="How to generate" class="nav-link text-wrap d-inline-block w-100"> How to generate </a> <a href=#usage-example title="Usage example" class="nav-link text-wrap d-inline-block w-100"> Usage example </a> <a href=#restrictions title=Restrictions class="nav-link text-wrap d-inline-block w-100"> Restrictions </a> </nav> <a href=#date title=Date class="nav-link text-wrap d-inline-block w-100"> Date </a> <a href=#data_type-datetime title=DateTime class="nav-link text-wrap d-inline-block w-100"> DateTime </a> <nav id=toc-toc-34 class="nav flex-column pl-2"> <a href=#time-zones title="Time Zones" class="nav-link text-wrap d-inline-block w-100"> Time Zones </a> </nav> <a href=#enum title=Enum class="nav-link text-wrap d-inline-block w-100"> Enum </a> <nav id=toc-toc-35 class="nav flex-column pl-2"> <a href=#usage-examples title="Usage examples" class="nav-link text-wrap d-inline-block w-100"> Usage examples </a> <a href=#general-rules-and-usage title="General rules and usage" class="nav-link text-wrap d-inline-block w-100"> General rules and usage </a> </nav> <a href=#data_type-array title=Array(T) class="nav-link text-wrap d-inline-block w-100"> Array(T) </a> <nav id=toc-toc-36 class="nav flex-column pl-2"> <a href=#creating-an-array title="Creating an array" class="nav-link text-wrap d-inline-block w-100"> Creating an array </a> <a href=#working-with-data-types title="Working with data types" class="nav-link text-wrap d-inline-block w-100"> Working with data types </a> </nav> <a href=#data_type-aggregatefunction title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-wrap d-inline-block w-100"> AggregateFunction(name, types_of_arguments...) </a> <nav id=toc-toc-37 class="nav flex-column pl-2"> <a href=#usage title=Usage class="nav-link text-wrap d-inline-block w-100"> Usage </a> <nav id=toc-toc-37-1 class="nav flex-column pl-2"> <a href=#data-insertion title="Data Insertion" class="nav-link text-wrap d-inline-block w-100"> Data Insertion </a> <a href=#data-selection title="Data Selection" class="nav-link text-wrap d-inline-block w-100"> Data Selection </a> </nav> <a href=#usage-example_1 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> </nav> <a href=#tuple-t1-t2 title="Tuple(T1, T2, ...)" class="nav-link text-wrap d-inline-block w-100"> Tuple(T1, T2, ...) </a> <nav id=toc-toc-38 class="nav flex-column pl-2"> <a href=#creating-a-tuple title="Creating a tuple" class="nav-link text-wrap d-inline-block w-100"> Creating a tuple </a> <a href=#working-with-data-types_1 title="Working with data types" class="nav-link text-wrap d-inline-block w-100"> Working with data types </a> </nav> <a href=#data_type-nullable title=Nullable(TypeName) class="nav-link text-wrap d-inline-block w-100"> Nullable(TypeName) </a> <nav id=toc-toc-39 class="nav flex-column pl-2"> <a href=#storage-features title="Storage features" class="nav-link text-wrap d-inline-block w-100"> Storage features </a> <a href=#usage-example_2 title="Usage example" class="nav-link text-wrap d-inline-block w-100"> Usage example </a> </nav> <a href=#nested-data-structures title="Nested Data Structures" class="nav-link text-wrap d-inline-block w-100"> Nested Data Structures </a> <a href=#nested-name1-type1-name2-type2 title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-wrap d-inline-block w-100"> Nested(Name1 Type1, Name2 Type2, ...) </a> <a href=#special-data-types title="Special Data Types" class="nav-link text-wrap d-inline-block w-100"> Special Data Types </a> <a href=#expression title=Expression class="nav-link text-wrap d-inline-block w-100"> Expression </a> <a href=#set title=Set class="nav-link text-wrap d-inline-block w-100"> Set </a> <a href=#nothing title=Nothing class="nav-link text-wrap d-inline-block w-100"> Nothing </a> <a href=#domains title=Domains class="nav-link text-wrap d-inline-block w-100"> Domains </a> <nav id=toc-toc-46 class="nav flex-column pl-2"> <a href=#extra-features-of-domains title="Extra Features of Domains" class="nav-link text-wrap d-inline-block w-100"> Extra Features of Domains </a> <a href=#limitations title=Limitations class="nav-link text-wrap d-inline-block w-100"> Limitations </a> <a href=#ipv4 title=IPv4 class="nav-link text-wrap d-inline-block w-100"> IPv4 </a> <nav id=toc-toc-46-3 class="nav flex-column pl-2"> <a href=#basic-usage title="Basic Usage" class="nav-link text-wrap d-inline-block w-100"> Basic Usage </a> </nav> <a href=#ipv6 title=IPv6 class="nav-link text-wrap d-inline-block w-100"> IPv6 </a> <nav id=toc-toc-46-4 class="nav flex-column pl-2"> <a href=#basic-usage_1 title="Basic Usage" class="nav-link text-wrap d-inline-block w-100"> Basic Usage </a> </nav> </nav> <a href=#database-engines title="Database Engines" class="nav-link text-wrap d-inline-block w-100"> Database Engines </a> <a href=#mysql title=MySQL class="nav-link text-wrap d-inline-block w-100"> MySQL </a> <nav id=toc-toc-48 class="nav flex-column pl-2"> <a href=#creating-a-database title="Creating a Database" class="nav-link text-wrap d-inline-block w-100"> Creating a Database </a> <a href=#data-types-support title="Data Types Support" class="nav-link text-wrap d-inline-block w-100"> Data Types Support </a> </nav> <a href=#table_engines title="Table engines" class="nav-link text-wrap d-inline-block w-100"> Table engines </a> <nav id=toc-toc-49 class="nav flex-column pl-2"> <a href=#engine-families title="Engine Families" class="nav-link text-wrap d-inline-block w-100"> Engine Families </a> <nav id=toc-toc-49-1 class="nav flex-column pl-2"> <a href=#mergetree title=MergeTree class="nav-link text-wrap d-inline-block w-100"> MergeTree </a> <a href=#log title=Log class="nav-link text-wrap d-inline-block w-100"> Log </a> <a href=#intergation-engines title="Intergation engines" class="nav-link text-wrap d-inline-block w-100"> Intergation engines </a> <a href=#special-engines title="Special engines" class="nav-link text-wrap d-inline-block w-100"> Special engines </a> </nav> <a href=#table_engines-virtual_columns title="Virtual columns" class="nav-link text-wrap d-inline-block w-100"> Virtual columns </a> </nav> <a href=#table_engines-mergetree title=MergeTree class="nav-link text-wrap d-inline-block w-100"> MergeTree </a> <nav id=toc-toc-50 class="nav flex-column pl-2"> <a href=#table_engine-mergetree-creating-a-table title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <nav id=toc-toc-50-1 class="nav flex-column pl-2"> <a href=#query-clauses title="Query Clauses" class="nav-link text-wrap d-inline-block w-100"> Query Clauses </a> </nav> <a href=#data-storage title="Data Storage" class="nav-link text-wrap d-inline-block w-100"> Data Storage </a> <a href=#primary-keys-and-indexes-in-queries title="Primary Keys and Indexes in Queries" class="nav-link text-wrap d-inline-block w-100"> Primary Keys and Indexes in Queries </a> <nav id=toc-toc-50-3 class="nav flex-column pl-2"> <a href=#selecting-the-primary-key title="Selecting the Primary Key" class="nav-link text-wrap d-inline-block w-100"> Selecting the Primary Key </a> <a href=#choosing-a-primary-key-that-differs-from-the-sorting-key title="Choosing a Primary Key that Differs from the Sorting Key" class="nav-link text-wrap d-inline-block w-100"> Choosing a Primary Key that Differs from the Sorting Key </a> <a href=#use-of-indexes-and-partitions-in-queries title="Use of Indexes and Partitions in Queries" class="nav-link text-wrap d-inline-block w-100"> Use of Indexes and Partitions in Queries </a> <a href=#use-of-index-for-partially-monotonic-primary-keys title="Use of Index for Partially-Monotonic Primary Keys" class="nav-link text-wrap d-inline-block w-100"> Use of Index for Partially-Monotonic Primary Keys </a> <a href=#table_engine-mergetree-data_skipping-indexes title="Data Skipping Indexes (Experimental)" class="nav-link text-wrap d-inline-block w-100"> Data Skipping Indexes (Experimental) </a> <nav id=toc-toc-50-3-5 class="nav flex-column pl-2"> <a href=#available-types-of-indices title="Available Types of Indices" class="nav-link text-wrap d-inline-block w-100"> Available Types of Indices </a> <a href=#functions-support title="Functions Support" class="nav-link text-wrap d-inline-block w-100"> Functions Support </a> </nav> </nav> </nav> <a href=#table_engines-replication title="Data Replication" class="nav-link text-wrap d-inline-block w-100"> Data Replication </a> <nav id=toc-toc-51 class="nav flex-column pl-2"> <a href=#creating-replicated-tables title="Creating Replicated Tables" class="nav-link text-wrap d-inline-block w-100"> Creating Replicated Tables </a> <a href=#recovery-after-failures title="Recovery After Failures" class="nav-link text-wrap d-inline-block w-100"> Recovery After Failures </a> <a href=#recovery-after-complete-data-loss title="Recovery After Complete Data Loss" class="nav-link text-wrap d-inline-block w-100"> Recovery After Complete Data Loss </a> <a href=#converting-from-mergetree-to-replicatedmergetree title="Converting from MergeTree to ReplicatedMergeTree" class="nav-link text-wrap d-inline-block w-100"> Converting from MergeTree to ReplicatedMergeTree </a> <a href=#converting-from-replicatedmergetree-to-mergetree title="Converting from ReplicatedMergeTree to MergeTree" class="nav-link text-wrap d-inline-block w-100"> Converting from ReplicatedMergeTree to MergeTree </a> <a href=#recovery-when-metadata-in-the-zookeeper-cluster-is-lost-or-damaged title="Recovery When Metadata in The ZooKeeper Cluster is Lost or Damaged" class="nav-link text-wrap d-inline-block w-100"> Recovery When Metadata in The ZooKeeper Cluster is Lost or Damaged </a> </nav> <a href=#custom-partitioning-key title="Custom Partitioning Key" class="nav-link text-wrap d-inline-block w-100"> Custom Partitioning Key </a> <a href=#replacingmergetree title=ReplacingMergeTree class="nav-link text-wrap d-inline-block w-100"> ReplacingMergeTree </a> <nav id=toc-toc-53 class="nav flex-column pl-2"> <a href=#creating-a-table title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> </nav> <a href=#summingmergetree title=SummingMergeTree class="nav-link text-wrap d-inline-block w-100"> SummingMergeTree </a> <nav id=toc-toc-54 class="nav flex-column pl-2"> <a href=#creating-a-table_1 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#usage-example_3 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> <a href=#data-processing title="Data Processing" class="nav-link text-wrap d-inline-block w-100"> Data Processing </a> <nav id=toc-toc-54-3 class="nav flex-column pl-2"> <a href=#common-rules-for-summation title="Common rules for summation" class="nav-link text-wrap d-inline-block w-100"> Common rules for summation </a> <a href=#the-summation-in-the-aggregatefunction-columns title="The Summation in the AggregateFunction Columns" class="nav-link text-wrap d-inline-block w-100"> The Summation in the AggregateFunction Columns </a> <a href=#nested-structures title="Nested Structures" class="nav-link text-wrap d-inline-block w-100"> Nested Structures </a> </nav> </nav> <a href=#aggregatingmergetree title=AggregatingMergeTree class="nav-link text-wrap d-inline-block w-100"> AggregatingMergeTree </a> <nav id=toc-toc-55 class="nav flex-column pl-2"> <a href=#creating-a-table_2 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#select-and-insert title="SELECT and INSERT" class="nav-link text-wrap d-inline-block w-100"> SELECT and INSERT </a> <a href=#example-of-an-aggregated-materialized-view title="Example of an Aggregated Materialized View" class="nav-link text-wrap d-inline-block w-100"> Example of an Aggregated Materialized View </a> </nav> <a href=#table_engine-collapsingmergetree title=CollapsingMergeTree class="nav-link text-wrap d-inline-block w-100"> CollapsingMergeTree </a> <nav id=toc-toc-56 class="nav flex-column pl-2"> <a href=#creating-a-table_3 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#table_engine-collapsingmergetree-collapsing title=Collapsing class="nav-link text-wrap d-inline-block w-100"> Collapsing </a> <nav id=toc-toc-56-2 class="nav flex-column pl-2"> <a href=#data title=Data class="nav-link text-wrap d-inline-block w-100"> Data </a> <a href=#table_engine-collapsingmergetree-collapsing-algorithm title=Algorithm class="nav-link text-wrap d-inline-block w-100"> Algorithm </a> </nav> <a href=#example-of-use title="Example of use" class="nav-link text-wrap d-inline-block w-100"> Example of use </a> <a href=#example-of-another-approach title="Example of another approach" class="nav-link text-wrap d-inline-block w-100"> Example of another approach </a> </nav> <a href=#versionedcollapsingmergetree title=VersionedCollapsingMergeTree class="nav-link text-wrap d-inline-block w-100"> VersionedCollapsingMergeTree </a> <nav id=toc-toc-57 class="nav flex-column pl-2"> <a href=#creating-a-table_4 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#table_engines_versionedcollapsingmergetree title=Collapsing class="nav-link text-wrap d-inline-block w-100"> Collapsing </a> <nav id=toc-toc-57-2 class="nav flex-column pl-2"> <a href=#data_1 title=Data class="nav-link text-wrap d-inline-block w-100"> Data </a> <a href=#table_engines-versionedcollapsingmergetree-algorithm title=Algorithm class="nav-link text-wrap d-inline-block w-100"> Algorithm </a> </nav> <a href=#selecting-data_1 title="Selecting Data" class="nav-link text-wrap d-inline-block w-100"> Selecting Data </a> <a href=#example-of-use_1 title="Example of Use" class="nav-link text-wrap d-inline-block w-100"> Example of Use </a> </nav> <a href=#graphitemergetree title=GraphiteMergeTree class="nav-link text-wrap d-inline-block w-100"> GraphiteMergeTree </a> <nav id=toc-toc-58 class="nav flex-column pl-2"> <a href=#creating-a-table_5 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#rollup-configuration title="Rollup configuration" class="nav-link text-wrap d-inline-block w-100"> Rollup configuration </a> <nav id=toc-toc-58-2 class="nav flex-column pl-2"> <a href=#required-columns title="Required Columns" class="nav-link text-wrap d-inline-block w-100"> Required Columns </a> <a href=#patterns title=Patterns class="nav-link text-wrap d-inline-block w-100"> Patterns </a> <a href=#configuration-example title="Configuration Example" class="nav-link text-wrap d-inline-block w-100"> Configuration Example </a> </nav> </nav> <a href=#log-engine-family title="Log Engine Family" class="nav-link text-wrap d-inline-block w-100"> Log Engine Family </a> <nav id=toc-toc-59 class="nav flex-column pl-2"> <a href=#common-properties title="Common properties" class="nav-link text-wrap d-inline-block w-100"> Common properties </a> <a href=#differences title=Differences class="nav-link text-wrap d-inline-block w-100"> Differences </a> </nav> <a href=#stripelog title=StripeLog class="nav-link text-wrap d-inline-block w-100"> StripeLog </a> <nav id=toc-toc-60 class="nav flex-column pl-2"> <a href=#table_engines-stripelog-creating-a-table title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#table_engines-stripelog-writing-the-data title="Writing the Data" class="nav-link text-wrap d-inline-block w-100"> Writing the Data </a> <a href=#table_engines-stripelog-reading-the-data title="Reading the Data" class="nav-link text-wrap d-inline-block w-100"> Reading the Data </a> <a href=#table_engines-stripelog-example-of-use title="Example of Use" class="nav-link text-wrap d-inline-block w-100"> Example of Use </a> </nav> <a href=#log_1 title=Log class="nav-link text-wrap d-inline-block w-100"> Log </a> <a href=#tinylog title=TinyLog class="nav-link text-wrap d-inline-block w-100"> TinyLog </a> <a href=#kafka title=Kafka class="nav-link text-wrap d-inline-block w-100"> Kafka </a> <nav id=toc-toc-63 class="nav flex-column pl-2"> <a href=#table_engine-kafka-creating-a-table title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#description title=Description class="nav-link text-wrap d-inline-block w-100"> Description </a> <a href=#configuration title=Configuration class="nav-link text-wrap d-inline-block w-100"> Configuration </a> <a href=#virtual-columns title="Virtual Columns" class="nav-link text-wrap d-inline-block w-100"> Virtual Columns </a> </nav> <a href=#mysql_1 title=MySQL class="nav-link text-wrap d-inline-block w-100"> MySQL </a> <nav id=toc-toc-64 class="nav flex-column pl-2"> <a href=#creating-a-table_6 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#usage-example_4 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> <a href=#see-also title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#table_engine-jdbc title=JDBC class="nav-link text-wrap d-inline-block w-100"> JDBC </a> <nav id=toc-toc-65 class="nav flex-column pl-2"> <a href=#creating-a-table_7 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#usage-example_5 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> <a href=#see-also_1 title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#table_engine-odbc title=ODBC class="nav-link text-wrap d-inline-block w-100"> ODBC </a> <nav id=toc-toc-66 class="nav flex-column pl-2"> <a href=#creating-a-table_8 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#usage-example_6 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> <a href=#see-also_2 title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#table_engines-hdfs title=HDFS class="nav-link text-wrap d-inline-block w-100"> HDFS </a> <nav id=toc-toc-67 class="nav flex-column pl-2"> <a href=#usage_1 title=Usage class="nav-link text-wrap d-inline-block w-100"> Usage </a> <a href=#implementation-details title="Implementation Details" class="nav-link text-wrap d-inline-block w-100"> Implementation Details </a> </nav> <a href=#distributed title=Distributed class="nav-link text-wrap d-inline-block w-100"> Distributed </a> <a href=#external-data-for-query-processing title="External Data for Query Processing" class="nav-link text-wrap d-inline-block w-100"> External Data for Query Processing </a> <a href=#dictionary title=Dictionary class="nav-link text-wrap d-inline-block w-100"> Dictionary </a> <a href=#merge title=Merge class="nav-link text-wrap d-inline-block w-100"> Merge </a> <nav id=toc-toc-71 class="nav flex-column pl-2"> <a href=#virtual-columns_1 title="Virtual Columns" class="nav-link text-wrap d-inline-block w-100"> Virtual Columns </a> </nav> <a href=#table_engines-file title=File class="nav-link text-wrap d-inline-block w-100"> File </a> <nav id=toc-toc-72 class="nav flex-column pl-2"> <a href=#usage-in-clickhouse-server title="Usage in ClickHouse Server" class="nav-link text-wrap d-inline-block w-100"> Usage in ClickHouse Server </a> <a href=#usage-in-clickhouse-local title="Usage in Clickhouse-local" class="nav-link text-wrap d-inline-block w-100"> Usage in Clickhouse-local </a> <a href=#details-of-implementation title="Details of Implementation" class="nav-link text-wrap d-inline-block w-100"> Details of Implementation </a> </nav> <a href=#null_1 title=Null class="nav-link text-wrap d-inline-block w-100"> Null </a> <a href=#set_1 title=Set class="nav-link text-wrap d-inline-block w-100"> Set </a> <a href=#join title=Join class="nav-link text-wrap d-inline-block w-100"> Join </a> <nav id=toc-toc-75 class="nav flex-column pl-2"> <a href=#creating-a-table_9 title="Creating a Table" class="nav-link text-wrap d-inline-block w-100"> Creating a Table </a> <a href=#table-usage title="Table Usage" class="nav-link text-wrap d-inline-block w-100"> Table Usage </a> <nav id=toc-toc-75-2 class="nav flex-column pl-2"> <a href=#example_2 title=Example class="nav-link text-wrap d-inline-block w-100"> Example </a> <a href=#selecting-and-inserting-data title="Selecting and Inserting Data" class="nav-link text-wrap d-inline-block w-100"> Selecting and Inserting Data </a> <a href=#limitations-and-settings title="Limitations and Settings" class="nav-link text-wrap d-inline-block w-100"> Limitations and Settings </a> </nav> <a href=#data-storage_1 title="Data Storage" class="nav-link text-wrap d-inline-block w-100"> Data Storage </a> </nav> <a href=#table_engines-url title="URL(URL, Format)" class="nav-link text-wrap d-inline-block w-100"> URL(URL, Format) </a> <nav id=toc-toc-76 class="nav flex-column pl-2"> <a href=#using-the-engine-in-the-clickhouse-server title="Using the engine in the ClickHouse server" class="nav-link text-wrap d-inline-block w-100"> Using the engine in the ClickHouse server </a> <a href=#details-of-implementation_1 title="Details of Implementation" class="nav-link text-wrap d-inline-block w-100"> Details of Implementation </a> </nav> <a href=#table_engines-view title=View class="nav-link text-wrap d-inline-block w-100"> View </a> <a href=#materializedview title=MaterializedView class="nav-link text-wrap d-inline-block w-100"> MaterializedView </a> <a href=#memory title=Memory class="nav-link text-wrap d-inline-block w-100"> Memory </a> <a href=#buffer title=Buffer class="nav-link text-wrap d-inline-block w-100"> Buffer </a> <a href=#sql-reference title="SQL Reference" class="nav-link text-wrap d-inline-block w-100"> SQL Reference </a> <a href=#select-queries-syntax title="SELECT Queries Syntax" class="nav-link text-wrap d-inline-block w-100"> SELECT Queries Syntax </a> <nav id=toc-toc-82 class="nav flex-column pl-2"> <a href=#with-clause title="WITH Clause" class="nav-link text-wrap d-inline-block w-100"> WITH Clause </a> <a href=#select-from title="FROM Clause" class="nav-link text-wrap d-inline-block w-100"> FROM Clause </a> <a href=#select-sample-clause title="SAMPLE Clause" class="nav-link text-wrap d-inline-block w-100"> SAMPLE Clause </a> <nav id=toc-toc-82-3 class="nav flex-column pl-2"> <a href=#select-sample-k title="SAMPLE k" class="nav-link text-wrap d-inline-block w-100"> SAMPLE k </a> <a href=#select-sample-n title="SAMPLE n" class="nav-link text-wrap d-inline-block w-100"> SAMPLE n </a> <a href=#select-sample-offset title="SAMPLE k OFFSET m" class="nav-link text-wrap d-inline-block w-100"> SAMPLE k OFFSET m </a> </nav> <a href=#select-array-join-clause title="ARRAY JOIN Clause" class="nav-link text-wrap d-inline-block w-100"> ARRAY JOIN Clause </a> <nav id=toc-toc-82-4 class="nav flex-column pl-2"> <a href=#using-aliases title="Using Aliases" class="nav-link text-wrap d-inline-block w-100"> Using Aliases </a> <a href=#array-join-with-nested-data-structure title="ARRAY JOIN With Nested Data Structure" class="nav-link text-wrap d-inline-block w-100"> ARRAY JOIN With Nested Data Structure </a> </nav> <a href=#select-join title="JOIN Clause" class="nav-link text-wrap d-inline-block w-100"> JOIN Clause </a> <nav id=toc-toc-82-5 class="nav flex-column pl-2"> <a href=#select-join-types title="Supported Types of JOIN" class="nav-link text-wrap d-inline-block w-100"> Supported Types of JOIN </a> <a href=#multiple-join title="Multiple JOIN" class="nav-link text-wrap d-inline-block w-100"> Multiple JOIN </a> <a href=#select-join-strictness title=Strictness class="nav-link text-wrap d-inline-block w-100"> Strictness </a> </nav> <a href=#constraints_1 title=Constraints class="nav-link text-wrap d-inline-block w-100"> Constraints </a> <a href=#insert_query_insert-select title="Inserting The Results of SELECT" class="nav-link text-wrap d-inline-block w-100"> Inserting The Results of SELECT </a> <a href=#performance-considerations title="Performance Considerations" class="nav-link text-wrap d-inline-block w-100"> Performance Considerations </a> </nav> <a href=#create-queries title="CREATE Queries" class="nav-link text-wrap d-inline-block w-100"> CREATE Queries </a> <nav id=toc-toc-83 class="nav flex-column pl-2"> <a href=#query_language-create-database title="CREATE DATABASE" class="nav-link text-wrap d-inline-block w-100"> CREATE DATABASE </a> <nav id=toc-toc-83-1 class="nav flex-column pl-2"> <a href=#clauses title=Clauses class="nav-link text-wrap d-inline-block w-100"> Clauses </a> </nav> <a href=#create-table-query title="CREATE TABLE" class="nav-link text-wrap d-inline-block w-100"> CREATE TABLE </a> <nav id=toc-toc-83-2 class="nav flex-column pl-2"> <a href=#create-default-values title="Default Values" class="nav-link text-wrap d-inline-block w-100"> Default Values </a> <a href=#constraints title=Constraints class="nav-link text-wrap d-inline-block w-100"> Constraints </a> <a href=#ttl-expression title="TTL expression" class="nav-link text-wrap d-inline-block w-100"> TTL expression </a> </nav> <a href=#column-compression-codecs title="Column Compression Codecs" class="nav-link text-wrap d-inline-block w-100"> Column Compression Codecs </a> <nav id=toc-toc-83-3 class="nav flex-column pl-2"> <a href=#create-query-specialized-codecs title="Specialized codecs" class="nav-link text-wrap d-inline-block w-100"> Specialized codecs </a> <a href=#create-query-common-purpose-codecs title="Common purpose codecs" class="nav-link text-wrap d-inline-block w-100"> Common purpose codecs </a> </nav> <a href=#temporary-tables title="Temporary Tables" class="nav-link text-wrap d-inline-block w-100"> Temporary Tables </a> <a href=#distributed-ddl-queries-on-cluster-clause title="Distributed DDL queries (ON CLUSTER clause)" class="nav-link text-wrap d-inline-block w-100"> Distributed DDL queries (ON CLUSTER clause) </a> <a href=#create-view title="CREATE VIEW" class="nav-link text-wrap d-inline-block w-100"> CREATE VIEW </a> <a href=#query_language_queries_alter title=ALTER class="nav-link text-wrap d-inline-block w-100"> ALTER </a> <nav id=toc-toc-83-7 class="nav flex-column pl-2"> <a href=#column-manipulations title="Column Manipulations" class="nav-link text-wrap d-inline-block w-100"> Column Manipulations </a> <nav id=toc-toc-83-7-1 class="nav flex-column pl-2"> <a href=#alter_add-column title="ADD COLUMN" class="nav-link text-wrap d-inline-block w-100"> ADD COLUMN </a> <a href=#alter_drop-column title="DROP COLUMN" class="nav-link text-wrap d-inline-block w-100"> DROP COLUMN </a> <a href=#alter_clear-column title="CLEAR COLUMN" class="nav-link text-wrap d-inline-block w-100"> CLEAR COLUMN </a> <a href=#alter_comment-column title="COMMENT COLUMN" class="nav-link text-wrap d-inline-block w-100"> COMMENT COLUMN </a> <a href=#alter_modify-column title="MODIFY COLUMN" class="nav-link text-wrap d-inline-block w-100"> MODIFY COLUMN </a> <a href=#alter-query-limitations title="ALTER Query Limitations" class="nav-link text-wrap d-inline-block w-100"> ALTER Query Limitations </a> </nav> <a href=#manipulations-with-key-expressions title="Manipulations With Key Expressions" class="nav-link text-wrap d-inline-block w-100"> Manipulations With Key Expressions </a> <a href=#manipulations-with-data-skipping-indices title="Manipulations With Data Skipping Indices" class="nav-link text-wrap d-inline-block w-100"> Manipulations With Data Skipping Indices </a> <a href=#manipulations-with-constraints title="Manipulations with constraints" class="nav-link text-wrap d-inline-block w-100"> Manipulations with constraints </a> <a href=#alter_manipulations-with-partitions title="Manipulations With Partitions and Parts" class="nav-link text-wrap d-inline-block w-100"> Manipulations With Partitions and Parts </a> <nav id=toc-toc-83-7-5 class="nav flex-column pl-2"> <a href=#alter_detach-partition title="DETACH PARTITION" class="nav-link text-wrap d-inline-block w-100"> DETACH PARTITION </a> <a href=#alter_drop-partition title="DROP PARTITION" class="nav-link text-wrap d-inline-block w-100"> DROP PARTITION </a> <a href=#alter_drop-detached title="DROP DETACHED PARTITION|PART" class="nav-link text-wrap d-inline-block w-100"> DROP DETACHED PARTITION|PART </a> <a href=#alter_attach-partition title="ATTACH PARTITION|PART" class="nav-link text-wrap d-inline-block w-100"> ATTACH PARTITION|PART </a> <a href=#alter_replace-partition title="REPLACE PARTITION" class="nav-link text-wrap d-inline-block w-100"> REPLACE PARTITION </a> <a href=#alter_clear-column-partition title="CLEAR COLUMN IN PARTITION" class="nav-link text-wrap d-inline-block w-100"> CLEAR COLUMN IN PARTITION </a> <a href=#alter_freeze-partition title="FREEZE PARTITION" class="nav-link text-wrap d-inline-block w-100"> FREEZE PARTITION </a> <a href=#alter_clear-index-partition title="CLEAR INDEX IN PARTITION" class="nav-link text-wrap d-inline-block w-100"> CLEAR INDEX IN PARTITION </a> <a href=#alter_fetch-partition title="FETCH PARTITION" class="nav-link text-wrap d-inline-block w-100"> FETCH PARTITION </a> <a href=#alter-how-to-specify-part-expr title="How To Set Partition Expression" class="nav-link text-wrap d-inline-block w-100"> How To Set Partition Expression </a> </nav> <a href=#synchronicity-of-alter-queries title="Synchronicity of ALTER Queries" class="nav-link text-wrap d-inline-block w-100"> Synchronicity of ALTER Queries </a> <a href=#alter-mutations title=Mutations class="nav-link text-wrap d-inline-block w-100"> Mutations </a> </nav> </nav> <a href=#query_language-system title="SYSTEM Queries" class="nav-link text-wrap d-inline-block w-100"> SYSTEM Queries </a> <nav id=toc-toc-84 class="nav flex-column pl-2"> <a href=#query_language-system-reload-dictionaries title="RELOAD DICTIONARIES" class="nav-link text-wrap d-inline-block w-100"> RELOAD DICTIONARIES </a> <a href=#query_language-system-reload-dictionary title="RELOAD DICTIONARY dictionary_name" class="nav-link text-wrap d-inline-block w-100"> RELOAD DICTIONARY dictionary_name </a> <a href=#query_language-system-drop-dns-cache title="DROP DNS CACHE" class="nav-link text-wrap d-inline-block w-100"> DROP DNS CACHE </a> <a href=#query_language-system-drop-marks-cache title="DROP MARKS CACHE" class="nav-link text-wrap d-inline-block w-100"> DROP MARKS CACHE </a> <a href=#query_language-system-flush_logs title="FLUSH LOGS" class="nav-link text-wrap d-inline-block w-100"> FLUSH LOGS </a> <a href=#query_language-system-reload-config title="RELOAD CONFIG" class="nav-link text-wrap d-inline-block w-100"> RELOAD CONFIG </a> <a href=#query_language-system-shutdown title=SHUTDOWN class="nav-link text-wrap d-inline-block w-100"> SHUTDOWN </a> <a href=#query_language-system-kill title=KILL class="nav-link text-wrap d-inline-block w-100"> KILL </a> <a href=#query_language-system-distributed title="Managing Distributed Tables" class="nav-link text-wrap d-inline-block w-100"> Managing Distributed Tables </a> <nav id=toc-toc-84-9 class="nav flex-column pl-2"> <a href=#query_language-system-stop-distributed-sends title="STOP DISTRIBUTED SENDS" class="nav-link text-wrap d-inline-block w-100"> STOP DISTRIBUTED SENDS </a> <a href=#query_language-system-flush-distributed title="FLUSH DISTRIBUTED" class="nav-link text-wrap d-inline-block w-100"> FLUSH DISTRIBUTED </a> <a href=#query_language-system-start-distributed-sends title="START DISTRIBUTED SENDS" class="nav-link text-wrap d-inline-block w-100"> START DISTRIBUTED SENDS </a> </nav> </nav> <a href=#miscellaneous-queries title="Miscellaneous Queries" class="nav-link text-wrap d-inline-block w-100"> Miscellaneous Queries </a> <nav id=toc-toc-85 class="nav flex-column pl-2"> <a href=#attach title=ATTACH class="nav-link text-wrap d-inline-block w-100"> ATTACH </a> <a href=#check-table title="CHECK TABLE" class="nav-link text-wrap d-inline-block w-100"> CHECK TABLE </a> <a href=#misc-describe-table title="DESCRIBE TABLE" class="nav-link text-wrap d-inline-block w-100"> DESCRIBE TABLE </a> <a href=#detach title=DETACH class="nav-link text-wrap d-inline-block w-100"> DETACH </a> <a href=#drop title=DROP class="nav-link text-wrap d-inline-block w-100"> DROP </a> <a href=#exists title=EXISTS class="nav-link text-wrap d-inline-block w-100"> EXISTS </a> <a href=#kill-query title="KILL QUERY" class="nav-link text-wrap d-inline-block w-100"> KILL QUERY </a> <a href=#kill-mutation title="KILL MUTATION" class="nav-link text-wrap d-inline-block w-100"> KILL MUTATION </a> <a href=#misc_operations-optimize title=OPTIMIZE class="nav-link text-wrap d-inline-block w-100"> OPTIMIZE </a> <a href=#misc_operations-rename title=RENAME class="nav-link text-wrap d-inline-block w-100"> RENAME </a> <a href=#query-set title=SET class="nav-link text-wrap d-inline-block w-100"> SET </a> <a href=#show-create-table title="SHOW CREATE TABLE" class="nav-link text-wrap d-inline-block w-100"> SHOW CREATE TABLE </a> <a href=#show-databases title="SHOW DATABASES" class="nav-link text-wrap d-inline-block w-100"> SHOW DATABASES </a> <a href=#show-processlist title="SHOW PROCESSLIST" class="nav-link text-wrap d-inline-block w-100"> SHOW PROCESSLIST </a> <a href=#show-tables title="SHOW TABLES" class="nav-link text-wrap d-inline-block w-100"> SHOW TABLES </a> <a href=#truncate title=TRUNCATE class="nav-link text-wrap d-inline-block w-100"> TRUNCATE </a> <a href=#use title=USE class="nav-link text-wrap d-inline-block w-100"> USE </a> </nav> <a href=#functions title=Functions class="nav-link text-wrap d-inline-block w-100"> Functions </a> <nav id=toc-toc-86 class="nav flex-column pl-2"> <a href=#strong-typing title="Strong typing" class="nav-link text-wrap d-inline-block w-100"> Strong typing </a> <a href=#common-subexpression-elimination title="Common subexpression elimination" class="nav-link text-wrap d-inline-block w-100"> Common subexpression elimination </a> <a href=#types-of-results title="Types of results" class="nav-link text-wrap d-inline-block w-100"> Types of results </a> <a href=#constants title=Constants class="nav-link text-wrap d-inline-block w-100"> Constants </a> <a href=#null-processing title="NULL processing" class="nav-link text-wrap d-inline-block w-100"> NULL processing </a> <a href=#constancy title=Constancy class="nav-link text-wrap d-inline-block w-100"> Constancy </a> <a href=#error-handling title="Error handling" class="nav-link text-wrap d-inline-block w-100"> Error handling </a> <a href=#evaluation-of-argument-expressions title="Evaluation of argument expressions" class="nav-link text-wrap d-inline-block w-100"> Evaluation of argument expressions </a> <a href=#performing-functions-for-distributed-query-processing title="Performing functions for distributed query processing" class="nav-link text-wrap d-inline-block w-100"> Performing functions for distributed query processing </a> </nav> <a href=#arithmetic-functions title="Arithmetic functions" class="nav-link text-wrap d-inline-block w-100"> Arithmetic functions </a> <nav id=toc-toc-87 class="nav flex-column pl-2"> <a href=#plus-a-b-a-b-operator title="plus(a, b), a + b operator" class="nav-link text-wrap d-inline-block w-100"> plus(a, b), a + b operator </a> <a href=#minus-a-b-a-b-operator title="minus(a, b), a - b operator" class="nav-link text-wrap d-inline-block w-100"> minus(a, b), a - b operator </a> <a href=#multiply-a-b-a-b-operator title="multiply(a, b), a * b operator" class="nav-link text-wrap d-inline-block w-100"> multiply(a, b), a * b operator </a> <a href=#divide-a-b-a-b-operator title="divide(a, b), a / b operator" class="nav-link text-wrap d-inline-block w-100"> divide(a, b), a / b operator </a> <a href=#intdiv-a-b title="intDiv(a, b)" class="nav-link text-wrap d-inline-block w-100"> intDiv(a, b) </a> <a href=#intdivorzero-a-b title="intDivOrZero(a, b)" class="nav-link text-wrap d-inline-block w-100"> intDivOrZero(a, b) </a> <a href=#modulo-a-b-a-b-operator title="modulo(a, b), a % b operator" class="nav-link text-wrap d-inline-block w-100"> modulo(a, b), a % b operator </a> <a href=#negate-a-a-operator title="negate(a), -a operator" class="nav-link text-wrap d-inline-block w-100"> negate(a), -a operator </a> <a href=#arithm_func-abs title=abs(a) class="nav-link text-wrap d-inline-block w-100"> abs(a) </a> <a href=#gcd-a-b title="gcd(a, b)" class="nav-link text-wrap d-inline-block w-100"> gcd(a, b) </a> <a href=#lcm-a-b title="lcm(a, b)" class="nav-link text-wrap d-inline-block w-100"> lcm(a, b) </a> </nav> <a href=#comparison-functions title="Comparison functions" class="nav-link text-wrap d-inline-block w-100"> Comparison functions </a> <nav id=toc-toc-88 class="nav flex-column pl-2"> <a href=#function-equals title="equals, a = b and a == b operator" class="nav-link text-wrap d-inline-block w-100"> equals, a = b and a == b operator </a> <a href=#function-notequals title="notEquals, a ! operator= b and a &lt;&gt; b" class="nav-link text-wrap d-inline-block w-100"> notEquals, a ! operator= b and a &amp;lt;&amp;gt; b </a> <a href=#function-less title="less, &lt; operator" class="nav-link text-wrap d-inline-block w-100"> less, &amp;lt; operator </a> <a href=#function-greater title="greater, &gt; operator" class="nav-link text-wrap d-inline-block w-100"> greater, &amp;gt; operator </a> <a href=#function-lessorequals title="lessOrEquals, &lt;= operator" class="nav-link text-wrap d-inline-block w-100"> lessOrEquals, &amp;lt;= operator </a> <a href=#function-greaterorequals title="greaterOrEquals, &gt;= operator" class="nav-link text-wrap d-inline-block w-100"> greaterOrEquals, &amp;gt;= operator </a> </nav> <a href=#logical-functions title="Logical functions" class="nav-link text-wrap d-inline-block w-100"> Logical functions </a> <nav id=toc-toc-89 class="nav flex-column pl-2"> <a href=#and-and-operator title="and, AND operator" class="nav-link text-wrap d-inline-block w-100"> and, AND operator </a> <a href=#or-or-operator title="or, OR operator" class="nav-link text-wrap d-inline-block w-100"> or, OR operator </a> <a href=#not-not-operator title="not, NOT operator" class="nav-link text-wrap d-inline-block w-100"> not, NOT operator </a> <a href=#xor title=xor class="nav-link text-wrap d-inline-block w-100"> xor </a> </nav> <a href=#type-conversion-functions title="Type Conversion Functions" class="nav-link text-wrap d-inline-block w-100"> Type Conversion Functions </a> <nav id=toc-toc-90 class="nav flex-column pl-2"> <a href=#toint-8-16-32-64 title=toInt(8|16|32|64) class="nav-link text-wrap d-inline-block w-100"> toInt(8|16|32|64) </a> <a href=#toint-8-16-32-64-orzero title=toInt(8|16|32|64)OrZero class="nav-link text-wrap d-inline-block w-100"> toInt(8|16|32|64)OrZero </a> <a href=#toint-8-16-32-64-ornull title=toInt(8|16|32|64)OrNull class="nav-link text-wrap d-inline-block w-100"> toInt(8|16|32|64)OrNull </a> <a href=#touint-8-16-32-64 title=toUInt(8|16|32|64) class="nav-link text-wrap d-inline-block w-100"> toUInt(8|16|32|64) </a> <a href=#touint-8-16-32-64-orzero title=toUInt(8|16|32|64)OrZero class="nav-link text-wrap d-inline-block w-100"> toUInt(8|16|32|64)OrZero </a> <a href=#touint-8-16-32-64-ornull title=toUInt(8|16|32|64)OrNull class="nav-link text-wrap d-inline-block w-100"> toUInt(8|16|32|64)OrNull </a> <a href=#tofloat-32-64 title=toFloat(32|64) class="nav-link text-wrap d-inline-block w-100"> toFloat(32|64) </a> <a href=#tofloat-32-64-orzero title=toFloat(32|64)OrZero class="nav-link text-wrap d-inline-block w-100"> toFloat(32|64)OrZero </a> <a href=#tofloat-32-64-ornull title=toFloat(32|64)OrNull class="nav-link text-wrap d-inline-block w-100"> toFloat(32|64)OrNull </a> <a href=#todate title=toDate class="nav-link text-wrap d-inline-block w-100"> toDate </a> <a href=#todateorzero title=toDateOrZero class="nav-link text-wrap d-inline-block w-100"> toDateOrZero </a> <a href=#todateornull title=toDateOrNull class="nav-link text-wrap d-inline-block w-100"> toDateOrNull </a> <a href=#todatetime title=toDateTime class="nav-link text-wrap d-inline-block w-100"> toDateTime </a> <a href=#todatetimeorzero title=toDateTimeOrZero class="nav-link text-wrap d-inline-block w-100"> toDateTimeOrZero </a> <a href=#todatetimeornull title=toDateTimeOrNull class="nav-link text-wrap d-inline-block w-100"> toDateTimeOrNull </a> <a href=#todecimal-32-64-128 title=toDecimal(32|64|128) class="nav-link text-wrap d-inline-block w-100"> toDecimal(32|64|128) </a> <a href=#todecimal-32-64-128-ornull title=toDecimal(32|64|128)OrNull class="nav-link text-wrap d-inline-block w-100"> toDecimal(32|64|128)OrNull </a> <a href=#todecimal-32-64-128-orzero title=toDecimal(32|64|128)OrZero class="nav-link text-wrap d-inline-block w-100"> toDecimal(32|64|128)OrZero </a> <a href=#tostring title=toString class="nav-link text-wrap d-inline-block w-100"> toString </a> <a href=#tofixedstring-s-n title="toFixedString(s, N)" class="nav-link text-wrap d-inline-block w-100"> toFixedString(s, N) </a> <a href=#tostringcuttozero-s title=toStringCutToZero(s) class="nav-link text-wrap d-inline-block w-100"> toStringCutToZero(s) </a> <a href=#reinterpretasuint-8-16-32-64 title=reinterpretAsUInt(8|16|32|64) class="nav-link text-wrap d-inline-block w-100"> reinterpretAsUInt(8|16|32|64) </a> <a href=#reinterpretasint-8-16-32-64 title=reinterpretAsInt(8|16|32|64) class="nav-link text-wrap d-inline-block w-100"> reinterpretAsInt(8|16|32|64) </a> <a href=#reinterpretasfloat-32-64 title=reinterpretAsFloat(32|64) class="nav-link text-wrap d-inline-block w-100"> reinterpretAsFloat(32|64) </a> <a href=#reinterpretasdate title=reinterpretAsDate class="nav-link text-wrap d-inline-block w-100"> reinterpretAsDate </a> <a href=#reinterpretasdatetime title=reinterpretAsDateTime class="nav-link text-wrap d-inline-block w-100"> reinterpretAsDateTime </a> <a href=#type_conversion_functions-reinterpretAsString title=reinterpretAsString class="nav-link text-wrap d-inline-block w-100"> reinterpretAsString </a> <a href=#reinterpretasfixedstring title=reinterpretAsFixedString class="nav-link text-wrap d-inline-block w-100"> reinterpretAsFixedString </a> <a href=#type_conversion_function-cast title="CAST(x, t)" class="nav-link text-wrap d-inline-block w-100"> CAST(x, t) </a> <a href=#tointerval-year-quarter-month-week-day-hour-minute-second title=toInterval(Year|Quarter|Month|Week|Day|Hour|Minute|Second) class="nav-link text-wrap d-inline-block w-100"> toInterval(Year|Quarter|Month|Week|Day|Hour|Minute|Second) </a> <a href=#type_conversion_functions-parsedatetimebesteffort title=parseDateTimeBestEffort class="nav-link text-wrap d-inline-block w-100"> parseDateTimeBestEffort </a> <a href=#parsedatetimebesteffortornull title=parseDateTimeBestEffortOrNull class="nav-link text-wrap d-inline-block w-100"> parseDateTimeBestEffortOrNull </a> <a href=#parsedatetimebesteffortorzero title=parseDateTimeBestEffortOrZero class="nav-link text-wrap d-inline-block w-100"> parseDateTimeBestEffortOrZero </a> </nav> <a href=#functions-for-working-with-dates-and-times title="Functions for working with dates and times" class="nav-link text-wrap d-inline-block w-100"> Functions for working with dates and times </a> <nav id=toc-toc-91 class="nav flex-column pl-2"> <a href=#totimezone title=toTimeZone class="nav-link text-wrap d-inline-block w-100"> toTimeZone </a> <a href=#toyear title=toYear class="nav-link text-wrap d-inline-block w-100"> toYear </a> <a href=#toquarter title=toQuarter class="nav-link text-wrap d-inline-block w-100"> toQuarter </a> <a href=#tomonth title=toMonth class="nav-link text-wrap d-inline-block w-100"> toMonth </a> <a href=#todayofyear title=toDayOfYear class="nav-link text-wrap d-inline-block w-100"> toDayOfYear </a> <a href=#todayofmonth title=toDayOfMonth class="nav-link text-wrap d-inline-block w-100"> toDayOfMonth </a> <a href=#todayofweek title=toDayOfWeek class="nav-link text-wrap d-inline-block w-100"> toDayOfWeek </a> <a href=#tohour title=toHour class="nav-link text-wrap d-inline-block w-100"> toHour </a> <a href=#tominute title=toMinute class="nav-link text-wrap d-inline-block w-100"> toMinute </a> <a href=#tosecond title=toSecond class="nav-link text-wrap d-inline-block w-100"> toSecond </a> <a href=#tounixtimestamp title=toUnixTimestamp class="nav-link text-wrap d-inline-block w-100"> toUnixTimestamp </a> <a href=#tostartofyear title=toStartOfYear class="nav-link text-wrap d-inline-block w-100"> toStartOfYear </a> <a href=#tostartofisoyear title=toStartOfISOYear class="nav-link text-wrap d-inline-block w-100"> toStartOfISOYear </a> <a href=#tostartofquarter title=toStartOfQuarter class="nav-link text-wrap d-inline-block w-100"> toStartOfQuarter </a> <a href=#tostartofmonth title=toStartOfMonth class="nav-link text-wrap d-inline-block w-100"> toStartOfMonth </a> <a href=#tomonday title=toMonday class="nav-link text-wrap d-inline-block w-100"> toMonday </a> <a href=#tostartofweek-t-mode title=toStartOfWeek(t[,mode]) class="nav-link text-wrap d-inline-block w-100"> toStartOfWeek(t[,mode]) </a> <a href=#tostartofday title=toStartOfDay class="nav-link text-wrap d-inline-block w-100"> toStartOfDay </a> <a href=#tostartofhour title=toStartOfHour class="nav-link text-wrap d-inline-block w-100"> toStartOfHour </a> <a href=#tostartofminute title=toStartOfMinute class="nav-link text-wrap d-inline-block w-100"> toStartOfMinute </a> <a href=#tostartoffiveminute title=toStartOfFiveMinute class="nav-link text-wrap d-inline-block w-100"> toStartOfFiveMinute </a> <a href=#tostartoftenminutes title=toStartOfTenMinutes class="nav-link text-wrap d-inline-block w-100"> toStartOfTenMinutes </a> <a href=#tostartoffifteenminutes title=toStartOfFifteenMinutes class="nav-link text-wrap d-inline-block w-100"> toStartOfFifteenMinutes </a> <a href=#tostartofinterval-time-or-data-interval-x-unit-time-zone title="toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone])" class="nav-link text-wrap d-inline-block w-100"> toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone]) </a> <a href=#totime title=toTime class="nav-link text-wrap d-inline-block w-100"> toTime </a> <a href=#torelativeyearnum title=toRelativeYearNum class="nav-link text-wrap d-inline-block w-100"> toRelativeYearNum </a> <a href=#torelativequarternum title=toRelativeQuarterNum class="nav-link text-wrap d-inline-block w-100"> toRelativeQuarterNum </a> <a href=#torelativemonthnum title=toRelativeMonthNum class="nav-link text-wrap d-inline-block w-100"> toRelativeMonthNum </a> <a href=#torelativeweeknum title=toRelativeWeekNum class="nav-link text-wrap d-inline-block w-100"> toRelativeWeekNum </a> <a href=#torelativedaynum title=toRelativeDayNum class="nav-link text-wrap d-inline-block w-100"> toRelativeDayNum </a> <a href=#torelativehournum title=toRelativeHourNum class="nav-link text-wrap d-inline-block w-100"> toRelativeHourNum </a> <a href=#torelativeminutenum title=toRelativeMinuteNum class="nav-link text-wrap d-inline-block w-100"> toRelativeMinuteNum </a> <a href=#torelativesecondnum title=toRelativeSecondNum class="nav-link text-wrap d-inline-block w-100"> toRelativeSecondNum </a> <a href=#toisoyear title=toISOYear class="nav-link text-wrap d-inline-block w-100"> toISOYear </a> <a href=#toisoweek title=toISOWeek class="nav-link text-wrap d-inline-block w-100"> toISOWeek </a> <a href=#toweek-date-mode title=toWeek(date[,mode]) class="nav-link text-wrap d-inline-block w-100"> toWeek(date[,mode]) </a> <a href=#toyearweek-date-mode title=toYearWeek(date[,mode]) class="nav-link text-wrap d-inline-block w-100"> toYearWeek(date[,mode]) </a> <a href=#now title=now class="nav-link text-wrap d-inline-block w-100"> now </a> <a href=#today title=today class="nav-link text-wrap d-inline-block w-100"> today </a> <a href=#yesterday title=yesterday class="nav-link text-wrap d-inline-block w-100"> yesterday </a> <a href=#timeslot title=timeSlot class="nav-link text-wrap d-inline-block w-100"> timeSlot </a> <a href=#toyyyymm title=toYYYYMM class="nav-link text-wrap d-inline-block w-100"> toYYYYMM </a> <a href=#toyyyymmdd title=toYYYYMMDD class="nav-link text-wrap d-inline-block w-100"> toYYYYMMDD </a> <a href=#toyyyymmddhhmmss title=toYYYYMMDDhhmmss class="nav-link text-wrap d-inline-block w-100"> toYYYYMMDDhhmmss </a> <a href=#addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters title="addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters" class="nav-link text-wrap d-inline-block w-100"> addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters </a> <a href=#subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters title="subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters" class="nav-link text-wrap d-inline-block w-100"> subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters </a> <a href=#datediff-unit-t1-t2-timezone title="dateDiff('unit', t1, t2, [timezone])" class="nav-link text-wrap d-inline-block w-100"> dateDiff('unit', t1, t2, [timezone]) </a> <a href=#timeslots-starttime-duration-size title="timeSlots(StartTime, Duration,[, Size])" class="nav-link text-wrap d-inline-block w-100"> timeSlots(StartTime, Duration,[, Size]) </a> <a href=#formatdatetime-time-format-timezone title="formatDateTime(Time, Format[, Timezone])" class="nav-link text-wrap d-inline-block w-100"> formatDateTime(Time, Format[, Timezone]) </a> </nav> <a href=#functions-for-working-with-strings title="Functions for working with strings" class="nav-link text-wrap d-inline-block w-100"> Functions for working with strings </a> <nav id=toc-toc-92 class="nav flex-column pl-2"> <a href=#string_functions-empty title=empty class="nav-link text-wrap d-inline-block w-100"> empty </a> <a href=#notempty title=notEmpty class="nav-link text-wrap d-inline-block w-100"> notEmpty </a> <a href=#length title=length class="nav-link text-wrap d-inline-block w-100"> length </a> <a href=#lengthutf8 title=lengthUTF8 class="nav-link text-wrap d-inline-block w-100"> lengthUTF8 </a> <a href=#char-length-char-length title="char_length, CHAR_LENGTH" class="nav-link text-wrap d-inline-block w-100"> char_length, CHAR_LENGTH </a> <a href=#character-length-character-length title="character_length, CHARACTER_LENGTH" class="nav-link text-wrap d-inline-block w-100"> character_length, CHARACTER_LENGTH </a> <a href=#lower-lcase title="lower, lcase" class="nav-link text-wrap d-inline-block w-100"> lower, lcase </a> <a href=#upper-ucase title="upper, ucase" class="nav-link text-wrap d-inline-block w-100"> upper, ucase </a> <a href=#lowerutf8 title=lowerUTF8 class="nav-link text-wrap d-inline-block w-100"> lowerUTF8 </a> <a href=#upperutf8 title=upperUTF8 class="nav-link text-wrap d-inline-block w-100"> upperUTF8 </a> <a href=#isvalidutf8 title=isValidUTF8 class="nav-link text-wrap d-inline-block w-100"> isValidUTF8 </a> <a href=#tovalidutf8 title=toValidUTF8 class="nav-link text-wrap d-inline-block w-100"> toValidUTF8 </a> <nav id=toc-toc-92-12 class="nav flex-column pl-2"> <a href=#example_3 title=Example class="nav-link text-wrap d-inline-block w-100"> Example </a> </nav> <a href=#reverse title=reverse class="nav-link text-wrap d-inline-block w-100"> reverse </a> <a href=#reverseutf8 title=reverseUTF8 class="nav-link text-wrap d-inline-block w-100"> reverseUTF8 </a> <a href=#format-pattern-s0-s1 title="format(pattern, s0, s1, ...)" class="nav-link text-wrap d-inline-block w-100"> format(pattern, s0, s1, ...) </a> <a href=#concat-s1-s2 title="concat(s1, s2, ...)" class="nav-link text-wrap d-inline-block w-100"> concat(s1, s2, ...) </a> <a href=#concatassumeinjective-s1-s2 title="concatAssumeInjective(s1, s2, ...)" class="nav-link text-wrap d-inline-block w-100"> concatAssumeInjective(s1, s2, ...) </a> <a href=#substring-s-offset-length-mid-s-offset-length-substr-s-offset-length title="substring(s, offset, length), mid(s, offset, length), substr(s, offset, length)" class="nav-link text-wrap d-inline-block w-100"> substring(s, offset, length), mid(s, offset, length), substr(s, offset, length) </a> <a href=#substringutf8-s-offset-length title="substringUTF8(s, offset, length)" class="nav-link text-wrap d-inline-block w-100"> substringUTF8(s, offset, length) </a> <a href=#appendtrailingcharifabsent-s-c title="appendTrailingCharIfAbsent(s, c)" class="nav-link text-wrap d-inline-block w-100"> appendTrailingCharIfAbsent(s, c) </a> <a href=#convertcharset-s-from-to title="convertCharset(s, from, to)" class="nav-link text-wrap d-inline-block w-100"> convertCharset(s, from, to) </a> <a href=#base64encode-s title=base64Encode(s) class="nav-link text-wrap d-inline-block w-100"> base64Encode(s) </a> <a href=#base64decode-s title=base64Decode(s) class="nav-link text-wrap d-inline-block w-100"> base64Decode(s) </a> <a href=#trybase64decode-s title=tryBase64Decode(s) class="nav-link text-wrap d-inline-block w-100"> tryBase64Decode(s) </a> <a href=#function-endswith title="endsWith(s, suffix)" class="nav-link text-wrap d-inline-block w-100"> endsWith(s, suffix) </a> <a href=#function-startswith title="startsWith(s, prefix)" class="nav-link text-wrap d-inline-block w-100"> startsWith(s, prefix) </a> <a href=#trimleft-s title=trimLeft(s) class="nav-link text-wrap d-inline-block w-100"> trimLeft(s) </a> <a href=#trimright-s title=trimRight(s) class="nav-link text-wrap d-inline-block w-100"> trimRight(s) </a> <a href=#trimboth-s title=trimBoth(s) class="nav-link text-wrap d-inline-block w-100"> trimBoth(s) </a> <a href=#crc32-s title=CRC32(s) class="nav-link text-wrap d-inline-block w-100"> CRC32(s) </a> </nav> <a href=#functions-for-searching-strings title="Functions for Searching Strings" class="nav-link text-wrap d-inline-block w-100"> Functions for Searching Strings </a> <nav id=toc-toc-93 class="nav flex-column pl-2"> <a href=#position-haystack-needle-locate-haystack-needle title="position(haystack, needle), locate(haystack, needle)" class="nav-link text-wrap d-inline-block w-100"> position(haystack, needle), locate(haystack, needle) </a> <a href=#positionutf8-haystack-needle title="positionUTF8(haystack, needle)" class="nav-link text-wrap d-inline-block w-100"> positionUTF8(haystack, needle) </a> <a href=#multisearchallpositions-haystack-needle1-needle2-needlen title="multiSearchAllPositions(haystack, [needle1, needle2, ..., needlen])" class="nav-link text-wrap d-inline-block w-100"> multiSearchAllPositions(haystack, [needle1, needle2, ..., needlen]) </a> <a href=#multisearchfirstposition-haystack-needle1-needle2-needlen title="multiSearchFirstPosition(haystack, [needle1, needle2, ..., needlen])" class="nav-link text-wrap d-inline-block w-100"> multiSearchFirstPosition(haystack, [needle1, needle2, ..., needlen]) </a> <a href=#multisearchfirstindex-haystack-needle1-needle2-needlen title="multiSearchFirstIndex(haystack, [needle1, needle2, ..., needlen])" class="nav-link text-wrap d-inline-block w-100"> multiSearchFirstIndex(haystack, [needle1, needle2, ..., needlen]) </a> <a href=#function-multisearchany title="multiSearchAny(haystack, [needle1, needle2, ..., needlen])" class="nav-link text-wrap d-inline-block w-100"> multiSearchAny(haystack, [needle1, needle2, ..., needlen]) </a> <a href=#match-haystack-pattern title="match(haystack, pattern)" class="nav-link text-wrap d-inline-block w-100"> match(haystack, pattern) </a> <a href=#multimatchany-haystack-pattern1-pattern2-patternn title="multiMatchAny(haystack, [pattern1, pattern2, ..., patternn])" class="nav-link text-wrap d-inline-block w-100"> multiMatchAny(haystack, [pattern1, pattern2, ..., patternn]) </a> <a href=#multimatchanyindex-haystack-pattern1-pattern2-patternn title="multiMatchAnyIndex(haystack, [pattern1, pattern2, ..., patternn])" class="nav-link text-wrap d-inline-block w-100"> multiMatchAnyIndex(haystack, [pattern1, pattern2, ..., patternn]) </a> <a href=#multifuzzymatchany-haystack-distance-pattern1-pattern2-patternn title="multiFuzzyMatchAny(haystack, distance, [pattern1, pattern2, ..., patternn])" class="nav-link text-wrap d-inline-block w-100"> multiFuzzyMatchAny(haystack, distance, [pattern1, pattern2, ..., patternn]) </a> <a href=#multifuzzymatchanyindex-haystack-distance-pattern1-pattern2-patternn title="multiFuzzyMatchAnyIndex(haystack, distance, [pattern1, pattern2, ..., patternn])" class="nav-link text-wrap d-inline-block w-100"> multiFuzzyMatchAnyIndex(haystack, distance, [pattern1, pattern2, ..., patternn]) </a> <a href=#extract-haystack-pattern title="extract(haystack, pattern)" class="nav-link text-wrap d-inline-block w-100"> extract(haystack, pattern) </a> <a href=#extractall-haystack-pattern title="extractAll(haystack, pattern)" class="nav-link text-wrap d-inline-block w-100"> extractAll(haystack, pattern) </a> <a href=#function-like title="like(haystack, pattern), haystack LIKE pattern operator" class="nav-link text-wrap d-inline-block w-100"> like(haystack, pattern), haystack LIKE pattern operator </a> <a href=#function-notlike title="notLike(haystack, pattern), haystack NOT LIKE pattern operator" class="nav-link text-wrap d-inline-block w-100"> notLike(haystack, pattern), haystack NOT LIKE pattern operator </a> <a href=#ngramdistance-haystack-needle title="ngramDistance(haystack, needle)" class="nav-link text-wrap d-inline-block w-100"> ngramDistance(haystack, needle) </a> <a href=#ngramsearch-haystack-needle title="ngramSearch(haystack, needle)" class="nav-link text-wrap d-inline-block w-100"> ngramSearch(haystack, needle) </a> </nav> <a href=#functions-for-searching-and-replacing-in-strings title="Functions for searching and replacing in strings" class="nav-link text-wrap d-inline-block w-100"> Functions for searching and replacing in strings </a> <nav id=toc-toc-94 class="nav flex-column pl-2"> <a href=#replaceone-haystack-pattern-replacement title="replaceOne(haystack, pattern, replacement)" class="nav-link text-wrap d-inline-block w-100"> replaceOne(haystack, pattern, replacement) </a> <a href=#replaceall-haystack-pattern-replacement-replace-haystack-pattern-replacement title="replaceAll(haystack, pattern, replacement), replace(haystack, pattern, replacement)" class="nav-link text-wrap d-inline-block w-100"> replaceAll(haystack, pattern, replacement), replace(haystack, pattern, replacement) </a> <a href=#replaceregexpone-haystack-pattern-replacement title="replaceRegexpOne(haystack, pattern, replacement)" class="nav-link text-wrap d-inline-block w-100"> replaceRegexpOne(haystack, pattern, replacement) </a> <a href=#replaceregexpall-haystack-pattern-replacement title="replaceRegexpAll(haystack, pattern, replacement)" class="nav-link text-wrap d-inline-block w-100"> replaceRegexpAll(haystack, pattern, replacement) </a> <a href=#regexpquotemeta-s title=regexpQuoteMeta(s) class="nav-link text-wrap d-inline-block w-100"> regexpQuoteMeta(s) </a> </nav> <a href=#conditional-functions title="Conditional functions" class="nav-link text-wrap d-inline-block w-100"> Conditional functions </a> <nav id=toc-toc-95 class="nav flex-column pl-2"> <a href=#if-cond-then-else-cond-operator-then-else title="if(cond, then, else), cond ? operator then : else" class="nav-link text-wrap d-inline-block w-100"> if(cond, then, else), cond ? operator then : else </a> <a href=#multiif title=multiIf class="nav-link text-wrap d-inline-block w-100"> multiIf </a> </nav> <a href=#mathematical-functions title="Mathematical functions" class="nav-link text-wrap d-inline-block w-100"> Mathematical functions </a> <nav id=toc-toc-96 class="nav flex-column pl-2"> <a href=#e title=e() class="nav-link text-wrap d-inline-block w-100"> e() </a> <a href=#pi title=pi() class="nav-link text-wrap d-inline-block w-100"> pi() </a> <a href=#exp-x title=exp(x) class="nav-link text-wrap d-inline-block w-100"> exp(x) </a> <a href=#log-x-ln-x title="log(x), ln(x)" class="nav-link text-wrap d-inline-block w-100"> log(x), ln(x) </a> <a href=#exp2-x title=exp2(x) class="nav-link text-wrap d-inline-block w-100"> exp2(x) </a> <a href=#log2-x title=log2(x) class="nav-link text-wrap d-inline-block w-100"> log2(x) </a> <a href=#exp10-x title=exp10(x) class="nav-link text-wrap d-inline-block w-100"> exp10(x) </a> <a href=#log10-x title=log10(x) class="nav-link text-wrap d-inline-block w-100"> log10(x) </a> <a href=#sqrt-x title=sqrt(x) class="nav-link text-wrap d-inline-block w-100"> sqrt(x) </a> <a href=#cbrt-x title=cbrt(x) class="nav-link text-wrap d-inline-block w-100"> cbrt(x) </a> <a href=#erf-x title=erf(x) class="nav-link text-wrap d-inline-block w-100"> erf(x) </a> <a href=#erfc-x title=erfc(x) class="nav-link text-wrap d-inline-block w-100"> erfc(x) </a> <a href=#lgamma-x title=lgamma(x) class="nav-link text-wrap d-inline-block w-100"> lgamma(x) </a> <a href=#tgamma-x title=tgamma(x) class="nav-link text-wrap d-inline-block w-100"> tgamma(x) </a> <a href=#sin-x title=sin(x) class="nav-link text-wrap d-inline-block w-100"> sin(x) </a> <a href=#cos-x title=cos(x) class="nav-link text-wrap d-inline-block w-100"> cos(x) </a> <a href=#tan-x title=tan(x) class="nav-link text-wrap d-inline-block w-100"> tan(x) </a> <a href=#asin-x title=asin(x) class="nav-link text-wrap d-inline-block w-100"> asin(x) </a> <a href=#acos-x title=acos(x) class="nav-link text-wrap d-inline-block w-100"> acos(x) </a> <a href=#atan-x title=atan(x) class="nav-link text-wrap d-inline-block w-100"> atan(x) </a> <a href=#pow-x-y-power-x-y title="pow(x, y), power(x, y)" class="nav-link text-wrap d-inline-block w-100"> pow(x, y), power(x, y) </a> <a href=#intexp2 title=intExp2 class="nav-link text-wrap d-inline-block w-100"> intExp2 </a> <a href=#intexp10 title=intExp10 class="nav-link text-wrap d-inline-block w-100"> intExp10 </a> </nav> <a href=#rounding-functions title="Rounding functions" class="nav-link text-wrap d-inline-block w-100"> Rounding functions </a> <nav id=toc-toc-97 class="nav flex-column pl-2"> <a href=#floor-x-n title="floor(x[, N])" class="nav-link text-wrap d-inline-block w-100"> floor(x[, N]) </a> <a href=#ceil-x-n-ceiling-x-n title="ceil(x[, N]), ceiling(x[, N])" class="nav-link text-wrap d-inline-block w-100"> ceil(x[, N]), ceiling(x[, N]) </a> <a href=#rounding_functions-round title="round(x[, N])" class="nav-link text-wrap d-inline-block w-100"> round(x[, N]) </a> <nav id=toc-toc-97-3 class="nav flex-column pl-2"> <a href=#examples title=Examples class="nav-link text-wrap d-inline-block w-100"> Examples </a> </nav> <a href=#roundtoexp2-num title=roundToExp2(num) class="nav-link text-wrap d-inline-block w-100"> roundToExp2(num) </a> <a href=#roundduration-num title=roundDuration(num) class="nav-link text-wrap d-inline-block w-100"> roundDuration(num) </a> <a href=#roundage-num title=roundAge(num) class="nav-link text-wrap d-inline-block w-100"> roundAge(num) </a> <a href=#rounddown-num-arr title="roundDown(num, arr)" class="nav-link text-wrap d-inline-block w-100"> roundDown(num, arr) </a> </nav> <a href=#functions-for-working-with-arrays title="Functions for working with arrays" class="nav-link text-wrap d-inline-block w-100"> Functions for working with arrays </a> <nav id=toc-toc-98 class="nav flex-column pl-2"> <a href=#function-empty title=empty class="nav-link text-wrap d-inline-block w-100"> empty </a> <a href=#function-notempty title=notEmpty class="nav-link text-wrap d-inline-block w-100"> notEmpty </a> <a href=#array_functions-length title=length class="nav-link text-wrap d-inline-block w-100"> length </a> <a href=#emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64 title="emptyArrayUInt8, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64" class="nav-link text-wrap d-inline-block w-100"> emptyArrayUInt8, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64 </a> <a href=#emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64 title="emptyArrayInt8, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64" class="nav-link text-wrap d-inline-block w-100"> emptyArrayInt8, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64 </a> <a href=#emptyarrayfloat32-emptyarrayfloat64 title="emptyArrayFloat32, emptyArrayFloat64" class="nav-link text-wrap d-inline-block w-100"> emptyArrayFloat32, emptyArrayFloat64 </a> <a href=#emptyarraydate-emptyarraydatetime title="emptyArrayDate, emptyArrayDateTime" class="nav-link text-wrap d-inline-block w-100"> emptyArrayDate, emptyArrayDateTime </a> <a href=#emptyarraystring title=emptyArrayString class="nav-link text-wrap d-inline-block w-100"> emptyArrayString </a> <a href=#emptyarraytosingle title=emptyArrayToSingle class="nav-link text-wrap d-inline-block w-100"> emptyArrayToSingle </a> <a href=#range-n title=range(N) class="nav-link text-wrap d-inline-block w-100"> range(N) </a> <a href=#array-x1-operator-x1 title="array(x1, ...), operator [x1, ...]" class="nav-link text-wrap d-inline-block w-100"> array(x1, ...), operator [x1, ...] </a> <a href=#arrayconcat title=arrayConcat class="nav-link text-wrap d-inline-block w-100"> arrayConcat </a> <a href=#arrayelement-arr-n-operator-arr-n title="arrayElement(arr, n), operator arr[n]" class="nav-link text-wrap d-inline-block w-100"> arrayElement(arr, n), operator arr[n] </a> <a href=#has-arr-elem title="has(arr, elem)" class="nav-link text-wrap d-inline-block w-100"> has(arr, elem) </a> <a href=#hasall title=hasAll class="nav-link text-wrap d-inline-block w-100"> hasAll </a> <a href=#hasany title=hasAny class="nav-link text-wrap d-inline-block w-100"> hasAny </a> <a href=#indexof-arr-x title="indexOf(arr, x)" class="nav-link text-wrap d-inline-block w-100"> indexOf(arr, x) </a> <a href=#countequal-arr-x title="countEqual(arr, x)" class="nav-link text-wrap d-inline-block w-100"> countEqual(arr, x) </a> <a href=#array_functions-arrayenumerate title=arrayEnumerate(arr) class="nav-link text-wrap d-inline-block w-100"> arrayEnumerate(arr) </a> <a href=#arrayenumerateuniq-arr title="arrayEnumerateUniq(arr, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayEnumerateUniq(arr, ...) </a> <a href=#arraypopback title=arrayPopBack class="nav-link text-wrap d-inline-block w-100"> arrayPopBack </a> <a href=#arraypopfront title=arrayPopFront class="nav-link text-wrap d-inline-block w-100"> arrayPopFront </a> <a href=#arraypushback title=arrayPushBack class="nav-link text-wrap d-inline-block w-100"> arrayPushBack </a> <a href=#arraypushfront title=arrayPushFront class="nav-link text-wrap d-inline-block w-100"> arrayPushFront </a> <a href=#arrayresize title=arrayResize class="nav-link text-wrap d-inline-block w-100"> arrayResize </a> <a href=#arrayslice title=arraySlice class="nav-link text-wrap d-inline-block w-100"> arraySlice </a> <a href=#array_functions-sort title="arraySort([func,] arr, ...)" class="nav-link text-wrap d-inline-block w-100"> arraySort([func,] arr, ...) </a> <a href=#array_functions-reverse-sort title="arrayReverseSort([func,] arr, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayReverseSort([func,] arr, ...) </a> <a href=#arrayuniq-arr title="arrayUniq(arr, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayUniq(arr, ...) </a> <a href=#array_functions-join title=arrayJoin(arr) class="nav-link text-wrap d-inline-block w-100"> arrayJoin(arr) </a> <a href=#arraydifference-arr title=arrayDifference(arr) class="nav-link text-wrap d-inline-block w-100"> arrayDifference(arr) </a> <a href=#arraydistinct-arr title=arrayDistinct(arr) class="nav-link text-wrap d-inline-block w-100"> arrayDistinct(arr) </a> <a href=#arrayenumeratedense-arr title=arrayEnumerateDense(arr) class="nav-link text-wrap d-inline-block w-100"> arrayEnumerateDense(arr) </a> <a href=#arrayintersect-arr title=arrayIntersect(arr) class="nav-link text-wrap d-inline-block w-100"> arrayIntersect(arr) </a> <a href=#arrayreduce-agg-func-arr1 title="arrayReduce(agg_func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayReduce(agg_func, arr1, ...) </a> <a href=#arrayreverse-arr title=arrayReverse(arr) class="nav-link text-wrap d-inline-block w-100"> arrayReverse(arr) </a> </nav> <a href=#functions-for-splitting-and-merging-strings-and-arrays title="Functions for splitting and merging strings and arrays" class="nav-link text-wrap d-inline-block w-100"> Functions for splitting and merging strings and arrays </a> <nav id=toc-toc-99 class="nav flex-column pl-2"> <a href=#splitbychar-separator-s title="splitByChar(separator, s)" class="nav-link text-wrap d-inline-block w-100"> splitByChar(separator, s) </a> <a href=#splitbystring-separator-s title="splitByString(separator, s)" class="nav-link text-wrap d-inline-block w-100"> splitByString(separator, s) </a> <a href=#arraystringconcat-arr-separator title="arrayStringConcat(arr[, separator])" class="nav-link text-wrap d-inline-block w-100"> arrayStringConcat(arr[, separator]) </a> <a href=#alphatokens-s title=alphaTokens(s) class="nav-link text-wrap d-inline-block w-100"> alphaTokens(s) </a> </nav> <a href=#bit-functions title="Bit functions" class="nav-link text-wrap d-inline-block w-100"> Bit functions </a> <nav id=toc-toc-100 class="nav flex-column pl-2"> <a href=#bitand-a-b title="bitAnd(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitAnd(a, b) </a> <a href=#bitor-a-b title="bitOr(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitOr(a, b) </a> <a href=#bitxor-a-b title="bitXor(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitXor(a, b) </a> <a href=#bitnot-a title=bitNot(a) class="nav-link text-wrap d-inline-block w-100"> bitNot(a) </a> <a href=#bitshiftleft-a-b title="bitShiftLeft(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitShiftLeft(a, b) </a> <a href=#bitshiftright-a-b title="bitShiftRight(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitShiftRight(a, b) </a> <a href=#bitrotateleft-a-b title="bitRotateLeft(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitRotateLeft(a, b) </a> <a href=#bitrotateright-a-b title="bitRotateRight(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitRotateRight(a, b) </a> <a href=#bittest-a-b title="bitTest(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitTest(a, b) </a> <a href=#bittestall-a-b title="bitTestAll(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitTestAll(a, b) </a> <a href=#bittestany-a-b title="bitTestAny(a, b)" class="nav-link text-wrap d-inline-block w-100"> bitTestAny(a, b) </a> </nav> <a href=#bitmap-functions title="Bitmap functions" class="nav-link text-wrap d-inline-block w-100"> Bitmap functions </a> <nav id=toc-toc-101 class="nav flex-column pl-2"> <a href=#bitmap_functions-bitmapbuild title=bitmapBuild class="nav-link text-wrap d-inline-block w-100"> bitmapBuild </a> <a href=#bitmaptoarray title=bitmapToArray class="nav-link text-wrap d-inline-block w-100"> bitmapToArray </a> <a href=#bitmap_functions-bitmapsubsetinrange title=bitmapSubsetInRange class="nav-link text-wrap d-inline-block w-100"> bitmapSubsetInRange </a> <a href=#bitmap_functions-bitmapsubsetlimit title=bitmapSubsetLimit class="nav-link text-wrap d-inline-block w-100"> bitmapSubsetLimit </a> <a href=#bitmap_functions-bitmapcontains title=bitmapContains class="nav-link text-wrap d-inline-block w-100"> bitmapContains </a> <a href=#bitmaphasany title=bitmapHasAny class="nav-link text-wrap d-inline-block w-100"> bitmapHasAny </a> <a href=#bitmaphasall title=bitmapHasAll class="nav-link text-wrap d-inline-block w-100"> bitmapHasAll </a> <a href=#bitmapand title=bitmapAnd class="nav-link text-wrap d-inline-block w-100"> bitmapAnd </a> <a href=#bitmapor title=bitmapOr class="nav-link text-wrap d-inline-block w-100"> bitmapOr </a> <a href=#bitmapxor title=bitmapXor class="nav-link text-wrap d-inline-block w-100"> bitmapXor </a> <a href=#bitmapandnot title=bitmapAndnot class="nav-link text-wrap d-inline-block w-100"> bitmapAndnot </a> <a href=#bitmapcardinality title=bitmapCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapCardinality </a> <a href=#bitmapmin title=bitmapMin class="nav-link text-wrap d-inline-block w-100"> bitmapMin </a> <a href=#bitmapmax title=bitmapMax class="nav-link text-wrap d-inline-block w-100"> bitmapMax </a> <a href=#bitmapandcardinality title=bitmapAndCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapAndCardinality </a> <a href=#bitmaporcardinality title=bitmapOrCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapOrCardinality </a> <a href=#bitmapxorcardinality title=bitmapXorCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapXorCardinality </a> <a href=#bitmapandnotcardinality title=bitmapAndnotCardinality class="nav-link text-wrap d-inline-block w-100"> bitmapAndnotCardinality </a> </nav> <a href=#hash-functions title="Hash functions" class="nav-link text-wrap d-inline-block w-100"> Hash functions </a> <nav id=toc-toc-102 class="nav flex-column pl-2"> <a href=#hash_functions-halfmd5 title=halfMD5 class="nav-link text-wrap d-inline-block w-100"> halfMD5 </a> <a href=#hash_functions-md5 title=MD5 class="nav-link text-wrap d-inline-block w-100"> MD5 </a> <a href=#hash_functions-siphash64 title=sipHash64 class="nav-link text-wrap d-inline-block w-100"> sipHash64 </a> <a href=#hash_functions-siphash128 title=sipHash128 class="nav-link text-wrap d-inline-block w-100"> sipHash128 </a> <a href=#cityhash64 title=cityHash64 class="nav-link text-wrap d-inline-block w-100"> cityHash64 </a> <a href=#inthash32 title=intHash32 class="nav-link text-wrap d-inline-block w-100"> intHash32 </a> <a href=#inthash64 title=intHash64 class="nav-link text-wrap d-inline-block w-100"> intHash64 </a> <a href=#sha1 title=SHA1 class="nav-link text-wrap d-inline-block w-100"> SHA1 </a> <a href=#sha224 title=SHA224 class="nav-link text-wrap d-inline-block w-100"> SHA224 </a> <a href=#sha256 title=SHA256 class="nav-link text-wrap d-inline-block w-100"> SHA256 </a> <a href=#urlhash-url-n title="URLHash(url[, N])" class="nav-link text-wrap d-inline-block w-100"> URLHash(url[, N]) </a> <a href=#farmhash64 title=farmHash64 class="nav-link text-wrap d-inline-block w-100"> farmHash64 </a> <a href=#hash_functions-javahash title=javaHash class="nav-link text-wrap d-inline-block w-100"> javaHash </a> <a href=#hash_functions-hivehash title=hiveHash class="nav-link text-wrap d-inline-block w-100"> hiveHash </a> <a href=#metrohash64 title=metroHash64 class="nav-link text-wrap d-inline-block w-100"> metroHash64 </a> <a href=#jumpconsistenthash title=jumpConsistentHash class="nav-link text-wrap d-inline-block w-100"> jumpConsistentHash </a> <a href=#murmurhash2-32-murmurhash2-64 title="murmurHash2_32, murmurHash2_64" class="nav-link text-wrap d-inline-block w-100"> murmurHash2_32, murmurHash2_64 </a> <a href=#murmurhash3-32-murmurhash3-64 title="murmurHash3_32, murmurHash3_64" class="nav-link text-wrap d-inline-block w-100"> murmurHash3_32, murmurHash3_64 </a> <a href=#murmurhash3-128 title=murmurHash3_128 class="nav-link text-wrap d-inline-block w-100"> murmurHash3_128 </a> <a href=#hash_functions-xxhash32 title="xxHash32, xxHash64" class="nav-link text-wrap d-inline-block w-100"> xxHash32, xxHash64 </a> </nav> <a href=#functions-for-generating-pseudo-random-numbers title="Functions for generating pseudo-random numbers" class="nav-link text-wrap d-inline-block w-100"> Functions for generating pseudo-random numbers </a> <nav id=toc-toc-103 class="nav flex-column pl-2"> <a href=#rand title=rand class="nav-link text-wrap d-inline-block w-100"> rand </a> <a href=#rand64 title=rand64 class="nav-link text-wrap d-inline-block w-100"> rand64 </a> <a href=#randconstant title=randConstant class="nav-link text-wrap d-inline-block w-100"> randConstant </a> </nav> <a href=#encoding-functions title="Encoding functions" class="nav-link text-wrap d-inline-block w-100"> Encoding functions </a> <nav id=toc-toc-104 class="nav flex-column pl-2"> <a href=#hex title=hex class="nav-link text-wrap d-inline-block w-100"> hex </a> <a href=#unhex-str title=unhex(str) class="nav-link text-wrap d-inline-block w-100"> unhex(str) </a> <a href=#uuidstringtonum-str title=UUIDStringToNum(str) class="nav-link text-wrap d-inline-block w-100"> UUIDStringToNum(str) </a> <a href=#uuidnumtostring-str title=UUIDNumToString(str) class="nav-link text-wrap d-inline-block w-100"> UUIDNumToString(str) </a> <a href=#bitmasktolist-num title=bitmaskToList(num) class="nav-link text-wrap d-inline-block w-100"> bitmaskToList(num) </a> <a href=#bitmasktoarray-num title=bitmaskToArray(num) class="nav-link text-wrap d-inline-block w-100"> bitmaskToArray(num) </a> </nav> <a href=#functions-for-working-with-uuid title="Functions for working with UUID" class="nav-link text-wrap d-inline-block w-100"> Functions for working with UUID </a> <nav id=toc-toc-105 class="nav flex-column pl-2"> <a href=#uuid_function-generate title=generateUUIDv4 class="nav-link text-wrap d-inline-block w-100"> generateUUIDv4 </a> <a href=#touuid-x title="toUUID (x)" class="nav-link text-wrap d-inline-block w-100"> toUUID (x) </a> <a href=#uuidstringtonum title=UUIDStringToNum class="nav-link text-wrap d-inline-block w-100"> UUIDStringToNum </a> <a href=#uuidnumtostring title=UUIDNumToString class="nav-link text-wrap d-inline-block w-100"> UUIDNumToString </a> <a href=#see-also_3 title="See also" class="nav-link text-wrap d-inline-block w-100"> See also </a> </nav> <a href=#functions-for-working-with-urls title="Functions for working with URLs" class="nav-link text-wrap d-inline-block w-100"> Functions for working with URLs </a> <nav id=toc-toc-106 class="nav flex-column pl-2"> <a href=#functions-that-extract-parts-of-a-url title="Functions that Extract Parts of a URL" class="nav-link text-wrap d-inline-block w-100"> Functions that Extract Parts of a URL </a> <nav id=toc-toc-106-1 class="nav flex-column pl-2"> <a href=#protocol title=protocol class="nav-link text-wrap d-inline-block w-100"> protocol </a> <a href=#domain title=domain class="nav-link text-wrap d-inline-block w-100"> domain </a> <a href=#domainwithoutwww title=domainWithoutWWW class="nav-link text-wrap d-inline-block w-100"> domainWithoutWWW </a> <a href=#topleveldomain title=topLevelDomain class="nav-link text-wrap d-inline-block w-100"> topLevelDomain </a> <a href=#firstsignificantsubdomain title=firstSignificantSubdomain class="nav-link text-wrap d-inline-block w-100"> firstSignificantSubdomain </a> <a href=#cuttofirstsignificantsubdomain title=cutToFirstSignificantSubdomain class="nav-link text-wrap d-inline-block w-100"> cutToFirstSignificantSubdomain </a> <a href=#path title=path class="nav-link text-wrap d-inline-block w-100"> path </a> <a href=#pathfull title=pathFull class="nav-link text-wrap d-inline-block w-100"> pathFull </a> <a href=#querystring title=queryString class="nav-link text-wrap d-inline-block w-100"> queryString </a> <a href=#fragment title=fragment class="nav-link text-wrap d-inline-block w-100"> fragment </a> <a href=#querystringandfragment title=queryStringAndFragment class="nav-link text-wrap d-inline-block w-100"> queryStringAndFragment </a> <a href=#extracturlparameter-url-name title="extractURLParameter(URL, name)" class="nav-link text-wrap d-inline-block w-100"> extractURLParameter(URL, name) </a> <a href=#extracturlparameters-url title=extractURLParameters(URL) class="nav-link text-wrap d-inline-block w-100"> extractURLParameters(URL) </a> <a href=#extracturlparameternames-url title=extractURLParameterNames(URL) class="nav-link text-wrap d-inline-block w-100"> extractURLParameterNames(URL) </a> <a href=#urlhierarchy-url title=URLHierarchy(URL) class="nav-link text-wrap d-inline-block w-100"> URLHierarchy(URL) </a> <a href=#urlpathhierarchy-url title=URLPathHierarchy(URL) class="nav-link text-wrap d-inline-block w-100"> URLPathHierarchy(URL) </a> <a href=#decodeurlcomponent-url title=decodeURLComponent(URL) class="nav-link text-wrap d-inline-block w-100"> decodeURLComponent(URL) </a> </nav> <a href=#functions-that-remove-part-of-a-url title="Functions that remove part of a URL." class="nav-link text-wrap d-inline-block w-100"> Functions that remove part of a URL. </a> <nav id=toc-toc-106-2 class="nav flex-column pl-2"> <a href=#cutwww title=cutWWW class="nav-link text-wrap d-inline-block w-100"> cutWWW </a> <a href=#cutquerystring title=cutQueryString class="nav-link text-wrap d-inline-block w-100"> cutQueryString </a> <a href=#cutfragment title=cutFragment class="nav-link text-wrap d-inline-block w-100"> cutFragment </a> <a href=#cutquerystringandfragment title=cutQueryStringAndFragment class="nav-link text-wrap d-inline-block w-100"> cutQueryStringAndFragment </a> <a href=#cuturlparameter-url-name title="cutURLParameter(URL, name)" class="nav-link text-wrap d-inline-block w-100"> cutURLParameter(URL, name) </a> </nav> </nav> <a href=#functions-for-working-with-ip-addresses title="Functions for working with IP addresses" class="nav-link text-wrap d-inline-block w-100"> Functions for working with IP addresses </a> <nav id=toc-toc-107 class="nav flex-column pl-2"> <a href=#ipv4numtostring-num title=IPv4NumToString(num) class="nav-link text-wrap d-inline-block w-100"> IPv4NumToString(num) </a> <a href=#ipv4stringtonum-s title=IPv4StringToNum(s) class="nav-link text-wrap d-inline-block w-100"> IPv4StringToNum(s) </a> <a href=#ipv4numtostringclassc-num title=IPv4NumToStringClassC(num) class="nav-link text-wrap d-inline-block w-100"> IPv4NumToStringClassC(num) </a> <nav id=toc-toc-107-3 class="nav flex-column pl-2"> <a href=#ipv6numtostring-x title=IPv6NumToString(x) class="nav-link text-wrap d-inline-block w-100"> IPv6NumToString(x) </a> </nav> <a href=#ipv6stringtonum-s title=IPv6StringToNum(s) class="nav-link text-wrap d-inline-block w-100"> IPv6StringToNum(s) </a> <a href=#ipv4toipv6-x title=IPv4ToIPv6(x) class="nav-link text-wrap d-inline-block w-100"> IPv4ToIPv6(x) </a> <a href=#cutipv6-x-bitstocutforipv6-bitstocutforipv4 title="cutIPv6(x, bitsToCutForIPv6, bitsToCutForIPv4)" class="nav-link text-wrap d-inline-block w-100"> cutIPv6(x, bitsToCutForIPv6, bitsToCutForIPv4) </a> <a href=#ipv4cidrtorange-ipv4-cidr title="IPv4CIDRToRange(ipv4, cidr)," class="nav-link text-wrap d-inline-block w-100"> IPv4CIDRToRange(ipv4, cidr), </a> <a href=#ipv6cidrtorange-ipv6-cidr title="IPv6CIDRToRange(ipv6, cidr)," class="nav-link text-wrap d-inline-block w-100"> IPv6CIDRToRange(ipv6, cidr), </a> <a href=#toipv4-string title=toIPv4(string) class="nav-link text-wrap d-inline-block w-100"> toIPv4(string) </a> <a href=#toipv6-string title=toIPv6(string) class="nav-link text-wrap d-inline-block w-100"> toIPv6(string) </a> </nav> <a href=#functions-for-working-with-json title="Functions for working with JSON" class="nav-link text-wrap d-inline-block w-100"> Functions for working with JSON </a> <nav id=toc-toc-108 class="nav flex-column pl-2"> <a href=#visitparamhas-params-name title="visitParamHas(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamHas(params, name) </a> <a href=#visitparamextractuint-params-name title="visitParamExtractUInt(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractUInt(params, name) </a> <a href=#visitparamextractint-params-name title="visitParamExtractInt(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractInt(params, name) </a> <a href=#visitparamextractfloat-params-name title="visitParamExtractFloat(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractFloat(params, name) </a> <a href=#visitparamextractbool-params-name title="visitParamExtractBool(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractBool(params, name) </a> <a href=#visitparamextractraw-params-name title="visitParamExtractRaw(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractRaw(params, name) </a> <a href=#visitparamextractstring-params-name title="visitParamExtractString(params, name)" class="nav-link text-wrap d-inline-block w-100"> visitParamExtractString(params, name) </a> <a href=#jsonhas-json-indices-or-keys title="JSONHas(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONHas(json[, indices_or_keys]...) </a> <a href=#jsonlength-json-indices-or-keys title="JSONLength(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONLength(json[, indices_or_keys]...) </a> <a href=#jsontype-json-indices-or-keys title="JSONType(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONType(json[, indices_or_keys]...) </a> <a href=#jsonextractuint-json-indices-or-keys title="JSONExtractUInt(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractUInt(json[, indices_or_keys]...) </a> <a href=#jsonextractint-json-indices-or-keys title="JSONExtractInt(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractInt(json[, indices_or_keys]...) </a> <a href=#jsonextractfloat-json-indices-or-keys title="JSONExtractFloat(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractFloat(json[, indices_or_keys]...) </a> <a href=#jsonextractbool-json-indices-or-keys title="JSONExtractBool(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractBool(json[, indices_or_keys]...) </a> <a href=#jsonextractstring-json-indices-or-keys title="JSONExtractString(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractString(json[, indices_or_keys]...) </a> <a href=#jsonextract-json-indices-or-keys-return-type title="JSONExtract(json[, indices_or_keys...], return_type)" class="nav-link text-wrap d-inline-block w-100"> JSONExtract(json[, indices_or_keys...], return_type) </a> <a href=#jsonextractkeysandvalues-json-indices-or-keys-value-type title="JSONExtractKeysAndValues(json[, indices_or_keys...], value_type)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractKeysAndValues(json[, indices_or_keys...], value_type) </a> <a href=#jsonextractraw-json-indices-or-keys title="JSONExtractRaw(json[, indices_or_keys]...)" class="nav-link text-wrap d-inline-block w-100"> JSONExtractRaw(json[, indices_or_keys]...) </a> </nav> <a href=#higher-order-functions title="Higher-order functions" class="nav-link text-wrap d-inline-block w-100"> Higher-order functions </a> <nav id=toc-toc-109 class="nav flex-column pl-2"> <a href=#operator-lambda-params-expr-function title="-&gt; operator, lambda(params, expr) function" class="nav-link text-wrap d-inline-block w-100"> -&amp;gt; operator, lambda(params, expr) function </a> <nav id=toc-toc-109-1 class="nav flex-column pl-2"> <a href=#higher_order_functions-array-map title="arrayMap(func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayMap(func, arr1, ...) </a> <a href=#higher_order_functions-array-filter title="arrayFilter(func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayFilter(func, arr1, ...) </a> <a href=#higher_order_functions-array-count title="arrayCount([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayCount([func,] arr1, ...) </a> <a href=#arrayexists-func-arr1 title="arrayExists([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayExists([func,] arr1, ...) </a> <a href=#arrayall-func-arr1 title="arrayAll([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayAll([func,] arr1, ...) </a> <a href=#higher_order_functions-array-sum title="arraySum([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arraySum([func,] arr1, ...) </a> <a href=#higher_order_functions-array-first title="arrayFirst(func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayFirst(func, arr1, ...) </a> <a href=#higher_order_functions-array-first-index title="arrayFirstIndex(func, arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayFirstIndex(func, arr1, ...) </a> <a href=#arraycumsum-func-arr1 title="arrayCumSum([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayCumSum([func,] arr1, ...) </a> <a href=#arraycumsumnonnegative-arr title=arrayCumSumNonNegative(arr) class="nav-link text-wrap d-inline-block w-100"> arrayCumSumNonNegative(arr) </a> <a href=#arraysort-func-arr1 title="arraySort([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arraySort([func,] arr1, ...) </a> <a href=#arrayreversesort-func-arr1 title="arrayReverseSort([func,] arr1, ...)" class="nav-link text-wrap d-inline-block w-100"> arrayReverseSort([func,] arr1, ...) </a> </nav> </nav> <a href=#ext_dict_functions title="Functions for Working with External Dictionaries" class="nav-link text-wrap d-inline-block w-100"> Functions for Working with External Dictionaries </a> <nav id=toc-toc-110 class="nav flex-column pl-2"> <a href=#dictget title=dictGet class="nav-link text-wrap d-inline-block w-100"> dictGet </a> <a href=#dicthas title=dictHas class="nav-link text-wrap d-inline-block w-100"> dictHas </a> <a href=#dictgethierarchy title=dictGetHierarchy class="nav-link text-wrap d-inline-block w-100"> dictGetHierarchy </a> <a href=#dictisin title=dictIsIn class="nav-link text-wrap d-inline-block w-100"> dictIsIn </a> <a href=#ext_dict_functions-other title="Other functions" class="nav-link text-wrap d-inline-block w-100"> Other functions </a> </nav> <a href=#functions-for-working-with-yandex-metrica-dictionaries title="Functions for working with Yandex.Metrica dictionaries" class="nav-link text-wrap d-inline-block w-100"> Functions for working with Yandex.Metrica dictionaries </a> <nav id=toc-toc-111 class="nav flex-column pl-2"> <a href=#multiple-geobases title="Multiple geobases" class="nav-link text-wrap d-inline-block w-100"> Multiple geobases </a> <nav id=toc-toc-111-1 class="nav flex-column pl-2"> <a href=#regiontocity-id-geobase title="regionToCity(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToCity(id[, geobase]) </a> <a href=#regiontoarea-id-geobase title="regionToArea(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToArea(id[, geobase]) </a> <a href=#regiontodistrict-id-geobase title="regionToDistrict(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToDistrict(id[, geobase]) </a> <a href=#regiontocountry-id-geobase title="regionToCountry(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToCountry(id[, geobase]) </a> <a href=#regiontocontinent-id-geobase title="regionToContinent(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToContinent(id[, geobase]) </a> <a href=#regiontopopulation-id-geobase title="regionToPopulation(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionToPopulation(id[, geobase]) </a> <a href=#regionin-lhs-rhs-geobase title="regionIn(lhs, rhs[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionIn(lhs, rhs[, geobase]) </a> <a href=#regionhierarchy-id-geobase title="regionHierarchy(id[, geobase])" class="nav-link text-wrap d-inline-block w-100"> regionHierarchy(id[, geobase]) </a> <a href=#regiontoname-id-lang title="regionToName(id[, lang])" class="nav-link text-wrap d-inline-block w-100"> regionToName(id[, lang]) </a> </nav> </nav> <a href=#functions-for-implementing-the-in-operator title="Functions for implementing the IN operator" class="nav-link text-wrap d-inline-block w-100"> Functions for implementing the IN operator </a> <nav id=toc-toc-112 class="nav flex-column pl-2"> <a href=#in-functions title="in, notIn, globalIn, globalNotIn" class="nav-link text-wrap d-inline-block w-100"> in, notIn, globalIn, globalNotIn </a> <a href=#tuple-x-y-operator-x-y title="tuple(x, y, ...), operator (x, y, ...)" class="nav-link text-wrap d-inline-block w-100"> tuple(x, y, ...), operator (x, y, ...) </a> <a href=#tupleelement-tuple-n-operator-x-n title="tupleElement(tuple, n), operator x.N" class="nav-link text-wrap d-inline-block w-100"> tupleElement(tuple, n), operator x.N </a> </nav> <a href=#functions_arrayjoin title="arrayJoin function" class="nav-link text-wrap d-inline-block w-100"> arrayJoin function </a> <a href=#functions-for-working-with-geographical-coordinates title="Functions for working with geographical coordinates" class="nav-link text-wrap d-inline-block w-100"> Functions for working with geographical coordinates </a> <nav id=toc-toc-114 class="nav flex-column pl-2"> <a href=#greatcircledistance title=greatCircleDistance class="nav-link text-wrap d-inline-block w-100"> greatCircleDistance </a> <a href=#pointinellipses title=pointInEllipses class="nav-link text-wrap d-inline-block w-100"> pointInEllipses </a> <a href=#pointinpolygon title=pointInPolygon class="nav-link text-wrap d-inline-block w-100"> pointInPolygon </a> <a href=#geohashencode title=geohashEncode class="nav-link text-wrap d-inline-block w-100"> geohashEncode </a> <a href=#geohashdecode title=geohashDecode class="nav-link text-wrap d-inline-block w-100"> geohashDecode </a> <a href=#geotoh3 title=geoToH3 class="nav-link text-wrap d-inline-block w-100"> geoToH3 </a> <a href=#geohashesinbox title=geohashesInBox class="nav-link text-wrap d-inline-block w-100"> geohashesInBox </a> </nav> <a href=#functions-for-working-with-nullable-aggregates title="Functions for working with Nullable aggregates" class="nav-link text-wrap d-inline-block w-100"> Functions for working with Nullable aggregates </a> <nav id=toc-toc-115 class="nav flex-column pl-2"> <a href=#isnull title=isNull class="nav-link text-wrap d-inline-block w-100"> isNull </a> <a href=#isnotnull title=isNotNull class="nav-link text-wrap d-inline-block w-100"> isNotNull </a> <a href=#coalesce title=coalesce class="nav-link text-wrap d-inline-block w-100"> coalesce </a> <a href=#ifnull title=ifNull class="nav-link text-wrap d-inline-block w-100"> ifNull </a> <a href=#nullif title=nullIf class="nav-link text-wrap d-inline-block w-100"> nullIf </a> <a href=#assumenotnull title=assumeNotNull class="nav-link text-wrap d-inline-block w-100"> assumeNotNull </a> <a href=#tonullable title=toNullable class="nav-link text-wrap d-inline-block w-100"> toNullable </a> </nav> <a href=#machine-learning-functions title="Machine learning functions" class="nav-link text-wrap d-inline-block w-100"> Machine learning functions </a> <nav id=toc-toc-116 class="nav flex-column pl-2"> <a href=#machine_learning_methods-evalmlmethod title="evalMLMethod (prediction)" class="nav-link text-wrap d-inline-block w-100"> evalMLMethod (prediction) </a> <nav id=toc-toc-116-1 class="nav flex-column pl-2"> <a href=#stochastic-linear-regression title="Stochastic Linear Regression" class="nav-link text-wrap d-inline-block w-100"> Stochastic Linear Regression </a> <a href=#stochastic-logistic-regression title="Stochastic Logistic Regression" class="nav-link text-wrap d-inline-block w-100"> Stochastic Logistic Regression </a> </nav> </nav> <a href=#other-functions title="Other functions" class="nav-link text-wrap d-inline-block w-100"> Other functions </a> <nav id=toc-toc-117 class="nav flex-column pl-2"> <a href=#hostname title=hostName() class="nav-link text-wrap d-inline-block w-100"> hostName() </a> <a href=#basename title=basename class="nav-link text-wrap d-inline-block w-100"> basename </a> <a href=#visiblewidth-x title=visibleWidth(x) class="nav-link text-wrap d-inline-block w-100"> visibleWidth(x) </a> <a href=#totypename-x title=toTypeName(x) class="nav-link text-wrap d-inline-block w-100"> toTypeName(x) </a> <a href=#function-blocksize title=blockSize() class="nav-link text-wrap d-inline-block w-100"> blockSize() </a> <a href=#materialize-x title=materialize(x) class="nav-link text-wrap d-inline-block w-100"> materialize(x) </a> <a href=#ignore title=ignore(...) class="nav-link text-wrap d-inline-block w-100"> ignore(...) </a> <a href=#sleep-seconds title=sleep(seconds) class="nav-link text-wrap d-inline-block w-100"> sleep(seconds) </a> <a href=#sleepeachrow-seconds title=sleepEachRow(seconds) class="nav-link text-wrap d-inline-block w-100"> sleepEachRow(seconds) </a> <a href=#currentdatabase title=currentDatabase() class="nav-link text-wrap d-inline-block w-100"> currentDatabase() </a> <a href=#currentuser title=currentUser() class="nav-link text-wrap d-inline-block w-100"> currentUser() </a> <a href=#isfinite-x title=isFinite(x) class="nav-link text-wrap d-inline-block w-100"> isFinite(x) </a> <a href=#isinfinite-x title=isInfinite(x) class="nav-link text-wrap d-inline-block w-100"> isInfinite(x) </a> <a href=#isnan-x title=isNaN(x) class="nav-link text-wrap d-inline-block w-100"> isNaN(x) </a> <a href=#hascolumnintable-hostname-username-password-database-table-column title="hasColumnInTable(['hostname'[, 'username'[, 'password']],] 'database', 'table', 'column')" class="nav-link text-wrap d-inline-block w-100"> hasColumnInTable(['hostname'[, 'username'[, 'password']],] 'database', 'table', 'column') </a> <a href=#function-bar title=bar class="nav-link text-wrap d-inline-block w-100"> bar </a> <a href=#transform title=transform class="nav-link text-wrap d-inline-block w-100"> transform </a> <a href=#formatreadablesize-x title=formatReadableSize(x) class="nav-link text-wrap d-inline-block w-100"> formatReadableSize(x) </a> <a href=#least-a-b title="least(a, b)" class="nav-link text-wrap d-inline-block w-100"> least(a, b) </a> <a href=#greatest-a-b title="greatest(a, b)" class="nav-link text-wrap d-inline-block w-100"> greatest(a, b) </a> <a href=#uptime title=uptime() class="nav-link text-wrap d-inline-block w-100"> uptime() </a> <a href=#version title=version() class="nav-link text-wrap d-inline-block w-100"> version() </a> <a href=#timezone title=timezone() class="nav-link text-wrap d-inline-block w-100"> timezone() </a> <a href=#blocknumber title=blockNumber class="nav-link text-wrap d-inline-block w-100"> blockNumber </a> <a href=#function-rownumberinblock title=rowNumberInBlock class="nav-link text-wrap d-inline-block w-100"> rowNumberInBlock </a> <a href=#rownumberinallblocks title=rowNumberInAllBlocks() class="nav-link text-wrap d-inline-block w-100"> rowNumberInAllBlocks() </a> <a href=#neighbor-column-offset-default-value title="neighbor(column, offset[, default_value])" class="nav-link text-wrap d-inline-block w-100"> neighbor(column, offset[, default_value]) </a> <a href=#other_functions-runningdifference title=runningDifference(x) class="nav-link text-wrap d-inline-block w-100"> runningDifference(x) </a> <a href=#runningdifferencestartingwithfirstvalue title=runningDifferenceStartingWithFirstValue class="nav-link text-wrap d-inline-block w-100"> runningDifferenceStartingWithFirstValue </a> <a href=#macnumtostring-num title=MACNumToString(num) class="nav-link text-wrap d-inline-block w-100"> MACNumToString(num) </a> <a href=#macstringtonum-s title=MACStringToNum(s) class="nav-link text-wrap d-inline-block w-100"> MACStringToNum(s) </a> <a href=#macstringtooui-s title=MACStringToOUI(s) class="nav-link text-wrap d-inline-block w-100"> MACStringToOUI(s) </a> <a href=#getsizeofenumtype title=getSizeOfEnumType class="nav-link text-wrap d-inline-block w-100"> getSizeOfEnumType </a> <a href=#tocolumntypename title=toColumnTypeName class="nav-link text-wrap d-inline-block w-100"> toColumnTypeName </a> <a href=#dumpcolumnstructure title=dumpColumnStructure class="nav-link text-wrap d-inline-block w-100"> dumpColumnStructure </a> <a href=#defaultvalueofargumenttype title=defaultValueOfArgumentType class="nav-link text-wrap d-inline-block w-100"> defaultValueOfArgumentType </a> <a href=#indexhint title=indexHint class="nav-link text-wrap d-inline-block w-100"> indexHint </a> <a href=#replicate title=replicate class="nav-link text-wrap d-inline-block w-100"> replicate </a> <a href=#function-filesystemavailable title=filesystemAvailable class="nav-link text-wrap d-inline-block w-100"> filesystemAvailable </a> <a href=#filesystemcapacity title=filesystemCapacity class="nav-link text-wrap d-inline-block w-100"> filesystemCapacity </a> <a href=#function-finalizeaggregation title=finalizeAggregation class="nav-link text-wrap d-inline-block w-100"> finalizeAggregation </a> <a href=#function-runningaccumulate title=runningAccumulate class="nav-link text-wrap d-inline-block w-100"> runningAccumulate </a> <a href=#other_functions-joinget title="joinGet('join_storage_table_name', 'get_column', join_key)" class="nav-link text-wrap d-inline-block w-100"> joinGet('join_storage_table_name', 'get_column', join_key) </a> <a href=#modelevaluate-model-name title="modelEvaluate(model_name, ...)" class="nav-link text-wrap d-inline-block w-100"> modelEvaluate(model_name, ...) </a> <a href=#throwif-x-custom-message title="throwIf(x[, custom_message])" class="nav-link text-wrap d-inline-block w-100"> throwIf(x[, custom_message]) </a> <a href=#identity title=identity() class="nav-link text-wrap d-inline-block w-100"> identity() </a> </nav> <a href=#aggregate_functions title="Aggregate functions" class="nav-link text-wrap d-inline-block w-100"> Aggregate functions </a> <nav id=toc-toc-118 class="nav flex-column pl-2"> <a href=#null-processing_1 title="NULL processing" class="nav-link text-wrap d-inline-block w-100"> NULL processing </a> </nav> <a href=#function-reference title="Function Reference" class="nav-link text-wrap d-inline-block w-100"> Function Reference </a> <nav id=toc-toc-119 class="nav flex-column pl-2"> <a href=#agg_function-count title=count class="nav-link text-wrap d-inline-block w-100"> count </a> <a href=#agg_function-any title=any(x) class="nav-link text-wrap d-inline-block w-100"> any(x) </a> <a href=#anyheavy-x title=anyHeavy(x) class="nav-link text-wrap d-inline-block w-100"> anyHeavy(x) </a> <a href=#anylast-x title=anyLast(x) class="nav-link text-wrap d-inline-block w-100"> anyLast(x) </a> <a href=#groupbitand title=groupBitAnd class="nav-link text-wrap d-inline-block w-100"> groupBitAnd </a> <a href=#groupbitor title=groupBitOr class="nav-link text-wrap d-inline-block w-100"> groupBitOr </a> <a href=#groupbitxor title=groupBitXor class="nav-link text-wrap d-inline-block w-100"> groupBitXor </a> <a href=#groupbitmap title=groupBitmap class="nav-link text-wrap d-inline-block w-100"> groupBitmap </a> <a href=#agg_function-min title=min(x) class="nav-link text-wrap d-inline-block w-100"> min(x) </a> <a href=#agg_function-max title=max(x) class="nav-link text-wrap d-inline-block w-100"> max(x) </a> <a href=#agg_function-argMin title="argMin(arg, val)" class="nav-link text-wrap d-inline-block w-100"> argMin(arg, val) </a> <a href=#agg_function-argMax title="argMax(arg, val)" class="nav-link text-wrap d-inline-block w-100"> argMax(arg, val) </a> <a href=#agg_function-sum title=sum(x) class="nav-link text-wrap d-inline-block w-100"> sum(x) </a> <a href=#sumwithoverflow-x title=sumWithOverflow(x) class="nav-link text-wrap d-inline-block w-100"> sumWithOverflow(x) </a> <a href=#agg_functions-summap title="sumMap(key, value)" class="nav-link text-wrap d-inline-block w-100"> sumMap(key, value) </a> <a href=#skewpop title=skewPop class="nav-link text-wrap d-inline-block w-100"> skewPop </a> <a href=#skewsamp title=skewSamp class="nav-link text-wrap d-inline-block w-100"> skewSamp </a> <a href=#kurtpop title=kurtPop class="nav-link text-wrap d-inline-block w-100"> kurtPop </a> <a href=#kurtsamp title=kurtSamp class="nav-link text-wrap d-inline-block w-100"> kurtSamp </a> <a href=#agg_function-timeseriesgroupsum title="timeSeriesGroupSum(uid, timestamp, value)" class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupSum(uid, timestamp, value) </a> <a href=#agg_function-timeseriesgroupratesum title="timeSeriesGroupRateSum(uid, ts, val)" class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupRateSum(uid, ts, val) </a> <a href=#agg_function-avg title=avg(x) class="nav-link text-wrap d-inline-block w-100"> avg(x) </a> <a href=#agg_function-uniq title=uniq class="nav-link text-wrap d-inline-block w-100"> uniq </a> <a href=#agg_function-uniqcombined title=uniqCombined class="nav-link text-wrap d-inline-block w-100"> uniqCombined </a> <a href=#agg_function-uniqhll12 title=uniqHLL12 class="nav-link text-wrap d-inline-block w-100"> uniqHLL12 </a> <a href=#agg_function-uniqexact title=uniqExact class="nav-link text-wrap d-inline-block w-100"> uniqExact </a> <a href=#agg_function-grouparray title="groupArray(x), groupArray(max_size)(x)" class="nav-link text-wrap d-inline-block w-100"> groupArray(x), groupArray(max_size)(x) </a> <a href=#grouparrayinsertat-x title=groupArrayInsertAt(x) class="nav-link text-wrap d-inline-block w-100"> groupArrayInsertAt(x) </a> <a href=#agg_function-grouparraymovingsum title=groupArrayMovingSum class="nav-link text-wrap d-inline-block w-100"> groupArrayMovingSum </a> <a href=#agg_function-grouparraymovingavg title=groupArrayMovingAvg class="nav-link text-wrap d-inline-block w-100"> groupArrayMovingAvg </a> <a href=#groupuniqarray-x-groupuniqarray-max-size-x title="groupUniqArray(x), groupUniqArray(max_size)(x)" class="nav-link text-wrap d-inline-block w-100"> groupUniqArray(x), groupUniqArray(max_size)(x) </a> <a href=#agg_function-quantile title=quantile(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantile(level)(x) </a> <a href=#quantiledeterministic-level-x-determinator title="quantileDeterministic(level)(x, determinator)" class="nav-link text-wrap d-inline-block w-100"> quantileDeterministic(level)(x, determinator) </a> <a href=#agg_function-quantiletiming title=quantileTiming class="nav-link text-wrap d-inline-block w-100"> quantileTiming </a> <a href=#quantiletimingweighted-level-x-weight title="quantileTimingWeighted(level)(x, weight)" class="nav-link text-wrap d-inline-block w-100"> quantileTimingWeighted(level)(x, weight) </a> <a href=#quantileexact-level-x title=quantileExact(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantileExact(level)(x) </a> <a href=#quantileexactweighted-level-x-weight title="quantileExactWeighted(level)(x, weight)" class="nav-link text-wrap d-inline-block w-100"> quantileExactWeighted(level)(x, weight) </a> <a href=#quantiletdigest-level-x title=quantileTDigest(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantileTDigest(level)(x) </a> <a href=#median-x title=median(x) class="nav-link text-wrap d-inline-block w-100"> median(x) </a> <a href=#quantiles-level1-level2-x title="quantiles(level1, level2, ...)(x)" class="nav-link text-wrap d-inline-block w-100"> quantiles(level1, level2, ...)(x) </a> <a href=#varsamp-x title=varSamp(x) class="nav-link text-wrap d-inline-block w-100"> varSamp(x) </a> <a href=#varpop-x title=varPop(x) class="nav-link text-wrap d-inline-block w-100"> varPop(x) </a> <a href=#stddevsamp-x title=stddevSamp(x) class="nav-link text-wrap d-inline-block w-100"> stddevSamp(x) </a> <a href=#stddevpop-x title=stddevPop(x) class="nav-link text-wrap d-inline-block w-100"> stddevPop(x) </a> <a href=#topk-n-column title=topK(N)(column) class="nav-link text-wrap d-inline-block w-100"> topK(N)(column) </a> <a href=#covarsamp-x-y title="covarSamp(x, y)" class="nav-link text-wrap d-inline-block w-100"> covarSamp(x, y) </a> <a href=#covarpop-x-y title="covarPop(x, y)" class="nav-link text-wrap d-inline-block w-100"> covarPop(x, y) </a> <a href=#corr-x-y title="corr(x, y)" class="nav-link text-wrap d-inline-block w-100"> corr(x, y) </a> <a href=#simplelinearregression title=simpleLinearRegression class="nav-link text-wrap d-inline-block w-100"> simpleLinearRegression </a> <a href=#agg_functions-stochasticlinearregression title=stochasticLinearRegression class="nav-link text-wrap d-inline-block w-100"> stochasticLinearRegression </a> <nav id=toc-toc-119-50 class="nav flex-column pl-2"> <a href=#agg_functions-stochasticlinearregression-parameters title=Parameters class="nav-link text-wrap d-inline-block w-100"> Parameters </a> <a href=#agg_functions-stochasticlinearregression-usage title=Usage class="nav-link text-wrap d-inline-block w-100"> Usage </a> <a href=#agg_functions-stochasticlinearregression-notes title=Notes class="nav-link text-wrap d-inline-block w-100"> Notes </a> </nav> <a href=#agg_functions-stochasticlogisticregression title=stochasticLogisticRegression class="nav-link text-wrap d-inline-block w-100"> stochasticLogisticRegression </a> <nav id=toc-toc-119-51 class="nav flex-column pl-2"> <a href=#agg_functions-stochasticlogisticregression-parameters title=Parameters class="nav-link text-wrap d-inline-block w-100"> Parameters </a> </nav> </nav> <a href=#aggregate_functions_combinators title="Aggregate function combinators" class="nav-link text-wrap d-inline-block w-100"> Aggregate function combinators </a> <nav id=toc-toc-120 class="nav flex-column pl-2"> <a href=#agg-functions-combinator-if title=-If class="nav-link text-wrap d-inline-block w-100"> -If </a> <a href=#array title=-Array class="nav-link text-wrap d-inline-block w-100"> -Array </a> <a href=#state title=-State class="nav-link text-wrap d-inline-block w-100"> -State </a> <a href=#aggregate_functions_combinators_merge title=-Merge class="nav-link text-wrap d-inline-block w-100"> -Merge </a> <a href=#aggregate_functions_combinators_mergestate title=-MergeState class="nav-link text-wrap d-inline-block w-100"> -MergeState </a> <a href=#foreach title=-ForEach class="nav-link text-wrap d-inline-block w-100"> -ForEach </a> <a href=#agg_functions-combinator-resample title=-Resample class="nav-link text-wrap d-inline-block w-100"> -Resample </a> </nav> <a href=#aggregate_functions_parametric title="Parametric aggregate functions" class="nav-link text-wrap d-inline-block w-100"> Parametric aggregate functions </a> <nav id=toc-toc-121 class="nav flex-column pl-2"> <a href=#histogram title=histogram class="nav-link text-wrap d-inline-block w-100"> histogram </a> <a href=#sequencematch-pattern-time-cond1-cond2 title="sequenceMatch(pattern)(time, cond1, cond2, ...)" class="nav-link text-wrap d-inline-block w-100"> sequenceMatch(pattern)(time, cond1, cond2, ...) </a> <a href=#sequencecount-pattern-time-cond1-cond2 title="sequenceCount(pattern)(time, cond1, cond2, ...)" class="nav-link text-wrap d-inline-block w-100"> sequenceCount(pattern)(time, cond1, cond2, ...) </a> <a href=#windowfunnel-window-timestamp-cond1-cond2-cond3 title="windowFunnel(window)(timestamp, cond1, cond2, cond3, ...)" class="nav-link text-wrap d-inline-block w-100"> windowFunnel(window)(timestamp, cond1, cond2, cond3, ...) </a> <a href=#retention-cond1-cond2 title="retention(cond1, cond2, ...)" class="nav-link text-wrap d-inline-block w-100"> retention(cond1, cond2, ...) </a> <a href=#uniqupto-n-x title=uniqUpTo(N)(x) class="nav-link text-wrap d-inline-block w-100"> uniqUpTo(N)(x) </a> <a href=#summapfiltered-keys-to-keep-keys-values title="sumMapFiltered(keys_to_keep)(keys, values)" class="nav-link text-wrap d-inline-block w-100"> sumMapFiltered(keys_to_keep)(keys, values) </a> </nav> <a href=#table-functions title="Table Functions" class="nav-link text-wrap d-inline-block w-100"> Table Functions </a> <a href=#file title=file class="nav-link text-wrap d-inline-block w-100"> file </a> <a href=#merge_1 title=merge class="nav-link text-wrap d-inline-block w-100"> merge </a> <a href=#numbers title=numbers class="nav-link text-wrap d-inline-block w-100"> numbers </a> <a href=#remote-remotesecure title="remote, remoteSecure" class="nav-link text-wrap d-inline-block w-100"> remote, remoteSecure </a> <a href=#url title=url class="nav-link text-wrap d-inline-block w-100"> url </a> <a href=#mysql_2 title=mysql class="nav-link text-wrap d-inline-block w-100"> mysql </a> <nav id=toc-toc-128 class="nav flex-column pl-2"> <a href=#usage-example_7 title="Usage Example" class="nav-link text-wrap d-inline-block w-100"> Usage Example </a> <a href=#see-also_4 title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#table_function-jdbc title=jdbc class="nav-link text-wrap d-inline-block w-100"> jdbc </a> <a href=#table_functions-odbc title=odbc class="nav-link text-wrap d-inline-block w-100"> odbc </a> <nav id=toc-toc-130 class="nav flex-column pl-2"> <a href=#usage-example_8 title="Usage example" class="nav-link text-wrap d-inline-block w-100"> Usage example </a> <a href=#see-also_5 title="See Also" class="nav-link text-wrap d-inline-block w-100"> See Also </a> </nav> <a href=#hdfs title=hdfs class="nav-link text-wrap d-inline-block w-100"> hdfs </a> <a href=#input title=input class="nav-link text-wrap d-inline-block w-100"> input </a> <a href=#dictionaries title=Dictionaries class="nav-link text-wrap d-inline-block w-100"> Dictionaries </a> <a href=#dicts-external_dicts title="External Dictionaries" class="nav-link text-wrap d-inline-block w-100"> External Dictionaries </a> <a href=#dicts-external_dicts_dict title="Configuring an External Dictionary" class="nav-link text-wrap d-inline-block w-100"> Configuring an External Dictionary </a> <a href=#dicts-external_dicts_dict_layout title="Storing Dictionaries in Memory" class="nav-link text-wrap d-inline-block w-100"> Storing Dictionaries in Memory </a> <nav id=toc-toc-136 class="nav flex-column pl-2"> <a href=#ways-to-store-dictionaries-in-memory title="Ways to Store Dictionaries in Memory" class="nav-link text-wrap d-inline-block w-100"> Ways to Store Dictionaries in Memory </a> <nav id=toc-toc-136-1 class="nav flex-column pl-2"> <a href=#flat title=flat class="nav-link text-wrap d-inline-block w-100"> flat </a> <a href=#dicts-external_dicts_dict_layout-hashed title=hashed class="nav-link text-wrap d-inline-block w-100"> hashed </a> <a href=#dicts-external_dicts_dict_layout-sparse_hashed title=sparse_hashed class="nav-link text-wrap d-inline-block w-100"> sparse_hashed </a> <a href=#complex-key-hashed title=complex_key_hashed class="nav-link text-wrap d-inline-block w-100"> complex_key_hashed </a> <a href=#range-hashed title=range_hashed class="nav-link text-wrap d-inline-block w-100"> range_hashed </a> <a href=#cache title=cache class="nav-link text-wrap d-inline-block w-100"> cache </a> <a href=#complex-key-cache title=complex_key_cache class="nav-link text-wrap d-inline-block w-100"> complex_key_cache </a> <a href=#ip-trie title=ip_trie class="nav-link text-wrap d-inline-block w-100"> ip_trie </a> </nav> </nav> <a href=#dictionary-updates title="Dictionary Updates" class="nav-link text-wrap d-inline-block w-100"> Dictionary Updates </a> <a href=#dicts-external_dicts_dict_sources title="Sources of External Dictionaries" class="nav-link text-wrap d-inline-block w-100"> Sources of External Dictionaries </a> <nav id=toc-toc-138 class="nav flex-column pl-2"> <a href=#dicts-external_dicts_dict_sources-local_file title="Local File" class="nav-link text-wrap d-inline-block w-100"> Local File </a> <a href=#dicts-external_dicts_dict_sources-executable title="Executable File" class="nav-link text-wrap d-inline-block w-100"> Executable File </a> <a href=#dicts-external_dicts_dict_sources-http title=HTTP(s) class="nav-link text-wrap d-inline-block w-100"> HTTP(s) </a> <a href=#dicts-external_dicts_dict_sources-odbc title=ODBC class="nav-link text-wrap d-inline-block w-100"> ODBC </a> <nav id=toc-toc-138-4 class="nav flex-column pl-2"> <a href=#known-vulnerability-of-the-odbc-dictionary-functionality title="Known vulnerability of the ODBC dictionary functionality" class="nav-link text-wrap d-inline-block w-100"> Known vulnerability of the ODBC dictionary functionality </a> <a href=#example-of-connecting-postgresql title="Example of Connecting PostgreSQL" class="nav-link text-wrap d-inline-block w-100"> Example of Connecting PostgreSQL </a> <a href=#example-of-connecting-ms-sql-server title="Example of Connecting MS SQL Server" class="nav-link text-wrap d-inline-block w-100"> Example of Connecting MS SQL Server </a> </nav> <a href=#dbms title=DBMS class="nav-link text-wrap d-inline-block w-100"> DBMS </a> <nav id=toc-toc-138-5 class="nav flex-column pl-2"> <a href=#dicts-external_dicts_dict_sources-mysql title=MySQL class="nav-link text-wrap d-inline-block w-100"> MySQL </a> <a href=#dicts-external_dicts_dict_sources-clickhouse title=ClickHouse class="nav-link text-wrap d-inline-block w-100"> ClickHouse </a> <a href=#dicts-external_dicts_dict_sources-mongodb title=MongoDB class="nav-link text-wrap d-inline-block w-100"> MongoDB </a> </nav> </nav> <a href=#dictionary-key-and-fields title="Dictionary Key and Fields" class="nav-link text-wrap d-inline-block w-100"> Dictionary Key and Fields </a> <nav id=toc-toc-139 class="nav flex-column pl-2"> <a href=#ext_dict_structure-key title=Key class="nav-link text-wrap d-inline-block w-100"> Key </a> <nav id=toc-toc-139-1 class="nav flex-column pl-2"> <a href=#numeric-key title="Numeric Key" class="nav-link text-wrap d-inline-block w-100"> Numeric Key </a> <a href=#composite-key title="Composite Key" class="nav-link text-wrap d-inline-block w-100"> Composite Key </a> </nav> <a href=#ext_dict_structure-attributes title=Attributes class="nav-link text-wrap d-inline-block w-100"> Attributes </a> </nav> <a href=#internal_dicts title="Internal dictionaries" class="nav-link text-wrap d-inline-block w-100"> Internal dictionaries </a> <a href=#operators title=Operators class="nav-link text-wrap d-inline-block w-100"> Operators </a> <nav id=toc-toc-141 class="nav flex-column pl-2"> <a href=#access-operators title="Access Operators" class="nav-link text-wrap d-inline-block w-100"> Access Operators </a> <a href=#numeric-negation-operator title="Numeric Negation Operator" class="nav-link text-wrap d-inline-block w-100"> Numeric Negation Operator </a> <a href=#multiplication-and-division-operators title="Multiplication and Division Operators" class="nav-link text-wrap d-inline-block w-100"> Multiplication and Division Operators </a> <a href=#addition-and-subtraction-operators title="Addition and Subtraction Operators" class="nav-link text-wrap d-inline-block w-100"> Addition and Subtraction Operators </a> <a href=#comparison-operators title="Comparison Operators" class="nav-link text-wrap d-inline-block w-100"> Comparison Operators </a> <a href=#operators-for-working-with-data-sets title="Operators for Working With Data Sets" class="nav-link text-wrap d-inline-block w-100"> Operators for Working With Data Sets </a> <a href=#operators-datetime title="Operator for Working With Dates and Times" class="nav-link text-wrap d-inline-block w-100"> Operator for Working With Dates and Times </a> <a href=#logical-negation-operator title="Logical Negation Operator" class="nav-link text-wrap d-inline-block w-100"> Logical Negation Operator </a> <a href=#logical-and-operator title="Logical AND Operator" class="nav-link text-wrap d-inline-block w-100"> Logical AND Operator </a> <a href=#logical-or-operator title="Logical OR Operator" class="nav-link text-wrap d-inline-block w-100"> Logical OR Operator </a> <a href=#conditional-operator title="Conditional Operator" class="nav-link text-wrap d-inline-block w-100"> Conditional Operator </a> <a href=#operator_case title="Conditional Expression" class="nav-link text-wrap d-inline-block w-100"> Conditional Expression </a> <a href=#concatenation-operator title="Concatenation Operator" class="nav-link text-wrap d-inline-block w-100"> Concatenation Operator </a> <a href=#lambda-creation-operator title="Lambda Creation Operator" class="nav-link text-wrap d-inline-block w-100"> Lambda Creation Operator </a> <a href=#array-creation-operator title="Array Creation Operator" class="nav-link text-wrap d-inline-block w-100"> Array Creation Operator </a> <a href=#tuple-creation-operator title="Tuple Creation Operator" class="nav-link text-wrap d-inline-block w-100"> Tuple Creation Operator </a> <a href=#associativity title=Associativity class="nav-link text-wrap d-inline-block w-100"> Associativity </a> <a href=#checking-for-null title="Checking for NULL" class="nav-link text-wrap d-inline-block w-100"> Checking for NULL </a> <nav id=toc-toc-141-18 class="nav flex-column pl-2"> <a href=#operator-is-null title="IS NULL" class="nav-link text-wrap d-inline-block w-100"> IS NULL </a> <a href=#is-not-null title="IS NOT NULL" class="nav-link text-wrap d-inline-block w-100"> IS NOT NULL </a> </nav> </nav> <a href=#syntax title=Syntax class="nav-link text-wrap d-inline-block w-100"> Syntax </a> <nav id=toc-toc-142 class="nav flex-column pl-2"> <a href=#spaces title=Spaces class="nav-link text-wrap d-inline-block w-100"> Spaces </a> <a href=#comments title=Comments class="nav-link text-wrap d-inline-block w-100"> Comments </a> <a href=#syntax-keywords title=Keywords class="nav-link text-wrap d-inline-block w-100"> Keywords </a> <a href=#syntax-identifiers title=Identifiers class="nav-link text-wrap d-inline-block w-100"> Identifiers </a> <a href=#literals title=Literals class="nav-link text-wrap d-inline-block w-100"> Literals </a> <nav id=toc-toc-142-5 class="nav flex-column pl-2"> <a href=#numeric title=Numeric class="nav-link text-wrap d-inline-block w-100"> Numeric </a> <a href=#syntax-string-literal title=String class="nav-link text-wrap d-inline-block w-100"> String </a> <a href=#compound title=Compound class="nav-link text-wrap d-inline-block w-100"> Compound </a> <a href=#null-literal title=NULL class="nav-link text-wrap d-inline-block w-100"> NULL </a> </nav> <a href=#functions_1 title=Functions class="nav-link text-wrap d-inline-block w-100"> Functions </a> <a href=#operators_1 title=Operators class="nav-link text-wrap d-inline-block w-100"> Operators </a> <a href=#data-types-and-database-table-engines title="Data Types and Database Table Engines" class="nav-link text-wrap d-inline-block w-100"> Data Types and Database Table Engines </a> <a href=#syntax-expression_aliases title="Expression Aliases" class="nav-link text-wrap d-inline-block w-100"> Expression Aliases </a> <nav id=toc-toc-142-9 class="nav flex-column pl-2"> <a href=#notes-on-usage title="Notes on Usage" class="nav-link text-wrap d-inline-block w-100"> Notes on Usage </a> </nav> <a href=#asterisk title=Asterisk class="nav-link text-wrap d-inline-block w-100"> Asterisk </a> <a href=#syntax-expressions title=Expressions class="nav-link text-wrap d-inline-block w-100"> Expressions </a> </nav> <a href=#operations title=Operations class="nav-link text-wrap d-inline-block w-100"> Operations </a> <a href=#requirements title=Requirements class="nav-link text-wrap d-inline-block w-100"> Requirements </a> <nav id=toc-toc-144 class="nav flex-column pl-2"> <a href=#cpu_1 title=CPU class="nav-link text-wrap d-inline-block w-100"> CPU </a> <a href=#ram title=RAM class="nav-link text-wrap d-inline-block w-100"> RAM </a> <a href=#swap-file title="Swap File" class="nav-link text-wrap d-inline-block w-100"> Swap File </a> <a href=#storage-subsystem title="Storage Subsystem" class="nav-link text-wrap d-inline-block w-100"> Storage Subsystem </a> <a href=#network title=Network class="nav-link text-wrap d-inline-block w-100"> Network </a> <a href=#software title=Software class="nav-link text-wrap d-inline-block w-100"> Software </a> </nav> <a href=#monitoring title=Monitoring class="nav-link text-wrap d-inline-block w-100"> Monitoring </a> <nav id=toc-toc-145 class="nav flex-column pl-2"> <a href=#resource-utilization title="Resource Utilization" class="nav-link text-wrap d-inline-block w-100"> Resource Utilization </a> <a href=#clickhouse-server-metrics title="ClickHouse Server Metrics" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Server Metrics </a> </nav> <a href=#troubleshooting title=Troubleshooting class="nav-link text-wrap d-inline-block w-100"> Troubleshooting </a> <nav id=toc-toc-146 class="nav flex-column pl-2"> <a href=#troubleshooting-installation-errors title=Installation class="nav-link text-wrap d-inline-block w-100"> Installation </a> <nav id=toc-toc-146-1 class="nav flex-column pl-2"> <a href=#you-cannot-get-deb-packages-from-clickhouse-repository-with-apt-get title="You Cannot Get Deb Packages from ClickHouse Repository With apt-get" class="nav-link text-wrap d-inline-block w-100"> You Cannot Get Deb Packages from ClickHouse Repository With apt-get </a> </nav> <a href=#troubleshooting-accepts-no-connections title="Connecting to the Server" class="nav-link text-wrap d-inline-block w-100"> Connecting to the Server </a> <nav id=toc-toc-146-2 class="nav flex-column pl-2"> <a href=#server-is-not-running title="Server Is Not Running" class="nav-link text-wrap d-inline-block w-100"> Server Is Not Running </a> <a href=#configuration-parameters title="Configuration Parameters" class="nav-link text-wrap d-inline-block w-100"> Configuration Parameters </a> </nav> <a href=#troubleshooting-does-not-process-queries title="Query Processing" class="nav-link text-wrap d-inline-block w-100"> Query Processing </a> <a href=#troubleshooting-too-slow title="Efficiency of Query Processing" class="nav-link text-wrap d-inline-block w-100"> Efficiency of Query Processing </a> </nav> <a href=#usage-recommendations title="Usage Recommendations" class="nav-link text-wrap d-inline-block w-100"> Usage Recommendations </a> <nav id=toc-toc-147 class="nav flex-column pl-2"> <a href=#cpu-scaling-governor title="CPU Scaling Governor" class="nav-link text-wrap d-inline-block w-100"> CPU Scaling Governor </a> <a href=#cpu-limitations title="CPU Limitations" class="nav-link text-wrap d-inline-block w-100"> CPU Limitations </a> <a href=#ram_1 title=RAM class="nav-link text-wrap d-inline-block w-100"> RAM </a> <a href=#huge-pages title="Huge Pages" class="nav-link text-wrap d-inline-block w-100"> Huge Pages </a> <a href=#storage-subsystem_1 title="Storage Subsystem" class="nav-link text-wrap d-inline-block w-100"> Storage Subsystem </a> <a href=#raid title=RAID class="nav-link text-wrap d-inline-block w-100"> RAID </a> <a href=#file-system title="File System" class="nav-link text-wrap d-inline-block w-100"> File System </a> <a href=#linux-kernel title="Linux Kernel" class="nav-link text-wrap d-inline-block w-100"> Linux Kernel </a> <a href=#network_1 title=Network class="nav-link text-wrap d-inline-block w-100"> Network </a> <a href=#zookeeper title=ZooKeeper class="nav-link text-wrap d-inline-block w-100"> ZooKeeper </a> </nav> <a href=#clickhouse-update title="ClickHouse Update" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Update </a> <a href=#access-rights title="Access Rights" class="nav-link text-wrap d-inline-block w-100"> Access Rights </a> <a href=#data-backup title="Data Backup" class="nav-link text-wrap d-inline-block w-100"> Data Backup </a> <nav id=toc-toc-150 class="nav flex-column pl-2"> <a href=#duplicating-source-data-somewhere-else title="Duplicating Source Data Somewhere Else" class="nav-link text-wrap d-inline-block w-100"> Duplicating Source Data Somewhere Else </a> <a href=#filesystem-snapshots title="Filesystem Snapshots" class="nav-link text-wrap d-inline-block w-100"> Filesystem Snapshots </a> <a href=#clickhouse-copier title=clickhouse-copier class="nav-link text-wrap d-inline-block w-100"> clickhouse-copier </a> <a href=#manipulations-with-parts title="Manipulations with Parts" class="nav-link text-wrap d-inline-block w-100"> Manipulations with Parts </a> </nav> <a href=#configuration_files title="Configuration Files" class="nav-link text-wrap d-inline-block w-100"> Configuration Files </a> <a href=#quotas title=Quotas class="nav-link text-wrap d-inline-block w-100"> Quotas </a> <a href=#system-tables title="System tables" class="nav-link text-wrap d-inline-block w-100"> System tables </a> <nav id=toc-toc-153 class="nav flex-column pl-2"> <a href=#system_tables-asynchronous_metrics title=system.asynchronous_metrics class="nav-link text-wrap d-inline-block w-100"> system.asynchronous_metrics </a> <a href=#system-clusters title=system.clusters class="nav-link text-wrap d-inline-block w-100"> system.clusters </a> <a href=#system-columns title=system.columns class="nav-link text-wrap d-inline-block w-100"> system.columns </a> <a href=#system_contributors title=system.contributors class="nav-link text-wrap d-inline-block w-100"> system.contributors </a> <a href=#system-databases title=system.databases class="nav-link text-wrap d-inline-block w-100"> system.databases </a> <a href=#system_tables-detached_parts title=system.detached_parts class="nav-link text-wrap d-inline-block w-100"> system.detached_parts </a> <a href=#system-dictionaries title=system.dictionaries class="nav-link text-wrap d-inline-block w-100"> system.dictionaries </a> <a href=#system_tables-events title=system.events class="nav-link text-wrap d-inline-block w-100"> system.events </a> <a href=#system-functions title=system.functions class="nav-link text-wrap d-inline-block w-100"> system.functions </a> <a href=#system-graphite-retentions title=system.graphite_retentions class="nav-link text-wrap d-inline-block w-100"> system.graphite_retentions </a> <a href=#system-merges title=system.merges class="nav-link text-wrap d-inline-block w-100"> system.merges </a> <a href=#system_tables-metrics title=system.metrics class="nav-link text-wrap d-inline-block w-100"> system.metrics </a> <a href=#system-numbers title=system.numbers class="nav-link text-wrap d-inline-block w-100"> system.numbers </a> <a href=#system-numbers-mt title=system.numbers_mt class="nav-link text-wrap d-inline-block w-100"> system.numbers_mt </a> <a href=#system-one title=system.one class="nav-link text-wrap d-inline-block w-100"> system.one </a> <a href=#system_tables-parts title=system.parts class="nav-link text-wrap d-inline-block w-100"> system.parts </a> <a href=#system_tables-part-log title=system.part_log class="nav-link text-wrap d-inline-block w-100"> system.part_log </a> <a href=#system-processes title=system.processes class="nav-link text-wrap d-inline-block w-100"> system.processes </a> <a href=#system_tables-query-log title=system.query_log class="nav-link text-wrap d-inline-block w-100"> system.query_log </a> <a href=#system_tables-replicas title=system.replicas class="nav-link text-wrap d-inline-block w-100"> system.replicas </a> <a href=#system-settings title=system.settings class="nav-link text-wrap d-inline-block w-100"> system.settings </a> <a href=#system-tables_1 title=system.tables class="nav-link text-wrap d-inline-block w-100"> system.tables </a> <a href=#system-zookeeper title=system.zookeeper class="nav-link text-wrap d-inline-block w-100"> system.zookeeper </a> <a href=#system_tables-mutations title=system.mutations class="nav-link text-wrap d-inline-block w-100"> system.mutations </a> </nav> <a href=#server_settings title="Server configuration parameters" class="nav-link text-wrap d-inline-block w-100"> Server configuration parameters </a> <a href=#server-settings title="Server settings" class="nav-link text-wrap d-inline-block w-100"> Server settings </a> <nav id=toc-toc-155 class="nav flex-column pl-2"> <a href=#builtin-dictionaries-reload-interval title=builtin_dictionaries_reload_interval class="nav-link text-wrap d-inline-block w-100"> builtin_dictionaries_reload_interval </a> <a href=#compression title=compression class="nav-link text-wrap d-inline-block w-100"> compression </a> <a href=#default-database title=default_database class="nav-link text-wrap d-inline-block w-100"> default_database </a> <a href=#default-profile title=default_profile class="nav-link text-wrap d-inline-block w-100"> default_profile </a> <a href=#server_settings-dictionaries_config title=dictionaries_config class="nav-link text-wrap d-inline-block w-100"> dictionaries_config </a> <a href=#server_settings-dictionaries_lazy_load title=dictionaries_lazy_load class="nav-link text-wrap d-inline-block w-100"> dictionaries_lazy_load </a> <a href=#server_settings-format_schema_path title=format_schema_path class="nav-link text-wrap d-inline-block w-100"> format_schema_path </a> <a href=#server_settings-graphite title=graphite class="nav-link text-wrap d-inline-block w-100"> graphite </a> <a href=#server_settings-graphite_rollup title=graphite_rollup class="nav-link text-wrap d-inline-block w-100"> graphite_rollup </a> <a href=#http-port-https-port title=http_port/https_port class="nav-link text-wrap d-inline-block w-100"> http_port/https_port </a> <a href=#http-server-default-response title=http_server_default_response class="nav-link text-wrap d-inline-block w-100"> http_server_default_response </a> <a href=#server_settings-include_from title=include_from class="nav-link text-wrap d-inline-block w-100"> include_from </a> <a href=#interserver-http-port title=interserver_http_port class="nav-link text-wrap d-inline-block w-100"> interserver_http_port </a> <a href=#interserver-http-host title=interserver_http_host class="nav-link text-wrap d-inline-block w-100"> interserver_http_host </a> <a href=#keep-alive-timeout title=keep_alive_timeout class="nav-link text-wrap d-inline-block w-100"> keep_alive_timeout </a> <a href=#server_settings-listen_host title=listen_host class="nav-link text-wrap d-inline-block w-100"> listen_host </a> <a href=#server_settings-logger title=logger class="nav-link text-wrap d-inline-block w-100"> logger </a> <a href=#macros title=macros class="nav-link text-wrap d-inline-block w-100"> macros </a> <a href=#mark-cache-size title=mark_cache_size class="nav-link text-wrap d-inline-block w-100"> mark_cache_size </a> <a href=#max-concurrent-queries title=max_concurrent_queries class="nav-link text-wrap d-inline-block w-100"> max_concurrent_queries </a> <a href=#max-connections title=max_connections class="nav-link text-wrap d-inline-block w-100"> max_connections </a> <a href=#max-open-files title=max_open_files class="nav-link text-wrap d-inline-block w-100"> max_open_files </a> <a href=#max-table-size-to-drop title=max_table_size_to_drop class="nav-link text-wrap d-inline-block w-100"> max_table_size_to_drop </a> <a href=#server_settings-merge_tree title=merge_tree class="nav-link text-wrap d-inline-block w-100"> merge_tree </a> <a href=#server_settings-openssl title=openSSL class="nav-link text-wrap d-inline-block w-100"> openSSL </a> <a href=#server_settings-part-log title=part_log class="nav-link text-wrap d-inline-block w-100"> part_log </a> <a href=#server_settings-path title=path class="nav-link text-wrap d-inline-block w-100"> path </a> <a href=#server_settings-query-log title=query_log class="nav-link text-wrap d-inline-block w-100"> query_log </a> <a href=#query-masking-rules title=query_masking_rules class="nav-link text-wrap d-inline-block w-100"> query_masking_rules </a> <a href=#server_settings_remote_servers title=remote_servers class="nav-link text-wrap d-inline-block w-100"> remote_servers </a> <a href=#timezone_1 title=timezone class="nav-link text-wrap d-inline-block w-100"> timezone </a> <a href=#server_settings-tcp_port title=tcp_port class="nav-link text-wrap d-inline-block w-100"> tcp_port </a> <a href=#server_settings-tcp_port_secure title=tcp_port_secure class="nav-link text-wrap d-inline-block w-100"> tcp_port_secure </a> <a href=#tmp-path title=tmp_path class="nav-link text-wrap d-inline-block w-100"> tmp_path </a> <a href=#server-settings-uncompressed_cache_size title=uncompressed_cache_size class="nav-link text-wrap d-inline-block w-100"> uncompressed_cache_size </a> <a href=#server_settings-user_files_path title=user_files_path class="nav-link text-wrap d-inline-block w-100"> user_files_path </a> <a href=#users-config title=users_config class="nav-link text-wrap d-inline-block w-100"> users_config </a> <a href=#server-settings_zookeeper title=zookeeper class="nav-link text-wrap d-inline-block w-100"> zookeeper </a> <a href=#server-settings-use_minimalistic_part_header_in_zookeeper title=use_minimalistic_part_header_in_zookeeper class="nav-link text-wrap d-inline-block w-100"> use_minimalistic_part_header_in_zookeeper </a> <a href=#server-settings-disable_internal_dns_cache title=disable_internal_dns_cache class="nav-link text-wrap d-inline-block w-100"> disable_internal_dns_cache </a> <a href=#server-settings-dns_cache_update_period title=dns_cache_update_period class="nav-link text-wrap d-inline-block w-100"> dns_cache_update_period </a> </nav> <a href=#settings title=Settings class="nav-link text-wrap d-inline-block w-100"> Settings </a> <a href=#permissions_for_queries title="Permissions for queries" class="nav-link text-wrap d-inline-block w-100"> Permissions for queries </a> <nav id=toc-toc-157 class="nav flex-column pl-2"> <a href=#settings_readonly title=readonly class="nav-link text-wrap d-inline-block w-100"> readonly </a> <a href=#settings_allow_ddl title=allow_ddl class="nav-link text-wrap d-inline-block w-100"> allow_ddl </a> </nav> <a href=#restrictions-on-query-complexity title="Restrictions on query complexity" class="nav-link text-wrap d-inline-block w-100"> Restrictions on query complexity </a> <nav id=toc-toc-158 class="nav flex-column pl-2"> <a href=#settings_max_memory_usage title=max_memory_usage class="nav-link text-wrap d-inline-block w-100"> max_memory_usage </a> <a href=#max-memory-usage-for-user title=max_memory_usage_for_user class="nav-link text-wrap d-inline-block w-100"> max_memory_usage_for_user </a> <a href=#max-memory-usage-for-all-queries title=max_memory_usage_for_all_queries class="nav-link text-wrap d-inline-block w-100"> max_memory_usage_for_all_queries </a> <a href=#max-rows-to-read title=max_rows_to_read class="nav-link text-wrap d-inline-block w-100"> max_rows_to_read </a> <a href=#max-bytes-to-read title=max_bytes_to_read class="nav-link text-wrap d-inline-block w-100"> max_bytes_to_read </a> <a href=#read-overflow-mode title=read_overflow_mode class="nav-link text-wrap d-inline-block w-100"> read_overflow_mode </a> <a href=#settings-max_rows_to_group_by title=max_rows_to_group_by class="nav-link text-wrap d-inline-block w-100"> max_rows_to_group_by </a> <a href=#group-by-overflow-mode title=group_by_overflow_mode class="nav-link text-wrap d-inline-block w-100"> group_by_overflow_mode </a> <a href=#settings-max_bytes_before_external_group_by title=max_bytes_before_external_group_by class="nav-link text-wrap d-inline-block w-100"> max_bytes_before_external_group_by </a> <a href=#max-rows-to-sort title=max_rows_to_sort class="nav-link text-wrap d-inline-block w-100"> max_rows_to_sort </a> <a href=#max-bytes-to-sort title=max_bytes_to_sort class="nav-link text-wrap d-inline-block w-100"> max_bytes_to_sort </a> <a href=#sort-overflow-mode title=sort_overflow_mode class="nav-link text-wrap d-inline-block w-100"> sort_overflow_mode </a> <a href=#max-result-rows title=max_result_rows class="nav-link text-wrap d-inline-block w-100"> max_result_rows </a> <a href=#max-result-bytes title=max_result_bytes class="nav-link text-wrap d-inline-block w-100"> max_result_bytes </a> <a href=#result-overflow-mode title=result_overflow_mode class="nav-link text-wrap d-inline-block w-100"> result_overflow_mode </a> <a href=#max-execution-time title=max_execution_time class="nav-link text-wrap d-inline-block w-100"> max_execution_time </a> <a href=#timeout-overflow-mode title=timeout_overflow_mode class="nav-link text-wrap d-inline-block w-100"> timeout_overflow_mode </a> <a href=#min-execution-speed title=min_execution_speed class="nav-link text-wrap d-inline-block w-100"> min_execution_speed </a> <a href=#min-execution-speed-bytes title=min_execution_speed_bytes class="nav-link text-wrap d-inline-block w-100"> min_execution_speed_bytes </a> <a href=#max-execution-speed title=max_execution_speed class="nav-link text-wrap d-inline-block w-100"> max_execution_speed </a> <a href=#max-execution-speed-bytes title=max_execution_speed_bytes class="nav-link text-wrap d-inline-block w-100"> max_execution_speed_bytes </a> <a href=#timeout-before-checking-execution-speed title=timeout_before_checking_execution_speed class="nav-link text-wrap d-inline-block w-100"> timeout_before_checking_execution_speed </a> <a href=#max-columns-to-read title=max_columns_to_read class="nav-link text-wrap d-inline-block w-100"> max_columns_to_read </a> <a href=#max-temporary-columns title=max_temporary_columns class="nav-link text-wrap d-inline-block w-100"> max_temporary_columns </a> <a href=#max-temporary-non-const-columns title=max_temporary_non_const_columns class="nav-link text-wrap d-inline-block w-100"> max_temporary_non_const_columns </a> <a href=#max-subquery-depth title=max_subquery_depth class="nav-link text-wrap d-inline-block w-100"> max_subquery_depth </a> <a href=#max-pipeline-depth title=max_pipeline_depth class="nav-link text-wrap d-inline-block w-100"> max_pipeline_depth </a> <a href=#max-ast-depth title=max_ast_depth class="nav-link text-wrap d-inline-block w-100"> max_ast_depth </a> <a href=#max-ast-elements title=max_ast_elements class="nav-link text-wrap d-inline-block w-100"> max_ast_elements </a> <a href=#max-rows-in-set title=max_rows_in_set class="nav-link text-wrap d-inline-block w-100"> max_rows_in_set </a> <a href=#max-bytes-in-set title=max_bytes_in_set class="nav-link text-wrap d-inline-block w-100"> max_bytes_in_set </a> <a href=#set-overflow-mode title=set_overflow_mode class="nav-link text-wrap d-inline-block w-100"> set_overflow_mode </a> <a href=#max-rows-in-distinct title=max_rows_in_distinct class="nav-link text-wrap d-inline-block w-100"> max_rows_in_distinct </a> <a href=#max-bytes-in-distinct title=max_bytes_in_distinct class="nav-link text-wrap d-inline-block w-100"> max_bytes_in_distinct </a> <a href=#distinct-overflow-mode title=distinct_overflow_mode class="nav-link text-wrap d-inline-block w-100"> distinct_overflow_mode </a> <a href=#max-rows-to-transfer title=max_rows_to_transfer class="nav-link text-wrap d-inline-block w-100"> max_rows_to_transfer </a> <a href=#max-bytes-to-transfer title=max_bytes_to_transfer class="nav-link text-wrap d-inline-block w-100"> max_bytes_to_transfer </a> <a href=#transfer-overflow-mode title=transfer_overflow_mode class="nav-link text-wrap d-inline-block w-100"> transfer_overflow_mode </a> <a href=#settings-max_rows_in_join title=max_rows_in_join class="nav-link text-wrap d-inline-block w-100"> max_rows_in_join </a> <a href=#settings-max_bytes_in_join title=max_bytes_in_join class="nav-link text-wrap d-inline-block w-100"> max_bytes_in_join </a> <a href=#settings-join_overflow_mode title=join_overflow_mode class="nav-link text-wrap d-inline-block w-100"> join_overflow_mode </a> <a href=#max-partitions-per-insert-block title=max_partitions_per_insert_block class="nav-link text-wrap d-inline-block w-100"> max_partitions_per_insert_block </a> </nav> <a href=#settings_1 title=Settings class="nav-link text-wrap d-inline-block w-100"> Settings </a> <nav id=toc-toc-159 class="nav flex-column pl-2"> <a href=#distributed-product-mode title=distributed_product_mode class="nav-link text-wrap d-inline-block w-100"> distributed_product_mode </a> <a href=#enable-optimize-predicate-expression title=enable_optimize_predicate_expression class="nav-link text-wrap d-inline-block w-100"> enable_optimize_predicate_expression </a> <a href=#settings-fallback_to_stale_replicas_for_distributed_queries title=fallback_to_stale_replicas_for_distributed_queries class="nav-link text-wrap d-inline-block w-100"> fallback_to_stale_replicas_for_distributed_queries </a> <a href=#settings-force_index_by_date title=force_index_by_date class="nav-link text-wrap d-inline-block w-100"> force_index_by_date </a> <a href=#force-primary-key title=force_primary_key class="nav-link text-wrap d-inline-block w-100"> force_primary_key </a> <a href=#format-schema title=format_schema class="nav-link text-wrap d-inline-block w-100"> format_schema </a> <a href=#fsync-metadata title=fsync_metadata class="nav-link text-wrap d-inline-block w-100"> fsync_metadata </a> <a href=#settings-enable_http_compression title=enable_http_compression class="nav-link text-wrap d-inline-block w-100"> enable_http_compression </a> <a href=#settings-http_zlib_compression_level title=http_zlib_compression_level class="nav-link text-wrap d-inline-block w-100"> http_zlib_compression_level </a> <a href=#settings-http_native_compression_disable_checksumming_on_decompress title=http_native_compression_disable_checksumming_on_decompress class="nav-link text-wrap d-inline-block w-100"> http_native_compression_disable_checksumming_on_decompress </a> <a href=#settings-send_progress_in_http_headers title=send_progress_in_http_headers class="nav-link text-wrap d-inline-block w-100"> send_progress_in_http_headers </a> <a href=#input-format-allow-errors-num title=input_format_allow_errors_num class="nav-link text-wrap d-inline-block w-100"> input_format_allow_errors_num </a> <a href=#input-format-allow-errors-ratio title=input_format_allow_errors_ratio class="nav-link text-wrap d-inline-block w-100"> input_format_allow_errors_ratio </a> <a href=#settings-input_format_values_interpret_expressions title=input_format_values_interpret_expressions class="nav-link text-wrap d-inline-block w-100"> input_format_values_interpret_expressions </a> <a href=#session_settings-input_format_defaults_for_omitted_fields title=input_format_defaults_for_omitted_fields class="nav-link text-wrap d-inline-block w-100"> input_format_defaults_for_omitted_fields </a> <a href=#settings-input_format_null_as_default title=input_format_null_as_default class="nav-link text-wrap d-inline-block w-100"> input_format_null_as_default </a> <a href=#settings-input_format_skip_unknown_fields title=input_format_skip_unknown_fields class="nav-link text-wrap d-inline-block w-100"> input_format_skip_unknown_fields </a> <a href=#settings-input_format_import_nested_json title=input_format_import_nested_json class="nav-link text-wrap d-inline-block w-100"> input_format_import_nested_json </a> <a href=#settings-input_format_with_names_use_header title=input_format_with_names_use_header class="nav-link text-wrap d-inline-block w-100"> input_format_with_names_use_header </a> <a href=#settings-date_time_input_format title=date_time_input_format class="nav-link text-wrap d-inline-block w-100"> date_time_input_format </a> <a href=#settings-join_default_strictness title=join_default_strictness class="nav-link text-wrap d-inline-block w-100"> join_default_strictness </a> <a href=#settings-join_any_take_last_row title=join_any_take_last_row class="nav-link text-wrap d-inline-block w-100"> join_any_take_last_row </a> <a href=#settings-join_use_nulls title=join_use_nulls class="nav-link text-wrap d-inline-block w-100"> join_use_nulls </a> <a href=#settings-join_any_take_last_row title=join_any_take_last_row class="nav-link text-wrap d-inline-block w-100"> join_any_take_last_row </a> <a href=#max-block-size title=max_block_size class="nav-link text-wrap d-inline-block w-100"> max_block_size </a> <a href=#preferred-block-size-bytes title=preferred_block_size_bytes class="nav-link text-wrap d-inline-block w-100"> preferred_block_size_bytes </a> <a href=#setting-merge_tree_uniform_read_distribution title=merge_tree_uniform_read_distribution class="nav-link text-wrap d-inline-block w-100"> merge_tree_uniform_read_distribution </a> <a href=#setting-merge_tree_min_rows_for_concurrent_read title=merge_tree_min_rows_for_concurrent_read class="nav-link text-wrap d-inline-block w-100"> merge_tree_min_rows_for_concurrent_read </a> <a href=#setting-merge_tree_min_rows_for_seek title=merge_tree_min_rows_for_seek class="nav-link text-wrap d-inline-block w-100"> merge_tree_min_rows_for_seek </a> <a href=#setting-merge_tree_coarse_index_granularity title=merge_tree_coarse_index_granularity class="nav-link text-wrap d-inline-block w-100"> merge_tree_coarse_index_granularity </a> <a href=#setting-merge_tree_max_rows_to_use_cache title=merge_tree_max_rows_to_use_cache class="nav-link text-wrap d-inline-block w-100"> merge_tree_max_rows_to_use_cache </a> <a href=#settings-min_bytes_to_use_direct_io title=min_bytes_to_use_direct_io class="nav-link text-wrap d-inline-block w-100"> min_bytes_to_use_direct_io </a> <a href=#settings-log-queries title=log_queries class="nav-link text-wrap d-inline-block w-100"> log_queries </a> <a href=#settings-max_insert_block_size title=max_insert_block_size class="nav-link text-wrap d-inline-block w-100"> max_insert_block_size </a> <a href=#settings-max_replica_delay_for_distributed_queries title=max_replica_delay_for_distributed_queries class="nav-link text-wrap d-inline-block w-100"> max_replica_delay_for_distributed_queries </a> <a href=#settings-max_threads title=max_threads class="nav-link text-wrap d-inline-block w-100"> max_threads </a> <a href=#max-compress-block-size title=max_compress_block_size class="nav-link text-wrap d-inline-block w-100"> max_compress_block_size </a> <a href=#min-compress-block-size title=min_compress_block_size class="nav-link text-wrap d-inline-block w-100"> min_compress_block_size </a> <a href=#settings-max_query_size title=max_query_size class="nav-link text-wrap d-inline-block w-100"> max_query_size </a> <a href=#interactive-delay title=interactive_delay class="nav-link text-wrap d-inline-block w-100"> interactive_delay </a> <a href=#connect-timeout-receive-timeout-send-timeout title="connect_timeout, receive_timeout, send_timeout" class="nav-link text-wrap d-inline-block w-100"> connect_timeout, receive_timeout, send_timeout </a> <a href=#poll-interval title=poll_interval class="nav-link text-wrap d-inline-block w-100"> poll_interval </a> <a href=#max-distributed-connections title=max_distributed_connections class="nav-link text-wrap d-inline-block w-100"> max_distributed_connections </a> <a href=#distributed-connections-pool-size title=distributed_connections_pool_size class="nav-link text-wrap d-inline-block w-100"> distributed_connections_pool_size </a> <a href=#connect-timeout-with-failover-ms title=connect_timeout_with_failover_ms class="nav-link text-wrap d-inline-block w-100"> connect_timeout_with_failover_ms </a> <a href=#connections-with-failover-max-tries title=connections_with_failover_max_tries class="nav-link text-wrap d-inline-block w-100"> connections_with_failover_max_tries </a> <a href=#extremes title=extremes class="nav-link text-wrap d-inline-block w-100"> extremes </a> <a href=#setting-use_uncompressed_cache title=use_uncompressed_cache class="nav-link text-wrap d-inline-block w-100"> use_uncompressed_cache </a> <a href=#replace-running-query title=replace_running_query class="nav-link text-wrap d-inline-block w-100"> replace_running_query </a> <a href=#stream-flush-interval-ms title=stream_flush_interval_ms class="nav-link text-wrap d-inline-block w-100"> stream_flush_interval_ms </a> <a href=#settings-load_balancing title=load_balancing class="nav-link text-wrap d-inline-block w-100"> load_balancing </a> <nav id=toc-toc-159-51 class="nav flex-column pl-2"> <a href=#load_balancing-random title="Random (by default)" class="nav-link text-wrap d-inline-block w-100"> Random (by default) </a> <a href=#load_balancing-nearest_hostname title="Nearest Hostname" class="nav-link text-wrap d-inline-block w-100"> Nearest Hostname </a> <a href=#load_balancing-in_order title="In Order" class="nav-link text-wrap d-inline-block w-100"> In Order </a> <a href=#load_balancing-first_or_random title="First or Random" class="nav-link text-wrap d-inline-block w-100"> First or Random </a> </nav> <a href=#settings-prefer_localhost_replica title=prefer_localhost_replica class="nav-link text-wrap d-inline-block w-100"> prefer_localhost_replica </a> <a href=#totals-mode title=totals_mode class="nav-link text-wrap d-inline-block w-100"> totals_mode </a> <a href=#totals-auto-threshold title=totals_auto_threshold class="nav-link text-wrap d-inline-block w-100"> totals_auto_threshold </a> <a href=#settings-max_parallel_replicas title=max_parallel_replicas class="nav-link text-wrap d-inline-block w-100"> max_parallel_replicas </a> <a href=#compile title=compile class="nav-link text-wrap d-inline-block w-100"> compile </a> <a href=#min-count-to-compile title=min_count_to_compile class="nav-link text-wrap d-inline-block w-100"> min_count_to_compile </a> <a href=#session_settings-output_format_json_quote_64bit_integers title=output_format_json_quote_64bit_integers class="nav-link text-wrap d-inline-block w-100"> output_format_json_quote_64bit_integers </a> <a href=#settings-format_csv_delimiter title=format_csv_delimiter class="nav-link text-wrap d-inline-block w-100"> format_csv_delimiter </a> <a href=#settings-input_format_csv_unquoted_null_literal_as_null title=input_format_csv_unquoted_null_literal_as_null class="nav-link text-wrap d-inline-block w-100"> input_format_csv_unquoted_null_literal_as_null </a> <a href=#settings-insert_quorum title=insert_quorum class="nav-link text-wrap d-inline-block w-100"> insert_quorum </a> <a href=#settings-insert_quorum_timeout title=insert_quorum_timeout class="nav-link text-wrap d-inline-block w-100"> insert_quorum_timeout </a> <a href=#settings-select_sequential_consistency title=select_sequential_consistency class="nav-link text-wrap d-inline-block w-100"> select_sequential_consistency </a> <a href=#settings-max_network_bytes title=max_network_bytes class="nav-link text-wrap d-inline-block w-100"> max_network_bytes </a> <a href=#settings-max_network_bandwidth title=max_network_bandwidth class="nav-link text-wrap d-inline-block w-100"> max_network_bandwidth </a> <a href=#settings-max_network_bandwidth_for_user title=max_network_bandwidth_for_user class="nav-link text-wrap d-inline-block w-100"> max_network_bandwidth_for_user </a> <a href=#settings-max_network_bandwidth_for_all_users title=max_network_bandwidth_for_all_users class="nav-link text-wrap d-inline-block w-100"> max_network_bandwidth_for_all_users </a> <a href=#settings-allow_experimental_cross_to_join_conversion title=allow_experimental_cross_to_join_conversion class="nav-link text-wrap d-inline-block w-100"> allow_experimental_cross_to_join_conversion </a> <a href=#settings-count_distinct_implementation title=count_distinct_implementation class="nav-link text-wrap d-inline-block w-100"> count_distinct_implementation </a> <a href=#settings-skip_unavailable_shards title=skip_unavailable_shards class="nav-link text-wrap d-inline-block w-100"> skip_unavailable_shards </a> <a href=#setting-optimize_throw_if_noop title=optimize_throw_if_noop class="nav-link text-wrap d-inline-block w-100"> optimize_throw_if_noop </a> <a href=#settings-distributed_replica_error_half_life title=distributed_replica_error_half_life class="nav-link text-wrap d-inline-block w-100"> distributed_replica_error_half_life </a> <a href=#settings-distributed_replica_error_cap title=distributed_replica_error_cap class="nav-link text-wrap d-inline-block w-100"> distributed_replica_error_cap </a> <a href=#setting-os_thread_priority title=os_thread_priority class="nav-link text-wrap d-inline-block w-100"> os_thread_priority </a> </nav> <a href=#settings-profiles title="Settings profiles" class="nav-link text-wrap d-inline-block w-100"> Settings profiles </a> <a href=#constraints-on-settings title="Constraints on Settings" class="nav-link text-wrap d-inline-block w-100"> Constraints on Settings </a> <a href=#user-settings title="User settings" class="nav-link text-wrap d-inline-block w-100"> User settings </a> <nav id=toc-toc-162 class="nav flex-column pl-2"> <a href=#user-name-password title=user_name/password class="nav-link text-wrap d-inline-block w-100"> user_name/password </a> <a href=#user-name-networks title=user_name/networks class="nav-link text-wrap d-inline-block w-100"> user_name/networks </a> <a href=#user-name-profile title=user_name/profile class="nav-link text-wrap d-inline-block w-100"> user_name/profile </a> <a href=#user-name-quota title=user_name/quota class="nav-link text-wrap d-inline-block w-100"> user_name/quota </a> <a href=#user-name-databases title=user_name/databases class="nav-link text-wrap d-inline-block w-100"> user_name/databases </a> </nav> <a href=#clickhouse-utility title="ClickHouse Utility" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Utility </a> <a href=#clickhouse-copier_1 title=clickhouse-copier class="nav-link text-wrap d-inline-block w-100"> clickhouse-copier </a> <nav id=toc-toc-164 class="nav flex-column pl-2"> <a href=#running-clickhouse-copier title="Running clickhouse-copier" class="nav-link text-wrap d-inline-block w-100"> Running clickhouse-copier </a> <a href=#format-of-zookeeper-xml title="Format of zookeeper.xml" class="nav-link text-wrap d-inline-block w-100"> Format of zookeeper.xml </a> <a href=#configuration-of-copying-tasks title="Configuration of copying tasks" class="nav-link text-wrap d-inline-block w-100"> Configuration of copying tasks </a> </nav> <a href=#clickhouse-local title=clickhouse-local class="nav-link text-wrap d-inline-block w-100"> clickhouse-local </a> <nav id=toc-toc-165 class="nav flex-column pl-2"> <a href=#usage_2 title=Usage class="nav-link text-wrap d-inline-block w-100"> Usage </a> <a href=#examples_1 title=Examples class="nav-link text-wrap d-inline-block w-100"> Examples </a> </nav> <a href=#general-questions title="General Questions" class="nav-link text-wrap d-inline-block w-100"> General Questions </a> <nav id=toc-toc-166 class="nav flex-column pl-2"> <a href=#why-not-use-something-like-mapreduce title="Why Not Use Something Like MapReduce?" class="nav-link text-wrap d-inline-block w-100"> Why Not Use Something Like MapReduce? </a> <a href=#oracle-odbc-encodings title="What If I Have a Problem with Encodings When Using Oracle Through ODBC?" class="nav-link text-wrap d-inline-block w-100"> What If I Have a Problem with Encodings When Using Oracle Through ODBC? </a> </nav> <a href=#clickhouse-development title="ClickHouse Development" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Development </a> <a href=#overview-of-clickhouse-architecture title="Overview of ClickHouse Architecture" class="nav-link text-wrap d-inline-block w-100"> Overview of ClickHouse Architecture </a> <nav id=toc-toc-168 class="nav flex-column pl-2"> <a href=#columns title=Columns class="nav-link text-wrap d-inline-block w-100"> Columns </a> <a href=#field title=Field class="nav-link text-wrap d-inline-block w-100"> Field </a> <a href=#leaky-abstractions title="Leaky Abstractions" class="nav-link text-wrap d-inline-block w-100"> Leaky Abstractions </a> <a href=#data-types title="Data Types" class="nav-link text-wrap d-inline-block w-100"> Data Types </a> <a href=#block title=Block class="nav-link text-wrap d-inline-block w-100"> Block </a> <a href=#block-streams title="Block Streams" class="nav-link text-wrap d-inline-block w-100"> Block Streams </a> <a href=#formats_1 title=Formats class="nav-link text-wrap d-inline-block w-100"> Formats </a> <a href=#i-o title=I/O class="nav-link text-wrap d-inline-block w-100"> I/O </a> <a href=#tables title=Tables class="nav-link text-wrap d-inline-block w-100"> Tables </a> <a href=#parsers title=Parsers class="nav-link text-wrap d-inline-block w-100"> Parsers </a> <a href=#interpreters title=Interpreters class="nav-link text-wrap d-inline-block w-100"> Interpreters </a> <a href=#functions_2 title=Functions class="nav-link text-wrap d-inline-block w-100"> Functions </a> <a href=#aggregate-functions title="Aggregate Functions" class="nav-link text-wrap d-inline-block w-100"> Aggregate Functions </a> <a href=#server title=Server class="nav-link text-wrap d-inline-block w-100"> Server </a> <a href=#distributed-query-execution title="Distributed Query Execution" class="nav-link text-wrap d-inline-block w-100"> Distributed Query Execution </a> <a href=#merge-tree title="Merge Tree" class="nav-link text-wrap d-inline-block w-100"> Merge Tree </a> <a href=#replication title=Replication class="nav-link text-wrap d-inline-block w-100"> Replication </a> </nav> <a href=#how-to-build-clickhouse-release-package title="How to Build ClickHouse Release Package" class="nav-link text-wrap d-inline-block w-100"> How to Build ClickHouse Release Package </a> <nav id=toc-toc-169 class="nav flex-column pl-2"> <a href=#install-git-and-pbuilder title="Install Git and Pbuilder" class="nav-link text-wrap d-inline-block w-100"> Install Git and Pbuilder </a> <a href=#checkout-clickhouse-sources title="Checkout ClickHouse Sources" class="nav-link text-wrap d-inline-block w-100"> Checkout ClickHouse Sources </a> <a href=#run-release-script title="Run Release Script" class="nav-link text-wrap d-inline-block w-100"> Run Release Script </a> </nav> <a href=#how-to-build-clickhouse-for-development title="How to Build ClickHouse for Development" class="nav-link text-wrap d-inline-block w-100"> How to Build ClickHouse for Development </a> <nav id=toc-toc-170 class="nav flex-column pl-2"> <a href=#install-git-and-cmake title="Install Git and CMake" class="nav-link text-wrap d-inline-block w-100"> Install Git and CMake </a> <a href=#install-gcc-9 title="Install GCC 9" class="nav-link text-wrap d-inline-block w-100"> Install GCC 9 </a> <nav id=toc-toc-170-2 class="nav flex-column pl-2"> <a href=#install-from-a-ppa-package title="Install from a PPA Package" class="nav-link text-wrap d-inline-block w-100"> Install from a PPA Package </a> <a href=#install-from-sources title="Install from Sources" class="nav-link text-wrap d-inline-block w-100"> Install from Sources </a> </nav> <a href=#use-gcc-9-for-builds title="Use GCC 9 for Builds" class="nav-link text-wrap d-inline-block w-100"> Use GCC 9 for Builds </a> <a href=#install-required-libraries-from-packages title="Install Required Libraries from Packages" class="nav-link text-wrap d-inline-block w-100"> Install Required Libraries from Packages </a> <a href=#checkout-clickhouse-sources_1 title="Checkout ClickHouse Sources" class="nav-link text-wrap d-inline-block w-100"> Checkout ClickHouse Sources </a> <a href=#build-clickhouse title="Build ClickHouse" class="nav-link text-wrap d-inline-block w-100"> Build ClickHouse </a> </nav> <a href=#how-to-build-clickhouse-on-mac-os-x title="How to Build ClickHouse on Mac OS X" class="nav-link text-wrap d-inline-block w-100"> How to Build ClickHouse on Mac OS X </a> <nav id=toc-toc-171 class="nav flex-column pl-2"> <a href=#install-homebrew title="Install Homebrew" class="nav-link text-wrap d-inline-block w-100"> Install Homebrew </a> <a href=#install-required-compilers-tools-and-libraries title="Install Required Compilers, Tools, and Libraries" class="nav-link text-wrap d-inline-block w-100"> Install Required Compilers, Tools, and Libraries </a> <a href=#checkout-clickhouse-sources_2 title="Checkout ClickHouse Sources" class="nav-link text-wrap d-inline-block w-100"> Checkout ClickHouse Sources </a> <a href=#build-clickhouse_1 title="Build ClickHouse" class="nav-link text-wrap d-inline-block w-100"> Build ClickHouse </a> <a href=#caveats title=Caveats class="nav-link text-wrap d-inline-block w-100"> Caveats </a> </nav> <a href=#how-to-write-c-code title="How to Write C++ Code" class="nav-link text-wrap d-inline-block w-100"> How to Write C++ Code </a> <nav id=toc-toc-172 class="nav flex-column pl-2"> <a href=#general-recommendations title="General Recommendations" class="nav-link text-wrap d-inline-block w-100"> General Recommendations </a> <a href=#formatting title=Formatting class="nav-link text-wrap d-inline-block w-100"> Formatting </a> <a href=#comments_1 title=Comments class="nav-link text-wrap d-inline-block w-100"> Comments </a> <a href=#names title=Names class="nav-link text-wrap d-inline-block w-100"> Names </a> <a href=#how-to-write-code title="How to Write Code" class="nav-link text-wrap d-inline-block w-100"> How to Write Code </a> <a href=#unused-features-of-c title="Unused Features of C++" class="nav-link text-wrap d-inline-block w-100"> Unused Features of C++ </a> <a href=#platform title=Platform class="nav-link text-wrap d-inline-block w-100"> Platform </a> <a href=#tools title=Tools class="nav-link text-wrap d-inline-block w-100"> Tools </a> <a href=#libraries title=Libraries class="nav-link text-wrap d-inline-block w-100"> Libraries </a> <a href=#general-recommendations_1 title="General Recommendations" class="nav-link text-wrap d-inline-block w-100"> General Recommendations </a> <a href=#additional-recommendations title="Additional Recommendations" class="nav-link text-wrap d-inline-block w-100"> Additional Recommendations </a> </nav> <a href=#clickhouse-testing title="ClickHouse Testing" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Testing </a> <nav id=toc-toc-173 class="nav flex-column pl-2"> <a href=#functional-tests title="Functional Tests" class="nav-link text-wrap d-inline-block w-100"> Functional Tests </a> <a href=#known-bugs title="Known bugs" class="nav-link text-wrap d-inline-block w-100"> Known bugs </a> <a href=#integration-tests title="Integration Tests" class="nav-link text-wrap d-inline-block w-100"> Integration Tests </a> <a href=#unit-tests title="Unit Tests" class="nav-link text-wrap d-inline-block w-100"> Unit Tests </a> <a href=#performance-tests title="Performance Tests" class="nav-link text-wrap d-inline-block w-100"> Performance Tests </a> <a href=#test-tools-and-scripts title="Test Tools And Scripts" class="nav-link text-wrap d-inline-block w-100"> Test Tools And Scripts </a> <a href=#miscellanous-tests title="Miscellanous Tests" class="nav-link text-wrap d-inline-block w-100"> Miscellanous Tests </a> <a href=#manual-testing title="Manual Testing" class="nav-link text-wrap d-inline-block w-100"> Manual Testing </a> <a href=#testing-environment title="Testing Environment" class="nav-link text-wrap d-inline-block w-100"> Testing Environment </a> <a href=#load-testing title="Load Testing" class="nav-link text-wrap d-inline-block w-100"> Load Testing </a> <a href=#build-tests title="Build Tests" class="nav-link text-wrap d-inline-block w-100"> Build Tests </a> <a href=#testing-for-protocol-compatibility title="Testing For Protocol Compatibility" class="nav-link text-wrap d-inline-block w-100"> Testing For Protocol Compatibility </a> <a href=#help-from-the-compiler title="Help From The Compiler" class="nav-link text-wrap d-inline-block w-100"> Help From The Compiler </a> <a href=#sanitizers title=Sanitizers class="nav-link text-wrap d-inline-block w-100"> Sanitizers </a> <a href=#fuzzing title=Fuzzing class="nav-link text-wrap d-inline-block w-100"> Fuzzing </a> <a href=#security-audit title="Security Audit" class="nav-link text-wrap d-inline-block w-100"> Security Audit </a> <a href=#static-analyzers title="Static Analyzers" class="nav-link text-wrap d-inline-block w-100"> Static Analyzers </a> <a href=#hardening title=Hardening class="nav-link text-wrap d-inline-block w-100"> Hardening </a> <a href=#code-style title="Code Style" class="nav-link text-wrap d-inline-block w-100"> Code Style </a> <a href=#metrica-b2b-tests title="Metrica B2B Tests" class="nav-link text-wrap d-inline-block w-100"> Metrica B2B Tests </a> <a href=#test-coverage title="Test Coverage" class="nav-link text-wrap d-inline-block w-100"> Test Coverage </a> <a href=#test-automation title="Test Automation" class="nav-link text-wrap d-inline-block w-100"> Test Automation </a> </nav> <a href=#third-party-libraries-used title="Third-Party Libraries Used" class="nav-link text-wrap d-inline-block w-100"> Third-Party Libraries Used </a> <nav id=toc-toc-174 class="nav flex-column pl-2"> <a href=#q3-2019 title="Q3 2019" class="nav-link text-wrap d-inline-block w-100"> Q3 2019 </a> <a href=#q4-2019 title="Q4 2019" class="nav-link text-wrap d-inline-block w-100"> Q4 2019 </a> <a href=#clickhouse-release-19-13-5-44-2019-09-20 title="ClickHouse release 19.13.5.44, 2019-09-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.5.44, 2019-09-20 </a> <nav id=toc-toc-174-3 class="nav flex-column pl-2"> <a href=#bug-fix title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-14-6-12-2019-09-19 title="ClickHouse release 19.14.6.12, 2019-09-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.14.6.12, 2019-09-19 </a> <nav id=toc-toc-174-4 class="nav flex-column pl-2"> <a href=#bug-fix_1 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#build-testing-packaging-improvement title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-14-3-3-2019-09-10 title="ClickHouse release 19.14.3.3, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.14.3.3, 2019-09-10 </a> <nav id=toc-toc-174-5 class="nav flex-column pl-2"> <a href=#new-feature title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#experimental-feature title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100"> Experimental Feature </a> <a href=#bug-fix_2 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> <a href=#improvement title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_1 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-11-11-57-2019-09-13 title="ClickHouse release 19.11.11.57, 2019-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.11.57, 2019-09-13 </a> <a href=#clickhouse-release-19-13-4-32-2019-09-10 title="ClickHouse release 19.13.4.32, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.4.32, 2019-09-10 </a> <nav id=toc-toc-174-7 class="nav flex-column pl-2"> <a href=#bug-fix_3 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix_1 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-11-10-54-2019-09-10 title="ClickHouse release 19.11.10.54, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.10.54, 2019-09-10 </a> <nav id=toc-toc-174-8 class="nav flex-column pl-2"> <a href=#bug-fix_4 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-9-52-2019-09-6 title="ClickHouse release 19.11.9.52, 2019-09-6" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.9.52, 2019-09-6 </a> <nav id=toc-toc-174-9 class="nav flex-column pl-2"> <a href=#security-fix_2 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-13-3-26-2019-08-22 title="ClickHouse release 19.13.3.26, 2019-08-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.3.26, 2019-08-22 </a> <nav id=toc-toc-174-10 class="nav flex-column pl-2"> <a href=#bug-fix_5 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix_3 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-13-2-19-2019-08-14 title="ClickHouse release 19.13.2.19, 2019-08-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.13.2.19, 2019-08-14 </a> <nav id=toc-toc-174-11 class="nav flex-column pl-2"> <a href=#new-feature_1 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#backward-incompatible-change_1 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#experimental-features title="Experimental features" class="nav-link text-wrap d-inline-block w-100"> Experimental features </a> <a href=#bug-fix_6 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement_1 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement_1 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_2 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-11-8-46-2019-08-22 title="ClickHouse release 19.11.8.46, 2019-08-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.8.46, 2019-08-22 </a> <nav id=toc-toc-174-12 class="nav flex-column pl-2"> <a href=#bug-fix_7 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-7-40-2019-08-14 title="ClickHouse release 19.11.7.40, 2019-08-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.7.40, 2019-08-14 </a> <nav id=toc-toc-174-13 class="nav flex-column pl-2"> <a href=#bug-fix_8 title="Bug fix" class="nav-link text-wrap d-inline-block w-100"> Bug fix </a> <a href=#improvement_2 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> </nav> <a href=#clickhouse-release-19-11-5-28-2019-08-05 title="ClickHouse release 19.11.5.28, 2019-08-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.5.28, 2019-08-05 </a> <nav id=toc-toc-174-14 class="nav flex-column pl-2"> <a href=#bug-fix_9 title="Bug fix" class="nav-link text-wrap d-inline-block w-100"> Bug fix </a> <a href=#backward-incompatible-change_2 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-11-4-24-2019-08-01 title="ClickHouse release 19.11.4.24, 2019-08-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.4.24, 2019-08-01 </a> <nav id=toc-toc-174-15 class="nav flex-column pl-2"> <a href=#bug-fix_10 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#build-testing-packaging-improvement_3 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change_3 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-11-3-11-2019-07-18 title="ClickHouse release 19.11.3.11, 2019-07-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.11.3.11, 2019-07-18 </a> <nav id=toc-toc-174-16 class="nav flex-column pl-2"> <a href=#new-feature_2 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix_11 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement_3 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement_2 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_4 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change_4 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-10-1-5-2019-07-12 title="ClickHouse release 19.10.1.5, 2019-07-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.10.1.5, 2019-07-12 </a> <nav id=toc-toc-174-17 class="nav flex-column pl-2"> <a href=#new-feature_3 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix_12 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement_4 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement_3 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_5 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-9-3-31-2019-07-05 title="ClickHouse release 19.9.3.31, 2019-07-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.9.3.31, 2019-07-05 </a> <nav id=toc-toc-174-18 class="nav flex-column pl-2"> <a href=#bug-fix_13 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-7-5-29-2019-07-05 title="ClickHouse release 19.7.5.29, 2019-07-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.7.5.29, 2019-07-05 </a> <nav id=toc-toc-174-19 class="nav flex-column pl-2"> <a href=#bug-fix_14 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-9-2-4-2019-06-24 title="ClickHouse release 19.9.2.4, 2019-06-24" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.9.2.4, 2019-06-24 </a> <nav id=toc-toc-174-20 class="nav flex-column pl-2"> <a href=#new-feature_4 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#improvement_5 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#bug-fix_15 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#build-testing-packaging-improvement_6 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-8-3-8-2019-06-11 title="ClickHouse release 19.8.3.8, 2019-06-11" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.8.3.8, 2019-06-11 </a> <nav id=toc-toc-174-21 class="nav flex-column pl-2"> <a href=#new-features title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#improvements title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#bug-fixes title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#documentation title=Documentation class="nav-link text-wrap d-inline-block w-100"> Documentation </a> <a href=#build-testing-packaging-improvements title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-7-5-27-2019-06-09 title="ClickHouse release 19.7.5.27, 2019-06-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.7.5.27, 2019-06-09 </a> <nav id=toc-toc-174-22 class="nav flex-column pl-2"> <a href=#new-features_1 title="New features" class="nav-link text-wrap d-inline-block w-100"> New features </a> <a href=#bug-fixes_1 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-7-3-9-2019-05-30 title="ClickHouse release 19.7.3.9, 2019-05-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.7.3.9, 2019-05-30 </a> <nav id=toc-toc-174-23 class="nav flex-column pl-2"> <a href=#new-features_2 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#bug-fixes_2 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#performance-improvements_1 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#documentation_1 title=Documentation class="nav-link text-wrap d-inline-block w-100"> Documentation </a> <a href=#build-testing-packaging-improvements_1 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-6-3-18-2019-06-13 title="ClickHouse release 19.6.3.18, 2019-06-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.6.3.18, 2019-06-13 </a> <nav id=toc-toc-174-24 class="nav flex-column pl-2"> <a href=#bug-fixes_3 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-6-2-11-2019-05-13 title="ClickHouse release 19.6.2.11, 2019-05-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.6.2.11, 2019-05-13 </a> <nav id=toc-toc-174-25 class="nav flex-column pl-2"> <a href=#new-features_3 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features_1 title="Experimental Features" class="nav-link text-wrap d-inline-block w-100"> Experimental Features </a> <a href=#improvements_1 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements_2 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#backward-incompatible-changes title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#bug-fixes_4 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvements_2 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-5-4-22-2019-05-13 title="ClickHouse release 19.5.4.22, 2019-05-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.5.4.22, 2019-05-13 </a> <nav id=toc-toc-174-26 class="nav flex-column pl-2"> <a href=#bug-fixes_5 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-5-3-8-2019-04-18 title="ClickHouse release 19.5.3.8, 2019-04-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.5.3.8, 2019-04-18 </a> <nav id=toc-toc-174-27 class="nav flex-column pl-2"> <a href=#bug-fixes_6 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-5-2-6-2019-04-15 title="ClickHouse release 19.5.2.6, 2019-04-15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.5.2.6, 2019-04-15 </a> <nav id=toc-toc-174-28 class="nav flex-column pl-2"> <a href=#new-features_4 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#improvement_6 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#bug-fix_16 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#backward-incompatible-change_5 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#performance-improvement_4 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#build-testing-packaging-improvement_7 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-4-4-33-2019-04-17 title="ClickHouse release 19.4.4.33, 2019-04-17" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.4.33, 2019-04-17 </a> <nav id=toc-toc-174-29 class="nav flex-column pl-2"> <a href=#bug-fixes_7 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements_2 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> </nav> <a href=#clickhouse-release-19-4-3-11-2019-04-02 title="ClickHouse release 19.4.3.11, 2019-04-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.3.11, 2019-04-02 </a> <nav id=toc-toc-174-30 class="nav flex-column pl-2"> <a href=#bug-fixes_8 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvement_8 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-4-2-7-2019-03-30 title="ClickHouse release 19.4.2.7, 2019-03-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.2.7, 2019-03-30 </a> <nav id=toc-toc-174-31 class="nav flex-column pl-2"> <a href=#bug-fixes_9 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-4-1-3-2019-03-19 title="ClickHouse release 19.4.1.3, 2019-03-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.1.3, 2019-03-19 </a> <nav id=toc-toc-174-32 class="nav flex-column pl-2"> <a href=#bug-fixes_10 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-4-0-49-2019-03-09 title="ClickHouse release 19.4.0.49, 2019-03-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.4.0.49, 2019-03-09 </a> <nav id=toc-toc-174-33 class="nav flex-column pl-2"> <a href=#new-features_5 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#bug-fixes_11 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements_3 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements_3 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#build-testing-packaging-improvement_9 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-3-9-1-2019-04-02 title="ClickHouse release 19.3.9.1, 2019-04-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.9.1, 2019-04-02 </a> <nav id=toc-toc-174-34 class="nav flex-column pl-2"> <a href=#bug-fixes_12 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvement_10 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-3-7-2019-03-12 title="ClickHouse release 19.3.7, 2019-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.7, 2019-03-12 </a> <nav id=toc-toc-174-35 class="nav flex-column pl-2"> <a href=#bug-fixes_13 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-3-6-2019-03-02 title="ClickHouse release 19.3.6, 2019-03-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.6, 2019-03-02 </a> <nav id=toc-toc-174-36 class="nav flex-column pl-2"> <a href=#bug-fixes_14 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> <a href=#build-testing-packaging-improvements_3 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-3-5-2019-02-21 title="ClickHouse release 19.3.5, 2019-02-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.5, 2019-02-21 </a> <nav id=toc-toc-174-37 class="nav flex-column pl-2"> <a href=#bug-fixes_15 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-3-4-2019-02-16 title="ClickHouse release 19.3.4, 2019-02-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.4, 2019-02-16 </a> <nav id=toc-toc-174-38 class="nav flex-column pl-2"> <a href=#improvements_4 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#bug-fixes_16 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvements_4 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-3-3-2019-02-13 title="ClickHouse release 19.3.3, 2019-02-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.3.3, 2019-02-13 </a> <nav id=toc-toc-174-39 class="nav flex-column pl-2"> <a href=#new-features_6 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features_2 title="Experimental features" class="nav-link text-wrap d-inline-block w-100"> Experimental features </a> <a href=#bug-fixes_17 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#build-testing-packaging-improvements_5 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> <a href=#backward-incompatible-changes_1 title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#performance-improvements_4 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#improvements_5 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> </nav> <a href=#clickhouse-release-19-1-14-2019-03-14 title="ClickHouse release 19.1.14, 2019-03-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.14, 2019-03-14 </a> <a href=#clickhouse-release-19-1-13-2019-03-12 title="ClickHouse release 19.1.13, 2019-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.13, 2019-03-12 </a> <a href=#clickhouse-release-19-1-10-2019-03-03 title="ClickHouse release 19.1.10, 2019-03-03" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.10, 2019-03-03 </a> <a href=#clickhouse-release-19-1-9-2019-02-21 title="ClickHouse release 19.1.9, 2019-02-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.9, 2019-02-21 </a> <nav id=toc-toc-174-43 class="nav flex-column pl-2"> <a href=#bug-fixes_18 title="Bug fixes" class="nav-link text-wrap d-inline-block w-100"> Bug fixes </a> </nav> <a href=#clickhouse-release-19-1-8-2019-02-16 title="ClickHouse release 19.1.8, 2019-02-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.8, 2019-02-16 </a> <nav id=toc-toc-174-44 class="nav flex-column pl-2"> <a href=#bug-fixes_19 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-1-7-2019-02-15 title="ClickHouse release 19.1.7, 2019-02-15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.7, 2019-02-15 </a> <nav id=toc-toc-174-45 class="nav flex-column pl-2"> <a href=#bug-fixes_20 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-1-6-2019-01-24 title="ClickHouse release 19.1.6, 2019-01-24" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 19.1.6, 2019-01-24 </a> <nav id=toc-toc-174-46 class="nav flex-column pl-2"> <a href=#new-features_7 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features_3 title="Experimental features" class="nav-link text-wrap d-inline-block w-100"> Experimental features </a> <a href=#bug-fixes_21 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements_6 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements_5 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#backward-incompatible-changes_2 title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#build-testing-packaging-improvements_6 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-18-16-1-2018-12-21 title="ClickHouse release 18.16.1, 2018-12-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.16.1, 2018-12-21 </a> <nav id=toc-toc-174-47 class="nav flex-column pl-2"> <a href=#bug-fixes_22 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements_7 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-improvements title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-16-0-2018-12-14 title="ClickHouse release 18.16.0, 2018-12-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.16.0, 2018-12-14 </a> <nav id=toc-toc-174-48 class="nav flex-column pl-2"> <a href=#new-features_8 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_23 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements_8 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-improvements_1 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> <a href=#backward-incompatible-changes_3 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-14-19-2018-12-19 title="ClickHouse release 18.14.19, 2018-12-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.19, 2018-12-19 </a> <nav id=toc-toc-174-49 class="nav flex-column pl-2"> <a href=#bug-fixes_24 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-improvements_2 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-14-18-2018-12-04 title="ClickHouse release 18.14.18, 2018-12-04" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.18, 2018-12-04 </a> <nav id=toc-toc-174-50 class="nav flex-column pl-2"> <a href=#bug-fixes_25 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-14-17-2018-11-30 title="ClickHouse release 18.14.17, 2018-11-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.17, 2018-11-30 </a> <nav id=toc-toc-174-51 class="nav flex-column pl-2"> <a href=#bug-fixes_26 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-15-2018-11-21 title="ClickHouse release 18.14.15, 2018-11-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.15, 2018-11-21 </a> <nav id=toc-toc-174-52 class="nav flex-column pl-2"> <a href=#bug-fixes_27 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-14-2018-11-20 title="ClickHouse release 18.14.14, 2018-11-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.14, 2018-11-20 </a> <nav id=toc-toc-174-53 class="nav flex-column pl-2"> <a href=#bug-fixes_28 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes_1 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-14-13-2018-11-08 title="ClickHouse release 18.14.13, 2018-11-08" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.13, 2018-11-08 </a> <nav id=toc-toc-174-54 class="nav flex-column pl-2"> <a href=#bug-fixes_29 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#performance-improvements_6 title="Performance improvements:" class="nav-link text-wrap d-inline-block w-100"> Performance improvements: </a> <a href=#build-improvements_3 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-18-14-12-2018-11-02 title="ClickHouse release 18.14.12, 2018-11-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.12, 2018-11-02 </a> <nav id=toc-toc-174-55 class="nav flex-column pl-2"> <a href=#bug-fixes_30 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-11-2018-10-29 title="ClickHouse release 18.14.11, 2018-10-29" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.11, 2018-10-29 </a> <nav id=toc-toc-174-56 class="nav flex-column pl-2"> <a href=#bug-fixes_31 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-14-10-2018-10-23 title="ClickHouse release 18.14.10, 2018-10-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.10, 2018-10-23 </a> <a href=#clickhouse-release-18-14-9-2018-10-16 title="ClickHouse release 18.14.9, 2018-10-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.14.9, 2018-10-16 </a> <nav id=toc-toc-174-58 class="nav flex-column pl-2"> <a href=#new-features_9 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features_4 title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#improvements_9 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_32 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_4 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-12-17-2018-09-16 title="ClickHouse release 18.12.17, 2018-09-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.17, 2018-09-16 </a> <nav id=toc-toc-174-59 class="nav flex-column pl-2"> <a href=#new-features_10 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_33 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_5 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-12-14-2018-09-13 title="ClickHouse release 18.12.14, 2018-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.14, 2018-09-13 </a> <nav id=toc-toc-174-60 class="nav flex-column pl-2"> <a href=#new-features_11 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_10 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#bug-fixes_34 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-12-13-2018-09-10 title="ClickHouse release 18.12.13, 2018-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.12.13, 2018-09-10 </a> <nav id=toc-toc-174-61 class="nav flex-column pl-2"> <a href=#new-features_12 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features_5 title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#improvements_11 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_35 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#security-fix_4 title="Security fix:" class="nav-link text-wrap d-inline-block w-100"> Security fix: </a> <a href=#backward-incompatible-changes_6 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#build-changes_2 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-10-3-2018-08-13 title="ClickHouse release 18.10.3, 2018-08-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.10.3, 2018-08-13 </a> <nav id=toc-toc-174-62 class="nav flex-column pl-2"> <a href=#new-features_13 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_12 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_36 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_7 title="Backward incompatible changes" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes </a> <a href=#build-changes_3 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> </nav> <a href=#clickhouse-release-18-6-0-2018-08-02 title="ClickHouse release 18.6.0, 2018-08-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.6.0, 2018-08-02 </a> <nav id=toc-toc-174-63 class="nav flex-column pl-2"> <a href=#new-features_14 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_13 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> </nav> <a href=#clickhouse-release-18-5-1-2018-07-31 title="ClickHouse release 18.5.1, 2018-07-31" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.5.1, 2018-07-31 </a> <nav id=toc-toc-174-64 class="nav flex-column pl-2"> <a href=#new-features_15 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_14 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_37 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-18-4-0-2018-07-28 title="ClickHouse release 18.4.0, 2018-07-28" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.4.0, 2018-07-28 </a> <nav id=toc-toc-174-65 class="nav flex-column pl-2"> <a href=#new-features_16 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_15 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_38 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_8 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-18-1-0-2018-07-23 title="ClickHouse release 18.1.0, 2018-07-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 18.1.0, 2018-07-23 </a> <nav id=toc-toc-174-66 class="nav flex-column pl-2"> <a href=#new-features_17 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_16 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_39 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_9 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54394-2018-07-12 title="ClickHouse release 1.1.54394, 2018-07-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54394, 2018-07-12 </a> <nav id=toc-toc-174-67 class="nav flex-column pl-2"> <a href=#new-features_18 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_40 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54390-2018-07-06 title="ClickHouse release 1.1.54390, 2018-07-06" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54390, 2018-07-06 </a> <nav id=toc-toc-174-68 class="nav flex-column pl-2"> <a href=#new-features_19 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_17 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_41 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#security-fix_5 title="Security fix:" class="nav-link text-wrap d-inline-block w-100"> Security fix: </a> </nav> <a href=#clickhouse-release-1-1-54388-2018-06-28 title="ClickHouse release 1.1.54388, 2018-06-28" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54388, 2018-06-28 </a> <nav id=toc-toc-174-69 class="nav flex-column pl-2"> <a href=#new-features_20 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#experimental-features_6 title="Experimental features:" class="nav-link text-wrap d-inline-block w-100"> Experimental features: </a> <a href=#bug-fixes_42 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improvements_18 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#build-changes_4 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> <a href=#backward-incompatible-changes_10 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54385-2018-06-01 title="ClickHouse release 1.1.54385, 2018-06-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54385, 2018-06-01 </a> <nav id=toc-toc-174-70 class="nav flex-column pl-2"> <a href=#bug-fixes_43 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54383-2018-05-22 title="ClickHouse release 1.1.54383, 2018-05-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54383, 2018-05-22 </a> <nav id=toc-toc-174-71 class="nav flex-column pl-2"> <a href=#bug-fixes_44 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54381-2018-05-14 title="ClickHouse release 1.1.54381, 2018-05-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54381, 2018-05-14 </a> <nav id=toc-toc-174-72 class="nav flex-column pl-2"> <a href=#bug-fixes_45 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54380-2018-04-21 title="ClickHouse release 1.1.54380, 2018-04-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54380, 2018-04-21 </a> <nav id=toc-toc-174-73 class="nav flex-column pl-2"> <a href=#new-features_21 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_19 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_46 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_11 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54378-2018-04-16 title="ClickHouse release 1.1.54378, 2018-04-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54378, 2018-04-16 </a> <nav id=toc-toc-174-74 class="nav flex-column pl-2"> <a href=#new-features_22 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_20 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_47 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-changes_5 title="Build changes:" class="nav-link text-wrap d-inline-block w-100"> Build changes: </a> <a href=#backward-incompatible-changes_12 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54370-2018-03-16 title="ClickHouse release 1.1.54370, 2018-03-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54370, 2018-03-16 </a> <nav id=toc-toc-174-75 class="nav flex-column pl-2"> <a href=#new-features_23 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_21 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_48 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54362-2018-03-11 title="Clickhouse Release 1.1.54362, 2018-03-11" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54362, 2018-03-11 </a> <nav id=toc-toc-174-76 class="nav flex-column pl-2"> <a href=#new-features_24 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#improvements_22 title=Improvements: class="nav-link text-wrap d-inline-block w-100"> Improvements: </a> <a href=#bug-fixes_49 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#backward-incompatible-changes_13 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> </nav> <a href=#clickhouse-release-1-1-54343-2018-02-05 title="Clickhouse Release 1.1.54343, 2018-02-05" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54343, 2018-02-05 </a> <a href=#clickhouse-release-1-1-54342-2018-01-22 title="Clickhouse Release 1.1.54342, 2018-01-22" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54342, 2018-01-22 </a> <a href=#clickhouse-release-1-1-54337-2018-01-18 title="Clickhouse Release 1.1.54337, 2018-01-18" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54337, 2018-01-18 </a> <nav id=toc-toc-174-79 class="nav flex-column pl-2"> <a href=#new-features_25 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#performance-optimizations title="Performance optimizations:" class="nav-link text-wrap d-inline-block w-100"> Performance optimizations: </a> <a href=#bug-fixes_50 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-improvements_4 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> <a href=#backward-incompatible-changes_14 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#please-note-when-upgrading title="Please note when upgrading:" class="nav-link text-wrap d-inline-block w-100"> Please note when upgrading: </a> </nav> <a href=#clickhouse-release-1-1-54327-2017-12-21 title="ClickHouse release 1.1.54327, 2017-12-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54327, 2017-12-21 </a> <a href=#clickhouse-release-1-1-54318-2017-11-30 title="ClickHouse release 1.1.54318, 2017-11-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54318, 2017-11-30 </a> <a href=#clickhouse-release-1-1-54310-2017-11-01 title="ClickHouse release 1.1.54310, 2017-11-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54310, 2017-11-01 </a> <nav id=toc-toc-174-82 class="nav flex-column pl-2"> <a href=#new-features_26 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#backward-incompatible-changes_15 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#bug-fixes_51 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#build-improvements_5 title="Build improvements:" class="nav-link text-wrap d-inline-block w-100"> Build improvements: </a> </nav> <a href=#clickhouse-release-1-1-54304-2017-10-19 title="ClickHouse release 1.1.54304, 2017-10-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54304, 2017-10-19 </a> <nav id=toc-toc-174-83 class="nav flex-column pl-2"> <a href=#new-features_27 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_52 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54292-2017-09-20 title="ClickHouse release 1.1.54292, 2017-09-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54292, 2017-09-20 </a> <nav id=toc-toc-174-84 class="nav flex-column pl-2"> <a href=#new-features_28 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_53 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#clickhouse-release-1-1-54289-2017-09-13 title="ClickHouse release 1.1.54289, 2017-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54289, 2017-09-13 </a> <nav id=toc-toc-174-85 class="nav flex-column pl-2"> <a href=#new-features_29 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#bug-fixes_54 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improved-workflow-for-developing-and-assembling-clickhouse title="Improved workflow for developing and assembling ClickHouse:" class="nav-link text-wrap d-inline-block w-100"> Improved workflow for developing and assembling ClickHouse: </a> <a href=#please-note-when-upgrading_1 title="Please note when upgrading:" class="nav-link text-wrap d-inline-block w-100"> Please note when upgrading: </a> </nav> <a href=#clickhouse-release-1-1-54284-2017-08-29 title="ClickHouse release 1.1.54284, 2017-08-29" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54284, 2017-08-29 </a> <a href=#clickhouse-release-1-1-54282-2017-08-23 title="ClickHouse release 1.1.54282, 2017-08-23" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54282, 2017-08-23 </a> <a href=#clickhouse-release-1-1-54276-2017-08-16 title="Clickhouse Release 1.1.54276, 2017-08-16" class="nav-link text-wrap d-inline-block w-100"> Clickhouse Release 1.1.54276, 2017-08-16 </a> <nav id=toc-toc-174-88 class="nav flex-column pl-2"> <a href=#new-features_30 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#main-changes title="Main changes:" class="nav-link text-wrap d-inline-block w-100"> Main changes: </a> <a href=#backward-incompatible-changes_16 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#complete-list-of-changes title="Complete list of changes:" class="nav-link text-wrap d-inline-block w-100"> Complete list of changes: </a> <a href=#bug-fixes_55 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> <a href=#improved-workflow-for-developing-and-assembling-clickhouse_1 title="Improved workflow for developing and assembling ClickHouse:" class="nav-link text-wrap d-inline-block w-100"> Improved workflow for developing and assembling ClickHouse: </a> </nav> <a href=#clickhouse-release-1-1-54245-2017-07-04 title="ClickHouse release 1.1.54245, 2017-07-04" class="nav-link text-wrap d-inline-block w-100"> ClickHouse release 1.1.54245, 2017-07-04 </a> <nav id=toc-toc-174-89 class="nav flex-column pl-2"> <a href=#new-features_31 title="New features:" class="nav-link text-wrap d-inline-block w-100"> New features: </a> <a href=#backward-incompatible-changes_17 title="Backward incompatible changes:" class="nav-link text-wrap d-inline-block w-100"> Backward incompatible changes: </a> <a href=#minor-changes title="Minor changes:" class="nav-link text-wrap d-inline-block w-100"> Minor changes: </a> <a href=#bug-fixes_56 title="Bug fixes:" class="nav-link text-wrap d-inline-block w-100"> Bug fixes: </a> </nav> <a href=#fixed-in-clickhouse-release-18-12-13-2018-09-10 title="Fixed in ClickHouse Release 18.12.13, 2018-09-10" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 18.12.13, 2018-09-10 </a> <nav id=toc-toc-174-90 class="nav flex-column pl-2"> <a href=#cve-2018-14672 title=CVE-2018-14672 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14672 </a> </nav> <a href=#fixed-in-clickhouse-release-18-10-3-2018-08-13 title="Fixed in ClickHouse Release 18.10.3, 2018-08-13" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 18.10.3, 2018-08-13 </a> <nav id=toc-toc-174-91 class="nav flex-column pl-2"> <a href=#cve-2018-14671 title=CVE-2018-14671 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14671 </a> </nav> <a href=#fixed-in-clickhouse-release-1-1-54388-2018-06-28 title="Fixed in ClickHouse Release 1.1.54388, 2018-06-28" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 1.1.54388, 2018-06-28 </a> <nav id=toc-toc-174-92 class="nav flex-column pl-2"> <a href=#cve-2018-14668 title=CVE-2018-14668 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14668 </a> </nav> <a href=#fixed-in-clickhouse-release-1-1-54390-2018-07-06 title="Fixed in ClickHouse Release 1.1.54390, 2018-07-06" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 1.1.54390, 2018-07-06 </a> <nav id=toc-toc-174-93 class="nav flex-column pl-2"> <a href=#cve-2018-14669 title=CVE-2018-14669 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14669 </a> </nav> <a href=#fixed-in-clickhouse-release-1-1-54131-2017-01-10 title="Fixed in ClickHouse Release 1.1.54131, 2017-01-10" class="nav-link text-wrap d-inline-block w-100"> Fixed in ClickHouse Release 1.1.54131, 2017-01-10 </a> <nav id=toc-toc-174-94 class="nav flex-column pl-2"> <a href=#cve-2018-14670 title=CVE-2018-14670 class="nav-link text-wrap d-inline-block w-100"> CVE-2018-14670 </a> </nav> </nav> </nav> </div> </div> </div> <div id=content-wrapper class="col-md-10 p-2 p-md-5"> <div id=content> <script async type=text/javascript>
            
            document.write("<p><a name=\"../index/\"></a><a name=\"../../../../../index/\"></a><a name=\"../../../index/\"></a><a name=\"../../index/\"></a><a name=\"index/\"></a><a name=\"../../../../index/\"></a></p>\n<h2 id=\"what-is-clickhouse\">What is ClickHouse?<a class=\"headerlink\" href=\"#what-is-clickhouse\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).</p>\n<p>In a \"normal\" row-oriented DBMS, data is stored in this order:</p>\n<table>\n<thead>\n<tr>\n<th>Row</th>\n<th>WatchID</th>\n<th>JavaEnable</th>\n<th>Title</th>\n<th>GoodEvent</th>\n<th>EventTime</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>#0</td>\n<td>89354350662</td>\n<td>1</td>\n<td>Investor Relations</td>\n<td>1</td>\n<td>2016-05-18 05:19:20</td>\n</tr>\n<tr>\n<td>#1</td>\n<td>90329509958</td>\n<td>0</td>\n<td>Contact us</td>\n<td>1</td>\n<td>2016-05-18 08:10:20</td>\n</tr>\n<tr>\n<td>#2</td>\n<td>89953706054</td>\n<td>1</td>\n<td>Mission</td>\n<td>1</td>\n<td>2016-05-18 07:38:00</td>\n</tr>\n<tr>\n<td>#N</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<p>In other words, all the values related to a row are physically stored next to each other.</p>\n<p class=\"grey\">Examples of a row-oriented DBMS are MySQL, Postgres, and MS SQL Server.<br /></p>\n<p>In a column-oriented DBMS, data is stored like this:</p>\n<table>\n<thead>\n<tr>\n<th>Row:</th>\n<th>#0</th>\n<th>#1</th>\n<th>#2</th>\n<th>#N</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>WatchID:</td>\n<td>89354350662</td>\n<td>90329509958</td>\n<td>89953706054</td>\n<td>...</td>\n</tr>\n<tr>\n<td>JavaEnable:</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>...</td>\n</tr>\n<tr>\n<td>Title:</td>\n<td>Investor Relations</td>\n<td>Contact us</td>\n<td>Mission</td>\n<td>...</td>\n</tr>\n<tr>\n<td>GoodEvent:</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>...</td>\n</tr>\n<tr>\n<td>EventTime:</td>\n<td>2016-05-18 05:19:20</td>\n<td>2016-05-18 08:10:20</td>\n<td>2016-05-18 07:38:00</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<p>These examples only show the order that data is arranged in.<br />\nThe values from different columns are stored separately, and data from the same column is stored together.</p>\n<p class=\"grey\">Examples of a column-oriented DBMS: Vertica, Paraccel (Actian Matrix and Amazon Redshift), Sybase IQ, Exasol, Infobright, InfiniDB, MonetDB (VectorWise and Actian Vector), LucidDB, SAP HANA, Google Dremel, Google PowerDrill, Druid, and kdb+.<br /></p>\n<p>Different orders for storing data are better suited to different scenarios.<br />\nThe data access scenario refers to what queries are made, how often, and in what proportion; how much data is read for each type of query \u2013 rows, columns, and bytes; the relationship between reading and updating data; the working size of the data and how locally it is used; whether transactions are used, and how isolated they are; requirements for data replication and logical integrity; requirements for latency and throughput for each type of query, and so on.</p>\n<p>The higher the load on the system, the more important it is to customize the system set up to match the requirements of the usage scenario, and the more fine grained this customization becomes. There is no system that is equally well-suited to significantly different scenarios. If a system is adaptable to a wide set of scenarios, under a high load, the system will handle all the scenarios equally poorly, or will work well for just one or few of possible scenarios.</p>\n<h3 id=\"key-properties-of-the-olap-scenario\">Key Properties of the OLAP scenario<a class=\"headerlink\" href=\"#key-properties-of-the-olap-scenario\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>The vast majority of requests are for read access.</li>\n<li>Data is updated in fairly large batches (&gt; 1000 rows), not by single rows; or it is not updated at all.</li>\n<li>Data is added to the DB but is not modified.</li>\n<li>For reads, quite a large number of rows are extracted from the DB, but only a small subset of columns.</li>\n<li>Tables are \"wide,\" meaning they contain a large number of columns.</li>\n<li>Queries are relatively rare (usually hundreds of queries per server or less per second).</li>\n<li>For simple queries, latencies around 50 ms are allowed.</li>\n<li>Column values are fairly small: numbers and short strings (for example, 60 bytes per URL).</li>\n<li>Requires high throughput when processing a single query (up to billions of rows per second per server).</li>\n<li>Transactions are not necessary.</li>\n<li>Low requirements for data consistency.</li>\n<li>There is one large table per query. All tables are small, except for one.</li>\n<li>A query result is significantly smaller than the source data. In other words, data is filtered or aggregated, so the result fits in a single server's RAM.</li>\n</ul>\n<p>It is easy to see that the OLAP scenario is very different from other popular scenarios (such as OLTP or Key-Value access). So it doesn't make sense to try to use OLTP or a Key-Value DB for processing analytical queries if you want to get decent performance. For example, if you try to use MongoDB or Redis for analytics, you will get very poor performance compared to OLAP databases.</p>\n<h3 id=\"why-column-oriented-databases-work-better-in-the-olap-scenario\">Why Column-Oriented Databases Work Better in the OLAP Scenario<a class=\"headerlink\" href=\"#why-column-oriented-databases-work-better-in-the-olap-scenario\" title=\"Permanent link\">&para;</a></h3>\n<p>Column-oriented databases are better suited to OLAP scenarios: they are at least 100 times faster in processing most queries. The reasons are explained in detail below, but the fact is easier to demonstrate visually:</p>\n<p><strong>Row-oriented DBMS</strong></p>\n<p><img alt=\"Row-oriented\" src=\"../images/row_oriented.gif\" /></p>\n<p><strong>Column-oriented DBMS</strong></p>\n<p><img alt=\"Column-oriented\" src=\"../images/column_oriented.gif\" /></p>\n<p>See the difference?</p>\n<h4 id=\"input-output\">Input/output<a class=\"headerlink\" href=\"#input-output\" title=\"Permanent link\">&para;</a></h4>\n<ol>\n<li>For an analytical query, only a small number of table columns need to be read. In a column-oriented database, you can read just the data you need. For example, if you need 5 columns out of 100, you can expect a 20-fold reduction in I/O.</li>\n<li>Since data is read in packets, it is easier to compress. Data in columns is also easier to compress. This further reduces the I/O volume.</li>\n<li>Due to the reduced I/O, more data fits in the system cache.</li>\n</ol>\n<p>For example, the query \"count the number of records for each advertising platform\" requires reading one \"advertising platform ID\" column, which takes up 1 byte uncompressed. If most of the traffic was not from advertising platforms, you can expect at least 10-fold compression of this column. When using a quick compression algorithm, data decompression is possible at a speed of at least several gigabytes of uncompressed data per second. In other words, this query can be processed at a speed of approximately several billion rows per second on a single server. This speed is actually achieved in practice.</p>\n<details>\n<p><summary>Example</summary></p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client\nClickHouse client version <span class=\"m\">0</span>.0.52053.\nConnecting to localhost:9000.\nConnected to ClickHouse server version <span class=\"m\">0</span>.0.52053.\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">CounterID</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">DESC</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">20</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500CounterID\u2500\u252c\u2500\u2500count()\u2500\u2510\n\u2502    114208 \u2502 56057344 \u2502\n\u2502    115080 \u2502 51619590 \u2502\n\u2502      3228 \u2502 44658301 \u2502\n\u2502     38230 \u2502 42045932 \u2502\n\u2502    145263 \u2502 42042158 \u2502\n\u2502     91244 \u2502 38297270 \u2502\n\u2502    154139 \u2502 26647572 \u2502\n\u2502    150748 \u2502 24112755 \u2502\n\u2502    242232 \u2502 21302571 \u2502\n\u2502    338158 \u2502 13507087 \u2502\n\u2502     62180 \u2502 12229491 \u2502\n\u2502     82264 \u2502 12187441 \u2502\n\u2502    232261 \u2502 12148031 \u2502\n\u2502    146272 \u2502 11438516 \u2502\n\u2502    168777 \u2502 11403636 \u2502\n\u2502   4120072 \u2502 11227824 \u2502\n\u2502  10938808 \u2502 10519739 \u2502\n\u2502     74088 \u2502  9047015 \u2502\n\u2502    115079 \u2502  8837972 \u2502\n\u2502    337234 \u2502  8205961 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n</details>\n<h4 id=\"cpu\">CPU<a class=\"headerlink\" href=\"#cpu\" title=\"Permanent link\">&para;</a></h4>\n<p>Since executing a query requires processing a large number of rows, it helps to dispatch all operations for entire vectors instead of for separate rows, or to implement the query engine so that there is almost no dispatching cost. If you don't do this, with any half-decent disk subsystem, the query interpreter inevitably stalls the CPU.<br />\nIt makes sense to both store data in columns and process it, when possible, by columns.</p>\n<p>There are two ways to do this:</p>\n<ol>\n<li>\n<p>A vector engine. All operations are written for vectors, instead of for separate values. This means you don't need to call operations very often, and dispatching costs are negligible. Operation code contains an optimized internal cycle.</p>\n</li>\n<li>\n<p>Code generation. The code generated for the query has all the indirect calls in it.</p>\n</li>\n</ol>\n<p>This is not done in \"normal\" databases, because it doesn't make sense when running simple queries. However, there are exceptions. For example, MemSQL uses code generation to reduce latency when processing SQL queries. (For comparison, analytical DBMSs require optimization of throughput, not latency.)</p>\n<p>Note that for CPU efficiency, the query language must be declarative (SQL or MDX), or at least a vector (J, K). The query should only contain implicit loops, allowing for optimization.</p>\n<p><a name=\"../introduction/distinctive_features/\"></a><a name=\"../../../introduction/distinctive_features/\"></a><a name=\"introduction/distinctive_features/\"></a><a name=\"../../../../../introduct");
            
            document.write("ion/distinctive_features/\"></a><a name=\"../../../../introduction/distinctive_features/\"></a><a name=\"distinctive_features/\"></a><a name=\"../../introduction/distinctive_features/\"></a></p>\n<h2 id=\"distinctive-features-of-clickhouse\">Distinctive Features of ClickHouse<a class=\"headerlink\" href=\"#distinctive-features-of-clickhouse\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"true-column-oriented-dbms\">True Column-Oriented DBMS<a class=\"headerlink\" href=\"#true-column-oriented-dbms\" title=\"Permanent link\">&para;</a></h3>\n<p>In a true column-oriented DBMS, no extra data is stored with the values. Among other things, this means that constant-length values must be supported, to avoid storing their length \"number\" next to the values. As an example, a billion UInt8-type values should actually consume around 1 GB uncompressed, or this will strongly affect the CPU use. It is very important to store data compactly (without any \"garbage\") even when uncompressed, since the speed of decompression (CPU usage) depends mainly on the volume of uncompressed data.</p>\n<p>This is worth noting because there are systems that can store values of different columns separately, but that can't effectively process analytical queries due to their optimization for other scenarios. Examples are HBase, BigTable, Cassandra, and HyperTable. In these systems, you will get throughput around a hundred thousand rows per second, but not hundreds of millions of rows per second.</p>\n<p>It's also worth noting that ClickHouse is a database management system, not a single database. ClickHouse allows creating tables and databases in runtime, loading data, and running queries without reconfiguring and restarting the server.</p>\n<h3 id=\"data-compression\">Data Compression<a class=\"headerlink\" href=\"#data-compression\" title=\"Permanent link\">&para;</a></h3>\n<p>Some column-oriented DBMSs (InfiniDB CE and MonetDB) do not use data compression. However, data compression does play a key role in achieving excellent performance.</p>\n<h3 id=\"disk-storage-of-data\">Disk Storage of Data<a class=\"headerlink\" href=\"#disk-storage-of-data\" title=\"Permanent link\">&para;</a></h3>\n<p>Keeping data physically sorted by primary key makes it possible to extract data for it's specific values or value ranges with low latency, less than few dozen milliseconds. Some column-oriented DBMSs (such as SAP HANA and Google PowerDrill) can only work in RAM. This approach encourages the allocation of a larger hardware budget than is actually necessary for real-time analysis. ClickHouse is designed to work on regular hard drives, which means the cost per GB of data storage is low, but SSD and additional RAM are also fully used if available.</p>\n<h3 id=\"parallel-processing-on-multiple-cores\">Parallel Processing on Multiple Cores<a class=\"headerlink\" href=\"#parallel-processing-on-multiple-cores\" title=\"Permanent link\">&para;</a></h3>\n<p>Large queries are parallelized in a natural way, taking all the necessary resources that available on the current server.</p>\n<h3 id=\"distributed-processing-on-multiple-servers\">Distributed Processing on Multiple Servers<a class=\"headerlink\" href=\"#distributed-processing-on-multiple-servers\" title=\"Permanent link\">&para;</a></h3>\n<p>Almost none of the columnar DBMSs mentioned above have support for distributed query processing.<br />\nIn ClickHouse, data can reside on different shards. Each shard can be a group of replicas that are used for fault tolerance. The query is processed on all the shards in parallel. This is transparent for the user.</p>\n<h3 id=\"sql-support\">SQL Support<a class=\"headerlink\" href=\"#sql-support\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports a declarative query language based on SQL that is identical to the SQL standard in many cases.<br />\nSupported queries include GROUP BY, ORDER BY, subqueries in FROM, IN, and JOIN clauses, and scalar subqueries.<br />\nDependent subqueries and window functions are not supported.</p>\n<h3 id=\"vector-engine\">Vector Engine<a class=\"headerlink\" href=\"#vector-engine\" title=\"Permanent link\">&para;</a></h3>\n<p>Data is not only stored by columns, but is processed by vectors (parts of columns). This allows us to achieve high CPU efficiency.</p>\n<h3 id=\"real-time-data-updates\">Real-time Data Updates<a class=\"headerlink\" href=\"#real-time-data-updates\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports tables with a primary key. In order to quickly perform queries on the range of the primary key, the data is sorted incrementally using the merge tree. Due to this, data can continually be added to the table. No locks are taken when new data is ingested.</p>\n<h3 id=\"index\">Index<a class=\"headerlink\" href=\"#index\" title=\"Permanent link\">&para;</a></h3>\n<p>Having a data physically sorted by primary key makes it possible to extract data for it's specific values or value ranges with low latency, less than few dozen milliseconds.</p>\n<h3 id=\"suitable-for-online-queries\">Suitable for Online Queries<a class=\"headerlink\" href=\"#suitable-for-online-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Low latency means that queries can be processed without delay and without trying to prepare answer in advance, right at the same moment while user interface page is loading. In other words, online.</p>\n<h3 id=\"support-for-approximated-calculations\">Support for Approximated Calculations<a class=\"headerlink\" href=\"#support-for-approximated-calculations\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse provides various ways to trade accuracy for performance:</p>\n<ol>\n<li>Aggregate functions for approximated calculation of the number of distinct values, medians, and quantiles.        </li>\n<li>Running a query based on a part (sample) of data and getting an approximated result. In this case, proportionally less data is retrieved from the disk.        </li>\n<li>Running an aggregation for a limited number of random keys, instead of for all keys. Under certain conditions for key distribution in the data, this provides a reasonably accurate result while using fewer resources.</li>\n</ol>\n<h3 id=\"data-replication-and-data-integrity-support\">Data replication and data integrity support<a class=\"headerlink\" href=\"#data-replication-and-data-integrity-support\" title=\"Permanent link\">&para;</a></h3>\n<p>Uses asynchronous multimaster replication. After being written to any available replica, data is distributed to all the remaining replicas in the background. The system maintains identical data on different replicas. Recovery after most failures is performed automatically, and in complex cases \u2014 semi-automatically.</p>\n<p>For more information, see the section <a href=\"#../operations/table_engines/replication/\">Data replication</a>.</p>\n<p><a name=\"../introduction/features_considered_disadvantages/\"></a><a name=\"../../introduction/features_considered_disadvantages/\"></a><a name=\"introduction/features_considered_disadvantages/\"></a><a name=\"features_considered_disadvantages/\"></a><a name=\"../../../../../introduction/features_considered_disadvantages/\"></a><a name=\"../../../../introduction/features_considered_disadvantages/\"></a><a name=\"../../../introduction/features_considered_disadvantages/\"></a></p>\n<h2 id=\"clickhouse-features-that-can-be-considered-disadvantages\">ClickHouse Features that Can be Considered Disadvantages<a class=\"headerlink\" href=\"#clickhouse-features-that-can-be-considered-disadvantages\" title=\"Permanent link\">&para;</a></h2>\n<ol>\n<li>No full-fledged transactions.</li>\n<li>Lack of ability to modify or delete already inserted data with high rate and low latency. There are batch deletes and updates available to clean up or modify data, for example to comply with <a href=\"https://gdpr-info.eu\" rel=\"external nofollow noreferrer\">GDPR</a>.</li>\n<li>The sparse index makes ClickHouse not really suitable for point queries retrieving single rows by their keys.</li>\n</ol>\n<p><a name=\"performance/\"></a><a name=\"../../../introduction/performance/\"></a><a name=\"../../../../introduction/performance/\"></a><a name=\"../introduction/performance/\"></a><a name=\"../../introduction/performance/\"></a><a name=\"../../../../../introduction/performance/\"></a><a name=\"introduction/performance/\"></a></p>\n<h2 id=\"performance\">Performance<a class=\"headerlink\" href=\"#performance\" title=\"Permanent link\">&para;</a></h2>\n<p>According to internal testing results at Yandex, ClickHouse shows the best performance (both the highest throughput for long queries and the lowest latency on short queries) for comparable operating scenarios among systems of its class that were available for testing. You can view the test results on a <a href=\"https://clickhouse.yandex/benchmark.html\" rel=\"external nofollow noreferrer\">separate page</a>.</p>\n<p>This has also been confirmed by numerous independent benchmarks. They are not difficult to find using an internet search, or you can see <a href=\"https://clickhouse.yandex/#independent-benchmarks\" rel=\"external nofollow noreferrer\">our small collection of related links</a>.</p>\n<h3 id=\"throughput-for-a-single-large-query\">Throughput for a Single Large Query<a class=\"headerlink\" href=\"#throughput-for-a-single-large-query\" title=\"Permanent link\">&para;</a></h3>\n<p>Throughput can be measured in rows per second or in megabytes per second. If the data is placed in the page cache, a query that is not too complex is processed on modern hardware at a speed of approximately 2-10 GB/s of uncompressed data on a single server (for the simplest cases, the speed may reach 30 GB/s). If data is not placed in the page cache, the speed depends on the disk subsystem and the data compression rate. For example, if the disk subsystem allows reading data at 400 MB/s, and the data compression rate is 3, the speed will be around 1.2 GB/s. To get the speed in rows per second, divide the speed in bytes per second by the total size of the columns used in the query. For example, if 10 bytes of columns are extracted, the speed will be around 100-200 million rows per second.</p>\n<p>The processing speed increases almost linearly for distributed processing, but only if the number of rows resulting from aggregation or sorting is not too large.</p>\n<h3 id=\"latency-when-processing-s");
            
            document.write("hort-queries\">Latency When Processing Short Queries<a class=\"headerlink\" href=\"#latency-when-processing-short-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>If a query uses a primary key and does not select too many rows to process (hundreds of thousands), and does not use too many columns, we can expect less than 50 milliseconds of latency (single digits of milliseconds in the best case) if data is placed in the page cache. Otherwise, latency is calculated from the number of seeks. If you use rotating drives, for a system that is not overloaded, the latency is calculated by this formula: seek time (10 ms) * number of columns queried * number of data parts.</p>\n<h3 id=\"throughput-when-processing-a-large-quantity-of-short-queries\">Throughput When Processing a Large Quantity of Short Queries<a class=\"headerlink\" href=\"#throughput-when-processing-a-large-quantity-of-short-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Under the same conditions, ClickHouse can handle several hundred queries per second on a single server (up to several thousand in the best case). Since this scenario is not typical for analytical DBMSs, we recommend expecting a maximum of 100 queries per second.</p>\n<h3 id=\"performance-when-inserting-data\">Performance When Inserting Data<a class=\"headerlink\" href=\"#performance-when-inserting-data\" title=\"Permanent link\">&para;</a></h3>\n<p>We recommend inserting data in packets of at least 1000 rows, or no more than a single request per second. When inserting to a MergeTree table from a tab-separated dump, the insertion speed will be from 50 to 200 MB/s. If the inserted rows are around 1 Kb in size, the speed will be from 50,000 to 200,000 rows per second. If the rows are small, the performance will be higher in rows per second (on Banner System data -<code>&gt;</code> 500,000 rows per second; on Graphite data -<code>&gt;</code> 1,000,000 rows per second). To improve performance, you can make multiple INSERT queries in parallel, and performance will increase linearly.</p>\n<p><a name=\"../../introduction/ya_metrika_task/\"></a><a name=\"../../../../../introduction/ya_metrika_task/\"></a><a name=\"../../../../introduction/ya_metrika_task/\"></a><a name=\"../../../introduction/ya_metrika_task/\"></a><a name=\"ya_metrika_task/\"></a><a name=\"../introduction/ya_metrika_task/\"></a><a name=\"introduction/ya_metrika_task/\"></a></p>\n<h2 id=\"yandex-metrica-use-case\">Yandex.Metrica Use Case<a class=\"headerlink\" href=\"#yandex-metrica-use-case\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse was originally developed to power <a href=\"https://metrica.yandex.com/\" rel=\"external nofollow noreferrer\">Yandex.Metrica</a>, <a href=\"http://w3techs.com/technologies/overview/traffic_analysis/all\" rel=\"external nofollow noreferrer\">the second largest web analytics platform in the world</a>, and continues to be the core component of this system. With more than 13 trillion records in the database and more than 20 billion events daily, ClickHouse allows generating custom reports on the fly directly from non-aggregated data. This article briefly covers the goals of ClickHouse in the early stages of its development.</p>\n<p>Yandex.Metrica builds customized reports on the fly based on hits and sessions, with arbitrary segments defined by the user. This often requires building complex aggregates, such as the number of unique users. New data for building a report is received in real time.</p>\n<p>As of April 2014, Yandex.Metrica was tracking about 12 billion events (page views and clicks) daily. All these events must be stored in order to build custom reports. A single query may require scanning millions of rows within a few hundred milliseconds, or hundreds of millions of rows in just a few seconds.</p>\n<h3 id=\"usage-in-yandex-metrica-and-other-yandex-services\">Usage in Yandex.Metrica and Other Yandex Services<a class=\"headerlink\" href=\"#usage-in-yandex-metrica-and-other-yandex-services\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse is used for multiple purposes in Yandex.Metrica.<br />\nIts main task is to build reports in online mode using non-aggregated data. It uses a cluster of 374 servers, which store over 20.3 trillion rows in the database. The volume of compressed data, without counting duplication and replication, is about 2 PB. The volume of uncompressed data (in TSV format) would be approximately 17 PB.</p>\n<p>ClickHouse is also used for:</p>\n<ul>\n<li>Storing data for Session Replay from Yandex.Metrica.</li>\n<li>Processing intermediate data.</li>\n<li>Building global reports with Analytics.</li>\n<li>Running queries for debugging the Yandex.Metrica engine.</li>\n<li>Analyzing logs from the API and the user interface.</li>\n</ul>\n<p>ClickHouse has at least a dozen installations in other Yandex services: in search verticals, Market, Direct, business analytics, mobile development, AdFox, personal services, and others.</p>\n<h3 id=\"aggregated-and-non-aggregated-data\">Aggregated and Non-aggregated Data<a class=\"headerlink\" href=\"#aggregated-and-non-aggregated-data\" title=\"Permanent link\">&para;</a></h3>\n<p>There is a popular opinion that in order to effectively calculate statistics, you must aggregate data, since this reduces the volume of data.</p>\n<p>But data aggregation is a very limited solution, for the following reasons:</p>\n<ul>\n<li>You must have a pre-defined list of reports the user will need.</li>\n<li>The user can't make custom reports.</li>\n<li>When aggregating a large quantity of keys, the volume of data is not reduced, and aggregation is useless.</li>\n<li>For a large number of reports, there are too many aggregation variations (combinatorial explosion).</li>\n<li>When aggregating keys with high cardinality (such as URLs), the volume of data is not reduced by much (less than twofold).</li>\n<li>For this reason, the volume of data with aggregation might grow instead of shrink.</li>\n<li>Users do not view all the reports we generate for them. A large portion of calculations are useless.</li>\n<li>The logical integrity of data may be violated for various aggregations.</li>\n</ul>\n<p>If we do not aggregate anything and work with non-aggregated data, this might actually reduce the volume of calculations.</p>\n<p>However, with aggregation, a significant part of the work is taken offline and completed relatively calmly. In contrast, online calculations require calculating as fast as possible, since the user is waiting for the result.</p>\n<p>Yandex.Metrica has a specialized system for aggregating data called Metrage, which is used for the majority of reports.<br />\nStarting in 2009, Yandex.Metrica also used a specialized OLAP database for non-aggregated data called OLAPServer, which was previously used for the report builder.<br />\nOLAPServer worked well for non-aggregated data, but it had many restrictions that did not allow it to be used for all reports as desired. These included the lack of support for data types (only numbers), and the inability to incrementally update data in real-time (it could only be done by rewriting data daily). OLAPServer is not a DBMS, but a specialized DB.</p>\n<p>To remove the limitations of OLAPServer and solve the problem of working with non-aggregated data for all reports, we developed the ClickHouse DBMS.</p>\n<p><a name=\"../../../../getting_started/\"></a><a name=\"../../../../../getting_started/\"></a><a name=\"getting_started/\"></a><a name=\"../getting_started/\"></a><a name=\"../../getting_started/\"></a><a name=\"../../../getting_started/\"></a></p>\n<h2 id=\"getting-started\">Getting Started<a class=\"headerlink\" href=\"#getting-started\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"system-requirements\">System Requirements<a class=\"headerlink\" href=\"#system-requirements\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse can run on any Linux, FreeBSD or Mac OS X with x86_64 CPU architecture.</p>\n<p>Though pre-built binaries are typically compiled to leverage SSE 4.2 instruction set, so unless otherwise stated usage of CPU that supports it becomes an additional system requirement. Here's the command to check if current CPU has support for SSE 4.2:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ grep -q sse4_2 /proc/cpuinfo <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SSE 4.2 supported&quot;</span> <span class=\"o\">||</span> <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SSE 4.2 not supported&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"installation\">Installation<a class=\"headerlink\" href=\"#installation\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"from-deb-packages\">From DEB Packages<a class=\"headerlink\" href=\"#from-deb-packages\" title=\"Permanent link\">&para;</a></h4>\n<p>Yandex ClickHouse team recommends using official pre-compiled <code>deb</code> packages for Debian or Ubuntu.</p>\n<p>To install official packages add the Yandex repository in <code>/etc/apt/sources.list</code> or in a separate <code>/etc/apt/sources.list.d/clickhouse.list</code> file:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ deb http://repo.yandex.ru/clickhouse/deb/stable/ main/\n</code></pre></div>\n\n\n<p>If you want to use the most recent version, replace <code>stable</code> with <code>testing</code> (this is recommended for your testing environments).</p>\n<p>Then run these commands to actually install packages:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install dirmngr    <span class=\"c1\"># optional</span>\n$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv E0C56BD4    <span class=\"c1\"># optional</span>\n$ sudo apt-get update\n$ sudo apt-get install clickhouse-client clickhouse-server\n</code></pre></div>\n\n\n<p>You can also download and install packages manually from here: <a href=\"https://repo.yandex.ru/clickhouse/deb/stable/main/\">https://repo.yandex.ru/clickhouse/deb/stable/main/</a>.</p>\n<h4 id=\"from-rpm-packages\">From RPM Packages<a class=\"headerlink\" href=\"#from-rpm-packages\" title=\"Permanent link\">&para;</a></h4>\n<p>Yandex ClickHouse team recommends using official pre-compiled <code>rpm</code> packages for CentOS, RedHat and all other rpm-based Linux distributions.</p>\n<p>First you need to add the official repository:</p>\n<div class=\"codehilite\"><pre><span></span");
            
            document.write("><code>$ sudo yum install yum-utils\n$ sudo rpm --import https://repo.yandex.ru/clickhouse/CLICKHOUSE-KEY.GPG\n$ sudo yum-config-manager --add-repo https://repo.yandex.ru/clickhouse/rpm/stable/x86_64\n</code></pre></div>\n\n\n<p>If you want to use the most recent version, replace <code>stable</code> with <code>testing</code> (this is recommended for your testing environments).</p>\n<p>Then run these commands to actually install packages:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo yum install clickhouse-server clickhouse-client\n</code></pre></div>\n\n\n<p>You can also download and install packages manually from here: <a href=\"https://repo.yandex.ru/clickhouse/rpm/stable/x86_64\">https://repo.yandex.ru/clickhouse/rpm/stable/x86_64</a>.</p>\n<h4 id=\"from-docker-image\">From Docker Image<a class=\"headerlink\" href=\"#from-docker-image\" title=\"Permanent link\">&para;</a></h4>\n<p>To run ClickHouse inside Docker follow the guide on <a href=\"https://hub.docker.com/r/yandex/clickhouse-server/\" rel=\"external nofollow noreferrer\">Docker Hub</a>. Those images use official <code>deb</code> packages inside.</p>\n<h4 id=\"from-sources\">From Sources<a class=\"headerlink\" href=\"#from-sources\" title=\"Permanent link\">&para;</a></h4>\n<p>To manually compile ClickHouse, follow the instructions for <a href=\"#../development/build/\">Linux</a> or <a href=\"#../development/build_osx/\">Mac OS X</a>.</p>\n<p>You can compile packages and install them or use programs without installing packages. Also by building manually you can disable SSE 4.2 requirement or build for AArch64 CPUs.</p>\n<div class=\"codehilite\"><pre><span></span><code>Client: dbms/programs/clickhouse-client\nServer: dbms/programs/clickhouse-server\n</code></pre></div>\n\n\n<p>You'll need to create a data and metadata folders and <code>chown</code> them for the desired user. Their paths can be changed in server config (src/dbms/programs/server/config.xml), by default they are:</p>\n<div class=\"codehilite\"><pre><span></span><code>/opt/clickhouse/data/default/\n/opt/clickhouse/metadata/default/\n</code></pre></div>\n\n\n<p>On Gentoo you can just use <code>emerge clickhouse</code> to install ClickHouse from sources.</p>\n<h3 id=\"launch\">Launch<a class=\"headerlink\" href=\"#launch\" title=\"Permanent link\">&para;</a></h3>\n<p>To start the server as a daemon, run:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo service clickhouse-server start\n</code></pre></div>\n\n\n<p>If you don't have <code>service</code> command, run as</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo /etc/init.d/clickhouse-server start\n</code></pre></div>\n\n\n<p>See the logs in the <code>/var/log/clickhouse-server/</code> directory.</p>\n<p>If the server doesn't start, check the configurations in the file <code>/etc/clickhouse-server/config.xml</code>.</p>\n<p>You can also manually launch the server from the console:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-server --config-file<span class=\"o\">=</span>/etc/clickhouse-server/config.xml\n</code></pre></div>\n\n\n<p>In this case, the log will be printed to the console, which is convenient during development.<br />\nIf the configuration file is in the current directory, you don't need to specify the <code>--config-file</code> parameter. By default, it uses <code>./config.xml</code>.</p>\n<p>ClickHouse supports access restriction settings. They are located in the <code>users.xml</code> file (next to <code>config.xml</code>).<br />\nBy default, access is allowed from anywhere for the <code>default</code> user, without a password. See <code>user/default/networks</code>.<br />\nFor more information, see the section <a href=\"#../operations/configuration_files/\">\"Configuration Files\"</a>.</p>\n<p>After launching server, you can use the command-line client to connect to it:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client\n</code></pre></div>\n\n\n<p>By default it connects to <code>localhost:9000</code> on behalf of the user <code>default</code> without a password. It can also be used to connect to a remote server using <code>--host</code> argument.</p>\n<p>The terminal must use UTF-8 encoding.<br />\nFor more information, see the section <a href=\"#../interfaces/cli/\">\"Command-line client\"</a>.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ ./clickhouse-client\nClickHouse client version <span class=\"m\">0</span>.0.18749.\nConnecting to localhost:9000.\nConnected to ClickHouse server version <span class=\"m\">0</span>.0.18749.\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"mi\">1</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u25001\u2500\u2510\n\u2502 1 \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>Congratulations, the system works!</strong></p>\n<p>To continue experimenting, you can download one of test data sets or go through <a href=\"https://clickhouse.yandex/tutorial.html\" rel=\"external nofollow noreferrer\">tutorial</a>.</p>\n<p><a name=\"../../../../../getting_started/example_datasets/ontime/\"></a><a name=\"../../../example_datasets/ontime/\"></a><a name=\"../example_datasets/ontime/\"></a><a name=\"ontime/\"></a><a name=\"example_datasets/ontime/\"></a><a name=\"../getting_started/example_datasets/ontime/\"></a><a name=\"../../example_datasets/ontime/\"></a><a name=\"../../../../../../example_datasets/ontime/\"></a><a name=\"../../../../example_datasets/ontime/\"></a><a name=\"../../getting_started/example_datasets/ontime/\"></a><a name=\"../../../../getting_started/example_datasets/ontime/\"></a><a name=\"getting_started/example_datasets/ontime/\"></a><a name=\"../../../../../example_datasets/ontime/\"></a><a name=\"../../../getting_started/example_datasets/ontime/\"></a></p>\n<h2 id=\"ontime\">OnTime<a class=\"headerlink\" href=\"#ontime\" title=\"Permanent link\">&para;</a></h2>\n<p>This dataset can be obtained in two ways:</p>\n<ul>\n<li>import from raw data</li>\n<li>download of prepared partitions</li>\n</ul>\n<h3 id=\"import-from-raw-data\">Import From Raw Data<a class=\"headerlink\" href=\"#import-from-raw-data\" title=\"Permanent link\">&para;</a></h3>\n<p>Downloading data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">for</span> s in <span class=\"sb\">`</span>seq <span class=\"m\">1987</span> <span class=\"m\">2018</span><span class=\"sb\">`</span>\n<span class=\"k\">do</span>\n<span class=\"k\">for</span> m in <span class=\"sb\">`</span>seq <span class=\"m\">1</span> <span class=\"m\">12</span><span class=\"sb\">`</span>\n<span class=\"k\">do</span>\nwget https://transtats.bts.gov/PREZIP/On_Time_Reporting_Carrier_On_Time_Performance_1987_present_<span class=\"si\">${</span><span class=\"nv\">s</span><span class=\"si\">}</span>_<span class=\"si\">${</span><span class=\"nv\">m</span><span class=\"si\">}</span>.zip\n<span class=\"k\">done</span>\n<span class=\"k\">done</span>\n</code></pre></div>\n\n\n<p>(from <a href=\"https://github.com/Percona-Lab/ontime-airline-performance/blob/master/download.sh\">https://github.com/Percona-Lab/ontime-airline-performance/blob/master/download.sh</a> )</p>\n<p>Creating a table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"o\">`</span><span class=\"n\">ontime</span><span class=\"o\">`</span> <span class=\"p\">(</span>\n  <span class=\"o\">`</span><span class=\"k\">Year</span><span class=\"o\">`</span> <span class=\"n\">UInt16</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Quarter</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"k\">Month</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DayofMonth</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DayOfWeek</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">FlightDate</span><span class=\"o\">`</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">UniqueCarrier</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">AirlineID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Carrier</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">FlightNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginAirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginAirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginCityMarketID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Origin</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginCityName</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginState</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginStateFips</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginStateName</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">OriginWac</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=");
            
            document.write("\"o\">`</span><span class=\"n\">DestAirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestAirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestCityMarketID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Dest</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">DestCityName</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestState</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">DestStateFips</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestStateName</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DestWac</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CRSDepTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepDelayMinutes</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepDel15</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepartureDelayGroups</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DepTimeBlk</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">TaxiOut</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">TaxiIn</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CRSArrTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrDelayMinutes</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrDel15</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrivalDelayGroups</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ArrTimeBlk</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Cancelled</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CancellationCode</span><span class=\"o\">`</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span>\n  <span class=\"o\">`</span><span class=\"n\">Diverted</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CRSElapsedTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">ActualElapsedTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">AirTime</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Flights</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Distance</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DistanceGroup</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">CarrierDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">WeatherDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">NASDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">SecurityDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">LateAircraftDelay</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">FirstDepTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">TotalAddGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">LongestAddGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivAirportLandings</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivReachedDest</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivActualElapsedTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivArrDelay</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">DivDistance</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div1TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div2TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div3WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">");
            
            document.write("Div3TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div4TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5Airport</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5AirportID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5AirportSeqID</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5WheelsOn</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5TotalGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5LongestGTime</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5WheelsOff</span><span class=\"o\">`</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n  <span class=\"o\">`</span><span class=\"n\">Div5TailNum</span><span class=\"o\">`</span> <span class=\"n\">String</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">FlightDate</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"n\">FlightDate</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Loading data:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"k\">for</span> i in *.zip<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> unzip -cq <span class=\"nv\">$i</span> <span class=\"s1\">&#39;*.csv&#39;</span> <span class=\"p\">|</span> sed <span class=\"s1\">&#39;s/\\.00//g&#39;</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO ontime FORMAT CSVWithNames&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n</code></pre></div>\n\n\n<h3 id=\"download-of-prepared-partitions\">Download of Prepared Partitions<a class=\"headerlink\" href=\"#download-of-prepared-partitions\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -O https://clickhouse-datasets.s3.yandex.net/ontime/partitions/ontime.tar\n$ tar xvf ontime.tar -C /var/lib/clickhouse <span class=\"c1\"># path to ClickHouse data directory</span>\n$ <span class=\"c1\"># check permissions of unpacked data, fix if required</span>\n$ sudo service clickhouse-server restart\n$ clickhouse-client --query <span class=\"s2\">&quot;select count(*) from datasets.ontime&quot;</span>\n</code></pre></div>\n\n\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Info</p>\n<p>If you will run queries described below, you have to use full table name,<br />\n<code>datasets.ontime</code>.</p>\n</div>\n<h3 id=\"queries\">Queries<a class=\"headerlink\" href=\"#queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Q0.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">c1</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"k\">Month</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c1</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"k\">Month</span>\n<span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Q1. The number of flights per day from the year 2000 to 2008</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">DayOfWeek</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">DayOfWeek</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q2. The number of flights delayed by more than 10 minutes, grouped by the day of the week, for 2000-2008</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">DayOfWeek</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">DayOfWeek</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3. The number of delays by airport for 2000-2008</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Origin</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Origin</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q4. The number of delays by carrier for 2007</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">=</span><span class=\"mi\">2007</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q5. The percentage of delays by carrier for 2007</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"o\">*</span><span class=\"mi\">100</span><span class=\"o\">/</span><span class=\"n\">c2</span> <span class=\"k\">as</span> <span class=\"n\">c3</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">Carrier</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span>\n        <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">=</span><span class=\"mi\">2007</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"p\">)</span>\n<span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n");
            
            document.write("    <span class=\"k\">SELECT</span>\n        <span class=\"n\">Carrier</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c2</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">=</span><span class=\"mi\">2007</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">c3</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Better version of the same query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"mi\">100</span> <span class=\"k\">AS</span> <span class=\"n\">c3</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">=</span><span class=\"mi\">2007</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n</code></pre></div>\n\n\n<p>Q6. The previous request for a broader range of years, 2000-2008</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"o\">*</span><span class=\"mi\">100</span><span class=\"o\">/</span><span class=\"n\">c2</span> <span class=\"k\">as</span> <span class=\"n\">c3</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">Carrier</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span>\n        <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"p\">)</span>\n<span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">Carrier</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c2</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">c3</span> <span class=\"k\">DESC</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Better version of the same query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"mi\">100</span> <span class=\"k\">AS</span> <span class=\"n\">c3</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">AND</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2008</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">Carrier</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q7. Percentage of flights delayed for more than 10 minutes, by year</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"n\">c1</span><span class=\"o\">/</span><span class=\"n\">c2</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">select</span>\n        <span class=\"k\">Year</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"mi\">100</span> <span class=\"k\">as</span> <span class=\"n\">c1</span>\n    <span class=\"k\">from</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span>\n<span class=\"p\">)</span>\n<span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">select</span>\n        <span class=\"k\">Year</span><span class=\"p\">,</span>\n        <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">c2</span>\n    <span class=\"k\">from</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Better version of the same query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">DepDelay</span><span class=\"o\">&gt;</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q8. The most popular destinations by the number of directly connected cities for various year ranges</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">DestCityName</span><span class=\"p\">,</span> <span class=\"n\">uniqExact</span><span class=\"p\">(</span><span class=\"n\">OriginCityName</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">u</span> <span class=\"n\">F</span>\n<span class=\"n\">ROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">Year</span><span class=\"o\">&gt;=</span><span class=\"mi\">2000</span> <span class=\"k\">and</span> <span class=\"k\">Year</span><span class=\"o\">&lt;=</span><span class=\"mi\">2010</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">DestCityName</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">u</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q9.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c1</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q10.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n   <span class=\"k\">min</span><span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">),</span> <span class=\"k\">max</span><span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">),</span> <span class=\"n\">Carrier</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">cnt</span><span class=\"p\">,</span>\n   <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">ArrDelayMinutes</span><span class=\"o\">&gt;</span><span class=\"mi\">30</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">flights_delayed</span><span class=\"p\">,</span>\n   <span class=\"n\">round</span><span class=\"p\">(</span><span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">ArrDelayMinutes</span><span class=\"o\">&gt;</span><span class=\"mi\">30</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">),</span><span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">rate</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span>\n   <span class=\"n\">DayOfWeek</span> <span class=\"k\">NOT</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">OriginState</span> <span class=\"k\">NOT</span> <span cl");
            
            document.write("ass=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;AK&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;HI&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;PR&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;VI&#39;</span><span class=\"p\">)</span>\n   <span class=\"k\">AND</span> <span class=\"n\">DestState</span> <span class=\"k\">NOT</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;AK&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;HI&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;PR&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;VI&#39;</span><span class=\"p\">)</span>\n   <span class=\"k\">AND</span> <span class=\"n\">FlightDate</span> <span class=\"o\">&lt;</span> <span class=\"s1\">&#39;2010-01-01&#39;</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">by</span> <span class=\"n\">Carrier</span>\n<span class=\"k\">HAVING</span> <span class=\"n\">cnt</span><span class=\"o\">&gt;</span><span class=\"mi\">100000</span> <span class=\"k\">and</span> <span class=\"k\">max</span><span class=\"p\">(</span><span class=\"k\">Year</span><span class=\"p\">)</span><span class=\"o\">&gt;</span><span class=\"mi\">1990</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">by</span> <span class=\"n\">rate</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">1000</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Bonus:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">cnt</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span><span class=\"k\">Month</span><span class=\"p\">,</span><span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">cnt</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">DepDel15</span><span class=\"o\">=</span><span class=\"mi\">1</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">,</span><span class=\"k\">Month</span>\n<span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">c1</span><span class=\"p\">)</span> <span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"k\">Year</span><span class=\"p\">,</span><span class=\"k\">Month</span><span class=\"p\">,</span><span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">c1</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">Year</span><span class=\"p\">,</span><span class=\"k\">Month</span>\n<span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">DestCityName</span><span class=\"p\">,</span> <span class=\"n\">uniqExact</span><span class=\"p\">(</span><span class=\"n\">OriginCityName</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">u</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">DestCityName</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">u</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">OriginCityName</span><span class=\"p\">,</span> <span class=\"n\">DestCityName</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">OriginCityName</span><span class=\"p\">,</span> <span class=\"n\">DestCityName</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">OriginCityName</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">OriginCityName</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>This performance test was created by Vadim Tkachenko. See:</p>\n<ul>\n<li><a href=\"https://www.percona.com/blog/2009/10/02/analyzing-air-traffic-performance-with-infobright-and-monetdb/\">https://www.percona.com/blog/2009/10/02/analyzing-air-traffic-performance-with-infobright-and-monetdb/</a></li>\n<li><a href=\"https://www.percona.com/blog/2009/10/26/air-traffic-queries-in-luciddb/\">https://www.percona.com/blog/2009/10/26/air-traffic-queries-in-luciddb/</a></li>\n<li><a href=\"https://www.percona.com/blog/2009/11/02/air-traffic-queries-in-infinidb-early-alpha/\">https://www.percona.com/blog/2009/11/02/air-traffic-queries-in-infinidb-early-alpha/</a></li>\n<li><a href=\"https://www.percona.com/blog/2014/04/21/using-apache-hadoop-and-impala-together-with-mysql-for-data-analysis/\">https://www.percona.com/blog/2014/04/21/using-apache-hadoop-and-impala-together-with-mysql-for-data-analysis/</a></li>\n<li><a href=\"https://www.percona.com/blog/2016/01/07/apache-spark-with-air-ontime-performance-data/\">https://www.percona.com/blog/2016/01/07/apache-spark-with-air-ontime-performance-data/</a></li>\n<li><a href=\"http://nickmakos.blogspot.ru/2012/08/analyzing-air-traffic-performance-with.html\">http://nickmakos.blogspot.ru/2012/08/analyzing-air-traffic-performance-with.html</a></li>\n</ul>\n<p><a name=\"../../../../../../example_datasets/nyc_taxi/\"></a><a name=\"../../../example_datasets/nyc_taxi/\"></a><a name=\"../../../../example_datasets/nyc_taxi/\"></a><a name=\"example_datasets/nyc_taxi/\"></a><a name=\"../../../../../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../../example_datasets/nyc_taxi/\"></a><a name=\"nyc_taxi/\"></a><a name=\"../../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../../../../../example_datasets/nyc_taxi/\"></a><a name=\"../../../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../../../../getting_started/example_datasets/nyc_taxi/\"></a><a name=\"getting_started/example_datasets/nyc_taxi/\"></a><a name=\"../example_datasets/nyc_taxi/\"></a></p>\n<h2 id=\"new-york-taxi-data\">New York Taxi Data<a class=\"headerlink\" href=\"#new-york-taxi-data\" title=\"Permanent link\">&para;</a></h2>\n<p>This dataset can be obtained in two ways:</p>\n<ul>\n<li>import from raw data</li>\n<li>download of prepared partitions</li>\n</ul>\n<h3 id=\"how-to-import-the-raw-data\">How to Import The Raw Data<a class=\"headerlink\" href=\"#how-to-import-the-raw-data\" title=\"Permanent link\">&para;</a></h3>\n<p>See <a href=\"https://github.com/toddwschneider/nyc-taxi-data\">https://github.com/toddwschneider/nyc-taxi-data</a> and <a href=\"http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html\">http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html</a> for the description of a dataset and instructions for downloading.</p>\n<p>Downloading will result in about 227 GB of uncompressed data in CSV files. The download takes about an hour over a 1 Gbit connection (parallel downloading from s3.amazonaws.com recovers at least half of a 1 Gbit channel).<br />\nSome of the files might not download fully. Check the file sizes and re-download any that seem doubtful.</p>\n<p>Some of the files might contain invalid rows. You can fix them as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>sed -E <span class=\"s1\">&#39;/(.*,){18,}/d&#39;</span> data/yellow_tripdata_2010-02.csv &gt; data/yellow_tripdata_2010-02.csv_\nsed -E <span class=\"s1\">&#39;/(.*,){18,}/d&#39;</span> data/yellow_tripdata_2010-03.csv &gt; data/yellow_tripdata_2010-03.csv_\nmv data/yellow_tripdata_2010-02.csv_ data/yellow_tripdata_2010-02.csv\nmv data/yellow_tripdata_2010-03.csv_ data/yellow_tripdata_2010-03.csv\n</code></pre></div>\n\n\n<p>Then the data must be pre-processed in PostgreSQL. This will create selections of points in the polygons (to match points on the map with the boroughs of New York City) and combine all the data into a single denormalized flat table by using a JOIN. To do this, you will need to install PostgreSQL with PostGIS support.</p>\n<p>Be careful when running <code>initialize_database.sh</code> and manually re-check that all the tables were created correctly.</p>\n<p>It takes about 20-30 minutes to process each month's worth of data in PostgreSQL, for a total of about 48 hours.</p>\n<p>You can check the number of downloaded rows as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">time</span> psql nyc-taxi-data -c <span class=\"s2\">&quot;SELECT count(*) FROM trips;&quot;</span>\n<span class=\"c1\">### Count</span>\n <span class=\"m\">1298979494</span>\n<span class=\"o\">(</span><span class=\"m\">1</span> row<span class=\"o\">)</span>\n\nreal    7m9.164s\n</code></pre></div>\n\n\n<p>(This is slightly more than 1.1 billion rows reported by Mark Litwintschik in a series of blog posts.)</p>\n<p>The data in PostgreSQL uses 370 GB of space.</p>\n<p>Exporting the data from PostgreSQL:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">COPY</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">vendor_id</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_datetime</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</");
            
            document.write("span><span class=\"n\">dropoff_datetime</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">store_and_fwd_flag</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">rate_code_id</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_longitude</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_latitude</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff_longitude</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff_latitude</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">passenger_count</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">trip_distance</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">fare_amount</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">extra</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">mta_tax</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">tip_amount</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">tolls_amount</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">ehail_fee</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">improvement_surcharge</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">total_amount</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">payment_type</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">trip_type</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup</span><span class=\"p\">,</span>\n           <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff</span><span class=\"p\">,</span>\n\n           <span class=\"n\">cab_types</span><span class=\"p\">.</span><span class=\"k\">type</span> <span class=\"n\">cab_type</span><span class=\"p\">,</span>\n\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">precipitation_tenths_of_mm</span> <span class=\"n\">rain</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">snow_depth_mm</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">snowfall_mm</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">max_temperature_tenths_degrees_celsius</span> <span class=\"n\">max_temp</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">min_temperature_tenths_degrees_celsius</span> <span class=\"n\">min_temp</span><span class=\"p\">,</span>\n           <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"n\">average_wind_speed_tenths_of_meters_per_second</span> <span class=\"n\">wind</span><span class=\"p\">,</span>\n\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">gid</span> <span class=\"n\">pickup_nyct2010_gid</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">ctlabel</span> <span class=\"n\">pickup_ctlabel</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">borocode</span> <span class=\"n\">pickup_borocode</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">boroname</span> <span class=\"n\">pickup_boroname</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">ct2010</span> <span class=\"n\">pickup_ct2010</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">boroct2010</span> <span class=\"n\">pickup_boroct2010</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">cdeligibil</span> <span class=\"n\">pickup_cdeligibil</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">ntacode</span> <span class=\"n\">pickup_ntacode</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">ntaname</span> <span class=\"n\">pickup_ntaname</span><span class=\"p\">,</span>\n           <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">puma</span> <span class=\"n\">pickup_puma</span><span class=\"p\">,</span>\n\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">gid</span> <span class=\"n\">dropoff_nyct2010_gid</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">ctlabel</span> <span class=\"n\">dropoff_ctlabel</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">borocode</span> <span class=\"n\">dropoff_borocode</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">boroname</span> <span class=\"n\">dropoff_boroname</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">ct2010</span> <span class=\"n\">dropoff_ct2010</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">boroct2010</span> <span class=\"n\">dropoff_boroct2010</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">cdeligibil</span> <span class=\"n\">dropoff_cdeligibil</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">ntacode</span> <span class=\"n\">dropoff_ntacode</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">ntaname</span> <span class=\"n\">dropoff_ntaname</span><span class=\"p\">,</span>\n           <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">puma</span> <span class=\"n\">dropoff_puma</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">trips</span>\n    <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">cab_types</span>\n        <span class=\"k\">ON</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">cab_type_id</span> <span class=\"o\">=</span> <span class=\"n\">cab_types</span><span class=\"p\">.</span><span class=\"n\">id</span>\n    <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">central_park_weather_observations_raw</span> <span class=\"n\">weather</span>\n        <span class=\"k\">ON</span> <span class=\"n\">weather</span><span class=\"p\">.</span><span class=\"nb\">date</span> <span class=\"o\">=</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_datetime</span><span class=\"p\">::</span><span class=\"nb\">date</span>\n    <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">nyct2010</span> <span class=\"n\">pick_up</span>\n        <span class=\"k\">ON</span> <span class=\"n\">pick_up</span><span class=\"p\">.</span><span class=\"n\">gid</span> <span class=\"o\">=</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">pickup_nyct2010_gid</span>\n    <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">nyct2010</span> <span class=\"n\">drop_off</span>\n        <span class=\"k\">ON</span> <span class=\"n\">drop_off</span><span class=\"p\">.</span><span class=\"n\">gid</span> <span class=\"o\">=</span> <span class=\"n\">trips</span><span class=\"p\">.</span><span class=\"n\">dropoff_nyct2010_gid</span>\n<span class=\"p\">)</span> <span class=\"k\">TO</span> <span class=\"s1\">&#39;/opt/milovidov/nyc-taxi-data/trips.tsv&#39;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>The data snapshot is created at a speed of about 50 MB per second. While creating the snapshot, PostgreSQL reads from the disk at a speed of about 28 MB per second.<br />\nThis takes about 5 hours. The resulting TSV file is 590612904969 bytes.</p>\n<p>Create a temporary table in ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">trips</span>\n<span class=\"p\">(</span>\n<span class=\"n\">trip_id</span>                 <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n<span class=\"n\">vendor_id</span>               <span class=\"n\">String</span><span class=\"p\">,</span>\n<span class=\"n\">pickup_datetime</span>         <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n<span class=\"n\">dropoff_datetime</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">DateTime</span><span class=\"p\">),</span>\n<span class=\"n\">store_and_fwd_flag</span>      <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)),</span>\n<span class=\"n\">rate_code_id</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_longitude</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_latitude</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_longitude</span>       <span class=\"k\">Nullable</span><span class=\"p\">");
            
            document.write("(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_latitude</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">passenger_count</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">trip_distance</span>           <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float64</span><span class=\"p\">),</span>\n<span class=\"n\">fare_amount</span>             <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">extra</span>                   <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">mta_tax</span>                 <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">tip_amount</span>              <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">tolls_amount</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">ehail_fee</span>               <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">improvement_surcharge</span>   <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">total_amount</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n<span class=\"n\">payment_type</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">trip_type</span>               <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup</span>                  <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff</span>                 <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">cab_type</span>                <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">precipitation</span>           <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">snow_depth</span>              <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">snowfall</span>                <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">max_temperature</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">min_temperature</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">average_wind_speed</span>      <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_nyct2010_gid</span>     <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_ctlabel</span>          <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_borocode</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_boroname</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_ct2010</span>           <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_boroct2010</span>       <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_cdeligibil</span>       <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)),</span>\n<span class=\"n\">pickup_ntacode</span>          <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_ntaname</span>          <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">pickup_puma</span>             <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_nyct2010_gid</span>    <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_ctlabel</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_borocode</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_boroname</span>        <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_ct2010</span>          <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_boroct2010</span>      <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_cdeligibil</span>      <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_ntacode</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_ntaname</span>         <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n<span class=\"n\">dropoff_puma</span>            <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>It is needed for converting fields to more correct data types and, if possible, to eliminate NULLs.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">time</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO trips FORMAT TabSeparated&quot;</span> &lt; trips.tsv\n\nreal    75m56.214s\n</code></pre></div>\n\n\n<p>Data is read at a speed of 112-140 Mb/second.<br />\nLoading data into a Log type table in one stream took 76 minutes.<br />\nThe data in this table uses 142 GB.</p>\n<p>(Importing data directly from Postgres is also possible using <code>COPY ... TO PROGRAM</code>.)</p>\n<p>Unfortunately, all the fields associated with the weather (precipitation...average_wind_speed) were filled with NULL. Because of this, we will remove them from the final data set.</p>\n<p>To start, we'll create a table on a single server. Later we will make the table distributed.</p>\n<p>Create and populate a summary table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">trips_mergetree</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">pickup_date</span><span class=\"p\">,</span> <span class=\"n\">pickup_datetime</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n<span class=\"k\">AS</span> <span class=\"k\">SELECT</span>\n\n<span class=\"n\">trip_id</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">vendor_id</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;1&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CMT&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;VTS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DDS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02512&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02598&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">11</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02617&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02682&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">13</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02764&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">14</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">vendor_id</span><span class=\"p\">,</span>\n<span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">pickup_datetime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_date</span><span class=\"p\">,</span>\n<span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_datetime</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup");
            
            document.write("_datetime</span><span class=\"p\">,</span>\n<span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">dropoff_datetime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_date</span><span class=\"p\">,</span>\n<span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_datetime</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_datetime</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">store_and_fwd_flag</span><span class=\"p\">)</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Y&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;1&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">store_and_fwd_flag</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">rate_code_id</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">rate_code_id</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_longitude</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_longitude</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_latitude</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_latitude</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_longitude</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_longitude</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_latitude</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_latitude</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">passenger_count</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">trip_distance</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">trip_distance</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">fare_amount</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">fare_amount</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">extra</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">extra</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">mta_tax</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">mta_tax</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">tip_amount</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">tip_amount</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">tolls_amount</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">tolls_amount</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">ehail_fee</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">ehail_fee</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">improvement_surcharge</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">improvement_surcharge</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">total_amount</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">total_amount</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">((</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">payment_type</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pt</span><span class=\"p\">)</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;CSH&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CASH&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Cash&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CAS&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Cas&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;1&#39;</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;CSH&#39;</span> <span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"n\">pt</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;CRD&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Credit&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Cre&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CRE&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CREDIT&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2&#39;</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;CRE&#39;</span> <span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"n\">pt</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;NOC&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;No Charge&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;No&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;3&#39;</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;NOC&#39;</span> <span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"n\">pt</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;DIS&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Dispute&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Dis&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;4&#39;</span><span class=\"p\">)</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;DIS&#39;</span> <span class=\"p\">:</span> <span class=\"s1\">&#39;UNK&#39;</span><span class=\"p\">)))</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;CSH&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CRE&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;UNK&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;NOC&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DIS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">payment_type_</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">trip_type</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">trip_type</span><span class=\"p\">,</span>\n<span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">pickup</span><span class=\"p\">),</span> <span class=\"mi\">25</span><span class=\"p\">),</span> <span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">,</span> <span class=\"mi\">25</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup</span><span class=\"p\">,</span>\n<span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">dropoff</span><span class=\"p\">),</span> <span class=\"mi\">25</span><span class=\"p\">),</span> <span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">,</span> <span class=\"mi\">25</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">cab_type</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;yellow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;green&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;uber&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">cab_type</span><span class=\"p\">,</span>\n\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_nyct2010_gid</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_nyct2010_gid</span><span class=\"p\">,</span>\n<span class=\"n\">toFloat32</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_ctlabel</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_ctlabel</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_borocode</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_borocode</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_boroname</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\"");
            
            document.write(">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_boroname</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_ct2010</span><span class=\"p\">,</span> <span class=\"s1\">&#39;000000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">6</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_ct2010</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_boroct2010</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0000000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">7</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_boroct2010</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_cdeligibil</span><span class=\"p\">,</span> <span class=\"s1\">&#39; &#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39; &#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;E&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;I&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_cdeligibil</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_ntacode</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_ntacode</span><span class=\"p\">,</span>\n\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">pickup_ntaname</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum16</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Airport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Allerton-Pelham Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Annadale-Huguenot-Prince\\&#39;</span><span class=\"n\">s</span> <span class=\"n\">Bay</span><span class=\"o\">-</span><span class=\"n\">Eltingville</span><span class=\"s1\">&#39; = 3, &#39;</span><span class=\"n\">Arden</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 4, &#39;</span><span class=\"n\">Astoria</span><span class=\"s1\">&#39; = 5, &#39;</span><span class=\"n\">Auburndale</span><span class=\"s1\">&#39; = 6, &#39;</span><span class=\"n\">Baisley</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 7, &#39;</span><span class=\"n\">Bath</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 8, &#39;</span><span class=\"n\">Battery</span> <span class=\"n\">Park</span> <span class=\"n\">City</span><span class=\"o\">-</span><span class=\"k\">Lower</span> <span class=\"n\">Manhattan</span><span class=\"s1\">&#39; = 9, &#39;</span><span class=\"n\">Bay</span> <span class=\"n\">Ridge</span><span class=\"s1\">&#39; = 10, &#39;</span><span class=\"n\">Bayside</span><span class=\"o\">-</span><span class=\"n\">Bayside</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 11, &#39;</span><span class=\"n\">Bedford</span><span class=\"s1\">&#39; = 12, &#39;</span><span class=\"n\">Bedford</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Fordham</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 13, &#39;</span><span class=\"n\">Bellerose</span><span class=\"s1\">&#39; = 14, &#39;</span><span class=\"n\">Belmont</span><span class=\"s1\">&#39; = 15, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 16, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">West</span><span class=\"s1\">&#39; = 17, &#39;</span><span class=\"n\">Borough</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 18, &#39;</span><span class=\"n\">Breezy</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Belle</span> <span class=\"n\">Harbor</span><span class=\"o\">-</span><span class=\"n\">Rockaway</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Broad</span> <span class=\"n\">Channel</span><span class=\"s1\">&#39; = 19, &#39;</span><span class=\"n\">Briarwood</span><span class=\"o\">-</span><span class=\"n\">Jamaica</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 20, &#39;</span><span class=\"n\">Brighton</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 21, &#39;</span><span class=\"n\">Bronxdale</span><span class=\"s1\">&#39; = 22, &#39;</span><span class=\"n\">Brooklyn</span> <span class=\"n\">Heights</span><span class=\"o\">-</span><span class=\"n\">Cobble</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 23, &#39;</span><span class=\"n\">Brownsville</span><span class=\"s1\">&#39; = 24, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 25, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 26, &#39;</span><span class=\"n\">Cambria</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 27, &#39;</span><span class=\"n\">Canarsie</span><span class=\"s1\">&#39; = 28, &#39;</span><span class=\"n\">Carroll</span> <span class=\"n\">Gardens</span><span class=\"o\">-</span><span class=\"n\">Columbia</span> <span class=\"n\">Street</span><span class=\"o\">-</span><span class=\"n\">Red</span> <span class=\"n\">Hook</span><span class=\"s1\">&#39; = 29, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"o\">-</span><span class=\"n\">Polo</span> <span class=\"n\">Grounds</span><span class=\"s1\">&#39; = 30, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 31, &#39;</span><span class=\"n\">Charleston</span><span class=\"o\">-</span><span class=\"n\">Richmond</span> <span class=\"n\">Valley</span><span class=\"o\">-</span><span class=\"n\">Tottenville</span><span class=\"s1\">&#39; = 32, &#39;</span><span class=\"n\">Chinatown</span><span class=\"s1\">&#39; = 33, &#39;</span><span class=\"n\">Claremont</span><span class=\"o\">-</span><span class=\"n\">Bathgate</span><span class=\"s1\">&#39; = 34, &#39;</span><span class=\"n\">Clinton</span><span class=\"s1\">&#39; = 35, &#39;</span><span class=\"n\">Clinton</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 36, &#39;</span><span class=\"n\">Co</span><span class=\"o\">-</span><span class=\"n\">op</span> <span class=\"n\">City</span><span class=\"s1\">&#39; = 37, &#39;</span><span class=\"n\">College</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 38, &#39;</span><span class=\"n\">Corona</span><span class=\"s1\">&#39; = 39, &#39;</span><span class=\"n\">Crotona</span> <span class=\"n\">Park</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 40, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 41, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 42, &#39;</span><span class=\"n\">Cypress</span> <span class=\"n\">Hills</span><span class=\"o\">-</span><span class=\"n\">City</span> <span class=\"n\">Line</span><span class=\"s1\">&#39; = 43, &#39;</span><span class=\"n\">DUMBO</span><span class=\"o\">-</span><span class=\"n\">Vinegar</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Downtown</span> <span class=\"n\">Brooklyn</span><span class=\"o\">-</span><span class=\"n\">Boerum</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 44, &#39;</span><span class=\"n\">Douglas</span> <span class=\"n\">Manor</span><span class=\"o\">-</span><span class=\"n\">Douglaston</span><span class=\"o\">-</span><span class=\"n\">Little</span> <span class=\"n\">Neck</span><span class=\"s1\">&#39; = 45, &#39;</span><span class=\"n\">Dyker</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 46, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Concourse</span><span class=\"o\">-</span><span class=\"n\">Concourse</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 47, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 48, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flatbush</span><span class=\"o\">-</span><span class=\"n\">Farragut</span><span class=\"s1\">&#39; = 49, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 50, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 51, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 52, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span><span class=\"s1\">&#39; = 53, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span> <span class=\"p\">(</span><span class=\"n\">Pennsylvania</span> <span class=\"n\">Ave</span><span class=\"p\">)</span><span class=\"s1\">&#39; = 54, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Tremont</span><span class=\"s1\">&#39; = 55, &#39;</span><sp");
            
            document.write("an class=\"n\">East</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 56, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Williamsburg</span><span class=\"s1\">&#39; = 57, &#39;</span><span class=\"n\">Eastchester</span><span class=\"o\">-</span><span class=\"n\">Edenwald</span><span class=\"o\">-</span><span class=\"n\">Baychester</span><span class=\"s1\">&#39; = 58, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 59, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"o\">-</span><span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 60, &#39;</span><span class=\"n\">Erasmus</span><span class=\"s1\">&#39; = 61, &#39;</span><span class=\"n\">Far</span> <span class=\"n\">Rockaway</span><span class=\"o\">-</span><span class=\"n\">Bayswater</span><span class=\"s1\">&#39; = 62, &#39;</span><span class=\"n\">Flatbush</span><span class=\"s1\">&#39; = 63, &#39;</span><span class=\"n\">Flatlands</span><span class=\"s1\">&#39; = 64, &#39;</span><span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 65, &#39;</span><span class=\"n\">Fordham</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 66, &#39;</span><span class=\"n\">Forest</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 67, &#39;</span><span class=\"n\">Fort</span> <span class=\"n\">Greene</span><span class=\"s1\">&#39; = 68, &#39;</span><span class=\"n\">Fresh</span> <span class=\"n\">Meadows</span><span class=\"o\">-</span><span class=\"n\">Utopia</span><span class=\"s1\">&#39; = 69, &#39;</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Totten</span><span class=\"o\">-</span><span class=\"n\">Bay</span> <span class=\"n\">Terrace</span><span class=\"o\">-</span><span class=\"n\">Clearview</span><span class=\"s1\">&#39; = 70, &#39;</span><span class=\"n\">Georgetown</span><span class=\"o\">-</span><span class=\"n\">Marine</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Bergen</span> <span class=\"n\">Beach</span><span class=\"o\">-</span><span class=\"n\">Mill</span> <span class=\"n\">Basin</span><span class=\"s1\">&#39; = 71, &#39;</span><span class=\"n\">Glen</span> <span class=\"n\">Oaks</span><span class=\"o\">-</span><span class=\"n\">Floral</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"k\">New</span> <span class=\"n\">Hyde</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 72, &#39;</span><span class=\"n\">Glendale</span><span class=\"s1\">&#39; = 73, &#39;</span><span class=\"n\">Gramercy</span><span class=\"s1\">&#39; = 74, &#39;</span><span class=\"n\">Grasmere</span><span class=\"o\">-</span><span class=\"n\">Arrochar</span><span class=\"o\">-</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Wadsworth</span><span class=\"s1\">&#39; = 75, &#39;</span><span class=\"n\">Gravesend</span><span class=\"s1\">&#39; = 76, &#39;</span><span class=\"n\">Great</span> <span class=\"n\">Kills</span><span class=\"s1\">&#39; = 77, &#39;</span><span class=\"n\">Greenpoint</span><span class=\"s1\">&#39; = 78, &#39;</span><span class=\"n\">Grymes</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Clifton</span><span class=\"o\">-</span><span class=\"n\">Fox</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 79, &#39;</span><span class=\"n\">Hamilton</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 80, &#39;</span><span class=\"n\">Hammels</span><span class=\"o\">-</span><span class=\"n\">Arverne</span><span class=\"o\">-</span><span class=\"n\">Edgemere</span><span class=\"s1\">&#39; = 81, &#39;</span><span class=\"n\">Highbridge</span><span class=\"s1\">&#39; = 82, &#39;</span><span class=\"n\">Hollis</span><span class=\"s1\">&#39; = 83, &#39;</span><span class=\"n\">Homecrest</span><span class=\"s1\">&#39; = 84, &#39;</span><span class=\"n\">Hudson</span> <span class=\"n\">Yards</span><span class=\"o\">-</span><span class=\"n\">Chelsea</span><span class=\"o\">-</span><span class=\"n\">Flatiron</span><span class=\"o\">-</span><span class=\"k\">Union</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 85, &#39;</span><span class=\"n\">Hunters</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Sunnyside</span><span class=\"o\">-</span><span class=\"n\">West</span> <span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 86, &#39;</span><span class=\"n\">Hunts</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 87, &#39;</span><span class=\"n\">Jackson</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 88, &#39;</span><span class=\"n\">Jamaica</span><span class=\"s1\">&#39; = 89, &#39;</span><span class=\"n\">Jamaica</span> <span class=\"n\">Estates</span><span class=\"o\">-</span><span class=\"n\">Holliswood</span><span class=\"s1\">&#39; = 90, &#39;</span><span class=\"n\">Kensington</span><span class=\"o\">-</span><span class=\"n\">Ocean</span> <span class=\"n\">Parkway</span><span class=\"s1\">&#39; = 91, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span><span class=\"s1\">&#39; = 92, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 93, &#39;</span><span class=\"n\">Kingsbridge</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 94, &#39;</span><span class=\"n\">Laurelton</span><span class=\"s1\">&#39; = 95, &#39;</span><span class=\"n\">Lenox</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Roosevelt</span> <span class=\"n\">Island</span><span class=\"s1\">&#39; = 96, &#39;</span><span class=\"n\">Lincoln</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 97, &#39;</span><span class=\"n\">Lindenwood</span><span class=\"o\">-</span><span class=\"n\">Howard</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 98, &#39;</span><span class=\"n\">Longwood</span><span class=\"s1\">&#39; = 99, &#39;</span><span class=\"k\">Lower</span> <span class=\"n\">East</span> <span class=\"n\">Side</span><span class=\"s1\">&#39; = 100, &#39;</span><span class=\"n\">Madison</span><span class=\"s1\">&#39; = 101, &#39;</span><span class=\"n\">Manhattanville</span><span class=\"s1\">&#39; = 102, &#39;</span><span class=\"n\">Marble</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Inwood</span><span class=\"s1\">&#39; = 103, &#39;</span><span class=\"n\">Mariner</span><span class=\"err\">\\</span><span class=\"s1\">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Maspeth&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Melrose South-Mott Haven North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Middle Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">107</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midtown-Midtown South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">108</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morningside Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">110</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morrisania-Melrose&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">111</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mott Haven-Port Morris&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mount Hope&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">113</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill-Kips Bay&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">115</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Brighton-Silver Lake&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Dorp-Midland Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">117</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">118</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Corona&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Side-South Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">121</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Norwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">122</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakland Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakwood-Oakwood Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">124</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">125</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Parkway South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">126</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Astoria&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">127</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">129</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Park Slope-Gowanus&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">130</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Parkchester&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">131</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">132</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Parkway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">133</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class=\"o\">=</span> <span clas");
            
            document.write("s=\"mi\">134</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Port Richmond&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">135</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">136</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">137</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">138</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensboro Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">139</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rego Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">141</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Richmond Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ridgewood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">143</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rikers Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rosedale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">145</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rossville-Woodrow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rugby-Remsen Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">147</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">148</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Seagate-Coney Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">149</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">150</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">151</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Bruckner&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">152</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">153</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Jamaica&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">154</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">155</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">156</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens South-Brookville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">157</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">158</span><span class=\"p\">,</span> <span class=\"s1\">&#39;St. Albans&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">159</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stapleton-Rosebank&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">160</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Starrett City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">161</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Steinway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">163</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">164</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park East&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park West&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">166</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">167</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Turtle Bay-East Midtown&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">168</span><span class=\"p\">,</span> <span class=\"s1\">&#39;University Heights-Morris Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">170</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper West Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">171</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Cortlandt Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">172</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">173</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">174</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">175</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Brighton&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">176</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Concourse&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">177</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Farms-Bronx River&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">178</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">179</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">180</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westchester-Unionport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">181</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westerleigh&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">182</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Whitestone&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">183</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsbridge-Olinville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">184</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsburg&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Windsor Terrace&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">186</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodhaven&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">187</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodlawn-Wakefield&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">188</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodside&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">189</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Yorkville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">191</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">192</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">193</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">194</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">195</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_ntaname</span><span class=\"p\">,</span>\n\n<span class=\"n\">toUInt16</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">pickup_puma</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">pickup_puma</span><span class=\"p\">,</span>\n\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_nyct2010_gid</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_nyct2010_gid</span><span class=\"p\">,</span>\n<span class=\"n\">toFloat32</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_ctlabel</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_ctlabel</span><span class=\"p\">,</span>\n<span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_borocode</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_borocode</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_boroname</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Staten Island&#39;</span> <span class=\"o\">=");
            
            document.write("</span> <span class=\"mi\">5</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_boroname</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_ct2010</span><span class=\"p\">,</span> <span class=\"s1\">&#39;000000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">6</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_ct2010</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_boroct2010</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0000000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">7</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_boroct2010</span><span class=\"p\">,</span>\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_cdeligibil</span><span class=\"p\">,</span> <span class=\"s1\">&#39; &#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39; &#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;E&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;I&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_cdeligibil</span><span class=\"p\">,</span>\n<span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_ntacode</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0000&#39;</span><span class=\"p\">),</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_ntacode</span><span class=\"p\">,</span>\n\n<span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_ntaname</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Enum16</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Airport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Allerton-Pelham Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Annadale-Huguenot-Prince\\&#39;</span><span class=\"n\">s</span> <span class=\"n\">Bay</span><span class=\"o\">-</span><span class=\"n\">Eltingville</span><span class=\"s1\">&#39; = 3, &#39;</span><span class=\"n\">Arden</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 4, &#39;</span><span class=\"n\">Astoria</span><span class=\"s1\">&#39; = 5, &#39;</span><span class=\"n\">Auburndale</span><span class=\"s1\">&#39; = 6, &#39;</span><span class=\"n\">Baisley</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 7, &#39;</span><span class=\"n\">Bath</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 8, &#39;</span><span class=\"n\">Battery</span> <span class=\"n\">Park</span> <span class=\"n\">City</span><span class=\"o\">-</span><span class=\"k\">Lower</span> <span class=\"n\">Manhattan</span><span class=\"s1\">&#39; = 9, &#39;</span><span class=\"n\">Bay</span> <span class=\"n\">Ridge</span><span class=\"s1\">&#39; = 10, &#39;</span><span class=\"n\">Bayside</span><span class=\"o\">-</span><span class=\"n\">Bayside</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 11, &#39;</span><span class=\"n\">Bedford</span><span class=\"s1\">&#39; = 12, &#39;</span><span class=\"n\">Bedford</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Fordham</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 13, &#39;</span><span class=\"n\">Bellerose</span><span class=\"s1\">&#39; = 14, &#39;</span><span class=\"n\">Belmont</span><span class=\"s1\">&#39; = 15, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 16, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">West</span><span class=\"s1\">&#39; = 17, &#39;</span><span class=\"n\">Borough</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 18, &#39;</span><span class=\"n\">Breezy</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Belle</span> <span class=\"n\">Harbor</span><span class=\"o\">-</span><span class=\"n\">Rockaway</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Broad</span> <span class=\"n\">Channel</span><span class=\"s1\">&#39; = 19, &#39;</span><span class=\"n\">Briarwood</span><span class=\"o\">-</span><span class=\"n\">Jamaica</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 20, &#39;</span><span class=\"n\">Brighton</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 21, &#39;</span><span class=\"n\">Bronxdale</span><span class=\"s1\">&#39; = 22, &#39;</span><span class=\"n\">Brooklyn</span> <span class=\"n\">Heights</span><span class=\"o\">-</span><span class=\"n\">Cobble</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 23, &#39;</span><span class=\"n\">Brownsville</span><span class=\"s1\">&#39; = 24, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 25, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 26, &#39;</span><span class=\"n\">Cambria</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 27, &#39;</span><span class=\"n\">Canarsie</span><span class=\"s1\">&#39; = 28, &#39;</span><span class=\"n\">Carroll</span> <span class=\"n\">Gardens</span><span class=\"o\">-</span><span class=\"n\">Columbia</span> <span class=\"n\">Street</span><span class=\"o\">-</span><span class=\"n\">Red</span> <span class=\"n\">Hook</span><span class=\"s1\">&#39; = 29, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"o\">-</span><span class=\"n\">Polo</span> <span class=\"n\">Grounds</span><span class=\"s1\">&#39; = 30, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 31, &#39;</span><span class=\"n\">Charleston</span><span class=\"o\">-</span><span class=\"n\">Richmond</span> <span class=\"n\">Valley</span><span class=\"o\">-</span><span class=\"n\">Tottenville</span><span class=\"s1\">&#39; = 32, &#39;</span><span class=\"n\">Chinatown</span><span class=\"s1\">&#39; = 33, &#39;</span><span class=\"n\">Claremont</span><span class=\"o\">-</span><span class=\"n\">Bathgate</span><span class=\"s1\">&#39; = 34, &#39;</span><span class=\"n\">Clinton</span><span class=\"s1\">&#39; = 35, &#39;</span><span class=\"n\">Clinton</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 36, &#39;</span><span class=\"n\">Co</span><span class=\"o\">-</span><span class=\"n\">op</span> <span class=\"n\">City</span><span class=\"s1\">&#39; = 37, &#39;</span><span class=\"n\">College</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 38, &#39;</span><span class=\"n\">Corona</span><span class=\"s1\">&#39; = 39, &#39;</span><span class=\"n\">Crotona</span> <span class=\"n\">Park</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 40, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 41, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 42, &#39;</span><span class=\"n\">Cypress</span> <span class=\"n\">Hills</span><span class=\"o\">-</span><span class=\"n\">City</span> <span class=\"n\">Line</span><span class=\"s1\">&#39; = 43, &#39;</span><span class=\"n\">DUMBO</span><span class=\"o\">-</span><span class=\"n\">Vinegar</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Downtown</span> <span class=\"n\">Brooklyn</span><span class=\"o\">-</span><span class=\"n\">Boerum</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 44, &#39;</span><span class=\"n\">Douglas</span> <span class=\"n\">Manor</span><span class=\"o\">-</span><span class=\"n\">Douglaston</span><span class=\"o\">-</span><span class=\"n\">Little</span> <span class=\"n\">Neck</span><span class=\"s1\">&#39; = 45, &#39;</span><span class=\"n\">Dyker</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 46, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Concourse</span><span class=\"o\">-</span><span class=\"n\">Concourse</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 47, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 48, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flatbush</span><span class=\"o\">-</span><span class=\"n\">Farragut</span><span class=\"s1\">&#39; = 49, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 50, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 51, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 52, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span><span class=\"s1\">&#39; = 53, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span> <span class=\"p\">(</span><span class=\"n\">Pennsylvania</span> <span class=\"n\">Ave</span><span class=\"p\">)</span><span class=\"s1\">&#39; = 54, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Tremont</span><span class=\"s1\">&#39; = 55, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 56, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Williamsburg</span><span class=\"s1\">&#39; = 57, &#39;</span><span class=\"n\">Eastchester</span><span class=\"o\">-</span><span class=\"n\">Edenwald</span><span class=\"o\">-</span><span class=\"n\">Baychester</span><span class=\"s1\">&#39; = 58, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"s");
            
            document.write("1\">&#39; = 59, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"o\">-</span><span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 60, &#39;</span><span class=\"n\">Erasmus</span><span class=\"s1\">&#39; = 61, &#39;</span><span class=\"n\">Far</span> <span class=\"n\">Rockaway</span><span class=\"o\">-</span><span class=\"n\">Bayswater</span><span class=\"s1\">&#39; = 62, &#39;</span><span class=\"n\">Flatbush</span><span class=\"s1\">&#39; = 63, &#39;</span><span class=\"n\">Flatlands</span><span class=\"s1\">&#39; = 64, &#39;</span><span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 65, &#39;</span><span class=\"n\">Fordham</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 66, &#39;</span><span class=\"n\">Forest</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 67, &#39;</span><span class=\"n\">Fort</span> <span class=\"n\">Greene</span><span class=\"s1\">&#39; = 68, &#39;</span><span class=\"n\">Fresh</span> <span class=\"n\">Meadows</span><span class=\"o\">-</span><span class=\"n\">Utopia</span><span class=\"s1\">&#39; = 69, &#39;</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Totten</span><span class=\"o\">-</span><span class=\"n\">Bay</span> <span class=\"n\">Terrace</span><span class=\"o\">-</span><span class=\"n\">Clearview</span><span class=\"s1\">&#39; = 70, &#39;</span><span class=\"n\">Georgetown</span><span class=\"o\">-</span><span class=\"n\">Marine</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Bergen</span> <span class=\"n\">Beach</span><span class=\"o\">-</span><span class=\"n\">Mill</span> <span class=\"n\">Basin</span><span class=\"s1\">&#39; = 71, &#39;</span><span class=\"n\">Glen</span> <span class=\"n\">Oaks</span><span class=\"o\">-</span><span class=\"n\">Floral</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"k\">New</span> <span class=\"n\">Hyde</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 72, &#39;</span><span class=\"n\">Glendale</span><span class=\"s1\">&#39; = 73, &#39;</span><span class=\"n\">Gramercy</span><span class=\"s1\">&#39; = 74, &#39;</span><span class=\"n\">Grasmere</span><span class=\"o\">-</span><span class=\"n\">Arrochar</span><span class=\"o\">-</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Wadsworth</span><span class=\"s1\">&#39; = 75, &#39;</span><span class=\"n\">Gravesend</span><span class=\"s1\">&#39; = 76, &#39;</span><span class=\"n\">Great</span> <span class=\"n\">Kills</span><span class=\"s1\">&#39; = 77, &#39;</span><span class=\"n\">Greenpoint</span><span class=\"s1\">&#39; = 78, &#39;</span><span class=\"n\">Grymes</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Clifton</span><span class=\"o\">-</span><span class=\"n\">Fox</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 79, &#39;</span><span class=\"n\">Hamilton</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 80, &#39;</span><span class=\"n\">Hammels</span><span class=\"o\">-</span><span class=\"n\">Arverne</span><span class=\"o\">-</span><span class=\"n\">Edgemere</span><span class=\"s1\">&#39; = 81, &#39;</span><span class=\"n\">Highbridge</span><span class=\"s1\">&#39; = 82, &#39;</span><span class=\"n\">Hollis</span><span class=\"s1\">&#39; = 83, &#39;</span><span class=\"n\">Homecrest</span><span class=\"s1\">&#39; = 84, &#39;</span><span class=\"n\">Hudson</span> <span class=\"n\">Yards</span><span class=\"o\">-</span><span class=\"n\">Chelsea</span><span class=\"o\">-</span><span class=\"n\">Flatiron</span><span class=\"o\">-</span><span class=\"k\">Union</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 85, &#39;</span><span class=\"n\">Hunters</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Sunnyside</span><span class=\"o\">-</span><span class=\"n\">West</span> <span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 86, &#39;</span><span class=\"n\">Hunts</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 87, &#39;</span><span class=\"n\">Jackson</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 88, &#39;</span><span class=\"n\">Jamaica</span><span class=\"s1\">&#39; = 89, &#39;</span><span class=\"n\">Jamaica</span> <span class=\"n\">Estates</span><span class=\"o\">-</span><span class=\"n\">Holliswood</span><span class=\"s1\">&#39; = 90, &#39;</span><span class=\"n\">Kensington</span><span class=\"o\">-</span><span class=\"n\">Ocean</span> <span class=\"n\">Parkway</span><span class=\"s1\">&#39; = 91, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span><span class=\"s1\">&#39; = 92, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 93, &#39;</span><span class=\"n\">Kingsbridge</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 94, &#39;</span><span class=\"n\">Laurelton</span><span class=\"s1\">&#39; = 95, &#39;</span><span class=\"n\">Lenox</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Roosevelt</span> <span class=\"n\">Island</span><span class=\"s1\">&#39; = 96, &#39;</span><span class=\"n\">Lincoln</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 97, &#39;</span><span class=\"n\">Lindenwood</span><span class=\"o\">-</span><span class=\"n\">Howard</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 98, &#39;</span><span class=\"n\">Longwood</span><span class=\"s1\">&#39; = 99, &#39;</span><span class=\"k\">Lower</span> <span class=\"n\">East</span> <span class=\"n\">Side</span><span class=\"s1\">&#39; = 100, &#39;</span><span class=\"n\">Madison</span><span class=\"s1\">&#39; = 101, &#39;</span><span class=\"n\">Manhattanville</span><span class=\"s1\">&#39; = 102, &#39;</span><span class=\"n\">Marble</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Inwood</span><span class=\"s1\">&#39; = 103, &#39;</span><span class=\"n\">Mariner</span><span class=\"err\">\\</span><span class=\"s1\">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Maspeth&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Melrose South-Mott Haven North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Middle Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">107</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midtown-Midtown South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">108</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morningside Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">110</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morrisania-Melrose&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">111</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mott Haven-Port Morris&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mount Hope&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">113</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill-Kips Bay&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">115</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Brighton-Silver Lake&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Dorp-Midland Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">117</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">118</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Corona&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Side-South Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">121</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Norwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">122</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakland Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakwood-Oakwood Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">124</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">125</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Parkway South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">126</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Astoria&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">127</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">129</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Park Slope-Gowanus&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">130</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Parkchester&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">131</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">132</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Parkway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">133</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">134</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Port Richmond&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">135</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">136</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">137</span><span class=\"p\">,");
            
            document.write("</span> <span class=\"s1\">&#39;Queens Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">138</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensboro Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">139</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rego Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">141</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Richmond Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ridgewood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">143</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rikers Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rosedale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">145</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rossville-Woodrow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rugby-Remsen Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">147</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">148</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Seagate-Coney Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">149</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">150</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">151</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Bruckner&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">152</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">153</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Jamaica&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">154</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">155</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">156</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens South-Brookville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">157</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">158</span><span class=\"p\">,</span> <span class=\"s1\">&#39;St. Albans&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">159</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stapleton-Rosebank&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">160</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Starrett City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">161</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Steinway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">163</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">164</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park East&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park West&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">166</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">167</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Turtle Bay-East Midtown&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">168</span><span class=\"p\">,</span> <span class=\"s1\">&#39;University Heights-Morris Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">170</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper West Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">171</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Cortlandt Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">172</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">173</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">174</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">175</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Brighton&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">176</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Concourse&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">177</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Farms-Bronx River&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">178</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">179</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">180</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westchester-Unionport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">181</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westerleigh&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">182</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Whitestone&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">183</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsbridge-Olinville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">184</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsburg&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Windsor Terrace&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">186</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodhaven&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">187</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodlawn-Wakefield&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">188</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodside&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">189</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Yorkville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">191</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">192</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">193</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">194</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">195</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_ntaname</span><span class=\"p\">,</span>\n\n<span class=\"n\">toUInt16</span><span class=\"p\">(</span><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">dropoff_puma</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">dropoff_puma</span>\n\n<span class=\"k\">FROM</span> <span class=\"n\">trips</span>\n</code></pre></div>\n\n\n<p>This takes 3030 seconds at a speed of about 428,000 rows per second.<br />\nTo load it faster, you can create the table with the <code>Log</code> engine instead of <code>MergeTree</code>. In this case, the download works faster than 200 seconds.</p>\n<p>The table uses 126 GB of disk space.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">formatReadableSize</span><span class=\"p\">(</span><span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">bytes</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">parts</span> <span class=\"k\">WHERE</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;trips_mergetree&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">active</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500formatReadableSize(sum(bytes))\u2500\u2510\n\u2502 126.18 GiB                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Among other things, you can run the OPTIMIZE query on MergeTree. But it's not required, since everything will be fine without it.</p>\n<h3 id=\"download-of-prepared-partitions_1\">Download of Prepared Partitions<a class=\"headerlink\" href=\"#download-of-prepared-partitions_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -O https://clickhouse-datasets.s3.yandex.net/trips_mergetree/partitions/trips_mergetree.tar\n$ tar xvf trips_mergetree.tar -C /var/lib/clickhouse <span class=\"c1\"># path to ClickHouse data directory</span>\n$ <span class=\"c1\"># check permissions of unpacked data, fix if required</span>\n$ sudo service clickhouse-server restart\n$ clickhouse-client --query <span class=\"s2\">&quot;select count(*) from datasets.trips_mergetree&quot;</span>\n</code></pre></div>\n\n\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Info</p>\n<p>If you will run queries described below, you have to use full table name,<br />\n<code>datas");
            
            document.write("ets.trips_mergetree</code>.</p>\n</div>\n<h3 id=\"results-on-single-server\">Results on Single Server<a class=\"headerlink\" href=\"#results-on-single-server\" title=\"Permanent link\">&para;</a></h3>\n<p>Q1:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">cab_type</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">cab_type</span>\n</code></pre></div>\n\n\n<p>0.490 seconds.</p>\n<p>Q2:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">total_amount</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">passenger_count</span>\n</code></pre></div>\n\n\n<p>1.224 seconds.</p>\n<p>Q3:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">pickup_date</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"k\">year</span>\n</code></pre></div>\n\n\n<p>2.104 seconds.</p>\n<p>Q4:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">pickup_date</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">round</span><span class=\"p\">(</span><span class=\"n\">trip_distance</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">distance</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">passenger_count</span><span class=\"p\">,</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">distance</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span> <span class=\"k\">DESC</span>\n</code></pre></div>\n\n\n<p>3.593 seconds.</p>\n<p>The following server was used:</p>\n<p>Two Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz, 16 physical kernels total,128 GiB RAM,8x6 TB HD on hardware RAID-5</p>\n<p>Execution time is the best of three runsBut starting from the second run, queries read data from the file system cache. No further caching occurs: the data is read out and processed in each run.</p>\n<p>Creating a table on three servers:</p>\n<p>On each server:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">default</span><span class=\"p\">.</span><span class=\"n\">trips_mergetree_third</span> <span class=\"p\">(</span> <span class=\"n\">trip_id</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>  <span class=\"n\">vendor_id</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;1&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CMT&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;VTS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DDS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02512&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02598&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">11</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02617&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02682&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">13</span><span class=\"p\">,</span> <span class=\"s1\">&#39;B02764&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">14</span><span class=\"p\">),</span>  <span class=\"n\">pickup_date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>  <span class=\"n\">pickup_datetime</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>  <span class=\"n\">dropoff_date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>  <span class=\"n\">dropoff_datetime</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>  <span class=\"n\">store_and_fwd_flag</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>  <span class=\"n\">rate_code_id</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>  <span class=\"n\">pickup_longitude</span> <span class=\"n\">Float64</span><span class=\"p\">,</span>  <span class=\"n\">pickup_latitude</span> <span class=\"n\">Float64</span><span class=\"p\">,</span>  <span class=\"n\">dropoff_longitude</span> <span class=\"n\">Float64</span><span class=\"p\">,</span>  <span class=\"n\">dropoff_latitude</span> <span class=\"n\">Float64</span><span class=\"p\">,</span>  <span class=\"n\">passenger_count</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>  <span class=\"n\">trip_distance</span> <span class=\"n\">Float64</span><span class=\"p\">,</span>  <span class=\"n\">fare_amount</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">extra</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">mta_tax</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">tip_amount</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">tolls_amount</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">ehail_fee</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">improvement_surcharge</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">total_amount</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">payment_type_</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;UNK&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSH&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CRE&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;NOC&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DIS&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">),</span>  <span class=\"n\">trip_type</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>  <span class=\"n\">pickup</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">25</span><span class=\"p\">),</span>  <span class=\"n\">dropoff</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">25</span><span class=\"p\">),</span>  <span class=\"n\">cab_type</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;yellow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;green&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;uber&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">),</span>  <span class=\"n\">pickup_nyct2010_gid</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>  <span class=\"n\">pickup_ctlabel</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">pickup_borocode</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>  <span class=\"n\">pickup_boroname</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">),</span>  <span class=\"n\">pickup_ct2010</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span>  <span class=\"n\">pickup_boroct2010</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">),</span>  <span class=\"n\">pickup_cdeligibil</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39; &#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;E&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;I&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">),</span>  <span class=\"n\">pickup_ntacode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">),</span>  <span class");
            
            document.write("=\"n\">pickup_ntaname</span> <span class=\"n\">Enum16</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Airport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Allerton-Pelham Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Annadale-Huguenot-Prince\\&#39;</span><span class=\"n\">s</span> <span class=\"n\">Bay</span><span class=\"o\">-</span><span class=\"n\">Eltingville</span><span class=\"s1\">&#39; = 3, &#39;</span><span class=\"n\">Arden</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 4, &#39;</span><span class=\"n\">Astoria</span><span class=\"s1\">&#39; = 5, &#39;</span><span class=\"n\">Auburndale</span><span class=\"s1\">&#39; = 6, &#39;</span><span class=\"n\">Baisley</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 7, &#39;</span><span class=\"n\">Bath</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 8, &#39;</span><span class=\"n\">Battery</span> <span class=\"n\">Park</span> <span class=\"n\">City</span><span class=\"o\">-</span><span class=\"k\">Lower</span> <span class=\"n\">Manhattan</span><span class=\"s1\">&#39; = 9, &#39;</span><span class=\"n\">Bay</span> <span class=\"n\">Ridge</span><span class=\"s1\">&#39; = 10, &#39;</span><span class=\"n\">Bayside</span><span class=\"o\">-</span><span class=\"n\">Bayside</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 11, &#39;</span><span class=\"n\">Bedford</span><span class=\"s1\">&#39; = 12, &#39;</span><span class=\"n\">Bedford</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Fordham</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 13, &#39;</span><span class=\"n\">Bellerose</span><span class=\"s1\">&#39; = 14, &#39;</span><span class=\"n\">Belmont</span><span class=\"s1\">&#39; = 15, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 16, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">West</span><span class=\"s1\">&#39; = 17, &#39;</span><span class=\"n\">Borough</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 18, &#39;</span><span class=\"n\">Breezy</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Belle</span> <span class=\"n\">Harbor</span><span class=\"o\">-</span><span class=\"n\">Rockaway</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Broad</span> <span class=\"n\">Channel</span><span class=\"s1\">&#39; = 19, &#39;</span><span class=\"n\">Briarwood</span><span class=\"o\">-</span><span class=\"n\">Jamaica</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 20, &#39;</span><span class=\"n\">Brighton</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 21, &#39;</span><span class=\"n\">Bronxdale</span><span class=\"s1\">&#39; = 22, &#39;</span><span class=\"n\">Brooklyn</span> <span class=\"n\">Heights</span><span class=\"o\">-</span><span class=\"n\">Cobble</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 23, &#39;</span><span class=\"n\">Brownsville</span><span class=\"s1\">&#39; = 24, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 25, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 26, &#39;</span><span class=\"n\">Cambria</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 27, &#39;</span><span class=\"n\">Canarsie</span><span class=\"s1\">&#39; = 28, &#39;</span><span class=\"n\">Carroll</span> <span class=\"n\">Gardens</span><span class=\"o\">-</span><span class=\"n\">Columbia</span> <span class=\"n\">Street</span><span class=\"o\">-</span><span class=\"n\">Red</span> <span class=\"n\">Hook</span><span class=\"s1\">&#39; = 29, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"o\">-</span><span class=\"n\">Polo</span> <span class=\"n\">Grounds</span><span class=\"s1\">&#39; = 30, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 31, &#39;</span><span class=\"n\">Charleston</span><span class=\"o\">-</span><span class=\"n\">Richmond</span> <span class=\"n\">Valley</span><span class=\"o\">-</span><span class=\"n\">Tottenville</span><span class=\"s1\">&#39; = 32, &#39;</span><span class=\"n\">Chinatown</span><span class=\"s1\">&#39; = 33, &#39;</span><span class=\"n\">Claremont</span><span class=\"o\">-</span><span class=\"n\">Bathgate</span><span class=\"s1\">&#39; = 34, &#39;</span><span class=\"n\">Clinton</span><span class=\"s1\">&#39; = 35, &#39;</span><span class=\"n\">Clinton</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 36, &#39;</span><span class=\"n\">Co</span><span class=\"o\">-</span><span class=\"n\">op</span> <span class=\"n\">City</span><span class=\"s1\">&#39; = 37, &#39;</span><span class=\"n\">College</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 38, &#39;</span><span class=\"n\">Corona</span><span class=\"s1\">&#39; = 39, &#39;</span><span class=\"n\">Crotona</span> <span class=\"n\">Park</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 40, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 41, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 42, &#39;</span><span class=\"n\">Cypress</span> <span class=\"n\">Hills</span><span class=\"o\">-</span><span class=\"n\">City</span> <span class=\"n\">Line</span><span class=\"s1\">&#39; = 43, &#39;</span><span class=\"n\">DUMBO</span><span class=\"o\">-</span><span class=\"n\">Vinegar</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Downtown</span> <span class=\"n\">Brooklyn</span><span class=\"o\">-</span><span class=\"n\">Boerum</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 44, &#39;</span><span class=\"n\">Douglas</span> <span class=\"n\">Manor</span><span class=\"o\">-</span><span class=\"n\">Douglaston</span><span class=\"o\">-</span><span class=\"n\">Little</span> <span class=\"n\">Neck</span><span class=\"s1\">&#39; = 45, &#39;</span><span class=\"n\">Dyker</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 46, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Concourse</span><span class=\"o\">-</span><span class=\"n\">Concourse</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 47, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 48, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flatbush</span><span class=\"o\">-</span><span class=\"n\">Farragut</span><span class=\"s1\">&#39; = 49, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 50, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 51, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 52, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span><span class=\"s1\">&#39; = 53, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span> <span class=\"p\">(</span><span class=\"n\">Pennsylvania</span> <span class=\"n\">Ave</span><span class=\"p\">)</span><span class=\"s1\">&#39; = 54, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Tremont</span><span class=\"s1\">&#39; = 55, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 56, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Williamsburg</span><span class=\"s1\">&#39; = 57, &#39;</span><span class=\"n\">Eastchester</span><span class=\"o\">-</span><span class=\"n\">Edenwald</span><span class=\"o\">-</span><span class=\"n\">Baychester</span><span class=\"s1\">&#39; = 58, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 59, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"o\">-</span><span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 60, &#39;</span><span class=\"n\">Erasmus</span><span class=\"s1\">&#39; = 61, &#39;</span><span class=\"n\">Far</span> <span class=\"n\">Rockaway</span><span class=\"o\">-</span><span class=\"n\">Bayswater</span><span class=\"s1\">&#39; = 62, &#39;</span><span class=\"n\">Flatbush</span><span class=\"s1\">&#39; = 63, &#39;</span><span class=\"n\">Flatlands</span><span class=\"s1\">&#39; = 64, &#39;</span><span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 65, &#39;</span><span class=\"n\">Fordham</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 66, &#39;</span><span class=\"n\">Forest</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 67, &#39;</span><span class=\"n\">Fort</span> <span class=\"n\">Greene</span><span class=\"s1\">&#39; = 68, &#39;</span><span class=\"n\">Fresh</span> <span class=\"n\">Meadows</span><span class=\"o\">-</span><span class=\"n\">Utopia</span><span class=\"s1\">&#39; = 69, &#39;</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Totten</span><span class=\"o\">-</span><span class=\"n\">Bay</span> <span class=\"n\">Terrace</span><span class=\"o\">-</span><span class=\"n\">Clearview</span><span class=\"s1\">&#39; = 70, &#39;</span><span class=\"n\">Georgetown</span><span class=\"o\">-</span><span class=\"n\">Marine</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Bergen</span> <span class=\"n\">Beach</span><span class=\"o\">-</span><span class=\"n\">Mill</span> <span class=\"n\">Basin</span><span class=\"s1\">&#39; = 71, &#39;</span><span class=\"n\">Glen</span> <span class=\"n\">Oaks</span><span class=\"o\">-</span><span class=\"n\">Floral</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"k\">New</span> <span class=\"n\">Hyde</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 72, &#39;</span><span class=\"n\">Glendale</span><span class=\"s1\">&#39; = 73, &#39;</span><span class=\"n\">Gramercy</span><span class=\"s1\">&#39; = 74, &#39;</span><span class=\"n\">Grasmere</span><span class=\"o\">-</span><span class=\"n\">Arrochar</span><span class=\"o\">-</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Wadsworth</span><span class=\"s1\">&#39; = ");
            
            document.write("75, &#39;</span><span class=\"n\">Gravesend</span><span class=\"s1\">&#39; = 76, &#39;</span><span class=\"n\">Great</span> <span class=\"n\">Kills</span><span class=\"s1\">&#39; = 77, &#39;</span><span class=\"n\">Greenpoint</span><span class=\"s1\">&#39; = 78, &#39;</span><span class=\"n\">Grymes</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Clifton</span><span class=\"o\">-</span><span class=\"n\">Fox</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 79, &#39;</span><span class=\"n\">Hamilton</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 80, &#39;</span><span class=\"n\">Hammels</span><span class=\"o\">-</span><span class=\"n\">Arverne</span><span class=\"o\">-</span><span class=\"n\">Edgemere</span><span class=\"s1\">&#39; = 81, &#39;</span><span class=\"n\">Highbridge</span><span class=\"s1\">&#39; = 82, &#39;</span><span class=\"n\">Hollis</span><span class=\"s1\">&#39; = 83, &#39;</span><span class=\"n\">Homecrest</span><span class=\"s1\">&#39; = 84, &#39;</span><span class=\"n\">Hudson</span> <span class=\"n\">Yards</span><span class=\"o\">-</span><span class=\"n\">Chelsea</span><span class=\"o\">-</span><span class=\"n\">Flatiron</span><span class=\"o\">-</span><span class=\"k\">Union</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 85, &#39;</span><span class=\"n\">Hunters</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Sunnyside</span><span class=\"o\">-</span><span class=\"n\">West</span> <span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 86, &#39;</span><span class=\"n\">Hunts</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 87, &#39;</span><span class=\"n\">Jackson</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 88, &#39;</span><span class=\"n\">Jamaica</span><span class=\"s1\">&#39; = 89, &#39;</span><span class=\"n\">Jamaica</span> <span class=\"n\">Estates</span><span class=\"o\">-</span><span class=\"n\">Holliswood</span><span class=\"s1\">&#39; = 90, &#39;</span><span class=\"n\">Kensington</span><span class=\"o\">-</span><span class=\"n\">Ocean</span> <span class=\"n\">Parkway</span><span class=\"s1\">&#39; = 91, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span><span class=\"s1\">&#39; = 92, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 93, &#39;</span><span class=\"n\">Kingsbridge</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 94, &#39;</span><span class=\"n\">Laurelton</span><span class=\"s1\">&#39; = 95, &#39;</span><span class=\"n\">Lenox</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Roosevelt</span> <span class=\"n\">Island</span><span class=\"s1\">&#39; = 96, &#39;</span><span class=\"n\">Lincoln</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 97, &#39;</span><span class=\"n\">Lindenwood</span><span class=\"o\">-</span><span class=\"n\">Howard</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 98, &#39;</span><span class=\"n\">Longwood</span><span class=\"s1\">&#39; = 99, &#39;</span><span class=\"k\">Lower</span> <span class=\"n\">East</span> <span class=\"n\">Side</span><span class=\"s1\">&#39; = 100, &#39;</span><span class=\"n\">Madison</span><span class=\"s1\">&#39; = 101, &#39;</span><span class=\"n\">Manhattanville</span><span class=\"s1\">&#39; = 102, &#39;</span><span class=\"n\">Marble</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Inwood</span><span class=\"s1\">&#39; = 103, &#39;</span><span class=\"n\">Mariner</span><span class=\"err\">\\</span><span class=\"s1\">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Maspeth&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Melrose South-Mott Haven North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Middle Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">107</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midtown-Midtown South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">108</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morningside Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">110</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morrisania-Melrose&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">111</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mott Haven-Port Morris&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mount Hope&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">113</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill-Kips Bay&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">115</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Brighton-Silver Lake&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Dorp-Midland Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">117</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">118</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Corona&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Side-South Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">121</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Norwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">122</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakland Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakwood-Oakwood Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">124</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">125</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Parkway South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">126</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Astoria&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">127</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">129</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Park Slope-Gowanus&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">130</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Parkchester&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">131</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">132</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Parkway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">133</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">134</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Port Richmond&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">135</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">136</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">137</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">138</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensboro Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">139</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rego Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">141</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Richmond Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ridgewood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">143</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rikers Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rosedale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">145</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rossville-Woodrow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rugby-Remsen Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">147</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">148</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Seagate-Coney Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">149</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">150</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">151</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Bruckner&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">152</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">153</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Jamaica&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">154</sp");
            
            document.write("an><span class=\"p\">,</span> <span class=\"s1\">&#39;South Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">155</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">156</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens South-Brookville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">157</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">158</span><span class=\"p\">,</span> <span class=\"s1\">&#39;St. Albans&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">159</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stapleton-Rosebank&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">160</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Starrett City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">161</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Steinway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">163</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">164</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park East&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park West&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">166</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">167</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Turtle Bay-East Midtown&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">168</span><span class=\"p\">,</span> <span class=\"s1\">&#39;University Heights-Morris Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">170</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper West Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">171</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Cortlandt Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">172</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">173</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">174</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">175</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Brighton&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">176</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Concourse&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">177</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Farms-Bronx River&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">178</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">179</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">180</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westchester-Unionport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">181</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westerleigh&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">182</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Whitestone&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">183</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsbridge-Olinville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">184</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsburg&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Windsor Terrace&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">186</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodhaven&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">187</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodlawn-Wakefield&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">188</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodside&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">189</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Yorkville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">191</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">192</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">193</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">194</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">195</span><span class=\"p\">),</span>  <span class=\"n\">pickup_puma</span> <span class=\"n\">UInt16</span><span class=\"p\">,</span>  <span class=\"n\">dropoff_nyct2010_gid</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>  <span class=\"n\">dropoff_ctlabel</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>  <span class=\"n\">dropoff_borocode</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>  <span class=\"n\">dropoff_boroname</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"p\">),</span>  <span class=\"n\">dropoff_ct2010</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span>  <span class=\"n\">dropoff_boroct2010</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">),</span>  <span class=\"n\">dropoff_cdeligibil</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39; &#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;E&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;I&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">),</span>  <span class=\"n\">dropoff_ntacode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">),</span>  <span class=\"n\">dropoff_ntaname</span> <span class=\"n\">Enum16</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Airport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Allerton-Pelham Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Annadale-Huguenot-Prince\\&#39;</span><span class=\"n\">s</span> <span class=\"n\">Bay</span><span class=\"o\">-</span><span class=\"n\">Eltingville</span><span class=\"s1\">&#39; = 3, &#39;</span><span class=\"n\">Arden</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 4, &#39;</span><span class=\"n\">Astoria</span><span class=\"s1\">&#39; = 5, &#39;</span><span class=\"n\">Auburndale</span><span class=\"s1\">&#39; = 6, &#39;</span><span class=\"n\">Baisley</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 7, &#39;</span><span class=\"n\">Bath</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 8, &#39;</span><span class=\"n\">Battery</span> <span class=\"n\">Park</span> <span class=\"n\">City</span><span class=\"o\">-</span><span class=\"k\">Lower</span> <span class=\"n\">Manhattan</span><span class=\"s1\">&#39; = 9, &#39;</span><span class=\"n\">Bay</span> <span class=\"n\">Ridge</span><span class=\"s1\">&#39; = 10, &#39;</span><span class=\"n\">Bayside</span><span class=\"o\">-</span><span class=\"n\">Bayside</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 11, &#39;</span><span class=\"n\">Bedford</span><span class=\"s1\">&#39; = 12, &#39;</span><span class=\"n\">Bedford</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Fordham</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 13, &#39;</span><span class=\"n\">Bellerose</span><span class=\"s1\">&#39; = 14, &#39;</span><span class=\"n\">Belmont</span><span class=\"s1\">&#39; = 15, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 16, &#39;</span><span class=\"n\">Bensonhurst</span> <span class=\"n\">West</span><span class=\"s1\">&#39; = 17, &#39;</span><span class=\"n\">Borough</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 18, &#39;</span><span class=\"n\">Breezy</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Belle</span> <span class=\"n\">Harbor</span><span class=\"o\">-</span><span class=\"n\">Rockaway</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Broad</span> <span class=\"n\">Channel</span><span class=\"s1\">&#39; = 19, &#39;</span><span class=\"n\">Briarwood</span><span class=\"o\">-</span><span class=\"n\">Jamaica</span> <span cla");
            
            document.write("ss=\"n\">Hills</span><span class=\"s1\">&#39; = 20, &#39;</span><span class=\"n\">Brighton</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 21, &#39;</span><span class=\"n\">Bronxdale</span><span class=\"s1\">&#39; = 22, &#39;</span><span class=\"n\">Brooklyn</span> <span class=\"n\">Heights</span><span class=\"o\">-</span><span class=\"n\">Cobble</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 23, &#39;</span><span class=\"n\">Brownsville</span><span class=\"s1\">&#39; = 24, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 25, &#39;</span><span class=\"n\">Bushwick</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 26, &#39;</span><span class=\"n\">Cambria</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 27, &#39;</span><span class=\"n\">Canarsie</span><span class=\"s1\">&#39; = 28, &#39;</span><span class=\"n\">Carroll</span> <span class=\"n\">Gardens</span><span class=\"o\">-</span><span class=\"n\">Columbia</span> <span class=\"n\">Street</span><span class=\"o\">-</span><span class=\"n\">Red</span> <span class=\"n\">Hook</span><span class=\"s1\">&#39; = 29, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"o\">-</span><span class=\"n\">Polo</span> <span class=\"n\">Grounds</span><span class=\"s1\">&#39; = 30, &#39;</span><span class=\"n\">Central</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 31, &#39;</span><span class=\"n\">Charleston</span><span class=\"o\">-</span><span class=\"n\">Richmond</span> <span class=\"n\">Valley</span><span class=\"o\">-</span><span class=\"n\">Tottenville</span><span class=\"s1\">&#39; = 32, &#39;</span><span class=\"n\">Chinatown</span><span class=\"s1\">&#39; = 33, &#39;</span><span class=\"n\">Claremont</span><span class=\"o\">-</span><span class=\"n\">Bathgate</span><span class=\"s1\">&#39; = 34, &#39;</span><span class=\"n\">Clinton</span><span class=\"s1\">&#39; = 35, &#39;</span><span class=\"n\">Clinton</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 36, &#39;</span><span class=\"n\">Co</span><span class=\"o\">-</span><span class=\"n\">op</span> <span class=\"n\">City</span><span class=\"s1\">&#39; = 37, &#39;</span><span class=\"n\">College</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 38, &#39;</span><span class=\"n\">Corona</span><span class=\"s1\">&#39; = 39, &#39;</span><span class=\"n\">Crotona</span> <span class=\"n\">Park</span> <span class=\"n\">East</span><span class=\"s1\">&#39; = 40, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 41, &#39;</span><span class=\"n\">Crown</span> <span class=\"n\">Heights</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 42, &#39;</span><span class=\"n\">Cypress</span> <span class=\"n\">Hills</span><span class=\"o\">-</span><span class=\"n\">City</span> <span class=\"n\">Line</span><span class=\"s1\">&#39; = 43, &#39;</span><span class=\"n\">DUMBO</span><span class=\"o\">-</span><span class=\"n\">Vinegar</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Downtown</span> <span class=\"n\">Brooklyn</span><span class=\"o\">-</span><span class=\"n\">Boerum</span> <span class=\"n\">Hill</span><span class=\"s1\">&#39; = 44, &#39;</span><span class=\"n\">Douglas</span> <span class=\"n\">Manor</span><span class=\"o\">-</span><span class=\"n\">Douglaston</span><span class=\"o\">-</span><span class=\"n\">Little</span> <span class=\"n\">Neck</span><span class=\"s1\">&#39; = 45, &#39;</span><span class=\"n\">Dyker</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 46, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Concourse</span><span class=\"o\">-</span><span class=\"n\">Concourse</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 47, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 48, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flatbush</span><span class=\"o\">-</span><span class=\"n\">Farragut</span><span class=\"s1\">&#39; = 49, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 50, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">North</span><span class=\"s1\">&#39; = 51, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Harlem</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 52, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span><span class=\"s1\">&#39; = 53, &#39;</span><span class=\"n\">East</span> <span class=\"k\">New</span> <span class=\"n\">York</span> <span class=\"p\">(</span><span class=\"n\">Pennsylvania</span> <span class=\"n\">Ave</span><span class=\"p\">)</span><span class=\"s1\">&#39; = 54, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Tremont</span><span class=\"s1\">&#39; = 55, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Village</span><span class=\"s1\">&#39; = 56, &#39;</span><span class=\"n\">East</span> <span class=\"n\">Williamsburg</span><span class=\"s1\">&#39; = 57, &#39;</span><span class=\"n\">Eastchester</span><span class=\"o\">-</span><span class=\"n\">Edenwald</span><span class=\"o\">-</span><span class=\"n\">Baychester</span><span class=\"s1\">&#39; = 58, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"s1\">&#39; = 59, &#39;</span><span class=\"n\">Elmhurst</span><span class=\"o\">-</span><span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 60, &#39;</span><span class=\"n\">Erasmus</span><span class=\"s1\">&#39; = 61, &#39;</span><span class=\"n\">Far</span> <span class=\"n\">Rockaway</span><span class=\"o\">-</span><span class=\"n\">Bayswater</span><span class=\"s1\">&#39; = 62, &#39;</span><span class=\"n\">Flatbush</span><span class=\"s1\">&#39; = 63, &#39;</span><span class=\"n\">Flatlands</span><span class=\"s1\">&#39; = 64, &#39;</span><span class=\"n\">Flushing</span><span class=\"s1\">&#39; = 65, &#39;</span><span class=\"n\">Fordham</span> <span class=\"n\">South</span><span class=\"s1\">&#39; = 66, &#39;</span><span class=\"n\">Forest</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 67, &#39;</span><span class=\"n\">Fort</span> <span class=\"n\">Greene</span><span class=\"s1\">&#39; = 68, &#39;</span><span class=\"n\">Fresh</span> <span class=\"n\">Meadows</span><span class=\"o\">-</span><span class=\"n\">Utopia</span><span class=\"s1\">&#39; = 69, &#39;</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Totten</span><span class=\"o\">-</span><span class=\"n\">Bay</span> <span class=\"n\">Terrace</span><span class=\"o\">-</span><span class=\"n\">Clearview</span><span class=\"s1\">&#39; = 70, &#39;</span><span class=\"n\">Georgetown</span><span class=\"o\">-</span><span class=\"n\">Marine</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"n\">Bergen</span> <span class=\"n\">Beach</span><span class=\"o\">-</span><span class=\"n\">Mill</span> <span class=\"n\">Basin</span><span class=\"s1\">&#39; = 71, &#39;</span><span class=\"n\">Glen</span> <span class=\"n\">Oaks</span><span class=\"o\">-</span><span class=\"n\">Floral</span> <span class=\"n\">Park</span><span class=\"o\">-</span><span class=\"k\">New</span> <span class=\"n\">Hyde</span> <span class=\"n\">Park</span><span class=\"s1\">&#39; = 72, &#39;</span><span class=\"n\">Glendale</span><span class=\"s1\">&#39; = 73, &#39;</span><span class=\"n\">Gramercy</span><span class=\"s1\">&#39; = 74, &#39;</span><span class=\"n\">Grasmere</span><span class=\"o\">-</span><span class=\"n\">Arrochar</span><span class=\"o\">-</span><span class=\"n\">Ft</span><span class=\"p\">.</span> <span class=\"n\">Wadsworth</span><span class=\"s1\">&#39; = 75, &#39;</span><span class=\"n\">Gravesend</span><span class=\"s1\">&#39; = 76, &#39;</span><span class=\"n\">Great</span> <span class=\"n\">Kills</span><span class=\"s1\">&#39; = 77, &#39;</span><span class=\"n\">Greenpoint</span><span class=\"s1\">&#39; = 78, &#39;</span><span class=\"n\">Grymes</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Clifton</span><span class=\"o\">-</span><span class=\"n\">Fox</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 79, &#39;</span><span class=\"n\">Hamilton</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 80, &#39;</span><span class=\"n\">Hammels</span><span class=\"o\">-</span><span class=\"n\">Arverne</span><span class=\"o\">-</span><span class=\"n\">Edgemere</span><span class=\"s1\">&#39; = 81, &#39;</span><span class=\"n\">Highbridge</span><span class=\"s1\">&#39; = 82, &#39;</span><span class=\"n\">Hollis</span><span class=\"s1\">&#39; = 83, &#39;</span><span class=\"n\">Homecrest</span><span class=\"s1\">&#39; = 84, &#39;</span><span class=\"n\">Hudson</span> <span class=\"n\">Yards</span><span class=\"o\">-</span><span class=\"n\">Chelsea</span><span class=\"o\">-</span><span class=\"n\">Flatiron</span><span class=\"o\">-</span><span class=\"k\">Union</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 85, &#39;</span><span class=\"n\">Hunters</span> <span class=\"n\">Point</span><span class=\"o\">-</span><span class=\"n\">Sunnyside</span><span class=\"o\">-</span><span class=\"n\">West</span> <span class=\"n\">Maspeth</span><span class=\"s1\">&#39; = 86, &#39;</span><span class=\"n\">Hunts</span> <span class=\"n\">Point</span><span class=\"s1\">&#39; = 87, &#39;</span><span class=\"n\">Jackson</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 88, &#39;</span><span class=\"n\">Jamaica</span><span class=\"s1\">&#39; = 89, &#39;</span><span class=\"n\">Jamaica</span> <span class=\"n\">Estates</span><span class=\"o\">-</span><span class=\"n\">Holliswood</span><span class=\"s1\">&#39; = 90, &#39;</span><span class=\"n\">Kensington</span><span class=\"o\">-</span><span class=\"n\">Ocean</span> <span class=\"n\">Parkway</span><span class=\"s1\">&#39; = 91, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span><span class=\"s1\">&#39; = 92, &#39;</span><span class=\"n\">Kew</span> <span class=\"n\">Gardens</span> <span class=\"n\">Hills</span><span class=\"s1\">&#39; = 93, &#39;</span><span class=\"n\">Kingsbridge</span> <span class=\"n\">Heights</span><span class=\"s1\">&#39; = 94, &#39;</span><span class=\"n\">Laurelton</span><span class=\"s1\">&#39; = 95, &#39;</span><span class=\"n\">Lenox</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Roosevelt</span> <span class=\"n\">Island</span><span class=\"s1\">&#39; = 96, &#39;</s");
            
            document.write("pan><span class=\"n\">Lincoln</span> <span class=\"n\">Square</span><span class=\"s1\">&#39; = 97, &#39;</span><span class=\"n\">Lindenwood</span><span class=\"o\">-</span><span class=\"n\">Howard</span> <span class=\"n\">Beach</span><span class=\"s1\">&#39; = 98, &#39;</span><span class=\"n\">Longwood</span><span class=\"s1\">&#39; = 99, &#39;</span><span class=\"k\">Lower</span> <span class=\"n\">East</span> <span class=\"n\">Side</span><span class=\"s1\">&#39; = 100, &#39;</span><span class=\"n\">Madison</span><span class=\"s1\">&#39; = 101, &#39;</span><span class=\"n\">Manhattanville</span><span class=\"s1\">&#39; = 102, &#39;</span><span class=\"n\">Marble</span> <span class=\"n\">Hill</span><span class=\"o\">-</span><span class=\"n\">Inwood</span><span class=\"s1\">&#39; = 103, &#39;</span><span class=\"n\">Mariner</span><span class=\"err\">\\</span><span class=\"s1\">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Maspeth&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Melrose South-Mott Haven North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Middle Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">107</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midtown-Midtown South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">108</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Midwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morningside Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">110</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Morrisania-Melrose&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">111</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mott Haven-Port Morris&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mount Hope&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">113</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Murray Hill-Kips Bay&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">115</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Brighton-Silver Lake&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Dorp-Midland Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">117</span><span class=\"p\">,</span> <span class=\"s1\">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">118</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Corona&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"s1\">&#39;North Side-South Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">121</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Norwood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">122</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakland Gardens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Oakwood-Oakwood Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">124</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">125</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ocean Parkway South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">126</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Astoria&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">127</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">128</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">129</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Park Slope-Gowanus&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">130</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Parkchester&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">131</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">132</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pelham Parkway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">133</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">134</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Port Richmond&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">135</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">136</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">137</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queens Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">138</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensboro Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">139</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">140</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rego Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">141</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Richmond Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Ridgewood&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">143</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rikers Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rosedale&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">145</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rossville-Woodrow&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Rugby-Remsen Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">147</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">148</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Seagate-Coney Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">149</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">150</span><span class=\"p\">,</span> <span class=\"s1\">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">151</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Bruckner&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">152</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">153</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Jamaica&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">154</span><span class=\"p\">,</span> <span class=\"s1\">&#39;South Ozone Park&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">155</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens North&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">156</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Springfield Gardens South-Brookville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">157</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">158</span><span class=\"p\">,</span> <span class=\"s1\">&#39;St. Albans&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">159</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stapleton-Rosebank&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">160</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Starrett City&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">161</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Steinway&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">163</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">164</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park East&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Sunset Park West&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">166</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">167</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Turtle Bay-East Midtown&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">168</span><span class=\"p\">,</span> <span class=\"s1\">&#39;University Heights-Morris Heights&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">169</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">170</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Upper West Side&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">171</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Cortlandt Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">172</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">173</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights North&#39;</span> <span class=\"o\">=</span> <s");
            
            document.write("pan class=\"mi\">174</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Washington Heights South&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">175</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Brighton&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">176</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Concourse&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">177</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Farms-Bronx River&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">178</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">179</span><span class=\"p\">,</span> <span class=\"s1\">&#39;West Village&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">180</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westchester-Unionport&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">181</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Westerleigh&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">182</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Whitestone&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">183</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsbridge-Olinville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">184</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Williamsburg&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Windsor Terrace&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">186</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodhaven&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">187</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodlawn-Wakefield&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">188</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Woodside&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">189</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Yorkville&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">190</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Bronx&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">191</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">192</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">193</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Queens&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">194</span><span class=\"p\">,</span> <span class=\"s1\">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">195</span><span class=\"p\">),</span>  <span class=\"n\">dropoff_puma</span> <span class=\"n\">UInt16</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">pickup_date</span><span class=\"p\">,</span> <span class=\"n\">pickup_datetime</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>On the source server:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">trips_mergetree_x3</span> <span class=\"k\">AS</span> <span class=\"n\">trips_mergetree_third</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Distributed</span><span class=\"p\">(</span><span class=\"n\">perftest</span><span class=\"p\">,</span> <span class=\"k\">default</span><span class=\"p\">,</span> <span class=\"n\">trips_mergetree_third</span><span class=\"p\">,</span> <span class=\"n\">rand</span><span class=\"p\">())</span>\n</code></pre></div>\n\n\n<p>The following query redistributes data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">trips_mergetree_x3</span> <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">trips_mergetree</span>\n</code></pre></div>\n\n\n<p>This takes 2454 seconds.</p>\n<p>On three servers:</p>\n<p>Q1: 0.212 seconds.<br />\nQ2: 0.438 seconds.<br />\nQ3: 0.733 seconds.<br />\nQ4: 1.241 seconds.</p>\n<p>No surprises here, since the queries are scaled linearly.</p>\n<p>We also have results from a cluster of 140 servers:</p>\n<p>Q1: 0.028 sec.<br />\nQ2: 0.043 sec.<br />\nQ3: 0.051 sec.<br />\nQ4: 0.072 sec.</p>\n<p>In this case, the query processing time is determined above all by network latency.<br />\nWe ran queries using a client located in a Yandex datacenter in Finland on a cluster in Russia, which added about 20 ms of latency.</p>\n<h3 id=\"summary\">Summary<a class=\"headerlink\" href=\"#summary\" title=\"Permanent link\">&para;</a></h3>\n<table>\n<thead>\n<tr>\n<th>servers</th>\n<th>Q1</th>\n<th>Q2</th>\n<th>Q3</th>\n<th>Q4</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>0.490</td>\n<td>1.224</td>\n<td>2.104</td>\n<td>3.593</td>\n</tr>\n<tr>\n<td>3</td>\n<td>0.212</td>\n<td>0.438</td>\n<td>0.733</td>\n<td>1.241</td>\n</tr>\n<tr>\n<td>140</td>\n<td>0.028</td>\n<td>0.043</td>\n<td>0.051</td>\n<td>0.072</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"../../../../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"../../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"example_datasets/amplab_benchmark/\"></a><a name=\"../../../../../example_datasets/amplab_benchmark/\"></a><a name=\"../../../../../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"../../../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"../../../example_datasets/amplab_benchmark/\"></a><a name=\"amplab_benchmark/\"></a><a name=\"../../../../example_datasets/amplab_benchmark/\"></a><a name=\"../../../../../../example_datasets/amplab_benchmark/\"></a><a name=\"../getting_started/example_datasets/amplab_benchmark/\"></a><a name=\"../example_datasets/amplab_benchmark/\"></a><a name=\"../../example_datasets/amplab_benchmark/\"></a></p>\n<h2 id=\"amplab-big-data-benchmark\">AMPLab Big Data Benchmark<a class=\"headerlink\" href=\"#amplab-big-data-benchmark\" title=\"Permanent link\">&para;</a></h2>\n<p>See <a href=\"https://amplab.cs.berkeley.edu/benchmark/\">https://amplab.cs.berkeley.edu/benchmark/</a></p>\n<p>Sign up for a free account at <a href=\"https://aws.amazon.com\">https://aws.amazon.com</a>. You will need a credit card, email and phone number.Get a new access key at <a href=\"https://console.aws.amazon.com/iam/home?nc2=h_m_sc#security_credential\">https://console.aws.amazon.com/iam/home?nc2=h_m_sc#security_credential</a></p>\n<p>Run the following in the console:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install s3cmd\n$ mkdir tiny<span class=\"p\">;</span> <span class=\"nb\">cd</span> tiny<span class=\"p\">;</span>\n$ s3cmd sync s3://big-data-benchmark/pavlo/text-deflate/tiny/ .\n$ <span class=\"nb\">cd</span> ..\n$ mkdir 1node<span class=\"p\">;</span> <span class=\"nb\">cd</span> 1node<span class=\"p\">;</span>\n$ s3cmd sync s3://big-data-benchmark/pavlo/text-deflate/1node/ .\n$ <span class=\"nb\">cd</span> ..\n$ mkdir 5nodes<span class=\"p\">;</span> <span class=\"nb\">cd</span> 5nodes<span class=\"p\">;</span>\n$ s3cmd sync s3://big-data-benchmark/pavlo/text-deflate/5nodes/ .\n$ <span class=\"nb\">cd</span> ..\n</code></pre></div>\n\n\n<p>Run the following ClickHouse queries:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">rankings_tiny</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">pageURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">pageRank</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">avgDuration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">uservisits_tiny</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">sourceIP</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">destinationURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">visitDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">adRevenue</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserAgent</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">cCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">),</span>\n    <span class=\"n\">lCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span>\n    <span class=\"n\">searchWord</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">duration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">rankings_1node</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">pageURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">pageRank</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">avgDuration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">uservisits_1node</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">sourceIP</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">destinationURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">visitDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>");
            
            document.write("\n    <span class=\"n\">adRevenue</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserAgent</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">cCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">),</span>\n    <span class=\"n\">lCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span>\n    <span class=\"n\">searchWord</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">duration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">rankings_5nodes_on_single</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">pageURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">pageRank</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">avgDuration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">uservisits_5nodes_on_single</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">sourceIP</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">destinationURL</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">visitDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">adRevenue</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserAgent</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">cCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">),</span>\n    <span class=\"n\">lCode</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">),</span>\n    <span class=\"n\">searchWord</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">duration</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"n\">visitDate</span><span class=\"p\">,</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Go back to the console:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"k\">for</span> i in tiny/rankings/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO rankings_tiny FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in tiny/uservisits/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO uservisits_tiny FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in 1node/rankings/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO rankings_1node FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in 1node/uservisits/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO uservisits_1node FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in 5nodes/rankings/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO rankings_5nodes_on_single FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ <span class=\"k\">for</span> i in 5nodes/uservisits/*.deflate<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zlib-flate -uncompress &lt; <span class=\"nv\">$i</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO uservisits_5nodes_on_single FORMAT CSV&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n</code></pre></div>\n\n\n<p>Queries for obtaining data samples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">pageURL</span><span class=\"p\">,</span> <span class=\"n\">pageRank</span> <span class=\"k\">FROM</span> <span class=\"n\">rankings_1node</span> <span class=\"k\">WHERE</span> <span class=\"n\">pageRank</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1000</span>\n\n<span class=\"k\">SELECT</span> <span class=\"k\">substring</span><span class=\"p\">(</span><span class=\"n\">sourceIP</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">),</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">adRevenue</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">uservisits_1node</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">substring</span><span class=\"p\">(</span><span class=\"n\">sourceIP</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">sourceIP</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">adRevenue</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">totalRevenue</span><span class=\"p\">,</span>\n    <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">pageRank</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">pageRank</span>\n<span class=\"k\">FROM</span> <span class=\"n\">rankings_1node</span> <span class=\"k\">ALL</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">sourceIP</span><span class=\"p\">,</span>\n        <span class=\"n\">destinationURL</span> <span class=\"k\">AS</span> <span class=\"n\">pageURL</span><span class=\"p\">,</span>\n        <span class=\"n\">adRevenue</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">uservisits_1node</span>\n    <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">visitDate</span> <span class=\"o\">&gt;</span> <span class=\"s1\">&#39;1980-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">visitDate</span> <span class=\"o\">&lt;</span> <span class=\"s1\">&#39;1980-04-01&#39;</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"k\">USING</span> <span class=\"n\">pageURL</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">sourceIP</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">totalRevenue</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">1</span>\n</code></pre></div>\n\n\n<p><a name=\"wikistat/\"></a><a name=\"../getting_started/example_datasets/wikistat/\"></a><a name=\"../../example_datasets/wikistat/\"></a><a name=\"../../getting_started/example_datasets/wikistat/\"></a><a name=\"../../../../../getting_started/example_datasets/wikistat/\"></a><a name=\"../../../../example_datasets/wikistat/\"></a><a name=\"../example_datasets/wikistat/\"></a><a name=\"getting_started/example_datasets/wikistat/\"></a><a name=\"../../../getting_started/example_datasets/wikistat/\"></a><a name=\"../../../../getting_started/example_datasets/wikistat/\"></a><a name=\"../../../example_datasets/wikistat/\"></a><a name=\"example_datasets/wikistat/\"></a><a name=\"../../../../../example_datasets/wikistat/\"></a><a name=\"../../../../../../example_datasets/wikistat/\"></a></p>\n<h2 id=\"wikistat\">WikiStat<a class=\"headerlink\" href=\"#wikistat\" title=\"Permanent link\">&para;</a></h2>\n<p>See: <a href=\"http://dumps.wikimedia.org/other/pagecounts-raw/\">http://dumps.wikimedia.org/other/pagecounts-raw/</a></p>\n<p>Creating a table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">wikistat</span>\n<span class=\"p\">(</span>\n    <span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">time</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">project</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">subproject</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span cla");
            
            document.write("ss=\"n\">path</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">hits</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">size</span> <span class=\"n\">UInt64</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">time</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Loading data:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"k\">for</span> i in <span class=\"o\">{</span><span class=\"m\">2007</span>..2016<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"k\">for</span> j in <span class=\"o\">{</span><span class=\"m\">01</span>..12<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span>-<span class=\"nv\">$j</span> &gt;<span class=\"p\">&amp;</span><span class=\"m\">2</span><span class=\"p\">;</span> curl -sSL <span class=\"s2\">&quot;http://dumps.wikimedia.org/other/pagecounts-raw/</span><span class=\"nv\">$i</span><span class=\"s2\">/</span><span class=\"nv\">$i</span><span class=\"s2\">-</span><span class=\"nv\">$j</span><span class=\"s2\">/&quot;</span> <span class=\"p\">|</span> grep -oE <span class=\"s1\">&#39;pagecounts-[0-9]+-[0-9]+\\.gz&#39;</span><span class=\"p\">;</span> <span class=\"k\">done</span><span class=\"p\">;</span> <span class=\"k\">done</span> <span class=\"p\">|</span> sort <span class=\"p\">|</span> uniq <span class=\"p\">|</span> tee links.txt\n$ cat links.txt <span class=\"p\">|</span> <span class=\"k\">while</span> <span class=\"nb\">read</span> link<span class=\"p\">;</span> <span class=\"k\">do</span> wget http://dumps.wikimedia.org/other/pagecounts-raw/<span class=\"k\">$(</span><span class=\"nb\">echo</span> <span class=\"nv\">$link</span> <span class=\"p\">|</span> sed -r <span class=\"s1\">&#39;s/pagecounts-([0-9]{4})([0-9]{2})[0-9]{2}-[0-9]+\\.gz/\\1/&#39;</span><span class=\"k\">)</span>/<span class=\"k\">$(</span><span class=\"nb\">echo</span> <span class=\"nv\">$link</span> <span class=\"p\">|</span> sed -r <span class=\"s1\">&#39;s/pagecounts-([0-9]{4})([0-9]{2})[0-9]{2}-[0-9]+\\.gz/\\1-\\2/&#39;</span><span class=\"k\">)</span>/<span class=\"nv\">$link</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n$ ls -1 /opt/wikistat/ <span class=\"p\">|</span> grep gz <span class=\"p\">|</span> <span class=\"k\">while</span> <span class=\"nb\">read</span> i<span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> gzip -cd /opt/wikistat/<span class=\"nv\">$i</span> <span class=\"p\">|</span> ./wikistat-loader --time<span class=\"o\">=</span><span class=\"s2\">&quot;</span><span class=\"k\">$(</span><span class=\"nb\">echo</span> -n <span class=\"nv\">$i</span> <span class=\"p\">|</span> sed -r <span class=\"s1\">&#39;s/pagecounts-([0-9]{4})([0-9]{2})([0-9]{2})-([0-9]{2})([0-9]{2})([0-9]{2})\\.gz/\\1-\\2-\\3 \\4-00-00/&#39;</span><span class=\"k\">)</span><span class=\"s2\">&quot;</span> <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO wikistat FORMAT TabSeparated&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n</code></pre></div>\n\n\n<p><a name=\"../getting_started/example_datasets/criteo/\"></a><a name=\"getting_started/example_datasets/criteo/\"></a><a name=\"criteo/\"></a><a name=\"../../getting_started/example_datasets/criteo/\"></a><a name=\"../../../../../getting_started/example_datasets/criteo/\"></a><a name=\"../example_datasets/criteo/\"></a><a name=\"../../../../../../example_datasets/criteo/\"></a><a name=\"../../../example_datasets/criteo/\"></a><a name=\"../../../../../example_datasets/criteo/\"></a><a name=\"../../../../example_datasets/criteo/\"></a><a name=\"example_datasets/criteo/\"></a><a name=\"../../example_datasets/criteo/\"></a><a name=\"../../../../getting_started/example_datasets/criteo/\"></a><a name=\"../../../getting_started/example_datasets/criteo/\"></a></p>\n<h2 id=\"terabyte-of-click-logs-from-criteo\">Terabyte of Click Logs from Criteo<a class=\"headerlink\" href=\"#terabyte-of-click-logs-from-criteo\" title=\"Permanent link\">&para;</a></h2>\n<p>Download the data from <a href=\"http://labs.criteo.com/downloads/download-terabyte-click-logs/\">http://labs.criteo.com/downloads/download-terabyte-click-logs/</a></p>\n<p>Create a table to import the log to:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">criteo_log</span> <span class=\"p\">(</span><span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">clicked</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span> <span class=\"n\">int1</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int2</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int3</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int4</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int5</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int6</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int7</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"nb\">int8</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int9</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int10</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int11</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int12</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">int13</span> <span class=\"n\">Int32</span><span class=\"p\">,</span> <span class=\"n\">cat1</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat2</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat3</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat4</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat5</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat6</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat7</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat8</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat9</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat10</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat11</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat12</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat13</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat14</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat15</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat16</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat17</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat18</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat19</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat20</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat21</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat22</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat23</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat24</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat25</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cat26</span> <span class=\"n\">String</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span>\n</code></pre></div>\n\n\n<p>Download the data:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"k\">for</span> i in <span class=\"o\">{</span><span class=\"m\">00</span>..23<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do</span> <span class=\"nb\">echo</span> <span class=\"nv\">$i</span><span class=\"p\">;</span> zcat datasets/criteo/day_<span class=\"si\">${</span><span class=\"nv\">i</span><span class=\"p\">#0</span><span class=\"si\">}</span>.gz <span class=\"p\">|</span> sed -r <span class=\"s1\">&#39;s/^/2000-01-&#39;</span><span class=\"si\">${</span><span class=\"nv\">i</span><span class=\"p\">/00/24</span><span class=\"si\">}</span><span class=\"s1\">&#39;\\t/&#39;</span> <span class=\"p\">|</span> clickhouse-client --host<span class=\"o\">=</span>example-perftest01j --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO criteo_log FORMAT TabSeparated&quot;</span><span class=\"p\">;</span> <span class=\"k\">done</span>\n</code></pre></div>\n\n\n<p>Create a table for the converted data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">criteo</span>\n<span class=\"p\">(</span>\n    <span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">clicked</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">int1</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int2</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int3</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int4</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int5</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int6</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int7</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"nb\">int8</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int9</s");
            
            document.write("pan> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int10</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int11</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int12</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">int13</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat1</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat2</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat3</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat4</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat5</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat6</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat7</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat8</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat9</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat10</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat11</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat12</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat13</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat14</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat15</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat16</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat17</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat18</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat19</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat20</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat21</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat22</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat23</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat24</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat25</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">icat26</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">icat1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">icat1</span><span class=\"p\">)),</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Transform data from the raw log and put it in the second table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">criteo</span> <span class=\"k\">SELECT</span> <span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">clicked</span><span class=\"p\">,</span> <span class=\"n\">int1</span><span class=\"p\">,</span> <span class=\"n\">int2</span><span class=\"p\">,</span> <span class=\"n\">int3</span><span class=\"p\">,</span> <span class=\"n\">int4</span><span class=\"p\">,</span> <span class=\"n\">int5</span><span class=\"p\">,</span> <span class=\"n\">int6</span><span class=\"p\">,</span> <span class=\"n\">int7</span><span class=\"p\">,</span> <span class=\"nb\">int8</span><span class=\"p\">,</span> <span class=\"n\">int9</span><span class=\"p\">,</span> <span class=\"n\">int10</span><span class=\"p\">,</span> <span class=\"n\">int11</span><span class=\"p\">,</span> <span class=\"n\">int12</span><span class=\"p\">,</span> <span class=\"n\">int13</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat1</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat1</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat2</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat2</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat3</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat3</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat4</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat4</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat5</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat5</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat6</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat6</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat7</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat7</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat8</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat8</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat9</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat9</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat10</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat10</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat11</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat11</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat12</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat12</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat13</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat13</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat14</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat14</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat15</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat15</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat16</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat16</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat17</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat17</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat18</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat18</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat19</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat19</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat20</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat20</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat21</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat21</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat22</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat22</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat23</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat23</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat24</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">ica");
            
            document.write("t24</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat25</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat25</span><span class=\"p\">,</span> <span class=\"n\">reinterpretAsUInt32</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"n\">cat26</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">icat26</span> <span class=\"k\">FROM</span> <span class=\"n\">criteo_log</span><span class=\"p\">;</span>\n\n<span class=\"k\">DROP</span> <span class=\"k\">TABLE</span> <span class=\"n\">criteo_log</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><a name=\"../getting_started/example_datasets/star_schema/\"></a><a name=\"../../../../../example_datasets/star_schema/\"></a><a name=\"example_datasets/star_schema/\"></a><a name=\"../../../getting_started/example_datasets/star_schema/\"></a><a name=\"star_schema/\"></a><a name=\"../example_datasets/star_schema/\"></a><a name=\"../../example_datasets/star_schema/\"></a><a name=\"../../../example_datasets/star_schema/\"></a><a name=\"../../../../../../example_datasets/star_schema/\"></a><a name=\"../../../../example_datasets/star_schema/\"></a><a name=\"getting_started/example_datasets/star_schema/\"></a><a name=\"../../../../getting_started/example_datasets/star_schema/\"></a><a name=\"../../getting_started/example_datasets/star_schema/\"></a><a name=\"../../../../../getting_started/example_datasets/star_schema/\"></a></p>\n<h2 id=\"star-schema-benchmark\">Star Schema Benchmark<a class=\"headerlink\" href=\"#star-schema-benchmark\" title=\"Permanent link\">&para;</a></h2>\n<p>Compiling dbgen:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ git clone git@github.com:vadimtk/ssb-dbgen.git\n$ <span class=\"nb\">cd</span> ssb-dbgen\n$ make\n</code></pre></div>\n\n\n<p>Generating data:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ ./dbgen -s <span class=\"m\">1000</span> -T c\n$ ./dbgen -s <span class=\"m\">1000</span> -T l\n$ ./dbgen -s <span class=\"m\">1000</span> -T p\n$ ./dbgen -s <span class=\"m\">1000</span> -T s\n$ ./dbgen -s <span class=\"m\">1000</span> -T d\n</code></pre></div>\n\n\n<p>Creating tables in ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">customer</span>\n<span class=\"p\">(</span>\n        <span class=\"n\">C_CUSTKEY</span>       <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"n\">C_NAME</span>          <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">C_ADDRESS</span>       <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">C_CITY</span>          <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">C_NATION</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">C_REGION</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">C_PHONE</span>         <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">C_MKTSEGMENT</span>    <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">C_CUSTKEY</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">lineorder</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">LO_ORDERKEY</span>             <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_LINENUMBER</span>           <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_CUSTKEY</span>              <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_PARTKEY</span>              <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_SUPPKEY</span>              <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_ORDERDATE</span>            <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_ORDERPRIORITY</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n    <span class=\"n\">LO_SHIPPRIORITY</span>         <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_QUANTITY</span>             <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_EXTENDEDPRICE</span>        <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_ORDTOTALPRICE</span>        <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_DISCOUNT</span>             <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_REVENUE</span>              <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_SUPPLYCOST</span>           <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_TAX</span>                  <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_COMMITDATE</span>           <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">LO_SHIPMODE</span>             <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span> <span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">,</span> <span class=\"n\">LO_ORDERKEY</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">part</span>\n<span class=\"p\">(</span>\n        <span class=\"n\">P_PARTKEY</span>       <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"n\">P_NAME</span>          <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">P_MFGR</span>          <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_CATEGORY</span>      <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_BRAND</span>         <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_COLOR</span>         <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_TYPE</span>          <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">P_SIZE</span>          <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n        <span class=\"n\">P_CONTAINER</span>     <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">P_PARTKEY</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">supplier</span>\n<span class=\"p\">(</span>\n        <span class=\"n\">S_SUPPKEY</span>       <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"n\">S_NAME</span>          <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">S_ADDRESS</span>       <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">S_CITY</span>          <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">S_NATION</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">S_REGION</span>        <span class=\"n\">LowCardinality</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">),</span>\n        <span class=\"n\">S_PHONE</span>         <span class=\"n\">String</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">S_SUPPKEY</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Inserting data:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO customer FORMAT CSV&quot;</span> &lt; customer.tbl\n$ clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO part FORMAT CSV&quot;</span> &lt; part.tbl\n$ clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO supplier FORMAT CSV&quot;</span> &lt; supplier.tbl\n$ clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO lineorder FORMAT CSV&quot;</span> &lt; lineorder.tbl\n</code></pre></div>\n\n\n<p>Converting \"star schema\" to denormalized \"flat schema\":</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">max_memory_usage</span> <span class=\"o\">=</span> <span class=\"mi\">20000000000</span><span class=\"p\">,</span> <span class=\"n\">allow_experimental_multiple_joins_emulation</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">lineorder_flat</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span>\n<span class=\"n\">PARTITION</span> <span c");
            
            document.write("lass=\"k\">BY</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">,</span> <span class=\"n\">LO_ORDERKEY</span><span class=\"p\">)</span> <span class=\"k\">AS</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"k\">c</span><span class=\"p\">.</span><span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"p\">.</span><span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"n\">p</span><span class=\"p\">.</span><span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">lineorder</span> <span class=\"n\">l</span>\n <span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"n\">customer</span> <span class=\"k\">c</span> <span class=\"k\">ON</span> <span class=\"p\">(</span><span class=\"k\">c</span><span class=\"p\">.</span><span class=\"n\">C_CUSTKEY</span> <span class=\"o\">=</span> <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">LO_CUSTKEY</span><span class=\"p\">)</span>\n <span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"n\">supplier</span> <span class=\"n\">s</span> <span class=\"k\">ON</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">.</span><span class=\"n\">S_SUPPKEY</span> <span class=\"o\">=</span> <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">LO_SUPPKEY</span><span class=\"p\">)</span>\n <span class=\"k\">ANY</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"n\">part</span> <span class=\"n\">p</span> <span class=\"k\">ON</span>  <span class=\"p\">(</span><span class=\"n\">p</span><span class=\"p\">.</span><span class=\"n\">P_PARTKEY</span> <span class=\"o\">=</span> <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">LO_PARTKEY</span><span class=\"p\">);</span>\n\n<span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"n\">C_CUSTKEY</span><span class=\"p\">,</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"n\">S_SUPPKEY</span><span class=\"p\">,</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"n\">P_PARTKEY</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Running the queries:</p>\n<p>Q1.1</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_EXTENDEDPRICE</span> <span class=\"o\">*</span> <span class=\"n\">LO_DISCOUNT</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">1993</span> <span class=\"k\">AND</span> <span class=\"n\">LO_DISCOUNT</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">1</span> <span class=\"k\">AND</span> <span class=\"mi\">3</span> <span class=\"k\">AND</span> <span class=\"n\">LO_QUANTITY</span> <span class=\"o\">&lt;</span> <span class=\"mi\">25</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q1.2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_EXTENDEDPRICE</span> <span class=\"o\">*</span> <span class=\"n\">LO_DISCOUNT</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">199401</span> <span class=\"k\">AND</span> <span class=\"n\">LO_DISCOUNT</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">4</span> <span class=\"k\">AND</span> <span class=\"mi\">6</span> <span class=\"k\">AND</span> <span class=\"n\">LO_QUANTITY</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">26</span> <span class=\"k\">AND</span> <span class=\"mi\">35</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q1.3</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_EXTENDEDPRICE</span> <span class=\"o\">*</span> <span class=\"n\">LO_DISCOUNT</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">toISOWeek</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">6</span> <span class=\"k\">AND</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">1994</span> <span class=\"k\">AND</span> <span class=\"n\">LO_DISCOUNT</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">5</span> <span class=\"k\">AND</span> <span class=\"mi\">7</span> <span class=\"k\">AND</span> <span class=\"n\">LO_QUANTITY</span> <span class=\"k\">BETWEEN</span> <span class=\"mi\">26</span> <span class=\"k\">AND</span> <span class=\"mi\">35</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q2.1</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">),</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">P_CATEGORY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#12&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q2.2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">),</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">BETWEEN</span> <span class=\"s1\">&#39;MFGR#2221&#39;</span> <span class=\"k\">AND</span> <span class=\"s1\">&#39;MFGR#2228&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;ASIA&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q2.3</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">),</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">P_BRAND</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#2239&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;EUROPE&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3.1</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">C_NATION</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">C_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;ASIA&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;ASIA&#39;</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">1992</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&lt;=</span> <span class=\"mi\">1997</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">C_NATION</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"k\">year</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</");
            
            document.write("span> <span class=\"k\">asc</span><span class=\"p\">,</span> <span class=\"n\">revenue</span> <span class=\"k\">desc</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3.2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">C_NATION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED STATES&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_NATION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED STATES&#39;</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">1992</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&lt;=</span> <span class=\"mi\">1997</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"k\">year</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span> <span class=\"k\">asc</span><span class=\"p\">,</span> <span class=\"n\">revenue</span> <span class=\"k\">desc</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3.3</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">C_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">C_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI5&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">S_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">S_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI5&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">1992</span> <span class=\"k\">AND</span> <span class=\"k\">year</span> <span class=\"o\">&lt;=</span> <span class=\"mi\">1997</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"k\">year</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span> <span class=\"k\">asc</span><span class=\"p\">,</span> <span class=\"n\">revenue</span> <span class=\"k\">desc</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q3.4</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">revenue</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">C_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">C_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI5&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">S_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">S_CITY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED KI5&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;199712&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">C_CITY</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"k\">year</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span> <span class=\"k\">asc</span><span class=\"p\">,</span> <span class=\"n\">revenue</span> <span class=\"k\">desc</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q4.1</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">C_NATION</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span> <span class=\"o\">-</span> <span class=\"n\">LO_SUPPLYCOST</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">profit</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">C_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">P_MFGR</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">P_MFGR</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#2&#39;</span><span class=\"p\">)</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">C_NATION</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">C_NATION</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q4.2</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"n\">P_CATEGORY</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span> <span class=\"o\">-</span> <span class=\"n\">LO_SUPPLYCOST</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">profit</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">C_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">S_REGION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;AMERICA&#39;</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"k\">year</span> <span class=\"o\">=</span> <span class=\"mi\">1997</span> <span class=\"k\">OR</span> <span class=\"k\">year</span> <span class=\"o\">=</span> <span class=\"mi\">1998</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">P_MFGR</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#1&#39;</span> <span class=\"k\">OR</span> <span class=\"n\">P_MFGR</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#2&#39;</span><span class=\"p\">)</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"n\">P_CATEGORY</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_NATION</span><span class=\"p\">,</span> <span class=\"n\">P_CATEGORY</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Q4.3</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">LO_ORDERDATE</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">LO_REVENUE</span> <span class=\"o\">-</span> <span class=\"n\">LO_SUPPLYCOST</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">profit</span> <span class=\"k\">FROM</span> <span class=\"n\">lineorder_flat</span> <span class=\"k\">WHERE</span> <span class=\"n\">S_NATION</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;UNITED STATES&#39;</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"k\">year</span> <span class=\"o\">=</span> <span class=\"mi\">1997</span> <span class=\"k\">OR</span> <span class=\"k\">year</span> <span class=\"o\">=</span> <span class=\"mi\">1998</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">P_CATEGORY</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MFGR#14&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span clas");
            
            document.write("s=\"p\">,</span> <span class=\"n\">P_BRAND</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">year</span><span class=\"p\">,</span> <span class=\"n\">S_CITY</span><span class=\"p\">,</span> <span class=\"n\">P_BRAND</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../example_datasets/metrica/\"></a><a name=\"example_datasets/metrica/\"></a><a name=\"../../../../../example_datasets/metrica/\"></a><a name=\"getting_started/example_datasets/metrica/\"></a><a name=\"../../../example_datasets/metrica/\"></a><a name=\"../../../../../../example_datasets/metrica/\"></a><a name=\"../getting_started/example_datasets/metrica/\"></a><a name=\"metrica/\"></a><a name=\"../../../getting_started/example_datasets/metrica/\"></a><a name=\"../../../../../getting_started/example_datasets/metrica/\"></a><a name=\"../../getting_started/example_datasets/metrica/\"></a><a name=\"../../example_datasets/metrica/\"></a><a name=\"../../../../getting_started/example_datasets/metrica/\"></a><a name=\"../example_datasets/metrica/\"></a></p>\n<h2 id=\"anonymized-yandex-metrica-data\">Anonymized Yandex.Metrica Data<a class=\"headerlink\" href=\"#anonymized-yandex-metrica-data\" title=\"Permanent link\">&para;</a></h2>\n<p>Dataset consists of two tables containing anonymized data about hits (<code>hits_v1</code>) and visits (<code>visits_v1</code>) of Yandex.Metrica. Each of the tables can be downloaded as a compressed <code>tsv.xz</code> file or as prepared partitions. In addition to that, an extended version of the <code>hits</code> table containing 100 million rows is available as TSV at <code>https://clickhouse-datasets.s3.yandex.net/hits/tsv/hits_100m_obfuscated_v1.tsv.xz</code> and as prepared partitions at <code>https://clickhouse-datasets.s3.yandex.net/hits/partitions/hits_100m_obfuscated_v1.tar.xz</code>.</p>\n<h3 id=\"obtaining-tables-from-prepared-partitions\">Obtaining Tables from Prepared Partitions<a class=\"headerlink\" href=\"#obtaining-tables-from-prepared-partitions\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Download and import hits:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -O https://clickhouse-datasets.s3.yandex.net/hits/partitions/hits_v1.tar\n$ tar xvf hits_v1.tar -C /var/lib/clickhouse <span class=\"c1\"># path to ClickHouse data directory</span>\n$ <span class=\"c1\"># check permissions on unpacked data, fix if required</span>\n$ sudo service clickhouse-server restart\n$ clickhouse-client --query <span class=\"s2\">&quot;SELECT COUNT(*) FROM datasets.hits_v1&quot;</span>\n</code></pre></div>\n\n\n<p><strong>Download and import visits:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -O https://clickhouse-datasets.s3.yandex.net/visits/partitions/visits_v1.tar\n$ tar xvf visits_v1.tar -C /var/lib/clickhouse <span class=\"c1\"># path to ClickHouse data directory</span>\n$ <span class=\"c1\"># check permissions on unpacked data, fix if required</span>\n$ sudo service clickhouse-server restart\n$ clickhouse-client --query <span class=\"s2\">&quot;SELECT COUNT(*) FROM datasets.visits_v1&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"obtaining-tables-from-compressed-tsv-file\">Obtaining Tables from Compressed tsv-file<a class=\"headerlink\" href=\"#obtaining-tables-from-compressed-tsv-file\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Download and import hits from compressed tsv-file</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl https://clickhouse-datasets.s3.yandex.net/hits/tsv/hits_v1.tsv.xz <span class=\"p\">|</span> unxz --threads<span class=\"o\">=</span><span class=\"sb\">`</span>nproc<span class=\"sb\">`</span> &gt; hits_v1.tsv \n$ <span class=\"c1\"># now create table</span>\n$ clickhouse-client --query <span class=\"s2\">&quot;CREATE DATABASE IF NOT EXISTS datasets&quot;</span>\n$ clickhouse-client --query <span class=\"s2\">&quot;CREATE TABLE datasets.hits_v1 ( WatchID UInt64,  JavaEnable UInt8,  Title String,  GoodEvent Int16,  EventTime DateTime,  EventDate Date,  CounterID UInt32,  ClientIP UInt32,  ClientIP6 FixedString(16),  RegionID UInt32,  UserID UInt64,  CounterClass Int8,  OS UInt8,  UserAgent UInt8,  URL String,  Referer String,  URLDomain String,  RefererDomain String,  Refresh UInt8,  IsRobot UInt8,  RefererCategories Array(UInt16),  URLCategories Array(UInt16), URLRegions Array(UInt32),  RefererRegions Array(UInt32),  ResolutionWidth UInt16,  ResolutionHeight UInt16,  ResolutionDepth UInt8,  FlashMajor UInt8, FlashMinor UInt8,  FlashMinor2 String,  NetMajor UInt8,  NetMinor UInt8, UserAgentMajor UInt16,  UserAgentMinor FixedString(2),  CookieEnable UInt8, JavascriptEnable UInt8,  IsMobile UInt8,  MobilePhone UInt8,  MobilePhoneModel String,  Params String,  IPNetworkID UInt32,  TraficSourceID Int8, SearchEngineID UInt16,  SearchPhrase String,  AdvEngineID UInt8,  IsArtifical UInt8,  WindowClientWidth UInt16,  WindowClientHeight UInt16,  ClientTimeZone Int16,  ClientEventTime DateTime,  SilverlightVersion1 UInt8, SilverlightVersion2 UInt8,  SilverlightVersion3 UInt32,  SilverlightVersion4 UInt16,  PageCharset String,  CodeVersion UInt32,  IsLink UInt8,  IsDownload UInt8,  IsNotBounce UInt8,  FUniqID UInt64,  HID UInt32,  IsOldCounter UInt8, IsEvent UInt8,  IsParameter UInt8,  DontCountHits UInt8,  WithHash UInt8, HitColor FixedString(1),  UTCEventTime DateTime,  Age UInt8,  Sex UInt8,  Income UInt8,  Interests UInt16,  Robotness UInt8,  GeneralInterests Array(UInt16), RemoteIP UInt32,  RemoteIP6 FixedString(16),  WindowName Int32,  OpenerName Int32,  HistoryLength Int16,  BrowserLanguage FixedString(2),  BrowserCountry FixedString(2),  SocialNetwork String,  SocialAction String,  HTTPError UInt16, SendTiming Int32,  DNSTiming Int32,  ConnectTiming Int32,  ResponseStartTiming Int32,  ResponseEndTiming Int32,  FetchTiming Int32,  RedirectTiming Int32, DOMInteractiveTiming Int32,  DOMContentLoadedTiming Int32,  DOMCompleteTiming Int32,  LoadEventStartTiming Int32,  LoadEventEndTiming Int32, NSToDOMContentLoadedTiming Int32,  FirstPaintTiming Int32,  RedirectCount Int8, SocialSourceNetworkID UInt8,  SocialSourcePage String,  ParamPrice Int64, ParamOrderID String,  ParamCurrency FixedString(3),  ParamCurrencyID UInt16, GoalsReached Array(UInt32),  OpenstatServiceName String,  OpenstatCampaignID String,  OpenstatAdID String,  OpenstatSourceID String,  UTMSource String, UTMMedium String,  UTMCampaign String,  UTMContent String,  UTMTerm String, FromTag String,  HasGCLID UInt8,  RefererHash UInt64,  URLHash UInt64,  CLID UInt32,  YCLID UInt64,  ShareService String,  ShareURL String,  ShareTitle String,  ParsedParams Nested(Key1 String,  Key2 String, Key3 String, Key4 String, Key5 String,  ValueDouble Float64),  IslandID FixedString(16),  RequestNum UInt32,  RequestTry UInt8) ENGINE = MergeTree() PARTITION BY toYYYYMM(EventDate) ORDER BY (CounterID, EventDate, intHash32(UserID)) SAMPLE BY intHash32(UserID) SETTINGS index_granularity = 8192&quot;</span>\n$ <span class=\"c1\"># import data</span>\n$ cat hits_v1.tsv <span class=\"p\">|</span> clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO datasets.hits_v1 FORMAT TSV&quot;</span> --max_insert_block_size<span class=\"o\">=</span><span class=\"m\">100000</span>\n$ <span class=\"c1\"># optionally you can optimize table</span>\n$ clickhouse-client --query <span class=\"s2\">&quot;OPTIMIZE TABLE datasets.hits_v1 FINAL&quot;</span>\n$ clickhouse-client --query <span class=\"s2\">&quot;SELECT COUNT(*) FROM datasets.hits_v1&quot;</span>\n</code></pre></div>\n\n\n<p><strong>Download and import visits from compressed tsv-file</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl https://clickhouse-datasets.s3.yandex.net/visits/tsv/visits_v1.tsv.xz <span class=\"p\">|</span> unxz --threads<span class=\"o\">=</span><span class=\"sb\">`</span>nproc<span class=\"sb\">`</span> &gt; visits_v1.tsv \n$ <span class=\"c1\"># now create table</span>\n$ clickhouse-client --query <span class=\"s2\">&quot;CREATE DATABASE IF NOT EXISTS datasets&quot;</span>\n$ clickhouse-client --query <span class=\"s2\">&quot;CREATE TABLE datasets.visits_v1 ( CounterID UInt32,  StartDate Date,  Sign Int8,  IsNew UInt8,  VisitID UInt64,  UserID UInt64,  StartTime DateTime,  Duration UInt32,  UTCStartTime DateTime,  PageViews Int32,  Hits Int32,  IsBounce UInt8,  Referer String,  StartURL String,  RefererDomain String,  StartURLDomain String,  EndURL String,  LinkURL String,  IsDownload UInt8,  TraficSourceID Int8,  SearchEngineID UInt16,  SearchPhrase String,  AdvEngineID UInt8,  PlaceID Int32,  RefererCategories Array(UInt16),  URLCategories Array(UInt16),  URLRegions Array(UInt32),  RefererRegions Array(UInt32),  IsYandex UInt8,  GoalReachesDepth Int32,  GoalReachesURL Int32,  GoalReachesAny Int32,  SocialSourceNetworkID UInt8,  SocialSourcePage String,  MobilePhoneModel String,  ClientEventTime DateTime,  RegionID UInt32,  ClientIP UInt32,  ClientIP6 FixedString(16),  RemoteIP UInt32,  RemoteIP6 FixedString(16),  IPNetworkID UInt32,  SilverlightVersion3 UInt32,  CodeVersion UInt32,  ResolutionWidth UInt16,  ResolutionHeight UInt16,  UserAgentMajor UInt16,  UserAgentMinor UInt16,  WindowClientWidth UInt16,  WindowClientHeight UInt16,  SilverlightVersion2 UInt8,  SilverlightVersion4 UInt16,  FlashVersion3 UInt16,  FlashVersion4 UInt16,  ClientTimeZone Int16,  OS UInt8,  UserAgent UInt8,  ResolutionDepth UInt8,  FlashMajor UInt8,  FlashMinor UInt8,  NetMajor UInt8,  NetMinor UInt8,  MobilePhone UInt8,  SilverlightVersion1 UInt8,  Age UInt8,  Sex UInt8,  Income UInt8,  JavaEnable UInt8,  CookieEnable UInt8,  JavascriptEnable UInt8,  IsMobile UInt8,  BrowserLanguage UInt16,  BrowserCountry UInt16,  Interests UInt16,  Robotness UInt8,  GeneralInterests Array(UInt16),  Params Array(String),  Goals Nested(ID UInt32, Serial UInt32, EventTime DateTime,  Price Int64,  OrderID String, CurrencyID UInt32),  WatchIDs Array(UInt64),  ParamSumPrice Int64,  ParamCurrency FixedString(3),  ParamCurrencyID UInt16,  ClickLogID UInt64,  ClickEventID Int32,  ClickGoodEvent Int32,  ClickEventTime DateTime,  ClickPriorityID Int32,  ClickPhraseID Int32,  ClickPageID Int32,  ClickPlaceID Int32,  ClickTypeID Int32,  ClickResourceID Int32,  ClickCost UInt32,  ClickClientIP UInt32,  ClickDomainID UInt32,  ClickURL String,  ClickAttempt UInt8,  ClickOrde");
            
            document.write("rID UInt32,  ClickBannerID UInt32,  ClickMarketCategoryID UInt32,  ClickMarketPP UInt32,  ClickMarketCategoryName String,  ClickMarketPPName String,  ClickAWAPSCampaignName String,  ClickPageName String,  ClickTargetType UInt16,  ClickTargetPhraseID UInt64,  ClickContextType UInt8,  ClickSelectType Int8,  ClickOptions String,  ClickGroupBannerID Int32,  OpenstatServiceName String,  OpenstatCampaignID String,  OpenstatAdID String,  OpenstatSourceID String,  UTMSource String,  UTMMedium String,  UTMCampaign String,  UTMContent String,  UTMTerm String,  FromTag String,  HasGCLID UInt8,  FirstVisit DateTime,  PredLastVisit Date,  LastVisit Date,  TotalVisits UInt32,  TraficSource    Nested(ID Int8,  SearchEngineID UInt16, AdvEngineID UInt8, PlaceID UInt16, SocialSourceNetworkID UInt8, Domain String, SearchPhrase String, SocialSourcePage String),  Attendance FixedString(16),  CLID UInt32,  YCLID UInt64,  NormalizedRefererHash UInt64,  SearchPhraseHash UInt64,  RefererDomainHash UInt64,  NormalizedStartURLHash UInt64,  StartURLDomainHash UInt64,  NormalizedEndURLHash UInt64,  TopLevelDomain UInt64,  URLScheme UInt64,  OpenstatServiceNameHash UInt64,  OpenstatCampaignIDHash UInt64,  OpenstatAdIDHash UInt64,  OpenstatSourceIDHash UInt64,  UTMSourceHash UInt64,  UTMMediumHash UInt64,  UTMCampaignHash UInt64,  UTMContentHash UInt64,  UTMTermHash UInt64,  FromHash UInt64,  WebVisorEnabled UInt8,  WebVisorActivity UInt32,  ParsedParams    Nested(Key1 String,  Key2 String,  Key3 String,  Key4 String, Key5 String, ValueDouble    Float64),  Market Nested(Type UInt8, GoalID UInt32, OrderID String,  OrderPrice Int64,  PP UInt32,  DirectPlaceID UInt32,  DirectOrderID  UInt32,  DirectBannerID UInt32,  GoodID String, GoodName String, GoodQuantity Int32,  GoodPrice Int64),  IslandID FixedString(16)) ENGINE = CollapsingMergeTree(StartDate, intHash32(UserID), (CounterID, StartDate, intHash32(UserID), VisitID), 8192, Sign)&quot;</span>\n$ <span class=\"c1\"># import data</span>\n$ cat visits_v1.tsv <span class=\"p\">|</span> clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO datasets.visits_v1 FORMAT TSV&quot;</span> --max_insert_block_size<span class=\"o\">=</span><span class=\"m\">100000</span>\n$ <span class=\"c1\"># optionally you can optimize table</span>\n$ clickhouse-client --query <span class=\"s2\">&quot;OPTIMIZE TABLE datasets.visits_v1 FINAL&quot;</span>\n$ clickhouse-client --query <span class=\"s2\">&quot;SELECT COUNT(*) FROM datasets.visits_v1&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"queries_1\">Queries<a class=\"headerlink\" href=\"#queries_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Examples of queries to these tables (they are named <code>test.hits</code> and <code>test.visits</code>) can be found among <a href=\"https://github.com/ClickHouse/ClickHouse/tree/master/dbms/tests/queries/1_stateful\" rel=\"external nofollow noreferrer\">stateful tests</a> and in some <a href=\"https://github.com/ClickHouse/ClickHouse/tree/master/dbms/tests/performance/test_hits\" rel=\"external nofollow noreferrer\">performance tests</a> of ClickHouse.<br />\n<a name=\"../../../interfaces/\"></a><a name=\"../../interfaces/\"></a><a name=\"interfaces/\"></a><a name=\"../../../../interfaces/\"></a><a name=\"../../../../../interfaces/\"></a><a name=\"../interfaces/\"></a></p>\n<h2 id=\"interfaces\">Interfaces<a class=\"headerlink\" href=\"#interfaces\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse provides two network interfaces (both can be optionally wrapped in TLS for additional security):</p>\n<ul>\n<li><a href=\"#http/\">HTTP</a>, which is documented and easy to use directly.</li>\n<li><a href=\"#tcp/\">Native TCP</a>, which has less overhead.</li>\n</ul>\n<p>In most cases it is recommended to use appropriate tool or library instead of interacting with those directly. Officially supported by Yandex are the following:</p>\n<ul>\n<li><a href=\"#cli/\">Command-line client</a></li>\n<li><a href=\"#jdbc/\">JDBC driver</a></li>\n<li><a href=\"#odbc/\">ODBC driver</a></li>\n</ul>\n<p>There are also a wide range of third-party libraries for working with ClickHouse:</p>\n<ul>\n<li><a href=\"#third-party/client_libraries/\">Client libraries</a></li>\n<li><a href=\"#third-party/integrations/\">Integrations</a></li>\n<li><a href=\"#third-party/gui/\">Visual interfaces</a></li>\n</ul>\n<p><a name=\"../../../interfaces/cli/\"></a><a name=\"../../../../../interfaces/cli/\"></a><a name=\"cli/\"></a><a name=\"interfaces/cli/\"></a><a name=\"../../interfaces/cli/\"></a><a name=\"../../../../interfaces/cli/\"></a><a name=\"../interfaces/cli/\"></a></p>\n<h2 id=\"command-line-client\">Command-line Client<a class=\"headerlink\" href=\"#command-line-client\" title=\"Permanent link\">&para;</a></h2>\n<p>To work from the command line, you can use <code>clickhouse-client</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client\nClickHouse client version <span class=\"m\">0</span>.0.26176.\nConnecting to localhost:9000.\nConnected to ClickHouse server version <span class=\"m\">0</span>.0.26176.\n\n:<span class=\"o\">)</span>\n</code></pre></div>\n\n\n<p>The client supports command-line options and configuration files. For more information, see \"<a href=\"#interfaces_cli_configuration\">Configuring</a>\".</p>\n<h3 id=\"cli_usage\">Usage<a class=\"headerlink\" href=\"#cli_usage\" title=\"Permanent link\">&para;</a></h3>\n<p>The client can be used in interactive and non-interactive (batch) mode.<br />\nTo use batch mode, specify the 'query' parameter, or send data to 'stdin' (it verifies that 'stdin' is not a terminal), or both.<br />\nSimilar to the HTTP interface, when using the 'query' parameter and sending data to 'stdin', the request is a concatenation of the 'query' parameter, a line feed, and the data in 'stdin'. This is convenient for large INSERT queries.</p>\n<p>Example of using the client to insert data:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> -ne <span class=\"s2\">&quot;1, &#39;some text&#39;, &#39;2016-08-14 00:00:00&#39;\\n2, &#39;some more text&#39;, &#39;2016-08-14 00:00:01&#39;&quot;</span> <span class=\"p\">|</span> clickhouse-client --database<span class=\"o\">=</span><span class=\"nb\">test</span> --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test FORMAT CSV&quot;</span><span class=\"p\">;</span>\n\n$ cat <span class=\"s\">&lt;&lt;_EOF | clickhouse-client --database=test --query=&quot;INSERT INTO test FORMAT CSV&quot;;</span>\n<span class=\"s\">3, &#39;some text&#39;, &#39;2016-08-14 00:00:00&#39;</span>\n<span class=\"s\">4, &#39;some more text&#39;, &#39;2016-08-14 00:00:01&#39;</span>\n<span class=\"s\">_EOF</span>\n\n$ cat file.csv <span class=\"p\">|</span> clickhouse-client --database<span class=\"o\">=</span><span class=\"nb\">test</span> --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test FORMAT CSV&quot;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>In batch mode, the default data format is TabSeparated. You can set the format in the FORMAT clause of the query.</p>\n<p>By default, you can only process a single query in batch mode. To make multiple queries from a \"script,\" use the --multiquery parameter. This works for all queries except INSERT. Query results are output consecutively without additional separators.<br />\nSimilarly, to process a large number of queries, you can run 'clickhouse-client' for each query. Note that it may take tens of milliseconds to launch the 'clickhouse-client' program.</p>\n<p>In interactive mode, you get a command line where you can enter queries.</p>\n<p>If 'multiline' is not specified (the default):To run the query, press Enter. The semicolon is not necessary at the end of the query. To enter a multiline query, enter a backslash <code>\\</code> before the line feed. After you press Enter, you will be asked to enter the next line of the query.</p>\n<p>If multiline is specified:To run a query, end it with a semicolon and press Enter. If the semicolon was omitted at the end of the entered line, you will be asked to enter the next line of the query.</p>\n<p>Only a single query is run, so everything after the semicolon is ignored.</p>\n<p>You can specify <code>\\G</code> instead of or after the semicolon. This indicates Vertical format. In this format, each value is printed on a separate line, which is convenient for wide tables. This unusual feature was added for compatibility with the MySQL CLI.</p>\n<p>The command line is based on 'readline' (and 'history' or 'libedit', or without a library, depending on the build). In other words, it uses the familiar keyboard shortcuts and keeps a history.<br />\nThe history is written to <code>~/.clickhouse-client-history</code>.</p>\n<p>By default, the format used is PrettyCompact. You can change the format in the FORMAT clause of the query, or by specifying <code>\\G</code> at the end of the query, using the <code>--format</code> or <code>--vertical</code> argument in the command line, or using the client configuration file.</p>\n<p>To exit the client, press Ctrl+D (or Ctrl+C), or enter one of the following instead of a query: \"exit\", \"quit\", \"logout\", \"exit;\", \"quit;\", \"logout;\", \"q\", \"Q\", \":q\"</p>\n<p>When processing a query, the client shows:</p>\n<ol>\n<li>Progress, which is updated no more than 10 times per second (by default). For quick queries, the progress might not have time to be displayed.</li>\n<li>The formatted query after parsing, for debugging.</li>\n<li>The result in the specified format.</li>\n<li>The number of lines in the result, the time passed, and the average speed of query processing.</li>\n</ol>\n<p>You can cancel a long query by pressing Ctrl+C. However, you will still need to wait a little for the server to abort the request. It is not possible to cancel a query at certain stages. If you don't wait and press Ctrl+C a second time, the client will exit.</p>\n<p>The command-line client allows passing external data (external temporary tables) for querying. For more information, see the section \"External data for query processing\".</p>\n<h4 id=\"cli-queries-with-parameters\">Queries with Parameters<a class=\"headerlink\" href=\"#cli-queries-with-parameters\" title=\"Permanent link\">&para;</a></h4>\n<p>You can create a query with parameters and pass values to them from client application. This allows to avoid formatting query with specific dynami");
            
            document.write("c values on client side. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client --param_parName<span class=\"o\">=</span><span class=\"s2\">&quot;[1, 2]&quot;</span>  -q <span class=\"s2\">&quot;SELECT * FROM table WHERE a = {parName:Array(UInt16)}&quot;</span>\n</code></pre></div>\n\n\n<h5 id=\"cli-queries-with-parameters-syntax\">Query Syntax<a class=\"headerlink\" href=\"#cli-queries-with-parameters-syntax\" title=\"Permanent link\">&para;</a></h5>\n<p>Format a query as usual, then place the values that you want to pass from the app parameters to the query in braces in the following format:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">{</span><span class=\"o\">&lt;</span><span class=\"n\">name</span><span class=\"o\">&gt;</span><span class=\"p\">:</span><span class=\"o\">&lt;</span><span class=\"k\">data</span> <span class=\"k\">type</span><span class=\"o\">&gt;</span><span class=\"err\">}</span>\n</code></pre></div>\n\n\n<ul>\n<li><code>name</code> \u2014 Placeholder identifier. In the console client it should be used in app parameters as <code>--param_&lt;name&gt; = value</code>.</li>\n<li><code>data type</code> \u2014 <a href=\"#../data_types/\">Data type</a> of the app parameter value. For example, a data structure like <code>(integer, ('string', integer))</code> can have the <code>Tuple(UInt8, Tuple(String, UInt8))</code> data type (you can also use another <a href=\"#../data_types/int_uint/\">integer</a> types).</li>\n</ul>\n<h5 id=\"example\">Example<a class=\"headerlink\" href=\"#example\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client --param_tuple_in_tuple<span class=\"o\">=</span><span class=\"s2\">&quot;(10, (&#39;dt&#39;, 10))&quot;</span> -q <span class=\"s2\">&quot;SELECT * FROM table WHERE val = {tuple_in_tuple:Tuple(UInt8, Tuple(String, UInt8))}&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"interfaces_cli_configuration\">Configuring<a class=\"headerlink\" href=\"#interfaces_cli_configuration\" title=\"Permanent link\">&para;</a></h3>\n<p>You can pass parameters to <code>clickhouse-client</code> (all parameters have a default value) using:</p>\n<ul>\n<li>From the Command Line</li>\n</ul>\n<p>Command-line options override the default values and settings in configuration files.</p>\n<ul>\n<li>Configuration files.</li>\n</ul>\n<p>Settings in the configuration files override the default values.</p>\n<h4 id=\"command-line-options\">Command Line Options<a class=\"headerlink\" href=\"#command-line-options\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>--host, -h</code> -\u2013 The server name, 'localhost' by default. You can use either the name or the IPv4 or IPv6 address.</li>\n<li><code>--port</code> \u2013 The port to connect to. Default value: 9000. Note that the HTTP interface and the native interface use different ports.</li>\n<li><code>--user, -u</code> \u2013 The username. Default value: default.</li>\n<li><code>--password</code> \u2013 The password. Default value: empty string.</li>\n<li><code>--query, -q</code> \u2013 The query to process when using non-interactive mode.</li>\n<li><code>--database, -d</code> \u2013 Select the current default database. Default value: the current database from the server settings ('default' by default).</li>\n<li><code>--multiline, -m</code> \u2013 If specified, allow multiline queries (do not send the query on Enter).</li>\n<li><code>--multiquery, -n</code> \u2013 If specified, allow processing multiple queries separated by commas. Only works in non-interactive mode.</li>\n<li><code>--format, -f</code> \u2013 Use the specified default format to output the result.</li>\n<li><code>--vertical, -E</code> \u2013 If specified, use the Vertical format by default to output the result. This is the same as '--format=Vertical'. In this format, each value is printed on a separate line, which is helpful when displaying wide tables.</li>\n<li><code>--time, -t</code> \u2013 If specified, print the query execution time to 'stderr' in non-interactive mode.</li>\n<li><code>--stacktrace</code> \u2013 If specified, also print the stack trace if an exception occurs.</li>\n<li><code>--config-file</code> \u2013 The name of the configuration file.</li>\n<li><code>--secure</code> \u2013 If specified, will connect to server over secure connection.</li>\n<li><code>--param_&lt;name&gt;</code> \u2014 Value for a <a href=\"#cli-queries-with-parameters\">query with parameters</a>.</li>\n</ul>\n<h4 id=\"configuration-files\">Configuration Files<a class=\"headerlink\" href=\"#configuration-files\" title=\"Permanent link\">&para;</a></h4>\n<p><code>clickhouse-client</code> uses the first existing file of the following:</p>\n<ul>\n<li>Defined in the <code>-config-file</code> parameter.</li>\n<li><code>./clickhouse-client.xml</code></li>\n<li><code>~/.clickhouse-client/config.xml</code></li>\n<li><code>/etc/clickhouse-client/config.xml</code></li>\n</ul>\n<p>Example of a config file:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;config&gt;</span>\n    <span class=\"nt\">&lt;user&gt;</span>username<span class=\"nt\">&lt;/user&gt;</span>\n    <span class=\"nt\">&lt;password&gt;</span>password<span class=\"nt\">&lt;/password&gt;</span>\n    <span class=\"nt\">&lt;secure&gt;</span>False<span class=\"nt\">&lt;/secure&gt;</span>\n<span class=\"nt\">&lt;/config&gt;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../interfaces/tcp/\"></a><a name=\"../interfaces/tcp/\"></a><a name=\"interfaces/tcp/\"></a><a name=\"../../interfaces/tcp/\"></a><a name=\"../../../../../interfaces/tcp/\"></a><a name=\"tcp/\"></a><a name=\"../../../../interfaces/tcp/\"></a></p>\n<h2 id=\"native-interface-tcp\">Native Interface (TCP)<a class=\"headerlink\" href=\"#native-interface-tcp\" title=\"Permanent link\">&para;</a></h2>\n<p>The native protocol is used in the <a href=\"#cli/\">command-line client</a>, for interserver communication during distributed query processing, and also in other C++ programs. Unfortunately, native ClickHouse protocol does not have formal specification yet, but it can be reverse engineered from ClickHouse source code (starting <a href=\"https://github.com/ClickHouse/ClickHouse/tree/master/dbms/src/Client\" rel=\"external nofollow noreferrer\">around here</a>) and/or by intercepting and analyzing TCP traffic.</p>\n<p><a name=\"../../interfaces/http/\"></a><a name=\"../../../interfaces/http/\"></a><a name=\"../interfaces/http/\"></a><a name=\"interfaces/http/\"></a><a name=\"../../../../../interfaces/http/\"></a><a name=\"http/\"></a><a name=\"../../../../interfaces/http/\"></a></p>\n<h2 id=\"http_interface\">HTTP Interface<a class=\"headerlink\" href=\"#http_interface\" title=\"Permanent link\">&para;</a></h2>\n<p>The HTTP interface lets you use ClickHouse on any platform from any programming language. We use it for working from Java and Perl, as well as shell scripts. In other departments, the HTTP interface is used from Perl, Python, and Go. The HTTP interface is more limited than the native interface, but it has better compatibility.</p>\n<p>By default, clickhouse-server listens for HTTP on port 8123 (this can be changed in the config).<br />\nIf you make a GET / request without parameters, it returns the string \"Ok\" (with a line feed at the end). You can use this in health-check scripts.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span>\nOk.\n</code></pre></div>\n\n\n<p>Send the request as a URL 'query' parameter, or as a POST. Or send the beginning of the query in the 'query' parameter, and the rest in the POST (we'll explain later why this is necessary). The size of the URL is limited to 16 KB, so keep this in mind when sending large queries.</p>\n<p>If successful, you receive the 200 response code and the result in the response body.<br />\nIf an error occurs, you receive the 500 response code and an error description text in the response body.</p>\n<p>When using the GET method, 'readonly' is set. In other words, for queries that modify data, you can only use the POST method. You can send the query itself either in the POST body, or in the URL parameter.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT%201&#39;</span>\n<span class=\"m\">1</span>\n\n$ wget -O- -q <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT 1&#39;</span>\n<span class=\"m\">1</span>\n\n$ <span class=\"nb\">echo</span> -ne <span class=\"s1\">&#39;GET /?query=SELECT%201 HTTP/1.0\\r\\n\\r\\n&#39;</span> <span class=\"p\">|</span> nc localhost <span class=\"m\">8123</span>\nHTTP/1.0 <span class=\"m\">200</span> OK\nConnection: Close\nDate: Fri, <span class=\"m\">16</span> Nov <span class=\"m\">2012</span> <span class=\"m\">19</span>:21:50 GMT\n\n<span class=\"m\">1</span>\n</code></pre></div>\n\n\n<p>As you can see, curl is somewhat inconvenient in that spaces must be URL escaped.<br />\nAlthough wget escapes everything itself, we don't recommend using it because it doesn't work well over HTTP 1.1 when using keep-alive and Transfer-Encoding: chunked.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span> --data-binary @-\n<span class=\"m\">1</span>\n\n$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=&#39;</span> --data-binary @-\n<span class=\"m\">1</span>\n\n$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT&#39;</span> --data-binary @-\n<span class=\"m\">1</span>\n</code></pre></div>\n\n\n<p>If part of the query is sent in the parameter, and part in the POST, a line feed is inserted between these two data parts.<br />\nExample (this won't work):</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;ECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=SEL&#39;</span> --data-binary @-\nCode: <span class=\"m\">59</span>, e.displayText<span class=\"o\">()</span> <span class=\"o\">=</span> DB::Exception: Syntax error: failed at position <span class=\"m\">0</span>: SEL\nECT <span class=\"m\">1</span>\n, expected One of: SHOW TABLES, SHOW DATABASES, SELECT, ");
            
            document.write("INSERT, CREATE, ATTACH, RENAME, DROP, DETACH, USE, SET, OPTIMIZE., e.what<span class=\"o\">()</span> <span class=\"o\">=</span> DB::Exception\n</code></pre></div>\n\n\n<p>By default, data is returned in TabSeparated format (for more information, see the \"Formats\" section).<br />\nYou use the FORMAT clause of the query to request any other format.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1 FORMAT Pretty&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?&#39;</span> --data-binary @-\n\u250f\u2501\u2501\u2501\u2513\n\u2503 <span class=\"m\">1</span> \u2503\n\u2521\u2501\u2501\u2501\u2529\n\u2502 <span class=\"m\">1</span> \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The POST method of transmitting data is necessary for INSERT queries. In this case, you can write the beginning of the query in the URL parameter, and use POST to pass the data to insert. The data to insert could be, for example, a tab-separated dump from MySQL. In this way, the INSERT query replaces LOAD DATA LOCAL INFILE from MySQL.</p>\n<p>Examples: Creating a table:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;CREATE TABLE t (a UInt8) ENGINE = Memory&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span> --data-binary @-\n</code></pre></div>\n\n\n<p>Using the familiar INSERT query for data insertion:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;INSERT INTO t VALUES (1),(2),(3)&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span> --data-binary @-\n</code></pre></div>\n\n\n<p>Data can be sent separately from the query:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;(4),(5),(6)&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=INSERT%20INTO%20t%20VALUES&#39;</span> --data-binary @-\n</code></pre></div>\n\n\n<p>You can specify any data format. The 'Values' format is the same as what is used when writing INSERT INTO t VALUES:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;(7),(8),(9)&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=INSERT%20INTO%20t%20FORMAT%20Values&#39;</span> --data-binary @-\n</code></pre></div>\n\n\n<p>To insert data from a tab-separated dump, specify the corresponding format:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> -ne <span class=\"s1\">&#39;10\\n11\\n12\\n&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?query=INSERT%20INTO%20t%20FORMAT%20TabSeparated&#39;</span> --data-binary @-\n</code></pre></div>\n\n\n<p>Reading the table contents. Data is output in random order due to parallel query processing:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT%20a%20FROM%20t&#39;</span>\n<span class=\"m\">7</span>\n<span class=\"m\">8</span>\n<span class=\"m\">9</span>\n<span class=\"m\">10</span>\n<span class=\"m\">11</span>\n<span class=\"m\">12</span>\n<span class=\"m\">1</span>\n<span class=\"m\">2</span>\n<span class=\"m\">3</span>\n<span class=\"m\">4</span>\n<span class=\"m\">5</span>\n<span class=\"m\">6</span>\n</code></pre></div>\n\n\n<p>Deleting the table.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;DROP TABLE t&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span> --data-binary @-\n</code></pre></div>\n\n\n<p>For successful requests that don't return a data table, an empty response body is returned.</p>\n<p>You can use the internal ClickHouse compression format when transmitting data. The compressed data has a non-standard format, and you will need to use the special <code>clickhouse-compressor</code> program to work with it (it is installed with the <code>clickhouse-client</code> package). To increase the efficiency of data insertion, you can disable server-side checksum verification by using the <a href=\"#settings-http_native_compression_disable_checksumming_on_decompress\">http_native_compression_disable_checksumming_on_decompress</a> setting.</p>\n<p>If you specified <code>compress=1</code> in the URL, the server compresses the data it sends you.<br />\nIf you specified <code>decompress=1</code> in the URL, the server decompresses the same data that you pass in the <code>POST</code> method.</p>\n<p>You can also choose to use <a href=\"https://en.wikipedia.org/wiki/HTTP_compression\" rel=\"external nofollow noreferrer\">HTTP compression</a>. To send a compressed <code>POST</code> request, append the request header <code>Content-Encoding: compression_method</code>. In order for ClickHouse to compress the response, you must append <code>Accept-Encoding: compression_method</code>. ClickHouse supports <code>gzip</code>, <code>br</code>, and <code>deflate</code> <a href=\"https://en.wikipedia.org/wiki/HTTP_compression#Content-Encoding_tokens\" rel=\"external nofollow noreferrer\">compression methods</a>. To enable HTTP compression, you must use the ClickHouse <a href=\"#settings-enable_http_compression\">enable_http_compression</a> setting. You can configure the data compression level in the <a href=\"#settings-http_zlib_compression_level\">http_zlib_compression_level</a> setting for all the compression methods.</p>\n<p>You can use this to reduce network traffic when transmitting a large amount of data, or for creating dumps that are immediately compressed.</p>\n<p>Examples of sending data with compression:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">##Sending data to the server:</span>\n$ curl -vsS <span class=\"s2\">&quot;http://localhost:8123/?enable_http_compression=1&quot;</span> -d <span class=\"s1\">&#39;SELECT number FROM system.numbers LIMIT 10&#39;</span> -H <span class=\"s1\">&#39;Accept-Encoding: gzip&#39;</span>\n\n<span class=\"c1\">##Sending data to the client:</span>\n$ <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SELECT 1&quot;</span> <span class=\"p\">|</span> gzip -c <span class=\"p\">|</span> curl -sS --data-binary @- -H <span class=\"s1\">&#39;Content-Encoding: gzip&#39;</span> <span class=\"s1\">&#39;http://localhost:8123/&#39;</span>\n</code></pre></div>\n\n\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Some HTTP clients might decompress data from the server by default (with <code>gzip</code> and <code>deflate</code>) and you might get decompressed data even if you use the compression settings correctly.</p>\n</div>\n<p>You can use the 'database' URL parameter to specify the default database.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT number FROM numbers LIMIT 10&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?database=system&#39;</span> --data-binary @-\n<span class=\"m\">0</span>\n<span class=\"m\">1</span>\n<span class=\"m\">2</span>\n<span class=\"m\">3</span>\n<span class=\"m\">4</span>\n<span class=\"m\">5</span>\n<span class=\"m\">6</span>\n<span class=\"m\">7</span>\n<span class=\"m\">8</span>\n<span class=\"m\">9</span>\n</code></pre></div>\n\n\n<p>By default, the database that is registered in the server settings is used as the default database. By default, this is the database called 'default'. Alternatively, you can always specify the database using a dot before the table name.</p>\n<p>The username and password can be indicated in one of two ways:</p>\n<ol>\n<li>Using HTTP Basic Authentication. Example:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://user:password@localhost:8123/&#39;</span> -d @-\n</code></pre></div>\n\n\n<ol start=\"2\">\n<li>In the 'user' and 'password' URL parameters. Example:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT 1&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?user=user&amp;password=password&#39;</span> -d @-\n</code></pre></div>\n\n\n<p>If the user name is not specified, the <code>default</code> name is used. If the password is not specified, the empty password is used.<br />\nYou can also use the URL parameters to specify any settings for processing a single query, or entire profiles of settings. Example:<a href=\"http://localhost:8123/?profile=web&amp;max_rows_to_read=1000000000&amp;query=SELECT+1\">http://localhost:8123/?profile=web&amp;max_rows_to_read=1000000000&amp;query=SELECT+1</a></p>\n<p>For more information, see the [Settings][../operations/settings/index.md] section.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;SELECT number FROM system.numbers LIMIT 10&#39;</span> <span class=\"p\">|</span> curl <span class=\"s1\">&#39;http://localhost:8123/?&#39;</span> --data-binary @-\n<span class=\"m\">0</span>\n<span class=\"m\">1</span>\n<span class=\"m\">2</span>\n<span class=\"m\">3</span>\n<span class=\"m\">4</span>\n<span class=\"m\">5</span>\n<span class=\"m\">6</span>\n<span class=\"m\">7</span>\n<span class=\"m\">8</span>\n<span class=\"m\">9</span>\n</code></pre></div>\n\n\n<p>For information about other parameters, see the section \"SET\".</p>\n<p>Similarly, you can use ClickHouse sessions in the HTTP protocol. To do this, you need to add the <code>session_id</code> GET parameter to the request. You can use any string as the session ID. By default, the session is terminated after 60 seconds of inactivity. To change this timeout, modify the <code>default_session_timeout</code> setting in the server configuration, or add the <code>session_timeout</code> GET parameter to the request. To check the session status, use the <code>session_check=1</code> parameter. Only one query at a time can be executed within a single session.</p>\n<p>You can receive information about the progress of a query in <code>X-ClickHouse-Progress</code> response headers. To do this, enable <a href=\"#settings-send_progress_in_http_headers\">send_progress_in_http_headers</a>. Example o");
            
            document.write("f the header sequence:</p>\n<div class=\"codehilite\"><pre><span></span><code>X-ClickHouse-Progress: {&quot;read_rows&quot;:&quot;2752512&quot;,&quot;read_bytes&quot;:&quot;240570816&quot;,&quot;total_rows_to_read&quot;:&quot;8880128&quot;}\nX-ClickHouse-Progress: {&quot;read_rows&quot;:&quot;5439488&quot;,&quot;read_bytes&quot;:&quot;482285394&quot;,&quot;total_rows_to_read&quot;:&quot;8880128&quot;}\nX-ClickHouse-Progress: {&quot;read_rows&quot;:&quot;8783786&quot;,&quot;read_bytes&quot;:&quot;819092887&quot;,&quot;total_rows_to_read&quot;:&quot;8880128&quot;}\n</code></pre></div>\n\n\n<p>Possible header fields:</p>\n<ul>\n<li><code>read_rows</code> \u2014 Number of rows read.</li>\n<li><code>read_bytes</code> \u2014 Volume of data read in bytes.</li>\n<li><code>total_rows_to_read</code> \u2014 Total number of rows to be read.</li>\n<li><code>written_rows</code> \u2014 Number of rows written.</li>\n<li><code>written_bytes</code> \u2014 Volume of data written in bytes.</li>\n</ul>\n<p>Running requests don't stop automatically if the HTTP connection is lost. Parsing and data formatting are performed on the server side, and using the network might be ineffective.<br />\nThe optional 'query_id' parameter can be passed as the query ID (any string). For more information, see the section \"Settings, replace_running_query\".</p>\n<p>The optional 'quota_key' parameter can be passed as the quota key (any string). For more information, see the section \"Quotas\".</p>\n<p>The HTTP interface allows passing external data (external temporary tables) for querying. For more information, see the section \"External data for query processing\".</p>\n<h3 id=\"response-buffering\">Response Buffering<a class=\"headerlink\" href=\"#response-buffering\" title=\"Permanent link\">&para;</a></h3>\n<p>You can enable response buffering on the server side. The <code>buffer_size</code> and <code>wait_end_of_query</code> URL parameters are provided for this purpose.</p>\n<p><code>buffer_size</code> determines the number of bytes in the result to buffer in the server memory. If the result body is larger than this threshold, the buffer is written to the HTTP channel, and the remaining data is sent directly to the HTTP channel.</p>\n<p>To ensure that the entire response is buffered, set <code>wait_end_of_query=1</code>. In this case, the data that is not stored in memory will be buffered in a temporary server file.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -sS <span class=\"s1\">&#39;http://localhost:8123/?max_result_bytes=4000000&amp;buffer_size=3000000&amp;wait_end_of_query=1&#39;</span> -d <span class=\"s1\">&#39;SELECT toUInt8(number) FROM system.numbers LIMIT 9000000 FORMAT RowBinary&#39;</span>\n</code></pre></div>\n\n\n<p>Use buffering to avoid situations where a query processing error occurred after the response code and HTTP headers were sent to the client. In this situation, an error message is written at the end of the response body, and on the client side, the error can only be detected at the parsing stage.</p>\n<h4 id=\"cli-queries-with-parameters\">Queries with Parameters<a class=\"headerlink\" href=\"#cli-queries-with-parameters\" title=\"Permanent link\">&para;</a></h4>\n<p>You can create a query with parameters and pass values for them from the corresponding HTTP request parameters. For more information, see <a href=\"#cli-queries-with-parameters\">Queries with Parameters for CLI</a>.</p>\n<h4 id=\"example_1\">Example<a class=\"headerlink\" href=\"#example_1\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -sS <span class=\"s2\">&quot;&lt;address&gt;?param_id=2&amp;param_phrase=test&quot;</span> -d <span class=\"s2\">&quot;SELECT * FROM table WHERE int_column = {id:UInt8} and string_column = {phrase:String}&quot;</span>\n</code></pre></div>\n\n\n<p><a name=\"../interfaces/formats/\"></a><a name=\"interfaces/formats/\"></a><a name=\"../../../../../interfaces/formats/\"></a><a name=\"formats/\"></a><a name=\"../../../../interfaces/formats/\"></a><a name=\"../../interfaces/formats/\"></a><a name=\"../../../interfaces/formats/\"></a></p>\n<h2 id=\"formats\">Formats for Input and Output Data<a class=\"headerlink\" href=\"#formats\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse can accept and return data in various formats. A format supported for input can be used to parse the data provided to <code>INSERT</code>s, to perform <code>SELECT</code>s from a file-backed table such as File, URL or HDFS, or to read an external dictionary. A format supported for output can be used to arrange the<br />\nresults of a <code>SELECT</code>, and to perform <code>INSERT</code>s into a file-backed table.</p>\n<p>The supported formats are:</p>\n<table>\n<thead>\n<tr>\n<th>Format</th>\n<th>Input</th>\n<th>Output</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"#tabseparated\">TabSeparated</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#tabseparatedraw\">TabSeparatedRaw</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#tabseparatedwithnames\">TabSeparatedWithNames</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#tabseparatedwithnamesandtypes\">TabSeparatedWithNamesAndTypes</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#format-template\">Template</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#templateignorespaces\">TemplateIgnoreSpaces</a></td>\n<td>\u2714</td>\n<td>\u2717</td>\n</tr>\n<tr>\n<td><a href=\"#csv\">CSV</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#csvwithnames\">CSVWithNames</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#data-format-values\">Values</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#vertical\">Vertical</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#json\">JSON</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#jsoncompact\">JSONCompact</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#jsoneachrow\">JSONEachRow</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#tskv\">TSKV</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#pretty\">Pretty</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#prettycompact\">PrettyCompact</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#prettycompactmonoblock\">PrettyCompactMonoBlock</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#prettynoescapes\">PrettyNoEscapes</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#prettyspace\">PrettySpace</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#protobuf\">Protobuf</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#data-format-parquet\">Parquet</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#rowbinary\">RowBinary</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#rowbinarywithnamesandtypes\">RowBinaryWithNamesAndTypes</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#native\">Native</a></td>\n<td>\u2714</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#null\">Null</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#xml\">XML</a></td>\n<td>\u2717</td>\n<td>\u2714</td>\n</tr>\n<tr>\n<td><a href=\"#capnproto\">CapnProto</a></td>\n<td>\u2714</td>\n<td>\u2717</td>\n</tr>\n</tbody>\n</table>\n<p>You can control some format processing parameters with the ClickHouse settings. For more information read the <a href=\"#../operations/settings/settings/\">Settings</a> section.</p>\n<h3 id=\"tabseparated\">TabSeparated<a class=\"headerlink\" href=\"#tabseparated\" title=\"Permanent link\">&para;</a></h3>\n<p>In TabSeparated format, data is written by row. Each row contains values separated by tabs. Each value is follow by a tab, except the last value in the row, which is followed by a line feed. Strictly Unix line feeds are assumed everywhere. The last row also must contain a line feed at the end. Values are written in text format, without enclosing quotation marks, and with special characters escaped.</p>\n<p>This format is also available under the name <code>TSV</code>.</p>\n<p>The <code>TabSeparated</code> format is convenient for processing data using custom programs and scripts. It is used by default in the HTTP interface, and in the command-line client's batch mode. This format also allows transferring data between different DBMSs. For example, you can get a dump from MySQL and upload it to ClickHouse, or vice versa.</p>\n<p>The <code>TabSeparated</code> format supports outputting total values (when using WITH TOTALS) and extreme values (when 'extremes' is set to 1). In these cases, the total values and extremes are output after the main data. The main result, total values, and extremes are separated from each other by an empty line. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"k\">WITH</span> <span class=\"n\">TOTALS</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"n\">FORMAT</span> <span class=\"n\">TabSeparated</span><span class=\"o\">``</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>2014-03-17      1406958\n2014-03-18      1383658\n2014-03-19      1405797\n2014-03-20      1353623\n2014-03-21      1245779\n2014-03-22      1031592\n2014-03-23      1046491\n\n0000-00-00      8873898\n\n2014-03-17      1031592\n2014-03-23      1406958\n</code></pre></div>\n\n\n<h4 id=\"data-formatting\">Data Formatting<a class=\"headerlink\" href=\"#data-formatting\" title=\"Permanent link\">&para;</a></h4>\n<p>Integer numbers are written in decimal form. Numbers can contain an extra \"+\" character at the beginning (ignored when parsing, and not recorded when formatting). Non-negative numbers can't contain the negative sign. When reading, it is allowed to parse an empty string as a zero, or (for signed types) a string consisting of just a minus sign as a zero. Numbers that do not fit into the corresponding data type may be parsed as a different number, without an error message.</p>\n<p>Floating-point numbers are written in decimal form. The dot is used as the decimal separator. Exponential entries are supported, as are 'inf', '+inf', '-inf', a");
            
            document.write("nd 'nan'. An entry of floating-point numbers may begin or end with a decimal point.<br />\nDuring formatting, accuracy may be lost on floating-point numbers.<br />\nDuring parsing, it is not strictly required to read the nearest machine-representable number.</p>\n<p>Dates are written in YYYY-MM-DD format and parsed in the same format, but with any characters as separators.<br />\nDates with times are written in the format YYYY-MM-DD hh:mm:ss and parsed in the same format, but with any characters as separators.<br />\nThis all occurs in the system time zone at the time the client or server starts (depending on which one formats data). For dates with times, daylight saving time is not specified. So if a dump has times during daylight saving time, the dump does not unequivocally match the data, and parsing will select one of the two times.<br />\nDuring a read operation, incorrect dates and dates with times can be parsed with natural overflow or as null dates and times, without an error message.</p>\n<p>As an exception, parsing dates with times is also supported in Unix timestamp format, if it consists of exactly 10 decimal digits. The result is not time zone-dependent. The formats YYYY-MM-DD hh:mm:ss and NNNNNNNNNN are differentiated automatically.</p>\n<p>Strings are output with backslash-escaped special characters. The following escape sequences are used for output: <code>\\b</code>, <code>\\f</code>, <code>\\r</code>, <code>\\n</code>, <code>\\t</code>, <code>\\0</code>, <code>\\'</code>, <code>\\\\</code>. Parsing also supports the sequences <code>\\a</code>, <code>\\v</code>, and <code>\\xHH</code> (hex escape sequences) and any <code>\\c</code> sequences, where <code>c</code> is any character (these sequences are converted to <code>c</code>). Thus, reading data supports formats where a line feed can be written as <code>\\n</code> or <code>\\</code>, or as a line feed. For example, the string <code>Hello world</code> with a line feed between the words instead of a space can be parsed in any of the following variations:</p>\n<div class=\"codehilite\"><pre><span></span><code>Hello\\nworld\n\nHello\\\nworld\n</code></pre></div>\n\n\n<p>The second variant is supported because MySQL uses it when writing tab-separated dumps.</p>\n<p>The minimum set of characters that you need to escape when passing data in TabSeparated format: tab, line feed (LF) and backslash.</p>\n<p>Only a small set of symbols are escaped. You can easily stumble onto a string value that your terminal will ruin in output.</p>\n<p>Arrays are written as a list of comma-separated values in square brackets. Number items in the array are fomratted as normally, but dates, dates with times, and strings are written in single quotes with the same escaping rules as above.</p>\n<p><a href=\"#../query_language/syntax/\">NULL</a> is formatted as <code>\\N</code>.</p>\n<h3 id=\"tabseparatedraw\">TabSeparatedRaw<a class=\"headerlink\" href=\"#tabseparatedraw\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from <code>TabSeparated</code> format in that the rows are written without escaping.<br />\nThis format is only appropriate for outputting a query result, but not for parsing (retrieving data to insert in a table).</p>\n<p>This format is also available under the name <code>TSVRaw</code>.</p>\n<h3 id=\"tabseparatedwithnames\">TabSeparatedWithNames<a class=\"headerlink\" href=\"#tabseparatedwithnames\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from the <code>TabSeparated</code> format in that the column names are written in the first row.<br />\nDuring parsing, the first row is completely ignored. You can't use column names to determine their position or to check their correctness.<br />\n(Support for parsing the header row may be added in the future.)</p>\n<p>This format is also available under the name <code>TSVWithNames</code>.</p>\n<h3 id=\"tabseparatedwithnamesandtypes\">TabSeparatedWithNamesAndTypes<a class=\"headerlink\" href=\"#tabseparatedwithnamesandtypes\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from the <code>TabSeparated</code> format in that the column names are written to the first row, while the column types are in the second row.<br />\nDuring parsing, the first and second rows are completely ignored.</p>\n<p>This format is also available under the name <code>TSVWithNamesAndTypes</code>.</p>\n<h3 id=\"format-template\">Template<a class=\"headerlink\" href=\"#format-template\" title=\"Permanent link\">&para;</a></h3>\n<p>This format allows to specify a custom format string with placeholders for values with specified escaping rule.</p>\n<p>It uses settings <code>format_schema</code>, <code>format_schema_rows</code>, <code>format_schema_rows_between_delimiter</code> and some settings of other formats (e.g. <code>output_format_json_quote_64bit_integers</code> when using <code>JSON</code> escaping, see further)</p>\n<p>Format string <code>format_schema_rows</code> specifies rows format with the following syntax:</p>\n<p><code>delimiter_1${column_1:serializeAs_1}delimiter_2${column_2:serializeAs_2} ... delimiter_N</code>,</p>\n<p>where <code>delimiter_i</code> is a delimiter between values (<code>$</code> symbol can be escaped as <code>$$</code>), <br />\n<code>column_i</code> is a name of a column whose values are to be selected or inserted (if empty, then column will be skipped), <br />\n<code>serializeAs_i</code> is an escaping rule for the column values. The following escaping rules are supported:</p>\n<ul>\n<li><code>CSV</code>, <code>JSON</code>, <code>XML</code> (similarly to the formats of the same names)</li>\n<li><code>Escaped</code> (similarly to <code>TSV</code>)</li>\n<li><code>Quoted</code> (similarly to <code>Values</code>)</li>\n<li><code>Raw</code> (without escaping, similarly to <code>TSVRaw</code>)</li>\n<li><code>None</code> (no escaping rule, see further)</li>\n</ul>\n<p>If escaping rule is omitted, then<code>None</code> will be used. <code>XML</code> and <code>Raw</code> are suitable only for output.</p>\n<p>So, for the following format string:</p>\n<div class=\"codehilite\"><pre><span></span><code>`Search phrase: <span class=\"cp\">${</span><span class=\"n\">SearchPhrase</span><span class=\"p\">:</span><span class=\"n\">Quoted</span><span class=\"cp\">}</span>, count: <span class=\"cp\">${</span><span class=\"n\">c</span><span class=\"p\">:</span><span class=\"n\">Escaped</span><span class=\"cp\">}</span>, ad price: $$${price:JSON};`\n</code></pre></div>\n\n\n<p>the values of <code>SearchPhrase</code>, <code>c</code> and <code>price</code> columns, which are escaped as <code>Quoted</code>, <code>Escaped</code> and <code>JSON</code> will be printed (for select) or will be expected (for insert) between <code>Search phrase:</code>, <code>, count:</code>, <code>, ad price: $</code> and <code>;</code> delimiters respectively. For example:</p>\n<p><code>Search phrase: 'bathroom interior design', count: 2166, ad price: $3;</code></p>\n<p>The <code>format_schema_rows_between_delimiter</code> setting specifies delimiter between rows, which is printed (or expected) after every row except the last one (<code>\\n</code> by default)</p>\n<p>Format string <code>format_schema</code> has the same syntax as <code>format_schema_rows</code> and allows to specify a prefix, a suffix and a way to print some additional information. It contains the following placeholders instead of column names:</p>\n<ul>\n<li><code>data</code> is the rows with data in <code>format_schema_rows</code> format, separated by <code>format_schema_rows_between_delimiter</code>. This placeholder must be the first placeholder in the format string.</li>\n<li><code>totals</code> is the row with total values in <code>format_schema_rows</code> format (when using WITH TOTALS)</li>\n<li><code>min</code> is the row with minimum values in <code>format_schema_rows</code> format (when extremes is set to 1)</li>\n<li><code>max</code> is the row with maximum values in <code>format_schema_rows</code> format (when extremes is set to 1)</li>\n<li><code>rows</code> is the total number of output rows</li>\n<li><code>rows_before_limit</code> is the minimal number of rows there would have been without LIMIT. Output only if the query contains LIMIT. If the query contains GROUP BY, rows_before_limit_at_least is the exact number of rows there would have been without a LIMIT.</li>\n<li><code>time</code> is the request execution time in seconds</li>\n<li><code>rows_read</code> is the number of rows have been read</li>\n<li><code>bytes_read</code> is the number of bytes (uncompressed) have been read</li>\n</ul>\n<p>The placeholders <code>data</code>, <code>totals</code>, <code>min</code> and <code>max</code> must not have escaping rule specified (or <code>None</code> must be specified explicitly). The remaining placeholders may have any escaping rule specified.<br />\n If the <code>format_schema</code> setting is an empty string, <code>${data}</code> is used as default value.<br />\n  For insert queries format allows to skip some columns or some fields if prefix or suffix (see example).</p>\n<p><code>Select</code> example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">SearchPhrase</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">SearchPhrase</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span>\n<span class=\"n\">FORMAT</span> <span class=\"k\">Template</span> \n<span class=\"n\">SETTINGS</span> <span class=\"n\">format_schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&lt;!DOCTYPE HTML&gt;</span>\n<span class=\"s1\">&lt;html&gt; &lt;head&gt; &lt;title&gt;Search phrases&lt;/title&gt; &lt;/head&gt;</span>\n<span class=\"s1\"> &lt;body&gt;</span>\n<span class=\"s1\">  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Search phrases&lt;/caption&gt;</span>\n<span class=\"s1\">    &lt;tr&gt; &lt;th&gt;Search phrase&lt;/th&gt; &lt;th&gt;Count&lt;/th&gt; &lt;/tr&gt;</span>\n<span class=\"s1\">    ${data}</span>\n<span class=\"s1\">  &lt;/table&gt;</s");
            
            document.write("pan>\n<span class=\"s1\">  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Max&lt;/caption&gt;</span>\n<span class=\"s1\">    ${max}</span>\n<span class=\"s1\">  &lt;/table&gt;</span>\n<span class=\"s1\">  &lt;b&gt;Processed ${rows_read:XML} rows in ${time:XML} sec&lt;/b&gt;</span>\n<span class=\"s1\"> &lt;/body&gt;</span>\n<span class=\"s1\">&lt;/html&gt;&#39;</span><span class=\"p\">,</span>\n<span class=\"n\">format_schema_rows</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&lt;tr&gt; &lt;td&gt;${SearchPhrase:XML}&lt;/td&gt; &lt;td&gt;${\u0441:XML}&lt;/td&gt; &lt;/tr&gt;&#39;</span><span class=\"p\">,</span>\n<span class=\"n\">format_schema_rows_between_delimiter</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;\\n    &#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cp\">&lt;!DOCTYPE HTML&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>Search phrases<span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n <span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">table</span> <span class=\"na\">border</span><span class=\"o\">=</span><span class=\"s\">&quot;1&quot;</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">caption</span><span class=\"p\">&gt;</span>Search phrases<span class=\"p\">&lt;/</span><span class=\"nt\">caption</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Search phrase<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Count<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>8267016<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>bathroom interior design<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>2166<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>yandex<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>1655<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>spring 2014 fashion<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>1549<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>freeform photos<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>1480<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">table</span> <span class=\"na\">border</span><span class=\"o\">=</span><span class=\"s\">&quot;1&quot;</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">caption</span><span class=\"p\">&gt;</span>Max<span class=\"p\">&lt;/</span><span class=\"nt\">caption</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>8873898<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span> <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">b</span><span class=\"p\">&gt;</span>Processed 3095973 rows in 0.1569913 sec<span class=\"p\">&lt;/</span><span class=\"nt\">b</span><span class=\"p\">&gt;</span>\n <span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</code></pre></div>\n\n\n<p><code>Insert</code> example:</p>\n<div class=\"codehilite\"><pre><span></span><code>Some header\nPage views: 5, User id: 4324182021466249494, Useless field: hello, Duration: 146, Sign: -1\nPage views: 6, User id: 4324182021466249494, Useless field: world, Duration: 185, Sign: 1\nTotal rows: 2\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UserActivity</span> <span class=\"n\">FORMAT</span> <span class=\"k\">Template</span> <span class=\"n\">SETTINGS</span> \n<span class=\"n\">format_schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Some header\\n${data}\\nTotal rows: ${:CSV}\\n&#39;</span><span class=\"p\">,</span> \n<span class=\"n\">format_schema_rows</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Page views: ${PageViews:CSV}, User id: ${UserID:CSV}, Useless field: ${:CSV}, Duration: ${Duration:CSV}, Sign: ${Sign:CSV}&#39;</span>\n</code></pre></div>\n\n\n<p><code>PageViews</code>, <code>UserID</code>, <code>Duration</code> and <code>Sign</code> inside placeholders are names of columns in the table. Values after <code>Useless field</code> in rows and after <code>\\nTotal rows:</code> in suffix will be ignored.<br />\nAll delimiters in the input data must be strictly equal to delimiters in specified format strings.</p>\n<h3 id=\"templateignorespaces\">TemplateIgnoreSpaces<a class=\"headerlink\" href=\"#templateignorespaces\" title=\"Permanent link\">&para;</a></h3>\n<p>This format is suitable only for input.<br />\nSimilar to <code>Template</code>,  but skips whitespace characters between delimiters and values in the input stream. However, if format strings contain whitespace characters, these characters will be expected in the input stream. Also allows to specify empty placeholders (<code>${}</code> or <code>${:None}</code>) to split some delimiter into separate parts to ignore spaces between them. Such placeholders are used only for skipping whitespace characters. <br />\nIt's possible to read <code>JSON</code> using this format, if values of columns have the same order in all rows. For example, the following request can be used for inserting data from output example of format <a href=\"#json\">JSON</a>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"k\">table_name</span> <span class=\"n\">FORMAT</span> <span class=\"n\">TemplateIgnoreSpaces</span> <span class=\"n\">SETTINGS</span>\n<span class=\"n\">format_schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;{${}&quot;meta&quot;${}:${:JSON},${}&quot;data&quot;${}:${}[${data}]${},${}&quot;totals&quot;${}:${:JSON},${}&quot;extremes&quot;${}:${:JSON},${}&quot;rows&quot;${}:${:JSON},${}&quot;rows_before_limit_at_least&quot;${}:${:JSON}${}}&#39;</span><span class=\"p\">,</span>\n<span class=\"n\">format_schema_rows</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;{${}&quot;SearchPhrase&quot;${}:${}${phrase:JSON}${},${}&quot;c&quot;${}:${}${cnt:JSON}${}}&#39;</span><span class=\"p\">,</span>\n<span class=\"n\">format_schema_rows_between_delimiter</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;,&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"tskv\">TSKV<a class=\"headerlink\" href=\"#tskv\" title=\"Permanent link\">&para;</a></h3>\n<p>Similar to TabSeparated, but outputs a value in name=value format. Names are escaped the same way as in TabSeparated format, and the = symbol is also escaped.</p>\n<div class=\"codehilite\"><pre><span></span><code>SearchPhrase=   count()=8267016\nSearchPhrase=bathroom interior design    count()=2166\nSearchPhrase=yandex     count()=1655\nSearchPhrase=2014 spring fashion    count()=1549\nSearchPhrase=freeform photos       count()=1480\nSearchPhrase=angelina jolie    count()=1245\nSearchPhrase=omsk       count()=1112\nSearchPhrase=photos of dog breeds    count()=1091\nSearchPhrase=curtain designs        count()=1064\nSearchPhrase=baku       count()=1000\n</code></pre></div>\n\n\n<p><a href=\"#../query_language/syntax/\">NULL</a> is formatted as <code>\\N</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SEL");
            
            document.write("ECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"n\">FORMAT</span> <span class=\"n\">TSKV</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>x=1 y=\\N\n</code></pre></div>\n\n\n<p>When there is a large number of small columns, this format is ineffective, and there is generally no reason to use it. Nevertheless, it is no worse than JSONEachRow in terms of efficiency.</p>\n<p>Both data output and parsing are supported in this format. For parsing, any order is supported for the values of different columns. It is acceptable for some values to be omitted \u2013 they are treated as equal to their default values. In this case, zeros and blank rows are used as default values. Complex values that could be specified in the table are not supported as defaults.</p>\n<p>Parsing allows the presence of the additional field <code>tskv</code> without the equal sign or a value. This field is ignored.</p>\n<h3 id=\"csv\">CSV<a class=\"headerlink\" href=\"#csv\" title=\"Permanent link\">&para;</a></h3>\n<p>Comma Separated Values format (<a href=\"https://tools.ietf.org/html/rfc4180\" rel=\"external nofollow noreferrer\">RFC</a>).</p>\n<p>When formatting, rows are enclosed in double quotes. A double quote inside a string is output as two double quotes in a row. There are no other rules for escaping characters. Date and date-time are enclosed in double quotes. Numbers are output without quotes. Values are separated by a delimiter character, which is <code>,</code> by default. The delimiter character is defined in the setting <a href=\"#settings-format_csv_delimiter\">format_csv_delimiter</a>. Rows are separated using the Unix line feed (LF). Arrays are serialized in CSV as follows: first the array is serialized to a string as in TabSeparated format, and then the resulting string is output to CSV in double quotes. Tuples in CSV format are serialized as separate columns (that is, their nesting in the tuple is lost).</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client --format_csv_delimiter<span class=\"o\">=</span><span class=\"s2\">&quot;|&quot;</span> --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test.csv FORMAT CSV&quot;</span> &lt; data.csv\n</code></pre></div>\n\n\n<p>&ast;By default, the delimiter is <code>,</code>. See the <a href=\"#settings-format_csv_delimiter\">format_csv_delimiter</a> setting for more information.</p>\n<p>When parsing, all values can be parsed either with or without quotes. Both double and single quotes are supported. Rows can also be arranged without quotes. In this case, they are parsed up to the delimiter character or line feed (CR or LF). In violation of the RFC, when parsing rows without quotes, the leading and trailing spaces and tabs are ignored. For the line feed, Unix (LF), Windows (CR LF) and Mac OS Classic (CR LF) types are all supported.</p>\n<p>Empty unquoted input values are replaced with default values for the respective columns, if<br />\n<a href=\"#session_settings-input_format_defaults_for_omitted_fields\">input_format_defaults_for_omitted_fields</a><br />\nis enabled.</p>\n<p><code>NULL</code> is formatted as <code>\\N</code> or <code>NULL</code> or an empty unquoted string (see settings <a href=\"#settings-input_format_csv_unquoted_null_literal_as_null\">input_format_csv_unquoted_null_literal_as_null</a> and <a href=\"#session_settings-input_format_defaults_for_omitted_fields\">input_format_defaults_for_omitted_fields</a>).</p>\n<p>The CSV format supports the output of totals and extremes the same way as <code>TabSeparated</code>.</p>\n<h3 id=\"csvwithnames\">CSVWithNames<a class=\"headerlink\" href=\"#csvwithnames\" title=\"Permanent link\">&para;</a></h3>\n<p>Also prints the header row, similar to <code>TabSeparatedWithNames</code>.</p>\n<h3 id=\"json\">JSON<a class=\"headerlink\" href=\"#json\" title=\"Permanent link\">&para;</a></h3>\n<p>Outputs data in JSON format. Besides data tables, it also outputs column names and types, along with some additional information: the total number of output rows, and the number of rows that could have been output if there weren't a LIMIT. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">SearchPhrase</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">SearchPhrase</span> <span class=\"k\">WITH</span> <span class=\"n\">TOTALS</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSON</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n        <span class=\"nt\">&quot;meta&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;SearchPhrase&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;String&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;c&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;UInt64&quot;</span>\n                <span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;data&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;8267016&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;bathroom interior design&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;2166&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;yandex&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1655&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;spring 2014 fashion&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1549&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;freeform photos&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1480&quot;</span>\n                <span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;totals&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;8873898&quot;</span>\n        <span class=\"p\">},</span>\n\n        <span class=\"nt\">&quot;extremes&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;min&quot;</span><span class=\"p\">:</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1480&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"nt\">&quot;max&quot;</span><span class=\"p\">:</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;c&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;8267016&quot;</span>\n                <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n\n        <span class=\"nt\">&quot;rows&quot;</span><span class=\"p\">:</span> <span class=\"mi\">5</span><span class=\"p\">,</span>\n\n        <span class=\"nt\">&quot;rows_before_limit_at_least&quot;</span><span class=\"p\">:</span> <span class=\"mi\">141137</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>The JSON is compatible with JavaScript. To ensure this, some characters are additionally escaped: the slash <code>/</code> is escaped as <code>\\/</code>; alternative line breaks <code>U+2028</code> and <code>U+2029</code>, which break some browsers, are escaped as <code>\\uXXXX</code>. ASCII control characters are escaped: backspace, form feed, line feed, carriage return, and horizontal tab are replaced with <code>\\b</code>, <code>\\f</code>, <code>\\n</code>, <code>\\r</code>, <code>\\t</code> , as well as the remaining bytes in the 00-1F range using <code>\\uXXXX</code> sequences. Invalid UTF-8 ");
            
            document.write("sequences are changed to the replacement character \ufffd so the output text will consist of valid UTF-8 sequences. For compatibility with JavaScript, Int64 and UInt64 integers are enclosed in double quotes by default. To remove the quotes, you can set the configuration parameter <a href=\"#session_settings-output_format_json_quote_64bit_integers\">output_format_json_quote_64bit_integers</a> to 0.</p>\n<p><code>rows</code> \u2013 The total number of output rows.</p>\n<p><code>rows_before_limit_at_least</code> The minimal number of rows there would have been without LIMIT. Output only if the query contains LIMIT.<br />\nIf the query contains GROUP BY, rows_before_limit_at_least is the exact number of rows there would have been without a LIMIT.</p>\n<p><code>totals</code> \u2013 Total values (when using WITH TOTALS).</p>\n<p><code>extremes</code> \u2013 Extreme values (when extremes is set to 1).</p>\n<p>This format is only appropriate for outputting a query result, but not for parsing (retrieving data to insert in a table).</p>\n<p>ClickHouse supports <a href=\"#../query_language/syntax/\">NULL</a>, which is displayed as <code>null</code> in the JSON output.</p>\n<p>See also the <a href=\"#jsoneachrow\">JSONEachRow</a> format.</p>\n<h3 id=\"jsoncompact\">JSONCompact<a class=\"headerlink\" href=\"#jsoncompact\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from JSON only in that data rows are output in arrays, not in objects.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n        <span class=\"nt\">&quot;meta&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;SearchPhrase&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;String&quot;</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;c&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;UInt64&quot;</span>\n                <span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;data&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">[</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;8267016&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;bathroom interior design&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;2166&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;yandex&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;1655&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;fashion trends spring 2014&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;1549&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">[</span><span class=\"s2\">&quot;freeform photo&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;1480&quot;</span><span class=\"p\">]</span>\n        <span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;totals&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"s2\">&quot;8873898&quot;</span><span class=\"p\">],</span>\n\n        <span class=\"nt\">&quot;extremes&quot;</span><span class=\"p\">:</span>\n        <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;min&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"s2\">&quot;1480&quot;</span><span class=\"p\">],</span>\n                <span class=\"nt\">&quot;max&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"s2\">&quot;8267016&quot;</span><span class=\"p\">]</span>\n        <span class=\"p\">},</span>\n\n        <span class=\"nt\">&quot;rows&quot;</span><span class=\"p\">:</span> <span class=\"mi\">5</span><span class=\"p\">,</span>\n\n        <span class=\"nt\">&quot;rows_before_limit_at_least&quot;</span><span class=\"p\">:</span> <span class=\"mi\">141137</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>This format is only appropriate for outputting a query result, but not for parsing (retrieving data to insert in a table).<br />\nSee also the <code>JSONEachRow</code> format.</p>\n<h3 id=\"jsoneachrow\">JSONEachRow<a class=\"headerlink\" href=\"#jsoneachrow\" title=\"Permanent link\">&para;</a></h3>\n<p>When using this format, ClickHouse outputs rows as separated, newline-delimited JSON objects, but the data as a whole is not valid JSON.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;curtain designs&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1064&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;baku&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;1000&quot;</span><span class=\"p\">}</span>\n<span class=\"p\">{</span><span class=\"nt\">&quot;SearchPhrase&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"nt\">&quot;count()&quot;</span><span class=\"p\">:</span><span class=\"s2\">&quot;8267016&quot;</span><span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>When inserting the data, you should provide a separate JSON object for each row.</p>\n<h4 id=\"inserting-data\">Inserting Data<a class=\"headerlink\" href=\"#inserting-data\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UserActivity</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSONEachRow</span> <span class=\"err\">{</span><span class=\"ss\">&quot;PageViews&quot;</span><span class=\"p\">:</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"ss\">&quot;UserID&quot;</span><span class=\"p\">:</span><span class=\"ss\">&quot;4324182021466249494&quot;</span><span class=\"p\">,</span> <span class=\"ss\">&quot;Duration&quot;</span><span class=\"p\">:</span><span class=\"mi\">146</span><span class=\"p\">,</span><span class=\"ss\">&quot;Sign&quot;</span><span class=\"p\">:</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"err\">}</span> <span class=\"err\">{</span><span class=\"ss\">&quot;UserID&quot;</span><span class=\"p\">:</span><span class=\"ss\">&quot;4324182021466249494&quot;</span><span class=\"p\">,</span><span class=\"ss\">&quot;PageViews&quot;</span><span class=\"p\">:</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"ss\">&quot;Duration&quot;</span><span class=\"p\">:</span><span class=\"mi\">185</span><span class=\"p\">,</span><span class=\"ss\">&quot;Sign&quot;</span><span class=\"p\">:</span><span class=\"mi\">1</span><span class=\"err\">}</span>\n</code></pre></div>\n\n\n<p>ClickHouse allows:</p>\n<ul>\n<li>Any order of key-value pairs in the object.</li>\n<li>Omitting some values.</li>\n</ul>\n<p>ClickHouse ignores spaces between elements and commas after the objects. You can pass all the objects in one line. You don't have to separate them with line breaks.</p>\n<p><strong>Omitted values processing</strong></p>\n<p>ClickHouse substitutes omitted values with the default values for the corresponding <a href=\"#../data_types/\">data types</a>.</p>\n<p>If <code>DEFAULT expr</code> is specified, ClickHouse uses different substitution rules depending on the <a href=\"#session_settings-input_format_defaults_for_omitted_fields\">input_format_defaults_for_omitted_fields</a> setting.</p>\n<p>Consider the following table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span> <span class=\"n\">example_table</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">x</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">a</span> <span class=\"k\">DEFAULT</span> <span class=\"n\">x</span> <span class=\"o\">*</span> <span class=\"mi\">2</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<ul>\n<li>If <code>input_format_defaults_for_omitted_fields = 0</code>, then the default value for <code>x</code> and <code>a</code> equals <code>0</code> (as the default value for the <code>UInt32</code> data type).</li>\n<li>If <code>input_format_defaults_for_omitted_fields = 1</code>, then the default value for <code>x</code> equals <code>0</code>, but the default value of <code>a</code> equals <code>x * 2</code>.</li>\n</ul>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Warning</p>\n<p>When inserting data with <code>insert_sample_with_metadata = 1</code>, ClickHouse consumes more computational resources, compared to insertion with <code>insert_sample_with_metadata = 0</code>.</p>\n</div>\n<h4 id=\"selecting-data\">Selecting Data<a class=\"headerlink\" href=\"#selecting-data\" title=\"Permanent link\">&para;</a></h4>\n<p>Consider the <code>UserActivity</code> table as an example:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The query <code>SELECT * FROM UserActivity FORMAT JSONEachRow</code> returns:</p>\n<div class=\"codehilite\"><pre><span></span><code>{&quot;UserID&quot;:&quot;4324182021466249494&quot;,&quot;PageViews&quot;");
            
            document.write(":5,&quot;Duration&quot;:146,&quot;Sign&quot;:-1}\n{&quot;UserID&quot;:&quot;4324182021466249494&quot;,&quot;PageViews&quot;:6,&quot;Duration&quot;:185,&quot;Sign&quot;:1}\n</code></pre></div>\n\n\n<p>Unlike the <a href=\"#json\">JSON</a> format, there is no substitution of invalid UTF-8 sequences. Values are escaped in the same way as for <code>JSON</code>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Any set of bytes can be output in the strings. Use the <code>JSONEachRow</code> format if you are sure that the data in the table can be formatted as JSON without losing any information.</p>\n</div>\n<h4 id=\"jsoneachrow-nested\">Usage of Nested Structures<a class=\"headerlink\" href=\"#jsoneachrow-nested\" title=\"Permanent link\">&para;</a></h4>\n<p>If you have a table with <a href=\"#../data_types/nested_data_structures/nested/\">Nested</a> data type columns, you can insert JSON data with the same structure. Enable this feature with the <a href=\"#settings-input_format_import_nested_json\">input_format_import_nested_json</a> setting.</p>\n<p>For example, consider the following table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">json_each_row_nested</span> <span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"n\">Nested</span> <span class=\"p\">(</span><span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">i</span> <span class=\"n\">Int32</span><span class=\"p\">)</span> <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span>\n</code></pre></div>\n\n\n<p>As you can see in the <code>Nested</code> data type description, ClickHouse treats each component of the nested structure as a separate column (<code>n.s</code> and <code>n.i</code> for our table). You can insert data in the following way:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">json_each_row_nested</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSONEachRow</span> <span class=\"err\">{</span><span class=\"ss\">&quot;n.s&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"ss\">&quot;abc&quot;</span><span class=\"p\">,</span> <span class=\"ss\">&quot;def&quot;</span><span class=\"p\">],</span> <span class=\"ss\">&quot;n.i&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">]</span><span class=\"err\">}</span>\n</code></pre></div>\n\n\n<p>To insert data as a hierarchical JSON object, set <a href=\"#settings-input_format_import_nested_json\">input_format_import_nested_json=1</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n    <span class=\"nt\">&quot;n&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">&quot;s&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;abc&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;def&quot;</span><span class=\"p\">],</span>\n        <span class=\"nt\">&quot;i&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>Without this setting, ClickHouse throws an exception.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">settings</span> <span class=\"k\">WHERE</span> <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;input_format_import_nested_json&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u2510\n\u2502 input_format_import_nested_json \u2502 0     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">json_each_row_nested</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSONEachRow</span> <span class=\"err\">{</span><span class=\"ss\">&quot;n&quot;</span><span class=\"p\">:</span> <span class=\"err\">{</span><span class=\"ss\">&quot;s&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"ss\">&quot;abc&quot;</span><span class=\"p\">,</span> <span class=\"ss\">&quot;def&quot;</span><span class=\"p\">],</span> <span class=\"ss\">&quot;i&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">]</span><span class=\"err\">}}</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Code: 117. DB::Exception: Unknown field found while parsing JSONEachRow format: n: (at row 1)\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">input_format_import_nested_json</span><span class=\"o\">=</span><span class=\"mi\">1</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">json_each_row_nested</span> <span class=\"n\">FORMAT</span> <span class=\"n\">JSONEachRow</span> <span class=\"err\">{</span><span class=\"ss\">&quot;n&quot;</span><span class=\"p\">:</span> <span class=\"err\">{</span><span class=\"ss\">&quot;s&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"ss\">&quot;abc&quot;</span><span class=\"p\">,</span> <span class=\"ss\">&quot;def&quot;</span><span class=\"p\">],</span> <span class=\"ss\">&quot;i&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">]</span><span class=\"err\">}}</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">json_each_row_nested</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500n.s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500n.i\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;abc&#39;,&#39;def&#39;] \u2502 [1,23] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"native\">Native<a class=\"headerlink\" href=\"#native\" title=\"Permanent link\">&para;</a></h3>\n<p>The most efficient format. Data is written and read by blocks in binary format. For each block, the number of rows, number of columns, column names and types, and parts of columns in this block are recorded one after another. In other words, this format is \"columnar\" \u2013 it doesn't convert columns to rows. This is the format used in the native interface for interaction between servers, for using the command-line client, and for C++ clients.</p>\n<p>You can use this format to quickly generate dumps that can only be read by the ClickHouse DBMS. It doesn't make sense to work with this format yourself.</p>\n<h3 id=\"null\">Null<a class=\"headerlink\" href=\"#null\" title=\"Permanent link\">&para;</a></h3>\n<p>Nothing is output. However, the query is processed, and when using the command-line client, data is transmitted to the client. This is used for tests, including productivity testing.<br />\nObviously, this format is only appropriate for output, not for parsing.</p>\n<h3 id=\"pretty\">Pretty<a class=\"headerlink\" href=\"#pretty\" title=\"Permanent link\">&para;</a></h3>\n<p>Outputs data as Unicode-art tables, also using ANSI-escape sequences for setting colors in the terminal.<br />\nA full grid of the table is drawn, and each row occupies two lines in the terminal.<br />\nEach result block is output as a separate table. This is necessary so that blocks can be output without buffering results (buffering would be necessary in order to pre-calculate the visible width of all the values).</p>\n<p><a href=\"#../query_language/syntax/\">NULL</a> is output as <code>\u1d3a\u1d41\u1d38\u1d38</code>.</p>\n<p>Example (shown for the <a href=\"#prettycompact\">PrettyCompact</a> format):</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510\n\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Rows are not escaped in Pretty* formats. Example is shown for the <a href=\"#prettycompact\">PrettyCompact</a> format:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"s1\">&#39;String with \\&#39;</span><span class=\"n\">quotes</span><span class=\"err\">\\</span><span class=\"s1\">&#39; and \\t character&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">Escaping_test</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500Escaping_test\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 String with &#39;quotes&#39; and   character \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>To avoid dumping too much data to the terminal, only the first 10,000 rows are printed. If the number of rows is greater than or equal to 10,000, the message \"Showed first 10 000\" is printed.<br />\nThis format is only appropriate for outputting a query result, but not for parsing (retrieving data to insert in a table).</p>\n<p>The Pretty format supports outputting total values (when using WITH TOTALS) and extremes (when 'extremes' is set to 1). In these cases, total values and extreme values are output after the main data, in separate tables. Example (shown for the <a href=\"#prettycompact\">PrettyCompact</a> format):</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"k\">WITH</span> <span class=\"n\">TOTALS</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">EventDate</span> <span class=\"n\">FORMAT</span> <span class=\"n\">PrettyCompact</span>\n</code></pre></");
            
            document.write("div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500EventDate\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510\n\u2502 2014-03-17 \u2502 1406958 \u2502\n\u2502 2014-03-18 \u2502 1383658 \u2502\n\u2502 2014-03-19 \u2502 1405797 \u2502\n\u2502 2014-03-20 \u2502 1353623 \u2502\n\u2502 2014-03-21 \u2502 1245779 \u2502\n\u2502 2014-03-22 \u2502 1031592 \u2502\n\u2502 2014-03-23 \u2502 1046491 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nTotals:\n\u250c\u2500\u2500EventDate\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510\n\u2502 0000-00-00 \u2502 8873898 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nExtremes:\n\u250c\u2500\u2500EventDate\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510\n\u2502 2014-03-17 \u2502 1031592 \u2502\n\u2502 2014-03-23 \u2502 1406958 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"prettycompact\">PrettyCompact<a class=\"headerlink\" href=\"#prettycompact\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from <a href=\"#pretty\">Pretty</a> in that the grid is drawn between rows and the result is more compact.<br />\nThis format is used by default in the command-line client in interactive mode.</p>\n<h3 id=\"prettycompactmonoblock\">PrettyCompactMonoBlock<a class=\"headerlink\" href=\"#prettycompactmonoblock\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from <a href=\"#prettycompact\">PrettyCompact</a> in that up to 10,000 rows are buffered, then output as a single table, not by blocks.</p>\n<h3 id=\"prettynoescapes\">PrettyNoEscapes<a class=\"headerlink\" href=\"#prettynoescapes\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from Pretty in that ANSI-escape sequences aren't used. This is necessary for displaying this format in a browser, as well as for using the 'watch' command-line utility.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ watch -n1 <span class=\"s2\">&quot;clickhouse-client --query=&#39;SELECT event, value FROM system.events FORMAT PrettyCompactNoEscapes&#39;&quot;</span>\n</code></pre></div>\n\n\n<p>You can use the HTTP interface for displaying in the browser.</p>\n<h4 id=\"prettycompactnoescapes\">PrettyCompactNoEscapes<a class=\"headerlink\" href=\"#prettycompactnoescapes\" title=\"Permanent link\">&para;</a></h4>\n<p>The same as the previous setting.</p>\n<h4 id=\"prettyspacenoescapes\">PrettySpaceNoEscapes<a class=\"headerlink\" href=\"#prettyspacenoescapes\" title=\"Permanent link\">&para;</a></h4>\n<p>The same as the previous setting.</p>\n<h3 id=\"prettyspace\">PrettySpace<a class=\"headerlink\" href=\"#prettyspace\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from <a href=\"#prettycompact\">PrettyCompact</a> in that whitespace (space characters) is used instead of the grid.</p>\n<h3 id=\"rowbinary\">RowBinary<a class=\"headerlink\" href=\"#rowbinary\" title=\"Permanent link\">&para;</a></h3>\n<p>Formats and parses data by row in binary format. Rows and values are listed consecutively, without separators.<br />\nThis format is less efficient than the Native format, since it is row-based.</p>\n<p>Integers use fixed-length little endian representation. For example, UInt64 uses 8 bytes.<br />\nDateTime is represented as UInt32 containing the Unix timestamp as the value.<br />\nDate is represented as a UInt16 object that contains the number of days since 1970-01-01 as the value.<br />\nString is represented as a varint length (unsigned <a href=\"https://en.wikipedia.org/wiki/LEB128\" rel=\"external nofollow noreferrer\">LEB128</a>), followed by the bytes of the string.<br />\nFixedString is represented simply as a sequence of bytes.</p>\n<p>Array is represented as a varint length (unsigned <a href=\"https://en.wikipedia.org/wiki/LEB128\" rel=\"external nofollow noreferrer\">LEB128</a>), followed by successive elements of the array.</p>\n<p>For <a href=\"#null-literal\">NULL</a> support, an additional byte containing 1 or 0 is added before each <a href=\"#../data_types/nullable/\">Nullable</a> value. If 1, then the value is <code>NULL</code> and this byte is interpreted as a separate value. If 0, the value after the byte is not <code>NULL</code>.</p>\n<h3 id=\"rowbinarywithnamesandtypes\">RowBinaryWithNamesAndTypes<a class=\"headerlink\" href=\"#rowbinarywithnamesandtypes\" title=\"Permanent link\">&para;</a></h3>\n<p>Similar to <a href=\"#rowbinary\">RowBinary</a>, but with added header:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/LEB128\" rel=\"external nofollow noreferrer\">LEB128</a>-encoded number of columns (N)</li>\n<li>N <code>String</code>s specifying column names</li>\n<li>N <code>String</code>s specifying column types</li>\n</ul>\n<h3 id=\"data-format-values\">Values<a class=\"headerlink\" href=\"#data-format-values\" title=\"Permanent link\">&para;</a></h3>\n<p>Prints every row in brackets. Rows are separated by commas. There is no comma after the last row. The values inside the brackets are also comma-separated. Numbers are output in decimal format without quotes. Arrays are output in square brackets. Strings, dates, and dates with times are output in quotes. Escaping rules and parsing are similar to the <a href=\"#tabseparated\">TabSeparated</a> format. During formatting, extra spaces aren't inserted, but during parsing, they are allowed and skipped (except for spaces inside array values, which are not allowed). <a href=\"#../query_language/syntax/\">NULL</a> is represented as <code>NULL</code>.</p>\n<p>The minimum set of characters that you need to escape when passing data in Values \u200b\u200bformat: single quotes and backslashes.</p>\n<p>This is the format that is used in <code>INSERT INTO t VALUES ...</code>, but you can also use it for formatting query results.</p>\n<h3 id=\"vertical\">Vertical<a class=\"headerlink\" href=\"#vertical\" title=\"Permanent link\">&para;</a></h3>\n<p>Prints each value on a separate line with the column name specified. This format is convenient for printing just one or a few rows, if each row consists of a large number of columns.</p>\n<p><a href=\"#../query_language/syntax/\">NULL</a> is output as <code>\u1d3a\u1d41\u1d38\u1d38</code>.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"n\">FORMAT</span> <span class=\"n\">Vertical</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Row 1:\n\u2500\u2500\u2500\u2500\u2500\u2500\nx: 1\ny: \u1d3a\u1d41\u1d38\u1d38\n</code></pre></div>\n\n\n<p>Rows are not escaped in Vertical format:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"s1\">&#39;string with \\&#39;</span><span class=\"n\">quotes</span><span class=\"err\">\\</span><span class=\"s1\">&#39; and \\t with some special \\n characters&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">test</span> <span class=\"n\">FORMAT</span> <span class=\"n\">Vertical</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Row 1:\n\u2500\u2500\u2500\u2500\u2500\u2500\ntest: string with &#39;quotes&#39; and   with some special\n characters\n</code></pre></div>\n\n\n<p>This format is only appropriate for outputting a query result, but not for parsing (retrieving data to insert in a table).</p>\n<h3 id=\"xml\">XML<a class=\"headerlink\" href=\"#xml\" title=\"Permanent link\">&para;</a></h3>\n<p>XML format is suitable only for output, not for parsing. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cp\">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt;</span>\n<span class=\"nt\">&lt;result&gt;</span>\n        <span class=\"nt\">&lt;meta&gt;</span>\n                <span class=\"nt\">&lt;columns&gt;</span>\n                        <span class=\"nt\">&lt;column&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>SearchPhrase<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n                        <span class=\"nt\">&lt;/column&gt;</span>\n                        <span class=\"nt\">&lt;column&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>count()<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>UInt64<span class=\"nt\">&lt;/type&gt;</span>\n                        <span class=\"nt\">&lt;/column&gt;</span>\n                <span class=\"nt\">&lt;/columns&gt;</span>\n        <span class=\"nt\">&lt;/meta&gt;</span>\n        <span class=\"nt\">&lt;data&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>8267016<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>bathroom interior design<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>2166<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>yandex<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1655<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>2014 spring fashion<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1549<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>freeform photos<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1480<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>angelina jolie<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1245<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>omsk<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1112<span class=\"nt\">&");
            
            document.write("lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>photos of dog breeds<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1091<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>curtain designs<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1064<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n                <span class=\"nt\">&lt;row&gt;</span>\n                        <span class=\"nt\">&lt;SearchPhrase&gt;</span>baku<span class=\"nt\">&lt;/SearchPhrase&gt;</span>\n                        <span class=\"nt\">&lt;field&gt;</span>1000<span class=\"nt\">&lt;/field&gt;</span>\n                <span class=\"nt\">&lt;/row&gt;</span>\n        <span class=\"nt\">&lt;/data&gt;</span>\n        <span class=\"nt\">&lt;rows&gt;</span>10<span class=\"nt\">&lt;/rows&gt;</span>\n        <span class=\"nt\">&lt;rows_before_limit_at_least&gt;</span>141137<span class=\"nt\">&lt;/rows_before_limit_at_least&gt;</span>\n<span class=\"nt\">&lt;/result&gt;</span>\n</code></pre></div>\n\n\n<p>If the column name does not have an acceptable format, just 'field' is used as the element name. In general, the XML structure follows the JSON structure.<br />\nJust as for JSON, invalid UTF-8 sequences are changed to the replacement character \ufffd so the output text will consist of valid UTF-8 sequences.</p>\n<p>In string values, the characters <code>&lt;</code> and <code>&amp;</code> are escaped as <code>&lt;</code> and <code>&amp;</code>.</p>\n<p>Arrays are output as <code>&lt;array&gt;&lt;elem&gt;Hello&lt;/elem&gt;&lt;elem&gt;World&lt;/elem&gt;...&lt;/array&gt;</code>,and tuples as <code>&lt;tuple&gt;&lt;elem&gt;Hello&lt;/elem&gt;&lt;elem&gt;World&lt;/elem&gt;...&lt;/tuple&gt;</code>.</p>\n<h3 id=\"capnproto\">CapnProto<a class=\"headerlink\" href=\"#capnproto\" title=\"Permanent link\">&para;</a></h3>\n<p>Cap'n Proto is a binary message format similar to Protocol Buffers and Thrift, but not like JSON or MessagePack.</p>\n<p>Cap'n Proto messages are strictly typed and not self-describing, meaning they need an external schema description. The schema is applied on the fly and cached for each query.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat capnproto_messages.bin <span class=\"p\">|</span> clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO test.hits FORMAT CapnProto SETTINGS format_schema=&#39;schema:Message&#39;&quot;</span>\n</code></pre></div>\n\n\n<p>Where <code>schema.capnp</code> looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">struct</span> <span class=\"n\">Message</span> {\n  <span class=\"n\">SearchPhrase</span> <span class=\"nd\">@0</span> <span class=\"nc\">:Text</span>;\n  <span class=\"n\">c</span> <span class=\"nd\">@1</span> <span class=\"nc\">:Uint64</span>;\n}\n</code></pre></div>\n\n\n<p>Deserialization is effective and usually doesn't increase the system load.</p>\n<p>See also <a href=\"#formatschema\">Format Schema</a>.</p>\n<h3 id=\"protobuf\">Protobuf<a class=\"headerlink\" href=\"#protobuf\" title=\"Permanent link\">&para;</a></h3>\n<p>Protobuf - is a <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"external nofollow noreferrer\">Protocol Buffers</a> format.</p>\n<p>This format requires an external format schema. The schema is cached between queries.<br />\nClickHouse supports both <code>proto2</code> and <code>proto3</code> syntaxes. Repeated/optional/required fields are supported.</p>\n<p>Usage examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"k\">table</span> <span class=\"n\">FORMAT</span> <span class=\"n\">Protobuf</span> <span class=\"n\">SETTINGS</span> <span class=\"n\">format_schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;schemafile:MessageType&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>cat protobuf_messages.bin <span class=\"p\">|</span> clickhouse-client --query <span class=\"s2\">&quot;INSERT INTO test.table FORMAT Protobuf SETTINGS format_schema=&#39;schemafile:MessageType&#39;&quot;</span>\n</code></pre></div>\n\n\n<p>where the file <code>schemafile.proto</code> looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">syntax</span> <span class=\"l\">= &quot;proto3&quot;</span>;\n\n<span class=\"n\">message</span> <span class=\"n\">MessageType</span> {\n  <span class=\"n\">string</span> <span class=\"n\">name</span> <span class=\"l\">= 1</span>;\n  <span class=\"n\">string</span> <span class=\"n\">surname</span> <span class=\"l\">= 2</span>;\n  <span class=\"n\">uint32</span> <span class=\"n\">birthDate</span> <span class=\"l\">= 3</span>;\n  <span class=\"n\">repeated</span> <span class=\"n\">string</span> <span class=\"n\">phoneNumbers</span> <span class=\"l\">= 4</span>;\n};\n</code></pre></div>\n\n\n<p>To find the correspondence between table columns and fields of Protocol Buffers' message type ClickHouse compares their names.<br />\nThis comparison is case-insensitive and the characters <code>_</code> (underscore) and <code>.</code> (dot) are considered as equal.<br />\nIf types of a column and a field of Protocol Buffers' message are different the necessary conversion is applied.</p>\n<p>Nested messages are supported. For example, for the field <code>z</code> in the following message type</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">message</span> <span class=\"n\">MessageType</span> {\n  <span class=\"n\">message</span> <span class=\"n\">XType</span> {\n    <span class=\"n\">message</span> <span class=\"n\">YType</span> {\n      <span class=\"n\">int32</span> <span class=\"n\">z</span>;\n    };\n    <span class=\"n\">repeated</span> <span class=\"n\">YType</span> <span class=\"n\">y</span>;\n  };\n  <span class=\"n\">XType</span> <span class=\"n\">x</span>;\n};\n</code></pre></div>\n\n\n<p>ClickHouse tries to find a column named <code>x.y.z</code> (or <code>x_y_z</code> or <code>X.y_Z</code> and so on).<br />\nNested messages are suitable to input or output a <a href=\"#../data_types/nested_data_structures/nested/\">nested data structures</a>.</p>\n<p>Default values defined in a protobuf schema like this</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">syntax</span> <span class=\"l\">= &quot;proto2&quot;</span>;\n\n<span class=\"n\">message</span> <span class=\"n\">MessageType</span> {\n  <span class=\"n\">optional</span> <span class=\"n\">int32</span> <span class=\"n\">result_per_page</span> <span class=\"l\">= 3 [default = 10]</span>;\n}\n</code></pre></div>\n\n\n<p>are not applied; the <a href=\"#create-default-values\">table defaults</a> are used instead of them.</p>\n<p>ClickHouse inputs and outputs protobuf messages in the <code>length-delimited</code> format.<br />\nIt means before every message should be written its length as a <a href=\"https://developers.google.com/protocol-buffers/docs/encoding#varints\" rel=\"external nofollow noreferrer\">varint</a>.<br />\nSee also <a href=\"https://cwiki.apache.org/confluence/display/GEODE/Delimiting+Protobuf+Messages\" rel=\"external nofollow noreferrer\">how to read/write length-delimited protobuf messages in popular languages</a>.</p>\n<h3 id=\"data-format-parquet\">Parquet<a class=\"headerlink\" href=\"#data-format-parquet\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"http://parquet.apache.org/\" rel=\"external nofollow noreferrer\">Apache Parquet</a> is a columnar storage format widespread in the Hadoop ecosystem. ClickHouse supports read and write operations for this format.</p>\n<h4 id=\"data-types-matching\">Data Types Matching<a class=\"headerlink\" href=\"#data-types-matching\" title=\"Permanent link\">&para;</a></h4>\n<p>The table below shows supported data types and how they match ClickHouse <a href=\"#../data_types/\">data types</a> in <code>INSERT</code> and <code>SELECT</code> queries.</p>\n<table>\n<thead>\n<tr>\n<th>Parquet data type (<code>INSERT</code>)</th>\n<th>ClickHouse data type</th>\n<th>Parquet data type (<code>SELECT</code>)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>UINT8</code>, <code>BOOL</code></td>\n<td><a href=\"#../data_types/int_uint/\">UInt8</a></td>\n<td><code>UINT8</code></td>\n</tr>\n<tr>\n<td><code>INT8</code></td>\n<td><a href=\"#../data_types/int_uint/\">Int8</a></td>\n<td><code>INT8</code></td>\n</tr>\n<tr>\n<td><code>UINT16</code></td>\n<td><a href=\"#../data_types/int_uint/\">UInt16</a></td>\n<td><code>UINT16</code></td>\n</tr>\n<tr>\n<td><code>INT16</code></td>\n<td><a href=\"#../data_types/int_uint/\">Int16</a></td>\n<td><code>INT16</code></td>\n</tr>\n<tr>\n<td><code>UINT32</code></td>\n<td><a href=\"#../data_types/int_uint/\">UInt32</a></td>\n<td><code>UINT32</code></td>\n</tr>\n<tr>\n<td><code>INT32</code></td>\n<td><a href=\"#../data_types/int_uint/\">Int32</a></td>\n<td><code>INT32</code></td>\n</tr>\n<tr>\n<td><code>UINT64</code></td>\n<td><a href=\"#../data_types/int_uint/\">UInt64</a></td>\n<td><code>UINT64</code></td>\n</tr>\n<tr>\n<td><code>INT64</code></td>\n<td><a href=\"#../data_types/int_uint/\">Int64</a></td>\n<td><code>INT64</code></td>\n</tr>\n<tr>\n<td><code>FLOAT</code>, <code>HALF_FLOAT</code></td>\n<td><a href=\"#../data_types/float/\">Float32</a></td>\n<td><code>FLOAT</code></td>\n</tr>\n<tr>\n<td><code>DOUBLE</code></td>\n<td><a href=\"#../data_types/float/\">Float64</a></td>\n<td><code>DOUBLE</code></td>\n</tr>\n<tr>\n<td><code>DATE32</code></td>\n<td><a href=\"#../data_types/date/\">Date</a></td>\n<td><code>UINT16</code></td>\n</tr>\n<tr>\n<td><code>DATE64</code>, <code>TIMESTAMP</code></td>\n<td><a href=\"#../data_types/datetime/\">DateTime</a></td>\n<td><code>UINT32</code></td>\n</tr>\n<tr>\n<td><code>STRING</code>, <code>BINARY</code></td>\n<td><a href=\"#../data_types/string/\">String</a></td>\n<td><code>STRING</code></td>\n</tr>\n<tr>\n<td>\u2014</td>\n<td><a href=\"#../data_types/fixedstring/\">FixedString</a></td>\n<td><code>STRING</code></td>\n</tr>\n<tr>\n<td><code>DECIMAL</code></td>\n<td><a href=\"#../data_types/decimal/\">Decimal</a></td>\n<td><code>DECIMAL");
            
            document.write("</code></td>\n</tr>\n</tbody>\n</table>\n<p>ClickHouse supports configurable precision of <code>Decimal</code> type. The <code>INSERT</code> query treats the Parquet <code>DECIMAL</code> type as the ClickHouse <code>Decimal128</code> type.</p>\n<p>Unsupported Parquet data types: <code>DATE32</code>, <code>TIME32</code>, <code>FIXED_SIZE_BINARY</code>, <code>JSON</code>, <code>UUID</code>, <code>ENUM</code>.</p>\n<p>Data types of a ClickHouse table columns can differ from the corresponding fields of the Parquet data inserted. When inserting data, ClickHouse interprets data types according to the table above and then <a href=\"#type_conversion_function-cast\">cast</a> the data to that data type which is set for the ClickHouse table column.</p>\n<h4 id=\"inserting-and-selecting-data\">Inserting and Selecting Data<a class=\"headerlink\" href=\"#inserting-and-selecting-data\" title=\"Permanent link\">&para;</a></h4>\n<p>You can insert Parquet data from a file into ClickHouse table by the following command:</p>\n<div class=\"codehilite\"><pre><span></span><code>cat <span class=\"o\">{</span>filename<span class=\"o\">}</span> <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO {some_table} FORMAT Parquet&quot;</span>\n</code></pre></div>\n\n\n<p>You can select data from a ClickHouse table and save them into some file in the Parquet format by the following command:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">clickhouse</span><span class=\"o\">-</span><span class=\"n\">client</span> <span class=\"c1\">--query=&quot;SELECT * FROM {some_table} FORMAT Parquet&quot; &gt; {some_file.pq}</span>\n</code></pre></div>\n\n\n<p>To exchange data with the Hadoop, you can use <a href=\"#../operations/table_engines/hdfs/\">HDFS table engine</a>.</p>\n<h3 id=\"formatschema\">Format Schema<a class=\"headerlink\" href=\"#formatschema\" title=\"Permanent link\">&para;</a></h3>\n<p>The file name containing the format schema is set by the setting <code>format_schema</code>.<br />\nIt's required to set this setting when it is used one of the formats <code>Cap'n Proto</code> and <code>Protobuf</code>.<br />\nThe format schema is a combination of a file name and the name of a message type in this file, delimited by colon,<br />\ne.g. <code>schemafile.proto:MessageType</code>.<br />\nIf the file has the standard extension for the format (for example, <code>.proto</code> for <code>Protobuf</code>),<br />\nit can be omitted and in this case the format schema looks like <code>schemafile:MessageType</code>.</p>\n<p>If you input or output data via the <a href=\"#../interfaces/cli/\">client</a> in the <a href=\"#cli_usage\">interactive mode</a>, the file name specified in the format schema<br />\ncan contain an absolute path or a path relative to the current directory on the client.<br />\nIf you use the client in the <a href=\"#cli_usage\">batch mode</a>, the path to the schema must be relative due to security reasons.</p>\n<p>If you input or output data via the <a href=\"#../interfaces/http/\">HTTP interface</a> the file name specified in the format schema<br />\nshould be located in the directory specified in <a href=\"#server_settings-format_schema_path\">format_schema_path</a><br />\nin the server configuration.</p>\n<p><a name=\"../../../../../interfaces/jdbc/\"></a><a name=\"jdbc/\"></a><a name=\"../../../../interfaces/jdbc/\"></a><a name=\"interfaces/jdbc/\"></a><a name=\"../../../interfaces/jdbc/\"></a><a name=\"../../interfaces/jdbc/\"></a><a name=\"../interfaces/jdbc/\"></a></p>\n<h2 id=\"jdbc-driver\">JDBC Driver<a class=\"headerlink\" href=\"#jdbc-driver\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><strong><a href=\"https://github.com/ClickHouse/clickhouse-jdbc\" rel=\"external nofollow noreferrer\">Official driver</a></strong></li>\n<li>Third-party drivers:</li>\n<li><a href=\"https://github.com/housepower/ClickHouse-Native-JDBC\" rel=\"external nofollow noreferrer\">ClickHouse-Native-JDBC</a></li>\n<li><a href=\"https://github.com/blynkkk/clickhouse4j\" rel=\"external nofollow noreferrer\">clickhouse4j</a></li>\n</ul>\n<p><a name=\"../../interfaces/odbc/\"></a><a name=\"../../../../../interfaces/odbc/\"></a><a name=\"../../../interfaces/odbc/\"></a><a name=\"../interfaces/odbc/\"></a><a name=\"../../../../interfaces/odbc/\"></a><a name=\"odbc/\"></a><a name=\"interfaces/odbc/\"></a></p>\n<h2 id=\"odbc-driver\">ODBC Driver<a class=\"headerlink\" href=\"#odbc-driver\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"https://github.com/ClickHouse/clickhouse-odbc\" rel=\"external nofollow noreferrer\">Official driver</a>.</li>\n</ul>\n<p><a name=\"../../../../../third-party/client_libraries/\"></a><a name=\"../../third-party/client_libraries/\"></a><a name=\"../../../interfaces/third-party/client_libraries/\"></a><a name=\"../../../../third-party/client_libraries/\"></a><a name=\"../interfaces/third-party/client_libraries/\"></a><a name=\"interfaces/third-party/client_libraries/\"></a><a name=\"../third-party/client_libraries/\"></a><a name=\"../../../../interfaces/third-party/client_libraries/\"></a><a name=\"../../../../../../third-party/client_libraries/\"></a><a name=\"../../../third-party/client_libraries/\"></a><a name=\"third-party/client_libraries/\"></a><a name=\"../../interfaces/third-party/client_libraries/\"></a><a name=\"client_libraries/\"></a><a name=\"../../../../../interfaces/third-party/client_libraries/\"></a></p>\n<h2 id=\"client-libraries-from-third-party-developers\">Client Libraries from Third-party Developers<a class=\"headerlink\" href=\"#client-libraries-from-third-party-developers\" title=\"Permanent link\">&para;</a></h2>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Disclaimer</p>\n<p>Yandex does <strong>not</strong> maintain the libraries listed below and haven't done any extensive testing to ensure their quality.</p>\n</div>\n<ul>\n<li>Python<ul>\n<li><a href=\"https://github.com/Infinidat/infi.clickhouse_orm\" rel=\"external nofollow noreferrer\">infi.clickhouse_orm</a></li>\n<li><a href=\"https://github.com/mymarilyn/clickhouse-driver\" rel=\"external nofollow noreferrer\">clickhouse-driver</a></li>\n<li><a href=\"https://github.com/yurial/clickhouse-client\" rel=\"external nofollow noreferrer\">clickhouse-client</a></li>\n<li><a href=\"https://github.com/maximdanilchenko/aiochclient\" rel=\"external nofollow noreferrer\">aiochclient</a></li>\n</ul>\n</li>\n<li>PHP<ul>\n<li><a href=\"https://github.com/SeasX/SeasClick\" rel=\"external nofollow noreferrer\">SeasClick</a></li>\n<li><a href=\"https://github.com/smi2/phpClickHouse\" rel=\"external nofollow noreferrer\">phpClickHouse</a></li>\n<li><a href=\"https://github.com/8bitov/clickhouse-php-client\" rel=\"external nofollow noreferrer\">clickhouse-php-client</a></li>\n<li><a href=\"https://github.com/bozerkins/clickhouse-client\" rel=\"external nofollow noreferrer\">clickhouse-client</a></li>\n<li><a href=\"https://github.com/SevaCode/PhpClickHouseClient\" rel=\"external nofollow noreferrer\">PhpClickHouseClient</a></li>\n</ul>\n</li>\n<li>Go<ul>\n<li><a href=\"https://github.com/kshvakov/clickhouse/\" rel=\"external nofollow noreferrer\">clickhouse</a></li>\n<li><a href=\"https://github.com/roistat/go-clickhouse\" rel=\"external nofollow noreferrer\">go-clickhouse</a></li>\n<li><a href=\"https://github.com/mailru/go-clickhouse\" rel=\"external nofollow noreferrer\">mailrugo-clickhouse</a></li>\n<li><a href=\"https://github.com/leprosus/golang-clickhouse\" rel=\"external nofollow noreferrer\">golang-clickhouse</a></li>\n</ul>\n</li>\n<li>NodeJs<ul>\n<li><a href=\"https://github.com/TimonKK/clickhouse\" rel=\"external nofollow noreferrer\">clickhouse (NodeJs)</a></li>\n<li><a href=\"https://github.com/apla/node-clickhouse\" rel=\"external nofollow noreferrer\">node-clickhouse</a></li>\n</ul>\n</li>\n<li>Perl<ul>\n<li><a href=\"https://github.com/elcamlost/perl-DBD-ClickHouse\" rel=\"external nofollow noreferrer\">perl-DBD-ClickHouse</a></li>\n<li><a href=\"https://metacpan.org/release/HTTP-ClickHouse\" rel=\"external nofollow noreferrer\">HTTP-ClickHouse</a></li>\n<li><a href=\"https://metacpan.org/release/AnyEvent-ClickHouse\" rel=\"external nofollow noreferrer\">AnyEvent-ClickHouse</a></li>\n</ul>\n</li>\n<li>Ruby<ul>\n<li><a href=\"https://github.com/archan937/clickhouse\" rel=\"external nofollow noreferrer\">clickhouse (Ruby)</a></li>\n</ul>\n</li>\n<li>R<ul>\n<li><a href=\"https://github.com/hannesmuehleisen/clickhouse-r\" rel=\"external nofollow noreferrer\">clickhouse-r</a></li>\n<li><a href=\"https://github.com/IMSMWU/RClickhouse\" rel=\"external nofollow noreferrer\">RClickhouse</a></li>\n</ul>\n</li>\n<li>Java<ul>\n<li><a href=\"https://github.com/VirtusAI/clickhouse-client-java\" rel=\"external nofollow noreferrer\">clickhouse-client-java</a></li>\n<li><a href=\"https://github.com/Ecwid/clickhouse-client\" rel=\"external nofollow noreferrer\">clickhouse-client</a>    </li>\n</ul>\n</li>\n<li>Scala<ul>\n<li><a href=\"https://github.com/crobox/clickhouse-scala-client\" rel=\"external nofollow noreferrer\">clickhouse-scala-client</a></li>\n</ul>\n</li>\n<li>Kotlin<ul>\n<li><a href=\"https://github.com/TanVD/AORM\" rel=\"external nofollow noreferrer\">AORM</a></li>\n</ul>\n</li>\n<li>C#<ul>\n<li><a href=\"https://github.com/killwort/ClickHouse-Net\" rel=\"external nofollow noreferrer\">ClickHouse.Ado</a></li>\n<li><a href=\"https://github.com/ilyabreev/ClickHouse.Net\" rel=\"external nofollow noreferrer\">ClickHouse.Net</a></li>\n</ul>\n</li>\n<li>C++<ul>\n<li><a href=\"https://github.com/artpaul/clickhouse-cpp/\" rel=\"external nofollow noreferrer\">clickhouse-cpp</a></li>\n</ul>\n</li>\n<li>Elixir<ul>\n<li><a href=\"https://github.com/appodeal/clickhousex/\" rel=\"external nofollow noreferrer\">clickhousex</a></li>\n</ul>\n</li>\n<li>Nim<ul>\n<li><a href=\"https://github.com/leonardoce/nim-clickhouse\" rel=\"external nofollow noreferrer\">nim-clickhouse</a></li>\n</ul>\n</li>\n</ul>\n<p><a name=\"integrations/\"></a><a name=\"../../../third-party/integrations/\"></a><a name=\"../../../../../interfaces/third-party/integrations/\"></a><a name=\"third-party/integrations/\"></a><a name=\"../third-party/integrations/\"></a><a name=\"../../../../third-party/integrations/\"></a><a name=\"../../../../../../third-party/integrations/\"></a><a name=\"../../../interfaces/third-party/integrations/\"></a><a name=\"../../interfaces/third-party/integrations/\"></a><a name=\"../../../../interfaces/third-party/integrations/\"></a><a name=\"../../third-party/integrations/\"></a>");
            
            document.write("<a name=\"../../../../../third-party/integrations/\"></a><a name=\"../interfaces/third-party/integrations/\"></a><a name=\"interfaces/third-party/integrations/\"></a></p>\n<h2 id=\"integration-libraries-from-third-party-developers\">Integration Libraries from Third-party Developers<a class=\"headerlink\" href=\"#integration-libraries-from-third-party-developers\" title=\"Permanent link\">&para;</a></h2>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Disclaimer</p>\n<p>Yandex does <strong>not</strong> maintain the tools and libraries listed below and haven't done any extensive testing to ensure their quality.</p>\n</div>\n<h3 id=\"infrastructure-products\">Infrastructure Products<a class=\"headerlink\" href=\"#infrastructure-products\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Relational database management systems<ul>\n<li><a href=\"https://www.mysql.com\" rel=\"external nofollow noreferrer\">MySQL</a><ul>\n<li><a href=\"https://github.com/sysown/proxysql/wiki/ClickHouse-Support\" rel=\"external nofollow noreferrer\">ProxySQL</a></li>\n<li><a href=\"https://github.com/Altinity/clickhouse-mysql-data-reader\" rel=\"external nofollow noreferrer\">clickhouse-mysql-data-reader</a></li>\n<li><a href=\"https://github.com/larsnovikov/horgh-replicator\" rel=\"external nofollow noreferrer\">horgh-replicator</a></li>\n</ul>\n</li>\n<li><a href=\"https://www.postgresql.org\" rel=\"external nofollow noreferrer\">PostgreSQL</a><ul>\n<li><a href=\"https://github.com/Percona-Lab/clickhousedb_fdw\" rel=\"external nofollow noreferrer\">clickhousedb_fdw</a></li>\n<li><a href=\"https://github.com/Infinidat/infi.clickhouse_fdw\" rel=\"external nofollow noreferrer\">infi.clickhouse_fdw</a> (uses <a href=\"https://github.com/Infinidat/infi.clickhouse_orm\" rel=\"external nofollow noreferrer\">infi.clickhouse_orm</a>)</li>\n<li><a href=\"https://github.com/mkabilov/pg2ch\" rel=\"external nofollow noreferrer\">pg2ch</a></li>\n<li><a href=\"https://github.com/adjust/clickhouse_fdw\" rel=\"external nofollow noreferrer\">clickhouse_fdw</a></li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Microsoft_SQL_Server\" rel=\"external nofollow noreferrer\">MSSQL</a><ul>\n<li><a href=\"https://github.com/zlzforever/ClickHouseMigrator\" rel=\"external nofollow noreferrer\">ClickHouseMigrator</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Message queues<ul>\n<li><a href=\"https://kafka.apache.org\" rel=\"external nofollow noreferrer\">Kafka</a><ul>\n<li><a href=\"https://github.com/housepower/clickhouse_sinker\" rel=\"external nofollow noreferrer\">clickhouse_sinker</a> (uses <a href=\"https://github.com/kshvakov/clickhouse/\" rel=\"external nofollow noreferrer\">Go client</a>)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Object storages<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Amazon_S3\" rel=\"external nofollow noreferrer\">S3</a><ul>\n<li><a href=\"https://github.com/AlexAkulov/clickhouse-backup\" rel=\"external nofollow noreferrer\">clickhouse-backup</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Container orchestration<ul>\n<li><a href=\"https://kubernetes.io\" rel=\"external nofollow noreferrer\">Kubernetes</a><ul>\n<li><a href=\"https://github.com/Altinity/clickhouse-operator\" rel=\"external nofollow noreferrer\">clickhouse-operator</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Configuration management<ul>\n<li><a href=\"https://puppet.com\" rel=\"external nofollow noreferrer\">puppet</a><ul>\n<li><a href=\"https://forge.puppet.com/innogames/clickhouse\" rel=\"external nofollow noreferrer\">innogames/clickhouse</a></li>\n<li><a href=\"https://forge.puppet.com/mfedotov/clickhouse\" rel=\"external nofollow noreferrer\">mfedotov/clickhouse</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Monitoring<ul>\n<li><a href=\"https://graphiteapp.org\" rel=\"external nofollow noreferrer\">Graphite</a><ul>\n<li><a href=\"https://github.com/yandex/graphouse\" rel=\"external nofollow noreferrer\">graphouse</a></li>\n<li><a href=\"https://github.com/lomik/carbon-clickhouse\" rel=\"external nofollow noreferrer\">carbon-clickhouse</a></li>\n</ul>\n</li>\n<li><a href=\"https://grafana.com/\" rel=\"external nofollow noreferrer\">Grafana</a><ul>\n<li><a href=\"https://github.com/Vertamedia/clickhouse-grafana\" rel=\"external nofollow noreferrer\">clickhouse-grafana</a></li>\n</ul>\n</li>\n<li><a href=\"https://prometheus.io/\" rel=\"external nofollow noreferrer\">Prometheus</a><ul>\n<li><a href=\"https://github.com/f1yegor/clickhouse_exporter\" rel=\"external nofollow noreferrer\">clickhouse_exporter</a></li>\n<li><a href=\"https://github.com/Percona-Lab/PromHouse\" rel=\"external nofollow noreferrer\">PromHouse</a></li>\n<li><a href=\"https://github.com/hot-wifi/clickhouse_exporter\" rel=\"external nofollow noreferrer\">clickhouse_exporter</a> (uses <a href=\"https://github.com/kshvakov/clickhouse/\" rel=\"external nofollow noreferrer\">Go client</a>)</li>\n</ul>\n</li>\n<li><a href=\"https://www.nagios.org/\" rel=\"external nofollow noreferrer\">Nagios</a><ul>\n<li><a href=\"https://github.com/exogroup/check_clickhouse/\" rel=\"external nofollow noreferrer\">check_clickhouse</a></li>\n</ul>\n</li>\n<li><a href=\"https://www.zabbix.com\" rel=\"external nofollow noreferrer\">Zabbix</a><ul>\n<li><a href=\"https://github.com/Altinity/clickhouse-zabbix-template\" rel=\"external nofollow noreferrer\">clickhouse-zabbix-template</a></li>\n</ul>\n</li>\n<li><a href=\"https://sematext.com/\" rel=\"external nofollow noreferrer\">Sematext</a><ul>\n<li><a href=\"https://github.com/sematext/sematext-agent-integrations/tree/master/clickhouse\" rel=\"external nofollow noreferrer\">clickhouse integration</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Logging<ul>\n<li><a href=\"https://www.rsyslog.com/\" rel=\"external nofollow noreferrer\">rsyslog</a><ul>\n<li><a href=\"https://www.rsyslog.com/doc/master/configuration/modules/omclickhouse.html\" rel=\"external nofollow noreferrer\">omclickhouse</a></li>\n</ul>\n</li>\n<li><a href=\"https://www.fluentd.org\" rel=\"external nofollow noreferrer\">fluentd</a><ul>\n<li><a href=\"https://github.com/flant/loghouse\" rel=\"external nofollow noreferrer\">loghouse</a> (for <a href=\"https://kubernetes.io\" rel=\"external nofollow noreferrer\">Kubernetes</a>)</li>\n</ul>\n</li>\n<li><a href=\"https://www.sematext.com/logagent\" rel=\"external nofollow noreferrer\">logagent</a><ul>\n<li><a href=\"https://sematext.com/docs/logagent/output-plugin-clickhouse/\" rel=\"external nofollow noreferrer\">logagent output-plugin-clickhouse</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Geo<ul>\n<li><a href=\"https://dev.maxmind.com/geoip/\" rel=\"external nofollow noreferrer\">MaxMind</a><ul>\n<li><a href=\"https://github.com/AlexeyKupershtokh/clickhouse-maxmind-geoip\" rel=\"external nofollow noreferrer\">clickhouse-maxmind-geoip</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"programming-language-ecosystems\">Programming Language Ecosystems<a class=\"headerlink\" href=\"#programming-language-ecosystems\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Python<ul>\n<li><a href=\"https://www.sqlalchemy.org\" rel=\"external nofollow noreferrer\">SQLAlchemy</a><ul>\n<li><a href=\"https://github.com/cloudflare/sqlalchemy-clickhouse\" rel=\"external nofollow noreferrer\">sqlalchemy-clickhouse</a> (uses <a href=\"https://github.com/Infinidat/infi.clickhouse_orm\" rel=\"external nofollow noreferrer\">infi.clickhouse_orm</a>)</li>\n</ul>\n</li>\n<li><a href=\"https://pandas.pydata.org\" rel=\"external nofollow noreferrer\">pandas</a><ul>\n<li><a href=\"https://github.com/kszucs/pandahouse\" rel=\"external nofollow noreferrer\">pandahouse</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>R<ul>\n<li><a href=\"https://db.rstudio.com/dplyr/\" rel=\"external nofollow noreferrer\">dplyr</a><ul>\n<li><a href=\"https://github.com/IMSMWU/RClickhouse\" rel=\"external nofollow noreferrer\">RClickhouse</a> (uses <a href=\"https://github.com/artpaul/clickhouse-cpp\" rel=\"external nofollow noreferrer\">clickhouse-cpp</a>)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Java<ul>\n<li><a href=\"http://hadoop.apache.org\" rel=\"external nofollow noreferrer\">Hadoop</a><ul>\n<li><a href=\"https://github.com/jaykelin/clickhouse-hdfs-loader\" rel=\"external nofollow noreferrer\">clickhouse-hdfs-loader</a> (uses <a href=\"#../../query_language/table_functions/jdbc/\">JDBC</a>)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Scala<ul>\n<li><a href=\"https://akka.io\" rel=\"external nofollow noreferrer\">Akka</a><ul>\n<li><a href=\"https://github.com/crobox/clickhouse-scala-client\" rel=\"external nofollow noreferrer\">clickhouse-scala-client</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>C#<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/ado-net-overview\" rel=\"external nofollow noreferrer\">ADO.NET</a><ul>\n<li><a href=\"https://github.com/killwort/ClickHouse-Net\" rel=\"external nofollow noreferrer\">ClickHouse.Ado</a></li>\n<li><a href=\"https://github.com/ilyabreev/ClickHouse.Net\" rel=\"external nofollow noreferrer\">ClickHouse.Net</a></li>\n<li><a href=\"https://github.com/ilyabreev/ClickHouse.Net.Migrations\" rel=\"external nofollow noreferrer\">ClickHouse.Net.Migrations</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Elixir<ul>\n<li><a href=\"https://github.com/elixir-ecto/ecto\" rel=\"external nofollow noreferrer\">Ecto</a><ul>\n<li><a href=\"https://github.com/appodeal/clickhouse_ecto\" rel=\"external nofollow noreferrer\">clickhouse_ecto</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a name=\"../interfaces/third-party/gui/\"></a><a name=\"third-party/gui/\"></a><a name=\"../../../interfaces/third-party/gui/\"></a><a name=\"../../../../../../third-party/gui/\"></a><a name=\"../../../../../interfaces/third-party/gui/\"></a><a name=\"../../interfaces/third-party/gui/\"></a><a name=\"../../../third-party/gui/\"></a><a name=\"../third-party/gui/\"></a><a name=\"../../third-party/gui/\"></a><a name=\"interfaces/third-party/gui/\"></a><a name=\"../../../../third-party/gui/\"></a><a name=\"../../../../interfaces/third-party/gui/\"></a><a name=\"gui/\"></a><a name=\"../../../../../third-party/gui/\"></a></p>\n<h2 id=\"visual-interfaces-from-third-party-developers\">Visual Interfaces from Third-party Developers<a class=\"headerlink\" href=\"#visual-interfaces-from-third-party-developers\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"open-source\">Open-Source<a class=\"headerlink\" href=\"#open-source\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"tabix\">Tabix<a class=\"headerlink\" href=\"#tabix\" title=\"Permanent link\">&para;</a></h4>\n<p>Web interface for ClickHouse in the <a href=\"https://github.com/tabixio/tabix\" rel=\"external nofollow noreferrer\">Tabix</a> project.</p>\n<p>Fea");
            
            document.write("tures:</p>\n<ul>\n<li>Works with ClickHouse directly from the browser, without the need to install additional software.</li>\n<li>Query editor with syntax highlighting.</li>\n<li>Auto-completion of commands.</li>\n<li>Tools for graphical analysis of query execution.</li>\n<li>Color scheme options.</li>\n</ul>\n<p><a href=\"https://tabix.io/doc/\" rel=\"external nofollow noreferrer\">Tabix documentation</a>.</p>\n<h4 id=\"houseops\">HouseOps<a class=\"headerlink\" href=\"#houseops\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://github.com/HouseOps/HouseOps\" rel=\"external nofollow noreferrer\">HouseOps</a> is a UI/IDE for OSX, Linux and Windows.</p>\n<p>Features:</p>\n<ul>\n<li>Query builder with syntax highlighting. View the response in a table or JSON view.</li>\n<li>Export query results as CSV or JSON.</li>\n<li>List of processes with descriptions. Write mode. Ability to stop (<code>KILL</code>) a process.</li>\n<li>Database graph. Shows all tables and their columns with additional information.</li>\n<li>Quick view of the column size.</li>\n<li>Server configuration.</li>\n</ul>\n<p>The following features are planned for development:</p>\n<ul>\n<li>Database management.</li>\n<li>User management.</li>\n<li>Real-time data analysis.</li>\n<li>Cluster monitoring.</li>\n<li>Cluster management.</li>\n<li>Monitoring replicated and Kafka tables.</li>\n</ul>\n<h4 id=\"lighthouse\">LightHouse<a class=\"headerlink\" href=\"#lighthouse\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://github.com/VKCOM/lighthouse\" rel=\"external nofollow noreferrer\">LightHouse</a> is a lightweight web interface for ClickHouse.</p>\n<p>Features:</p>\n<ul>\n<li>Table list with filtering and metadata.</li>\n<li>Table preview with filtering and sorting.</li>\n<li>Read-only queries execution.</li>\n</ul>\n<h4 id=\"dbeaver\">DBeaver<a class=\"headerlink\" href=\"#dbeaver\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://dbeaver.io/\" rel=\"external nofollow noreferrer\">DBeaver</a> - universal desktop database client with ClickHouse support.</p>\n<p>Features:</p>\n<ul>\n<li>Query development with syntax highlight and autocompletion.</li>\n<li>Table list with filters and metadata search.</li>\n<li>Table data preview.</li>\n<li>Full text search.</li>\n</ul>\n<h4 id=\"clickhouse-cli\">clickhouse-cli<a class=\"headerlink\" href=\"#clickhouse-cli\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://github.com/hatarist/clickhouse-cli\" rel=\"external nofollow noreferrer\">clickhouse-cli</a> is an alternative command line client for ClickHouse, written in Python 3.</p>\n<p>Features:<br />\n- Autocompletion.<br />\n- Syntax highlighting for the queries and data output.<br />\n- Pager support for the data output.<br />\n- Custom PostgreSQL-like commands.</p>\n<h4 id=\"clickhouse-flamegraph\">clickhouse-flamegraph<a class=\"headerlink\" href=\"#clickhouse-flamegraph\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://github.com/Slach/clickhouse-flamegraph\" rel=\"external nofollow noreferrer\">clickhouse-flamegraph</a> is a specialized tool to visualize the <code>system.trace_log</code> as <a href=\"http://www.brendangregg.com/flamegraphs.html\" rel=\"external nofollow noreferrer\">flamegraph</a>.</p>\n<h3 id=\"commercial\">Commercial<a class=\"headerlink\" href=\"#commercial\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"datagrip\">DataGrip<a class=\"headerlink\" href=\"#datagrip\" title=\"Permanent link\">&para;</a></h4>\n<p><a href=\"https://www.jetbrains.com/datagrip/\" rel=\"external nofollow noreferrer\">DataGrip</a> is a database IDE from JetBrains with dedicated support for ClickHouse. It is also embedded into other IntelliJ-based tools: PyCharm, IntelliJ IDEA, GoLand, PhpStorm and others.</p>\n<p>Features:</p>\n<ul>\n<li>Very fast code completion.</li>\n<li>ClickHouse syntax highlighting.</li>\n<li>Support for features specific to ClickHouse, for example nested columns, table engines.</li>\n<li>Data Editor.</li>\n<li>Refactorings.</li>\n<li>Search and Navigation.</li>\n</ul>\n<p><a name=\"../../../interfaces/third-party/proxy/\"></a><a name=\"interfaces/third-party/proxy/\"></a><a name=\"../third-party/proxy/\"></a><a name=\"../../interfaces/third-party/proxy/\"></a><a name=\"../../../../../third-party/proxy/\"></a><a name=\"../../../../../../third-party/proxy/\"></a><a name=\"proxy/\"></a><a name=\"../../../../interfaces/third-party/proxy/\"></a><a name=\"../../../../../interfaces/third-party/proxy/\"></a><a name=\"../interfaces/third-party/proxy/\"></a><a name=\"../../third-party/proxy/\"></a><a name=\"../../../third-party/proxy/\"></a><a name=\"../../../../third-party/proxy/\"></a><a name=\"third-party/proxy/\"></a></p>\n<h2 id=\"proxy-servers-from-third-party-developers\">Proxy Servers from Third-party Developers<a class=\"headerlink\" href=\"#proxy-servers-from-third-party-developers\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"chproxy\">chproxy<a class=\"headerlink\" href=\"#chproxy\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"https://github.com/Vertamedia/chproxy\" rel=\"external nofollow noreferrer\">chproxy</a>, is an http proxy and load balancer for ClickHouse database. </p>\n<p>Features:</p>\n<ul>\n<li>Per-user routing and response caching.</li>\n<li>Flexible limits.</li>\n<li>Automatic SSL cerificate renewal.</li>\n</ul>\n<p>Implemented in Go.</p>\n<h3 id=\"kittenhouse\">KittenHouse<a class=\"headerlink\" href=\"#kittenhouse\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"https://github.com/VKCOM/kittenhouse\" rel=\"external nofollow noreferrer\">KittenHouse</a> is designed to be a local proxy between ClickHouse and application server in case it's impossible or inconvenient to buffer INSERT data on your application side.</p>\n<p>Features:</p>\n<ul>\n<li>In-memory and on-disk data buffering.</li>\n<li>Per-table routing.</li>\n<li>Load-balancing and health checking.</li>\n</ul>\n<p>Implemented in Go.</p>\n<h3 id=\"clickhouse-bulk\">ClickHouse-Bulk<a class=\"headerlink\" href=\"#clickhouse-bulk\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"https://github.com/nikepan/clickhouse-bulk\" rel=\"external nofollow noreferrer\">ClickHouse-Bulk</a> is a simple ClickHouse insert collector.</p>\n<p>Features:</p>\n<ul>\n<li>Group requests and send by threshold or interval.</li>\n<li>Multiple remote servers.</li>\n<li>Basic authentication.</li>\n</ul>\n<p>Implemented in Go.</p>\n<p><a name=\"data_types/\"></a><a name=\"../../../data_types/\"></a><a name=\"../../../../data_types/\"></a><a name=\"../data_types/\"></a><a name=\"../../data_types/\"></a><a name=\"../../../../../data_types/\"></a></p>\n<h2 id=\"data_types\">Data Types<a class=\"headerlink\" href=\"#data_types\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse can store various types of data in table cells.</p>\n<p>This section describes the supported data types and special considerations when using and/or implementing them, if any.</p>\n<p><a name=\"../../../../../data_types/int_uint/\"></a><a name=\"../data_types/int_uint/\"></a><a name=\"int_uint/\"></a><a name=\"data_types/int_uint/\"></a><a name=\"../../../data_types/int_uint/\"></a><a name=\"../../data_types/int_uint/\"></a><a name=\"../../../../data_types/int_uint/\"></a></p>\n<h2 id=\"uint8-uint16-uint32-uint64-int8-int16-int32-int64\">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64<a class=\"headerlink\" href=\"#uint8-uint16-uint32-uint64-int8-int16-int32-int64\" title=\"Permanent link\">&para;</a></h2>\n<p>Fixed-length integers, with or without a sign.</p>\n<h3 id=\"int-ranges\">Int Ranges<a class=\"headerlink\" href=\"#int-ranges\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Int8 - [-128 : 127]</li>\n<li>Int16 - [-32768 : 32767]</li>\n<li>Int32 - [-2147483648 : 2147483647]</li>\n<li>Int64 - [-9223372036854775808 : 9223372036854775807]</li>\n</ul>\n<h3 id=\"uint-ranges\">Uint Ranges<a class=\"headerlink\" href=\"#uint-ranges\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>UInt8 - [0 : 255]</li>\n<li>UInt16 - [0 : 65535]</li>\n<li>UInt32 - [0 : 4294967295]</li>\n<li>UInt64 - [0 : 18446744073709551615]</li>\n</ul>\n<p><a name=\"../../../../../data_types/float/\"></a><a name=\"float/\"></a><a name=\"../data_types/float/\"></a><a name=\"data_types/float/\"></a><a name=\"../../../../data_types/float/\"></a><a name=\"../../../data_types/float/\"></a><a name=\"../../data_types/float/\"></a></p>\n<h2 id=\"float32-float64\">Float32, Float64<a class=\"headerlink\" href=\"#float32-float64\" title=\"Permanent link\">&para;</a></h2>\n<p><a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"external nofollow noreferrer\">Floating point numbers</a>.</p>\n<p>Types are equivalent to types of C:</p>\n<ul>\n<li><code>Float32</code> - <code>float</code></li>\n<li><code>Float64</code> - <code>double</code></li>\n</ul>\n<p>We recommend that you store data in integer form whenever possible. For example, convert fixed precision numbers to integer values, such as monetary amounts or page load times in milliseconds.</p>\n<h3 id=\"using-floating-point-numbers\">Using Floating-point Numbers<a class=\"headerlink\" href=\"#using-floating-point-numbers\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Computations with floating-point numbers might produce a rounding error.</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"mi\">1</span> <span class=\"o\">-</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">9</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500minus(1, 0.9)\u2500\u2510\n\u2502 0.09999999999999998 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<ul>\n<li>The result of the calculation depends on the calculation method (the processor type and architecture of the computer system).</li>\n<li>Floating-point calculations might result in numbers such as infinity (<code>Inf</code>) and \"not-a-number\" (<code>NaN</code>). This should be taken into account when processing the results of calculations.</li>\n<li>When parsing floating point numbers from text, the result might not be the nearest machine-representable number.</li>\n</ul>\n<h3 id=\"data_type-float-nan-inf\">NaN and Inf<a class=\"headerlink\" href=\"#data_type-float-nan-inf\" title=\"Permanent link\">&para;</a></h3>\n<p>In contrast to standard SQL, ClickHouse supports the following categories of floating-point numbers:</p>\n<ul>\n<li><code>Inf</code> \u2013 Infinity.</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"mi\">0</span><spa");
            
            document.write("n class=\"p\">.</span><span class=\"mi\">5</span> <span class=\"o\">/</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500divide(0.5, 0)\u2500\u2510\n\u2502            inf \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<ul>\n<li><code>-Inf</code> \u2013 Negative infinity.</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">-</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span> <span class=\"o\">/</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500divide(-0.5, 0)\u2500\u2510\n\u2502            -inf \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<ul>\n<li><code>NaN</code> \u2013 Not a number.</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"mi\">0</span> <span class=\"o\">/</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500divide(0, 0)\u2500\u2510\n\u2502          nan \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>See the rules for <code>NaN</code> sorting in the section <a href=\"#../query_language/select/\">ORDER BY clause</a>.</p>\n<p><a name=\"../../../data_types/decimal/\"></a><a name=\"data_types/decimal/\"></a><a name=\"../../../../data_types/decimal/\"></a><a name=\"../../../../../data_types/decimal/\"></a><a name=\"../data_types/decimal/\"></a><a name=\"../../data_types/decimal/\"></a><a name=\"decimal/\"></a></p>\n<h2 id=\"decimal-p-s-decimal32-s-decimal64-s-decimal128-s\">Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)<a class=\"headerlink\" href=\"#decimal-p-s-decimal32-s-decimal64-s-decimal128-s\" title=\"Permanent link\">&para;</a></h2>\n<p>Signed fixed point numbers that keep precision during add, subtract and multiply operations. For division least significant digits are discarded (not rounded).</p>\n<h3 id=\"parameters\">Parameters<a class=\"headerlink\" href=\"#parameters\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>P - precision. Valid range: [ 1 : 38 ]. Determines how many decimal digits number can have (including fraction).</li>\n<li>S - scale. Valid range: [ 0 : P ]. Determines how many decimal digits fraction can have.</li>\n</ul>\n<p>Depending on P parameter value Decimal(P, S) is a synonym for:<br />\n- P from [ 1 : 9 ] - for Decimal32(S)<br />\n- P from [ 10 : 18 ] - for Decimal64(S)<br />\n- P from [ 19 : 38 ] - for Decimal128(S)</p>\n<h3 id=\"decimal-value-ranges\">Decimal value ranges<a class=\"headerlink\" href=\"#decimal-value-ranges\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Decimal32(S) - ( -1 * 10^(9 - S), 1 * 10^(9 - S) )</li>\n<li>Decimal64(S) - ( -1 * 10^(18 - S), 1 * 10^(18 - S) )</li>\n<li>Decimal128(S) - ( -1 * 10^(38 - S), 1 * 10^(38 - S) )</li>\n</ul>\n<p>For example, Decimal32(4) can contain numbers from -99999.9999 to 99999.9999 with 0.0001 step.</p>\n<h3 id=\"internal-representation\">Internal representation<a class=\"headerlink\" href=\"#internal-representation\" title=\"Permanent link\">&para;</a></h3>\n<p>Internally data is represented as normal signed integers with respective bit width. Real value ranges that can be stored in memory are a bit larger than specified above, which are checked only on convertion from string.</p>\n<p>Because modern CPU's do not support 128 bit integers natively, operations on Decimal128 are emulated. Because of this Decimal128 works signigicantly slower than Decimal32/Decimal64.</p>\n<h3 id=\"operations-and-result-type\">Operations and result type<a class=\"headerlink\" href=\"#operations-and-result-type\" title=\"Permanent link\">&para;</a></h3>\n<p>Binary operations on Decimal result in wider result type (with any order of arguments).</p>\n<ul>\n<li>Decimal64(S1) <op> Decimal32(S2) -&gt; Decimal64(S)</li>\n<li>Decimal128(S1) <op> Decimal32(S2) -&gt; Decimal128(S)</li>\n<li>Decimal128(S1) <op> Decimal64(S2) -&gt; Decimal128(S)</li>\n</ul>\n<p>Rules for scale:</p>\n<ul>\n<li>add, subtract: S = max(S1, S2).</li>\n<li>multuply: S = S1 + S2.</li>\n<li>divide: S = S1.</li>\n</ul>\n<p>For similar operations between Decimal and integers, the result is Decimal of the same size as argument.</p>\n<p>Operations between Decimal and Float32/Float64 are not defined. If you really need them, you can explicitly cast one of argument using toDecimal32, toDecimal64, toDecimal128 or toFloat32, toFloat64 builtins. Keep in mind that the result will lose precision and type conversion is computationally expensive operation. </p>\n<p>Some functions on Decimal return result as Float64 (for example, var or stddev). Intermediate calculations might still be performed in Decimal, which might lead to different results between Float64 and Decimal inputs with same values.</p>\n<h3 id=\"overflow-checks\">Overflow checks<a class=\"headerlink\" href=\"#overflow-checks\" title=\"Permanent link\">&para;</a></h3>\n<p>During calculations on Decimal, integer overflows might happen. Excessive digits in fraction are discarded (not rounded). Excessive digits in integer part will lead to exception.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">x</span> <span class=\"o\">/</span> <span class=\"mi\">3</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500divide(toDecimal32(2, 4), 3)\u2500\u2510\n\u2502 2.0000 \u2502                       0.6666 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">.</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">x</span> <span class=\"o\">*</span> <span class=\"n\">x</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>DB::Exception: Scale is out of bounds.\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">.</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"mi\">6</span> <span class=\"o\">*</span> <span class=\"n\">x</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>DB::Exception: Decimal math overflow.\n</code></pre></div>\n\n\n<p>Overflow checks lead to operations slowdown. If it is known that overflows are not possible, it makes sense to disable checks using <code>decimal_check_overflow</code> setting. When checks are disabled and overflow happens, the result will be incorrect:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">decimal_check_overflow</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">.</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"mi\">6</span> <span class=\"o\">*</span> <span class=\"n\">x</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500multiply(6, toDecimal32(4.2, 8))\u2500\u2510\n\u2502 4.20000000 \u2502                     -17.74967296 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Overflow checks happen not only on arithmetic operations, but also on value comparison:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span> <span class=\"o\">&lt;</span> <span class=\"mi\">100</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>DB::Exception: Can&#39;t compare.\n</code></pre></div>\n\n\n<p><a name=\"../../../data_types/boolean/\"></a><a name=\"boolean/\"></a><a name=\"../../data_types/boolean/\"></a><a name=\"../data_types/boolean/\"></a><a name=\"../../../../data_types/boolean/\"></a><a name=\"../../../../../data_types/boolean/\"></a><a name=\"data_types/boolean/\"></a></p>\n<h2 id=\"boolean-values\">Boolean Values<a class=\"headerlink\" href=\"#boolean-values\" title=\"Permanent link\">&para;</a></h2>\n<p>There isn't a separate type for boolean values. They use the UInt8 type, restricted to the values 0 or 1.</p>\n<p><a name=\"../../data_types/string/\"></a><a name=\"data_types/string/\"></a><a name=\"../../../../../data_types/string/\"></a><a name=\"../../../../data_types/string/\"></a><a name=\"string/\"></a><a name=\"../data_types/string/\"></a><a name=\"../../../data_types/string/\"></a></p>\n<h2 id=\"string\">String<a class=\"headerlink\" href=\"#string\" title=\"Permanent link\">&para;</a></h2>\n<p>Strings of an arbitrary length. The length is not limited. The value can contain an arbitrary set of bytes, including null bytes.<br />\nThe String type replaces the types VARCHAR, BLOB, CLOB, and others from other DBMSs.</p>\n<h3 id=\"encodings\">Encodings<a class=\"headerlink\" href=\"#encodings\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse doesn't have the concept of encodings. Strings can contain an arbitrary set of bytes, which are stored and output as-is.<br />\nIf you need to store texts, we recommend using UTF-8 encoding. At the very least, if your terminal uses UTF-8 (as recommended), you can read and write your values without making conversions.<br />\nSimilarly, certain functions for working with strings have separate variations that work under the assumption that the string contains a set of bytes representing a UTF-8 encoded text.<br />\nFor example, the 'length' function calculates the string length in bytes, while the 'lengthUTF8' function calculates the string length in Unicode code points, assuming that the value is UTF-");
            
            document.write("8 encoded.</p>\n<p><a name=\"../../data_types/fixedstring/\"></a><a name=\"fixedstring/\"></a><a name=\"../../../data_types/fixedstring/\"></a><a name=\"data_types/fixedstring/\"></a><a name=\"../../../../data_types/fixedstring/\"></a><a name=\"../../../../../data_types/fixedstring/\"></a><a name=\"../data_types/fixedstring/\"></a></p>\n<h2 id=\"fixedstring\">FixedString<a class=\"headerlink\" href=\"#fixedstring\" title=\"Permanent link\">&para;</a></h2>\n<p>A fixed-length string of <code>N</code> bytes (neither characters nor code points).</p>\n<p>To declare a column of <code>FixedString</code> type, use the following syntax:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"o\">&lt;</span><span class=\"k\">column_name</span><span class=\"o\">&gt;</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"n\">N</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Where <code>N</code> is a natural number.</p>\n<p>The <code>FixedString</code> type is efficient when data has the length of precisely <code>N</code> bytes. In all other cases, it is likely to reduce efficiency.</p>\n<p>Examples of the values that can be efficiently stored in <code>FixedString</code>-typed columns:</p>\n<ul>\n<li>Binary representation of IP addresses (<code>FixedString(16)</code> for IPv6).</li>\n<li>Language codes (ru_RU, en_US ... ).</li>\n<li>Currency codes (USD, RUB ... ).</li>\n<li>Binary representation of hashes (<code>FixedString(16)</code> for MD5, <code>FixedString(32)</code> for SHA256).</li>\n</ul>\n<p>To store UUID values, use the <a href=\"#uuid/\">UUID</a> data type.</p>\n<p>When inserting the data, ClickHouse:</p>\n<ul>\n<li>Complements a string with null bytes if the string contains fewer than <code>N</code> bytes.</li>\n<li>Throws the <code>Too large value for FixedString(N)</code> exception if the string contains more than <code>N</code> bytes.</li>\n</ul>\n<p>When selecting the data, ClickHouse does not remove the null bytes at the end of the string. If you use the <code>WHERE</code> clause, you should add null bytes manually to match the <code>FixedString</code> value. The following example illustrates how to use the <code>WHERE</code> clause with <code>FixedString</code>.</p>\n<p>Let's consider the following table with the single <code>FixedString(2)</code> column:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2510\n\u2502 b     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The query <code>SELECT * FROM FixedStringTable WHERE a = 'b'</code> does not return any data as a result. We should complement the filter pattern with null bytes.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">FixedStringTable</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;b\\0&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500a\u2500\u2510\n\u2502 b \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This behavior differs from MySQL behavior for the <code>CHAR</code> type (where strings are padded with spaces, and the spaces are removed for output).</p>\n<p>Note that the length of the <code>FixedString(N)</code> value is constant. The <a href=\"#array_functions-length\">length</a> function returns <code>N</code> even if the <code>FixedString(N)</code> value is filled only with null bytes, but the <a href=\"#string_functions-empty\">empty</a> function returns <code>1</code> in this case.</p>\n<p><a name=\"uuid/\"></a><a name=\"../../../data_types/uuid/\"></a><a name=\"../../data_types/uuid/\"></a><a name=\"../../../../data_types/uuid/\"></a><a name=\"../../../../../data_types/uuid/\"></a><a name=\"../data_types/uuid/\"></a><a name=\"data_types/uuid/\"></a></p>\n<h2 id=\"uuid-data-type\">UUID<a class=\"headerlink\" href=\"#uuid-data-type\" title=\"Permanent link\">&para;</a></h2>\n<p>A universally unique identifier (UUID) is a 16-byte number used to identify records. For detailed information about the UUID, see <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier\" rel=\"external nofollow noreferrer\">Wikipedia</a>.</p>\n<p>The example of UUID type value is represented below: </p>\n<div class=\"codehilite\"><pre><span></span><code>61f0c404-5cb3-11e7-907b-a6006ad3dba0\n</code></pre></div>\n\n\n<p>If you do not specify the UUID column value when inserting a new record, the UUID value is filled with zero:</p>\n<div class=\"codehilite\"><pre><span></span><code>00000000-0000-0000-0000-000000000000\n</code></pre></div>\n\n\n<h3 id=\"how-to-generate\">How to generate<a class=\"headerlink\" href=\"#how-to-generate\" title=\"Permanent link\">&para;</a></h3>\n<p>To generate the UUID value, ClickHouse provides the <a href=\"#../query_language/functions/uuid_functions/\">generateUUIDv4</a> function.</p>\n<h3 id=\"usage-example\">Usage example<a class=\"headerlink\" href=\"#usage-example\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Example 1</strong></p>\n<p>This example demonstrates creating a table with the UUID type column and inserting a value into the table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_uuid</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"n\">UUID</span><span class=\"p\">,</span> <span class=\"n\">y</span> <span class=\"n\">String</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_uuid</span> <span class=\"k\">SELECT</span> <span class=\"n\">generateUUIDv4</span><span class=\"p\">(),</span> <span class=\"s1\">&#39;Example 1&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_uuid</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500y\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 417ddc5d-e556-4d27-95dd-a34d84e46a50 \u2502 Example 1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>Example 2</strong></p>\n<p>In this example, the UUID column value is not specified when inserting a new record.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_uuid</span> <span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Example 2&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_uuid</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500y\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 417ddc5d-e556-4d27-95dd-a34d84e46a50 \u2502 Example 1 \u2502\n\u2502 00000000-0000-0000-0000-000000000000 \u2502 Example 2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"restrictions\">Restrictions<a class=\"headerlink\" href=\"#restrictions\" title=\"Permanent link\">&para;</a></h3>\n<p>The UUID data type only supports functions which <a href=\"#string/\">String</a> data type also supports (for example, <a href=\"#agg_function-min\">min</a>, <a href=\"#agg_function-max\">max</a>, and <a href=\"#agg_function-count\">count</a>).</p>\n<p>The UUID data type is not supported by arithmetic operations (for example, <a href=\"#arithm_func-abs\">abs</a>) or aggregate functions, such as <a href=\"#agg_function-sum\">sum</a> and <a href=\"#agg_function-avg\">avg</a>.</p>\n<p><a name=\"../../data_types/date/\"></a><a name=\"date/\"></a><a name=\"../../../data_types/date/\"></a><a name=\"data_types/date/\"></a><a name=\"../../../../data_types/date/\"></a><a name=\"../data_types/date/\"></a><a name=\"../../../../../data_types/date/\"></a></p>\n<h2 id=\"date\">Date<a class=\"headerlink\" href=\"#date\" title=\"Permanent link\">&para;</a></h2>\n<p>A date. Stored in two bytes as the number of days since 1970-01-01 (unsigned). Allows storing values from just after the beginning of the Unix Epoch to the upper threshold defined by a constant at the compilation stage (currently, this is until the year 2106, but the final fully-supported year is 2105).<br />\nThe minimum value is output as 0000-00-00.</p>\n<p>The date is stored without the time zone.</p>\n<p><a name=\"../../data_types/datetime/\"></a><a name=\"datetime/\"></a><a name=\"../../../data_types/datetime/\"></a><a name=\"data_types/datetime/\"></a><a name=\"../data_types/datetime/\"></a><a name=\"../../../../../data_types/datetime/\"></a><a name=\"../../../../data_types/datetime/\"></a></p>\n<h2 id=\"data_type-datetime\">DateTime<a class=\"headerlink\" href=\"#data_type-datetime\" title=\"Permanent link\">&para;</a></h2>\n<p>Date with time. Stored in four bytes as a Unix timestamp (unsigned). Allows storing values in the same range as for the Date type. The minimal value is output as 0000-00-00 00:00:00.<br />\nThe time is stored with accuracy up to one second (without leap seconds).</p>\n<h3 id=\"time-zones\">Time Zones<a class=\"headerlink\" href=\"#time-zones\" title=\"Permanent link\">&para;</a></h3>\n<p>The date with time is converted from text (divided into component parts) to binary and back, using the system's time zone at the time the client or server starts. In text format, information about daylight savings is lost.</p>\n<p>By default, the client switches to the timezone of the server when it connects. You can change this behavior by enabling the client command-line option <code>--use_client_time_zone</code>.</p>\n<p>So when working with a textual date (for example, when saving text dumps), keep in mind that there may be ambiguity during changes for daylight savings time, and there may be problems matching data if the time zone changed.</p>\n<p><a name=\"../../../../data_types/enum/\"></a><a name=\"../../../../../data_types/enum/\"></a><a name=\"../data_types/enum/\"></a><a name=\"enum/\"></a><a name=\"../../data_types/enum/\"></a><a name=\"data_types/enum/\"></a><a name=\"../../../data_types/enum/\"></a></p>\n<h2 id=\"enum\">Enum<a class=\"headerlink\" href=\"#enum\" title=\"Permanent link\">&para;</a></h2>\n<p>");
            
            document.write("Enumerated type consisting of named values. </p>\n<p>Named values must be delcared as <code>'string' = integer</code> pairs. ClickHouse stores only numbers, but supports operations with the values through their names.</p>\n<p>ClickHouse supports:</p>\n<ul>\n<li>8-bit <code>Enum</code>. It can contain up to 256 values enumerated in the <code>[-128, 127]</code> range.</li>\n<li>16-bit <code>Enum</code>. It can contain up to 65536 values enumerated in the <code>[-32768, 32767]</code> range.</li>\n</ul>\n<p>ClickHouse automatically chooses the type of <code>Enum</code> when data is inserted. You can also use <code>Enum8</code> or <code>Enum16</code> types to be sure in the size of storage.</p>\n<h3 id=\"usage-examples\">Usage examples<a class=\"headerlink\" href=\"#usage-examples\" title=\"Permanent link\">&para;</a></h3>\n<p>Here we create a table with an <code>Enum8('hello' = 1, 'world' = 2)</code> type column:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_enum</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">x</span> <span class=\"n\">Enum</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<p>Column <code>x</code> can only store values that are listed in the type definition: <code>'hello'</code> or <code>'world'</code>. If you try to save any other value, ClickHouse will raise an exception. 8-bit size for this <code>Enum</code> is chosen automatically.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_enum</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;world&#39;</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Ok.\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_enum</span> <span class=\"k\">values</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Exception on client:\nCode: 49. DB::Exception: Unknown element &#39;a&#39; for type Enum(&#39;hello&#39; = 1, &#39;world&#39; = 2)\n</code></pre></div>\n\n\n<p>When you query data from the table, ClickHouse outputs the string values from <code>Enum</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_enum</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 hello \u2502\n\u2502 world \u2502\n\u2502 hello \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>If you need to see the numeric equivalents of the rows, you must cast the <code>Enum</code> value to integer type.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Int8&#39;</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_enum</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500CAST(x, &#39;Int8&#39;)\u2500\u2510\n\u2502               1 \u2502\n\u2502               2 \u2502\n\u2502               1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>To create an Enum value in a query, you also need to use <code>CAST</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Enum(\\&#39;</span><span class=\"n\">a</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 1, \\&#39;</span><span class=\"n\">b</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 2)&#39;</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(CAST(&#39;a&#39;, &#39;Enum(\\&#39;a\\&#39; = 1, \\&#39;b\\&#39; = 2)&#39;))\u2500\u2510\n\u2502 Enum8(&#39;a&#39; = 1, &#39;b&#39; = 2)                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"general-rules-and-usage\">General rules and usage<a class=\"headerlink\" href=\"#general-rules-and-usage\" title=\"Permanent link\">&para;</a></h3>\n<p>Each of the values is assigned a number in the range <code>-128 ... 127</code> for <code>Enum8</code> or in the range <code>-32768 ... 32767</code> for <code>Enum16</code>. All the strings and numbers must be different. An empty string is allowed. If this type is specified (in a table definition), numbers can be in an arbitrary order. However, the order does not matter.</p>\n<p>Neither the string nor the numeric value in an <code>Enum</code> can be <a href=\"#../query_language/syntax/\">NULL</a>.</p>\n<p>An <code>Enum</code> can be contained in <a href=\"#nullable/\">Nullable</a> type. So if you create a table using the query</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_enum_nullable</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">x</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<p>it can store not only <code>'hello'</code> and <code>'world'</code>, but <code>NULL</code>, as well.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_enum_nullable</span> <span class=\"k\">Values</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">),(</span><span class=\"s1\">&#39;world&#39;</span><span class=\"p\">),(</span><span class=\"k\">NULL</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>In RAM, an <code>Enum</code> column is stored in the same way as <code>Int8</code> or <code>Int16</code> of the corresponding numerical values.</p>\n<p>When reading in text form, ClickHouse parses the value as a string and searches for the corresponding string from the set of Enum values. If it is not found, an exception is thrown. When reading in text format, the string is read and the corresponding numeric value is looked up. An exception will be thrown if it is not found.<br />\nWhen writing in text form, it writes the value as the corresponding string. If column data contains garbage (numbers that are not from the valid set), an exception is thrown. When reading and writing in binary form, it works the same way as for Int8 and Int16 data types.<br />\nThe implicit default value is the value with the lowest number.</p>\n<p>During <code>ORDER BY</code>, <code>GROUP BY</code>, <code>IN</code>, <code>DISTINCT</code> and so on, Enums behave the same way as the corresponding numbers. For example, ORDER BY sorts them numerically. Equality and comparison operators work the same way on Enums as they do on the underlying numeric values.</p>\n<p>Enum values cannot be compared with numbers. Enums can be compared to a constant string. If the string compared to is not a valid value for the Enum, an exception will be thrown. The IN operator is supported with the Enum on the left hand side and a set of strings on the right hand side. The strings are the values of the corresponding Enum.</p>\n<p>Most numeric and string operations are not defined for Enum values, e.g. adding a number to an Enum or concatenating a string to an Enum.<br />\nHowever, the Enum has a natural <code>toString</code> function that returns its string value.</p>\n<p>Enum values are also convertible to numeric types using the <code>toT</code> function, where T is a numeric type. When T corresponds to the enum\u2019s underlying numeric type, this conversion is zero-cost.<br />\nThe Enum type can be changed without cost using ALTER, if only the set of values is changed. It is possible to both add and remove members of the Enum using ALTER (removing is safe only if the removed value has never been used in the table). As a safeguard, changing the numeric value of a previously defined Enum member will throw an exception.</p>\n<p>Using ALTER, it is possible to change an Enum8 to an Enum16 or vice versa, just like changing an Int8 to Int16.</p>\n<p><a name=\"../data_types/array/\"></a><a name=\"../../../../data_types/array/\"></a><a name=\"array/\"></a><a name=\"../../../data_types/array/\"></a><a name=\"../../data_types/array/\"></a><a name=\"../../../../../data_types/array/\"></a><a name=\"data_types/array/\"></a></p>\n<h2 id=\"data_type-array\">Array(T)<a class=\"headerlink\" href=\"#data_type-array\" title=\"Permanent link\">&para;</a></h2>\n<p>Array of <code>T</code>-type items.</p>\n<p><code>T</code> can be anything, including an array.</p>\n<h3 id=\"creating-an-array\">Creating an array<a class=\"headerlink\" href=\"#creating-an-array\" title=\"Permanent link\">&para;</a></h3>\n<p>You can use a function to create an array:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"n\">T</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>You can also use square brackets.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">[]</span>\n</code></pre></div>\n\n\n<p>Example of creating an array:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"nb\">array</span><span ");
            
            document.write("class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2500\u2500\u2500\u2500\u252c\u2500toTypeName(array(1, 2))\u2500\u2510\n\u2502 [1,2] \u2502 Array(UInt8)            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2500\u2500\u2500\u2500\u252c\u2500toTypeName([1, 2])\u2500\u2510\n\u2502 [1,2] \u2502 Array(UInt8)       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"working-with-data-types\">Working with data types<a class=\"headerlink\" href=\"#working-with-data-types\" title=\"Permanent link\">&para;</a></h3>\n<p>When creating an array on the fly, ClickHouse automatically defines the argument type as the narrowest data type that can store all the listed arguments. If there are any <a href=\"#null-literal\">NULL</a> or <a href=\"#data_type-nullable\">Nullable</a> type arguments, the type of array elements is <a href=\"#nullable/\">Nullable</a>.</p>\n<p>If ClickHouse couldn't determine the data type, it will generate an exception. For instance, this will happen when trying to create an array with strings and numbers simultaneously (<code>SELECT array(1, 'a')</code>).</p>\n<p>Examples of automatic data type detection:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500toTypeName(array(1, 2, NULL))\u2500\u2510\n\u2502 [1,2,NULL] \u2502 Array(Nullable(UInt8))        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>If you try to create an array of incompatible data types, ClickHouse throws an exception:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Received exception from server (version 1.1.54388):\nCode: 386. DB::Exception: Received from localhost:9000, 127.0.0.1. DB::Exception: There is no supertype for types UInt8, String because some of them are String/FixedString and some of them are not.\n</code></pre></div>\n\n\n<p><a name=\"../../../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../../../nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../../../../../nested_data_structures/aggregatefunction/\"></a><a name=\"../../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"nested_data_structures/aggregatefunction/\"></a><a name=\"aggregatefunction/\"></a><a name=\"data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../../../nested_data_structures/aggregatefunction/\"></a><a name=\"../data_types/nested_data_structures/aggregatefunction/\"></a><a name=\"../../nested_data_structures/aggregatefunction/\"></a><a name=\"../nested_data_structures/aggregatefunction/\"></a></p>\n<h2 id=\"data_type-aggregatefunction\">AggregateFunction(name, types_of_arguments...)<a class=\"headerlink\" href=\"#data_type-aggregatefunction\" title=\"Permanent link\">&para;</a></h2>\n<p>The intermediate state of an aggregate function. To get it, use aggregate functions with the <code>-State</code> suffix. To get aggregated data in the future, you must use the same aggregate functions with the <code>-Merge</code>suffix.</p>\n<p><code>AggregateFunction</code> \u2014 parametric data type.</p>\n<p><strong>Parameters</strong></p>\n<ul>\n<li>\n<p>Name of the aggregate function.</p>\n<p>If the function is parametric specify its parameters too.</p>\n</li>\n<li>\n<p>Types of the aggregate function arguments.</p>\n</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">column1</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">uniq</span><span class=\"p\">,</span> <span class=\"n\">UInt64</span><span class=\"p\">),</span>\n    <span class=\"n\">column2</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">anyIf</span><span class=\"p\">,</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">UInt8</span><span class=\"p\">),</span>\n    <span class=\"n\">column3</span> <span class=\"n\">AggregateFunction</span><span class=\"p\">(</span><span class=\"n\">quantiles</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">9</span><span class=\"p\">),</span> <span class=\"n\">UInt64</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p><a href=\"#agg_function-uniq\">uniq</a>, anyIf (<a href=\"#agg_function-any\">any</a>+<a href=\"#agg-functions-combinator-if\">If</a>) and <a href=\"#../../query_language/agg_functions/reference/\">quantiles</a> are the aggregate functions supported in ClickHouse.</p>\n<h3 id=\"usage\">Usage<a class=\"headerlink\" href=\"#usage\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"data-insertion\">Data Insertion<a class=\"headerlink\" href=\"#data-insertion\" title=\"Permanent link\">&para;</a></h4>\n<p>To insert data, use <code>INSERT SELECT</code> with aggregate <code>-State</code>- functions.</p>\n<p><strong>Function examples</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniqState</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span>\n<span class=\"n\">quantilesState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">9</span><span class=\"p\">)(</span><span class=\"n\">SendTiming</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>In contrast to the corresponding functions <code>uniq</code> and <code>quantiles</code>, <code>-State</code>- functions return the state, instead the final value. In other words, they return a value of <code>AggregateFunction</code> type.</p>\n<p>In the results of <code>SELECT</code> query the values of <code>AggregateFunction</code> type have implementation-specific binary representation for all of the ClickHouse output formats. If dump data into, for example, <code>TabSeparated</code> format with <code>SELECT</code> query then this dump can be loaded back using <code>INSERT</code> query.</p>\n<h4 id=\"data-selection\">Data Selection<a class=\"headerlink\" href=\"#data-selection\" title=\"Permanent link\">&para;</a></h4>\n<p>When selecting data from <code>AggregatingMergeTree</code> table, use <code>GROUP BY</code> clause and the same aggregate functions as when inserting data, but using <code>-Merge</code>suffix.</p>\n<p>An aggregate function with <code>-Merge</code> suffix takes a set of states, combines them, and returns the result of complete data aggregation.</p>\n<p>For example, the following two queries return the same result:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">uniqMerge</span><span class=\"p\">(</span><span class=\"k\">state</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"n\">uniqState</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">state</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">RegionID</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<h3 id=\"usage-example_1\">Usage Example<a class=\"headerlink\" href=\"#usage-example_1\" title=\"Permanent link\">&para;</a></h3>\n<p>See <a href=\"#../../operations/table_engines/aggregatingmergetree/\">AggregatingMergeTree</a> engine description.</p>\n<p><a name=\"tuple/\"></a><a name=\"../../../data_types/tuple/\"></a><a name=\"../data_types/tuple/\"></a><a name=\"../../../../data_types/tuple/\"></a><a name=\"../../data_types/tuple/\"></a><a name=\"../../../../../data_types/tuple/\"></a><a name=\"data_types/tuple/\"></a></p>\n<h2 id=\"tuple-t1-t2\">Tuple(T1, T2, ...)<a class=\"headerlink\" href=\"#tuple-t1-t2\" title=\"Permanent link\">&para;</a></h2>\n<p>A tuple of elements, each having an individual <a href=\"#data_types\">type</a>.</p>\n<p>Tuples are used for temporary column grouping. Columns can be grouped when an IN expression is used in a query, and for specifying certain formal parameters of lambda functions. For more information, see the sections <a href=\"#../query_language/select/\">IN operators</a> and <a href=\"#../query_language/functions/higher_order_functions/\">Higher order functions</a>.</p>\n<p>Tuples can be t");
            
            document.write("he result of a query. In this case, for text formats other than JSON, values are comma-separated in brackets. In JSON formats, tuples are output as arrays (in square brackets).</p>\n<h3 id=\"creating-a-tuple\">Creating a tuple<a class=\"headerlink\" href=\"#creating-a-tuple\" title=\"Permanent link\">&para;</a></h3>\n<p>You can use a function to create a tuple:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"n\">T1</span><span class=\"p\">,</span> <span class=\"n\">T2</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p>Example of creating a tuple:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500toTypeName(tuple(1, &#39;a&#39;))\u2500\u2510\n\u2502 (1,&#39;a&#39;) \u2502 Tuple(UInt8, String)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"working-with-data-types_1\">Working with data types<a class=\"headerlink\" href=\"#working-with-data-types_1\" title=\"Permanent link\">&para;</a></h3>\n<p>When creating a tuple on the fly, ClickHouse automatically detects the type of each argument as the minimum of the types which can store the argument value. If the argument is <a href=\"#null-literal\">NULL</a>, the type of the tuple element is <a href=\"#nullable/\">Nullable</a>.</p>\n<p>Example of automatic data type detection:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500toTypeName(tuple(1, NULL))\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 (1,NULL) \u2502 Tuple(UInt8, Nullable(Nothing)) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../../data_types/nullable/\"></a><a name=\"../data_types/nullable/\"></a><a name=\"nullable/\"></a><a name=\"../../../../../data_types/nullable/\"></a><a name=\"../../../data_types/nullable/\"></a><a name=\"data_types/nullable/\"></a><a name=\"../../data_types/nullable/\"></a></p>\n<h2 id=\"data_type-nullable\">Nullable(TypeName)<a class=\"headerlink\" href=\"#data_type-nullable\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows to store special marker (<a href=\"#../query_language/syntax/\">NULL</a>) that denotes \"missing value\" alongside normal values allowed by <code>TypeName</code>. For example, a <code>Nullable(Int8)</code> type column can store <code>Int8</code> type values, and the rows that don't have a value will store <code>NULL</code>.</p>\n<p>For a <code>TypeName</code>, you can't use composite data types <a href=\"#array/\">Array</a> and <a href=\"#tuple/\">Tuple</a>. Composite data types can contain <code>Nullable</code> type values, such as <code>Array(Nullable(Int8))</code>.</p>\n<p>A <code>Nullable</code> type field can't be included in table indexes.</p>\n<p><code>NULL</code> is the default value for any <code>Nullable</code> type, unless specified otherwise in the ClickHouse server configuration.</p>\n<h3 id=\"storage-features\">Storage features<a class=\"headerlink\" href=\"#storage-features\" title=\"Permanent link\">&para;</a></h3>\n<p>To store <code>Nullable</code> type values in table column, ClickHouse uses a separate file with <code>NULL</code> masks in addition to normal file with values. Entries in masks file allow ClickHouse to distinguish between <code>NULL</code> and default value of corresponding data type for each table row. Because of additional file, <code>Nullable</code> column consumes additional storage space compared to similar normal one.</p>\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Note</p>\n<p>Using <code>Nullable</code> almost always negatively affects performance, keep this in mind when designing your databases.</p>\n</div>\n<h3 id=\"usage-example_2\">Usage example<a class=\"headerlink\" href=\"#usage-example_2\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_null</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"nb\">Int8</span><span class=\"p\">,</span> <span class=\"n\">y</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"nb\">Int8</span><span class=\"p\">))</span> <span class=\"n\">ENGINE</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_null</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"n\">y</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500plus(x, y)\u2500\u2510\n\u2502       \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502          5 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../../../data_types/nested_data_structures/\"></a><a name=\"data_types/nested_data_structures/\"></a><a name=\"../../../data_types/nested_data_structures/\"></a><a name=\"../../data_types/nested_data_structures/\"></a><a name=\"../data_types/nested_data_structures/\"></a><a name=\"../../../../data_types/nested_data_structures/\"></a><a name=\"nested_data_structures/\"></a></p>\n<h2 id=\"nested-data-structures\">Nested Data Structures<a class=\"headerlink\" href=\"#nested-data-structures\" title=\"Permanent link\">&para;</a></h2>\n<p><a name=\"../../nested_data_structures/nested/\"></a><a name=\"data_types/nested_data_structures/nested/\"></a><a name=\"../../../../../data_types/nested_data_structures/nested/\"></a><a name=\"../../../data_types/nested_data_structures/nested/\"></a><a name=\"../data_types/nested_data_structures/nested/\"></a><a name=\"nested/\"></a><a name=\"../../../../../nested_data_structures/nested/\"></a><a name=\"../../../../../../nested_data_structures/nested/\"></a><a name=\"../../../../nested_data_structures/nested/\"></a><a name=\"nested_data_structures/nested/\"></a><a name=\"../nested_data_structures/nested/\"></a><a name=\"../../../../data_types/nested_data_structures/nested/\"></a><a name=\"../../data_types/nested_data_structures/nested/\"></a><a name=\"../../../nested_data_structures/nested/\"></a></p>\n<h2 id=\"nested-name1-type1-name2-type2\">Nested(Name1 Type1, Name2 Type2, ...)<a class=\"headerlink\" href=\"#nested-name1-type1-name2-type2\" title=\"Permanent link\">&para;</a></h2>\n<p>A nested data structure is like a nested table. The parameters of a nested data structure \u2013 the column names and types \u2013 are specified the same way as in a CREATE query. Each table row can correspond to any number of rows in a nested data structure.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">CounterID</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">StartDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">Sign</span> <span class=\"nb\">Int8</span><span class=\"p\">,</span>\n    <span class=\"n\">IsNew</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">VisitID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"p\">...</span>\n    <span class=\"n\">Goals</span> <span class=\"n\">Nested</span>\n    <span class=\"p\">(</span>\n        <span class=\"n\">ID</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"nb\">Serial</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n        <span class=\"n\">EventTime</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n        <span class=\"n\">Price</span> <span class=\"n\">Int64</span><span class=\"p\">,</span>\n        <span class=\"n\">OrderID</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n        <span class=\"n\">CurrencyID</span> <span class=\"n\">UInt32</span>\n    <span class=\"p\">),</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">StartDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">StartDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"n\">VisitID</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">,</span> <span class=\"n\">Sign</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>This example declares the <code>Goals</code> nested data structure, which contains data about conversions (goals reached). Each row in the 'visits' table can correspond to zero or any number of conversions.</p>\n<p>Only a single nesting level is supported. Columns of nested structures containing arrays are equivalent to multidimensional arrays, so they have limited support (there is no support for storing these columns in tables with the MergeTree engine).</");
            
            document.write("p>\n<p>In most cases, when working with a nested data structure, its individual columns are specified. To do this, the column names are separated by a dot. These columns make up an array of matching types. All the column arrays of a single nested data structure have the same length.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">,</span>\n    <span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">EventTime</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">)</span> <span class=\"o\">&lt;</span> <span class=\"mi\">5</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500Goals.ID\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500Goals.EventTime\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1073752,591325,591325]        \u2502 [&#39;2014-03-17 16:38:10&#39;,&#39;2014-03-17 16:38:48&#39;,&#39;2014-03-17 16:42:27&#39;]                       \u2502\n\u2502 [1073752]                      \u2502 [&#39;2014-03-17 00:28:25&#39;]                                                                   \u2502\n\u2502 [1073752]                      \u2502 [&#39;2014-03-17 10:46:20&#39;]                                                                   \u2502\n\u2502 [1073752,591325,591325,591325] \u2502 [&#39;2014-03-17 13:59:20&#39;,&#39;2014-03-17 22:17:55&#39;,&#39;2014-03-17 22:18:07&#39;,&#39;2014-03-17 22:18:51&#39;] \u2502\n\u2502 []                             \u2502 []                                                                                        \u2502\n\u2502 [1073752,591325,591325]        \u2502 [&#39;2014-03-17 11:37:06&#39;,&#39;2014-03-17 14:07:47&#39;,&#39;2014-03-17 14:36:21&#39;]                       \u2502\n\u2502 []                             \u2502 []                                                                                        \u2502\n\u2502 []                             \u2502 []                                                                                        \u2502\n\u2502 [591325,1073752]               \u2502 [&#39;2014-03-17 00:46:05&#39;,&#39;2014-03-17 00:46:05&#39;]                                             \u2502\n\u2502 [1073752,591325,591325,591325] \u2502 [&#39;2014-03-17 13:28:33&#39;,&#39;2014-03-17 13:30:26&#39;,&#39;2014-03-17 18:51:21&#39;,&#39;2014-03-17 18:51:45&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>It is easiest to think of a nested data structure as a set of multiple column arrays of the same length.</p>\n<p>The only place where a SELECT query can specify the name of an entire nested data structure instead of individual columns is the ARRAY JOIN clause. For more information, see \"ARRAY JOIN clause\". Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">Goal</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">,</span>\n    <span class=\"n\">Goal</span><span class=\"p\">.</span><span class=\"n\">EventTime</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">Goals</span> <span class=\"k\">AS</span> <span class=\"n\">Goal</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">AND</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">)</span> <span class=\"o\">&lt;</span> <span class=\"mi\">5</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500Goal.ID\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500Goal.EventTime\u2500\u2510\n\u2502 1073752 \u2502 2014-03-17 16:38:10 \u2502\n\u2502  591325 \u2502 2014-03-17 16:38:48 \u2502\n\u2502  591325 \u2502 2014-03-17 16:42:27 \u2502\n\u2502 1073752 \u2502 2014-03-17 00:28:25 \u2502\n\u2502 1073752 \u2502 2014-03-17 10:46:20 \u2502\n\u2502 1073752 \u2502 2014-03-17 13:59:20 \u2502\n\u2502  591325 \u2502 2014-03-17 22:17:55 \u2502\n\u2502  591325 \u2502 2014-03-17 22:18:07 \u2502\n\u2502  591325 \u2502 2014-03-17 22:18:51 \u2502\n\u2502 1073752 \u2502 2014-03-17 11:37:06 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>You can't perform SELECT for an entire nested data structure. You can only explicitly list individual columns that are part of it.</p>\n<p>For an INSERT query, you should pass all the component column arrays of a nested data structure separately (as if they were individual column arrays). During insertion, the system checks that they have the same length.</p>\n<p>For a DESCRIBE query, the columns in a nested data structure are listed separately in the same way.</p>\n<p>The ALTER query is very limited for elements in a nested data structure.</p>\n<p><a name=\"../../../../data_types/special_data_types/\"></a><a name=\"data_types/special_data_types/\"></a><a name=\"../../../../../data_types/special_data_types/\"></a><a name=\"../../../data_types/special_data_types/\"></a><a name=\"../data_types/special_data_types/\"></a><a name=\"../../data_types/special_data_types/\"></a><a name=\"special_data_types/\"></a></p>\n<h2 id=\"special-data-types\">Special Data Types<a class=\"headerlink\" href=\"#special-data-types\" title=\"Permanent link\">&para;</a></h2>\n<p>Special data type values can't be saved to a table or output in results, but are used as the intermediate result of running a query.</p>\n<p><a name=\"../../../../../data_types/special_data_types/expression/\"></a><a name=\"../data_types/special_data_types/expression/\"></a><a name=\"../../../../../../special_../expression/\"></a><a name=\"../../../../special_../expression/\"></a><a name=\"data_types/special_data_types/expression/\"></a><a name=\"../../../special_../expression/\"></a><a name=\"../../../../data_types/special_data_types/expression/\"></a><a name=\"expression/\"></a><a name=\"special_data_types/expression/\"></a><a name=\"../special_../expression/\"></a><a name=\"../../special_../expression/\"></a><a name=\"../../../data_types/special_data_types/expression/\"></a><a name=\"../../data_types/special_data_types/expression/\"></a><a name=\"../../../../../special_../expression/\"></a></p>\n<h2 id=\"expression\">Expression<a class=\"headerlink\" href=\"#expression\" title=\"Permanent link\">&para;</a></h2>\n<p>Used for representing lambda expressions in high-order functions.</p>\n<p><a name=\"../../../data_types/special_data_types/set/\"></a><a name=\"../../../../data_types/special_data_types/set/\"></a><a name=\"../../data_types/special_data_types/set/\"></a><a name=\"data_types/special_data_types/set/\"></a><a name=\"set/\"></a><a name=\"../../../../../data_types/special_data_types/set/\"></a><a name=\"../../../../special_../set/\"></a><a name=\"../../../../../special_../set/\"></a><a name=\"../../../../../../special_../set/\"></a><a name=\"../special_../set/\"></a><a name=\"../../special_../set/\"></a><a name=\"special_data_types/set/\"></a><a name=\"../data_types/special_data_types/set/\"></a><a name=\"../../../special_../set/\"></a></p>\n<h2 id=\"set\">Set<a class=\"headerlink\" href=\"#set\" title=\"Permanent link\">&para;</a></h2>\n<p>Used for the right half of an IN expression.</p>\n<p><a name=\"special_data_types/nothing/\"></a><a name=\"../special_../nothing/\"></a><a name=\"../../../../../../special_../nothing/\"></a><a name=\"nothing/\"></a><a name=\"../../../../../data_types/special_data_types/nothing/\"></a><a name=\"../../special_../nothing/\"></a><a name=\"data_types/special_data_types/nothing/\"></a><a name=\"../../../special_../nothing/\"></a><a name=\"../../../../special_../nothing/\"></a><a name=\"../../../data_types/special_data_types/nothing/\"></a><a name=\"../../../../data_types/special_data_types/nothing/\"></a><a name=\"../data_types/special_data_types/nothing/\"></a><a name=\"../../../../../special_../nothing/\"></a><a name=\"../../data_types/special_data_types/nothing/\"></a></p>\n<h2 id=\"nothing\">Nothing<a class=\"headerlink\" href=\"#nothing\" title=\"Permanent link\">&para;</a></h2>\n<p>The only purpose of this data type is to represent cases where value is not expected. So you can't create a <code>Nothing</code> type value.</p>\n<p>For example, literal <a href=\"#null-literal\">NULL</a> has type of <code>Nullable(Nothing)</code>. See more about <a href=\"#../../data_types/nullable/\">Nullable</a>.</p>\n<p>The <code>Nothing</code> type can also used to denote empty arrays:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">())</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(array())\u2500\u2510\n\u2502 Array(Nothing)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"data_types/domains/overview/\"></a><a name=\"overview/\"></a><a name=\"../../../../../../domains/overview/\"></a><a name=\"../../../../../data_types/domains/overview/\"></a><a name=\"../data_types/domains/overview/\"></a><a name=\"../../data_types/domains/overview/\"></a><a name=\"../../../data_types/domains/overview/\"></a><a name=\"../../domains/overview/\"></a><a name=\"../../../../domains/overview/\"></a><a name=\"../domains/overview/\"></a><a name=\"../../../domains/overview/\"></a><a name=\"../../../../../domains/overview/\"></a><a name=\"domains/overview/\"></a><a name=\"../../../../data_types/domains/overview/\"></a></p>\n<h2 id=\"domains\">Domains<a class=\"headerlink\" href=\"#domains\" title=\"Permanent link\">&para;</a></h2>\n<p>Domains are special-purpose types, that add some extra features atop of existing base type, leaving on-wire and on-disc format of underlying table intact. At the moment, ClickHouse does not support user-defined domains.</p>\n<p>You can use domains anywhere corresponding base type can be used:</p>\n<ul>\n<li>Create a column of domain type</li>\n<li>Read/write values from/to domain column</li>\n<li>Use it as index if base type can be used as index</li>\n<li");
            
            document.write(">Call functions with values of domain column</li>\n<li>etc.</li>\n</ul>\n<h4 id=\"extra-features-of-domains\">Extra Features of Domains<a class=\"headerlink\" href=\"#extra-features-of-domains\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Explicit column type name in <code>SHOW CREATE TABLE</code> or <code>DESCRIBE TABLE</code></li>\n<li>Input from human-friendly format with <code>INSERT INTO domain_table(domain_column) VALUES(...)</code></li>\n<li>Output to human-friendly format for <code>SELECT domain_column FROM domain_table</code></li>\n<li>Loading data from external source in human-friendly format: <code>INSERT INTO domain_table FORMAT CSV ...</code></li>\n</ul>\n<h4 id=\"limitations\">Limitations<a class=\"headerlink\" href=\"#limitations\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Can't convert index column of base type to domain type via <code>ALTER TABLE</code>.</li>\n<li>Can't implicitly convert string values into domain values when inserting data from another column or table.</li>\n<li>Domain adds no constrains on stored values.</li>\n</ul>\n<h3 id=\"ipv4\">IPv4<a class=\"headerlink\" href=\"#ipv4\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IPv4</code> is a domain based on <code>UInt32</code> type and serves as typed replacement for storing IPv4 values. It provides compact storage with human-friendly input-output format, and column type information on inspection.</p>\n<h4 id=\"basic-usage\">Basic Usage<a class=\"headerlink\" href=\"#basic-usage\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"k\">from</span> <span class=\"n\">IPv4</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">url</span><span class=\"p\">;</span>\n\n<span class=\"k\">DESCRIBE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u252c\u2500type\u2500\u2500\u2500\u252c\u2500default_type\u2500\u252c\u2500default_expression\u2500\u252c\u2500comment\u2500\u252c\u2500codec_expression\u2500\u2510\n\u2502 url  \u2502 String \u2502              \u2502                    \u2502         \u2502                  \u2502\n\u2502 from \u2502 IPv4   \u2502              \u2502                    \u2502         \u2502                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>OR you can use IPv4 domain as a key:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"k\">from</span> <span class=\"n\">IPv4</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">from</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><code>IPv4</code> domain supports custom input format as IPv4-strings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;https://wikipedia.org&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;116.253.40.133&#39;</span><span class=\"p\">)(</span><span class=\"s1\">&#39;https://clickhouse.yandex&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;183.247.232.58&#39;</span><span class=\"p\">)(</span><span class=\"s1\">&#39;https://clickhouse.yandex/docs/en/&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;116.106.34.242&#39;</span><span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500url\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500from\u2500\u2510\n\u2502 https://clickhouse.yandex/docs/en/ \u2502 116.106.34.242 \u2502\n\u2502 https://wikipedia.org              \u2502 116.253.40.133 \u2502\n\u2502 https://clickhouse.yandex          \u2502 183.247.232.58 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Values are stored in compact binary form:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">),</span> <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(from)\u2500\u252c\u2500hex(from)\u2500\u2510\n\u2502 IPv4             \u2502 B7F7E83A  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Domain values are not implicitly convertible to types other than <code>UInt32</code>.<br />\nIf you want to convert <code>IPv4</code> value to a string, you have to do that explicitly with <code>IPv4NumToString()</code> function:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">),</span> <span class=\"n\">IPv4NumToString</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">s</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500toTypeName(IPv4NumToString(from))\u2500\u252c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 String                            \u2502 183.247.232.58 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>Or cast to a <code>UInt32</code> value:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">),</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">from</span> <span class=\"k\">as</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">i</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(CAST(from, &#39;UInt32&#39;))\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500i\u2500\u2510\n\u2502 UInt32                           \u2502 3086477370 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"ipv6/\"></a><a name=\"domains/ipv6/\"></a><a name=\"../../../data_types/domains/ipv6/\"></a><a name=\"../../../domains/ipv6/\"></a><a name=\"../../../../data_types/domains/ipv6/\"></a><a name=\"../domains/ipv6/\"></a><a name=\"../../../../../domains/ipv6/\"></a><a name=\"../data_types/domains/ipv6/\"></a><a name=\"../../data_types/domains/ipv6/\"></a><a name=\"../../../../../data_types/domains/ipv6/\"></a><a name=\"../../../../../../domains/ipv6/\"></a><a name=\"data_types/domains/ipv6/\"></a><a name=\"../../../../domains/ipv6/\"></a><a name=\"../../domains/ipv6/\"></a></p>\n<h3 id=\"ipv6\">IPv6<a class=\"headerlink\" href=\"#ipv6\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IPv6</code> is a domain based on <code>FixedString(16)</code> type and serves as typed replacement for storing IPv6 values.  It provides compact storage with human-friendly input-output format, and column type information on inspection.</p>\n<h4 id=\"basic-usage_1\">Basic Usage<a class=\"headerlink\" href=\"#basic-usage_1\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"k\">from</span> <span class=\"n\">IPv6</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">url</span><span class=\"p\">;</span>\n\n<span class=\"k\">DESCRIBE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u252c\u2500type\u2500\u2500\u2500\u252c\u2500default_type\u2500\u252c\u2500default_expression\u2500\u252c\u2500comment\u2500\u252c\u2500codec_expression\u2500\u2510\n\u2502 url  \u2502 String \u2502              \u2502                    \u2502         \u2502                  \u2502\n\u2502 from \u2502 IPv6   \u2502              \u2502                    \u2502         \u2502                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>OR you can use <code>IPv6</code> domain as a key:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"k\">from</span> <span class=\"n\">IPv6</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">from</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><code>IPv6</code> domain supports custom input as IPv6-strings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">hits</span> <span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;https");
            
            document.write("://wikipedia.org&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2a02:aa08:e000:3100::2&#39;</span><span class=\"p\">)(</span><span class=\"s1\">&#39;https://clickhouse.yandex&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2001:44c8:129:2632:33:0:252:2&#39;</span><span class=\"p\">)(</span><span class=\"s1\">&#39;https://clickhouse.yandex/docs/en/&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2a02:e980:1e::1&#39;</span><span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500url\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500from\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 https://clickhouse.yandex          \u2502 2001:44c8:129:2632:33:0:252:2 \u2502\n\u2502 https://clickhouse.yandex/docs/en/ \u2502 2a02:e980:1e::1               \u2502\n\u2502 https://wikipedia.org              \u2502 2a02:aa08:e000:3100::2        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Values are stored in compact binary form:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">),</span> <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(from)\u2500\u252c\u2500hex(from)\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 IPv6             \u2502 200144C8012926320033000002520002 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Domain values are not implicitly convertible to types other than <code>FixedString(16)</code>.<br />\nIf you want to convert <code>IPv6</code> value to a string, you have to do that explicitly with <code>IPv6NumToString()</code> function:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">),</span> <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"k\">from</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">s</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(IPv6NumToString(from))\u2500\u252c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 String                            \u2502 2001:44c8:129:2632:33:0:252:2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Or cast to a <code>FixedString(16)</code> value:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">),</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">from</span> <span class=\"k\">as</span> <span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">16</span><span class=\"p\">))</span> <span class=\"k\">as</span> <span class=\"n\">i</span> <span class=\"k\">FROM</span> <span class=\"n\">hits</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(CAST(from, &#39;FixedString(16)&#39;))\u2500\u252c\u2500i\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 FixedString(16)                           \u2502  \ufffd\ufffd\ufffd \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../database_engines/\"></a><a name=\"database_engines/\"></a><a name=\"../../../../database_engines/\"></a><a name=\"../database_engines/\"></a><a name=\"../../database_engines/\"></a><a name=\"../../../../../database_engines/\"></a></p>\n<h2 id=\"database-engines\">Database Engines<a class=\"headerlink\" href=\"#database-engines\" title=\"Permanent link\">&para;</a></h2>\n<p>Database engines allow you to work with tables.</p>\n<p>By default, ClickHouse uses its native database engine, which provides configurable <a href=\"#../operations/table_engines/\">table engines</a> and an <a href=\"#../query_language/syntax/\">SQL dialect</a>.</p>\n<p>You can also use the following database engines:</p>\n<ul>\n<li><a href=\"#mysql/\">MySQL</a></li>\n</ul>\n<p><a name=\"../database_engines/mysql/\"></a><a name=\"../../database_engines/mysql/\"></a><a name=\"../../../../database_engines/mysql/\"></a><a name=\"../../../database_engines/mysql/\"></a><a name=\"database_engines/mysql/\"></a><a name=\"../../../../../database_engines/mysql/\"></a><a name=\"mysql/\"></a></p>\n<h2 id=\"mysql\">MySQL<a class=\"headerlink\" href=\"#mysql\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows to connect to databases on a remote MySQL server and perform <code>INSERT</code> and <code>SELECT</code> queries with tables to exchange data between ClickHouse and MySQL.</p>\n<p>The <code>MySQL</code> database engine translate queries to the MySQL server so you can perform operations such as <code>SHOW TABLES</code> or <code>SHOW CREATE TABLE</code>.</p>\n<p>You cannot perform the following queries:</p>\n<ul>\n<li><code>ATTACH</code>/<code>DETACH</code></li>\n<li><code>DROP</code></li>\n<li><code>RENAME</code></li>\n<li><code>CREATE TABLE</code></li>\n<li><code>ALTER</code></li>\n</ul>\n<h3 id=\"creating-a-database\">Creating a Database<a class=\"headerlink\" href=\"#creating-a-database\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">DATABASE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">db_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MySQL</span><span class=\"p\">(</span><span class=\"s1\">&#39;host:port&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;database&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Engine Parameters</strong></p>\n<ul>\n<li><code>host:port</code> \u2014 MySQL server address.</li>\n<li><code>database</code> \u2014 Remote database name.</li>\n<li><code>user</code> \u2014 MySQL user.</li>\n<li><code>password</code> \u2014 User password.</li>\n</ul>\n<h3 id=\"data-types-support\">Data Types Support<a class=\"headerlink\" href=\"#data-types-support\" title=\"Permanent link\">&para;</a></h3>\n<p>MySQL | ClickHouse<br />\n<a name=\"table_engines/\"></a><a name=\"../../../../operations/table_engines/\"></a><a name=\"operations/table_engines/\"></a><a name=\"../../operations/table_engines/\"></a><a name=\"../operations/table_engines/\"></a><a name=\"../../../operations/table_engines/\"></a><a name=\"../../../../../operations/table_engines/\"></a></p>\n<h2 id=\"table_engines\">Table engines<a class=\"headerlink\" href=\"#table_engines\" title=\"Permanent link\">&para;</a></h2>\n<p>The table engine (type of table) determines:</p>\n<ul>\n<li>How and where data is stored, where to write it to, and where to read it from.</li>\n<li>Which queries are supported, and how.</li>\n<li>Concurrent data access.</li>\n<li>Use of indexes, if present.</li>\n<li>Whether multithreaded request execution is possible.</li>\n<li>Data replication parameters.</li>\n</ul>\n<h3 id=\"engine-families\">Engine Families<a class=\"headerlink\" href=\"#engine-families\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"mergetree\">MergeTree<a class=\"headerlink\" href=\"#mergetree\" title=\"Permanent link\">&para;</a></h4>\n<p>The most universal and functional table engines for high-load tasks. The property shared by these engines is quick data insertion with subsequent background data processing. <code>MergeTree</code> family engines support data replication (with <a href=\"#replication/\">Replicated*</a> versions of engines), partitioning, and other features not supported in other engines.</p>\n<p>Engines in the family:</p>\n<ul>\n<li><a href=\"#mergetree/\">MergeTree</a></li>\n<li><a href=\"#replacingmergetree/\">ReplacingMergeTree</a></li>\n<li><a href=\"#summingmergetree/\">SummingMergeTree</a></li>\n<li><a href=\"#aggregatingmergetree/\">AggregatingMergeTree</a></li>\n<li><a href=\"#collapsingmergetree/\">CollapsingMergeTree</a></li>\n<li><a href=\"#versionedcollapsingmergetree/\">VersionedCollapsingMergeTree</a></li>\n<li><a href=\"#graphitemergetree/\">GraphiteMergeTree</a></li>\n</ul>\n<h4 id=\"log\">Log<a class=\"headerlink\" href=\"#log\" title=\"Permanent link\">&para;</a></h4>\n<p>Lightweight <a href=\"#log_family/\">engines</a> with minimum functionality. They're the most effective when you need to quickly write many small tables (up to approximately 1 million rows) and read them later as a whole.</p>\n<p>Engines in the family:</p>\n<ul>\n<li><a href=\"#tinylog/\">TinyLog</a></li>\n<li><a href=\"#stripelog/\">StripeLog</a></li>\n<li><a href=\"#log/\">Log</a></li>\n</ul>\n<h4 id=\"intergation-engines\">Intergation engines<a class=\"headerlink\" href=\"#intergation-engines\" title=\"Permanent link\">&para;</a></h4>\n<p>Engines for communicating with other data storage and processing systems.</p>\n<p>Engines in the family:</p>\n<ul>\n<li><a href=\"#kafka/\">Kafka</a></li>\n<li><a href=\"#mysql/\">MySQL</a></li>\n<li><a href=\"#odbc/\">ODBC</a></li>\n<li><a href=\"#jdbc/\">JDBC</a></li>\n<li><a href=\"#hdfs/\">HDFS</a></li>\n</ul>\n<h4 id=\"special-engines\">Special engines<a class=\"headerlink\" href=\"#special-engines\" title=\"Permanent link\">&para;</a></h4>\n<p>Engines in the family:</p>\n<ul>\n<li><a href=\"#distributed/\">Distributed</a></li>\n<li><a href=\"#materializedview/\">MaterializedView</a></li>\n<li><a href=\"#dictionary/\">Dictionary</a></li>\n<li><a href=\"#merge/\">Merge</a></li>\n<li><a href=\"#file/\">File</a></li>\n<li><a href=\"#null/\">Null</a></li>\n<li><a href=\"#set/\">Set</a></li>\n<li><a href=\"#join/\">Join</a></li>\n<li><a href=\"#url/\">URL</a></li>\n<li><a href=\"#view/\">View</a></li>\n<li><a href=\"#memory/\">Memory</a></li>\n<li><a href");
            
            document.write("=\"#buffer/\">Buffer</a></li>\n</ul>\n<h3 id=\"table_engines-virtual_columns\">Virtual columns<a class=\"headerlink\" href=\"#table_engines-virtual_columns\" title=\"Permanent link\">&para;</a></h3>\n<p>Virtual column is an integral table engine attribute that is defined in the engine source code.</p>\n<p>You shouldn't specify virtual columns in the <code>CREATE TABLE</code> query and you can't see them in <code>SHOW CREATE TABLE</code> and <code>DESCRIBE TABLE</code> query results. Virtual columns are also read-only, so you can't insert data into virtual columns.</p>\n<p>To select data from a virtual column, you must specify its name in the <code>SELECT</code> query. <code>SELECT *</code> doesn't return values from virtual columns.</p>\n<p>If you create a table with a column that has the same name as one of the table virtual columns, the virtual column becomes inaccessible. We don't recommend doing this. To help avoid conflicts, virtual column names are usually prefixed with an underscore.</p>\n<p><a name=\"../../../../operations/table_engines/mergetree/\"></a><a name=\"../../../operations/table_engines/mergetree/\"></a><a name=\"../../../table_engines/mergetree/\"></a><a name=\"../table_engines/mergetree/\"></a><a name=\"../../../../../operations/table_engines/mergetree/\"></a><a name=\"../../../../../table_engines/mergetree/\"></a><a name=\"../../../../table_engines/mergetree/\"></a><a name=\"table_engines/mergetree/\"></a><a name=\"../../table_engines/mergetree/\"></a><a name=\"../../../../../../table_engines/mergetree/\"></a><a name=\"../operations/table_engines/mergetree/\"></a><a name=\"../../operations/table_engines/mergetree/\"></a><a name=\"operations/table_engines/mergetree/\"></a><a name=\"mergetree/\"></a></p>\n<h2 id=\"table_engines-mergetree\">MergeTree<a class=\"headerlink\" href=\"#table_engines-mergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>The <code>MergeTree</code> engine and other engines of this family (<code>*MergeTree</code>) are the most robust ClickHous\u0435 table engines.</p>\n<p>Engines in the <code>MergeTree</code> family are designed for inserting a very large amount of data into a table. The data is quickly written to the table part by part, then rules are applied for merging the parts in the background. This method is much more efficient than continually rewriting the data in storage during insert.</p>\n<p>Main features:</p>\n<ul>\n<li>\n<p>Stores data sorted by primary key.</p>\n<p>This allows you to create a small sparse index that helps find data faster.</p>\n</li>\n<li>\n<p>Partitions can be used if the <a href=\"#custom_partitioning_key/\">partitioning key</a> is specified.</p>\n<p>ClickHouse supports certain operations with partitions that are more effective than general operations on the same data with the same result. ClickHouse also automatically cuts off the partition data where the partitioning key is specified in the query. This also improves query performance.</p>\n</li>\n<li>\n<p>Data replication support.</p>\n<p>The family of <code>ReplicatedMergeTree</code> tables provides data replication. For more information, see <a href=\"#replication/\">Data replication</a>.</p>\n</li>\n<li>\n<p>Data sampling support.</p>\n<p>If necessary, you can set the data sampling method in the table.</p>\n</li>\n</ul>\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Info</p>\n<p>The <a href=\"#merge/\">Merge</a> engine does not belong to the <code>*MergeTree</code> family.</p>\n</div>\n<h3 id=\"table_engine-mergetree-creating-a-table\">Creating a Table<a class=\"headerlink\" href=\"#table_engine-mergetree-creating-a-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n    <span class=\"k\">INDEX</span> <span class=\"n\">index_name1</span> <span class=\"n\">expr1</span> <span class=\"k\">TYPE</span> <span class=\"n\">type1</span><span class=\"p\">(...)</span> <span class=\"n\">GRANULARITY</span> <span class=\"n\">value1</span><span class=\"p\">,</span>\n    <span class=\"k\">INDEX</span> <span class=\"n\">index_name2</span> <span class=\"n\">expr2</span> <span class=\"k\">TYPE</span> <span class=\"n\">type2</span><span class=\"p\">(...)</span> <span class=\"n\">GRANULARITY</span> <span class=\"n\">value2</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">PRIMARY</span> <span class=\"k\">KEY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>For a description of parameters, see the <a href=\"#../../query_language/create/\">CREATE query description</a>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p><code>INDEX</code> is an experimental feature, see <a href=\"#table_engine-mergetree-data_skipping-indexes\">Data Skipping Indexes</a>.</p>\n</div>\n<h4 id=\"query-clauses\">Query Clauses<a class=\"headerlink\" href=\"#query-clauses\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>\n<p><code>ENGINE</code> \u2014 Name and parameters of the engine. <code>ENGINE = MergeTree()</code>. The <code>MergeTree</code> engine does not have parameters.</p>\n</li>\n<li>\n<p><code>PARTITION BY</code> \u2014 The <a href=\"#custom_partitioning_key/\">partitioning key</a>.</p>\n<p>For partitioning by month, use the <code>toYYYYMM(date_column)</code> expression, where <code>date_column</code> is a column with a date of the type <a href=\"#../../data_types/date/\">Date</a>. The partition names here have the <code>\"YYYYMM\"</code> format.</p>\n</li>\n<li>\n<p><code>ORDER BY</code> \u2014 The sorting key.</p>\n<p>A tuple of columns or arbitrary expressions. Example: <code>ORDER BY (CounterID, EventDate)</code>.</p>\n</li>\n<li>\n<p><code>PRIMARY KEY</code> \u2014 The primary key if it <a href=\"#mergetree/\">differs from the sorting key</a>.</p>\n<p>By default the primary key is the same as the sorting key (which is specified by the <code>ORDER BY</code> clause). Thus in most cases it is unnecessary to specify a separate <code>PRIMARY KEY</code> clause.</p>\n</li>\n<li>\n<p><code>SAMPLE BY</code> \u2014 An expression for sampling.</p>\n<p>If a sampling expression is used, the primary key must contain it. Example: <code>SAMPLE BY intHash32(UserID) ORDER BY (CounterID, EventDate, intHash32(UserID))</code>.</p>\n</li>\n<li>\n<p><code>TTL</code> \u2014 An expression for setting storage time for rows.</p>\n<p>It must depend on the <code>Date</code> or <code>DateTime</code> column and have one <code>Date</code> or <code>DateTime</code> column as a result. Example:<br />\n<code>TTL date + INTERVAL 1 DAY</code></p>\n<p>For more details, see <a href=\"#table_engine-mergetree-ttl\">TTL for columns and tables</a></p>\n</li>\n<li>\n<p><code>SETTINGS</code> \u2014 Additional parameters that control the behavior of the <code>MergeTree</code>:</p>\n<ul>\n<li><code>index_granularity</code> \u2014 The granularity of an index. The number of data rows between the \"marks\" of an index. By default, 8192. For the list of available parameters, see <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/src/Storages/MergeTree/MergeTreeSettings.h\" rel=\"external nofollow noreferrer\">MergeTreeSettings.h</a>.</li>\n<li><code>use_minimalistic_part_header_in_zookeeper</code> \u2014 Storage method of the data parts headers in ZooKeeper. If  <code>use_minimalistic_part_header_in_zookeeper=1</code>, then ZooKeeper stores less data. For more information, see the <a href=\"#server-settings-use_minimalistic_part_header_in_zookeeper\">setting description</a> in \"Server configuration parameters\".</li>\n<li><code>min_merge_bytes_to_use_direct_io</code> \u2014 The minimum data volume for merge operation that is required for using direct I/O access to the storage disk. When merging data parts, ClickHouse calculates the total storage volume of all the data to be merged. If the volume exceeds <code>min_merge_bytes_to_use_direct_io</code> bytes, ClickHouse reads and writes the data to the storage disk using the direct I/O interface (<code>O_DIRECT</code> option). If <code>min_merge_bytes_to_use_direct_io = 0</code>, then direct I/O is disabled. Default value: <code>10 * 1024 * 1024 * 1024</code> bytes.<br />\n<a name=\"mergetree_setting-merge_with_ttl_timeout\"></a></li>\n<li><code>merge_with_ttl_timeout</code> \u2014 Minimum delay in seconds before repeating a m");
            
            document.write("erge with TTL. Default value: 86400 (1 day).</li>\n</ul>\n</li>\n</ul>\n<p><strong>Example of Sections Setting</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ENGINE</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span> <span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">EventDate</span><span class=\"p\">)</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">))</span> <span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"n\">SETTINGS</span> <span class=\"n\">index_granularity</span><span class=\"o\">=</span><span class=\"mi\">8192</span>\n</code></pre></div>\n\n\n<p>In the example, we set partitioning by month.</p>\n<p>We also set an expression for sampling as a hash by the user ID. This allows you to pseudorandomize the data in the table for each <code>CounterID</code> and <code>EventDate</code>. If you define a <a href=\"#select-sample-clause\">SAMPLE</a> clause when selecting the data, ClickHouse will return an evenly pseudorandom data sample for a subset of users.</p>\n<p>The <code>index_granularity</code> setting can be omitted because 8192 is the default value.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects. If possible, switch old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>MergeTree() Parameters</strong></p>\n<ul>\n<li><code>date-column</code> \u2014 The name of a column of the <a href=\"#../../data_types/date/\">Date</a> type. ClickHouse automatically creates partitions by month based on this column. The partition names are in the <code>\"YYYYMM\"</code> format.</li>\n<li><code>sampling_expression</code> \u2014 An expression for sampling.</li>\n<li><code>(primary, key)</code> \u2014 Primary key. Type: <a href=\"#../../data_types/tuple/\">Tuple()</a></li>\n<li><code>index_granularity</code> \u2014 The granularity of an index. The number of data rows between the \"marks\" of an index. The value 8192 is appropriate for most tasks.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)),</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The <code>MergeTree</code> engine is configured in the same way as in the example above for the main engine configuration method.</p>\n</details>\n<h3 id=\"data-storage\">Data Storage<a class=\"headerlink\" href=\"#data-storage\" title=\"Permanent link\">&para;</a></h3>\n<p>A table consists of data parts sorted by primary key.</p>\n<p>When data is inserted in a table, separate data parts are created and each of them is lexicographically sorted by primary key. For example, if the primary key is <code>(CounterID, Date)</code>, the data in the part is sorted by <code>CounterID</code>, and within each <code>CounterID</code>, it is ordered by <code>Date</code>.</p>\n<p>Data belonging to different partitions are separated into different parts. In the background, ClickHouse merges data parts for more efficient storage. Parts belonging to different partitions are not merged. The merge mechanism does not guarantee that all rows with the same primary key will be in the same data part.</p>\n<p>For each data part, ClickHouse creates an index file that contains the primary key value for each index row (\"mark\"). Index row numbers are defined as <code>n * index_granularity</code>. The maximum value <code>n</code> is equal to the integer part of dividing the total number of rows by the <code>index_granularity</code>. For each column, the \"marks\" are also written for the same index rows as the primary key. These \"marks\" allow you to find the data directly in the columns.</p>\n<p>You can use a single large table and continually add data to it in small chunks \u2013 this is what the <code>MergeTree</code> engine is intended for.</p>\n<h3 id=\"primary-keys-and-indexes-in-queries\">Primary Keys and Indexes in Queries<a class=\"headerlink\" href=\"#primary-keys-and-indexes-in-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Take the <code>(CounterID, Date)</code> primary key as an example. In this case, the sorting and index can be illustrated as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Whole</span><span class=\"w\"> </span><span class=\"k\">data</span><span class=\"err\">:</span><span class=\"w\">     </span><span class=\"o\">[</span><span class=\"n\">-------------------------------------------------------------------------</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"nl\">CounterID</span><span class=\"p\">:</span><span class=\"w\">      </span><span class=\"o\">[</span><span class=\"n\">aaaaaaaaaaaaaaaaaabbbbcdeeeeeeeeeeeeefgggggggghhhhhhhhhiiiiiiiiikllllllll</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"nc\">Date</span><span class=\"err\">:</span><span class=\"w\">           </span><span class=\"o\">[</span><span class=\"n\">1111111222222233331233211111222222333211111112122222223111112223311122333</span><span class=\"o\">]</span><span class=\"w\"></span>\n<span class=\"nl\">Marks</span><span class=\"p\">:</span><span class=\"w\">           </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\">      </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"w\">    </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"w\">    </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\">    </span><span class=\"n\">b</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\">    </span><span class=\"n\">e</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"w\">    </span><span class=\"n\">e</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\">    </span><span class=\"n\">g</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"w\">    </span><span class=\"n\">h</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"w\">    </span><span class=\"n\">i</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"w\">    </span><span class=\"n\">i</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\">    </span><span class=\"n\">l</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"w\"></span>\n<span class=\"n\">Marks</span><span class=\"w\"> </span><span class=\"nl\">numbers</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">0</span><span class=\"w\">      </span><span class=\"mi\">1</span><span class=\"w\">      </span><span class=\"mi\">2</span><span class=\"w\">      </span><span class=\"mi\">3</span><span class=\"w\">      </span><span class=\"mi\">4</span><span class=\"w\">      </span><span class=\"mi\">5</span><span class=\"w\">      </span><span class=\"mi\">6</span><span class=\"w\">      </span><span class=\"mi\">7</span><span class=\"w\">      </span><span class=\"mi\">8</span><span class=\"w\">      </span><span class=\"mi\">9</span><span class=\"w\">      </span><span class=\"mi\">10</span><span class=\"w\"></span>\n</code></pre></");
            
            document.write("div>\n\n\n<p>If the data query specifies:</p>\n<ul>\n<li><code>CounterID in ('a', 'h')</code>, the server reads the data in the ranges of marks <code>[0, 3)</code> and <code>[6, 8)</code>.</li>\n<li><code>CounterID IN ('a', 'h') AND Date = 3</code>, the server reads the data in the ranges of marks <code>[1, 3)</code> and <code>[7, 8)</code>.</li>\n<li><code>Date = 3</code>, the server reads the data in the range of marks <code>[1, 10]</code>.</li>\n</ul>\n<p>The examples above show that it is always more effective to use an index than a full scan.</p>\n<p>A sparse index allows extra data to be read. When reading a single range of the primary key, up to <code>index_granularity * 2</code> extra rows in each data block can be read. In most cases, ClickHouse performance does not degrade when <code>index_granularity = 8192</code>.</p>\n<p>Sparse indexes allow you to work with a very large number of table rows, because such indexes are always stored in the computer's RAM.</p>\n<p>ClickHouse does not require a unique primary key. You can insert multiple rows with the same primary key.</p>\n<h4 id=\"selecting-the-primary-key\">Selecting the Primary Key<a class=\"headerlink\" href=\"#selecting-the-primary-key\" title=\"Permanent link\">&para;</a></h4>\n<p>The number of columns in the primary key is not explicitly limited. Depending on the data structure, you can include more or fewer columns in the primary key. This may:</p>\n<ul>\n<li>\n<p>Improve the performance of an index.</p>\n<p>If the primary key is <code>(a, b)</code>, then adding another column <code>c</code> will improve the performance if the following conditions are met:</p>\n<ul>\n<li>There are queries with a condition on column <code>c</code>.</li>\n<li>Long data ranges (several times longer than the <code>index_granularity</code>) with identical values for <code>(a, b)</code> are common. In other words, when adding another column allows you to skip quite long data ranges.</li>\n</ul>\n</li>\n<li>\n<p>Improve data compression.</p>\n<p>ClickHouse sorts data by primary key, so the higher the consistency, the better the compression.</p>\n</li>\n<li>\n<p>Provide additional logic when merging data parts in the <a href=\"#table_engine-collapsingmergetree\">CollapsingMergeTree</a> and <a href=\"#summingmergetree/\">SummingMergeTree</a> engines.</p>\n<p>In this case it makes sense to specify the <em>sorting key</em> that is different from the primary key.</p>\n</li>\n</ul>\n<p>A long primary key will negatively affect the insert performance and memory consumption, but extra columns in the primary key do not affect ClickHouse performance during <code>SELECT</code> queries.</p>\n<h4 id=\"choosing-a-primary-key-that-differs-from-the-sorting-key\">Choosing a Primary Key that Differs from the Sorting Key<a class=\"headerlink\" href=\"#choosing-a-primary-key-that-differs-from-the-sorting-key\" title=\"Permanent link\">&para;</a></h4>\n<p>It is possible to specify a primary key (an expression with values that are written in the index file for each mark) that is different from the sorting key (an expression for sorting the rows in data parts). In this case the primary key expression tuple must be a prefix of the sorting key expression tuple.</p>\n<p>This feature is helpful when using the <a href=\"#summingmergetree/\">SummingMergeTree</a> and<br />\n<a href=\"#aggregatingmergetree/\">AggregatingMergeTree</a> table engines. In a common case when using these engines, the table has two types of columns: <em>dimensions</em> and <em>measures</em>. Typical queries aggregate values of measure columns with arbitrary <code>GROUP BY</code> and filtering by dimensions. Because SummingMergeTree and AggregatingMergeTree aggregate rows with the same value of the sorting key, it is natural to add all dimensions to it. As a result, the key expression consists of a long list of columns and this list must be frequently updated with newly added dimensions.</p>\n<p>In this case it makes sense to leave only a few columns in the primary key that will provide efficient range scans and add the remaining dimension columns to the sorting key tuple.</p>\n<p><a href=\"#../../query_language/alter/\">ALTER</a> of the sorting key is a lightweight operation because when a new column is simultaneously added to the table and to the sorting key, existing data parts don't need to be changed. Since the old sorting key is a prefix of the new sorting key and there is no data in the newly added column, the data is sorted by both the old and new sorting keys at the moment of table modification.</p>\n<h4 id=\"use-of-indexes-and-partitions-in-queries\">Use of Indexes and Partitions in Queries<a class=\"headerlink\" href=\"#use-of-indexes-and-partitions-in-queries\" title=\"Permanent link\">&para;</a></h4>\n<p>For <code>SELECT</code> queries, ClickHouse analyzes whether an index can be used. An index can be used if the <code>WHERE/PREWHERE</code> clause has an expression (as one of the conjunction elements, or entirely) that represents an equality or inequality comparison operation, or if it has <code>IN</code> or <code>LIKE</code> with a fixed prefix on columns or expressions that are in the primary key or partitioning key, or on certain partially repetitive functions of these columns, or logical relationships of these expressions.</p>\n<p>Thus, it is possible to quickly run queries on one or many ranges of the primary key. In this example, queries will be fast when run for a specific tracking tag, for a specific tag and date range, for a specific tag and date, for multiple tags with a date range, and so on.</p>\n<p>Let's look at the engine configured as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">ENGINE MergeTree() PARTITION BY toYYYYMM(EventDate) ORDER BY (CounterID, EventDate) SETTINGS index_granularity=8192</span>\n</code></pre></div>\n\n\n<p>In this case, in queries:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">())</span> <span class=\"k\">AND</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">())</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span> <span class=\"k\">OR</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">42</span><span class=\"p\">)</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"p\">((</span><span class=\"n\">EventDate</span> <span class=\"o\">&gt;=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">EventDate</span> <span class=\"o\">&lt;=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-01-31&#39;</span><span class=\"p\">))</span> <span class=\"k\">OR</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-05-01&#39;</span><span class=\"p\">))</span> <span class=\"k\">AND</span> <span class=\"n\">CounterID</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"mi\">101500</span><span class=\"p\">,</span> <span class=\"mi\">731962</span><span class=\"p\">,</span> <span class=\"mi\">160656</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">101500</span> <span class=\"k\">OR</span> <span class=\"n\">EventDate</span> <span class=\"o\">!=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2014-05-01&#39;</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<p>ClickHouse will use the primary key index to trim improper data and the monthly partitioning key to trim partitions that are in improper date ranges.</p>\n<p>The queries above show that the index is used even for complex expressions. Reading from the table is organized so that using the index can't be slower than a full scan.</p>\n<p>In the example below, the index can't be used.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span> <span class=\"k\">OR</span> <span class=\"n\">URL</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%upyachka%&#39;</span>\n</code></pre></div>\n\n\n<p>To check whether ClickHouse can use the index when running a query, use the settings <a href=\"#settings-force_index_by_date\">force_index_by_date</a> and <a href=\"#../settings/settings/\">force_primary_key</a>.</p>\n<p>The key for partitioning by month allows reading only those data blocks which contain dates from the proper range. In this case, the data block may contain data for many dates (up to an entire month). Within a block, data is sorted by primary key, which might not contain the date as the first column. Because of this, using a query with only a date condition that does not specify the primary key prefix will cause more data to be read than for a single date.</p>\n<h4 id=\"use-of-index-for-partially-monotonic-primary-keys\">Use of Index for Partially-Monotonic Primary Keys<a class=\"headerlink\" href=\"#use-of-index-for-partially-monotonic-primary-keys\" title=\"Permanent link\">&para;</a></h4>\n<p>Consider, for example, the days of the month. They form a <a href=\"https://en.wikipedia.org/wiki/Monotonic_");
            
            document.write("function\" rel=\"external nofollow noreferrer\">monotonic sequence</a> for one month, but not monotonic for more extended periods. This is a partially-monotonic sequence. If a user creates the table with partially-monotonic primary key, ClickHouse creates a sparse index as usual. When a user selects data from this kind of table, ClickHouse analyzes the query conditions. If the user wants to get data between two marks of the index and both these marks fall within one month, ClickHouse can use the index in this particular case because it can calculate the distance between the parameters of a query and index marks.</p>\n<p>ClickHouse cannot use an index if the values of the primary key in the query parameter range don't represent a monotonic sequence. In this case, ClickHouse uses the full scan method.</p>\n<p>ClickHouse uses this logic not only for days of the month sequences, but for any primary key that represents a partially-monotonic sequence.</p>\n<h4 id=\"table_engine-mergetree-data_skipping-indexes\">Data Skipping Indexes (Experimental)<a class=\"headerlink\" href=\"#table_engine-mergetree-data_skipping-indexes\" title=\"Permanent link\">&para;</a></h4>\n<p>You need to set <code>allow_experimental_data_skipping_indices</code> to 1 to use indices.  (run <code>SET allow_experimental_data_skipping_indices = 1</code>).</p>\n<p>The index declaration is in the columns section of the <code>CREATE</code> query.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INDEX</span> <span class=\"n\">index_name</span> <span class=\"n\">expr</span> <span class=\"k\">TYPE</span> <span class=\"k\">type</span><span class=\"p\">(...)</span> <span class=\"n\">GRANULARITY</span> <span class=\"n\">granularity_value</span>\n</code></pre></div>\n\n\n<p>For tables from the <code>*MergeTree</code> family, data skipping indices can be specified.</p>\n<p>These indices aggregate some information about the specified expression on blocks, which consist of <code>granularity_value</code> granules (the size of the granule is specified using the <code>index_granularity</code> setting in the table engine). Then these aggregates are used in <code>SELECT</code> queries for reducing the amount of data to read from the disk by skipping big blocks of data where the <code>where</code> query cannot be satisfied.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">u64</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">i32</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"p\">...</span>\n    <span class=\"k\">INDEX</span> <span class=\"n\">a</span> <span class=\"p\">(</span><span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"n\">i32</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"k\">TYPE</span> <span class=\"n\">minmax</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">3</span><span class=\"p\">,</span>\n    <span class=\"k\">INDEX</span> <span class=\"n\">b</span> <span class=\"p\">(</span><span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">))</span> <span class=\"k\">TYPE</span> <span class=\"k\">set</span><span class=\"p\">(</span><span class=\"mi\">1000</span><span class=\"p\">)</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">4</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span>\n<span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>Indices from the example can be used by ClickHouse to reduce the amount of data to read from disk in the following queries:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">s</span> <span class=\"o\">&lt;</span> <span class=\"s1\">&#39;z&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span> <span class=\"k\">WHERE</span> <span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"n\">i32</span> <span class=\"o\">==</span> <span class=\"mi\">10</span> <span class=\"k\">AND</span> <span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">1234</span>\n</code></pre></div>\n\n\n<h5 id=\"available-types-of-indices\">Available Types of Indices<a class=\"headerlink\" href=\"#available-types-of-indices\" title=\"Permanent link\">&para;</a></h5>\n<ul>\n<li>\n<p><code>minmax</code></p>\n<p>Stores extremes of the specified expression (if the expression is <code>tuple</code>, then it stores extremes for each element of <code>tuple</code>), uses stored info for skipping blocks of data like the primary key.</p>\n</li>\n<li>\n<p><code>set(max_rows)</code></p>\n<p>Stores unique values of the specified expression (no more than <code>max_rows</code> rows, <code>max_rows=0</code> means \"no limits\"). Uses the values to check if the <code>WHERE</code> expression is not satisfiable on a block of data.  </p>\n</li>\n<li>\n<p><code>ngrambf_v1(n, size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code></p>\n<p>Stores a <a href=\"https://en.wikipedia.org/wiki/Bloom_filter\" rel=\"external nofollow noreferrer\">Bloom filter</a> that contains all ngrams from a block of data. Works only with strings. Can be used for optimization of <code>equals</code>, <code>like</code> and <code>in</code> expressions.</p>\n<ul>\n<li><code>n</code> \u2014 ngram size,</li>\n<li><code>size_of_bloom_filter_in_bytes</code> \u2014 Bloom filter size in bytes (you can use large values here, for example, 256 or 512, because it can be compressed well).</li>\n<li><code>number_of_hash_functions</code> \u2014 The number of hash functions used in the Bloom filter.</li>\n<li><code>random_seed</code> \u2014 The seed for Bloom filter hash functions.</li>\n</ul>\n</li>\n<li>\n<p><code>tokenbf_v1(size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code></p>\n<p>The same as <code>ngrambf_v1</code>, but stores tokens instead of ngrams. Tokens are sequences separated by non-alphanumeric characters.</p>\n</li>\n<li>\n<p><code>bloom_filter([false_positive])</code> \u2014 Stores a <a href=\"https://en.wikipedia.org/wiki/Bloom_filter\" rel=\"external nofollow noreferrer\">Bloom filter</a> for the specified columns.</p>\n<p>The optional <code>false_positive</code> parameter is the probability of receiving a false positive response from the filter. Possible values: (0, 1). Default value: 0.025.</p>\n<p>Supported data types: <code>Int*</code>, <code>UInt*</code>, <code>Float*</code>, <code>Enum</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, <code>FixedString</code>.</p>\n<p>The following functions can use it: <a href=\"#../../query_language/functions/comparison_functions/\">equals</a>, <a href=\"#../../query_language/functions/comparison_functions/\">notEquals</a>, <a href=\"#../../query_language/functions/in_functions/\">in</a>, <a href=\"#../../query_language/functions/in_functions/\">notIn</a>.</p>\n</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INDEX</span> <span class=\"n\">sample_index</span> <span class=\"p\">(</span><span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">))</span> <span class=\"k\">TYPE</span> <span class=\"n\">minmax</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">4</span>\n<span class=\"k\">INDEX</span> <span class=\"n\">sample_index2</span> <span class=\"p\">(</span><span class=\"n\">u64</span> <span class=\"o\">*</span> <span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">str</span><span class=\"p\">),</span> <span class=\"n\">i32</span> <span class=\"o\">+</span> <span class=\"n\">f64</span> <span class=\"o\">*</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">str</span><span class=\"p\">)</span> <span class=\"k\">TYPE</span> <span class=\"k\">set</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">)</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">4</span>\n<span class=\"k\">INDEX</span> <span class=\"n\">sample_index3</span> <span class=\"p\">(</span><span class=\"k\">lower</span><span class=\"p\">(</span><span class=\"n\">str</span><span class=\"p\">),</span> <span class=\"n\">str</span><span class=\"p\">)</span> <span class=\"k\">TYPE</span> <span class=\"n\">ngrambf_v1</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">256</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"n\">GRANULARITY</span> <span class=\"mi\">4</span>\n</code></pre></div>\n\n\n<h5 id=\"functions-support\">Functions Support<a class=\"headerlink\" href=\"#functions-support\" title=\"Permanent link\">&para;</a></h5>\n<p>Conditions in the <code>WHERE</code> clause contains calls of the functions that operate with columns. If the column is a part of an index, ClickHouse tries to use this index when performing the functions. ClickHouse supports different subsets of functions for using indexes.</p>\n<p>The <code>set</code> index can be used with all functions. Function subsets for other indexes are shown in the table below.</p>\n<p>Function (operator) / Index | primary key | minmax | ngrambf_v1 | tokenbf_v1 | bloom_filter<br />\n<a name=\"../../../table_engines/replication/\"></a><a name=\"../table_engines/replication/\"></a><a name=\"../../table_engines/replication/\"></a><a name=\"../../../../../table_engines/replication/\"></a><a name=\"../../../../../../table_engines/replication/\"></a><a name=\"replication/\"></a><a name=\"../operations/table_engines/replication/\"></a><a name=\"table_engines/replication/\"></a><a name=\"..");
            
            document.write("/../operations/table_engines/replication/\"></a><a name=\"../../../../operations/table_engines/replication/\"></a><a name=\"../../../../../operations/table_engines/replication/\"></a><a name=\"../../../../table_engines/replication/\"></a><a name=\"../../../operations/table_engines/replication/\"></a><a name=\"operations/table_engines/replication/\"></a></p>\n<h2 id=\"table_engines-replication\">Data Replication<a class=\"headerlink\" href=\"#table_engines-replication\" title=\"Permanent link\">&para;</a></h2>\n<p>Replication is only supported for tables in the MergeTree family:</p>\n<ul>\n<li>ReplicatedMergeTree</li>\n<li>ReplicatedSummingMergeTree</li>\n<li>ReplicatedReplacingMergeTree</li>\n<li>ReplicatedAggregatingMergeTree</li>\n<li>ReplicatedCollapsingMergeTree</li>\n<li>ReplicatedVersionedCollapsingMergeTree</li>\n<li>ReplicatedGraphiteMergeTree</li>\n</ul>\n<p>Replication works at the level of an individual table, not the entire server. A server can store both replicated and non-replicated tables at the same time.</p>\n<p>Replication does not depend on sharding. Each shard has its own independent replication.</p>\n<p>Compressed data for <code>INSERT</code> and <code>ALTER</code> queries is replicated (for more information, see the documentation for <a href=\"#query_language_queries_alter\">ALTER</a>).</p>\n<p><code>CREATE</code>, <code>DROP</code>, <code>ATTACH</code>, <code>DETACH</code> and <code>RENAME</code> queries are executed on a single server and are not replicated:</p>\n<ul>\n<li>The <code>CREATE TABLE</code> query creates a new replicatable table on the server where the query is run. If this table already exists on other servers, it adds a new replica.</li>\n<li>The <code>DROP TABLE</code> query deletes the replica located on the server where the query is run.</li>\n<li>The <code>RENAME</code> query renames the table on one of the replicas. In other words, replicated tables can have different names on different replicas.</li>\n</ul>\n<p>To use replication, set the addresses of the ZooKeeper cluster in the config file. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;zookeeper&gt;</span>\n    <span class=\"nt\">&lt;node</span> <span class=\"na\">index=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example1<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;node</span> <span class=\"na\">index=</span><span class=\"s\">&quot;2&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example2<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;node</span> <span class=\"na\">index=</span><span class=\"s\">&quot;3&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example3<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n<span class=\"nt\">&lt;/zookeeper&gt;</span>\n</code></pre></div>\n\n\n<p>Use ZooKeeper version 3.4.5 or later.</p>\n<p>You can specify any existing ZooKeeper cluster and the system will use a directory on it for its own data (the directory is specified when creating a replicatable table).</p>\n<p>If ZooKeeper isn't set in the config file, you can't create replicated tables, and any existing replicated tables will be read-only.</p>\n<p>ZooKeeper is not used in <code>SELECT</code> queries because replication does not affect the performance of <code>SELECT</code> and queries run just as fast as they do for non-replicated tables. When querying distributed replicated tables, ClickHouse behavior is controlled by the settings <a href=\"#settings-max_replica_delay_for_distributed_queries\">max_replica_delay_for_distributed_queries</a> and <a href=\"#settings-fallback_to_stale_replicas_for_distributed_queries\">fallback_to_stale_replicas_for_distributed_queries</a>.</p>\n<p>For each <code>INSERT</code> query, approximately ten entries are added to ZooKeeper through several transactions. (To be more precise, this is for each inserted block of data; an INSERT query contains one block or one block per <code>max_insert_block_size = 1048576</code> rows.) This leads to slightly longer latencies for <code>INSERT</code> compared to non-replicated tables. But if you follow the recommendations to insert data in batches of no more than one <code>INSERT</code> per second, it doesn't create any problems. The entire ClickHouse cluster used for coordinating one ZooKeeper cluster has a total of several hundred <code>INSERTs</code> per second. The throughput on data inserts (the number of rows per second) is just as high as for non-replicated data.</p>\n<p>For very large clusters, you can use different ZooKeeper clusters for different shards. However, this hasn't proven necessary on the Yandex.Metrica cluster (approximately 300 servers).</p>\n<p>Replication is asynchronous and multi-master. <code>INSERT</code> queries (as well as <code>ALTER</code>) can be sent to any available server. Data is inserted on the server where the query is run, and then it is copied to the other servers. Because it is asynchronous, recently inserted data appears on the other replicas with some latency. If part of the replicas are not available, the data is written when they become available. If a replica is available, the latency is the amount of time it takes to transfer the block of compressed data over the network.</p>\n<p>By default, an INSERT query waits for confirmation of writing the data from only one replica. If the data was successfully written to only one replica and the server with this replica ceases to exist, the stored data will be lost. To enable getting confirmation of data writes from multiple replicas, use the <code>insert_quorum</code> option.</p>\n<p>Each block of data is written atomically. The INSERT query is divided into blocks up to <code>max_insert_block_size = 1048576</code> rows. In other words, if the <code>INSERT</code> query has less than 1048576 rows, it is made atomically.</p>\n<p>Data blocks are deduplicated. For multiple writes of the same data block (data blocks of the same size containing the same rows in the same order), the block is only written once. The reason for this is in case of network failures when the client application doesn't know if the data was written to the DB, so the <code>INSERT</code> query can simply be repeated. It doesn't matter which replica INSERTs were sent to with identical data. <code>INSERTs</code> are idempotent. Deduplication parameters are controlled by <a href=\"#server_settings-merge_tree\">merge_tree</a> server settings.</p>\n<p>During replication, only the source data to insert is transferred over the network. Further data transformation (merging) is coordinated and performed on all the replicas in the same way. This minimizes network usage, which means that replication works well when replicas reside in different datacenters. (Note that duplicating data in different datacenters is the main goal of replication.)</p>\n<p>You can have any number of replicas of the same data. Yandex.Metrica uses double replication in production. Each server uses RAID-5 or RAID-6, and RAID-10 in some cases. This is a relatively reliable and convenient solution.</p>\n<p>The system monitors data synchronicity on replicas and is able to recover after a failure. Failover is automatic (for small differences in data) or semi-automatic (when data differs too much, which may indicate a configuration error).</p>\n<h3 id=\"creating-replicated-tables\">Creating Replicated Tables<a class=\"headerlink\" href=\"#creating-replicated-tables\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>Replicated</code> prefix is added to the table engine name. For example:<code>ReplicatedMergeTree</code>.</p>\n<p><strong>Replicated*MergeTree parameters</strong></p>\n<ul>\n<li><code>zoo_path</code> \u2014 The path to the table in ZooKeeper.</li>\n<li><code>replica_name</code> \u2014 The replica name in ZooKeeper.</li>\n</ul>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">EventDate</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">CounterID</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ReplicatedMergeTree</span><span class=\"p\">(</span><span class=\"s1\">&#39;/clickhouse/tables/{layer}-{shard}/table_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;{replica}&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">EventDate</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">))</span>\n<span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<details><summary>Example in deprecated syntax</summary>\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">EventDate</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">CounterID</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ReplicatedMergeTree</sp");
            
            document.write("an><span class=\"p\">(</span><span class=\"s1\">&#39;/clickhouse/tables/{layer}-{shard}/table_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;{replica}&#39;</span><span class=\"p\">,</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">EventDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">),</span> <span class=\"n\">EventTime</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n\n</details>\n\n<p>As the example shows, these parameters can contain substitutions in curly brackets. The substituted values are taken from the 'macros' section of the configuration file. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;macros&gt;</span>\n    <span class=\"nt\">&lt;layer&gt;</span>05<span class=\"nt\">&lt;/layer&gt;</span>\n    <span class=\"nt\">&lt;shard&gt;</span>02<span class=\"nt\">&lt;/shard&gt;</span>\n    <span class=\"nt\">&lt;replica&gt;</span>example05-02-1.yandex.ru<span class=\"nt\">&lt;/replica&gt;</span>\n<span class=\"nt\">&lt;/macros&gt;</span>\n</code></pre></div>\n\n\n<p>The path to the table in ZooKeeper should be unique for each replicated table. Tables on different shards should have different paths.<br />\nIn this case, the path consists of the following parts:</p>\n<p><code>/clickhouse/tables/</code> is the common prefix. We recommend using exactly this one.</p>\n<p><code>{layer}-{shard}</code> is the shard identifier. In this example it consists of two parts, since the Yandex.Metrica cluster uses bi-level sharding. For most tasks, you can leave just the {shard} substitution, which will be expanded to the shard identifier.</p>\n<p><code>table_name</code> is the name of the node for the table in ZooKeeper. It is a good idea to make it the same as the table name. It is defined explicitly, because in contrast to the table name, it doesn't change after a RENAME query.<br />\n<em>HINT</em>: you could add a database name in front of <code>table_name</code> as well. E.g. <code>db_name.table_name</code></p>\n<p>The replica name identifies different replicas of the same table. You can use the server name for this, as in the example. The name only needs to be unique within each shard.</p>\n<p>You can define the parameters explicitly instead of using substitutions. This might be convenient for testing and for configuring small clusters. However, you can't use distributed DDL queries (<code>ON CLUSTER</code>) in this case.</p>\n<p>When working with large clusters, we recommend using substitutions because they reduce the probability of error.</p>\n<p>Run the <code>CREATE TABLE</code> query on each replica. This query creates a new replicated table, or adds a new replica to an existing one.</p>\n<p>If you add a new replica after the table already contains some data on other replicas, the data will be copied from the other replicas to the new one after running the query. In other words, the new replica syncs itself with the others.</p>\n<p>To delete a replica, run <code>DROP TABLE</code>. However, only one replica is deleted \u2013 the one that resides on the server where you run the query.</p>\n<h3 id=\"recovery-after-failures\">Recovery After Failures<a class=\"headerlink\" href=\"#recovery-after-failures\" title=\"Permanent link\">&para;</a></h3>\n<p>If ZooKeeper is unavailable when a server starts, replicated tables switch to read-only mode. The system periodically attempts to connect to ZooKeeper.</p>\n<p>If ZooKeeper is unavailable during an <code>INSERT</code>, or an error occurs when interacting with ZooKeeper, an exception is thrown.</p>\n<p>After connecting to ZooKeeper, the system checks whether the set of data in the local file system matches the expected set of data (ZooKeeper stores this information). If there are minor inconsistencies, the system resolves them by syncing data with the replicas.</p>\n<p>If the system detects broken data parts (with the wrong size of files) or unrecognized parts (parts written to the file system but not recorded in ZooKeeper), it moves them to the <code>detached</code> subdirectory (they are not deleted). Any missing parts are copied from the replicas.</p>\n<p>Note that ClickHouse does not perform any destructive actions such as automatically deleting a large amount of data.</p>\n<p>When the server starts (or establishes a new session with ZooKeeper), it only checks the quantity and sizes of all files. If the file sizes match but bytes have been changed somewhere in the middle, this is not detected immediately, but only when attempting to read the data for a <code>SELECT</code> query. The query throws an exception about a non-matching checksum or size of a compressed block. In this case, data parts are added to the verification queue and copied from the replicas if necessary.</p>\n<p>If the local set of data differs too much from the expected one, a safety mechanism is triggered. The server enters this in the log and refuses to launch. The reason for this is that this case may indicate a configuration error, such as if a replica on a shard was accidentally configured like a replica on a different shard. However, the thresholds for this mechanism are set fairly low, and this situation might occur during normal failure recovery. In this case, data is restored semi-automatically - by \"pushing a button\".</p>\n<p>To start recovery, create the node <code>/path_to_table/replica_name/flags/force_restore_data</code> in ZooKeeper with any content, or run the command to restore all replicated tables:</p>\n<div class=\"codehilite\"><pre><span></span><code>sudo -u clickhouse touch /var/lib/clickhouse/flags/force_restore_data\n</code></pre></div>\n\n\n<p>Then restart the server. On start, the server deletes these flags and starts recovery.</p>\n<h3 id=\"recovery-after-complete-data-loss\">Recovery After Complete Data Loss<a class=\"headerlink\" href=\"#recovery-after-complete-data-loss\" title=\"Permanent link\">&para;</a></h3>\n<p>If all data and metadata disappeared from one of the servers, follow these steps for recovery:</p>\n<ol>\n<li>Install ClickHouse on the server. Define substitutions correctly in the config file that contains the shard identifier and replicas, if you use them.</li>\n<li>If you had unreplicated tables that must be manually duplicated on the servers, copy their data from a replica (in the directory <code>/var/lib/clickhouse/data/db_name/table_name/</code>).</li>\n<li>Copy table definitions located in <code>/var/lib/clickhouse/metadata/</code> from a replica. If a shard or replica identifier is defined explicitly in the table definitions, correct it so that it corresponds to this replica. (Alternatively, start the server and make all the <code>ATTACH TABLE</code> queries that should have been in the .sql files in <code>/var/lib/clickhouse/metadata/</code>.)</li>\n<li>To start recovery, create the ZooKeeper node <code>/path_to_table/replica_name/flags/force_restore_data</code> with any content, or run the command to restore all replicated tables: <code>sudo -u clickhouse touch /var/lib/clickhouse/flags/force_restore_data</code></li>\n</ol>\n<p>Then start the server (restart, if it is already running). Data will be downloaded from replicas.</p>\n<p>An alternative recovery option is to delete information about the lost replica from ZooKeeper (<code>/path_to_table/replica_name</code>), then create the replica again as described in \"<a href=\"#creating-replicated-tables\">Creating replicated tables</a>\".</p>\n<p>There is no restriction on network bandwidth during recovery. Keep this in mind if you are restoring many replicas at once.</p>\n<h3 id=\"converting-from-mergetree-to-replicatedmergetree\">Converting from MergeTree to ReplicatedMergeTree<a class=\"headerlink\" href=\"#converting-from-mergetree-to-replicatedmergetree\" title=\"Permanent link\">&para;</a></h3>\n<p>We use the term <code>MergeTree</code> to refer to all table engines in the <code>MergeTree family</code>, the same as for <code>ReplicatedMergeTree</code>.</p>\n<p>If you had a <code>MergeTree</code> table that was manually replicated, you can convert it to a replicated table. You might need to do this if you have already collected a large amount of data in a <code>MergeTree</code> table and now you want to enable replication.</p>\n<p>If the data differs on various replicas, first sync it, or delete this data on all the replicas except one.</p>\n<p>Rename the existing MergeTree table, then create a <code>ReplicatedMergeTree</code> table with the old name.<br />\nMove the data from the old table to the <code>detached</code> subdirectory inside the directory with the new table data (<code>/var/lib/clickhouse/data/db_name/table_name/</code>).<br />\nThen run <code>ALTER TABLE ATTACH PARTITION</code> on one of the replicas to add these data parts to the working set.</p>\n<h3 id=\"converting-from-replicatedmergetree-to-mergetree\">Converting from ReplicatedMergeTree to MergeTree<a class=\"headerlink\" href=\"#converting-from-replicatedmergetree-to-mergetree\" title=\"Permanent link\">&para;</a></h3>\n<p>Create a MergeTree table with a different name. Move all the data from the directory with the <code>ReplicatedMergeTree</code> table data to the new table's data directory. Then delete the <code>ReplicatedMergeTree</code> table and restart the server.</p>\n<p>If you want to get rid of a <code>ReplicatedMergeTree</code> table without launching the server:</p>\n<ul>\n<li>Delete the corresponding <code>.sql</code> file in the metadata directory (<code>/var/lib/clickhouse/metadata/</code>).</li>\n<li>Delete the corresponding path in ZooKeeper (<code>/path_to_table/replica_name</code>).</li>\n</ul>\n<p>After this, you can launch the server, create a <code>MergeTree</code> table, move the data to its directory, and then restart the server.</p>\n<h3 id=\"recovery-when-metadata-in-the-zookeeper-cluster-is-lost-or-damaged\">Recovery When Metadata in The ZooKeeper Cluster is Lost or Damaged<a class=\"headerlink\" href=\"#recovery-when-metadata-in-the-zookeeper-cluster-i");
            
            document.write("s-lost-or-damaged\" title=\"Permanent link\">&para;</a></h3>\n<p>If the data in ZooKeeper was lost or damaged, you can save data by moving it to an unreplicated table as described above.</p>\n<p><a name=\"../../../../../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../../../../../table_engines/custom_partitioning_key/\"></a><a name=\"../../../../../../table_engines/custom_partitioning_key/\"></a><a name=\"table_engines/custom_partitioning_key/\"></a><a name=\"../../../table_engines/custom_partitioning_key/\"></a><a name=\"operations/table_engines/custom_partitioning_key/\"></a><a name=\"../table_engines/custom_partitioning_key/\"></a><a name=\"../../../../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../../table_engines/custom_partitioning_key/\"></a><a name=\"../../../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../../operations/table_engines/custom_partitioning_key/\"></a><a name=\"../../../../table_engines/custom_partitioning_key/\"></a><a name=\"custom_partitioning_key/\"></a></p>\n<h2 id=\"custom-partitioning-key\">Custom Partitioning Key<a class=\"headerlink\" href=\"#custom-partitioning-key\" title=\"Permanent link\">&para;</a></h2>\n<p>Partitioning is available for the <a href=\"#mergetree/\">MergeTree</a> family tables (including <a href=\"#replication/\">replicated</a> tables). <a href=\"#materializedview/\">Materialized views</a> based on MergeTree tables support partitioning, as well.</p>\n<p>A partition is a logical combination of records in a table by a specified criterion. You can set a partition by an arbitrary criterion, such as by month, by day, or by event type. Each partition is stored separately in order to simplify manipulations of this data. When accessing the data, ClickHouse uses the smallest subset of partitions possible.</p>\n<p>The partition is specified in the <code>PARTITION BY expr</code> clause when <a href=\"#table_engine-mergetree-creating-a-table\">creating a table</a>. The partition key can be any expression from the table columns. For example, to specify partitioning by month, use the expression <code>toYYYYMM(date_column)</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">VisitDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">Hour</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">ClientID</span> <span class=\"n\">UUID</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span>\n<span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">VisitDate</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">Hour</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>The partition key can also be a tuple of expressions (similar to the <a href=\"#primary-keys-and-indexes-in-queries\">primary key</a>). For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ReplicatedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"s1\">&#39;/clickhouse/tables/name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;replica1&#39;</span><span class=\"p\">,</span> <span class=\"n\">Sign</span><span class=\"p\">)</span>\n<span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">toMonday</span><span class=\"p\">(</span><span class=\"n\">StartDate</span><span class=\"p\">),</span> <span class=\"n\">EventType</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">StartDate</span><span class=\"p\">,</span> <span class=\"n\">intHash32</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">));</span>\n</code></pre></div>\n\n\n<p>In this example, we set partitioning by the event types that occurred during the current week.</p>\n<p>When inserting new data to a table, this data is stored as a separate part (chunk) sorted by the primary key. In 10-15 minutes after inserting, the parts of the same partition are merged into the entire part.</p>\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Info</p>\n<p>A merge only works for data parts that have the same value for the partitioning expression. This means <strong>you shouldn't make overly granular partitions</strong> (more than about a thousand partitions). Otherwise, the <code>SELECT</code> query performs poorly because of an unreasonably large number of files in the file system and open file descriptors.</p>\n</div>\n<p>Use the <a href=\"#system_tables-parts\">system.parts</a> table to view the table parts and partitions. For example, let's assume that we have a <code>visits</code> table with partitioning by month. Let's perform the <code>SELECT</code> query for the <code>system.parts</code> table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">partition</span><span class=\"p\">,</span>\n    <span class=\"n\">name</span><span class=\"p\">,</span>\n    <span class=\"n\">active</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">parts</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;visits&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500partition\u2500\u252c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500active\u2500\u2510\n\u2502 201901    \u2502 201901_1_3_1   \u2502      0 \u2502\n\u2502 201901    \u2502 201901_1_9_2   \u2502      1 \u2502\n\u2502 201901    \u2502 201901_8_8_0   \u2502      0 \u2502\n\u2502 201901    \u2502 201901_9_9_0   \u2502      0 \u2502\n\u2502 201902    \u2502 201902_4_6_1   \u2502      1 \u2502\n\u2502 201902    \u2502 201902_10_10_0 \u2502      1 \u2502\n\u2502 201902    \u2502 201902_11_11_0 \u2502      1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The <code>partition</code> column contains the names of the partitions. There are two partitions in this example: <code>201901</code> and <code>201902</code>. You can use this column value to specify the partition name in <a href=\"#alter_manipulations-with-partitions\">ALTER ... PARTITION</a> queries.</p>\n<p>The <code>name</code> column contains the names of the partition data parts. You can use this column to specify the name of the part in the <a href=\"#alter_attach-partition\">ALTER ATTACH PART</a> query.</p>\n<p>Let's break down the name of the first part: <code>201901_1_3_1</code>:</p>\n<ul>\n<li><code>201901</code> is the partition name.</li>\n<li><code>1</code> is the minimum number of the data block.</li>\n<li><code>3</code> is the maximum number of the data block.</li>\n<li><code>1</code> is the chunk level (the depth of the merge tree it is formed from).</li>\n</ul>\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Info</p>\n<p>The parts of old-type tables have the name: <code>20190117_20190123_2_2_0</code> (minimum date - maximum date - minimum block number - maximum block number - level).</p>\n</div>\n<p>The <code>active</code> column shows the status of the part. <code>1</code> is active; <code>0</code> is inactive. The inactive parts are, for example, source parts remaining after merging to a larger part. The corrupted data parts are also indicated as inactive.</p>\n<p>As you can see in the example, there are several separated parts of the same partition (for example, <code>201901_1_3_1</code> and <code>201901_1_9_2</code>). This means that these parts are not merged yet. ClickHouse merges the inserted parts of data periodically, approximately 15 minutes after inserting. In addition, you can perform a non-scheduled merge using the <a href=\"#misc_operations-optimize\">OPTIMIZE</a> query. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">OPTIMIZE</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201902</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500partition\u2500\u252c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500active\u2500\u2510\n\u2502 201901    \u2502 201901_1_3_1   \u2502      0 \u2502\n\u2502 201901    \u2502 201901_1_9_2   \u2502      1 \u2502\n\u2502 201901    \u2502 201901_8_8_0   \u2502      0 \u2502\n\u2502 201901    \u2502 201901_9_9_0   \u2502      0 \u2502\n\u2502 201902    \u2502 201902_4_6_1   \u2502      0 \u2502\n\u2502 201902    \u2502 201902_4_11_2  \u2502      1 \u2502\n\u2502 201902    \u2502 201902_10_10_0 \u2502      0 \u2502\n\u2502 201902    \u2502 201902_11_11_0 \u2502      0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Inactive parts will be deleted approximately 10 minutes after merging.</p>\n<p>Another way to view a set of parts and partitions is to go into the directory of the table: <code>/var/lib/clickhouse/data/&lt;database&gt;/&lt;table&gt;/</code>. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code>/var/lib/clickhouse/data/default/visits$ ls -l\ntotal <span class=\"m\">40</span>\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">1</span> <span class=\"m\">16</span>:48 201901_1_3_1\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">16</span>:17 201901_1_9_2\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">15</span>:52 201901_8_8_0\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">15</span>:52 201901_9_9_0\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">16</span>:17 201902_10_10_0\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">16</span>:17 201902_11_11_0\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">5</span> <span class=\"m\">16</span>:19 201902_4_11_2\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</");
            
            document.write("span> Feb  <span class=\"m\">5</span> <span class=\"m\">12</span>:09 201902_4_6_1\ndrwxr-xr-x <span class=\"m\">2</span> clickhouse clickhouse <span class=\"m\">4096</span> Feb  <span class=\"m\">1</span> <span class=\"m\">16</span>:48 detached\n</code></pre></div>\n\n\n<p>The folders '201901_1_1_0', '201901_1_7_1' and so on are the directories of the parts. Each part relates to a corresponding partition and contains data just for a certain month (the table in this example has partitioning by month).</p>\n<p>The <code>detached</code> directory contains parts that were detached from the table using the <a href=\"#alter_detach-partition\">DETACH</a> query. The corrupted parts are also moved to this directory, instead of being deleted. The server does not use the parts from the <code>detached</code> directory. You can add, delete, or modify the data in this directory at any time \u2013 the server will not know about this until you run the <a href=\"#alter_attach-partition\">ATTACH</a> query.</p>\n<p>Note that on the operating server, you cannot manually change the set of parts or their data on the file system, since the server will not know about it. For non-replicated tables, you can do this when the server is stopped, but it isn't recommended. For replicated tables, the set of parts cannot be changed in any case.</p>\n<p>ClickHouse allows you to perform operations with the partitions: delete them, copy from one table to another, or create a backup. See the list of all operations in the section <a href=\"#alter_manipulations-with-partitions\">Manipulations With Partitions and Parts</a>.</p>\n<p><a name=\"../operations/table_engines/replacingmergetree/\"></a><a name=\"../../../../operations/table_engines/replacingmergetree/\"></a><a name=\"table_engines/replacingmergetree/\"></a><a name=\"replacingmergetree/\"></a><a name=\"../../../../../table_engines/replacingmergetree/\"></a><a name=\"operations/table_engines/replacingmergetree/\"></a><a name=\"../../../table_engines/replacingmergetree/\"></a><a name=\"../../table_engines/replacingmergetree/\"></a><a name=\"../../../../../../table_engines/replacingmergetree/\"></a><a name=\"../table_engines/replacingmergetree/\"></a><a name=\"../../operations/table_engines/replacingmergetree/\"></a><a name=\"../../../../../operations/table_engines/replacingmergetree/\"></a><a name=\"../../../operations/table_engines/replacingmergetree/\"></a><a name=\"../../../../table_engines/replacingmergetree/\"></a></p>\n<h2 id=\"replacingmergetree\">ReplacingMergeTree<a class=\"headerlink\" href=\"#replacingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>The engine differs from <a href=\"#table_engines-mergetree\">MergeTree</a> in that it removes duplicate entries with the same primary key value (or more accurately, with the same <a href=\"#mergetree/\">sorting key</a> value).</p>\n<p>Data deduplication occurs only during a merge. Merging occurs in the background at an unknown time, so you can't plan for it. Some of the data may remain unprocessed. Although you can run an unscheduled merge using the <code>OPTIMIZE</code> query, don't count on using it, because the <code>OPTIMIZE</code> query will read and write a large amount of data.</p>\n<p>Thus, <code>ReplacingMergeTree</code> is suitable for clearing out duplicate data in the background in order to save space, but it doesn't guarantee the absence of duplicates.</p>\n<h3 id=\"creating-a-table\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ReplacingMergeTree</span><span class=\"p\">([</span><span class=\"n\">ver</span><span class=\"p\">])</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">PRIMARY</span> <span class=\"k\">KEY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>For a description of request parameters, see <a href=\"#../../query_language/create/\">request description</a>.</p>\n<p><strong>ReplacingMergeTree Parameters</strong></p>\n<ul>\n<li>\n<p><code>ver</code> \u2014 column with version. Type <code>UInt*</code>, <code>Date</code> or <code>DateTime</code>. Optional parameter.</p>\n<p>When merging, <code>ReplacingMergeTree</code> from all the rows with the same primary key leaves only one:<br />\n- Last in the selection, if <code>ver</code> not set.<br />\n- With the maximum version, if <code>ver</code> specified.</p>\n</li>\n</ul>\n<p><strong>Query clauses</strong></p>\n<p>When creating a <code>ReplacingMergeTree</code> table the same <a href=\"#mergetree/\">clauses</a> are required, as when creating a <code>MergeTree</code> table.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects and, if possible, switch the old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">ReplacingMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">ver</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p>All of the parameters excepting <code>ver</code> have the same meaning as in <code>MergeTree</code>.</p>\n<ul>\n<li><code>ver</code> - column with the version. Optional parameter. For a description, see the text above.</li>\n</ul>\n</details>\n<p><a name=\"../../../../../operations/table_engines/summingmergetree/\"></a><a name=\"table_engines/summingmergetree/\"></a><a name=\"../operations/table_engines/summingmergetree/\"></a><a name=\"../../../table_engines/summingmergetree/\"></a><a name=\"../../../../operations/table_engines/summingmergetree/\"></a><a name=\"../../../operations/table_engines/summingmergetree/\"></a><a name=\"summingmergetree/\"></a><a name=\"../../../../../table_engines/summingmergetree/\"></a><a name=\"../../table_engines/summingmergetree/\"></a><a name=\"../table_engines/summingmergetree/\"></a><a name=\"../../../../../../table_engines/summingmergetree/\"></a><a name=\"operations/table_engines/summingmergetree/\"></a><a name=\"../../../../table_engines/summingmergetree/\"></a><a name=\"../../operations/table_engines/summingmergetree/\"></a></p>\n<h2 id=\"summingmergetree\">SummingMergeTree<a class=\"headerlink\" href=\"#summingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>The engine inherits from <a href=\"#table_engines-mergetree\">MergeTree</a>. The difference is that when merging data parts for <code>SummingMergeTree</code> tables ClickHouse replaces all the rows with the same primary key (or more accurately, with the same <a href=\"#mergetree/\">sorting key</a>) with one row which contains summarized values for the columns with the numeric data type. If the sorting key is composed in a way that a single key value corresponds to large number of rows, this significantly reduces storage volume and speeds u");
            
            document.write("p data selection.</p>\n<p>We recommend to use the engine together with <code>MergeTree</code>. Store complete data in <code>MergeTree</code> table, and use <code>SummingMergeTree</code> for aggregated data storing, for example, when preparing reports. Such an approach will prevent you from losing valuable data due to an incorrectly composed primary key.</p>\n<h3 id=\"creating-a-table_1\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">SummingMergeTree</span><span class=\"p\">([</span><span class=\"n\">columns</span><span class=\"p\">])</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>For a description of request parameters, see <a href=\"#../../query_language/create/\">request description</a>.</p>\n<p><strong>Parameters of SummingMergeTree</strong></p>\n<ul>\n<li>\n<p><code>columns</code> - a tuple with the names of columns where values will be summarized. Optional parameter.<br />\nThe columns must be of a numeric type and must not be in the primary key.</p>\n<p>If <code>columns</code> not specified, ClickHouse summarizes the values in all columns with a numeric data type that are not in the primary key.</p>\n</li>\n</ul>\n<p><strong>Query clauses</strong></p>\n<p>When creating a <code>SummingMergeTree</code> table the same <a href=\"#mergetree/\">clauses</a> are required, as when creating a <code>MergeTree</code> table.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects and, if possible, switch the old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">SummingMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">columns</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p>All of the parameters excepting <code>columns</code> have the same meaning as in <code>MergeTree</code>.</p>\n<ul>\n<li><code>columns</code> \u2014 tuple with names of columns values of which will be summarized. Optional parameter. For a description, see the text above.</li>\n</ul>\n</details>\n<h3 id=\"usage-example_3\">Usage Example<a class=\"headerlink\" href=\"#usage-example_3\" title=\"Permanent link\">&para;</a></h3>\n<p>Consider the following table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">summtt</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">key</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span>\n    <span class=\"n\">value</span> <span class=\"n\">UInt32</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">SummingMergeTree</span><span class=\"p\">()</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">key</span>\n</code></pre></div>\n\n\n<p>Insert data to it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">summtt</span> <span class=\"k\">Values</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>ClickHouse may sum all the rows not completely (<a href=\"#data-processing\">see below</a>), so we use an aggregate function <code>sum</code> and <code>GROUP BY</code> clause in the query.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">key</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">summtt</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">key</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500key\u2500\u252c\u2500sum(value)\u2500\u2510\n\u2502   2 \u2502          1 \u2502\n\u2502   1 \u2502          3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"data-processing\">Data Processing<a class=\"headerlink\" href=\"#data-processing\" title=\"Permanent link\">&para;</a></h3>\n<p>When data are inserted into a table, they are saved as-is. Clickhouse merges the inserted parts of data periodically and this is when rows with the same primary key are summed and replaced with one for each resulting part of data.</p>\n<p>ClickHouse can merge the data parts so that different resulting parts of data cat consist rows with the same primary key, i.e. the summation will be incomplete. Therefore (<code>SELECT</code>) an aggregate function <a href=\"#agg_function-sum\">sum()</a> and <code>GROUP BY</code> clause should be used in a query as described in the example above.</p>\n<h4 id=\"common-rules-for-summation\">Common rules for summation<a class=\"headerlink\" href=\"#common-rules-for-summation\" title=\"Permanent link\">&para;</a></h4>\n<p>The values in the columns with the numeric data type are summarized. The set of columns is defined by the parameter <code>columns</code>.</p>\n<p>If the values were 0 in all of the columns for summation, the row is deleted.</p>\n<p>If column is not in the primary key and is not summarized, an arbitrary value is selected from the existing ones.</p>\n<p>The values are not summarized for columns in the primary key.</p>\n<h4 id=\"the-summation-in-the-aggregatefunction-columns\">The Summation in the AggregateFunction Columns<a class=\"headerlink\" href=\"#the-summation-in-the-aggregatefunction-columns\" title=\"Permanent link\">&para;</a></h4>\n<p>For columns of <a href=\"#../../data_types/nested_data_structures/aggregatefunction/\">AggregateFunction type</a> ClickHouse behaves as <a href=\"#aggregatingmergetree/\">AggregatingMergeTree</a> engine aggregating according to the function.</p>\n<h4 id=\"nested-structures\">Nested Structures<a class=\"headerlink\" href=\"#nested-structures\" title=\"Permanent link\">&para;</a></h4>\n<p>Table can have nested data structures that are processed in a special way.</p>\n<p>If the name of a nested table ends with <code>Map</code> and it contains at least two columns that meet the following criteria:</p>\n<ul>\n<li>the first column is numeric <code>(*Int*, Date, DateTime)</code>, let's call it <code>key</code>,</li>\n<li>the other columns are arithmetic <code>(*Int*, Float32/64)</code>, let's call it <code>(values...)</code>,</li>\n</ul>\n<p>then this nested table is interpreted as a mapping of <code>key =&gt; (values...)</code>, and when merging its rows, the elements of two data sets are merged by <code>key</code> with a summation of the corresponding <code>(valu");
            
            document.write("es...)</code>.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>[(1, 100)] + [(2, 150)] -&gt; [(1, 100), (2, 150)]\n[(1, 100)] + [(1, 150)] -&gt; [(1, 250)]\n[(1, 100)] + [(1, 150), (2, 150)] -&gt; [(1, 250), (2, 150)]\n[(1, 100), (2, 150)] + [(1, -100)] -&gt; [(2, 150)]\n</code></pre></div>\n\n\n<p>When requesting data, use the <a href=\"#../../query_language/agg_functions/reference/\">sumMap(key, value)</a> function for aggregation of <code>Map</code>.</p>\n<p>For nested data structure, you do not need to specify its columns in the tuple of columns for summation.</p>\n<p><a name=\"../../operations/table_engines/aggregatingmergetree/\"></a><a name=\"../../../../../../table_engines/aggregatingmergetree/\"></a><a name=\"../../../../table_engines/aggregatingmergetree/\"></a><a name=\"../../../../../table_engines/aggregatingmergetree/\"></a><a name=\"../../../../../operations/table_engines/aggregatingmergetree/\"></a><a name=\"../../table_engines/aggregatingmergetree/\"></a><a name=\"../../../operations/table_engines/aggregatingmergetree/\"></a><a name=\"operations/table_engines/aggregatingmergetree/\"></a><a name=\"../../../table_engines/aggregatingmergetree/\"></a><a name=\"aggregatingmergetree/\"></a><a name=\"../../../../operations/table_engines/aggregatingmergetree/\"></a><a name=\"../operations/table_engines/aggregatingmergetree/\"></a><a name=\"../table_engines/aggregatingmergetree/\"></a><a name=\"table_engines/aggregatingmergetree/\"></a></p>\n<h2 id=\"aggregatingmergetree\">AggregatingMergeTree<a class=\"headerlink\" href=\"#aggregatingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>The engine inherits from <a href=\"#table_engines-mergetree\">MergeTree</a>, altering the logic for data parts merging. ClickHouse replaces all rows with the same primary key (or more accurately, with the same <a href=\"#mergetree/\">sorting key</a>) with a single row (within a one data part) that stores a combination of states of aggregate functions.</p>\n<p>You can use <code>AggregatingMergeTree</code> tables for incremental data aggregation, including for aggregated materialized views.</p>\n<p>The engine processes all columns with <a href=\"#../../data_types/nested_data_structures/aggregatefunction/\">AggregateFunction</a> type.</p>\n<p>It is appropriate to use <code>AggregatingMergeTree</code> if it reduces the number of rows by orders.</p>\n<h3 id=\"creating-a-table_2\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_2\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">AggregatingMergeTree</span><span class=\"p\">()</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>For a description of request parameters, see <a href=\"#../../query_language/create/\">request description</a>.</p>\n<p><strong>Query clauses</strong></p>\n<p>When creating a <code>AggregatingMergeTree</code> table the same <a href=\"#mergetree/\">clauses</a> are required, as when creating a <code>MergeTree</code> table.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects and, if possible, switch the old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">AggregatingMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>All of the parameters have the same meaning as in <code>MergeTree</code>.</p>\n</details>\n<h3 id=\"select-and-insert\">SELECT and INSERT<a class=\"headerlink\" href=\"#select-and-insert\" title=\"Permanent link\">&para;</a></h3>\n<p>To insert data, use <a href=\"#../../query_language/insert_into/\">INSERT SELECT</a> query with aggregate -State- functions.<br />\nWhen selecting data from <code>AggregatingMergeTree</code> table, use <code>GROUP BY</code> clause and the same aggregate functions as when inserting data, but using <code>-Merge</code> suffix.</p>\n<p>In the results of <code>SELECT</code> query the values of <code>AggregateFunction</code> type have implementation-specific binary representation for all of the ClickHouse output formats. If dump data into, for example, <code>TabSeparated</code> format with <code>SELECT</code> query then this dump can be loaded back using <code>INSERT</code> query.</p>\n<h3 id=\"example-of-an-aggregated-materialized-view\">Example of an Aggregated Materialized View<a class=\"headerlink\" href=\"#example-of-an-aggregated-materialized-view\" title=\"Permanent link\">&para;</a></h3>\n<p><code>AggregatingMergeTree</code> materialized view that watches the <code>test.visits</code> table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"n\">MATERIALIZED</span> <span class=\"k\">VIEW</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">basic</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">AggregatingMergeTree</span><span class=\"p\">()</span> <span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">toYYYYMM</span><span class=\"p\">(</span><span class=\"n\">StartDate</span><span class=\"p\">)</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">StartDate</span><span class=\"p\">)</span>\n<span class=\"k\">AS</span> <span class=\"k\">SELECT</span>\n    <span class=\"n\">CounterID</span><span class=\"p\">,</span>\n    <span class=\"n\">StartDate</span><span class=\"p\">,</span>\n    <span class=\"n\">sumState</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span>    <span class=\"k\">AS</span> <span class=\"n\">Visits</span><span class=\"p\">,</span>\n    <span class=\"n\">uniqState</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Users</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">CounterID</span><span class=\"p\">,</span> <span class=\"n\">StartDate</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Inserting of data into the <code>test.visits</code> table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>The data are inserted in both the table and view <code>test.basic</code> that will perform the aggregation.</p>\n<p>To get the aggregated data, we need to execute a query such as <code>SELECT ... GROUP BY ...</code> from the view <code>tes");
            
            document.write("t.basic</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">StartDate</span><span class=\"p\">,</span>\n    <span class=\"n\">sumMerge</span><span class=\"p\">(</span><span class=\"n\">Visits</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Visits</span><span class=\"p\">,</span>\n    <span class=\"n\">uniqMerge</span><span class=\"p\">(</span><span class=\"n\">Users</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Users</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">basic</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">StartDate</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">StartDate</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../table_engines/collapsingmergetree/\"></a><a name=\"../../../table_engines/collapsingmergetree/\"></a><a name=\"operations/table_engines/collapsingmergetree/\"></a><a name=\"../../../../../table_engines/collapsingmergetree/\"></a><a name=\"../../../../../operations/table_engines/collapsingmergetree/\"></a><a name=\"collapsingmergetree/\"></a><a name=\"table_engines/collapsingmergetree/\"></a><a name=\"../../operations/table_engines/collapsingmergetree/\"></a><a name=\"../../../../operations/table_engines/collapsingmergetree/\"></a><a name=\"../../../operations/table_engines/collapsingmergetree/\"></a><a name=\"../../../../../../table_engines/collapsingmergetree/\"></a><a name=\"../table_engines/collapsingmergetree/\"></a><a name=\"../operations/table_engines/collapsingmergetree/\"></a><a name=\"../../../../table_engines/collapsingmergetree/\"></a></p>\n<h2 id=\"table_engine-collapsingmergetree\">CollapsingMergeTree<a class=\"headerlink\" href=\"#table_engine-collapsingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>The engine inherits from <a href=\"#mergetree/\">MergeTree</a> and adds the logic of rows collapsing to data parts merge algorithm.</p>\n<p><code>CollapsingMergeTree</code> asynchronously deletes (collapses) pairs of rows if all of the fields in a sorting key (<code>ORDER BY</code>) are equivalent excepting the particular field <code>Sign</code> which can have <code>1</code> and <code>-1</code> values. Rows without a pair are kept. For more details see the <a href=\"#table_engine-collapsingmergetree-collapsing\">Collapsing</a> section of the document.</p>\n<p>The engine may significantly reduce the volume of storage and increase efficiency of <code>SELECT</code> query as a consequence.</p>\n<h3 id=\"creating-a-table_3\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_3\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">sign</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>For a description of query parameters, see <a href=\"#../../query_language/create/\">query description</a>.</p>\n<p><strong>CollapsingMergeTree Parameters</strong></p>\n<ul>\n<li>\n<p><code>sign</code> \u2014 Name of the column with the type of row: <code>1</code> is a \"state\" row, <code>-1</code> is a \"cancel\" row.</p>\n<p>Column data type \u2014 <code>Int8</code>.</p>\n</li>\n</ul>\n<p><strong>Query clauses</strong></p>\n<p>When creating a <code>CollapsingMergeTree</code> table, the same <a href=\"#table_engine-mergetree-creating-a-table\">query clauses</a> are required, as when creating a <code>MergeTree</code> table.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects and, if possible, switch the old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"n\">sign</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>All of the parameters excepting <code>sign</code> have the same meaning as in <code>MergeTree</code>.</p>\n<ul>\n<li>\n<p><code>sign</code> \u2014 Name of the column with the type of row: <code>1</code> \u2014 \"state\" row, <code>-1</code> \u2014 \"cancel\" row.</p>\n<p>Column Data Type \u2014 <code>Int8</code>.</p>\n</li>\n</ul>\n</details>\n<h3 id=\"table_engine-collapsingmergetree-collapsing\">Collapsing<a class=\"headerlink\" href=\"#table_engine-collapsingmergetree-collapsing\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"data\">Data<a class=\"headerlink\" href=\"#data\" title=\"Permanent link\">&para;</a></h4>\n<p>Consider the situation where you need to save continually changing data for some object. It sounds logical to have one row for an object and update it at any change, but update operation is expensive and slow for DBMS because it requires rewriting of the data in the storage. If you need to write data quickly, update not acceptable, but you can write the changes of an object sequentially as follows.</p>\n<p>Use the particular column <code>Sign</code>. If <code>Sign = 1</code> it means that the row is a state of an object, let's call it \"state\" row. If <code>Sign = -1</code> it means the cancellation of the state of an object with the same attributes, let's call it \"cancel\" row.</p>\n<p>For example, we want to calculate how much pages users checked at some site and how long they were there. At some moment of time we write the following row with the state of user activity:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>At some moment later we register the change of user activity and write it with the following two rows.</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The first row cancels the previous state of the object (user). It should copy the sorting key fields of the canceled state excepting <code>Sign</code>.</p>\n<p>The second row contains the current state.</p>\n<p>As we need only the last state of user activity, the rows</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>can be deleted collapsing the invalid (old) state of an object. <code>CollapsingMergeTree</code> does this while merging of the data parts.</p>\n<p>W");
            
            document.write("hy we need 2 rows for each change read in the <a href=\"#table_engine-collapsingmergetree-collapsing-algorithm\">Algorithm</a> paragraph.</p>\n<p><strong>Peculiar properties of such approach</strong></p>\n<ol>\n<li>The program that writes the data should remember the state of an object to be able to cancel it. \"Cancel\" string should contain copies of the sorting key fields of the \"state\" string and the opposite <code>Sign</code>. It increases the initial size of storage but allows to write the data quickly.</li>\n<li>Long growing arrays in columns reduce the efficiency of the engine due to load for writing. The more straightforward data, the higher efficiency.</li>\n<li>The <code>SELECT</code> results depend strongly on the consistency of object changes history. Be accurate when preparing data for inserting. You can get unpredictable results in inconsistent data, for example, negative values for non-negative metrics such as session depth.</li>\n</ol>\n<h4 id=\"table_engine-collapsingmergetree-collapsing-algorithm\">Algorithm<a class=\"headerlink\" href=\"#table_engine-collapsingmergetree-collapsing-algorithm\" title=\"Permanent link\">&para;</a></h4>\n<p>When ClickHouse merges data parts, each group of consecutive rows with the same sorting key (<code>ORDER BY</code>) is reduced to not more than two rows, one with <code>Sign = 1</code> (\"state\" row) and another with <code>Sign = -1</code> (\"cancel\" row). In other words, entries collapse.</p>\n<p>For each resulting data part ClickHouse saves:</p>\n<ol>\n<li>The first \"cancel\" and the last \"state\" rows, if the number of \"state\" and \"cancel\" rows matches.</li>\n<li>The last \"state\" row, if there is one more \"state\" row than \"cancel\" rows.</li>\n<li>The first \"cancel\" row, if there is one more \"cancel\" row than \"state\" rows.</li>\n<li>\n<p>None of the rows, in all other cases.</p>\n<p>The merge continues, but ClickHouse treats this situation as a logical error and records it in the server log. This error can occur if the same data were inserted more than once.</p>\n</li>\n</ol>\n<p>Thus, collapsing should not change the results of calculating statistics.<br />\nChanges gradually collapsed so that in the end only the last state of almost every object left.</p>\n<p>The <code>Sign</code> is required because the merging algorithm doesn't guarantee that all of the rows with the same sorting key will be in the same resulting data part and even on the same physical server. ClickHouse process <code>SELECT</code> queries with multiple threads, and it can not predict the order of rows in the result. The aggregation is required if there is a need to get completely \"collapsed\" data from <code>CollapsingMergeTree</code> table.</p>\n<p>To finalize collapsing, write a query with <code>GROUP BY</code> clause and aggregate functions that account for the sign. For example, to calculate quantity, use <code>sum(Sign)</code> instead of <code>count()</code>. To calculate the sum of something, use <code>sum(Sign * x)</code> instead of <code>sum(x)</code>, and so on, and also add <code>HAVING sum(Sign) &gt; 0</code>.</p>\n<p>The aggregates <code>count</code>, <code>sum</code> and <code>avg</code> could be calculated this way. The aggregate <code>uniq</code> could be calculated if an object has at least one state not collapsed. The aggregates <code>min</code> and <code>max</code> could not be calculated because <code>CollapsingMergeTree</code> does not save values history of the collapsed states.</p>\n<p>If you need to extract data without aggregation (for example, to check whether rows are present whose newest values match certain conditions), you can use the <code>FINAL</code> modifier for the <code>FROM</code> clause. This approach is significantly less efficient.</p>\n<h3 id=\"example-of-use\">Example of use<a class=\"headerlink\" href=\"#example-of-use\" title=\"Permanent link\">&para;</a></h3>\n<p>Example data:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Creation of the table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">UAct</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">PageViews</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">Duration</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">Sign</span> <span class=\"nb\">Int8</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span>\n</code></pre></div>\n\n\n<p>Insertion of the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UAct</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UAct</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">),(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>We use two <code>INSERT</code> queries to create two different data parts. If we insert the data with one query ClickHouse creates one data part and will not perform any merge ever.</p>\n<p>Getting the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>What do we see and where is collapsing?</p>\n<p>With two <code>INSERT</code> queries, we created 2 data parts. The <code>SELECT</code> query was performed in 2 threads, and we got a random order of rows. Collapsing not occurred because there was no merge of the data parts yet. ClickHouse merges data part in an unknown moment of time which we can not predict.</p>\n<p>Thus we need aggregation:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">UserID</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">PageViews</span> <span class=\"o\">*</span> <span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">PageViews</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Duration</span> <span class=\"o\">*</span> <span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Duration</span>\n<span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span>\n<span class=\"k\">HAVING</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u2510\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>If we do not need aggregation and want to force collapsing, we can use <code>FINAL</code> modifier for <code>FROM</code> clause.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">UAct</span> <span class=\"k\">FINAL</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This way of selecting the data is very inefficient. Don't use it for big tables.</p>\n<h3 id=\"example-of-another-approach\">Example of another approach<a class=\"headerlink\" href=\"#example-of-another-approach\" title=\"Permanent link\">&para;</a></h3>\n<p>Example data:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502\n\u2502 4324182021466249494 \u2502        -5 \u2502     -146 \u2502   -1 \u2502\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The idea is that merges take into account only key fields. And in the \"Cancel\" line we can specify negative values that equalize the previous version of the row when summing without using the Sign column. For this approach, it is necessary to change the data type <code>PageViews</code>,<code>Duration</code> to store negative values of UInt8 -&gt; Int16.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span ");
            
            document.write("class=\"n\">UAct</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">PageViews</span> <span class=\"n\">Int16</span><span class=\"p\">,</span>\n    <span class=\"n\">Duration</span> <span class=\"n\">Int16</span><span class=\"p\">,</span>\n    <span class=\"n\">Sign</span> <span class=\"nb\">Int8</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">CollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span>\n</code></pre></div>\n\n\n<p>Let's test the approach:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">insert</span> <span class=\"k\">into</span> <span class=\"n\">UAct</span> <span class=\"k\">values</span><span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span>  <span class=\"mi\">5</span><span class=\"p\">,</span>  <span class=\"mi\">146</span><span class=\"p\">,</span>  <span class=\"mi\">1</span><span class=\"p\">);</span>\n<span class=\"k\">insert</span> <span class=\"k\">into</span> <span class=\"n\">UAct</span> <span class=\"k\">values</span><span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n<span class=\"k\">insert</span> <span class=\"k\">into</span> <span class=\"n\">UAct</span> <span class=\"k\">values</span><span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span>  <span class=\"mi\">6</span><span class=\"p\">,</span>  <span class=\"mi\">185</span><span class=\"p\">,</span>  <span class=\"mi\">1</span><span class=\"p\">);</span>\n\n<span class=\"k\">select</span> <span class=\"o\">*</span> <span class=\"k\">from</span> <span class=\"n\">UAct</span> <span class=\"k\">final</span><span class=\"p\">;</span> <span class=\"o\">//</span> <span class=\"n\">avoid</span> <span class=\"k\">using</span> <span class=\"k\">final</span> <span class=\"k\">in</span> <span class=\"n\">production</span> <span class=\"p\">(</span><span class=\"n\">just</span> <span class=\"k\">for</span> <span class=\"n\">a</span> <span class=\"n\">test</span> <span class=\"k\">or</span> <span class=\"n\">small</span> <span class=\"n\">tables</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">UserID</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">PageViews</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">PageViews</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Duration</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Duration</span>\n<span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span>\n<span class=\"o\">```</span><span class=\"nb\">text</span>\n<span class=\"err\">\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500</span><span class=\"n\">UserID</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">PageViews</span><span class=\"err\">\u2500\u252c\u2500</span><span class=\"n\">Duration</span><span class=\"err\">\u2500\u2510</span>\n<span class=\"err\">\u2502</span> <span class=\"mi\">4324182021466249494</span> <span class=\"err\">\u2502</span>         <span class=\"mi\">6</span> <span class=\"err\">\u2502</span>      <span class=\"mi\">185</span> <span class=\"err\">\u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">select count() FROM UAct</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500count()\u2500\u2510\n\u2502       3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">optimize</span> <span class=\"k\">table</span> <span class=\"n\">UAct</span> <span class=\"k\">final</span><span class=\"p\">;</span>\n\n<span class=\"k\">select</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u2510\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../table_engines/versionedcollapsingmergetree/\"></a><a name=\"versionedcollapsingmergetree/\"></a><a name=\"../../operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"operations/table_engines/versionedcollapsingmergetree/\"></a><a name=\"../../../../table_engines/versionedcollapsingmergetree/\"></a></p>\n<h2 id=\"versionedcollapsingmergetree\">VersionedCollapsingMergeTree<a class=\"headerlink\" href=\"#versionedcollapsingmergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>This engine:</p>\n<ul>\n<li>Allows quick writing of object states that are continually changing.</li>\n<li>Deletes old object states in the background. This significantly reduces the volume of storage.</li>\n</ul>\n<p>See the section <a href=\"#table_engines_versionedcollapsingmergetree\">Collapsing</a> for details.</p>\n<p>The engine inherits from <a href=\"#table_engines-mergetree\">MergeTree</a> and adds the logic for collapsing rows to the algorithm for merging data parts. <code>VersionedCollapsingMergeTree</code> serves the same purpose as <a href=\"#collapsingmergetree/\">CollapsingMergeTree</a> but uses a different collapsing algorithm that allows inserting the data in any order with multiple threads. In particular, the <code>Version</code> column helps to collapse the rows properly even if they are inserted in the wrong order. In contrast, <code>CollapsingMergeTree</code> allows only strictly consecutive insertion.</p>\n<h3 id=\"creating-a-table_4\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_4\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">VersionedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">sign</span><span class=\"p\">,</span> <span class=\"k\">version</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>For a description of query parameters, see the <a href=\"#../../query_language/create/\">query description</a>.</p>\n<p><strong>Engine Parameters</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">VersionedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">sign</span><span class=\"p\">,</span> <span class=\"k\">version</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<ul>\n<li>\n<p><code>sign</code> \u2014 Name of the column with the type of row: <code>1</code> is a \"state\" row, <code>-1</code> is a \"cancel\" row.</p>\n<p>The column data type should be <code>Int8</code>.</p>\n</li>\n<li>\n<p><code>version</code> \u2014 Name of the column with the version of the object state.</p>\n<p>The column data type should be <code>UInt*</code>.</p>\n</li>\n</ul>\n<p><strong>Query Clauses</strong></p>\n<p>When creating a <code>VersionedCollapsingMergeTree</code> table, the same <a href=\"#mergetree/\">clauses</a> are required as when creating a <code>MergeTree</code> table.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects. If possible, swi");
            
            document.write("tch the old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">VersionedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"n\">sign</span><span class=\"p\">,</span> <span class=\"k\">version</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>All of the parameters except <code>sign</code> and <code>version</code> have the same meaning as in <code>MergeTree</code>.</p>\n<ul>\n<li>\n<p><code>sign</code> \u2014 Name of the column with the type of row: <code>1</code> is a \"state\" row, <code>-1</code> is a \"cancel\" row.</p>\n<p>Column Data Type \u2014 <code>Int8</code>.</p>\n</li>\n<li>\n<p><code>version</code> \u2014 Name of the column with the version of the object state.</p>\n<p>The column data type should be <code>UInt*</code>.</p>\n</li>\n</ul>\n</details>\n<h3 id=\"table_engines_versionedcollapsingmergetree\">Collapsing<a class=\"headerlink\" href=\"#table_engines_versionedcollapsingmergetree\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"data_1\">Data<a class=\"headerlink\" href=\"#data_1\" title=\"Permanent link\">&para;</a></h4>\n<p>Consider a situation where you need to save continually changing data for some object. It is reasonable to have one row for an object and update the row whenever there are changes. However, the update operation is expensive and slow for a DBMS because it requires rewriting the data in the storage. Update is not acceptable if you need to write data quickly, but you can write the changes to an object sequentially as follows.</p>\n<p>Use the <code>Sign</code> column when writing the row. If <code>Sign = 1</code> it means that the row is a state of an object (let's call it the \"state\" row). If <code>Sign = -1</code> it indicates the cancellation of the state of an object with the same attributes (let's call it the \"cancel\" row). Also use the <code>Version</code> column, which should identify each state of an object with a separate number.</p>\n<p>For example, we want to calculate how many pages users visited on some site and how long they were there. At some point in time we write the following row with the state of user activity:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502       1 |\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>At some point later we register the change of user activity and write it with the following two rows.</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502       1 |\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502       2 |\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The first row cancels the previous state of the object (user). It should copy all of the fields of the canceled state except <code>Sign</code>.</p>\n<p>The second row contains the current state.</p>\n<p>Because we need only the last state of user activity, the rows</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502       1 |\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502       1 |\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>can be deleted, collapsing the invalid (old) state of the object. <code>VersionedCollapsingMergeTree</code> does this while merging the data parts.</p>\n<p>To find out why we need two rows for each change, see <a href=\"#table_engines-versionedcollapsingmergetree-algorithm\">Algorithm</a>.</p>\n<p><strong>Notes on Usage</strong></p>\n<ol>\n<li>The program that writes the data should remember the state of an object in order to cancel it. The \"cancel\" string should be a copy of the \"state\" string with the opposite <code>Sign</code>. This increases the initial size of storage but allows to write the data quickly.</li>\n<li>Long growing arrays in columns reduce the efficiency of the engine due to the load for writing. The more straightforward the data, the better the efficiency.</li>\n<li><code>SELECT</code> results depend strongly on the consistency of the history of object changes. Be accurate when preparing data for inserting. You can get unpredictable results with inconsistent data, such as negative values for non-negative metrics like session depth.</li>\n</ol>\n<h4 id=\"table_engines-versionedcollapsingmergetree-algorithm\">Algorithm<a class=\"headerlink\" href=\"#table_engines-versionedcollapsingmergetree-algorithm\" title=\"Permanent link\">&para;</a></h4>\n<p>When ClickHouse merges data parts, it deletes each pair of rows that have the same primary key and version and different <code>Sign</code>. The order of rows does not matter.</p>\n<p>When ClickHouse inserts data, it orders rows by the primary key. If the <code>Version</code> column is not in the primary key, ClickHouse adds it to the primary key implicitly as the last field and uses it for ordering.</p>\n<h3 id=\"selecting-data_1\">Selecting Data<a class=\"headerlink\" href=\"#selecting-data_1\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse doesn't guarantee that all of the rows with the same primary key will be in the same resulting data part or even on the same physical server. This is true both for writing the data and for subsequent merging of the data parts. In addition, ClickHouse processes <code>SELECT</code> queries with multiple threads, and it cannot predict the order of rows in the result. This means that aggregation is required if there is a need to get completely \"collapsed\" data from a <code>VersionedCollapsingMergeTree</code> table.</p>\n<p>To finalize collapsing, write a query with a <code>GROUP BY</code> clause and aggregate functions that account for the sign. For example, to calculate quantity, use <code>sum(Sign)</code> instead of <code>count()</code>. To calculate the sum of something, use <code>sum(Sign * x)</code> instead of <code>sum(x)</code>, and add <code>HAVING sum(Sign) &gt; 0</code>.</p>\n<p>The aggregates <code>count</code>, <code>sum</code> and <code>avg</code> can be calculated this way. The aggregate <code>uniq</code> can be calculated if an object has at least one non-collapsed state. The aggregates <code>min</code> and <code>max</code> can't be calculated because <code>VersionedCollapsingMergeTree</code> does not save the history of values of collapsed states.</p>\n<p>If you need to extract the data with \"collapsing\" but without aggregation (for example, to check whether rows are present whose newest values match certain conditions), you can use the <code>FINAL</code> modifier for the <code>FROM</code> clause. This approach is inefficient and should not be used with large tables.</p>\n<h3 id=\"example-of-use_1\">Example of Use<a class=\"headerlink\" href=\"#example-of-use_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Example data:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502       1 |\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502       1 |\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502       2 |\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Creating the table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">UAct</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">UserID</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">PageViews</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">Duration</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">Sign</span> <span class=\"nb\">Int8</span><span class=\"p\">,</span>\n    <span class=\"k\">Version</span> <span class=\"n\">UInt8</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">VersionedCollapsingMergeTree</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">,</span> <span class=\"k\">Version</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span>\n</code></pre></div>\n\n\n<p>Inserting the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UAct</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\"");
            
            document.write(">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">UAct</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">146</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),(</span><span class=\"mi\">4324182021466249494</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">185</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>We use two <code>INSERT</code> queries to create two different data parts. If we insert the data with a single query, ClickHouse creates one data part and will never perform any merge.</p>\n<p>Getting the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502    1 \u2502       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         5 \u2502      146 \u2502   -1 \u2502       1 \u2502\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502       2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>What do we see here and where are the collapsed parts?<br />\nWe created two data parts using two <code>INSERT</code> queries. The <code>SELECT</code> query was performed in two threads, and the result is a random order of rows.<br />\nCollapsing did not occur because the data parts have not been merged yet. ClickHouse merges data parts at an unknown point in time which we cannot predict.</p>\n<p>This is why we need aggregation:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">UserID</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">PageViews</span> <span class=\"o\">*</span> <span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">PageViews</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Duration</span> <span class=\"o\">*</span> <span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Duration</span><span class=\"p\">,</span>\n    <span class=\"k\">Version</span>\n<span class=\"k\">FROM</span> <span class=\"n\">UAct</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">UserID</span><span class=\"p\">,</span> <span class=\"k\">Version</span>\n<span class=\"k\">HAVING</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502       2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>If we don't need aggregation and want to force collapsing, we can use the <code>FINAL</code> modifier for the <code>FROM</code> clause.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">UAct</span> <span class=\"k\">FINAL</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500UserID\u2500\u252c\u2500PageViews\u2500\u252c\u2500Duration\u2500\u252c\u2500Sign\u2500\u252c\u2500Version\u2500\u2510\n\u2502 4324182021466249494 \u2502         6 \u2502      185 \u2502    1 \u2502       2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This is a very inefficient way to select data. Don't use it for large tables.</p>\n<p><a name=\"operations/table_engines/graphitemergetree/\"></a><a name=\"../../../../table_engines/graphitemergetree/\"></a><a name=\"../../../../../operations/table_engines/graphitemergetree/\"></a><a name=\"../../table_engines/graphitemergetree/\"></a><a name=\"../../../../../../table_engines/graphitemergetree/\"></a><a name=\"../../../../../table_engines/graphitemergetree/\"></a><a name=\"table_engines/graphitemergetree/\"></a><a name=\"../../../operations/table_engines/graphitemergetree/\"></a><a name=\"graphitemergetree/\"></a><a name=\"../../operations/table_engines/graphitemergetree/\"></a><a name=\"../operations/table_engines/graphitemergetree/\"></a><a name=\"../table_engines/graphitemergetree/\"></a><a name=\"../../../table_engines/graphitemergetree/\"></a><a name=\"../../../../operations/table_engines/graphitemergetree/\"></a></p>\n<h2 id=\"graphitemergetree\">GraphiteMergeTree<a class=\"headerlink\" href=\"#graphitemergetree\" title=\"Permanent link\">&para;</a></h2>\n<p>This engine is designed for thinning and aggregating/averaging (rollup) <a href=\"http://graphite.readthedocs.io/en/latest/index.html\" rel=\"external nofollow noreferrer\">Graphite</a> data. It may be helpful to developers who want to use ClickHouse as a data store for Graphite.</p>\n<p>You can use any ClickHouse table engine to store the Graphite data if you don't need rollup, but if you need a rollup use <code>GraphiteMergeTree</code>. The engine reduces the volume of storage and increases the efficiency of queries from Graphite.</p>\n<p>The engine inherits properties from <a href=\"#mergetree/\">MergeTree</a>.</p>\n<h3 id=\"creating-a-table_5\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_5\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">Path</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">Time</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">Value</span> <span class=\"o\">&lt;</span><span class=\"n\">Numeric_type</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n    <span class=\"k\">Version</span> <span class=\"o\">&lt;</span><span class=\"n\">Numeric_type</span><span class=\"o\">&gt;</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">GraphiteMergeTree</span><span class=\"p\">(</span><span class=\"n\">config_section</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"k\">BY</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SETTINGS</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"p\">...]</span>\n</code></pre></div>\n\n\n<p>See a detailed description of the <a href=\"#create-table-query\">CREATE TABLE</a> query.</p>\n<p>A table for the Graphite data should have the following columns for the following data:</p>\n<ul>\n<li>Metric name (Graphite sensor). Data type: <code>String</code>.</li>\n<li>Time of measuring the metric. Data type: <code>DateTime</code>.</li>\n<li>Value of the metric. Data type: any numeric.</li>\n<li>\n<p>Version of the metric. Data type: any numeric.</p>\n<p>ClickHouse saves the rows with the highest version or the last written if versions are the same. Other rows are deleted during the merge of data parts.</p>\n</li>\n</ul>\n<p>The names of these columns should be set in the rollup configuration.</p>\n<p><strong>GraphiteMergeTree parameters</strong></p>\n<ul>\n<li><code>config_section</code> \u2014 Name of the section in the configuration file, where are the rules of rollup set.</li>\n</ul>\n<p><strong>Query clauses</strong></p>\n<p>When creating a <code>GraphiteMergeTree</code> table, the same <a href=\"#table_engine-mergetree-creating-a-table\">clauses</a> are required, as when creating a <code>MergeTree</code> table.</p>\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects and, if possible, switch the old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">EventDate</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">Path</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">Time</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">Value</span> <span class=\"o\">&lt;</span><span class=\"n\">Numeric_type</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n    ");
            
            document.write("<span class=\"k\">Version</span> <span class=\"o\">&lt;</span><span class=\"n\">Numeric_type</span><span class=\"o\">&gt;</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">]</span> <span class=\"n\">GraphiteMergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"o\">-</span><span class=\"k\">column</span> <span class=\"p\">[,</span> <span class=\"n\">sampling_expression</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"k\">primary</span><span class=\"p\">,</span> <span class=\"k\">key</span><span class=\"p\">),</span> <span class=\"n\">index_granularity</span><span class=\"p\">,</span> <span class=\"n\">config_section</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>All of the parameters excepting <code>config_section</code> have the same meaning as in <code>MergeTree</code>.</p>\n<ul>\n<li><code>config_section</code> \u2014 Name of the section in the configuration file, where are the rules of rollup set.</li>\n</ul>\n</details>\n<h3 id=\"rollup-configuration\">Rollup configuration<a class=\"headerlink\" href=\"#rollup-configuration\" title=\"Permanent link\">&para;</a></h3>\n<p>The settings for rollup are defined by the <a href=\"#server_settings-graphite_rollup\">graphite_rollup</a> parameter in the server configuration. The name of the parameter could be any. You can create several configurations and use them for different tables.</p>\n<p>Rollup configuration structure:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">required-columns</span>\n<span class=\"err\">patterns</span>\n</code></pre></div>\n\n\n<h4 id=\"required-columns\">Required Columns<a class=\"headerlink\" href=\"#required-columns\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>path_column_name</code> \u2014 The name of the column storing the metric name (Graphite sensor). Default value: <code>Path</code>.</li>\n<li><code>time_column_name</code> \u2014 The name of the column storing the time of measuring the metric. Default value: <code>Time</code>.</li>\n<li><code>value_column_name</code> \u2014 The name of the column storing the value of the metric at the time set in <code>time_column_name</code>. Default value: <code>Value</code>.</li>\n<li><code>version_column_name</code> \u2014 The name of the column storing the version of the metric. Default value: <code>Timestamp</code>.</li>\n</ul>\n<h4 id=\"patterns\">Patterns<a class=\"headerlink\" href=\"#patterns\" title=\"Permanent link\">&para;</a></h4>\n<p>Structure of the <code>patterns</code> section:</p>\n<div class=\"codehilite\"><pre><span></span><code>pattern\n    regexp\n    function\npattern\n    regexp\n    age + precision\n    ...\npattern\n    regexp\n    function\n    age + precision\n    ...\npattern\n    ...\ndefault\n    function\n    age + precision\n    ...\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Attention</p>\n<p>Patterns must be strictly ordered:</p>\n<ol>\n<li>Patterns without <code>function</code> or <code>retention</code>.</li>\n<li>Patterns with both <code>function</code> and <code>retention</code>.</li>\n<li>Pattern <code>default</code>.</li>\n</ol>\n</div>\n<p>When processing a row, ClickHouse checks the rules in the <code>pattern</code> sections. Each of <code>pattern</code> (including <code>default</code>) sections can contain <code>function</code> parameter for aggregation, <code>retention</code> parameters or both. If the metric name matches the <code>regexp</code>, the rules from the <code>pattern</code> section (or sections) are applied; otherwise, the rules from the <code>default</code> section are used.</p>\n<p>Fields for <code>pattern</code> and <code>default</code> sections:</p>\n<ul>\n<li><code>regexp</code>\u2013 A pattern for the metric name.</li>\n<li><code>age</code> \u2013 The minimum age of the data in seconds.</li>\n<li><code>precision</code>\u2013 How precisely to define the age of the data in seconds. Should be a divisor for 86400 (seconds in a day).</li>\n<li><code>function</code> \u2013 The name of the aggregating function to apply to data whose age falls within the range <code>[age, age + precision]</code>.</li>\n</ul>\n<h4 id=\"configuration-example\">Configuration Example<a class=\"headerlink\" href=\"#configuration-example\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;graphite_rollup&gt;</span>\n    <span class=\"nt\">&lt;version_column_name&gt;</span>Version<span class=\"nt\">&lt;/version_column_name&gt;</span>\n    <span class=\"nt\">&lt;pattern&gt;</span>\n        <span class=\"nt\">&lt;regexp&gt;</span>click_cost<span class=\"nt\">&lt;/regexp&gt;</span>\n        <span class=\"nt\">&lt;function&gt;</span>any<span class=\"nt\">&lt;/function&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>0<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>5<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>86400<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>60<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n    <span class=\"nt\">&lt;/pattern&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"nt\">&lt;function&gt;</span>max<span class=\"nt\">&lt;/function&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>0<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>60<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>3600<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>300<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>86400<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>3600<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n<span class=\"nt\">&lt;/graphite_rollup&gt;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../operations/table_engines/log_family/\"></a><a name=\"operations/table_engines/log_family/\"></a><a name=\"../../operations/table_engines/log_family/\"></a><a name=\"table_engines/log_family/\"></a><a name=\"../../../operations/table_engines/log_family/\"></a><a name=\"log_family/\"></a><a name=\"../../table_engines/log_family/\"></a><a name=\"../../../table_engines/log_family/\"></a><a name=\"../operations/table_engines/log_family/\"></a><a name=\"../../../../../operations/table_engines/log_family/\"></a><a name=\"../../../../../../table_engines/log_family/\"></a><a name=\"../../../../../table_engines/log_family/\"></a><a name=\"../table_engines/log_family/\"></a><a name=\"../../../../table_engines/log_family/\"></a></p>\n<h2 id=\"log-engine-family\">Log Engine Family<a class=\"headerlink\" href=\"#log-engine-family\" title=\"Permanent link\">&para;</a></h2>\n<p>These engines were developed for scenarios when you need to quickly write many small tables (up to about 1 million rows) and read them later as a whole.</p>\n<p>Engines of the family:</p>\n<ul>\n<li><a href=\"#stripelog/\">StripeLog</a></li>\n<li><a href=\"#log/\">Log</a></li>\n<li><a href=\"#tinylog/\">TinyLog</a></li>\n</ul>\n<h3 id=\"common-properties\">Common properties<a class=\"headerlink\" href=\"#common-properties\" title=\"Permanent link\">&para;</a></h3>\n<p>Engines:</p>\n<ul>\n<li>Store data on a disk.</li>\n<li>Append data to the end of file when writing.</li>\n<li>\n<p>Support locks for concurrent data access.</p>\n<p>During <code>INSERT</code> queries, the table is locked, and other queries for reading and writing data both wait for the table to unlock. If there are no data writing queries, any number of data reading queries can be performed concurrently.</p>\n</li>\n<li>\n<p>Do not support <a href=\"#alter-mutations\">mutation</a> operations.</p>\n</li>\n<li>\n<p>Do not support indexes.</p>\n<p>This means that <code>SELECT</code> queries for ranges of data are not efficient.</p>\n</li>\n<li>\n<p>Do not write data atomically.</p>\n<p>You can get a table with corrupted data if something breaks the write operation, for example, abnormal server shutdown.</p>\n</li>\n</ul>\n<h3 id=\"differences\">Differences<a class=\"headerlink\" href=\"#differences\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>TinyLog</code> engine is the simplest in the family and provides the poorest functionality and lowest efficiency. The <code>TinyLog</code> engine doesn't support parallel data reading by several threads. It reads data slower than other engines in the family that support parallel reading and it uses almost as many descriptors as the <code>Log</code> engine because it stores each column in a separate file. Use it in simple low-load scenarios.</p>\n<p>The <code>Log</code> and <code>StripeLog</code> engines support parallel data reading. When reading data, ClickHouse uses multiple threads. Each thread processes a separate data block. The <code>Log</code> engine uses a separate file for each column of the table. <code>StripeLog</code> stores all the data in one file. As a result, the <code>StripeLog</code> engine uses fewer descriptors in the operating system, but the <code>Log</code> engine provides higher efficiency when reading data.</p>\n<p><a name=\"../operations/table_engines/stripelog/\"></a><a name=\"table_engines/stripelog/\"></a><a name=\"../../../operations/table_engines/stripelog/\"></a><a name=\"../../table_engines/stripelog/\"></a><a name=\"../../../../operations/table_engines/stripelog/\"></a><a name=\"../../../../../table_engines/stripelog/\"></a><a name=\"../../../../../../table_engines/stripelog/\"></a><a name=\"../../../../table_engines/stripelog/\"></a><a name=\"../../../../../operations/table_engines/stripelog/\"></a><a name=\"stripelog/\"></a><a name=\"../../operations/table_engines/stripelog/\"></a><a name=\"../table_engin");
            
            document.write("es/stripelog/\"></a><a name=\"../../../table_engines/stripelog/\"></a><a name=\"operations/table_engines/stripelog/\"></a></p>\n<h2 id=\"stripelog\">StripeLog<a class=\"headerlink\" href=\"#stripelog\" title=\"Permanent link\">&para;</a></h2>\n<p>This engine belongs to the family of log engines. See the common properties of log engines and their differences in the <a href=\"#log_family/\">Log Engine Family</a> article.</p>\n<p>Use this engine in scenarios when you need to write many tables with a small amount of data (less than 1 million rows).</p>\n<h3 id=\"table_engines-stripelog-creating-a-table\">Creating a Table<a class=\"headerlink\" href=\"#table_engines-stripelog-creating-a-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">column1_name</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">column2_name</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">StripeLog</span>\n</code></pre></div>\n\n\n<p>See the detailed description of the <a href=\"#create-table-query\">CREATE TABLE</a> query.</p>\n<h3 id=\"table_engines-stripelog-writing-the-data\">Writing the Data<a class=\"headerlink\" href=\"#table_engines-stripelog-writing-the-data\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>StripeLog</code> engine stores all the columns in one file. For each <code>INSERT</code> query, ClickHouse appends the data block to the end of a table file, writing columns one by one.</p>\n<p>For each table ClickHouse writes the files:</p>\n<ul>\n<li><code>data.bin</code> \u2014 Data file.</li>\n<li><code>index.mrk</code> \u2014 File with marks. Marks contain offsets for each column of each data block inserted.</li>\n</ul>\n<p>The <code>StripeLog</code> engine does not support the <code>ALTER UPDATE</code> and <code>ALTER DELETE</code> operations.</p>\n<h3 id=\"table_engines-stripelog-reading-the-data\">Reading the Data<a class=\"headerlink\" href=\"#table_engines-stripelog-reading-the-data\" title=\"Permanent link\">&para;</a></h3>\n<p>The file with marks allows ClickHouse to parallelize the reading of data. This means that a <code>SELECT</code> query returns rows in an unpredictable order. Use the <code>ORDER BY</code> clause to sort rows.</p>\n<h3 id=\"table_engines-stripelog-example-of-use\">Example of Use<a class=\"headerlink\" href=\"#table_engines-stripelog-example-of-use\" title=\"Permanent link\">&para;</a></h3>\n<p>Creating a table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">stripe_log_table</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">message_type</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">StripeLog</span>\n</code></pre></div>\n\n\n<p>Inserting data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">stripe_log_table</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">(),</span><span class=\"s1\">&#39;REGULAR&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;The first regular message&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">stripe_log_table</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">(),</span><span class=\"s1\">&#39;REGULAR&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;The second regular message&#39;</span><span class=\"p\">),(</span><span class=\"n\">now</span><span class=\"p\">(),</span><span class=\"s1\">&#39;WARNING&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;The first warning message&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>We used two <code>INSERT</code> queries to create two data blocks inside the <code>data.bin</code> file.</p>\n<p>ClickHouse uses multiple threads when selecting data. Each thread reads a separate data block and returns resulting rows independently as it finishes. As a result, the order of blocks of rows in the output does not match the order of the same blocks in the input in most cases. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">stripe_log_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500timestamp\u2500\u252c\u2500message_type\u2500\u252c\u2500message\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2019-01-18 14:27:32 \u2502 REGULAR      \u2502 The second regular message \u2502\n\u2502 2019-01-18 14:34:53 \u2502 WARNING      \u2502 The first warning message  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500timestamp\u2500\u252c\u2500message_type\u2500\u252c\u2500message\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2019-01-18 14:23:43 \u2502 REGULAR      \u2502 The first regular message \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Sorting the results (ascending order by default):</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">stripe_log_table</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">timestamp</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500timestamp\u2500\u252c\u2500message_type\u2500\u252c\u2500message\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2019-01-18 14:23:43 \u2502 REGULAR      \u2502 The first regular message  \u2502\n\u2502 2019-01-18 14:27:32 \u2502 REGULAR      \u2502 The second regular message \u2502\n\u2502 2019-01-18 14:34:53 \u2502 WARNING      \u2502 The first warning message  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"operations/table_engines/log/\"></a><a name=\"../table_engines/log/\"></a><a name=\"../../table_engines/log/\"></a><a name=\"../../../../../operations/table_engines/log/\"></a><a name=\"../../../table_engines/log/\"></a><a name=\"../../../../../table_engines/log/\"></a><a name=\"../operations/table_engines/log/\"></a><a name=\"table_engines/log/\"></a><a name=\"log/\"></a><a name=\"../../operations/table_engines/log/\"></a><a name=\"../../../../../../table_engines/log/\"></a><a name=\"../../../../table_engines/log/\"></a><a name=\"../../../../operations/table_engines/log/\"></a><a name=\"../../../operations/table_engines/log/\"></a></p>\n<h2 id=\"log_1\">Log<a class=\"headerlink\" href=\"#log_1\" title=\"Permanent link\">&para;</a></h2>\n<p>Engine belongs to the family of log engines. See the common properties of log engines and their differences in the <a href=\"#log_family/\">Log Engine Family</a> article.</p>\n<p>Log differs from <a href=\"#tinylog/\">TinyLog</a> in that a small file of \"marks\" resides with the column files. These marks are written on every data block and contain offsets that indicate where to start reading the file in order to skip the specified number of rows. This makes it possible to read table data in multiple threads.<br />\nFor concurrent data access, the read operations can be performed simultaneously, while write operations block reads and each other.<br />\nThe Log engine does not support indexes. Similarly, if writing to a table failed, the table is broken, and reading from it returns an error. The Log engine is appropriate for temporary data, write-once tables, and for testing or demonstration purposes.</p>\n<p><a name=\"table_engines/tinylog/\"></a><a name=\"../../../table_engines/tinylog/\"></a><a name=\"../../../../table_engines/tinylog/\"></a><a name=\"../../../operations/table_engines/tinylog/\"></a><a name=\"operations/table_engines/tinylog/\"></a><a name=\"../../table_engines/tinylog/\"></a><a name=\"../../operations/table_engines/tinylog/\"></a><a name=\"../../../../../table_engines/tinylog/\"></a><a name=\"tinylog/\"></a><a name=\"../../../../../../table_engines/tinylog/\"></a><a name=\"../../../../../operations/table_engines/tinylog/\"></a><a name=\"../table_engines/tinylog/\"></a><a name=\"../../../../operations/table_engines/tinylog/\"></a><a name=\"../operations/table_engines/tinylog/\"></a></p>\n<h2 id=\"tinylog\">TinyLog<a class=\"headerlink\" href=\"#tinylog\" title=\"Permanent link\">&para;</a></h2>\n<p>The engine belongs to the log engine family. See <a href=\"#log_family/\">Log Engine Family</a> for common properties of log engines and their differences.</p>\n<p>This table engine is typically used with the write-once method: write data one time, then read it as many times as necessary. For example, you can use <code>TinyLog</code>-type tables for intermediary data that is processed in small batches. Note that storing data in a large number of small tables is inefficient.</p>\n<p>Queries are executed in a single stream. In other words, this engine is intended for relatively small tables (up to about 1,000,000 rows). It makes sense to use this table engine if you have many small tables, since it's simpler than the <a href=\"#log/\">Log</a> engine (fewer files need to be opened).</p>\n<p><a name=\"table_engines/kafka/\"></a><a name=\"kafka/\"></a><a name=\"../../../../../../table_en");
            
            document.write("gines/kafka/\"></a><a name=\"../../../../../operations/table_engines/kafka/\"></a><a name=\"../../../../../table_engines/kafka/\"></a><a name=\"../operations/table_engines/kafka/\"></a><a name=\"../../../../table_engines/kafka/\"></a><a name=\"../../../operations/table_engines/kafka/\"></a><a name=\"../table_engines/kafka/\"></a><a name=\"../../../table_engines/kafka/\"></a><a name=\"../../../../operations/table_engines/kafka/\"></a><a name=\"operations/table_engines/kafka/\"></a><a name=\"../../table_engines/kafka/\"></a><a name=\"../../operations/table_engines/kafka/\"></a></p>\n<h2 id=\"kafka\">Kafka<a class=\"headerlink\" href=\"#kafka\" title=\"Permanent link\">&para;</a></h2>\n<p>This engine works with <a href=\"http://kafka.apache.org/\" rel=\"external nofollow noreferrer\">Apache Kafka</a>.</p>\n<p>Kafka lets you:</p>\n<ul>\n<li>Publish or subscribe to data flows.</li>\n<li>Organize fault-tolerant storage.</li>\n<li>Process streams as they become available.</li>\n</ul>\n<h3 id=\"table_engine-kafka-creating-a-table\">Creating a Table<a class=\"headerlink\" href=\"#table_engine-kafka-creating-a-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span><span class=\"p\">()</span>\n<span class=\"n\">SETTINGS</span>\n    <span class=\"n\">kafka_broker_list</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;host:port&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">kafka_topic_list</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;topic1,topic2,...&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">kafka_group_name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;group_name&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">kafka_format</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;data_format&#39;</span><span class=\"p\">[,]</span>\n    <span class=\"p\">[</span><span class=\"n\">kafka_row_delimiter</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;delimiter_symbol&#39;</span><span class=\"p\">,]</span>\n    <span class=\"p\">[</span><span class=\"n\">kafka_schema</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&#39;</span><span class=\"p\">,]</span>\n    <span class=\"p\">[</span><span class=\"n\">kafka_num_consumers</span> <span class=\"o\">=</span> <span class=\"n\">N</span><span class=\"p\">,]</span>\n    <span class=\"p\">[</span><span class=\"n\">kafka_skip_broken_messages</span> <span class=\"o\">=</span> <span class=\"n\">N</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Required parameters:</p>\n<ul>\n<li><code>kafka_broker_list</code> \u2013 A comma-separated list of brokers (for example, <code>localhost:9092</code>).</li>\n<li><code>kafka_topic_list</code> \u2013 A list of Kafka topics.</li>\n<li><code>kafka_group_name</code> \u2013 A group of Kafka consumers. Reading margins are tracked for each group separately. If you don't want messages to be duplicated in the cluster, use the same group name everywhere.</li>\n<li><code>kafka_format</code> \u2013 Message format. Uses the same notation as the SQL <code>FORMAT</code> function, such as <code>JSONEachRow</code>. For more information, see the <a href=\"#../../interfaces/formats/\">Formats</a> section.</li>\n</ul>\n<p>Optional parameters:</p>\n<ul>\n<li><code>kafka_row_delimiter</code> \u2013 Delimiter character, which ends the message.</li>\n<li><code>kafka_schema</code> \u2013 Parameter that must be used if the format requires a schema definition. For example, <a href=\"https://capnproto.org/\" rel=\"external nofollow noreferrer\">Cap'n Proto</a> requires the path to the schema file and the name of the root <code>schema.capnp:Message</code> object.</li>\n<li><code>kafka_num_consumers</code> \u2013 The number of consumers per table. Default: <code>1</code>. Specify more consumers if the throughput of one consumer is insufficient. The total number of consumers should not exceed the number of partitions in the topic, since only one consumer can be assigned per partition.</li>\n<li><code>kafka_skip_broken_messages</code> \u2013 Kafka message parser tolerance to schema-incompatible messages per block. Default: <code>0</code>. If <code>kafka_skip_broken_messages = N</code> then the engine skips <em>N</em> Kafka messages that cannot be parsed (a message equals a row of data).</li>\n</ul>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">queue</span> <span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:9092&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;topic&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;group1&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;JSONEachRow&#39;</span><span class=\"p\">);</span>\n\n  <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">queue</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span><span class=\"p\">;</span>\n\n  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">queue2</span> <span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span> <span class=\"n\">SETTINGS</span> <span class=\"n\">kafka_broker_list</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;localhost:9092&#39;</span><span class=\"p\">,</span>\n                            <span class=\"n\">kafka_topic_list</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;topic&#39;</span><span class=\"p\">,</span>\n                            <span class=\"n\">kafka_group_name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;group1&#39;</span><span class=\"p\">,</span>\n                            <span class=\"n\">kafka_format</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;JSONEachRow&#39;</span><span class=\"p\">,</span>\n                            <span class=\"n\">kafka_num_consumers</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">;</span>\n\n  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">queue2</span> <span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:9092&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;topic&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;group1&#39;</span><span class=\"p\">)</span>\n              <span class=\"n\">SETTINGS</span> <span class=\"n\">kafka_format</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;JSONEachRow&#39;</span><span class=\"p\">,</span>\n                       <span class=\"n\">kafka_num_consumers</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<details>\n<p><summary>Deprecated Method for Creating a Table</summary></p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>Do not use this method in new projects. If possible, switch old projects to the method described above.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Kafka</span><span class=\"p\">(</span><span class=\"n\">kafka_broker_list</span><span class=\"p\">,</span> <span class=\"n\">kafka_topic_list</span><span class=\"p\">,</span> <span class=\"n\">kafka_group_name</span><span class=\"p\">,</span> <span class=\"n\">kafka_format</span>\n      <span class=\"p\">[,</span> <span class=\"n\">kafka_row_delimiter</span><span class=\"p\">,</span> <span class=\"n\">kafka_schema</span><span class=\"p\">,</span> <span class=\"n\">kafka_num_consumers</span><span class=\"p\">,</span> <span class=\"n\">kafka_skip_broken_messages</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n</details>\n<h3 id=\"description\">Description<a class=\"headerlink\" href=\"#description\" title=\"Permanent link\">&para;</a></h3>\n<p>The delivered messages are tracked automatically, so each message in a group is only counted once. If you want to get the data twice, then create a copy of the table with another group name.</p>\n<p>Groups are flexible and synced on the cluster. For instance, if you have 10 topics and 5 copies of a table in a cluster, then each copy gets 2 topics. If the number of copies changes, the topics are redistributed across the copies automatically. Read ");
            
            document.write("more about this at <a href=\"http://kafka.apache.org/intro\" rel=\"external nofollow noreferrer\">http://kafka.apache.org/intro</a>.</p>\n<p><code>SELECT</code> is not particularly useful for reading messages (except for debugging), because each message can be read only once. It is more practical to create real-time threads using materialized views. To do this:</p>\n<ol>\n<li>Use the engine to create a Kafka consumer and consider it a data stream.</li>\n<li>Create a table with the desired structure.</li>\n<li>Create a materialized view that converts data from the engine and puts it into a previously created table.</li>\n</ol>\n<p>When the <code>MATERIALIZED VIEW</code> joins the engine, it starts collecting data in the background. This allows you to continually receive messages from Kafka and convert them to the required format using <code>SELECT</code>.<br />\nOne kafka table can have as many materialized views as you like, they do not read data from the kafka table directly, but receive new records (in blocks), this way you can write to several tables with different detail level (with grouping - aggregation and without).</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">queue</span> <span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">message</span> <span class=\"n\">String</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Kafka</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:9092&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;topic&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;group1&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;JSONEachRow&#39;</span><span class=\"p\">);</span>\n\n  <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">daily</span> <span class=\"p\">(</span>\n    <span class=\"k\">day</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"k\">level</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">total</span> <span class=\"n\">UInt64</span>\n  <span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">SummingMergeTree</span><span class=\"p\">(</span><span class=\"k\">day</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"k\">day</span><span class=\"p\">,</span> <span class=\"k\">level</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n\n  <span class=\"k\">CREATE</span> <span class=\"n\">MATERIALIZED</span> <span class=\"k\">VIEW</span> <span class=\"n\">consumer</span> <span class=\"k\">TO</span> <span class=\"n\">daily</span>\n    <span class=\"k\">AS</span> <span class=\"k\">SELECT</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"k\">timestamp</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"k\">day</span><span class=\"p\">,</span> <span class=\"k\">level</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">as</span> <span class=\"n\">total</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">queue</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">day</span><span class=\"p\">,</span> <span class=\"k\">level</span><span class=\"p\">;</span>\n\n  <span class=\"k\">SELECT</span> <span class=\"k\">level</span><span class=\"p\">,</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">total</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">daily</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">level</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>To improve performance, received messages are grouped into blocks the size of <a href=\"#settings-max_insert_block_size\">max_insert_block_size</a>. If the block wasn't formed within <a href=\"#../settings/settings/\">stream_flush_interval_ms</a> milliseconds, the data will be flushed to the table regardless of the completeness of the block.</p>\n<p>To stop receiving topic data or to change the conversion logic, detach the materialized view:</p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"n\">DETACH</span> <span class=\"k\">TABLE</span> <span class=\"n\">consumer</span><span class=\"p\">;</span>\n  <span class=\"n\">ATTACH</span> <span class=\"n\">MATERIALIZED</span> <span class=\"k\">VIEW</span> <span class=\"n\">consumer</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>If you want to change the target table by using <code>ALTER</code>, we recommend disabling the material view to avoid discrepancies between the target table and the data from the view.</p>\n<h3 id=\"configuration\">Configuration<a class=\"headerlink\" href=\"#configuration\" title=\"Permanent link\">&para;</a></h3>\n<p>Similar to GraphiteMergeTree, the Kafka engine supports extended configuration using the ClickHouse config file. There are two configuration keys that you can use: global (<code>kafka</code>) and topic-level (<code>kafka_*</code>). The global configuration is applied first, and then the topic-level configuration is applied (if it exists).</p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"c\">&lt;!-- Global configuration options for all tables of Kafka engine type --&gt;</span>\n  <span class=\"nt\">&lt;kafka&gt;</span>\n    <span class=\"nt\">&lt;debug&gt;</span>cgrp<span class=\"nt\">&lt;/debug&gt;</span>\n    <span class=\"nt\">&lt;auto_offset_reset&gt;</span>smallest<span class=\"nt\">&lt;/auto_offset_reset&gt;</span>\n  <span class=\"nt\">&lt;/kafka&gt;</span>\n\n  <span class=\"c\">&lt;!-- Configuration specific for topic &quot;logs&quot; --&gt;</span>\n  <span class=\"nt\">&lt;kafka_logs&gt;</span>\n    <span class=\"nt\">&lt;retry_backoff_ms&gt;</span>250<span class=\"nt\">&lt;/retry_backoff_ms&gt;</span>\n    <span class=\"nt\">&lt;fetch_min_bytes&gt;</span>100000<span class=\"nt\">&lt;/fetch_min_bytes&gt;</span>\n  <span class=\"nt\">&lt;/kafka_logs&gt;</span>\n</code></pre></div>\n\n\n<p>For a list of possible configuration options, see the <a href=\"https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION.md\" rel=\"external nofollow noreferrer\">librdkafka configuration reference</a>. Use the underscore (<code>_</code>) instead of a dot in the ClickHouse configuration. For example, <code>check.crcs=true</code> will be <code>&lt;check_crcs&gt;true&lt;/check_crcs&gt;</code>.</p>\n<h3 id=\"virtual-columns\">Virtual Columns<a class=\"headerlink\" href=\"#virtual-columns\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><code>_topic</code> \u2014 Kafka topic.</li>\n<li><code>_key</code> \u2014 Key of the message.</li>\n<li><code>_offset</code> \u2014 Offset of the message.</li>\n<li><code>_timestamp</code> \u2014 Timestamp of the message.</li>\n<li><code>_partition</code> \u2014 Partition of Kafka topic.</li>\n</ul>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#table_engines-virtual_columns\">Virtual columns</a></li>\n</ul>\n<p><a name=\"../../../../../operations/table_engines/mysql/\"></a><a name=\"../../operations/table_engines/mysql/\"></a><a name=\"../../table_engines/mysql/\"></a><a name=\"../../../../../../table_engines/mysql/\"></a><a name=\"../../../../operations/table_engines/mysql/\"></a><a name=\"../../../operations/table_engines/mysql/\"></a><a name=\"../operations/table_engines/mysql/\"></a><a name=\"../table_engines/mysql/\"></a><a name=\"../../../../../table_engines/mysql/\"></a><a name=\"../../../table_engines/mysql/\"></a><a name=\"../../../../table_engines/mysql/\"></a><a name=\"operations/table_engines/mysql/\"></a><a name=\"table_engines/mysql/\"></a><a name=\"mysql/\"></a></p>\n<h2 id=\"mysql_1\">MySQL<a class=\"headerlink\" href=\"#mysql_1\" title=\"Permanent link\">&para;</a></h2>\n<p>The MySQL engine allows you to perform <code>SELECT</code> queries on data that is stored on a remote MySQL server.</p>\n<h3 id=\"creating-a-table_6\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_6\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n    <span class=\"k\">INDEX</span> <span class=\"n\">index_name1</span> <span class=\"n\">expr1</span> <span class=\"k\">TYPE</span> <span class=\"n\">type1</span><span class=\"p\">(...)</span> <span class=\"n\">GRANULARITY</span> <span class=\"n\">value1</span><span class=\"p\">,</span>\n    <span class=\"k\">INDEX</span> <span class=\"n\">index_name2</span> <span class=\"n\">expr2</span> <span class=\"k\">TYPE</span> <span class=\"n\">type2</span><span class=\"p\">(...)</span> <span class=\"n\">GRANULARITY</span> <span class=\"n\">value2</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MySQL</span><span class=\"p\">(</span><span class=\"s1\">");
            
            document.write("&#39;host:port&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;database&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">[,</span> <span class=\"n\">replace_query</span><span class=\"p\">,</span> <span class=\"s1\">&#39;on_duplicate_clause&#39;</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<p>See a detailed description of the <a href=\"#create-table-query\">CREATE TABLE</a> query.</p>\n<p>The table structure can differ from the original MySQL table structure:</p>\n<ul>\n<li>Column names should be the same as in the original MySQL table, but you can use just some of these columns and in any order.</li>\n<li>Column types may differ from those in the original MySQL table. ClickHouse tries to <a href=\"#type_conversion_function-cast\">cast</a> values to the ClickHouse data types.</li>\n</ul>\n<p><strong>Engine Parameters</strong></p>\n<ul>\n<li><code>host:port</code> \u2014 MySQL server address.</li>\n<li><code>database</code> \u2014 Remote database name.</li>\n<li><code>table</code> \u2014 Remote table name.</li>\n<li><code>user</code> \u2014 MySQL user.</li>\n<li><code>password</code> \u2014 User password.</li>\n<li><code>replace_query</code> \u2014 Flag that converts <code>INSERT INTO</code> queries to <code>REPLACE INTO</code>. If <code>replace_query=1</code>, the query is substituted.</li>\n<li>\n<p><code>on_duplicate_clause</code> \u2014 The <code>ON DUPLICATE KEY on_duplicate_clause</code> expression that is added to the <code>INSERT</code> query.</p>\n<p>Example: <code>INSERT INTO t (c1,c2) VALUES ('a', 2) ON DUPLICATE KEY UPDATE c2 = c2 + 1</code>, where <code>on_duplicate_clause</code> is <code>UPDATE c2 = c2 + 1</code>. See the <a href=\"https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html\" rel=\"external nofollow noreferrer\">MySQL documentation</a> to find which <code>on_duplicate_clause</code> you can use with the <code>ON DUPLICATE KEY</code> clause.</p>\n<p>To specify <code>on_duplicate_clause</code> you need to pass <code>0</code> to the <code>replace_query</code> parameter. If you simultaneously pass <code>replace_query = 1</code> and <code>on_duplicate_clause</code>, ClickHouse generates an exception.</p>\n</li>\n</ul>\n<p>Simple <code>WHERE</code> clauses such as <code>=, !=, &gt;, &gt;=, &lt;, &lt;=</code> are executed on the MySQL server.</p>\n<p>The rest of the conditions and the <code>LIMIT</code> sampling constraint are executed in ClickHouse only after the query to MySQL finishes.</p>\n<h3 id=\"usage-example_4\">Usage Example<a class=\"headerlink\" href=\"#usage-example_4\" title=\"Permanent link\">&para;</a></h3>\n<p>Table in MySQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+--------------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Table in ClickHouse, retrieving data from the MySQL table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">mysql_table</span>\n<span class=\"p\">(</span>\n    <span class=\"o\">`</span><span class=\"n\">float_nullable</span><span class=\"o\">`</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">),</span>\n    <span class=\"o\">`</span><span class=\"n\">int_id</span><span class=\"o\">`</span> <span class=\"n\">Int32</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MySQL</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:3306&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;bayonet&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;123&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">mysql_table6</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500float_nullable\u2500\u252c\u2500int_id\u2500\u2510\n\u2502           \u1d3a\u1d41\u1d38\u1d38 \u2502      1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also\">See Also<a class=\"headerlink\" href=\"#see-also\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#../../query_language/table_functions/mysql/\">The 'mysql' table function</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-mysql\">Using MySQL as a source of external dictionary</a></li>\n</ul>\n<p><a name=\"../table_engines/jdbc/\"></a><a name=\"../../../../../table_engines/jdbc/\"></a><a name=\"../../../../operations/table_engines/jdbc/\"></a><a name=\"jdbc/\"></a><a name=\"../../../../../operations/table_engines/jdbc/\"></a><a name=\"../../operations/table_engines/jdbc/\"></a><a name=\"operations/table_engines/jdbc/\"></a><a name=\"../../../operations/table_engines/jdbc/\"></a><a name=\"../../../../table_engines/jdbc/\"></a><a name=\"../../table_engines/jdbc/\"></a><a name=\"../../../table_engines/jdbc/\"></a><a name=\"../../../../../../table_engines/jdbc/\"></a><a name=\"../operations/table_engines/jdbc/\"></a><a name=\"table_engines/jdbc/\"></a></p>\n<h2 id=\"table_engine-jdbc\">JDBC<a class=\"headerlink\" href=\"#table_engine-jdbc\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows ClickHouse to connect to external databases via <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"external nofollow noreferrer\">JDBC</a>.</p>\n<p>To implement the JDBC connection, ClickHouse uses the separate program <a href=\"https://github.com/alex-krash/clickhouse-jdbc-bridge\" rel=\"external nofollow noreferrer\">clickhouse-jdbc-bridge</a> that should run as a daemon.</p>\n<p>This engine supports the <a href=\"#../../data_types/nullable/\">Nullable</a> data type.</p>\n<h3 id=\"creating-a-table_7\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_7\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">JDBC</span><span class=\"p\">(</span><span class=\"n\">dbms_uri</span><span class=\"p\">,</span> <span class=\"n\">external_database</span><span class=\"p\">,</span> <span class=\"n\">external_table</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Engine Parameters</strong></p>\n<ul>\n<li>\n<p><code>dbms_uri</code> \u2014 URI of an external DBMS.</p>\n<p>Format: <code>jdbc:&lt;driver_name&gt;://&lt;host_name&gt;:&lt;port&gt;/?user=&lt;username&gt;&amp;password=&lt;password&gt;</code>.<br />\nExample for MySQL: <code>jdbc:mysql://localhost:3306/?user=root&amp;password=root</code>.</p>\n</li>\n<li>\n<p><code>external_database</code> \u2014 Database in an external DBMS.</p>\n</li>\n<li><code>external_table</code> \u2014 Name of the table in <code>external_database</code>.</li>\n</ul>\n<h3 id=\"usage-example_5\">Usage Example<a class=\"headerlink\" href=\"#usage-example_5\" title=\"Permanent link\">&para;</a></h3>\n<p>Creating a table in MySQL server by connecting directly with it's console client:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+--------------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Creating a table in ClickHouse server and selecting data from it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">jdbc_table</span> <span class=\"n\">ENGINE</span> <span class=\"n\">JDBC</span><span class=\"p\">(</span><span class=\"s1\">&#39;jdbc:mysql://localhost:3306/?user=root&amp;password=root&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DESCRIBE</span> <span class=\"k\">TABLE</span> <span class=\"n\">jdbc_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500type\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500default_type\u2500\u252c\u2500default_expression\u2500\u2510\n\u2502 int_id             \u2502 Int32              \u2502              \u2502                    \u2502\n\u2502 int_nullable       \u2502 Nullable(Int32)    \u2502              \u2502                    \u2502\n\u2502 float              \u2502 Float32            \u2502              \u2502                    \u2502\n\u2502 float_nullable     \u2502 Nullable(Float32)  \u2502              \u2502                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">jdbc_table</span>\n</code></pre></div>\n\n\n<div c");
            
            document.write("lass=\"codehilite\"><pre><span></span><code>\u250c\u2500int_id\u2500\u252c\u2500int_nullable\u2500\u252c\u2500float\u2500\u252c\u2500float_nullable\u2500\u2510\n\u2502      1 \u2502         \u1d3a\u1d41\u1d38\u1d38 \u2502     2 \u2502           \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_1\">See Also<a class=\"headerlink\" href=\"#see-also_1\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#../../query_language/table_functions/jdbc/\">JDBC table function</a>.</li>\n</ul>\n<p><a name=\"operations/table_engines/odbc/\"></a><a name=\"../../../../../../table_engines/odbc/\"></a><a name=\"../table_engines/odbc/\"></a><a name=\"../../../operations/table_engines/odbc/\"></a><a name=\"../../../../table_engines/odbc/\"></a><a name=\"../../../../../operations/table_engines/odbc/\"></a><a name=\"../../operations/table_engines/odbc/\"></a><a name=\"../../../../operations/table_engines/odbc/\"></a><a name=\"table_engines/odbc/\"></a><a name=\"../../../../../table_engines/odbc/\"></a><a name=\"../../../table_engines/odbc/\"></a><a name=\"../../table_engines/odbc/\"></a><a name=\"odbc/\"></a><a name=\"../operations/table_engines/odbc/\"></a></p>\n<h2 id=\"table_engine-odbc\">ODBC<a class=\"headerlink\" href=\"#table_engine-odbc\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows ClickHouse to connect to external databases via <a href=\"https://en.wikipedia.org/wiki/Open_Database_Connectivity\" rel=\"external nofollow noreferrer\">ODBC</a>.</p>\n<p>To safely implement ODBC connections, ClickHouse uses a separate program <code>clickhouse-odbc-bridge</code>. If the ODBC driver is loaded directly from <code>clickhouse-server</code>, driver problems can crash the ClickHouse server. ClickHouse automatically starts <code>clickhouse-odbc-bridge</code> when it is required. The ODBC bridge program is installed from the same package as the <code>clickhouse-server</code>.</p>\n<p>This engine supports the <a href=\"#../../data_types/nullable/\">Nullable</a> data type.</p>\n<h3 id=\"creating-a-table_8\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_8\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ODBC</span><span class=\"p\">(</span><span class=\"n\">connection_settings</span><span class=\"p\">,</span> <span class=\"n\">external_database</span><span class=\"p\">,</span> <span class=\"n\">external_table</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>See a detailed description of the <a href=\"#create-table-query\">CREATE TABLE</a> query.</p>\n<p>The table structure can differ from the source table structure:</p>\n<ul>\n<li>Column names should be the same as in the source table, but you can use just some of these columns and in any order.</li>\n<li>Column types may differ from those in the source table. ClickHouse tries to <a href=\"#type_conversion_function-cast\">cast</a> values to the ClickHouse data types.</li>\n</ul>\n<p><strong>Engine Parameters</strong></p>\n<ul>\n<li><code>connection_settings</code> \u2014 Name of the section with connection settings in the <code>odbc.ini</code> file.</li>\n<li><code>external_database</code> \u2014 Name of a database in an external DBMS.</li>\n<li><code>external_table</code> \u2014 Name of a table in the <code>external_database</code>.</li>\n</ul>\n<h3 id=\"usage-example_6\">Usage Example<a class=\"headerlink\" href=\"#usage-example_6\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Retrieving data from the local MySQL installation via ODBC</strong></p>\n<p>This example is checked for Ubuntu Linux 18.04 and MySQL server 5.7.</p>\n<p>Ensure that unixODBC and MySQL Connector are installed.</p>\n<p>By default (if installed from packages), ClickHouse starts as user <code>clickhouse</code>. Thus, you need to create and configure this user in the MySQL server.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo mysql\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">CREATE</span> <span class=\"k\">USER</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"o\">@</span><span class=\"s1\">&#39;localhost&#39;</span> <span class=\"n\">IDENTIFIED</span> <span class=\"k\">BY</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"p\">;</span>\n<span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">GRANT</span> <span class=\"k\">ALL</span> <span class=\"k\">PRIVILEGES</span> <span class=\"k\">ON</span> <span class=\"o\">*</span><span class=\"p\">.</span><span class=\"o\">*</span> <span class=\"k\">TO</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"o\">@</span><span class=\"s1\">&#39;clickhouse&#39;</span> <span class=\"k\">WITH</span> <span class=\"k\">GRANT</span> <span class=\"k\">OPTION</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Then configure the connection in <code>/etc/odbc.ini</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat /etc/odbc.ini\n<span class=\"o\">[</span>mysqlconn<span class=\"o\">]</span>\n<span class=\"nv\">DRIVER</span> <span class=\"o\">=</span> /usr/local/lib/libmyodbc5w.so\n<span class=\"nv\">SERVER</span> <span class=\"o\">=</span> <span class=\"m\">127</span>.0.0.1\n<span class=\"nv\">PORT</span> <span class=\"o\">=</span> <span class=\"m\">3306</span>\n<span class=\"nv\">DATABASE</span> <span class=\"o\">=</span> <span class=\"nb\">test</span>\n<span class=\"nv\">USERNAME</span> <span class=\"o\">=</span> clickhouse\n<span class=\"nv\">PASSWORD</span> <span class=\"o\">=</span> clickhouse\n</code></pre></div>\n\n\n<p>You can check the connection using the <code>isql</code> utility from the unixODBC installation.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ isql -v mysqlconn\n+---------------------------------------+\n<span class=\"p\">|</span> Connected!                            <span class=\"p\">|</span>\n<span class=\"p\">|</span>                                       <span class=\"p\">|</span>\n...\n</code></pre></div>\n\n\n<p>Table in MySQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+--------------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Table in ClickHouse, retrieving data from the MySQL table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">odbc_t</span>\n<span class=\"p\">(</span>\n    <span class=\"o\">`</span><span class=\"n\">int_id</span><span class=\"o\">`</span> <span class=\"n\">Int32</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"n\">float_nullable</span><span class=\"o\">`</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"n\">Float32</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">ODBC</span><span class=\"p\">(</span><span class=\"s1\">&#39;DSN=mysqlconn&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">odbc_t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int_id\u2500\u252c\u2500float_nullable\u2500\u2510\n\u2502      1 \u2502           \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_2\">See Also<a class=\"headerlink\" href=\"#see-also_2\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#dicts-external_dicts_dict_sources-odbc\">ODBC external dictionaries</a></li>\n<li><a href=\"#../../query_language/table_functions/odbc/\">ODBC table function</a></li>\n</ul>\n<p><a name=\"../operations/table_engines/hdfs/\"></a><a name=\"table_engines/hdfs/\"></a><a name=\"../../../../../operations/table_engines/hdfs/\"></a><a name=\"../table_engines/hdfs/\"></a><a name=\"../../../table_engines/hdfs/\"></a><a name=\"../../../../table_engines/hdfs/\"></a><a name=\"../../../../../table_engines/hdfs/\"></a><a name=\"../../operations/table_engines/hdfs/\"></a><a name=\"../../table_engines/hdfs/\"></a><a name=\"operations/table_engines/hdfs/\"></a><a name=\"../../../operations/table_engines/hdfs/\"></a><a name=\"../../../../operations/table_engines/hdfs/\"></a><a name=\"hdfs/\"></a><a name=\"../../../../../../table_engines/hdfs/\"></a></p>\n<h2 id=\"table_engines-hdfs\">HDFS<a class=\"headerlink\" href=\"#table_engines-hdfs\" title=\"Permanent link\">&para;</a></h2>\n<p>This engine provides integration with <a href=\"https://en.wikipedia.org/wiki/Apache_Hadoop\" rel=\"external nofollow noreferrer\">Apache Hadoop</a> ecosystem by allowing to manage data on <a href=\"https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.htmll\" rel=\"external nofollow noreferrer\">HDFS</a>via ClickHouse. This engine is similar<br />\nto the <a href=\"#file/\">File</a> and <a href=\"#url/\">URL</a> engines, but provides Hadoop-specific features.</p>\n<h3 id=\"usage_1\">Usage<a class=\"headerlink\" href=\"#usage_1");
            
            document.write("\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"n\">URI</span><span class=\"p\">,</span> <span class=\"n\">format</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The <code>URI</code> parameter is the whole file URI in HDFS.<br />\nThe <code>format</code> parameter specifies one of the available file formats. To perform<br />\n<code>SELECT</code> queries, the format must be supported for input, and to perform<br />\n<code>INSERT</code> queries -- for output. The available formats are listed in the<br />\n<a href=\"#formats\">Formats</a> section.<br />\nThe path part of <code>URI</code> may contain globs. In this case the table would be readonly.</p>\n<p><strong>Example:</strong></p>\n<p><strong>1.</strong> Set up the <code>hdfs_engine_table</code> table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">hdfs_engine_table</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/other_storage&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>2.</strong> Fill file:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">hdfs_engine_table</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;three&#39;</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>3.</strong> Query the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">hdfs_engine_table</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u252c\u2500value\u2500\u2510\n\u2502 one  \u2502     1 \u2502\n\u2502 two  \u2502     2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"implementation-details\">Implementation Details<a class=\"headerlink\" href=\"#implementation-details\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Reads and writes can be parallel</li>\n<li>Not supported:<ul>\n<li><code>ALTER</code> and <code>SELECT...SAMPLE</code> operations.</li>\n<li>Indexes.</li>\n<li>Replication.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Globs in path</strong></p>\n<p>Multiple path components can have globs. For being processed file should exists and matches to the whole path pattern. Listing of files determines during <code>SELECT</code> (not at <code>CREATE</code> moment).</p>\n<ul>\n<li><code>*</code> \u2014 Substitutes any number of any characters except <code>/</code> including empty string.</li>\n<li><code>?</code> \u2014 Substitutes any single character.</li>\n<li><code>{some_string,another_string,yet_another_one}</code> \u2014 Substitutes any of strings <code>'some_string', 'another_string', 'yet_another_one'</code>.</li>\n<li><code>{N..M}</code> \u2014 Substitutes any number in range from N to M including both borders.</li>\n</ul>\n<p>Constructions with <code>{}</code> are similar to the <a href=\"#../../query_language/table_functions/remote/\">remote table function</a>).</p>\n<p><strong>Example</strong></p>\n<ol>\n<li>Suppose we have several files in TSV format with the following URIs on HDFS:</li>\n</ol>\n<ul>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_1'</li>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_2'</li>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_3'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_1'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_2'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_3'</li>\n</ul>\n<ol start=\"2\">\n<li>There are several ways to make a table consisting of all six files:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">table_with_range</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/some_file_{1..3}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Another way:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">table_with_question_mark</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/some_file_?&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Table consists of all the files in both directories (all files should satisfy format and schema described in query):</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">table_with_asterisk</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/*&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>If the listing of files contains number ranges with leading zeros, use the construction with braces for each digit separately or use <code>?</code>.</p>\n</div>\n<p><strong>Example</strong></p>\n<p>Create table with files named <code>file000</code>, <code>file001</code>, ... , <code>file999</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">CREARE</span> <span class=\"k\">TABLE</span> <span class=\"n\">big_table</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">HDFS</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/big_dir/file{0..9}{0..9}{0..9}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../../table_engines/distributed/\"></a><a name=\"../../../../operations/table_engines/distributed/\"></a><a name=\"operations/table_engines/distributed/\"></a><a name=\"../../../../../operations/table_engines/distributed/\"></a><a name=\"../../../table_engines/distributed/\"></a><a name=\"../../../../../../table_engines/distributed/\"></a><a name=\"../operations/table_engines/distributed/\"></a><a name=\"../../table_engines/distributed/\"></a><a name=\"../../../../table_engines/distributed/\"></a><a name=\"../../../operations/table_engines/distributed/\"></a><a name=\"../table_engines/distributed/\"></a><a name=\"distributed/\"></a><a name=\"table_engines/distributed/\"></a><a name=\"../../operations/table_engines/distributed/\"></a></p>\n<h2 id=\"distributed\">Distributed<a class=\"headerlink\" href=\"#distributed\" title=\"Permanent link\">&para;</a></h2>\n<p><strong>The Distributed engine does not store data itself</strong>, but allows distributed query processing on multiple servers.<br />\nReading is automatically parallelized. During a read, the table indexes on remote servers are used, if there are any.<br />\nThe Distributed engine accepts parameters: the cluster name in the server's config file, the name of a remote database, the name of a remote table, and (optionally) a sharding key.<br />\nExample:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Distributed</span><span class=\"p\">(</span><span class=\"n\">logs</span><span class=\"p\">,</span> <span class=\"k\">default</span><span class=\"p\">,</span> <span class=\"n\">hits</span><span class=\"p\">[,</span> <span class=\"n\">sharding_key</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p>Data will be read from all servers in the 'logs' cluster, from the default.hits table located on every server in the cluster.<br />\nData is not only read, but is partially processed on the remote servers (to the extent that this is possible).<br />\nFor example, for a query with GROUP BY, data will be aggregated on remote servers, and the intermediate states of aggregate functions will be sent to the requestor server. Then data will be further aggregated.</p>\n<p>Instead of the database name, you can use a constant expression that returns a string. For example: currentDatabase().</p>\n<p>logs \u2013 The cluster name in the server's config file.</p>\n<p>Clusters are set like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;remote_servers&gt;</span>\n    <span class=\"nt\">&lt;logs&gt;</span>\n        <span class=\"nt\">&lt;shard&gt;</span>\n            <span class=\"c\">&lt;!-- Optional. Shard weight when writing data. Default: 1. --&gt;</span>\n            <span class=\"nt\">&lt;weight&gt;</span>1<span class=\"nt\">&lt;/weight&gt;</span>\n            <span class=\"c\">&lt;!-- Optional. Whether to write data to just one of the replicas. Defaul");
            
            document.write("t: false (write data to all replicas). --&gt;</span>\n            <span class=\"nt\">&lt;internal_replication&gt;</span>false<span class=\"nt\">&lt;/internal_replication&gt;</span>\n            <span class=\"nt\">&lt;replica&gt;</span>\n                <span class=\"nt\">&lt;host&gt;</span>example01-01-1<span class=\"nt\">&lt;/host&gt;</span>\n                <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n            <span class=\"nt\">&lt;/replica&gt;</span>\n            <span class=\"nt\">&lt;replica&gt;</span>\n                <span class=\"nt\">&lt;host&gt;</span>example01-01-2<span class=\"nt\">&lt;/host&gt;</span>\n                <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n            <span class=\"nt\">&lt;/replica&gt;</span>\n        <span class=\"nt\">&lt;/shard&gt;</span>\n        <span class=\"nt\">&lt;shard&gt;</span>\n            <span class=\"nt\">&lt;weight&gt;</span>2<span class=\"nt\">&lt;/weight&gt;</span>\n            <span class=\"nt\">&lt;internal_replication&gt;</span>false<span class=\"nt\">&lt;/internal_replication&gt;</span>\n            <span class=\"nt\">&lt;replica&gt;</span>\n                <span class=\"nt\">&lt;host&gt;</span>example01-02-1<span class=\"nt\">&lt;/host&gt;</span>\n                <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n            <span class=\"nt\">&lt;/replica&gt;</span>\n            <span class=\"nt\">&lt;replica&gt;</span>\n                <span class=\"nt\">&lt;host&gt;</span>example01-02-2<span class=\"nt\">&lt;/host&gt;</span>\n                <span class=\"nt\">&lt;secure&gt;</span>1<span class=\"nt\">&lt;/secure&gt;</span>\n                <span class=\"nt\">&lt;port&gt;</span>9440<span class=\"nt\">&lt;/port&gt;</span>\n            <span class=\"nt\">&lt;/replica&gt;</span>\n        <span class=\"nt\">&lt;/shard&gt;</span>\n    <span class=\"nt\">&lt;/logs&gt;</span>\n<span class=\"nt\">&lt;/remote_servers&gt;</span>\n</code></pre></div>\n\n\n<p>Here a cluster is defined with the name 'logs' that consists of two shards, each of which contains two replicas.<br />\nShards refer to the servers that contain different parts of the data (in order to read all the data, you must access all the shards).<br />\nReplicas are duplicating servers (in order to read all the data, you can access the data on any one of the replicas).</p>\n<p>Cluster names must not contain dots.</p>\n<dl>\n<dt>The parameters <code>host</code>, <code>port</code>, and optionally <code>user</code>, <code>password</code>, <code>secure</code>, <code>compression</code> are specified for each server:</dt>\n<dd>\n<ul>\n<li><code>host</code> \u2013 The address of the remote server. You can use either the domain or the IPv4 or IPv6 address. If you specify the domain, the server makes a DNS request when it starts, and the result is stored as long as the server is running. If the DNS request fails, the server doesn't start. If you change the DNS record, restart the server.</li>\n<li><code>port</code> \u2013 The TCP port for messenger activity ('tcp_port' in the config, usually set to 9000). Do not confuse it with http_port.</li>\n<li><code>user</code> \u2013 Name of the user for connecting to a remote server. Default value: default. This user must have access to connect to the specified server. Access is configured in the users.xml file. For more information, see the section \"Access rights\".</li>\n<li><code>password</code> \u2013 The password for connecting to a remote server (not masked). Default value: empty string.</li>\n<li><code>secure</code> - Use ssl for connection, usually you also should define <code>port</code> = 9440. Server should listen on <tcp_port_secure>9440</tcp_port_secure> and have correct certificates.</li>\n<li><code>compression</code> - Use data compression. Default value: true.</li>\n</ul>\n</dd>\n</dl>\n<p>When specifying replicas, one of the available replicas will be selected for each of the shards when reading. You can configure the algorithm for load balancing (the preference for which replica to access) \u2013 see the 'load_balancing' setting.<br />\nIf the connection with the server is not established, there will be an attempt to connect with a short timeout. If the connection failed, the next replica will be selected, and so on for all the replicas. If the connection attempt failed for all the replicas, the attempt will be repeated the same way, several times.<br />\nThis works in favor of resiliency, but does not provide complete fault tolerance: a remote server might accept the connection, but might not work, or work poorly.</p>\n<p>You can specify just one of the shards (in this case, query processing should be called remote, rather than distributed) or up to any number of shards. In each shard, you can specify from one to any number of replicas. You can specify a different number of replicas for each shard.</p>\n<p>You can specify as many clusters as you wish in the configuration.</p>\n<p>To view your clusters, use the 'system.clusters' table.</p>\n<p>The Distributed engine allows working with a cluster like a local server. However, the cluster is inextensible: you must write its configuration in the server config file (even better, for all the cluster's servers).</p>\n<p>There is no support for Distributed tables that look at other Distributed tables (except in cases when a Distributed table only has one shard). As an alternative, make the Distributed table look at the \"final\" tables.</p>\n<p>The Distributed engine requires writing clusters to the config file. Clusters from the config file are updated on the fly, without restarting the server. If you need to send a query to an unknown set of shards and replicas each time, you don't need to create a Distributed table \u2013 use the 'remote' table function instead. See the section \"Table functions\".</p>\n<p>There are two methods for writing data to a cluster:</p>\n<p>First, you can define which servers to write which data to, and perform the write directly on each shard. In other words, perform INSERT in the tables that the distributed table \"looks at\".<br />\nThis is the most flexible solution \u2013 you can use any sharding scheme, which could be non-trivial due to the requirements of the subject area.<br />\nThis is also the most optimal solution, since data can be written to different shards completely independently.</p>\n<p>Second, you can perform INSERT in a Distributed table. In this case, the table will distribute the inserted data across servers itself.<br />\nIn order to write to a Distributed table, it must have a sharding key set (the last parameter). In addition, if there is only one shard, the write operation works without specifying the sharding key, since it doesn't have any meaning in this case.</p>\n<p>Each shard can have a weight defined in the config file. By default, the weight is equal to one. Data is distributed across shards in the amount proportional to the shard weight. For example, if there are two shards and the first has a weight of 9 while the second has a weight of 10, the first will be sent 9 / 19 parts of the rows, and the second will be sent 10 / 19.</p>\n<p>Each shard can have the 'internal_replication' parameter defined in the config file.</p>\n<p>If this parameter is set to 'true', the write operation selects the first healthy replica and writes data to it. Use this alternative if the Distributed table \"looks at\" replicated tables. In other words, if the table where data will be written is going to replicate them itself.</p>\n<p>If it is set to 'false' (the default), data is written to all replicas. In essence, this means that the Distributed table replicates data itself. This is worse than using replicated tables, because the consistency of replicas is not checked, and over time they will contain slightly different data.</p>\n<p>To select the shard that a row of data is sent to, the sharding expression is analyzed, and its remainder is taken from dividing it by the total weight of the shards. The row is sent to the shard that corresponds to the half-interval of the remainders from 'prev_weight' to 'prev_weights + weight', where 'prev_weights' is the total weight of the shards with the smallest number, and 'weight' is the weight of this shard. For example, if there are two shards, and the first has a weight of 9 while the second has a weight of 10, the row will be sent to the first shard for the remainders from the range [0, 9), and to the second for the remainders from the range [9, 19).</p>\n<p>The sharding expression can be any expression from constants and table columns that returns an integer. For example, you can use the expression 'rand()' for random distribution of data, or 'UserID' for distribution by the remainder from dividing the user's ID (then the data of a single user will reside on a single shard, which simplifies running IN and JOIN by users). If one of the columns is not distributed evenly enough, you can wrap it in a hash function: intHash64(UserID).</p>\n<p>A simple remainder from division is a limited solution for sharding and isn't always appropriate. It works for medium and large volumes of data (dozens of servers), but not for very large volumes of data (hundreds of servers or more). In the latter case, use the sharding scheme required by the subject area, rather than using entries in Distributed tables.</p>\n<p>SELECT queries are sent to all the shards, and work regardless of how data is distributed across the shards (they can be distributed completely randomly). When you add a new shard, you don't have to transfer the old data to it. You can write new data with a heavier weight \u2013 the data will be distributed slightly unevenly, but queries will work correctly and efficiently.</p>\n<p>You should be concerned about the sharding scheme in the following cases:</p>\n<ul>\n<li>Queries are used that require joining data (IN or JOIN) by a specific key. If data is sharded by this key, you can use local IN or JOIN instead of GLOBAL IN or GLOBAL JOIN, which is much more efficient.</li>\n<li>A large number of servers is used (hundreds or more) with a large number of small queries (queries of individual clients - websites, advertisers, or partners). In order for the small queries to not affect the entire cluster, it makes sense to locate data for a single client ");
            
            document.write("on a single shard. Alternatively, as we've done in Yandex.Metrica, you can set up bi-level sharding: divide the entire cluster into \"layers\", where a layer may consist of multiple shards. Data for a single client is located on a single layer, but shards can be added to a layer as necessary, and data is randomly distributed within them. Distributed tables are created for each layer, and a single shared distributed table is created for global queries.</li>\n</ul>\n<p>Data is written asynchronously. For an INSERT to a Distributed table, the data block is just written to the local file system. The data is sent to the remote servers in the background as soon as possible. You should check whether data is sent successfully by checking the list of files (data waiting to be sent) in the table directory: /var/lib/clickhouse/data/database/table/.</p>\n<p>If the server ceased to exist or had a rough restart (for example, after a device failure) after an INSERT to a Distributed table, the inserted data might be lost. If a damaged data part is detected in the table directory, it is transferred to the 'broken' subdirectory and no longer used.</p>\n<p>When the max_parallel_replicas option is enabled, query processing is parallelized across all replicas within a single shard. For more information, see the section \"Settings, max_parallel_replicas\".</p>\n<p><a name=\"../table_engines/external_data/\"></a><a name=\"../../../table_engines/external_data/\"></a><a name=\"../../../../operations/table_engines/external_data/\"></a><a name=\"../../table_engines/external_data/\"></a><a name=\"../../../../table_engines/external_data/\"></a><a name=\"table_engines/external_data/\"></a><a name=\"../../../../../table_engines/external_data/\"></a><a name=\"../operations/table_engines/external_data/\"></a><a name=\"../../../../../operations/table_engines/external_data/\"></a><a name=\"../../operations/table_engines/external_data/\"></a><a name=\"../../../../../../table_engines/external_data/\"></a><a name=\"operations/table_engines/external_data/\"></a><a name=\"external_data/\"></a><a name=\"../../../operations/table_engines/external_data/\"></a></p>\n<h2 id=\"external-data-for-query-processing\">External Data for Query Processing<a class=\"headerlink\" href=\"#external-data-for-query-processing\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse allows sending a server the data that is needed for processing a query, together with a SELECT query. This data is put in a temporary table (see the section \"Temporary tables\") and can be used in the query (for example, in IN operators).</p>\n<p>For example, if you have a text file with important user identifiers, you can upload it to the server along with a query that uses filtration by this list.</p>\n<p>If you need to run more than one query with a large volume of external data, don't use this feature. It is better to upload the data to the DB ahead of time.</p>\n<p>External data can be uploaded using the command-line client (in non-interactive mode), or using the HTTP interface.</p>\n<p>In the command-line client, you can specify a parameters section in the format</p>\n<div class=\"codehilite\"><pre><span></span><code>--external --file<span class=\"o\">=</span>... <span class=\"o\">[</span>--name<span class=\"o\">=</span>...<span class=\"o\">]</span> <span class=\"o\">[</span>--format<span class=\"o\">=</span>...<span class=\"o\">]</span> <span class=\"o\">[</span>--types<span class=\"o\">=</span>...<span class=\"p\">|</span>--structure<span class=\"o\">=</span>...<span class=\"o\">]</span>\n</code></pre></div>\n\n\n<p>You may have multiple sections like this, for the number of tables being transmitted.</p>\n<p><strong>--external</strong> \u2013 Marks the beginning of a clause.<br />\n<strong>--file</strong> \u2013 Path to the file with the table dump, or -, which refers to stdin.<br />\nOnly a single table can be retrieved from stdin.</p>\n<p>The following parameters are optional: <strong>--name</strong>\u2013 Name of the table. If omitted, _data is used.<br />\n<strong>--format</strong> \u2013 Data format in the file. If omitted, TabSeparated is used.</p>\n<p>One of the following parameters is required:<strong>--types</strong> \u2013 A list of comma-separated column types. For example: <code>UInt64,String</code>. The columns will be named _1, _2, ...<br />\n<strong>--structure</strong>\u2013 The table structure in the format<code>UserID UInt64</code>, <code>URL String</code>. Defines the column names and types.</p>\n<p>The files specified in 'file' will be parsed by the format specified in 'format', using the data types specified in 'types' or 'structure'. The table will be uploaded to the server and accessible there as a temporary table with the name in 'name'.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> -ne <span class=\"s2\">&quot;1\\n2\\n3\\n&quot;</span> <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;SELECT count() FROM test.visits WHERE TraficSourceID IN _data&quot;</span> --external --file<span class=\"o\">=</span>- --types<span class=\"o\">=</span>Int8\n<span class=\"m\">849897</span>\n$ cat /etc/passwd <span class=\"p\">|</span> sed <span class=\"s1\">&#39;s/:/\\t/g&#39;</span> <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;SELECT shell, count() AS c FROM passwd GROUP BY shell ORDER BY c DESC&quot;</span> --external --file<span class=\"o\">=</span>- --name<span class=\"o\">=</span>passwd --structure<span class=\"o\">=</span><span class=\"s1\">&#39;login String, unused String, uid UInt16, gid UInt16, comment String, home String, shell String&#39;</span>\n/bin/sh <span class=\"m\">20</span>\n/bin/false      <span class=\"m\">5</span>\n/bin/bash       <span class=\"m\">4</span>\n/usr/sbin/nologin       <span class=\"m\">1</span>\n/bin/sync       <span class=\"m\">1</span>\n</code></pre></div>\n\n\n<p>When using the HTTP interface, external data is passed in the multipart/form-data format. Each table is transmitted as a separate file. The table name is taken from the file name. The 'query_string' is passed the parameters 'name_format', 'name_types', and 'name_structure', where 'name' is the name of the table that these parameters correspond to. The meaning of the parameters is the same as when using the command-line client.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat /etc/passwd <span class=\"p\">|</span> sed <span class=\"s1\">&#39;s/:/\\t/g&#39;</span> &gt; passwd.tsv\n\n$ curl -F <span class=\"s1\">&#39;passwd=@passwd.tsv;&#39;</span> <span class=\"s1\">&#39;http://localhost:8123/?query=SELECT+shell,+count()+AS+c+FROM+passwd+GROUP+BY+shell+ORDER+BY+c+DESC&amp;passwd_structure=login+String,+unused+String,+uid+UInt16,+gid+UInt16,+comment+String,+home+String,+shell+String&#39;</span>\n/bin/sh <span class=\"m\">20</span>\n/bin/false      <span class=\"m\">5</span>\n/bin/bash       <span class=\"m\">4</span>\n/usr/sbin/nologin       <span class=\"m\">1</span>\n/bin/sync       <span class=\"m\">1</span>\n</code></pre></div>\n\n\n<p>For distributed query processing, the temporary tables are sent to all the remote servers.</p>\n<p><a name=\"../../../../../table_engines/dictionary/\"></a><a name=\"../operations/table_engines/dictionary/\"></a><a name=\"../table_engines/dictionary/\"></a><a name=\"../../../../../../table_engines/dictionary/\"></a><a name=\"../../../../table_engines/dictionary/\"></a><a name=\"../../../table_engines/dictionary/\"></a><a name=\"../../../../../operations/table_engines/dictionary/\"></a><a name=\"../../../../operations/table_engines/dictionary/\"></a><a name=\"dictionary/\"></a><a name=\"../../../operations/table_engines/dictionary/\"></a><a name=\"../../table_engines/dictionary/\"></a><a name=\"table_engines/dictionary/\"></a><a name=\"../../operations/table_engines/dictionary/\"></a><a name=\"operations/table_engines/dictionary/\"></a></p>\n<h2 id=\"dictionary\">Dictionary<a class=\"headerlink\" href=\"#dictionary\" title=\"Permanent link\">&para;</a></h2>\n<p>The <code>Dictionary</code> engine displays the <a href=\"#../../query_language/dicts/external_dicts/\">dictionary</a> data as a ClickHouse table.</p>\n<p>As an example, consider a dictionary of <code>products</code> with the following configuration:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionaries&gt;</span>\n<span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>products<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;source&gt;</span>\n            <span class=\"nt\">&lt;odbc&gt;</span>\n                <span class=\"nt\">&lt;table&gt;</span>products<span class=\"nt\">&lt;/table&gt;</span>\n                <span class=\"nt\">&lt;connection_string&gt;</span>DSN=some-db-server<span class=\"nt\">&lt;/connection_string&gt;</span>\n            <span class=\"nt\">&lt;/odbc&gt;</span>\n        <span class=\"nt\">&lt;/source&gt;</span>\n        <span class=\"nt\">&lt;lifetime&gt;</span>\n            <span class=\"nt\">&lt;min&gt;</span>300<span class=\"nt\">&lt;/min&gt;</span>\n            <span class=\"nt\">&lt;max&gt;</span>360<span class=\"nt\">&lt;/max&gt;</span>\n        <span class=\"nt\">&lt;/lifetime&gt;</span>\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;flat/&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n        <span class=\"nt\">&lt;structure&gt;</span>\n            <span class=\"nt\">&lt;id&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>product_id<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;/id&gt;</span>\n            <span class=\"nt\">&lt;attribute&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>title<span class=\"nt\">&lt;/name&gt;</span>\n                <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n                <span class=\"nt\">&lt;null_value&gt;&lt;/null_value&gt;</span>\n            <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;/structure&gt;</span>\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/dictionaries&gt;</span>\n</code></pre></div>\n\n\n<p>Query the dictionary data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">name</span><span class=\"p\">,</span>\n    <span class=\"k\">type</span><span class=");
            
            document.write("\"p\">,</span>\n    <span class=\"k\">key</span><span class=\"p\">,</span>\n    <span class=\"n\">attribute</span><span class=\"p\">.</span><span class=\"k\">names</span><span class=\"p\">,</span>\n    <span class=\"n\">attribute</span><span class=\"p\">.</span><span class=\"n\">types</span><span class=\"p\">,</span>\n    <span class=\"n\">bytes_allocated</span><span class=\"p\">,</span>\n    <span class=\"n\">element_count</span><span class=\"p\">,</span>\n    <span class=\"k\">source</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">dictionaries</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;products&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u252c\u2500type\u2500\u252c\u2500key\u2500\u2500\u2500\u2500\u252c\u2500attribute.names\u2500\u252c\u2500attribute.types\u2500\u252c\u2500bytes_allocated\u2500\u252c\u2500element_count\u2500\u252c\u2500source\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 products \u2502 Flat \u2502 UInt64 \u2502 [&#39;title&#39;]       \u2502 [&#39;String&#39;]      \u2502        23065376 \u2502        175032 \u2502 ODBC: .products \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>You can use the <a href=\"#ext_dict_functions\">dictGet*</a> function to get the dictionary data in this format.</p>\n<p>This view isn't helpful when you need to get raw data, or when performing a <code>JOIN</code> operation. For these cases, you can use the <code>Dictionary</code> engine, which displays the dictionary data in a table.</p>\n<p>Syntax:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"o\">%</span><span class=\"k\">table_name</span><span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">fields</span><span class=\"o\">%</span><span class=\"p\">)</span> <span class=\"n\">engine</span> <span class=\"o\">=</span> <span class=\"k\">Dictionary</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">dictionary_name</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"o\">`</span>\n</code></pre></div>\n\n\n<p>Usage example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">create</span> <span class=\"k\">table</span> <span class=\"n\">products</span> <span class=\"p\">(</span><span class=\"n\">product_id</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span> <span class=\"n\">title</span> <span class=\"n\">String</span><span class=\"p\">)</span> <span class=\"n\">Engine</span> <span class=\"o\">=</span> <span class=\"k\">Dictionary</span><span class=\"p\">(</span><span class=\"n\">products</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">Ok</span>\n</code></pre></div>\n\n\n<p>Take a look at what's in the table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">select</span> <span class=\"o\">*</span> <span class=\"k\">from</span> <span class=\"n\">products</span> <span class=\"k\">limit</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500product_id\u2500\u252c\u2500title\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        152689 \u2502 Some item       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../operations/table_engines/merge/\"></a><a name=\"../operations/table_engines/merge/\"></a><a name=\"../../table_engines/merge/\"></a><a name=\"../../../../../../table_engines/merge/\"></a><a name=\"operations/table_engines/merge/\"></a><a name=\"../../../../table_engines/merge/\"></a><a name=\"../../operations/table_engines/merge/\"></a><a name=\"merge/\"></a><a name=\"../../../../../operations/table_engines/merge/\"></a><a name=\"../../../../../table_engines/merge/\"></a><a name=\"../../../../operations/table_engines/merge/\"></a><a name=\"../../../table_engines/merge/\"></a><a name=\"../table_engines/merge/\"></a><a name=\"table_engines/merge/\"></a></p>\n<h2 id=\"merge\">Merge<a class=\"headerlink\" href=\"#merge\" title=\"Permanent link\">&para;</a></h2>\n<p>The <code>Merge</code> engine (not to be confused with <code>MergeTree</code>) does not store data itself, but allows reading from any number of other tables simultaneously.<br />\nReading is automatically parallelized. Writing to a table is not supported. When reading, the indexes of tables that are actually being read are used, if they exist.<br />\nThe <code>Merge</code> engine accepts parameters: the database name and a regular expression for tables.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Merge</span><span class=\"p\">(</span><span class=\"n\">hits</span><span class=\"p\">,</span> <span class=\"s1\">&#39;^WatchLog&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Data will be read from the tables in the <code>hits</code> database that have names that match the regular expression '<code>^WatchLog</code>'.</p>\n<p>Instead of the database name, you can use a constant expression that returns a string. For example, <code>currentDatabase()</code>.</p>\n<p>Regular expressions \u2014 <a href=\"https://github.com/google/re2\" rel=\"external nofollow noreferrer\">re2</a> (supports a subset of PCRE), case-sensitive.<br />\nSee the notes about escaping symbols in regular expressions in the \"match\" section.</p>\n<p>When selecting tables to read, the <code>Merge</code> table itself will not be selected, even if it matches the regex. This is to avoid loops.<br />\nIt is possible to create two <code>Merge</code> tables that will endlessly try to read each others' data, but this is not a good idea.</p>\n<p>The typical way to use the <code>Merge</code> engine is for working with a large number of <code>TinyLog</code> tables as if with a single table.</p>\n<p>Example 2:</p>\n<p>Let's say you have a old table (WatchLog_old) and decided to change partitioning without moving data to a new table (WatchLog_new) and you need to see data from both tables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">WatchLog_old</span><span class=\"p\">(</span><span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">UserId</span> <span class=\"n\">Int64</span><span class=\"p\">,</span> <span class=\"n\">EventType</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">Cnt</span> <span class=\"n\">UInt64</span><span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">MergeTree</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">UserId</span><span class=\"p\">,</span> <span class=\"n\">EventType</span><span class=\"p\">),</span> <span class=\"mi\">8192</span><span class=\"p\">);</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">WatchLog_old</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01&#39;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;hit&#39;</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">WatchLog_new</span><span class=\"p\">(</span><span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">UserId</span> <span class=\"n\">Int64</span><span class=\"p\">,</span> <span class=\"n\">EventType</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">Cnt</span> <span class=\"n\">UInt64</span><span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">MergeTree</span> <span class=\"n\">PARTITION</span> <span class=\"k\">BY</span> <span class=\"nb\">date</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"p\">(</span><span class=\"n\">UserId</span><span class=\"p\">,</span> <span class=\"n\">EventType</span><span class=\"p\">)</span> <span class=\"n\">SETTINGS</span> <span class=\"n\">index_granularity</span><span class=\"o\">=</span><span class=\"mi\">8192</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">WatchLog_new</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-02&#39;</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;hit&#39;</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">);</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">WatchLog</span> <span class=\"k\">as</span> <span class=\"n\">WatchLog_old</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">Merge</span><span class=\"p\">(</span><span class=\"n\">currentDatabase</span><span class=\"p\">(),</span> <span class=\"s1\">&#39;^WatchLog&#39;</span><span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">WatchLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500date\u2500\u252c\u2500UserId\u2500\u252c\u2500EventType\u2500\u252c\u2500Cnt\u2500\u2510\n\u2502 2018-01-01 \u2502      1 \u2502 hit       \u2502   3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500date\u2500\u252c\u2500UserId\u2500\u252c\u2500EventType\u2500\u252c\u2500Cnt\u2500\u2510\n\u2502 2018-01-02 \u2502      2 \u2502 hit       \u2502   3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"virtual-columns_1\">Virtual Columns<a class=\"headerlink\" href=\"#virtual-columns_1\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>\n<p><code>_table</code> \u2014 Contains the name of the table from which data was read. Type: <a href=\"#../../data_types/string/\">String</a>.</p>\n<p>You can set the constant conditions on <code>_table</code> in the <code>WHERE/PREWHERE</code> clause (for example, <code>WHERE _table='xyz'</code>). In this case the read operation is performed only for that tables where the condition on <code>_table</code> is satisfied, so the <code>_table</code> column acts as an index.</p>\n</li>\n</ul>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#table_engines-virtual_columns\">Virtual columns</a></li>\n</ul>\n<p><a name=\"../operations/table_engines/file/\"></a><a name=\"table_engines/file/\"></a><a name=\"operations/table_engines/file/\"></a><a name=\"../../../../../operations/table_engines/file/\"></");
            
            document.write("a><a name=\"file/\"></a><a name=\"../../../../../table_engines/file/\"></a><a name=\"../table_engines/file/\"></a><a name=\"../../../../table_engines/file/\"></a><a name=\"../../../../operations/table_engines/file/\"></a><a name=\"../../table_engines/file/\"></a><a name=\"../../../operations/table_engines/file/\"></a><a name=\"../../operations/table_engines/file/\"></a><a name=\"../../../table_engines/file/\"></a><a name=\"../../../../../../table_engines/file/\"></a></p>\n<h2 id=\"table_engines-file\">File<a class=\"headerlink\" href=\"#table_engines-file\" title=\"Permanent link\">&para;</a></h2>\n<p>The File table engine keeps the data in a file in one of the supported <a href=\"#formats\">file<br />\nformats</a> (TabSeparated, Native, etc.).</p>\n<p>Usage examples:</p>\n<ul>\n<li>Data export from ClickHouse to file.</li>\n<li>Convert data from one format to another.</li>\n<li>Updating data in ClickHouse via editing a file on a disk.</li>\n</ul>\n<h3 id=\"usage-in-clickhouse-server\">Usage in ClickHouse Server<a class=\"headerlink\" href=\"#usage-in-clickhouse-server\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">File</span><span class=\"p\">(</span><span class=\"n\">Format</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The <code>Format</code> parameter specifies one of the available file formats. To perform<br />\n<code>SELECT</code> queries, the format must be supported for input, and to perform<br />\n<code>INSERT</code> queries -- for output. The available formats are listed in the<br />\n<a href=\"#formats\">Formats</a> section.</p>\n<p>ClickHouse does not allow to specify filesystem path for<code>File</code>. It will use folder defined by <a href=\"#../server_settings/settings/\">path</a> setting in server configuration.</p>\n<p>When creating table using <code>File(Format)</code> it creates empty subdirectory in that folder. When data is written to that table, it's put into <code>data.Format</code> file in that subdirectory.</p>\n<p>You may manually create this subfolder and file in server filesystem and then <a href=\"#../../query_language/misc/\">ATTACH</a> it to table information with matching name, so you can query data from that file.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Be careful with this functionality, because ClickHouse does not keep track of external changes to such files. The result of simultaneous writes via ClickHouse and outside of ClickHouse is undefined.</p>\n</div>\n<p><strong>Example:</strong></p>\n<p><strong>1.</strong> Set up the <code>file_engine_table</code> table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">file_engine_table</span> <span class=\"p\">(</span><span class=\"n\">name</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">File</span><span class=\"p\">(</span><span class=\"n\">TabSeparated</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>By default ClickHouse will create folder <code>/var/lib/clickhouse/data/default/file_engine_table</code>.</p>\n<p><strong>2.</strong> Manually create <code>/var/lib/clickhouse/data/default/file_engine_table/data.TabSeparated</code> containing:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat data.TabSeparated\none <span class=\"m\">1</span>\ntwo <span class=\"m\">2</span>\n</code></pre></div>\n\n\n<p><strong>3.</strong> Query the data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">file_engine_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u252c\u2500value\u2500\u2510\n\u2502 one  \u2502     1 \u2502\n\u2502 two  \u2502     2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"usage-in-clickhouse-local\">Usage in Clickhouse-local<a class=\"headerlink\" href=\"#usage-in-clickhouse-local\" title=\"Permanent link\">&para;</a></h3>\n<p>In <a href=\"#../utils/clickhouse-local/\">clickhouse-local</a> File engine accepts file path in addition to <code>Format</code>. Default input/output streams can be specified using numeric or human-readable names like <code>0</code> or <code>stdin</code>, <code>1</code> or <code>stdout</code>.<br />\n<strong>Example:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> -e <span class=\"s2\">&quot;1,2\\n3,4&quot;</span> <span class=\"p\">|</span> clickhouse-local -q <span class=\"s2\">&quot;CREATE TABLE table (a Int64, b Int64) ENGINE = File(CSV, stdin); SELECT a, b FROM table; DROP TABLE table&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"details-of-implementation\">Details of Implementation<a class=\"headerlink\" href=\"#details-of-implementation\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Multiple <code>SELECT</code> queries can be performed concurrently, but <code>INSERT</code> queries will wait each other.</li>\n<li>Supported creating new file by <code>INSERT</code> query.</li>\n<li>If file exists, <code>INSERT</code> would append new values in it.</li>\n<li>Not supported:<ul>\n<li><code>ALTER</code></li>\n<li><code>SELECT ... SAMPLE</code></li>\n<li>Indices</li>\n<li>Replication</li>\n</ul>\n</li>\n</ul>\n<p><a name=\"../../../../operations/table_engines/null/\"></a><a name=\"../../../../../../table_engines/null/\"></a><a name=\"../../../../table_engines/null/\"></a><a name=\"operations/table_engines/null/\"></a><a name=\"../../table_engines/null/\"></a><a name=\"../table_engines/null/\"></a><a name=\"../../../table_engines/null/\"></a><a name=\"table_engines/null/\"></a><a name=\"../operations/table_engines/null/\"></a><a name=\"null/\"></a><a name=\"../../../../../table_engines/null/\"></a><a name=\"../../operations/table_engines/null/\"></a><a name=\"../../../../../operations/table_engines/null/\"></a><a name=\"../../../operations/table_engines/null/\"></a></p>\n<h2 id=\"null_1\">Null<a class=\"headerlink\" href=\"#null_1\" title=\"Permanent link\">&para;</a></h2>\n<p>When writing to a Null table, data is ignored. When reading from a Null table, the response is empty.</p>\n<p>However, you can create a materialized view on a Null table. So the data written to the table will end up in the view.</p>\n<p><a name=\"../../../../../table_engines/set/\"></a><a name=\"../../operations/table_engines/set/\"></a><a name=\"../../../../operations/table_engines/set/\"></a><a name=\"set/\"></a><a name=\"../../table_engines/set/\"></a><a name=\"../../../table_engines/set/\"></a><a name=\"../../../../../../table_engines/set/\"></a><a name=\"../../../../table_engines/set/\"></a><a name=\"../../../operations/table_engines/set/\"></a><a name=\"../operations/table_engines/set/\"></a><a name=\"operations/table_engines/set/\"></a><a name=\"../table_engines/set/\"></a><a name=\"../../../../../operations/table_engines/set/\"></a><a name=\"table_engines/set/\"></a></p>\n<h2 id=\"set_1\">Set<a class=\"headerlink\" href=\"#set_1\" title=\"Permanent link\">&para;</a></h2>\n<p>A data set that is always in RAM. It is intended for use on the right side of the IN operator (see the section \"IN operators\").</p>\n<p>You can use INSERT to insert data in the table. New elements will be added to the data set, while duplicates will be ignored.<br />\nBut you can't perform SELECT from the table. The only way to retrieve data is by using it in the right half of the IN operator.</p>\n<p>Data is always located in RAM. For INSERT, the blocks of inserted data are also written to the directory of tables on the disk. When starting the server, this data is loaded to RAM. In other words, after restarting, the data remains in place.</p>\n<p>For a rough server restart, the block of data on the disk might be lost or damaged. In the latter case, you may need to manually delete the file with damaged data.</p>\n<p><a name=\"operations/table_engines/join/\"></a><a name=\"../../../operations/table_engines/join/\"></a><a name=\"../../../../../table_engines/join/\"></a><a name=\"../../../table_engines/join/\"></a><a name=\"../../../../../operations/table_engines/join/\"></a><a name=\"../../../../table_engines/join/\"></a><a name=\"table_engines/join/\"></a><a name=\"../operations/table_engines/join/\"></a><a name=\"../table_engines/join/\"></a><a name=\"../../table_engines/join/\"></a><a name=\"../../../../../../table_engines/join/\"></a><a name=\"../../../../operations/table_engines/join/\"></a><a name=\"../../operations/table_engines/join/\"></a><a name=\"join/\"></a></p>\n<h2 id=\"join\">Join<a class=\"headerlink\" href=\"#join\" title=\"Permanent link\">&para;</a></h2>\n<p>Prepared data structure for using in <a href=\"#select-join\">JOIN</a> operations.</p>\n<h3 id=\"creating-a-table_9\">Creating a Table<a class=\"headerlink\" href=\"#creating-a-table_9\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"");
            
            document.write("k\">Join</span><span class=\"p\">(</span><span class=\"n\">join_strictness</span><span class=\"p\">,</span> <span class=\"n\">join_type</span><span class=\"p\">,</span> <span class=\"n\">k1</span><span class=\"p\">[,</span> <span class=\"n\">k2</span><span class=\"p\">,</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p>See the detailed description of the <a href=\"#create-table-query\">CREATE TABLE</a> query.</p>\n<p><strong>Engine Parameters</strong></p>\n<ul>\n<li><code>join_strictness</code> \u2013 <a href=\"#select-join-strictness\">JOIN strictness</a>.</li>\n<li><code>join_type</code> \u2013 <a href=\"#select-join-types\">JOIN type</a>.</li>\n<li><code>k1[, k2, ...]</code> \u2013 Key columns from the <code>USING</code> clause that the <code>JOIN</code> operation is made with.</li>\n</ul>\n<p>Enter <code>join_strictness</code> and <code>join_type</code> parameters without quotes, for example, <code>Join(ANY, LEFT, col1)</code>. They must match the <code>JOIN</code> operation that the table will be used for. If the parameters don't match, ClickHouse doesn't throw an exception and may return incorrect data.</p>\n<h3 id=\"table-usage\">Table Usage<a class=\"headerlink\" href=\"#table-usage\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"example_2\">Example<a class=\"headerlink\" href=\"#example_2\" title=\"Permanent link\">&para;</a></h4>\n<p>Creating the left-side table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">id_val</span><span class=\"p\">(</span><span class=\"o\">`</span><span class=\"n\">id</span><span class=\"o\">`</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">val</span><span class=\"o\">`</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">id_val</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">)(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">)(</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Creating the right-side <code>Join</code> table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">id_val_join</span><span class=\"p\">(</span><span class=\"o\">`</span><span class=\"n\">id</span><span class=\"o\">`</span> <span class=\"n\">UInt32</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">val</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"k\">Join</span><span class=\"p\">(</span><span class=\"k\">ANY</span><span class=\"p\">,</span> <span class=\"k\">LEFT</span><span class=\"p\">,</span> <span class=\"n\">id</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">id_val_join</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">21</span><span class=\"p\">)(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">22</span><span class=\"p\">)(</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">23</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Joining the tables:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">id_val</span> <span class=\"k\">ANY</span> <span class=\"k\">LEFT</span> <span class=\"k\">JOIN</span> <span class=\"n\">id_val_join</span> <span class=\"k\">USING</span> <span class=\"p\">(</span><span class=\"n\">id</span><span class=\"p\">)</span> <span class=\"n\">SETTINGS</span> <span class=\"n\">join_use_nulls</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500id\u2500\u252c\u2500val\u2500\u252c\u2500id_val_join.val\u2500\u2510\n\u2502  1 \u2502  11 \u2502              21 \u2502\n\u2502  2 \u2502  12 \u2502            \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502  3 \u2502  13 \u2502              23 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>As an alternative, you can retrieve data from the <code>Join</code> table, specifying the join key value:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">joinGet</span><span class=\"p\">(</span><span class=\"s1\">&#39;id_val_join&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;val&#39;</span><span class=\"p\">,</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500joinGet(&#39;id_val_join&#39;, &#39;val&#39;, toUInt32(1))\u2500\u2510\n\u2502                                         21 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"selecting-and-inserting-data\">Selecting and Inserting Data<a class=\"headerlink\" href=\"#selecting-and-inserting-data\" title=\"Permanent link\">&para;</a></h4>\n<p>You can use <code>INSERT</code> queries to add data to the <code>Join</code>-engine tables. If the table was created with the <code>ANY</code> strictness, data for duplicate keys are ignored. With the <code>ALL</code> strictness, all rows are added.</p>\n<p>You cannot perform a <code>SELECT</code> query directly from the table. Instead, use one of the following methods:</p>\n<ul>\n<li>Place the table to the right side in a <code>JOIN</code> clause.</li>\n<li>Call the <a href=\"#other_functions-joinget\">joinGet</a> function, which lets you extract data from the table the same way as from a dictionary.</li>\n</ul>\n<h4 id=\"limitations-and-settings\">Limitations and Settings<a class=\"headerlink\" href=\"#limitations-and-settings\" title=\"Permanent link\">&para;</a></h4>\n<p>When creating a table, the following settings are applied:</p>\n<ul>\n<li><a href=\"#settings-join_use_nulls\">join_use_nulls</a></li>\n<li><a href=\"#settings-max_rows_in_join\">max_rows_in_join</a></li>\n<li><a href=\"#settings-max_bytes_in_join\">max_bytes_in_join</a></li>\n<li><a href=\"#settings-join_overflow_mode\">join_overflow_mode</a></li>\n<li><a href=\"#settings-join_any_take_last_row\">join_any_take_last_row</a></li>\n</ul>\n<p>The <code>Join</code>-engine tables can't be used in <code>GLOBAL JOIN</code> operations.</p>\n<h3 id=\"data-storage_1\">Data Storage<a class=\"headerlink\" href=\"#data-storage_1\" title=\"Permanent link\">&para;</a></h3>\n<p><code>Join</code> table data is always located in the RAM. When inserting rows into a table, ClickHouse writes data blocks to the directory on the disk so that they can be restored when the server restarts.</p>\n<p>If the server restarts incorrectly, the data block on the disk might get lost or damaged. In this case, you may need to manually delete the file with damaged data.</p>\n<p><a name=\"operations/table_engines/url/\"></a><a name=\"../table_engines/url/\"></a><a name=\"../../../table_engines/url/\"></a><a name=\"../../../../../../table_engines/url/\"></a><a name=\"../operations/table_engines/url/\"></a><a name=\"../../../operations/table_engines/url/\"></a><a name=\"../../../../table_engines/url/\"></a><a name=\"../../table_engines/url/\"></a><a name=\"../../../../../table_engines/url/\"></a><a name=\"table_engines/url/\"></a><a name=\"../../../../operations/table_engines/url/\"></a><a name=\"url/\"></a><a name=\"../../../../../operations/table_engines/url/\"></a><a name=\"../../operations/table_engines/url/\"></a></p>\n<h2 id=\"table_engines-url\">URL(URL, Format)<a class=\"headerlink\" href=\"#table_engines-url\" title=\"Permanent link\">&para;</a></h2>\n<p>Manages data on a remote HTTP/HTTPS server. This engine is similar<br />\nto the <a href=\"#file/\">File</a> engine.</p>\n<h3 id=\"using-the-engine-in-the-clickhouse-server\">Using the engine in the ClickHouse server<a class=\"headerlink\" href=\"#using-the-engine-in-the-clickhouse-server\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>format</code> must be one that ClickHouse can use in<br />\n<code>SELECT</code> queries and, if necessary, in <code>INSERTs</code>. For the full list of supported formats, see<br />\n<a href=\"#formats\">Formats</a>.</p>\n<p>The <code>URL</code> must conform to the structure of a Uniform Resource Locator. The specified URL must point to a server<br />\nthat uses HTTP or HTTPS. This does not require any<br />\nadditional headers for getting a response from the server.</p>\n<p><code>INSERT</code> and <code>SELECT</code> queries are transformed to <code>POST</code> and <code>GET</code> requests,<br />\nrespectively. For processing <code>POST</code> requests, the remote server must support<br />\n<a href=\"https://en.wikipedia.org/wiki/Chunked_transfer_encoding\" rel=\"external nofollow noreferrer\">Chunked transfer encoding</a>.</p>\n<p><strong>Example:</strong></p>\n<p><strong>1.</strong> Create a <code>url_engine_table</code> table on the server :</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">url_engine_table</span> <span class=\"p\">(</span><span class=\"n\">word</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"n\">UInt64</span><span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">URL</span><span class=\"p\">(</span><span class=\"s1\">&#39;http://127.0.0.1:12345/&#39;</span><span class=\"p\">,</span> <span class=\"n\">CSV</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>2.</strong> Create a basic HTTP server using the standard Python 3 tools and<br />\nstart it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">from</span> <span class=\"nn\">http.server</span> <span class=\"kn\">import</span> <span class=\"n\">BaseHTTPRequestHandler</span><span class=\"p\">,</span> <span class=\"n\">HTTPServer</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">CSVHTTPServer</span><span class=\"p\">(</span><span class=\"n\">BaseH");
            
            document.write("TTPRequestHandler</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">do_GET</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">send_response</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">send_header</span><span class=\"p\">(</span><span class=\"s1\">&#39;Content-type&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;text/csv&#39;</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">end_headers</span><span class=\"p\">()</span>\n\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wfile</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"nb\">bytes</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello,1</span><span class=\"se\">\\n</span><span class=\"s1\">World,2</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;utf-8&quot;</span><span class=\"p\">))</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;__main__&quot;</span><span class=\"p\">:</span>\n    <span class=\"n\">server_address</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s1\">&#39;127.0.0.1&#39;</span><span class=\"p\">,</span> <span class=\"mi\">12345</span><span class=\"p\">)</span>\n    <span class=\"n\">HTTPServer</span><span class=\"p\">(</span><span class=\"n\">server_address</span><span class=\"p\">,</span> <span class=\"n\">CSVHTTPServer</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">serve_forever</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>$ python3 server.py\n</code></pre></div>\n\n\n<p><strong>3.</strong> Request data:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">url_engine_table</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500word\u2500\u2500\u252c\u2500value\u2500\u2510\n\u2502 Hello \u2502     1 \u2502\n\u2502 World \u2502     2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"details-of-implementation_1\">Details of Implementation<a class=\"headerlink\" href=\"#details-of-implementation_1\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Reads and writes can be parallel</li>\n<li>Not supported:<ul>\n<li><code>ALTER</code> and <code>SELECT...SAMPLE</code> operations.</li>\n<li>Indexes.</li>\n<li>Replication.</li>\n</ul>\n</li>\n</ul>\n<p><a name=\"../../operations/table_engines/view/\"></a><a name=\"../../../../../../table_engines/view/\"></a><a name=\"../table_engines/view/\"></a><a name=\"../../../operations/table_engines/view/\"></a><a name=\"../../../../operations/table_engines/view/\"></a><a name=\"../../table_engines/view/\"></a><a name=\"../../../table_engines/view/\"></a><a name=\"../../../../../operations/table_engines/view/\"></a><a name=\"../operations/table_engines/view/\"></a><a name=\"../../../../../table_engines/view/\"></a><a name=\"view/\"></a><a name=\"table_engines/view/\"></a><a name=\"operations/table_engines/view/\"></a><a name=\"../../../../table_engines/view/\"></a></p>\n<h2 id=\"table_engines-view\">View<a class=\"headerlink\" href=\"#table_engines-view\" title=\"Permanent link\">&para;</a></h2>\n<p>Used for implementing views (for more information, see the <code>CREATE VIEW query</code>). It does not store data, but only stores the specified <code>SELECT</code> query. When reading from a table, it runs this query (and deletes all unnecessary columns from the query).</p>\n<p><a name=\"../../../../../operations/table_engines/materializedview/\"></a><a name=\"table_engines/materializedview/\"></a><a name=\"../../../table_engines/materializedview/\"></a><a name=\"../../../operations/table_engines/materializedview/\"></a><a name=\"../../../../../table_engines/materializedview/\"></a><a name=\"materializedview/\"></a><a name=\"../table_engines/materializedview/\"></a><a name=\"../operations/table_engines/materializedview/\"></a><a name=\"../../table_engines/materializedview/\"></a><a name=\"../../../../operations/table_engines/materializedview/\"></a><a name=\"../../../../../../table_engines/materializedview/\"></a><a name=\"../../operations/table_engines/materializedview/\"></a><a name=\"../../../../table_engines/materializedview/\"></a><a name=\"operations/table_engines/materializedview/\"></a></p>\n<h2 id=\"materializedview\">MaterializedView<a class=\"headerlink\" href=\"#materializedview\" title=\"Permanent link\">&para;</a></h2>\n<p>Used for implementing materialized views (for more information, see <a href=\"#../../query_language/create/\">CREATE TABLE</a>). For storing data, it uses a different engine that was specified when creating the view. When reading from a table, it just uses this engine.</p>\n<p><a name=\"../../../table_engines/memory/\"></a><a name=\"../../operations/table_engines/memory/\"></a><a name=\"../operations/table_engines/memory/\"></a><a name=\"table_engines/memory/\"></a><a name=\"../table_engines/memory/\"></a><a name=\"../../../../operations/table_engines/memory/\"></a><a name=\"../../../../table_engines/memory/\"></a><a name=\"../../../../../operations/table_engines/memory/\"></a><a name=\"../../../../../table_engines/memory/\"></a><a name=\"../../../../../../table_engines/memory/\"></a><a name=\"../../../operations/table_engines/memory/\"></a><a name=\"../../table_engines/memory/\"></a><a name=\"memory/\"></a><a name=\"operations/table_engines/memory/\"></a></p>\n<h2 id=\"memory\">Memory<a class=\"headerlink\" href=\"#memory\" title=\"Permanent link\">&para;</a></h2>\n<p>The Memory engine stores data in RAM, in uncompressed form. Data is stored in exactly the same form as it is received when read. In other words, reading from this table is completely free.<br />\nConcurrent data access is synchronized. Locks are short: read and write operations don't block each other.<br />\nIndexes are not supported. Reading is parallelized.<br />\nMaximal productivity (over 10 GB/sec) is reached on simple queries, because there is no reading from the disk, decompressing, or deserializing data. (We should note that in many cases, the productivity of the MergeTree engine is almost as high.)<br />\nWhen restarting a server, data disappears from the table and the table becomes empty.<br />\nNormally, using this table engine is not justified. However, it can be used for tests, and for tasks where maximum speed is required on a relatively small number of rows (up to approximately 100,000,000).</p>\n<p>The Memory engine is used by the system for temporary tables with external query data (see the section \"External data for processing a query\"), and for implementing GLOBAL IN (see the section \"IN operators\").</p>\n<p><a name=\"../operations/table_engines/buffer/\"></a><a name=\"../../../table_engines/buffer/\"></a><a name=\"../../../../../../table_engines/buffer/\"></a><a name=\"buffer/\"></a><a name=\"../../../../table_engines/buffer/\"></a><a name=\"../../operations/table_engines/buffer/\"></a><a name=\"../../table_engines/buffer/\"></a><a name=\"../../../../../table_engines/buffer/\"></a><a name=\"table_engines/buffer/\"></a><a name=\"../../../operations/table_engines/buffer/\"></a><a name=\"../../../../operations/table_engines/buffer/\"></a><a name=\"../table_engines/buffer/\"></a><a name=\"operations/table_engines/buffer/\"></a><a name=\"../../../../../operations/table_engines/buffer/\"></a></p>\n<h2 id=\"buffer\">Buffer<a class=\"headerlink\" href=\"#buffer\" title=\"Permanent link\">&para;</a></h2>\n<p>Buffers the data to write in RAM, periodically flushing it to another table. During the read operation, data is read from the buffer and the other table simultaneously.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Buffer</span><span class=\"p\">(</span><span class=\"k\">database</span><span class=\"p\">,</span> <span class=\"k\">table</span><span class=\"p\">,</span> <span class=\"n\">num_layers</span><span class=\"p\">,</span> <span class=\"n\">min_time</span><span class=\"p\">,</span> <span class=\"n\">max_time</span><span class=\"p\">,</span> <span class=\"n\">min_rows</span><span class=\"p\">,</span> <span class=\"n\">max_rows</span><span class=\"p\">,</span> <span class=\"n\">min_bytes</span><span class=\"p\">,</span> <span class=\"n\">max_bytes</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Engine parameters:</p>\n<ul>\n<li><code>database</code> \u2013 Database name. Instead of the database name, you can use a constant expression that returns a string.</li>\n<li><code>table</code> \u2013 Table to flush data to. </li>\n<li><code>num_layers</code> \u2013 Parallelism layer. Physically, the table will be represented as 'num_layers' of independent buffers. Recommended value: 16.</li>\n<li><code>min_time</code>, <code>max_time</code>, <code>min_rows</code>, <code>max_rows</code>, <code>min_bytes</code>, and <code>max_bytes</code> \u2013 Conditions for flushing data from the buffer.</li>\n</ul>\n<p>Data is flushed from the buffer and written to the destination table if all the <code>min*</code> conditions or at least one <code>max*</code> condition are met.</p>\n<ul>\n<li><code>min_time</code>, <code>max_time</code> \u2013 Condition for the time in seconds from the moment of the first write to the buffer.</li>\n<li><code>min_rows</code>, <code>max_rows</code> \u2013 Condition for the number of rows in the buffer. </li>\n<li><code>min_bytes</code>, <code>max_bytes</code> \u2013 Condition for the number of bytes in the buffer.</li>\n</ul>\n<p>During the write operation, data is inserted to a <code>num_layers</code> number of random buffers. Or, if the data part to insert is large enough (greater than <code>max_rows</code> or <code>max_bytes</code>), it is written directly to the destination table, omitting the buffer.</p>\n<p>The conditions for flushing the data are calculated separately for each of the <code>num_layers</code> buffers. For example, if <code>num_layers = 16</code> and <code>max_bytes = 100000000</code>, the maximum RAM consumption is 1.6 GB.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">merge</span><span class=\"p\">.</");
            
            document.write("span><span class=\"n\">hits_buffer</span> <span class=\"k\">AS</span> <span class=\"n\">merge</span><span class=\"p\">.</span><span class=\"n\">hits</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Buffer</span><span class=\"p\">(</span><span class=\"n\">merge</span><span class=\"p\">,</span> <span class=\"n\">hits</span><span class=\"p\">,</span> <span class=\"mi\">16</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"mi\">10000</span><span class=\"p\">,</span> <span class=\"mi\">1000000</span><span class=\"p\">,</span> <span class=\"mi\">10000000</span><span class=\"p\">,</span> <span class=\"mi\">100000000</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Creating a 'merge.hits_buffer' table with the same structure as 'merge.hits' and using the Buffer engine. When writing to this table, data is buffered in RAM and later written to the 'merge.hits' table. 16 buffers are created. The data in each of them is flushed if either 100 seconds have passed, or one million rows have been written, or 100 MB of data have been written; or if simultaneously 10 seconds have passed and 10,000 rows and 10 MB of data have been written. For example, if just one row has been written, after 100 seconds it will be flushed, no matter what. But if many rows have been written, the data will be flushed sooner.</p>\n<p>When the server is stopped, with DROP TABLE or DETACH TABLE, buffer data is also flushed to the destination table.</p>\n<p>You can set empty strings in single quotation marks for the database and table name. This indicates the absence of a destination table. In this case, when the data flush conditions are reached, the buffer is simply cleared. This may be useful for keeping a window of data in memory.</p>\n<p>When reading from a Buffer table, data is processed both from the buffer and from the destination table (if there is one).<br />\nNote that the Buffer tables does not support an index. In other words, data in the buffer is fully scanned, which might be slow for large buffers. (For data in a subordinate table, the index that it supports will be used.)</p>\n<p>If the set of columns in the Buffer table doesn't match the set of columns in a subordinate table, a subset of columns that exist in both tables is inserted.</p>\n<p>If the types don't match for one of the columns in the Buffer table and a subordinate table, an error message is entered in the server log and the buffer is cleared.<br />\nThe same thing happens if the subordinate table doesn't exist when the buffer is flushed.</p>\n<p>If you need to run ALTER for a subordinate table and the Buffer table, we recommend first deleting the Buffer table, running ALTER for the subordinate table, then creating the Buffer table again.</p>\n<p>If the server is restarted abnormally, the data in the buffer is lost.</p>\n<p>FINAL and SAMPLE do not work correctly for Buffer tables. These conditions are passed to the destination table, but are not used for processing data in the buffer. If these features are required we recommend only using the Buffer table for writing, while reading from the destination table.</p>\n<p>When adding data to a Buffer, one of the buffers is locked. This causes delays if a read operation is simultaneously being performed from the table.</p>\n<p>Data that is inserted to a Buffer table may end up in the subordinate table in a different order and in different blocks. Because of this, a Buffer table is difficult to use for writing to a CollapsingMergeTree correctly. To avoid problems, you can set 'num_layers' to 1.</p>\n<p>If the destination table is replicated, some expected characteristics of replicated tables are lost when writing to a Buffer table. The random changes to the order of rows and sizes of data parts cause data deduplication to quit working, which means it is not possible to have a reliable 'exactly once' write to replicated tables.</p>\n<p>Due to these disadvantages, we can only recommend using a Buffer table in rare cases.</p>\n<p>A Buffer table is used when too many INSERTs are received from a large number of servers over a unit of time and data can't be buffered before insertion, which means the INSERTs can't run fast enough.</p>\n<p>Note that it doesn't make sense to insert data one row at a time, even for Buffer tables. This will only produce a speed of a few thousand rows per second, while inserting larger blocks of data can produce over a million rows per second (see the section \"Performance\").</p>\n<p><a name=\"../../../query_language/\"></a><a name=\"../../../../query_language/\"></a><a name=\"query_language/\"></a><a name=\"../query_language/\"></a><a name=\"../../query_language/\"></a><a name=\"../../../../../query_language/\"></a></p>\n<h2 id=\"sql-reference\">SQL Reference<a class=\"headerlink\" href=\"#sql-reference\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"#select/\">SELECT</a></li>\n<li><a href=\"#insert_into/\">INSERT INTO</a></li>\n<li><a href=\"#create/\">CREATE</a></li>\n<li><a href=\"#query_language_queries_alter\">ALTER</a></li>\n<li><a href=\"#misc/\">Other types of queries</a></li>\n</ul>\n<p><a name=\"../query_language/select/\"></a><a name=\"../../../../query_language/select/\"></a><a name=\"../../query_language/select/\"></a><a name=\"select/\"></a><a name=\"../../../../../query_language/select/\"></a><a name=\"query_language/select/\"></a><a name=\"../../../query_language/select/\"></a></p>\n<h2 id=\"select-queries-syntax\">SELECT Queries Syntax<a class=\"headerlink\" href=\"#select-queries-syntax\" title=\"Permanent link\">&para;</a></h2>\n<p><code>SELECT</code> performs data retrieval.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">[</span><span class=\"k\">WITH</span> <span class=\"n\">expr_list</span><span class=\"o\">|</span><span class=\"p\">(</span><span class=\"n\">subquery</span><span class=\"p\">)]</span>\n<span class=\"k\">SELECT</span> <span class=\"p\">[</span><span class=\"k\">DISTINCT</span><span class=\"p\">]</span> <span class=\"n\">expr_list</span>\n<span class=\"p\">[</span><span class=\"k\">FROM</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"o\">|</span> <span class=\"p\">(</span><span class=\"n\">subquery</span><span class=\"p\">)</span> <span class=\"o\">|</span> <span class=\"n\">table_function</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">FINAL</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">SAMPLE</span> <span class=\"n\">sample_coeff</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"p\">...]</span>\n<span class=\"p\">[</span><span class=\"k\">GLOBAL</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">ANY</span><span class=\"o\">|</span><span class=\"k\">ALL</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">INNER</span><span class=\"o\">|</span><span class=\"k\">LEFT</span><span class=\"o\">|</span><span class=\"k\">RIGHT</span><span class=\"o\">|</span><span class=\"k\">FULL</span><span class=\"o\">|</span><span class=\"k\">CROSS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">OUTER</span><span class=\"p\">]</span> <span class=\"k\">JOIN</span> <span class=\"p\">(</span><span class=\"n\">subquery</span><span class=\"p\">)</span><span class=\"o\">|</span><span class=\"k\">table</span> <span class=\"k\">USING</span> <span class=\"n\">columns_list</span>\n<span class=\"p\">[</span><span class=\"n\">PREWHERE</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">WHERE</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">expr_list</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">WITH</span> <span class=\"n\">TOTALS</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">HAVING</span> <span class=\"n\">expr</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">expr_list</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">LIMIT</span> <span class=\"p\">[</span><span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"p\">]</span><span class=\"n\">m</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">UNION</span> <span class=\"k\">ALL</span> <span class=\"p\">...]</span>\n<span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"k\">LIMIT</span> <span class=\"p\">[</span><span class=\"n\">offset_value</span><span class=\"p\">,</span> <span class=\"p\">]</span><span class=\"n\">n</span> <span class=\"k\">BY</span> <span class=\"n\">columns</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>All the clauses are optional, except for the required list of expressions immediately after SELECT.<br />\nThe clauses below are described in almost the same order as in the query execution conveyor.</p>\n<p>If the query omits the <code>DISTINCT</code>, <code>GROUP BY</code> and <code>ORDER BY</code> clauses and the <code>IN</code> and <code>JOIN</code> subqueries, the query will be completely stream processed, using O(1) amount of RAM.<br />\nOtherwise, the query might consume a lot of RAM if the appropriate restrictions are not specified: <code>max_memory_usage</code>, <code>max_rows_to_group_by</code>, <code>max_rows_to_sort</code>, <code>max_rows_in_distinct</code>, <code>max_bytes_in_distinct</code>, <code>max_rows_in_set</code>, <code>max_bytes_in_set</code>, <code>max_rows_in_join</code>, <code>max_bytes_in_join</code>, <code>max_bytes_before_external_sort</code>, <code>max_bytes_before_external_group_by</code>. For more information, see the section \"Settings\". It is possible to use external sorting (saving temporary tables to a disk) and external aggregation. <code>The system does not have \"merge join\"</code>.</p>\n<h4 id=\"with-clause\">WITH Clause<a class=\"headerlink\" href=\"#with-clause\" title=\"Permanent link\">&para;</a>");
            
            document.write("</h4>\n<p>This section provides support for Common Table Expressions (<a href=\"https://en.wikipedia.org/wiki/Hierarchical_and_recursive_queries_in_SQL\" rel=\"external nofollow noreferrer\">CTE</a>), with some limitations:<br />\n1. Recursive queries are not supported<br />\n2. When subquery is used inside WITH section, it's result should be scalar with exactly one row<br />\n3. Expression's results are not available in subqueries<br />\nResults of WITH clause expressions can be used inside SELECT clause.</p>\n<p>Example 1: Using constant expression as \"variable\"</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span> <span class=\"s1\">&#39;2019-08-01 15:23:00&#39;</span> <span class=\"k\">as</span> <span class=\"n\">ts_upper_bound</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits</span>\n<span class=\"k\">WHERE</span>\n    <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">ts_upper_bound</span><span class=\"p\">)</span> <span class=\"k\">AND</span>\n    <span class=\"n\">EventTime</span> <span class=\"o\">&lt;=</span> <span class=\"n\">ts_upper_bound</span>\n</code></pre></div>\n\n\n<p>Example 2: Evicting sum(bytes) expression result from SELECT clause column list</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">bytes</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">s</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">formatReadableSize</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">),</span>\n    <span class=\"k\">table</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">parts</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">table</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">s</span>\n</code></pre></div>\n\n\n<p>Example 3: Using results of scalar subquery</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cm\">/* this example would return TOP 10 of most huge tables */</span>\n<span class=\"k\">WITH</span>\n    <span class=\"p\">(</span>\n        <span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">bytes</span><span class=\"p\">)</span>\n        <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">parts</span>\n        <span class=\"k\">WHERE</span> <span class=\"n\">active</span>\n    <span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">total_disk_usage</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"p\">(</span><span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">bytes</span><span class=\"p\">)</span> <span class=\"o\">/</span> <span class=\"n\">total_disk_usage</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">100</span> <span class=\"k\">AS</span> <span class=\"n\">table_disk_usage</span><span class=\"p\">,</span>\n    <span class=\"k\">table</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">parts</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">table</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">table_disk_usage</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<p>Example 4: Re-using expression in subquery<br />\nAs a workaround for current limitation for expression usage in subqueries, you may duplicate it.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">hello</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">hello</span><span class=\"p\">,</span>\n    <span class=\"o\">*</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">WITH</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">hello</span>\n    <span class=\"k\">SELECT</span> <span class=\"n\">hello</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500hello\u2500\u2500\u2500\u2500\u2500\u252c\u2500hello\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;hello&#39;] \u2502 [&#39;hello&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"select-from\">FROM Clause<a class=\"headerlink\" href=\"#select-from\" title=\"Permanent link\">&para;</a></h4>\n<p>If the FROM clause is omitted, data will be read from the <code>system.one</code> table.<br />\nThe <code>system.one</code> table contains exactly one row (this table fulfills the same purpose as the DUAL table found in other DBMSs).</p>\n<p>The <code>FROM</code> clause specifies the source to read data from:</p>\n<ul>\n<li>Table</li>\n<li>Subquery</li>\n<li><a href=\"#table_functions/\">Table function</a></li>\n</ul>\n<p><code>ARRAY JOIN</code> and the regular <code>JOIN</code> may also be included (see below).</p>\n<p>Instead of a table, the <code>SELECT</code> subquery may be specified in parenthesis.<br />\nIn contrast to standard SQL, a synonym does not need to be specified after a subquery. For compatibility, it is possible to write <code>AS name</code> after a subquery, but the specified name isn't used anywhere.</p>\n<p>To execute a query, all the columns listed in the query are extracted from the appropriate table. Any columns not needed for the external query are thrown out of the subqueries.<br />\nIf a query does not list any columns (for example, <code>SELECT count() FROM t</code>), some column is extracted from the table anyway (the smallest one is preferred), in order to calculate the number of rows.</p>\n<p>The <code>FINAL</code> modifier can be used in the <code>SELECT</code> select query for engines from the <a href=\"#../operations/table_engines/mergetree/\">MergeTree</a> family. When you specify <code>FINAL</code>, data is selected fully \"merged\". Keep in mind that using <code>FINAL</code> leads to reading columns related to the primary key, in addition to the columns specified in the query. Additionally, the query will be executed in a single thread, and data will be merged during query execution. This means that when using <code>FINAL</code>, the query is processed slowly. In the most cases, avoid using <code>FINAL</code>.<br />\nThe <code>FINAL</code> modifier can be applied for all engines of MergeTree family that do data transformations in background merges (except GraphiteMergeTree).</p>\n<h4 id=\"select-sample-clause\">SAMPLE Clause<a class=\"headerlink\" href=\"#select-sample-clause\" title=\"Permanent link\">&para;</a></h4>\n<p>The <code>SAMPLE</code> clause allows for approximated query processing.</p>\n<p>When data sampling is enabled, the query is not performed on all the data, but only on a certain fraction of data (sample). For example, if you need to calculate statistics for all the visits, it is enough to execute the query on the 1/10 fraction of all the visits and then multiply the result by 10.</p>\n<p>Approximated query processing can be useful in the following cases:</p>\n<ul>\n<li>When you have strict timing requirements (like &lt;100ms) but you can't justify the cost of additional hardware resources to meet them.</li>\n<li>When your raw data is not accurate, so approximation doesn't noticeably degrade the quality.</li>\n<li>Business requirements target approximate results (for cost-effectiveness, or in order to market exact results to premium users).</li>\n</ul>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>You can only use sampling with the tables in the <a href=\"#../operations/table_engines/mergetree/\">MergeTree</a> family, and only if the sampling expression was specified during table creation (see <a href=\"#table_engine-mergetree-creating-a-table\">MergeTree engine</a>).</p>\n</div>\n<p>The features of data sampling are listed below:</p>\n<ul>\n<li>Data sampling is a deterministic mechanism. The result of the same <code>SELECT .. SAMPLE</code> query is always the same.</li>\n<li>Sampling works consistently for different tables. For tables with a single sampling key, a sample with the same coefficient always selects the same subset of possible data. For example, a sample of user IDs takes rows with the same subset of all the possible user IDs from different tables. This means that you can use the sample in subqueries in the <a href=\"#select-in-operators\">IN</a> clause. Also, you can join samples using the <a href=\"#select-join\">JOIN</a> clause.</li>\n<li>Sampling allows reading less data from a disk. Note that you must specify the sampling key correctly. For more information, see <a href=\"#table_engine-mergetree-creating-a-table\">Creating a MergeTree Table</a>.</li>\n</ul>\n<p>For the <code>SAMPLE</code> clause the following syntax is supported:</p>\n<table>\n<thead>\n<tr>\n<th>SAMPLE&#160;Clause&#160;Syntax</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>SAMPLE k</code></td>\n<td>Here <code>k</code> is the number from 0 to 1.</br>The query is executed on <code>k</code> fraction of data. For example, <code>SAMPLE 0.1</code> runs the query on 10% of data. <a href=\"#select-sample-k\">Read more</a></td>\n</tr>\n<tr>\n<td><code>SAMPLE n</code></td>\n<td>Here <code>n</code> is a sufficiently large integer.</br>The query is executed on a sample of at least <code>n</code> rows (but not significantly more than this). For example, <code>SAMPLE 10000000</code> runs the query on a minimum of 10,000,000 rows. <a href=\"#select-sample-n\">Read more</a></td>\n</tr>\n<tr>\n<td><code>SAMPLE k OFFSET m</code></td>\n<td>Here <code>k</code> and <code>m</code> are the numbers from 0 to 1.</br>The query is executed on a sample of <code>k</code> fraction of the data. The data used for the sample is offset by <code>m</code> fraction. <a href=\"#select-sample-offset\">Read more</a></td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"select-sample-k\">SAMPLE k<a class=\"headerlink\" href=\"#select-sample-k\" title=\"Permanent link\">&para;</a></h5>\n<p>Here <code>k</code> is the number from 0 to 1 (both fractional and decimal notations are supporte");
            
            document.write("d). For example, <code>SAMPLE 1/2</code> or <code>SAMPLE 0.5</code>.</p>\n<p>In a <code>SAMPLE k</code> clause, the sample is taken from the <code>k</code> fraction of data. The example is shown below:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">Title</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"o\">*</span> <span class=\"mi\">10</span> <span class=\"k\">AS</span> <span class=\"n\">PageViews</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits_distributed</span>\n<span class=\"n\">SAMPLE</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">1</span>\n<span class=\"k\">WHERE</span>\n    <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">34</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">Title</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">PageViews</span> <span class=\"k\">DESC</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1000</span>\n</code></pre></div>\n\n\n<p>In this example, the query is executed on a sample from 0.1 (10%) of data. Values of aggregate functions are not corrected automatically, so to get an approximate result, the value <code>count()</code> is manually multiplied by 10.</p>\n<h5 id=\"select-sample-n\">SAMPLE n<a class=\"headerlink\" href=\"#select-sample-n\" title=\"Permanent link\">&para;</a></h5>\n<p>Here <code>n</code> is a sufficiently large integer. For example, <code>SAMPLE 10000000</code>.</p>\n<p>In this case, the query is executed on a sample of at least <code>n</code> rows (but not significantly more than this). For example, <code>SAMPLE 10000000</code> runs the query on a minimum of 10,000,000 rows.</p>\n<p>Since the minimum unit for data reading is one granule (its size is set by the <code>index_granularity</code> setting), it makes sense to set a sample that is much larger than the size of the granule.</p>\n<p>When using the <code>SAMPLE n</code> clause, you don't know which relative percent of data was processed. So you don't know the coefficient the aggregate functions should be multiplied by. Use the <code>_sample_factor</code> virtual column to get the approximate result.</p>\n<p>The <code>_sample_factor</code> column contains relative coefficients that are calculated dynamically. This column is created automatically when you <a href=\"#table_engine-mergetree-creating-a-table\">create</a> a table with the specified sampling key. The usage examples of the <code>_sample_factor</code> column are shown below.</p>\n<p>Let's consider the table <code>visits</code>, which contains the statistics about site visits. The first example shows how to calculate the number of page views:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">PageViews</span> <span class=\"o\">*</span> <span class=\"n\">_sample_factor</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">visits</span>\n<span class=\"n\">SAMPLE</span> <span class=\"mi\">10000000</span>\n</code></pre></div>\n\n\n<p>The next example shows how to calculate the total number of visits:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">_sample_factor</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">visits</span>\n<span class=\"n\">SAMPLE</span> <span class=\"mi\">10000000</span>\n</code></pre></div>\n\n\n<p>The example below shows how to calculate the average session duration. Note that you don't need to use the relative coefficient to calculate the average values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">avg</span><span class=\"p\">(</span><span class=\"n\">Duration</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">visits</span>\n<span class=\"n\">SAMPLE</span> <span class=\"mi\">10000000</span>\n</code></pre></div>\n\n\n<h5 id=\"select-sample-offset\">SAMPLE k OFFSET m<a class=\"headerlink\" href=\"#select-sample-offset\" title=\"Permanent link\">&para;</a></h5>\n<p>Here <code>k</code> and <code>m</code> are numbers from 0 to 1. Examples are shown below.</p>\n<p><strong>Example 1</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">SAMPLE</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<p>In this example, the sample is 1/10th of all data:</p>\n<p><code>[++------------------]</code></p>\n<p><strong>Example 2</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">SAMPLE</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"mi\">10</span> <span class=\"k\">OFFSET</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<p>Here, a sample of 10% is taken from the second half of the data.</p>\n<p><code>[----------++--------]</code></p>\n<h4 id=\"select-array-join-clause\">ARRAY JOIN Clause<a class=\"headerlink\" href=\"#select-array-join-clause\" title=\"Permanent link\">&para;</a></h4>\n<p>Allows executing <code>JOIN</code> with an array or nested data structure. The intent is similar to the <a href=\"#functions_arrayjoin\">arrayJoin</a> function, but its functionality is broader.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">&lt;</span><span class=\"n\">expr_list</span><span class=\"o\">&gt;</span>\n<span class=\"k\">FROM</span> <span class=\"o\">&lt;</span><span class=\"n\">left_subquery</span><span class=\"o\">&gt;</span>\n<span class=\"p\">[</span><span class=\"k\">LEFT</span><span class=\"p\">]</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"o\">&lt;</span><span class=\"nb\">array</span><span class=\"o\">&gt;</span>\n<span class=\"p\">[</span><span class=\"k\">WHERE</span><span class=\"o\">|</span><span class=\"n\">PREWHERE</span> <span class=\"o\">&lt;</span><span class=\"n\">expr</span><span class=\"o\">&gt;</span><span class=\"p\">]</span>\n<span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>You can specify only a single <code>ARRAY JOIN</code> clause in a query.</p>\n<p>The query execution order is optimized when running <code>ARRAY JOIN</code>. Although <code>ARRAY JOIN</code> must always be specified before the <code>WHERE/PREWHERE</code> clause, it can be performed either before <code>WHERE/PREWHERE</code> (if the result is needed in this clause), or after completing it (to reduce the volume of calculations). The processing order is controlled by the query optimizer.</p>\n<p>Supported types of <code>ARRAY JOIN</code> are listed below:</p>\n<ul>\n<li><code>ARRAY JOIN</code> - In this case, empty arrays are not included in the result of <code>JOIN</code>.</li>\n<li><code>LEFT ARRAY JOIN</code> - The result of <code>JOIN</code> contains rows with empty arrays. The value for an empty array is set to the default value for the array element type (usually 0, empty string or NULL).</li>\n</ul>\n<p>The examples below demonstrate the usage of the <code>ARRAY JOIN</code> and <code>LEFT ARRAY JOIN</code> clauses. Let's create a table with an <a href=\"#../data_types/array/\">Array</a> type column and insert values into it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">arrays_test</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">arr</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">UInt8</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span><span class=\"p\">;</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">arrays_test</span>\n<span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">]),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;World&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Goodbye&#39;</span><span class=\"p\">,</span> <span class=\"p\">[]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500arr\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Hello       \u2502 [1,2]   \u2502\n\u2502 World       \u2502 [3,4,5] \u2502\n\u2502 Goodbye     \u2502 []      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The example below uses the <code>ARRAY JOIN</code> clause:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500arr\u2500\u2510\n\u2502 Hello \u2502   1 \u2502\n\u2502 Hello \u2502   2 \u2502\n\u2502 World \u2502   3 \u2502\n\u2502 World \u2502   4 \u2502\n\u2502 World \u2502   5 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The next example uses the <code>LEFT ARRAY JOIN</code> clause:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"k\">LEFT</span> <span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500arr\u2500\u2510\n\u2502 Hello       \u2502   1 \u2502\n\u2502 Hello       \u2502   2 \u2502\n\u2502 World       \u2502   3 \u2502\n\u2502 World       \u2502   4 \u2502\n\u2502 World       \u2502   5 \u2502\n\u2502 Goodbye     \u2502   0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h5 id=\"using-aliases\">Using Aliases<a class=\"headerlink\" href=\"#using-aliases\" title=\"Permanent link\">&para;</a></h5>\n<p>An alias can be specified for an array in the <code>ARRAY JOIN</code> clause. In this case, an arr");
            
            document.write("ay item can be accessed by this alias, but the array itself is accessed by the original name. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500arr\u2500\u2500\u2500\u2500\u2500\u252c\u2500a\u2500\u2510\n\u2502 Hello \u2502 [1,2]   \u2502 1 \u2502\n\u2502 Hello \u2502 [1,2]   \u2502 2 \u2502\n\u2502 World \u2502 [3,4,5] \u2502 3 \u2502\n\u2502 World \u2502 [3,4,5] \u2502 4 \u2502\n\u2502 World \u2502 [3,4,5] \u2502 5 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Using aliases, you can perform <code>ARRAY JOIN</code> with an external array. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr_external</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">arr_external</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500arr_external\u2500\u2510\n\u2502 Hello       \u2502            1 \u2502\n\u2502 Hello       \u2502            2 \u2502\n\u2502 Hello       \u2502            3 \u2502\n\u2502 World       \u2502            1 \u2502\n\u2502 World       \u2502            2 \u2502\n\u2502 World       \u2502            3 \u2502\n\u2502 Goodbye     \u2502            1 \u2502\n\u2502 Goodbye     \u2502            2 \u2502\n\u2502 Goodbye     \u2502            3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Multiple arrays can be comma-separated in the <code>ARRAY JOIN</code> clause. In this case, <code>JOIN</code> is performed with them simultaneously (the direct sum, not the cartesian product). Note that all the arrays must have the same size. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">mapped</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">arrayMap</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">-&gt;</span> <span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">mapped</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500arr\u2500\u2500\u2500\u2500\u2500\u252c\u2500a\u2500\u252c\u2500num\u2500\u252c\u2500mapped\u2500\u2510\n\u2502 Hello \u2502 [1,2]   \u2502 1 \u2502   1 \u2502      2 \u2502\n\u2502 Hello \u2502 [1,2]   \u2502 2 \u2502   2 \u2502      3 \u2502\n\u2502 World \u2502 [3,4,5] \u2502 3 \u2502   1 \u2502      4 \u2502\n\u2502 World \u2502 [3,4,5] \u2502 4 \u2502   2 \u2502      5 \u2502\n\u2502 World \u2502 [3,4,5] \u2502 5 \u2502   3 \u2502      6 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The example below uses the <a href=\"#array_functions-arrayenumerate\">arrayEnumerate</a> function:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">num</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">arrays_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">arr</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500arr\u2500\u2500\u2500\u2500\u2500\u252c\u2500a\u2500\u252c\u2500num\u2500\u252c\u2500arrayEnumerate(arr)\u2500\u2510\n\u2502 Hello \u2502 [1,2]   \u2502 1 \u2502   1 \u2502 [1,2]               \u2502\n\u2502 Hello \u2502 [1,2]   \u2502 2 \u2502   2 \u2502 [1,2]               \u2502\n\u2502 World \u2502 [3,4,5] \u2502 3 \u2502   1 \u2502 [1,2,3]             \u2502\n\u2502 World \u2502 [3,4,5] \u2502 4 \u2502   2 \u2502 [1,2,3]             \u2502\n\u2502 World \u2502 [3,4,5] \u2502 5 \u2502   3 \u2502 [1,2,3]             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h5 id=\"array-join-with-nested-data-structure\">ARRAY JOIN With Nested Data Structure<a class=\"headerlink\" href=\"#array-join-with-nested-data-structure\" title=\"Permanent link\">&para;</a></h5>\n<p><code>ARRAY</code>JOIN`` also works with <a href=\"#../data_types/nested_data_structures/nested/\">nested data structures</a>. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">nested_test</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">s</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">nest</span> <span class=\"n\">Nested</span><span class=\"p\">(</span>\n    <span class=\"n\">x</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"n\">y</span> <span class=\"n\">UInt32</span><span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span><span class=\"p\">;</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">nested_test</span>\n<span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">]),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;World&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"mi\">50</span><span class=\"p\">]),</span> <span class=\"p\">(</span><span class=\"s1\">&#39;Goodbye&#39;</span><span class=\"p\">,</span> <span class=\"p\">[],</span> <span class=\"p\">[]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500nest.x\u2500\u2500\u252c\u2500nest.y\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Hello   \u2502 [1,2]   \u2502 [10,20]    \u2502\n\u2502 World   \u2502 [3,4,5] \u2502 [30,40,50] \u2502\n\u2502 Goodbye \u2502 []      \u2502 []         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500nest.x\u2500\u252c\u2500nest.y\u2500\u2510\n\u2502 Hello \u2502      1 \u2502     10 \u2502\n\u2502 Hello \u2502      2 \u2502     20 \u2502\n\u2502 World \u2502      3 \u2502     30 \u2502\n\u2502 World \u2502      4 \u2502     40 \u2502\n\u2502 World \u2502      5 \u2502     50 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>When specifying names of nested data structures in <code>ARRAY JOIN</code>, the meaning is the same as <code>ARRAY JOIN</code> with all the array elements that it consists of. Examples are listed below:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500nest.x\u2500\u252c\u2500nest.y\u2500\u2510\n\u2502 Hello \u2502      1 \u2502     10 \u2502\n\u2502 Hello \u2502      2 \u2502     20 \u2502\n\u2502 World \u2502      3 \u2502     30 \u2502\n\u2502 World \u2502      4 \u2502     40 \u2502\n\u2502 World \u2502      5 \u2502     50 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This variation also makes sense:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500nest.x\u2500\u252c\u2500nest.y\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Hello \u2502      1 \u2502 [10,20]    \u2502\n\u2502 Hello \u2502      2 \u2502 [10,20]  ");
            
            document.write("  \u2502\n\u2502 World \u2502      3 \u2502 [30,40,50] \u2502\n\u2502 World \u2502      4 \u2502 [30,40,50] \u2502\n\u2502 World \u2502      5 \u2502 [30,40,50] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>An alias may be used for a nested data structure, in order to select either the <code>JOIN</code> result or the source array. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span> <span class=\"k\">AS</span> <span class=\"n\">n</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500n.x\u2500\u252c\u2500n.y\u2500\u252c\u2500nest.x\u2500\u2500\u252c\u2500nest.y\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Hello \u2502   1 \u2502  10 \u2502 [1,2]   \u2502 [10,20]    \u2502\n\u2502 Hello \u2502   2 \u2502  20 \u2502 [1,2]   \u2502 [10,20]    \u2502\n\u2502 World \u2502   3 \u2502  30 \u2502 [3,4,5] \u2502 [30,40,50] \u2502\n\u2502 World \u2502   4 \u2502  40 \u2502 [3,4,5] \u2502 [30,40,50] \u2502\n\u2502 World \u2502   5 \u2502  50 \u2502 [3,4,5] \u2502 [30,40,50] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Example of using the <a href=\"#array_functions-arrayenumerate\">arrayEnumerate</a> function:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">n</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">y</span><span class=\"o\">`</span><span class=\"p\">,</span> <span class=\"n\">num</span>\n<span class=\"k\">FROM</span> <span class=\"n\">nested_test</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span> <span class=\"n\">nest</span> <span class=\"k\">AS</span> <span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"o\">`</span><span class=\"n\">nest</span><span class=\"p\">.</span><span class=\"n\">x</span><span class=\"o\">`</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u252c\u2500n.x\u2500\u252c\u2500n.y\u2500\u252c\u2500nest.x\u2500\u2500\u252c\u2500nest.y\u2500\u2500\u2500\u2500\u2500\u252c\u2500num\u2500\u2510\n\u2502 Hello \u2502   1 \u2502  10 \u2502 [1,2]   \u2502 [10,20]    \u2502   1 \u2502\n\u2502 Hello \u2502   2 \u2502  20 \u2502 [1,2]   \u2502 [10,20]    \u2502   2 \u2502\n\u2502 World \u2502   3 \u2502  30 \u2502 [3,4,5] \u2502 [30,40,50] \u2502   1 \u2502\n\u2502 World \u2502   4 \u2502  40 \u2502 [3,4,5] \u2502 [30,40,50] \u2502   2 \u2502\n\u2502 World \u2502   5 \u2502  50 \u2502 [3,4,5] \u2502 [30,40,50] \u2502   3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"select-join\">JOIN Clause<a class=\"headerlink\" href=\"#select-join\" title=\"Permanent link\">&para;</a></h4>\n<p>Joins the data in the normal <a href=\"https://en.wikipedia.org/wiki/Join_(SQL)\" rel=\"external nofollow noreferrer\">SQL JOIN</a> sense.</p>\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Note</p>\n<p>Not related to <a href=\"#select-array-join-clause\">ARRAY JOIN</a>.</p>\n</div>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">&lt;</span><span class=\"n\">expr_list</span><span class=\"o\">&gt;</span>\n<span class=\"k\">FROM</span> <span class=\"o\">&lt;</span><span class=\"n\">left_subquery</span><span class=\"o\">&gt;</span>\n<span class=\"p\">[</span><span class=\"k\">GLOBAL</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">ANY</span><span class=\"o\">|</span><span class=\"k\">ALL</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">INNER</span><span class=\"o\">|</span><span class=\"k\">LEFT</span><span class=\"o\">|</span><span class=\"k\">RIGHT</span><span class=\"o\">|</span><span class=\"k\">FULL</span><span class=\"o\">|</span><span class=\"k\">CROSS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">OUTER</span><span class=\"p\">]</span> <span class=\"k\">JOIN</span> <span class=\"o\">&lt;</span><span class=\"n\">right_subquery</span><span class=\"o\">&gt;</span>\n<span class=\"p\">(</span><span class=\"k\">ON</span> <span class=\"o\">&lt;</span><span class=\"n\">expr_list</span><span class=\"o\">&gt;</span><span class=\"p\">)</span><span class=\"o\">|</span><span class=\"p\">(</span><span class=\"k\">USING</span> <span class=\"o\">&lt;</span><span class=\"n\">column_list</span><span class=\"o\">&gt;</span><span class=\"p\">)</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>The table names can be specified instead of <code>&lt;left_subquery&gt;</code> and <code>&lt;right_subquery&gt;</code>. This is equivalent to the <code>SELECT * FROM table</code> subquery, except in a special case when the table has the <a href=\"#../operations/table_engines/join/\">Join</a> engine \u2013 an array prepared for joining.</p>\n<h5 id=\"select-join-types\">Supported Types of <code>JOIN</code><a class=\"headerlink\" href=\"#select-join-types\" title=\"Permanent link\">&para;</a></h5>\n<ul>\n<li><code>INNER JOIN</code> (or <code>JOIN</code>)</li>\n<li><code>LEFT JOIN</code> (or <code>LEFT OUTER JOIN</code>)</li>\n<li><code>RIGHT JOIN</code> (or <code>RIGHT OUTER JOIN</code>)</li>\n<li><code>FULL JOIN</code> (or <code>FULL OUTER JOIN</code>)</li>\n<li><code>CROSS JOIN</code> (or <code>,</code> )</li>\n</ul>\n<p>See the standard <a href=\"https://en.wikipedia.org/wiki/Join_(SQL)\" rel=\"external nofollow noreferrer\">SQL JOIN</a> description.</p>\n<h5 id=\"multiple-join\">Multiple JOIN<a class=\"headerlink\" href=\"#multiple-join\" title=\"Permanent link\">&para;</a></h5>\n<p>Performing queries, ClickHouse rewrites multi-table joins into the sequence of two-table joins. For example, if there are four tables for join ClickHouse joins the first and the second, then joins the result with the third table, and at the last step, it joins the fourth one.</p>\n<p>If a query contains the <code>WHERE</code> clause, ClickHouse tries to pushdown filters from this clause through the intermediate join. If it cannot apply the filter to each intermediate join, ClickHouse applies the filters after all joins are completed.</p>\n<p>We recommend the <code>JOIN ON</code> or <code>JOIN USING</code> syntax for creating queries. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t1</span> <span class=\"k\">JOIN</span> <span class=\"n\">t2</span> <span class=\"k\">ON</span> <span class=\"n\">t1</span><span class=\"p\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">t2</span><span class=\"p\">.</span><span class=\"n\">a</span> <span class=\"k\">JOIN</span> <span class=\"n\">t3</span> <span class=\"k\">ON</span> <span class=\"n\">t1</span><span class=\"p\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">t3</span><span class=\"p\">.</span><span class=\"n\">a</span>\n</code></pre></div>\n\n\n<p>You can use comma-separated lists of tables in the <code>FROM</code> clause. This works only with the <a href=\"#settings-allow_experimental_cross_to_join_conversion\">allow_experimental_cross_to_join_conversion = 1</a> setting. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t1</span><span class=\"p\">,</span> <span class=\"n\">t2</span><span class=\"p\">,</span> <span class=\"n\">t3</span> <span class=\"k\">WHERE</span> <span class=\"n\">t1</span><span class=\"p\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">t2</span><span class=\"p\">.</span><span class=\"n\">a</span> <span class=\"k\">AND</span> <span class=\"n\">t1</span><span class=\"p\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">t3</span><span class=\"p\">.</span><span class=\"n\">a</span>\n</code></pre></div>\n\n\n<p>Don't mix these syntaxes.</p>\n<p>ClickHouse doesn't directly support syntax with commas, so we don't recommend using them. The algorithm tries to rewrite the query in terms of <code>CROSS JOIN</code> and <code>INNER JOIN</code> clauses and then proceeds to query processing. When rewriting the query, ClickHouse tries to optimize performance and memory consumption. By default, ClickHouse treats commas as an <code>INNER JOIN</code> clause and converts <code>INNER JOIN</code> to <code>CROSS JOIN</code> when the algorithm cannot guarantee that <code>INNER JOIN</code> returns the required data.</p>\n<h5 id=\"select-join-strictness\">Strictness<a class=\"headerlink\" href=\"#select-join-strictness\" title=\"Permanent link\">&para;</a></h5>\n<ul>\n<li><code>ALL</code> \u2014 If the right table has several matching rows, ClickHouse creates a <a href=\"https://en.wikipedia.org/wiki/Cartesian_product\" rel=\"external nofollow noreferrer\">Cartesian product</a> from matching rows. This is the standard <code>JOIN</code> behavior in SQL.</li>\n<li><code>ANY</code> \u2014 If the right table has several matching rows, only the first one found is joined. If the right table has only one matching row, the results of queries with <code>ANY</code> and <code>ALL</code> keywords are the same.</li>\n<li><code>ASOF</code> \u2014 For joining sequences with a non-exact match. <code>ASOF JOIN</code> usage is described below.</li>\n</ul>\n<p><strong>ASOF JOIN Usage</strong></p>\n<p><code>ASOF JOIN</code> is useful when you need to join records that have no exact match.</p>\n<p>Tables for <code>ASOF JOIN</code> must have an ordered sequence column. This column cannot be alone in a table, and should be one of the data types: <code>UInt32</code>, <code>UI");
            
            document.write("nt64</code>, <code>Float32</code>, <code>Float64</code>, <code>Date</code>, and <code>DateTime</code>.</p>\n<p>You can use the following types of syntax:</p>\n<ul>\n<li>\n<p><code>ASOF JOIN ... ON</code></p>\n<p><code>sql\nSELECT expressions_list\nFROM table_1\nASOF LEFT JOIN table_2\nON equi_cond AND closest_match_cond</code></p>\n<p>You can use any number of equality conditions and exactly one closest match condition. For example, <code>SELECT count() FROM A ASOF LEFT JOIN B ON A.a == B.b AND B.t &lt;= A.t</code>. Only <code>table_2.some_col &lt;= table_1.some_col</code> and <code>table_1.some_col &gt;= table2.some_col</code> condition types are available. You can't apply other conditions like <code>&gt;</code> or <code>!=</code>.</p>\n</li>\n<li>\n<p><code>ASOF JOIN ... USING</code></p>\n<p><code>sql\nSELECT expressions_list\nFROM table_1\nASOF JOIN table_2\nUSING (equi_column1, ... equi_columnN, asof_column)</code></p>\n<p><code>ASOF JOIN</code> uses <code>equi_columnX</code> for joining on equality and <code>asof_column</code> for joining on the closest match with the <code>table_1.asof_column &gt;= table2.asof_column</code> condition. The <code>asof_column</code> column must be the last in the <code>USING</code> clause.</p>\n</li>\n</ul>\n<p>For example, consider the following tables:</p>\n<div class=\"codehilite\"><pre><span></span><code>     table_1                           table_2\n\n  event   | ev_time | user_id       event   | ev_time | user_id\n&lt;a name=&quot;query_language/insert_into/&quot;&gt;&lt;/a&gt;&lt;a name=&quot;../../../../query_language/insert_into/&quot;&gt;&lt;/a&gt;&lt;a name=&quot;insert_into/&quot;&gt;&lt;/a&gt;&lt;a name=&quot;../query_language/insert_into/&quot;&gt;&lt;/a&gt;&lt;a name=&quot;../../../../../query_language/insert_into/&quot;&gt;&lt;/a&gt;&lt;a name=&quot;../../query_language/insert_into/&quot;&gt;&lt;/a&gt;&lt;a name=&quot;../../../query_language/insert_into/&quot;&gt;&lt;/a&gt;\n\n### INSERT\n\nAdding data.\n\nBasic query format:\n\n```sql\nINSERT INTO [db.]table [(c1, c2, c3)] VALUES (v11, v12, v13), (v21, v22, v23), ...\n</code></pre></div>\n\n\n<p>The query can specify a list of columns to insert <code>[(c1, c2, c3)]</code>. In this case, the rest of the columns are filled with:</p>\n<ul>\n<li>The values calculated from the <code>DEFAULT</code> expressions specified in the table definition.</li>\n<li>Zeros and empty strings, if <code>DEFAULT</code> expressions are not defined.</li>\n</ul>\n<p>If <a href=\"#../operations/settings/settings/\">strict_insert_defaults=1</a>, columns that do not have <code>DEFAULT</code> defined must be listed in the query.</p>\n<p>Data can be passed to the INSERT in any <a href=\"#formats\">format</a> supported by ClickHouse. The format must be specified explicitly in the query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[(</span><span class=\"n\">c1</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"n\">c3</span><span class=\"p\">)]</span> <span class=\"n\">FORMAT</span> <span class=\"n\">format_name</span> <span class=\"n\">data_set</span>\n</code></pre></div>\n\n\n<p>For example, the following query format is identical to the basic version of INSERT ... VALUES:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[(</span><span class=\"n\">c1</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"n\">c3</span><span class=\"p\">)]</span> <span class=\"n\">FORMAT</span> <span class=\"k\">Values</span> <span class=\"p\">(</span><span class=\"n\">v11</span><span class=\"p\">,</span> <span class=\"n\">v12</span><span class=\"p\">,</span> <span class=\"n\">v13</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">v21</span><span class=\"p\">,</span> <span class=\"n\">v22</span><span class=\"p\">,</span> <span class=\"n\">v23</span><span class=\"p\">),</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>ClickHouse removes all spaces and one line feed (if there is one) before the data. When forming a query, we recommend putting the data on a new line after the query operators (this is important if the data begins with spaces).</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t</span> <span class=\"n\">FORMAT</span> <span class=\"n\">TabSeparated</span>\n<span class=\"mi\">11</span>  <span class=\"n\">Hello</span><span class=\"p\">,</span> <span class=\"n\">world</span><span class=\"o\">!</span>\n<span class=\"mi\">22</span>  <span class=\"n\">Qwerty</span>\n</code></pre></div>\n\n\n<p>You can insert data separately from the query by using the command-line client or the HTTP interface. For more information, see the section \"<a href=\"#interfaces\">Interfaces</a>\".</p>\n<h4 id=\"constraints_1\">Constraints<a class=\"headerlink\" href=\"#constraints_1\" title=\"Permanent link\">&para;</a></h4>\n<p>If table has <a href=\"#constraints\">constraints</a>, their expressions will be checked for each row of inserted data. If any of those constraints is not satisfied \u2014 server will raise an exception containing constraint name and expression, the query will be stopped.</p>\n<h4 id=\"insert_query_insert-select\">Inserting The Results of <code>SELECT</code><a class=\"headerlink\" href=\"#insert_query_insert-select\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[(</span><span class=\"n\">c1</span><span class=\"p\">,</span> <span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"n\">c3</span><span class=\"p\">)]</span> <span class=\"k\">SELECT</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>Columns are mapped according to their position in the SELECT clause. However, their names in the SELECT expression and the table for INSERT may differ. If necessary, type casting is performed.</p>\n<p>None of the data formats except Values allow setting values to expressions such as <code>now()</code>, <code>1 + 2</code>, and so on. The Values format allows limited use of expressions, but this is not recommended, because in this case inefficient code is used for their execution.</p>\n<p>Other queries for modifying data parts are not supported: <code>UPDATE</code>, <code>DELETE</code>, <code>REPLACE</code>, <code>MERGE</code>, <code>UPSERT</code>, <code>INSERT UPDATE</code>.<br />\nHowever, you can delete old data using <code>ALTER TABLE ... DROP PARTITION</code>.</p>\n<p><code>FORMAT</code> clause must be specified in the end of query if <code>SELECT</code> clause contains table function <a href=\"#table_functions/input/\">input()</a>.</p>\n<h4 id=\"performance-considerations\">Performance Considerations<a class=\"headerlink\" href=\"#performance-considerations\" title=\"Permanent link\">&para;</a></h4>\n<p><code>INSERT</code> sorts the input data by primary key and splits them into partitions by month. If you insert data for mixed months, it can significantly reduce the performance of the <code>INSERT</code> query. To avoid this:</p>\n<ul>\n<li>Add data in fairly large batches, such as 100,000 rows at a time.</li>\n<li>Group data by month before uploading it to ClickHouse.</li>\n</ul>\n<p>Performance will not decrease if:</p>\n<ul>\n<li>Data is added in real time.</li>\n<li>You upload data that is usually sorted by time.</li>\n</ul>\n<p><a name=\"../../../query_language/create/\"></a><a name=\"create/\"></a><a name=\"../../../../query_language/create/\"></a><a name=\"query_language/create/\"></a><a name=\"../../../../../query_language/create/\"></a><a name=\"../query_language/create/\"></a><a name=\"../../query_language/create/\"></a></p>\n<h2 id=\"create-queries\">CREATE Queries<a class=\"headerlink\" href=\"#create-queries\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"query_language-create-database\">CREATE DATABASE<a class=\"headerlink\" href=\"#query_language-create-database\" title=\"Permanent link\">&para;</a></h3>\n<p>Creates database.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">DATABASE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">db_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span><span class=\"p\">(...)]</span>\n</code></pre></div>\n\n\n<h4 id=\"clauses\">Clauses<a class=\"headerlink\" href=\"#clauses\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>\n<p><code>IF NOT EXISTS</code></p>\n<p>If the <code>db_name</code> database already exists, then ClickHouse doesn't create a new database and:</p>\n<ul>\n<li>Doesn't throw an exception if clause is specified.</li>\n<li>Throws an exception if clause isn't specified.</li>\n</ul>\n</li>\n<li>\n<p><code>ON CLUSTER</code></p>\n<p>ClickHouse creates the <code>db_name</code> database on all the servers of a specified cluster.</p>\n</li>\n<li>\n<p><code>ENGINE</code></p>\n<ul>\n<li>\n<p><a href=\"#../database_engines/mysql/\">MySQL</a></p>\n<p>Allows you to retrieve data from the remote MySQL server.</p>\n</li>\n</ul>\n<p>By default, ClickHouse uses its own <a href=\"#../database_engines/\">database engine</a>.</p>\n</li>\n</ul>\n<h3 id=\"create-table-query\">CREATE TABLE<a class=\"headerlink\" href=\"#create-table-query\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>CREATE TABLE</code> query can have several forms.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=");
            
            document.write("\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">compression_codec</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">compression_codec</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span>\n</code></pre></div>\n\n\n<p>Creates a table named 'name' in the 'db' database or the current database if 'db' is not set, with the structure specified in brackets and the 'engine' engine.<br />\nThe structure of the table is a list of column descriptions. If indexes are supported by the engine, they are indicated as parameters for the table engine.</p>\n<p>A column description is <code>name type</code> in the simplest case. Example: <code>RegionID UInt32</code>.<br />\nExpressions can also be defined for default values (see below).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"k\">AS</span> <span class=\"p\">[</span><span class=\"n\">db2</span><span class=\"p\">.]</span><span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Creates a table with the same structure as another table. You can specify a different engine for the table. If the engine is not specified, the same engine will be used as for the <code>db2.name2</code> table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"k\">AS</span> <span class=\"n\">table_fucntion</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<p>Creates a table with the structure and data returned by a <a href=\"#table_functions/\">table function</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span> <span class=\"k\">AS</span> <span class=\"k\">SELECT</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>Creates a table with a structure like the result of the <code>SELECT</code> query, with the 'engine' engine, and fills it with data from SELECT.</p>\n<p>In all cases, if <code>IF NOT EXISTS</code> is specified, the query won't return an error if the table already exists. In this case, the query won't do anything.</p>\n<p>There can be other clauses after the <code>ENGINE</code> clause in the query. See detailed documentation on how to create tables in the descriptions of <a href=\"#table_engines\">table engines</a>.</p>\n<h4 id=\"create-default-values\">Default Values<a class=\"headerlink\" href=\"#create-default-values\" title=\"Permanent link\">&para;</a></h4>\n<p>The column description can specify an expression for a default value, in one of the following ways:<code>DEFAULT expr</code>, <code>MATERIALIZED expr</code>, <code>ALIAS expr</code>.<br />\nExample: <code>URLDomain String DEFAULT domain(URL)</code>.</p>\n<p>If an expression for the default value is not defined, the default values will be set to zeros for numbers, empty strings for strings, empty arrays for arrays, and <code>0000-00-00</code> for dates or <code>0000-00-00 00:00:00</code> for dates with time. NULLs are not supported.</p>\n<p>If the default expression is defined, the column type is optional. If there isn't an explicitly defined type, the default expression type is used. Example: <code>EventDate DEFAULT toDate(EventTime)</code> \u2013 the 'Date' type will be used for the 'EventDate' column.</p>\n<p>If the data type and default expression are defined explicitly, this expression will be cast to the specified type using type casting functions. Example: <code>Hits UInt32 DEFAULT 0</code> means the same thing as <code>Hits UInt32 DEFAULT toUInt32(0)</code>.</p>\n<p>Default expressions may be defined as an arbitrary expression from table constants and columns. When creating and changing the table structure, it checks that expressions don't contain loops. For INSERT, it checks that expressions are resolvable \u2013 that all columns they can be calculated from have been passed.</p>\n<p><code>DEFAULT expr</code></p>\n<p>Normal default value. If the INSERT query doesn't specify the corresponding column, it will be filled in by computing the corresponding expression.</p>\n<p><code>MATERIALIZED expr</code></p>\n<p>Materialized expression. Such a column can't be specified for INSERT, because it is always calculated.<br />\nFor an INSERT without a list of columns, these columns are not considered.<br />\nIn addition, this column is not substituted when using an asterisk in a SELECT query. This is to preserve the invariant that the dump obtained using <code>SELECT *</code> can be inserted back into the table using INSERT without specifying the list of columns.</p>\n<p><code>ALIAS expr</code></p>\n<p>Synonym. Such a column isn't stored in the table at all.<br />\nIts values can't be inserted in a table, and it is not substituted when using an asterisk in a SELECT query.<br />\nIt can be used in SELECTs if the alias is expanded during query parsing.</p>\n<p>When using the ALTER query to add new columns, old data for these columns is not written. Instead, when reading old data that does not have values for the new columns, expressions are computed on the fly by default. However, if running the expressions requires different columns that are not indicated in the query, these columns will additionally be read, but only for the blocks of data that need it.</p>\n<p>If you add a new column to a table but later change its default expression, the values used for old data will change (for data where values were not stored on the disk). Note that when running background merges, data for columns that are missing in one of the merging parts is written to the merged part.</p>\n<p>It is not possible to set default values for elements in nested data structures.</p>\n<h4 id=\"constraints\">Constraints<a class=\"headerlink\" href=\"#constraints\" title=\"Permanent link\">&para;</a></h4>\n<p>WARNING: This feature is experimental. Correct work is not guaranteed on non-MergeTree family engines.</p>\n<p>Along with columns descriptions constraints could be defined:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">compression_codec</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">TTL</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n    <span class=\"k\">CONSTRAINT</span> <span class=\"n\">constraint_name_1</span> <span class=\"k\">CHECK</span> <span class=\"n\">boolean_expr_1</span><span class=\"p\">,</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span>\n</code></pre></div>\n\n\n<p><code>boolean_expr_1</code> could by any boolean expression. If constraints are defined for the table, each of them will be checked for every row in <code>INSERT</code> query. If any constraint is not satisfied \u2014 server will raise an exception with constraint name and checking expression.</p>\n<p>Adding large amount of constraints can negatively affect performance of big <code>INSERT</code> queries.</p>\n<h4 id=\"ttl-expression\">TTL expression<a class=\"headerlink\" href=\"#ttl-expression\" title=\"Permanent link\">&para;</a></h4>\n<p>Defines storage time for values. Can be specified only for MergeTree-family tables. For the detailed description, see <a href=\"#table_engine-mergetree-ttl\">TTL for columns and tables</a>.</p>\n<h3 id=\"column-compression-codecs\">Column Compression Codecs<a class=\"headerlink\" href=\"#column-compression-codecs\" title=\"Perma");
            
            document.write("nent link\">&para;</a></h3>\n<p>By default, ClickHouse applies to columns the compression method, defined in <a href=\"#compression\">server settings</a>. Also, you can define compression method for each individual column in the <code>CREATE TABLE</code> query.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">CREATE TABLE codec_example</span>\n<span class=\"err\">(</span>\n<span class=\"err\">    dt Date CODEC(ZSTD),</span>\n<span class=\"err\">    ts DateTime CODEC(LZ4HC),</span>\n<span class=\"err\">    float_value Float32 CODEC(NONE),</span>\n<span class=\"err\">    double_value Float64 CODEC(LZ4HC(9))</span>\n<span class=\"err\">    value Float32 CODEC(Delta, ZSTD)</span>\n<span class=\"err\">)</span>\n<span class=\"err\">ENGINE = &lt;Engine&gt;</span>\n<span class=\"err\">...</span>\n</code></pre></div>\n\n\n<p>If a codec is specified, the default codec doesn't apply. Codecs can be combined in a pipeline, for example, <code>CODEC(Delta, ZSTD)</code>. To select the best codecs combination for you project, pass benchmarks, similar to described in the Altinity <a href=\"https://www.altinity.com/blog/2019/7/new-encodings-to-improve-clickhouse\" rel=\"external nofollow noreferrer\">New Encodings to Improve ClickHouse Efficiency</a> article.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>You cannot decompress ClickHouse database files with external utilities, for example, <code>lz4</code>. Use the special utility, <a href=\"https://github.com/ClickHouse/ClickHouse/tree/master/dbms/programs/compressor\" rel=\"external nofollow noreferrer\">clickhouse-compressor</a>.</p>\n</div>\n<p>Compression is supported for the table engines:</p>\n<ul>\n<li><a href=\"#../operations/table_engines/mergetree/\">MergeTree</a> family</li>\n<li><a href=\"#../operations/table_engines/log_family/\">Log</a> family</li>\n<li><a href=\"#../operations/table_engines/set/\">Set</a></li>\n<li><a href=\"#../operations/table_engines/join/\">Join</a></li>\n</ul>\n<p>ClickHouse supports common purpose codecs and specialized codecs.</p>\n<h4 id=\"create-query-specialized-codecs\">Specialized codecs<a class=\"headerlink\" href=\"#create-query-specialized-codecs\" title=\"Permanent link\">&para;</a></h4>\n<p>These codecs are designed to make compression more effective using specifities of the data. Some of this codecs don't compress data by itself, but they prepare data to be compressed better by common purpose codecs.</p>\n<p>Specialized codecs:</p>\n<ul>\n<li><code>Delta(delta_bytes)</code> \u2014 Compression approach in which raw values are replaced by the difference of two neighboring values, except for the first value that stays unchanged. Up to <code>delta_bytes</code> are used for storing delta values, so <code>delta_bytes</code> is the maximum size of raw values. Possible <code>delta_bytes</code> values: 1, 2, 4, 8. The default value for <code>delta_bytes</code> is <code>sizeof(type)</code> if equal to 1, 2, 4, or 8. In all other cases, it's 1.</li>\n<li><code>DoubleDelta</code> \u2014 Calculates delta of deltas and writes it in compact binary form. Optimal compression rates are achieved for monotonic sequences with a constant stride, such as time series data. Can be used with any fixed-width type. Implements the algorithm used in Gorilla TSDB, extending it to support 64-bit types. Uses 1 extra bit for 32-byte deltas: 5-bit prefixes instead of 4-bit prefixes. For additional information, see Compressing Time Stamps in <a href=\"http://www.vldb.org/pvldb/vol8/p1816-teller.pdf\" rel=\"external nofollow noreferrer\">Gorilla: A Fast, Scalable, In-Memory Time Series Database</a>.</li>\n<li><code>Gorilla</code> \u2014 Calculates XOR between current and previous value and writes it in compact binary form. Efficient when storing a series of floating point values that change slowly, because the best compression rate is achieved when neighboring values are binary equal. Implements the algorithm used in Gorilla TSDB, extending it to support 64-bit types. For additional information, see Compressing Values in <a href=\"http://www.vldb.org/pvldb/vol8/p1816-teller.pdf\" rel=\"external nofollow noreferrer\">Gorilla: A Fast, Scalable, In-Memory Time Series Database</a>.</li>\n<li><code>T64</code> \u2014 Compression approach that crops unused high bits of values in integer data types (including <code>Enum</code>, <code>Date</code> and <code>DateTime</code>). At each step of its algorithm, codec takes a block of 64 values, puts them into 64x64 bit matrix, transposes it, crops the unused bits of values and returns the rest as a sequence. Unused bits are the bits, that don't differ between maximum and minimum values in the whole data part for which the compression is used.</li>\n</ul>\n<p><code>DoubleDelta</code> and <code>Gorilla</code> codecs are used in Gorilla TSDB as the components of its compressing algorithm. Gorilla approach is effective in scenarios when there is a sequence of slowly changing values with their timestamps. Timestamps are effectively compressed by the <code>DoubleDelta</code> codec, and values are effectively compressed by the <code>Gorilla</code> codec. For example, to get an effectively stored table, you can create it in the following configuration:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">codec_example</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">DateTime</span> <span class=\"n\">CODEC</span><span class=\"p\">(</span><span class=\"n\">DoubleDelta</span><span class=\"p\">),</span>\n    <span class=\"n\">slow_values</span> <span class=\"n\">Float32</span> <span class=\"n\">CODEC</span><span class=\"p\">(</span><span class=\"n\">Gorilla</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">MergeTree</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<h4 id=\"create-query-common-purpose-codecs\">Common purpose codecs<a class=\"headerlink\" href=\"#create-query-common-purpose-codecs\" title=\"Permanent link\">&para;</a></h4>\n<p>Codecs:</p>\n<ul>\n<li><code>NONE</code> \u2014 No compression.</li>\n<li><code>LZ4</code> \u2014 Lossless <a href=\"https://github.com/lz4/lz4\" rel=\"external nofollow noreferrer\">data compression algorithm</a> used by default. Applies LZ4 fast compression.</li>\n<li><code>LZ4HC[(level)]</code> \u2014 LZ4 HC (high compression) algorithm with configurable level. Default level: 9. Setting <code>level &lt;= 0</code> applies the default level. Possible levels: [1, 12]. Recommended level range: [4, 9].</li>\n<li><code>ZSTD[(level)]</code> \u2014 <a href=\"https://en.wikipedia.org/wiki/Zstandard\" rel=\"external nofollow noreferrer\">ZSTD compression algorithm</a> with configurable <code>level</code>. Possible levels: [1, 22]. Default value: 1.</li>\n</ul>\n<p>High compression levels useful for asymmetric scenarios, like compress once, decompress a lot of times. Greater levels stands for better compression and higher CPU usage.</p>\n<h3 id=\"temporary-tables\">Temporary Tables<a class=\"headerlink\" href=\"#temporary-tables\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports temporary tables which have the following characteristics:</p>\n<ul>\n<li>Temporary tables disappear when the session ends, including if the connection is lost.</li>\n<li>A temporary table use the Memory engine only.</li>\n<li>The DB can't be specified for a temporary table. It is created outside of databases.</li>\n<li>If a temporary table has the same name as another one and a query specifies the table name without specifying the DB, the temporary table will be used.</li>\n<li>For distributed query processing, temporary tables used in a query are passed to remote servers.</li>\n</ul>\n<p>To create a temporary table, use the following syntax:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TEMPORARY</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">name1</span> <span class=\"p\">[</span><span class=\"n\">type1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr1</span><span class=\"p\">],</span>\n    <span class=\"n\">name2</span> <span class=\"p\">[</span><span class=\"n\">type2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">DEFAULT</span><span class=\"o\">|</span><span class=\"n\">MATERIALIZED</span><span class=\"o\">|</span><span class=\"k\">ALIAS</span> <span class=\"n\">expr2</span><span class=\"p\">],</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>In most cases, temporary tables are not created manually, but when using external data for a query, or for distributed <code>(GLOBAL) IN</code>. For more information, see the appropriate sections</p>\n<h3 id=\"distributed-ddl-queries-on-cluster-clause\">Distributed DDL queries (ON CLUSTER clause)<a class=\"headerlink\" href=\"#distributed-ddl-queries-on-cluster-clause\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>CREATE</code>, <code>DROP</code>, <code>ALTER</code>, and <code>RENAME</code> queries support distributed execution on a cluster.<br />\nFor example, the following query creates the <code>all_hits</code> <code>Distributed</code> table on each host in <code>cluster</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span> <span class=\"n\">all_hits</span> <span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span> <span class=\"p\">(</span><span class=\"n\">p</span> <span class=\"nb\">Date</span><span class=\"p\">,</span> <span class=\"n\">i</span> <span class=\"n\">Int32</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Distributed</span><span class=\"p\">(</s");
            
            document.write("pan><span class=\"k\">cluster</span><span class=\"p\">,</span> <span class=\"k\">default</span><span class=\"p\">,</span> <span class=\"n\">hits</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>In order to run these queries correctly, each host must have the same cluster definition (to simplify syncing configs, you can use substitutions from ZooKeeper). They must also connect to the ZooKeeper servers.<br />\nThe local version of the query will eventually be implemented on each host in the cluster, even if some hosts are currently not available. The order for executing queries within a single host is guaranteed.<br />\n<code>ALTER</code> queries are not yet supported for replicated tables.</p>\n<h3 id=\"create-view\">CREATE VIEW<a class=\"headerlink\" href=\"#create-view\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"p\">[</span><span class=\"n\">MATERIALIZED</span><span class=\"p\">]</span> <span class=\"k\">VIEW</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table_name</span> <span class=\"p\">[</span><span class=\"k\">TO</span><span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">engine</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">POPULATE</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"k\">SELECT</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>Creates a view. There are two types of views: normal and MATERIALIZED.</p>\n<p>Normal views don't store any data, but just perform a read from another table. In other words, a normal view is nothing more than a saved query. When reading from a view, this saved query is used as a subquery in the FROM clause.</p>\n<p>As an example, assume you've created a view:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">VIEW</span> <span class=\"k\">view</span> <span class=\"k\">AS</span> <span class=\"k\">SELECT</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>and written a query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"k\">view</span>\n</code></pre></div>\n\n\n<p>This query is fully equivalent to using the subquery:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"k\">c</span> <span class=\"k\">FROM</span> <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p>Materialized views store data transformed by the corresponding SELECT query.</p>\n<p>When creating a materialized view, you must specify ENGINE \u2013 the table engine for storing data.</p>\n<p>A materialized view is arranged as follows: when inserting data to the table specified in SELECT, part of the inserted data is converted by this SELECT query, and the result is inserted in the view.</p>\n<p>If you specify POPULATE, the existing table data is inserted in the view when creating it, as if making a <code>CREATE TABLE ... AS SELECT ...</code> . Otherwise, the query contains only the data inserted in the table after creating the view. We don't recommend using POPULATE, since data inserted in the table during the view creation will not be inserted in it.</p>\n<p>A <code>SELECT</code> query can contain <code>DISTINCT</code>, <code>GROUP BY</code>, <code>ORDER BY</code>, <code>LIMIT</code>... Note that the corresponding conversions are performed independently on each block of inserted data. For example, if <code>GROUP BY</code> is set, data is aggregated during insertion, but only within a single packet of inserted data. The data won't be further aggregated. The exception is when using an ENGINE that independently performs data aggregation, such as <code>SummingMergeTree</code>.</p>\n<p>The execution of <code>ALTER</code> queries on materialized views has not been fully developed, so they might be inconvenient. If the materialized view uses the construction <code>TO [db.]name</code>, you can <code>DETACH</code> the view, run <code>ALTER</code> for the target table, and then <code>ATTACH</code> the previously detached (<code>DETACH</code>) view.</p>\n<p>Views look the same as normal tables. For example, they are listed in the result of the <code>SHOW TABLES</code> query.</p>\n<p>There isn't a separate query for deleting views. To delete a view, use <code>DROP TABLE</code>.</p>\n<p><a name=\"query_language/alter/\"></a><a name=\"../../../../query_language/alter/\"></a><a name=\"../query_language/alter/\"></a><a name=\"../../../../../query_language/alter/\"></a><a name=\"alter/\"></a><a name=\"../../query_language/alter/\"></a><a name=\"../../../query_language/alter/\"></a></p>\n<h3 id=\"query_language_queries_alter\">ALTER<a class=\"headerlink\" href=\"#query_language_queries_alter\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>ALTER</code> query is only supported for <code>*MergeTree</code> tables, as well as <code>Merge</code>and<code>Distributed</code>. The query has several variations.</p>\n<h4 id=\"column-manipulations\">Column Manipulations<a class=\"headerlink\" href=\"#column-manipulations\" title=\"Permanent link\">&para;</a></h4>\n<p>Changing the table structure.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">].</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span> <span class=\"k\">ADD</span><span class=\"o\">|</span><span class=\"k\">DROP</span><span class=\"o\">|</span><span class=\"n\">CLEAR</span><span class=\"o\">|</span><span class=\"k\">COMMENT</span><span class=\"o\">|</span><span class=\"k\">MODIFY</span> <span class=\"k\">COLUMN</span> <span class=\"p\">...</span>\n</code></pre></div>\n\n\n<p>In the query, specify a list of one or more comma-separated actions.<br />\nEach action is an operation on a column.</p>\n<p>The following actions are supported:</p>\n<ul>\n<li><a href=\"#alter_add-column\">ADD COLUMN</a> \u2014 Adds a new column to the table.</li>\n<li><a href=\"#alter_drop-column\">DROP COLUMN</a> \u2014 Deletes the column.</li>\n<li><a href=\"#alter_clear-column\">CLEAR COLUMN</a> \u2014 Resets column values.</li>\n<li><a href=\"#alter_comment-column\">COMMENT COLUMN</a> \u2014 Adds a text comment to the column.</li>\n<li><a href=\"#alter_modify-column\">MODIFY COLUMN</a> \u2014 Changes column's type and/or default expression.</li>\n</ul>\n<p>These actions are described in detail below.</p>\n<h5 id=\"alter_add-column\">ADD COLUMN<a class=\"headerlink\" href=\"#alter_add-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ADD</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">type</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">default_expr</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">AFTER</span> <span class=\"n\">name_after</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Adds a new column to the table with the specified <code>name</code>, <code>type</code>, and <code>default_expr</code> (see the section <a href=\"#create-default-values\">Default expressions</a>).</p>\n<p>If the <code>IF NOT EXISTS</code> clause is included, the query won't return an error if the column already exists. If you specify <code>AFTER name_after</code> (the name of another column), the column is added after the specified one in the list of table columns. Otherwise, the column is added to the end of the table. Note that there is no way to add a column to the beginning of a table. For a chain of actions, <code>name_after</code> can be the name of a column that is added in one of the previous actions.</p>\n<p>Adding a column just changes the table structure, without performing any actions with data. The data doesn't appear on the disk after <code>ALTER</code>. If the data is missing for a column when reading from the table, it is filled in with default values (by performing the default expression if there is one, or using zeros or empty strings). The column appears on the disk after merging data parts (see <a href=\"#../operations/table_engines/mergetree/\">MergeTree</a>).</p>\n<p>This approach allows us to complete the <code>ALTER</code> query instantly, without increasing the volume of old data.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"k\">ADD</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span> <span class=\"n\">String</span> <span class=\"k\">AFTER</span> <span class=\"n\">user_id</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_drop-column\">DROP COLUMN<a class=\"headerlink\" href=\"#alter_drop-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span>\n</code></pre></div>\n\n\n<p>Deletes the column with the name <code>name</code>. If the <code>IF EXISTS</code> clause is specified, the query won't return an error if the column doesn't exist.</p>\n<p>Deletes data from the file system. Since this deletes entire files, the query is completed almost instantly.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</");
            
            document.write("span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_clear-column\">CLEAR COLUMN<a class=\"headerlink\" href=\"#alter_clear-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">CLEAR</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_name</span>\n</code></pre></div>\n\n\n<p>Resets all data in a column for a specified partition. Read more about setting the partition name in the section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>If the <code>IF EXISTS</code> clause is specified, the query won't return an error if the column doesn't exist.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">CLEAR</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">tuple</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_comment-column\">COMMENT COLUMN<a class=\"headerlink\" href=\"#alter_comment-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">COMMENT</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span> <span class=\"s1\">&#39;comment&#39;</span>\n</code></pre></div>\n\n\n<p>Adds a comment to the column. If the <code>IF EXISTS</code> clause is specified, the query won't return an error if the column doesn't exist.</p>\n<p>Each column can have one comment. If a comment already exists for the column, a new comment overwrites the previous comment.</p>\n<p>Comments are stored in the <code>comment_expression</code> column returned by the <a href=\"#misc-describe-table\">DESCRIBE TABLE</a> query.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"k\">COMMENT</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span> <span class=\"s1\">&#39;The table shows the browser used for accessing the site.&#39;</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_modify-column\">MODIFY COLUMN<a class=\"headerlink\" href=\"#alter_modify-column\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">MODIFY</span> <span class=\"k\">COLUMN</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">type</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">default_expr</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This query changes the <code>name</code> column's type to <code>type</code> and/or the default expression to <code>default_expr</code>. If the <code>IF EXISTS</code> clause is specified, the query won't return an error if the column doesn't exist.</p>\n<p>When changing the type, values are converted as if the <a href=\"#functions/type_conversion_functions/\">toType</a> functions were applied to them. If only the default expression is changed, the query doesn't do anything complex, and is completed almost instantly.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"k\">MODIFY</span> <span class=\"k\">COLUMN</span> <span class=\"n\">browser</span> <span class=\"nb\">Array</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Changing the column type is the only complex action \u2013 it changes the contents of files with data. For large tables, this may take a long time.</p>\n<p>There are several processing stages:</p>\n<ul>\n<li>Preparing temporary (new) files with modified data.</li>\n<li>Renaming old files.</li>\n<li>Renaming the temporary (new) files to the old names.</li>\n<li>Deleting the old files.</li>\n</ul>\n<p>Only the first stage takes time. If there is a failure at this stage, the data is not changed.<br />\nIf there is a failure during one of the successive stages, data can be restored manually. The exception is if the old files were deleted from the file system but the data for the new files did not get written to the disk and was lost.</p>\n<p>The <code>ALTER</code> query for changing columns is replicated. The instructions are saved in ZooKeeper, then each replica applies them. All <code>ALTER</code> queries are run in the same order. The query waits for the appropriate actions to be completed on the other replicas. However, a query to change columns in a replicated table can be interrupted, and all actions will be performed asynchronously.</p>\n<h5 id=\"alter-query-limitations\">ALTER Query Limitations<a class=\"headerlink\" href=\"#alter-query-limitations\" title=\"Permanent link\">&para;</a></h5>\n<p>The <code>ALTER</code> query lets you create and delete separate elements (columns) in nested data structures, but not whole nested data structures. To add a nested data structure, you can add columns with a name like <code>name.nested_name</code> and the type <code>Array(T)</code>. A nested data structure is equivalent to multiple array columns with a name that has the same prefix before the dot.</p>\n<p>There is no support for deleting columns in the primary key or the sampling key (columns that are used in the <code>ENGINE</code> expression). Changing the type for columns that are included in the primary key is only possible if this change does not cause the data to be modified (for example, you are allowed to add values to an Enum or to change a type from <code>DateTime</code> to <code>UInt32</code>).</p>\n<p>If the <code>ALTER</code> query is not sufficient to make the table changes you need, you can create a new table, copy the data to it using the <a href=\"#insert_query_insert-select\">INSERT SELECT</a> query, then switch the tables using the <a href=\"#misc_operations-rename\">RENAME</a> query and delete the old table. You can use the <a href=\"#../operations/utils/clickhouse-copier/\">clickhouse-copier</a> as an alternative to the <code>INSERT SELECT</code> query.</p>\n<p>The <code>ALTER</code> query blocks all reads and writes for the table. In other words, if a long <code>SELECT</code> is running at the time of the <code>ALTER</code> query, the <code>ALTER</code> query will wait for it to complete. At the same time, all new queries to the same table will wait while this <code>ALTER</code> is running.</p>\n<p>For tables that don't store data themselves (such as <code>Merge</code> and <code>Distributed</code>), <code>ALTER</code> just changes the table structure, and does not change the structure of subordinate tables. For example, when running ALTER for a <code>Distributed</code> table, you will also need to run <code>ALTER</code> for the tables on all remote servers.</p>\n<h4 id=\"manipulations-with-key-expressions\">Manipulations With Key Expressions<a class=\"headerlink\" href=\"#manipulations-with-key-expressions\" title=\"Permanent link\">&para;</a></h4>\n<p>The following command is supported:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">MODIFY</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">new_expression</span>\n</code></pre></div>\n\n\n<p>It only works for tables in the <a href=\"#../operations/table_engines/mergetree/\"><code>MergeTree</code></a> family (including<br />\n<a href=\"#../operations/table_engines/replication/\">replicated</a> tables). The command changes the<br />\n<a href=\"#../operations/table_engines/mergetree/\">sorting key</a> of the table<br />\nto <code>new_expression</code> (an expression or a tuple of expressions). Primary key remains the same.</p>\n<p>The command is lightweight in a sense that it only changes metadata. To keep the property that data part<br />\nrows are ordered by the sorting key expression you cannot add expressions containing existing columns<br />\nto the sorting key (only columns added by the <code>ADD COLUMN</code> command in the same <code>ALTER</code> query).</p>\n<h4 id=\"manipulations-with-data-skipping-indices\">Manipulations With Data Skipping Indices<a class=\"headerlink\" href=\"#manipulations-with-data-skipping-indices\" title=\"Permanent link\">&para;</a></h4>\n<p>It only works for tables in the <a href=\"#../operations/table_engines/mergetree/\"><code>*MergeTree</code></a> family (including<br />\n<a href=\"#../operations/table_engines/replication/\">replicated</a> tables). The following operations<br />\nare available:</p>\n<ul>\n<li>\n<p><code>ALTER TABLE [db].name ADD INDEX name expression TYPE type GRANULARITY value AFTER name [AFTER name2]</code> - Adds index description to tables metadata.</p>\n</li>\n<li>\n<p><code>ALTER TABLE [db].name DROP INDEX name</code> - Removes index description from tables metadata and deletes index files from disk.</p>\n</li>\n</ul>\n<p>These commands are lightweight in a sense that they only change metadata or remove files.<br />\nAlso, they are replicated (syncing indices metadata through ZooKeeper).</p>\n<h4 id=\"manipulations-with-constraints\">Manipulations with constraints<a class=\"headerlink\" href=\"#manipulations-with-constraints\" title=\"Permanent link\">&para;</a></h4>\n<p>See more on <a href=\"#constraints\">constraints</a></p>\n<p>Constraints could be added or deleted using following syntax:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">].</span><span class=\"n\">name</span> <span class=\"k\">ADD</span> <span class=\"k\">CONSTRAINT</span> <span class=\"k\">constraint_name</span> <span class=\"k\">CHECK</span> <span class=\"n\">expression</span><span class=\"p\">;</span>\n<span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span ");
            
            document.write("class=\"n\">db</span><span class=\"p\">].</span><span class=\"n\">name</span> <span class=\"k\">DROP</span> <span class=\"k\">CONSTRAINT</span> <span class=\"k\">constraint_name</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Queries will add or remove metadata about constraints from table so they are processed immediately.</p>\n<p>Constraint check <em>will not be executed</em> on existing data if it was added.</p>\n<p>All changes on replicated tables are broadcasting to ZooKeeper so will be applied on other replicas.</p>\n<h4 id=\"alter_manipulations-with-partitions\">Manipulations With Partitions and Parts<a class=\"headerlink\" href=\"#alter_manipulations-with-partitions\" title=\"Permanent link\">&para;</a></h4>\n<p>The following operations with <a href=\"#../operations/table_engines/custom_partitioning_key/\">partitions</a> are available:</p>\n<ul>\n<li><a href=\"#alter_detach-partition\">DETACH PARTITION</a> \u2013 Moves a partition to the <code>detached</code> directory and forget it.</li>\n<li><a href=\"#alter_drop-partition\">DROP PARTITION</a> \u2013 Deletes a partition.</li>\n<li><a href=\"#alter_attach-partition\">ATTACH PART|PARTITION</a> \u2013 Adds a part or partition from the <code>detached</code> directory to the table.</li>\n<li><a href=\"#alter_replace-partition\">REPLACE PARTITION</a> - Copies the data partition from one table to another.</li>\n<li><a href=\"#alter_clear-column-partition\">CLEAR COLUMN IN PARTITION</a> - Resets the value of a specified column in a partition.</li>\n<li><a href=\"#alter_clear-index-partition\">CLEAR INDEX IN PARTITION</a> - Resets the specified secondary index in a partition.</li>\n<li><a href=\"#alter_freeze-partition\">FREEZE PARTITION</a> \u2013 Creates a backup of a partition.</li>\n<li><a href=\"#alter_fetch-partition\">FETCH PARTITION</a> \u2013 Downloads a partition from another server.</li>\n</ul>\n<h5 id=\"alter_detach-partition\">DETACH PARTITION<a class=\"headerlink\" href=\"#alter_detach-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"n\">DETACH</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Moves all data for the specified partition to the <code>detached</code> directory. The server forgets about the detached data partition as if it does not exist. The server will not know about this data until you make the <a href=\"#alter_attach-partition\">ATTACH</a> query.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">DETACH</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201901</span>\n</code></pre></div>\n\n\n<p>Read about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>After the query is executed, you can do whatever you want with the data in the <code>detached</code> directory \u2014 delete it from the file system, or just leave it.</p>\n<p>This query is replicated \u2013 it moves the data to the <code>detached</code> directory on all replicas. Note that you can execute this query only on a leader replica. To find out if a replica is a leader, perform the <code>SELECT</code> query to the <a href=\"#system_tables-replicas\">system.replicas</a> table. Alternatively, it is easier to make a <code>DETACH</code> query on all replicas - all the replicas throw an exception, except the leader replica.</p>\n<h5 id=\"alter_drop-partition\">DROP PARTITION<a class=\"headerlink\" href=\"#alter_drop-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">DROP</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Deletes the specified partition from the table. This query tags the partition as inactive and deletes data completely, approximately in 10 minutes.</p>\n<p>Read about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>The query is replicated \u2013 it deletes data on all replicas.</p>\n<h5 id=\"alter_drop-detached\">DROP DETACHED PARTITION|PART<a class=\"headerlink\" href=\"#alter_drop-detached\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">DROP</span> <span class=\"n\">DETACHED</span> <span class=\"n\">PARTITION</span><span class=\"o\">|</span><span class=\"n\">PART</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Removes the specified part or all parts of the specified partition from <code>detached</code>.<br />\nRead more about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<h5 id=\"alter_attach-partition\">ATTACH PARTITION|PART<a class=\"headerlink\" href=\"#alter_attach-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"n\">ATTACH</span> <span class=\"n\">PARTITION</span><span class=\"o\">|</span><span class=\"n\">PART</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Adds data to the table from the <code>detached</code> directory. It is possible to add data for an entire partition or for a separate part. Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">ATTACH</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201901</span><span class=\"p\">;</span>\n<span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">ATTACH</span> <span class=\"n\">PART</span> <span class=\"mi\">201901</span><span class=\"n\">_2_2_0</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Read more about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<p>This query is replicated. Each replica checks whether there is data in the <code>detached</code> directory. If the data is in this directory, the query checks the integrity, verifies that it matches the data on the server that initiated the query. If everything is correct, the query adds data to the replica. If not, it downloads data from the query requestor replica, or from another replica where the data has already been added.</p>\n<p>So you can put data to the <code>detached</code> directory on one replica, and use the <code>ALTER ... ATTACH</code> query to add it to the table on all replicas.</p>\n<h5 id=\"alter_replace-partition\">REPLACE PARTITION<a class=\"headerlink\" href=\"#alter_replace-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">table2</span> <span class=\"k\">REPLACE</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span> <span class=\"k\">FROM</span> <span class=\"n\">table1</span>\n</code></pre></div>\n\n\n<p>This query copies the data partition from the <code>table1</code> to <code>table2</code>. Note that data won't be deleted from <code>table1</code>.</p>\n<p>For the query to run successfully, the following conditions must be met:</p>\n<ul>\n<li>Both tables must have the same structure.</li>\n<li>Both tables must have the same partition key.</li>\n</ul>\n<h5 id=\"alter_clear-column-partition\">CLEAR COLUMN IN PARTITION<a class=\"headerlink\" href=\"#alter_clear-column-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"n\">CLEAR</span> <span class=\"k\">COLUMN</span> <span class=\"k\">column_name</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>Resets all values in the specified column in a partition. If the <code>DEFAULT</code> clause was determined when creating a table, this query sets the column value to a specified default value.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">visits</span> <span class=\"n\">CLEAR</span> <span class=\"k\">COLUMN</span> <span class=\"n\">hour</span> <span class=\"k\">in</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201902</span>\n</code></pre></div>\n\n\n<h5 id=\"alter_freeze-partition\">FREEZE PARTITION<a class=\"headerlink\" href=\"#alter_freeze-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">FREEZE</span> <span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This query creates a local backup of a specified partition. If the <code>PARTITION</code> clause is omitted, the query creates the backup of all partitions at once.</p>\n<p>Note that for old-styled tables you can specify the prefix of the partition name (for example, '2019') - then the query creates the backup for all the corresponding partitions. Read about setting the partition expression in a section <a href=\"#alter-how-to-specify-part-expr\">How to specify the partition expression</a>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n</div>\n<p>The entire backup process is performed without stopping the server.</p>\n<p>At the time of execution, for a data snapshot, the query creates hardlinks to a table data. Hardlinks are placed in the directory <code>/var/lib/clickhouse/shadow/N/...</code>, where:</p>\n<ul>\n<li><code>/var/lib/clickhouse/</code> is the working ClickHouse directory specified in the config.</li>\n<li><c");
            
            document.write("ode>N</code> is the incremental number of the backup.</li>\n</ul>\n<p>The same structure of directories is created inside the backup as inside <code>/var/lib/clickhouse/</code>. The query performs 'chmod' for all files, forbidding writing into them.</p>\n<p>After creating the backup, you can copy the data from <code>/var/lib/clickhouse/shadow/</code> to the remote server and then delete it from the local server. Note that the <code>ALTER t FREEZE PARTITION</code> query is not replicated. It creates a local backup only on the local server.</p>\n<p>The query creates backup almost instantly (but first it waits for the current queries to the corresponding table to finish running).</p>\n<p><code>ALTER TABLE t FREEZE PARTITION</code> copies only the data, not table metadata. To make a backup of table metadata, copy the file <code>/var/lib/clickhouse/metadata/database/table.sql</code></p>\n<p>To restore data from a backup, do the following:</p>\n<ol>\n<li>Create the table if it does not exist. To view the query, use the .sql file (replace <code>ATTACH</code> in it with <code>CREATE</code>).</li>\n<li>Copy the data from the <code>data/database/table/</code> directory inside the backup to the <code>/var/lib/clickhouse/data/database/table/detached/</code> directory.</li>\n<li>Run <code>ALTER TABLE t ATTACH PARTITION</code> queries to add the data to a table.</li>\n</ol>\n<p>Restoring from a backup doesn't require stopping the server.</p>\n<p>For more information about backups and restoring data, see the <a href=\"#../operations/backup/\">Data Backup</a> section.</p>\n<h5 id=\"alter_clear-index-partition\">CLEAR INDEX IN PARTITION<a class=\"headerlink\" href=\"#alter_clear-index-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"n\">CLEAR</span> <span class=\"k\">INDEX</span> <span class=\"n\">index_name</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span>\n</code></pre></div>\n\n\n<p>The query works similar to <code>CLEAR COLUMN</code>, but it resets an index instead of a column data.</p>\n<h5 id=\"alter_fetch-partition\">FETCH PARTITION<a class=\"headerlink\" href=\"#alter_fetch-partition\" title=\"Permanent link\">&para;</a></h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"k\">table_name</span> <span class=\"k\">FETCH</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_expr</span> <span class=\"k\">FROM</span> <span class=\"s1\">&#39;path-in-zookeeper&#39;</span>\n</code></pre></div>\n\n\n<p>Downloads a partition from another server. This query only works for the replicated tables.</p>\n<p>The query does the following:</p>\n<ol>\n<li>Downloads the partition from the specified shard. In 'path-in-zookeeper' you must specify a path to the shard in ZooKeeper.</li>\n<li>Then the query puts the downloaded data to the <code>detached</code> directory of the <code>table_name</code> table. Use the <a href=\"#alter_attach-partition\">ATTACH PARTITION|PART</a> query to add the data to the table.</li>\n</ol>\n<p>For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">users</span> <span class=\"k\">FETCH</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201902</span> <span class=\"k\">FROM</span> <span class=\"s1\">&#39;/clickhouse/tables/01-01/visits&#39;</span><span class=\"p\">;</span>\n<span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"n\">users</span> <span class=\"n\">ATTACH</span> <span class=\"n\">PARTITION</span> <span class=\"mi\">201902</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Note that:</p>\n<ul>\n<li>The <code>ALTER ... FETCH PARTITION</code> query isn't replicated. It places the partition to the <code>detached</code> directory only on the local server.</li>\n<li>The <code>ALTER TABLE ... ATTACH</code> query is replicated. It adds the data to all replicas. The data is added to one of the replicas from the <code>detached</code> directory, and to the others - from neighboring replicas.</li>\n</ul>\n<p>Before downloading, the system checks if the partition exists and the table structure matches. The most appropriate replica is selected automatically from the healthy replicas.</p>\n<p>Although the query is called <code>ALTER TABLE</code>, it does not change the table structure and does not immediately change the data available in the table.</p>\n<h5 id=\"alter-how-to-specify-part-expr\">How To Set Partition Expression<a class=\"headerlink\" href=\"#alter-how-to-specify-part-expr\" title=\"Permanent link\">&para;</a></h5>\n<p>You can specify the partition expression in <code>ALTER ... PARTITION</code> queries in different ways:</p>\n<ul>\n<li>As a value from the <code>partition</code> column of the <code>system.parts</code> table. For example, <code>ALTER TABLE visits DETACH PARTITION 201901</code>.</li>\n<li>As the expression from the table column. Constants and constant expressions are supported. For example, <code>ALTER TABLE visits DETACH PARTITION toYYYYMM(toDate('2019-01-25'))</code>.</li>\n<li>Using the partition ID. Partition ID is a string identifier of the partition (human-readable, if possible) that is used as the names of partitions in the file system and in ZooKeeper. The partition ID must be specified in the <code>PARTITION ID</code> clause, in a single quotes. For example, <code>ALTER TABLE visits DETACH PARTITION ID '201901'</code>.</li>\n<li>In the <a href=\"#alter_attach-partition\">ALTER ATTACH PART</a> and <a href=\"#alter_drop-detached\">DROP DETACHED PART</a> query, to specify the name of a part, use string literal with a value from the <code>name</code> column of the <a href=\"#system_tables-detached_parts\">system.detached_parts</a> table. For example, <code>ALTER TABLE visits ATTACH PART '201901_1_1_0'</code>.</li>\n</ul>\n<p>Usage of quotes when specifying the partition depends on the type of partition expression. For example, for the <code>String</code> type, you have to specify its name in quotes (<code>'</code>). For the <code>Date</code> and <code>Int*</code> types no quotes are needed.</p>\n<p>For old-style tables, you can specify the partition either as a number <code>201901</code> or a string <code>'201901'</code>. The syntax for the new-style tables is stricter with types (similar to the parser for the VALUES input format).</p>\n<p>All the rules above are also true for the <a href=\"#misc_operations-optimize\">OPTIMIZE</a> query. If you need to specify the only partition when optimizing a non-partitioned table, set the expression <code>PARTITION tuple()</code>. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">OPTIMIZE</span> <span class=\"k\">TABLE</span> <span class=\"n\">table_not_partitioned</span> <span class=\"n\">PARTITION</span> <span class=\"n\">tuple</span><span class=\"p\">()</span> <span class=\"k\">FINAL</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>The examples of <code>ALTER ... PARTITION</code> queries are demonstrated in the tests <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/tests/queries/0_stateless/00502_custom_partitioning_local.sql\" rel=\"external nofollow noreferrer\"><code>00502_custom_partitioning_local</code></a> and <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/tests/queries/0_stateless/00502_custom_partitioning_replicated_zookeeper.sql\" rel=\"external nofollow noreferrer\"><code>00502_custom_partitioning_replicated_zookeeper</code></a>.</p>\n<h4 id=\"synchronicity-of-alter-queries\">Synchronicity of ALTER Queries<a class=\"headerlink\" href=\"#synchronicity-of-alter-queries\" title=\"Permanent link\">&para;</a></h4>\n<p>For non-replicatable tables, all <code>ALTER</code> queries are performed synchronously. For replicatable tables, the query just adds instructions for the appropriate actions to <code>ZooKeeper</code>, and the actions themselves are performed as soon as possible. However, the query can wait for these actions to be completed on all the replicas.</p>\n<p>For <code>ALTER ... ATTACH|DETACH|DROP</code> queries, you can use the <code>replication_alter_partitions_sync</code> setting to set up waiting.<br />\nPossible values: <code>0</code> \u2013 do not wait; <code>1</code> \u2013 only wait for own execution (default); <code>2</code> \u2013 wait for all.</p>\n<h4 id=\"alter-mutations\">Mutations<a class=\"headerlink\" href=\"#alter-mutations\" title=\"Permanent link\">&para;</a></h4>\n<p>Mutations are an ALTER query variant that allows changing or deleting rows in a table. In contrast to standard <code>UPDATE</code> and <code>DELETE</code> queries that are intended for point data changes, mutations are intended for heavy operations that change a lot of rows in a table.</p>\n<p>The functionality is in beta stage and is available starting with the 1.1.54388 version. Currently <code>*MergeTree</code> table engines are supported (both replicated and unreplicated).</p>\n<p>Existing tables are ready for mutations as-is (no conversion necessary), but after the first mutation is applied to a table, its metadata format becomes incompatible with previous server versions and falling back to a previous version becomes impossible.</p>\n<p>Currently available commands:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"k\">DELETE</span> <span class=\"k\">WHERE</span> <span class=\"n\">filter_expr</span>\n</code></pre></div>\n\n\n<p>The <code>filter_expr</code> must be of type UInt8. The query deletes rows in the table for which this expression takes a non-zero value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"k\">UPDATE</span> <span class=\"n\">column1</span> <span class=\"o\">=</span> <span class=\"n\">expr1</span> <span class=\"p\">[,</span> <span class=\"p\">...]</span> <span class=\"k\">WHERE</span> <span class=\"n\">filter_expr</span>\n</co");
            
            document.write("de></pre></div>\n\n\n<p>The command is available starting with the 18.12.14 version. The <code>filter_expr</code> must be of type UInt8. This query updates values of specified columns to the values of corresponding expressions in rows for which the <code>filter_expr</code> takes a non-zero value. Values are casted to the column type using the <code>CAST</code> operator. Updating columns that are used in the calculation of the primary or the partition key is not supported.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"n\">MATERIALIZE</span> <span class=\"k\">INDEX</span> <span class=\"n\">name</span> <span class=\"k\">IN</span> <span class=\"n\">PARTITION</span> <span class=\"n\">partition_name</span>\n</code></pre></div>\n\n\n<p>The query rebuilds the secondary index <code>name</code> in the partition <code>partition_name</code>.</p>\n<p>One query can contain several commands separated by commas.</p>\n<p>For *MergeTree tables mutations execute by rewriting whole data parts. There is no atomicity - parts are substituted for mutated parts as soon as they are ready and a <code>SELECT</code> query that started executing during a mutation will see data from parts that have already been mutated along with data from parts that have not been mutated yet.</p>\n<p>Mutations are totally ordered by their creation order and are applied to each part in that order. Mutations are also partially ordered with INSERTs - data that was inserted into the table before the mutation was submitted will be mutated and data that was inserted after that will not be mutated. Note that mutations do not block INSERTs in any way.</p>\n<p>A mutation query returns immediately after the mutation entry is added (in case of replicated tables to ZooKeeper, for nonreplicated tables - to the filesystem). The mutation itself executes asynchronously using the system profile settings. To track the progress of mutations you can use the <a href=\"#system_tables-mutations\"><code>system.mutations</code></a> table. A mutation that was successfully submitted will continue to execute even if ClickHouse servers are restarted. There is no way to roll back the mutation once it is submitted, but if the mutation is stuck for some reason it can be cancelled with the <a href=\"#kill-mutation\"><code>KILL MUTATION</code></a> query.</p>\n<p>Entries for finished mutations are not deleted right away (the number of preserved entries is determined by the <code>finished_mutations_to_keep</code> storage engine parameter). Older mutation entries are deleted.</p>\n<p><a name=\"system/\"></a><a name=\"../../../query_language/system/\"></a><a name=\"query_language/system/\"></a><a name=\"../../../../../query_language/system/\"></a><a name=\"../query_language/system/\"></a><a name=\"../../../../query_language/system/\"></a><a name=\"../../query_language/system/\"></a></p>\n<h2 id=\"query_language-system\">SYSTEM Queries<a class=\"headerlink\" href=\"#query_language-system\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"#query_language-system-reload-dictionaries\">RELOAD DICTIONARIES</a></li>\n<li><a href=\"#query_language-system-reload-dictionary\">RELOAD DICTIONARY</a></li>\n<li><a href=\"#query_language-system-drop-dns-cache\">DROP DNS CACHE</a></li>\n<li><a href=\"#query_language-system-drop-marks-cache\">DROP MARKS CACHE</a></li>\n<li><a href=\"#query_language-system-flush_logs\">FLUSH LOGS</a></li>\n<li><a href=\"#query_language-system-reload-config\">RELOAD CONFIG</a></li>\n<li><a href=\"#query_language-system-shutdown\">SHUTDOWN</a></li>\n<li><a href=\"#query_language-system-kill\">KILL</a></li>\n<li><a href=\"#query_language-system-stop-distributed-sends\">STOP DISTRIBUTED SENDS</a></li>\n<li><a href=\"#query_language-system-flush-distributed\">FLUSH DISTRIBUTED</a></li>\n<li><a href=\"#query_language-system-start-distributed-sends\">START DISTRIBUTED SENDS</a></li>\n</ul>\n<h3 id=\"query_language-system-reload-dictionaries\">RELOAD DICTIONARIES<a class=\"headerlink\" href=\"#query_language-system-reload-dictionaries\" title=\"Permanent link\">&para;</a></h3>\n<p>Reloads all dictionaries that have been successfully loaded before.<br />\nBy default, dictionaries are loaded lazily (see <a href=\"#server_settings-dictionaries_lazy_load\">dictionaries_lazy_load</a>), so instead of being loaded automatically at startup, they are initialized on first access through dictGet function or SELECT from tables with ENGINE = Dictionary. The <code>SYSTEM RELOAD DICTIONARIES</code> query reloads such dictionaries (LOADED).<br />\nAlways returns <code>Ok.</code> regardless of the result of the dictionary update.</p>\n<h3 id=\"query_language-system-reload-dictionary\">RELOAD DICTIONARY dictionary_name<a class=\"headerlink\" href=\"#query_language-system-reload-dictionary\" title=\"Permanent link\">&para;</a></h3>\n<p>Completely reloads a dictionary <code>dictionary_name</code>, regardless of the state of the dictionary (LOADED / NOT_LOADED / FAILED).<br />\nAlways returns <code>Ok.</code> regardless of the result of updating the dictionary.<br />\nThe status of the dictionary can be checked by querying the <code>system.dictionaries</code> table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">status</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">dictionaries</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<h3 id=\"query_language-system-drop-dns-cache\">DROP DNS CACHE<a class=\"headerlink\" href=\"#query_language-system-drop-dns-cache\" title=\"Permanent link\">&para;</a></h3>\n<p>Resets ClickHouse's internal DNS cache. Sometimes (for old ClickHouse versions) it is necessary to use this command when changing the infrastructure (changing the IP address of another ClickHouse server or the server used by dictionaries).</p>\n<p>For more convenient (automatic) cache management, see disable_internal_dns_cache, dns_cache_update_period parameters.</p>\n<h3 id=\"query_language-system-drop-marks-cache\">DROP MARKS CACHE<a class=\"headerlink\" href=\"#query_language-system-drop-marks-cache\" title=\"Permanent link\">&para;</a></h3>\n<p>Resets the mark cache. Used in development of ClickHouse and performance tests.</p>\n<h3 id=\"query_language-system-flush_logs\">FLUSH LOGS<a class=\"headerlink\" href=\"#query_language-system-flush_logs\" title=\"Permanent link\">&para;</a></h3>\n<p>Flushes buffers of log messages to system tables (e.g. system.query_log). Allows you to not wait 7.5 seconds when debugging.</p>\n<h3 id=\"query_language-system-reload-config\">RELOAD CONFIG<a class=\"headerlink\" href=\"#query_language-system-reload-config\" title=\"Permanent link\">&para;</a></h3>\n<p>Reloads ClickHouse configuration. Used when configuration is stored in ZooKeeeper.</p>\n<h3 id=\"query_language-system-shutdown\">SHUTDOWN<a class=\"headerlink\" href=\"#query_language-system-shutdown\" title=\"Permanent link\">&para;</a></h3>\n<p>Normally shuts down ClickHouse (like <code>service clickhouse-server stop</code> / <code>kill {$pid_clickhouse-server}</code>)</p>\n<h3 id=\"query_language-system-kill\">KILL<a class=\"headerlink\" href=\"#query_language-system-kill\" title=\"Permanent link\">&para;</a></h3>\n<p>Aborts ClickHouse process (like <code>kill -9 {$ pid_clickhouse-server}</code>)</p>\n<h3 id=\"query_language-system-distributed\">Managing Distributed Tables<a class=\"headerlink\" href=\"#query_language-system-distributed\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse can manage <a href=\"#../operations/table_engines/distributed/\">distributed</a> tables. When a user inserts data into these tables, ClickHouse first creates a queue of the data that should be sent to cluster nodes, then asynchronously sends it. You can manage queue processing with the <a href=\"#query_language-system-stop-distributed-sends\">STOP DISTRIBUTED SENDS</a>, <a href=\"#query_language-system-flush-distributed\">FLUSH DISTRIBUTED</a>, and <a href=\"#query_language-system-start-distributed-sends\">START DISTRIBUTED SENDS</a> queries. You can also synchronously insert distributed data with the <code>insert_distributed_sync</code> setting.</p>\n<h4 id=\"query_language-system-stop-distributed-sends\">STOP DISTRIBUTED SENDS<a class=\"headerlink\" href=\"#query_language-system-stop-distributed-sends\" title=\"Permanent link\">&para;</a></h4>\n<p>Disables background data distribution when inserting data into distributed tables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SYSTEM</span> <span class=\"n\">STOP</span> <span class=\"n\">DISTRIBUTED</span> <span class=\"n\">SENDS</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"o\">&lt;</span><span class=\"n\">distributed_table_name</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"query_language-system-flush-distributed\">FLUSH DISTRIBUTED<a class=\"headerlink\" href=\"#query_language-system-flush-distributed\" title=\"Permanent link\">&para;</a></h4>\n<p>Forces ClickHouse to send data to cluster nodes synchronously. If any nodes are unavailable, ClickHouse throws an exception and stops query execution. You can retry the query until it succeeds, which will happen when all nodes are back online.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SYSTEM</span> <span class=\"n\">FLUSH</span> <span class=\"n\">DISTRIBUTED</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"o\">&lt;</span><span class=\"n\">distributed_table_name</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"query_language-system-start-distributed-sends\">START DISTRIBUTED SENDS<a class=\"headerlink\" href=\"#query_language-system-start-distributed-sends\" title=\"Permanent link\">&para;</a></h4>\n<p>Enables background data distribution when inserting data into distributed tables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SYSTEM</span> <span class=\"k\">START</span> <span class=\"n\">DISTRIBUTED</span> <span class=\"n\">SENDS</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"o\">&lt;</span><span class=\"n\">distri");
            
            document.write("buted_table_name</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n\n\n<p><a name=\"query_language/misc/\"></a><a name=\"../../query_language/misc/\"></a><a name=\"../../../query_language/misc/\"></a><a name=\"../../../../query_language/misc/\"></a><a name=\"misc/\"></a><a name=\"../query_language/misc/\"></a><a name=\"../../../../../query_language/misc/\"></a></p>\n<h2 id=\"miscellaneous-queries\">Miscellaneous Queries<a class=\"headerlink\" href=\"#miscellaneous-queries\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"attach\">ATTACH<a class=\"headerlink\" href=\"#attach\" title=\"Permanent link\">&para;</a></h3>\n<p>This query is exactly the same as <code>CREATE</code>, but</p>\n<ul>\n<li>Instead of the word <code>CREATE</code> it uses the word <code>ATTACH</code>.</li>\n<li>The query does not create data on the disk, but assumes that data is already in the appropriate places, and just adds information about the table to the server.<br />\nAfter executing an ATTACH query, the server will know about the existence of the table.</li>\n</ul>\n<p>If the table was previously detached (<code>DETACH</code>), meaning that its structure is known, you can use shorthand without defining the structure.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ATTACH</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">NOT</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This query is used when starting the server. The server stores table metadata as files with <code>ATTACH</code> queries, which it simply runs at launch (with the exception of system tables, which are explicitly created on the server).</p>\n<h3 id=\"check-table\">CHECK TABLE<a class=\"headerlink\" href=\"#check-table\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks if the data in the table is corrupted.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CHECK</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span>\n</code></pre></div>\n\n\n<p>The <code>CHECK TABLE</code> query compares actual file sizes with the expected values which are stored on the server. If the file sizes do not match the stored values, it means the data is corrupted. This can be caused, for example, by a system crash during query execution.</p>\n<p>The query response contains the <code>result</code> column with a single row. The row has a value of<br />\n<a href=\"#../data_types/boolean/\">Boolean</a> type:</p>\n<ul>\n<li>0 - The data in the table is corrupted.</li>\n<li>1 - The data maintains integrity.</li>\n</ul>\n<p>The <code>CHECK TABLE</code> query supports the following table engines:</p>\n<ul>\n<li><a href=\"#../operations/table_engines/log/\">Log</a></li>\n<li><a href=\"#../operations/table_engines/tinylog/\">TinyLog</a></li>\n<li><a href=\"#../operations/table_engines/stripelog/\">StripeLog</a></li>\n<li><a href=\"#../operations/table_engines/mergetree/\">MergeTree family</a></li>\n</ul>\n<p>Performed over the tables with another table engines causes an exception.</p>\n<p>Engines from the <code>*Log</code> family don't provide automatic data recovery on failure. Use the <code>CHECK TABLE</code> query to track data loss in a timely manner.</p>\n<p>For <code>MergeTree</code> family engines, the <code>CHECK TABLE</code> query shows a check status for every individual data part of a table on the local server.</p>\n<p><strong>If the data is corrupted</strong></p>\n<p>If the table is corrupted, you can copy the non-corrupted data to another table. To do this:</p>\n<ol>\n<li>Create a new table with the same structure as damaged table. To do this execute the query <code>CREATE TABLE &lt;new_table_name&gt; AS &lt;damaged_table_name&gt;</code>.</li>\n<li>Set the <a href=\"#settings-max_threads\">max_threads</a> value to 1 to process the next query in a single thread. To do this run the query <code>SET max_threads = 1</code>.</li>\n<li>Execute the query <code>INSERT INTO &lt;new_table_name&gt; SELECT * FROM &lt;damaged_table_name&gt;</code>. This request copies the non-corrupted data from the damaged table to another table. Only the data before the corrupted part will be copied.</li>\n<li>Restart the <code>clickhouse-client</code> to reset the <code>max_threads</code> value.</li>\n</ol>\n<h3 id=\"misc-describe-table\">DESCRIBE TABLE<a class=\"headerlink\" href=\"#misc-describe-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DESC</span><span class=\"o\">|</span><span class=\"k\">DESCRIBE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Returns the following <code>String</code> type columns:</p>\n<ul>\n<li><code>name</code> \u2014 Column name.</li>\n<li><code>type</code>\u2014 Column type.</li>\n<li><code>default_type</code> \u2014 Clause that is used in <a href=\"#create-default-values\">default expression</a> (<code>DEFAULT</code>, <code>MATERIALIZED</code> or <code>ALIAS</code>). Column contains an empty string, if the default expression isn't specified.</li>\n<li><code>default_expression</code> \u2014 Value specified in the <code>DEFAULT</code> clause.</li>\n<li><code>comment_expression</code> \u2014 Comment text.</li>\n</ul>\n<p>Nested data structures are output in \"expanded\" format. Each column is shown separately, with the name after a dot.</p>\n<h3 id=\"detach\">DETACH<a class=\"headerlink\" href=\"#detach\" title=\"Permanent link\">&para;</a></h3>\n<p>Deletes information about the 'name' table from the server. The server stops knowing about the table's existence.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">DETACH</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This does not delete the table's data or metadata. On the next server launch, the server will read the metadata and find out about the table again.<br />\nSimilarly, a \"detached\" table can be re-attached using the <code>ATTACH</code> query (with the exception of system tables, which do not have metadata stored for them).</p>\n<p>There is no <code>DETACH DATABASE</code> query.</p>\n<h3 id=\"drop\">DROP<a class=\"headerlink\" href=\"#drop\" title=\"Permanent link\">&para;</a></h3>\n<p>This query has two types: <code>DROP DATABASE</code> and <code>DROP TABLE</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"k\">DATABASE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"n\">db</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Deletes all tables inside the 'db' database, then deletes the 'db' database itself.<br />\nIf <code>IF EXISTS</code> is specified, it doesn't return an error if the database doesn't exist.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">DROP</span> <span class=\"p\">[</span><span class=\"k\">TEMPORARY</span><span class=\"p\">]</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Deletes the table.<br />\nIf <code>IF EXISTS</code> is specified, it doesn't return an error if the table doesn't exist or the database doesn't exist.</p>\n<h3 id=\"exists\">EXISTS<a class=\"headerlink\" href=\"#exists\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">EXISTS</span> <span class=\"p\">[</span><span class=\"k\">TEMPORARY</span><span class=\"p\">]</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Returns a single <code>UInt8</code>-type column, which contains the single value <code>0</code> if the table or database doesn't exist, or <code>1</code> if the table exists in the specified database.</p>\n<h3 id=\"kill-query\">KILL QUERY<a class=\"headerlink\" href=\"#kill-query\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">KILL</span> <span class=\"n\">QUERY</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n  <span class=\"k\">WHERE</span> <span class=\"o\">&lt;</span><span class=\"k\">where</span> <span class=\"n\">expression</span> <span class=\"k\">to</span> <span class=\"k\">SELECT</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">processes</span> <span class=\"n\">query</span><span class=\"o\">&gt;</span>\n  <span class=\"p\">[</span><span class=\"n\">SYNC</span><span class=\"o\">|</span><span class=\"n\">ASYNC</span><span class=\"o\">|</span><span class=\"n\">TEST</span><span class=\"p\">]</span>\n  <span class=\"p\">[</span><span clas");
            
            document.write("s=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Attempts to forcibly terminate the currently running queries.<br />\nThe queries to terminate are selected from the system.processes table using the criteria defined in the <code>WHERE</code> clause of the <code>KILL</code> query.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- Forcibly terminates all queries with the specified query_id:</span>\n<span class=\"n\">KILL</span> <span class=\"n\">QUERY</span> <span class=\"k\">WHERE</span> <span class=\"n\">query_id</span><span class=\"o\">=</span><span class=\"s1\">&#39;2-857d-4a57-9ee0-327da5d60a90&#39;</span>\n\n<span class=\"c1\">-- Synchronously terminates all queries run by &#39;username&#39;:</span>\n<span class=\"n\">KILL</span> <span class=\"n\">QUERY</span> <span class=\"k\">WHERE</span> <span class=\"k\">user</span><span class=\"o\">=</span><span class=\"s1\">&#39;username&#39;</span> <span class=\"n\">SYNC</span>\n</code></pre></div>\n\n\n<p>Read-only users can only stop their own queries.</p>\n<p>By default, the asynchronous version of queries is used (<code>ASYNC</code>), which doesn't wait for confirmation that queries have stopped.</p>\n<p>The synchronous version (<code>SYNC</code>) waits for all queries to stop and displays information about each process as it stops.<br />\nThe response contains the <code>kill_status</code> column, which can take the following values:</p>\n<ol>\n<li>'finished' \u2013 The query was terminated successfully.</li>\n<li>'waiting' \u2013 Waiting for the query to end after sending it a signal to terminate.</li>\n<li>The other values \u200b\u200bexplain why the query can't be stopped.</li>\n</ol>\n<p>A test query (<code>TEST</code>) only checks the user's rights and displays a list of queries to stop.</p>\n<h3 id=\"kill-mutation\">KILL MUTATION<a class=\"headerlink\" href=\"#kill-mutation\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">KILL</span> <span class=\"n\">MUTATION</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n  <span class=\"k\">WHERE</span> <span class=\"o\">&lt;</span><span class=\"k\">where</span> <span class=\"n\">expression</span> <span class=\"k\">to</span> <span class=\"k\">SELECT</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">mutations</span> <span class=\"n\">query</span><span class=\"o\">&gt;</span>\n  <span class=\"p\">[</span><span class=\"n\">TEST</span><span class=\"p\">]</span>\n  <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Tries to cancel and remove <a href=\"#alter-mutations\">mutations</a> that are currently executing. Mutations to cancel are selected from the <a href=\"#system_tables-mutations\"><code>system.mutations</code></a> table using the filter specified by the <code>WHERE</code> clause of the <code>KILL</code> query.</p>\n<p>A test query (<code>TEST</code>) only checks the user's rights and displays a list of queries to stop.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- Cancel and remove all mutations of the single table:</span>\n<span class=\"n\">KILL</span> <span class=\"n\">MUTATION</span> <span class=\"k\">WHERE</span> <span class=\"k\">database</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;default&#39;</span> <span class=\"k\">AND</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;table&#39;</span>\n\n<span class=\"c1\">-- Cancel the specific mutation:</span>\n<span class=\"n\">KILL</span> <span class=\"n\">MUTATION</span> <span class=\"k\">WHERE</span> <span class=\"k\">database</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;default&#39;</span> <span class=\"k\">AND</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;table&#39;</span> <span class=\"k\">AND</span> <span class=\"n\">mutation_id</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;mutation_3.txt&#39;</span>\n</code></pre></div>\n\n\n<p>The query is useful when a mutation is stuck and cannot finish (e.g. if some function in the mutation query throws an exception when applied to the data contained in the table).</p>\n<p>Changes already made by the mutation are not rolled back.</p>\n<h3 id=\"misc_operations-optimize\">OPTIMIZE<a class=\"headerlink\" href=\"#misc_operations-optimize\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">OPTIMIZE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">PARTITION</span> <span class=\"n\">partition</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">FINAL</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>This query tries to initialize an unscheduled merge of data parts for tables with a table engine from the <a href=\"#../operations/table_engines/mergetree/\">MergeTree</a> family. Other kinds of table engines aren't supported.</p>\n<p>When <code>OPTIMIZE</code> is used with the <a href=\"#../operations/table_engines/replication/\">ReplicatedMergeTree</a> family of table engines, ClickHouse creates a task for merging and waits for execution on all nodes (if the <code>replication_alter_partitions_sync</code> setting is enabled).</p>\n<ul>\n<li>If <code>OPTIMIZE</code> doesn't perform a merge for any reason, it doesn't notify the client. To enable notifications, use the <a href=\"#setting-optimize_throw_if_noop\">optimize_throw_if_noop</a> setting.</li>\n<li>If you specify a <code>PARTITION</code>, only the specified partition is optimized.</li>\n<li>If you specify <code>FINAL</code>, optimization is performed even when all the data is already in one part.</li>\n</ul>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p><code>OPTIMIZE</code> can't fix the \"Too many parts\" error.</p>\n</div>\n<h3 id=\"misc_operations-rename\">RENAME<a class=\"headerlink\" href=\"#misc_operations-rename\" title=\"Permanent link\">&para;</a></h3>\n<p>Renames one or more tables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">RENAME</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db11</span><span class=\"p\">.]</span><span class=\"n\">name11</span> <span class=\"k\">TO</span> <span class=\"p\">[</span><span class=\"n\">db12</span><span class=\"p\">.]</span><span class=\"n\">name12</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">db21</span><span class=\"p\">.]</span><span class=\"n\">name21</span> <span class=\"k\">TO</span> <span class=\"p\">[</span><span class=\"n\">db22</span><span class=\"p\">.]</span><span class=\"n\">name22</span><span class=\"p\">,</span> <span class=\"p\">...</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>All tables are renamed under global locking. Renaming tables is a light operation. If you indicated another database after TO, the table will be moved to this database. However, the directories with databases must reside in the same file system (otherwise, an error is returned).</p>\n<h3 id=\"query-set\">SET<a class=\"headerlink\" href=\"#query-set\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">param</span> <span class=\"o\">=</span> <span class=\"n\">value</span>\n</code></pre></div>\n\n\n<p>Assigns <code>value</code> to the <code>param</code> <a href=\"#../operations/settings/\">setting</a> for the current session. You cannot change <a href=\"#../operations/server_settings/\">server settings</a> this way.</p>\n<p>You can also set all the values from the specified settings profile in a single query.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">profile</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;profile-name-from-the-settings-file&#39;</span>\n</code></pre></div>\n\n\n<p>For more information, see <a href=\"#../operations/settings/settings/\">Settings</a>.</p>\n<h3 id=\"show-create-table\">SHOW CREATE TABLE<a class=\"headerlink\" href=\"#show-create-table\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"k\">CREATE</span> <span class=\"p\">[</span><span class=\"k\">TEMPORARY</span><span class=\"p\">]</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"k\">table</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Returns a single <code>String</code>-type 'statement' column, which contains a single value \u2013 the <code>CREATE</code> query used for creating the specified table.</p>\n<h3 id=\"show-databases\">SHOW DATABASES<a class=\"headerlink\" href=\"#show-databases\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"n\">DATABASES</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Prints a list of all databases.<br />\nThis query is identical to <code>SELECT name FROM system.databases [INTO OUTFILE filename] [FORMAT format]</code>.</p>\n<p>See also the section \"Formats\".</p>\n<h3 id=\"show-processlist\">SHOW PROCESSLIST<a class=\"headerlink\" href=\"#show-processlist\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"n\">PROCESSLIST</span> <span class=\"p\">[</span><span class=\"k\">INTO</span");
            
            document.write("> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Outputs a list of queries currently being processed, other than <code>SHOW PROCESSLIST</code> queries.</p>\n<p>Prints a table containing the columns:</p>\n<p><strong>user</strong> \u2013 The user who made the query. Keep in mind that for distributed processing, queries are sent to remote servers under the 'default' user. SHOW PROCESSLIST shows the username for a specific query, not for a query that this query initiated.</p>\n<p><strong>address</strong> \u2013 The name of the host that the query was sent from. For distributed processing, on remote servers, this is the name of the query requestor host. To track where a distributed query was originally made from, look at SHOW PROCESSLIST on the query requestor server.</p>\n<p><strong>elapsed</strong> \u2013 The execution time, in seconds. Queries are output in order of decreasing execution time.</p>\n<p><strong>rows_read</strong>, <strong>bytes_read</strong> \u2013 How many rows and bytes of uncompressed data were read when processing the query. For distributed processing, data is totaled from all the remote servers. This is the data used for restrictions and quotas.</p>\n<p><strong>memory_usage</strong> \u2013 Current RAM usage in bytes. See the setting 'max_memory_usage'.</p>\n<p><strong>query</strong> \u2013 The query itself. In INSERT queries, the data for insertion is not output.</p>\n<p><strong>query_id</strong> \u2013 The query identifier. Non-empty only if it was explicitly defined by the user. For distributed processing, the query ID is not passed to remote servers.</p>\n<p>This query is nearly identical to: <code>SELECT * FROM system.processes</code>. The difference is that the <code>SHOW PROCESSLIST</code> query does not show itself in a list, when the <code>SELECT .. FROM system.processes</code> query does.</p>\n<p>Tip (execute in the console):</p>\n<div class=\"codehilite\"><pre><span></span><code>$ watch -n1 <span class=\"s2\">&quot;clickhouse-client --query=&#39;SHOW PROCESSLIST&#39;&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"show-tables\">SHOW TABLES<a class=\"headerlink\" href=\"#show-tables\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"p\">[</span><span class=\"k\">TEMPORARY</span><span class=\"p\">]</span> <span class=\"n\">TABLES</span> <span class=\"p\">[</span><span class=\"k\">FROM</span> <span class=\"n\">db</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">LIKE</span> <span class=\"s1\">&#39;pattern&#39;</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"k\">INTO</span> <span class=\"n\">OUTFILE</span> <span class=\"n\">filename</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">FORMAT</span> <span class=\"n\">format</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Displays a list of tables</p>\n<ul>\n<li>Tables from the current database, or from the 'db' database if \"FROM db\" is specified.</li>\n<li>All tables, or tables whose name matches the pattern, if \"LIKE 'pattern'\" is specified.</li>\n</ul>\n<p>This query is identical to: <code>SELECT name FROM system.tables WHERE database = 'db' [AND name LIKE 'pattern'] [INTO OUTFILE filename] [FORMAT format]</code>.</p>\n<p>See also the section \"LIKE operator\".</p>\n<h3 id=\"truncate\">TRUNCATE<a class=\"headerlink\" href=\"#truncate\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">TRUNCATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">[</span><span class=\"k\">IF</span> <span class=\"k\">EXISTS</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">db</span><span class=\"p\">.]</span><span class=\"n\">name</span> <span class=\"p\">[</span><span class=\"k\">ON</span> <span class=\"k\">CLUSTER</span> <span class=\"k\">cluster</span><span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>Removes all data from a table. When the clause <code>IF EXISTS</code> is omitted, the query returns an error if the table does not exist.</p>\n<p>The <code>TRUNCATE</code> query is not supported for <a href=\"#../operations/table_engines/view/\">View</a>, <a href=\"#../operations/table_engines/file/\">File</a>, <a href=\"#../operations/table_engines/url/\">URL</a> and <a href=\"#../operations/table_engines/null/\">Null</a> table engines.</p>\n<h3 id=\"use\">USE<a class=\"headerlink\" href=\"#use\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">USE</span> <span class=\"n\">db</span>\n</code></pre></div>\n\n\n<p>Lets you set the current database for the session.<br />\nThe current database is used for searching for tables if the database is not explicitly defined in the query with a dot before the table name.<br />\nThis query can't be made when using the HTTP protocol, since there is no concept of a session.</p>\n<p><a name=\"../../../../../query_language/functions/\"></a><a name=\"../../../../query_language/functions/\"></a><a name=\"query_language/functions/\"></a><a name=\"../../../query_language/functions/\"></a><a name=\"functions/\"></a><a name=\"../query_language/functions/\"></a><a name=\"../../query_language/functions/\"></a></p>\n<h2 id=\"functions\">Functions<a class=\"headerlink\" href=\"#functions\" title=\"Permanent link\">&para;</a></h2>\n<p>There are at least* two types of functions - regular functions (they are just called \"functions\") and aggregate functions. These are completely different concepts. Regular functions work as if they are applied to each row separately (for each row, the result of the function doesn't depend on the other rows). Aggregate functions accumulate a set of values from various rows (i.e. they depend on the entire set of rows).</p>\n<p>In this section we discuss regular functions. For aggregate functions, see the section \"Aggregate functions\".</p>\n<p>* - There is a third type of function that the 'arrayJoin' function belongs to; table functions can also be mentioned separately.*</p>\n<h3 id=\"strong-typing\">Strong typing<a class=\"headerlink\" href=\"#strong-typing\" title=\"Permanent link\">&para;</a></h3>\n<p>In contrast to standard SQL, ClickHouse has strong typing. In other words, it doesn't make implicit conversions between types. Each function works for a specific set of types. This means that sometimes you need to use type conversion functions.</p>\n<h3 id=\"common-subexpression-elimination\">Common subexpression elimination<a class=\"headerlink\" href=\"#common-subexpression-elimination\" title=\"Permanent link\">&para;</a></h3>\n<p>All expressions in a query that have the same AST (the same record or same result of syntactic parsing) are considered to have identical values. Such expressions are concatenated and executed once. Identical subqueries are also eliminated this way.</p>\n<h3 id=\"types-of-results\">Types of results<a class=\"headerlink\" href=\"#types-of-results\" title=\"Permanent link\">&para;</a></h3>\n<p>All functions return a single return as the result (not several values, and not zero values). The type of result is usually defined only by the types of arguments, not by the values. Exceptions are the tupleElement function (the a.N operator), and the toFixedString function.</p>\n<h3 id=\"constants\">Constants<a class=\"headerlink\" href=\"#constants\" title=\"Permanent link\">&para;</a></h3>\n<p>For simplicity, certain functions can only work with constants for some arguments. For example, the right argument of the LIKE operator must be a constant.<br />\nAlmost all functions return a constant for constant arguments. The exception is functions that generate random numbers.<br />\nThe 'now' function returns different values for queries that were run at different times, but the result is considered a constant, since constancy is only important within a single query.<br />\nA constant expression is also considered a constant (for example, the right half of the LIKE operator can be constructed from multiple constants).</p>\n<p>Functions can be implemented in different ways for constant and non-constant arguments (different code is executed). But the results for a constant and for a true column containing only the same value should match each other.</p>\n<h3 id=\"null-processing\">NULL processing<a class=\"headerlink\" href=\"#null-processing\" title=\"Permanent link\">&para;</a></h3>\n<p>Functions have the following behaviors:</p>\n<ul>\n<li>If at least one of the arguments of the function is <code>NULL</code>, the function result is also <code>NULL</code>.</li>\n<li>Special behavior that is specified individually in the description of each function. In the ClickHouse source code, these functions have <code>UseDefaultImplementationForNulls=false</code>.</li>\n</ul>\n<h3 id=\"constancy\">Constancy<a class=\"headerlink\" href=\"#constancy\" title=\"Permanent link\">&para;</a></h3>\n<p>Functions can't change the values of their arguments \u2013 any changes are returned as the result. Thus, the result of calculating separate functions does not depend on the order in which the functions are written in the query.</p>\n<h3 id=\"error-handling\">Error handling<a class=\"headerlink\" href=\"#error-handling\" title=\"Permanent link\">&para;</a></h3>\n<p>Some functions might throw an exception if the data is invalid. In this case, the query is canceled and an error text is returned to the client. For distributed processing, when an exception occurs on one of the servers, the other servers also attempt to abort the query.</p>\n<h3 id=\"evaluation-of-argument-expressions\">Evaluation of argument expressions<a class=\"headerlink\" href=\"#evaluation-of-argument-expressions\" title=\"Permanent link\">&para;</a></h3>\n<p>In almost all programming languages, one of the arguments might not be evaluated for certain operators. This is usually the operators <code>&amp;&amp;</code>, <code>||</code>, and <code>?:</code>.<br />\nBut in ClickHouse, arguments of functions (operators) are always evaluated. This is because entire parts of columns are evaluated at once, instead of calculating each row separately.</p>\n<h3 id=\"performing-functions-for-distributed-query-processing\">Performing functions for distributed query processing<a class=\"headerlink\" href=\"#performing-");
            
            document.write("functions-for-distributed-query-processing\" title=\"Permanent link\">&para;</a></h3>\n<p>For distributed query processing, as many stages of query processing as possible are performed on remote servers, and the rest of the stages (merging intermediate results and everything after that) are performed on the requestor server.</p>\n<p>This means that functions can be performed on different servers.<br />\nFor example, in the query <code>SELECT f(sum(g(x))) FROM distributed_table GROUP BY h(y),</code></p>\n<ul>\n<li>if a <code>distributed_table</code> has at least two shards, the functions 'g' and 'h' are performed on remote servers, and the function 'f' is performed on the requestor server.</li>\n<li>if a <code>distributed_table</code> has only one shard, all the 'f', 'g', and 'h' functions are performed on this shard's server.</li>\n</ul>\n<p>The result of a function usually doesn't depend on which server it is performed on. However, sometimes this is important.<br />\nFor example, functions that work with dictionaries use the dictionary that exists on the server they are running on.<br />\nAnother example is the <code>hostName</code> function, which returns the name of the server it is running on in order to make <code>GROUP BY</code> by servers in a <code>SELECT</code> query.</p>\n<p>If a function in a query is performed on the requestor server, but you need to perform it on remote servers, you can wrap it in an 'any' aggregate function or add it to a key in <code>GROUP BY</code>.</p>\n<p><a name=\"../../../functions/arithmetic_functions/\"></a><a name=\"../../query_language/functions/arithmetic_functions/\"></a><a name=\"../../../../../query_language/functions/arithmetic_functions/\"></a><a name=\"arithmetic_functions/\"></a><a name=\"../functions/arithmetic_functions/\"></a><a name=\"../../../../functions/arithmetic_functions/\"></a><a name=\"../../../query_language/functions/arithmetic_functions/\"></a><a name=\"query_language/functions/arithmetic_functions/\"></a><a name=\"../../functions/arithmetic_functions/\"></a><a name=\"../../../../../functions/arithmetic_functions/\"></a><a name=\"functions/arithmetic_functions/\"></a><a name=\"../../../../query_language/functions/arithmetic_functions/\"></a><a name=\"../../../../../../functions/arithmetic_functions/\"></a><a name=\"../query_language/functions/arithmetic_functions/\"></a></p>\n<h2 id=\"arithmetic-functions\">Arithmetic functions<a class=\"headerlink\" href=\"#arithmetic-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>For all arithmetic functions, the result type is calculated as the smallest number type that the result fits in, if there is such a type. The minimum is taken simultaneously based on the number of bits, whether it is signed, and whether it floats. If there are not enough bits, the highest bit type is taken.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(0)\u2500\u252c\u2500toTypeName(plus(0, 0))\u2500\u252c\u2500toTypeName(plus(plus(0, 0), 0))\u2500\u252c\u2500toTypeName(plus(plus(plus(0, 0), 0), 0))\u2500\u2510\n\u2502 UInt8         \u2502 UInt16                 \u2502 UInt32                          \u2502 UInt64                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Arithmetic functions work for any pair of types from UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64, Float32, or Float64.</p>\n<p>Overflow is produced the same way as in C++.</p>\n<h3 id=\"plus-a-b-a-b-operator\">plus(a, b), a + b operator<a class=\"headerlink\" href=\"#plus-a-b-a-b-operator\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the sum of the numbers.<br />\nYou can also add integer numbers with a date or date and time. In the case of a date, adding an integer means adding the corresponding number of days. For a date with time, it means adding the corresponding number of seconds.</p>\n<h3 id=\"minus-a-b-a-b-operator\">minus(a, b), a - b operator<a class=\"headerlink\" href=\"#minus-a-b-a-b-operator\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the difference. The result is always signed.</p>\n<p>You can also calculate integer numbers from a date or date with time. The idea is the same \u2013 see above for 'plus'.</p>\n<h3 id=\"multiply-a-b-a-b-operator\">multiply(a, b), a * b operator<a class=\"headerlink\" href=\"#multiply-a-b-a-b-operator\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the product of the numbers.</p>\n<h3 id=\"divide-a-b-a-b-operator\">divide(a, b), a / b operator<a class=\"headerlink\" href=\"#divide-a-b-a-b-operator\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the quotient of the numbers. The result type is always a floating-point type.<br />\nIt is not integer division. For integer division, use the 'intDiv' function.<br />\nWhen dividing by zero you get 'inf', '-inf', or 'nan'.</p>\n<h3 id=\"intdiv-a-b\">intDiv(a, b)<a class=\"headerlink\" href=\"#intdiv-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the quotient of the numbers. Divides into integers, rounding down (by the absolute value).<br />\nAn exception is thrown when dividing by zero or when dividing a minimal negative number by minus one.</p>\n<h3 id=\"intdivorzero-a-b\">intDivOrZero(a, b)<a class=\"headerlink\" href=\"#intdivorzero-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from 'intDiv' in that it returns zero when dividing by zero or when dividing a minimal negative number by minus one.</p>\n<h3 id=\"modulo-a-b-a-b-operator\">modulo(a, b), a % b operator<a class=\"headerlink\" href=\"#modulo-a-b-a-b-operator\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the remainder after division.<br />\nIf arguments are floating-point numbers, they are pre-converted to integers by dropping the decimal portion.<br />\nThe remainder is taken in the same sense as in C++. Truncated division is used for negative numbers.<br />\nAn exception is thrown when dividing by zero or when dividing a minimal negative number by minus one.</p>\n<h3 id=\"negate-a-a-operator\">negate(a), -a operator<a class=\"headerlink\" href=\"#negate-a-a-operator\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates a number with the reverse sign. The result is always signed.</p>\n<h3 id=\"arithm_func-abs\">abs(a)<a class=\"headerlink\" href=\"#arithm_func-abs\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the absolute value of the number (a). That is, if a &lt; 0, it returns -a. For unsigned types it doesn't do anything. For signed integer types, it returns an unsigned number.</p>\n<h3 id=\"gcd-a-b\">gcd(a, b)<a class=\"headerlink\" href=\"#gcd-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the greatest common divisor of the numbers.<br />\nAn exception is thrown when dividing by zero or when dividing a minimal negative number by minus one.</p>\n<h3 id=\"lcm-a-b\">lcm(a, b)<a class=\"headerlink\" href=\"#lcm-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the least common multiple of the numbers.<br />\nAn exception is thrown when dividing by zero or when dividing a minimal negative number by minus one.</p>\n<p><a name=\"query_language/functions/comparison_functions/\"></a><a name=\"../../../../../query_language/functions/comparison_functions/\"></a><a name=\"../../../query_language/functions/comparison_functions/\"></a><a name=\"../../../../../functions/comparison_functions/\"></a><a name=\"../functions/comparison_functions/\"></a><a name=\"../query_language/functions/comparison_functions/\"></a><a name=\"../../query_language/functions/comparison_functions/\"></a><a name=\"../../../../../../functions/comparison_functions/\"></a><a name=\"../../../functions/comparison_functions/\"></a><a name=\"../../../../functions/comparison_functions/\"></a><a name=\"../../functions/comparison_functions/\"></a><a name=\"../../../../query_language/functions/comparison_functions/\"></a><a name=\"comparison_functions/\"></a><a name=\"functions/comparison_functions/\"></a></p>\n<h2 id=\"comparison-functions\">Comparison functions<a class=\"headerlink\" href=\"#comparison-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Comparison functions always return 0 or 1 (Uint8).</p>\n<p>The following types can be compared:</p>\n<ul>\n<li>numbers</li>\n<li>strings and fixed strings</li>\n<li>dates</li>\n<li>dates with times</li>\n</ul>\n<p>within each group, but not between different groups.</p>\n<p>For example, you can't compare a date with a string. You have to use a function to convert the string to a date, or vice versa.</p>\n<p>Strings are compared by bytes. A shorter string is smaller than all strings that start with it and that contain at least one more character.</p>\n<p>Note. Up until version 1.1.54134, signed and unsigned numbers were compared the same way as in C++. In other words, you could get an incorrect result in cases like SELECT 9223372036854775807 &gt; -1. This behavior changed in version 1.1.54134 and is now mathematically correct.</p>\n<h3 id=\"function-equals\">equals, a = b and a == b operator<a class=\"headerlink\" href=\"#function-equals\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"function-notequals\">notEquals, a ! operator= b and a <code>&lt;&gt;</code> b<a class=\"headerlink\" href=\"#function-notequals\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"function-less\">less, <code>&lt; operator</code><a class=\"headerlink\" href=\"#function-less\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"function-greater\">greater, <code>&gt; operator</code><a class=\"headerlink\" href=\"#function-greater\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"func");
            
            document.write("tion-lessorequals\">lessOrEquals, <code>&lt;= operator</code><a class=\"headerlink\" href=\"#function-lessorequals\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"function-greaterorequals\">greaterOrEquals, <code>&gt;= operator</code><a class=\"headerlink\" href=\"#function-greaterorequals\" title=\"Permanent link\">&para;</a></h3>\n<p><a name=\"../../query_language/functions/logical_functions/\"></a><a name=\"../functions/logical_functions/\"></a><a name=\"query_language/functions/logical_functions/\"></a><a name=\"../../../query_language/functions/logical_functions/\"></a><a name=\"../../../../../query_language/functions/logical_functions/\"></a><a name=\"../../../../../../functions/logical_functions/\"></a><a name=\"../../../../../functions/logical_functions/\"></a><a name=\"functions/logical_functions/\"></a><a name=\"../../../../query_language/functions/logical_functions/\"></a><a name=\"../../../../functions/logical_functions/\"></a><a name=\"../query_language/functions/logical_functions/\"></a><a name=\"../../../functions/logical_functions/\"></a><a name=\"logical_functions/\"></a><a name=\"../../functions/logical_functions/\"></a></p>\n<h2 id=\"logical-functions\">Logical functions<a class=\"headerlink\" href=\"#logical-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Logical functions accept any numeric types, but return a UInt8 number equal to 0 or 1.</p>\n<p>Zero as an argument is considered \"false,\" while any non-zero value is considered \"true\".</p>\n<h3 id=\"and-and-operator\">and, AND operator<a class=\"headerlink\" href=\"#and-and-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"or-or-operator\">or, OR operator<a class=\"headerlink\" href=\"#or-or-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"not-not-operator\">not, NOT operator<a class=\"headerlink\" href=\"#not-not-operator\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"xor\">xor<a class=\"headerlink\" href=\"#xor\" title=\"Permanent link\">&para;</a></h3>\n<p><a name=\"../../../../../query_language/functions/type_conversion_functions/\"></a><a name=\"../../../../../../functions/type_conversion_functions/\"></a><a name=\"../../../query_language/functions/type_conversion_functions/\"></a><a name=\"../query_language/functions/type_conversion_functions/\"></a><a name=\"../../functions/type_conversion_functions/\"></a><a name=\"../../query_language/functions/type_conversion_functions/\"></a><a name=\"../functions/type_conversion_functions/\"></a><a name=\"../../../../query_language/functions/type_conversion_functions/\"></a><a name=\"../../../../../functions/type_conversion_functions/\"></a><a name=\"../../../functions/type_conversion_functions/\"></a><a name=\"type_conversion_functions/\"></a><a name=\"query_language/functions/type_conversion_functions/\"></a><a name=\"../../../../functions/type_conversion_functions/\"></a><a name=\"functions/type_conversion_functions/\"></a></p>\n<h2 id=\"type-conversion-functions\">Type Conversion Functions<a class=\"headerlink\" href=\"#type-conversion-functions\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"toint-8-16-32-64\">toInt(8|16|32|64)<a class=\"headerlink\" href=\"#toint-8-16-32-64\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts an input value to the <a href=\"#../../data_types/int_uint/\">Int</a> data type. This functions family includes:</p>\n<ul>\n<li><code>toInt8(expr)</code> \u2014 Results in <code>Int8</code> data type.</li>\n<li><code>toInt16(expr)</code> \u2014 Results in <code>Int16</code> data type.</li>\n<li><code>toInt32(expr)</code> \u2014 Results in <code>Int32</code> data type.</li>\n<li><code>toInt64(expr)</code> \u2014 Results in <code>Int64</code> data type.</li>\n</ul>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number or a string with decimal representation of a number. Binary, octal, and hexadecimal representations of numbers are not supported. Leading zeroes are stripped.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>Integer value in <code>Int8</code>, <code>Int16</code>, <code>Int32</code> or <code>Int64</code> data type.</p>\n<p>Functions use <a href=\"https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero\" rel=\"external nofollow noreferrer\">rounding towards zero</a>, they truncate fraction digits of numbers.</p>\n<p>The behaviour of functions for the <a href=\"#data_type-float-nan-inf\">NaN and Inf</a> arguments is undefined.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toInt64</span><span class=\"p\">(</span><span class=\"n\">nan</span><span class=\"p\">),</span> <span class=\"n\">toInt32</span><span class=\"p\">(</span><span class=\"mi\">32</span><span class=\"p\">),</span> <span class=\"n\">toInt16</span><span class=\"p\">(</span><span class=\"s1\">&#39;16&#39;</span><span class=\"p\">),</span> <span class=\"n\">toInt8</span><span class=\"p\">(</span><span class=\"mi\">8</span><span class=\"p\">.</span><span class=\"mi\">8</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500toInt64(nan)\u2500\u252c\u2500toInt32(32)\u2500\u252c\u2500toInt16(&#39;16&#39;)\u2500\u252c\u2500toInt8(8.8)\u2500\u2510\n\u2502 -9223372036854775808 \u2502          32 \u2502            16 \u2502           8 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"toint-8-16-32-64-orzero\">toInt(8|16|32|64)OrZero<a class=\"headerlink\" href=\"#toint-8-16-32-64-orzero\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"toint-8-16-32-64-ornull\">toInt(8|16|32|64)OrNull<a class=\"headerlink\" href=\"#toint-8-16-32-64-ornull\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"touint-8-16-32-64\">toUInt(8|16|32|64)<a class=\"headerlink\" href=\"#touint-8-16-32-64\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts an input value to the <a href=\"#../../data_types/int_uint/\">UInt</a> data type. This functions family includes:</p>\n<ul>\n<li><code>toUInt8(expr)</code> \u2014 Results in <code>UInt8</code> data type.</li>\n<li><code>toUInt16(expr)</code> \u2014 Results in <code>UInt16</code> data type.</li>\n<li><code>toUInt32(expr)</code> \u2014 Results in <code>UInt32</code> data type.</li>\n<li><code>toUInt64(expr)</code> \u2014 Results in <code>UInt64</code> data type.</li>\n</ul>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number or a string with decimal representation of a number. Binary, octal, and hexadecimal representations of numbers are not supported. Leading zeroes are stripped.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>Integer value in <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code> or <code>UInt64</code> data type.</p>\n<p>Functions use <a href=\"https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero\" rel=\"external nofollow noreferrer\">rounding towards zero</a>, they truncate fraction digits of numbers.</p>\n<p>The behaviour of functions for negative agruments and for the <a href=\"#data_type-float-nan-inf\">NaN and Inf</a> arguments is undefined. If you pass the string with negative number, for example <code>'-32'</code>, ClickHouse rises an exception.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toUInt64</span><span class=\"p\">(</span><span class=\"n\">nan</span><span class=\"p\">),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">32</span><span class=\"p\">),</span> <span class=\"n\">toUInt16</span><span class=\"p\">(</span><span class=\"s1\">&#39;16&#39;</span><span class=\"p\">),</span> <span class=\"n\">toUInt8</span><span class=\"p\">(</span><span class=\"mi\">8</span><span class=\"p\">.</span><span class=\"mi\">8</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500toUInt64(nan)\u2500\u252c\u2500toUInt32(-32)\u2500\u252c\u2500toUInt16(&#39;16&#39;)\u2500\u252c\u2500toUInt8(8.8)\u2500\u2510\n\u2502 9223372036854775808 \u2502    4294967264 \u2502             16 \u2502            8 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"touint-8-16-32-64-orzero\">toUInt(8|16|32|64)OrZero<a class=\"headerlink\" href=\"#touint-8-16-32-64-orzero\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"touint-8-16-32-64-ornull\">toUInt(8|16|32|64)OrNull<a class=\"headerlink\" href=\"#touint-8-16-32-64-ornull\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"tofloat-32-64\">toFloat(32|64)<a class=\"headerlink\" href=\"#tofloat-32-64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"tofloat-32-64-orzero\">toFloat(32|64)OrZero<a class=\"headerlink\" href=\"#tofloat-32-64-orzero\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"tofloat-32-64-ornull\">toFloat(32|64)OrNull<a class=\"headerlink\" href=\"#tofloat-32-64-ornull\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"todate\">toDate<a class=\"headerlink\" href=\"#todate\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"todateorzero\">toDateOrZero<a class=\"headerlink\" href=\"#todateorzero\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"todateornull\">toDateOrNull<a class=\"headerlink\" href=\"#todateornull\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"todatetime\">toDateTime<a class=\"headerlink\" href=\"#todatetime\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"todatetimeorzero\">toDateTimeOrZero<a class=\"headerlink\" href=\"#todatetimeorzero\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"todatetimeornull\">toDateTimeOrNull<a class=\"headerlink\" href=\"#todatetimeornull\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"todecimal-32-64-128\">toDecimal(32|64|128)<a class=\"headerlink\" href=\"#todecimal-32-64-128\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts <code>value</code> to the <a href=\"#../../data_types/decimal/\">Decimal</a> data type with precision of <code>S</code>. The <code>value</code> can be a number or a string. The <code>S</code> (scale) parameter specifies the number of decimal places.</p>\n<ul>\n<li><code>toDecimal32(value, S)</code></li>\n<li><code>toDecimal64(value, S)</code></li>\n<li><code>toDecimal128(value, S)</code></li>\n</ul>\n<h3 id=\"todecimal-32-64-128-ornull\">toDecimal(32|64|128)OrNull<a class=\"headerlink\" href=\"#todecimal-32-64-128-ornull\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts an input string to a <a href=\"#../../data_types/decimal/\">Nullable(Decimal(P,S))</a> data type value. This family of functions include:</p>\n<ul>\n<li><code>toDecimal32OrNull(e");
            
            document.write("xpr, S)</code> \u2014 Results in <code>Nullable(Decimal32(S))</code> data type.</li>\n<li><code>toDecimal64OrNull(expr, S)</code> \u2014 Results in <code>Nullable(Decimal64(S))</code> data type.</li>\n<li><code>toDecimal128OrNull(expr, S)</code> \u2014 Results in <code>Nullable(Decimal128(S))</code> data type.</li>\n</ul>\n<p>These functions should be used instead of <code>toDecimal*()</code> functions, if you prefer to get a <code>NULL</code> value instead of an exception in the event of an input value parsing error.</p>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a>, returns a value in the <a href=\"#../../data_types/string/\">String</a> data type. ClickHouse expects the textual representation of the decimal number. For example, <code>'1.111'</code>.</li>\n<li><code>S</code> \u2014 Scale, the number of decimal places in the resulting value.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>A value in the <code>Nullable(Decimal(P,S))</code> data type. The value contains:</p>\n<ul>\n<li>Number with <code>S</code> decimal places, if ClickHouse interprets the input string as a number.</li>\n<li><code>NULL</code>, if ClickHouse can't interpret the input string as a number or if the input number contains more than <code>S</code> decimal places.</li>\n</ul>\n<p><strong>Examples</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32OrNull</span><span class=\"p\">(</span><span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">111</span><span class=\"p\">),</span> <span class=\"mi\">5</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">val</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500val\u2500\u252c\u2500toTypeName(toDecimal32OrNull(toString(-1.111), 5))\u2500\u2510\n\u2502 -1.11100 \u2502 Nullable(Decimal(9, 5))                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32OrNull</span><span class=\"p\">(</span><span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">111</span><span class=\"p\">),</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">val</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500val\u2500\u252c\u2500toTypeName(toDecimal32OrNull(toString(-1.111), 2))\u2500\u2510\n\u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502 Nullable(Decimal(9, 2))                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"todecimal-32-64-128-orzero\">toDecimal(32|64|128)OrZero<a class=\"headerlink\" href=\"#todecimal-32-64-128-orzero\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts an input value to the <a href=\"#../../data_types/decimal/\">Decimal(P,S)</a> data type. This family of functions include:</p>\n<ul>\n<li><code>toDecimal32OrZero( expr, S)</code> \u2014 Results in <code>Decimal32(S)</code> data type.</li>\n<li><code>toDecimal64OrZero( expr, S)</code> \u2014 Results in <code>Decimal64(S)</code> data type.</li>\n<li><code>toDecimal128OrZero( expr, S)</code> \u2014 Results in <code>Decimal128(S)</code> data type.</li>\n</ul>\n<p>These functions should be used instead of <code>toDecimal*()</code> functions, if you prefer to get a <code>0</code> value instead of an exception in the event of an input value parsing error.</p>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a>, returns a value in the <a href=\"#../../data_types/string/\">String</a> data type. ClickHouse expects the textual representation of the decimal number. For example, <code>'1.111'</code>.</li>\n<li><code>S</code> \u2014 Scale, the number of decimal places in the resulting value.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>A value in the <code>Nullable(Decimal(P,S))</code> data type. The value contains:</p>\n<ul>\n<li>Number with <code>S</code> decimal places, if ClickHouse interprets the input string as a number.</li>\n<li>0 with <code>S</code> decimal places, if ClickHouse can't interpret the input string as a number or if the input number contains more than <code>S</code> decimal places.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32OrZero</span><span class=\"p\">(</span><span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">111</span><span class=\"p\">),</span> <span class=\"mi\">5</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">val</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500val\u2500\u252c\u2500toTypeName(toDecimal32OrZero(toString(-1.111), 5))\u2500\u2510\n\u2502 -1.11100 \u2502 Decimal(9, 5)                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDecimal32OrZero</span><span class=\"p\">(</span><span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">111</span><span class=\"p\">),</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">val</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500val\u2500\u252c\u2500toTypeName(toDecimal32OrZero(toString(-1.111), 2))\u2500\u2510\n\u2502 0.00 \u2502 Decimal(9, 2)                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"tostring\">toString<a class=\"headerlink\" href=\"#tostring\" title=\"Permanent link\">&para;</a></h3>\n<p>Functions for converting between numbers, strings (but not fixed strings), dates, and dates with times.<br />\nAll these functions accept one argument.</p>\n<p>When converting to or from a string, the value is formatted or parsed using the same rules as for the TabSeparated format (and almost all other text formats). If the string can't be parsed, an exception is thrown and the request is canceled.</p>\n<p>When converting dates to numbers or vice versa, the date corresponds to the number of days since the beginning of the Unix epoch.<br />\nWhen converting dates with times to numbers or vice versa, the date with time corresponds to the number of seconds since the beginning of the Unix epoch.</p>\n<p>The date and date-with-time formats for the toDate/toDateTime functions are defined as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>YYYY-MM-DD\nYYYY-MM-DD hh:mm:ss\n</code></pre></div>\n\n\n<p>As an exception, if converting from UInt32, Int32, UInt64, or Int64 numeric types to Date, and if the number is greater than or equal to 65536, the number is interpreted as a Unix timestamp (and not as the number of days) and is rounded to the date. This allows support for the common occurrence of writing 'toDate(unix_timestamp)', which otherwise would be an error and would require writing the more cumbersome 'toDate(toDateTime(unix_timestamp))'.</p>\n<p>Conversion between a date and date with time is performed the natural way: by adding a null time or dropping the time.</p>\n<p>Conversion between numeric types uses the same rules as assignments between different numeric types in C++.</p>\n<p>Additionally, the toString function of the DateTime argument can take a second String argument containing the name of the time zone. Example: <code>Asia/Yekaterinburg</code> In this case, the time is formatted according to the specified time zone.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">now_local</span><span class=\"p\">,</span>\n    <span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">(),</span> <span class=\"s1\">&#39;Asia/Yekaterinburg&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">now_yekat</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500now_local\u2500\u252c\u2500now_yekat\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2016-06-15 00:11:21 \u2502 2016-06-15 02:11:21 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Also see the <code>toUnixTimestamp</code> function.</p>\n<h3 id=\"tofixedstring-s-n\">toFixedString(s, N)<a class=\"headerlink\" href=\"#tofixedstring-s-n\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a String type argument to a FixedString(N) type (a string with fixed length N). N must be a constant.<br />\nIf the string has fewer bytes than N, it is passed with null bytes to the right. If the string has more bytes than N, an exception is thrown.</p>\n<h3 id=\"tostringcuttozero-s\">toStringCutToZero(s)<a class=\"headerlink\" href=\"#tostringcuttozero-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a String or FixedString argument. Returns the String with the content truncated at the first zero byte found.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">toStringCutToZero</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"");
            
            document.write("n\">s_cut</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500s_cut\u2500\u2510\n\u2502 foo\\0\\0\\0\\0\\0 \u2502 foo   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo\\0bar&#39;</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">toStringCutToZero</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">s_cut</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500s_cut\u2500\u2510\n\u2502 foo\\0bar\\0 \u2502 foo   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"reinterpretasuint-8-16-32-64\">reinterpretAsUInt(8|16|32|64)<a class=\"headerlink\" href=\"#reinterpretasuint-8-16-32-64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"reinterpretasint-8-16-32-64\">reinterpretAsInt(8|16|32|64)<a class=\"headerlink\" href=\"#reinterpretasint-8-16-32-64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"reinterpretasfloat-32-64\">reinterpretAsFloat(32|64)<a class=\"headerlink\" href=\"#reinterpretasfloat-32-64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"reinterpretasdate\">reinterpretAsDate<a class=\"headerlink\" href=\"#reinterpretasdate\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"reinterpretasdatetime\">reinterpretAsDateTime<a class=\"headerlink\" href=\"#reinterpretasdatetime\" title=\"Permanent link\">&para;</a></h3>\n<p>These functions accept a string and interpret the bytes placed at the beginning of the string as a number in host order (little endian). If the string isn't long enough, the functions work as if the string is padded with the necessary number of null bytes. If the string is longer than needed, the extra bytes are ignored. A date is interpreted as the number of days since the beginning of the Unix Epoch, and a date with time is interpreted as the number of seconds since the beginning of the Unix Epoch.</p>\n<h3 id=\"type_conversion_functions-reinterpretAsString\">reinterpretAsString<a class=\"headerlink\" href=\"#type_conversion_functions-reinterpretAsString\" title=\"Permanent link\">&para;</a></h3>\n<p>This function accepts a number or date or date with time, and returns a string containing bytes representing the corresponding value in host order (little endian). Null bytes are dropped from the end. For example, a UInt32 type value of 255 is a string that is one byte long.</p>\n<h3 id=\"reinterpretasfixedstring\">reinterpretAsFixedString<a class=\"headerlink\" href=\"#reinterpretasfixedstring\" title=\"Permanent link\">&para;</a></h3>\n<p>This function accepts a number or date or date with time, and returns a FixedString containing bytes representing the corresponding value in host order (little endian). Null bytes are dropped from the end. For example, a UInt32 type value of 255 is a FixedString that is one byte long.</p>\n<h3 id=\"type_conversion_function-cast\">CAST(x, t)<a class=\"headerlink\" href=\"#type_conversion_function-cast\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts 'x' to the 't' data type. The syntax CAST(x AS t) is also supported.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"s1\">&#39;2016-06-15 23:00:00&#39;</span> <span class=\"k\">AS</span> <span class=\"k\">timestamp</span><span class=\"p\">,</span>\n    <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">timestamp</span> <span class=\"k\">AS</span> <span class=\"n\">DateTime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">datetime</span><span class=\"p\">,</span>\n    <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">timestamp</span> <span class=\"k\">AS</span> <span class=\"nb\">Date</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span>\n    <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"s1\">&#39;String&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">string</span><span class=\"p\">,</span>\n    <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"s1\">&#39;FixedString(22)&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">fixed_string</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500timestamp\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500datetime\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500date\u2500\u252c\u2500string\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500fixed_string\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2016-06-15 23:00:00 \u2502 2016-06-15 23:00:00 \u2502 2016-06-15 \u2502 2016-06-15 23:00:00 \u2502 2016-06-15 23:00:00\\0\\0\\0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Conversion to FixedString(N) only works for arguments of type String or FixedString(N).</p>\n<p>Type conversion to <a href=\"#../../data_types/nullable/\">Nullable</a> and back is supported. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(x)\u2500\u2510\n\u2502 Int8          \u2502\n\u2502 Int8          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Nullable(UInt16)&#39;</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(CAST(x, &#39;Nullable(UInt16)&#39;))\u2500\u2510\n\u2502 Nullable(UInt16)                        \u2502\n\u2502 Nullable(UInt16)                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"tointerval-year-quarter-month-week-day-hour-minute-second\">toInterval(Year|Quarter|Month|Week|Day|Hour|Minute|Second)<a class=\"headerlink\" href=\"#tointerval-year-quarter-month-week-day-hour-minute-second\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a Number type argument to a Interval type (duration).<br />\nThe interval type is actually very useful, you can use this type of data to perform arithmetic operations directly with Date or DateTime. At the same time, ClickHouse provides a more convenient syntax for declaring Interval type data. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span>\n    <span class=\"nb\">INTERVAL</span> <span class=\"mi\">1</span> <span class=\"n\">WEEK</span> <span class=\"k\">AS</span> <span class=\"n\">interval_week</span><span class=\"p\">,</span>\n    <span class=\"n\">toIntervalWeek</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">interval_to_week</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"nb\">date</span> <span class=\"o\">+</span> <span class=\"n\">interval_week</span><span class=\"p\">,</span>\n    <span class=\"nb\">date</span> <span class=\"o\">+</span> <span class=\"n\">interval_to_week</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500plus(date, interval_week)\u2500\u252c\u2500plus(date, interval_to_week)\u2500\u2510\n\u2502                2019-01-08 \u2502                   2019-01-08 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"type_conversion_functions-parsedatetimebesteffort\">parseDateTimeBestEffort<a class=\"headerlink\" href=\"#type_conversion_functions-parsedatetimebesteffort\" title=\"Permanent link\">&para;</a></h3>\n<p>Parse a number type argument to a Date or DateTime type.<br />\ndifferent from toDate and toDateTime, parseDateTimeBestEffort can progress more complex date format.<br />\nFor more information, see the link: <a href=\"https://xkcd.com/1179/\" rel=\"external nofollow noreferrer\">Complex Date Format</a></p>\n<h3 id=\"parsedatetimebesteffortornull\">parseDateTimeBestEffortOrNull<a class=\"headerlink\" href=\"#parsedatetimebesteffortornull\" title=\"Permanent link\">&para;</a></h3>\n<p>Same as for <a href=\"#type_conversion_functions-parsedatetimebesteffort\">parseDateTimeBestEffort</a> except that it returns null when it encounters a date format that cannot be processed.</p>\n<h3 id=\"parsedatetimebesteffortorzero\">parseDateTimeBestEffortOrZero<a class=\"headerlink\" href=\"#parsedatetimebesteffortorzero\" title=\"Permanent link\">&para;</a></h3>\n<p>Same as for <a href=\"#type_conversion_functions-parsedatetimebesteffort\">parseDateTimeBestEffort</a> except that it returns zero date or zero date time when it encounters a date format that cannot be processed.</p>\n<p><a name=\"../../../../functions/date_time_functions/\"></a><a name=\"../../../query_language/functions/date_time_functions/\"></a><a name=\"../../functions/date_time_functions/\"></a><a name=\"functions/date_time_functions/\"></a><a name=\"../../query_language/functions/date_time_functions/\"></a><a name=\"date_time_functions/\"></a><a name=\"../query_language/functions/date_time_functions/\"></a><a name=\"../../../../query_language/functions/date_time_functions/\"></a><a name=\"query_language/functions/date_time_functions/\"></a><a name=\"../../../../../functions/date_time_functions/\"></a><a name=\"../functions/date_time_functions/\"></a><a name=\"../../../functions/date_time_functions/\"></a><a name=\"../../../../../../functions/date_time_functions/\"></a><a name=\"../../../../../query_language/functions/date_time_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-dates-and-times\">Functions for working with dates and times<a class=\"headerlink\" href=\"#functions-for-working-with-dates-and-times\" title=\"Permanent link\">&para;</a></h2>\n<p>Support for time zones</p>\n<p>All functi");
            
            document.write("ons for working with the date and time that have a logical use for the time zone can accept a second optional time zone argument. Example: Asia/Yekaterinburg. In this case, they use the specified time zone instead of the local (default) one.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2016-06-15 23:00:00&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">time</span><span class=\"p\">,</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">date_local</span><span class=\"p\">,</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Asia/Yekaterinburg&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">date_yekat</span><span class=\"p\">,</span>\n    <span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"s1\">&#39;US/Samoa&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">time_samoa</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500time\u2500\u252c\u2500date_local\u2500\u252c\u2500date_yekat\u2500\u252c\u2500time_samoa\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2016-06-15 23:00:00 \u2502 2016-06-15 \u2502 2016-06-16 \u2502 2016-06-15 09:00:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Only time zones that differ from UTC by a whole number of hours are supported.</p>\n<h3 id=\"totimezone\">toTimeZone<a class=\"headerlink\" href=\"#totimezone\" title=\"Permanent link\">&para;</a></h3>\n<p>Convert time or date and time to the specified time zone.</p>\n<h3 id=\"toyear\">toYear<a class=\"headerlink\" href=\"#toyear\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt16 number containing the year number (AD).</p>\n<h3 id=\"toquarter\">toQuarter<a class=\"headerlink\" href=\"#toquarter\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt8 number containing the quarter number.</p>\n<h3 id=\"tomonth\">toMonth<a class=\"headerlink\" href=\"#tomonth\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt8 number containing the month number (1-12).</p>\n<h3 id=\"todayofyear\">toDayOfYear<a class=\"headerlink\" href=\"#todayofyear\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt16 number containing the number of the day of the year (1-366).</p>\n<h3 id=\"todayofmonth\">toDayOfMonth<a class=\"headerlink\" href=\"#todayofmonth\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt8 number containing the number of the day of the month (1-31).</p>\n<h3 id=\"todayofweek\">toDayOfWeek<a class=\"headerlink\" href=\"#todayofweek\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt8 number containing the number of the day of the week (Monday is 1, and Sunday is 7).</p>\n<h3 id=\"tohour\">toHour<a class=\"headerlink\" href=\"#tohour\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time to a UInt8 number containing the number of the hour in 24-hour time (0-23).<br />\nThis function assumes that if clocks are moved ahead, it is by one hour and occurs at 2 a.m., and if clocks are moved back, it is by one hour and occurs at 3 a.m. (which is not always true \u2013 even in Moscow the clocks were twice changed at a different time).</p>\n<h3 id=\"tominute\">toMinute<a class=\"headerlink\" href=\"#tominute\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time to a UInt8 number containing the number of the minute of the hour (0-59).</p>\n<h3 id=\"tosecond\">toSecond<a class=\"headerlink\" href=\"#tosecond\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time to a UInt8 number containing the number of the second in the minute (0-59).<br />\nLeap seconds are not accounted for.</p>\n<h3 id=\"tounixtimestamp\">toUnixTimestamp<a class=\"headerlink\" href=\"#tounixtimestamp\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time to a unix timestamp.</p>\n<h3 id=\"tostartofyear\">toStartOfYear<a class=\"headerlink\" href=\"#tostartofyear\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date or date with time to the first day of the year.<br />\nReturns the date.</p>\n<h3 id=\"tostartofisoyear\">toStartOfISOYear<a class=\"headerlink\" href=\"#tostartofisoyear\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date or date with time to the first day of ISO year.<br />\nReturns the date.</p>\n<h3 id=\"tostartofquarter\">toStartOfQuarter<a class=\"headerlink\" href=\"#tostartofquarter\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date or date with time to the first day of the quarter.<br />\nThe first day of the quarter is either 1 January, 1 April, 1 July, or 1 October.<br />\nReturns the date.</p>\n<h3 id=\"tostartofmonth\">toStartOfMonth<a class=\"headerlink\" href=\"#tostartofmonth\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date or date with time to the first day of the month.<br />\nReturns the date.</p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>The behavior of parsing incorrect dates is implementation specific. ClickHouse may return zero date, throw an exception or do \"natural\" overflow.</p>\n</div>\n<h3 id=\"tomonday\">toMonday<a class=\"headerlink\" href=\"#tomonday\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date or date with time to the nearest Monday.<br />\nReturns the date.</p>\n<h3 id=\"tostartofweek-t-mode\">toStartOfWeek(t[,mode])<a class=\"headerlink\" href=\"#tostartofweek-t-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date or date with time to the nearest Sunday or Monday by mode.<br />\nReturns the date.<br />\nThe mode argument works exactly like the mode argument to toWeek(). For the single-argument syntax, a mode value of 0 is used. </p>\n<h3 id=\"tostartofday\">toStartOfDay<a class=\"headerlink\" href=\"#tostartofday\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date with time to the start of the day.</p>\n<h3 id=\"tostartofhour\">toStartOfHour<a class=\"headerlink\" href=\"#tostartofhour\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date with time to the start of the hour.</p>\n<h3 id=\"tostartofminute\">toStartOfMinute<a class=\"headerlink\" href=\"#tostartofminute\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date with time to the start of the minute.</p>\n<h3 id=\"tostartoffiveminute\">toStartOfFiveMinute<a class=\"headerlink\" href=\"#tostartoffiveminute\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date with time to the start of the five-minute interval.</p>\n<h3 id=\"tostartoftenminutes\">toStartOfTenMinutes<a class=\"headerlink\" href=\"#tostartoftenminutes\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down a date with time to the start of the ten-minute interval.</p>\n<h3 id=\"tostartoffifteenminutes\">toStartOfFifteenMinutes<a class=\"headerlink\" href=\"#tostartoffifteenminutes\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds down the date with time to the start of the fifteen-minute interval.</p>\n<h3 id=\"tostartofinterval-time-or-data-interval-x-unit-time-zone\">toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone])<a class=\"headerlink\" href=\"#tostartofinterval-time-or-data-interval-x-unit-time-zone\" title=\"Permanent link\">&para;</a></h3>\n<p>This is a generalization of other functions named <code>toStartOf*</code>. For example,<br />\n<code>toStartOfInterval(t, INTERVAL 1 year)</code> returns the same as <code>toStartOfYear(t)</code>,<br />\n<code>toStartOfInterval(t, INTERVAL 1 month)</code> returns the same as <code>toStartOfMonth(t)</code>,<br />\n<code>toStartOfInterval(t, INTERVAL 1 day)</code> returns the same as <code>toStartOfDay(t)</code>,<br />\n<code>toStartOfInterval(t, INTERVAL 15 minute)</code> returns the same as <code>toStartOfFifteenMinutes(t)</code> etc.</p>\n<h3 id=\"totime\">toTime<a class=\"headerlink\" href=\"#totime\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time to a certain fixed date, while preserving the time.</p>\n<h3 id=\"torelativeyearnum\">toRelativeYearNum<a class=\"headerlink\" href=\"#torelativeyearnum\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time or date to the number of the year, starting from a certain fixed point in the past.</p>\n<h3 id=\"torelativequarternum\">toRelativeQuarterNum<a class=\"headerlink\" href=\"#torelativequarternum\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time or date to the number of the quarter, starting from a certain fixed point in the past.</p>\n<h3 id=\"torelativemonthnum\">toRelativeMonthNum<a class=\"headerlink\" href=\"#torelativemonthnum\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time or date to the number of the month, starting from a certain fixed point in the past.</p>\n<h3 id=\"torelativeweeknum\">toRelativeWeekNum<a class=\"headerlink\" href=\"#torelativeweeknum\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time or date to the number of the week, starting from a certain fixed point in the past.</p>\n<h3 id=\"torelativedaynum\">toRelativeDayNum<a class=\"headerlink\" href=\"#torelativedaynum\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time or date to the number of the day, starting from a certain fixed point in the past.</p>\n<h3 id=\"torelativehournum\">toRelativeHourNum<a class=\"headerlink\" href=\"#torelativehournum\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time or date to the number of the hour, starting from a certain fixed point in the past.</p>\n<h3 id=\"torelativeminutenum\">toRelativeMinuteNum<a class=\"headerlink\" href=\"#torelativeminutenum\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time or date to the number of the minute, starting from a certain fixed point in the past.</p>\n<h3 id=\"torelativesecondnum\">toRelativeSecondNum<a class=\"headerlink\" href=\"#torelativesecondnum\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date with time or date to the number of the second, starting from a certain fixed point in the past.</p>\n<h3 id=\"toisoyear\">toISOY");
            
            document.write("ear<a class=\"headerlink\" href=\"#toisoyear\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt16 number containing the ISO Year number.</p>\n<h3 id=\"toisoweek\">toISOWeek<a class=\"headerlink\" href=\"#toisoweek\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt8 number containing the ISO Week number.</p>\n<h3 id=\"toweek-date-mode\">toWeek(date[,mode])<a class=\"headerlink\" href=\"#toweek-date-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>This function returns the week number for date or datetime. The two-argument form of toWeek() enables you to specify whether the week starts on Sunday or Monday and whether the return value should be in the range from 0 to 53 or from 1 to 53. If the mode argument is omitted, the default mode is 0.<br />\n<code>toISOWeek()</code>is a compatibility function that is equivalent to <code>toWeek(date,3)</code>.<br />\nThe following table describes how the mode argument works.</p>\n<table>\n<thead>\n<tr>\n<th>Mode</th>\n<th>First day of week</th>\n<th>Range</th>\n<th>Week 1 is the first week \u2026</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>Sunday</td>\n<td>0-53</td>\n<td>with a Sunday in this year</td>\n</tr>\n<tr>\n<td>1</td>\n<td>Monday</td>\n<td>0-53</td>\n<td>with 4 or more days this year</td>\n</tr>\n<tr>\n<td>2</td>\n<td>Sunday</td>\n<td>1-53</td>\n<td>with a Sunday in this year</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Monday</td>\n<td>1-53</td>\n<td>with 4 or more days this year</td>\n</tr>\n<tr>\n<td>4</td>\n<td>Sunday</td>\n<td>0-53</td>\n<td>with 4 or more days this year</td>\n</tr>\n<tr>\n<td>5</td>\n<td>Monday</td>\n<td>0-53</td>\n<td>with a Monday in this year</td>\n</tr>\n<tr>\n<td>6</td>\n<td>Sunday</td>\n<td>1-53</td>\n<td>with 4 or more days this year</td>\n</tr>\n<tr>\n<td>7</td>\n<td>Monday</td>\n<td>1-53</td>\n<td>with a Monday in this year</td>\n</tr>\n<tr>\n<td>8</td>\n<td>Sunday</td>\n<td>1-53</td>\n<td>contains January 1</td>\n</tr>\n<tr>\n<td>9</td>\n<td>Monday</td>\n<td>1-53</td>\n<td>contains January 1</td>\n</tr>\n</tbody>\n</table>\n<p>For mode values with a meaning of \u201cwith 4 or more days this year,\u201d weeks are numbered according to ISO 8601:1988:</p>\n<ul>\n<li>\n<p>If the week containing January 1 has 4 or more days in the new year, it is week 1.</p>\n</li>\n<li>\n<p>Otherwise, it is the last week of the previous year, and the next week is week 1.</p>\n</li>\n</ul>\n<p>For mode values with a meaning of \u201ccontains January 1\u201d, the week contains January 1 is week 1. It doesn't matter how many days in the new year the week contained, even if it contained only one day.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">toWeek</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"p\">[,</span> <span class=\"k\">mode</span><span class=\"p\">][,</span> <span class=\"n\">Timezone</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>date</code> \u2013 Date or DateTime.</li>\n<li><code>mode</code> \u2013 Optional parameter, Range of values is [0,9], default is 0.</li>\n<li><code>Timezone</code> \u2013  Optional parameter, it behaves like any other conversion function.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2016-12-27&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">toWeek</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">week0</span><span class=\"p\">,</span> <span class=\"n\">toWeek</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">week1</span><span class=\"p\">,</span> <span class=\"n\">toWeek</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">week9</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500date\u2500\u252c\u2500week0\u2500\u252c\u2500week1\u2500\u252c\u2500week9\u2500\u2510\n\u2502 2016-12-27 \u2502    52 \u2502    52 \u2502     1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"toyearweek-date-mode\">toYearWeek(date[,mode])<a class=\"headerlink\" href=\"#toyearweek-date-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns year and week for a date. The year in the result may be different from the year in the date argument for the first and the last week of the year.</p>\n<p>The mode argument works exactly like the mode argument to toWeek(). For the single-argument syntax, a mode value of 0 is used. </p>\n<p><code>toISOYear()</code>is a compatibility function that is equivalent to <code>intDiv(toYearWeek(date,3),100)</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2016-12-27&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"n\">toYearWeek</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">yearWeek0</span><span class=\"p\">,</span> <span class=\"n\">toYearWeek</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">yearWeek1</span><span class=\"p\">,</span> <span class=\"n\">toYearWeek</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">yearWeek9</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500date\u2500\u252c\u2500yearWeek0\u2500\u252c\u2500yearWeek1\u2500\u252c\u2500yearWeek9\u2500\u2510\n\u2502 2016-12-27 \u2502    201652 \u2502    201652 \u2502    201701 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"now\">now<a class=\"headerlink\" href=\"#now\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts zero arguments and returns the current time at one of the moments of request execution.<br />\nThis function returns a constant, even if the request took a long time to complete.</p>\n<h3 id=\"today\">today<a class=\"headerlink\" href=\"#today\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts zero arguments and returns the current date at one of the moments of request execution.<br />\nThe same as 'toDate(now())'.</p>\n<h3 id=\"yesterday\">yesterday<a class=\"headerlink\" href=\"#yesterday\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts zero arguments and returns yesterday's date at one of the moments of request execution.<br />\nThe same as 'today() - 1'.</p>\n<h3 id=\"timeslot\">timeSlot<a class=\"headerlink\" href=\"#timeslot\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds the time to the half hour.<br />\nThis function is specific to Yandex.Metrica, since half an hour is the minimum amount of time for breaking a session into two sessions if a tracking tag shows a single user's consecutive pageviews that differ in time by strictly more than this amount. This means that tuples (the tag ID, user ID, and time slot) can be used to search for pageviews that are included in the corresponding session.</p>\n<h3 id=\"toyyyymm\">toYYYYMM<a class=\"headerlink\" href=\"#toyyyymm\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt32 number containing the year and month number (YYYY * 100 + MM).</p>\n<h3 id=\"toyyyymmdd\">toYYYYMMDD<a class=\"headerlink\" href=\"#toyyyymmdd\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt32 number containing the year and month number (YYYY * 10000 + MM * 100 + DD).</p>\n<h3 id=\"toyyyymmddhhmmss\">toYYYYMMDDhhmmss<a class=\"headerlink\" href=\"#toyyyymmddhhmmss\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a date or date with time to a UInt64 number containing the year and month number (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss).</p>\n<h3 id=\"addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters\">addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters<a class=\"headerlink\" href=\"#addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters\" title=\"Permanent link\">&para;</a></h3>\n<p>Function adds a Date/DateTime interval to a Date/DateTime and then return the Date/DateTime. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span>\n    <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 00:00:00&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">date_time</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">addYears</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">add_years_with_date</span><span class=\"p\">,</span>\n    <span class=\"n\">addYears</span><span class=\"p\">(</span><span class=\"n\">date_time</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">add_years_with_date_time</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500add_years_with_date\u2500\u252c\u2500add_years_with_date_time\u2500\u2510\n\u2502          2019-01-01 \u2502      2019-01-01 00:00:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters\">subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters<a class=\"headerlink\" href=\"#subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes");
            
            document.write("-subtractseconds-subtractquarters\" title=\"Permanent link\">&para;</a></h3>\n<p>Function subtract a Date/DateTime interval to a Date/DateTime and then return the Date/DateTime. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"nb\">date</span><span class=\"p\">,</span>\n    <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-01-01 00:00:00&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">date_time</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">subtractYears</span><span class=\"p\">(</span><span class=\"nb\">date</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">subtract_years_with_date</span><span class=\"p\">,</span>\n    <span class=\"n\">subtractYears</span><span class=\"p\">(</span><span class=\"n\">date_time</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">subtract_years_with_date_time</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500subtract_years_with_date\u2500\u252c\u2500subtract_years_with_date_time\u2500\u2510\n\u2502               2018-01-01 \u2502           2018-01-01 00:00:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"datediff-unit-t1-t2-timezone\">dateDiff('unit', t1, t2, [timezone])<a class=\"headerlink\" href=\"#datediff-unit-t1-t2-timezone\" title=\"Permanent link\">&para;</a></h3>\n<p>Return the difference between two times expressed in 'unit' e.g. <code>'hours'</code>. 't1' and 't2' can be Date or DateTime, If 'timezone' is specified, it applied to both arguments. If not, timezones from datatypes 't1' and 't2' are used. If that timezones are not the same, the result is unspecified.</p>\n<p>Supported unit values:</p>\n<table>\n<thead>\n<tr>\n<th>unit</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>second</td>\n</tr>\n<tr>\n<td>minute</td>\n</tr>\n<tr>\n<td>hour</td>\n</tr>\n<tr>\n<td>day</td>\n</tr>\n<tr>\n<td>week</td>\n</tr>\n<tr>\n<td>month</td>\n</tr>\n<tr>\n<td>quarter</td>\n</tr>\n<tr>\n<td>year</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"timeslots-starttime-duration-size\">timeSlots(StartTime, Duration,[, Size])<a class=\"headerlink\" href=\"#timeslots-starttime-duration-size\" title=\"Permanent link\">&para;</a></h3>\n<p>For a time interval starting at 'StartTime' and continuing for 'Duration' seconds, it returns an array of moments in time, consisting of points from this interval rounded down to the 'Size' in seconds. 'Size' is an optional parameter: a constant UInt32, set to 1800 by default.<br />\nFor example, <code>timeSlots(toDateTime('2012-01-01 12:20:00'), 600) = [toDateTime('2012-01-01 12:00:00'), toDateTime('2012-01-01 12:30:00')]</code>.<br />\nThis is necessary for searching for pageviews in the corresponding session.</p>\n<h3 id=\"formatdatetime-time-format-timezone\">formatDateTime(Time, Format[, Timezone])<a class=\"headerlink\" href=\"#formatdatetime-time-format-timezone\" title=\"Permanent link\">&para;</a></h3>\n<p>Function formats a Time according given Format string. N.B.: Format is a constant expression, e.g. you can not have multiple formats for single result column.</p>\n<p>Supported modifiers for Format:<br />\n(\"Example\" column shows formatting result for time <code>2018-01-02 22:33:44</code>)</p>\n<table>\n<thead>\n<tr>\n<th>Modifier</th>\n<th>Description</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>%C</td>\n<td>year divided by 100 and truncated to integer (00-99)</td>\n<td>20</td>\n</tr>\n<tr>\n<td>%d</td>\n<td>day of the month, zero-padded (01-31)</td>\n<td>02</td>\n</tr>\n<tr>\n<td>%D</td>\n<td>Short MM/DD/YY date, equivalent to %m/%d/%y</td>\n<td>01/02/2018</td>\n</tr>\n<tr>\n<td>%e</td>\n<td>day of the month, space-padded ( 1-31)</td>\n<td>2</td>\n</tr>\n<tr>\n<td>%F</td>\n<td>short YYYY-MM-DD date, equivalent to %Y-%m-%d</td>\n<td>2018-01-02</td>\n</tr>\n<tr>\n<td>%H</td>\n<td>hour in 24h format (00-23)</td>\n<td>22</td>\n</tr>\n<tr>\n<td>%I</td>\n<td>hour in 12h format (01-12)</td>\n<td>10</td>\n</tr>\n<tr>\n<td>%j</td>\n<td>day of the year (001-366)</td>\n<td>002</td>\n</tr>\n<tr>\n<td>%m</td>\n<td>month as a decimal number (01-12)</td>\n<td>01</td>\n</tr>\n<tr>\n<td>%M</td>\n<td>minute (00-59)</td>\n<td>33</td>\n</tr>\n<tr>\n<td>%n</td>\n<td>new-line character ('\\n')</td>\n<td></td>\n</tr>\n<tr>\n<td>%p</td>\n<td>AM or PM designation</td>\n<td>PM</td>\n</tr>\n<tr>\n<td>%R</td>\n<td>24-hour HH:MM time, equivalent to %H:%M</td>\n<td>22:33</td>\n</tr>\n<tr>\n<td>%S</td>\n<td>second (00-59)</td>\n<td>44</td>\n</tr>\n<tr>\n<td>%t</td>\n<td>horizontal-tab character ('\\t')</td>\n<td></td>\n</tr>\n<tr>\n<td>%T</td>\n<td>ISO 8601 time format (HH:MM:SS), equivalent to %H:%M:%S</td>\n<td>22:33:44</td>\n</tr>\n<tr>\n<td>%u</td>\n<td>ISO 8601 weekday as number with Monday as 1 (1-7)</td>\n<td>2</td>\n</tr>\n<tr>\n<td>%V</td>\n<td>ISO 8601 week number (01-53)</td>\n<td>01</td>\n</tr>\n<tr>\n<td>%w</td>\n<td>weekday as a decimal number with Sunday as 0 (0-6)</td>\n<td>2</td>\n</tr>\n<tr>\n<td>%y</td>\n<td>Year, last two digits (00-99)</td>\n<td>18</td>\n</tr>\n<tr>\n<td>%Y</td>\n<td>Year</td>\n<td>2018</td>\n</tr>\n<tr>\n<td>%%</td>\n<td>a % sign</td>\n<td>%</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"../../../../../query_language/functions/string_functions/\"></a><a name=\"string_functions/\"></a><a name=\"query_language/functions/string_functions/\"></a><a name=\"../../../../query_language/functions/string_functions/\"></a><a name=\"../query_language/functions/string_functions/\"></a><a name=\"functions/string_functions/\"></a><a name=\"../../query_language/functions/string_functions/\"></a><a name=\"../../../../../../functions/string_functions/\"></a><a name=\"../../../../functions/string_functions/\"></a><a name=\"../functions/string_functions/\"></a><a name=\"../../../../../functions/string_functions/\"></a><a name=\"../../functions/string_functions/\"></a><a name=\"../../../functions/string_functions/\"></a><a name=\"../../../query_language/functions/string_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-strings\">Functions for working with strings<a class=\"headerlink\" href=\"#functions-for-working-with-strings\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"string_functions-empty\">empty<a class=\"headerlink\" href=\"#string_functions-empty\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns 1 for an empty string or 0 for a non-empty string.<br />\nThe result type is UInt8.<br />\nA string is considered non-empty if it contains at least one byte, even if this is a space or a null byte.<br />\nThe function also works for arrays.</p>\n<h3 id=\"notempty\">notEmpty<a class=\"headerlink\" href=\"#notempty\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns 0 for an empty string or 1 for a non-empty string.<br />\nThe result type is UInt8.<br />\nThe function also works for arrays.</p>\n<h3 id=\"length\">length<a class=\"headerlink\" href=\"#length\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the length of a string in bytes (not in characters, and not in code points).<br />\nThe result type is UInt64.<br />\nThe function also works for arrays.</p>\n<h3 id=\"lengthutf8\">lengthUTF8<a class=\"headerlink\" href=\"#lengthutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the length of a string in Unicode code points (not in characters), assuming that the string contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it doesn't throw an exception).<br />\nThe result type is UInt64.</p>\n<h3 id=\"char-length-char-length\">char_length, CHAR_LENGTH<a class=\"headerlink\" href=\"#char-length-char-length\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the length of a string in Unicode code points (not in characters), assuming that the string contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it doesn't throw an exception).<br />\nThe result type is UInt64.</p>\n<h3 id=\"character-length-character-length\">character_length, CHARACTER_LENGTH<a class=\"headerlink\" href=\"#character-length-character-length\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the length of a string in Unicode code points (not in characters), assuming that the string contains a set of bytes that make up UTF-8 encoded text. If this assumption is not met, it returns some result (it doesn't throw an exception).<br />\nThe result type is UInt64.</p>\n<h3 id=\"lower-lcase\">lower, lcase<a class=\"headerlink\" href=\"#lower-lcase\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts ASCII Latin symbols in a string to lowercase.</p>\n<h3 id=\"upper-ucase\">upper, ucase<a class=\"headerlink\" href=\"#upper-ucase\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts ASCII Latin symbols in a string to uppercase.</p>\n<h3 id=\"lowerutf8\">lowerUTF8<a class=\"headerlink\" href=\"#lowerutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a string to lowercase, assuming the string contains a set of bytes that make up a UTF-8 encoded text.<br />\nIt doesn't detect the language. So for Turkish the result might not be exactly correct.<br />\nIf the length of the UTF-8 byte sequence is different for upper and lower case of a code point, the result may be incorrect for this code point.<br />\nIf the string contains a set of bytes that is not UTF-8, then the behavior is undefined.</p>\n<h3 id=\"upperutf8\">upperUTF8<a class=\"headerlink\" href=\"#upperutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts a string to uppercase, assuming the string contains a set of bytes that make up a UTF-8 encoded text.<br />\nIt doesn't detect the language. So for Turkish the result might not be exactly correct.<br />\nIf the length of the UTF-8 byte sequence is different for upper and lower case of a code point, the result may be incorrect for this code point.<br />\nIf the string contains a set of bytes that is not UTF-8, then the behavior is undefined.</p>\n<h3 id=\"isvalidutf8\">isValidUTF8<a class=\"headerlink\" href=\"#isvalidutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns 1, if the set of bytes is valid UTF-8 encoded, otherwise 0.</p>\n<h3 id=\"tovalidutf8\">toValidUTF8<a class=\"headerlink\" href=\"#tovalidutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>Replac");
            
            document.write("es invalid UTF-8 characters by the <code>\ufffd</code> (U+FFFD) character. All running in a row invalid characters are collapsed into the one replacement character.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">toValidUTF8</span><span class=\"p\">(</span> <span class=\"n\">input_string</span> <span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Parameters:</p>\n<ul>\n<li>input_string \u2014 Any set of bytes represented as the <a href=\"#../../data_types/string/\">String</a> data type object.</li>\n</ul>\n<p>Returned value: Valid UTF-8 string.</p>\n<h4 id=\"example_3\">Example<a class=\"headerlink\" href=\"#example_3\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toValidUTF8</span><span class=\"p\">(</span><span class=\"s1\">&#39;\\x61\\xF0\\x80\\x80\\x80b&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toValidUTF8(&#39;a\ufffd\ufffd\ufffd\ufffdb&#39;)\u2500\u2510\n\u2502 a\ufffdb                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"reverse\">reverse<a class=\"headerlink\" href=\"#reverse\" title=\"Permanent link\">&para;</a></h3>\n<p>Reverses the string (as a sequence of bytes).</p>\n<h3 id=\"reverseutf8\">reverseUTF8<a class=\"headerlink\" href=\"#reverseutf8\" title=\"Permanent link\">&para;</a></h3>\n<p>Reverses a sequence of Unicode code points, assuming that the string contains a set of bytes representing a UTF-8 text. Otherwise, it does something else (it doesn't throw an exception).</p>\n<h3 id=\"format-pattern-s0-s1\">format(pattern, s0, s1, ...)<a class=\"headerlink\" href=\"#format-pattern-s0-s1\" title=\"Permanent link\">&para;</a></h3>\n<p>Formatting constant pattern with the string listed in the arguments. <code>pattern</code> is a simplified Python format pattern. Format string contains \"replacement fields\" surrounded by curly braces <code>{}</code>. Anything that is not contained in braces is considered literal text, which is copied unchanged to the output. If you need to include a brace character in the literal text, it can be escaped by doubling: <code>{{</code> and <code>}}</code>. Field names can be numbers (starting from zero) or empty (then they are treated as consequence numbers).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">format</span><span class=\"p\">(</span><span class=\"s1\">&#39;{1} {0} {1}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;World&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500format(&#39;{1} {0} {1}&#39;, &#39;World&#39;, &#39;Hello&#39;)\u2500\u2510\n\u2502 Hello World Hello                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">format</span><span class=\"p\">(</span><span class=\"s1\">&#39;{} {}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;World&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500format(&#39;{} {}&#39;, &#39;Hello&#39;, &#39;World&#39;)\u2500\u2510\n\u2502 Hello World                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"concat-s1-s2\">concat(s1, s2, ...)<a class=\"headerlink\" href=\"#concat-s1-s2\" title=\"Permanent link\">&para;</a></h3>\n<p>Concatenates the strings listed in the arguments, without a separator.</p>\n<h3 id=\"concatassumeinjective-s1-s2\">concatAssumeInjective(s1, s2, ...)<a class=\"headerlink\" href=\"#concatassumeinjective-s1-s2\" title=\"Permanent link\">&para;</a></h3>\n<p>Same as <a href=\"#concat-s1-s2\">concat</a>, the difference is that you need to ensure that concat(s1, s2, s3) -&gt; s4 is injective, it will be used for optimization of GROUP BY</p>\n<h3 id=\"substring-s-offset-length-mid-s-offset-length-substr-s-offset-length\">substring(s, offset, length), mid(s, offset, length), substr(s, offset, length)<a class=\"headerlink\" href=\"#substring-s-offset-length-mid-s-offset-length-substr-s-offset-length\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a substring starting with the byte from the 'offset' index that is 'length' bytes long. Character indexing starts from one (as in standard SQL). The 'offset' and 'length' arguments must be constants.</p>\n<h3 id=\"substringutf8-s-offset-length\">substringUTF8(s, offset, length)<a class=\"headerlink\" href=\"#substringutf8-s-offset-length\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as 'substring', but for Unicode code points. Works under the assumption that the string contains a set of bytes representing a UTF-8 encoded text. If this assumption is not met, it returns some result (it doesn't throw an exception).</p>\n<h3 id=\"appendtrailingcharifabsent-s-c\">appendTrailingCharIfAbsent(s, c)<a class=\"headerlink\" href=\"#appendtrailingcharifabsent-s-c\" title=\"Permanent link\">&para;</a></h3>\n<p>If the 's' string is non-empty and does not contain the 'c' character at the end, it appends the 'c' character to the end.</p>\n<h3 id=\"convertcharset-s-from-to\">convertCharset(s, from, to)<a class=\"headerlink\" href=\"#convertcharset-s-from-to\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the string 's' that was converted from the encoding in 'from' to the encoding in 'to'.</p>\n<h3 id=\"base64encode-s\">base64Encode(s)<a class=\"headerlink\" href=\"#base64encode-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Encodes 's' string into base64</p>\n<h3 id=\"base64decode-s\">base64Decode(s)<a class=\"headerlink\" href=\"#base64decode-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Decode base64-encoded string 's' into original string. In case of failure raises an exception.</p>\n<h3 id=\"trybase64decode-s\">tryBase64Decode(s)<a class=\"headerlink\" href=\"#trybase64decode-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Similar to base64Decode, but in case of error an empty string would be returned.</p>\n<h3 id=\"function-endswith\">endsWith(s, suffix)<a class=\"headerlink\" href=\"#function-endswith\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns whether to end with the specified suffix. Returns 1 if the string ends with the specified suffix, otherwise it returns 0.</p>\n<h3 id=\"function-startswith\">startsWith(s, prefix)<a class=\"headerlink\" href=\"#function-startswith\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns whether to start with the specified prefix. Returns 1 if the string starts with the specified prefix, otherwise it returns 0.</p>\n<h3 id=\"trimleft-s\">trimLeft(s)<a class=\"headerlink\" href=\"#trimleft-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a string that removes the whitespace characters on left side.</p>\n<h3 id=\"trimright-s\">trimRight(s)<a class=\"headerlink\" href=\"#trimright-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a string that removes the whitespace characters on right side.</p>\n<h3 id=\"trimboth-s\">trimBoth(s)<a class=\"headerlink\" href=\"#trimboth-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a string that removes the whitespace characters on either side.</p>\n<h3 id=\"crc32-s\">CRC32(s)<a class=\"headerlink\" href=\"#crc32-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the CRC32 checksum of a string<br />\nThe result type is UInt32.</p>\n<p><a name=\"../../../../query_language/functions/string_search_functions/\"></a><a name=\"../../../../../query_language/functions/string_search_functions/\"></a><a name=\"../../../../../../functions/string_search_functions/\"></a><a name=\"../query_language/functions/string_search_functions/\"></a><a name=\"../../query_language/functions/string_search_functions/\"></a><a name=\"string_search_functions/\"></a><a name=\"../../functions/string_search_functions/\"></a><a name=\"../../../../functions/string_search_functions/\"></a><a name=\"../../../../../functions/string_search_functions/\"></a><a name=\"query_language/functions/string_search_functions/\"></a><a name=\"functions/string_search_functions/\"></a><a name=\"../functions/string_search_functions/\"></a><a name=\"../../../query_language/functions/string_search_functions/\"></a><a name=\"../../../functions/string_search_functions/\"></a></p>\n<h2 id=\"functions-for-searching-strings\">Functions for Searching Strings<a class=\"headerlink\" href=\"#functions-for-searching-strings\" title=\"Permanent link\">&para;</a></h2>\n<p>The search is case-sensitive by default in all these functions. There are separate variants for case insensitive search.</p>\n<h3 id=\"position-haystack-needle-locate-haystack-needle\">position(haystack, needle), locate(haystack, needle)<a class=\"headerlink\" href=\"#position-haystack-needle-locate-haystack-needle\" title=\"Permanent link\">&para;</a></h3>\n<p>Search for the substring <code>needle</code> in the string <code>haystack</code>.<br />\nReturns the position (in bytes) of the found substring, starting from 1, or returns 0 if the substring was not found.</p>\n<p>For a case-insensitive search, use the function <code>positionCaseInsensitive</code>.</p>\n<h3 id=\"positionutf8-haystack-needle\">positionUTF8(haystack, needle)<a class=\"headerlink\" href=\"#positionutf8-haystack-needle\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as <code>position</code>, but the position is returned in Unicode code points. Works under the assumption that the string contains a set of bytes representing a UTF-8 encoded text. If this assumption is not met, it returns some result (it doesn't throw an exception).</p>\n<p>For a case-insensitive search, use the function <code>positionCaseInsensitiveUTF8</code>.</p>\n<h3 id=\"multisearchallpositions-haystack-needle1-needle2-needlen\">multiSearchAllPositions(haystack, [needle<sub>1</sub>, needle<sub>2</sub>, ..., needle<sub>n</sub>])<a class=\"headerlink\" href=\"#multisearchallpositions-haystack-needle1-needle2-needlen\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as <code>position</code>, but returns <code>Array</code> of the <code>position</code>s for all needle<sub>i</sub>.</p>\n<p>For a case-insensitive search or/and in UTF-8 format use functions <code>multiSearchAllPositionsCaseInsensitive, multiSearchAllPositionsUTF8, multiSearchAllPositionsCaseInsensitiveUTF8</code>.</p>\n<h3 id=\"multisearchfirstposition-haystack-need");
            
            document.write("le1-needle2-needlen\">multiSearchFirstPosition(haystack, [needle<sub>1</sub>, needle<sub>2</sub>, ..., needle<sub>n</sub>])<a class=\"headerlink\" href=\"#multisearchfirstposition-haystack-needle1-needle2-needlen\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as <code>position</code> but returns the leftmost offset of the string <code>haystack</code> that is matched to some of the needles.</p>\n<p>For a case-insensitive search or/and in UTF-8 format use functions <code>multiSearchFirstPositionCaseInsensitive, multiSearchFirstPositionUTF8, multiSearchFirstPositionCaseInsensitiveUTF8</code>.</p>\n<h3 id=\"multisearchfirstindex-haystack-needle1-needle2-needlen\">multiSearchFirstIndex(haystack, [needle<sub>1</sub>, needle<sub>2</sub>, ..., needle<sub>n</sub>])<a class=\"headerlink\" href=\"#multisearchfirstindex-haystack-needle1-needle2-needlen\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the index <code>i</code> (starting from 1) of the leftmost found needle<sub>i</sub> in the string <code>haystack</code> and 0 otherwise.</p>\n<p>For a case-insensitive search or/and in UTF-8 format use functions <code>multiSearchFirstIndexCaseInsensitive, multiSearchFirstIndexUTF8, multiSearchFirstIndexCaseInsensitiveUTF8</code>.</p>\n<h3 id=\"function-multisearchany\">multiSearchAny(haystack, [needle<sub>1</sub>, needle<sub>2</sub>, ..., needle<sub>n</sub>])<a class=\"headerlink\" href=\"#function-multisearchany\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns 1, if at least one string needle<sub>i</sub> matches the string <code>haystack</code> and 0 otherwise.</p>\n<p>For a case-insensitive search or/and in UTF-8 format use functions <code>multiSearchAnyCaseInsensitive, multiSearchAnyUTF8, multiSearchAnyCaseInsensitiveUTF8</code>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>In all <code>multiSearch*</code> functions the number of needles should be less than 2<sup>8</sup> because of implementation specification.</p>\n</div>\n<h3 id=\"match-haystack-pattern\">match(haystack, pattern)<a class=\"headerlink\" href=\"#match-haystack-pattern\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether the string matches the <code>pattern</code> regular expression. A <code>re2</code> regular expression. The <a href=\"https://github.com/google/re2/wiki/Syntax\" rel=\"external nofollow noreferrer\">syntax</a> of the <code>re2</code> regular expressions is more limited than the syntax of the Perl regular expressions.</p>\n<p>Returns 0 if it doesn't match, or 1 if it matches.</p>\n<p>Note that the backslash symbol (<code>\\</code>) is used for escaping in the regular expression. The same symbol is used for escaping in string literals. So in order to escape the symbol in a regular expression, you must write two backslashes (\\) in a string literal.</p>\n<p>The regular expression works with the string as if it is a set of bytes. The regular expression can't contain null bytes.<br />\nFor patterns to search for substrings in a string, it is better to use LIKE or 'position', since they work much faster.</p>\n<h3 id=\"multimatchany-haystack-pattern1-pattern2-patternn\">multiMatchAny(haystack, [pattern<sub>1</sub>, pattern<sub>2</sub>, ..., pattern<sub>n</sub>])<a class=\"headerlink\" href=\"#multimatchany-haystack-pattern1-pattern2-patternn\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as <code>match</code>, but returns 0 if none of the regular expressions are matched and 1 if any of the patterns matches. It uses <a href=\"https://github.com/intel/hyperscan\" rel=\"external nofollow noreferrer\">hyperscan</a> library. For patterns to search substrings in a string, it is better to use <code>multiSearchAny</code> since it works much faster.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The length of any of the <code>haystack</code> string must be less than 2<sup>32</sup> bytes otherwise the exception is thrown. This restriction takes place because of hyperscan API.</p>\n</div>\n<h3 id=\"multimatchanyindex-haystack-pattern1-pattern2-patternn\">multiMatchAnyIndex(haystack, [pattern<sub>1</sub>, pattern<sub>2</sub>, ..., pattern<sub>n</sub>])<a class=\"headerlink\" href=\"#multimatchanyindex-haystack-pattern1-pattern2-patternn\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as <code>multiMatchAny</code>, but returns any index that matches the haystack.</p>\n<h3 id=\"multifuzzymatchany-haystack-distance-pattern1-pattern2-patternn\">multiFuzzyMatchAny(haystack, distance, [pattern<sub>1</sub>, pattern<sub>2</sub>, ..., pattern<sub>n</sub>])<a class=\"headerlink\" href=\"#multifuzzymatchany-haystack-distance-pattern1-pattern2-patternn\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as <code>multiMatchAny</code>, but returns 1 if any pattern matches the haystack within a constant <a href=\"https://en.wikipedia.org/wiki/Edit_distance\" rel=\"external nofollow noreferrer\">edit distance</a>. This function is also in an experimental mode and can be extremely slow. For more information see <a href=\"https://intel.github.io/hyperscan/dev-reference/compilation.html#approximate-matching\" rel=\"external nofollow noreferrer\">hyperscan documentation</a>.</p>\n<h3 id=\"multifuzzymatchanyindex-haystack-distance-pattern1-pattern2-patternn\">multiFuzzyMatchAnyIndex(haystack, distance, [pattern<sub>1</sub>, pattern<sub>2</sub>, ..., pattern<sub>n</sub>])<a class=\"headerlink\" href=\"#multifuzzymatchanyindex-haystack-distance-pattern1-pattern2-patternn\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as <code>multiFuzzyMatchAny</code>, but returns any index that matches the haystack within a constant edit distance.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p><code>multiFuzzyMatch*</code> functions do not support UTF-8 regular expressions, and such expressions are treated as bytes because of hyperscan restriction.</p>\n</div>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>To turn off all functions that use hyperscan, use setting <code>SET allow_hyperscan = 0;</code>.</p>\n</div>\n<h3 id=\"extract-haystack-pattern\">extract(haystack, pattern)<a class=\"headerlink\" href=\"#extract-haystack-pattern\" title=\"Permanent link\">&para;</a></h3>\n<p>Extracts a fragment of a string using a regular expression. If 'haystack' doesn't match the 'pattern' regex, an empty string is returned. If the regex doesn't contain subpatterns, it takes the fragment that matches the entire regex. Otherwise, it takes the fragment that matches the first subpattern.</p>\n<h3 id=\"extractall-haystack-pattern\">extractAll(haystack, pattern)<a class=\"headerlink\" href=\"#extractall-haystack-pattern\" title=\"Permanent link\">&para;</a></h3>\n<p>Extracts all the fragments of a string using a regular expression. If 'haystack' doesn't match the 'pattern' regex, an empty string is returned. Returns an array of strings consisting of all matches to the regex. In general, the behavior is the same as the 'extract' function (it takes the first subpattern, or the entire expression if there isn't a subpattern).</p>\n<h3 id=\"function-like\">like(haystack, pattern), haystack LIKE pattern operator<a class=\"headerlink\" href=\"#function-like\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether a string matches a simple regular expression.<br />\nThe regular expression can contain the metasymbols <code>%</code> and <code>_</code>.</p>\n<p><code>%</code> indicates any quantity of any bytes (including zero characters).</p>\n<p><code>_</code> indicates any one byte.</p>\n<p>Use the backslash (<code>\\</code>) for escaping metasymbols. See the note on escaping in the description of the 'match' function.</p>\n<p>For regular expressions like <code>%needle%</code>, the code is more optimal and works as fast as the <code>position</code> function.<br />\nFor other regular expressions, the code is the same as for the 'match' function.</p>\n<h3 id=\"function-notlike\">notLike(haystack, pattern), haystack NOT LIKE pattern operator<a class=\"headerlink\" href=\"#function-notlike\" title=\"Permanent link\">&para;</a></h3>\n<p>The same thing as 'like', but negative.</p>\n<h3 id=\"ngramdistance-haystack-needle\">ngramDistance(haystack, needle)<a class=\"headerlink\" href=\"#ngramdistance-haystack-needle\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the 4-gram distance between <code>haystack</code> and <code>needle</code>: counts the symmetric difference between two multisets of 4-grams and normalizes it by the sum of their cardinalities. Returns float number from 0 to 1 -- the closer to zero, the more strings are similar to each other. If the constant <code>needle</code> or <code>haystack</code> is more than 32Kb, throws an exception. If some of the non-constant <code>haystack</code> or <code>needle</code> strings are more than 32Kb, the distance is always one.</p>\n<p>For case-insensitive search or/and in UTF-8 format use functions <code>ngramDistanceCaseInsensitive, ngramDistanceUTF8, ngramDistanceCaseInsensitiveUTF8</code>.</p>\n<h3 id=\"ngramsearch-haystack-needle\">ngramSearch(haystack, needle)<a class=\"headerlink\" href=\"#ngramsearch-haystack-needle\" title=\"Permanent link\">&para;</a></h3>\n<p>Same as <code>ngramDistance</code> but calculates the non-symmetric difference between <code>needle</code> and <code>haystack</code> -- the number of n-grams from needle minus the common number of n-grams normalized by the number of <code>needle</code> n-grams. The closer to one, the more likely <code>needle</code> is in the <code>haystack</code>. Can be useful for fuzzy string search.</p>\n<p>For case-insensitive search or/and in UTF-8 format use functions <code>ngramSearchCaseInsensitive, ngramSearchUTF8, ngramSearchCaseInsensitiveUTF8</code>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>For UTF-8 case we use 3-gram distance. All these are not perfectly fair n-gram distances. We use 2-byte hashes to hash n-grams and then calculate the (non-)symmetric difference between these hash tables -- collisions may occur. With UTF-8 case-insensitive format we do not use fair <code>tolower</code> function -- we zero the 5-th bit (starting from zero) of each codepoint byte and first bit of zeroth byte if bytes more than one -- this works for Latin and mostly for all Cyrillic letters.</p>\n</div>\n<p><a name=\"../../../query_language/");
            
            document.write("functions/string_replace_functions/\"></a><a name=\"../query_language/functions/string_replace_functions/\"></a><a name=\"../../functions/string_replace_functions/\"></a><a name=\"../../../../query_language/functions/string_replace_functions/\"></a><a name=\"../../../../../../functions/string_replace_functions/\"></a><a name=\"../../../../../functions/string_replace_functions/\"></a><a name=\"../../../../functions/string_replace_functions/\"></a><a name=\"../../../../../query_language/functions/string_replace_functions/\"></a><a name=\"string_replace_functions/\"></a><a name=\"../../query_language/functions/string_replace_functions/\"></a><a name=\"../../../functions/string_replace_functions/\"></a><a name=\"../functions/string_replace_functions/\"></a><a name=\"functions/string_replace_functions/\"></a><a name=\"query_language/functions/string_replace_functions/\"></a></p>\n<h2 id=\"functions-for-searching-and-replacing-in-strings\">Functions for searching and replacing in strings<a class=\"headerlink\" href=\"#functions-for-searching-and-replacing-in-strings\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"replaceone-haystack-pattern-replacement\">replaceOne(haystack, pattern, replacement)<a class=\"headerlink\" href=\"#replaceone-haystack-pattern-replacement\" title=\"Permanent link\">&para;</a></h3>\n<p>Replaces the first occurrence, if it exists, of the 'pattern' substring in 'haystack' with the 'replacement' substring.<br />\nHereafter, 'pattern' and 'replacement' must be constants.</p>\n<h3 id=\"replaceall-haystack-pattern-replacement-replace-haystack-pattern-replacement\">replaceAll(haystack, pattern, replacement), replace(haystack, pattern, replacement)<a class=\"headerlink\" href=\"#replaceall-haystack-pattern-replacement-replace-haystack-pattern-replacement\" title=\"Permanent link\">&para;</a></h3>\n<p>Replaces all occurrences of the 'pattern' substring in 'haystack' with the 'replacement' substring.</p>\n<h3 id=\"replaceregexpone-haystack-pattern-replacement\">replaceRegexpOne(haystack, pattern, replacement)<a class=\"headerlink\" href=\"#replaceregexpone-haystack-pattern-replacement\" title=\"Permanent link\">&para;</a></h3>\n<p>Replacement using the 'pattern' regular expression. A re2 regular expression.<br />\nReplaces only the first occurrence, if it exists.<br />\nA pattern can be specified as 'replacement'. This pattern can include substitutions <code>\\0-\\9</code>.<br />\nThe substitution <code>\\0</code> includes the entire regular expression. Substitutions <code>\\1-\\9</code> correspond to the subpattern numbers.To use the <code>\\</code> character in a template, escape it using <code>\\</code>.<br />\nAlso keep in mind that a string literal requires an extra escape.</p>\n<p>Example 1. Converting the date to American format:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">DISTINCT</span>\n    <span class=\"n\">EventDate</span><span class=\"p\">,</span>\n    <span class=\"n\">replaceRegexpOne</span><span class=\"p\">(</span><span class=\"n\">toString</span><span class=\"p\">(</span><span class=\"n\">EventDate</span><span class=\"p\">),</span> <span class=\"s1\">&#39;(\\\\d{4})-(\\\\d{2})-(\\\\d{2})&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;\\\\2/\\\\3/\\\\1&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">7</span>\n<span class=\"n\">FORMAT</span> <span class=\"n\">TabSeparated</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>2014-03-17      03/17/2014\n2014-03-18      03/18/2014\n2014-03-19      03/19/2014\n2014-03-20      03/20/2014\n2014-03-21      03/21/2014\n2014-03-22      03/22/2014\n2014-03-23      03/23/2014\n</code></pre></div>\n\n\n<p>Example 2. Copying a string ten times:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">replaceRegexpOne</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, World!&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;.*&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World! \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"replaceregexpall-haystack-pattern-replacement\">replaceRegexpAll(haystack, pattern, replacement)<a class=\"headerlink\" href=\"#replaceregexpall-haystack-pattern-replacement\" title=\"Permanent link\">&para;</a></h3>\n<p>This does the same thing, but replaces all the occurrences. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">replaceRegexpAll</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, World!&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;.&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;\\\\0\\\\0&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 HHeelllloo,,  WWoorrlldd!! \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>As an exception, if a regular expression worked on an empty substring, the replacement is not made more than once.<br />\nExample:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">replaceRegexpAll</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, World!&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;^&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;here: &#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 here: Hello, World! \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"regexpquotemeta-s\">regexpQuoteMeta(s)<a class=\"headerlink\" href=\"#regexpquotemeta-s\" title=\"Permanent link\">&para;</a></h3>\n<p>The function adds a backslash before some predefined characters in the string.<br />\nPredefined characters: '0', '\\', '|', '(', ')', '^', '$', '.', '[', ']', '?', '*', '+', '{', ':', '-'.<br />\nThis implementation slightly differs from re2::RE2::QuoteMeta. It escapes zero byte as \\0 instead of \\x00 and it escapes only required characters.<br />\nFor more information, see the link: <a href=\"https://github.com/google/re2/blob/master/re2/re2.cc#L473\" rel=\"external nofollow noreferrer\">RE2</a></p>\n<p><a name=\"../../../../functions/conditional_functions/\"></a><a name=\"../../../../query_language/functions/conditional_functions/\"></a><a name=\"conditional_functions/\"></a><a name=\"../query_language/functions/conditional_functions/\"></a><a name=\"../../query_language/functions/conditional_functions/\"></a><a name=\"../functions/conditional_functions/\"></a><a name=\"../../../../../functions/conditional_functions/\"></a><a name=\"../../../functions/conditional_functions/\"></a><a name=\"../../../../../../functions/conditional_functions/\"></a><a name=\"functions/conditional_functions/\"></a><a name=\"../../../query_language/functions/conditional_functions/\"></a><a name=\"query_language/functions/conditional_functions/\"></a><a name=\"../../../../../query_language/functions/conditional_functions/\"></a><a name=\"../../functions/conditional_functions/\"></a></p>\n<h2 id=\"conditional-functions\">Conditional functions<a class=\"headerlink\" href=\"#conditional-functions\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"if-cond-then-else-cond-operator-then-else\">if(cond, then, else), cond ? operator then : else<a class=\"headerlink\" href=\"#if-cond-then-else-cond-operator-then-else\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns <code>then</code> if <code>cond != 0</code>, or <code>else</code> if <code>cond = 0</code>.<br />\n<code>cond</code> must be of type <code>UInt8</code>, and <code>then</code> and <code>else</code> must have the lowest common type.</p>\n<p><code>then</code> and <code>else</code> can be <code>NULL</code></p>\n<h3 id=\"multiif\">multiIf<a class=\"headerlink\" href=\"#multiif\" title=\"Permanent link\">&para;</a></h3>\n<p>Allows you to write the <a href=\"#operator_case\">CASE</a> operator more compactly in the query.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">multiIf</span><span class=\"p\">(</span><span class=\"n\">cond_1</span><span class=\"p\">,</span> <span class=\"n\">then_1</span><span class=\"p\">,</span> <span class=\"n\">cond_2</span><span class=\"p\">,</span> <span class=\"n\">then_2</span><span class=\"p\">...</span><span class=\"k\">else</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>cond_N</code> \u2014 The condition for the function to return <code>then_N</code>.</li>\n<li><code>then_N</code> \u2014 The result of the function when executed.</li>\n<li><code>else</code> \u2014 The result of the function if none of the conditions is met.</li>\n</ul>\n<p>The function accepts <code>2N+1</code> parameters.</p>\n<p><strong>Returned values</strong></p>\n<p>The function returns one of the values <code>then_N</code> or <code>else</code>, depending on the conditions <code>cond_N</code>.</p>\n<p><strong>Example</strong></p>\n<p>Take the table</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510\n\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502 2 \u2502    3 \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Run the query <code>SELECT multiIf(isNull(y) x, y &lt; 3, y, NULL) FROM t_null</code>. Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500multiIf(isNull(y), x, less(y, 3), y, NULL)\u2500\u2510\n\u2502                                          1 \u2502\n\u2502                                       \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"math_functions/\"></a><a name=\"../../../../query_language/functions/math_functions/");
            
            document.write("\"></a><a name=\"../../../../../query_language/functions/math_functions/\"></a><a name=\"../../../query_language/functions/math_functions/\"></a><a name=\"../../../../functions/math_functions/\"></a><a name=\"../../query_language/functions/math_functions/\"></a><a name=\"../../../../../functions/math_functions/\"></a><a name=\"../../../../../../functions/math_functions/\"></a><a name=\"functions/math_functions/\"></a><a name=\"query_language/functions/math_functions/\"></a><a name=\"../query_language/functions/math_functions/\"></a><a name=\"../../../functions/math_functions/\"></a><a name=\"../functions/math_functions/\"></a><a name=\"../../functions/math_functions/\"></a></p>\n<h2 id=\"mathematical-functions\">Mathematical functions<a class=\"headerlink\" href=\"#mathematical-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>All the functions return a Float64 number. The accuracy of the result is close to the maximum precision possible, but the result might not coincide with the machine representable number nearest to the corresponding real number.</p>\n<h3 id=\"e\">e()<a class=\"headerlink\" href=\"#e\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a Float64 number that is close to the number e.</p>\n<h3 id=\"pi\">pi()<a class=\"headerlink\" href=\"#pi\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a Float64 number that is close to the number \u03c0.</p>\n<h3 id=\"exp-x\">exp(x)<a class=\"headerlink\" href=\"#exp-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to the exponent of the argument.</p>\n<h3 id=\"log-x-ln-x\">log(x), ln(x)<a class=\"headerlink\" href=\"#log-x-ln-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to the natural logarithm of the argument.</p>\n<h3 id=\"exp2-x\">exp2(x)<a class=\"headerlink\" href=\"#exp2-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to 2 to the power of x.</p>\n<h3 id=\"log2-x\">log2(x)<a class=\"headerlink\" href=\"#log2-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to the binary logarithm of the argument.</p>\n<h3 id=\"exp10-x\">exp10(x)<a class=\"headerlink\" href=\"#exp10-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to 10 to the power of x.</p>\n<h3 id=\"log10-x\">log10(x)<a class=\"headerlink\" href=\"#log10-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to the decimal logarithm of the argument.</p>\n<h3 id=\"sqrt-x\">sqrt(x)<a class=\"headerlink\" href=\"#sqrt-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to the square root of the argument.</p>\n<h3 id=\"cbrt-x\">cbrt(x)<a class=\"headerlink\" href=\"#cbrt-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to the cubic root of the argument.</p>\n<h3 id=\"erf-x\">erf(x)<a class=\"headerlink\" href=\"#erf-x\" title=\"Permanent link\">&para;</a></h3>\n<p>If 'x' is non-negative, then erf(x / \u03c3\u221a2)<g> is the probability that a random variable having a normal distribution with standard deviation '\u03c3' takes the value that is separated from the expected value by more than 'x'.</p>\n<p>Example (three sigma rule):</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">erf</span><span class=\"p\">(</span><span class=\"mi\">3</span> <span class=\"o\">/</span> <span class=\"n\">sqrt</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500erf(divide(3, sqrt(2)))\u2500\u2510\n\u2502      0.9973002039367398 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"erfc-x\">erfc(x)<a class=\"headerlink\" href=\"#erfc-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a Float64 number close to 1 - erf(x), but without loss of precision for large 'x' values.</p>\n<h3 id=\"lgamma-x\">lgamma(x)<a class=\"headerlink\" href=\"#lgamma-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The logarithm of the gamma function.</p>\n<h3 id=\"tgamma-x\">tgamma(x)<a class=\"headerlink\" href=\"#tgamma-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Gamma function.</p>\n<h3 id=\"sin-x\">sin(x)<a class=\"headerlink\" href=\"#sin-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The sine.</p>\n<h3 id=\"cos-x\">cos(x)<a class=\"headerlink\" href=\"#cos-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The cosine.</p>\n<h3 id=\"tan-x\">tan(x)<a class=\"headerlink\" href=\"#tan-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The tangent.</p>\n<h3 id=\"asin-x\">asin(x)<a class=\"headerlink\" href=\"#asin-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The arc sine.</p>\n<h3 id=\"acos-x\">acos(x)<a class=\"headerlink\" href=\"#acos-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The arc cosine.</p>\n<h3 id=\"atan-x\">atan(x)<a class=\"headerlink\" href=\"#atan-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The arc tangent.</p>\n<h3 id=\"pow-x-y-power-x-y\">pow(x, y), power(x, y)<a class=\"headerlink\" href=\"#pow-x-y-power-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>Takes two numeric arguments x and y. Returns a Float64 number close to x to the power of y.</p>\n<h3 id=\"intexp2\">intExp2<a class=\"headerlink\" href=\"#intexp2\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a UInt64 number close to 2 to the power of x.</p>\n<h3 id=\"intexp10\">intExp10<a class=\"headerlink\" href=\"#intexp10\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a numeric argument and returns a UInt64 number close to 10 to the power of x.</p>\n<p><a name=\"../../../functions/rounding_functions/\"></a><a name=\"query_language/functions/rounding_functions/\"></a><a name=\"../../functions/rounding_functions/\"></a><a name=\"../../../../../query_language/functions/rounding_functions/\"></a><a name=\"../../../../functions/rounding_functions/\"></a><a name=\"../../../../../../functions/rounding_functions/\"></a><a name=\"../query_language/functions/rounding_functions/\"></a><a name=\"../../query_language/functions/rounding_functions/\"></a><a name=\"../../../query_language/functions/rounding_functions/\"></a><a name=\"../../../../query_language/functions/rounding_functions/\"></a><a name=\"rounding_functions/\"></a><a name=\"functions/rounding_functions/\"></a><a name=\"../functions/rounding_functions/\"></a><a name=\"../../../../../functions/rounding_functions/\"></a></p>\n<h2 id=\"rounding-functions\">Rounding functions<a class=\"headerlink\" href=\"#rounding-functions\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"floor-x-n\">floor(x[, N])<a class=\"headerlink\" href=\"#floor-x-n\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the largest round number that is less than or equal to x. A round number is a multiple of 1/10N, or the nearest number of the appropriate data type if 1 / 10N isn't exact.<br />\n'N' is an integer constant, optional parameter. By default it is zero, which means to round to an integer.<br />\n'N' may be negative.</p>\n<p>Examples: <code>floor(123.45, 1) = 123.4, floor(123.45, -1) = 120.</code></p>\n<p><code>x</code> is any numeric type. The result is a number of the same type.<br />\nFor integer arguments, it makes sense to round with a negative 'N' value (for non-negative 'N', the function doesn't do anything).<br />\nIf rounding causes overflow (for example, floor(-128, -1)), an implementation-specific result is returned.</p>\n<h3 id=\"ceil-x-n-ceiling-x-n\">ceil(x[, N]), ceiling(x[, N])<a class=\"headerlink\" href=\"#ceil-x-n-ceiling-x-n\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the smallest round number that is greater than or equal to 'x'. In every other way, it is the same as the 'floor' function (see above).</p>\n<h3 id=\"rounding_functions-round\">round(x[, N])<a class=\"headerlink\" href=\"#rounding_functions-round\" title=\"Permanent link\">&para;</a></h3>\n<p>Rounds a value to a specified number of decimal places.</p>\n<p>The function returns the nearest number of the specified order. In case when given number has equal distance to surrounding numbers the function returns the number having the nearest even digit (banker's rounding).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">round</span><span class=\"p\">(</span><span class=\"n\">expression</span> <span class=\"p\">[,</span> <span class=\"n\">decimal_places</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>expression</code> \u2014 A number to be rounded. Can be any <a href=\"#syntax-expressions\">expression</a> returning the numeric <a href=\"#data_types\">data type</a>.</li>\n<li><code>decimal-places</code> \u2014 An integer value.<ul>\n<li>If <code>decimal-places &gt; 0</code> then the function rounds the value to the right of the decimal point.</li>\n<li>If <code>decimal-places &lt; 0</code> then the function rounds the value to the left of the decimal point.</li>\n<li>If <code>decimal-places = 0</code> then the function rounds the value to integer. In this case the argument can be omitted.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Returned value:</strong></p>\n<p>The rounded number of the same type as the input number.</p>\n<h4 id=\"examples\">Examples<a class=\"headerlink\" href=\"#examples\" title=\"Permanent link\">&para;</a></h4>\n<p><strong>Example of use</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"nb\">number</span> <span class=\"o\">/</span> <span class=\"mi\">2</span> <span class=\"k\">AS</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">round</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">3</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500x\u2500\u252c\u2500round(divide(number, 2))\u2500\u2510\n\u2502   0 \u2502                        0 \u2502\n\u2502 0.5 \u2502                        0 \u2502\n\u2502   1 \u2502                        1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>Examples of rounding</strong></p>\n<p>Rounding to the nearest number.</p>\n<div class=\"codehilite\"><pre><span></span><code>round(3.2, 0) = 3\nround(");
            
            document.write("4.1267, 2) = 4.13\nround(22,-1) = 20\nround(467,-2) = 500\nround(-467,-2) = -500\n</code></pre></div>\n\n\n<p>Banker's rounding.</p>\n<div class=\"codehilite\"><pre><span></span><code>round(3.5) = 4\nround(4.5) = 4\nround(3.55, 1) = 3.6\nround(3.65, 1) = 3.6\n</code></pre></div>\n\n\n<h3 id=\"roundtoexp2-num\">roundToExp2(num)<a class=\"headerlink\" href=\"#roundtoexp2-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a number. If the number is less than one, it returns 0. Otherwise, it rounds the number down to the nearest (whole non-negative) degree of two.</p>\n<h3 id=\"roundduration-num\">roundDuration(num)<a class=\"headerlink\" href=\"#roundduration-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a number. If the number is less than one, it returns 0. Otherwise, it rounds the number down to numbers from the set: 1, 10, 30, 60, 120, 180, 240, 300, 600, 1200, 1800, 3600, 7200, 18000, 36000. This function is specific to Yandex.Metrica and used for implementing the report on session length</p>\n<h3 id=\"roundage-num\">roundAge(num)<a class=\"headerlink\" href=\"#roundage-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a number. If the number is less than 18, it returns 0. Otherwise, it rounds the number down to a number from the set: 18, 25, 35, 45, 55. This function is specific to Yandex.Metrica and used for implementing the report on user age.</p>\n<h3 id=\"rounddown-num-arr\">roundDown(num, arr)<a class=\"headerlink\" href=\"#rounddown-num-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>Accept a number, round it down to an element in the specified array. If the value is less than the lowest bound, the lowest bound is returned.</p>\n<p><a name=\"array_functions/\"></a><a name=\"../../../../../query_language/functions/array_functions/\"></a><a name=\"../functions/array_functions/\"></a><a name=\"../../../../functions/array_functions/\"></a><a name=\"../../../../../functions/array_functions/\"></a><a name=\"../../../../query_language/functions/array_functions/\"></a><a name=\"../query_language/functions/array_functions/\"></a><a name=\"../../../../../../functions/array_functions/\"></a><a name=\"query_language/functions/array_functions/\"></a><a name=\"../../functions/array_functions/\"></a><a name=\"../../../query_language/functions/array_functions/\"></a><a name=\"functions/array_functions/\"></a><a name=\"../../../functions/array_functions/\"></a><a name=\"../../query_language/functions/array_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-arrays\">Functions for working with arrays<a class=\"headerlink\" href=\"#functions-for-working-with-arrays\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"function-empty\">empty<a class=\"headerlink\" href=\"#function-empty\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns 1 for an empty array, or 0 for a non-empty array.<br />\nThe result type is UInt8.<br />\nThe function also works for strings.</p>\n<h3 id=\"function-notempty\">notEmpty<a class=\"headerlink\" href=\"#function-notempty\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns 0 for an empty array, or 1 for a non-empty array.<br />\nThe result type is UInt8.<br />\nThe function also works for strings.</p>\n<h3 id=\"array_functions-length\">length<a class=\"headerlink\" href=\"#array_functions-length\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the number of items in the array.<br />\nThe result type is UInt64.<br />\nThe function also works for strings.</p>\n<h3 id=\"emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64\">emptyArrayUInt8, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64<a class=\"headerlink\" href=\"#emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64\">emptyArrayInt8, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64<a class=\"headerlink\" href=\"#emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"emptyarrayfloat32-emptyarrayfloat64\">emptyArrayFloat32, emptyArrayFloat64<a class=\"headerlink\" href=\"#emptyarrayfloat32-emptyarrayfloat64\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"emptyarraydate-emptyarraydatetime\">emptyArrayDate, emptyArrayDateTime<a class=\"headerlink\" href=\"#emptyarraydate-emptyarraydatetime\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"emptyarraystring\">emptyArrayString<a class=\"headerlink\" href=\"#emptyarraystring\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts zero arguments and returns an empty array of the appropriate type.</p>\n<h3 id=\"emptyarraytosingle\">emptyArrayToSingle<a class=\"headerlink\" href=\"#emptyarraytosingle\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts an empty array and returns a one-element array that is equal to the default value.</p>\n<h3 id=\"range-n\">range(N)<a class=\"headerlink\" href=\"#range-n\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns an array of numbers from 0 to N-1.<br />\nJust in case, an exception is thrown if arrays with a total length of more than 100,000,000 elements are created in a data block.</p>\n<h3 id=\"array-x1-operator-x1\">array(x1, ...), operator [x1, ...]<a class=\"headerlink\" href=\"#array-x1-operator-x1\" title=\"Permanent link\">&para;</a></h3>\n<p>Creates an array from the function arguments.<br />\nThe arguments must be constants and have types that have the smallest common type. At least one argument must be passed, because otherwise it isn't clear which type of array to create. That is, you can't use this function to create an empty array (to do that, use the 'emptyArray*' function described above).<br />\nReturns an 'Array(T)' type result, where 'T' is the smallest common type out of the passed arguments.</p>\n<h3 id=\"arrayconcat\">arrayConcat<a class=\"headerlink\" href=\"#arrayconcat\" title=\"Permanent link\">&para;</a></h3>\n<p>Combines arrays passed as arguments.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">arrayConcat</span><span class=\"p\">(</span><span class=\"n\">arrays</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>arrays</code> \u2013 Arbitrary number of arguments of <a href=\"#../../data_types/array/\">Array</a> type.<br />\n<strong>Example</strong></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayConcat</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,2,3,4,5,6] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arrayelement-arr-n-operator-arr-n\">arrayElement(arr, n), operator arr[n]<a class=\"headerlink\" href=\"#arrayelement-arr-n-operator-arr-n\" title=\"Permanent link\">&para;</a></h3>\n<p>Get the element with the index <code>n</code> from the array <code>arr</code>. <code>n</code> must be any integer type.<br />\nIndexes in an array begin from one.<br />\nNegative indexes are supported. In this case, it selects the corresponding element numbered from the end. For example, <code>arr[-1]</code> is the last item in the array.</p>\n<p>If the index falls outside of the bounds of an array, it returns some default value (0 for numbers, an empty string for strings, etc.), except for the case with a non-constant array and a constant index 0 (in this case there will be an error <code>Array indices are 1-based</code>).</p>\n<h3 id=\"has-arr-elem\">has(arr, elem)<a class=\"headerlink\" href=\"#has-arr-elem\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether the 'arr' array has the 'elem' element.<br />\nReturns 0 if the the element is not in the array, or 1 if it is.</p>\n<p><code>NULL</code> is processed as a value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">has</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500has([1, 2, NULL], NULL)\u2500\u2510\n\u2502                       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"hasall\">hasAll<a class=\"headerlink\" href=\"#hasall\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether one array is a subset of another.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">hasAll</span><span class=\"p\">(</span><span class=\"k\">set</span><span class=\"p\">,</span> <span class=\"n\">subset</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>set</code> \u2013 Array of any type with a set of elements.</li>\n<li><code>subset</code> \u2013 Array of any type with elements that should be tested to be a subset of <code>set</code>.</li>\n</ul>\n<p><strong>Return values</strong></p>\n<ul>\n<li><code>1</code>, if <code>set</code> contains all of the elements from <code>subset</code>.</li>\n<li><code>0</code>, otherwise.</li>\n</ul>\n<p><strong>Peculiar properties</strong></p>\n<ul>\n<li>An empty array is a subset of any array.</li>\n<li><code>Null</code> processed as a value.</li>\n<li>Order of values in both of arrays doesn't matter.</li>\n</ul>\n<p><strong>Examples</strong></p>\n<p><code>SELECT hasAll([], [])</code> returns 1.</p>\n<p><code>SELECT hasAll([1, Null], [Null])</code> returns 1.</p>\n<p><code>SELECT hasAll([1.0, 2, 3, 4], [1, 3])</code> returns 1.</p>\n<p><code>SELECT hasAll(['a', 'b'], ['a'])</code> returns 1.</p>\n<p><code>SELECT hasAll([1], ['a'])</code> returns 0.</p>\n<p><code>SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [3, 5]])</code> returns 0.</p>\n<h3 id=\"hasany\">hasAny<a class=\"headerlink\" href=\"#hasany\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether two arrays have intersection by some elements.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">hasAny</span><span class=\"p\">(</span><span class=\"n\">array1</span><span class=\"p\">,</s");
            
            document.write("pan> <span class=\"n\">array2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>array1</code> \u2013 Array of any type with a set of elements.</li>\n<li><code>array2</code> \u2013 Array of any type with a set of elements.</li>\n</ul>\n<p><strong>Return values</strong></p>\n<ul>\n<li><code>1</code>, if <code>array1</code> and <code>array2</code> have one similar element at least.</li>\n<li><code>0</code>, otherwise.</li>\n</ul>\n<p><strong>Peculiar properties</strong></p>\n<ul>\n<li><code>Null</code> processed as a value.</li>\n<li>Order of values in both of arrays doesn't matter.</li>\n</ul>\n<p><strong>Examples</strong></p>\n<p><code>SELECT hasAny([1], [])</code> returns <code>0</code>.</p>\n<p><code>SELECT hasAny([Null], [Null, 1])</code> returns <code>1</code>.</p>\n<p><code>SELECT hasAny([-128, 1., 512], [1])</code> returns <code>1</code>.</p>\n<p><code>SELECT hasAny([[1, 2], [3, 4]], ['a', 'c'])</code> returns <code>0</code>.</p>\n<p><code>SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [1, 2]])</code> returns <code>1</code>.</p>\n<h3 id=\"indexof-arr-x\">indexOf(arr, x)<a class=\"headerlink\" href=\"#indexof-arr-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the index of the first 'x' element (starting from 1) if it is in the array, or 0 if it is not.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">indexOf</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500indexOf([1, 3, NULL, NULL], NULL)\u2500\u2510\n\u2502                                 3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Elements set to <code>NULL</code> are handled as normal values.</p>\n<h3 id=\"countequal-arr-x\">countEqual(arr, x)<a class=\"headerlink\" href=\"#countequal-arr-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the number of elements in the array equal to x. Equivalent to arrayCount (elem -&gt; elem = x, arr).</p>\n<p><code>NULL</code> elements are handled as separate values.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">countEqual</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">],</span> <span class=\"k\">NULL</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500countEqual([1, 2, NULL, NULL], NULL)\u2500\u2510\n\u2502                                    2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"array_functions-arrayenumerate\">arrayEnumerate(arr)<a class=\"headerlink\" href=\"#array_functions-arrayenumerate\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the array [1, 2, 3, ..., length (arr) ]</p>\n<p>This function is normally used with ARRAY JOIN. It allows counting something just once for each array after applying ARRAY JOIN. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">Reaches</span><span class=\"p\">,</span>\n    <span class=\"n\">countIf</span><span class=\"p\">(</span><span class=\"n\">num</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Hits</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span>\n    <span class=\"n\">GoalsReached</span><span class=\"p\">,</span>\n    <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">GoalsReached</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">160656</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500Reaches\u2500\u252c\u2500\u2500Hits\u2500\u2510\n\u2502   95606 \u2502 31406 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>In this example, Reaches is the number of conversions (the strings received after applying ARRAY JOIN), and Hits is the number of pageviews (strings before ARRAY JOIN). In this particular case, you can get the same result in an easier way:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"k\">length</span><span class=\"p\">(</span><span class=\"n\">GoalsReached</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">Reaches</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">Hits</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">160656</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"n\">notEmpty</span><span class=\"p\">(</span><span class=\"n\">GoalsReached</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500Reaches\u2500\u252c\u2500\u2500Hits\u2500\u2510\n\u2502   95606 \u2502 31406 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This function can also be used in higher-order functions. For example, you can use it to get array indexes for elements that match a condition.</p>\n<h3 id=\"arrayenumerateuniq-arr\">arrayEnumerateUniq(arr, ...)<a class=\"headerlink\" href=\"#arrayenumerateuniq-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns an array the same size as the source array, indicating for each element what its position is among elements with the same value.<br />\nFor example: arrayEnumerateUniq([10, 20, 10, 30]) = [1, 1, 2, 1].</p>\n<p>This function is useful when using ARRAY JOIN and aggregation of array elements.<br />\nExample:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span> <span class=\"k\">AS</span> <span class=\"n\">GoalID</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Reaches</span><span class=\"p\">,</span>\n    <span class=\"n\">sumIf</span><span class=\"p\">(</span><span class=\"n\">Sign</span><span class=\"p\">,</span> <span class=\"n\">num</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">Visits</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">visits</span>\n<span class=\"nb\">ARRAY</span> <span class=\"k\">JOIN</span>\n    <span class=\"n\">Goals</span><span class=\"p\">,</span>\n    <span class=\"n\">arrayEnumerateUniq</span><span class=\"p\">(</span><span class=\"n\">Goals</span><span class=\"p\">.</span><span class=\"n\">ID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">num</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">CounterID</span> <span class=\"o\">=</span> <span class=\"mi\">160656</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">GoalID</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">Reaches</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500GoalID\u2500\u252c\u2500Reaches\u2500\u252c\u2500Visits\u2500\u2510\n\u2502   53225 \u2502    3214 \u2502   1097 \u2502\n\u2502 2825062 \u2502    3188 \u2502   1097 \u2502\n\u2502   56600 \u2502    2803 \u2502    488 \u2502\n\u2502 1989037 \u2502    2401 \u2502    365 \u2502\n\u2502 2830064 \u2502    2396 \u2502    910 \u2502\n\u2502 1113562 \u2502    2372 \u2502    373 \u2502\n\u2502 3270895 \u2502    2262 \u2502    812 \u2502\n\u2502 1084657 \u2502    2262 \u2502    345 \u2502\n\u2502   56599 \u2502    2260 \u2502    799 \u2502\n\u2502 3271094 \u2502    2256 \u2502    812 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>In this example, each goal ID has a calculation of the number of conversions (each element in the Goals nested data structure is a goal that was reached, which we refer to as a conversion) and the number of sessions. Without ARRAY JOIN, we would have counted the number of sessions as sum(Sign). But in this particular case, the rows were multiplied by the nested Goals structure, so in order to count each session one time after this, we apply a condition to the value of the arrayEnumerateUniq(Goals.ID) function.</p>\n<p>The arrayEnumerateUniq function can take multiple arrays of the same size as arguments. In this case, uniqueness is considered for tuples of elements in the same positions in all the arrays.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayEnumerateUniq</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,2,1,1,2,1] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This is necessary when using ARRAY JOIN with a nested data structure and further aggregation across multiple elements in this structure.</p>\n<h3 id=\"arraypopback\">arrayPopBack<a class=\"headerlink\" href=\"#arraypopback\" title=\"Permanent link\">&para;</a></h");
            
            document.write("3>\n<p>Removes the last item from the array.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">arrayPopBack</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>array</code> \u2013 Array.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayPopBack</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2510\n\u2502 [1,2] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arraypopfront\">arrayPopFront<a class=\"headerlink\" href=\"#arraypopfront\" title=\"Permanent link\">&para;</a></h3>\n<p>Removes the first item from the array.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">arrayPopFront</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>array</code> \u2013 Array.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayPopFront</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2510\n\u2502 [2,3] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arraypushback\">arrayPushBack<a class=\"headerlink\" href=\"#arraypushback\" title=\"Permanent link\">&para;</a></h3>\n<p>Adds one item to the end of the array.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">arrayPushBack</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">,</span> <span class=\"n\">single_value</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>array</code> \u2013 Array.</li>\n<li><code>single_value</code> \u2013 A single value. Only numbers can be added to an array with numbers, and only strings can be added to an array of strings. When adding numbers, ClickHouse automatically sets the <code>single_value</code> type for the data type of the array. For more information about the types of data in ClickHouse, see \"<a href=\"#data_types\">Data types</a>\". Can be <code>NULL</code>. The function adds a <code>NULL</code> element to an array, and the type of array elements converts to <code>Nullable</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayPushBack</span><span class=\"p\">([</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">],</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;a&#39;,&#39;b&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arraypushfront\">arrayPushFront<a class=\"headerlink\" href=\"#arraypushfront\" title=\"Permanent link\">&para;</a></h3>\n<p>Adds one element to the beginning of the array.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">arrayPushFront</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">,</span> <span class=\"n\">single_value</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>array</code> \u2013 Array.</li>\n<li><code>single_value</code> \u2013 A single value. Only numbers can be added to an array with numbers, and only strings can be added to an array of strings. When adding numbers, ClickHouse automatically sets the <code>single_value</code> type for the data type of the array. For more information about the types of data in ClickHouse, see \"<a href=\"#data_types\">Data types</a>\". Can be <code>NULL</code>. The function adds a <code>NULL</code> element to an array, and the type of array elements converts to <code>Nullable</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayPushBack</span><span class=\"p\">([</span><span class=\"s1\">&#39;b&#39;</span><span class=\"p\">],</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;a&#39;,&#39;b&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arrayresize\">arrayResize<a class=\"headerlink\" href=\"#arrayresize\" title=\"Permanent link\">&para;</a></h3>\n<p>Changes the length of the array.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">arrayResize</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">,</span> <span class=\"k\">size</span><span class=\"p\">[,</span> <span class=\"n\">extender</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>array</code> \u2014 Array.</li>\n<li><code>size</code> \u2014 Required length of the array.<ul>\n<li>If <code>size</code> is less than the original size of the array, the array is truncated from the right.</li>\n</ul>\n</li>\n<li>If <code>size</code> is larger than the initial size of the array, the array is extended to the right with <code>extender</code> values or default values for the data type of the array items.</li>\n<li><code>extender</code> \u2014 Value for extending an array. Can be <code>NULL</code>.</li>\n</ul>\n<p><strong>Returned value:</strong></p>\n<p>An array of length <code>size</code>.</p>\n<p><strong>Examples of calls</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayResize</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayResize([1], 3)\u2500\u2510\n\u2502 [1,0,0]             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayResize</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayResize([1], 3, NULL)\u2500\u2510\n\u2502 [1,NULL,NULL]             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arrayslice\">arraySlice<a class=\"headerlink\" href=\"#arrayslice\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a slice of the array.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">arraySlice</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">,</span> <span class=\"k\">offset</span><span class=\"p\">[,</span> <span class=\"k\">length</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>array</code> \u2013  Array of data.</li>\n<li><code>offset</code> \u2013 Indent from the edge of the array. A positive value indicates an offset on the left, and a negative value is an indent on the right. Numbering of the array items begins with 1.</li>\n<li><code>length</code> - The length of the required slice. If you specify a negative value, the function returns an open slice <code>[offset, array_length - length)</code>. If you omit the value, the function returns the slice <code>[offset, the_end_of_array]</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySlice</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [2,NULL,4] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Array elements set to <code>NULL</code> are handled as normal values.</p>\n<h3 id=\"array_functions-sort\">arraySort([func,] arr, ...)<a class=\"headerlink\" href=\"#array_functions-sort\" title=\"Permanent link\">&para;</a></h3>\n<p>Sorts the elements of the <code>arr</code> array in ascending order. If the <code>func</code> function is specified, sorting order is determined by the result of the <code>func</code> function applied to the elements of the array. If <code>func</code> accepts multiple arguments, the <code>arraySort</code> function is passed several arrays that the arguments of <code>func</code> will correspond to. Detailed examples are shown at the end of <code>arraySort</code> description.</p>\n<p>Example of integer values sorting:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arraySort([1, 3, 3, 0])\u2500\u2510\n\u2502 [0,1,3,3]               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Example of string values sorting:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">([</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;!&#39;</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arraySort([&#39;hell");
            
            document.write("o&#39;, &#39;world&#39;, &#39;!&#39;])\u2500\u2510\n\u2502 [&#39;!&#39;,&#39;hello&#39;,&#39;world&#39;]              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Consider the following sorting order for the <code>NULL</code>, <code>NaN</code> and <code>Inf</code> values:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"n\">inf</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"n\">inf</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arraySort([1, nan, 2, NULL, 3, nan, -4, NULL, inf, -inf])\u2500\u2510\n\u2502 [-inf,-4,1,2,3,inf,nan,nan,NULL,NULL]                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<ul>\n<li><code>-Inf</code> values are first in the array.</li>\n<li><code>NULL</code> values are last in the array.</li>\n<li><code>NaN</code> values are right before <code>NULL</code>.</li>\n<li><code>Inf</code> values are right before <code>NaN</code>.</li>\n</ul>\n<p>Note that <code>arraySort</code> is a <a href=\"#higher_order_functions/\">higher-order function</a>. You can pass a lambda function to it as the first argument. In this case, sorting order is determined by the result of the lambda function applied to the elements of the array.</p>\n<p>Let's consider the following example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"o\">-</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [3,2,1] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>For each element of the source array, the lambda function returns the sorting key, that is, [1 \u2013&gt; -1, 2 \u2013&gt; -2, 3 \u2013&gt; -3]. Since the <code>arraySort</code> function sorts the keys in ascending order, the result is [3, 2, 1]. Thus, the <code>(x) \u2013&gt; -x</code> lambda function sets the <a href=\"#array_functions-reverse-sort\">descending order</a> in a sorting.</p>\n<p>The lambda function can accept multiple arguments. In this case, you need to pass the <code>arraySort</code> function several arrays of identical length that the arguments of lambda function will correspond to. The resulting array will consist of elements from the first input array; elements from the next input array(s) specify the sorting keys. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;world&#39;, &#39;hello&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Here, the elements that are passed in the second array ([2, 1]) define a sorting key for the corresponding element from the source array (['hello', 'world']), that is, ['hello' \u2013&gt; 2, 'world' \u2013&gt; 1]. Since the lambda function doesn't use <code>x</code>, actual values of the source array don't affect the order in the result. So, 'hello' will be the second element in the result, and 'world' will be the first.</p>\n<p>Other examples are shown below.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s1\">&#39;c&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [2,1,0] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"o\">-</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [2,1,0] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>To improve sorting efficiency, the <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"external nofollow noreferrer\">Schwartzian transform</a> is used.</p>\n</div>\n<h3 id=\"array_functions-reverse-sort\">arrayReverseSort([func,] arr, ...)<a class=\"headerlink\" href=\"#array_functions-reverse-sort\" title=\"Permanent link\">&para;</a></h3>\n<p>Sorts the elements of the <code>arr</code> array in descending order. If the <code>func</code> function is specified, <code>arr</code> is sorted according to the result of the <code>func</code> function applied to the elements of the array, and then the sorted array is reversed. If <code>func</code> accepts multiple arguments, the <code>arrayReverseSort</code> function is passed several arrays that the arguments of <code>func</code> will correspond to. Detailed examples are shown at the end of <code>arrayReverseSort</code> description.</p>\n<p>Example of integer values sorting:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayReverseSort([1, 3, 3, 0])\u2500\u2510\n\u2502 [3,3,1,0]                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Example of string values sorting:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">([</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;!&#39;</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayReverseSort([&#39;hello&#39;, &#39;world&#39;, &#39;!&#39;])\u2500\u2510\n\u2502 [&#39;world&#39;,&#39;hello&#39;,&#39;!&#39;]                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Consider the following sorting order for the <code>NULL</code>, <code>NaN</code> and <code>Inf</code> values:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"n\">inf</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"n\">inf</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [inf,3,2,1,-4,-inf,nan,nan,NULL,NULL] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<ul>\n<li><code>Inf</code> values are first in the array.</li>\n<li><code>NULL</code> values are last in the array.</li>\n<li><code>NaN</code> values are right before <code>NULL</code>.</li>\n<li><code>-Inf</code> values are right before <code>NaN</code>.</li>\n</ul>\n<p>Note that the <code>arrayReverseSort</code> is a <a href=\"#higher_order_functions/\">higher-order function</a>. You can pass a lambda function to it as the first argument. Example is shown below.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><s");
            
            document.write("pan class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"o\">-</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,2,3] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The array is sorted in the following way:</p>\n<ol>\n<li>At first, the source array ([1, 2, 3]) is sorted according to the result of the lambda function applied to the elements of the array. The result is an array [3, 2, 1].</li>\n<li>Array that is obtained on the previous step, is reversed. So, the final result is [1, 2, 3].</li>\n</ol>\n<p>The lambda function can accept multiple arguments. In this case, you need to pass the <code>arrayReverseSort</code> function several arrays of identical length that the arguments of lambda function will correspond to. The resulting array will consist of elements from the first input array; elements from the next input array(s) specify the sorting keys. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;hello&#39;,&#39;world&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>In this example, the array is sorted in the following way:</p>\n<ol>\n<li>At first, the source array (['hello', 'world']) is sorted according to the result of the lambda function applied to the elements of the arrays. The elements that are passed in the second array ([2, 1]), define the sorting keys for corresponding elements from the source array. The result is an array ['world', 'hello'].</li>\n<li>Array that was sorted on the previous step, is reversed. So, the final result is ['hello', 'world'].</li>\n</ol>\n<p>Other examples are shown below.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c&#39;</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [5,3,4] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"o\">-</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [4,3,5] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arrayuniq-arr\">arrayUniq(arr, ...)<a class=\"headerlink\" href=\"#arrayuniq-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>If one argument is passed, it counts the number of different elements in the array.<br />\nIf multiple arguments are passed, it counts the number of different tuples of elements at corresponding positions in multiple arrays.</p>\n<p>If you want to get a list of unique items in an array, you can use arrayReduce('groupUniqArray', arr).</p>\n<h3 id=\"array_functions-join\">arrayJoin(arr)<a class=\"headerlink\" href=\"#array_functions-join\" title=\"Permanent link\">&para;</a></h3>\n<p>A special function. See the section <a href=\"#functions_arrayjoin\">\"ArrayJoin function\"</a>.</p>\n<h3 id=\"arraydifference-arr\">arrayDifference(arr)<a class=\"headerlink\" href=\"#arraydifference-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>Takes an array, returns an array with the difference between all pairs of neighboring elements. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayDifference</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayDifference([1, 2, 3, 4])\u2500\u2510\n\u2502 [0,1,1,1]                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arraydistinct-arr\">arrayDistinct(arr)<a class=\"headerlink\" href=\"#arraydistinct-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>Takes an array, returns an array containing the different elements in all the arrays. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayDistinct</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayDistinct([1, 2, 2, 3, 1])\u2500\u2510\n\u2502 [1,2,3]                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arrayenumeratedense-arr\">arrayEnumerateDense(arr)<a class=\"headerlink\" href=\"#arrayenumeratedense-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns an array of the same size as the source array, indicating where each element first appears in the source array. For example: arrayEnumerateDense([10,20,10,30]) = [1,2,1,3].</p>\n<h3 id=\"arrayintersect-arr\">arrayIntersect(arr)<a class=\"headerlink\" href=\"#arrayintersect-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>Takes an array, returns the intersection of all array elements. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">arrayIntersect</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">no_intersect</span><span class=\"p\">,</span>\n    <span class=\"n\">arrayIntersect</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"k\">intersect</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500no_intersect\u2500\u252c\u2500intersect\u2500\u2510\n\u2502 []           \u2502 [1]       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"arrayreduce-agg-func-arr1\">arrayReduce(agg_func, arr1, ...)<a class=\"headerlink\" href=\"#arrayreduce-agg-func-arr1\" title=\"Permanent link\">&para;</a></h3>\n<p>Applies an aggregate function to array and returns its result.If aggregate function has multiple arguments, then this function can be applied to multiple arrays of the same size.</p>\n<p>arrayReduce('agg_func', arr1, ...) - apply the aggregate function <code>agg_func</code> to arrays <code>arr1...</code>. If multiple arrays passed, then elements on corresponding positions are passed as multiple arguments to the aggregate function. For example: SELECT arrayReduce('max', [1,2,3]) = 3</p>\n<h3 id=\"arrayreverse-arr\">arrayReverse(arr)<a class=\"headerlink\" href=\"#arrayreverse-arr\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns an array of the same size as the source array, containing the result of inverting all elements of the source array.</p>\n<p><a name=\"../../../query_language/functions/splitting_merging_functions/\"></a><a name=\"../functions/splitting_merging_functions/\"></a><a name=\"../../functions/splitting_merging_functions/\"></a><a name=\"../../../functions/splitting_merging_functions/\"></a><a name=\"../../../../../functions/splitting_merging_functions/\"></a><a name=\"../query_language/functions/splitting_merging_functions/\"></a><a name=\"splitting_merging_functions/\"></a><a name=\"../../../../../query_language/functions/splitting_merging_functions/\"></a><a name=\"../../../../../../functions/splitting_merging_functions/\"></a><a name=\"../../../../query_language/functions/splitting_merging_functions/\"></a><a name=\"../../../../functions/splitting_merging_functions/\"></a><a name=\"");
            
            document.write("query_language/functions/splitting_merging_functions/\"></a><a name=\"functions/splitting_merging_functions/\"></a><a name=\"../../query_language/functions/splitting_merging_functions/\"></a></p>\n<h2 id=\"functions-for-splitting-and-merging-strings-and-arrays\">Functions for splitting and merging strings and arrays<a class=\"headerlink\" href=\"#functions-for-splitting-and-merging-strings-and-arrays\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"splitbychar-separator-s\">splitByChar(separator, s)<a class=\"headerlink\" href=\"#splitbychar-separator-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Splits a string into substrings separated by 'separator'.'separator' must be a string constant consisting of exactly one character.<br />\nReturns an array of selected substrings. Empty substrings may be selected if the separator occurs at the beginning or end of the string, or if there are multiple consecutive separators.</p>\n<h3 id=\"splitbystring-separator-s\">splitByString(separator, s)<a class=\"headerlink\" href=\"#splitbystring-separator-s\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as above, but it uses a string of multiple characters as the separator. The string must be non-empty.</p>\n<h3 id=\"arraystringconcat-arr-separator\">arrayStringConcat(arr[, separator])<a class=\"headerlink\" href=\"#arraystringconcat-arr-separator\" title=\"Permanent link\">&para;</a></h3>\n<p>Concatenates the strings listed in the array with the separator.'separator' is an optional parameter: a constant string, set to an empty string by default.<br />\nReturns the string.</p>\n<h3 id=\"alphatokens-s\">alphaTokens(s)<a class=\"headerlink\" href=\"#alphatokens-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Selects substrings of consecutive bytes from the ranges a-z and A-Z.Returns an array of substrings.</p>\n<p><strong>Example:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">alphaTokens</span><span class=\"p\">(</span><span class=\"s1\">&#39;abca1abc&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500alphaTokens(&#39;abca1abc&#39;)\u2500\u2510\n\u2502 [&#39;abca&#39;,&#39;abc&#39;]          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../../query_language/functions/bit_functions/\"></a><a name=\"../functions/bit_functions/\"></a><a name=\"bit_functions/\"></a><a name=\"../../../query_language/functions/bit_functions/\"></a><a name=\"../../../../../query_language/functions/bit_functions/\"></a><a name=\"../../../functions/bit_functions/\"></a><a name=\"../../query_language/functions/bit_functions/\"></a><a name=\"../../functions/bit_functions/\"></a><a name=\"functions/bit_functions/\"></a><a name=\"../../../../../functions/bit_functions/\"></a><a name=\"../../../../functions/bit_functions/\"></a><a name=\"../query_language/functions/bit_functions/\"></a><a name=\"query_language/functions/bit_functions/\"></a><a name=\"../../../../../../functions/bit_functions/\"></a></p>\n<h2 id=\"bit-functions\">Bit functions<a class=\"headerlink\" href=\"#bit-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Bit functions work for any pair of types from UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64, Float32, or Float64.</p>\n<p>The result type is an integer with bits equal to the maximum bits of its arguments. If at least one of the arguments is signed, the result is a signed number. If an argument is a floating-point number, it is cast to Int64.</p>\n<h3 id=\"bitand-a-b\">bitAnd(a, b)<a class=\"headerlink\" href=\"#bitand-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitor-a-b\">bitOr(a, b)<a class=\"headerlink\" href=\"#bitor-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitxor-a-b\">bitXor(a, b)<a class=\"headerlink\" href=\"#bitxor-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitnot-a\">bitNot(a)<a class=\"headerlink\" href=\"#bitnot-a\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitshiftleft-a-b\">bitShiftLeft(a, b)<a class=\"headerlink\" href=\"#bitshiftleft-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitshiftright-a-b\">bitShiftRight(a, b)<a class=\"headerlink\" href=\"#bitshiftright-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitrotateleft-a-b\">bitRotateLeft(a, b)<a class=\"headerlink\" href=\"#bitrotateleft-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bitrotateright-a-b\">bitRotateRight(a, b)<a class=\"headerlink\" href=\"#bitrotateright-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bittest-a-b\">bitTest(a, b)<a class=\"headerlink\" href=\"#bittest-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bittestall-a-b\">bitTestAll(a, b)<a class=\"headerlink\" href=\"#bittestall-a-b\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"bittestany-a-b\">bitTestAny(a, b)<a class=\"headerlink\" href=\"#bittestany-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p><a name=\"../query_language/functions/bitmap_functions/\"></a><a name=\"../../../../query_language/functions/bitmap_functions/\"></a><a name=\"functions/bitmap_functions/\"></a><a name=\"../../../functions/bitmap_functions/\"></a><a name=\"bitmap_functions/\"></a><a name=\"query_language/functions/bitmap_functions/\"></a><a name=\"../../../query_language/functions/bitmap_functions/\"></a><a name=\"../functions/bitmap_functions/\"></a><a name=\"../../functions/bitmap_functions/\"></a><a name=\"../../../../../../functions/bitmap_functions/\"></a><a name=\"../../../../../query_language/functions/bitmap_functions/\"></a><a name=\"../../query_language/functions/bitmap_functions/\"></a><a name=\"../../../../../functions/bitmap_functions/\"></a><a name=\"../../../../functions/bitmap_functions/\"></a></p>\n<h2 id=\"bitmap-functions\">Bitmap functions<a class=\"headerlink\" href=\"#bitmap-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Bitmap functions work for two bitmaps Object value calculation, it is to return new bitmap or cardinality while using formula calculation, such as and, or, xor, and not, etc.</p>\n<p>There are 2 kinds of construction methods for Bitmap Object. One is to be constructed by aggregation function groupBitmap with -State, the other is to be constructed by Array Object. It is also to convert Bitmap Object to Array Object.</p>\n<p>RoaringBitmap is wrapped into a data structure while actual storage of Bitmap objects. When the cardinality is less than or equal to 32, it uses Set objet. When the cardinality is greater than 32, it uses RoaringBitmap object. That is why storage of low cardinality set is faster.</p>\n<p>For more information on RoaringBitmap, see: <a href=\"https://github.com/RoaringBitmap/CRoaring\" rel=\"external nofollow noreferrer\">CRoaring</a>.</p>\n<h3 id=\"bitmap_functions-bitmapbuild\">bitmapBuild<a class=\"headerlink\" href=\"#bitmap_functions-bitmapbuild\" title=\"Permanent link\">&para;</a></h3>\n<p>Build a bitmap from unsigned integer array.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapBuild</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>array</code> \u2013 unsigned integer array.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u252c\u2500toTypeName(bitmapBuild([1, 2, 3, 4, 5]))\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u0001\u0004    \u2502 AggregateFunction(groupBitmap, UInt8)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmaptoarray\">bitmapToArray<a class=\"headerlink\" href=\"#bitmaptoarray\" title=\"Permanent link\">&para;</a></h3>\n<p>Convert bitmap to integer array.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,2,3,4,5] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmap_functions-bitmapsubsetinrange\">bitmapSubsetInRange<a class=\"headerlink\" href=\"#bitmap_functions-bitmapsubsetinrange\" title=\"Permanent link\">&para;</a></h3>\n<p>Return subset in specified range (not include the range_end).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapSubsetInRange</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span> <span class=\"n\">range_start</span><span class=\"p\">,</span> <span class=\"n\">range_end</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 <a href=\"#bitmap_functions-bitmapbuild\">Bitmap object</a>.</li>\n<li><code>range_start</code> \u2013 range start point. Type: <a href=\"#../../data_types/int_uint/\">UInt32</a>.</li>\n<li><code>range_end</code> \u2013 range end point(excluded). Type: <a href=\"#../../data_types/int_uint/\">UInt32</a>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapSubsetInRange</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">0</span><span cla");
            
            document.write("ss=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">,</span><span class=\"mi\">16</span><span class=\"p\">,</span><span class=\"mi\">17</span><span class=\"p\">,</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">19</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">,</span><span class=\"mi\">21</span><span class=\"p\">,</span><span class=\"mi\">22</span><span class=\"p\">,</span><span class=\"mi\">23</span><span class=\"p\">,</span><span class=\"mi\">24</span><span class=\"p\">,</span><span class=\"mi\">25</span><span class=\"p\">,</span><span class=\"mi\">26</span><span class=\"p\">,</span><span class=\"mi\">27</span><span class=\"p\">,</span><span class=\"mi\">28</span><span class=\"p\">,</span><span class=\"mi\">29</span><span class=\"p\">,</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">31</span><span class=\"p\">,</span><span class=\"mi\">32</span><span class=\"p\">,</span><span class=\"mi\">33</span><span class=\"p\">,</span><span class=\"mi\">100</span><span class=\"p\">,</span><span class=\"mi\">200</span><span class=\"p\">,</span><span class=\"mi\">500</span><span class=\"p\">]),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">)))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [30,31,32,33,100] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmap_functions-bitmapsubsetlimit\">bitmapSubsetLimit<a class=\"headerlink\" href=\"#bitmap_functions-bitmapsubsetlimit\" title=\"Permanent link\">&para;</a></h3>\n<p>Return subset of the smallest <code>limit</code> values in set which is no less than <code>range_start</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapSubsetLimit(bitmap, range_start, limit)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 <a href=\"#bitmap_functions-bitmapbuild\">Bitmap object</a>.</li>\n<li><code>range_start</code> \u2013 range start point. Type: <a href=\"#../../data_types/int_uint/\">UInt32</a>.</li>\n<li><code>limit</code> \u2013 subset cardinality upper limit. Type: <a href=\"#../../data_types/int_uint/\">UInt32</a>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapSubsetLimit</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">14</span><span class=\"p\">,</span><span class=\"mi\">15</span><span class=\"p\">,</span><span class=\"mi\">16</span><span class=\"p\">,</span><span class=\"mi\">17</span><span class=\"p\">,</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">19</span><span class=\"p\">,</span><span class=\"mi\">20</span><span class=\"p\">,</span><span class=\"mi\">21</span><span class=\"p\">,</span><span class=\"mi\">22</span><span class=\"p\">,</span><span class=\"mi\">23</span><span class=\"p\">,</span><span class=\"mi\">24</span><span class=\"p\">,</span><span class=\"mi\">25</span><span class=\"p\">,</span><span class=\"mi\">26</span><span class=\"p\">,</span><span class=\"mi\">27</span><span class=\"p\">,</span><span class=\"mi\">28</span><span class=\"p\">,</span><span class=\"mi\">29</span><span class=\"p\">,</span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"mi\">31</span><span class=\"p\">,</span><span class=\"mi\">32</span><span class=\"p\">,</span><span class=\"mi\">33</span><span class=\"p\">,</span><span class=\"mi\">100</span><span class=\"p\">,</span><span class=\"mi\">200</span><span class=\"p\">,</span><span class=\"mi\">500</span><span class=\"p\">]),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">)))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510</span>\n<span class=\"err\">\u2502 [30,31,32,33,100,200,500] \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmap_functions-bitmapcontains\">bitmapContains<a class=\"headerlink\" href=\"#bitmap_functions-bitmapcontains\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether the bitmap contains an element.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapContains</span><span class=\"p\">(</span><span class=\"n\">haystack</span><span class=\"p\">,</span> <span class=\"n\">needle</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>haystack</code> \u2013 <a href=\"#bitmap_functions-bitmapbuild\">Bitmap object</a>, where the function searches.</li>\n<li><code>needle</code> \u2013 Value that the function searches. Type: <a href=\"#../../data_types/int_uint/\">UInt32</a>.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>0 \u2014 If <code>haystack</code> doesn't contain <code>needle</code>.</li>\n<li>1 \u2014 If <code>haystack</code> contains <code>needle</code>.</li>\n</ul>\n<p>Type: <code>UInt8</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapContains</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">9</span><span class=\"p\">]),</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"mi\">9</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502  1  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmaphasany\">bitmapHasAny<a class=\"headerlink\" href=\"#bitmaphasany\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether two bitmaps have intersection by some elements.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapHasAny</span><span class=\"p\">(</span><span class=\"n\">bitmap1</span><span class=\"p\">,</span> <span class=\"n\">bitmap2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>If you are sure that <code>bitmap2</code> contains strictly one element, consider using the <a href=\"#bitmap_functions-bitmapcontains\">bitmapContains</a> function. It works more efficiently.</p>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap*</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Return values</strong></p>\n<ul>\n<li><code>1</code>, if <code>bitmap1</code> and <code>bitmap2</code> have one similar element at least.</li>\n<li><code>0</code>, otherwise.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapHasAny</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502  1  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmaphasall\">bitmapHasAll<a class=\"headerlink\" href=\"#bitmaphasall\" title=\"Permanent link\">&para;</a></h3>\n<p>Analogous to <code>hasAll(array, array)</code> returns 1 if the first bitmap contains all the elements of the second one, 0 otherwise.<br />\nIf the second argument is an empty bitmap then returns 1.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapHasAll</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapHasAll</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><sp");
            
            document.write("an class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502  0  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmapand\">bitmapAnd<a class=\"headerlink\" href=\"#bitmapand\" title=\"Permanent link\">&para;</a></h3>\n<p>Two bitmap and calculation, the result is a new bitmap.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapAnd</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapAnd</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">])))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502 [3] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmapor\">bitmapOr<a class=\"headerlink\" href=\"#bitmapor\" title=\"Permanent link\">&para;</a></h3>\n<p>Two bitmap or calculation, the result is a new bitmap.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapOr</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapOr</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">])))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,2,3,4,5] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmapxor\">bitmapXor<a class=\"headerlink\" href=\"#bitmapxor\" title=\"Permanent link\">&para;</a></h3>\n<p>Two bitmap xor calculation, the result is a new bitmap.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapXor</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapXor</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">])))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,2,4,5] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmapandnot\">bitmapAndnot<a class=\"headerlink\" href=\"#bitmapandnot\" title=\"Permanent link\">&para;</a></h3>\n<p>Two bitmap andnot calculation, the result is a new bitmap.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapAndnot</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapToArray</span><span class=\"p\">(</span><span class=\"n\">bitmapAndnot</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">])))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2510\n\u2502 [1,2] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmapcardinality\">bitmapCardinality<a class=\"headerlink\" href=\"#bitmapcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>Retrun bitmap cardinality of type UInt64.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502   5 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmapmin\">bitmapMin<a class=\"headerlink\" href=\"#bitmapmin\" title=\"Permanent link\">&para;</a></h3>\n<p>Retrun the smallest value of type UInt64 in the set, UINT32_MAX if the set is empty.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapMin(bitmap)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapMin</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   1 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapmax\">bitmapMax<a class=\"headerlink\" href=\"#bitmapmax\" title=\"Permanent link\">&para;</a></h3>\n<p>Retrun the greatest value of type UInt64 in the set, 0 if the set is empty.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">bitmapMax(bitmap)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapMax</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500res\u2500\u2510</span>\n<span class=\"err\">\u2502   5 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<h3 id=\"bitmapandcardinality\">bitmapAndCardinality<a class=\"headerlink\" href=\"#bitmapandcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>Two bitmap and calculation, return cardinality of type UInt64.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapAndCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapAndCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502   1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmaporcardinality\">bitmapOrCardinality<a class=\"headerlin");
            
            document.write("k\" href=\"#bitmaporcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>Two bitmap or calculation, return cardinality of type UInt64.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapOrCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapOrCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502   5 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmapxorcardinality\">bitmapXorCardinality<a class=\"headerlink\" href=\"#bitmapxorcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>Two bitmap xor calculation, return cardinality of type UInt64.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapXorCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapXorCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502   4 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"bitmapandnotcardinality\">bitmapAndnotCardinality<a class=\"headerlink\" href=\"#bitmapandnotcardinality\" title=\"Permanent link\">&para;</a></h3>\n<p>Two bitmap andnot calculation, return cardinality of type UInt64.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">bitmapAndnotCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmap</span><span class=\"p\">,</span><span class=\"n\">bitmap</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>bitmap</code> \u2013 bitmap object.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">bitmapAndnotCardinality</span><span class=\"p\">(</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]),</span><span class=\"n\">bitmapBuild</span><span class=\"p\">([</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">]))</span> <span class=\"k\">AS</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502   2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../../functions/hash_functions/\"></a><a name=\"functions/hash_functions/\"></a><a name=\"../../../functions/hash_functions/\"></a><a name=\"../../../../../../functions/hash_functions/\"></a><a name=\"../../../../../query_language/functions/hash_functions/\"></a><a name=\"../../functions/hash_functions/\"></a><a name=\"../../../query_language/functions/hash_functions/\"></a><a name=\"../../../../query_language/functions/hash_functions/\"></a><a name=\"../query_language/functions/hash_functions/\"></a><a name=\"../../query_language/functions/hash_functions/\"></a><a name=\"../functions/hash_functions/\"></a><a name=\"query_language/functions/hash_functions/\"></a><a name=\"../../../../../functions/hash_functions/\"></a><a name=\"hash_functions/\"></a></p>\n<h2 id=\"hash-functions\">Hash functions<a class=\"headerlink\" href=\"#hash-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Hash functions can be used for the deterministic pseudo-random shuffling of elements.</p>\n<h3 id=\"hash_functions-halfmd5\">halfMD5<a class=\"headerlink\" href=\"#hash_functions-halfmd5\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"#type_conversion_functions-reinterpretAsString\">Interprets</a> all the input parameters as strings and calculates the <a href=\"https://en.wikipedia.org/wiki/MD5\" rel=\"external nofollow noreferrer\">MD5</a> hash value for each of them. Then combines hashes, takes the first 8 bytes of the hash of the resulting string, and interprets them as <code>UInt64</code> in big-endian byte order.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">halfMD5</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p>The function is relatively slow (5 million short strings per second per processor core).<br />\nConsider using the <a href=\"#hash_functions-siphash64\">sipHash64</a> function instead.</p>\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of input parameters. Parameters can be any of the <a href=\"#../../data_types/\">supported data types</a>.</p>\n<p><strong>Returned Value</strong></p>\n<p>A <a href=\"#../../data_types/int_uint/\">UInt64</a> data type hash value.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">halfMD5</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"s1\">&#39;e&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;x&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">),</span> <span class=\"s1\">&#39;mple&#39;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-06-15 23:00:00&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">halfMD5hash</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">halfMD5hash</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500halfMD5hash\u2500\u252c\u2500type\u2500\u2500\u2500\u2510\n\u2502 186182704141653334 \u2502 UInt64 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"hash_functions-md5\">MD5<a class=\"headerlink\" href=\"#hash_functions-md5\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the MD5 from a string and returns the resulting set of bytes as FixedString(16).<br />\nIf you don't need MD5 in particular, but you need a decent cryptographic 128-bit hash, use the 'sipHash128' function instead.<br />\nIf you want to get the same result as output by the md5sum utility, use lower(hex(MD5(s))).</p>\n<h3 id=\"hash_functions-siphash64\">sipHash64<a class=\"headerlink\" href=\"#hash_functions-siphash64\" title=\"Permanent link\">&para;</a></h3>\n<p>Produces a 64-bit <a href=\"https://131002.net/siphash/\" rel=\"external nofollow noreferrer\">SipHash</a> hash value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">sipHash64</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,...)</span>\n</code></pre></div>\n\n\n<p>This is a cryptographic hash function. It works at least three times faster than the <a href=\"#hash_functions-md5\">MD5</a> function.</p>\n<p>Function <a href=\"#type_conversion_functions-reinterpretAsString\">interprets</a> all the input parameters as strings and calculates the hash value for each of them. Then combines hashes by the following algorithm:</p>\n<ol>\n<li>After hashing all the input parameters, the function gets the array of hashes.</li>\n<li>Function takes the first and the second elements and calculates a hash for the array of them.</li>\n<li>Then the function takes the hash value, calculated at the previous step, and the third element of the initial hash array, and calculates a hash for the array of them.</li>\n<li>The previous step is repeated for all the remaining elements of the initial hash array.</li>\n</ol>\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of input parameters. Parameters can be any of the <a href=\"#../../data_types/\">supported data types</a>.</p>\n<p><strong>Returned Value</strong></p>\n<p>A <a href=\"#../../data_types/int_uint/\">UInt64</a> data type hash value.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">sipHash64</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"s1\">&#39;e&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;x&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">),</span> <span class=\"s1\">&#39;mple&#39;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-06-15 23:00:00&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">SipHash</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">SipHash</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500");
            
            document.write("\u2500SipHash\u2500\u252c\u2500type\u2500\u2500\u2500\u2510\n\u2502 13726873534472839665 \u2502 UInt64 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"hash_functions-siphash128\">sipHash128<a class=\"headerlink\" href=\"#hash_functions-siphash128\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates SipHash from a string.<br />\nAccepts a String-type argument. Returns FixedString(16).<br />\nDiffers from sipHash64 in that the final xor-folding state is only done up to 128 bits.</p>\n<h3 id=\"cityhash64\">cityHash64<a class=\"headerlink\" href=\"#cityhash64\" title=\"Permanent link\">&para;</a></h3>\n<p>Produces a 64-bit <a href=\"https://github.com/google/cityhash\" rel=\"external nofollow noreferrer\">CityHash</a> hash value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">cityHash64</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,...)</span>\n</code></pre></div>\n\n\n<p>This is a fast non-cryptographic hash function. It uses the CityHash algorithm for string parameters and implementation-specific fast non-cryptographic hash function for parameters with other data types. The function uses the CityHash combinator to get the final results.</p>\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of input parameters. Parameters can be any of the <a href=\"#../../data_types/\">supported data types</a>.</p>\n<p><strong>Returned Value</strong></p>\n<p>A <a href=\"#../../data_types/int_uint/\">UInt64</a> data type hash value.</p>\n<p><strong>Examples</strong></p>\n<p>Call example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">cityHash64</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"s1\">&#39;e&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;x&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">),</span> <span class=\"s1\">&#39;mple&#39;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-06-15 23:00:00&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">CityHash</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">CityHash</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500CityHash\u2500\u252c\u2500type\u2500\u2500\u2500\u2510\n\u2502 12072650598913549138 \u2502 UInt64 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The following example shows how to compute the checksum of the entire table with accuracy up to the row order:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitXor</span><span class=\"p\">(</span><span class=\"n\">cityHash64</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"k\">table</span>\n</code></pre></div>\n\n\n<h3 id=\"inthash32\">intHash32<a class=\"headerlink\" href=\"#inthash32\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates a 32-bit hash code from any type of integer.<br />\nThis is a relatively fast non-cryptographic hash function of average quality for numbers.</p>\n<h3 id=\"inthash64\">intHash64<a class=\"headerlink\" href=\"#inthash64\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates a 64-bit hash code from any type of integer.<br />\nIt works faster than intHash32. Average quality.</p>\n<h3 id=\"sha1\">SHA1<a class=\"headerlink\" href=\"#sha1\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"sha224\">SHA224<a class=\"headerlink\" href=\"#sha224\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"sha256\">SHA256<a class=\"headerlink\" href=\"#sha256\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates SHA-1, SHA-224, or SHA-256 from a string and returns the resulting set of bytes as FixedString(20), FixedString(28), or FixedString(32).<br />\nThe function works fairly slowly (SHA-1 processes about 5 million short strings per second per processor core, while SHA-224 and SHA-256 process about 2.2 million).<br />\nWe recommend using this function only in cases when you need a specific hash function and you can't select it.<br />\nEven in these cases, we recommend applying the function offline and pre-calculating values when inserting them into the table, instead of applying it in SELECTS.</p>\n<h3 id=\"urlhash-url-n\">URLHash(url[, N])<a class=\"headerlink\" href=\"#urlhash-url-n\" title=\"Permanent link\">&para;</a></h3>\n<p>A fast, decent-quality non-cryptographic hash function for a string obtained from a URL using some type of normalization.<br />\n<code>URLHash(s)</code> \u2013 Calculates a hash from a string without one of the trailing symbols <code>/</code>,<code>?</code> or <code>#</code> at the end, if present.<br />\n<code>URLHash(s, N)</code> \u2013 Calculates a hash from a string up to the N level in the URL hierarchy, without one of the trailing symbols <code>/</code>,<code>?</code> or <code>#</code> at the end, if present.<br />\nLevels are the same as in URLHierarchy. This function is specific to Yandex.Metrica.</p>\n<h3 id=\"farmhash64\">farmHash64<a class=\"headerlink\" href=\"#farmhash64\" title=\"Permanent link\">&para;</a></h3>\n<p>Produces a 64-bit <a href=\"https://github.com/google/farmhash\" rel=\"external nofollow noreferrer\">FarmHash</a> hash value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">farmHash64</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p>The function uses the <code>Hash64</code> method from all <a href=\"https://github.com/google/farmhash/blob/master/src/farmhash.h\" rel=\"external nofollow noreferrer\">available methods</a>.</p>\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of input parameters. Parameters can be any of the <a href=\"#../../data_types/\">supported data types</a>.</p>\n<p><strong>Returned Value</strong></p>\n<p>A <a href=\"#../../data_types/int_uint/\">UInt64</a> data type hash value.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">farmHash64</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"s1\">&#39;e&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;x&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">),</span> <span class=\"s1\">&#39;mple&#39;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-06-15 23:00:00&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">FarmHash</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">FarmHash</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500FarmHash\u2500\u252c\u2500type\u2500\u2500\u2500\u2510\n\u2502 17790458267262532859 \u2502 UInt64 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"hash_functions-javahash\">javaHash<a class=\"headerlink\" href=\"#hash_functions-javahash\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/478a4add975b/src/share/classes/java/lang/String.java#l1452\" rel=\"external nofollow noreferrer\">JavaHash</a> from a string. This hash function is neither fast nor having a good quality. The only reason to use it is when this algorithm is already used in another system and you have to calculate exactly the same result.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">javaHash</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p><strong>Returned value</strong></p>\n<p>A <code>Int32</code> data type hash value.</p>\n<p>Type: <code>javaHash</code>.</p>\n<p><strong>Example</strong></p>\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">javaHash</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, world!&#39;</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500javaHash(&#39;Hello, world!&#39;)\u2500\u2510\n\u2502               -1880044555 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"hash_functions-hivehash\">hiveHash<a class=\"headerlink\" href=\"#hash_functions-hivehash\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates <code>HiveHash</code> from a string.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">hiveHash</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>This is just <a href=\"#hash_functions-javahash\">JavaHash</a> with zeroed out sign bit. This function is used in <a href=\"https://en.wikipedia.org/wiki/Apache_Hive\" rel=\"external nofollow noreferrer\">Apache Hive</a> for versions before 3.0. This hash function is neither fast nor having a good quality. The only reason to use it is when this algorithm is already used in another system and you have to calculate exactly the same result.</p>\n<p><strong>Returned value</strong></p>\n<p>A <code>Int32</code> data type hash value.</p>\n<p>Type: <code>hiveHash</code>.</p>\n<p><strong>Example</strong></p>\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">hiveHash</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, world!&#39;</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500hiveHash(&#39;Hello, world!&#39;)\u2500\u2510\n\u2502                 267439093 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"metrohash64\">metroHash64<a class=\"headerlink\" href=\"#metrohash64\" title=\"Permanent link\">&para;</a></h3>\n<p>Produces a 64-bit <a href=\"http://www.jandrewrogers.com/2015/05/27/metrohash/\" rel=\"external nofollow noreferrer\">MetroHash</a> hash value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n");
            
            document.write("\">metroHash64</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of input parameters. Parameters can be any of the <a href=\"#../../data_types/\">supported data types</a>.</p>\n<p><strong>Returned Value</strong></p>\n<p>A <a href=\"#../../data_types/int_uint/\">UInt64</a> data type hash value.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">metroHash64</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"s1\">&#39;e&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;x&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">),</span> <span class=\"s1\">&#39;mple&#39;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-06-15 23:00:00&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">MetroHash</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">MetroHash</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500MetroHash\u2500\u252c\u2500type\u2500\u2500\u2500\u2510\n\u2502 14235658766382344533 \u2502 UInt64 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"jumpconsistenthash\">jumpConsistentHash<a class=\"headerlink\" href=\"#jumpconsistenthash\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates JumpConsistentHash form a UInt64.<br />\nAccepts two arguments: a UInt64-type key and the number of buckets. Returns Int32.<br />\nFor more information, see the link: <a href=\"https://arxiv.org/pdf/1406.2294.pdf\" rel=\"external nofollow noreferrer\">JumpConsistentHash</a></p>\n<h3 id=\"murmurhash2-32-murmurhash2-64\">murmurHash2_32, murmurHash2_64<a class=\"headerlink\" href=\"#murmurhash2-32-murmurhash2-64\" title=\"Permanent link\">&para;</a></h3>\n<p>Produces a <a href=\"https://github.com/aappleby/smhasher\" rel=\"external nofollow noreferrer\">MurmurHash2</a> hash value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">murmurHash2_32</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n<span class=\"n\">murmurHash2_64</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p>Both functions take a variable number of input parameters. Parameters can be any of the <a href=\"#../../data_types/\">supported data types</a>.</p>\n<p><strong>Returned Value</strong></p>\n<ul>\n<li>The <code>murmurHash2_32</code> function returns hash value having the <a href=\"#../../data_types/int_uint/\">UInt32</a> data type.</li>\n<li>The <code>murmurHash2_64</code> function returns hash value having the <a href=\"#../../data_types/int_uint/\">UInt64</a> data type.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">murmurHash2_64</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"s1\">&#39;e&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;x&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">),</span> <span class=\"s1\">&#39;mple&#39;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-06-15 23:00:00&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">MurmurHash2</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">MurmurHash2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500MurmurHash2\u2500\u252c\u2500type\u2500\u2500\u2500\u2510\n\u2502 11832096901709403633 \u2502 UInt64 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"murmurhash3-32-murmurhash3-64\">murmurHash3_32, murmurHash3_64<a class=\"headerlink\" href=\"#murmurhash3-32-murmurhash3-64\" title=\"Permanent link\">&para;</a></h3>\n<p>Produces a <a href=\"https://github.com/aappleby/smhasher\" rel=\"external nofollow noreferrer\">MurmurHash3</a> hash value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">murmurHash3_32</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n<span class=\"n\">murmurHash3_64</span><span class=\"p\">(</span><span class=\"n\">par1</span><span class=\"p\">,</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p>Both functions take a variable number of input parameters. Parameters can be any of the <a href=\"#../../data_types/\">supported data types</a>.</p>\n<p><strong>Returned Value</strong></p>\n<ul>\n<li>The <code>murmurHash3_32</code> function returns a <a href=\"#../../data_types/int_uint/\">UInt32</a> data type hash value.</li>\n<li>The <code>murmurHash3_64</code> function returns a <a href=\"#../../data_types/int_uint/\">UInt64</a> data type hash value.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">murmurHash3_32</span><span class=\"p\">(</span><span class=\"nb\">array</span><span class=\"p\">(</span><span class=\"s1\">&#39;e&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;x&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">),</span> <span class=\"s1\">&#39;mple&#39;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-06-15 23:00:00&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">MurmurHash3</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">MurmurHash3</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500MurmurHash3\u2500\u252c\u2500type\u2500\u2500\u2500\u2510\n\u2502     2152717 \u2502 UInt32 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"murmurhash3-128\">murmurHash3_128<a class=\"headerlink\" href=\"#murmurhash3-128\" title=\"Permanent link\">&para;</a></h3>\n<p>Produces a 128-bit <a href=\"https://github.com/aappleby/smhasher\" rel=\"external nofollow noreferrer\">MurmurHash3</a> hash value.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">murmurHash3_128</span><span class=\"p\">(</span> <span class=\"n\">expr</span> <span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expressions</a> returning a <a href=\"#../../data_types/string/\">String</a>-type value.</li>\n</ul>\n<p><strong>Returned Value</strong></p>\n<p>A <a href=\"#../../data_types/fixedstring/\">FixedString(16)</a> data type hash value.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">murmurHash3_128</span><span class=\"p\">(</span><span class=\"s1\">&#39;example_string&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">MurmurHash3</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">MurmurHash3</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500MurmurHash3\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500type\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 6\ufffd\u001a1\u001c\ufffd4&quot;S5KT\ufffd~~q \u2502 FixedString(16) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"hash_functions-xxhash32\">xxHash32, xxHash64<a class=\"headerlink\" href=\"#hash_functions-xxhash32\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates <code>xxHash</code> from a string. It is proposed in two flavors, 32 and 64 bits.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">xxHash32</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">);</span>\n\n<span class=\"k\">OR</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">xxHash64</span><span class=\"p\">(</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p><strong>Returned value</strong></p>\n<p>A <code>Uint32</code> or <code>Uint64</code> data type hash value.</p>\n<p>Type: <code>xxHash</code>.</p>\n<p><strong>Example</strong></p>\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">xxHash32</span><span class=\"p\">(</span><span class=\"s1\">&#39;Hello, world!&#39;</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500xxHash32(&#39;Hello, world!&#39;)\u2500\u2510\n\u2502                 834093149 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"http://cyan4973.github.io/xxHash/\" rel=\"external nofollow noreferrer\">xxHash</a>.</li>\n</ul>\n<p><a name=\"random_functions/\"></a><a name=\"../functions/random_functions/\"></a><a name=\"functions/random_functions/\"></a><a name=\"../../../../query_language/functions/random_functions/\"></a><a name=\"../../../../../functions/random_functions/\"></a><a name=\"query_language/functions/random_functions/\"></a><a name=\"../../../../functions/random_functions/\"></a><a name=\"../../functions/random_functions/\"></a><a name=\"../../../functions/random_functions/\"></a><a name=\"../../../../../../functions/random_functions/\"></a><a name=\"../../../../../query_language/functions/random_functions/\"></a><a name=\"../../query_language/functions/random_functions/\"></a><a name=\"../../../query_language/functions/random_functions/\"></a><a name=\"../query_language/functions/random_functions/\"></a></p>\n<h2 id=\"functions-for-generating-pseudo-random-numbers\">Functions for generating pseudo-random numbers<a class=\"headerlink\" href=\"#functions-f");
            
            document.write("or-generating-pseudo-random-numbers\" title=\"Permanent link\">&para;</a></h2>\n<p>Non-cryptographic generators of pseudo-random numbers are used.</p>\n<p>All the functions accept zero arguments or one argument.<br />\nIf an argument is passed, it can be any type, and its value is not used for anything.<br />\nThe only purpose of this argument is to prevent common subexpression elimination, so that two different instances of the same function return different columns with different random numbers.</p>\n<h3 id=\"rand\">rand<a class=\"headerlink\" href=\"#rand\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a pseudo-random UInt32 number, evenly distributed among all UInt32-type numbers.<br />\nUses a linear congruential generator.</p>\n<h3 id=\"rand64\">rand64<a class=\"headerlink\" href=\"#rand64\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a pseudo-random UInt64 number, evenly distributed among all UInt64-type numbers.<br />\nUses a linear congruential generator.</p>\n<h3 id=\"randconstant\">randConstant<a class=\"headerlink\" href=\"#randconstant\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a pseudo-random UInt32 number, The value is one for different blocks.</p>\n<p><a name=\"../../query_language/functions/encoding_functions/\"></a><a name=\"../../../../../query_language/functions/encoding_functions/\"></a><a name=\"../functions/encoding_functions/\"></a><a name=\"query_language/functions/encoding_functions/\"></a><a name=\"../../../../query_language/functions/encoding_functions/\"></a><a name=\"../../../query_language/functions/encoding_functions/\"></a><a name=\"encoding_functions/\"></a><a name=\"../../functions/encoding_functions/\"></a><a name=\"../../../../functions/encoding_functions/\"></a><a name=\"../../../../../../functions/encoding_functions/\"></a><a name=\"../query_language/functions/encoding_functions/\"></a><a name=\"functions/encoding_functions/\"></a><a name=\"../../../../../functions/encoding_functions/\"></a><a name=\"../../../functions/encoding_functions/\"></a></p>\n<h2 id=\"encoding-functions\">Encoding functions<a class=\"headerlink\" href=\"#encoding-functions\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"hex\">hex<a class=\"headerlink\" href=\"#hex\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts arguments of types: <code>String</code>, <code>unsigned integer</code>, <code>Date</code>, or <code>DateTime</code>. Returns a string containing the argument's hexadecimal representation. Uses uppercase letters <code>A-F</code>. Does not use <code>0x</code> prefixes or <code>h</code> suffixes. For strings, all bytes are simply encoded as two hexadecimal numbers. Numbers are converted to big endian (\"human readable\") format. For numbers, older zeros are trimmed, but only by entire bytes. For example, <code>hex (1) = '01'</code>. <code>Date</code> is encoded as the number of days since the beginning of the Unix epoch. <code>DateTime</code> is encoded as the number of seconds since the beginning of the Unix epoch.</p>\n<h3 id=\"unhex-str\">unhex(str)<a class=\"headerlink\" href=\"#unhex-str\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a string containing any number of hexadecimal digits, and returns a string containing the corresponding bytes. Supports both uppercase and lowercase letters A-F. The number of hexadecimal digits does not have to be even. If it is odd, the last digit is interpreted as the younger half of the 00-0F byte. If the argument string contains anything other than hexadecimal digits, some implementation-defined result is returned (an exception isn't thrown).<br />\nIf you want to convert the result to a number, you can use the 'reverse' and 'reinterpretAsType' functions.</p>\n<h3 id=\"uuidstringtonum-str\">UUIDStringToNum(str)<a class=\"headerlink\" href=\"#uuidstringtonum-str\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a string containing 36 characters in the format <code>123e4567-e89b-12d3-a456-426655440000</code>, and returns it as a set of bytes in a FixedString(16).</p>\n<h3 id=\"uuidnumtostring-str\">UUIDNumToString(str)<a class=\"headerlink\" href=\"#uuidnumtostring-str\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a FixedString(16) value. Returns a string containing 36 characters in text format.</p>\n<h3 id=\"bitmasktolist-num\">bitmaskToList(num)<a class=\"headerlink\" href=\"#bitmasktolist-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts an integer. Returns a string containing the list of powers of two that total the source number when summed. They are comma-separated without spaces in text format, in ascending order.</p>\n<h3 id=\"bitmasktoarray-num\">bitmaskToArray(num)<a class=\"headerlink\" href=\"#bitmasktoarray-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts an integer. Returns an array of UInt64 numbers containing the list of powers of two that total the source number when summed. Numbers in the array are in ascending order.</p>\n<p><a name=\"../../query_language/functions/uuid_functions/\"></a><a name=\"../../../../functions/uuid_functions/\"></a><a name=\"../../../../../functions/uuid_functions/\"></a><a name=\"../../functions/uuid_functions/\"></a><a name=\"../../../../../query_language/functions/uuid_functions/\"></a><a name=\"query_language/functions/uuid_functions/\"></a><a name=\"../../../query_language/functions/uuid_functions/\"></a><a name=\"../../../../query_language/functions/uuid_functions/\"></a><a name=\"../query_language/functions/uuid_functions/\"></a><a name=\"functions/uuid_functions/\"></a><a name=\"../../../functions/uuid_functions/\"></a><a name=\"uuid_functions/\"></a><a name=\"../../../../../../functions/uuid_functions/\"></a><a name=\"../functions/uuid_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-uuid\">Functions for working with UUID<a class=\"headerlink\" href=\"#functions-for-working-with-uuid\" title=\"Permanent link\">&para;</a></h2>\n<p>The functions for working with UUID are listed below.</p>\n<h3 id=\"uuid_function-generate\">generateUUIDv4<a class=\"headerlink\" href=\"#uuid_function-generate\" title=\"Permanent link\">&para;</a></h3>\n<p>Generates the <a href=\"#../../data_types/uuid/\">UUID</a> of <a href=\"https://tools.ietf.org/html/rfc4122#section-4.4\" rel=\"external nofollow noreferrer\">version 4</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">generateUUIDv4</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<p><strong>Returned value</strong></p>\n<p>The UUID type value.</p>\n<p><strong>Usage example</strong></p>\n<p>This example demonstrates creating a table with the UUID type column and inserting a value into the table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_uuid</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"n\">UUID</span><span class=\"p\">)</span> <span class=\"n\">ENGINE</span><span class=\"o\">=</span><span class=\"n\">TinyLog</span>\n\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t_uuid</span> <span class=\"k\">SELECT</span> <span class=\"n\">generateUUIDv4</span><span class=\"p\">()</span>\n\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_uuid</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u2510\n\u2502 f4bf890f-f9dc-4332-ad5c-0c18e73f28e9 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"touuid-x\">toUUID (x)<a class=\"headerlink\" href=\"#touuid-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts String type value to UUID type.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">toUUID</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Returned value</strong></p>\n<p>The UUID type value.</p>\n<p><strong>Usage example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toUUID</span><span class=\"p\">(</span><span class=\"s1\">&#39;61f0c404-5cb3-11e7-907b-a6006ad3dba0&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">uuid</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500uuid\u2500\u2510\n\u2502 61f0c404-5cb3-11e7-907b-a6006ad3dba0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"uuidstringtonum\">UUIDStringToNum<a class=\"headerlink\" href=\"#uuidstringtonum\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a string containing 36 characters in the format <code>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</code>, and returns it as a set of bytes in a <a href=\"#../../data_types/fixedstring/\">FixedString(16)</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">UUIDStringToNum</span><span class=\"p\">(</span><span class=\"n\">String</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Returned value</strong></p>\n<p>FixedString(16)</p>\n<p><strong>Usage examples</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"s1\">&#39;612f3c40-5d3b-217e-707b-6a546a3d7b29&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">uuid</span><span class=\"p\">,</span>\n    <span class=\"n\">UUIDStringToNum</span><span class=\"p\">(</span><span class=\"n\">uuid</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">bytes</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500uuid\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500bytes\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 612f3c40-5d3b-217e-707b-6a546a3d7b29 \u2502 a/&lt;@];!~p{jTj={) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"uuidnumtostring\">UUIDNumToString<a class=\"headerlink\" href=\"#uuidnumtostring\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a <a href=\"#../../data_types/fixedstring/\">FixedString(16)</a> value, and returns a string containing 36 characters in text format.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">UUIDNumToString</span><span class=\"p\">(</span><span class=\"n\">FixedString</span><span class=\"p\">(</span><span class=\"mi\">16</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<p><strong>Returned value</strong></p>\n<p>String.</p>\n<p><strong>Usage example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <s");
            
            document.write("pan class=\"s1\">&#39;a/&lt;@];!~p{jTj={)&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">bytes</span><span class=\"p\">,</span>\n    <span class=\"n\">UUIDNumToString</span><span class=\"p\">(</span><span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">bytes</span><span class=\"p\">,</span> <span class=\"mi\">16</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">uuid</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500bytes\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500uuid\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a/&lt;@];!~p{jTj={) \u2502 612f3c40-5d3b-217e-707b-6a546a3d7b29 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_3\">See also<a class=\"headerlink\" href=\"#see-also_3\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#ext_dict_functions-other\">dictGetUUID</a></li>\n</ul>\n<p><a name=\"../../../../query_language/functions/url_functions/\"></a><a name=\"../../../../functions/url_functions/\"></a><a name=\"../../../../../functions/url_functions/\"></a><a name=\"functions/url_functions/\"></a><a name=\"../../query_language/functions/url_functions/\"></a><a name=\"../../functions/url_functions/\"></a><a name=\"../../../query_language/functions/url_functions/\"></a><a name=\"query_language/functions/url_functions/\"></a><a name=\"../query_language/functions/url_functions/\"></a><a name=\"../functions/url_functions/\"></a><a name=\"../../../../../query_language/functions/url_functions/\"></a><a name=\"../../../../../../functions/url_functions/\"></a><a name=\"../../../functions/url_functions/\"></a><a name=\"url_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-urls\">Functions for working with URLs<a class=\"headerlink\" href=\"#functions-for-working-with-urls\" title=\"Permanent link\">&para;</a></h2>\n<p>All these functions don't follow the RFC. They are maximally simplified for improved performance.</p>\n<h3 id=\"functions-that-extract-parts-of-a-url\">Functions that Extract Parts of a URL<a class=\"headerlink\" href=\"#functions-that-extract-parts-of-a-url\" title=\"Permanent link\">&para;</a></h3>\n<p>If the relevant part isn't present in a URL, an empty string is returned.</p>\n<h4 id=\"protocol\">protocol<a class=\"headerlink\" href=\"#protocol\" title=\"Permanent link\">&para;</a></h4>\n<p>Extracts the protocol from a URL.</p>\n<p>Examples of typical returned values: http, https, ftp, mailto, tel, magnet...</p>\n<h4 id=\"domain\">domain<a class=\"headerlink\" href=\"#domain\" title=\"Permanent link\">&para;</a></h4>\n<p>Extracts the hostname from a URL.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">domain</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>url</code> \u2014 URL. Type: <a href=\"#../../data_types/string/\">String</a>.</li>\n</ul>\n<p>The URL can be specified with or without a scheme. Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>svn+ssh://some.svn-hosting.com:80/repo/trunk\nsome.svn-hosting.com:80/repo/trunk\nhttps://yandex.com/time/\n</code></pre></div>\n\n\n<p>For these examples, the <code>domain</code> function returns the following results:</p>\n<div class=\"codehilite\"><pre><span></span><code>some.svn-hosting.com\nsome.svn-hosting.com\nyandex.com\n</code></pre></div>\n\n\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Host name. If ClickHouse can parse the input string as a URL.</li>\n<li>Empty string. If ClickHouse can't parse the input string as a URL.</li>\n</ul>\n<p>Type: <code>String</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">domain</span><span class=\"p\">(</span><span class=\"s1\">&#39;svn+ssh://some.svn-hosting.com:80/repo/trunk&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500domain(&#39;svn+ssh://some.svn-hosting.com:80/repo/trunk&#39;)\u2500\u2510\n\u2502 some.svn-hosting.com                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"domainwithoutwww\">domainWithoutWWW<a class=\"headerlink\" href=\"#domainwithoutwww\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the domain and removes no more than one 'www.' from the beginning of it, if present.</p>\n<h4 id=\"topleveldomain\">topLevelDomain<a class=\"headerlink\" href=\"#topleveldomain\" title=\"Permanent link\">&para;</a></h4>\n<p>Extracts the the top-level domain from a URL.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">topLevelDomain</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>url</code> \u2014 URL. Type: <a href=\"#../../data_types/string/\">String</a>.</li>\n</ul>\n<p>The URL can be specified with or without a scheme. Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>svn+ssh://some.svn-hosting.com:80/repo/trunk\nsome.svn-hosting.com:80/repo/trunk\nhttps://yandex.com/time/\n</code></pre></div>\n\n\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Domain name. If ClickHouse can parse the input string as a URL.</li>\n<li>Empty string. If ClickHouse cannot parse the input string as a URL.</li>\n</ul>\n<p>Type: <code>String</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">topLevelDomain</span><span class=\"p\">(</span><span class=\"s1\">&#39;svn+ssh://www.some.svn-hosting.com:80/repo/trunk&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500topLevelDomain(&#39;svn+ssh://www.some.svn-hosting.com:80/repo/trunk&#39;)\u2500\u2510\n\u2502 com                                                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"firstsignificantsubdomain\">firstSignificantSubdomain<a class=\"headerlink\" href=\"#firstsignificantsubdomain\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the \"first significant subdomain\". This is a non-standard concept specific to Yandex.Metrica. The first significant subdomain is a second-level domain if it is 'com', 'net', 'org', or 'co'. Otherwise, it is a third-level domain. For example, firstSignificantSubdomain ('<a href=\"https://news.yandex.ru/\">https://news.yandex.ru/</a>') = 'yandex ', firstSignificantSubdomain ('<a href=\"https://news.yandex.com.tr/\">https://news.yandex.com.tr/</a>') = 'yandex '. The list of \"insignificant\" second-level domains and other implementation details may change in the future.</p>\n<h4 id=\"cuttofirstsignificantsubdomain\">cutToFirstSignificantSubdomain<a class=\"headerlink\" href=\"#cuttofirstsignificantsubdomain\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the part of the domain that includes top-level subdomains up to the \"first significant subdomain\" (see the explanation above).</p>\n<p>For example, <code>cutToFirstSignificantSubdomain('https://news.yandex.com.tr/') = 'yandex.com.tr'</code>.</p>\n<h4 id=\"path\">path<a class=\"headerlink\" href=\"#path\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the path. Example: <code>/top/news.html</code> The path does not include the query string.</p>\n<h4 id=\"pathfull\">pathFull<a class=\"headerlink\" href=\"#pathfull\" title=\"Permanent link\">&para;</a></h4>\n<p>The same as above, but including query string and fragment. Example: /top/news.html?page=2#comments</p>\n<h4 id=\"querystring\">queryString<a class=\"headerlink\" href=\"#querystring\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the query string. Example: page=1&amp;lr=213. query-string does not include the initial question mark, as well as # and everything after #.</p>\n<h4 id=\"fragment\">fragment<a class=\"headerlink\" href=\"#fragment\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the fragment identifier. fragment does not include the initial hash symbol.</p>\n<h4 id=\"querystringandfragment\">queryStringAndFragment<a class=\"headerlink\" href=\"#querystringandfragment\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the query string and fragment identifier. Example: page=1#29390.</p>\n<h4 id=\"extracturlparameter-url-name\">extractURLParameter(URL, name)<a class=\"headerlink\" href=\"#extracturlparameter-url-name\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the value of the 'name' parameter in the URL, if present. Otherwise, an empty string. If there are many parameters with this name, it returns the first occurrence. This function works under the assumption that the parameter name is encoded in the URL exactly the same way as in the passed argument.</p>\n<h4 id=\"extracturlparameters-url\">extractURLParameters(URL)<a class=\"headerlink\" href=\"#extracturlparameters-url\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array of name=value strings corresponding to the URL parameters. The values are not decoded in any way.</p>\n<h4 id=\"extracturlparameternames-url\">extractURLParameterNames(URL)<a class=\"headerlink\" href=\"#extracturlparameternames-url\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array of name strings corresponding to the names of URL parameters. The values are not decoded in any way.</p>\n<h4 id=\"urlhierarchy-url\">URLHierarchy(URL)<a class=\"headerlink\" href=\"#urlhierarchy-url\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array containing the URL, truncated at the end by the symbols /,? in the path and query-string. Consecutive separator characters are counted as one. The cut is made in the position after all the consecutive separator characters.</p>\n<h4 id=\"urlpathhierarchy-url\">URLPathHierarchy(URL)<a class=\"headerlink\" href=\"#urlpathhierarchy-url\" title=\"Permanent link\">&para;</a></h4>\n<p>The same as above, but without the protocol and host in the result. The / element (root) is not included. Example: the function is used to implement tree reports the URL in Yandex. Metric.</p>\n<div class=\"codehilite\"><pre><span></span><code>URLPathHierarchy(&#39;https://example.com/browse/CONV-6788&#39;) =\n[\n    &#39;/browse/&#39;,\n    &#39;/browse/CONV-6788&#39;\n]\n</code></pre></div>\n\n\n<h4 id=\"decodeurlcomponent-url\">decodeURLComponent(URL)<a class=\"headerlink\" href=\"#decodeurlcomponent-url\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the dec");
            
            document.write("oded URL.<br />\nExample:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">decodeURLComponent</span><span class=\"p\">(</span><span class=\"s1\">&#39;http://127.0.0.1:8123/?query=SELECT%201%3B&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">DecodedURL</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500DecodedURL\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 http://127.0.0.1:8123/?query=SELECT 1; \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"functions-that-remove-part-of-a-url\">Functions that remove part of a URL.<a class=\"headerlink\" href=\"#functions-that-remove-part-of-a-url\" title=\"Permanent link\">&para;</a></h3>\n<p>If the URL doesn't have anything similar, the URL remains unchanged.</p>\n<h4 id=\"cutwww\">cutWWW<a class=\"headerlink\" href=\"#cutwww\" title=\"Permanent link\">&para;</a></h4>\n<p>Removes no more than one 'www.' from the beginning of the URL's domain, if present.</p>\n<h4 id=\"cutquerystring\">cutQueryString<a class=\"headerlink\" href=\"#cutquerystring\" title=\"Permanent link\">&para;</a></h4>\n<p>Removes query string. The question mark is also removed.</p>\n<h4 id=\"cutfragment\">cutFragment<a class=\"headerlink\" href=\"#cutfragment\" title=\"Permanent link\">&para;</a></h4>\n<p>Removes the fragment identifier. The number sign is also removed.</p>\n<h4 id=\"cutquerystringandfragment\">cutQueryStringAndFragment<a class=\"headerlink\" href=\"#cutquerystringandfragment\" title=\"Permanent link\">&para;</a></h4>\n<p>Removes the query string and fragment identifier. The question mark and number sign are also removed.</p>\n<h4 id=\"cuturlparameter-url-name\">cutURLParameter(URL, name)<a class=\"headerlink\" href=\"#cuturlparameter-url-name\" title=\"Permanent link\">&para;</a></h4>\n<p>Removes the 'name' URL parameter, if present. This function works under the assumption that the parameter name is encoded in the URL exactly the same way as in the passed argument.</p>\n<p><a name=\"../../../../functions/ip_address_functions/\"></a><a name=\"../../../../../../functions/ip_address_functions/\"></a><a name=\"ip_address_functions/\"></a><a name=\"../../query_language/functions/ip_address_functions/\"></a><a name=\"../../../../../functions/ip_address_functions/\"></a><a name=\"../../functions/ip_address_functions/\"></a><a name=\"../../../query_language/functions/ip_address_functions/\"></a><a name=\"../../../functions/ip_address_functions/\"></a><a name=\"../query_language/functions/ip_address_functions/\"></a><a name=\"functions/ip_address_functions/\"></a><a name=\"../../../../query_language/functions/ip_address_functions/\"></a><a name=\"../functions/ip_address_functions/\"></a><a name=\"../../../../../query_language/functions/ip_address_functions/\"></a><a name=\"query_language/functions/ip_address_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-ip-addresses\">Functions for working with IP addresses<a class=\"headerlink\" href=\"#functions-for-working-with-ip-addresses\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"ipv4numtostring-num\">IPv4NumToString(num)<a class=\"headerlink\" href=\"#ipv4numtostring-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Takes a UInt32 number. Interprets it as an IPv4 address in big endian. Returns a string containing the corresponding IPv4 address in the format A.B.C.d (dot-separated numbers in decimal form).</p>\n<h3 id=\"ipv4stringtonum-s\">IPv4StringToNum(s)<a class=\"headerlink\" href=\"#ipv4stringtonum-s\" title=\"Permanent link\">&para;</a></h3>\n<p>The reverse function of IPv4NumToString. If the IPv4 address has an invalid format, it returns 0.</p>\n<h3 id=\"ipv4numtostringclassc-num\">IPv4NumToStringClassC(num)<a class=\"headerlink\" href=\"#ipv4numtostringclassc-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Similar to IPv4NumToString, but using xxx instead of the last octet.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">IPv4NumToStringClassC</span><span class=\"p\">(</span><span class=\"n\">ClientIP</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500k\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500c\u2500\u2510\n\u2502 83.149.9.xxx   \u2502 26238 \u2502\n\u2502 217.118.81.xxx \u2502 26074 \u2502\n\u2502 213.87.129.xxx \u2502 25481 \u2502\n\u2502 83.149.8.xxx   \u2502 24984 \u2502\n\u2502 217.118.83.xxx \u2502 22797 \u2502\n\u2502 78.25.120.xxx  \u2502 22354 \u2502\n\u2502 213.87.131.xxx \u2502 21285 \u2502\n\u2502 78.25.121.xxx  \u2502 20887 \u2502\n\u2502 188.162.65.xxx \u2502 19694 \u2502\n\u2502 83.149.48.xxx  \u2502 17406 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Since using 'xxx' is highly unusual, this may be changed in the future. We recommend that you don't rely on the exact format of this fragment.</p>\n<h4 id=\"ipv6numtostring-x\">IPv6NumToString(x)<a class=\"headerlink\" href=\"#ipv6numtostring-x\" title=\"Permanent link\">&para;</a></h4>\n<p>Accepts a FixedString(16) value containing the IPv6 address in binary format. Returns a string containing this address in text format.<br />\nIPv6-mapped IPv4 addresses are output in the format ::ffff:111.222.33.44. Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"n\">toFixedString</span><span class=\"p\">(</span><span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"s1\">&#39;2A0206B8000000000000000000000011&#39;</span><span class=\"p\">),</span> <span class=\"mi\">16</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">addr</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500addr\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2a02:6b8::11 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"n\">ClientIP6</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">),</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits_all</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">today</span><span class=\"p\">()</span> <span class=\"k\">AND</span> <span class=\"k\">substring</span><span class=\"p\">(</span><span class=\"n\">ClientIP6</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">12</span><span class=\"p\">)</span> <span class=\"o\">!=</span> <span class=\"n\">unhex</span><span class=\"p\">(</span><span class=\"s1\">&#39;00000000000000000000FFFF&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500IPv6NumToString(ClientIP6)\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500c\u2500\u2510\n\u2502 2a02:2168:aaa:bbbb::2                   \u2502 24695 \u2502\n\u2502 2a02:2698:abcd:abcd:abcd:abcd:8888:5555 \u2502 22408 \u2502\n\u2502 2a02:6b8:0:fff::ff                      \u2502 16389 \u2502\n\u2502 2a01:4f8:111:6666::2                    \u2502 16016 \u2502\n\u2502 2a02:2168:888:222::1                    \u2502 15896 \u2502\n\u2502 2a01:7e00::ffff:ffff:ffff:222           \u2502 14774 \u2502\n\u2502 2a02:8109:eee:ee:eeee:eeee:eeee:eeee    \u2502 14443 \u2502\n\u2502 2a02:810b:8888:888:8888:8888:8888:8888  \u2502 14345 \u2502\n\u2502 2a02:6b8:0:444:4444:4444:4444:4444      \u2502 14279 \u2502\n\u2502 2a01:7e00::ffff:ffff:ffff:ffff          \u2502 13880 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">IPv6NumToString</span><span class=\"p\">(</span><span class=\"n\">ClientIP6</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">),</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hits_all</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"n\">today</span><span class=\"p\">()</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500IPv6NumToString(ClientIP6)\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510\n\u2502 ::ffff:94.26.111.111       \u2502 747440 \u2502\n\u2502 ::ffff:37.143.222.4        \u2502 529483 \u2502\n\u2502 ::ffff:5.166.111.99        \u2502 317707 \u2502\n\u2502 ::ffff:46.38.11.77         \u2502 263086 \u2502\n\u2502 ::ffff:79.105.111.111      \u2502 186611 \u2502\n\u2502 ::ffff:93.92.111.88        \u2502 176773 \u2502\n\u2502 ::ffff:84.53.111.33        \u2502 158709 \u2502\n\u2502 ::ffff:217.118.11.22       \u2502 154004 \u2502\n\u2502 ::ffff:217.118.11.33       \u2502 148449 \u2502\n\u2502 ::ffff:217.118.11.44       \u2502 148243 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"ipv6stringtonum-s\">IPv6StringToNum(s)<a class=\"headerlink\" href=\"#ipv6stringtonum-s\" title=\"Permanent link\">&para;</a></h3>\n<p>The reverse function of IPv6NumToString. If the IPv6 address has an invalid format, it returns a string of null bytes.<br />\nHEX can be uppercase or lowercase.</p>\n<h3 id=\"ipv4toipv6-x\">IPv4ToIPv6(x)<a class=\"headerlink\" href=\"#ipv4toipv6-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Takes a <code>UInt32</code> number. Interprets it as an IPv4 address in <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"external nofollow noreferrer\">big endian</a>. Returns a <code>FixedString(16)</code> value containing the IPv6 address in binary format. Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">IPv6NumToStri");
            
            document.write("ng</span><span class=\"p\">(</span><span class=\"n\">IPv4ToIPv6</span><span class=\"p\">(</span><span class=\"n\">IPv4StringToNum</span><span class=\"p\">(</span><span class=\"s1\">&#39;192.168.0.1&#39;</span><span class=\"p\">)))</span> <span class=\"k\">AS</span> <span class=\"n\">addr</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500addr\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ::ffff:192.168.0.1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"cutipv6-x-bitstocutforipv6-bitstocutforipv4\">cutIPv6(x, bitsToCutForIPv6, bitsToCutForIPv4)<a class=\"headerlink\" href=\"#cutipv6-x-bitstocutforipv6-bitstocutforipv4\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a FixedString(16) value containing the IPv6 address in binary format. Returns a string containing the address of the specified number of bits removed in text format. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"n\">IPv6StringToNum</span><span class=\"p\">(</span><span class=\"s1\">&#39;2001:0DB8:AC10:FE01:FEED:BABE:CAFE:F00D&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">ipv6</span><span class=\"p\">,</span>\n    <span class=\"n\">IPv4ToIPv6</span><span class=\"p\">(</span><span class=\"n\">IPv4StringToNum</span><span class=\"p\">(</span><span class=\"s1\">&#39;192.168.0.1&#39;</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">ipv4</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">cutIPv6</span><span class=\"p\">(</span><span class=\"n\">ipv6</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n    <span class=\"n\">cutIPv6</span><span class=\"p\">(</span><span class=\"n\">ipv4</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500cutIPv6(ipv6, 2, 0)\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500cutIPv6(ipv4, 0, 2)\u2500\u2510\n\u2502 2001:db8:ac10:fe01:feed:babe:cafe:0 \u2502 ::ffff:192.168.0.0  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"ipv4cidrtorange-ipv4-cidr\">IPv4CIDRToRange(ipv4, cidr),<a class=\"headerlink\" href=\"#ipv4cidrtorange-ipv4-cidr\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts an IPv4 and an UInt8 value containing the <a href=\"https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing\" rel=\"external nofollow noreferrer\">CIDR</a>. Return a tuple with two IPv4 containing the lower range and the higher range of the subnet.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">IPv4CIDRToRange</span><span class=\"p\">(</span><span class=\"n\">toIPv4</span><span class=\"p\">(</span><span class=\"s1\">&#39;192.168.5.2&#39;</span><span class=\"p\">),</span> <span class=\"mi\">16</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500IPv4CIDRToRange(toIPv4(&#39;192.168.5.2&#39;), 16)\u2500\u2510\n\u2502 (&#39;192.168.0.0&#39;,&#39;192.168.255.255&#39;)          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"ipv6cidrtorange-ipv6-cidr\">IPv6CIDRToRange(ipv6, cidr),<a class=\"headerlink\" href=\"#ipv6cidrtorange-ipv6-cidr\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts an IPv6 and an UInt8 value containing the CIDR. Return a tuple with two IPv6 containing the lower range and the higher range of the subnet.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">IPv6CIDRToRange</span><span class=\"p\">(</span><span class=\"n\">toIPv6</span><span class=\"p\">(</span><span class=\"s1\">&#39;2001:0db8:0000:85a3:0000:0000:ac1f:8001&#39;</span><span class=\"p\">),</span> <span class=\"mi\">32</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500IPv6CIDRToRange(toIPv6(&#39;2001:0db8:0000:85a3:0000:0000:ac1f:8001&#39;), 32)\u2500\u2510\n\u2502 (&#39;2001:db8::&#39;,&#39;2001:db8:ffff:ffff:ffff:ffff:ffff:ffff&#39;)                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"toipv4-string\">toIPv4(string)<a class=\"headerlink\" href=\"#toipv4-string\" title=\"Permanent link\">&para;</a></h3>\n<p>An alias to <code>IPv4StringToNum()</code> that takes a string form of IPv4 address and returns value of <a href=\"#../../data_types/domains/ipv4/\">IPv4</a> type, which is binary equal to value returned by <code>IPv4StringToNum()</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"s1\">&#39;171.225.130.45&#39;</span> <span class=\"k\">as</span> <span class=\"n\">IPv4_string</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">IPv4StringToNum</span><span class=\"p\">(</span><span class=\"n\">IPv4_string</span><span class=\"p\">)),</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">toIPv4</span><span class=\"p\">(</span><span class=\"n\">IPv4_string</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(IPv4StringToNum(IPv4_string))\u2500\u252c\u2500toTypeName(toIPv4(IPv4_string))\u2500\u2510\n\u2502 UInt32                                   \u2502 IPv4                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"s1\">&#39;171.225.130.45&#39;</span> <span class=\"k\">as</span> <span class=\"n\">IPv4_string</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"n\">IPv4StringToNum</span><span class=\"p\">(</span><span class=\"n\">IPv4_string</span><span class=\"p\">)),</span>\n    <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"n\">toIPv4</span><span class=\"p\">(</span><span class=\"n\">IPv4_string</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500hex(IPv4StringToNum(IPv4_string))\u2500\u252c\u2500hex(toIPv4(IPv4_string))\u2500\u2510\n\u2502 ABE1822D                          \u2502 ABE1822D                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"toipv6-string\">toIPv6(string)<a class=\"headerlink\" href=\"#toipv6-string\" title=\"Permanent link\">&para;</a></h3>\n<p>An alias to <code>IPv6StringToNum()</code> that takes a string form of IPv6 address and returns value of <a href=\"#../../data_types/domains/ipv6/\">IPv6</a> type, which is binary equal to value returned by <code>IPv6StringToNum()</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"s1\">&#39;2001:438:ffff::407d:1bc1&#39;</span> <span class=\"k\">as</span> <span class=\"n\">IPv6_string</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">IPv6StringToNum</span><span class=\"p\">(</span><span class=\"n\">IPv6_string</span><span class=\"p\">)),</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">toIPv6</span><span class=\"p\">(</span><span class=\"n\">IPv6_string</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(IPv6StringToNum(IPv6_string))\u2500\u252c\u2500toTypeName(toIPv6(IPv6_string))\u2500\u2510\n\u2502 FixedString(16)                          \u2502 IPv6                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span>\n    <span class=\"s1\">&#39;2001:438:ffff::407d:1bc1&#39;</span> <span class=\"k\">as</span> <span class=\"n\">IPv6_string</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"n\">IPv6StringToNum</span><span class=\"p\">(</span><span class=\"n\">IPv6_string</span><span class=\"p\">)),</span>\n    <span class=\"n\">hex</span><span class=\"p\">(</span><span class=\"n\">toIPv6</span><span class=\"p\">(</span><span class=\"n\">IPv6_string</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500hex(IPv6StringToNum(IPv6_string))\u2500\u252c\u2500hex(toIPv6(IPv6_string))\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 20010438FFFF000000000000407D1BC1  \u2502 20010438FFFF000000000000407D1BC1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../../../functions/json_functions/\"></a><a name=\"../functions/json_functions/\"></a><a name=\"../../../../functions/json_functions/\"></a><a name=\"../../../../query_language/functions/json_functions/\"></a><a name=\"../../../query_language/functions/json_functions/\"></a><a name=\"../../functions/json_functions/\"></a><a name=\"query_language/functions/json_functions/\"></a><a name=\"../../../../../query_language/functions/json_functions/\"></a><a name=\"../../../functions/json_functions/\"></a><a name=\"../../../../../../functions/json_functions/\"></a><a name=\"../../query_language/functions/json_functions/\"></a><a name=\"json_functions/\"></a><a name=\"functions/json_functions/\"></a><a name=\"../query_language/functions/json_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-json\">Functions for working with JSON<a class=\"headerlink\" href=\"#functions-for-working-with-json\" title=\"Permanent link\">&para;</a></h2>\n<p>In Yandex.Metrica, JSON is transmitted by users as session parameters. There are some special functions for working with this JSON. (Although in most of the cases, the JSONs are additionally pre-processed, and the resulting values are put in separate columns in their processed format.) All these functions are based on strong assumptions about what the JSON can be, but they try to do as little as possible to get the job done.</p>\n<p>The following assumptions are made:</p>\n<ol>\n<li>The field name (function argument) must be a constant.</li>\n<li>The field name is somehow canonically encoded in JSON. For example: <code>visitParamHas('{\"abc\":\"def\"}', 'abc') = 1</code>, but <code>visitParamHas('{\"\\\\u0061\\\\u0062\\\\u0063\":\"def\"}', 'abc') = 0</code></li>\n<li>Fields are searched for on any nesting level, indiscriminately. If there are multiple matching fields, the first occurrence is u");
            
            document.write("sed.</li>\n<li>The JSON doesn't have space characters outside of string literals.</li>\n</ol>\n<h3 id=\"visitparamhas-params-name\">visitParamHas(params, name)<a class=\"headerlink\" href=\"#visitparamhas-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether there is a field with the 'name' name.</p>\n<h3 id=\"visitparamextractuint-params-name\">visitParamExtractUInt(params, name)<a class=\"headerlink\" href=\"#visitparamextractuint-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>Parses UInt64 from the value of the field named 'name'. If this is a string field, it tries to parse a number from the beginning of the string. If the field doesn't exist, or it exists but doesn't contain a number, it returns 0.</p>\n<h3 id=\"visitparamextractint-params-name\">visitParamExtractInt(params, name)<a class=\"headerlink\" href=\"#visitparamextractint-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as for Int64.</p>\n<h3 id=\"visitparamextractfloat-params-name\">visitParamExtractFloat(params, name)<a class=\"headerlink\" href=\"#visitparamextractfloat-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as for Float64.</p>\n<h3 id=\"visitparamextractbool-params-name\">visitParamExtractBool(params, name)<a class=\"headerlink\" href=\"#visitparamextractbool-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>Parses a true/false value. The result is UInt8.</p>\n<h3 id=\"visitparamextractraw-params-name\">visitParamExtractRaw(params, name)<a class=\"headerlink\" href=\"#visitparamextractraw-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the value of a field, including separators.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">visitParamExtractRaw</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;\\\\n\\\\u0000&quot;}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&quot;\\\\n\\\\u0000&quot;&#39;</span>\n<span class=\"n\">visitParamExtractRaw</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:{&quot;def&quot;:[1,2,3]}}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;{&quot;def&quot;:[1,2,3]}&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"visitparamextractstring-params-name\">visitParamExtractString(params, name)<a class=\"headerlink\" href=\"#visitparamextractstring-params-name\" title=\"Permanent link\">&para;</a></h3>\n<p>Parses the string in double quotes. The value is unescaped. If unescaping failed, it returns an empty string.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">visitParamExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;\\\\n\\\\u0000&quot;}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;\\n\\0&#39;</span>\n<span class=\"n\">visitParamExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;\\\\u263a&quot;}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;\u263a&#39;</span>\n<span class=\"n\">visitParamExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;\\\\u263&quot;}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&#39;</span>\n<span class=\"n\">visitParamExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;hello}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&#39;</span>\n</code></pre></div>\n\n\n<p>There is currently no support for code points in the format <code>\\uXXXX\\uYYYY</code> that are not from the basic multilingual plane (they are converted to CESU-8 instead of UTF-8).</p>\n<p>The following functions are based on <a href=\"https://github.com/lemire/simdjson\" rel=\"external nofollow noreferrer\">simdjson</a> designed for more complex JSON parsing requirements. The assumption 2 mentioned above still applies.</p>\n<h3 id=\"jsonhas-json-indices-or-keys\">JSONHas(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonhas-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>If the value exists in the JSON document, <code>1</code> will be returned.</p>\n<p>If the value does not exist, <code>0</code> will be returned.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONHas</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONHas</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n\n<p><code>indices_or_keys</code> is a list of zero or more arguments each of them can be either string or integer.</p>\n<ul>\n<li>String = access object member by key.</li>\n<li>Positive integer = access the n-th member/key from the beginning.</li>\n<li>Negative integer = access the n-th member/key from the end.</li>\n</ul>\n<p>Minimum index of the element is 1. Thus the element 0 doesn't exist.</p>\n<p>You may use integers to access both JSON arrays and JSON objects.</p>\n<p>So, for example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractKey</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;a&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractKey</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;b&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractKey</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;b&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractKey</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;a&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;hello&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonlength-json-indices-or-keys\">JSONLength(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonlength-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>Return the length of a JSON array or a JSON object.</p>\n<p>If the value does not exist or has a wrong type, <code>0</code> will be returned.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONLength</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">3</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONLength</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<h3 id=\"jsontype-json-indices-or-keys\">JSONType(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsontype-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>Return the type of a JSON value.</p>\n<p>If the value does not exist, <code>Null</code> will be returned.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONType</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Object&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONType</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;String&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONType</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Array&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextractuint-json-indices-or-keys\">JSONExtractUInt(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractuint-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"jsonextractint-json-in");
            
            document.write("dices-or-keys\">JSONExtractInt(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractint-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"jsonextractfloat-json-indices-or-keys\">JSONExtractFloat(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractfloat-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<h3 id=\"jsonextractbool-json-indices-or-keys\">JSONExtractBool(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractbool-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>Parses a JSON and extract a value. These functions are similar to <code>visitParam</code> functions.</p>\n<p>If the value does not exist or has a wrong type, <code>0</code> will be returned.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractInt</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"o\">-</span><span class=\"mi\">100</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractFloat</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">200</span><span class=\"p\">.</span><span class=\"mi\">0</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractUInt</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">300</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextractstring-json-indices-or-keys\">JSONExtractString(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractstring-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>Parses a JSON and extract a string. This function is similar to <code>visitParamExtractString</code> functions.</p>\n<p>If the value does not exist or has a wrong type, an empty string will be returned.</p>\n<p>The value is unescaped. If unescaping failed, it returns an empty string.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;hello&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;\\\\n\\\\u0000&quot;}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;\\n\\0&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;\\\\u263a&quot;}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;\u263a&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;\\\\u263&quot;}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractString</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;abc&quot;:&quot;hello}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextract-json-indices-or-keys-return-type\">JSONExtract(json[, indices_or_keys...], return_type)<a class=\"headerlink\" href=\"#jsonextract-json-indices-or-keys-return-type\" title=\"Permanent link\">&para;</a></h3>\n<p>Parses a JSON and extract a value of the given ClickHouse data type.</p>\n<p>This is a generalization of the previous <code>JSONExtract&lt;type&gt;</code> functions.<br />\nThis means<br />\n<code>JSONExtract(..., 'String')</code> returns exactly the same as <code>JSONExtractString()</code>,<br />\n<code>JSONExtract(..., 'Float64')</code> returns exactly the same as <code>JSONExtractFloat()</code>.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONExtract</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Tuple(String, Array(Float64))&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,[</span><span class=\"o\">-</span><span class=\"mi\">100</span><span class=\"p\">,</span><span class=\"mi\">200</span><span class=\"p\">,</span><span class=\"mi\">300</span><span class=\"p\">])</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtract</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Tuple(b Array(Float64), a String)&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"p\">([</span><span class=\"o\">-</span><span class=\"mi\">100</span><span class=\"p\">,</span><span class=\"mi\">200</span><span class=\"p\">,</span><span class=\"mi\">300</span><span class=\"p\">],</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtract</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Array(Nullable(Int8))&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"k\">NULL</span><span class=\"p\">]</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtract</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Nullable(Int64)&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"k\">NULL</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtract</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;passed&quot;: true}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;passed&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;UInt8&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtract</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;day&quot;: &quot;Thursday&quot;}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;day&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Enum8(\\&#39;</span><span class=\"n\">Sunday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 0, \\&#39;</span><span class=\"n\">Monday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 1, \\&#39;</span><span class=\"n\">Tuesday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 2, \\&#39;</span><span class=\"n\">Wednesday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 3, \\&#39;</span><span class=\"n\">Thursday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 4, \\&#39;</span><span class=\"n\">Friday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 5, \\&#39;</span><span class=\"n\">Saturday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 6)&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Thursday&#39;</span>\n<span class=\"k\">SELECT</span> <span class=\"n\">JSONExtract</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;day&quot;: 5}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;day&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Enum8(\\&#39;</span><span class=\"n\">Sunday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 0, \\&#39;</span><span class=\"n\">Monday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 1, \\&#39;</span><span class=\"n\">Tuesday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 2, \\&#39;</span><span class=\"n\">Wednesday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 3, \\&#39;</span><span class=\"n\">Thursday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 4, \\&#39;</span><span class=\"n\">Friday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 5, \\&#39;</span><span class=\"n\">Saturday</span><span class=\"err\">\\</span><span class=\"s1\">&#39; = 6)&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Friday&#39;</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextractkeysandvalues-json-indices-or-keys-value-type\">JSONExtractKeysAndValues(json[, indices_or_keys...], value_type)<a class=\"headerlink\" href=\"#jsonextractkeysandvalues-json-indices-or-keys-value-type\" title=\"Permanent link\">&para;</a></h3>\n<p>Parse key-value pairs from a JSON where the values are of the given ClickHouse data type.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractKeysAndValues</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;x&quot;: {&quot;a&quot;: 5, &quot;b&qu");
            
            document.write("ot;: 7, &quot;c&quot;: 11}}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;x&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Int8&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"p\">[(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">),(</span><span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">),(</span><span class=\"s1\">&#39;c&#39;</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"p\">)];</span>\n</code></pre></div>\n\n\n<h3 id=\"jsonextractraw-json-indices-or-keys\">JSONExtractRaw(json[, indices_or_keys]...)<a class=\"headerlink\" href=\"#jsonextractraw-json-indices-or-keys\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a part of JSON.</p>\n<p>If the part does not exist or has a wrong type, an empty string will be returned.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">JSONExtractRaw</span><span class=\"p\">(</span><span class=\"s1\">&#39;{&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: [-100, 200.0, 300]}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;[-100, 200.0, 300]&#39;</span>\n</code></pre></div>\n\n\n<p><a name=\"../query_language/functions/higher_order_functions/\"></a><a name=\"../../../../functions/higher_order_functions/\"></a><a name=\"../../../../query_language/functions/higher_order_functions/\"></a><a name=\"../../../../../../functions/higher_order_functions/\"></a><a name=\"higher_order_functions/\"></a><a name=\"../../functions/higher_order_functions/\"></a><a name=\"../functions/higher_order_functions/\"></a><a name=\"../../../functions/higher_order_functions/\"></a><a name=\"../../../../../functions/higher_order_functions/\"></a><a name=\"query_language/functions/higher_order_functions/\"></a><a name=\"functions/higher_order_functions/\"></a><a name=\"../../../../../query_language/functions/higher_order_functions/\"></a><a name=\"../../../query_language/functions/higher_order_functions/\"></a><a name=\"../../query_language/functions/higher_order_functions/\"></a></p>\n<h2 id=\"higher-order-functions\">Higher-order functions<a class=\"headerlink\" href=\"#higher-order-functions\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"operator-lambda-params-expr-function\"><code>-&gt;</code> operator, lambda(params, expr) function<a class=\"headerlink\" href=\"#operator-lambda-params-expr-function\" title=\"Permanent link\">&para;</a></h3>\n<p>Allows describing a lambda function for passing to a higher-order function. The left side of the arrow has a formal parameter, which is any ID, or multiple formal parameters \u2013 any IDs in a tuple. The right side of the arrow has an expression that can use these formal parameters, as well as any table columns.</p>\n<p>Examples: <code>x -&gt; 2 * x, str -&gt; str != Referer.</code></p>\n<p>Higher-order functions can only accept lambda functions as their functional argument.</p>\n<p>A lambda function that accepts multiple arguments can be passed to a higher-order function. In this case, the higher-order function is passed several arrays of identical length that these arguments will correspond to.</p>\n<p>For some functions, such as <a href=\"#higher_order_functions-array-count\">arrayCount</a> or <a href=\"#higher_order_functions-array-count\">arraySum</a>, the first argument (the lambda function) can be omitted. In this case, identical mapping is assumed.</p>\n<p>A lambda function can't be omitted for the following functions:</p>\n<ul>\n<li><a href=\"#higher_order_functions-array-map\">arrayMap</a></li>\n<li><a href=\"#higher_order_functions-array-filter\">arrayFilter</a></li>\n<li><a href=\"#higher_order_functions-array-first\">arrayFirst</a></li>\n<li><a href=\"#higher_order_functions-array-first-index\">arrayFirstIndex</a></li>\n</ul>\n<h4 id=\"higher_order_functions-array-map\">arrayMap(func, arr1, ...)<a class=\"headerlink\" href=\"#higher_order_functions-array-map\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array obtained from the original application of the <code>func</code> function to each element in the <code>arr</code> array. </p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayMap</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">-&gt;</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [3,4,5] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The following example shows how to create a tuple of elements from different arrays:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayMap</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">),</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [(1,4),(2,5),(3,6)] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Note that the first argument (lambda function) can't be omitted in the <code>arrayMap</code> function.</p>\n<h4 id=\"higher_order_functions-array-filter\">arrayFilter(func, arr1, ...)<a class=\"headerlink\" href=\"#higher_order_functions-array-filter\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array containing only the elements in <code>arr1</code> for which <code>func</code> returns something other than 0.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayFilter</span><span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">-&gt;</span> <span class=\"n\">x</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%World%&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc World&#39;</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;abc World&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">arrayFilter</span><span class=\"p\">(</span>\n        <span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">x</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%World%&#39;</span><span class=\"p\">,</span>\n        <span class=\"n\">arrayEnumerate</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">),</span>\n        <span class=\"p\">[</span><span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc World&#39;</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">arr</span><span class=\"p\">)</span>\n    <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502 [2] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Note that the first argument (lambda function) can't be omitted in the <code>arrayFilter</code> function.</p>\n<h4 id=\"higher_order_functions-array-count\">arrayCount([func,] arr1, ...)<a class=\"headerlink\" href=\"#higher_order_functions-array-count\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the number of elements in the arr array for which func returns something other than 0. If 'func' is not specified, it returns the number of non-zero elements in the array.</p>\n<h4 id=\"arrayexists-func-arr1\">arrayExists([func,] arr1, ...)<a class=\"headerlink\" href=\"#arrayexists-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns 1 if there is at least one element in 'arr' for which 'func' returns something other than 0. Otherwise, it returns 0.</p>\n<h4 id=\"arrayall-func-arr1\">arrayAll([func,] arr1, ...)<a class=\"headerlink\" href=\"#arrayall-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns 1 if 'func' returns something other than 0 for all the elements in 'arr'. Otherwise, it returns 0.</p>\n<h4 id=\"higher_order_functions-array-sum\">arraySum([func,] arr1, ...)<a class=\"headerlink\" href=\"#higher_order_functions-array-sum\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the sum of the 'func' values. If the function is omitted, it just returns the sum of the array elements.</p>\n<h4 id=\"higher_order_functions-array-first\">arrayFirst(func, arr1, ...)<a class=\"headerlink\" href=\"#higher_order_functions-array-first\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the first element in the 'arr1' array for which 'func' returns something other than 0.</p>\n<p>Note that the first argument (lambda function) can't be omitted in the <code>arrayFirst</code> function.</p>\n<h4 id=\"higher_order_functions-array-first-index\">arrayFirstIndex(func, arr1, ...)<a class=\"headerlink\" href=\"#higher_order_functions-array-first-index\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns the index of the first element in the 'arr1' array for which 'func' returns something other than 0.</p>\n<p>Note that the first argument (lambda function) can't be omitted in the <code>arrayFirstIndex</code> function.</p>\n<h4 id=\"arraycumsum-func-arr1\">arrayCumSum([func,] arr1, ...)<a class=\"headerl");
            
            document.write("ink\" href=\"#arraycumsum-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array of partial sums of elements in the source array (a running sum). If the <code>func</code> function is specified, then the values of the array elements are converted by this function before summing.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayCumSum</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1, 2, 3, 4] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"arraycumsumnonnegative-arr\">arrayCumSumNonNegative(arr)<a class=\"headerlink\" href=\"#arraycumsumnonnegative-arr\" title=\"Permanent link\">&para;</a></h4>\n<p>Same as <code>arrayCumSum</code>, returns an array of partial sums of elements in the source array (a running sum). Different <code>arrayCumSum</code>, when then returned value contains a value less than zero, the value is replace with zero and the subsequent calculation is performed with zero parameters. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayCumSumNonNegative</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,2,0,1] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"arraysort-func-arr1\">arraySort([func,] arr1, ...)<a class=\"headerlink\" href=\"#arraysort-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array as result of sorting the elements of <code>arr1</code> in ascending order. If the <code>func</code> function is specified, sorting order is determined by the result of the function <code>func</code> applied to the elements of array (arrays)  </p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"external nofollow noreferrer\">Schwartzian transform</a> is used to improve sorting efficiency.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arraySort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;world&#39;, &#39;hello&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>For more information about the <code>arraySort</code> method, see the <a href=\"#array_functions-sort\">Functions for Working With Arrays</a> section.</p>\n<h4 id=\"arrayreversesort-func-arr1\">arrayReverseSort([func,] arr1, ...)<a class=\"headerlink\" href=\"#arrayreversesort-func-arr1\" title=\"Permanent link\">&para;</a></h4>\n<p>Returns an array as result of sorting the elements of <code>arr1</code> in descending order. If the <code>func</code> function is specified, sorting order is determined by the result of the function <code>func</code> applied to the elements of array (arrays).</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReverseSort</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;world&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">res</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;hello&#39;,&#39;world&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>For more information about the <code>arrayReverseSort</code> method, see the <a href=\"#array_functions-reverse-sort\">Functions for Working With Arrays</a> section.</p>\n<p><a name=\"../../../../../../functions/ext_dict_functions/\"></a><a name=\"../../../../functions/ext_dict_functions/\"></a><a name=\"query_language/functions/ext_dict_functions/\"></a><a name=\"../../functions/ext_dict_functions/\"></a><a name=\"../../../../../query_language/functions/ext_dict_functions/\"></a><a name=\"functions/ext_dict_functions/\"></a><a name=\"../query_language/functions/ext_dict_functions/\"></a><a name=\"../../../query_language/functions/ext_dict_functions/\"></a><a name=\"../functions/ext_dict_functions/\"></a><a name=\"../../../functions/ext_dict_functions/\"></a><a name=\"../../../../../functions/ext_dict_functions/\"></a><a name=\"../../query_language/functions/ext_dict_functions/\"></a><a name=\"ext_dict_functions/\"></a><a name=\"../../../../query_language/functions/ext_dict_functions/\"></a></p>\n<h2 id=\"ext_dict_functions\">Functions for Working with External Dictionaries<a class=\"headerlink\" href=\"#ext_dict_functions\" title=\"Permanent link\">&para;</a></h2>\n<p>For information on connecting and configuring external dictionaries, see <a href=\"#../dicts/external_dicts/\">External dictionaries</a>.</p>\n<h3 id=\"dictget\">dictGet<a class=\"headerlink\" href=\"#dictget\" title=\"Permanent link\">&para;</a></h3>\n<p>Retrieves a value from an external dictionary.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGet</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;attr_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">id_expr</span><span class=\"p\">)</span>\n<span class=\"n\">dictGetOrDefault</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;attr_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">id_expr</span><span class=\"p\">,</span> <span class=\"n\">default_value_expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>dict_name</code> \u2014 Name of the dictionary. <a href=\"#syntax-string-literal\">String literal</a>.</li>\n<li><code>attr_name</code> \u2014 Name of the column of the dictionary. <a href=\"#syntax-string-literal\">String literal</a>.</li>\n<li><code>id_expr</code> \u2014 Key value. <a href=\"#syntax-expressions\">Expression</a> returning a <a href=\"#../../data_types/int_uint/\">UInt64</a> or <a href=\"#../../data_types/tuple/\">Tuple</a>-type value depending on the dictionary configuration.</li>\n<li><code>default_value_expr</code> \u2014 Value returned if the dictionary doesn't contain a row with the <code>id_expr</code> key. <a href=\"#syntax-expressions\">Expression</a> returning the value in the data type configured for the <code>attr_name</code> attribute.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>If ClickHouse parses the attribute successfully in the <a href=\"#ext_dict_structure-attributes\">attribute's data type</a>, functions return the value of the dictionary attribute that corresponds to <code>id_expr</code>.</li>\n<li>\n<p>If there is no the key, corresponding to <code>id_expr</code>, in the dictionary, then:</p>\n<ul>\n<li><code>dictGet</code> returns the content of the <code>&lt;null_value&gt;</code> element specified for the attribute in the dictionary configuration.</li>\n<li><code>dictGetOrDefault</code> returns the value passed as the <code>default_value_expr</code> parameter.</li>\n</ul>\n</li>\n</ul>\n<p>ClickHouse throws an exception if it cannot parse the value of the attribute or the value doesn't match the attribute data type.</p>\n<p><strong>Example</strong></p>\n<p>Create a text file <code>ext-dict-text.csv</code> containing the following:</p>\n<div class=\"codehilite\"><pre><span></span><code>1,1\n2,2\n</code></pre></div>\n\n\n<p>The first column is <code>id</code>, the second column is <code>c1</code>.</p>\n<p>Configure the external dictionary:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>ext-dict-test<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;source&gt;</span>\n            <span class=\"nt\">&lt;file&gt;</span>\n                <span class=\"nt\">&lt;path&gt;</span>/path-to/ext-dict-test.csv<span class=\"nt\">&lt;/path&gt;</span>\n                <span class=\"nt\">&lt;format&gt;</span>CSV<span class=\"nt\">&lt;/format&gt;</span>\n            <span class=\"nt\">&lt;/file&gt;</span>\n        <span class=\"nt\">&lt;/source&gt;</span>\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;flat</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n        <span class=\"nt\">&lt;structure&gt;</span>\n            <span class=\"nt\">&lt;id&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>id<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;/id&gt;</span>\n            <span class=\"nt\">&lt;attribute&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>c1<span class=\"nt\">&lt;/name&gt;</span>\n                <span class=\"nt\">&lt;type&gt;</span>UInt32<span class=\"nt\">&lt;/type&gt;</span>\n                <span class=\"nt\">&lt;null_value&gt;&lt;/null_value&gt;</span>\n            <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;/structure&gt;</span>\n        <span class=\"nt\">&lt;lifetime&gt;</span>0<span ");
            
            document.write("class=\"nt\">&lt;/lifetime&gt;</span>\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>Perform the query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">dictGetOrDefault</span><span class=\"p\">(</span><span class=\"s1\">&#39;ext-dict-test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c1&#39;</span><span class=\"p\">,</span> <span class=\"nb\">number</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"nb\">number</span> <span class=\"o\">*</span> <span class=\"mi\">10</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">val</span><span class=\"p\">,</span>\n    <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">type</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">3</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500val\u2500\u252c\u2500type\u2500\u2500\u2500\u2510\n\u2502   1 \u2502 UInt32 \u2502\n\u2502   2 \u2502 UInt32 \u2502\n\u2502  20 \u2502 UInt32 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#../dicts/external_dicts/\">External Dictionaries</a></li>\n</ul>\n<h3 id=\"dicthas\">dictHas<a class=\"headerlink\" href=\"#dicthas\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether a key is present in a dictionary.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictHas</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">id_expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>dict_name</code> \u2014 Name of the dictionary. <a href=\"#syntax-string-literal\">String literal</a>.</li>\n<li><code>id_expr</code> \u2014 Key value. <a href=\"#syntax-expressions\">Expression</a> returning a <a href=\"#../../data_types/int_uint/\">UInt64</a>-type value.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>0, if there is no key.</li>\n<li>1, if there is a key.</li>\n</ul>\n<p>Type: <code>UInt8</code>.</p>\n<h3 id=\"dictgethierarchy\">dictGetHierarchy<a class=\"headerlink\" href=\"#dictgethierarchy\" title=\"Permanent link\">&para;</a></h3>\n<p>For the hierarchical dictionary, returns an array of dictionary keys starting from the passed <code>id_expr</code> and continuing along the chain of parent elements.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGetHierarchy</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">id_expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>dict_name</code> \u2014 Name of the dictionary. <a href=\"#syntax-string-literal\">String literal</a>.</li>\n<li><code>id_expr</code> \u2014 Key value. <a href=\"#syntax-expressions\">Expression</a> returning a <a href=\"#../../data_types/int_uint/\">UInt64</a>-type value.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>Hierarchy of dictionary keys.</p>\n<p>Type: Array(UInt64).</p>\n<h3 id=\"dictisin\">dictIsIn<a class=\"headerlink\" href=\"#dictisin\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks the ancestor of a key through the whole hierarchical chain in the dictionary.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictIsIn</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">child_id_expr</span><span class=\"p\">,</span> <span class=\"n\">ancestor_id_expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>dict_name</code> \u2014 Name of the dictionary. <a href=\"#syntax-string-literal\">String literal</a>.</li>\n<li><code>child_id_expr</code> \u2014 Key to be checked. <a href=\"#syntax-expressions\">Expression</a> returning a <a href=\"#../../data_types/int_uint/\">UInt64</a>-type value.</li>\n<li><code>ancestor_id_expr</code> \u2014 Alleged ancestor of the <code>child_id_expr</code> key. <a href=\"#syntax-expressions\">Expression</a> returning a <a href=\"#../../data_types/int_uint/\">UInt64</a>-type value.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>0, if <code>child_id_expr</code> is not a child of <code>ancestor_id_expr</code>.</li>\n<li>1, if <code>child_id_expr</code> is a child of <code>ancestor_id_expr</code> or if <code>child_id_expr</code> is an <code>ancestor_id_expr</code>.</li>\n</ul>\n<p>Type: <code>UInt8</code>.</p>\n<h3 id=\"ext_dict_functions-other\">Other functions<a class=\"headerlink\" href=\"#ext_dict_functions-other\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports specialized functions that convert dictionary attribute values to a specific data type regardless of the dictionary configuration.</p>\n<p>Functions:</p>\n<ul>\n<li><code>dictGetInt8</code>, <code>dictGetInt16</code>, <code>dictGetInt32</code>, <code>dictGetInt64</code></li>\n<li><code>dictGetUInt8</code>, <code>dictGetUInt16</code>, <code>dictGetUInt32</code>, <code>dictGetUInt64</code></li>\n<li><code>dictGetFloat32</code>, <code>dictGetFloat64</code></li>\n<li><code>dictGetDate</code></li>\n<li><code>dictGetDateTime</code></li>\n<li><code>dictGetUUID</code></li>\n<li><code>dictGetString</code></li>\n</ul>\n<p>All these functions have the <code>OrDefault</code> modification. For example, <code>dictGetDateOrDefault</code>.</p>\n<p>Syntax:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGet</span><span class=\"p\">[</span><span class=\"k\">Type</span><span class=\"p\">](</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;attr_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">id_expr</span><span class=\"p\">)</span>\n<span class=\"n\">dictGet</span><span class=\"p\">[</span><span class=\"k\">Type</span><span class=\"p\">]</span><span class=\"n\">OrDefault</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;attr_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">id_expr</span><span class=\"p\">,</span> <span class=\"n\">default_value_expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>dict_name</code> \u2014 Name of the dictionary. <a href=\"#syntax-string-literal\">String literal</a>.</li>\n<li><code>attr_name</code> \u2014 Name of the column of the dictionary. <a href=\"#syntax-string-literal\">String literal</a>.</li>\n<li><code>id_expr</code> \u2014 Key value. <a href=\"#syntax-expressions\">Expression</a> returning a <a href=\"#../../data_types/int_uint/\">UInt64</a>-type value.</li>\n<li><code>default_value_expr</code> \u2014 Value which is returned if the dictionary doesn't contain a row with the <code>id_expr</code> key. <a href=\"#syntax-expressions\">Expression</a> returning a value in the data type configured for the <code>attr_name</code> attribute.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>If ClickHouse parses the attribute successfully in the <a href=\"#ext_dict_structure-attributes\">attribute's data type</a>, functions return the value of the dictionary attribute that corresponds to <code>id_expr</code>.</li>\n<li>\n<p>If there is no requested <code>id_expr</code> in the dictionary then:</p>\n<ul>\n<li><code>dictGet[Type]</code> returns the content of the <code>&lt;null_value&gt;</code> element specified for the attribute in the dictionary configuration.</li>\n<li><code>dictGet[Type]OrDefault</code> returns the value passed as the <code>default_value_expr</code> parameter.</li>\n</ul>\n</li>\n</ul>\n<p>ClickHouse throws an exception if it cannot parse the value of the attribute or the value doesn't match the attribute data type.</p>\n<p><a name=\"functions/ym_dict_functions/\"></a><a name=\"../../query_language/functions/ym_dict_functions/\"></a><a name=\"../../../../query_language/functions/ym_dict_functions/\"></a><a name=\"query_language/functions/ym_dict_functions/\"></a><a name=\"../../../../../query_language/functions/ym_dict_functions/\"></a><a name=\"../../../functions/ym_dict_functions/\"></a><a name=\"ym_dict_functions/\"></a><a name=\"../functions/ym_dict_functions/\"></a><a name=\"../../../../functions/ym_dict_functions/\"></a><a name=\"../../functions/ym_dict_functions/\"></a><a name=\"../../../query_language/functions/ym_dict_functions/\"></a><a name=\"../../../../../functions/ym_dict_functions/\"></a><a name=\"../../../../../../functions/ym_dict_functions/\"></a><a name=\"../query_language/functions/ym_dict_functions/\"></a></p>\n<h2 id=\"functions-for-working-with-yandex-metrica-dictionaries\">Functions for working with Yandex.Metrica dictionaries<a class=\"headerlink\" href=\"#functions-for-working-with-yandex-metrica-dictionaries\" title=\"Permanent link\">&para;</a></h2>\n<p>In order for the functions below to work, the server config must specify the paths and addresses for getting all the Yandex.Metrica dictionaries. The dictionaries are loaded at the first call of any of these functions. If the reference lists can't be loaded, an exception is thrown.</p>\n<p>For information about creating reference lists, see the section \"Dictionaries\".</p>\n<h3 id=\"multiple-geobases\">Multiple geobases<a class=\"headerlink\" href=\"#multiple-geobases\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports working with multiple alternative geobases (regional hierarchies) simultaneously, in order to support various perspectives on which countries certain regions belong to.</p>\n<p>The 'clickhouse-server' config specifies the file with the regional hierarchy::<code>&lt;path_to_regions_hierarchy_file&gt;/opt/geo/regions_hierarchy.txt&lt;/path_to_regions_hierarchy_file&gt;</code></p>\n<p>Besides this file, it also searches for files nearby that have the _ symbol and any suffix appended to the name (before the file extension).<br />\nFor example, it will also find the file <code>/opt/geo/regions_hierarchy_ua.txt</code>, if present.</p>\n<p><code>ua</code> is called the dictionary key. For a dictionary without a suffix, the key is an empty string.</p>\n<p>All the dictionaries are re-loaded in runtime (o");
            
            document.write("nce every certain number of seconds, as defined in the builtin_dictionaries_reload_interval config parameter, or once an hour by default). However, the list of available dictionaries is defined one time, when the server starts.</p>\n<p>All functions for working with regions have an optional argument at the end \u2013 the dictionary key. It is referred to as the geobase.<br />\nExample:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">regionToCountry</span><span class=\"p\">(</span><span class=\"n\">RegionID</span><span class=\"p\">)</span> <span class=\"err\">\u2013</span> <span class=\"n\">Uses</span> <span class=\"n\">the</span> <span class=\"k\">default</span> <span class=\"k\">dictionary</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">opt</span><span class=\"o\">/</span><span class=\"n\">geo</span><span class=\"o\">/</span><span class=\"n\">regions_hierarchy</span><span class=\"p\">.</span><span class=\"n\">txt</span>\n<span class=\"n\">regionToCountry</span><span class=\"p\">(</span><span class=\"n\">RegionID</span><span class=\"p\">,</span> <span class=\"s1\">&#39;&#39;</span><span class=\"p\">)</span> <span class=\"err\">\u2013</span> <span class=\"n\">Uses</span> <span class=\"n\">the</span> <span class=\"k\">default</span> <span class=\"k\">dictionary</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">opt</span><span class=\"o\">/</span><span class=\"n\">geo</span><span class=\"o\">/</span><span class=\"n\">regions_hierarchy</span><span class=\"p\">.</span><span class=\"n\">txt</span>\n<span class=\"n\">regionToCountry</span><span class=\"p\">(</span><span class=\"n\">RegionID</span><span class=\"p\">,</span> <span class=\"s1\">&#39;ua&#39;</span><span class=\"p\">)</span> <span class=\"err\">\u2013</span> <span class=\"n\">Uses</span> <span class=\"n\">the</span> <span class=\"k\">dictionary</span> <span class=\"k\">for</span> <span class=\"n\">the</span> <span class=\"s1\">&#39;ua&#39;</span> <span class=\"k\">key</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">opt</span><span class=\"o\">/</span><span class=\"n\">geo</span><span class=\"o\">/</span><span class=\"n\">regions_hierarchy_ua</span><span class=\"p\">.</span><span class=\"n\">txt</span>\n</code></pre></div>\n\n\n<h4 id=\"regiontocity-id-geobase\">regionToCity(id[, geobase])<a class=\"headerlink\" href=\"#regiontocity-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Accepts a UInt32 number \u2013 the region ID from the Yandex geobase. If this region is a city or part of a city, it returns the region ID for the appropriate city. Otherwise, returns 0.</p>\n<h4 id=\"regiontoarea-id-geobase\">regionToArea(id[, geobase])<a class=\"headerlink\" href=\"#regiontoarea-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Converts a region to an area (type 5 in the geobase). In every other way, this function is the same as 'regionToCity'.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">DISTINCT</span> <span class=\"n\">regionToName</span><span class=\"p\">(</span><span class=\"n\">regionToArea</span><span class=\"p\">(</span><span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"nb\">number</span><span class=\"p\">),</span> <span class=\"s1\">&#39;ua&#39;</span><span class=\"p\">))</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">15</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500regionToName(regionToArea(toUInt32(number), \\&#39;ua\\&#39;))\u2500\u2510\n\u2502                                                      \u2502\n\u2502 Moscow and Moscow region                             \u2502\n\u2502 St. Petersburg and Leningrad region                  \u2502\n\u2502 Belgorod region                                      \u2502\n\u2502 Ivanovsk region                                      \u2502\n\u2502 Kaluga region                                        \u2502\n\u2502 Kostroma region                                      \u2502\n\u2502 Kursk region                                         \u2502\n\u2502 Lipetsk region                                       \u2502\n\u2502 Orlov region                                         \u2502\n\u2502 Ryazan region                                        \u2502\n\u2502 Smolensk region                                      \u2502\n\u2502 Tambov region                                        \u2502\n\u2502 Tver region                                          \u2502\n\u2502 Tula region                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"regiontodistrict-id-geobase\">regionToDistrict(id[, geobase])<a class=\"headerlink\" href=\"#regiontodistrict-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Converts a region to a federal district (type 4 in the geobase). In every other way, this function is the same as 'regionToCity'.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">DISTINCT</span> <span class=\"n\">regionToName</span><span class=\"p\">(</span><span class=\"n\">regionToDistrict</span><span class=\"p\">(</span><span class=\"n\">toUInt32</span><span class=\"p\">(</span><span class=\"nb\">number</span><span class=\"p\">),</span> <span class=\"s1\">&#39;ua&#39;</span><span class=\"p\">))</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">15</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500regionToName(regionToDistrict(toUInt32(number), \\&#39;ua\\&#39;))\u2500\u2510\n\u2502                                                          \u2502\n\u2502 Central federal district                                 \u2502\n\u2502 Northwest federal district                               \u2502\n\u2502 South federal district                                   \u2502\n\u2502 North Caucases federal district                          \u2502\n\u2502 Privolga federal district                                \u2502\n\u2502 Ural federal district                                    \u2502\n\u2502 Siberian federal district                                \u2502\n\u2502 Far East federal district                                \u2502\n\u2502 Scotland                                                 \u2502\n\u2502 Faroe Islands                                            \u2502\n\u2502 Flemish region                                           \u2502\n\u2502 Brussels capital region                                  \u2502\n\u2502 Wallonia                                                 \u2502\n\u2502 Federation of Bosnia and Herzegovina                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"regiontocountry-id-geobase\">regionToCountry(id[, geobase])<a class=\"headerlink\" href=\"#regiontocountry-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Converts a region to a country. In every other way, this function is the same as 'regionToCity'.<br />\nExample: <code>regionToCountry(toUInt32(213)) = 225</code> converts Moscow (213) to Russia (225).</p>\n<h4 id=\"regiontocontinent-id-geobase\">regionToContinent(id[, geobase])<a class=\"headerlink\" href=\"#regiontocontinent-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Converts a region to a continent. In every other way, this function is the same as 'regionToCity'.<br />\nExample: <code>regionToContinent(toUInt32(213)) = 10001</code> converts Moscow (213) to Eurasia (10001).</p>\n<h4 id=\"regiontopopulation-id-geobase\">regionToPopulation(id[, geobase])<a class=\"headerlink\" href=\"#regiontopopulation-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Gets the population for a region.<br />\nThe population can be recorded in files with the geobase. See the section \"External dictionaries\".<br />\nIf the population is not recorded for the region, it returns 0.<br />\nIn the Yandex geobase, the population might be recorded for child regions, but not for parent regions.</p>\n<h4 id=\"regionin-lhs-rhs-geobase\">regionIn(lhs, rhs[, geobase])<a class=\"headerlink\" href=\"#regionin-lhs-rhs-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Checks whether a 'lhs' region belongs to a 'rhs' region. Returns a UInt8 number equal to 1 if it belongs, or 0 if it doesn't belong.<br />\nThe relationship is reflexive \u2013 any region also belongs to itself.</p>\n<h4 id=\"regionhierarchy-id-geobase\">regionHierarchy(id[, geobase])<a class=\"headerlink\" href=\"#regionhierarchy-id-geobase\" title=\"Permanent link\">&para;</a></h4>\n<p>Accepts a UInt32 number \u2013 the region ID from the Yandex geobase. Returns an array of region IDs consisting of the passed region and all parents along the chain.<br />\nExample: <code>regionHierarchy(toUInt32(213)) = [213,1,3,225,10001,10000]</code>.</p>\n<h4 id=\"regiontoname-id-lang\">regionToName(id[, lang])<a class=\"headerlink\" href=\"#regiontoname-id-lang\" title=\"Permanent link\">&para;</a></h4>\n<p>Accepts a UInt32 number \u2013 the region ID from the Yandex geobase. A string with the name of the language can be passed as a second argument. Supported languages are: ru, en, ua, uk, by, kz, tr. If the second argument is omitted, the language 'ru' is used. If the language is not supported, an exception is thrown. Returns a string \u2013 the name of the region in the corresponding language. If the region with the specified ID doesn't exist, an empty string is returned.</p>\n<p><code>ua</code> and <code>uk</code> both mean Ukrainian.</p>\n<p><a name=\"in_functions/\"></a><a name=\"../../functions/in_functions/\"></a><a name=\"../../../../../query_language/functions/in_functions/\"></a><a name=\"../../../query_language/functions/in_functions/\"></a><a name=\"query_language/functions/in_functions/\"></a><a name=\"../../../../../functions/in_functions/\"></a><a name=\"../functions/in_functions/\"></a><a name=\"../../../../functions/in_functions/\"></a><a name=\"functions/in_functions/\"></a><a name=\"../../../../../../functions/in_functions/\"></a><a name=\"../query_language/functions/in_functions/\"></a><a name=\"../../../../query_language/functions/in_functions/\"></a><a name=\"../../../functions/in_functions/\"></a><a name=\"../../query_language/functions/in_functions/\"></a></p>\n<h2 id=\"functions-for-implementing-the-in-operator\">Functions for implementing the IN operator<a class=\"headerlink\" href=\"#functions-for-implementing-the-in-operator\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"in-functions\">in, notIn, globalIn, globalNotIn<a class=\"headerlink\" href=\"#in-functions\" title=\"Permanent link\">&para;</a></h3>\n<");
            
            document.write("p>See the section <a href=\"#select-in-operators\">IN operators</a>.</p>\n<h3 id=\"tuple-x-y-operator-x-y\">tuple(x, y, ...), operator (x, y, ...)<a class=\"headerlink\" href=\"#tuple-x-y-operator-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>A function that allows grouping multiple columns.<br />\nFor columns with the types T1, T2, ..., it returns a Tuple(T1, T2, ...) type tuple containing these columns. There is no cost to execute the function.<br />\nTuples are normally used as intermediate values for an argument of IN operators, or for creating a list of formal parameters of lambda functions. Tuples can't be written to a table.</p>\n<h3 id=\"tupleelement-tuple-n-operator-x-n\">tupleElement(tuple, n), operator x.N<a class=\"headerlink\" href=\"#tupleelement-tuple-n-operator-x-n\" title=\"Permanent link\">&para;</a></h3>\n<p>A function that allows getting a column from a tuple.<br />\n'N' is the column index, starting from 1. N must be a constant. 'N' must be a constant. 'N' must be a strict postive integer no greater than the size of the tuple.<br />\nThere is no cost to execute the function.</p>\n<p><a name=\"../../../../../functions/array_join/\"></a><a name=\"array_join/\"></a><a name=\"../../../../../../functions/array_join/\"></a><a name=\"../../query_language/functions/array_join/\"></a><a name=\"../../../query_language/functions/array_join/\"></a><a name=\"../functions/array_join/\"></a><a name=\"../../../../../query_language/functions/array_join/\"></a><a name=\"../query_language/functions/array_join/\"></a><a name=\"../../functions/array_join/\"></a><a name=\"../../../../functions/array_join/\"></a><a name=\"../../../functions/array_join/\"></a><a name=\"functions/array_join/\"></a><a name=\"query_language/functions/array_join/\"></a><a name=\"../../../../query_language/functions/array_join/\"></a></p>\n<h2 id=\"functions_arrayjoin\">arrayJoin function<a class=\"headerlink\" href=\"#functions_arrayjoin\" title=\"Permanent link\">&para;</a></h2>\n<p>This is a very unusual function.</p>\n<p>Normal functions don't change a set of rows, but just change the values in each row (map).<br />\nAggregate functions compress a set of rows (fold or reduce).<br />\nThe 'arrayJoin' function takes each row and generates a set of rows (unfold).</p>\n<p>This function takes an array as an argument, and propagates the source row to multiple rows for the number of elements in the array.<br />\nAll the values in columns are simply copied, except the values in the column where this function is applied; it is replaced with the corresponding array value.</p>\n<p>A query can use multiple <code>arrayJoin</code> functions. In this case, the transformation is performed multiple times.</p>\n<p>Note the ARRAY JOIN syntax in the SELECT query, which provides broader possibilities.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayJoin</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"k\">AS</span> <span class=\"n\">src</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">dst</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello&#39;</span><span class=\"p\">,</span> <span class=\"n\">src</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500dst\u2500\u252c\u2500\\&#39;Hello\\&#39;\u2500\u252c\u2500src\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   1 \u2502 Hello     \u2502 [1,2,3] \u2502\n\u2502   2 \u2502 Hello     \u2502 [1,2,3] \u2502\n\u2502   3 \u2502 Hello     \u2502 [1,2,3] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../../functions/geo/\"></a><a name=\"../../../../../../functions/geo/\"></a><a name=\"../../query_language/functions/geo/\"></a><a name=\"../../../../../functions/geo/\"></a><a name=\"../query_language/functions/geo/\"></a><a name=\"../../../query_language/functions/geo/\"></a><a name=\"geo/\"></a><a name=\"../functions/geo/\"></a><a name=\"../../../../query_language/functions/geo/\"></a><a name=\"../../../functions/geo/\"></a><a name=\"query_language/functions/geo/\"></a><a name=\"../../../../../query_language/functions/geo/\"></a><a name=\"functions/geo/\"></a><a name=\"../../functions/geo/\"></a></p>\n<h2 id=\"functions-for-working-with-geographical-coordinates\">Functions for working with geographical coordinates<a class=\"headerlink\" href=\"#functions-for-working-with-geographical-coordinates\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"greatcircledistance\">greatCircleDistance<a class=\"headerlink\" href=\"#greatcircledistance\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculate the distance between two points on the Earth's surface using <a href=\"https://en.wikipedia.org/wiki/Great-circle_distance\" rel=\"external nofollow noreferrer\">the great-circle formula</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">greatCircleDistance</span><span class=\"p\">(</span><span class=\"n\">lon1Deg</span><span class=\"p\">,</span> <span class=\"n\">lat1Deg</span><span class=\"p\">,</span> <span class=\"n\">lon2Deg</span><span class=\"p\">,</span> <span class=\"n\">lat2Deg</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Input parameters</strong></p>\n<ul>\n<li><code>lon1Deg</code> \u2014 Longitude of the first point in degrees. Range: <code>[-180\u00b0, 180\u00b0]</code>.</li>\n<li><code>lat1Deg</code> \u2014 Latitude of the first point in degrees. Range: <code>[-90\u00b0, 90\u00b0]</code>.</li>\n<li><code>lon2Deg</code> \u2014 Longitude of the second point in degrees. Range: <code>[-180\u00b0, 180\u00b0]</code>.</li>\n<li><code>lat2Deg</code> \u2014 Latitude of the second point in degrees. Range: <code>[-90\u00b0, 90\u00b0]</code>.</li>\n</ul>\n<p>Positive values correspond to North latitude and East longitude, and negative values correspond to South latitude and West longitude.</p>\n<p><strong>Returned value</strong></p>\n<p>The distance between two points on the Earth's surface, in meters.</p>\n<p>Generates an exception when the input parameter values fall outside of the range.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">greatCircleDistance</span><span class=\"p\">(</span><span class=\"mi\">55</span><span class=\"p\">.</span><span class=\"mi\">755831</span><span class=\"p\">,</span> <span class=\"mi\">37</span><span class=\"p\">.</span><span class=\"mi\">617673</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">55</span><span class=\"p\">.</span><span class=\"mi\">755831</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">37</span><span class=\"p\">.</span><span class=\"mi\">617673</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500greatCircleDistance(55.755831, 37.617673, -55.755831, -37.617673)\u2500\u2510\n\u2502                                                14132374.194975413 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"pointinellipses\">pointInEllipses<a class=\"headerlink\" href=\"#pointinellipses\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether the point belongs to at least one of the ellipses.<br />\nCoordinates are geometric in the Cartesian coordinate system.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">pointInEllipses</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">x\u2080</span><span class=\"p\">,</span> <span class=\"n\">y\u2080</span><span class=\"p\">,</span> <span class=\"n\">a\u2080</span><span class=\"p\">,</span> <span class=\"n\">b\u2080</span><span class=\"p\">,...,</span><span class=\"n\">x\u2099</span><span class=\"p\">,</span> <span class=\"n\">y\u2099</span><span class=\"p\">,</span> <span class=\"n\">a\u2099</span><span class=\"p\">,</span> <span class=\"n\">b\u2099</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Input parameters</strong></p>\n<ul>\n<li><code>x, y</code> \u2014 Coordinates of a point on the plane.</li>\n<li><code>x\u1d62, y\u1d62</code> \u2014 Coordinates of the center of the <code>i</code>-th ellipsis.</li>\n<li><code>a\u1d62, b\u1d62</code> \u2014 Axes of the <code>i</code>-th ellipsis in units of x, y coordinates.</li>\n</ul>\n<p>The input parameters must be <code>2+4\u22c5n</code>, where <code>n</code> is the number of ellipses.</p>\n<p><strong>Returned values</strong></p>\n<p><code>1</code> if the point is inside at least one of the ellipses; <code>0</code>if it is not.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">pointInEllipses</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">.,</span> <span class=\"mi\">10</span><span class=\"p\">.,</span> <span class=\"mi\">10</span><span class=\"p\">.,</span> <span class=\"mi\">9</span><span class=\"p\">.</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">.,</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">9999</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500pointInEllipses(10., 10., 10., 9.1, 1., 0.9999)\u2500\u2510\n\u2502                                               1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"pointinpolygon\">pointInPolygon<a class=\"headerlink\" href=\"#pointinpolygon\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether the point belongs to the polygon on the plane.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">pointInPolygon</span><span class=\"p\">((</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">),</span> <span class=\"p\">[(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"k\">c</span><span class=\"p\">,</span> <span class=\"n\">d</span><span class=\"p\">)</span> <span class=\"p\">...],</span> <span class=\"p\">...)</span>\n</code></pre></div>\n\n\n<p><strong>Input values</strong></p>\n<ul>\n<li><code>(x, y)</code> \u2014 Coordinates of a point on the plane. Data type \u2014 <a href=\"#../../data_types/tuple/\">Tuple</a> \u2014  A tuple of two numbers.</li>\n<li><code>[(a, b), (c, d) ...]</code> \u2014 Polygon vertices. Data type \u2014 <a href=\"#../../data_types/array/\">Array</a>. Each vertex is represented by a pair of coordinates <code>(a, b)</code>. Ve");
            
            document.write("rtices should be specified in a clockwise or counterclockwise order. The minimum number of vertices is 3. The polygon must be constant.</li>\n<li>The function also supports polygons with holes (cut out sections). In this case, add polygons that define the cut out sections using additional arguments of the function. The function does not support non-simply-connected polygons.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<p><code>1</code> if the point is inside the polygon, <code>0</code> if it is not.<br />\nIf the point is on the polygon boundary, the function may return either 0 or 1.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">pointInPolygon</span><span class=\"p\">((</span><span class=\"mi\">3</span><span class=\"p\">.,</span> <span class=\"mi\">3</span><span class=\"p\">.),</span> <span class=\"p\">[(</span><span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)])</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2510\n\u2502   1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"geohashencode\">geohashEncode<a class=\"headerlink\" href=\"#geohashencode\" title=\"Permanent link\">&para;</a></h3>\n<p>Encodes latitude and longitude as a geohash-string, please see (<a href=\"http://geohash.org/\">http://geohash.org/</a>, <a href=\"https://en.wikipedia.org/wiki/Geohash\">https://en.wikipedia.org/wiki/Geohash</a>).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">geohashEncode</span><span class=\"p\">(</span><span class=\"n\">longitude</span><span class=\"p\">,</span> <span class=\"n\">latitude</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"k\">precision</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<p><strong>Input values</strong></p>\n<ul>\n<li>longitude - longitude part of the coordinate you want to encode. Floating in range<code>[-180\u00b0, 180\u00b0]</code></li>\n<li>latitude - latitude part of the coordinate you want to encode. Floating in range <code>[-90\u00b0, 90\u00b0]</code></li>\n<li>precision - Optional, length of the resulting encoded string, defaults to <code>12</code>. Integer in range <code>[1, 12]</code>. Any value less than <code>1</code> or greater than <code>12</code> is silently converted to <code>12</code>.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>alphanumeric <code>String</code> of encoded coordinate (modified version of the base32-encoding alphabet is used).</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">geohashEncode</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">.</span><span class=\"mi\">60302734375</span><span class=\"p\">,</span> <span class=\"mi\">42</span><span class=\"p\">.</span><span class=\"mi\">593994140625</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ezs42d000000 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"geohashdecode\">geohashDecode<a class=\"headerlink\" href=\"#geohashdecode\" title=\"Permanent link\">&para;</a></h3>\n<p>Decodes any geohash-encoded string into longitude and latitude.</p>\n<p><strong>Input values</strong></p>\n<ul>\n<li>encoded string - geohash-encoded string.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>(longitude, latitude) - 2-tuple of <code>Float64</code> values of longitude and latitude.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">geohashDecode</span><span class=\"p\">(</span><span class=\"s1\">&#39;ezs42&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 (-5.60302734375,42.60498046875) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"geotoh3\">geoToH3<a class=\"headerlink\" href=\"#geotoh3\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates <a href=\"https://uber.github.io/h3/#/documentation/overview/introduction\" rel=\"external nofollow noreferrer\">H3</a> point index <code>(lon, lat)</code> with specified resolution.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">geoToH3</span><span class=\"p\">(</span><span class=\"n\">lon</span><span class=\"p\">,</span> <span class=\"n\">lat</span><span class=\"p\">,</span> <span class=\"n\">resolution</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Input values</strong></p>\n<ul>\n<li><code>lon</code> \u2014 Longitude. Type: <a href=\"#../../data_types/float/\">Float64</a>.</li>\n<li><code>lat</code> \u2014 Latitude. Type: <a href=\"#../../data_types/float/\">Float64</a>.</li>\n<li><code>resolution</code> \u2014 Index resolution. Range: <code>[0, 15]</code>. Type: <a href=\"#../../data_types/int_uint/\">UInt8</a>.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Hexagon index number.</li>\n<li>0 in case of error.</li>\n</ul>\n<p>Type: <a href=\"#../../data_types/int_uint/\">UInt64</a>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">geoToH3</span><span class=\"p\">(</span><span class=\"mi\">37</span><span class=\"p\">.</span><span class=\"mi\">79506683</span><span class=\"p\">,</span> <span class=\"mi\">55</span><span class=\"p\">.</span><span class=\"mi\">71290588</span><span class=\"p\">,</span> <span class=\"mi\">15</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">h3Index</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500h3Index\u2500\u2510\n\u2502 644325524701193974 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"geohashesinbox\">geohashesInBox<a class=\"headerlink\" href=\"#geohashesinbox\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns an array of geohash-encoded strings of given precision that fall inside and intersect boundaries of given box, basically a 2D grid flattened into array.</p>\n<p><strong>Input values</strong></p>\n<ul>\n<li>longitude_min - min longitude, floating value in range <code>[-180\u00b0, 180\u00b0]</code></li>\n<li>latitude_min - min latitude, floating value in range <code>[-90\u00b0, 90\u00b0]</code></li>\n<li>longitude_max - max longitude, floating value in range <code>[-180\u00b0, 180\u00b0]</code></li>\n<li>latitude_max - max latitude, floating value in range <code>[-90\u00b0, 90\u00b0]</code></li>\n<li>precision - geohash precision, <code>UInt8</code> in range <code>[1, 12]</code></li>\n</ul>\n<p>Please note that all coordinate parameters should be of the same type: either <code>Float32</code> or <code>Float64</code>.</p>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>array of precision-long strings of geohash-boxes covering provided area, you should not rely on order of items.</li>\n<li>[] - empty array if <em>min</em> values of <em>latitude</em> and <em>longitude</em> aren't less than corresponding <em>max</em> values.</li>\n</ul>\n<p>Please note that function will throw an exception if resulting array is over 10'000'000 items long.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">geohashesInBox</span><span class=\"p\">(</span><span class=\"mi\">24</span><span class=\"p\">.</span><span class=\"mi\">48</span><span class=\"p\">,</span> <span class=\"mi\">40</span><span class=\"p\">.</span><span class=\"mi\">56</span><span class=\"p\">,</span> <span class=\"mi\">24</span><span class=\"p\">.</span><span class=\"mi\">785</span><span class=\"p\">,</span> <span class=\"mi\">40</span><span class=\"p\">.</span><span class=\"mi\">81</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">thasos</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500thasos\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [&#39;sx1q&#39;,&#39;sx1r&#39;,&#39;sx32&#39;,&#39;sx1w&#39;,&#39;sx1x&#39;,&#39;sx38&#39;] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../query_language/functions/functions_for_nulls/\"></a><a name=\"functions_for_nulls/\"></a><a name=\"../../../../../query_language/functions/functions_for_nulls/\"></a><a name=\"functions/functions_for_nulls/\"></a><a name=\"../../../functions/functions_for_nulls/\"></a><a name=\"../query_language/functions/functions_for_nulls/\"></a><a name=\"../../../../functions/functions_for_nulls/\"></a><a name=\"../../../../query_language/functions/functions_for_nulls/\"></a><a name=\"../../../../../functions/functions_for_nulls/\"></a><a name=\"../../functions/functions_for_nulls/\"></a><a name=\"query_language/functions/functions_for_nulls/\"></a><a name=\"../../../query_language/functions/functions_for_nulls/\"></a><a name=\"../../../../../../functions/functions_for_nulls/\"></a><a name=\"../functions/functions_for_nulls/\"></a></p>\n<h2 id=\"functions-for-working-with-nullable-aggregates\">Functions for working with Nullable aggregates<a class=\"headerlink\" href=\"#functions-for-working-with-nullable-aggregates\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"isnull\">isNull<a class=\"headerlink\" href=\"#isnull\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether the argument is <a href=\"#null\">NULL</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">isNull</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>x</code> \u2014 A value with a non-compound data type.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li><code>1</code> if <code>x</code> is <code>NULL</code>.</li>\n<li><code>0</code> if <code>x</code> is not <code>NULL</code>.</li>\n");
            
            document.write("</ul>\n<p><strong>Example</strong></p>\n<p>Input table</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510\n\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502 2 \u2502    3 \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Query</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">x</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"k\">WHERE</span> <span class=\"k\">isNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2510\n\u2502 1 \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"isnotnull\">isNotNull<a class=\"headerlink\" href=\"#isnotnull\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks whether the argument is <a href=\"#null\">NULL</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">isNotNull</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>x</code> \u2014 A value with a non-compound data type.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li><code>0</code> if <code>x</code> is <code>NULL</code>.</li>\n<li><code>1</code> if <code>x</code> is not <code>NULL</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Input table</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510\n\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502 2 \u2502    3 \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Query</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">x</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"k\">WHERE</span> <span class=\"n\">isNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2510\n\u2502 2 \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"coalesce\">coalesce<a class=\"headerlink\" href=\"#coalesce\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks from left to right whether <code>NULL</code> arguments were passed and returns the first non-<code>NULL</code> argument.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">coalesce</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,...)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li>Any number of parameters of a non-compound type. All parameters must be compatible by data type.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>The first non-<code>NULL</code> argument.</li>\n<li><code>NULL</code>, if all arguments are <code>NULL</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Consider a list of contacts that may specify multiple ways to contact a customer.</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u252c\u2500mail\u2500\u252c\u2500phone\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500icq\u2500\u2510\n\u2502 client 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502 123-45-67 \u2502  123 \u2502\n\u2502 client 2 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502 \u1d3a\u1d41\u1d38\u1d38      \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The <code>mail</code> and <code>phone</code> fields are of type String, but the <code>icq</code> field is <code>UInt32</code>, so it needs to be converted to <code>String</code>.</p>\n<p>Get the first available contact method for the customer from the contact list:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">coalesce</span><span class=\"p\">(</span><span class=\"n\">mail</span><span class=\"p\">,</span> <span class=\"n\">phone</span><span class=\"p\">,</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"n\">icq</span><span class=\"p\">,</span><span class=\"s1\">&#39;Nullable(String)&#39;</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"n\">aBook</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u252c\u2500coalesce(mail, phone, CAST(icq, &#39;Nullable(String)&#39;))\u2500\u2510\n\u2502 client 1 \u2502 123-45-67                                            \u2502\n\u2502 client 2 \u2502 \u1d3a\u1d41\u1d38\u1d38                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"ifnull\">ifNull<a class=\"headerlink\" href=\"#ifnull\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns an alternative value if the main argument is <code>NULL</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span><span class=\"n\">alt</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>x</code> \u2014 The value to check for <code>NULL</code>.</li>\n<li><code>alt</code> \u2014 The value that the function returns if <code>x</code> is <code>NULL</code>.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>The value <code>x</code>, if <code>x</code> is not <code>NULL</code>.</li>\n<li>The value <code>alt</code>, if <code>x</code> is <code>NULL</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500ifNull(&#39;a&#39;, &#39;b&#39;)\u2500\u2510\n\u2502 a                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">ifNull</span><span class=\"p\">(</span><span class=\"k\">NULL</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500ifNull(NULL, &#39;b&#39;)\u2500\u2510\n\u2502 b                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"nullif\">nullIf<a class=\"headerlink\" href=\"#nullif\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns <code>NULL</code> if the arguments are equal.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">nullIf</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<p><code>x</code>, <code>y</code> \u2014 Values for comparison. They must be compatible types, or ClickHouse will generate an exception.</p>\n<p><strong>Returned values</strong></p>\n<ul>\n<li><code>NULL</code>, if the arguments are equal.</li>\n<li>The <code>x</code> value, if the arguments are not equal.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">nullIf</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500nullIf(1, 1)\u2500\u2510\n\u2502         \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">nullIf</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500nullIf(1, 2)\u2500\u2510\n\u2502            1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"assumenotnull\">assumeNotNull<a class=\"headerlink\" href=\"#assumenotnull\" title=\"Permanent link\">&para;</a></h3>\n<p>Results in a value of type <a href=\"#../../data_types/nullable/\">Nullable</a> for a non- <code>Nullable</code>, if the value is not <code>NULL</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>x</code> \u2014 The original value.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>The original value from the non-<code>Nullable</code> type, if it is not <code>NULL</code>.</li>\n<li>The default value for the non-<code>Nullable</code> type if the original value was <code>NULL</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Consider the <code>t_null</code> table.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SHOW</span> <span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500statement\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 CREATE TABLE default.t_null ( x Int8,  y Nullable(Int8)) ENGINE = TinyLog \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510\n\u2502 1 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502 2 \u2502    3 \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Apply the <code>assumeNotNull</code> function to the <code>y</code> column.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500assumeNotNull(y)\u2500\u2510\n\u2502                0 \u2502\n\u2502                3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">assumeNotNull</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">))</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(assumeNotNull(y))\u2500\u2510\n\u2502 Int8                         \u2502\n\u2502 Int8                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"tonullable\">toNullable<a class=\"headerlink\" href=\"#tonullable\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts the argument type to <code>Nullable</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">toNullable</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>x</code> \u2014 The value of any non-compound type.</li>\n</ul>\n<p><strong>Returned value</s");
            
            document.write("trong></p>\n<ul>\n<li>The input value with a <code>Nullable</code> type.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(10)\u2500\u2510\n\u2502 UInt8          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">toNullable</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(toNullable(10))\u2500\u2510\n\u2502 Nullable(UInt8)            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"machine_learning_functions/\"></a><a name=\"../../../../../../functions/machine_learning_functions/\"></a><a name=\"../../../../../functions/machine_learning_functions/\"></a><a name=\"../../query_language/functions/machine_learning_functions/\"></a><a name=\"../../../../functions/machine_learning_functions/\"></a><a name=\"../../../../../query_language/functions/machine_learning_functions/\"></a><a name=\"../../../../query_language/functions/machine_learning_functions/\"></a><a name=\"functions/machine_learning_functions/\"></a><a name=\"../functions/machine_learning_functions/\"></a><a name=\"../../functions/machine_learning_functions/\"></a><a name=\"query_language/functions/machine_learning_functions/\"></a><a name=\"../../../query_language/functions/machine_learning_functions/\"></a><a name=\"../../../functions/machine_learning_functions/\"></a><a name=\"../query_language/functions/machine_learning_functions/\"></a></p>\n<h2 id=\"machine-learning-functions\">Machine learning functions<a class=\"headerlink\" href=\"#machine-learning-functions\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"machine_learning_methods-evalmlmethod\">evalMLMethod (prediction)<a class=\"headerlink\" href=\"#machine_learning_methods-evalmlmethod\" title=\"Permanent link\">&para;</a></h3>\n<p>Prediction using fitted regression models uses <code>evalMLMethod</code> function. See link in <code>linearRegression</code>.</p>\n<h4 id=\"stochastic-linear-regression\">Stochastic Linear Regression<a class=\"headerlink\" href=\"#stochastic-linear-regression\" title=\"Permanent link\">&para;</a></h4>\n<p>The <a href=\"#agg_functions-stochasticlinearregression\">stochasticLinearRegression</a> aggregate function implements stochastic gradient descent method using linear model and MSE loss function. Uses <code>evalMLMethod</code> to predict on new data.</p>\n<h4 id=\"stochastic-logistic-regression\">Stochastic Logistic Regression<a class=\"headerlink\" href=\"#stochastic-logistic-regression\" title=\"Permanent link\">&para;</a></h4>\n<p>The <a href=\"#agg_functions-stochasticlogisticregression\">stochasticLogisticRegression</a> aggregate function implements stochastic gradient descent method for binary classification problem. Uses <code>evalMLMethod</code> to predict on new data.<br />\n<a name=\"../../query_language/functions/other_functions/\"></a><a name=\"../../../../query_language/functions/other_functions/\"></a><a name=\"../../../functions/other_functions/\"></a><a name=\"functions/other_functions/\"></a><a name=\"../../../../../functions/other_functions/\"></a><a name=\"../../../../functions/other_functions/\"></a><a name=\"../../../../../query_language/functions/other_functions/\"></a><a name=\"../query_language/functions/other_functions/\"></a><a name=\"../../../../../../functions/other_functions/\"></a><a name=\"../functions/other_functions/\"></a><a name=\"../../functions/other_functions/\"></a><a name=\"other_functions/\"></a><a name=\"../../../query_language/functions/other_functions/\"></a><a name=\"query_language/functions/other_functions/\"></a></p>\n<h2 id=\"other-functions\">Other functions<a class=\"headerlink\" href=\"#other-functions\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"hostname\">hostName()<a class=\"headerlink\" href=\"#hostname\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a string with the name of the host that this function was performed on. For distributed processing, this is the name of the remote server host, if the function is performed on a remote server.</p>\n<h3 id=\"basename\">basename<a class=\"headerlink\" href=\"#basename\" title=\"Permanent link\">&para;</a></h3>\n<p>Extracts the trailing part of a string after the last slash or backslash. This function if often used to extract the filename from a path.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">basename</span><span class=\"p\">(</span> <span class=\"n\">expr</span> <span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>expr</code> \u2014 Expression resulting in a <a href=\"#../../data_types/string/\">String</a> type value. All the backslashes must be escaped in the resulting value.</li>\n</ul>\n<p><strong>Returned Value</strong></p>\n<p>A string that contains:</p>\n<ul>\n<li>\n<p>The trailing part of a string after the last slash or backslash.</p>\n<p>If the input string contains a path ending with slash or backslash, for example, <code>/</code> or <code>c:\\</code>, the function returns an empty string.</p>\n</li>\n<li>\n<p>The original string if there are no slashes or backslashes.</p>\n</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"s1\">&#39;some/long/path/to/file&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">basename</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500a\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500basename(&#39;some\\\\long\\\\path\\\\to\\\\file&#39;)\u2500\u2510\n\u2502 some\\long\\path\\to\\file \u2502 file                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"s1\">&#39;some\\\\long\\\\path\\\\to\\\\file&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">basename</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500a\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500basename(&#39;some\\\\long\\\\path\\\\to\\\\file&#39;)\u2500\u2510\n\u2502 some\\long\\path\\to\\file \u2502 file                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"s1\">&#39;some-file-name&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">basename</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500a\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500basename(&#39;some-file-name&#39;)\u2500\u2510\n\u2502 some-file-name \u2502 some-file-name             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"visiblewidth-x\">visibleWidth(x)<a class=\"headerlink\" href=\"#visiblewidth-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the approximate width when outputting values to the console in text format (tab-separated).<br />\nThis function is used by the system for implementing Pretty formats.</p>\n<p><code>NULL</code> is represented as a string corresponding to <code>NULL</code> in <code>Pretty</code> formats.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">visibleWidth</span><span class=\"p\">(</span><span class=\"k\">NULL</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500visibleWidth(NULL)\u2500\u2510\n\u2502                  4 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"totypename-x\">toTypeName(x)<a class=\"headerlink\" href=\"#totypename-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns a string containing the type name of the passed argument.</p>\n<p>If <code>NULL</code> is passed to the function as input, then it returns the <code>Nullable(Nothing)</code> type, which corresponds to an internal <code>NULL</code> representation in ClickHouse.</p>\n<h3 id=\"function-blocksize\">blockSize()<a class=\"headerlink\" href=\"#function-blocksize\" title=\"Permanent link\">&para;</a></h3>\n<p>Gets the size of the block.<br />\nIn ClickHouse, queries are always run on blocks (sets of column parts). This function allows getting the size of the block that you called it for.</p>\n<h3 id=\"materialize-x\">materialize(x)<a class=\"headerlink\" href=\"#materialize-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Turns a constant into a full column containing just one value.<br />\nIn ClickHouse, full columns and constants are represented differently in memory. Functions work differently for constant arguments and normal arguments (different code is executed), although the result is almost always the same. This function is for debugging this behavior.</p>\n<h3 id=\"ignore\">ignore(...)<a class=\"headerlink\" href=\"#ignore\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts any arguments, including <code>NULL</code>. Always returns 0.<br />\nHowever, the argument is still evaluated. This can be used for benchmarks.</p>\n<h3 id=\"sleep-seconds\">sleep(seconds)<a class=\"headerlink\" href=\"#sleep-seconds\" title=\"Permanent link\">&para;</a></h3>\n<p>Sleeps 'seconds' seconds on each data block. You can specify an integer or a floating-point number.</p>\n<h3 id=\"sleepeachrow-seconds\">sleepEachRow(seconds)<a class=\"headerlink\" href=\"#sleepeachrow-seconds\" title=\"Permanent link\">&para;</a></h3>\n<p>Sleeps 'seconds' seconds on each row. You can specify an integer or a floating-point number.</p>\n<h3 id=\"currentdatabase\">currentDatabase()<a class=\"headerlink\" href=\"#currentdatabase\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the name of the current database.<br />\nYou can use this function in table engine parameters in a CREATE TABLE query where you need to specify the database.</p>\n<h3 id=\"currentuser\">currentUser()<a class=\"headerlink\" hre");
            
            document.write("f=\"#currentuser\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the login of authorized user (initiator of query execution).</p>\n<h3 id=\"isfinite-x\">isFinite(x)<a class=\"headerlink\" href=\"#isfinite-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts Float32 and Float64 and returns UInt8 equal to 1 if the argument is not infinite and not a NaN, otherwise 0.</p>\n<h3 id=\"isinfinite-x\">isInfinite(x)<a class=\"headerlink\" href=\"#isinfinite-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts Float32 and Float64 and returns UInt8 equal to 1 if the argument is infinite, otherwise 0. Note that 0 is returned for a NaN.</p>\n<h3 id=\"isnan-x\">isNaN(x)<a class=\"headerlink\" href=\"#isnan-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts Float32 and Float64 and returns UInt8 equal to 1 if the argument is a NaN, otherwise 0.</p>\n<h3 id=\"hascolumnintable-hostname-username-password-database-table-column\">hasColumnInTable(['hostname'[, 'username'[, 'password']],] 'database', 'table', 'column')<a class=\"headerlink\" href=\"#hascolumnintable-hostname-username-password-database-table-column\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts constant strings: database name, table name, and column name. Returns a UInt8 constant expression equal to 1 if there is a column, otherwise 0. If the hostname parameter is set, the test will run on a remote server.<br />\nThe function throws an exception if the table does not exist.<br />\nFor elements in a nested data structure, the function checks for the existence of a column. For the nested data structure itself, the function returns 0.</p>\n<h3 id=\"function-bar\">bar<a class=\"headerlink\" href=\"#function-bar\" title=\"Permanent link\">&para;</a></h3>\n<p>Allows building a unicode-art diagram.</p>\n<p><code>bar(x, min, max, width)</code> draws a band with a width proportional to <code>(x - min)</code> and equal to <code>width</code> characters when <code>x = max</code>.</p>\n<p>Parameters:</p>\n<ul>\n<li><code>x</code> \u2014 Size to display.</li>\n<li><code>min, max</code> \u2014 Integer constants. The value must fit in <code>Int64</code>.</li>\n<li><code>width</code> \u2014 Constant, positive integer, can be fractional.</li>\n</ul>\n<p>The band is drawn with accuracy to one eighth of a symbol.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">toHour</span><span class=\"p\">(</span><span class=\"n\">EventTime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">h</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span><span class=\"p\">,</span>\n    <span class=\"n\">bar</span><span class=\"p\">(</span><span class=\"k\">c</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">600000</span><span class=\"p\">,</span> <span class=\"mi\">20</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">bar</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">h</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">h</span> <span class=\"k\">ASC</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500h\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u252c\u2500bar\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  0 \u2502 292907 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258b         \u2502\n\u2502  1 \u2502 180563 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588             \u2502\n\u2502  2 \u2502 114861 \u2502 \u2588\u2588\u2588\u258b               \u2502\n\u2502  3 \u2502  85069 \u2502 \u2588\u2588\u258b                \u2502\n\u2502  4 \u2502  68543 \u2502 \u2588\u2588\u258e                \u2502\n\u2502  5 \u2502  78116 \u2502 \u2588\u2588\u258c                \u2502\n\u2502  6 \u2502 113474 \u2502 \u2588\u2588\u2588\u258b               \u2502\n\u2502  7 \u2502 170678 \u2502 \u2588\u2588\u2588\u2588\u2588\u258b             \u2502\n\u2502  8 \u2502 278380 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e         \u2502\n\u2502  9 \u2502 391053 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588      \u2502\n\u2502 10 \u2502 457681 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e   \u2502\n\u2502 11 \u2502 493667 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d  \u2502\n\u2502 12 \u2502 509641 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a  \u2502\n\u2502 13 \u2502 522947 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d \u2502\n\u2502 14 \u2502 539954 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a \u2502\n\u2502 15 \u2502 528460 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258c \u2502\n\u2502 16 \u2502 539201 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a \u2502\n\u2502 17 \u2502 523539 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d \u2502\n\u2502 18 \u2502 506467 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a  \u2502\n\u2502 19 \u2502 520915 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e \u2502\n\u2502 20 \u2502 521665 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d \u2502\n\u2502 21 \u2502 542078 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 \u2502\n\u2502 22 \u2502 493642 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d  \u2502\n\u2502 23 \u2502 400397 \u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"transform\">transform<a class=\"headerlink\" href=\"#transform\" title=\"Permanent link\">&para;</a></h3>\n<p>Transforms a value according to the explicitly defined mapping of some elements to other ones.<br />\nThere are two variations of this function:</p>\n<ol>\n<li><code>transform(x, array_from, array_to, default)</code></li>\n</ol>\n<p><code>x</code> \u2013 What to transform.</p>\n<p><code>array_from</code> \u2013 Constant array of values for converting.</p>\n<p><code>array_to</code> \u2013 Constant array of values to convert the values in 'from' to.</p>\n<p><code>default</code> \u2013 Which value to use if 'x' is not equal to any of the values in 'from'.</p>\n<p><code>array_from</code> and <code>array_to</code> \u2013 Arrays of the same size.</p>\n<p>Types:</p>\n<p><code>transform(T, Array(T), Array(U), U) -&gt; U</code></p>\n<p><code>T</code> and <code>U</code> can be numeric, string, or Date or DateTime types.<br />\nWhere the same letter is indicated (T or U), for numeric types these might not be matching types, but types that have a common type.<br />\nFor example, the first argument can have the Int64 type, while the second has the Array(UInt16) type.</p>\n<p>If the 'x' value is equal to one of the elements in the 'array_from' array, it returns the existing element (that is numbered the same) from the 'array_to' array. Otherwise, it returns 'default'. If there are multiple matching elements in 'array_from', it returns one of the matches.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">transform</span><span class=\"p\">(</span><span class=\"n\">SearchEngineID</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s1\">&#39;Yandex&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Google&#39;</span><span class=\"p\">],</span> <span class=\"s1\">&#39;Other&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">title</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">SearchEngineID</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">title</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">c</span> <span class=\"k\">DESC</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500title\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510\n\u2502 Yandex    \u2502 498635 \u2502\n\u2502 Google    \u2502 229872 \u2502\n\u2502 Other     \u2502 104472 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<ol start=\"2\">\n<li><code>transform(x, array_from, array_to)</code></li>\n</ol>\n<p>Differs from the first variation in that the 'default' argument is omitted.<br />\nIf the 'x' value is equal to one of the elements in the 'array_from' array, it returns the matching element (that is numbered the same) from the 'array_to' array. Otherwise, it returns 'x'.</p>\n<p>Types:</p>\n<p><code>transform(T, Array(T), Array(T)) -&gt; T</code></p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">transform</span><span class=\"p\">(</span><span class=\"k\">domain</span><span class=\"p\">(</span><span class=\"n\">Referer</span><span class=\"p\">),</span> <span class=\"p\">[</span><span class=\"s1\">&#39;yandex.ru&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;google.ru&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;vk.com&#39;</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s1\">&#39;www.yandex&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;example.com&#39;</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">s</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">hits</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">domain</span><span class=\"p\">(</span><span class=\"n\">Referer</span><span class=\"p\">)</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">DESC</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500s\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500c\u2500\u2510\n\u2502                \u2502 2906259 \u2502\n\u2502 www.yandex     \u2502  867767 \u2502\n\u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588.ru     \u2502  313599 \u2502\n\u2502 mail.yandex.ru \u2502  107147 \u2502\n\u2502 \u2588\u2588\u2588\u2588\u2588\u2588.ru      \u2502  100355 \u2502\n\u2502 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588.ru   \u2502   65040 \u2502\n\u2502 news.yandex.ru \u2502   64515 \u2502\n\u2502 \u2588\u2588\u2588\u2588\u2588\u2588.net     \u2502   59141 \u2502\n\u2502 example.com    \u2502   57316 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"formatreadablesize-x\">formatReadableSize(x)<a class=\"headerlink\" href=\"#formatreadablesize-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts the size (number of bytes). Returns a rounded size with a suffix (KiB, MiB, etc.) as a string.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">arrayJoin</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1024</span><span class=\"p\">,</span> <span class=\"mi\">1024</span><span class=\"o\">*</span><span class=\"mi\">1024</span><span class=\"p\">,</span> <span class=\"mi\">192851925</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">filesize_bytes</span><span class=\"p\">,</span>\n    <span class=\"n\">formatReadableSize</span><span class=\"p\">(</span><span class=\"n\">filesize_bytes</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">filesize</span>\n</code></pre></div>\n\n\n<div clas");
            
            document.write("s=\"codehilite\"><pre><span></span><code>\u250c\u2500filesize_bytes\u2500\u252c\u2500filesize\u2500\u2500\u2500\u2510\n\u2502              1 \u2502 1.00 B     \u2502\n\u2502           1024 \u2502 1.00 KiB   \u2502\n\u2502        1048576 \u2502 1.00 MiB   \u2502\n\u2502      192851925 \u2502 183.92 MiB \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"least-a-b\">least(a, b)<a class=\"headerlink\" href=\"#least-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the smallest value from a and b.</p>\n<h3 id=\"greatest-a-b\">greatest(a, b)<a class=\"headerlink\" href=\"#greatest-a-b\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the largest value of a and b.</p>\n<h3 id=\"uptime\">uptime()<a class=\"headerlink\" href=\"#uptime\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the server's uptime in seconds.</p>\n<h3 id=\"version\">version()<a class=\"headerlink\" href=\"#version\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the version of the server as a string.</p>\n<h3 id=\"timezone\">timezone()<a class=\"headerlink\" href=\"#timezone\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the timezone of the server.</p>\n<h3 id=\"blocknumber\">blockNumber<a class=\"headerlink\" href=\"#blocknumber\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the sequence number of the data block where the row is located.</p>\n<h3 id=\"function-rownumberinblock\">rowNumberInBlock<a class=\"headerlink\" href=\"#function-rownumberinblock\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the ordinal number of the row in the data block. Different data blocks are always recalculated.</p>\n<h3 id=\"rownumberinallblocks\">rowNumberInAllBlocks()<a class=\"headerlink\" href=\"#rownumberinallblocks\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the ordinal number of the row in the data block. This function only considers the affected data blocks.</p>\n<h3 id=\"neighbor-column-offset-default-value\">neighbor(column, offset[, default_value])<a class=\"headerlink\" href=\"#neighbor-column-offset-default-value\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns value for <code>column</code>, in <code>offset</code> distance from current row.<br />\nThis function is a partial implementation of <a href=\"https://en.wikipedia.org/wiki/SQL_window_function\" rel=\"external nofollow noreferrer\">window functions</a> LEAD() and LAG().</p>\n<p>The result of the function depends on the affected data blocks and the order of data in the block.<br />\nIf you make a subquery with ORDER BY and call the function from outside the subquery, you can get the expected result.</p>\n<p>If <code>offset</code> value is outside block bounds, a default value for <code>column</code> returned. If <code>default_value</code> is given, then it will be used.<br />\nThis function can be used to compute year-over-year metric value:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">start_date</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">toStartOfMonth</span><span class=\"p\">(</span><span class=\"n\">start_date</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"nb\">number</span> <span class=\"o\">*</span> <span class=\"mi\">32</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"k\">month</span><span class=\"p\">,</span>\n    <span class=\"n\">toInt32</span><span class=\"p\">(</span><span class=\"k\">month</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"mi\">100</span> <span class=\"k\">AS</span> <span class=\"n\">money</span><span class=\"p\">,</span>\n    <span class=\"n\">neighbor</span><span class=\"p\">(</span><span class=\"n\">money</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">12</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">prev_year</span><span class=\"p\">,</span>\n    <span class=\"n\">round</span><span class=\"p\">(</span><span class=\"n\">prev_year</span> <span class=\"o\">/</span> <span class=\"n\">money</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">year_over_year</span>\n<span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">16</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500month\u2500\u252c\u2500money\u2500\u252c\u2500prev_year\u2500\u252c\u2500year_over_year\u2500\u2510\n\u2502 2018-01-01 \u2502    32 \u2502         0 \u2502              0 \u2502\n\u2502 2018-02-01 \u2502    63 \u2502         0 \u2502              0 \u2502\n\u2502 2018-03-01 \u2502    91 \u2502         0 \u2502              0 \u2502\n\u2502 2018-04-01 \u2502    22 \u2502         0 \u2502              0 \u2502\n\u2502 2018-05-01 \u2502    52 \u2502         0 \u2502              0 \u2502\n\u2502 2018-06-01 \u2502    83 \u2502         0 \u2502              0 \u2502\n\u2502 2018-07-01 \u2502    13 \u2502         0 \u2502              0 \u2502\n\u2502 2018-08-01 \u2502    44 \u2502         0 \u2502              0 \u2502\n\u2502 2018-09-01 \u2502    75 \u2502         0 \u2502              0 \u2502\n\u2502 2018-10-01 \u2502     5 \u2502         0 \u2502              0 \u2502\n\u2502 2018-11-01 \u2502    36 \u2502         0 \u2502              0 \u2502\n\u2502 2018-12-01 \u2502    66 \u2502         0 \u2502              0 \u2502\n\u2502 2019-01-01 \u2502    97 \u2502        32 \u2502           0.33 \u2502\n\u2502 2019-02-01 \u2502    28 \u2502        63 \u2502           2.25 \u2502\n\u2502 2019-03-01 \u2502    56 \u2502        91 \u2502           1.62 \u2502\n\u2502 2019-04-01 \u2502    87 \u2502        22 \u2502           0.25 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"other_functions-runningdifference\">runningDifference(x)<a class=\"headerlink\" href=\"#other_functions-runningdifference\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the difference between successive row values \u200b\u200bin the data block.<br />\nReturns 0 for the first row and the difference from the previous row for each subsequent row.</p>\n<p>The result of the function depends on the affected data blocks and the order of data in the block.<br />\nIf you make a subquery with ORDER BY and call the function from outside the subquery, you can get the expected result.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">EventID</span><span class=\"p\">,</span>\n    <span class=\"n\">EventTime</span><span class=\"p\">,</span>\n    <span class=\"n\">runningDifference</span><span class=\"p\">(</span><span class=\"n\">EventTime</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">delta</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">EventID</span><span class=\"p\">,</span>\n        <span class=\"n\">EventTime</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">events</span>\n    <span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2016-11-24&#39;</span>\n    <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">EventTime</span> <span class=\"k\">ASC</span>\n    <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500EventID\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500EventTime\u2500\u252c\u2500delta\u2500\u2510\n\u2502    1106 \u2502 2016-11-24 00:00:04 \u2502     0 \u2502\n\u2502    1107 \u2502 2016-11-24 00:00:05 \u2502     1 \u2502\n\u2502    1108 \u2502 2016-11-24 00:00:05 \u2502     0 \u2502\n\u2502    1109 \u2502 2016-11-24 00:00:09 \u2502     4 \u2502\n\u2502    1110 \u2502 2016-11-24 00:00:10 \u2502     1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Please note - block size affects the result. With each new block, the <code>runningDifference</code> state is reset.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"nb\">number</span><span class=\"p\">,</span>\n    <span class=\"n\">runningDifference</span><span class=\"p\">(</span><span class=\"nb\">number</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">diff</span>\n<span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">100000</span><span class=\"p\">)</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">diff</span> <span class=\"o\">!=</span> <span class=\"mi\">1</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500number\u2500\u252c\u2500diff\u2500\u2510\n\u2502      0 \u2502    0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500number\u2500\u252c\u2500diff\u2500\u2510\n\u2502  65536 \u2502    0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">set</span> <span class=\"n\">max_block_size</span><span class=\"o\">=</span><span class=\"mi\">100000</span> <span class=\"c1\">-- default value is 65536! </span>\n\n<span class=\"k\">SELECT</span>\n    <span class=\"nb\">number</span><span class=\"p\">,</span>\n    <span class=\"n\">runningDifference</span><span class=\"p\">(</span><span class=\"nb\">number</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">diff</span>\n<span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">100000</span><span class=\"p\">)</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">diff</span> <span class=\"o\">!=</span> <span class=\"mi\">1</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500number\u2500\u252c\u2500diff\u2500\u2510\n\u2502      0 \u2502    0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"runningdifferencestartingwithfirstvalue\">runningDifferenceStartingWithFirstValue<a class=\"headerlink\" href=\"#runningdifferencestartingwithfirstvalue\" title=\"Permanent link\">&para;</a></h3>\n<p>Same as for <a href=\"#other_functions-runningdifference\">runningDifference</a>, the difference is the value of the first row, returned the value of the first row, and each subsequent row returns the difference from the previous row.</p>\n<h3 id=\"macnumtostring-num\">MACNumToString(num)<a class=\"headerlink\" href=\"#macnumtostring-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts a UInt64 number. Interprets it as a MAC address in big endian. Returns a string containing the corresponding MAC address in the format AA:BB:CC:DD:EE:FF (colon-separated numbers in hexadecimal form).</p>\n<h3 id=\"macstringtonum-s\">MACStringToNum(s)<a class=\"headerlink\" href=\"#macstringtonum-s\" title=\"Permanent link\">&para;</a></h3>\n<p>The inverse function of MACNumToString. If the MAC address has an invalid format, it returns 0.</p>\n<h3 id=\"macstringtooui-s\">MACStringToOUI(s)<a class=\"headerlink\" href=\"#macstringtooui-s\" title=\"Permanent link\">&para;</a></h3>\n<p>Accepts ");
            
            document.write("a MAC address in the format AA:BB:CC:DD:EE:FF (colon-separated numbers in hexadecimal form). Returns the first three octets as a UInt64 number. If the MAC address has an invalid format, it returns 0.</p>\n<h3 id=\"getsizeofenumtype\">getSizeOfEnumType<a class=\"headerlink\" href=\"#getsizeofenumtype\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the number of fields in <a href=\"#../../data_types/enum/\">Enum</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">getSizeOfEnumType</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>value</code> \u2014 Value of type <code>Enum</code>.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>The number of fields with <code>Enum</code> input values.</li>\n<li>An exception is thrown if the type is not <code>Enum</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">getSizeOfEnumType</span><span class=\"p\">(</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">Enum8</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span> <span class=\"o\">=</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"p\">)</span> <span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">x</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u2510\n\u2502 2 \u2502\n\u2514\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"tocolumntypename\">toColumnTypeName<a class=\"headerlink\" href=\"#tocolumntypename\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the name of the class that represents the data type of the column in RAM.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">toColumnTypeName</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>value</code> \u2014 Any type of value.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>A string with the name of the class that is used for representing the <code>value</code> data type in RAM.</li>\n</ul>\n<p><strong>Example of the difference between<code>toTypeName ' and ' toColumnTypeName</code></strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">DateTime</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toTypeName(CAST(&#39;2018-01-01 01:02:03&#39;, &#39;DateTime&#39;))\u2500\u2510\n\u2502 DateTime                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">toColumnTypeName</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span> <span class=\"k\">AS</span> <span class=\"n\">DateTime</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500toColumnTypeName(CAST(&#39;2018-01-01 01:02:03&#39;, &#39;DateTime&#39;))\u2500\u2510\n\u2502 Const(UInt32)                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The example shows that the <code>DateTime</code> data type is stored in memory as <code>Const(UInt32)</code>.</p>\n<h3 id=\"dumpcolumnstructure\">dumpColumnStructure<a class=\"headerlink\" href=\"#dumpcolumnstructure\" title=\"Permanent link\">&para;</a></h3>\n<p>Outputs a detailed description of data structures in RAM</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dumpColumnStructure</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>value</code> \u2014 Any type of value.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>A string describing the structure that is used for representing the <code>value</code> data type in RAM.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">dumpColumnStructure</span><span class=\"p\">(</span><span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"s1\">&#39;2018-01-01 01:02:03&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;DateTime&#39;</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500dumpColumnStructure(CAST(&#39;2018-01-01 01:02:03&#39;, &#39;DateTime&#39;))\u2500\u2510\n\u2502 DateTime, Const(size = 1, UInt32(size = 1))                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"defaultvalueofargumenttype\">defaultValueOfArgumentType<a class=\"headerlink\" href=\"#defaultvalueofargumenttype\" title=\"Permanent link\">&para;</a></h3>\n<p>Outputs the default value for the data type.</p>\n<p>Does not include default values for custom columns set by the user.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span><span class=\"n\">expression</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>expression</code> \u2014 Arbitrary type of value or an expression that results in a value of an arbitrary type.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li><code>0</code> for numbers.</li>\n<li>Empty string for strings.</li>\n<li><code>\u1d3a\u1d41\u1d38\u1d38</code> for <a href=\"#../../data_types/nullable/\">Nullable</a>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"mi\">1</span> <span class=\"k\">AS</span> <span class=\"nb\">Int8</span><span class=\"p\">)</span> <span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500defaultValueOfArgumentType(CAST(1, &#39;Int8&#39;))\u2500\u2510\n\u2502                                           0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">defaultValueOfArgumentType</span><span class=\"p\">(</span> <span class=\"k\">CAST</span><span class=\"p\">(</span><span class=\"mi\">1</span> <span class=\"k\">AS</span> <span class=\"k\">Nullable</span><span class=\"p\">(</span><span class=\"nb\">Int8</span><span class=\"p\">)</span> <span class=\"p\">)</span> <span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500defaultValueOfArgumentType(CAST(1, &#39;Nullable(Int8)&#39;))\u2500\u2510\n\u2502                                                  \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"indexhint\">indexHint<a class=\"headerlink\" href=\"#indexhint\" title=\"Permanent link\">&para;</a></h3>\n<p>Outputs data in the range selected by the index without filtering by the expression specified as an argument.</p>\n<p>The expression passed to the function is not calculated, but ClickHouse applies the index to this expression in the same way as if the expression was in the query without <code>indexHint</code>.</p>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>1.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Here is a table with the test data for <a href=\"#../../getting_started/example_datasets/ontime/\">ontime</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500count()\u2500\u2510\n\u2502 4276457 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The table has indexes for the fields <code>(FlightDate, (Year, FlightDate))</code>.</p>\n<p>Create a selection by date like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">ontime</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500k\u2500\u252c\u2500count()\u2500\u2510\n\u2502 2017-01-01 \u2502   13970 \u2502\n\u2502 2017-01-02 \u2502   15882 \u2502\n........................\n\u2502 2017-09-28 \u2502   16411 \u2502\n\u2502 2017-09-29 \u2502   16384 \u2502\n\u2502 2017-09-30 \u2502   12520 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>In this selection, the index is not used and ClickHouse processed the entire table (<code>Processed 4.28 million rows</code>). To apply the index, select a specific date and run the following query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">ontime</span> <span class=\"k\">WHERE</span> <span class=\"n\">k</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2017-09-15&#39;</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500k\u2500\u252c\u2500count()\u2500\u2510\n\u2502 2017-09-15 \u2502   16428 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The last line of output shows that by using the index, ClickHouse processed a significantly smaller number of rows (<code>Processed 32.74 thousand rows</code>).</p>\n<p>N");
            
            document.write("ow pass the expression <code>k = '2017-09-15'</code> to the <code>indexHint</code> function:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">FlightDate</span> <span class=\"k\">AS</span> <span class=\"n\">k</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">indexHint</span><span class=\"p\">(</span><span class=\"n\">k</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2017-09-15&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">k</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">k</span> <span class=\"k\">ASC</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500k\u2500\u252c\u2500count()\u2500\u2510\n\u2502 2017-09-14 \u2502    7071 \u2502\n\u2502 2017-09-15 \u2502   16428 \u2502\n\u2502 2017-09-16 \u2502    1077 \u2502\n\u2502 2017-09-30 \u2502    8167 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The response to the request shows that ClickHouse applied the index in the same way as the previous time (<code>Processed 32.74 thousand rows</code>). However, the resulting set of rows shows that the expression <code>k = '2017-09-15'</code> was not used when generating the result.</p>\n<p>Because the index is sparse in ClickHouse, \"extra\" data ends up in the response when reading a range (in this case, the adjacent dates). Use the <code>indexHint</code> function to see it.</p>\n<h3 id=\"replicate\">replicate<a class=\"headerlink\" href=\"#replicate\" title=\"Permanent link\">&para;</a></h3>\n<p>Creates an array with a single value.</p>\n<p>Used for internal implementation of <a href=\"#functions_arrayjoin\">arrayJoin</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">replicate</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>arr</code> \u2014 Original array. ClickHouse creates a new array of the same length as the original and fills it with the value <code>x</code>.</li>\n<li><code>x</code> \u2014 The value that the resulting array will be filled with.</li>\n</ul>\n<p><strong>Output value</strong></p>\n<ul>\n<li>An array filled with the value <code>x</code>.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">replicate</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c&#39;</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500replicate(1, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])\u2500\u2510\n\u2502 [1,1,1]                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"function-filesystemavailable\">filesystemAvailable<a class=\"headerlink\" href=\"#function-filesystemavailable\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the amount of remaining space in the filesystem where the files of the databases located. See the <a href=\"#server_settings-path\">path</a> server setting description.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">filesystemAvailable</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Amount of remaining space in bytes.</li>\n</ul>\n<p>Type: <a href=\"#../../data_types/int_uint/\">UInt64</a>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">filesystemAvailable</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"ss\">&quot;Free space&quot;</span><span class=\"p\">,</span> <span class=\"n\">toTypeName</span><span class=\"p\">(</span><span class=\"n\">filesystemAvailable</span><span class=\"p\">())</span> <span class=\"k\">AS</span> <span class=\"ss\">&quot;Type&quot;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500Free space\u2500\u252c\u2500Type\u2500\u2500\u2500\u2510\n\u2502 18152624128 \u2502 UInt64 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"filesystemcapacity\">filesystemCapacity<a class=\"headerlink\" href=\"#filesystemcapacity\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the capacity information of the disk, in bytes. This information is evaluated using the configured by path.</p>\n<h3 id=\"function-finalizeaggregation\">finalizeAggregation<a class=\"headerlink\" href=\"#function-finalizeaggregation\" title=\"Permanent link\">&para;</a></h3>\n<p>Takes state of aggregate function. Returns result of aggregation (finalized state).</p>\n<h3 id=\"function-runningaccumulate\">runningAccumulate<a class=\"headerlink\" href=\"#function-runningaccumulate\" title=\"Permanent link\">&para;</a></h3>\n<p>Takes the states of the aggregate function and returns a column with values, are the result of the accumulation of these states for a set of block lines, from the first to the current line.<br />\nFor example, takes state of aggregate function (example runningAccumulate(uniqState(UserID))), and for each row of block, return result of aggregate function on merge of states of all previous rows and current row.<br />\nSo, result of function depends on partition of data to blocks and on order of data in block.</p>\n<h3 id=\"other_functions-joinget\">joinGet('join_storage_table_name', 'get_column', join_key)<a class=\"headerlink\" href=\"#other_functions-joinget\" title=\"Permanent link\">&para;</a></h3>\n<p>Gets data from <a href=\"#../../operations/table_engines/join/\">Join</a> tables using the specified join key.</p>\n<p>Only supports tables created with the <code>ENGINE = Join(ANY, LEFT, &lt;join_keys&gt;)</code> statement.</p>\n<h3 id=\"modelevaluate-model-name\">modelEvaluate(model_name, ...)<a class=\"headerlink\" href=\"#modelevaluate-model-name\" title=\"Permanent link\">&para;</a></h3>\n<p>Evaluate model.<br />\nAccepts a model name and model arguments. Returns Float64.</p>\n<h3 id=\"throwif-x-custom-message\">throwIf(x[, custom_message])<a class=\"headerlink\" href=\"#throwif-x-custom-message\" title=\"Permanent link\">&para;</a></h3>\n<p>Throw an exception if the argument is non zero.<br />\ncustom_message - is an optional parameter: a constant string, provides an error message</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">throwIf</span><span class=\"p\">(</span><span class=\"nb\">number</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Too many&#39;</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u2199 Progress: 0.00 rows, 0.00 B (0.00 rows/s., 0.00 B/s.) Received exception from server (version 19.14.1):\nCode: 395. DB::Exception: Received from localhost:9000. DB::Exception: Too many.\n</code></pre></div>\n\n\n<h3 id=\"identity\">identity()<a class=\"headerlink\" href=\"#identity\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns the same value that was used as its argument. </p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">identity</span><span class=\"p\">(</span><span class=\"mi\">42</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500identity(42)\u2500\u2510\n\u2502           42 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Used for debugging and testing, allows to \"break\" access by index, and get the result and query performance for a full scan.</p>\n<p><a name=\"../query_language/agg_functions/\"></a><a name=\"../../query_language/agg_functions/\"></a><a name=\"query_language/agg_functions/\"></a><a name=\"../../../../../query_language/agg_functions/\"></a><a name=\"../../../../query_language/agg_functions/\"></a><a name=\"agg_functions/\"></a><a name=\"../../../query_language/agg_functions/\"></a></p>\n<h2 id=\"aggregate_functions\">Aggregate functions<a class=\"headerlink\" href=\"#aggregate_functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Aggregate functions work in the <a href=\"http://www.sql-tutorial.com/sql-aggregate-functions-sql-tutorial\" rel=\"external nofollow noreferrer\">normal</a> way as expected by database experts.</p>\n<p>ClickHouse also supports:</p>\n<ul>\n<li><a href=\"#aggregate_functions_parametric\">Parametric aggregate functions</a>, which accept other parameters in addition to columns.</li>\n<li><a href=\"#aggregate_functions_combinators\">Combinators</a>, which change the behavior of aggregate functions.</li>\n</ul>\n<h3 id=\"null-processing_1\">NULL processing<a class=\"headerlink\" href=\"#null-processing_1\" title=\"Permanent link\">&para;</a></h3>\n<p>During aggregation, all <code>NULL</code>s are skipped.</p>\n<p><strong>Examples:</strong></p>\n<p>Consider this table:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u252c\u2500\u2500\u2500\u2500y\u2500\u2510\n\u2502 1 \u2502    2 \u2502\n\u2502 2 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2502 3 \u2502    2 \u2502\n\u2502 3 \u2502    3 \u2502\n\u2502 3 \u2502 \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Let's say you need to total the values in the <code>y</code> column:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null_big</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">\u250c\u2500sum(y)\u2500\u2510</span>\n<span class=\"err\">\u2502      7 \u2502</span>\n<span class=\"err\">\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</span>\n</code></pre></div>\n\n\n<p>The <code>sum</code> function interprets <code>NULL</code> as <code>0</code>. In particular, this means that if the function receives input of a selection where all the values are <code>NULL</code>, then the result will be <code>0</code>, not <code>NULL</code>.</p>\n<p>Now you can use the <code>groupArray</code> function to create an array from the <code>y</code> column:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupArray</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span> ");
            
            document.write("<span class=\"k\">FROM</span> <span class=\"n\">t_null_big</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500groupArray(y)\u2500\u2510\n\u2502 [2,2,3]       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><code>groupArray</code> does not include <code>NULL</code> in the resulting array.</p>\n<p><a name=\"query_language/agg_functions/reference/\"></a><a name=\"../../../query_language/agg_functions/reference/\"></a><a name=\"../../../../query_language/agg_functions/reference/\"></a><a name=\"agg_functions/reference/\"></a><a name=\"../../query_language/agg_functions/reference/\"></a><a name=\"../query_language/agg_functions/reference/\"></a><a name=\"../../../../../agg_functions/reference/\"></a><a name=\"../../../../../../agg_functions/reference/\"></a><a name=\"../../../../../query_language/agg_functions/reference/\"></a><a name=\"../../../agg_functions/reference/\"></a><a name=\"../agg_functions/reference/\"></a><a name=\"../../agg_functions/reference/\"></a><a name=\"reference/\"></a><a name=\"../../../../agg_functions/reference/\"></a></p>\n<h2 id=\"function-reference\">Function Reference<a class=\"headerlink\" href=\"#function-reference\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"agg_function-count\">count<a class=\"headerlink\" href=\"#agg_function-count\" title=\"Permanent link\">&para;</a></h3>\n<p>Counts the number of rows or not-NULL values.</p>\n<p>ClickHouse supports the following syntaxes for <code>count</code>:<br />\n- <code>count(expr)</code> or <code>COUNT(DISTINCT expr)</code>.<br />\n- <code>count()</code> or <code>COUNT(*)</code>. The <code>count()</code> syntax is ClickHouse-specific.</p>\n<p><strong>Parameters</strong></p>\n<p>The function can take:</p>\n<ul>\n<li>Zero parameters.</li>\n<li>One <a href=\"#syntax-expressions\">expression</a>.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>If the function is called without parameters it counts the number of rows.</li>\n<li>If the <a href=\"#syntax-expressions\">expression</a> is passed, then the function counts how many times this expression returned not null. If the expression returns a <a href=\"#../../data_types/nullable/\">Nullable</a>-type value, then the result of <code>count</code> stays not <code>Nullable</code>. The function returns 0 if the expression returned <code>NULL</code> for all the rows.</li>\n</ul>\n<p>In both cases the type of the returned value is <a href=\"#../../data_types/int_uint/\">UInt64</a>.</p>\n<p><strong>Details</strong></p>\n<p>ClickHouse supports the <code>COUNT(DISTINCT ...)</code> syntax. The behavior of this construction depends on the <a href=\"#settings-count_distinct_implementation\">count_distinct_implementation</a> setting. It defines which of the <a href=\"#agg_function-uniq\">uniq*</a> functions is used to perform the operation. The default is the <a href=\"#agg_function-uniqexact\">uniqExact</a> function.</p>\n<p>The <code>SELECT count() FROM table</code> query is not optimized, because the number of entries in the table is not stored separately. It chooses a small column from the table and counts the number of values in it.</p>\n<p><strong>Examples</strong></p>\n<p>Example 1:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500count()\u2500\u2510\n\u2502       5 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Example 2:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">settings</span> <span class=\"k\">WHERE</span> <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;count_distinct_implementation&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 count_distinct_implementation \u2502 uniqExact \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"k\">DISTINCT</span> <span class=\"n\">num</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500uniqExact(num)\u2500\u2510\n\u2502              3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>This example shows that <code>count(DISTINCT num)</code> is performed by the <code>uniqExact</code> function according to the <code>count_distinct_implementation</code> setting value.</p>\n<h3 id=\"agg_function-any\">any(x)<a class=\"headerlink\" href=\"#agg_function-any\" title=\"Permanent link\">&para;</a></h3>\n<p>Selects the first encountered value.<br />\nThe query can be executed in any order and even in a different order each time, so the result of this function is indeterminate.<br />\nTo get a determinate result, you can use the 'min' or 'max' function instead of 'any'.</p>\n<p>In some cases, you can rely on the order of execution. This applies to cases when SELECT comes from a subquery that uses ORDER BY.</p>\n<p>When a <code>SELECT</code> query has the <code>GROUP BY</code> clause or at least one aggregate function, ClickHouse (in contrast to MySQL) requires that all expressions in the <code>SELECT</code>, <code>HAVING</code>, and <code>ORDER BY</code> clauses be calculated from keys or from aggregate functions. In other words, each column selected from the table must be used either in keys or inside aggregate functions. To get behavior like in MySQL, you can put the other columns in the <code>any</code> aggregate function.</p>\n<h3 id=\"anyheavy-x\">anyHeavy(x)<a class=\"headerlink\" href=\"#anyheavy-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Selects a frequently occurring value using the <a href=\"http://www.cs.umd.edu/~samir/498/karp.pdf\" rel=\"external nofollow noreferrer\">heavy hitters</a> algorithm. If there is a value that occurs more than in half the cases in each of the query's execution threads, this value is returned. Normally, the result is nondeterministic.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">anyHeavy</span><span class=\"p\">(</span><span class=\"k\">column</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Arguments</strong></p>\n<ul>\n<li><code>column</code> \u2013 The column name.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Take the <a href=\"#../../getting_started/example_datasets/ontime/\">OnTime</a> data set and select any frequently occurring value in the <code>AirlineID</code> column.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">anyHeavy</span><span class=\"p\">(</span><span class=\"n\">AirlineID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500res\u2500\u2510\n\u2502 19690 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"anylast-x\">anyLast(x)<a class=\"headerlink\" href=\"#anylast-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Selects the last value encountered.<br />\nThe result is just as indeterminate as for the <code>any</code> function.</p>\n<h3 id=\"groupbitand\">groupBitAnd<a class=\"headerlink\" href=\"#groupbitand\" title=\"Permanent link\">&para;</a></h3>\n<p>Applies bitwise <code>AND</code> for series of numbers.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitAnd</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>UInt*</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt*</code> type.</p>\n<p><strong>Example</strong></p>\n<p>Test data:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n00101100 = 44\n00011100 = 28\n00001101 = 13\n01010101 = 85\n</code></pre></div>\n\n\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitAnd</span><span class=\"p\">(</span><span class=\"n\">num</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<p>Where <code>num</code> is the column with the test data.</p>\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n00000100 = 4\n</code></pre></div>\n\n\n<h3 id=\"groupbitor\">groupBitOr<a class=\"headerlink\" href=\"#groupbitor\" title=\"Permanent link\">&para;</a></h3>\n<p>Applies bitwise <code>OR</code> for series of numbers.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitOr</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>UInt*</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt*</code> type.</p>\n<p><strong>Example</strong></p>\n<p>Test data:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n00101100 = 44\n00011100 = 28\n00001101 = 13\n01010101 = 85\n</code></pre></div>\n\n\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitOr</span><span class=\"p\">(</span><span class=\"n\">num</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<p>Where <code>num</code> is the column with the test data.</p>\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n01111101 = 125\n</code></pre></div>\n\n\n<h3 id=\"groupbitxor\">groupBitXor<a class=\"headerlink\" href=\"#groupbitxor\" title=\"Permanent link\">&para;</a></h3>\n<p>Applies bitwise <code>XOR</code> for series of numbers.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitXor</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>UInt*</code> type.</p>\n<p><strong>Return value</strong></p");
            
            document.write(">\n<p>Value of the <code>UInt*</code> type.</p>\n<p><strong>Example</strong></p>\n<p>Test data:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n00101100 = 44\n00011100 = 28\n00001101 = 13\n01010101 = 85\n</code></pre></div>\n\n\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitXor</span><span class=\"p\">(</span><span class=\"n\">num</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<p>Where <code>num</code> is the column with the test data.</p>\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>binary     decimal\n01101000 = 104\n</code></pre></div>\n\n\n<h3 id=\"groupbitmap\">groupBitmap<a class=\"headerlink\" href=\"#groupbitmap\" title=\"Permanent link\">&para;</a></h3>\n<p>Bitmap or Aggregate calculations from a unsigned integer column, return cardinality of type UInt64, if add suffix -State, then return <a href=\"#../functions/bitmap_functions/\">bitmap object</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupBitmap</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2013 An expression that results in <code>UInt*</code> type.</p>\n<p><strong>Return value</strong></p>\n<p>Value of the <code>UInt64</code> type.</p>\n<p><strong>Example</strong></p>\n<p>Test data:</p>\n<div class=\"codehilite\"><pre><span></span><code>UserID\n1\n1\n2\n3\n</code></pre></div>\n\n\n<p>Query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupBitmap</span><span class=\"p\">(</span><span class=\"n\">UserID</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">num</span> <span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<p>Result:</p>\n<div class=\"codehilite\"><pre><span></span><code>num\n3\n</code></pre></div>\n\n\n<h3 id=\"agg_function-min\">min(x)<a class=\"headerlink\" href=\"#agg_function-min\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the minimum.</p>\n<h3 id=\"agg_function-max\">max(x)<a class=\"headerlink\" href=\"#agg_function-max\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the maximum.</p>\n<h3 id=\"agg_function-argMin\">argMin(arg, val)<a class=\"headerlink\" href=\"#agg_function-argMin\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the 'arg' value for a minimal 'val' value. If there are several different values of 'arg' for minimal values of 'val', the first of these values encountered is output.</p>\n<p><strong>Example:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500user\u2500\u2500\u2500\u2500\u2500\u252c\u2500salary\u2500\u2510\n\u2502 director \u2502   5000 \u2502\n\u2502 manager  \u2502   3000 \u2502\n\u2502 worker   \u2502   1000 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">argMin</span><span class=\"p\">(</span><span class=\"k\">user</span><span class=\"p\">,</span> <span class=\"n\">salary</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">salary</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500argMin(user, salary)\u2500\u2510\n\u2502 worker               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"agg_function-argMax\">argMax(arg, val)<a class=\"headerlink\" href=\"#agg_function-argMax\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the 'arg' value for a maximum 'val' value. If there are several different values of 'arg' for maximum values of 'val', the first of these values encountered is output.</p>\n<h3 id=\"agg_function-sum\">sum(x)<a class=\"headerlink\" href=\"#agg_function-sum\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the sum.<br />\nOnly works for numbers.</p>\n<h3 id=\"sumwithoverflow-x\">sumWithOverflow(x)<a class=\"headerlink\" href=\"#sumwithoverflow-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the sum of the numbers, using the same data type for the result as for the input parameters. If the sum exceeds the maximum value for this data type, the function returns an error.</p>\n<p>Only works for numbers.</p>\n<h3 id=\"agg_functions-summap\">sumMap(key, value)<a class=\"headerlink\" href=\"#agg_functions-summap\" title=\"Permanent link\">&para;</a></h3>\n<p>Totals the 'value' array according to the keys specified in the 'key' array.<br />\nThe number of elements in 'key' and 'value' must be the same for each row that is totaled.<br />\nReturns a tuple of two arrays: keys in sorted order, and values \u200b\u200bsummed for the corresponding keys.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">sum_map</span><span class=\"p\">(</span>\n    <span class=\"nb\">date</span> <span class=\"nb\">Date</span><span class=\"p\">,</span>\n    <span class=\"n\">timeslot</span> <span class=\"n\">DateTime</span><span class=\"p\">,</span>\n    <span class=\"n\">statusMap</span> <span class=\"n\">Nested</span><span class=\"p\">(</span>\n        <span class=\"n\">status</span> <span class=\"n\">UInt16</span><span class=\"p\">,</span>\n        <span class=\"n\">requests</span> <span class=\"n\">UInt64</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">sum_map</span> <span class=\"k\">VALUES</span>\n    <span class=\"p\">(</span><span class=\"s1\">&#39;2000-01-01&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2000-01-01 00:00:00&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">]),</span>\n    <span class=\"p\">(</span><span class=\"s1\">&#39;2000-01-01&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2000-01-01 00:00:00&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">]),</span>\n    <span class=\"p\">(</span><span class=\"s1\">&#39;2000-01-01&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2000-01-01 00:01:00&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">]),</span>\n    <span class=\"p\">(</span><span class=\"s1\">&#39;2000-01-01&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2000-01-01 00:01:00&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">7</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">]);</span>\n<span class=\"k\">SELECT</span>\n    <span class=\"n\">timeslot</span><span class=\"p\">,</span>\n    <span class=\"n\">sumMap</span><span class=\"p\">(</span><span class=\"n\">statusMap</span><span class=\"p\">.</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">statusMap</span><span class=\"p\">.</span><span class=\"n\">requests</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">sum_map</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">timeslot</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500timeslot\u2500\u252c\u2500sumMap(statusMap.status, statusMap.requests)\u2500\u2510\n\u2502 2000-01-01 00:00:00 \u2502 ([1,2,3,4,5],[10,10,20,10,10])               \u2502\n\u2502 2000-01-01 00:01:00 \u2502 ([4,5,6,7,8],[10,10,20,10,10])               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"skewpop\">skewPop<a class=\"headerlink\" href=\"#skewpop\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the <a href=\"https://en.wikipedia.org/wiki/Skewness\" rel=\"external nofollow noreferrer\">skewness</a> of a sequence.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">skewPop</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number.</p>\n<p><strong>Returned value</strong></p>\n<p>The skewness of the given distribution. Type \u2014 <a href=\"#../../data_types/float/\">Float64</a></p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">skewPop</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">series_with_value_column</span>\n</code></pre></div>\n\n\n<h3 id=\"skewsamp\">skewSamp<a class=\"headerlink\" href=\"#skewsamp\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the <a href=\"https://en.wikipedia.org/wiki/Skewness\" rel=\"external nofollow noreferrer\">sample skewness</a> of a sequence.</p>\n<p>It represents an unbiased estimate of the skewness of a random variable if passed values form its sample.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">skewSamp</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number.</p>\n<p><strong>Returned value</strong></p>\n<p>The skewness of the given distribution. Type \u2014 <a href=\"#../../data_types/float/\">Float64</a>. If <code>n &lt;= 1</code> (<c");
            
            document.write("ode>n</code> is the size of the sample), then the function returns <code>nan</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">skewSamp</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">series_with_value_column</span>\n</code></pre></div>\n\n\n<h3 id=\"kurtpop\">kurtPop<a class=\"headerlink\" href=\"#kurtpop\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the <a href=\"https://en.wikipedia.org/wiki/Kurtosis\" rel=\"external nofollow noreferrer\">kurtosis</a> of a sequence.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">kurtPop</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number.</p>\n<p><strong>Returned value</strong></p>\n<p>The kurtosis of the given distribution. Type \u2014 <a href=\"#../../data_types/float/\">Float64</a></p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">kurtPop</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">series_with_value_column</span>\n</code></pre></div>\n\n\n<h3 id=\"kurtsamp\">kurtSamp<a class=\"headerlink\" href=\"#kurtsamp\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the <a href=\"https://en.wikipedia.org/wiki/Kurtosis\" rel=\"external nofollow noreferrer\">sample kurtosis</a> of a sequence.</p>\n<p>It represents an unbiased estimate of the kurtosis of a random variable if passed values form its sample.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">kurtSamp</span><span class=\"p\">(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a number.</p>\n<p><strong>Returned value</strong></p>\n<p>The kurtosis of the given distribution. Type \u2014 <a href=\"#../../data_types/float/\">Float64</a>. If <code>n &lt;= 1</code> (<code>n</code> is a size of the sample), then the function returns <code>nan</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">kurtSamp</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">series_with_value_column</span>\n</code></pre></div>\n\n\n<h3 id=\"agg_function-timeseriesgroupsum\">timeSeriesGroupSum(uid, timestamp, value)<a class=\"headerlink\" href=\"#agg_function-timeseriesgroupsum\" title=\"Permanent link\">&para;</a></h3>\n<p><code>timeSeriesGroupSum</code> can aggregate different time series that sample timestamp not alignment.<br />\nIt will use linear interpolation between two sample timestamp and then sum time-series together.</p>\n<ul>\n<li><code>uid</code> is the time series unique id, <code>UInt64</code>.</li>\n<li><code>timestamp</code> is Int64 type in order to support millisecond or microsecond.</li>\n<li><code>value</code> is the metric.</li>\n</ul>\n<p>The function returns array of tuples with <code>(timestamp, aggregated_value)</code> pairs.</p>\n<p>Before using this function make sure <code>timestamp</code> is in ascending order.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500uid\u2500\u252c\u2500timestamp\u2500\u252c\u2500value\u2500\u2510\n\u2502 1   \u2502     2     \u2502   0.2 \u2502\n\u2502 1   \u2502     7     \u2502   0.7 \u2502\n\u2502 1   \u2502    12     \u2502   1.2 \u2502\n\u2502 1   \u2502    17     \u2502   1.7 \u2502\n\u2502 1   \u2502    25     \u2502   2.5 \u2502\n\u2502 2   \u2502     3     \u2502   0.6 \u2502\n\u2502 2   \u2502     8     \u2502   1.6 \u2502\n\u2502 2   \u2502    12     \u2502   2.4 \u2502\n\u2502 2   \u2502    18     \u2502   3.6 \u2502\n\u2502 2   \u2502    24     \u2502   4.8 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">time_series</span><span class=\"p\">(</span>\n    <span class=\"n\">uid</span>       <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"k\">timestamp</span> <span class=\"n\">Int64</span><span class=\"p\">,</span>\n    <span class=\"n\">value</span>     <span class=\"n\">Float64</span>\n<span class=\"p\">)</span> <span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Memory</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">time_series</span> <span class=\"k\">VALUES</span>\n    <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">2</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">7</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">7</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">2</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">17</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">7</span><span class=\"p\">),(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">25</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">),</span>\n    <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">6</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"mi\">6</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">12</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">.</span><span class=\"mi\">4</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">.</span><span class=\"mi\">6</span><span class=\"p\">),(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">24</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">.</span><span class=\"mi\">8</span><span class=\"p\">);</span>\n\n<span class=\"k\">SELECT</span> <span class=\"n\">timeSeriesGroupSum</span><span class=\"p\">(</span><span class=\"n\">uid</span><span class=\"p\">,</span> <span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">time_series</span> <span class=\"k\">order</span> <span class=\"k\">by</span> <span class=\"k\">timestamp</span> <span class=\"k\">ASC</span>\n<span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>And the result will be:</p>\n<div class=\"codehilite\"><pre><span></span><code>[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]\n</code></pre></div>\n\n\n<h3 id=\"agg_function-timeseriesgroupratesum\">timeSeriesGroupRateSum(uid, ts, val)<a class=\"headerlink\" href=\"#agg_function-timeseriesgroupratesum\" title=\"Permanent link\">&para;</a></h3>\n<p>Similarly timeSeriesGroupRateSum, timeSeriesGroupRateSum will Calculate the rate of time-series and then sum rates together.<br />\nAlso, timestamp should be in ascend order before use this function.</p>\n<p>Use this function, the result above case will be:</p>\n<div class=\"codehilite\"><pre><span></span><code>[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]\n</code></pre></div>\n\n\n<h3 id=\"agg_function-avg\">avg(x)<a class=\"headerlink\" href=\"#agg_function-avg\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the average.<br />\nOnly works for numbers.<br />\nThe result is always Float64.</p>\n<h3 id=\"agg_function-uniq\">uniq<a class=\"headerlink\" href=\"#agg_function-uniq\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the approximate number of different values of the argument.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniq</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">[,</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>A <a href=\"#../../data_types/int_uint/\">UInt64</a>-type number.</li>\n</ul>\n<p><strong>Implementation details</strong></p>\n<p>Function:</p>\n<ul>\n<li>Calculates a hash for all parameters in the aggregate, then uses it in calculations.</li>\n<li>\n<p>Uses an adaptive sampling algorithm. For the calculation state, the function uses a sample of element hash values up to 65536.</p>\n<p>This algorithm is very accurate and very efficient on the CPU. When the query contains several of these functions, using <code>uniq</code> is almost as fast as using other aggregate functions.</p>\n</li>\n<li>\n<p>Provides the result deterministically (it doesn't depend on the query processing order).</p>\n</li>\n</ul>\n<p>We recommend using this function in almost all scenarios.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_function-uniqcombined\">uniqCombined</a></li>\n<li><a href=\"#agg_function-uniqhll12\">uniqHLL12</a></li>\n<li><a href=\"#agg_function-uniqexact\">uniqExact</a></li>\n</ul>\n<h3 id=\"agg_function-uniqcombined\">uniqCombined<a class=\"headerlink\" href=\"#agg_function-uniqcombined\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the approximate number of different argument values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniqCombined</span><span class=\"p\">(</span><span class=\"n\">HLL_precision</span><span class=\"p\">)(</span><span class=\"n\">x</span><span class=\"p\">[");
            
            document.write(",</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p>The <code>uniqCombined</code> function is a good choice for calculating the number of different values, but keep in mind that the estimation error for large sets (200 million elements and more) will be larger than the theoretical value due to the poor hash function choice.</p>\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>\n<p><code>HLL_precision</code> is the base-2 logarithm of the number of cells in <a href=\"https://en.wikipedia.org/wiki/HyperLogLog\" rel=\"external nofollow noreferrer\">HyperLogLog</a>. Optional, you can use the function as <code>uniqCombined(x[, ...])</code>. The default value for <code>HLL_precision</code> is 17, which is effectively 96 KiB of space (2^17 cells, 6 bits each).</p>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>A number <a href=\"#../../data_types/int_uint/\">UInt64</a>-type number.</li>\n</ul>\n<p><strong>Implementation details</strong></p>\n<p>Function:</p>\n<ul>\n<li>Calculates a hash for all parameters in the aggregate, then uses it in calculations.</li>\n<li>\n<p>Uses a combination of three algorithms: array, hash table, and HyperLogLog with an error correction table.</p>\n<p>For a small number of distinct elements, an array is used. When the set size is larger, a hash table is used. For a larger number of elements, HyperLogLog is used, which will occupy a fixed amount of memory.</p>\n</li>\n<li>\n<p>Provides the result deterministically (it doesn't depend on the query processing order).</p>\n</li>\n</ul>\n<p>Compared to the <a href=\"#agg_function-uniq\">uniq</a> function, the <code>uniqCombined</code>:</p>\n<ul>\n<li>Consumes several times less memory.</li>\n<li>Calculates with several times higher accuracy.</li>\n<li>Usually has slightly lower performance. In some scenarios, <code>uniqCombined</code> can perform better than <code>uniq</code>, for example, with distributed queries that transmit a large number of aggregation states over the network.</li>\n</ul>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_function-uniq\">uniq</a></li>\n<li><a href=\"#agg_function-uniqhll12\">uniqHLL12</a></li>\n<li><a href=\"#agg_function-uniqexact\">uniqExact</a></li>\n</ul>\n<h3 id=\"agg_function-uniqhll12\">uniqHLL12<a class=\"headerlink\" href=\"#agg_function-uniqhll12\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the approximate number of different argument values, using the <a href=\"https://en.wikipedia.org/wiki/HyperLogLog\" rel=\"external nofollow noreferrer\">HyperLogLog</a> algorithm.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniqHLL12</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">[,</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>A <a href=\"#../../data_types/int_uint/\">UInt64</a>-type number.</li>\n</ul>\n<p><strong>Implementation details</strong></p>\n<p>Function:</p>\n<ul>\n<li>Calculates a hash for all parameters in the aggregate, then uses it in calculations.</li>\n<li>\n<p>Uses the HyperLogLog algorithm to approximate the number of different argument values.</p>\n<p>212 5-bit cells are used. The size of the state is slightly more than 2.5 KB. The result is not very accurate (up to ~10% error) for small data sets (&lt;10K elements). However, the result is fairly accurate for high-cardinality data sets (10K-100M), with a maximum error of ~1.6%. Starting from 100M, the estimation error increases, and the function will return very inaccurate results for data sets with extremely high cardinality (1B+ elements).</p>\n</li>\n<li>\n<p>Provides the determinate result (it doesn't depend on the query processing order).</p>\n</li>\n</ul>\n<p>We don't recommend using this function. In most cases, use the <a href=\"#agg_function-uniq\">uniq</a> or <a href=\"#agg_function-uniqcombined\">uniqCombined</a> function.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_function-uniq\">uniq</a></li>\n<li><a href=\"#agg_function-uniqcombined\">uniqCombined</a></li>\n<li><a href=\"#agg_function-uniqexact\">uniqExact</a></li>\n</ul>\n<h3 id=\"agg_function-uniqexact\">uniqExact<a class=\"headerlink\" href=\"#agg_function-uniqexact\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the exact number of different argument values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">uniqExact</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">[,</span> <span class=\"p\">...])</span>\n</code></pre></div>\n\n\n<p>Use the <code>uniqExact</code> function if you absolutely need an exact result. Otherwise use the <a href=\"#agg_function-uniq\">uniq</a> function.</p>\n<p>The <code>uniqExact</code> function uses more memory than <code>uniq</code>, because the size of the state has unbounded growth as the number of different values increases.</p>\n<p><strong>Parameters</strong></p>\n<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_function-uniq\">uniq</a></li>\n<li><a href=\"#agg_function-uniqcombined\">uniqCombined</a></li>\n<li><a href=\"#agg_function-uniqhll12\">uniqHLL12</a></li>\n</ul>\n<h3 id=\"agg_function-grouparray\">groupArray(x), groupArray(max_size)(x)<a class=\"headerlink\" href=\"#agg_function-grouparray\" title=\"Permanent link\">&para;</a></h3>\n<p>Creates an array of argument values.<br />\nValues can be added to the array in any (indeterminate) order.</p>\n<p>The second version (with the <code>max_size</code> parameter) limits the size of the resulting array to <code>max_size</code> elements.<br />\nFor example, <code>groupArray (1) (x)</code> is equivalent to <code>[any (x)]</code>.</p>\n<p>In some cases, you can still rely on the order of execution. This applies to cases when <code>SELECT</code> comes from a subquery that uses <code>ORDER BY</code>.</p>\n<h3 id=\"grouparrayinsertat-x\">groupArrayInsertAt(x)<a class=\"headerlink\" href=\"#grouparrayinsertat-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Inserts a value into the array in the specified position.</p>\n<p>Accepts the value and position as input. If several values \u200b\u200bare inserted into the same position, any of them might end up in the resulting array (the first one will be used in the case of single-threaded execution). If no value is inserted into a position, the position is assigned the default value.</p>\n<p>Optional parameters:</p>\n<ul>\n<li>The default value for substituting in empty positions.</li>\n<li>The length of the resulting array. This allows you to receive arrays of the same size for all the aggregate keys. When using this parameter, the default value must be specified.</li>\n</ul>\n<h3 id=\"agg_function-grouparraymovingsum\">groupArrayMovingSum<a class=\"headerlink\" href=\"#agg_function-grouparraymovingsum\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the moving sum of input values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"n\">numbers_for_summing</span><span class=\"p\">)</span>\n<span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"n\">window_size</span><span class=\"p\">)(</span><span class=\"n\">numbers_for_summing</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The function can take the window size as a parameter. If left unspecified, the function takes the window size equal to the number of rows in the column.</p>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>numbers_for_summing</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> resulting in a numeric data type value.</li>\n<li><code>window_size</code> \u2014 Size of the calculation window.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Array of the same size and type as the input data.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>The sample table:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t</span>\n<span class=\"p\">(</span>\n    <span class=\"o\">`</span><span class=\"nb\">int</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"nb\">float</span><span class=\"o\">`</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"nb\">dec</span><span class=\"o\">`</span> <span class=\"n\">Decimal32</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int\u2500\u252c\u2500float\u2500\u252c\u2500\u2500dec\u2500\u2510\n\u2502   1 \u2502   1.1 \u2502 1.10 \u2502\n\u2502   2 \u2502   2.2 \u2502 2.20 \u2502\n\u2502   4 \u2502   4.4 \u2502 4.40 \u2502\n\u2502   7 \u2502  7.77 \u2502 7.77 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The queries:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">I</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"nb\">float</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">F</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"nb\">dec</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">D</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500I\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500F\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,3,7,14] \u2502 [1.1,3.3000002,7.7000003,15.47] \u2502 [1.10,3.30,7.70,15.47] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500");
            
            document.write("\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">I</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">float</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">F</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingSum</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">dec</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">D</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500I\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500F\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [1,3,6,11] \u2502 [1.1,3.3000002,6.6000004,12.17] \u2502 [1.10,3.30,6.60,12.17] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"agg_function-grouparraymovingavg\">groupArrayMovingAvg<a class=\"headerlink\" href=\"#agg_function-grouparraymovingavg\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the moving average of input values.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"n\">numbers_for_summing</span><span class=\"p\">)</span>\n<span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"n\">window_size</span><span class=\"p\">)(</span><span class=\"n\">numbers_for_summing</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The function can take the window size as a parameter. If left unspecified, the function takes the window size equal to the number of rows in the column.</p>\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>numbers_for_summing</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> resulting in a numeric data type value.</li>\n<li><code>window_size</code> \u2014 Size of the calculation window.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Array of the same size and type as the input data.</li>\n</ul>\n<p>The function uses <a href=\"https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero\" rel=\"external nofollow noreferrer\">rounding towards zero</a>. It truncates the decimal places insignificant for the resulting data type.</p>\n<p><strong>Example</strong></p>\n<p>The sample table <code>b</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t</span>\n<span class=\"p\">(</span>\n    <span class=\"o\">`</span><span class=\"nb\">int</span><span class=\"o\">`</span> <span class=\"n\">UInt8</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"nb\">float</span><span class=\"o\">`</span> <span class=\"n\">Float32</span><span class=\"p\">,</span>\n    <span class=\"o\">`</span><span class=\"nb\">dec</span><span class=\"o\">`</span> <span class=\"n\">Decimal32</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int\u2500\u252c\u2500float\u2500\u252c\u2500\u2500dec\u2500\u2510\n\u2502   1 \u2502   1.1 \u2502 1.10 \u2502\n\u2502   2 \u2502   2.2 \u2502 2.20 \u2502\n\u2502   4 \u2502   4.4 \u2502 4.40 \u2502\n\u2502   7 \u2502  7.77 \u2502 7.77 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>The queries:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">I</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"nb\">float</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">F</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"nb\">dec</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">D</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500I\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500F\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [0,0,1,3] \u2502 [0.275,0.82500005,1.9250001,3.8675] \u2502 [0.27,0.82,1.92,3.86] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">I</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">float</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">F</span><span class=\"p\">,</span>\n    <span class=\"n\">groupArrayMovingAvg</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"nb\">dec</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">D</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500I\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500F\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [0,1,3,5] \u2502 [0.55,1.6500001,3.3000002,6.085] \u2502 [0.55,1.65,3.30,6.08] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"groupuniqarray-x-groupuniqarray-max-size-x\">groupUniqArray(x), groupUniqArray(max_size)(x)<a class=\"headerlink\" href=\"#groupuniqarray-x-groupuniqarray-max-size-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Creates an array from different argument values. Memory consumption is the same as for the <code>uniqExact</code> function.</p>\n<p>The second version (with the <code>max_size</code> parameter) limits the size of the resulting array to <code>max_size</code> elements.<br />\nFor example, <code>groupUniqArray(1)(x)</code> is equivalent to <code>[any(x)]</code>.</p>\n<h3 id=\"agg_function-quantile\">quantile(level)(x)<a class=\"headerlink\" href=\"#agg_function-quantile\" title=\"Permanent link\">&para;</a></h3>\n<p>Approximates the <code>level</code> quantile. <code>level</code> is a constant, a floating-point number from 0 to 1.<br />\nWe recommend using a <code>level</code> value in the range of <code>[0.01, 0.99]</code><br />\nDon't use a <code>level</code> value equal to 0 or 1 \u2013 use the <code>min</code> and <code>max</code> functions for these cases.</p>\n<p>In this function, as well as in all functions for calculating quantiles, the <code>level</code> parameter can be omitted. In this case, it is assumed to be equal to 0.5 (in other words, the function will calculate the median).</p>\n<p>Works for numbers, dates, and dates with times.<br />\nReturns: for numbers \u2013 <code>Float64</code>; for dates \u2013 a date; for dates with times \u2013 a date with time.</p>\n<p>Uses <a href=\"https://en.wikipedia.org/wiki/Reservoir_sampling\" rel=\"external nofollow noreferrer\">reservoir sampling</a> with a reservoir size up to 8192.<br />\nIf necessary, the result is output with linear approximation from the two neighboring values.<br />\nThis algorithm provides very low accuracy. See also: <code>quantileTiming</code>, <code>quantileTDigest</code>, <code>quantileExact</code>.</p>\n<p>The result depends on the order of running the query, and is nondeterministic.</p>\n<p>When using multiple <code>quantile</code> (and similar) functions with different levels in a query, the internal states are not combined (that is, the query works less efficiently than it could). In this case, use the <code>quantiles</code> (and similar) functions.</p>\n<h3 id=\"quantiledeterministic-level-x-determinator\">quantileDeterministic(level)(x, determinator)<a class=\"headerlink\" href=\"#quantiledeterministic-level-x-determinator\" title=\"Permanent link\">&para;</a></h3>\n<p>Works the same way as the <code>quantile</code> function, but the result is deterministic and does not depend on the order of query execution.</p>\n<p>To achieve this, the function takes a second argument \u2013 the \"determinator\". This is a number whose hash is used instead of a random number generator in the reservoir sampling algorithm. For the function to work correctly, the same determinator value should not occur too often. For the determinator, you can use an event ID, user ID, and so on.</p>\n<p>Don't use this function for calculating timings. There is a more suitable function for this purpose: <code>quantileTiming</code>.</p>\n<h3 id=\"agg_function-quantiletiming\">quantileTiming<a class=\"headerlink\" href=\"#agg_function-quantiletiming\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the quantile of the specified level with determined precision. The function is intended for calculating page loading time quantiles in milliseconds. </p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">quantileTiming</span><span class=\"p\">(</span><span class=\"k\">level</span><span class=\"p\">)(</span><span class=\"n\">expr</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>level</code> \u2014 Quantile level. Range: [0, 1].</li>\n<li>\n<p><code>expr</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> returning a <a href=\"#../../data_types/float/\">Float*</a>-type number. The function expects input values in unix timestamp format in milliseconds, but it doesn't validate format.</p>\n<ul>\n<li>If negative values are passed to the function, the behavior is undefined.</li>\n<li>If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Accuracy</strong></p>\n<p>The calculation is accurate if:</p>\n<ul>\n<li>Total number of values doesn't exceed 5670.</li>\n<li>Total number of values exceeds 5670, but the page loading time is less ");
            
            document.write("than 1024ms.</li>\n</ul>\n<p>Otherwise, the result of the calculation is rounded to the nearest multiple of 16 ms.</p>\n<p>!! note \"Note\"<br />\n    For calculating page loading time quantiles, this function is more effective and accurate than <a href=\"#agg_function-quantile\">quantile</a>.</p>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>Quantile of the specified level.</li>\n</ul>\n<p>Type: <code>Float32</code>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>If no values are passed to the function (when using <code>quantileTimingIf</code>), <a href=\"#data_type-float-nan-inf\">NaN</a> is returned. The purpose of this is to differentiate these cases from cases that result in zero. See <a href=\"#select-order-by\">ORDER BY clause</a> for notes on sorting <code>NaN</code> values.</p>\n</div>\n<p>The result is deterministic (it doesn't depend on the query processing order).</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">quantileTiming</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">5</span><span class=\"p\">)(</span><span class=\"nb\">number</span> <span class=\"o\">/</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500quantileTiming(0.5)(divide(number, 2))\u2500\u2510\n\u2502                                      2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"quantiletimingweighted-level-x-weight\">quantileTimingWeighted(level)(x, weight)<a class=\"headerlink\" href=\"#quantiletimingweighted-level-x-weight\" title=\"Permanent link\">&para;</a></h3>\n<p>Differs from the <code>quantileTiming</code> function in that it has a second argument, \"weights\". Weight is a non-negative integer.<br />\nThe result is calculated as if the <code>x</code> value were passed <code>weight</code> number of times to the <code>quantileTiming</code> function.</p>\n<h3 id=\"quantileexact-level-x\">quantileExact(level)(x)<a class=\"headerlink\" href=\"#quantileexact-level-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the quantile of 'level' exactly. To do this, all the passed values \u200b\u200bare combined into an array, which is then partially sorted. Therefore, the function consumes O(n) memory, where 'n' is the number of values that were passed. However, for a small number of values, the function is very effective.</p>\n<h3 id=\"quantileexactweighted-level-x-weight\">quantileExactWeighted(level)(x, weight)<a class=\"headerlink\" href=\"#quantileexactweighted-level-x-weight\" title=\"Permanent link\">&para;</a></h3>\n<p>Computes the quantile of 'level' exactly. In addition, each value is counted with its weight, as if it is present 'weight' times. The arguments of the function can be considered as histograms, where the value 'x' corresponds to a histogram \"column\" of the height 'weight', and the function itself can be considered as a summation of histograms.</p>\n<p>A hash table is used as the algorithm. Because of this, if the passed values \u200b\u200bare frequently repeated, the function consumes less RAM than <code>quantileExact</code>. You can use this function instead of <code>quantileExact</code> and specify the weight as 1.</p>\n<h3 id=\"quantiletdigest-level-x\">quantileTDigest(level)(x)<a class=\"headerlink\" href=\"#quantiletdigest-level-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Approximates the quantile level using the <a href=\"https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf\" rel=\"external nofollow noreferrer\">t-digest</a> algorithm. The maximum error is 1%. Memory consumption by State is proportional to the logarithm of the number of passed values.</p>\n<p>The performance of the function is lower than for <code>quantile</code> or <code>quantileTiming</code>. In terms of the ratio of State size to precision, this function is much better than <code>quantile</code>.</p>\n<p>The result depends on the order of running the query, and is nondeterministic.</p>\n<h3 id=\"median-x\">median(x)<a class=\"headerlink\" href=\"#median-x\" title=\"Permanent link\">&para;</a></h3>\n<p>All the quantile functions have corresponding median functions: <code>median</code>, <code>medianDeterministic</code>, <code>medianTiming</code>, <code>medianTimingWeighted</code>, <code>medianExact</code>, <code>medianExactWeighted</code>, <code>medianTDigest</code>. They are synonyms and their behavior is identical.</p>\n<h3 id=\"quantiles-level1-level2-x\">quantiles(level1, level2, ...)(x)<a class=\"headerlink\" href=\"#quantiles-level1-level2-x\" title=\"Permanent link\">&para;</a></h3>\n<p>All the quantile functions also have corresponding quantiles functions: <code>quantiles</code>, <code>quantilesDeterministic</code>, <code>quantilesTiming</code>, <code>quantilesTimingWeighted</code>, <code>quantilesExact</code>, <code>quantilesExactWeighted</code>, <code>quantilesTDigest</code>. These functions calculate all the quantiles of the listed levels in one pass, and return an array of the resulting values.</p>\n<h3 id=\"varsamp-x\">varSamp(x)<a class=\"headerlink\" href=\"#varsamp-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the amount <code>\u03a3((x - x\u0305)^2) / (n - 1)</code>, where <code>n</code> is the sample size and <code>x\u0305</code>is the average value of <code>x</code>.</p>\n<p>It represents an unbiased estimate of the variance of a random variable if passed values form its sample.</p>\n<p>Returns <code>Float64</code>. When <code>n &lt;= 1</code>, returns <code>+\u221e</code>.</p>\n<h3 id=\"varpop-x\">varPop(x)<a class=\"headerlink\" href=\"#varpop-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the amount <code>\u03a3((x - x\u0305)^2) / n</code>, where <code>n</code> is the sample size and <code>x\u0305</code>is the average value of <code>x</code>.</p>\n<p>In other words, dispersion for a set of values. Returns <code>Float64</code>.</p>\n<h3 id=\"stddevsamp-x\">stddevSamp(x)<a class=\"headerlink\" href=\"#stddevsamp-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The result is equal to the square root of <code>varSamp(x)</code>.</p>\n<h3 id=\"stddevpop-x\">stddevPop(x)<a class=\"headerlink\" href=\"#stddevpop-x\" title=\"Permanent link\">&para;</a></h3>\n<p>The result is equal to the square root of <code>varPop(x)</code>.</p>\n<h3 id=\"topk-n-column\">topK(N)(column)<a class=\"headerlink\" href=\"#topk-n-column\" title=\"Permanent link\">&para;</a></h3>\n<p>Returns an array of the most frequent values in the specified column. The resulting array is sorted in descending order of frequency of values (not by the values themselves).</p>\n<p>Implements the <a href=\"http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf\" rel=\"external nofollow noreferrer\"> Filtered Space-Saving</a> algorithm for analyzing TopK, based on the reduce-and-combine algorithm from <a href=\"https://arxiv.org/pdf/1401.0702.pdf\" rel=\"external nofollow noreferrer\">Parallel Space Saving</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">topK</span><span class=\"p\">(</span><span class=\"n\">N</span><span class=\"p\">)(</span><span class=\"k\">column</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>This function doesn't provide a guaranteed result. In certain situations, errors might occur and it might return frequent values that aren't the most frequent values.</p>\n<p>We recommend using the <code>N &lt; 10</code> value; performance is reduced with large <code>N</code> values. Maximum value of <code>N = 65536</code>.</p>\n<p><strong>Arguments</strong></p>\n<ul>\n<li>'N' is the number of values.</li>\n<li>' x ' \u2013 The column.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Take the <a href=\"#../../getting_started/example_datasets/ontime/\">OnTime</a> data set and select the three most frequently occurring values in the <code>AirlineID</code> column.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">topK</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)(</span><span class=\"n\">AirlineID</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">res</span>\n<span class=\"k\">FROM</span> <span class=\"n\">ontime</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500res\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [19393,19790,19805] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"covarsamp-x-y\">covarSamp(x, y)<a class=\"headerlink\" href=\"#covarsamp-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the value of <code>\u03a3((x - x\u0305)(y - y\u0305)) / (n - 1)</code>.</p>\n<p>Returns Float64. When <code>n &lt;= 1</code>, returns +\u221e.</p>\n<h3 id=\"covarpop-x-y\">covarPop(x, y)<a class=\"headerlink\" href=\"#covarpop-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the value of <code>\u03a3((x - x\u0305)(y - y\u0305)) / n</code>.</p>\n<h3 id=\"corr-x-y\">corr(x, y)<a class=\"headerlink\" href=\"#corr-x-y\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the Pearson correlation coefficient: <code>\u03a3((x - x\u0305)(y - y\u0305)) / sqrt(\u03a3((x - x\u0305)^2) * \u03a3((y - y\u0305)^2))</code>.</p>\n<h3 id=\"simplelinearregression\">simpleLinearRegression<a class=\"headerlink\" href=\"#simplelinearregression\" title=\"Permanent link\">&para;</a></h3>\n<p>Performs simple (unidimensional) linear regression.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">simpleLinearRegression</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Parameters:</p>\n<ul>\n<li><code>x</code> \u2014 Column with dependent variable values.</li>\n<li><code>y</code> \u2014 Column with explanatory variable values.</li>\n</ul>\n<p>Returned values:</p>\n<p>Constants <code>(a, b)</code> of the resulting line <code>y = a*x + b</code>.</p>\n<p><strong>Examples</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReduce</span><span class=\"p\">(</span><span class=\"s1\">&#39;simpleLinearRegression&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span ");
            
            document.write("class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [0, 1, 2, 3])\u2500\u2510\n\u2502 (1,0)                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">arrayReduce</span><span class=\"p\">(</span><span class=\"s1\">&#39;simpleLinearRegression&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">])</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [3, 4, 5, 6])\u2500\u2510\n\u2502 (1,3)                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"agg_functions-stochasticlinearregression\">stochasticLinearRegression<a class=\"headerlink\" href=\"#agg_functions-stochasticlinearregression\" title=\"Permanent link\">&para;</a></h3>\n<p>This function implements stochastic linear regression. It supports custom parameters for learning rate, L2 regularization coefficient, mini-batch size and has few methods for updating weights (<a href=\"https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Adam\" rel=\"external nofollow noreferrer\">Adam</a> (used by default), <a href=\"https://en.wikipedia.org/wiki/Stochastic_gradient_descent\" rel=\"external nofollow noreferrer\">simple SGD</a>, <a href=\"https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Momentum\" rel=\"external nofollow noreferrer\">Momentum</a>, <a href=\"https://mipt.ru/upload/medialibrary/d7e/41-91.pdf\" rel=\"external nofollow noreferrer\">Nesterov</a>).</p>\n<h4 id=\"agg_functions-stochasticlinearregression-parameters\">Parameters<a class=\"headerlink\" href=\"#agg_functions-stochasticlinearregression-parameters\" title=\"Permanent link\">&para;</a></h4>\n<p>There are 4 customizable parameters. They are passed to the function sequentially, but there is no need to pass all four - default values will be used, however good model required some parameter tuning.</p>\n<div class=\"codehilite\"><pre><span></span><code>stochasticLinearRegression(1.0, 1.0, 10, &#39;SGD&#39;)\n</code></pre></div>\n\n\n<ol>\n<li><code>learning rate</code> is the coefficient on step length, when gradient descent step is performed. Too big learning rate may cause infinite weights of the model. Default is <code>0.00001</code>.</li>\n<li><code>l2 regularization coefficient</code> which may help to prevent overfitting. Default is <code>0.1</code>.</li>\n<li><code>mini-batch size</code> sets the number of elements, which gradients will be computed and summed to perform one step of gradient descent. Pure stochastic descent uses one element, however having small batches(about 10 elements) make gradient steps more stable. Default is <code>15</code>.</li>\n<li><code>method for updating weights</code>, they are: <code>Adam</code> (by default), <code>SGD</code>, <code>Momentum</code>, <code>Nesterov</code>. <code>Momentum</code> and <code>Nesterov</code> require little bit more computations and memory, however they happen to be useful in terms of speed of convergance and stability of stochastic gradient methods.</li>\n</ol>\n<h4 id=\"agg_functions-stochasticlinearregression-usage\">Usage<a class=\"headerlink\" href=\"#agg_functions-stochasticlinearregression-usage\" title=\"Permanent link\">&para;</a></h4>\n<p><code>stochasticLinearRegression</code> is used in two steps: fitting the model and predicting on new data. In order to fit the model and save its state for later usage we use <code>-State</code> combinator, which basically saves the state (model weights, etc).<br />\nTo predict we use function <a href=\"#machine_learning_methods-evalmlmethod\">evalMLMethod</a>, which takes a state as an argument as well as features to predict on.</p>\n<p><a name=\"stochasticlinearregression-usage-fitting\"></a><br />\n1. Fitting</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Such</span> <span class=\"n\">query</span> <span class=\"n\">may</span> <span class=\"n\">be</span> <span class=\"n\">used</span><span class=\"p\">.</span>\n\n<span class=\"ss\">```sql</span>\n<span class=\"ss\">CREATE TABLE IF NOT EXISTS train_data</span>\n<span class=\"ss\">(</span>\n<span class=\"ss\">    param1 Float64,</span>\n<span class=\"ss\">    param2 Float64,</span>\n<span class=\"ss\">    target Float64</span>\n<span class=\"ss\">) ENGINE = Memory;</span>\n\n<span class=\"ss\">CREATE TABLE your_model ENGINE = Memory AS SELECT</span>\n<span class=\"ss\">stochasticLinearRegressionState(0.1, 0.0, 5, &#39;SGD&#39;)(target, param1, param2)</span>\n<span class=\"ss\">AS state FROM train_data;</span>\n\n<span class=\"ss\">```</span>\n\n<span class=\"n\">Here</span> <span class=\"n\">we</span> <span class=\"n\">also</span> <span class=\"n\">need</span> <span class=\"k\">to</span> <span class=\"k\">insert</span> <span class=\"n\">data</span> <span class=\"k\">into</span> <span class=\"ss\">`train_data`</span> <span class=\"k\">table</span><span class=\"p\">.</span> <span class=\"n\">The</span> <span class=\"n\">number</span> <span class=\"n\">of</span> <span class=\"n\">parameters</span> <span class=\"k\">is</span> <span class=\"k\">not</span> <span class=\"n\">fixed</span><span class=\"p\">,</span> <span class=\"n\">it</span> <span class=\"n\">depends</span> <span class=\"n\">only</span> <span class=\"k\">on</span> <span class=\"n\">number</span> <span class=\"n\">of</span> <span class=\"n\">arguments</span><span class=\"p\">,</span> <span class=\"n\">passed</span> <span class=\"k\">into</span> <span class=\"ss\">`linearRegressionState`</span><span class=\"p\">.</span> <span class=\"n\">They</span> <span class=\"k\">all</span> <span class=\"n\">must</span> <span class=\"n\">be</span> <span class=\"kt\">numeric</span> <span class=\"k\">values</span><span class=\"p\">.</span>\n<span class=\"n\">Note</span> <span class=\"n\">that</span> <span class=\"n\">the</span> <span class=\"k\">column</span> <span class=\"k\">with</span> <span class=\"n\">target</span> <span class=\"nf\">value</span><span class=\"p\">(</span><span class=\"n\">which</span> <span class=\"n\">we</span> <span class=\"n\">would</span> <span class=\"k\">like</span> <span class=\"k\">to</span> <span class=\"n\">learn</span> <span class=\"k\">to</span> <span class=\"n\">predict</span><span class=\"p\">)</span> <span class=\"k\">is</span> <span class=\"n\">inserted</span> <span class=\"k\">as</span> <span class=\"n\">the</span> <span class=\"n\">first</span> <span class=\"n\">argument</span><span class=\"p\">.</span>\n</code></pre></div>\n\n\n<ol start=\"2\">\n<li>\n<p>Predicting</p>\n<p>After saving a state into the table, we may use it multiple times for prediction, or even merge with other states and create new even better models.</p>\n<p><code>sql\nWITH (SELECT state FROM your_model) AS model SELECT\nevalMLMethod(model, param1, param2) FROM test_data</code></p>\n<p>The query will return a column of predicted values. Note that first argument of <code>evalMLMethod</code> is <code>AggregateFunctionState</code> object, next are columns of features.</p>\n<p><code>test_data</code> is a table like <code>train_data</code> but may not contain target value.</p>\n</li>\n</ol>\n<h4 id=\"agg_functions-stochasticlinearregression-notes\">Notes<a class=\"headerlink\" href=\"#agg_functions-stochasticlinearregression-notes\" title=\"Permanent link\">&para;</a></h4>\n<ol>\n<li>\n<p>To merge two models user may create such query:<br />\n<code>sql\n    SELECT state1 + state2 FROM your_models</code><br />\n    where <code>your_models</code> table contains both models. This query will return new <code>AggregateFunctionState</code> object.</p>\n</li>\n<li>\n<p>User may fetch weights of the created model for its own purposes without saving the model if no <code>-State</code> combinator is used.<br />\n<code>sql\n    SELECT stochasticLinearRegression(0.01)(target, param1, param2) FROM train_data</code><br />\n    Such query will fit the model and return its weights - first are weights, which correspond to the parameters of the model, the last one is bias. So in the example above the query will return a column with 3 values.</p>\n</li>\n</ol>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_functions-stochasticlogisticregression\">stochasticLogisticRegression</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression\" rel=\"external nofollow noreferrer\">Difference between linear and logistic regressions</a></li>\n</ul>\n<h3 id=\"agg_functions-stochasticlogisticregression\">stochasticLogisticRegression<a class=\"headerlink\" href=\"#agg_functions-stochasticlogisticregression\" title=\"Permanent link\">&para;</a></h3>\n<p>This function implements stochastic logistic regression. It can be used for binary classification problem, supports the same custom parameters as stochasticLinearRegression and works the same way.</p>\n<h4 id=\"agg_functions-stochasticlogisticregression-parameters\">Parameters<a class=\"headerlink\" href=\"#agg_functions-stochasticlogisticregression-parameters\" title=\"Permanent link\">&para;</a></h4>\n<p>Parameters are exactly the same as in stochasticLinearRegression:<br />\n<code>learning rate</code>, <code>l2 regularization coefficient</code>, <code>mini-batch size</code>, <code>method for updating weights</code>.<br />\nFor more information see <a href=\"#agg_functions-stochasticlinearregression-parameters\">parameters</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code>stochasticLogisticRegression(1.0, 1.0, 10, &#39;SGD&#39;)\n</code></pre></div>\n\n\n<ol>\n<li>\n<p>F");
            
            document.write("itting</p>\n<p>See the <code>Fitting</code> section in the <a href=\"#stochasticlinearregression-usage-fitting\">stochasticLinearRegression</a> description.</p>\n<p>Predicted labels have to be in [-1, 1].</p>\n</li>\n<li>\n<p>Predicting</p>\n<p>Using saved state we can predict probability of object having label <code>1</code>.</p>\n<p><code>sql\nWITH (SELECT state FROM your_model) AS model SELECT\nevalMLMethod(model, param1, param2) FROM test_data</code></p>\n<p>The query will return a column of probabilities. Note that first argument of <code>evalMLMethod</code> is <code>AggregateFunctionState</code> object, next are columns of features.</p>\n<p>We can also set a bound of probability, which assigns elements to different labels.</p>\n<p><code>sql\nSELECT ans &lt; 1.1 AND ans &gt; 0.5 FROM\n(WITH (SELECT state FROM your_model) AS model SELECT\nevalMLMethod(model, param1, param2) AS ans FROM test_data)</code></p>\n<p>Then the result will be labels.</p>\n<p><code>test_data</code> is a table like <code>train_data</code> but may not contain target value.</p>\n</li>\n</ol>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#agg_functions-stochasticlinearregression\">stochasticLinearRegression</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression\" rel=\"external nofollow noreferrer\">Difference between linear and logistic regressions.</a></li>\n</ul>\n<p><a name=\"../../../query_language/agg_functions/combinators/\"></a><a name=\"../../../../../agg_functions/combinators/\"></a><a name=\"../../../../query_language/agg_functions/combinators/\"></a><a name=\"combinators/\"></a><a name=\"../../../../../query_language/agg_functions/combinators/\"></a><a name=\"../../agg_functions/combinators/\"></a><a name=\"../../../agg_functions/combinators/\"></a><a name=\"agg_functions/combinators/\"></a><a name=\"../query_language/agg_functions/combinators/\"></a><a name=\"../agg_functions/combinators/\"></a><a name=\"../../../../agg_functions/combinators/\"></a><a name=\"../../../../../../agg_functions/combinators/\"></a><a name=\"../../query_language/agg_functions/combinators/\"></a><a name=\"query_language/agg_functions/combinators/\"></a></p>\n<h2 id=\"aggregate_functions_combinators\">Aggregate function combinators<a class=\"headerlink\" href=\"#aggregate_functions_combinators\" title=\"Permanent link\">&para;</a></h2>\n<p>The name of an aggregate function can have a suffix appended to it. This changes the way the aggregate function works.</p>\n<h3 id=\"agg-functions-combinator-if\">-If<a class=\"headerlink\" href=\"#agg-functions-combinator-if\" title=\"Permanent link\">&para;</a></h3>\n<p>The suffix -If can be appended to the name of any aggregate function. In this case, the aggregate function accepts an extra argument \u2013 a condition (Uint8 type). The aggregate function processes only the rows that trigger the condition. If the condition was not triggered even once, it returns a default value (usually zeros or empty strings).</p>\n<p>Examples: <code>sumIf(column, cond)</code>, <code>countIf(cond)</code>, <code>avgIf(x, cond)</code>, <code>quantilesTimingIf(level1, level2)(x, cond)</code>, <code>argMinIf(arg, val, cond)</code> and so on.</p>\n<p>With conditional aggregate functions, you can calculate aggregates for several conditions at once, without using subqueries and <code>JOIN</code>s. For example, in Yandex.Metrica, conditional aggregate functions are used to implement the segment comparison functionality.</p>\n<h3 id=\"array\">-Array<a class=\"headerlink\" href=\"#array\" title=\"Permanent link\">&para;</a></h3>\n<p>The -Array suffix can be appended to any aggregate function. In this case, the aggregate function takes arguments of the 'Array(T)' type (arrays) instead of 'T' type arguments. If the aggregate function accepts multiple arguments, this must be arrays of equal lengths. When processing arrays, the aggregate function works like the original aggregate function across all array elements.</p>\n<p>Example 1: <code>sumArray(arr)</code> - Totals all the elements of all 'arr' arrays. In this example, it could have been written more simply: <code>sum(arraySum(arr))</code>.</p>\n<p>Example 2: <code>uniqArray(arr)</code> \u2013 Counts the number of unique elements in all 'arr' arrays. This could be done an easier way: <code>uniq(arrayJoin(arr))</code>, but it's not always possible to add 'arrayJoin' to a query.</p>\n<p>-If and -Array can be combined. However, 'Array' must come first, then 'If'. Examples: <code>uniqArrayIf(arr, cond)</code>, <code>quantilesTimingArrayIf(level1, level2)(arr, cond)</code>. Due to this order, the 'cond' argument can't be an array.</p>\n<h3 id=\"state\">-State<a class=\"headerlink\" href=\"#state\" title=\"Permanent link\">&para;</a></h3>\n<p>If you apply this combinator, the aggregate function doesn't return the resulting value (such as the number of unique values for the <a href=\"#agg_function-uniq\">uniq</a> function), but an intermediate state of the aggregation (for <code>uniq</code>, this is the hash table for calculating the number of unique values). This is an <code>AggregateFunction(...)</code> that can be used for further processing or stored in a table to finish aggregating later.</p>\n<p>To work with these states, use:</p>\n<ul>\n<li><a href=\"#../../operations/table_engines/aggregatingmergetree/\">AggregatingMergeTree</a> table engine.</li>\n<li><a href=\"#function-finalizeaggregation\">finalizeAggregation</a> function.</li>\n<li><a href=\"#function-runningaccumulate\">runningAccumulate</a> function.</li>\n<li><a href=\"#aggregate_functions_combinators_merge\">-Merge</a> combinator.</li>\n<li><a href=\"#aggregate_functions_combinators_mergestate\">-MergeState</a> combinator.</li>\n</ul>\n<h3 id=\"aggregate_functions_combinators_merge\">-Merge<a class=\"headerlink\" href=\"#aggregate_functions_combinators_merge\" title=\"Permanent link\">&para;</a></h3>\n<p>If you apply this combinator, the aggregate function takes the intermediate aggregation state as an argument, combines the states to finish aggregation, and returns the resulting value.</p>\n<h3 id=\"aggregate_functions_combinators_mergestate\">-MergeState<a class=\"headerlink\" href=\"#aggregate_functions_combinators_mergestate\" title=\"Permanent link\">&para;</a></h3>\n<p>Merges the intermediate aggregation states in the same way as the -Merge combinator. However, it doesn't return the resulting value, but an intermediate aggregation state, similar to the -State combinator.</p>\n<h3 id=\"foreach\">-ForEach<a class=\"headerlink\" href=\"#foreach\" title=\"Permanent link\">&para;</a></h3>\n<p>Converts an aggregate function for tables into an aggregate function for arrays that aggregates the corresponding array items and returns an array of results. For example, <code>sumForEach</code> for the arrays <code>[1, 2]</code>, <code>[3, 4, 5]</code>and<code>[6, 7]</code>returns the result <code>[10, 13, 5]</code> after adding together the corresponding array items.</p>\n<h3 id=\"agg_functions-combinator-resample\">-Resample<a class=\"headerlink\" href=\"#agg_functions-combinator-resample\" title=\"Permanent link\">&para;</a></h3>\n<p>Lets you divide data into groups, and then separately aggregates the data in those groups. Groups are created by splitting the values from one column into intervals.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"o\">&lt;</span><span class=\"n\">aggFunction</span><span class=\"o\">&gt;</span><span class=\"n\">Resample</span><span class=\"p\">(</span><span class=\"k\">start</span><span class=\"p\">,</span> <span class=\"k\">end</span><span class=\"p\">,</span> <span class=\"n\">step</span><span class=\"p\">)(</span><span class=\"o\">&lt;</span><span class=\"n\">aggFunction_params</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">resampling_key</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>start</code> \u2014 Starting value of the whole required interval for <code>resampling_key</code> values. </li>\n<li><code>stop</code> \u2014 Ending value of the whole required interval for <code>resampling_key</code> values. The whole interval doesn't include the <code>stop</code> value <code>[start, stop)</code>.</li>\n<li><code>step</code> \u2014 Step for separating the whole interval into subintervals. The <code>aggFunction</code> is executed over each of those subintervals independently.</li>\n<li><code>resampling_key</code> \u2014 Column whose values are used for separating data into intervals.</li>\n<li><code>aggFunction_params</code> \u2014 <code>aggFunction</code> parameters.</li>\n</ul>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>Array of <code>aggFunction</code> results for each subinterval.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Consider the <code>people</code> table with the following data:</p>\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u252c\u2500age\u2500\u252c\u2500wage\u2500\u2510\n\u2502 John   \u2502  16 \u2502   10 \u2502\n\u2502 Alice  \u2502  30 \u2502   15 \u2502\n\u2502 Mary   \u2502  35 \u2502    8 \u2502\n\u2502 Evelyn \u2502  48 \u2502 11.5 \u2502\n\u2502 David  \u2502  62 \u2502  9.9 \u2502\n\u2502 Brian  \u2502  60 \u2502   16 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Let's get the names of the people whose age lies in the intervals of <code>[30,60)</code> and <code>[60,75)</code>. Since we use integer representation for age, we get ages in the <code>[30, 59]</code> and <code>[60,74]</code> intervals.</p>\n<p>To aggregate names in an array, we use the <a href=\"#agg_function-grouparray\">groupArray</a> aggregate function. It takes one argument. In our case, it's the <code>name</code> column. The <code>groupArrayResample</code> function should use the <code>age</code> column to aggregate names by age. To define the required intervals, we pass the <code>30, 75, 30</code> arguments into the <code>groupArrayResample</code> function.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">groupArrayResample</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">75</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">)(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"p\">)</span> <span class=\"k\">from</span> <span class=\"n\">people</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500groupArrayResample(30, 75, 30)");
            
            document.write("(name, age)\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [[&#39;Alice&#39;,&#39;Mary&#39;,&#39;Evelyn&#39;],[&#39;David&#39;,&#39;Brian&#39;]] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>Consider the results.</p>\n<p><code>Jonh</code> is out of the sample because he's too young. Other people are distributed according to the specified age intervals.</p>\n<p>Now let's count the total number of people and their average wage in the specified age intervals.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">countResample</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">75</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">)(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">amount</span><span class=\"p\">,</span>\n    <span class=\"n\">avgResample</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">75</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">)(</span><span class=\"n\">wage</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">avg_wage</span>\n<span class=\"k\">FROM</span> <span class=\"n\">people</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500amount\u2500\u252c\u2500avg_wage\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [3,2]  \u2502 [11.5,12.949999809265137] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"../../../../../agg_functions/parametric_functions/\"></a><a name=\"../../../agg_functions/parametric_functions/\"></a><a name=\"parametric_functions/\"></a><a name=\"../../query_language/agg_functions/parametric_functions/\"></a><a name=\"../../agg_functions/parametric_functions/\"></a><a name=\"../../../../../../agg_functions/parametric_functions/\"></a><a name=\"../query_language/agg_functions/parametric_functions/\"></a><a name=\"../../../query_language/agg_functions/parametric_functions/\"></a><a name=\"../agg_functions/parametric_functions/\"></a><a name=\"../../../../query_language/agg_functions/parametric_functions/\"></a><a name=\"../../../../agg_functions/parametric_functions/\"></a><a name=\"query_language/agg_functions/parametric_functions/\"></a><a name=\"agg_functions/parametric_functions/\"></a><a name=\"../../../../../query_language/agg_functions/parametric_functions/\"></a></p>\n<h2 id=\"aggregate_functions_parametric\">Parametric aggregate functions<a class=\"headerlink\" href=\"#aggregate_functions_parametric\" title=\"Permanent link\">&para;</a></h2>\n<p>Some aggregate functions can accept not only argument columns (used for compression), but a set of parameters \u2013 constants for initialization. The syntax is two pairs of brackets instead of one. The first is for parameters, and the second is for arguments.</p>\n<h3 id=\"histogram\">histogram<a class=\"headerlink\" href=\"#histogram\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates an adaptive histogram. It doesn't guarantee precise results.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"n\">number_of_bins</span><span class=\"p\">)(</span><span class=\"k\">values</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The functions uses <a href=\"http://jmlr.org/papers/volume11/ben-haim10a/ben-haim10a.pdf\" rel=\"external nofollow noreferrer\">A Streaming Parallel Decision Tree Algorithm</a>. The borders of histogram bins are adjusted as new data enters a function. In common case, the widths of bins are not equal.</p>\n<p><strong>Parameters</strong></p>\n<p><code>number_of_bins</code> \u2014 Upper limit for the number of bins in the histogram. The function automatically calculates the number of bins. It tries to reach the specified number of bins, but if it fails, it uses fewer bins.<br />\n<code>values</code> \u2014 <a href=\"#syntax-expressions\">Expression</a> resulting in input values.</p>\n<p><strong>Returned values</strong></p>\n<ul>\n<li>\n<p><a href=\"#../../data_types/array/\">Array</a> of <a href=\"#../../data_types/tuple/\">Tuples</a> of the following format:</p>\n<p><code>[(lower_1, upper_1, height_1), ... (lower_N, upper_N, height_N)]</code></p>\n<ul>\n<li><code>lower</code> \u2014 Lower bound of the bin.</li>\n<li><code>upper</code> \u2014 Upper bound of the bin.</li>\n<li><code>height</code> \u2014 Calculated height of the bin.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)(</span><span class=\"nb\">number</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span> \n<span class=\"k\">FROM</span> <span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"o\">*</span> \n    <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span> \n    <span class=\"k\">LIMIT</span> <span class=\"mi\">20</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500histogram(5)(plus(number, 1))\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 [(1,4.5,4),(4.5,8.5,4),(8.5,12.75,4.125),(12.75,17,4.625),(17,20,3.25)] \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>You can visualize a histogram with the <a href=\"#function-bar\">bar</a> function, for example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">WITH</span> <span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)(</span><span class=\"n\">rand</span><span class=\"p\">()</span> <span class=\"o\">%</span> <span class=\"mi\">100</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">hist</span>\n<span class=\"k\">SELECT</span> \n    <span class=\"n\">arrayJoin</span><span class=\"p\">(</span><span class=\"n\">hist</span><span class=\"p\">).</span><span class=\"mi\">3</span> <span class=\"k\">AS</span> <span class=\"n\">height</span><span class=\"p\">,</span> \n    <span class=\"n\">bar</span><span class=\"p\">(</span><span class=\"n\">height</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">bar</span>\n<span class=\"k\">FROM</span> \n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n    <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span>\n    <span class=\"k\">LIMIT</span> <span class=\"mi\">20</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500height\u2500\u252c\u2500bar\u2500\u2500\u2500\u2510\n\u2502  2.125 \u2502 \u2588\u258b    \u2502\n\u2502   3.25 \u2502 \u2588\u2588\u258c   \u2502\n\u2502  5.625 \u2502 \u2588\u2588\u2588\u2588\u258f \u2502\n\u2502  5.625 \u2502 \u2588\u2588\u2588\u2588\u258f \u2502\n\u2502  3.375 \u2502 \u2588\u2588\u258c   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>In this case, you should remember that you don't know the histogram bin borders.</p>\n<h3 id=\"sequencematch-pattern-time-cond1-cond2\">sequenceMatch(pattern)(time, cond1, cond2, ...)<a class=\"headerlink\" href=\"#sequencematch-pattern-time-cond1-cond2\" title=\"Permanent link\">&para;</a></h3>\n<p>Pattern matching for event chains.</p>\n<p><code>pattern</code> is a string containing a pattern to match. The pattern is similar to a regular expression.</p>\n<p><code>time</code> is the time of the event, type support: <code>Date</code>,<code>DateTime</code>, and other unsigned integer types.</p>\n<p><code>cond1</code>, <code>cond2</code> ... is from one to 32 arguments of type UInt8 that indicate whether a certain condition was met for the event.</p>\n<p>The function collects a sequence of events in RAM. Then it checks whether this sequence matches the pattern.<br />\nIt returns UInt8: 0 if the pattern isn't matched, or 1 if it matches.</p>\n<p>Example: <code>sequenceMatch ('(?1).*(?2)')(EventTime, URL LIKE '%company%', URL LIKE '%cart%')</code></p>\n<ul>\n<li>whether there was a chain of events in which a pageview with 'company' in the address occurred earlier than a pageview with 'cart' in the address.</li>\n</ul>\n<p>This is a singular example. You could write it using other aggregate functions:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">minIf</span><span class=\"p\">(</span><span class=\"n\">EventTime</span><span class=\"p\">,</span> <span class=\"n\">URL</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%company%&#39;</span><span class=\"p\">)</span> <span class=\"o\">&lt;</span> <span class=\"n\">maxIf</span><span class=\"p\">(</span><span class=\"n\">EventTime</span><span class=\"p\">,</span> <span class=\"n\">URL</span> <span class=\"k\">LIKE</span> <span class=\"s1\">&#39;%cart%&#39;</span><span class=\"p\">).</span>\n</code></pre></div>\n\n\n<p>However, there is no such solution for more complex situations.</p>\n<p>Pattern syntax:</p>\n<p><code>(?1)</code> refers to the condition (any number can be used in place of 1).</p>\n<p><code>.*</code> is any number of any events.</p>\n<p><code>(?t&gt;=1800)</code> is a time condition.</p>\n<p>Any quantity of any type of events is allowed over the specified time.</p>\n<p>Instead of <code>&gt;=</code>, the following operators can be used:<code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>.</p>\n<p>Any number may be specified in place of 1800.</p>\n<p>Events that occur during the same second can be put in the chain in any order. This may affect the result of the function.</p>\n<h3 id=\"sequencecount-pattern-time-cond1-cond2\">sequenceCount(pattern)(time, cond1, cond2, ...)<a class=\"headerlink\" href=\"#sequencecount-pattern-time-cond1-cond2\" title=\"Permanent link\">&para;</a></h3>\n<p>Works the same way as the sequenceMatch function, but instead of returning whether there is an event chain, it returns UInt64 with the number of event chains found.<br />\nChains are searched for without overlapping. In other words, the next chain can start only after the end of the previous one.</p>\n<h3 id=\"windowfunnel-window-timestamp-cond1-cond2-cond3\">windowFunnel(window)(timestamp, cond1, cond2, cond3, ...)<a class=\"headerlink\" href=\"#windowfunnel-window-timestamp-cond1-cond2-cond3\" title=\"Perman");
            
            document.write("ent link\">&para;</a></h3>\n<p>Searches for event chains in a sliding time window and calculates the maximum number of events that occurred from the chain.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">windowFunnel(window)(timestamp, cond1, cond2, cond3, ...)</span>\n</code></pre></div>\n\n\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>window</code> \u2014 Length of the sliding window in seconds.</li>\n<li><code>timestamp</code> \u2014 Name of the column containing the timestamp. Data type support: <code>Date</code>,<code>DateTime</code>, and other unsigned integer types(Note that though timestamp support <code>UInt64</code> type, there is a limitation it's value can't overflow maximum of Int64, which is 2^63 - 1).</li>\n<li><code>cond1</code>, <code>cond2</code>... \u2014 Conditions or data describing the chain of events. Data type: <code>UInt8</code>. Values can be 0 or 1.</li>\n</ul>\n<p><strong>Algorithm</strong></p>\n<ul>\n<li>The function searches for data that triggers the first condition in the chain and sets the event counter to 1. This is the moment when the sliding window starts.</li>\n<li>If events from the chain occur sequentially within the window, the counter is incremented. If the sequence of events is disrupted, the counter isn't incremented.</li>\n<li>If the data has multiple event chains at varying points of completion, the function will only output the size of the longest chain.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<ul>\n<li>Integer. The maximum number of consecutive triggered conditions from the chain within the sliding time window. All the chains in the selection are analyzed.</li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Determine if one hour is enough for the user to select a phone and purchase it in the online store.</p>\n<p>Set the following chain of events:</p>\n<ol>\n<li>The user logged in to their account on the store (<code>eventID=1001</code>).</li>\n<li>The user searches for a phone (<code>eventID = 1003, product = 'phone'</code>).</li>\n<li>The user placed an order (<code>eventID = 1009</code>).</li>\n</ol>\n<p>To find out how far the user <code>user_id</code> could get through the chain in an hour in January of 2017, make the query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">level</span><span class=\"p\">,</span>\n    <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"k\">c</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">user_id</span><span class=\"p\">,</span>\n        <span class=\"n\">windowFunnel</span><span class=\"p\">(</span><span class=\"mi\">3600</span><span class=\"p\">)(</span><span class=\"k\">timestamp</span><span class=\"p\">,</span> <span class=\"n\">eventID</span> <span class=\"o\">=</span> <span class=\"mi\">1001</span><span class=\"p\">,</span> <span class=\"n\">eventID</span> <span class=\"o\">=</span> <span class=\"mi\">1003</span> <span class=\"k\">AND</span> <span class=\"n\">product</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;phone&#39;</span><span class=\"p\">,</span> <span class=\"n\">eventID</span> <span class=\"o\">=</span> <span class=\"mi\">1009</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"k\">level</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">trend_event</span>\n    <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">event_date</span> <span class=\"o\">&gt;=</span> <span class=\"s1\">&#39;2017-01-01&#39;</span><span class=\"p\">)</span> <span class=\"k\">AND</span> <span class=\"p\">(</span><span class=\"n\">event_date</span> <span class=\"o\">&lt;=</span> <span class=\"s1\">&#39;2017-01-31&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">user_id</span>\n<span class=\"p\">)</span>\n<span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"k\">level</span>\n<span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">level</span>\n</code></pre></div>\n\n\n<p>Simply, the level value could only be 0, 1, 2, 3, it means the maxium event action stage that one user could reach.</p>\n<h3 id=\"retention-cond1-cond2\">retention(cond1, cond2, ...)<a class=\"headerlink\" href=\"#retention-cond1-cond2\" title=\"Permanent link\">&para;</a></h3>\n<p>Retention refers to the ability of a company or product to retain its customers over some specified periods.</p>\n<p><code>cond1</code>, <code>cond2</code> ... is from one to 32 arguments of type UInt8 that indicate whether a certain condition was met for the event</p>\n<p>Example:</p>\n<p>Consider you are doing a website analytics, intend to calculate the retention of customers</p>\n<p>This could be easily calculate by <code>retention</code></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">r1</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">r2</span><span class=\"p\">,</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">])</span> <span class=\"k\">AS</span> <span class=\"n\">r3</span>\n<span class=\"k\">FROM</span>\n<span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span>\n        <span class=\"n\">uid</span><span class=\"p\">,</span>\n        <span class=\"n\">retention</span><span class=\"p\">(</span><span class=\"nb\">date</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2018-08-10&#39;</span><span class=\"p\">,</span> <span class=\"nb\">date</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2018-08-11&#39;</span><span class=\"p\">,</span> <span class=\"nb\">date</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;2018-08-12&#39;</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">r</span>\n    <span class=\"k\">FROM</span> <span class=\"n\">events</span>\n    <span class=\"k\">WHERE</span> <span class=\"nb\">date</span> <span class=\"k\">IN</span> <span class=\"p\">(</span><span class=\"s1\">&#39;2018-08-10&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2018-08-11&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;2018-08-12&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">uid</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Simply, <code>r1</code> means the number of unique visitors who met the <code>cond1</code> condition, <code>r2</code> means the number of unique visitors who met <code>cond1</code> and <code>cond2</code> conditions, <code>r3</code> means the number of unique visitors who met <code>cond1</code> and <code>cond3</code> conditions.</p>\n<h3 id=\"uniqupto-n-x\">uniqUpTo(N)(x)<a class=\"headerlink\" href=\"#uniqupto-n-x\" title=\"Permanent link\">&para;</a></h3>\n<p>Calculates the number of different argument values \u200b\u200bif it is less than or equal to N. If the number of different argument values is greater than N, it returns N + 1.</p>\n<p>Recommended for use with small Ns, up to 10. The maximum value of N is 100.</p>\n<p>For the state of an aggregate function, it uses the amount of memory equal to 1 + N * the size of one value of bytes.<br />\nFor strings, it stores a non-cryptographic hash of 8 bytes. That is, the calculation is approximated for strings.</p>\n<p>The function also works for several arguments.</p>\n<p>It works as fast as possible, except for cases when a large N value is used and the number of unique values is slightly less than N.</p>\n<p>Usage example:</p>\n<div class=\"codehilite\"><pre><span></span><code>Problem: Generate a report that shows only keywords that produced at least 5 unique users.\nSolution: Write in the GROUP BY query SearchPhrase HAVING uniqUpTo(4)(UserID) &gt;= 5\n</code></pre></div>\n\n\n<h3 id=\"summapfiltered-keys-to-keep-keys-values\">sumMapFiltered(keys_to_keep)(keys, values)<a class=\"headerlink\" href=\"#summapfiltered-keys-to-keep-keys-values\" title=\"Permanent link\">&para;</a></h3>\n<p>Same behavior as <a href=\"#agg_functions-summap\">sumMap</a> except that an array of keys is passed as a parameter. This can be especially useful when working with a high cardinality of keys.<br />\n<a name=\"../../../query_language/table_functions/\"></a><a name=\"../../query_language/table_functions/\"></a><a name=\"query_language/table_functions/\"></a><a name=\"table_functions/\"></a><a name=\"../../../../../query_language/table_functions/\"></a><a name=\"../query_language/table_functions/\"></a><a name=\"../../../../query_language/table_functions/\"></a></p>\n<h2 id=\"table-functions\">Table Functions<a class=\"headerlink\" href=\"#table-functions\" title=\"Permanent link\">&para;</a></h2>\n<p>Table functions are methods for constructing tables.</p>\n<p>You can use table functions in:</p>\n<ul>\n<li>\n<p><a href=\"#create-table-query\">CREATE TABLE AS <table_function()></a> query.</p>\n<p>It's one of the methods of creating a table.</p>\n</li>\n<li>\n<p><a href=\"#select-from\">FROM</a> clause of the <code>SELECT</code> query.</p>\n<p>The method for creating a temporary table that is available only in the current query. The table is deleted when the query finishes.</p>\n</li>\n</ul>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>You can't use table functions if the <a href=\"#settings_allow_ddl\">allow_ddl</a> setting is disabled.</p>\n</div>\n<p>Function | Description<br />\n<a name=\"../../../../../../table_functions/file/\"></a><a name=\"../../../../../query_language/table_functions/file/\"></a><a name=\"query_language/table_functions/file/\"></a><a name=\"../../query_language/table_functions/file/\"></a><a name=\"file/\"></a><a name=\"../../../../query_language/table_functions/file/\"></a><a name=\"../query_language/table_functions/file/\"></a><a name=\"../../../table_functions/file/\"></a><a name=\"../../../query_language/table_functions/file/\"></a><a name=\"../../../../table_functions/file/\"></a><a name=\"../../../../../table_functions/file/\"></a><a name=\"table_fun");
            
            document.write("ctions/file/\"></a><a name=\"../../table_functions/file/\"></a><a name=\"../table_functions/file/\"></a></p>\n<h2 id=\"file\">file<a class=\"headerlink\" href=\"#file\" title=\"Permanent link\">&para;</a></h2>\n<p>Creates a table from a file. This table function is similar to <a href=\"#url/\">url</a> and <a href=\"#hdfs/\">hdfs</a> ones.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">file</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">format</span><span class=\"p\">,</span> <span class=\"k\">structure</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Input parameters</strong></p>\n<ul>\n<li><code>path</code> \u2014 The relative path to the file from <a href=\"#server_settings-user_files_path\">user_files_path</a>. Path to file support following globs in readonly mode: <code>*</code>, <code>?</code>, <code>{abc,def}</code> and <code>{N..M}</code> where <code>N</code>, <code>M</code> \u2014 numbers, <code>`'abc', 'def'</code> \u2014 strings.</li>\n<li><code>format</code> \u2014  The <a href=\"#formats\">format</a> of the file.</li>\n<li><code>structure</code> \u2014 Structure of the table. Format <code>'column1_name column1_type, column2_name column2_type, ...'</code>.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>A table with the specified structure for reading or writing data in the specified file.</p>\n<p><strong>Example</strong></p>\n<p>Setting <code>user_files_path</code> and the contents of the file <code>test.csv</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ grep user_files_path /etc/clickhouse-server/config.xml\n    &lt;user_files_path&gt;/var/lib/clickhouse/user_files/&lt;/user_files_path&gt;\n\n$ cat /var/lib/clickhouse/user_files/test.csv\n    <span class=\"m\">1</span>,2,3\n    <span class=\"m\">3</span>,2,1\n    <span class=\"m\">78</span>,43,45\n</code></pre></div>\n\n\n<p>Table from<code>test.csv</code> and selection of the first two rows from it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;test.csv&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;column1 UInt32, column2 UInt32, column3 UInt32&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500column1\u2500\u252c\u2500column2\u2500\u252c\u2500column3\u2500\u2510\n\u2502       1 \u2502       2 \u2502       3 \u2502\n\u2502       3 \u2502       2 \u2502       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- getting the first 10 lines of a table that contains 3 columns of UInt32 type from a CSV file</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;test.csv&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;column1 UInt32, column2 UInt32, column3 UInt32&#39;</span><span class=\"p\">)</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<p><strong>Globs in path</strong></p>\n<p>Multiple path components can have globs. For being processed file should exists and matches to the whole path pattern (not only suffix or prefix).</p>\n<ul>\n<li><code>*</code> \u2014 Substitutes any number of any characters except <code>/</code> including empty string.</li>\n<li><code>?</code> \u2014 Substitutes any single character.</li>\n<li><code>{some_string,another_string,yet_another_one}</code> \u2014 Substitutes any of strings <code>'some_string', 'another_string', 'yet_another_one'</code>.</li>\n<li><code>{N..M}</code> \u2014 Substitutes any number in range from N to M including both borders.</li>\n</ul>\n<p>Constructions with <code>{}</code> are similar to the <a href=\"#../../query_language/table_functions/remote/\">remote table function</a>).</p>\n<p><strong>Example</strong></p>\n<ol>\n<li>Suppose we have several files with the following relative paths:</li>\n</ol>\n<ul>\n<li>'some_dir/some_file_1'</li>\n<li>'some_dir/some_file_2'</li>\n<li>'some_dir/some_file_3'</li>\n<li>'another_dir/some_file_1'</li>\n<li>'another_dir/some_file_2'</li>\n<li>'another_dir/some_file_3'</li>\n</ul>\n<ol start=\"2\">\n<li>Query the amount of rows in these files:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;{some,another}_dir/some_file_{1..3}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<ol start=\"3\">\n<li>Query the amount of rows in all files of these two directories:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;{some,another}_dir/*&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>If your listing of files contains number ranges with leading zeros, use the construction with braces for each digit separately or use <code>?</code>.</p>\n</div>\n<p><strong>Example</strong></p>\n<p>Query the data from files named <code>file000</code>, <code>file001</code>, ... , <code>file999</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"s1\">&#39;big_dir/file{0..9}{0..9}{0..9}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"../../query_language/table_functions/merge/\"></a><a name=\"../../../query_language/table_functions/merge/\"></a><a name=\"../../../../../table_functions/merge/\"></a><a name=\"../../../../../../table_functions/merge/\"></a><a name=\"../../../../query_language/table_functions/merge/\"></a><a name=\"../table_functions/merge/\"></a><a name=\"../../../table_functions/merge/\"></a><a name=\"../query_language/table_functions/merge/\"></a><a name=\"../../table_functions/merge/\"></a><a name=\"merge/\"></a><a name=\"query_language/table_functions/merge/\"></a><a name=\"../../../../table_functions/merge/\"></a><a name=\"../../../../../query_language/table_functions/merge/\"></a><a name=\"table_functions/merge/\"></a></p>\n<h2 id=\"merge_1\">merge<a class=\"headerlink\" href=\"#merge_1\" title=\"Permanent link\">&para;</a></h2>\n<p><code>merge(db_name, 'tables_regexp')</code> \u2013 Creates a temporary Merge table. For more information, see the section \"Table engines, Merge\".</p>\n<p>The table structure is taken from the first table encountered that matches the regular expression.</p>\n<p><a name=\"table_functions/numbers/\"></a><a name=\"../../../table_functions/numbers/\"></a><a name=\"../../../../table_functions/numbers/\"></a><a name=\"../../../../../../table_functions/numbers/\"></a><a name=\"../../../query_language/table_functions/numbers/\"></a><a name=\"../table_functions/numbers/\"></a><a name=\"query_language/table_functions/numbers/\"></a><a name=\"../../../../query_language/table_functions/numbers/\"></a><a name=\"../query_language/table_functions/numbers/\"></a><a name=\"../../query_language/table_functions/numbers/\"></a><a name=\"../../table_functions/numbers/\"></a><a name=\"../../../../../query_language/table_functions/numbers/\"></a><a name=\"numbers/\"></a><a name=\"../../../../../table_functions/numbers/\"></a></p>\n<h2 id=\"numbers\">numbers<a class=\"headerlink\" href=\"#numbers\" title=\"Permanent link\">&para;</a></h2>\n<p><code>numbers(N)</code> \u2013 Returns a table with the single 'number' column (UInt64) that contains integers from 0 to N-1.<br />\n<code>numbers(N, M)</code> - Returns a table with the single 'number' column (UInt64) that contains integers from N to (N + M - 1).</p>\n<p>Similar to the <code>system.numbers</code> table, it can be used for testing and generating successive values, <code>numbers(N, M)</code> more efficient than <code>system.numbers</code>.</p>\n<p>The following queries are equivalent:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">);</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">);</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">numbers</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- Generate a sequence of dates from 2010-01-01 to 2010-12-31</span>\n<span class=\"k\">select</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2010-01-01&#39;</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"nb\">number</span> <span class=\"k\">as</span> <span class=\"n\">d</span> <span class=\"k\">FROM</span> <span class=\"n\">numbers</span><span class=\"p\">(</span><span class=\"mi\">365</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../query_language/table_functions/remote/\"></a><a name=\"../../table_fu");
            
            document.write("nctions/remote/\"></a><a name=\"../../../query_language/table_functions/remote/\"></a><a name=\"remote/\"></a><a name=\"../../../../../query_language/table_functions/remote/\"></a><a name=\"../table_functions/remote/\"></a><a name=\"../../../../../../table_functions/remote/\"></a><a name=\"../query_language/table_functions/remote/\"></a><a name=\"../../../../../table_functions/remote/\"></a><a name=\"query_language/table_functions/remote/\"></a><a name=\"../../../table_functions/remote/\"></a><a name=\"table_functions/remote/\"></a><a name=\"../../../../table_functions/remote/\"></a><a name=\"../../query_language/table_functions/remote/\"></a></p>\n<h2 id=\"remote-remotesecure\">remote, remoteSecure<a class=\"headerlink\" href=\"#remote-remotesecure\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows you to access remote servers without creating a <code>Distributed</code> table.</p>\n<p>Signatures:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">remote</span><span class=\"p\">(</span><span class=\"s1\">&#39;addresses_expr&#39;</span><span class=\"p\">,</span> <span class=\"n\">db</span><span class=\"p\">,</span> <span class=\"k\">table</span><span class=\"p\">[,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">[,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">]])</span>\n<span class=\"n\">remote</span><span class=\"p\">(</span><span class=\"s1\">&#39;addresses_expr&#39;</span><span class=\"p\">,</span> <span class=\"n\">db</span><span class=\"p\">.</span><span class=\"k\">table</span><span class=\"p\">[,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">[,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">]])</span>\n</code></pre></div>\n\n\n<p><code>addresses_expr</code> \u2013 An expression that generates addresses of remote servers. This may be just one server address. The server address is <code>host:port</code>, or just <code>host</code>. The host can be specified as the server name, or as the IPv4 or IPv6 address. An IPv6 address is specified in square brackets. The port is the TCP port on the remote server. If the port is omitted, it uses <code>tcp_port</code> from the server's config file (by default, 9000).</p>\n<div class=\"admonition important\">\n<p class=\"admonition-title\">Important</p>\n<p>The port is required for an IPv6 address.</p>\n</div>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-01-1\nexample01-01-1:9000\nlocalhost\n127.0.0.1\n[::]:9000\n[2a02:6b8:0:1111::11]:9000\n</code></pre></div>\n\n\n<p>Multiple addresses can be comma-separated. In this case, ClickHouse will use distributed processing, so it will send the query to all specified addresses (like to shards with different data).</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-01-1,example01-02-1\n</code></pre></div>\n\n\n<p>Part of the expression can be specified in curly brackets. The previous example can be written as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-0{1,2}-1\n</code></pre></div>\n\n\n<p>Curly brackets can contain a range of numbers separated by two dots (non-negative integers). In this case, the range is expanded to a set of values that generate shard addresses. If the first number starts with zero, the values are formed with the same zero alignment. The previous example can be written as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-{01..02}-1\n</code></pre></div>\n\n\n<p>If you have multiple pairs of curly brackets, it generates the direct product of the corresponding sets.</p>\n<p>Addresses and parts of addresses in curly brackets can be separated by the pipe symbol (|). In this case, the corresponding sets of addresses are interpreted as replicas, and the query will be sent to the first healthy replica. However, the replicas are iterated in the order currently set in the <a href=\"#../../operations/settings/settings/\">load_balancing</a> setting.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code>example01-{01..02}-{1|2}\n</code></pre></div>\n\n\n<p>This example specifies two shards that each have two replicas.</p>\n<p>The number of addresses generated is limited by a constant. Right now this is 1000 addresses.</p>\n<p>Using the <code>remote</code> table function is less optimal than creating a <code>Distributed</code> table, because in this case, the server connection is re-established for every request. In addition, if host names are set, the names are resolved, and errors are not counted when working with various replicas. When processing a large number of queries, always create the <code>Distributed</code> table ahead of time, and don't use the <code>remote</code> table function.</p>\n<p>The <code>remote</code> table function can be useful in the following cases:</p>\n<ul>\n<li>Accessing a specific server for data comparison, debugging, and testing.</li>\n<li>Queries between various ClickHouse clusters for research purposes.</li>\n<li>Infrequent distributed requests that are made manually.</li>\n<li>Distributed requests where the set of servers is re-defined each time.</li>\n</ul>\n<p>If the user is not specified, <code>default</code> is used.<br />\nIf the password is not specified, an empty password is used.</p>\n<p><code>remoteSecure</code> - same as <code>remote</code> but with secured connection. Default port \u2014 <a href=\"#server_settings-tcp_port_secure\">tcp_port_secure</a> from config or 9440.</p>\n<p><a name=\"../query_language/table_functions/url/\"></a><a name=\"../../../table_functions/url/\"></a><a name=\"../../table_functions/url/\"></a><a name=\"../../../../table_functions/url/\"></a><a name=\"../../../../../table_functions/url/\"></a><a name=\"../../../../../../table_functions/url/\"></a><a name=\"table_functions/url/\"></a><a name=\"../../query_language/table_functions/url/\"></a><a name=\"../../../../../query_language/table_functions/url/\"></a><a name=\"url/\"></a><a name=\"../table_functions/url/\"></a><a name=\"../../../../query_language/table_functions/url/\"></a><a name=\"query_language/table_functions/url/\"></a><a name=\"../../../query_language/table_functions/url/\"></a></p>\n<h2 id=\"url\">url<a class=\"headerlink\" href=\"#url\" title=\"Permanent link\">&para;</a></h2>\n<p><code>url(URL, format, structure)</code> - returns a table created from the <code>URL</code> with given<br />\n<code>format</code> and <code>structure</code>.</p>\n<p>URL - HTTP or HTTPS server address, which can accept <code>GET</code> and/or <code>POST</code> requests.</p>\n<p>format - <a href=\"#formats\">format</a> of the data.</p>\n<p>structure - table structure in <code>'UserID UInt64, Name String'</code> format. Determines column names and types.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">-- getting the first 3 lines of a table that contains columns of String and UInt32 type from HTTP-server which answers in CSV format.</span>\n<span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"s1\">&#39;http://127.0.0.1:12345/&#39;</span><span class=\"p\">,</span> <span class=\"n\">CSV</span><span class=\"p\">,</span> <span class=\"s1\">&#39;column1 String, column2 UInt32&#39;</span><span class=\"p\">)</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">3</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../query_language/table_functions/mysql/\"></a><a name=\"../query_language/table_functions/mysql/\"></a><a name=\"../../table_functions/mysql/\"></a><a name=\"../../../../query_language/table_functions/mysql/\"></a><a name=\"../table_functions/mysql/\"></a><a name=\"../../../../../table_functions/mysql/\"></a><a name=\"../../../../../../table_functions/mysql/\"></a><a name=\"../../../../table_functions/mysql/\"></a><a name=\"table_functions/mysql/\"></a><a name=\"../../../../../query_language/table_functions/mysql/\"></a><a name=\"../../../table_functions/mysql/\"></a><a name=\"../../query_language/table_functions/mysql/\"></a><a name=\"query_language/table_functions/mysql/\"></a><a name=\"mysql/\"></a></p>\n<h2 id=\"mysql_2\">mysql<a class=\"headerlink\" href=\"#mysql_2\" title=\"Permanent link\">&para;</a></h2>\n<p>Allows <code>SELECT</code> queries to be performed on data that is stored on a remote MySQL server.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">mysql</span><span class=\"p\">(</span><span class=\"s1\">&#39;host:port&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;database&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;user&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;password&#39;</span><span class=\"p\">[,</span> <span class=\"n\">replace_query</span><span class=\"p\">,</span> <span class=\"s1\">&#39;on_duplicate_clause&#39;</span><span class=\"p\">]);</span>\n</code></pre></div>\n\n\n<p><strong>Parameters</strong></p>\n<ul>\n<li><code>host:port</code> \u2014 MySQL server address.</li>\n<li><code>database</code> \u2014 Remote database name.</li>\n<li><code>table</code> \u2014 Remote table name.</li>\n<li><code>user</code> \u2014 MySQL user.</li>\n<li><code>password</code> \u2014 User password.</li>\n<li><code>replace_query</code> \u2014 Flag that converts <code>INSERT INTO</code> queries to <code>REPLACE INTO</code>. If <code>replace_query=1</code>, the query is replaced.</li>\n<li>\n<p><code>on_duplicate_clause</code> \u2014 The <code>ON DUPLICATE KEY on_duplicate_clause</code> expression that is added to the <code>INSERT</code> query.</p>\n<p>Example: <code>INSERT INTO t (c1,c2) VALUES ('a', 2) ON DUPLICATE KEY UPDATE c2 = c2 + 1</code>, where <code>on_duplicate_clause</code> is <code>UPDATE c2 = c2 + 1</code>. See the MySQL documentation to find which <code>on_duplicate_clause</code> you can use with the <code>ON DUPLICATE KEY</code> clause.</p>\n<p>To specify <code>on_duplicate_clause</code> you need to pass <code>0</code> to the <code>replace_query</code> parameter. If you simultaneously pass <code>replace_query = 1</code> and <code>on_duplicate_clause</code>, ClickHouse generates an exception.</p>\n</li>\n</ul>\n<p>Simple <code>WHERE</code> clauses such as <code>=, !=, &gt;, &gt;=, &lt;, &lt;=</code> are currently executed on the MySQL server.</p>\n<p>The rest of the conditions and the <code>LIMIT</code> sampling constraint are executed in ClickHouse on");
            
            document.write("ly after the query to MySQL finishes.</p>\n<p><strong>Returned Value</strong></p>\n<p>A table object with the same columns as the original MySQL table.</p>\n<h3 id=\"usage-example_7\">Usage Example<a class=\"headerlink\" href=\"#usage-example_7\" title=\"Permanent link\">&para;</a></h3>\n<p>Table in MySQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+--------------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Selecting data from ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">mysql</span><span class=\"p\">(</span><span class=\"s1\">&#39;localhost:3306&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;bayonet&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;123&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int_id\u2500\u252c\u2500int_nullable\u2500\u252c\u2500float\u2500\u252c\u2500float_nullable\u2500\u2510\n\u2502      1 \u2502         \u1d3a\u1d41\u1d38\u1d38 \u2502     2 \u2502           \u1d3a\u1d41\u1d38\u1d38 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_4\">See Also<a class=\"headerlink\" href=\"#see-also_4\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#../../operations/table_engines/mysql/\">The 'MySQL' table engine</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-mysql\">Using MySQL as a source of external dictionary</a></li>\n</ul>\n<p><a name=\"../table_functions/jdbc/\"></a><a name=\"../../../table_functions/jdbc/\"></a><a name=\"../../../../../table_functions/jdbc/\"></a><a name=\"jdbc/\"></a><a name=\"../../query_language/table_functions/jdbc/\"></a><a name=\"../query_language/table_functions/jdbc/\"></a><a name=\"../../../../../query_language/table_functions/jdbc/\"></a><a name=\"query_language/table_functions/jdbc/\"></a><a name=\"../../table_functions/jdbc/\"></a><a name=\"../../../../query_language/table_functions/jdbc/\"></a><a name=\"../../../../../../table_functions/jdbc/\"></a><a name=\"table_functions/jdbc/\"></a><a name=\"../../../../table_functions/jdbc/\"></a><a name=\"../../../query_language/table_functions/jdbc/\"></a></p>\n<h2 id=\"table_function-jdbc\">jdbc<a class=\"headerlink\" href=\"#table_function-jdbc\" title=\"Permanent link\">&para;</a></h2>\n<p><code>jdbc(jdbc_connection_uri, schema, table)</code> - returns table that is connected via JDBC driver.</p>\n<p>This table function requires separate <code>clickhouse-jdbc-bridge</code> program to be running.<br />\nIt supports Nullable types (based on DDL of remote table that is queried).</p>\n<p><strong>Examples</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">jdbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;jdbc:mysql://localhost:3306/?user=root&amp;password=root&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;schema&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">jdbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;mysql://localhost:3306/?user=root&amp;password=root&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;schema&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">jdbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;datasource://mysql-local&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;schema&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;table&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../../../query_language/table_functions/odbc/\"></a><a name=\"query_language/table_functions/odbc/\"></a><a name=\"../../../../../../table_functions/odbc/\"></a><a name=\"../../../query_language/table_functions/odbc/\"></a><a name=\"../../../../../table_functions/odbc/\"></a><a name=\"../table_functions/odbc/\"></a><a name=\"../../../table_functions/odbc/\"></a><a name=\"../../../../query_language/table_functions/odbc/\"></a><a name=\"../query_language/table_functions/odbc/\"></a><a name=\"../../table_functions/odbc/\"></a><a name=\"table_functions/odbc/\"></a><a name=\"../../query_language/table_functions/odbc/\"></a><a name=\"odbc/\"></a><a name=\"../../../../table_functions/odbc/\"></a></p>\n<h2 id=\"table_functions-odbc\">odbc<a class=\"headerlink\" href=\"#table_functions-odbc\" title=\"Permanent link\">&para;</a></h2>\n<p>Returns table that is connected via <a href=\"https://en.wikipedia.org/wiki/Open_Database_Connectivity\" rel=\"external nofollow noreferrer\">ODBC</a>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">odbc</span><span class=\"p\">(</span><span class=\"n\">connection_settings</span><span class=\"p\">,</span> <span class=\"n\">external_database</span><span class=\"p\">,</span> <span class=\"n\">external_table</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Parameters:</p>\n<ul>\n<li><code>connection_settings</code> \u2014 Name of the section with connection settings in the <code>odbc.ini</code> file.</li>\n<li><code>external_database</code> \u2014 Name of a database in an external DBMS.</li>\n<li><code>external_table</code> \u2014 Name of a table in the <code>external_database</code>.</li>\n</ul>\n<p>To safely implement ODBC connections, ClickHouse uses a separate program <code>clickhouse-odbc-bridge</code>. If the ODBC driver is loaded directly from <code>clickhouse-server</code>, driver problems can crash the ClickHouse server. ClickHouse automatically starts <code>clickhouse-odbc-bridge</code> when it is required. The ODBC bridge program is installed from the same package as the <code>clickhouse-server</code>.</p>\n<p>The fields with the <code>NULL</code> values from the external table are converted into the default values for the base data type. For example, if a remote MySQL table field has the <code>INT NULL</code> type it is converted to 0 (the default value for ClickHouse <code>Int32</code> data type).</p>\n<h3 id=\"usage-example_8\">Usage example<a class=\"headerlink\" href=\"#usage-example_8\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Getting data from the local MySQL installation via ODBC</strong></p>\n<p>This example is checked for Ubuntu Linux 18.04 and MySQL server 5.7.</p>\n<p>Ensure that unixODBC and MySQL Connector are installed.</p>\n<p>By default (if installed from packages), ClickHouse starts as user <code>clickhouse</code>. Thus you need to create and configure this user in the MySQL server.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo mysql\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">CREATE</span> <span class=\"k\">USER</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"o\">@</span><span class=\"s1\">&#39;localhost&#39;</span> <span class=\"n\">IDENTIFIED</span> <span class=\"k\">BY</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"p\">;</span>\n<span class=\"n\">mysql</span><span class=\"o\">&gt;</span> <span class=\"k\">GRANT</span> <span class=\"k\">ALL</span> <span class=\"k\">PRIVILEGES</span> <span class=\"k\">ON</span> <span class=\"o\">*</span><span class=\"p\">.</span><span class=\"o\">*</span> <span class=\"k\">TO</span> <span class=\"s1\">&#39;clickhouse&#39;</span><span class=\"o\">@</span><span class=\"s1\">&#39;clickhouse&#39;</span> <span class=\"k\">WITH</span> <span class=\"k\">GRANT</span> <span class=\"k\">OPTION</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>Then configure the connection in <code>/etc/odbc.ini</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat /etc/odbc.ini\n<span class=\"o\">[</span>mysqlconn<span class=\"o\">]</span>\n<span class=\"nv\">DRIVER</span> <span class=\"o\">=</span> /usr/local/lib/libmyodbc5w.so\n<span class=\"nv\">SERVER</span> <span class=\"o\">=</span> <span class=\"m\">127</span>.0.0.1\n<span class=\"nv\">PORT</span> <span class=\"o\">=</span> <span class=\"m\">3306</span>\n<span class=\"nv\">DATABASE</span> <span class=\"o\">=</span> <span class=\"nb\">test</span>\n<span class=\"nv\">USERNAME</span> <span class=\"o\">=</span> clickhouse\n<span class=\"nv\">PASSWORD</span> <span class=\"o\">=</span> clickhouse\n</code></pre></div>\n\n\n<p>You can check the connection using the <code>isql</code> utility from the unixODBC installation.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ isql -v mysqlconn\n+---------------------------------------+\n<span class=\"p\">|</span> Connected!                            <span class=\"p\">|</span>\n<span class=\"p\">|</span>                                       <span class=\"p\">|</span>\n...\n</code></pre></div>\n\n\n<p>Table in MySQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>mysql&gt; CREATE TABLE `test`.`test` (\n    -&gt;   `int_id` INT NOT NULL AUTO_INCREMENT,\n    -&gt;   `int_nullable` INT NULL DEFAULT NULL,\n    -&gt;   `float` FLOAT NOT NULL,\n    -&gt;   `float_nullable` FLOAT NULL DEFAULT NULL,\n    -&gt;   PRIMARY KEY (`int_id`));\nQuery OK, 0 rows affected (0,09 sec)\n\nmysql&gt; insert into test (`int_id`, `float`) VALUES (1,2);\nQuery OK, 1 row affected (0,00 sec)\n\nmysql&gt; select * from test;\n+--------+--------------+-------+----------------+\n| int_id | int_nullable | float | float_nullable |\n+--------+-----");
            
            document.write("---------+-------+----------------+\n|      1 |         NULL |     2 |           NULL |\n+--------+--------------+-------+----------------+\n1 row in set (0,00 sec)\n</code></pre></div>\n\n\n<p>Retrieving data from the MySQL table in ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">odbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;DSN=mysqlconn&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500int_id\u2500\u252c\u2500int_nullable\u2500\u252c\u2500float\u2500\u252c\u2500float_nullable\u2500\u2510\n\u2502      1 \u2502            0 \u2502     2 \u2502              0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"see-also_5\">See Also<a class=\"headerlink\" href=\"#see-also_5\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#dicts-external_dicts_dict_sources-odbc\">ODBC external dictionaries</a></li>\n<li><a href=\"#../../operations/table_engines/odbc/\">ODBC table engine</a>.</li>\n</ul>\n<p><a name=\"../../../../../table_functions/hdfs/\"></a><a name=\"../../../query_language/table_functions/hdfs/\"></a><a name=\"../../../../../../table_functions/hdfs/\"></a><a name=\"../query_language/table_functions/hdfs/\"></a><a name=\"table_functions/hdfs/\"></a><a name=\"../../../../../query_language/table_functions/hdfs/\"></a><a name=\"../../table_functions/hdfs/\"></a><a name=\"../../../../table_functions/hdfs/\"></a><a name=\"../table_functions/hdfs/\"></a><a name=\"hdfs/\"></a><a name=\"../../../../query_language/table_functions/hdfs/\"></a><a name=\"../../query_language/table_functions/hdfs/\"></a><a name=\"query_language/table_functions/hdfs/\"></a><a name=\"../../../table_functions/hdfs/\"></a></p>\n<h2 id=\"hdfs\">hdfs<a class=\"headerlink\" href=\"#hdfs\" title=\"Permanent link\">&para;</a></h2>\n<p>Creates a table from files in HDFS. This table function is similar to <a href=\"#url/\">url</a> and <a href=\"#file/\">file</a> ones.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"n\">URI</span><span class=\"p\">,</span> <span class=\"n\">format</span><span class=\"p\">,</span> <span class=\"k\">structure</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>Input parameters</strong></p>\n<ul>\n<li><code>URI</code> \u2014 The relative URI to the file in HDFS. Path to file support following globs in readonly mode: <code>*</code>, <code>?</code>, <code>{abc,def}</code> and <code>{N..M}</code> where <code>N</code>, <code>M</code> \u2014 numbers, <code>`'abc', 'def'</code> \u2014 strings.</li>\n<li><code>format</code> \u2014  The <a href=\"#formats\">format</a> of the file.</li>\n<li><code>structure</code> \u2014 Structure of the table. Format <code>'column1_name column1_type, column2_name column2_type, ...'</code>.</li>\n</ul>\n<p><strong>Returned value</strong></p>\n<p>A table with the specified structure for reading or writing data in the specified file.</p>\n<p><strong>Example</strong></p>\n<p>Table from <code>hdfs://hdfs1:9000/test</code> and selection of the first two rows from it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/test&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;column1 UInt32, column2 UInt32, column3 UInt32&#39;</span><span class=\"p\">)</span>\n<span class=\"k\">LIMIT</span> <span class=\"mi\">2</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500column1\u2500\u252c\u2500column2\u2500\u252c\u2500column3\u2500\u2510\n\u2502       1 \u2502       2 \u2502       3 \u2502\n\u2502       3 \u2502       2 \u2502       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>Globs in path</strong></p>\n<p>Multiple path components can have globs. For being processed file should exists and matches to the whole path pattern (not only suffix or prefix).</p>\n<ul>\n<li><code>*</code> \u2014 Substitutes any number of any characters except <code>/</code> including empty string.</li>\n<li><code>?</code> \u2014 Substitutes any single character.</li>\n<li><code>{some_string,another_string,yet_another_one}</code> \u2014 Substitutes any of strings <code>'some_string', 'another_string', 'yet_another_one'</code>.</li>\n<li><code>{N..M}</code> \u2014 Substitutes any number in range from N to M including both borders.</li>\n</ul>\n<p>Constructions with <code>{}</code> are similar to the <a href=\"#../../query_language/table_functions/remote/\">remote table function</a>).</p>\n<p><strong>Example</strong></p>\n<ol>\n<li>Suppose that we have several files with following URIs on HDFS:</li>\n</ol>\n<ul>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_1'</li>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_2'</li>\n<li>'hdfs://hdfs1:9000/some_dir/some_file_3'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_1'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_2'</li>\n<li>'hdfs://hdfs1:9000/another_dir/some_file_3'</li>\n</ul>\n<ol start=\"2\">\n<li>Query the amount of rows in these files:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/some_file_{1..3}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<ol start=\"3\">\n<li>Query the amount of rows in all files of these two directories:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/{some,another}_dir/*&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;TSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>If your listing of files contains number ranges with leading zeros, use the construction with braces for each digit separately or use <code>?</code>.</p>\n</div>\n<p><strong>Example</strong></p>\n<p>Query the data from files named <code>file000</code>, <code>file001</code>, ... , <code>file999</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">count</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"p\">)</span>\n<span class=\"k\">FROM</span> <span class=\"n\">hdfs</span><span class=\"p\">(</span><span class=\"s1\">&#39;hdfs://hdfs1:9000/big_dir/file{0..9}{0..9}{0..9}&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;CSV&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;name String, value UInt32&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"../query_language/table_functions/input/\"></a><a name=\"../../../../query_language/table_functions/input/\"></a><a name=\"../../table_functions/input/\"></a><a name=\"../table_functions/input/\"></a><a name=\"../../../../table_functions/input/\"></a><a name=\"../../../table_functions/input/\"></a><a name=\"../../../../../table_functions/input/\"></a><a name=\"query_language/table_functions/input/\"></a><a name=\"../../query_language/table_functions/input/\"></a><a name=\"input/\"></a><a name=\"../../../../../../table_functions/input/\"></a><a name=\"table_functions/input/\"></a><a name=\"../../../query_language/table_functions/input/\"></a><a name=\"../../../../../query_language/table_functions/input/\"></a></p>\n<h2 id=\"input\">input<a class=\"headerlink\" href=\"#input\" title=\"Permanent link\">&para;</a></h2>\n<p><code>input(structure)</code> - table function that allows effectively convert and insert data sent to the<br />\nserver with given structure to the table with another structure.</p>\n<p><code>structure</code> - structure of data sent to the server in following format <code>'column1_name column1_type, column2_name column2_type, ...'</code>.<br />\nFor example, <code>'id UInt32, name String'</code>.</p>\n<p>This function can be used only in <code>INSERT SELECT</code> query and only once but otherwise behaves like ordinary table function<br />\n(for example, it can be used in subquery, etc.).</p>\n<p>Data can be sent in any way like for ordinary <code>INSERT</code> query and passed in any available <a href=\"#formats\">format</a><br />\nthat must be specified in the end of query (unlike ordinary <code>INSERT SELECT</code>).</p>\n<p>The main feature of this function is that when server receives data from client it simultaneously converts it<br />\naccording to the list of expressions in the <code>SELECT</code> clause and inserts into the target table. Temporary table<br />\nwith all transferred data is not created.</p>\n<p><strong>Examples</strong></p>\n<ul>\n<li>Let the <code>test</code> table has the following structure <code>(a String, b String)</code><br />\nand data in <code>data.csv</code> has a different structure <code>(col1 String, col2 Date, col3 Int32)</code>. Query for insert<br />\ndata from the <code>data.csv</code> into the <code>test</code> table with simultaneous conversion looks like this:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>$ cat data.csv <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test SELECT lower(col1), col3 * col3 FROM input(&#39;col1 String, col2 Date, col3 Int32&#39;) FORMAT CSV&quot;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<ul>\n<li>If <code>data.csv</code> contains data of the same structure <code>test_structure</code> as the table <code>test</code> then these two queries are equal: </li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>$ cat data.csv <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">");
            
            document.write("&quot;INSERT INTO test FORMAT CSV&quot;</span>\n$ cat data.csv <span class=\"p\">|</span> clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;INSERT INTO test SELECT * FROM input(&#39;test_structure&#39;) FORMAT CSV&quot;</span>\n</code></pre></div>\n\n\n<p><a name=\"query_language/dicts/\"></a><a name=\"../query_language/dicts/\"></a><a name=\"dicts/\"></a><a name=\"../../../query_language/dicts/\"></a><a name=\"../../../../../query_language/dicts/\"></a><a name=\"../../../../query_language/dicts/\"></a><a name=\"../../query_language/dicts/\"></a></p>\n<h2 id=\"dictionaries\">Dictionaries<a class=\"headerlink\" href=\"#dictionaries\" title=\"Permanent link\">&para;</a></h2>\n<p>A dictionary is a mapping (<code>key -&gt; attributes</code>) that is convenient for various types of reference lists.</p>\n<p>ClickHouse supports special functions for working with dictionaries that can be used in queries. It is easier and more efficient to use dictionaries with functions than a <code>JOIN</code> with reference tables.</p>\n<p><a href=\"#null\">NULL</a> values can't be stored in a dictionary.</p>\n<p>ClickHouse supports:</p>\n<ul>\n<li><a href=\"#internal_dicts\">Built-in dictionaries</a> with a specific <a href=\"#../functions/ym_dict_functions/\">set of functions</a>.</li>\n<li><a href=\"#external_dicts/\">Plug-in (external) dictionaries</a> with a <a href=\"#../functions/ext_dict_functions/\">set of functions</a>.</li>\n</ul>\n<p><a name=\"../../../../../dicts/external_dicts/\"></a><a name=\"../../query_language/dicts/external_dicts/\"></a><a name=\"../../../dicts/external_dicts/\"></a><a name=\"../../../../../query_language/dicts/external_dicts/\"></a><a name=\"../../../../../../dicts/external_dicts/\"></a><a name=\"../../../../dicts/external_dicts/\"></a><a name=\"../../../../query_language/dicts/external_dicts/\"></a><a name=\"../query_language/dicts/external_dicts/\"></a><a name=\"../../../query_language/dicts/external_dicts/\"></a><a name=\"dicts/external_dicts/\"></a><a name=\"../../dicts/external_dicts/\"></a><a name=\"../dicts/external_dicts/\"></a><a name=\"query_language/dicts/external_dicts/\"></a><a name=\"external_dicts/\"></a></p>\n<h2 id=\"dicts-external_dicts\">External Dictionaries<a class=\"headerlink\" href=\"#dicts-external_dicts\" title=\"Permanent link\">&para;</a></h2>\n<p>You can add your own dictionaries from various data sources. The data source for a dictionary can be a local text or executable file, an HTTP(s) resource, or another DBMS. For more information, see \"<a href=\"#external_dicts_dict_sources/\">Sources for external dictionaries</a>\".</p>\n<p>ClickHouse:</p>\n<blockquote>\n<ul>\n<li>Fully or partially stores dictionaries in RAM.</li>\n<li>Periodically updates dictionaries and dynamically loads missing values. In other words, dictionaries can be loaded dynamically.</li>\n</ul>\n</blockquote>\n<p>The configuration of external dictionaries is located in one or more files. The path to the configuration is specified in the <a href=\"#server_settings-dictionaries_config\">dictionaries_config</a> parameter.</p>\n<p>Dictionaries can be loaded at server startup or at first use, depending on the <a href=\"#server_settings-dictionaries_lazy_load\">dictionaries_lazy_load</a> setting.</p>\n<p>The dictionary configuration file has the following format:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;comment&gt;</span>An optional element with any content. Ignored by the ClickHouse server.<span class=\"nt\">&lt;/comment&gt;</span>\n\n    <span class=\"c\">&lt;!--Optional element. File name with substitutions--&gt;</span>\n    <span class=\"nt\">&lt;include_from&gt;</span>/etc/metrika.xml<span class=\"nt\">&lt;/include_from&gt;</span>\n\n\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"c\">&lt;!-- Dictionary configuration. --&gt;</span>\n        <span class=\"c\">&lt;!-- There can be any number of &lt;dictionary&gt; sections in the configuration file. --&gt;</span>\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>You can <a href=\"#external_dicts_dict/\">configure</a> any number of dictionaries in the same file.</p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>You can convert values for a small dictionary by describing it in a <code>SELECT</code> query (see the <a href=\"#../functions/other_functions/\">transform</a> function). This functionality is not related to external dictionaries.</p>\n</div>\n<p><strong>See also</strong></p>\n<ul>\n<li><a href=\"#../functions/ext_dict_functions/\">Functions for Working with External Dictionaries</a></li>\n</ul>\n<p><a name=\"../../../../../query_language/dicts/external_dicts_dict/\"></a><a name=\"dicts/external_dicts_dict/\"></a><a name=\"../../../../../dicts/external_dicts_dict/\"></a><a name=\"../../../query_language/dicts/external_dicts_dict/\"></a><a name=\"../dicts/external_dicts_dict/\"></a><a name=\"../../../dicts/external_dicts_dict/\"></a><a name=\"../../query_language/dicts/external_dicts_dict/\"></a><a name=\"external_dicts_dict/\"></a><a name=\"../../../../dicts/external_dicts_dict/\"></a><a name=\"../../dicts/external_dicts_dict/\"></a><a name=\"query_language/dicts/external_dicts_dict/\"></a><a name=\"../query_language/dicts/external_dicts_dict/\"></a><a name=\"../../../../../../dicts/external_dicts_dict/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict/\"></a></p>\n<h2 id=\"dicts-external_dicts_dict\">Configuring an External Dictionary<a class=\"headerlink\" href=\"#dicts-external_dicts_dict\" title=\"Permanent link\">&para;</a></h2>\n<p>The dictionary configuration has the following structure:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    <span class=\"nt\">&lt;name&gt;</span>dict_name<span class=\"nt\">&lt;/name&gt;</span>\n\n    <span class=\"nt\">&lt;source&gt;</span>\n      <span class=\"c\">&lt;!-- Source configuration --&gt;</span>\n    <span class=\"nt\">&lt;/source&gt;</span>\n\n    <span class=\"nt\">&lt;layout&gt;</span>\n      <span class=\"c\">&lt;!-- Memory layout configuration --&gt;</span>\n    <span class=\"nt\">&lt;/layout&gt;</span>\n\n    <span class=\"nt\">&lt;structure&gt;</span>\n      <span class=\"c\">&lt;!-- Complex key configuration --&gt;</span>\n    <span class=\"nt\">&lt;/structure&gt;</span>\n\n    <span class=\"nt\">&lt;lifetime&gt;</span>\n      <span class=\"c\">&lt;!-- Lifetime of dictionary in memory --&gt;</span>\n    <span class=\"nt\">&lt;/lifetime&gt;</span>\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<ul>\n<li>name \u2013 The identifier that can be used to access the dictionary. Use the characters <code>[a-zA-Z0-9_\\-]</code>.</li>\n<li><a href=\"#external_dicts_dict_sources/\">source</a> \u2014 Source of the dictionary.</li>\n<li><a href=\"#external_dicts_dict_layout/\">layout</a> \u2014 Dictionary layout in memory.</li>\n<li><a href=\"#external_dicts_dict_structure/\">structure</a> \u2014 Structure of the dictionary . A key and attributes that can be retrieved by this key.</li>\n<li><a href=\"#external_dicts_dict_lifetime/\">lifetime</a> \u2014 Frequency of dictionary updates.</li>\n</ul>\n<p><a name=\"../../../../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"../../../../../dicts/external_dicts_dict_layout/\"></a><a name=\"../../../../dicts/external_dicts_dict_layout/\"></a><a name=\"dicts/external_dicts_dict_layout/\"></a><a name=\"../../dicts/external_dicts_dict_layout/\"></a><a name=\"external_dicts_dict_layout/\"></a><a name=\"../../../../../../dicts/external_dicts_dict_layout/\"></a><a name=\"../../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"../../../dicts/external_dicts_dict_layout/\"></a><a name=\"../dicts/external_dicts_dict_layout/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"../query_language/dicts/external_dicts_dict_layout/\"></a><a name=\"../../../query_language/dicts/external_dicts_dict_layout/\"></a></p>\n<h2 id=\"dicts-external_dicts_dict_layout\">Storing Dictionaries in Memory<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_layout\" title=\"Permanent link\">&para;</a></h2>\n<p>There are a variety of ways to store dictionaries in memory.</p>\n<p>We recommend <a href=\"#flat\">flat</a>, <a href=\"#dicts-external_dicts_dict_layout-hashed\">hashed</a> and <a href=\"#complex-key-hashed\">complex_key_hashed</a>. which provide optimal processing speed.</p>\n<p>Caching is not recommended because of potentially poor performance and difficulties in selecting optimal parameters. Read more in the section \"<a href=\"#cache\">cache</a>\".</p>\n<p>There are several ways to improve dictionary performance:</p>\n<ul>\n<li>Call the function for working with the dictionary after <code>GROUP BY</code>.</li>\n<li>Mark attributes to extract as injective. An attribute is called injective if different attribute values correspond to different keys. So when <code>GROUP BY</code> uses a function that fetches an attribute value by the key, this function is automatically taken out of <code>GROUP BY</code>.</li>\n</ul>\n<p>ClickHouse generates an exception for errors with dictionaries. Examples of errors:</p>\n<ul>\n<li>The dictionary being accessed could not be loaded.</li>\n<li>Error querying a <code>cached</code> dictionary.</li>\n</ul>\n<p>You can view the list of external dictionaries and their statuses in the <code>system.dictionaries</code> table.</p>\n<p>The configuration looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        ...\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;layout_type&gt;</span>\n                <span class=\"c\">&lt;!-- layout settings --&gt;</span>\n            <span class=\"nt\">&lt;/layout_type&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n        ...\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"ways-to-store-dictionaries-in-memory\">Ways to Store Dictionaries in Memory<a class=\"headerlink\" href=\"#ways-to-store-dictionaries-in-memory\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li><a href=\"#flat\">flat</a></li>\n<li><a href=\"#dicts-external_dicts_dict");
            
            document.write("_layout-hashed\">hashed</a></li>\n<li><a href=\"#dicts-external_dicts_dict_layout-sparse_hashed\">sparse_hashed</a></li>\n<li><a href=\"#cache\">cache</a></li>\n<li><a href=\"#range-hashed\">range_hashed</a></li>\n<li><a href=\"#complex-key-hashed\">complex_key_hashed</a></li>\n<li><a href=\"#complex-key-cache\">complex_key_cache</a></li>\n<li><a href=\"#ip-trie\">ip_trie</a></li>\n</ul>\n<h4 id=\"flat\">flat<a class=\"headerlink\" href=\"#flat\" title=\"Permanent link\">&para;</a></h4>\n<p>The dictionary is completely stored in memory in the form of flat arrays. How much memory does the dictionary use? The amount is proportional to the size of the largest key (in space used).</p>\n<p>The dictionary key has the <code>UInt64</code> type and the value is limited to 500,000. If a larger key is discovered when creating the dictionary, ClickHouse throws an exception and does not create the dictionary.</p>\n<p>All types of sources are supported. When updating, data (from a file or from a table) is read in its entirety.</p>\n<p>This method provides the best performance among all available methods of storing the dictionary.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n  <span class=\"nt\">&lt;flat</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"dicts-external_dicts_dict_layout-hashed\">hashed<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_layout-hashed\" title=\"Permanent link\">&para;</a></h4>\n<p>The dictionary is completely stored in memory in the form of a hash table. The dictionary can contain any number of elements with any identifiers In practice, the number of keys can reach tens of millions of items.</p>\n<p>All types of sources are supported. When updating, data (from a file or from a table) is read in its entirety.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n  <span class=\"nt\">&lt;hashed</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"dicts-external_dicts_dict_layout-sparse_hashed\">sparse_hashed<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_layout-sparse_hashed\" title=\"Permanent link\">&para;</a></h4>\n<p>Similar to <code>hashed</code>, but uses less memory in favor more CPU usage.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n  <span class=\"nt\">&lt;sparse_hashed</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"complex-key-hashed\">complex_key_hashed<a class=\"headerlink\" href=\"#complex-key-hashed\" title=\"Permanent link\">&para;</a></h4>\n<p>This type of storage is for use with composite <a href=\"#external_dicts_dict_structure/\">keys</a>. Similar to <code>hashed</code>.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n  <span class=\"nt\">&lt;complex_key_hashed</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"range-hashed\">range_hashed<a class=\"headerlink\" href=\"#range-hashed\" title=\"Permanent link\">&para;</a></h4>\n<p>The dictionary is stored in memory in the form of a hash table with an ordered array of ranges and their corresponding values.</p>\n<p>This storage method works the same way as hashed and allows using date/time (arbitrary numeric type) ranges in addition to the key.</p>\n<p>Example: The table contains discounts for each advertiser in the format:</p>\n<div class=\"codehilite\"><pre><span></span><code>+---------------+---------------------+-------------------+--------+\n| advertiser id | discount start date | discount end date | amount |\n+===============+=====================+===================+========+\n| 123           | 2015-01-01          | 2015-01-15        | 0.15   |\n+---------------+---------------------+-------------------+--------+\n| 123           | 2015-01-16          | 2015-01-31        | 0.25   |\n+---------------+---------------------+-------------------+--------+\n| 456           | 2015-01-01          | 2015-01-15        | 0.05   |\n+---------------+---------------------+-------------------+--------+\n</code></pre></div>\n\n\n<p>To use a sample for date ranges, define the <code>range_min</code> and <code>range_max</code> elements in the <a href=\"#external_dicts_dict_structure/\">structure</a>. These elements must contain elements <code>name</code> and<code>type</code> (if <code>type</code> is not specified, the default type will be used - Date). <code>type</code> can be any numeric type (Date / DateTime / UInt64 / Int32 / others).</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;structure&gt;</span>\n    <span class=\"nt\">&lt;id&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>Id<span class=\"nt\">&lt;/name&gt;</span>\n    <span class=\"nt\">&lt;/id&gt;</span>\n    <span class=\"nt\">&lt;range_min&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>first<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;type&gt;</span>Date<span class=\"nt\">&lt;/type&gt;</span>\n    <span class=\"nt\">&lt;/range_min&gt;</span>\n    <span class=\"nt\">&lt;range_max&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>last<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;type&gt;</span>Date<span class=\"nt\">&lt;/type&gt;</span>\n    <span class=\"nt\">&lt;/range_max&gt;</span>\n    ...\n</code></pre></div>\n\n\n<p>To work with these dictionaries, you need to pass an additional argument to the <code>dictGetT</code> function, for which a range is selected:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGetT</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;attr_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">id</span><span class=\"p\">,</span> <span class=\"nb\">date</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>This function returns the value for the specified <code>id</code>s and the date range that includes the passed date.</p>\n<p>Details of the algorithm:</p>\n<ul>\n<li>If the <code>id</code> is not found or a range is not found for the <code>id</code>, it returns the default value for the dictionary.</li>\n<li>If there are overlapping ranges, you can use any.</li>\n<li>If the range delimiter is <code>NULL</code> or an invalid date (such as 1900-01-01 or 2039-01-01), the range is left open. The range can be open on both sides.</li>\n</ul>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n        <span class=\"nt\">&lt;dictionary&gt;</span>\n\n                ...\n\n                <span class=\"nt\">&lt;layout&gt;</span>\n                        <span class=\"nt\">&lt;range_hashed</span> <span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;/layout&gt;</span>\n\n                <span class=\"nt\">&lt;structure&gt;</span>\n                        <span class=\"nt\">&lt;id&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>Abcdef<span class=\"nt\">&lt;/name&gt;</span>\n                        <span class=\"nt\">&lt;/id&gt;</span>\n                        <span class=\"nt\">&lt;range_min&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>StartTimeStamp<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>UInt64<span class=\"nt\">&lt;/type&gt;</span>\n                        <span class=\"nt\">&lt;/range_min&gt;</span>\n                        <span class=\"nt\">&lt;range_max&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>EndTimeStamp<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>UInt64<span class=\"nt\">&lt;/type&gt;</span>\n                        <span class=\"nt\">&lt;/range_max&gt;</span>\n                        <span class=\"nt\">&lt;attribute&gt;</span>\n                                <span class=\"nt\">&lt;name&gt;</span>XXXType<span class=\"nt\">&lt;/name&gt;</span>\n                                <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n                                <span class=\"nt\">&lt;null_value</span> <span class=\"nt\">/&gt;</span>\n                        <span class=\"nt\">&lt;/attribute&gt;</span>\n                <span class=\"nt\">&lt;/structure&gt;</span>\n\n        <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"cache\">cache<a class=\"headerlink\" href=\"#cache\" title=\"Permanent link\">&para;</a></h4>\n<p>The dictionary is stored in a cache that has a fixed number of cells. These cells contain frequently used elements.</p>\n<p>When searching for a dictionary, the cache is searched first. For each block of data, all keys that are not found in the cache or are outdated are requested from the source using <code>SELECT attrs... FROM db.table WHERE id IN (k1, k2, ...)</code>. The received data is then written to the cache.</p>\n<p>For cache dictionaries, the expiration <a href=\"#external_dicts_dict_lifetime/\">lifetime</a> of data in the cache can be set. If more time than <code>lifetime</code> has passed since loading the data in a cell, the cell's value is not used, and it is re-requested the next time it needs to be used.<br />\nThis is the least effective of all the ways to store dictionaries. The speed of the cache depends strongly on correct settings and the usage scenario. A cache type dictionary performs well only when the hit rates are high enough (recommended 99% and higher). You can view the average hit rate in the <code>system.dictionaries</code> table.</p>\n<p>To improve cache performance, use a subquery with <code>LIMIT</code>, and call the function with the dictionary externally.</p>\n<p>Supported <a href=\"#external_dicts_dict_sources/\">sources</a>: MySQL, ClickHouse, executable, HTTP.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;layout&gt;</span>\n    <span class=\"nt\">&lt;cache&gt;</span>\n        <span");
            
            document.write(" class=\"c\">&lt;!-- The size of the cache, in number of cells. Rounded up to a power of two. --&gt;</span>\n        <span class=\"nt\">&lt;size_in_cells&gt;</span>1000000000<span class=\"nt\">&lt;/size_in_cells&gt;</span>\n    <span class=\"nt\">&lt;/cache&gt;</span>\n<span class=\"nt\">&lt;/layout&gt;</span>\n</code></pre></div>\n\n\n<p>Set a large enough cache size. You need to experiment to select the number of cells:</p>\n<ol>\n<li>Set some value.</li>\n<li>Run queries until the cache is completely full.</li>\n<li>Assess memory consumption using the <code>system.dictionaries</code> table.</li>\n<li>Increase or decrease the number of cells until the required memory consumption is reached.</li>\n</ol>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Do not use ClickHouse as a source, because it is slow to process queries with random reads.</p>\n</div>\n<h4 id=\"complex-key-cache\">complex_key_cache<a class=\"headerlink\" href=\"#complex-key-cache\" title=\"Permanent link\">&para;</a></h4>\n<p>This type of storage is for use with composite <a href=\"#external_dicts_dict_structure/\">keys</a>. Similar to <code>cache</code>.</p>\n<h4 id=\"ip-trie\">ip_trie<a class=\"headerlink\" href=\"#ip-trie\" title=\"Permanent link\">&para;</a></h4>\n<p>This type of storage is for mapping network prefixes (IP addresses) to metadata such as ASN.</p>\n<p>Example: The table contains network prefixes and their corresponding AS number and country code:</p>\n<div class=\"codehilite\"><pre><span></span><code>  +-----------------+-------+--------+\n  | prefix          | asn   | cca2   |\n  +=================+=======+========+\n  | 202.79.32.0/20  | 17501 | NP     |\n  +-----------------+-------+--------+\n  | 2620:0:870::/48 | 3856  | US     |\n  +-----------------+-------+--------+\n  | 2a02:6b8:1::/48 | 13238 | RU     |\n  +-----------------+-------+--------+\n  | 2001:db8::/32   | 65536 | ZZ     |\n  +-----------------+-------+--------+\n</code></pre></div>\n\n\n<p>When using this type of layout, the structure must have a composite key.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;structure&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>\n        <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>prefix<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n        <span class=\"nt\">&lt;/attribute&gt;</span>\n    <span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>asn<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>UInt32<span class=\"nt\">&lt;/type&gt;</span>\n            <span class=\"nt\">&lt;null_value</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/attribute&gt;</span>\n    <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>cca2<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n            <span class=\"nt\">&lt;null_value&gt;</span>??<span class=\"nt\">&lt;/null_value&gt;</span>\n    <span class=\"nt\">&lt;/attribute&gt;</span>\n    ...\n</code></pre></div>\n\n\n<p>The key must have only one String type attribute that contains an allowed IP prefix. Other types are not supported yet.</p>\n<p>For queries, you must use the same functions (<code>dictGetT</code> with a tuple) as for dictionaries with composite keys:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGetT</span><span class=\"p\">(</span><span class=\"s1\">&#39;dict_name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;attr_name&#39;</span><span class=\"p\">,</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"n\">ip</span><span class=\"p\">))</span>\n</code></pre></div>\n\n\n<p>The function takes either <code>UInt32</code> for IPv4, or <code>FixedString(16)</code> for IPv6:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dictGetString</span><span class=\"p\">(</span><span class=\"s1\">&#39;prefix&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;asn&#39;</span><span class=\"p\">,</span> <span class=\"n\">tuple</span><span class=\"p\">(</span><span class=\"n\">IPv6StringToNum</span><span class=\"p\">(</span><span class=\"s1\">&#39;2001:db8::1&#39;</span><span class=\"p\">)))</span>\n</code></pre></div>\n\n\n<p>Other types are not supported yet. The function returns the attribute for the prefix that corresponds to this IP address. If there are overlapping prefixes, the most specific one is returned.</p>\n<p>Data is stored in a <code>trie</code>. It must completely fit into RAM.</p>\n<p><a name=\"../dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"external_dicts_dict_lifetime/\"></a><a name=\"../../../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict_lifetime/\"></a><a name=\"dicts/external_dicts_dict_lifetime/\"></a></p>\n<h2 id=\"dictionary-updates\">Dictionary Updates<a class=\"headerlink\" href=\"#dictionary-updates\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse periodically updates the dictionaries. The update interval for fully downloaded dictionaries and the invalidation interval for cached dictionaries are defined in the <code>&lt;lifetime&gt;</code> tag in seconds.</p>\n<p>Dictionary updates (other than loading for first use) do not block queries. During updates, the old version of a dictionary is used. If an error occurs during an update, the error is written to the server log, and queries continue using the old version of dictionaries.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    ...\n    <span class=\"nt\">&lt;lifetime&gt;</span>300<span class=\"nt\">&lt;/lifetime&gt;</span>\n    ...\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<p>Setting <code>&lt;lifetime&gt; 0&lt;/lifetime&gt;</code> prevents updating dictionaries.</p>\n<p>You can set a time interval for upgrades, and ClickHouse will choose a uniformly random time within this range. This is necessary in order to distribute the load on the dictionary source when upgrading on a large number of servers.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    ...\n    <span class=\"nt\">&lt;lifetime&gt;</span>\n        <span class=\"nt\">&lt;min&gt;</span>300<span class=\"nt\">&lt;/min&gt;</span>\n        <span class=\"nt\">&lt;max&gt;</span>360<span class=\"nt\">&lt;/max&gt;</span>\n    <span class=\"nt\">&lt;/lifetime&gt;</span>\n    ...\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<p>When upgrading the dictionaries, the ClickHouse server applies different logic depending on the type of <a href=\"#external_dicts_dict_sources/\"> source</a>:</p>\n<ul>\n<li>For a text file, it checks the time of modification. If the time differs from the previously recorded time, the dictionary is updated.</li>\n<li>For MyISAM tables, the time of modification is checked using a <code>SHOW TABLE STATUS</code> query.</li>\n<li>Dictionaries from other sources are updated every time by default.</li>\n</ul>\n<p>For MySQL (InnoDB), ODBC and ClickHouse sources, you can set up a query that will update the dictionaries only if they really changed, rather than each time. To do this, follow these steps:</p>\n<ul>\n<li>The dictionary table must have a field that always changes when the source data is updated.</li>\n<li>The settings of the source must specify a query that retrieves the changing field. The ClickHouse server interprets the query result as a row, and if this row has changed relative to its previous state, the dictionary is updated. Specify the query in the <code>&lt;invalidate_query&gt;</code> field in the settings for the <a href=\"#external_dicts_dict_sources/\">source</a>.</li>\n</ul>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    ...\n    <span class=\"nt\">&lt;odbc&gt;</span>\n      ...\n      <span class=\"nt\">&lt;invalidate_query&gt;</span>SELECT update_time FROM dictionary_source where id = 1<span class=\"nt\">&lt;/invalidate_query&gt;</span>\n    <span class=\"nt\">&lt;/odbc&gt;</span>\n    ...\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"../dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../../dicts/external_dicts_dict_sources/\"></a><a name=\"dicts/external_dicts_dict_sources/\"></a><a name=\"../../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"../../dicts/external_dicts_dict_sources/\"></a><a name=\"../../../dicts/external_dicts_dict_sources/\"></a><a name=\"external_dicts_dict_sources/\"></a><a name=\"../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict_sources/\"></a><a name=\"../../../../../../dicts/external_dicts_dict_sources/\"></a><a name=\"query_language/dicts/external_dicts_dict_sources/\"></a></p>\n<h2 id=\"dicts-external_dicts_dict_sources\">Sources of External Dictionaries<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources\" title=\"Permanent link\">&para;</a></h2>\n<p>An external dictionary can be connected from many different sources.</p>\n<p>The configuration looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</sp");
            
            document.write("an>\n  <span class=\"nt\">&lt;dictionary&gt;</span>\n    ...\n    <span class=\"nt\">&lt;source&gt;</span>\n      <span class=\"nt\">&lt;source_type&gt;</span>\n        <span class=\"c\">&lt;!-- Source configuration --&gt;</span>\n      <span class=\"nt\">&lt;/source_type&gt;</span>\n    <span class=\"nt\">&lt;/source&gt;</span>\n    ...\n  <span class=\"nt\">&lt;/dictionary&gt;</span>\n  ...\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>The source is configured in the <code>source</code> section.</p>\n<p>Types of sources (<code>source_type</code>):</p>\n<ul>\n<li><a href=\"#dicts-external_dicts_dict_sources-local_file\">Local file</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-executable\">Executable file</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-http\">HTTP(s)</a></li>\n<li>DBMS<ul>\n<li><a href=\"#dicts-external_dicts_dict_sources-mysql\">MySQL</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-clickhouse\">ClickHouse</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-mongodb\">MongoDB</a></li>\n<li><a href=\"#dicts-external_dicts_dict_sources-odbc\">ODBC</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"dicts-external_dicts_dict_sources-local_file\">Local File<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-local_file\" title=\"Permanent link\">&para;</a></h3>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n  <span class=\"nt\">&lt;file&gt;</span>\n    <span class=\"nt\">&lt;path&gt;</span>/opt/dictionaries/os.tsv<span class=\"nt\">&lt;/path&gt;</span>\n    <span class=\"nt\">&lt;format&gt;</span>TabSeparated<span class=\"nt\">&lt;/format&gt;</span>\n  <span class=\"nt\">&lt;/file&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>path</code> \u2013 The absolute path to the file.</li>\n<li><code>format</code> \u2013 The file format. All the formats described in \"<a href=\"#formats\">Formats</a>\" are supported.</li>\n</ul>\n<h3 id=\"dicts-external_dicts_dict_sources-executable\">Executable File<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-executable\" title=\"Permanent link\">&para;</a></h3>\n<p>Working with executable files depends on <a href=\"#external_dicts_dict_layout/\">how the dictionary is stored in memory</a>. If the dictionary is stored using <code>cache</code> and <code>complex_key_cache</code>, ClickHouse requests the necessary keys by sending a request to the executable file's STDIN. Otherwise, ClickHouse starts executable file and treats its output as dictionary data.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;executable&gt;</span>\n        <span class=\"nt\">&lt;command&gt;</span>cat /opt/dictionaries/os.tsv<span class=\"nt\">&lt;/command&gt;</span>\n        <span class=\"nt\">&lt;format&gt;</span>TabSeparated<span class=\"nt\">&lt;/format&gt;</span>\n    <span class=\"nt\">&lt;/executable&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>command</code> \u2013 The absolute path to the executable file, or the file name (if the program directory is written to <code>PATH</code>).</li>\n<li><code>format</code> \u2013 The file format. All the formats described in \"<a href=\"#formats\">Formats</a>\" are supported.</li>\n</ul>\n<h3 id=\"dicts-external_dicts_dict_sources-http\">HTTP(s)<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-http\" title=\"Permanent link\">&para;</a></h3>\n<p>Working with an HTTP(s) server depends on <a href=\"#external_dicts_dict_layout/\">how the dictionary is stored in memory</a>. If the dictionary is stored using <code>cache</code> and <code>complex_key_cache</code>, ClickHouse requests the necessary keys by sending a request via the <code>POST</code> method.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;http&gt;</span>\n        <span class=\"nt\">&lt;url&gt;</span>http://[::1]/os.tsv<span class=\"nt\">&lt;/url&gt;</span>\n        <span class=\"nt\">&lt;format&gt;</span>TabSeparated<span class=\"nt\">&lt;/format&gt;</span>\n    <span class=\"nt\">&lt;/http&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>In order for ClickHouse to access an HTTPS resource, you must <a href=\"#server_settings-openssl\">configure openSSL</a> in the server configuration.</p>\n<p>Setting fields:</p>\n<ul>\n<li><code>url</code> \u2013 The source URL.</li>\n<li><code>format</code> \u2013 The file format. All the formats described in \"<a href=\"#formats\">Formats</a>\" are supported.</li>\n</ul>\n<h3 id=\"dicts-external_dicts_dict_sources-odbc\">ODBC<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-odbc\" title=\"Permanent link\">&para;</a></h3>\n<p>You can use this method to connect any database that has an ODBC driver.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;odbc&gt;</span>\n    <span class=\"nt\">&lt;db&gt;</span>DatabaseName<span class=\"nt\">&lt;/db&gt;</span>\n    <span class=\"nt\">&lt;table&gt;</span>ShemaName.TableName<span class=\"nt\">&lt;/table&gt;</span>\n    <span class=\"nt\">&lt;connection_string&gt;</span>DSN=some_parameters<span class=\"nt\">&lt;/connection_string&gt;</span>\n    <span class=\"nt\">&lt;invalidate_query&gt;</span>SQL_QUERY<span class=\"nt\">&lt;/invalidate_query&gt;</span>\n<span class=\"nt\">&lt;/odbc&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>db</code> \u2013 Name of the database. Omit it if the database name is set in the <code>&lt;connection_string&gt;</code> parameters.</li>\n<li><code>table</code> \u2013 Name of the table and schema if exists.</li>\n<li><code>connection_string</code> \u2013 Connection string.</li>\n<li><code>invalidate_query</code> \u2013 Query for checking the dictionary status. Optional parameter. Read more in the section <a href=\"#external_dicts_dict_lifetime/\">Updating dictionaries</a>.</li>\n</ul>\n<p>ClickHouse receives quoting symbols from ODBC-driver and quote all settings in queries to driver, so it's necessary to set table name accordingly to table name case in database.</p>\n<p>If you have a problems with encodings when using Oracle, see the corresponding <a href=\"#oracle-odbc-encodings\">FAQ</a> article.</p>\n<h4 id=\"known-vulnerability-of-the-odbc-dictionary-functionality\">Known vulnerability of the ODBC dictionary functionality<a class=\"headerlink\" href=\"#known-vulnerability-of-the-odbc-dictionary-functionality\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>When connecting to the database through the ODBC driver connection parameter <code>Servername</code> can be substituted. In this case values of <code>USERNAME</code> and <code>PASSWORD</code> from <code>odbc.ini</code> are sent to the remote server and can be compromised.</p>\n</div>\n<p><strong>Example of insecure use</strong></p>\n<p>Let's configure unixODBC for PostgreSQL. Content of <code>/etc/odbc.ini</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>[gregtest]\nDriver = /usr/lib/psqlodbca.so\nServername = localhost\nPORT = 5432\nDATABASE = test_db\n##OPTION = 3\nUSERNAME = test\nPASSWORD = test\n</code></pre></div>\n\n\n<p>If you then make a query such as</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">odbc</span><span class=\"p\">(</span><span class=\"s1\">&#39;DSN=gregtest;Servername=some-server.com&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;test_db&#39;</span><span class=\"p\">);</span>    \n</code></pre></div>\n\n\n<p>ODBC driver will send values of <code>USERNAME</code> and <code>PASSWORD</code> from <code>odbc.ini</code> to <code>some-server.com</code>.</p>\n<h4 id=\"example-of-connecting-postgresql\">Example of Connecting PostgreSQL<a class=\"headerlink\" href=\"#example-of-connecting-postgresql\" title=\"Permanent link\">&para;</a></h4>\n<p>Ubuntu OS.</p>\n<p>Installing unixODBC and the ODBC driver for PostgreSQL:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install -y unixodbc odbcinst odbc-postgresql\n</code></pre></div>\n\n\n<p>Configuring <code>/etc/odbc.ini</code> (or <code>~/.odbc.ini</code>):</p>\n<div class=\"codehilite\"><pre><span></span><code>    [DEFAULT]\n    Driver = myconnection\n\n    [myconnection]\n    Description         = PostgreSQL connection to my_db\n    Driver              = PostgreSQL Unicode\n    Database            = my_db\n    Servername          = 127.0.0.1\n    UserName            = username\n    Password            = password\n    Port                = 5432\n    Protocol            = 9.3\n    ReadOnly            = No\n    RowVersioning       = No\n    ShowSystemTables    = No\n    ConnSettings        =\n</code></pre></div>\n\n\n<p>The dictionary configuration in ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>table_name<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;source&gt;</span>\n            <span class=\"nt\">&lt;odbc&gt;</span>\n                <span class=\"c\">&lt;!-- You can specify the following parameters in connection_string: --&gt;</span>\n                <span class=\"c\">&lt;!-- DSN=myconnection;UID=username;PWD=password;HOST=127.0.0.1;PORT=5432;DATABASE=my_db --&gt;</span>\n                <span class=\"nt\">&lt;connection_string&gt;</span>DSN=myconnection<span class=\"nt\">&lt;/connection_string&gt;</span>\n                <span class=\"nt\">&lt;table&gt;</span>postgresql_table<span class=\"nt\">&lt;/table&gt;</span>\n            <span class=\"nt\">&lt;/odbc&gt;</span>\n        <span class=\"nt\">&lt;/source&gt;</span>\n        <span class=\"nt\">&lt;lifetime&gt;</span>\n            <span class=\"nt\">&lt;min&gt;</span>300<span class=\"nt\">&lt;/min&gt;</span>\n            <span class=\"nt\">&lt;max&gt;</span>360<span class=\"nt\">&lt;/max&gt;</span>\n        <span class=\"nt\">&lt;/lifetime&gt;</span>\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;hashed/&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n        <span class=\"nt\">&lt;struc");
            
            document.write("ture&gt;</span>\n            <span class=\"nt\">&lt;id&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>id<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;/id&gt;</span>\n            <span class=\"nt\">&lt;attribute&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>some_column<span class=\"nt\">&lt;/name&gt;</span>\n                <span class=\"nt\">&lt;type&gt;</span>UInt64<span class=\"nt\">&lt;/type&gt;</span>\n                <span class=\"nt\">&lt;null_value&gt;</span>0<span class=\"nt\">&lt;/null_value&gt;</span>\n            <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;/structure&gt;</span>\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>You may need to edit <code>odbc.ini</code> to specify the full path to the library with the driver <code>DRIVER=/usr/local/lib/psqlodbcw.so</code>.</p>\n<h4 id=\"example-of-connecting-ms-sql-server\">Example of Connecting MS SQL Server<a class=\"headerlink\" href=\"#example-of-connecting-ms-sql-server\" title=\"Permanent link\">&para;</a></h4>\n<p>Ubuntu OS.</p>\n<p>Installing the driver: :</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install tdsodbc freetds-bin sqsh\n</code></pre></div>\n\n\n<p>Configuring the driver:</p>\n<div class=\"codehilite\"><pre><span></span><code>    $ cat /etc/freetds/freetds.conf\n    ...\n\n    <span class=\"o\">[</span>MSSQL<span class=\"o\">]</span>\n    <span class=\"nv\">host</span> <span class=\"o\">=</span> <span class=\"m\">192</span>.168.56.101\n    <span class=\"nv\">port</span> <span class=\"o\">=</span> <span class=\"m\">1433</span>\n    tds <span class=\"nv\">version</span> <span class=\"o\">=</span> <span class=\"m\">7</span>.0\n    client <span class=\"nv\">charset</span> <span class=\"o\">=</span> UTF-8\n\n    $ cat /etc/odbcinst.ini\n    ...\n\n    <span class=\"o\">[</span>FreeTDS<span class=\"o\">]</span>\n    <span class=\"nv\">Description</span>     <span class=\"o\">=</span> FreeTDS\n    <span class=\"nv\">Driver</span>          <span class=\"o\">=</span> /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so\n    <span class=\"nv\">Setup</span>           <span class=\"o\">=</span> /usr/lib/x86_64-linux-gnu/odbc/libtdsS.so\n    <span class=\"nv\">FileUsage</span>       <span class=\"o\">=</span> <span class=\"m\">1</span>\n    <span class=\"nv\">UsageCount</span>      <span class=\"o\">=</span> <span class=\"m\">5</span>\n\n    $ cat ~/.odbc.ini\n    ...\n\n    <span class=\"o\">[</span>MSSQL<span class=\"o\">]</span>\n    <span class=\"nv\">Description</span>     <span class=\"o\">=</span> FreeTDS\n    <span class=\"nv\">Driver</span>          <span class=\"o\">=</span> FreeTDS\n    <span class=\"nv\">Servername</span>      <span class=\"o\">=</span> MSSQL\n    <span class=\"nv\">Database</span>        <span class=\"o\">=</span> <span class=\"nb\">test</span>\n    <span class=\"nv\">UID</span>             <span class=\"o\">=</span> <span class=\"nb\">test</span>\n    <span class=\"nv\">PWD</span>             <span class=\"o\">=</span> <span class=\"nb\">test</span>\n    <span class=\"nv\">Port</span>            <span class=\"o\">=</span> <span class=\"m\">1433</span>\n</code></pre></div>\n\n\n<p>Configuring the dictionary in ClickHouse:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;dictionary&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>test<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;source&gt;</span>\n            <span class=\"nt\">&lt;odbc&gt;</span>\n                <span class=\"nt\">&lt;table&gt;</span>dict<span class=\"nt\">&lt;/table&gt;</span>\n                <span class=\"nt\">&lt;connection_string&gt;</span>DSN=MSSQL;UID=test;PWD=test<span class=\"nt\">&lt;/connection_string&gt;</span>\n            <span class=\"nt\">&lt;/odbc&gt;</span>\n        <span class=\"nt\">&lt;/source&gt;</span>\n\n        <span class=\"nt\">&lt;lifetime&gt;</span>\n            <span class=\"nt\">&lt;min&gt;</span>300<span class=\"nt\">&lt;/min&gt;</span>\n            <span class=\"nt\">&lt;max&gt;</span>360<span class=\"nt\">&lt;/max&gt;</span>\n        <span class=\"nt\">&lt;/lifetime&gt;</span>\n\n        <span class=\"nt\">&lt;layout&gt;</span>\n            <span class=\"nt\">&lt;flat</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/layout&gt;</span>\n\n        <span class=\"nt\">&lt;structure&gt;</span>\n            <span class=\"nt\">&lt;id&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>k<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;/id&gt;</span>\n            <span class=\"nt\">&lt;attribute&gt;</span>\n                <span class=\"nt\">&lt;name&gt;</span>s<span class=\"nt\">&lt;/name&gt;</span>\n                <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n                <span class=\"nt\">&lt;null_value&gt;&lt;/null_value&gt;</span>\n            <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;/structure&gt;</span>\n    <span class=\"nt\">&lt;/dictionary&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"dbms\">DBMS<a class=\"headerlink\" href=\"#dbms\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"dicts-external_dicts_dict_sources-mysql\">MySQL<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-mysql\" title=\"Permanent link\">&para;</a></h4>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n  <span class=\"nt\">&lt;mysql&gt;</span>\n      <span class=\"nt\">&lt;port&gt;</span>3306<span class=\"nt\">&lt;/port&gt;</span>\n      <span class=\"nt\">&lt;user&gt;</span>clickhouse<span class=\"nt\">&lt;/user&gt;</span>\n      <span class=\"nt\">&lt;password&gt;</span>qwerty<span class=\"nt\">&lt;/password&gt;</span>\n      <span class=\"nt\">&lt;replica&gt;</span>\n          <span class=\"nt\">&lt;host&gt;</span>example01-1<span class=\"nt\">&lt;/host&gt;</span>\n          <span class=\"nt\">&lt;priority&gt;</span>1<span class=\"nt\">&lt;/priority&gt;</span>\n      <span class=\"nt\">&lt;/replica&gt;</span>\n      <span class=\"nt\">&lt;replica&gt;</span>\n          <span class=\"nt\">&lt;host&gt;</span>example01-2<span class=\"nt\">&lt;/host&gt;</span>\n          <span class=\"nt\">&lt;priority&gt;</span>1<span class=\"nt\">&lt;/priority&gt;</span>\n      <span class=\"nt\">&lt;/replica&gt;</span>\n      <span class=\"nt\">&lt;db&gt;</span>db_name<span class=\"nt\">&lt;/db&gt;</span>\n      <span class=\"nt\">&lt;table&gt;</span>table_name<span class=\"nt\">&lt;/table&gt;</span>\n      <span class=\"nt\">&lt;where&gt;</span>id=10<span class=\"nt\">&lt;/where&gt;</span>\n      <span class=\"nt\">&lt;invalidate_query&gt;</span>SQL_QUERY<span class=\"nt\">&lt;/invalidate_query&gt;</span>\n  <span class=\"nt\">&lt;/mysql&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li>\n<p><code>port</code> \u2013 The port on the MySQL server. You can specify it for all replicas, or for each one individually (inside <code>&lt;replica&gt;</code>).</p>\n</li>\n<li>\n<p><code>user</code> \u2013 Name of the MySQL user. You can specify it for all replicas, or for each one individually (inside <code>&lt;replica&gt;</code>).</p>\n</li>\n<li>\n<p><code>password</code> \u2013 Password of the MySQL user. You can specify it for all replicas, or for each one individually (inside <code>&lt;replica&gt;</code>).</p>\n</li>\n<li>\n<p><code>replica</code> \u2013 Section of replica configurations. There can be multiple sections.</p>\n<ul>\n<li><code>replica/host</code> \u2013 The MySQL host.</li>\n</ul>\n<p>* <code>replica/priority</code> \u2013 The replica priority. When attempting to connect, ClickHouse traverses the replicas in order of priority. The lower the number, the higher the priority.</p>\n</li>\n<li>\n<p><code>db</code> \u2013 Name of the database.</p>\n</li>\n<li>\n<p><code>table</code> \u2013 Name of the table.</p>\n</li>\n<li>\n<p><code>where</code> \u2013 The selection criteria. Optional parameter.</p>\n</li>\n<li>\n<p><code>invalidate_query</code> \u2013 Query for checking the dictionary status. Optional parameter. Read more in the section <a href=\"#external_dicts_dict_lifetime/\">Updating dictionaries</a>.</p>\n</li>\n</ul>\n<p>MySQL can be connected on a local host via sockets. To do this, set <code>host</code> and <code>socket</code>.</p>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n  <span class=\"nt\">&lt;mysql&gt;</span>\n      <span class=\"nt\">&lt;host&gt;</span>localhost<span class=\"nt\">&lt;/host&gt;</span>\n      <span class=\"nt\">&lt;socket&gt;</span>/path/to/socket/file.sock<span class=\"nt\">&lt;/socket&gt;</span>\n      <span class=\"nt\">&lt;user&gt;</span>clickhouse<span class=\"nt\">&lt;/user&gt;</span>\n      <span class=\"nt\">&lt;password&gt;</span>qwerty<span class=\"nt\">&lt;/password&gt;</span>\n      <span class=\"nt\">&lt;db&gt;</span>db_name<span class=\"nt\">&lt;/db&gt;</span>\n      <span class=\"nt\">&lt;table&gt;</span>table_name<span class=\"nt\">&lt;/table&gt;</span>\n      <span class=\"nt\">&lt;where&gt;</span>id=10<span class=\"nt\">&lt;/where&gt;</span>\n      <span class=\"nt\">&lt;invalidate_query&gt;</span>SQL_QUERY<span class=\"nt\">&lt;/invalidate_query&gt;</span>\n  <span class=\"nt\">&lt;/mysql&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"dicts-external_dicts_dict_sources-clickhouse\">ClickHouse<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-clickhouse\" title=\"Permanent link\">&para;</a></h4>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;clickhouse&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example01-01-1<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n        <span class=\"nt\">&lt;user&gt;</span>default<span class=\"nt\">&lt;/user&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n        <span class=\"nt\">&lt;db&gt;</span>default<span class=\"nt\">&lt;/db&gt;</span>\n        <span class=\"nt\">&lt;table&gt;</span>ids<span class=\"nt\">&lt;/table&gt;</span>\n        <span class=\"nt\">&lt;where&gt;</span>id=10<span class=\"nt\">&lt;/where&gt;</span>\n    <span class=\"nt\">&lt;/clickhouse&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</");
            
            document.write("span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>host</code> \u2013 The ClickHouse host. If it is a local host, the query is processed without any network activity. To improve fault tolerance, you can create a <a href=\"#../../operations/table_engines/distributed/\">Distributed</a> table and enter it in subsequent configurations.</li>\n<li><code>port</code> \u2013 The port on the ClickHouse server.</li>\n<li><code>user</code> \u2013 Name of the ClickHouse user.</li>\n<li><code>password</code> \u2013 Password of the ClickHouse user.</li>\n<li><code>db</code> \u2013 Name of the database.</li>\n<li><code>table</code> \u2013 Name of the table.</li>\n<li><code>where</code> \u2013 The selection criteria. May be omitted.</li>\n<li><code>invalidate_query</code> \u2013 Query for checking the dictionary status. Optional parameter. Read more in the section <a href=\"#external_dicts_dict_lifetime/\">Updating dictionaries</a>.</li>\n</ul>\n<h4 id=\"dicts-external_dicts_dict_sources-mongodb\">MongoDB<a class=\"headerlink\" href=\"#dicts-external_dicts_dict_sources-mongodb\" title=\"Permanent link\">&para;</a></h4>\n<p>Example of settings:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;source&gt;</span>\n    <span class=\"nt\">&lt;mongodb&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>localhost<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>27017<span class=\"nt\">&lt;/port&gt;</span>\n        <span class=\"nt\">&lt;user&gt;&lt;/user&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n        <span class=\"nt\">&lt;db&gt;</span>test<span class=\"nt\">&lt;/db&gt;</span>\n        <span class=\"nt\">&lt;collection&gt;</span>dictionary_source<span class=\"nt\">&lt;/collection&gt;</span>\n    <span class=\"nt\">&lt;/mongodb&gt;</span>\n<span class=\"nt\">&lt;/source&gt;</span>\n</code></pre></div>\n\n\n<p>Setting fields:</p>\n<ul>\n<li><code>host</code> \u2013 The MongoDB host.</li>\n<li><code>port</code> \u2013 The port on the MongoDB server.</li>\n<li><code>user</code> \u2013 Name of the MongoDB user.</li>\n<li><code>password</code> \u2013 Password of the MongoDB user.</li>\n<li><code>db</code> \u2013 Name of the database.</li>\n<li><code>collection</code> \u2013 Name of the collection.</li>\n</ul>\n<p><a name=\"../../../dicts/external_dicts_dict_structure/\"></a><a name=\"../../dicts/external_dicts_dict_structure/\"></a><a name=\"../dicts/external_dicts_dict_structure/\"></a><a name=\"../../../../../dicts/external_dicts_dict_structure/\"></a><a name=\"../../../../dicts/external_dicts_dict_structure/\"></a><a name=\"../../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"../../../../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"external_dicts_dict_structure/\"></a><a name=\"../../../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"../../../../../../dicts/external_dicts_dict_structure/\"></a><a name=\"../../../../../query_language/dicts/external_dicts_dict_structure/\"></a><a name=\"dicts/external_dicts_dict_structure/\"></a></p>\n<h2 id=\"dictionary-key-and-fields\">Dictionary Key and Fields<a class=\"headerlink\" href=\"#dictionary-key-and-fields\" title=\"Permanent link\">&para;</a></h2>\n<p>The <code>&lt;structure&gt;</code> clause describes the dictionary key and fields available for queries.</p>\n<p>Overall structure:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionary&gt;</span>\n    <span class=\"nt\">&lt;structure&gt;</span>\n        <span class=\"nt\">&lt;id&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>Id<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;/id&gt;</span>\n\n        <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"c\">&lt;!-- Attribute parameters --&gt;</span>\n        <span class=\"nt\">&lt;/attribute&gt;</span>\n\n        ...\n\n    <span class=\"nt\">&lt;/structure&gt;</span>\n<span class=\"nt\">&lt;/dictionary&gt;</span>\n</code></pre></div>\n\n\n<p>Columns are described in the structure:</p>\n<ul>\n<li><code>&lt;id&gt;</code> \u2014 <a href=\"#ext_dict_structure-key\">Key column</a>.</li>\n<li><code>&lt;attribute&gt;</code> \u2014 <a href=\"#ext_dict_structure-attributes\">Data column</a>. There can be a large number of columns.</li>\n</ul>\n<h3 id=\"ext_dict_structure-key\">Key<a class=\"headerlink\" href=\"#ext_dict_structure-key\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports the following types of keys:</p>\n<ul>\n<li>Numeric key. UInt64. Defined in the tag <code>&lt;id&gt;</code> .</li>\n<li>Composite key. Set of values of different types. Defined in the tag <code>&lt;key&gt;</code> .</li>\n</ul>\n<p>A structure can contain either <code>&lt;id&gt;</code> or <code>&lt;key&gt;</code> .</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>The key doesn't need to be defined separately in attributes.</p>\n</div>\n<h4 id=\"numeric-key\">Numeric Key<a class=\"headerlink\" href=\"#numeric-key\" title=\"Permanent link\">&para;</a></h4>\n<p>Type: <code>UInt64</code>.</p>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;id&gt;</span>\n    <span class=\"nt\">&lt;name&gt;</span>Id<span class=\"nt\">&lt;/name&gt;</span>\n<span class=\"nt\">&lt;/id&gt;</span>\n</code></pre></div>\n\n\n<p>Configuration fields:</p>\n<ul>\n<li><code>name</code> \u2013 The name of the column with keys.</li>\n</ul>\n<h4 id=\"composite-key\">Composite Key<a class=\"headerlink\" href=\"#composite-key\" title=\"Permanent link\">&para;</a></h4>\n<p>The key can be a <code>tuple</code> from any types of fields. The <a href=\"#external_dicts_dict_layout/\">layout</a> in this case must be <code>complex_key_hashed</code> or <code>complex_key_cache</code>.</p>\n<div class=\"admonition tip\">\n<p class=\"admonition-title\">Tip</p>\n<p>A composite key can consist of a single element. This makes it possible to use a string as the key, for instance.</p>\n</div>\n<p>The key structure is set in the element <code>&lt;key&gt;</code>. Key fields are specified in the same format as the dictionary <a href=\"#external_dicts_dict_structure/\">attributes</a>. Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;structure&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>\n        <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>field1<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>String<span class=\"nt\">&lt;/type&gt;</span>\n        <span class=\"nt\">&lt;/attribute&gt;</span>\n        <span class=\"nt\">&lt;attribute&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>field2<span class=\"nt\">&lt;/name&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>UInt32<span class=\"nt\">&lt;/type&gt;</span>\n        <span class=\"nt\">&lt;/attribute&gt;</span>\n        ...\n    <span class=\"nt\">&lt;/key&gt;</span>\n...\n</code></pre></div>\n\n\n<p>For a query to the <code>dictGet*</code> function, a tuple is passed as the key. Example: <code>dictGetString('dict_name', 'attr_name', tuple('string for field1', num_for_field2))</code>.</p>\n<h3 id=\"ext_dict_structure-attributes\">Attributes<a class=\"headerlink\" href=\"#ext_dict_structure-attributes\" title=\"Permanent link\">&para;</a></h3>\n<p>Configuration example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;structure&gt;</span>\n    ...\n    <span class=\"nt\">&lt;attribute&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>Name<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;type&gt;</span>ClickHouseDataType<span class=\"nt\">&lt;/type&gt;</span>\n        <span class=\"nt\">&lt;null_value&gt;&lt;/null_value&gt;</span>\n        <span class=\"nt\">&lt;expression&gt;</span>rand64()<span class=\"nt\">&lt;/expression&gt;</span>\n        <span class=\"nt\">&lt;hierarchical&gt;</span>true<span class=\"nt\">&lt;/hierarchical&gt;</span>\n        <span class=\"nt\">&lt;injective&gt;</span>true<span class=\"nt\">&lt;/injective&gt;</span>\n        <span class=\"nt\">&lt;is_object_id&gt;</span>true<span class=\"nt\">&lt;/is_object_id&gt;</span>\n    <span class=\"nt\">&lt;/attribute&gt;</span>\n<span class=\"nt\">&lt;/structure&gt;</span>\n</code></pre></div>\n\n\n<p>Configuration fields:</p>\n<p>Tag | Description | Required<br />\n<a name=\"../../../../../dicts/internal_dicts/\"></a><a name=\"../../query_language/dicts/internal_dicts/\"></a><a name=\"../query_language/dicts/internal_dicts/\"></a><a name=\"../../../../dicts/internal_dicts/\"></a><a name=\"internal_dicts/\"></a><a name=\"../../../../query_language/dicts/internal_dicts/\"></a><a name=\"../dicts/internal_dicts/\"></a><a name=\"../../dicts/internal_dicts/\"></a><a name=\"../../../../../query_language/dicts/internal_dicts/\"></a><a name=\"../../../query_language/dicts/internal_dicts/\"></a><a name=\"dicts/internal_dicts/\"></a><a name=\"query_language/dicts/internal_dicts/\"></a><a name=\"../../../dicts/internal_dicts/\"></a><a name=\"../../../../../../dicts/internal_dicts/\"></a></p>\n<h2 id=\"internal_dicts\">Internal dictionaries<a class=\"headerlink\" href=\"#internal_dicts\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse contains a built-in feature for working with a geobase.</p>\n<p>This allows you to:</p>\n<ul>\n<li>Use a region's ID to get its name in the desired language.</li>\n<li>Use a region's ID to get the ID of a city, area, federal district, country, or continent.</li>\n<li>Check whether a region is part of another region.</li>\n<li>Get a chain of parent regions.</li>\n</ul>\n<p>All the functions support \"translocality,\" the ability to simultaneously use different perspectives on region ownership. For more information, see the section \"Functions for working with Yandex.Metrica dictionaries\".</p>\n<p>The internal dictionaries are disabled in the default package.<br />\nTo enable them, uncomment the parameters <code>path_to_regions_hierarchy_file</code> and <code>path_to_regions_names_files</code> in the server configuration file.</p>\n<p>The geobase is loaded from text files.</p>\n<p>Place the <code>regions_hierarchy*.txt</code> files into the <code>path_to_regions_hierarchy_file</code> directory. This configuration parameter must contain the path to the <code>regions_hierarchy.txt</code> file (the default regional hierar");
            
            document.write("chy), and the other files (<code>regions_hierarchy_ua.txt</code>) must be located in the same directory.</p>\n<p>Put the <code>regions_names_*.txt</code> files in the <code>path_to_regions_names_files</code> directory.</p>\n<p>You can also create these files yourself. The file format is as follows:</p>\n<p><code>regions_hierarchy*.txt</code>: TabSeparated (no header), columns:</p>\n<ul>\n<li>region ID (<code>UInt32</code>)</li>\n<li>parent region ID (<code>UInt32</code>)</li>\n<li>region type (<code>UInt8</code>): 1 - continent, 3 - country, 4 - federal district, 5 - region, 6 - city; other types don't have values</li>\n<li>population (<code>UInt32</code>) \u2014 optional column</li>\n</ul>\n<p><code>regions_names_*.txt</code>: TabSeparated (no header), columns:</p>\n<ul>\n<li>region ID (<code>UInt32</code>)</li>\n<li>region name (<code>String</code>) \u2014 Can't contain tabs or line feeds, even escaped ones.</li>\n</ul>\n<p>A flat array is used for storing in RAM. For this reason, IDs shouldn't be more than a million.</p>\n<p>Dictionaries can be updated without restarting the server. However, the set of available dictionaries is not updated.<br />\nFor updates, the file modification times are checked. If a file has changed, the dictionary is updated.<br />\nThe interval to check for changes is configured in the <code>builtin_dictionaries_reload_interval</code> parameter.<br />\nDictionary updates (other than loading at first use) do not block queries. During updates, queries use the old versions of dictionaries. If an error occurs during an update, the error is written to the server log, and queries continue using the old version of dictionaries.</p>\n<p>We recommend periodically updating the dictionaries with the geobase. During an update, generate new files and write them to a separate location. When everything is ready, rename them to the files used by the server.</p>\n<p>There are also functions for working with OS identifiers and Yandex.Metrica search engines, but they shouldn't be used.</p>\n<p><a name=\"../../query_language/operators/\"></a><a name=\"query_language/operators/\"></a><a name=\"../../../../../query_language/operators/\"></a><a name=\"../../../../query_language/operators/\"></a><a name=\"../../../query_language/operators/\"></a><a name=\"../query_language/operators/\"></a><a name=\"operators/\"></a></p>\n<h2 id=\"operators\">Operators<a class=\"headerlink\" href=\"#operators\" title=\"Permanent link\">&para;</a></h2>\n<p>All operators are transformed to the corresponding functions at the query parsing stage, in accordance with their precedence and associativity.<br />\nGroups of operators are listed in order of priority (the higher it is in the list, the earlier the operator is connected to its arguments).</p>\n<h3 id=\"access-operators\">Access Operators<a class=\"headerlink\" href=\"#access-operators\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a[N]</code> Access to an element of an array; <code>arrayElement(a, N) function</code>.</p>\n<p><code>a.N</code> \u2013 Access to a tuble element; <code>tupleElement(a, N)</code> function.</p>\n<h3 id=\"numeric-negation-operator\">Numeric Negation Operator<a class=\"headerlink\" href=\"#numeric-negation-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>-a</code>  \u2013 The <code>negate (a)</code> function.</p>\n<h3 id=\"multiplication-and-division-operators\">Multiplication and Division Operators<a class=\"headerlink\" href=\"#multiplication-and-division-operators\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a * b</code>  \u2013 The <code>multiply (a, b) function.</code></p>\n<p><code>a / b</code>  \u2013 The <code>divide(a, b) function.</code></p>\n<p><code>a % b</code> \u2013 The <code>modulo(a, b) function.</code></p>\n<h3 id=\"addition-and-subtraction-operators\">Addition and Subtraction Operators<a class=\"headerlink\" href=\"#addition-and-subtraction-operators\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a + b</code> \u2013 The <code>plus(a, b) function.</code></p>\n<p><code>a - b</code>  \u2013 The <code>minus(a, b) function.</code></p>\n<h3 id=\"comparison-operators\">Comparison Operators<a class=\"headerlink\" href=\"#comparison-operators\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a = b</code> \u2013 The <code>equals(a, b) function.</code></p>\n<p><code>a == b</code> \u2013 The <code>equals(a, b) function.</code></p>\n<p><code>a != b</code> \u2013 The <code>notEquals(a, b) function.</code></p>\n<p><code>a &lt;&gt; b</code> \u2013 The <code>notEquals(a, b) function.</code></p>\n<p><code>a &lt;= b</code> \u2013 The <code>lessOrEquals(a, b) function.</code></p>\n<p><code>a &gt;= b</code> \u2013 The <code>greaterOrEquals(a, b) function.</code></p>\n<p><code>a &lt; b</code> \u2013 The <code>less(a, b) function.</code></p>\n<p><code>a &gt; b</code> \u2013 The <code>greater(a, b) function.</code></p>\n<p><code>a LIKE s</code> \u2013 The <code>like(a, b) function.</code></p>\n<p><code>a NOT LIKE s</code> \u2013 The <code>notLike(a, b) function.</code></p>\n<p><code>a BETWEEN b AND c</code> \u2013 The same as <code>a &gt;= b AND a &lt;= c.</code></p>\n<p><code>a NOT BETWEEN b AND c</code> \u2013 The same as <code>a &lt; b OR a &gt; c.</code></p>\n<h3 id=\"operators-for-working-with-data-sets\">Operators for Working With Data Sets<a class=\"headerlink\" href=\"#operators-for-working-with-data-sets\" title=\"Permanent link\">&para;</a></h3>\n<p><em>See the section <a href=\"#select-in-operators\">IN operators</a>.</em></p>\n<p><code>a IN ...</code> \u2013 The <code>in(a, b) function</code></p>\n<p><code>a NOT IN ...</code> \u2013 The <code>notIn(a, b) function.</code></p>\n<p><code>a GLOBAL IN ...</code> \u2013 The <code>globalIn(a, b) function.</code></p>\n<p><code>a GLOBAL NOT IN ...</code> \u2013 The <code>globalNotIn(a, b) function.</code></p>\n<h3 id=\"operators-datetime\">Operator for Working With Dates and Times<a class=\"headerlink\" href=\"#operators-datetime\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">EXTRACT</span><span class=\"p\">(</span><span class=\"n\">part</span> <span class=\"k\">FROM</span> <span class=\"nb\">date</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p>Extracts a part from a given date. For example, you can retrieve a month from a given date, or a second from a time.</p>\n<p>The <code>part</code> parameter specifies which part of the date to retrieve. The following values are available:</p>\n<ul>\n<li><code>DAY</code> \u2014 The day of the month. Possible values: 1\u201331.</li>\n<li><code>MONTH</code> \u2014 The number of a month. Possible values: 1\u201312.</li>\n<li><code>YEAR</code> \u2014 The year.</li>\n<li><code>SECOND</code> \u2014 The second. Possible values: 0\u201359.</li>\n<li><code>MINUTE</code> \u2014 The minute. Possible values: 0\u201359.</li>\n<li><code>HOUR</code> \u2014 The hour. Possible values: 0\u201323.</li>\n</ul>\n<p>The <code>part</code> parameter is case-insensitive.</p>\n<p>The <code>date</code> parameter specifies the date or the time to process. Either <a href=\"#../data_types/date/\">Date</a> or <a href=\"#../data_types/datetime/\">DateTime</a> type is supported.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"k\">EXTRACT</span><span class=\"p\">(</span><span class=\"k\">DAY</span> <span class=\"k\">FROM</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2017-06-15&#39;</span><span class=\"p\">));</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">EXTRACT</span><span class=\"p\">(</span><span class=\"k\">MONTH</span> <span class=\"k\">FROM</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2017-06-15&#39;</span><span class=\"p\">));</span>\n<span class=\"k\">SELECT</span> <span class=\"k\">EXTRACT</span><span class=\"p\">(</span><span class=\"k\">YEAR</span> <span class=\"k\">FROM</span> <span class=\"n\">toDate</span><span class=\"p\">(</span><span class=\"s1\">&#39;2017-06-15&#39;</span><span class=\"p\">));</span>\n</code></pre></div>\n\n\n<p>In the following example we create a table and insert into it a value with the <code>DateTime</code> type.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">Orders</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">OrderId</span> <span class=\"n\">UInt64</span><span class=\"p\">,</span>\n    <span class=\"n\">OrderName</span> <span class=\"n\">String</span><span class=\"p\">,</span>\n    <span class=\"n\">OrderDate</span> <span class=\"n\">DateTime</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">Log</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">Orders</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Jarlsberg Cheese&#39;</span><span class=\"p\">,</span> <span class=\"n\">toDateTime</span><span class=\"p\">(</span><span class=\"s1\">&#39;2008-10-11 13:23:44&#39;</span><span class=\"p\">));</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">toYear</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderYear</span><span class=\"p\">,</span>\n    <span class=\"n\">toMonth</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderMonth</span><span class=\"p\">,</span>\n    <span class=\"n\">toDayOfMonth</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderDay</span><span class=\"p\">,</span>\n    <span class=\"n\">toHour</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderHour</span><span class=\"p\">,</span>\n    <span class=\"n\">toMinute</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">OrderMinute</span><span class=\"p\">,</span>\n    <span class=\"n\">toSecond</span><span class=\"p\">(</span><span class=\"n\">OrderDate</span><span class=\"p\">)</span> <span class=\"k\">");
            
            document.write("AS</span> <span class=\"n\">OrderSecond</span>\n<span class=\"k\">FROM</span> <span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">Orders</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500OrderYear\u2500\u252c\u2500OrderMonth\u2500\u252c\u2500OrderDay\u2500\u252c\u2500OrderHour\u2500\u252c\u2500OrderMinute\u2500\u252c\u2500OrderSecond\u2500\u2510\n\u2502      2008 \u2502         10 \u2502       11 \u2502        13 \u2502          23 \u2502          44 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>You can see more examples in <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/tests/queries/0_stateless/00619_extract.sql\" rel=\"external nofollow noreferrer\">tests</a>.</p>\n<h3 id=\"logical-negation-operator\">Logical Negation Operator<a class=\"headerlink\" href=\"#logical-negation-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>NOT a</code> The <code>not(a) function.</code></p>\n<h3 id=\"logical-and-operator\">Logical AND Operator<a class=\"headerlink\" href=\"#logical-and-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a AND b</code> \u2013 The<code>and(a, b) function.</code></p>\n<h3 id=\"logical-or-operator\">Logical OR Operator<a class=\"headerlink\" href=\"#logical-or-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a OR b</code> \u2013 The <code>or(a, b) function.</code></p>\n<h3 id=\"conditional-operator\">Conditional Operator<a class=\"headerlink\" href=\"#conditional-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>a ? b : c</code> \u2013 The <code>if(a, b, c) function.</code></p>\n<p>Note:</p>\n<p>The conditional operator calculates the values of b and c, then checks whether condition a is met, and then returns the corresponding value. If <code>b</code> or <code>C</code> is an <a href=\"#functions_arrayjoin\">arrayJoin()</a> function, each row will be replicated regardless of the \"a\" condition.</p>\n<h3 id=\"operator_case\">Conditional Expression<a class=\"headerlink\" href=\"#operator_case\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CASE</span> <span class=\"p\">[</span><span class=\"n\">x</span><span class=\"p\">]</span>\n    <span class=\"k\">WHEN</span> <span class=\"n\">a</span> <span class=\"k\">THEN</span> <span class=\"n\">b</span>\n    <span class=\"p\">[</span><span class=\"k\">WHEN</span> <span class=\"p\">...</span> <span class=\"k\">THEN</span> <span class=\"p\">...]</span>\n    <span class=\"p\">[</span><span class=\"k\">ELSE</span> <span class=\"k\">c</span><span class=\"p\">]</span>\n<span class=\"k\">END</span>\n</code></pre></div>\n\n\n<p>If <code>x</code> is specified, then <code>transform(x, [a, ...], [b, ...], c)</code> function is used. Otherwise \u2013 <code>multiIf(a, b, ..., c)</code>.</p>\n<p>If there is no <code>ELSE c</code> clause in the expression, the default value is <code>NULL</code>.</p>\n<p>The <code>transform</code> function does not work with <code>NULL</code>.</p>\n<h3 id=\"concatenation-operator\">Concatenation Operator<a class=\"headerlink\" href=\"#concatenation-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>s1 || s2</code> \u2013 The <code>concat(s1, s2) function.</code></p>\n<h3 id=\"lambda-creation-operator\">Lambda Creation Operator<a class=\"headerlink\" href=\"#lambda-creation-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>x -&gt; expr</code> \u2013 The <code>lambda(x, expr) function.</code></p>\n<p>The following operators do not have a priority, since they are brackets:</p>\n<h3 id=\"array-creation-operator\">Array Creation Operator<a class=\"headerlink\" href=\"#array-creation-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>[x1, ...]</code> \u2013 The <code>array(x1, ...) function.</code></p>\n<h3 id=\"tuple-creation-operator\">Tuple Creation Operator<a class=\"headerlink\" href=\"#tuple-creation-operator\" title=\"Permanent link\">&para;</a></h3>\n<p><code>(x1, x2, ...)</code> \u2013 The <code>tuple(x2, x2, ...) function.</code></p>\n<h3 id=\"associativity\">Associativity<a class=\"headerlink\" href=\"#associativity\" title=\"Permanent link\">&para;</a></h3>\n<p>All binary operators have left associativity. For example, <code>1 + 2 + 3</code> is transformed to <code>plus(plus(1, 2), 3)</code>.<br />\nSometimes this doesn't work the way you expect. For example, <code>SELECT 4 &gt; 2 &gt; 3</code> will result in 0.</p>\n<p>For efficiency, the <code>and</code> and <code>or</code> functions accept any number of arguments. The corresponding chains of <code>AND</code> and <code>OR</code> operators are transformed to a single call of these functions.</p>\n<h3 id=\"checking-for-null\">Checking for <code>NULL</code><a class=\"headerlink\" href=\"#checking-for-null\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse supports the <code>IS NULL</code> and <code>IS NOT NULL</code> operators.</p>\n<h4 id=\"operator-is-null\">IS NULL<a class=\"headerlink\" href=\"#operator-is-null\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>For <a href=\"#../data_types/nullable/\">Nullable</a> type values, the <code>IS NULL</code> operator returns:<ul>\n<li><code>1</code>, if the value is <code>NULL</code>.</li>\n<li><code>0</code> otherwise.</li>\n</ul>\n</li>\n<li>For other values, the <code>IS NULL</code> operator always returns <code>0</code>.</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">x</span><span class=\"o\">+</span><span class=\"mi\">100</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"k\">WHERE</span> <span class=\"n\">y</span> <span class=\"k\">IS</span> <span class=\"k\">NULL</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500plus(x, 100)\u2500\u2510\n\u2502          101 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h4 id=\"is-not-null\">IS NOT NULL<a class=\"headerlink\" href=\"#is-not-null\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>For <a href=\"#../data_types/nullable/\">Nullable</a> type values, the <code>IS NOT NULL</code> operator returns:<ul>\n<li><code>0</code>, if the value is <code>NULL</code>.</li>\n<li><code>1</code> otherwise.</li>\n</ul>\n</li>\n<li>For other values, the <code>IS NOT NULL</code> operator always returns <code>1</code>.</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">t_null</span> <span class=\"k\">WHERE</span> <span class=\"n\">y</span> <span class=\"k\">IS</span> <span class=\"k\">NOT</span> <span class=\"k\">NULL</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500x\u2500\u252c\u2500y\u2500\u2510\n\u2502 2 \u2502 3 \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><a name=\"syntax/\"></a><a name=\"query_language/syntax/\"></a><a name=\"../query_language/syntax/\"></a><a name=\"../../../../query_language/syntax/\"></a><a name=\"../../query_language/syntax/\"></a><a name=\"../../../query_language/syntax/\"></a><a name=\"../../../../../query_language/syntax/\"></a></p>\n<h2 id=\"syntax\">Syntax<a class=\"headerlink\" href=\"#syntax\" title=\"Permanent link\">&para;</a></h2>\n<p>There are two types of parsers in the system: the full SQL parser (a recursive descent parser), and the data format parser (a fast stream parser).<br />\nIn all cases except the <code>INSERT</code> query, only the full SQL parser is used.<br />\nThe <code>INSERT</code> query uses both parsers:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">t</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Hello, world&#39;</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;abc&#39;</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;def&#39;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The <code>INSERT INTO t VALUES</code> fragment is parsed by the full parser, and the data <code>(1, 'Hello, world'), (2, 'abc'), (3, 'def')</code> is parsed by the fast stream parser. You can also turn on the full parser for the data by using the <a href=\"#settings-input_format_values_interpret_expressions\">input_format_values_interpret_expressions</a> setting. When <code>input_format_values_interpret_expressions = 1</code>, ClickHouse first tries to parse values with the fast stream parser. If it fails, ClickHouse tries to use the full parser for the data, treating it like an SQL <a href=\"#syntax-expressions\">expression</a>.</p>\n<p>Data can have any format. When a query is received, the server calculates no more than <a href=\"#settings-max_query_size\">max_query_size</a> bytes of the request in RAM (by default, 1 MB), and the rest is stream parsed.<br />\nThis means the system doesn't have problems with large <code>INSERT</code> queries, like MySQL does.</p>\n<p>When using the <code>Values</code> format in an <code>INSERT</code> query, it may seem that data is parsed the same as expressions in a <code>SELECT</code> query, but this is not true. The <code>Values</code> format is much more limited.</p>\n<p>Next we will cover the full parser. For more information about format parsers, see the <a href=\"#../interfaces/formats/\">Formats</a> section.</p>\n<h3 id=\"spaces\">Spaces<a class=\"headerlink\" href=\"#spaces\" title=\"Permanent link\">&para;</a></h3>\n<p>There may be any number of space symbols between syntactical constructions (including the beginning and end of a query). Space symbols include the space, tab, line feed, CR, and form feed.</p>\n<h3 id=\"comments\">Comments<a class=\"headerlink\" href=\"#comments\" title=\"Permanent link\">&para;</a></h3>\n<p>SQL-style and C-style comments are supported.<br />\nSQL-style comments: from <code>--</code> to the end of the line. The space after <code>--</code> can be omitted.<br />\nComments in C-style: from <code>/*</code> to <code>*/</code>. These comments can be multiline. Spaces are not required here, either.</p>\n<h3 id=\"syntax-keywords\">Keywords<a class=\"headerlink\" href=\"#syntax-keywords\" title=\"Permanent link\">&para;</a></h3>\n<p>Keywords (such as <code>SELECT</code>) are not case-sensitive. Everything else (column names, functions, and so on), in contrast to standard SQL, is case-sensitive.</p>\n<p>Keywords are not reserved (they are just parsed as keywords in the corresponding con");
            
            document.write("text). If you use <a href=\"#syntax-identifiers\">identifiers</a> the same as the keywords, enclose them into quotes. For example, the query <code>SELECT \"FROM\" FROM table_name</code> is valid if the table <code>table_name</code> has column with the name <code>\"FROM\"</code>.</p>\n<h3 id=\"syntax-identifiers\">Identifiers<a class=\"headerlink\" href=\"#syntax-identifiers\" title=\"Permanent link\">&para;</a></h3>\n<p>Identifiers are:</p>\n<ul>\n<li>Cluster, database, table, partition and column names.</li>\n<li>Functions.</li>\n<li>Data types.</li>\n<li><a href=\"#syntax-expression_aliases\">Expression aliases</a>.</li>\n</ul>\n<p>Identifiers can be quoted or non-quoted. It is recommended to use non-quoted identifiers.</p>\n<p>Non-quoted identifiers must match the regex <code>^[a-zA-Z_][0-9a-zA-Z_]*$</code> and can not be equal to <a href=\"#syntax-keywords\">keywords</a>.  Examples: <code>x, _1, X_y__Z123_.</code></p>\n<p>If you want to use identifiers the same as keywords or you want to use other symbols in identifiers, quote it using double quotes or backticks, for example, <code>\"id\"</code>, <code>`id`</code>.</p>\n<h3 id=\"literals\">Literals<a class=\"headerlink\" href=\"#literals\" title=\"Permanent link\">&para;</a></h3>\n<p>There are: numeric, string, compound and <code>NULL</code> literals.</p>\n<h4 id=\"numeric\">Numeric<a class=\"headerlink\" href=\"#numeric\" title=\"Permanent link\">&para;</a></h4>\n<p>A numeric literal tries to be parsed:</p>\n<ul>\n<li>First as a 64-bit signed number, using the <a href=\"https://en.cppreference.com/w/cpp/string/byte/strtoul\" rel=\"external nofollow noreferrer\">strtoull</a> function.</li>\n<li>If unsuccessful, as a 64-bit unsigned number, using the <a href=\"https://en.cppreference.com/w/cpp/string/byte/strtol\" rel=\"external nofollow noreferrer\">strtoll</a> function.</li>\n<li>If unsuccessful, as a floating-point number using the <a href=\"https://en.cppreference.com/w/cpp/string/byte/strtof\" rel=\"external nofollow noreferrer\">strtod</a> function.</li>\n<li>Otherwise, an error is returned.</li>\n</ul>\n<p>The corresponding value will have the smallest type that the value fits in.<br />\nFor example, 1 is parsed as <code>UInt8</code>, but 256 is parsed as <code>UInt16</code>. For more information, see <a href=\"#../data_types/\">Data types</a>.</p>\n<p>Examples: <code>1</code>, <code>18446744073709551615</code>, <code>0xDEADBEEF</code>, <code>01</code>, <code>0.1</code>, <code>1e100</code>, <code>-1e-100</code>, <code>inf</code>, <code>nan</code>.</p>\n<h4 id=\"syntax-string-literal\">String<a class=\"headerlink\" href=\"#syntax-string-literal\" title=\"Permanent link\">&para;</a></h4>\n<p>Only string literals in single quotes are supported. The enclosed characters can be backslash-escaped. The following escape sequences have a corresponding special value: <code>\\b</code>, <code>\\f</code>, <code>\\r</code>, <code>\\n</code>, <code>\\t</code>, <code>\\0</code>, <code>\\a</code>, <code>\\v</code>, <code>\\xHH</code>. In all other cases, escape sequences in the format <code>\\c</code>, where <code>c</code> is any character, are converted to <code>c</code>. This means that you can use the sequences <code>\\'</code>and<code>\\\\</code>. The value will have the <a href=\"#../data_types/string/\">String</a> type.</p>\n<p>The minimum set of characters that you need to escape in string literals: <code>'</code> and <code>\\</code>. Single quote can be escaped with the single quote, literals <code>'It\\'s'</code> and <code>'It''s'</code> are equal.</p>\n<h4 id=\"compound\">Compound<a class=\"headerlink\" href=\"#compound\" title=\"Permanent link\">&para;</a></h4>\n<p>Constructions are supported for arrays: <code>[1, 2, 3]</code> and tuples: <code>(1, 'Hello, world!', 2)</code>..<br />\nActually, these are not literals, but expressions with the array creation operator and the tuple creation operator, respectively.<br />\nAn array must consist of at least one item, and a tuple must have at least two items.<br />\nTuples have a special purpose for use in the <code>IN</code> clause of a <code>SELECT</code> query. Tuples can be obtained as the result of a query, but they can't be saved to a database (with the exception of <a href=\"#../operations/table_engines/memory/\">Memory</a> tables).</p>\n<h4 id=\"null-literal\">NULL<a class=\"headerlink\" href=\"#null-literal\" title=\"Permanent link\">&para;</a></h4>\n<p>Indicates that the value is missing.</p>\n<p>In order to store <code>NULL</code> in a table field, it must be of the <a href=\"#../data_types/nullable/\">Nullable</a> type.</p>\n<p>Depending on the data format (input or output), <code>NULL</code> may have a different representation. For more information, see the documentation for <a href=\"#formats\">data formats</a>.</p>\n<p>There are many nuances to processing <code>NULL</code>. For example, if at least one of the arguments of a comparison operation is <code>NULL</code>, the result of this operation will also be <code>NULL</code>. The same is true for multiplication, addition, and other operations. For more information, read the documentation for each operation.</p>\n<p>In queries, you can check <code>NULL</code> using the <a href=\"#operator-is-null\">IS NULL</a> and <a href=\"#operators/\">IS NOT NULL</a> operators and the related functions <code>isNull</code> and <code>isNotNull</code>.</p>\n<h3 id=\"functions_1\">Functions<a class=\"headerlink\" href=\"#functions_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Functions are written like an identifier with a list of arguments (possibly empty) in brackets. In contrast to standard SQL, the brackets are required, even for an empty arguments list. Example: <code>now()</code>.<br />\nThere are regular and aggregate functions (see the section \"Aggregate functions\"). Some aggregate functions can contain two lists of arguments in brackets. Example: <code>quantile (0.9) (x)</code>. These aggregate functions are called \"parametric\" functions, and the arguments in the first list are called \"parameters\". The syntax of aggregate functions without parameters is the same as for regular functions.</p>\n<h3 id=\"operators_1\">Operators<a class=\"headerlink\" href=\"#operators_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Operators are converted to their corresponding functions during query parsing, taking their priority and associativity into account.<br />\nFor example, the expression <code>1 + 2 * 3 + 4</code> is transformed to <code>plus(plus(1, multiply(2, 3)), 4)</code>.</p>\n<h3 id=\"data-types-and-database-table-engines\">Data Types and Database Table Engines<a class=\"headerlink\" href=\"#data-types-and-database-table-engines\" title=\"Permanent link\">&para;</a></h3>\n<p>Data types and table engines in the <code>CREATE</code> query are written the same way as identifiers or functions. In other words, they may or may not contain an arguments list in brackets. For more information, see the sections \"Data types,\" \"Table engines,\" and \"CREATE\".</p>\n<h3 id=\"syntax-expression_aliases\">Expression Aliases<a class=\"headerlink\" href=\"#syntax-expression_aliases\" title=\"Permanent link\">&para;</a></h3>\n<p>An alias is a user-defined name for an expression in a query.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">expr</span> <span class=\"k\">AS</span> <span class=\"k\">alias</span>\n</code></pre></div>\n\n\n<ul>\n<li>\n<p><code>AS</code> \u2014 The keyword for defining aliases. You can define the alias for a table name or a column name in a <code>SELECT</code> clause without using the <code>AS</code> keyword.</p>\n<p>For example, <code>SELECT table_name_alias.column_name FROM table_name table_name_alias</code>.</p>\n<p>In the <a href=\"#type_conversion_function-cast\">CAST</a> function, the <code>AS</code> keyword has another meaning. See the description of the function.</p>\n</li>\n<li>\n<p><code>expr</code> \u2014 Any expression supported by ClickHouse.</p>\n<p>For example, <code>SELECT column_name * 2 AS double FROM some_table</code>.</p>\n</li>\n<li>\n<p><code>alias</code> \u2014 Name for <code>expr</code>. Aliases should comply with the <a href=\"#syntax-identifiers\">identifiers</a> syntax.</p>\n<p>For example, <code>SELECT \"table t\".column_name FROM table_name AS \"table t\"</code>.</p>\n</li>\n</ul>\n<h4 id=\"notes-on-usage\">Notes on Usage<a class=\"headerlink\" href=\"#notes-on-usage\" title=\"Permanent link\">&para;</a></h4>\n<p>Aliases are global for a query or subquery and you can define an alias in any part of a query for any expression. For example, <code>SELECT (1 AS n) + 2, n</code>.</p>\n<p>Aliases are not visible in subqueries and between subqueries. For example, while executing the query <code>SELECT (SELECT sum(b.a) + num FROM b) - a.a AS num FROM a</code> ClickHouse generates the exception <code>Unknown identifier: num</code>.</p>\n<p>If an alias is defined for the result columns in the <code>SELECT</code> clause of a subquery, these columns are visible in the outer query. For example, <code>SELECT n + m FROM (SELECT 1 AS n, 2 AS m)</code>.</p>\n<p>Be careful with aliases that are the same as column or table names. Let's consider the following example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"n\">t</span>\n<span class=\"p\">(</span>\n    <span class=\"n\">a</span> <span class=\"nb\">Int</span><span class=\"p\">,</span>\n    <span class=\"n\">b</span> <span class=\"nb\">Int</span>\n<span class=\"p\">)</span>\n<span class=\"n\">ENGINE</span> <span class=\"o\">=</span> <span class=\"n\">TinyLog</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"n\">argMax</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">),</span>\n    <span class=\"k\">sum</span><span class=\"p\">(</span><span class=\"n\">b</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">b</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Received exception from server (version 18.14.17):\nCode: 184. DB::Exception: Received from localhost:9000, 127.0.0.1. DB::Exception: Aggregate function sum(b) is found inside another aggregate function in query.\n</code></pre></div>\n\n\n<p>In this example, we declared table <code>t</code>");
            
            document.write(" with column <code>b</code>. Then, when selecting data, we defined the <code>sum(b) AS b</code> alias. As aliases are global, ClickHouse substituted the literal <code>b</code> in the expression <code>argMax(a, b)</code> with the expression <code>sum(b)</code>. This substitution caused the exception.</p>\n<h3 id=\"asterisk\">Asterisk<a class=\"headerlink\" href=\"#asterisk\" title=\"Permanent link\">&para;</a></h3>\n<p>In a <code>SELECT</code> query, an asterisk can replace the expression. For more information, see the section \"SELECT\".</p>\n<h3 id=\"syntax-expressions\">Expressions<a class=\"headerlink\" href=\"#syntax-expressions\" title=\"Permanent link\">&para;</a></h3>\n<p>An expression is a function, identifier, literal, application of an operator, expression in brackets, subquery, or asterisk. It can also contain an alias.<br />\nA list of expressions is one or more expressions separated by commas.<br />\nFunctions and operators, in turn, can have expressions as arguments.</p>\n<p><a name=\"../../../../operations/\"></a><a name=\"../../operations/\"></a><a name=\"operations/\"></a><a name=\"../../../operations/\"></a><a name=\"../operations/\"></a><a name=\"../../../../../operations/\"></a></p>\n<h2 id=\"operations\">Operations<a class=\"headerlink\" href=\"#operations\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse operations manual consists of the following major sections:</p>\n<ul>\n<li><a href=\"#requirements/\">Requirements</a></li>\n<li><a href=\"#monitoring/\">Monitoring</a></li>\n<li><a href=\"#troubleshooting/\">Troubleshooting</a></li>\n<li><a href=\"#tips/\">Usage Recommendations</a></li>\n<li><a href=\"#update/\">Update Procedure</a></li>\n<li><a href=\"#access_rights/\">Access Rights</a></li>\n<li><a href=\"#backup/\">Data Backup</a></li>\n<li><a href=\"#configuration_files/\">Configuration Files</a></li>\n<li><a href=\"#quotas/\">Quotas</a></li>\n<li><a href=\"#system_tables/\">System Tables</a></li>\n<li><a href=\"#server_settings/\">Server Configuration Parameters</a></li>\n<li><a href=\"#settings/\">Settings</a></li>\n<li><a href=\"#utils/\">Utilities</a></li>\n</ul>\n<p><a name=\"../../../operations/requirements/\"></a><a name=\"../../operations/requirements/\"></a><a name=\"../../../../operations/requirements/\"></a><a name=\"operations/requirements/\"></a><a name=\"../operations/requirements/\"></a><a name=\"requirements/\"></a><a name=\"../../../../../operations/requirements/\"></a></p>\n<h2 id=\"requirements\">Requirements<a class=\"headerlink\" href=\"#requirements\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"cpu_1\">CPU<a class=\"headerlink\" href=\"#cpu_1\" title=\"Permanent link\">&para;</a></h3>\n<p>For installation from prebuilt deb packages, use a CPU with x86_64 architecture and support for SSE 4.2 instructions. To run ClickHouse with processors that do not support SSE 4.2 or have AArch64 or PowerPC64LE architecture, you should build ClickHouse from sources.</p>\n<p>ClickHouse implements parallel data processing and uses all the hardware resources available. When choosing a processor, take into account that ClickHouse works more efficiently at configurations with a large number of cores but a lower clock rate than at configurations with fewer cores and a higher clock rate. For example, 16 cores with 2600 MHz is preferable to 8 cores with 3600 MHz.</p>\n<p>Use of <strong>Turbo Boost</strong> and <strong>hyper-threading</strong> technologies is recommended. It significantly improves performance with a typical load.</p>\n<h3 id=\"ram\">RAM<a class=\"headerlink\" href=\"#ram\" title=\"Permanent link\">&para;</a></h3>\n<p>We recommend to use a minimum of 4GB of RAM in order to perform non-trivial queries. The ClickHouse server can run with a much smaller amount of RAM, but it requires memory for processing queries.</p>\n<p>The required volume of RAM depends on:</p>\n<ul>\n<li>The complexity of queries.</li>\n<li>The amount of data that is processed in queries.</li>\n</ul>\n<p>To calculate the required volume of RAM, you should estimate the size of temporary data for <a href=\"#select-group-by-clause\">GROUP BY</a>, <a href=\"#select-distinct\">DISTINCT</a>, <a href=\"#select-join\">JOIN</a> and other operations you use.</p>\n<p>ClickHouse can use external memory for temporary data. See <a href=\"#select-group-by-in-external-memory\">GROUP BY in External Memory</a> for details.</p>\n<h3 id=\"swap-file\">Swap File<a class=\"headerlink\" href=\"#swap-file\" title=\"Permanent link\">&para;</a></h3>\n<p>Disable the swap file for production environments.</p>\n<h3 id=\"storage-subsystem\">Storage Subsystem<a class=\"headerlink\" href=\"#storage-subsystem\" title=\"Permanent link\">&para;</a></h3>\n<p>You need to have 2GB of free disk space to install ClickHouse.</p>\n<p>The volume of storage required for your data should be calculated separately. Assessment should include:</p>\n<ul>\n<li>\n<p>Estimation of the data volume.</p>\n<p>You can take a sample of the data and get the average size of a row from it. Then multiply the value by the number of rows you plan to store.</p>\n</li>\n<li>\n<p>The data compression coefficient.</p>\n<p>To estimate the data compression coefficient, load a sample of your data into ClickHouse and compare the actual size of the data with the size of the table stored. For example, clickstream data is usually compressed by 6-10 times.</p>\n</li>\n</ul>\n<p>To calculate the final volume of data to be stored, apply the compression coefficient to the estimated data volume. If you plan to store data in several replicas, then multiply the estimated volume by the number of replicas.</p>\n<h3 id=\"network\">Network<a class=\"headerlink\" href=\"#network\" title=\"Permanent link\">&para;</a></h3>\n<p>If possible, use networks of 10G or higher class.</p>\n<p>The network bandwidth is critical for processing distributed queries with a large amount of intermediate data. In addition, network speed affects replication processes.</p>\n<h3 id=\"software\">Software<a class=\"headerlink\" href=\"#software\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse is developed for the Linux family of operating systems. The recommended Linux distribution is Ubuntu. The <code>tzdata</code> package should be installed in the system.</p>\n<p>ClickHouse can also work in other operating system families. See details in the <a href=\"#../getting_started/\">Getting started</a> section of the documentation.<br />\n<a name=\"../../../operations/monitoring/\"></a><a name=\"../../../../operations/monitoring/\"></a><a name=\"../../../../../operations/monitoring/\"></a><a name=\"../operations/monitoring/\"></a><a name=\"operations/monitoring/\"></a><a name=\"../../operations/monitoring/\"></a><a name=\"monitoring/\"></a></p>\n<h2 id=\"monitoring\">Monitoring<a class=\"headerlink\" href=\"#monitoring\" title=\"Permanent link\">&para;</a></h2>\n<p>You can monitor:</p>\n<ul>\n<li>Utilization of hardware resources.</li>\n<li>ClickHouse server metrics.</li>\n</ul>\n<h3 id=\"resource-utilization\">Resource Utilization<a class=\"headerlink\" href=\"#resource-utilization\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse does not monitor the state of hardware resources by itself.</p>\n<p>It is highly recommended to set up monitoring for:</p>\n<ul>\n<li>\n<p>Load and temperature on processors.</p>\n<p>You can use <a href=\"https://en.wikipedia.org/wiki/Dmesg\" rel=\"external nofollow noreferrer\">dmesg</a>, <a href=\"https://www.linux.org/docs/man8/turbostat.html\" rel=\"external nofollow noreferrer\">turbostat</a> or other instruments.</p>\n</li>\n<li>\n<p>Utilization of storage system, RAM and network.</p>\n</li>\n</ul>\n<h3 id=\"clickhouse-server-metrics\">ClickHouse Server Metrics<a class=\"headerlink\" href=\"#clickhouse-server-metrics\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse server has embedded instruments for self-state monitoring.</p>\n<p>To track server events use server logs. See the <a href=\"#server_settings-logger\">logger</a> section of the configuration file.</p>\n<p>ClickHouse collects:</p>\n<ul>\n<li>Different metrics of how the server uses computational resources.</li>\n<li>Common statistics on query processing.</li>\n</ul>\n<p>You can find metrics in the <a href=\"#system_tables-metrics\">system.metrics</a>, <a href=\"#system_tables-events\">system.events</a>, and <a href=\"#system_tables-asynchronous_metrics\">system.asynchronous_metrics</a> tables.</p>\n<p>You can configure ClickHouse to export metrics to <a href=\"https://github.com/graphite-project\" rel=\"external nofollow noreferrer\">Graphite</a>. See the <a href=\"#server_settings-graphite\">Graphite section</a> in the ClickHouse server configuration file. Before configuring export of metrics, you should set up Graphite by following their official <a href=\"https://graphite.readthedocs.io/en/latest/install.html\" rel=\"external nofollow noreferrer\">guide</a>.</p>\n<p>Additionally, you can monitor server availability through the HTTP API. Send the <code>HTTP GET</code> request to <code>/</code>. If the server is available, it responds with <code>200 OK</code>.</p>\n<p>To monitor servers in a cluster configuration, you should set the <a href=\"#settings-max_replica_delay_for_distributed_queries\">max_replica_delay_for_distributed_queries</a> parameter and use the HTTP resource <code>/replicas-delay</code>. A request to <code>/replicas-delay</code> returns <code>200 OK</code> if the replica is available and is not delayed behind the other replicas. If a replica is delayed, it returns information about the gap.<br />\n<a name=\"troubleshooting/\"></a><a name=\"../operations/troubleshooting/\"></a><a name=\"../../operations/troubleshooting/\"></a><a name=\"operations/troubleshooting/\"></a><a name=\"../../../../../operations/troubleshooting/\"></a><a name=\"../../../operations/troubleshooting/\"></a><a name=\"../../../../operations/troubleshooting/\"></a></p>\n<h2 id=\"troubleshooting\">Troubleshooting<a class=\"headerlink\" href=\"#troubleshooting\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"#troubleshooting-installation-errors\">Installation</a></li>\n<li><a href=\"#troubleshooting-accepts-no-connections\">Connecting to the server</a></li>\n<li><a href=\"#troubleshooting-does-not-process-queries\">Query processing</a></li>\n<li><a href=\"#troubleshooting-too-slow\">Efficiency of query processing</a></li>\n</ul>\n<h3 id=\"troubleshooting-installation-errors\">Installation<a class=\"headerlink\" href=\"#troubleshooting-installation-errors\" title");
            
            document.write("=\"Permanent link\">&para;</a></h3>\n<h4 id=\"you-cannot-get-deb-packages-from-clickhouse-repository-with-apt-get\">You Cannot Get Deb Packages from ClickHouse Repository With apt-get<a class=\"headerlink\" href=\"#you-cannot-get-deb-packages-from-clickhouse-repository-with-apt-get\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Check firewall settings.</li>\n<li>If you cannot access the repository for any reason, download packages as described in the <a href=\"#../getting_started/\">Getting started</a> article and install them manually using the <code>sudo dpkg -i &lt;packages&gt;</code> command. You will also need the <code>tzdata</code> package.</li>\n</ul>\n<h3 id=\"troubleshooting-accepts-no-connections\">Connecting to the Server<a class=\"headerlink\" href=\"#troubleshooting-accepts-no-connections\" title=\"Permanent link\">&para;</a></h3>\n<p>Possible issues:</p>\n<ul>\n<li>The server is not running.</li>\n<li>Unexpected or wrong configuration parameters.</li>\n</ul>\n<h4 id=\"server-is-not-running\">Server Is Not Running<a class=\"headerlink\" href=\"#server-is-not-running\" title=\"Permanent link\">&para;</a></h4>\n<p><strong>Check if server is runnnig</strong></p>\n<p>Command:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo service clickhouse-server status\n</code></pre></div>\n\n\n<p>If the server is not running, start it with the command:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo service clickhouse-server start\n</code></pre></div>\n\n\n<p><strong>Check logs</strong></p>\n<p>The main log of <code>clickhouse-server</code> is in <code>/var/log/clickhouse-server/clickhouse-server.log</code> by default.</p>\n<p>If the server started successfully, you should see the strings:</p>\n<ul>\n<li><code>&lt;Information&gt; Application: starting up.</code> \u2014 Server started.</li>\n<li><code>&lt;Information&gt; Application: Ready for connections.</code> \u2014 Server is running and ready for connections.</li>\n</ul>\n<p>If <code>clickhouse-server</code> start failed with a configuration error, you should see the <code>&lt;Error&gt;</code> string with an error description. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code>2019.01.11 15:23:25.549505 [ 45 ] {} &lt;Error&gt; ExternalDictionaries: Failed reloading &#39;event2id&#39; external dictionary: Poco::Exception. Code: 1000, e.code() = 111, e.displayText() = Connection refused, e.what() = Connection refused\n</code></pre></div>\n\n\n<p>If you don't see an error at the end of the file, look through the entire file starting from the string:</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;Information&gt; Application: starting up.\n</code></pre></div>\n\n\n<p>If you try to start a second instance of <code>clickhouse-server</code> on the server, you see the following log:</p>\n<div class=\"codehilite\"><pre><span></span><code>2019.01.11 15:25:11.151730 [ 1 ] {} &lt;Information&gt; : Starting ClickHouse 19.1.0 with revision 54413\n2019.01.11 15:25:11.154578 [ 1 ] {} &lt;Information&gt; Application: starting up\n2019.01.11 15:25:11.156361 [ 1 ] {} &lt;Information&gt; StatusFile: Status file ./status already exists - unclean restart. Contents:\nPID: 8510\nStarted at: 2019-01-11 15:24:23\nRevision: 54413\n\n2019.01.11 15:25:11.156673 [ 1 ] {} &lt;Error&gt; Application: DB::Exception: Cannot lock file ./status. Another server instance in same directory is already running.\n2019.01.11 15:25:11.156682 [ 1 ] {} &lt;Information&gt; Application: shutting down\n2019.01.11 15:25:11.156686 [ 1 ] {} &lt;Debug&gt; Application: Uninitializing subsystem: Logging Subsystem\n2019.01.11 15:25:11.156716 [ 2 ] {} &lt;Information&gt; BaseDaemon: Stop SignalListener thread\n</code></pre></div>\n\n\n<p><strong>See system.d logs</strong></p>\n<p>If you don't find any useful information in <code>clickhouse-server</code> logs or there aren't any logs, you can view <code>system.d</code> logs using the command:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo journalctl -u clickhouse-server\n</code></pre></div>\n\n\n<p><strong>Start clickhouse-server in interactive mode</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo -u clickhouse /usr/bin/clickhouse-server --config-file /etc/clickhouse-server/config.xml\n</code></pre></div>\n\n\n<p>This command starts the server as an interactive app with standard parameters of the autostart script. In this mode <code>clickhouse-server</code> prints all the event messages in the console.</p>\n<h4 id=\"configuration-parameters\">Configuration Parameters<a class=\"headerlink\" href=\"#configuration-parameters\" title=\"Permanent link\">&para;</a></h4>\n<p>Check:</p>\n<ul>\n<li>\n<p>Docker settings.</p>\n<p>If you run ClickHouse in Docker in an IPv6 network, make sure that <code>network=host</code> is set.</p>\n</li>\n<li>\n<p>Endpoint settings.</p>\n<p>Check <a href=\"#server_settings-listen_host\">listen_host</a> and <a href=\"#server_settings-tcp_port\">tcp_port</a> settings.</p>\n<p>ClickHouse server accepts localhost connections only by default.</p>\n</li>\n<li>\n<p>HTTP protocol settings.</p>\n<p>Check protocol settings for the HTTP API.</p>\n</li>\n<li>\n<p>Secure connection settings.</p>\n<p>Check:</p>\n<ul>\n<li>The <a href=\"#server_settings-tcp_port_secure\">tcp_port_secure</a> setting.</li>\n<li>Settings for <a href=\"#server_settings-openssl\">SSL sertificates</a>.</li>\n</ul>\n<p>Use proper parameters while connecting. For example, use the <code>port_secure</code> parameter with <code>clickhouse_client</code>.</p>\n</li>\n<li>\n<p>User settings.</p>\n<p>You might be using the wrong user name or password.</p>\n</li>\n</ul>\n<h3 id=\"troubleshooting-does-not-process-queries\">Query Processing<a class=\"headerlink\" href=\"#troubleshooting-does-not-process-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>If ClickHouse is not able to process the query, it sends an error description to the client. In the <code>clickhouse-client</code> you get a description of the error in the console. If you are using the HTTP interface, ClickHouse sends the error description in the response body. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl <span class=\"s1\">&#39;http://localhost:8123/&#39;</span> --data-binary <span class=\"s2\">&quot;SELECT a&quot;</span>\nCode: <span class=\"m\">47</span>, e.displayText<span class=\"o\">()</span> <span class=\"o\">=</span> DB::Exception: Unknown identifier: a. Note that there are no tables <span class=\"o\">(</span>FROM clause<span class=\"o\">)</span> in your query, context: required_names: <span class=\"s1\">&#39;a&#39;</span> source_tables: table_aliases: private_aliases: column_aliases: public_columns: <span class=\"s1\">&#39;a&#39;</span> masked_columns: array_join_columns: source_columns: , e.what<span class=\"o\">()</span> <span class=\"o\">=</span> DB::Exception\n</code></pre></div>\n\n\n<p>If you start <code>clickhouse-client</code> with the <code>stack-trace</code> parameter, ClickHouse returns the server stack trace with the description of an error.</p>\n<p>You might see a message about a broken connection. In this case, you can repeat the query. If the connection breaks every time you perform the query, check the server logs for errors.</p>\n<h3 id=\"troubleshooting-too-slow\">Efficiency of Query Processing<a class=\"headerlink\" href=\"#troubleshooting-too-slow\" title=\"Permanent link\">&para;</a></h3>\n<p>If you see that ClickHouse is working too slowly, you need to profile the load on the server resources and network for your queries.</p>\n<p>You can use the clickhouse-benchmark utility to profile queries. It shows the number of queries processed per second, the number of rows processed per second, and percentiles of query processing times.<br />\n<a name=\"tips/\"></a><a name=\"../../operations/tips/\"></a><a name=\"../../../../../operations/tips/\"></a><a name=\"../../../../operations/tips/\"></a><a name=\"operations/tips/\"></a><a name=\"../operations/tips/\"></a><a name=\"../../../operations/tips/\"></a></p>\n<h2 id=\"usage-recommendations\">Usage Recommendations<a class=\"headerlink\" href=\"#usage-recommendations\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"cpu-scaling-governor\">CPU Scaling Governor<a class=\"headerlink\" href=\"#cpu-scaling-governor\" title=\"Permanent link\">&para;</a></h3>\n<p>Always use the <code>performance</code> scaling governor. The <code>on-demand</code> scaling governor works much worse with constantly high demand.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;performance&#39;</span> <span class=\"p\">|</span> sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor\n</code></pre></div>\n\n\n<h3 id=\"cpu-limitations\">CPU Limitations<a class=\"headerlink\" href=\"#cpu-limitations\" title=\"Permanent link\">&para;</a></h3>\n<p>Processors can overheat. Use <code>dmesg</code> to see if the CPU's clock rate was limited due to overheating.<br />\nThe restriction can also be set externally at the datacenter level. You can use <code>turbostat</code> to monitor it under a load.</p>\n<h3 id=\"ram_1\">RAM<a class=\"headerlink\" href=\"#ram_1\" title=\"Permanent link\">&para;</a></h3>\n<p>For small amounts of data (up to ~200 GB compressed), it is best to use as much memory as the volume of data.<br />\nFor large amounts of data and when processing interactive (online) queries, you should use a reasonable amount of RAM (128 GB or more) so the hot data subset will fit in the cache of pages.<br />\nEven for data volumes of ~50 TB per server, using 128 GB of RAM significantly improves query performance compared to 64 GB.</p>\n<p>Do not disable overcommit. The value <code>cat /proc/sys/vm/overcommit_memory</code> should be 0 or 1. Run</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"m\">0</span> <span class=\"p\">|</span> sudo tee /proc/sys/vm/overcommit_memory\n</code></pre></div>\n\n\n<h3 id=\"huge-pages\">Huge Pages<a class=\"headerlink\" href=\"#huge-pages\" title=\"Permanent link\">&para;</a></h3>\n<p>Always disable transparent huge pages. It interferes with memory allocators, which leads to significant performance degradation.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"s1\">&#39;never&#39;</span> <span class=\"p\">|</span> sudo tee /sys/kernel/mm/transparent_hugepage/enabled\n</code></pre></div>\n\n\n<p>Use <code");
            
            document.write(">perf top</code> to watch the time spent in the kernel for memory management.<br />\nPermanent huge pages also do not need to be allocated.</p>\n<h3 id=\"storage-subsystem_1\">Storage Subsystem<a class=\"headerlink\" href=\"#storage-subsystem_1\" title=\"Permanent link\">&para;</a></h3>\n<p>If your budget allows you to use SSD, use SSD.<br />\nIf not, use HDD. SATA HDDs 7200 RPM will do.</p>\n<p>Give preference to a lot of servers with local hard drives over a smaller number of servers with attached disk shelves.<br />\nBut for storing archives with rare queries, shelves will work.</p>\n<h3 id=\"raid\">RAID<a class=\"headerlink\" href=\"#raid\" title=\"Permanent link\">&para;</a></h3>\n<p>When using HDD, you can combine their RAID-10, RAID-5, RAID-6 or RAID-50.<br />\nFor Linux, software RAID is better (with <code>mdadm</code>). We don't recommend using LVM.<br />\nWhen creating RAID-10, select the <code>far</code> layout.<br />\nIf your budget allows, choose RAID-10.</p>\n<p>If you have more than 4 disks, use RAID-6 (preferred) or RAID-50, instead of RAID-5.<br />\nWhen using RAID-5, RAID-6 or RAID-50, always increase stripe_cache_size, since the default value is usually not the best choice.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> <span class=\"m\">4096</span> <span class=\"p\">|</span> sudo tee /sys/block/md2/md/stripe_cache_size\n</code></pre></div>\n\n\n<p>Calculate the exact number from the number of devices and the block size, using the formula: <code>2 * num_devices * chunk_size_in_bytes / 4096</code>.</p>\n<p>A block size of 1024 KB is sufficient for all RAID configurations.<br />\nNever set the block size too small or too large.</p>\n<p>You can use RAID-0 on SSD.<br />\nRegardless of RAID use, always use replication for data security.</p>\n<p>Enable NCQ with a long queue. For HDD, choose the CFQ scheduler, and for SSD, choose noop. Don't reduce the 'readahead' setting.<br />\nFor HDD, enable the write cache.</p>\n<h3 id=\"file-system\">File System<a class=\"headerlink\" href=\"#file-system\" title=\"Permanent link\">&para;</a></h3>\n<p>Ext4 is the most reliable option. Set the mount options <code>noatime, nobarrier</code>.<br />\nXFS is also suitable, but it hasn't been as thoroughly tested with ClickHouse.<br />\nMost other file systems should also work fine. File systems with delayed allocation work better.</p>\n<h3 id=\"linux-kernel\">Linux Kernel<a class=\"headerlink\" href=\"#linux-kernel\" title=\"Permanent link\">&para;</a></h3>\n<p>Don't use an outdated Linux kernel.</p>\n<h3 id=\"network_1\">Network<a class=\"headerlink\" href=\"#network_1\" title=\"Permanent link\">&para;</a></h3>\n<p>If you are using IPv6, increase the size of the route cache.<br />\nThe Linux kernel prior to 3.2 had a multitude of problems with IPv6 implementation.</p>\n<p>Use at least a 10 GB network, if possible. 1 Gb will also work, but it will be much worse for patching replicas with tens of terabytes of data, or for processing distributed queries with a large amount of intermediate data.</p>\n<h3 id=\"zookeeper\">ZooKeeper<a class=\"headerlink\" href=\"#zookeeper\" title=\"Permanent link\">&para;</a></h3>\n<p>You are probably already using ZooKeeper for other purposes. You can use the same installation of ZooKeeper, if it isn't already overloaded.</p>\n<p>It's best to use a fresh version of ZooKeeper \u2013 3.4.9 or later. The version in stable Linux distributions may be outdated.</p>\n<p>You should never use manually written scripts to transfer data between different ZooKeeper clusters, because the result will be incorrect for sequential nodes. Never use the \"zkcopy\" utility for the same reason: <a href=\"https://github.com/ksprojects/zkcopy/issues/15\">https://github.com/ksprojects/zkcopy/issues/15</a></p>\n<p>If you want to divide an existing ZooKeeper cluster into two, the correct way is to increase the number of its replicas and then reconfigure it as two independent clusters.</p>\n<p>Do not run ZooKeeper on the same servers as ClickHouse. Because ZooKeeper is very sensitive for latency and ClickHouse may utilize all available system resources.</p>\n<p>With the default settings, ZooKeeper is a time bomb:</p>\n<blockquote>\n<p>The ZooKeeper server won't delete files from old snapshots and logs when using the default configuration (see autopurge), and this is the responsibility of the operator.</p>\n</blockquote>\n<p>This bomb must be defused.</p>\n<p>The ZooKeeper (3.5.1) configuration below is used in the Yandex.Metrica production environment as of May 20, 2017:</p>\n<p>zoo.cfg:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">## http://hadoop.apache.org/zookeeper/docs/current/zookeeperAdmin.html</span>\n\n<span class=\"c1\">## The number of milliseconds of each tick</span>\n<span class=\"nv\">tickTime</span><span class=\"o\">=</span><span class=\"m\">2000</span>\n<span class=\"c1\">## The number of ticks that the initial</span>\n<span class=\"c1\">## synchronization phase can take</span>\n<span class=\"nv\">initLimit</span><span class=\"o\">=</span><span class=\"m\">30000</span>\n<span class=\"c1\">## The number of ticks that can pass between</span>\n<span class=\"c1\">## sending a request and getting an acknowledgement</span>\n<span class=\"nv\">syncLimit</span><span class=\"o\">=</span><span class=\"m\">10</span>\n\n<span class=\"nv\">maxClientCnxns</span><span class=\"o\">=</span><span class=\"m\">2000</span>\n\n<span class=\"nv\">maxSessionTimeout</span><span class=\"o\">=</span><span class=\"m\">60000000</span>\n<span class=\"c1\">## the directory where the snapshot is stored.</span>\n<span class=\"nv\">dataDir</span><span class=\"o\">=</span>/opt/zookeeper/<span class=\"o\">{{</span> cluster<span class=\"o\">[</span><span class=\"s1\">&#39;name&#39;</span><span class=\"o\">]</span> <span class=\"o\">}}</span>/data\n<span class=\"c1\">## Place the dataLogDir to a separate physical disc for better performance</span>\n<span class=\"nv\">dataLogDir</span><span class=\"o\">=</span>/opt/zookeeper/<span class=\"o\">{{</span> cluster<span class=\"o\">[</span><span class=\"s1\">&#39;name&#39;</span><span class=\"o\">]</span> <span class=\"o\">}}</span>/logs\n\nautopurge.snapRetainCount<span class=\"o\">=</span><span class=\"m\">10</span>\nautopurge.purgeInterval<span class=\"o\">=</span><span class=\"m\">1</span>\n\n\n<span class=\"c1\">## To avoid seeks ZooKeeper allocates space in the transaction log file in</span>\n<span class=\"c1\">## blocks of preAllocSize kilobytes. The default block size is 64M. One reason</span>\n<span class=\"c1\">## for changing the size of the blocks is to reduce the block size if snapshots</span>\n<span class=\"c1\">## are taken more often. (Also, see snapCount).</span>\n<span class=\"nv\">preAllocSize</span><span class=\"o\">=</span><span class=\"m\">131072</span>\n\n<span class=\"c1\">## Clients can submit requests faster than ZooKeeper can process them,</span>\n<span class=\"c1\">## especially if there are a lot of clients. To prevent ZooKeeper from running</span>\n<span class=\"c1\">## out of memory due to queued requests, ZooKeeper will throttle clients so that</span>\n<span class=\"c1\">## there is no more than globalOutstandingLimit outstanding requests in the</span>\n<span class=\"c1\">## system. The default limit is 1,000.ZooKeeper logs transactions to a</span>\n<span class=\"c1\">## transaction log. After snapCount transactions are written to a log file a</span>\n<span class=\"c1\">## snapshot is started and a new transaction log file is started. The default</span>\n<span class=\"c1\">## snapCount is 10,000.</span>\n<span class=\"nv\">snapCount</span><span class=\"o\">=</span><span class=\"m\">3000000</span>\n\n<span class=\"c1\">## If this option is defined, requests will be will logged to a trace file named</span>\n<span class=\"c1\">## traceFile.year.month.day.</span>\n<span class=\"c1\">##traceFile=</span>\n\n<span class=\"c1\">## Leader accepts client connections. Default value is &quot;yes&quot;. The leader machine</span>\n<span class=\"c1\">## coordinates updates. For higher update throughput at thes slight expense of</span>\n<span class=\"c1\">## read throughput the leader can be configured to not accept clients and focus</span>\n<span class=\"c1\">## on coordination.</span>\n<span class=\"nv\">leaderServes</span><span class=\"o\">=</span>yes\n\n<span class=\"nv\">standaloneEnabled</span><span class=\"o\">=</span><span class=\"nb\">false</span>\n<span class=\"nv\">dynamicConfigFile</span><span class=\"o\">=</span>/etc/zookeeper-<span class=\"o\">{{</span> cluster<span class=\"o\">[</span><span class=\"s1\">&#39;name&#39;</span><span class=\"o\">]</span> <span class=\"o\">}}</span>/conf/zoo.cfg.dynamic\n</code></pre></div>\n\n\n<p>Java version:</p>\n<div class=\"codehilite\"><pre><span></span><code>Java(TM) SE Runtime Environment (build 1.8.0_25-b17)\nJava HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)\n</code></pre></div>\n\n\n<p>JVM parameters:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nv\">NAME</span><span class=\"o\">=</span>zookeeper-<span class=\"o\">{{</span> cluster<span class=\"o\">[</span><span class=\"s1\">&#39;name&#39;</span><span class=\"o\">]</span> <span class=\"o\">}}</span>\n<span class=\"nv\">ZOOCFGDIR</span><span class=\"o\">=</span>/etc/<span class=\"nv\">$NAME</span>/conf\n\n<span class=\"c1\">## TODO this is really ugly</span>\n<span class=\"c1\">## How to find out, which jars are needed?</span>\n<span class=\"c1\">## seems, that log4j requires the log4j.properties file to be in the classpath</span>\n<span class=\"nv\">CLASSPATH</span><span class=\"o\">=</span><span class=\"s2\">&quot;</span><span class=\"nv\">$ZOOCFGDIR</span><span class=\"s2\">:/usr/build/classes:/usr/build/lib/*.jar:/usr/share/zookeeper/zookeeper-3.5.1-metrika.jar:/usr/share/zookeeper/slf4j-log4j12-1.7.5.jar:/usr/share/zookeeper/slf4j-api-1.7.5.jar:/usr/share/zookeeper/servlet-api-2.5-20081211.jar:/usr/share/zookeeper/netty-3.7.0.Final.jar:/usr/share/zookeeper/log4j-1.2.16.jar:/usr/share/zookeeper/jline-2.11.jar:/usr/share/zookeeper/jetty-util-6.1.26.jar:/usr/share/zookeeper/jetty-6.1.26.jar:/usr/share/zookeeper/javacc.jar:/usr/share/zookeeper/jackson-mapper-asl-1.9.11.jar:/usr/share/zookeeper/jackson-core-asl-1.9.11.jar:/usr/share/zookeeper/commons-cli-1.2.jar:/usr/src/java/lib/*.jar:/usr/etc/zookeeper&quot;</span>\n\n<span class=\"nv\">ZOOCFG</span><span class=\"o\">=</span><span class=\"s2\">&quot;</span><span class=\"nv\">$ZOOCFGDIR</span><span class=\"s2\">/zoo.cfg&quot;</span");
            
            document.write(">\n<span class=\"nv\">ZOO_LOG_DIR</span><span class=\"o\">=</span>/var/log/<span class=\"nv\">$NAME</span>\n<span class=\"nv\">USER</span><span class=\"o\">=</span>zookeeper\n<span class=\"nv\">GROUP</span><span class=\"o\">=</span>zookeeper\n<span class=\"nv\">PIDDIR</span><span class=\"o\">=</span>/var/run/<span class=\"nv\">$NAME</span>\n<span class=\"nv\">PIDFILE</span><span class=\"o\">=</span><span class=\"nv\">$PIDDIR</span>/<span class=\"nv\">$NAME</span>.pid\n<span class=\"nv\">SCRIPTNAME</span><span class=\"o\">=</span>/etc/init.d/<span class=\"nv\">$NAME</span>\n<span class=\"nv\">JAVA</span><span class=\"o\">=</span>/usr/bin/java\n<span class=\"nv\">ZOOMAIN</span><span class=\"o\">=</span><span class=\"s2\">&quot;org.apache.zookeeper.server.quorum.QuorumPeerMain&quot;</span>\n<span class=\"nv\">ZOO_LOG4J_PROP</span><span class=\"o\">=</span><span class=\"s2\">&quot;INFO,ROLLINGFILE&quot;</span>\n<span class=\"nv\">JMXLOCALONLY</span><span class=\"o\">=</span><span class=\"nb\">false</span>\n<span class=\"nv\">JAVA_OPTS</span><span class=\"o\">=</span><span class=\"s2\">&quot;-Xms{{ cluster.get(&#39;xms&#39;,&#39;128M&#39;) }} \\</span>\n<span class=\"s2\">    -Xmx{{ cluster.get(&#39;xmx&#39;,&#39;1G&#39;) }} \\</span>\n<span class=\"s2\">    -Xloggc:/var/log/</span><span class=\"nv\">$NAME</span><span class=\"s2\">/zookeeper-gc.log \\</span>\n<span class=\"s2\">    -XX:+UseGCLogFileRotation \\</span>\n<span class=\"s2\">    -XX:NumberOfGCLogFiles=16 \\</span>\n<span class=\"s2\">    -XX:GCLogFileSize=16M \\</span>\n<span class=\"s2\">    -verbose:gc \\</span>\n<span class=\"s2\">    -XX:+PrintGCTimeStamps \\</span>\n<span class=\"s2\">    -XX:+PrintGCDateStamps \\</span>\n<span class=\"s2\">    -XX:+PrintGCDetails</span>\n<span class=\"s2\">    -XX:+PrintTenuringDistribution \\</span>\n<span class=\"s2\">    -XX:+PrintGCApplicationStoppedTime \\</span>\n<span class=\"s2\">    -XX:+PrintGCApplicationConcurrentTime \\</span>\n<span class=\"s2\">    -XX:+PrintSafepointStatistics \\</span>\n<span class=\"s2\">    -XX:+UseParNewGC \\</span>\n<span class=\"s2\">    -XX:+UseConcMarkSweepGC \\</span>\n<span class=\"s2\">-XX:+CMSParallelRemarkEnabled&quot;</span>\n</code></pre></div>\n\n\n<p>Salt init:</p>\n<div class=\"codehilite\"><pre><span></span><code>description &quot;zookeeper-{{ cluster[&#39;name&#39;] }} centralized coordination service&quot;\n\nstart on runlevel [2345]\nstop on runlevel [!2345]\n\nrespawn\n\nlimit nofile 8192 8192\n\npre-start script\n    [ -r &quot;/etc/zookeeper-{{ cluster[&#39;name&#39;] }}/conf/environment&quot; ] || exit 0\n    . /etc/zookeeper-{{ cluster[&#39;name&#39;] }}/conf/environment\n    [ -d $ZOO_LOG_DIR ] || mkdir -p $ZOO_LOG_DIR\n    chown $USER:$GROUP $ZOO_LOG_DIR\nend script\n\nscript\n    . /etc/zookeeper-{{ cluster[&#39;name&#39;] }}/conf/environment\n    [ -r /etc/default/zookeeper ] &amp;&amp; . /etc/default/zookeeper\n    if [ -z &quot;$JMXDISABLE&quot; ]; then\n        JAVA_OPTS=&quot;$JAVA_OPTS -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=$JMXLOCALONLY&quot;\n    fi\n    exec start-stop-daemon --start -c $USER --exec $JAVA --name zookeeper-{{ cluster[&#39;name&#39;] }} \\\n        -- -cp $CLASSPATH $JAVA_OPTS -Dzookeeper.log.dir=${ZOO_LOG_DIR} \\\n        -Dzookeeper.root.logger=${ZOO_LOG4J_PROP} $ZOOMAIN $ZOOCFG\nend script\n</code></pre></div>\n\n\n<p><a name=\"../../../operations/update/\"></a><a name=\"../operations/update/\"></a><a name=\"update/\"></a><a name=\"../../operations/update/\"></a><a name=\"../../../../../operations/update/\"></a><a name=\"../../../../operations/update/\"></a><a name=\"operations/update/\"></a></p>\n<h2 id=\"clickhouse-update\">ClickHouse Update<a class=\"headerlink\" href=\"#clickhouse-update\" title=\"Permanent link\">&para;</a></h2>\n<p>If ClickHouse was installed from deb packages, execute the following commands on the server:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get update\n$ sudo apt-get install clickhouse-client clickhouse-server\n$ sudo service clickhouse-server restart\n</code></pre></div>\n\n\n<p>If you installed ClickHouse using something other than the recommended deb packages, use the appropriate update method.</p>\n<p>ClickHouse does not support a distributed update. The operation should be performed consecutively on each separate server. Do not update all the servers on a cluster simultaneously, or the cluster will be unavailable for some time.<br />\n<a name=\"../../../../operations/access_rights/\"></a><a name=\"../../../../../operations/access_rights/\"></a><a name=\"access_rights/\"></a><a name=\"../../../operations/access_rights/\"></a><a name=\"../../operations/access_rights/\"></a><a name=\"../operations/access_rights/\"></a><a name=\"operations/access_rights/\"></a></p>\n<h2 id=\"access-rights\">Access Rights<a class=\"headerlink\" href=\"#access-rights\" title=\"Permanent link\">&para;</a></h2>\n<p>Users and access rights are set up in the user config. This is usually <code>users.xml</code>.</p>\n<p>Users are recorded in the <code>users</code> section. Here is a fragment of the <code>users.xml</code> file:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">&lt;!-- Users and ACL. --&gt;</span>\n<span class=\"nt\">&lt;users&gt;</span>\n    <span class=\"c\">&lt;!-- If the user name is not specified, the &#39;default&#39; user is used. --&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"c\">&lt;!-- Password could be specified in plaintext or in SHA256 (in hex format).</span>\n\n<span class=\"c\">             If you want to specify password in plaintext (not recommended), place it in &#39;password&#39; element.</span>\n<span class=\"c\">             Example: &lt;password&gt;qwerty&lt;/password&gt;.</span>\n<span class=\"c\">             Password could be empty.</span>\n\n<span class=\"c\">             If you want to specify SHA256, place it in &#39;password_sha256_hex&#39; element.</span>\n<span class=\"c\">             Example: &lt;password_sha256_hex&gt;65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5&lt;/password_sha256_hex&gt;</span>\n\n<span class=\"c\">             How to generate decent password:</span>\n<span class=\"c\">             Execute: PASSWORD=$(base64 &lt; /dev/urandom | head -c8); echo &quot;$PASSWORD&quot;; echo -n &quot;$PASSWORD&quot; | sha256sum | tr -d &#39;-&#39;</span>\n<span class=\"c\">             In first line will be password and in second - corresponding SHA256.</span>\n<span class=\"c\">        --&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n\n        <span class=\"c\">&lt;!-- A list of networks that access is allowed from.</span>\n<span class=\"c\">            Each list item has one of the following forms:</span>\n<span class=\"c\">            &lt;ip&gt; The IP address or subnet mask. For example: 198.51.100.0/24 or 2001:DB8::/32.</span>\n<span class=\"c\">            &lt;host&gt; Host name. For example: example01. A DNS query is made for verification, and all addresses obtained are compared with the address of the customer.</span>\n<span class=\"c\">            &lt;host_regexp&gt; Regular expression for host names. For example, ^example\\d\\d-\\d\\d-\\d\\.yandex\\.ru$</span>\n<span class=\"c\">                To check it, a DNS PTR request is made for the client&#39;s address and a regular expression is applied to the result.</span>\n<span class=\"c\">                Then another DNS query is made for the result of the PTR query, and all received address are compared to the client address.</span>\n<span class=\"c\">                We strongly recommend that the regex ends with \\.yandex\\.ru$.</span>\n\n<span class=\"c\">            If you are installing ClickHouse yourself, specify here:</span>\n<span class=\"c\">                &lt;networks&gt;</span>\n<span class=\"c\">                        &lt;ip&gt;::/0&lt;/ip&gt;</span>\n<span class=\"c\">                &lt;/networks&gt;</span>\n<span class=\"c\">        --&gt;</span>\n        <span class=\"nt\">&lt;networks</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;networks&quot;</span> <span class=\"nt\">/&gt;</span>\n\n        <span class=\"c\">&lt;!-- Settings profile for the user. --&gt;</span>\n        <span class=\"nt\">&lt;profile&gt;</span>default<span class=\"nt\">&lt;/profile&gt;</span>\n\n        <span class=\"c\">&lt;!-- Quota for the user. --&gt;</span>\n        <span class=\"nt\">&lt;quota&gt;</span>default<span class=\"nt\">&lt;/quota&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n\n    <span class=\"c\">&lt;!-- For requests from the Yandex.Metrica user interface via the API for data on specific counters. --&gt;</span>\n    <span class=\"nt\">&lt;web&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n        <span class=\"nt\">&lt;networks</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;networks&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;profile&gt;</span>web<span class=\"nt\">&lt;/profile&gt;</span>\n        <span class=\"nt\">&lt;quota&gt;</span>default<span class=\"nt\">&lt;/quota&gt;</span>\n        <span class=\"nt\">&lt;allow_databases&gt;</span>\n           <span class=\"nt\">&lt;database&gt;</span>test<span class=\"nt\">&lt;/database&gt;</span>\n        <span class=\"nt\">&lt;/allow_databases&gt;</span>\n        <span class=\"nt\">&lt;allow_dictionaries&gt;</span>\n           <span class=\"nt\">&lt;dictionary&gt;</span>test<span class=\"nt\">&lt;/dictionary&gt;</span>\n        <span class=\"nt\">&lt;/allow_dictionaries&gt;</span>\n    <span class=\"nt\">&lt;/web&gt;</span>\n<span class=\"nt\">&lt;/users&gt;</span>\n</code></pre></div>\n\n\n<p>You can see a declaration from two users: <code>default</code>and<code>web</code>. We added the <code>web</code> user separately.</p>\n<p>The <code>default</code> user is chosen in cases when the username is not passed. The <code>default</code> user is also used for distributed query processing, if the configuration of the server or cluster doesn't specify the <code>user</code> and <code>password</code> (see the section on the <a href=\"#../operations/table_engines/distributed/\">Distributed</a> engine).</p>\n<p>The user that is used for exchanging information between servers combined in a cluster must not have substantial restrictions or quotas \u2013 otherwise, distributed queries will fail.</p>\n<p>The password is specified in clear text (not recommended) or in SHA-256. The hash isn't salted. In this regard, you should not consider these passwords as providin");
            
            document.write("g security against potential malicious attacks. Rather, they are necessary for protection from employees.</p>\n<p>A list of networks is specified that access is allowed from. In this example, the list of networks for both users is loaded from a separate file (<code>/etc/metrika.xml</code>) containing the <code>networks</code> substitution. Here is a fragment of it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    ...\n    <span class=\"nt\">&lt;networks&gt;</span>\n        <span class=\"nt\">&lt;ip&gt;</span>::/64<span class=\"nt\">&lt;/ip&gt;</span>\n        <span class=\"nt\">&lt;ip&gt;</span>203.0.113.0/24<span class=\"nt\">&lt;/ip&gt;</span>\n        <span class=\"nt\">&lt;ip&gt;</span>2001:DB8::/32<span class=\"nt\">&lt;/ip&gt;</span>\n        ...\n    <span class=\"nt\">&lt;/networks&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>You could define this list of networks directly in <code>users.xml</code>, or in a file in the <code>users.d</code> directory (for more information, see the section \"<a href=\"#configuration_files\">Configuration files</a>\").</p>\n<p>The config includes comments explaining how to open access from everywhere.</p>\n<p>For use in production, only specify <code>ip</code> elements (IP addresses and their masks), since using <code>host</code> and <code>hoost_regexp</code> might cause extra latency.</p>\n<p>Next the user settings profile is specified (see the section \"<a href=\"#settings/settings_profiles/\">Settings profiles</a>\". You can specify the default profile, <code>default'</code>. The profile can have any name. You can specify the same profile for different users. The most important thing you can write in the settings profile is <code>readonly=1</code>, which ensures read-only access.<br />\nThen specify the quota to be used (see the section \"<a href=\"#quotas\">Quotas</a>\"). You can specify the default quota: <code>default</code>. It is set in the config by default to only count resource usage, without restricting it. The quota can have any name. You can specify the same quota for different users \u2013 in this case, resource usage is calculated for each user individually.</p>\n<p>In the optional <code>&lt;allow_databases&gt;</code> section, you can also specify a list of databases that the user can access. By default, all databases are available to the user. You can specify the <code>default</code> database. In this case, the user will receive access to the database by default.</p>\n<p>In the optional <code>&lt;allow_dictionaries&gt;</code> section, you can also specify a list of dictionaries that the user can access. By default, all dictionaries are available to the user.</p>\n<p>Access to the <code>system</code> database is always allowed (since this database is used for processing queries).</p>\n<p>The user can get a list of all databases and tables in them by using <code>SHOW</code> queries or system tables, even if access to individual databases isn't allowed.</p>\n<p>Database access is not related to the <a href=\"#settings_readonly\">readonly</a> setting. You can't grant full access to one database and <code>readonly</code> access to another one.</p>\n<p><a name=\"../../../../operations/backup/\"></a><a name=\"../operations/backup/\"></a><a name=\"../../../operations/backup/\"></a><a name=\"operations/backup/\"></a><a name=\"../../operations/backup/\"></a><a name=\"backup/\"></a><a name=\"../../../../../operations/backup/\"></a></p>\n<h2 id=\"data-backup\">Data Backup<a class=\"headerlink\" href=\"#data-backup\" title=\"Permanent link\">&para;</a></h2>\n<p>While <a href=\"#table_engines/replication/\">replication</a> provides protection from hardware failures, it does not protect against human errors: accidental deletion of data, deletion of the wrong table or a table on the wrong cluster, and software bugs that result in incorrect data processing or data corruption. In many cases mistakes like these will affect all replicas. ClickHouse has built-in safeguards to prevent some types of mistakes \u2014 for example, by default <a href=\"https://github.com/ClickHouse/ClickHouse/blob/v18.14.18-stable/dbms/programs/server/config.xml#L322-L330\" rel=\"external nofollow noreferrer\">you can't just drop tables with a MergeTree-like engine containing more than 50 Gb of data</a>. However, these safeguards don't cover all possible cases and can be circumvented.</p>\n<p>In order to effectively mitigate possible human errors, you should carefully prepare a strategy for backing up and restoring your data <strong>in advance</strong>.</p>\n<p>Each company has different resources available and business requirements, so there's no universal solution for ClickHouse backups and restores that will fit every situation. What works for one gigabyte of data likely won't work for tens of petabytes. There are a variety of possible approaches with their own pros and cons, which will be discussed below. It is a good idea to use several approaches instead of just one in order to compensate for their various shortcomings.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Keep in mind that if you backed something up and never tried to restore it, chances are that restore will not work properly when you actually need it (or at least it will take longer than business can tolerate). So whatever backup approach you choose, make sure to automate the restore process as well, and practice it on a spare ClickHouse cluster regularly.</p>\n</div>\n<h3 id=\"duplicating-source-data-somewhere-else\">Duplicating Source Data Somewhere Else<a class=\"headerlink\" href=\"#duplicating-source-data-somewhere-else\" title=\"Permanent link\">&para;</a></h3>\n<p>Often data that is ingested into ClickHouse is delivered through some sort of persistent queue, such as <a href=\"https://kafka.apache.org\" rel=\"external nofollow noreferrer\">Apache Kafka</a>. In this case it is possible to configure an additional set of subscribers that will read the same data stream while it is being written to ClickHouse and store it in cold storage somewhere. Most companies already have some default recommended cold storage, which could be an object store or a distributed filesystem like <a href=\"https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html\" rel=\"external nofollow noreferrer\">HDFS</a>.</p>\n<h3 id=\"filesystem-snapshots\">Filesystem Snapshots<a class=\"headerlink\" href=\"#filesystem-snapshots\" title=\"Permanent link\">&para;</a></h3>\n<p>Some local filesystems provide snapshot functionality (for example, <a href=\"https://en.wikipedia.org/wiki/ZFS\" rel=\"external nofollow noreferrer\">ZFS</a>), but they might not be the best choice for serving live queries. A possible solution is to create additional replicas with this kind of filesystem and exclude them from the <a href=\"#table_engines/distributed/\">Distributed</a> tables that are used for <code>SELECT</code> queries. Snapshots on such replicas will be out of reach of any queries that modify data. As a bonus, these replicas might have special hardware configurations with more disks attached per server, which would be cost-effective.</p>\n<h3 id=\"clickhouse-copier\">clickhouse-copier<a class=\"headerlink\" href=\"#clickhouse-copier\" title=\"Permanent link\">&para;</a></h3>\n<p><a href=\"#utils/clickhouse-copier/\">clickhouse-copier</a> is a versatile tool that was initially created to re-shard petabyte-sized tables. It can also be used for backup and restore purposes because it reliably copies data between ClickHouse tables and clusters.</p>\n<p>For smaller volumes of data, a simple <code>INSERT INTO ... SELECT ...</code> to remote tables might work as well.</p>\n<h3 id=\"manipulations-with-parts\">Manipulations with Parts<a class=\"headerlink\" href=\"#manipulations-with-parts\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse allows using the <code>ALTER TABLE ... FREEZE PARTITION ...</code> query to create a local copy of table partitions. This is implemented using hardlinks to the <code>/var/lib/clickhouse/shadow/</code> folder, so it usually does not consume extra disk space for old data. The created copies of files are not handled by ClickHouse server, so you can just leave them there: you will have a simple backup that doesn't require any additional external system, but it will still be prone to hardware issues. For this reason, it's better to remotely copy them to another location and then remove the local copies. Distributed filesystems and object stores are still a good options for this, but normal attached file servers with a large enough capacity might work as well (in this case the transfer will occur via the network filesystem or maybe <a href=\"https://en.wikipedia.org/wiki/Rsync\" rel=\"external nofollow noreferrer\">rsync</a>).</p>\n<p>For more information about queries related to partition manipulations, see the <a href=\"#alter_manipulations-with-partitions\">ALTER documentation</a>.</p>\n<p>A third-party tool is available to automate this approach: <a href=\"https://github.com/AlexAkulov/clickhouse-backup\" rel=\"external nofollow noreferrer\">clickhouse-backup</a>.</p>\n<p><a name=\"../../../../operations/configuration_files/\"></a><a name=\"../../operations/configuration_files/\"></a><a name=\"configuration_files/\"></a><a name=\"../operations/configuration_files/\"></a><a name=\"../../../operations/configuration_files/\"></a><a name=\"../../../../../operations/configuration_files/\"></a><a name=\"operations/configuration_files/\"></a></p>\n<h2 id=\"configuration_files\">Configuration Files<a class=\"headerlink\" href=\"#configuration_files\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse supports multi-file configuration management. The main server configuration file is <code>/etc/clickhouse-server/config.xml</code>. Other files must be in the <code>/etc/clickhouse-server/config.d</code> directory.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>All the configuration files should be in XML format. Also, they should have the same root element, usually <code>&lt;yandex&gt;</code>.</p>\n</div>\n<p>Some settings specified in the main configuration file can be overridden in other configuration files. The <code>replace</code> or <code>remove</code> attributes can be specified for the elements of");
            
            document.write(" these configuration files.</p>\n<p>If neither is specified, it combines the contents of elements recursively, replacing values of duplicate children.</p>\n<p>If <code>replace</code> is specified, it replaces the entire element with the specified one.</p>\n<p>If <code>remove</code> is specified, it deletes the element.</p>\n<p>The config can also define \"substitutions\". If an element has the <code>incl</code> attribute, the corresponding substitution from the file will be used as the value. By default, the path to the file with substitutions is <code>/etc/metrika.xml</code>. This can be changed in the <a href=\"#server_settings-include_from\">include_from</a> element in the server config. The substitution values are specified in <code>/yandex/substitution_name</code> elements in this file. If a substitution specified in <code>incl</code> does not exist, it is recorded in the log. To prevent ClickHouse from logging missing substitutions, specify the <code>optional=\"true\"</code> attribute (for example, settings for <a href=\"#server_settings/settings/\">macros</a>).</p>\n<p>Substitutions can also be performed from ZooKeeper. To do this, specify the attribute <code>from_zk = \"/path/to/node\"</code>. The element value is replaced with the contents of the node at <code>/path/to/node</code> in ZooKeeper. You can also put an entire XML subtree on the ZooKeeper node and it will be fully inserted into the source element.</p>\n<p>The <code>config.xml</code> file can specify a separate config with user settings, profiles, and quotas. The relative path to this config is set in the 'users_config' element. By default, it is <code>users.xml</code>. If <code>users_config</code> is omitted, the user settings, profiles, and quotas are specified directly in <code>config.xml</code>.</p>\n<p>In addition, <code>users_config</code> may have overrides in files from the <code>users_config.d</code> directory (for example, <code>users.d</code>) and substitutions. For example, you can have separate config file for each user like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ cat /etc/clickhouse-server/users.d/alice.xml\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;users&gt;</span>\n      <span class=\"nt\">&lt;alice&gt;</span>\n          <span class=\"nt\">&lt;profile&gt;</span>analytics<span class=\"nt\">&lt;/profile&gt;</span>\n            <span class=\"nt\">&lt;networks&gt;</span>\n                  <span class=\"nt\">&lt;ip&gt;</span>::/0<span class=\"nt\">&lt;/ip&gt;</span>\n            <span class=\"nt\">&lt;/networks&gt;</span>\n          <span class=\"nt\">&lt;password_sha256_hex&gt;</span>...<span class=\"nt\">&lt;/password_sha256_hex&gt;</span>\n          <span class=\"nt\">&lt;quota&gt;</span>analytics<span class=\"nt\">&lt;/quota&gt;</span>\n      <span class=\"nt\">&lt;/alice&gt;</span>\n    <span class=\"nt\">&lt;/users&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p>For each config file, the server also generates <code>file-preprocessed.xml</code> files when starting. These files contain all the completed substitutions and overrides, and they are intended for informational use. If ZooKeeper substitutions were used in the config files but ZooKeeper is not available on the server start, the server loads the configuration from the preprocessed file.</p>\n<p>The server tracks changes in config files, as well as files and ZooKeeper nodes that were used when performing substitutions and overrides, and reloads the settings for users and clusters on the fly. This means that you can modify the cluster, users, and their settings without restarting the server.</p>\n<p><a name=\"../../../../../operations/quotas/\"></a><a name=\"../operations/quotas/\"></a><a name=\"operations/quotas/\"></a><a name=\"../../../../operations/quotas/\"></a><a name=\"../../../operations/quotas/\"></a><a name=\"../../operations/quotas/\"></a><a name=\"quotas/\"></a></p>\n<h2 id=\"quotas\">Quotas<a class=\"headerlink\" href=\"#quotas\" title=\"Permanent link\">&para;</a></h2>\n<p>Quotas allow you to limit resource usage over a period of time, or simply track the use of resources.<br />\nQuotas are set up in the user config. This is usually 'users.xml'.</p>\n<p>The system also has a feature for limiting the complexity of a single query. See the section \"Restrictions on query complexity\").</p>\n<p>In contrast to query complexity restrictions, quotas:</p>\n<ul>\n<li>Place restrictions on a set of queries that can be run over a period of time, instead of limiting a single query.</li>\n<li>Account for resources spent on all remote servers for distributed query processing.</li>\n</ul>\n<p>Let's look at the section of the 'users.xml' file that defines quotas.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">&lt;!-- Quotas --&gt;</span>\n<span class=\"nt\">&lt;quotas&gt;</span>\n    <span class=\"c\">&lt;!-- Quota name. --&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"c\">&lt;!-- Restrictions for a time period. You can set many intervals with different restrictions. --&gt;</span>\n        <span class=\"nt\">&lt;interval&gt;</span>\n            <span class=\"c\">&lt;!-- Length of the interval. --&gt;</span>\n            <span class=\"nt\">&lt;duration&gt;</span>3600<span class=\"nt\">&lt;/duration&gt;</span>\n\n            <span class=\"c\">&lt;!-- Unlimited. Just collect data for the specified time interval. --&gt;</span>\n            <span class=\"nt\">&lt;queries&gt;</span>0<span class=\"nt\">&lt;/queries&gt;</span>\n            <span class=\"nt\">&lt;errors&gt;</span>0<span class=\"nt\">&lt;/errors&gt;</span>\n            <span class=\"nt\">&lt;result_rows&gt;</span>0<span class=\"nt\">&lt;/result_rows&gt;</span>\n            <span class=\"nt\">&lt;read_rows&gt;</span>0<span class=\"nt\">&lt;/read_rows&gt;</span>\n            <span class=\"nt\">&lt;execution_time&gt;</span>0<span class=\"nt\">&lt;/execution_time&gt;</span>\n        <span class=\"nt\">&lt;/interval&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n</code></pre></div>\n\n\n<p>By default, the quota just tracks resource consumption for each hour, without limiting usage.<br />\nThe resource consumption calculated for each interval is output to the server log after each request.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;statbox&gt;</span>\n    <span class=\"c\">&lt;!-- Restrictions for a time period. You can set many intervals with different restrictions. --&gt;</span>\n    <span class=\"nt\">&lt;interval&gt;</span>\n        <span class=\"c\">&lt;!-- Length of the interval. --&gt;</span>\n        <span class=\"nt\">&lt;duration&gt;</span>3600<span class=\"nt\">&lt;/duration&gt;</span>\n\n        <span class=\"nt\">&lt;queries&gt;</span>1000<span class=\"nt\">&lt;/queries&gt;</span>\n        <span class=\"nt\">&lt;errors&gt;</span>100<span class=\"nt\">&lt;/errors&gt;</span>\n        <span class=\"nt\">&lt;result_rows&gt;</span>1000000000<span class=\"nt\">&lt;/result_rows&gt;</span>\n        <span class=\"nt\">&lt;read_rows&gt;</span>100000000000<span class=\"nt\">&lt;/read_rows&gt;</span>\n        <span class=\"nt\">&lt;execution_time&gt;</span>900<span class=\"nt\">&lt;/execution_time&gt;</span>\n    <span class=\"nt\">&lt;/interval&gt;</span>\n\n    <span class=\"nt\">&lt;interval&gt;</span>\n        <span class=\"nt\">&lt;duration&gt;</span>86400<span class=\"nt\">&lt;/duration&gt;</span>\n\n        <span class=\"nt\">&lt;queries&gt;</span>10000<span class=\"nt\">&lt;/queries&gt;</span>\n        <span class=\"nt\">&lt;errors&gt;</span>1000<span class=\"nt\">&lt;/errors&gt;</span>\n        <span class=\"nt\">&lt;result_rows&gt;</span>5000000000<span class=\"nt\">&lt;/result_rows&gt;</span>\n        <span class=\"nt\">&lt;read_rows&gt;</span>500000000000<span class=\"nt\">&lt;/read_rows&gt;</span>\n        <span class=\"nt\">&lt;execution_time&gt;</span>7200<span class=\"nt\">&lt;/execution_time&gt;</span>\n    <span class=\"nt\">&lt;/interval&gt;</span>\n<span class=\"nt\">&lt;/statbox&gt;</span>\n</code></pre></div>\n\n\n<p>For the 'statbox' quota, restrictions are set for every hour and for every 24 hours (86,400 seconds). The time interval is counted starting from an implementation-defined fixed moment in time. In other words, the 24-hour interval doesn't necessarily begin at midnight.</p>\n<p>When the interval ends, all collected values are cleared. For the next hour, the quota calculation starts over.</p>\n<p>Here are the amounts that can be restricted:</p>\n<p><code>queries</code> \u2013 The total number of requests.</p>\n<p><code>errors</code> \u2013 The number of queries that threw an exception.</p>\n<p><code>result_rows</code> \u2013 The total number of rows given as the result.</p>\n<p><code>read_rows</code> \u2013 The total number of source rows read from tables for running the query, on all remote servers.</p>\n<p><code>execution_time</code> \u2013 The total query execution time, in seconds (wall time).</p>\n<p>If the limit is exceeded for at least one time interval, an exception is thrown with a text about which restriction was exceeded, for which interval, and when the new interval begins (when queries can be sent again).</p>\n<p>Quotas can use the \"quota key\" feature in order to report on resources for multiple keys independently. Here is an example of this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">&lt;!-- For the global reports designer. --&gt;</span>\n<span class=\"nt\">&lt;web_global&gt;</span>\n    <span class=\"c\">&lt;!-- keyed \u2013 The quota_key &quot;key&quot; is passed in the query parameter,</span>\n<span class=\"c\">            and the quota is tracked separately for each key value.</span>\n<span class=\"c\">        For example, you can pass a Yandex.Metrica username as the key,</span>\n<span class=\"c\">            so the quota will be counted separately for each username.</span>\n<span class=\"c\">        Using keys makes sense only if quota_key is transmitted by the program, not by a user.</span>\n\n<span class=\"c\">        You can also write &lt;keyed_by_ip /&gt; so the IP address is used as the quota key.</span>\n<span class=\"c\">        (But keep in mind that users can change the IPv6 address fairly easily.)</span>\n<span class=\"c\">    --&gt;</span>\n    <span class=\"nt\">&lt;keyed</span> <span class=\"nt\">/&gt;</span>\n</code></pre></div>\n\n\n<p>Th");
            
            document.write("e quota is assigned to users in the 'users' section of the config. See the section \"Access rights\".</p>\n<p>For distributed query processing, the accumulated amounts are stored on the requestor server. So if the user goes to another server, the quota there will \"start over\".</p>\n<p>When the server is restarted, quotas are reset.</p>\n<p><a name=\"../operations/system_tables/\"></a><a name=\"../../../../operations/system_tables/\"></a><a name=\"operations/system_tables/\"></a><a name=\"../../../../../operations/system_tables/\"></a><a name=\"../../../operations/system_tables/\"></a><a name=\"../../operations/system_tables/\"></a><a name=\"system_tables/\"></a></p>\n<h2 id=\"system-tables\">System tables<a class=\"headerlink\" href=\"#system-tables\" title=\"Permanent link\">&para;</a></h2>\n<p>System tables are used for implementing part of the system's functionality, and for providing access to information about how the system is working.<br />\nYou can't delete a system table (but you can perform DETACH).<br />\nSystem tables don't have files with data on the disk or files with metadata. The server creates all the system tables when it starts.<br />\nSystem tables are read-only.<br />\nThey are located in the 'system' database.</p>\n<h3 id=\"system_tables-asynchronous_metrics\">system.asynchronous_metrics<a class=\"headerlink\" href=\"#system_tables-asynchronous_metrics\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains metrics that are calculated periodically in the background. For example, the amount of RAM in use.</p>\n<p>Columns:</p>\n<ul>\n<li><code>metric</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Metric name.</li>\n<li><code>value</code> (<a href=\"#../data_types/float/\">Float64</a>) \u2014 Metric value.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">asynchronous_metrics</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500metric\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500value\u2500\u2510\n\u2502 jemalloc.background_thread.run_interval \u2502          0 \u2502\n\u2502 jemalloc.background_thread.num_runs     \u2502          0 \u2502\n\u2502 jemalloc.background_thread.num_threads  \u2502          0 \u2502\n\u2502 jemalloc.retained                       \u2502  422551552 \u2502\n\u2502 jemalloc.mapped                         \u2502 1682989056 \u2502\n\u2502 jemalloc.resident                       \u2502 1656446976 \u2502\n\u2502 jemalloc.metadata_thp                   \u2502          0 \u2502\n\u2502 jemalloc.metadata                       \u2502   10226856 \u2502\n\u2502 UncompressedCacheCells                  \u2502          0 \u2502\n\u2502 MarkCacheFiles                          \u2502          0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#monitoring/\">Monitoring</a> \u2014 Base concepts of ClickHouse monitoring.</li>\n<li><a href=\"#system_tables-metrics\">system.metrics</a> \u2014 Contains instantly calculated metrics.</li>\n<li><a href=\"#system_tables-events\">system.events</a> \u2014 Contains a number of events that have occurred.</li>\n</ul>\n<h3 id=\"system-clusters\">system.clusters<a class=\"headerlink\" href=\"#system-clusters\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about clusters available in the config file and the servers in them.</p>\n<p>Columns:</p>\n<ul>\n<li><code>cluster</code> (String) \u2014 The cluster name.</li>\n<li><code>shard_num</code> (UInt32) \u2014 The shard number in the cluster, starting from 1.</li>\n<li><code>shard_weight</code> (UInt32) \u2014 The relative weight of the shard when writing data.</li>\n<li><code>replica_num</code> (UInt32) \u2014 The replica number in the shard, starting from 1.</li>\n<li><code>host_name</code> (String) \u2014 The host name, as specified in the config.</li>\n<li><code>host_address</code> (String) \u2014 The host IP address obtained from DNS.</li>\n<li><code>port</code> (UInt16) \u2014 The port to use for connecting to the server.</li>\n<li><code>user</code> (String) \u2014 The name of the user for connecting to the server.</li>\n<li><code>errors_count</code> (UInt32) - number of times this host failed to reach replica.</li>\n<li><code>estimated_recovery_time</code> (UInt32) - seconds left until replica error count is zeroed and it is considered to be back to normal.</li>\n</ul>\n<p>Please note that <code>errors_count</code> is updated once per query to the cluster, but <code>estimated_recovery_time</code> is recalculated on-demand. So there could be a case of non-zero <code>errors_count</code> and zero <code>estimated_recovery_time</code>, that next query will zero <code>errors_count</code> and try to use replica as if it has no errors.</p>\n<p><strong>See also</strong></p>\n<ul>\n<li><a href=\"#table_engines/distributed/\">Table engine Distributed</a></li>\n<li><a href=\"#settings-distributed_replica_error_cap\">distributed_replica_error_cap setting</a></li>\n<li><a href=\"#settings-distributed_replica_error_half_life\">distributed_replica_error_half_life setting</a></li>\n</ul>\n<h3 id=\"system-columns\">system.columns<a class=\"headerlink\" href=\"#system-columns\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about columns in all the tables.</p>\n<p>You can use this table to get information similar to the <a href=\"#misc-describe-table\">DESCRIBE TABLE</a> query, but for multiple tables at once.</p>\n<p>The <code>system.columns</code> table contains the following columns (the column type is shown in brackets):</p>\n<ul>\n<li><code>database</code> (String) \u2014 Database name.</li>\n<li><code>table</code> (String) \u2014 Table name.</li>\n<li><code>name</code> (String) \u2014 Column name.</li>\n<li><code>type</code> (String) \u2014 Column type.</li>\n<li><code>default_kind</code> (String) \u2014 Expression type (<code>DEFAULT</code>, <code>MATERIALIZED</code>, <code>ALIAS</code>) for the default value, or an empty string if it is not defined.</li>\n<li><code>default_expression</code> (String) \u2014 Expression for the default value, or an empty string if it is not defined.</li>\n<li><code>data_compressed_bytes</code> (UInt64) \u2014 The size of compressed data, in bytes.</li>\n<li><code>data_uncompressed_bytes</code> (UInt64) \u2014 The size of decompressed data, in bytes.</li>\n<li><code>marks_bytes</code> (UInt64) \u2014 The size of marks, in bytes.</li>\n<li><code>comment</code> (String) \u2014 Comment on the column, or an empty string if it is not defined.</li>\n<li><code>is_in_partition_key</code> (UInt8) \u2014 Flag that indicates whether the column is in the partition expression.</li>\n<li><code>is_in_sorting_key</code> (UInt8) \u2014 Flag that indicates whether the column is in the sorting key expression.</li>\n<li><code>is_in_primary_key</code> (UInt8) \u2014 Flag that indicates whether the column is in the primary key expression.</li>\n<li><code>is_in_sampling_key</code> (UInt8) \u2014 Flag that indicates whether the column is in the sampling key expression.</li>\n</ul>\n<h3 id=\"system_contributors\">system.contributors<a class=\"headerlink\" href=\"#system_contributors\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about contributors. All constributors in random order. The order is random at query execution time.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (String) \u2014 Contributor (author) name from git log.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">contributors</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Olga Khvostikova \u2502\n\u2502 Max Vetrov       \u2502\n\u2502 LiuYangkuan      \u2502\n\u2502 svladykin        \u2502\n\u2502 zamulla          \u2502\n\u2502 \u0160imon Podlipsk\u00fd  \u2502\n\u2502 BayoNet          \u2502\n\u2502 Ilya Khomutov    \u2502\n\u2502 Amy Krishnevsky  \u2502\n\u2502 Loud_Scream      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p>To find out yourself in the table, use a query:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">contributors</span> <span class=\"k\">WHERE</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;Olga Khvostikova&#39;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Olga Khvostikova \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"system-databases\">system.databases<a class=\"headerlink\" href=\"#system-databases\" title=\"Permanent link\">&para;</a></h3>\n<p>This table contains a single String column called 'name' \u2013 the name of a database.<br />\nEach database that the server knows about has a corresponding entry in the table.<br />\nThis system table is used for implementing the <code>SHOW DATABASES</code> query.</p>\n<h3 id=\"system_tables-detached_parts\">system.detached_parts<a class=\"headerlink\" href=\"#system_tables-detached_parts\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about detached parts of <a href=\"#table_engines/mergetree/\">MergeTree</a> tables. The <code>reason</code> column specifies why the part was detached. For user-detached parts, the reason is empty. Such parts can be attached with <a href=\"#alter_attach-partition\">ALTER TABLE ATTACH PARTITION|PART</a> command. For the description of other columns, see <a href=\"#system_tables-parts\">system.parts</a>. If part name is invalid, values of some columns may be <code>NULL</code>. Such parts can be deleted with <a href=\"#alter_drop-detached\">ALTER TABLE DROP DETACHED PART</a>.</p>\n<h3 id=\"system-dictionaries\">system.dictionaries<a class=\"headerlink\" href=\"#system-dictionaries\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about external dictionaries.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (String) \u2014 Dictionary name.</li>\n<li><code>type</code> (String) \u2014 Dictionary type: Flat, Hashed, Cache.</li>\n<li><code>origin</code> (String) \u2014 Path to the configuration file that describes the dictionary.</li>\n<li><code>attribute.names</code> (Array(String)) \u2014 Array of attribute names provided by the dictionary.</li>\n<li><code>attribute.types</code> (Array(Stri");
            
            document.write("ng)) \u2014 Corresponding array of attribute types that are provided by the dictionary.</li>\n<li><code>has_hierarchy</code> (UInt8) \u2014 Whether the dictionary is hierarchical.</li>\n<li><code>bytes_allocated</code> (UInt64) \u2014 The amount of RAM the dictionary uses.</li>\n<li><code>hit_rate</code> (Float64) \u2014 For cache dictionaries, the percentage of uses for which the value was in the cache.</li>\n<li><code>element_count</code> (UInt64) \u2014 The number of items stored in the dictionary.</li>\n<li><code>load_factor</code> (Float64) \u2014 The percentage filled in the dictionary (for a hashed dictionary, the percentage filled in the hash table).</li>\n<li><code>creation_time</code> (DateTime) \u2014 The time when the dictionary was created or last successfully reloaded.</li>\n<li><code>last_exception</code> (String) \u2014 Text of the error that occurs when creating or reloading the dictionary if the dictionary couldn't be created.</li>\n<li><code>source</code> (String) \u2014 Text describing the data source for the dictionary.</li>\n</ul>\n<p>Note that the amount of memory used by the dictionary is not proportional to the number of items stored in it. So for flat and cached dictionaries, all the memory cells are pre-assigned, regardless of how full the dictionary actually is.</p>\n<h3 id=\"system_tables-events\">system.events<a class=\"headerlink\" href=\"#system_tables-events\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about the number of events that have occurred in the system. For example, in the table, you can find how many <code>SELECT</code> queries were processed since the ClickHouse server started.</p>\n<p>Columns:</p>\n<ul>\n<li><code>event</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Event name.</li>\n<li><code>value</code> (<a href=\"#../data_types/int_uint/\">UInt64</a>) \u2014 Number of events occurred.</li>\n<li><code>description</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Event description.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">events</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">5</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500event\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u252c\u2500description\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Query                                 \u2502    12 \u2502 Number of queries to be interpreted and potentially executed. Does not include queries that failed to parse or were rejected due to AST size limits, quota limits or limits on the number of simultaneously running queries. May include internal queries initiated by ClickHouse itself. Does not count subqueries.                  \u2502\n\u2502 SelectQuery                           \u2502     8 \u2502 Same as Query, but only for SELECT queries.                                                                                                                                                                                                                \u2502\n\u2502 FileOpen                              \u2502    73 \u2502 Number of files opened.                                                                                                                                                                                                                                    \u2502\n\u2502 ReadBufferFromFileDescriptorRead      \u2502   155 \u2502 Number of reads (read/pread) from a file descriptor. Does not include sockets.                                                                                                                                                                             \u2502\n\u2502 ReadBufferFromFileDescriptorReadBytes \u2502  9931 \u2502 Number of bytes read from file descriptors. If the file is compressed, this will show the compressed data size.                                                                                                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#system_tables-asynchronous_metrics\">system.asynchronous_metrics</a> \u2014 Contains periodically calculated metrics.</li>\n<li><a href=\"#system_tables-metrics\">system.metrics</a> \u2014 Contains instantly calculated metrics.</li>\n<li><a href=\"#monitoring/\">Monitoring</a> \u2014 Base concepts of ClickHouse monitoring.</li>\n</ul>\n<h3 id=\"system-functions\">system.functions<a class=\"headerlink\" href=\"#system-functions\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about normal and aggregate functions.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code>(<code>String</code>) \u2013 The name of the function.</li>\n<li><code>is_aggregate</code>(<code>UInt8</code>) \u2014 Whether the function is aggregate.</li>\n</ul>\n<h3 id=\"system-graphite-retentions\">system.graphite_retentions<a class=\"headerlink\" href=\"#system-graphite-retentions\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about parameters <a href=\"#server_settings-graphite_rollup\">graphite_rollup</a> which are used in tables with <a href=\"#table_engines/graphitemergetree/\">*GraphiteMergeTree</a> engines.</p>\n<p>Columns:</p>\n<ul>\n<li><code>config_name</code>     (String) - <code>graphite_rollup</code> parameter name.</li>\n<li><code>regexp</code>          (String) - A pattern for the metric name.</li>\n<li><code>function</code>        (String) - The name of the aggregating function.</li>\n<li><code>age</code>             (UInt64) - The minimum age of the data in seconds.</li>\n<li><code>precision</code>       (UInt64) - How precisely to define the age of the data in seconds.</li>\n<li><code>priority</code>        (UInt16) - Pattern priority.</li>\n<li><code>is_default</code>      (UInt8) - Whether the pattern is the default.</li>\n<li><code>Tables.database</code> (Array(String)) - Array of names of database tables that use the <code>config_name</code> parameter.</li>\n<li><code>Tables.table</code>    (Array(String)) - Array of table names that use the <code>config_name</code> parameter.</li>\n</ul>\n<h3 id=\"system-merges\">system.merges<a class=\"headerlink\" href=\"#system-merges\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about merges and part mutations currently in process for tables in the MergeTree family.</p>\n<p>Columns:</p>\n<ul>\n<li><code>database</code> (String)  \u2014 The name of the database the table is in.</li>\n<li><code>table</code> (String) \u2014 Table name.</li>\n<li><code>elapsed</code> (Float64) \u2014 The time elapsed (in seconds) since the merge started.</li>\n<li><code>progress</code> (Float64) \u2014 The percentage of completed work from 0 to 1.</li>\n<li><code>num_parts</code> (UInt64) \u2014 The number of pieces to be merged.</li>\n<li><code>result_part_name</code> (String) \u2014 The name of the part that will be formed as the result of merging.</li>\n<li><code>is_mutation</code> (UInt8) - 1 if this process is a part mutation.</li>\n<li><code>total_size_bytes_compressed</code> (UInt64) \u2014 The total size of the compressed data in the merged chunks.</li>\n<li><code>total_size_marks</code> (UInt64) \u2014 The total number of marks in the merged parts.</li>\n<li><code>bytes_read_uncompressed</code> (UInt64) \u2014 Number of bytes read, uncompressed.</li>\n<li><code>rows_read</code> (UInt64) \u2014 Number of rows read.</li>\n<li><code>bytes_written_uncompressed</code> (UInt64) \u2014 Number of bytes written, uncompressed.</li>\n<li><code>rows_written</code> (UInt64) \u2014 Number of rows written.</li>\n</ul>\n<h3 id=\"system_tables-metrics\">system.metrics<a class=\"headerlink\" href=\"#system_tables-metrics\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains metrics which can be calculated instantly, or have a current value. For example, the number of simultaneously processed queries or the current replica delay. This table is always up to date.</p>\n<p>Columns:</p>\n<ul>\n<li><code>metric</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Metric name.</li>\n<li><code>value</code> (<a href=\"#../data_types/int_uint/\">Int64</a>) \u2014 Metric value.</li>\n<li><code>description</code> (<a href=\"#../data_types/string/\">String</a>) \u2014 Metric description.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">metrics</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">10</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500metric\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u252c\u2500description\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Query                      \u2502     1 \u2502 Number of executing queries                                                                                                                                                                      \u2502\n\u2502 Merge                      \u2502     0 \u2502 Number of executing background merges                                                                                                                                                            \u2502\n\u2502 PartMutation               \u2502     0 \u2502 Number of mutations (ALTER DELETE/UPDATE)                                                                                                                                                        \u2502\n\u2502 ReplicatedFetch            \u2502     0 \u2502 Number of data parts being fetched from replicas                                                                                                                                                \u2502\n\u2502 ReplicatedSend             \u2502     0 \u2502 Number of data parts being sent to replicas         ");
            
            document.write("                                                                                                                                             \u2502\n\u2502 ReplicatedChecks           \u2502     0 \u2502 Number of data parts checking for consistency                                                                                                                                                    \u2502\n\u2502 BackgroundPoolTask         \u2502     0 \u2502 Number of active tasks in BackgroundProcessingPool (merges, mutations, fetches, or replication queue bookkeeping)                                                                                \u2502\n\u2502 BackgroundSchedulePoolTask \u2502     0 \u2502 Number of active tasks in BackgroundSchedulePool. This pool is used for periodic ReplicatedMergeTree tasks, like cleaning old data parts, altering data parts, replica re-initialization, etc.   \u2502\n\u2502 DiskSpaceReservedForMerge  \u2502     0 \u2502 Disk space reserved for currently running background merges. It is slightly more than the total size of currently merging parts.                                                                     \u2502\n\u2502 DistributedSend            \u2502     0 \u2502 Number of connections to remote servers sending data that was INSERTed into Distributed tables. Both synchronous and asynchronous mode.                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#system_tables-asynchronous_metrics\">system.asynchronous_metrics</a> \u2014 Contains periodically calculated metrics.</li>\n<li><a href=\"#system_tables-events\">system.events</a> \u2014 Contains a number of events that occurred.</li>\n<li><a href=\"#monitoring/\">Monitoring</a> \u2014 Base concepts of ClickHouse monitoring.</li>\n</ul>\n<h3 id=\"system-numbers\">system.numbers<a class=\"headerlink\" href=\"#system-numbers\" title=\"Permanent link\">&para;</a></h3>\n<p>This table contains a single UInt64 column named 'number' that contains almost all the natural numbers starting from zero.<br />\nYou can use this table for tests, or if you need to do a brute force search.<br />\nReads from this table are not parallelized.</p>\n<h3 id=\"system-numbers-mt\">system.numbers_mt<a class=\"headerlink\" href=\"#system-numbers-mt\" title=\"Permanent link\">&para;</a></h3>\n<p>The same as 'system.numbers' but reads are parallelized. The numbers can be returned in any order.<br />\nUsed for tests.</p>\n<h3 id=\"system-one\">system.one<a class=\"headerlink\" href=\"#system-one\" title=\"Permanent link\">&para;</a></h3>\n<p>This table contains a single row with a single 'dummy' UInt8 column containing the value 0.<br />\nThis table is used if a SELECT query doesn't specify the FROM clause.<br />\nThis is similar to the DUAL table found in other DBMSs.</p>\n<h3 id=\"system_tables-parts\">system.parts<a class=\"headerlink\" href=\"#system_tables-parts\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about parts of <a href=\"#table_engines/mergetree/\">MergeTree</a> tables.</p>\n<p>Each row describes one data part.</p>\n<p>Columns:</p>\n<ul>\n<li>\n<p><code>partition</code> (String) \u2013 The partition name. To learn what a partition is, see the description of the <a href=\"#query_language_queries_alter\">ALTER</a> query.</p>\n<p>Formats:</p>\n<ul>\n<li><code>YYYYMM</code> for automatic partitioning by month.</li>\n<li><code>any_string</code> when partitioning manually.</li>\n</ul>\n</li>\n<li>\n<p><code>name</code> (String) \u2013 Name of the data part.</p>\n</li>\n<li><code>active</code> (UInt8) \u2013 Flag that indicates whether the part is active. If a part is active, it is used in a table; otherwise, it will be deleted. Inactive data parts remain after merging.</li>\n<li><code>marks</code> (UInt64) \u2013 The number of marks. To get the approximate number of rows in a data part, multiply <code>marks</code> by the index granularity (usually 8192) (this hint doesn't work for adaptive granularity).</li>\n<li><code>rows</code> (UInt64) \u2013 The number of rows.</li>\n<li><code>bytes_on_disk</code> (UInt64) \u2013 Total size of all the data part files in bytes.</li>\n<li><code>data_compressed_bytes</code> (UInt64) \u2013 Total size of compressed data in the data part. All the auxiliary files (for example, files with marks) are not included.</li>\n<li><code>data_uncompressed_bytes</code> (UInt64) \u2013 Total size of uncompressed data in the data part. All the auxiliary files (for example, files with marks) are not included.</li>\n<li><code>marks_bytes</code> (UInt64) \u2013 The size of the file with marks.</li>\n<li><code>modification_time</code> (DateTime) \u2013 The modification time of the directory with the data part. This usually corresponds to the time of data part creation.|</li>\n<li><code>remove_time</code> (DateTime) \u2013 The time when the data part became inactive.</li>\n<li><code>refcount</code> (UInt32) \u2013 The number of places where the data part is used. A value greater than 2 indicates that the data part is used in queries or merges.</li>\n<li><code>min_date</code> (Date) \u2013 The minimum value of the date key in the data part.</li>\n<li><code>max_date</code> (Date) \u2013 The maximum value of the date key in the data part.</li>\n<li><code>min_time</code> (DateTime) \u2013 The minimum value of the date and time key in the data part.</li>\n<li><code>max_time</code>(<code>DateTime</code>) \u2013 The maximum value of the date and time key in the data part.</li>\n<li><code>partition_id</code> (String) \u2013 Id of the partition.</li>\n<li><code>min_block_number</code> (UInt64) \u2013 The minimum number of data parts that make up the current part after merging.</li>\n<li><code>max_block_number</code> (UInt64) \u2013 The maximum number of data parts that make up the current part after merging.</li>\n<li><code>level</code> (UInt32) \u2013 Depth of the merge tree. Zero means that current part was created by insert rather than by merging other parts.</li>\n<li><code>data_version</code> (UInt64) \u2013 Number that is used to determine which mutations should be applied to the data part (the mutations with the higher version than <code>data_version</code>).</li>\n<li><code>primary_key_bytes_in_memory</code> (UInt64) \u2013 The amount of memory (in bytes) used by primary key values.</li>\n<li><code>primary_key_bytes_in_memory_allocated</code> (UInt64) \u2013 The amount of memory (in bytes) reserved for primary key values.</li>\n<li><code>is_frozen</code> (UInt8) \u2013 Flag that shows partition data backup existence. 1, the backup exists. 0, the backup doesn't exist. For more details, see <a href=\"#alter_freeze-partition\">FREEZE PARTITION</a></li>\n<li><code>database</code> (String) \u2013 Name of the database.</li>\n<li><code>table</code> (String) \u2013 Name of the table.</li>\n<li><code>engine</code> (String) \u2013 Name of the table engine without parameters.</li>\n<li><code>path</code> (String) \u2013 Absolute path to the folder with data part files.</li>\n<li><code>hash_of_all_files</code> (String) \u2013 <a href=\"#hash_functions-siphash128\">sipHash128</a> of compressed files.</li>\n<li><code>hash_of_uncompressed_files</code> (String) \u2013 <a href=\"#hash_functions-siphash128\">sipHash128</a> of uncompressed data.</li>\n<li><code>uncompressed_hash_of_compressed_files</code> (String) \u2013 <a href=\"#hash_functions-siphash128\">sipHash128</a> of the file with marks.</li>\n<li><code>bytes</code> (UInt64) \u2013 Alias for <code>bytes_on_disk</code>.</li>\n<li><code>marks_size</code> (UInt64) \u2013 Alias for <code>marks_bytes</code>.</li>\n</ul>\n<h3 id=\"system_tables-part-log\">system.part_log<a class=\"headerlink\" href=\"#system_tables-part-log\" title=\"Permanent link\">&para;</a></h3>\n<p>The <code>system.part_log</code> table is created only if the <a href=\"#server_settings-part-log\">part_log</a> server setting is specified.</p>\n<p>This table contains information about the events that occurred with the <a href=\"#table_engines/custom_partitioning_key/\">data parts</a> in the <a href=\"#table_engines/mergetree/\">MergeTree</a> family tables. For instance, adding or merging data.</p>\n<p>The <code>system.part_log</code> table contains the following columns:</p>\n<ul>\n<li><code>event_type</code> (Enum) \u2014 Type of the event that occurred with the data part. Can have one of the following values:<ul>\n<li><code>NEW_PART</code> \u2014 inserting</li>\n<li><code>MERGE_PARTS</code> \u2014 merging</li>\n<li><code>DOWNLOAD_PART</code> \u2014 downloading</li>\n<li><code>REMOVE_PART</code> \u2014 removing or detaching using <a href=\"#alter_detach-partition\">DETACH PARTITION</a></li>\n<li><code>MUTATE_PART</code> \u2014 updating.</li>\n</ul>\n</li>\n<li><code>event_date</code> (Date) \u2014 Event date.</li>\n<li><code>event_time</code> (DateTime) \u2014 Event time.</li>\n<li><code>duration_ms</code> (UInt64) \u2014 Duration.</li>\n<li><code>database</code> (String) \u2014 Name of the database the data part is in.</li>\n<li><code>table</code> (String) \u2014 Name of the table the data part is in.</li>\n<li><code>part_name</code> (String) \u2014 Name of the data part.</li>\n<li><code>partition_id</code> (String) \u2014 ID of the partition that the data part was inserted to. The column takes the 'all' value if the partitioning is by <code>tuple()</code>.</li>\n<li><code>rows</code> (UInt64) \u2014 The number of rows in the data part.</li>\n<li><code>size_in_bytes</code> (UInt64) \u2014 Size of the data part in bytes.</li>\n<li><code>merged_from</code> (Array(String)) \u2014 An array of names of the parts which the current part was made up from (after the merge).</li>\n<li><code>bytes_uncompressed</code> (UInt64) \u2014 Size of uncompressed bytes.</li>\n<li><code>read_rows</code> (UInt64) \u2014 The number of rows was read during the merge.</li>\n<li><code>read_bytes</code> (UInt64) \u2014 The number of bytes was read during the merge.</li>\n<li><code>error</code> (UInt16) \u2014 The code number of the occurred error.</li>\n<li><code>exception</code> (String) \u2014 Text message of the occurred error.</li>\n</ul>\n<p>The <code>system.part_log</code> table is created after the first inserting data to the <code>MergeTree</code> table.</p>\n<h3 id=\"system-processes\">system.processes<a class=\"headerlink\" href=\"#system-processes\" title=\"Permanent link\">&para;</a></h3>\n<p>This system table is used for implementing the <code>SHOW PROCESSLIST</code> query.<br />\nColumns:");
            
            document.write("</p>\n<ul>\n<li><code>user</code> (String)              \u2013 Name of the user who made the request. For distributed query processing, this is the user who helped the requestor server send the query to this server, not the user who made the distributed request on the requestor server.</li>\n<li><code>address</code> (String)           - The IP address the request was made from. The same for distributed processing.</li>\n<li><code>elapsed</code> (Float64)          - The time in seconds since request execution started.</li>\n<li><code>rows_read</code> (UInt64)         - The number of rows read from the table. For distributed processing, on the requestor server, this is the total for all remote servers.</li>\n<li><code>bytes_read</code> (UInt64)        - The number of uncompressed bytes read from the table. For distributed processing, on the requestor server, this is the total for all remote servers.</li>\n<li><code>total_rows_approx</code> (UInt64) - The approximation of the total number of rows that should be read. For distributed processing, on the requestor server, this is the total for all remote servers. It can be updated during request processing, when new sources to process become known.</li>\n<li><code>memory_usage</code> (UInt64)      - How much memory the request uses. It might not include some types of dedicated memory.</li>\n<li><code>query</code> (String)             - The query text. For INSERT, it doesn't include the data to insert.</li>\n<li><code>query_id</code> (String)          - Query ID, if defined.</li>\n</ul>\n<h3 id=\"system_tables-query-log\">system.query_log<a class=\"headerlink\" href=\"#system_tables-query-log\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about execution of queries. For each query, you can see processing start time, duration of processing, error messages and other information.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The table doesn't contain input data for <code>INSERT</code> queries.</p>\n</div>\n<p>ClickHouse creates this table only if the <a href=\"#server_settings-query-log\">query_log</a> server parameter is specified. This parameter sets the logging rules, such as the logging interval or the name of the table the queries will be logged in.</p>\n<p>To enable query logging, set the <a href=\"#settings-log-queries\">log_queries</a> parameter to 1. For details, see the <a href=\"#settings/settings/\">Settings</a> section.</p>\n<p>The <code>system.query_log</code> table registers two kinds of queries:</p>\n<ol>\n<li>Initial queries that were run directly by the client.</li>\n<li>Child queries that were initiated by other queries (for distributed query execution). For these types of queries, information about the parent queries is shown in the <code>initial_*</code> columns.</li>\n</ol>\n<p>Columns:</p>\n<ul>\n<li><code>type</code> (UInt8) \u2014 Type of event that occurred when executing the query. Possible values:<ul>\n<li>1 \u2014 Successful start of query execution.</li>\n<li>2 \u2014 Successful end of query execution.</li>\n<li>3 \u2014 Exception before the start of query execution.</li>\n<li>4 \u2014 Exception during the query execution.</li>\n</ul>\n</li>\n<li><code>event_date</code> (Date) \u2014 Event date.</li>\n<li><code>event_time</code> (DateTime) \u2014 Event time.</li>\n<li><code>query_start_time</code> (DateTime) \u2014 Start time of query execution.</li>\n<li><code>query_duration_ms</code> (UInt64) \u2014 Duration of query execution.</li>\n<li><code>read_rows</code> (UInt64) \u2014 Number of read rows.</li>\n<li><code>read_bytes</code> (UInt64) \u2014 Number of read bytes.</li>\n<li><code>written_rows</code> (UInt64) \u2014 For <code>INSERT</code> queries, the number of written rows. For other queries, the column value is 0.</li>\n<li><code>written_bytes</code> (UInt64) \u2014 For <code>INSERT</code> queries, the number of written bytes. For other queries, the column value is 0.</li>\n<li><code>result_rows</code> (UInt64) \u2014 Number of rows in the result.</li>\n<li><code>result_bytes</code> (UInt64) \u2014 Number of bytes in the result.</li>\n<li><code>memory_usage</code> (UInt64) \u2014 Memory consumption by the query.</li>\n<li><code>query</code> (String) \u2014 Query string.</li>\n<li><code>exception</code> (String) \u2014 Exception message.</li>\n<li><code>stack_trace</code> (String) \u2014 Stack trace (a list of methods called before the error occurred). An empty string, if the query is completed successfully.</li>\n<li><code>is_initial_query</code> (UInt8) \u2014 Kind of query. Possible values:<ul>\n<li>1 \u2014 Query was initiated by the client.</li>\n<li>0 \u2014 Query was initiated by another query for distributed query execution.</li>\n</ul>\n</li>\n<li><code>user</code> (String) \u2014 Name of the user who initiated the current query.</li>\n<li><code>query_id</code> (String) \u2014 ID of the query.</li>\n<li><code>address</code> (FixedString(16)) \u2014 IP address the query was initiated from.</li>\n<li><code>port</code> (UInt16) \u2014 The server port that was used to receive the query.</li>\n<li><code>initial_user</code> (String) \u2014  Name of the user who ran the parent query (for distributed query execution).</li>\n<li><code>initial_query_id</code> (String) \u2014 ID of the parent query.</li>\n<li><code>initial_address</code> (FixedString(16)) \u2014 IP address that the parent query was launched from.</li>\n<li><code>initial_port</code> (UInt16) \u2014 The server port that was used to receive the parent query from the client.</li>\n<li><code>interface</code> (UInt8) \u2014 Interface that the query was initiated from. Possible values:<ul>\n<li>1 \u2014 TCP.</li>\n<li>2 \u2014 HTTP.</li>\n</ul>\n</li>\n<li><code>os_user</code> (String) \u2014 User's OS.</li>\n<li><code>client_hostname</code> (String) \u2014 Server name that the <a href=\"#../interfaces/cli/\">clickhouse-client</a> is connected to.</li>\n<li><code>client_name</code> (String) \u2014 The <a href=\"#../interfaces/cli/\">clickhouse-client</a> name.</li>\n<li><code>client_revision</code> (UInt32) \u2014 Revision of the <a href=\"#../interfaces/cli/\">clickhouse-client</a>.</li>\n<li><code>client_version_major</code> (UInt32) \u2014 Major version of the <a href=\"#../interfaces/cli/\">clickhouse-client</a>.</li>\n<li><code>client_version_minor</code> (UInt32) \u2014 Minor version of the <a href=\"#../interfaces/cli/\">clickhouse-client</a>.</li>\n<li><code>client_version_patch</code> (UInt32) \u2014 Patch component of the <a href=\"#../interfaces/cli/\">clickhouse-client</a> version.</li>\n<li><code>http_method</code> (UInt8) \u2014 HTTP method that initiated the query. Possible values:<ul>\n<li>0 \u2014 The query was launched from the TCP interface.</li>\n<li>1 \u2014 <code>GET</code> method was used.</li>\n<li>2 \u2014 <code>POST</code> method was used.</li>\n</ul>\n</li>\n<li><code>http_user_agent</code> (String) \u2014 The <code>UserAgent</code> header passed in the HTTP request.</li>\n<li><code>quota_key</code> (String) \u2014 The quota key specified in the <a href=\"#quotas/\">quotas</a> setting.</li>\n<li><code>revision</code> (UInt32) \u2014 ClickHouse revision.</li>\n<li><code>thread_numbers</code> (Array(UInt32)) \u2014 Number of threads that are participating in query execution.</li>\n<li><code>ProfileEvents.Names</code> (Array(String)) \u2014 Counters that measure the following metrics:<ul>\n<li>Time spent on reading and writing over the network.</li>\n<li>Time spent on reading and writing to a disk.</li>\n<li>Number of network errors.</li>\n<li>Time spent on waiting when the network bandwidth is limited.</li>\n</ul>\n</li>\n<li><code>ProfileEvents.Values</code> (Array(UInt64)) \u2014 Values of metrics that are listed in the&#160;<code>ProfileEvents.Names</code> column.</li>\n<li><code>Settings.Names</code> (Array(String)) \u2014 Names of settings that were changed when the client ran the query. To enable logging changes to settings, set the <code>log_query_settings</code> parameter to 1.</li>\n<li><code>Settings.Values</code> (Array(String)) \u2014 Values of settings that are listed in the <code>Settings.Names</code> column.</li>\n</ul>\n<p>Each query creates one or two rows in the <code>query_log</code> table, depending on the status of the query:</p>\n<ol>\n<li>If the query execution is successful, two events with types 1 and 2 are created (see the <code>type</code> column).</li>\n<li>If an error occurred during query processing, two events with types 1 and 4 are created.</li>\n<li>If an error occurred before launching the query, a single event with type 3 is created.</li>\n</ol>\n<p>By default, logs are added to the table at intervals of 7.5 seconds. You can set this interval in the <a href=\"#server_settings-query-log\">query_log</a> server setting (see the <code>flush_interval_milliseconds</code> parameter). To flush the logs forcibly from the memory buffer into the table, use the <code>SYSTEM FLUSH LOGS</code> query.</p>\n<p>When the table is deleted manually, it will be automatically created on the fly. Note that all the previous logs will be deleted.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The storage period for logs is unlimited. Logs aren't automatically deleted from the table. You need to organize the removal of outdated logs yourself.</p>\n</div>\n<p>You can specify an arbitrary partitioning key for the <code>system.query_log</code> table in the <a href=\"#server_settings-query-log\">query_log</a> server setting (see the <code>partition_by</code> parameter).</p>\n<h3 id=\"system_tables-replicas\">system.replicas<a class=\"headerlink\" href=\"#system_tables-replicas\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information and status for replicated tables residing on the local server.<br />\nThis table can be used for monitoring. The table contains a row for every Replicated* table.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">replicas</span>\n<span class=\"k\">WHERE</span> <span class=\"k\">table</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;visits&#39;</span>\n<span class=\"n\">FORMAT</span> <span class=\"n\">Vertical</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Row 1:\n\u2500\u2500\u2500\u2500\u2500\u2500\ndatabase:           merge\ntable:              visits\nengine:             ReplicatedCollapsingMergeTree\nis_leader:          1\nis_readonly:        0\nis_session_expired: 0\nfuture_parts:       1\nparts_to_check:     ");
            
            document.write("0\nzookeeper_path:     /clickhouse/tables/01-06/visits\nreplica_name:       example01-06-1.yandex.ru\nreplica_path:       /clickhouse/tables/01-06/visits/replicas/example01-06-1.yandex.ru\ncolumns_version:    9\nqueue_size:         1\ninserts_in_queue:   0\nmerges_in_queue:    1\nlog_max_index:      596273\nlog_pointer:        596274\ntotal_replicas:     2\nactive_replicas:    2\n</code></pre></div>\n\n\n<p>Columns:</p>\n<div class=\"codehilite\"><pre><span></span><code>database:          Database name\ntable:              Table name\nengine:            Table engine name\n\nis_leader:          Whether the replica is the leader.\n\nOnly one replica at a time can be the leader. The leader is responsible for selecting background merges to perform.\nNote that writes can be performed to any replica that is available and has a session in ZK, regardless of whether it is a leader.\n\nis_readonly:        Whether the replica is in read-only mode.\nThis mode is turned on if the config doesn&#39;t have sections with ZooKeeper, if an unknown error occurred when reinitializing sessions in ZooKeeper, and during session reinitialization in ZooKeeper.\n\nis_session_expired: Whether the session with ZooKeeper has expired.\nBasically the same as &#39;is_readonly&#39;.\n\nfuture_parts:       The number of data parts that will appear as the result of INSERTs or merges that haven&#39;t been done yet.\n\nparts_to_check:    The number of data parts in the queue for verification.\nA part is put in the verification queue if there is suspicion that it might be damaged.\n\nzookeeper_path:     Path to table data in ZooKeeper.\nreplica_name:       Replica name in ZooKeeper. Different replicas of the same table have different names.\nreplica_path:      Path to replica data in ZooKeeper. The same as concatenating &#39;zookeeper_path/replicas/replica_path&#39;.\n\ncolumns_version:    Version number of the table structure.\nIndicates how many times ALTER was performed. If replicas have different versions, it means some replicas haven&#39;t made all of the ALTERs yet.\n\nqueue_size:         Size of the queue for operations waiting to be performed.\nOperations include inserting blocks of data, merges, and certain other actions.\nIt usually coincides with &#39;future_parts&#39;.\n\ninserts_in_queue:   Number of inserts of blocks of data that need to be made.\nInsertions are usually replicated fairly quickly. If this number is large, it means something is wrong.\n\nmerges_in_queue:    The number of merges waiting to be made.\nSometimes merges are lengthy, so this value may be greater than zero for a long time.\n\nThe next 4 columns have a non-zero value only where there is an active session with ZK.\n\nlog_max_index:      Maximum entry number in the log of general activity.\nlog_pointer:        Maximum entry number in the log of general activity that the replica copied to its execution queue, plus one.\nIf log_pointer is much smaller than log_max_index, something is wrong.\n\ntotal_replicas:     The total number of known replicas of this table.\nactive_replicas:    The number of replicas of this table that have a session in ZooKeeper (i.e., the number of functioning replicas).\n</code></pre></div>\n\n\n<p>If you request all the columns, the table may work a bit slowly, since several reads from ZooKeeper are made for each row.<br />\nIf you don't request the last 4 columns (log_max_index, log_pointer, total_replicas, active_replicas), the table works quickly.</p>\n<p>For example, you can check that everything is working correctly like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span>\n    <span class=\"k\">database</span><span class=\"p\">,</span>\n    <span class=\"k\">table</span><span class=\"p\">,</span>\n    <span class=\"n\">is_leader</span><span class=\"p\">,</span>\n    <span class=\"n\">is_readonly</span><span class=\"p\">,</span>\n    <span class=\"n\">is_session_expired</span><span class=\"p\">,</span>\n    <span class=\"n\">future_parts</span><span class=\"p\">,</span>\n    <span class=\"n\">parts_to_check</span><span class=\"p\">,</span>\n    <span class=\"n\">columns_version</span><span class=\"p\">,</span>\n    <span class=\"n\">queue_size</span><span class=\"p\">,</span>\n    <span class=\"n\">inserts_in_queue</span><span class=\"p\">,</span>\n    <span class=\"n\">merges_in_queue</span><span class=\"p\">,</span>\n    <span class=\"n\">log_max_index</span><span class=\"p\">,</span>\n    <span class=\"n\">log_pointer</span><span class=\"p\">,</span>\n    <span class=\"n\">total_replicas</span><span class=\"p\">,</span>\n    <span class=\"n\">active_replicas</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">replicas</span>\n<span class=\"k\">WHERE</span>\n       <span class=\"n\">is_readonly</span>\n    <span class=\"k\">OR</span> <span class=\"n\">is_session_expired</span>\n    <span class=\"k\">OR</span> <span class=\"n\">future_parts</span> <span class=\"o\">&gt;</span> <span class=\"mi\">20</span>\n    <span class=\"k\">OR</span> <span class=\"n\">parts_to_check</span> <span class=\"o\">&gt;</span> <span class=\"mi\">10</span>\n    <span class=\"k\">OR</span> <span class=\"n\">queue_size</span> <span class=\"o\">&gt;</span> <span class=\"mi\">20</span>\n    <span class=\"k\">OR</span> <span class=\"n\">inserts_in_queue</span> <span class=\"o\">&gt;</span> <span class=\"mi\">10</span>\n    <span class=\"k\">OR</span> <span class=\"n\">log_max_index</span> <span class=\"o\">-</span> <span class=\"n\">log_pointer</span> <span class=\"o\">&gt;</span> <span class=\"mi\">10</span>\n    <span class=\"k\">OR</span> <span class=\"n\">total_replicas</span> <span class=\"o\">&lt;</span> <span class=\"mi\">2</span>\n    <span class=\"k\">OR</span> <span class=\"n\">active_replicas</span> <span class=\"o\">&lt;</span> <span class=\"n\">total_replicas</span>\n</code></pre></div>\n\n\n<p>If this query doesn't return anything, it means that everything is fine.</p>\n<h3 id=\"system-settings\">system.settings<a class=\"headerlink\" href=\"#system-settings\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains information about settings that are currently in use.<br />\nI.e. used for executing the query you are using to read from the system.settings table.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (String) \u2014 Setting name.</li>\n<li><code>value</code> (String)  \u2014 Setting value.</li>\n<li><code>changed</code> (UInt8) \u2014 Whether the setting was explicitly defined in the config or explicitly changed.</li>\n</ul>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">settings</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">changed</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>\u250c\u2500name\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500value\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500changed\u2500\u2510\n\u2502 max_threads            \u2502 8           \u2502       1 \u2502\n\u2502 use_uncompressed_cache \u2502 0           \u2502       1 \u2502\n\u2502 load_balancing         \u2502 random      \u2502       1 \u2502\n\u2502 max_memory_usage       \u2502 10000000000 \u2502       1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></div>\n\n\n<h3 id=\"system-tables_1\">system.tables<a class=\"headerlink\" href=\"#system-tables_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains metadata of each table that the server knows about. Detached tables are not shown in <code>system.tables</code>.</p>\n<p>This table contains the following columns (the column type is shown in brackets):</p>\n<ul>\n<li><code>database</code> (String) \u2014 The name of the database the table is in.</li>\n<li><code>name</code> (String) \u2014 Table name.</li>\n<li><code>engine</code> (String) \u2014 Table engine name (without parameters).</li>\n<li><code>is_temporary</code> (UInt8) - Flag that indicates whether the table is temporary.</li>\n<li><code>data_path</code> (String) - Path to the table data in the file system.</li>\n<li><code>metadata_path</code> (String) - Path to the table metadata in the file system.</li>\n<li><code>metadata_modification_time</code> (DateTime) - Time of latest modification of the table metadata.</li>\n<li><code>dependencies_database</code> (Array(String)) - Database dependencies.</li>\n<li><code>dependencies_table</code> (Array(String)) - Table dependencies (<a href=\"#table_engines/materializedview/\">MaterializedView</a> tables based on the current table).</li>\n<li><code>create_table_query</code> (String) - The query that was used to create the table.</li>\n<li><code>engine_full</code> (String) - Parameters of the table engine.</li>\n<li><code>partition_key</code> (String) - The partition key expression specified in the table.</li>\n<li><code>sorting_key</code> (String) - The sorting key expression specified in the table.</li>\n<li><code>primary_key</code> (String) - The primary key expression specified in the table.</li>\n<li><code>sampling_key</code> (String) - The sampling key expression specified in the table.</li>\n</ul>\n<p>The <code>system.tables</code> table is used in <code>SHOW TABLES</code> query implementation.</p>\n<h3 id=\"system-zookeeper\">system.zookeeper<a class=\"headerlink\" href=\"#system-zookeeper\" title=\"Permanent link\">&para;</a></h3>\n<p>The table does not exist if ZooKeeper is not configured. Allows reading data from the ZooKeeper cluster defined in the config.<br />\nThe query must have a 'path' equality condition in the WHERE clause. This is the path in ZooKeeper for the children that you want to get data for.</p>\n<p>The query <code>SELECT * FROM system.zookeeper WHERE path = '/clickhouse'</code> outputs data for all children on the <code>/clickhouse</code> node.<br />\nTo output data for all root nodes, write path = '/'.<br />\nIf the path specified in 'path' doesn't exist, an exception will be thrown.</p>\n<p>Columns:</p>\n<ul>\n<li><code>name</code> (String) \u2014 The name of the node.</li>\n<li><code>path</code> (String) \u2014 The path to the node.</li>\n<li><code>value</code> (String) \u2014 Node value.</li>\n<li><code>dataLength</code> (Int32) \u2014 Size of the value.</li>\n<li><code>numChildren</code> (Int32) \u2014 Number of descendants.</li>\n<li><code>czxid</code> (Int64) \u2014 ID of the transaction that created the node.</li>\n<li><code>mzxid</code> (Int64) \u2014 ID of the transaction that last changed the node.</li>\n<li><code>pzxid</code> (Int64) \u2014 ID of the transaction that last deleted or added descendants.</li>\n<li><cod");
            
            document.write("e>ctime</code> (DateTime) \u2014 Time of node creation.</li>\n<li><code>mtime</code> (DateTime) \u2014 Time of the last modification of the node.</li>\n<li><code>version</code> (Int32) \u2014 Node version: the number of times the node was changed.</li>\n<li><code>cversion</code> (Int32) \u2014 Number of added or removed descendants.</li>\n<li><code>aversion</code> (Int32) \u2014 Number of changes to the ACL.</li>\n<li><code>ephemeralOwner</code> (Int64) \u2014 For ephemeral nodes, the ID of the session that owns this node.</li>\n</ul>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"k\">system</span><span class=\"p\">.</span><span class=\"n\">zookeeper</span>\n<span class=\"k\">WHERE</span> <span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;/clickhouse/tables/01-08/visits/replicas&#39;</span>\n<span class=\"n\">FORMAT</span> <span class=\"n\">Vertical</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Row 1:\n\u2500\u2500\u2500\u2500\u2500\u2500\nname:           example01-08-1.yandex.ru\nvalue:\nczxid:          932998691229\nmzxid:          932998691229\nctime:          2015-03-27 16:49:51\nmtime:          2015-03-27 16:49:51\nversion:        0\ncversion:       47\naversion:       0\nephemeralOwner: 0\ndataLength:     0\nnumChildren:    7\npzxid:          987021031383\npath:           /clickhouse/tables/01-08/visits/replicas\n\nRow 2:\n\u2500\u2500\u2500\u2500\u2500\u2500\nname:           example01-08-2.yandex.ru\nvalue:\nczxid:          933002738135\nmzxid:          933002738135\nctime:          2015-03-27 16:57:01\nmtime:          2015-03-27 16:57:01\nversion:        0\ncversion:       37\naversion:       0\nephemeralOwner: 0\ndataLength:     0\nnumChildren:    7\npzxid:          987021252247\npath:           /clickhouse/tables/01-08/visits/replicas\n</code></pre></div>\n\n\n<h3 id=\"system_tables-mutations\">system.mutations<a class=\"headerlink\" href=\"#system_tables-mutations\" title=\"Permanent link\">&para;</a></h3>\n<p>The table contains information about <a href=\"#alter-mutations\">mutations</a> of MergeTree tables and their progress. Each mutation command is represented by a single row. The table has the following columns:</p>\n<p><strong>database</strong>, <strong>table</strong> - The name of the database and table to which the mutation was applied.</p>\n<p><strong>mutation_id</strong> - The ID of the mutation. For replicated tables these IDs correspond to znode names in the <code>&lt;table_path_in_zookeeper&gt;/mutations/</code> directory in ZooKeeper. For unreplicated tables the IDs correspond to file names in the data directory of the table.</p>\n<p><strong>command</strong> - The mutation command string (the part of the query after <code>ALTER TABLE [db.]table</code>).</p>\n<p><strong>create_time</strong> - When this mutation command was submitted for execution.</p>\n<p><strong>block_numbers.partition_id</strong>, <strong>block_numbers.number</strong> - A nested column. For mutations of replicated tables, it contains one record for each partition: the partition ID and the block number that was acquired by the mutation (in each partition, only parts that contain blocks with numbers less than the block number acquired by the mutation in that partition will be mutated). In non-replicated tables, block numbers in all partitions form a single sequence. This means that for mutations of non-replicated tables, the column will contain one record with a single block number acquired by the mutation.</p>\n<p><strong>parts_to_do</strong> - The number of data parts that need to be mutated for the mutation to finish.</p>\n<p><strong>is_done</strong> - Is the mutation done? Note that even if <code>parts_to_do = 0</code> it is possible that a mutation of a replicated table is not done yet because of a long-running INSERT that will create a new data part that will need to be mutated.</p>\n<p>If there were problems with mutating some parts, the following columns contain additional information:</p>\n<p><strong>latest_failed_part</strong> - The name of the most recent part that could not be mutated.</p>\n<p><strong>latest_fail_time</strong> - The time of the most recent part mutation failure.</p>\n<p><strong>latest_fail_reason</strong> - The exception message that caused the most recent part mutation failure.</p>\n<p><a name=\"../operations/server_settings/\"></a><a name=\"../../../../operations/server_settings/\"></a><a name=\"operations/server_settings/\"></a><a name=\"server_settings/\"></a><a name=\"../../operations/server_settings/\"></a><a name=\"../../../../../operations/server_settings/\"></a><a name=\"../../../operations/server_settings/\"></a></p>\n<h2 id=\"server_settings\">Server configuration parameters<a class=\"headerlink\" href=\"#server_settings\" title=\"Permanent link\">&para;</a></h2>\n<p>This section contains descriptions of server settings that cannot be changed at the session or query level.</p>\n<p>These settings are stored in the <code>config.xml</code> file on the ClickHouse server.</p>\n<p>Other settings are described in the \"<a href=\"#settings\">Settings</a>\" section.</p>\n<p>Before studying the settings, read the <a href=\"#configuration_files\">Configuration files</a> section and note the use of substitutions (the <code>incl</code> and <code>optional</code> attributes).</p>\n<p><a name=\"../server_settings/settings/\"></a><a name=\"settings/\"></a><a name=\"../operations/server_settings/settings/\"></a><a name=\"../../server_settings/settings/\"></a><a name=\"../../../../server_settings/settings/\"></a><a name=\"../../../../../operations/server_settings/settings/\"></a><a name=\"../../../operations/server_settings/settings/\"></a><a name=\"operations/server_settings/settings/\"></a><a name=\"../../../../operations/server_settings/settings/\"></a><a name=\"../../../server_settings/settings/\"></a><a name=\"../../operations/server_settings/settings/\"></a><a name=\"server_settings/settings/\"></a><a name=\"../../../../../../server_settings/settings/\"></a><a name=\"../../../../../server_settings/settings/\"></a></p>\n<h2 id=\"server-settings\">Server settings<a class=\"headerlink\" href=\"#server-settings\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"builtin-dictionaries-reload-interval\">builtin_dictionaries_reload_interval<a class=\"headerlink\" href=\"#builtin-dictionaries-reload-interval\" title=\"Permanent link\">&para;</a></h3>\n<p>The interval in seconds before reloading built-in dictionaries.</p>\n<p>ClickHouse reloads built-in dictionaries every x seconds. This makes it possible to edit dictionaries \"on the fly\" without restarting the server.</p>\n<p>Default value: 3600.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;builtin_dictionaries_reload_interval&gt;</span>3600<span class=\"nt\">&lt;/builtin_dictionaries_reload_interval&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"compression\">compression<a class=\"headerlink\" href=\"#compression\" title=\"Permanent link\">&para;</a></h3>\n<p>Data compression settings.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Don't use it if you have just started using ClickHouse.</p>\n</div>\n<p>The configuration looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;compression&gt;</span>\n    <span class=\"nt\">&lt;case&gt;</span>\n      <span class=\"nt\">&lt;parameters/&gt;</span>\n    <span class=\"nt\">&lt;/case&gt;</span>\n    ...\n<span class=\"nt\">&lt;/compression&gt;</span>\n</code></pre></div>\n\n\n<p>You can configure multiple sections <code>&lt;case&gt;</code>.</p>\n<p>Block field <code>&lt;case&gt;</code>:</p>\n<ul>\n<li><code>min_part_size</code> \u2013 The minimum size of a table part.</li>\n<li><code>min_part_size_ratio</code> \u2013 The ratio of the minimum size of a table part to the full size of the table.</li>\n<li><code>method</code> \u2013 Compression method. Acceptable values \u200b: <code>lz4</code> or <code>zstd</code>(experimental).</li>\n</ul>\n<p>ClickHouse checks <code>min_part_size</code> and <code>min_part_size_ratio</code> and processes the <code>case</code> blocks that match these conditions. If none of the <code>&lt;case&gt;</code> matches, ClickHouse applies the <code>lz4</code> compression algorithm.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;compression</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;clickhouse_compression&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;case&gt;</span>\n        <span class=\"nt\">&lt;min_part_size&gt;</span>10000000000<span class=\"nt\">&lt;/min_part_size&gt;</span>\n        <span class=\"nt\">&lt;min_part_size_ratio&gt;</span>0.01<span class=\"nt\">&lt;/min_part_size_ratio&gt;</span>\n        <span class=\"nt\">&lt;method&gt;</span>zstd<span class=\"nt\">&lt;/method&gt;</span>\n    <span class=\"nt\">&lt;/case&gt;</span>\n<span class=\"nt\">&lt;/compression&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"default-database\">default_database<a class=\"headerlink\" href=\"#default-database\" title=\"Permanent link\">&para;</a></h3>\n<p>The default database.</p>\n<p>To get a list of databases, use the <a href=\"#show-databases\">SHOW DATABASES</a> query.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;default_database&gt;</span>default<span class=\"nt\">&lt;/default_database&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"default-profile\">default_profile<a class=\"headerlink\" href=\"#default-profile\" title=\"Permanent link\">&para;</a></h3>\n<p>Default settings profile.</p>\n<p>Settings profiles are located in the file specified in the parameter <code>user_config</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;default_profile&gt;</span>default<span class=\"nt\">&lt;/default_profile&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-dictionaries_config\">dictionaries_config<a class=\"headerlink\" href=\"#server_settings-dictionaries_config\" title=\"Permanent link\">&para;</a></h3>\n<p>The path to the config file for external dictionaries.</p>\n<p>Path:</p>\n<ul>\n<li>Specify the absolute path or the path relative to the server config file.</li>\n<li>The path can contain wildcards * and ?.</li>\n</ul>\n<p>See also \"<a href=\"#../../query_language/dicts/external_dicts/\">External dict");
            
            document.write("ionaries</a>\".</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionaries_config&gt;</span>*_dictionary.xml<span class=\"nt\">&lt;/dictionaries_config&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-dictionaries_lazy_load\">dictionaries_lazy_load<a class=\"headerlink\" href=\"#server_settings-dictionaries_lazy_load\" title=\"Permanent link\">&para;</a></h3>\n<p>Lazy loading of dictionaries.</p>\n<p>If <code>true</code>, then each dictionary is created on first use. If dictionary creation failed, the function that was using the dictionary throws an exception.</p>\n<p>If <code>false</code>, all dictionaries are created when the server starts, and if there is an error, the server shuts down.</p>\n<p>The default is <code>true</code>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;dictionaries_lazy_load&gt;</span>true<span class=\"nt\">&lt;/dictionaries_lazy_load&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-format_schema_path\">format_schema_path<a class=\"headerlink\" href=\"#server_settings-format_schema_path\" title=\"Permanent link\">&para;</a></h3>\n<p>The path to the directory with the schemes for the input data, such as schemas for the <a href=\"#capnproto\">CapnProto</a> format.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>  <span class=\"c\">&lt;!-- Directory containing schema files for various input formats. --&gt;</span>\n  <span class=\"nt\">&lt;format_schema_path&gt;</span>format_schemas/<span class=\"nt\">&lt;/format_schema_path&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-graphite\">graphite<a class=\"headerlink\" href=\"#server_settings-graphite\" title=\"Permanent link\">&para;</a></h3>\n<p>Sending data to <a href=\"https://github.com/graphite-project\" rel=\"external nofollow noreferrer\">Graphite</a>.</p>\n<p>Settings:</p>\n<ul>\n<li>host \u2013 The Graphite server.</li>\n<li>port \u2013 The port on the Graphite server.</li>\n<li>interval \u2013 The interval for sending, in seconds.</li>\n<li>timeout \u2013 The timeout for sending data, in seconds.</li>\n<li>root_path \u2013 Prefix for keys.</li>\n<li>metrics \u2013 Sending data from a :ref:<code>system_tables-system.metrics</code> table.</li>\n<li>events \u2013 Sending deltas data accumulated for the time period from a :ref:<code>system_tables-system.events</code> table</li>\n<li>events_cumulative \u2013 Sending cumulative data from a :ref:<code>system_tables-system.events</code> table</li>\n<li>asynchronous_metrics \u2013 Sending data from a :ref:<code>system_tables-system.asynchronous_metrics</code> table.</li>\n</ul>\n<p>You can configure multiple <code>&lt;graphite&gt;</code> clauses. For instance, you can use this for sending different data at different intervals.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;graphite&gt;</span>\n    <span class=\"nt\">&lt;host&gt;</span>localhost<span class=\"nt\">&lt;/host&gt;</span>\n    <span class=\"nt\">&lt;port&gt;</span>42000<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;timeout&gt;</span>0.1<span class=\"nt\">&lt;/timeout&gt;</span>\n    <span class=\"nt\">&lt;interval&gt;</span>60<span class=\"nt\">&lt;/interval&gt;</span>\n    <span class=\"nt\">&lt;root_path&gt;</span>one_min<span class=\"nt\">&lt;/root_path&gt;</span>\n    <span class=\"nt\">&lt;metrics&gt;</span>true<span class=\"nt\">&lt;/metrics&gt;</span>\n    <span class=\"nt\">&lt;events&gt;</span>true<span class=\"nt\">&lt;/events&gt;</span>\n    <span class=\"nt\">&lt;events_cumulative&gt;</span>false<span class=\"nt\">&lt;/events_cumulative&gt;</span>\n    <span class=\"nt\">&lt;asynchronous_metrics&gt;</span>true<span class=\"nt\">&lt;/asynchronous_metrics&gt;</span>\n<span class=\"nt\">&lt;/graphite&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-graphite_rollup\">graphite_rollup<a class=\"headerlink\" href=\"#server_settings-graphite_rollup\" title=\"Permanent link\">&para;</a></h3>\n<p>Settings for thinning data for Graphite.</p>\n<p>For more details, see <a href=\"#../../operations/table_engines/graphitemergetree/\">GraphiteMergeTree</a>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;graphite_rollup_example&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"nt\">&lt;function&gt;</span>max<span class=\"nt\">&lt;/function&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>0<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>60<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>3600<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>300<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n        <span class=\"nt\">&lt;retention&gt;</span>\n            <span class=\"nt\">&lt;age&gt;</span>86400<span class=\"nt\">&lt;/age&gt;</span>\n            <span class=\"nt\">&lt;precision&gt;</span>3600<span class=\"nt\">&lt;/precision&gt;</span>\n        <span class=\"nt\">&lt;/retention&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n<span class=\"nt\">&lt;/graphite_rollup_example&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"http-port-https-port\">http_port/https_port<a class=\"headerlink\" href=\"#http-port-https-port\" title=\"Permanent link\">&para;</a></h3>\n<p>The port for connecting to the server over HTTP(s).</p>\n<p>If <code>https_port</code> is specified, <a href=\"#server_settings-openssl\">openSSL</a> must be configured.</p>\n<p>If <code>http_port</code> is specified, the openSSL configuration is ignored even if it is set.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;https&gt;</span>0000<span class=\"nt\">&lt;/https&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"http-server-default-response\">http_server_default_response<a class=\"headerlink\" href=\"#http-server-default-response\" title=\"Permanent link\">&para;</a></h3>\n<p>The page that is shown by default when you access the ClickHouse HTTP(s) server.</p>\n<p><strong>Example</strong></p>\n<p>Opens <code>https://tabix.io/</code> when accessing <code>http://localhost: http_port</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;http_server_default_response&gt;</span>\n  <span class=\"cp\">&lt;![CDATA[&lt;html ng-app=&quot;SMI2&quot;&gt;&lt;head&gt;&lt;base href=&quot;http://ui.tabix.io/&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;div ui-view=&quot;&quot; class=&quot;content-ui&quot;&gt;&lt;/div&gt;&lt;script src=&quot;http://loader.tabix.io/master.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;]]&gt;</span>\n<span class=\"nt\">&lt;/http_server_default_response&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-include_from\">include_from<a class=\"headerlink\" href=\"#server_settings-include_from\" title=\"Permanent link\">&para;</a></h3>\n<p>The path to the file with substitutions.</p>\n<p>For more information, see the section \"<a href=\"#configuration_files\">Configuration files</a>\".</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;include_from&gt;</span>/etc/metrica.xml<span class=\"nt\">&lt;/include_from&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"interserver-http-port\">interserver_http_port<a class=\"headerlink\" href=\"#interserver-http-port\" title=\"Permanent link\">&para;</a></h3>\n<p>Port for exchanging data between ClickHouse servers.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;interserver_http_port&gt;</span>9009<span class=\"nt\">&lt;/interserver_http_port&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"interserver-http-host\">interserver_http_host<a class=\"headerlink\" href=\"#interserver-http-host\" title=\"Permanent link\">&para;</a></h3>\n<p>The host name that can be used by other servers to access this server.</p>\n<p>If omitted, it is defined in the same way as the <code>hostname-f</code> command.</p>\n<p>Useful for breaking away from a specific network interface.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;interserver_http_host&gt;</span>example.yandex.ru<span class=\"nt\">&lt;/interserver_http_host&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"keep-alive-timeout\">keep_alive_timeout<a class=\"headerlink\" href=\"#keep-alive-timeout\" title=\"Permanent link\">&para;</a></h3>\n<p>The number of seconds that ClickHouse waits for incoming requests before closing the connection. Defaults to 3 seconds.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;keep_alive_timeout&gt;</span>3<span class=\"nt\">&lt;/keep_alive_timeout&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-listen_host\">listen_host<a class=\"headerlink\" href=\"#server_settings-listen_host\" title=\"Permanent link\">&para;</a></h3>\n<p>Restriction on hosts that requests can come from. If you want the server to answer all of them, specify <code>::</code>.</p>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;listen_host&gt;</span>::1<span class=\"nt\">&lt;/listen_host&gt;</span>\n<span class=\"nt\">&lt;listen_host&gt;</span>127.0.0.1<span class=\"nt\">&lt;/listen_host&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-logger\">logger<a class=\"headerlink\" href=\"#server_settings-logger\" title=\"Permanent link\">&para;</a></h3>\n<p>Logging settings.</p>\n<p>Keys:</p>\n<ul>\n<li>level \u2013 Logging level. Acceptable values: <code>trace</code>, <code>debug</code>, <code>information</code>, <code>warning</code>, <code>error</code>.</li>\n<li>log \u2013 The log file. Contains all the entries according to <code>level</code>.</li>\n<li>errorlog \u2013 Error log file.</li>\n<li>size \u2013 Size of the file. Applies to <code>log</code>and<code>errorlog</code>. Once the file reaches <code>size</code>, ClickHouse archives and renames it, and creates a new log file in its place.</li>\n<li>count \u2013 The number of archived log files that ClickHouse stores.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><spa");
            
            document.write("n></span><code><span class=\"nt\">&lt;logger&gt;</span>\n    <span class=\"nt\">&lt;level&gt;</span>trace<span class=\"nt\">&lt;/level&gt;</span>\n    <span class=\"nt\">&lt;log&gt;</span>/var/log/clickhouse-server/clickhouse-server.log<span class=\"nt\">&lt;/log&gt;</span>\n    <span class=\"nt\">&lt;errorlog&gt;</span>/var/log/clickhouse-server/clickhouse-server.err.log<span class=\"nt\">&lt;/errorlog&gt;</span>\n    <span class=\"nt\">&lt;size&gt;</span>1000M<span class=\"nt\">&lt;/size&gt;</span>\n    <span class=\"nt\">&lt;count&gt;</span>10<span class=\"nt\">&lt;/count&gt;</span>\n<span class=\"nt\">&lt;/logger&gt;</span>\n</code></pre></div>\n\n\n<p>Writing to the syslog is also supported. Config example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;logger&gt;</span>\n    <span class=\"nt\">&lt;use_syslog&gt;</span>1<span class=\"nt\">&lt;/use_syslog&gt;</span>\n    <span class=\"nt\">&lt;syslog&gt;</span>\n        <span class=\"nt\">&lt;address&gt;</span>syslog.remote:10514<span class=\"nt\">&lt;/address&gt;</span>\n        <span class=\"nt\">&lt;hostname&gt;</span>myhost.local<span class=\"nt\">&lt;/hostname&gt;</span>\n        <span class=\"nt\">&lt;facility&gt;</span>LOG_LOCAL6<span class=\"nt\">&lt;/facility&gt;</span>\n        <span class=\"nt\">&lt;format&gt;</span>syslog<span class=\"nt\">&lt;/format&gt;</span>\n    <span class=\"nt\">&lt;/syslog&gt;</span>\n<span class=\"nt\">&lt;/logger&gt;</span>\n</code></pre></div>\n\n\n<p>Keys:</p>\n<ul>\n<li>use_syslog \u2014 Required setting if you want to write to the syslog.</li>\n<li>address \u2014 The host[:port] of syslogd. If omitted, the local daemon is used.</li>\n<li>hostname \u2014 Optional. The name of the host that logs are sent from.</li>\n<li>facility \u2014 <a href=\"https://en.wikipedia.org/wiki/Syslog#Facility\" rel=\"external nofollow noreferrer\">The syslog facility keyword</a> in uppercase letters with the \"LOG_\" prefix: (<code>LOG_USER</code>, <code>LOG_DAEMON</code>, <code>LOG_LOCAL3</code>, and so on).<br />\nDefault value: <code>LOG_USER</code> if <code>address</code> is specified, <code>LOG_DAEMON otherwise.</code></li>\n<li>format \u2013 Message format. Possible values: <code>bsd</code> and <code>syslog.</code></li>\n</ul>\n<h3 id=\"macros\">macros<a class=\"headerlink\" href=\"#macros\" title=\"Permanent link\">&para;</a></h3>\n<p>Parameter substitutions for replicated tables.</p>\n<p>Can be omitted if replicated tables are not used.</p>\n<p>For more information, see the section \"<a href=\"#../../operations/table_engines/replication/\">Creating replicated tables</a>\".</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;macros</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;macros&quot;</span> <span class=\"na\">optional=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"mark-cache-size\">mark_cache_size<a class=\"headerlink\" href=\"#mark-cache-size\" title=\"Permanent link\">&para;</a></h3>\n<p>Approximate size (in bytes) of the cache of \"marks\" used by <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>.</p>\n<p>The cache is shared for the server and memory is allocated as needed. The cache size must be at least 5368709120.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;mark_cache_size&gt;</span>5368709120<span class=\"nt\">&lt;/mark_cache_size&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"max-concurrent-queries\">max_concurrent_queries<a class=\"headerlink\" href=\"#max-concurrent-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of simultaneously processed requests.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;max_concurrent_queries&gt;</span>100<span class=\"nt\">&lt;/max_concurrent_queries&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"max-connections\">max_connections<a class=\"headerlink\" href=\"#max-connections\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of inbound connections.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;max_connections&gt;</span>4096<span class=\"nt\">&lt;/max_connections&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"max-open-files\">max_open_files<a class=\"headerlink\" href=\"#max-open-files\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of open files.</p>\n<p>By default: <code>maximum</code>.</p>\n<p>We recommend using this option in Mac OS X, since the <code>getrlimit()</code> function returns an incorrect value.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;max_open_files&gt;</span>262144<span class=\"nt\">&lt;/max_open_files&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"max-table-size-to-drop\">max_table_size_to_drop<a class=\"headerlink\" href=\"#max-table-size-to-drop\" title=\"Permanent link\">&para;</a></h3>\n<p>Restriction on deleting tables.</p>\n<p>If the size of a <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a> table exceeds <code>max_table_size_to_drop</code> (in bytes), you can't delete it using a DROP query.</p>\n<p>If you still need to delete the table without restarting the ClickHouse server, create the <code>&lt;clickhouse-path&gt;/flags/force_drop_table</code> file and run the DROP query.</p>\n<p>Default value: 50 GB.</p>\n<p>The value 0 means that you can delete all tables without any restrictions.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;max_table_size_to_drop&gt;</span>0<span class=\"nt\">&lt;/max_table_size_to_drop&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-merge_tree\">merge_tree<a class=\"headerlink\" href=\"#server_settings-merge_tree\" title=\"Permanent link\">&para;</a></h3>\n<p>Fine tuning for tables in the <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>.</p>\n<p>For more information, see the MergeTreeSettings.h header file.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;merge_tree&gt;</span>\n    <span class=\"nt\">&lt;max_suspicious_broken_parts&gt;</span>5<span class=\"nt\">&lt;/max_suspicious_broken_parts&gt;</span>\n<span class=\"nt\">&lt;/merge_tree&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-openssl\">openSSL<a class=\"headerlink\" href=\"#server_settings-openssl\" title=\"Permanent link\">&para;</a></h3>\n<p>SSL client/server configuration.</p>\n<p>Support for SSL is provided by the <code>libpoco</code> library. The interface is described in the file <a href=\"https://github.com/ClickHouse-Extras/poco/blob/master/NetSSL_OpenSSL/include/Poco/Net/SSLManager.h\" rel=\"external nofollow noreferrer\">SSLManager.h</a></p>\n<p>Keys for server/client settings:</p>\n<ul>\n<li>privateKeyFile \u2013 The path to the file with the secret key of the PEM certificate. The file may contain a key and certificate at the same time.</li>\n<li>certificateFile \u2013 The path to the client/server certificate file in PEM format. You can omit it if <code>privateKeyFile</code> contains the certificate.</li>\n<li>caConfig \u2013 The path to the file or directory that contains trusted root certificates.</li>\n<li>verificationMode \u2013 The method for checking the node's certificates. Details are in the description of the <a href=\"https://github.com/ClickHouse-Extras/poco/blob/master/NetSSL_OpenSSL/include/Poco/Net/Context.h\" rel=\"external nofollow noreferrer\">Context</a> class. Possible values: <code>none</code>, <code>relaxed</code>, <code>strict</code>, <code>once</code>.</li>\n<li>verificationDepth \u2013 The maximum length of the verification chain. Verification will fail if the certificate chain length exceeds the set value.</li>\n<li>loadDefaultCAFile \u2013 Indicates that built-in CA certificates for OpenSSL will be used. Acceptable values: <code>true</code>, <code>false</code>.  |</li>\n<li>cipherList \u2013 Supported OpenSSL encryptions. For example: <code>ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH</code>.</li>\n<li>cacheSessions \u2013 Enables or disables caching sessions. Must be used in combination with <code>sessionIdContext</code>. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>sessionIdContext \u2013 A unique set of random characters that the server appends to each generated identifier. The length of the string must not exceed <code>SSL_MAX_SSL_SESSION_ID_LENGTH</code>. This parameter is always recommended, since it helps avoid problems both if the server caches the session and if the client requested caching. Default value: <code>${application.name}</code>.</li>\n<li>sessionCacheSize \u2013 The maximum number of sessions that the server caches. Default value: 1024*20. 0 \u2013 Unlimited sessions.</li>\n<li>sessionTimeout \u2013 Time for caching the session on the server.</li>\n<li>extendedVerification \u2013 Automatically extended verification of certificates after the session ends. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>requireTLSv1 \u2013 Require a TLSv1 connection. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>requireTLSv1_1 \u2013 Require a TLSv1.1 connection. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>requireTLSv1 \u2013 Require a TLSv1.2 connection. Acceptable values: <code>true</code>, <code>false</code>.</li>\n<li>fips \u2013 Activates OpenSSL FIPS mode. Supported if the library's OpenSSL version supports FIPS.</li>\n<li>privateKeyPassphraseHandler \u2013 Class (PrivateKeyPassphraseHandler subclass) that requests the passphrase for accessing the private key. For example: <code>&lt;privateKeyPassphraseHandler&gt;</code>, <code>&lt;name&gt;KeyFileHandler&lt;/name&gt;</code>, <code>&lt;options&gt;&lt;password&gt;test&lt;/password&gt;&lt;/options&gt;</code>, <code>&lt;/privateKeyPassphraseHandler&gt;</code>.</li>\n<li>invalidCertificateHandler \u2013 Class (subclass of CertificateHandler) for verifying invalid certificates. For example: <code>&lt;invalidCertificateHandler&gt; &lt;name&gt;ConsoleCertificateHandler&lt;/name&gt; &lt;/invalidCertificateHandler&gt;</code> .</li>\n<li>disableProtocols \u2013 Protocols that are not allowed to use.</li>\n<li>preferServerCiphers \u2013 Preferred server ciphers on the client.</li>\n</ul>\n<p><strong>Example of settings:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=");
            
            document.write("\"nt\">&lt;openSSL&gt;</span>\n    <span class=\"nt\">&lt;server&gt;</span>\n        <span class=\"c\">&lt;!-- openssl req -subj &quot;/CN=localhost&quot; -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout /etc/clickhouse-server/server.key -out /etc/clickhouse-server/server.crt --&gt;</span>\n        <span class=\"nt\">&lt;certificateFile&gt;</span>/etc/clickhouse-server/server.crt<span class=\"nt\">&lt;/certificateFile&gt;</span>\n        <span class=\"nt\">&lt;privateKeyFile&gt;</span>/etc/clickhouse-server/server.key<span class=\"nt\">&lt;/privateKeyFile&gt;</span>\n        <span class=\"c\">&lt;!-- openssl dhparam -out /etc/clickhouse-server/dhparam.pem 4096 --&gt;</span>\n        <span class=\"nt\">&lt;dhParamsFile&gt;</span>/etc/clickhouse-server/dhparam.pem<span class=\"nt\">&lt;/dhParamsFile&gt;</span>\n        <span class=\"nt\">&lt;verificationMode&gt;</span>none<span class=\"nt\">&lt;/verificationMode&gt;</span>\n        <span class=\"nt\">&lt;loadDefaultCAFile&gt;</span>true<span class=\"nt\">&lt;/loadDefaultCAFile&gt;</span>\n        <span class=\"nt\">&lt;cacheSessions&gt;</span>true<span class=\"nt\">&lt;/cacheSessions&gt;</span>\n        <span class=\"nt\">&lt;disableProtocols&gt;</span>sslv2,sslv3<span class=\"nt\">&lt;/disableProtocols&gt;</span>\n        <span class=\"nt\">&lt;preferServerCiphers&gt;</span>true<span class=\"nt\">&lt;/preferServerCiphers&gt;</span>\n    <span class=\"nt\">&lt;/server&gt;</span>\n    <span class=\"nt\">&lt;client&gt;</span>\n        <span class=\"nt\">&lt;loadDefaultCAFile&gt;</span>true<span class=\"nt\">&lt;/loadDefaultCAFile&gt;</span>\n        <span class=\"nt\">&lt;cacheSessions&gt;</span>true<span class=\"nt\">&lt;/cacheSessions&gt;</span>\n        <span class=\"nt\">&lt;disableProtocols&gt;</span>sslv2,sslv3<span class=\"nt\">&lt;/disableProtocols&gt;</span>\n        <span class=\"nt\">&lt;preferServerCiphers&gt;</span>true<span class=\"nt\">&lt;/preferServerCiphers&gt;</span>\n        <span class=\"c\">&lt;!-- Use for self-signed: &lt;verificationMode&gt;none&lt;/verificationMode&gt; --&gt;</span>\n        <span class=\"nt\">&lt;invalidCertificateHandler&gt;</span>\n            <span class=\"c\">&lt;!-- Use for self-signed: &lt;name&gt;AcceptCertificateHandler&lt;/name&gt; --&gt;</span>\n            <span class=\"nt\">&lt;name&gt;</span>RejectCertificateHandler<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;/invalidCertificateHandler&gt;</span>\n    <span class=\"nt\">&lt;/client&gt;</span>\n<span class=\"nt\">&lt;/openSSL&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-part-log\">part_log<a class=\"headerlink\" href=\"#server_settings-part-log\" title=\"Permanent link\">&para;</a></h3>\n<p>Logging events that are associated with <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>. For instance, adding or merging data. You can use the log to simulate merge algorithms and compare their characteristics. You can visualize the merge process.</p>\n<p>Queries are logged in the <a href=\"#system_tables-part-log\">system.part_log</a> table, not in a separate file. You can configure the name of this table in the <code>table</code> parameter (see below).</p>\n<p>Use the following parameters to configure logging:</p>\n<ul>\n<li><code>database</code> \u2013 Name of the database.</li>\n<li><code>table</code> \u2013 Name of the system table.</li>\n<li><code>partition_by</code> \u2013 Sets a <a href=\"#../../operations/table_engines/custom_partitioning_key/\">custom partitioning key</a>.</li>\n<li><code>flush_interval_milliseconds</code> \u2013 Interval for flushing data from the buffer in memory to the table.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;part_log&gt;</span>\n    <span class=\"nt\">&lt;database&gt;</span>system<span class=\"nt\">&lt;/database&gt;</span>\n    <span class=\"nt\">&lt;table&gt;</span>part_log<span class=\"nt\">&lt;/table&gt;</span>\n    <span class=\"nt\">&lt;partition_by&gt;</span>toMonday(event_date)<span class=\"nt\">&lt;/partition_by&gt;</span>\n    <span class=\"nt\">&lt;flush_interval_milliseconds&gt;</span>7500<span class=\"nt\">&lt;/flush_interval_milliseconds&gt;</span>\n<span class=\"nt\">&lt;/part_log&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-path\">path<a class=\"headerlink\" href=\"#server_settings-path\" title=\"Permanent link\">&para;</a></h3>\n<p>The path to the directory containing data.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The trailing slash is mandatory.</p>\n</div>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;path&gt;</span>/var/lib/clickhouse/<span class=\"nt\">&lt;/path&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-query-log\">query_log<a class=\"headerlink\" href=\"#server_settings-query-log\" title=\"Permanent link\">&para;</a></h3>\n<p>Setting for logging queries received with the <a href=\"#../settings/settings/\">log_queries=1</a> setting.</p>\n<p>Queries are logged in the <a href=\"#system_tables-query-log\">system.query_log</a> table, not in a separate file. You can change the name of the table in the <code>table</code> parameter (see below).</p>\n<p>Use the following parameters to configure logging:</p>\n<ul>\n<li><code>database</code> \u2013 Name of the database.</li>\n<li><code>table</code> \u2013 Name of the system table the queries will be logged in.</li>\n<li><code>partition_by</code> \u2013 Sets a <a href=\"#../../operations/table_engines/custom_partitioning_key/\">custom partitioning key</a> for a system table.</li>\n<li><code>flush_interval_milliseconds</code> \u2013 Interval for flushing data from the buffer in memory to the table.</li>\n</ul>\n<p>If the table doesn't exist, ClickHouse will create it. If the structure of the query log changed when the ClickHouse server was updated, the table with the old structure is renamed, and a new table is created automatically.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;query_log&gt;</span>\n    <span class=\"nt\">&lt;database&gt;</span>system<span class=\"nt\">&lt;/database&gt;</span>\n    <span class=\"nt\">&lt;table&gt;</span>query_log<span class=\"nt\">&lt;/table&gt;</span>\n    <span class=\"nt\">&lt;partition_by&gt;</span>toMonday(event_date)<span class=\"nt\">&lt;/partition_by&gt;</span>\n    <span class=\"nt\">&lt;flush_interval_milliseconds&gt;</span>7500<span class=\"nt\">&lt;/flush_interval_milliseconds&gt;</span>\n<span class=\"nt\">&lt;/query_log&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"query-masking-rules\">query_masking_rules<a class=\"headerlink\" href=\"#query-masking-rules\" title=\"Permanent link\">&para;</a></h3>\n<p>Regexp-based rules, which will be applied to queries as well as all log messages before storing them in server logs,<br />\n<code>system.query_log</code>, <code>system.text_log</code>, <code>system.processes</code> table, and in logs sent to client. That allows preventing<br />\nsensitive data leakage from SQL queries (like names / emails / personal<br />\nidentifiers / credit card numbers etc) to logs.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;query_masking_rules&gt;</span>\n    <span class=\"nt\">&lt;rule&gt;</span>\n        <span class=\"nt\">&lt;name&gt;</span>hide SSN<span class=\"nt\">&lt;/name&gt;</span>\n        <span class=\"nt\">&lt;regexp&gt;</span>(^|\\D)\\d{3}-\\d{2}-\\d{4}($|\\D)<span class=\"nt\">&lt;/regexp&gt;</span>\n        <span class=\"nt\">&lt;replace&gt;</span>000-00-0000<span class=\"nt\">&lt;/replace&gt;</span>\n    <span class=\"nt\">&lt;/rule&gt;</span>\n<span class=\"nt\">&lt;/query_masking_rules&gt;</span>\n</code></pre></div>\n\n\n<p>Config fields:<br />\n- <code>name</code> - name for the rule (optional)<br />\n- <code>regexp</code> - RE2 compatible regular expression (mandatory)<br />\n- <code>replace</code> - substitution string for sensitive data (optional, by default - six asterisks)</p>\n<p>The masking rules are applied on whole query (to prevent leaks of sensitive data from malformed / non parsable queries).</p>\n<p><code>system.events</code> table have counter <code>QueryMaskingRulesMatch</code> which have overall number of query masking rules matches.</p>\n<p>For distributed queries each server have to be configured separately, otherwise subquries passed to other<br />\nnodes will be stored without masking.</p>\n<h3 id=\"server_settings_remote_servers\">remote_servers<a class=\"headerlink\" href=\"#server_settings_remote_servers\" title=\"Permanent link\">&para;</a></h3>\n<p>Configuration of clusters used by the <a href=\"#../../operations/table_engines/distributed/\">Distributed</a> table engine and by the <code>cluster</code> table function.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;remote_servers</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;clickhouse_remote_servers&quot;</span> <span class=\"nt\">/&gt;</span>\n</code></pre></div>\n\n\n<p>For the value of the <code>incl</code> attribute, see the section \"<a href=\"#configuration_files\">Configuration files</a>\".</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#settings-skip_unavailable_shards\">skip_unavailable_shards</a></li>\n</ul>\n<h3 id=\"timezone_1\">timezone<a class=\"headerlink\" href=\"#timezone_1\" title=\"Permanent link\">&para;</a></h3>\n<p>The server's time zone.</p>\n<p>Specified as an IANA identifier for the UTC time zone or geographic location (for example, Africa/Abidjan).</p>\n<p>The time zone is necessary for conversions between String and DateTime formats when DateTime fields are output to text format (printed on the screen or in a file), and when getting DateTime from a string. In addition, the time zone is used in functions that work with the time and date if they didn't receive the time zone in the input parameters.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;timezone&gt;</span>Europe/Moscow<span class=\"nt\">&lt;/timezone&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-tcp_port\">tcp_port<a class=\"headerlink\" href=\"#server_settings-tcp_port\" title=\"Permanent link\">&para;</a></h3>\n<p>Port for communicating with clients over the TCP protocol.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;tcp_port&gt;</span>90");
            
            document.write("00<span class=\"nt\">&lt;/tcp_port&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-tcp_port_secure\">tcp_port_secure<a class=\"headerlink\" href=\"#server_settings-tcp_port_secure\" title=\"Permanent link\">&para;</a></h3>\n<p>TCP port for secure communication with clients. Use it with <a href=\"#server_settings-openssl\">OpenSSL</a> settings.</p>\n<p><strong>Possible values</strong></p>\n<p>Positive integer.</p>\n<p><strong>Default value</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;tcp_port_secure&gt;</span>9440<span class=\"nt\">&lt;/tcp_port_secure&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"tmp-path\">tmp_path<a class=\"headerlink\" href=\"#tmp-path\" title=\"Permanent link\">&para;</a></h3>\n<p>Path to temporary data for processing large queries.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The trailing slash is mandatory.</p>\n</div>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;tmp_path&gt;</span>/var/lib/clickhouse/tmp/<span class=\"nt\">&lt;/tmp_path&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server-settings-uncompressed_cache_size\">uncompressed_cache_size<a class=\"headerlink\" href=\"#server-settings-uncompressed_cache_size\" title=\"Permanent link\">&para;</a></h3>\n<p>Cache size (in bytes) for uncompressed data used by table engines from the <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>.</p>\n<p>There is one shared cache for the server. Memory is allocated on demand. The cache is used if the option <a href=\"#setting-use_uncompressed_cache\">use_uncompressed_cache</a> is enabled.</p>\n<p>The uncompressed cache is advantageous for very short queries in individual cases.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;uncompressed_cache_size&gt;</span>8589934592<span class=\"nt\">&lt;/uncompressed_cache_size&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server_settings-user_files_path\">user_files_path<a class=\"headerlink\" href=\"#server_settings-user_files_path\" title=\"Permanent link\">&para;</a></h3>\n<p>The directory with user files. Used in the table function <a href=\"#../../query_language/table_functions/file/\">file()</a>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;user_files_path&gt;</span>/var/lib/clickhouse/user_files/<span class=\"nt\">&lt;/user_files_path&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"users-config\">users_config<a class=\"headerlink\" href=\"#users-config\" title=\"Permanent link\">&para;</a></h3>\n<p>Path to the file that contains:</p>\n<ul>\n<li>User configurations.</li>\n<li>Access rights.</li>\n<li>Settings profiles.</li>\n<li>Quota settings.</li>\n</ul>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;users_config&gt;</span>users.xml<span class=\"nt\">&lt;/users_config&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"server-settings_zookeeper\">zookeeper<a class=\"headerlink\" href=\"#server-settings_zookeeper\" title=\"Permanent link\">&para;</a></h3>\n<p>Contains settings that allow ClickHouse to interact with a <a href=\"http://zookeeper.apache.org/\" rel=\"external nofollow noreferrer\">ZooKeeper</a> cluster.</p>\n<p>ClickHouse uses ZooKeeper for storing metadata of replicas when using replicated tables. If replicated tables are not used, this section of parameters can be omitted.</p>\n<p>This section contains the following parameters:</p>\n<ul>\n<li>\n<p><code>node</code> \u2014 ZooKeeper endpoint. You can set multiple endpoints.</p>\n<p>For example:</p>\n<p><code>xml\n&lt;node index=\"1\"&gt;\n    &lt;host&gt;example_host&lt;/host&gt;\n    &lt;port&gt;2181&lt;/port&gt;\n&lt;/node&gt;</code></p>\n<p>The <code>index</code> attribute specifies the node order when trying to connect to the ZooKeeper cluster.</p>\n</li>\n<li>\n<p><code>session_timeout</code> \u2014 Maximum timeout for the client session in milliseconds.</p>\n</li>\n<li><code>root</code> \u2014 The <a href=\"http://zookeeper.apache.org/doc/r3.5.5/zookeeperOver.html#Nodes+and+ephemeral+nodes\" rel=\"external nofollow noreferrer\">znode</a> that is used as the root for znodes used by the ClickHouse server. Optional.</li>\n<li><code>identity</code> \u2014 User and password, that can be required by ZooKeeper to give access to requested znodes. Optional.</li>\n</ul>\n<p><strong>Example configuration</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;zookeeper&gt;</span>\n    <span class=\"nt\">&lt;node&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example1<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;node&gt;</span>\n        <span class=\"nt\">&lt;host&gt;</span>example2<span class=\"nt\">&lt;/host&gt;</span>\n        <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n    <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;session_timeout_ms&gt;</span>30000<span class=\"nt\">&lt;/session_timeout_ms&gt;</span>\n    <span class=\"nt\">&lt;operation_timeout_ms&gt;</span>10000<span class=\"nt\">&lt;/operation_timeout_ms&gt;</span>\n    <span class=\"c\">&lt;!-- Optional. Chroot suffix. Should exist. --&gt;</span>\n    <span class=\"nt\">&lt;root&gt;</span>/path/to/zookeeper/node<span class=\"nt\">&lt;/root&gt;</span>\n    <span class=\"c\">&lt;!-- Optional. Zookeeper digest ACL string. --&gt;</span>\n    <span class=\"nt\">&lt;identity&gt;</span>user:password<span class=\"nt\">&lt;/identity&gt;</span>\n<span class=\"nt\">&lt;/zookeeper&gt;</span>\n</code></pre></div>\n\n\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#../../operations/table_engines/replication/\">Replication</a></li>\n<li><a href=\"http://zookeeper.apache.org/doc/current/zookeeperProgrammers.html\" rel=\"external nofollow noreferrer\">ZooKeeper Programmer's Guide</a></li>\n</ul>\n<h3 id=\"server-settings-use_minimalistic_part_header_in_zookeeper\">use_minimalistic_part_header_in_zookeeper<a class=\"headerlink\" href=\"#server-settings-use_minimalistic_part_header_in_zookeeper\" title=\"Permanent link\">&para;</a></h3>\n<p>Storage method for data part headers in ZooKeeper.</p>\n<p>This setting only applies to the <code>MergeTree</code> family. It can be specified:</p>\n<ul>\n<li>\n<p>Globally in the <a href=\"#server_settings-merge_tree\">merge_tree</a> section of the <code>config.xml</code> file.</p>\n<p>ClickHouse uses the setting for all the tables on the server. You can change the setting at any time. Existing tables change their behavior when the setting changes.</p>\n</li>\n<li>\n<p>For each individual table.</p>\n<p>When creating a table, specify the corresponding <a href=\"#table_engine-mergetree-creating-a-table\">engine setting</a>. The behavior of an existing table with this setting does not change, even if the global setting changes.</p>\n</li>\n</ul>\n<p><strong>Possible values</strong></p>\n<ul>\n<li>0 \u2014 Functionality is turned off.</li>\n<li>1 \u2014 Functionality is turned on.</li>\n</ul>\n<p>If <code>use_minimalistic_part_header_in_zookeeper = 1</code>, then <a href=\"#../table_engines/replication/\">replicated</a> tables store the headers of the data parts compactly using a single <code>znode</code>. If the table contains many columns, this storage method significantly reduces the volume of the data stored in Zookeeper.</p>\n<div class=\"admonition attention\">\n<p class=\"admonition-title\">Attention</p>\n<p>After applying <code>use_minimalistic_part_header_in_zookeeper = 1</code>, you can't downgrade the ClickHouse server to a version that doesn't support this setting. Be careful when upgrading ClickHouse on servers in a cluster. Don't upgrade all the servers at once. It is safer to test new versions of ClickHouse in a test environment, or on just a few servers of a cluster.</p>\n<p>Data part headers already stored with this setting can't be restored to their previous (non-compact) representation.</p>\n</div>\n<p><strong>Default value:</strong> 0.</p>\n<h3 id=\"server-settings-disable_internal_dns_cache\">disable_internal_dns_cache<a class=\"headerlink\" href=\"#server-settings-disable_internal_dns_cache\" title=\"Permanent link\">&para;</a></h3>\n<p>Disables the internal DNS cache. Recommended for operating ClickHouse in systems<br />\nwith frequently changing infrastructure such as Kubernetes.</p>\n<p><strong>Default value:</strong> 0.</p>\n<h3 id=\"server-settings-dns_cache_update_period\">dns_cache_update_period<a class=\"headerlink\" href=\"#server-settings-dns_cache_update_period\" title=\"Permanent link\">&para;</a></h3>\n<p>The period of updating IP addresses stored in the ClickHouse internal DNS cache (in seconds).<br />\nThe update is performed asynchronously, in a separate system thread.</p>\n<p><strong>Default value</strong>: 15.</p>\n<p><a name=\"settings/\"></a><a name=\"operations/settings/\"></a><a name=\"../../../../operations/settings/\"></a><a name=\"../../../../../operations/settings/\"></a><a name=\"../../../operations/settings/\"></a><a name=\"../../operations/settings/\"></a><a name=\"../operations/settings/\"></a></p>\n<h2 id=\"settings\">Settings<a class=\"headerlink\" href=\"#settings\" title=\"Permanent link\">&para;</a></h2>\n<p>There are multiple ways to make all the settings described below.<br />\nSettings are configured in layers, so each subsequent layer redefines the previous settings.</p>\n<p>Ways to configure settings, in order of priority:</p>\n<ul>\n<li>\n<p>Settings in the <code>users.xml</code> server configuration file.</p>\n<p>Set in the element <code>&lt;profiles&gt;</code>.</p>\n</li>\n<li>\n<p>Session settings.</p>\n<p>Send <code>SET setting=value</code> from the ClickHouse console client in interactive mode.<br />\nSimilarly, you can use ClickHouse sessions in the HTTP protocol. To do this, you need to specify the <code>session_id</code> HTTP parameter.</p>\n</li>\n<li>\n<p>Query settings.</p>\n<ul>\n<li>When starting the ClickHouse console client in non-interactive mode, set the startup parameter <code>--setting=value</code>.</li>\n<li>When using the HTTP API, pass CGI parameters (<code>URL?setting_1=value&amp;setting_2=value...</code>).</li>\n</ul>\n</li>\n</ul>\n<p>Settings that can only be made in the server config file are not covered in this section.</p>\n<p><a name=\"../../");
            
            document.write("../operations/settings/permissions_for_queries/\"></a><a name=\"../../../../settings/permissions_for_queries/\"></a><a name=\"../../../../../settings/permissions_for_queries/\"></a><a name=\"../../../../../operations/settings/permissions_for_queries/\"></a><a name=\"../operations/settings/permissions_for_queries/\"></a><a name=\"../../operations/settings/permissions_for_queries/\"></a><a name=\"../settings/permissions_for_queries/\"></a><a name=\"permissions_for_queries/\"></a><a name=\"../../settings/permissions_for_queries/\"></a><a name=\"../../../../operations/settings/permissions_for_queries/\"></a><a name=\"../../../../../../settings/permissions_for_queries/\"></a><a name=\"../../../settings/permissions_for_queries/\"></a><a name=\"operations/settings/permissions_for_queries/\"></a><a name=\"settings/permissions_for_queries/\"></a></p>\n<h2 id=\"permissions_for_queries\">Permissions for queries<a class=\"headerlink\" href=\"#permissions_for_queries\" title=\"Permanent link\">&para;</a></h2>\n<p>Queries in ClickHouse can be divided into several types:</p>\n<ol>\n<li>Read data queries: <code>SELECT</code>, <code>SHOW</code>, <code>DESCRIBE</code>, <code>EXISTS</code>.</li>\n<li>Write data queries: <code>INSERT</code>, <code>OPTIMIZE</code>.</li>\n<li>Change settings queries: <code>SET</code>, <code>USE</code>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Data_definition_language\" rel=\"external nofollow noreferrer\">DDL</a> queries: <code>CREATE</code>, <code>ALTER</code>, <code>RENAME</code>, <code>ATTACH</code>, <code>DETACH</code>, <code>DROP</code> <code>TRUNCATE</code>.</li>\n<li><code>KILL QUERY</code>.</li>\n</ol>\n<p>The following settings regulate user permissions by the type of query:</p>\n<ul>\n<li><a href=\"#settings_readonly\">readonly</a> \u2014 Restricts permissions for all types of queries except DDL queries.</li>\n<li><a href=\"#settings_allow_ddl\">allow_ddl</a> \u2014 Restricts permissions for DDL queries.</li>\n</ul>\n<p><code>KILL QUERY</code> can be performed with any settings.</p>\n<h3 id=\"settings_readonly\">readonly<a class=\"headerlink\" href=\"#settings_readonly\" title=\"Permanent link\">&para;</a></h3>\n<p>Restricts permissions for read data, write data and change settings queries.</p>\n<p>See how the queries are divided into types <a href=\"#permissions_for_queries\">above</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 All queries are allowed.</li>\n<li>1 \u2014 Only read data queries are allowed.</li>\n<li>2 \u2014 Read data and change settings queries are allowed.</li>\n</ul>\n<p>After setting <code>readonly = 1</code>, the user can't change <code>readonly</code> and <code>allow_ddl</code> settings in the current session.</p>\n<p>When using the <code>GET</code> method in the <a href=\"#../../interfaces/http/\">HTTP interface</a>, <code>readonly = 1</code> is set automatically. To modify data, use the <code>POST</code> method.</p>\n<p>Setting <code>readonly = 1</code> prohibit the user from changing all the settings. There is a way to prohibit the user<br />\nfrom changing only specific settings, for details see <a href=\"#constraints_on_settings/\">constraints on settings</a>.</p>\n<p>Default value: 0</p>\n<h3 id=\"settings_allow_ddl\">allow_ddl<a class=\"headerlink\" href=\"#settings_allow_ddl\" title=\"Permanent link\">&para;</a></h3>\n<p>Allows or denies <a href=\"https://en.wikipedia.org/wiki/Data_definition_language\" rel=\"external nofollow noreferrer\">DDL</a> queries.</p>\n<p>See how the queries are divided into types <a href=\"#permissions_for_queries\">above</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 DDL queries are not allowed.</li>\n<li>1 \u2014 DDL queries are allowed.</li>\n</ul>\n<p>You can't execute <code>SET allow_ddl = 1</code> if <code>allow_ddl = 0</code> for the current session.</p>\n<p>Default value: 1</p>\n<p><a name=\"settings/query_complexity/\"></a><a name=\"query_complexity/\"></a><a name=\"../../../../../operations/settings/query_complexity/\"></a><a name=\"../operations/settings/query_complexity/\"></a><a name=\"../../operations/settings/query_complexity/\"></a><a name=\"../settings/query_complexity/\"></a><a name=\"../../../../../settings/query_complexity/\"></a><a name=\"../../../../settings/query_complexity/\"></a><a name=\"../../../../operations/settings/query_complexity/\"></a><a name=\"../../settings/query_complexity/\"></a><a name=\"../../../operations/settings/query_complexity/\"></a><a name=\"../../../../../../settings/query_complexity/\"></a><a name=\"../../../settings/query_complexity/\"></a><a name=\"operations/settings/query_complexity/\"></a></p>\n<h2 id=\"restrictions-on-query-complexity\">Restrictions on query complexity<a class=\"headerlink\" href=\"#restrictions-on-query-complexity\" title=\"Permanent link\">&para;</a></h2>\n<p>Restrictions on query complexity are part of the settings.<br />\nThey are used in order to provide safer execution from the user interface.<br />\nAlmost all the restrictions only apply to <code>SELECT</code>. For distributed query processing, restrictions are applied on each server separately.</p>\n<p>ClickHouse checks the restrictions for data parts, not for each row. It means that you can exceed the value of restriction with a size of the data part.</p>\n<p>Restrictions on the \"maximum amount of something\" can take the value 0, which means \"unrestricted\".<br />\nMost restrictions also have an 'overflow_mode' setting, meaning what to do when the limit is exceeded.<br />\nIt can take one of two values: <code>throw</code> or <code>break</code>. Restrictions on aggregation (group_by_overflow_mode) also have the value <code>any</code>.</p>\n<p><code>throw</code> \u2013 Throw an exception (default).</p>\n<p><code>break</code> \u2013 Stop executing the query and return the partial result, as if the source data ran out.</p>\n<p><code>any (only for group_by_overflow_mode)</code> \u2013 Continuing aggregation for the keys that got into the set, but don't add new keys to the set.</p>\n<h3 id=\"settings_max_memory_usage\">max_memory_usage<a class=\"headerlink\" href=\"#settings_max_memory_usage\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum amount of RAM to use for running a query on a single server.</p>\n<p>In the default configuration file, the maximum is 10 GB.</p>\n<p>The setting doesn't consider the volume of available memory or the total volume of memory on the machine.<br />\nThe restriction applies to a single query within a single server.<br />\nYou can use <code>SHOW PROCESSLIST</code> to see the current memory consumption for each query.<br />\nIn addition, the peak memory consumption is tracked for each query and written to the log.</p>\n<p>Memory usage is not monitored for the states of certain aggregate functions.</p>\n<p>Memory usage is not fully tracked for states of the aggregate functions <code>min</code>, <code>max</code>, <code>any</code>, <code>anyLast</code>, <code>argMin</code>, <code>argMax</code> from <code>String</code> and <code>Array</code> arguments.</p>\n<p>Memory consumption is also restricted by the parameters <code>max_memory_usage_for_user</code> and <code>max_memory_usage_for_all_queries</code>.</p>\n<h3 id=\"max-memory-usage-for-user\">max_memory_usage_for_user<a class=\"headerlink\" href=\"#max-memory-usage-for-user\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum amount of RAM to use for running a user's queries on a single server.</p>\n<p>Default values are defined in <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/src/Core/Settings.h#L288\" rel=\"external nofollow noreferrer\">Settings.h</a>. By default, the amount is not restricted (<code>max_memory_usage_for_user = 0</code>).</p>\n<p>See also the description of <a href=\"#settings_max_memory_usage\">max_memory_usage</a>.</p>\n<h3 id=\"max-memory-usage-for-all-queries\">max_memory_usage_for_all_queries<a class=\"headerlink\" href=\"#max-memory-usage-for-all-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum amount of RAM to use for running all queries on a single server.</p>\n<p>Default values are defined in <a href=\"https://github.com/ClickHouse/ClickHouse/blob/master/dbms/src/Core/Settings.h#L289\" rel=\"external nofollow noreferrer\">Settings.h</a>. By default, the amount is not restricted (<code>max_memory_usage_for_all_queries = 0</code>).</p>\n<p>See also the description of <a href=\"#settings_max_memory_usage\">max_memory_usage</a>.</p>\n<h3 id=\"max-rows-to-read\">max_rows_to_read<a class=\"headerlink\" href=\"#max-rows-to-read\" title=\"Permanent link\">&para;</a></h3>\n<p>The following restrictions can be checked on each block (instead of on each row). That is, the restrictions can be broken a little.<br />\nWhen running a query in multiple threads, the following restrictions apply to each thread separately.</p>\n<p>Maximum number of rows that can be read from a table when running a query.</p>\n<h3 id=\"max-bytes-to-read\">max_bytes_to_read<a class=\"headerlink\" href=\"#max-bytes-to-read\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes (uncompressed data) that can be read from a table when running a query.</p>\n<h3 id=\"read-overflow-mode\">read_overflow_mode<a class=\"headerlink\" href=\"#read-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the volume of data read exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"settings-max_rows_to_group_by\">max_rows_to_group_by<a class=\"headerlink\" href=\"#settings-max_rows_to_group_by\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of unique keys received from aggregation. This setting lets you limit memory consumption when aggregating.</p>\n<h3 id=\"group-by-overflow-mode\">group_by_overflow_mode<a class=\"headerlink\" href=\"#group-by-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the number of unique keys for aggregation exceeds the limit: 'throw', 'break', or 'any'. By default, throw.<br />\nUsing the 'any' value lets you run an approximation of GROUP BY. The quality of this approximation depends on the statistical nature of the data.</p>\n<h3 id=\"settings-max_bytes_before_external_group_by\">max_bytes_before_external_group_by<a class=\"headerlink\" href=\"#settings-max_bytes_before_external_group_by\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables execution of <code>GROUP BY</code> clauses in external memory. See <a href=\"#select-group-by-in-external-memory\">GROUP BY in external memory</a>.</p>\n");
            
            document.write("<p>Possible values:</p>\n<ul>\n<li>Maximum volume of RAM (in bytes) that can be used by the single <a href=\"#select-group-by-clause\">GROUP BY</a> operation.</li>\n<li>0 \u2014 <code>GROUP BY</code> in external memory disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"max-rows-to-sort\">max_rows_to_sort<a class=\"headerlink\" href=\"#max-rows-to-sort\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of rows before sorting. This allows you to limit memory consumption when sorting.</p>\n<h3 id=\"max-bytes-to-sort\">max_bytes_to_sort<a class=\"headerlink\" href=\"#max-bytes-to-sort\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes before sorting.</p>\n<h3 id=\"sort-overflow-mode\">sort_overflow_mode<a class=\"headerlink\" href=\"#sort-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do if the number of rows received before sorting exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"max-result-rows\">max_result_rows<a class=\"headerlink\" href=\"#max-result-rows\" title=\"Permanent link\">&para;</a></h3>\n<p>Limit on the number of rows in the result. Also checked for subqueries, and on remote servers when running parts of a distributed query.</p>\n<h3 id=\"max-result-bytes\">max_result_bytes<a class=\"headerlink\" href=\"#max-result-bytes\" title=\"Permanent link\">&para;</a></h3>\n<p>Limit on the number of bytes in the result. The same as the previous setting.</p>\n<h3 id=\"result-overflow-mode\">result_overflow_mode<a class=\"headerlink\" href=\"#result-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do if the volume of the result exceeds one of the limits: 'throw' or 'break'. By default, throw.<br />\nUsing 'break' is similar to using LIMIT.</p>\n<h3 id=\"max-execution-time\">max_execution_time<a class=\"headerlink\" href=\"#max-execution-time\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum query execution time in seconds.<br />\nAt this time, it is not checked for one of the sorting stages, or when merging and finalizing aggregate functions.</p>\n<h3 id=\"timeout-overflow-mode\">timeout_overflow_mode<a class=\"headerlink\" href=\"#timeout-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do if the query is run longer than 'max_execution_time': 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"min-execution-speed\">min_execution_speed<a class=\"headerlink\" href=\"#min-execution-speed\" title=\"Permanent link\">&para;</a></h3>\n<p>Minimal execution speed in rows per second. Checked on every data block when 'timeout_before_checking_execution_speed' expires. If the execution speed is lower, an exception is thrown.</p>\n<h3 id=\"min-execution-speed-bytes\">min_execution_speed_bytes<a class=\"headerlink\" href=\"#min-execution-speed-bytes\" title=\"Permanent link\">&para;</a></h3>\n<p>Minimum number of execution bytes per second. Checked on every data block when 'timeout_before_checking_execution_speed' expires. If the execution speed is lower, an exception is thrown.</p>\n<h3 id=\"max-execution-speed\">max_execution_speed<a class=\"headerlink\" href=\"#max-execution-speed\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of execution rows per second. Checked on every data block when 'timeout_before_checking_execution_speed' expires. If the execution speed is high, the execution speed will be reduced.</p>\n<h3 id=\"max-execution-speed-bytes\">max_execution_speed_bytes<a class=\"headerlink\" href=\"#max-execution-speed-bytes\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of execution bytes per second. Checked on every data block when 'timeout_before_checking_execution_speed' expires. If the execution speed is high, the execution speed will be reduced.</p>\n<h3 id=\"timeout-before-checking-execution-speed\">timeout_before_checking_execution_speed<a class=\"headerlink\" href=\"#timeout-before-checking-execution-speed\" title=\"Permanent link\">&para;</a></h3>\n<p>Checks that execution speed is not too slow (no less than 'min_execution_speed'), after the specified time in seconds has expired.</p>\n<h3 id=\"max-columns-to-read\">max_columns_to_read<a class=\"headerlink\" href=\"#max-columns-to-read\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of columns that can be read from a table in a single query. If a query requires reading a greater number of columns, it throws an exception.</p>\n<h3 id=\"max-temporary-columns\">max_temporary_columns<a class=\"headerlink\" href=\"#max-temporary-columns\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of temporary columns that must be kept in RAM at the same time when running a query, including constant columns. If there are more temporary columns than this, it throws an exception.</p>\n<h3 id=\"max-temporary-non-const-columns\">max_temporary_non_const_columns<a class=\"headerlink\" href=\"#max-temporary-non-const-columns\" title=\"Permanent link\">&para;</a></h3>\n<p>The same thing as 'max_temporary_columns', but without counting constant columns.<br />\nNote that constant columns are formed fairly often when running a query, but they require approximately zero computing resources.</p>\n<h3 id=\"max-subquery-depth\">max_subquery_depth<a class=\"headerlink\" href=\"#max-subquery-depth\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum nesting depth of subqueries. If subqueries are deeper, an exception is thrown. By default, 100.</p>\n<h3 id=\"max-pipeline-depth\">max_pipeline_depth<a class=\"headerlink\" href=\"#max-pipeline-depth\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum pipeline depth. Corresponds to the number of transformations that each data block goes through during query processing. Counted within the limits of a single server. If the pipeline depth is greater, an exception is thrown. By default, 1000.</p>\n<h3 id=\"max-ast-depth\">max_ast_depth<a class=\"headerlink\" href=\"#max-ast-depth\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum nesting depth of a query syntactic tree. If exceeded, an exception is thrown.<br />\nAt this time, it isn't checked during parsing, but only after parsing the query. That is, a syntactic tree that is too deep can be created during parsing, but the query will fail. By default, 1000.</p>\n<h3 id=\"max-ast-elements\">max_ast_elements<a class=\"headerlink\" href=\"#max-ast-elements\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of elements in a query syntactic tree. If exceeded, an exception is thrown.<br />\nIn the same way as the previous setting, it is checked only after parsing the query. By default, 50,000.</p>\n<h3 id=\"max-rows-in-set\">max_rows_in_set<a class=\"headerlink\" href=\"#max-rows-in-set\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of rows for a data set in the IN clause created from a subquery.</p>\n<h3 id=\"max-bytes-in-set\">max_bytes_in_set<a class=\"headerlink\" href=\"#max-bytes-in-set\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes (uncompressed data) used by a set in the IN clause created from a subquery.</p>\n<h3 id=\"set-overflow-mode\">set_overflow_mode<a class=\"headerlink\" href=\"#set-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the amount of data exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"max-rows-in-distinct\">max_rows_in_distinct<a class=\"headerlink\" href=\"#max-rows-in-distinct\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of different rows when using DISTINCT.</p>\n<h3 id=\"max-bytes-in-distinct\">max_bytes_in_distinct<a class=\"headerlink\" href=\"#max-bytes-in-distinct\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes used by a hash table when using DISTINCT.</p>\n<h3 id=\"distinct-overflow-mode\">distinct_overflow_mode<a class=\"headerlink\" href=\"#distinct-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the amount of data exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"max-rows-to-transfer\">max_rows_to_transfer<a class=\"headerlink\" href=\"#max-rows-to-transfer\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of rows that can be passed to a remote server or saved in a temporary table when using GLOBAL IN.</p>\n<h3 id=\"max-bytes-to-transfer\">max_bytes_to_transfer<a class=\"headerlink\" href=\"#max-bytes-to-transfer\" title=\"Permanent link\">&para;</a></h3>\n<p>Maximum number of bytes (uncompressed data) that can be passed to a remote server or saved in a temporary table when using GLOBAL IN.</p>\n<h3 id=\"transfer-overflow-mode\">transfer_overflow_mode<a class=\"headerlink\" href=\"#transfer-overflow-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>What to do when the amount of data exceeds one of the limits: 'throw' or 'break'. By default, throw.</p>\n<h3 id=\"settings-max_rows_in_join\">max_rows_in_join<a class=\"headerlink\" href=\"#settings-max_rows_in_join\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the number of rows in the hash table that is used when joining tables.</p>\n<p>This settings applies to <a href=\"#select-join\">SELECT ... JOIN</a> operations and the <a href=\"#../table_engines/join/\">Join</a> table engine.</p>\n<p>If a query contains multiple joins, ClickHouse checks this setting for every intermediate result.</p>\n<p>ClickHouse can proceed with different actions when the limit is reached. Use the <a href=\"#settings-join_overflow_mode\">join_overflow_mode</a> setting to choose the action.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Unlimited number of rows.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-max_bytes_in_join\">max_bytes_in_join<a class=\"headerlink\" href=\"#settings-max_bytes_in_join\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the size in bytes of the hash table used when joining tables.</p>\n<p>This settings applies to <a href=\"#select-join\">SELECT ... JOIN</a> operations and <a href=\"#../table_engines/join/\">Join table engine</a>.</p>\n<p>If the query contains joins, ClickHouse checks this setting for every intermediate result.</p>\n<p>ClickHouse can proceed with different actions when the limit is reached. Use <a href=\"#settings-join_overflow_mode\">join_overflow_mode</a> settings to choose the action.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Memory control is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-join_overflow_mode\">join_overflow_mode<a class=\"headerlink\" href=\"#settings-join_");
            
            document.write("overflow_mode\" title=\"Permanent link\">&para;</a></h3>\n<p>Defines what action ClickHouse performs when any of the following join limits is reached:</p>\n<ul>\n<li><a href=\"#settings-max_bytes_in_join\">max_bytes_in_join</a></li>\n<li><a href=\"#settings-max_rows_in_join\">max_rows_in_join</a></li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li><code>THROW</code> \u2014 ClickHouse throws an exception and breaks operation.</li>\n<li><code>BREAK</code> \u2014 ClickHouse breaks operation and doesn't throw an exception.</li>\n</ul>\n<p>Default value: <code>THROW</code>.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#select-join\">JOIN clause</a></li>\n<li><a href=\"#../table_engines/join/\">Join table engine</a></li>\n</ul>\n<h3 id=\"max-partitions-per-insert-block\">max_partitions_per_insert_block<a class=\"headerlink\" href=\"#max-partitions-per-insert-block\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the maximum number of partitions in a single inserted block.</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Unlimited number of partitions.</li>\n</ul>\n<p>Default value: 100.</p>\n<p><strong>Details</strong></p>\n<p>When inserting data, ClickHouse calculates the number of partitions in the inserted block. If the number of partitions is more than <code>max_partitions_per_insert_block</code>, ClickHouse throws an exception with the following text:</p>\n<blockquote>\n<p>\"Too many partitions for single INSERT block (more than \" + toString(max_parts) + \"). The limit is controlled by 'max_partitions_per_insert_block' setting. Large number of partitions is a common misconception. It will lead to severe negative performance impact, including slow server startup, slow INSERT queries and slow SELECT queries. Recommended total number of partitions for a table is under 1000..10000. Please note, that partitioning is not intended to speed up SELECT queries (ORDER BY key is sufficient to make range queries fast). Partitions are intended for data manipulation (DROP PARTITION, etc).\"</p>\n</blockquote>\n<p><a name=\"../../../../operations/settings/settings/\"></a><a name=\"../../../../../settings/settings/\"></a><a name=\"settings/\"></a><a name=\"../../settings/settings/\"></a><a name=\"../../../../../../settings/settings/\"></a><a name=\"../settings/settings/\"></a><a name=\"../operations/settings/settings/\"></a><a name=\"operations/settings/settings/\"></a><a name=\"../../../../../operations/settings/settings/\"></a><a name=\"../../../operations/settings/settings/\"></a><a name=\"../../../settings/settings/\"></a><a name=\"../../operations/settings/settings/\"></a><a name=\"settings/settings/\"></a><a name=\"../../../../settings/settings/\"></a></p>\n<h2 id=\"settings_1\">Settings<a class=\"headerlink\" href=\"#settings_1\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"distributed-product-mode\">distributed_product_mode<a class=\"headerlink\" href=\"#distributed-product-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>Changes the behavior of <a href=\"#../../query_language/select/\">distributed subqueries</a>.</p>\n<p>ClickHouse applies this setting when the query contains the product of distributed tables, i.e. when the query for a distributed table contains a non-GLOBAL subquery for the distributed table.</p>\n<p>Restrictions:</p>\n<ul>\n<li>Only applied for IN and JOIN subqueries.</li>\n<li>Only if the FROM section uses a distributed table containing more than one shard.</li>\n<li>If the subquery concerns a distributed table containing more than one shard.</li>\n<li>Not used for a table-valued <a href=\"#../../query_language/table_functions/remote/\">remote</a> function.</li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li><code>deny</code> \u2014 Default value. Prohibits using these types of subqueries (returns the \"Double-distributed in/JOIN subqueries is denied\" exception).</li>\n<li><code>local</code> \u2014 Replaces the database and table in the subquery with local ones for the destination server (shard), leaving the normal <code>IN</code>/<code>JOIN.</code></li>\n<li><code>global</code> \u2014 Replaces the <code>IN</code>/<code>JOIN</code> query with <code>GLOBAL IN</code>/<code>GLOBAL JOIN.</code></li>\n<li><code>allow</code> \u2014 Allows the use of these types of subqueries.</li>\n</ul>\n<h3 id=\"enable-optimize-predicate-expression\">enable_optimize_predicate_expression<a class=\"headerlink\" href=\"#enable-optimize-predicate-expression\" title=\"Permanent link\">&para;</a></h3>\n<p>Turns on predicate pushdown in <code>SELECT</code> queries.</p>\n<p>Predicate pushdown may significantly reduce network traffic for distributed queries.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<p><strong>Usage</strong></p>\n<p>Consider the following queries:</p>\n<ol>\n<li><code>SELECT count() FROM test_table WHERE date = '2018-10-10'</code></li>\n<li><code>SELECT count() FROM (SELECT * FROM test_table) WHERE date = '2018-10-10'</code></li>\n</ol>\n<p>If <code>enable_optimize_predicate_expression = 1</code>, then the execution time of these queries is equal, because ClickHouse applies <code>WHERE</code> to the subquery when processing it.</p>\n<p>If <code>enable_optimize_predicate_expression = 0</code>, then the execution time of the second query is much longer, because the <code>WHERE</code> clause applies to all the data after the subquery finishes.</p>\n<h3 id=\"settings-fallback_to_stale_replicas_for_distributed_queries\">fallback_to_stale_replicas_for_distributed_queries<a class=\"headerlink\" href=\"#settings-fallback_to_stale_replicas_for_distributed_queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Forces a query to an out-of-date replica if updated data is not available. See \"<a href=\"#../../operations/table_engines/replication/\">Replication</a>\".</p>\n<p>ClickHouse selects the most relevant from the outdated replicas of the table.</p>\n<p>Used when performing <code>SELECT</code> from a distributed table that points to replicated tables.</p>\n<p>By default, 1 (enabled).</p>\n<h3 id=\"settings-force_index_by_date\">force_index_by_date<a class=\"headerlink\" href=\"#settings-force_index_by_date\" title=\"Permanent link\">&para;</a></h3>\n<p>Disables query execution if the index can't be used by date.</p>\n<p>Works with tables in the MergeTree family.</p>\n<p>If <code>force_index_by_date=1</code>, ClickHouse checks whether the query has a date key condition that can be used for restricting data ranges. If there is no suitable condition, it throws an exception. However, it does not check whether the condition actually reduces the amount of data to read. For example, the condition <code>Date != ' 2000-01-01 '</code> is acceptable even when it matches all the data in the table (i.e., running the query requires a full scan). For more information about ranges of data in MergeTree tables, see \"<a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>\".</p>\n<h3 id=\"force-primary-key\">force_primary_key<a class=\"headerlink\" href=\"#force-primary-key\" title=\"Permanent link\">&para;</a></h3>\n<p>Disables query execution if indexing by the primary key is not possible.</p>\n<p>Works with tables in the MergeTree family.</p>\n<p>If <code>force_primary_key=1</code>, ClickHouse checks to see if the query has a primary key condition that can be used for restricting data ranges. If there is no suitable condition, it throws an exception. However, it does not check whether the condition actually reduces the amount of data to read. For more information about data ranges in MergeTree tables, see \"<a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>\".</p>\n<h3 id=\"format-schema\">format_schema<a class=\"headerlink\" href=\"#format-schema\" title=\"Permanent link\">&para;</a></h3>\n<p>This parameter is useful when you are using formats that require a schema definition, such as <a href=\"https://capnproto.org/\" rel=\"external nofollow noreferrer\">Cap'n Proto</a>, <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"external nofollow noreferrer\">Protobuf</a> or <a href=\"#format-template\">Template</a>. The value depends on the format.</p>\n<h3 id=\"fsync-metadata\">fsync_metadata<a class=\"headerlink\" href=\"#fsync-metadata\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fsync.html\" rel=\"external nofollow noreferrer\">fsync</a> when writing <code>.sql</code> files. Enabled by default.</p>\n<p>It makes sense to disable it if the server has millions of tiny table chunks that are constantly being created and destroyed.</p>\n<h3 id=\"settings-enable_http_compression\">enable_http_compression<a class=\"headerlink\" href=\"#settings-enable_http_compression\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables data compression in the response to an HTTP request.</p>\n<p>For more information, read the <a href=\"#../../interfaces/http/\">HTTP interface description</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-http_zlib_compression_level\">http_zlib_compression_level<a class=\"headerlink\" href=\"#settings-http_zlib_compression_level\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the level of data compression in the response to an HTTP request if <a href=\"#settings-enable_http_compression\">enable_http_compression = 1</a>.</p>\n<p>Possible values: Numbers from 1 to 9.</p>\n<p>Default value: 3.</p>\n<h3 id=\"settings-http_native_compression_disable_checksumming_on_decompress\">http_native_compression_disable_checksumming_on_decompress<a class=\"headerlink\" href=\"#settings-http_native_compression_disable_checksumming_on_decompress\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables checksum verification when decompressing the HTTP POST data from the client. Used only for ClickHouse native compression format (not used with <code>gzip</code> or <code>deflate</code>).</p>\n<p>For more information, read the <a href=\"#../../interfaces/http/\">HTTP interface description</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-send_progress_in_http_headers\">send_progress_in_http_headers<a class=\"headerlink\" href=\"#settings-send_progress_in_http_headers\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables <code>X-ClickHouse-Progress</code> HT");
            
            document.write("TP response headers in <code>clickhouse-server</code> responses.</p>\n<p>For more information, read the <a href=\"#../../interfaces/http/\">HTTP interface description</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"input-format-allow-errors-num\">input_format_allow_errors_num<a class=\"headerlink\" href=\"#input-format-allow-errors-num\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the maximum number of acceptable errors when reading from text formats (CSV, TSV, etc.).</p>\n<p>The default value is 0.</p>\n<p>Always pair it with <code>input_format_allow_errors_ratio</code>. To skip errors, both settings must be greater than 0.</p>\n<p>If an error occurred while reading rows but the error counter is still less than <code>input_format_allow_errors_num</code>, ClickHouse ignores the row and moves on to the next one.</p>\n<p>If <code>input_format_allow_errors_num</code> is exceeded, ClickHouse throws an exception.</p>\n<h3 id=\"input-format-allow-errors-ratio\">input_format_allow_errors_ratio<a class=\"headerlink\" href=\"#input-format-allow-errors-ratio\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the maximum percentage of errors allowed when reading from text formats (CSV, TSV, etc.).<br />\nThe percentage of errors is set as a floating-point number between 0 and 1.</p>\n<p>The default value is 0.</p>\n<p>Always pair it with <code>input_format_allow_errors_num</code>. To skip errors, both settings must be greater than 0.</p>\n<p>If an error occurred while reading rows but the error counter is still less than <code>input_format_allow_errors_ratio</code>, ClickHouse ignores the row and moves on to the next one.</p>\n<p>If <code>input_format_allow_errors_ratio</code> is exceeded, ClickHouse throws an exception.</p>\n<h3 id=\"settings-input_format_values_interpret_expressions\">input_format_values_interpret_expressions<a class=\"headerlink\" href=\"#settings-input_format_values_interpret_expressions\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables the full SQL parser if the fast stream parser can't parse the data. This setting is used only for the <a href=\"#data-format-values\">Values</a> format at the data insertion. For more information about syntax parsing, see the <a href=\"#../../query_language/syntax/\">Syntax</a> section.</p>\n<p>Possible values:</p>\n<ul>\n<li>\n<p>0 \u2014 Disabled.</p>\n<p>In this case, you must provide formatted data. See the <a href=\"#../../interfaces/formats/\">Formats</a> section.</p>\n</li>\n<li>\n<p>1 \u2014 Enabled.</p>\n<p>In this case, you can use an SQL expression as a value, but data insertion is much slower this way. If you insert only formatted data, then ClickHouse behaves as if the setting value is 0.</p>\n</li>\n</ul>\n<p>Default value: 1.</p>\n<p><strong>Example of Use</strong></p>\n<p>Insert the <a href=\"#../../data_types/datetime/\">DateTime</a> type value with the different settings.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">input_format_values_interpret_expressions</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">datetime_t</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">())</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Exception on client:\nCode: 27. DB::Exception: Cannot parse input: expected ) before: now()): (at row 1)\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">input_format_values_interpret_expressions</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">datetime_t</span> <span class=\"k\">VALUES</span> <span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">())</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Ok.\n</code></pre></div>\n\n\n<p>The last query is equivalent to the following:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">input_format_values_interpret_expressions</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"k\">INSERT</span> <span class=\"k\">INTO</span> <span class=\"n\">datetime_t</span> <span class=\"k\">SELECT</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Ok.\n</code></pre></div>\n\n\n<h3 id=\"session_settings-input_format_defaults_for_omitted_fields\">input_format_defaults_for_omitted_fields<a class=\"headerlink\" href=\"#session_settings-input_format_defaults_for_omitted_fields\" title=\"Permanent link\">&para;</a></h3>\n<p>When performing <code>INSERT</code> queries, replace omitted input column values with default values of the respective columns. This option only applies to <a href=\"#jsoneachrow\">JSONEachRow</a> and <a href=\"#csv\">CSV</a> formats.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>When this option is enabled, extended table metadata are sent from server to client. It consumes additional computing resources on the server and can reduce performance.</p>\n</div>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<h3 id=\"settings-input_format_null_as_default\">input_format_null_as_default<a class=\"headerlink\" href=\"#settings-input_format_null_as_default\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables using default values if input data contain <code>NULL</code>, but data type of corresponding column in not <code>Nullable(T)</code> (for CSV format).</p>\n<h3 id=\"settings-input_format_skip_unknown_fields\">input_format_skip_unknown_fields<a class=\"headerlink\" href=\"#settings-input_format_skip_unknown_fields\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables skipping insertion of extra data.</p>\n<p>When writing data, ClickHouse throws an exception if input data contain columns that do not exist in the target table. If skipping is enabled, ClickHouse doesn't insert extra data and doesn't throw an exception.</p>\n<p>Supported formats:</p>\n<ul>\n<li><a href=\"#jsoneachrow\">JSONEachRow</a></li>\n<li><a href=\"#csvwithnames\">CSVWithNames</a></li>\n<li><a href=\"#tabseparatedwithnames\">TabSeparatedWithNames</a></li>\n<li><a href=\"#tskv\">TSKV</a></li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-input_format_import_nested_json\">input_format_import_nested_json<a class=\"headerlink\" href=\"#settings-input_format_import_nested_json\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables the insertion of JSON data with nested objects.</p>\n<p>Supported formats:</p>\n<ul>\n<li><a href=\"#jsoneachrow\">JSONEachRow</a></li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#jsoneachrow-nested\">Usage of Nested Structures</a> with the <code>JSONEachRow</code> format.</li>\n</ul>\n<h3 id=\"settings-input_format_with_names_use_header\">input_format_with_names_use_header<a class=\"headerlink\" href=\"#settings-input_format_with_names_use_header\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables checking the column order when inserting data.</p>\n<p>To improve insert performance, we recommend disabling this check if you are sure that the column order of the input data is the same as in the target table.</p>\n<p>Supported formats:</p>\n<ul>\n<li><a href=\"#csvwithnames\">CSVWithNames</a></li>\n<li><a href=\"#tabseparatedwithnames\">TabSeparatedWithNames</a></li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<h3 id=\"settings-date_time_input_format\">date_time_input_format<a class=\"headerlink\" href=\"#settings-date_time_input_format\" title=\"Permanent link\">&para;</a></h3>\n<p>Allows to choose a parser of text representation of date and time.</p>\n<p>The setting doesn't apply to <a href=\"#../../query_language/functions/date_time_functions/\">date and time functions</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>\n<p><code>'best_effort'</code> \u2014 Enables extended parsing.</p>\n<p>ClickHouse can parse the basic <code>YYYY-MM-DD HH:MM:SS</code> format and all <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"external nofollow noreferrer\">ISO 8601</a> date and time formats. For example, <code>'2018-06-08T01:02:03.000Z'</code>.</p>\n</li>\n<li>\n<p><code>'basic'</code> \u2014 Use basic parser.</p>\n<p>ClickHouse can parse only the basic <code>YYYY-MM-DD HH:MM:SS</code> format. For example, <code>'2019-08-20 10:18:56'</code>.</p>\n</li>\n</ul>\n<p>Default value: <code>'basic'</code>.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#../../data_types/datetime/\">DateTime data type.</a></li>\n<li><a href=\"#../../query_language/functions/date_time_functions/\">Functions for working with dates and times.</a></li>\n</ul>\n<h3 id=\"settings-join_default_strictness\">join_default_strictness<a class=\"headerlink\" href=\"#settings-join_default_strictness\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets default strictness for <a href=\"#select-join\">JOIN clauses</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li><code>ALL</code> \u2014 If the right table has several matching rows, ClickHouse creates a <a href=\"https://en.wikipedia.org/wiki/Cartesian_product\" rel=\"external nofollow noreferrer\">Cartesian product</a> from matching rows. This is the normal <code>JOIN</code> behavior from standard SQL.</li>\n<li><code>ANY</code> \u2014 If the right table has several matching rows, only the first one found is joined. If the right table has only one matching row, the results of <code>ANY</code> and <code>ALL</code> are the same.</li>\n<li><code>ASOF</code> \u2014 For joining sequences with an uncertain match.</li>\n<li><code>Empty string</code> \u2014 If <code>ALL</code> or <code>ANY</code> is not specified in the query, ClickHouse throws an exception.</li>\n</ul>\n<p>Default value: <code>ALL</code>.</p>\n<h3 id=\"settings-join_any_take_last_row\">join_any_take_last_row<a class=\"headerlink\" href=\"#setti");
            
            document.write("ngs-join_any_take_last_row\" title=\"Permanent link\">&para;</a></h3>\n<p>Changes behavior of join operations with <code>ANY</code> strictness.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Attention</p>\n<p>This setting applies only for <code>JOIN</code> operations with <a href=\"#../table_engines/join/\">Join</a> engine tables.</p>\n</div>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 If the right table has more than one matching row, only the first one found is joined.</li>\n<li>1 \u2014 If the right table has more than one matching row, only the last one found is joined.</li>\n</ul>\n<p>Default value: 0.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#select-join\">JOIN clause</a></li>\n<li><a href=\"#../table_engines/join/\">Join table engine</a></li>\n<li><a href=\"#settings-join_default_strictness\">join_default_strictness</a></li>\n</ul>\n<h3 id=\"settings-join_use_nulls\">join_use_nulls<a class=\"headerlink\" href=\"#settings-join_use_nulls\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the type of <a href=\"#../../query_language/select/\">JOIN</a> behavior. When merging tables, empty cells may appear. ClickHouse fills them differently based on this setting.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 The empty cells are filled with the default value of the corresponding field type.</li>\n<li>1 \u2014 <code>JOIN</code> behaves the same way as in standard SQL. The type of the corresponding field is converted to <a href=\"#data_type-nullable\">Nullable</a>, and empty cells are filled with <a href=\"#../../query_language/syntax/\">NULL</a>.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-join_any_take_last_row\">join_any_take_last_row<a class=\"headerlink\" href=\"#settings-join_any_take_last_row\" title=\"Permanent link\">&para;</a></h3>\n<p>Changes the behavior of <code>ANY JOIN</code>. When disabled, <code>ANY JOIN</code> takes the first row found for a key. When enabled, <code>ANY JOIN</code> takes the last matched row if there are multiple rows for the same key. The setting is used only in <a href=\"#../table_engines/join/\">Join table engine</a>.</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<h3 id=\"max-block-size\">max_block_size<a class=\"headerlink\" href=\"#max-block-size\" title=\"Permanent link\">&para;</a></h3>\n<p>In ClickHouse, data is processed by blocks (sets of column parts). The internal processing cycles for a single block are efficient enough, but there are noticeable expenditures on each block. The <code>max_block_size</code> setting is a recommendation for what size of block (in number of rows) to load from tables. The block size shouldn't be too small, so that the expenditures on each block are still noticeable, but not too large, so that the query with LIMIT that is completed after the first block is processed quickly. The goal is to avoid consuming too much memory when extracting a large number of columns in multiple threads, and to preserve at least some cache locality.</p>\n<p>Default value: 65,536.</p>\n<p>Blocks the size of <code>max_block_size</code> are not always loaded from the table. If it is obvious that less data needs to be retrieved, a smaller block is processed.</p>\n<h3 id=\"preferred-block-size-bytes\">preferred_block_size_bytes<a class=\"headerlink\" href=\"#preferred-block-size-bytes\" title=\"Permanent link\">&para;</a></h3>\n<p>Used for the same purpose as <code>max_block_size</code>, but it sets the recommended block size in bytes by adapting it to the number of rows in the block.<br />\nHowever, the block size cannot be more than <code>max_block_size</code> rows.<br />\nBy default: 1,000,000. It only works when reading from MergeTree engines.</p>\n<h3 id=\"setting-merge_tree_uniform_read_distribution\">merge_tree_uniform_read_distribution<a class=\"headerlink\" href=\"#setting-merge_tree_uniform_read_distribution\" title=\"Permanent link\">&para;</a></h3>\n<p>ClickHouse uses multiple threads when reading from <a href=\"#../table_engines/mergetree/\">MergeTree*</a> tables. This setting turns on/off the uniform distribution of reading tasks over the working threads. The algorithm of the uniform distribution aims to make execution time for all the threads approximately equal in a <code>SELECT</code> query.</p>\n<p><strong>Possible values</strong></p>\n<ul>\n<li>0 \u2014 Do not use uniform read distribution.</li>\n<li>1 \u2014 Use uniform read distribution.</li>\n</ul>\n<p><strong>Default value</strong>: 1.</p>\n<h3 id=\"setting-merge_tree_min_rows_for_concurrent_read\">merge_tree_min_rows_for_concurrent_read<a class=\"headerlink\" href=\"#setting-merge_tree_min_rows_for_concurrent_read\" title=\"Permanent link\">&para;</a></h3>\n<p>If the number of rows to be read from a file of a <a href=\"#../table_engines/mergetree/\">MergeTree*</a> table exceeds <code>merge_tree_min_rows_for_concurrent_read</code> then ClickHouse tries to perform a concurrent reading from this file on several threads.</p>\n<p><strong>Possible values</strong></p>\n<p>Any positive integer.</p>\n<p><strong>Default value</strong>: 163840.</p>\n<h3 id=\"setting-merge_tree_min_rows_for_seek\">merge_tree_min_rows_for_seek<a class=\"headerlink\" href=\"#setting-merge_tree_min_rows_for_seek\" title=\"Permanent link\">&para;</a></h3>\n<p>If the distance between two data blocks to be read in one file is less than <code>merge_tree_min_rows_for_seek</code> rows, then ClickHouse does not seek through the file, but reads the data sequentially.</p>\n<p><strong>Possible values</strong></p>\n<p>Any positive integer.</p>\n<p><strong>Default value</strong>: 0.</p>\n<h3 id=\"setting-merge_tree_coarse_index_granularity\">merge_tree_coarse_index_granularity<a class=\"headerlink\" href=\"#setting-merge_tree_coarse_index_granularity\" title=\"Permanent link\">&para;</a></h3>\n<p>When searching data, ClickHouse checks the data marks in the index file. If ClickHouse finds that required keys are in some range, it divides this range into <code>merge_tree_coarse_index_granularity</code> subranges and searches the required keys there recursively.</p>\n<p><strong>Possible values</strong></p>\n<p>Any positive even integer.</p>\n<p><strong>Default value</strong>: 8.</p>\n<h3 id=\"setting-merge_tree_max_rows_to_use_cache\">merge_tree_max_rows_to_use_cache<a class=\"headerlink\" href=\"#setting-merge_tree_max_rows_to_use_cache\" title=\"Permanent link\">&para;</a></h3>\n<p>If ClickHouse should read more than <code>merge_tree_max_rows_to_use_cache</code> rows in one query, it does not use the cash of uncompressed blocks. The <a href=\"#server-settings-uncompressed_cache_size\">uncompressed_cache_size</a> server setting defines the size of the cache of uncompressed blocks.</p>\n<p><strong>Possible values</strong></p>\n<p>Any positive integer.</p>\n<p><strong>Default value</strong>: 1048576.</p>\n<h3 id=\"settings-min_bytes_to_use_direct_io\">min_bytes_to_use_direct_io<a class=\"headerlink\" href=\"#settings-min_bytes_to_use_direct_io\" title=\"Permanent link\">&para;</a></h3>\n<p>The minimum data volume required for using direct I/O access to the storage disk.</p>\n<p>ClickHouse uses this setting when reading data from tables. If the total storage volume of all the data to be read exceeds <code>min_bytes_to_use_direct_io</code> bytes, then ClickHouse reads the data from the storage disk with the <code>O_DIRECT</code> option.</p>\n<p><strong>Possible values</strong></p>\n<ul>\n<li>0 \u2014 Direct I/O is disabled.</li>\n<li>Positive integer.</li>\n</ul>\n<p><strong>Default value</strong>: 0.</p>\n<h3 id=\"settings-log-queries\">log_queries<a class=\"headerlink\" href=\"#settings-log-queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Setting up query logging.</p>\n<p>Queries sent to ClickHouse with this setup are logged according to the rules in the <a href=\"#server_settings-query-log\">query_log</a> server configuration parameter.</p>\n<p><strong>Example</strong>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">log_queries=1</span>\n</code></pre></div>\n\n\n<h3 id=\"settings-max_insert_block_size\">max_insert_block_size<a class=\"headerlink\" href=\"#settings-max_insert_block_size\" title=\"Permanent link\">&para;</a></h3>\n<p>The size of blocks to form for insertion into a table.<br />\nThis setting only applies in cases when the server forms the blocks.<br />\nFor example, for an INSERT via the HTTP interface, the server parses the data format and forms blocks of the specified size.<br />\nBut when using clickhouse-client, the client parses the data itself, and the 'max_insert_block_size' setting on the server doesn't affect the size of the inserted blocks.<br />\nThe setting also doesn't have a purpose when using INSERT SELECT, since data is inserted using the same blocks that are formed after SELECT.</p>\n<p>Default value: 1,048,576.</p>\n<p>The default is slightly more than <code>max_block_size</code>. The reason for this is because certain table engines (<code>*MergeTree</code>) form a data part on the disk for each inserted block, which is a fairly large entity. Similarly, <code>*MergeTree</code> tables sort data during insertion, and a large enough block size allows sorting more data in RAM.</p>\n<h3 id=\"settings-max_replica_delay_for_distributed_queries\">max_replica_delay_for_distributed_queries<a class=\"headerlink\" href=\"#settings-max_replica_delay_for_distributed_queries\" title=\"Permanent link\">&para;</a></h3>\n<p>Disables lagging replicas for distributed queries. See \"<a href=\"#../../operations/table_engines/replication/\">Replication</a>\".</p>\n<p>Sets the time in seconds. If a replica lags more than the set value, this replica is not used.</p>\n<p>Default value: 300.</p>\n<p>Used when performing <code>SELECT</code> from a distributed table that points to replicated tables.</p>\n<h3 id=\"settings-max_threads\">max_threads<a class=\"headerlink\" href=\"#settings-max_threads\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of query processing threads, excluding threads for retrieving data from remote servers (see the 'max_distributed_connections' parameter).</p>\n<p>This parameter applies to threads that perform the same stages of the query processing pipeline in parallel.<br />\nFor example, when reading from a table, if it is possible to evaluate expressions with functions, filter with WHERE and pre-aggregate for GROUP BY in parallel using at least 'm");
            
            document.write("ax_threads' number of threads, then 'max_threads' are used.</p>\n<p>Default value: the number of physical CPU cores.</p>\n<p>If less than one SELECT query is normally run on a server at a time, set this parameter to a value slightly less than the actual number of processor cores.</p>\n<p>For queries that are completed quickly because of a LIMIT, you can set a lower 'max_threads'. For example, if the necessary number of entries are located in every block and max_threads = 8, then 8 blocks are retrieved, although it would have been enough to read just one.</p>\n<p>The smaller the <code>max_threads</code> value, the less memory is consumed.</p>\n<h3 id=\"max-compress-block-size\">max_compress_block_size<a class=\"headerlink\" href=\"#max-compress-block-size\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum size of blocks of uncompressed data before compressing for writing to a table. By default, 1,048,576 (1 MiB). If the size is reduced, the compression rate is significantly reduced, the compression and decompression speed increases slightly due to cache locality, and memory consumption is reduced. There usually isn't any reason to change this setting.</p>\n<p>Don't confuse blocks for compression (a chunk of memory consisting of bytes) with blocks for query processing (a set of rows from a table).</p>\n<h3 id=\"min-compress-block-size\">min_compress_block_size<a class=\"headerlink\" href=\"#min-compress-block-size\" title=\"Permanent link\">&para;</a></h3>\n<p>For <a href=\"#../../operations/table_engines/mergetree/\">MergeTree</a>\" tables. In order to reduce latency when processing queries, a block is compressed when writing the next mark if its size is at least 'min_compress_block_size'. By default, 65,536.</p>\n<p>The actual size of the block, if the uncompressed data is less than 'max_compress_block_size', is no less than this value and no less than the volume of data for one mark.</p>\n<p>Let's look at an example. Assume that 'index_granularity' was set to 8192 during table creation.</p>\n<p>We are writing a UInt32-type column (4 bytes per value). When writing 8192 rows, the total will be 32 KB of data. Since min_compress_block_size = 65,536, a compressed block will be formed for every two marks.</p>\n<p>We are writing a URL column with the String type (average size of 60 bytes per value). When writing 8192 rows, the average will be slightly less than 500 KB of data. Since this is more than 65,536, a compressed block will be formed for each mark. In this case, when reading data from the disk in the range of a single mark, extra data won't be decompressed.</p>\n<p>There usually isn't any reason to change this setting.</p>\n<h3 id=\"settings-max_query_size\">max_query_size<a class=\"headerlink\" href=\"#settings-max_query_size\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum part of a query that can be taken to RAM for parsing with the SQL parser.<br />\nThe INSERT query also contains data for INSERT that is processed by a separate stream parser (that consumes O(1) RAM), which is not included in this restriction.</p>\n<p>Default value: 256 KiB.</p>\n<h3 id=\"interactive-delay\">interactive_delay<a class=\"headerlink\" href=\"#interactive-delay\" title=\"Permanent link\">&para;</a></h3>\n<p>The interval in microseconds for checking whether request execution has been canceled and sending the progress.</p>\n<p>Default value: 100,000 (checks for canceling and sends the progress ten times per second).</p>\n<h3 id=\"connect-timeout-receive-timeout-send-timeout\">connect_timeout, receive_timeout, send_timeout<a class=\"headerlink\" href=\"#connect-timeout-receive-timeout-send-timeout\" title=\"Permanent link\">&para;</a></h3>\n<p>Timeouts in seconds on the socket used for communicating with the client.</p>\n<p>Default value: 10, 300, 300.</p>\n<h3 id=\"poll-interval\">poll_interval<a class=\"headerlink\" href=\"#poll-interval\" title=\"Permanent link\">&para;</a></h3>\n<p>Lock in a wait loop for the specified number of seconds.</p>\n<p>Default value: 10.</p>\n<h3 id=\"max-distributed-connections\">max_distributed_connections<a class=\"headerlink\" href=\"#max-distributed-connections\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of simultaneous connections with remote servers for distributed processing of a single query to a single Distributed table. We recommend setting a value no less than the number of servers in the cluster.</p>\n<p>Default value: 1024.</p>\n<p>The following parameters are only used when creating Distributed tables (and when launching a server), so there is no reason to change them at runtime.</p>\n<h3 id=\"distributed-connections-pool-size\">distributed_connections_pool_size<a class=\"headerlink\" href=\"#distributed-connections-pool-size\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of simultaneous connections with remote servers for distributed processing of all queries to a single Distributed table. We recommend setting a value no less than the number of servers in the cluster.</p>\n<p>Default value: 1024.</p>\n<h3 id=\"connect-timeout-with-failover-ms\">connect_timeout_with_failover_ms<a class=\"headerlink\" href=\"#connect-timeout-with-failover-ms\" title=\"Permanent link\">&para;</a></h3>\n<p>The timeout in milliseconds for connecting to a remote server for a Distributed table engine, if the 'shard' and 'replica' sections are used in the cluster definition.<br />\nIf unsuccessful, several attempts are made to connect to various replicas.</p>\n<p>Default value: 50.</p>\n<h3 id=\"connections-with-failover-max-tries\">connections_with_failover_max_tries<a class=\"headerlink\" href=\"#connections-with-failover-max-tries\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of connection attempts with each replica for the Distributed table engine.</p>\n<p>Default value: 3.</p>\n<h3 id=\"extremes\">extremes<a class=\"headerlink\" href=\"#extremes\" title=\"Permanent link\">&para;</a></h3>\n<p>Whether to count extreme values (the minimums and maximums in columns of a query result). Accepts 0 or 1. By default, 0 (disabled).<br />\nFor more information, see the section \"Extreme values\".</p>\n<h3 id=\"setting-use_uncompressed_cache\">use_uncompressed_cache<a class=\"headerlink\" href=\"#setting-use_uncompressed_cache\" title=\"Permanent link\">&para;</a></h3>\n<p>Whether to use a cache of uncompressed blocks. Accepts 0 or 1. By default, 0 (disabled).<br />\nUsing the uncompressed cache (only for tables in the MergeTree family) can significantly reduce latency and increase throughput when working with a large number of short queries. Enable this setting for users who send frequent short requests. Also pay attention to the <a href=\"#server-settings-uncompressed_cache_size\">uncompressed_cache_size</a> configuration parameter (only set in the config file) \u2013 the size of uncompressed cache blocks. By default, it is 8 GiB. The uncompressed cache is filled in as needed and the least-used data is automatically deleted.</p>\n<p>For queries that read at least a somewhat large volume of data (one million rows or more), the uncompressed cache is disabled automatically in order to save space for truly small queries. This means that you can keep the 'use_uncompressed_cache' setting always set to 1.</p>\n<h3 id=\"replace-running-query\">replace_running_query<a class=\"headerlink\" href=\"#replace-running-query\" title=\"Permanent link\">&para;</a></h3>\n<p>When using the HTTP interface, the 'query_id' parameter can be passed. This is any string that serves as the query identifier.<br />\nIf a query from the same user with the same 'query_id' already exists at this time, the behavior depends on the 'replace_running_query' parameter.</p>\n<p><code>0</code> (default) \u2013 Throw an exception (don't allow the query to run if a query with the same 'query_id' is already running).</p>\n<p><code>1</code> \u2013 Cancel the old query and start running the new one.</p>\n<p>Yandex.Metrica uses this parameter set to 1 for implementing suggestions for segmentation conditions. After entering the next character, if the old query hasn't finished yet, it should be canceled.</p>\n<h3 id=\"stream-flush-interval-ms\">stream_flush_interval_ms<a class=\"headerlink\" href=\"#stream-flush-interval-ms\" title=\"Permanent link\">&para;</a></h3>\n<p>Works for tables with streaming in the case of a timeout, or when a thread generates <a href=\"#settings-max_insert_block_size\">max_insert_block_size</a> rows.</p>\n<p>The default value is 7500.</p>\n<p>The smaller the value, the more often data is flushed into the table. Setting the value too low leads to poor performance.</p>\n<h3 id=\"settings-load_balancing\">load_balancing<a class=\"headerlink\" href=\"#settings-load_balancing\" title=\"Permanent link\">&para;</a></h3>\n<p>Specifies the algorithm of replicas selection that is used for distributed query processing.</p>\n<p>ClickHouse supports the following algorithms of choosing replicas:</p>\n<ul>\n<li><a href=\"#load_balancing-random\">Random</a> (by default)</li>\n<li><a href=\"#load_balancing-nearest_hostname\">Nearest hostname</a></li>\n<li><a href=\"#load_balancing-in_order\">In order</a></li>\n<li><a href=\"#load_balancing-first_or_random\">First or random</a></li>\n</ul>\n<h4 id=\"load_balancing-random\">Random (by default)<a class=\"headerlink\" href=\"#load_balancing-random\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">load_balancing</span> <span class=\"o\">=</span> <span class=\"n\">random</span>\n</code></pre></div>\n\n\n<p>The number of errors is counted for each replica. The query is sent to the replica with the fewest errors, and if there are several of these, to any one of them.<br />\nDisadvantages: Server proximity is not accounted for; if the replicas have different data, you will also get different data.</p>\n<h4 id=\"load_balancing-nearest_hostname\">Nearest Hostname<a class=\"headerlink\" href=\"#load_balancing-nearest_hostname\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">load_balancing</span> <span class=\"o\">=</span> <span class=\"n\">nearest_hostname</span>\n</code></pre></div>\n\n\n<p>The number of errors is counted for each replica. Every 5 minutes, the number of errors is integrally divided by 2. Thus, the number of errors is calculated for a recent time with exponential smoothing. If there is on");
            
            document.write("e replica with a minimal number of errors (i.e. errors occurred recently on the other replicas), the query is sent to it. If there are multiple replicas with the same minimal number of errors, the query is sent to the replica with a host name that is most similar to the server's host name in the config file (for the number of different characters in identical positions, up to the minimum length of both host names).</p>\n<p>For instance, example01-01-1 and example01-01-2.yandex.ru are different in one position, while example01-01-1 and example01-02-2 differ in two places.<br />\nThis method might seem primitive, but it doesn't require external data about network topology, and it doesn't compare IP addresses, which would be complicated for our IPv6 addresses.</p>\n<p>Thus, if there are equivalent replicas, the closest one by name is preferred.<br />\nWe can also assume that when sending a query to the same server, in the absence of failures, a distributed query will also go to the same servers. So even if different data is placed on the replicas, the query will return mostly the same results.</p>\n<h4 id=\"load_balancing-in_order\">In Order<a class=\"headerlink\" href=\"#load_balancing-in_order\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">load_balancing</span> <span class=\"o\">=</span> <span class=\"n\">in_order</span>\n</code></pre></div>\n\n\n<p>Replicas with the same number of errors are accessed in the same order as they are specified in configuration.<br />\nThis method is appropriate when you know exactly which replica is preferable.</p>\n<h4 id=\"load_balancing-first_or_random\">First or Random<a class=\"headerlink\" href=\"#load_balancing-first_or_random\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">load_balancing</span> <span class=\"o\">=</span> <span class=\"n\">first_or_random</span>\n</code></pre></div>\n\n\n<p>This algorithm chooses the first replica in the set or a random replica if the first is unavailable. It's effective in cross-replication topology setups, but useless in other configurations.</p>\n<p>The <code>first_or_random</code> algorithm solves the problem of the <code>in_order</code> algorithm. With <code>in_order</code>, if one replica goes down, the next one gets a double load while the remaining replicas handle the usual amount of traffic. When using the <code>first_or_random</code> algorithm, load is evenly distributed among replicas that are still available.</p>\n<h3 id=\"settings-prefer_localhost_replica\">prefer_localhost_replica<a class=\"headerlink\" href=\"#settings-prefer_localhost_replica\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables/disables preferable using the localhost replica when processing distributed queries.</p>\n<p>Possible values:</p>\n<ul>\n<li>1 \u2014 ClickHouse always sends a query to the localhost replica if it exists.</li>\n<li>0 \u2014 ClickHouse uses the balancing strategy specified by the <a href=\"#settings-load_balancing\">load_balancing</a> setting.</li>\n</ul>\n<p>Default value: 1.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>Disable this setting if you use <a href=\"#settings-max_parallel_replicas\">max_parallel_replicas</a>.</p>\n</div>\n<h3 id=\"totals-mode\">totals_mode<a class=\"headerlink\" href=\"#totals-mode\" title=\"Permanent link\">&para;</a></h3>\n<p>How to calculate TOTALS when HAVING is present, as well as when max_rows_to_group_by and group_by_overflow_mode = 'any' are present.<br />\nSee the section \"WITH TOTALS modifier\".</p>\n<h3 id=\"totals-auto-threshold\">totals_auto_threshold<a class=\"headerlink\" href=\"#totals-auto-threshold\" title=\"Permanent link\">&para;</a></h3>\n<p>The threshold for <code>totals_mode = 'auto'</code>.<br />\nSee the section \"WITH TOTALS modifier\".</p>\n<h3 id=\"settings-max_parallel_replicas\">max_parallel_replicas<a class=\"headerlink\" href=\"#settings-max_parallel_replicas\" title=\"Permanent link\">&para;</a></h3>\n<p>The maximum number of replicas for each shard when executing a query.<br />\nFor consistency (to get different parts of the same data split), this option only works when the sampling key is set.<br />\nReplica lag is not controlled.</p>\n<h3 id=\"compile\">compile<a class=\"headerlink\" href=\"#compile\" title=\"Permanent link\">&para;</a></h3>\n<p>Enable compilation of queries. By default, 0 (disabled).</p>\n<p>Compilation is only used for part of the query-processing pipeline: for the first stage of aggregation (GROUP BY).<br />\nIf this portion of the pipeline was compiled, the query may run faster due to deployment of short cycles and inlining aggregate function calls. The maximum performance improvement (up to four times faster in rare cases) is seen for queries with multiple simple aggregate functions. Typically, the performance gain is insignificant. In very rare cases, it may slow down query execution.</p>\n<h3 id=\"min-count-to-compile\">min_count_to_compile<a class=\"headerlink\" href=\"#min-count-to-compile\" title=\"Permanent link\">&para;</a></h3>\n<p>How many times to potentially use a compiled chunk of code before running compilation. By default, 3.<br />\nFor testing, the value can be set to 0: compilation runs synchronously and the query waits for the end of the compilation process before continuing execution. For all other cases, use values \u200b\u200bstarting with 1. Compilation normally takes about 5-10 seconds.<br />\nIf the value is 1 or more, compilation occurs asynchronously in a separate thread. The result will be used as soon as it is ready, including queries that are currently running.</p>\n<p>Compiled code is required for each different combination of aggregate functions used in the query and the type of keys in the GROUP BY clause.<br />\nThe results of compilation are saved in the build directory in the form of .so files. There is no restriction on the number of compilation results, since they don't use very much space. Old results will be used after server restarts, except in the case of a server upgrade \u2013 in this case, the old results are deleted.</p>\n<h3 id=\"session_settings-output_format_json_quote_64bit_integers\">output_format_json_quote_64bit_integers<a class=\"headerlink\" href=\"#session_settings-output_format_json_quote_64bit_integers\" title=\"Permanent link\">&para;</a></h3>\n<p>If the value is true, integers appear in quotes when using JSON* Int64 and UInt64 formats (for compatibility with most JavaScript implementations); otherwise, integers are output without the quotes.</p>\n<h3 id=\"settings-format_csv_delimiter\">format_csv_delimiter<a class=\"headerlink\" href=\"#settings-format_csv_delimiter\" title=\"Permanent link\">&para;</a></h3>\n<p>The character interpreted as a delimiter in the CSV data. By default, the delimiter is <code>,</code>.</p>\n<h3 id=\"settings-input_format_csv_unquoted_null_literal_as_null\">input_format_csv_unquoted_null_literal_as_null<a class=\"headerlink\" href=\"#settings-input_format_csv_unquoted_null_literal_as_null\" title=\"Permanent link\">&para;</a></h3>\n<p>For CSV input format enables or disables parsing of unquoted <code>NULL</code> as literal (synonym for <code>\\N</code>).</p>\n<h3 id=\"settings-insert_quorum\">insert_quorum<a class=\"headerlink\" href=\"#settings-insert_quorum\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables quorum writes.</p>\n<ul>\n<li>If <code>insert_quorum &lt; 2</code>, the quorum writes are disabled.</li>\n<li>If <code>insert_quorum &gt;= 2</code>, the quorum writes are enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<p><strong>Quorum writes</strong></p>\n<p><code>INSERT</code> succeeds only when ClickHouse manages to correctly write data to the <code>insert_quorum</code> of replicas during the <code>insert_quorum_timeout</code>. If for any reason the number of replicas with successful writes does not reach the <code>insert_quorum</code>, the write is considered failed and ClickHouse will delete the inserted block from all the replicas where data has already been written.</p>\n<p>All the replicas in the quorum are consistent, i.e., they contain data from all previous <code>INSERT</code> queries. The <code>INSERT</code> sequence is linearized.</p>\n<p>When reading the data written from the <code>insert_quorum</code>, you can use the <a href=\"#settings-select_sequential_consistency\">select_sequential_consistency</a> option.</p>\n<p><strong>ClickHouse generates an exception</strong></p>\n<ul>\n<li>If the number of available replicas at the time of the query is less than the <code>insert_quorum</code>.</li>\n<li>At an attempt to write data when the previous block has not yet been inserted in the <code>insert_quorum</code> of replicas. This situation may occur if the user tries to perform an <code>INSERT</code> before the previous one with the <code>insert_quorum</code> is completed.</li>\n</ul>\n<p><strong>See also the following parameters:</strong></p>\n<ul>\n<li><a href=\"#settings-insert_quorum_timeout\">insert_quorum_timeout</a></li>\n<li><a href=\"#settings-select_sequential_consistency\">select_sequential_consistency</a></li>\n</ul>\n<h3 id=\"settings-insert_quorum_timeout\">insert_quorum_timeout<a class=\"headerlink\" href=\"#settings-insert_quorum_timeout\" title=\"Permanent link\">&para;</a></h3>\n<p>Quorum write timeout in seconds. If the timeout has passed and no write has taken place yet, ClickHouse will generate an exception and the client must repeat the query to write the same block to the same or any other replica.</p>\n<p>Default value: 60 seconds.</p>\n<p><strong>See also the following parameters:</strong></p>\n<ul>\n<li><a href=\"#settings-insert_quorum\">insert_quorum</a></li>\n<li><a href=\"#settings-select_sequential_consistency\">select_sequential_consistency</a></li>\n</ul>\n<h3 id=\"settings-select_sequential_consistency\">select_sequential_consistency<a class=\"headerlink\" href=\"#settings-select_sequential_consistency\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables sequential consistency for <code>SELECT</code> queries:</p>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<p><strong>Usage</strong></p>\n<p>When sequential consistency is enabled, ClickHouse allows the client to execute the <code>SELECT</code> query only for those replicas that contain data from all previous <code");
            
            document.write(">INSERT</code> queries executed with <code>insert_quorum</code>. If the client refers to a partial replica, ClickHouse will generate an exception. The SELECT query will not include data that has not yet been written to the quorum of replicas.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#settings-insert_quorum\">insert_quorum</a></li>\n<li><a href=\"#settings-insert_quorum_timeout\">insert_quorum_timeout</a></li>\n</ul>\n<h3 id=\"settings-max_network_bytes\">max_network_bytes<a class=\"headerlink\" href=\"#settings-max_network_bytes\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the data volume (in bytes) that is received or transmitted over the network when executing a query. This setting applies to every individual query.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Data volume control is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-max_network_bandwidth\">max_network_bandwidth<a class=\"headerlink\" href=\"#settings-max_network_bandwidth\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the speed of the data exchange over the network in bytes per second. This setting applies to every query.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Bandwidth control is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-max_network_bandwidth_for_user\">max_network_bandwidth_for_user<a class=\"headerlink\" href=\"#settings-max_network_bandwidth_for_user\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the speed of the data exchange over the network in bytes per second. This setting applies to all concurrently running queries performed by a single user.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Control of the data speed is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-max_network_bandwidth_for_all_users\">max_network_bandwidth_for_all_users<a class=\"headerlink\" href=\"#settings-max_network_bandwidth_for_all_users\" title=\"Permanent link\">&para;</a></h3>\n<p>Limits the speed that data is exchanged at over the network in bytes per second. This setting applies to all concurrently running queries on the server.</p>\n<p>Possible values:</p>\n<ul>\n<li>Positive integer.</li>\n<li>0 \u2014 Control of the data speed is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-allow_experimental_cross_to_join_conversion\">allow_experimental_cross_to_join_conversion<a class=\"headerlink\" href=\"#settings-allow_experimental_cross_to_join_conversion\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables:</p>\n<ol>\n<li>Rewriting queries for join from the syntax with commas to the <code>JOIN ON/USING</code> syntax. If the setting value is 0, ClickHouse doesn't process queries with syntax that uses commas, and throws an exception.</li>\n<li>Converting <code>CROSS JOIN</code> to <code>INNER JOIN</code> if <code>WHERE</code> conditions allow it.</li>\n</ol>\n<p>Possible values:</p>\n<ul>\n<li>0 \u2014 Disabled.</li>\n<li>1 \u2014 Enabled.</li>\n</ul>\n<p>Default value: 1.</p>\n<p><strong>See Also</strong></p>\n<ul>\n<li><a href=\"#select-join\">Multiple JOIN</a></li>\n</ul>\n<h3 id=\"settings-count_distinct_implementation\">count_distinct_implementation<a class=\"headerlink\" href=\"#settings-count_distinct_implementation\" title=\"Permanent link\">&para;</a></h3>\n<p>Specifies which of the <code>uniq*</code> functions should be used to perform the <a href=\"#agg_function-count\">COUNT(DISTINCT ...)</a> construction.</p>\n<p>Possible values:</p>\n<ul>\n<li><a href=\"#agg_function-uniq\">uniq</a></li>\n<li><a href=\"#agg_function-uniqcombined\">uniqCombined</a></li>\n<li><a href=\"#agg_function-uniqhll12\">uniqHLL12</a></li>\n<li><a href=\"#agg_function-uniqexact\">uniqExact</a></li>\n</ul>\n<p>Default value: <code>uniqExact</code>.</p>\n<h3 id=\"settings-skip_unavailable_shards\">skip_unavailable_shards<a class=\"headerlink\" href=\"#settings-skip_unavailable_shards\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables silent skipping of:</p>\n<ul>\n<li>\n<p>Node, if its name cannot be resolved through DNS.</p>\n<p>When skipping is disabled, ClickHouse requires that all the nodes in the <a href=\"#server_settings_remote_servers\">cluster configuration</a> can be resolvable through DNS. Otherwise, ClickHouse throws an exception when trying to perform a query on the cluster.</p>\n<p>If skipping is enabled, ClickHouse considers unresolved nodes as unavailable and tries to resolve them at every connection attempt. Such behavior creates the risk of wrong cluster configuration because a user can specify the wrong node name, and ClickHouse doesn't report about it. However, this can be useful in systems with dynamic DNS, for example, <a href=\"https://kubernetes.io\" rel=\"external nofollow noreferrer\">Kubernetes</a>, where nodes can be unresolvable during downtime, and this is not an error.</p>\n</li>\n<li>\n<p>Shard, if there are no available replicas of the shard.</p>\n<p>When skipping is disabled, ClickHouse throws an exception.</p>\n<p>When skipping is enabled, ClickHouse returns a partial answer and doesn't report about issues with nodes availability.</p>\n</li>\n</ul>\n<p>Possible values:</p>\n<ul>\n<li>1 \u2014 skipping enabled.</li>\n<li>0 \u2014 skipping disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"setting-optimize_throw_if_noop\">optimize_throw_if_noop<a class=\"headerlink\" href=\"#setting-optimize_throw_if_noop\" title=\"Permanent link\">&para;</a></h3>\n<p>Enables or disables throwing an exception if an <a href=\"#misc_operations-optimize\">OPTIMIZE</a> query didn't perform a merge.</p>\n<p>By default, <code>OPTIMIZE</code> returns successfully even if it didn't do anything. This setting lets you differentiate these situations and get the reason in an exception message.</p>\n<p>Possible values:</p>\n<ul>\n<li>1 \u2014 Throwing an exception is enabled.</li>\n<li>0 \u2014 Throwing an exception is disabled.</li>\n</ul>\n<p>Default value: 0.</p>\n<h3 id=\"settings-distributed_replica_error_half_life\">distributed_replica_error_half_life<a class=\"headerlink\" href=\"#settings-distributed_replica_error_half_life\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Type: seconds</li>\n<li>Default value: 60 seconds</li>\n</ul>\n<p>Controls how fast errors of distributed tables are zeroed. Given that currently a replica was unavailabe for some time and accumulated 5 errors and distributed_replica_error_half_life is set to 1 second, then said replica is considered back to normal in 3 seconds since last error.</p>\n<p><strong> See also </strong></p>\n<ul>\n<li><a href=\"#../../operations/table_engines/distributed/\">Table engine Distributed</a></li>\n<li><a href=\"#settings-distributed_replica_error_cap\"><code>distributed_replica_error_cap</code></a></li>\n</ul>\n<h3 id=\"settings-distributed_replica_error_cap\">distributed_replica_error_cap<a class=\"headerlink\" href=\"#settings-distributed_replica_error_cap\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Type: unsigned int</li>\n<li>Default value: 1000</li>\n</ul>\n<p>Error count of each replica is capped at this value, preventing a single replica from accumulating to many errors.</p>\n<p><strong> See also </strong></p>\n<ul>\n<li><a href=\"#../../operations/table_engines/distributed/\">Table engine Distributed</a></li>\n<li><a href=\"#settings-distributed_replica_error_half_life\"><code>distributed_replica_error_half_life</code></a></li>\n</ul>\n<h3 id=\"setting-os_thread_priority\">os_thread_priority<a class=\"headerlink\" href=\"#setting-os_thread_priority\" title=\"Permanent link\">&para;</a></h3>\n<p>Sets the priority (<a href=\"https://en.wikipedia.org/wiki/Nice_(Unix)\" rel=\"external nofollow noreferrer\">nice</a>) for threads that execute queries. The OS scheduler considers this priority when choosing the next thread to run on each available CPU core.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>To use this setting, you need to set the <code>CAP_SYS_NICE</code> capability. The <code>clickhouse-server</code> package sets it up during installation. Some virtual environments don't allow you to set the <code>CAP_SYS_NICE</code> capability. In this case, <code>clickhouse-server</code> shows a message about it at the start.</p>\n</div>\n<p>Possible values:</p>\n<ul>\n<li>You can set values in the range <code>[-20, 19]</code>.</li>\n</ul>\n<p>Lower values mean higher priority. Threads with low <code>nice</code> priority values are executed more frequently than threads with high values. High values are preferable for long running non-interactive queries because it allows them to quickly give up resources in favor of short interactive queries when they arrive.</p>\n<p>Default value: 0.</p>\n<p><a href=\"https://clickhouse.yandex/docs/en/operations/settings/settings/\" rel=\"external nofollow noreferrer\">Original article</a> <!-- hide --><br />\n<a name=\"../../../../../operations/settings/settings_profiles/\"></a><a name=\"../../../operations/settings/settings_profiles/\"></a><a name=\"../settings/settings_profiles/\"></a><a name=\"operations/settings/settings_profiles/\"></a><a name=\"../../../settings/settings_profiles/\"></a><a name=\"../../../../operations/settings/settings_profiles/\"></a><a name=\"../operations/settings/settings_profiles/\"></a><a name=\"../../operations/settings/settings_profiles/\"></a><a name=\"settings/settings_profiles/\"></a><a name=\"settings_profiles/\"></a><a name=\"../../../../settings/settings_profiles/\"></a><a name=\"../../../../../../settings/settings_profiles/\"></a><a name=\"../../settings/settings_profiles/\"></a><a name=\"../../../../../settings/settings_profiles/\"></a></p>\n<h2 id=\"settings-profiles\">Settings profiles<a class=\"headerlink\" href=\"#settings-profiles\" title=\"Permanent link\">&para;</a></h2>\n<p>A settings profile is a collection of settings grouped under the same name. Each ClickHouse user has a profile.<br />\nTo apply all the settings in a profile, set the <code>profile</code> setting.</p>\n<p>Example:</p>\n<p>Install the <code>web</code> profile.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">profile</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;web&#39;</span>\n</code></pre></div>\n\n\n<p>Settings profiles are declared in the user config file. This is usually <code>users.xml</code>.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">");
            
            document.write("&lt;!-- Settings profiles --&gt;</span>\n<span class=\"nt\">&lt;profiles&gt;</span>\n    <span class=\"c\">&lt;!-- Default settings --&gt;</span>\n    <span class=\"nt\">&lt;default&gt;</span>\n        <span class=\"c\">&lt;!-- The maximum number of threads when running a single query. --&gt;</span>\n        <span class=\"nt\">&lt;max_threads&gt;</span>8<span class=\"nt\">&lt;/max_threads&gt;</span>\n    <span class=\"nt\">&lt;/default&gt;</span>\n\n    <span class=\"c\">&lt;!-- Settings for quries from the user interface --&gt;</span>\n    <span class=\"nt\">&lt;web&gt;</span>\n        <span class=\"nt\">&lt;max_rows_to_read&gt;</span>1000000000<span class=\"nt\">&lt;/max_rows_to_read&gt;</span>\n        <span class=\"nt\">&lt;max_bytes_to_read&gt;</span>100000000000<span class=\"nt\">&lt;/max_bytes_to_read&gt;</span>\n\n        <span class=\"nt\">&lt;max_rows_to_group_by&gt;</span>1000000<span class=\"nt\">&lt;/max_rows_to_group_by&gt;</span>\n        <span class=\"nt\">&lt;group_by_overflow_mode&gt;</span>any<span class=\"nt\">&lt;/group_by_overflow_mode&gt;</span>\n\n        <span class=\"nt\">&lt;max_rows_to_sort&gt;</span>1000000<span class=\"nt\">&lt;/max_rows_to_sort&gt;</span>\n        <span class=\"nt\">&lt;max_bytes_to_sort&gt;</span>1000000000<span class=\"nt\">&lt;/max_bytes_to_sort&gt;</span>\n\n        <span class=\"nt\">&lt;max_result_rows&gt;</span>100000<span class=\"nt\">&lt;/max_result_rows&gt;</span>\n        <span class=\"nt\">&lt;max_result_bytes&gt;</span>100000000<span class=\"nt\">&lt;/max_result_bytes&gt;</span>\n        <span class=\"nt\">&lt;result_overflow_mode&gt;</span>break<span class=\"nt\">&lt;/result_overflow_mode&gt;</span>\n\n        <span class=\"nt\">&lt;max_execution_time&gt;</span>600<span class=\"nt\">&lt;/max_execution_time&gt;</span>\n        <span class=\"nt\">&lt;min_execution_speed&gt;</span>1000000<span class=\"nt\">&lt;/min_execution_speed&gt;</span>\n        <span class=\"nt\">&lt;timeout_before_checking_execution_speed&gt;</span>15<span class=\"nt\">&lt;/timeout_before_checking_execution_speed&gt;</span>\n\n        <span class=\"nt\">&lt;max_columns_to_read&gt;</span>25<span class=\"nt\">&lt;/max_columns_to_read&gt;</span>\n        <span class=\"nt\">&lt;max_temporary_columns&gt;</span>100<span class=\"nt\">&lt;/max_temporary_columns&gt;</span>\n        <span class=\"nt\">&lt;max_temporary_non_const_columns&gt;</span>50<span class=\"nt\">&lt;/max_temporary_non_const_columns&gt;</span>\n\n        <span class=\"nt\">&lt;max_subquery_depth&gt;</span>2<span class=\"nt\">&lt;/max_subquery_depth&gt;</span>\n        <span class=\"nt\">&lt;max_pipeline_depth&gt;</span>25<span class=\"nt\">&lt;/max_pipeline_depth&gt;</span>\n        <span class=\"nt\">&lt;max_ast_depth&gt;</span>50<span class=\"nt\">&lt;/max_ast_depth&gt;</span>\n        <span class=\"nt\">&lt;max_ast_elements&gt;</span>100<span class=\"nt\">&lt;/max_ast_elements&gt;</span>\n\n        <span class=\"nt\">&lt;readonly&gt;</span>1<span class=\"nt\">&lt;/readonly&gt;</span>\n    <span class=\"nt\">&lt;/web&gt;</span>\n<span class=\"nt\">&lt;/profiles&gt;</span>\n</code></pre></div>\n\n\n<p>The example specifies two profiles: <code>default</code> and <code>web</code>. The <code>default</code> profile has a special purpose: it must always be present and is applied when starting the server. In other words, the <code>default</code> profile contains default settings. The <code>web</code> profile is a regular profile that can be set using the <code>SET</code> query or using a URL parameter in an HTTP query.</p>\n<p>Settings profiles can inherit from each other. To use inheritance, indicate the <code>profile</code> setting before the other settings that are listed in the profile.</p>\n<p><a name=\"../../settings/constraints_on_settings/\"></a><a name=\"../../../../settings/constraints_on_settings/\"></a><a name=\"operations/settings/constraints_on_settings/\"></a><a name=\"constraints_on_settings/\"></a><a name=\"../../../settings/constraints_on_settings/\"></a><a name=\"../operations/settings/constraints_on_settings/\"></a><a name=\"settings/constraints_on_settings/\"></a><a name=\"../settings/constraints_on_settings/\"></a><a name=\"../../../../../settings/constraints_on_settings/\"></a><a name=\"../../../operations/settings/constraints_on_settings/\"></a><a name=\"../../operations/settings/constraints_on_settings/\"></a><a name=\"../../../../../../settings/constraints_on_settings/\"></a><a name=\"../../../../operations/settings/constraints_on_settings/\"></a><a name=\"../../../../../operations/settings/constraints_on_settings/\"></a></p>\n<h2 id=\"constraints-on-settings\">Constraints on Settings<a class=\"headerlink\" href=\"#constraints-on-settings\" title=\"Permanent link\">&para;</a></h2>\n<p>The constraints on settings can be defined in the <code>users</code> section of the <code>user.xml</code> configuration file and prohibit users from changing some of the settings with the <code>SET</code> query.<br />\nThe constraints are defined as following:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;profiles&gt;</span>\n  <span class=\"nt\">&lt;user_name&gt;</span>\n    <span class=\"nt\">&lt;constraints&gt;</span>\n      <span class=\"nt\">&lt;setting_name_1&gt;</span>\n        <span class=\"nt\">&lt;min&gt;</span>lower_boundary<span class=\"nt\">&lt;/min&gt;</span>\n      <span class=\"nt\">&lt;/setting_name_1&gt;</span>\n      <span class=\"nt\">&lt;setting_name_2&gt;</span>\n        <span class=\"nt\">&lt;max&gt;</span>upper_boundary<span class=\"nt\">&lt;/max&gt;</span>\n      <span class=\"nt\">&lt;/setting_name_2&gt;</span>\n      <span class=\"nt\">&lt;setting_name_3&gt;</span>\n        <span class=\"nt\">&lt;min&gt;</span>lower_boundary<span class=\"nt\">&lt;/min&gt;</span>\n        <span class=\"nt\">&lt;max&gt;</span>upper_boundary<span class=\"nt\">&lt;/max&gt;</span>\n      <span class=\"nt\">&lt;/setting_name_3&gt;</span>\n      <span class=\"nt\">&lt;setting_name_4&gt;</span>\n        <span class=\"nt\">&lt;readonly/&gt;</span>\n      <span class=\"nt\">&lt;/setting_name_4&gt;</span>\n    <span class=\"nt\">&lt;/constraints&gt;</span>\n  <span class=\"nt\">&lt;/user_name&gt;</span>\n<span class=\"nt\">&lt;/profiles&gt;</span>\n</code></pre></div>\n\n\n<p>If user tries to violate the constraints an exception is thrown and the setting isn't actually changed.<br />\nThere are supported three types of constraints: <code>min</code>, <code>max</code>, <code>readonly</code>. The <code>min</code> and <code>max</code> constraints specify upper and lower boundaries for a numeric setting and can be used in combination. The <code>readonly</code> constraint specify that the user cannot change the corresponding setting at all.</p>\n<p><strong>Example:</strong> Let <code>users.xml</code> includes lines:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;profiles&gt;</span>\n  <span class=\"nt\">&lt;default&gt;</span>\n    <span class=\"nt\">&lt;max_memory_usage&gt;</span>10000000000<span class=\"nt\">&lt;/max_memory_usage&gt;</span>\n    <span class=\"nt\">&lt;force_index_by_date&gt;</span>0<span class=\"nt\">&lt;/force_index_by_date&gt;</span>\n    ...\n    <span class=\"nt\">&lt;constraints&gt;</span>\n      <span class=\"nt\">&lt;max_memory_usage&gt;</span>\n        <span class=\"nt\">&lt;min&gt;</span>5000000000<span class=\"nt\">&lt;/min&gt;</span>\n        <span class=\"nt\">&lt;max&gt;</span>20000000000<span class=\"nt\">&lt;/max&gt;</span>\n      <span class=\"nt\">&lt;/max_memory_usage&gt;</span>\n      <span class=\"nt\">&lt;force_index_by_date&gt;</span>\n        <span class=\"nt\">&lt;readonly/&gt;</span>\n      <span class=\"nt\">&lt;/force_index_by_date&gt;</span>\n    <span class=\"nt\">&lt;/constraints&gt;</span>\n  <span class=\"nt\">&lt;/default&gt;</span>\n<span class=\"nt\">&lt;/profiles&gt;</span>\n</code></pre></div>\n\n\n<p>The following queries all throw exceptions:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SET</span> <span class=\"n\">max_memory_usage</span><span class=\"o\">=</span><span class=\"mi\">20000000001</span><span class=\"p\">;</span>\n<span class=\"k\">SET</span> <span class=\"n\">max_memory_usage</span><span class=\"o\">=</span><span class=\"mi\">4999999999</span><span class=\"p\">;</span>\n<span class=\"k\">SET</span> <span class=\"n\">force_index_by_date</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Code: 452, e.displayText() = DB::Exception: Setting max_memory_usage should not be greater than 20000000000.\nCode: 452, e.displayText() = DB::Exception: Setting max_memory_usage should not be less than 5000000000.\nCode: 452, e.displayText() = DB::Exception: Setting force_index_by_date should not be changed.\n</code></pre></div>\n\n\n<p><strong>Note:</strong> the <code>default</code> profile has a special handling: all the constraints defined for the <code>default</code> profile become the default constraints, so they restrict all the users until they're overriden explicitly for these users.</p>\n<p><a name=\"settings_users/\"></a><a name=\"../../operations/settings/settings_users/\"></a><a name=\"../../../settings/settings_users/\"></a><a name=\"../../../../../settings/settings_users/\"></a><a name=\"../../../../settings/settings_users/\"></a><a name=\"../settings/settings_users/\"></a><a name=\"../../../../../../settings/settings_users/\"></a><a name=\"../../../../../operations/settings/settings_users/\"></a><a name=\"settings/settings_users/\"></a><a name=\"../../settings/settings_users/\"></a><a name=\"../../../operations/settings/settings_users/\"></a><a name=\"../../../../operations/settings/settings_users/\"></a><a name=\"operations/settings/settings_users/\"></a><a name=\"../operations/settings/settings_users/\"></a></p>\n<h2 id=\"user-settings\">User settings<a class=\"headerlink\" href=\"#user-settings\" title=\"Permanent link\">&para;</a></h2>\n<p>The <code>users</code> section of the <code>user.xml</code> configuration file contains user settings.</p>\n<p>Structure of the <code>users</code> section:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;users&gt;</span>\n    <span class=\"c\">&lt;!-- If user name was not specified, &#39;default&#39; user is used. --&gt;</span>\n    <span class=\"nt\">&lt;user_name&gt;</span>\n        <span class=\"nt\">&lt;password&gt;&lt;/password&gt;</span>\n        <span class=\"c\">&lt;!-- Or --&gt;</span>\n        <span class=\"nt\">&lt;password_sha256");
            
            document.write("_hex&gt;&lt;/password_sha256_hex&gt;</span>\n\n        <span class=\"nt\">&lt;networks</span> <span class=\"na\">incl=</span><span class=\"s\">&quot;networks&quot;</span> <span class=\"na\">replace=</span><span class=\"s\">&quot;replace&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;/networks&gt;</span>\n\n        <span class=\"nt\">&lt;profile&gt;</span>profile_name<span class=\"nt\">&lt;/profile&gt;</span>\n\n        <span class=\"nt\">&lt;quota&gt;</span>default<span class=\"nt\">&lt;/quota&gt;</span>\n\n        <span class=\"nt\">&lt;databases&gt;</span>\n            <span class=\"nt\">&lt;database_name&gt;</span>\n                <span class=\"nt\">&lt;table_name&gt;</span>\n                    <span class=\"nt\">&lt;filter&gt;</span>expression<span class=\"nt\">&lt;/filter&gt;</span>\n                <span class=\"nt\">&lt;table_name&gt;</span>\n            <span class=\"nt\">&lt;/database_name&gt;</span>\n        <span class=\"nt\">&lt;/databases&gt;</span>\n    <span class=\"nt\">&lt;/user_name&gt;</span>\n    <span class=\"c\">&lt;!-- Other users settings --&gt;</span>\n<span class=\"nt\">&lt;/users&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"user-name-password\">user_name/password<a class=\"headerlink\" href=\"#user-name-password\" title=\"Permanent link\">&para;</a></h4>\n<p>Password could be specified in plaintext or in SHA256 (hex format).</p>\n<ul>\n<li>\n<p>To assign a password in plaintext (<strong>not recommended</strong>), place it in a <code>password</code> element.</p>\n<p>For example, <code>&lt;password&gt;qwerty&lt;/password&gt;</code>. The password can be left blank.</p>\n</li>\n<li>\n<p>To assign a password using its SHA256 hash, place it in a <code>password_sha256_hex</code> element.</p>\n<p>For example, <code>&lt;password_sha256_hex&gt;65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5&lt;/password_sha256_hex&gt;</code>.</p>\n<p>Example of how to generate a password from shell:</p>\n<p><code>PASSWORD=$(base64 &lt; /dev/urandom | head -c8); echo \"$PASSWORD\"; echo -n \"$PASSWORD\" | sha256sum | tr -d '-'</code></p>\n<p>The first line of the result is the password. The second line is the corresponding SHA256 hash.</p>\n</li>\n</ul>\n<h4 id=\"user-name-networks\">user_name/networks<a class=\"headerlink\" href=\"#user-name-networks\" title=\"Permanent link\">&para;</a></h4>\n<p>List of networks from which the user can connect to the ClickHouse server.</p>\n<p>Each element of the list can have one of the following forms:</p>\n<ul>\n<li>\n<p><code>&lt;ip&gt;</code> \u2014 IP address or network mask.</p>\n<p>Examples: <code>213.180.204.3</code>, <code>10.0.0.1/8</code>, <code>10.0.0.1/255.255.255.0</code>, <code>2a02:6b8::3</code>, <code>2a02:6b8::3/64</code>, <code>2a02:6b8::3/ffff:ffff:ffff:ffff::</code>.</p>\n</li>\n<li>\n<p><code>&lt;host&gt;</code> \u2014 Hostname.</p>\n<p>Example: <code>server01.yandex.ru</code>.</p>\n<p>To check access, a DNS query is performed, and all returned IP addresses are compared to the peer address.</p>\n</li>\n<li>\n<p><code>&lt;host_regexp&gt;</code> \u2014 Regular expression for hostnames.</p>\n<p>Example, <code>^server\\d\\d-\\d\\d-\\d\\.yandex\\.ru$</code></p>\n<p>To check access, a <a href=\"https://en.wikipedia.org/wiki/Reverse_DNS_lookup\" rel=\"external nofollow noreferrer\">DNS PTR query</a> is performed for the peer address and then the specified regexp is applied. Then, another DNS query is performed for the results of the PTR query and all the received addresses are compared to the peer address. We strongly recommend that regexp ends with $.</p>\n</li>\n</ul>\n<p>All results of DNS requests are cached until the server restarts.</p>\n<p><strong>Examples</strong></p>\n<p>To open access for user from any network, specify:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;ip&gt;</span>::/0<span class=\"nt\">&lt;/ip&gt;</span>\n</code></pre></div>\n\n\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>It's insecure to open access from any network unless you have a firewall properly configured or the server is not directly connected to Internet.</p>\n</div>\n<p>To open access only from localhost, specify:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;ip&gt;</span>::1<span class=\"nt\">&lt;/ip&gt;</span>\n<span class=\"nt\">&lt;ip&gt;</span>127.0.0.1<span class=\"nt\">&lt;/ip&gt;</span>\n</code></pre></div>\n\n\n<h4 id=\"user-name-profile\">user_name/profile<a class=\"headerlink\" href=\"#user-name-profile\" title=\"Permanent link\">&para;</a></h4>\n<p>You can assign a settings profile for the user. Settings profiles are configured in a separate section of the <code>users.xml</code> file. For more information, see <a href=\"#settings_profiles/\">Profiles of Settings</a>.</p>\n<h4 id=\"user-name-quota\">user_name/quota<a class=\"headerlink\" href=\"#user-name-quota\" title=\"Permanent link\">&para;</a></h4>\n<p>Quotas allow you to track or limit resource usage over a period of time. Quotas are configured in the <code>quotas</code><br />\nsection of the <code>users.xml</code> configuration file.</p>\n<p>You can assign a quotas set for the user. For a detailed description of quotas configuration, see <a href=\"#quotas\">Quotas</a>.</p>\n<h4 id=\"user-name-databases\">user_name/databases<a class=\"headerlink\" href=\"#user-name-databases\" title=\"Permanent link\">&para;</a></h4>\n<p>In this section, you can you can limit rows that are returned by ClickHouse for <code>SELECT</code> queries made by the current user, thus implementing basic row-level security.</p>\n<p><strong>Example</strong></p>\n<p>The following configuration forces that user <code>user1</code> can only see the rows of <code>table1</code> as the result of <code>SELECT</code> queries, where the value of the <code>id</code> field is 1000.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;user1&gt;</span>\n    <span class=\"nt\">&lt;databases&gt;</span>\n        <span class=\"nt\">&lt;database_name&gt;</span>\n            <span class=\"nt\">&lt;table1&gt;</span>\n                <span class=\"nt\">&lt;filter&gt;</span>id = 1000<span class=\"nt\">&lt;/filter&gt;</span>\n            <span class=\"nt\">&lt;/table1&gt;</span>\n        <span class=\"nt\">&lt;/database_name&gt;</span>\n    <span class=\"nt\">&lt;/databases&gt;</span>\n<span class=\"nt\">&lt;/user1&gt;</span>\n</code></pre></div>\n\n\n<p>The <code>filter</code> can be any expression resulting in a <a href=\"#../../data_types/int_uint/\">UInt8</a>-type value. It usually contains comparisons and logical operators. Rows from <code>database_name.table1</code> where filter results to 0 are not returned for this user. The filtering is incompatible with <code>PREWHERE</code> operations and disables <code>WHERE\u2192PREWHERE</code> optimization.</p>\n<p><a name=\"utils/\"></a><a name=\"../../operations/utils/\"></a><a name=\"../operations/utils/\"></a><a name=\"../../../../operations/utils/\"></a><a name=\"../../../../../operations/utils/\"></a><a name=\"../../../operations/utils/\"></a><a name=\"operations/utils/\"></a></p>\n<h2 id=\"clickhouse-utility\">ClickHouse Utility<a class=\"headerlink\" href=\"#clickhouse-utility\" title=\"Permanent link\">&para;</a></h2>\n<ul>\n<li><a href=\"#clickhouse-local/\">clickhouse-local</a> \u2014 Allows running SQL queries on data without stopping the ClickHouse server, similar to how <code>awk</code> does this.</li>\n<li><a href=\"#clickhouse-copier/\">clickhouse-copier</a> \u2014 Copies (and reshards) data from one cluster to another cluster.</li>\n</ul>\n<p><a name=\"../../utils/clickhouse-copier/\"></a><a name=\"utils/clickhouse-copier/\"></a><a name=\"../../../operations/utils/clickhouse-copier/\"></a><a name=\"../../../../../operations/utils/clickhouse-copier/\"></a><a name=\"../../../utils/clickhouse-copier/\"></a><a name=\"../../operations/utils/clickhouse-copier/\"></a><a name=\"operations/utils/clickhouse-copier/\"></a><a name=\"../../../../../utils/clickhouse-copier/\"></a><a name=\"../../../../../../utils/clickhouse-copier/\"></a><a name=\"../../../../operations/utils/clickhouse-copier/\"></a><a name=\"../../../../utils/clickhouse-copier/\"></a><a name=\"../operations/utils/clickhouse-copier/\"></a><a name=\"../utils/clickhouse-copier/\"></a><a name=\"clickhouse-copier/\"></a></p>\n<h2 id=\"clickhouse-copier_1\">clickhouse-copier<a class=\"headerlink\" href=\"#clickhouse-copier_1\" title=\"Permanent link\">&para;</a></h2>\n<p>Copies data from the tables in one cluster to tables in another (or the same) cluster.</p>\n<p>You can run multiple <code>clickhouse-copier</code> instances on different servers to perform the same job. ZooKeeper is used for syncing the processes.</p>\n<p>After starting, <code>clickhouse-copier</code>:</p>\n<ul>\n<li>\n<p>Connects to ZooKeeper and receives:</p>\n<ul>\n<li>Copying jobs.</li>\n<li>The state of the copying jobs.</li>\n</ul>\n</li>\n<li>\n<p>It performs the jobs.</p>\n<p>Each running process chooses the \"closest\" shard of the source cluster and copies the data into the destination cluster, resharding the data if necessary.</p>\n</li>\n</ul>\n<p><code>clickhouse-copier</code> tracks the changes in ZooKeeper and applies them on the fly.</p>\n<p>To reduce network traffic, we recommend running <code>clickhouse-copier</code> on the same server where the source data is located.</p>\n<h3 id=\"running-clickhouse-copier\">Running clickhouse-copier<a class=\"headerlink\" href=\"#running-clickhouse-copier\" title=\"Permanent link\">&para;</a></h3>\n<p>The utility should be run manually:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-copier copier --daemon --config zookeeper.xml --task-path /task/path --base-dir /path/to/dir\n</code></pre></div>\n\n\n<p>Parameters:</p>\n<ul>\n<li><code>daemon</code> \u2014 Starts <code>clickhouse-copier</code> in daemon mode.</li>\n<li><code>config</code> \u2014 The path to the <code>zookeeper.xml</code> file with the parameters for the connection to ZooKeeper.</li>\n<li><code>task-path</code> \u2014 The path to the ZooKeeper node. This node is used for syncing <code>clickhouse-copier</code> processes and storing tasks. Tasks are stored in <code>$task-path/description</code>.</li>\n<li><code>task-file</code> \u2014 Optional path to file with task configuration for initial upload to ZooKeeper.</li>\n<li><code>task-upload-force</code> \u2014 Force upload <code>task-file</code> even if node already exists.</li>\n<li><code>base-dir</code> \u2014 The path to logs and auxiliary files. When it starts,");
            
            document.write(" <code>clickhouse-copier</code> creates <code>clickhouse-copier_YYYYMMHHSS_&lt;PID&gt;</code> subdirectories in <code>$base-dir</code>. If this parameter is omitted, the directories are created in the directory where <code>clickhouse-copier</code> was launched.</li>\n</ul>\n<h3 id=\"format-of-zookeeper-xml\">Format of zookeeper.xml<a class=\"headerlink\" href=\"#format-of-zookeeper-xml\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"nt\">&lt;logger&gt;</span>\n        <span class=\"nt\">&lt;level&gt;</span>trace<span class=\"nt\">&lt;/level&gt;</span>\n        <span class=\"nt\">&lt;size&gt;</span>100M<span class=\"nt\">&lt;/size&gt;</span>\n        <span class=\"nt\">&lt;count&gt;</span>3<span class=\"nt\">&lt;/count&gt;</span>\n    <span class=\"nt\">&lt;/logger&gt;</span>\n\n    <span class=\"nt\">&lt;zookeeper&gt;</span>\n        <span class=\"nt\">&lt;node</span> <span class=\"na\">index=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;host&gt;</span>127.0.0.1<span class=\"nt\">&lt;/host&gt;</span>\n            <span class=\"nt\">&lt;port&gt;</span>2181<span class=\"nt\">&lt;/port&gt;</span>\n        <span class=\"nt\">&lt;/node&gt;</span>\n    <span class=\"nt\">&lt;/zookeeper&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<h3 id=\"configuration-of-copying-tasks\">Configuration of copying tasks<a class=\"headerlink\" href=\"#configuration-of-copying-tasks\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;yandex&gt;</span>\n    <span class=\"c\">&lt;!-- Configuration of clusters as in an ordinary server config --&gt;</span>\n    <span class=\"nt\">&lt;remote_servers&gt;</span>\n        <span class=\"nt\">&lt;source_cluster&gt;</span>\n            <span class=\"nt\">&lt;shard&gt;</span>\n                <span class=\"nt\">&lt;internal_replication&gt;</span>false<span class=\"nt\">&lt;/internal_replication&gt;</span>\n                    <span class=\"nt\">&lt;replica&gt;</span>\n                        <span class=\"nt\">&lt;host&gt;</span>127.0.0.1<span class=\"nt\">&lt;/host&gt;</span>\n                        <span class=\"nt\">&lt;port&gt;</span>9000<span class=\"nt\">&lt;/port&gt;</span>\n                    <span class=\"nt\">&lt;/replica&gt;</span>\n            <span class=\"nt\">&lt;/shard&gt;</span>\n            ...\n        <span class=\"nt\">&lt;/source_cluster&gt;</span>\n\n        <span class=\"nt\">&lt;destination_cluster&gt;</span>\n        ...\n        <span class=\"nt\">&lt;/destination_cluster&gt;</span>\n    <span class=\"nt\">&lt;/remote_servers&gt;</span>\n\n    <span class=\"c\">&lt;!-- How many simultaneously active workers are possible. If you run more workers superfluous workers will sleep. --&gt;</span>\n    <span class=\"nt\">&lt;max_workers&gt;</span>2<span class=\"nt\">&lt;/max_workers&gt;</span>\n\n    <span class=\"c\">&lt;!-- Setting used to fetch (pull) data from source cluster tables --&gt;</span>\n    <span class=\"nt\">&lt;settings_pull&gt;</span>\n        <span class=\"nt\">&lt;readonly&gt;</span>1<span class=\"nt\">&lt;/readonly&gt;</span>\n    <span class=\"nt\">&lt;/settings_pull&gt;</span>\n\n    <span class=\"c\">&lt;!-- Setting used to insert (push) data to destination cluster tables --&gt;</span>\n    <span class=\"nt\">&lt;settings_push&gt;</span>\n        <span class=\"nt\">&lt;readonly&gt;</span>0<span class=\"nt\">&lt;/readonly&gt;</span>\n    <span class=\"nt\">&lt;/settings_push&gt;</span>\n\n    <span class=\"c\">&lt;!-- Common setting for fetch (pull) and insert (push) operations. Also, copier process context uses it.</span>\n<span class=\"c\">         They are overlaid by &lt;settings_pull/&gt; and &lt;settings_push/&gt; respectively. --&gt;</span>\n    <span class=\"nt\">&lt;settings&gt;</span>\n        <span class=\"nt\">&lt;connect_timeout&gt;</span>3<span class=\"nt\">&lt;/connect_timeout&gt;</span>\n        <span class=\"c\">&lt;!-- Sync insert is set forcibly, leave it here just in case. --&gt;</span>\n        <span class=\"nt\">&lt;insert_distributed_sync&gt;</span>1<span class=\"nt\">&lt;/insert_distributed_sync&gt;</span>\n    <span class=\"nt\">&lt;/settings&gt;</span>\n\n    <span class=\"c\">&lt;!-- Copying tasks description.</span>\n<span class=\"c\">         You could specify several table task in the same task description (in the same ZooKeeper node), they will be performed</span>\n<span class=\"c\">         sequentially.</span>\n<span class=\"c\">    --&gt;</span>\n    <span class=\"nt\">&lt;tables&gt;</span>\n        <span class=\"c\">&lt;!-- A table task, copies one table. --&gt;</span>\n        <span class=\"nt\">&lt;table_hits&gt;</span>\n            <span class=\"c\">&lt;!-- Source cluster name (from &lt;remote_servers/&gt; section) and tables in it that should be copied --&gt;</span>\n            <span class=\"nt\">&lt;cluster_pull&gt;</span>source_cluster<span class=\"nt\">&lt;/cluster_pull&gt;</span>\n            <span class=\"nt\">&lt;database_pull&gt;</span>test<span class=\"nt\">&lt;/database_pull&gt;</span>\n            <span class=\"nt\">&lt;table_pull&gt;</span>hits<span class=\"nt\">&lt;/table_pull&gt;</span>\n\n            <span class=\"c\">&lt;!-- Destination cluster name and tables in which the data should be inserted --&gt;</span>\n            <span class=\"nt\">&lt;cluster_push&gt;</span>destination_cluster<span class=\"nt\">&lt;/cluster_push&gt;</span>\n            <span class=\"nt\">&lt;database_push&gt;</span>test<span class=\"nt\">&lt;/database_push&gt;</span>\n            <span class=\"nt\">&lt;table_push&gt;</span>hits2<span class=\"nt\">&lt;/table_push&gt;</span>\n\n            <span class=\"c\">&lt;!-- Engine of destination tables.</span>\n<span class=\"c\">                 If destination tables have not be created, workers create them using columns definition from source tables and engine</span>\n<span class=\"c\">                 definition from here.</span>\n\n<span class=\"c\">                 NOTE: If the first worker starts insert data and detects that destination partition is not empty then the partition will</span>\n<span class=\"c\">                 be dropped and refilled, take it into account if you already have some data in destination tables. You could directly</span>\n<span class=\"c\">                 specify partitions that should be copied in &lt;enabled_partitions/&gt;, they should be in quoted format like partition column of</span>\n<span class=\"c\">                 system.parts table.</span>\n<span class=\"c\">            --&gt;</span>\n            <span class=\"nt\">&lt;engine&gt;</span>\n            ENGINE=ReplicatedMergeTree(&#39;/clickhouse/tables/{cluster}/{shard}/hits2&#39;, &#39;{replica}&#39;)\n            PARTITION BY toMonday(date)\n            ORDER BY (CounterID, EventDate)\n            <span class=\"nt\">&lt;/engine&gt;</span>\n\n            <span class=\"c\">&lt;!-- Sharding key used to insert data to destination cluster --&gt;</span>\n            <span class=\"nt\">&lt;sharding_key&gt;</span>jumpConsistentHash(intHash64(UserID), 2)<span class=\"nt\">&lt;/sharding_key&gt;</span>\n\n            <span class=\"c\">&lt;!-- Optional expression that filter data while pull them from source servers --&gt;</span>\n            <span class=\"nt\">&lt;where_condition&gt;</span>CounterID != 0<span class=\"nt\">&lt;/where_condition&gt;</span>\n\n            <span class=\"c\">&lt;!-- This section specifies partitions that should be copied, other partition will be ignored.</span>\n<span class=\"c\">                 Partition names should have the same format as</span>\n<span class=\"c\">                 partition column of system.parts table (i.e. a quoted text).</span>\n<span class=\"c\">                 Since partition key of source and destination cluster could be different,</span>\n<span class=\"c\">                 these partition names specify destination partitions.</span>\n\n<span class=\"c\">                 NOTE: In spite of this section is optional (if it is not specified, all partitions will be copied),</span>\n<span class=\"c\">                 it is strictly recommended to specify them explicitly.</span>\n<span class=\"c\">                 If you already have some ready paritions on destination cluster they</span>\n<span class=\"c\">                 will be removed at the start of the copying since they will be interpeted</span>\n<span class=\"c\">                 as unfinished data from the previous copying!!!</span>\n<span class=\"c\">            --&gt;</span>\n            <span class=\"nt\">&lt;enabled_partitions&gt;</span>\n                <span class=\"nt\">&lt;partition&gt;</span>&#39;2018-02-26&#39;<span class=\"nt\">&lt;/partition&gt;</span>\n                <span class=\"nt\">&lt;partition&gt;</span>&#39;2018-03-05&#39;<span class=\"nt\">&lt;/partition&gt;</span>\n                ...\n            <span class=\"nt\">&lt;/enabled_partitions&gt;</span>\n        <span class=\"nt\">&lt;/table_hits&gt;</span>\n\n        <span class=\"c\">&lt;!-- Next table to copy. It is not copied until previous table is copying. --&gt;</span>\n        <span class=\"nt\">&lt;/table_visits&gt;</span>\n        ...\n        <span class=\"nt\">&lt;/table_visits&gt;</span>\n        ...\n    <span class=\"nt\">&lt;/tables&gt;</span>\n<span class=\"nt\">&lt;/yandex&gt;</span>\n</code></pre></div>\n\n\n<p><code>clickhouse-copier</code> tracks the changes in <code>/task/path/description</code> and applies them on the fly. For instance, if you change the value of <code>max_workers</code>, the number of processes running tasks will also change.</p>\n<p><a name=\"../../../operations/utils/clickhouse-local/\"></a><a name=\"operations/utils/clickhouse-local/\"></a><a name=\"clickhouse-local/\"></a><a name=\"../operations/utils/clickhouse-local/\"></a><a name=\"../../../../utils/clickhouse-local/\"></a><a name=\"../../../../../utils/clickhouse-local/\"></a><a name=\"../../../../operations/utils/clickhouse-local/\"></a><a name=\"../../../utils/clickhouse-local/\"></a><a name=\"../../operations/utils/clickhouse-local/\"></a><a name=\"utils/clickhouse-local/\"></a><a name=\"../../../../../operations/utils/clickhouse-local/\"></a><a name=\"../../utils/clickhouse-local/\"></a><a name=\"../../../../../../utils/clickhouse-local/\"></a><a name=\"../utils/clickhouse-local/\"></a></p>\n<h2 id=\"clickhouse-local\">clickhouse-local<a class=\"headerlink\" href=\"#clickhouse-local\" title=\"Permanent link\">&p");
            
            document.write("ara;</a></h2>\n<p>The <code>clickhouse-local</code> program enables you to perform fast processing on local files, without having to deploy and configure the ClickHouse server.</p>\n<p>Accepts data that represent tables and queries them using <a href=\"#../../query_language/\">ClickHouse SQL dialect</a>.</p>\n<p><code>clickhouse-local</code> uses the same core as ClickHouse server, so it supports most of the features and the same set of formats and table engines.</p>\n<p>By default <code>clickhouse-local</code> does not have access to data on the same host, but it supports loading server configuration using <code>--config-file</code> argument.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>It is not recommended to load production server configuration into <code>clickhouse-local</code> because data can be damaged in case of human error.</p>\n</div>\n<h3 id=\"usage_2\">Usage<a class=\"headerlink\" href=\"#usage_2\" title=\"Permanent link\">&para;</a></h3>\n<p>Basic usage:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-local --structure <span class=\"s2\">&quot;table_structure&quot;</span> --input-format <span class=\"s2\">&quot;format_of_incoming_data&quot;</span> -q <span class=\"s2\">&quot;query&quot;</span>\n</code></pre></div>\n\n\n<p>Arguments:</p>\n<ul>\n<li><code>-S</code>, <code>--structure</code> \u2014 table structure for input data.</li>\n<li><code>-if</code>, <code>--input-format</code> \u2014 input format, <code>TSV</code> by default.</li>\n<li><code>-f</code>, <code>--file</code> \u2014 path to data, <code>stdin</code> by default.</li>\n<li><code>-q</code> <code>--query</code> \u2014 queries to execute with <code>;</code> as delimeter.</li>\n<li><code>-N</code>, <code>--table</code> \u2014 table name where to put output data, <code>table</code> by default.</li>\n<li><code>-of</code>, <code>--format</code>, <code>--output-format</code> \u2014 output format, <code>TSV</code> by default.</li>\n<li><code>--stacktrace</code> \u2014 whether to dump debug output in case of exception.</li>\n<li><code>--verbose</code> \u2014 more details on query execution.</li>\n<li><code>-s</code> \u2014 disables <code>stderr</code> logging.</li>\n<li><code>--config-file</code> \u2014 path to configuration file in same format as for ClickHouse server, by default the configuration empty.</li>\n<li><code>--help</code> \u2014 arguments references for <code>clickhouse-local</code>.</li>\n</ul>\n<p>Also there are arguments for each ClickHouse configuration variable which are more commonly used instead of <code>--config-file</code>.</p>\n<h3 id=\"examples_1\">Examples<a class=\"headerlink\" href=\"#examples_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> -e <span class=\"s2\">&quot;1,2\\n3,4&quot;</span> <span class=\"p\">|</span> clickhouse-local -S <span class=\"s2\">&quot;a Int64, b Int64&quot;</span> -if <span class=\"s2\">&quot;CSV&quot;</span> -q <span class=\"s2\">&quot;SELECT * FROM table&quot;</span>\nRead <span class=\"m\">2</span> rows, <span class=\"m\">32</span>.00 B in <span class=\"m\">0</span>.000 sec., <span class=\"m\">5182</span> rows/sec., <span class=\"m\">80</span>.97 KiB/sec.\n<span class=\"m\">1</span>   <span class=\"m\">2</span>\n<span class=\"m\">3</span>   <span class=\"m\">4</span>\n</code></pre></div>\n\n\n<p>Previous example is the same as:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">echo</span> -e <span class=\"s2\">&quot;1,2\\n3,4&quot;</span> <span class=\"p\">|</span> clickhouse-local -q <span class=\"s2\">&quot;CREATE TABLE table (a Int64, b Int64) ENGINE = File(CSV, stdin); SELECT a, b FROM table; DROP TABLE table&quot;</span>\nRead <span class=\"m\">2</span> rows, <span class=\"m\">32</span>.00 B in <span class=\"m\">0</span>.000 sec., <span class=\"m\">4987</span> rows/sec., <span class=\"m\">77</span>.93 KiB/sec.\n<span class=\"m\">1</span>   <span class=\"m\">2</span>\n<span class=\"m\">3</span>   <span class=\"m\">4</span>\n</code></pre></div>\n\n\n<p>Now let's output memory user for each Unix user:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ ps aux <span class=\"p\">|</span> tail -n +2 <span class=\"p\">|</span> awk <span class=\"s1\">&#39;{ printf(&quot;%s\\t%s\\n&quot;, $1, $4) }&#39;</span> <span class=\"p\">|</span> clickhouse-local -S <span class=\"s2\">&quot;user String, mem Float64&quot;</span> -q <span class=\"s2\">&quot;SELECT user, round(sum(mem), 2) as memTotal FROM table GROUP BY user ORDER BY memTotal DESC FORMAT Pretty&quot;</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>Read 186 rows, 4.15 KiB in 0.035 sec., 5302 rows/sec., 118.34 KiB/sec.\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 user     \u2503 memTotal \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 bayonet  \u2502    113.5 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 root     \u2502      8.8 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n...\n</code></pre></div>\n\n\n<p><a name=\"../../../../faq/general/\"></a><a name=\"../../../../../faq/general/\"></a><a name=\"general/\"></a><a name=\"../../../faq/general/\"></a><a name=\"../../faq/general/\"></a><a name=\"faq/general/\"></a><a name=\"../faq/general/\"></a></p>\n<h2 id=\"general-questions\">General Questions<a class=\"headerlink\" href=\"#general-questions\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"why-not-use-something-like-mapreduce\">Why Not Use Something Like MapReduce?<a class=\"headerlink\" href=\"#why-not-use-something-like-mapreduce\" title=\"Permanent link\">&para;</a></h3>\n<p>We can refer to systems like MapReduce as distributed computing systems in which the reduce operation is based on distributed sorting. The most common open source solution in this class is <a href=\"http://hadoop.apache.org\" rel=\"external nofollow noreferrer\">Apache Hadoop</a>. Yandex uses their in-house solution, YT.</p>\n<p>These systems aren't appropriate for online queries due to their high latency. In other words, they can't be used as the back-end for a web interface.<br />\nThese types of systems aren't useful for real-time data updates.<br />\nDistributed sorting isn't the best way to perform reduce operations if the result of the operation and all the intermediate results (if there are any) are located in the RAM of a single server, which is usually the case for online queries. In such a case, a hash table is the optimal way to perform reduce operations. A common approach to optimizing map-reduce tasks is pre-aggregation (partial reduce) using a hash table in RAM. The user performs this optimization manually.<br />\nDistributed sorting is one of the main causes of reduced performance when running simple map-reduce tasks.</p>\n<p>Most MapReduce implementations allow you to execute arbitrary code on a cluster. But a declarative query language is better suited to OLAP in order to run experiments quickly. For example, Hadoop has Hive and Pig. Also consider Cloudera Impala or Shark (outdated) for Spark, as well as Spark SQL, Presto, and Apache Drill. Performance when running such tasks is highly sub-optimal compared to specialized systems, but relatively high latency makes it unrealistic to use these systems as the backend for a web interface.</p>\n<h3 id=\"oracle-odbc-encodings\">What If I Have a Problem with Encodings When Using Oracle Through ODBC?<a class=\"headerlink\" href=\"#oracle-odbc-encodings\" title=\"Permanent link\">&para;</a></h3>\n<p>If you use Oracle through the ODBC driver as a source of external dictionaries, you need to set the correct value for the <code>NLS_LANG</code> environment variable in <code>/etc/default/clickhouse</code>. For more information, see the <a href=\"https://www.oracle.com/technetwork/products/globalization/nls-lang-099431.html\" rel=\"external nofollow noreferrer\">Oracle NLS_LANG FAQ</a>.</p>\n<p><strong>Example</strong></p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">NLS_LANG</span><span class=\"o\">=</span><span class=\"n\">RUSSIAN_RUSSIA</span><span class=\"p\">.</span><span class=\"n\">UTF8</span>\n</code></pre></div>\n\n\n<p><a name=\"../../../development/\"></a><a name=\"../../development/\"></a><a name=\"../development/\"></a><a name=\"../../../../../development/\"></a><a name=\"../../../../development/\"></a><a name=\"development/\"></a></p>\n<h2 id=\"clickhouse-development\">ClickHouse Development<a class=\"headerlink\" href=\"#clickhouse-development\" title=\"Permanent link\">&para;</a></h2>\n<p><a name=\"../../../../../development/architecture/\"></a><a name=\"development/architecture/\"></a><a name=\"../development/architecture/\"></a><a name=\"architecture/\"></a><a name=\"../../development/architecture/\"></a><a name=\"../../../development/architecture/\"></a><a name=\"../../../../development/architecture/\"></a></p>\n<h2 id=\"overview-of-clickhouse-architecture\">Overview of ClickHouse Architecture<a class=\"headerlink\" href=\"#overview-of-clickhouse-architecture\" title=\"Permanent link\">&para;</a></h2>\n<p>ClickHouse is a true column-oriented DBMS. Data is stored by columns, and during the execution of arrays (vectors or chunks of columns). Whenever possible, operations are dispatched on arrays, rather than on individual values. This is called \"vectorized query execution,\" and it helps lower the cost of actual data processing.</p>\n<blockquote>\n<p>This idea is nothing new. It dates back to the <code>APL</code> programming language and its descendants: <code>A +</code>, <code>J</code>, <code>K</code>, and <code>Q</code>. Array programming is used in scientific data processing. Neither is this idea something new in relational databases: for example, it is used in the <code>Vectorwise</code> system.</p>\n</blockquote>\n<p>There are two different approaches for speeding up the query processing: vectorized query execution and runtime code generation. In the latter, the code is generated for every kind of query on the fly, removing all indirection and dynamic dispatch. Neither of these approaches is strictly better than the other. Runtime code generation can be better when it fuses many operations together, thus fully utilizing CPU execution units and the pipeline. Vectorized query execution can be less practical, because it involves temporary vectors that must be written to the cache and read back. If the temporary data does not fit in the L2 cache, this becomes an issue. But vectorized query execution more easily utilizes the SIMD capabilities of the CPU. A <a href=\"http://15721.courses.cs.cmu.edu/spring2016/papers/p5-somp");
            
            document.write("olski.pdf\" rel=\"external nofollow noreferrer\">research paper</a> written by our friends shows that it is better to combine both approaches. ClickHouse uses vectorized query execution and has limited initial support for runtime code generation.</p>\n<h3 id=\"columns\">Columns<a class=\"headerlink\" href=\"#columns\" title=\"Permanent link\">&para;</a></h3>\n<p>To represent columns in memory (actually, chunks of columns), the <code>IColumn</code> interface is used. This interface provides helper methods for implementation of various relational operators. Almost all operations are immutable: they do not modify the original column, but create a new modified one. For example, the <code>IColumn :: filter</code> method accepts a filter byte mask. It is used for the <code>WHERE</code> and <code>HAVING</code> relational operators. Additional examples: the <code>IColumn :: permute</code> method to support <code>ORDER BY</code>, the <code>IColumn :: cut</code> method to support <code>LIMIT</code>, and so on.</p>\n<p>Various <code>IColumn</code> implementations (<code>ColumnUInt8</code>, <code>ColumnString</code> and so on) are responsible for the memory layout of columns. Memory layout is usually a contiguous array. For the integer type of columns it is just one contiguous array, like <code>std :: vector</code>. For <code>String</code> and <code>Array</code> columns, it is two vectors: one for all array elements, placed contiguously, and a second one for offsets to the beginning of each array. There is also <code>ColumnConst</code> that stores just one value in memory, but looks like a column.</p>\n<h3 id=\"field\">Field<a class=\"headerlink\" href=\"#field\" title=\"Permanent link\">&para;</a></h3>\n<p>Nevertheless, it is possible to work with individual values as well. To represent an individual value, the <code>Field</code> is used. <code>Field</code> is just a discriminated union of <code>UInt64</code>, <code>Int64</code>, <code>Float64</code>, <code>String</code> and <code>Array</code>. <code>IColumn</code> has the <code>operator[]</code> method to get the n-th value as a <code>Field</code>, and the <code>insert</code> method to append a <code>Field</code> to the end of a column. These methods are not very efficient, because they require dealing with temporary <code>Field</code> objects representing an individual value. There are more efficient methods, such as <code>insertFrom</code>, <code>insertRangeFrom</code>, and so on.</p>\n<p><code>Field</code> doesn't have enough information about a specific data type for a table. For example, <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>, and <code>UInt64</code> are all represented as <code>UInt64</code> in a <code>Field</code>.</p>\n<h3 id=\"leaky-abstractions\">Leaky Abstractions<a class=\"headerlink\" href=\"#leaky-abstractions\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IColumn</code> has methods for common relational transformations of data, but they don't meet all needs. For example, <code>ColumnUInt64</code> doesn't have a method to calculate the sum of two columns, and <code>ColumnString</code> doesn't have a method to run a substring search. These countless routines are implemented outside of <code>IColumn</code>.</p>\n<p>Various functions on columns can be implemented in a generic, non-efficient way using <code>IColumn</code> methods to extract <code>Field</code> values, or in a specialized way using knowledge of inner memory layout of data in a specific <code>IColumn</code> implementation. To do this, functions are cast to a specific <code>IColumn</code> type and deal with internal representation directly. For example, <code>ColumnUInt64</code> has the <code>getData</code> method that returns a reference to an internal array, then a separate routine reads or fills that array directly. In fact, we have \"leaky abstractions\" to allow efficient specializations of various routines.</p>\n<h3 id=\"data-types\">Data Types<a class=\"headerlink\" href=\"#data-types\" title=\"Permanent link\">&para;</a></h3>\n<p><code>IDataType</code> is responsible for serialization and deserialization: for reading and writing chunks of columns or individual values in binary or text form.<br />\n<code>IDataType</code> directly corresponds to data types in tables. For example, there are <code>DataTypeUInt32</code>, <code>DataTypeDateTime</code>, <code>DataTypeString</code> and so on.</p>\n<p><code>IDataType</code> and <code>IColumn</code> are only loosely related to each other. Different data types can be represented in memory by the same <code>IColumn</code> implementations. For example, <code>DataTypeUInt32</code> and <code>DataTypeDateTime</code> are both represented by <code>ColumnUInt32</code> or <code>ColumnConstUInt32</code>. In addition, the same data type can be represented by different <code>IColumn</code> implementations. For example, <code>DataTypeUInt8</code> can be represented by <code>ColumnUInt8</code> or <code>ColumnConstUInt8</code>.</p>\n<p><code>IDataType</code> only stores metadata. For instance, <code>DataTypeUInt8</code> doesn't store anything at all (except vptr) and <code>DataTypeFixedString</code> stores just <code>N</code> (the size of fixed-size strings).</p>\n<p><code>IDataType</code> has helper methods for various data formats. Examples are methods to serialize a value with possible quoting, to serialize a value for JSON, and to serialize a value as part of XML format. There is no direct correspondence to data formats. For example, the different data formats <code>Pretty</code> and <code>TabSeparated</code> can use the same <code>serializeTextEscaped</code> helper method from the <code>IDataType</code> interface.</p>\n<h3 id=\"block\">Block<a class=\"headerlink\" href=\"#block\" title=\"Permanent link\">&para;</a></h3>\n<p>A <code>Block</code> is a container that represents a subset (chunk) of a table in memory. It is just a set of triples: <code>(IColumn, IDataType, column name)</code>. During query execution, data is processed by <code>Block</code>s. If we have a <code>Block</code>, we have data (in the <code>IColumn</code> object), we have information about its type (in <code>IDataType</code>) that tells us how to deal with that column, and we have the column name (either the original column name from the table, or some artificial name assigned for getting temporary results of calculations).</p>\n<p>When we calculate some function over columns in a block, we add another column with its result to the block, and we don't touch columns for arguments of the function because operations are immutable. Later, unneeded columns can be removed from the block, but not modified. This is convenient for elimination of common subexpressions.</p>\n<p>Blocks are created for every processed chunk of data. Note that for the same type of calculation, the column names and types remain the same for different blocks, and only column data changes. It is better to split block data from the block header, because small block sizes will have a high overhead of temporary strings for copying shared_ptrs and column names.</p>\n<h3 id=\"block-streams\">Block Streams<a class=\"headerlink\" href=\"#block-streams\" title=\"Permanent link\">&para;</a></h3>\n<p>Block streams are for processing data. We use streams of blocks to read data from somewhere, perform data transformations, or write data to somewhere. <code>IBlockInputStream</code> has the <code>read</code> method to fetch the next block while available. <code>IBlockOutputStream</code> has the <code>write</code> method to push the block somewhere.</p>\n<p>Streams are responsible for:</p>\n<ol>\n<li>Reading or writing to a table. The table just returns a stream for reading or writing blocks.</li>\n<li>Implementing data formats. For example, if you want to output data to a terminal in <code>Pretty</code> format, you create a block output stream where you push blocks, and it formats them.</li>\n<li>Performing data transformations. Let's say you have <code>IBlockInputStream</code> and want to create a filtered stream. You create <code>FilterBlockInputStream</code> and initialize it with your stream. Then when you pull a block from <code>FilterBlockInputStream</code>, it pulls a block from your stream, filters it, and returns the filtered block to you. Query execution pipelines are represented this way.</li>\n</ol>\n<p>There are more sophisticated transformations. For example, when you pull from <code>AggregatingBlockInputStream</code>, it reads all data from its source, aggregates it, and then returns a stream of aggregated data for you. Another example: <code>UnionBlockInputStream</code> accepts many input sources in the constructor and also a number of threads. It launches multiple threads and reads from multiple sources in parallel.</p>\n<blockquote>\n<p>Block streams use the \"pull\" approach to control flow: when you pull a block from the first stream, it consequently pulls the required blocks from nested streams, and the entire execution pipeline will work. Neither \"pull\" nor \"push\" is the best solution, because control flow is implicit, and that limits implementation of various features like simultaneous execution of multiple queries (merging many pipelines together). This limitation could be overcome with coroutines or just running extra threads that wait for each other. We may have more possibilities if we make control flow explicit: if we locate the logic for passing data from one calculation unit to another outside of those calculation units. Read this <a href=\"http://journal.stuffwithstuff.com/2013/01/13/iteration-inside-and-out/\" rel=\"external nofollow noreferrer\">article</a> for more thoughts.</p>\n</blockquote>\n<p>We should note that the query execution pipeline creates temporary data at each step. We try to keep block size small enough so that temporary data fits in the CPU cache. With that assumption, writing and reading temporary data is almost free in comparison with other calculations. We could consider an alternative, which is to fuse many operations in the pipeline together, to make the pipeline as short as possible and remove much of the temporary data. This could be an advantage, but it also has drawbacks. For example, a split pipeline makes it easy to implement caching intermediate data, stealing intermed");
            
            document.write("iate data from similar queries running at the same time, and merging pipelines for similar queries.</p>\n<h3 id=\"formats_1\">Formats<a class=\"headerlink\" href=\"#formats_1\" title=\"Permanent link\">&para;</a></h3>\n<p>Data formats are implemented with block streams. There are \"presentational\" formats only suitable for output of data to the client, such as <code>Pretty</code> format, which provides only <code>IBlockOutputStream</code>. And there are input/output formats, such as <code>TabSeparated</code> or <code>JSONEachRow</code>.</p>\n<p>There are also row streams: <code>IRowInputStream</code> and <code>IRowOutputStream</code>. They allow you to pull/push data by individual rows, not by blocks. And they are only needed to simplify implementation of row-oriented formats. The wrappers <code>BlockInputStreamFromRowInputStream</code> and <code>BlockOutputStreamFromRowOutputStream</code> allow you to convert row-oriented streams to regular block-oriented streams.</p>\n<h3 id=\"i-o\">I/O<a class=\"headerlink\" href=\"#i-o\" title=\"Permanent link\">&para;</a></h3>\n<p>For byte-oriented input/output, there are <code>ReadBuffer</code> and <code>WriteBuffer</code> abstract classes. They are used instead of C++ <code>iostream</code>s. Don't worry: every mature C++ project is using something other than <code>iostream</code>s for good reasons.</p>\n<p><code>ReadBuffer</code> and <code>WriteBuffer</code> are just a contiguous buffer and a cursor pointing to the position in that buffer. Implementations may own or not own the memory for the buffer. There is a virtual method to fill the buffer with the following data (for <code>ReadBuffer</code>) or to flush the buffer somewhere (for <code>WriteBuffer</code>). The virtual methods are rarely called.</p>\n<p>Implementations of <code>ReadBuffer</code>/<code>WriteBuffer</code> are used for working with files and file descriptors and network sockets, for implementing compression (<code>CompressedWriteBuffer</code> is initialized with another WriteBuffer and performs compression before writing data to it), and for other purposes \u2013 the names <code>ConcatReadBuffer</code>, <code>LimitReadBuffer</code>, and <code>HashingWriteBuffer</code> speak for themselves.</p>\n<p>Read/WriteBuffers only deal with bytes. To help with formatted input/output (for instance, to write a number in decimal format), there are functions from <code>ReadHelpers</code> and <code>WriteHelpers</code> header files.</p>\n<p>Let's look at what happens when you want to write a result set in <code>JSON</code> format to stdout. You have a result set ready to be fetched from <code>IBlockInputStream</code>. You create <code>WriteBufferFromFileDescriptor(STDOUT_FILENO)</code> to write bytes to stdout. You create <code>JSONRowOutputStream</code>, initialized with that <code>WriteBuffer</code>, to write rows in <code>JSON</code> to stdout. You create <code>BlockOutputStreamFromRowOutputStream</code> on top of it, to represent it as <code>IBlockOutputStream</code>. Then you call <code>copyData</code> to transfer data from <code>IBlockInputStream</code> to <code>IBlockOutputStream</code>, and everything works. Internally, <code>JSONRowOutputStream</code> will write various JSON delimiters and call the <code>IDataType::serializeTextJSON</code> method with a reference to <code>IColumn</code> and the row number as arguments. Consequently, <code>IDataType::serializeTextJSON</code> will call a method from <code>WriteHelpers.h</code>: for example, <code>writeText</code> for numeric types and <code>writeJSONString</code> for <code>DataTypeString</code>.</p>\n<h3 id=\"tables\">Tables<a class=\"headerlink\" href=\"#tables\" title=\"Permanent link\">&para;</a></h3>\n<p>Tables are represented by the <code>IStorage</code> interface. Different implementations of that interface are different table engines. Examples are <code>StorageMergeTree</code>, <code>StorageMemory</code>, and so on. Instances of these classes are just tables.</p>\n<p>The most important <code>IStorage</code> methods are <code>read</code> and <code>write</code>. There are also <code>alter</code>, <code>rename</code>, <code>drop</code>, and so on. The <code>read</code> method accepts the following arguments: the set of columns to read from a table, the <code>AST</code> query to consider, and the desired number of streams to return. It returns one or multiple <code>IBlockInputStream</code> objects and information about the stage of data processing that was completed inside a table engine during query execution.</p>\n<p>In most cases, the read method is only responsible for reading the specified columns from a table, not for any further data processing. All further data processing is done by the query interpreter and is outside the responsibility of <code>IStorage</code>.</p>\n<p>But there are notable exceptions:</p>\n<ul>\n<li>The AST query is passed to the <code>read</code> method and the table engine can use it to derive index usage and to read less data from a table.</li>\n<li>Sometimes the table engine can process data itself to a specific stage. For example, <code>StorageDistributed</code> can send a query to remote servers, ask them to process data to a stage where data from different remote servers can be merged, and return that preprocessed data.<br />\nThe query interpreter then finishes processing the data.</li>\n</ul>\n<p>The table's <code>read</code> method can return multiple <code>IBlockInputStream</code> objects to allow parallel data processing. These multiple block input streams can read from a table in parallel. Then you can wrap these streams with various transformations (such as expression evaluation or filtering) that can be calculated independently and create a <code>UnionBlockInputStream</code> on top of them, to read from multiple streams in parallel.</p>\n<p>There are also <code>TableFunction</code>s. These are functions that return a temporary <code>IStorage</code> object to use in the <code>FROM</code> clause of a query.</p>\n<p>To get a quick idea of how to implement your own table engine, look at something simple, like <code>StorageMemory</code> or <code>StorageTinyLog</code>.</p>\n<blockquote>\n<p>As the result of the <code>read</code> method, <code>IStorage</code> returns <code>QueryProcessingStage</code> \u2013 information about what parts of the query were already calculated inside storage. Currently we have only very coarse granularity for that information. There is no way for the storage to say \"I have already processed this part of the expression in WHERE, for this range of data\". We need to work on that.</p>\n</blockquote>\n<h3 id=\"parsers\">Parsers<a class=\"headerlink\" href=\"#parsers\" title=\"Permanent link\">&para;</a></h3>\n<p>A query is parsed by a hand-written recursive descent parser. For example, <code>ParserSelectQuery</code> just recursively calls the underlying parsers for various parts of the query. Parsers create an <code>AST</code>. The <code>AST</code> is represented by nodes, which are instances of <code>IAST</code>.</p>\n<blockquote>\n<p>Parser generators are not used for historical reasons.</p>\n</blockquote>\n<h3 id=\"interpreters\">Interpreters<a class=\"headerlink\" href=\"#interpreters\" title=\"Permanent link\">&para;</a></h3>\n<p>Interpreters are responsible for creating the query execution pipeline from an <code>AST</code>. There are simple interpreters, such as <code>InterpreterExistsQuery</code>and <code>InterpreterDropQuery</code>, or the more sophisticated <code>InterpreterSelectQuery</code>. The query execution pipeline is a combination of block input or output streams. For example, the result of interpreting the <code>SELECT</code> query is the <code>IBlockInputStream</code> to read the result set from; the result of the INSERT query is the <code>IBlockOutputStream</code> to write data for insertion to; and the result of interpreting the <code>INSERT SELECT</code> query is the <code>IBlockInputStream</code> that returns an empty result set on the first read, but that copies data from <code>SELECT</code> to <code>INSERT</code> at the same time.</p>\n<p><code>InterpreterSelectQuery</code> uses <code>ExpressionAnalyzer</code> and <code>ExpressionActions</code> machinery for query analysis and transformations. This is where most rule-based query optimizations are done. <code>ExpressionAnalyzer</code> is quite messy and should be rewritten: various query transformations and optimizations should be extracted to separate classes to allow modular transformations or query.</p>\n<h3 id=\"functions_2\">Functions<a class=\"headerlink\" href=\"#functions_2\" title=\"Permanent link\">&para;</a></h3>\n<p>There are ordinary functions and aggregate functions. For aggregate functions, see the next section.</p>\n<p>Ordinary functions don't change the number of rows \u2013 they work as if they are processing each row independently. In fact, functions are not called for individual rows, but for <code>Block</code>'s of data to implement vectorized query execution.</p>\n<p>There are some miscellaneous functions, like <a href=\"#function-blocksize\">blockSize</a>, <a href=\"#function-rownumberinblock\">rowNumberInBlock</a>, and <a href=\"#function-runningaccumulate\">runningAccumulate</a>, that exploit block processing and violate the independence of rows.</p>\n<p>ClickHouse has strong typing, so implicit type conversion doesn't occur. If a function doesn't support a specific combination of types, an exception will be thrown. But functions can work (be overloaded) for many different combinations of types. For example, the <code>plus</code> function (to implement the <code>+</code> operator) works for any combination of numeric types: <code>UInt8</code> + <code>Float32</code>, <code>UInt16</code> + <code>Int8</code>, and so on. Also, some variadic functions can accept any number of arguments, such as the <code>concat</code> function.</p>\n<p>Implementing a function may be slightly inconvenient because a function explicitly dispatches supported data types and supported <code>IColumns</code>. For example, the <code>plus</code> function has code generated by instantiation of a C++ template for each combination of numeric types, and for constant or non-constant left and right arguments.</p>\n<blockquote>\n<p>This is a nice place to implement runtime code gener");
            
            document.write("ation to avoid template code bloat. Also, it will make it possible to add fused functions like fused multiply-add, or to make multiple comparisons in one loop iteration.</p>\n</blockquote>\n<p>Due to vectorized query execution, functions are not short-circuit. For example, if you write <code>WHERE f(x) AND g(y)</code>, both sides will be calculated, even for rows, when <code>f(x)</code> is zero (except when <code>f(x)</code> is a zero constant expression). But if selectivity of the <code>f(x)</code> condition is high, and calculation of <code>f(x)</code> is much cheaper than <code>g(y)</code>, it's better to implement multi-pass calculation: first calculate <code>f(x)</code>, then filter columns by the result, and then calculate <code>g(y)</code> only for smaller, filtered chunks of data.</p>\n<h3 id=\"aggregate-functions\">Aggregate Functions<a class=\"headerlink\" href=\"#aggregate-functions\" title=\"Permanent link\">&para;</a></h3>\n<p>Aggregate functions are stateful functions. They accumulate passed values into some state, and allow you to get results from that state. They are managed with the <code>IAggregateFunction</code> interface. States can be rather simple (the state for <code>AggregateFunctionCount</code> is just a single <code>UInt64</code> value) or quite complex (the state of <code>AggregateFunctionUniqCombined</code> is a combination of a linear array, a hash table and a <code>HyperLogLog</code> probabilistic data structure).</p>\n<p>To deal with multiple states while executing a high-cardinality <code>GROUP BY</code> query, states are allocated in <code>Arena</code> (a memory pool), or they could be allocated in any suitable piece of memory. States can have a non-trivial constructor and destructor: for example, complex aggregation states can allocate additional memory themselves. This requires some attention to creating and destroying states and properly passing their ownership, to keep track of who and when will destroy states.</p>\n<p>Aggregation states can be serialized and deserialized to pass over the network during distributed query execution or to write them on disk where there is not enough RAM. They can even be stored in a table with the <code>DataTypeAggregateFunction</code> to allow incremental aggregation of data.</p>\n<blockquote>\n<p>The serialized data format for aggregate function states is not versioned right now. This is ok if aggregate states are only stored temporarily. But we have the <code>AggregatingMergeTree</code> table engine for incremental aggregation, and people are already using it in production. This is why we should add support for backward compatibility when changing the serialized format for any aggregate function in the future.</p>\n</blockquote>\n<h3 id=\"server\">Server<a class=\"headerlink\" href=\"#server\" title=\"Permanent link\">&para;</a></h3>\n<p>The server implements several different interfaces:</p>\n<ul>\n<li>An HTTP interface for any foreign clients.</li>\n<li>A TCP interface for the native ClickHouse client and for cross-server communication during distributed query execution.</li>\n<li>An interface for transferring data for replication.</li>\n</ul>\n<p>Internally, it is just a basic multithreaded server without coroutines, fibers, etc. Since the server is not designed to process a high rate of simple queries but is intended to process a relatively low rate of complex queries, each of them can process a vast amount of data for analytics.</p>\n<p>The server initializes the <code>Context</code> class with the necessary environment for query execution: the list of available databases, users and access rights, settings, clusters, the process list, the query log, and so on. This environment is used by interpreters.</p>\n<p>We maintain full backward and forward compatibility for the server TCP protocol: old clients can talk to new servers and new clients can talk to old servers. But we don't want to maintain it eternally, and we are removing support for old versions after about one year.</p>\n<blockquote>\n<p>For all external applications, we recommend using the HTTP interface because it is simple and easy to use. The TCP protocol is more tightly linked to internal data structures: it uses an internal format for passing blocks of data and it uses custom framing for compressed data. We haven't released a C library for that protocol because it requires linking most of the ClickHouse codebase, which is not practical.</p>\n</blockquote>\n<h3 id=\"distributed-query-execution\">Distributed Query Execution<a class=\"headerlink\" href=\"#distributed-query-execution\" title=\"Permanent link\">&para;</a></h3>\n<p>Servers in a cluster setup are mostly independent. You can create a <code>Distributed</code> table on one or all servers in a cluster. The <code>Distributed</code> table does not store data itself \u2013 it only provides a \"view\" to all local tables on multiple nodes of a cluster. When you SELECT from a <code>Distributed</code> table, it rewrites that query, chooses remote nodes according to load balancing settings, and sends the query to them. The <code>Distributed</code> table requests remote servers to process a query just up to a stage where intermediate results from different servers can be merged. Then it receives the intermediate results and merges them. The distributed table tries to distribute as much work as possible to remote servers, and does not send much intermediate data over the network.</p>\n<blockquote>\n<p>Things become more complicated when you have subqueries in IN or JOIN clauses and each of them uses a <code>Distributed</code> table. We have different strategies for execution of these queries.</p>\n</blockquote>\n<p>There is no global query plan for distributed query execution. Each node has its own local query plan for its part of the job. We only have simple one-pass distributed query execution: we send queries for remote nodes and then merge the results. But this is not feasible for difficult queries with high cardinality GROUP BYs or with a large amount of temporary data for JOIN: in such cases, we need to \"reshuffle\" data between servers, which requires additional coordination. ClickHouse does not support that kind of query execution, and we need to work on it.</p>\n<h3 id=\"merge-tree\">Merge Tree<a class=\"headerlink\" href=\"#merge-tree\" title=\"Permanent link\">&para;</a></h3>\n<p><code>MergeTree</code> is a family of storage engines that supports indexing by primary key. The primary key can be an arbitrary tuple of columns or expressions. Data in a <code>MergeTree</code> table is stored in \"parts\". Each part stores data in the primary key order (data is ordered lexicographically by the primary key tuple). All the table columns are stored in separate <code>column.bin</code> files in these parts. The files consist of compressed blocks. Each block is usually from 64 KB to 1 MB of uncompressed data, depending on the average value size. The blocks consist of column values placed contiguously one after the other. Column values are in the same order for each column (the order is defined by the primary key), so when you iterate by many columns, you get values for the corresponding rows.</p>\n<p>The primary key itself is \"sparse\". It doesn't address each single row, but only some ranges of data. A separate <code>primary.idx</code> file has the value of the primary key for each N-th row, where N is called <code>index_granularity</code> (usually, N = 8192). Also, for each column, we have <code>column.mrk</code> files with \"marks,\" which are offsets to each N-th row in the data file. Each mark is a pair: the offset in the file to the beginning of the compressed block, and the offset in the decompressed block to the beginning of data. Usually compressed blocks are aligned by marks, and the offset in the decompressed block is zero. Data for <code>primary.idx</code> always resides in memory and data for <code>column.mrk</code> files is cached.</p>\n<p>When we are going to read something from a part in <code>MergeTree</code>, we look at <code>primary.idx</code> data and locate ranges that could possibly contain requested data, then look at <code>column.mrk</code> data and calculate offsets for where to start reading those ranges. Because of sparseness, excess data may be read. ClickHouse is not suitable for a high load of simple point queries, because the entire range with <code>index_granularity</code> rows must be read for each key, and the entire compressed block must be decompressed for each column. We made the index sparse because we must be able to maintain trillions of rows per single server without noticeable memory consumption for the index. Also, because the primary key is sparse, it is not unique: it cannot check the existence of the key in the table at INSERT time. You could have many rows with the same key in a table.</p>\n<p>When you <code>INSERT</code> a bunch of data into <code>MergeTree</code>, that bunch is sorted by primary key order and forms a new part. To keep the number of parts relatively low, there are background threads that periodically select some parts and merge them to a single sorted part. That's why it is called <code>MergeTree</code>. Of course, merging leads to \"write amplification\". All parts are immutable: they are only created and deleted, but not modified. When SELECT is run, it holds a snapshot of the table (a set of parts). After merging, we also keep old parts for some time to make recovery after failure easier, so if we see that some merged part is probably broken, we can replace it with its source parts.</p>\n<p><code>MergeTree</code> is not an LSM tree because it doesn't contain \"memtable\" and \"log\": inserted data is written directly to the filesystem. This makes it suitable only to INSERT data in batches, not by individual row and not very frequently \u2013 about once per second is ok, but a thousand times a second is not. We did it this way for simplicity's sake, and because we are already inserting data in batches in our applications.</p>\n<blockquote>\n<p>MergeTree tables can only have one (primary) index: there aren't any secondary indices. It would be nice to allow multiple physical representations under one logical table, for example, to store data in more than one physical order or even to al");
            
            document.write("low representations with pre-aggregated data along with original data.</p>\n</blockquote>\n<p>There are MergeTree engines that are doing additional work during background merges. Examples are <code>CollapsingMergeTree</code> and <code>AggregatingMergeTree</code>. This could be treated as special support for updates. Keep in mind that these are not real updates because users usually have no control over the time when background merges will be executed, and data in a <code>MergeTree</code> table is almost always stored in more than one part, not in completely merged form.</p>\n<h3 id=\"replication\">Replication<a class=\"headerlink\" href=\"#replication\" title=\"Permanent link\">&para;</a></h3>\n<p>Replication in ClickHouse is implemented on a per-table basis. You could have some replicated and some non-replicated tables on the same server. You could also have tables replicated in different ways, such as one table with two-factor replication and another with three-factor.</p>\n<p>Replication is implemented in the <code>ReplicatedMergeTree</code> storage engine. The path in <code>ZooKeeper</code> is specified as a parameter for the storage engine. All tables with the same path in <code>ZooKeeper</code> become replicas of each other: they synchronize their data and maintain consistency. Replicas can be added and removed dynamically simply by creating or dropping a table.</p>\n<p>Replication uses an asynchronous multi-master scheme. You can insert data into any replica that has a session with <code>ZooKeeper</code>, and data is replicated to all other replicas asynchronously. Because ClickHouse doesn't support UPDATEs, replication is conflict-free. As there is no quorum acknowledgment of inserts, just-inserted data might be lost if one node fails.</p>\n<p>Metadata for replication is stored in ZooKeeper. There is a replication log that lists what actions to do. Actions are: get part; merge parts; drop partition, etc. Each replica copies the replication log to its queue and then executes the actions from the queue. For example, on insertion, the \"get part\" action is created in the log, and every replica downloads that part. Merges are coordinated between replicas to get byte-identical results. All parts are merged in the same way on all replicas. To achieve this, one replica is elected as the leader, and that replica initiates merges and writes \"merge parts\" actions to the log.</p>\n<p>Replication is physical: only compressed parts are transferred between nodes, not queries. To lower the network cost (to avoid network amplification), merges are processed on each replica independently in most cases. Large merged parts are sent over the network only in cases of significant replication lag.</p>\n<p>In addition, each replica stores its state in ZooKeeper as the set of parts and its checksums. When the state on the local filesystem diverges from the reference state in ZooKeeper, the replica restores its consistency by downloading missing and broken parts from other replicas. When there is some unexpected or broken data in the local filesystem, ClickHouse does not remove it, but moves it to a separate directory and forgets it.</p>\n<blockquote>\n<p>The ClickHouse cluster consists of independent shards, and each shard consists of replicas. The cluster is not elastic, so after adding a new shard, data is not rebalanced between shards automatically. Instead, the cluster load will be uneven. This implementation gives you more control, and it is fine for relatively small clusters such as tens of nodes. But for clusters with hundreds of nodes that we are using in production, this approach becomes a significant drawback. We should implement a table engine that will span its data across the cluster with dynamically replicated regions that could be split and balanced between clusters automatically.</p>\n</blockquote>\n<p><a name=\"../development/build/\"></a><a name=\"build/\"></a><a name=\"development/build/\"></a><a name=\"../../../../development/build/\"></a><a name=\"../../development/build/\"></a><a name=\"../../../development/build/\"></a><a name=\"../../../../../development/build/\"></a></p>\n<h2 id=\"how-to-build-clickhouse-release-package\">How to Build ClickHouse Release Package<a class=\"headerlink\" href=\"#how-to-build-clickhouse-release-package\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"install-git-and-pbuilder\">Install Git and Pbuilder<a class=\"headerlink\" href=\"#install-git-and-pbuilder\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get update\n$ sudo apt-get install git pbuilder debhelper lsb-release fakeroot sudo debian-archive-keyring debian-keyring\n</code></pre></div>\n\n\n<h3 id=\"checkout-clickhouse-sources\">Checkout ClickHouse Sources<a class=\"headerlink\" href=\"#checkout-clickhouse-sources\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ git clone --recursive --branch stable https://github.com/yandex/ClickHouse.git\n$ <span class=\"nb\">cd</span> ClickHouse\n</code></pre></div>\n\n\n<h3 id=\"run-release-script\">Run Release Script<a class=\"headerlink\" href=\"#run-release-script\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ ./release\n</code></pre></div>\n\n\n<h2 id=\"how-to-build-clickhouse-for-development\">How to Build ClickHouse for Development<a class=\"headerlink\" href=\"#how-to-build-clickhouse-for-development\" title=\"Permanent link\">&para;</a></h2>\n<p>The following tutorial is based on the Ubuntu Linux system.<br />\nWith appropriate changes, it should also work on any other Linux distribution.<br />\nOnly x86_64 with SSE 4.2 is supported. Support for AArch64 is experimental.</p>\n<p>To test for SSE 4.2, do</p>\n<div class=\"codehilite\"><pre><span></span><code>$ grep -q sse4_2 /proc/cpuinfo <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SSE 4.2 supported&quot;</span> <span class=\"o\">||</span> <span class=\"nb\">echo</span> <span class=\"s2\">&quot;SSE 4.2 not supported&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"install-git-and-cmake\">Install Git and CMake<a class=\"headerlink\" href=\"#install-git-and-cmake\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install git cmake ninja-build\n</code></pre></div>\n\n\n<p>Or cmake3 instead of cmake on older systems.</p>\n<h3 id=\"install-gcc-9\">Install GCC 9<a class=\"headerlink\" href=\"#install-gcc-9\" title=\"Permanent link\">&para;</a></h3>\n<p>There are several ways to do this.</p>\n<h4 id=\"install-from-a-ppa-package\">Install from a PPA Package<a class=\"headerlink\" href=\"#install-from-a-ppa-package\" title=\"Permanent link\">&para;</a></h4>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install software-properties-common\n$ sudo apt-add-repository ppa:ubuntu-toolchain-r/test\n$ sudo apt-get update\n$ sudo apt-get install gcc-9 g++-9\n</code></pre></div>\n\n\n<h4 id=\"install-from-sources\">Install from Sources<a class=\"headerlink\" href=\"#install-from-sources\" title=\"Permanent link\">&para;</a></h4>\n<p>Look at <a href=\"https://github.com/yandex/ClickHouse/blob/master/utils/ci/build-gcc-from-sources.sh\" rel=\"external nofollow noreferrer\">utils/ci/build-gcc-from-sources.sh</a></p>\n<h3 id=\"use-gcc-9-for-builds\">Use GCC 9 for Builds<a class=\"headerlink\" href=\"#use-gcc-9-for-builds\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ <span class=\"nb\">export</span> <span class=\"nv\">CC</span><span class=\"o\">=</span>gcc-9\n$ <span class=\"nb\">export</span> <span class=\"nv\">CXX</span><span class=\"o\">=</span>g++-9\n</code></pre></div>\n\n\n<h3 id=\"install-required-libraries-from-packages\">Install Required Libraries from Packages<a class=\"headerlink\" href=\"#install-required-libraries-from-packages\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo apt-get install libicu-dev libreadline-dev gperf\n</code></pre></div>\n\n\n<h3 id=\"checkout-clickhouse-sources_1\">Checkout ClickHouse Sources<a class=\"headerlink\" href=\"#checkout-clickhouse-sources_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ git clone --recursive git@github.com:yandex/ClickHouse.git\n</code></pre></div>\n\n\n<p>or </p>\n<div class=\"codehilite\"><pre><span></span><code>$ git clone --recursive https://github.com/yandex/ClickHouse.git\n$ <span class=\"nb\">cd</span> ClickHouse\n</code></pre></div>\n\n\n<p>For the latest stable version, switch to the <code>stable</code> branch.</p>\n<h3 id=\"build-clickhouse\">Build ClickHouse<a class=\"headerlink\" href=\"#build-clickhouse\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ mkdir build\n$ <span class=\"nb\">cd</span> build\n$ cmake ..\n$ ninja\n$ <span class=\"nb\">cd</span> ..\n</code></pre></div>\n\n\n<p>To create an executable, run <code>ninja clickhouse</code>.<br />\nThis will create the <code>dbms/programs/clickhouse</code> executable, which can be used with <code>client</code> or <code>server</code> arguments.</p>\n<p><a name=\"development/build_osx/\"></a><a name=\"../../../development/build_osx/\"></a><a name=\"../../../../../development/build_osx/\"></a><a name=\"../development/build_osx/\"></a><a name=\"../../../../development/build_osx/\"></a><a name=\"build_osx/\"></a><a name=\"../../development/build_osx/\"></a></p>\n<h2 id=\"how-to-build-clickhouse-on-mac-os-x\">How to Build ClickHouse on Mac OS X<a class=\"headerlink\" href=\"#how-to-build-clickhouse-on-mac-os-x\" title=\"Permanent link\">&para;</a></h2>\n<p>Build should work on Mac OS X 10.12.</p>\n<h3 id=\"install-homebrew\">Install Homebrew<a class=\"headerlink\" href=\"#install-homebrew\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ /usr/bin/ruby -e <span class=\"s2\">&quot;</span><span class=\"k\">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class=\"k\">)</span><span class=\"s2\">&quot;</span>\n</code></pre></div>\n\n\n<h3 id=\"install-required-compilers-tools-and-libraries\">Install Required Compilers, Tools, and Libraries<a class=\"headerlink\" href=\"#install-required-compilers-tools-and-libraries\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ brew install cmake ninja gc");
            
            document.write("c icu4c openssl libtool gettext readline gperf\n</code></pre></div>\n\n\n<h3 id=\"checkout-clickhouse-sources_2\">Checkout ClickHouse Sources<a class=\"headerlink\" href=\"#checkout-clickhouse-sources_2\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ git clone --recursive git@github.com:yandex/ClickHouse.git\n</code></pre></div>\n\n\n<p>or</p>\n<div class=\"codehilite\"><pre><span></span><code>$ git clone --recursive https://github.com/yandex/ClickHouse.git\n\n$ <span class=\"nb\">cd</span> ClickHouse\n</code></pre></div>\n\n\n<p>For the latest stable version, switch to the <code>stable</code> branch.</p>\n<h3 id=\"build-clickhouse_1\">Build ClickHouse<a class=\"headerlink\" href=\"#build-clickhouse_1\" title=\"Permanent link\">&para;</a></h3>\n<div class=\"codehilite\"><pre><span></span><code>$ mkdir build\n$ <span class=\"nb\">cd</span> build\n$ cmake .. -DCMAKE_CXX_COMPILER<span class=\"o\">=</span><span class=\"sb\">`</span>which g++-8<span class=\"sb\">`</span> -DCMAKE_C_COMPILER<span class=\"o\">=</span><span class=\"sb\">`</span>which gcc-8<span class=\"sb\">`</span>\n$ ninja\n$ <span class=\"nb\">cd</span> ..\n</code></pre></div>\n\n\n<h3 id=\"caveats\">Caveats<a class=\"headerlink\" href=\"#caveats\" title=\"Permanent link\">&para;</a></h3>\n<p>If you intend to run clickhouse-server, make sure to increase the system's maxfiles variable.</p>\n<div class=\"admonition info\">\n<p class=\"admonition-title\">Note</p>\n<p>You'll need to use sudo.</p>\n</div>\n<p>To do so, create the following file:</p>\n<p>/Library/LaunchDaemons/limit.maxfiles.plist:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"cp\">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot;</span>\n<span class=\"cp\">        &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>\n<span class=\"nt\">&lt;plist</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.0&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;dict&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>Label<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;string&gt;</span>limit.maxfiles<span class=\"nt\">&lt;/string&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>ProgramArguments<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;array&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>launchctl<span class=\"nt\">&lt;/string&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>limit<span class=\"nt\">&lt;/string&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>maxfiles<span class=\"nt\">&lt;/string&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>524288<span class=\"nt\">&lt;/string&gt;</span>\n      <span class=\"nt\">&lt;string&gt;</span>524288<span class=\"nt\">&lt;/string&gt;</span>\n    <span class=\"nt\">&lt;/array&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>RunAtLoad<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;true/&gt;</span>\n    <span class=\"nt\">&lt;key&gt;</span>ServiceIPC<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;false/&gt;</span>\n  <span class=\"nt\">&lt;/dict&gt;</span>\n<span class=\"nt\">&lt;/plist&gt;</span>\n</code></pre></div>\n\n\n<p>Execute the following command:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo chown root:wheel /Library/LaunchDaemons/limit.maxfiles.plist\n</code></pre></div>\n\n\n<p>Reboot.</p>\n<p>To check if it's working, you can use <code>ulimit -n</code> command.</p>\n<p><a name=\"../development/style/\"></a><a name=\"../../../../../development/style/\"></a><a name=\"style/\"></a><a name=\"../../../development/style/\"></a><a name=\"../../development/style/\"></a><a name=\"../../../../development/style/\"></a><a name=\"development/style/\"></a></p>\n<h2 id=\"how-to-write-c-code\">How to Write C++ Code<a class=\"headerlink\" href=\"#how-to-write-c-code\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"general-recommendations\">General Recommendations<a class=\"headerlink\" href=\"#general-recommendations\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> The following are recommendations, not requirements.</p>\n<p><strong>2.</strong> If you are editing code, it makes sense to follow the formatting of the existing code.</p>\n<p><strong>3.</strong> Code style is needed for consistency. Consistency makes it easier to read the code, and it also makes it easier to search the code.</p>\n<p><strong>4.</strong> Many of the rules do not have logical reasons; they are dictated by established practices.</p>\n<h3 id=\"formatting\">Formatting<a class=\"headerlink\" href=\"#formatting\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> Most of the formatting will be done automatically by <code>clang-format</code>.</p>\n<p><strong>2.</strong> Indents are 4 spaces. Configure your development environment so that a tab adds four spaces.</p>\n<p><strong>3.</strong> Opening and closing curly brackets must be on a separate line.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kr\">inline</span> <span class=\"kt\">void</span> <span class=\"nf\">readBoolText</span><span class=\"p\">(</span><span class=\"kt\">bool</span> <span class=\"o\">&amp;</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">ReadBuffer</span> <span class=\"o\">&amp;</span> <span class=\"n\">buf</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"kt\">char</span> <span class=\"n\">tmp</span> <span class=\"o\">=</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">;</span>\n    <span class=\"n\">readChar</span><span class=\"p\">(</span><span class=\"n\">tmp</span><span class=\"p\">,</span> <span class=\"n\">buf</span><span class=\"p\">);</span>\n    <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"n\">tmp</span> <span class=\"o\">!=</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>4.</strong> If the entire function body is a single <code>statement</code>, it can be placed on a single line. Place spaces around curly braces (besides the space at the end of the line).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kr\">inline</span> <span class=\"kt\">size_t</span> <span class=\"nf\">mask</span><span class=\"p\">()</span> <span class=\"k\">const</span>                <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"n\">buf_size</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">;</span> <span class=\"p\">}</span>\n<span class=\"kr\">inline</span> <span class=\"kt\">size_t</span> <span class=\"nf\">place</span><span class=\"p\">(</span><span class=\"n\">HashValue</span> <span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"k\">const</span>    <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"n\">x</span> <span class=\"o\">&amp;</span> <span class=\"n\">mask</span><span class=\"p\">();</span> <span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>5.</strong> For functions. Don't put spaces around brackets.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">void</span> <span class=\"n\">reinsert</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">Value</span> <span class=\"o\">&amp;</span> <span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">memcpy</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">buf</span><span class=\"p\">[</span><span class=\"n\">place_value</span><span class=\"p\">],</span> <span class=\"o\">&amp;</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">));</span>\n</code></pre></div>\n\n\n<p><strong>6.</strong> In <code>if</code>, <code>for</code>, <code>while</code> and other expressions, a space is inserted in front of the opening bracket (as opposed to function calls).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kt\">size_t</span> <span class=\"n\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"n\">i</span> <span class=\"o\">&lt;</span> <span class=\"n\">rows</span><span class=\"p\">;</span> <span class=\"n\">i</span> <span class=\"o\">+=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"n\">index_granularity</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>7.</strong> Add spaces around binary operators (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, ...) and the ternary operator <code>?:</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">UInt16</span> <span class=\"n\">year</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">100</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">10</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">);</span>\n<span class=\"n\">UInt8</span> <span class=\"n\">month</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">10</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span clas");
            
            document.write("s=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">);</span>\n<span class=\"n\">UInt8</span> <span class=\"n\">day</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">8</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">10</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">9</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"sc\">&#39;0&#39;</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p><strong>8.</strong> If a line feed is entered, put the operator on a new line and increase the indent before it.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">elapsed_ns</span><span class=\"p\">)</span>\n    <span class=\"n\">message</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; (&quot;</span>\n        <span class=\"o\">&lt;&lt;</span> <span class=\"n\">rows_read_on_server</span> <span class=\"o\">*</span> <span class=\"mi\">1000000000</span> <span class=\"o\">/</span> <span class=\"n\">elapsed_ns</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; rows/s., &quot;</span>\n        <span class=\"o\">&lt;&lt;</span> <span class=\"n\">bytes_read_on_server</span> <span class=\"o\">*</span> <span class=\"mf\">1000.0</span> <span class=\"o\">/</span> <span class=\"n\">elapsed_ns</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; MB/s.) &quot;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>9.</strong> You can use spaces for alignment within a line, if desired.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">dst</span><span class=\"p\">.</span><span class=\"n\">ClickLogID</span>         <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"p\">.</span><span class=\"n\">LogID</span><span class=\"p\">;</span>\n<span class=\"n\">dst</span><span class=\"p\">.</span><span class=\"n\">ClickEventID</span>       <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"p\">.</span><span class=\"n\">EventID</span><span class=\"p\">;</span>\n<span class=\"n\">dst</span><span class=\"p\">.</span><span class=\"n\">ClickGoodEvent</span>     <span class=\"o\">=</span> <span class=\"n\">click</span><span class=\"p\">.</span><span class=\"n\">GoodEvent</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>10.</strong> Don't use spaces around the operators <code>.</code>, <code>-&gt;</code>.</p>\n<p>If necessary, the operator can be wrapped to the next line. In this case, the offset in front of it is increased.</p>\n<p><strong>11.</strong> Do not use a space to separate unary operators (<code>--</code>, <code>++</code>, <code>*</code>, <code>&amp;</code>, ...) from the argument.</p>\n<p><strong>12.</strong> Put a space after a comma, but not before it. The same rule goes for a semicolon inside a <code>for</code> expression.</p>\n<p><strong>13.</strong> Do not use spaces to separate the <code>[]</code> operator.</p>\n<p><strong>14.</strong> In a <code>template &lt;...&gt;</code> expression, use a space between <code>template</code> and <code>&lt;</code>; no spaces after <code>&lt;</code> or before <code>&gt;</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">template</span> <span class=\"o\">&lt;</span><span class=\"k\">typename</span> <span class=\"n\">TKey</span><span class=\"p\">,</span> <span class=\"k\">typename</span> <span class=\"n\">TValue</span><span class=\"o\">&gt;</span>\n<span class=\"k\">struct</span> <span class=\"n\">AggregatedStatElement</span>\n<span class=\"p\">{}</span>\n</code></pre></div>\n\n\n<p><strong>15.</strong> In classes and structures, write <code>public</code>, <code>private</code>, and <code>protected</code> on the same level as <code>class/struct</code>, and indent the rest of the code.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">template</span> <span class=\"o\">&lt;</span><span class=\"k\">typename</span> <span class=\"n\">T</span><span class=\"o\">&gt;</span>\n<span class=\"k\">class</span> <span class=\"nc\">MultiVersion</span>\n<span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:</span>\n    <span class=\"c1\">/// Version of object for usage. shared_ptr manage lifetime of version.</span>\n    <span class=\"k\">using</span> <span class=\"n\">Version</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"k\">const</span> <span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"p\">;</span>\n    <span class=\"p\">...</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>16.</strong> If the same <code>namespace</code> is used for the entire file, and there isn't anything else significant, an offset is not necessary inside <code>namespace</code>.</p>\n<p><strong>17.</strong> If the block for an <code>if</code>, <code>for</code>, <code>while</code>, or other expression consists of a single <code>statement</code>, the curly brackets are optional. Place the <code>statement</code> on a separate line, instead. This rule is also valid for nested <code>if</code>, <code>for</code>, <code>while</code>, ...</p>\n<p>But if the inner <code>statement</code> contains curly brackets or <code>else</code>, the external block should be written in curly brackets.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// Finish write.</span>\n<span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"k\">auto</span> <span class=\"o\">&amp;</span> <span class=\"nl\">stream</span> <span class=\"p\">:</span> <span class=\"n\">streams</span><span class=\"p\">)</span>\n    <span class=\"n\">stream</span><span class=\"p\">.</span><span class=\"n\">second</span><span class=\"o\">-&gt;</span><span class=\"n\">finalize</span><span class=\"p\">();</span>\n</code></pre></div>\n\n\n<p><strong>18.</strong> There shouldn't be any spaces at the ends of lines.</p>\n<p><strong>19.</strong> Source files are UTF-8 encoded.</p>\n<p><strong>20.</strong> Non-ASCII characters can be used in string literals.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;, &quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"p\">(</span><span class=\"n\">timer</span><span class=\"p\">.</span><span class=\"n\">elapsed</span><span class=\"p\">()</span> <span class=\"o\">/</span> <span class=\"n\">chunks_stats</span><span class=\"p\">.</span><span class=\"n\">hits</span><span class=\"p\">)</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot; \u03bcsec/hit.&quot;</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>21</strong> Do not write multiple expressions in a single line.</p>\n<p><strong>22.</strong> Group sections of code inside functions and separate them with no more than one empty line.</p>\n<p><strong>23.</strong> Separate functions, classes, and so on with one or two empty lines.</p>\n<p><strong>24.</strong> <code>A const</code> (related to a value) must be written before the type name.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//correct</span>\n<span class=\"k\">const</span> <span class=\"kt\">char</span> <span class=\"o\">*</span> <span class=\"n\">pos</span>\n<span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span> <span class=\"n\">s</span>\n<span class=\"c1\">//incorrect</span>\n<span class=\"kt\">char</span> <span class=\"k\">const</span> <span class=\"o\">*</span> <span class=\"n\">pos</span>\n</code></pre></div>\n\n\n<p><strong>25.</strong> When declaring a pointer or reference, the <code>*</code> and <code>&amp;</code> symbols should be separated by spaces on both sides.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//correct</span>\n<span class=\"k\">const</span> <span class=\"kt\">char</span> <span class=\"o\">*</span> <span class=\"n\">pos</span>\n<span class=\"c1\">//incorrect</span>\n<span class=\"k\">const</span> <span class=\"kt\">char</span><span class=\"o\">*</span> <span class=\"n\">pos</span>\n<span class=\"k\">const</span> <span class=\"kt\">char</span> <span class=\"o\">*</span><span class=\"n\">pos</span>\n</code></pre></div>\n\n\n<p><strong>26.</strong> When using template types, alias them with the <code>using</code> keyword (except in the simplest cases).</p>\n<p>In other words, the template parameters are specified only in <code>using</code> and aren't repeated in the code.</p>\n<p><code>using</code> can be declared locally, such as inside a function.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//correct</span>\n<span class=\"k\">using</span> <span class=\"n\">FileStreams</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">map</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">,</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">Stream</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">;</span>\n<span class=\"n\">FileStreams</span> <span class=\"n\">streams</span><span class=\"p\">;</span>\n<span class=\"c1\">//incorrect</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">map</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">,</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">Stream</span><span class=\"o\">&gt;&gt;</span> <span class=\"n\">streams</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>27.</strong> Do not declare several variables of different types in one statement.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//incorrect</span>\n<span class=\"kt\">int</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">y</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>28.</strong");
            
            document.write("> Do not use C-style casts.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//incorrect</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cerr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"p\">(</span><span class=\"kt\">int</span><span class=\"p\">)</span><span class=\"n\">c</span> <span class=\"o\">&lt;&lt;</span><span class=\"p\">;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n<span class=\"c1\">//correct</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cerr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"k\">static_cast</span><span class=\"o\">&lt;</span><span class=\"kt\">int</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>29.</strong> In classes and structs, group members and functions separately inside each visibility scope.</p>\n<p><strong>30.</strong> For small classes and structs, it is not necessary to separate the method declaration from the implementation.</p>\n<p>The same is true for small methods in any classes or structs.</p>\n<p>For templated classes and structs, don't separate the method declarations from the implementation (because otherwise they must be defined in the same translation unit).</p>\n<p><strong>31.</strong> You can wrap lines at 140 characters, instead of 80.</p>\n<p><strong>32.</strong> Always use the prefix increment/decrement operators if postfix is not required.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"n\">Names</span><span class=\"o\">::</span><span class=\"n\">const_iterator</span> <span class=\"n\">it</span> <span class=\"o\">=</span> <span class=\"n\">column_names</span><span class=\"p\">.</span><span class=\"n\">begin</span><span class=\"p\">();</span> <span class=\"n\">it</span> <span class=\"o\">!=</span> <span class=\"n\">column_names</span><span class=\"p\">.</span><span class=\"n\">end</span><span class=\"p\">();</span> <span class=\"o\">++</span><span class=\"n\">it</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<h3 id=\"comments_1\">Comments<a class=\"headerlink\" href=\"#comments_1\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> Be sure to add comments for all non-trivial parts of code.</p>\n<p>This is very important. Writing the comment might help you realize that the code isn't necessary, or that it is designed wrong.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cm\">/** Part of piece of memory, that can be used.</span>\n<span class=\"cm\">  * For example, if internal_buffer is 1MB, and there was only 10 bytes loaded to buffer from file for reading,</span>\n<span class=\"cm\">  * then working_buffer will have size of only 10 bytes</span>\n<span class=\"cm\">  * (working_buffer.end() will point to position right after those 10 bytes available for read).</span>\n<span class=\"cm\">  */</span>\n</code></pre></div>\n\n\n<p><strong>2.</strong> Comments can be as detailed as necessary.</p>\n<p><strong>3.</strong> Place comments before the code they describe. In rare cases, comments can come after the code, on the same line.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cm\">/** Parses and executes the query.</span>\n<span class=\"cm\">*/</span>\n<span class=\"kt\">void</span> <span class=\"n\">executeQuery</span><span class=\"p\">(</span>\n    <span class=\"n\">ReadBuffer</span> <span class=\"o\">&amp;</span> <span class=\"n\">istr</span><span class=\"p\">,</span> <span class=\"c1\">/// Where to read the query from (and data for INSERT, if applicable)</span>\n    <span class=\"n\">WriteBuffer</span> <span class=\"o\">&amp;</span> <span class=\"n\">ostr</span><span class=\"p\">,</span> <span class=\"c1\">/// Where to write the result</span>\n    <span class=\"n\">Context</span> <span class=\"o\">&amp;</span> <span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"c1\">/// DB, tables, data types, engines, functions, aggregate functions...</span>\n    <span class=\"n\">BlockInputStreamPtr</span> <span class=\"o\">&amp;</span> <span class=\"n\">query_plan</span><span class=\"p\">,</span> <span class=\"c1\">/// Here could be written the description on how query was executed</span>\n    <span class=\"n\">QueryProcessingStage</span><span class=\"o\">::</span><span class=\"n\">Enum</span> <span class=\"n\">stage</span> <span class=\"o\">=</span> <span class=\"n\">QueryProcessingStage</span><span class=\"o\">::</span><span class=\"n\">Complete</span> <span class=\"c1\">/// Up to which stage process the SELECT query</span>\n    <span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>4.</strong> Comments should be written in English only.</p>\n<p><strong>5.</strong> If you are writing a library, include detailed comments explaining it in the main header file.</p>\n<p><strong>6.</strong> Do not add comments that do not provide additional information. In particular, do not leave empty comments like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cm\">/*</span>\n<span class=\"cm\">* Procedure Name:</span>\n<span class=\"cm\">* Original procedure name:</span>\n<span class=\"cm\">* Author:</span>\n<span class=\"cm\">* Date of creation:</span>\n<span class=\"cm\">* Dates of modification:</span>\n<span class=\"cm\">* Modification authors:</span>\n<span class=\"cm\">* Original file name:</span>\n<span class=\"cm\">* Purpose:</span>\n<span class=\"cm\">* Intent:</span>\n<span class=\"cm\">* Designation:</span>\n<span class=\"cm\">* Classes used:</span>\n<span class=\"cm\">* Constants:</span>\n<span class=\"cm\">* Local variables:</span>\n<span class=\"cm\">* Parameters:</span>\n<span class=\"cm\">* Date of creation:</span>\n<span class=\"cm\">* Purpose:</span>\n<span class=\"cm\">*/</span>\n</code></pre></div>\n\n\n<p>The example is borrowed from the resource <a href=\"http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/\" rel=\"external nofollow noreferrer\">http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/</a>.</p>\n<p><strong>7.</strong> Do not write garbage comments (author, creation date ..) at the beginning of each file.</p>\n<p><strong>8.</strong> Single-line comments begin with three slashes: <code>///</code> and multi-line comments begin with <code>/**</code>. These comments are considered \"documentation\".</p>\n<p>Note: You can use Doxygen to generate documentation from these comments. But Doxygen is not generally used because it is more convenient to navigate the code in the IDE.</p>\n<p><strong>9.</strong> Multi-line comments must not have empty lines at the beginning and end (except the line that closes a multi-line comment).</p>\n<p><strong>10.</strong> For commenting out code, use basic comments, not \u201cdocumenting\u201d comments.</p>\n<p><strong>11.</strong> Delete the commented out parts of the code before committing.</p>\n<p><strong>12.</strong> Do not use profanity in comments or code.</p>\n<p><strong>13.</strong> Do not use uppercase letters. Do not use excessive punctuation.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// WHAT THE FAIL???</span>\n</code></pre></div>\n\n\n<p><strong>14.</strong> Do not use comments to make delimeters.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">///******************************************************</span>\n</code></pre></div>\n\n\n<p><strong>15.</strong> Do not start discussions in comments.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// Why did you do this stuff?</span>\n</code></pre></div>\n\n\n<p><strong>16.</strong> There's no need to write a comment at the end of a block describing what it was about.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// for</span>\n</code></pre></div>\n\n\n<h3 id=\"names\">Names<a class=\"headerlink\" href=\"#names\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> Use lowercase letters with underscores in the names of variables and class members.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">size_t</span> <span class=\"n\">max_block_size</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>2.</strong> For the names of functions (methods), use camelCase beginning with a lowercase letter.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">getName</span><span class=\"p\">()</span> <span class=\"k\">const</span> <span class=\"k\">override</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"s\">&quot;Memory&quot;</span><span class=\"p\">;</span> <span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>3.</strong> For the names of classes (structs), use CamelCase beginning with an uppercase letter. Prefixes other than I are not used for interfaces.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">class</span> <span class=\"nc\">StorageMemory</span> <span class=\"o\">:</span> <span class=\"k\">public</span> <span class=\"n\">IStorage</span>\n</code></pre></div>\n\n\n<p><strong>4.</strong> <code>using</code> are named the same way as classes, or with <code>_t</code> on the end.</p>\n<p><strong>5.</strong> Names of template type arguments: in simple cases, use <code>T</code>; <code>T</code>, <code>U</code>; <code>T1</code>, <code>T2</code>.</p>\n<p>For more complex cases, either follow the rules for class names, or add the prefix <code>T</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">template</span> <span class=\"o\">&lt;</span><span class=\"k\">typename</span> <span class=\"n\">TKey</span><span class=\"p\">,</span> <span class=\"k\">typename</span> <span class=\"n\">TValue</span><span class=\"o\">&gt;</span>\n<span class=\"k\">struct</span> <span class=\"n\">AggregatedStatElement</span>\n</code></pre></div>\n\n\n<p><strong>6.</strong> Names of template constant arguments: either follow the rules for variable names, or use <code>N</code> in simple cases.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">template</span> <span class=\"o\">&lt;</span><span class=\"kt\">bool</span> <span class=\"n\">without_www</span><span class=\"o\">&gt;<");
            
            document.write("/span>\n<span class=\"k\">struct</span> <span class=\"n\">ExtractDomain</span>\n</code></pre></div>\n\n\n<p><strong>7.</strong> For abstract classes (interfaces) you can add the <code>I</code> prefix.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">class</span> <span class=\"nc\">IBlockInputStream</span>\n</code></pre></div>\n\n\n<p><strong>8.</strong> If you use a variable locally, you can use the short name.</p>\n<p>In all other cases, use a name that describes the meaning.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">bool</span> <span class=\"n\">info_successfully_loaded</span> <span class=\"o\">=</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>9.</strong> Names of <code>define</code>s and global constants use ALL_CAPS with underscores.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cp\">##define MAX_SRC_TABLE_NAMES_TO_STORE 1000</span>\n</code></pre></div>\n\n\n<p><strong>10.</strong> File names should use the same style as their contents.</p>\n<p>If a file contains a single class, name the file the same way as the class (CamelCase).</p>\n<p>If the file contains a single function, name the file the same way as the function (camelCase).</p>\n<p><strong>11.</strong> If the name contains an abbreviation, then:</p>\n<ul>\n<li>For variable names, the abbreviation should use lowercase letters <code>mysql_connection</code> (not <code>mySQL_connection</code>).</li>\n<li>For names of classes and functions, keep the uppercase letters in the abbreviation<code>MySQLConnection</code> (not <code>MySqlConnection</code>).</li>\n</ul>\n<p><strong>12.</strong> Constructor arguments that are used just to initialize the class members should be named the same way as the class members, but with an underscore at the end.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">FileQueueProcessor</span><span class=\"p\">(</span>\n    <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span> <span class=\"n\">path_</span><span class=\"p\">,</span>\n    <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span> <span class=\"n\">prefix_</span><span class=\"p\">,</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">FileHandler</span><span class=\"o\">&gt;</span> <span class=\"n\">handler_</span><span class=\"p\">)</span>\n    <span class=\"o\">:</span> <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"n\">path_</span><span class=\"p\">),</span>\n    <span class=\"n\">prefix</span><span class=\"p\">(</span><span class=\"n\">prefix_</span><span class=\"p\">),</span>\n    <span class=\"n\">handler</span><span class=\"p\">(</span><span class=\"n\">handler_</span><span class=\"p\">),</span>\n    <span class=\"n\">log</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">Logger</span><span class=\"o\">::</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s\">&quot;FileQueueProcessor&quot;</span><span class=\"p\">))</span>\n<span class=\"p\">{</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>The underscore suffix can be omitted if the argument is not used in the constructor body.</p>\n<p><strong>13.</strong> There is no difference in the names of local variables and class members (no prefixes required).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">timer</span> <span class=\"p\">(</span><span class=\"n\">not</span> <span class=\"n\">m_timer</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><strong>14.</strong> For the constants in an <code>enum</code>, use CamelCase with a capital letter. ALL_CAPS is also acceptable. If the <code>enum</code> is non-local, use an <code>enum class</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">enum</span> <span class=\"k\">class</span> <span class=\"nc\">CompressionMethod</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">QuickLZ</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">,</span>\n    <span class=\"n\">LZ4</span>     <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n<span class=\"p\">};</span>\n</code></pre></div>\n\n\n<p><strong>15.</strong> All names must be in English. Transliteration of Russian words is not allowed.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">not Stroka</span>\n</code></pre></div>\n\n\n<p><strong>16.</strong> Abbreviations are acceptable if they are well known (when you can easily find the meaning of the abbreviation in Wikipedia or in a search engine).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"ss\">`AST`</span><span class=\"p\">,</span> <span class=\"ss\">`SQL`</span><span class=\"p\">.</span>\n\n<span class=\"k\">Not</span> <span class=\"ss\">`NVDH`</span> <span class=\"p\">(</span><span class=\"n\">some</span> <span class=\"n\">random</span> <span class=\"n\">letters</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>Incomplete words are acceptable if the shortened version is common use.</p>\n<p>You can also use an abbreviation if the full name is included next to it in the comments.</p>\n<p><strong>17.</strong> File names with C++ source code must have the <code>.cpp</code> extension. Header files must have the <code>.h</code> extension.</p>\n<h3 id=\"how-to-write-code\">How to Write Code<a class=\"headerlink\" href=\"#how-to-write-code\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> Memory management.</p>\n<p>Manual memory deallocation (<code>delete</code>) can only be used in library code.</p>\n<p>In library code, the <code>delete</code> operator can only be used in destructors.</p>\n<p>In application code, memory must be freed by the object that owns it.</p>\n<p>Examples:</p>\n<ul>\n<li>The easiest way is to place an object on the stack, or make it a member of another class.</li>\n<li>For a large number of small objects, use containers.</li>\n<li>For automatic deallocation of a small number of objects that reside in the heap, use <code>shared_ptr/unique_ptr</code>.</li>\n</ul>\n<p><strong>2.</strong> Resource management.</p>\n<p>Use <code>RAII</code> and see above.</p>\n<p><strong>3.</strong> Error handling.</p>\n<p>Use exceptions. In most cases, you only need to throw an exception, and don't need to catch it (because of <code>RAII</code>).</p>\n<p>In offline data processing applications, it's often acceptable to not catch exceptions.</p>\n<p>In servers that handle user requests, it's usually enough to catch exceptions at the top level of the connection handler.</p>\n<p>In thread functions, you should catch and keep all exceptions to rethrow them in the main thread after <code>join</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// If there weren&#39;t any calculations yet, calculate the first block synchronously</span>\n<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">started</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">calculate</span><span class=\"p\">();</span>\n    <span class=\"n\">started</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n<span class=\"k\">else</span> <span class=\"c1\">/// If calculations are already in progress, wait for the result</span>\n    <span class=\"n\">pool</span><span class=\"p\">.</span><span class=\"n\">wait</span><span class=\"p\">();</span>\n\n<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">exception</span><span class=\"p\">)</span>\n    <span class=\"n\">exception</span><span class=\"o\">-&gt;</span><span class=\"n\">rethrow</span><span class=\"p\">();</span>\n</code></pre></div>\n\n\n<p>Never hide exceptions without handling. Never just blindly put all exceptions to log.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//Not correct</span>\n<span class=\"k\">catch</span> <span class=\"p\">(...)</span> <span class=\"p\">{}</span>\n</code></pre></div>\n\n\n<p>If you need to ignore some exceptions, do so only for specific ones and rethrow the rest.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">catch</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">DB</span><span class=\"o\">::</span><span class=\"n\">Exception</span> <span class=\"o\">&amp;</span> <span class=\"n\">e</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">.</span><span class=\"n\">code</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">ErrorCodes</span><span class=\"o\">::</span><span class=\"n\">UNKNOWN_AGGREGATE_FUNCTION</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"k\">nullptr</span><span class=\"p\">;</span>\n    <span class=\"k\">else</span>\n        <span class=\"k\">throw</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>When using functions with response codes or <code>errno</code>, always check the result and throw an exception in case of error.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">!=</span> <span class=\"n\">close</span><span class=\"p\">(</span><span class=\"n\">fd</span><span class=\"p\">))</span>\n    <span class=\"n\">throwFromErrno</span><span class=\"p\">(</span><span class=\"s\">&quot;Cannot close file &quot;</span> <span class=\"o\">+</span> <span class=\"n\">file_name</span><span class=\"p\">,</span> <span class=\"n\">ErrorCodes</span><span class=\"o\">::</span><span class=\"n\">CANNOT_CLOSE_FILE</span><span class=\"p\">);</span>\n</code></pre></div>\n\n\n<p><code>Do not use assert</code>.</p>\n<p><strong>4.</strong> Exception types.</p>\n<p>There is no need to use complex exception hierarchy in application code. The exception text should be understandable to a system administrator.</p>\n<p><strong>5.</strong> Throwing exceptions from destructors.</p>\n<p>This is not recommended, but it is allowed.</p>\n<p>Use the following options:</p>\n<ul>\n<li>Create a function (<code>done()</code> or <code>finalize()</code>) that will do ");
            
            document.write("all the work in advance that might lead to an exception. If that function was called, there should be no exceptions in the destructor later.</li>\n<li>Tasks that are too complex (such as sending messages over the network) can be put in separate method that the class user will have to call before destruction.</li>\n<li>If there is an exception in the destructor, it\u2019s better to log it than to hide it (if the logger is available).</li>\n<li>In simple applications, it is acceptable to rely on <code>std::terminate</code> (for cases of <code>noexcept</code> by default in C++11) to handle exceptions.</li>\n</ul>\n<p><strong>6.</strong> Anonymous code blocks.</p>\n<p>You can create a separate code block inside a single function in order to make certain variables local, so that the destructors are called when exiting the block.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Block</span> <span class=\"n\">block</span> <span class=\"o\">=</span> <span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">in</span><span class=\"o\">-&gt;</span><span class=\"n\">read</span><span class=\"p\">();</span>\n\n<span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">lock_guard</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">mutex</span><span class=\"o\">&gt;</span> <span class=\"n\">lock</span><span class=\"p\">(</span><span class=\"n\">mutex</span><span class=\"p\">);</span>\n    <span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">ready</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n    <span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">block</span> <span class=\"o\">=</span> <span class=\"n\">block</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">ready_any</span><span class=\"p\">.</span><span class=\"n\">set</span><span class=\"p\">();</span>\n</code></pre></div>\n\n\n<p><strong>7.</strong> Multithreading.</p>\n<p>In offline data processing programs:</p>\n<ul>\n<li>Try to get the best possible performance on a single CPU core. You can then parallelize your code if necessary.</li>\n</ul>\n<p>In server applications:</p>\n<ul>\n<li>Use the thread pool to process requests. At this point, we haven't had any tasks that required userspace context switching.</li>\n</ul>\n<p>Fork is not used for parallelization.</p>\n<p><strong>8.</strong> Syncing threads.</p>\n<p>Often it is possible to make different threads use different memory cells (even better: different cache lines,) and to not use any thread synchronization (except <code>joinAll</code>).</p>\n<p>If synchronization is required, in most cases, it is sufficient to use mutex under <code>lock_guard</code>.</p>\n<p>In other cases use system synchronization primitives. Do not use busy wait.</p>\n<p>Atomic operations should be used only in the simplest cases.</p>\n<p>Do not try to implement lock-free data structures unless it is your primary area of expertise.</p>\n<p><strong>9.</strong> Pointers vs references.</p>\n<p>In most cases, prefer references.</p>\n<p><strong>10.</strong> const.</p>\n<p>Use constant references, pointers to constants, <code>const_iterator</code>, and const methods.</p>\n<p>Consider <code>const</code> to be default and use non-<code>const</code> only when necessary.</p>\n<p>When passing variables by value, using <code>const</code> usually does not make sense.</p>\n<p><strong>11.</strong> unsigned.</p>\n<p>Use <code>unsigned</code> if necessary.</p>\n<p><strong>12.</strong> Numeric types.</p>\n<p>Use the types <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>, <code>UInt64</code>, <code>Int8</code>, <code>Int16</code>, <code>Int32</code>, and <code>Int64</code>, as well as <code>size_t</code>, <code>ssize_t</code>, and <code>ptrdiff_t</code>.</p>\n<p>Don't use these types for numbers: <code>signed/unsigned long</code>, <code>long long</code>, <code>short</code>, <code>signed/unsigned char</code>, <code>char</code>.</p>\n<p><strong>13.</strong> Passing arguments.</p>\n<p>Pass complex values by reference (including <code>std::string</code>).</p>\n<p>If a function captures ownership of an object created in the heap, make the argument type <code>shared_ptr</code> or <code>unique_ptr</code>.</p>\n<p><strong>14.</strong> Return values.</p>\n<p>In most cases, just use <code>return</code>. Do not write <code>[return std::move(res)]{.strike}</code>.</p>\n<p>If the function allocates an object on heap and returns it, use <code>shared_ptr</code> or <code>unique_ptr</code>.</p>\n<p>In rare cases you might need to return the value via an argument. In this case, the argument should be a reference.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">using</span> <span class=\"n\">AggregateFunctionPtr</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">IAggregateFunction</span><span class=\"o\">&gt;</span><span class=\"p\">;</span>\n\n<span class=\"cm\">/** Allows creating an aggregate function by its name.</span>\n<span class=\"cm\">  */</span>\n<span class=\"k\">class</span> <span class=\"nc\">AggregateFunctionFactory</span>\n<span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:</span>\n    <span class=\"n\">AggregateFunctionFactory</span><span class=\"p\">();</span>\n    <span class=\"n\">AggregateFunctionPtr</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">String</span> <span class=\"o\">&amp;</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"k\">const</span> <span class=\"n\">DataTypes</span> <span class=\"o\">&amp;</span> <span class=\"n\">argument_types</span><span class=\"p\">)</span> <span class=\"k\">const</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p><strong>15.</strong> namespace.</p>\n<p>There is no need to use a separate <code>namespace</code> for application code.</p>\n<p>Small libraries don't need this, either.</p>\n<p>For medium to large libraries, put everything in a <code>namespace</code>.</p>\n<p>In the library's <code>.h</code> file, you can use <code>namespace detail</code> to hide implementation details not needed for the application code.</p>\n<p>In a <code>.cpp</code> file, you can use a <code>static</code> or anonymous namespace to hide symbols.</p>\n<p>Also, a <code>namespace</code> can be used for an <code>enum</code> to prevent the corresponding names from falling into an external <code>namespace</code> (but it's better to use an <code>enum class</code>).</p>\n<p><strong>16.</strong> Deferred initialization.</p>\n<p>If arguments are required for initialization, then you normally shouldn't write a default constructor.</p>\n<p>If later you\u2019ll need to delay initialization, you can add a default constructor that will create an invalid object. Or, for a small number of objects, you can use <code>shared_ptr/unique_ptr</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Loader</span><span class=\"p\">(</span><span class=\"n\">DB</span><span class=\"o\">::</span><span class=\"n\">Connection</span> <span class=\"o\">*</span> <span class=\"n\">connection_</span><span class=\"p\">,</span> <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span> <span class=\"n\">query</span><span class=\"p\">,</span> <span class=\"kt\">size_t</span> <span class=\"n\">max_block_size_</span><span class=\"p\">);</span>\n\n<span class=\"c1\">/// For deferred initialization</span>\n<span class=\"n\">Loader</span><span class=\"p\">()</span> <span class=\"p\">{}</span>\n</code></pre></div>\n\n\n<p><strong>17.</strong> Virtual functions.</p>\n<p>If the class is not intended for polymorphic use, you do not need to make functions virtual. This also applies to the destructor.</p>\n<p><strong>18.</strong> Encodings.</p>\n<p>Use UTF-8 everywhere. Use <code>std::string</code>and<code>char *</code>. Do not use <code>std::wstring</code>and<code>wchar_t</code>.</p>\n<p><strong>19.</strong> Logging.</p>\n<p>See the examples everywhere in the code.</p>\n<p>Before committing, delete all meaningless and debug logging, and any other types of debug output.</p>\n<p>Logging in cycles should be avoided, even on the Trace level.</p>\n<p>Logs must be readable at any logging level.</p>\n<p>Logging should only be used in application code, for the most part.</p>\n<p>Log messages must be written in English.</p>\n<p>The log should preferably be understandable for the system administrator.</p>\n<p>Do not use profanity in the log.</p>\n<p>Use UTF-8 encoding in the log. In rare cases you can use non-ASCII characters in the log.</p>\n<p><strong>20.</strong> Input-output.</p>\n<p>Don't use <code>iostreams</code> in internal cycles that are critical for application performance (and never use <code>stringstream</code>).</p>\n<p>Use the <code>DB/IO</code> library instead.</p>\n<p><strong>21.</strong> Date and time.</p>\n<p>See the <code>DateLUT</code> library.</p>\n<p><strong>22.</strong> include.</p>\n<p>Always use <code>#pragma once</code> instead of include guards.</p>\n<p><strong>23.</strong> using.</p>\n<p><code>using namespace</code> is not used. You can use <code>using</code> with something specific. But make it local inside a class or function.</p>\n<p><strong>24.</strong> Do not use <code>trailing return type</code> for functions unless necessary.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">[</span><span class=\"k\">auto</span> <span class=\"n\">f</span><span class=\"p\">()</span> <span class=\"o\">-&amp;</span><span class=\"n\">gt</span><span class=\"p\">;</span> <span class=\"kt\">void</span><span class=\"p\">;]{.</span><span class=\"n\">strike</span><span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p><strong>25.</strong> Declaration and initialization of variables.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">//right way</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"s\">&quot;Hello&quot;</span><span class=\"p\">;</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">s</span><span class=\"p\">{</span><sp");
            
            document.write("an class=\"s\">&quot;Hello&quot;</span><span class=\"p\">};</span>\n\n<span class=\"c1\">//wrong way</span>\n<span class=\"k\">auto</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">{</span><span class=\"s\">&quot;Hello&quot;</span><span class=\"p\">};</span>\n</code></pre></div>\n\n\n<p><strong>26.</strong> For virtual functions, write <code>virtual</code> in the base class, but write <code>override</code> instead of <code>virtual</code> in descendent classes.</p>\n<h3 id=\"unused-features-of-c\">Unused Features of C++<a class=\"headerlink\" href=\"#unused-features-of-c\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> Virtual inheritance is not used.</p>\n<p><strong>2.</strong> Exception specifiers from C++03 are not used.</p>\n<h3 id=\"platform\">Platform<a class=\"headerlink\" href=\"#platform\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> We write code for a specific platform.</p>\n<p>But other things being equal, cross-platform or portable code is preferred.</p>\n<p><strong>2.</strong> Language: C++17.</p>\n<p><strong>3.</strong> Compiler: <code>gcc</code>. At this time (December 2017), the code is compiled using version 7.2. (It can also be compiled using <code>clang 4</code>.)</p>\n<p>The standard library is used (<code>libstdc++</code> or <code>libc++</code>).</p>\n<p><strong>4.</strong>OS: Linux Ubuntu, not older than Precise.</p>\n<p><strong>5.</strong>Code is written for x86_64 CPU architecture.</p>\n<p>The CPU instruction set is the minimum supported set among our servers. Currently, it is SSE 4.2.</p>\n<p><strong>6.</strong> Use <code>-Wall -Wextra -Werror</code> compilation flags.</p>\n<p><strong>7.</strong> Use static linking with all libraries except those that are difficult to connect to statically (see the output of the <code>ldd</code> command).</p>\n<p><strong>8.</strong> Code is developed and debugged with release settings.</p>\n<h3 id=\"tools\">Tools<a class=\"headerlink\" href=\"#tools\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> KDevelop is a good IDE.</p>\n<p><strong>2.</strong> For debugging, use <code>gdb</code>, <code>valgrind</code> (<code>memcheck</code>), <code>strace</code>, <code>-fsanitize=...</code>, or <code>tcmalloc_minimal_debug</code>.</p>\n<p><strong>3.</strong> For profiling, use <code>Linux Perf</code>, <code>valgrind</code> (<code>callgrind</code>), or <code>strace -cf</code>.</p>\n<p><strong>4.</strong> Sources are in Git.</p>\n<p><strong>5.</strong> Assembly uses <code>CMake</code>.</p>\n<p><strong>6.</strong> Programs are released using <code>deb</code> packages.</p>\n<p><strong>7.</strong> Commits to master must not break the build.</p>\n<p>Though only selected revisions are considered workable.</p>\n<p><strong>8.</strong> Make commits as often as possible, even if the code is only partially ready.</p>\n<p>Use branches for this purpose.</p>\n<p>If your code in the <code>master</code> branch is not buildable yet, exclude it from the build before the <code>push</code>. You'll need to finish it or remove it within a few days.</p>\n<p><strong>9.</strong> For non-trivial changes, use branches and publish them on the server.</p>\n<p><strong>10.</strong> Unused code is removed from the repository.</p>\n<h3 id=\"libraries\">Libraries<a class=\"headerlink\" href=\"#libraries\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> The C++14 standard library is used (experimental extensions are allowed), as well as <code>boost</code> and <code>Poco</code> frameworks.</p>\n<p><strong>2.</strong> If necessary, you can use any well-known libraries available in the OS package.</p>\n<p>If there is a good solution already available, then use it, even if it means you have to install another library.</p>\n<p>(But be prepared to remove bad libraries from code.)</p>\n<p><strong>3.</strong> You can install a library that isn't in the packages, if the packages don't have what you need or have an outdated version or the wrong type of compilation.</p>\n<p><strong>4.</strong> If the library is small and doesn't have its own complex build system, put the source files in the <code>contrib</code> folder.</p>\n<p><strong>5.</strong> Preference is always given to libraries that are already in use.</p>\n<h3 id=\"general-recommendations_1\">General Recommendations<a class=\"headerlink\" href=\"#general-recommendations_1\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> Write as little code as possible.</p>\n<p><strong>2.</strong> Try the simplest solution.</p>\n<p><strong>3.</strong> Don't write code until you know how it's going to work and how the inner loop will function.</p>\n<p><strong>4.</strong> In the simplest cases, use <code>using</code> instead of classes or structs.</p>\n<p><strong>5.</strong> If possible, do not write copy constructors, assignment operators, destructors (other than a virtual one, if the class contains at least one virtual function), move constructors or move assignment operators. In other words, the compiler-generated functions must work correctly. You can use <code>default</code>.</p>\n<p><strong>6.</strong> Code simplification is encouraged. Reduce the size of your code where possible.</p>\n<h3 id=\"additional-recommendations\">Additional Recommendations<a class=\"headerlink\" href=\"#additional-recommendations\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>1.</strong> Explicitly specifying <code>std::</code> for types from <code>stddef.h</code></p>\n<p>is not recommended. In other words, we recommend writing <code>size_t</code> instead <code>std::size_t</code>, because it's shorter.</p>\n<p>It is acceptable to add <code>std::</code>.</p>\n<p><strong>2.</strong> Explicitly specifying <code>std::</code> for functions from the standard C library</p>\n<p>is not recommended. In other words, write <code>memcpy</code> instead of <code>std::memcpy</code>.</p>\n<p>The reason is that there are similar non-standard functions, such as <code>memmem</code>. We do use these functions on occasion. These functions do not exist in <code>namespace std</code>.</p>\n<p>If you write <code>std::memcpy</code> instead of <code>memcpy</code> everywhere, then <code>memmem</code> without <code>std::</code> will look strange.</p>\n<p>Nevertheless, you can still use <code>std::</code> if you prefer it.</p>\n<p><strong>3.</strong> Using functions from C when the same ones are available in the standard C++ library.</p>\n<p>This is acceptable if it is more efficient.</p>\n<p>For example, use <code>memcpy</code> instead of <code>std::copy</code> for copying large chunks of memory.</p>\n<p><strong>4.</strong> Multiline function arguments.</p>\n<p>Any of the following wrapping styles are allowed:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span>\n  <span class=\"n\">T1</span> <span class=\"n\">x1</span><span class=\"p\">,</span>\n  <span class=\"n\">T2</span> <span class=\"n\">x2</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span>\n  <span class=\"kt\">size_t</span> <span class=\"n\">left</span><span class=\"p\">,</span> <span class=\"kt\">size_t</span> <span class=\"n\">right</span><span class=\"p\">,</span>\n  <span class=\"k\">const</span> <span class=\"o\">&amp;</span> <span class=\"n\">RangesInDataParts</span> <span class=\"n\">ranges</span><span class=\"p\">,</span>\n  <span class=\"kt\">size_t</span> <span class=\"n\">limit</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"kt\">size_t</span> <span class=\"n\">left</span><span class=\"p\">,</span> <span class=\"kt\">size_t</span> <span class=\"n\">right</span><span class=\"p\">,</span>\n  <span class=\"k\">const</span> <span class=\"o\">&amp;</span> <span class=\"n\">RangesInDataParts</span> <span class=\"n\">ranges</span><span class=\"p\">,</span>\n  <span class=\"kt\">size_t</span> <span class=\"n\">limit</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"kt\">size_t</span> <span class=\"n\">left</span><span class=\"p\">,</span> <span class=\"kt\">size_t</span> <span class=\"n\">right</span><span class=\"p\">,</span>\n      <span class=\"k\">const</span> <span class=\"o\">&amp;</span> <span class=\"n\">RangesInDataParts</span> <span class=\"n\">ranges</span><span class=\"p\">,</span>\n      <span class=\"kt\">size_t</span> <span class=\"n\">limit</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">function</span><span class=\"p\">(</span>\n      <span class=\"kt\">size_t</span> <span class=\"n\">left</span><span class=\"p\">,</span>\n      <span class=\"kt\">size_t</span> <span class=\"n\">right</span><span class=\"p\">,</span>\n      <span class=\"k\">const</span> <span class=\"o\">&amp;</span> <span class=\"n\">RangesInDataParts</span> <span class=\"n\">ranges</span><span class=\"p\">,</span>\n      <span class=\"kt\">size_t</span> <span class=\"n\">limit</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p><a name=\"development/tests/\"></a><a name=\"../../../../../development/tests/\"></a><a name=\"tests/\"></a><a name=\"../../../development/tests/\"></a><a name=\"../development/tests/\"></a><a name=\"../../development/tests/\"></a><a name=\"../../../../development/tests/\"></a></p>\n<h2 id=\"clickhouse-testing\">ClickHouse Testing<a class=\"headerlink\" href=\"#clickhouse-testing\" title=\"Permanent link\">&para;</a></h2>\n<h3 id=\"functional-tests\">Functional Tests<a class=\"headerlink\" href=\"#functional-tests\" title=\"Permanent link\">&para;</a></h3>\n<p>Functional tests are the most simple and convenient to use. Most of ClickHouse features can be tested with functional tests and they are mandatory to use for every change in ClickHouse code that can be tested that way.</p>\n<p>Each functional test sends one or multiple queries to the running ClickHouse server and compares the result with reference.</p>\n<p>Tests are located in <code>dbms/tests/queries</code> directory. There are two subdirectories: <code>stateless</code> and <code>stateful</code>. Stateless tests run queries without any prelo");
            
            document.write("aded test data - they often create small synthetic datasets on the fly, within the test itself. Stateful tests require preloaded test data from Yandex.Metrica and not available to general public. We tend to use only <code>stateless</code> tests and avoid adding new <code>stateful</code> tests.</p>\n<p>Each test can be one of two types: <code>.sql</code> and <code>.sh</code>. <code>.sql</code> test is the simple SQL script that is piped to <code>clickhouse-client --multiquery --testmode</code>. <code>.sh</code> test is a script that is run by itself.</p>\n<p>To run all tests, use <code>dbms/tests/clickhouse-test</code> tool. Look <code>--help</code> for the list of possible options. You can simply run all tests or run subset of tests filtered by substring in test name: <code>./clickhouse-test substring</code>.</p>\n<p>The most simple way to invoke functional tests is to copy <code>clickhouse-client</code> to <code>/usr/bin/</code>, run <code>clickhouse-server</code> and then run <code>./clickhouse-test</code> from its own directory.</p>\n<p>To add new test, create a <code>.sql</code> or <code>.sh</code> file in <code>dbms/tests/queries/0_stateless</code> directory, check it manually and then generate <code>.reference</code> file in the following way: <code>clickhouse-client -n --testmode &lt; 00000_test.sql &gt; 00000_test.reference</code> or <code>./00000_test.sh &gt; ./00000_test.reference</code>.</p>\n<p>Tests should use (create, drop, etc) only tables in <code>test</code> database that is assumed to be created beforehand; also tests can use temporary tables.</p>\n<p>If you want to use distributed queries in functional tests, you can leverage <code>remote</code> table function with <code>127.0.0.{1..2}</code> addresses for the server to query itself; or you can use predefined test clusters in server configuration file like <code>test_shard_localhost</code>.</p>\n<p>Some tests are marked with <code>zookeeper</code>, <code>shard</code> or <code>long</code> in their names.<br />\n<code>zookeeper</code> is for tests that are using ZooKeeper. <code>shard</code> is for tests that<br />\nrequires server to listen <code>127.0.0.*</code>; <code>distributed</code> or <code>global</code> have the same<br />\nmeaning. <code>long</code> is for tests that run slightly longer that one second. You can<br />\ndisable these groups of tests using <code>--no-zookeeper</code>, <code>--no-shard</code> and<br />\n<code>--no-long</code> options, respectively.</p>\n<h3 id=\"known-bugs\">Known bugs<a class=\"headerlink\" href=\"#known-bugs\" title=\"Permanent link\">&para;</a></h3>\n<p>If we know some bugs that can be easily reproduced by functional tests, we place prepared functional tests in <code>dbms/tests/queries/bugs</code> directory. These tests will be moved to <code>dbms/tests/queries/0_stateless</code> when bugs are fixed.</p>\n<h3 id=\"integration-tests\">Integration Tests<a class=\"headerlink\" href=\"#integration-tests\" title=\"Permanent link\">&para;</a></h3>\n<p>Integration tests allow to test ClickHouse in clustered configuration and ClickHouse interaction with other servers like MySQL, Postgres, MongoDB. They are useful to emulate network splits, packet drops, etc. These tests are run under Docker and create multiple containers with various software.</p>\n<p>See <code>dbms/tests/integration/README.md</code> on how to run these tests.</p>\n<p>Note that integration of ClickHouse with third-party drivers is not tested. Also we currently don't have integration tests with our JDBC and ODBC drivers.</p>\n<h3 id=\"unit-tests\">Unit Tests<a class=\"headerlink\" href=\"#unit-tests\" title=\"Permanent link\">&para;</a></h3>\n<p>Unit tests are useful when you want to test not the ClickHouse as a whole, but a single isolated library or class. You can enable or disable build of tests with <code>ENABLE_TESTS</code> CMake option. Unit tests (and other test programs) are located in <code>tests</code> subdirectories across the code. To run unit tests, type <code>ninja test</code>. Some tests use <code>gtest</code>, but some are just programs that return non-zero exit code on test failure.</p>\n<p>It's not necessarily to have unit tests if the code is already covered by functional tests (and functional tests are usually much more simple to use).</p>\n<h3 id=\"performance-tests\">Performance Tests<a class=\"headerlink\" href=\"#performance-tests\" title=\"Permanent link\">&para;</a></h3>\n<p>Performance tests allow to measure and compare performance of some isolated part of ClickHouse on synthetic queries. Tests are located at <code>dbms/tests/performance</code>. Each test is represented by <code>.xml</code> file with description of test case. Tests are run with <code>clickhouse performance-test</code> tool (that is embedded in <code>clickhouse</code> binary). See <code>--help</code> for invocation.</p>\n<p>Each test run one or miltiple queries (possibly with combinations of parameters) in a loop with some conditions for stop (like \"maximum execution speed is not changing in three seconds\") and measure some metrics about query performance (like \"maximum execution speed\"). Some tests can contain preconditions on preloaded test dataset.</p>\n<p>If you want to improve performance of ClickHouse in some scenario, and if improvements can be observed on simple queries, it is highly recommended to write a performance test. It always makes sense to use <code>perf top</code> or other perf tools during your tests.</p>\n<h3 id=\"test-tools-and-scripts\">Test Tools And Scripts<a class=\"headerlink\" href=\"#test-tools-and-scripts\" title=\"Permanent link\">&para;</a></h3>\n<p>Some programs in <code>tests</code> directory are not prepared tests, but are test tools. For example, for <code>Lexer</code> there is a tool <code>dbms/src/Parsers/tests/lexer</code> that just do tokenization of stdin and writes colorized result to stdout. You can use these kind of tools as a code examples and for exploration and manual testing.</p>\n<p>You can also place pair of files <code>.sh</code> and <code>.reference</code> along with the tool to run it on some predefined input - then script result can be compared to <code>.reference</code> file. These kind of tests are not automated.</p>\n<h3 id=\"miscellanous-tests\">Miscellanous Tests<a class=\"headerlink\" href=\"#miscellanous-tests\" title=\"Permanent link\">&para;</a></h3>\n<p>There are tests for external dictionaries located at <code>dbms/tests/external_dictionaries</code> and for machine learned models in <code>dbms/tests/external_models</code>. These tests are not updated and must be transferred to integration tests.</p>\n<p>There is separate test for quorum inserts. This test run ClickHouse cluster on separate servers and emulate various failure cases: network split, packet drop (between ClickHouse nodes, between ClickHouse and ZooKeeper, between ClickHouse server and client, etc.), <code>kill -9</code>, <code>kill -STOP</code> and <code>kill -CONT</code> , like <a href=\"https://aphyr.com/tags/Jepsen\" rel=\"external nofollow noreferrer\">Jepsen</a>. Then the test checks that all acknowledged inserts was written and all rejected inserts was not.</p>\n<p>Quorum test was written by separate team before ClickHouse was open-sourced. This team no longer work with ClickHouse. Test was accidentially written in Java. For these reasons, quorum test must be rewritten and moved to integration tests.</p>\n<h3 id=\"manual-testing\">Manual Testing<a class=\"headerlink\" href=\"#manual-testing\" title=\"Permanent link\">&para;</a></h3>\n<p>When you develop a new feature, it is reasonable to also test it manually. You can do it with the following steps:</p>\n<p>Build ClickHouse. Run ClickHouse from the terminal: change directory to <code>dbms/src/programs/clickhouse-server</code> and run it with <code>./clickhouse-server</code>. It will use configuration (<code>config.xml</code>, <code>users.xml</code> and files within <code>config.d</code> and <code>users.d</code> directories) from the current directory by default. To connect to ClickHouse server, run <code>dbms/src/programs/clickhouse-client/clickhouse-client</code>.</p>\n<p>Note that all clickhouse tools (server, client, etc) are just symlinks to a single binary named <code>clickhouse</code>. You can find this binary at <code>dbms/src/programs/clickhouse</code>. All tools can also be invoked as <code>clickhouse tool</code> instead of <code>clickhouse-tool</code>.</p>\n<p>Alternatively you can install ClickHouse package: either stable release from Yandex repository or you can build package for yourself with <code>./release</code> in ClickHouse sources root. Then start the server with <code>sudo service clickhouse-server start</code> (or stop to stop the server). Look for logs at <code>/etc/clickhouse-server/clickhouse-server.log</code>.</p>\n<p>When ClickHouse is already installed on your system, you can build a new <code>clickhouse</code> binary and replace the existing binary:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo service clickhouse-server stop\n$ sudo cp ./clickhouse /usr/bin/\n$ sudo service clickhouse-server start\n</code></pre></div>\n\n\n<p>Also you can stop system clickhouse-server and run your own with the same configuration but with logging to terminal:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo service clickhouse-server stop\n$ sudo -u clickhouse /usr/bin/clickhouse server --config-file /etc/clickhouse-server/config.xml\n</code></pre></div>\n\n\n<p>Example with gdb:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sudo -u clickhouse gdb --args /usr/bin/clickhouse server --config-file /etc/clickhouse-server/config.xml\n</code></pre></div>\n\n\n<p>If the system clickhouse-server is already running and you don't want to stop it, you can change port numbers in your <code>config.xml</code> (or override them in a file in <code>config.d</code> directory), provide appropriate data path, and run it.</p>\n<p><code>clickhouse</code> binary has almost no dependencies and works across wide range of Linux distributions. To quick and dirty test your changes on a server, you can simply <code>scp</code> your fresh built <code>clickhouse</code> binary to your server and then run it as in examples above.</p>\n<h3 id=\"testing-environment\">Testing Environment<a class=\"headerlink\" href=\"#");
            
            document.write("testing-environment\" title=\"Permanent link\">&para;</a></h3>\n<p>Before publishing release as stable we deploy it on testing environment. Testing environment is a cluster that process 1/39 part of <a href=\"https://metrica.yandex.com/\" rel=\"external nofollow noreferrer\">Yandex.Metrica</a> data. We share our testing environment with Yandex.Metrica team. ClickHouse is upgraded without downtime on top of existing data. We look at first that data is processed successfully without lagging from realtime, the replication continue to work and there is no issues visible to Yandex.Metrica team. First check can be done in the following way:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">SELECT</span> <span class=\"n\">hostName</span><span class=\"p\">()</span> <span class=\"k\">AS</span> <span class=\"n\">h</span><span class=\"p\">,</span> <span class=\"k\">any</span><span class=\"p\">(</span><span class=\"k\">version</span><span class=\"p\">()),</span> <span class=\"k\">any</span><span class=\"p\">(</span><span class=\"n\">uptime</span><span class=\"p\">()),</span> <span class=\"k\">max</span><span class=\"p\">(</span><span class=\"n\">UTCEventTime</span><span class=\"p\">),</span> <span class=\"k\">count</span><span class=\"p\">()</span> <span class=\"k\">FROM</span> <span class=\"n\">remote</span><span class=\"p\">(</span><span class=\"s1\">&#39;example01-01-{1..3}t&#39;</span><span class=\"p\">,</span> <span class=\"n\">merge</span><span class=\"p\">,</span> <span class=\"n\">hits</span><span class=\"p\">)</span> <span class=\"k\">WHERE</span> <span class=\"n\">EventDate</span> <span class=\"o\">&gt;=</span> <span class=\"n\">today</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"mi\">2</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">h</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">h</span><span class=\"p\">;</span>\n</code></pre></div>\n\n\n<p>In some cases we also deploy to testing environment of our friend teams in Yandex: Market, Cloud, etc. Also we have some hardware servers that are used for development purposes.</p>\n<h3 id=\"load-testing\">Load Testing<a class=\"headerlink\" href=\"#load-testing\" title=\"Permanent link\">&para;</a></h3>\n<p>After deploying to testing environment we run load testing with queries from production cluster. This is done manually.</p>\n<p>Make sure you have enabled <code>query_log</code> on your production cluster.</p>\n<p>Collect query log for a day or more:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse-client --query<span class=\"o\">=</span><span class=\"s2\">&quot;SELECT DISTINCT query FROM system.query_log WHERE event_date = today() AND query LIKE &#39;%ym:%&#39; AND query NOT LIKE &#39;%system.query_log%&#39; AND type = 2 AND is_initial_query&quot;</span> &gt; queries.tsv\n</code></pre></div>\n\n\n<p>This is a way complicated example. <code>type = 2</code> will filter queries that are executed successfully. <code>query LIKE '%ym:%'</code> is to select relevant queries from Yandex.Metrica. <code>is_initial_query</code> is to select only queries that are initiated by client, not by ClickHouse itself (as parts of distributed query processing).</p>\n<p><code>scp</code> this log to your testing cluster and run it as following:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ clickhouse benchmark --concurrency <span class=\"m\">16</span> &lt; queries.tsv\n</code></pre></div>\n\n\n<p>(probably you also want to specify a <code>--user</code>)</p>\n<p>Then leave it for a night or weekend and go take a rest.</p>\n<p>You should check that <code>clickhouse-server</code> doesn't crash, memory footprint is bounded and performance not degrading over time.</p>\n<p>Precise query execution timings are not recorded and not compared due to high variability of queries and environment.</p>\n<h3 id=\"build-tests\">Build Tests<a class=\"headerlink\" href=\"#build-tests\" title=\"Permanent link\">&para;</a></h3>\n<p>Build tests allow to check that build is not broken on various alternative configurations and on some foreign systems. Tests are located at <code>ci</code> directory. They run build from source inside Docker, Vagrant, and sometimes with <code>qemu-user-static</code> inside Docker. These tests are under development and test runs are not automated.</p>\n<p>Motivation:</p>\n<p>Normally we release and run all tests on a single variant of ClickHouse build. But there are alternative build variants that are not thoroughly tested. Examples:</p>\n<ul>\n<li>build on FreeBSD;</li>\n<li>build on Debian with libraries from system packages;</li>\n<li>build with shared linking of libraries;</li>\n<li>build on AArch64 platform;</li>\n<li>build on PowerPc platform.</li>\n</ul>\n<p>For example, build with system packages is bad practice, because we cannot guarantee what exact version of packages a system will have. But this is really needed by Debian maintainers. For this reason we at least have to support this variant of build. Another example: shared linking is a common source of trouble, but it is needed for some enthusiasts.</p>\n<p>Though we cannot run all tests on all variant of builds, we want to check at least that various build variants are not broken. For this purpose we use build tests.</p>\n<h3 id=\"testing-for-protocol-compatibility\">Testing For Protocol Compatibility<a class=\"headerlink\" href=\"#testing-for-protocol-compatibility\" title=\"Permanent link\">&para;</a></h3>\n<p>When we extend ClickHouse network protocol, we test manually that old clickhouse-client works with new clickhouse-server and new clickhouse-client works with old clickhouse-server (simply by running binaries from corresponding packages).</p>\n<h3 id=\"help-from-the-compiler\">Help From The Compiler<a class=\"headerlink\" href=\"#help-from-the-compiler\" title=\"Permanent link\">&para;</a></h3>\n<p>Main ClickHouse code (that is located in <code>dbms</code> directory) is built with <code>-Wall -Wextra -Werror</code> and with some additional enabled warnings. Although these options are not enabled for third-party libraries.</p>\n<p>Clang has even more useful warnings - you can look for them with <code>-Weverything</code> and pick something to default build.</p>\n<p>For production builds, gcc is used (it still generates slightly more efficient code than clang). For development, clang is usually more convenient to use. You can build on your own machine with debug mode (to save battery of your laptop), but please note that compiler is able to generate more warnings with <code>-O3</code> due to better control flow and inter-procedure analysis. When building with clang, <code>libc++</code> is used instead of <code>libstdc++</code> and when building with debug mode, debug version of <code>libc++</code> is used that allows to catch more errors at runtime.</p>\n<h3 id=\"sanitizers\">Sanitizers<a class=\"headerlink\" href=\"#sanitizers\" title=\"Permanent link\">&para;</a></h3>\n<p><strong>Address sanitizer</strong>.<br />\nWe run functional and integration tests under ASan on per-commit basis.</p>\n<p><strong>Valgrind (Memcheck)</strong>.<br />\nWe run functional tests under Valgrind overnight. It takes multiple hours. Currently there is one known false positive in <code>re2</code> library, see <a href=\"https://research.swtch.com/sparse\" rel=\"external nofollow noreferrer\">this article</a>.</p>\n<p><strong>Undefined behaviour sanitizer.</strong><br />\nWe run functional and integration tests under ASan on per-commit basis.</p>\n<p><strong>Thread sanitizer</strong>.<br />\nWe run functional tests under TSan on per-commit basis. We still don't run integration tests under TSan on per-commit basis.</p>\n<p><strong>Memory sanitizer</strong>.<br />\nCurrently we still don't use MSan.</p>\n<p><strong>Debug allocator.</strong><br />\nDebug version of <code>jemalloc</code> is used for debug build.</p>\n<h3 id=\"fuzzing\">Fuzzing<a class=\"headerlink\" href=\"#fuzzing\" title=\"Permanent link\">&para;</a></h3>\n<p>We use simple fuzz test to generate random SQL queries and to check that the server doesn't die. Fuzz testing is performed with Address sanitizer. You can find it in <code>00746_sql_fuzzy.pl</code>. This test should be run continuously (overnight and longer).</p>\n<p>As of December 2018, we still don't use isolated fuzz testing of library code.</p>\n<h3 id=\"security-audit\">Security Audit<a class=\"headerlink\" href=\"#security-audit\" title=\"Permanent link\">&para;</a></h3>\n<p>People from Yandex Cloud department do some basic overview of ClickHouse capabilities from the security standpoint.</p>\n<h3 id=\"static-analyzers\">Static Analyzers<a class=\"headerlink\" href=\"#static-analyzers\" title=\"Permanent link\">&para;</a></h3>\n<p>We run <code>PVS-Studio</code> on per-commit basis. We have evaluated <code>clang-tidy</code>, <code>Coverity</code>, <code>cppcheck</code>, <code>PVS-Studio</code>, <code>tscancode</code>. You will find instructions for usage in <code>dbms/tests/instructions/</code> directory. Also you can read <a href=\"https://habr.com/company/yandex/blog/342018/\" rel=\"external nofollow noreferrer\">the article in russian</a>.</p>\n<p>If you use <code>CLion</code> as an IDE, you can leverage some <code>clang-tidy</code> checks out of the box.</p>\n<h3 id=\"hardening\">Hardening<a class=\"headerlink\" href=\"#hardening\" title=\"Permanent link\">&para;</a></h3>\n<p><code>FORTIFY_SOURCE</code> is used by default. It is almost useless, but still makes sense in rare cases and we don't disable it.</p>\n<h3 id=\"code-style\">Code Style<a class=\"headerlink\" href=\"#code-style\" title=\"Permanent link\">&para;</a></h3>\n<p>Code style rules are described <a href=\"https://clickhouse.yandex/docs/en/development/style/\" rel=\"external nofollow noreferrer\">here</a>.</p>\n<p>To check for some common style violations, you can use <code>utils/check-style</code> script.</p>\n<p>To force proper style of your code, you can use <code>clang-format</code>. File <code>.clang-format</code> is located at the sources root. It mostly corresponding with our actual code style. But it's not recommended to apply <code>clang-format</code> to existing files because it makes formatting worse. You can use <code>clang-format-diff</code> tool that you can find in clang source repository.</p>\n<p>Alternatively you can try <code>uncrustify</code> tool to reformat your code. Confi");
            
            document.write("guration is in <code>uncrustify.cfg</code> in the sources root. It is less tested than <code>clang-format</code>.</p>\n<p><code>CLion</code> has its own code formatter that has to be tuned for our code style.</p>\n<h3 id=\"metrica-b2b-tests\">Metrica B2B Tests<a class=\"headerlink\" href=\"#metrica-b2b-tests\" title=\"Permanent link\">&para;</a></h3>\n<p>Each ClickHouse release is tested with Yandex Metrica and AppMetrica engines. Testing and stable versions of ClickHouse are deployed on VMs and run with a small copy of Metrica engine that is processing fixed sample of input data. Then results of two instances of Metrica engine are compared together.</p>\n<p>These tests are automated by separate team. Due to high number of moving parts, tests are fail most of the time by completely unrelated reasons, that are very difficult to figure out. Most likely these tests have negative value for us. Nevertheless these tests was proved to be useful in about one or two times out of hundreds.</p>\n<h3 id=\"test-coverage\">Test Coverage<a class=\"headerlink\" href=\"#test-coverage\" title=\"Permanent link\">&para;</a></h3>\n<p>As of July 2018 we don't track test coverage.</p>\n<h3 id=\"test-automation\">Test Automation<a class=\"headerlink\" href=\"#test-automation\" title=\"Permanent link\">&para;</a></h3>\n<p>We run tests with Yandex internal CI and job automation system named \"Sandbox\".</p>\n<p>Build jobs and tests are run in Sandbox on per commit basis. Resulting packages and test results are published in GitHub and can be downloaded by direct links. Artifacts are stored eternally. When you send a pull request on GitHub, we tag it as \"can be tested\" and our CI system will build ClickHouse packages (release, debug, with address sanitizer, etc) for you.</p>\n<p>We don't use Travis CI due to the limit on time and computational power.<br />\nWe don't use Jenkins. It was used before and now we are happy we are not using Jenkins.</p>\n<p><a name=\"../development/contrib/\"></a><a name=\"development/contrib/\"></a><a name=\"../../../../../development/contrib/\"></a><a name=\"../../../../development/contrib/\"></a><a name=\"../../development/contrib/\"></a><a name=\"contrib/\"></a><a name=\"../../../development/contrib/\"></a></p>\n<h2 id=\"third-party-libraries-used\">Third-Party Libraries Used<a class=\"headerlink\" href=\"#third-party-libraries-used\" title=\"Permanent link\">&para;</a></h2>\n<table>\n<thead>\n<tr>\n<th>Library</th>\n<th>License</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>base64</td>\n<td><a href=\"https://github.com/aklomp/base64/blob/a27c565d1b6c676beaf297fe503c4518185666f7/LICENSE\" rel=\"external nofollow noreferrer\">BSD 2-Clause License</a></td>\n</tr>\n<tr>\n<td>boost</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/boost-extra/blob/6883b40449f378019aec792f9983ce3afc7ff16e/LICENSE_1_0.txt\" rel=\"external nofollow noreferrer\">Boost Software License 1.0</a></td>\n</tr>\n<tr>\n<td>brotli</td>\n<td><a href=\"https://github.com/google/brotli/blob/master/LICENSE\" rel=\"external nofollow noreferrer\">MIT</a></td>\n</tr>\n<tr>\n<td>capnproto</td>\n<td><a href=\"https://github.com/capnproto/capnproto/blob/master/LICENSE\" rel=\"external nofollow noreferrer\">MIT</a></td>\n</tr>\n<tr>\n<td>cctz</td>\n<td><a href=\"https://github.com/google/cctz/blob/4f9776a310f4952454636363def82c2bf6641d5f/LICENSE.txt\" rel=\"external nofollow noreferrer\">Apache License 2.0</a></td>\n</tr>\n<tr>\n<td>double-conversion</td>\n<td><a href=\"https://github.com/google/double-conversion/blob/cf2f0f3d547dc73b4612028a155b80536902ba02/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>FastMemcpy</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/libs/libmemcpy/impl/LICENSE\" rel=\"external nofollow noreferrer\">MIT</a></td>\n</tr>\n<tr>\n<td>googletest</td>\n<td><a href=\"https://github.com/google/googletest/blob/master/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>hyperscan</td>\n<td><a href=\"https://github.com/intel/hyperscan/blob/master/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>libbtrie</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/libbtrie/LICENSE\" rel=\"external nofollow noreferrer\">BSD 2-Clause License</a></td>\n</tr>\n<tr>\n<td>libcxxabi</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/libs/libglibc-compatibility/libcxxabi/LICENSE.TXT\" rel=\"external nofollow noreferrer\">BSD + MIT</a></td>\n</tr>\n<tr>\n<td>libdivide</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/libdivide/LICENSE.txt\" rel=\"external nofollow noreferrer\">Zlib License</a></td>\n</tr>\n<tr>\n<td>libgsasl</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/libgsasl/blob/3b8948a4042e34fb00b4fb987535dc9e02e39040/LICENSE\" rel=\"external nofollow noreferrer\">LGPL v2.1</a></td>\n</tr>\n<tr>\n<td>libhdfs3</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/libhdfs3/blob/bd6505cbb0c130b0db695305b9a38546fa880e5a/LICENSE.txt\" rel=\"external nofollow noreferrer\">Apache License 2.0</a></td>\n</tr>\n<tr>\n<td>libmetrohash</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/libmetrohash/LICENSE\" rel=\"external nofollow noreferrer\">Apache License 2.0</a></td>\n</tr>\n<tr>\n<td>libpcg-random</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/libpcg-random/LICENSE-APACHE.txt\" rel=\"external nofollow noreferrer\">Apache License 2.0</a></td>\n</tr>\n<tr>\n<td>libressl</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/ssl/blob/master/COPYING\" rel=\"external nofollow noreferrer\">OpenSSL License</a></td>\n</tr>\n<tr>\n<td>librdkafka</td>\n<td><a href=\"https://github.com/edenhill/librdkafka/blob/363dcad5a23dc29381cc626620e68ae418b3af19/LICENSE\" rel=\"external nofollow noreferrer\">BSD 2-Clause License</a></td>\n</tr>\n<tr>\n<td>libwidechar_width</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/libs/libwidechar_width/LICENSE\" rel=\"external nofollow noreferrer\">CC0 1.0 Universal</a></td>\n</tr>\n<tr>\n<td>llvm</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/llvm/blob/163def217817c90fb982a6daf384744d8472b92b/llvm/LICENSE.TXT\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>lz4</td>\n<td><a href=\"https://github.com/lz4/lz4/blob/c10863b98e1503af90616ae99725ecd120265dfb/LICENSE\" rel=\"external nofollow noreferrer\">BSD 2-Clause License</a></td>\n</tr>\n<tr>\n<td>mariadb-connector-c</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/mariadb-connector-c/blob/3.1/COPYING.LIB\" rel=\"external nofollow noreferrer\">LGPL v2.1</a></td>\n</tr>\n<tr>\n<td>murmurhash</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/murmurhash/LICENSE\" rel=\"external nofollow noreferrer\">Public Domain</a></td>\n</tr>\n<tr>\n<td>pdqsort</td>\n<td><a href=\"https://github.com/yandex/ClickHouse/blob/master/contrib/pdqsort/license.txt\" rel=\"external nofollow noreferrer\">Zlib License</a></td>\n</tr>\n<tr>\n<td>poco</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/poco/blob/fe5505e56c27b6ecb0dcbc40c49dc2caf4e9637f/LICENSE\" rel=\"external nofollow noreferrer\">Boost Software License - Version 1.0</a></td>\n</tr>\n<tr>\n<td>protobuf</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/protobuf/blob/12735370922a35f03999afff478e1c6d7aa917a4/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>re2</td>\n<td><a href=\"https://github.com/google/re2/blob/7cf8b88e8f70f97fd4926b56aa87e7f53b2717e0/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td>UnixODBC</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/UnixODBC/tree/b0ad30f7f6289c12b76f04bfb9d466374bb32168\" rel=\"external nofollow noreferrer\">LGPL v2.1</a></td>\n</tr>\n<tr>\n<td>zlib-ng</td>\n<td><a href=\"https://github.com/ClickHouse-Extras/zlib-ng/blob/develop/LICENSE.md\" rel=\"external nofollow noreferrer\">Zlib License</a></td>\n</tr>\n<tr>\n<td>zstd</td>\n<td><a href=\"https://github.com/facebook/zstd/blob/dev/LICENSE\" rel=\"external nofollow noreferrer\">BSD 3-Clause License</a></td>\n</tr>\n<tr>\n<td><a name=\"../../roadmap/\"></a><a name=\"../../../roadmap/\"></a><a name=\"../../../../../roadmap/\"></a><a name=\"../../../../roadmap/\"></a><a name=\"../roadmap/\"></a><a name=\"roadmap/\"></a></td>\n<td></td>\n</tr>\n<tr>\n<td>## Roadmap</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"q3-2019\">Q3 2019<a class=\"headerlink\" href=\"#q3-2019\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>DDL for dictionaries</li>\n<li>Integration with S3-like object stores</li>\n<li>Multiple storages for hot/cold data, JBOD support</li>\n</ul>\n<h3 id=\"q4-2019\">Q4 2019<a class=\"headerlink\" href=\"#q4-2019\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>JOIN not limited by available memory</li>\n<li>Resource pools for more precise distribution of cluster capacity between users</li>\n<li>Fine-grained authorization</li>\n<li>Integration with external authentication services</li>\n</ul>\n<p><a name=\"../../../../changelog/\"></a><a name=\"../../../../../changelog/\"></a><a name=\"../../../changelog/\"></a><a name=\"../../changelog/\"></a><a name=\"../changelog/\"></a><a name=\"changelog/\"></a></p>\n<h3 id=\"clickhouse-release-19-13-5-44-2019-09-20\">ClickHouse release 19.13.5.44, 2019-09-20<a class=\"headerlink\" href=\"#clickhouse-release-19-13-5-44-2019-09-20\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug fixes from 19.14.6.12.</li>\n<li>Fixed possible inconsistent state of table while executing <code>DROP</code> query for replicated table while zookeeper is not accessible. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6045\" rel=\"external nofollow noreferrer\">#6045</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6413\" rel=\"external nofollow noreferrer\">#6413</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n<li>Fix for data race in StorageMerge <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6717\" rel=\"external nofollow noreferrer\">#6717</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug introduced in query profiler which leads to ");
            
            document.write("endless recv from socket. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6386\" rel=\"external nofollow noreferrer\">#6386</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix excessive CPU usage while executing <code>JSONExtractRaw</code> function over a boolean value. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6208\" rel=\"external nofollow noreferrer\">#6208</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fixes the regression while pushing to materialized view. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6415\" rel=\"external nofollow noreferrer\">#6415</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Table function <code>url</code> had the vulnerability allowed the attacker to inject arbitrary HTTP headers in the request. This issue was found by <a href=\"https://github.com/NSTikhomirov\" rel=\"external nofollow noreferrer\">Nikita Tikhomirov</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6466\" rel=\"external nofollow noreferrer\">#6466</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix useless <code>AST</code> check in Set index. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6510\" rel=\"external nofollow noreferrer\">#6510</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6651\" rel=\"external nofollow noreferrer\">#6651</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Fixed parsing of <code>AggregateFunction</code> values embedded in query. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6575\" rel=\"external nofollow noreferrer\">#6575</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6773\" rel=\"external nofollow noreferrer\">#6773</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Fixed wrong behaviour of <code>trim</code> functions family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6647\" rel=\"external nofollow noreferrer\">#6647</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-14-6-12-2019-09-19\">ClickHouse release 19.14.6.12, 2019-09-19<a class=\"headerlink\" href=\"#clickhouse-release-19-14-6-12-2019-09-19\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_1\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix for function <code>\u0410rrayEnumerateUniqRanked</code> with empty arrays in params. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6928\" rel=\"external nofollow noreferrer\">#6928</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed subquery name in queries with <code>ARRAY JOIN</code> and <code>GLOBAL IN subquery</code> with alias. Use subquery alias for external table name if it is specified. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6934\" rel=\"external nofollow noreferrer\">#6934</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix <a href=\"https://clickhouse-test-reports.s3.yandex.net/6944/aab95fd5175a513413c7395a73a82044bdafb906/functional_stateless_tests_(debug).html\" rel=\"external nofollow noreferrer\">flapping</a> test <code>00715_fetch_merged_or_mutated_part_zookeeper</code> by rewriting it to a shell scripts because it needs to wait for mutations to apply. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6977\" rel=\"external nofollow noreferrer\">#6977</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander Kazakov</a>)</li>\n<li>Fixed UBSan and MemSan failure in function <code>groupUniqArray</code> with emtpy array argument. It was caused by placing of empty <code>PaddedPODArray</code> into hash table zero cell because constructor for zero cell value was not called. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6937\" rel=\"external nofollow noreferrer\">#6937</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-14-3-3-2019-09-10\">ClickHouse release 19.14.3.3, 2019-09-10<a class=\"headerlink\" href=\"#clickhouse-release-19-14-3-3-2019-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature\">New Feature<a class=\"headerlink\" href=\"#new-feature\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>WITH FILL</code> modifier for <code>ORDER BY</code>. (continuation of <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5069\" rel=\"external nofollow noreferrer\">#5069</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6610\" rel=\"external nofollow noreferrer\">#6610</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li><code>WITH TIES</code> modifier for <code>LIMIT</code>. (continuation of <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5069\" rel=\"external nofollow noreferrer\">#5069</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6610\" rel=\"external nofollow noreferrer\">#6610</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Parse unquoted <code>NULL</code> literal as NULL (if setting <code>format_csv_unquoted_null_literal_as_null=1</code>). Initialize null fields with default values if data type of this field is not nullable (if setting <code>input_format_null_as_default=1</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5990\" rel=\"external nofollow noreferrer\">#5990</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6055\" rel=\"external nofollow noreferrer\">#6055</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Support for wildcards in paths of table functions <code>file</code> and <code>hdfs</code>. If the path contains wildcards, the table will be readonly. Example of usage: <code>select * from hdfs('hdfs://hdfs1:9000/some_dir/another_dir/*/file{0..9}{0..9}')</code> and <code>select * from file('some_dir/{some_file,another_file,yet_another}.tsv', 'TSV', 'value UInt32')</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6092\" rel=\"external nofollow noreferrer\">#6092</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>New <code>system.metric_log</code> table which stores values of <code>system.events</code> and <code>system.metrics</code> with specified time interval. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6363\" rel=\"external nofollow noreferrer\">#6363</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6467\" rel=\"external nofollow noreferrer\">#6467</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6530\" rel=\"external nofollow noreferrer\">#6530</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow to write ClickHouse text logs to <code>system.text_log</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6037\" rel=\"external nofollow noreferrer\">#6037</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6103\" rel=\"external nofollow noreferrer\">#6103</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6164\" rel=\"external nofollow noreferrer\">#6164</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Show private symbols in stack traces (this is done via parsing symbol tables of ELF files). Added information about file and line number in stack traces if debug info is present. Speedup symbol name lookup with indexing symbols present in program. Added new SQL functions for introspection: <code>demangle</code> and <code>addressToLine</code>. Renamed function <code>symbolizeAddress</code> to <code>addressToSymbol</code> for consistency. Function <code>addressToSymbol</code> will return mangled name for performance reasons and you have to apply <code>demangle</code>. Added setting <code>allow_introspection_functions</code> which is turned off by default. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6201\" rel=\"external nofollow noreferrer\">#6201</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Table function <code>values</code> (the name is case-insensitive). It allows to read from <code>VALUES</code> list proposed in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5984\" rel=\"external nofollow noreferrer\">#5984</a>. Example: <code>SELECT * FROM VALUES('a UInt64, s String', (1, 'one'), (2, 'two'), (3, 'three'))</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6217\" rel=\"external nofollow noreferrer\">#6217</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6209\" rel=\"external nofollow noreferrer\">#6209</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Added an ability to alter storage settings. Syntax: <code>ALTER TABLE &lt;table&gt; MODIFY SETTING &lt;setting&gt; = &lt;value&gt;</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6366\" rel=\"external nofollow noreferrer\">#6366</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6669\" rel=\"external nofollow noreferrer\">#6669</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6685\" rel=\"external nofollow noreferrer\">#6685</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Support for removing of detached parts. Syntax: <code>ALTER TABLE &lt;table_name&gt; DROP DETACHED PART '&lt;part_id&gt;'</code>.");
            
            document.write(" <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6158\" rel=\"external nofollow noreferrer\">#6158</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Table constraints. Allows to add constraint to table definition which will be checked at insert. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5273\" rel=\"external nofollow noreferrer\">#5273</a> (<a href=\"https://github.com/NanoBjorn\" rel=\"external nofollow noreferrer\">Gleb Novikov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6652\" rel=\"external nofollow noreferrer\">#6652</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Suppport for cascaded materialized views. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6324\" rel=\"external nofollow noreferrer\">#6324</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Turn on query profiler by default to sample every query execution thread once a second. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6283\" rel=\"external nofollow noreferrer\">#6283</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Input format <code>ORC</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6454\" rel=\"external nofollow noreferrer\">#6454</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6703\" rel=\"external nofollow noreferrer\">#6703</a> (<a href=\"https://github.com/akonyaev90\" rel=\"external nofollow noreferrer\">akonyaev90</a>)</li>\n<li>Added two new functions: <code>sigmoid</code> and <code>tanh</code> (that are useful for machine learning applications). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6254\" rel=\"external nofollow noreferrer\">#6254</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Function <code>hasToken(haystack, token)</code>, <code>hasTokenCaseInsensitive(haystack, token)</code> to check if given token is in haystack. Token is a maximal length substring between two non alphanumeric ASCII characters (or boundaries of haystack). Token must be a constant string. Supported by tokenbf_v1 index specialization. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6596\" rel=\"external nofollow noreferrer\">#6596</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6662\" rel=\"external nofollow noreferrer\">#6662</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>New function <code>neighbor(value, offset[, default_value])</code>. Allows to reach prev/next value within column in a block of data. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5925\" rel=\"external nofollow noreferrer\">#5925</a> (<a href=\"https://github.com/alex-krash\" rel=\"external nofollow noreferrer\">Alex Krash</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/commit/6685365ab8c5b74f9650492c88a012596eb1b0c6\" rel=\"external nofollow noreferrer\">6685365ab8c5b74f9650492c88a012596eb1b0c6</a> <a href=\"https://github.com/ClickHouse/ClickHouse/commit/341e2e4587a18065c2da1ca888c73389f48ce36c\" rel=\"external nofollow noreferrer\">341e2e4587a18065c2da1ca888c73389f48ce36c</a> <a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">Alexey Milovidov</a></li>\n<li>Created a function <code>currentUser()</code>, returning login of authorized user. Added alias <code>user()</code> for compatibility with MySQL. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6470\" rel=\"external nofollow noreferrer\">#6470</a> (<a href=\"https://github.com/alex-krash\" rel=\"external nofollow noreferrer\">Alex Krash</a>)</li>\n<li>New aggregate functions <code>quantilesExactInclusive</code> and <code>quantilesExactExclusive</code> which were proposed in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5885\" rel=\"external nofollow noreferrer\">#5885</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6477\" rel=\"external nofollow noreferrer\">#6477</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Function <code>bitmapRange(bitmap, range_begin, range_end)</code> which returns new set with specified range (not include the <code>range_end</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6314\" rel=\"external nofollow noreferrer\">#6314</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Function <code>geohashesInBox(longitude_min, latitude_min, longitude_max, latitude_max, precision)</code> which creates array of precision-long strings of geohash-boxes covering provided area. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6127\" rel=\"external nofollow noreferrer\">#6127</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Implement support for INSERT query with <code>Kafka</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6012\" rel=\"external nofollow noreferrer\">#6012</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Added support for <code>_partition</code> and <code>_timestamp</code> virtual columns to Kafka engine. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6400\" rel=\"external nofollow noreferrer\">#6400</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Possibility to remove sensitive data from <code>query_log</code>, server logs, process list with regexp-based rules. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5710\" rel=\"external nofollow noreferrer\">#5710</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n</ul>\n<h4 id=\"experimental-feature\">Experimental Feature<a class=\"headerlink\" href=\"#experimental-feature\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Input and output data format <code>Template</code>. It allows to specify custom format string for input and output. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4354\" rel=\"external nofollow noreferrer\">#4354</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6727\" rel=\"external nofollow noreferrer\">#6727</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Implementation of <code>LIVE VIEW</code> tables that were originally proposed in <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2898\" rel=\"external nofollow noreferrer\">#2898</a>, prepared in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3925\" rel=\"external nofollow noreferrer\">#3925</a>, and then updated in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5541\" rel=\"external nofollow noreferrer\">#5541</a>. See <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5541\" rel=\"external nofollow noreferrer\">#5541</a> for detailed description. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5541\" rel=\"external nofollow noreferrer\">#5541</a> (<a href=\"https://github.com/vzakaznikov\" rel=\"external nofollow noreferrer\">vzakaznikov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6425\" rel=\"external nofollow noreferrer\">#6425</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6656\" rel=\"external nofollow noreferrer\">#6656</a> (<a href=\"https://github.com/vzakaznikov\" rel=\"external nofollow noreferrer\">vzakaznikov</a>) Note that <code>LIVE VIEW</code> feature may be removed in next versions.</li>\n</ul>\n<h4 id=\"bug-fix_2\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug fixes from 19.13 and 19.11.</li>\n<li>Fix segmentation fault when the table has skip indices and vertical merge happens. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6723\" rel=\"external nofollow noreferrer\">#6723</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix per-column TTL with non-trivial column defaults. Previously in case of force TTL merge with <code>OPTIMIZE ... FINAL</code> query, expired values was replaced by type defaults instead of user-specified column defaults. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6796\" rel=\"external nofollow noreferrer\">#6796</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix Kafka messages duplication problem on normal server restart. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6597\" rel=\"external nofollow noreferrer\">#6597</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed infinite loop when reading Kafka messages. Do not pause/resume consumer on subscription at all - otherwise it may get paused indefinitely in some scenarios. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6354\" rel=\"external nofollow noreferrer\">#6354</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix <code>Key expression contains comparison between inconvertible types</code> exception in <code>bitmapContains</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6136\" rel=\"external nofollow noreferrer\">#6136</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6146\" rel=\"external nofollow noreferrer\">#6146</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6156\" rel=\"external nofollow noreferrer\">#6156</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Fix segfault with enabled <code>optimize_skip_unused_shards</code> and missing sharding key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6384\" rel=\"external nofollow noreferrer\">#6384</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE");
            
            document.write("</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6514\" rel=\"external nofollow noreferrer\">#6514</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Removed extra verbose logging in MySQL interface <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6389\" rel=\"external nofollow noreferrer\">#6389</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Return ability to parse boolean settings from 'true' and 'false' in configuration file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6278\" rel=\"external nofollow noreferrer\">#6278</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix crash in <code>quantile</code> and <code>median</code> function over <code>Nullable(Decimal128)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6378\" rel=\"external nofollow noreferrer\">#6378</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed possible incomplete result returned by <code>SELECT</code> query with <code>WHERE</code> condition on primary key contained conversion to Float type. It was caused by incorrect checking of monotonicity in <code>toFloat</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6248\" rel=\"external nofollow noreferrer\">#6248</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6374\" rel=\"external nofollow noreferrer\">#6374</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Check <code>max_expanded_ast_elements</code> setting for mutations. Clear mutations after <code>TRUNCATE TABLE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6205\" rel=\"external nofollow noreferrer\">#6205</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fix JOIN results for key columns when used with <code>join_use_nulls</code>. Attach Nulls instead of columns defaults. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6249\" rel=\"external nofollow noreferrer\">#6249</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix for skip indices with vertical merge and alter. Fix for <code>Bad size of marks file</code> exception. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6594\" rel=\"external nofollow noreferrer\">#6594</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6713\" rel=\"external nofollow noreferrer\">#6713</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix rare crash in <code>ALTER MODIFY COLUMN</code> and vertical merge when one of merged/altered parts is empty (0 rows) <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6746\" rel=\"external nofollow noreferrer\">#6746</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6780\" rel=\"external nofollow noreferrer\">#6780</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed bug in conversion of <code>LowCardinality</code> types in <code>AggregateFunctionFactory</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6257\" rel=\"external nofollow noreferrer\">#6257</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6281\" rel=\"external nofollow noreferrer\">#6281</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix wrong behavior and possible segfaults in <code>topK</code> and <code>topKWeighted</code> aggregated functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6404\" rel=\"external nofollow noreferrer\">#6404</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed unsafe code around <code>getIdentifier</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6401\" rel=\"external nofollow noreferrer\">#6401</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6409\" rel=\"external nofollow noreferrer\">#6409</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed bug in MySQL wire protocol (is used while connecting to ClickHouse form MySQL client). Caused by heap buffer overflow in <code>PacketPayloadWriteBuffer</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6212\" rel=\"external nofollow noreferrer\">#6212</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Fixed memory leak in <code>bitmapSubsetInRange</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6819\" rel=\"external nofollow noreferrer\">#6819</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Fix rare bug when mutation executed after granularity change. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6816\" rel=\"external nofollow noreferrer\">#6816</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Allow protobuf message with all fields by default. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6132\" rel=\"external nofollow noreferrer\">#6132</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Resolve a bug with <code>nullIf</code> function when we send a <code>NULL</code> argument on the second argument. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6446\" rel=\"external nofollow noreferrer\">#6446</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Fix rare bug with wrong memory allocation/deallocation in complex key cache dictionaries with string fields which leads to infinite memory consumption (looks like memory leak). Bug reproduces when string size was a power of two starting from eight (8, 16, 32, etc). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6447\" rel=\"external nofollow noreferrer\">#6447</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed Gorilla encoding on small sequences which caused exception <code>Cannot write after end of buffer</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6398\" rel=\"external nofollow noreferrer\">#6398</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6444\" rel=\"external nofollow noreferrer\">#6444</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Allow to use not nullable types in JOINs with <code>join_use_nulls</code> enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6705\" rel=\"external nofollow noreferrer\">#6705</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Disable <code>Poco::AbstractConfiguration</code> substitutions in query in <code>clickhouse-client</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6706\" rel=\"external nofollow noreferrer\">#6706</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid deadlock in <code>REPLACE PARTITION</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6677\" rel=\"external nofollow noreferrer\">#6677</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Using <code>arrayReduce</code> for constant arguments may lead to segfault. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6242\" rel=\"external nofollow noreferrer\">#6242</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6326\" rel=\"external nofollow noreferrer\">#6326</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix inconsistent parts which can appear if replica was restored after <code>DROP PARTITION</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6522\" rel=\"external nofollow noreferrer\">#6522</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6523\" rel=\"external nofollow noreferrer\">#6523</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed hang in <code>JSONExtractRaw</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6195\" rel=\"external nofollow noreferrer\">#6195</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6198\" rel=\"external nofollow noreferrer\">#6198</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug with incorrect skip indices serialization and aggregation with adaptive granularity. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6594\" rel=\"external nofollow noreferrer\">#6594</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6748\" rel=\"external nofollow noreferrer\">#6748</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix <code>WITH ROLLUP</code> and <code>WITH CUBE</code> modifiers of <code>GROUP BY</code> with two-level aggregation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6225\" rel=\"external nofollow noreferrer\">#6225</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix bug with writing secondary indices marks with adaptive granularity. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6126\" rel=\"external nofollow noreferrer\">#6126</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix initialization order while server startup. Since <code>StorageMergeTree::background_task_handle</code> is initialized in <code>startup()</code> the <code>MergeTreeBlockOutputStream::writ");
            
            document.write("e()</code> may try to use it before initialization. Just check if it is initialized. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6080\" rel=\"external nofollow noreferrer\">#6080</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Clearing the data buffer from the previous read operation that was completed with an error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6026\" rel=\"external nofollow noreferrer\">#6026</a> (<a href=\"https://github.com/bopohaa\" rel=\"external nofollow noreferrer\">Nikolay</a>)</li>\n<li>Fix bug with enabling adaptive granularity when creating new replica for Replicated*MergeTree table. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6394\" rel=\"external nofollow noreferrer\">#6394</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6452\" rel=\"external nofollow noreferrer\">#6452</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed possible crash during server startup in case of exception happened in <code>libunwind</code> during exception at access to uninitialised <code>ThreadStatus</code> structure. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6456\" rel=\"external nofollow noreferrer\">#6456</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n<li>Fix crash in <code>yandexConsistentHash</code> function. Found by fuzz test. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6304\" rel=\"external nofollow noreferrer\">#6304</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6305\" rel=\"external nofollow noreferrer\">#6305</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed the possibility of hanging queries when server is overloaded and global thread pool becomes near full. This have higher chance to happen on clusters with large number of shards (hundreds), because distributed queries allocate a thread per connection to each shard. For example, this issue may reproduce if a cluster of 330 shards is processing 30 concurrent distributed queries. This issue affects all versions starting from 19.2. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6301\" rel=\"external nofollow noreferrer\">#6301</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed logic of <code>arrayEnumerateUniqRanked</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6423\" rel=\"external nofollow noreferrer\">#6423</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix segfault when decoding symbol table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6603\" rel=\"external nofollow noreferrer\">#6603</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Fixed irrelevant exception in cast of <code>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn't contain Nulls (e.g. in query like <code>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6094\" rel=\"external nofollow noreferrer\">#6094</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6119\" rel=\"external nofollow noreferrer\">#6119</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Removed extra quoting of description in <code>system.settings</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6696\" rel=\"external nofollow noreferrer\">#6696</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6699\" rel=\"external nofollow noreferrer\">#6699</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid possible deadlock in <code>TRUNCATE</code> of Replicated table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6695\" rel=\"external nofollow noreferrer\">#6695</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix reading in order of sorting key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6189\" rel=\"external nofollow noreferrer\">#6189</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6543\" rel=\"external nofollow noreferrer\">#6543</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed the case when server may close listening sockets but not shutdown and continue serving remaining queries. You may end up with two running clickhouse-server processes. Sometimes, the server may return an error <code>bad_function_call</code> for remaining queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6231\" rel=\"external nofollow noreferrer\">#6231</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug opened by <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4405\" rel=\"external nofollow noreferrer\">#4405</a> (since 19.4.0). Reproduces in queries to Distributed tables over MergeTree tables when we doesn't query any columns (<code>SELECT 1</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6236\" rel=\"external nofollow noreferrer\">#6236</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed overflow in integer division of signed type to unsigned type. The behaviour was exactly as in C or C++ language (integer promotion rules) that may be surprising. Please note that the overflow is still possible when dividing large signed number to large unsigned number or vice-versa (but that case is less usual). The issue existed in all server versions. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6214\" rel=\"external nofollow noreferrer\">#6214</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6233\" rel=\"external nofollow noreferrer\">#6233</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Limit maximum sleep time for throttling when <code>max_execution_speed</code> or <code>max_execution_speed_bytes</code> is set. Fixed false errors like <code>Estimated query execution time (inf seconds) is too long</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5547\" rel=\"external nofollow noreferrer\">#5547</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6232\" rel=\"external nofollow noreferrer\">#6232</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed issues about using <code>MATERIALIZED</code> columns and aliases in <code>MaterializedView</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/448\" rel=\"external nofollow noreferrer\">#448</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3484\" rel=\"external nofollow noreferrer\">#3484</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3450\" rel=\"external nofollow noreferrer\">#3450</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2878\" rel=\"external nofollow noreferrer\">#2878</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2285\" rel=\"external nofollow noreferrer\">#2285</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3796\" rel=\"external nofollow noreferrer\">#3796</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6316\" rel=\"external nofollow noreferrer\">#6316</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix <code>FormatFactory</code> behaviour for input streams which are not implemented as processor. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6495\" rel=\"external nofollow noreferrer\">#6495</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed typo. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6631\" rel=\"external nofollow noreferrer\">#6631</a> (<a href=\"https://github.com/alexryndin\" rel=\"external nofollow noreferrer\">Alex Ryndin</a>)</li>\n<li>Typo in the error message ( is -&gt; are ). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6839\" rel=\"external nofollow noreferrer\">#6839</a> (<a href=\"https://github.com/den-crane\" rel=\"external nofollow noreferrer\">Denis Zhuravlev</a>)</li>\n<li>Fixed error while parsing of columns list from string if type contained a comma (this issue was relevant for <code>File</code>, <code>URL</code>, <code>HDFS</code> storages) <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6217\" rel=\"external nofollow noreferrer\">#6217</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6209\" rel=\"external nofollow noreferrer\">#6209</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n</ul>\n<h4 id=\"security-fix\">Security Fix<a class=\"headerlink\" href=\"#security-fix\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug security fixes from 19.13 and 19.11.</li>\n<li>Fixed the possibility of a fabricated query to cause server crash due to stack overflow in SQL parser. Fixed the possibility of stack overflow in Merge and Distributed tables, materialized views and conditions for row-level security that involve subqueries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6433\" rel=\"external nofollow noreferrer\">#6433</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"improvement\">Improvement<a class=\"headerlink\" href=\"#improvement\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Correct implementation of ternary logic for <code>AND/OR</code>. <a href=\"https://github.com/ClickHouse/Click");
            
            document.write("House/pull/6048\" rel=\"external nofollow noreferrer\">#6048</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander Kazakov</a>)</li>\n<li>Now values and rows with expired TTL will be removed after <code>OPTIMIZE ... FINAL</code> query from old parts without TTL infos or with outdated TTL infos, e.g. after <code>ALTER ... MODIFY TTL</code> query. Added queries <code>SYSTEM STOP/START TTL MERGES</code> to disallow/allow assign merges with TTL and filter expired values in all merges. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6274\" rel=\"external nofollow noreferrer\">#6274</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Possibility to change the location of ClickHouse history file for client using <code>CLICKHOUSE_HISTORY_FILE</code> env. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6840\" rel=\"external nofollow noreferrer\">#6840</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Remove <code>dry_run</code> flag from <code>InterpreterSelectQuery</code>. ... <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6375\" rel=\"external nofollow noreferrer\">#6375</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Support <code>ASOF JOIN</code> with <code>ON</code> section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6211\" rel=\"external nofollow noreferrer\">#6211</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Better support of skip indexes for mutations and replication. Support for <code>MATERIALIZE/CLEAR INDEX ... IN PARTITION</code> query. <code>UPDATE x = x</code> recalculates all indices that use column <code>x</code>.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5053\" rel=\"external nofollow noreferrer\">#5053</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Allow to <code>ATTACH</code> live views (for example, at the server startup) regardless to <code>allow_experimental_live_view</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6754\" rel=\"external nofollow noreferrer\">#6754</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>For stack traces gathered by query profiler, do not include stack frames generated by the query profiler itself. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6250\" rel=\"external nofollow noreferrer\">#6250</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Now table functions <code>values</code>, <code>file</code>, <code>url</code>, <code>hdfs</code> have support for ALIAS columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6255\" rel=\"external nofollow noreferrer\">#6255</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Throw an exception if <code>config.d</code> file doesn't have the corresponding root element as the config file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6123\" rel=\"external nofollow noreferrer\">#6123</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Print extra info in exception message for <code>no space left on device</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6182\" rel=\"external nofollow noreferrer\">#6182</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6252\" rel=\"external nofollow noreferrer\">#6252</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6352\" rel=\"external nofollow noreferrer\">#6352</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>When determining shards of a <code>Distributed</code> table to be covered by a read query (for <code>optimize_skip_unused_shards</code> = 1) ClickHouse now checks conditions from both <code>prewhere</code> and <code>where</code> clauses of select statement. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6521\" rel=\"external nofollow noreferrer\">#6521</a> (<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander Kazakov</a>)</li>\n<li>Enabled <code>SIMDJSON</code> for machines without AVX2 but with SSE 4.2 and PCLMUL instruction set. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6285\" rel=\"external nofollow noreferrer\">#6285</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6320\" rel=\"external nofollow noreferrer\">#6320</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>ClickHouse can work on filesystems without <code>O_DIRECT</code> support (such as ZFS and BtrFS) without additional tuning. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4449\" rel=\"external nofollow noreferrer\">#4449</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6730\" rel=\"external nofollow noreferrer\">#6730</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Support push down predicate for final subquery. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6120\" rel=\"external nofollow noreferrer\">#6120</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6162\" rel=\"external nofollow noreferrer\">#6162</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Better <code>JOIN ON</code> keys extraction <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6131\" rel=\"external nofollow noreferrer\">#6131</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Upated <code>SIMDJSON</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6285\" rel=\"external nofollow noreferrer\">#6285</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6306\" rel=\"external nofollow noreferrer\">#6306</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Optimize selecting of smallest column for <code>SELECT count()</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6344\" rel=\"external nofollow noreferrer\">#6344</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Added <code>strict</code> parameter in <code>windowFunnel()</code>. When the <code>strict</code> is set, the <code>windowFunnel()</code> applies conditions only for the unique values. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6548\" rel=\"external nofollow noreferrer\">#6548</a> (<a href=\"https://github.com/achimbab\" rel=\"external nofollow noreferrer\">achimbab</a>)</li>\n<li>Safer interface of <code>mysqlxx::Pool</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6150\" rel=\"external nofollow noreferrer\">#6150</a> (<a href=\"https://github.com/avasiliev\" rel=\"external nofollow noreferrer\">avasiliev</a>)</li>\n<li>Options line size when executing with <code>--help</code> option now corresponds with terminal size. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6590\" rel=\"external nofollow noreferrer\">#6590</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Disable \"read in order\" optimization for aggregation without keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6599\" rel=\"external nofollow noreferrer\">#6599</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>HTTP status code for <code>INCORRECT_DATA</code> and <code>TYPE_MISMATCH</code> error codes was changed from default <code>500 Internal Server Error</code> to <code>400 Bad Request</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6271\" rel=\"external nofollow noreferrer\">#6271</a> (<a href=\"https://github.com/a-rodin\" rel=\"external nofollow noreferrer\">Alexander Rodin</a>)</li>\n<li>Move Join object from <code>ExpressionAction</code> into <code>AnalyzedJoin</code>. <code>ExpressionAnalyzer</code> and <code>ExpressionAction</code> do not know about <code>Join</code> class anymore. Its logic is hidden by <code>AnalyzedJoin</code> iface. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6801\" rel=\"external nofollow noreferrer\">#6801</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed possible deadlock of distributed queries when one of shards is localhost but the query is sent via network connection. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6759\" rel=\"external nofollow noreferrer\">#6759</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Changed semantic of multiple tables <code>RENAME</code> to avoid possible deadlocks. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6757\" rel=\"external nofollow noreferrer\">#6757</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6756\" rel=\"external nofollow noreferrer\">#6756</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Rewritten MySQL compatibility server to prevent loading full packet payload in memory. Decreased memory consumption for each connection to approximately <code>2 * DBMS_DEFAULT_BUFFER_SIZE</code> (read/write buffers). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5811\" rel=\"external nofollow noreferrer\">#5811</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Move AST alias interpreting logic out of parser that doesn't have to know anything about query semantics. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6108\" rel=\"external nofollow noreferrer\">#6108</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Slightly more safe parsing of <code>NamesAndTypesList</code>. <a href=\"ht");
            
            document.write("tps://github.com/ClickHouse/ClickHouse/issues/6408\" rel=\"external nofollow noreferrer\">#6408</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6410\" rel=\"external nofollow noreferrer\">#6410</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>clickhouse-copier</code>: Allow use <code>where_condition</code> from config with <code>partition_key</code> alias in query for checking partition existence (Earlier it was used only in reading data queries). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6577\" rel=\"external nofollow noreferrer\">#6577</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added optional message argument in <code>throwIf</code>. (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/5772\" rel=\"external nofollow noreferrer\">#5772</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6329\" rel=\"external nofollow noreferrer\">#6329</a> (<a href=\"https://github.com/Vdimir\" rel=\"external nofollow noreferrer\">Vdimir</a>)</li>\n<li>Server exception got while sending insertion data is now being processed in client as well. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5891\" rel=\"external nofollow noreferrer\">#5891</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6711\" rel=\"external nofollow noreferrer\">#6711</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Added a metric <code>DistributedFilesToInsert</code> that shows the total number of files in filesystem that are selected to send to remote servers by Distributed tables. The number is summed across all shards. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6600\" rel=\"external nofollow noreferrer\">#6600</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Move most of JOINs prepare logic from <code>ExpressionAction/ExpressionAnalyzer</code> to <code>AnalyzedJoin</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6785\" rel=\"external nofollow noreferrer\">#6785</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix TSan <a href=\"https://clickhouse-test-reports.s3.yandex.net/6399/c1c1d1daa98e199e620766f1bd06a5921050a00d/functional_stateful_tests_(thread).html\" rel=\"external nofollow noreferrer\">warning</a> 'lock-order-inversion'. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6740\" rel=\"external nofollow noreferrer\">#6740</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Better information messages about lack of Linux capabilities. Logging fatal errors with \"fatal\" level, that will make it easier to find in <code>system.text_log</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6441\" rel=\"external nofollow noreferrer\">#6441</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>When enable dumping temporary data to the disk to restrict memory usage during <code>GROUP BY</code>, <code>ORDER BY</code>, it didn't check the free disk space. The fix add a new setting <code>min_free_disk_space</code>, when the free disk space it smaller then the threshold, the query will stop and throw <code>ErrorCodes::NOT_ENOUGH_SPACE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6678\" rel=\"external nofollow noreferrer\">#6678</a> (<a href=\"https://github.com/weiqxu\" rel=\"external nofollow noreferrer\">Weiqing Xu</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6691\" rel=\"external nofollow noreferrer\">#6691</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Removed recursive rwlock by thread. It makes no sense, because threads are reused between queries. <code>SELECT</code> query may acquire a lock in one thread, hold a lock from another thread and exit from first thread. In the same time, first thread can be reused by <code>DROP</code> query. This will lead to false \"Attempt to acquire exclusive lock recursively\" messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6771\" rel=\"external nofollow noreferrer\">#6771</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Split <code>ExpressionAnalyzer.appendJoin()</code>. Prepare a place in <code>ExpressionAnalyzer</code> for <code>MergeJoin</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6524\" rel=\"external nofollow noreferrer\">#6524</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Added <code>mysql_native_password</code> authentication plugin to MySQL compatibility server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6194\" rel=\"external nofollow noreferrer\">#6194</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Less number of <code>clock_gettime</code> calls; fixed ABI compatibility between debug/release in <code>Allocator</code> (insignificant issue). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6197\" rel=\"external nofollow noreferrer\">#6197</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Move <code>collectUsedColumns</code> from <code>ExpressionAnalyzer</code> to <code>SyntaxAnalyzer</code>. <code>SyntaxAnalyzer</code> makes <code>required_source_columns</code> itself now. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6416\" rel=\"external nofollow noreferrer\">#6416</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Add setting <code>joined_subquery_requires_alias</code> to require aliases for subselects and table functions in <code>FROM</code> that more than one table is present (i.e. queries with JOINs). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6733\" rel=\"external nofollow noreferrer\">#6733</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Extract <code>GetAggregatesVisitor</code> class from <code>ExpressionAnalyzer</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6458\" rel=\"external nofollow noreferrer\">#6458</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li><code>system.query_log</code>: change data type of <code>type</code> column to <code>Enum</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6265\" rel=\"external nofollow noreferrer\">#6265</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n<li>Static linking of <code>sha256_password</code> authentication plugin. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6512\" rel=\"external nofollow noreferrer\">#6512</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Avoid extra dependency for the setting <code>compile</code> to work. In previous versions, the user may get error like <code>cannot open crti.o</code>, <code>unable to find library -lc</code> etc. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6309\" rel=\"external nofollow noreferrer\">#6309</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>More validation of the input that may come from malicious replica. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6303\" rel=\"external nofollow noreferrer\">#6303</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Now <code>clickhouse-obfuscator</code> file is available in <code>clickhouse-client</code> package. In previous versions it was available as <code>clickhouse obfuscator</code> (with whitespace). <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5816\" rel=\"external nofollow noreferrer\">#5816</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6609\" rel=\"external nofollow noreferrer\">#6609</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Fixed deadlock when we have at least two queries that read at least two tables in different order and another query that performs DDL operation on one of tables. Fixed another very rare deadlock. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6764\" rel=\"external nofollow noreferrer\">#6764</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added <code>os_thread_ids</code> column to <code>system.processes</code> and <code>system.query_log</code> for better debugging possibilities. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6763\" rel=\"external nofollow noreferrer\">#6763</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>A workaround for PHP mysqlnd extension bugs which occur when <code>sha256_password</code> is used as a default authentication plugin (described in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6031\" rel=\"external nofollow noreferrer\">#6031</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6113\" rel=\"external nofollow noreferrer\">#6113</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Remove unneeded place with changed nullability columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6693\" rel=\"external nofollow noreferrer\">#6693</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Set default value of <code>queue_max_wait_ms</code> to zero, because current value (five seconds) makes no sense. There are rare circumstances when this settings has any use. Added settings <code>replace_running_query_max_wait_ms</code>, <code>kafka_max_wait_ms</code> and <code>connection_pool_max_wait_ms</code> for disambiguation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6692\" rel=\"external nofo");
            
            document.write("llow noreferrer\">#6692</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Extract <code>SelectQueryExpressionAnalyzer</code> from <code>ExpressionAnalyzer</code>. Keep the last one for non-select queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6499\" rel=\"external nofollow noreferrer\">#6499</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Removed duplicating input and output formats. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6239\" rel=\"external nofollow noreferrer\">#6239</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Allow user to override <code>poll_interval</code> and <code>idle_connection_timeout</code> settings on connection. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6230\" rel=\"external nofollow noreferrer\">#6230</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>MergeTree</code> now has an additional option <code>ttl_only_drop_parts</code> (disabled by default) to avoid partial pruning of parts, so that they dropped completely when all the rows in a part are expired. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6191\" rel=\"external nofollow noreferrer\">#6191</a> (<a href=\"https://github.com/svladykin\" rel=\"external nofollow noreferrer\">Sergi Vladykin</a>)</li>\n<li>Type checks for set index functions. Throw exception if function got a wrong type. This fixes fuzz test with UBSan. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6511\" rel=\"external nofollow noreferrer\">#6511</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n</ul>\n<h4 id=\"performance-improvement\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Optimize queries with <code>ORDER BY expressions</code> clause, where <code>expressions</code> have coinciding prefix with sorting key in <code>MergeTree</code> tables. This optimization is controlled by <code>optimize_read_in_order</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6054\" rel=\"external nofollow noreferrer\">#6054</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6629\" rel=\"external nofollow noreferrer\">#6629</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Allow to use multiple threads during parts loading and removal. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6372\" rel=\"external nofollow noreferrer\">#6372</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6074\" rel=\"external nofollow noreferrer\">#6074</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6438\" rel=\"external nofollow noreferrer\">#6438</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Implemented batch variant of updating aggregate function states. It may lead to performance benefits. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6435\" rel=\"external nofollow noreferrer\">#6435</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Using <code>FastOps</code> library for functions <code>exp</code>, <code>log</code>, <code>sigmoid</code>, <code>tanh</code>. FastOps is a fast vector math library from Michael Parakhin (Yandex CTO). Improved performance of <code>exp</code> and <code>log</code> functions more than 6 times. The functions <code>exp</code> and <code>log</code> from <code>Float32</code> argument will return <code>Float32</code> (in previous versions they always return <code>Float64</code>). Now <code>exp(nan)</code> may return <code>inf</code>. The result of <code>exp</code> and <code>log</code> functions may be not the nearest machine representable number to the true answer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6254\" rel=\"external nofollow noreferrer\">#6254</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>) Using Danila Kutenin variant to make fastops working <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6317\" rel=\"external nofollow noreferrer\">#6317</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Disable consecutive key optimization for <code>UInt8/16</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6298\" rel=\"external nofollow noreferrer\">#6298</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6701\" rel=\"external nofollow noreferrer\">#6701</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Improved performance of <code>simdjson</code> library by getting rid of dynamic allocation in <code>ParsedJson::Iterator</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6479\" rel=\"external nofollow noreferrer\">#6479</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Pre-fault pages when allocating memory with <code>mmap()</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6667\" rel=\"external nofollow noreferrer\">#6667</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fix performance bug in <code>Decimal</code> comparison. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6380\" rel=\"external nofollow noreferrer\">#6380</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_1\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Remove Compiler (runtime template instantiation) because we've win over it's performance. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6646\" rel=\"external nofollow noreferrer\">#6646</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added performance test to show degradation of performance in gcc-9 in more isolated way. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6302\" rel=\"external nofollow noreferrer\">#6302</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added table function <code>numbers_mt</code>, which is multithreaded version of <code>numbers</code>. Updated performance tests with hash functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6554\" rel=\"external nofollow noreferrer\">#6554</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Comparison mode in <code>clickhouse-benchmark</code> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6220\" rel=\"external nofollow noreferrer\">#6220</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6343\" rel=\"external nofollow noreferrer\">#6343</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Best effort for printing stack traces. Also added <code>SIGPROF</code> as a debugging signal to print stack trace of a running thread. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6529\" rel=\"external nofollow noreferrer\">#6529</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Every function in its own file, part 10. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6321\" rel=\"external nofollow noreferrer\">#6321</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Remove doubled const <code>TABLE_IS_READ_ONLY</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6566\" rel=\"external nofollow noreferrer\">#6566</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Formatting changes for <code>StringHashMap</code> PR <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5417\" rel=\"external nofollow noreferrer\">#5417</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6700\" rel=\"external nofollow noreferrer\">#6700</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Better subquery for join creation in <code>ExpressionAnalyzer</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6824\" rel=\"external nofollow noreferrer\">#6824</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Remove a redundant condition (found by PVS Studio). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6775\" rel=\"external nofollow noreferrer\">#6775</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Separate the hash table interface for <code>ReverseIndex</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6672\" rel=\"external nofollow noreferrer\">#6672</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Refactoring of settings. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6689\" rel=\"external nofollow noreferrer\">#6689</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add comments for <code>set</code> index functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6319\" rel=\"external nofollow noreferrer\">#6319</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Increase OOM score in debug version on Linux. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6152\" rel=\"external nofollow noreferrer\">#6152</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>HDFS HA now work in debug build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6650\" rel=\"external nofollow noreferrer\">#6650</a> (<a href=\"https://github.com/weiqxu\" rel=\"external nofollow");
            
            document.write(" noreferrer\">Weiqing Xu</a>)</li>\n<li>Added a test to <code>transform_query_for_external_database</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6388\" rel=\"external nofollow noreferrer\">#6388</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add test for multiple materialized views for Kafka table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6509\" rel=\"external nofollow noreferrer\">#6509</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Make a better build scheme. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6500\" rel=\"external nofollow noreferrer\">#6500</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed <code>test_external_dictionaries</code> integration in case it was executed under non root user. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6507\" rel=\"external nofollow noreferrer\">#6507</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>The bug reproduces when total size of written packets exceeds <code>DBMS_DEFAULT_BUFFER_SIZE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6204\" rel=\"external nofollow noreferrer\">#6204</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Added a test for <code>RENAME</code> table race condition <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6752\" rel=\"external nofollow noreferrer\">#6752</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid data race on Settings in <code>KILL QUERY</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6753\" rel=\"external nofollow noreferrer\">#6753</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add integration test for handling errors by a cache dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6755\" rel=\"external nofollow noreferrer\">#6755</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Move <code>input_format_defaults_for_omitted_fields</code> to incompatible changes <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6573\" rel=\"external nofollow noreferrer\">#6573</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Disable parsing of ELF object files on Mac OS, because it makes no sense. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6578\" rel=\"external nofollow noreferrer\">#6578</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Attempt to make changelog generator better. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6327\" rel=\"external nofollow noreferrer\">#6327</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Adding <code>-Wshadow</code> switch to the GCC. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6325\" rel=\"external nofollow noreferrer\">#6325</a> (<a href=\"https://github.com/kreuzerkrieg\" rel=\"external nofollow noreferrer\">kreuzerkrieg</a>)</li>\n<li>Removed obsolete code for <code>mimalloc</code> support. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6715\" rel=\"external nofollow noreferrer\">#6715</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>zlib-ng</code> determines x86 capabilities and saves this info to global variables. This is done in defalteInit call, which may be made by different threads simultaneously. To avoid multithreaded writes, do it on library startup. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6141\" rel=\"external nofollow noreferrer\">#6141</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Regression test for a bug which in join which was fixed in <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5192\" rel=\"external nofollow noreferrer\">#5192</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6147\" rel=\"external nofollow noreferrer\">#6147</a> (<a href=\"https://github.com/theruziev\" rel=\"external nofollow noreferrer\">Bakhtiyor Ruziev</a>)</li>\n<li>Fixed MSan report. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6144\" rel=\"external nofollow noreferrer\">#6144</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix flapping TTL test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6782\" rel=\"external nofollow noreferrer\">#6782</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed false data race in <code>MergeTreeDataPart::is_frozen</code> field. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6583\" rel=\"external nofollow noreferrer\">#6583</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed timeouts in fuzz test. In previous version, it managed to find false hangup in query <code>SELECT * FROM numbers_mt(gccMurmurHash(''))</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6582\" rel=\"external nofollow noreferrer\">#6582</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added debug checks to <code>static_cast</code> of columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6581\" rel=\"external nofollow noreferrer\">#6581</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Support for Oracle Linux in official RPM packages. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6356\" rel=\"external nofollow noreferrer\">#6356</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6585\" rel=\"external nofollow noreferrer\">#6585</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Changed json perftests from <code>once</code> to <code>loop</code> type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6536\" rel=\"external nofollow noreferrer\">#6536</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li><code>odbc-bridge.cpp</code> defines <code>main()</code> so it should not be included in <code>clickhouse-lib</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6538\" rel=\"external nofollow noreferrer\">#6538</a> (<a href=\"https://github.com/orivej\" rel=\"external nofollow noreferrer\">Orivej Desh</a>)</li>\n<li>Test for crash in <code>FULL|RIGHT JOIN</code> with nulls in right table's keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6362\" rel=\"external nofollow noreferrer\">#6362</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Added a test for the limit on expansion of aliases just in case. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6442\" rel=\"external nofollow noreferrer\">#6442</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Switched from <code>boost::filesystem</code> to <code>std::filesystem</code> where appropriate. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6253\" rel=\"external nofollow noreferrer\">#6253</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6385\" rel=\"external nofollow noreferrer\">#6385</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added RPM packages to website. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6251\" rel=\"external nofollow noreferrer\">#6251</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add a test for fixed <code>Unknown identifier</code> exception in <code>IN</code> section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6708\" rel=\"external nofollow noreferrer\">#6708</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Simplify <code>shared_ptr_helper</code> because people facing difficulties understanding it. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6675\" rel=\"external nofollow noreferrer\">#6675</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added performance tests for fixed Gorilla and DoubleDelta codec. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6179\" rel=\"external nofollow noreferrer\">#6179</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Split the integration test <code>test_dictionaries</code> into 4 separate tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6776\" rel=\"external nofollow noreferrer\">#6776</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix PVS-Studio warning in <code>PipelineExecutor</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6777\" rel=\"external nofollow noreferrer\">#6777</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Allow to use <code>library</code> dictionary source with ASan. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6482\" rel=\"external nofollow noreferrer\">#6482</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added option to generate changelog from a list of PRs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6350\" rel=\"external nofollow noreferrer\">#6350</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Lock the <code>TinyLog</code> storage when reading. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6226\" rel=\"external nofollow noreferrer\">#622");
            
            document.write("6</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Check for broken symlinks in CI. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6634\" rel=\"external nofollow noreferrer\">#6634</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Increase timeout for \"stack overflow\" test because it may take a long time in debug build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6637\" rel=\"external nofollow noreferrer\">#6637</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added a check for double whitespaces. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6643\" rel=\"external nofollow noreferrer\">#6643</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix <code>new/delete</code> memory tracking when build with sanitizers. Tracking is not clear. It only prevents memory limit exceptions in tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6450\" rel=\"external nofollow noreferrer\">#6450</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Enable back the check of undefined symbols while linking. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6453\" rel=\"external nofollow noreferrer\">#6453</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Avoid rebuilding <code>hyperscan</code> every day. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6307\" rel=\"external nofollow noreferrer\">#6307</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed UBSan report in <code>ProtobufWriter</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6163\" rel=\"external nofollow noreferrer\">#6163</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Don't allow to use query profiler with sanitizers because it is not compatible. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6769\" rel=\"external nofollow noreferrer\">#6769</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add test for reloading a dictionary after fail by timer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6114\" rel=\"external nofollow noreferrer\">#6114</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix inconsistency in <code>PipelineExecutor::prepareProcessor</code> argument type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6494\" rel=\"external nofollow noreferrer\">#6494</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Added a test for bad URIs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6493\" rel=\"external nofollow noreferrer\">#6493</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added more checks to <code>CAST</code> function. This should get more information about segmentation fault in fuzzy test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6346\" rel=\"external nofollow noreferrer\">#6346</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Added <code>gcc-9</code> support to <code>docker/builder</code> container that builds image locally. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6333\" rel=\"external nofollow noreferrer\">#6333</a> (<a href=\"https://github.com/NanoBjorn\" rel=\"external nofollow noreferrer\">Gleb Novikov</a>)</li>\n<li>Test for primary key with <code>LowCardinality(String)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5044\" rel=\"external nofollow noreferrer\">#5044</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6219\" rel=\"external nofollow noreferrer\">#6219</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Fixed tests affected by slow stack traces printing. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6315\" rel=\"external nofollow noreferrer\">#6315</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add a test case for crash in <code>groupUniqArray</code> fixed in <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6029\" rel=\"external nofollow noreferrer\">#6029</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4402\" rel=\"external nofollow noreferrer\">#4402</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6129\" rel=\"external nofollow noreferrer\">#6129</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fixed indices mutations tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6645\" rel=\"external nofollow noreferrer\">#6645</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>In performance test, do not read query log for queries we didn't run. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6427\" rel=\"external nofollow noreferrer\">#6427</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Materialized view now could be created with any low cardinality types regardless to the setting about suspicious low cardinality types. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6428\" rel=\"external nofollow noreferrer\">#6428</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Updated tests for <code>send_logs_level</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6207\" rel=\"external nofollow noreferrer\">#6207</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix build under gcc-8.2. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6196\" rel=\"external nofollow noreferrer\">#6196</a> (<a href=\"https://github.com/zlobober\" rel=\"external nofollow noreferrer\">Max Akhmedov</a>)</li>\n<li>Fix build with internal libc++. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6724\" rel=\"external nofollow noreferrer\">#6724</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix shared build with <code>rdkafka</code> library <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6101\" rel=\"external nofollow noreferrer\">#6101</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixes for Mac OS build (incomplete). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6390\" rel=\"external nofollow noreferrer\">#6390</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6429\" rel=\"external nofollow noreferrer\">#6429</a> (<a href=\"https://github.com/alex-zaitsev\" rel=\"external nofollow noreferrer\">alex-zaitsev</a>)</li>\n<li>Fix \"splitted\" build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6618\" rel=\"external nofollow noreferrer\">#6618</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Other build fixes: <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6186\" rel=\"external nofollow noreferrer\">#6186</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6486\" rel=\"external nofollow noreferrer\">#6486</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6348\" rel=\"external nofollow noreferrer\">#6348</a> (<a href=\"https://github.com/Vxider\" rel=\"external nofollow noreferrer\">vxider</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6744\" rel=\"external nofollow noreferrer\">#6744</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6016\" rel=\"external nofollow noreferrer\">#6016</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6421\" rel=\"external nofollow noreferrer\">#6421</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6491\" rel=\"external nofollow noreferrer\">#6491</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed rarely used table function <code>catBoostPool</code> and storage <code>CatBoostPool</code>. If you have used this table function, please write email to <code>clickhouse-feedback@yandex-team.com</code>. Note that CatBoost integration remains and will be supported. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6279\" rel=\"external nofollow noreferrer\">#6279</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Disable <code>ANY RIGHT JOIN</code> and <code>ANY FULL JOIN</code> by default. Set <code>any_join_get_any_from_right_table</code> setting to enable them. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5126\" rel=\"external nofollow noreferrer\">#5126</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6351\" rel=\"external nofollow noreferrer\">#6351</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-11-57-2019-09-13\">ClickHouse release 19.11.11.57, 2019-09-13<a class=\"headerlink\" href=\"#clickhouse-release-19-11-11-57-2019-09-13\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Fix logical error causing segfaults when selecting from Kafka empty topic. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6902\" rel=\"external nofollow noreferrer\">#6902</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6909\" rel=\"external nofollow noreferrer\">#6909</a> (");
            
            document.write("<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix for function <code>\u0410rrayEnumerateUniqRanked</code> with empty arrays in params. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6928\" rel=\"external nofollow noreferrer\">#6928</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-13-4-32-2019-09-10\">ClickHouse release 19.13.4.32, 2019-09-10<a class=\"headerlink\" href=\"#clickhouse-release-19-13-4-32-2019-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_3\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug security fixes from 19.11.9.52 and 19.11.10.54.</li>\n<li>Fixed data race in <code>system.parts</code> table and <code>ALTER</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6245\" rel=\"external nofollow noreferrer\">#6245</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6513\" rel=\"external nofollow noreferrer\">#6513</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed mismatched header in streams happened in case of reading from empty distributed table with sample and prewhere. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6167\" rel=\"external nofollow noreferrer\">#6167</a> (<a href=\"https://github.com/fancyqlx\" rel=\"external nofollow noreferrer\">Lixiang Qian</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6823\" rel=\"external nofollow noreferrer\">#6823</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed crash when using <code>IN</code> clause with a subquery with a tuple. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6125\" rel=\"external nofollow noreferrer\">#6125</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6550\" rel=\"external nofollow noreferrer\">#6550</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fix case with same column names in <code>GLOBAL JOIN ON</code> section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6181\" rel=\"external nofollow noreferrer\">#6181</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix crash when casting types to <code>Decimal</code> that do not support it. Throw exception instead. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6297\" rel=\"external nofollow noreferrer\">#6297</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed crash in <code>extractAll()</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6644\" rel=\"external nofollow noreferrer\">#6644</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Query transformation for <code>MySQL</code>, <code>ODBC</code>, <code>JDBC</code> table functions now works properly for <code>SELECT WHERE</code> queries with multiple <code>AND</code> expressions. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6381\" rel=\"external nofollow noreferrer\">#6381</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6676\" rel=\"external nofollow noreferrer\">#6676</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Added previous declaration checks for MySQL 8 integration. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6569\" rel=\"external nofollow noreferrer\">#6569</a> (<a href=\"https://github.com/rafaeldtinoco\" rel=\"external nofollow noreferrer\">Rafael David Tinoco</a>)</li>\n</ul>\n<h4 id=\"security-fix_1\">Security Fix<a class=\"headerlink\" href=\"#security-fix_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix two vulnerabilities in codecs in decompression phase (malicious user can fabricate compressed data that will lead to buffer overflow in decompression). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6670\" rel=\"external nofollow noreferrer\">#6670</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-10-54-2019-09-10\">ClickHouse release 19.11.10.54, 2019-09-10<a class=\"headerlink\" href=\"#clickhouse-release-19-11-10-54-2019-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_4\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Do store offsets for Kafka messages manually to be able to commit them all at once for all partitions. Fixes potential duplication in \"one consumer - many partitions\" scenario. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6872\" rel=\"external nofollow noreferrer\">#6872</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-9-52-2019-09-6\">ClickHouse release 19.11.9.52, 2019-09-6<a class=\"headerlink\" href=\"#clickhouse-release-19-11-9-52-2019-09-6\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Improve error handling in cache dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6737\" rel=\"external nofollow noreferrer\">#6737</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fixed bug in function <code>arrayEnumerateUniqRanked</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6779\" rel=\"external nofollow noreferrer\">#6779</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix <code>JSONExtract</code> function while extracting a <code>Tuple</code> from JSON. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6718\" rel=\"external nofollow noreferrer\">#6718</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fixed possible data loss after <code>ALTER DELETE</code> query on table with skipping index. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6224\" rel=\"external nofollow noreferrer\">#6224</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6282\" rel=\"external nofollow noreferrer\">#6282</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Fixed performance test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6392\" rel=\"external nofollow noreferrer\">#6392</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Parquet: Fix reading boolean columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6579\" rel=\"external nofollow noreferrer\">#6579</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed wrong behaviour of <code>nullIf</code> function for constant arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6518\" rel=\"external nofollow noreferrer\">#6518</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6580\" rel=\"external nofollow noreferrer\">#6580</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix Kafka messages duplication problem on normal server restart. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6597\" rel=\"external nofollow noreferrer\">#6597</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed an issue when long <code>ALTER UPDATE</code> or <code>ALTER DELETE</code> may prevent regular merges to run. Prevent mutations from executing if there is no enough free threads available. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6502\" rel=\"external nofollow noreferrer\">#6502</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6617\" rel=\"external nofollow noreferrer\">#6617</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed error with processing \"timezone\" in server configuration file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6709\" rel=\"external nofollow noreferrer\">#6709</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix kafka tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6805\" rel=\"external nofollow noreferrer\">#6805</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"security-fix_2\">Security Fix<a class=\"headerlink\" href=\"#security-fix_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>If the attacker has write access to ZooKeeper and is able to run custom server available from the network where ClickHouse run, it can create custom-built malicious server that will act as ClickHouse replica and register it in ZooKeeper. When another replica will fetch data part from malicious replica, it can force clickhouse-server to write to arbitrary path on filesystem. Found by Eldar Zaitov, information security team at Yandex. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6247\" rel=\"external nofollow noreferrer\">#6247</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-13-3-26-2019-08-22\">ClickHouse release 19.13.3.26, 2019-08-22<a class=\"headerlink\" href=\"#clickhouse-release-19-13-3-26-2019-08-22\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_5\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6543\" rel=\"external nofollow noreferrer\">#6543</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix NPE when using IN clause with a subquery with a tuple. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6125\" rel=\"external nofollow noreferrer\">#6125</a> <a href=\"https:");
            
            document.write("//github.com/ClickHouse/ClickHouse/pull/6550\" rel=\"external nofollow noreferrer\">#6550</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed an issue that if a stale replica becomes alive, it may still have data parts that were removed by DROP PARTITION. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6522\" rel=\"external nofollow noreferrer\">#6522</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6523\" rel=\"external nofollow noreferrer\">#6523</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed issue with parsing CSV <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6426\" rel=\"external nofollow noreferrer\">#6426</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6559\" rel=\"external nofollow noreferrer\">#6559</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed data race in system.parts table and ALTER query. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6245\" rel=\"external nofollow noreferrer\">#6245</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6513\" rel=\"external nofollow noreferrer\">#6513</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6514\" rel=\"external nofollow noreferrer\">#6514</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed possible data loss after <code>ALTER DELETE</code> query on table with skipping index. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6224\" rel=\"external nofollow noreferrer\">#6224</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6282\" rel=\"external nofollow noreferrer\">#6282</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n</ul>\n<h4 id=\"security-fix_3\">Security Fix<a class=\"headerlink\" href=\"#security-fix_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>If the attacker has write access to ZooKeeper and is able to run custom server available from the network where ClickHouse run, it can create custom-built malicious server that will act as ClickHouse replica and register it in ZooKeeper. When another replica will fetch data part from malicious replica, it can force clickhouse-server to write to arbitrary path on filesystem. Found by Eldar Zaitov, information security team at Yandex. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6247\" rel=\"external nofollow noreferrer\">#6247</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-13-2-19-2019-08-14\">ClickHouse release 19.13.2.19, 2019-08-14<a class=\"headerlink\" href=\"#clickhouse-release-19-13-2-19-2019-08-14\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_1\">New Feature<a class=\"headerlink\" href=\"#new-feature_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Sampling profiler on query level. <a href=\"https://gist.github.com/alexey-milovidov/92758583dd41c24c360fdb8d6a4da194\" rel=\"external nofollow noreferrer\">Example</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4247\" rel=\"external nofollow noreferrer\">#4247</a> (<a href=\"https://github.com/laplab\" rel=\"external nofollow noreferrer\">laplab</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6124\" rel=\"external nofollow noreferrer\">#6124</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6250\" rel=\"external nofollow noreferrer\">#6250</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6283\" rel=\"external nofollow noreferrer\">#6283</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6386\" rel=\"external nofollow noreferrer\">#6386</a></li>\n<li>Allow to specify a list of columns with <code>COLUMNS('regexp')</code> expression that works like a more sophisticated variant of <code>*</code> asterisk. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5951\" rel=\"external nofollow noreferrer\">#5951</a>  (<a href=\"https://github.com/mfridental\" rel=\"external nofollow noreferrer\">mfridental</a>), (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>CREATE TABLE AS table_function()</code> is now possible <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6057\" rel=\"external nofollow noreferrer\">#6057</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Adam optimizer for stochastic gradient descent is used by default in <code>stochasticLinearRegression()</code> and <code>stochasticLogisticRegression()</code> aggregate functions, because it shows good quality without almost any tuning. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6000\" rel=\"external nofollow noreferrer\">#6000</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Added functions for working with the \u0441ustom week number <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5212\" rel=\"external nofollow noreferrer\">#5212</a> (<a href=\"https://github.com/andyyzh\" rel=\"external nofollow noreferrer\">Andy Yang</a>)</li>\n<li><code>RENAME</code> queries now work with all storages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5953\" rel=\"external nofollow noreferrer\">#5953</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Now client receive logs from server with any desired level by setting <code>send_logs_level</code> regardless to the log level specified in server settings. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5964\" rel=\"external nofollow noreferrer\">#5964</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_1\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The setting <code>input_format_defaults_for_omitted_fields</code> is enabled by default. Inserts in Distibuted tables need this setting to be the same on cluster (you need to set it before rolling update). It enables calculation of complex default expressions for omitted fields in <code>JSONEachRow</code> and <code>CSV*</code> formats. It should be the expected behaviour but may lead to negligible performance difference. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6043\" rel=\"external nofollow noreferrer\">#6043</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>), <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5625\" rel=\"external nofollow noreferrer\">#5625</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n</ul>\n<h4 id=\"experimental-features\">Experimental features<a class=\"headerlink\" href=\"#experimental-features\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>New query processing pipeline. Use <code>experimental_use_processors=1</code> option to enable it. Use for your own trouble. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4914\" rel=\"external nofollow noreferrer\">#4914</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h4 id=\"bug-fix_6\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Kafka integration has been fixed in this version.</li>\n<li>Fixed <code>DoubleDelta</code> encoding of <code>Int64</code> for large <code>DoubleDelta</code> values, improved <code>DoubleDelta</code> encoding for random data for <code>Int32</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5998\" rel=\"external nofollow noreferrer\">#5998</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Fixed overestimation of <code>max_rows_to_read</code> if the setting <code>merge_tree_uniform_read_distribution</code> is set to 0. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6019\" rel=\"external nofollow noreferrer\">#6019</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"improvement_1\">Improvement<a class=\"headerlink\" href=\"#improvement_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Throws an exception if <code>config.d</code> file doesn't have the corresponding root element as the config file <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6123\" rel=\"external nofollow noreferrer\">#6123</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n</ul>\n<h4 id=\"performance-improvement_1\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Optimize <code>count()</code>. Now it uses the smallest column (if possible). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6028\" rel=\"external nofollow noreferrer\">#6028</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_2\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Report memory usage in performance tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5899\" rel=\"external nofollow noreferrer\">#5899</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">a");
            
            document.write("kuzm</a>)</li>\n<li>Fix build with external <code>libcxx</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6010\" rel=\"external nofollow noreferrer\">#6010</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix shared build with <code>rdkafka</code> library <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6101\" rel=\"external nofollow noreferrer\">#6101</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-8-46-2019-08-22\">ClickHouse release 19.11.8.46, 2019-08-22<a class=\"headerlink\" href=\"#clickhouse-release-19-11-8-46-2019-08-22\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_7\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix <code>ALTER TABLE ... UPDATE</code> query for tables with <code>enable_mixed_granularity_parts=1</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6543\" rel=\"external nofollow noreferrer\">#6543</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix NPE when using IN clause with a subquery with a tuple. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6125\" rel=\"external nofollow noreferrer\">#6125</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6550\" rel=\"external nofollow noreferrer\">#6550</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed an issue that if a stale replica becomes alive, it may still have data parts that were removed by DROP PARTITION. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6522\" rel=\"external nofollow noreferrer\">#6522</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6523\" rel=\"external nofollow noreferrer\">#6523</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed issue with parsing CSV <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6426\" rel=\"external nofollow noreferrer\">#6426</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6559\" rel=\"external nofollow noreferrer\">#6559</a> (<a href=\"https://github.com/tavplubix\" rel=\"external nofollow noreferrer\">tavplubix</a>)</li>\n<li>Fixed data race in system.parts table and ALTER query. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6245\" rel=\"external nofollow noreferrer\">#6245</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6513\" rel=\"external nofollow noreferrer\">#6513</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code>0x14c0</code> that may happed due to concurrent <code>DROP TABLE</code> and <code>SELECT</code> from <code>system.parts</code> or <code>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6514\" rel=\"external nofollow noreferrer\">#6514</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-7-40-2019-08-14\">ClickHouse release 19.11.7.40, 2019-08-14<a class=\"headerlink\" href=\"#clickhouse-release-19-11-7-40-2019-08-14\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_8\">Bug fix<a class=\"headerlink\" href=\"#bug-fix_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Kafka integration has been fixed in this version.</li>\n<li>Fix segfault when using <code>arrayReduce</code> for constant arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6326\" rel=\"external nofollow noreferrer\">#6326</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed <code>toFloat()</code> monotonicity. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6374\" rel=\"external nofollow noreferrer\">#6374</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Fix segfault with enabled <code>optimize_skip_unused_shards</code> and missing sharding key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6384\" rel=\"external nofollow noreferrer\">#6384</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">CurtizJ</a>)</li>\n<li>Fixed logic of <code>arrayEnumerateUniqRanked</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6423\" rel=\"external nofollow noreferrer\">#6423</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Removed extra verbose logging from MySQL handler. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6389\" rel=\"external nofollow noreferrer\">#6389</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix wrong behavior and possible segfaults in <code>topK</code> and <code>topKWeighted</code> aggregated functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6404\" rel=\"external nofollow noreferrer\">#6404</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">CurtizJ</a>)</li>\n<li>Do not expose virtual columns in <code>system.columns</code> table. This is required for backward compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6406\" rel=\"external nofollow noreferrer\">#6406</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug with memory allocation for string fields in complex key cache dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6447\" rel=\"external nofollow noreferrer\">#6447</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix bug with enabling adaptive granularity when creating new replica for <code>Replicated*MergeTree</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6452\" rel=\"external nofollow noreferrer\">#6452</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix infinite loop when reading Kafka messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6354\" rel=\"external nofollow noreferrer\">#6354</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">abyss7</a>)</li>\n<li>Fixed the possibility of a fabricated query to cause server crash due to stack overflow in SQL parser and possibility of stack overflow in <code>Merge</code> and <code>Distributed</code> tables <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6433\" rel=\"external nofollow noreferrer\">#6433</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed Gorilla encoding error on small sequences. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6444\" rel=\"external nofollow noreferrer\">#6444</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Enmk</a>)</li>\n</ul>\n<h4 id=\"improvement_2\">Improvement<a class=\"headerlink\" href=\"#improvement_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Allow user to override <code>poll_interval</code> and <code>idle_connection_timeout</code> settings on connection. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6230\" rel=\"external nofollow noreferrer\">#6230</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-5-28-2019-08-05\">ClickHouse release 19.11.5.28, 2019-08-05<a class=\"headerlink\" href=\"#clickhouse-release-19-11-5-28-2019-08-05\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_9\">Bug fix<a class=\"headerlink\" href=\"#bug-fix_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the possibility of hanging queries when server is overloaded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6301\" rel=\"external nofollow noreferrer\">#6301</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix FPE in yandexConsistentHash function. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6304\" rel=\"external nofollow noreferrer\">#6304</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6126\" rel=\"external nofollow noreferrer\">#6126</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed bug in conversion of <code>LowCardinality</code> types in <code>AggregateFunctionFactory</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6257\" rel=\"external nofollow noreferrer\">#6257</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6281\" rel=\"external nofollow noreferrer\">#6281</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix parsing of <code>bool</code> settings from <code>true</code> and <code>false</code> strings in configuration files. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6278\" rel=\"external nofollow noreferrer\">#6278</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix rare bug with incompatible stream headers in queries to <code>Distributed</code> table over <code>MergeTree</code> table when part of <code>WHERE</code> moves to <code>PREWHERE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6236\" rel=\"external nofollow noreferrer\">#6236</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed overflow in integer division of signed type to unsigned type. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6214\" rel=\"external nofollow noreferrer\">#6214</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6233\" rel=\"external nofollow noreferrer\">#6233</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferr");
            
            document.write("er\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_2\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>Kafka</code> still broken.</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-4-24-2019-08-01\">ClickHouse release 19.11.4.24, 2019-08-01<a class=\"headerlink\" href=\"#clickhouse-release-19-11-4-24-2019-08-01\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_10\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix bug with writing secondary indices marks with adaptive granularity. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6126\" rel=\"external nofollow noreferrer\">#6126</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix <code>WITH ROLLUP</code> and <code>WITH CUBE</code> modifiers of <code>GROUP BY</code> with two-level aggregation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6225\" rel=\"external nofollow noreferrer\">#6225</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed hang in <code>JSONExtractRaw</code> function. Fixed <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6195\" rel=\"external nofollow noreferrer\">#6195</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6198\" rel=\"external nofollow noreferrer\">#6198</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix segfault in ExternalLoader::reloadOutdated(). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6082\" rel=\"external nofollow noreferrer\">#6082</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fixed the case when server may close listening sockets but not shutdown and continue serving remaining queries. You may end up with two running clickhouse-server processes. Sometimes, the server may return an error <code>bad_function_call</code> for remaining queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6231\" rel=\"external nofollow noreferrer\">#6231</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed useless and incorrect condition on update field for initial loading of external dictionaries via ODBC, MySQL, ClickHouse and HTTP. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6069\" rel=\"external nofollow noreferrer\">#6069</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6083\" rel=\"external nofollow noreferrer\">#6083</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed irrelevant exception in cast of <code>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn't contain Nulls (e.g. in query like <code>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/6094\" rel=\"external nofollow noreferrer\">#6094</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6119\" rel=\"external nofollow noreferrer\">#6119</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix non-deterministic result of \"uniq\" aggregate function in extreme rare cases. The bug was present in all ClickHouse versions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6058\" rel=\"external nofollow noreferrer\">#6058</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Segfault when we set a little bit too high CIDR on the function <code>IPv6CIDRToRange</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6068\" rel=\"external nofollow noreferrer\">#6068</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Fixed small memory leak when server throw many exceptions from many different contexts. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6144\" rel=\"external nofollow noreferrer\">#6144</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix the situation when consumer got paused before subscription and not resumed afterwards. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6075\" rel=\"external nofollow noreferrer\">#6075</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>) Note that Kafka is broken in this version.</li>\n<li>Clearing the Kafka data buffer from the previous read operation that was completed with an error <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6026\" rel=\"external nofollow noreferrer\">#6026</a> (<a href=\"https://github.com/bopohaa\" rel=\"external nofollow noreferrer\">Nikolay</a>) Note that Kafka is broken in this version.</li>\n<li>Since <code>StorageMergeTree::background_task_handle</code> is initialized in <code>startup()</code> the <code>MergeTreeBlockOutputStream::write()</code> may try to use it before initialization. Just check if it is initialized. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6080\" rel=\"external nofollow noreferrer\">#6080</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_3\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added official <code>rpm</code> packages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5740\" rel=\"external nofollow noreferrer\">#5740</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>) (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add an ability to build <code>.rpm</code> and <code>.tgz</code> packages with <code>packager</code> script. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5769\" rel=\"external nofollow noreferrer\">#5769</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixes for \"Arcadia\" build system. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6223\" rel=\"external nofollow noreferrer\">#6223</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_3\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>Kafka</code> is broken in this version.</li>\n</ul>\n<h3 id=\"clickhouse-release-19-11-3-11-2019-07-18\">ClickHouse release 19.11.3.11, 2019-07-18<a class=\"headerlink\" href=\"#clickhouse-release-19-11-3-11-2019-07-18\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_2\">New Feature<a class=\"headerlink\" href=\"#new-feature_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for prepared statements. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5331/\" rel=\"external nofollow noreferrer\">#5331</a> (<a href=\"https://github.com/sanych73\" rel=\"external nofollow noreferrer\">Alexander</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5630\" rel=\"external nofollow noreferrer\">#5630</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>DoubleDelta</code> and <code>Gorilla</code> column codecs <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5600\" rel=\"external nofollow noreferrer\">#5600</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Added <code>os_thread_priority</code> setting that allows to control the \"nice\" value of query processing threads that is used by OS to adjust dynamic scheduling priority. It requires <code>CAP_SYS_NICE</code> capabilities to work. This implements <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5858\" rel=\"external nofollow noreferrer\">#5858</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5909\" rel=\"external nofollow noreferrer\">#5909</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Implement <code>_topic</code>, <code>_offset</code>, <code>_key</code> columns for Kafka engine <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5382\" rel=\"external nofollow noreferrer\">#5382</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>) Note that Kafka is broken in this version.</li>\n<li>Add aggregate function combinator <code>-Resample</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5590\" rel=\"external nofollow noreferrer\">#5590</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Aggregate functions <code>groupArrayMovingSum(win_size)(x)</code> and <code>groupArrayMovingAvg(win_size)(x)</code>, which calculate moving sum/avg with or without window-size limitation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5595\" rel=\"external nofollow noreferrer\">#5595</a> (<a href=\"https://github.com/inv2004\" rel=\"external nofollow noreferrer\">inv2004</a>)</li>\n<li>Add synonim <code>arrayFlatten</code> &lt;-&gt; <code>flatten</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5764\" rel=\"external nofollow noreferrer\">#5764</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Intergate H3 function <code>geoToH3</code> from Uber. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4724\" rel=\"external nofollow noreferrer\">#4724</a> (<a href=\"https://github.com/BHYCHIK\" rel=\"external nofollow noreferrer\">Remen Ivan</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5805\" rel=\"external nofollow noreferrer\">#5805</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"bug-fix_11\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Implement DNS cache with asynchronous update. Separate thread resolv");
            
            document.write("es all hosts and updates DNS cache with period (setting <code>dns_cache_update_period</code>). It should help, when ip of hosts changes frequently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5857\" rel=\"external nofollow noreferrer\">#5857</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix segfault in <code>Delta</code> codec which affects columns with values less than 32 bits size. The bug led to random memory corruption. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5786\" rel=\"external nofollow noreferrer\">#5786</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix segfault in TTL merge with non-physical columns in block. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5819\" rel=\"external nofollow noreferrer\">#5819</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix rare bug in checking of part with <code>LowCardinality</code> column. Previously <code>checkDataPart</code> always fails for part with <code>LowCardinality</code> column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5832\" rel=\"external nofollow noreferrer\">#5832</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Avoid hanging connections when server thread pool is full. It is important for connections from <code>remote</code> table function or connections to a shard without replicas when there is long connection timeout. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5878\" rel=\"external nofollow noreferrer\">#5878</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5881\" rel=\"external nofollow noreferrer\">#5881</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Support for constant arguments to <code>evalMLModel</code> function. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5817\" rel=\"external nofollow noreferrer\">#5817</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5820\" rel=\"external nofollow noreferrer\">#5820</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed the issue when ClickHouse determines default time zone as <code>UCT</code> instead of <code>UTC</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5804\" rel=\"external nofollow noreferrer\">#5804</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5828\" rel=\"external nofollow noreferrer\">#5828</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed buffer underflow in <code>visitParamExtractRaw</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5901\" rel=\"external nofollow noreferrer\">#5901</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5902\" rel=\"external nofollow noreferrer\">#5902</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Now distributed <code>DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER</code> queries will be executed directly on leader replica. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5757\" rel=\"external nofollow noreferrer\">#5757</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix <code>coalesce</code> for <code>ColumnConst</code> with <code>ColumnNullable</code> + related changes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5755\" rel=\"external nofollow noreferrer\">#5755</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix the <code>ReadBufferFromKafkaConsumer</code> so that it keeps reading new messages after <code>commit()</code> even if it was stalled before <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5852\" rel=\"external nofollow noreferrer\">#5852</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix <code>FULL</code> and <code>RIGHT</code> JOIN results when joining on <code>Nullable</code> keys in right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5859\" rel=\"external nofollow noreferrer\">#5859</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Possible fix of infinite sleeping of low-priority queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5842\" rel=\"external nofollow noreferrer\">#5842</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix race condition, which cause that some queries may not appear in query_log after <code>SYSTEM FLUSH LOGS</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5456\" rel=\"external nofollow noreferrer\">#5456</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5685\" rel=\"external nofollow noreferrer\">#5685</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fixed <code>heap-use-after-free</code> ASan warning in ClusterCopier caused by watch which try to use already removed copier object. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5871\" rel=\"external nofollow noreferrer\">#5871</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed wrong <code>StringRef</code> pointer returned by some implementations of <code>IColumn::deserializeAndInsertFromArena</code>. This bug affected only unit-tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5973\" rel=\"external nofollow noreferrer\">#5973</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Prevent source and intermediate array join columns of masking same name columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5941\" rel=\"external nofollow noreferrer\">#5941</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix insert and select query to MySQL engine with MySQL style identifier quoting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5704\" rel=\"external nofollow noreferrer\">#5704</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Now <code>CHECK TABLE</code> query can work with MergeTree engine family. It returns check status and message if any for each part (or file in case of simplier engines). Also, fix bug in fetch of a broken part. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5865\" rel=\"external nofollow noreferrer\">#5865</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix SPLIT_SHARED_LIBRARIES runtime <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5793\" rel=\"external nofollow noreferrer\">#5793</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fixed time zone initialization when <code>/etc/localtime</code> is a relative symlink like <code>../usr/share/zoneinfo/Europe/Moscow</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5922\" rel=\"external nofollow noreferrer\">#5922</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>clickhouse-copier: Fix use-after free on shutdown <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5752\" rel=\"external nofollow noreferrer\">#5752</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Updated <code>simdjson</code>. Fixed the issue that some invalid JSONs with zero bytes successfully parse. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5938\" rel=\"external nofollow noreferrer\">#5938</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix shutdown of SystemLogs <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5802\" rel=\"external nofollow noreferrer\">#5802</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix hanging when condition in invalidate_query depends on a dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/6011\" rel=\"external nofollow noreferrer\">#6011</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n</ul>\n<h4 id=\"improvement_3\">Improvement<a class=\"headerlink\" href=\"#improvement_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Allow unresolvable addresses in cluster configuration. They will be considered unavailable and tried to resolve at every connection attempt. This is especially useful for Kubernetes. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5714\" rel=\"external nofollow noreferrer\">#5714</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5924\" rel=\"external nofollow noreferrer\">#5924</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Close idle TCP connections (with one hour timeout by default). This is especially important for large clusters with multiple distributed tables on every server, because every server can possibly keep a connection pool to every other server, and after peak query concurrency, connections will stall. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5879\" rel=\"external nofollow noreferrer\">#5879</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5880\" rel=\"external nofollow noreferrer\">#5880</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Better quality of <code>topK</code> function. Changed the SavingSpace set behavior to remove the last element if the new element have a bigger weight. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5833\" rel=\"external nofollow noreferrer\">#5833</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5850\" rel=\"external nofollow noreferrer\">#5850</a> (<a hre");
            
            document.write("f=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>URL functions to work with domains now can work for incomplete URLs without scheme <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5725\" rel=\"external nofollow noreferrer\">#5725</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Checksums added to the <code>system.parts_columns</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5874\" rel=\"external nofollow noreferrer\">#5874</a> (<a href=\"https://github.com/nikitamikhaylov\" rel=\"external nofollow noreferrer\">Nikita Mikhaylov</a>)</li>\n<li>Added <code>Enum</code> data type as a synonim for <code>Enum8</code> or <code>Enum16</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5886\" rel=\"external nofollow noreferrer\">#5886</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Full bit transpose variant for <code>T64</code> codec. Could lead to better compression with <code>zstd</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5742\" rel=\"external nofollow noreferrer\">#5742</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Condition on <code>startsWith</code> function now can uses primary key. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5310\" rel=\"external nofollow noreferrer\">#5310</a> and <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5882\" rel=\"external nofollow noreferrer\">#5882</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5919\" rel=\"external nofollow noreferrer\">#5919</a> (<a href=\"https://github.com/dimarub2000\" rel=\"external nofollow noreferrer\">dimarub2000</a>)</li>\n<li>Allow to use <code>clickhouse-copier</code> with cross-replication cluster topology by permitting empty database name. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5745\" rel=\"external nofollow noreferrer\">#5745</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Use <code>UTC</code> as default timezone on a system without <code>tzdata</code> (e.g. bare Docker container). Before this patch, error message <code>Could not determine local time zone</code> was printed and server or client refused to start. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5827\" rel=\"external nofollow noreferrer\">#5827</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Returned back support for floating point argument in function <code>quantileTiming</code> for backward compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5911\" rel=\"external nofollow noreferrer\">#5911</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Show which table is missing column in error messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5768\" rel=\"external nofollow noreferrer\">#5768</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Disallow run query with same query_id by various users <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5430\" rel=\"external nofollow noreferrer\">#5430</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>More robust code for sending metrics to Graphite. It will work even during long multiple <code>RENAME TABLE</code> operation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5875\" rel=\"external nofollow noreferrer\">#5875</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>More informative error messages will be displayed when ThreadPool cannot schedule a task for execution. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5305\" rel=\"external nofollow noreferrer\">#5305</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5801\" rel=\"external nofollow noreferrer\">#5801</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Inverting ngramSearch to be more intuitive <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5807\" rel=\"external nofollow noreferrer\">#5807</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Add user parsing in HDFS engine builder <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5946\" rel=\"external nofollow noreferrer\">#5946</a> (<a href=\"https://github.com/akonyaev90\" rel=\"external nofollow noreferrer\">akonyaev90</a>)</li>\n<li>Update default value of <code>max_ast_elements parameter</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5933\" rel=\"external nofollow noreferrer\">#5933</a> (<a href=\"https://github.com/izebit\" rel=\"external nofollow noreferrer\">Artem Konovalov</a>)</li>\n<li>Added a notion of obsolete settings. The obsolete setting <code>allow_experimental_low_cardinality_type</code> can be used with no effect. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/0f15c01c6802f7ce1a1494c12c846be8c98944cd\" rel=\"external nofollow noreferrer\">0f15c01c6802f7ce1a1494c12c846be8c98944cd</a> <a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">Alexey Milovidov</a></li>\n</ul>\n<h4 id=\"performance-improvement_2\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Increase number of streams to SELECT from Merge table for more uniform distribution of threads. Added setting <code>max_streams_multiplier_for_merge_tables</code>. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5797\" rel=\"external nofollow noreferrer\">#5797</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5915\" rel=\"external nofollow noreferrer\">#5915</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_4\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a backward compatibility test for client-server interaction with different versions of clickhouse. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5868\" rel=\"external nofollow noreferrer\">#5868</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Test coverage information in every commit and pull request. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5896\" rel=\"external nofollow noreferrer\">#5896</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Cooperate with address sanitizer to support our custom allocators (<code>Arena</code> and <code>ArenaWithFreeLists</code>) for better debugging of \"use-after-free\" errors. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5728\" rel=\"external nofollow noreferrer\">#5728</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Switch to <a href=\"https://github.com/llvm-mirror/libunwind\" rel=\"external nofollow noreferrer\">LLVM libunwind implementation</a> for C++ exception handling and for stack traces printing <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4828\" rel=\"external nofollow noreferrer\">#4828</a> (<a href=\"https://github.com/laplab\" rel=\"external nofollow noreferrer\">Nikita Lapkov</a>)</li>\n<li>Add two more warnings from -Weverything <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5923\" rel=\"external nofollow noreferrer\">#5923</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow to build ClickHouse with Memory Sanitizer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3949\" rel=\"external nofollow noreferrer\">#3949</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed ubsan report about <code>bitTest</code> function in fuzz test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5943\" rel=\"external nofollow noreferrer\">#5943</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Docker: added possibility to init a ClickHouse instance which requires authentication. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5727\" rel=\"external nofollow noreferrer\">#5727</a> (<a href=\"https://github.com/shurshun\" rel=\"external nofollow noreferrer\">Korviakov Andrey</a>)</li>\n<li>Update librdkafka to version 1.1.0 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5872\" rel=\"external nofollow noreferrer\">#5872</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Add global timeout for integration tests and disable some of them in tests code. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5741\" rel=\"external nofollow noreferrer\">#5741</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix some ThreadSanitizer failures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5854\" rel=\"external nofollow noreferrer\">#5854</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>The <code>--no-undefined</code> option forces the linker to check all external names for existence while linking. It's very useful to track real dependencies between libraries in the split build mode. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5855\" rel=\"external nofollow noreferrer\">#5855</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Added performance test for <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5797\" rel=\"external nofollow noreferrer\">#5797</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5914\" rel=\"external nofollow noreferrer\">#5914</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed com");
            
            document.write("patibility with gcc-7. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5840\" rel=\"external nofollow noreferrer\">#5840</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added support for gcc-9. This fixes <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5717\" rel=\"external nofollow noreferrer\">#5717</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5774\" rel=\"external nofollow noreferrer\">#5774</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error when libunwind can be linked incorrectly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5948\" rel=\"external nofollow noreferrer\">#5948</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a few warnings found by PVS-Studio. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5921\" rel=\"external nofollow noreferrer\">#5921</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added initial support for <code>clang-tidy</code> static analyzer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5806\" rel=\"external nofollow noreferrer\">#5806</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Convert BSD/Linux endian macros( 'be64toh' and 'htobe64') to the Mac OS X equivalents <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5785\" rel=\"external nofollow noreferrer\">#5785</a> (<a href=\"https://github.com/fredchenbj\" rel=\"external nofollow noreferrer\">Fu Chen</a>)</li>\n<li>Improved integration tests guide. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5796\" rel=\"external nofollow noreferrer\">#5796</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir Chebotarev</a>)</li>\n<li>Fixing build at macosx + gcc9 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5822\" rel=\"external nofollow noreferrer\">#5822</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Fix a hard-to-spot typo: aggreAGte -&gt; aggregate. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5753\" rel=\"external nofollow noreferrer\">#5753</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fix freebsd build <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5760\" rel=\"external nofollow noreferrer\">#5760</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Add link to experimental YouTube channel to website <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5845\" rel=\"external nofollow noreferrer\">#5845</a> (<a href=\"https://github.com/blinkov\" rel=\"external nofollow noreferrer\">Ivan Blinkov</a>)</li>\n<li>CMake: add option for coverage flags: WITH_COVERAGE <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5776\" rel=\"external nofollow noreferrer\">#5776</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix initial size of some inline PODArray's. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5787\" rel=\"external nofollow noreferrer\">#5787</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>clickhouse-server.postinst: fix os detection for centos 6 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5788\" rel=\"external nofollow noreferrer\">#5788</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added Arch linux package generation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5719\" rel=\"external nofollow noreferrer\">#5719</a> (<a href=\"https://github.com/excitoon\" rel=\"external nofollow noreferrer\">Vladimir Chebotarev</a>)</li>\n<li>Split Common/config.h by libs (dbms) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5715\" rel=\"external nofollow noreferrer\">#5715</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixes for \"Arcadia\" build platform <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5795\" rel=\"external nofollow noreferrer\">#5795</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixes for unconventional build (gcc9, no submodules) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5792\" rel=\"external nofollow noreferrer\">#5792</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Require explicit type in unalignedStore because it was proven to be bug-prone <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5791\" rel=\"external nofollow noreferrer\">#5791</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Fixes MacOS build <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5830\" rel=\"external nofollow noreferrer\">#5830</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Performance test concerning the new JIT feature with bigger dataset, as requested here <a href=\"https://github.com/ClickHouse/ClickHouse/issues/5263\" rel=\"external nofollow noreferrer\">#5263</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5887\" rel=\"external nofollow noreferrer\">#5887</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Run stateful tests in stress test <a href=\"https://github.com/ClickHouse/ClickHouse/commit/12693e568722f11e19859742f56428455501fd2a\" rel=\"external nofollow noreferrer\">12693e568722f11e19859742f56428455501fd2a</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_4\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>Kafka</code> is broken in this version.</li>\n<li>Enable <code>adaptive_index_granularity</code> = 10MB by default for new <code>MergeTree</code> tables. If you created new MergeTree tables on version 19.11+, downgrade to versions prior to 19.6 will be impossible. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5628\" rel=\"external nofollow noreferrer\">#5628</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Removed obsolete undocumented embedded dictionaries that were used by Yandex.Metrica. The functions <code>OSIn</code>, <code>SEIn</code>, <code>OSToRoot</code>, <code>SEToRoot</code>, <code>OSHierarchy</code>, <code>SEHierarchy</code> are no longer available. If you are using these functions, write email to <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;\">&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;</a>. Note: at the last moment we decided to keep these functions for a while. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5780\" rel=\"external nofollow noreferrer\">#5780</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-10-1-5-2019-07-12\">ClickHouse release 19.10.1.5, 2019-07-12<a class=\"headerlink\" href=\"#clickhouse-release-19-10-1-5-2019-07-12\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_3\">New Feature<a class=\"headerlink\" href=\"#new-feature_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add new column codec: <code>T64</code>. Made for (U)IntX/EnumX/Data(Time)/DecimalX columns. It should be good for columns with constant or small range values. Codec itself allows enlarge or shrink data type without re-compression. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5557\" rel=\"external nofollow noreferrer\">#5557</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Add database engine <code>MySQL</code> that allow to view all the tables in remote MySQL server <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5599\" rel=\"external nofollow noreferrer\">#5599</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li><code>bitmapContains</code> implementation. It's 2x faster than <code>bitmapHasAny</code> if the second bitmap contains one element. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5535\" rel=\"external nofollow noreferrer\">#5535</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Support for <code>crc32</code> function (with behaviour exactly as in MySQL or PHP). Do not use it if you need a hash function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5661\" rel=\"external nofollow noreferrer\">#5661</a> (<a href=\"https://github.com/BHYCHIK\" rel=\"external nofollow noreferrer\">Remen Ivan</a>)</li>\n<li>Implemented <code>SYSTEM START/STOP DISTRIBUTED SENDS</code> queries to control asynchronous inserts into <code>Distributed</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4935\" rel=\"external nofollow noreferrer\">#4935</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n</ul>\n<h4 id=\"bug-fix_12\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Ignore query execution limits and max parts size for merge limits while executing mutations. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5659\" rel=\"external nofollow noreferrer\">#5659</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix bug which may lead to deduplication of normal blocks (extremely rare) and insertion of duplicate blocks (more often). <a href=\"https://github.com/ClickHouse/");
            
            document.write("ClickHouse/pull/5549\" rel=\"external nofollow noreferrer\">#5549</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix of function <code>arrayEnumerateUniqRanked</code> for arguments with empty arrays <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5559\" rel=\"external nofollow noreferrer\">#5559</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Don't subscribe to Kafka topics without intent to poll any messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5698\" rel=\"external nofollow noreferrer\">#5698</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Make setting <code>join_use_nulls</code> get no effect for types that cannot be inside Nullable <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5700\" rel=\"external nofollow noreferrer\">#5700</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Fixed <code>Incorrect size of index granularity</code> errors <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5720\" rel=\"external nofollow noreferrer\">#5720</a> (<a href=\"https://github.com/coraxster\" rel=\"external nofollow noreferrer\">coraxster</a>)</li>\n<li>Fix Float to Decimal convert overflow <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5607\" rel=\"external nofollow noreferrer\">#5607</a> (<a href=\"https://github.com/coraxster\" rel=\"external nofollow noreferrer\">coraxster</a>)</li>\n<li>Flush buffer when <code>WriteBufferFromHDFS</code>'s destructor is called. This fixes writing into <code>HDFS</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5684\" rel=\"external nofollow noreferrer\">#5684</a> (<a href=\"https://github.com/eejoin\" rel=\"external nofollow noreferrer\">Xindong Peng</a>)</li>\n</ul>\n<h4 id=\"improvement_4\">Improvement<a class=\"headerlink\" href=\"#improvement_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Treat empty cells in <code>CSV</code> as default values when the setting <code>input_format_defaults_for_omitted_fields</code> is enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5625\" rel=\"external nofollow noreferrer\">#5625</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Non-blocking loading of external dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5567\" rel=\"external nofollow noreferrer\">#5567</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Network timeouts can be dynamically changed for already established connections according to the settings. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4558\" rel=\"external nofollow noreferrer\">#4558</a> (<a href=\"https://github.com/podshumok\" rel=\"external nofollow noreferrer\">Konstantin Podshumok</a>)</li>\n<li>Using \"public_suffix_list\" for functions <code>firstSignificantSubdomain</code>, <code>cutToFirstSignificantSubdomain</code>. It's using a perfect hash table generated by <code>gperf</code> with a list generated from the file: <a href=\"https://publicsuffix.org/list/public_suffix_list.dat\" rel=\"external nofollow noreferrer\">https://publicsuffix.org/list/public_suffix_list.dat</a>. (for example, now we recognize the domain <code>ac.uk</code> as non-significant). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5030\" rel=\"external nofollow noreferrer\">#5030</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Adopted <code>IPv6</code> data type in system tables; unified client info columns in <code>system.processes</code> and <code>system.query_log</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5640\" rel=\"external nofollow noreferrer\">#5640</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Using sessions for connections with MySQL compatibility protocol. #5476 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5646\" rel=\"external nofollow noreferrer\">#5646</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Support more <code>ALTER</code> queries <code>ON CLUSTER</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5593\" rel=\"external nofollow noreferrer\">#5593</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5613\" rel=\"external nofollow noreferrer\">#5613</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Support <code>&lt;logger&gt;</code> section in <code>clickhouse-local</code> config file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5540\" rel=\"external nofollow noreferrer\">#5540</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Allow run query with <code>remote</code> table function in <code>clickhouse-local</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5627\" rel=\"external nofollow noreferrer\">#5627</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"performance-improvement_3\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add the possibility to write the final mark at the end of MergeTree columns. It allows to avoid useless reads for keys that are out of table data range. It is enabled only if adaptive index granularity is in use. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5624\" rel=\"external nofollow noreferrer\">#5624</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Improved performance of MergeTree tables on very slow filesystems by reducing number of <code>stat</code> syscalls. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5648\" rel=\"external nofollow noreferrer\">#5648</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed performance degradation in reading from MergeTree tables that was introduced in version 19.6. Fixes #5631. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5633\" rel=\"external nofollow noreferrer\">#5633</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_5\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Implemented <code>TestKeeper</code> as an implementation of ZooKeeper interface used for testing <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5643\" rel=\"external nofollow noreferrer\">#5643</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>) (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">levushkin aleksej</a>)</li>\n<li>From now on <code>.sql</code> tests can be run isolated by server, in parallel, with random database. It allows to run them faster, add new tests with custom server configurations, and be sure that different tests doesn't affect each other. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5554\" rel=\"external nofollow noreferrer\">#5554</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Remove <code>&lt;name&gt;</code> and <code>&lt;metrics&gt;</code> from performance tests <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5672\" rel=\"external nofollow noreferrer\">#5672</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Fixed \"select_format\" performance test for <code>Pretty</code> formats <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5642\" rel=\"external nofollow noreferrer\">#5642</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-9-3-31-2019-07-05\">ClickHouse release 19.9.3.31, 2019-07-05<a class=\"headerlink\" href=\"#clickhouse-release-19-9-3-31-2019-07-05\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_13\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix segfault in Delta codec which affects columns with values less than 32 bits size. The bug led to random memory corruption. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5786\" rel=\"external nofollow noreferrer\">#5786</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix rare bug in checking of part with LowCardinality column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5832\" rel=\"external nofollow noreferrer\">#5832</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix segfault in TTL merge with non-physical columns in block. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5819\" rel=\"external nofollow noreferrer\">#5819</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix potential infinite sleeping of low-priority queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5842\" rel=\"external nofollow noreferrer\">#5842</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix how ClickHouse determines default time zone as UCT instead of UTC. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5828\" rel=\"external nofollow noreferrer\">#5828</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug about executing distributed DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER queries on follower replica before leader replica. Now they will be executed directly on leader replica. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5757\" rel=\"external nofollow noreferrer\">#5757</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix race condition, which cause that so");
            
            document.write("me queries may not appear in query_log instantly after SYSTEM FLUSH LOGS query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5685\" rel=\"external nofollow noreferrer\">#5685</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Added missing support for constant arguments to <code>evalMLModel</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5820\" rel=\"external nofollow noreferrer\">#5820</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-7-5-29-2019-07-05\">ClickHouse release 19.7.5.29, 2019-07-05<a class=\"headerlink\" href=\"#clickhouse-release-19-7-5-29-2019-07-05\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fix_14\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix performance regression in some queries with JOIN. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5192\" rel=\"external nofollow noreferrer\">#5192</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-9-2-4-2019-06-24\">ClickHouse release 19.9.2.4, 2019-06-24<a class=\"headerlink\" href=\"#clickhouse-release-19-9-2-4-2019-06-24\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-feature_4\">New Feature<a class=\"headerlink\" href=\"#new-feature_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Print information about frozen parts in <code>system.parts</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5471\" rel=\"external nofollow noreferrer\">#5471</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Ask client password on clickhouse-client start on tty if not set in arguments <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5092\" rel=\"external nofollow noreferrer\">#5092</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Implement <code>dictGet</code> and <code>dictGetOrDefault</code> functions for Decimal types. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5394\" rel=\"external nofollow noreferrer\">#5394</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"improvement_5\">Improvement<a class=\"headerlink\" href=\"#improvement_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Debian init: Add service stop timeout <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5522\" rel=\"external nofollow noreferrer\">#5522</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Add setting forbidden by default to create table with suspicious types for LowCardinality <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5448\" rel=\"external nofollow noreferrer\">#5448</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Regression functions return model weights when not used as State in function <code>evalMLMethod</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5411\" rel=\"external nofollow noreferrer\">#5411</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Rename and improve regression methods. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5492\" rel=\"external nofollow noreferrer\">#5492</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Clearer interfaces of string searchers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5586\" rel=\"external nofollow noreferrer\">#5586</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n</ul>\n<h4 id=\"bug-fix_15\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix potential data loss in Kafka <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5445\" rel=\"external nofollow noreferrer\">#5445</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix potential infinite loop in <code>PrettySpace</code> format when called with zero columns <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5560\" rel=\"external nofollow noreferrer\">#5560</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Fixed UInt32 overflow bug in linear models. Allow eval ML model for non-const model argument. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5516\" rel=\"external nofollow noreferrer\">#5516</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li><code>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> should not raise an exception if provided index does not exist <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5524\" rel=\"external nofollow noreferrer\">#5524</a> (<a href=\"https://github.com/NanoBjorn\" rel=\"external nofollow noreferrer\">Gleb Novikov</a>)</li>\n<li>Fix segfault with <code>bitmapHasAny</code> in scalar subquery <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5528\" rel=\"external nofollow noreferrer\">#5528</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Fixed error when replication connection pool doesn't retry to resolve host, even when DNS cache was dropped. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5534\" rel=\"external nofollow noreferrer\">#5534</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>ALTER ... MODIFY TTL</code> on ReplicatedMergeTree. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5539\" rel=\"external nofollow noreferrer\">#5539</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Fix INSERT into Distributed table with MATERIALIZED column <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5429\" rel=\"external nofollow noreferrer\">#5429</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix bad alloc when truncate Join storage <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5437\" rel=\"external nofollow noreferrer\">#5437</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>)</li>\n<li>In recent versions of package tzdata some of files are symlinks now. The current mechanism for detecting default timezone gets broken and gives wrong names for some timezones. Now at least we force the timezone name to the contents of TZ if provided. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5443\" rel=\"external nofollow noreferrer\">#5443</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fix some extremely rare cases with MultiVolnitsky searcher when the constant needles in sum are at least 16KB long. The algorithm missed or overwrote the previous results which can lead to the incorrect result of <code>multiSearchAny</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5588\" rel=\"external nofollow noreferrer\">#5588</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fix the issue when settings for ExternalData requests couldn't use ClickHouse settings. Also, for now, settings <code>date_time_input_format</code> and <code>low_cardinality_allow_in_native_format</code> cannot be used because of the ambiguity of names (in external data it can be interpreted as table format and in the query it can be a setting). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5455\" rel=\"external nofollow noreferrer\">#5455</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fix bug when parts were removed only from FS without dropping them from Zookeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5520\" rel=\"external nofollow noreferrer\">#5520</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Remove debug logging from MySQL protocol <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5478\" rel=\"external nofollow noreferrer\">#5478</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Skip ZNONODE during DDL query processing <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5489\" rel=\"external nofollow noreferrer\">#5489</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix mix <code>UNION ALL</code> result column type. There were cases with inconsistent data and column types of resulting columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5503\" rel=\"external nofollow noreferrer\">#5503</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Throw an exception on wrong integers in <code>dictGetT</code> functions instead of crash. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5446\" rel=\"external nofollow noreferrer\">#5446</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix wrong element_count and load_factor for hashed dictionary in <code>system.dictionaries</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5440\" rel=\"external nofollow noreferrer\">#5440</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_6\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed build without <code>Brotli</code> HTTP compression support (<code>ENABLE_BROTLI=OFF</code> cmake variable). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5521\" rel=\"external nofollow noreferrer\">#5521</a> (<a href=\"https://github.com/citrin\" rel=\"external nofollow noreferrer\">Anton Yuzhaninov</a>)</li>\n<li>Include roaring.h as roaring/roaring.h <a href=\"https://github.com/ClickHouse/ClickHo");
            
            document.write("use/pull/5523\" rel=\"external nofollow noreferrer\">#5523</a> (<a href=\"https://github.com/orivej\" rel=\"external nofollow noreferrer\">Orivej Desh</a>)</li>\n<li>Fix gcc9 warnings in hyperscan (#line directive is evil!) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5546\" rel=\"external nofollow noreferrer\">#5546</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fix all warnings when compiling with gcc-9. Fix some contrib issues. Fix gcc9 ICE and submit it to bugzilla. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5498\" rel=\"external nofollow noreferrer\">#5498</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fixed linking with lld <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5477\" rel=\"external nofollow noreferrer\">#5477</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Remove unused specializations in dictionaries <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5452\" rel=\"external nofollow noreferrer\">#5452</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Improvement performance tests for formatting and parsing tables for different types of files <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5497\" rel=\"external nofollow noreferrer\">#5497</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n<li>Fixes for parallel test run <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5506\" rel=\"external nofollow noreferrer\">#5506</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Docker: use configs from clickhouse-test <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5531\" rel=\"external nofollow noreferrer\">#5531</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix compile for FreeBSD <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5447\" rel=\"external nofollow noreferrer\">#5447</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Upgrade boost to 1.70 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5570\" rel=\"external nofollow noreferrer\">#5570</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix build clickhouse as submodule <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5574\" rel=\"external nofollow noreferrer\">#5574</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Improve JSONExtract performance tests <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5444\" rel=\"external nofollow noreferrer\">#5444</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-8-3-8-2019-06-11\">ClickHouse release 19.8.3.8, 2019-06-11<a class=\"headerlink\" href=\"#clickhouse-release-19-8-3-8-2019-06-11\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features\">New Features<a class=\"headerlink\" href=\"#new-features\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added functions to work with JSON <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4686\" rel=\"external nofollow noreferrer\">#4686</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5124\" rel=\"external nofollow noreferrer\">#5124</a>. (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Add a function basename, with a similar behaviour to a basename function, which exists in a lot of languages (<code>os.path.basename</code> in python, <code>basename</code> in PHP, etc...). Work with both an UNIX-like path or a Windows path. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5136\" rel=\"external nofollow noreferrer\">#5136</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Added <code>LIMIT n, m BY</code> or <code>LIMIT m OFFSET n BY</code> syntax to set offset of n for LIMIT BY clause. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5138\" rel=\"external nofollow noreferrer\">#5138</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Added new data type <code>SimpleAggregateFunction</code>, which allows to have columns with light aggregation in an <code>AggregatingMergeTree</code>. This can only be used with simple functions like <code>any</code>, <code>anyLast</code>, <code>sum</code>, <code>min</code>, <code>max</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4629\" rel=\"external nofollow noreferrer\">#4629</a> (<a href=\"https://github.com/bgranvea\" rel=\"external nofollow noreferrer\">Boris Granveaud</a>)</li>\n<li>Added support for non-constant arguments in function <code>ngramDistance</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5198\" rel=\"external nofollow noreferrer\">#5198</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Added functions <code>skewPop</code>, <code>skewSamp</code>, <code>kurtPop</code> and <code>kurtSamp</code> to compute for sequence skewness, sample skewness, kurtosis and sample kurtosis respectively. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5200\" rel=\"external nofollow noreferrer\">#5200</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Support rename operation for <code>MaterializeView</code> storage. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5209\" rel=\"external nofollow noreferrer\">#5209</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Added server which allows connecting to ClickHouse using MySQL client. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4715\" rel=\"external nofollow noreferrer\">#4715</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Add <code>toDecimal*OrZero</code> and <code>toDecimal*OrNull</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5291\" rel=\"external nofollow noreferrer\">#5291</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Support Decimal types in functions: <code>quantile</code>, <code>quantiles</code>, <code>median</code>, <code>quantileExactWeighted</code>, <code>quantilesExactWeighted</code>, medianExactWeighted. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5304\" rel=\"external nofollow noreferrer\">#5304</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Added <code>toValidUTF8</code> function, which replaces all invalid UTF-8 characters by replacement character \ufffd (U+FFFD). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5322\" rel=\"external nofollow noreferrer\">#5322</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Added <code>format</code> function. Formatting constant pattern (simplified Python format pattern) with the strings listed in the arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5330\" rel=\"external nofollow noreferrer\">#5330</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Added <code>system.detached_parts</code> table containing information about detached parts of <code>MergeTree</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5353\" rel=\"external nofollow noreferrer\">#5353</a> (<a href=\"https://github.com/akuzm\" rel=\"external nofollow noreferrer\">akuzm</a>)</li>\n<li>Added <code>ngramSearch</code> function to calculate the non-symmetric difference between needle and haystack. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5418\" rel=\"external nofollow noreferrer\">#5418</a><a href=\"https://github.com/ClickHouse/ClickHouse/pull/5422\" rel=\"external nofollow noreferrer\">#5422</a>  (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Implementation of basic machine learning methods (stochastic linear regression and logistic regression) using aggregate functions interface. Has different strategies for updating model weights (simple gradient descent, momentum method, Nesterov method). Also supports mini-batches of custom size. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4943\" rel=\"external nofollow noreferrer\">#4943</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Implementation of <code>geohashEncode</code> and <code>geohashDecode</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5003\" rel=\"external nofollow noreferrer\">#5003</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Added aggregate function <code>timeSeriesGroupSum</code>, which can aggregate different time series that sample timestamp not alignment. It will use linear interpolation between two sample timestamp and then sum time-series together. Added aggregate function <code>timeSeriesGroupRateSum</code>, which calculates the rate of time-series and then sum rates together. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4542\" rel=\"external nofollow noreferrer\">#4542</a> (<a href=\"https://github.com/LiuYangkuan\" rel=\"external nofollow noreferrer\">Yangkuan Liu</a>)</li>\n<li>Added functions <code>IPv4CIDRtoIPv4Range</code> and <code>IPv6CIDRtoIPv6Range</code> to calculate the lower and higher bounds for an IP in the subnet using a CIDR. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5095\" rel=\"external nofollow noreferrer\">#5095</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n<li>Add a X-ClickHouse-Summary header when we send a query using HTTP with enabled setting <code>send_progress_in_http_headers</code>. Return the usual information of X-Cl");
            
            document.write("ickHouse-Progress, with additional information like how many rows and bytes were inserted in the query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5116\" rel=\"external nofollow noreferrer\">#5116</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume Tassery</a>)</li>\n</ul>\n<h4 id=\"improvements\">Improvements<a class=\"headerlink\" href=\"#improvements\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added <code>max_parts_in_total</code> setting for MergeTree family of tables (default: 100 000) that prevents unsafe specification of partition key #5166. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5171\" rel=\"external nofollow noreferrer\">#5171</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>clickhouse-obfuscator</code>: derive seed for individual columns by combining initial seed with column name, not column position. This is intended to transform datasets with multiple related tables, so that tables will remain JOINable after transformation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5178\" rel=\"external nofollow noreferrer\">#5178</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added functions <code>JSONExtractRaw</code>, <code>JSONExtractKeyAndValues</code>. Renamed functions <code>jsonExtract&lt;type&gt;</code> to <code>JSONExtract&lt;type&gt;</code>. When something goes wrong these functions return the correspondent values, not <code>NULL</code>. Modified function <code>JSONExtract</code>, now it gets the return type from its last parameter and doesn't inject nullables. Implemented fallback to RapidJSON in case AVX2 instructions are not available. Simdjson library updated to a new version. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5235\" rel=\"external nofollow noreferrer\">#5235</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Now <code>if</code> and <code>multiIf</code> functions don't rely on the condition's <code>Nullable</code>, but rely on the branches for sql compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5238\" rel=\"external nofollow noreferrer\">#5238</a> (<a href=\"https://github.com/janplus\" rel=\"external nofollow noreferrer\">Jian Wu</a>)</li>\n<li><code>In</code> predicate now generates <code>Null</code> result from <code>Null</code> input like the <code>Equal</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5152\" rel=\"external nofollow noreferrer\">#5152</a> (<a href=\"https://github.com/janplus\" rel=\"external nofollow noreferrer\">Jian Wu</a>)</li>\n<li>Check the time limit every (flush_interval / poll_timeout) number of rows from Kafka. This allows to break the reading from Kafka consumer more frequently and to check the time limits for the top-level streams <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5249\" rel=\"external nofollow noreferrer\">#5249</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Link rdkafka with bundled SASL. It should allow to use SASL SCRAM authentication <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5253\" rel=\"external nofollow noreferrer\">#5253</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Batched version of RowRefList for ALL JOINS. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5267\" rel=\"external nofollow noreferrer\">#5267</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>clickhouse-server: more informative listen error messages. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5268\" rel=\"external nofollow noreferrer\">#5268</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Support dictionaries in clickhouse-copier for functions in <code>&lt;sharding_key&gt;</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5270\" rel=\"external nofollow noreferrer\">#5270</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Add new setting <code>kafka_commit_every_batch</code> to regulate Kafka committing policy.<br />\nIt allows to set commit mode: after every batch of messages is handled, or after the whole block is written to the storage. It's a trade-off between losing some messages or reading them twice in some extreme situations. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5308\" rel=\"external nofollow noreferrer\">#5308</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Make <code>windowFunnel</code> support other Unsigned Integer Types. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5320\" rel=\"external nofollow noreferrer\">#5320</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Allow to shadow virtual column <code>_table</code> in Merge engine. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5325\" rel=\"external nofollow noreferrer\">#5325</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Make <code>sequenceMatch</code> aggregate functions support other unsigned Integer types <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5339\" rel=\"external nofollow noreferrer\">#5339</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Better error messages if checksum mismatch is most likely caused by hardware failures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5355\" rel=\"external nofollow noreferrer\">#5355</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Check that underlying tables support sampling for <code>StorageMerge</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5366\" rel=\"external nofollow noreferrer\">#5366</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>\u0421lose MySQL connections after their usage in external dictionaries. It is related to issue #893. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5395\" rel=\"external nofollow noreferrer\">#5395</a> (<a href=\"https://github.com/clemrodriguez\" rel=\"external nofollow noreferrer\">Cl\u00e9ment Rodriguez</a>)</li>\n<li>Improvements of MySQL Wire Protocol. Changed name of format to MySQLWire. Using RAII for calling RSA_free. Disabling SSL if context cannot be created. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5419\" rel=\"external nofollow noreferrer\">#5419</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>clickhouse-client: allow to run with unaccessable history file (read-only, no disk space, file is directory, ...). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5431\" rel=\"external nofollow noreferrer\">#5431</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Respect query settings in asynchronous INSERTs into Distributed tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4936\" rel=\"external nofollow noreferrer\">#4936</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>)</li>\n<li>Renamed functions <code>leastSqr</code> to <code>simpleLinearRegression</code>, <code>LinearRegression</code> to <code>linearRegression</code>, <code>LogisticRegression</code> to <code>logisticRegression</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5391\" rel=\"external nofollow noreferrer\">#5391</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h4 id=\"performance-improvements\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Parallelize processing of parts of non-replicated MergeTree tables in ALTER MODIFY query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4639\" rel=\"external nofollow noreferrer\">#4639</a> (<a href=\"https://github.com/IvanKush\" rel=\"external nofollow noreferrer\">Ivan Kush</a>)</li>\n<li>Optimizations in regular expressions extraction. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5193\" rel=\"external nofollow noreferrer\">#5193</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5191\" rel=\"external nofollow noreferrer\">#5191</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Do not add right join key column to join result if it's used only in join on section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5260\" rel=\"external nofollow noreferrer\">#5260</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Freeze the Kafka buffer after first empty response. It avoids multiple invokations of <code>ReadBuffer::next()</code> for empty result in some row-parsing streams. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5283\" rel=\"external nofollow noreferrer\">#5283</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li><code>concat</code> function optimization for multiple arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5357\" rel=\"external nofollow noreferrer\">#5357</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Query optimisation. Allow push down IN statement while rewriting comm\u0430/cross join into inner one. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5396\" rel=\"external nofollow noreferrer\">#5396</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Upgrade our LZ4 implementation with reference one to have faster decompression. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5070\" rel=\"external nofollow noreferrer\">#5070</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Implemented MSD radix sort (based on kxsort), and partial sorting. <a href=\"");
            
            document.write("https://github.com/ClickHouse/ClickHouse/pull/5129\" rel=\"external nofollow noreferrer\">#5129</a> (<a href=\"https://github.com/kvinty\" rel=\"external nofollow noreferrer\">Evgenii Pravda</a>)</li>\n</ul>\n<h4 id=\"bug-fixes\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix push require columns with join <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5192\" rel=\"external nofollow noreferrer\">#5192</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed bug, when ClickHouse is run by systemd, the command <code>sudo service clickhouse-server forcerestart</code> was not working as expected. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5204\" rel=\"external nofollow noreferrer\">#5204</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix http error codes in DataPartsExchange (interserver http server on 9009 port always returned code 200, even on errors). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5216\" rel=\"external nofollow noreferrer\">#5216</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix SimpleAggregateFunction for String longer than MAX_SMALL_STRING_SIZE <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5311\" rel=\"external nofollow noreferrer\">#5311</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix error for <code>Decimal</code> to <code>Nullable(Decimal)</code> conversion in IN. Support other Decimal to Decimal conversions (including different scales). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5350\" rel=\"external nofollow noreferrer\">#5350</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed FPU clobbering in simdjson library that lead to wrong calculation of <code>uniqHLL</code> and <code>uniqCombined</code> aggregate function and math functions such as <code>log</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5354\" rel=\"external nofollow noreferrer\">#5354</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed handling mixed const/nonconst cases in JSON functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5435\" rel=\"external nofollow noreferrer\">#5435</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix <code>retention</code> function. Now all conditions that satisfy in a row of data are added to the data state. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5119\" rel=\"external nofollow noreferrer\">#5119</a> (<a href=\"https://github.com/nicelulu\" rel=\"external nofollow noreferrer\">\u5c0f\u8def</a>)</li>\n<li>Fix result type for <code>quantileExact</code> with Decimals. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5304\" rel=\"external nofollow noreferrer\">#5304</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"documentation\">Documentation<a class=\"headerlink\" href=\"#documentation\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Translate documentation for <code>CollapsingMergeTree</code> to chinese. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5168\" rel=\"external nofollow noreferrer\">#5168</a> (<a href=\"https://github.com/AlexZFX\" rel=\"external nofollow noreferrer\">\u5f20\u98ce\u5578</a>)</li>\n<li>Translate some documentation about table engines to chinese.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5134\" rel=\"external nofollow noreferrer\">#5134</a><br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5328\" rel=\"external nofollow noreferrer\">#5328</a><br />\n    (<a href=\"https://github.com/neverlee\" rel=\"external nofollow noreferrer\">never lee</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix some sanitizer reports that show probable use-after-free.<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5139\" rel=\"external nofollow noreferrer\">#5139</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5143\" rel=\"external nofollow noreferrer\">#5143</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5393\" rel=\"external nofollow noreferrer\">#5393</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Move performance tests out of separate directories for convenience. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5158\" rel=\"external nofollow noreferrer\">#5158</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix incorrect performance tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5255\" rel=\"external nofollow noreferrer\">#5255</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added a tool to calculate checksums caused by bit flips to debug hardware issues. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5334\" rel=\"external nofollow noreferrer\">#5334</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Make runner script more usable. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5340\" rel=\"external nofollow noreferrer\">#5340</a><a href=\"https://github.com/ClickHouse/ClickHouse/pull/5360\" rel=\"external nofollow noreferrer\">#5360</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Add small instruction how to write performance tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5408\" rel=\"external nofollow noreferrer\">#5408</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add ability to make substitutions in create, fill and drop query in performance tests <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5367\" rel=\"external nofollow noreferrer\">#5367</a> (<a href=\"https://github.com/stavrolia\" rel=\"external nofollow noreferrer\">Olga Khvostikova</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-7-5-27-2019-06-09\">ClickHouse release 19.7.5.27, 2019-06-09<a class=\"headerlink\" href=\"#clickhouse-release-19-7-5-27-2019-06-09\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_1\">New features<a class=\"headerlink\" href=\"#new-features_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added bitmap related functions <code>bitmapHasAny</code> and <code>bitmapHasAll</code> analogous to <code>hasAny</code> and <code>hasAll</code> functions for arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5279\" rel=\"external nofollow noreferrer\">#5279</a> (<a href=\"https://github.com/svladykin\" rel=\"external nofollow noreferrer\">Sergi Vladykin</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_1\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix segfault on <code>minmax</code> INDEX with Null value. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5246\" rel=\"external nofollow noreferrer\">#5246</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Mark all input columns in LIMIT BY as required output. It fixes 'Not found column' error in some distributed queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5407\" rel=\"external nofollow noreferrer\">#5407</a> (<a href=\"https://github.com/kvap\" rel=\"external nofollow noreferrer\">Constantin S. Pan</a>)</li>\n<li>Fix \"Column '0' already exists\" error in <code>SELECT .. PREWHERE</code> on column with DEFAULT <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5397\" rel=\"external nofollow noreferrer\">#5397</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix <code>ALTER MODIFY TTL</code> query on <code>ReplicatedMergeTree</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5539/commits\" rel=\"external nofollow noreferrer\">#5539</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Don't crash the server when Kafka consumers have failed to start. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5285\" rel=\"external nofollow noreferrer\">#5285</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed bitmap functions produce wrong result. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5359\" rel=\"external nofollow noreferrer\">#5359</a> (<a href=\"https://github.com/andyyzh\" rel=\"external nofollow noreferrer\">Andy Yang</a>)</li>\n<li>Fix element_count for hashed dictionary (do not include duplicates) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5440\" rel=\"external nofollow noreferrer\">#5440</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Use contents of environment variable TZ as the name for timezone. It helps to correctly detect default timezone in some cases.<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5443\" rel=\"external nofollow noreferrer\">#5443</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Do not try to convert integers in <code>dictGetT</code> functions, because it doesn't work correctly. Throw an exception instead. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5446\" rel=\"external nofollow noreferrer\">#5446</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix settings in ExternalData HTTP request. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5455\" rel=\"external nofollow noreferrer\">#5455</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila<br />\n  Kutenin</a>)</li>\n<li>Fix bug when parts were removed only from FS without dropping them from Zookeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5520\" rel=\"external nofollow noreferrer\">#5520</a> (<a href=\"https://github.com/");
            
            document.write("alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix segmentation fault in <code>bitmapHasAny</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5528\" rel=\"external nofollow noreferrer\">#5528</a> (<a href=\"https://github.com/yuzhichang\" rel=\"external nofollow noreferrer\">Zhichang Yu</a>)</li>\n<li>Fixed error when replication connection pool doesn't retry to resolve host, even when DNS cache was dropped. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5534\" rel=\"external nofollow noreferrer\">#5534</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>DROP INDEX IF EXISTS</code> query. Now <code>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> query doesn't raise an exception if provided index does not exist. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5524\" rel=\"external nofollow noreferrer\">#5524</a> (<a href=\"https://github.com/NanoBjorn\" rel=\"external nofollow noreferrer\">Gleb Novikov</a>)</li>\n<li>Fix union all supertype column. There were cases with inconsistent data and column types of resulting columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5503\" rel=\"external nofollow noreferrer\">#5503</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Skip ZNONODE during DDL query processing. Before if another node removes the znode in task queue, the one that<br />\ndid not process it, but already get list of children, will terminate the DDLWorker thread. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5489\" rel=\"external nofollow noreferrer\">#5489</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n<li>Fix INSERT into Distributed() table with MATERIALIZED column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5429\" rel=\"external nofollow noreferrer\">#5429</a> (<a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-7-3-9-2019-05-30\">ClickHouse release 19.7.3.9, 2019-05-30<a class=\"headerlink\" href=\"#clickhouse-release-19-7-3-9-2019-05-30\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_2\">New Features<a class=\"headerlink\" href=\"#new-features_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Allow to limit the range of a setting that can be specified by user.<br />\n  These constraints can be set up in user settings profile.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/4931\" rel=\"external nofollow noreferrer\">#4931</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly<br />\nBaranov</a>)</li>\n<li>Add a second version of the function <code>groupUniqArray</code> with an optional<br />\n<code>max_size</code> parameter that limits the size of the resulting array. This<br />\nbehavior is similar to <code>groupArray(max_size)(x)</code> function.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5026\" rel=\"external nofollow noreferrer\">#5026</a> (<a href=\"https://github.com/YiuRULE\" rel=\"external nofollow noreferrer\">Guillaume<br />\nTassery</a>)</li>\n<li>For TSVWithNames/CSVWithNames input file formats, column order can now be<br />\n  determined from file header. This is controlled by<br />\n<code>input_format_with_names_use_header</code> parameter.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5081\" rel=\"external nofollow noreferrer\">#5081</a><br />\n(<a href=\"https://github.com/Akazz\" rel=\"external nofollow noreferrer\">Alexander</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_2\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Crash with uncompressed_cache + JOIN during merge (#5197)<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5133\" rel=\"external nofollow noreferrer\">#5133</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila<br />\nKutenin</a>)</li>\n<li>Segmentation fault on a clickhouse-client query to system tables. #5066<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5127\" rel=\"external nofollow noreferrer\">#5127</a><br />\n(<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Data loss on heavy load via KafkaEngine (#4736)<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5080\" rel=\"external nofollow noreferrer\">#5080</a><br />\n(<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5189\" rel=\"external nofollow noreferrer\">#5189</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_1\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Use radix sort for sorting by single numeric column in <code>ORDER BY</code> without<br />\n<code>LIMIT</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5106\" rel=\"external nofollow noreferrer\">#5106</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/4439\" rel=\"external nofollow noreferrer\">#4439</a><br />\n(<a href=\"https://github.com/kvinty\" rel=\"external nofollow noreferrer\">Evgenii Pravda</a>,<br />\n<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"documentation_1\">Documentation<a class=\"headerlink\" href=\"#documentation_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Translate documentation for some table engines to Chinese.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5107\" rel=\"external nofollow noreferrer\">#5107</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5094\" rel=\"external nofollow noreferrer\">#5094</a>,<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5087\" rel=\"external nofollow noreferrer\">#5087</a><br />\n(<a href=\"https://github.com/AlexZFX\" rel=\"external nofollow noreferrer\">\u5f20\u98ce\u5578</a>),<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5068\" rel=\"external nofollow noreferrer\">#5068</a> (<a href=\"https://github.com/neverlee\" rel=\"external nofollow noreferrer\">never<br />\nlee</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_1\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Print UTF-8 characters properly in <code>clickhouse-test</code>.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5084\" rel=\"external nofollow noreferrer\">#5084</a><br />\n(<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add command line parameter for clickhouse-client to always load suggestion<br />\n  data. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5102\" rel=\"external nofollow noreferrer\">#5102</a><br />\n(<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Resolve some of PVS-Studio warnings.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5082\" rel=\"external nofollow noreferrer\">#5082</a><br />\n(<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Update LZ4 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5040\" rel=\"external nofollow noreferrer\">#5040</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila<br />\n  Kutenin</a>)</li>\n<li>Add gperf to build requirements for upcoming pull request #5030.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/5110\" rel=\"external nofollow noreferrer\">#5110</a><br />\n(<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-6-3-18-2019-06-13\">ClickHouse release 19.6.3.18, 2019-06-13<a class=\"headerlink\" href=\"#clickhouse-release-19-6-3-18-2019-06-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_3\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed IN condition pushdown for queries from table functions <code>mysql</code> and <code>odbc</code> and corresponding table engines. This fixes #3540 and #2384. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5313\" rel=\"external nofollow noreferrer\">#5313</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix deadlock in Zookeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5297\" rel=\"external nofollow noreferrer\">#5297</a> (<a href=\"https://github.com/github1youlc\" rel=\"external nofollow noreferrer\">github1youlc</a>)</li>\n<li>Allow quoted decimals in CSV. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5284\" rel=\"external nofollow noreferrer\">#5284</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a></li>\n<li>Disallow conversion from float Inf/NaN into Decimals (throw exception). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5282\" rel=\"external nofollow noreferrer\">#5282</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix data race in rename query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5247\" rel=\"external nofollow noreferrer\">#5247</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Temporarily disable LFAlloc. Usage of LFAlloc might lead to a lot of MAP_FAILED in allocating UncompressedCache and in a result to crashes of queries at high loaded servers. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/cfdba938ce22f16efeec504f7f90206a515b1280\" rel=\"external nofollow noreferrer\">cfdba93</a>(<a href=\"https://github.com/danlark1\" rel=\"external nofollow n");
            
            document.write("oreferrer\">Danila Kutenin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-6-2-11-2019-05-13\">ClickHouse release 19.6.2.11, 2019-05-13<a class=\"headerlink\" href=\"#clickhouse-release-19-6-2-11-2019-05-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_3\">New Features<a class=\"headerlink\" href=\"#new-features_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>TTL expressions for columns and tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4212\" rel=\"external nofollow noreferrer\">#4212</a> (<a href=\"https://github.com/CurtizJ\" rel=\"external nofollow noreferrer\">Anton Popov</a>)</li>\n<li>Added support for <code>brotli</code> compression for HTTP responses (Accept-Encoding: br) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4388\" rel=\"external nofollow noreferrer\">#4388</a> (<a href=\"https://github.com/fandyushin\" rel=\"external nofollow noreferrer\">Mikhail</a>)</li>\n<li>Added new function <code>isValidUTF8</code> for checking whether a set of bytes is correctly utf-8 encoded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4934\" rel=\"external nofollow noreferrer\">#4934</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Add new load balancing policy <code>first_or_random</code> which sends queries to the first specified host and if it's inaccessible send queries to random hosts of shard. Useful for cross-replication topology setups. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5012\" rel=\"external nofollow noreferrer\">#5012</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n</ul>\n<h4 id=\"experimental-features_1\">Experimental Features<a class=\"headerlink\" href=\"#experimental-features_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add setting <code>index_granularity_bytes</code> (adaptive index granularity) for MergeTree* tables family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4826\" rel=\"external nofollow noreferrer\">#4826</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"improvements_1\">Improvements<a class=\"headerlink\" href=\"#improvements_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for non-constant and negative size and length arguments for function <code>substringUTF8</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4989\" rel=\"external nofollow noreferrer\">#4989</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Disable push-down to right table in left join, left table in right join, and both tables in full join. This fixes wrong JOIN results in some cases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4846\" rel=\"external nofollow noreferrer\">#4846</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li><code>clickhouse-copier</code>: auto upload task configuration from <code>--task-file</code> option <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4876\" rel=\"external nofollow noreferrer\">#4876</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added typos handler for storage factory and table functions factory. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4891\" rel=\"external nofollow noreferrer\">#4891</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Support asterisks and qualified asterisks for multiple joins without subqueries <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4898\" rel=\"external nofollow noreferrer\">#4898</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Make missing column error message more user friendly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4915\" rel=\"external nofollow noreferrer\">#4915</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_2\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Significant speedup of ASOF JOIN <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4924\" rel=\"external nofollow noreferrer\">#4924</a> (<a href=\"https://github.com/Gladdy\" rel=\"external nofollow noreferrer\">Martijn Bakker</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-changes\">Backward Incompatible Changes<a class=\"headerlink\" href=\"#backward-incompatible-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>HTTP header <code>Query-Id</code> was renamed to <code>X-ClickHouse-Query-Id</code> for consistency. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4972\" rel=\"external nofollow noreferrer\">#4972</a> (<a href=\"https://github.com/fandyushin\" rel=\"external nofollow noreferrer\">Mikhail</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_4\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed potential null pointer dereference in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4900\" rel=\"external nofollow noreferrer\">#4900</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed error on query with JOIN + ARRAY JOIN <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4938\" rel=\"external nofollow noreferrer\">#4938</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed hanging on start of the server when a dictionary depends on another dictionary via a database with engine=Dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4962\" rel=\"external nofollow noreferrer\">#4962</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Partially fix distributed_product_mode = local. It's possible to allow columns of local tables in where/having/order by/... via table aliases. Throw exception if table does not have alias. There's not possible to access to the columns without table aliases yet. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4986\" rel=\"external nofollow noreferrer\">#4986</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix potentially wrong result for <code>SELECT DISTINCT</code> with <code>JOIN</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5001\" rel=\"external nofollow noreferrer\">#5001</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5189\" rel=\"external nofollow noreferrer\">#5189</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_2\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed test failures when running clickhouse-server on different host <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4713\" rel=\"external nofollow noreferrer\">#4713</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>clickhouse-test: Disable color control sequences in non tty environment. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4937\" rel=\"external nofollow noreferrer\">#4937</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>clickhouse-test: Allow use any test database (remove <code>test.</code> qualification where it possible) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5008\" rel=\"external nofollow noreferrer\">#5008</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix ubsan errors <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5037\" rel=\"external nofollow noreferrer\">#5037</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Yandex LFAlloc was added to ClickHouse to allocate MarkCache and UncompressedCache data in different ways to catch segfaults more reliable <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4995\" rel=\"external nofollow noreferrer\">#4995</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Python util to help with backports and changelogs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4949\" rel=\"external nofollow noreferrer\">#4949</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-5-4-22-2019-05-13\">ClickHouse release 19.5.4.22, 2019-05-13<a class=\"headerlink\" href=\"#clickhouse-release-19-5-4-22-2019-05-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_5\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed possible crash in bitmap* functions <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5220\" rel=\"external nofollow noreferrer\">#5220</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5228\" rel=\"external nofollow noreferrer\">#5228</a> (<a href=\"https://github.com/andyyzh\" rel=\"external nofollow noreferrer\">Andy Yang</a>)</li>\n<li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5189\" rel=\"external nofollow noreferrer\">#5189</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li");
            
            document.write(">\n<li>Fixed error <code>Set for IN is not created yet in case of using single LowCardinality column in the left part of IN</code>. This error happened if LowCardinality column was the part of primary key. #5031 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5154\" rel=\"external nofollow noreferrer\">#5154</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Modification of retention function: If a row satisfies both the first and NTH condition, only the first satisfied condition is added to the data state. Now all conditions that satisfy in a row of data are added to the data state. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5119\" rel=\"external nofollow noreferrer\">#5119</a> (<a href=\"https://github.com/nicelulu\" rel=\"external nofollow noreferrer\">\u5c0f\u8def</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-5-3-8-2019-04-18\">ClickHouse release 19.5.3.8, 2019-04-18<a class=\"headerlink\" href=\"#clickhouse-release-19-5-3-8-2019-04-18\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_6\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed type of setting <code>max_partitions_per_insert_block</code> from boolean to UInt64. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/5028\" rel=\"external nofollow noreferrer\">#5028</a> (<a href=\"https://github.com/mhsekhavat\" rel=\"external nofollow noreferrer\">Mohammad Hossein Sekhavat</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-5-2-6-2019-04-15\">ClickHouse release 19.5.2.6, 2019-04-15<a class=\"headerlink\" href=\"#clickhouse-release-19-5-2-6-2019-04-15\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_4\">New Features<a class=\"headerlink\" href=\"#new-features_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><a href=\"https://github.com/intel/hyperscan\" rel=\"external nofollow noreferrer\">Hyperscan</a> multiple regular expression matching was added (functions <code>multiMatchAny</code>, <code>multiMatchAnyIndex</code>, <code>multiFuzzyMatchAny</code>, <code>multiFuzzyMatchAnyIndex</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4780\" rel=\"external nofollow noreferrer\">#4780</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4841\" rel=\"external nofollow noreferrer\">#4841</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li><code>multiSearchFirstPosition</code> function was added. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4780\" rel=\"external nofollow noreferrer\">#4780</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Implement the predefined expression filter per row for tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4792\" rel=\"external nofollow noreferrer\">#4792</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>A new type of data skipping indices based on bloom filters (can be used for <code>equal</code>, <code>in</code> and <code>like</code> functions). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4499\" rel=\"external nofollow noreferrer\">#4499</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Added <code>ASOF JOIN</code> which allows to run queries that join to the most recent value known. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4774\" rel=\"external nofollow noreferrer\">#4774</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4867\" rel=\"external nofollow noreferrer\">#4867</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4863\" rel=\"external nofollow noreferrer\">#4863</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4875\" rel=\"external nofollow noreferrer\">#4875</a> (<a href=\"https://github.com/Gladdy\" rel=\"external nofollow noreferrer\">Martijn Bakker</a>, <a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Rewrite multiple <code>COMMA JOIN</code> to <code>CROSS JOIN</code>. Then rewrite them to <code>INNER JOIN</code> if possible. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4661\" rel=\"external nofollow noreferrer\">#4661</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"improvement_6\">Improvement<a class=\"headerlink\" href=\"#improvement_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>topK</code> and <code>topKWeighted</code> now supports custom <code>loadFactor</code> (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4252\" rel=\"external nofollow noreferrer\">#4252</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4634\" rel=\"external nofollow noreferrer\">#4634</a> (<a href=\"https://github.com/kirillDanshin\" rel=\"external nofollow noreferrer\">Kirill Danshin</a>)</li>\n<li>Allow to use <code>parallel_replicas_count &gt; 1</code> even for tables without sampling (the setting is simply ignored for them). In previous versions it was lead to exception. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4637\" rel=\"external nofollow noreferrer\">#4637</a> (<a href=\"https://github.com/digitalist\" rel=\"external nofollow noreferrer\">Alexey Elymanov</a>)</li>\n<li>Support for <code>CREATE OR REPLACE VIEW</code>. Allow to create a view or set a new definition in a single statement. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4654\" rel=\"external nofollow noreferrer\">#4654</a> (<a href=\"https://github.com/bgranvea\" rel=\"external nofollow noreferrer\">Boris Granveaud</a>)</li>\n<li><code>Buffer</code> table engine now supports <code>PREWHERE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4671\" rel=\"external nofollow noreferrer\">#4671</a> (<a href=\"https://github.com/LiuYangkuan\" rel=\"external nofollow noreferrer\">Yangkuan Liu</a>)</li>\n<li>Add ability to start replicated table without metadata in zookeeper in <code>readonly</code> mode. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4691\" rel=\"external nofollow noreferrer\">#4691</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed flicker of progress bar in clickhouse-client. The issue was most noticeable when using <code>FORMAT Null</code> with streaming queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4811\" rel=\"external nofollow noreferrer\">#4811</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow to disable functions with <code>hyperscan</code> library on per user basis to limit potentially excessive and uncontrolled resource usage. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4816\" rel=\"external nofollow noreferrer\">#4816</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add version number logging in all errors. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4824\" rel=\"external nofollow noreferrer\">#4824</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added restriction to the <code>multiMatch</code> functions which requires string size to fit into <code>unsigned int</code>. Also added the number of arguments limit to the <code>multiSearch</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4834\" rel=\"external nofollow noreferrer\">#4834</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Improved usage of scratch space and error handling in Hyperscan. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4866\" rel=\"external nofollow noreferrer\">#4866</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fill <code>system.graphite_detentions</code> from a table config of <code>*GraphiteMergeTree</code> engine tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4584\" rel=\"external nofollow noreferrer\">#4584</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n<li>Rename <code>trigramDistance</code> function to <code>ngramDistance</code> and add more functions with <code>CaseInsensitive</code> and <code>UTF</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4602\" rel=\"external nofollow noreferrer\">#4602</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Improved data skipping indices calculation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4640\" rel=\"external nofollow noreferrer\">#4640</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Keep ordinary, <code>DEFAULT</code>, <code>MATERIALIZED</code> and <code>ALIAS</code> columns in a single list (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2867\" rel=\"external nofollow noreferrer\">#2867</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4707\" rel=\"external nofollow noreferrer\">#4707</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n</ul>\n<h4 id=\"bug-fix_16\">Bug Fix<a class=\"headerlink\" href=\"#bug-fix_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Avoid <code>std::terminate</code> in case of memory allocation failure. Now <code>std::bad_alloc</code> exception is thrown as expected. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4665\" rel=\"external nofollow noreferrer\">#4665</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixes capnproto reading from buffer. Sometimes files wasn't loaded successfully by HTTP. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4674\" rel=\"external nofollow noreferrer\">#4674</a> (<a href=\"https://github.com/smirnov-vs\" rel=\"external nofollow noreferrer\">Vladislav</a>)</li>\n<li>Fix error <code>Unknown log entry type: 0</code> after <code>OPTIMIZE TABLE FINAL</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4683\" rel=\"external nofollow noreferrer\">#4683</a> (<a href=\"https://github.c");
            
            document.write("om/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Wrong arguments to <code>hasAny</code> or <code>hasAll</code> functions may lead to segfault. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4698\" rel=\"external nofollow noreferrer\">#4698</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Deadlock may happen while executing <code>DROP DATABASE dictionary</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4701\" rel=\"external nofollow noreferrer\">#4701</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix undefined behavior in <code>median</code> and <code>quantile</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4702\" rel=\"external nofollow noreferrer\">#4702</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Fix compression level detection when <code>network_compression_method</code> in lowercase. Broken in v19.1. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4706\" rel=\"external nofollow noreferrer\">#4706</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed ignorance of <code>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> setting (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4658\" rel=\"external nofollow noreferrer\">#4658</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4718\" rel=\"external nofollow noreferrer\">#4718</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix <code>histogram</code> function behaviour with <code>Distributed</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4741\" rel=\"external nofollow noreferrer\">#4741</a> (<a href=\"https://github.com/olegkv\" rel=\"external nofollow noreferrer\">olegkv</a>)</li>\n<li>Fixed tsan report <code>destroy of a locked mutex</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4742\" rel=\"external nofollow noreferrer\">#4742</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed TSan report on shutdown due to race condition in system logs usage. Fixed potential use-after-free on shutdown when part_log is enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4758\" rel=\"external nofollow noreferrer\">#4758</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix recheck parts in <code>ReplicatedMergeTreeAlterThread</code> in case of error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4772\" rel=\"external nofollow noreferrer\">#4772</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Arithmetic operations on intermediate aggregate function states were not working for constant arguments (such as subquery results). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4776\" rel=\"external nofollow noreferrer\">#4776</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Always backquote column names in metadata. Otherwise it's impossible to create a table with column named <code>index</code> (server won't restart due to malformed <code>ATTACH</code> query in metadata). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4782\" rel=\"external nofollow noreferrer\">#4782</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix crash in <code>ALTER ... MODIFY ORDER BY</code> on <code>Distributed</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4790\" rel=\"external nofollow noreferrer\">#4790</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>)</li>\n<li>Fix segfault in <code>JOIN ON</code> with enabled <code>enable_optimize_predicate_expression</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4794\" rel=\"external nofollow noreferrer\">#4794</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fix bug with adding an extraneous row after consuming a protobuf message from Kafka. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4808\" rel=\"external nofollow noreferrer\">#4808</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix crash of <code>JOIN</code> on not-nullable vs nullable column. Fix <code>NULLs</code> in right keys in <code>ANY JOIN</code> + <code>join_use_nulls</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4815\" rel=\"external nofollow noreferrer\">#4815</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4835\" rel=\"external nofollow noreferrer\">#4835</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed race condition in <code>SELECT</code> from <code>system.tables</code> if the table is renamed or altered concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4836\" rel=\"external nofollow noreferrer\">#4836</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed data race when fetching data part that is already obsolete. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4839\" rel=\"external nofollow noreferrer\">#4839</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed rare data race that can happen during <code>RENAME</code> table of MergeTree family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4844\" rel=\"external nofollow noreferrer\">#4844</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed segmentation fault in function <code>arrayIntersect</code>. Segmentation fault could happen if function was called with mixed constant and ordinary arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4847\" rel=\"external nofollow noreferrer\">#4847</a> (<a href=\"https://github.com/fancyqlx\" rel=\"external nofollow noreferrer\">Lixiang Qian</a>)</li>\n<li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4850\" rel=\"external nofollow noreferrer\">#4850</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4855\" rel=\"external nofollow noreferrer\">#4855</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix <code>No message received</code> exception while fetching parts between replicas. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4856\" rel=\"external nofollow noreferrer\">#4856</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>arrayIntersect</code> function wrong result in case of several repeated values in single array. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4871\" rel=\"external nofollow noreferrer\">#4871</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix a race condition during concurrent <code>ALTER COLUMN</code> queries that could lead to a server crash (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3421\" rel=\"external nofollow noreferrer\">#3421</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4592\" rel=\"external nofollow noreferrer\">#4592</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix incorrect result in <code>FULL/RIGHT JOIN</code> with const column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4723\" rel=\"external nofollow noreferrer\">#4723</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix duplicates in <code>GLOBAL JOIN</code> with asterisk. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4705\" rel=\"external nofollow noreferrer\">#4705</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix parameter deduction in <code>ALTER MODIFY</code> of column <code>CODEC</code> when column type is not specified. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4883\" rel=\"external nofollow noreferrer\">#4883</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Functions <code>cutQueryStringAndFragment()</code> and <code>queryStringAndFragment()</code> now works correctly when <code>URL</code> contains a fragment and no query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4894\" rel=\"external nofollow noreferrer\">#4894</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix rare bug when setting <code>min_bytes_to_use_direct_io</code> is greater than zero, which occures when thread have to seek backward in column file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4897\" rel=\"external nofollow noreferrer\">#4897</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix wrong argument types for aggregate functions with <code>LowCardinality</code> arguments (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4919\" rel=\"external nofollow noreferrer\">#4919</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4922\" rel=\"external nofollow noreferrer\">#4922</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix wrong name qualifica");
            
            document.write("tion in <code>GLOBAL JOIN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4969\" rel=\"external nofollow noreferrer\">#4969</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix function <code>toISOWeek</code> result for year 1970. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4988\" rel=\"external nofollow noreferrer\">#4988</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix <code>DROP</code>, <code>TRUNCATE</code> and <code>OPTIMIZE</code> queries duplication, when executed on <code>ON CLUSTER</code> for <code>ReplicatedMergeTree*</code> tables family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4991\" rel=\"external nofollow noreferrer\">#4991</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-change_5\">Backward Incompatible Change<a class=\"headerlink\" href=\"#backward-incompatible-change_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Rename setting <code>insert_sample_with_metadata</code> to setting <code>input_format_defaults_for_omitted_fields</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4771\" rel=\"external nofollow noreferrer\">#4771</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Added setting <code>max_partitions_per_insert_block</code> (with value 100 by default). If inserted block contains larger number of partitions, an exception is thrown. Set it to 0 if you want to remove the limit (not recommended). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4845\" rel=\"external nofollow noreferrer\">#4845</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Multi-search functions were renamed (<code>multiPosition</code> to <code>multiSearchAllPositions</code>, <code>multiSearch</code> to <code>multiSearchAny</code>, <code>firstMatch</code> to <code>multiSearchFirstIndex</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4780\" rel=\"external nofollow noreferrer\">#4780</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n</ul>\n<h4 id=\"performance-improvement_4\">Performance Improvement<a class=\"headerlink\" href=\"#performance-improvement_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Optimize Volnitsky searcher by inlining, giving about 5-10% search improvement for queries with many needles or many similar bigrams. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4862\" rel=\"external nofollow noreferrer\">#4862</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Fix performance issue when setting <code>use_uncompressed_cache</code> is greater than zero, which appeared when all read data contained in cache. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4913\" rel=\"external nofollow noreferrer\">#4913</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_7\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Hardening debug build: more granular memory mappings and ASLR; add memory protection for mark cache and index. This allows to find more memory stomping bugs in case when ASan and MSan cannot do it. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4632\" rel=\"external nofollow noreferrer\">#4632</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add support for cmake variables <code>ENABLE_PROTOBUF</code>, <code>ENABLE_PARQUET</code> and <code>ENABLE_BROTLI</code> which allows to enable/disable the above features (same as we can do for librdkafka, mysql, etc). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4669\" rel=\"external nofollow noreferrer\">#4669</a> (<a href=\"https://github.com/silviucpp\" rel=\"external nofollow noreferrer\">Silviu Caragea</a>)</li>\n<li>Add ability to print process list and stacktraces of all threads if some queries are hung after test run. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4675\" rel=\"external nofollow noreferrer\">#4675</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add retries on <code>Connection loss</code> error in <code>clickhouse-test</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4682\" rel=\"external nofollow noreferrer\">#4682</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add freebsd build with vagrant and build with thread sanitizer to packager script. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4712\" rel=\"external nofollow noreferrer\">#4712</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4748\" rel=\"external nofollow noreferrer\">#4748</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Now user asked for password for user <code>'default'</code> during installation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4725\" rel=\"external nofollow noreferrer\">#4725</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Suppress warning in <code>rdkafka</code> library. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4740\" rel=\"external nofollow noreferrer\">#4740</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow ability to build without ssl. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4750\" rel=\"external nofollow noreferrer\">#4750</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Add a way to launch clickhouse-server image from a custom user. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4753\" rel=\"external nofollow noreferrer\">#4753</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n<li>Upgrade contrib boost to 1.69. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4793\" rel=\"external nofollow noreferrer\">#4793</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Disable usage of <code>mremap</code> when compiled with Thread Sanitizer. Surprisingly enough, TSan does not intercept <code>mremap</code> (though it does intercept <code>mmap</code>, <code>munmap</code>) that leads to false positives. Fixed TSan report in stateful tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4859\" rel=\"external nofollow noreferrer\">#4859</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add test checking using format schema via HTTP interface. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4864\" rel=\"external nofollow noreferrer\">#4864</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-4-33-2019-04-17\">ClickHouse release 19.4.4.33, 2019-04-17<a class=\"headerlink\" href=\"#clickhouse-release-19-4-4-33-2019-04-17\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_7\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Avoid <code>std::terminate</code> in case of memory allocation failure. Now <code>std::bad_alloc</code> exception is thrown as expected. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4665\" rel=\"external nofollow noreferrer\">#4665</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixes capnproto reading from buffer. Sometimes files wasn't loaded successfully by HTTP. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4674\" rel=\"external nofollow noreferrer\">#4674</a> (<a href=\"https://github.com/smirnov-vs\" rel=\"external nofollow noreferrer\">Vladislav</a>)</li>\n<li>Fix error <code>Unknown log entry type: 0</code> after <code>OPTIMIZE TABLE FINAL</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4683\" rel=\"external nofollow noreferrer\">#4683</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Wrong arguments to <code>hasAny</code> or <code>hasAll</code> functions may lead to segfault. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4698\" rel=\"external nofollow noreferrer\">#4698</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Deadlock may happen while executing <code>DROP DATABASE dictionary</code> query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4701\" rel=\"external nofollow noreferrer\">#4701</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix undefined behavior in <code>median</code> and <code>quantile</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4702\" rel=\"external nofollow noreferrer\">#4702</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n<li>Fix compression level detection when <code>network_compression_method</code> in lowercase. Broken in v19.1. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4706\" rel=\"external nofollow noreferrer\">#4706</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed ignorance of <code>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> setting (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4658\" rel=\"external nofollow noreferrer\">#4658</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4718\" rel=\"external nofollow noreferrer\">#4718</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fix <code>histogram</code> function behaviour with <code>Distributed</code> tables. <a href=\"https://github.com/ClickHouse");
            
            document.write("/ClickHouse/pull/4741\" rel=\"external nofollow noreferrer\">#4741</a> (<a href=\"https://github.com/olegkv\" rel=\"external nofollow noreferrer\">olegkv</a>)</li>\n<li>Fixed tsan report <code>destroy of a locked mutex</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4742\" rel=\"external nofollow noreferrer\">#4742</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed TSan report on shutdown due to race condition in system logs usage. Fixed potential use-after-free on shutdown when part_log is enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4758\" rel=\"external nofollow noreferrer\">#4758</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix recheck parts in <code>ReplicatedMergeTreeAlterThread</code> in case of error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4772\" rel=\"external nofollow noreferrer\">#4772</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Arithmetic operations on intermediate aggregate function states were not working for constant arguments (such as subquery results). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4776\" rel=\"external nofollow noreferrer\">#4776</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Always backquote column names in metadata. Otherwise it's impossible to create a table with column named <code>index</code> (server won't restart due to malformed <code>ATTACH</code> query in metadata). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4782\" rel=\"external nofollow noreferrer\">#4782</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix crash in <code>ALTER ... MODIFY ORDER BY</code> on <code>Distributed</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4790\" rel=\"external nofollow noreferrer\">#4790</a> (<a href=\"https://github.com/TCeason\" rel=\"external nofollow noreferrer\">TCeason</a>)</li>\n<li>Fix segfault in <code>JOIN ON</code> with enabled <code>enable_optimize_predicate_expression</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4794\" rel=\"external nofollow noreferrer\">#4794</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fix bug with adding an extraneous row after consuming a protobuf message from Kafka. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4808\" rel=\"external nofollow noreferrer\">#4808</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4835\" rel=\"external nofollow noreferrer\">#4835</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed race condition in <code>SELECT</code> from <code>system.tables</code> if the table is renamed or altered concurrently. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4836\" rel=\"external nofollow noreferrer\">#4836</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed data race when fetching data part that is already obsolete. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4839\" rel=\"external nofollow noreferrer\">#4839</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed rare data race that can happen during <code>RENAME</code> table of MergeTree family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4844\" rel=\"external nofollow noreferrer\">#4844</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed segmentation fault in function <code>arrayIntersect</code>. Segmentation fault could happen if function was called with mixed constant and ordinary arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4847\" rel=\"external nofollow noreferrer\">#4847</a> (<a href=\"https://github.com/fancyqlx\" rel=\"external nofollow noreferrer\">Lixiang Qian</a>)</li>\n<li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4850\" rel=\"external nofollow noreferrer\">#4850</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix <code>No message received</code> exception while fetching parts between replicas. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4856\" rel=\"external nofollow noreferrer\">#4856</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>arrayIntersect</code> function wrong result in case of several repeated values in single array. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4871\" rel=\"external nofollow noreferrer\">#4871</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix a race condition during concurrent <code>ALTER COLUMN</code> queries that could lead to a server crash (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3421\" rel=\"external nofollow noreferrer\">#3421</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4592\" rel=\"external nofollow noreferrer\">#4592</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix parameter deduction in <code>ALTER MODIFY</code> of column <code>CODEC</code> when column type is not specified. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4883\" rel=\"external nofollow noreferrer\">#4883</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Functions <code>cutQueryStringAndFragment()</code> and <code>queryStringAndFragment()</code> now works correctly when <code>URL</code> contains a fragment and no query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4894\" rel=\"external nofollow noreferrer\">#4894</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Fix rare bug when setting <code>min_bytes_to_use_direct_io</code> is greater than zero, which occures when thread have to seek backward in column file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4897\" rel=\"external nofollow noreferrer\">#4897</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix wrong argument types for aggregate functions with <code>LowCardinality</code> arguments (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4919\" rel=\"external nofollow noreferrer\">#4919</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4922\" rel=\"external nofollow noreferrer\">#4922</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fix function <code>toISOWeek</code> result for year 1970. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4988\" rel=\"external nofollow noreferrer\">#4988</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix <code>DROP</code>, <code>TRUNCATE</code> and <code>OPTIMIZE</code> queries duplication, when executed on <code>ON CLUSTER</code> for <code>ReplicatedMergeTree*</code> tables family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4991\" rel=\"external nofollow noreferrer\">#4991</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n</ul>\n<h4 id=\"improvements_2\">Improvements<a class=\"headerlink\" href=\"#improvements_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Keep ordinary, <code>DEFAULT</code>, <code>MATERIALIZED</code> and <code>ALIAS</code> columns in a single list (fixes issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2867\" rel=\"external nofollow noreferrer\">#2867</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4707\" rel=\"external nofollow noreferrer\">#4707</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-3-11-2019-04-02\">ClickHouse release 19.4.3.11, 2019-04-02<a class=\"headerlink\" href=\"#clickhouse-release-19-4-3-11-2019-04-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_8\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4855\" rel=\"external nofollow noreferrer\">#4855</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4835\" rel=\"external nofollow noreferrer\">#4835</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_8\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a way to launch clickhouse-server image from a custom user. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4753\" rel=\"external nofollow noreferrer\">#4753</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-2-7-2019-03-30\">ClickHouse release 19.4.2.7, 2019-03-30<a class=\"headerlink\" href=\"#clickhouse-release-19-4-2-7-2019-03-30\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_9\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of em");
            
            document.write("pty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4850\" rel=\"external nofollow noreferrer\">#4850</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-1-3-2019-03-19\">ClickHouse release 19.4.1.3, 2019-03-19<a class=\"headerlink\" href=\"#clickhouse-release-19-4-1-3-2019-03-19\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_10\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed remote queries which contain both <code>LIMIT BY</code> and <code>LIMIT</code>. Previously, if <code>LIMIT BY</code> and <code>LIMIT</code> were used for remote query, <code>LIMIT</code> could happen before <code>LIMIT BY</code>, which led to too filtered result. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4708\" rel=\"external nofollow noreferrer\">#4708</a> (<a href=\"https://github.com/kvap\" rel=\"external nofollow noreferrer\">Constantin S. Pan</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-4-0-49-2019-03-09\">ClickHouse release 19.4.0.49, 2019-03-09<a class=\"headerlink\" href=\"#clickhouse-release-19-4-0-49-2019-03-09\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_5\">New Features<a class=\"headerlink\" href=\"#new-features_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added full support for <code>Protobuf</code> format (input and output, nested data structures). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4174\" rel=\"external nofollow noreferrer\">#4174</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4493\" rel=\"external nofollow noreferrer\">#4493</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Added bitmap functions with Roaring Bitmaps. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4207\" rel=\"external nofollow noreferrer\">#4207</a> (<a href=\"https://github.com/andyyzh\" rel=\"external nofollow noreferrer\">Andy Yang</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4568\" rel=\"external nofollow noreferrer\">#4568</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Parquet format support. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4448\" rel=\"external nofollow noreferrer\">#4448</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>N-gram distance was added for fuzzy string comparison. It is similar to q-gram metrics in R language. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4466\" rel=\"external nofollow noreferrer\">#4466</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Combine rules for graphite rollup from dedicated aggregation and retention patterns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4426\" rel=\"external nofollow noreferrer\">#4426</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n<li>Added <code>max_execution_speed</code> and <code>max_execution_speed_bytes</code> to limit resource usage. Added <code>min_execution_speed_bytes</code> setting to complement the <code>min_execution_speed</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4430\" rel=\"external nofollow noreferrer\">#4430</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Implemented function <code>flatten</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4555\" rel=\"external nofollow noreferrer\">#4555</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4409\" rel=\"external nofollow noreferrer\">#4409</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>, <a href=\"https://github.com/kzon\" rel=\"external nofollow noreferrer\">kzon</a>)</li>\n<li>Added functions <code>arrayEnumerateDenseRanked</code> and <code>arrayEnumerateUniqRanked</code> (it's like <code>arrayEnumerateUniq</code> but allows to fine tune array depth to look inside multidimensional arrays). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4475\" rel=\"external nofollow noreferrer\">#4475</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4601\" rel=\"external nofollow noreferrer\">#4601</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Multiple JOINS with some restrictions: no asterisks, no complex aliases in ON/WHERE/GROUP BY/... <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4462\" rel=\"external nofollow noreferrer\">#4462</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_11\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>This release also contains all bug fixes from 19.3 and 19.1.</li>\n<li>Fixed bug in data skipping indices: order of granules after INSERT was incorrect. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4407\" rel=\"external nofollow noreferrer\">#4407</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Fixed <code>set</code> index for <code>Nullable</code> and <code>LowCardinality</code> columns. Before it, <code>set</code> index with <code>Nullable</code> or <code>LowCardinality</code> column led to error <code>Data type must be deserialized with multiple streams</code> while selecting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4594\" rel=\"external nofollow noreferrer\">#4594</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Correctly set update_time on full <code>executable</code> dictionary update. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4551\" rel=\"external nofollow noreferrer\">#4551</a> (<a href=\"https://github.com/temoon\" rel=\"external nofollow noreferrer\">Tema Novikov</a>)</li>\n<li>Fix broken progress bar in 19.3. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4627\" rel=\"external nofollow noreferrer\">#4627</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Fixed inconsistent values of MemoryTracker when memory region was shrinked, in certain cases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4619\" rel=\"external nofollow noreferrer\">#4619</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed undefined behaviour in ThreadPool. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4612\" rel=\"external nofollow noreferrer\">#4612</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a very rare crash with the message <code>mutex lock failed: Invalid argument</code> that could happen when a MergeTree table was dropped concurrently with a SELECT. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4608\" rel=\"external nofollow noreferrer\">#4608</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>ODBC driver compatibility with <code>LowCardinality</code> data type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4381\" rel=\"external nofollow noreferrer\">#4381</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>FreeBSD: Fixup for <code>AIOcontextPool: Found io_event with unknown id 0</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4438\" rel=\"external nofollow noreferrer\">#4438</a> (<a href=\"https://github.com/urgordeadbeef\" rel=\"external nofollow noreferrer\">urgordeadbeef</a>)</li>\n<li><code>system.part_log</code> table was created regardless to configuration. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4483\" rel=\"external nofollow noreferrer\">#4483</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix undefined behaviour in <code>dictIsIn</code> function for cache dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4515\" rel=\"external nofollow noreferrer\">#4515</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed a deadlock when a SELECT query locks the same table multiple times (e.g. from different threads or when executing multiple subqueries) and there is a concurrent DDL query. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4535\" rel=\"external nofollow noreferrer\">#4535</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Disable compile_expressions by default until we get own <code>llvm</code> contrib and can test it with <code>clang</code> and <code>asan</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4579\" rel=\"external nofollow noreferrer\">#4579</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Prevent <code>std::terminate</code> when <code>invalidate_query</code> for <code>clickhouse</code> external dictionary source has returned wrong resultset (empty or more than one row or more than one column). Fixed issue when the <code>invalidate_query</code> was performed every five seconds regardless to the <code>lifetime</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4583\" rel=\"external nofollow noreferrer\">#4583</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Avoid deadlock when the <code>invalidate_query</code> for a dictionary with <code>clickhouse</code> source was involving <code>system.dictionaries</code> table or <code>Dictionaries</code> database (rare case). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4599\" rel=\"external nofollow noreferrer\">#4599</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixes for CROSS JOIN with empty WHERE. <a href=\"https://github");
            
            document.write(".com/ClickHouse/ClickHouse/pull/4598\" rel=\"external nofollow noreferrer\">#4598</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed segfault in function \"replicate\" when constant argument is passed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4603\" rel=\"external nofollow noreferrer\">#4603</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix lambda function with predicate optimizer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4408\" rel=\"external nofollow noreferrer\">#4408</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Multiple JOINs multiple fixes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4595\" rel=\"external nofollow noreferrer\">#4595</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"improvements_3\">Improvements<a class=\"headerlink\" href=\"#improvements_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Support aliases in JOIN ON section for right table columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4412\" rel=\"external nofollow noreferrer\">#4412</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Result of multiple JOINs need correct result names to be used in subselects. Replace flat aliases with source names in result. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4474\" rel=\"external nofollow noreferrer\">#4474</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Improve push-down logic for joined statements. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4387\" rel=\"external nofollow noreferrer\">#4387</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_3\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improved heuristics of \"move to PREWHERE\" optimization. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4405\" rel=\"external nofollow noreferrer\">#4405</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Use proper lookup tables that uses HashTable's API for 8-bit and 16-bit keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4536\" rel=\"external nofollow noreferrer\">#4536</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Improved performance of string comparison. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4564\" rel=\"external nofollow noreferrer\">#4564</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Cleanup distributed DDL queue in a separate thread so that it doesn't slow down the main loop that processes distributed DDL tasks. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4502\" rel=\"external nofollow noreferrer\">#4502</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>When <code>min_bytes_to_use_direct_io</code> is set to 1, not every file was opened with O_DIRECT mode because the data size to read was sometimes underestimated by the size of one compressed block. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4526\" rel=\"external nofollow noreferrer\">#4526</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_9\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for clang-9 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4604\" rel=\"external nofollow noreferrer\">#4604</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix wrong <code>__asm__</code> instructions (again) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4621\" rel=\"external nofollow noreferrer\">#4621</a> (<a href=\"https://github.com/podshumok\" rel=\"external nofollow noreferrer\">Konstantin Podshumok</a>)</li>\n<li>Add ability to specify settings for <code>clickhouse-performance-test</code> from command line. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4437\" rel=\"external nofollow noreferrer\">#4437</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add dictionaries tests to integration tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4477\" rel=\"external nofollow noreferrer\">#4477</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added queries from the benchmark on the website to automated performance tests. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4496\" rel=\"external nofollow noreferrer\">#4496</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>xxhash.h</code> does not exist in external lz4 because it is an implementation detail and its symbols are namespaced with <code>XXH_NAMESPACE</code> macro.  When lz4 is external, xxHash has to be external too, and the dependents have to link to it. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4495\" rel=\"external nofollow noreferrer\">#4495</a> (<a href=\"https://github.com/orivej\" rel=\"external nofollow noreferrer\">Orivej Desh</a>)</li>\n<li>Fixed a case when <code>quantileTiming</code> aggregate function can be called with negative or floating point argument (this fixes fuzz test with undefined behaviour sanitizer). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4506\" rel=\"external nofollow noreferrer\">#4506</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Spelling error correction. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4531\" rel=\"external nofollow noreferrer\">#4531</a> (<a href=\"https://github.com/sdk2\" rel=\"external nofollow noreferrer\">sdk2</a>)</li>\n<li>Fix compilation on Mac. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4371\" rel=\"external nofollow noreferrer\">#4371</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Build fixes for FreeBSD and various unusual build configurations. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4444\" rel=\"external nofollow noreferrer\">#4444</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-9-1-2019-04-02\">ClickHouse release 19.3.9.1, 2019-04-02<a class=\"headerlink\" href=\"#clickhouse-release-19-3-9-1-2019-04-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_12\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix crash in <code>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4855\" rel=\"external nofollow noreferrer\">#4855</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fix segmentation fault in <code>clickhouse-copier</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4835\" rel=\"external nofollow noreferrer\">#4835</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed reading from <code>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4850\" rel=\"external nofollow noreferrer\">#4850</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvement_10\">Build/Testing/Packaging Improvement<a class=\"headerlink\" href=\"#build-testing-packaging-improvement_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a way to launch clickhouse-server image from a custom user <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4753\" rel=\"external nofollow noreferrer\">#4753</a> (<a href=\"https://github.com/Felixoid\" rel=\"external nofollow noreferrer\">Mikhail f. Shiryaev</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-7-2019-03-12\">ClickHouse release 19.3.7, 2019-03-12<a class=\"headerlink\" href=\"#clickhouse-release-19-3-7-2019-03-12\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_13\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed error in #3920. This error manifestate itself as random cache corruption (messages <code>Unknown codec family code</code>, <code>Cannot seek through file</code>) and segfaults. This bug first appeared in version 19.1 and is present in versions up to 19.1.10 and 19.3.6. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4623\" rel=\"external nofollow noreferrer\">#4623</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-6-2019-03-02\">ClickHouse release 19.3.6, 2019-03-02<a class=\"headerlink\" href=\"#clickhouse-release-19-3-6-2019-03-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_14\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>When there are more than 1000 threads in a thread pool, <code>std::terminate</code> may happen on thread exit. <a href=\"https://github.com/azat\" rel=\"external nofollow noreferrer\">Azat Khuzhin</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4485\" rel=\"external nofollow noreferrer\">#4485</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4505\" rel=\"external nofollow noreferrer\">#4505</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Now it's possible to create <code>ReplicatedMergeTree*</code> tables with commen");
            
            document.write("ts on columns without defaults and tables with columns codecs without comments and defaults. Also fix comparison of codecs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4523\" rel=\"external nofollow noreferrer\">#4523</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed crash on JOIN with array or tuple. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4552\" rel=\"external nofollow noreferrer\">#4552</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed crash in clickhouse-copier with the message <code>ThreadStatus not created</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4540\" rel=\"external nofollow noreferrer\">#4540</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed hangup on server shutdown if distributed DDLs were used. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4472\" rel=\"external nofollow noreferrer\">#4472</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Incorrect column numbers were printed in error message about text format parsing for columns with number greater than 10. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4484\" rel=\"external nofollow noreferrer\">#4484</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_3\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed build with AVX enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4527\" rel=\"external nofollow noreferrer\">#4527</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Enable extended accounting and IO accounting based on good known version instead of kernel under which it is compiled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4541\" rel=\"external nofollow noreferrer\">#4541</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Allow to skip setting of core_dump.size_limit, warning instead of throw if limit set fail. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4473\" rel=\"external nofollow noreferrer\">#4473</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Removed the <code>inline</code> tags of <code>void readBinary(...)</code> in <code>Field.cpp</code>. Also merged redundant <code>namespace DB</code> blocks. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4530\" rel=\"external nofollow noreferrer\">#4530</a> (<a href=\"https://github.com/hczhcz\" rel=\"external nofollow noreferrer\">hcz</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-5-2019-02-21\">ClickHouse release 19.3.5, 2019-02-21<a class=\"headerlink\" href=\"#clickhouse-release-19-3-5-2019-02-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_15\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed bug with large http insert queries processing. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4454\" rel=\"external nofollow noreferrer\">#4454</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed backward incompatibility with old versions due to wrong implementation of <code>send_logs_level</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4445\" rel=\"external nofollow noreferrer\">#4445</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed backward incompatibility of table function <code>remote</code> introduced with column comments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4446\" rel=\"external nofollow noreferrer\">#4446</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-4-2019-02-16\">ClickHouse release 19.3.4, 2019-02-16<a class=\"headerlink\" href=\"#clickhouse-release-19-3-4-2019-02-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"improvements_4\">Improvements<a class=\"headerlink\" href=\"#improvements_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Table index size is not accounted for memory limits when doing <code>ATTACH TABLE</code> query. Avoided the possibility that a table cannot be attached after being detached. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4396\" rel=\"external nofollow noreferrer\">#4396</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Slightly raised up the limit on max string and array size received from ZooKeeper. It allows to continue to work with increased size of <code>CLIENT_JVMFLAGS=-Djute.maxbuffer=...</code> on ZooKeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4398\" rel=\"external nofollow noreferrer\">#4398</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Allow to repair abandoned replica even if it already has huge number of nodes in its queue. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4399\" rel=\"external nofollow noreferrer\">#4399</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Add one required argument to <code>SET</code> index (max stored rows number). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4386\" rel=\"external nofollow noreferrer\">#4386</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_16\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed <code>WITH ROLLUP</code> result for group by single <code>LowCardinality</code> key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4384\" rel=\"external nofollow noreferrer\">#4384</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Fixed bug in the set index (dropping a granule if it contains more than <code>max_rows</code> rows). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4386\" rel=\"external nofollow noreferrer\">#4386</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>A lot of FreeBSD build fixes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4397\" rel=\"external nofollow noreferrer\">#4397</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed aliases substitution in queries with subquery containing same alias (issue <a href=\"https://github.com/ClickHouse/ClickHouse/issues/4110\" rel=\"external nofollow noreferrer\">#4110</a>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4351\" rel=\"external nofollow noreferrer\">#4351</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_4\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add ability to run <code>clickhouse-server</code> for stateless tests in docker image. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4347\" rel=\"external nofollow noreferrer\">#4347</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-3-3-2019-02-13\">ClickHouse release 19.3.3, 2019-02-13<a class=\"headerlink\" href=\"#clickhouse-release-19-3-3-2019-02-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_6\">New Features<a class=\"headerlink\" href=\"#new-features_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>KILL MUTATION</code> statement that allows removing mutations that are for some reasons stuck. Added <code>latest_failed_part</code>, <code>latest_fail_time</code>, <code>latest_fail_reason</code> fields to the <code>system.mutations</code> table for easier troubleshooting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4287\" rel=\"external nofollow noreferrer\">#4287</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Added aggregate function <code>entropy</code> which computes Shannon entropy. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4238\" rel=\"external nofollow noreferrer\">#4238</a> (<a href=\"https://github.com/Quid37\" rel=\"external nofollow noreferrer\">Quid37</a>)</li>\n<li>Added ability to send queries <code>INSERT INTO tbl VALUES (....</code> to server without splitting on <code>query</code> and <code>data</code> parts. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4301\" rel=\"external nofollow noreferrer\">#4301</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Generic implementation of <code>arrayWithConstant</code> function was added. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4322\" rel=\"external nofollow noreferrer\">#4322</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Implemented <code>NOT BETWEEN</code> comparison operator. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4228\" rel=\"external nofollow noreferrer\">#4228</a> (<a href=\"https://github.com/nezed\" rel=\"external nofollow noreferrer\">Dmitry Naumov</a>)</li>\n<li>Implement <code>sumMapFiltered</code> in order to be able to limit the number of keys for which values will be summed by <code>sumMap</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4129\" rel=\"external nofollow noreferrer\">#4129</a> (<a href=\"https://github.com/ercolanelli-leo\" rel=\"external nofollow noreferrer\">L\u00e9o Ercolanelli</a>)</li>\n<li>Added support of <code>Nullable</code> types in <code>mysql</code> table function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4198\" rel=\"e");
            
            document.write("xternal nofollow noreferrer\">#4198</a> (<a href=\"https://github.com/edonin\" rel=\"external nofollow noreferrer\">Emmanuel Donin de Rosi\u00e8re</a>)</li>\n<li>Support for arbitrary constant expressions in <code>LIMIT</code> clause. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4246\" rel=\"external nofollow noreferrer\">#4246</a> (<a href=\"https://github.com/k3box\" rel=\"external nofollow noreferrer\">k3box</a>)</li>\n<li>Added <code>topKWeighted</code> aggregate function that takes additional argument with (unsigned integer) weight. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4245\" rel=\"external nofollow noreferrer\">#4245</a> (<a href=\"https://github.com/andrewgolman\" rel=\"external nofollow noreferrer\">Andrew Golman</a>)</li>\n<li><code>StorageJoin</code> now supports <code>join_any_take_last_row</code> setting that allows overwriting existing values of the same key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3973\" rel=\"external nofollow noreferrer\">#3973</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added function <code>toStartOfInterval</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4304\" rel=\"external nofollow noreferrer\">#4304</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Added <code>RowBinaryWithNamesAndTypes</code> format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4200\" rel=\"external nofollow noreferrer\">#4200</a> (<a href=\"https://github.com/DarkWanderer\" rel=\"external nofollow noreferrer\">Oleg V. Kozlyuk</a>)</li>\n<li>Added <code>IPv4</code> and <code>IPv6</code> data types. More effective implementations of <code>IPv*</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3669\" rel=\"external nofollow noreferrer\">#3669</a> (<a href=\"https://github.com/Enmk\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a>)</li>\n<li>Added function <code>toStartOfTenMinutes()</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4298\" rel=\"external nofollow noreferrer\">#4298</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Added <code>Protobuf</code> output format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4005\" rel=\"external nofollow noreferrer\">#4005</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4158\" rel=\"external nofollow noreferrer\">#4158</a> (<a href=\"https://github.com/vitlibar\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a>)</li>\n<li>Added brotli support for HTTP interface for data import (INSERTs). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4235\" rel=\"external nofollow noreferrer\">#4235</a> (<a href=\"https://github.com/fandyushin\" rel=\"external nofollow noreferrer\">Mikhail </a>)</li>\n<li>Added hints while user make typo in function name or type in command line client. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4239\" rel=\"external nofollow noreferrer\">#4239</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Added <code>Query-Id</code> to Server's HTTP Response header. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4231\" rel=\"external nofollow noreferrer\">#4231</a> (<a href=\"https://github.com/fandyushin\" rel=\"external nofollow noreferrer\">Mikhail </a>)</li>\n</ul>\n<h4 id=\"experimental-features_2\">Experimental features<a class=\"headerlink\" href=\"#experimental-features_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added <code>minmax</code> and <code>set</code> data skipping indices for MergeTree table engines family. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4143\" rel=\"external nofollow noreferrer\">#4143</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li>Added conversion of <code>CROSS JOIN</code> to <code>INNER JOIN</code> if possible. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4221\" rel=\"external nofollow noreferrer\">#4221</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4266\" rel=\"external nofollow noreferrer\">#4266</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_17\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed <code>Not found column</code> for duplicate columns in <code>JOIN ON</code> section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4279\" rel=\"external nofollow noreferrer\">#4279</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Make <code>START REPLICATED SENDS</code> command start replicated sends. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4229\" rel=\"external nofollow noreferrer\">#4229</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Fixed aggregate functions execution with <code>Array(LowCardinality)</code> arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4055\" rel=\"external nofollow noreferrer\">#4055</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fixed wrong behaviour when doing <code>INSERT ... SELECT ... FROM file(...)</code> query and file has <code>CSVWithNames</code> or <code>TSVWIthNames</code> format and the first data row is missing. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4297\" rel=\"external nofollow noreferrer\">#4297</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed crash on dictionary reload if dictionary not available. This bug was appeared in 19.1.6. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4188\" rel=\"external nofollow noreferrer\">#4188</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed <code>ALL JOIN</code> with duplicates in right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4184\" rel=\"external nofollow noreferrer\">#4184</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed segmentation fault with <code>use_uncompressed_cache=1</code> and exception with wrong uncompressed size. This bug was appeared in 19.1.6. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4186\" rel=\"external nofollow noreferrer\">#4186</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>compile_expressions</code> bug with comparison of big (more than int16) dates. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4341\" rel=\"external nofollow noreferrer\">#4341</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed infinite loop when selecting from table function <code>numbers(0)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4280\" rel=\"external nofollow noreferrer\">#4280</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Temporarily disable predicate optimization for <code>ORDER BY</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3890\" rel=\"external nofollow noreferrer\">#3890</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed <code>Illegal instruction</code> error when using base64 functions on old CPUs. This error has been reproduced only when ClickHouse was compiled with gcc-8. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4275\" rel=\"external nofollow noreferrer\">#4275</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed <code>No message received</code> error when interacting with PostgreSQL ODBC Driver through TLS connection. Also fixes segfault when using MySQL ODBC Driver. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4170\" rel=\"external nofollow noreferrer\">#4170</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed incorrect result when <code>Date</code> and <code>DateTime</code> arguments are used in branches of conditional operator (function <code>if</code>). Added generic case for function <code>if</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4243\" rel=\"external nofollow noreferrer\">#4243</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>ClickHouse dictionaries now load within <code>clickhouse</code> process. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4166\" rel=\"external nofollow noreferrer\">#4166</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed deadlock when <code>SELECT</code> from a table with <code>File</code> engine was retried after <code>No such file or directory</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4161\" rel=\"external nofollow noreferrer\">#4161</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed race condition when selecting from <code>system.tables</code> may give <code>table doesn't exist</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4313\" rel=\"external nofollow noreferrer\">#4313</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>clickhouse-client</code> can segfault on exit while loading data for command line suggestions if it was run in interactive mode. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4317\" rel=\"external nofollow noreferrer\">#4317</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a bug when the execution of mutations containing <code>IN</code> operators was producing incorrect results. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4099\" rel=\"external nofollow noreferrer\">#4099</a> (<a href=\"https://github.");
            
            document.write("com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fixed error: if there is a database with <code>Dictionary</code> engine, all dictionaries forced to load at server startup, and if there is a dictionary with ClickHouse source from localhost, the dictionary cannot load. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4255\" rel=\"external nofollow noreferrer\">#4255</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error when system logs are tried to create again at server shutdown. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4254\" rel=\"external nofollow noreferrer\">#4254</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Correctly return the right type and properly handle locks in <code>joinGet</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4153\" rel=\"external nofollow noreferrer\">#4153</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Added <code>sumMapWithOverflow</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4151\" rel=\"external nofollow noreferrer\">#4151</a> (<a href=\"https://github.com/ercolanelli-leo\" rel=\"external nofollow noreferrer\">L\u00e9o Ercolanelli</a>)</li>\n<li>Fixed segfault with <code>allow_experimental_multiple_joins_emulation</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/52de2cd927f7b5257dd67e175f0a5560a48840d0\" rel=\"external nofollow noreferrer\">52de2c</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed bug with incorrect <code>Date</code> and <code>DateTime</code> comparison. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4237\" rel=\"external nofollow noreferrer\">#4237</a> (<a href=\"https://github.com/valexey\" rel=\"external nofollow noreferrer\">valexey</a>)</li>\n<li>Fixed fuzz test under undefined behavior sanitizer: added parameter type check for <code>quantile*Weighted</code> family of functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4145\" rel=\"external nofollow noreferrer\">#4145</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed rare race condition when removing of old data parts can fail with <code>File not found</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4378\" rel=\"external nofollow noreferrer\">#4378</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix install package with missing /etc/clickhouse-server/config.xml. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4343\" rel=\"external nofollow noreferrer\">#4343</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_5\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Debian package: correct /etc/clickhouse-server/preprocessed link according to config. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4205\" rel=\"external nofollow noreferrer\">#4205</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Various build fixes for FreeBSD. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4225\" rel=\"external nofollow noreferrer\">#4225</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added ability to create, fill and drop tables in perftest. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4220\" rel=\"external nofollow noreferrer\">#4220</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added a script to check for duplicate includes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4326\" rel=\"external nofollow noreferrer\">#4326</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added ability to run queries by index in performance test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4264\" rel=\"external nofollow noreferrer\">#4264</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Package with debug symbols is suggested to be installed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4274\" rel=\"external nofollow noreferrer\">#4274</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Refactoring of performance-test. Better logging and signals handling. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4171\" rel=\"external nofollow noreferrer\">#4171</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added docs to anonymized Yandex.Metrika datasets. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4164\" rel=\"external nofollow noreferrer\">#4164</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>\u0410dded tool for converting an old month-partitioned part to the custom-partitioned format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4195\" rel=\"external nofollow noreferrer\">#4195</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Added docs about two datasets in s3. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4144\" rel=\"external nofollow noreferrer\">#4144</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added script which creates changelog from pull requests description. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4169\" rel=\"external nofollow noreferrer\">#4169</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4173\" rel=\"external nofollow noreferrer\">#4173</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>) (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Added puppet module for Clickhouse. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4182\" rel=\"external nofollow noreferrer\">#4182</a> (<a href=\"https://github.com/MaxFedotov\" rel=\"external nofollow noreferrer\">Maxim Fedotov</a>)</li>\n<li>Added docs for a group of undocumented functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4168\" rel=\"external nofollow noreferrer\">#4168</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>ARM build fixes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4210\" rel=\"external nofollow noreferrer\">#4210</a><a href=\"https://github.com/ClickHouse/ClickHouse/pull/4306\" rel=\"external nofollow noreferrer\">#4306</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4291\" rel=\"external nofollow noreferrer\">#4291</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>) (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Dictionary tests now able to run from <code>ctest</code>.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4189\" rel=\"external nofollow noreferrer\">#4189</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Now <code>/etc/ssl</code> is used as default directory with SSL certificates. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4167\" rel=\"external nofollow noreferrer\">#4167</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added checking SSE and AVX instruction at start. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4234\" rel=\"external nofollow noreferrer\">#4234</a> (<a href=\"https://github.com/igron99\" rel=\"external nofollow noreferrer\">Igr</a>)</li>\n<li>Init script will wait server until start. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4281\" rel=\"external nofollow noreferrer\">#4281</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_1\">Backward Incompatible Changes<a class=\"headerlink\" href=\"#backward-incompatible-changes_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed <code>allow_experimental_low_cardinality_type</code> setting. <code>LowCardinality</code> data types are production ready. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4323\" rel=\"external nofollow noreferrer\">#4323</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Reduce mark cache size and uncompressed cache size accordingly to available memory amount. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4240\" rel=\"external nofollow noreferrer\">#4240</a> (<a href=\"https://github.com/k-lopatin\" rel=\"external nofollow noreferrer\">Lopatin Konstantin</a></li>\n<li>Added keyword <code>INDEX</code> in <code>CREATE TABLE</code> query. A column with name <code>index</code> must be quoted with backticks or double quotes: <code>`index`</code>.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4143\" rel=\"external nofollow noreferrer\">#4143</a> (<a href=\"https://github.com/nikvas0\" rel=\"external nofollow noreferrer\">Nikita Vasilev</a>)</li>\n<li><code>sumMap</code> now promote result type instead of overflow. The old <code>sumMap</code> behavior can be obtained by using <code>sumMapWithOverflow</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4151\" rel=\"external nofollow noreferrer\">#4151</a> (<a href=\"https://github.com/ercolanelli-leo\" rel=\"external nofollow noreferrer\">L\u00e9o Ercolanelli</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_4\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>std::sort</code> replaced by <code>pdqsort</code> for queries without <code>LIMIT</code>. <a href=\"https://github.com/ClickH");
            
            document.write("ouse/ClickHouse/pull/4236\" rel=\"external nofollow noreferrer\">#4236</a> (<a href=\"https://github.com/kvinty\" rel=\"external nofollow noreferrer\">Evgenii Pravda</a>)</li>\n<li>Now server reuse threads from global thread pool. This affects performance in some corner cases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4150\" rel=\"external nofollow noreferrer\">#4150</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"improvements_5\">Improvements<a class=\"headerlink\" href=\"#improvements_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Implemented AIO support for FreeBSD. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4305\" rel=\"external nofollow noreferrer\">#4305</a> (<a href=\"https://github.com/urgordeadbeef\" rel=\"external nofollow noreferrer\">urgordeadbeef</a>)</li>\n<li><code>SELECT * FROM a JOIN b USING a, b</code> now return <code>a</code> and <code>b</code> columns only from the left table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4141\" rel=\"external nofollow noreferrer\">#4141</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Allow <code>-C</code> option of client to work as <code>-c</code> option. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4232\" rel=\"external nofollow noreferrer\">#4232</a> (<a href=\"https://github.com/syominsergey\" rel=\"external nofollow noreferrer\">syominsergey</a>)</li>\n<li>Now option <code>--password</code> used without value requires password from stdin. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4230\" rel=\"external nofollow noreferrer\">#4230</a> (<a href=\"https://github.com/bsd-conqueror\" rel=\"external nofollow noreferrer\">BSD_Conqueror</a>)</li>\n<li>Added highlighting of unescaped metacharacters in string literals that contain <code>LIKE</code> expressions or regexps. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4327\" rel=\"external nofollow noreferrer\">#4327</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added cancelling of HTTP read only queries if client socket goes away. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4213\" rel=\"external nofollow noreferrer\">#4213</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Now server reports progress to keep client connections alive. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4215\" rel=\"external nofollow noreferrer\">#4215</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Slightly better message with reason for OPTIMIZE query with <code>optimize_throw_if_noop</code> setting enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4294\" rel=\"external nofollow noreferrer\">#4294</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added support of <code>--version</code> option for clickhouse server.  <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4251\" rel=\"external nofollow noreferrer\">#4251</a> (<a href=\"https://github.com/k-lopatin\" rel=\"external nofollow noreferrer\">Lopatin Konstantin</a>)</li>\n<li>Added <code>--help/-h</code> option to <code>clickhouse-server</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4233\" rel=\"external nofollow noreferrer\">#4233</a> (<a href=\"https://github.com/yurriy\" rel=\"external nofollow noreferrer\">Yuriy Baranov</a>)</li>\n<li>Added support for scalar subqueries with aggregate function state result. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4348\" rel=\"external nofollow noreferrer\">#4348</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">Nikolai Kochetov</a>)</li>\n<li>Improved server shutdown time and ALTERs waiting time. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4372\" rel=\"external nofollow noreferrer\">#4372</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added info about the replicated_can_become_leader setting to system.replicas and add logging if the replica won't try to become leader. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4379\" rel=\"external nofollow noreferrer\">#4379</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-14-2019-03-14\">ClickHouse release 19.1.14, 2019-03-14<a class=\"headerlink\" href=\"#clickhouse-release-19-1-14-2019-03-14\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Fixed error <code>Column ... queried more than once</code> that may happen if the setting <code>asterisk_left_columns_only</code> is set to 1 in case of using <code>GLOBAL JOIN</code> with <code>SELECT *</code> (rare case). The issue does not exist in 19.3 and newer. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4692/commits/6bac7d8d11a9b0d6de0b32b53c47eb2f6f8e7062\" rel=\"external nofollow noreferrer\">6bac7d8d</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-13-2019-03-12\">ClickHouse release 19.1.13, 2019-03-12<a class=\"headerlink\" href=\"#clickhouse-release-19-1-13-2019-03-12\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains exactly the same set of patches as 19.3.7.</p>\n<h3 id=\"clickhouse-release-19-1-10-2019-03-03\">ClickHouse release 19.1.10, 2019-03-03<a class=\"headerlink\" href=\"#clickhouse-release-19-1-10-2019-03-03\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains exactly the same set of patches as 19.3.6.</p>\n<h3 id=\"clickhouse-release-19-1-9-2019-02-21\">ClickHouse release 19.1.9, 2019-02-21<a class=\"headerlink\" href=\"#clickhouse-release-19-1-9-2019-02-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_18\">Bug fixes<a class=\"headerlink\" href=\"#bug-fixes_18\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed backward incompatibility with old versions due to wrong implementation of <code>send_logs_level</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4445\" rel=\"external nofollow noreferrer\">#4445</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed backward incompatibility of table function <code>remote</code> introduced with column comments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4446\" rel=\"external nofollow noreferrer\">#4446</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-8-2019-02-16\">ClickHouse release 19.1.8, 2019-02-16<a class=\"headerlink\" href=\"#clickhouse-release-19-1-8-2019-02-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_19\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_19\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fix install package with missing /etc/clickhouse-server/config.xml. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4343\" rel=\"external nofollow noreferrer\">#4343</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-7-2019-02-15\">ClickHouse release 19.1.7, 2019-02-15<a class=\"headerlink\" href=\"#clickhouse-release-19-1-7-2019-02-15\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_20\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_20\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Correctly return the right type and properly handle locks in <code>joinGet</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4153\" rel=\"external nofollow noreferrer\">#4153</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Fixed error when system logs are tried to create again at server shutdown. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4254\" rel=\"external nofollow noreferrer\">#4254</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error: if there is a database with <code>Dictionary</code> engine, all dictionaries forced to load at server startup, and if there is a dictionary with ClickHouse source from localhost, the dictionary cannot load. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4255\" rel=\"external nofollow noreferrer\">#4255</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a bug when the execution of mutations containing <code>IN</code> operators was producing incorrect results. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4099\" rel=\"external nofollow noreferrer\">#4099</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li><code>clickhouse-client</code> can segfault on exit while loading data for command line suggestions if it was run in interactive mode. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4317\" rel=\"external nofollow noreferrer\">#4317</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed race condition when selecting from <code>system.tables</code> may give <code>table doesn't exist</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4313\" rel=\"external nofollow noreferrer\">#4313</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed deadlock when <code>SELECT</code> from a table with <code>File</code> engine was retried after <code>No such file or directory</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4161\" rel=\"external nofollow noreferrer\">#4161</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed an issue: local ClickHouse dictionaries are loaded via TCP, but should load within process. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4166\" rel=\"external nofollow noreferrer\">#4166</a> (<a href=\"https://github.com/alexey-milovid");
            
            document.write("ov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed <code>No message received</code> error when interacting with PostgreSQL ODBC Driver through TLS connection. Also fixes segfault when using MySQL ODBC Driver. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4170\" rel=\"external nofollow noreferrer\">#4170</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Temporarily disable predicate optimization for <code>ORDER BY</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3890\" rel=\"external nofollow noreferrer\">#3890</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed infinite loop when selecting from table function <code>numbers(0)</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4280\" rel=\"external nofollow noreferrer\">#4280</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed <code>compile_expressions</code> bug with comparison of big (more than int16) dates. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4341\" rel=\"external nofollow noreferrer\">#4341</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed segmentation fault with <code>uncompressed_cache=1</code> and exception with wrong uncompressed size. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4186\" rel=\"external nofollow noreferrer\">#4186</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed <code>ALL JOIN</code> with duplicates in right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4184\" rel=\"external nofollow noreferrer\">#4184</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Fixed wrong behaviour when doing <code>INSERT ... SELECT ... FROM file(...)</code> query and file has <code>CSVWithNames</code> or <code>TSVWIthNames</code> format and the first data row is missing. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4297\" rel=\"external nofollow noreferrer\">#4297</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed aggregate functions execution with <code>Array(LowCardinality)</code> arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4055\" rel=\"external nofollow noreferrer\">#4055</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Debian package: correct /etc/clickhouse-server/preprocessed link according to config. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4205\" rel=\"external nofollow noreferrer\">#4205</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed fuzz test under undefined behavior sanitizer: added parameter type check for <code>quantile*Weighted</code> family of functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4145\" rel=\"external nofollow noreferrer\">#4145</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Make <code>START REPLICATED SENDS</code> command start replicated sends. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4229\" rel=\"external nofollow noreferrer\">#4229</a> (<a href=\"https://github.com/nvartolomei\" rel=\"external nofollow noreferrer\">nvartolomei</a>)</li>\n<li>Fixed <code>Not found column</code> for duplicate columns in JOIN ON section. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4279\" rel=\"external nofollow noreferrer\">#4279</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Now <code>/etc/ssl</code> is used as default directory with SSL certificates. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4167\" rel=\"external nofollow noreferrer\">#4167</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed crash on dictionary reload if dictionary not available. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4188\" rel=\"external nofollow noreferrer\">#4188</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Fixed bug with incorrect <code>Date</code> and <code>DateTime</code> comparison. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4237\" rel=\"external nofollow noreferrer\">#4237</a> (<a href=\"https://github.com/valexey\" rel=\"external nofollow noreferrer\">valexey</a>)</li>\n<li>Fixed incorrect result when <code>Date</code> and <code>DateTime</code> arguments are used in branches of conditional operator (function <code>if</code>). Added generic case for function <code>if</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4243\" rel=\"external nofollow noreferrer\">#4243</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-19-1-6-2019-01-24\">ClickHouse release 19.1.6, 2019-01-24<a class=\"headerlink\" href=\"#clickhouse-release-19-1-6-2019-01-24\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_7\">New Features<a class=\"headerlink\" href=\"#new-features_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Custom per column compression codecs for tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3899\" rel=\"external nofollow noreferrer\">#3899</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4111\" rel=\"external nofollow noreferrer\">#4111</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>, <a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>, <a href=\"https://github.com/Sindbag\" rel=\"external nofollow noreferrer\">Anatoly</a>)</li>\n<li>Added compression codec <code>Delta</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4052\" rel=\"external nofollow noreferrer\">#4052</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Allow to <code>ALTER</code> compression codecs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4054\" rel=\"external nofollow noreferrer\">#4054</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added functions <code>left</code>, <code>right</code>, <code>trim</code>, <code>ltrim</code>, <code>rtrim</code>, <code>timestampadd</code>, <code>timestampsub</code> for SQL standard compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3826\" rel=\"external nofollow noreferrer\">#3826</a> (<a href=\"https://github.com/blinkov\" rel=\"external nofollow noreferrer\">Ivan Blinkov</a>)</li>\n<li>Support for write in <code>HDFS</code> tables and <code>hdfs</code> table function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4084\" rel=\"external nofollow noreferrer\">#4084</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Added functions to search for multiple constant strings from big haystack: <code>multiPosition</code>, <code>multiSearch</code> ,<code>firstMatch</code> also with <code>-UTF8</code>, <code>-CaseInsensitive</code>, and <code>-CaseInsensitiveUTF8</code> variants. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4053\" rel=\"external nofollow noreferrer\">#4053</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Pruning of unused shards if <code>SELECT</code> query filters by sharding key (setting <code>optimize_skip_unused_shards</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3851\" rel=\"external nofollow noreferrer\">#3851</a> (<a href=\"https://github.com/kanterov\" rel=\"external nofollow noreferrer\">Gleb Kanterov</a>, <a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Allow <code>Kafka</code> engine to ignore some number of parsing errors per block. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4094\" rel=\"external nofollow noreferrer\">#4094</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Added support for <code>CatBoost</code> multiclass models evaluation. Function <code>modelEvaluate</code> returns tuple with per-class raw predictions for multiclass models. <code>libcatboostmodel.so</code> should be built with <a href=\"https://github.com/catboost/catboost/pull/607\" rel=\"external nofollow noreferrer\">#607</a>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3959\" rel=\"external nofollow noreferrer\">#3959</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Added functions <code>filesystemAvailable</code>, <code>filesystemFree</code>, <code>filesystemCapacity</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4097\" rel=\"external nofollow noreferrer\">#4097</a> (<a href=\"https://github.com/bgranvea\" rel=\"external nofollow noreferrer\">Boris Granveaud</a>)</li>\n<li>Added hashing functions <code>xxHash64</code> and <code>xxHash32</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3905\" rel=\"external nofollow noreferrer\">#3905</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Added <code>gccMurmurHash</code> hashing function (GCC flavoured Murmur hash) which uses the same hash seed as <a href=\"https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/functional_hash.h#L191\" rel=\"external nofollow noreferrer\">gcc</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4000\" rel=\"external nofollow noreferrer\">#4000</a> (<a href=\"https://github.com/sundy-li\" rel=\"external nofollow noreferrer\">sundyli</a>)</li>\n<li>Added hashing functions <code>javaHash</code>, <code>hiveHash</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3811\" rel=\"external nofollow noreferrer\">#3811</a> (<a href=\"https://github.com/shangshujie365\" rel=\"external nofollow noreferrer\">shangshujie365</a>)</li>\n<li>");
            
            document.write("Added table function <code>remoteSecure</code>. Function works as <code>remote</code>, but uses secure connection. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4088\" rel=\"external nofollow noreferrer\">#4088</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n</ul>\n<h4 id=\"experimental-features_3\">Experimental features<a class=\"headerlink\" href=\"#experimental-features_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added multiple JOINs emulation (<code>allow_experimental_multiple_joins_emulation</code> setting). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3946\" rel=\"external nofollow noreferrer\">#3946</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n</ul>\n<h4 id=\"bug-fixes_21\">Bug Fixes<a class=\"headerlink\" href=\"#bug-fixes_21\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Make <code>compiled_expression_cache_size</code> setting limited by default to lower memory consumption. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4041\" rel=\"external nofollow noreferrer\">#4041</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix a bug that led to hangups in threads that perform ALTERs of Replicated tables and in the thread that updates configuration from ZooKeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2947\" rel=\"external nofollow noreferrer\">#2947</a> <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3891\" rel=\"external nofollow noreferrer\">#3891</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3934\" rel=\"external nofollow noreferrer\">#3934</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fixed a race condition when executing a distributed ALTER task. The race condition led to more than one replica trying to execute the task and all replicas except one failing with a ZooKeeper error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3904\" rel=\"external nofollow noreferrer\">#3904</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix a bug when <code>from_zk</code> config elements weren't refreshed after a request to ZooKeeper timed out. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2947\" rel=\"external nofollow noreferrer\">#2947</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3947\" rel=\"external nofollow noreferrer\">#3947</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix bug with wrong prefix for IPv4 subnet masks. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3945\" rel=\"external nofollow noreferrer\">#3945</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed crash (<code>std::terminate</code>) in rare cases when a new thread cannot be created due to exhausted resources. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3956\" rel=\"external nofollow noreferrer\">#3956</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix bug when in <code>remote</code> table function execution when wrong restrictions were used for in <code>getStructureOfRemoteTable</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4009\" rel=\"external nofollow noreferrer\">#4009</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fix a leak of netlink sockets. They were placed in a pool where they were never deleted and new sockets were created at the start of a new thread when all current sockets were in use. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4017\" rel=\"external nofollow noreferrer\">#4017</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Fix bug with closing <code>/proc/self/fd</code> directory earlier than all fds were read from <code>/proc</code> after forking <code>odbc-bridge</code> subprocess. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4120\" rel=\"external nofollow noreferrer\">#4120</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed String to UInt monotonic conversion in case of usage String in primary key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3870\" rel=\"external nofollow noreferrer\">#3870</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed error in calculation of integer conversion function monotonicity. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3921\" rel=\"external nofollow noreferrer\">#3921</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed segfault in <code>arrayEnumerateUniq</code>, <code>arrayEnumerateDense</code> functions in case of some invalid arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3909\" rel=\"external nofollow noreferrer\">#3909</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fix UB in StorageMerge. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3910\" rel=\"external nofollow noreferrer\">#3910</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Fixed segfault in functions <code>addDays</code>, <code>subtractDays</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3913\" rel=\"external nofollow noreferrer\">#3913</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error: functions <code>round</code>, <code>floor</code>, <code>trunc</code>, <code>ceil</code> may return bogus result when executed on integer argument and large negative scale. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3914\" rel=\"external nofollow noreferrer\">#3914</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed a bug induced by 'kill query sync' which leads to a core dump. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3916\" rel=\"external nofollow noreferrer\">#3916</a> (<a href=\"https://github.com/fancyqlx\" rel=\"external nofollow noreferrer\">muVulDeePecker</a>)</li>\n<li>Fix bug with long delay after empty replication queue. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3928\" rel=\"external nofollow noreferrer\">#3928</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3932\" rel=\"external nofollow noreferrer\">#3932</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Fixed excessive memory usage in case of inserting into table with <code>LowCardinality</code> primary key. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3955\" rel=\"external nofollow noreferrer\">#3955</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fixed <code>LowCardinality</code> serialization for <code>Native</code> format in case of empty arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3907\" rel=\"external nofollow noreferrer\">#3907</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4011\" rel=\"external nofollow noreferrer\">#4011</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fixed incorrect result while using distinct by single LowCardinality numeric column. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3895\" rel=\"external nofollow noreferrer\">#3895</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4012\" rel=\"external nofollow noreferrer\">#4012</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fixed specialized aggregation with LowCardinality key (in case when <code>compile</code> setting is enabled). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3886\" rel=\"external nofollow noreferrer\">#3886</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Fix user and password forwarding for replicated tables queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3957\" rel=\"external nofollow noreferrer\">#3957</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>) (<a href=\"https://github.com/nicelulu\" rel=\"external nofollow noreferrer\">\u5c0f\u8def</a>)</li>\n<li>Fixed very rare race condition that can happen when listing tables in Dictionary database while reloading dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3970\" rel=\"external nofollow noreferrer\">#3970</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed incorrect result when HAVING was used with ROLLUP or CUBE. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3756\" rel=\"external nofollow noreferrer\">#3756</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3837\" rel=\"external nofollow noreferrer\">#3837</a> (<a href=\"https://github.com/reflection\" rel=\"external nofollow noreferrer\">Sam Chou</a>)</li>\n<li>Fixed column aliases for query with <code>JOIN ON</code> syntax and distributed tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3980\" rel=\"external nofollow noreferrer\">#3980</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Fixed error in internal implementation of <code>quantileTDigest</code> (found by Artem Vakhrushev). This error never happens in ClickHouse and was relevant only for those who use ClickHouse codebase as a library directly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3935\" rel=\"external nofollow noreferrer\">#3935</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"improvements_6\">Improvements<a class=\"headerlink\" href=\"#improvements_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Support for <code>I");
            
            document.write("F NOT EXISTS</code> in <code>ALTER TABLE ADD COLUMN</code> statements along with <code>IF EXISTS</code> in <code>DROP/MODIFY/CLEAR/COMMENT COLUMN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3900\" rel=\"external nofollow noreferrer\">#3900</a> (<a href=\"https://github.com/bgranvea\" rel=\"external nofollow noreferrer\">Boris Granveaud</a>)</li>\n<li>Function <code>parseDateTimeBestEffort</code>: support for formats <code>DD.MM.YYYY</code>, <code>DD.MM.YY</code>, <code>DD-MM-YYYY</code>, <code>DD-Mon-YYYY</code>, <code>DD/Month/YYYY</code> and similar. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3922\" rel=\"external nofollow noreferrer\">#3922</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li><code>CapnProtoInputStream</code> now support jagged structures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4063\" rel=\"external nofollow noreferrer\">#4063</a> (<a href=\"https://github.com/Miniwoffer\" rel=\"external nofollow noreferrer\">Odin Hultgren Van Der Horst</a>)</li>\n<li>Usability improvement: added a check that server process is started from the data directory's owner. Do not allow to start server from root if the data belongs to non-root user. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3785\" rel=\"external nofollow noreferrer\">#3785</a> (<a href=\"https://github.com/sergey-v-galtsev\" rel=\"external nofollow noreferrer\">sergey-v-galtsev</a>)</li>\n<li>Better logic of checking required columns during analysis of queries with JOINs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3930\" rel=\"external nofollow noreferrer\">#3930</a> (<a href=\"https://github.com/4ertus2\" rel=\"external nofollow noreferrer\">Artem Zuikov</a>)</li>\n<li>Decreased the number of connections in case of large number of Distributed tables in a single server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3726\" rel=\"external nofollow noreferrer\">#3726</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Supported totals row for <code>WITH TOTALS</code> query for ODBC driver. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3836\" rel=\"external nofollow noreferrer\">#3836</a> (<a href=\"https://github.com/nightweb\" rel=\"external nofollow noreferrer\">Maksim Koritckiy</a>)</li>\n<li>Allowed to use <code>Enum</code>s as integers inside if function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3875\" rel=\"external nofollow noreferrer\">#3875</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Added <code>low_cardinality_allow_in_native_format</code> setting. If disabled, do not use <code>LowCadrinality</code> type in <code>Native</code> format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3879\" rel=\"external nofollow noreferrer\">#3879</a> (<a href=\"https://github.com/KochetovNicolai\" rel=\"external nofollow noreferrer\">KochetovNicolai</a>)</li>\n<li>Removed some redundant objects from compiled expressions cache to lower memory usage. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4042\" rel=\"external nofollow noreferrer\">#4042</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add check that <code>SET send_logs_level = 'value'</code> query accept appropriate value. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3873\" rel=\"external nofollow noreferrer\">#3873</a> (<a href=\"https://github.com/s-mx\" rel=\"external nofollow noreferrer\">Sabyanin Maxim</a>)</li>\n<li>Fixed data type check in type conversion functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3896\" rel=\"external nofollow noreferrer\">#3896</a> (<a href=\"https://github.com/zhang2014\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n</ul>\n<h4 id=\"performance-improvements_5\">Performance Improvements<a class=\"headerlink\" href=\"#performance-improvements_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Add a MergeTree setting <code>use_minimalistic_part_header_in_zookeeper</code>. If enabled, Replicated tables will store compact part metadata in a single part znode. This can dramatically reduce ZooKeeper snapshot size (especially if the tables have a lot of columns). Note that after enabling this setting you will not be able to downgrade to a version that doesn't support it. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3960\" rel=\"external nofollow noreferrer\">#3960</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Add an DFA-based implementation for functions <code>sequenceMatch</code> and <code>sequenceCount</code> in case pattern doesn't contain time. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4004\" rel=\"external nofollow noreferrer\">#4004</a> (<a href=\"https://github.com/ercolanelli-leo\" rel=\"external nofollow noreferrer\">L\u00e9o Ercolanelli</a>)</li>\n<li>Performance improvement for integer numbers serialization. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3968\" rel=\"external nofollow noreferrer\">#3968</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Zero left padding PODArray so that -1 element is always valid and zeroed. It's used for branchless calculation of offsets. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3920\" rel=\"external nofollow noreferrer\">#3920</a> (<a href=\"https://github.com/amosbird\" rel=\"external nofollow noreferrer\">Amos Bird</a>)</li>\n<li>Reverted <code>jemalloc</code> version which lead to performance degradation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4018\" rel=\"external nofollow noreferrer\">#4018</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_2\">Backward Incompatible Changes<a class=\"headerlink\" href=\"#backward-incompatible-changes_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed undocumented feature <code>ALTER MODIFY PRIMARY KEY</code> because it was superseded by the <code>ALTER MODIFY ORDER BY</code> command. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3887\" rel=\"external nofollow noreferrer\">#3887</a> (<a href=\"https://github.com/ztlpn\" rel=\"external nofollow noreferrer\">Alex Zatelepin</a>)</li>\n<li>Removed function <code>shardByHash</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3833\" rel=\"external nofollow noreferrer\">#3833</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Forbid using scalar subqueries with result of type <code>AggregateFunction</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3865\" rel=\"external nofollow noreferrer\">#3865</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n</ul>\n<h4 id=\"build-testing-packaging-improvements_6\">Build/Testing/Packaging Improvements<a class=\"headerlink\" href=\"#build-testing-packaging-improvements_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for PowerPC (<code>ppc64le</code>) build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4132\" rel=\"external nofollow noreferrer\">#4132</a> (<a href=\"https://github.com/danlark1\" rel=\"external nofollow noreferrer\">Danila Kutenin</a>)</li>\n<li>Stateful functional tests are run on public available dataset. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3969\" rel=\"external nofollow noreferrer\">#3969</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed error when the server cannot start with the <code>bash: /usr/bin/clickhouse-extract-from-config: Operation not permitted</code> message within Docker or systemd-nspawn. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4136\" rel=\"external nofollow noreferrer\">#4136</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Updated <code>rdkafka</code> library to v1.0.0-RC5. Used cppkafka instead of raw C interface. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4025\" rel=\"external nofollow noreferrer\">#4025</a> (<a href=\"https://github.com/abyss7\" rel=\"external nofollow noreferrer\">Ivan</a>)</li>\n<li>Updated <code>mariadb-client</code> library. Fixed one of issues found by UBSan. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3924\" rel=\"external nofollow noreferrer\">#3924</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Some fixes for UBSan builds. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3926\" rel=\"external nofollow noreferrer\">#3926</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3021\" rel=\"external nofollow noreferrer\">#3021</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3948\" rel=\"external nofollow noreferrer\">#3948</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added per-commit runs of tests with UBSan build.</li>\n<li>Added per-commit runs of PVS-Studio static analyzer.</li>\n<li>Fixed bugs found by PVS-Studio. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4013\" rel=\"external nofollow noreferrer\">#4013</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed glibc compatibility issues. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4100\" rel=\"external nofollow noreferrer\">#4100</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Move Docker images to 18.10 and add compatibility file for glibc &gt;= 2.28 <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3965\" rel=\"external nofollow noreferrer\">#3965</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li>Add env variable if user don't want to chown directories in server Docker image. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3967\" rel=\"external nofollow noreferrer\">#3967</a> (<a href=\"https://github.com/alesapin\" rel=\"ext");
            
            document.write("ernal nofollow noreferrer\">alesapin</a>)</li>\n<li>Enabled most of the warnings from <code>-Weverything</code> in clang. Enabled <code>-Wpedantic</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3986\" rel=\"external nofollow noreferrer\">#3986</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Added a few more warnings that are available only in clang 8. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3993\" rel=\"external nofollow noreferrer\">#3993</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Link to <code>libLLVM</code> rather than to individual LLVM libs when using shared linking. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3989\" rel=\"external nofollow noreferrer\">#3989</a> (<a href=\"https://github.com/orivej\" rel=\"external nofollow noreferrer\">Orivej Desh</a>)</li>\n<li>Added sanitizer variables for test images. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4072\" rel=\"external nofollow noreferrer\">#4072</a> (<a href=\"https://github.com/alesapin\" rel=\"external nofollow noreferrer\">alesapin</a>)</li>\n<li><code>clickhouse-server</code> debian package will recommend <code>libcap2-bin</code> package to use <code>setcap</code> tool for setting capabilities. This is optional. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4093\" rel=\"external nofollow noreferrer\">#4093</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Improved compilation time, fixed includes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3898\" rel=\"external nofollow noreferrer\">#3898</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added performance tests for hash functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3918\" rel=\"external nofollow noreferrer\">#3918</a> (<a href=\"https://github.com/filimonov\" rel=\"external nofollow noreferrer\">filimonov</a>)</li>\n<li>Fixed cyclic library dependences. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3958\" rel=\"external nofollow noreferrer\">#3958</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Improved compilation with low available memory. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4030\" rel=\"external nofollow noreferrer\">#4030</a> (<a href=\"https://github.com/proller\" rel=\"external nofollow noreferrer\">proller</a>)</li>\n<li>Added test script to reproduce performance degradation in <code>jemalloc</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4036\" rel=\"external nofollow noreferrer\">#4036</a> (<a href=\"https://github.com/alexey-milovidov\" rel=\"external nofollow noreferrer\">alexey-milovidov</a>)</li>\n<li>Fixed misspells in comments and string literals under <code>dbms</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4122\" rel=\"external nofollow noreferrer\">#4122</a> (<a href=\"https://github.com/maiha\" rel=\"external nofollow noreferrer\">maiha</a>)</li>\n<li>Fixed typos in comments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/4089\" rel=\"external nofollow noreferrer\">#4089</a> (<a href=\"https://github.com/kvinty\" rel=\"external nofollow noreferrer\">Evgenii Pravda</a>)</li>\n</ul>\n<h3 id=\"clickhouse-release-18-16-1-2018-12-21\">ClickHouse release 18.16.1, 2018-12-21<a class=\"headerlink\" href=\"#clickhouse-release-18-16-1-2018-12-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_22\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_22\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error that led to problems with updating dictionaries with the ODBC source. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3825\" rel=\"external nofollow noreferrer\">#3825</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3829\" rel=\"external nofollow noreferrer\">#3829</a></li>\n<li>JIT compilation of aggregate functions now works with LowCardinality columns. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3838\" rel=\"external nofollow noreferrer\">#3838</a></li>\n</ul>\n<h4 id=\"improvements_7\">Improvements:<a class=\"headerlink\" href=\"#improvements_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>low_cardinality_allow_in_native_format</code> setting (enabled by default). When disabled, LowCardinality columns will be converted to ordinary columns for SELECT queries and ordinary columns will be expected for INSERT queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3879\" rel=\"external nofollow noreferrer\">#3879</a></li>\n</ul>\n<h4 id=\"build-improvements\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixes for builds on macOS and ARM.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-16-0-2018-12-14\">ClickHouse release 18.16.0, 2018-12-14<a class=\"headerlink\" href=\"#clickhouse-release-18-16-0-2018-12-14\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_8\">New features:<a class=\"headerlink\" href=\"#new-features_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>DEFAULT</code> expressions are evaluated for missing fields when loading data in semi-structured input formats (<code>JSONEachRow</code>, <code>TSKV</code>). The feature is enabled with the <code>insert_sample_with_metadata</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3555\" rel=\"external nofollow noreferrer\">#3555</a></li>\n<li>The <code>ALTER TABLE</code> query now has the <code>MODIFY ORDER BY</code> action for changing the sorting key when adding or removing a table column. This is useful for tables in the <code>MergeTree</code> family that perform additional tasks when merging based on this sorting key, such as <code>SummingMergeTree</code>, <code>AggregatingMergeTree</code>, and so on. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3581\" rel=\"external nofollow noreferrer\">#3581</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3755\" rel=\"external nofollow noreferrer\">#3755</a></li>\n<li>For tables in the <code>MergeTree</code> family, now you can specify a different sorting key (<code>ORDER BY</code>) and index (<code>PRIMARY KEY</code>). The sorting key can be longer than the index. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3581\" rel=\"external nofollow noreferrer\">#3581</a></li>\n<li>Added the <code>hdfs</code> table function and the <code>HDFS</code> table engine for importing and exporting data to HDFS. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3617\" rel=\"external nofollow noreferrer\">chenxing-xc</a></li>\n<li>Added functions for working with base64: <code>base64Encode</code>, <code>base64Decode</code>, <code>tryBase64Decode</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3350\" rel=\"external nofollow noreferrer\">Alexander Krasheninnikov</a></li>\n<li>Now you can use a parameter to configure the precision of the <code>uniqCombined</code> aggregate function (select the number of HyperLogLog cells). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3406\" rel=\"external nofollow noreferrer\">#3406</a></li>\n<li>Added the <code>system.contributors</code> table that contains the names of everyone who made commits in ClickHouse. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3452\" rel=\"external nofollow noreferrer\">#3452</a></li>\n<li>Added the ability to omit the partition for the <code>ALTER TABLE ... FREEZE</code> query in order to back up all partitions at once. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3514\" rel=\"external nofollow noreferrer\">#3514</a></li>\n<li>Added <code>dictGet</code> and <code>dictGetOrDefault</code> functions that don't require specifying the type of return value. The type is determined automatically from the dictionary description. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3564\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Now you can specify comments for a column in the table description and change it using <code>ALTER</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3377\" rel=\"external nofollow noreferrer\">#3377</a></li>\n<li>Reading is supported for <code>Join</code> type tables with simple keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3728\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Now you can specify the options <code>join_use_nulls</code>, <code>max_rows_in_join</code>, <code>max_bytes_in_join</code>, and <code>join_overflow_mode</code> when creating a <code>Join</code> type table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3728\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the <code>joinGet</code> function that allows you to use a <code>Join</code> type table like a dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3728\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the <code>partition_key</code>, <code>sorting_key</code>, <code>primary_key</code>, and <code>sampling_key</code> columns to the <code>system.tables</code> table in order to provide information about table keys. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3609\" rel=\"external nofollow noreferrer\">#3609</a></li>\n<li>Added the <code>is_in_partition_key</code>, <code>is_in_sorting_key</code>, <code>is_in_primary_key</code>, and <code>is_in_sampling_key</code> columns to the <code>system.columns</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3609\" rel=\"external nofollow noreferrer\">#3609</a></li>\n<li>Added the <code>min_time</code> and <code>max_time</code>  columns to the <code>system.parts</code> table. These columns are populated when the partitioning key is an expression consisting of <code>DateTime</code> columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3800\" rel=\"external nofollow noreferrer\">Emmanuel Donin de Rosi\u00e8re</a></li>\n</ul>\n<h4 id=\"bug-fixes_23\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_23\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixes and performance improvements for the <code>LowCardinality</code> data type. <code>GROUP BY</code> using <code>Low");
            
            document.write("Cardinality(Nullable(...))</code>. Getting the values of <code>extremes</code>. Processing high-order functions. <code>LEFT ARRAY JOIN</code>. Distributed <code>GROUP BY</code>. Functions that return <code>Array</code>. Execution of <code>ORDER BY</code>. Writing to <code>Distributed</code> tables (nicelulu). Backward compatibility for <code>INSERT</code> queries from old clients that implement the <code>Native</code> protocol. Support for <code>LowCardinality</code> for <code>JOIN</code>. Improved performance when working in a single stream. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3823\" rel=\"external nofollow noreferrer\">#3823</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3803\" rel=\"external nofollow noreferrer\">#3803</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3799\" rel=\"external nofollow noreferrer\">#3799</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3769\" rel=\"external nofollow noreferrer\">#3769</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3744\" rel=\"external nofollow noreferrer\">#3744</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3681\" rel=\"external nofollow noreferrer\">#3681</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3651\" rel=\"external nofollow noreferrer\">#3651</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3649\" rel=\"external nofollow noreferrer\">#3649</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3641\" rel=\"external nofollow noreferrer\">#3641</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3632\" rel=\"external nofollow noreferrer\">#3632</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3568\" rel=\"external nofollow noreferrer\">#3568</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3523\" rel=\"external nofollow noreferrer\">#3523</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3518\" rel=\"external nofollow noreferrer\">#3518</a></li>\n<li>Fixed how the <code>select_sequential_consistency</code> option works. Previously, when this setting was enabled, an incomplete result was sometimes returned after beginning to write to a new partition. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2863\" rel=\"external nofollow noreferrer\">#2863</a></li>\n<li>Databases are correctly specified when executing DDL <code>ON CLUSTER</code> queries and <code>ALTER UPDATE/DELETE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3772\" rel=\"external nofollow noreferrer\">#3772</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3460\" rel=\"external nofollow noreferrer\">#3460</a></li>\n<li>Databases are correctly specified for subqueries inside a VIEW. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3521\" rel=\"external nofollow noreferrer\">#3521</a></li>\n<li>Fixed a bug in <code>PREWHERE</code> with <code>FINAL</code> for <code>VersionedCollapsingMergeTree</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/7167bfd7b365538f7a91c4307ad77e552ab4e8c1\" rel=\"external nofollow noreferrer\">7167bfd7</a></li>\n<li>Now you can use <code>KILL QUERY</code> to cancel queries that have not started yet because they are waiting for the table to be locked. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3517\" rel=\"external nofollow noreferrer\">#3517</a></li>\n<li>Corrected date and time calculations if the clocks were moved back at midnight (this happens in Iran, and happened in Moscow from 1981 to 1983). Previously, this led to the time being reset a day earlier than necessary, and also caused incorrect formatting of the date and time in text format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3819\" rel=\"external nofollow noreferrer\">#3819</a></li>\n<li>Fixed bugs in some cases of <code>VIEW</code> and subqueries that omit the database. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3521\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed a race condition when simultaneously reading from a <code>MATERIALIZED VIEW</code> and deleting a <code>MATERIALIZED VIEW</code> due to not locking the internal <code>MATERIALIZED VIEW</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3404\" rel=\"external nofollow noreferrer\">#3404</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3694\" rel=\"external nofollow noreferrer\">#3694</a></li>\n<li>Fixed the error <code>Lock handler cannot be nullptr.</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3689\" rel=\"external nofollow noreferrer\">#3689</a></li>\n<li>Fixed query processing when the <code>compile_expressions</code> option is enabled (it's enabled by default). Nondeterministic constant expressions like the <code>now</code> function are no longer unfolded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3457\" rel=\"external nofollow noreferrer\">#3457</a></li>\n<li>Fixed a crash when specifying a non-constant scale argument in <code>toDecimal32/64/128</code> functions.</li>\n<li>Fixed an error when trying to insert an array with <code>NULL</code> elements in the <code>Values</code> format into a column of type <code>Array</code> without <code>Nullable</code> (if <code>input_format_values_interpret_expressions</code> = 1). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3487\" rel=\"external nofollow noreferrer\">#3487</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3503\" rel=\"external nofollow noreferrer\">#3503</a></li>\n<li>Fixed continuous error logging in <code>DDLWorker</code> if ZooKeeper is not available. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/8f50c620334988b28018213ec0092fe6423847e2\" rel=\"external nofollow noreferrer\">8f50c620</a></li>\n<li>Fixed the return type for <code>quantile*</code> functions from <code>Date</code> and <code>DateTime</code> types of arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3580\" rel=\"external nofollow noreferrer\">#3580</a></li>\n<li>Fixed the <code>WITH</code> clause if it specifies a simple alias without expressions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3570\" rel=\"external nofollow noreferrer\">#3570</a></li>\n<li>Fixed processing of queries with named sub-queries and qualified column names when <code>enable_optimize_predicate_expression</code> is enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3588\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed the error <code>Attempt to attach to nullptr thread group</code> when working with materialized views. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3623\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>Fixed a crash when passing certain incorrect arguments to the <code>arrayReverse</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871\" rel=\"external nofollow noreferrer\">73e3a7b6</a></li>\n<li>Fixed the buffer overflow in the <code>extractURLParameter</code> function. Improved performance. Added correct processing of strings containing zero bytes. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/141e9799e49201d84ea8e951d1bed4fb6d3dacb5\" rel=\"external nofollow noreferrer\">141e9799</a></li>\n<li>Fixed buffer overflow in the <code>lowerUTF8</code> and <code>upperUTF8</code> functions. Removed the ability to execute these functions over <code>FixedString</code> type arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3662\" rel=\"external nofollow noreferrer\">#3662</a></li>\n<li>Fixed a rare race condition when deleting <code>MergeTree</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3680\" rel=\"external nofollow noreferrer\">#3680</a></li>\n<li>Fixed a race condition when reading from <code>Buffer</code> tables and simultaneously performing <code>ALTER</code> or <code>DROP</code> on the target tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3719\" rel=\"external nofollow noreferrer\">#3719</a></li>\n<li>Fixed a segfault if the <code>max_temporary_non_const_columns</code> limit was exceeded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3788\" rel=\"external nofollow noreferrer\">#3788</a></li>\n</ul>\n<h4 id=\"improvements_8\">Improvements:<a class=\"headerlink\" href=\"#improvements_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The server does not write the processed configuration files to the <code>/etc/clickhouse-server/</code> directory. Instead, it saves them in the <code>preprocessed_configs</code> directory inside <code>path</code>. This means that the <code>/etc/clickhouse-server/</code> directory doesn't have write access for the <code>clickhouse</code> user, which improves security. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2443\" rel=\"external nofollow noreferrer\">#2443</a></li>\n<li>The <code>min_merge_bytes_to_use_direct_io</code> option is set to 10 GiB by default. A merge that forms large parts of tables from the MergeTree family will be performed in <code>O_DIRECT</code> mode, which prevents excessive page cache eviction. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3504\" rel=\"external nofollow noreferrer\">#3504</a></li>\n<li>Accelerated server start when there is a very large number of tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3398\" rel=\"external nofollow noreferrer\">#3398</a></li>\n<li>Added a connection pool and HTTP <code>Keep-Alive</code> for connections between replicas. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3594\" rel=\"external nofollow noreferrer\">#3594</a></li>\n<li>If the query syntax is invalid, the <code>400 Bad Request</code> code is returned in the <code>HTTP</code> interface (500 was returned previously). <a href=\"https://github.com/ClickHouse/ClickHouse/commit/31bc680ac5f4bb1d0360a8ba4696fa84bb47d6ab\" rel=\"external nofollow noreferrer\">31bc680a</a></li>\n<li>The <code>join_default_strictness</code> option is set to <code>ALL</code> by default for compatibility. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/120e2cbe2ff4fbad626c28042d9b28781c805afe\" rel=\"external nofollow noreferrer\">120e2cbe</a></li>\n<li>Removed logging to <code>stderr</code> from the <code>re2</code> library for invalid or complex regular expressions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/");
            
            document.write("3723\" rel=\"external nofollow noreferrer\">#3723</a></li>\n<li>Added for the <code>Kafka</code> table engine: checks for subscriptions before beginning to read from Kafka; the kafka_max_block_size setting for the table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3396\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>The <code>cityHash64</code>, <code>farmHash64</code>, <code>metroHash64</code>, <code>sipHash64</code>, <code>halfMD5</code>, <code>murmurHash2_32</code>, <code>murmurHash2_64</code>, <code>murmurHash3_32</code>, and <code>murmurHash3_64</code> functions now work for any number of arguments and for arguments in the form of tuples. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3451\" rel=\"external nofollow noreferrer\">#3451</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3519\" rel=\"external nofollow noreferrer\">#3519</a></li>\n<li>The <code>arrayReverse</code> function now works with any types of arrays. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871\" rel=\"external nofollow noreferrer\">73e3a7b6</a></li>\n<li>Added an optional parameter: the slot size for the <code>timeSlots</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3724\" rel=\"external nofollow noreferrer\">Kirill Shvakov</a></li>\n<li>For <code>FULL</code> and <code>RIGHT JOIN</code>, the <code>max_block_size</code> setting is used for a stream of non-joined data from the right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3699\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the <code>--secure</code> command line parameter in  <code>clickhouse-benchmark</code> and <code>clickhouse-performance-test</code> to enable TLS. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3688\" rel=\"external nofollow noreferrer\">#3688</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3690\" rel=\"external nofollow noreferrer\">#3690</a></li>\n<li>Type conversion when the structure of a <code>Buffer</code> type table does not match the structure of the destination table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3603\" rel=\"external nofollow noreferrer\">Vitaly Baranov</a></li>\n<li>Added the <code>tcp_keep_alive_timeout</code> option to enable keep-alive packets after inactivity for the specified time interval. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3441\" rel=\"external nofollow noreferrer\">#3441</a></li>\n<li>Removed unnecessary quoting of values for the partition key in the <code>system.parts</code> table if it consists of a single column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3652\" rel=\"external nofollow noreferrer\">#3652</a></li>\n<li>The modulo function works for <code>Date</code> and <code>DateTime</code> data types. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3385\" rel=\"external nofollow noreferrer\">#3385</a></li>\n<li>Added synonyms for the <code>POWER</code>, <code>LN</code>, <code>LCASE</code>, <code>UCASE</code>, <code>REPLACE</code>, <code>LOCATE</code>, <code>SUBSTR</code>, and <code>MID</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3774\" rel=\"external nofollow noreferrer\">#3774</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3763\" rel=\"external nofollow noreferrer\">#3763</a> Some function names are case-insensitive for compatibility with the SQL standard. Added syntactic sugar <code>SUBSTRING(expr FROM start FOR length)</code> for compatibility with SQL. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3804\" rel=\"external nofollow noreferrer\">#3804</a></li>\n<li>Added the ability to <code>mlock</code> memory pages corresponding to <code>clickhouse-server</code>  executable code to prevent it from being forced out of memory. This feature is disabled by default. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3553\" rel=\"external nofollow noreferrer\">#3553</a></li>\n<li>Improved performance when reading from <code>O_DIRECT</code> (with the <code>min_bytes_to_use_direct_io</code> option enabled). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3405\" rel=\"external nofollow noreferrer\">#3405</a></li>\n<li>Improved performance of the <code>dictGet...OrDefault</code> function for a constant key argument and a non-constant default argument. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3563\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>The <code>firstSignificantSubdomain</code> function now processes the domains <code>gov</code>, <code>mil</code>, and <code>edu</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3601\" rel=\"external nofollow noreferrer\">Igor Hatarist</a> Improved performance. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3628\" rel=\"external nofollow noreferrer\">#3628</a></li>\n<li>Ability to specify custom environment variables for starting <code>clickhouse-server</code> using the <code>SYS-V init.d</code> script by defining <code>CLICKHOUSE_PROGRAM_ENV</code> in <code>/etc/default/clickhouse</code>.<br />\n<a href=\"https://github.com/ClickHouse/ClickHouse/pull/3612\" rel=\"external nofollow noreferrer\">Pavlo Bashynskyi</a></li>\n<li>Correct return code for the clickhouse-server init script. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3516\" rel=\"external nofollow noreferrer\">#3516</a></li>\n<li>The <code>system.metrics</code> table now has the <code>VersionInteger</code> metric, and <code>system.build_options</code> has the added line <code>VERSION_INTEGER</code>, which contains the numeric form of the ClickHouse version, such as  <code>18016000</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3644\" rel=\"external nofollow noreferrer\">#3644</a></li>\n<li>Removed the ability to compare the <code>Date</code> type with a number to avoid potential errors like <code>date = 2018-12-17</code>, where quotes around the date are omitted by mistake. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3687\" rel=\"external nofollow noreferrer\">#3687</a></li>\n<li>Fixed the behavior of stateful functions like <code>rowNumberInAllBlocks</code>. They previously output a result that was one number larger due to starting during query analysis. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3729\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>If the <code>force_restore_data</code> file can't be deleted, an error message is displayed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3794\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n</ul>\n<h4 id=\"build-improvements_1\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Updated the <code>jemalloc</code> library, which fixes a potential memory leak. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3557\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Profiling with <code>jemalloc</code> is enabled by default in order to debug builds. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/2cc82f5cbe266421cd4c1165286c2c47e5ffcb15\" rel=\"external nofollow noreferrer\">2cc82f5c</a></li>\n<li>Added the ability to run integration tests when only <code>Docker</code> is installed on the system. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3650\" rel=\"external nofollow noreferrer\">#3650</a></li>\n<li>Added the fuzz expression test in SELECT queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3442\" rel=\"external nofollow noreferrer\">#3442</a></li>\n<li>Added a stress test for commits, which performs functional tests in parallel and in random order to detect more race conditions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3438\" rel=\"external nofollow noreferrer\">#3438</a></li>\n<li>Improved the method for starting clickhouse-server in a Docker image. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3663\" rel=\"external nofollow noreferrer\">Elghazal Ahmed</a></li>\n<li>For a Docker image, added support for initializing databases using files in the <code>/docker-entrypoint-initdb.d</code> directory. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3695\" rel=\"external nofollow noreferrer\">Konstantin Lebedev</a></li>\n<li>Fixes for builds on ARM. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3709\" rel=\"external nofollow noreferrer\">#3709</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_3\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed the ability to compare the <code>Date</code> type with a number. Instead of <code>toDate('2018-12-18') = 17883</code>, you must use explicit type conversion <code>= toDate(17883)</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3687\" rel=\"external nofollow noreferrer\">#3687</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-19-2018-12-19\">ClickHouse release 18.14.19, 2018-12-19<a class=\"headerlink\" href=\"#clickhouse-release-18-14-19-2018-12-19\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_24\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_24\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error that led to problems with updating dictionaries with the ODBC source. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3825\" rel=\"external nofollow noreferrer\">#3825</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3829\" rel=\"external nofollow noreferrer\">#3829</a></li>\n<li>Databases are correctly specified when executing DDL <code>ON CLUSTER</code> queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3460\" rel=\"external nofollow noreferrer\">#3460</a></li>\n<li>Fixed a segfault if the <code>max_temporary_non_const_columns</code> limit was exceeded. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3788\" rel=\"external nofollow noreferrer\">#3788</a></li>\n</ul>\n<h4 id=\"build-improvements_2\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixes for builds on ARM.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-18-2018-12-04\">ClickHouse release 18.14.18, 2018-12-04<a class=\"headerlink\" href=\"#clickhouse-release-18-14-18-2018-12-04\" title=");
            
            document.write("\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_25\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_25\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed error in <code>dictGet...</code> function for dictionaries of type <code>range</code>, if one of the arguments is constant and other is not. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3751\" rel=\"external nofollow noreferrer\">#3751</a></li>\n<li>Fixed error that caused messages <code>netlink: '...': attribute type 1 has an invalid length</code> to be printed in Linux kernel log, that was happening only on fresh enough versions of Linux kernel. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3749\" rel=\"external nofollow noreferrer\">#3749</a></li>\n<li>Fixed segfault in function <code>empty</code> for argument of <code>FixedString</code> type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3703\" rel=\"external nofollow noreferrer\">Daniel, Dao Quang Minh</a></li>\n<li>Fixed excessive memory allocation when using large value of <code>max_query_size</code> setting (a memory chunk of <code>max_query_size</code> bytes was preallocated at once). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3720\" rel=\"external nofollow noreferrer\">#3720</a></li>\n</ul>\n<h4 id=\"build-changes\">Build changes:<a class=\"headerlink\" href=\"#build-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed build with LLVM/Clang libraries of version 7 from the OS packages (these libraries are used for runtime query compilation). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3582\" rel=\"external nofollow noreferrer\">#3582</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-17-2018-11-30\">ClickHouse release 18.14.17, 2018-11-30<a class=\"headerlink\" href=\"#clickhouse-release-18-14-17-2018-11-30\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_26\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_26\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed cases when the ODBC bridge process did not terminate with the main server process. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3642\" rel=\"external nofollow noreferrer\">#3642</a></li>\n<li>Fixed synchronous insertion into the <code>Distributed</code> table with a columns list that differs from the column list of the remote table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3673\" rel=\"external nofollow noreferrer\">#3673</a></li>\n<li>Fixed a rare race condition that can lead to a crash when dropping a MergeTree table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3643\" rel=\"external nofollow noreferrer\">#3643</a></li>\n<li>Fixed a query deadlock in case when query thread creation fails with the <code>Resource temporarily unavailable</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3643\" rel=\"external nofollow noreferrer\">#3643</a></li>\n<li>Fixed parsing of the <code>ENGINE</code> clause when the <code>CREATE AS table</code> syntax was used and the <code>ENGINE</code> clause was specified before the <code>AS table</code> (the error resulted in ignoring the specified engine). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3692\" rel=\"external nofollow noreferrer\">#3692</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-15-2018-11-21\">ClickHouse release 18.14.15, 2018-11-21<a class=\"headerlink\" href=\"#clickhouse-release-18-14-15-2018-11-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_27\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_27\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The size of memory chunk was overestimated while deserializing the column of type <code>Array(String)</code> that leads to \"Memory limit exceeded\" errors. The issue appeared in version 18.12.13. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3589\" rel=\"external nofollow noreferrer\">#3589</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-14-2018-11-20\">ClickHouse release 18.14.14, 2018-11-20<a class=\"headerlink\" href=\"#clickhouse-release-18-14-14-2018-11-20\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_28\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_28\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed <code>ON CLUSTER</code> queries when cluster configured as secure (flag <code>&lt;secure&gt;</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3599\" rel=\"external nofollow noreferrer\">#3599</a></li>\n</ul>\n<h4 id=\"build-changes_1\">Build changes:<a class=\"headerlink\" href=\"#build-changes_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed problems (llvm-7 from system, macos) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3582\" rel=\"external nofollow noreferrer\">#3582</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-13-2018-11-08\">ClickHouse release 18.14.13, 2018-11-08<a class=\"headerlink\" href=\"#clickhouse-release-18-14-13-2018-11-08\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_29\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_29\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the <code>Block structure mismatch in MergingSorted stream</code> error. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3162\" rel=\"external nofollow noreferrer\">#3162</a></li>\n<li>Fixed <code>ON CLUSTER</code> queries in case when secure connections were turned on in the cluster config (the <code>&lt;secure&gt;</code> flag). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3465\" rel=\"external nofollow noreferrer\">#3465</a></li>\n<li>Fixed an error in queries that used <code>SAMPLE</code>, <code>PREWHERE</code> and alias columns. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3543\" rel=\"external nofollow noreferrer\">#3543</a></li>\n<li>Fixed a rare <code>unknown compression method</code> error when the <code>min_bytes_to_use_direct_io</code> setting was enabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3544\" rel=\"external nofollow noreferrer\">3544</a></li>\n</ul>\n<h4 id=\"performance-improvements_6\">Performance improvements:<a class=\"headerlink\" href=\"#performance-improvements_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed performance regression of queries with <code>GROUP BY</code> of columns of UInt16 or Date type when executing on AMD EPYC processors. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3512\" rel=\"external nofollow noreferrer\">Igor Lapko</a></li>\n<li>Fixed performance regression of queries that process long strings. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3530\" rel=\"external nofollow noreferrer\">#3530</a></li>\n</ul>\n<h4 id=\"build-improvements_3\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improvements for simplifying the Arcadia build. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3475\" rel=\"external nofollow noreferrer\">#3475</a>, <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3535\" rel=\"external nofollow noreferrer\">#3535</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-12-2018-11-02\">ClickHouse release 18.14.12, 2018-11-02<a class=\"headerlink\" href=\"#clickhouse-release-18-14-12-2018-11-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_30\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_30\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a crash on joining two unnamed subqueries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3505\" rel=\"external nofollow noreferrer\">#3505</a></li>\n<li>Fixed generating incorrect queries (with an empty <code>WHERE</code> clause) when querying external databases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3477\" rel=\"external nofollow noreferrer\">hotid</a></li>\n<li>Fixed using an incorrect timeout value in ODBC dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3511\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-11-2018-10-29\">ClickHouse release 18.14.11, 2018-10-29<a class=\"headerlink\" href=\"#clickhouse-release-18-14-11-2018-10-29\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_31\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_31\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the error <code>Block structure mismatch in UNION stream: different number of columns</code> in LIMIT queries. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2156\" rel=\"external nofollow noreferrer\">#2156</a></li>\n<li>Fixed errors when merging data in tables containing arrays inside Nested structures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3397\" rel=\"external nofollow noreferrer\">#3397</a></li>\n<li>Fixed incorrect query results if the <code>merge_tree_uniform_read_distribution</code> setting is disabled (it is enabled by default). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3429\" rel=\"external nofollow noreferrer\">#3429</a></li>\n<li>Fixed an error on inserts to a Distributed table in Native format. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/3411\" rel=\"external nofollow noreferrer\">#3411</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-10-2018-10-23\">ClickHouse release 18.14.10, 2018-10-23<a class=\"headerlink\" href=\"#clickhouse-release-18-14-10-2018-10-23\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>The <code>compile_expressions</code> setting (JIT compilation of expressions) is disabled by default. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3410\" rel=\"external nofollow noreferrer\">#3410</a></li>\n<li>The <code>enable_optimize_predicate_expression</code> setting is disabled by default.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-14-9-2018-10-16\">ClickHouse release 18.14.9, 2018-10-16<a class=\"headerlink\" href=\"#clickhouse-release-18-14-9-2018-10-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_9\">New features:<a class=\"headerlink\" href=\"#new-features_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The <code>WITH CUBE</code> modifier for <code>GROUP BY</code> (the alternative syntax <code>GROUP BY CUBE(...)</code> is also available). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3172\" rel=\"external nofollow noreferrer\">#3172</a></li>\n<li>Added the <code>formatDateTime</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2770\" rel=\"external nof");
            
            document.write("ollow noreferrer\">Alexandr Krasheninnikov</a></li>\n<li>Added the <code>JDBC</code>  table engine and <code>jdbc</code>  table function (requires installing clickhouse-jdbc-bridge). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3210\" rel=\"external nofollow noreferrer\">Alexandr Krasheninnikov</a></li>\n<li>Added functions for working with the ISO week number: <code>toISOWeek</code>, <code>toISOYear</code>, <code>toStartOfISOYear</code>, and <code>toDayOfYear</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3146\" rel=\"external nofollow noreferrer\">#3146</a></li>\n<li>Now you can use <code>Nullable</code> columns for <code>MySQL</code> and <code>ODBC</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3362\" rel=\"external nofollow noreferrer\">#3362</a></li>\n<li>Nested data structures can be read as nested objects in <code>JSONEachRow</code> format. Added the <code>input_format_import_nested_json</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3144\" rel=\"external nofollow noreferrer\">Veloman Yunkan</a></li>\n<li>Parallel processing is available for many <code>MATERIALIZED VIEW</code>s when inserting data. See the <code>parallel_view_processing</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3208\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>Added the <code>SYSTEM FLUSH LOGS</code> query (forced log flushes to system tables such as <code>query_log</code>) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3321\" rel=\"external nofollow noreferrer\">#3321</a></li>\n<li>Now you can use pre-defined <code>database</code> and <code>table</code> macros when declaring <code>Replicated</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3251\" rel=\"external nofollow noreferrer\">#3251</a></li>\n<li>Added the ability to read <code>Decimal</code>  type values in engineering notation (indicating powers of ten). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3153\" rel=\"external nofollow noreferrer\">#3153</a></li>\n</ul>\n<h4 id=\"experimental-features_4\">Experimental features:<a class=\"headerlink\" href=\"#experimental-features_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Optimization of the GROUP BY clause for <code>LowCardinality data types.</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3138\" rel=\"external nofollow noreferrer\">#3138</a></li>\n<li>Optimized calculation of expressions for <code>LowCardinality data types.</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3200\" rel=\"external nofollow noreferrer\">#3200</a></li>\n</ul>\n<h4 id=\"improvements_9\">Improvements:<a class=\"headerlink\" href=\"#improvements_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Significantly reduced memory consumption for queries with <code>ORDER BY</code> and <code>LIMIT</code>. See the <code>max_bytes_before_remerge_sort</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3205\" rel=\"external nofollow noreferrer\">#3205</a></li>\n<li>In the absence of <code>JOIN</code> (<code>LEFT</code>, <code>INNER</code>, ...), <code>INNER JOIN</code> is assumed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3147\" rel=\"external nofollow noreferrer\">#3147</a></li>\n<li>Qualified asterisks work correctly in queries with <code>JOIN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3202\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>The <code>ODBC</code> table engine correctly chooses the method for quoting identifiers in the SQL dialect of a remote database. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3210\" rel=\"external nofollow noreferrer\">Alexandr Krasheninnikov</a></li>\n<li>The <code>compile_expressions</code> setting (JIT compilation of expressions) is enabled by default.</li>\n<li>Fixed behavior for simultaneous DROP DATABASE/TABLE IF EXISTS and CREATE DATABASE/TABLE IF NOT EXISTS. Previously, a <code>CREATE DATABASE ... IF NOT EXISTS</code> query could return the error message \"File ... already exists\", and the <code>CREATE TABLE ... IF NOT EXISTS</code> and <code>DROP TABLE IF EXISTS</code> queries could return <code>Table ... is creating or attaching right now</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3101\" rel=\"external nofollow noreferrer\">#3101</a></li>\n<li>LIKE and IN expressions with a constant right half are passed to the remote server when querying from MySQL or ODBC tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3182\" rel=\"external nofollow noreferrer\">#3182</a></li>\n<li>Comparisons with constant expressions in a WHERE clause are passed to the remote server when querying from MySQL and ODBC tables. Previously, only comparisons with constants were passed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3182\" rel=\"external nofollow noreferrer\">#3182</a></li>\n<li>Correct calculation of row width in the terminal for <code>Pretty</code> formats, including strings with hieroglyphs. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3257\" rel=\"external nofollow noreferrer\">Amos Bird</a>.</li>\n<li><code>ON CLUSTER</code> can be specified for <code>ALTER UPDATE</code> queries.</li>\n<li>Improved performance for reading data in <code>JSONEachRow</code> format. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3332\" rel=\"external nofollow noreferrer\">#3332</a></li>\n<li>Added synonyms for the <code>LENGTH</code> and <code>CHARACTER_LENGTH</code> functions for compatibility. The <code>CONCAT</code> function is no longer case-sensitive. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3306\" rel=\"external nofollow noreferrer\">#3306</a></li>\n<li>Added the <code>TIMESTAMP</code> synonym for the <code>DateTime</code> type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3390\" rel=\"external nofollow noreferrer\">#3390</a></li>\n<li>There is always space reserved for query_id in the server logs, even if the log line is not related to a query. This makes it easier to parse server text logs with third-party tools.</li>\n<li>Memory consumption by a query is logged when it exceeds the next level of an integer number of gigabytes. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3205\" rel=\"external nofollow noreferrer\">#3205</a></li>\n<li>Added compatibility mode for the case when the client library that uses the Native protocol sends fewer columns by mistake than the server expects for the INSERT query. This scenario was possible when using the clickhouse-cpp library. Previously, this scenario caused the server to crash. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3171\" rel=\"external nofollow noreferrer\">#3171</a></li>\n<li>In a user-defined WHERE expression in <code>clickhouse-copier</code>, you can now use a <code>partition_key</code> alias (for additional filtering by source table partition). This is useful if the partitioning scheme changes during copying, but only changes slightly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3166\" rel=\"external nofollow noreferrer\">#3166</a></li>\n<li>The workflow of the <code>Kafka</code> engine has been moved to a background thread pool in order to automatically reduce the speed of data reading at high loads. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3215\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a>.</li>\n<li>Support for reading <code>Tuple</code> and <code>Nested</code> values of structures like <code>struct</code> in the <code>Cap'n'Proto format</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3216\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>The list of top-level domains for the <code>firstSignificantSubdomain</code> function now includes the domain <code>biz</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3219\" rel=\"external nofollow noreferrer\">decaseal</a></li>\n<li>In the configuration of external dictionaries, <code>null_value</code> is interpreted as the value of the default data type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3330\" rel=\"external nofollow noreferrer\">#3330</a></li>\n<li>Support for the <code>intDiv</code> and <code>intDivOrZero</code> functions for <code>Decimal</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/b48402e8712e2b9b151e0eef8193811d433a1264\" rel=\"external nofollow noreferrer\">b48402e8</a></li>\n<li>Support for the <code>Date</code>, <code>DateTime</code>, <code>UUID</code>, and <code>Decimal</code> types as a key for the <code>sumMap</code> aggregate function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3281\" rel=\"external nofollow noreferrer\">#3281</a></li>\n<li>Support for the <code>Decimal</code> data type in external dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3324\" rel=\"external nofollow noreferrer\">#3324</a></li>\n<li>Support for the <code>Decimal</code> data type in <code>SummingMergeTree</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3348\" rel=\"external nofollow noreferrer\">#3348</a></li>\n<li>Added specializations for <code>UUID</code> in <code>if</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3366\" rel=\"external nofollow noreferrer\">#3366</a></li>\n<li>Reduced the number of <code>open</code> and <code>close</code> system calls when reading from a <code>MergeTree table</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3283\" rel=\"external nofollow noreferrer\">#3283</a></li>\n<li>A <code>TRUNCATE TABLE</code> query can be executed on any replica (the query is passed to the leader replica). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3375\" rel=\"external nofollow noreferrer\">Kirill Shvakov</a></li>\n</ul>\n<h4 id=\"bug-fixes_32\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_32\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an issue with <code>Dictionary</code> tables for <code>range_hashed</code> dictionaries. This error occurred in version 18.12.17. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/1702\" rel=\"external nofollow noreferrer\">#1702</a></li>\n<li>Fixed an error when loading <code>range_hashed</code> dictionaries (the message <code>Unsupported type Nullable (...)</code>). This error occurred in version 18.12.17. <a href");
            
            document.write("=\"https://github.com/ClickHouse/ClickHouse/pull/3362\" rel=\"external nofollow noreferrer\">#3362</a></li>\n<li>Fixed errors in the <code>pointInPolygon</code> function due to the accumulation of inaccurate calculations for polygons with a large number of vertices located close to each other. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3331\" rel=\"external nofollow noreferrer\">#3331</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3341\" rel=\"external nofollow noreferrer\">#3341</a></li>\n<li>If after merging data parts, the checksum for the resulting part differs from the result of the same merge in another replica, the result of the merge is deleted and the data part is downloaded from the other replica (this is the correct behavior). But after downloading the data part, it couldn't be added to the working set because of an error that the part already exists (because the data part was deleted with some delay after the merge). This led to cyclical attempts to download the same data. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3194\" rel=\"external nofollow noreferrer\">#3194</a></li>\n<li>Fixed incorrect calculation of total memory consumption by queries (because of incorrect calculation, the <code>max_memory_usage_for_all_queries</code> setting worked incorrectly and the <code>MemoryTracking</code> metric had an incorrect value). This error occurred in version 18.12.13. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3344\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a></li>\n<li>Fixed the functionality of <code>CREATE TABLE ... ON CLUSTER ... AS SELECT ...</code> This error occurred in version 18.12.13. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3247\" rel=\"external nofollow noreferrer\">#3247</a></li>\n<li>Fixed unnecessary preparation of data structures for <code>JOIN</code>s on the server that initiates the query if the <code>JOIN</code> is only performed on remote servers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3340\" rel=\"external nofollow noreferrer\">#3340</a></li>\n<li>Fixed bugs in the <code>Kafka</code> engine: deadlocks after exceptions when starting to read data, and locks upon completion <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3215\" rel=\"external nofollow noreferrer\">Marek Vavru\u0161a</a>.</li>\n<li>For <code>Kafka</code> tables, the optional <code>schema</code> parameter was not passed  (the schema of the <code>Cap'n'Proto</code> format). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3150\" rel=\"external nofollow noreferrer\">Vojtech Splichal</a></li>\n<li>If the ensemble of ZooKeeper servers has servers that accept the connection but then immediately close it instead of responding to the handshake, ClickHouse chooses to connect another server. Previously, this produced the error <code>Cannot read all data. Bytes read: 0. Bytes expected: 4.</code> and the server couldn't start. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/8218cf3a5f39a43401953769d6d12a0bb8d29da9\" rel=\"external nofollow noreferrer\">8218cf3a</a></li>\n<li>If the ensemble of ZooKeeper servers contains servers for which the DNS query returns an error, these servers are ignored. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/17b8e209221061325ad7ba0539f03c6e65f87f29\" rel=\"external nofollow noreferrer\">17b8e209</a></li>\n<li>Fixed type conversion between <code>Date</code> and <code>DateTime</code> when inserting data in the <code>VALUES</code> format (if <code>input_format_values_interpret_expressions = 1</code>). Previously, the conversion was performed between the numerical value of the number of days in Unix Epoch time and the Unix timestamp, which led to unexpected results. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3229\" rel=\"external nofollow noreferrer\">#3229</a></li>\n<li>Corrected type conversion between <code>Decimal</code> and integer numbers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3211\" rel=\"external nofollow noreferrer\">#3211</a></li>\n<li>Fixed errors in the <code>enable_optimize_predicate_expression</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3231\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed a parsing error in CSV format with floating-point numbers if a non-default CSV separator is used, such as <code>;</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3155\" rel=\"external nofollow noreferrer\">#3155</a></li>\n<li>Fixed the <code>arrayCumSumNonNegative</code> function (it does not accumulate negative values if the accumulator is less than zero). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3163\" rel=\"external nofollow noreferrer\">Aleksey Studnev</a></li>\n<li>Fixed how <code>Merge</code> tables work on top of <code>Distributed</code> tables when using <code>PREWHERE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3165\" rel=\"external nofollow noreferrer\">#3165</a></li>\n<li>Bug fixes in the <code>ALTER UPDATE</code> query.</li>\n<li>Fixed bugs in the <code>odbc</code> table function that appeared in version 18.12. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3197\" rel=\"external nofollow noreferrer\">#3197</a></li>\n<li>Fixed the operation of aggregate functions with <code>StateArray</code> combinators. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3188\" rel=\"external nofollow noreferrer\">#3188</a></li>\n<li>Fixed a crash when dividing a <code>Decimal</code> value by zero. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/69dd6609193beb4e7acd3e6ad216eca0ccfb8179\" rel=\"external nofollow noreferrer\">69dd6609</a></li>\n<li>Fixed output of types for operations using <code>Decimal</code> and integer arguments. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3224\" rel=\"external nofollow noreferrer\">#3224</a></li>\n<li>Fixed the segfault during <code>GROUP BY</code> on <code>Decimal128</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/commit/3359ba06c39fcd05bfdb87d6c64154819621e13a\" rel=\"external nofollow noreferrer\">3359ba06</a></li>\n<li>The <code>log_query_threads</code> setting (logging information about each thread of query execution) now takes effect only if the <code>log_queries</code> option (logging information about queries) is set to 1. Since the <code>log_query_threads</code> option is enabled by default, information about threads was previously logged even if query logging was disabled. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3241\" rel=\"external nofollow noreferrer\">#3241</a></li>\n<li>Fixed an error in the distributed operation of the quantiles aggregate function (the error message <code>Not found column quantile...</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/commit/292a885533b8e3b41ce8993867069d14cbd5a664\" rel=\"external nofollow noreferrer\">292a8855</a></li>\n<li>Fixed the compatibility problem when working on a cluster of version 18.12.17 servers and older servers at the same time. For distributed queries with GROUP BY keys of both fixed and non-fixed length, if there was a large amount of data to aggregate, the returned data was not always fully aggregated (two different rows contained the same aggregation keys). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3254\" rel=\"external nofollow noreferrer\">#3254</a></li>\n<li>Fixed handling of substitutions in <code>clickhouse-performance-test</code>, if the query contains only part of the substitutions declared in the test. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3263\" rel=\"external nofollow noreferrer\">#3263</a></li>\n<li>Fixed an error when using <code>FINAL</code> with <code>PREWHERE</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3298\" rel=\"external nofollow noreferrer\">#3298</a></li>\n<li>Fixed an error when using <code>PREWHERE</code> over columns that were added during <code>ALTER</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3298\" rel=\"external nofollow noreferrer\">#3298</a></li>\n<li>Added a check for the absence of <code>arrayJoin</code> for <code>DEFAULT</code> and <code>MATERIALIZED</code> expressions. Previously, <code>arrayJoin</code> led to an error when inserting data. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3337\" rel=\"external nofollow noreferrer\">#3337</a></li>\n<li>Added a check for the absence of <code>arrayJoin</code> in a <code>PREWHERE</code> clause. Previously, this led to messages like <code>Size ... doesn't match</code> or <code>Unknown compression method</code> when executing queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3357\" rel=\"external nofollow noreferrer\">#3357</a></li>\n<li>Fixed segfault that could occur in rare cases after optimization that replaced AND chains from equality evaluations with the corresponding IN expression. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3339\" rel=\"external nofollow noreferrer\">liuyimin-bytedance</a></li>\n<li>Minor corrections to <code>clickhouse-benchmark</code>: previously, client information was not sent to the server; now the number of queries executed is calculated more accurately when shutting down and for limiting the number of iterations. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3351\" rel=\"external nofollow noreferrer\">#3351</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3352\" rel=\"external nofollow noreferrer\">#3352</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_4\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed the <code>allow_experimental_decimal_type</code> option. The <code>Decimal</code> data type is available for default use. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3329\" rel=\"external nofollow noreferrer\">#3329</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-12-17-2018-09-16\">ClickHouse release 18.12.17, 2018-09-16<a class=\"headerlink\" href=\"#clickhouse-release-18-12-17-2018-09-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_10\">New features:<a class=\"headerlink\" href=\"#new-features_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>invalidate_query</code> (the ability to specify a query to check whether an extern");
            
            document.write("al dictionary needs to be updated) is implemented for the <code>clickhouse</code> source. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3126\" rel=\"external nofollow noreferrer\">#3126</a></li>\n<li>Added the ability to use <code>UInt*</code>, <code>Int*</code>, and <code>DateTime</code>  data types (along with the <code>Date</code> type) as a <code>range_hashed</code> external dictionary key that defines the boundaries of ranges. Now <code>NULL</code> can be used to designate an open range. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3123\" rel=\"external nofollow noreferrer\">Vasily Nemkov</a></li>\n<li>The <code>Decimal</code> type now supports <code>var*</code> and <code>stddev*</code> aggregate functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3129\" rel=\"external nofollow noreferrer\">#3129</a></li>\n<li>The <code>Decimal</code> type now supports mathematical functions (<code>exp</code>, <code>sin</code> and so on.) <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3129\" rel=\"external nofollow noreferrer\">#3129</a></li>\n<li>The <code>system.part_log</code> table now has the <code>partition_id</code> column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3089\" rel=\"external nofollow noreferrer\">#3089</a></li>\n</ul>\n<h4 id=\"bug-fixes_33\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_33\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>Merge</code> now works correctly on <code>Distributed</code> tables. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3159\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed incompatibility (unnecessary dependency on the <code>glibc</code> version) that made it impossible to run ClickHouse on <code>Ubuntu Precise</code> and older versions. The incompatibility arose in version 18.12.13. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3130\" rel=\"external nofollow noreferrer\">#3130</a></li>\n<li>Fixed errors in the <code>enable_optimize_predicate_expression</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3107\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed a minor issue with backwards compatibility that appeared when working with a cluster of replicas on versions earlier than 18.12.13 and simultaneously creating a new replica of a table on a server with a newer version (shown in the message <code>Can not clone replica, because the ... updated to new ClickHouse version</code>, which is logical, but shouldn't happen). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3122\" rel=\"external nofollow noreferrer\">#3122</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_5\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The <code>enable_optimize_predicate_expression</code> option is enabled by default (which is rather optimistic). If query analysis errors occur that are related to searching for the column names, set <code>enable_optimize_predicate_expression</code> to 0. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3107\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-12-14-2018-09-13\">ClickHouse release 18.12.14, 2018-09-13<a class=\"headerlink\" href=\"#clickhouse-release-18-12-14-2018-09-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_11\">New features:<a class=\"headerlink\" href=\"#new-features_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for <code>ALTER UPDATE</code> queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3035\" rel=\"external nofollow noreferrer\">#3035</a></li>\n<li>Added the <code>allow_ddl</code> option, which restricts the user's access to DDL queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3104\" rel=\"external nofollow noreferrer\">#3104</a></li>\n<li>Added the <code>min_merge_bytes_to_use_direct_io</code> option for <code>MergeTree</code> engines, which allows you to set a threshold for the total size of the merge (when above the threshold, data part files will be handled using O_DIRECT). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3117\" rel=\"external nofollow noreferrer\">#3117</a></li>\n<li>The <code>system.merges</code> system table now contains the <code>partition_id</code> column. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3099\" rel=\"external nofollow noreferrer\">#3099</a></li>\n</ul>\n<h4 id=\"improvements_10\">Improvements<a class=\"headerlink\" href=\"#improvements_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>If a data part remains unchanged during mutation, it isn't downloaded by replicas. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3103\" rel=\"external nofollow noreferrer\">#3103</a></li>\n<li>Autocomplete is available for names of settings when working with <code>clickhouse-client</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3106\" rel=\"external nofollow noreferrer\">#3106</a></li>\n</ul>\n<h4 id=\"bug-fixes_34\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_34\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added a check for the sizes of arrays that are elements of <code>Nested</code> type fields when inserting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3118\" rel=\"external nofollow noreferrer\">#3118</a></li>\n<li>Fixed an error updating external dictionaries with the <code>ODBC</code> source and <code>hashed</code> storage. This error occurred in version 18.12.13.</li>\n<li>Fixed a crash when creating a temporary table from a query with an <code>IN</code> condition. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3098\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed an error in aggregate functions for arrays that can have <code>NULL</code> elements. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3097\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-12-13-2018-09-10\">ClickHouse release 18.12.13, 2018-09-10<a class=\"headerlink\" href=\"#clickhouse-release-18-12-13-2018-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_12\">New features:<a class=\"headerlink\" href=\"#new-features_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>DECIMAL(digits, scale)</code> data type (<code>Decimal32(scale)</code>, <code>Decimal64(scale)</code>, <code>Decimal128(scale)</code>). To enable it, use the setting <code>allow_experimental_decimal_type</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2846\" rel=\"external nofollow noreferrer\">#2846</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2970\" rel=\"external nofollow noreferrer\">#2970</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3008\" rel=\"external nofollow noreferrer\">#3008</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3047\" rel=\"external nofollow noreferrer\">#3047</a></li>\n<li>New <code>WITH ROLLUP</code> modifier for <code>GROUP BY</code> (alternative syntax: <code>GROUP BY ROLLUP(...)</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2948\" rel=\"external nofollow noreferrer\">#2948</a></li>\n<li>In queries with JOIN, the star character expands to a list of columns in all tables, in compliance with the SQL standard. You can restore the old behavior by setting <code>asterisk_left_columns_only</code> to 1 on the user configuration level. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2787\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Added support for JOIN with table functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2907\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Autocomplete by pressing Tab in clickhouse-client. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2447\" rel=\"external nofollow noreferrer\">Sergey Shcherbin</a></li>\n<li>Ctrl+C in clickhouse-client clears a query that was entered. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2877\" rel=\"external nofollow noreferrer\">#2877</a></li>\n<li>Added the <code>join_default_strictness</code> setting (values: <code>\"</code>, <code>'any'</code>, <code>'all'</code>). This allows you to not specify <code>ANY</code> or <code>ALL</code> for <code>JOIN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2982\" rel=\"external nofollow noreferrer\">#2982</a></li>\n<li>Each line of the server log related to query processing shows the query ID. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>Now you can get query execution logs in clickhouse-client (use the <code>send_logs_level</code> setting). With distributed query processing, logs are cascaded from all the servers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>The <code>system.query_log</code> and <code>system.processes</code> (<code>SHOW PROCESSLIST</code>) tables now have information about all changed settings when you run a query (the nested structure of the <code>Settings</code> data). Added the <code>log_query_settings</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>The <code>system.query_log</code> and <code>system.processes</code> tables now show information about the number of threads that are participating in query execution (see the <code>thread_numbers</code> column). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>Added <code>ProfileEvents</code> counters that measure the time spent on reading and writing over the network and reading and writing to disk, the number of network errors, and the time spent waiting when network bandwidth is limited. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>Added <code>ProfileEvents</code>counters that contain the system metrics from rusage (you can use them to get information about CPU usage in userspace and the kernel, page faults, and context switches), as well as taskstats metrics (use these to obtain information about I/O wait time, CPU wait tim");
            
            document.write("e, and the amount of data read and recorded, both with and without page cache). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>The <code>ProfileEvents</code> counters are applied globally and for each query, as well as for each query execution thread, which allows you to profile resource consumption by query  in detail. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>Added the <code>system.query_thread_log</code> table, which contains information about each query execution thread. Added the <code>log_query_threads</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2482\" rel=\"external nofollow noreferrer\">#2482</a></li>\n<li>The <code>system.metrics</code> and <code>system.events</code> tables now have built-in documentation. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3016\" rel=\"external nofollow noreferrer\">#3016</a></li>\n<li>Added the <code>arrayEnumerateDense</code> function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2975\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the <code>arrayCumSumNonNegative</code> and <code>arrayDifference</code> functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2942\" rel=\"external nofollow noreferrer\">Aleksey Studnev</a></li>\n<li>Added the <code>retention</code> aggregate function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2887\" rel=\"external nofollow noreferrer\">Sundy Li</a></li>\n<li>Now you can add (merge) states of aggregate functions by using the plus operator, and multiply the states of aggregate functions by a nonnegative constant. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3062\" rel=\"external nofollow noreferrer\">#3062</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3034\" rel=\"external nofollow noreferrer\">#3034</a></li>\n<li>Tables in the MergeTree family now have the virtual column <code>_partition_id</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3089\" rel=\"external nofollow noreferrer\">#3089</a></li>\n</ul>\n<h4 id=\"experimental-features_5\">Experimental features:<a class=\"headerlink\" href=\"#experimental-features_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>LowCardinality(T)</code> data type. This data type automatically creates a local dictionary of values and allows data processing without unpacking the dictionary. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2830\" rel=\"external nofollow noreferrer\">#2830</a></li>\n<li>Added a cache of JIT-compiled functions and a counter for the number of uses before compiling. To JIT compile expressions, enable the <code>compile_expressions</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2990\" rel=\"external nofollow noreferrer\">#2990</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3077\" rel=\"external nofollow noreferrer\">#3077</a></li>\n</ul>\n<h4 id=\"improvements_11\">Improvements:<a class=\"headerlink\" href=\"#improvements_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the problem with unlimited accumulation of the replication log when there are abandoned replicas. Added an effective recovery mode for replicas with a long lag.</li>\n<li>Improved performance of <code>GROUP BY</code> with multiple aggregation fields when one of them is string and the others are fixed length.</li>\n<li>Improved performance when using <code>PREWHERE</code> and with implicit transfer of expressions in <code>PREWHERE</code>.</li>\n<li>Improved parsing performance for text formats (<code>CSV</code>, <code>TSV</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2977\" rel=\"external nofollow noreferrer\">Amos Bird</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2980\" rel=\"external nofollow noreferrer\">#2980</a></li>\n<li>Improved performance of reading strings and arrays in binary formats. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2955\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Increased performance and reduced memory consumption for queries to <code>system.tables</code> and <code>system.columns</code> when there is a very large number of tables on a single server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2953\" rel=\"external nofollow noreferrer\">#2953</a></li>\n<li>Fixed a performance problem in the case of a large stream of queries that result in an error (the <code>_dl_addr</code> function is visible in <code>perf top</code>, but the server isn't using much CPU). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2938\" rel=\"external nofollow noreferrer\">#2938</a></li>\n<li>Conditions are cast into the View (when <code>enable_optimize_predicate_expression</code> is enabled). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2907\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Improvements to the functionality for the <code>UUID</code> data type. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3074\" rel=\"external nofollow noreferrer\">#3074</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2985\" rel=\"external nofollow noreferrer\">#2985</a></li>\n<li>The <code>UUID</code> data type is supported in The-Alchemist dictionaries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2822\" rel=\"external nofollow noreferrer\">#2822</a></li>\n<li>The <code>visitParamExtractRaw</code> function works correctly with nested structures. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2974\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>When the <code>input_format_skip_unknown_fields</code> setting is enabled, object fields in <code>JSONEachRow</code> format are skipped correctly. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2958\" rel=\"external nofollow noreferrer\">BlahGeek</a></li>\n<li>For a <code>CASE</code> expression with conditions, you can now omit <code>ELSE</code>, which is equivalent to <code>ELSE NULL</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2920\" rel=\"external nofollow noreferrer\">#2920</a></li>\n<li>The operation timeout can now be configured when working with ZooKeeper. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2971\" rel=\"external nofollow noreferrer\">urykhy</a></li>\n<li>You can specify an offset for <code>LIMIT n, m</code> as <code>LIMIT n OFFSET m</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2840\" rel=\"external nofollow noreferrer\">#2840</a></li>\n<li>You can use the <code>SELECT TOP n</code> syntax as an alternative for <code>LIMIT</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2840\" rel=\"external nofollow noreferrer\">#2840</a></li>\n<li>Increased the size of the queue to write to system tables, so the <code>SystemLog parameter queue is full</code> error doesn't happen as often.</li>\n<li>The <code>windowFunnel</code> aggregate function now supports events that meet multiple conditions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2801\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Duplicate columns can be used in a <code>USING</code> clause for <code>JOIN</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3006\" rel=\"external nofollow noreferrer\">#3006</a></li>\n<li><code>Pretty</code> formats now have a limit on column alignment by width. Use the <code>output_format_pretty_max_column_pad_width</code> setting. If a value is wider, it will still be displayed in its entirety, but the other cells in the table will not be too wide. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3003\" rel=\"external nofollow noreferrer\">#3003</a></li>\n<li>The <code>odbc</code> table function now allows you to specify the database/schema name. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2885\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Added the ability to use a username specified in the <code>clickhouse-client</code> config file. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2909\" rel=\"external nofollow noreferrer\">Vladimir Kozbin</a></li>\n<li>The <code>ZooKeeperExceptions</code> counter has been split into three counters: <code>ZooKeeperUserExceptions</code>, <code>ZooKeeperHardwareExceptions</code>, and <code>ZooKeeperOtherExceptions</code>.</li>\n<li><code>ALTER DELETE</code> queries work for materialized views.</li>\n<li>Added randomization when running the cleanup thread periodically for <code>ReplicatedMergeTree</code> tables in order to avoid periodic load spikes when there are a very large number of <code>ReplicatedMergeTree</code> tables.</li>\n<li>Support for <code>ATTACH TABLE ... ON CLUSTER</code> queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3025\" rel=\"external nofollow noreferrer\">#3025</a></li>\n</ul>\n<h4 id=\"bug-fixes_35\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_35\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an issue with <code>Dictionary</code> tables (throws the <code>Size of offsets doesn't match size of column</code> or <code>Unknown compression method</code> exception). This bug appeared in version 18.10.3. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2913\" rel=\"external nofollow noreferrer\">#2913</a></li>\n<li>Fixed a bug when merging <code>CollapsingMergeTree</code> tables if one of the data parts is empty (these parts are formed during merge or <code>ALTER DELETE</code> if all data was deleted), and the <code>vertical</code> algorithm was used for the merge. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3049\" rel=\"external nofollow noreferrer\">#3049</a></li>\n<li>Fixed a race condition during <code>DROP</code> or <code>TRUNCATE</code> for <code>Memory</code> tables with a simultaneous <code>SELECT</code>, which could lead to server crashes. This bug appeared in version 1.1.54388. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3038\" rel=\"external nofollow noreferrer\">#3038</a></li>\n<li>Fixed the possibility of data loss when inserting in <code>Replicated</code> tables if the <code>Session is expired</code> error is returned (data loss can be detected by the <code>ReplicatedDataLoss</code> metric). This error occurred in version 1.1.54378. <a hre");
            
            document.write("f=\"https://github.com/ClickHouse/ClickHouse/pull/2939\" rel=\"external nofollow noreferrer\">#2939</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2949\" rel=\"external nofollow noreferrer\">#2949</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2964\" rel=\"external nofollow noreferrer\">#2964</a></li>\n<li>Fixed a segfault during <code>JOIN ... ON</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3000\" rel=\"external nofollow noreferrer\">#3000</a></li>\n<li>Fixed the error searching column names when the <code>WHERE</code> expression consists entirely of a qualified column name, such as <code>WHERE table.column</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2994\" rel=\"external nofollow noreferrer\">#2994</a></li>\n<li>Fixed the \"Not found column\" error that occurred when executing distributed queries if a single column consisting of an IN expression with a subquery is requested from a remote server. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3087\" rel=\"external nofollow noreferrer\">#3087</a></li>\n<li>Fixed the <code>Block structure mismatch in UNION stream: different number of columns</code> error that occurred for distributed queries if one of the shards is local and the other is not, and optimization of the move to <code>PREWHERE</code> is triggered. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2226\" rel=\"external nofollow noreferrer\">#2226</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3037\" rel=\"external nofollow noreferrer\">#3037</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3055\" rel=\"external nofollow noreferrer\">#3055</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3065\" rel=\"external nofollow noreferrer\">#3065</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3073\" rel=\"external nofollow noreferrer\">#3073</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3090\" rel=\"external nofollow noreferrer\">#3090</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3093\" rel=\"external nofollow noreferrer\">#3093</a></li>\n<li>Fixed the <code>pointInPolygon</code> function for certain cases of non-convex polygons. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2910\" rel=\"external nofollow noreferrer\">#2910</a></li>\n<li>Fixed the incorrect result when comparing <code>nan</code> with integers. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3024\" rel=\"external nofollow noreferrer\">#3024</a></li>\n<li>Fixed an error in the <code>zlib-ng</code> library that could lead to segfault in rare cases. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2854\" rel=\"external nofollow noreferrer\">#2854</a></li>\n<li>Fixed a memory leak when inserting into a table with <code>AggregateFunction</code> columns, if the state of the aggregate function is not simple (allocates memory separately), and if a single insertion request results in multiple small blocks. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/3084\" rel=\"external nofollow noreferrer\">#3084</a></li>\n<li>Fixed a race condition when creating and deleting the same <code>Buffer</code> or <code>MergeTree</code> table simultaneously.</li>\n<li>Fixed the possibility of a segfault when comparing tuples made up of certain non-trivial types, such as tuples. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2989\" rel=\"external nofollow noreferrer\">#2989</a></li>\n<li>Fixed the possibility of a segfault when running certain <code>ON CLUSTER</code> queries. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2960\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed an error in the <code>arrayDistinct</code> function for <code>Nullable</code> array elements. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2845\" rel=\"external nofollow noreferrer\">#2845</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2937\" rel=\"external nofollow noreferrer\">#2937</a></li>\n<li>The <code>enable_optimize_predicate_expression</code> option now correctly supports cases with <code>SELECT *</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2929\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed the segfault when re-initializing the ZooKeeper session. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2917\" rel=\"external nofollow noreferrer\">#2917</a></li>\n<li>Fixed potential blocking when working with ZooKeeper.</li>\n<li>Fixed incorrect code for adding nested data structures in a <code>SummingMergeTree</code>.</li>\n<li>When allocating memory for states of aggregate functions, alignment is correctly taken into account, which makes it possible to use operations that require alignment when implementing states of aggregate functions. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2808\" rel=\"external nofollow noreferrer\">chenxing-xc</a></li>\n</ul>\n<h4 id=\"security-fix_4\">Security fix:<a class=\"headerlink\" href=\"#security-fix_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Safe use of ODBC data sources. Interaction with ODBC drivers uses a separate <code>clickhouse-odbc-bridge</code> process. Errors in third-party ODBC drivers no longer cause problems with server stability or vulnerabilities. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2828\" rel=\"external nofollow noreferrer\">#2828</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2879\" rel=\"external nofollow noreferrer\">#2879</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2886\" rel=\"external nofollow noreferrer\">#2886</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2893\" rel=\"external nofollow noreferrer\">#2893</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2921\" rel=\"external nofollow noreferrer\">#2921</a></li>\n<li>Fixed incorrect validation of the file path in the <code>catBoostPool</code> table function. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2894\" rel=\"external nofollow noreferrer\">#2894</a></li>\n<li>The contents of system tables (<code>tables</code>, <code>databases</code>, <code>parts</code>, <code>columns</code>, <code>parts_columns</code>, <code>merges</code>, <code>mutations</code>, <code>replicas</code>, and <code>replication_queue</code>) are filtered according to the user's configured access to databases (<code>allow_databases</code>). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2856\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_6\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>In queries with JOIN, the star character expands to a list of columns in all tables, in compliance with the SQL standard. You can restore the old behavior by setting <code>asterisk_left_columns_only</code> to 1 on the user configuration level.</li>\n</ul>\n<h4 id=\"build-changes_2\">Build changes:<a class=\"headerlink\" href=\"#build-changes_2\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Most integration tests can now be run by commit.</li>\n<li>Code style checks can also be run by commit.</li>\n<li>The <code>memcpy</code> implementation is chosen correctly when building on CentOS7/Fedora. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2912\" rel=\"external nofollow noreferrer\">Etienne Champetier</a></li>\n<li>When using clang to build, some warnings from <code>-Weverything</code> have been added, in addition to the regular <code>-Wall-Wextra -Werror</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2957\" rel=\"external nofollow noreferrer\">#2957</a></li>\n<li>Debugging the build uses the <code>jemalloc</code> debug option.</li>\n<li>The interface of the library for interacting with ZooKeeper is declared abstract. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2950\" rel=\"external nofollow noreferrer\">#2950</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-10-3-2018-08-13\">ClickHouse release 18.10.3, 2018-08-13<a class=\"headerlink\" href=\"#clickhouse-release-18-10-3-2018-08-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_13\">New features:<a class=\"headerlink\" href=\"#new-features_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>HTTPS can be used for replication. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2760\" rel=\"external nofollow noreferrer\">#2760</a></li>\n<li>Added the functions <code>murmurHash2_64</code>, <code>murmurHash3_32</code>, <code>murmurHash3_64</code>, and <code>murmurHash3_128</code> in addition to the existing <code>murmurHash2_32</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2791\" rel=\"external nofollow noreferrer\">#2791</a></li>\n<li>Support for Nullable types in the ClickHouse ODBC driver (<code>ODBCDriver2</code> output format). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2834\" rel=\"external nofollow noreferrer\">#2834</a></li>\n<li>Support for <code>UUID</code> in the key columns.</li>\n</ul>\n<h4 id=\"improvements_12\">Improvements:<a class=\"headerlink\" href=\"#improvements_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Clusters can be removed without restarting the server when they are deleted from the config files. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2777\" rel=\"external nofollow noreferrer\">#2777</a></li>\n<li>External dictionaries can be removed without restarting the server when they are removed from config files. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2779\" rel=\"external nofollow noreferrer\">#2779</a></li>\n<li>Added <code>SETTINGS</code> support for the <code>Kafka</code> table engine. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2781\" rel=\"external nofollow noreferrer\">Alexander Marshalov</a></li>\n<li>Improvements for the <code>UUID</code> data type (not yet complete). <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2618\" rel=\"external nofollow noreferrer\">#2618</a></li>\n<li>Support for empty parts after merges in the <code>SummingMergeTree</code>, <code>CollapsingMergeTree</code> and <code>VersionedCollapsingMergeTree</code> engines. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2815\" rel=\"external nofollow noreferrer\">#2815</a></li>\n<li>Old records of completed mutations are deleted (<code>ALTER DELETE</code>). ");
            
            document.write("<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2784\" rel=\"external nofollow noreferrer\">#2784</a></li>\n<li>Added the <code>system.merge_tree_settings</code> table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2841\" rel=\"external nofollow noreferrer\">Kirill Shvakov</a></li>\n<li>The <code>system.tables</code> table now has dependency columns: <code>dependencies_database</code> and <code>dependencies_table</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2851\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Added the <code>max_partition_size_to_drop</code> config option. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2782\" rel=\"external nofollow noreferrer\">#2782</a></li>\n<li>Added the <code>output_format_json_escape_forward_slashes</code> option. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2812\" rel=\"external nofollow noreferrer\">Alexander Bocharov</a></li>\n<li>Added the <code>max_fetch_partition_retries_count</code> setting. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2831\" rel=\"external nofollow noreferrer\">#2831</a></li>\n<li>Added the <code>prefer_localhost_replica</code> setting for disabling the preference for a local replica and going to a local replica without inter-process interaction. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2832\" rel=\"external nofollow noreferrer\">#2832</a></li>\n<li>The <code>quantileExact</code> aggregate function returns <code>nan</code> in the case of aggregation on an empty <code>Float32</code> or <code>Float64</code> set. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2855\" rel=\"external nofollow noreferrer\">Sundy Li</a></li>\n</ul>\n<h4 id=\"bug-fixes_36\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_36\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed unnecessary escaping of the connection string parameters for ODBC, which made it impossible to establish a connection. This error occurred in version 18.6.0.</li>\n<li>Fixed the logic for processing <code>REPLACE PARTITION</code> commands in the replication queue. If there are two <code>REPLACE</code> commands for the same partition, the incorrect logic could cause one of them to remain in the replication queue and not be executed. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2814\" rel=\"external nofollow noreferrer\">#2814</a></li>\n<li>Fixed a merge bug when all data parts were empty (parts that were formed from a merge or from <code>ALTER DELETE</code> if all data was deleted). This bug appeared in version 18.1.0. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2930\" rel=\"external nofollow noreferrer\">#2930</a></li>\n<li>Fixed an error for concurrent <code>Set</code> or <code>Join</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2823\" rel=\"external nofollow noreferrer\">Amos Bird</a></li>\n<li>Fixed the <code>Block structure mismatch in UNION stream: different number of columns</code> error that occurred for <code>UNION ALL</code> queries inside a sub-query if one of the <code>SELECT</code> queries contains duplicate column names. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2094\" rel=\"external nofollow noreferrer\">Winter Zhang</a></li>\n<li>Fixed a memory leak if an exception occurred when connecting to a MySQL server.</li>\n<li>Fixed incorrect clickhouse-client response code in case of a query error.</li>\n<li>Fixed incorrect behavior of materialized views containing DISTINCT. <a href=\"https://github.com/ClickHouse/ClickHouse/issues/2795\" rel=\"external nofollow noreferrer\">#2795</a></li>\n</ul>\n<h4 id=\"backward-incompatible-changes_7\">Backward incompatible changes<a class=\"headerlink\" href=\"#backward-incompatible-changes_7\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed support for CHECK TABLE queries for Distributed tables.</li>\n</ul>\n<h4 id=\"build-changes_3\">Build changes:<a class=\"headerlink\" href=\"#build-changes_3\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The allocator has been replaced: <code>jemalloc</code> is now used instead of <code>tcmalloc</code>. In some scenarios, this increases speed up to 20%. However, there are queries that have slowed by up to 20%. Memory consumption has been reduced by approximately 10% in some scenarios, with improved stability. With highly competitive loads, CPU usage in userspace and in system shows just a slight increase. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2773\" rel=\"external nofollow noreferrer\">#2773</a></li>\n<li>Use of libressl from a submodule. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/1983\" rel=\"external nofollow noreferrer\">#1983</a> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2807\" rel=\"external nofollow noreferrer\">#2807</a></li>\n<li>Use of unixodbc from a submodule. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2789\" rel=\"external nofollow noreferrer\">#2789</a></li>\n<li>Use of mariadb-connector-c from a submodule. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2785\" rel=\"external nofollow noreferrer\">#2785</a></li>\n<li>Added functional test files to the repository that depend on the availability of test data (for the time being, without the test data itself).</li>\n</ul>\n<h3 id=\"clickhouse-release-18-6-0-2018-08-02\">ClickHouse release 18.6.0, 2018-08-02<a class=\"headerlink\" href=\"#clickhouse-release-18-6-0-2018-08-02\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_14\">New features:<a class=\"headerlink\" href=\"#new-features_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for ON expressions for the JOIN ON syntax:<br />\n<code>JOIN ON Expr([table.]column ...) = Expr([table.]column, ...) [AND Expr([table.]column, ...) = Expr([table.]column, ...) ...]</code><br />\nThe expression must be a chain of equalities joined by the AND operator. Each side of the equality can be an arbitrary expression over the columns of one of the tables. The use of fully qualified column names is supported (<code>table.name</code>, <code>database.table.name</code>, <code>table_alias.name</code>, <code>subquery_alias.name</code>) for the right table. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2742\" rel=\"external nofollow noreferrer\">#2742</a></li>\n<li>HTTPS can be enabled for replication. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2760\" rel=\"external nofollow noreferrer\">#2760</a></li>\n</ul>\n<h4 id=\"improvements_13\">Improvements:<a class=\"headerlink\" href=\"#improvements_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The server passes the patch component of its version to the client. Data about the patch version component is in <code>system.processes</code> and <code>query_log</code>. <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2646\" rel=\"external nofollow noreferrer\">#2646</a></li>\n</ul>\n<h3 id=\"clickhouse-release-18-5-1-2018-07-31\">ClickHouse release 18.5.1, 2018-07-31<a class=\"headerlink\" href=\"#clickhouse-release-18-5-1-2018-07-31\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_15\">New features:<a class=\"headerlink\" href=\"#new-features_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the hash function <code>murmurHash2_32</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2756\" rel=\"external nofollow noreferrer\">#2756</a>.</li>\n</ul>\n<h4 id=\"improvements_14\">Improvements:<a class=\"headerlink\" href=\"#improvements_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Now you can use the <code>from_env</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2741\" rel=\"external nofollow noreferrer\">#2741</a> attribute to set values in config files from environment variables.</li>\n<li>Added case-insensitive versions of the <code>coalesce</code>, <code>ifNull</code>, and <code>nullIf functions</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2752\" rel=\"external nofollow noreferrer\">#2752</a>.</li>\n</ul>\n<h4 id=\"bug-fixes_37\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_37\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a possible bug when starting a replica <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2759\" rel=\"external nofollow noreferrer\">#2759</a>.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-4-0-2018-07-28\">ClickHouse release 18.4.0, 2018-07-28<a class=\"headerlink\" href=\"#clickhouse-release-18-4-0-2018-07-28\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_16\">New features:<a class=\"headerlink\" href=\"#new-features_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added system tables: <code>formats</code>, <code>data_type_families</code>, <code>aggregate_function_combinators</code>, <code>table_functions</code>, <code>table_engines</code>, <code>collations</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2721\" rel=\"external nofollow noreferrer\">#2721</a>.</li>\n<li>Added the ability to use a table function instead of a table as an argument of a <code>remote</code> or <code>cluster table function</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2708\" rel=\"external nofollow noreferrer\">#2708</a>.</li>\n<li>Support for <code>HTTP Basic</code> authentication in the replication protocol <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2727\" rel=\"external nofollow noreferrer\">#2727</a>.</li>\n<li>The <code>has</code> function now allows searching for a numeric value in an array of <code>Enum</code> values <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2699\" rel=\"external nofollow noreferrer\">Maxim Khrisanfov</a>.</li>\n<li>Support for adding arbitrary message separators when reading from <code>Kafka</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2701\" rel=\"external nofollow noreferrer\">Amos Bird</a>.</li>\n</ul>\n<h4 id=\"improvements_15\">Improvements:<a class=\"headerlink\" href=\"#improvements_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The <code>ALTER TABLE t DELETE WHERE</code> query does not rewrite data parts that were not affected by the WHERE condition <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2694\" rel=\"external nofollow noreferrer\">#2694</a>.</li>\n<li>The <code>use_minimalistic_checksums_in_zookeeper</code> option for <code>ReplicatedMergeTree</code> tables is enabled by default. This setting was added in version 1.1.543");
            
            document.write("78, 2018-04-16. Versions that are older than 1.1.54378 can no longer be installed.</li>\n<li>Support for running <code>KILL</code> and <code>OPTIMIZE</code> queries that specify <code>ON CLUSTER</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2689\" rel=\"external nofollow noreferrer\">Winter Zhang</a>.</li>\n</ul>\n<h4 id=\"bug-fixes_38\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_38\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the error <code>Column ... is not under an aggregate function and not in GROUP BY</code> for aggregation with an IN expression. This bug appeared in version 18.1.0. (<a href=\"https://github.com/ClickHouse/ClickHouse/commit/bbdd780be0be06a0f336775941cdd536878dd2c2\" rel=\"external nofollow noreferrer\">bbdd780b</a>)</li>\n<li>Fixed a bug in the <code>windowFunnel aggregate function</code> <a href=\"https://github.com/ClickHouse/ClickHouse/pull/2735\" rel=\"external nofollow noreferrer\">Winter Zhang</a>.</li>\n<li>Fixed a bug in the <code>anyHeavy</code>  aggregate function (<a href=\"https://github.com/ClickHouse/ClickHouse/commit/a2101df25a6a0fba99aa71f8793d762af2b801ee\" rel=\"external nofollow noreferrer\">a2101df2</a>)</li>\n<li>Fixed server crash when using the <code>countArray()</code> aggregate function.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_8\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_8\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Parameters for <code>Kafka</code> engine was changed from <code>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_schema, kafka_num_consumers])</code> to <code>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_row_delimiter, kafka_schema, kafka_num_consumers])</code>. If your tables use <code>kafka_schema</code> or <code>kafka_num_consumers</code> parameters, you have to manually edit the metadata files <code>path/metadata/database/table.sql</code> and add <code>kafka_row_delimiter</code> parameter with <code>''</code> value.</li>\n</ul>\n<h3 id=\"clickhouse-release-18-1-0-2018-07-23\">ClickHouse release 18.1.0, 2018-07-23<a class=\"headerlink\" href=\"#clickhouse-release-18-1-0-2018-07-23\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_17\">New features:<a class=\"headerlink\" href=\"#new-features_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Support for the <code>ALTER TABLE t DELETE WHERE</code> query for non-replicated MergeTree tables (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2634\" rel=\"external nofollow noreferrer\">#2634</a>).</li>\n<li>Support for arbitrary types for the <code>uniq*</code> family of aggregate functions (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2010\" rel=\"external nofollow noreferrer\">#2010</a>).</li>\n<li>Support for arbitrary types in comparison operators (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2026\" rel=\"external nofollow noreferrer\">#2026</a>).</li>\n<li>The <code>users.xml</code> file allows setting a subnet mask in the format <code>10.0.0.1/255.255.255.0</code>. This is necessary for using masks for IPv6 networks with zeros in the middle (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2637\" rel=\"external nofollow noreferrer\">#2637</a>).</li>\n<li>Added the <code>arrayDistinct</code> function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2670\" rel=\"external nofollow noreferrer\">#2670</a>).</li>\n<li>The SummingMergeTree engine can now work with AggregateFunction type columns (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2566\" rel=\"external nofollow noreferrer\">Constantin S. Pan</a>).</li>\n</ul>\n<h4 id=\"improvements_16\">Improvements:<a class=\"headerlink\" href=\"#improvements_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Changed the numbering scheme for release versions. Now the first part contains the year of release (A.D., Moscow timezone, minus 2000), the second part contains the number for major changes (increases for most releases), and the third part is the patch version. Releases are still backwards compatible, unless otherwise stated in the changelog.</li>\n<li>Faster conversions of floating-point numbers to a string (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2664\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n<li>If some rows were skipped during an insert due to parsing errors (this is possible with the <code>input_allow_errors_num</code> and <code>input_allow_errors_ratio</code> settings enabled), the number of skipped rows is now written to the server log (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2669\" rel=\"external nofollow noreferrer\">Leonardo Cecchi</a>).</li>\n</ul>\n<h4 id=\"bug-fixes_39\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_39\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the TRUNCATE command for temporary tables (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2624\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n<li>Fixed a rare deadlock in the ZooKeeper client library that occurred when there was a network error while reading the response (<a href=\"https://github.com/ClickHouse/ClickHouse/commit/c315200e64b87e44bdf740707fc857d1fdf7e947\" rel=\"external nofollow noreferrer\">c315200</a>).</li>\n<li>Fixed an error during a CAST to Nullable types (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/1322\" rel=\"external nofollow noreferrer\">#1322</a>).</li>\n<li>Fixed the incorrect result of the <code>maxIntersection()</code> function when the boundaries of intervals coincided (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2657\" rel=\"external nofollow noreferrer\">Michael Furmur</a>).</li>\n<li>Fixed incorrect transformation of the OR expression chain in a function argument (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2663\" rel=\"external nofollow noreferrer\">chenxing-xc</a>).</li>\n<li>Fixed performance degradation for queries containing <code>IN (subquery)</code> expressions inside another subquery (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2571\" rel=\"external nofollow noreferrer\">#2571</a>).</li>\n<li>Fixed incompatibility between servers with different versions in distributed queries that use a <code>CAST</code> function that isn't in uppercase letters (<a href=\"https://github.com/ClickHouse/ClickHouse/commit/fe8c4d64e434cacd4ceef34faa9005129f2190a5\" rel=\"external nofollow noreferrer\">fe8c4d6</a>).</li>\n<li>Added missing quoting of identifiers for queries to an external DBMS (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2635\" rel=\"external nofollow noreferrer\">#2635</a>).</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_9\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_9\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Converting a string containing the number zero to DateTime does not work. Example: <code>SELECT toDateTime('0')</code>. This is also the reason that <code>DateTime DEFAULT '0'</code> does not work in tables, as well as <code>&lt;null_value&gt;0&lt;/null_value&gt;</code> in dictionaries. Solution: replace <code>0</code> with <code>0000-00-00 00:00:00</code>.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54394-2018-07-12\">ClickHouse release 1.1.54394, 2018-07-12<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54394-2018-07-12\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_18\">New features:<a class=\"headerlink\" href=\"#new-features_18\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>histogram</code> aggregate function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2521\" rel=\"external nofollow noreferrer\">Mikhail Surin</a>).</li>\n<li>Now <code>OPTIMIZE TABLE ... FINAL</code> can be used without specifying partitions for <code>ReplicatedMergeTree</code> (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2600\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n</ul>\n<h4 id=\"bug-fixes_40\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_40\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a problem with a very small timeout for sockets (one second) for reading and writing when sending and downloading replicated data, which made it impossible to download larger parts if there is a load on the network or disk (it resulted in cyclical attempts to download parts). This error occurred in version 1.1.54388.</li>\n<li>Fixed issues when using chroot in ZooKeeper if you inserted duplicate data blocks in the table.</li>\n<li>The <code>has</code> function now works correctly for an array with Nullable elements (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2115\" rel=\"external nofollow noreferrer\">#2115</a>).</li>\n<li>The <code>system.tables</code> table now works correctly when used in distributed queries. The <code>metadata_modification_time</code> and <code>engine_full</code> columns are now non-virtual. Fixed an error that occurred if only these columns were queried from the table.</li>\n<li>Fixed how an empty <code>TinyLog</code> table works after inserting an empty data block (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2563\" rel=\"external nofollow noreferrer\">#2563</a>).</li>\n<li>The <code>system.zookeeper</code> table works if the value of the node in ZooKeeper is NULL.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54390-2018-07-06\">ClickHouse release 1.1.54390, 2018-07-06<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54390-2018-07-06\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_19\">New features:<a class=\"headerlink\" href=\"#new-features_19\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Queries can be sent in <code>multipart/form-data</code> format (in the <code>query</code> field), which is useful if external data is also sent for query processing (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2490\" rel=\"external nofollow noreferrer\">Olga Hvostikova</a>).</li>\n<li>Added the ability to enable or disable processing single or double quotes when reading data in CSV format. You can configure this in the <code>format_csv_allow_single_quotes</code> and <code>format_csv_allow_double_quotes</code> settings (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2574\" rel=\"external no");
            
            document.write("follow noreferrer\">Amos Bird</a>).</li>\n<li>Now <code>OPTIMIZE TABLE ... FINAL</code> can be used without specifying the partition for non-replicated variants of <code>MergeTree</code> (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2599\" rel=\"external nofollow noreferrer\">Amos Bird</a>).</li>\n</ul>\n<h4 id=\"improvements_17\">Improvements:<a class=\"headerlink\" href=\"#improvements_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improved performance, reduced memory consumption, and correct memory consumption tracking with use of the IN operator when a table index could be used (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2584\" rel=\"external nofollow noreferrer\">#2584</a>).</li>\n<li>Removed redundant checking of checksums when adding a data part. This is important when there are a large number of replicas, because in these cases the total number of checks was equal to N^2.</li>\n<li>Added support for <code>Array(Tuple(...))</code>  arguments for the <code>arrayEnumerateUniq</code> function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2573\" rel=\"external nofollow noreferrer\">#2573</a>).</li>\n<li>Added <code>Nullable</code> support for the <code>runningDifference</code> function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2594\" rel=\"external nofollow noreferrer\">#2594</a>).</li>\n<li>Improved query analysis performance when there is a very large number of expressions (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2572\" rel=\"external nofollow noreferrer\">#2572</a>).</li>\n<li>Faster selection of data parts for merging in <code>ReplicatedMergeTree</code> tables. Faster recovery of the ZooKeeper session (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2597\" rel=\"external nofollow noreferrer\">#2597</a>).</li>\n<li>The <code>format_version.txt</code> file for <code>MergeTree</code> tables is re-created if it is missing, which makes sense if ClickHouse is launched after copying the directory structure without files (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2593\" rel=\"external nofollow noreferrer\">Ciprian Hacman</a>).</li>\n</ul>\n<h4 id=\"bug-fixes_41\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_41\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a bug when working with ZooKeeper that could make it impossible to recover the session and readonly states of tables before restarting the server.</li>\n<li>Fixed a bug when working with ZooKeeper that could result in old nodes not being deleted if the session is interrupted.</li>\n<li>Fixed an error in the <code>quantileTDigest</code> function for Float arguments (this bug was introduced in version 1.1.54388) (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2553\" rel=\"external nofollow noreferrer\">Mikhail Surin</a>).</li>\n<li>Fixed a bug in the index for MergeTree tables if the primary key column is located inside the function for converting types between signed and unsigned integers of the same size (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2603\" rel=\"external nofollow noreferrer\">#2603</a>).</li>\n<li>Fixed segfault if <code>macros</code> are used but they aren't in the config file (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2570\" rel=\"external nofollow noreferrer\">#2570</a>).</li>\n<li>Fixed switching to the default database when reconnecting the client (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2583\" rel=\"external nofollow noreferrer\">#2583</a>).</li>\n<li>Fixed a bug that occurred when the <code>use_index_for_in_with_subqueries</code> setting was disabled.</li>\n</ul>\n<h4 id=\"security-fix_5\">Security fix:<a class=\"headerlink\" href=\"#security-fix_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Sending files is no longer possible when connected to MySQL (<code>LOAD DATA LOCAL INFILE</code>).</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54388-2018-06-28\">ClickHouse release 1.1.54388, 2018-06-28<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54388-2018-06-28\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_20\">New features:<a class=\"headerlink\" href=\"#new-features_20\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Support for the <code>ALTER TABLE t DELETE WHERE</code> query for replicated tables. Added the <code>system.mutations</code> table to track progress of this type of queries.</li>\n<li>Support for the <code>ALTER TABLE t [REPLACE|ATTACH] PARTITION</code> query for *MergeTree tables.</li>\n<li>Support for the <code>TRUNCATE TABLE</code> query (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2260\" rel=\"external nofollow noreferrer\">Winter Zhang</a>)</li>\n<li>Several new <code>SYSTEM</code> queries for replicated tables (<code>RESTART REPLICAS</code>, <code>SYNC REPLICA</code>, <code>[STOP|START] [MERGES|FETCHES|SENDS REPLICATED|REPLICATION QUEUES]</code>).</li>\n<li>Added the ability to write to a table with the MySQL engine and the corresponding table function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2294\" rel=\"external nofollow noreferrer\">sundy-li</a>).</li>\n<li>Added the <code>url()</code> table function and the <code>URL</code> table engine (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2501\" rel=\"external nofollow noreferrer\">Alexander Sapin</a>).</li>\n<li>Added the <code>windowFunnel</code>  aggregate function (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2352\" rel=\"external nofollow noreferrer\">sundy-li</a>).</li>\n<li>New <code>startsWith</code> and <code>endsWith</code> functions for strings (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2429\" rel=\"external nofollow noreferrer\">Vadim Plakhtinsky</a>).</li>\n<li>The <code>numbers()</code> table function now allows you to specify the offset (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2535\" rel=\"external nofollow noreferrer\">Winter Zhang</a>).</li>\n<li>The password to <code>clickhouse-client</code> can be entered interactively.</li>\n<li>Server logs can now be sent to syslog (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2459\" rel=\"external nofollow noreferrer\">Alexander Krasheninnikov</a>).</li>\n<li>Support for logging in dictionaries with a shared library source (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2472\" rel=\"external nofollow noreferrer\">Alexander Sapin</a>).</li>\n<li>Support for custom CSV delimiters (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2263\" rel=\"external nofollow noreferrer\">Ivan Zhukov</a>)</li>\n<li>Added the <code>date_time_input_format</code> setting. If you switch this setting to <code>'best_effort'</code>, DateTime values will be read in a wide range of formats.</li>\n<li>Added the <code>clickhouse-obfuscator</code> utility for data obfuscation. Usage example: publishing data used in performance tests.</li>\n</ul>\n<h4 id=\"experimental-features_6\">Experimental features:<a class=\"headerlink\" href=\"#experimental-features_6\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the ability to calculate <code>and</code> arguments only where they are needed (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2272\" rel=\"external nofollow noreferrer\">Anastasia Tsarkova</a>)</li>\n<li>JIT compilation to native code is now available for some expressions (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2277\" rel=\"external nofollow noreferrer\">pyos</a>).</li>\n</ul>\n<h4 id=\"bug-fixes_42\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_42\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Duplicates no longer appear for a query with <code>DISTINCT</code> and <code>ORDER BY</code>.</li>\n<li>Queries with <code>ARRAY JOIN</code> and <code>arrayFilter</code> no longer return an incorrect result.</li>\n<li>Fixed an error when reading an array column from a Nested structure (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2066\" rel=\"external nofollow noreferrer\">#2066</a>).</li>\n<li>Fixed an error when analyzing queries with a HAVING clause like <code>HAVING tuple IN (...)</code>.</li>\n<li>Fixed an error when analyzing queries with recursive aliases.</li>\n<li>Fixed an error when reading from ReplacingMergeTree with a condition in PREWHERE that filters all rows (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2525\" rel=\"external nofollow noreferrer\">#2525</a>).</li>\n<li>User profile settings were not applied when using sessions in the HTTP interface.</li>\n<li>Fixed how settings are applied from the command line parameters in clickhouse-local.</li>\n<li>The ZooKeeper client library now uses the session timeout received from the server.</li>\n<li>Fixed a bug in the ZooKeeper client library when the client waited for the server response longer than the timeout.</li>\n<li>Fixed pruning of parts for queries with conditions on partition key columns (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2342\" rel=\"external nofollow noreferrer\">#2342</a>).</li>\n<li>Merges are now possible after <code>CLEAR COLUMN IN PARTITION</code> (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2315\" rel=\"external nofollow noreferrer\">#2315</a>).</li>\n<li>Type mapping in the ODBC table function has been fixed (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2268\" rel=\"external nofollow noreferrer\">sundy-li</a>).</li>\n<li>Type comparisons have been fixed for <code>DateTime</code> with and without the time zone (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2400\" rel=\"external nofollow noreferrer\">Alexander Bocharov</a>).</li>\n<li>Fixed syntactic parsing and formatting of the <code>CAST</code> operator.</li>\n<li>Fixed insertion into a materialized view for the Distributed table engine (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2411\" rel=\"external nofollow noreferrer\">Babacar Diass\u00e9</a>).</li>\n<li>Fixed a race condition when writing data from the <code>Kafka</code> engine to materialized views (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2448\" rel=\"external nofollow noreferrer\">Yangkuan Liu</a>).</li>\n<li>Fixed SSRF in the remote() table function.</li>\n<li>Fixed exit behavior of <code>clickhouse-client</code> in multiline mode (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2510\" rel=\"external nofollow noreferrer\">#2510</a>).</li>\n</ul>\n<h4 id=\"improvements_18\">Impro");
            
            document.write("vements:<a class=\"headerlink\" href=\"#improvements_18\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Background tasks in replicated tables are now performed in a thread pool instead of in separate threads (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/1722\" rel=\"external nofollow noreferrer\">Silviu Caragea</a>).</li>\n<li>Improved LZ4 compression performance.</li>\n<li>Faster analysis for queries with a large number of JOINs and sub-queries.</li>\n<li>The DNS cache is now updated automatically when there are too many network errors.</li>\n<li>Table inserts no longer occur if the insert into one of the materialized views is not possible because it has too many parts.</li>\n<li>Corrected the discrepancy in the event counters <code>Query</code>, <code>SelectQuery</code>, and <code>InsertQuery</code>.</li>\n<li>Expressions like <code>tuple IN (SELECT tuple)</code> are allowed if the tuple types match.</li>\n<li>A server with replicated tables can start even if you haven't configured ZooKeeper.</li>\n<li>When calculating the number of available CPU cores, limits on cgroups are now taken into account (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2325\" rel=\"external nofollow noreferrer\">Atri Sharma</a>).</li>\n<li>Added chown for config directories in the systemd config file (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2421\" rel=\"external nofollow noreferrer\">Mikhail Shiryaev</a>).</li>\n</ul>\n<h4 id=\"build-changes_4\">Build changes:<a class=\"headerlink\" href=\"#build-changes_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The gcc8 compiler can be used for builds.</li>\n<li>Added the ability to build llvm from submodule.</li>\n<li>The version of the librdkafka library has been updated to v0.11.4.</li>\n<li>Added the ability to use the system libcpuid library. The library version has been updated to 0.4.0.</li>\n<li>Fixed the build using the vectorclass library (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2274\" rel=\"external nofollow noreferrer\">Babacar Diass\u00e9</a>).</li>\n<li>Cmake now generates files for ninja by default (like when using <code>-G Ninja</code>).</li>\n<li>Added the ability to use the libtinfo library instead of libtermcap (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2519\" rel=\"external nofollow noreferrer\">Georgy Kondratiev</a>).</li>\n<li>Fixed a header file conflict in Fedora Rawhide (<a href=\"https://github.com/ClickHouse/ClickHouse/issues/2520\" rel=\"external nofollow noreferrer\">#2520</a>).</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_10\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_10\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed escaping in <code>Vertical</code> and <code>Pretty*</code> formats and deleted the <code>VerticalRaw</code> format.</li>\n<li>If servers with version 1.1.54388 (or newer) and servers with an older version are used simultaneously in a distributed query and the query has the <code>cast(x, 'Type')</code> expression without the <code>AS</code> keyword and doesn't have the word <code>cast</code> in uppercase, an exception will be thrown with a message like <code>Not found column cast(0, 'UInt8') in block</code>. Solution: Update the server on the entire cluster.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54385-2018-06-01\">ClickHouse release 1.1.54385, 2018-06-01<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54385-2018-06-01\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_43\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_43\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error that in some cases caused ZooKeeper operations to block.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54383-2018-05-22\">ClickHouse release 1.1.54383, 2018-05-22<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54383-2018-05-22\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_44\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_44\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a slowdown of replication queue if a table has many replicas.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54381-2018-05-14\">ClickHouse release 1.1.54381, 2018-05-14<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54381-2018-05-14\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"bug-fixes_45\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_45\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a nodes leak in ZooKeeper when ClickHouse loses connection to ZooKeeper server.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54380-2018-04-21\">ClickHouse release 1.1.54380, 2018-04-21<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54380-2018-04-21\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_21\">New features:<a class=\"headerlink\" href=\"#new-features_21\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the table function <code>file(path, format, structure)</code>. An example reading bytes from <code>/dev/urandom</code>: <code>ln -s /dev/urandom /var/lib/clickhouse/user_files/random``clickhouse-client -q \"SELECT * FROM file('random', 'RowBinary', 'd UInt8') LIMIT 10\"</code>.</li>\n</ul>\n<h4 id=\"improvements_19\">Improvements:<a class=\"headerlink\" href=\"#improvements_19\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Subqueries can be wrapped in <code>()</code> brackets to enhance query readability. For example: <code>(SELECT 1) UNION ALL (SELECT 1)</code>.</li>\n<li>Simple <code>SELECT</code> queries from the <code>system.processes</code> table are not included in the <code>max_concurrent_queries</code> limit.</li>\n</ul>\n<h4 id=\"bug-fixes_46\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_46\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed incorrect behavior of the <code>IN</code> operator when select from <code>MATERIALIZED VIEW</code>.</li>\n<li>Fixed incorrect filtering by partition index in expressions like <code>partition_key_column IN (...)</code>.</li>\n<li>Fixed inability to execute <code>OPTIMIZE</code> query on non-leader replica if <code>REANAME</code> was performed on the table.</li>\n<li>Fixed the authorization error when executing <code>OPTIMIZE</code> or <code>ALTER</code> queries on a non-leader replica.</li>\n<li>Fixed freezing of <code>KILL QUERY</code>.</li>\n<li>Fixed an error in ZooKeeper client library which led to loss of watches, freezing of distributed DDL queue, and slowdowns in the replication queue if a non-empty <code>chroot</code> prefix is used in the ZooKeeper configuration.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_11\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_11\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed support for expressions like <code>(a, b) IN (SELECT (a, b))</code> (you can use the equivalent expression <code>(a, b) IN (SELECT a, b)</code>). In previous releases, these expressions led to undetermined <code>WHERE</code> filtering or caused errors.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54378-2018-04-16\">ClickHouse release 1.1.54378, 2018-04-16<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54378-2018-04-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_22\">New features:<a class=\"headerlink\" href=\"#new-features_22\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Logging level can be changed without restarting the server.</li>\n<li>Added the <code>SHOW CREATE DATABASE</code> query.</li>\n<li>The <code>query_id</code> can be passed to <code>clickhouse-client</code> (elBroom).</li>\n<li>New setting: <code>max_network_bandwidth_for_all_users</code>.</li>\n<li>Added support for <code>ALTER TABLE ... PARTITION ...</code> for <code>MATERIALIZED VIEW</code>.</li>\n<li>Added information about the size of data parts in uncompressed form in the system table.</li>\n<li>Server-to-server encryption support for distributed tables (<code>&lt;secure&gt;1&lt;/secure&gt;</code> in the replica config in <code>&lt;remote_servers&gt;</code>).</li>\n<li>Configuration of the table level for the <code>ReplicatedMergeTree</code> family in order to minimize the amount of data stored in Zookeeper: : <code>use_minimalistic_checksums_in_zookeeper = 1</code></li>\n<li>Configuration of the <code>clickhouse-client</code> prompt. By default, server names are now output to the prompt. The server's display name can be changed. It's also sent in the <code>X-ClickHouse-Display-Name</code> HTTP header (Kirill Shvakov).</li>\n<li>Multiple comma-separated <code>topics</code> can be specified for the <code>Kafka</code> engine  (Tobias Adamson)</li>\n<li>When a query is stopped by <code>KILL QUERY</code> or <code>replace_running_query</code>, the client receives the <code>Query was cancelled</code> exception instead of an incomplete result.</li>\n</ul>\n<h4 id=\"improvements_20\">Improvements:<a class=\"headerlink\" href=\"#improvements_20\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>ALTER TABLE ... DROP/DETACH PARTITION</code> queries are run at the front of the replication queue.</li>\n<li><code>SELECT ... FINAL</code> and <code>OPTIMIZE ... FINAL</code> can be used even when the table has a single data part.</li>\n<li>A <code>query_log</code> table is recreated on the fly if it was deleted manually (Kirill Shvakov).</li>\n<li>The <code>lengthUTF8</code> function runs faster (zhang2014).</li>\n<li>Improved performance of synchronous inserts in <code>Distributed</code> tables (<code>insert_distributed_sync = 1</code>) when there is a very large number of shards.</li>\n<li>The server accepts the <code>send_timeout</code> and <code>receive_timeout</code> settings from the client and applies them when connecting to the client (they are applied in reverse order: the server socket's <code>send_timeout</code> is set to the <code>receive_timeout</code> value received from the client, and vice versa).</li>\n<li>More robust crash recovery for asynchronous insertion into <code>Distributed</code> tables.</li>\n<li>The return type of the <code>countEqual</code> function changed from <code>UInt32</code> to <code>UInt64</code> (\u8c22\u78ca).</li>\n</ul>\n<h4 id=\"bug-fixes_47\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_47\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error with <code>IN</code> when the left side of the expression is <code>Nullable</code>.</");
            
            document.write("li>\n<li>Correct results are now returned when using tuples with <code>IN</code> when some of the tuple components are in the table index.</li>\n<li>The <code>max_execution_time</code> limit now works correctly with distributed queries.</li>\n<li>Fixed errors when calculating the size of composite columns in the <code>system.columns</code> table.</li>\n<li>Fixed an error when creating a temporary table <code>CREATE TEMPORARY TABLE IF NOT EXISTS.</code></li>\n<li>Fixed errors in <code>StorageKafka</code> (##2075)</li>\n<li>Fixed server crashes from invalid arguments of certain aggregate functions.</li>\n<li>Fixed the error that prevented the <code>DETACH DATABASE</code> query from stopping background tasks for <code>ReplicatedMergeTree</code> tables.</li>\n<li><code>Too many parts</code> state is less likely to happen when inserting into aggregated materialized views (##2084).</li>\n<li>Corrected recursive handling of substitutions in the config if a substitution must be followed by another substitution on the same level.</li>\n<li>Corrected the syntax in the metadata file when creating a <code>VIEW</code> that uses a query with <code>UNION ALL</code>.</li>\n<li><code>SummingMergeTree</code> now works correctly for summation of nested data structures with a composite key.</li>\n<li>Fixed the possibility of a race condition when choosing the leader for <code>ReplicatedMergeTree</code> tables.</li>\n</ul>\n<h4 id=\"build-changes_5\">Build changes:<a class=\"headerlink\" href=\"#build-changes_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The build supports <code>ninja</code> instead of <code>make</code> and uses <code>ninja</code> by default for building releases.</li>\n<li>Renamed packages: <code>clickhouse-server-base</code> in <code>clickhouse-common-static</code>; <code>clickhouse-server-common</code> in <code>clickhouse-server</code>; <code>clickhouse-common-dbg</code> in <code>clickhouse-common-static-dbg</code>. To install, use <code>clickhouse-server clickhouse-client</code>. Packages with the old names will still load in the repositories for backward compatibility.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_12\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_12\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed the special interpretation of an IN expression if an array is specified on the left side. Previously, the expression <code>arr IN (set)</code> was interpreted as \"at least one <code>arr</code> element belongs to the <code>set</code>\". To get the same behavior in the new version, write <code>arrayExists(x -&gt; x IN (set), arr)</code>.</li>\n<li>Disabled the incorrect use of the socket option <code>SO_REUSEPORT</code>, which was incorrectly enabled by default in the Poco library. Note that on Linux there is no longer any reason to simultaneously specify the addresses <code>::</code> and <code>0.0.0.0</code> for listen \u2013 use just <code>::</code>, which allows listening to the connection both over IPv4 and IPv6 (with the default kernel config settings). You can also revert to the behavior from previous versions by specifying <code>&lt;listen_reuse_port&gt;1&lt;/listen_reuse_port&gt;</code> in the config.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54370-2018-03-16\">ClickHouse release 1.1.54370, 2018-03-16<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54370-2018-03-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_23\">New features:<a class=\"headerlink\" href=\"#new-features_23\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>system.macros</code> table and auto updating of macros when the config file is changed.</li>\n<li>Added the <code>SYSTEM RELOAD CONFIG</code> query.</li>\n<li>Added the <code>maxIntersections(left_col, right_col)</code> aggregate function, which returns the maximum number of simultaneously intersecting intervals <code>[left; right]</code>. The <code>maxIntersectionsPosition(left, right)</code> function returns the beginning of the \"maximum\" interval. (<a href=\"https://github.com/ClickHouse/ClickHouse/pull/2012\" rel=\"external nofollow noreferrer\">Michael Furmur</a>).</li>\n</ul>\n<h4 id=\"improvements_21\">Improvements:<a class=\"headerlink\" href=\"#improvements_21\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>When inserting data in a <code>Replicated</code> table, fewer requests are made to <code>ZooKeeper</code> (and most of the user-level errors have disappeared from the <code>ZooKeeper</code> log).</li>\n<li>Added the ability to create aliases for data sets. Example: <code>WITH (1, 2, 3) AS set SELECT number IN set FROM system.numbers LIMIT 10</code>.</li>\n</ul>\n<h4 id=\"bug-fixes_48\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_48\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed the <code>Illegal PREWHERE</code> error when reading from Merge tables for <code>Distributed</code>tables.</li>\n<li>Added fixes that allow you to start clickhouse-server in IPv4-only Docker containers.</li>\n<li>Fixed a race condition when reading from system <code>system.parts_columns tables.</code></li>\n<li>Removed double buffering during a synchronous insert to a <code>Distributed</code> table, which could have caused the connection to timeout.</li>\n<li>Fixed a bug that caused excessively long waits for an unavailable replica before beginning a <code>SELECT</code> query.</li>\n<li>Fixed incorrect dates in the <code>system.parts</code> table.</li>\n<li>Fixed a bug that made it impossible to insert data in a <code>Replicated</code> table if <code>chroot</code> was non-empty in the configuration of the <code>ZooKeeper</code> cluster.</li>\n<li>Fixed the vertical merging algorithm for an empty <code>ORDER BY</code> table.</li>\n<li>Restored the ability to use dictionaries in queries to remote tables, even if these dictionaries are not present on the requestor server. This functionality was lost in release 1.1.54362.</li>\n<li>Restored the behavior for queries like <code>SELECT * FROM remote('server2', default.table) WHERE col IN (SELECT col2 FROM default.table)</code> when the right side of the <code>IN</code> should use a remote <code>default.table</code> instead of a local one. This behavior was broken in version 1.1.54358.</li>\n<li>Removed extraneous error-level logging of <code>Not found column ... in block</code>.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54362-2018-03-11\">Clickhouse Release 1.1.54362, 2018-03-11<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54362-2018-03-11\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_24\">New features:<a class=\"headerlink\" href=\"#new-features_24\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Aggregation without <code>GROUP BY</code> for an empty set (such as <code>SELECT count(*) FROM table WHERE 0</code>) now returns a result with one row with null values for aggregate functions, in compliance with the SQL standard. To restore the old behavior (return an empty result), set <code>empty_result_for_aggregation_by_empty_set</code> to 1.</li>\n<li>Added type conversion for <code>UNION ALL</code>. Different alias names are allowed in <code>SELECT</code> positions in <code>UNION ALL</code>, in compliance with the SQL standard.</li>\n<li>Arbitrary expressions are supported in <code>LIMIT BY</code> clauses. Previously, it was only possible to use columns resulting from <code>SELECT</code>.</li>\n<li>An index of <code>MergeTree</code> tables is used when <code>IN</code> is applied to a tuple of expressions from the columns of the primary key. Example: <code>WHERE (UserID, EventDate) IN ((123, '2000-01-01'), ...)</code> (Anastasiya Tsarkova).</li>\n<li>Added the <code>clickhouse-copier</code> tool for copying between clusters and resharding data (beta).</li>\n<li>Added consistent hashing functions: <code>yandexConsistentHash</code>, <code>jumpConsistentHash</code>, <code>sumburConsistentHash</code>. They can be used as a sharding key in order to reduce the amount of network traffic during subsequent reshardings.</li>\n<li>Added functions: <code>arrayAny</code>, <code>arrayAll</code>, <code>hasAny</code>, <code>hasAll</code>, <code>arrayIntersect</code>, <code>arrayResize</code>.</li>\n<li>Added the <code>arrayCumSum</code> function (Javi Santana).</li>\n<li>Added the <code>parseDateTimeBestEffort</code>, <code>parseDateTimeBestEffortOrZero</code>, and <code>parseDateTimeBestEffortOrNull</code> functions to read the DateTime from a string containing text in a wide variety of possible formats.</li>\n<li>Data can be partially reloaded from external dictionaries during updating (load just the records in which the value of the specified field greater than in the previous download) (Arsen Hakobyan).</li>\n<li>Added the <code>cluster</code> table function. Example: <code>cluster(cluster_name, db, table)</code>. The <code>remote</code> table function can accept the cluster name as the first argument, if it is specified as an identifier.</li>\n<li>The <code>remote</code> and <code>cluster</code> table functions can be used in <code>INSERT</code> queries.</li>\n<li>Added the <code>create_table_query</code> and <code>engine_full</code> virtual columns to the <code>system.tables</code>table . The <code>metadata_modification_time</code> column is virtual.</li>\n<li>Added the <code>data_path</code> and <code>metadata_path</code> columns to <code>system.tables</code>and<code>system.databases</code> tables, and added the <code>path</code> column to the <code>system.parts</code> and <code>system.parts_columns</code> tables.</li>\n<li>Added additional information about merges in the <code>system.part_log</code> table.</li>\n<li>An arbitrary partitioning key can be used for the <code>system.query_log</code> table (Kirill Shvakov).</li>\n<li>The <code>SHOW TABLES</code> query now also shows temporary tables. Added temporary tables and the <code>is_temporary</code> column to <code>system.tables</code> (zhang2014).</li>\n<li>Added <code>DROP TEMPORARY TABLE</code> and <code>EXISTS TEMPORARY TABLE</code> queries (zhang2014).</li>\n<li>Support for <code>SHOW CREATE TABLE</code> for temporary tables (zhang2014).</li>\n<li>Added the <code>system_profile</code> configuration parameter for the settings used by internal processes.</li>\n<li>Support for loading <code>obje");
            
            document.write("ct_id</code> as an attribute in <code>MongoDB</code> dictionaries (Pavel Litvinenko).</li>\n<li>Reading <code>null</code> as the default value when loading data for an external dictionary with the <code>MongoDB</code> source (Pavel Litvinenko).</li>\n<li>Reading <code>DateTime</code> values in the <code>Values</code> format from a Unix timestamp without single quotes.</li>\n<li>Failover is supported in <code>remote</code> table functions for cases when some of the replicas are missing the requested table.</li>\n<li>Configuration settings can be overridden in the command line when you run <code>clickhouse-server</code>. Example: <code>clickhouse-server -- --logger.level=information</code>.</li>\n<li>Implemented the <code>empty</code> function from a <code>FixedString</code> argument: the function returns 1 if the string consists entirely of null bytes (zhang2014).</li>\n<li>Added the <code>listen_try</code>configuration parameter for listening to at least one of the listen addresses without quitting, if some of the addresses can't be listened to (useful for systems with disabled support for IPv4 or IPv6).</li>\n<li>Added the <code>VersionedCollapsingMergeTree</code> table engine.</li>\n<li>Support for rows and arbitrary numeric types for the <code>library</code> dictionary source.</li>\n<li><code>MergeTree</code> tables can be used without a primary key (you need to specify <code>ORDER BY tuple()</code>).</li>\n<li>A <code>Nullable</code> type can be <code>CAST</code> to a non-<code>Nullable</code> type if the argument is not <code>NULL</code>.</li>\n<li><code>RENAME TABLE</code> can be performed for <code>VIEW</code>.</li>\n<li>Added the <code>throwIf</code> function.</li>\n<li>Added the <code>odbc_default_field_size</code> option, which allows you to extend the maximum size of the value loaded from an ODBC source (by default, it is 1024).</li>\n<li>The <code>system.processes</code> table and <code>SHOW PROCESSLIST</code> now have the <code>is_cancelled</code> and <code>peak_memory_usage</code> columns.</li>\n</ul>\n<h4 id=\"improvements_22\">Improvements:<a class=\"headerlink\" href=\"#improvements_22\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Limits and quotas on the result are no longer applied to intermediate data for <code>INSERT SELECT</code> queries or for <code>SELECT</code> subqueries.</li>\n<li>Fewer false triggers of <code>force_restore_data</code> when checking the status of <code>Replicated</code> tables when the server starts.</li>\n<li>Added the <code>allow_distributed_ddl</code> option.</li>\n<li>Nondeterministic functions are not allowed in expressions for <code>MergeTree</code> table keys.</li>\n<li>Files with substitutions from <code>config.d</code> directories are loaded in alphabetical order.</li>\n<li>Improved performance of the <code>arrayElement</code> function in the case of a constant multidimensional array with an empty array as one of the elements. Example: <code>[[1], []][x]</code>.</li>\n<li>The server starts faster now when using configuration files with very large substitutions (for instance, very large lists of IP networks).</li>\n<li>When running a query, table valued functions run once. Previously, <code>remote</code> and <code>mysql</code>  table valued functions performed the same query twice to retrieve the table structure from a remote server.</li>\n<li>The <code>MkDocs</code> documentation generator is used.</li>\n<li>When you try to delete a table column that <code>DEFAULT</code>/<code>MATERIALIZED</code> expressions of other columns depend on, an exception is thrown (zhang2014).</li>\n<li>Added the ability to parse an empty line in text formats as the number 0 for <code>Float</code> data types. This feature was previously available but was lost in release 1.1.54342.</li>\n<li><code>Enum</code> values can be used in <code>min</code>, <code>max</code>, <code>sum</code> and some other functions. In these cases, it uses the corresponding numeric values. This feature was previously available but was lost in the release 1.1.54337.</li>\n<li>Added <code>max_expanded_ast_elements</code> to restrict the size of the AST after recursively expanding aliases.</li>\n</ul>\n<h4 id=\"bug-fixes_49\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_49\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed cases when unnecessary columns were removed from subqueries in error, or not removed from subqueries containing <code>UNION ALL</code>.</li>\n<li>Fixed a bug in merges for <code>ReplacingMergeTree</code> tables.</li>\n<li>Fixed synchronous insertions in <code>Distributed</code> tables (<code>insert_distributed_sync = 1</code>).</li>\n<li>Fixed segfault for certain uses of <code>FULL</code> and <code>RIGHT JOIN</code> with duplicate columns in subqueries.</li>\n<li>Fixed segfault for certain uses of <code>replace_running_query</code> and <code>KILL QUERY</code>.</li>\n<li>Fixed the order of the <code>source</code> and <code>last_exception</code> columns in the <code>system.dictionaries</code> table.</li>\n<li>Fixed a bug when the <code>DROP DATABASE</code> query did not delete the file with metadata.</li>\n<li>Fixed the <code>DROP DATABASE</code> query for <code>Dictionary</code> databases.</li>\n<li>Fixed the low precision of <code>uniqHLL12</code> and <code>uniqCombined</code> functions for cardinalities greater than 100 million items (Alex Bocharov).</li>\n<li>Fixed the calculation of implicit default values when necessary to simultaneously calculate default explicit expressions in <code>INSERT</code> queries (zhang2014).</li>\n<li>Fixed a rare case when a query to a <code>MergeTree</code> table couldn't finish (chenxing-xc).</li>\n<li>Fixed a crash that occurred when running a <code>CHECK</code> query for <code>Distributed</code> tables if all shards are local (chenxing.xc).</li>\n<li>Fixed a slight performance regression with functions that use regular expressions.</li>\n<li>Fixed a performance regression when creating multidimensional arrays from complex expressions.</li>\n<li>Fixed a bug that could cause an extra <code>FORMAT</code> section to appear in an <code>.sql</code> file with metadata.</li>\n<li>Fixed a bug that caused the <code>max_table_size_to_drop</code> limit to apply when trying to delete a <code>MATERIALIZED VIEW</code> looking at an explicitly specified table.</li>\n<li>Fixed incompatibility with old clients (old clients were sometimes sent data with the <code>DateTime('timezone')</code> type, which they do not understand).</li>\n<li>Fixed a bug when reading <code>Nested</code> column elements of structures that were added using <code>ALTER</code> but that are empty for the old partitions, when the conditions for these columns moved to <code>PREWHERE</code>.</li>\n<li>Fixed a bug when filtering tables by virtual <code>_table</code> columns in queries to <code>Merge</code> tables.</li>\n<li>Fixed a bug when using <code>ALIAS</code> columns in <code>Distributed</code> tables.</li>\n<li>Fixed a bug that made dynamic compilation impossible for queries with aggregate functions from the <code>quantile</code> family.</li>\n<li>Fixed a race condition in the query execution pipeline that occurred in very rare cases when using <code>Merge</code> tables with a large number of tables, and when using <code>GLOBAL</code> subqueries.</li>\n<li>Fixed a crash when passing arrays of different sizes to an <code>arrayReduce</code> function when using aggregate functions from multiple arguments.</li>\n<li>Prohibited the use of queries with <code>UNION ALL</code> in a <code>MATERIALIZED VIEW</code>.</li>\n<li>Fixed an error during initialization of the <code>part_log</code>  system table when the server starts (by default, <code>part_log</code> is disabled).</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_13\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_13\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed the <code>distributed_ddl_allow_replicated_alter</code> option. This behavior is enabled by default.</li>\n<li>Removed the <code>strict_insert_defaults</code> setting. If you were using this functionality, write to <code>clickhouse-feedback@yandex-team.com</code>.</li>\n<li>Removed the <code>UnsortedMergeTree</code> engine.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54343-2018-02-05\">Clickhouse Release 1.1.54343, 2018-02-05<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54343-2018-02-05\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>Added macros support for defining cluster names in distributed DDL queries and constructors of Distributed tables: <code>CREATE TABLE distr ON CLUSTER '{cluster}' (...) ENGINE = Distributed('{cluster}', 'db', 'table')</code>.</li>\n<li>Now queries like <code>SELECT ... FROM table WHERE expr IN (subquery)</code> are processed using the <code>table</code> index.</li>\n<li>Improved processing of duplicates when inserting to Replicated tables, so they no longer slow down execution of the replication queue.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54342-2018-01-22\">Clickhouse Release 1.1.54342, 2018-01-22<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54342-2018-01-22\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains bug fixes for the previous release 1.1.54337:</p>\n<ul>\n<li>Fixed a regression in 1.1.54337: if the default user has readonly access, then the server refuses to start up with the message  <code>Cannot create database in readonly mode</code>.</li>\n<li>Fixed a regression in 1.1.54337: on systems with systemd, logs are always written to syslog regardless of the configuration; the watchdog script still uses init.d.</li>\n<li>Fixed a regression in 1.1.54337: wrong default configuration in the Docker image.</li>\n<li>Fixed nondeterministic behavior of GraphiteMergeTree (you can see it in log messages <code>Data after merge is not byte-identical to the data on another replicas</code>).</li>\n<li>Fixed a bug that may lead to inconsistent merges after OPTIMIZE query to Replicated tables (you may see it in log messages <code>Part ... intersects the previous part</code>).</li>\n<li>Buffer tables now work correctly when MATERIALIZED columns are present in the destination table (by zhang2014).</li>\n<li>Fixed a bug in implementation of NULL.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-");
            
            document.write("54337-2018-01-18\">Clickhouse Release 1.1.54337, 2018-01-18<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54337-2018-01-18\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_25\">New features:<a class=\"headerlink\" href=\"#new-features_25\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added support for storage of multi-dimensional arrays and tuples (<code>Tuple</code> data type) in tables.</li>\n<li>Support for table functions for <code>DESCRIBE</code> and <code>INSERT</code> queries. Added support for subqueries in  <code>DESCRIBE</code>. Examples: <code>DESC TABLE remote('host', default.hits)</code>; <code>DESC TABLE (SELECT 1)</code>; <code>INSERT INTO TABLE FUNCTION remote('host', default.hits)</code>. Support for <code>INSERT INTO TABLE</code> in addition to <code>INSERT INTO</code>.</li>\n<li>Improved support for time zones. The <code>DateTime</code> data type can be annotated with the timezone that is used for parsing and formatting in text formats. Example: <code>DateTime('Europe/Moscow')</code>. When timezones are specified in functions for <code>DateTime</code> arguments, the return type will track the timezone, and the value will be displayed as expected.</li>\n<li>Added the functions <code>toTimeZone</code>, <code>timeDiff</code>, <code>toQuarter</code>, <code>toRelativeQuarterNum</code>. The <code>toRelativeHour</code>/<code>Minute</code>/<code>Second</code> functions can take a value of type <code>Date</code> as an argument. The <code>now</code> function name is case-sensitive.</li>\n<li>Added the <code>toStartOfFifteenMinutes</code> function (Kirill Shvakov).</li>\n<li>Added the <code>clickhouse format</code> tool for formatting queries.</li>\n<li>Added the <code>format_schema_path</code>  configuration parameter (Marek Vavru\u015fa). It is used for specifying a schema in <code>Cap'n Proto</code> format. Schema files can be located only in the specified directory.</li>\n<li>Added support for config substitutions (<code>incl</code> and <code>conf.d</code>) for configuration of external dictionaries and models (Pavel Yakunin).</li>\n<li>Added a column with documentation for the  <code>system.settings</code> table (Kirill Shvakov).</li>\n<li>Added the <code>system.parts_columns</code> table with information about column sizes in each data part of <code>MergeTree</code> tables.</li>\n<li>Added the <code>system.models</code> table with information about loaded <code>CatBoost</code> machine learning models.</li>\n<li>Added the <code>mysql</code> and <code>odbc</code> table function and corresponding <code>MySQL</code> and <code>ODBC</code> table engines for accessing remote databases. This functionality is in the beta stage.</li>\n<li>Added the possibility to pass an argument of type <code>AggregateFunction</code>  for the <code>groupArray</code>  aggregate function (so you can create an array of states of some aggregate function).</li>\n<li>Removed restrictions on various combinations of aggregate function combinators. For example, you can use <code>avgForEachIf</code>  as well as <code>avgIfForEach</code>  aggregate functions, which have different behaviors.</li>\n<li>The <code>-ForEach</code>  aggregate function combinator is extended for the case of aggregate functions of multiple arguments.</li>\n<li>Added support for aggregate functions of <code>Nullable</code>  arguments even for cases when the function returns a non-<code>Nullable</code>  result (added with the contribution of Silviu Caragea). Example: <code>groupArray</code>, <code>groupUniqArray</code>, <code>topK</code>.</li>\n<li>Added the <code>max_client_network_bandwidth</code> for <code>clickhouse-client</code> (Kirill Shvakov).</li>\n<li>Users with the <code>readonly = 2</code>  setting are allowed to work with TEMPORARY tables (CREATE, DROP, INSERT...) (Kirill Shvakov).</li>\n<li>Added support for using multiple consumers with the <code>Kafka</code>  engine.  Extended configuration options for <code>Kafka</code>  (Marek Vavru\u0161a).</li>\n<li>Added the <code>intExp3</code>  and <code>intExp4</code>  functions.</li>\n<li>Added the <code>sumKahan</code>  aggregate function.</li>\n<li>Added the to * Number<em> OrNull functions, where * Number</em>  is a numeric type.</li>\n<li>Added support for <code>WITH</code> clauses for an <code>INSERT SELECT</code> query (author: zhang2014).</li>\n<li>Added settings: <code>http_connection_timeout</code>, <code>http_send_timeout</code>, <code>http_receive_timeout</code>. In particular, these settings are used for downloading data parts for replication. Changing these settings allows for faster failover if the network is overloaded.</li>\n<li>Added support for <code>ALTER</code> for tables of type <code>Null</code> (Anastasiya Tsarkova).</li>\n<li>The <code>reinterpretAsString</code>  function is extended for all data types that are stored contiguously in memory.</li>\n<li>Added the <code>--silent</code>  option for the <code>clickhouse-local</code>  tool. It suppresses printing query execution info in stderr.</li>\n<li>Added support for reading values of type <code>Date</code>  from text in a format where the month and/or day of the month is specified using a single digit instead of two digits (Amos Bird).</li>\n</ul>\n<h4 id=\"performance-optimizations\">Performance optimizations:<a class=\"headerlink\" href=\"#performance-optimizations\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improved performance of aggregate functions <code>min</code>, <code>max</code>, <code>any</code>, <code>anyLast</code>, <code>anyHeavy</code>, <code>argMin</code>, <code>argMax</code> from string arguments.</li>\n<li>Improved performance of the functions <code>isInfinite</code>, <code>isFinite</code>, <code>isNaN</code>, <code>roundToExp2</code>.</li>\n<li>Improved performance of parsing and formatting <code>Date</code> and <code>DateTime</code> type values  in text format.</li>\n<li>Improved performance and precision of parsing floating point numbers.</li>\n<li>Lowered memory usage for <code>JOIN</code>  in the case when the left and right parts have columns with identical names that are not contained in <code>USING</code> .</li>\n<li>Improved performance of aggregate functions <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code> by reducing computational stability. The old functions are available under the names <code>varSampStable</code>, <code>varPopStable</code>, <code>stddevSampStable</code>, <code>stddevPopStable</code>, <code>covarSampStable</code>, <code>covarPopStable</code>, <code>corrStable</code>.</li>\n</ul>\n<h4 id=\"bug-fixes_50\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_50\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed data deduplication after running a <code>DROP</code> or <code>DETACH PARTITION</code> query. In the previous version, dropping a partition and inserting the same data again was not working because inserted blocks were considered duplicates.</li>\n<li>Fixed a bug that could lead to incorrect interpretation of the <code>WHERE</code>  clause for <code>CREATE MATERIALIZED VIEW</code>  queries with <code>POPULATE</code> .</li>\n<li>Fixed a bug in using the <code>root_path</code> parameter in the <code>zookeeper_servers</code> configuration.</li>\n<li>Fixed unexpected results of passing the <code>Date</code>  argument to <code>toStartOfDay</code> .</li>\n<li>Fixed the <code>addMonths</code> and <code>subtractMonths</code>  functions and the arithmetic for <code>INTERVAL n MONTH</code>  in cases when the result has the previous year.</li>\n<li>Added missing support for the <code>UUID</code>  data type for <code>DISTINCT</code> , <code>JOIN</code> , and <code>uniq</code>  aggregate functions and external dictionaries (Evgeniy Ivanov). Support for <code>UUID</code>  is still incomplete.</li>\n<li>Fixed <code>SummingMergeTree</code>  behavior in cases when the rows summed to zero.</li>\n<li>Various fixes for the <code>Kafka</code>  engine (Marek Vavru\u0161a).</li>\n<li>Fixed incorrect behavior of the <code>Join</code>  table engine (Amos Bird).</li>\n<li>Fixed incorrect allocator behavior under FreeBSD and OS X.</li>\n<li>The <code>extractAll</code>  function now supports empty matches.</li>\n<li>Fixed an error that blocked usage of <code>libressl</code>  instead of <code>openssl</code> .</li>\n<li>Fixed the <code>CREATE TABLE AS SELECT</code>  query from temporary tables.</li>\n<li>Fixed non-atomicity of updating the replication queue. This could lead to replicas being out of sync until the server restarts.</li>\n<li>Fixed possible overflow in <code>gcd</code> , <code>lcm</code>  and <code>modulo</code>  (<code>%</code> operator) (Maks Skorokhod).</li>\n<li><code>-preprocessed</code>  files are now created after changing <code>umask</code>  (<code>umask</code>  can be changed in the config).</li>\n<li>Fixed a bug in the background check of parts (<code>MergeTreePartChecker</code> ) when using a custom partition key.</li>\n<li>Fixed parsing of tuples (values of the <code>Tuple</code>  data type) in text formats.</li>\n<li>Improved error messages about incompatible types passed to <code>multiIf</code> , <code>array</code>  and some other functions.</li>\n<li>Redesigned support for <code>Nullable</code> types. Fixed bugs that may lead to a server crash. Fixed almost all other bugs related to <code>NULL</code>  support: incorrect type conversions in INSERT SELECT, insufficient support for Nullable in HAVING and PREWHERE, <code>join_use_nulls</code>  mode, Nullable types as arguments of <code>OR</code>  operator, etc.</li>\n<li>Fixed various bugs related to internal semantics of data types. Examples: unnecessary summing of <code>Enum</code>  type fields in <code>SummingMergeTree</code> ; alignment of <code>Enum</code>  types in <code>Pretty</code>  formats, etc.</li>\n<li>Stricter checks for allowed combinations of composite columns.</li>\n<li>Fixed the overflow when specifying a very large parameter for the <code>FixedString</code>  data type.</li>\n<li>Fixed a bug in the <code>topK</code>  aggregate function in a generic case.</li>\n<li>Added the missing check for equality of array sizes in arguments of n-ary variants of aggregate functions with an <code>-Array</code>  combinator");
            
            document.write(".</li>\n<li>Fixed a bug in <code>--pager</code> for <code>clickhouse-client</code> (author: ks1322).</li>\n<li>Fixed the precision of the <code>exp10</code>  function.</li>\n<li>Fixed the behavior of the <code>visitParamExtract</code>  function for better compliance with documentation.</li>\n<li>Fixed the crash when incorrect data types are specified.</li>\n<li>Fixed the behavior of <code>DISTINCT</code>  in the case when all columns are constants.</li>\n<li>Fixed query formatting in the case of using the <code>tupleElement</code>  function with a complex constant expression as the tuple element index.</li>\n<li>Fixed a bug in <code>Dictionary</code> tables for <code>range_hashed</code> dictionaries.</li>\n<li>Fixed a bug that leads to excessive rows in the result of <code>FULL</code>  and <code>RIGHT JOIN</code>  (Amos Bird).</li>\n<li>Fixed a server crash when creating and removing temporary files in <code>config.d</code>  directories during config reload.</li>\n<li>Fixed the <code>SYSTEM DROP DNS CACHE</code>  query: the cache was flushed but addresses of cluster nodes were not updated.</li>\n<li>Fixed the behavior of <code>MATERIALIZED VIEW</code>  after executing <code>DETACH TABLE</code>  for the table under the view (Marek Vavru\u0161a).</li>\n</ul>\n<h4 id=\"build-improvements_4\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_4\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The <code>pbuilder</code> tool is used for builds. The build process is almost completely independent of the build host environment.</li>\n<li>A single build is used for different OS versions. Packages and binaries have been made compatible with a wide range of Linux systems.</li>\n<li>Added the <code>clickhouse-test</code>  package. It can be used to run functional tests.</li>\n<li>The source tarball can now be published to the repository. It can be used to reproduce the build without using GitHub.</li>\n<li>Added limited integration with Travis CI. Due to limits on build time in Travis, only the debug build is tested and a limited subset of tests are run.</li>\n<li>Added support for <code>Cap'n'Proto</code>  in the default build.</li>\n<li>Changed the format of documentation sources from <code>Restricted Text</code> to <code>Markdown</code>.</li>\n<li>Added support for <code>systemd</code> (Vladimir Smirnov). It is disabled by default due to incompatibility with some OS images and can be enabled manually.</li>\n<li>For dynamic code generation, <code>clang</code>  and <code>lld</code>  are embedded into the <code>clickhouse</code>  binary. They can also be invoked as <code>clickhouse clang</code>  and <code>clickhouse lld</code> .</li>\n<li>Removed usage of GNU extensions from the code. Enabled the <code>-Wextra</code>  option. When building with <code>clang</code> the default is <code>libc++</code> instead of <code>libstdc++</code>.</li>\n<li>Extracted <code>clickhouse_parsers</code>  and <code>clickhouse_common_io</code>  libraries to speed up builds of various tools.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_14\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_14\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>The format for marks in <code>Log</code>  type tables that contain <code>Nullable</code>  columns was changed in a backward incompatible way. If you have these tables, you should convert them to the <code>TinyLog</code>  type before starting up the new server version. To do this, replace <code>ENGINE = Log</code> with <code>ENGINE = TinyLog</code> in the corresponding <code>.sql</code> file in the <code>metadata</code> directory. If your table doesn't have <code>Nullable</code> columns or if the type of your table is not <code>Log</code>, then you don't need to do anything.</li>\n<li>Removed the <code>experimental_allow_extended_storage_definition_syntax</code> setting. Now this feature is enabled by default.</li>\n<li>The <code>runningIncome</code> function was renamed to <code>runningDifferenceStartingWithFirstvalue</code> to avoid confusion.</li>\n<li>Removed the <code>FROM ARRAY JOIN arr</code>  syntax when ARRAY JOIN is specified directly after FROM with no table (Amos Bird).</li>\n<li>Removed the <code>BlockTabSeparated</code>  format that was used solely for demonstration purposes.</li>\n<li>Changed the state format for aggregate functions <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code>. If you have stored states of these aggregate functions in tables (using the <code>AggregateFunction</code>  data type or materialized views with corresponding states), please write to <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;\">&#99;&#108;&#105;&#99;&#107;&#104;&#111;&#117;&#115;&#101;&#45;&#102;&#101;&#101;&#100;&#98;&#97;&#99;&#107;&#64;&#121;&#97;&#110;&#100;&#101;&#120;&#45;&#116;&#101;&#97;&#109;&#46;&#99;&#111;&#109;</a>.</li>\n<li>In previous server versions there was an undocumented feature: if an aggregate function depends on parameters, you can still specify it without parameters in the AggregateFunction data type. Example: <code>AggregateFunction(quantiles, UInt64)</code> instead of <code>AggregateFunction(quantiles(0.5, 0.9), UInt64)</code>. This feature was lost. Although it was undocumented, we plan to support it again in future releases.</li>\n<li>Enum data types cannot be used in min/max aggregate functions. This ability will be returned in the next release.</li>\n</ul>\n<h4 id=\"please-note-when-upgrading\">Please note when upgrading:<a class=\"headerlink\" href=\"#please-note-when-upgrading\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>When doing a rolling update on a cluster, at the point when some of the replicas are running the old version of ClickHouse and some are running the new version, replication is temporarily stopped and the message <code>unknown parameter 'shard'</code>  appears in the log. Replication will continue after all replicas of the cluster are updated.</li>\n<li>If different versions of ClickHouse are running on the cluster servers, it is possible that distributed queries using the following functions will have incorrect results: <code>varSamp</code>, <code>varPop</code>, <code>stddevSamp</code>, <code>stddevPop</code>, <code>covarSamp</code>, <code>covarPop</code>, <code>corr</code>. You should update all cluster nodes.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54327-2017-12-21\">ClickHouse release 1.1.54327, 2017-12-21<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54327-2017-12-21\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains bug fixes for the previous release 1.1.54318:</p>\n<ul>\n<li>Fixed bug with possible race condition in replication that could lead to data loss. This issue affects versions 1.1.54310 and 1.1.54318. If you use one of these versions with Replicated tables, the update is strongly recommended. This issue shows in logs in Warning messages like <code>Part ... from own log doesn't exist.</code>  The issue is relevant even if you don't see these messages in logs.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54318-2017-11-30\">ClickHouse release 1.1.54318, 2017-11-30<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54318-2017-11-30\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains bug fixes for the previous release 1.1.54310:</p>\n<ul>\n<li>Fixed incorrect row deletions during merges in the SummingMergeTree engine</li>\n<li>Fixed a memory leak in unreplicated MergeTree engines</li>\n<li>Fixed performance degradation with frequent inserts in MergeTree engines</li>\n<li>Fixed an issue that was causing the replication queue to stop running</li>\n<li>Fixed rotation and archiving of server logs</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54310-2017-11-01\">ClickHouse release 1.1.54310, 2017-11-01<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54310-2017-11-01\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_26\">New features:<a class=\"headerlink\" href=\"#new-features_26\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Custom partitioning key for the MergeTree family of table engines.</li>\n<li><a href=\"https://clickhouse.yandex/docs/en/operations/table_engines/kafka/\" rel=\"external nofollow noreferrer\">Kafka</a>  table engine.</li>\n<li>Added support for loading <a href=\"https://catboost.yandex/\" rel=\"external nofollow noreferrer\">CatBoost</a>  models and applying them to data stored in ClickHouse.</li>\n<li>Added support for time zones with non-integer offsets from UTC.</li>\n<li>Added support for arithmetic operations with time intervals.</li>\n<li>The range of values for the Date and DateTime types is extended to the year 2105.</li>\n<li>Added the <code>CREATE MATERIALIZED VIEW x TO y</code>  query (specifies an existing table for storing the data of a materialized view).</li>\n<li>Added the <code>ATTACH TABLE</code> query without arguments.</li>\n<li>The processing logic for Nested columns with names ending in -Map in a SummingMergeTree table was extracted to the sumMap aggregate function. You can now specify such columns explicitly.</li>\n<li>Max size of the IP trie dictionary is increased to 128M entries.</li>\n<li>Added the getSizeOfEnumType function.</li>\n<li>Added the sumWithOverflow aggregate function.</li>\n<li>Added support for the Cap'n Proto input format.</li>\n<li>You can now customize compression level when using the zstd algorithm.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_15\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_15\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Creation of temporary tables with an engine other than Memory is not allowed.</li>\n<li>Explicit creation of tables with the View or MaterializedView engine is not allowed.</li>\n<li>During table creation, a new check verifies that the sampling key expression is included in the primary key.</li>\n</ul>\n<h4 id=\"bug-fixes_51\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_51\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>");
            
            document.write("Fixed hangups when synchronously inserting into a Distributed table.</li>\n<li>Fixed nonatomic adding and removing of parts in Replicated tables.</li>\n<li>Data inserted into a materialized view is not subjected to unnecessary deduplication.</li>\n<li>Executing a query to a Distributed table for which the local replica is lagging and remote replicas are unavailable does not result in an error anymore.</li>\n<li>Users don't need access permissions to the <code>default</code>  database to create temporary tables anymore.</li>\n<li>Fixed crashing when specifying the Array type without arguments.</li>\n<li>Fixed hangups when the disk volume containing server logs is full.</li>\n<li>Fixed an overflow in the toRelativeWeekNum function for the first week of the Unix epoch.</li>\n</ul>\n<h4 id=\"build-improvements_5\">Build improvements:<a class=\"headerlink\" href=\"#build-improvements_5\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Several third-party libraries (notably Poco) were updated and converted to git submodules.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54304-2017-10-19\">ClickHouse release 1.1.54304, 2017-10-19<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54304-2017-10-19\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_27\">New features:<a class=\"headerlink\" href=\"#new-features_27\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>TLS support in the native protocol (to enable, set <code>tcp_ssl_port</code>  in <code>config.xml</code> ).</li>\n</ul>\n<h4 id=\"bug-fixes_52\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_52\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>ALTER</code> for replicated tables now tries to start running as soon as possible.</li>\n<li>Fixed crashing when reading data with the setting <code>preferred_block_size_bytes=0.</code></li>\n<li>Fixed crashes of <code>clickhouse-client</code> when pressing <code>Page Down</code></li>\n<li>Correct interpretation of certain complex queries with <code>GLOBAL IN</code> and <code>UNION ALL</code></li>\n<li><code>FREEZE PARTITION</code> always works atomically now.</li>\n<li>Empty POST requests now return a response with code 411.</li>\n<li>Fixed interpretation errors for expressions like <code>CAST(1 AS Nullable(UInt8)).</code></li>\n<li>Fixed an error when reading <code>Array(Nullable(String))</code> columns from <code>MergeTree</code> tables.</li>\n<li>Fixed crashing when parsing queries like <code>SELECT dummy AS dummy, dummy AS b</code></li>\n<li>Users are updated correctly with invalid <code>users.xml</code></li>\n<li>Correct handling when an executable dictionary returns a non-zero response code.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54292-2017-09-20\">ClickHouse release 1.1.54292, 2017-09-20<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54292-2017-09-20\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_28\">New features:<a class=\"headerlink\" href=\"#new-features_28\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the  <code>pointInPolygon</code> function for working with coordinates on a coordinate plane.</li>\n<li>Added the <code>sumMap</code> aggregate function for calculating the sum of arrays, similar to  <code>SummingMergeTree</code>.</li>\n<li>Added the <code>trunc</code> function. Improved performance of the rounding functions (<code>round</code>, <code>floor</code>, <code>ceil</code>, <code>roundToExp2</code>) and corrected the logic of how they work. Changed the logic of the <code>roundToExp2</code>  function for fractions and negative numbers.</li>\n<li>The ClickHouse executable file is now less dependent on the libc version. The same ClickHouse executable file can run on a wide variety of Linux systems. There is still a dependency when using compiled queries (with the setting <code>compile = 1</code> , which is not used by default).</li>\n<li>Reduced the time needed for dynamic compilation of queries.</li>\n</ul>\n<h4 id=\"bug-fixes_53\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_53\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed an error that sometimes produced <code>part ... intersects previous part</code>  messages and weakened replica consistency.</li>\n<li>Fixed an error that caused the server to lock up if ZooKeeper was unavailable during shutdown.</li>\n<li>Removed excessive logging when restoring replicas.</li>\n<li>Fixed an error in the UNION ALL implementation.</li>\n<li>Fixed an error in the concat function that occurred if the first column in a block has the Array type.</li>\n<li>Progress is now displayed correctly in the system.merges table.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54289-2017-09-13\">ClickHouse release 1.1.54289, 2017-09-13<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54289-2017-09-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_29\">New features:<a class=\"headerlink\" href=\"#new-features_29\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li><code>SYSTEM</code> queries for server administration: <code>SYSTEM RELOAD DICTIONARY</code>, <code>SYSTEM RELOAD DICTIONARIES</code>, <code>SYSTEM DROP DNS CACHE</code>, <code>SYSTEM SHUTDOWN</code>, <code>SYSTEM KILL</code>.</li>\n<li>Added functions for working with arrays: <code>concat</code>, <code>arraySlice</code>, <code>arrayPushBack</code>, <code>arrayPushFront</code>, <code>arrayPopBack</code>, <code>arrayPopFront</code>.</li>\n<li>Added <code>root</code> and <code>identity</code> parameters for the ZooKeeper configuration. This allows you to isolate individual users on the same ZooKeeper cluster.</li>\n<li>Added aggregate functions <code>groupBitAnd</code>, <code>groupBitOr</code>, and <code>groupBitXor</code> (for compatibility, they are also available under the names <code>BIT_AND</code>, <code>BIT_OR</code>, and <code>BIT_XOR</code>).</li>\n<li>External dictionaries can be loaded from MySQL by specifying a socket in the filesystem.</li>\n<li>External dictionaries can be loaded from MySQL over SSL (<code>ssl_cert</code>, <code>ssl_key</code>, <code>ssl_ca</code>  parameters).</li>\n<li>Added the <code>max_network_bandwidth_for_user</code> setting to restrict the overall bandwidth use for queries per user.</li>\n<li>Support for <code>DROP TABLE</code> for temporary tables.</li>\n<li>Support for reading <code>DateTime</code>  values in Unix timestamp format from the <code>CSV</code>  and <code>JSONEachRow</code>  formats.</li>\n<li>Lagging replicas in distributed queries are now excluded by default (the default threshold is 5 minutes).</li>\n<li>FIFO locking is used during ALTER: an ALTER query isn't blocked indefinitely for continuously running queries.</li>\n<li>Option to set <code>umask</code>  in the config file.</li>\n<li>Improved performance for queries with <code>DISTINCT</code> .</li>\n</ul>\n<h4 id=\"bug-fixes_54\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_54\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Improved the process for deleting old nodes in ZooKeeper. Previously, old nodes sometimes didn't get deleted if there were very frequent inserts, which caused the server to be slow to shut down, among other things.</li>\n<li>Fixed randomization when choosing hosts for the connection to ZooKeeper.</li>\n<li>Fixed the exclusion of lagging replicas in distributed queries if the replica is localhost.</li>\n<li>Fixed an error where a data part in a <code>ReplicatedMergeTree</code>  table could be broken after running <code>ALTER MODIFY</code>  on an element in a <code>Nested</code>  structure.</li>\n<li>Fixed an error that could cause SELECT queries to \"hang\".</li>\n<li>Improvements to distributed DDL queries.</li>\n<li>Fixed the query <code>CREATE TABLE ... AS &lt;materialized view&gt;</code>.</li>\n<li>Resolved the deadlock in the <code>ALTER ... CLEAR COLUMN IN PARTITION</code>  query for <code>Buffer</code>  tables.</li>\n<li>Fixed the invalid default value for <code>Enum</code> s (0 instead of the minimum) when using the <code>JSONEachRow</code>  and <code>TSKV</code>  formats.</li>\n<li>Resolved the appearance of zombie processes when using a dictionary with an <code>executable</code>  source.</li>\n<li>Fixed segfault for the HEAD query.</li>\n</ul>\n<h4 id=\"improved-workflow-for-developing-and-assembling-clickhouse\">Improved workflow for developing and assembling ClickHouse:<a class=\"headerlink\" href=\"#improved-workflow-for-developing-and-assembling-clickhouse\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>You can use <code>pbuilder</code>  to build ClickHouse.</li>\n<li>You can use <code>libc++</code>  instead of <code>libstdc++</code> for builds on Linux.</li>\n<li>Added instructions for using static code analysis tools: <code>Coverage</code>, <code>clang-tidy</code>, <code>cppcheck</code>.</li>\n</ul>\n<h4 id=\"please-note-when-upgrading_1\">Please note when upgrading:<a class=\"headerlink\" href=\"#please-note-when-upgrading_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>There is now a higher default value for the MergeTree setting <code>max_bytes_to_merge_at_max_space_in_pool</code>  (the maximum total size of data parts to merge, in bytes): it has increased from 100 GiB to 150 GiB. This might result in large merges running after the server upgrade, which could cause an increased load on the disk subsystem. If the free space available on the server is less than twice the total amount of the merges that are running, this will cause all other merges to stop running, including merges of small data parts. As a result, INSERT queries will fail with the message \"Merges are processing significantly slower than inserts.\" Use the <code>SELECT * FROM system.merges</code>  query to monitor the situation. You can also check the <code>DiskSpaceReservedForMerge</code>  metric in the <code>system.metrics</code>  table, or in Graphite. You don't need to do anything to fix this, since the issue will resolve itself once the large merges finish. If you find this unacceptable, you can restore the previous value for the <code>max_bytes_to_merge_at_max_space_in_pool</code>  setting. To do this, go to the <merge_tree> section in config.xml, set <code>&lt;merge_tree&gt;``&lt;max_bytes_to_merge_at_max_space_in_pool&gt;107374182400&lt;/max_bytes_to_merge_at_max_space_in_pool&gt;</code> and restart the server.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54284-2017-08-29\">ClickHo");
            
            document.write("use release 1.1.54284, 2017-08-29<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54284-2017-08-29\" title=\"Permanent link\">&para;</a></h3>\n<ul>\n<li>This is a bugfix release for the previous 1.1.54282 release. It fixes leaks in the parts directory in ZooKeeper.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54282-2017-08-23\">ClickHouse release 1.1.54282, 2017-08-23<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54282-2017-08-23\" title=\"Permanent link\">&para;</a></h3>\n<p>This release contains bug fixes for the previous release 1.1.54276:</p>\n<ul>\n<li>Fixed <code>DB::Exception: Assertion violation: !_path.empty()</code> when inserting into a Distributed table.</li>\n<li>Fixed parsing when inserting in RowBinary format if input data starts with';'.</li>\n<li>Errors during runtime compilation of certain aggregate functions (e.g. <code>groupArray()</code>).</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54276-2017-08-16\">Clickhouse Release 1.1.54276, 2017-08-16<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54276-2017-08-16\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_30\">New features:<a class=\"headerlink\" href=\"#new-features_30\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added an optional WITH section for a SELECT query. Example query: <code>WITH 1+1 AS a SELECT a, a*a</code></li>\n<li>INSERT can be performed synchronously in a Distributed table: OK is returned only after all the data is saved on all the shards. This is activated by the setting insert_distributed_sync=1.</li>\n<li>Added the UUID data type for working with 16-byte identifiers.</li>\n<li>Added aliases of CHAR, FLOAT and other types for compatibility with the Tableau.</li>\n<li>Added the functions toYYYYMM, toYYYYMMDD, and toYYYYMMDDhhmmss for converting time into numbers.</li>\n<li>You can use IP addresses (together with the hostname) to identify servers for clustered DDL queries.</li>\n<li>Added support for non-constant arguments and negative offsets in the function <code>substring(str, pos, len).</code></li>\n<li>Added the max_size parameter for the <code>groupArray(max_size)(column)</code> aggregate function, and optimized its performance.</li>\n</ul>\n<h4 id=\"main-changes\">Main changes:<a class=\"headerlink\" href=\"#main-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Security improvements: all server files are created with 0640 permissions (can be changed via <umask> config parameter).</li>\n<li>Improved error messages for queries with invalid syntax.</li>\n<li>Significantly reduced memory consumption and improved performance when merging large sections of MergeTree data.</li>\n<li>Significantly increased the performance of data merges for the ReplacingMergeTree engine.</li>\n<li>Improved performance for asynchronous inserts from a Distributed table by combining multiple source inserts. To enable this functionality, use the setting distributed_directory_monitor_batch_inserts=1.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_16\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_16\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Changed the binary format of aggregate states of <code>groupArray(array_column)</code> functions for arrays.</li>\n</ul>\n<h4 id=\"complete-list-of-changes\">Complete list of changes:<a class=\"headerlink\" href=\"#complete-list-of-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Added the <code>output_format_json_quote_denormals</code> setting, which enables outputting nan and inf values in JSON format.</li>\n<li>Optimized stream allocation when reading from a Distributed table.</li>\n<li>Settings can be configured in readonly mode if the value doesn't change.</li>\n<li>Added the ability to retrieve non-integer granules of the MergeTree engine in order to meet restrictions on the block size specified in the preferred_block_size_bytes setting. The purpose is to reduce the consumption of RAM and increase cache locality when processing queries from tables with large columns.</li>\n<li>Efficient use of indexes that contain expressions like <code>toStartOfHour(x)</code> for conditions like <code>toStartOfHour(x) op \u0441onstexpr.</code></li>\n<li>Added new settings for MergeTree engines (the merge_tree section in config.xml):</li>\n<li>replicated_deduplication_window_seconds sets the number of seconds allowed for deduplicating inserts in Replicated tables.</li>\n<li>cleanup_delay_period sets how often to start cleanup to remove outdated data.</li>\n<li>replicated_can_become_leader can prevent a replica from becoming the leader (and assigning merges).</li>\n<li>Accelerated cleanup to remove outdated data from ZooKeeper.</li>\n<li>Multiple improvements and fixes for clustered DDL queries. Of particular interest is the new setting distributed_ddl_task_timeout, which limits the time to wait for a response from the servers in the cluster. If a ddl request has not been performed on all hosts, a response will contain a timeout error and a request will be executed in an async mode.</li>\n<li>Improved display of stack traces in the server logs.</li>\n<li>Added the \"none\" value for the compression method.</li>\n<li>You can use multiple dictionaries_config sections in config.xml.</li>\n<li>It is possible to connect to MySQL through a socket in the file system.</li>\n<li>The system.parts table has a new column with information about the size of marks, in bytes.</li>\n</ul>\n<h4 id=\"bug-fixes_55\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_55\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Distributed tables using a Merge table now work correctly for a SELECT query with a condition on the  <code>_table</code> field.</li>\n<li>Fixed a rare race condition in ReplicatedMergeTree when checking data parts.</li>\n<li>Fixed possible freezing on \"leader election\" when starting a server.</li>\n<li>The max_replica_delay_for_distributed_queries setting was ignored when using a local replica of the data source. This has been fixed.</li>\n<li>Fixed incorrect behavior of <code>ALTER TABLE CLEAR COLUMN IN PARTITION</code> when attempting to clean a non-existing column.</li>\n<li>Fixed an exception in the multiIf function when using empty arrays or strings.</li>\n<li>Fixed excessive memory allocations when deserializing Native format.</li>\n<li>Fixed incorrect auto-update of Trie dictionaries.</li>\n<li>Fixed an exception when running queries with a GROUP BY clause from a Merge table when using SAMPLE.</li>\n<li>Fixed a crash of GROUP BY when  using distributed_aggregation_memory_efficient=1.</li>\n<li>Now you can specify the database.table in the right side of IN and JOIN.</li>\n<li>Too many threads were used for parallel aggregation. This has been fixed.</li>\n<li>Fixed how the \"if\" function works with FixedString arguments.</li>\n<li>SELECT worked incorrectly from a Distributed table for shards with a weight of 0. This has been fixed.</li>\n<li>Running <code>CREATE VIEW IF EXISTS no longer causes crashes.</code></li>\n<li>Fixed incorrect behavior when input_format_skip_unknown_fields=1 is set and there are negative numbers.</li>\n<li>Fixed an infinite loop in the <code>dictGetHierarchy()</code> function if there is some invalid data in the dictionary.</li>\n<li>Fixed <code>Syntax error: unexpected (...)</code> errors  when running distributed queries with subqueries in an IN or JOIN clause and Merge tables.</li>\n<li>Fixed an incorrect interpretation of a SELECT query from Dictionary tables.</li>\n<li>Fixed the \"Cannot mremap\" error when using arrays in IN and JOIN clauses with more than 2 billion elements.</li>\n<li>Fixed the failover for dictionaries with MySQL as the source.</li>\n</ul>\n<h4 id=\"improved-workflow-for-developing-and-assembling-clickhouse_1\">Improved workflow for developing and assembling ClickHouse:<a class=\"headerlink\" href=\"#improved-workflow-for-developing-and-assembling-clickhouse_1\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Builds can be assembled in Arcadia.</li>\n<li>You can use gcc 7 to compile ClickHouse.</li>\n<li>Parallel builds using ccache+distcc are faster now.</li>\n</ul>\n<h3 id=\"clickhouse-release-1-1-54245-2017-07-04\">ClickHouse release 1.1.54245, 2017-07-04<a class=\"headerlink\" href=\"#clickhouse-release-1-1-54245-2017-07-04\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"new-features_31\">New features:<a class=\"headerlink\" href=\"#new-features_31\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Distributed DDL (for example, <code>CREATE TABLE ON CLUSTER</code>)</li>\n<li>The replicated query <code>ALTER TABLE CLEAR COLUMN IN PARTITION.</code></li>\n<li>The engine for Dictionary tables (access to dictionary data in the form of a table).</li>\n<li>Dictionary database engine (this type of database automatically has Dictionary tables available for all the connected external dictionaries).</li>\n<li>You can check for updates to the dictionary by sending a request to the source.</li>\n<li>Qualified column names</li>\n<li>Quoting identifiers using double quotation marks.</li>\n<li>Sessions in the HTTP interface.</li>\n<li>The OPTIMIZE query for a Replicated table can can run not only on the leader.</li>\n</ul>\n<h4 id=\"backward-incompatible-changes_17\">Backward incompatible changes:<a class=\"headerlink\" href=\"#backward-incompatible-changes_17\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Removed SET GLOBAL.</li>\n</ul>\n<h4 id=\"minor-changes\">Minor changes:<a class=\"headerlink\" href=\"#minor-changes\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Now after an alert is triggered, the log prints the full stack trace.</li>\n<li>Relaxed the verification of the number of damaged/extra data parts at startup (there were too many false positives).</li>\n</ul>\n<h4 id=\"bug-fixes_56\">Bug fixes:<a class=\"headerlink\" href=\"#bug-fixes_56\" title=\"Permanent link\">&para;</a></h4>\n<ul>\n<li>Fixed a bad connection \"sticking\" when inserting into a Distributed table.</li>\n<li>GLOBAL IN now works for a query from a Merge table that looks at a Distributed table.</li>\n<li>The incorrect number of cores was detected on a Google Compute Engine virtual machine. This has been fixed.</li>\n<li>Changes in how an executable source of cached external dictionaries works.</li>\n<li>Fixed the comparison of strings containing null characters.</li>\n<li>Fixed the comparison of Float32 pri");
            
            document.write("mary key fields with constants.</li>\n<li>Previously, an incorrect estimate of the size of a field could lead to overly large allocations.</li>\n<li>Fixed a crash when querying a Nullable column added to a table using ALTER.</li>\n<li>Fixed a crash when sorting by a Nullable column, if the number of rows is less than LIMIT.</li>\n<li>Fixed an ORDER BY subquery consisting of only constant values.</li>\n<li>Previously, a Replicated table could remain in the invalid state after a failed DROP TABLE.</li>\n<li>Aliases for scalar subqueries with empty results are no longer lost.</li>\n<li>Now a query that used compilation does not fail with an error if the .so file gets damaged.<br />\n<a name=\"../../security_changelog/\"></a><a name=\"security_changelog/\"></a><a name=\"../security_changelog/\"></a><a name=\"../../../../../security_changelog/\"></a><a name=\"../../../../security_changelog/\"></a><a name=\"../../../security_changelog/\"></a></li>\n</ul>\n<h3 id=\"fixed-in-clickhouse-release-18-12-13-2018-09-10\">Fixed in ClickHouse Release 18.12.13, 2018-09-10<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-18-12-13-2018-09-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14672\">CVE-2018-14672<a class=\"headerlink\" href=\"#cve-2018-14672\" title=\"Permanent link\">&para;</a></h4>\n<p>Functions for loading CatBoost models allowed path traversal and reading arbitrary files through error messages.</p>\n<p>Credits: Andrey Krasichkov of Yandex Information Security Team</p>\n<h3 id=\"fixed-in-clickhouse-release-18-10-3-2018-08-13\">Fixed in ClickHouse Release 18.10.3, 2018-08-13<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-18-10-3-2018-08-13\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14671\">CVE-2018-14671<a class=\"headerlink\" href=\"#cve-2018-14671\" title=\"Permanent link\">&para;</a></h4>\n<p>unixODBC allowed loading arbitrary shared objects from the file system which led to a Remote Code Execution vulnerability.</p>\n<p>Credits: Andrey Krasichkov and Evgeny Sidorov of Yandex Information Security Team</p>\n<h3 id=\"fixed-in-clickhouse-release-1-1-54388-2018-06-28\">Fixed in ClickHouse Release 1.1.54388, 2018-06-28<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-1-1-54388-2018-06-28\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14668\">CVE-2018-14668<a class=\"headerlink\" href=\"#cve-2018-14668\" title=\"Permanent link\">&para;</a></h4>\n<p>\"remote\" table function allowed arbitrary symbols in \"user\", \"password\" and \"default_database\" fields which led to Cross Protocol Request Forgery Attacks.</p>\n<p>Credits: Andrey Krasichkov of Yandex Information Security Team</p>\n<h3 id=\"fixed-in-clickhouse-release-1-1-54390-2018-07-06\">Fixed in ClickHouse Release 1.1.54390, 2018-07-06<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-1-1-54390-2018-07-06\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14669\">CVE-2018-14669<a class=\"headerlink\" href=\"#cve-2018-14669\" title=\"Permanent link\">&para;</a></h4>\n<p>ClickHouse MySQL client had \"LOAD DATA LOCAL INFILE\" functionality enabled that allowed a malicious MySQL database read arbitrary files from the connected ClickHouse server.</p>\n<p>Credits: Andrey Krasichkov and Evgeny Sidorov of Yandex Information Security Team</p>\n<h3 id=\"fixed-in-clickhouse-release-1-1-54131-2017-01-10\">Fixed in ClickHouse Release 1.1.54131, 2017-01-10<a class=\"headerlink\" href=\"#fixed-in-clickhouse-release-1-1-54131-2017-01-10\" title=\"Permanent link\">&para;</a></h3>\n<h4 id=\"cve-2018-14670\">CVE-2018-14670<a class=\"headerlink\" href=\"#cve-2018-14670\" title=\"Permanent link\">&para;</a></h4>\n<p>Incorrect configuration in deb package could lead to unauthorized use of the database.</p>\n<p>Credits: the UK's National Cyber Security Centre (NCSC)</p>");
            
        </script> </div> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
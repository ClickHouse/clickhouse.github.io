<!DOCTYPE html><html lang=en data-version=v20.3 data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Tutorial - ClickHouse v20.3 Documentation</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Tutorial - ClickHouse v20.3 Documentation"><meta property=og:description content="ClickHouse Tutorial What to Expect from This Tutorial? By going through this tutorial you'll learn how to set up basic C"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Tutorial - ClickHouse v20.3 Documentation"><meta name=description content="ClickHouse Tutorial What to Expect from This Tutorial? By going through this tutorial you'll learn how to set up basic C"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Tutorial </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/en/getting_started/tutorial.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/en.svg alt=English title=English width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v20.3/en/getting_started/tutorial/ class="dropdown-item disabled"> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v20.3/zh/getting_started/tutorial/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v20.3/es/getting_started/tutorial/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v20.3/fr/getting_started/tutorial/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v20.3/ru/getting_started/tutorial/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v20.3/ja/getting_started/tutorial/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v20.3/fa/getting_started/tutorial/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Version: <span class=text-light>v20.3</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/en/ class=dropdown-item> <span class=text-light>latest</span> </a> <a href=/docs/v20.3/en/ class="dropdown-item disable">v20.3</a> <a href=/docs/v20.1/en/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/en/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/en/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/en/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/en/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/en/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/en/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/en/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/en/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/en/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../introduction/distinctive_features/ title="Distinctive Features of ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distinctive Features of ClickHouse</a> <a href=../../introduction/features_considered_disadvantages/ title="ClickHouse Features that Can Be Considered Disadvantages" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Features that Can Be Considered Disadvantages</a> <a href=../../introduction/performance/ title=Performance class="nav-link text-light text-wrap d-inline-block w-100 px-0">Performance</a> <a href=../../introduction/history/ title=History class="nav-link text-light text-wrap d-inline-block w-100 px-0">History</a> <a href=../../introduction/adopters/ title=Adopters class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adopters</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/install/ title=Installation class="nav-link text-light text-wrap d-inline-block w-100 px-0">Installation</a> <a href=../../getting_started/tutorial/ title=Tutorial class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=#sidebar-sidebar-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-4 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title="New York Taxi Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Data</a> <a href=../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting_started/example_datasets/criteo/ title="Terabyte Click Logs from Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Terabyte Click Logs from Criteo</a> <a href=../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../getting_started/example_datasets/metrica/ title="Yandex.Metrica Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica Data</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../interfaces/cli/ title="Command-Line Client" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Command-Line Client</a> <a href=../../interfaces/tcp/ title="Native Interface (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Native Interface (TCP)</a> <a href=../../interfaces/http/ title="HTTP Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP Interface</a> <a href=../../interfaces/mysql/ title="MySQL Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL Interface</a> <a href=../../interfaces/formats/ title="Input and Output Formats" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Input and Output Formats</a> <a href=../../interfaces/jdbc/ title="JDBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC Driver</a> <a href=../../interfaces/odbc/ title="ODBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC Driver</a> <a href=../../interfaces/cpp/ title="C++ Client Library" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ Client Library</a> <a href=#sidebar-sidebar-3-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-3-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/client_libraries/ title="Client Libraries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Client Libraries</a> <a href=../../interfaces/third-party/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../interfaces/third-party/gui/ title="Visual Interfaces" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Visual Interfaces</a> <a href=../../interfaces/third-party/proxy/ title=Proxies class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxies</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-1 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-4-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-4-1-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-1-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-4-1-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../operations/table_engines/replication/ title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a> <a href=../../operations/table_engines/custom_partitioning_key/ title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a> <a href=../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../operations/table_engines/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-4-1-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-1-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-4-1-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/log_family/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/table_engines/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../operations/table_engines/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../operations/table_engines/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-4-1-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-1-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-4-1-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../operations/table_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../operations/table_engines/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../operations/table_engines/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../operations/table_engines/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-4-1-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-1-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-4-1-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../operations/table_engines/external_data/ title="External data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External data</a> <a href=../../operations/table_engines/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../operations/table_engines/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../operations/table_engines/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../operations/table_engines/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../operations/table_engines/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../operations/table_engines/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../operations/table_engines/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../operations/table_engines/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../operations/table_engines/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../operations/table_engines/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../operations/table_engines/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../operations/table_engines/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../database_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../database_engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/syntax/ title=Syntax class="nav-link text-light text-wrap d-inline-block w-100 px-0">Syntax</a> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../query_language/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../query_language/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../query_language/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../query_language/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../query_language/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../query_language/misc/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=#sidebar-sidebar-5-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-5-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../query_language/functions/arithmetic_functions/ title=Arithmetic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arithmetic</a> <a href=../../query_language/functions/comparison_functions/ title=Comparison class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparison</a> <a href=../../query_language/functions/logical_functions/ title=Logical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Logical</a> <a href=../../query_language/functions/type_conversion_functions/ title="Type Conversion" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Type Conversion</a> <a href=../../query_language/functions/date_time_functions/ title="Working with Dates and Times" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Dates and Times</a> <a href=../../query_language/functions/string_functions/ title="Working with strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with strings</a> <a href=../../query_language/functions/string_search_functions/ title="For Searching Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Searching Strings</a> <a href=../../query_language/functions/string_replace_functions/ title="For Replacing in Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Replacing in Strings</a> <a href=../../query_language/functions/conditional_functions/ title="Conditional " class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conditional </a> <a href=../../query_language/functions/math_functions/ title=Mathematical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mathematical</a> <a href=../../query_language/functions/rounding_functions/ title=Rounding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rounding</a> <a href=../../query_language/functions/array_functions/ title="Working with Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Arrays</a> <a href=../../query_language/functions/splitting_merging_functions/ title="Splitting and Merging Strings and Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Splitting and Merging Strings and Arrays</a> <a href=../../query_language/functions/bit_functions/ title=Bit class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bit</a> <a href=../../query_language/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../query_language/functions/hash_functions/ title=Hash class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a> <a href=../../query_language/functions/random_functions/ title="Generating Pseudo-Random Numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generating Pseudo-Random Numbers</a> <a href=../../query_language/functions/encoding_functions/ title=Encoding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encoding</a> <a href=../../query_language/functions/uuid_functions/ title="Working with UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with UUID</a> <a href=../../query_language/functions/url_functions/ title="Working with URLs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with URLs</a> <a href=../../query_language/functions/ip_address_functions/ title="Working with IP Addresses" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with IP Addresses</a> <a href=../../query_language/functions/json_functions/ title="Working with JSON." class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with JSON.</a> <a href=../../query_language/functions/higher_order_functions/ title=Higher-Order class="nav-link text-light text-wrap d-inline-block w-100 px-0">Higher-Order</a> <a href=../../query_language/functions/ext_dict_functions/ title="Working with External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with External Dictionaries</a> <a href=../../query_language/functions/ym_dict_functions/ title="Working with Yandex.Metrica Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Yandex.Metrica Dictionaries</a> <a href=../../query_language/functions/in_functions/ title="Implementing the IN Operator" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implementing the IN Operator</a> <a href=../../query_language/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../query_language/functions/geo/ title="Working with geographical coordinates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with geographical coordinates</a> <a href=../../query_language/functions/functions_for_nulls/ title="Working with Nullable arguments" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Nullable arguments</a> <a href=../../query_language/functions/machine_learning_functions/ title="Machine Learning Functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Machine Learning Functions</a> <a href=../../query_language/functions/introspection/ title=Introspection class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introspection</a> <a href=../../query_language/functions/other_functions/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/agg_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../query_language/agg_functions/reference/ title=Reference class="nav-link text-light text-wrap d-inline-block w-100 px-0">Reference</a> <a href=../../query_language/agg_functions/combinators/ title="Aggregate function combinators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aggregate function combinators</a> <a href=../../query_language/agg_functions/parametric_functions/ title="Parametric aggregate functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parametric aggregate functions</a> </nav> </div> <a href=#sidebar-sidebar-5-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-5-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/table_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../query_language/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../query_language/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../query_language/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../query_language/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../query_language/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../query_language/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../query_language/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../query_language/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../query_language/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../query_language/table_functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../query_language/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-5-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-5-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/dicts/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-5-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-5-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/dicts/external_dicts/ title="General Description" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Description</a> <a href=../../query_language/dicts/external_dicts_dict/ title="Configuring an External Dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuring an External Dictionary</a> <a href=../../query_language/dicts/external_dicts_dict_layout/ title="Storing Dictionaries in Memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Storing Dictionaries in Memory</a> <a href=../../query_language/dicts/external_dicts_dict_lifetime/ title="Dictionary Updates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Updates</a> <a href=../../query_language/dicts/external_dicts_dict_sources/ title="Sources of External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources of External Dictionaries</a> <a href=../../query_language/dicts/external_dicts_dict_structure/ title="Dictionary Key and Fields" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Key and Fields</a> <a href=../../query_language/dicts/external_dicts_dict_hierarchical/ title="Hierarchical dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hierarchical dictionaries</a> </nav> </div> <a href=../../query_language/dicts/internal_dicts/ title="Internal Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Internal Dictionaries</a> </nav> </div> <a href=../../query_language/operators/ title=Operators class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operators</a> <a href=#sidebar-sidebar-5-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-5-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../data_types/boolean/ title=Boolean class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean</a> <a href=../../data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=../../data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-5-9-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-5-9-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=#sidebar-sidebar-5-9-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-17 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-5-9-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../data_types/special_data_types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> </nav> </div> <a href=#sidebar-sidebar-5-9-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-18 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-5-9-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../guides/apply_catboost_model/ title="Applying CatBoost Models" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Applying CatBoost Models</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/requirements/ title=Requirements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requirements</a> <a href=../../operations/monitoring/ title=Monitoring class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoring</a> <a href=../../operations/troubleshooting/ title=Troubleshooting class="nav-link text-light text-wrap d-inline-block w-100 px-0">Troubleshooting</a> <a href=../../operations/update/ title="ClickHouse Update" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Update</a> <a href=../../operations/access_rights/ title="Access Rights" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Access Rights</a> <a href=../../operations/backup/ title="Data Backup" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Backup</a> <a href=../../operations/configuration_files/ title="Configuration Files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration Files</a> <a href=../../operations/quotas/ title=Quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quotas</a> <a href=../../operations/system_tables/ title="System Tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">System Tables</a> <a href=#sidebar-sidebar-7-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-11 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-7-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/performance/sampling_query_profiler/ title="Query Profiling" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Query Profiling</a> </nav> </div> <a href=../../operations/performance_test/ title="Testing Hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing Hardware</a> <a href=#sidebar-sidebar-7-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-13 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-7-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/server_settings/settings/ title="Server Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server Settings</a> </nav> </div> <a href=#sidebar-sidebar-7-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-7-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/settings/permissions_for_queries/ title="Permissions for Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permissions for Queries</a> <a href=../../operations/settings/query_complexity/ title="Restrictions on Query Complexity" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions on Query Complexity</a> <a href=../../operations/settings/settings/ title=Settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a> <a href=../../operations/settings/settings_profiles/ title="Settings Profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings Profiles</a> <a href=../../operations/settings/constraints_on_settings/ title="Constraints on Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Constraints on Settings</a> <a href=../../operations/settings/settings_users/ title="User Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">User Settings</a> </nav> </div> <a href=#sidebar-sidebar-7-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-7-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utils/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../operations/utils/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utils/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../operations/utils/clickhouse-benchmark/ title=clickhouse-benchmark class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a> </nav> </div> <a href=../../operations/tips/ title="Usage Recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage Recommendations</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/developer_instruction/ title="The Beginner ClickHouse Developer Instruction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">The Beginner ClickHouse Developer Instruction</a> <a href=../../development/architecture/ title="Overview of ClickHouse Architecture" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview of ClickHouse Architecture</a> <a href=../../development/browse_code/ title="Browse ClickHouse Source Code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Browse ClickHouse Source Code</a> <a href=../../development/build/ title="How to Build ClickHouse on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux</a> <a href=../../development/build_osx/ title="How to Build ClickHouse on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Mac OS X</a> <a href=../../development/build_cross_osx/ title="How to Build ClickHouse on Linux for Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for Mac OS X</a> <a href=../../development/build_cross_arm/ title="How to Build ClickHouse on Linux for AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for AARCH64 (ARM64)</a> <a href=../../development/style/ title="How to Write C++ Code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Write C++ Code</a> <a href=../../development/tests/ title="How to Run ClickHouse Tests" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Run ClickHouse Tests</a> <a href=../../development/contrib/ title="Third-Party Libraries Used" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party Libraries Used</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/cloud/ title="Cloud Service Providers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cloud Service Providers</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../changelog/ title=Changelog class="nav-link text-light text-wrap d-inline-block w-100 px-0">Changelog</a> <a href=../../security_changelog/ title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/general/ title="General Questions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Questions</a> </nav> </div> <a href=../../single/clickhouse_en.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=clickhouse-tutorial>ClickHouse Tutorial<a class=headerlink href=#clickhouse-tutorial title="Permanent link">&para;</a></h1> <h2 id=what-to-expect-from-this-tutorial>What to Expect from This Tutorial?<a class=headerlink href=#what-to-expect-from-this-tutorial title="Permanent link">&para;</a></h2> <p>By going through this tutorial you'll learn how to set up basic ClickHouse cluster, it'll be small, but fault tolerant and scalable. We will use one of example datasets to fill it with data and execute some demo queries.</p> <h2 id=single-node-setup>Single Node Setup<a class=headerlink href=#single-node-setup title="Permanent link">&para;</a></h2> <p>To postpone complexities of distributed environment, we'll start with deploying ClickHouse on a single server or virtual machine. ClickHouse is usually installed from <a href=../#install-from-deb-packages>deb</a> or <a href=../#from-rpm-packages>rpm</a> packages, but there are <a href=../#from-docker-image>alternatives</a> for the operating systems that do no support them.</p> <p>For example, you have chosen <code>deb</code> packages and executed:</p> <div class=codehilite><pre><span></span><code>sudo apt-get install dirmngr
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv E0C56BD4

<span class=nb>echo</span> <span class=s2>&quot;deb http://repo.yandex.ru/clickhouse/deb/stable/ main/&quot;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/clickhouse.list
sudo apt-get update

sudo apt-get install -y clickhouse-server clickhouse-client
</code></pre></div> <p>What do we have in the packages that got installed:</p> <ul> <li><code>clickhouse-client</code> package contains <a href=../../interfaces/cli/ >clickhouse-client</a> application, interactive ClickHouse console client.</li> <li><code>clickhouse-common</code> package contains a ClickHouse executable file.</li> <li><code>clickhouse-server</code> package contains configuration files to run ClickHouse as a server.</li> </ul> <p>Server config files are located in <code>/etc/clickhouse-server/</code>. Before going further please notice the <code>&lt;path&gt;</code> element in <code>config.xml</code>. Path determines the location for data storage, so it should be located on volume with large disk capacity, the default value is <code>/var/lib/clickhouse/</code>. If you want to adjust the configuration it's not really handy to directly edit <code>config.xml</code> file, considering it might get rewritten on future package updates. Recommended way to override the config elements is to create <a href=../../operations/configuration_files/ >files in config.d directory</a> which serve as "patches" to config.xml.</p> <p>As you might have noticed, <code>clickhouse-server</code> is not launched automatically after package installation. It won't be automatically restarted after updates either. The way you start the server depends on your init system, usually it's:</p> <div class=codehilite><pre><span></span><code>sudo service clickhouse-server start
</code></pre></div> <p>or</p> <div class=codehilite><pre><span></span><code>sudo /etc/init.d/clickhouse-server start
</code></pre></div> <p>The default location for server logs is <code>/var/log/clickhouse-server/</code>. Server will be ready to handle client connections once <code>Ready for connections</code> message was logged.</p> <p>Once the <code>clickhouse-server</code> is up and running, we can use <code>clickhouse-client</code> to connect to the server and run some test queries like <code>SELECT "Hello, world!";</code>.</p> <details> <p><summary>Quick tips for clickhouse-client</summary> Interactive mode:</p> <div class=codehilite><pre><span></span><code>clickhouse-client
clickhouse-client --host<span class=o>=</span>... --port<span class=o>=</span>... --user<span class=o>=</span>... --password<span class=o>=</span>...
</code></pre></div> <p>Enable multiline queries:</p> <div class=codehilite><pre><span></span><code>clickhouse-client -m
clickhouse-client --multiline
</code></pre></div> <p>Run queries in batch-mode:</p> <div class=codehilite><pre><span></span><code>clickhouse-client --query<span class=o>=</span><span class=s1>&#39;SELECT 1&#39;</span>
<span class=nb>echo</span> <span class=s1>&#39;SELECT 1&#39;</span> <span class=p>|</span> clickhouse-client
clickhouse-client <span class=o>&lt;&lt;&lt;</span> <span class=s1>&#39;SELECT 1&#39;</span>
</code></pre></div> <p>Insert data from a file in specified format:</p> <div class=codehilite><pre><span></span><code>clickhouse-client --query<span class=o>=</span><span class=s1>&#39;INSERT INTO table VALUES&#39;</span> &lt; data.txt
clickhouse-client --query<span class=o>=</span><span class=s1>&#39;INSERT INTO table FORMAT TabSeparated&#39;</span> &lt; data.tsv
</code></pre></div> </details> <h2 id=import-sample-dataset>Import Sample Dataset<a class=headerlink href=#import-sample-dataset title="Permanent link">&para;</a></h2> <p>Now it's time to fill our ClickHouse server with some sample data. In this tutorial we'll use anonymized data of Yandex.Metrica, the first service that run ClickHouse in production way before it became open-source (more on that in <a href=../../introduction/history/ >history section</a>). There are <a href=../example_datasets/metrica/ >multiple ways to import Yandex.Metrica dataset</a> and for the sake of the tutorial we'll go with the most realistic one.</p> <h3 id=download-and-extract-table-data>Download and Extract Table Data<a class=headerlink href=#download-and-extract-table-data title="Permanent link">&para;</a></h3> <div class=codehilite><pre><span></span><code>curl https://clickhouse-datasets.s3.yandex.net/hits/tsv/hits_v1.tsv.xz <span class=p>|</span> unxz --threads<span class=o>=</span><span class=sb>`</span>nproc<span class=sb>`</span> &gt; hits_v1.tsv
curl https://clickhouse-datasets.s3.yandex.net/visits/tsv/visits_v1.tsv.xz <span class=p>|</span> unxz --threads<span class=o>=</span><span class=sb>`</span>nproc<span class=sb>`</span> &gt; visits_v1.tsv
</code></pre></div> <p>The extracted files are about 10GB in size.</p> <h3 id=create-tables>Create Tables<a class=headerlink href=#create-tables title="Permanent link">&para;</a></h3> <p>Tables are logically grouped into "databases". There's a <code>default</code> database, but we'll create a new one named <code>tutorial</code>:</p> <div class=codehilite><pre><span></span><code>clickhouse-client --query <span class=s2>&quot;CREATE DATABASE IF NOT EXISTS tutorial&quot;</span>
</code></pre></div> <p>Syntax for creating tables is way more complicated compared to databases (see <a href=../../query_language/create/ >reference</a>. In general <code>CREATE TABLE</code> statement has to specify three key things:</p> <ol> <li>Name of table to create.</li> <li>Table schema, i.e. list of columns and their <a href=../../data_types/ >data types</a>.</li> <li><a href=../../operations/table_engines/ >Table engine</a> and it's settings, which determines all the details on how queries to this table will be physically executed.</li> </ol> <p>Yandex.Metrica is a web analytics service and sample dataset doesn't cover it's full functionality, so there are only two tables to create:</p> <ul> <li><code>hits</code> is a table with each action done by all users on all websites covered by the service.</li> <li><code>visits</code> is a table that contains pre-built sessions instead of individual actions.</li> </ul> <p>Let's see and execute the real create table queries for these tables:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_v1</span>
<span class=p>(</span>
    <span class=o>`</span><span class=n>WatchID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>JavaEnable</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Title</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>GoodEvent</span><span class=o>`</span> <span class=n>Int16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>EventTime</span><span class=o>`</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=o>`</span><span class=n>EventDate</span><span class=o>`</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=o>`</span><span class=n>CounterID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClientIP</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClientIP6</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>RegionID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UserID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>CounterClass</span><span class=o>`</span> <span class=nb>Int8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OS</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UserAgent</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>URL</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Referer</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>URLDomain</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RefererDomain</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Refresh</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsRobot</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RefererCategories</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>URLCategories</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>URLRegions</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>
    <span class=o>`</span><span class=n>RefererRegions</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>
    <span class=o>`</span><span class=n>ResolutionWidth</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ResolutionHeight</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ResolutionDepth</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FlashMajor</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FlashMinor</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FlashMinor2</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>NetMajor</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>NetMinor</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UserAgentMajor</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UserAgentMinor</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span>
    <span class=o>`</span><span class=n>CookieEnable</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>JavascriptEnable</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsMobile</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>MobilePhone</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>MobilePhoneModel</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Params</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IPNetworkID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>TraficSourceID</span><span class=o>`</span> <span class=nb>Int8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SearchEngineID</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SearchPhrase</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>AdvEngineID</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsArtifical</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>WindowClientWidth</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>WindowClientHeight</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClientTimeZone</span><span class=o>`</span> <span class=n>Int16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClientEventTime</span><span class=o>`</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SilverlightVersion1</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SilverlightVersion2</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SilverlightVersion3</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SilverlightVersion4</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>PageCharset</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>CodeVersion</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsLink</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsDownload</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsNotBounce</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FUniqID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>HID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsOldCounter</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsEvent</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsParameter</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>DontCountHits</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>WithHash</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>HitColor</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span>
    <span class=o>`</span><span class=n>UTCEventTime</span><span class=o>`</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Age</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Sex</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Income</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Interests</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Robotness</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>GeneralInterests</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>RemoteIP</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RemoteIP6</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>WindowName</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenerName</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>HistoryLength</span><span class=o>`</span> <span class=n>Int16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>BrowserLanguage</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span>
    <span class=o>`</span><span class=n>BrowserCountry</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span>
    <span class=o>`</span><span class=n>SocialNetwork</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SocialAction</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>HTTPError</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SendTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>DNSTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ConnectTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ResponseStartTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ResponseEndTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FetchTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RedirectTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>DOMInteractiveTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>DOMContentLoadedTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>DOMCompleteTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>LoadEventStartTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>LoadEventEndTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>NSToDOMContentLoadedTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FirstPaintTiming</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RedirectCount</span><span class=o>`</span> <span class=nb>Int8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SocialSourceNetworkID</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SocialSourcePage</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ParamPrice</span><span class=o>`</span> <span class=n>Int64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ParamOrderID</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ParamCurrency</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span>
    <span class=o>`</span><span class=n>ParamCurrencyID</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>GoalsReached</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>
    <span class=o>`</span><span class=n>OpenstatServiceName</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatCampaignID</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatAdID</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatSourceID</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMSource</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMMedium</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMCampaign</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMContent</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMTerm</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FromTag</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>HasGCLID</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RefererHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>URLHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>CLID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>YCLID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ShareService</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ShareURL</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ShareTitle</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ParsedParams</span><span class=o>`</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>Key1</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>Key2</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>Key3</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>Key4</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>Key5</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>ValueDouble</span> <span class=n>Float64</span><span class=p>),</span>
    <span class=o>`</span><span class=n>IslandID</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>RequestNum</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RequestTry</span><span class=o>`</span> <span class=n>UInt8</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>))</span>
<span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span>
<span class=n>SETTINGS</span> <span class=n>index_granularity</span> <span class=o>=</span> <span class=mi>8192</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>visits_v1</span>
<span class=p>(</span>
    <span class=o>`</span><span class=n>CounterID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>StartDate</span><span class=o>`</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Sign</span><span class=o>`</span> <span class=nb>Int8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsNew</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>VisitID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UserID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>StartTime</span><span class=o>`</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Duration</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTCStartTime</span><span class=o>`</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=o>`</span><span class=n>PageViews</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Hits</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsBounce</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Referer</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>StartURL</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RefererDomain</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>StartURLDomain</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>EndURL</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>LinkURL</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsDownload</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>TraficSourceID</span><span class=o>`</span> <span class=nb>Int8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SearchEngineID</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SearchPhrase</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>AdvEngineID</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>PlaceID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RefererCategories</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>URLCategories</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>URLRegions</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>
    <span class=o>`</span><span class=n>RefererRegions</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>
    <span class=o>`</span><span class=n>IsYandex</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>GoalReachesDepth</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>GoalReachesURL</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>GoalReachesAny</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SocialSourceNetworkID</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SocialSourcePage</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>MobilePhoneModel</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClientEventTime</span><span class=o>`</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RegionID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClientIP</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClientIP6</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>RemoteIP</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RemoteIP6</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>IPNetworkID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SilverlightVersion3</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>CodeVersion</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ResolutionWidth</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ResolutionHeight</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UserAgentMajor</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UserAgentMinor</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>WindowClientWidth</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>WindowClientHeight</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SilverlightVersion2</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SilverlightVersion4</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FlashVersion3</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FlashVersion4</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClientTimeZone</span><span class=o>`</span> <span class=n>Int16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OS</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UserAgent</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ResolutionDepth</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FlashMajor</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FlashMinor</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>NetMajor</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>NetMinor</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>MobilePhone</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SilverlightVersion1</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Age</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Sex</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Income</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>JavaEnable</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>CookieEnable</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>JavascriptEnable</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>IsMobile</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>BrowserLanguage</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>BrowserCountry</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Interests</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>Robotness</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>GeneralInterests</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>Params</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
    <span class=o>`</span><span class=n>Goals</span><span class=o>`</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>ID</span> <span class=n>UInt32</span><span class=p>,</span>
        <span class=nb>Serial</span> <span class=n>UInt32</span><span class=p>,</span>
        <span class=n>EventTime</span> <span class=n>DateTime</span><span class=p>,</span>
        <span class=n>Price</span> <span class=n>Int64</span><span class=p>,</span>
        <span class=n>OrderID</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>CurrencyID</span> <span class=n>UInt32</span><span class=p>),</span>
    <span class=o>`</span><span class=n>WatchIDs</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt64</span><span class=p>),</span>
    <span class=o>`</span><span class=n>ParamSumPrice</span><span class=o>`</span> <span class=n>Int64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ParamCurrency</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span>
    <span class=o>`</span><span class=n>ParamCurrencyID</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickLogID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickEventID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickGoodEvent</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickEventTime</span><span class=o>`</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickPriorityID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickPhraseID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickPageID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickPlaceID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickTypeID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickResourceID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickCost</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickClientIP</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickDomainID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickURL</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickAttempt</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickOrderID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickBannerID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickMarketCategoryID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickMarketPP</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickMarketCategoryName</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickMarketPPName</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickAWAPSCampaignName</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickPageName</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickTargetType</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickTargetPhraseID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickContextType</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickSelectType</span><span class=o>`</span> <span class=nb>Int8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickOptions</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ClickGroupBannerID</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatServiceName</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatCampaignID</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatAdID</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatSourceID</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMSource</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMMedium</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMCampaign</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMContent</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMTerm</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FromTag</span><span class=o>`</span> <span class=n>String</span><span class=p>,</span>
    <span class=o>`</span><span class=n>HasGCLID</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FirstVisit</span><span class=o>`</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=o>`</span><span class=n>PredLastVisit</span><span class=o>`</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=o>`</span><span class=n>LastVisit</span><span class=o>`</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=o>`</span><span class=n>TotalVisits</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>TraficSource</span><span class=o>`</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>ID</span> <span class=nb>Int8</span><span class=p>,</span>
        <span class=n>SearchEngineID</span> <span class=n>UInt16</span><span class=p>,</span>
        <span class=n>AdvEngineID</span> <span class=n>UInt8</span><span class=p>,</span>
        <span class=n>PlaceID</span> <span class=n>UInt16</span><span class=p>,</span>
        <span class=n>SocialSourceNetworkID</span> <span class=n>UInt8</span><span class=p>,</span>
        <span class=k>Domain</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>SearchPhrase</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>SocialSourcePage</span> <span class=n>String</span><span class=p>),</span>
    <span class=o>`</span><span class=n>Attendance</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>
    <span class=o>`</span><span class=n>CLID</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>YCLID</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>NormalizedRefererHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>SearchPhraseHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>RefererDomainHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>NormalizedStartURLHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>StartURLDomainHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>NormalizedEndURLHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>TopLevelDomain</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>URLScheme</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatServiceNameHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatCampaignIDHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatAdIDHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>OpenstatSourceIDHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMSourceHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMMediumHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMCampaignHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMContentHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>UTMTermHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>FromHash</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>WebVisorEnabled</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>WebVisorActivity</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>ParsedParams</span><span class=o>`</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>Key1</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>Key2</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>Key3</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>Key4</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>Key5</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>ValueDouble</span> <span class=n>Float64</span><span class=p>),</span>
    <span class=o>`</span><span class=n>Market</span><span class=o>`</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=k>Type</span> <span class=n>UInt8</span><span class=p>,</span>
        <span class=n>GoalID</span> <span class=n>UInt32</span><span class=p>,</span>
        <span class=n>OrderID</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>OrderPrice</span> <span class=n>Int64</span><span class=p>,</span>
        <span class=n>PP</span> <span class=n>UInt32</span><span class=p>,</span>
        <span class=n>DirectPlaceID</span> <span class=n>UInt32</span><span class=p>,</span>
        <span class=n>DirectOrderID</span> <span class=n>UInt32</span><span class=p>,</span>
        <span class=n>DirectBannerID</span> <span class=n>UInt32</span><span class=p>,</span>
        <span class=n>GoodID</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>GoodName</span> <span class=n>String</span><span class=p>,</span>
        <span class=n>GoodQuantity</span> <span class=n>Int32</span><span class=p>,</span>
        <span class=n>GoodPrice</span> <span class=n>Int64</span><span class=p>),</span>
    <span class=o>`</span><span class=n>IslandID</span><span class=o>`</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>CollapsingMergeTree</span><span class=p>(</span><span class=n>Sign</span><span class=p>)</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>StartDate</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>StartDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>),</span> <span class=n>VisitID</span><span class=p>)</span>
<span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span>
<span class=n>SETTINGS</span> <span class=n>index_granularity</span> <span class=o>=</span> <span class=mi>8192</span>
</code></pre></div> <p>You can execute those queries using interactive mode of <code>clickhouse-client</code> (just launch it in terminal without specifying a query in advance) or try some <a href=../../interfaces/ >alternative interface</a> if you want.</p> <p>As we can see, <code>hits_v1</code> uses the <a href=../../operations/table_engines/mergetree/ >basic MergeTree engine</a>, while the <code>visits_v1</code> uses the <a href=../../operations/table_engines/collapsingmergetree/ >Collapsing</a> variant.</p> <h3 id=import-data>Import Data<a class=headerlink href=#import-data title="Permanent link">&para;</a></h3> <p>Data import to ClickHouse is done via <a href=../../query_language/insert_into/ >INSERT INTO</a> query like in many other SQL databases. However data is usually provided in one of the <a href=../../interfaces/formats/ >supported formats</a> instead of <code>VALUES</code> clause (which is also supported).</p> <p>The files we downloaded earlier are in tab-separated format, so here's how to import them via console client:</p> <div class=codehilite><pre><span></span><code>clickhouse-client --query <span class=s2>&quot;INSERT INTO tutorial.hits_v1 FORMAT TSV&quot;</span> --max_insert_block_size<span class=o>=</span><span class=m>100000</span> &lt; hits_v1.tsv
clickhouse-client --query <span class=s2>&quot;INSERT INTO tutorial.visits_v1 FORMAT TSV&quot;</span> --max_insert_block_size<span class=o>=</span><span class=m>100000</span> &lt; visits_v1.tsv
</code></pre></div> <p>ClickHouse has a lot of <a href=../../operations/settings/ >settings to tune</a> and one way to specify them in console client is via arguments, as we can see with <code>--max_insert_block_size</code>. The easiest way to figure out what settings are available, what do they mean and what the defaults are is to query the <code>system.settings</code> table:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>changed</span><span class=p>,</span> <span class=n>description</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span>
<span class=k>WHERE</span> <span class=n>name</span> <span class=k>LIKE</span> <span class=s1>&#39;%max_insert_b%&#39;</span>
<span class=n>FORMAT</span> <span class=n>TSV</span>

<span class=n>max_insert_block_size</span>    <span class=mi>1048576</span>    <span class=mi>0</span>    <span class=ss>&quot;The maximum block size for insertion, if we control the creation of blocks for insertion.&quot;</span>
</code></pre></div> <p>Optionally you can <a href=../query_language/misc/#misc_operations-optimize>OPTIMIZE</a> the tables after import. Tables that are configured with MergeTree-family engine always do merges of data parts in background to optimize data storage (or at least check if it makes sense). These queries will just force table engine to do storage optimization right now instead of some time later:</p> <div class=codehilite><pre><span></span><code>clickhouse-client --query <span class=s2>&quot;OPTIMIZE TABLE tutorial.hits_v1 FINAL&quot;</span>
clickhouse-client --query <span class=s2>&quot;OPTIMIZE TABLE tutorial.visits_v1 FINAL&quot;</span>
</code></pre></div> <p>This is I/O and CPU intensive operation so if the table constantly receives new data it's better to leave it alone and let merges run in background.</p> <p>Now we can check that the tables are successfully imported:</p> <div class=codehilite><pre><span></span><code>clickhouse-client --query <span class=s2>&quot;SELECT COUNT(*) FROM tutorial.hits_v1&quot;</span>
clickhouse-client --query <span class=s2>&quot;SELECT COUNT(*) FROM tutorial.visits_v1&quot;</span>
</code></pre></div> <h2 id=example-queries>Example Queries<a class=headerlink href=#example-queries title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>StartURL</span> <span class=k>AS</span> <span class=n>URL</span><span class=p>,</span>
    <span class=k>AVG</span><span class=p>(</span><span class=n>Duration</span><span class=p>)</span> <span class=k>AS</span> <span class=n>AvgDuration</span>
<span class=k>FROM</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>visits_v1</span>
<span class=k>WHERE</span> <span class=n>StartDate</span> <span class=k>BETWEEN</span> <span class=s1>&#39;2014-03-23&#39;</span> <span class=k>AND</span> <span class=s1>&#39;2014-03-30&#39;</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>URL</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>AvgDuration</span> <span class=k>DESC</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=k>sum</span><span class=p>(</span><span class=n>Sign</span><span class=p>)</span> <span class=k>AS</span> <span class=n>visits</span><span class=p>,</span>
    <span class=n>sumIf</span><span class=p>(</span><span class=n>Sign</span><span class=p>,</span> <span class=n>has</span><span class=p>(</span><span class=n>Goals</span><span class=p>.</span><span class=n>ID</span><span class=p>,</span> <span class=mi>1105530</span><span class=p>))</span> <span class=k>AS</span> <span class=n>goal_visits</span><span class=p>,</span>
    <span class=p>(</span><span class=mi>100</span><span class=p>.</span> <span class=o>*</span> <span class=n>goal_visits</span><span class=p>)</span> <span class=o>/</span> <span class=n>visits</span> <span class=k>AS</span> <span class=n>goal_percent</span>
<span class=k>FROM</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>visits_v1</span>
<span class=k>WHERE</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>912887</span><span class=p>)</span> <span class=k>AND</span> <span class=p>(</span><span class=n>toYYYYMM</span><span class=p>(</span><span class=n>StartDate</span><span class=p>)</span> <span class=o>=</span> <span class=mi>201403</span><span class=p>)</span> <span class=k>AND</span> <span class=p>(</span><span class=k>domain</span><span class=p>(</span><span class=n>StartURL</span><span class=p>)</span> <span class=o>=</span> <span class=s1>&#39;yandex.ru&#39;</span><span class=p>)</span>
</code></pre></div> <h2 id=cluster-deployment>Cluster Deployment<a class=headerlink href=#cluster-deployment title="Permanent link">&para;</a></h2> <p>ClickHouse cluster is a homogenous cluster. Steps to set up:</p> <ol> <li>Install ClickHouse server on all machines of the cluster</li> <li>Set up cluster configs in configuration files</li> <li>Create local tables on each instance</li> <li>Create a <a href=../../operations/table_engines/distributed/ >Distributed table</a></li> </ol> <p><a href=../../operations/table_engines/distributed/ >Distributed table</a> is actually a kind of "view" to local tables of ClickHouse cluster. SELECT query from a distributed table will be executed using resources of all cluster's shards. You may specify configs for multiple clusters and create multiple distributed tables providing views to different clusters.</p> <p>Example config for cluster with three shards, one replica each:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;remote_servers&gt;</span>
    <span class=nt>&lt;perftest_3shards_1replicas&gt;</span>
        <span class=nt>&lt;shard&gt;</span>
            <span class=nt>&lt;replica&gt;</span>
                <span class=nt>&lt;host&gt;</span>example-perftest01j.yandex.ru<span class=nt>&lt;/host&gt;</span>
                <span class=nt>&lt;port&gt;</span>9000<span class=nt>&lt;/port&gt;</span>
            <span class=nt>&lt;/replica&gt;</span>
        <span class=nt>&lt;/shard&gt;</span>
        <span class=nt>&lt;shard&gt;</span>
            <span class=nt>&lt;replica&gt;</span>
                <span class=nt>&lt;host&gt;</span>example-perftest02j.yandex.ru<span class=nt>&lt;/host&gt;</span>
                <span class=nt>&lt;port&gt;</span>9000<span class=nt>&lt;/port&gt;</span>
            <span class=nt>&lt;/replica&gt;</span>
        <span class=nt>&lt;/shard&gt;</span>
        <span class=nt>&lt;shard&gt;</span>
            <span class=nt>&lt;replica&gt;</span>
                <span class=nt>&lt;host&gt;</span>example-perftest03j.yandex.ru<span class=nt>&lt;/host&gt;</span>
                <span class=nt>&lt;port&gt;</span>9000<span class=nt>&lt;/port&gt;</span>
            <span class=nt>&lt;/replica&gt;</span>
        <span class=nt>&lt;/shard&gt;</span>
    <span class=nt>&lt;/perftest_3shards_1replicas&gt;</span>
<span class=nt>&lt;/remote_servers&gt;</span>
</code></pre></div> <p>For further demonstration let's create new local table with exactly the same <code>CREATE TABLE</code> query that we used for <code>hits_v1</code>, but different table name:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_local</span> <span class=p>(...)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span> <span class=p>...</span>
</code></pre></div> <p>Creating a distributed table providing a view into local tables of the cluster:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_all</span> <span class=k>AS</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_local</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Distributed</span><span class=p>(</span><span class=n>perftest_3shards_1replicas</span><span class=p>,</span> <span class=n>tutorial</span><span class=p>,</span> <span class=n>hits_local</span><span class=p>,</span> <span class=n>rand</span><span class=p>());</span>
</code></pre></div> <p>Common practice is to create similar Distributed tables on all machines of the cluster. This would allow to run distributed queries on any machine of the cluster. Also there's an alternative option to create temporary distributed table for a given SELECT query using <a href=../../query_language/table_functions/remote/ >remote</a> table function.</p> <p>Let's run <a href=../../query_language/insert_into/ >INSERT SELECT</a> into Distributed table to spread the table to multiple servers.</p> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_all</span> <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_v1</span><span class=p>;</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Notice</p> <p>This approach is not suitable for sharding of large tables. There's a separate tool <a href=../../operations/utils/clickhouse-copier/ >clickhouse-copier</a> that can re-shard arbitrary large tables.</p> </div> <p>As you could expect computationally heavy queries are executed N times faster being launched on 3 servers instead of one.</p> <p>In this case we have used a cluster with 3 shards each contains a single replica.</p> <p>To provide resilience in production environment we recommend that each shard should contain 2-3 replicas distributed between multiple data-centers. Note that ClickHouse supports unlimited number of replicas.</p> <p>Example config for cluster of one shard containing three replicas:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;remote_servers&gt;</span>
    ...
    <span class=nt>&lt;perftest_1shards_3replicas&gt;</span>
        <span class=nt>&lt;shard&gt;</span>
            <span class=nt>&lt;replica&gt;</span>
                <span class=nt>&lt;host&gt;</span>example-perftest01j.yandex.ru<span class=nt>&lt;/host&gt;</span>
                <span class=nt>&lt;port&gt;</span>9000<span class=nt>&lt;/port&gt;</span>
             <span class=nt>&lt;/replica&gt;</span>
             <span class=nt>&lt;replica&gt;</span>
                <span class=nt>&lt;host&gt;</span>example-perftest02j.yandex.ru<span class=nt>&lt;/host&gt;</span>
                <span class=nt>&lt;port&gt;</span>9000<span class=nt>&lt;/port&gt;</span>
             <span class=nt>&lt;/replica&gt;</span>
             <span class=nt>&lt;replica&gt;</span>
                <span class=nt>&lt;host&gt;</span>example-perftest03j.yandex.ru<span class=nt>&lt;/host&gt;</span>
                <span class=nt>&lt;port&gt;</span>9000<span class=nt>&lt;/port&gt;</span>
             <span class=nt>&lt;/replica&gt;</span>
        <span class=nt>&lt;/shard&gt;</span>
    <span class=nt>&lt;/perftest_1shards_3replicas&gt;</span>
<span class=nt>&lt;/remote_servers&gt;</span>
</code></pre></div> <p>To enable native replication <a href=http://zookeeper.apache.org/ rel="external nofollow">ZooKeeper</a> is required. ClickHouse will take care of data consistency on all replicas and run restore procedure after failure<br> automatically. It's recommended to deploy ZooKeeper cluster to separate servers.</p> <p>ZooKeeper is not a strict requirement: in some simple cases you can duplicate the data by writing it into all the replicas from your application code. This approach is <strong>not</strong> recommended, in this case ClickHouse won't be able to<br> guarantee data consistency on all replicas. This remains the responsibility of your application.</p> <p>ZooKeeper locations need to be specified in configuration file:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;zookeeper&gt;</span>
    <span class=nt>&lt;node&gt;</span>
        <span class=nt>&lt;host&gt;</span>zoo01.yandex.ru<span class=nt>&lt;/host&gt;</span>
        <span class=nt>&lt;port&gt;</span>2181<span class=nt>&lt;/port&gt;</span>
    <span class=nt>&lt;/node&gt;</span>
    <span class=nt>&lt;node&gt;</span>
        <span class=nt>&lt;host&gt;</span>zoo02.yandex.ru<span class=nt>&lt;/host&gt;</span>
        <span class=nt>&lt;port&gt;</span>2181<span class=nt>&lt;/port&gt;</span>
    <span class=nt>&lt;/node&gt;</span>
    <span class=nt>&lt;node&gt;</span>
        <span class=nt>&lt;host&gt;</span>zoo03.yandex.ru<span class=nt>&lt;/host&gt;</span>
        <span class=nt>&lt;port&gt;</span>2181<span class=nt>&lt;/port&gt;</span>
    <span class=nt>&lt;/node&gt;</span>
<span class=nt>&lt;/zookeeper&gt;</span>
</code></pre></div> <p>Also we need to set macros for identifying each shard and replica, it will be used on table creation:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;macros&gt;</span>
    <span class=nt>&lt;shard&gt;</span>01<span class=nt>&lt;/shard&gt;</span>
    <span class=nt>&lt;replica&gt;</span>01<span class=nt>&lt;/replica&gt;</span>
<span class=nt>&lt;/macros&gt;</span>
</code></pre></div> <p>If there are no replicas at the moment on replicated table creation, a new first replica will be instantiated. If there are already live replicas, new replica will clone the data from existing ones. You have an option to create all replicated tables first and that insert data to it. Another option is to create some replicas and add the others after or during data insertion.</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_replica</span> <span class=p>(...)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>ReplcatedMergeTree</span><span class=p>(</span>
    <span class=s1>&#39;/clickhouse_perftest/tables/{shard}/hits&#39;</span><span class=p>,</span>
    <span class=s1>&#39;{replica}&#39;</span>
<span class=p>)</span>
<span class=p>...</span>
</code></pre></div> <p>Here we use <a href=../../operations/table_engines/replication/ >ReplicatedMergeTree</a> table engine. In parameters we specify ZooKeeper path containing shard and replica identifiers.</p> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_replica</span> <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>tutorial</span><span class=p>.</span><span class=n>hits_local</span><span class=p>;</span>
</code></pre></div> <p>Replication operates in multi-master mode. Data can be loaded into any replica and it will be synced with other instances automatically. Replication is asynchronous so at a given moment of time not all replicas may contain recently inserted data. To allow data insertion at least one replica should be up. Others will sync up data and repair consistency once they will become active again. Please notice that such approach allows for the low possibility of loss of just appended data.</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/25eae6abe035bda78634f17d15c9f05348d97aad rel="external nofollow noreferrer" target=_blank class=text-reset>25eae6abe0</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#what-to-expect-from-this-tutorial title="What to Expect from This Tutorial?" class="nav-link text-wrap d-inline-block w-100"> What to Expect from This Tutorial? </a> <a href=#single-node-setup title="Single Node Setup" class="nav-link text-wrap d-inline-block w-100"> Single Node Setup </a> <a href=#import-sample-dataset title="Import Sample Dataset" class="nav-link text-wrap d-inline-block w-100"> Import Sample Dataset </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#download-and-extract-table-data title="Download and Extract Table Data" class="nav-link text-wrap d-inline-block w-100"> Download and Extract Table Data </a> <a href=#create-tables title="Create Tables" class="nav-link text-wrap d-inline-block w-100"> Create Tables </a> <a href=#import-data title="Import Data" class="nav-link text-wrap d-inline-block w-100"> Import Data </a> </nav> <a href=#example-queries title="Example Queries" class="nav-link text-wrap d-inline-block w-100"> Example Queries </a> <a href=#cluster-deployment title="Cluster Deployment" class="nav-link text-wrap d-inline-block w-100"> Cluster Deployment </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
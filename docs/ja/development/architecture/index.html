<!DOCTYPE html><html lang=ja data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>クリックハウスの概要 - ClickHouseドキュメント</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="クリックハウスの概要 - ClickHouseドキュメント "><meta property=og:description content="クリックハウスの概要 ClickHouseは真の列指向DBMSです。 データは、列によって、および配列（ベクトルまたは列のチャンク）の実行中に格納されます。 可能な限り、操作は個々の値ではなく、配列にディスパッチされます。 それは呼ばれます"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="クリックハウスの概要 - ClickHouseドキュメント "><meta name=description content="クリックハウスの概要 ClickHouseは真の列指向DBMSです。 データは、列によって、および配列（ベクトルまたは列のチャンク）の実行中に格納されます。 可能な限り、操作は個々の値ではなく、配列にディスパッチされます。 それは呼ばれます"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> クリックハウスの概要 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/development/architecture.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ja.svg alt=日本語 title=日本語 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/development/architecture/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/development/architecture/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/development/architecture/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/development/architecture/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/development/architecture/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/development/architecture/ class="dropdown-item disabled"> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/development/architecture/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=複数ページまたは単一ページ> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt=複数ページバージョン title=複数ページバージョン> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt=単一ページ版 title=単一ページ版> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> バージョン: <span class=text-light>最新の</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ja/ class="dropdown-item disable"> <span class=text-light>最新の</span> </a> <a href=/docs/v20.3/ja/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ja/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/ja/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ja/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ja/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ja/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ja/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/ja/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ja/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ja/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ja/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../introduction/distinctive_features/ title=特徴的な機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特徴的な機能</a> <a href=../../introduction/features_considered_disadvantages/ title=欠点と見なすことができるClickHouseの機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">欠点と見なすことができるClickHouseの機能</a> <a href=../../introduction/performance/ title=パフォーマンス class="nav-link text-light text-wrap d-inline-block w-100 px-0">パフォーマンス</a> <a href=../../introduction/history/ title=歴史 class="nav-link text-light text-wrap d-inline-block w-100 px-0">歴史</a> <a href=../../introduction/adopters/ title=アーリーアダプター class="nav-link text-light text-wrap d-inline-block w-100 px-0">アーリーアダプター</a> </nav> </div> <a href=../../ title=概観 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概観</a> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../getting_started/install/ title=設置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設置</a> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../getting_started/example_datasets/ontime/ title=オンタイム class="nav-link text-light text-wrap d-inline-block w-100 px-0">オンタイム</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title=ニューヨーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">ニューヨーク</a> <a href=../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Dataベンチマーク" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Dataベンチマーク</a> <a href=../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting_started/example_datasets/criteo/ title=CriteoからのTerabyteクリックログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">CriteoからのTerabyteクリックログ</a> <a href=../../getting_started/example_datasets/star_schema/ title=スタースキーマのベンチマーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">スタースキーマのベンチマーク</a> <a href=../../getting_started/example_datasets/metrica/ title=Yandexの。Metricaデータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandexの。Metricaデータ</a> </nav> </div> <a href=../../getting_started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../getting_started/playground/ title=遊び場 class="nav-link text-light text-wrap d-inline-block w-100 px-0">遊び場</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../interfaces/cli/ title=コマンドライン class="nav-link text-light text-wrap d-inline-block w-100 px-0">コマンドライン</a> <a href=../../interfaces/tcp/ title=ネイティブインタフェース(TCP) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネイティブインタフェース(TCP)</a> <a href=../../interfaces/http/ title=HTTPインター class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTPインター</a> <a href=../../interfaces/mysql/ title=MySQLイン class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQLイン</a> <a href=../../interfaces/formats/ title=入力および出力形式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力および出力形式</a> <a href=../../interfaces/jdbc/ title=JDBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBCドライバ</a> <a href=../../interfaces/odbc/ title=ODBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBCドライバ</a> <a href=../../interfaces/cpp/ title=C++クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++クライアント</a> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../interfaces/third-party/client_libraries/ title=クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">クライアント</a> <a href=../../interfaces/third-party/integrations/ title=統合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">統合</a> <a href=../../interfaces/third-party/gui/ title=ビジュアル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビジュアル</a> <a href=../../interfaces/third-party/proxy/ title=プロキシ class="nav-link text-light text-wrap d-inline-block w-100 px-0">プロキシ</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../engines/table_engines/mergetree_family/replication/ title=データ複製 class="nav-link text-light text-wrap d-inline-block w-100 px-0">データ複製</a> <a href=../../engines/table_engines/mergetree_family/custom_partitioning_key/ title=カスタム分割キー class="nav-link text-light text-wrap d-inline-block w-100 px-0">カスタム分割キー</a> <a href=../../engines/table_engines/mergetree_family/replacingmergetree/ title=ﾂつｨﾂ姪 ﾂつ&quot;ﾂ債ﾂつｹ&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつｨﾂ姪"ﾂつ"ﾂ債ﾂつｹ</a> <a href=../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=ﾂつｨﾂ姪 ﾂつ&quot;ﾂ債ﾂづｭﾂつｹ&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつｨﾂ姪"ﾂつ"ﾂ債ﾂづｭﾂつｹ</a> <a href=../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/graphitemergetree/ title=グラフィットメールグツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">グラフィットメールグツリー</a> </nav> </div> <a href=#sidebar-sidebar-5-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../engines/table_engines/log_family/log_family/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../engines/table_engines/log_family/stripelog/ title=ストリップログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ストリップログ</a> <a href=../../engines/table_engines/log_family/log/ title=ログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ログ</a> <a href=../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../engines/table_engines/integrations/kafka/ title=カフカname class="nav-link text-light text-wrap d-inline-block w-100 px-0">カフカname</a> <a href=../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../engines/table_engines/special/distributed/ title=分散 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分散</a> <a href=../../engines/table_engines/special/external_data/ title=外部データ class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部データ</a> <a href=../../engines/table_engines/special/dictionary/ title=辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書</a> <a href=../../engines/table_engines/special/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../engines/table_engines/special/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../engines/table_engines/special/null/ title=ヌル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ヌル</a> <a href=../../engines/table_engines/special/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../engines/table_engines/special/join/ title=参加 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参加</a> <a href=../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../engines/table_engines/special/view/ title=ビュー class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビュー</a> <a href=../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../engines/table_engines/special/memory/ title=メモリ class="nav-link text-light text-wrap d-inline-block w-100 px-0">メモリ</a> <a href=../../engines/table_engines/special/buffer/ title=バッファ class="nav-link text-light text-wrap d-inline-block w-100 px-0">バッファ</a> <a href=../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/database_engines/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/database_engines/lazy/ title=怠け者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">怠け者</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../sql_reference/statements/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../sql_reference/statements/misc/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> </nav> </div> <a href=../../sql_reference/syntax/ title=構文 class="nav-link text-light text-wrap d-inline-block w-100 px-0">構文</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../sql_reference/functions/arithmetic_functions/ title=算数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算数</a> <a href=../../sql_reference/functions/comparison_functions/ title=比較 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比較</a> <a href=../../sql_reference/functions/logical_functions/ title=論理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">論理</a> <a href=../../sql_reference/functions/type_conversion_functions/ title=タイプ変換 class="nav-link text-light text-wrap d-inline-block w-100 px-0">タイプ変換</a> <a href=../../sql_reference/functions/date_time_functions/ title=日付と時刻の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付と時刻の操作</a> <a href=../../sql_reference/functions/string_functions/ title=文字列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列の操作</a> <a href=../../sql_reference/functions/string_search_functions/ title=文字列を検索する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列を検索する場合</a> <a href=../../sql_reference/functions/string_replace_functions/ title=文字列で置換する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列で置換する場合</a> <a href=../../sql_reference/functions/conditional_functions/ title=条件付き class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件付き</a> <a href=../../sql_reference/functions/math_functions/ title=数学 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学</a> <a href=../../sql_reference/functions/rounding_functions/ title=丸め class="nav-link text-light text-wrap d-inline-block w-100 px-0">丸め</a> <a href=../../sql_reference/functions/array_functions/ title=配列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列の操作</a> <a href=../../sql_reference/functions/splitting_merging_functions/ title=文字列と配列の分割とマージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列と配列の分割とマージ</a> <a href=../../sql_reference/functions/bit_functions/ title=ビット class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビット</a> <a href=../../sql_reference/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../sql_reference/functions/hash_functions/ title=ハッシュ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハッシュ</a> <a href=../../sql_reference/functions/random_functions/ title=擬似乱数の生成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">擬似乱数の生成</a> <a href=../../sql_reference/functions/encoding_functions/ title=エンコード class="nav-link text-light text-wrap d-inline-block w-100 px-0">エンコード</a> <a href=../../sql_reference/functions/uuid_functions/ title=UUIDの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUIDの操作</a> <a href=../../sql_reference/functions/url_functions/ title=Urlの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Urlの操作</a> <a href=../../sql_reference/functions/ip_address_functions/ title=IPアドレスの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPアドレスの操作</a> <a href=../../sql_reference/functions/json_functions/ title=JSONでの作業 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSONでの作業</a> <a href=../../sql_reference/functions/higher_order_functions/ title=より高い次数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">より高い次数</a> <a href=../../sql_reference/functions/ext_dict_functions/ title=外部辞書の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書の操作</a> <a href=../../sql_reference/functions/ym_dict_functions/ title=Yandexのでの作業。メトリカ辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandexのでの作業。メトリカ辞書</a> <a href=../../sql_reference/functions/in_functions/ title=IN演算子の実装 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN演算子の実装</a> <a href=../../sql_reference/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../sql_reference/functions/geo/ title=地理座標の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">地理座標の操作</a> <a href=../../sql_reference/functions/functions_for_nulls/ title=ヌル可能な引数の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ヌル可能な引数の操作</a> <a href=../../sql_reference/functions/machine_learning_functions/ title=機械学習の機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">機械学習の機能</a> <a href=../../sql_reference/functions/introspection/ title=イントロスペクション class="nav-link text-light text-wrap d-inline-block w-100 px-0">イントロスペクション</a> <a href=../../sql_reference/functions/other_functions/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/aggregate_functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../sql_reference/aggregate_functions/reference/ title=参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参照</a> <a href=../../sql_reference/aggregate_functions/combinators/ title=集計関数のコンビネータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">集計関数のコンビネータ</a> <a href=../../sql_reference/aggregate_functions/parametric_functions/ title=パラメトリック集計関数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">パラメトリック集計関数</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/table_functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../sql_reference/table_functions/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../sql_reference/table_functions/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../sql_reference/table_functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../sql_reference/table_functions/remote/ title=リモート class="nav-link text-light text-wrap d-inline-block w-100 px-0">リモート</a> <a href=../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../sql_reference/table_functions/input/ title=入力 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力</a> <a href=../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/dictionaries/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title=一般的な説明 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な説明</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title=外部ディクショナリの設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部ディクショナリの設定</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title=辞書をメモリに保存する class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書をメモリに保存する</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title=辞書の更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書の更新</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title=外部辞書のソース class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書のソース</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title=辞書のキーとフィールド class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書のキーとフィールド</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title=階層辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">階層辞書</a> </nav> </div> <a href=../../sql_reference/dictionaries/internal_dicts/ title=内部辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部辞書</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../sql_reference/data_types/int_uint/ title=UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64</a> <a href=../../sql_reference/data_types/float/ title=Float32,Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32,Float64</a> <a href=../../sql_reference/data_types/decimal/ title=小数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">小数</a> <a href=../../sql_reference/data_types/boolean/ title=ブール値 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ブール値</a> <a href=../../sql_reference/data_types/string/ title=文字列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列</a> <a href=../../sql_reference/data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../sql_reference/data_types/date/ title=日付 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付</a> <a href=../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../sql_reference/data_types/enum/ title=列挙型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">列挙型</a> <a href=../../sql_reference/data_types/array/ title=配列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列(T)</a> <a href=../../sql_reference/data_types/aggregatefunction/ title=AggregateFunction(name,types_of_arguments)...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name,types_of_arguments)...)</a> <a href=../../sql_reference/data_types/tuple/ title=タプル(T1,T2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">タプル(T1,T2,...)</a> <a href=#sidebar-sidebar-6-8-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-6-8-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/nested_data_structures/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../sql_reference/data_types/nested_data_structures/nested/ title=ネスト(Name1タイプ1,Name2タイプ2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネスト(Name1タイプ1,Name2タイプ2,...)</a> </nav> </div> <a href=../../sql_reference/data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-6-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-6-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/special_data_types/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../sql_reference/data_types/special_data_types/expression/ title=式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">式</a> <a href=../../sql_reference/data_types/special_data_types/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../sql_reference/data_types/special_data_types/nothing/ title=何もない class="nav-link text-light text-wrap d-inline-block w-100 px-0">何もない</a> <a href=../../sql_reference/data_types/special_data_types/interval/ title=間隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">間隔</a> </nav> </div> <a href=#sidebar-sidebar-6-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../sql_reference/data_types/domains/overview/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../sql_reference/operators/ title=演算子 class="nav-link text-light text-wrap d-inline-block w-100 px-0">演算子</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../guides/apply_catboost_model/ title=CatBoostモデルの適用 class="nav-link text-light text-wrap d-inline-block w-100 px-0">CatBoostモデルの適用</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../operations/requirements/ title=要件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要件</a> <a href=../../operations/monitoring/ title=監視 class="nav-link text-light text-wrap d-inline-block w-100 px-0">監視</a> <a href=../../operations/troubleshooting/ title=トラブル class="nav-link text-light text-wrap d-inline-block w-100 px-0">トラブル</a> <a href=../../operations/update/ title=クリックハウス更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウス更新</a> <a href=../../operations/access_rights/ title=アクセス権 class="nav-link text-light text-wrap d-inline-block w-100 px-0">アクセス権</a> <a href=../../operations/backup/ title=データバック class="nav-link text-light text-wrap d-inline-block w-100 px-0">データバック</a> <a href=../../operations/configuration_files/ title=設定ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定ファイル</a> <a href=../../operations/quotas/ title=クォータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">クォータ</a> <a href=#sidebar-sidebar-8-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-10 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-8-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../operations/optimizing_performance/sampling_query_profiler/ title=Queryプロファイリング class="nav-link text-light text-wrap d-inline-block w-100 px-0">Queryプロファイリング</a> </nav> </div> <a href=../../operations/system_tables/ title=システム表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">システム表</a> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_configuration_parameters/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../operations/server_configuration_parameters/settings/ title=サーバー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">サーバー設定</a> </nav> </div> <a href=../../operations/performance_test/ title=ハードウェア試験 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハードウェア試験</a> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../operations/settings/permissions_for_queries/ title=クエリの権限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの権限</a> <a href=../../operations/settings/query_complexity/ title=クエリの複雑さの制限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの複雑さの制限</a> <a href=../../operations/settings/settings/ title=設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定</a> <a href=../../operations/settings/settings_profiles/ title=設定プロファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定プロファイル</a> <a href=../../operations/settings/constraints_on_settings/ title=設定の制約 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定の制約</a> <a href=../../operations/settings/settings_users/ title=ユーザー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ユーザー設定</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utilities/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../operations/utilities/clickhouse-copier/ title=クリックハウスコピー機 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウスコピー機</a> <a href=../../operations/utilities/clickhouse-local/ title=ﾂつ ﾂづ按つｵﾂ！&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつ"ﾂづ按つｵﾂ！</a> <a href=../../operations/utilities/clickhouse-benchmark/ title=clickhouse-ベンチマーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-ベンチマーク</a> </nav> </div> <a href=../../operations/tips/ title=使用の推奨事項 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用の推奨事項</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../development/developer_instruction/ title=初心者の方ClickHouse開発者の指示 class="nav-link text-light text-wrap d-inline-block w-100 px-0">初心者の方ClickHouse開発者の指示</a> <a href=../../development/architecture/ title=クリックハウスの概要 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">クリックハウスの概要</a> <a href=../../development/browse_code/ title=ClickHouseのソースコードを参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseのソースコードを参照</a> <a href=../../development/build/ title=LinuxでClickHouseを構築する方法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">LinuxでClickHouseを構築する方法</a> <a href=../../development/build_osx/ title="Mac OS XでClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS XでClickHouseを構築する方法</a> <a href=../../development/build_cross_osx/ title="Mac OS X用のLinuxでClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS X用のLinuxでClickHouseを構築する方法</a> <a href=../../development/build_cross_arm/ title=AARCH64用LinuxでClickHouseをビルドする方法（ARM64) class="nav-link text-light text-wrap d-inline-block w-100 px-0">AARCH64用LinuxでClickHouseをビルドする方法（ARM64)</a> <a href=../../development/style/ title=C++コードの書き方 class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++コードの書き方</a> <a href=../../development/tests/ title=ClickHouseテストを実行する方法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseテストを実行する方法</a> <a href=../../development/contrib/ title=サードパーティ製ライブラリ class="nav-link text-light text-wrap d-inline-block w-100 px-0">サードパーティ製ライブラリ</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../commercial/cloud/ title=ClickHouseしてクラウドサービスプロバイダ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseしてクラウドサービスプロバイダ</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../whats_new/roadmap/ title=ロードマップ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ロードマップ</a> <a href=../../whats_new/security_changelog/ title=セキュリティの変更履歴 class="nav-link text-light text-wrap d-inline-block w-100 px-0">セキュリティの変更履歴</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../faq/general/ title=一般的な質問 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な質問</a> </nav> </div> <a href=../../single/clickhouse_ja.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDFバージョン title=PDFバージョン height=24 class="d-block mr-1 float-left"><div>PDFバージョン</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">助けが欲しかった！</p> <p class=lead>このドキュメントページの以下の内容は機械翻訳されています。 異な他のウェブサイトで行われませんができます。 この翻訳テキスト生活をGitHubリポジトリとClickHouseコードベース、待ち員ネイティブスピーカーで人間が読む.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/development/architecture.md target=_blank rel="external nofollow noreferrer"> このページを編集してClickHouseの文書を編集する </a> </p> </div> <h1 id=overview-of-clickhouse-architecture>クリックハウスの概要<a class=headerlink href=#overview-of-clickhouse-architecture title="Permanent link">&para;</a></h1> <p>ClickHouseは真の列指向DBMSです。 データは、列によって、および配列（ベクトルまたは列のチャンク）の実行中に格納されます。 可能な限り、操作は個々の値ではなく、配列にディスパッチされます。 それは呼ばれます “vectorized query execution,” そしてそれは実際のデータ処理の費用を下げるのを助けます。</p> <blockquote> <p>この考え方は、新しいものではない。 それはに遡ります <code>APL</code> プログラミング言語とその子孫: <code>A +</code>, <code>J</code>, <code>K</code>、と <code>Q</code>. 配列プログラミングは科学的データ処理に使用されます。 このアイデアは、リレーショナルデータベースで新しいものでもありません。 <code>Vectorwise</code> システム。</p> </blockquote> <p>クエリ処理の高速化には、vectorizedクエリの実行とランタイムコードの生成という二つのアプローチがあります。 後者は、すべての間接指定と動的ディスパッチを削除します。 ずれのアプローチは厳重によります。 ランタイムコードを生成するときにヒューズが多く、業務として活用cpuの実行単位のパイプライン vectorizedクエリを実行できる実用的では一時的ベクトルを明記のことは、キャッシュを読みます。 一時的なデータがl2キャッシュに収まらない場合、これが問題になります。 しかし、ベクトル化されたクエリの実行は、cpuのsimd機能をより簡単に利用します。 a <a href=http://15721.courses.cs.cmu.edu/spring2016/papers/p5-sompolski.pdf rel="external nofollow noreferrer">研究論文</a> 書面による友人達しないことであり、両アプローチ。 ClickHouse用vectorizedクエリを実行して初期支援のためにランタイムコード。</p> <h2 id=columns>列<a class=headerlink href=#columns title="Permanent link">&para;</a></h2> <p><code>IColumn</code> interfaceは、メモリ内の列（実際には列のチャンク）を表すために使用されます。 このインタフェースのヘルパーの方法の実施のための様々な関係です。 ほとんどすべての操作は不変です：元の列は変更されませんが、新しい変更された列を作成します。 たとえば、 <code>IColumn :: filter</code> 法を受け入れフィルタのバイトマスクです。 それはのために使用されます <code>WHERE</code> と <code>HAVING</code> 関係演算子。 その他の例： <code>IColumn :: permute</code> サポートする方法 <code>ORDER BY</code>、を <code>IColumn :: cut</code> サポートする方法 <code>LIMIT</code>.</p> <p>様々な <code>IColumn</code> 実装 (<code>ColumnUInt8</code>, <code>ColumnString</code>、というように）列のメモリレイアウトを担当しています。 メモリレイアウトは、通常、連続した配列です。 列の整数型の場合、次のような連続した配列にすぎません <code>std :: vector</code>. のために <code>String</code> と <code>Array</code> すべての配列要素のベクトル、連続して配置されたベクトル、および各配列の先頭にオフセットするためのベクトルです。 また、 <code>ColumnConst</code> これはメモリに一つの値だけを格納しますが、列のように見えます。</p> <h2 id=field>フィールド<a class=headerlink href=#field title="Permanent link">&para;</a></h2> <p>それにもかかわらず、個々の価値を扱うことも可能です。 個々の値を表すには、 <code>Field</code> 使用される。 <code>Field</code> のちょうど差別された組合である <code>UInt64</code>, <code>Int64</code>, <code>Float64</code>, <code>String</code> と <code>Array</code>. <code>IColumn</code> は、 <code>operator[]</code> n番目の値をaとして取得するメソッド <code>Field</code> そして <code>insert</code> aを追加するメソッド <code>Field</code> 列の終わりまで。 これらの方法はあまり効率的ではありません。 <code>Field</code> 個々の値を表すオブジェクト。 より効率的な方法があります。 <code>insertFrom</code>, <code>insertRangeFrom</code>、というように。</p> <p><code>Field</code> テーブルの特定のデータ型に関する十分な情報がありません。 例えば, <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>、と <code>UInt64</code> すべてとして表されます <code>UInt64</code> で <code>Field</code>.</p> <h2 id=leaky-abstractions>漏れやすい抽象化<a class=headerlink href=#leaky-abstractions title="Permanent link">&para;</a></h2> <p><code>IColumn</code> は方法のための共通の関係変容のデータもあるんですが、そのすべて満たす。 例えば, <code>ColumnUInt64</code> 二つの列の合計を計算する方法を持っていない、と <code>ColumnString</code> 部分文字列検索を実行するメソッドはありません。 これらの無数のルーチンは、 <code>IColumn</code>.</p> <p>列のさまざまな関数は、次のように一般的で効率的でない方法で実装できます <code>IColumn</code> 抽出する方法 <code>Field</code> 値、または特定のデータの内部メモリレイアウトの知識を使用して、特殊な方法で <code>IColumn</code> 実装。 これは、関数を特定の <code>IColumn</code> 内部表現を直接入力して処理する。 例えば, <code>ColumnUInt64</code> は、 <code>getData</code> 内部配列への参照を返し、別のルーチンがその配列を直接読み取ったり塗りつぶしたりするメソッドです。 我々は持っている “leaky abstractions” さまざまなルーチンの効率的な専門化を可能にする。</p> <h2 id=data_types>データ型<a class=headerlink href=#data_types title="Permanent link">&para;</a></h2> <p><code>IDataType</code> バイナリ形式またはテキスト形式で列または個々の値のチャンクを読み書きするためのシリアル化と逆シリアル化を担当します。 <code>IDataType</code> テーブルのデータ型に直接対応します。 たとえば、次のとおりです <code>DataTypeUInt32</code>, <code>DataTypeDateTime</code>, <code>DataTypeString</code> というように。</p> <p><code>IDataType</code> と <code>IColumn</code> 互いにゆるやかに関係しているだけです 異なるデータ型は同じでメモリ内に表すことができます <code>IColumn</code> 実装。 例えば, <code>DataTypeUInt32</code> と <code>DataTypeDateTime</code> どちらも <code>ColumnUInt32</code> または <code>ColumnConstUInt32</code>. また、同じデータ型を異なるデータ型で表すこともできます <code>IColumn</code> 実装。 例えば, <code>DataTypeUInt8</code> で表すことができます <code>ColumnUInt8</code> または <code>ColumnConstUInt8</code>.</p> <p><code>IDataType</code> 貨物のメタデータを指すものとします。 例えば, <code>DataTypeUInt8</code> 何も全く保存しません(vptrを除きます)。 <code>DataTypeFixedString</code> 店だけ <code>N</code> （固定サイズの文字列のサイズ）。</p> <p><code>IDataType</code> はヘルパーの方法のための様々なデータフォーマット たとえば、引用符で値をシリアル化したり、JSONの値をシリアル化したり、XML形式の一部として値をシリアル化したりするメソッドがあります。 データ形式への直接の対応はありません。 たとえば、さまざまなデータ形式 <code>Pretty</code> と <code>TabSeparated</code> 同じを使用できます <code>serializeTextEscaped</code> からヘルパーメソッド <code>IDataType</code> インタフェース</p> <h2 id=block>ブロック<a class=headerlink href=#block title="Permanent link">&para;</a></h2> <p>A <code>Block</code> メモリ内のテーブルのサブセット(チャンク)を表すコンテナです。 それはちょうどトリプルのセットです: <code>(IColumn, IDataType, column name)</code>. クエリの実行中、データは次の方法で処理されます <code>Block</code>我々が持っている場合 <code>Block</code>、我々はデータを持っている（で <code>IColumn</code> オブジェクト）、そのタイプに関する情報があります <code>IDataType</code>）それはその列をどう扱うかを教えてくれるので、列名があります。 テーブルの元の列名か、計算の一時的な結果を得るために割り当てられた人工的な名前のいずれかになります。</p> <p>ブロック内の列に対していくつかの関数を計算すると、その結果を持つ別の列がブロックに追加され、関数の引数の列には触れません。 その後、不要な列はブロックから削除できますが、変更はできません。 それは共通の部分式の除去のために便利です。</p> <p>ブロックの作成のための各処理チャンクのデータです。 同じタイプの計算では、列名とタイプは異なるブロックで同じままで、列データのみが変更されることに注意してください。 ブロックヘッダーからブロックデータを分割する方が良いのは、小さなブロックサイズでは、shared_ptrsと列名をコピーするための一時文字列のオーバーヘッドが</p> <h2 id=block-streams>ブロックの流れ<a class=headerlink href=#block-streams title="Permanent link">&para;</a></h2> <p>ブロッ を使用していま流のブロックからデータを読み込むためのどこかに、データ変換、または書き込みデータをどこかということです。 <code>IBlockInputStream</code> は、 <code>read</code> 利用可能な間に次のブロックを取得するメソッドです。 <code>IBlockOutputStream</code> は、 <code>write</code> ブロックをどこかにプッシュする方法。</p> <p>ストリー:</p> <ol> <li>テーブルへの読み書き。 のテーブルだけを返しますストリームを読み取りまたは書き込みブロックとなります。</li> <li>データ形式の実装。 たとえば、データを端末に出力する場合は、 <code>Pretty</code> ブロックをプッシュするブロック出力ストリームを作成し、それらをフォーマットします。</li> <li>データ変換の実行。 たとえば、 <code>IBlockInputStream</code> いを作ろうというストリームです。 あなたが作成する <code>FilterBlockInputStream</code> ストリームで初期化します。 その後、ブロックを引き出すと <code>FilterBlockInputStream</code> で引きブロックからストリーム、フィルタでは、フィルタを返しますブロックします。 クエリの実行パイプラインで表現しました。</li> </ol> <p>より洗練された変換があります。 たとえば、あなたから引くとき <code>AggregatingBlockInputStream</code> ソースからすべてのデータを読み取り、集計してから、集計データのストリームを返します。 別の例: <code>UnionBlockInputStream</code> コンストラクタ内の多数の入力ソースと、多数のスレッドを受け入れます。 複数のスレッドを起動し、複数のソースから並行して読み取ります。</p> <blockquote> <p>ブロックストリームは、 “pull” 制御フローへのアプローチ：最初のストリームからブロックをプルすると、ネストされたストリームから必要なブロックがプルされ、実行パイプライン全体 どちらも “pull” また “push” 制御フローは暗黙的であり、複数のクエリの同時実行（多くのパイプラインを一緒にマージする）などのさまざまな機能の実装を制限するため、最適なソ この制限は、コルーチンや、お互いを待つ余分なスレッドを実行するだけで克服することができます。 ある計算単位から別の計算単位にデータを渡すためのロジックを特定すると、制御フローを明示的にすると、より多くの可能性があります。 これを読む <a href=http://journal.stuffwithstuff.com/2013/01/13/iteration-inside-and-out/ rel="external nofollow noreferrer">記事</a> より多くの思考のために。</p> </blockquote> <p>クエリ実行パイプラインは、各ステップで一時的なデータを作成します。 ブロックサイズを十分に小さくして、一時的なデータがcpuキャッシュに収まるようにします。 その仮定では、一時的なデータの書き込みと読み取りは、他の計算と比較してほとんど無料です。 したことを検討してはどうかと思うの代替、ヒューズの多くの業務のパイプラインです。 パイプラインをできるだけ短くし、一時的なデータの多くを削除することができますが、これは利点かもしれませんが、欠点もあります。 たとえば、分割パイプラインを使用すると、中間データのキャッシュ、同時に実行される類似クエリからの中間データの盗み取り、類似クエリのパイプラ</p> <h2 id=formats>形式<a class=headerlink href=#formats title="Permanent link">&para;</a></h2> <p>データフォーマットにて実施しブロックわれている。 あります “presentational” 次のように、クライアントへのデータの出力にのみ適した書式を設定します <code>Pretty</code> のみを提供する形式 <code>IBlockOutputStream</code>. また、次のような入力/出力形式があります <code>TabSeparated</code> または <code>JSONEachRow</code>.</p> <p>行ストリームもあります: <code>IRowInputStream</code> と <code>IRowOutputStream</code>. ブロックではなく、個々の行でデータをプル/プッシュすることができます。 また、行指向のフォーマットの実装を単純化するためにのみ必要です。 その他の機能 <code>BlockInputStreamFromRowInputStream</code> と <code>BlockOutputStreamFromRowOutputStream</code> 行指向のストリームを通常のブロック指向のストリームに変換できます。</p> <h2 id=io>I/O<a class=headerlink href=#io title="Permanent link">&para;</a></h2> <p>バイト指向の入出力には、以下のものがあります <code>ReadBuffer</code> と <code>WriteBuffer</code> 抽象クラス。 それらはC++の代わりに使用されます <code>iostream</code>すべての成熟したC++プロジェクトは、 <code>iostream</code>良い理由のためのs。</p> <p><code>ReadBuffer</code> と <code>WriteBuffer</code> 単に連続したバッファであり、そのバッファ内の位置を指すカーソルです。 実装にはない独自のメモリにバッファです。 バッファに次のデータを入力するための仮想メソッドがあります <code>ReadBuffer</code> または、バッファをどこかにフラッシュする（ <code>WriteBuffer</code>). 仮想手法が呼び出されます。</p> <p>の実装 <code>ReadBuffer</code>/<code>WriteBuffer</code> 使用ファイルを操作するため、ファイル記述子およびネットワークソケット実施のための圧縮 (<code>CompressedWriteBuffer</code> is initialized with another WriteBuffer and performs compression before writing data to it), and for other purposes – the names <code>ConcatReadBuffer</code>, <code>LimitReadBuffer</code>、と <code>HashingWriteBuffer</code> 自分のために話す。</p> <p>Read/WriteBuffersはバイトのみを処理します。 からの機能があります <code>ReadHelpers</code> と <code>WriteHelpers</code> 入力/出力の書式設定に役立つヘッダーファイル。 たとえば、decimal形式で数値を書くヘルパーがあります。</p> <p>結果セットを書きたいときに何が起こるかを見てみましょう <code>JSON</code> 標準出力にフォーマットします。 あなたは結果セットをフェッチする準備ができています <code>IBlockInputStream</code>. あなたが作成する <code>WriteBufferFromFileDescriptor(STDOUT_FILENO)</code> stdoutにバイトを書き込む。 あなたが作成する <code>JSONRowOutputStream</code>、それで初期化 <code>WriteBuffer</code>、行を書き込む <code>JSON</code> stdoutに。 あなたが作成する <code>BlockOutputStreamFromRowOutputStream</code> その上に、としてそれを表すために <code>IBlockOutputStream</code>. その後、呼び出す <code>copyData</code> からデータを転送するには <code>IBlockInputStream</code> に <code>IBlockOutputStream</code>、そしてすべてが動作します。 内部的には, <code>JSONRowOutputStream</code> さまざまなJSON区切り文字を書き込み、 <code>IDataType::serializeTextJSON</code> への参照を持つメソッド <code>IColumn</code> そして、引数として行番号。 その結果, <code>IDataType::serializeTextJSON</code> からメソッドを呼び出します <code>WriteHelpers.h</code>：例えば, <code>writeText</code> 数値型の場合 <code>writeJSONString</code> のために <code>DataTypeString</code>.</p> <h2 id=tables>テーブル<a class=headerlink href=#tables title="Permanent link">&para;</a></h2> <p>その <code>IStorage</code> インタフェースです。 異なる実装のインタフェースの異なるテーブルエンジンです。 例としては <code>StorageMergeTree</code>, <code>StorageMemory</code>、というように。 これらのクラスのインスタ</p> <p>キー <code>IStorage</code> 方法は <code>read</code> と <code>write</code>. また、 <code>alter</code>, <code>rename</code>, <code>drop</code>、というように。 その <code>read</code> メソッドは次の引数を受け取ります:テーブルから読み取る列のセット。 <code>AST</code> 検討するクエリ、および返すストリームの必要数。 一つまたは複数を返します <code>IBlockInputStream</code> クエリの実行中にテーブルエンジン内で完了したデータ処理のステージに関するオブジェクトと情報。</p> <p>ほとんどの場合、readメソッドは、それ以降のデータ処理ではなく、テーブルから指定された列を読み取るだけです。 すべてのデータ処理が行われるクエリの通訳や外部の責任 <code>IStorage</code>.</p> <p>しかし、顕著な例外があります:</p> <ul> <li>ASTクエリは、 <code>read</code> 法により処理し、テーブルエンジンを使用できる指の利用と読みの少ないデータを表示します。</li> <li>時々のテーブルエンジンを処理できるデータそのものである場合でも特定の段階にある。 例えば, <code>StorageDistributed</code> クエリをリモートサーバーに送信し、異なるリモートサーバーのデータをマージできるステージにデータを処理するように要求し、その前処理されたデータを返すことが クエリの通訳を仕上げ加工のデータです。</li> </ul> <p>テーブルの <code>read</code> メソッドは、複数の <code>IBlockInputStream</code> 並列データ処理を可能にするオブジェクト。 これらの複数のブロックの入力ストリームでテーブルから行なった。 次に、これらのストリームを、独立して計算して作成できるさまざまな変換(式の評価やフィルター処理など)でラップできます。 <code>UnionBlockInputStream</code> それらの上に、並行して複数のストリームから読み取ります。</p> <p>また、 <code>TableFunction</code>s.これらは一時的な関数を返す関数です。 <code>IStorage</code> で使用するオブジェクト <code>FROM</code> クエリの句。</p> <p>テーブルエンジンを実装する方法を簡単に知るには、次のような単純なものを見てください <code>StorageMemory</code> または <code>StorageTinyLog</code>.</p> <blockquote> <p>の結果として <code>read</code> 方法, <code>IStorage</code> を返します <code>QueryProcessingStage</code> – information about what parts of the query were already calculated inside storage.</p> </blockquote> <h2 id=parsers>パーサー<a class=headerlink href=#parsers title="Permanent link">&para;</a></h2> <p>手書きの再帰的降下パーサーは、クエリを解析します。 例えば, <code>ParserSelectQuery</code> クエリのさまざまな部分の基礎となるパーサーを再帰的に呼び出すだけです。 パーサーは <code>AST</code>. その <code>AST</code> ノードによって表されます。 <code>IAST</code>.</p> <blockquote> <p>パーサジェネレータは、使用しない歴史的な理由があります。</p> </blockquote> <h2 id=interpreters>通訳者<a class=headerlink href=#interpreters title="Permanent link">&para;</a></h2> <p>クエリ実行パ <code>AST</code>. 以下のような単純な通訳があります <code>InterpreterExistsQuery</code> と <code>InterpreterDropQuery</code> または、より洗練された <code>InterpreterSelectQuery</code>. クエリの実行パイプラインの組み合わせたブロック入力または出力ストリーム. たとえば、次のように解釈されます。 <code>SELECT</code> クエリは、 <code>IBlockInputStream</code> 結果セットを読み取るには、INSERTクエリの結果は次のようになります。 <code>IBlockOutputStream</code> に挿入するためのデータを書き込むには、 <code>INSERT SELECT</code> クエリは、 <code>IBlockInputStream</code> これは、最初の読み取りで空の結果セットを返しますが、データをコピーします <code>SELECT</code> に <code>INSERT</code> 同時に。</p> <p><code>InterpreterSelectQuery</code> 使用 <code>ExpressionAnalyzer</code> と <code>ExpressionActions</code> クエリ分析と変換のための機械。 これは、ほとんどのルールベースのクエリ最適化が行われる場所です。 <code>ExpressionAnalyzer</code> モジュラー変換やクエリを可能にするために、さまざまなクエリ変換と最適化を別々のクラスに抽出する必要があります。</p> <h2 id=functions>機能<a class=headerlink href=#functions title="Permanent link">&para;</a></h2> <p>通常の関数と集約関数があります。 集計関数は、次のセクションを参照してください。</p> <p>Ordinary functions don't change the number of rows – they work as if they are processing each row independently. In fact, functions are not called for individual rows, but for <code>Block</code>ベクトル化されたクエリ実行を実装するためのデータです。</p> <p>いくつかの雑多な機能があります <a href=../../sql_reference/functions/other_functions/#function-blocksize>ブロックサイズ</a>, <a href=../../sql_reference/functions/other_functions/#function-rownumberinblock>rowNumberInBlock</a>、と <a href=../../sql_reference/functions/other_functions/#function-runningaccumulate>runningAccumulate</a>、それはブロック処理を悪用し、行の独立性に違反します。</p> <p>ClickHouseには厳密な型指定があるため、暗黙の型変換はありません。 関数が型の特定の組み合わせをサポートしていない場合は、例外がスローされます。 ものの機能で作業する過負荷のもとに多くの異なる組み合わせます。 たとえば、 <code>plus</code> 機能(実装するには <code>+</code> 演算子）数値型の任意の組み合わせに対して機能します: <code>UInt8</code> + <code>Float32</code>, <code>UInt16</code> + <code>Int8</code>、というように。 また、いくつかの可変個引数関数は、任意の数の引数を受け入れることができます。 <code>concat</code> 機能。</p> <p>実施の機能が少し不便での機能を明示的に派遣サポートされているデータの種類と対応 <code>IColumns</code>. たとえば、 <code>plus</code> 関数は、数値型の各組み合わせのためのC++テンプレートのインスタンス化によって生成されたコードを持っており、定数または非定数左右引数。</p> <p>優れた場所をランタイムコード生成を避けるテンプレートコードで膨張. また、fused multiply-addようなfused関数を追加したり、あるループ反復で多重比較を行うこともできます。</p> <p>ベクトル化されたクエリの実行により、関数は短絡されません。 たとえば、次のように書くと <code>WHERE f(x) AND g(y)</code>、両側は、行に対しても計算されます。 <code>f(x)</code> はゼロです(ただし、 <code>f(x)</code> はゼロ定数式である。 しかしの選択率 <code>f(x)</code> 条件が高い、との計算 <code>f(x)</code> よりもはるかに安いです <code>g(y)</code>、それはマルチパス計算を実装する方が良いでしょう。 それは最初に計算します <code>f(x)</code>、その後、結果によって列をフィルタリングし、計算 <code>g(y)</code> フィルター処理された小さいデータチャンクのみ。</p> <h2 id=aggregate-functions>集計関数<a class=headerlink href=#aggregate-functions title="Permanent link">&para;</a></h2> <p>集計関数はステートフル関数です。 渡された値をある状態に蓄積し、その状態から結果を得ることができます。 それらはと管理されます <code>IAggregateFunction</code> インタフェース 状態はかなり単純なものにすることができます <code>AggregateFunctionCount</code> 単なる <code>UInt64</code> 値)または非常に複雑な(の状態 <code>AggregateFunctionUniqCombined</code> は、線形配列、ハッシュテーブル、および <code>HyperLogLog</code> 確率的データ構造）。</p> <p>状態は <code>Arena</code> 高カーディナリティを実行しながら複数の状態を処理する（メモリプール） <code>GROUP BY</code> クエリ。 たとえば、複雑な集計状態では、追加のメモリ自体を割り当てることができます。 それは、州を創設し、破壊し、所有権と破壊秩序を適切に渡すことにある程度の注意を払う必要があります。</p> <p>分散クエリの実行中にネットワーク経由で渡すか、十分なramがないディスクに書き込むために、集約状態をシリアル化および逆シリアル化できます。 それらはテーブルで貯えることができます <code>DataTypeAggregateFunction</code> データの増分集計を可能にする。</p> <blockquote> <p>集計関数状態のシリアル化されたデータ形式は、現在バージョン化されていません。 集約状態が一時的にのみ格納されている場合は問題ありません。 しかし、我々は持っている <code>AggregatingMergeTree</code> テーブルエンジンが増えた場合の集約、人々に基づき使用されている。 これは、将来の集約関数の直列化形式を変更する際に下位互換性が必要な理由です。</p> </blockquote> <h2 id=server>サーバ<a class=headerlink href=#server title="Permanent link">&para;</a></h2> <p>サーバを実装し複数の複数のインタフェース:</p> <ul> <li>外部クライアントのhttpインターフェイス。</li> <li>ネイティブclickhouseクライアント用のtcpインターフェイス、および分散クエリ実行中のサーバー間通信。</li> <li>インターフェース転送データレプリケーション.</li> </ul> <p>内部的には、コルーチンやファイバーのない原始的なマルチスレッドサーバーです。 サーバーは、単純なクエリの高いレートを処理するが、複雑なクエリの比較的低いレートを処理するように設計されていないので、それらのそれぞれは、分析</p> <p>サーバーは、 <code>Context</code> クエリ実行に必要な環境を持つクラス:利用可能なデータベース、ユーザーおよびアクセス権、設定、クラスター、プロセスリスト、クエリログなどのリスト。 通訳者はこの環境を使用します。</p> <p>古いクライアントは新しいサーバーと通信でき、新しいクライアントは古いサーバーと通信できます。 しかし、私たちは永遠にそれを維持したくない、と私たちは約一年後に古いバージョンのサポートを削除しています。</p> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>ほとんどの外部アプリケーションの利用を推奨します。http面でシンプルで使いやすいです。 tcpプロトコルは、内部データ構造により緊密にリンクされています。 そのプロトコルのcライブラリは、実用的ではないclickhouseコードベースのほとんどをリンクする必要があるため、リリースしていません。</p> </div> <h2 id=distributed-query-execution>分散クエリの実行<a class=headerlink href=#distributed-query-execution title="Permanent link">&para;</a></h2> <p>サーバーにクラスターセットアップがほぼ独立しています。 を作成することができ <code>Distributed</code> クラスター内の一つまたはすべてのサーバーの表。 その <code>Distributed</code> table does not store data itself – it only provides a “view” クラスターの複数ノード上のすべてのローカルテーブル。 から選択すると <code>Distributed</code> クエリを書き換え、ロードバランシング設定に従ってリモートノードを選択し、クエリをクエリに送信します。 その <code>Distributed</code> テーブル要求をリモートサーバー処理クエリーだけで最大のペースでの中間結果から異なるサーバできます。 その後、中間結果を受け取り、それらをマージします。 のテーブルを配布してできる限りの仕事へのリモートサーバーを送信しない多くの中間データのネットワーク.</p> <p>INまたはJOIN節にサブクエリがあり、それぞれがaを使用すると、事態はより複雑になります。 <code>Distributed</code> テーブル。 これらのクエリの実行にはさまざまな戦略があります。</p> <p>分散クエリ実行用のグローバルクエリプランはありません。 各ノ リモートノードのクエリを送信し、結果をマージします。 しかし、これは、高い基数グループbysまたは結合のための大量の一時的なデータを持つ複雑なクエリでは不可能です。 そのような場合、 “reshuffle” 追加の調整が必要なサーバー間のデータ。 ClickHouseはそのような種類のクエリ実行をサポートしておらず、その上で作業する必要があります。</p> <h2 id=merge-tree>ツリーをマージ<a class=headerlink href=#merge-tree title="Permanent link">&para;</a></h2> <p><code>MergeTree</code> 家族のストレージエンジンを支える指数付けによりその有効なタイプを利用します。 主キーは、列または式の任意のタプルにすることができます。 Aのデータ <code>MergeTree</code> テーブルは “parts”. 各パーツは主キーの順序でデータを格納するので、データは主キータプルによって辞書式で順序付けされます。 すべてのテーブル列は別々に格納されます <code>column.bin</code> これらの部分のファイル。 ファイルは圧縮ブロックで構成されます。 各ブロックは、平均値のサイズに応じて、通常64KBから1MBの非圧縮データです。 ブロックは、連続して配置された列の値で構成されます。 列の値は各列の順序が同じです（主キーで順序が定義されています）ので、多くの列で反復すると、対応する行の値が取得されます。</p> <p>主キー自体は次のとおりです “sparse”. なアドレス毎に単列、ある種のデータです。 独立した <code>primary.idx</code> ファイルには、N番目の各行の主キーの値があります。 <code>index_granularity</code> (通常、N=8192)。 また、各列について、 <code>column.mrk</code> 以下のファイル “marks,” これは、データファイル内の各N番目の行にオフセットされます。 各マークは、圧縮されたブロックの先頭にファイル内のオフセット、およびデータの先頭に圧縮解除されたブロック内のオフセットのペアです。 通常、圧縮ブロックはマークによって整列され、圧縮解除されたブロックのオフセットはゼロです。 データのための <code>primary.idx</code> 常にメモリに常駐し、データのための <code>column.mrk</code> ファイ</p> <p>我々は一部から何かを読むつもりされているとき <code>MergeTree</code>、我々は見て <code>primary.idx</code> 要求されたデータを含む可能性のあるデータと範囲を見つけ、次に <code>column.mrk</code> これらの範囲の読み取りを開始する場所のオフセットを計算します。 まばらであるため、余分なデータを読み取ることができます。 ClickHouseは、単純なポイントクエリの高負荷には適していません。 <code>index_granularity</code> 各キーに対して行を読み取り、圧縮されたブロック全体を各列に対して圧縮解除する必要があります。 インデックスのメモリ消費量が目立つことなく、単一のサーバーごとに数兆行を維持できる必要があるため、インデックスを疎にしました。 また、主キーはスパースであるため、一意ではありません。 テーブルに同じキーを持つ多くの行を持つことができます。</p> <p>ときあなた <code>INSERT</code> データの束に <code>MergeTree</code> その束は主キーの順序でソートされ、新しい部分を形成します。 が背景のスレッドを定期的に、選択部分と統合して単一のソート部の部品点数が比較的低い。 それが呼び出される理由です <code>MergeTree</code>. もちろん、マージにつながる “write amplification”. すべての部分は不変です：作成され、削除されますが、変更されません。 SELECTが実行されると、テーブル（部品のセット）のスナップショットが保持されます。 マージした後、我々はまた、我々はいくつかのマージされた部分は、おそらく壊れていることを確認した場合、我々は、そのソース部分とそれを置き換えることがで</p> <p><code>MergeTree</code> LSMツリーが含まれていないためではありません “memtable” と “log”: inserted data is written directly to the filesystem. This makes it suitable only to INSERT data in batches, not by individual row and not very frequently – about once per second is ok, but a thousand times a second is not. We did it this way for simplicity's sake, and because we are already inserting data in batches in our applications.</p> <blockquote> <p>MergeTreeテーブルには、一つの(プライマリ)インデックスしか持たせることができません。 たとえば、データを複数の物理的順序で格納したり、元のデータとともに事前に集計されたデータを使用して表現することもできます。</p> </blockquote> <p>バックグラウンドマージ中に追加作業を行っているmergetreeエンジンがあります。 例としては <code>CollapsingMergeTree</code> と <code>AggregatingMergeTree</code>. この処理として特別支援しました。 なぜなら、ユーザーは通常、バックグラウンドマージが実行される時間と、バックグラウンドマージが実行されるデータを制御できないからです。 <code>MergeTree</code> テーブルは、ほとんどの場合、完全にマージされた形式ではなく、複数の部分に格納されます。</p> <h2 id=replication>複製<a class=headerlink href=#replication title="Permanent link">&para;</a></h2> <p>ClickHouseでのレプリケーションは、テーブルごとに構成できます。 きも複製されない一部の複製のテーブルと同じサーバです。 また、テーブルをさまざまな方法でレプリケートすることもできます。</p> <p>レプリケーションは <code>ReplicatedMergeTree</code> 貯蔵エンジン。 のパス <code>ZooKeeper</code> ストレージエンジンのパラメータとして指定します。 同じパスを持つすべてのテーブル <code>ZooKeeper</code> 互いのレプリカになる：彼らは彼らのデータを同期させ、一貫性を維持する。 テーブルを作成または削除するだけで、レプリカを動的に追加および削除できます。</p> <p>レプリケーション 次のセッションを持つ任意のレプリカにデータを挿入できます <code>ZooKeeper</code> データは、他のすべてのレプリカに非同期的に複製されます。 でClickHouseをサポートしていない更新、複製する紛争は無料です。 挿入のクォーラム確認がないため、あるノードが失敗すると、挿入されたばかりのデータが失われる可能性があります。</p> <p>メタデータレプリケーションが格納され飼育係. 実行する操作を一覧表示するレプリケーションログがあります。 アクションとしては、get part、merge parts、drop partitionなどがあります。 各レプリカコピー、複製のログをキューにその行動からのキューに挿入します 例えば、挿入時には、 “get the part” actionを作成し、ログイン、レプリカのダウンロードいます。 マージはレプリカ間で調整され、バイトと同じ結果が得られます。 すべての部品を合併した場合と同様にすべてのレプリカ. では達成を補い、一つのレプリカのリーダーとして、レプリカを始めと融合し、書き込みます “merge parts” ログへのアクション。</p> <p>クエリではなく、ノード間で転送されるのは圧縮された部分だけです。 合併処理され、各レプリカ多くの場合、自主的に下げるネットワークコストを回避することによるネットワークが増幅。 大合併をさらにネットワークする場合に限り重複製に遅れて波及してきています。</p> <p>さらに、各レプリカは、部品とそのチェックサムのセットとしてzookeeperにその状態を保存します。 ローカルファイルシステム上の状態がzookeeperの参照状態から逸脱すると、レプリカは他のレプリカから欠落した部分や破損した部分をダウンロードする ローカルファイルシステムに予期しないデータや破損したデータがある場合、clickhouseはそれを削除せず、別のディレクトリに移動して忘れてしまいます。</p> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>クリックハウスクラスタは独立したシャードから成り，各シャードはレプリカから成る。 クラスタは <strong>ない弾性</strong> したがって、新しいシャードを追加した後、データは自動的にシャード間で再調整されません。 代わりに、クラスタの負荷が不均一になるように調整されるはずです。 この実装では、より多くの制御が可能になり、数十のノードなど、比較的小さなクラスタでも問題ありません。 がクラスターの何百人ものノードを用いて、生産-このアプローチが大きな欠点. を実行すべきである"と述べていテーブルエンジンで広がる、クラスターを動的に再現れる可能性がある地域分割のバランスとクラスターの動します。</p> </div> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>から構築 <a href=https://github.com/ClickHouse/ClickHouse/commit/c1558f8c18e2727c5991cf923ee79710de89d1d0 rel="external nofollow noreferrer" target=_blank class=text-reset>c1558f8c18</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>テーブルの内容</label> <a href=#columns title=列 class="nav-link text-wrap d-inline-block w-100"> 列 </a> <a href=#field title=フィールド class="nav-link text-wrap d-inline-block w-100"> フィールド </a> <a href=#leaky-abstractions title=漏れやすい抽象化 class="nav-link text-wrap d-inline-block w-100"> 漏れやすい抽象化 </a> <a href=#data_types title=データ型 class="nav-link text-wrap d-inline-block w-100"> データ型 </a> <a href=#block title=ブロック class="nav-link text-wrap d-inline-block w-100"> ブロック </a> <a href=#block-streams title=ブロックの流れ class="nav-link text-wrap d-inline-block w-100"> ブロックの流れ </a> <a href=#formats title=形式 class="nav-link text-wrap d-inline-block w-100"> 形式 </a> <a href=#io title=I/O class="nav-link text-wrap d-inline-block w-100"> I/O </a> <a href=#tables title=テーブル class="nav-link text-wrap d-inline-block w-100"> テーブル </a> <a href=#parsers title=パーサー class="nav-link text-wrap d-inline-block w-100"> パーサー </a> <a href=#interpreters title=通訳者 class="nav-link text-wrap d-inline-block w-100"> 通訳者 </a> <a href=#functions title=機能 class="nav-link text-wrap d-inline-block w-100"> 機能 </a> <a href=#aggregate-functions title=集計関数 class="nav-link text-wrap d-inline-block w-100"> 集計関数 </a> <a href=#server title=サーバ class="nav-link text-wrap d-inline-block w-100"> サーバ </a> <a href=#distributed-query-execution title=分散クエリの実行 class="nav-link text-wrap d-inline-block w-100"> 分散クエリの実行 </a> <a href=#merge-tree title=ツリーをマージ class="nav-link text-wrap d-inline-block w-100"> ツリーをマージ </a> <a href=#replication title=複製 class="nav-link text-wrap d-inline-block w-100"> 複製 </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=ja data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>SELECT - ClickHouseドキュメント</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="SELECT - ClickHouseドキュメント "><meta property=og:description content="クエリ構文の選択 SELECT データ検索を実行します。 [WITH expr_list|(subquery)] SELECT [DISTINCT] expr_list [FROM [db.]table | (subquery) | tab"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="SELECT - ClickHouseドキュメント "><meta name=description content="クエリ構文の選択 SELECT データ検索を実行します。 [WITH expr_list|(subquery)] SELECT [DISTINCT] expr_list [FROM [db.]table | (subquery) | tab"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> SELECT </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/sql_reference/statements/select.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ja.svg alt=日本語 title=日本語 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/sql_reference/statements/select/ class="dropdown-item disabled"> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/sql_reference/statements/select/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=複数ページまたは単一ページ> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt=複数ページバージョン title=複数ページバージョン> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt=単一ページ版 title=単一ページ版> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> バージョン: <span class=text-light>最新の</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ja/ class="dropdown-item disable"> <span class=text-light>最新の</span> </a> <a href=/docs/v20.3/ja/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ja/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/ja/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ja/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ja/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ja/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ja/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/ja/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ja/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ja/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ja/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../introduction/distinctive_features/ title=特徴的な機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特徴的な機能</a> <a href=../../../introduction/features_considered_disadvantages/ title=欠点と見なすことができるClickHouseの機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">欠点と見なすことができるClickHouseの機能</a> <a href=../../../introduction/performance/ title=パフォーマンス class="nav-link text-light text-wrap d-inline-block w-100 px-0">パフォーマンス</a> <a href=../../../introduction/history/ title=歴史 class="nav-link text-light text-wrap d-inline-block w-100 px-0">歴史</a> <a href=../../../introduction/adopters/ title=アーリーアダプター class="nav-link text-light text-wrap d-inline-block w-100 px-0">アーリーアダプター</a> </nav> </div> <a href=../../../ title=概観 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概観</a> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../../getting_started/install/ title=設置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設置</a> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../getting_started/example_datasets/ontime/ title=オンタイム class="nav-link text-light text-wrap d-inline-block w-100 px-0">オンタイム</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title=ニューヨーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">ニューヨーク</a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Dataベンチマーク" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Dataベンチマーク</a> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting_started/example_datasets/criteo/ title=CriteoからのTerabyteクリックログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">CriteoからのTerabyteクリックログ</a> <a href=../../../getting_started/example_datasets/star_schema/ title=スタースキーマのベンチマーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">スタースキーマのベンチマーク</a> <a href=../../../getting_started/example_datasets/metrica/ title=Yandexの。Metricaデータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandexの。Metricaデータ</a> </nav> </div> <a href=../../../getting_started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../../getting_started/playground/ title=遊び場 class="nav-link text-light text-wrap d-inline-block w-100 px-0">遊び場</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../interfaces/cli/ title=コマンドライン class="nav-link text-light text-wrap d-inline-block w-100 px-0">コマンドライン</a> <a href=../../../interfaces/tcp/ title=ネイティブインタフェース(TCP) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネイティブインタフェース(TCP)</a> <a href=../../../interfaces/http/ title=HTTPインター class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTPインター</a> <a href=../../../interfaces/mysql/ title=MySQLイン class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQLイン</a> <a href=../../../interfaces/formats/ title=入力および出力形式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力および出力形式</a> <a href=../../../interfaces/jdbc/ title=JDBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBCドライバ</a> <a href=../../../interfaces/odbc/ title=ODBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBCドライバ</a> <a href=../../../interfaces/cpp/ title=C++クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++クライアント</a> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../interfaces/third-party/client_libraries/ title=クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">クライアント</a> <a href=../../../interfaces/third-party/integrations/ title=統合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">統合</a> <a href=../../../interfaces/third-party/gui/ title=ビジュアル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビジュアル</a> <a href=../../../interfaces/third-party/proxy/ title=プロキシ class="nav-link text-light text-wrap d-inline-block w-100 px-0">プロキシ</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table_engines/mergetree_family/replication/ title=データ複製 class="nav-link text-light text-wrap d-inline-block w-100 px-0">データ複製</a> <a href=../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title=カスタム分割キー class="nav-link text-light text-wrap d-inline-block w-100 px-0">カスタム分割キー</a> <a href=../../../engines/table_engines/mergetree_family/replacingmergetree/ title=ﾂつｨﾂ姪 ﾂつ&quot;ﾂ債ﾂつｹ&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつｨﾂ姪"ﾂつ"ﾂ債ﾂつｹ</a> <a href=../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=ﾂつｨﾂ姪 ﾂつ&quot;ﾂ債ﾂづｭﾂつｹ&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつｨﾂ姪"ﾂつ"ﾂ債ﾂづｭﾂつｹ</a> <a href=../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/graphitemergetree/ title=グラフィットメールグツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">グラフィットメールグツリー</a> </nav> </div> <a href=#sidebar-sidebar-5-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../engines/table_engines/log_family/log_family/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../engines/table_engines/log_family/stripelog/ title=ストリップログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ストリップログ</a> <a href=../../../engines/table_engines/log_family/log/ title=ログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ログ</a> <a href=../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../engines/table_engines/integrations/kafka/ title=カフカname class="nav-link text-light text-wrap d-inline-block w-100 px-0">カフカname</a> <a href=../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../engines/table_engines/special/distributed/ title=分散 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分散</a> <a href=../../../engines/table_engines/special/external_data/ title=外部データ class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部データ</a> <a href=../../../engines/table_engines/special/dictionary/ title=辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書</a> <a href=../../../engines/table_engines/special/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../../engines/table_engines/special/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../../engines/table_engines/special/null/ title=ヌル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ヌル</a> <a href=../../../engines/table_engines/special/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../../engines/table_engines/special/join/ title=参加 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参加</a> <a href=../../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../engines/table_engines/special/view/ title=ビュー class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビュー</a> <a href=../../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table_engines/special/memory/ title=メモリ class="nav-link text-light text-wrap d-inline-block w-100 px-0">メモリ</a> <a href=../../../engines/table_engines/special/buffer/ title=バッファ class="nav-link text-light text-wrap d-inline-block w-100 px-0">バッファ</a> <a href=../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database_engines/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database_engines/lazy/ title=怠け者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">怠け者</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../sql_reference/statements/select/ title=SELECT class="nav-link text-white active text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql_reference/statements/misc/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> </nav> </div> <a href=../../../sql_reference/syntax/ title=構文 class="nav-link text-light text-wrap d-inline-block w-100 px-0">構文</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../sql_reference/functions/arithmetic_functions/ title=算数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算数</a> <a href=../../../sql_reference/functions/comparison_functions/ title=比較 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比較</a> <a href=../../../sql_reference/functions/logical_functions/ title=論理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">論理</a> <a href=../../../sql_reference/functions/type_conversion_functions/ title=タイプ変換 class="nav-link text-light text-wrap d-inline-block w-100 px-0">タイプ変換</a> <a href=../../../sql_reference/functions/date_time_functions/ title=日付と時刻の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付と時刻の操作</a> <a href=../../../sql_reference/functions/string_functions/ title=文字列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列の操作</a> <a href=../../../sql_reference/functions/string_search_functions/ title=文字列を検索する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列を検索する場合</a> <a href=../../../sql_reference/functions/string_replace_functions/ title=文字列で置換する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列で置換する場合</a> <a href=../../../sql_reference/functions/conditional_functions/ title=条件付き class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件付き</a> <a href=../../../sql_reference/functions/math_functions/ title=数学 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学</a> <a href=../../../sql_reference/functions/rounding_functions/ title=丸め class="nav-link text-light text-wrap d-inline-block w-100 px-0">丸め</a> <a href=../../../sql_reference/functions/array_functions/ title=配列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列の操作</a> <a href=../../../sql_reference/functions/splitting_merging_functions/ title=文字列と配列の分割とマージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列と配列の分割とマージ</a> <a href=../../../sql_reference/functions/bit_functions/ title=ビット class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビット</a> <a href=../../../sql_reference/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../../sql_reference/functions/hash_functions/ title=ハッシュ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハッシュ</a> <a href=../../../sql_reference/functions/random_functions/ title=擬似乱数の生成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">擬似乱数の生成</a> <a href=../../../sql_reference/functions/encoding_functions/ title=エンコード class="nav-link text-light text-wrap d-inline-block w-100 px-0">エンコード</a> <a href=../../../sql_reference/functions/uuid_functions/ title=UUIDの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUIDの操作</a> <a href=../../../sql_reference/functions/url_functions/ title=Urlの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Urlの操作</a> <a href=../../../sql_reference/functions/ip_address_functions/ title=IPアドレスの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPアドレスの操作</a> <a href=../../../sql_reference/functions/json_functions/ title=JSONでの作業 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSONでの作業</a> <a href=../../../sql_reference/functions/higher_order_functions/ title=より高い次数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">より高い次数</a> <a href=../../../sql_reference/functions/ext_dict_functions/ title=外部辞書の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書の操作</a> <a href=../../../sql_reference/functions/ym_dict_functions/ title=Yandexのでの作業。メトリカ辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandexのでの作業。メトリカ辞書</a> <a href=../../../sql_reference/functions/in_functions/ title=IN演算子の実装 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN演算子の実装</a> <a href=../../../sql_reference/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../sql_reference/functions/geo/ title=地理座標の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">地理座標の操作</a> <a href=../../../sql_reference/functions/functions_for_nulls/ title=ヌル可能な引数の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ヌル可能な引数の操作</a> <a href=../../../sql_reference/functions/machine_learning_functions/ title=機械学習の機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">機械学習の機能</a> <a href=../../../sql_reference/functions/introspection/ title=イントロスペクション class="nav-link text-light text-wrap d-inline-block w-100 px-0">イントロスペクション</a> <a href=../../../sql_reference/functions/other_functions/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/aggregate_functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../sql_reference/aggregate_functions/reference/ title=参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参照</a> <a href=../../../sql_reference/aggregate_functions/combinators/ title=集計関数のコンビネータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">集計関数のコンビネータ</a> <a href=../../../sql_reference/aggregate_functions/parametric_functions/ title=パラメトリック集計関数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">パラメトリック集計関数</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/table_functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../sql_reference/table_functions/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../../sql_reference/table_functions/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../../sql_reference/table_functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../../sql_reference/table_functions/remote/ title=リモート class="nav-link text-light text-wrap d-inline-block w-100 px-0">リモート</a> <a href=../../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql_reference/table_functions/input/ title=入力 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力</a> <a href=../../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title=一般的な説明 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な説明</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title=外部ディクショナリの設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部ディクショナリの設定</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title=辞書をメモリに保存する class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書をメモリに保存する</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title=辞書の更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書の更新</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title=外部辞書のソース class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書のソース</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title=辞書のキーとフィールド class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書のキーとフィールド</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title=階層辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">階層辞書</a> </nav> </div> <a href=../../../sql_reference/dictionaries/internal_dicts/ title=内部辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部辞書</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../sql_reference/data_types/int_uint/ title=UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64</a> <a href=../../../sql_reference/data_types/float/ title=Float32,Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32,Float64</a> <a href=../../../sql_reference/data_types/decimal/ title=小数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">小数</a> <a href=../../../sql_reference/data_types/boolean/ title=ブール値 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ブール値</a> <a href=../../../sql_reference/data_types/string/ title=文字列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列</a> <a href=../../../sql_reference/data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql_reference/data_types/date/ title=日付 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付</a> <a href=../../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql_reference/data_types/enum/ title=列挙型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">列挙型</a> <a href=../../../sql_reference/data_types/array/ title=配列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列(T)</a> <a href=../../../sql_reference/data_types/aggregatefunction/ title=AggregateFunction(name,types_of_arguments)...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name,types_of_arguments)...)</a> <a href=../../../sql_reference/data_types/tuple/ title=タプル(T1,T2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">タプル(T1,T2,...)</a> <a href=#sidebar-sidebar-6-8-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-6-8-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/nested_data_structures/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../../sql_reference/data_types/nested_data_structures/nested/ title=ネスト(Name1タイプ1,Name2タイプ2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネスト(Name1タイプ1,Name2タイプ2,...)</a> </nav> </div> <a href=../../../sql_reference/data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-6-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-6-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/special_data_types/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../../sql_reference/data_types/special_data_types/expression/ title=式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">式</a> <a href=../../../sql_reference/data_types/special_data_types/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../../sql_reference/data_types/special_data_types/nothing/ title=何もない class="nav-link text-light text-wrap d-inline-block w-100 px-0">何もない</a> <a href=../../../sql_reference/data_types/special_data_types/interval/ title=間隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">間隔</a> </nav> </div> <a href=#sidebar-sidebar-6-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../sql_reference/data_types/domains/overview/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../../sql_reference/operators/ title=演算子 class="nav-link text-light text-wrap d-inline-block w-100 px-0">演算子</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../guides/apply_catboost_model/ title=CatBoostモデルの適用 class="nav-link text-light text-wrap d-inline-block w-100 px-0">CatBoostモデルの適用</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../operations/requirements/ title=要件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要件</a> <a href=../../../operations/monitoring/ title=監視 class="nav-link text-light text-wrap d-inline-block w-100 px-0">監視</a> <a href=../../../operations/troubleshooting/ title=トラブル class="nav-link text-light text-wrap d-inline-block w-100 px-0">トラブル</a> <a href=../../../operations/update/ title=クリックハウス更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウス更新</a> <a href=../../../operations/access_rights/ title=アクセス権 class="nav-link text-light text-wrap d-inline-block w-100 px-0">アクセス権</a> <a href=../../../operations/backup/ title=データバック class="nav-link text-light text-wrap d-inline-block w-100 px-0">データバック</a> <a href=../../../operations/configuration_files/ title=設定ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定ファイル</a> <a href=../../../operations/quotas/ title=クォータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">クォータ</a> <a href=#sidebar-sidebar-8-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-10 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-8-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../operations/optimizing_performance/sampling_query_profiler/ title=Queryプロファイリング class="nav-link text-light text-wrap d-inline-block w-100 px-0">Queryプロファイリング</a> </nav> </div> <a href=../../../operations/system_tables/ title=システム表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">システム表</a> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_configuration_parameters/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../operations/server_configuration_parameters/settings/ title=サーバー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">サーバー設定</a> </nav> </div> <a href=../../../operations/performance_test/ title=ハードウェア試験 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハードウェア試験</a> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../operations/settings/permissions_for_queries/ title=クエリの権限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの権限</a> <a href=../../../operations/settings/query_complexity/ title=クエリの複雑さの制限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの複雑さの制限</a> <a href=../../../operations/settings/settings/ title=設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定</a> <a href=../../../operations/settings/settings_profiles/ title=設定プロファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定プロファイル</a> <a href=../../../operations/settings/constraints_on_settings/ title=設定の制約 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定の制約</a> <a href=../../../operations/settings/settings_users/ title=ユーザー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ユーザー設定</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../operations/utilities/clickhouse-copier/ title=クリックハウスコピー機 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウスコピー機</a> <a href=../../../operations/utilities/clickhouse-local/ title=ﾂつ ﾂづ按つｵﾂ！&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつ"ﾂづ按つｵﾂ！</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-ベンチマーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-ベンチマーク</a> </nav> </div> <a href=../../../operations/tips/ title=使用の推奨事項 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用の推奨事項</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../../development/developer_instruction/ title=初心者の方ClickHouse開発者の指示 class="nav-link text-light text-wrap d-inline-block w-100 px-0">初心者の方ClickHouse開発者の指示</a> <a href=../../../development/architecture/ title=クリックハウスの概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウスの概要</a> <a href=../../../development/browse_code/ title=ClickHouseのソースコードを参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseのソースコードを参照</a> <a href=../../../development/build/ title=LinuxでClickHouseを構築する方法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">LinuxでClickHouseを構築する方法</a> <a href=../../../development/build_osx/ title="Mac OS XでClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS XでClickHouseを構築する方法</a> <a href=../../../development/build_cross_osx/ title="Mac OS X用のLinuxでClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS X用のLinuxでClickHouseを構築する方法</a> <a href=../../../development/build_cross_arm/ title=AARCH64用LinuxでClickHouseをビルドする方法（ARM64) class="nav-link text-light text-wrap d-inline-block w-100 px-0">AARCH64用LinuxでClickHouseをビルドする方法（ARM64)</a> <a href=../../../development/style/ title=C++コードの書き方 class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++コードの書き方</a> <a href=../../../development/tests/ title=ClickHouseテストを実行する方法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseテストを実行する方法</a> <a href=../../../development/contrib/ title=サードパーティ製ライブラリ class="nav-link text-light text-wrap d-inline-block w-100 px-0">サードパーティ製ライブラリ</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../commercial/cloud/ title=ClickHouseしてクラウドサービスプロバイダ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseしてクラウドサービスプロバイダ</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../whats_new/roadmap/ title=ロードマップ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ロードマップ</a> <a href=../../../whats_new/security_changelog/ title=セキュリティの変更履歴 class="nav-link text-light text-wrap d-inline-block w-100 px-0">セキュリティの変更履歴</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../faq/general/ title=一般的な質問 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な質問</a> </nav> </div> <a href=../../../single/clickhouse_ja.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDFバージョン title=PDFバージョン height=24 class="d-block mr-1 float-left"><div>PDFバージョン</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">助けが欲しかった！</p> <p class=lead>このドキュメントページの以下の内容は機械翻訳されています。 異な他のウェブサイトで行われませんができます。 この翻訳テキスト生活をGitHubリポジトリとClickHouseコードベース、待ち員ネイティブスピーカーで人間が読む.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/sql_reference/statements/select.md target=_blank rel="external nofollow noreferrer"> このページを編集してClickHouseの文書を編集する </a> </p> </div> <h1 id=select-queries-syntax>クエリ構文の選択<a class=headerlink href=#select-queries-syntax title="Permanent link">&para;</a></h1> <p><code>SELECT</code> データ検索を実行します。</p> <div class=codehilite><pre><span></span><code><span class=p>[</span><span class=k>WITH</span> <span class=n>expr_list</span><span class=o>|</span><span class=p>(</span><span class=n>subquery</span><span class=p>)]</span>
<span class=k>SELECT</span> <span class=p>[</span><span class=k>DISTINCT</span><span class=p>]</span> <span class=n>expr_list</span>
<span class=p>[</span><span class=k>FROM</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span> <span class=o>|</span> <span class=p>(</span><span class=n>subquery</span><span class=p>)</span> <span class=o>|</span> <span class=n>table_function</span><span class=p>]</span> <span class=p>[</span><span class=k>FINAL</span><span class=p>]</span>
<span class=p>[</span><span class=n>SAMPLE</span> <span class=n>sample_coeff</span><span class=p>]</span>
<span class=p>[</span><span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=p>...]</span>
<span class=p>[</span><span class=k>GLOBAL</span><span class=p>]</span> <span class=p>[</span><span class=k>ANY</span><span class=o>|</span><span class=k>ALL</span><span class=p>]</span> <span class=p>[</span><span class=k>INNER</span><span class=o>|</span><span class=k>LEFT</span><span class=o>|</span><span class=k>RIGHT</span><span class=o>|</span><span class=k>FULL</span><span class=o>|</span><span class=k>CROSS</span><span class=p>]</span> <span class=p>[</span><span class=k>OUTER</span><span class=p>]</span> <span class=k>JOIN</span> <span class=p>(</span><span class=n>subquery</span><span class=p>)</span><span class=o>|</span><span class=k>table</span> <span class=k>USING</span> <span class=n>columns_list</span>
<span class=p>[</span><span class=n>PREWHERE</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>WHERE</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>GROUP</span> <span class=k>BY</span> <span class=n>expr_list</span><span class=p>]</span> <span class=p>[</span><span class=k>WITH</span> <span class=n>TOTALS</span><span class=p>]</span>
<span class=p>[</span><span class=k>HAVING</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>ORDER</span> <span class=k>BY</span> <span class=n>expr_list</span><span class=p>]</span>
<span class=p>[</span><span class=k>LIMIT</span> <span class=p>[</span><span class=n>offset_value</span><span class=p>,</span> <span class=p>]</span><span class=n>n</span> <span class=k>BY</span> <span class=n>columns</span><span class=p>]</span>
<span class=p>[</span><span class=k>LIMIT</span> <span class=p>[</span><span class=n>n</span><span class=p>,</span> <span class=p>]</span><span class=n>m</span><span class=p>]</span>
<span class=p>[</span><span class=k>UNION</span> <span class=k>ALL</span> <span class=p>...]</span>
<span class=p>[</span><span class=k>INTO</span> <span class=n>OUTFILE</span> <span class=n>filename</span><span class=p>]</span>
<span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>SELECT直後の必須の式リストを除き、すべての句はオプションです。<br> 以下の句は、クエリ実行コンベアとほぼ同じ順序で記述されています。</p> <p>クエリが省略された場合、 <code>DISTINCT</code>, <code>GROUP BY</code> と <code>ORDER BY</code> 句および <code>IN</code> と <code>JOIN</code> サブクエリでは、クエリはO（1）量のRAMを使用して完全にストリーム処理されます。<br> それ以外の場合、適切な制限が指定されていない場合、クエリは大量のramを消費する可能性があります: <code>max_memory_usage</code>, <code>max_rows_to_group_by</code>, <code>max_rows_to_sort</code>, <code>max_rows_in_distinct</code>, <code>max_bytes_in_distinct</code>, <code>max_rows_in_set</code>, <code>max_bytes_in_set</code>, <code>max_rows_in_join</code>, <code>max_bytes_in_join</code>, <code>max_bytes_before_external_sort</code>, <code>max_bytes_before_external_group_by</code>. 詳細については、以下を参照してください “Settings”. 外部ソート（一時テーブルをディスクに保存する）と外部集約を使用することが可能です。 <code>The system does not have "merge join"</code>.</p> <h3 id=with-clause>With句<a class=headerlink href=#with-clause title="Permanent link">&para;</a></h3> <p>このセクション支援のための共通表現 (<a href=https://en.wikipedia.org/wiki/Hierarchical_and_recursive_queries_in_SQL rel="external nofollow noreferrer">CTE</a>）、いくつかの制限があります:<br> 1. 再帰的な問合せには対応していない<br> 2. サブクエリがsection内で使用される場合、その結果は正確に一つの行を持つスカラーになります<br> 3. 式の結果はサブクエリでは使用できません<br> WITH句の式の結果は、SELECT句の中で使用できます。</p> <p>例1:定数式をasとして使用する “variable”</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=s1>&#39;2019-08-01 15:23:00&#39;</span> <span class=k>as</span> <span class=n>ts_upper_bound</span>
<span class=k>SELECT</span> <span class=o>*</span>
<span class=k>FROM</span> <span class=n>hits</span>
<span class=k>WHERE</span>
    <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=n>ts_upper_bound</span><span class=p>)</span> <span class=k>AND</span>
    <span class=n>EventTime</span> <span class=o>&lt;=</span> <span class=n>ts_upper_bound</span>
</code></pre></div> <p>例2:select句の列リストからsum(bytes)式の結果を削除する</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span> <span class=k>as</span> <span class=n>s</span>
<span class=k>SELECT</span>
    <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>s</span><span class=p>),</span>
    <span class=k>table</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>parts</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=k>table</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>s</span>
</code></pre></div> <p>例3:結果のスカラサブクエリ</p> <div class=codehilite><pre><span></span><code><span class=cm>/* this example would return TOP 10 of most huge tables */</span>
<span class=k>WITH</span>
    <span class=p>(</span>
        <span class=k>SELECT</span> <span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span>
        <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>parts</span>
        <span class=k>WHERE</span> <span class=n>active</span>
    <span class=p>)</span> <span class=k>AS</span> <span class=n>total_disk_usage</span>
<span class=k>SELECT</span>
    <span class=p>(</span><span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>)</span> <span class=o>/</span> <span class=n>total_disk_usage</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span> <span class=k>AS</span> <span class=n>table_disk_usage</span><span class=p>,</span>
    <span class=k>table</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>parts</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=k>table</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>table_disk_usage</span> <span class=k>DESC</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <p>例4:サブクエリでの式の再利用<br> サブクエリでの式の現在の使用制限の回避策として、複製することができます。</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>]</span> <span class=k>AS</span> <span class=n>hello</span>
<span class=k>SELECT</span>
    <span class=n>hello</span><span class=p>,</span>
    <span class=o>*</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>WITH</span> <span class=p>[</span><span class=s1>&#39;hello&#39;</span><span class=p>]</span> <span class=k>AS</span> <span class=n>hello</span>
    <span class=k>SELECT</span> <span class=n>hello</span>
<span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─hello─────┬─hello─────┐
│ [&#39;hello&#39;] │ [&#39;hello&#39;] │
└───────────┴───────────┘
</code></pre></div> <h3 id=select-from>FROM句<a class=headerlink href=#select-from title="Permanent link">&para;</a></h3> <p>FROM句が省略された場合、データは <code>system.one</code> テーブル。<br> その <code>system.one</code> このテーブルは、他のDbmsで見つかったデュアルテーブルと同じ目的を果たします。</p> <p>その <code>FROM</code> 句は、データを読み取るソースを指定します:</p> <ul> <li>テーブル</li> <li>サブクエリ</li> <li><a href=../../table_functions/ >テーブル機能</a></li> </ul> <p><code>ARRAY JOIN</code> そして、定期的に <code>JOIN</code> また、（下記参照）が含まれていてもよいです。</p> <p>テーブルの代わりに、 <code>SELECT</code> サブクエリは、かっこで指定できます。<br> 標準sqlとは対照的に、サブクエリの後にシノニムを指定する必要はありません。</p> <p>実行をクエリに対して、すべての列をクエリを取り出しに適します。 任意の列は不要のため、外部クエリはスローされ、サブクエリ.<br> クエリで列がリストされない場合(たとえば, <code>SELECT count() FROM t</code>）行の数を計算するために、いくつかの列がテーブルから抽出されます（最小の列が優先されます）。</p> <h4 id=select-from-final>最終修飾子<a class=headerlink href=#select-from-final title="Permanent link">&para;</a></h4> <p>が異なる場合は、それぞれの選定からデータをテーブルからの <a href=../../../engines/table_engines/mergetree_family/mergetree/ >MergeTree</a>-エンジンファミリー以外 <code>GraphiteMergeTree</code>. とき <code>FINAL</code> 指定されている場合、ClickHouseは結果を返す前にデータを完全にマージするため、指定されたテーブルエンジンのマージ中に発生するすべてのデータ変換を実行し</p> <p>また、:<br> - <a href=../../../engines/table_engines/mergetree_family/replication/ >複製された</a> のバージョン <code>MergeTree</code> エンジン<br> - <a href=../../../engines/table_engines/special/view/ >ビュー</a>, <a href=../../../engines/table_engines/special/buffer/ >バッファ</a>, <a href=../../../engines/table_engines/special/distributed/ >分散</a>、と <a href=../../../engines/table_engines/special/materializedview/ >MaterializedView</a> 他のエンジンを操作するエンジンは、それらが上に作成された提供 <code>MergeTree</code>-エンジンテーブル。</p> <p>使用するクエリ <code>FINAL</code> そうでない類似のクエリと同じくらい速く実行されません。:</p> <ul> <li>クエリは単一のスレッドで実行され、クエリの実行中にデータがマージされます。</li> <li>とのクエリ <code>FINAL</code> クエリで指定された列に加えて、主キー列を読み取ります。</li> </ul> <p>ほとんどの場合、使用を避けます <code>FINAL</code>.</p> <h3 id=select-sample-clause>サンプル句<a class=headerlink href=#select-sample-clause title="Permanent link">&para;</a></h3> <p>その <code>SAMPLE</code> 句は、近似クエリ処理を可能にします。</p> <p>データサンプリングを有効にすると、すべてのデータに対してクエリは実行されず、特定のデータ(サンプル)に対してのみ実行されます。 たとえば、すべての訪問の統計を計算する必要がある場合は、すべての訪問の1/10分のクエリを実行し、その結果に10を掛けるだけで十分です。</p> <p>近似クエリ処理は、次の場合に役立ちます:</p> <ul> <li>厳密なタイミング要件（\&lt;100ms）がありますが、それらを満たすために追加のハードウェアリソースのコストを正当化できない場合。</li> <li>生データが正確でない場合、近似は品質を著しく低下させません。</li> <li>ビジネス要件は、おおよその結果（費用対効果のため、または正確な結果をプレミアムユーザーに販売するため）を対象とします。</li> </ul> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>サンプリングを使用できるのは、次の表のみです <a href=../../../engines/table_engines/mergetree_family/mergetree/ >MergeTree</a> テーブル作成時にサンプリング式が指定された場合にのみ <a href=../../../engines/table_engines/mergetree_family/mergetree/#table_engine-mergetree-creating-a-table>MergeTreeエンジン</a>).</p> </div> <p>データサンプリングの機能を以下に示します:</p> <ul> <li>データサンプリングは確定的なメカニズムです。 同じの結果 <code>SELECT .. SAMPLE</code> クエリは常に同じです。</li> <li>サンプリン テーブルに単一のサンプリングキーは、サンプルと同じ係数を常に選択と同じサブセットのデータです。 たとえば、ユーザー idのサンプルでは、異なるテーブルのすべてのユーザー idのサブセットが同じ行になります。 これは、サブクエリでサンプルを使用できることを意味します <a href=#select-in-operators>IN</a> 句。 また、以下を使用してサンプルを結合できます <a href=#select-join>JOIN</a> 句。</li> <li>サンプリングで読み下からのデータディスク。 サンプリングキーを正しく指定する必要があります。 詳細については、 <a href=../../../engines/table_engines/mergetree_family/mergetree/#table_engine-mergetree-creating-a-table>MergeTreeテーブルの作成</a>.</li> </ul> <p>のための <code>SAMPLE</code> 句次の構文がサポートされています:</p> <table> <thead> <tr> <th>SAMPLE Clause Syntax</th> <th>説明</th> </tr> </thead> <tbody> <tr> <td><code>SAMPLE k</code></td> <td>ここに <code>k</code> 0から1までの数値です。クエリが実行される <code>k</code> データの割合。 例えば, <code>SAMPLE 0.1</code> データの10%に対してクエリを実行します。 <a href=#select-sample-k>もっと読む</a></td> </tr> <tr> <td><code>SAMPLE n</code></td> <td>ここに <code>n</code> は十分に大きい整数です。クエリは、少なくとものサンプルで実行されます <code>n</code> 行（しかし、これ以上のものではない）。 例えば, <code>SAMPLE 10000000</code> 最小10,000,000行に対してクエリを実行します。 <a href=#select-sample-n>もっと読む</a></td> </tr> <tr> <td><code>SAMPLE k OFFSET m</code></td> <td>ここに <code>k</code> と <code>m</code> 0から1までの数字です。クエリは次のサンプルで実行されます <code>k</code> データの割合。 に使用されるデータのサンプルと相殺することにより <code>m</code> 分数。 <a href=#select-sample-offset>もっと読む</a></td> </tr> </tbody> </table> <h4 id=select-sample-k>SAMPLE K<a class=headerlink href=#select-sample-k title="Permanent link">&para;</a></h4> <p>ここに <code>k</code> は0から1までの数値です(小数表記と小数表記の両方がサポートされています)。 例えば, <code>SAMPLE 1/2</code> または <code>SAMPLE 0.5</code>.</p> <p>で <code>SAMPLE k</code> 句は、サンプルから取られます <code>k</code> データの割合。 例を以下に示します:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>Title</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=o>*</span> <span class=mi>10</span> <span class=k>AS</span> <span class=n>PageViews</span>
<span class=k>FROM</span> <span class=n>hits_distributed</span>
<span class=n>SAMPLE</span> <span class=mi>0</span><span class=p>.</span><span class=mi>1</span>
<span class=k>WHERE</span>
    <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>Title</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>PageViews</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>1000</span>
</code></pre></div> <p>この例では、0.1(10%)のデータのサンプルでクエリが実行されます。 集計関数の値は自動的には修正されないので、おおよその結果を得るには値 <code>count()</code> 手動で10倍します。</p> <h4 id=select-sample-n>SAMPLE N<a class=headerlink href=#select-sample-n title="Permanent link">&para;</a></h4> <p>ここに <code>n</code> は十分に大きい整数です。 例えば, <code>SAMPLE 10000000</code>.</p> <p>この場合、クエリは少なくともサンプルで実行されます <code>n</code> 行（しかし、これ以上のものではない）。 例えば, <code>SAMPLE 10000000</code> 最小10,000,000行に対してクエリを実行します。</p> <p>データ読み取りのための最小単位は一つの顆粒であるため（そのサイズは <code>index_granularity</code> それは、顆粒のサイズよりもはるかに大きいサンプルを設定することは理にかなっています。</p> <p>を使用する場合 <code>SAMPLE n</code> 句、データの相対パーセントが処理されたかわからない。 したがって、集計関数に掛ける係数はわかりません。 を使用 <code>_sample_factor</code> おおよその結果を得るための仮想列。</p> <p>その <code>_sample_factor</code> 列には、動的に計算される相対係数が含まれます。 この列は、次の場合に自動的に作成されます <a href=../../../engines/table_engines/mergetree_family/mergetree/#table_engine-mergetree-creating-a-table>作成</a> 指定したサンプリングキーを持つテーブル。 の使用例 <code>_sample_factor</code> 列は以下の通りです。</p> <p>テーブルを考えてみましょう <code>visits</code> これには、サイト訪問に関する統計情報が含まれます。 最初の例は、ページビューの数を計算する方法を示しています:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>sum</span><span class=p>(</span><span class=n>PageViews</span> <span class=o>*</span> <span class=n>_sample_factor</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>visits</span>
<span class=n>SAMPLE</span> <span class=mi>10000000</span>
</code></pre></div> <p>次の例では、訪問回数の合計を計算する方法を示します:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>sum</span><span class=p>(</span><span class=n>_sample_factor</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>visits</span>
<span class=n>SAMPLE</span> <span class=mi>10000000</span>
</code></pre></div> <p>以下の例は、平均セッション期間を計算する方法を示しています。 相対係数を使用して平均値を計算する必要はありません。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>avg</span><span class=p>(</span><span class=n>Duration</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>visits</span>
<span class=n>SAMPLE</span> <span class=mi>10000000</span>
</code></pre></div> <h4 id=select-sample-offset>SAMPLE K OFFSET M<a class=headerlink href=#select-sample-offset title="Permanent link">&para;</a></h4> <p>ここに <code>k</code> と <code>m</code> は0から1までの数字です。 例を以下に示す。</p> <p><strong>例1</strong></p> <div class=codehilite><pre><span></span><code><span class=n>SAMPLE</span> <span class=mi>1</span><span class=o>/</span><span class=mi>10</span>
</code></pre></div> <p>この例では、サンプルはすべてのデータの1/10thです:</p> <p><code>[++------------]</code></p> <p><strong>例2</strong></p> <div class=codehilite><pre><span></span><code><span class=n>SAMPLE</span> <span class=mi>1</span><span class=o>/</span><span class=mi>10</span> <span class=k>OFFSET</span> <span class=mi>1</span><span class=o>/</span><span class=mi>2</span>
</code></pre></div> <p>ここでは、データの後半から10％のサンプルを採取します。</p> <p><code>[------++------]</code></p> <h3 id=select-array-join-clause>配列結合句<a class=headerlink href=#select-array-join-clause title="Permanent link">&para;</a></h3> <p>実行を許可する <code>JOIN</code> 配列または入れ子になったデータ構造。 その意図は、 <a href=../../functions/array_join/#functions_arrayjoin>arrayJoin</a> 機能が、その機能はより広いです。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>&lt;</span><span class=n>expr_list</span><span class=o>&gt;</span>
<span class=k>FROM</span> <span class=o>&lt;</span><span class=n>left_subquery</span><span class=o>&gt;</span>
<span class=p>[</span><span class=k>LEFT</span><span class=p>]</span> <span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=o>&lt;</span><span class=nb>array</span><span class=o>&gt;</span>
<span class=p>[</span><span class=k>WHERE</span><span class=o>|</span><span class=n>PREWHERE</span> <span class=o>&lt;</span><span class=n>expr</span><span class=o>&gt;</span><span class=p>]</span>
<span class=p>...</span>
</code></pre></div> <p>単一のみを指定できます <code>ARRAY JOIN</code> クエリ内の句。</p> <p>実行時にクエリの実行順序が最適化されます <code>ARRAY JOIN</code>. が <code>ARRAY JOIN</code> の前に必ず指定する必要があります。 <code>WHERE/PREWHERE</code> のいずれかを実行することができます。 <code>WHERE/PREWHERE</code> （結果がこの節で必要な場合）、またはそれを完了した後（計算量を減らすため）。 処理順序はクエリオプティマイザによって制御されます。</p> <p>サポートされる種類の <code>ARRAY JOIN</code> は以下の通りです:</p> <ul> <li><code>ARRAY JOIN</code> -この場合、空の配列は結果に含まれません <code>JOIN</code>.</li> <li><code>LEFT ARRAY JOIN</code> -結果の <code>JOIN</code> 空の配列を含む行を含みます。 空の配列の値は、配列要素タイプのデフォルト値に設定されます(通常は0、空の文字列またはNULL)。</li> </ul> <p>以下の例は、以下の使用例を示しています。 <code>ARRAY JOIN</code> と <code>LEFT ARRAY JOIN</code> 句。 テーブルを作成してみましょう <a href=../../data_types/array/ >配列</a> 列を入力して値を挿入します:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>arrays_test</span>
<span class=p>(</span>
    <span class=n>s</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>arr</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt8</span><span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>arrays_test</span>
<span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;Hello&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>]),</span> <span class=p>(</span><span class=s1>&#39;World&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>]),</span> <span class=p>(</span><span class=s1>&#39;Goodbye&#39;</span><span class=p>,</span> <span class=p>[]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s───────────┬─arr─────┐
│ Hello       │ [1,2]   │
│ World       │ [3,4,5] │
│ Goodbye     │ []      │
└─────────────┴─────────┘
</code></pre></div> <p>以下の例では、 <code>ARRAY JOIN</code> 句:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─arr─┐
│ Hello │   1 │
│ Hello │   2 │
│ World │   3 │
│ World │   4 │
│ World │   5 │
└───────┴─────┘
</code></pre></div> <p>次の例では、 <code>LEFT ARRAY JOIN</code> 句:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=k>LEFT</span> <span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s───────────┬─arr─┐
│ Hello       │   1 │
│ Hello       │   2 │
│ World       │   3 │
│ World       │   4 │
│ World       │   5 │
│ Goodbye     │   0 │
└─────────────┴─────┘
</code></pre></div> <h4 id=using-aliases>エイリアスの使用<a class=headerlink href=#using-aliases title="Permanent link">&para;</a></h4> <p>配列のエイリアスを指定することができます。 <code>ARRAY JOIN</code> 句。 この場合、配列項目はこのエイリアスでアクセスできますが、配列自体は元の名前でアクセスされます。 例えば:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span><span class=p>,</span> <span class=n>a</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span> <span class=k>AS</span> <span class=n>a</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─arr─────┬─a─┐
│ Hello │ [1,2]   │ 1 │
│ Hello │ [1,2]   │ 2 │
│ World │ [3,4,5] │ 3 │
│ World │ [3,4,5] │ 4 │
│ World │ [3,4,5] │ 5 │
└───────┴─────────┴───┘
</code></pre></div> <p>別名を使用すると、次の操作を実行できます <code>ARRAY JOIN</code> 外部配列を使用する。 例えば:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr_external</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span> <span class=k>AS</span> <span class=n>arr_external</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s───────────┬─arr_external─┐
│ Hello       │            1 │
│ Hello       │            2 │
│ Hello       │            3 │
│ World       │            1 │
│ World       │            2 │
│ World       │            3 │
│ Goodbye     │            1 │
│ Goodbye     │            2 │
│ Goodbye     │            3 │
└─────────────┴──────────────┘
</code></pre></div> <p>複数の配列をコンマで区切ることができます。 <code>ARRAY JOIN</code> 句。 この場合, <code>JOIN</code> それらと同時に実行されます（直積ではなく、直積）。 すべての配列は同じサイズでなければなりません。 例えば:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>num</span><span class=p>,</span> <span class=n>mapped</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span><span class=p>,</span> <span class=n>arrayMap</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>arr</span><span class=p>)</span> <span class=k>AS</span> <span class=n>mapped</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─arr─────┬─a─┬─num─┬─mapped─┐
│ Hello │ [1,2]   │ 1 │   1 │      2 │
│ Hello │ [1,2]   │ 2 │   2 │      3 │
│ World │ [3,4,5] │ 3 │   1 │      4 │
│ World │ [3,4,5] │ 4 │   2 │      5 │
│ World │ [3,4,5] │ 5 │   3 │      6 │
└───────┴─────────┴───┴─────┴────────┘
</code></pre></div> <p>以下の例では、 <a href=../../functions/array_functions/#array_functions-arrayenumerate>arrayEnumerate</a> 機能:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=n>arr</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>num</span><span class=p>,</span> <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>arrays_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>arr</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─arr─────┬─a─┬─num─┬─arrayEnumerate(arr)─┐
│ Hello │ [1,2]   │ 1 │   1 │ [1,2]               │
│ Hello │ [1,2]   │ 2 │   2 │ [1,2]               │
│ World │ [3,4,5] │ 3 │   1 │ [1,2,3]             │
│ World │ [3,4,5] │ 4 │   2 │ [1,2,3]             │
│ World │ [3,4,5] │ 5 │   3 │ [1,2,3]             │
└───────┴─────────┴───┴─────┴─────────────────────┘
</code></pre></div> <h4 id=array-join-with-nested-data-structure>配列の参加入れ子データ構造<a class=headerlink href=#array-join-with-nested-data-structure title="Permanent link">&para;</a></h4> <p><code>ARRAY</code>また、"参加"で動作します <a href=../../data_types/nested_data_structures/nested/ >入れ子のデータ構造</a>. 例えば:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>nested_test</span>
<span class=p>(</span>
    <span class=n>s</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>nest</span> <span class=n>Nested</span><span class=p>(</span>
    <span class=n>x</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=n>y</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>nested_test</span>
<span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;Hello&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span><span class=mi>20</span><span class=p>]),</span> <span class=p>(</span><span class=s1>&#39;World&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>30</span><span class=p>,</span><span class=mi>40</span><span class=p>,</span><span class=mi>50</span><span class=p>]),</span> <span class=p>(</span><span class=s1>&#39;Goodbye&#39;</span><span class=p>,</span> <span class=p>[],</span> <span class=p>[]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s───────┬─nest.x──┬─nest.y─────┐
│ Hello   │ [1,2]   │ [10,20]    │
│ World   │ [3,4,5] │ [30,40,50] │
│ Goodbye │ []      │ []         │
└─────────┴─────────┴────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>nest</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─nest.x─┬─nest.y─┐
│ Hello │      1 │     10 │
│ Hello │      2 │     20 │
│ World │      3 │     30 │
│ World │      4 │     40 │
│ World │      5 │     50 │
└───────┴────────┴────────┘
</code></pre></div> <p>ネストされたデータ構造の名前を指定する場合 <code>ARRAY JOIN</code>、意味は同じです <code>ARRAY JOIN</code> それが構成されているすべての配列要素。 例を以下に示します:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─nest.x─┬─nest.y─┐
│ Hello │      1 │     10 │
│ Hello │      2 │     20 │
│ World │      3 │     30 │
│ World │      4 │     40 │
│ World │      5 │     50 │
└───────┴────────┴────────┘
</code></pre></div> <p>この変化はまた意味を成している:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─nest.x─┬─nest.y─────┐
│ Hello │      1 │ [10,20]    │
│ Hello │      2 │ [10,20]    │
│ World │      3 │ [30,40,50] │
│ World │      4 │ [30,40,50] │
│ World │      5 │ [30,40,50] │
└───────┴────────┴────────────┘
</code></pre></div> <p>エイリアスは、ネストされたデータ構造のために使用することができます。 <code>JOIN</code> 結果またはソース配列。 例えば:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>n</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>n</span><span class=p>.</span><span class=n>y</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>nest</span> <span class=k>AS</span> <span class=n>n</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─n.x─┬─n.y─┬─nest.x──┬─nest.y─────┐
│ Hello │   1 │  10 │ [1,2]   │ [10,20]    │
│ Hello │   2 │  20 │ [1,2]   │ [10,20]    │
│ World │   3 │  30 │ [3,4,5] │ [30,40,50] │
│ World │   4 │  40 │ [3,4,5] │ [30,40,50] │
│ World │   5 │  50 │ [3,4,5] │ [30,40,50] │
└───────┴─────┴─────┴─────────┴────────────┘
</code></pre></div> <p>使用例 <a href=../../functions/array_functions/#array_functions-arrayenumerate>arrayEnumerate</a> 機能:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>s</span><span class=p>,</span> <span class=o>`</span><span class=n>n</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>n</span><span class=p>.</span><span class=n>y</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>,</span> <span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>y</span><span class=o>`</span><span class=p>,</span> <span class=n>num</span>
<span class=k>FROM</span> <span class=n>nested_test</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span> <span class=n>nest</span> <span class=k>AS</span> <span class=n>n</span><span class=p>,</span> <span class=n>arrayEnumerate</span><span class=p>(</span><span class=o>`</span><span class=n>nest</span><span class=p>.</span><span class=n>x</span><span class=o>`</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─s─────┬─n.x─┬─n.y─┬─nest.x──┬─nest.y─────┬─num─┐
│ Hello │   1 │  10 │ [1,2]   │ [10,20]    │   1 │
│ Hello │   2 │  20 │ [1,2]   │ [10,20]    │   2 │
│ World │   3 │  30 │ [3,4,5] │ [30,40,50] │   1 │
│ World │   4 │  40 │ [3,4,5] │ [30,40,50] │   2 │
│ World │   5 │  50 │ [3,4,5] │ [30,40,50] │   3 │
└───────┴─────┴─────┴─────────┴────────────┴─────┘
</code></pre></div> <h3 id=select-join>JOIN句<a class=headerlink href=#select-join title="Permanent link">&para;</a></h3> <p>通常のデータを結合します <a href=https://en.wikipedia.org/wiki/Join_(SQL) rel="external nofollow noreferrer">SQL JOIN</a> センス</p> <div class="admonition info"> <p class=admonition-title>メモ</p> <p>関連しない <a href=#select-array-join-clause>ARRAY JOIN</a>.</p> </div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>&lt;</span><span class=n>expr_list</span><span class=o>&gt;</span>
<span class=k>FROM</span> <span class=o>&lt;</span><span class=n>left_subquery</span><span class=o>&gt;</span>
<span class=p>[</span><span class=k>GLOBAL</span><span class=p>]</span> <span class=p>[</span><span class=k>ANY</span><span class=o>|</span><span class=k>ALL</span><span class=p>]</span> <span class=p>[</span><span class=k>INNER</span><span class=o>|</span><span class=k>LEFT</span><span class=o>|</span><span class=k>RIGHT</span><span class=o>|</span><span class=k>FULL</span><span class=o>|</span><span class=k>CROSS</span><span class=p>]</span> <span class=p>[</span><span class=k>OUTER</span><span class=p>]</span> <span class=k>JOIN</span> <span class=o>&lt;</span><span class=n>right_subquery</span><span class=o>&gt;</span>
<span class=p>(</span><span class=k>ON</span> <span class=o>&lt;</span><span class=n>expr_list</span><span class=o>&gt;</span><span class=p>)</span><span class=o>|</span><span class=p>(</span><span class=k>USING</span> <span class=o>&lt;</span><span class=n>column_list</span><span class=o>&gt;</span><span class=p>)</span> <span class=p>...</span>
</code></pre></div> <p>テーブル名は次の代わりに指定できます <code>&lt;left_subquery&gt;</code> と <code>&lt;right_subquery&gt;</code>. これは、 <code>SELECT * FROM table</code> サブクエリは、テーブルが次のものを持つ特殊な場合を除きます。 <a href=../../../engines/table_engines/special/join/ >参加</a> engine – an array prepared for joining.</p> <h4 id=select-join-types>サポートされる種類の <code>JOIN</code><a class=headerlink href=#select-join-types title="Permanent link">&para;</a></h4> <ul> <li><code>INNER JOIN</code> （または <code>JOIN</code>)</li> <li><code>LEFT JOIN</code> （または <code>LEFT OUTER JOIN</code>)</li> <li><code>RIGHT JOIN</code> （または <code>RIGHT OUTER JOIN</code>)</li> <li><code>FULL JOIN</code> （または <code>FULL OUTER JOIN</code>)</li> <li><code>CROSS JOIN</code> （または <code>,</code> )</li> </ul> <p>標準を参照してください <a href=https://en.wikipedia.org/wiki/Join_(SQL) rel="external nofollow noreferrer">SQL JOIN</a> 説明。</p> <h4 id=multiple-join>複数の結合<a class=headerlink href=#multiple-join title="Permanent link">&para;</a></h4> <p>クエリを実行すると、clickhouseはマルチテーブル結合を二つのテーブル結合のシーケンスに書き換えます。 たとえば、clickhouseに参加するための四つのテーブルがある場合は、最初と二番目のテーブルを結合し、その結果を三番目のテーブルに結合し、最後のステップで</p> <p>クエリが含まれている場合、 <code>WHERE</code> 句、ClickHouseはこの句から中間結合を介してプッシュダウンフィルターを試行します。 各中間結合にフィルタを適用できない場合、ClickHouseはすべての結合が完了した後にフィルタを適用します。</p> <p>私たちはお勧め <code>JOIN ON</code> または <code>JOIN USING</code> クエリを作成するための構文。 例えば:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t1</span> <span class=k>JOIN</span> <span class=n>t2</span> <span class=k>ON</span> <span class=n>t1</span><span class=p>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>t2</span><span class=p>.</span><span class=n>a</span> <span class=k>JOIN</span> <span class=n>t3</span> <span class=k>ON</span> <span class=n>t1</span><span class=p>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>t3</span><span class=p>.</span><span class=n>a</span>
</code></pre></div> <p>テーブルのコンマ区切りリストを使用することができます <code>FROM</code> 句。 例えば:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t1</span><span class=p>,</span> <span class=n>t2</span><span class=p>,</span> <span class=n>t3</span> <span class=k>WHERE</span> <span class=n>t1</span><span class=p>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>t2</span><span class=p>.</span><span class=n>a</span> <span class=k>AND</span> <span class=n>t1</span><span class=p>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>t3</span><span class=p>.</span><span class=n>a</span>
</code></pre></div> <p>これらの構文を混在させないでください。</p> <p>ClickHouseはカンマで構文を直接サポートしていないので、使用することはお勧めしません。 このアルゴ <code>CROSS JOIN</code> と <code>INNER JOIN</code> クエリ処理に進みます。 クエリを書き換えるとき、ClickHouseはパフォーマンスとメモリ消費の最適化を試みます。 デフォルトでは、ClickHouseはコンマを <code>INNER JOIN</code> 句と変換 <code>INNER JOIN</code> に <code>CROSS JOIN</code> アルゴリズムが保証できない場合 <code>INNER JOIN</code> 必要なデータを返します。</p> <h4 id=select-join-strictness>厳密さ<a class=headerlink href=#select-join-strictness title="Permanent link">&para;</a></h4> <ul> <li><code>ALL</code> — If the right table has several matching rows, ClickHouse creates a <a href=https://en.wikipedia.org/wiki/Cartesian_product rel="external nofollow noreferrer">デカルト積</a> 一致する行から。 これが標準です <code>JOIN</code> SQLでの動作。</li> <li><code>ANY</code> — If the right table has several matching rows, only the first one found is joined. If the right table has only one matching row, the results of queries with <code>ANY</code> と <code>ALL</code> キーワードは同じです。</li> <li><code>ASOF</code> — For joining sequences with a non-exact match. <code>ASOF JOIN</code> 以下に使用方法を説明します。</li> </ul> <p><strong>ASOF結合の使用</strong></p> <p><code>ASOF JOIN</code> 完全一致のないレコードを結合する必要がある場合に便利です。</p> <p>テーブルのため <code>ASOF JOIN</code> 順序列の列を持つ必要があります。 この列はテーブル内で単独で使用することはできません。: <code>UInt32</code>, <code>UInt64</code>, <code>Float32</code>, <code>Float64</code>, <code>Date</code>、と <code>DateTime</code>.</p> <p>構文 <code>ASOF JOIN ... ON</code>:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>expressions_list</span>
<span class=k>FROM</span> <span class=n>table_1</span>
<span class=n>ASOF</span> <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>table_2</span>
<span class=k>ON</span> <span class=n>equi_cond</span> <span class=k>AND</span> <span class=n>closest_match_cond</span>
</code></pre></div> <p>任意の数の等価条件と正確に最も近い一致条件を使用できます。 例えば, <code>SELECT count() FROM table_1 ASOF LEFT JOIN table_2 ON table_1.a == table_2.b AND table_2.t &lt;= table_1.t</code>.</p> <p>最も近い一致でサポートされる条件: <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>.</p> <p>構文 <code>ASOF JOIN ... USING</code>:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>expressions_list</span>
<span class=k>FROM</span> <span class=n>table_1</span>
<span class=n>ASOF</span> <span class=k>JOIN</span> <span class=n>table_2</span>
<span class=k>USING</span> <span class=p>(</span><span class=n>equi_column1</span><span class=p>,</span> <span class=p>...</span> <span class=n>equi_columnN</span><span class=p>,</span> <span class=n>asof_column</span><span class=p>)</span>
</code></pre></div> <p><code>ASOF JOIN</code> 使用 <code>equi_columnX</code> 平等に参加するための <code>asof_column</code> との最も近い試合に参加するための <code>table_1.asof_column &gt;= table_2.asof_column</code> 条件。 その <code>asof_column</code> 列は常に最後の列です <code>USING</code> 句。</p> <p>たとえば、次の表を考えてみます:</p> <p>'テキスト<br> テーブル1テーブル2</p> <p>イベント/ev_time|user_idイベント/ev_time|user_id</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>から構築 <a href=https://github.com/ClickHouse/ClickHouse/commit/3166eab2dfc89323b9d756aeba6866381fd9c186 rel="external nofollow noreferrer" target=_blank class=text-reset>3166eab2df</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>テーブルの内容</label> <a href=#with-clause title=With句 class="nav-link text-wrap d-inline-block w-100"> With句 </a> <a href=#select-from title=FROM句 class="nav-link text-wrap d-inline-block w-100"> FROM句 </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#select-from-final title=最終修飾子 class="nav-link text-wrap d-inline-block w-100"> 最終修飾子 </a> </nav> <a href=#select-sample-clause title=サンプル句 class="nav-link text-wrap d-inline-block w-100"> サンプル句 </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#select-sample-k title="SAMPLE K" class="nav-link text-wrap d-inline-block w-100"> SAMPLE K </a> <a href=#select-sample-n title="SAMPLE N" class="nav-link text-wrap d-inline-block w-100"> SAMPLE N </a> <a href=#select-sample-offset title="SAMPLE K OFFSET M" class="nav-link text-wrap d-inline-block w-100"> SAMPLE K OFFSET M </a> </nav> <a href=#select-array-join-clause title=配列結合句 class="nav-link text-wrap d-inline-block w-100"> 配列結合句 </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#using-aliases title=エイリアスの使用 class="nav-link text-wrap d-inline-block w-100"> エイリアスの使用 </a> <a href=#array-join-with-nested-data-structure title=配列の参加入れ子データ構造 class="nav-link text-wrap d-inline-block w-100"> 配列の参加入れ子データ構造 </a> </nav> <a href=#select-join title=JOIN句 class="nav-link text-wrap d-inline-block w-100"> JOIN句 </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#select-join-types title="サポートされる種類の JOIN" class="nav-link text-wrap d-inline-block w-100"> サポートされる種類の JOIN </a> <a href=#multiple-join title=複数の結合 class="nav-link text-wrap d-inline-block w-100"> 複数の結合 </a> <a href=#select-join-strictness title=厳密さ class="nav-link text-wrap d-inline-block w-100"> 厳密さ </a> </nav> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
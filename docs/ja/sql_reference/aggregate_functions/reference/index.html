<!DOCTYPE html><html lang=ja data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>参照 - ClickHouseドキュメント</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="参照 - ClickHouseドキュメント "><meta property=og:description content="関数リファレンス カウント 行数またはnull以外の値をカウントします。 ClickHouseは以下の構文をサポートしています count: - count(expr) または COUNT(DISTINCT expr). - count()"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="参照 - ClickHouseドキュメント "><meta name=description content="関数リファレンス カウント 行数またはnull以外の値をカウントします。 ClickHouseは以下の構文をサポートしています count: - count(expr) または COUNT(DISTINCT expr). - count()"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> 参照 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/sql_reference/aggregate_functions/reference.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ja.svg alt=日本語 title=日本語 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/sql_reference/aggregate_functions/reference/ class="dropdown-item disabled"> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=複数ページまたは単一ページ> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt=複数ページバージョン title=複数ページバージョン> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt=単一ページ版 title=単一ページ版> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> バージョン: <span class=text-light>最新の</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/ja/ class="dropdown-item disable"> <span class=text-light>最新の</span> </a> <a href=/docs/v20.3/ja/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/ja/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/ja/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/ja/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/ja/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/ja/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/ja/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/ja/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/ja/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/ja/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/ja/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../introduction/distinctive_features/ title=特徴的な機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特徴的な機能</a> <a href=../../../introduction/features_considered_disadvantages/ title=欠点と見なすことができるClickHouseの機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">欠点と見なすことができるClickHouseの機能</a> <a href=../../../introduction/performance/ title=パフォーマンス class="nav-link text-light text-wrap d-inline-block w-100 px-0">パフォーマンス</a> <a href=../../../introduction/history/ title=歴史 class="nav-link text-light text-wrap d-inline-block w-100 px-0">歴史</a> <a href=../../../introduction/adopters/ title=アーリーアダプター class="nav-link text-light text-wrap d-inline-block w-100 px-0">アーリーアダプター</a> </nav> </div> <a href=../../../ title=概観 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概観</a> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../../getting_started/install/ title=設置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設置</a> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../getting_started/example_datasets/ontime/ title=オンタイム class="nav-link text-light text-wrap d-inline-block w-100 px-0">オンタイム</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title=ニューヨーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">ニューヨーク</a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Dataベンチマーク" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Dataベンチマーク</a> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting_started/example_datasets/criteo/ title=CriteoからのTerabyteクリックログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">CriteoからのTerabyteクリックログ</a> <a href=../../../getting_started/example_datasets/star_schema/ title=スタースキーマのベンチマーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">スタースキーマのベンチマーク</a> <a href=../../../getting_started/example_datasets/metrica/ title=Yandexの。Metricaデータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandexの。Metricaデータ</a> </nav> </div> <a href=../../../getting_started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../../getting_started/playground/ title=遊び場 class="nav-link text-light text-wrap d-inline-block w-100 px-0">遊び場</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../interfaces/cli/ title=コマンドライン class="nav-link text-light text-wrap d-inline-block w-100 px-0">コマンドライン</a> <a href=../../../interfaces/tcp/ title=ネイティブインタフェース(TCP) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネイティブインタフェース(TCP)</a> <a href=../../../interfaces/http/ title=HTTPインター class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTPインター</a> <a href=../../../interfaces/mysql/ title=MySQLイン class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQLイン</a> <a href=../../../interfaces/formats/ title=入力および出力形式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力および出力形式</a> <a href=../../../interfaces/jdbc/ title=JDBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBCドライバ</a> <a href=../../../interfaces/odbc/ title=ODBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBCドライバ</a> <a href=../../../interfaces/cpp/ title=C++クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++クライアント</a> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../interfaces/third-party/client_libraries/ title=クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">クライアント</a> <a href=../../../interfaces/third-party/integrations/ title=統合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">統合</a> <a href=../../../interfaces/third-party/gui/ title=ビジュアル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビジュアル</a> <a href=../../../interfaces/third-party/proxy/ title=プロキシ class="nav-link text-light text-wrap d-inline-block w-100 px-0">プロキシ</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table_engines/mergetree_family/replication/ title=データ複製 class="nav-link text-light text-wrap d-inline-block w-100 px-0">データ複製</a> <a href=../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title=カスタム分割キー class="nav-link text-light text-wrap d-inline-block w-100 px-0">カスタム分割キー</a> <a href=../../../engines/table_engines/mergetree_family/replacingmergetree/ title=ﾂつｨﾂ姪 ﾂつ&quot;ﾂ債ﾂつｹ&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつｨﾂ姪"ﾂつ"ﾂ債ﾂつｹ</a> <a href=../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=ﾂつｨﾂ姪 ﾂつ&quot;ﾂ債ﾂづｭﾂつｹ&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつｨﾂ姪"ﾂつ"ﾂ債ﾂづｭﾂつｹ</a> <a href=../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/graphitemergetree/ title=グラフィットメールグツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">グラフィットメールグツリー</a> </nav> </div> <a href=#sidebar-sidebar-5-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../engines/table_engines/log_family/log_family/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../engines/table_engines/log_family/stripelog/ title=ストリップログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ストリップログ</a> <a href=../../../engines/table_engines/log_family/log/ title=ログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ログ</a> <a href=../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../engines/table_engines/integrations/kafka/ title=カフカname class="nav-link text-light text-wrap d-inline-block w-100 px-0">カフカname</a> <a href=../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../engines/table_engines/special/distributed/ title=分散 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分散</a> <a href=../../../engines/table_engines/special/external_data/ title=外部データ class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部データ</a> <a href=../../../engines/table_engines/special/dictionary/ title=辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書</a> <a href=../../../engines/table_engines/special/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../../engines/table_engines/special/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../../engines/table_engines/special/null/ title=ヌル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ヌル</a> <a href=../../../engines/table_engines/special/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../../engines/table_engines/special/join/ title=参加 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参加</a> <a href=../../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../engines/table_engines/special/view/ title=ビュー class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビュー</a> <a href=../../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table_engines/special/memory/ title=メモリ class="nav-link text-light text-wrap d-inline-block w-100 px-0">メモリ</a> <a href=../../../engines/table_engines/special/buffer/ title=バッファ class="nav-link text-light text-wrap d-inline-block w-100 px-0">バッファ</a> <a href=../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database_engines/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database_engines/lazy/ title=怠け者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">怠け者</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../sql_reference/statements/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql_reference/statements/misc/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> </nav> </div> <a href=../../../sql_reference/syntax/ title=構文 class="nav-link text-light text-wrap d-inline-block w-100 px-0">構文</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../sql_reference/functions/arithmetic_functions/ title=算数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算数</a> <a href=../../../sql_reference/functions/comparison_functions/ title=比較 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比較</a> <a href=../../../sql_reference/functions/logical_functions/ title=論理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">論理</a> <a href=../../../sql_reference/functions/type_conversion_functions/ title=タイプ変換 class="nav-link text-light text-wrap d-inline-block w-100 px-0">タイプ変換</a> <a href=../../../sql_reference/functions/date_time_functions/ title=日付と時刻の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付と時刻の操作</a> <a href=../../../sql_reference/functions/string_functions/ title=文字列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列の操作</a> <a href=../../../sql_reference/functions/string_search_functions/ title=文字列を検索する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列を検索する場合</a> <a href=../../../sql_reference/functions/string_replace_functions/ title=文字列で置換する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列で置換する場合</a> <a href=../../../sql_reference/functions/conditional_functions/ title=条件付き class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件付き</a> <a href=../../../sql_reference/functions/math_functions/ title=数学 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学</a> <a href=../../../sql_reference/functions/rounding_functions/ title=丸め class="nav-link text-light text-wrap d-inline-block w-100 px-0">丸め</a> <a href=../../../sql_reference/functions/array_functions/ title=配列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列の操作</a> <a href=../../../sql_reference/functions/splitting_merging_functions/ title=文字列と配列の分割とマージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列と配列の分割とマージ</a> <a href=../../../sql_reference/functions/bit_functions/ title=ビット class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビット</a> <a href=../../../sql_reference/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../../sql_reference/functions/hash_functions/ title=ハッシュ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハッシュ</a> <a href=../../../sql_reference/functions/random_functions/ title=擬似乱数の生成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">擬似乱数の生成</a> <a href=../../../sql_reference/functions/encoding_functions/ title=エンコード class="nav-link text-light text-wrap d-inline-block w-100 px-0">エンコード</a> <a href=../../../sql_reference/functions/uuid_functions/ title=UUIDの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUIDの操作</a> <a href=../../../sql_reference/functions/url_functions/ title=Urlの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Urlの操作</a> <a href=../../../sql_reference/functions/ip_address_functions/ title=IPアドレスの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPアドレスの操作</a> <a href=../../../sql_reference/functions/json_functions/ title=JSONでの作業 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSONでの作業</a> <a href=../../../sql_reference/functions/higher_order_functions/ title=より高い次数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">より高い次数</a> <a href=../../../sql_reference/functions/ext_dict_functions/ title=外部辞書の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書の操作</a> <a href=../../../sql_reference/functions/ym_dict_functions/ title=Yandexのでの作業。メトリカ辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandexのでの作業。メトリカ辞書</a> <a href=../../../sql_reference/functions/in_functions/ title=IN演算子の実装 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN演算子の実装</a> <a href=../../../sql_reference/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../sql_reference/functions/geo/ title=地理座標の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">地理座標の操作</a> <a href=../../../sql_reference/functions/functions_for_nulls/ title=ヌル可能な引数の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ヌル可能な引数の操作</a> <a href=../../../sql_reference/functions/machine_learning_functions/ title=機械学習の機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">機械学習の機能</a> <a href=../../../sql_reference/functions/introspection/ title=イントロスペクション class="nav-link text-light text-wrap d-inline-block w-100 px-0">イントロスペクション</a> <a href=../../../sql_reference/functions/other_functions/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/aggregate_functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../sql_reference/aggregate_functions/reference/ title=参照 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">参照</a> <a href=../../../sql_reference/aggregate_functions/combinators/ title=集計関数のコンビネータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">集計関数のコンビネータ</a> <a href=../../../sql_reference/aggregate_functions/parametric_functions/ title=パラメトリック集計関数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">パラメトリック集計関数</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/table_functions/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../sql_reference/table_functions/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../../sql_reference/table_functions/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../../sql_reference/table_functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../../sql_reference/table_functions/remote/ title=リモート class="nav-link text-light text-wrap d-inline-block w-100 px-0">リモート</a> <a href=../../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql_reference/table_functions/input/ title=入力 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力</a> <a href=../../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title=一般的な説明 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な説明</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title=外部ディクショナリの設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部ディクショナリの設定</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title=辞書をメモリに保存する class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書をメモリに保存する</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title=辞書の更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書の更新</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title=外部辞書のソース class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書のソース</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title=辞書のキーとフィールド class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書のキーとフィールド</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title=階層辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">階層辞書</a> </nav> </div> <a href=../../../sql_reference/dictionaries/internal_dicts/ title=内部辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部辞書</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../sql_reference/data_types/int_uint/ title=UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64</a> <a href=../../../sql_reference/data_types/float/ title=Float32,Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32,Float64</a> <a href=../../../sql_reference/data_types/decimal/ title=小数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">小数</a> <a href=../../../sql_reference/data_types/boolean/ title=ブール値 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ブール値</a> <a href=../../../sql_reference/data_types/string/ title=文字列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列</a> <a href=../../../sql_reference/data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql_reference/data_types/date/ title=日付 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付</a> <a href=../../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql_reference/data_types/enum/ title=列挙型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">列挙型</a> <a href=../../../sql_reference/data_types/array/ title=配列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列(T)</a> <a href=../../../sql_reference/data_types/aggregatefunction/ title=AggregateFunction(name,types_of_arguments)...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name,types_of_arguments)...)</a> <a href=../../../sql_reference/data_types/tuple/ title=タプル(T1,T2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">タプル(T1,T2,...)</a> <a href=#sidebar-sidebar-6-8-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-6-8-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/nested_data_structures/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../../sql_reference/data_types/nested_data_structures/nested/ title=ネスト(Name1タイプ1,Name2タイプ2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネスト(Name1タイプ1,Name2タイプ2,...)</a> </nav> </div> <a href=../../../sql_reference/data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-6-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-6-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/special_data_types/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../../sql_reference/data_types/special_data_types/expression/ title=式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">式</a> <a href=../../../sql_reference/data_types/special_data_types/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../../sql_reference/data_types/special_data_types/nothing/ title=何もない class="nav-link text-light text-wrap d-inline-block w-100 px-0">何もない</a> <a href=../../../sql_reference/data_types/special_data_types/interval/ title=間隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">間隔</a> </nav> </div> <a href=#sidebar-sidebar-6-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../sql_reference/data_types/domains/overview/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../../sql_reference/operators/ title=演算子 class="nav-link text-light text-wrap d-inline-block w-100 px-0">演算子</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../guides/apply_catboost_model/ title=CatBoostモデルの適用 class="nav-link text-light text-wrap d-inline-block w-100 px-0">CatBoostモデルの適用</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../operations/requirements/ title=要件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要件</a> <a href=../../../operations/monitoring/ title=監視 class="nav-link text-light text-wrap d-inline-block w-100 px-0">監視</a> <a href=../../../operations/troubleshooting/ title=トラブル class="nav-link text-light text-wrap d-inline-block w-100 px-0">トラブル</a> <a href=../../../operations/update/ title=クリックハウス更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウス更新</a> <a href=../../../operations/access_rights/ title=アクセス権 class="nav-link text-light text-wrap d-inline-block w-100 px-0">アクセス権</a> <a href=../../../operations/backup/ title=データバック class="nav-link text-light text-wrap d-inline-block w-100 px-0">データバック</a> <a href=../../../operations/configuration_files/ title=設定ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定ファイル</a> <a href=../../../operations/quotas/ title=クォータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">クォータ</a> <a href=#sidebar-sidebar-8-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-10 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-8-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../operations/optimizing_performance/sampling_query_profiler/ title=Queryプロファイリング class="nav-link text-light text-wrap d-inline-block w-100 px-0">Queryプロファイリング</a> </nav> </div> <a href=../../../operations/system_tables/ title=システム表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">システム表</a> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_configuration_parameters/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../operations/server_configuration_parameters/settings/ title=サーバー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">サーバー設定</a> </nav> </div> <a href=../../../operations/performance_test/ title=ハードウェア試験 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハードウェア試験</a> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=導入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">導入</a> <a href=../../../operations/settings/permissions_for_queries/ title=クエリの権限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの権限</a> <a href=../../../operations/settings/query_complexity/ title=クエリの複雑さの制限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの複雑さの制限</a> <a href=../../../operations/settings/settings/ title=設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定</a> <a href=../../../operations/settings/settings_profiles/ title=設定プロファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定プロファイル</a> <a href=../../../operations/settings/constraints_on_settings/ title=設定の制約 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定の制約</a> <a href=../../../operations/settings/settings_users/ title=ユーザー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ユーザー設定</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../operations/utilities/clickhouse-copier/ title=クリックハウスコピー機 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウスコピー機</a> <a href=../../../operations/utilities/clickhouse-local/ title=ﾂつ ﾂづ按つｵﾂ！&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつ"ﾂづ按つｵﾂ！</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-ベンチマーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-ベンチマーク</a> </nav> </div> <a href=../../../operations/tips/ title=使用の推奨事項 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用の推奨事項</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/ title=隠された class="nav-link text-light text-wrap d-inline-block w-100 px-0">隠された</a> <a href=../../../development/developer_instruction/ title=初心者の方ClickHouse開発者の指示 class="nav-link text-light text-wrap d-inline-block w-100 px-0">初心者の方ClickHouse開発者の指示</a> <a href=../../../development/architecture/ title=クリックハウスの概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウスの概要</a> <a href=../../../development/browse_code/ title=ClickHouseのソースコードを参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseのソースコードを参照</a> <a href=../../../development/build/ title=LinuxでClickHouseを構築する方法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">LinuxでClickHouseを構築する方法</a> <a href=../../../development/build_osx/ title="Mac OS XでClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS XでClickHouseを構築する方法</a> <a href=../../../development/build_cross_osx/ title="Mac OS X用のLinuxでClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS X用のLinuxでClickHouseを構築する方法</a> <a href=../../../development/build_cross_arm/ title=AARCH64用LinuxでClickHouseをビルドする方法（ARM64) class="nav-link text-light text-wrap d-inline-block w-100 px-0">AARCH64用LinuxでClickHouseをビルドする方法（ARM64)</a> <a href=../../../development/style/ title=C++コードの書き方 class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++コードの書き方</a> <a href=../../../development/tests/ title=ClickHouseテストを実行する方法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseテストを実行する方法</a> <a href=../../../development/contrib/ title=サードパーティ製ライブラリ class="nav-link text-light text-wrap d-inline-block w-100 px-0">サードパーティ製ライブラリ</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../commercial/cloud/ title=ClickHouseしてクラウドサービスプロバイダ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouseしてクラウドサービスプロバイダ</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../whats_new/roadmap/ title=ロードマップ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ロードマップ</a> <a href=../../../whats_new/security_changelog/ title=セキュリティの変更履歴 class="nav-link text-light text-wrap d-inline-block w-100 px-0">セキュリティの変更履歴</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../faq/general/ title=一般的な質問 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な質問</a> </nav> </div> <a href=../../../single/clickhouse_ja.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDFバージョン title=PDFバージョン height=24 class="d-block mr-1 float-left"><div>PDFバージョン</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">助けが欲しかった！</p> <p class=lead>このドキュメントページの以下の内容は機械翻訳されています。 異な他のウェブサイトで行われませんができます。 この翻訳テキスト生活をGitHubリポジトリとClickHouseコードベース、待ち員ネイティブスピーカーで人間が読む.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/sql_reference/aggregate_functions/reference.md target=_blank rel="external nofollow noreferrer"> このページを編集してClickHouseの文書を編集する </a> </p> </div> <h1 id=function-reference>関数リファレンス<a class=headerlink href=#function-reference title="Permanent link">&para;</a></h1> <h2 id=agg_function-count>カウント<a class=headerlink href=#agg_function-count title="Permanent link">&para;</a></h2> <p>行数またはnull以外の値をカウントします。</p> <p>ClickHouseは以下の構文をサポートしています <code>count</code>:<br> - <code>count(expr)</code> または <code>COUNT(DISTINCT expr)</code>.<br> - <code>count()</code> または <code>COUNT(*)</code>. その <code>count()</code> 構文はClickHouse固有です。</p> <p><strong>パラメータ</strong></p> <p>機能は取ることができます:</p> <ul> <li>ゼロ変数。</li> <li>ワン <a href=../../syntax/#syntax-expressions>式</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>関数がパラメータなしで呼び出されると、行数がカウントされます。</li> <li>この <a href=../../syntax/#syntax-expressions>式</a> が渡されると、この関数は、この式がnullではなく返された回数をカウントします。 式がaを返す場合 <a href=../../data_types/nullable/ >Nullable</a>-タイプ値、そして結果の <code>count</code> 滞在しない <code>Nullable</code>. 式が返された場合、関数は0を返します <code>NULL</code> すべての行について。</li> </ul> <p>どちらの場合も、戻り値の型は次のようになります <a href=../../data_types/int_uint/ >UInt64</a>.</p> <p><strong>詳細</strong></p> <p>クリックハウスは <code>COUNT(DISTINCT ...)</code> 構文。 この構成の動作は、 <a href=../../../operations/settings/settings/#settings-count_distinct_implementation>count_distinct_implementation</a> 設定。 それはどれをの定義します <a href=#agg_function-uniq>uniq*</a> 関数は、操作を実行するために使用されます。 デフォルトは <a href=#agg_function-uniqexact>ユニキャック</a> 機能。</p> <p>その <code>SELECT count() FROM table</code> テーブル内のエントリの数が別々に格納されていないため、クエリは最適化されません。 テーブルから小さな列を選択し、その中の値の数を数えます。</p> <p><strong>例</strong></p> <p>例1:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─count()─┐
│       5 │
└─────────┘
</code></pre></div> <p>例2:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;count_distinct_implementation&#39;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─name──────────────────────────┬─value─────┐
│ count_distinct_implementation │ uniqExact │
└───────────────────────────────┴───────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>count</span><span class=p>(</span><span class=k>DISTINCT</span> <span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─uniqExact(num)─┐
│              3 │
└────────────────┘
</code></pre></div> <p>この例では、 <code>count(DISTINCT num)</code> によって実行される。 <code>uniqExact</code> に従う機能 <code>count_distinct_implementation</code> 設定値。</p> <h2 id=agg_function-any>任意(x)<a class=headerlink href=#agg_function-any title="Permanent link">&para;</a></h2> <p>最初に検出された値を選択します。<br> クエリは、毎回異なる順序で実行することができるため、この関数の結果は不確定です。<br> 確定的な結果を得るには、 ‘min’ または ‘max’ 関数の代わりに ‘any’.</p> <p>場合によっては、実行順序に頼ることができます。 これは、order byを使用するサブクエリからのselectの場合に適用されます。</p> <p>とき <code>SELECT</code> クエリには <code>GROUP BY</code> 句または少なくとも一つの集計関数、ClickHouse（MySQLとは対照的に）内のすべての式ということが必要です <code>SELECT</code>, <code>HAVING</code>、と <code>ORDER BY</code> 句は、キーまたは集計関数から計算されます。 つまり、テーブルから選択された各列は、キーまたは集計関数内で使用する必要があります。 MySQLのような動作を得るには、他の列を <code>any</code> 集計関数。</p> <h2 id=anyheavyx>anyHeavy(x)<a class=headerlink href=#anyheavyx title="Permanent link">&para;</a></h2> <p>頻繁に発生する値を選択します。 <a href=http://www.cs.umd.edu/~samir/498/karp.pdf rel="external nofollow noreferrer">ヘビーヒッターズ</a> アルゴリズムだ 各クエリの実行スレッドのケースの半分を超える値がある場合は、この値が返されます。 通常、結果は非決定的です。</p> <div class=codehilite><pre><span></span><code><span class=n>anyHeavy</span><span class=p>(</span><span class=k>column</span><span class=p>)</span>
</code></pre></div> <p><strong>引数</strong></p> <ul> <li><code>column</code> – The column name.</li> </ul> <p><strong>例えば</strong></p> <p>を取る <a href=../../../getting_started/example_datasets/ontime/ >オンタイム</a> データセットと選択頻繁に発生する値で <code>AirlineID</code> コラム</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>anyHeavy</span><span class=p>(</span><span class=n>AirlineID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌───res─┐
│ 19690 │
└───────┘
</code></pre></div> <h2 id=anylastx>anyllast(x)<a class=headerlink href=#anylastx title="Permanent link">&para;</a></h2> <p>最後に検出された値を選択します。<br> 結果は、次の場合と同様に不確定です <code>any</code> 機能。</p> <h2 id=groupbitand>groupBitAnd<a class=headerlink href=#groupbitand title="Permanent link">&para;</a></h2> <p>ビットごとの適用 <code>AND</code> 一連の数字のために。</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitAnd</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> タイプ。</p> <p><strong>戻り値</strong></p> <p>の値 <code>UInt*</code> タイプ。</p> <p><strong>例えば</strong></p> <p>テストデータ:</p> <div class=codehilite><pre><span></span><code>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>groupBitAnd</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>どこに <code>num</code> テストデータの列です。</p> <p>結果:</p> <div class=codehilite><pre><span></span><code>binary     decimal
00000100 = 4
</code></pre></div> <h2 id=groupbitor>groupBitOr<a class=headerlink href=#groupbitor title="Permanent link">&para;</a></h2> <p>ビットごとの適用 <code>OR</code> 一連の数字のために。</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> タイプ。</p> <p><strong>戻り値</strong></p> <p>の値 <code>UInt*</code> タイプ。</p> <p><strong>例えば</strong></p> <p>テストデータ:</p> <div class=codehilite><pre><span></span><code>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>groupBitOr</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>どこに <code>num</code> テストデータの列です。</p> <p>結果:</p> <div class=codehilite><pre><span></span><code>binary     decimal
01111101 = 125
</code></pre></div> <h2 id=groupbitxor>groupBitXor<a class=headerlink href=#groupbitxor title="Permanent link">&para;</a></h2> <p>ビットごとの適用 <code>XOR</code> 一連の数字のために。</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitXor</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> タイプ。</p> <p><strong>戻り値</strong></p> <p>の値 <code>UInt*</code> タイプ。</p> <p><strong>例えば</strong></p> <p>テストデータ:</p> <div class=codehilite><pre><span></span><code>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>groupBitXor</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>どこに <code>num</code> テストデータの列です。</p> <p>結果:</p> <div class=codehilite><pre><span></span><code>binary     decimal
01101000 = 104
</code></pre></div> <h2 id=groupbitmap>groupBitmap<a class=headerlink href=#groupbitmap title="Permanent link">&para;</a></h2> <p>符号なし整数列からのビットマップ計算または集計計算を行い、uint64型のカーディナリティを返します。 <a href=../../functions/bitmap_functions/ >ビットマップ</a>.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitmap</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> タイプ。</p> <p><strong>戻り値</strong></p> <p>の値 <code>UInt64</code> タイプ。</p> <p><strong>例えば</strong></p> <p>テストデータ:</p> <div class=codehilite><pre><span></span><code>UserID
1
1
2
3
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>groupBitmap</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span> <span class=k>as</span> <span class=n>num</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>num
3
</code></pre></div> <h2 id=agg_function-min>最小(x)<a class=headerlink href=#agg_function-min title="Permanent link">&para;</a></h2> <p>最小値を計算します。</p> <h2 id=agg_function-max>最大(x)<a class=headerlink href=#agg_function-max title="Permanent link">&para;</a></h2> <p>最大値を計算します。</p> <h2 id=agg-function-argmin>argMin(arg,val)<a class=headerlink href=#agg-function-argmin title="Permanent link">&para;</a></h2> <p>を計算し ‘arg’ 最小値の値 ‘val’ 値。 いくつかの異なる値がある場合 ‘arg’ のための最小値 ‘val’ これらの値のうち、最初に検出された値が出力されます。</p> <p><strong>例えば:</strong></p> <div class=codehilite><pre><span></span><code>┌─user─────┬─salary─┐
│ director │   5000 │
│ manager  │   3000 │
│ worker   │   1000 │
└──────────┴────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>argMin</span><span class=p>(</span><span class=k>user</span><span class=p>,</span> <span class=n>salary</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>salary</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─argMin(user, salary)─┐
│ worker               │
└──────────────────────┘
</code></pre></div> <h2 id=agg-function-argmax>argMax(arg,val)<a class=headerlink href=#agg-function-argmax title="Permanent link">&para;</a></h2> <p>を計算し ‘arg’ 最大値の値 ‘val’ 値。 いくつかの異なる値がある場合 ‘arg’ の最大値 ‘val’ これらの値のうち、最初に検出された値が出力されます。</p> <h2 id=agg_function-sum>sum(x)<a class=headerlink href=#agg_function-sum title="Permanent link">&para;</a></h2> <p>合計を計算します。<br> 数字のためにのみ動作します。</p> <h2 id=sumwithoverflowx>sumWithOverflow(x)<a class=headerlink href=#sumwithoverflowx title="Permanent link">&para;</a></h2> <p>入力パラメーターの結果と同じデータ型を使用して、数値の合計を計算します。 合計がこのデータ型の最大値を超えると、関数はエラーを返します。</p> <p>数字のためにのみ動作します。</p> <h2 id=agg_functions-summap>sumMap(キー,値)<a class=headerlink href=#agg_functions-summap title="Permanent link">&para;</a></h2> <p>合計 ‘value’ 配列に指定されたキーに応じて ‘key’ 配列だ<br> の要素の数 ‘key’ と ‘value’ 合計される行ごとに同じでなければなりません。<br> Returns a tuple of two arrays: keys in sorted order, and values ​​summed for the corresponding keys.</p> <p>例えば:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>sum_map</span><span class=p>(</span>
    <span class=nb>date</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=n>timeslot</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>statusMap</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>status</span> <span class=n>UInt16</span><span class=p>,</span>
        <span class=n>requests</span> <span class=n>UInt64</span>
    <span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>sum_map</span> <span class=k>VALUES</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:00:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:00:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:01:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:01:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]);</span>
<span class=k>SELECT</span>
    <span class=n>timeslot</span><span class=p>,</span>
    <span class=n>sumMap</span><span class=p>(</span><span class=n>statusMap</span><span class=p>.</span><span class=n>status</span><span class=p>,</span> <span class=n>statusMap</span><span class=p>.</span><span class=n>requests</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>sum_map</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>timeslot</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌────────────timeslot─┬─sumMap(statusMap.status, statusMap.requests)─┐
│ 2000-01-01 00:00:00 │ ([1,2,3,4,5],[10,10,20,10,10])               │
│ 2000-01-01 00:01:00 │ ([4,5,6,7,8],[10,10,20,10,10])               │
└─────────────────────┴──────────────────────────────────────────────┘
</code></pre></div> <h2 id=skewpop>skewPop<a class=headerlink href=#skewpop title="Permanent link">&para;</a></h2> <p>を計算します <a href=https://en.wikipedia.org/wiki/Skewness rel="external nofollow noreferrer">歪み</a> シーケンスの。</p> <div class=codehilite><pre><span></span><code><span class=n>skewPop</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>式</a> 番号を返す。</p> <p><strong>戻り値</strong></p> <p>The skewness of the given distribution. Type — <a href=../../data_types/float/ >Float64</a></p> <p><strong>例えば</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>skewPop</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div> <h2 id=skewsamp>串焼き<a class=headerlink href=#skewsamp title="Permanent link">&para;</a></h2> <p>を計算します <a href=https://en.wikipedia.org/wiki/Skewness rel="external nofollow noreferrer">サンプルの歪度</a> シーケンスの。</p> <p>これは、渡された値がそのサンプルを形成する場合、確率変数の歪度の不偏推定値を表します。</p> <div class=codehilite><pre><span></span><code><span class=n>skewSamp</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>式</a> 番号を返す。</p> <p><strong>戻り値</strong></p> <p>The skewness of the given distribution. Type — <a href=../../data_types/float/ >Float64</a>. もし <code>n &lt;= 1</code> (<code>n</code> はサンプルのサイズです）、関数は次の値を返します <code>nan</code>.</p> <p><strong>例えば</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>skewSamp</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div> <h2 id=kurtpop>kurtPop<a class=headerlink href=#kurtpop title="Permanent link">&para;</a></h2> <p>を計算します <a href=https://en.wikipedia.org/wiki/Kurtosis rel="external nofollow noreferrer">尖度</a> シーケンスの。</p> <div class=codehilite><pre><span></span><code><span class=n>kurtPop</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>式</a> 番号を返す。</p> <p><strong>戻り値</strong></p> <p>The kurtosis of the given distribution. Type — <a href=../../data_types/float/ >Float64</a></p> <p><strong>例えば</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>kurtPop</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div> <h2 id=kurtsamp>kurtSamp<a class=headerlink href=#kurtsamp title="Permanent link">&para;</a></h2> <p>を計算します <a href=https://en.wikipedia.org/wiki/Kurtosis rel="external nofollow noreferrer">サンプル尖度</a> のシーケンスです。</p> <p>これは、渡された値がサンプルを形成する場合、確率変数の尖度の不偏推定値を表します。</p> <div class=codehilite><pre><span></span><code><span class=n>kurtSamp</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>式</a> 番号を返す。</p> <p><strong>戻り値</strong></p> <p>The kurtosis of the given distribution. Type — <a href=../../data_types/float/ >Float64</a>. もし <code>n &lt;= 1</code> (<code>n</code> はサンプルのサイズです）、関数は次の値を返します <code>nan</code>.</p> <p><strong>例えば</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>kurtSamp</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div> <h2 id=agg-function-timeseriesgroupsum>timeSeriesGroupSum(uid,タイムスタンプ,値)<a class=headerlink href=#agg-function-timeseriesgroupsum title="Permanent link">&para;</a></h2> <p><code>timeSeriesGroupSum</code> 総異なる時系列のサンプルのタイムスタンプなアライメントを実施します。<br> これは、二つのサンプルタイムスタンプ間の線形補間を使用して、一緒に時系列を合計します。</p> <ul> <li><code>uid</code> タイムシリーズの一意のidです, <code>UInt64</code>.</li> <li><code>timestamp</code> ミリ秒またはマイクロ秒をサポートするためにInt64型です。</li> <li><code>value</code> メトリックです。</li> </ul> <p>この関数は、以下のタプルの配列を返します <code>(timestamp, aggregated_value)</code> のペアになっています。</p> <p>この機能を使用する前に確認 <code>timestamp</code> は昇順です。</p> <p>例えば:</p> <div class=codehilite><pre><span></span><code>┌─uid─┬─timestamp─┬─value─┐
│ 1   │     2     │   0.2 │
│ 1   │     7     │   0.7 │
│ 1   │    12     │   1.2 │
│ 1   │    17     │   1.7 │
│ 1   │    25     │   2.5 │
│ 2   │     3     │   0.6 │
│ 2   │     8     │   1.6 │
│ 2   │    12     │   2.4 │
│ 2   │    18     │   3.6 │
│ 2   │    24     │   4.8 │
└─────┴───────────┴───────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>time_series</span><span class=p>(</span>
    <span class=n>uid</span>       <span class=n>UInt64</span><span class=p>,</span>
    <span class=k>timestamp</span> <span class=n>Int64</span><span class=p>,</span>
    <span class=n>value</span>     <span class=n>Float64</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>time_series</span> <span class=k>VALUES</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>2</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>7</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>2</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>17</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>7</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>25</span><span class=p>,</span><span class=mi>2</span><span class=p>.</span><span class=mi>5</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>2</span><span class=p>.</span><span class=mi>4</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>3</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>24</span><span class=p>,</span><span class=mi>4</span><span class=p>.</span><span class=mi>8</span><span class=p>);</span>

<span class=k>SELECT</span> <span class=n>timeSeriesGroupSum</span><span class=p>(</span><span class=n>uid</span><span class=p>,</span> <span class=k>timestamp</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
<span class=k>FROM</span> <span class=p>(</span>
    <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>time_series</span> <span class=k>order</span> <span class=k>by</span> <span class=k>timestamp</span> <span class=k>ASC</span>
<span class=p>);</span>
</code></pre></div> <p>結果は次のようになります:</p> <div class=codehilite><pre><span></span><code>[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]
</code></pre></div> <h2 id=agg-function-timeseriesgroupratesum>timeSeriesGroupRateSum(uid,ts,val)<a class=headerlink href=#agg-function-timeseriesgroupratesum title="Permanent link">&para;</a></h2> <p>同様にtimeseriesgroupratesum、timeseriesgroupratesumは、時系列のレートを計算し、その後、一緒にレートを合計します。<br> また、この関数を使用する前にタイムスタンプが昇順になるはずです。</p> <p>この関数を使用すると、上記の結果は次のようになります:</p> <div class=codehilite><pre><span></span><code>[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]
</code></pre></div> <h2 id=agg_function-avg>平均(x)<a class=headerlink href=#agg_function-avg title="Permanent link">&para;</a></h2> <p>平均を計算します。<br> 数字のためにのみ動作します。<br> 結果は常にfloat64です。</p> <h2 id=agg_function-uniq>uniq<a class=headerlink href=#agg_function-uniq title="Permanent link">&para;</a></h2> <p>引数の異なる値のおおよその数を計算します。</p> <div class=codehilite><pre><span></span><code><span class=n>uniq</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p>この関数は、可変個のパラメータを受け取ります。 変数は <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>、または数値型。</p> <p><strong>戻り値</strong></p> <ul> <li>A <a href=../../data_types/int_uint/ >UInt64</a>-タイプ番号。</li> </ul> <p><strong>実装の詳細</strong></p> <p>機能:</p> <ul> <li> <p>集計内のすべてのパラメータのハッシュを計算し、それを計算に使用します。</p> </li> <li> <p>を使用して適応サンプリングアルゴリズムです。 計算状態の場合、関数は65536までの要素ハッシュ値のサンプルを使用します。</p> <div class=codehilite><pre><span></span><code><span class=n>This</span> <span class=n>algorithm</span> <span class=k>is</span> <span class=n>very</span> <span class=n>accurate</span> <span class=k>and</span> <span class=n>very</span> <span class=n>efficient</span> <span class=k>on</span> <span class=n>the</span> <span class=n>CPU</span><span class=p>.</span> <span class=k>When</span> <span class=n>the</span> <span class=n>query</span> <span class=n>contains</span> <span class=n>several</span> <span class=n>of</span> <span class=n>these</span> <span class=n>functions</span><span class=p>,</span> <span class=k>using</span> <span class=ss>`uniq`</span> <span class=k>is</span> <span class=n>almost</span> <span class=k>as</span> <span class=n>fast</span> <span class=k>as</span> <span class=k>using</span> <span class=n>other</span> <span class=n>aggregate</span> <span class=n>functions</span><span class=p>.</span>
</code></pre></div> </li> <li> <p>結果を確定的に提供します（クエリ処理の順序に依存しません）。</p> </li> </ul> <p>使用をお勧めしますこの機能はほとんど全てのシナリオ.</p> <p><strong>また見なさい</strong></p> <ul> <li><a href=#agg_function-uniqcombined>uniqCombined</a></li> <li><a href=#agg_function-uniqcombined64>uniqCombined64</a></li> <li><a href=#agg_function-uniqhll12>unihll12</a></li> <li><a href=#agg_function-uniqexact>ユニキャック</a></li> </ul> <h2 id=agg_function-uniqcombined>uniqCombined<a class=headerlink href=#agg_function-uniqcombined title="Permanent link">&para;</a></h2> <p>異なる引数値のおおよその数を計算します。</p> <div class=codehilite><pre><span></span><code><span class=n>uniqCombined</span><span class=p>(</span><span class=n>HLL_precision</span><span class=p>)(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p>その <code>uniqCombined</code> 関数は、異なる値の数を計算するのに適しています。</p> <p><strong>パラメータ</strong></p> <p>この関数は、可変個のパラメータを受け取ります。 変数は <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>、または数値型。</p> <p><code>HLL_precision</code> は、2のセル数の底の対数です <a href=https://en.wikipedia.org/wiki/HyperLogLog rel="external nofollow noreferrer">ハイパーログ</a>. オプションで、次のように関数を使用できます <code>uniqCombined(x[, ...])</code>. のデフォルト値 <code>HLL_precision</code> は17で、これは効果的に96KiBのスペース（2^17セル、6ビットそれぞれ）です。</p> <p><strong>戻り値</strong></p> <ul> <li>を番号 <a href=../../data_types/int_uint/ >UInt64</a>-タイプ番号。</li> </ul> <p><strong>実装の詳細</strong></p> <p>機能:</p> <ul> <li> <p>ハッシュを計算します(64ビットのハッシュ <code>String</code> それ以外の場合は32ビット）は、集計内のすべてのパラメータに対して、それを計算に使用します。</p> </li> <li> <p>配列、ハッシュテーブル、およびhyperloglogとエラー修正テーブルの組み合わせを使用します。</p> <div class=codehilite><pre><span></span><code><span class=err>For a small number of distinct elements, an array is used. When the set size is larger, a hash table is used. For a larger number of elements, HyperLogLog is used, which will occupy a fixed amount of memory.</span>
</code></pre></div> </li> <li> <p>結果を確定的に提供します（クエリ処理の順序に依存しません）。</p> </li> </ul> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>それは32ビットハッシュを使用しているので-<code>String</code> タイプすると、結果はカーディナリティのエラーが非常に大きくなります <code>UINT_MAX</code> （エラーは数十億の異なる値の後にすぐに発生します）、この場合は次のようにしてください <a href=#agg_function-uniqcombined64>uniqCombined64</a></p> </div> <p>に比べて <a href=#agg_function-uniq>uniq</a> 機能、を <code>uniqCombined</code>:</p> <ul> <li>数回少ないメモリを消費します。</li> <li>数倍高い精度で計算します。</li> <li>通常は若干低い性能を持っています。 一部のシナリオでは, <code>uniqCombined</code> より良い実行できる <code>uniq</code> たとえば、ネットワークを介して多数の集約状態を送信する分散クエリを使用します。</li> </ul> <p><strong>また見なさい</strong></p> <ul> <li><a href=#agg_function-uniq>uniq</a></li> <li><a href=#agg_function-uniqcombined64>uniqCombined64</a></li> <li><a href=#agg_function-uniqhll12>unihll12</a></li> <li><a href=#agg_function-uniqexact>ユニキャック</a></li> </ul> <h2 id=agg_function-uniqcombined64>uniqCombined64<a class=headerlink href=#agg_function-uniqcombined64 title="Permanent link">&para;</a></h2> <p>と同じ <a href=#agg_function-uniqcombined>uniqCombined</a> ただし、すべてのデータ型に64ビットハッシュを使用します。</p> <h2 id=agg_function-uniqhll12>unihll12<a class=headerlink href=#agg_function-uniqhll12 title="Permanent link">&para;</a></h2> <p>を使用して、異なる引数値のおおよその数を計算します <a href=https://en.wikipedia.org/wiki/HyperLogLog rel="external nofollow noreferrer">ハイパーログ</a> アルゴリズムだ</p> <div class=codehilite><pre><span></span><code><span class=n>uniqHLL12</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p>この関数は、可変個のパラメータを受け取ります。 変数は <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>、または数値型。</p> <p><strong>戻り値</strong></p> <ul> <li>A <a href=../../data_types/int_uint/ >UInt64</a>-タイプ番号。</li> </ul> <p><strong>実装の詳細</strong></p> <p>機能:</p> <ul> <li> <p>集計内のすべてのパラメータのハッシュを計算し、それを計算に使用します。</p> </li> <li> <p>HyperLogLogアルゴリズムを使用して、異なる引数値の数を近似します。</p> <div class=codehilite><pre><span></span><code><span class=err>212 5-bit cells are used. The size of the state is slightly more than 2.5 KB. The result is not very accurate (up to ~10% error) for small data sets (&lt;10K elements). However, the result is fairly accurate for high-cardinality data sets (10K-100M), with a maximum error of ~1.6%. Starting from 100M, the estimation error increases, and the function will return very inaccurate results for data sets with extremely high cardinality (1B+ elements).</span>
</code></pre></div> </li> <li> <p>確定的な結果を提供します（クエリ処理の順序に依存しません）。</p> </li> </ul> <p>この機能を使用することはお勧めしません。 ほとんどの場合、 <a href=#agg_function-uniq>uniq</a> または <a href=#agg_function-uniqcombined>uniqCombined</a> 機能。</p> <p><strong>また見なさい</strong></p> <ul> <li><a href=#agg_function-uniq>uniq</a></li> <li><a href=#agg_function-uniqcombined>uniqCombined</a></li> <li><a href=#agg_function-uniqexact>ユニキャック</a></li> </ul> <h2 id=agg_function-uniqexact>ユニキャック<a class=headerlink href=#agg_function-uniqexact title="Permanent link">&para;</a></h2> <p>異なる引数値の正確な数を計算します。</p> <div class=codehilite><pre><span></span><code><span class=n>uniqExact</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p>を使用 <code>uniqExact</code> 機能あなたは絶対に正確な結果が必要な場合。 それ以外の場合は、 <a href=#agg_function-uniq>uniq</a> 機能。</p> <p>その <code>uniqExact</code> 機能の使用ます。 <code>uniq</code>、状態のサイズは、異なる値の数が増加するにつれて無制限の成長を有するからである。</p> <p><strong>パラメータ</strong></p> <p>この関数は、可変個のパラメータを受け取ります。 変数は <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>、または数値型。</p> <p><strong>また見なさい</strong></p> <ul> <li><a href=#agg_function-uniq>uniq</a></li> <li><a href=#agg_function-uniqcombined>uniqCombined</a></li> <li><a href=#agg_function-uniqhll12>unihll12</a></li> </ul> <h2 id=agg_function-grouparray>groupArray(x),groupArray(max_size)(x)<a class=headerlink href=#agg_function-grouparray title="Permanent link">&para;</a></h2> <p>引数の値の配列を作成します。<br> 値は、任意の（不確定な）順序で配列に追加できます。</p> <p>第二のバージョン（ <code>max_size</code> パラメータ）結果の配列のサイズを次のように制限します <code>max_size</code> 要素。<br> 例えば, <code>groupArray (1) (x)</code> に相当します <code>[any (x)]</code>.</p> <p>場合によっては、実行の順序に依拠することもできます。 これは、次の場合に適用されます <code>SELECT</code> 使用するサブクエリーから取得されます <code>ORDER BY</code>.</p> <h2 id=grouparrayinsertatvalue-position>groupArrayInsertAt(値、位置)<a class=headerlink href=#grouparrayinsertatvalue-position title="Permanent link">&para;</a></h2> <p>指定した位置の配列に値を挿入します。</p> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>この関数はゼロベースの位置を使用します。</p> </div> <p>Accepts the value and position as input. If several values ​​are inserted into the same position, any of them might end up in the resulting array (the first one will be used in the case of single-threaded execution). If no value is inserted into a position, the position is assigned the default value.</p> <p>任意変数:</p> <ul> <li>空の位置に置き換えるためのデフォルト値。</li> <li>結果の配列の長さ。 これにより、すべての集約キーで同じサイズの配列を受け取ることができます。 このパラメーターを使用する場合は、既定値を指定する必要があります。</li> </ul> <h2 id=agg_function-grouparraymovingsum>グルーパーレイモビングサムcity in new mexico usa<a class=headerlink href=#agg_function-grouparraymovingsum title="Permanent link">&para;</a></h2> <p>入力値の移動和を計算します。</p> <div class=codehilite><pre><span></span><code><span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
<span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=n>window_size</span><span class=p>)(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
</code></pre></div> <p>この機能できるウィンドウサイズとしてのパラメータとします。 指定しない場合、この関数は、列の行数と同じウィンドウサイズをとります。</p> <p><strong>パラメータ</strong></p> <ul> <li><code>numbers_for_summing</code> — <a href=../../syntax/#syntax-expressions>式</a> その結果、数値データ型の値が返されます。</li> <li><code>window_size</code> — Size of the calculation window.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>入力データと同じサイズおよびタイプの配列。</li> </ul> <p><strong>例えば</strong></p> <p>サンプルテーブル:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>t</span>
<span class=p>(</span>
    <span class=o>`</span><span class=nb>int</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>float</span><span class=o>`</span> <span class=n>Float32</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>dec</span><span class=o>`</span> <span class=n>Decimal32</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,7,14] │ [1.1,3.3000002,7.7000003,15.47] │ [1.10,3.30,7.70,15.47] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,6,11] │ [1.1,3.3000002,6.6000004,12.17] │ [1.10,3.30,6.60,12.17] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</code></pre></div> <h2 id=agg_function-grouparraymovingavg>groupparraymovingavg<a class=headerlink href=#agg_function-grouparraymovingavg title="Permanent link">&para;</a></h2> <p>入力値の移動平均を計算します。</p> <div class=codehilite><pre><span></span><code><span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
<span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=n>window_size</span><span class=p>)(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
</code></pre></div> <p>この機能できるウィンドウサイズとしてのパラメータとします。 指定しない場合、この関数は、列の行数と同じウィンドウサイズをとります。</p> <p><strong>パラメータ</strong></p> <ul> <li><code>numbers_for_summing</code> — <a href=../../syntax/#syntax-expressions>式</a> その結果、数値データ型の値が返されます。</li> <li><code>window_size</code> — Size of the calculation window.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>入力データと同じサイズおよびタイプの配列。</li> </ul> <p>この関数は <a href=https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero rel="external nofollow noreferrer">ゼロに向かって丸め</a>. 結果のデータ型の小数点以下の桁を切り捨てます。</p> <p><strong>例えば</strong></p> <p>サンプルテーブル <code>b</code>:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>t</span>
<span class=p>(</span>
    <span class=o>`</span><span class=nb>int</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>float</span><span class=o>`</span> <span class=n>Float32</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>dec</span><span class=o>`</span> <span class=n>Decimal32</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─I─────────┬─F───────────────────────────────────┬─D─────────────────────┐
│ [0,0,1,3] │ [0.275,0.82500005,1.9250001,3.8675] │ [0.27,0.82,1.92,3.86] │
└───────────┴─────────────────────────────────────┴───────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─I─────────┬─F────────────────────────────────┬─D─────────────────────┐
│ [0,1,3,5] │ [0.55,1.6500001,3.3000002,6.085] │ [0.55,1.65,3.30,6.08] │
└───────────┴──────────────────────────────────┴───────────────────────┘
</code></pre></div> <h2 id=groupuniqarrayx-groupuniqarraymax-sizex>groupUniqArray(x),groupUniqArray(max_size)(x)<a class=headerlink href=#groupuniqarrayx-groupuniqarraymax-sizex title="Permanent link">&para;</a></h2> <p>異なる引数値から配列を作成します。 メモリ消費量は、 <code>uniqExact</code> 機能。</p> <p>第二のバージョン（ <code>max_size</code> パラメータ）結果の配列のサイズを次のように制限します <code>max_size</code> 要素。<br> 例えば, <code>groupUniqArray(1)(x)</code> に相当します <code>[any(x)]</code>.</p> <h2 id=quantile>分位値<a class=headerlink href=#quantile title="Permanent link">&para;</a></h2> <p>近似値を計算します <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">分位値</a> 数値データシーケンス。</p> <p>この関数が適用されます <a href=https://en.wikipedia.org/wiki/Reservoir_sampling rel="external nofollow noreferrer">貯蔵所の見本抽出</a> 8192までの貯蔵所のサイズおよび見本抽出のための乱数発電機を使って。 結果は非決定的です。 正確な分位値を取得するには、以下を使用します <a href=#quantileexact>quantileExact</a> 機能。</p> <p>複数を使用する場合 <code>quantile*</code> クエリの異なるレベルを持つ関数は、内部状態が結合されていません（つまり、クエリはそれほど効率的ではありません）。 この場合は、 <a href=#quantiles>分位数</a> 機能。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantile</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>エイリアス: <code>median</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> の範囲内の値 <code>[0.01, 0.99]</code>. デフォルト値:0.5. で <code>level=0.5</code> 機能は計算する <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">中央値</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>データ型</a>, <a href=../../data_types/date/ >日付</a> または <a href=../../data_types/datetime/ >DateTime</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>指定したレベルの概算値。</li> </ul> <p>タイプ:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> 数値データ型の入力。</li> <li><a href=../../data_types/date/ >日付</a> 入力値が <code>Date</code> タイプ。</li> <li><a href=../../data_types/datetime/ >DateTime</a> 入力値が <code>DateTime</code> タイプ。</li> </ul> <p><strong>例えば</strong></p> <p>入力テーブル:</p> <div class=codehilite><pre><span></span><code>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantile</span><span class=p>(</span><span class=n>val</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─quantile(val)─┐
│           1.5 │
└───────────────┘
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#median>中央値</a></li> <li><a href=#quantiles>分位数</a></li> </ul> <h2 id=quantiledeterministic>quantiedeterministic<a class=headerlink href=#quantiledeterministic title="Permanent link">&para;</a></h2> <p>近似値を計算します <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">分位値</a> 数値データシーケンス。</p> <p>この関数が適用されます <a href=https://en.wikipedia.org/wiki/Reservoir_sampling rel="external nofollow noreferrer">貯蔵所の見本抽出</a> 8192までの貯蔵所のサイズおよび見本抽出の決定論のアルゴリズムを使って。 結果は決定的です。 正確な分位値を取得するには、以下を使用します <a href=#quantileexact>quantileExact</a> 機能。</p> <p>複数を使用する場合 <code>quantile*</code> クエリの異なるレベルを持つ関数は、内部状態が結合されていません（つまり、クエリはそれほど効率的ではありません）。 この場合は、 <a href=#quantiles>分位数</a> 機能。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileDeterministic</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>determinator</span><span class=p>)</span>
</code></pre></div> <p>エイリアス: <code>medianDeterministic</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> の範囲内の値 <code>[0.01, 0.99]</code>. デフォルト値:0.5. で <code>level=0.5</code> 機能は計算する <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">中央値</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>データ型</a>, <a href=../../data_types/date/ >日付</a> または <a href=../../data_types/datetime/ >DateTime</a>.</li> <li><code>determinator</code> — Number whose hash is used instead of a random number generator in the reservoir sampling algorithm to make the result of sampling deterministic. As a determinator you can use any deterministic positive number, for example, a user id or an event id. If the same determinator value occures too often, the function works incorrectly.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>指定したレベルの概算値。</li> </ul> <p>タイプ:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> 数値データ型の入力。</li> <li><a href=../../data_types/date/ >日付</a> 入力値が <code>Date</code> タイプ。</li> <li><a href=../../data_types/datetime/ >DateTime</a> 入力値が <code>DateTime</code> タイプ。</li> </ul> <p><strong>例えば</strong></p> <p>入力テーブル:</p> <div class=codehilite><pre><span></span><code>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileDeterministic</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─quantileDeterministic(val, 1)─┐
│                           1.5 │
└───────────────────────────────┘
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#median>中央値</a></li> <li><a href=#quantiles>分位数</a></li> </ul> <h2 id=quantileexact>quantileExact<a class=headerlink href=#quantileexact title="Permanent link">&para;</a></h2> <p>正確に計算する <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">分位値</a> 数値データシーケンス。</p> <p>To get exact value, all the passed values ​​are combined into an array, which is then partially sorted. Therefore, the function consumes <code>O(n)</code> メモリ、どこ <code>n</code> 渡された値の数です。 しかし、少数の値の場合、関数は非常に効果的です。</p> <p>複数を使用する場合 <code>quantile*</code> クエリの異なるレベルを持つ関数は、内部状態が結合されていません（つまり、クエリはそれほど効率的ではありません）。 この場合は、 <a href=#quantiles>分位数</a> 機能。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileExact</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>エイリアス: <code>medianExact</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> の範囲内の値 <code>[0.01, 0.99]</code>. デフォルト値:0.5. で <code>level=0.5</code> 機能は計算する <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">中央値</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>データ型</a>, <a href=../../data_types/date/ >日付</a> または <a href=../../data_types/datetime/ >DateTime</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>指定されたレベルの分位値。</li> </ul> <p>タイプ:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> 数値データ型の入力。</li> <li><a href=../../data_types/date/ >日付</a> 入力値が <code>Date</code> タイプ。</li> <li><a href=../../data_types/datetime/ >DateTime</a> 入力値が <code>DateTime</code> タイプ。</li> </ul> <p><strong>例えば</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileExact</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─quantileExact(number)─┐
│                     5 │
└───────────────────────┘
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#median>中央値</a></li> <li><a href=#quantiles>分位数</a></li> </ul> <h2 id=quantileexactweighted>quantileExactWeighted<a class=headerlink href=#quantileexactweighted title="Permanent link">&para;</a></h2> <p>正確に計算する <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">分位値</a> 各要素の重みを考慮した数値データシーケンス。</p> <p>To get exact value, all the passed values ​​are combined into an array, which is then partially sorted. Each value is counted with its weight, as if it is present <code>weight</code> times. A hash table is used in the algorithm. Because of this, if the passed values ​​are frequently repeated, the function consumes less RAM than <a href=#quantileexact>quantileExact</a>. この関数は、次の代わりに使用できます <code>quantileExact</code> そして、重み1を指定します。</p> <p>複数を使用する場合 <code>quantile*</code> クエリの異なるレベルを持つ関数は、内部状態が結合されていません（つまり、クエリはそれほど効率的ではありません）。 この場合は、 <a href=#quantiles>分位数</a> 機能。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileExactWeighted</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div> <p>エイリアス: <code>medianExactWeighted</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> の範囲内の値 <code>[0.01, 0.99]</code>. デフォルト値:0.5. で <code>level=0.5</code> 機能は計算する <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">中央値</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>データ型</a>, <a href=../../data_types/date/ >日付</a> または <a href=../../data_types/datetime/ >DateTime</a>.</li> <li><code>weight</code> — Column with weights of sequence members. Weight is a number of value occurrences.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>指定されたレベルの分位値。</li> </ul> <p>タイプ:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> 数値データ型の入力。</li> <li><a href=../../data_types/date/ >日付</a> 入力値が <code>Date</code> タイプ。</li> <li><a href=../../data_types/datetime/ >DateTime</a> 入力値が <code>DateTime</code> タイプ。</li> </ul> <p><strong>例えば</strong></p> <p>入力テーブル:</p> <div class=codehilite><pre><span></span><code>┌─n─┬─val─┐
│ 0 │   3 │
│ 1 │   2 │
│ 2 │   1 │
│ 5 │   4 │
└───┴─────┘
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileExactWeighted</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>val</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─quantileExactWeighted(n, val)─┐
│                             1 │
└───────────────────────────────┘
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#median>中央値</a></li> <li><a href=#quantiles>分位数</a></li> </ul> <h2 id=quantiletiming>クオンタイミング<a class=headerlink href=#quantiletiming title="Permanent link">&para;</a></h2> <p>決定された精度では、 <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">分位値</a> 数値データシーケンス。</p> <p>結果は決定的です（クエリ処理の順序に依存しません）。 この機能を最適化と配列における分布のような積載ウェブページではバックエンド対応。</p> <p>複数を使用する場合 <code>quantile*</code> クエリの異なるレベルを持つ関数は、内部状態が結合されていません（つまり、クエリはそれほど効率的ではありません）。 この場合は、 <a href=#quantiles>分位数</a> 機能。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileTiming</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>エイリアス: <code>medianTiming</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li> <p><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> の範囲内の値 <code>[0.01, 0.99]</code>. デフォルト値:0.5. で <code>level=0.5</code> 機能は計算する <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">中央値</a>.</p> </li> <li> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>式</a> aを返す列の値を超える <a href=../../data_types/float/ >フロート*</a>-タイプ番号。</p> <div class=codehilite><pre><span></span><code><span class=err>- If negative values are passed to the function, the behavior is undefined.</span>
<span class=err>- If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</span>
</code></pre></div> </li> </ul> <p><strong>精度</strong></p> <p>計算は次の場合に正確です:</p> <ul> <li>値の総数は5670を超えません。</li> <li>値の総数は5670を超えていますが、ページの読み込み時間は1024ms未満です。</li> </ul> <p>それ以外の場合、計算の結果は16msの最も近い倍数に丸められます。</p> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>ページの読み込み時間の分位数を計算するために、この関数はより効果的で正確です <a href=#quantile>分位値</a>.</p> </div> <p><strong>戻り値</strong></p> <ul> <li>指定されたレベルの分位値。</li> </ul> <p>タイプ: <code>Float32</code>.</p> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>関数に値が渡されない場合（以下を使用する場合 <code>quantileTimingIf</code>), <a href=../../data_types/float/#data_type-float-nan-inf>ナン</a> 返されます。 この目的は、これらのケースをゼロになるケースと区別することです。 見る <a href=../../statements/select/#select-order-by>ORDER BY句</a> ソートに関する注意事項 <code>NaN</code> 値。</p> </div> <p><strong>例えば</strong></p> <p>入力テーブル:</p> <div class=codehilite><pre><span></span><code>┌─response_time─┐
│            72 │
│           112 │
│           126 │
│           145 │
│           104 │
│           242 │
│           313 │
│           168 │
│           108 │
└───────────────┘
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileTiming</span><span class=p>(</span><span class=n>response_time</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─quantileTiming(response_time)─┐
│                           126 │
└───────────────────────────────┘
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#median>中央値</a></li> <li><a href=#quantiles>分位数</a></li> </ul> <h2 id=quantiletimingweighted>quantitimingweighted<a class=headerlink href=#quantiletimingweighted title="Permanent link">&para;</a></h2> <p>決定された精度では、 <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">分位値</a> 各シーケンスメンバの重みに応じた数値データシーケンス。</p> <p>結果は決定的です（クエリ処理の順序に依存しません）。 この機能を最適化と配列における分布のような積載ウェブページではバックエンド対応。</p> <p>複数を使用する場合 <code>quantile*</code> クエリの異なるレベルを持つ関数は、内部状態が結合されていません（つまり、クエリはそれほど効率的ではありません）。 この場合は、 <a href=#quantiles>分位数</a> 機能。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileTimingWeighted</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div> <p>エイリアス: <code>medianTimingWeighted</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li> <p><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> の範囲内の値 <code>[0.01, 0.99]</code>. デフォルト値:0.5. で <code>level=0.5</code> 機能は計算する <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">中央値</a>.</p> </li> <li> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>式</a> aを返す列の値を超える <a href=../../data_types/float/ >フロート*</a>-タイプ番号。</p> <div class=codehilite><pre><span></span><code><span class=err>- If negative values are passed to the function, the behavior is undefined.</span>
<span class=err>- If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</span>
</code></pre></div> </li> <li> <p><code>weight</code> — Column with weights of sequence elements. Weight is a number of value occurrences.</p> </li> </ul> <p><strong>精度</strong></p> <p>計算は次の場合に正確です:</p> <ul> <li>値の総数は5670を超えません。</li> <li>値の総数は5670を超えていますが、ページの読み込み時間は1024ms未満です。</li> </ul> <p>それ以外の場合、計算の結果は16msの最も近い倍数に丸められます。</p> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>ページの読み込み時間の分位数を計算するために、この関数はより効果的で正確です <a href=#quantile>分位値</a>.</p> </div> <p><strong>戻り値</strong></p> <ul> <li>指定されたレベルの分位値。</li> </ul> <p>タイプ: <code>Float32</code>.</p> <div class="admonition note"> <p class=admonition-title>メモ</p> <p>関数に値が渡されない場合（以下を使用する場合 <code>quantileTimingIf</code>), <a href=../../data_types/float/#data_type-float-nan-inf>ナン</a> 返されます。 この目的は、これらのケースをゼロになるケースと区別することです。 見る <a href=../../statements/select/#select-order-by>ORDER BY句</a> ソートに関する注意事項 <code>NaN</code> 値。</p> </div> <p><strong>例えば</strong></p> <p>入力テーブル:</p> <div class=codehilite><pre><span></span><code>┌─response_time─┬─weight─┐
│            68 │      1 │
│           104 │      2 │
│           112 │      3 │
│           126 │      2 │
│           138 │      1 │
│           162 │      1 │
└───────────────┴────────┘
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileTimingWeighted</span><span class=p>(</span><span class=n>response_time</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─quantileTimingWeighted(response_time, weight)─┐
│                                           112 │
└───────────────────────────────────────────────┘
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#median>中央値</a></li> <li><a href=#quantiles>分位数</a></li> </ul> <h2 id=quantiletdigest>quantiletdigestcomment<a class=headerlink href=#quantiletdigest title="Permanent link">&para;</a></h2> <p>近似値を計算します <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">分位値</a> を使用する数値データシーケンスの <a href=https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf rel="external nofollow noreferrer">t-ダイジェスト</a> アルゴリズムだ</p> <p>最大誤差は1%です。 メモリ消費量は <code>log(n)</code>、どこ <code>n</code> 値の数です。 結果は、クエリの実行順序によって異なり、非決定的です。</p> <p>機能の性能は性能より低いですの <a href=#quantile>分位値</a> または <a href=#quantiletiming>クオンタイミング</a>. 状態サイズと精度の比に関しては、この関数はよりもはるかに優れています <code>quantile</code>.</p> <p>複数を使用する場合 <code>quantile*</code> クエリの異なるレベルを持つ関数は、内部状態が結合されていません（つまり、クエリはそれほど効率的ではありません）。 この場合は、 <a href=#quantiles>分位数</a> 機能。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileTDigest</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>エイリアス: <code>medianTDigest</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> の範囲内の値 <code>[0.01, 0.99]</code>. デフォルト値:0.5. で <code>level=0.5</code> 機能は計算する <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">中央値</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>データ型</a>, <a href=../../data_types/date/ >日付</a> または <a href=../../data_types/datetime/ >DateTime</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>指定したレベルの概算値。</li> </ul> <p>タイプ:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> 数値データ型の入力。</li> <li><a href=../../data_types/date/ >日付</a> 入力値が <code>Date</code> タイプ。</li> <li><a href=../../data_types/datetime/ >DateTime</a> 入力値が <code>DateTime</code> タイプ。</li> </ul> <p><strong>例えば</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileTDigest</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─quantileTDigest(number)─┐
│                     4.5 │
└─────────────────────────┘
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#median>中央値</a></li> <li><a href=#quantiles>分位数</a></li> </ul> <h2 id=quantiletdigestweighted>quantileTDigestWeighted<a class=headerlink href=#quantiletdigestweighted title="Permanent link">&para;</a></h2> <p>近似値を計算します <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">分位値</a> を使用する数値データシーケンスの <a href=https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf rel="external nofollow noreferrer">t-ダイジェスト</a> アルゴリズムだ この関数は、各シーケンスメンバーの重みを考慮に入れます。 最大誤差は1%です。 メモリ消費量は <code>log(n)</code>、どこ <code>n</code> 値の数です。</p> <p>機能の性能は性能より低いですの <a href=#quantile>分位値</a> または <a href=#quantiletiming>クオンタイミング</a>. 状態サイズと精度の比に関しては、この関数はよりもはるかに優れています <code>quantile</code>.</p> <p>結果は、クエリの実行順序によって異なり、非決定的です。</p> <p>複数を使用する場合 <code>quantile*</code> クエリの異なるレベルを持つ関数は、内部状態が結合されていません（つまり、クエリはそれほど効率的ではありません）。 この場合は、 <a href=#quantiles>分位数</a> 機能。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileTDigest</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>エイリアス: <code>medianTDigest</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> の範囲内の値 <code>[0.01, 0.99]</code>. デフォルト値:0.5. で <code>level=0.5</code> 機能は計算する <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">中央値</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>データ型</a>, <a href=../../data_types/date/ >日付</a> または <a href=../../data_types/datetime/ >DateTime</a>.</li> <li><code>weight</code> — Column with weights of sequence elements. Weight is a number of value occurrences.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>指定したレベルの概算値。</li> </ul> <p>タイプ:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> 数値データ型の入力。</li> <li><a href=../../data_types/date/ >日付</a> 入力値が <code>Date</code> タイプ。</li> <li><a href=../../data_types/datetime/ >DateTime</a> 入力値が <code>DateTime</code> タイプ。</li> </ul> <p><strong>例えば</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileTDigestWeighted</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─quantileTDigestWeighted(number, 1)─┐
│                                4.5 │
└────────────────────────────────────┘
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#median>中央値</a></li> <li><a href=#quantiles>分位数</a></li> </ul> <h2 id=median>中央値<a class=headerlink href=#median title="Permanent link">&para;</a></h2> <p>その <code>median*</code> 関数は、対応する関数のエイリアスです <code>quantile*</code> 機能。 数値データサンプルの中央値を計算します。</p> <p>機能:</p> <ul> <li><code>median</code> — Alias for <a href=#quantile>分位値</a>.</li> <li><code>medianDeterministic</code> — Alias for <a href=#quantiledeterministic>quantiedeterministic</a>.</li> <li><code>medianExact</code> — Alias for <a href=#quantileexact>quantileExact</a>.</li> <li><code>medianExactWeighted</code> — Alias for <a href=#quantileexactweighted>quantileExactWeighted</a>.</li> <li><code>medianTiming</code> — Alias for <a href=#quantiletiming>クオンタイミング</a>.</li> <li><code>medianTimingWeighted</code> — Alias for <a href=#quantiletimingweighted>quantitimingweighted</a>.</li> <li><code>medianTDigest</code> — Alias for <a href=#quantiletdigest>quantiletdigestcomment</a>.</li> <li><code>medianTDigestWeighted</code> — Alias for <a href=#quantiletdigestweighted>quantileTDigestWeighted</a>.</li> </ul> <p><strong>例えば</strong></p> <p>入力テーブル:</p> <div class=codehilite><pre><span></span><code>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>medianDeterministic</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─medianDeterministic(val, 1)─┐
│                         1.5 │
└─────────────────────────────┘
</code></pre></div> <h2 id=quantiles>quantiles(level1, level2, …)(x)<a class=headerlink href=#quantiles title="Permanent link">&para;</a></h2> <p>すべての分位数関数には、対応する分位数関数もあります: <code>quantiles</code>, <code>quantilesDeterministic</code>, <code>quantilesTiming</code>, <code>quantilesTimingWeighted</code>, <code>quantilesExact</code>, <code>quantilesExactWeighted</code>, <code>quantilesTDigest</code>. これらの関数は、あるパスでリストされたレベルのすべての分位数を計算し、結果の値の配列を返します。</p> <h2 id=varsampx>varSamp(x)<a class=headerlink href=#varsampx title="Permanent link">&para;</a></h2> <p>金額を計算します <code>Σ((x - x̅)^2) / (n - 1)</code>、どこ <code>n</code> サンプルサイズは <code>x̅</code>の平均値です <code>x</code>.</p> <p>これは、渡された値がそのサンプルを形成する場合、確率変数の分散の不偏推定値を表します。</p> <p>を返します <code>Float64</code>. とき <code>n &lt;= 1</code>、戻り値 <code>+∞</code>.</p> <h2 id=varpopx>varPop(x)<a class=headerlink href=#varpopx title="Permanent link">&para;</a></h2> <p>金額を計算します <code>Σ((x - x̅)^2) / n</code>、どこ <code>n</code> サンプルサイズは <code>x̅</code>の平均値です <code>x</code>.</p> <p>つまり、値のセットの分散。 を返します <code>Float64</code>.</p> <h2 id=stddevsampx>stddevSamp(x)<a class=headerlink href=#stddevsampx title="Permanent link">&para;</a></h2> <p>結果はの平方根に等しい <code>varSamp(x)</code>.</p> <h2 id=stddevpopx>stddevPop(x)<a class=headerlink href=#stddevpopx title="Permanent link">&para;</a></h2> <p>結果はの平方根に等しい <code>varPop(x)</code>.</p> <h2 id=topknx>topK(N)(x)<a class=headerlink href=#topknx title="Permanent link">&para;</a></h2> <p>指定された列のほぼ最も頻繁に使用される値の配列を返します。 結果の配列は、値のおおよその頻度の降順でソートされます（値そのものではありません）。</p> <p>実装する <a href=http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf rel="external nofollow noreferrer">ろ過されたスペース節約</a> からのreduce-and-combineアルゴリズムに基づいてTopKを分析するアルゴリズム <a href=https://arxiv.org/pdf/1401.0702.pdf rel="external nofollow noreferrer">パラレル省スペース</a>.</p> <div class=codehilite><pre><span></span><code><span class=n>topK</span><span class=p>(</span><span class=n>N</span><span class=p>)(</span><span class=k>column</span><span class=p>)</span>
</code></pre></div> <p>この関数は保証された結果を提供しません。 特定の状況では、エラーが発生し、最も頻度の高い値ではない頻繁な値が返されることがあります。</p> <p>私達は使用を推薦します <code>N &lt; 10</code> 価値;性能は大きいと減ります <code>N</code> 値。 の最大値 <code>N = 65536</code>.</p> <p><strong>パラメータ</strong></p> <ul> <li>‘N’ 返す要素の数です。</li> </ul> <p>パラメーターを省略すると、既定値10が使用されます。</p> <p><strong>引数</strong></p> <ul> <li>' x ' – The value to calculate frequency.</li> </ul> <p><strong>例えば</strong></p> <p>を取る <a href=../../../getting_started/example_datasets/ontime/ >オンタイム</a> データセットを選択し、最も頻繁に発生する三つの値を選択します。 <code>AirlineID</code> コラム</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>topK</span><span class=p>(</span><span class=mi>3</span><span class=p>)(</span><span class=n>AirlineID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─res─────────────────┐
│ [19393,19790,19805] │
└─────────────────────┘
</code></pre></div> <h2 id=topkweighted>トップクイット<a class=headerlink href=#topkweighted title="Permanent link">&para;</a></h2> <p>に似て <code>topK</code> しかし、整数型の一つの追加の引数を取ります - <code>weight</code>. あらゆる価値は説明されます <code>weight</code> 頻度計算のための時間。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code><span class=n>topKWeighted</span><span class=p>(</span><span class=n>N</span><span class=p>)(</span><span class=n>x</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code>N</code> — The number of elements to return.</li> </ul> <p><strong>引数</strong></p> <ul> <li><code>x</code> – The value.</li> <li><code>weight</code> — The weight. <a href=../../data_types/int_uint/ >UInt8</a>.</li> </ul> <p><strong>戻り値</strong></p> <p>最大およその重みの合計を持つ値の配列を返します。</p> <p><strong>例えば</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>topKWeighted</span><span class=p>(</span><span class=mi>10</span><span class=p>)(</span><span class=nb>number</span><span class=p>,</span> <span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code>┌─topKWeighted(10)(number, number)──────────┐
│ [999,998,997,996,995,994,993,992,991,990] │
└───────────────────────────────────────────┘
</code></pre></div> <h2 id=covarsampx-y>covarSamp(x,y)<a class=headerlink href=#covarsampx-y title="Permanent link">&para;</a></h2> <p>の値を計算します <code>Σ((x - x̅)(y - y̅)) / (n - 1)</code>.</p> <p>Float64を返します。 とき <code>n &lt;= 1</code>, returns +∞.</p> <h2 id=covarpopx-y>covarPop(x,y)<a class=headerlink href=#covarpopx-y title="Permanent link">&para;</a></h2> <p>の値を計算します <code>Σ((x - x̅)(y - y̅)) / n</code>.</p> <h2 id=corrx-y>corr(x,y)<a class=headerlink href=#corrx-y title="Permanent link">&para;</a></h2> <p>ピアソン相関係数を計算します: <code>Σ((x - x̅)(y - y̅)) / sqrt(Σ((x - x̅)^2) * Σ((y - y̅)^2))</code>.</p> <h2 id=categoricalinformationvalue>categoricalInformationValue<a class=headerlink href=#categoricalinformationvalue title="Permanent link">&para;</a></h2> <p>の値を計算します <code>(P(tag = 1) - P(tag = 0))(log(P(tag = 1)) - log(P(tag = 0)))</code> 各カテゴリの。</p> <div class=codehilite><pre><span></span><code><span class=n>categoricalInformationValue</span><span class=p>(</span><span class=n>category1</span><span class=p>,</span> <span class=n>category2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>tag</span><span class=p>)</span>
</code></pre></div> <p>結果は、離散(カテゴリカル)フィーチャがどのようにして <code>[category1, category2, ...]</code> の値を予測する学習モデルに貢献する <code>tag</code>.</p> <h2 id=simplelinearregression>simplelearregression<a class=headerlink href=#simplelinearregression title="Permanent link">&para;</a></h2> <p>単純な(一次元的な)線形回帰を実行します。</p> <div class=codehilite><pre><span></span><code><span class=n>simpleLinearRegression</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</code></pre></div> <p>パラメータ:</p> <ul> <li><code>x</code> — Column with dependent variable values.</li> <li><code>y</code> — Column with explanatory variable values.</li> </ul> <p>戻り値:</p> <p>定数 <code>(a, b)</code> 結果の行の <code>y = a*x + b</code>.</p> <p><strong>例</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>&#39;simpleLinearRegression&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [0, 1, 2, 3])─┐
│ (1,0)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>&#39;simpleLinearRegression&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [3, 4, 5, 6])─┐
│ (1,3)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=agg_functions-stochasticlinearregression>stochasticLinearRegression<a class=headerlink href=#agg_functions-stochasticlinearregression title="Permanent link">&para;</a></h2> <p>この関数は、確率的線形回帰を実装します。 それは率、l2正則化係数、ミニバッチサイズを学ぶための注文変数を支え、重量を更新するための少数の方法を有する (<a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Adam rel="external nofollow noreferrer">アダム</a> （デフォルトで使用), <a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent rel="external nofollow noreferrer">シンプルSGD</a>, <a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Momentum rel="external nofollow noreferrer">勢い</a>, <a href=https://mipt.ru/upload/medialibrary/d7e/41-91.pdf rel="external nofollow noreferrer">ネステロフ</a>).</p> <h3 id=agg_functions-stochasticlinearregression-parameters>パラメータ<a class=headerlink href=#agg_functions-stochasticlinearregression-parameters title="Permanent link">&para;</a></h3> <p>が4カスタマイズ可能パラメータ。 それらは関数に順番に渡されますが、すべての四つのデフォルト値を渡す必要はありませんが、良いモデルにはいくつかのパラメータ調整が必要で</p> <div class=codehilite><pre><span></span><code>stochasticLinearRegression(1.0, 1.0, 10, &#39;SGD&#39;)
</code></pre></div> <ol> <li><code>learning rate</code> 勾配降下ステップが実行されるときのステップ長の係数です。 大きすぎる学習率の原因となり無限の量のモデルです。 デフォルトは <code>0.00001</code>.</li> <li><code>l2 regularization coefficient</code> これは過食防止に役立つ可能性があります。 デフォルトは <code>0.1</code>.</li> <li><code>mini-batch size</code> グラデーションディセントのステップを実行するために、グラデーションを計算して合計する要素の数を設定します。 純粋な確率降下は一つの要素を使用しますが、小さなバッチ（約10の要素）を持つことで勾配ステップがより安定します。 デフォルトは <code>15</code>.</li> <li><code>method for updating weights</code>、彼らは: <code>Adam</code> （デフォルトでは), <code>SGD</code>, <code>Momentum</code>, <code>Nesterov</code>. <code>Momentum</code> と <code>Nesterov</code> もう少し計算とメモリが必要ですが、確率勾配法の収束と安定性の点で有用です。</li> </ol> <h3 id=agg_functions-stochasticlinearregression-usage>使い方<a class=headerlink href=#agg_functions-stochasticlinearregression-usage title="Permanent link">&para;</a></h3> <p><code>stochasticLinearRegression</code> モデルのフィッティングと新しいデータの予測です。 モデルを適合させ、後で使用するためにその状態を保存するために、 <code>-State</code> 基本的に状態（モデルの重みなど）を保存するcombinator。<br> 予測するには、関数を使用します <a href=../../functions/machine_learning_functions/#machine_learning_methods-evalmlmethod>evalMLMethod</a> これは、状態を予測する機能と同様に引数として取ります。</p> <p><a name=stochasticlinearregression-usage-fitting></a></p> <p><strong>1.</strong> 継手</p> <p>このようなクエリを使用できます。</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>train_data</span>
<span class=p>(</span>
    <span class=n>param1</span> <span class=n>Float64</span><span class=p>,</span>
    <span class=n>param2</span> <span class=n>Float64</span><span class=p>,</span>
    <span class=n>target</span> <span class=n>Float64</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>

<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>your_model</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span> <span class=k>AS</span> <span class=k>SELECT</span>
<span class=n>stochasticLinearRegressionState</span><span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>&#39;SGD&#39;</span><span class=p>)(</span><span class=n>target</span><span class=p>,</span> <span class=n>param1</span><span class=p>,</span> <span class=n>param2</span><span class=p>)</span>
<span class=k>AS</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>train_data</span><span class=p>;</span>
</code></pre></div> <p>ここでは、データを挿入する必要もあります <code>train_data</code> テーブル。 パラメータの数は固定されていません。 <code>linearRegressionState</code>. 彼らはすべての必要数値です。<br> ターゲット値（予測することを学びたい）を持つ列が最初の引数として挿入されることに注意してください。</p> <p><strong>2.</strong> 予測</p> <p>状態をテーブルに保存した後、予測に複数回使用したり、他の状態とマージして新しいモデルを作成したりすることもできます。</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=p>(</span><span class=k>SELECT</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>your_model</span><span class=p>)</span> <span class=k>AS</span> <span class=n>model</span> <span class=k>SELECT</span>
<span class=n>evalMLMethod</span><span class=p>(</span><span class=n>model</span><span class=p>,</span> <span class=n>param1</span><span class=p>,</span> <span class=n>param2</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>test_data</span>
</code></pre></div> <p>クエリは予測値の列を返します。 その最初の引数に注意してください <code>evalMLMethod</code> は <code>AggregateFunctionState</code> オブジェクト、次はフィーチャの列です。</p> <p><code>test_data</code> のようなテーブルです <code>train_data</code> が含まれないことがあります。</p> <h3 id=agg_functions-stochasticlinearregression-notes>備考<a class=headerlink href=#agg_functions-stochasticlinearregression-notes title="Permanent link">&para;</a></h3> <ol> <li> <p>統合モデルにはユーザーの作成などのクエリ:<br> <code>sql SELECT state1 + state2 FROM your_models</code><br> どこに <code>your_models</code> テーブルの両方のモデルです。 このクエリはnewを返します <code>AggregateFunctionState</code> オブジェクト。</p> </li> <li> <p>ユーザーのフェッチのウエイトを作成したモデルとして独自の目的で保存しないモデルについていない場合 <code>-State</code> combinatorが使用されます。<br> <code>sql SELECT stochasticLinearRegression(0.01)(target, param1, param2) FROM train_data</code><br> そのようなクエリはモデルに適合し、その重みを返します-最初はモデルのパラメータに対応する重みです。 したがって、上記の例では、クエリは3つの値を持つ列を返します。</p> </li> </ol> <p><strong>また見なさい</strong></p> <ul> <li><a href=#agg_functions-stochasticlogisticregression>stochasticLogisticRegression</a></li> <li><a href=https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression rel="external nofollow noreferrer">線形およびロジスティック回帰の違い</a></li> </ul> <h2 id=agg_functions-stochasticlogisticregression>stochasticLogisticRegression<a class=headerlink href=#agg_functions-stochasticlogisticregression title="Permanent link">&para;</a></h2> <p>この関数は、確率論的ロジスティック回帰を実装します。 これは、バイナリ分類問題に使用することができ、stochasticlinearregressionと同じカスタムパラメータをサポートし、同じ方法で動作します。</p> <h3 id=agg_functions-stochasticlogisticregression-parameters>パラメータ<a class=headerlink href=#agg_functions-stochasticlogisticregression-parameters title="Permanent link">&para;</a></h3> <p>パラメーターは、stochasticlinearregressionとまったく同じです:<br> <code>learning rate</code>, <code>l2 regularization coefficient</code>, <code>mini-batch size</code>, <code>method for updating weights</code>.<br> 詳細については、 <a href=#agg_functions-stochasticlinearregression-parameters>パラメータ</a>.</p> <div class=codehilite><pre><span></span><code>stochasticLogisticRegression(1.0, 1.0, 10, &#39;SGD&#39;)
</code></pre></div> <ol> <li>継手</li> </ol> <!-- --> <div class=codehilite><pre><span></span><code><span class=n>See</span> <span class=n>the</span> <span class=ss>`Fitting`</span> <span class=n>section</span> <span class=k>in</span> <span class=n>the</span> <span class=p>[</span><span class=n>stochasticLinearRegression</span><span class=p>](</span><span class=c1>#stochasticlinearregression-usage-fitting) description.</span>

<span class=n>Predicted</span> <span class=n>labels</span> <span class=n>have</span> <span class=k>to</span> <span class=n>be</span> <span class=k>in</span> <span class=err>\</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=err>\</span><span class=p>].</span>
</code></pre></div> <ol> <li>予測</li> </ol> <!-- --> <div class=codehilite><pre><span></span><code><span class=k>Using</span> <span class=n>saved</span> <span class=n>state</span> <span class=n>we</span> <span class=n>can</span> <span class=n>predict</span> <span class=n>probability</span> <span class=n>of</span> <span class=n>object</span> <span class=k>having</span> <span class=n>label</span> <span class=ss>`1`</span><span class=p>.</span>

<span class=ss>``` sql</span>
<span class=ss>WITH (SELECT state FROM your_model) AS model SELECT</span>
<span class=ss>evalMLMethod(model, param1, param2) FROM test_data</span>
<span class=ss>```</span>

<span class=n>The</span> <span class=n>query</span> <span class=n>will</span> <span class=k>return</span> <span class=n>a</span> <span class=k>column</span> <span class=n>of</span> <span class=n>probabilities</span><span class=p>.</span> <span class=n>Note</span> <span class=n>that</span> <span class=n>first</span> <span class=n>argument</span> <span class=n>of</span> <span class=ss>`evalMLMethod`</span> <span class=k>is</span> <span class=ss>`AggregateFunctionState`</span> <span class=n>object</span><span class=p>,</span> <span class=n>next</span> <span class=n>are</span> <span class=n>columns</span> <span class=n>of</span> <span class=n>features</span><span class=p>.</span>

<span class=n>We</span> <span class=n>can</span> <span class=n>also</span> <span class=kt>set</span> <span class=n>a</span> <span class=n>bound</span> <span class=n>of</span> <span class=n>probability</span><span class=p>,</span> <span class=n>which</span> <span class=n>assigns</span> <span class=n>elements</span> <span class=k>to</span> <span class=n>different</span> <span class=n>labels</span><span class=p>.</span>

<span class=ss>``` sql</span>
<span class=ss>SELECT ans &lt; 1.1 AND ans &gt; 0.5 FROM</span>
<span class=ss>(WITH (SELECT state FROM your_model) AS model SELECT</span>
<span class=ss>evalMLMethod(model, param1, param2) AS ans FROM test_data)</span>
<span class=ss>```</span>

<span class=k>Then</span> <span class=n>the</span> <span class=n>result</span> <span class=n>will</span> <span class=n>be</span> <span class=n>labels</span><span class=p>.</span>

<span class=ss>`test_data`</span> <span class=k>is</span> <span class=n>a</span> <span class=k>table</span> <span class=k>like</span> <span class=ss>`train_data`</span> <span class=n>but</span> <span class=n>may</span> <span class=k>not</span> <span class=n>contain</span> <span class=n>target</span> <span class=n>value</span><span class=p>.</span>
</code></pre></div> <p><strong>また見なさい</strong></p> <ul> <li><a href=#agg_functions-stochasticlinearregression>stochasticLinearRegression</a></li> <li><a href=https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression rel="external nofollow noreferrer">線形およびロジスティック回帰の違い。</a></li> </ul> <h2 id=groupbitmapand>groupbitmapandgenericname<a class=headerlink href=#groupbitmapand title="Permanent link">&para;</a></h2> <p>ビットマップ列のandを計算し、型uint64のカーディナリティを返します。 <a href=../../functions/bitmap_functions/ >ビットマップ</a>.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> – An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> タイプ。</p> <p><strong>戻り値</strong></p> <p>の値 <code>UInt64</code> タイプ。</p> <p><strong>例えば</strong></p> <div class=codehilite><pre><span></span><code><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag1&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag2&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag3&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>               <span class=mi>3</span>   <span class=err>│</span>
<span class=err>└───────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapAndState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapAndState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span>                                         <span class=err>│</span>
<span class=err>└──────────────────────────────────────────────────┘</span>
</code></pre></div> <h2 id=groupbitmapor>groupBitmapOr<a class=headerlink href=#groupbitmapor title="Permanent link">&para;</a></h2> <p>ビットマップ列のorを計算し、型uint64のカーディナリティを返します。 <a href=../../functions/bitmap_functions/ >ビットマップ</a>. これは <code>groupBitmapMerge</code>.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> – An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> タイプ。</p> <p><strong>戻り値</strong></p> <p>の値 <code>UInt64</code> タイプ。</p> <p><strong>例えば</strong></p> <div class=codehilite><pre><span></span><code><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag1&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag2&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag3&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>             <span class=mi>15</span>   <span class=err>│</span>
<span class=err>└──────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapOrState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapOrState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span>           <span class=err>│</span>
<span class=err>└─────────────────────────────────────────────────┘</span>
</code></pre></div> <h2 id=groupbitmapxor>groupBitmapXor<a class=headerlink href=#groupbitmapxor title="Permanent link">&para;</a></h2> <p>ビットマップ列のxorを計算し、uint64型のカーディナリティを返します。 <a href=../../functions/bitmap_functions/ >ビットマップ</a>.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <p><code>expr</code> – An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> タイプ。</p> <p><strong>戻り値</strong></p> <p>の値 <code>UInt64</code> タイプ。</p> <p><strong>例えば</strong></p> <div class=codehilite><pre><span></span><code><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag1&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag2&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag3&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapXor</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapXor</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>              <span class=mi>10</span>   <span class=err>│</span>
<span class=err>└───────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapXorState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapXorState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span>                       <span class=err>│</span>
<span class=err>└──────────────────────────────────────────────────┘</span>
</code></pre></div> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>から構築 <a href=https://github.com/ClickHouse/ClickHouse/commit/d6653f1fdcabbf1f588ee132a5044c31df63261a rel="external nofollow noreferrer" target=_blank class=text-reset>d6653f1fdc</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>テーブルの内容</label> <a href=#agg_function-count title=カウント class="nav-link text-wrap d-inline-block w-100"> カウント </a> <a href=#agg_function-any title=任意(x) class="nav-link text-wrap d-inline-block w-100"> 任意(x) </a> <a href=#anyheavyx title=anyHeavy(x) class="nav-link text-wrap d-inline-block w-100"> anyHeavy(x) </a> <a href=#anylastx title=anyllast(x) class="nav-link text-wrap d-inline-block w-100"> anyllast(x) </a> <a href=#groupbitand title=groupBitAnd class="nav-link text-wrap d-inline-block w-100"> groupBitAnd </a> <a href=#groupbitor title=groupBitOr class="nav-link text-wrap d-inline-block w-100"> groupBitOr </a> <a href=#groupbitxor title=groupBitXor class="nav-link text-wrap d-inline-block w-100"> groupBitXor </a> <a href=#groupbitmap title=groupBitmap class="nav-link text-wrap d-inline-block w-100"> groupBitmap </a> <a href=#agg_function-min title=最小(x) class="nav-link text-wrap d-inline-block w-100"> 最小(x) </a> <a href=#agg_function-max title=最大(x) class="nav-link text-wrap d-inline-block w-100"> 最大(x) </a> <a href=#agg-function-argmin title=argMin(arg,val) class="nav-link text-wrap d-inline-block w-100"> argMin(arg,val) </a> <a href=#agg-function-argmax title=argMax(arg,val) class="nav-link text-wrap d-inline-block w-100"> argMax(arg,val) </a> <a href=#agg_function-sum title=sum(x) class="nav-link text-wrap d-inline-block w-100"> sum(x) </a> <a href=#sumwithoverflowx title=sumWithOverflow(x) class="nav-link text-wrap d-inline-block w-100"> sumWithOverflow(x) </a> <a href=#agg_functions-summap title=sumMap(キー,値) class="nav-link text-wrap d-inline-block w-100"> sumMap(キー,値) </a> <a href=#skewpop title=skewPop class="nav-link text-wrap d-inline-block w-100"> skewPop </a> <a href=#skewsamp title=串焼き class="nav-link text-wrap d-inline-block w-100"> 串焼き </a> <a href=#kurtpop title=kurtPop class="nav-link text-wrap d-inline-block w-100"> kurtPop </a> <a href=#kurtsamp title=kurtSamp class="nav-link text-wrap d-inline-block w-100"> kurtSamp </a> <a href=#agg-function-timeseriesgroupsum title=timeSeriesGroupSum(uid,タイムスタンプ,値) class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupSum(uid,タイムスタンプ,値) </a> <a href=#agg-function-timeseriesgroupratesum title=timeSeriesGroupRateSum(uid,ts,val) class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupRateSum(uid,ts,val) </a> <a href=#agg_function-avg title=平均(x) class="nav-link text-wrap d-inline-block w-100"> 平均(x) </a> <a href=#agg_function-uniq title=uniq class="nav-link text-wrap d-inline-block w-100"> uniq </a> <a href=#agg_function-uniqcombined title=uniqCombined class="nav-link text-wrap d-inline-block w-100"> uniqCombined </a> <a href=#agg_function-uniqcombined64 title=uniqCombined64 class="nav-link text-wrap d-inline-block w-100"> uniqCombined64 </a> <a href=#agg_function-uniqhll12 title=unihll12 class="nav-link text-wrap d-inline-block w-100"> unihll12 </a> <a href=#agg_function-uniqexact title=ユニキャック class="nav-link text-wrap d-inline-block w-100"> ユニキャック </a> <a href=#agg_function-grouparray title=groupArray(x),groupArray(max_size)(x) class="nav-link text-wrap d-inline-block w-100"> groupArray(x),groupArray(max_size)(x) </a> <a href=#grouparrayinsertatvalue-position title=groupArrayInsertAt(値、位置) class="nav-link text-wrap d-inline-block w-100"> groupArrayInsertAt(値、位置) </a> <a href=#agg_function-grouparraymovingsum title="グルーパーレイモビングサムcity in new mexico usa" class="nav-link text-wrap d-inline-block w-100"> グルーパーレイモビングサムcity in new mexico usa </a> <a href=#agg_function-grouparraymovingavg title=groupparraymovingavg class="nav-link text-wrap d-inline-block w-100"> groupparraymovingavg </a> <a href=#groupuniqarrayx-groupuniqarraymax-sizex title=groupUniqArray(x),groupUniqArray(max_size)(x) class="nav-link text-wrap d-inline-block w-100"> groupUniqArray(x),groupUniqArray(max_size)(x) </a> <a href=#quantile title=分位値 class="nav-link text-wrap d-inline-block w-100"> 分位値 </a> <a href=#quantiledeterministic title=quantiedeterministic class="nav-link text-wrap d-inline-block w-100"> quantiedeterministic </a> <a href=#quantileexact title=quantileExact class="nav-link text-wrap d-inline-block w-100"> quantileExact </a> <a href=#quantileexactweighted title=quantileExactWeighted class="nav-link text-wrap d-inline-block w-100"> quantileExactWeighted </a> <a href=#quantiletiming title=クオンタイミング class="nav-link text-wrap d-inline-block w-100"> クオンタイミング </a> <a href=#quantiletimingweighted title=quantitimingweighted class="nav-link text-wrap d-inline-block w-100"> quantitimingweighted </a> <a href=#quantiletdigest title=quantiletdigestcomment class="nav-link text-wrap d-inline-block w-100"> quantiletdigestcomment </a> <a href=#quantiletdigestweighted title=quantileTDigestWeighted class="nav-link text-wrap d-inline-block w-100"> quantileTDigestWeighted </a> <a href=#median title=中央値 class="nav-link text-wrap d-inline-block w-100"> 中央値 </a> <a href=#quantiles title="quantiles(level1, level2, …)(x)" class="nav-link text-wrap d-inline-block w-100"> quantiles(level1, level2, …)(x) </a> <a href=#varsampx title=varSamp(x) class="nav-link text-wrap d-inline-block w-100"> varSamp(x) </a> <a href=#varpopx title=varPop(x) class="nav-link text-wrap d-inline-block w-100"> varPop(x) </a> <a href=#stddevsampx title=stddevSamp(x) class="nav-link text-wrap d-inline-block w-100"> stddevSamp(x) </a> <a href=#stddevpopx title=stddevPop(x) class="nav-link text-wrap d-inline-block w-100"> stddevPop(x) </a> <a href=#topknx title=topK(N)(x) class="nav-link text-wrap d-inline-block w-100"> topK(N)(x) </a> <a href=#topkweighted title=トップクイット class="nav-link text-wrap d-inline-block w-100"> トップクイット </a> <a href=#covarsampx-y title=covarSamp(x,y) class="nav-link text-wrap d-inline-block w-100"> covarSamp(x,y) </a> <a href=#covarpopx-y title=covarPop(x,y) class="nav-link text-wrap d-inline-block w-100"> covarPop(x,y) </a> <a href=#corrx-y title=corr(x,y) class="nav-link text-wrap d-inline-block w-100"> corr(x,y) </a> <a href=#categoricalinformationvalue title=categoricalInformationValue class="nav-link text-wrap d-inline-block w-100"> categoricalInformationValue </a> <a href=#simplelinearregression title=simplelearregression class="nav-link text-wrap d-inline-block w-100"> simplelearregression </a> <a href=#agg_functions-stochasticlinearregression title=stochasticLinearRegression class="nav-link text-wrap d-inline-block w-100"> stochasticLinearRegression </a> <nav id=toc-toc-54 class="nav flex-column pl-2"> <a href=#agg_functions-stochasticlinearregression-parameters title=パラメータ class="nav-link text-wrap d-inline-block w-100"> パラメータ </a> <a href=#agg_functions-stochasticlinearregression-usage title=使い方 class="nav-link text-wrap d-inline-block w-100"> 使い方 </a> <a href=#agg_functions-stochasticlinearregression-notes title=備考 class="nav-link text-wrap d-inline-block w-100"> 備考 </a> </nav> <a href=#agg_functions-stochasticlogisticregression title=stochasticLogisticRegression class="nav-link text-wrap d-inline-block w-100"> stochasticLogisticRegression </a> <nav id=toc-toc-55 class="nav flex-column pl-2"> <a href=#agg_functions-stochasticlogisticregression-parameters title=パラメータ class="nav-link text-wrap d-inline-block w-100"> パラメータ </a> </nav> <a href=#groupbitmapand title=groupbitmapandgenericname class="nav-link text-wrap d-inline-block w-100"> groupbitmapandgenericname </a> <a href=#groupbitmapor title=groupBitmapOr class="nav-link text-wrap d-inline-block w-100"> groupBitmapOr </a> <a href=#groupbitmapxor title=groupBitmapXor class="nav-link text-wrap d-inline-block w-100"> groupBitmapXor </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=zh data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>输入输出格式 - ClickHouse文档</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="输入输出格式 - ClickHouse文档 "><meta property=og:description content="输入输出格式 ClickHouse 可以接受多种数据格式，可以在 (INSERT) 以及 (SELECT) 请求中使用。 下列表格列出了支持的数据格式以及在 (INSERT) 以及 (SELECT) 请求中使用它们的方式。 格式 INSER"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="输入输出格式 - ClickHouse文档 "><meta name=description content="输入输出格式 ClickHouse 可以接受多种数据格式，可以在 (INSERT) 以及 (SELECT) 请求中使用。 下列表格列出了支持的数据格式以及在 (INSERT) 以及 (SELECT) 请求中使用它们的方式。 格式 INSER"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> 输入输出格式 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/interfaces/formats.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/zh.svg alt=中文 title=中文 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/interfaces/formats/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/interfaces/formats/ class="dropdown-item disabled"> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/interfaces/formats/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/interfaces/formats/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/interfaces/formats/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/interfaces/formats/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/interfaces/formats/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=多页或单页> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt=多页版本 title=多页版本> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt=单页版本 title=单页版本> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> 版本: <span class=text-light>最新消息</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/zh/ class="dropdown-item disable"> <span class=text-light>最新消息</span> </a> <a href=/docs/v20.3/zh/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/zh/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/zh/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/zh/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/zh/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/zh/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/zh/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/zh/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/zh/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/zh/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/zh/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=导言 class="nav-link text-light text-wrap dropdown-toggle px-0">导言</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../introduction/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../introduction/adopters/ title=采用者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">采用者</a> <a href=../../introduction/history/ title=ClickHouse历史 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse历史</a> <a href=../../introduction/distinctive_features/ title=ClickHouse的独特功能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse的独特功能</a> <a href=../../introduction/features_considered_disadvantages/ title=ClickHouse的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse的限制</a> <a href=../../introduction/performance/ title=性能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">性能</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=发动机 class="nav-link text-light text-wrap dropdown-toggle px-0">发动机</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/ title=发动机 class="nav-link text-light text-wrap d-inline-block w-100 px-0">发动机</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title=数据库引擎 class="nav-link text-light text-wrap dropdown-toggle px-0">数据库引擎</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/database_engines/lazy/ title=懒惰 class="nav-link text-light text-wrap d-inline-block w-100 px-0">懒惰</a> <a href=../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/database_engines/ title=数据库引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据库引擎</a> </nav> </div> <a href=#sidebar-sidebar-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3 title=表引擎 class="nav-link text-light text-wrap dropdown-toggle px-0">表引擎</a> <div id=sidebar-sidebar-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-2-3-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-1 title=梅树家族 class="nav-link text-light text-wrap dropdown-toggle px-0">梅树家族</a> <div id=sidebar-sidebar-2-3-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/mergetree_family/ title=梅树家族 class="nav-link text-light text-wrap d-inline-block w-100 px-0">梅树家族</a> <a href=../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=版本集合在新树 class="nav-link text-light text-wrap d-inline-block w-100 px-0">版本集合在新树</a> <a href=../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> <a href=../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../engines/table_engines/mergetree_family/collapsingmergetree/ title=折叠树 class="nav-link text-light text-wrap d-inline-block w-100 px-0">折叠树</a> <a href=../../engines/table_engines/mergetree_family/replication/ title=数据副本 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据副本</a> <a href=../../engines/table_engines/mergetree_family/replacingmergetree/ title=更换麦树 class="nav-link text-light text-wrap d-inline-block w-100 px-0">更换麦树</a> <a href=../../engines/table_engines/mergetree_family/custom_partitioning_key/ title=自定义分区键 class="nav-link text-light text-wrap d-inline-block w-100 px-0">自定义分区键</a> </nav> </div> <a href=#sidebar-sidebar-2-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-2 title=日志系列 class="nav-link text-light text-wrap dropdown-toggle px-0">日志系列</a> <div id=sidebar-sidebar-2-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/log_family/ title=日志系列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日志系列</a> <a href=../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> <a href=../../engines/table_engines/log_family/log/ title=日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日志</a> <a href=../../engines/table_engines/log_family/log_family/ title=日志引擎系列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日志引擎系列</a> </nav> </div> <a href=#sidebar-sidebar-2-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-3 title=集成 class="nav-link text-light text-wrap dropdown-toggle px-0">集成</a> <div id=sidebar-sidebar-2-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/integrations/ title=集成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">集成</a> <a href=../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/table_engines/integrations/kafka/ title=卡夫卡 class="nav-link text-light text-wrap d-inline-block w-100 px-0">卡夫卡</a> </nav> </div> <a href=#sidebar-sidebar-2-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-4 title=特别 class="nav-link text-light text-wrap dropdown-toggle px-0">特别</a> <div id=sidebar-sidebar-2-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table_engines/special/ title=特别 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特别</a> <a href=../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> <a href=../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../engines/table_engines/special/url/ title=URL(URL,格式) class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL,格式)</a> <a href=../../engines/table_engines/special/distributed/ title=分布 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分布</a> <a href=../../engines/table_engines/special/join/ title=加入我们 class="nav-link text-light text-wrap d-inline-block w-100 px-0">加入我们</a> <a href=../../engines/table_engines/special/merge/ title=合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">合并</a> <a href=../../engines/table_engines/special/dictionary/ title=字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典</a> <a href=../../engines/table_engines/special/file/ title=文件(输入格式) class="nav-link text-light text-wrap d-inline-block w-100 px-0">文件(输入格式)</a> <a href=../../engines/table_engines/special/view/ title=查看 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查看</a> <a href=../../engines/table_engines/special/materializedview/ title=物化视图 class="nav-link text-light text-wrap d-inline-block w-100 px-0">物化视图</a> <a href=../../engines/table_engines/special/external_data/ title=用于查询处理的外部数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用于查询处理的外部数据</a> <a href=../../engines/table_engines/special/buffer/ title=缓冲区 class="nav-link text-light text-wrap d-inline-block w-100 px-0">缓冲区</a> <a href=../../engines/table_engines/special/memory/ title=记忆 class="nav-link text-light text-wrap d-inline-block w-100 px-0">记忆</a> <a href=../../engines/table_engines/special/set/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> <a href=../../engines/table_engines/ title=表引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表引擎</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=SQL参考 class="nav-link text-light text-wrap dropdown-toggle px-0">SQL参考</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/ title=隐藏 class="nav-link text-light text-wrap d-inline-block w-100 px-0">隐藏</a> <a href=#sidebar-sidebar-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2 title=发言 class="nav-link text-light text-wrap dropdown-toggle px-0">发言</a> <div id=sidebar-sidebar-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/statements/ title=发言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">发言</a> <a href=../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../sql_reference/statements/misc/ title=其他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他</a> <a href=../../sql_reference/statements/create/ title="CREATE DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE DATABASE</a> <a href=../../sql_reference/statements/insert_into/ title=INSERT class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT</a> <a href=../../sql_reference/statements/select/ title="SELECT 查询语法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT 查询语法</a> </nav> </div> <a href=../../sql_reference/syntax/ title=语法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">语法</a> <a href=#sidebar-sidebar-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-4 title=聚合函数 class="nav-link text-light text-wrap dropdown-toggle px-0">聚合函数</a> <div id=sidebar-sidebar-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/aggregate_functions/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../sql_reference/aggregate_functions/reference/ title=参考资料 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参考资料</a> <a href=../../sql_reference/aggregate_functions/combinators/ title=聚合函数组合器 class="nav-link text-light text-wrap d-inline-block w-100 px-0">聚合函数组合器</a> <a href=../../sql_reference/aggregate_functions/parametric_functions/ title=参数聚合函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参数聚合函数</a> </nav> </div> <a href=#sidebar-sidebar-3-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-5 title=表函数 class="nav-link text-light text-wrap dropdown-toggle px-0">表函数</a> <div id=sidebar-sidebar-3-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/table_functions/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../sql_reference/table_functions/file/ title=文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文件</a> <a href=../../sql_reference/table_functions/merge/ title=合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">合并</a> <a href=../../sql_reference/table_functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../sql_reference/table_functions/remote/ title=远程 class="nav-link text-light text-wrap d-inline-block w-100 px-0">远程</a> <a href=../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../sql_reference/table_functions/input/ title=输入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">输入</a> <a href=../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-3-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-6 title=字典 class="nav-link text-light text-wrap dropdown-toggle px-0">字典</a> <div id=sidebar-sidebar-3-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/dictionaries/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=#sidebar-sidebar-3-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-6-2 title=外部字典 class="nav-link text-light text-wrap dropdown-toggle px-0">外部字典</a> <div id=sidebar-sidebar-3-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/dictionaries/external_dictionaries/ title=外部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部字典</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title=概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概述</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title=配置外部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置外部字典</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title=在内存中存储字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">在内存中存储字典</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title=字典更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典更新</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title=外部字典的来源 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部字典的来源</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title=字典键和字段 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典键和字段</a> <a href=../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title=分层字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分层字典</a> </nav> </div> <a href=../../sql_reference/dictionaries/internal_dicts/ title=内部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部字典</a> </nav> </div> <a href=../../sql_reference/operators/ title=操作符 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作符</a> <a href=#sidebar-sidebar-3-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-8 title=函数 class="nav-link text-light text-wrap dropdown-toggle px-0">函数</a> <div id=sidebar-sidebar-3-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/functions/introspection/ title=自省 class="nav-link text-light text-wrap d-inline-block w-100 px-0">自省</a> <a href=../../sql_reference/functions/geo/ title=GEO函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">GEO函数</a> <a href=../../sql_reference/functions/hash_functions/ title=Hash函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash函数</a> <a href=../../sql_reference/functions/in_functions/ title=IN运算符相关函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN运算符相关函数</a> <a href=../../sql_reference/functions/ip_address_functions/ title=IP函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IP函数</a> <a href=../../sql_reference/functions/json_functions/ title=JSON函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON函数</a> <a href=../../sql_reference/functions/functions_for_nulls/ title=Nullable处理函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable处理函数</a> <a href=../../sql_reference/functions/url_functions/ title=URL函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL函数</a> <a href=../../sql_reference/functions/uuid_functions/ title=UUID函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID函数</a> <a href=../../sql_reference/functions/array_join/ title=arrayJoin函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin函数</a> <a href=../../sql_reference/functions/bitmap_functions/ title=位图函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位图函数</a> <a href=../../sql_reference/functions/bit_functions/ title=位操作函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位操作函数</a> <a href=../../sql_reference/functions/other_functions/ title=其他函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他函数</a> <a href=../../sql_reference/functions/ title=函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">函数</a> <a href=../../sql_reference/functions/ym_dict_functions/ title=功能与Yandex的工作。梅特里卡词典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">功能与Yandex的工作。梅特里卡词典</a> <a href=../../sql_reference/functions/rounding_functions/ title=取整函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">取整函数</a> <a href=../../sql_reference/functions/ext_dict_functions/ title=字典函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典函数</a> <a href=../../sql_reference/functions/string_functions/ title=字符串函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串函数</a> <a href=../../sql_reference/functions/splitting_merging_functions/ title=字符串拆分合并函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串拆分合并函数</a> <a href=../../sql_reference/functions/string_search_functions/ title=字符串搜索函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串搜索函数</a> <a href=../../sql_reference/functions/string_replace_functions/ title=字符串替换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串替换函数</a> <a href=../../sql_reference/functions/math_functions/ title=数学函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学函数</a> <a href=../../sql_reference/functions/array_functions/ title=数组函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数组函数</a> <a href=../../sql_reference/functions/date_time_functions/ title=时间日期函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">时间日期函数</a> <a href=../../sql_reference/functions/machine_learning_functions/ title=机器学习函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">机器学习函数</a> <a href=../../sql_reference/functions/conditional_functions/ title=条件函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件函数</a> <a href=../../sql_reference/functions/comparison_functions/ title=比较函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比较函数</a> <a href=../../sql_reference/functions/arithmetic_functions/ title=算术函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算术函数</a> <a href=../../sql_reference/functions/type_conversion_functions/ title=类型转换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">类型转换函数</a> <a href=../../sql_reference/functions/encoding_functions/ title=编码函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">编码函数</a> <a href=../../sql_reference/functions/logical_functions/ title=逻辑函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">逻辑函数</a> <a href=../../sql_reference/functions/random_functions/ title=随机函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">随机函数</a> <a href=../../sql_reference/functions/higher_order_functions/ title=高阶函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">高阶函数</a> </nav> </div> <a href=#sidebar-sidebar-3-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9 title=数据类型 class="nav-link text-light text-wrap dropdown-toggle px-0">数据类型</a> <div id=sidebar-sidebar-3-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=#sidebar-sidebar-3-9-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9-3 title=域 class="nav-link text-light text-wrap dropdown-toggle px-0">域</a> <div id=sidebar-sidebar-3-9-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/domains/overview/ title=域 class="nav-link text-light text-wrap d-inline-block w-100 px-0">域</a> <a href=../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types\_of\_arguments…)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types\_of\_arguments…)</a> <a href=../../sql_reference/data_types/decimal/ title=Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S)</a> <a href=../../sql_reference/data_types/enum/ title=Enum8,Enum16 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum8,Enum16</a> <a href=../../sql_reference/data_types/float/ title=Float32,Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32,Float64</a> <a href=../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a> <a href=../../sql_reference/data_types/int_uint/ title=UInt8,UInt16,UInt32,UInt64,Int8,Int16,Int32,Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8,UInt16,UInt32,UInt64,Int8,Int16,Int32,Int64</a> <a href=../../sql_reference/data_types/nullable/ title=可为空（类型名称) class="nav-link text-light text-wrap d-inline-block w-100 px-0">可为空（类型名称)</a> <a href=../../sql_reference/data_types/fixedstring/ title=固定字符串 class="nav-link text-light text-wrap d-inline-block w-100 px-0">固定字符串</a> <a href=../../sql_reference/data_types/string/ title=字符串 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串</a> <a href=../../sql_reference/data_types/boolean/ title=布尔值 class="nav-link text-light text-wrap d-inline-block w-100 px-0">布尔值</a> <a href=../../sql_reference/data_types/ title=数据类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据类型</a> <a href=../../sql_reference/data_types/date/ title=日期 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日期</a> <a href=../../sql_reference/data_types/datetime/ title=日期时间 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日期时间</a> <a href=../../sql_reference/data_types/array/ title=阵列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">阵列(T)</a> <a href=#sidebar-sidebar-3-9-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9-18 title=嵌套数据结构 class="nav-link text-light text-wrap dropdown-toggle px-0">嵌套数据结构</a> <div id=sidebar-sidebar-3-9-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> <a href=../../sql_reference/data_types/nested_data_structures/ title=嵌套数据结构 class="nav-link text-light text-wrap d-inline-block w-100 px-0">嵌套数据结构</a> </nav> </div> <a href=#sidebar-sidebar-3-9-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9-19 title=特殊数据类型 class="nav-link text-light text-wrap dropdown-toggle px-0">特殊数据类型</a> <div id=sidebar-sidebar-3-9-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql_reference/data_types/special_data_types/interval/ title=间隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">间隔</a> <a href=../../sql_reference/data_types/special_data_types/nothing/ title=没什么 class="nav-link text-light text-wrap d-inline-block w-100 px-0">没什么</a> <a href=../../sql_reference/data_types/special_data_types/ title=特殊数据类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特殊数据类型</a> <a href=../../sql_reference/data_types/special_data_types/expression/ title=表达式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表达式</a> <a href=../../sql_reference/data_types/special_data_types/set/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=指南 class="nav-link text-light text-wrap dropdown-toggle px-0">指南</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/ title=概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概述</a> <a href=../../guides/apply_catboost_model/ title=应用CatBoost模型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">应用CatBoost模型</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=商业 class="nav-link text-light text-wrap dropdown-toggle px-0">商业</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/ title=商业 class="nav-link text-light text-wrap d-inline-block w-100 px-0">商业</a> <a href=../../commercial/cloud/ title=ﾂ环板Providersｮﾂ嘉ｯ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂ环板Providersｮﾂ嘉ｯ</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=新增内容 class="nav-link text-light text-wrap dropdown-toggle px-0">新增内容</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/ title=新增内容 class="nav-link text-light text-wrap d-inline-block w-100 px-0">新增内容</a> <a href=../../whats_new/security_changelog/ title="修复于 ClickHouse Release 18.12.13, 2018-09-10" class="nav-link text-light text-wrap d-inline-block w-100 px-0">修复于 ClickHouse Release 18.12.13, 2018-09-10</a> <a href=../../whats_new/roadmap/ title=规划 class="nav-link text-light text-wrap d-inline-block w-100 px-0">规划</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=碌莽禄release拢.0755-88888888 class="nav-link text-light text-wrap dropdown-toggle px-0">碌莽禄release拢.0755-88888888</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> <a href=../../whats_new/changelog/ title=碌莽禄release拢.0755-88888888 class="nav-link text-light text-wrap d-inline-block w-100 px-0">碌莽禄release拢.0755-88888888</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../faq/general/ title=常见问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">常见问题</a> </nav> </div> <a href=../../ title=什么是ClickHouse？ class="nav-link text-light text-wrap d-inline-block w-100 px-0">什么是ClickHouse？</a> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title="ClickHouse 开发" class="nav-link text-light text-wrap dropdown-toggle px-0">ClickHouse 开发</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/browse_code/ title=浏览ClickHouse源代码 class="nav-link text-light text-wrap d-inline-block w-100 px-0">浏览ClickHouse源代码</a> <a href=../../development/build_cross_arm/ title="如何在Linux上构建ClickHouse for AARCH64（ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux上构建ClickHouse for AARCH64（ARM64)</a> <a href=../../development/ title="ClickHouse 开发" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 开发</a> <a href=../../development/architecture/ title="ClickHouse 架构概述" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 架构概述</a> <a href=../../development/tests/ title="ClickHouse 测试" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 测试</a> <a href=../../development/developer_instruction/ title=Windows使用指引 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Windows使用指引</a> <a href=../../development/contrib/ title=使用的三方库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用的三方库</a> <a href=../../development/build_osx/ title="在 Mac OS X 中编译 ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">在 Mac OS X 中编译 ClickHouse</a> <a href=../../development/build_cross_osx/ title="如何在Linux中编译Mac OS X ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux中编译Mac OS X ClickHouse</a> <a href=../../development/build/ title="如何构建 ClickHouse 发布包" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何构建 ClickHouse 发布包</a> <a href=../../development/style/ title="如何编写 C++ 代码" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何编写 C++ 代码</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=入门 class="nav-link text-light text-wrap dropdown-toggle px-0">入门</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/tutorial/ title=教程 class="nav-link text-light text-wrap d-inline-block w-100 px-0">教程</a> <a href=#sidebar-sidebar-10-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10-2 title=示例数据集 class="nav-link text-light text-wrap dropdown-toggle px-0">示例数据集</a> <div id=sidebar-sidebar-10-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../getting_started/example_datasets/metrica/ title=Yandex梅特里卡数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex梅特里卡数据</a> <a href=../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab 大数据基准测试" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab 大数据基准测试</a> <a href=../../getting_started/example_datasets/criteo/ title="Criteo TB级别点击日志" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Criteo TB级别点击日志</a> <a href=../../getting_started/example_datasets/star_schema/ title=星型架构基准测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">星型架构基准测试</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title=纽约市出租车数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">纽约市出租车数据</a> <a href=../../getting_started/example_datasets/wikistat/ title=维基访问数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">维基访问数据</a> <a href=../../getting_started/example_datasets/ontime/ title=航班飞行数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">航班飞行数据</a> </nav> </div> <a href=../../getting_started/playground/ title=♪操场♪ class="nav-link text-light text-wrap d-inline-block w-100 px-0">♪操场♪</a> <a href=../../getting_started/ title=入门 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入门</a> <a href=../../getting_started/install/ title=系统要求 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统要求</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=客户端 class="nav-link text-light text-wrap dropdown-toggle px-0">客户端</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/mysql/ title=MySQL接口 class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL接口</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=第三方 class="nav-link text-light text-wrap dropdown-toggle px-0">第三方</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/ title=第三方 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方</a> <a href=../../interfaces/third-party/proxy/ title=来自第三方开发人员的代理服务器 class="nav-link text-light text-wrap d-inline-block w-100 px-0">来自第三方开发人员的代理服务器</a> <a href=../../interfaces/third-party/gui/ title=第三方开发的可视化界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方开发的可视化界面</a> <a href=../../interfaces/third-party/client_libraries/ title=第三方开发的库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方开发的库</a> <a href=../../interfaces/third-party/integrations/ title=第三方集成库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方集成库</a> </nav> </div> <a href=../../interfaces/cpp/ title="C ++客户端库" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C ++客户端库</a> <a href=../../interfaces/http/ title="HTTP 客户端" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP 客户端</a> <a href=../../interfaces/jdbc/ title="JDBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC 驱动</a> <a href=../../interfaces/odbc/ title="ODBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC 驱动</a> <a href=../../interfaces/tcp/ title=原生客户端接口（TCP） class="nav-link text-light text-wrap d-inline-block w-100 px-0">原生客户端接口（TCP）</a> <a href=../../interfaces/cli/ title=命令行客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">命令行客户端</a> <a href=../../interfaces/ title=客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端</a> <a href=../../interfaces/formats/ title=输入输出格式 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">输入输出格式</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=操作 class="nav-link text-light text-wrap dropdown-toggle px-0">操作</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/requirements/ title=要求 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要求</a> <a href=../../operations/troubleshooting/ title=疑难解答 class="nav-link text-light text-wrap d-inline-block w-100 px-0">疑难解答</a> <a href=../../operations/update/ title=点击更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">点击更新</a> <a href=../../operations/backup/ title=数据备份 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据备份</a> <a href=#sidebar-sidebar-12-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-5 title=优化性能 class="nav-link text-light text-wrap dropdown-toggle px-0">优化性能</a> <div id=sidebar-sidebar-12-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/optimizing_performance/ title=优化性能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">优化性能</a> <a href=../../operations/optimizing_performance/sampling_query_profiler/ title=查询分析 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询分析</a> </nav> </div> <a href=../../operations/system_tables/ title=系统表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统表</a> <a href=../../operations/performance_test/ title=测试硬件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">测试硬件</a> <a href=../../operations/tips/ title=使用建议 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用建议</a> <a href=../../operations/ title=操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作</a> <a href=../../operations/monitoring/ title=监控 class="nav-link text-light text-wrap d-inline-block w-100 px-0">监控</a> <a href=../../operations/access_rights/ title=访问权限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">访问权限</a> <a href=../../operations/configuration_files/ title=配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置文件</a> <a href=../../operations/quotas/ title=配额 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配额</a> <a href=#sidebar-sidebar-12-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-14 title=服务器配置参数 class="nav-link text-light text-wrap dropdown-toggle px-0">服务器配置参数</a> <div id=sidebar-sidebar-12-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_configuration_parameters/settings/ title=服务器设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">服务器设置</a> <a href=../../operations/server_configuration_parameters/ title=服务器配置参数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">服务器配置参数</a> </nav> </div> <a href=#sidebar-sidebar-12-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-15 title=设置 class="nav-link text-light text-wrap dropdown-toggle px-0">设置</a> <div id=sidebar-sidebar-12-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/permissions_for_queries/ title=查询权限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询权限</a> <a href=../../operations/settings/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> <a href=../../operations/settings/settings_profiles/ title=设置配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置配置文件</a> <a href=../../operations/settings/constraints_on_settings/ title=对设置的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">对设置的限制</a> <a href=../../operations/settings/settings_users/ title=用户设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用户设置</a> <a href=../../operations/settings/query_complexity/ title=查询复杂性的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询复杂性的限制</a> </nav> </div> <a href=#sidebar-sidebar-12-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-16 title=ﾂ环板Utilityｮﾂ嘉ｯ class="nav-link text-light text-wrap dropdown-toggle px-0">ﾂ环板Utilityｮﾂ嘉ｯ</a> <div id=sidebar-sidebar-12-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utilities/clickhouse-benchmark/ title=ﾂ暗ｪﾂ氾环催ﾂ団 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂ暗ｪﾂ氾环催ﾂ団</a> <a href=../../operations/utilities/clickhouse-copier/ title=ﾂ环板-ｮﾂ嘉ｯﾂ偲 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂ环板-ｮﾂ嘉ｯﾂ偲</a> <a href=../../operations/utilities/ title=ﾂ环板Utilityｮﾂ嘉ｯ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂ环板Utilityｮﾂ嘉ｯ</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13 title=碌莽禄release拢.0755-88888888 class="nav-link text-light text-wrap dropdown-toggle px-0">碌莽禄release拢.0755-88888888</a> <div id=sidebar-sidebar-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../changelog/ title=碌莽禄release拢.0755-88888888 class="nav-link text-light text-wrap d-inline-block w-100 px-0">碌莽禄release拢.0755-88888888</a> </nav> </div> <a href=../../single/clickhouse_zh.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF版本 title=PDF版本 height=24 class="d-block mr-1 float-left"><div>PDF版本</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=formats>输入输出格式<a class=headerlink href=#formats title="Permanent link">&para;</a></h1> <p>ClickHouse 可以接受多种数据格式，可以在 (<code>INSERT</code>) 以及 (<code>SELECT</code>) 请求中使用。</p> <p>下列表格列出了支持的数据格式以及在 (<code>INSERT</code>) 以及 (<code>SELECT</code>) 请求中使用它们的方式。</p> <table> <thead> <tr> <th>格式</th> <th>INSERT</th> <th>SELECT</th> </tr> </thead> <tbody> <tr> <td><a href=#tabseparated>TabSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedraw>TabSeparatedRaw</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnames>TabSeparatedWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#format-template>模板</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#templateignorespaces>TemplateIgnoreSpaces</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#csv>CSV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#csvwithnames>CSVWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#format-customseparated>自定义分离</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-values>值</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#vertical>垂直</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td>VerticalRaw</td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#json>JSON</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompact>JSONCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoneachrow>JSONEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tskv>TSKV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#pretty>漂亮</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompact>PrettyCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompactmonoblock>PrettyCompactMonoBlock</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettynoescapes>PrettyNoEscapes</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettyspace>PrettySpace</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#protobuf>Protobuf</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-avro>Avro</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-avro-confluent>AvroConfluent</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#data-format-parquet>镶木地板</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-orc>ORC</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#rowbinary>RowBinary</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#rowbinarywithnamesandtypes>RowBinaryWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#native>本地人</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#null>Null</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#xml>XML</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#capnproto>CapnProto</a></td> <td>✔</td> <td>✔</td> </tr> </tbody> </table> <h2 id=tabseparated>TabSeparated<a class=headerlink href=#tabseparated title="Permanent link">&para;</a></h2> <p>在 TabSeparated 格式中，数据按行写入。每行包含由制表符分隔的值。除了行中的最后一个值（后面紧跟换行符）之外，每个值都跟随一个制表符。 在任何地方都可以使用严格的 Unix 命令行。最后一行还必须在最后包含换行符。值以文本格式编写，不包含引号，并且要转义特殊字符。</p> <p>这种格式也可以用 <code>TSV</code> 来表示。</p> <p>TabSeparated 格式非常方便用于自定义程序或脚本处理数据。HTTP 客户端接口默认会用这种格式，命令行客户端批量模式下也会用这种格式。这种格式允许在不同数据库之间传输数据。例如，从 MYSQL 中导出数据然后导入到 ClickHouse 中，反之亦然。</p> <p>TabSeparated 格式支持输出数据总值（当使用 WITH TOTALS） 以及极值（当 ‘extremes’ 设置是1）。这种情况下，总值和极值输出在主数据的后面。主要的数据，总值，极值会以一个空行隔开，例如：</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>TabSeparated</span><span class=o>``</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>17</span>      <span class=mi>1406958</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>18</span>      <span class=mi>1383658</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>19</span>      <span class=mi>1405797</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>20</span>      <span class=mi>1353623</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>21</span>      <span class=mi>1245779</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>22</span>      <span class=mi>1031592</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>23</span>      <span class=mi>1046491</span>

<span class=mi>0000</span><span class=o>-</span><span class=mi>00</span><span class=o>-</span><span class=mi>00</span>      <span class=mi>8873898</span>

<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>17</span>      <span class=mi>1031592</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>23</span>      <span class=mi>1406958</span>
</code></pre></div> <h3 id=shu-ju-jie-xi-fang-shi>数据解析方式<a class=headerlink href=#shu-ju-jie-xi-fang-shi title="Permanent link">&para;</a></h3> <p>整数以十进制形式写入。数字在开头可以包含额外的 <code>+</code> 字符（解析时忽略，格式化时不记录）。非负数不能包含负号。 读取时，允许将空字符串解析为零，或者（对于带符号的类型）将仅包含负号的字符串解析为零。 不符合相应数据类型的数字可能会被解析为不同的数字，而不会显示错误消息。</p> <p>浮点数以十进制形式写入。点号用作小数点分隔符。支持指数等符号，如'inf'，‘+ inf’，‘-inf’和’nan’。 浮点数的输入可以以小数点开始或结束。<br> 格式化的时候，浮点数的精确度可能会丢失。<br> 解析的时候，没有严格需要去读取与机器可以表示的最接近的数值。</p> <p>日期会以 YYYY-MM-DD 格式写入和解析，但会以任何字符作为分隔符。<br> 带时间的日期会以 YYYY-MM-DD hh:mm:ss 格式写入和解析，但会以任何字符作为分隔符。<br> 这一切都发生在客户端或服务器启动时的系统时区（取决于哪一种格式的数据）。对于具有时间的日期，夏时制时间未指定。 因此，如果转储在夏令时中有时间，则转储不会明确地匹配数据，解析将选择两者之一。<br> 在读取操作期间，不正确的日期和具有时间的日期可以使用自然溢出或空日期和时间进行分析，而不会出现错误消息。</p> <p>有个例外情况，Unix 时间戳格式（10个十进制数字）也支持使用时间解析日期。结果不是时区相关的。格式 YYYY-MM-DD hh:mm:ss和 NNNNNNNNNN 会自动区分。</p> <p>字符串以反斜线转义的特殊字符输出。 以下转义序列用于输出：<code>\b</code>，<code>\f</code>，<code>\r</code>，<code>\n</code>，<code>\t</code>，<code>\0</code>，<code>\'</code>，<code>\\</code>。 解析还支持<code>\a</code>，<code>\v</code>和<code>\xHH</code>（十六进制转义字符）和任何<code>\c</code>字符，其中<code>c</code>是任何字符（这些序列被转换为<code>c</code>）。 因此，读取数据支持可以将换行符写为<code>\n</code>或<code>\</code>的格式，或者换行。例如，字符串 <code>Hello world</code> 在单词之间换行而不是空格可以解析为以下任何形式：</p> <div class=codehilite><pre><span></span><code><span class=n>Hello</span><span class=err>\</span><span class=n>nworld</span>

<span class=n>Hello</span><span class=err>\</span>
<span class=n>world</span>
</code></pre></div> <p>第二种形式是支持的，因为 MySQL 读取 tab-separated 格式数据集的时候也会使用它。</p> <p>在 TabSeparated 格式中传递数据时需要转义的最小字符集为：Tab，换行符（LF）和反斜杠。</p> <p>只有一小组符号会被转义。你可以轻易地找到一个字符串值，但这不会正常在你的终端显示。</p> <p>数组写在方括号内的逗号分隔值列表中。 通常情况下，数组中的数字项目会被拼凑，但日期，带时间的日期以及字符串将使用与上面相同的转义规则用单引号引起来。</p> <p><a href=../../sql_reference/syntax/ >NULL</a> 将输出为 <code>\N</code>。</p> <h2 id=tabseparatedraw>TabSeparatedRaw<a class=headerlink href=#tabseparatedraw title="Permanent link">&para;</a></h2> <p>与 <code>TabSeparated</code> 格式不一样的是，行数据是不会被转义的。<br> 该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <p>这种格式也可以使用名称 <code>TSVRaw</code> 来表示。</p> <h2 id=tabseparatedwithnames>TabSeparatedWithNames<a class=headerlink href=#tabseparatedwithnames title="Permanent link">&para;</a></h2> <p>与 <code>TabSeparated</code> 格式不一样的是，第一行会显示列的名称。<br> 在解析过程中，第一行完全被忽略。您不能使用列名来确定其位置或检查其正确性。<br> （未来可能会加入解析头行的功能）</p> <p>这种格式也可以使用名称 <code>TSVWithNames</code> 来表示。</p> <h2 id=tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes<a class=headerlink href=#tabseparatedwithnamesandtypes title="Permanent link">&para;</a></h2> <p>与 <code>TabSeparated</code> 格式不一样的是，第一行会显示列的名称，第二行会显示列的类型。<br> 在解析过程中，第一行和第二行完全被忽略。</p> <p>这种格式也可以使用名称 <code>TSVWithNamesAndTypes</code> 来表示。</p> <h2 id=format-template>模板<a class=headerlink href=#format-template title="Permanent link">&para;</a></h2> <p>此格式允许为具有指定转义规则的值指定带有占位符的自定义格式字符串。</p> <p>它使用设置 <code>format_schema</code>, <code>format_schema_rows</code>, <code>format_schema_rows_between_delimiter</code> and some settings of other formats (e.g. <code>output_format_json_quote_64bit_integers</code> 使用时 <code>JSON</code> 逃跑，进一步查看)</p> <p>格式字符串 <code>format_schema_rows</code> 使用以下语法指定行格式:</p> <p><code>delimiter_1${column_1:serializeAs_1}delimiter_2${column_2:serializeAs_2} ... delimiter_N</code>,</p> <div class=codehilite><pre><span></span><code><span class=k>where</span> <span class=ss>`delimiter_i`</span> <span class=k>is</span> <span class=n>a</span> <span class=n>delimiter</span> <span class=k>between</span> <span class=k>values</span> <span class=p>(</span><span class=ss>`$`</span> <span class=n>symbol</span> <span class=n>can</span> <span class=n>be</span> <span class=k>escaped</span> <span class=k>as</span> <span class=ss>`$$`</span><span class=p>),</span>
<span class=ss>`column_i`</span> <span class=k>is</span> <span class=n>a</span> <span class=n>name</span> <span class=n>of</span> <span class=n>a</span> <span class=k>column</span> <span class=n>whose</span> <span class=k>values</span> <span class=n>are</span> <span class=k>to</span> <span class=n>be</span> <span class=n>selected</span> <span class=k>or</span> <span class=nf>inserted</span> <span class=p>(</span><span class=k>if</span> <span class=n>empty</span><span class=p>,</span> <span class=k>then</span> <span class=k>column</span> <span class=n>will</span> <span class=n>be</span> <span class=n>skipped</span><span class=p>),</span>
<span class=ss>`serializeAs_i`</span> <span class=k>is</span> <span class=n>an</span> <span class=n>escaping</span> <span class=n>rule</span> <span class=k>for</span> <span class=n>the</span> <span class=k>column</span> <span class=k>values</span><span class=p>.</span> <span class=n>The</span> <span class=n>following</span> <span class=n>escaping</span> <span class=n>rules</span> <span class=n>are</span> <span class=n>supported</span><span class=p>:</span>

<span class=o>-</span> <span class=ss>`CSV`</span><span class=p>,</span> <span class=ss>`JSON`</span><span class=p>,</span> <span class=ss>`XML`</span> <span class=p>(</span><span class=n>similarly</span> <span class=k>to</span> <span class=n>the</span> <span class=n>formats</span> <span class=n>of</span> <span class=n>the</span> <span class=n>same</span> <span class=n>names</span><span class=p>)</span>
<span class=o>-</span> <span class=ss>`Escaped`</span> <span class=p>(</span><span class=n>similarly</span> <span class=k>to</span> <span class=ss>`TSV`</span><span class=p>)</span>
<span class=o>-</span> <span class=ss>`Quoted`</span> <span class=p>(</span><span class=n>similarly</span> <span class=k>to</span> <span class=ss>`Values`</span><span class=p>)</span>
<span class=o>-</span> <span class=ss>`Raw`</span> <span class=p>(</span><span class=n>without</span> <span class=n>escaping</span><span class=p>,</span> <span class=n>similarly</span> <span class=k>to</span> <span class=ss>`TSVRaw`</span><span class=p>)</span>
<span class=o>-</span> <span class=ss>`None`</span> <span class=p>(</span><span class=n>no</span> <span class=n>escaping</span> <span class=n>rule</span><span class=p>,</span> <span class=n>see</span> <span class=n>further</span><span class=p>)</span>

<span class=k>If</span> <span class=n>escaping</span> <span class=n>rule</span> <span class=k>is</span> <span class=n>omitted</span><span class=p>,</span> <span class=k>then</span><span class=ss>`None`</span> <span class=n>will</span> <span class=n>be</span> <span class=n>used</span><span class=p>.</span> <span class=ss>`XML`</span> <span class=k>and</span> <span class=ss>`Raw`</span> <span class=n>are</span> <span class=n>suitable</span> <span class=n>only</span> <span class=k>for</span> <span class=n>output</span><span class=p>.</span>

<span class=n>So</span><span class=p>,</span> <span class=k>for</span> <span class=n>the</span> <span class=n>following</span> <span class=n>format</span> <span class=n>string</span><span class=p>:</span>

  <span class=ss>`Search phrase: ${SearchPhrase:Quoted}, count: ${c:Escaped}, ad price: $$${price:JSON};`</span>

<span class=n>the</span> <span class=k>values</span> <span class=n>of</span> <span class=ss>`SearchPhrase`</span><span class=p>,</span> <span class=ss>`c`</span> <span class=k>and</span> <span class=ss>`price`</span> <span class=n>columns</span><span class=p>,</span> <span class=n>which</span> <span class=n>are</span> <span class=k>escaped</span> <span class=k>as</span> <span class=ss>`Quoted`</span><span class=p>,</span> <span class=ss>`Escaped`</span> <span class=k>and</span> <span class=ss>`JSON`</span> <span class=n>will</span> <span class=n>be</span> <span class=nf>printed</span> <span class=p>(</span><span class=k>for</span> <span class=k>select</span><span class=p>)</span> <span class=k>or</span> <span class=n>will</span> <span class=n>be</span> <span class=nf>expected</span> <span class=p>(</span><span class=k>for</span> <span class=k>insert</span><span class=p>)</span> <span class=k>between</span> <span class=ss>`Search phrase: `</span><span class=p>,</span> <span class=ss>`, count: `</span><span class=p>,</span> <span class=ss>`, ad price: $`</span> <span class=k>and</span> <span class=ss>`;`</span> <span class=n>delimiters</span> <span class=n>respectively</span><span class=p>.</span> <span class=k>For</span> <span class=n>example</span><span class=p>:</span>

<span class=ss>`Search phrase: &#39;bathroom interior design&#39;, count: 2166, ad price: $3;`</span>
</code></pre></div> <p>该 <code>format_schema_rows_between_delimiter</code> setting指定行之间的分隔符，该分隔符在除最后一行之外的每一行之后打印（或预期） (<code>\n</code> 默认情况下)</p> <p>格式字符串 <code>format_schema</code> 具有相同的语法 <code>format_schema_rows</code> 并允许指定前缀，后缀和打印一些附加信息的方式。 它包含以下占位符而不是列名:</p> <ul> <li><code>data</code> 包含数据的行 <code>format_schema_rows</code> 格式，由分隔 <code>format_schema_rows_between_delimiter</code>. 此占位符必须是格式字符串中的第一个占位符。</li> <li><code>totals</code> 是包含总值的行 <code>format_schema_rows</code> 格式（与总计一起使用时)</li> <li><code>min</code> 是具有最小值的行 <code>format_schema_rows</code> 格式（当极值设置为1时)</li> <li><code>max</code> 是具有最大值的行 <code>format_schema_rows</code> 格式（当极值设置为1时)</li> <li><code>rows</code> 输出行总数</li> <li><code>rows_before_limit</code> 是没有限制的最小行数。 仅当查询包含LIMIT时输出。 如果查询包含GROUP BY，则rows_before_limit_at_least是没有限制的确切行数。</li> <li><code>time</code> 请求执行时间以秒为单位</li> <li><code>rows_read</code> 已读取的行数</li> <li><code>bytes_read</code> 被读取的字节数（未压缩）</li> </ul> <p>占位符 <code>data</code>, <code>totals</code>, <code>min</code> 和 <code>max</code> 必须没有指定转义规则（或 <code>None</code> 必须明确指定）。 其余的占位符可能具有指定的任何转义规则。<br> 如果 <code>format_schema</code> 设置为空字符串, <code>${data}</code> 用作默认值。<br> 对于插入查询格式允许跳过一些列或一些字段，如果前缀或后缀（见示例）。</p> <p><code>Select</code> 示例:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span>
<span class=n>FORMAT</span> <span class=k>Template</span>
<span class=n>SETTINGS</span> <span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;&lt;!DOCTYPE HTML&gt;</span>
<span class=s1>&lt;html&gt; &lt;head&gt; &lt;title&gt;Search phrases&lt;/title&gt; &lt;/head&gt;</span>
<span class=s1> &lt;body&gt;</span>
<span class=s1>  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Search phrases&lt;/caption&gt;</span>
<span class=s1>    &lt;tr&gt; &lt;th&gt;Search phrase&lt;/th&gt; &lt;th&gt;Count&lt;/th&gt; &lt;/tr&gt;</span>
<span class=s1>    ${data}</span>
<span class=s1>  &lt;/table&gt;</span>
<span class=s1>  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Max&lt;/caption&gt;</span>
<span class=s1>    ${max}</span>
<span class=s1>  &lt;/table&gt;</span>
<span class=s1>  &lt;b&gt;Processed ${rows_read:XML} rows in ${time:XML} sec&lt;/b&gt;</span>
<span class=s1> &lt;/body&gt;</span>
<span class=s1>&lt;/html&gt;&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;&lt;tr&gt; &lt;td&gt;${SearchPhrase:XML}&lt;/td&gt; &lt;td&gt;${с:XML}&lt;/td&gt; &lt;/tr&gt;&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>&#39;\n    &#39;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>&quot;1&quot;</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Search phrase<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Count<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8267016<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>bathroom interior design<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>2166<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>yandex<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1655<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>spring 2014 fashion<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1549<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>freeform photos<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1480<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>&quot;1&quot;</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Max<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8873898<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>Processed 3095973 rows in 0.1569913 sec<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
 <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <p><code>Insert</code> 示例:</p> <div class=codehilite><pre><span></span><code><span class=err>Some header</span>
<span class=err>Page views: 5, User id: 4324182021466249494, Useless field: hello, Duration: 146, Sign: -1</span>
<span class=err>Page views: 6, User id: 4324182021466249494, Useless field: world, Duration: 185, Sign: 1</span>
<span class=err>Total rows: 2</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>UserActivity</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span>
<span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;Some header\n${data}\nTotal rows: ${:CSV}\n&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;Page views: ${PageViews:CSV}, User id: ${UserID:CSV}, Useless field: ${:CSV}, Duration: ${Duration:CSV}, Sign: ${Sign:CSV}&#39;</span>
</code></pre></div> <p><code>PageViews</code>, <code>UserID</code>, <code>Duration</code> 和 <code>Sign</code> 占位符内部是表中列的名称。 值后 <code>Useless field</code> 在行和之后 <code>\nTotal rows:</code> in后缀将被忽略。<br> 输入数据中的所有分隔符必须严格等于指定格式字符串中的分隔符。</p> <h2 id=templateignorespaces>TemplateIgnoreSpaces<a class=headerlink href=#templateignorespaces title="Permanent link">&para;</a></h2> <p>此格式仅适用于输入。<br> 类似于 <code>Template</code>，但跳过输入流中的分隔符和值之间的空格字符。 但是，如果格式字符串包含空格字符，则在输入流中将需要这些字符。 还允许指定空占位符 (<code>${}</code> 或 <code>${:None}</code>）将一些分隔符分成单独的部分，以忽略它们之间的空格。 此类占位符仅用于跳过空格字符。<br> 可以阅读 <code>JSON</code> 如果列的值在所有行中具有相同的顺序，则使用此格式。 例如，以下请求可用于从格式的输出示例中插入数据 <a href=#json>JSON</a>:</p> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=k>table_name</span> <span class=n>FORMAT</span> <span class=n>TemplateIgnoreSpaces</span> <span class=n>SETTINGS</span>
<span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;{${}&quot;meta&quot;${}:${:JSON},${}&quot;data&quot;${}:${}[${data}]${},${}&quot;totals&quot;${}:${:JSON},${}&quot;extremes&quot;${}:${:JSON},${}&quot;rows&quot;${}:${:JSON},${}&quot;rows_before_limit_at_least&quot;${}:${:JSON}${}}&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;{${}&quot;SearchPhrase&quot;${}:${}${phrase:JSON}${},${}&quot;c&quot;${}:${}${cnt:JSON}${}}&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>&#39;,&#39;</span>
</code></pre></div> <h2 id=tskv>TSKV<a class=headerlink href=#tskv title="Permanent link">&para;</a></h2> <p>与 <code>TabSeparated</code> 格式类似，但它输出的是 <code>name=value</code> 的格式。名称会和 <code>TabSeparated</code> 格式一样被转义，<code>=</code> 字符也会被转义。</p> <div class=codehilite><pre><span></span><code><span class=err>SearchPhrase=   count()=8267016</span>
<span class=err>SearchPhrase=bathroom interior design    count()=2166</span>
<span class=err>SearchPhrase=yandex     count()=1655</span>
<span class=err>SearchPhrase=2014 spring fashion    count()=1549</span>
<span class=err>SearchPhrase=freeform photos       count()=1480</span>
<span class=err>SearchPhrase=angelina jolie    count()=1245</span>
<span class=err>SearchPhrase=omsk       count()=1112</span>
<span class=err>SearchPhrase=photos of dog breeds    count()=1091</span>
<span class=err>SearchPhrase=curtain designs        count()=1064</span>
<span class=err>SearchPhrase=baku       count()=1000</span>
</code></pre></div> <p><a href=../../sql_reference/syntax/ >NULL</a> 输出为 <code>\N</code>。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>TSKV</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>x=1 y=\N</span>
</code></pre></div> <p>当有大量的小列时，这种格式是低效的，通常没有理由使用它。它被用于 Yandex 公司的一些部门。</p> <p>数据的输出和解析都支持这种格式。对于解析，任何顺序都支持不同列的值。可以省略某些值，用 <code>-</code> 表示， 它们被视为等于它们的默认值。在这种情况下，零和空行被用作默认值。作为默认值，不支持表中指定的复杂值。</p> <p>对于不带等号或值，可以用附加字段 <code>tskv</code> 来表示，这种在解析上是被允许的。这样的话该字段被忽略。</p> <h2 id=csv>CSV<a class=headerlink href=#csv title="Permanent link">&para;</a></h2> <p>按逗号分隔的数据格式(<a href=https://tools.ietf.org/html/rfc4180 rel="external nofollow noreferrer">RFC</a>)。</p> <p>格式化的时候，行是用双引号括起来的。字符串中的双引号会以两个双引号输出，除此之外没有其他规则来做字符转义了。日期和时间也会以双引号包括。数字的输出不带引号。值由一个单独的字符隔开，这个字符默认是 <code>,</code>。行使用 Unix 换行符（LF）分隔。 数组序列化成 CSV 规则如下：首先将数组序列化为 TabSeparated 格式的字符串，然后将结果字符串用双引号包括输出到 CSV。CSV 格式的元组被序列化为单独的列（即它们在元组中的嵌套关系会丢失）。</p> <div class=codehilite><pre><span></span><code><span class=err>clickhouse-client --format_csv_delimiter=&quot;|&quot; --query=&quot;INSERT INTO test.csv FORMAT CSV&quot; &lt; data.csv</span>
</code></pre></div> <p>*默认情况下间隔符是 <code>,</code> ，在 <a href=../../operations/settings/settings/#settings-format_csv_delimiter>format_csv_delimiter</a> 中可以了解更多间隔符配置。</p> <p>解析的时候，可以使用或不使用引号来解析所有值。支持双引号和单引号。行也可以不用引号排列。 在这种情况下，它们被解析为逗号或换行符（CR 或 LF）。在解析不带引号的行时，若违反 RFC 规则，会忽略前导和尾随的空格和制表符。 对于换行，全部支持 Unix（LF），Windows（CR LF）和 Mac OS Classic（CR LF）。</p> <p><code>NULL</code> 将输出为 <code>\N</code>。</p> <p>CSV 格式是和 TabSeparated 一样的方式输出总数和极值。</p> <h2 id=csvwithnames>CSVWithNames<a class=headerlink href=#csvwithnames title="Permanent link">&para;</a></h2> <p>会输出带头部行，和 <code>TabSeparatedWithNames</code> 一样。</p> <h2 id=format-customseparated>自定义分离<a class=headerlink href=#format-customseparated title="Permanent link">&para;</a></h2> <p>类似于 <a href=#format-template>模板</a>，但它打印或读取所有列，并使用从设置转义规则 <code>format_custom_escaping_rule</code> 从设置和分隔符 <code>format_custom_field_delimiter</code>, <code>format_custom_row_before_delimiter</code>, <code>format_custom_row_after_delimiter</code>, <code>format_custom_row_between_delimiter</code>, <code>format_custom_result_before_delimiter</code> 和 <code>format_custom_result_after_delimiter</code>，而不是从格式字符串。<br> 也有 <code>CustomSeparatedIgnoreSpaces</code> 格式，这是类似于 <code>TemplateIgnoreSpaces</code>.</p> <h2 id=json>JSON<a class=headerlink href=#json title="Permanent link">&para;</a></h2> <p>以 JSON 格式输出数据。除了数据表之外，它还输出列名称和类型以及一些附加信息：输出行的总数以及在没有 LIMIT 时可以输出的行数。 例：</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=n>JSON</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=p>{</span>
        <span class=nt>&quot;meta&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SearchPhrase&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;String&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;c&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;UInt64&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;data&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8267016&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;bathroom interior design&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;2166&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;yandex&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1655&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;spring 2014 fashion&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1549&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;freeform photos&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1480&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;totals&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8873898&quot;</span>
        <span class=p>},</span>

        <span class=nt>&quot;extremes&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;min&quot;</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1480&quot;</span>
                <span class=p>},</span>
                <span class=nt>&quot;max&quot;</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8267016&quot;</span>
                <span class=p>}</span>
        <span class=p>},</span>

        <span class=nt>&quot;rows&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>&quot;rows_before_limit_at_least&quot;</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</code></pre></div> <p>JSON 与 JavaScript 兼容。为了确保这一点，一些字符被另外转义：斜线<code>/</code>被转义为<code>\/</code>; 替代的换行符 <code>U+2028</code> 和 <code>U+2029</code> 会打断一些浏览器解析，它们会被转义为 <code>\uXXXX</code>。 ASCII 控制字符被转义：退格，换页，换行，回车和水平制表符被替换为<code>\b</code>，<code>\f</code>，<code>\n</code>，<code>\r</code>，<code>\t</code> 作为使用<code>\uXXXX</code>序列的00-1F范围内的剩余字节。 无效的 UTF-8 序列更改为替换字符 ，因此输出文本将包含有效的 UTF-8 序列。 为了与 JavaScript 兼容，默认情况下，Int64 和 UInt64 整数用双引号引起来。要除去引号，可以将配置参数 output_format_json_quote_64bit_integers 设置为0。</p> <p><code>rows</code> – 结果输出的行数。</p> <p><code>rows_before_limit_at_least</code> 去掉 LIMIT 过滤后的最小行总数。 只会在查询包含 LIMIT 条件时输出。<br> 若查询包含 GROUP BY，rows_before_limit_at_least 就是去掉 LIMIT 后过滤后的准确行数。</p> <p><code>totals</code> – 总值 （当使用 TOTALS 条件时）。</p> <p><code>extremes</code> – 极值 （当 extremes 设置为 1时）。</p> <p>该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <p>ClickHouse 支持 <a href=../../sql_reference/syntax/ >NULL</a>, 在 JSON 格式中以 <code>null</code> 输出来表示.</p> <p>参考 JSONEachRow 格式。</p> <h2 id=jsoncompact>JSONCompact<a class=headerlink href=#jsoncompact title="Permanent link">&para;</a></h2> <p>与 JSON 格式不同的是它以数组的方式输出结果，而不是以结构体。</p> <p>示例：</p> <div class=codehilite><pre><span></span><code><span class=p>{</span>
        <span class=nt>&quot;meta&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SearchPhrase&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;String&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;c&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;UInt64&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;data&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=s2>&quot;8267016&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;bathroom interior design&quot;</span><span class=p>,</span> <span class=s2>&quot;2166&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;yandex&quot;</span><span class=p>,</span> <span class=s2>&quot;1655&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;fashion trends spring 2014&quot;</span><span class=p>,</span> <span class=s2>&quot;1549&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;freeform photo&quot;</span><span class=p>,</span> <span class=s2>&quot;1480&quot;</span><span class=p>]</span>
        <span class=p>],</span>

        <span class=nt>&quot;totals&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;8873898&quot;</span><span class=p>],</span>

        <span class=nt>&quot;extremes&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;1480&quot;</span><span class=p>],</span>
                <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;8267016&quot;</span><span class=p>]</span>
        <span class=p>},</span>

        <span class=nt>&quot;rows&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>&quot;rows_before_limit_at_least&quot;</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</code></pre></div> <p>这种格式仅仅适用于输出结果集，而不适用于解析（将数据插入到表中）。<br> 参考 <code>JSONEachRow</code> 格式。</p> <h2 id=jsoneachrow>JSONEachRow<a class=headerlink href=#jsoneachrow title="Permanent link">&para;</a></h2> <p>将数据结果每一行以 JSON 结构体输出（换行分割 JSON 结构体）。</p> <div class=codehilite><pre><span></span><code><span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;8267016&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;bathroom interior design&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span> <span class=s2>&quot;2166&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;yandex&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1655&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;2014 spring fashion&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1549&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;freeform photo&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1480&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;angelina jolie&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1245&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;omsk&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1112&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;photos of dog breeds&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1091&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;curtain designs&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1064&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;baku&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1000&quot;</span><span class=p>}</span>
</code></pre></div> <p>与 JSON 格式不同的是，没有替换无效的UTF-8序列。任何一组字节都可以在行中输出。这是必要的，因为这样数据可以被格式化而不会丢失任何信息。值的转义方式与JSON相同。</p> <p>对于解析，任何顺序都支持不同列的值。可以省略某些值 - 它们被视为等于它们的默认值。在这种情况下，零和空行被用作默认值。 作为默认值，不支持表中指定的复杂值。元素之间的空白字符被忽略。如果在对象之后放置逗号，它将被忽略。对象不一定必须用新行分隔。</p> <h3 id=jsoneachrow-nested>嵌套结构的使用<a class=headerlink href=#jsoneachrow-nested title="Permanent link">&para;</a></h3> <p>如果你有一张桌子 <a href=../../sql_reference/data_types/nested_data_structures/nested/ >嵌套式</a> 数据类型列，可以插入具有相同结构的JSON数据。 启用此功能与 <a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json</a> 设置。</p> <p>例如，请考虑下表:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>json_each_row_nested</span> <span class=p>(</span><span class=n>n</span> <span class=n>Nested</span> <span class=p>(</span><span class=n>s</span> <span class=n>String</span><span class=p>,</span> <span class=n>i</span> <span class=n>Int32</span><span class=p>)</span> <span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span>
</code></pre></div> <p>正如你可以在找到 <code>Nested</code> 数据类型说明，ClickHouse将嵌套结构的每个组件视为单独的列, <code>n.s</code> 和 <code>n.i</code> 为了我们的桌子 所以你可以通过以下方式插入数据:</p> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n.s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;n.i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}</span>
</code></pre></div> <p>将数据作为分层JSON对象集插入 <a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json=1</a>.</p> <div class=codehilite><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;n&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;abc&quot;</span><span class=p>,</span> <span class=s2>&quot;def&quot;</span><span class=p>],</span>
        <span class=nt>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>如果没有此设置，ClickHouse将引发异常。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;input_format_import_nested_json&#39;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─name────────────────────────────┬─value─┐
│ input_format_import_nested_json │ 0     │
└─────────────────────────────────┴───────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n&quot;</span><span class=p>:</span> <span class=err>{</span><span class=ss>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>Code: 117. DB::Exception: Unknown field found while parsing JSONEachRow format: n: (at row 1)
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SET</span> <span class=n>input_format_import_nested_json</span><span class=o>=</span><span class=mi>1</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n&quot;</span><span class=p>:</span> <span class=err>{</span><span class=ss>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>json_each_row_nested</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─n.s───────────┬─n.i────┐
│ [&#39;abc&#39;,&#39;def&#39;] │ [1,23] │
└───────────────┴────────┘
</code></pre></div> <h2 id=native>本地人<a class=headerlink href=#native title="Permanent link">&para;</a></h2> <p>最高性能的格式。 据通过二进制格式的块进行写入和读取。对于每个块，该块中的行数，列数，列名称和类型以及列的部分将被相继记录。 换句话说，这种格式是 «列式»的 - 它不会将列转换为行。 这是用于在服务器之间进行交互的本地界面中使用的格式，用于使用命令行客户端和 C++ 客户端。</p> <p>您可以使用此格式快速生成只能由 ClickHouse DBMS 读取的格式。但自己处理这种格式是没有意义的。</p> <h2 id=null>Null<a class=headerlink href=#null title="Permanent link">&para;</a></h2> <p>没有输出。但是，查询已处理完毕，并且在使用命令行客户端时，数据将传输到客户端。这仅用于测试，包括生产力测试。<br> 显然，这种格式只适用于输出，不适用于解析。</p> <h2 id=pretty>漂亮<a class=headerlink href=#pretty title="Permanent link">&para;</a></h2> <p>将数据以表格形式输出，也可以使用 ANSI 转义字符在终端中设置颜色。<br> 它会绘制一个完整的表格，每行数据在终端中占用两行。<br> 每一个结果块都会以单独的表格输出。这是很有必要的，以便结果块不用缓冲结果输出（缓冲在可以预见结果集宽度的时候是很有必要的）。</p> <p><a href=../../sql_reference/syntax/ >NULL</a> 输出为 <code>ᴺᵁᴸᴸ</code>。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌─x─┬────y─┐</span>
<span class=err>│ 1 │ ᴺᵁᴸᴸ │</span>
<span class=err>└───┴──────┘</span>
</code></pre></div> <p>为避免将太多数据传输到终端，只打印前10,000行。 如果行数大于或等于10,000，则会显示消息«Showed first 10 000»。<br> 该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <p>Pretty格式支持输出总值（当使用 WITH TOTALS 时）和极值（当 <code>extremes</code> 设置为1时）。 在这些情况下，总数值和极值在主数据之后以单独的表格形式输出。 示例（以 PrettyCompact 格式显示）：</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>PrettyCompact</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌──</span><span class=n>EventDate</span><span class=err>─┬───────</span><span class=k>c</span><span class=err>─┐</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>17</span> <span class=err>│</span> <span class=mi>1406958</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>18</span> <span class=err>│</span> <span class=mi>1383658</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>19</span> <span class=err>│</span> <span class=mi>1405797</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>20</span> <span class=err>│</span> <span class=mi>1353623</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>21</span> <span class=err>│</span> <span class=mi>1245779</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>22</span> <span class=err>│</span> <span class=mi>1031592</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>23</span> <span class=err>│</span> <span class=mi>1046491</span> <span class=err>│</span>
<span class=err>└────────────┴─────────┘</span>

<span class=n>Totals</span><span class=p>:</span>
<span class=err>┌──</span><span class=n>EventDate</span><span class=err>─┬───────</span><span class=k>c</span><span class=err>─┐</span>
<span class=err>│</span> <span class=mi>0000</span><span class=o>-</span><span class=mi>00</span><span class=o>-</span><span class=mi>00</span> <span class=err>│</span> <span class=mi>8873898</span> <span class=err>│</span>
<span class=err>└────────────┴─────────┘</span>

<span class=n>Extremes</span><span class=p>:</span>
<span class=err>┌──</span><span class=n>EventDate</span><span class=err>─┬───────</span><span class=k>c</span><span class=err>─┐</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>17</span> <span class=err>│</span> <span class=mi>1031592</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>23</span> <span class=err>│</span> <span class=mi>1406958</span> <span class=err>│</span>
<span class=err>└────────────┴─────────┘</span>
</code></pre></div> <h2 id=prettycompact>PrettyCompact<a class=headerlink href=#prettycompact title="Permanent link">&para;</a></h2> <p>与 <code>Pretty</code> 格式不一样的是，<code>PrettyCompact</code> 去掉了行之间的表格分割线，这样使得结果更加紧凑。这种格式会在交互命令行客户端下默认使用。</p> <h2 id=prettycompactmonoblock>PrettyCompactMonoBlock<a class=headerlink href=#prettycompactmonoblock title="Permanent link">&para;</a></h2> <p>与 <code>PrettyCompact</code> 格式不一样的是，它支持 10,000 行数据缓冲，然后输出在一个表格中，不会按照块来区分</p> <h2 id=prettynoescapes>PrettyNoEscapes<a class=headerlink href=#prettynoescapes title="Permanent link">&para;</a></h2> <p>与 <code>Pretty</code> 格式不一样的是，它不使用 ANSI 字符转义， 这在浏览器显示数据以及在使用 <code>watch</code> 命令行工具是有必要的。</p> <p>示例：</p> <div class=codehilite><pre><span></span><code>watch -n1 <span class=s2>&quot;clickhouse-client --query=&#39;SELECT event, value FROM system.events FORMAT PrettyCompactNoEscapes&#39;&quot;</span>
</code></pre></div> <p>您可以使用 HTTP 接口来获取数据，显示在浏览器中。</p> <h3 id=prettycompactnoescapes>PrettyCompactNoEscapes<a class=headerlink href=#prettycompactnoescapes title="Permanent link">&para;</a></h3> <p>用法类似上述。</p> <h3 id=prettyspacenoescapes>PrettySpaceNoEscapes<a class=headerlink href=#prettyspacenoescapes title="Permanent link">&para;</a></h3> <p>用法类似上述。</p> <h2 id=prettyspace>PrettySpace<a class=headerlink href=#prettyspace title="Permanent link">&para;</a></h2> <p>与 <code>PrettyCompact</code>(#prettycompact) 格式不一样的是，它使用空格来代替网格来显示数据。</p> <h2 id=rowbinary>RowBinary<a class=headerlink href=#rowbinary title="Permanent link">&para;</a></h2> <p>以二进制格式逐行格式化和解析数据。行和值连续列出，没有分隔符。<br> 这种格式比 Native 格式效率低，因为它是基于行的。</p> <p>整数使用固定长度的小端表示法。 例如，UInt64 使用8个字节。<br> DateTime 被表示为 UInt32 类型的Unix 时间戳值。<br> Date 被表示为 UInt16 对象，它的值为 1970-01-01以来的天数。<br> 字符串表示为 varint 长度（无符号 <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer">LEB128</a>），后跟字符串的字节数。<br> FixedString 被简单地表示为一个字节序列。</p> <p>数组表示为 varint 长度（无符号 <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer">LEB128</a>），后跟有序的数组元素。</p> <p>对于 <a href=../../sql_reference/syntax/#null-literal>NULL</a> 的支持， 一个为 1 或 0 的字节会加在每个 <a href=../../sql_reference/data_types/nullable/ >可为空</a> 值前面。如果为 1, 那么该值就是 <code>NULL</code>。 如果为 0，则不为 <code>NULL</code>。</p> <h2 id=rowbinarywithnamesandtypes>RowBinaryWithNamesAndTypes<a class=headerlink href=#rowbinarywithnamesandtypes title="Permanent link">&para;</a></h2> <p>类似于 <a href=#rowbinary>RowBinary</a>，但添加了标题:</p> <ul> <li><a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer">LEB128</a>-编码列数（N)</li> <li>N <code>String</code>s指定列名</li> <li>N <code>String</code>s指定列类型</li> </ul> <h2 id=data-format-values>值<a class=headerlink href=#data-format-values title="Permanent link">&para;</a></h2> <p>在括号中打印每一行。行由逗号分隔。最后一行之后没有逗号。括号内的值也用逗号分隔。数字以十进制格式输出，不含引号。 数组以方括号输出。带有时间的字符串，日期和时间用引号包围输出。转义字符的解析规则与 <a href=#tabseparated>TabSeparated</a> 格式类似。 在格式化过程中，不插入额外的空格，但在解析过程中，空格是被允许并跳过的（除了数组值之外的空格，这是不允许的）。<a href=../../sql_reference/syntax/ >NULL</a> 为 <code>NULL</code>。</p> <p>以 Values 格式传递数据时需要转义的最小字符集是：单引号和反斜线。</p> <p>这是 <code>INSERT INTO t VALUES ...</code> 中可以使用的格式，但您也可以将其用于查询结果。</p> <h2 id=vertical>垂直<a class=headerlink href=#vertical title="Permanent link">&para;</a></h2> <p>使用指定的列名在单独的行上打印每个值。如果每行都包含大量列，则此格式便于打印一行或几行。</p> <p><a href=../../sql_reference/syntax/ >NULL</a> 输出为 <code>ᴺᵁᴸᴸ</code>。</p> <p>示例:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>Row 1:</span>
<span class=err>──────</span>
<span class=c>x: 1</span>
<span class=c>y: ᴺᵁᴸᴸ</span>
</code></pre></div> <p>该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <h2 id=verticalraw>VerticalRaw<a class=headerlink href=#verticalraw title="Permanent link">&para;</a></h2> <p>和 <code>Vertical</code> 格式不同点在于，行是不会被转义的。<br> 这种格式仅仅适用于输出，但不适用于解析输入（将数据插入到表中）。</p> <p>示例:</p> <div class=codehilite><pre><span></span><code><span class=p>:)</span> <span class=k>SHOW</span> <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>geonames</span> <span class=n>FORMAT</span> <span class=n>VerticalRaw</span><span class=p>;</span>
<span class=k>Row</span> <span class=mi>1</span><span class=p>:</span>
<span class=err>──────</span>
<span class=k>statement</span><span class=p>:</span> <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>default</span><span class=p>.</span><span class=n>geonames</span> <span class=p>(</span> <span class=n>geonameid</span> <span class=n>UInt32</span><span class=p>,</span> <span class=nb>date</span> <span class=nb>Date</span> <span class=k>DEFAULT</span> <span class=k>CAST</span><span class=p>(</span><span class=s1>&#39;2017-12-08&#39;</span> <span class=k>AS</span> <span class=nb>Date</span><span class=p>))</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>(</span><span class=nb>date</span><span class=p>,</span> <span class=n>geonameid</span><span class=p>,</span> <span class=mi>8192</span><span class=p>)</span>

<span class=p>:)</span> <span class=k>SELECT</span> <span class=s1>&#39;string with \&#39;</span><span class=n>quotes</span><span class=err>\</span><span class=s1>&#39; and \t with some special \n characters&#39;</span> <span class=k>AS</span> <span class=n>test</span> <span class=n>FORMAT</span> <span class=n>VerticalRaw</span><span class=p>;</span>
<span class=k>Row</span> <span class=mi>1</span><span class=p>:</span>
<span class=err>──────</span>
<span class=n>test</span><span class=p>:</span> <span class=n>string</span> <span class=k>with</span> <span class=s1>&#39;quotes&#39;</span> <span class=k>and</span>   <span class=k>with</span> <span class=k>some</span> <span class=n>special</span>
 <span class=n>characters</span>
</code></pre></div> <p>和 Vertical 格式相比：</p> <div class=codehilite><pre><span></span><code><span class=err>:) SELECT &#39;string with \&#39;quotes\&#39; and \t with some special \n characters&#39; AS test FORMAT Vertical;</span>
<span class=err>Row 1:</span>
<span class=err>──────</span>
<span class=c>test: string with \&#39;quotes\&#39; and \t with some special \n characters</span>
</code></pre></div> <h2 id=xml>XML<a class=headerlink href=#xml title="Permanent link">&para;</a></h2> <p>该格式仅适用于输出查询结果，但不适用于解析输入，示例：</p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt;</span>
<span class=nt>&lt;result&gt;</span>
        <span class=nt>&lt;meta&gt;</span>
                <span class=nt>&lt;columns&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>SearchPhrase<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>count()<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>UInt64<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                <span class=nt>&lt;/columns&gt;</span>
        <span class=nt>&lt;/meta&gt;</span>
        <span class=nt>&lt;data&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>8267016<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>bathroom interior design<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>2166<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>yandex<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1655<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>2014 spring fashion<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1549<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>freeform photos<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1480<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>angelina jolie<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1245<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>omsk<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1112<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>photos of dog breeds<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1091<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>curtain designs<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1064<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>baku<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1000<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
        <span class=nt>&lt;/data&gt;</span>
        <span class=nt>&lt;rows&gt;</span>10<span class=nt>&lt;/rows&gt;</span>
        <span class=nt>&lt;rows_before_limit_at_least&gt;</span>141137<span class=nt>&lt;/rows_before_limit_at_least&gt;</span>
<span class=nt>&lt;/result&gt;</span>
</code></pre></div> <p>如果列名称没有可接受的格式，则仅使用 <code>field</code> 作为元素名称。 通常，XML 结构遵循 JSON 结构。<br> 就像JSON一样，将无效的 UTF-8 字符都作替换，以便输出文本将包含有效的 UTF-8 字符序列。</p> <p>在字符串值中，字符 <code>&lt;</code> 和 <code>＆</code> 被转义为 <code>&lt;</code> 和 <code>＆</code>。</p> <p>数组输出为 <code>&lt;array&gt; &lt;elem&gt; Hello &lt;/ elem&gt; &lt;elem&gt; World &lt;/ elem&gt; ... &lt;/ array&gt;</code>，元组输出为 <code>&lt;tuple&gt; &lt;elem&gt; Hello &lt;/ elem&gt; &lt;elem&gt; World &lt;/ ELEM&gt; ... &lt;/tuple&gt;</code> 。</p> <h2 id=capnproto>CapnProto<a class=headerlink href=#capnproto title="Permanent link">&para;</a></h2> <p>Cap'n Proto 是一种二进制消息格式，类似 Protocol Buffers 和 Thriftis，但与 JSON 或 MessagePack 格式不一样。</p> <p>Cap'n Proto 消息格式是严格类型的，而不是自我描述，这意味着它们不需要外部的描述。这种格式可以实时地应用，并针对每个查询进行缓存。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
       <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=n>FORMAT</span> <span class=n>CapnProto</span> <span class=n>SETTINGS</span> <span class=k>schema</span> <span class=o>=</span> <span class=s1>&#39;schema:Message&#39;</span>
</code></pre></div> <p>其中 <code>schema.capnp</code> 描述如下：</p> <div class=codehilite><pre><span></span><code><span class=k>struct</span> <span class=n>Message</span> <span class=p>{</span>
  <span class=n>SearchPhrase</span> <span class=mi>@0</span> <span class=o>:</span><span class=n>Text</span><span class=p>;</span>
  <span class=n>c</span> <span class=mi>@1</span> <span class=o>:</span><span class=n>Uint64</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>格式文件存储的目录可以在服务配置中的 <a href=../../operations/server_configuration_parameters/settings/ >format_schema_path</a> 指定。</p> <p>Cap'n Proto 反序列化是很高效的，通常不会增加系统的负载。</p> <h2 id=protobuf>Protobuf<a class=headerlink href=#protobuf title="Permanent link">&para;</a></h2> <p>Protobuf-是一个 <a href=https://developers.google.com/protocol-buffers/ rel="external nofollow noreferrer">协议缓冲区</a> 格式。</p> <p>此格式需要外部格式架构。 在查询之间缓存架构。<br> ClickHouse支持 <code>proto2</code> 和 <code>proto3</code> 语法 支持重复/可选/必填字段。</p> <p>使用示例:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=k>table</span> <span class=n>FORMAT</span> <span class=n>Protobuf</span> <span class=n>SETTINGS</span> <span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;schemafile:MessageType&#39;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>cat protobuf_messages.bin <span class=p>|</span> clickhouse-client --query <span class=s2>&quot;INSERT INTO test.table FORMAT Protobuf SETTINGS format_schema=&#39;schemafile:MessageType&#39;&quot;</span>
</code></pre></div> <p>哪里的文件 <code>schemafile.proto</code> 看起来像这样:</p> <div class=codehilite><pre><span></span><code><span class=n>syntax</span> <span class=l>= &quot;proto3&quot;</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>string</span> <span class=n>name</span> <span class=l>= 1</span>;
  <span class=n>string</span> <span class=n>surname</span> <span class=l>= 2</span>;
  <span class=n>uint32</span> <span class=n>birthDate</span> <span class=l>= 3</span>;
  <span class=n>repeated</span> <span class=n>string</span> <span class=n>phoneNumbers</span> <span class=l>= 4</span>;
};
</code></pre></div> <p>要查找协议缓冲区的消息类型的表列和字段之间的对应关系，ClickHouse比较它们的名称。<br> 这种比较是不区分大小写和字符 <code>_</code> (下划线)和 <code>.</code> （点）被认为是相等的。<br> 如果协议缓冲区消息的列和字段的类型不同，则应用必要的转换。</p> <p>支持嵌套消息。 例如，对于字段 <code>z</code> 在下面的消息类型</p> <div class=codehilite><pre><span></span><code><span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>message</span> <span class=n>XType</span> {
    <span class=n>message</span> <span class=n>YType</span> {
      <span class=n>int32</span> <span class=n>z</span>;
    };
    <span class=n>repeated</span> <span class=n>YType</span> <span class=n>y</span>;
  };
  <span class=n>XType</span> <span class=n>x</span>;
};
</code></pre></div> <p>ClickHouse尝试找到一个名为 <code>x.y.z</code> （或 <code>x_y_z</code> 或 <code>X.y_Z</code> 等）。<br> 嵌套消息适用于输入或输出一个 <a href=../../sql_reference/data_types/nested_data_structures/nested/ >嵌套数据结构</a>.</p> <p>在protobuf模式中定义的默认值，如下所示</p> <div class=codehilite><pre><span></span><code><span class=n>syntax</span> <span class=l>= &quot;proto2&quot;</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>optional</span> <span class=n>int32</span> <span class=n>result_per_page</span> <span class=l>= 3 [default = 10]</span>;
}
</code></pre></div> <p>不应用;该 <a href=../../sql_reference/statements/create/#create-default-values>表默认值</a> 用来代替它们。</p> <p>ClickHouse在输入和输出protobuf消息 <code>length-delimited</code> 格式。<br> 这意味着每个消息之前，应该写它的长度作为一个 <a href=https://developers.google.com/protocol-buffers/docs/encoding#varints rel="external nofollow noreferrer">varint</a>.<br> 另请参阅 <a href=https://cwiki.apache.org/confluence/display/GEODE/Delimiting+Protobuf+Messages rel="external nofollow noreferrer">如何在流行语言中读取/写入长度分隔的protobuf消息</a>.</p> <h2 id=data-format-avro>Avro<a class=headerlink href=#data-format-avro title="Permanent link">&para;</a></h2> <p><a href=http://avro.apache.org/ rel="external nofollow noreferrer">Apache Avro</a> 是在Apache Hadoop项目中开发的面向行的数据序列化框架。</p> <p>ClickHouse Avro格式支持读取和写入 <a href=http://avro.apache.org/docs/current/spec.html#Object+Container+Files rel="external nofollow noreferrer">Avro数据文件</a>.</p> <h3 id=data-types-matching-sql_referencedata_types-matching>数据类型匹配{#sql_reference/data_types-matching}<a class=headerlink href=#data-types-matching-sql_referencedata_types-matching title="Permanent link">&para;</a></h3> <p>下表显示了支持的数据类型以及它们如何匹配ClickHouse <a href=../../sql_reference/data_types/ >数据类型</a> 在 <code>INSERT</code> 和 <code>SELECT</code> 查询。</p> <table> <thead> <tr> <th>Avro数据类型 <code>INSERT</code></th> <th>ClickHouse数据类型</th> <th>Avro数据类型 <code>SELECT</code></th> </tr> </thead> <tbody> <tr> <td><code>boolean</code>, <code>int</code>, <code>long</code>, <code>float</code>, <code>double</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int(8/16/32)</a>, <a href=../../sql_reference/data_types/int_uint/ >UInt(8/16/32)</a></td> <td><code>int</code></td> </tr> <tr> <td><code>boolean</code>, <code>int</code>, <code>long</code>, <code>float</code>, <code>double</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int64</a>, <a href=../../sql_reference/data_types/int_uint/ >UInt64</a></td> <td><code>long</code></td> </tr> <tr> <td><code>boolean</code>, <code>int</code>, <code>long</code>, <code>float</code>, <code>double</code></td> <td><a href=../../sql_reference/data_types/float/ >Float32</a></td> <td><code>float</code></td> </tr> <tr> <td><code>boolean</code>, <code>int</code>, <code>long</code>, <code>float</code>, <code>double</code></td> <td><a href=../../sql_reference/data_types/float/ >Float64</a></td> <td><code>double</code></td> </tr> <tr> <td><code>bytes</code>, <code>string</code>, <code>fixed</code>, <code>enum</code></td> <td><a href=../../sql_reference/data_types/string/ >字符串</a></td> <td><code>bytes</code></td> </tr> <tr> <td><code>bytes</code>, <code>string</code>, <code>fixed</code></td> <td><a href=../../sql_reference/data_types/fixedstring/ >固定字符串(N)</a></td> <td><code>fixed(N)</code></td> </tr> <tr> <td><code>enum</code></td> <td><a href=../../sql_reference/data_types/enum/ >枚举(8/16)</a></td> <td><code>enum</code></td> </tr> <tr> <td><code>array(T)</code></td> <td><a href=../../sql_reference/data_types/array/ >阵列(T)</a></td> <td><code>array(T)</code></td> </tr> <tr> <td><code>union(null, T)</code>, <code>union(T, null)</code></td> <td><a href=../../sql_reference/data_types/date/ >可为空(T)</a></td> <td><code>union(null, T)</code></td> </tr> <tr> <td><code>null</code></td> <td><a href=../../sql_reference/data_types/special_data_types/nothing/ >可为空（无)</a></td> <td><code>null</code></td> </tr> <tr> <td><code>int (date)</code> *</td> <td><a href=../../sql_reference/data_types/date/ >日期</a></td> <td><code>int (date)</code> *</td> </tr> <tr> <td><code>long (timestamp-millis)</code> *</td> <td><a href=../../sql_reference/data_types/datetime/ >DateTime64(3)</a></td> <td><code>long (timestamp-millis)</code> *</td> </tr> <tr> <td><code>long (timestamp-micros)</code> *</td> <td><a href=../../sql_reference/data_types/datetime/ >DateTime64(6)</a></td> <td><code>long (timestamp-micros)</code> *</td> </tr> </tbody> </table> <p>* <a href=http://avro.apache.org/docs/current/spec.html#Logical+Types rel="external nofollow noreferrer">Avro逻辑类型</a></p> <p>不支持的Avro数据类型: <code>record</code> （非根), <code>map</code></p> <p>不支持的Avro逻辑数据类型: <code>uuid</code>, <code>time-millis</code>, <code>time-micros</code>, <code>duration</code></p> <h3 id=inserting-data>插入数据<a class=headerlink href=#inserting-data title="Permanent link">&para;</a></h3> <p>将Avro文件中的数据插入ClickHouse表:</p> <div class=codehilite><pre><span></span><code>$ cat file.avro <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>&quot;INSERT INTO {some_table} FORMAT Avro&quot;</span>
</code></pre></div> <p>输入Avro文件的根模式必须是 <code>record</code> 类型。</p> <p>要查找Avro schema的表列和字段之间的对应关系，ClickHouse比较它们的名称。 此比较区分大小写。<br> 跳过未使用的字段。</p> <p>ClickHouse表列的数据类型可能与插入的Avro数据的相应字段不同。 插入数据时，ClickHouse根据上表解释数据类型，然后 <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>投</a> 将数据转换为相应的列类型。</p> <h3 id=selecting-data>选择数据<a class=headerlink href=#selecting-data title="Permanent link">&para;</a></h3> <p>从ClickHouse表中选择数据到Avro文件:</p> <div class=codehilite><pre><span></span><code>$ clickhouse-client --query<span class=o>=</span><span class=s2>&quot;SELECT * FROM {some_table} FORMAT Avro&quot;</span> &gt; file.avro
</code></pre></div> <p>列名必须:</p> <ul> <li>名,名,名,名 <code>[A-Za-z_]</code></li> <li>随后只包含 <code>[A-Za-z0-9_]</code></li> </ul> <p>输出Avro文件压缩和同步间隔可以配置 <a href=../../operations/settings/settings/#settings-output_format_avro_codec>output_format_avro_codec</a> 和 <a href=../../operations/settings/settings/#settings-output_format_avro_sync_interval>output_format_avro_sync_interval</a> 分别。</p> <h2 id=data-format-avro-confluent>AvroConfluent<a class=headerlink href=#data-format-avro-confluent title="Permanent link">&para;</a></h2> <p>AvroConfluent支持解码单对象Avro消息常用于 <a href=https://kafka.apache.org/ rel="external nofollow noreferrer">卡夫卡</a> 和 <a href=https://docs.confluent.io/current/schema-registry/index.html rel="external nofollow noreferrer">汇合的模式注册表</a>.</p> <p>每个Avro消息都嵌入了一个架构id，该架构id可以在架构注册表的帮助下解析为实际架构。</p> <p>模式解析后会进行缓存。</p> <p>架构注册表URL配置为 <a href=../../operations/settings/settings/#settings-format_avro_schema_registry_url>format_avro_schema_registry_url</a></p> <h3 id=data-types-matching-sql_referencedata_types-matching-1>数据类型匹配{#sql_reference/data_types-matching-1}<a class=headerlink href=#data-types-matching-sql_referencedata_types-matching-1 title="Permanent link">&para;</a></h3> <p>和 <a href=#data-format-avro>Avro</a></p> <h3 id=usage>用途<a class=headerlink href=#usage title="Permanent link">&para;</a></h3> <p>要快速验证架构解析，您可以使用 <a href=https://github.com/edenhill/kafkacat rel="external nofollow noreferrer">kafkacat</a> 与 <a href=../../operations/utilities/clickhouse-local/ >ﾂ环板-ｮﾂ嘉ｯﾂ偲</a>:</p> <div class=codehilite><pre><span></span><code>$ kafkacat -b kafka-broker  -C -t topic1 -o beginning -f <span class=s1>&#39;%s&#39;</span> -c <span class=m>3</span> <span class=p>|</span> clickhouse-local   --input-format AvroConfluent --format_avro_schema_registry_url <span class=s1>&#39;http://schema-registry&#39;</span> -S <span class=s2>&quot;field1 Int64, field2 String&quot;</span>  -q <span class=s1>&#39;select *  from table&#39;</span>
<span class=m>1</span> a
<span class=m>2</span> b
<span class=m>3</span> c
</code></pre></div> <p>使用 <code>AvroConfluent</code> 与 <a href=../../engines/table_engines/integrations/kafka/ >卡夫卡</a>:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>topic1_stream</span>
<span class=p>(</span>
    <span class=n>field1</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>field2</span> <span class=n>String</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Kafka</span><span class=p>()</span>
<span class=n>SETTINGS</span>
<span class=n>kafka_broker_list</span> <span class=o>=</span> <span class=s1>&#39;kafka-broker&#39;</span><span class=p>,</span>
<span class=n>kafka_topic_list</span> <span class=o>=</span> <span class=s1>&#39;topic1&#39;</span><span class=p>,</span>
<span class=n>kafka_group_name</span> <span class=o>=</span> <span class=s1>&#39;group1&#39;</span><span class=p>,</span>
<span class=n>kafka_format</span> <span class=o>=</span> <span class=s1>&#39;AvroConfluent&#39;</span><span class=p>;</span>

<span class=k>SET</span> <span class=n>format_avro_schema_registry_url</span> <span class=o>=</span> <span class=s1>&#39;http://schema-registry&#39;</span><span class=p>;</span>

<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>topic1_stream</span><span class=p>;</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>警告</p> <p>设置 <code>format_avro_schema_registry_url</code> 需要在配置 <code>users.xml</code> restart动后保持它的价值。</p> </div> <h2 id=data-format-parquet>镶木地板<a class=headerlink href=#data-format-parquet title="Permanent link">&para;</a></h2> <p><a href=http://parquet.apache.org/ rel="external nofollow noreferrer">阿帕奇地板</a> 是Hadoop生态系统中普遍存在的列式存储格式。 ClickHouse支持此格式的读写操作。</p> <h3 id=data-types-matching-sql_referencedata_types-matching-2>数据类型匹配{#sql_reference/data_types-matching-2}<a class=headerlink href=#data-types-matching-sql_referencedata_types-matching-2 title="Permanent link">&para;</a></h3> <p>下表显示了支持的数据类型以及它们如何匹配ClickHouse <a href=../../sql_reference/data_types/ >数据类型</a> 在 <code>INSERT</code> 和 <code>SELECT</code> 查询。</p> <table> <thead> <tr> <th>Parquet数据类型 (<code>INSERT</code>)</th> <th>ClickHouse数据类型</th> <th>Parquet数据类型 (<code>SELECT</code>)</th> </tr> </thead> <tbody> <tr> <td><code>UINT8</code>, <code>BOOL</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt8</a></td> <td><code>UINT8</code></td> </tr> <tr> <td><code>INT8</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int8</a></td> <td><code>INT8</code></td> </tr> <tr> <td><code>UINT16</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt16</a></td> <td><code>UINT16</code></td> </tr> <tr> <td><code>INT16</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int16</a></td> <td><code>INT16</code></td> </tr> <tr> <td><code>UINT32</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt32</a></td> <td><code>UINT32</code></td> </tr> <tr> <td><code>INT32</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int32</a></td> <td><code>INT32</code></td> </tr> <tr> <td><code>UINT64</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt64</a></td> <td><code>UINT64</code></td> </tr> <tr> <td><code>INT64</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int64</a></td> <td><code>INT64</code></td> </tr> <tr> <td><code>FLOAT</code>, <code>HALF_FLOAT</code></td> <td><a href=../../sql_reference/data_types/float/ >Float32</a></td> <td><code>FLOAT</code></td> </tr> <tr> <td><code>DOUBLE</code></td> <td><a href=../../sql_reference/data_types/float/ >Float64</a></td> <td><code>DOUBLE</code></td> </tr> <tr> <td><code>DATE32</code></td> <td><a href=../../sql_reference/data_types/date/ >日期</a></td> <td><code>UINT16</code></td> </tr> <tr> <td><code>DATE64</code>, <code>TIMESTAMP</code></td> <td><a href=../../sql_reference/data_types/datetime/ >日期时间</a></td> <td><code>UINT32</code></td> </tr> <tr> <td><code>STRING</code>, <code>BINARY</code></td> <td><a href=../../sql_reference/data_types/string/ >字符串</a></td> <td><code>STRING</code></td> </tr> <tr> <td>—</td> <td><a href=../../sql_reference/data_types/fixedstring/ >固定字符串</a></td> <td><code>STRING</code></td> </tr> <tr> <td><code>DECIMAL</code></td> <td><a href=../../sql_reference/data_types/decimal/ >十进制</a></td> <td><code>DECIMAL</code></td> </tr> </tbody> </table> <p>ClickHouse支持可配置的精度 <code>Decimal</code> 类型。 该 <code>INSERT</code> 查询对待实木复合地板 <code>DECIMAL</code> 键入为ClickHouse <code>Decimal128</code> 类型。</p> <p>不支持的Parquet数据类型: <code>DATE32</code>, <code>TIME32</code>, <code>FIXED_SIZE_BINARY</code>, <code>JSON</code>, <code>UUID</code>, <code>ENUM</code>.</p> <p>ClickHouse表列的数据类型可能与插入的Parquet数据的相应字段不同。 插入数据时，ClickHouse根据上表解释数据类型，然后 <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>投</a> 为ClickHouse表列设置的数据类型的数据。</p> <h3 id=inserting-and-selecting-data>插入和选择数据<a class=headerlink href=#inserting-and-selecting-data title="Permanent link">&para;</a></h3> <p>您可以通过以下命令将Parquet数据从文件插入到ClickHouse表中:</p> <div class=codehilite><pre><span></span><code>$ cat <span class=o>{</span>filename<span class=o>}</span> <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>&quot;INSERT INTO {some_table} FORMAT Parquet&quot;</span>
</code></pre></div> <p>您可以从ClickHouse表中选择数据，并通过以下命令将它们保存到Parquet格式的某个文件中:</p> <div class=codehilite><pre><span></span><code>$ clickhouse-client --query<span class=o>=</span><span class=s2>&quot;SELECT * FROM {some_table} FORMAT Parquet&quot;</span> &gt; <span class=o>{</span>some_file.pq<span class=o>}</span>
</code></pre></div> <p>要与Hadoop交换数据，您可以使用 <a href=../../engines/table_engines/integrations/hdfs/ >HDFS表引擎</a>.</p> <h2 id=data-format-orc>ORC<a class=headerlink href=#data-format-orc title="Permanent link">&para;</a></h2> <p><a href=https://orc.apache.org/ rel="external nofollow noreferrer">阿帕奇兽人</a> 是Hadoop生态系统中普遍存在的列式存储格式。 您只能将此格式的数据插入ClickHouse。</p> <h3 id=data-types-matching-sql_referencedata_types-matching-3>数据类型匹配{#sql_reference/data_types-matching-3}<a class=headerlink href=#data-types-matching-sql_referencedata_types-matching-3 title="Permanent link">&para;</a></h3> <p>下表显示了支持的数据类型以及它们如何匹配ClickHouse <a href=../../sql_reference/data_types/ >数据类型</a> 在 <code>INSERT</code> 查询。</p> <table> <thead> <tr> <th>ORC数据类型 (<code>INSERT</code>)</th> <th>ClickHouse数据类型</th> </tr> </thead> <tbody> <tr> <td><code>UINT8</code>, <code>BOOL</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt8</a></td> </tr> <tr> <td><code>INT8</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int8</a></td> </tr> <tr> <td><code>UINT16</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt16</a></td> </tr> <tr> <td><code>INT16</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int16</a></td> </tr> <tr> <td><code>UINT32</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt32</a></td> </tr> <tr> <td><code>INT32</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int32</a></td> </tr> <tr> <td><code>UINT64</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >UInt64</a></td> </tr> <tr> <td><code>INT64</code></td> <td><a href=../../sql_reference/data_types/int_uint/ >Int64</a></td> </tr> <tr> <td><code>FLOAT</code>, <code>HALF_FLOAT</code></td> <td><a href=../../sql_reference/data_types/float/ >Float32</a></td> </tr> <tr> <td><code>DOUBLE</code></td> <td><a href=../../sql_reference/data_types/float/ >Float64</a></td> </tr> <tr> <td><code>DATE32</code></td> <td><a href=../../sql_reference/data_types/date/ >日期</a></td> </tr> <tr> <td><code>DATE64</code>, <code>TIMESTAMP</code></td> <td><a href=../../sql_reference/data_types/datetime/ >日期时间</a></td> </tr> <tr> <td><code>STRING</code>, <code>BINARY</code></td> <td><a href=../../sql_reference/data_types/string/ >字符串</a></td> </tr> <tr> <td><code>DECIMAL</code></td> <td><a href=../../sql_reference/data_types/decimal/ >十进制</a></td> </tr> </tbody> </table> <p>ClickHouse支持的可配置精度 <code>Decimal</code> 类型。 该 <code>INSERT</code> 查询对待兽人 <code>DECIMAL</code> 键入为ClickHouse <code>Decimal128</code> 类型。</p> <p>不支持的ORC数据类型: <code>DATE32</code>, <code>TIME32</code>, <code>FIXED_SIZE_BINARY</code>, <code>JSON</code>, <code>UUID</code>, <code>ENUM</code>.</p> <p>ClickHouse表列的数据类型不必匹配相应的ORC数据字段。 插入数据时，ClickHouse根据上表解释数据类型，然后 <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>投</a> 将数据转换为ClickHouse表列的数据类型集。</p> <h3 id=inserting-data-1>插入数据<a class=headerlink href=#inserting-data-1 title="Permanent link">&para;</a></h3> <p>您可以通过以下命令将文件中的ORC数据插入到ClickHouse表中:</p> <div class=codehilite><pre><span></span><code>$ cat filename.orc <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>&quot;INSERT INTO some_table FORMAT ORC&quot;</span>
</code></pre></div> <p>要与Hadoop交换数据，您可以使用 <a href=../../engines/table_engines/integrations/hdfs/ >HDFS表引擎</a>.</p> <h2 id=formatschema>格式架构<a class=headerlink href=#formatschema title="Permanent link">&para;</a></h2> <p>包含格式架构的文件名由该设置设置 <code>format_schema</code>.<br> 当使用其中一种格式时，需要设置此设置 <code>Cap'n Proto</code> 和 <code>Protobuf</code>.<br> 格式架构是文件名和此文件中消息类型的名称的组合，用冒号分隔,<br> e.g. <code>schemafile.proto:MessageType</code>.<br> 如果文件具有格式的标准扩展名（例如, <code>.proto</code> 为 <code>Protobuf</code>),<br> 它可以被省略，在这种情况下，格式模式如下所示 <code>schemafile:MessageType</code>.</p> <p>如果您通过输入或输出数据 <a href=../cli/ >客户</a> 在交互模式下，格式架构中指定的文件名<br> 可以包含绝对路径或相对于客户端上当前目录的路径。<br> 如果在批处理模式下使用客户端，则由于安全原因，架构的路径必须是相对的。</p> <p>如果您通过输入或输出数据 <a href=../http/ >HTTP接口</a> 格式架构中指定的文件名<br> 应该位于指定的目录中 <a href=../../operations/server_configuration_parameters/settings/#server_configuration_parameters-format_schema_path>format_schema_path</a><br> 在服务器配置中。</p> <h2 id=skippingerrors>跳过错误<a class=headerlink href=#skippingerrors title="Permanent link">&para;</a></h2> <p>一些格式，如 <code>CSV</code>, <code>TabSeparated</code>, <code>TSKV</code>, <code>JSONEachRow</code>, <code>Template</code>, <code>CustomSeparated</code> 和 <code>Protobuf</code> 如果发生解析错误，可以跳过断开的行，并从下一行开始继续解析。 看 <a href=../../operations/settings/settings/#settings-input_format_allow_errors_num>input_format_allow_errors_num</a> 和<br> <a href=../../operations/settings/settings/#settings-input_format_allow_errors_ratio>input_format_allow_errors_ratio</a> 设置。<br> 限制:<br> -在解析错误的情况下 <code>JSONEachRow</code> 跳过所有数据，直到新行（或EOF），所以行必须由 <code>\n</code> 正确计算错误。<br> - <code>Template</code> 和 <code>CustomSeparated</code> 在最后一列之后使用分隔符，并在行之间使用分隔符来查找下一行的开头，所以跳过错误只有在其中至少有一个不为空时才有效。</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>建于 <a href=https://github.com/ClickHouse/ClickHouse/commit/3166eab2dfc89323b9d756aeba6866381fd9c186 rel="external nofollow noreferrer" target=_blank class=text-reset>3166eab2df</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>目录</label> <a href=#tabseparated title=TabSeparated class="nav-link text-wrap d-inline-block w-100"> TabSeparated </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#shu-ju-jie-xi-fang-shi title=数据解析方式 class="nav-link text-wrap d-inline-block w-100"> 数据解析方式 </a> </nav> <a href=#tabseparatedraw title=TabSeparatedRaw class="nav-link text-wrap d-inline-block w-100"> TabSeparatedRaw </a> <a href=#tabseparatedwithnames title=TabSeparatedWithNames class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNames </a> <a href=#tabseparatedwithnamesandtypes title=TabSeparatedWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNamesAndTypes </a> <a href=#format-template title=模板 class="nav-link text-wrap d-inline-block w-100"> 模板 </a> <a href=#templateignorespaces title=TemplateIgnoreSpaces class="nav-link text-wrap d-inline-block w-100"> TemplateIgnoreSpaces </a> <a href=#tskv title=TSKV class="nav-link text-wrap d-inline-block w-100"> TSKV </a> <a href=#csv title=CSV class="nav-link text-wrap d-inline-block w-100"> CSV </a> <a href=#csvwithnames title=CSVWithNames class="nav-link text-wrap d-inline-block w-100"> CSVWithNames </a> <a href=#format-customseparated title=自定义分离 class="nav-link text-wrap d-inline-block w-100"> 自定义分离 </a> <a href=#json title=JSON class="nav-link text-wrap d-inline-block w-100"> JSON </a> <a href=#jsoncompact title=JSONCompact class="nav-link text-wrap d-inline-block w-100"> JSONCompact </a> <a href=#jsoneachrow title=JSONEachRow class="nav-link text-wrap d-inline-block w-100"> JSONEachRow </a> <nav id=toc-toc-13 class="nav flex-column pl-2"> <a href=#jsoneachrow-nested title=嵌套结构的使用 class="nav-link text-wrap d-inline-block w-100"> 嵌套结构的使用 </a> </nav> <a href=#native title=本地人 class="nav-link text-wrap d-inline-block w-100"> 本地人 </a> <a href=#null title=Null class="nav-link text-wrap d-inline-block w-100"> Null </a> <a href=#pretty title=漂亮 class="nav-link text-wrap d-inline-block w-100"> 漂亮 </a> <a href=#prettycompact title=PrettyCompact class="nav-link text-wrap d-inline-block w-100"> PrettyCompact </a> <a href=#prettycompactmonoblock title=PrettyCompactMonoBlock class="nav-link text-wrap d-inline-block w-100"> PrettyCompactMonoBlock </a> <a href=#prettynoescapes title=PrettyNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyNoEscapes </a> <nav id=toc-toc-19 class="nav flex-column pl-2"> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyCompactNoEscapes </a> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettySpaceNoEscapes </a> </nav> <a href=#prettyspace title=PrettySpace class="nav-link text-wrap d-inline-block w-100"> PrettySpace </a> <a href=#rowbinary title=RowBinary class="nav-link text-wrap d-inline-block w-100"> RowBinary </a> <a href=#rowbinarywithnamesandtypes title=RowBinaryWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> RowBinaryWithNamesAndTypes </a> <a href=#data-format-values title=值 class="nav-link text-wrap d-inline-block w-100"> 值 </a> <a href=#vertical title=垂直 class="nav-link text-wrap d-inline-block w-100"> 垂直 </a> <a href=#verticalraw title=VerticalRaw class="nav-link text-wrap d-inline-block w-100"> VerticalRaw </a> <a href=#xml title=XML class="nav-link text-wrap d-inline-block w-100"> XML </a> <a href=#capnproto title=CapnProto class="nav-link text-wrap d-inline-block w-100"> CapnProto </a> <a href=#protobuf title=Protobuf class="nav-link text-wrap d-inline-block w-100"> Protobuf </a> <a href=#data-format-avro title=Avro class="nav-link text-wrap d-inline-block w-100"> Avro </a> <nav id=toc-toc-29 class="nav flex-column pl-2"> <a href=#data-types-matching-sql_referencedata_types-matching title=数据类型匹配{#sql_reference/data_types-matching} class="nav-link text-wrap d-inline-block w-100"> 数据类型匹配{#sql_reference/data_types-matching} </a> <a href=#inserting-data title=插入数据 class="nav-link text-wrap d-inline-block w-100"> 插入数据 </a> <a href=#selecting-data title=选择数据 class="nav-link text-wrap d-inline-block w-100"> 选择数据 </a> </nav> <a href=#data-format-avro-confluent title=AvroConfluent class="nav-link text-wrap d-inline-block w-100"> AvroConfluent </a> <nav id=toc-toc-30 class="nav flex-column pl-2"> <a href=#data-types-matching-sql_referencedata_types-matching-1 title=数据类型匹配{#sql_reference/data_types-matching-1} class="nav-link text-wrap d-inline-block w-100"> 数据类型匹配{#sql_reference/data_types-matching-1} </a> <a href=#usage title=用途 class="nav-link text-wrap d-inline-block w-100"> 用途 </a> </nav> <a href=#data-format-parquet title=镶木地板 class="nav-link text-wrap d-inline-block w-100"> 镶木地板 </a> <nav id=toc-toc-31 class="nav flex-column pl-2"> <a href=#data-types-matching-sql_referencedata_types-matching-2 title=数据类型匹配{#sql_reference/data_types-matching-2} class="nav-link text-wrap d-inline-block w-100"> 数据类型匹配{#sql_reference/data_types-matching-2} </a> <a href=#inserting-and-selecting-data title=插入和选择数据 class="nav-link text-wrap d-inline-block w-100"> 插入和选择数据 </a> </nav> <a href=#data-format-orc title=ORC class="nav-link text-wrap d-inline-block w-100"> ORC </a> <nav id=toc-toc-32 class="nav flex-column pl-2"> <a href=#data-types-matching-sql_referencedata_types-matching-3 title=数据类型匹配{#sql_reference/data_types-matching-3} class="nav-link text-wrap d-inline-block w-100"> 数据类型匹配{#sql_reference/data_types-matching-3} </a> <a href=#inserting-data-1 title=插入数据 class="nav-link text-wrap d-inline-block w-100"> 插入数据 </a> </nav> <a href=#formatschema title=格式架构 class="nav-link text-wrap d-inline-block w-100"> 格式架构 </a> <a href=#skippingerrors title=跳过错误 class="nav-link text-wrap d-inline-block w-100"> 跳过错误 </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
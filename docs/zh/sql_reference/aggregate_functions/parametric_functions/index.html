<!DOCTYPE html><html lang=zh data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>参数聚合函数 - ClickHouse文档</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="参数聚合函数 - ClickHouse文档 "><meta property=og:description content="参数聚合函数 Some aggregate functions can accept not only argument columns (used for compression), but a set of parameters – c"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="参数聚合函数 - ClickHouse文档 "><meta name=description content="参数聚合函数 Some aggregate functions can accept not only argument columns (used for compression), but a set of parameters – c"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> 参数聚合函数 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/sql_reference/aggregate_functions/parametric_functions.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/zh.svg alt=中文 title=中文 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/sql_reference/aggregate_functions/parametric_functions/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/sql_reference/aggregate_functions/parametric_functions/ class="dropdown-item disabled"> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/sql_reference/aggregate_functions/parametric_functions/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/sql_reference/aggregate_functions/parametric_functions/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/sql_reference/aggregate_functions/parametric_functions/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/sql_reference/aggregate_functions/parametric_functions/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/sql_reference/aggregate_functions/parametric_functions/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=多页或单页> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt=多页版本 title=多页版本> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt=单页版本 title=单页版本> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> 版本: <span class=text-light>最新消息</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/zh/ class="dropdown-item disable"> <span class=text-light>最新消息</span> </a> <a href=/docs/v20.3/zh/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/zh/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/zh/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/zh/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/zh/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/zh/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/zh/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/zh/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/zh/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/zh/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/zh/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=导言 class="nav-link text-light text-wrap dropdown-toggle px-0">导言</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../introduction/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../../introduction/adopters/ title=采用者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">采用者</a> <a href=../../../introduction/history/ title=ClickHouse历史 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse历史</a> <a href=../../../introduction/distinctive_features/ title=ClickHouse的独特功能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse的独特功能</a> <a href=../../../introduction/features_considered_disadvantages/ title=ClickHouse的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse的限制</a> <a href=../../../introduction/performance/ title=性能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">性能</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=发动机 class="nav-link text-light text-wrap dropdown-toggle px-0">发动机</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/ title=发动机 class="nav-link text-light text-wrap d-inline-block w-100 px-0">发动机</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title=数据库引擎 class="nav-link text-light text-wrap dropdown-toggle px-0">数据库引擎</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database_engines/lazy/ title=懒惰 class="nav-link text-light text-wrap d-inline-block w-100 px-0">懒惰</a> <a href=../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database_engines/ title=数据库引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据库引擎</a> </nav> </div> <a href=#sidebar-sidebar-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3 title=表引擎 class="nav-link text-light text-wrap dropdown-toggle px-0">表引擎</a> <div id=sidebar-sidebar-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-2-3-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-1 title=梅树家族 class="nav-link text-light text-wrap dropdown-toggle px-0">梅树家族</a> <div id=sidebar-sidebar-2-3-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/mergetree_family/ title=梅树家族 class="nav-link text-light text-wrap d-inline-block w-100 px-0">梅树家族</a> <a href=../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=版本集合在新树 class="nav-link text-light text-wrap d-inline-block w-100 px-0">版本集合在新树</a> <a href=../../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=折叠树 class="nav-link text-light text-wrap d-inline-block w-100 px-0">折叠树</a> <a href=../../../engines/table_engines/mergetree_family/replication/ title=数据副本 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据副本</a> <a href=../../../engines/table_engines/mergetree_family/replacingmergetree/ title=更换麦树 class="nav-link text-light text-wrap d-inline-block w-100 px-0">更换麦树</a> <a href=../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title=自定义分区键 class="nav-link text-light text-wrap d-inline-block w-100 px-0">自定义分区键</a> </nav> </div> <a href=#sidebar-sidebar-2-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-2 title=日志系列 class="nav-link text-light text-wrap dropdown-toggle px-0">日志系列</a> <div id=sidebar-sidebar-2-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/log_family/ title=日志系列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日志系列</a> <a href=../../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> <a href=../../../engines/table_engines/log_family/log/ title=日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日志</a> <a href=../../../engines/table_engines/log_family/log_family/ title=日志引擎系列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日志引擎系列</a> </nav> </div> <a href=#sidebar-sidebar-2-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-3 title=集成 class="nav-link text-light text-wrap dropdown-toggle px-0">集成</a> <div id=sidebar-sidebar-2-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/integrations/ title=集成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">集成</a> <a href=../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table_engines/integrations/kafka/ title=卡夫卡 class="nav-link text-light text-wrap d-inline-block w-100 px-0">卡夫卡</a> </nav> </div> <a href=#sidebar-sidebar-2-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3-4 title=特别 class="nav-link text-light text-wrap dropdown-toggle px-0">特别</a> <div id=sidebar-sidebar-2-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/special/ title=特别 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特别</a> <a href=../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> <a href=../../../engines/table_engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../engines/table_engines/special/url/ title=URL(URL,格式) class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL,格式)</a> <a href=../../../engines/table_engines/special/distributed/ title=分布 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分布</a> <a href=../../../engines/table_engines/special/join/ title=加入我们 class="nav-link text-light text-wrap d-inline-block w-100 px-0">加入我们</a> <a href=../../../engines/table_engines/special/merge/ title=合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">合并</a> <a href=../../../engines/table_engines/special/dictionary/ title=字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典</a> <a href=../../../engines/table_engines/special/file/ title=文件(输入格式) class="nav-link text-light text-wrap d-inline-block w-100 px-0">文件(输入格式)</a> <a href=../../../engines/table_engines/special/view/ title=查看 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查看</a> <a href=../../../engines/table_engines/special/materializedview/ title=物化视图 class="nav-link text-light text-wrap d-inline-block w-100 px-0">物化视图</a> <a href=../../../engines/table_engines/special/external_data/ title=用于查询处理的外部数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用于查询处理的外部数据</a> <a href=../../../engines/table_engines/special/buffer/ title=缓冲区 class="nav-link text-light text-wrap d-inline-block w-100 px-0">缓冲区</a> <a href=../../../engines/table_engines/special/memory/ title=记忆 class="nav-link text-light text-wrap d-inline-block w-100 px-0">记忆</a> <a href=../../../engines/table_engines/special/set/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> <a href=../../../engines/table_engines/ title=表引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表引擎</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=SQL参考 class="nav-link text-light text-wrap dropdown-toggle px-0">SQL参考</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/ title=隐藏 class="nav-link text-light text-wrap d-inline-block w-100 px-0">隐藏</a> <a href=#sidebar-sidebar-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2 title=发言 class="nav-link text-light text-wrap dropdown-toggle px-0">发言</a> <div id=sidebar-sidebar-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/statements/ title=发言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">发言</a> <a href=../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql_reference/statements/misc/ title=其他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他</a> <a href=../../../sql_reference/statements/create/ title="CREATE DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE DATABASE</a> <a href=../../../sql_reference/statements/insert_into/ title=INSERT class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT</a> <a href=../../../sql_reference/statements/select/ title="SELECT 查询语法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT 查询语法</a> </nav> </div> <a href=../../../sql_reference/syntax/ title=语法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">语法</a> <a href=#sidebar-sidebar-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-4 title=聚合函数 class="nav-link text-light text-wrap dropdown-toggle px-0">聚合函数</a> <div id=sidebar-sidebar-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/aggregate_functions/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../../sql_reference/aggregate_functions/reference/ title=参考资料 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参考资料</a> <a href=../../../sql_reference/aggregate_functions/combinators/ title=聚合函数组合器 class="nav-link text-light text-wrap d-inline-block w-100 px-0">聚合函数组合器</a> <a href=../../../sql_reference/aggregate_functions/parametric_functions/ title=参数聚合函数 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">参数聚合函数</a> </nav> </div> <a href=#sidebar-sidebar-3-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-5 title=表函数 class="nav-link text-light text-wrap dropdown-toggle px-0">表函数</a> <div id=sidebar-sidebar-3-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/table_functions/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../../sql_reference/table_functions/file/ title=文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文件</a> <a href=../../../sql_reference/table_functions/merge/ title=合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">合并</a> <a href=../../../sql_reference/table_functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../../sql_reference/table_functions/remote/ title=远程 class="nav-link text-light text-wrap d-inline-block w-100 px-0">远程</a> <a href=../../../sql_reference/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql_reference/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql_reference/table_functions/input/ title=输入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">输入</a> <a href=../../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-3-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-6 title=字典 class="nav-link text-light text-wrap dropdown-toggle px-0">字典</a> <div id=sidebar-sidebar-3-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=#sidebar-sidebar-3-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-6-2 title=外部字典 class="nav-link text-light text-wrap dropdown-toggle px-0">外部字典</a> <div id=sidebar-sidebar-3-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/external_dictionaries/ title=外部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部字典</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title=概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概述</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title=配置外部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置外部字典</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title=在内存中存储字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">在内存中存储字典</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title=字典更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典更新</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title=外部字典的来源 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部字典的来源</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title=字典键和字段 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典键和字段</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title=分层字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分层字典</a> </nav> </div> <a href=../../../sql_reference/dictionaries/internal_dicts/ title=内部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部字典</a> </nav> </div> <a href=../../../sql_reference/operators/ title=操作符 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作符</a> <a href=#sidebar-sidebar-3-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-8 title=函数 class="nav-link text-light text-wrap dropdown-toggle px-0">函数</a> <div id=sidebar-sidebar-3-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/functions/introspection/ title=自省 class="nav-link text-light text-wrap d-inline-block w-100 px-0">自省</a> <a href=../../../sql_reference/functions/geo/ title=GEO函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">GEO函数</a> <a href=../../../sql_reference/functions/hash_functions/ title=Hash函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash函数</a> <a href=../../../sql_reference/functions/in_functions/ title=IN运算符相关函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN运算符相关函数</a> <a href=../../../sql_reference/functions/ip_address_functions/ title=IP函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IP函数</a> <a href=../../../sql_reference/functions/json_functions/ title=JSON函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON函数</a> <a href=../../../sql_reference/functions/functions_for_nulls/ title=Nullable处理函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable处理函数</a> <a href=../../../sql_reference/functions/url_functions/ title=URL函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL函数</a> <a href=../../../sql_reference/functions/uuid_functions/ title=UUID函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID函数</a> <a href=../../../sql_reference/functions/array_join/ title=arrayJoin函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin函数</a> <a href=../../../sql_reference/functions/bitmap_functions/ title=位图函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位图函数</a> <a href=../../../sql_reference/functions/bit_functions/ title=位操作函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位操作函数</a> <a href=../../../sql_reference/functions/other_functions/ title=其他函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他函数</a> <a href=../../../sql_reference/functions/ title=函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">函数</a> <a href=../../../sql_reference/functions/ym_dict_functions/ title=功能与Yandex的工作。梅特里卡词典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">功能与Yandex的工作。梅特里卡词典</a> <a href=../../../sql_reference/functions/rounding_functions/ title=取整函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">取整函数</a> <a href=../../../sql_reference/functions/ext_dict_functions/ title=字典函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典函数</a> <a href=../../../sql_reference/functions/string_functions/ title=字符串函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串函数</a> <a href=../../../sql_reference/functions/splitting_merging_functions/ title=字符串拆分合并函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串拆分合并函数</a> <a href=../../../sql_reference/functions/string_search_functions/ title=字符串搜索函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串搜索函数</a> <a href=../../../sql_reference/functions/string_replace_functions/ title=字符串替换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串替换函数</a> <a href=../../../sql_reference/functions/math_functions/ title=数学函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学函数</a> <a href=../../../sql_reference/functions/array_functions/ title=数组函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数组函数</a> <a href=../../../sql_reference/functions/date_time_functions/ title=时间日期函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">时间日期函数</a> <a href=../../../sql_reference/functions/machine_learning_functions/ title=机器学习函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">机器学习函数</a> <a href=../../../sql_reference/functions/conditional_functions/ title=条件函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件函数</a> <a href=../../../sql_reference/functions/comparison_functions/ title=比较函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比较函数</a> <a href=../../../sql_reference/functions/arithmetic_functions/ title=算术函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算术函数</a> <a href=../../../sql_reference/functions/type_conversion_functions/ title=类型转换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">类型转换函数</a> <a href=../../../sql_reference/functions/encoding_functions/ title=编码函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">编码函数</a> <a href=../../../sql_reference/functions/logical_functions/ title=逻辑函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">逻辑函数</a> <a href=../../../sql_reference/functions/random_functions/ title=随机函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">随机函数</a> <a href=../../../sql_reference/functions/higher_order_functions/ title=高阶函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">高阶函数</a> </nav> </div> <a href=#sidebar-sidebar-3-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9 title=数据类型 class="nav-link text-light text-wrap dropdown-toggle px-0">数据类型</a> <div id=sidebar-sidebar-3-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=#sidebar-sidebar-3-9-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9-3 title=域 class="nav-link text-light text-wrap dropdown-toggle px-0">域</a> <div id=sidebar-sidebar-3-9-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/domains/overview/ title=域 class="nav-link text-light text-wrap d-inline-block w-100 px-0">域</a> <a href=../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction(name, types\_of\_arguments…)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types\_of\_arguments…)</a> <a href=../../../sql_reference/data_types/decimal/ title=Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S)</a> <a href=../../../sql_reference/data_types/enum/ title=Enum8,Enum16 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum8,Enum16</a> <a href=../../../sql_reference/data_types/float/ title=Float32,Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32,Float64</a> <a href=../../../sql_reference/data_types/tuple/ title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a> <a href=../../../sql_reference/data_types/int_uint/ title=UInt8,UInt16,UInt32,UInt64,Int8,Int16,Int32,Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8,UInt16,UInt32,UInt64,Int8,Int16,Int32,Int64</a> <a href=../../../sql_reference/data_types/nullable/ title=可为空（类型名称) class="nav-link text-light text-wrap d-inline-block w-100 px-0">可为空（类型名称)</a> <a href=../../../sql_reference/data_types/fixedstring/ title=固定字符串 class="nav-link text-light text-wrap d-inline-block w-100 px-0">固定字符串</a> <a href=../../../sql_reference/data_types/string/ title=字符串 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串</a> <a href=../../../sql_reference/data_types/boolean/ title=布尔值 class="nav-link text-light text-wrap d-inline-block w-100 px-0">布尔值</a> <a href=../../../sql_reference/data_types/ title=数据类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据类型</a> <a href=../../../sql_reference/data_types/date/ title=日期 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日期</a> <a href=../../../sql_reference/data_types/datetime/ title=日期时间 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日期时间</a> <a href=../../../sql_reference/data_types/array/ title=阵列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">阵列(T)</a> <a href=#sidebar-sidebar-3-9-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9-18 title=嵌套数据结构 class="nav-link text-light text-wrap dropdown-toggle px-0">嵌套数据结构</a> <div id=sidebar-sidebar-3-9-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> <a href=../../../sql_reference/data_types/nested_data_structures/ title=嵌套数据结构 class="nav-link text-light text-wrap d-inline-block w-100 px-0">嵌套数据结构</a> </nav> </div> <a href=#sidebar-sidebar-3-9-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9-19 title=特殊数据类型 class="nav-link text-light text-wrap dropdown-toggle px-0">特殊数据类型</a> <div id=sidebar-sidebar-3-9-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/special_data_types/interval/ title=间隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">间隔</a> <a href=../../../sql_reference/data_types/special_data_types/nothing/ title=没什么 class="nav-link text-light text-wrap d-inline-block w-100 px-0">没什么</a> <a href=../../../sql_reference/data_types/special_data_types/ title=特殊数据类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特殊数据类型</a> <a href=../../../sql_reference/data_types/special_data_types/expression/ title=表达式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表达式</a> <a href=../../../sql_reference/data_types/special_data_types/set/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=指南 class="nav-link text-light text-wrap dropdown-toggle px-0">指南</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概述</a> <a href=../../../guides/apply_catboost_model/ title=应用CatBoost模型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">应用CatBoost模型</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=商业 class="nav-link text-light text-wrap dropdown-toggle px-0">商业</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/ title=商业 class="nav-link text-light text-wrap d-inline-block w-100 px-0">商业</a> <a href=../../../commercial/cloud/ title=ﾂ环板Providersｮﾂ嘉ｯ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂ环板Providersｮﾂ嘉ｯ</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=新增内容 class="nav-link text-light text-wrap dropdown-toggle px-0">新增内容</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/ title=新增内容 class="nav-link text-light text-wrap d-inline-block w-100 px-0">新增内容</a> <a href=../../../whats_new/security_changelog/ title="修复于 ClickHouse Release 18.12.13, 2018-09-10" class="nav-link text-light text-wrap d-inline-block w-100 px-0">修复于 ClickHouse Release 18.12.13, 2018-09-10</a> <a href=../../../whats_new/roadmap/ title=规划 class="nav-link text-light text-wrap d-inline-block w-100 px-0">规划</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=碌莽禄release拢.0755-88888888 class="nav-link text-light text-wrap dropdown-toggle px-0">碌莽禄release拢.0755-88888888</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> <a href=../../../whats_new/changelog/ title=碌莽禄release拢.0755-88888888 class="nav-link text-light text-wrap d-inline-block w-100 px-0">碌莽禄release拢.0755-88888888</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../faq/general/ title=常见问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">常见问题</a> </nav> </div> <a href=../../../ title=什么是ClickHouse？ class="nav-link text-light text-wrap d-inline-block w-100 px-0">什么是ClickHouse？</a> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title="ClickHouse 开发" class="nav-link text-light text-wrap dropdown-toggle px-0">ClickHouse 开发</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/browse_code/ title=浏览ClickHouse源代码 class="nav-link text-light text-wrap d-inline-block w-100 px-0">浏览ClickHouse源代码</a> <a href=../../../development/build_cross_arm/ title="如何在Linux上构建ClickHouse for AARCH64（ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux上构建ClickHouse for AARCH64（ARM64)</a> <a href=../../../development/ title="ClickHouse 开发" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 开发</a> <a href=../../../development/architecture/ title="ClickHouse 架构概述" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 架构概述</a> <a href=../../../development/tests/ title="ClickHouse 测试" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 测试</a> <a href=../../../development/developer_instruction/ title=Windows使用指引 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Windows使用指引</a> <a href=../../../development/contrib/ title=使用的三方库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用的三方库</a> <a href=../../../development/build_osx/ title="在 Mac OS X 中编译 ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">在 Mac OS X 中编译 ClickHouse</a> <a href=../../../development/build_cross_osx/ title="如何在Linux中编译Mac OS X ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux中编译Mac OS X ClickHouse</a> <a href=../../../development/build/ title="如何构建 ClickHouse 发布包" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何构建 ClickHouse 发布包</a> <a href=../../../development/style/ title="如何编写 C++ 代码" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何编写 C++ 代码</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=入门 class="nav-link text-light text-wrap dropdown-toggle px-0">入门</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/tutorial/ title=教程 class="nav-link text-light text-wrap d-inline-block w-100 px-0">教程</a> <a href=#sidebar-sidebar-10-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10-2 title=示例数据集 class="nav-link text-light text-wrap dropdown-toggle px-0">示例数据集</a> <div id=sidebar-sidebar-10-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../../getting_started/example_datasets/metrica/ title=Yandex梅特里卡数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex梅特里卡数据</a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab 大数据基准测试" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab 大数据基准测试</a> <a href=../../../getting_started/example_datasets/criteo/ title="Criteo TB级别点击日志" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Criteo TB级别点击日志</a> <a href=../../../getting_started/example_datasets/star_schema/ title=星型架构基准测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">星型架构基准测试</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title=纽约市出租车数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">纽约市出租车数据</a> <a href=../../../getting_started/example_datasets/wikistat/ title=维基访问数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">维基访问数据</a> <a href=../../../getting_started/example_datasets/ontime/ title=航班飞行数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">航班飞行数据</a> </nav> </div> <a href=../../../getting_started/playground/ title=♪操场♪ class="nav-link text-light text-wrap d-inline-block w-100 px-0">♪操场♪</a> <a href=../../../getting_started/ title=入门 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入门</a> <a href=../../../getting_started/install/ title=系统要求 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统要求</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=客户端 class="nav-link text-light text-wrap dropdown-toggle px-0">客户端</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/mysql/ title=MySQL接口 class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL接口</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=第三方 class="nav-link text-light text-wrap dropdown-toggle px-0">第三方</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=第三方 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方</a> <a href=../../../interfaces/third-party/proxy/ title=来自第三方开发人员的代理服务器 class="nav-link text-light text-wrap d-inline-block w-100 px-0">来自第三方开发人员的代理服务器</a> <a href=../../../interfaces/third-party/gui/ title=第三方开发的可视化界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方开发的可视化界面</a> <a href=../../../interfaces/third-party/client_libraries/ title=第三方开发的库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方开发的库</a> <a href=../../../interfaces/third-party/integrations/ title=第三方集成库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方集成库</a> </nav> </div> <a href=../../../interfaces/cpp/ title="C ++客户端库" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C ++客户端库</a> <a href=../../../interfaces/http/ title="HTTP 客户端" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP 客户端</a> <a href=../../../interfaces/jdbc/ title="JDBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC 驱动</a> <a href=../../../interfaces/odbc/ title="ODBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC 驱动</a> <a href=../../../interfaces/tcp/ title=原生客户端接口（TCP） class="nav-link text-light text-wrap d-inline-block w-100 px-0">原生客户端接口（TCP）</a> <a href=../../../interfaces/cli/ title=命令行客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">命令行客户端</a> <a href=../../../interfaces/ title=客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端</a> <a href=../../../interfaces/formats/ title=输入输出格式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">输入输出格式</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=操作 class="nav-link text-light text-wrap dropdown-toggle px-0">操作</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/requirements/ title=要求 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要求</a> <a href=../../../operations/troubleshooting/ title=疑难解答 class="nav-link text-light text-wrap d-inline-block w-100 px-0">疑难解答</a> <a href=../../../operations/update/ title=点击更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">点击更新</a> <a href=../../../operations/backup/ title=数据备份 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据备份</a> <a href=#sidebar-sidebar-12-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-5 title=优化性能 class="nav-link text-light text-wrap dropdown-toggle px-0">优化性能</a> <div id=sidebar-sidebar-12-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing_performance/ title=优化性能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">优化性能</a> <a href=../../../operations/optimizing_performance/sampling_query_profiler/ title=查询分析 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询分析</a> </nav> </div> <a href=../../../operations/system_tables/ title=系统表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统表</a> <a href=../../../operations/performance_test/ title=测试硬件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">测试硬件</a> <a href=../../../operations/tips/ title=使用建议 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用建议</a> <a href=../../../operations/ title=操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作</a> <a href=../../../operations/monitoring/ title=监控 class="nav-link text-light text-wrap d-inline-block w-100 px-0">监控</a> <a href=../../../operations/access_rights/ title=访问权限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">访问权限</a> <a href=../../../operations/configuration_files/ title=配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置文件</a> <a href=../../../operations/quotas/ title=配额 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配额</a> <a href=#sidebar-sidebar-12-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-14 title=服务器配置参数 class="nav-link text-light text-wrap dropdown-toggle px-0">服务器配置参数</a> <div id=sidebar-sidebar-12-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_configuration_parameters/settings/ title=服务器设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">服务器设置</a> <a href=../../../operations/server_configuration_parameters/ title=服务器配置参数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">服务器配置参数</a> </nav> </div> <a href=#sidebar-sidebar-12-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-15 title=设置 class="nav-link text-light text-wrap dropdown-toggle px-0">设置</a> <div id=sidebar-sidebar-12-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/permissions_for_queries/ title=查询权限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询权限</a> <a href=../../../operations/settings/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> <a href=../../../operations/settings/settings_profiles/ title=设置配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置配置文件</a> <a href=../../../operations/settings/constraints_on_settings/ title=对设置的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">对设置的限制</a> <a href=../../../operations/settings/settings_users/ title=用户设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用户设置</a> <a href=../../../operations/settings/query_complexity/ title=查询复杂性的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询复杂性的限制</a> </nav> </div> <a href=#sidebar-sidebar-12-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12-16 title=ﾂ环板Utilityｮﾂ嘉ｯ class="nav-link text-light text-wrap dropdown-toggle px-0">ﾂ环板Utilityｮﾂ嘉ｯ</a> <div id=sidebar-sidebar-12-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/clickhouse-benchmark/ title=ﾂ暗ｪﾂ氾环催ﾂ団 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂ暗ｪﾂ氾环催ﾂ団</a> <a href=../../../operations/utilities/clickhouse-local/ title=ﾂ环板-ｮﾂ嘉ｯﾂ偲 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂ环板-ｮﾂ嘉ｯﾂ偲</a> <a href=../../../operations/utilities/ title=ﾂ环板Utilityｮﾂ嘉ｯ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂ环板Utilityｮﾂ嘉ｯ</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-13 title=碌莽禄release拢.0755-88888888 class="nav-link text-light text-wrap dropdown-toggle px-0">碌莽禄release拢.0755-88888888</a> <div id=sidebar-sidebar-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../changelog/ title=碌莽禄release拢.0755-88888888 class="nav-link text-light text-wrap d-inline-block w-100 px-0">碌莽禄release拢.0755-88888888</a> </nav> </div> <a href=../../../single/clickhouse_zh.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF版本 title=PDF版本 height=24 class="d-block mr-1 float-left"><div>PDF版本</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">帮助通缉！</p> <p class=lead>本文档页面的以下内容已经过机器翻译。 但与其他网站不同，它不是在飞行中完成。 这个翻译的文本生活在github存储库旁边的主ClickHouse代码库，并等待同胞母语，使其更具人类可读性。</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/sql_reference/aggregate_functions/parametric_functions.md target=_blank rel="external nofollow noreferrer"> 通过编辑此页面帮助ClickHouse文档 </a> </p> </div> <h1 id=aggregate_functions_parametric>参数聚合函数<a class=headerlink href=#aggregate_functions_parametric title="Permanent link">&para;</a></h1> <p>Some aggregate functions can accept not only argument columns (used for compression), but a set of parameters – constants for initialization. The syntax is two pairs of brackets instead of one. The first is for parameters, and the second is for arguments.</p> <h2 id=histogram>直方图<a class=headerlink href=#histogram title="Permanent link">&para;</a></h2> <p>计算自适应直方图。 它不能保证精确的结果。</p> <div class=codehilite><pre><span></span><code><span class=n>histogram</span><span class=p>(</span><span class=n>number_of_bins</span><span class=p>)(</span><span class=k>values</span><span class=p>)</span>
</code></pre></div> <p>该函数使用 <a href=http://jmlr.org/papers/volume11/ben-haim10a/ben-haim10a.pdf rel="external nofollow noreferrer">流式并行决策树算法</a>. 当新数据输入函数时，hist图分区的边界将被调整。 在通常情况下，箱的宽度不相等。</p> <p><strong>参数</strong></p> <p><code>number_of_bins</code> — Upper limit for the number of bins in the histogram. The function automatically calculates the number of bins. It tries to reach the specified number of bins, but if it fails, it uses fewer bins.<br> <code>values</code> — <a href=../../syntax/#syntax-expressions>表达式</a> 导致输入值。</p> <p><strong>返回值</strong></p> <ul> <li><a href=../../data_types/array/ >阵列</a> 的 <a href=../../data_types/tuple/ >元组</a> 下面的格式:<div class=codehilite><pre><span></span><code><span class=ss>```</span>
<span class=ss>[(lower_1, upper_1, height_1), ... (lower_N, upper_N, height_N)]</span>
<span class=ss>```</span>

<span class=o>-</span> <span class=ss>`lower`</span> <span class=err>—</span> <span class=n>Lower</span> <span class=n>bound</span> <span class=n>of</span> <span class=n>the</span> <span class=n>bin</span><span class=p>.</span>
<span class=o>-</span> <span class=ss>`upper`</span> <span class=err>—</span> <span class=n>Upper</span> <span class=n>bound</span> <span class=n>of</span> <span class=n>the</span> <span class=n>bin</span><span class=p>.</span>
<span class=o>-</span> <span class=ss>`height`</span> <span class=err>—</span> <span class=n>Calculated</span> <span class=n>height</span> <span class=n>of</span> <span class=n>the</span> <span class=n>bin</span><span class=p>.</span>
</code></pre></div> </li> </ul> <p><strong>示例</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>histogram</span><span class=p>(</span><span class=mi>5</span><span class=p>)(</span><span class=nb>number</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
<span class=k>FROM</span> <span class=p>(</span>
    <span class=k>SELECT</span> <span class=o>*</span>
    <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>numbers</span>
    <span class=k>LIMIT</span> <span class=mi>20</span>
<span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─histogram(5)(plus(number, 1))───────────────────────────────────────────┐
│ [(1,4.5,4),(4.5,8.5,4),(8.5,12.75,4.125),(12.75,17,4.625),(17,20,3.25)] │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div> <p>您可以使用 <a href=../../functions/other_functions/#function-bar>酒吧</a> 功能，例如:</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=n>histogram</span><span class=p>(</span><span class=mi>5</span><span class=p>)(</span><span class=n>rand</span><span class=p>()</span> <span class=o>%</span> <span class=mi>100</span><span class=p>)</span> <span class=k>AS</span> <span class=n>hist</span>
<span class=k>SELECT</span>
    <span class=n>arrayJoin</span><span class=p>(</span><span class=n>hist</span><span class=p>).</span><span class=mi>3</span> <span class=k>AS</span> <span class=n>height</span><span class=p>,</span>
    <span class=n>bar</span><span class=p>(</span><span class=n>height</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=k>AS</span> <span class=n>bar</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>SELECT</span> <span class=o>*</span>
    <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>numbers</span>
    <span class=k>LIMIT</span> <span class=mi>20</span>
<span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─height─┬─bar───┐
│  2.125 │ █▋    │
│   3.25 │ ██▌   │
│  5.625 │ ████▏ │
│  5.625 │ ████▏ │
│  3.375 │ ██▌   │
└────────┴───────┘
</code></pre></div> <p>在这种情况下，您应该记住您不知道直方图bin边界。</p> <h2 id=function-sequencematch>sequenceMatch(pattern)(timestamp, cond1, cond2, …)<a class=headerlink href=#function-sequencematch title="Permanent link">&para;</a></h2> <p>检查序列是否包含与模式匹配的事件链。</p> <div class=codehilite><pre><span></span><code><span class=n>sequenceMatch</span><span class=p>(</span><span class=n>pattern</span><span class=p>)(</span><span class=k>timestamp</span><span class=p>,</span> <span class=n>cond1</span><span class=p>,</span> <span class=n>cond2</span><span class=p>,</span> <span class=p>...)</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>警告</p> <p>在同一秒钟发生的事件可能以未定义的顺序排列在序列中，影响结果。</p> </div> <p><strong>参数</strong></p> <ul> <li> <p><code>pattern</code> — Pattern string. See <a href=#sequence-function-pattern-syntax>模式语法</a>.</p> </li> <li> <p><code>timestamp</code> — Column considered to contain time data. Typical data types are <code>Date</code> 和 <code>DateTime</code>. 您还可以使用任何支持的 <a href=../../data_types/int_uint/ >UInt</a> 数据类型。</p> </li> <li> <p><code>cond1</code>, <code>cond2</code> — Conditions that describe the chain of events. Data type: <code>UInt8</code>. 最多可以传递32个条件参数。 该函数只考虑这些条件中描述的事件。 如果序列包含未在条件中描述的数据，则函数将跳过这些数据。</p> </li> </ul> <p><strong>返回值</strong></p> <ul> <li>1，如果模式匹配。</li> <li>0，如果模式不匹配。</li> </ul> <p>类型: <code>UInt8</code>.</p> <p><a name=sequence-function-pattern-syntax></a><br> <strong>模式语法</strong></p> <ul> <li> <p><code>(?N)</code> — Matches the condition argument at position <code>N</code>. 条件在编号 <code>[1, 32]</code> 范围。 例如, <code>(?1)</code> 匹配传递给 <code>cond1</code> 参数。</p> </li> <li> <p><code>.*</code> — Matches any number of events. You don't need conditional arguments to match this element of the pattern.</p> </li> <li> <p><code>(?t operator value)</code> — Sets the time in seconds that should separate two events. For example, pattern <code>(?1)(?t&gt;1800)(?2)</code> 匹配彼此发生超过1800秒的事件。 这些事件之间可以存在任意数量的任何事件。 您可以使用 <code>&gt;=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&lt;=</code> 运营商。</p> </li> </ul> <p><strong>例</strong></p> <p>考虑在数据 <code>t</code> 表:</p> <div class=codehilite><pre><span></span><code>┌─time─┬─number─┐
│    1 │      1 │
│    2 │      3 │
│    3 │      2 │
└──────┴────────┘
</code></pre></div> <p>执行查询:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>sequenceMatch</span><span class=p>(</span><span class=s1>&#39;(?1)(?2)&#39;</span><span class=p>)(</span><span class=n>time</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>2</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─sequenceMatch(&#39;(?1)(?2)&#39;)(time, equals(number, 1), equals(number, 2))─┐
│                                                                     1 │
└───────────────────────────────────────────────────────────────────────┘
</code></pre></div> <p>该函数找到了数字2跟随数字1的事件链。 它跳过了它们之间的数字3，因为该数字没有被描述为事件。 如果我们想在搜索示例中给出的事件链时考虑这个数字，我们应该为它创建一个条件。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>sequenceMatch</span><span class=p>(</span><span class=s1>&#39;(?1)(?2)&#39;</span><span class=p>)(</span><span class=n>time</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>3</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─sequenceMatch(&#39;(?1)(?2)&#39;)(time, equals(number, 1), equals(number, 2), equals(number, 3))─┐
│                                                                                        0 │
└──────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div> <p>在这种情况下，函数找不到与模式匹配的事件链，因为数字3的事件发生在1和2之间。 如果在相同的情况下，我们检查了数字4的条件，则序列将与模式匹配。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>sequenceMatch</span><span class=p>(</span><span class=s1>&#39;(?1)(?2)&#39;</span><span class=p>)(</span><span class=n>time</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>4</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─sequenceMatch(&#39;(?1)(?2)&#39;)(time, equals(number, 1), equals(number, 2), equals(number, 4))─┐
│                                                                                        1 │
└──────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div> <p><strong>另请参阅</strong></p> <ul> <li><a href=#function-sequencecount>sequenceCount</a></li> </ul> <h2 id=function-sequencecount>sequenceCount(pattern)(time, cond1, cond2, …)<a class=headerlink href=#function-sequencecount title="Permanent link">&para;</a></h2> <p>计数与模式匹配的事件链的数量。 该函数搜索不重叠的事件链。 当前链匹配后，它开始搜索下一个链。</p> <div class="admonition warning"> <p class=admonition-title>警告</p> <p>在同一秒钟发生的事件可能以未定义的顺序排列在序列中，影响结果。</p> </div> <div class=codehilite><pre><span></span><code><span class=n>sequenceCount</span><span class=p>(</span><span class=n>pattern</span><span class=p>)(</span><span class=k>timestamp</span><span class=p>,</span> <span class=n>cond1</span><span class=p>,</span> <span class=n>cond2</span><span class=p>,</span> <span class=p>...)</span>
</code></pre></div> <p><strong>参数</strong></p> <ul> <li> <p><code>pattern</code> — Pattern string. See <a href=#sequence-function-pattern-syntax>模式语法</a>.</p> </li> <li> <p><code>timestamp</code> — Column considered to contain time data. Typical data types are <code>Date</code> 和 <code>DateTime</code>. 您还可以使用任何支持的 <a href=../../data_types/int_uint/ >UInt</a> 数据类型。</p> </li> <li> <p><code>cond1</code>, <code>cond2</code> — Conditions that describe the chain of events. Data type: <code>UInt8</code>. 最多可以传递32个条件参数。 该函数只考虑这些条件中描述的事件。 如果序列包含未在条件中描述的数据，则函数将跳过这些数据。</p> </li> </ul> <p><strong>返回值</strong></p> <ul> <li>匹配的非重叠事件链数。</li> </ul> <p>类型: <code>UInt64</code>.</p> <p><strong>示例</strong></p> <p>考虑在数据 <code>t</code> 表:</p> <div class=codehilite><pre><span></span><code>┌─time─┬─number─┐
│    1 │      1 │
│    2 │      3 │
│    3 │      2 │
│    4 │      1 │
│    5 │      3 │
│    6 │      2 │
└──────┴────────┘
</code></pre></div> <p>计算数字2在数字1之后出现的次数以及它们之间的任何其他数字:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>sequenceCount</span><span class=p>(</span><span class=s1>&#39;(?1).*(?2)&#39;</span><span class=p>)(</span><span class=n>time</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nb>number</span> <span class=o>=</span> <span class=mi>2</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─sequenceCount(&#39;(?1).*(?2)&#39;)(time, equals(number, 1), equals(number, 2))─┐
│                                                                       2 │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div> <p><strong>另请参阅</strong></p> <ul> <li><a href=#function-sequencematch>sequenceMatch</a></li> </ul> <h2 id=windowfunnel>windowFunnel<a class=headerlink href=#windowfunnel title="Permanent link">&para;</a></h2> <p>搜索滑动时间窗中的事件链，并计算从链中发生的最大事件数。</p> <p>该函数根据算法工作:</p> <ul> <li> <p>该函数搜索触发链中的第一个条件并将事件计数器设置为1的数据。 这是滑动窗口启动的时刻。</p> </li> <li> <p>如果来自链的事件在窗口内顺序发生，则计数器将递增。 如果事件序列中断，则计数器不会增加。</p> </li> <li> <p>如果数据在不同的完成点具有多个事件链，则该函数将仅输出最长链的大小。</p> </li> </ul> <p><strong>语法</strong></p> <div class=codehilite><pre><span></span><code><span class=n>windowFunnel</span><span class=p>(</span><span class=n>window</span><span class=p>,</span> <span class=p>[</span><span class=k>mode</span><span class=p>])(</span><span class=k>timestamp</span><span class=p>,</span> <span class=n>cond1</span><span class=p>,</span> <span class=n>cond2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>condN</span><span class=p>)</span>
</code></pre></div> <p><strong>参数</strong></p> <ul> <li><code>window</code> — Length of the sliding window in seconds.</li> <li><code>mode</code> -这是一个可选的参数。<ul> <li><code>'strict'</code> -当 <code>'strict'</code> 设置时，windowFunnel()仅对唯一值应用条件。</li> </ul> </li> <li><code>timestamp</code> — Name of the column containing the timestamp. Data types supported: <a href=../../data_types/date/ >日期</a>, <a href=../../data_types/datetime/#data_type-datetime>日期时间</a> 和其他无符号整数类型（请注意，即使时间戳支持 <code>UInt64</code> 类型，它的值不能超过Int64最大值，即2^63-1）。</li> <li><code>cond</code> — Conditions or data describing the chain of events. <a href=../../data_types/int_uint/ >UInt8</a>.</li> </ul> <p><strong>返回值</strong></p> <p>滑动时间窗口内连续触发条件链的最大数目。<br> 对选择中的所有链进行了分析。</p> <p>类型: <code>Integer</code>.</p> <p><strong>示例</strong></p> <p>确定设定的时间段是否足以让用户选择手机并在在线商店中购买两次。</p> <p>设置以下事件链:</p> <ol> <li>用户登录到其在应用商店中的帐户 (<code>eventID = 1003</code>).</li> <li>用户搜索手机 (<code>eventID = 1007, product = 'phone'</code>).</li> <li>用户下了订单 (<code>eventID = 1009</code>).</li> <li>用户再次下订单 (<code>eventID = 1010</code>).</li> </ol> <p>输入表:</p> <div class=codehilite><pre><span></span><code>┌─event_date─┬─user_id─┬───────────timestamp─┬─eventID─┬─product─┐
│ 2019-01-28 │       1 │ 2019-01-29 10:00:00 │    1003 │ phone   │
└────────────┴─────────┴─────────────────────┴─────────┴─────────┘
┌─event_date─┬─user_id─┬───────────timestamp─┬─eventID─┬─product─┐
│ 2019-01-31 │       1 │ 2019-01-31 09:00:00 │    1007 │ phone   │
└────────────┴─────────┴─────────────────────┴─────────┴─────────┘
┌─event_date─┬─user_id─┬───────────timestamp─┬─eventID─┬─product─┐
│ 2019-01-30 │       1 │ 2019-01-30 08:00:00 │    1009 │ phone   │
└────────────┴─────────┴─────────────────────┴─────────┴─────────┘
┌─event_date─┬─user_id─┬───────────timestamp─┬─eventID─┬─product─┐
│ 2019-02-01 │       1 │ 2019-02-01 08:00:00 │    1010 │ phone   │
└────────────┴─────────┴─────────────────────┴─────────┴─────────┘
</code></pre></div> <p>了解用户有多远 <code>user_id</code> 可以在2019的1-2月期间通过链条。</p> <p>查询:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=k>level</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>SELECT</span>
        <span class=n>user_id</span><span class=p>,</span>
        <span class=n>windowFunnel</span><span class=p>(</span><span class=mi>6048000000000000</span><span class=p>)(</span><span class=k>timestamp</span><span class=p>,</span> <span class=n>eventID</span> <span class=o>=</span> <span class=mi>1003</span><span class=p>,</span> <span class=n>eventID</span> <span class=o>=</span> <span class=mi>1009</span><span class=p>,</span> <span class=n>eventID</span> <span class=o>=</span> <span class=mi>1007</span><span class=p>,</span> <span class=n>eventID</span> <span class=o>=</span> <span class=mi>1010</span><span class=p>)</span> <span class=k>AS</span> <span class=k>level</span>
    <span class=k>FROM</span> <span class=n>trend</span>
    <span class=k>WHERE</span> <span class=p>(</span><span class=n>event_date</span> <span class=o>&gt;=</span> <span class=s1>&#39;2019-01-01&#39;</span><span class=p>)</span> <span class=k>AND</span> <span class=p>(</span><span class=n>event_date</span> <span class=o>&lt;=</span> <span class=s1>&#39;2019-02-02&#39;</span><span class=p>)</span>
    <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>user_id</span>
<span class=p>)</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=k>level</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>level</span> <span class=k>ASC</span>
</code></pre></div> <p>结果:</p> <div class=codehilite><pre><span></span><code>┌─level─┬─c─┐
│     4 │ 1 │
└───────┴───┘
</code></pre></div> <h2 id=retention>保留<a class=headerlink href=#retention title="Permanent link">&para;</a></h2> <p>该函数将一组条件作为参数，类型为1到32个参数 <code>UInt8</code> 表示事件是否满足特定条件。<br> 任何条件都可以指定为参数（如 <a href=../../statements/select/#select-where>WHERE</a>).</p> <p>除了第一个以外，条件成对适用：如果第一个和第二个是真的，第二个结果将是真的，如果第一个和fird是真的，第三个结果将是真的，等等。</p> <p><strong>语法</strong></p> <div class=codehilite><pre><span></span><code><span class=n>retention</span><span class=p>(</span><span class=n>cond1</span><span class=p>,</span> <span class=n>cond2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>cond32</span><span class=p>);</span>
</code></pre></div> <p><strong>参数</strong></p> <ul> <li><code>cond</code> — an expression that returns a <code>UInt8</code> 结果（1或0）。</li> </ul> <p><strong>返回值</strong></p> <p>数组为1或0。</p> <ul> <li>1 — condition was met for the event.</li> <li>0 — condition wasn't met for the event.</li> </ul> <p>类型: <code>UInt8</code>.</p> <p><strong>示例</strong></p> <p>让我们考虑计算的一个例子 <code>retention</code> 功能，以确定网站流量。</p> <p><strong>1.</strong> Сreate a table to illustrate an example.</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>retention_test</span><span class=p>(</span><span class=nb>date</span> <span class=nb>Date</span><span class=p>,</span> <span class=n>uid</span> <span class=n>Int32</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>retention_test</span> <span class=k>SELECT</span> <span class=s1>&#39;2020-01-01&#39;</span><span class=p>,</span> <span class=nb>number</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>retention_test</span> <span class=k>SELECT</span> <span class=s1>&#39;2020-01-02&#39;</span><span class=p>,</span> <span class=nb>number</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>retention_test</span> <span class=k>SELECT</span> <span class=s1>&#39;2020-01-03&#39;</span><span class=p>,</span> <span class=nb>number</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>15</span><span class=p>);</span>
</code></pre></div> <p>输入表:</p> <p>查询:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>retention_test</span>
</code></pre></div> <p>结果:</p> <div class=codehilite><pre><span></span><code>┌───────date─┬─uid─┐
│ 2020-01-01 │   0 │
│ 2020-01-01 │   1 │
│ 2020-01-01 │   2 │
│ 2020-01-01 │   3 │
│ 2020-01-01 │   4 │
└────────────┴─────┘
┌───────date─┬─uid─┐
│ 2020-01-02 │   0 │
│ 2020-01-02 │   1 │
│ 2020-01-02 │   2 │
│ 2020-01-02 │   3 │
│ 2020-01-02 │   4 │
│ 2020-01-02 │   5 │
│ 2020-01-02 │   6 │
│ 2020-01-02 │   7 │
│ 2020-01-02 │   8 │
│ 2020-01-02 │   9 │
└────────────┴─────┘
┌───────date─┬─uid─┐
│ 2020-01-03 │   0 │
│ 2020-01-03 │   1 │
│ 2020-01-03 │   2 │
│ 2020-01-03 │   3 │
│ 2020-01-03 │   4 │
│ 2020-01-03 │   5 │
│ 2020-01-03 │   6 │
│ 2020-01-03 │   7 │
│ 2020-01-03 │   8 │
│ 2020-01-03 │   9 │
│ 2020-01-03 │  10 │
│ 2020-01-03 │  11 │
│ 2020-01-03 │  12 │
│ 2020-01-03 │  13 │
│ 2020-01-03 │  14 │
└────────────┴─────┘
</code></pre></div> <p><strong>2.</strong> 按唯一ID对用户进行分组 <code>uid</code> 使用 <code>retention</code> 功能。</p> <p>查询:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>uid</span><span class=p>,</span>
    <span class=n>retention</span><span class=p>(</span><span class=nb>date</span> <span class=o>=</span> <span class=s1>&#39;2020-01-01&#39;</span><span class=p>,</span> <span class=nb>date</span> <span class=o>=</span> <span class=s1>&#39;2020-01-02&#39;</span><span class=p>,</span> <span class=nb>date</span> <span class=o>=</span> <span class=s1>&#39;2020-01-03&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=n>r</span>
<span class=k>FROM</span> <span class=n>retention_test</span>
<span class=k>WHERE</span> <span class=nb>date</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>&#39;2020-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2020-01-02&#39;</span><span class=p>,</span> <span class=s1>&#39;2020-01-03&#39;</span><span class=p>)</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>uid</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>uid</span> <span class=k>ASC</span>
</code></pre></div> <p>结果:</p> <div class=codehilite><pre><span></span><code>┌─uid─┬─r───────┐
│   0 │ [1,1,1] │
│   1 │ [1,1,1] │
│   2 │ [1,1,1] │
│   3 │ [1,1,1] │
│   4 │ [1,1,1] │
│   5 │ [0,0,0] │
│   6 │ [0,0,0] │
│   7 │ [0,0,0] │
│   8 │ [0,0,0] │
│   9 │ [0,0,0] │
│  10 │ [0,0,0] │
│  11 │ [0,0,0] │
│  12 │ [0,0,0] │
│  13 │ [0,0,0] │
│  14 │ [0,0,0] │
└─────┴─────────┘
</code></pre></div> <p><strong>3.</strong> 计算每天的现场访问总数。</p> <p>查询:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=k>sum</span><span class=p>(</span><span class=n>r</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=k>AS</span> <span class=n>r1</span><span class=p>,</span>
    <span class=k>sum</span><span class=p>(</span><span class=n>r</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span> <span class=k>AS</span> <span class=n>r2</span><span class=p>,</span>
    <span class=k>sum</span><span class=p>(</span><span class=n>r</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>r3</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>SELECT</span>
        <span class=n>uid</span><span class=p>,</span>
        <span class=n>retention</span><span class=p>(</span><span class=nb>date</span> <span class=o>=</span> <span class=s1>&#39;2020-01-01&#39;</span><span class=p>,</span> <span class=nb>date</span> <span class=o>=</span> <span class=s1>&#39;2020-01-02&#39;</span><span class=p>,</span> <span class=nb>date</span> <span class=o>=</span> <span class=s1>&#39;2020-01-03&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=n>r</span>
    <span class=k>FROM</span> <span class=n>retention_test</span>
    <span class=k>WHERE</span> <span class=nb>date</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>&#39;2020-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2020-01-02&#39;</span><span class=p>,</span> <span class=s1>&#39;2020-01-03&#39;</span><span class=p>)</span>
    <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>uid</span>
<span class=p>)</span>
</code></pre></div> <p>结果:</p> <div class=codehilite><pre><span></span><code>┌─r1─┬─r2─┬─r3─┐
│  5 │  5 │  5 │
└────┴────┴────┘
</code></pre></div> <p>哪里:</p> <ul> <li><code>r1</code>-2020-01-01期间访问该网站的独立访问者数量（ <code>cond1</code> 条件）。</li> <li><code>r2</code>-在2020-01-01和2020-01-02之间的特定时间段内访问该网站的唯一访问者的数量 (<code>cond1</code> 和 <code>cond2</code> 条件）。</li> <li><code>r3</code>-在2020-01-01和2020-01-03之间的特定时间段内访问该网站的唯一访问者的数量 (<code>cond1</code> 和 <code>cond3</code> 条件）。</li> </ul> <h2 id=uniquptonx>uniqUpTo(N)(x)<a class=headerlink href=#uniquptonx title="Permanent link">&para;</a></h2> <p>Calculates the number of different argument values ​​if it is less than or equal to N. If the number of different argument values is greater than N, it returns N + 1.</p> <p>建议使用小Ns，高达10。 N的最大值为100。</p> <p>对于聚合函数的状态，它使用的内存量等于1+N*一个字节值的大小。<br> 对于字符串，它存储8个字节的非加密哈希。 也就是说，计算是近似的字符串。</p> <p>该函数也适用于多个参数。</p> <p>它的工作速度尽可能快，除了使用较大的N值并且唯一值的数量略小于N的情况。</p> <p>用法示例:</p> <div class=codehilite><pre><span></span><code>Problem: Generate a report that shows only keywords that produced at least 5 unique users.
Solution: Write in the GROUP BY query SearchPhrase HAVING uniqUpTo(4)(UserID) &gt;= 5
</code></pre></div> <h2 id=summapfilteredkeys-to-keepkeys-values>sumMapFiltered(keys_to_keep)(键值)<a class=headerlink href=#summapfilteredkeys-to-keepkeys-values title="Permanent link">&para;</a></h2> <p>同样的行为 <a href=../reference/#agg_functions-summap>sumMap</a> 除了一个键数组作为参数传递。 这在使用高基数密钥时尤其有用。</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>建于 <a href=https://github.com/ClickHouse/ClickHouse/commit/a24471233fce463ffd70bff561f7842d4d0b7bd9 rel="external nofollow noreferrer" target=_blank class=text-reset>a24471233f</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>目录</label> <a href=#histogram title=直方图 class="nav-link text-wrap d-inline-block w-100"> 直方图 </a> <a href=#function-sequencematch title="sequenceMatch(pattern)(timestamp, cond1, cond2, …)" class="nav-link text-wrap d-inline-block w-100"> sequenceMatch(pattern)(timestamp, cond1, cond2, …) </a> <a href=#function-sequencecount title="sequenceCount(pattern)(time, cond1, cond2, …)" class="nav-link text-wrap d-inline-block w-100"> sequenceCount(pattern)(time, cond1, cond2, …) </a> <a href=#windowfunnel title=windowFunnel class="nav-link text-wrap d-inline-block w-100"> windowFunnel </a> <a href=#retention title=保留 class="nav-link text-wrap d-inline-block w-100"> 保留 </a> <a href=#uniquptonx title=uniqUpTo(N)(x) class="nav-link text-wrap d-inline-block w-100"> uniqUpTo(N)(x) </a> <a href=#summapfilteredkeys-to-keepkeys-values title=sumMapFiltered(keys_to_keep)(键值) class="nav-link text-wrap d-inline-block w-100"> sumMapFiltered(keys_to_keep)(键值) </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=es data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Replicación de datos - Documentación de ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Replicación de datos - Documentación de ClickHouse "><meta property=og:description content="Replicación de datos La replicación solo se admite para tablas de la familia MergeTree: ReplicatedMergeTree ReplicatedSu"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Replicación de datos - Documentación de ClickHouse "><meta name=description content="Replicación de datos La replicación solo se admite para tablas de la familia MergeTree: ReplicatedMergeTree ReplicatedSu"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Replicación de datos </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/es/engines/table_engines/mergetree_family/replication.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/es.svg alt=Español title=Español width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/engines/table_engines/mergetree_family/replication/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/engines/table_engines/mergetree_family/replication/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/engines/table_engines/mergetree_family/replication/ class="dropdown-item disabled"> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/engines/table_engines/mergetree_family/replication/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/engines/table_engines/mergetree_family/replication/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/engines/table_engines/mergetree_family/replication/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/engines/table_engines/mergetree_family/replication/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-página o de una sola página"> <a href=../../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Versión de varias páginas" title="Versión de varias páginas"> </a> <a href=../../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Versión de una sola página" title="Versión de una sola página"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Versión: <span class=text-light>reciente</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/es/ class="dropdown-item disable"> <span class=text-light>reciente</span> </a> <a href=/docs/v20.3/es/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/es/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/es/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/es/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/es/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/es/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/es/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/es/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/es/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/es/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/es/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../../introduction/distinctive_features/ title="Características distintivas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Características distintivas</a> <a href=../../../../introduction/features_considered_disadvantages/ title="Características de ClickHouse que pueden considerarse desventajas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Características de ClickHouse que pueden considerarse desventajas</a> <a href=../../../../introduction/performance/ title=Rendimiento class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rendimiento</a> <a href=../../../../introduction/history/ title=Historia class="nav-link text-light text-wrap d-inline-block w-100 px-0">Historia</a> <a href=../../../../introduction/adopters/ title=Adoptante class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adoptante</a> </nav> </div> <a href=../../../../ title=Descripción class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción</a> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../getting_started/ title=oculto class="nav-link text-light text-wrap d-inline-block w-100 px-0">oculto</a> <a href=../../../../getting_started/install/ title=Instalación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Instalación</a> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../getting_started/example_datasets/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../getting_started/example_datasets/ontime/ title="A tiempo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">A tiempo</a> <a href=../../../../getting_started/example_datasets/nyc_taxi/ title="Datos de taxis de Nueva York" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Datos de taxis de Nueva York</a> <a href=../../../../getting_started/example_datasets/amplab_benchmark/ title="Referencia de Big Data de AMPLab" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Referencia de Big Data de AMPLab</a> <a href=../../../../getting_started/example_datasets/wikistat/ title="Nombre de la red inalámbrica (SSID):" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nombre de la red inalámbrica (SSID):</a> <a href=../../../../getting_started/example_datasets/criteo/ title="Registros de clics de Terabyte de Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Registros de clics de Terabyte de Criteo</a> <a href=../../../../getting_started/example_datasets/star_schema/ title="Estrella Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Estrella Schema Benchmark</a> <a href=../../../../getting_started/example_datasets/metrica/ title="El Yandex.Metrica Datos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">El Yandex.Metrica Datos</a> </nav> </div> <a href=../../../../getting_started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../../../getting_started/playground/ title=Infantil class="nav-link text-light text-wrap d-inline-block w-100 px-0">Infantil</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../interfaces/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../interfaces/cli/ title="Cliente de línea de comandos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cliente de línea de comandos</a> <a href=../../../../interfaces/tcp/ title="Interfaz nativa (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interfaz nativa (TCP)</a> <a href=../../../../interfaces/http/ title="Interfaz HTTP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interfaz HTTP</a> <a href=../../../../interfaces/mysql/ title="Interfaz MySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interfaz MySQL</a> <a href=../../../../interfaces/formats/ title="Formatos de entrada y salida" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Formatos de entrada y salida</a> <a href=../../../../interfaces/jdbc/ title="Controlador JDBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Controlador JDBC</a> <a href=../../../../interfaces/odbc/ title="Conductor ODBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conductor ODBC</a> <a href=../../../../interfaces/cpp/ title="Biblioteca de clientes de C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Biblioteca de clientes de C++</a> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../../interfaces/third-party/client_libraries/ title="Bibliotecas de clientes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bibliotecas de clientes</a> <a href=../../../../interfaces/third-party/integrations/ title=Integración class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integración</a> <a href=../../../../interfaces/third-party/gui/ title="Interfaces Visuales" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interfaces Visuales</a> <a href=../../../../interfaces/third-party/proxy/ title=Proxy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxy</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../../engines/table_engines/mergetree_family/mergetree/ title="Método de codificación de datos:" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Método de codificación de datos:</a> <a href=../../../../engines/table_engines/mergetree_family/replication/ title="Replicación de datos" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Replicación de datos</a> <a href=../../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Clave de partición personalizada" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Clave de partición personalizada</a> <a href=../../../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AgregaciónMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AgregaciónMergeTree</a> <a href=../../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=ColapsarMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ColapsarMergeTree</a> <a href=../../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../../engines/table_engines/log_family/log_family/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../../engines/table_engines/log_family/log/ title=Registro class="nav-link text-light text-wrap d-inline-block w-100 px-0">Registro</a> <a href=../../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../../engines/table_engines/special/distributed/ title=Distribuido class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distribuido</a> <a href=../../../../engines/table_engines/special/external_data/ title="Datos externos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Datos externos</a> <a href=../../../../engines/table_engines/special/dictionary/ title=Diccionario class="nav-link text-light text-wrap d-inline-block w-100 px-0">Diccionario</a> <a href=../../../../engines/table_engines/special/merge/ title=Fusionar class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fusionar</a> <a href=../../../../engines/table_engines/special/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../../../engines/table_engines/special/null/ title=Nulo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nulo</a> <a href=../../../../engines/table_engines/special/set/ title=Establecer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Establecer</a> <a href=../../../../engines/table_engines/special/join/ title=Unir class="nav-link text-light text-wrap d-inline-block w-100 px-0">Unir</a> <a href=../../../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../../engines/table_engines/special/view/ title=Vista class="nav-link text-light text-wrap d-inline-block w-100 px-0">Vista</a> <a href=../../../../engines/table_engines/special/materializedview/ title="Método de codificación de datos:" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Método de codificación de datos:</a> <a href=../../../../engines/table_engines/special/memory/ title=Memoria class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memoria</a> <a href=../../../../engines/table_engines/special/buffer/ title=Búfer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Búfer</a> <a href=../../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/database_engines/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../../engines/database_engines/lazy/ title=Perezoso class="nav-link text-light text-wrap d-inline-block w-100 px-0">Perezoso</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/ title=oculto class="nav-link text-light text-wrap d-inline-block w-100 px-0">oculto</a> <a href=../../../../sql_reference/syntax/ title=Sintaxis class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sintaxis</a> <a href=#sidebar-sidebar-6-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-3 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-6-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../../sql_reference/statements/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../../sql_reference/statements/misc/ title=Otro class="nav-link text-light text-wrap d-inline-block w-100 px-0">Otro</a> </nav> </div> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/functions/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../sql_reference/functions/arithmetic_functions/ title=Aritmética class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aritmética</a> <a href=../../../../sql_reference/functions/comparison_functions/ title=Comparación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparación</a> <a href=../../../../sql_reference/functions/logical_functions/ title=Lógico class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lógico</a> <a href=../../../../sql_reference/functions/type_conversion_functions/ title="Conversión de tipo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conversión de tipo</a> <a href=../../../../sql_reference/functions/date_time_functions/ title="Trabajar con fechas y horas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con fechas y horas</a> <a href=../../../../sql_reference/functions/string_functions/ title="Trabajar con cadenas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con cadenas</a> <a href=../../../../sql_reference/functions/string_search_functions/ title="Para buscar cadenas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Para buscar cadenas</a> <a href=../../../../sql_reference/functions/string_replace_functions/ title="Para reemplazar en cadenas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Para reemplazar en cadenas</a> <a href=../../../../sql_reference/functions/conditional_functions/ title=Condicional class="nav-link text-light text-wrap d-inline-block w-100 px-0">Condicional</a> <a href=../../../../sql_reference/functions/math_functions/ title=Matemática class="nav-link text-light text-wrap d-inline-block w-100 px-0">Matemática</a> <a href=../../../../sql_reference/functions/rounding_functions/ title=Redondeo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Redondeo</a> <a href=../../../../sql_reference/functions/array_functions/ title="Trabajar con matrices" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con matrices</a> <a href=../../../../sql_reference/functions/splitting_merging_functions/ title="División y fusión de cuerdas y matrices" class="nav-link text-light text-wrap d-inline-block w-100 px-0">División y fusión de cuerdas y matrices</a> <a href=../../../../sql_reference/functions/bit_functions/ title=Trozo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trozo</a> <a href=../../../../sql_reference/functions/bitmap_functions/ title=Bits class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bits</a> <a href=../../../../sql_reference/functions/hash_functions/ title=Hash class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a> <a href=../../../../sql_reference/functions/random_functions/ title="Generación de números pseudo-aleatorios" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generación de números pseudo-aleatorios</a> <a href=../../../../sql_reference/functions/encoding_functions/ title=Codificación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Codificación</a> <a href=../../../../sql_reference/functions/uuid_functions/ title="Trabajando con UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajando con UUID</a> <a href=../../../../sql_reference/functions/url_functions/ title="Trabajar con URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con URL</a> <a href=../../../../sql_reference/functions/ip_address_functions/ title="Trabajar con direcciones IP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con direcciones IP</a> <a href=../../../../sql_reference/functions/json_functions/ title="Trabajando con JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajando con JSON</a> <a href=../../../../sql_reference/functions/higher_order_functions/ title="Orden superior" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Orden superior</a> <a href=../../../../sql_reference/functions/ext_dict_functions/ title="Trabajar con diccionarios externos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con diccionarios externos</a> <a href=../../../../sql_reference/functions/ym_dict_functions/ title="Trabajando con Yandex.Diccionarios de Metrica" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajando con Yandex.Diccionarios de Metrica</a> <a href=../../../../sql_reference/functions/in_functions/ title="Implementación del operador IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implementación del operador IN</a> <a href=../../../../sql_reference/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../../sql_reference/functions/geo/ title="Trabajar con coordenadas geográficas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con coordenadas geográficas</a> <a href=../../../../sql_reference/functions/functions_for_nulls/ title="Trabajar con argumentos Nullable" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con argumentos Nullable</a> <a href=../../../../sql_reference/functions/machine_learning_functions/ title="Funciones de aprendizaje automático" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Funciones de aprendizaje automático</a> <a href=../../../../sql_reference/functions/introspection/ title=Introspección class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introspección</a> <a href=../../../../sql_reference/functions/other_functions/ title=Otro class="nav-link text-light text-wrap d-inline-block w-100 px-0">Otro</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/aggregate_functions/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../sql_reference/aggregate_functions/reference/ title=Referencia class="nav-link text-light text-wrap d-inline-block w-100 px-0">Referencia</a> <a href=../../../../sql_reference/aggregate_functions/combinators/ title="Combinadores de funciones agregadas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Combinadores de funciones agregadas</a> <a href=../../../../sql_reference/aggregate_functions/parametric_functions/ title="Funciones agregadas paramétricas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Funciones agregadas paramétricas</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/table_functions/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../sql_reference/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../../sql_reference/table_functions/merge/ title=fusionar class="nav-link text-light text-wrap d-inline-block w-100 px-0">fusionar</a> <a href=../../../../sql_reference/table_functions/numbers/ title=numero class="nav-link text-light text-wrap d-inline-block w-100 px-0">numero</a> <a href=../../../../sql_reference/table_functions/remote/ title=remoto class="nav-link text-light text-wrap d-inline-block w-100 px-0">remoto</a> <a href=../../../../sql_reference/table_functions/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../../sql_reference/table_functions/odbc/ title=Nosotros class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nosotros</a> <a href=../../../../sql_reference/table_functions/hdfs/ title=Hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hdfs</a> <a href=../../../../sql_reference/table_functions/input/ title=entrada class="nav-link text-light text-wrap d-inline-block w-100 px-0">entrada</a> <a href=../../../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/dictionaries/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="Descripción General" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción General</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Configuración de un diccionario externo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuración de un diccionario externo</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Almacenamiento de diccionarios en la memoria" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Almacenamiento de diccionarios en la memoria</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Actualizaciones del diccionario" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Actualizaciones del diccionario</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Fuentes de diccionarios externos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fuentes de diccionarios externos</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Clave y campos del diccionario" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Clave y campos del diccionario</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Diccionarios jerárquicos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Diccionarios jerárquicos</a> </nav> </div> <a href=../../../../sql_reference/dictionaries/internal_dicts/ title="Diccionarios internos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Diccionarios internos</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/data_types/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../../sql_reference/data_types/float/ title="Descripción del producto" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción del producto</a> <a href=../../../../sql_reference/data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../../../sql_reference/data_types/boolean/ title=Booleana class="nav-link text-light text-wrap d-inline-block w-100 px-0">Booleana</a> <a href=../../../../sql_reference/data_types/string/ title=Cadena class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cadena</a> <a href=../../../../sql_reference/data_types/fixedstring/ title="Cadena fija (N)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cadena fija (N)</a> <a href=../../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../../sql_reference/data_types/date/ title=Fecha class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fecha</a> <a href=../../../../sql_reference/data_types/datetime/ title=FechaHora class="nav-link text-light text-wrap d-inline-block w-100 px-0">FechaHora</a> <a href=../../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../../sql_reference/data_types/array/ title="Matriz (T)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Matriz (T)</a> <a href=../../../../sql_reference/data_types/aggregatefunction/ title="Agregar función (nombre, types_of_arguments)...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Agregar función (nombre, types_of_arguments)...)</a> <a href=../../../../sql_reference/data_types/tuple/ title="Tuple (T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple (T1, T2, ...)</a> <a href=../../../../sql_reference/data_types/nullable/ title=NULL class="nav-link text-light text-wrap d-inline-block w-100 px-0">NULL</a> <a href=#sidebar-sidebar-6-8-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-17 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-6-8-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/data_types/nested_data_structures/ title=oculto class="nav-link text-light text-wrap d-inline-block w-100 px-0">oculto</a> <a href=../../../../sql_reference/data_types/nested_data_structures/nested/ title="Anidado (Nombre1 Tipo1, Nombre2 Tipo2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Anidado (Nombre1 Tipo1, Nombre2 Tipo2, ...)</a> </nav> </div> <a href=#sidebar-sidebar-6-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-6-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/data_types/special_data_types/ title=oculto class="nav-link text-light text-wrap d-inline-block w-100 px-0">oculto</a> <a href=../../../../sql_reference/data_types/special_data_types/expression/ title=Expresion class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expresion</a> <a href=../../../../sql_reference/data_types/special_data_types/set/ title=Establecer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Establecer</a> <a href=../../../../sql_reference/data_types/special_data_types/nothing/ title=Nada class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nada</a> <a href=../../../../sql_reference/data_types/special_data_types/interval/ title=Intervalo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Intervalo</a> </nav> </div> <a href=#sidebar-sidebar-6-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../../sql_reference/data_types/domains/overview/ title=Descripción class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción</a> <a href=../../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../../../sql_reference/operators/ title=Operador class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operador</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../guides/ title=Descripción class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción</a> <a href=../../../../guides/apply_catboost_model/ title="Aplicación de modelos CatBoost" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aplicación de modelos CatBoost</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../operations/requirements/ title=Requisito class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requisito</a> <a href=../../../../operations/monitoring/ title=Monitoreo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoreo</a> <a href=../../../../operations/troubleshooting/ title="Solución de problemas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Solución de problemas</a> <a href=../../../../operations/update/ title="Actualización de ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Actualización de ClickHouse</a> <a href=../../../../operations/access_rights/ title="Derechos de acceso" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Derechos de acceso</a> <a href=../../../../operations/backup/ title="Copia de seguridad de datos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Copia de seguridad de datos</a> <a href=../../../../operations/configuration_files/ title="Archivos de configuración" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Archivos de configuración</a> <a href=../../../../operations/quotas/ title=Cuota class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cuota</a> <a href=#sidebar-sidebar-8-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-10 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-8-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../../operations/optimizing_performance/sampling_query_profiler/ title="Generación de perfiles de consultas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generación de perfiles de consultas</a> </nav> </div> <a href=../../../../operations/system_tables/ title="Tablas del sistema" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tablas del sistema</a> <a href=../../../../operations/performance_test/ title="Prueba de hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Prueba de hardware</a> <a href=#sidebar-sidebar-8-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-13 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-8-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/server_configuration_parameters/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../operations/server_configuration_parameters/settings/ title="Configuración del servidor" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuración del servidor</a> </nav> </div> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/settings/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../operations/settings/permissions_for_queries/ title="Permisos para consultas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permisos para consultas</a> <a href=../../../../operations/settings/query_complexity/ title="Restricciones en la complejidad de consultas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restricciones en la complejidad de consultas</a> <a href=../../../../operations/settings/settings/ title=Configuración class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuración</a> <a href=../../../../operations/settings/settings_profiles/ title="Perfiles de configuración" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Perfiles de configuración</a> <a href=../../../../operations/settings/constraints_on_settings/ title="Restricciones en la configuración" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restricciones en la configuración</a> <a href=../../../../operations/settings/settings_users/ title="Configuración del usuario" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuración del usuario</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/utilities/ title=Descripción class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción</a> <a href=../../../../operations/utilities/clickhouse-copier/ title="Método de codificación de datos:" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Método de codificación de datos:</a> <a href=../../../../operations/utilities/clickhouse-benchmark/ title="Sistema abierto" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sistema abierto</a> </nav> </div> <a href=../../../../operations/tips/ title="Recomendaciones de uso" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Recomendaciones de uso</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../development/ title=oculto class="nav-link text-light text-wrap d-inline-block w-100 px-0">oculto</a> <a href=../../../../development/developer_instruction/ title="La instrucción para desarrolladores de ClickHouse para principiantes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">La instrucción para desarrolladores de ClickHouse para principiantes</a> <a href=../../../../development/architecture/ title="Descripción general de la arquitectura ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción general de la arquitectura ClickHouse</a> <a href=../../../../development/browse_code/ title="Examinar el código fuente de ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Examinar el código fuente de ClickHouse</a> <a href=../../../../development/build/ title="Cómo crear ClickHouse en Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo crear ClickHouse en Linux</a> <a href=../../../../development/build_osx/ title="Cómo crear ClickHouse en Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo crear ClickHouse en Mac OS X</a> <a href=../../../../development/build_cross_osx/ title="Cómo construir ClickHouse en Linux para Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo construir ClickHouse en Linux para Mac OS X</a> <a href=../../../../development/build_cross_arm/ title="Cómo construir ClickHouse en Linux para AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo construir ClickHouse en Linux para AARCH64 (ARM64)</a> <a href=../../../../development/style/ title="Cómo escribir código C ++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo escribir código C ++</a> <a href=../../../../development/tests/ title="Cómo ejecutar pruebas de ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo ejecutar pruebas de ClickHouse</a> <a href=../../../../development/contrib/ title="Bibliotecas de terceros utilizadas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bibliotecas de terceros utilizadas</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../../commercial/cloud/ title="Proveedores de servicios en la nube de ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proveedores de servicios en la nube de ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../../whats_new/roadmap/ title="Hoja de ruta" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hoja de ruta</a> <a href=../../../../whats_new/security_changelog/ title="Seguridad Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Seguridad Changelog</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../../faq/general/ title="Preguntas generales" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Preguntas generales</a> </nav> </div> <a href=../../../../roadmap/ title="Hoja de ruta" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hoja de ruta</a> <a href=../../../../single/clickhouse_es.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="Versión PDF" title="Versión PDF" height=24 class="d-block mr-1 float-left"><div>Versión PDF</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Ayuda quería!</p> <p class=lead>El siguiente contenido de esta página de documentación ha sido traducido por máquina. Pero a diferencia de otros sitios web, no se hace sobre la marcha. Este texto traducido vive en el repositorio de GitHub junto con la base de código principal de ClickHouse y espera a que otros hablantes nativos lo hagan más legible por humanos.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/es/engines/table_engines/mergetree_family/replication.md target=_blank rel="external nofollow noreferrer"> Ayuda a la documentación de ClickHouse editando esta página </a> </p> </div> <h1 id=table_engines-replication>Replicación de datos<a class=headerlink href=#table_engines-replication title="Permanent link">&para;</a></h1> <p>La replicación solo se admite para tablas de la familia MergeTree:</p> <ul> <li>ReplicatedMergeTree</li> <li>ReplicatedSummingMergeTree</li> <li>ReplicatedReplacingMergeTree</li> <li>ReplicatedAggregatingMergeTree</li> <li>ReplicatedCollapsingMergeTree</li> <li>ReplicatedVersionedCollapsingMergetree</li> <li>ReplicatedGraphiteMergeTree</li> </ul> <p>La replicación funciona a nivel de una tabla individual, no de todo el servidor. Un servidor puede almacenar tablas replicadas y no replicadas al mismo tiempo.</p> <p>La replicación no depende de la fragmentación. Cada fragmento tiene su propia replicación independiente.</p> <p>Datos comprimidos para <code>INSERT</code> y <code>ALTER</code> se replica (para obtener más información, consulte la documentación para <a href=../../../../sql_reference/statements/alter/#query_language_queries_alter>ALTER</a>).</p> <p><code>CREATE</code>, <code>DROP</code>, <code>ATTACH</code>, <code>DETACH</code> y <code>RENAME</code> las consultas se ejecutan en un único servidor y no se replican:</p> <ul> <li>El <code>CREATE TABLE</code> query crea una nueva tabla replicable en el servidor donde se ejecuta la consulta. Si esta tabla ya existe en otros servidores, agrega una nueva réplica.</li> <li>El <code>DROP TABLE</code> query elimina la réplica ubicada en el servidor donde se ejecuta la consulta.</li> <li>El <code>RENAME</code> query cambia el nombre de la tabla en una de las réplicas. En otras palabras, las tablas replicadas pueden tener diferentes nombres en diferentes réplicas.</li> </ul> <p>Uso de ClickHouse <a href=https://zookeeper.apache.org rel="external nofollow noreferrer">Apache ZooKeeper</a> para almacenar metainformación de réplicas. Utilice ZooKeeper versión 3.4.5 o posterior.</p> <p>Para utilizar la replicación, establezca los parámetros <a href=../../../../operations/server_configuration_parameters/settings/#server-settings_zookeeper>Zookeeper</a> sección de configuración del servidor.</p> <div class="admonition attention"> <p class=admonition-title>Atención</p> <p>No descuides la configuración de seguridad. ClickHouse soporta el <code>digest</code> <a href=https://zookeeper.apache.org/doc/current/zookeeperProgrammers.html#sc_ZooKeeperAccessControl rel="external nofollow noreferrer">Esquema de ACL</a> del subsistema de seguridad ZooKeeper.</p> </div> <p>Ejemplo de configuración de las direcciones del clúster ZooKeeper:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;zookeeper&gt;</span>
    <span class=nt>&lt;node</span> <span class=na>index=</span><span class=s>&quot;1&quot;</span><span class=nt>&gt;</span>
        <span class=nt>&lt;host&gt;</span>example1<span class=nt>&lt;/host&gt;</span>
        <span class=nt>&lt;port&gt;</span>2181<span class=nt>&lt;/port&gt;</span>
    <span class=nt>&lt;/node&gt;</span>
    <span class=nt>&lt;node</span> <span class=na>index=</span><span class=s>&quot;2&quot;</span><span class=nt>&gt;</span>
        <span class=nt>&lt;host&gt;</span>example2<span class=nt>&lt;/host&gt;</span>
        <span class=nt>&lt;port&gt;</span>2181<span class=nt>&lt;/port&gt;</span>
    <span class=nt>&lt;/node&gt;</span>
    <span class=nt>&lt;node</span> <span class=na>index=</span><span class=s>&quot;3&quot;</span><span class=nt>&gt;</span>
        <span class=nt>&lt;host&gt;</span>example3<span class=nt>&lt;/host&gt;</span>
        <span class=nt>&lt;port&gt;</span>2181<span class=nt>&lt;/port&gt;</span>
    <span class=nt>&lt;/node&gt;</span>
<span class=nt>&lt;/zookeeper&gt;</span>
</code></pre></div> <p>Puede especificar cualquier clúster ZooKeeper existente y el sistema utilizará un directorio en él para sus propios datos (el directorio se especifica al crear una tabla replicable).</p> <p>Si ZooKeeper no está establecido en el archivo de configuración, no puede crear tablas replicadas y las tablas replicadas existentes serán de solo lectura.</p> <p>ZooKeeper no se utiliza en <code>SELECT</code> consultas porque la replicación no afecta al rendimiento de <code>SELECT</code> y las consultas se ejecutan tan rápido como lo hacen para las tablas no replicadas. Al consultar tablas replicadas distribuidas, el comportamiento de ClickHouse se controla mediante la configuración <a href=../../../../operations/settings/settings/#settings-max_replica_delay_for_distributed_queries>max_replica_delay_for_distributed_queries</a> y <a href=../../../../operations/settings/settings/#settings-fallback_to_stale_replicas_for_distributed_queries>fallback_to_stale_replicas_for_distributed_queries</a>.</p> <p>Para cada <code>INSERT</code> consulta, aproximadamente diez entradas se agregan a ZooKeeper a través de varias transacciones. (Para ser más precisos, esto es para cada bloque de datos insertado; una consulta INSERT contiene un bloque o un bloque por <code>max_insert_block_size = 1048576</code> filas.) Esto conduce a latencias ligeramente más largas para <code>INSERT</code> en comparación con las tablas no replicadas. Pero si sigue las recomendaciones para insertar datos en lotes de no más de uno <code>INSERT</code> por segundo, no crea ningún problema. Todo el clúster ClickHouse utilizado para coordinar un clúster ZooKeeper tiene un total de varios cientos <code>INSERTs</code> por segundo. El rendimiento en las inserciones de datos (el número de filas por segundo) es tan alto como para los datos no replicados.</p> <p>Para clústeres muy grandes, puede usar diferentes clústeres de ZooKeeper para diferentes fragmentos. Sin embargo, esto no ha demostrado ser necesario en el Yandex.Clúster Metrica (aproximadamente 300 servidores).</p> <p>La replicación es asíncrona y multi-master. <code>INSERT</code> consultas (así como <code>ALTER</code>) se puede enviar a cualquier servidor disponible. Los datos se insertan en el servidor donde se ejecuta la consulta y, a continuación, se copian a los demás servidores. Debido a que es asincrónico, los datos insertados recientemente aparecen en las otras réplicas con cierta latencia. Si parte de las réplicas no está disponible, los datos se escriben cuando estén disponibles. Si hay una réplica disponible, la latencia es la cantidad de tiempo que tarda en transferir el bloque de datos comprimidos a través de la red.</p> <p>De forma predeterminada, una consulta INSERT espera la confirmación de la escritura de los datos de una sola réplica. Si los datos fue correctamente escrito a sólo una réplica y el servidor con esta réplica deja de existir, los datos almacenados se perderán. Para habilitar la confirmación de las escrituras de datos de varias réplicas, utilice <code>insert_quorum</code> opcion.</p> <p>Cada bloque de datos se escribe atómicamente. La consulta INSERT se divide en bloques hasta <code>max_insert_block_size = 1048576</code> filas. En otras palabras, si el <code>INSERT</code> consulta tiene menos de 1048576 filas, se hace atómicamente.</p> <p>Los bloques de datos se deduplican. Para varias escrituras del mismo bloque de datos (bloques de datos del mismo tamaño que contienen las mismas filas en el mismo orden), el bloque solo se escribe una vez. La razón de esto es en caso de fallas de red cuando la aplicación cliente no sabe si los datos se escribieron en la base de datos, por lo que <code>INSERT</code> consulta simplemente se puede repetir. No importa a qué réplica se enviaron los INSERT con datos idénticos. <code>INSERTs</code> son idempotentes. Los parámetros de desduplicación son controlados por <a href=../../../../operations/server_configuration_parameters/settings/#server_configuration_parameters-merge_tree>merge_tree</a> configuración del servidor.</p> <p>Durante la replicación, sólo los datos de origen que se van a insertar se transfieren a través de la red. La transformación de datos adicional (fusión) se coordina y se realiza en todas las réplicas de la misma manera. Esto minimiza el uso de la red, lo que significa que la replicación funciona bien cuando las réplicas residen en centros de datos diferentes. (Tenga en cuenta que la duplicación de datos en diferentes centros de datos es el objetivo principal de la replicación.)</p> <p>Puede tener cualquier número de réplicas de los mismos datos. El Yandex.Metrica utiliza doble replicación en producción. Cada servidor utiliza RAID-5 o RAID-6, y RAID-10 en algunos casos. Esta es una solución relativamente confiable y conveniente.</p> <p>El sistema supervisa la sincronicidad de los datos en las réplicas y puede recuperarse después de un fallo. La conmutación por error es automática (para pequeñas diferencias en los datos) o semiautomática (cuando los datos difieren demasiado, lo que puede indicar un error de configuración).</p> <h2 id=creating-replicated-tables>Creación de tablas replicadas<a class=headerlink href=#creating-replicated-tables title="Permanent link">&para;</a></h2> <p>El <code>Replicated</code> prefijo se agrega al nombre del motor de tabla. Por ejemplo:<code>ReplicatedMergeTree</code>.</p> <p><strong>Replicated*MergeTree parámetros</strong></p> <ul> <li><code>zoo_path</code> — The path to the table in ZooKeeper.</li> <li><code>replica_name</code> — The replica name in ZooKeeper.</li> </ul> <p>Ejemplo:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>table_name</span>
<span class=p>(</span>
    <span class=n>EventDate</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>CounterID</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=n>UserID</span> <span class=n>UInt32</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>ReplicatedMergeTree</span><span class=p>(</span><span class=s1>&#39;/clickhouse/tables/{layer}-{shard}/table_name&#39;</span><span class=p>,</span> <span class=s1>&#39;{replica}&#39;</span><span class=p>)</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>))</span>
<span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span>
</code></pre></div> <details> <p><summary>Ejemplo en sintaxis obsoleta</summary> </p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>table_name</span>
<span class=p>(</span>
    <span class=n>EventDate</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>CounterID</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=n>UserID</span> <span class=n>UInt32</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>ReplicatedMergeTree</span><span class=p>(</span><span class=s1>&#39;/clickhouse/tables/{layer}-{shard}/table_name&#39;</span><span class=p>,</span> <span class=s1>&#39;{replica}&#39;</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>),</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>),</span> <span class=n>EventTime</span><span class=p>),</span> <span class=mi>8192</span><span class=p>)</span>
</code></pre></div> </details> <p>Como muestra el ejemplo, estos parámetros pueden contener sustituciones entre llaves. Los valores sustituidos se toman de la ‘macros’ sección del archivo de configuración. Ejemplo:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;macros&gt;</span>
    <span class=nt>&lt;layer&gt;</span>05<span class=nt>&lt;/layer&gt;</span>
    <span class=nt>&lt;shard&gt;</span>02<span class=nt>&lt;/shard&gt;</span>
    <span class=nt>&lt;replica&gt;</span>example05-02-1.yandex.ru<span class=nt>&lt;/replica&gt;</span>
<span class=nt>&lt;/macros&gt;</span>
</code></pre></div> <p>La ruta de acceso a la tabla en ZooKeeper debe ser única para cada tabla replicada. Las tablas en diferentes fragmentos deben tener rutas diferentes.<br> En este caso, la ruta consta de las siguientes partes:</p> <p><code>/clickhouse/tables/</code> es el prefijo común. Recomendamos usar exactamente este.</p> <p><code>{layer}-{shard}</code> es el identificador de fragmento. En este ejemplo consta de dos partes, ya que el Yandex.Metrica clúster utiliza sharding de dos niveles. Para la mayoría de las tareas, puede dejar solo la sustitución {shard}, que se expandirá al identificador de fragmento.</p> <p><code>table_name</code> es el nombre del nodo de la tabla en ZooKeeper. Es una buena idea hacerlo igual que el nombre de la tabla. Se define explícitamente, porque a diferencia del nombre de la tabla, no cambia después de una consulta RENAME.<br> <em>HINT</em>: podría agregar un nombre de base de datos delante de <code>table_name</code> También. Nivel de Cifrado WEP <code>db_name.table_name</code></p> <p>El nombre de réplica identifica diferentes réplicas de la misma tabla. Puede usar el nombre del servidor para esto, como en el ejemplo. El nombre solo tiene que ser único dentro de cada fragmento.</p> <p>Puede definir los parámetros explícitamente en lugar de utilizar sustituciones. Esto podría ser conveniente para probar y para configurar clústeres pequeños. Sin embargo, no puede usar consultas DDL distribuidas (<code>ON CLUSTER</code> en este caso.</p> <p>Cuando se trabaja con clústeres grandes, se recomienda utilizar sustituciones porque reducen la probabilidad de error.</p> <p>Ejecute el <code>CREATE TABLE</code> consulta en cada réplica. Esta consulta crea una nueva tabla replicada o agrega una nueva réplica a una existente.</p> <p>Si agrega una nueva réplica después de que la tabla ya contenga algunos datos en otras réplicas, los datos se copiarán de las otras réplicas a la nueva después de ejecutar la consulta. En otras palabras, la nueva réplica se sincroniza con las demás.</p> <p>Para eliminar una réplica, ejecute <code>DROP TABLE</code>. However, only one replica is deleted – the one that resides on the server where you run the query.</p> <h2 id=recovery-after-failures>Recuperación después de fallos<a class=headerlink href=#recovery-after-failures title="Permanent link">&para;</a></h2> <p>Si ZooKeeper no está disponible cuando se inicia un servidor, las tablas replicadas cambian al modo de solo lectura. El sistema intenta conectarse periódicamente a ZooKeeper.</p> <p>Si ZooKeeper no está disponible durante un <code>INSERT</code>, o se produce un error al interactuar con ZooKeeper, se produce una excepción.</p> <p>Después de conectarse a ZooKeeper, el sistema comprueba si el conjunto de datos en el sistema de archivos local coincide con el conjunto de datos esperado (ZooKeeper almacena esta información). Si hay incoherencias menores, el sistema las resuelve sincronizando datos con las réplicas.</p> <p>Si el sistema detecta partes de datos rotas (con un tamaño incorrecto de archivos) o partes no reconocidas (partes escritas en el sistema de archivos pero no grabadas en ZooKeeper), las mueve al <code>detached</code> subdirectorio (no se eliminan). Las piezas que faltan se copian de las réplicas.</p> <p>Tenga en cuenta que ClickHouse no realiza ninguna acción destructiva, como eliminar automáticamente una gran cantidad de datos.</p> <p>Cuando el servidor se inicia (o establece una nueva sesión con ZooKeeper), solo verifica la cantidad y el tamaño de todos los archivos. Si los tamaños de los archivos coinciden pero los bytes se han cambiado en algún punto intermedio, esto no se detecta inmediatamente, sino solo cuando se intenta leer los datos <code>SELECT</code> consulta. La consulta produce una excepción sobre una suma de comprobación no coincidente o el tamaño de un bloque comprimido. En este caso, las partes de datos se agregan a la cola de verificación y se copian de las réplicas si es necesario.</p> <p>Si el conjunto local de datos difiere demasiado del esperado, se activa un mecanismo de seguridad. El servidor ingresa esto en el registro y se niega a iniciarse. La razón de esto es que este caso puede indicar un error de configuración, como si una réplica en un fragmento se configurara accidentalmente como una réplica en un fragmento diferente. Sin embargo, los umbrales para este mecanismo se establecen bastante bajos, y esta situación puede ocurrir durante la recuperación de falla normal. En este caso, los datos se restauran semiautomáticamente, mediante “pushing a button”.</p> <p>Para iniciar la recuperación, cree el nodo <code>/path_to_table/replica_name/flags/force_restore_data</code> en ZooKeeper con cualquier contenido, o ejecute el comando para restaurar todas las tablas replicadas:</p> <div class=codehilite><pre><span></span><code>sudo -u clickhouse touch /var/lib/clickhouse/flags/force_restore_data
</code></pre></div> <p>A continuación, reinicie el servidor. Al iniciar, el servidor elimina estos indicadores e inicia la recuperación.</p> <h2 id=recovery-after-complete-data-loss>Recuperación después de la pérdida completa de datos<a class=headerlink href=#recovery-after-complete-data-loss title="Permanent link">&para;</a></h2> <p>Si todos los datos y metadatos desaparecieron de uno de los servidores, siga estos pasos para la recuperación:</p> <ol> <li>Instale ClickHouse en el servidor. Defina correctamente las sustituciones en el archivo de configuración que contiene el identificador de fragmento y las réplicas, si las usa.</li> <li>Si tenía tablas no duplicadas que deben duplicarse manualmente en los servidores, copie sus datos desde una réplica (en el directorio <code>/var/lib/clickhouse/data/db_name/table_name/</code>).</li> <li>Copiar definiciones de tablas ubicadas en <code>/var/lib/clickhouse/metadata/</code> de una réplica. Si un identificador de fragmento o réplica se define explícitamente en las definiciones de tabla, corríjalo para que corresponda a esta réplica. (Como alternativa, inicie el servidor y <code>ATTACH TABLE</code> consultas que deberían haber estado en el .sql archivos en <code>/var/lib/clickhouse/metadata/</code>.)</li> <li>Para iniciar la recuperación, cree el nodo ZooKeeper <code>/path_to_table/replica_name/flags/force_restore_data</code> con cualquier contenido o ejecute el comando para restaurar todas las tablas replicadas: <code>sudo -u clickhouse touch /var/lib/clickhouse/flags/force_restore_data</code></li> </ol> <p>Luego inicie el servidor (reinicie, si ya se está ejecutando). Los datos se descargarán de las réplicas.</p> <p>Una opción de recuperación alternativa es eliminar información sobre la réplica perdida de ZooKeeper (<code>/path_to_table/replica_name</code>), luego vuelva a crear la réplica como se describe en “<a href=#creating-replicated-tables>Creación de tablas replicadas</a>”.</p> <p>No hay restricción en el ancho de banda de la red durante la recuperación. Tenga esto en cuenta si está restaurando muchas réplicas a la vez.</p> <h2 id=converting-from-mergetree-to-replicatedmergetree>La Conversión De Mergetree A Replicatedmergetree<a class=headerlink href=#converting-from-mergetree-to-replicatedmergetree title="Permanent link">&para;</a></h2> <p>Usamos el término <code>MergeTree</code> para referirse a todos los motores de mesa en el <code>MergeTree family</code>, lo mismo que para <code>ReplicatedMergeTree</code>.</p> <p>Si usted tenía un <code>MergeTree</code> tabla replicada manualmente, puede convertirla en una tabla replicada. Es posible que tenga que hacer esto si ya ha recopilado una gran cantidad de datos <code>MergeTree</code> y ahora desea habilitar la replicación.</p> <p>Si los datos difieren en varias réplicas, primero sincronícelos o elimínelos en todas las réplicas, excepto en una.</p> <p>Cambie el nombre de la tabla MergeTree existente y, a continuación, cree un <code>ReplicatedMergeTree</code> mesa con el antiguo nombre.<br> Mueva los datos de la tabla antigua a la <code>detached</code> subdirectorio dentro del directorio con los nuevos datos de la tabla (<code>/var/lib/clickhouse/data/db_name/table_name/</code>).<br> Luego ejecuta <code>ALTER TABLE ATTACH PARTITION</code> en una de las réplicas para agregar estas partes de datos al conjunto de trabajo.</p> <h2 id=converting-from-replicatedmergetree-to-mergetree>La Conversión De Replicatedmergetree A Mergetree<a class=headerlink href=#converting-from-replicatedmergetree-to-mergetree title="Permanent link">&para;</a></h2> <p>Cree una tabla MergeTree con un nombre diferente. Mueva todos los datos del directorio con el <code>ReplicatedMergeTree</code> datos de la tabla al directorio de datos de la nueva tabla. A continuación, elimine el <code>ReplicatedMergeTree</code> y reinicie el servidor.</p> <p>Si desea deshacerse de un <code>ReplicatedMergeTree</code> sin iniciar el servidor:</p> <ul> <li>Eliminar el correspondiente <code>.sql</code> archivo en el directorio de metadatos (<code>/var/lib/clickhouse/metadata/</code>).</li> <li>Eliminar la ruta correspondiente en ZooKeeper (<code>/path_to_table/replica_name</code>).</li> </ul> <p>Después de esto, puede iniciar el servidor, crear un <code>MergeTree</code> tabla, mueva los datos a su directorio y, a continuación, reinicie el servidor.</p> <h2 id=recovery-when-metadata-in-the-zookeeper-cluster-is-lost-or-damaged>Recuperación cuando los metadatos en el clúster de Zookeeper se pierden o se dañan<a class=headerlink href=#recovery-when-metadata-in-the-zookeeper-cluster-is-lost-or-damaged title="Permanent link">&para;</a></h2> <p>Si los datos de ZooKeeper se perdieron o se dañaron, puede guardar los datos moviéndolos a una tabla no duplicada como se describió anteriormente.</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Construido a partir de <a href=https://github.com/ClickHouse/ClickHouse/commit/25eae6abe035bda78634f17d15c9f05348d97aad rel="external nofollow noreferrer" target=_blank class=text-reset>25eae6abe0</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Tabla de contenido</label> <a href=#creating-replicated-tables title="Creación de tablas replicadas" class="nav-link text-wrap d-inline-block w-100"> Creación de tablas replicadas </a> <a href=#recovery-after-failures title="Recuperación después de fallos" class="nav-link text-wrap d-inline-block w-100"> Recuperación después de fallos </a> <a href=#recovery-after-complete-data-loss title="Recuperación después de la pérdida completa de datos" class="nav-link text-wrap d-inline-block w-100"> Recuperación después de la pérdida completa de datos </a> <a href=#converting-from-mergetree-to-replicatedmergetree title="La Conversión De Mergetree A Replicatedmergetree" class="nav-link text-wrap d-inline-block w-100"> La Conversión De Mergetree A Replicatedmergetree </a> <a href=#converting-from-replicatedmergetree-to-mergetree title="La Conversión De Replicatedmergetree A Mergetree" class="nav-link text-wrap d-inline-block w-100"> La Conversión De Replicatedmergetree A Mergetree </a> <a href=#recovery-when-metadata-in-the-zookeeper-cluster-is-lost-or-damaged title="Recuperación cuando los metadatos en el clúster de Zookeeper se pierden o se dañan" class="nav-link text-wrap d-inline-block w-100"> Recuperación cuando los metadatos en el clúster de Zookeeper se pierden o se dañan </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
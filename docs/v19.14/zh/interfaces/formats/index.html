<!DOCTYPE html><html lang=zh data-version=v19.14 data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>输入输出格式 - ClickHouse文档 v19.14</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="输入输出格式 - ClickHouse文档 v19.14"><meta property=og:description content="输入输出格式 ClickHouse 可以接受多种数据格式，可以在 (INSERT) 以及 (SELECT) 请求中使用。 下列表格列出了支持的数据格式以及在 (INSERT) 以及 (SELECT) 请求中使用它们的方式。 格式 INSER"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="输入输出格式 - ClickHouse文档 v19.14"><meta name=description content="输入输出格式 ClickHouse 可以接受多种数据格式，可以在 (INSERT) 以及 (SELECT) 请求中使用。 下列表格列出了支持的数据格式以及在 (INSERT) 以及 (SELECT) 请求中使用它们的方式。 格式 INSER"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> 输入输出格式 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/interfaces/formats.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/zh.svg alt=中文 title=中文 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v19.14/en/interfaces/formats/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v19.14/zh/interfaces/formats/ class="dropdown-item disabled"> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v19.14/es/interfaces/formats/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v19.14/fr/interfaces/formats/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v19.14/ru/interfaces/formats/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v19.14/ja/interfaces/formats/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v19.14/fa/interfaces/formats/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=多页或单页> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt=多页版本 title=多页版本> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt=单页版本 title=单页版本> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> 版本: <span class=text-light>v19.14</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/zh/ class=dropdown-item> <span class=text-light>最新消息</span> </a> <a href=/docs/v20.3/zh/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/zh/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/zh/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/zh/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/zh/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/zh/ class="dropdown-item disable">v19.14</a> <a href=/docs/v19.13/zh/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/zh/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/zh/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/zh/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/zh/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=介绍 class="nav-link text-light text-wrap dropdown-toggle px-0">介绍</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../ title=概貌 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概貌</a> <a href=../../introduction/distinctive_features/ title=ClickHouse的独特功能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse的独特功能</a> <a href=../../introduction/features_considered_disadvantages/ title=ClickHouse功能可被视为缺点 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse功能可被视为缺点</a> <a href=../../introduction/performance/ title=性能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">性能</a> <a href=../../introduction/ya_metrika_task/ title=Yandex.Metrica使用案例 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica使用案例</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=入门指南 class="nav-link text-light text-wrap dropdown-toggle px-0">入门指南</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/ title=部署运行 class="nav-link text-light text-wrap d-inline-block w-100 px-0">部署运行</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title=示例数据集 class="nav-link text-light text-wrap dropdown-toggle px-0">示例数据集</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/ontime/ title=航班飞行数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">航班飞行数据</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title=纽约市出租车数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">纽约市出租车数据</a> <a href=../../getting_started/example_datasets/amplab_benchmark/ title=AMPLab大数据基准测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab大数据基准测试</a> <a href=../../getting_started/example_datasets/wikistat/ title=维基访问数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">维基访问数据</a> <a href=../../getting_started/example_datasets/criteo/ title="Criteo TB级别点击日志" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Criteo TB级别点击日志</a> <a href=../../getting_started/example_datasets/star_schema/ title="Star Schema基准测试" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema基准测试</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=客户端 class="nav-link text-light text-wrap dropdown-toggle px-0">客户端</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../interfaces/cli/ title=命令行客户端接口 class="nav-link text-light text-wrap d-inline-block w-100 px-0">命令行客户端接口</a> <a href=../../interfaces/tcp/ title="原生客户端接口 (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">原生客户端接口 (TCP)</a> <a href=../../interfaces/http/ title="HTTP 客户端接口" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP 客户端接口</a> <a href=../../interfaces/formats/ title=输入输出格式 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">输入输出格式</a> <a href=../../interfaces/jdbc/ title="JDBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC 驱动</a> <a href=../../interfaces/odbc/ title="ODBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC 驱动</a> <a href=#sidebar-sidebar-3-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-8 title=第三方 class="nav-link text-light text-wrap dropdown-toggle px-0">第三方</a> <div id=sidebar-sidebar-3-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/client_libraries/ title=客户端库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端库</a> <a href=../../interfaces/third-party/integrations/ title=集成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">集成</a> <a href=../../interfaces/third-party/gui/ title=可视界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">可视界面</a> <a href=../../interfaces/third-party/proxy/ title=代理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">代理</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=数据类型 class="nav-link text-light text-wrap dropdown-toggle px-0">数据类型</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../data_types/boolean/ title="Boolean values" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean values</a> <a href=../../data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=../../data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-4-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-16 title=嵌套数据结构 class="nav-link text-light text-wrap dropdown-toggle px-0">嵌套数据结构</a> <div id=sidebar-sidebar-4-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=#sidebar-sidebar-4-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-17 title=特殊数据类型 class="nav-link text-light text-wrap dropdown-toggle px-0">特殊数据类型</a> <div id=sidebar-sidebar-4-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> </nav> </div> <a href=#sidebar-sidebar-4-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-18 title=Domain类型 class="nav-link text-light text-wrap dropdown-toggle px-0">Domain类型</a> <div id=sidebar-sidebar-4-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/domains/overview/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=数据库引擎 class="nav-link text-light text-wrap dropdown-toggle px-0">数据库引擎</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../database_engines/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=表引擎 class="nav-link text-light text-wrap dropdown-toggle px-0">表引擎</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title=MergeTree class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../operations/table_engines/replication/ title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a> <a href=../../operations/table_engines/custom_partitioning_key/ title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a> <a href=../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../operations/table_engines/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-6-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-3 title=Log class="nav-link text-light text-wrap dropdown-toggle px-0">Log</a> <div id=sidebar-sidebar-6-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/log_family/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../operations/table_engines/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../operations/table_engines/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../operations/table_engines/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=外部表引擎 class="nav-link text-light text-wrap dropdown-toggle px-0">外部表引擎</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../operations/table_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../operations/table_engines/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../operations/table_engines/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title=其他表引擎 class="nav-link text-light text-wrap dropdown-toggle px-0">其他表引擎</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../operations/table_engines/external_data/ title="External data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External data</a> <a href=../../operations/table_engines/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../operations/table_engines/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../operations/table_engines/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../operations/table_engines/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../operations/table_engines/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../operations/table_engines/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../operations/table_engines/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../operations/table_engines/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../operations/table_engines/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../operations/table_engines/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../operations/table_engines/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=SQL语法 class="nav-link text-light text-wrap dropdown-toggle px-0">SQL语法</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../query_language/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../query_language/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../query_language/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../query_language/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../query_language/misc/ title=其他类型的查询 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他类型的查询</a> <a href=#sidebar-sidebar-7-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-8 title=函数 class="nav-link text-light text-wrap dropdown-toggle px-0">函数</a> <div id=sidebar-sidebar-7-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/functions/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../query_language/functions/arithmetic_functions/ title=算术函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算术函数</a> <a href=../../query_language/functions/comparison_functions/ title=比较函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比较函数</a> <a href=../../query_language/functions/logical_functions/ title=逻辑函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">逻辑函数</a> <a href=../../query_language/functions/type_conversion_functions/ title=类型转换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">类型转换函数</a> <a href=../../query_language/functions/date_time_functions/ title=时间日期函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">时间日期函数</a> <a href=../../query_language/functions/string_functions/ title=字符串函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串函数</a> <a href=../../query_language/functions/string_search_functions/ title=字符串搜索函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串搜索函数</a> <a href=../../query_language/functions/string_replace_functions/ title=字符串替换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串替换函数</a> <a href=../../query_language/functions/conditional_functions/ title="条件函数 " class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件函数 </a> <a href=../../query_language/functions/math_functions/ title=数学函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学函数</a> <a href=../../query_language/functions/rounding_functions/ title=取整函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">取整函数</a> <a href=../../query_language/functions/array_functions/ title=数组函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数组函数</a> <a href=../../query_language/functions/splitting_merging_functions/ title=字符串拆分合并函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串拆分合并函数</a> <a href=../../query_language/functions/bit_functions/ title=位操作函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位操作函数</a> <a href=../../query_language/functions/bitmap_functions/ title=位图函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位图函数</a> <a href=../../query_language/functions/hash_functions/ title=Hash函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash函数</a> <a href=../../query_language/functions/random_functions/ title=随机函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">随机函数</a> <a href=../../query_language/functions/encoding_functions/ title=编码函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">编码函数</a> <a href=../../query_language/functions/uuid_functions/ title=UUID函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID函数</a> <a href=../../query_language/functions/url_functions/ title=URL函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL函数</a> <a href=../../query_language/functions/ip_address_functions/ title=IP函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IP函数</a> <a href=../../query_language/functions/json_functions/ title=JSON函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON函数</a> <a href=../../query_language/functions/higher_order_functions/ title=高阶函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">高阶函数</a> <a href=../../query_language/functions/ext_dict_functions/ title=字典函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典函数</a> <a href=../../query_language/functions/ym_dict_functions/ title=Yandex.Metrica字典函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica字典函数</a> <a href=../../query_language/functions/in_functions/ title=IN运算符相关函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN运算符相关函数</a> <a href=../../query_language/functions/array_join/ title=arrayJoin函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin函数</a> <a href=../../query_language/functions/geo/ title=GEO函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">GEO函数</a> <a href=../../query_language/functions/functions_for_nulls/ title=Nullable处理函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable处理函数</a> <a href=../../query_language/functions/machine_learning_functions/ title=机器学习函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">机器学习函数</a> <a href=../../query_language/functions/other_functions/ title=其他函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他函数</a> </nav> </div> <a href=#sidebar-sidebar-7-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-9 title=聚合函数 class="nav-link text-light text-wrap dropdown-toggle px-0">聚合函数</a> <div id=sidebar-sidebar-7-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/agg_functions/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../query_language/agg_functions/reference/ title=函数列表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">函数列表</a> <a href=../../query_language/agg_functions/combinators/ title=聚合函数组合子 class="nav-link text-light text-wrap d-inline-block w-100 px-0">聚合函数组合子</a> <a href=../../query_language/agg_functions/parametric_functions/ title=参数化聚合函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参数化聚合函数</a> </nav> </div> <a href=#sidebar-sidebar-7-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-10 title=表引擎函数 class="nav-link text-light text-wrap dropdown-toggle px-0">表引擎函数</a> <div id=sidebar-sidebar-7-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/table_functions/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../query_language/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../query_language/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../query_language/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../query_language/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../query_language/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../query_language/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../query_language/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../query_language/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> </nav> </div> <a href=#sidebar-sidebar-7-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-11 title=字典 class="nav-link text-light text-wrap dropdown-toggle px-0">字典</a> <div id=sidebar-sidebar-7-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/dicts/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=#sidebar-sidebar-7-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-11-2 title=外部字典 class="nav-link text-light text-wrap dropdown-toggle px-0">外部字典</a> <div id=sidebar-sidebar-7-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/dicts/external_dicts/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../query_language/dicts/external_dicts_dict/ title=配置外部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置外部字典</a> <a href=../../query_language/dicts/external_dicts_dict_layout/ title=字典的内存布局 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典的内存布局</a> <a href=../../query_language/dicts/external_dicts_dict_lifetime/ title=字典的刷新策略 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典的刷新策略</a> <a href=../../query_language/dicts/external_dicts_dict_sources/ title=字典的外部数据源 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典的外部数据源</a> <a href=../../query_language/dicts/external_dicts_dict_structure/ title=字典的键和字段值 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典的键和字段值</a> </nav> </div> <a href=../../query_language/dicts/internal_dicts/ title=内部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部字典</a> </nav> </div> <a href=../../query_language/operators/ title=操作符 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作符</a> <a href=../../query_language/syntax/ title=语法说明 class="nav-link text-light text-wrap d-inline-block w-100 px-0">语法说明</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=运维 class="nav-link text-light text-wrap dropdown-toggle px-0">运维</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../operations/requirements/ title=环境要求 class="nav-link text-light text-wrap d-inline-block w-100 px-0">环境要求</a> <a href=../../operations/monitoring/ title=监控 class="nav-link text-light text-wrap d-inline-block w-100 px-0">监控</a> <a href=../../operations/troubleshooting/ title=故障排查 class="nav-link text-light text-wrap d-inline-block w-100 px-0">故障排查</a> <a href=../../operations/tips/ title=使用建议 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用建议</a> <a href=../../operations/update/ title=版本升级 class="nav-link text-light text-wrap d-inline-block w-100 px-0">版本升级</a> <a href=../../operations/access_rights/ title=访问权限控制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">访问权限控制</a> <a href=../../operations/backup/ title=数据备份 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据备份</a> <a href=../../operations/configuration_files/ title=配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置文件</a> <a href=../../operations/quotas/ title=配额 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配额</a> <a href=../../operations/system_tables/ title=系统表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统表</a> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title=Server参数配置 class="nav-link text-light text-wrap dropdown-toggle px-0">Server参数配置</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_settings/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../operations/server_settings/settings/ title=Server参数说明 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server参数说明</a> </nav> </div> <a href=#sidebar-sidebar-8-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-13 title=Settings配置 class="nav-link text-light text-wrap dropdown-toggle px-0">Settings配置</a> <div id=sidebar-sidebar-8-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../operations/settings/permissions_for_queries/ title=查询权限管理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询权限管理</a> <a href=../../operations/settings/query_complexity/ title=查询复杂性的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询复杂性的限制</a> <a href=../../operations/settings/settings/ title=Setting列表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Setting列表</a> <a href=../../operations/settings/settings_profiles/ title=Setting配置组 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Setting配置组</a> <a href=../../operations/settings/settings_users/ title=用户配置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用户配置</a> <a href=../../operations/settings/constraints_on_settings/ title=Settings的约束 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings的约束</a> </nav> </div> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=常用工具 class="nav-link text-light text-wrap dropdown-toggle px-0">常用工具</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utils/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../operations/utils/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utils/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=常见问题 class="nav-link text-light text-wrap dropdown-toggle px-0">常见问题</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/general/ title=一般的问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的问题</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=开发者指南 class="nav-link text-light text-wrap dropdown-toggle px-0">开发者指南</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/architecture/ title=ClickHouse架构概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse架构概述</a> <a href=../../development/build/ title=如何在Linux中编译ClickHouse class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux中编译ClickHouse</a> <a href=../../development/build_osx/ title="如何在Mac OS X中编译ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Mac OS X中编译ClickHouse</a> <a href=../../development/style/ title=如何编写C++代码 class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何编写C++代码</a> <a href=../../development/tests/ title=如何运行ClickHouse测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何运行ClickHouse测试</a> <a href=../../development/contrib/ title=使用的第三方库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用的第三方库</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=新功能特性 class="nav-link text-light text-wrap dropdown-toggle px-0">新功能特性</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../roadmap/ title=路线图 class="nav-link text-light text-wrap d-inline-block w-100 px-0">路线图</a> <a href=../../changelog/ title=更新日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">更新日志</a> <a href=../../security_changelog/ title=安全更改日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">安全更改日志</a> </nav> </div> <a href=../../single/clickhouse_zh.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF版本 title=PDF版本 height=24 class="d-block mr-1 float-left"><div>PDF版本</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=formats>输入输出格式<a class=headerlink href=#formats title="Permanent link">&para;</a></h1> <p>ClickHouse 可以接受多种数据格式，可以在 (<code>INSERT</code>) 以及 (<code>SELECT</code>) 请求中使用。</p> <p>下列表格列出了支持的数据格式以及在 (<code>INSERT</code>) 以及 (<code>SELECT</code>) 请求中使用它们的方式。</p> <table> <thead> <tr> <th>格式</th> <th>INSERT</th> <th>SELECT</th> </tr> </thead> <tbody> <tr> <td><a href=#tabseparated>TabSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedraw>TabSeparatedRaw</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnames>TabSeparatedWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#format-template>Template</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#templateignorespaces>TemplateIgnoreSpaces</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#csv>CSV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#csvwithnames>CSVWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-values>Values</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#vertical>Vertical</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#verticalraw>VerticalRaw</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#json>JSON</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompact>JSONCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoneachrow>JSONEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tskv>TSKV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#pretty>Pretty</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompact>PrettyCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompactmonoblock>PrettyCompactMonoBlock</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettynoescapes>PrettyNoEscapes</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettyspace>PrettySpace</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#rowbinary>RowBinary</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#native>Native</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#null>Null</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#xml>XML</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#capnproto>CapnProto</a></td> <td>✔</td> <td>✔</td> </tr> </tbody> </table> <h2 id=tabseparated>TabSeparated<a class=headerlink href=#tabseparated title="Permanent link">&para;</a></h2> <p>在 TabSeparated 格式中，数据按行写入。每行包含由制表符分隔的值。除了行中的最后一个值（后面紧跟换行符）之外，每个值都跟随一个制表符。 在任何地方都可以使用严格的 Unix 命令行。最后一行还必须在最后包含换行符。值以文本格式编写，不包含引号，并且要转义特殊字符。</p> <p>这种格式也可以用 <code>TSV</code> 来表示。</p> <p>TabSeparated 格式非常方便用于自定义程序或脚本处理数据。HTTP 客户端接口默认会用这种格式，命令行客户端批量模式下也会用这种格式。这种格式允许在不同数据库之间传输数据。例如，从 MYSQL 中导出数据然后导入到 ClickHouse 中，反之亦然。</p> <p>TabSeparated 格式支持输出数据总值（当使用 WITH TOTALS） 以及极值（当 'extremes' 设置是1）。这种情况下，总值和极值输出在主数据的后面。主要的数据，总值，极值会以一个空行隔开，例如：</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>TabSeparated</span><span class=o>``</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>17</span>      <span class=mi>1406958</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>18</span>      <span class=mi>1383658</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>19</span>      <span class=mi>1405797</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>20</span>      <span class=mi>1353623</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>21</span>      <span class=mi>1245779</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>22</span>      <span class=mi>1031592</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>23</span>      <span class=mi>1046491</span>

<span class=mi>0000</span><span class=o>-</span><span class=mi>00</span><span class=o>-</span><span class=mi>00</span>      <span class=mi>8873898</span>

<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>17</span>      <span class=mi>1031592</span>
<span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>23</span>      <span class=mi>1406958</span>
</code></pre></div> <h3 id=shu-ju-jie-xi-fang-shi>数据解析方式<a class=headerlink href=#shu-ju-jie-xi-fang-shi title="Permanent link">&para;</a></h3> <p>整数以十进制形式写入。数字在开头可以包含额外的 <code>+</code> 字符（解析时忽略，格式化时不记录）。非负数不能包含负号。 读取时，允许将空字符串解析为零，或者（对于带符号的类型）将仅包含负号的字符串解析为零。 不符合相应数据类型的数字可能会被解析为不同的数字，而不会显示错误消息。</p> <p>浮点数以十进制形式写入。点号用作小数点分隔符。支持指数等符号，如'inf'，'+ inf'，'-inf'和'nan'。 浮点数的输入可以以小数点开始或结束。<br> 格式化的时候，浮点数的精确度可能会丢失。<br> 解析的时候，没有严格需要去读取与机器可以表示的最接近的数值。</p> <p>日期会以 YYYY-MM-DD 格式写入和解析，但会以任何字符作为分隔符。<br> 带时间的日期会以 YYYY-MM-DD hh:mm:ss 格式写入和解析，但会以任何字符作为分隔符。<br> 这一切都发生在客户端或服务器启动时的系统时区（取决于哪一种格式的数据）。对于具有时间的日期，夏时制时间未指定。 因此，如果转储在夏令时中有时间，则转储不会明确地匹配数据，解析将选择两者之一。<br> 在读取操作期间，不正确的日期和具有时间的日期可以使用自然溢出或空日期和时间进行分析，而不会出现错误消息。</p> <p>有个例外情况，Unix 时间戳格式（10个十进制数字）也支持使用时间解析日期。结果不是时区相关的。格式 YYYY-MM-DD hh:mm:ss和 NNNNNNNNNN 会自动区分。</p> <p>字符串以反斜线转义的特殊字符输出。 以下转义序列用于输出：<code>\b</code>，<code>\f</code>，<code>\r</code>，<code>\n</code>，<code>\t</code>，<code>\0</code>，<code>\'</code>，<code>\\</code>。 解析还支持<code>\a</code>，<code>\v</code>和<code>\xHH</code>（十六进制转义字符）和任何<code>\c</code>字符，其中<code>c</code>是任何字符（这些序列被转换为<code>c</code>）。 因此，读取数据支持可以将换行符写为<code>\n</code>或<code>\</code>的格式，或者换行。例如，字符串 <code>Hello world</code> 在单词之间换行而不是空格可以解析为以下任何形式：</p> <div class=codehilite><pre><span></span><code><span class=n>Hello</span><span class=err>\</span><span class=n>nworld</span>

<span class=n>Hello</span><span class=err>\</span>
<span class=n>world</span>
</code></pre></div> <p>第二种形式是支持的，因为 MySQL 读取 tab-separated 格式数据集的时候也会使用它。</p> <p>在 TabSeparated 格式中传递数据时需要转义的最小字符集为：Tab，换行符（LF）和反斜杠。</p> <p>只有一小组符号会被转义。你可以轻易地找到一个字符串值，但这不会正常在你的终端显示。</p> <p>数组写在方括号内的逗号分隔值列表中。 通常情况下，数组中的数字项目会被拼凑，但日期，带时间的日期以及字符串将使用与上面相同的转义规则用单引号引起来。</p> <p><a href=../../query_language/syntax/ >NULL</a> 将输出为 <code>\N</code>。</p> <h2 id=tabseparatedraw>TabSeparatedRaw<a class=headerlink href=#tabseparatedraw title="Permanent link">&para;</a></h2> <p>与 <code>TabSeparated</code> 格式不一样的是，行数据是不会被转义的。<br> 该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <p>这种格式也可以使用名称 <code>TSVRaw</code> 来表示。</p> <h2 id=tabseparatedwithnames>TabSeparatedWithNames<a class=headerlink href=#tabseparatedwithnames title="Permanent link">&para;</a></h2> <p>与 <code>TabSeparated</code> 格式不一样的是，第一行会显示列的名称。<br> 在解析过程中，第一行完全被忽略。您不能使用列名来确定其位置或检查其正确性。<br> （未来可能会加入解析头行的功能）</p> <p>这种格式也可以使用名称 <code>TSVWithNames</code> 来表示。</p> <h2 id=tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes<a class=headerlink href=#tabseparatedwithnamesandtypes title="Permanent link">&para;</a></h2> <p>与 <code>TabSeparated</code> 格式不一样的是，第一行会显示列的名称，第二行会显示列的类型。<br> 在解析过程中，第一行和第二行完全被忽略。</p> <p>这种格式也可以使用名称 <code>TSVWithNamesAndTypes</code> 来表示。</p> <h2 id=format-template>Template<a class=headerlink href=#format-template title="Permanent link">&para;</a></h2> <p>This format allows to specify a custom format string with placeholders for values with specified escaping rule.</p> <p>It uses settings <code>format_schema</code>, <code>format_schema_rows</code>, <code>format_schema_rows_between_delimiter</code> and some settings of other formats (e.g. <code>output_format_json_quote_64bit_integers</code> when using <code>JSON</code> escaping, see further)</p> <p>Format string <code>format_schema_rows</code> specifies rows format with the following syntax:</p> <p><code>delimiter_1${column_1:serializeAs_1}delimiter_2${column_2:serializeAs_2} ... delimiter_N</code>,</p> <p>where <code>delimiter_i</code> is a delimiter between values (<code>$</code> symbol can be escaped as <code>$$</code>), <br> <code>column_i</code> is a name of a column whose values are to be selected or inserted (if empty, then column will be skipped), <br> <code>serializeAs_i</code> is an escaping rule for the column values. The following escaping rules are supported:</p> <ul> <li><code>CSV</code>, <code>JSON</code>, <code>XML</code> (similarly to the formats of the same names)</li> <li><code>Escaped</code> (similarly to <code>TSV</code>)</li> <li><code>Quoted</code> (similarly to <code>Values</code>)</li> <li><code>Raw</code> (without escaping, similarly to <code>TSVRaw</code>)</li> <li><code>None</code> (no escaping rule, see further)</li> </ul> <p>If escaping rule is omitted, then<code>None</code> will be used. <code>XML</code> and <code>Raw</code> are suitable only for output.</p> <p>So, for the following format string:</p> <div class=codehilite><pre><span></span><code>`Search phrase: <span class=cp>${</span><span class=n>SearchPhrase</span><span class=p>:</span><span class=n>Quoted</span><span class=cp>}</span>, count: <span class=cp>${</span><span class=n>c</span><span class=p>:</span><span class=n>Escaped</span><span class=cp>}</span>, ad price: $$${price:JSON};`
</code></pre></div> <p>the values of <code>SearchPhrase</code>, <code>c</code> and <code>price</code> columns, which are escaped as <code>Quoted</code>, <code>Escaped</code> and <code>JSON</code> will be printed (for select) or will be expected (for insert) between <code>Search phrase:</code>, <code>, count:</code>, <code>, ad price: $</code> and <code>;</code> delimiters respectively. For example:</p> <p><code>Search phrase: 'bathroom interior design', count: 2166, ad price: $3;</code></p> <p>The <code>format_schema_rows_between_delimiter</code> setting specifies delimiter between rows, which is printed (or expected) after every row except the last one (<code>\n</code> by default)</p> <p>Format string <code>format_schema</code> has the same syntax as <code>format_schema_rows</code> and allows to specify a prefix, a suffix and a way to print some additional information. It contains the following placeholders instead of column names:</p> <ul> <li><code>data</code> is the rows with data in <code>format_schema_rows</code> format, separated by <code>format_schema_rows_between_delimiter</code>. This placeholder must be the first placeholder in the format string.</li> <li><code>totals</code> is the row with total values in <code>format_schema_rows</code> format (when using WITH TOTALS)</li> <li><code>min</code> is the row with minimum values in <code>format_schema_rows</code> format (when extremes is set to 1)</li> <li><code>max</code> is the row with maximum values in <code>format_schema_rows</code> format (when extremes is set to 1)</li> <li><code>rows</code> is the total number of output rows</li> <li><code>rows_before_limit</code> is the minimal number of rows there would have been without LIMIT. Output only if the query contains LIMIT. If the query contains GROUP BY, rows_before_limit_at_least is the exact number of rows there would have been without a LIMIT.</li> <li><code>time</code> is the request execution time in seconds</li> <li><code>rows_read</code> is the number of rows have been read</li> <li><code>bytes_read</code> is the number of bytes (uncompressed) have been read</li> </ul> <p>The placeholders <code>data</code>, <code>totals</code>, <code>min</code> and <code>max</code> must not have escaping rule specified (or <code>None</code> must be specified explicitly). The remaining placeholders may have any escaping rule specified.<br> If the <code>format_schema</code> setting is an empty string, <code>${data}</code> is used as default value.<br> For insert queries format allows to skip some columns or some fields if prefix or suffix (see example).</p> <p><code>Select</code> example:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span>
<span class=n>FORMAT</span> <span class=k>Template</span> 
<span class=n>SETTINGS</span> <span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;&lt;!DOCTYPE HTML&gt;</span>
<span class=s1>&lt;html&gt; &lt;head&gt; &lt;title&gt;Search phrases&lt;/title&gt; &lt;/head&gt;</span>
<span class=s1> &lt;body&gt;</span>
<span class=s1>  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Search phrases&lt;/caption&gt;</span>
<span class=s1>    &lt;tr&gt; &lt;th&gt;Search phrase&lt;/th&gt; &lt;th&gt;Count&lt;/th&gt; &lt;/tr&gt;</span>
<span class=s1>    ${data}</span>
<span class=s1>  &lt;/table&gt;</span>
<span class=s1>  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Max&lt;/caption&gt;</span>
<span class=s1>    ${max}</span>
<span class=s1>  &lt;/table&gt;</span>
<span class=s1>  &lt;b&gt;Processed ${rows_read:XML} rows in ${time:XML} sec&lt;/b&gt;</span>
<span class=s1> &lt;/body&gt;</span>
<span class=s1>&lt;/html&gt;&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;&lt;tr&gt; &lt;td&gt;${SearchPhrase:XML}&lt;/td&gt; &lt;td&gt;${с:XML}&lt;/td&gt; &lt;/tr&gt;&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>&#39;\n    &#39;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>&quot;1&quot;</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Search phrase<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Count<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8267016<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>bathroom interior design<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>2166<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>yandex<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1655<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>spring 2014 fashion<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1549<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>freeform photos<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1480<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>&quot;1&quot;</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Max<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8873898<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>Processed 3095973 rows in 0.1569913 sec<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
 <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <p><code>Insert</code> example:</p> <div class=codehilite><pre><span></span><code><span class=err>Some header</span>
<span class=err>Page views: 5, User id: 4324182021466249494, Useless field: hello, Duration: 146, Sign: -1</span>
<span class=err>Page views: 6, User id: 4324182021466249494, Useless field: world, Duration: 185, Sign: 1</span>
<span class=err>Total rows: 2</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>UserActivity</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span> 
<span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;Some header\n${data}\nTotal rows: ${:CSV}\n&#39;</span><span class=p>,</span> 
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;Page views: ${PageViews:CSV}, User id: ${UserID:CSV}, Useless field: ${:CSV}, Duration: ${Duration:CSV}, Sign: ${Sign:CSV}&#39;</span>
</code></pre></div> <p><code>PageViews</code>, <code>UserID</code>, <code>Duration</code> and <code>Sign</code> inside placeholders are names of columns in the table. Values after <code>Useless field</code> in rows and after <code>\nTotal rows:</code> in suffix will be ignored.<br> All delimiters in the input data must be strictly equal to delimiters in specified format strings.</p> <h2 id=templateignorespaces>TemplateIgnoreSpaces<a class=headerlink href=#templateignorespaces title="Permanent link">&para;</a></h2> <p>This format is suitable only for input.<br> Similar to <code>Template</code>, but skips whitespace characters between delimiters and values in the input stream. However, if format strings contain whitespace characters, these characters will be expected in the input stream. Also allows to specify empty placeholders (<code>${}</code> or <code>${:None}</code>) to split some delimiter into separate parts to ignore spaces between them. Such placeholders are used only for skipping whitespace characters. <br> It's possible to read <code>JSON</code> using this format, if values of columns have the same order in all rows. For example, the following request can be used for inserting data from output example of format <a href=#json>JSON</a>:</p> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=k>table_name</span> <span class=n>FORMAT</span> <span class=n>TemplateIgnoreSpaces</span> <span class=n>SETTINGS</span>
<span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;{${}&quot;meta&quot;${}:${:JSON},${}&quot;data&quot;${}:${}[${data}]${},${}&quot;totals&quot;${}:${:JSON},${}&quot;extremes&quot;${}:${:JSON},${}&quot;rows&quot;${}:${:JSON},${}&quot;rows_before_limit_at_least&quot;${}:${:JSON}${}}&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;{${}&quot;SearchPhrase&quot;${}:${}${phrase:JSON}${},${}&quot;c&quot;${}:${}${cnt:JSON}${}}&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>&#39;,&#39;</span>
</code></pre></div> <h2 id=tskv>TSKV<a class=headerlink href=#tskv title="Permanent link">&para;</a></h2> <p>与 <code>TabSeparated</code> 格式类似，但它输出的是 <code>name=value</code> 的格式。名称会和 <code>TabSeparated</code> 格式一样被转义，<code>=</code> 字符也会被转义。</p> <div class=codehilite><pre><span></span><code><span class=err>SearchPhrase=   count()=8267016</span>
<span class=err>SearchPhrase=bathroom interior design    count()=2166</span>
<span class=err>SearchPhrase=yandex     count()=1655</span>
<span class=err>SearchPhrase=2014 spring fashion    count()=1549</span>
<span class=err>SearchPhrase=freeform photos       count()=1480</span>
<span class=err>SearchPhrase=angelina jolie    count()=1245</span>
<span class=err>SearchPhrase=omsk       count()=1112</span>
<span class=err>SearchPhrase=photos of dog breeds    count()=1091</span>
<span class=err>SearchPhrase=curtain designs        count()=1064</span>
<span class=err>SearchPhrase=baku       count()=1000</span>
</code></pre></div> <p><a href=../../query_language/syntax/ >NULL</a> 输出为 <code>\N</code>。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>TSKV</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>x=1 y=\N</span>
</code></pre></div> <p>当有大量的小列时，这种格式是低效的，通常没有理由使用它。它被用于 Yandex 公司的一些部门。</p> <p>数据的输出和解析都支持这种格式。对于解析，任何顺序都支持不同列的值。可以省略某些值，用 <code>-</code> 表示， 它们被视为等于它们的默认值。在这种情况下，零和空行被用作默认值。作为默认值，不支持表中指定的复杂值。</p> <p>对于不带等号或值，可以用附加字段 <code>tskv</code> 来表示，这种在解析上是被允许的。这样的话该字段被忽略。</p> <h2 id=csv>CSV<a class=headerlink href=#csv title="Permanent link">&para;</a></h2> <p>按逗号分隔的数据格式(<a href=https://tools.ietf.org/html/rfc4180 rel="external nofollow noreferrer">RFC</a>)。</p> <p>格式化的时候，行是用双引号括起来的。字符串中的双引号会以两个双引号输出，除此之外没有其他规则来做字符转义了。日期和时间也会以双引号包括。数字的输出不带引号。值由一个单独的字符隔开，这个字符默认是 <code>,</code>。行使用 Unix 换行符（LF）分隔。 数组序列化成 CSV 规则如下：首先将数组序列化为 TabSeparated 格式的字符串，然后将结果字符串用双引号包括输出到 CSV。CSV 格式的元组被序列化为单独的列（即它们在元组中的嵌套关系会丢失）。</p> <div class=codehilite><pre><span></span><code><span class=err>clickhouse-client --format_csv_delimiter=&quot;|&quot; --query=&quot;INSERT INTO test.csv FORMAT CSV&quot; &lt; data.csv</span>
</code></pre></div> <p>&ast;默认情况下间隔符是 <code>,</code> ，在 <a href=../../operations/settings/settings/#settings-format_csv_delimiter>format_csv_delimiter</a> 中可以了解更多间隔符配置。</p> <p>解析的时候，可以使用或不使用引号来解析所有值。支持双引号和单引号。行也可以不用引号排列。 在这种情况下，它们被解析为逗号或换行符（CR 或 LF）。在解析不带引号的行时，若违反 RFC 规则，会忽略前导和尾随的空格和制表符。 对于换行，全部支持 Unix（LF），Windows（CR LF）和 Mac OS Classic（CR LF）。</p> <p><code>NULL</code> 将输出为 <code>\N</code>。</p> <p>CSV 格式是和 TabSeparated 一样的方式输出总数和极值。</p> <h2 id=csvwithnames>CSVWithNames<a class=headerlink href=#csvwithnames title="Permanent link">&para;</a></h2> <p>会输出带头部行，和 <code>TabSeparatedWithNames</code> 一样。</p> <h2 id=json>JSON<a class=headerlink href=#json title="Permanent link">&para;</a></h2> <p>以 JSON 格式输出数据。除了数据表之外，它还输出列名称和类型以及一些附加信息：输出行的总数以及在没有 LIMIT 时可以输出的行数。 例：</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=n>JSON</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=p>{</span>
        <span class=nt>&quot;meta&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SearchPhrase&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;String&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;c&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;UInt64&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;data&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8267016&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;bathroom interior design&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;2166&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;yandex&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1655&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;spring 2014 fashion&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1549&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;freeform photos&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1480&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;totals&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8873898&quot;</span>
        <span class=p>},</span>

        <span class=nt>&quot;extremes&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;min&quot;</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1480&quot;</span>
                <span class=p>},</span>
                <span class=nt>&quot;max&quot;</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8267016&quot;</span>
                <span class=p>}</span>
        <span class=p>},</span>

        <span class=nt>&quot;rows&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>&quot;rows_before_limit_at_least&quot;</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</code></pre></div> <p>JSON 与 JavaScript 兼容。为了确保这一点，一些字符被另外转义：斜线<code>/</code>被转义为<code>\/</code>; 替代的换行符 <code>U+2028</code> 和 <code>U+2029</code> 会打断一些浏览器解析，它们会被转义为 <code>\uXXXX</code>。 ASCII 控制字符被转义：退格，换页，换行，回车和水平制表符被替换为<code>\b</code>，<code>\f</code>，<code>\n</code>，<code>\r</code>，<code>\t</code> 作为使用<code>\uXXXX</code>序列的00-1F范围内的剩余字节。 无效的 UTF-8 序列更改为替换字符 ，因此输出文本将包含有效的 UTF-8 序列。 为了与 JavaScript 兼容，默认情况下，Int64 和 UInt64 整数用双引号引起来。要除去引号，可以将配置参数 output_format_json_quote_64bit_integers 设置为0。</p> <p><code>rows</code> – 结果输出的行数。</p> <p><code>rows_before_limit_at_least</code> 去掉 LIMIT 过滤后的最小行总数。 只会在查询包含 LIMIT 条件时输出。<br> 若查询包含 GROUP BY，rows_before_limit_at_least 就是去掉 LIMIT 后过滤后的准确行数。</p> <p><code>totals</code> – 总值 （当使用 TOTALS 条件时）。</p> <p><code>extremes</code> – 极值 （当 extremes 设置为 1时）。</p> <p>该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <p>ClickHouse 支持 <a href=../../query_language/syntax/ >NULL</a>, 在 JSON 格式中以 <code>null</code> 输出来表示.</p> <p>参考 JSONEachRow 格式。</p> <h2 id=jsoncompact>JSONCompact<a class=headerlink href=#jsoncompact title="Permanent link">&para;</a></h2> <p>与 JSON 格式不同的是它以数组的方式输出结果，而不是以结构体。</p> <p>示例：</p> <div class=codehilite><pre><span></span><code><span class=p>{</span>
        <span class=nt>&quot;meta&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SearchPhrase&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;String&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;c&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;UInt64&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;data&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=s2>&quot;8267016&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;bathroom interior design&quot;</span><span class=p>,</span> <span class=s2>&quot;2166&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;yandex&quot;</span><span class=p>,</span> <span class=s2>&quot;1655&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;fashion trends spring 2014&quot;</span><span class=p>,</span> <span class=s2>&quot;1549&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;freeform photo&quot;</span><span class=p>,</span> <span class=s2>&quot;1480&quot;</span><span class=p>]</span>
        <span class=p>],</span>

        <span class=nt>&quot;totals&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;8873898&quot;</span><span class=p>],</span>

        <span class=nt>&quot;extremes&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;1480&quot;</span><span class=p>],</span>
                <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;8267016&quot;</span><span class=p>]</span>
        <span class=p>},</span>

        <span class=nt>&quot;rows&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>&quot;rows_before_limit_at_least&quot;</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</code></pre></div> <p>这种格式仅仅适用于输出结果集，而不适用于解析（将数据插入到表中）。<br> 参考 <code>JSONEachRow</code> 格式。</p> <h2 id=jsoneachrow>JSONEachRow<a class=headerlink href=#jsoneachrow title="Permanent link">&para;</a></h2> <p>将数据结果每一行以 JSON 结构体输出（换行分割 JSON 结构体）。</p> <div class=codehilite><pre><span></span><code><span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;8267016&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;bathroom interior design&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span> <span class=s2>&quot;2166&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;yandex&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1655&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;2014 spring fashion&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1549&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;freeform photo&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1480&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;angelina jolie&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1245&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;omsk&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1112&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;photos of dog breeds&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1091&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;curtain designs&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1064&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;baku&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1000&quot;</span><span class=p>}</span>
</code></pre></div> <p>与 JSON 格式不同的是，没有替换无效的UTF-8序列。任何一组字节都可以在行中输出。这是必要的，因为这样数据可以被格式化而不会丢失任何信息。值的转义方式与JSON相同。</p> <p>对于解析，任何顺序都支持不同列的值。可以省略某些值 - 它们被视为等于它们的默认值。在这种情况下，零和空行被用作默认值。 作为默认值，不支持表中指定的复杂值。元素之间的空白字符被忽略。如果在对象之后放置逗号，它将被忽略。对象不一定必须用新行分隔。</p> <h3 id=jsoneachrow-nested>Usage of Nested Structures<a class=headerlink href=#jsoneachrow-nested title="Permanent link">&para;</a></h3> <p>If you have a table with the <a href=../../data_types/nested_data_structures/nested/ >Nested</a> data type columns, you can insert JSON data having the same structure. Enable this functionality with the <a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json</a> setting.</p> <p>For example, consider the following table:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>json_each_row_nested</span> <span class=p>(</span><span class=n>n</span> <span class=n>Nested</span> <span class=p>(</span><span class=n>s</span> <span class=n>String</span><span class=p>,</span> <span class=n>i</span> <span class=n>Int32</span><span class=p>)</span> <span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span>
</code></pre></div> <p>As you can find in the <code>Nested</code> data type description, ClickHouse treats each component of the nested structure as a separate column, <code>n.s</code> and <code>n.i</code> for our table. So you can insert the data the following way:</p> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n.s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;n.i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}</span>
</code></pre></div> <p>To insert data as hierarchical JSON object set <a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json=1</a>.</p> <div class=codehilite><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;n&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;abc&quot;</span><span class=p>,</span> <span class=s2>&quot;def&quot;</span><span class=p>],</span>
        <span class=nt>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Without this setting ClickHouse throws the exception.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;input_format_import_nested_json&#39;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─name────────────────────────────┬─value─┐
│ input_format_import_nested_json │ 0     │
└─────────────────────────────────┴───────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n&quot;</span><span class=p>:</span> <span class=err>{</span><span class=ss>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>Code: 117. DB::Exception: Unknown field found while parsing JSONEachRow format: n: (at row 1)
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SET</span> <span class=n>input_format_import_nested_json</span><span class=o>=</span><span class=mi>1</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n&quot;</span><span class=p>:</span> <span class=err>{</span><span class=ss>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>json_each_row_nested</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─n.s───────────┬─n.i────┐
│ [&#39;abc&#39;,&#39;def&#39;] │ [1,23] │
└───────────────┴────────┘
</code></pre></div> <h2 id=native>Native<a class=headerlink href=#native title="Permanent link">&para;</a></h2> <p>最高性能的格式。 据通过二进制格式的块进行写入和读取。对于每个块，该块中的行数，列数，列名称和类型以及列的部分将被相继记录。 换句话说，这种格式是 “列式”的 - 它不会将列转换为行。 这是用于在服务器之间进行交互的本地界面中使用的格式，用于使用命令行客户端和 C++ 客户端。</p> <p>您可以使用此格式快速生成只能由 ClickHouse DBMS 读取的格式。但自己处理这种格式是没有意义的。</p> <h2 id=null>Null<a class=headerlink href=#null title="Permanent link">&para;</a></h2> <p>没有输出。但是，查询已处理完毕，并且在使用命令行客户端时，数据将传输到客户端。这仅用于测试，包括生产力测试。<br> 显然，这种格式只适用于输出，不适用于解析。</p> <h2 id=pretty>Pretty<a class=headerlink href=#pretty title="Permanent link">&para;</a></h2> <p>将数据以表格形式输出，也可以使用 ANSI 转义字符在终端中设置颜色。<br> 它会绘制一个完整的表格，每行数据在终端中占用两行。<br> 每一个结果块都会以单独的表格输出。这是很有必要的，以便结果块不用缓冲结果输出（缓冲在可以预见结果集宽度的时候是很有必要的）。</p> <p><a href=../../query_language/syntax/ >NULL</a> 输出为 <code>ᴺᵁᴸᴸ</code>。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌─x─┬────y─┐</span>
<span class=err>│ 1 │ ᴺᵁᴸᴸ │</span>
<span class=err>└───┴──────┘</span>
</code></pre></div> <p>为避免将太多数据传输到终端，只打印前10,000行。 如果行数大于或等于10,000，则会显示消息“Showed first 10 000”。<br> 该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <p>Pretty格式支持输出总值（当使用 WITH TOTALS 时）和极值（当 <code>extremes</code> 设置为1时）。 在这些情况下，总数值和极值在主数据之后以单独的表格形式输出。 示例（以 PrettyCompact 格式显示）：</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>PrettyCompact</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌──</span><span class=n>EventDate</span><span class=err>─┬───────</span><span class=k>c</span><span class=err>─┐</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>17</span> <span class=err>│</span> <span class=mi>1406958</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>18</span> <span class=err>│</span> <span class=mi>1383658</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>19</span> <span class=err>│</span> <span class=mi>1405797</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>20</span> <span class=err>│</span> <span class=mi>1353623</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>21</span> <span class=err>│</span> <span class=mi>1245779</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>22</span> <span class=err>│</span> <span class=mi>1031592</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>23</span> <span class=err>│</span> <span class=mi>1046491</span> <span class=err>│</span>
<span class=err>└────────────┴─────────┘</span>

<span class=n>Totals</span><span class=p>:</span>
<span class=err>┌──</span><span class=n>EventDate</span><span class=err>─┬───────</span><span class=k>c</span><span class=err>─┐</span>
<span class=err>│</span> <span class=mi>0000</span><span class=o>-</span><span class=mi>00</span><span class=o>-</span><span class=mi>00</span> <span class=err>│</span> <span class=mi>8873898</span> <span class=err>│</span>
<span class=err>└────────────┴─────────┘</span>

<span class=n>Extremes</span><span class=p>:</span>
<span class=err>┌──</span><span class=n>EventDate</span><span class=err>─┬───────</span><span class=k>c</span><span class=err>─┐</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>17</span> <span class=err>│</span> <span class=mi>1031592</span> <span class=err>│</span>
<span class=err>│</span> <span class=mi>2014</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>23</span> <span class=err>│</span> <span class=mi>1406958</span> <span class=err>│</span>
<span class=err>└────────────┴─────────┘</span>
</code></pre></div> <h2 id=prettycompact>PrettyCompact<a class=headerlink href=#prettycompact title="Permanent link">&para;</a></h2> <p>与 <code>Pretty</code> 格式不一样的是，<code>PrettyCompact</code> 去掉了行之间的表格分割线，这样使得结果更加紧凑。这种格式会在交互命令行客户端下默认使用。</p> <h2 id=prettycompactmonoblock>PrettyCompactMonoBlock<a class=headerlink href=#prettycompactmonoblock title="Permanent link">&para;</a></h2> <p>与 <code>PrettyCompact</code> 格式不一样的是，它支持 10,000 行数据缓冲，然后输出在一个表格中，不会按照块来区分</p> <h2 id=prettynoescapes>PrettyNoEscapes<a class=headerlink href=#prettynoescapes title="Permanent link">&para;</a></h2> <p>与 <code>Pretty</code> 格式不一样的是，它不使用 ANSI 字符转义， 这在浏览器显示数据以及在使用 <code>watch</code> 命令行工具是有必要的。</p> <p>示例：</p> <div class=codehilite><pre><span></span><code>watch -n1 <span class=s2>&quot;clickhouse-client --query=&#39;SELECT event, value FROM system.events FORMAT PrettyCompactNoEscapes&#39;&quot;</span>
</code></pre></div> <p>您可以使用 HTTP 接口来获取数据，显示在浏览器中。</p> <h3 id=prettycompactnoescapes>PrettyCompactNoEscapes<a class=headerlink href=#prettycompactnoescapes title="Permanent link">&para;</a></h3> <p>用法类似上述。</p> <h3 id=prettyspacenoescapes>PrettySpaceNoEscapes<a class=headerlink href=#prettyspacenoescapes title="Permanent link">&para;</a></h3> <p>用法类似上述。</p> <h2 id=prettyspace>PrettySpace<a class=headerlink href=#prettyspace title="Permanent link">&para;</a></h2> <p>与 <code>PrettyCompact</code>(#prettycompact) 格式不一样的是，它使用空格来代替网格来显示数据。</p> <h2 id=rowbinary>RowBinary<a class=headerlink href=#rowbinary title="Permanent link">&para;</a></h2> <p>以二进制格式逐行格式化和解析数据。行和值连续列出，没有分隔符。<br> 这种格式比 Native 格式效率低，因为它是基于行的。</p> <p>整数使用固定长度的小端表示法。 例如，UInt64 使用8个字节。<br> DateTime 被表示为 UInt32 类型的Unix 时间戳值。<br> Date 被表示为 UInt16 对象，它的值为 1970-01-01以来的天数。<br> 字符串表示为 varint 长度（无符号 <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer">LEB128</a>），后跟字符串的字节数。<br> FixedString 被简单地表示为一个字节序列。</p> <p>数组表示为 varint 长度（无符号 <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer">LEB128</a>），后跟有序的数组元素。</p> <p>对于 <a href=../../query_language/syntax/#null-literal>NULL</a> 的支持， 一个为 1 或 0 的字节会加在每个 <a href=../../data_types/nullable/ >Nullable</a> 值前面。如果为 1, 那么该值就是 <code>NULL</code>。 如果为 0，则不为 <code>NULL</code>。</p> <h2 id=data-format-values>Values<a class=headerlink href=#data-format-values title="Permanent link">&para;</a></h2> <p>在括号中打印每一行。行由逗号分隔。最后一行之后没有逗号。括号内的值也用逗号分隔。数字以十进制格式输出，不含引号。 数组以方括号输出。带有时间的字符串，日期和时间用引号包围输出。转义字符的解析规则与 <a href=#tabseparated>TabSeparated</a> 格式类似。 在格式化过程中，不插入额外的空格，但在解析过程中，空格是被允许并跳过的（除了数组值之外的空格，这是不允许的）。<a href=../../query_language/syntax/ >NULL</a> 为 <code>NULL</code>。</p> <p>以 Values 格式传递数据时需要转义的最小字符集是：单引号和反斜线。</p> <p>这是 <code>INSERT INTO t VALUES ...</code> 中可以使用的格式，但您也可以将其用于查询结果。</p> <h2 id=vertical>Vertical<a class=headerlink href=#vertical title="Permanent link">&para;</a></h2> <p>使用指定的列名在单独的行上打印每个值。如果每行都包含大量列，则此格式便于打印一行或几行。</p> <p><a href=../../query_language/syntax/ >NULL</a> 输出为 <code>ᴺᵁᴸᴸ</code>。</p> <p>示例:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>Row 1:</span>
<span class=err>──────</span>
<span class=c>x: 1</span>
<span class=c>y: ᴺᵁᴸᴸ</span>
</code></pre></div> <p>该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <h2 id=verticalraw>VerticalRaw<a class=headerlink href=#verticalraw title="Permanent link">&para;</a></h2> <p>和 <code>Vertical</code> 格式不同点在于，行是不会被转义的。<br> 这种格式仅仅适用于输出，但不适用于解析输入（将数据插入到表中）。</p> <p>示例:</p> <div class=codehilite><pre><span></span><code><span class=p>:)</span> <span class=k>SHOW</span> <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>geonames</span> <span class=n>FORMAT</span> <span class=n>VerticalRaw</span><span class=p>;</span>
<span class=k>Row</span> <span class=mi>1</span><span class=p>:</span>
<span class=err>──────</span>
<span class=k>statement</span><span class=p>:</span> <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>default</span><span class=p>.</span><span class=n>geonames</span> <span class=p>(</span> <span class=n>geonameid</span> <span class=n>UInt32</span><span class=p>,</span> <span class=nb>date</span> <span class=nb>Date</span> <span class=k>DEFAULT</span> <span class=k>CAST</span><span class=p>(</span><span class=s1>&#39;2017-12-08&#39;</span> <span class=k>AS</span> <span class=nb>Date</span><span class=p>))</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>(</span><span class=nb>date</span><span class=p>,</span> <span class=n>geonameid</span><span class=p>,</span> <span class=mi>8192</span><span class=p>)</span>

<span class=p>:)</span> <span class=k>SELECT</span> <span class=s1>&#39;string with \&#39;</span><span class=n>quotes</span><span class=err>\</span><span class=s1>&#39; and \t with some special \n characters&#39;</span> <span class=k>AS</span> <span class=n>test</span> <span class=n>FORMAT</span> <span class=n>VerticalRaw</span><span class=p>;</span>
<span class=k>Row</span> <span class=mi>1</span><span class=p>:</span>
<span class=err>──────</span>
<span class=n>test</span><span class=p>:</span> <span class=n>string</span> <span class=k>with</span> <span class=s1>&#39;quotes&#39;</span> <span class=k>and</span>   <span class=k>with</span> <span class=k>some</span> <span class=n>special</span>
 <span class=n>characters</span>
</code></pre></div> <p>和 Vertical 格式相比：</p> <div class=codehilite><pre><span></span><code><span class=err>:) SELECT &#39;string with \&#39;quotes\&#39; and \t with some special \n characters&#39; AS test FORMAT Vertical;</span>
<span class=err>Row 1:</span>
<span class=err>──────</span>
<span class=c>test: string with \&#39;quotes\&#39; and \t with some special \n characters</span>
</code></pre></div> <h2 id=xml>XML<a class=headerlink href=#xml title="Permanent link">&para;</a></h2> <p>该格式仅适用于输出查询结果，但不适用于解析输入，示例：</p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt;</span>
<span class=nt>&lt;result&gt;</span>
        <span class=nt>&lt;meta&gt;</span>
                <span class=nt>&lt;columns&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>SearchPhrase<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>count()<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>UInt64<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                <span class=nt>&lt;/columns&gt;</span>
        <span class=nt>&lt;/meta&gt;</span>
        <span class=nt>&lt;data&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>8267016<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>bathroom interior design<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>2166<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>yandex<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1655<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>2014 spring fashion<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1549<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>freeform photos<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1480<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>angelina jolie<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1245<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>omsk<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1112<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>photos of dog breeds<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1091<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>curtain designs<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1064<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>baku<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1000<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
        <span class=nt>&lt;/data&gt;</span>
        <span class=nt>&lt;rows&gt;</span>10<span class=nt>&lt;/rows&gt;</span>
        <span class=nt>&lt;rows_before_limit_at_least&gt;</span>141137<span class=nt>&lt;/rows_before_limit_at_least&gt;</span>
<span class=nt>&lt;/result&gt;</span>
</code></pre></div> <p>如果列名称没有可接受的格式，则仅使用 <code>field</code> 作为元素名称。 通常，XML 结构遵循 JSON 结构。<br> 就像JSON一样，将无效的 UTF-8 字符都作替换，以便输出文本将包含有效的 UTF-8 字符序列。</p> <p>在字符串值中，字符 <code>&lt;</code> 和 <code>＆</code> 被转义为 <code>&lt;</code> 和 <code>＆</code>。</p> <p>数组输出为 <code>&lt;array&gt; &lt;elem&gt; Hello &lt;/ elem&gt; &lt;elem&gt; World &lt;/ elem&gt; ... &lt;/ array&gt;</code>，元组输出为 <code>&lt;tuple&gt; &lt;elem&gt; Hello &lt;/ elem&gt; &lt;elem&gt; World &lt;/ ELEM&gt; ... &lt;/tuple&gt;</code> 。</p> <h2 id=capnproto>CapnProto<a class=headerlink href=#capnproto title="Permanent link">&para;</a></h2> <p>Cap'n Proto 是一种二进制消息格式，类似 Protocol Buffers 和 Thriftis，但与 JSON 或 MessagePack 格式不一样。</p> <p>Cap'n Proto 消息格式是严格类型的，而不是自我描述，这意味着它们不需要外部的描述。这种格式可以实时地应用，并针对每个查询进行缓存。</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
       <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=n>FORMAT</span> <span class=n>CapnProto</span> <span class=n>SETTINGS</span> <span class=k>schema</span> <span class=o>=</span> <span class=s1>&#39;schema:Message&#39;</span>
</code></pre></div> <p>其中 <code>schema.capnp</code> 描述如下：</p> <div class=codehilite><pre><span></span><code><span class=k>struct</span> <span class=n>Message</span> <span class=p>{</span>
  <span class=n>SearchPhrase</span> <span class=mi>@0</span> <span class=o>:</span><span class=n>Text</span><span class=p>;</span>
  <span class=n>c</span> <span class=mi>@1</span> <span class=o>:</span><span class=n>Uint64</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>格式文件存储的目录可以在服务配置中的 <a href=../../operations/server_settings/settings/ > format_schema_path </a> 指定。</p> <p>Cap'n Proto 反序列化是很高效的，通常不会增加系统的负载。</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>建于 <a href=https://github.com/ClickHouse/ClickHouse/commit/c1558f8c18e2727c5991cf923ee79710de89d1d0 rel="external nofollow noreferrer" target=_blank class=text-reset>c1558f8c18</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>目录</label> <a href=#tabseparated title=TabSeparated class="nav-link text-wrap d-inline-block w-100"> TabSeparated </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#shu-ju-jie-xi-fang-shi title=数据解析方式 class="nav-link text-wrap d-inline-block w-100"> 数据解析方式 </a> </nav> <a href=#tabseparatedraw title=TabSeparatedRaw class="nav-link text-wrap d-inline-block w-100"> TabSeparatedRaw </a> <a href=#tabseparatedwithnames title=TabSeparatedWithNames class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNames </a> <a href=#tabseparatedwithnamesandtypes title=TabSeparatedWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNamesAndTypes </a> <a href=#format-template title=Template class="nav-link text-wrap d-inline-block w-100"> Template </a> <a href=#templateignorespaces title=TemplateIgnoreSpaces class="nav-link text-wrap d-inline-block w-100"> TemplateIgnoreSpaces </a> <a href=#tskv title=TSKV class="nav-link text-wrap d-inline-block w-100"> TSKV </a> <a href=#csv title=CSV class="nav-link text-wrap d-inline-block w-100"> CSV </a> <a href=#csvwithnames title=CSVWithNames class="nav-link text-wrap d-inline-block w-100"> CSVWithNames </a> <a href=#json title=JSON class="nav-link text-wrap d-inline-block w-100"> JSON </a> <a href=#jsoncompact title=JSONCompact class="nav-link text-wrap d-inline-block w-100"> JSONCompact </a> <a href=#jsoneachrow title=JSONEachRow class="nav-link text-wrap d-inline-block w-100"> JSONEachRow </a> <nav id=toc-toc-12 class="nav flex-column pl-2"> <a href=#jsoneachrow-nested title="Usage of Nested Structures" class="nav-link text-wrap d-inline-block w-100"> Usage of Nested Structures </a> </nav> <a href=#native title=Native class="nav-link text-wrap d-inline-block w-100"> Native </a> <a href=#null title=Null class="nav-link text-wrap d-inline-block w-100"> Null </a> <a href=#pretty title=Pretty class="nav-link text-wrap d-inline-block w-100"> Pretty </a> <a href=#prettycompact title=PrettyCompact class="nav-link text-wrap d-inline-block w-100"> PrettyCompact </a> <a href=#prettycompactmonoblock title=PrettyCompactMonoBlock class="nav-link text-wrap d-inline-block w-100"> PrettyCompactMonoBlock </a> <a href=#prettynoescapes title=PrettyNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyNoEscapes </a> <nav id=toc-toc-18 class="nav flex-column pl-2"> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyCompactNoEscapes </a> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettySpaceNoEscapes </a> </nav> <a href=#prettyspace title=PrettySpace class="nav-link text-wrap d-inline-block w-100"> PrettySpace </a> <a href=#rowbinary title=RowBinary class="nav-link text-wrap d-inline-block w-100"> RowBinary </a> <a href=#data-format-values title=Values class="nav-link text-wrap d-inline-block w-100"> Values </a> <a href=#vertical title=Vertical class="nav-link text-wrap d-inline-block w-100"> Vertical </a> <a href=#verticalraw title=VerticalRaw class="nav-link text-wrap d-inline-block w-100"> VerticalRaw </a> <a href=#xml title=XML class="nav-link text-wrap d-inline-block w-100"> XML </a> <a href=#capnproto title=CapnProto class="nav-link text-wrap d-inline-block w-100"> CapnProto </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
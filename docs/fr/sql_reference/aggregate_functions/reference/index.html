<!DOCTYPE html><html lang=fr data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Référence - Documentation ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Référence - Documentation ClickHouse "><meta property=og:description content="La Fonction De Référence compter Compte le nombre de lignes ou de valeurs non NULL. ClickHouse prend en charge les synta"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Référence - Documentation ClickHouse "><meta name=description content="La Fonction De Référence compter Compte le nombre de lignes ou de valeurs non NULL. ClickHouse prend en charge les synta"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Référence </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fr/sql_reference/aggregate_functions/reference.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/fr.svg alt=Français title=Français width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/sql_reference/aggregate_functions/reference/ class="dropdown-item disabled"> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/sql_reference/aggregate_functions/reference/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page ou une seule page"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-version de la page" title="Multi-version de la page"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Version d'une seule page" title="Version d'une seule page"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Version: <span class=text-light>dernier</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/fr/ class="dropdown-item disable"> <span class=text-light>dernier</span> </a> <a href=/docs/v20.3/fr/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/fr/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/fr/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/fr/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/fr/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/fr/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/fr/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/fr/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/fr/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/fr/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/fr/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../introduction/distinctive_features/ title=particularité class="nav-link text-light text-wrap d-inline-block w-100 px-0">particularité</a> <a href=../../../introduction/features_considered_disadvantages/ title="Caractéristiques de ClickHouse qui peuvent être considérées comme des inconvénients" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Caractéristiques de ClickHouse qui peuvent être considérées comme des inconvénients</a> <a href=../../../introduction/performance/ title=Performance class="nav-link text-light text-wrap d-inline-block w-100 px-0">Performance</a> <a href=../../../introduction/history/ title=Histoire class="nav-link text-light text-wrap d-inline-block w-100 px-0">Histoire</a> <a href=../../../introduction/adopters/ title=Adoptant class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adoptant</a> </nav> </div> <a href=../../../ title=Aperçu class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aperçu</a> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/ title=cachés class="nav-link text-light text-wrap d-inline-block w-100 px-0">cachés</a> <a href=../../../getting_started/install/ title=Installation class="nav-link text-light text-wrap d-inline-block w-100 px-0">Installation</a> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title="New York Taxi Données" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Données</a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting_started/example_datasets/criteo/ title="Téraoctet click Logs de Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Téraoctet click Logs de Criteo</a> <a href=../../../getting_started/example_datasets/star_schema/ title="Référence Du Schéma En Étoile" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Référence Du Schéma En Étoile</a> <a href=../../../getting_started/example_datasets/metrica/ title="Yandex.Metrica De Données" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica De Données</a> </nav> </div> <a href=../../../getting_started/tutorial/ title=Tutoriel class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutoriel</a> <a href=../../../getting_started/playground/ title=Récréation class="nav-link text-light text-wrap d-inline-block w-100 px-0">Récréation</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../interfaces/cli/ title="Client De Ligne De Commande" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Client De Ligne De Commande</a> <a href=../../../interfaces/tcp/ title="Interface Native (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interface Native (TCP)</a> <a href=../../../interfaces/http/ title="Interface HTTP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interface HTTP</a> <a href=../../../interfaces/mysql/ title="Interface MySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interface MySQL</a> <a href=../../../interfaces/formats/ title="Formats d'entrée et de sortie" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Formats d'entrée et de sortie</a> <a href=../../../interfaces/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../interfaces/odbc/ title="Pilote ODBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Pilote ODBC</a> <a href=../../../interfaces/cpp/ title="Bibliothèque Client C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bibliothèque Client C++</a> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../interfaces/third-party/client_libraries/ title="Bibliothèques Clientes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bibliothèques Clientes</a> <a href=../../../interfaces/third-party/integrations/ title=Intégration class="nav-link text-light text-wrap d-inline-block w-100 px-0">Intégration</a> <a href=../../../interfaces/third-party/gui/ title="Les Interfaces Visuelles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Les Interfaces Visuelles</a> <a href=../../../interfaces/third-party/proxy/ title=Proxy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxy</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../engines/table_engines/mergetree_family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table_engines/mergetree_family/replication/ title="Réplication Des Données" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Réplication Des Données</a> <a href=../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="Clé De Partitionnement Personnalisée" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Clé De Partitionnement Personnalisée</a> <a href=../../../engines/table_engines/mergetree_family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../engines/table_engines/mergetree_family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../engines/table_engines/log_family/log_family/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../engines/table_engines/log_family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../engines/table_engines/log_family/log/ title=Journal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Journal</a> <a href=../../../engines/table_engines/log_family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../engines/table_engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../engines/table_engines/special/distributed/ title=Distribué class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distribué</a> <a href=../../../engines/table_engines/special/external_data/ title="De données externes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">De données externes</a> <a href=../../../engines/table_engines/special/dictionary/ title=Dictionnaire class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionnaire</a> <a href=../../../engines/table_engines/special/merge/ title=Fusionner class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fusionner</a> <a href=../../../engines/table_engines/special/file/ title=Fichier class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fichier</a> <a href=../../../engines/table_engines/special/null/ title=NULL class="nav-link text-light text-wrap d-inline-block w-100 px-0">NULL</a> <a href=../../../engines/table_engines/special/set/ title=Définir class="nav-link text-light text-wrap d-inline-block w-100 px-0">Définir</a> <a href=../../../engines/table_engines/special/join/ title=Rejoindre class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rejoindre</a> <a href=../../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../engines/table_engines/special/view/ title=Vue class="nav-link text-light text-wrap d-inline-block w-100 px-0">Vue</a> <a href=../../../engines/table_engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table_engines/special/memory/ title=Mémoire class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mémoire</a> <a href=../../../engines/table_engines/special/buffer/ title=Tampon class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tampon</a> <a href=../../../engines/table_engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database_engines/lazy/ title=Paresseux class="nav-link text-light text-wrap d-inline-block w-100 px-0">Paresseux</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/ title=cachés class="nav-link text-light text-wrap d-inline-block w-100 px-0">cachés</a> <a href=#sidebar-sidebar-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-2 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../sql_reference/statements/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql_reference/statements/misc/ title=Autre class="nav-link text-light text-wrap d-inline-block w-100 px-0">Autre</a> </nav> </div> <a href=../../../sql_reference/syntax/ title=Syntaxe class="nav-link text-light text-wrap d-inline-block w-100 px-0">Syntaxe</a> <a href=#sidebar-sidebar-6-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/functions/arithmetic_functions/ title=Arithmétique class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arithmétique</a> <a href=../../../sql_reference/functions/comparison_functions/ title=Comparaison class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparaison</a> <a href=../../../sql_reference/functions/logical_functions/ title=Logique class="nav-link text-light text-wrap d-inline-block w-100 px-0">Logique</a> <a href=../../../sql_reference/functions/type_conversion_functions/ title="La Conversion De Type" class="nav-link text-light text-wrap d-inline-block w-100 px-0">La Conversion De Type</a> <a href=../../../sql_reference/functions/date_time_functions/ title="Travailler avec les Dates et les heures" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec les Dates et les heures</a> <a href=../../../sql_reference/functions/string_functions/ title="Travailler avec des chaînes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec des chaînes</a> <a href=../../../sql_reference/functions/string_search_functions/ title="Pour Rechercher Des Chaînes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Pour Rechercher Des Chaînes</a> <a href=../../../sql_reference/functions/string_replace_functions/ title="Pour remplacer dans les chaînes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Pour remplacer dans les chaînes</a> <a href=../../../sql_reference/functions/conditional_functions/ title=Conditionnel class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conditionnel</a> <a href=../../../sql_reference/functions/math_functions/ title=Mathématique class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mathématique</a> <a href=../../../sql_reference/functions/rounding_functions/ title=Arrondi class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arrondi</a> <a href=../../../sql_reference/functions/array_functions/ title="Travailler avec des tableaux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec des tableaux</a> <a href=../../../sql_reference/functions/splitting_merging_functions/ title="Fractionnement et fusion de chaînes et de tableaux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fractionnement et fusion de chaînes et de tableaux</a> <a href=../../../sql_reference/functions/bit_functions/ title=Bit class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bit</a> <a href=../../../sql_reference/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../../sql_reference/functions/hash_functions/ title=Hachage class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hachage</a> <a href=../../../sql_reference/functions/random_functions/ title="La Génération De Nombres Pseudo-Aléatoires" class="nav-link text-light text-wrap d-inline-block w-100 px-0">La Génération De Nombres Pseudo-Aléatoires</a> <a href=../../../sql_reference/functions/encoding_functions/ title=Encodage class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encodage</a> <a href=../../../sql_reference/functions/uuid_functions/ title="Travailler avec UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec UUID</a> <a href=../../../sql_reference/functions/url_functions/ title="Travailler avec des URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec des URL</a> <a href=../../../sql_reference/functions/ip_address_functions/ title="Travailler avec des adresses IP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec des adresses IP</a> <a href=../../../sql_reference/functions/json_functions/ title="Travailler avec JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec JSON</a> <a href=../../../sql_reference/functions/higher_order_functions/ title="D'Ordre Supérieur" class="nav-link text-light text-wrap d-inline-block w-100 px-0">D'Ordre Supérieur</a> <a href=../../../sql_reference/functions/ext_dict_functions/ title="Travailler avec des dictionnaires externes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec des dictionnaires externes</a> <a href=../../../sql_reference/functions/ym_dict_functions/ title="Travailler avec Yandex.Dictionnaires Metrica" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec Yandex.Dictionnaires Metrica</a> <a href=../../../sql_reference/functions/in_functions/ title="Mise en œuvre de L'opérateur IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mise en œuvre de L'opérateur IN</a> <a href=../../../sql_reference/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../sql_reference/functions/geo/ title="Travailler avec des coordonnées géographiques" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec des coordonnées géographiques</a> <a href=../../../sql_reference/functions/functions_for_nulls/ title="Travailler avec des arguments nullables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Travailler avec des arguments nullables</a> <a href=../../../sql_reference/functions/machine_learning_functions/ title="Fonctions D'Apprentissage Automatique" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fonctions D'Apprentissage Automatique</a> <a href=../../../sql_reference/functions/introspection/ title=Introspection class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introspection</a> <a href=../../../sql_reference/functions/other_functions/ title=Autre class="nav-link text-light text-wrap d-inline-block w-100 px-0">Autre</a> </nav> </div> <a href=#sidebar-sidebar-6-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/aggregate_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/aggregate_functions/reference/ title=Référence class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Référence</a> <a href=../../../sql_reference/aggregate_functions/combinators/ title="Combinateurs de fonction d'agrégat" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Combinateurs de fonction d'agrégat</a> <a href=../../../sql_reference/aggregate_functions/parametric_functions/ title="Fonctions d'agrégat paramétriques" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fonctions d'agrégat paramétriques</a> </nav> </div> <a href=#sidebar-sidebar-6-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/table_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/table_functions/file/ title=fichier class="nav-link text-light text-wrap d-inline-block w-100 px-0">fichier</a> <a href=../../../sql_reference/table_functions/merge/ title=fusionner class="nav-link text-light text-wrap d-inline-block w-100 px-0">fusionner</a> <a href=../../../sql_reference/table_functions/numbers/ title=nombre class="nav-link text-light text-wrap d-inline-block w-100 px-0">nombre</a> <a href=../../../sql_reference/table_functions/remote/ title=distant class="nav-link text-light text-wrap d-inline-block w-100 px-0">distant</a> <a href=../../../sql_reference/table_functions/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../sql_reference/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql_reference/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql_reference/table_functions/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql_reference/table_functions/input/ title=entrée class="nav-link text-light text-wrap d-inline-block w-100 px-0">entrée</a> <a href=../../../sql_reference/table_functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-6-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="Description Générale" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Description Générale</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="Configuration D'un dictionnaire externe" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration D'un dictionnaire externe</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="Stockage des dictionnaires en mémoire" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Stockage des dictionnaires en mémoire</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="Mises À Jour Du Dictionnaire" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mises À Jour Du Dictionnaire</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="Sources de dictionnaires externes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources de dictionnaires externes</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="Clé et champs du dictionnaire" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Clé et champs du dictionnaire</a> <a href=../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="Dictionnaires hiérarchiques" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionnaires hiérarchiques</a> </nav> </div> <a href=../../../sql_reference/dictionaries/internal_dicts/ title="Dictionnaires Internes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionnaires Internes</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../sql_reference/data_types/decimal/ title=Décimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Décimal</a> <a href=../../../sql_reference/data_types/boolean/ title=Booléen class="nav-link text-light text-wrap d-inline-block w-100 px-0">Booléen</a> <a href=../../../sql_reference/data_types/string/ title=Chaîne class="nav-link text-light text-wrap d-inline-block w-100 px-0">Chaîne</a> <a href=../../../sql_reference/data_types/fixedstring/ title="FixedString (N)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString (N)</a> <a href=../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql_reference/data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql_reference/data_types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql_reference/data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../sql_reference/data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../../sql_reference/data_types/aggregatefunction/ title="AggregateFunction (nom, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction (nom, types_of_arguments...)</a> <a href=../../../sql_reference/data_types/tuple/ title="Tuple (T1, T2,...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple (T1, T2,...)</a> <a href=#sidebar-sidebar-6-8-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-6-8-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/nested_data_structures/ title=cachés class="nav-link text-light text-wrap d-inline-block w-100 px-0">cachés</a> <a href=../../../sql_reference/data_types/nested_data_structures/nested/ title="Imbriquée(Type1 Nom1, Nom2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Imbriquée(Type1 Nom1, Nom2 Type2, ...)</a> </nav> </div> <a href=../../../sql_reference/data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-6-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-6-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/special_data_types/ title=cachés class="nav-link text-light text-wrap d-inline-block w-100 px-0">cachés</a> <a href=../../../sql_reference/data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../../sql_reference/data_types/special_data_types/set/ title=Définir class="nav-link text-light text-wrap d-inline-block w-100 px-0">Définir</a> <a href=../../../sql_reference/data_types/special_data_types/nothing/ title=Rien class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rien</a> <a href=../../../sql_reference/data_types/special_data_types/interval/ title=Intervalle class="nav-link text-light text-wrap d-inline-block w-100 px-0">Intervalle</a> </nav> </div> <a href=#sidebar-sidebar-6-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-6-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../sql_reference/data_types/domains/overview/ title=Aperçu class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aperçu</a> <a href=../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../../sql_reference/operators/ title=Opérateur class="nav-link text-light text-wrap d-inline-block w-100 px-0">Opérateur</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=Aperçu class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aperçu</a> <a href=../../../guides/apply_catboost_model/ title="Application Des Modèles CatBoost" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Application Des Modèles CatBoost</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/requirements/ title=Exigence class="nav-link text-light text-wrap d-inline-block w-100 px-0">Exigence</a> <a href=../../../operations/monitoring/ title=Surveiller class="nav-link text-light text-wrap d-inline-block w-100 px-0">Surveiller</a> <a href=../../../operations/troubleshooting/ title=Dépannage class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dépannage</a> <a href=../../../operations/update/ title="Mise À Jour De ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mise À Jour De ClickHouse</a> <a href=../../../operations/access_rights/ title="Les Droits D'Accès" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Les Droits D'Accès</a> <a href=../../../operations/backup/ title="La Sauvegarde Des Données" class="nav-link text-light text-wrap d-inline-block w-100 px-0">La Sauvegarde Des Données</a> <a href=../../../operations/configuration_files/ title="Fichiers De Configuration" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fichiers De Configuration</a> <a href=../../../operations/quotas/ title=Quota class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quota</a> <a href=../../../operations/system_tables/ title="Les Tables Système" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Les Tables Système</a> <a href=#sidebar-sidebar-8-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-11 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-8-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../operations/optimizing_performance/sampling_query_profiler/ title="Profilage De Requête" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Profilage De Requête</a> </nav> </div> <a href=#sidebar-sidebar-8-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-8-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_configuration_parameters/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/server_configuration_parameters/settings/ title="Les Paramètres Du Serveur" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Les Paramètres Du Serveur</a> </nav> </div> <a href=../../../operations/performance_test/ title="Tester Le Matériel" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tester Le Matériel</a> <a href=#sidebar-sidebar-8-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-8-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/settings/permissions_for_queries/ title="Autorisations pour les requêtes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Autorisations pour les requêtes</a> <a href=../../../operations/settings/query_complexity/ title="Restrictions sur la complexité des requêtes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions sur la complexité des requêtes</a> <a href=../../../operations/settings/settings/ title=Paramètre class="nav-link text-light text-wrap d-inline-block w-100 px-0">Paramètre</a> <a href=../../../operations/settings/settings_profiles/ title="Les Paramètres Des Profils" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Les Paramètres Des Profils</a> <a href=../../../operations/settings/constraints_on_settings/ title="Contraintes sur les paramètres" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Contraintes sur les paramètres</a> <a href=../../../operations/settings/settings_users/ title="Les Paramètres De L'Utilisateur" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Les Paramètres De L'Utilisateur</a> </nav> </div> <a href=#sidebar-sidebar-8-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-8-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/ title=Aperçu class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aperçu</a> <a href=../../../operations/utilities/clickhouse-copier/ title=clickhouse-copieur class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copieur</a> <a href=../../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-benchmark class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a> </nav> </div> <a href=../../../operations/tips/ title="Recommandations D'Utilisation" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Recommandations D'Utilisation</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/ title=cachés class="nav-link text-light text-wrap d-inline-block w-100 px-0">cachés</a> <a href=../../../development/developer_instruction/ title="Le Débutant Clickhouse Developer Instruction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Le Débutant Clickhouse Developer Instruction</a> <a href=../../../development/architecture/ title="Vue d'ensemble de L'Architecture ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Vue d'ensemble de L'Architecture ClickHouse</a> <a href=../../../development/browse_code/ title="Parcourir Le Code Source De ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parcourir Le Code Source De ClickHouse</a> <a href=../../../development/build/ title="Comment Construire ClickHouse sur Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comment Construire ClickHouse sur Linux</a> <a href=../../../development/build_osx/ title="Comment Construire ClickHouse sur Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comment Construire ClickHouse sur Mac OS X</a> <a href=../../../development/build_cross_osx/ title="Comment Construire ClickHouse sur Linux pour Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comment Construire ClickHouse sur Linux pour Mac OS X</a> <a href=../../../development/build_cross_arm/ title="Comment Construire ClickHouse sur Linux pour AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comment Construire ClickHouse sur Linux pour AARCH64 (ARM64)</a> <a href=../../../development/style/ title="Comment écrire du Code C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comment écrire du Code C++</a> <a href=../../../development/tests/ title="Comment exécuter des Tests ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comment exécuter des Tests ClickHouse</a> <a href=../../../development/contrib/ title="Bibliothèques Tierces Utilisées" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bibliothèques Tierces Utilisées</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../commercial/cloud/ title="Fournisseurs De Services Cloud ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fournisseurs De Services Cloud ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-11-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../whats_new/roadmap/ title="Feuille de route" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Feuille de route</a> <a href=../../../whats_new/security_changelog/ title="Sécurité Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sécurité Changelog</a> </nav> </div> <a href=#sidebar-sidebar-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-12 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../faq/general/ title="Questions Générales" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Questions Générales</a> </nav> </div> <a href=../../../single/clickhouse_fr.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="Version PDF" title="Version PDF" height=24 class="d-block mr-1 float-left"><div>Version PDF</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Demander de l'aide!</p> <p class=lead>Le contenu suivant de cette page de documentation a été traduit à la machine. Mais contrairement à d'autres sites web, il ne se fait pas à la volée. Ce texte traduit vit sur le dépôt GitHub aux côtés de la base de code ClickHouse principale et attend que d'autres locuteurs natifs le rendent plus lisible par l'homme.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fr/sql_reference/aggregate_functions/reference.md target=_blank rel="external nofollow noreferrer"> Aide clickhouse documentation en éditant cette page </a> </p> </div> <h1 id=function-reference>La Fonction De Référence<a class=headerlink href=#function-reference title="Permanent link">&para;</a></h1> <h2 id=agg_function-count>compter<a class=headerlink href=#agg_function-count title="Permanent link">&para;</a></h2> <p>Compte le nombre de lignes ou de valeurs non NULL.</p> <p>ClickHouse prend en charge les syntaxes suivantes pour <code>count</code>:<br> - <code>count(expr)</code> ou <code>COUNT(DISTINCT expr)</code>.<br> - <code>count()</code> ou <code>COUNT(*)</code>. Le <code>count()</code> la syntaxe est spécifique à ClickHouse.</p> <p><strong>Paramètre</strong></p> <p>La fonction peut prendre:</p> <ul> <li>Zéro des paramètres.</li> <li>Un <a href=../../syntax/#syntax-expressions>expression</a>.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Si la fonction est appelée sans paramètres, il compte le nombre de lignes.</li> <li>Si l' <a href=../../syntax/#syntax-expressions>expression</a> est passé, alors la fonction compte combien de fois cette expression retournée not null. Si l'expression renvoie un <a href=../../data_types/nullable/ >Nullable</a>- tapez la valeur, puis le résultat de <code>count</code> séjours pas <code>Nullable</code>. La fonction renvoie 0 si l'expression est retournée <code>NULL</code> pour toutes les lignes.</li> </ul> <p>Dans les deux cas le type de la valeur renvoyée est <a href=../../data_types/int_uint/ >UInt64</a>.</p> <p><strong>Détail</strong></p> <p>Clickhouse soutient le <code>COUNT(DISTINCT ...)</code> syntaxe. Le comportement de cette construction dépend de la <a href=../../../operations/settings/settings/#settings-count_distinct_implementation>count_distinct_implementation</a> paramètre. Il définit lequel des <a href=#agg_function-uniq>uniq*</a> fonctions est utilisée pour effectuer l'opération. La valeur par défaut est la <a href=#agg_function-uniqexact>uniqExact</a> fonction.</p> <p>Le <code>SELECT count() FROM table</code> la requête n'est pas optimisé, car le nombre d'entrées dans la table n'est pas stockée séparément. Il choisit une petite colonne de la table et compte le nombre de valeurs qu'il contient.</p> <p><strong>Exemple</strong></p> <p>Exemple 1:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─count()─┐
│       5 │
└─────────┘
</code></pre></div> <p>Exemple 2:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;count_distinct_implementation&#39;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─name──────────────────────────┬─value─────┐
│ count_distinct_implementation │ uniqExact │
└───────────────────────────────┴───────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>count</span><span class=p>(</span><span class=k>DISTINCT</span> <span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─uniqExact(num)─┐
│              3 │
└────────────────┘
</code></pre></div> <p>Cet exemple montre que <code>count(DISTINCT num)</code> est effectuée par le <code>uniqExact</code> en fonction de l' <code>count_distinct_implementation</code> valeur de réglage.</p> <h2 id=agg_function-any>tout(x)<a class=headerlink href=#agg_function-any title="Permanent link">&para;</a></h2> <p>Sélectionne la première valeur rencontrée.<br> La requête peut être exécutée dans n'importe quel ordre, et même dans un ordre différent à chaque fois, de sorte que le résultat de cette fonction est indéterminée.<br> Pour obtenir un résultat déterminé, vous pouvez utiliser le ‘min’ ou ‘max’ fonction au lieu de ‘any’.</p> <p>Dans certains cas, vous pouvez compter sur l'ordre de l'exécution. Cela s'applique aux cas où SELECT provient d'une sous-requête qui utilise ORDER BY.</p> <p>Lorsqu'un <code>SELECT</code> la requête a l' <code>GROUP BY</code> ou au moins une fonction d'agrégat, ClickHouse (contrairement à MySQL) exige que toutes les expressions du <code>SELECT</code>, <code>HAVING</code>, et <code>ORDER BY</code> clauses être calculée à partir de clés ou de fonctions d'agrégation. En d'autres termes, chaque colonne sélectionnée dans la table doit être utilisée soit dans les clés, soit dans les fonctions d'agrégation. Pour obtenir un comportement comme dans MySQL, vous pouvez mettre les autres colonnes dans le <code>any</code> fonction d'agrégation.</p> <h2 id=anyheavyx>anyHeavy (x)<a class=headerlink href=#anyheavyx title="Permanent link">&para;</a></h2> <p>Sélectionne une valeur fréquente à l'aide <a href=http://www.cs.umd.edu/~samir/498/karp.pdf rel="external nofollow noreferrer">poids lourds</a> algorithme. S'il y a une valeur qui se produit plus de la moitié des cas dans chacun des threads d'exécution de la requête, cette valeur est renvoyée. Normalement, le résultat est non déterministe.</p> <div class=codehilite><pre><span></span><code><span class=n>anyHeavy</span><span class=p>(</span><span class=k>column</span><span class=p>)</span>
</code></pre></div> <p><strong>Argument</strong></p> <ul> <li><code>column</code> – The column name.</li> </ul> <p><strong>Exemple</strong></p> <p>Prendre la <a href=../../../getting_started/example_datasets/ontime/ >OnTime</a> ensemble de données et sélectionnez n'importe quelle valeur <code>AirlineID</code> colonne.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>anyHeavy</span><span class=p>(</span><span class=n>AirlineID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌───res─┐
│ 19690 │
└───────┘
</code></pre></div> <h2 id=anylastx>anyLast (x)<a class=headerlink href=#anylastx title="Permanent link">&para;</a></h2> <p>Sélectionne la dernière valeur rencontrés.<br> Le résultat est tout aussi indéterminé que pour le <code>any</code> fonction.</p> <h2 id=groupbitand>groupBitAnd<a class=headerlink href=#groupbitand title="Permanent link">&para;</a></h2> <p>S'applique au niveau du BIT <code>AND</code> pour les séries de nombres.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitAnd</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p> <p><strong>Valeur de retour</strong></p> <p>La valeur de la <code>UInt*</code> type.</p> <p><strong>Exemple</strong></p> <p>Des données de Test:</p> <div class=codehilite><pre><span></span><code>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>groupBitAnd</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Où <code>num</code> est la colonne avec les données de test.</p> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>binary     decimal
00000100 = 4
</code></pre></div> <h2 id=groupbitor>groupBitOr<a class=headerlink href=#groupbitor title="Permanent link">&para;</a></h2> <p>S'applique au niveau du BIT <code>OR</code> pour les séries de nombres.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p> <p><strong>Valeur de retour</strong></p> <p>La valeur de la <code>UInt*</code> type.</p> <p><strong>Exemple</strong></p> <p>Des données de Test:</p> <div class=codehilite><pre><span></span><code>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>groupBitOr</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Où <code>num</code> est la colonne avec les données de test.</p> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>binary     decimal
01111101 = 125
</code></pre></div> <h2 id=groupbitxor>groupBitXor<a class=headerlink href=#groupbitxor title="Permanent link">&para;</a></h2> <p>S'applique au niveau du BIT <code>XOR</code> pour les séries de nombres.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitXor</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p> <p><strong>Valeur de retour</strong></p> <p>La valeur de la <code>UInt*</code> type.</p> <p><strong>Exemple</strong></p> <p>Des données de Test:</p> <div class=codehilite><pre><span></span><code>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>groupBitXor</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Où <code>num</code> est la colonne avec les données de test.</p> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>binary     decimal
01101000 = 104
</code></pre></div> <h2 id=groupbitmap>groupBitmap<a class=headerlink href=#groupbitmap title="Permanent link">&para;</a></h2> <p>Calculs Bitmap ou agrégés à partir d'une colonne entière non signée, retour cardinalité de type UInt64, si Ajouter suffixe-State, puis retour <a href=../../functions/bitmap_functions/ >objet bitmap</a>.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitmap</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p> <p><strong>Valeur de retour</strong></p> <p>La valeur de la <code>UInt64</code> type.</p> <p><strong>Exemple</strong></p> <p>Des données de Test:</p> <div class=codehilite><pre><span></span><code>UserID
1
1
2
3
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>groupBitmap</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span> <span class=k>as</span> <span class=n>num</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>num
3
</code></pre></div> <h2 id=agg_function-min>min (x)<a class=headerlink href=#agg_function-min title="Permanent link">&para;</a></h2> <p>Calcule le minimum.</p> <h2 id=agg_function-max>max (x)<a class=headerlink href=#agg_function-max title="Permanent link">&para;</a></h2> <p>Calcule le maximum.</p> <h2 id=agg-function-argmin>argMin (arg, val)<a class=headerlink href=#agg-function-argmin title="Permanent link">&para;</a></h2> <p>Calcule la ‘arg’ valeur pour un minimum ‘val’ valeur. S'il y a plusieurs valeurs différentes de ‘arg’ pour des valeurs minimales de ‘val’ la première de ces valeurs rencontrées est de sortie.</p> <p><strong>Exemple:</strong></p> <div class=codehilite><pre><span></span><code>┌─user─────┬─salary─┐
│ director │   5000 │
│ manager  │   3000 │
│ worker   │   1000 │
└──────────┴────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>argMin</span><span class=p>(</span><span class=k>user</span><span class=p>,</span> <span class=n>salary</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>salary</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─argMin(user, salary)─┐
│ worker               │
└──────────────────────┘
</code></pre></div> <h2 id=agg-function-argmax>argMax(arg, val)<a class=headerlink href=#agg-function-argmax title="Permanent link">&para;</a></h2> <p>Calcule la ‘arg’ valeur pour un maximum ‘val’ valeur. S'il y a plusieurs valeurs différentes de ‘arg’ pour les valeurs maximales de ‘val’ la première de ces valeurs rencontrées est de sortie.</p> <h2 id=agg_function-sum>sum(x)<a class=headerlink href=#agg_function-sum title="Permanent link">&para;</a></h2> <p>Calcule la somme.<br> Ne fonctionne que pour les numéros.</p> <h2 id=sumwithoverflowx>sumWithOverflow (x)<a class=headerlink href=#sumwithoverflowx title="Permanent link">&para;</a></h2> <p>Calcule la somme des nombres, en utilisant le même type de données pour le résultat que pour les paramètres d'entrée. Si la somme dépasse la valeur maximale pour ce type de données, la fonction renvoie une erreur.</p> <p>Ne fonctionne que pour les numéros.</p> <h2 id=agg_functions-summap>sumMap (clé, valeur)<a class=headerlink href=#agg_functions-summap title="Permanent link">&para;</a></h2> <p>Les totaux de la ‘value’ tableau selon les clés spécifiés dans le ‘key’ tableau.<br> Le nombre d'éléments dans ‘key’ et ‘value’ doit être identique pour chaque ligne totalisée.<br> Returns a tuple of two arrays: keys in sorted order, and values ​​summed for the corresponding keys.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>sum_map</span><span class=p>(</span>
    <span class=nb>date</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=n>timeslot</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>statusMap</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>status</span> <span class=n>UInt16</span><span class=p>,</span>
        <span class=n>requests</span> <span class=n>UInt64</span>
    <span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>sum_map</span> <span class=k>VALUES</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:00:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:00:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:01:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:01:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]);</span>
<span class=k>SELECT</span>
    <span class=n>timeslot</span><span class=p>,</span>
    <span class=n>sumMap</span><span class=p>(</span><span class=n>statusMap</span><span class=p>.</span><span class=n>status</span><span class=p>,</span> <span class=n>statusMap</span><span class=p>.</span><span class=n>requests</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>sum_map</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>timeslot</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌────────────timeslot─┬─sumMap(statusMap.status, statusMap.requests)─┐
│ 2000-01-01 00:00:00 │ ([1,2,3,4,5],[10,10,20,10,10])               │
│ 2000-01-01 00:01:00 │ ([4,5,6,7,8],[10,10,20,10,10])               │
└─────────────────────┴──────────────────────────────────────────────┘
</code></pre></div> <h2 id=skewpop>skewPop<a class=headerlink href=#skewpop title="Permanent link">&para;</a></h2> <p>Calcule la <a href=https://en.wikipedia.org/wiki/Skewness rel="external nofollow noreferrer">asymétrie</a> d'une séquence.</p> <div class=codehilite><pre><span></span><code><span class=n>skewPop</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>Expression</a> retour d'un nombre.</p> <p><strong>Valeur renvoyée</strong></p> <p>The skewness of the given distribution. Type — <a href=../../data_types/float/ >Float64</a></p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>skewPop</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div> <h2 id=skewsamp>skewSamp<a class=headerlink href=#skewsamp title="Permanent link">&para;</a></h2> <p>Calcule la <a href=https://en.wikipedia.org/wiki/Skewness rel="external nofollow noreferrer">asymétrie de l'échantillon</a> d'une séquence.</p> <p>Il représente une estimation non biaisée de l'asymétrie d'une variable aléatoire si les valeurs passées forme de son échantillon.</p> <div class=codehilite><pre><span></span><code><span class=n>skewSamp</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>Expression</a> retour d'un nombre.</p> <p><strong>Valeur renvoyée</strong></p> <p>The skewness of the given distribution. Type — <a href=../../data_types/float/ >Float64</a>. Si <code>n &lt;= 1</code> (<code>n</code> est la taille de l'échantillon), alors la fonction renvoie <code>nan</code>.</p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>skewSamp</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div> <h2 id=kurtpop>kurtPop<a class=headerlink href=#kurtpop title="Permanent link">&para;</a></h2> <p>Calcule la <a href=https://en.wikipedia.org/wiki/Kurtosis rel="external nofollow noreferrer">kurtosis</a> d'une séquence.</p> <div class=codehilite><pre><span></span><code><span class=n>kurtPop</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>Expression</a> retour d'un nombre.</p> <p><strong>Valeur renvoyée</strong></p> <p>The kurtosis of the given distribution. Type — <a href=../../data_types/float/ >Float64</a></p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>kurtPop</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div> <h2 id=kurtsamp>kurtSamp<a class=headerlink href=#kurtsamp title="Permanent link">&para;</a></h2> <p>Calcule la <a href=https://en.wikipedia.org/wiki/Kurtosis rel="external nofollow noreferrer">l'échantillon le coefficient d'aplatissement</a> d'une séquence.</p> <p>Il représente une estimation non biaisée de la kurtose d'une variable aléatoire si les valeurs passées forment son échantillon.</p> <div class=codehilite><pre><span></span><code><span class=n>kurtSamp</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>Expression</a> retour d'un nombre.</p> <p><strong>Valeur renvoyée</strong></p> <p>The kurtosis of the given distribution. Type — <a href=../../data_types/float/ >Float64</a>. Si <code>n &lt;= 1</code> (<code>n</code> la taille de l'échantillon), alors la fonction renvoie <code>nan</code>.</p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>kurtSamp</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div> <h2 id=agg-function-timeseriesgroupsum>timeSeriesGroupSum(uid, horodatage, valeur)<a class=headerlink href=#agg-function-timeseriesgroupsum title="Permanent link">&para;</a></h2> <p><code>timeSeriesGroupSum</code> peut agréger différentes séries temporelles qui échantillonnent l'horodatage et non l'alignement.<br> Il utilisera une interpolation linéaire entre deux échantillons d'horodatage, puis additionnera les séries temporelles ensemble.</p> <ul> <li><code>uid</code> la série temporelle est elle unique, <code>UInt64</code>.</li> <li><code>timestamp</code> est de type Int64 afin de prendre en charge la milliseconde ou la microseconde.</li> <li><code>value</code> est la métrique.</li> </ul> <p>La fonction renvoie un tableau de tuples avec <code>(timestamp, aggregated_value)</code> pair.</p> <p>Avant d'utiliser cette fonction, assurez-vous <code>timestamp</code> est dans l'ordre croissant.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code>┌─uid─┬─timestamp─┬─value─┐
│ 1   │     2     │   0.2 │
│ 1   │     7     │   0.7 │
│ 1   │    12     │   1.2 │
│ 1   │    17     │   1.7 │
│ 1   │    25     │   2.5 │
│ 2   │     3     │   0.6 │
│ 2   │     8     │   1.6 │
│ 2   │    12     │   2.4 │
│ 2   │    18     │   3.6 │
│ 2   │    24     │   4.8 │
└─────┴───────────┴───────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>time_series</span><span class=p>(</span>
    <span class=n>uid</span>       <span class=n>UInt64</span><span class=p>,</span>
    <span class=k>timestamp</span> <span class=n>Int64</span><span class=p>,</span>
    <span class=n>value</span>     <span class=n>Float64</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>time_series</span> <span class=k>VALUES</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>2</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>7</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>2</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>17</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>7</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>25</span><span class=p>,</span><span class=mi>2</span><span class=p>.</span><span class=mi>5</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>2</span><span class=p>.</span><span class=mi>4</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>3</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>24</span><span class=p>,</span><span class=mi>4</span><span class=p>.</span><span class=mi>8</span><span class=p>);</span>

<span class=k>SELECT</span> <span class=n>timeSeriesGroupSum</span><span class=p>(</span><span class=n>uid</span><span class=p>,</span> <span class=k>timestamp</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
<span class=k>FROM</span> <span class=p>(</span>
    <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>time_series</span> <span class=k>order</span> <span class=k>by</span> <span class=k>timestamp</span> <span class=k>ASC</span>
<span class=p>);</span>
</code></pre></div> <p>Et le résultat sera:</p> <div class=codehilite><pre><span></span><code>[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]
</code></pre></div> <h2 id=agg-function-timeseriesgroupratesum>timeSeriesGroupRateSum(uid, ts, val)<a class=headerlink href=#agg-function-timeseriesgroupratesum title="Permanent link">&para;</a></h2> <p>De même timeSeriesGroupRateSum, timeSeriesGroupRateSum calculera le taux de séries temporelles, puis additionnera les taux ensemble.<br> En outre, l'horodatage doit être dans l'ordre croissant avant d'utiliser cette fonction.</p> <p>Utilisez cette fonction, le résultat ci-dessus sera:</p> <div class=codehilite><pre><span></span><code>[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]
</code></pre></div> <h2 id=agg_function-avg>avg (x)<a class=headerlink href=#agg_function-avg title="Permanent link">&para;</a></h2> <p>Calcule la moyenne.<br> Ne fonctionne que pour les numéros.<br> Le résultat est toujours Float64.</p> <h2 id=agg_function-uniq>uniq<a class=headerlink href=#agg_function-uniq title="Permanent link">&para;</a></h2> <p>Calcule le nombre approximatif des différentes valeurs de l'argument.</p> <div class=codehilite><pre><span></span><code><span class=n>uniq</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p>La fonction prend un nombre variable de paramètres. Les paramètres peuvent être <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code> ou des types numériques.</p> <p><strong>Valeur renvoyée</strong></p> <ul> <li>A <a href=../../data_types/int_uint/ >UInt64</a>numéro de type.</li> </ul> <p><strong>Détails de mise en œuvre</strong></p> <p>Fonction:</p> <ul> <li> <p>Calcule un hachage pour tous les paramètres de l'agrégat, puis l'utilise dans les calculs.</p> </li> <li> <p>Utilise un algorithme d'échantillonnage adaptatif. Pour l'état de calcul, La fonction utilise un échantillon de valeurs de hachage d'éléments jusqu'à 65536.</p> <div class=codehilite><pre><span></span><code><span class=n>This</span> <span class=n>algorithm</span> <span class=k>is</span> <span class=n>very</span> <span class=n>accurate</span> <span class=k>and</span> <span class=n>very</span> <span class=n>efficient</span> <span class=k>on</span> <span class=n>the</span> <span class=n>CPU</span><span class=p>.</span> <span class=k>When</span> <span class=n>the</span> <span class=n>query</span> <span class=n>contains</span> <span class=n>several</span> <span class=n>of</span> <span class=n>these</span> <span class=n>functions</span><span class=p>,</span> <span class=k>using</span> <span class=ss>`uniq`</span> <span class=k>is</span> <span class=n>almost</span> <span class=k>as</span> <span class=n>fast</span> <span class=k>as</span> <span class=k>using</span> <span class=n>other</span> <span class=n>aggregate</span> <span class=n>functions</span><span class=p>.</span>
</code></pre></div> </li> <li> <p>Fournit le résultat de manière déterministe (cela ne dépend pas de l'ordre de traitement de la requête).</p> </li> </ul> <p>Nous vous recommandons d'utiliser cette fonction dans presque tous les scénarios.</p> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#agg_function-uniqcombined>uniqcombiné</a></li> <li><a href=#agg_function-uniqcombined64>uniqCombined64</a></li> <li><a href=#agg_function-uniqhll12>uniqHLL12</a></li> <li><a href=#agg_function-uniqexact>uniqExact</a></li> </ul> <h2 id=agg_function-uniqcombined>uniqcombiné<a class=headerlink href=#agg_function-uniqcombined title="Permanent link">&para;</a></h2> <p>Calcule le nombre approximatif de différentes valeurs d'argument.</p> <div class=codehilite><pre><span></span><code><span class=n>uniqCombined</span><span class=p>(</span><span class=n>HLL_precision</span><span class=p>)(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p>Le <code>uniqCombined</code> la fonction est un bon choix pour calculer le nombre de valeurs différentes.</p> <p><strong>Paramètre</strong></p> <p>La fonction prend un nombre variable de paramètres. Les paramètres peuvent être <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code> ou des types numériques.</p> <p><code>HLL_precision</code> est le logarithme en base 2 du nombre de cellules dans <a href=https://en.wikipedia.org/wiki/HyperLogLog rel="external nofollow noreferrer">HyperLogLog</a>. Facultatif, vous pouvez utiliser la fonction comme <code>uniqCombined(x[, ...])</code>. La valeur par défaut pour <code>HLL_precision</code> est 17, qui est effectivement 96 Ko d'espace(2 ^ 17 cellules, 6 bits chacune).</p> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Nombre <a href=../../data_types/int_uint/ >UInt64</a>numéro de type.</li> </ul> <p><strong>Détails de mise en œuvre</strong></p> <p>Fonction:</p> <ul> <li> <p>Calcule un hachage (hachage 64 bits pour <code>String</code> et 32 bits sinon) pour tous les paramètres dans l'agrégat, puis l'utilise dans les calculs.</p> </li> <li> <p>Utilise une combinaison de trois algorithmes: tableau, table de hachage et HyperLogLog avec une table de correction d'erreur.</p> <div class=codehilite><pre><span></span><code><span class=err>For a small number of distinct elements, an array is used. When the set size is larger, a hash table is used. For a larger number of elements, HyperLogLog is used, which will occupy a fixed amount of memory.</span>
</code></pre></div> </li> <li> <p>Fournit le résultat de manière déterministe (cela ne dépend pas de l'ordre de traitement de la requête).</p> </li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Comme il utilise le hachage 32 bits pour non-<code>String</code> type, le résultat aura une erreur très élevée pour les cardinalités significativement plus grandes que <code>UINT_MAX</code> (erreur va augmenter rapidement après quelques dizaines de milliards de valeurs distinctes), donc dans ce cas, vous devez utiliser <a href=#agg_function-uniqcombined64>uniqCombined64</a></p> </div> <p>Par rapport à la <a href=#agg_function-uniq>uniq</a> la fonction, la <code>uniqCombined</code>:</p> <ul> <li>Consomme plusieurs fois moins de mémoire.</li> <li>Calcule avec plusieurs fois plus de précision.</li> <li>A généralement des performances légèrement inférieures. Dans certains scénarios, <code>uniqCombined</code> peut faire mieux que <code>uniq</code> par exemple, avec des requêtes distribuées qui transmettent un grand nombre d'agrégation des états sur le réseau.</li> </ul> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#agg_function-uniq>uniq</a></li> <li><a href=#agg_function-uniqcombined64>uniqCombined64</a></li> <li><a href=#agg_function-uniqhll12>uniqHLL12</a></li> <li><a href=#agg_function-uniqexact>uniqExact</a></li> </ul> <h2 id=agg_function-uniqcombined64>uniqCombined64<a class=headerlink href=#agg_function-uniqcombined64 title="Permanent link">&para;</a></h2> <p>Même que <a href=#agg_function-uniqcombined>uniqcombiné</a>, mais utilise le hachage 64 bits pour tous les types de données.</p> <h2 id=agg_function-uniqhll12>uniqHLL12<a class=headerlink href=#agg_function-uniqhll12 title="Permanent link">&para;</a></h2> <p>Calcule le nombre approximatif de différentes valeurs d'argument, en utilisant <a href=https://en.wikipedia.org/wiki/HyperLogLog rel="external nofollow noreferrer">HyperLogLog</a> algorithme.</p> <div class=codehilite><pre><span></span><code><span class=n>uniqHLL12</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p>La fonction prend un nombre variable de paramètres. Les paramètres peuvent être <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code> ou des types numériques.</p> <p><strong>Valeur renvoyée</strong></p> <ul> <li>A <a href=../../data_types/int_uint/ >UInt64</a>numéro de type.</li> </ul> <p><strong>Détails de mise en œuvre</strong></p> <p>Fonction:</p> <ul> <li> <p>Calcule un hachage pour tous les paramètres de l'agrégat, puis l'utilise dans les calculs.</p> </li> <li> <p>Utilise L'algorithme HyperLogLog pour approximer le nombre de valeurs d'argument différentes.</p> <div class=codehilite><pre><span></span><code><span class=err>212 5-bit cells are used. The size of the state is slightly more than 2.5 KB. The result is not very accurate (up to ~10% error) for small data sets (&lt;10K elements). However, the result is fairly accurate for high-cardinality data sets (10K-100M), with a maximum error of ~1.6%. Starting from 100M, the estimation error increases, and the function will return very inaccurate results for data sets with extremely high cardinality (1B+ elements).</span>
</code></pre></div> </li> <li> <p>Fournit le résultat déterminé (il ne dépend pas de l'ordre de traitement de la requête).</p> </li> </ul> <p>Nous ne recommandons pas d'utiliser cette fonction. Dans la plupart des cas, l'utilisation de la <a href=#agg_function-uniq>uniq</a> ou <a href=#agg_function-uniqcombined>uniqcombiné</a> fonction.</p> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#agg_function-uniq>uniq</a></li> <li><a href=#agg_function-uniqcombined>uniqcombiné</a></li> <li><a href=#agg_function-uniqexact>uniqExact</a></li> </ul> <h2 id=agg_function-uniqexact>uniqExact<a class=headerlink href=#agg_function-uniqexact title="Permanent link">&para;</a></h2> <p>Calcule le nombre exact de différentes valeurs d'argument.</p> <div class=codehilite><pre><span></span><code><span class=n>uniqExact</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p>L'utilisation de la <code>uniqExact</code> fonction si vous avez absolument besoin d'un résultat exact. Sinon l'utilisation de la <a href=#agg_function-uniq>uniq</a> fonction.</p> <p>Le <code>uniqExact</code> la fonction utilise plus de mémoire que <code>uniq</code> parce que la taille de l'état a surabondance de croissance que le nombre de valeurs différentes augmente.</p> <p><strong>Paramètre</strong></p> <p>La fonction prend un nombre variable de paramètres. Les paramètres peuvent être <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code> ou des types numériques.</p> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#agg_function-uniq>uniq</a></li> <li><a href=#agg_function-uniqcombined>uniqcombiné</a></li> <li><a href=#agg_function-uniqhll12>uniqHLL12</a></li> </ul> <h2 id=agg_function-grouparray>groupArray(x), groupArray (max_size) (x)<a class=headerlink href=#agg_function-grouparray title="Permanent link">&para;</a></h2> <p>Crée un tableau de valeurs de l'argument.<br> Les valeurs peuvent être ajoutées au tableau dans une (indéterminée) de commande.</p> <p>La deuxième version (avec le <code>max_size</code> paramètre) limite la taille du tableau résultant à <code>max_size</code> élément.<br> Exemple, <code>groupArray (1) (x)</code> est équivalent à <code>[any (x)]</code>.</p> <p>Dans certains cas, vous pouvez toujours compter sur l'ordre de l'exécution. Cela s'applique aux cas où <code>SELECT</code> provient d'une sous-requête qui utilise <code>ORDER BY</code>.</p> <h2 id=grouparrayinsertatvalue-position>groupeparrayinsertat(valeur, position)<a class=headerlink href=#grouparrayinsertatvalue-position title="Permanent link">&para;</a></h2> <p>Insère une valeur dans le tableau à la position spécifiée.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Cette fonction utilise des positions à base zéro, contrairement aux positions à base unique classiques pour les tableaux SQL.</p> </div> <p>Accepts the value and position as input. If several values ​​are inserted into the same position, any of them might end up in the resulting array (the first one will be used in the case of single-threaded execution). If no value is inserted into a position, the position is assigned the default value.</p> <p>Paramètres facultatifs:</p> <ul> <li>Valeur par défaut pour la substitution dans des positions vides.</li> <li>La longueur du tableau résultant. Cela vous permet de recevoir des tableaux de la même taille pour tous les agrégats clés. Lorsque vous utilisez ce paramètre, la valeur par défaut doit être spécifiée.</li> </ul> <h2 id=agg_function-grouparraymovingsum>groupeparraymovingsum<a class=headerlink href=#agg_function-grouparraymovingsum title="Permanent link">&para;</a></h2> <p>Calcule la somme mobile des valeurs d'entrée.</p> <div class=codehilite><pre><span></span><code><span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
<span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=n>window_size</span><span class=p>)(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
</code></pre></div> <p>La fonction peut prendre la taille de la fenêtre comme paramètre. Si spécifié, la fonction prend la taille de la fenêtre égal au nombre de lignes dans la colonne.</p> <p><strong>Paramètre</strong></p> <ul> <li><code>numbers_for_summing</code> — <a href=../../syntax/#syntax-expressions>Expression</a> résultant en une valeur de type de données Numérique.</li> <li><code>window_size</code> — Size of the calculation window.</li> </ul> <p><strong>Valeurs renvoyées</strong></p> <ul> <li>Tableau de la même taille et de même type que les données d'entrée.</li> </ul> <p><strong>Exemple</strong></p> <p>La table d'échantillon:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>t</span>
<span class=p>(</span>
    <span class=o>`</span><span class=nb>int</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>float</span><span class=o>`</span> <span class=n>Float32</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>dec</span><span class=o>`</span> <span class=n>Decimal32</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,7,14] │ [1.1,3.3000002,7.7000003,15.47] │ [1.10,3.30,7.70,15.47] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,6,11] │ [1.1,3.3000002,6.6000004,12.17] │ [1.10,3.30,6.60,12.17] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</code></pre></div> <h2 id=agg_function-grouparraymovingavg>groupArrayMovingAvg<a class=headerlink href=#agg_function-grouparraymovingavg title="Permanent link">&para;</a></h2> <p>Calcule la moyenne mobile des valeurs d'entrée.</p> <div class=codehilite><pre><span></span><code><span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
<span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=n>window_size</span><span class=p>)(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
</code></pre></div> <p>La fonction peut prendre la taille de la fenêtre comme paramètre. Si spécifié, la fonction prend la taille de la fenêtre égal au nombre de lignes dans la colonne.</p> <p><strong>Paramètre</strong></p> <ul> <li><code>numbers_for_summing</code> — <a href=../../syntax/#syntax-expressions>Expression</a> résultant en une valeur de type de données Numérique.</li> <li><code>window_size</code> — Size of the calculation window.</li> </ul> <p><strong>Valeurs renvoyées</strong></p> <ul> <li>Tableau de la même taille et de même type que les données d'entrée.</li> </ul> <p>La fonction utilise <a href=https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero rel="external nofollow noreferrer">l'arrondi vers zéro</a>. Il tronque les décimales insignifiantes pour le type de données résultant.</p> <p><strong>Exemple</strong></p> <p>La table d'échantillon <code>b</code>:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>t</span>
<span class=p>(</span>
    <span class=o>`</span><span class=nb>int</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>float</span><span class=o>`</span> <span class=n>Float32</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>dec</span><span class=o>`</span> <span class=n>Decimal32</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─I─────────┬─F───────────────────────────────────┬─D─────────────────────┐
│ [0,0,1,3] │ [0.275,0.82500005,1.9250001,3.8675] │ [0.27,0.82,1.92,3.86] │
└───────────┴─────────────────────────────────────┴───────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─I─────────┬─F────────────────────────────────┬─D─────────────────────┐
│ [0,1,3,5] │ [0.55,1.6500001,3.3000002,6.085] │ [0.55,1.65,3.30,6.08] │
└───────────┴──────────────────────────────────┴───────────────────────┘
</code></pre></div> <h2 id=groupuniqarrayx-groupuniqarraymax-sizex>groupUniqArray(x), groupUniqArray (max_size) (x)<a class=headerlink href=#groupuniqarrayx-groupuniqarraymax-sizex title="Permanent link">&para;</a></h2> <p>Crée un tableau à partir de différentes valeurs d'argument. La consommation de mémoire est la même que pour la <code>uniqExact</code> fonction.</p> <p>La deuxième version (avec le <code>max_size</code> paramètre) limite la taille du tableau résultant à <code>max_size</code> élément.<br> Exemple, <code>groupUniqArray(1)(x)</code> est équivalent à <code>[any(x)]</code>.</p> <h2 id=quantile>quantile<a class=headerlink href=#quantile title="Permanent link">&para;</a></h2> <p>Calcule une approximation <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">quantile</a> des données numériques de la séquence.</p> <p>Cette fonction s'applique <a href=https://en.wikipedia.org/wiki/Reservoir_sampling rel="external nofollow noreferrer">réservoir d'échantillonnage</a> avec une taille de réservoir jusqu'à 8192 et un générateur de nombres aléatoires pour l'échantillonnage. Le résultat est non-déterministe. Pour obtenir un quantile exact, Utilisez le <a href=#quantileexact>quantileExact</a> fonction.</p> <p>Lorsque vous utilisez plusieurs <code>quantile*</code> fonctionne avec différents niveaux dans une requête, les états internes ne sont pas combinées (qui est, la requête fonctionne moins efficacement qu'il le pouvait). Dans ce cas, utilisez la <a href=#quantiles>les quantiles</a> fonction.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantile</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code>median</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> la valeur dans la plage de <code>[0.01, 0.99]</code>. Valeur par défaut: 0.5. À <code>level=0.5</code> la fonction calcule <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">médian</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>types de données</a>, <a href=../../data_types/date/ >Date</a> ou <a href=../../data_types/datetime/ >DateTime</a>.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Approximative de quantiles de niveau spécifié.</li> </ul> <p>Type:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> pour l'entrée de type de données numériques.</li> <li><a href=../../data_types/date/ >Date</a> si les valeurs d'entrée ont le <code>Date</code> type.</li> <li><a href=../../data_types/datetime/ >DateTime</a> si les valeurs d'entrée ont le <code>DateTime</code> type.</li> </ul> <p><strong>Exemple</strong></p> <p>Table d'entrée:</p> <div class=codehilite><pre><span></span><code>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantile</span><span class=p>(</span><span class=n>val</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─quantile(val)─┐
│           1.5 │
└───────────────┘
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#median>médian</a></li> <li><a href=#quantiles>les quantiles</a></li> </ul> <h2 id=quantiledeterministic>quantileDeterministic<a class=headerlink href=#quantiledeterministic title="Permanent link">&para;</a></h2> <p>Calcule une approximation <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">quantile</a> des données numériques de la séquence.</p> <p>Cette fonction s'applique <a href=https://en.wikipedia.org/wiki/Reservoir_sampling rel="external nofollow noreferrer">réservoir d'échantillonnage</a> avec une taille de réservoir jusqu'à 8192 et un algorithme déterministe d'échantillonnage. Le résultat est déterministe. Pour obtenir un quantile exact, Utilisez le <a href=#quantileexact>quantileExact</a> fonction.</p> <p>Lorsque vous utilisez plusieurs <code>quantile*</code> fonctionne avec différents niveaux dans une requête, les états internes ne sont pas combinées (qui est, la requête fonctionne moins efficacement qu'il le pouvait). Dans ce cas, utilisez la <a href=#quantiles>les quantiles</a> fonction.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileDeterministic</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>determinator</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code>medianDeterministic</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> la valeur dans la plage de <code>[0.01, 0.99]</code>. Valeur par défaut: 0.5. À <code>level=0.5</code> la fonction calcule <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">médian</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>types de données</a>, <a href=../../data_types/date/ >Date</a> ou <a href=../../data_types/datetime/ >DateTime</a>.</li> <li><code>determinator</code> — Number whose hash is used instead of a random number generator in the reservoir sampling algorithm to make the result of sampling deterministic. As a determinator you can use any deterministic positive number, for example, a user id or an event id. If the same determinator value occures too often, the function works incorrectly.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Approximative de quantiles de niveau spécifié.</li> </ul> <p>Type:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> pour l'entrée de type de données numériques.</li> <li><a href=../../data_types/date/ >Date</a> si les valeurs d'entrée ont le <code>Date</code> type.</li> <li><a href=../../data_types/datetime/ >DateTime</a> si les valeurs d'entrée ont le <code>DateTime</code> type.</li> </ul> <p><strong>Exemple</strong></p> <p>Table d'entrée:</p> <div class=codehilite><pre><span></span><code>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileDeterministic</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─quantileDeterministic(val, 1)─┐
│                           1.5 │
└───────────────────────────────┘
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#median>médian</a></li> <li><a href=#quantiles>les quantiles</a></li> </ul> <h2 id=quantileexact>quantileExact<a class=headerlink href=#quantileexact title="Permanent link">&para;</a></h2> <p>Exactement calcule l' <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">quantile</a> des données numériques de la séquence.</p> <p>To get exact value, all the passed values ​​are combined into an array, which is then partially sorted. Therefore, the function consumes <code>O(n)</code> de mémoire, où <code>n</code> est un nombre de valeurs qui ont été passées. Cependant, pour un petit nombre de valeurs, la fonction est très efficace.</p> <p>Lorsque vous utilisez plusieurs <code>quantile*</code> fonctionne avec différents niveaux dans une requête, les états internes ne sont pas combinées (qui est, la requête fonctionne moins efficacement qu'il le pouvait). Dans ce cas, utilisez la <a href=#quantiles>les quantiles</a> fonction.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileExact</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code>medianExact</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> la valeur dans la plage de <code>[0.01, 0.99]</code>. Valeur par défaut: 0.5. À <code>level=0.5</code> la fonction calcule <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">médian</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>types de données</a>, <a href=../../data_types/date/ >Date</a> ou <a href=../../data_types/datetime/ >DateTime</a>.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Quantiles de niveau spécifié.</li> </ul> <p>Type:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> pour l'entrée de type de données numériques.</li> <li><a href=../../data_types/date/ >Date</a> si les valeurs d'entrée ont le <code>Date</code> type.</li> <li><a href=../../data_types/datetime/ >DateTime</a> si les valeurs d'entrée ont le <code>DateTime</code> type.</li> </ul> <p><strong>Exemple</strong></p> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileExact</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─quantileExact(number)─┐
│                     5 │
└───────────────────────┘
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#median>médian</a></li> <li><a href=#quantiles>les quantiles</a></li> </ul> <h2 id=quantileexactweighted>quantileExactWeighted<a class=headerlink href=#quantileexactweighted title="Permanent link">&para;</a></h2> <p>Exactement calcule l' <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">quantile</a> d'une séquence de données numériques, en tenant compte du poids de chaque élément.</p> <p>To get exact value, all the passed values ​​are combined into an array, which is then partially sorted. Each value is counted with its weight, as if it is present <code>weight</code> times. A hash table is used in the algorithm. Because of this, if the passed values ​​are frequently repeated, the function consumes less RAM than <a href=#quantileexact>quantileExact</a>. Vous pouvez utiliser cette fonction au lieu de <code>quantileExact</code> et spécifiez le poids 1.</p> <p>Lorsque vous utilisez plusieurs <code>quantile*</code> fonctionne avec différents niveaux dans une requête, les états internes ne sont pas combinées (qui est, la requête fonctionne moins efficacement qu'il le pouvait). Dans ce cas, utilisez la <a href=#quantiles>les quantiles</a> fonction.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileExactWeighted</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code>medianExactWeighted</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> la valeur dans la plage de <code>[0.01, 0.99]</code>. Valeur par défaut: 0.5. À <code>level=0.5</code> la fonction calcule <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">médian</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>types de données</a>, <a href=../../data_types/date/ >Date</a> ou <a href=../../data_types/datetime/ >DateTime</a>.</li> <li><code>weight</code> — Column with weights of sequence members. Weight is a number of value occurrences.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Quantiles de niveau spécifié.</li> </ul> <p>Type:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> pour l'entrée de type de données numériques.</li> <li><a href=../../data_types/date/ >Date</a> si les valeurs d'entrée ont le <code>Date</code> type.</li> <li><a href=../../data_types/datetime/ >DateTime</a> si les valeurs d'entrée ont le <code>DateTime</code> type.</li> </ul> <p><strong>Exemple</strong></p> <p>Table d'entrée:</p> <div class=codehilite><pre><span></span><code>┌─n─┬─val─┐
│ 0 │   3 │
│ 1 │   2 │
│ 2 │   1 │
│ 5 │   4 │
└───┴─────┘
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileExactWeighted</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>val</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─quantileExactWeighted(n, val)─┐
│                             1 │
└───────────────────────────────┘
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#median>médian</a></li> <li><a href=#quantiles>les quantiles</a></li> </ul> <h2 id=quantiletiming>quantileTiming<a class=headerlink href=#quantiletiming title="Permanent link">&para;</a></h2> <p>Avec la précision déterminée calcule le <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">quantile</a> des données numériques de la séquence.</p> <p>Le résultat est déterministe (il ne dépend pas de l'ordre de traitement de la requête). La fonction est optimisée pour travailler avec des séquences qui décrivent des distributions comme les temps de chargement des pages web ou les temps de réponse du backend.</p> <p>Lorsque vous utilisez plusieurs <code>quantile*</code> fonctionne avec différents niveaux dans une requête, les états internes ne sont pas combinées (qui est, la requête fonctionne moins efficacement qu'il le pouvait). Dans ce cas, utilisez la <a href=#quantiles>les quantiles</a> fonction.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileTiming</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code>medianTiming</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li> <p><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> la valeur dans la plage de <code>[0.01, 0.99]</code>. Valeur par défaut: 0.5. À <code>level=0.5</code> la fonction calcule <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">médian</a>.</p> </li> <li> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>Expression</a> sur une colonne Valeurs renvoyant un <a href=../../data_types/float/ >Flottant*</a>numéro de type.</p> <div class=codehilite><pre><span></span><code><span class=err>- If negative values are passed to the function, the behavior is undefined.</span>
<span class=err>- If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</span>
</code></pre></div> </li> </ul> <p><strong>Exactitude</strong></p> <p>Le calcul est précis si:</p> <ul> <li>Le nombre Total de valeurs ne dépasse pas 5670.</li> <li>Le nombre Total de valeurs dépasse 5670, mais le temps de chargement de la page est inférieur à 1024ms.</li> </ul> <p>Sinon, le résultat du calcul est arrondi au plus proche multiple de 16 ms.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Pour calculer les quantiles de temps de chargement de page, cette fonction est plus efficace et précise que <a href=#quantile>quantile</a>.</p> </div> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Quantiles de niveau spécifié.</li> </ul> <p>Type: <code>Float32</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Si aucune valeur n'est transmise à la fonction (lors de l'utilisation de <code>quantileTimingIf</code>), <a href=../../data_types/float/#data_type-float-nan-inf>Nan</a> est retourné. Le but est de différencier ces cas de cas qui aboutissent à zéro. Voir <a href=../../statements/select/#select-order-by>Clause ORDER BY</a> pour des notes sur le tri <code>NaN</code> valeur.</p> </div> <p><strong>Exemple</strong></p> <p>Table d'entrée:</p> <div class=codehilite><pre><span></span><code>┌─response_time─┐
│            72 │
│           112 │
│           126 │
│           145 │
│           104 │
│           242 │
│           313 │
│           168 │
│           108 │
└───────────────┘
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileTiming</span><span class=p>(</span><span class=n>response_time</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─quantileTiming(response_time)─┐
│                           126 │
└───────────────────────────────┘
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#median>médian</a></li> <li><a href=#quantiles>les quantiles</a></li> </ul> <h2 id=quantiletimingweighted>quantileTimingWeighted<a class=headerlink href=#quantiletimingweighted title="Permanent link">&para;</a></h2> <p>Avec la précision déterminée calcule le <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">quantile</a> d'une séquence de données numériques en fonction du poids de chaque élément de séquence.</p> <p>Le résultat est déterministe (il ne dépend pas de l'ordre de traitement de la requête). La fonction est optimisée pour travailler avec des séquences qui décrivent des distributions comme les temps de chargement des pages web ou les temps de réponse du backend.</p> <p>Lorsque vous utilisez plusieurs <code>quantile*</code> fonctionne avec différents niveaux dans une requête, les états internes ne sont pas combinées (qui est, la requête fonctionne moins efficacement qu'il le pouvait). Dans ce cas, utilisez la <a href=#quantiles>les quantiles</a> fonction.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileTimingWeighted</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code>medianTimingWeighted</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li> <p><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> la valeur dans la plage de <code>[0.01, 0.99]</code>. Valeur par défaut: 0.5. À <code>level=0.5</code> la fonction calcule <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">médian</a>.</p> </li> <li> <p><code>expr</code> — <a href=../../syntax/#syntax-expressions>Expression</a> sur une colonne Valeurs renvoyant un <a href=../../data_types/float/ >Flottant*</a>numéro de type.</p> <div class=codehilite><pre><span></span><code><span class=err>- If negative values are passed to the function, the behavior is undefined.</span>
<span class=err>- If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</span>
</code></pre></div> </li> <li> <p><code>weight</code> — Column with weights of sequence elements. Weight is a number of value occurrences.</p> </li> </ul> <p><strong>Exactitude</strong></p> <p>Le calcul est précis si:</p> <ul> <li>Le nombre Total de valeurs ne dépasse pas 5670.</li> <li>Le nombre Total de valeurs dépasse 5670, mais le temps de chargement de la page est inférieur à 1024ms.</li> </ul> <p>Sinon, le résultat du calcul est arrondi au plus proche multiple de 16 ms.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Pour calculer les quantiles de temps de chargement de page, cette fonction est plus efficace et précise que <a href=#quantile>quantile</a>.</p> </div> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Quantiles de niveau spécifié.</li> </ul> <p>Type: <code>Float32</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Si aucune valeur n'est transmise à la fonction (lors de l'utilisation de <code>quantileTimingIf</code>), <a href=../../data_types/float/#data_type-float-nan-inf>Nan</a> est retourné. Le but est de différencier ces cas de cas qui aboutissent à zéro. Voir <a href=../../statements/select/#select-order-by>Clause ORDER BY</a> pour des notes sur le tri <code>NaN</code> valeur.</p> </div> <p><strong>Exemple</strong></p> <p>Table d'entrée:</p> <div class=codehilite><pre><span></span><code>┌─response_time─┬─weight─┐
│            68 │      1 │
│           104 │      2 │
│           112 │      3 │
│           126 │      2 │
│           138 │      1 │
│           162 │      1 │
└───────────────┴────────┘
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileTimingWeighted</span><span class=p>(</span><span class=n>response_time</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─quantileTimingWeighted(response_time, weight)─┐
│                                           112 │
└───────────────────────────────────────────────┘
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#median>médian</a></li> <li><a href=#quantiles>les quantiles</a></li> </ul> <h2 id=quantiletdigest>quantileTDigest<a class=headerlink href=#quantiletdigest title="Permanent link">&para;</a></h2> <p>Calcule une approximation <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">quantile</a> d'une séquence de données numériques utilisant <a href=https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf rel="external nofollow noreferrer">t-digest</a> algorithme.</p> <p>L'erreur maximale est de 1%. La consommation de mémoire est <code>log(n)</code>, où <code>n</code> est un certain nombre de valeurs. Le résultat dépend de l'ordre d'exécution de la requête et n'est pas déterministe.</p> <p>La performance de la fonction est inférieure à la performance de <a href=#quantile>quantile</a> ou <a href=#quantiletiming>quantileTiming</a>. En termes de rapport entre la taille de L'état et la précision, cette fonction est bien meilleure que <code>quantile</code>.</p> <p>Lorsque vous utilisez plusieurs <code>quantile*</code> fonctionne avec différents niveaux dans une requête, les états internes ne sont pas combinées (qui est, la requête fonctionne moins efficacement qu'il le pouvait). Dans ce cas, utilisez la <a href=#quantiles>les quantiles</a> fonction.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileTDigest</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code>medianTDigest</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> la valeur dans la plage de <code>[0.01, 0.99]</code>. Valeur par défaut: 0.5. À <code>level=0.5</code> la fonction calcule <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">médian</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>types de données</a>, <a href=../../data_types/date/ >Date</a> ou <a href=../../data_types/datetime/ >DateTime</a>.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Approximative de quantiles de niveau spécifié.</li> </ul> <p>Type:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> pour l'entrée de type de données numériques.</li> <li><a href=../../data_types/date/ >Date</a> si les valeurs d'entrée ont le <code>Date</code> type.</li> <li><a href=../../data_types/datetime/ >DateTime</a> si les valeurs d'entrée ont le <code>DateTime</code> type.</li> </ul> <p><strong>Exemple</strong></p> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileTDigest</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─quantileTDigest(number)─┐
│                     4.5 │
└─────────────────────────┘
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#median>médian</a></li> <li><a href=#quantiles>les quantiles</a></li> </ul> <h2 id=quantiletdigestweighted>quantileTDigestWeighted<a class=headerlink href=#quantiletdigestweighted title="Permanent link">&para;</a></h2> <p>Calcule une approximation <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer">quantile</a> d'une séquence de données numériques utilisant <a href=https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf rel="external nofollow noreferrer">t-digest</a> algorithme. La fonction prend en compte le poids de chaque séquence de membre. L'erreur maximale est de 1%. La consommation de mémoire est <code>log(n)</code>, où <code>n</code> est un certain nombre de valeurs.</p> <p>La performance de la fonction est inférieure à la performance de <a href=#quantile>quantile</a> ou <a href=#quantiletiming>quantileTiming</a>. En termes de rapport entre la taille de L'état et la précision, cette fonction est bien meilleure que <code>quantile</code>.</p> <p>Le résultat dépend de l'ordre d'exécution de la requête et n'est pas déterministe.</p> <p>Lorsque vous utilisez plusieurs <code>quantile*</code> fonctionne avec différents niveaux dans une requête, les états internes ne sont pas combinées (qui est, la requête fonctionne moins efficacement qu'il le pouvait). Dans ce cas, utilisez la <a href=#quantiles>les quantiles</a> fonction.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>quantileTDigest</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code>medianTDigest</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li><code>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code>level</code> la valeur dans la plage de <code>[0.01, 0.99]</code>. Valeur par défaut: 0.5. À <code>level=0.5</code> la fonction calcule <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer">médian</a>.</li> <li><code>expr</code> — Expression over the column values resulting in numeric <a href=../../data_types/#data_types>types de données</a>, <a href=../../data_types/date/ >Date</a> ou <a href=../../data_types/datetime/ >DateTime</a>.</li> <li><code>weight</code> — Column with weights of sequence elements. Weight is a number of value occurrences.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Approximative de quantiles de niveau spécifié.</li> </ul> <p>Type:</p> <ul> <li><a href=../../data_types/float/ >Float64</a> pour l'entrée de type de données numériques.</li> <li><a href=../../data_types/date/ >Date</a> si les valeurs d'entrée ont le <code>Date</code> type.</li> <li><a href=../../data_types/datetime/ >DateTime</a> si les valeurs d'entrée ont le <code>DateTime</code> type.</li> </ul> <p><strong>Exemple</strong></p> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>quantileTDigestWeighted</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─quantileTDigestWeighted(number, 1)─┐
│                                4.5 │
└────────────────────────────────────┘
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#median>médian</a></li> <li><a href=#quantiles>les quantiles</a></li> </ul> <h2 id=median>médian<a class=headerlink href=#median title="Permanent link">&para;</a></h2> <p>Le <code>median*</code> les fonctions sont les Alias pour le correspondant <code>quantile*</code> fonction. Ils calculent la médiane d'un échantillon de données numériques.</p> <p>Fonction:</p> <ul> <li><code>median</code> — Alias for <a href=#quantile>quantile</a>.</li> <li><code>medianDeterministic</code> — Alias for <a href=#quantiledeterministic>quantileDeterministic</a>.</li> <li><code>medianExact</code> — Alias for <a href=#quantileexact>quantileExact</a>.</li> <li><code>medianExactWeighted</code> — Alias for <a href=#quantileexactweighted>quantileExactWeighted</a>.</li> <li><code>medianTiming</code> — Alias for <a href=#quantiletiming>quantileTiming</a>.</li> <li><code>medianTimingWeighted</code> — Alias for <a href=#quantiletimingweighted>quantileTimingWeighted</a>.</li> <li><code>medianTDigest</code> — Alias for <a href=#quantiletdigest>quantileTDigest</a>.</li> <li><code>medianTDigestWeighted</code> — Alias for <a href=#quantiletdigestweighted>quantileTDigestWeighted</a>.</li> </ul> <p><strong>Exemple</strong></p> <p>Table d'entrée:</p> <div class=codehilite><pre><span></span><code>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>medianDeterministic</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─medianDeterministic(val, 1)─┐
│                         1.5 │
└─────────────────────────────┘
</code></pre></div> <h2 id=quantiles>quantiles(level1, level2, …)(x)<a class=headerlink href=#quantiles title="Permanent link">&para;</a></h2> <p>Toutes les fonctions quantiles ont également des fonctions quantiles correspondantes: <code>quantiles</code>, <code>quantilesDeterministic</code>, <code>quantilesTiming</code>, <code>quantilesTimingWeighted</code>, <code>quantilesExact</code>, <code>quantilesExactWeighted</code>, <code>quantilesTDigest</code>. Ces fonctions calculent tous les quantiles des niveaux listés en une seule passe et renvoient un tableau des valeurs résultantes.</p> <h2 id=varsampx>varSamp (x)<a class=headerlink href=#varsampx title="Permanent link">&para;</a></h2> <p>Calcule le montant <code>Σ((x - x̅)^2) / (n - 1)</code>, où <code>n</code> est la taille de l'échantillon et <code>x̅</code>est la valeur moyenne de <code>x</code>.</p> <p>Il représente une estimation non biaisée de la variance d'une variable aléatoire si les valeurs passées forment son échantillon.</p> <p>Retourner <code>Float64</code>. Lorsque <code>n &lt;= 1</code>, retourner <code>+∞</code>.</p> <h2 id=varpopx>varPop (x)<a class=headerlink href=#varpopx title="Permanent link">&para;</a></h2> <p>Calcule le montant <code>Σ((x - x̅)^2) / n</code>, où <code>n</code> est la taille de l'échantillon et <code>x̅</code>est la valeur moyenne de <code>x</code>.</p> <p>En d'autres termes, dispersion pour un ensemble de valeurs. Retourner <code>Float64</code>.</p> <h2 id=stddevsampx>stddevSamp (x)<a class=headerlink href=#stddevsampx title="Permanent link">&para;</a></h2> <p>Le résultat est égal à la racine carrée de <code>varSamp(x)</code>.</p> <h2 id=stddevpopx>stddevPop (x)<a class=headerlink href=#stddevpopx title="Permanent link">&para;</a></h2> <p>Le résultat est égal à la racine carrée de <code>varPop(x)</code>.</p> <h2 id=topknx>topK (N) (x)<a class=headerlink href=#topknx title="Permanent link">&para;</a></h2> <p>Renvoie un tableau des valeurs approximativement les plus fréquentes dans la colonne spécifiée. Le tableau est trié par ordre décroissant de fréquence approximative des valeurs (et non par les valeurs elles-mêmes).</p> <p>Met en œuvre la <a href=http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf rel="external nofollow noreferrer">Gain De Place Filtré</a> algorithme d'analyse de TopK, basé sur l'algorithme de réduction et de combinaison de <a href=https://arxiv.org/pdf/1401.0702.pdf rel="external nofollow noreferrer">Économie D'Espace Parallèle</a>.</p> <div class=codehilite><pre><span></span><code><span class=n>topK</span><span class=p>(</span><span class=n>N</span><span class=p>)(</span><span class=k>column</span><span class=p>)</span>
</code></pre></div> <p>Cette fonction ne fournit pas un résultat garanti. Dans certaines situations, des erreurs peuvent se produire et renvoyer des valeurs fréquentes qui ne sont pas les valeurs les plus fréquentes.</p> <p>Nous vous recommandons d'utiliser l' <code>N &lt; 10</code> valeur; performance est réduite avec grand <code>N</code> valeur. Valeur maximale de <code>N = 65536</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li>‘N’ est le nombre d'éléments de retour.</li> </ul> <p>Si le paramètre est omis, la valeur par défaut 10 est utilisé.</p> <p><strong>Argument</strong></p> <ul> <li>' x ' – The value to calculate frequency.</li> </ul> <p><strong>Exemple</strong></p> <p>Prendre la <a href=../../../getting_started/example_datasets/ontime/ >OnTime</a> ensemble de données et sélectionnez les trois valeurs les plus fréquentes <code>AirlineID</code> colonne.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>topK</span><span class=p>(</span><span class=mi>3</span><span class=p>)(</span><span class=n>AirlineID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─res─────────────────┐
│ [19393,19790,19805] │
└─────────────────────┘
</code></pre></div> <h2 id=topkweighted>topKWeighted<a class=headerlink href=#topkweighted title="Permanent link">&para;</a></h2> <p>Semblable à <code>topK</code> mais prend un argument de type entier - <code>weight</code>. Chaque valeur est comptabilisée <code>weight</code> les temps de calcul de fréquence.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code><span class=n>topKWeighted</span><span class=p>(</span><span class=n>N</span><span class=p>)(</span><span class=n>x</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code>N</code> — The number of elements to return.</li> </ul> <p><strong>Argument</strong></p> <ul> <li><code>x</code> – The value.</li> <li><code>weight</code> — The weight. <a href=../../data_types/int_uint/ >UInt8</a>.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <p>Renvoie un tableau des valeurs avec la somme approximative maximale des poids.</p> <p><strong>Exemple</strong></p> <p>Requête:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>topKWeighted</span><span class=p>(</span><span class=mi>10</span><span class=p>)(</span><span class=nb>number</span><span class=p>,</span> <span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code>┌─topKWeighted(10)(number, number)──────────┐
│ [999,998,997,996,995,994,993,992,991,990] │
└───────────────────────────────────────────┘
</code></pre></div> <h2 id=covarsampx-y>covarSamp(x, y)<a class=headerlink href=#covarsampx-y title="Permanent link">&para;</a></h2> <p>Calcule la valeur de <code>Σ((x - x̅)(y - y̅)) / (n - 1)</code>.</p> <p>Renvoie Float64. Lorsque <code>n &lt;= 1</code>, returns +∞.</p> <h2 id=covarpopx-y>covarPop (x, y)<a class=headerlink href=#covarpopx-y title="Permanent link">&para;</a></h2> <p>Calcule la valeur de <code>Σ((x - x̅)(y - y̅)) / n</code>.</p> <h2 id=corrx-y>corr (x, y)<a class=headerlink href=#corrx-y title="Permanent link">&para;</a></h2> <p>Calcule le coefficient de corrélation de Pearson: <code>Σ((x - x̅)(y - y̅)) / sqrt(Σ((x - x̅)^2) * Σ((y - y̅)^2))</code>.</p> <h2 id=categoricalinformationvalue>categoricalInformationValue<a class=headerlink href=#categoricalinformationvalue title="Permanent link">&para;</a></h2> <p>Calcule la valeur de <code>(P(tag = 1) - P(tag = 0))(log(P(tag = 1)) - log(P(tag = 0)))</code> pour chaque catégorie.</p> <div class=codehilite><pre><span></span><code><span class=n>categoricalInformationValue</span><span class=p>(</span><span class=n>category1</span><span class=p>,</span> <span class=n>category2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>tag</span><span class=p>)</span>
</code></pre></div> <p>Le résultat indique comment une caractéristique discrète (catégorique) <code>[category1, category2, ...]</code> contribuer à un modèle d'apprentissage qui prédit la valeur de <code>tag</code>.</p> <h2 id=simplelinearregression>simplelineearregression<a class=headerlink href=#simplelinearregression title="Permanent link">&para;</a></h2> <p>Effectue une régression linéaire simple (unidimensionnelle).</p> <div class=codehilite><pre><span></span><code><span class=n>simpleLinearRegression</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</code></pre></div> <p>Paramètre:</p> <ul> <li><code>x</code> — Column with dependent variable values.</li> <li><code>y</code> — Column with explanatory variable values.</li> </ul> <p>Valeurs renvoyées:</p> <p>Constant <code>(a, b)</code> de la ligne <code>y = a*x + b</code>.</p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>&#39;simpleLinearRegression&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [0, 1, 2, 3])─┐
│ (1,0)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>&#39;simpleLinearRegression&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [3, 4, 5, 6])─┐
│ (1,3)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=agg_functions-stochasticlinearregression>stochasticLinearRegression<a class=headerlink href=#agg_functions-stochasticlinearregression title="Permanent link">&para;</a></h2> <p>Cette fonction implémente la régression linéaire stochastique. Il prend en charge les paramètres personnalisés pour le taux d'apprentissage, le coefficient de régularisation L2, la taille de mini-lot et a peu de méthodes pour mettre à jour les poids (<a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Adam rel="external nofollow noreferrer">Adam</a> (utilisé par défaut), <a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent rel="external nofollow noreferrer">simple SGD</a>, <a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Momentum rel="external nofollow noreferrer">Élan</a>, <a href=https://mipt.ru/upload/medialibrary/d7e/41-91.pdf rel="external nofollow noreferrer">Nesterov</a>).</p> <h3 id=agg_functions-stochasticlinearregression-parameters>Paramètre<a class=headerlink href=#agg_functions-stochasticlinearregression-parameters title="Permanent link">&para;</a></h3> <p>Il y a 4 paramètres personnalisables. Ils sont passés à la fonction séquentiellement, mais il n'est pas nécessaire de passer tous les quatre-les valeurs par défaut seront utilisées, mais un bon modèle nécessite un réglage des paramètres.</p> <div class=codehilite><pre><span></span><code>stochasticLinearRegression(1.0, 1.0, 10, &#39;SGD&#39;)
</code></pre></div> <ol> <li><code>learning rate</code> est le coefficient sur la longueur de l'étape, lorsque l'étape de descente de gradient est effectuée. Un taux d'apprentissage trop élevé peut entraîner des poids infinis du modèle. Par défaut est <code>0.00001</code>.</li> <li><code>l2 regularization coefficient</code> ce qui peut aider à éviter le surajustement. Par défaut est <code>0.1</code>.</li> <li><code>mini-batch size</code> définit le nombre d'éléments, dont les gradients seront calculés et additionnés pour effectuer une étape de descente de gradient. La descente stochastique Pure utilise un élément, mais avoir de petits lots (environ 10 éléments) rend les étapes de gradient plus stables. Par défaut est <code>15</code>.</li> <li><code>method for updating weights</code> ils sont: <code>Adam</code> (par défaut), <code>SGD</code>, <code>Momentum</code>, <code>Nesterov</code>. <code>Momentum</code> et <code>Nesterov</code> nécessitent un peu plus de calculs et de mémoire, mais ils sont utiles en termes de vitesse de convergence et de stabilité des méthodes de gradient stochastique.</li> </ol> <h3 id=agg_functions-stochasticlinearregression-usage>Utilisation<a class=headerlink href=#agg_functions-stochasticlinearregression-usage title="Permanent link">&para;</a></h3> <p><code>stochasticLinearRegression</code> est utilisé en deux étapes: ajustement du modèle et prédiction sur de nouvelles données. Afin de correspondre le modèle et l'enregistrer son état pour utilisation ultérieure nous utilisons <code>-State</code> combinator, qui enregistre essentiellement l'état (poids du modèle, etc.).<br> Pour prédire nous utilisons la fonction <a href=../../functions/machine_learning_functions/#machine_learning_methods-evalmlmethod>evalMLMethod</a> qui prend un état comme un argument ainsi que des fonctionnalités à prévoir sur.</p> <p><a name=stochasticlinearregression-usage-fitting></a></p> <p><strong>1.</strong> Raccord</p> <p>Une telle requête peut être utilisé.</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>train_data</span>
<span class=p>(</span>
    <span class=n>param1</span> <span class=n>Float64</span><span class=p>,</span>
    <span class=n>param2</span> <span class=n>Float64</span><span class=p>,</span>
    <span class=n>target</span> <span class=n>Float64</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>

<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>your_model</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span> <span class=k>AS</span> <span class=k>SELECT</span>
<span class=n>stochasticLinearRegressionState</span><span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>&#39;SGD&#39;</span><span class=p>)(</span><span class=n>target</span><span class=p>,</span> <span class=n>param1</span><span class=p>,</span> <span class=n>param2</span><span class=p>)</span>
<span class=k>AS</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>train_data</span><span class=p>;</span>
</code></pre></div> <p>Ici, nous devons également insérer des données dans <code>train_data</code> table. Le nombre de paramètres n'est pas fixe, il dépend uniquement du nombre d'arguments, passés dans <code>linearRegressionState</code>. Ils doivent tous être des valeurs numériques.<br> Notez que la colonne avec la valeur cible (que nous aimerions apprendre à prédire) est insérée comme premier argument.</p> <p><strong>2.</strong> Prédire</p> <p>Après avoir enregistré un État dans la table, nous pouvons l'utiliser plusieurs fois pour la prédiction, ou même fusionner avec d'autres États et créer de nouveaux modèles encore meilleurs.</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span> <span class=p>(</span><span class=k>SELECT</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>your_model</span><span class=p>)</span> <span class=k>AS</span> <span class=n>model</span> <span class=k>SELECT</span>
<span class=n>evalMLMethod</span><span class=p>(</span><span class=n>model</span><span class=p>,</span> <span class=n>param1</span><span class=p>,</span> <span class=n>param2</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>test_data</span>
</code></pre></div> <p>La requête renvoie une colonne de valeurs prédites. Notez que le premier argument de <code>evalMLMethod</code> être <code>AggregateFunctionState</code> objet, sont ensuite des colonnes de fonctionnalités.</p> <p><code>test_data</code> est un tableau comme <code>train_data</code> mais peut ne pas contenir de valeur cible.</p> <h3 id=agg_functions-stochasticlinearregression-notes>Note<a class=headerlink href=#agg_functions-stochasticlinearregression-notes title="Permanent link">&para;</a></h3> <ol> <li> <p>Pour fusionner deux modèles l'utilisateur peut créer une telle requête:<br> <code>sql SELECT state1 + state2 FROM your_models</code><br> où <code>your_models</code> le tableau contient les deux modèles. Cette requête renvoie la nouvelle <code>AggregateFunctionState</code> objet.</p> </li> <li> <p>L'utilisateur peut récupérer les poids du modèle pour ses propres fins, sans enregistrer le modèle, si aucune <code>-State</code> combinator est utilisé.<br> <code>sql SELECT stochasticLinearRegression(0.01)(target, param1, param2) FROM train_data</code><br> Une telle requête s'adaptera au Modèle et retournera ses poids-d'abord sont des poids, qui correspondent aux paramètres du modèle, le dernier est un biais. Ainsi, dans l'exemple ci-dessus, la requête renvoie une colonne avec 3 valeurs.</p> </li> </ol> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#agg_functions-stochasticlogisticregression>stochasticLogisticRegression</a></li> <li><a href=https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression rel="external nofollow noreferrer">Différence entre les régressions linéaires et logistiques</a></li> </ul> <h2 id=agg_functions-stochasticlogisticregression>stochasticLogisticRegression<a class=headerlink href=#agg_functions-stochasticlogisticregression title="Permanent link">&para;</a></h2> <p>Cette fonction implémente la régression logistique stochastique. Il peut être utilisé pour le problème de classification binaire, prend en charge les mêmes paramètres personnalisés que stochasticLinearRegression et fonctionne de la même manière.</p> <h3 id=agg_functions-stochasticlogisticregression-parameters>Paramètre<a class=headerlink href=#agg_functions-stochasticlogisticregression-parameters title="Permanent link">&para;</a></h3> <p>Les paramètres sont exactement les mêmes que dans stochasticLinearRegression:<br> <code>learning rate</code>, <code>l2 regularization coefficient</code>, <code>mini-batch size</code>, <code>method for updating weights</code>.<br> Pour plus d'informations, voir <a href=#agg_functions-stochasticlinearregression-parameters>paramètre</a>.</p> <div class=codehilite><pre><span></span><code>stochasticLogisticRegression(1.0, 1.0, 10, &#39;SGD&#39;)
</code></pre></div> <ol> <li>Raccord</li> </ol> <!-- --> <div class=codehilite><pre><span></span><code><span class=n>See</span> <span class=n>the</span> <span class=ss>`Fitting`</span> <span class=n>section</span> <span class=k>in</span> <span class=n>the</span> <span class=p>[</span><span class=n>stochasticLinearRegression</span><span class=p>](</span><span class=c1>#stochasticlinearregression-usage-fitting) description.</span>

<span class=n>Predicted</span> <span class=n>labels</span> <span class=n>have</span> <span class=k>to</span> <span class=n>be</span> <span class=k>in</span> <span class=err>\</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=err>\</span><span class=p>].</span>
</code></pre></div> <ol> <li>Prédire</li> </ol> <!-- --> <div class=codehilite><pre><span></span><code><span class=k>Using</span> <span class=n>saved</span> <span class=n>state</span> <span class=n>we</span> <span class=n>can</span> <span class=n>predict</span> <span class=n>probability</span> <span class=n>of</span> <span class=n>object</span> <span class=k>having</span> <span class=n>label</span> <span class=ss>`1`</span><span class=p>.</span>

<span class=ss>``` sql</span>
<span class=ss>WITH (SELECT state FROM your_model) AS model SELECT</span>
<span class=ss>evalMLMethod(model, param1, param2) FROM test_data</span>
<span class=ss>```</span>

<span class=n>The</span> <span class=n>query</span> <span class=n>will</span> <span class=k>return</span> <span class=n>a</span> <span class=k>column</span> <span class=n>of</span> <span class=n>probabilities</span><span class=p>.</span> <span class=n>Note</span> <span class=n>that</span> <span class=n>first</span> <span class=n>argument</span> <span class=n>of</span> <span class=ss>`evalMLMethod`</span> <span class=k>is</span> <span class=ss>`AggregateFunctionState`</span> <span class=n>object</span><span class=p>,</span> <span class=n>next</span> <span class=n>are</span> <span class=n>columns</span> <span class=n>of</span> <span class=n>features</span><span class=p>.</span>

<span class=n>We</span> <span class=n>can</span> <span class=n>also</span> <span class=kt>set</span> <span class=n>a</span> <span class=n>bound</span> <span class=n>of</span> <span class=n>probability</span><span class=p>,</span> <span class=n>which</span> <span class=n>assigns</span> <span class=n>elements</span> <span class=k>to</span> <span class=n>different</span> <span class=n>labels</span><span class=p>.</span>

<span class=ss>``` sql</span>
<span class=ss>SELECT ans &lt; 1.1 AND ans &gt; 0.5 FROM</span>
<span class=ss>(WITH (SELECT state FROM your_model) AS model SELECT</span>
<span class=ss>evalMLMethod(model, param1, param2) AS ans FROM test_data)</span>
<span class=ss>```</span>

<span class=k>Then</span> <span class=n>the</span> <span class=n>result</span> <span class=n>will</span> <span class=n>be</span> <span class=n>labels</span><span class=p>.</span>

<span class=ss>`test_data`</span> <span class=k>is</span> <span class=n>a</span> <span class=k>table</span> <span class=k>like</span> <span class=ss>`train_data`</span> <span class=n>but</span> <span class=n>may</span> <span class=k>not</span> <span class=n>contain</span> <span class=n>target</span> <span class=n>value</span><span class=p>.</span>
</code></pre></div> <p><strong>Voir Aussi</strong></p> <ul> <li><a href=#agg_functions-stochasticlinearregression>stochasticLinearRegression</a></li> <li><a href=https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression rel="external nofollow noreferrer">Différence entre les régressions linéaires et logistiques.</a></li> </ul> <h2 id=groupbitmapand>groupBitmapAnd<a class=headerlink href=#groupbitmapand title="Permanent link">&para;</a></h2> <p>Calculs le et d'une colonne bitmap, retour cardinalité de type UInt64, si Ajouter suffixe-État, puis retour <a href=../../functions/bitmap_functions/ >objet bitmap</a>.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> – An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> type.</p> <p><strong>Valeur de retour</strong></p> <p>La valeur de la <code>UInt64</code> type.</p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag1&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag2&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag3&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>               <span class=mi>3</span>   <span class=err>│</span>
<span class=err>└───────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapAndState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapAndState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span>                                         <span class=err>│</span>
<span class=err>└──────────────────────────────────────────────────┘</span>
</code></pre></div> <h2 id=groupbitmapor>groupBitmapOr<a class=headerlink href=#groupbitmapor title="Permanent link">&para;</a></h2> <p>Calculs le ou d'une colonne bitmap, retour cardinalité de type UInt64, si Ajouter suffixe-État, puis retour <a href=../../functions/bitmap_functions/ >objet bitmap</a>. C'est l'équivalent de <code>groupBitmapMerge</code>.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> – An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> type.</p> <p><strong>Valeur de retour</strong></p> <p>La valeur de la <code>UInt64</code> type.</p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag1&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag2&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag3&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>             <span class=mi>15</span>   <span class=err>│</span>
<span class=err>└──────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapOrState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapOrState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span>           <span class=err>│</span>
<span class=err>└─────────────────────────────────────────────────┘</span>
</code></pre></div> <h2 id=groupbitmapxor>groupBitmapXor<a class=headerlink href=#groupbitmapxor title="Permanent link">&para;</a></h2> <p>Calculs le XOR d'une colonne bitmap, retour cardinalité de type UInt64, si Ajouter suffixe-État, puis retour <a href=../../functions/bitmap_functions/ >objet bitmap</a>.</p> <div class=codehilite><pre><span></span><code><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code>expr</code> – An expression that results in <code>AggregateFunction(groupBitmap, UInt*)</code> type.</p> <p><strong>Valeur de retour</strong></p> <p>La valeur de la <code>UInt64</code> type.</p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag1&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag2&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;tag3&#39;</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapXor</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapXor</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>              <span class=mi>10</span>   <span class=err>│</span>
<span class=err>└───────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapXorState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>&#39;tag%&#39;</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapXorState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span>                       <span class=err>│</span>
<span class=err>└──────────────────────────────────────────────────┘</span>
</code></pre></div> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Construit à partir de <a href=https://github.com/ClickHouse/ClickHouse/commit/3166eab2dfc89323b9d756aeba6866381fd9c186 rel="external nofollow noreferrer" target=_blank class=text-reset>3166eab2df</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table des matières</label> <a href=#agg_function-count title=compter class="nav-link text-wrap d-inline-block w-100"> compter </a> <a href=#agg_function-any title=tout(x) class="nav-link text-wrap d-inline-block w-100"> tout(x) </a> <a href=#anyheavyx title="anyHeavy (x)" class="nav-link text-wrap d-inline-block w-100"> anyHeavy (x) </a> <a href=#anylastx title="anyLast (x)" class="nav-link text-wrap d-inline-block w-100"> anyLast (x) </a> <a href=#groupbitand title=groupBitAnd class="nav-link text-wrap d-inline-block w-100"> groupBitAnd </a> <a href=#groupbitor title=groupBitOr class="nav-link text-wrap d-inline-block w-100"> groupBitOr </a> <a href=#groupbitxor title=groupBitXor class="nav-link text-wrap d-inline-block w-100"> groupBitXor </a> <a href=#groupbitmap title=groupBitmap class="nav-link text-wrap d-inline-block w-100"> groupBitmap </a> <a href=#agg_function-min title="min (x)" class="nav-link text-wrap d-inline-block w-100"> min (x) </a> <a href=#agg_function-max title="max (x)" class="nav-link text-wrap d-inline-block w-100"> max (x) </a> <a href=#agg-function-argmin title="argMin (arg, val)" class="nav-link text-wrap d-inline-block w-100"> argMin (arg, val) </a> <a href=#agg-function-argmax title="argMax(arg, val)" class="nav-link text-wrap d-inline-block w-100"> argMax(arg, val) </a> <a href=#agg_function-sum title=sum(x) class="nav-link text-wrap d-inline-block w-100"> sum(x) </a> <a href=#sumwithoverflowx title="sumWithOverflow (x)" class="nav-link text-wrap d-inline-block w-100"> sumWithOverflow (x) </a> <a href=#agg_functions-summap title="sumMap (clé, valeur)" class="nav-link text-wrap d-inline-block w-100"> sumMap (clé, valeur) </a> <a href=#skewpop title=skewPop class="nav-link text-wrap d-inline-block w-100"> skewPop </a> <a href=#skewsamp title=skewSamp class="nav-link text-wrap d-inline-block w-100"> skewSamp </a> <a href=#kurtpop title=kurtPop class="nav-link text-wrap d-inline-block w-100"> kurtPop </a> <a href=#kurtsamp title=kurtSamp class="nav-link text-wrap d-inline-block w-100"> kurtSamp </a> <a href=#agg-function-timeseriesgroupsum title="timeSeriesGroupSum(uid, horodatage, valeur)" class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupSum(uid, horodatage, valeur) </a> <a href=#agg-function-timeseriesgroupratesum title="timeSeriesGroupRateSum(uid, ts, val)" class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupRateSum(uid, ts, val) </a> <a href=#agg_function-avg title="avg (x)" class="nav-link text-wrap d-inline-block w-100"> avg (x) </a> <a href=#agg_function-uniq title=uniq class="nav-link text-wrap d-inline-block w-100"> uniq </a> <a href=#agg_function-uniqcombined title=uniqcombiné class="nav-link text-wrap d-inline-block w-100"> uniqcombiné </a> <a href=#agg_function-uniqcombined64 title=uniqCombined64 class="nav-link text-wrap d-inline-block w-100"> uniqCombined64 </a> <a href=#agg_function-uniqhll12 title=uniqHLL12 class="nav-link text-wrap d-inline-block w-100"> uniqHLL12 </a> <a href=#agg_function-uniqexact title=uniqExact class="nav-link text-wrap d-inline-block w-100"> uniqExact </a> <a href=#agg_function-grouparray title="groupArray(x), groupArray (max_size) (x)" class="nav-link text-wrap d-inline-block w-100"> groupArray(x), groupArray (max_size) (x) </a> <a href=#grouparrayinsertatvalue-position title="groupeparrayinsertat(valeur, position)" class="nav-link text-wrap d-inline-block w-100"> groupeparrayinsertat(valeur, position) </a> <a href=#agg_function-grouparraymovingsum title=groupeparraymovingsum class="nav-link text-wrap d-inline-block w-100"> groupeparraymovingsum </a> <a href=#agg_function-grouparraymovingavg title=groupArrayMovingAvg class="nav-link text-wrap d-inline-block w-100"> groupArrayMovingAvg </a> <a href=#groupuniqarrayx-groupuniqarraymax-sizex title="groupUniqArray(x), groupUniqArray (max_size) (x)" class="nav-link text-wrap d-inline-block w-100"> groupUniqArray(x), groupUniqArray (max_size) (x) </a> <a href=#quantile title=quantile class="nav-link text-wrap d-inline-block w-100"> quantile </a> <a href=#quantiledeterministic title=quantileDeterministic class="nav-link text-wrap d-inline-block w-100"> quantileDeterministic </a> <a href=#quantileexact title=quantileExact class="nav-link text-wrap d-inline-block w-100"> quantileExact </a> <a href=#quantileexactweighted title=quantileExactWeighted class="nav-link text-wrap d-inline-block w-100"> quantileExactWeighted </a> <a href=#quantiletiming title=quantileTiming class="nav-link text-wrap d-inline-block w-100"> quantileTiming </a> <a href=#quantiletimingweighted title=quantileTimingWeighted class="nav-link text-wrap d-inline-block w-100"> quantileTimingWeighted </a> <a href=#quantiletdigest title=quantileTDigest class="nav-link text-wrap d-inline-block w-100"> quantileTDigest </a> <a href=#quantiletdigestweighted title=quantileTDigestWeighted class="nav-link text-wrap d-inline-block w-100"> quantileTDigestWeighted </a> <a href=#median title=médian class="nav-link text-wrap d-inline-block w-100"> médian </a> <a href=#quantiles title="quantiles(level1, level2, …)(x)" class="nav-link text-wrap d-inline-block w-100"> quantiles(level1, level2, …)(x) </a> <a href=#varsampx title="varSamp (x)" class="nav-link text-wrap d-inline-block w-100"> varSamp (x) </a> <a href=#varpopx title="varPop (x)" class="nav-link text-wrap d-inline-block w-100"> varPop (x) </a> <a href=#stddevsampx title="stddevSamp (x)" class="nav-link text-wrap d-inline-block w-100"> stddevSamp (x) </a> <a href=#stddevpopx title="stddevPop (x)" class="nav-link text-wrap d-inline-block w-100"> stddevPop (x) </a> <a href=#topknx title="topK (N) (x)" class="nav-link text-wrap d-inline-block w-100"> topK (N) (x) </a> <a href=#topkweighted title=topKWeighted class="nav-link text-wrap d-inline-block w-100"> topKWeighted </a> <a href=#covarsampx-y title="covarSamp(x, y)" class="nav-link text-wrap d-inline-block w-100"> covarSamp(x, y) </a> <a href=#covarpopx-y title="covarPop (x, y)" class="nav-link text-wrap d-inline-block w-100"> covarPop (x, y) </a> <a href=#corrx-y title="corr (x, y)" class="nav-link text-wrap d-inline-block w-100"> corr (x, y) </a> <a href=#categoricalinformationvalue title=categoricalInformationValue class="nav-link text-wrap d-inline-block w-100"> categoricalInformationValue </a> <a href=#simplelinearregression title=simplelineearregression class="nav-link text-wrap d-inline-block w-100"> simplelineearregression </a> <a href=#agg_functions-stochasticlinearregression title=stochasticLinearRegression class="nav-link text-wrap d-inline-block w-100"> stochasticLinearRegression </a> <nav id=toc-toc-54 class="nav flex-column pl-2"> <a href=#agg_functions-stochasticlinearregression-parameters title=Paramètre class="nav-link text-wrap d-inline-block w-100"> Paramètre </a> <a href=#agg_functions-stochasticlinearregression-usage title=Utilisation class="nav-link text-wrap d-inline-block w-100"> Utilisation </a> <a href=#agg_functions-stochasticlinearregression-notes title=Note class="nav-link text-wrap d-inline-block w-100"> Note </a> </nav> <a href=#agg_functions-stochasticlogisticregression title=stochasticLogisticRegression class="nav-link text-wrap d-inline-block w-100"> stochasticLogisticRegression </a> <nav id=toc-toc-55 class="nav flex-column pl-2"> <a href=#agg_functions-stochasticlogisticregression-parameters title=Paramètre class="nav-link text-wrap d-inline-block w-100"> Paramètre </a> </nav> <a href=#groupbitmapand title=groupBitmapAnd class="nav-link text-wrap d-inline-block w-100"> groupBitmapAnd </a> <a href=#groupbitmapor title=groupBitmapOr class="nav-link text-wrap d-inline-block w-100"> groupBitmapOr </a> <a href=#groupbitmapxor title=groupBitmapXor class="nav-link text-wrap d-inline-block w-100"> groupBitmapXor </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
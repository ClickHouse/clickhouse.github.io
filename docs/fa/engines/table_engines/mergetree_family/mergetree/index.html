<!DOCTYPE html><html lang=fa data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>ادغام - مستندات ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="ادغام - مستندات ClickHouse"><meta property=og:description content="ادغام این MergeTree موتور و سایر موتورهای این خانواده (*MergeTree) موتورهای جدول کلیک قوی ترین. موتور در MergeTree خانوا"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="ادغام - مستندات ClickHouse"><meta name=description content="ادغام این MergeTree موتور و سایر موتورهای این خانواده (*MergeTree) موتورهای جدول کلیک قوی ترین. موتور در MergeTree خانوا"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=rtl data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> ادغام </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fa/engines/table_engines/mergetree_family/mergetree.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/fa.svg alt=فارسی title=فارسی width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/engines/table_engines/mergetree_family/mergetree/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/engines/table_engines/mergetree_family/mergetree/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/engines/table_engines/mergetree_family/mergetree/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/engines/table_engines/mergetree_family/mergetree/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/engines/table_engines/mergetree_family/mergetree/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/engines/table_engines/mergetree_family/mergetree/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/fa/engines/table_engines/mergetree_family/mergetree/ class="dropdown-item disabled"> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class="container-fluid text-right"> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="چند صفحه یا یک صفحه"> <a href=../../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="نسخه چند صفحه ای" title="نسخه چند صفحه ای"> </a> <a href=../../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="نسخه تک صفحه ای" title="نسخه تک صفحه ای"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> نسخه: <span class=text-light>جدیدترین</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/fa/ class="dropdown-item disable"> <span class=text-light>جدیدترین</span> </a> <a href=/docs/v20.3/fa/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/fa/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/fa/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/fa/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/fa/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/fa/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/fa/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/fa/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/fa/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/fa/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/fa/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../introduction/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../../introduction/history/ title=تاریخچه class="nav-link text-light text-wrap d-inline-block w-100 px-0">تاریخچه</a> <a href=../../../../introduction/adopters/ title=پذیرا class="nav-link text-light text-wrap d-inline-block w-100 px-0">پذیرا</a> <a href=../../../../introduction/performance/ title=Performance class="nav-link text-light text-wrap d-inline-block w-100 px-0">Performance</a> <a href=../../../../introduction/features_considered_disadvantages/ title="ویژگی های از ClickHouse که می تواند معایبی باشد" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ویژگی های از ClickHouse که می تواند معایبی باشد</a> <a href=../../../../introduction/distinctive_features/ title="ویژگی های برجسته ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ویژگی های برجسته ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../getting_started/ title=مخفی class="nav-link text-light text-wrap d-inline-block w-100 px-0">مخفی</a> <a href=../../../../getting_started/install/ title="نصب و راه اندازی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">نصب و راه اندازی</a> <a href=#sidebar-sidebar-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../getting_started/example_datasets/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../getting_started/example_datasets/ontime/ title="به موقع" class="nav-link text-light text-wrap d-inline-block w-100 px-0">به موقع</a> <a href=../../../../getting_started/example_datasets/nyc_taxi/ title="داده های تاکسی نیویورک" class="nav-link text-light text-wrap d-inline-block w-100 px-0">داده های تاکسی نیویورک</a> <a href=../../../../getting_started/example_datasets/amplab_benchmark/ title="معیار بزرگ داده های تقویت کننده" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معیار بزرگ داده های تقویت کننده</a> <a href=../../../../getting_started/example_datasets/wikistat/ title=ویکیستات class="nav-link text-light text-wrap d-inline-block w-100 px-0">ویکیستات</a> <a href=../../../../getting_started/example_datasets/criteo/ title="ترابایت کلیک سیاهههای مربوط از مخلوق" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ترابایت کلیک سیاهههای مربوط از مخلوق</a> <a href=../../../../getting_started/example_datasets/star_schema/ title="معیار طرحواره ستاره" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معیار طرحواره ستاره</a> <a href=../../../../getting_started/example_datasets/metrica/ title="یاندکساطلاعات متریکا" class="nav-link text-light text-wrap d-inline-block w-100 px-0">یاندکساطلاعات متریکا</a> </nav> </div> <a href=../../../../getting_started/tutorial/ title=اموزش class="nav-link text-light text-wrap d-inline-block w-100 px-0">اموزش</a> <a href=../../../../getting_started/playground/ title="زمین بازی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">زمین بازی</a> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../interfaces/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../interfaces/cli/ title="مشتری خط فرمان" class="nav-link text-light text-wrap d-inline-block w-100 px-0">مشتری خط فرمان</a> <a href=../../../../interfaces/tcp/ title="رابط کاربری بومی)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">رابط کاربری بومی)</a> <a href=../../../../interfaces/http/ title="رابط قام" class="nav-link text-light text-wrap d-inline-block w-100 px-0">رابط قام</a> <a href=../../../../interfaces/mysql/ title="رابط MySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">رابط MySQL</a> <a href=../../../../interfaces/formats/ title="فرمت های ورودی و خروجی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">فرمت های ورودی و خروجی</a> <a href=../../../../interfaces/jdbc/ title="JDBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC Driver</a> <a href=../../../../interfaces/odbc/ title="ODBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC Driver</a> <a href=#sidebar-sidebar-3-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-9 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-3-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../interfaces/third-party/ title=Third-Party class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party</a> <a href=../../../../interfaces/third-party/client_libraries/ title="کتابخانه های مشتری" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کتابخانه های مشتری</a> <a href=../../../../interfaces/third-party/integrations/ title=یکپارچگی class="nav-link text-light text-wrap d-inline-block w-100 px-0">یکپارچگی</a> <a href=../../../../interfaces/third-party/gui/ title="رابط های بصری" class="nav-link text-light text-wrap d-inline-block w-100 px-0">رابط های بصری</a> <a href=../../../../interfaces/third-party/proxy/ title="پراکسی ها" class="nav-link text-light text-wrap d-inline-block w-100 px-0">پراکسی ها</a> </nav> </div> <a href=../../../../interfaces/cpp/ title="ج++ کتابخانه مشتری" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ج++ کتابخانه مشتری</a> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Engines class="nav-link text-light text-wrap dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/ title=Engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">Engines</a> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=#sidebar-sidebar-4-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-4-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/mergetree_family/ title="MergeTree Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree Family</a> <a href=../../../../engines/table_engines/mergetree_family/mergetree/ title=ادغام class="nav-link text-white active text-wrap d-inline-block w-100 px-0">ادغام</a> <a href=../../../../engines/table_engines/mergetree_family/replication/ title="تکرار داده ها" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تکرار داده ها</a> <a href=../../../../engines/table_engines/mergetree_family/custom_partitioning_key/ title="کلید پارتیشن بندی سفارشی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کلید پارتیشن بندی سفارشی</a> <a href=../../../../engines/table_engines/mergetree_family/replacingmergetree/ title=جایگزینی class="nav-link text-light text-wrap d-inline-block w-100 px-0">جایگزینی</a> <a href=../../../../engines/table_engines/mergetree_family/summingmergetree/ title=سامینگمرگتری class="nav-link text-light text-wrap d-inline-block w-100 px-0">سامینگمرگتری</a> <a href=../../../../engines/table_engines/mergetree_family/aggregatingmergetree/ title=ریزدانه class="nav-link text-light text-wrap d-inline-block w-100 px-0">ریزدانه</a> <a href=../../../../engines/table_engines/mergetree_family/collapsingmergetree/ title="سقوط غذای اصلی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">سقوط غذای اصلی</a> <a href=../../../../engines/table_engines/mergetree_family/versionedcollapsingmergetree/ title="در حال بارگذاری" class="nav-link text-light text-wrap d-inline-block w-100 px-0">در حال بارگذاری</a> <a href=../../../../engines/table_engines/mergetree_family/graphitemergetree/ title=نمودار class="nav-link text-light text-wrap d-inline-block w-100 px-0">نمودار</a> </nav> </div> <a href=#sidebar-sidebar-4-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-4-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/log_family/ title="Log Family" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log Family</a> <a href=../../../../engines/table_engines/log_family/log_family/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../engines/table_engines/log_family/stripelog/ title="خط زدن" class="nav-link text-light text-wrap d-inline-block w-100 px-0">خط زدن</a> <a href=../../../../engines/table_engines/log_family/log/ title=ثبت class="nav-link text-light text-wrap d-inline-block w-100 px-0">ثبت</a> <a href=../../../../engines/table_engines/log_family/tinylog/ title="جمع شدن" class="nav-link text-light text-wrap d-inline-block w-100 px-0">جمع شدن</a> </nav> </div> <a href=#sidebar-sidebar-4-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-4-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../../engines/table_engines/integrations/kafka/ title=کافکا class="nav-link text-light text-wrap d-inline-block w-100 px-0">کافکا</a> <a href=../../../../engines/table_engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../../engines/table_engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../../engines/table_engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../../engines/table_engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-4-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-4-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table_engines/special/ title=Special class="nav-link text-light text-wrap d-inline-block w-100 px-0">Special</a> <a href=../../../../engines/table_engines/special/distributed/ title="توزیع شده" class="nav-link text-light text-wrap d-inline-block w-100 px-0">توزیع شده</a> <a href=../../../../engines/table_engines/special/external_data/ title="دادههای خارجی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">دادههای خارجی</a> <a href=../../../../engines/table_engines/special/dictionary/ title=واژهنامه class="nav-link text-light text-wrap d-inline-block w-100 px-0">واژهنامه</a> <a href=../../../../engines/table_engines/special/merge/ title=ادغام class="nav-link text-light text-wrap d-inline-block w-100 px-0">ادغام</a> <a href=../../../../engines/table_engines/special/file/ title=پرونده class="nav-link text-light text-wrap d-inline-block w-100 px-0">پرونده</a> <a href=../../../../engines/table_engines/special/null/ title=خالی class="nav-link text-light text-wrap d-inline-block w-100 px-0">خالی</a> <a href=../../../../engines/table_engines/special/set/ title=تنظیم class="nav-link text-light text-wrap d-inline-block w-100 px-0">تنظیم</a> <a href=../../../../engines/table_engines/special/join/ title=پیوستن class="nav-link text-light text-wrap d-inline-block w-100 px-0">پیوستن</a> <a href=../../../../engines/table_engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../../engines/table_engines/special/view/ title=نما class="nav-link text-light text-wrap d-inline-block w-100 px-0">نما</a> <a href=../../../../engines/table_engines/special/materializedview/ title="ماده بینی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ماده بینی</a> <a href=../../../../engines/table_engines/special/memory/ title=حافظه class="nav-link text-light text-wrap d-inline-block w-100 px-0">حافظه</a> <a href=../../../../engines/table_engines/special/buffer/ title=بافر class="nav-link text-light text-wrap d-inline-block w-100 px-0">بافر</a> <a href=../../../../engines/table_engines/special/generate/ title=ژنرال class="nav-link text-light text-wrap d-inline-block w-100 px-0">ژنرال</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-3 title="Database Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Database Engines</a> <div id=sidebar-sidebar-4-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/database_engines/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../engines/database_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../../engines/database_engines/lazy/ title=تنبل class="nav-link text-light text-wrap d-inline-block w-100 px-0">تنبل</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/ title=مخفی class="nav-link text-light text-wrap d-inline-block w-100 px-0">مخفی</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title=Statements class="nav-link text-light text-wrap dropdown-toggle px-0">Statements</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/statements/ title=Statements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Statements</a> <a href=../../../../sql_reference/statements/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../../sql_reference/statements/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../../sql_reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../../sql_reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../../sql_reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../../sql_reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../../sql_reference/statements/misc/ title=غیره class="nav-link text-light text-wrap d-inline-block w-100 px-0">غیره</a> </nav> </div> <a href=../../../../sql_reference/syntax/ title=نحو class="nav-link text-light text-wrap d-inline-block w-100 px-0">نحو</a> <a href=#sidebar-sidebar-5-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-4 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-5-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/functions/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../sql_reference/functions/arithmetic_functions/ title=حساب class="nav-link text-light text-wrap d-inline-block w-100 px-0">حساب</a> <a href=../../../../sql_reference/functions/comparison_functions/ title=مقایسه class="nav-link text-light text-wrap d-inline-block w-100 px-0">مقایسه</a> <a href=../../../../sql_reference/functions/logical_functions/ title=منطقی class="nav-link text-light text-wrap d-inline-block w-100 px-0">منطقی</a> <a href=../../../../sql_reference/functions/type_conversion_functions/ title="تبدیل نوع" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تبدیل نوع</a> <a href=../../../../sql_reference/functions/date_time_functions/ title="کار با تاریخ و زمان" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با تاریخ و زمان</a> <a href=../../../../sql_reference/functions/string_functions/ title="کار با رشته ها" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با رشته ها</a> <a href=../../../../sql_reference/functions/string_search_functions/ title="برای جستجوی رشتهها" class="nav-link text-light text-wrap d-inline-block w-100 px-0">برای جستجوی رشتهها</a> <a href=../../../../sql_reference/functions/string_replace_functions/ title="برای جایگزینی در رشتهها" class="nav-link text-light text-wrap d-inline-block w-100 px-0">برای جایگزینی در رشتهها</a> <a href=../../../../sql_reference/functions/conditional_functions/ title=شرطی class="nav-link text-light text-wrap d-inline-block w-100 px-0">شرطی</a> <a href=../../../../sql_reference/functions/math_functions/ title=ریاضی class="nav-link text-light text-wrap d-inline-block w-100 px-0">ریاضی</a> <a href=../../../../sql_reference/functions/rounding_functions/ title="گرد کردن" class="nav-link text-light text-wrap d-inline-block w-100 px-0">گرد کردن</a> <a href=../../../../sql_reference/functions/array_functions/ title="کار با ارریس" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با ارریس</a> <a href=../../../../sql_reference/functions/splitting_merging_functions/ title="تقسیم و ادغام رشته ها و ارریس" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تقسیم و ادغام رشته ها و ارریس</a> <a href=../../../../sql_reference/functions/bit_functions/ title=بیت class="nav-link text-light text-wrap d-inline-block w-100 px-0">بیت</a> <a href=../../../../sql_reference/functions/bitmap_functions/ title="نگاشت بیت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">نگاشت بیت</a> <a href=../../../../sql_reference/functions/hash_functions/ title=هش class="nav-link text-light text-wrap d-inline-block w-100 px-0">هش</a> <a href=../../../../sql_reference/functions/random_functions/ title="تولید اعداد شبه تصادفی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تولید اعداد شبه تصادفی</a> <a href=../../../../sql_reference/functions/encoding_functions/ title=کدبندی class="nav-link text-light text-wrap d-inline-block w-100 px-0">کدبندی</a> <a href=../../../../sql_reference/functions/uuid_functions/ title="کار با یوید" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با یوید</a> <a href=../../../../sql_reference/functions/url_functions/ title="کار با نشانیها  ی اینترنتی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با نشانیها ی اینترنتی</a> <a href=../../../../sql_reference/functions/ip_address_functions/ title="کار با نشانیهای اینترنتی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با نشانیهای اینترنتی</a> <a href=../../../../sql_reference/functions/json_functions/ title="کار با جانسون" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با جانسون</a> <a href=../../../../sql_reference/functions/higher_order_functions/ title="بالاتر سفارش" class="nav-link text-light text-wrap d-inline-block w-100 px-0">بالاتر سفارش</a> <a href=../../../../sql_reference/functions/ext_dict_functions/ title="کار با واژهنامهها خارجی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با واژهنامهها خارجی</a> <a href=../../../../sql_reference/functions/ym_dict_functions/ title="کار با یاندکس.واژهنامهها متریکا" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با یاندکس.واژهنامهها متریکا</a> <a href=../../../../sql_reference/functions/in_functions/ title="اجرای اپراتور در" class="nav-link text-light text-wrap d-inline-block w-100 px-0">اجرای اپراتور در</a> <a href=../../../../sql_reference/functions/array_join/ title=ارریجین class="nav-link text-light text-wrap d-inline-block w-100 px-0">ارریجین</a> <a href=../../../../sql_reference/functions/geo/ title="کار با مختصات جغرافیایی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با مختصات جغرافیایی</a> <a href=../../../../sql_reference/functions/functions_for_nulls/ title="کار با Nullable استدلال" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کار با Nullable استدلال</a> <a href=../../../../sql_reference/functions/machine_learning_functions/ title="توابع یادگیری ماشین" class="nav-link text-light text-wrap d-inline-block w-100 px-0">توابع یادگیری ماشین</a> <a href=../../../../sql_reference/functions/introspection/ title="درون نگری" class="nav-link text-light text-wrap d-inline-block w-100 px-0">درون نگری</a> <a href=../../../../sql_reference/functions/other_functions/ title=غیره class="nav-link text-light text-wrap d-inline-block w-100 px-0">غیره</a> </nav> </div> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/aggregate_functions/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../sql_reference/aggregate_functions/reference/ title=مرجع class="nav-link text-light text-wrap d-inline-block w-100 px-0">مرجع</a> <a href=../../../../sql_reference/aggregate_functions/combinators/ title="ترکیب کنندههای تابع جمع" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ترکیب کنندههای تابع جمع</a> <a href=../../../../sql_reference/aggregate_functions/parametric_functions/ title="توابع مجموع پارامتری" class="nav-link text-light text-wrap d-inline-block w-100 px-0">توابع مجموع پارامتری</a> </nav> </div> <a href=#sidebar-sidebar-5-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-6 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-5-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/table_functions/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../sql_reference/table_functions/file/ title=پرونده class="nav-link text-light text-wrap d-inline-block w-100 px-0">پرونده</a> <a href=../../../../sql_reference/table_functions/merge/ title=ادغام class="nav-link text-light text-wrap d-inline-block w-100 px-0">ادغام</a> <a href=../../../../sql_reference/table_functions/numbers/ title=اعداد class="nav-link text-light text-wrap d-inline-block w-100 px-0">اعداد</a> <a href=../../../../sql_reference/table_functions/remote/ title=دور class="nav-link text-light text-wrap d-inline-block w-100 px-0">دور</a> <a href=../../../../sql_reference/table_functions/url/ title="نشانی وب" class="nav-link text-light text-wrap d-inline-block w-100 px-0">نشانی وب</a> <a href=../../../../sql_reference/table_functions/mysql/ title="خروجی زیر" class="nav-link text-light text-wrap d-inline-block w-100 px-0">خروجی زیر</a> <a href=../../../../sql_reference/table_functions/odbc/ title=جستجو class="nav-link text-light text-wrap d-inline-block w-100 px-0">جستجو</a> <a href=../../../../sql_reference/table_functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../../sql_reference/table_functions/input/ title=ورودی class="nav-link text-light text-wrap d-inline-block w-100 px-0">ورودی</a> <a href=../../../../sql_reference/table_functions/generate/ title=ژنرال class="nav-link text-light text-wrap d-inline-block w-100 px-0">ژنرال</a> </nav> </div> <a href=#sidebar-sidebar-5-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-7 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-5-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/dictionaries/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=#sidebar-sidebar-5-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-7-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-5-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/dictionaries/external_dictionaries/ title="External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External Dictionaries</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts/ title="توضیحات کلی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">توضیحات کلی</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict/ title="پیکربندی یک فرهنگ لغت خارجی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">پیکربندی یک فرهنگ لغت خارجی</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_layout/ title="ذخیره واژهنامهها در حافظه" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ذخیره واژهنامهها در حافظه</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_lifetime/ title="به روز رسانی فرهنگ لغت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">به روز رسانی فرهنگ لغت</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_sources/ title="منابع لغت نامه های خارجی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">منابع لغت نامه های خارجی</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_structure/ title="کلید فرهنگ لغت و زمینه های" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کلید فرهنگ لغت و زمینه های</a> <a href=../../../../sql_reference/dictionaries/external_dictionaries/external_dicts_dict_hierarchical/ title="لغتنامهها سلسله مراتبی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">لغتنامهها سلسله مراتبی</a> </nav> </div> <a href=../../../../sql_reference/dictionaries/internal_dicts/ title="واژهنامهها داخلی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">واژهنامهها داخلی</a> </nav> </div> <a href=#sidebar-sidebar-5-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-5-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/data_types/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../sql_reference/data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../../sql_reference/data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../../sql_reference/data_types/decimal/ title=دهدهی class="nav-link text-light text-wrap d-inline-block w-100 px-0">دهدهی</a> <a href=../../../../sql_reference/data_types/boolean/ title=بولی class="nav-link text-light text-wrap d-inline-block w-100 px-0">بولی</a> <a href=../../../../sql_reference/data_types/string/ title=رشته class="nav-link text-light text-wrap d-inline-block w-100 px-0">رشته</a> <a href=../../../../sql_reference/data_types/fixedstring/ title="رشته ثابت)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">رشته ثابت)</a> <a href=../../../../sql_reference/data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../../sql_reference/data_types/date/ title=تاریخ class="nav-link text-light text-wrap d-inline-block w-100 px-0">تاریخ</a> <a href=../../../../sql_reference/data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../../sql_reference/data_types/datetime64/ title="طول تاریخ 64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">طول تاریخ 64</a> <a href=../../../../sql_reference/data_types/enum/ title=شمارشی class="nav-link text-light text-wrap d-inline-block w-100 px-0">شمارشی</a> <a href=../../../../sql_reference/data_types/array/ title="& توری)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">& توری)</a> <a href=../../../../sql_reference/data_types/aggregatefunction/ title="کارکرد(نام و نام خانوادگی..)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کارکرد(نام و نام خانوادگی..)</a> <a href=../../../../sql_reference/data_types/tuple/ title="تاپل (تی1, تی2,...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تاپل (تی1, تی2,...)</a> <a href=#sidebar-sidebar-5-8-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-5-8-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/data_types/nested_data_structures/ title=مخفی class="nav-link text-light text-wrap d-inline-block w-100 px-0">مخفی</a> <a href=../../../../sql_reference/data_types/nested_data_structures/nested/ title="تو در تو(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تو در تو(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=../../../../sql_reference/data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-5-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8-18 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-5-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/data_types/special_data_types/ title=مخفی class="nav-link text-light text-wrap d-inline-block w-100 px-0">مخفی</a> <a href=../../../../sql_reference/data_types/special_data_types/expression/ title=عبارت class="nav-link text-light text-wrap d-inline-block w-100 px-0">عبارت</a> <a href=../../../../sql_reference/data_types/special_data_types/set/ title=تنظیم class="nav-link text-light text-wrap d-inline-block w-100 px-0">تنظیم</a> <a href=../../../../sql_reference/data_types/special_data_types/nothing/ title="هیچ چیز" class="nav-link text-light text-wrap d-inline-block w-100 px-0">هیچ چیز</a> <a href=../../../../sql_reference/data_types/special_data_types/interval/ title=فاصله class="nav-link text-light text-wrap d-inline-block w-100 px-0">فاصله</a> </nav> </div> <a href=#sidebar-sidebar-5-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8-19 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-5-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql_reference/data_types/domains/ title=Domains class="nav-link text-light text-wrap d-inline-block w-100 px-0">Domains</a> <a href=../../../../sql_reference/data_types/domains/overview/ title="بررسی اجمالی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">بررسی اجمالی</a> <a href=../../../../sql_reference/data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../../sql_reference/data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=../../../../sql_reference/operators/ title=اپراتورها class="nav-link text-light text-wrap d-inline-block w-100 px-0">اپراتورها</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=Guides class="nav-link text-light text-wrap dropdown-toggle px-0">Guides</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../guides/ title="بررسی اجمالی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">بررسی اجمالی</a> <a href=../../../../guides/apply_catboost_model/ title="استفاده از مدل های ادم کودن و احمق" class="nav-link text-light text-wrap d-inline-block w-100 px-0">استفاده از مدل های ادم کودن و احمق</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../operations/requirements/ title=الزامات class="nav-link text-light text-wrap d-inline-block w-100 px-0">الزامات</a> <a href=../../../../operations/monitoring/ title=نظارت class="nav-link text-light text-wrap d-inline-block w-100 px-0">نظارت</a> <a href=../../../../operations/troubleshooting/ title="عیب یابی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">عیب یابی</a> <a href=../../../../operations/update/ title="به روز رسانی کلیک" class="nav-link text-light text-wrap d-inline-block w-100 px-0">به روز رسانی کلیک</a> <a href=../../../../operations/access_rights/ title="حقوق دسترسی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">حقوق دسترسی</a> <a href=../../../../operations/backup/ title="پشتیبان گیری داده ها" class="nav-link text-light text-wrap d-inline-block w-100 px-0">پشتیبان گیری داده ها</a> <a href=../../../../operations/configuration_files/ title="پروندههای پیکربندی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">پروندههای پیکربندی</a> <a href=../../../../operations/quotas/ title=سهمیه class="nav-link text-light text-wrap d-inline-block w-100 px-0">سهمیه</a> <a href=#sidebar-sidebar-7-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-10 title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-7-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/optimizing_performance/ title="Optimizing Performance" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Optimizing Performance</a> <a href=../../../../operations/optimizing_performance/sampling_query_profiler/ title="پروفایل پرس و جو" class="nav-link text-light text-wrap d-inline-block w-100 px-0">پروفایل پرس و جو</a> </nav> </div> <a href=../../../../operations/system_tables/ title="جداول سیستم" class="nav-link text-light text-wrap d-inline-block w-100 px-0">جداول سیستم</a> <a href=#sidebar-sidebar-7-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-7-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/server_configuration_parameters/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../operations/server_configuration_parameters/settings/ title="تنظیمات کارگزار" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تنظیمات کارگزار</a> </nav> </div> <a href=../../../../operations/performance_test/ title="سخت افزار تست" class="nav-link text-light text-wrap d-inline-block w-100 px-0">سخت افزار تست</a> <a href=#sidebar-sidebar-7-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-14 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-7-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/settings/ title="معرفی شرکت" class="nav-link text-light text-wrap d-inline-block w-100 px-0">معرفی شرکت</a> <a href=../../../../operations/settings/permissions_for_queries/ title="مجوز برای نمایش داده شد" class="nav-link text-light text-wrap d-inline-block w-100 px-0">مجوز برای نمایش داده شد</a> <a href=../../../../operations/settings/query_complexity/ title="محدودیت در پیچیدگی پرس و جو" class="nav-link text-light text-wrap d-inline-block w-100 px-0">محدودیت در پیچیدگی پرس و جو</a> <a href=../../../../operations/settings/settings/ title=تنظیمات class="nav-link text-light text-wrap d-inline-block w-100 px-0">تنظیمات</a> <a href=../../../../operations/settings/settings_profiles/ title="پروفایل تنظیمات" class="nav-link text-light text-wrap d-inline-block w-100 px-0">پروفایل تنظیمات</a> <a href=../../../../operations/settings/constraints_on_settings/ title="محدودیت در تنظیمات" class="nav-link text-light text-wrap d-inline-block w-100 px-0">محدودیت در تنظیمات</a> <a href=../../../../operations/settings/settings_users/ title="تنظیمات کاربر" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تنظیمات کاربر</a> </nav> </div> <a href=#sidebar-sidebar-7-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-15 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-7-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/utilities/ title="بررسی اجمالی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">بررسی اجمالی</a> <a href=../../../../operations/utilities/clickhouse-copier/ title=تاتر-کپی class="nav-link text-light text-wrap d-inline-block w-100 px-0">تاتر-کپی</a> <a href=../../../../operations/utilities/clickhouse-local/ title=کلیک-محلی class="nav-link text-light text-wrap d-inline-block w-100 px-0">کلیک-محلی</a> <a href=../../../../operations/utilities/clickhouse-benchmark/ title=کلیک-معیار class="nav-link text-light text-wrap d-inline-block w-100 px-0">کلیک-معیار</a> </nav> </div> <a href=../../../../operations/tips/ title="توصیه های استفاده" class="nav-link text-light text-wrap d-inline-block w-100 px-0">توصیه های استفاده</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../development/ title=مخفی class="nav-link text-light text-wrap d-inline-block w-100 px-0">مخفی</a> <a href=../../../../development/developer_instruction/ title="دستورالعمل توسعه دهنده کلیک مبتدی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">دستورالعمل توسعه دهنده کلیک مبتدی</a> <a href=../../../../development/architecture/ title="بررسی اجمالی از معماری کلیک" class="nav-link text-light text-wrap d-inline-block w-100 px-0">بررسی اجمالی از معماری کلیک</a> <a href=../../../../development/browse_code/ title="مرور کد منبع کلیک" class="nav-link text-light text-wrap d-inline-block w-100 px-0">مرور کد منبع کلیک</a> <a href=../../../../development/build/ title="نحوه ساخت کلیک در لینوکس" class="nav-link text-light text-wrap d-inline-block w-100 px-0">نحوه ساخت کلیک در لینوکس</a> <a href=../../../../development/build_osx/ title="چگونه برای ساخت تاتر در سیستم عامل مک ایکس" class="nav-link text-light text-wrap d-inline-block w-100 px-0">چگونه برای ساخت تاتر در سیستم عامل مک ایکس</a> <a href=../../../../development/build_cross_osx/ title="چگونه برای ساخت تاتر در لینوکس برای سیستم عامل مک ایکس" class="nav-link text-light text-wrap d-inline-block w-100 px-0">چگونه برای ساخت تاتر در لینوکس برای سیستم عامل مک ایکس</a> <a href=../../../../development/build_cross_arm/ title="چگونه برای ساخت ClickHouse در لینوکس برای AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">چگونه برای ساخت ClickHouse در لینوکس برای AARCH64 (ARM64)</a> <a href=../../../../development/style/ title="چگونه برای نوشتن ج++ کد" class="nav-link text-light text-wrap d-inline-block w-100 px-0">چگونه برای نوشتن ج++ کد</a> <a href=../../../../development/tests/ title="نحوه اجرای تست های کلیک خانه" class="nav-link text-light text-wrap d-inline-block w-100 px-0">نحوه اجرای تست های کلیک خانه</a> <a href=../../../../development/contrib/ title="کتابخانه های شخص ثالث استفاده می شود" class="nav-link text-light text-wrap d-inline-block w-100 px-0">کتابخانه های شخص ثالث استفاده می شود</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Commercial class="nav-link text-light text-wrap dropdown-toggle px-0">Commercial</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../commercial/ title=Commercial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Commercial</a> <a href=../../../../commercial/cloud/ title="ClickHouse ابر ارائه دهندگان خدمات" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse ابر ارائه دهندگان خدمات</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../whats_new/ title="What's New" class="nav-link text-light text-wrap d-inline-block w-100 px-0">What's New</a> <a href=#sidebar-sidebar-10-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10-2 title=Changelog class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-10-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../whats_new/changelog/ title=2020 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a> <a href=../../../../whats_new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../../whats_new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../../whats_new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../../whats_new/roadmap/ title="نقشه راه" class="nav-link text-light text-wrap d-inline-block w-100 px-0">نقشه راه</a> <a href=../../../../whats_new/security_changelog/ title="تغییرات امنیتی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">تغییرات امنیتی</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../faq/ title=F.A.Q. class="nav-link text-light text-wrap d-inline-block w-100 px-0">F.A.Q.</a> <a href=../../../../faq/general/ title="سوالات عمومی" class="nav-link text-light text-wrap d-inline-block w-100 px-0">سوالات عمومی</a> </nav> </div> <a href=../../../../ title="ClickHouse چیست؟" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse چیست؟</a> <a href=../../../../single/clickhouse_fa.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="نسخه PDF" title="نسخه PDF" height=24 class="d-block mr-1 float-left"><div>نسخه PDF</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">راهنما می خواستم!</p> <p class=lead>محتوای زیر از این صفحه اسناد شده است ماشین ترجمه. اما بر خلاف وب سایت های دیگر, این است که در پرواز انجام نمی. این متن ترجمه شده در مخزن گیتهاب در کنار پایگاه داده اصلی خانه کلیک زندگی می کند و منتظر سخنرانان مادری همکار به انسان بیشتر قابل خواندن است.</p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fa/engines/table_engines/mergetree_family/mergetree.md target=_blank rel="external nofollow noreferrer"> راهنما مستندات تاتر با ویرایش این صفحه </a> </p> </div> <h1 id=table_engines-mergetree>ادغام<a class=headerlink href=#table_engines-mergetree title="Permanent link">&para;</a></h1> <p>این <code>MergeTree</code> موتور و سایر موتورهای این خانواده (<code>*MergeTree</code>) موتورهای جدول کلیک قوی ترین.</p> <p>موتور در <code>MergeTree</code> خانواده برای قرار دادن مقدار بسیار زیادی از داده ها را به یک جدول طراحی شده است. داده ها به سرعت به بخش جدول توسط بخش نوشته شده است, سپس قوانین برای ادغام قطعات در پس زمینه اعمال. این روش بسیار موثرتر از به طور مستمر بازنویسی داده ها در ذخیره سازی در درج است.</p> <p>ویژگی های اصلی:</p> <ul> <li> <p>فروشگاه داده طبقه بندی شده اند توسط کلید اصلی.</p> <p>این اجازه می دهد تا به شما برای ایجاد یک شاخص پراکنده کوچک است که کمک می کند تا پیدا کردن اطلاعات سریع تر.</p> </li> <li> <p>پارتیشن ها را می توان در صورت استفاده کرد <a href=../custom_partitioning_key/ >کلید پارتیشن بندی</a> مشخص شده است.</p> <p>تاتر پشتیبانی از عملیات خاص با پارتیشن که موثر تر از عملیات عمومی بر روی داده های مشابه با همان نتیجه. کلیک هاوس همچنین به طور خودکار داده های پارتیشن را که کلید پارتیشن بندی در پرس و جو مشخص شده است قطع می کند. این نیز باعث بهبود عملکرد پرس و جو.</p> </li> <li> <p>پشتیبانی از تکرار داده ها.</p> <p>خانواده <code>ReplicatedMergeTree</code> جداول فراهم می کند تکرار داده ها. برای کسب اطلاعات بیشتر, دیدن <a href=../replication/ >تکرار داده ها</a>.</p> </li> <li> <p>پشتیبانی از نمونه برداری داده ها.</p> <p>در صورت لزوم می توانید روش نمونه گیری داده ها را در جدول تنظیم کنید.</p> </li> </ul> <div class="admonition info"> <p class=admonition-title>اطلاعات</p> <p>این <a href=../../special/merge/ >ادغام</a> موتور به تعلق ندارد <code>*MergeTree</code> خانواده</p> </div> <h2 id=table_engine-mergetree-creating-a-table>ایجاد یک جدول<a class=headerlink href=#table_engine-mergetree-creating-a-table title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
    <span class=k>INDEX</span> <span class=n>index_name1</span> <span class=n>expr1</span> <span class=k>TYPE</span> <span class=n>type1</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>value1</span><span class=p>,</span>
    <span class=k>INDEX</span> <span class=n>index_name2</span> <span class=n>expr2</span> <span class=k>TYPE</span> <span class=n>type2</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>value2</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span>
<span class=p>[</span><span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>ORDER</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=n>TTL</span> <span class=n>expr</span> <span class=p>[</span><span class=k>DELETE</span><span class=o>|</span><span class=k>TO</span> <span class=n>DISK</span> <span class=s1>&#39;xxx&#39;</span><span class=o>|</span><span class=k>TO</span> <span class=n>VOLUME</span> <span class=s1>&#39;xxx&#39;</span><span class=p>],</span> <span class=p>...]</span>
<span class=p>[</span><span class=n>SETTINGS</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>,</span> <span class=p>...]</span>
</code></pre></div> <p>برای شرح پارامترها <a href=../../../../sql_reference/statements/create/ >ایجاد توصیف پرسوجو</a>.</p> <div class="admonition note"> <p class=admonition-title>یادداشت</p> <p><code>INDEX</code> یک ویژگی تجربی است <a href=#table_engine-mergetree-data_skipping-indexes>شاخص های داده پرش</a>.</p> </div> <h3 id=mergetree-query-clauses>بندهای پرسوجو<a class=headerlink href=#mergetree-query-clauses title="Permanent link">&para;</a></h3> <ul> <li> <p><code>ENGINE</code> — Name and parameters of the engine. <code>ENGINE = MergeTree()</code>. این <code>MergeTree</code> موتور پارامترهای ندارد.</p> </li> <li> <p><code>PARTITION BY</code> — The <a href=../custom_partitioning_key/ >کلید پارتیشن بندی</a>.</p> <p>برای تقسیم ماه از <code>toYYYYMM(date_column)</code> عبارت, جایی که <code>date_column</code> یک ستون با تاریخ از نوع است <a href=../../../../sql_reference/data_types/date/ >تاریخ</a>. نام پارتیشن در اینجا <code>"YYYYMM"</code> قالب.</p> </li> <li> <p><code>ORDER BY</code> — The sorting key.</p> <p>یک تاپل از ستون ها و یا عبارات دلخواه. مثال: <code>ORDER BY (CounterID, EventDate)</code>.</p> </li> <li> <p><code>PRIMARY KEY</code> — The primary key if it <a href=./ >متفاوت از کلید مرتب سازی</a>.</p> <p>به طور پیش فرض کلید اصلی همان کلید مرتب سازی است (که توسط مشخص شده است <code>ORDER BY</code> بند). بنابراین در اکثر موارد غیر ضروری است برای مشخص کردن یک جداگانه <code>PRIMARY KEY</code> بند بند.</p> </li> <li> <p><code>SAMPLE BY</code> — An expression for sampling.</p> <p>اگر یک عبارت نمونه برداری استفاده شده است, کلید اصلی باید باشد. مثال: <code>SAMPLE BY intHash32(UserID) ORDER BY (CounterID, EventDate, intHash32(UserID))</code>.</p> </li> <li> <p><code>TTL</code> — A list of rules specifying storage duration of rows and defining logic of automatic parts movement <a href=#table_engine-mergetree-multiple-volumes>بین دیسک و حجم</a>.</p> <p>بیان باید یکی داشته باشد <code>Date</code> یا <code>DateTime</code> ستون به عنوان یک نتیجه. مثال:<br> <code>TTL date + INTERVAL 1 DAY</code></p> <p>نوع قانون <code>DELETE|TO DISK 'xxx'|TO VOLUME 'xxx'</code> مشخص یک عمل با بخش انجام می شود در صورتی که بیان راضی است (می رسد زمان فعلی): حذف ردیف منقضی شده, در حال حرکت بخشی (اگر بیان برای تمام ردیف در یک بخش راضی است) به دیسک مشخص (<code>TO DISK 'xxx'</code>) یا به حجم (<code>TO VOLUME 'xxx'</code>). نوع پیش فرض قانون حذف است (<code>DELETE</code>). فهرست قوانین متعدد می توانید مشخص, اما باید بیش از یک وجود داشته باشد <code>DELETE</code> قانون.</p> <p>برای اطلاعات بیشتر, دیدن <a href=#table_engine-mergetree-ttl>ستون ها و جداول</a></p> </li> <li> <p><code>SETTINGS</code> — Additional parameters that control the behavior of the <code>MergeTree</code>:</p> <ul> <li><code>index_granularity</code> — Maximum number of data rows between the marks of an index. Default value: 8192. See <a href=#mergetree-data-storage>ذخیره سازی داده ها</a>.</li> <li><code>index_granularity_bytes</code> — Maximum size of data granules in bytes. Default value: 10Mb. To restrict the granule size only by number of rows, set to 0 (not recommended). See <a href=#mergetree-data-storage>ذخیره سازی داده ها</a>.</li> <li><code>enable_mixed_granularity_parts</code> — Enables or disables transitioning to control the granule size with the <code>index_granularity_bytes</code> تنظیمات. قبل از نسخه 19.11, تنها وجود دارد <code>index_granularity</code> تنظیم برای محدود کردن اندازه گرانول. این <code>index_granularity_bytes</code> تنظیم را بهبود می بخشد عملکرد کلیک در هنگام انتخاب داده ها از جداول با ردیف بزرگ (ده ها و صدها مگابایت). اگر شما جداول با ردیف بزرگ, شما می توانید این تنظیمات را برای جداول را قادر به بهبود بهره وری از <code>SELECT</code> نمایش داده شد.</li> <li><code>use_minimalistic_part_header_in_zookeeper</code> — Storage method of the data parts headers in ZooKeeper. If <code>use_minimalistic_part_header_in_zookeeper=1</code>, سپس باغ وحش ذخیره داده های کمتر. برای کسب اطلاعات بیشتر, دیدن <a href=../../../../operations/server_configuration_parameters/settings/#server-settings-use_minimalistic_part_header_in_zookeeper>تنظیم توضیحات</a> داخل “Server configuration parameters”.</li> <li><code>min_merge_bytes_to_use_direct_io</code> — The minimum data volume for merge operation that is required for using direct I/O access to the storage disk. When merging data parts, ClickHouse calculates the total storage volume of all the data to be merged. If the volume exceeds <code>min_merge_bytes_to_use_direct_io</code> بایت, تاتر می خواند و می نویسد داده ها به دیسک ذخیره سازی با استفاده از رابط من/ای مستقیم (<code>O_DIRECT</code> گزینه). اگر <code>min_merge_bytes_to_use_direct_io = 0</code>, سپس مستقیم من / ای غیر فعال است. مقدار پیشفرض: <code>10 * 1024 * 1024 * 1024</code> بایت<br> <a name=mergetree_setting-merge_with_ttl_timeout></a></li> <li><code>merge_with_ttl_timeout</code> — Minimum delay in seconds before repeating a merge with TTL. Default value: 86400 (1 day).</li> <li><code>write_final_mark</code> — Enables or disables writing the final index mark at the end of data part (after the last byte). Default value: 1. Don't turn it off.</li> <li><code>merge_max_block_size</code> — Maximum number of rows in block for merge operations. Default value: 8192.</li> <li><code>storage_policy</code> — Storage policy. See <a href=#table_engine-mergetree-multiple-volumes>با استفاده از دستگاه های بلوک های متعدد برای ذخیره سازی داده ها</a>.</li> </ul> </li> </ul> <p><strong>مثال تنظیمات بخش</strong></p> <div class=codehilite><pre><span></span><code><span class=n>ENGINE</span> <span class=n>MergeTree</span><span class=p>()</span> <span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>))</span> <span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>index_granularity</span><span class=o>=</span><span class=mi>8192</span>
</code></pre></div> <p>در مثال ما مجموعه پارتیشن بندی توسط ماه.</p> <p>ما همچنین یک عبارت برای نمونه برداری به عنوان یک هش توسط شناسه کاربر تنظیم شده است. این اجازه می دهد تا شما را به نام مستعار داده ها در جدول برای هر <code>CounterID</code> و <code>EventDate</code>. اگر یک تعریف می کنید <a href=../../../../sql_reference/statements/select/#select-sample-clause>SAMPLE</a> بند هنگام انتخاب داده ClickHouse را یک به طور مساوی pseudorandom داده های نمونه به صورت زیر مجموعه ای از کاربران است.</p> <p>این <code>index_granularity</code> تنظیم می تواند حذف شود زیرا 8192 مقدار پیش فرض است.</p> <details> <p><summary>روش منسوخ برای ایجاد یک جدول</summary></p> <div class="admonition attention"> <p class=admonition-title>توجه</p> <p>از این روش در پروژه های جدید استفاده نکنید. در صورت امکان, تغییر پروژه های قدیمی به روش بالا توضیح.</p> </div> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>MergeTree</span><span class=p>(</span><span class=nb>date</span><span class=o>-</span><span class=k>column</span> <span class=p>[,</span> <span class=n>sampling_expression</span><span class=p>],</span> <span class=p>(</span><span class=k>primary</span><span class=p>,</span> <span class=k>key</span><span class=p>),</span> <span class=n>index_granularity</span><span class=p>)</span>
</code></pre></div> <p><strong>پارامترهای ادغام() </strong></p> <ul> <li><code>date-column</code> — The name of a column of the <a href=../../../../sql_reference/data_types/date/ >تاریخ</a> نوع. تاتر به طور خودکار ایجاد پارتیشن های ماه بر اساس این ستون. نام پارتیشن در <code>"YYYYMM"</code> قالب.</li> <li><code>sampling_expression</code> — An expression for sampling.</li> <li><code>(primary, key)</code> — Primary key. Type: <a href=../../../../sql_reference/data_types/tuple/ >تاپل()</a></li> <li><code>index_granularity</code> — The granularity of an index. The number of data rows between the “marks” از یک شاخص. ارزش 8192 برای بسیاری از وظایف مناسب است.</li> </ul> <p><strong>مثال</strong></p> <div class=codehilite><pre><span></span><code><span class=n>MergeTree</span><span class=p>(</span><span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>),</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)),</span> <span class=mi>8192</span><span class=p>)</span>
</code></pre></div> <p>این <code>MergeTree</code> موتور در همان راه به عنوان مثال بالا برای روش پیکربندی موتور اصلی پیکربندی شده است.</p> </details> <h2 id=mergetree-data-storage>ذخیره سازی داده ها<a class=headerlink href=#mergetree-data-storage title="Permanent link">&para;</a></h2> <p>جدول شامل قطعات داده مرتب شده بر اساس کلید اصلی.</p> <p>هنگامی که داده ها در یک جدول قرار داده, قطعات داده های جداگانه ایجاد می شوند و هر یک از این واژه ها از لحاظ واژگان توسط کلید اصلی طبقه بندی شده اند. برای مثال اگر کلید اصلی است <code>(CounterID, Date)</code> داده ها در بخش طبقه بندی شده اند <code>CounterID</code> و در هر <code>CounterID</code>, این است که توسط دستور داد <code>Date</code>.</p> <p>داده های متعلق به پارتیشن های مختلف به بخش های مختلف جدا می شوند. در پس زمینه, کلیکهاوس ادغام قطعات داده ها برای ذخیره سازی موثر تر. قطعات متعلق به پارتیشن های مختلف با هم ادغام شدند. مکانیزم ادغام تضمین نمی کند که تمام ردیف ها با همان کلید اصلی در بخش داده های مشابه باشد.</p> <p>هر بخش داده منطقی به گرانول تقسیم شده است. گرانول کوچکترین مجموعه داده های تفکیک پذیر است که خانه می خواند در هنگام انتخاب داده ها است. خانه را کلیک می کند ردیف یا ارزش تقسیم نمی, بنابراین هر گرانول همیشه شامل یک عدد صحیح از ردیف. ردیف اول یک گرانول با ارزش کلید اصلی برای ردیف مشخص شده است. برای هر بخش داده, تاتر ایجاد یک فایل شاخص است که فروشگاه علامت. برای هر ستون, چه در کلید اصلی است یا نه, خانه رعیتی نیز علامت همان فروشگاه. این علامت به شما اجازه داده پیدا کردن به طور مستقیم در فایل های ستون.</p> <p>اندازه گرانول توسط <code>index_granularity</code> و <code>index_granularity_bytes</code> تنظیمات موتور جدول. تعداد ردیف ها در یک گرانول در <code>[1, index_granularity]</code> محدوده, بسته به اندازه ردیف. اندازه گرانول می تواند بیش از <code>index_granularity_bytes</code> اگر اندازه یک ردیف بیشتر از ارزش تنظیم است. در این مورد, اندازه گرانول برابر اندازه ردیف.</p> <h2 id=primary-keys-and-indexes-in-queries>کلید های اولیه و شاخص ها در نمایش داده شد<a class=headerlink href=#primary-keys-and-indexes-in-queries title="Permanent link">&para;</a></h2> <p>نگاهی به <code>(CounterID, Date)</code> کلید اصلی به عنوان مثال. در این مورد, مرتب سازی و شاخص را می توان به شرح زیر نشان داده شده:</p> <div class=codehilite><pre><span></span><code><span class=w>  </span><span class=n>Whole</span><span class=w> </span><span class=k>data</span><span class=err>:</span><span class=w>     </span><span class=o>[</span><span class=n>---------------------------------------------</span><span class=o>]</span><span class=w></span>
<span class=w>  </span><span class=nl>CounterID</span><span class=p>:</span><span class=w>      </span><span class=o>[</span><span class=n>aaaaaaaaaaaaaaaaaabbbbcdeeeeeeeeeeeeefgggggggghhhhhhhhhiiiiiiiiikllllllll</span><span class=o>]</span><span class=w></span>
<span class=w>  </span><span class=nc>Date</span><span class=err>:</span><span class=w>           </span><span class=o>[</span><span class=n>1111111222222233331233211111222222333211111112122222223111112223311122333</span><span class=o>]</span><span class=w></span>
<span class=w>  </span><span class=nl>Marks</span><span class=p>:</span><span class=w>           </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w></span>
<span class=w>                  </span><span class=n>a</span><span class=p>,</span><span class=mi>1</span><span class=w>    </span><span class=n>a</span><span class=p>,</span><span class=mi>2</span><span class=w>    </span><span class=n>a</span><span class=p>,</span><span class=mi>3</span><span class=w>    </span><span class=n>b</span><span class=p>,</span><span class=mi>3</span><span class=w>    </span><span class=n>e</span><span class=p>,</span><span class=mi>2</span><span class=w>    </span><span class=n>e</span><span class=p>,</span><span class=mi>3</span><span class=w>    </span><span class=n>g</span><span class=p>,</span><span class=mi>1</span><span class=w>    </span><span class=n>h</span><span class=p>,</span><span class=mi>2</span><span class=w>    </span><span class=n>i</span><span class=p>,</span><span class=mi>1</span><span class=w>    </span><span class=n>i</span><span class=p>,</span><span class=mi>3</span><span class=w>    </span><span class=n>l</span><span class=p>,</span><span class=mi>3</span><span class=w></span>
<span class=w>  </span><span class=n>Marks</span><span class=w> </span><span class=nl>numbers</span><span class=p>:</span><span class=w>   </span><span class=mi>0</span><span class=w>      </span><span class=mi>1</span><span class=w>      </span><span class=mi>2</span><span class=w>      </span><span class=mi>3</span><span class=w>      </span><span class=mi>4</span><span class=w>      </span><span class=mi>5</span><span class=w>      </span><span class=mi>6</span><span class=w>      </span><span class=mi>7</span><span class=w>      </span><span class=mi>8</span><span class=w>      </span><span class=mi>9</span><span class=w>      </span><span class=mi>10</span><span class=w></span>
</code></pre></div> <p>اگر پرسوجوی داده مشخص شود:</p> <ul> <li><code>CounterID in ('a', 'h')</code>, سرور بار خوانده شده داده ها در محدوده علامت <code>[0, 3)</code> و <code>[6, 8)</code>.</li> <li><code>CounterID IN ('a', 'h') AND Date = 3</code>, سرور بار خوانده شده داده ها در محدوده علامت <code>[1, 3)</code> و <code>[7, 8)</code>.</li> <li><code>Date = 3</code>, سرور می خواند داده ها در طیف وسیعی از علامت <code>[1, 10]</code>.</li> </ul> <p>نمونه های فوق نشان می دهد که همیشه بیشتر موثر برای استفاده از شاخص از اسکن کامل است.</p> <p>شاخص پراکنده اجازه می دهد تا داده های اضافی به عنوان خوانده شده. هنگام خواندن یک طیف وسیعی از کلید اصلی, تا <code>index_granularity * 2</code> ردیف اضافی در هر بلوک داده را می توان به عنوان خوانده شده.</p> <p>شاخص پراکنده اجازه می دهد شما را به کار با تعداد بسیار زیادی از ردیف جدول, چرا که در اکثر موارد, چنین شاخص در رم کامپیوتر مناسب.</p> <p>کلیک یک کلید اصلی منحصر به فرد نیاز ندارد. شما می توانید ردیف های متعدد را با همان کلید اولیه وارد کنید.</p> <h3 id=selecting-the-primary-key>انتخاب کلید اصلی<a class=headerlink href=#selecting-the-primary-key title="Permanent link">&para;</a></h3> <p>تعداد ستون ها در کلید اصلی به صراحت محدود نمی شود. بسته به ساختار داده ها, شما می توانید ستون های بیشتر یا کمتر در کلید اصلی شامل. این ممکن است:</p> <ul> <li> <p>بهبود عملکرد یک شاخص.</p> <p>اگر کلید اصلی است <code>(a, b)</code> سپس یک ستون دیگر اضافه کنید <code>c</code> عملکرد را بهبود می بخشد اگر شرایط زیر رعایت شود:</p> <ul> <li>نمایش داده شد با یک شرط در ستون وجود دارد <code>c</code>.</li> <li>محدوده داده های طولانی (چندین بار طولانی تر از <code>index_granularity</code>) با مقادیر یکسان برای <code>(a, b)</code> شایع هستند. به عبارت دیگر, در هنگام اضافه کردن یک ستون دیگر اجازه می دهد تا شما را به جست و خیز محدوده داده بسیار طولانی.</li> </ul> </li> <li> <p>بهبود فشرده سازی داده ها.</p> <p>خانه را کلیک کنید انواع داده ها توسط کلید اصلی, بنابراین بالاتر از ثبات, بهتر فشرده سازی.</p> </li> <li> <p>فراهم می کند که منطق اضافی در هنگام ادغام قطعات داده در <a href=../collapsingmergetree/#table_engine-collapsingmergetree>سقوط غذای اصلی</a> و <a href=../summingmergetree/ >سامینگمرگتری</a> موتورها.</p> <p>در این مورد منطقی است که مشخص شود <em>کلید مرتب سازی</em> که متفاوت از کلید اصلی است.</p> </li> </ul> <p>یک کلید اولیه طولانی منفی عملکرد درج و مصرف حافظه تاثیر می گذارد, اما ستون های اضافی در کلید اصلی انجام عملکرد تاتر در طول تاثیر نمی گذارد <code>SELECT</code> نمایش داده شد.</p> <h3 id=choosing-a-primary-key-that-differs-from-the-sorting-key>انتخاب کلید اصلی است که متفاوت از کلید مرتب سازی<a class=headerlink href=#choosing-a-primary-key-that-differs-from-the-sorting-key title="Permanent link">&para;</a></h3> <p>ممکن است که به مشخص کردن یک کلید اولیه (بیان با ارزش هایی که در فایل شاخص برای هر علامت نوشته شده است) که متفاوت از کلید مرتب سازی (بیان برای مرتب سازی ردیف در بخش های داده). در این مورد تاپل عبارت کلیدی اولیه باید یک پیشوند از تاپل عبارت کلیدی مرتب سازی شود.</p> <p>این ویژگی در هنگام استفاده از مفید است <a href=../summingmergetree/ >سامینگمرگتری</a> و<br> <a href=../aggregatingmergetree/ >ریزدانه</a> موتورهای جدول. در یک مورد مشترک در هنگام استفاده از این موتور جدول دو نوع ستون است: <em>ابعاد</em> و <em>اقدامات</em>. نمایش داده شد نمونه مقادیر کل ستون اندازه گیری با دلخواه <code>GROUP BY</code> و فیلتر بر اساس ابعاد. چون SummingMergeTree و AggregatingMergeTree جمع ردیف با همان مقدار از مرتب سازی کلیدی است برای اضافه کردن همه ابعاد آن است. در نتیجه, بیان کلیدی شامل یک لیست طولانی از ستون ها و این لیست باید اغلب با ابعاد تازه اضافه شده به روز.</p> <p>در این مورد منطقی است که تنها چند ستون در کلید اصلی را ترک کنید که اسکن های محدوده ای موثر را فراهم می کند و ستون های بعد باقی مانده را به دسته کلید مرتب سازی اضافه می کند.</p> <p><a href=../../../../sql_reference/statements/alter/ >ALTER</a> از کلید مرتب سازی یک عملیات سبک وزن است چرا که زمانی که یک ستون جدید به طور همزمان به جدول و به کلید مرتب سازی اضافه, قطعات داده های موجود لازم نیست به تغییر. از کلید مرتب سازی قدیمی یک پیشوند از کلید مرتب سازی جدید است و هیچ داده در ستون به تازگی اضافه شده وجود دارد, داده ها توسط هر دو کلید مرتب سازی قدیمی و جدید در لحظه اصلاح جدول طبقه بندی شده اند.</p> <h3 id=use-of-indexes-and-partitions-in-queries>استفاده از شاخص ها و پارتیشن ها در نمایش داده شد<a class=headerlink href=#use-of-indexes-and-partitions-in-queries title="Permanent link">&para;</a></h3> <p>برای <code>SELECT</code> نمایش داده شد, فاحشه خانه تجزیه و تحلیل اینکه یک شاخص می تواند مورد استفاده قرار گیرد. شاخص می تواند مورد استفاده قرار گیرد در صورتی که <code>WHERE/PREWHERE</code> بند بیان (به عنوان یکی از عناصر رابطه یا به طور کامل) است که نشان دهنده برابری یا نابرابری عملیات مقایسه و یا اگر <code>IN</code> یا <code>LIKE</code> با یک پیشوند ثابت در ستون ها و یا عبارات که در کلید اصلی و یا پارتیشن بندی هستند, و یا در برخی از توابع تا حدی تکراری از این ستون ها, و یا روابط منطقی از این عبارات.</p> <p>بدین ترتیب, ممکن است به سرعت اجرا نمایش داده شد در یک یا بسیاری از محدوده کلید اصلی. در این مثال, نمایش داده شد سریع خواهد بود که برای یک تگ ردیابی خاص اجرا, برای یک برچسب خاص و محدوده تاریخ, برای یک تگ و تاریخ خاص, برای برچسب های متعدد با محدوده تاریخ, و غیره.</p> <p>بیایید به موتور پیکربندی شده به شرح زیر نگاه کنیم:</p> <div class=codehilite><pre><span></span><code><span class=err>  ENGINE MergeTree() PARTITION BY toYYYYMM(EventDate) ORDER BY (CounterID, EventDate) SETTINGS index_granularity=8192</span>
</code></pre></div> <p>در این مورد در نمایش داده شد:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=n>now</span><span class=p>())</span> <span class=k>AND</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=n>now</span><span class=p>())</span> <span class=k>AND</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span> <span class=k>OR</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>42</span><span class=p>)</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=p>((</span><span class=n>EventDate</span> <span class=o>&gt;=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2014-01-01&#39;</span><span class=p>)</span> <span class=k>AND</span> <span class=n>EventDate</span> <span class=o>&lt;=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2014-01-31&#39;</span><span class=p>))</span> <span class=k>OR</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2014-05-01&#39;</span><span class=p>))</span> <span class=k>AND</span> <span class=n>CounterID</span> <span class=k>IN</span> <span class=p>(</span><span class=mi>101500</span><span class=p>,</span> <span class=mi>731962</span><span class=p>,</span> <span class=mi>160656</span><span class=p>)</span> <span class=k>AND</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>101500</span> <span class=k>OR</span> <span class=n>EventDate</span> <span class=o>!=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2014-05-01&#39;</span><span class=p>))</span>
</code></pre></div> <p>خانه رعیتی خواهد شاخص کلید اصلی به تر و تمیز داده های نامناسب و کلید پارتیشن بندی ماهانه به تر و تمیز پارتیشن که در محدوده تاریخ نامناسب هستند استفاده کنید.</p> <p>نمایش داده شد بالا نشان می دهد که شاخص حتی برای عبارات پیچیده استفاده می شود. خواندن از جدول سازمان یافته است به طوری که با استفاده از شاخص نمی تواند کندتر از اسکن کامل.</p> <p>در مثال زیر شاخص نمی تواند مورد استفاده قرار گیرد.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span> <span class=k>OR</span> <span class=n>URL</span> <span class=k>LIKE</span> <span class=s1>&#39;%upyachka%&#39;</span>
</code></pre></div> <p>برای بررسی اینکه تاتر می توانید شاخص زمانی که در حال اجرا یک پرس و جو استفاده, استفاده از تنظیمات <a href=../../../../operations/settings/settings/#settings-force_index_by_date>اجبار</a> و <a href=../../../../operations/settings/settings/ >اجبار</a>.</p> <p>کلید پارتیشن بندی توسط ماه اجازه می دهد تا خواندن تنها کسانی که بلوک های داده که حاوی تاریخ از محدوده مناسب. در این مورد, بلوک داده ها ممکن است حاوی داده ها برای بسیاری از تاریخ (تا یک ماه کامل). در یک بلوک, داده ها توسط کلید اصلی طبقه بندی شده اند, که ممکن است حاوی تاریخ به عنوان ستون اول نیست. به خاطر همین, با استفاده از یک پرس و جو تنها با یک وضعیت تاریخ که پیشوند کلید اصلی مشخص نیست باعث می شود اطلاعات بیشتر از یک تاریخ به عنوان خوانده شود.</p> <h3 id=use-of-index-for-partially-monotonic-primary-keys>استفاده از شاخص برای کلید های اولیه تا حدی یکنواخت<a class=headerlink href=#use-of-index-for-partially-monotonic-primary-keys title="Permanent link">&para;</a></h3> <p>در نظر بگیرید, مثلا, روز از ماه. یک فرم <a href=https://en.wikipedia.org/wiki/Monotonic_function rel="external nofollow noreferrer">توالی یکنواختی</a> برای یک ماه, اما برای مدت طولانی تر یکنواخت نیست. این یک توالی نیمه یکنواخت است. اگر یک کاربر ایجاد جدول با نیمه یکنواخت کلید اولیه, خانه را ایجاد یک شاخص پراکنده به طور معمول. هنگامی که یک کاربر داده ها را انتخاب از این نوع از جدول, تاتر تجزیه و تحلیل شرایط پرس و جو. اگر کاربر می خواهد برای دریافت اطلاعات بین دو علامت از شاخص و هر دو این علامت در عرض یک ماه سقوط, خانه رعیتی می توانید شاخص در این مورد خاص استفاده کنید زیرا می تواند فاصله بین پارامترهای یک پرس و جو و شاخص محاسبه.</p> <p>کلیک خانه می تواند یک شاخص استفاده کنید اگر ارزش های کلید اصلی در محدوده پارامتر پرس و جو یک توالی یکنواخت نشان دهنده نیست. در این مورد, تاتر با استفاده از روش اسکن کامل.</p> <p>تاتر با استفاده از این منطق نه تنها برای روز از توالی ماه, اما برای هر کلید اصلی است که نشان دهنده یک توالی نیمه یکنواخت.</p> <h3 id=table_engine-mergetree-data_skipping-indexes>شاخص های پرش داده (تجربی)<a class=headerlink href=#table_engine-mergetree-data_skipping-indexes title="Permanent link">&para;</a></h3> <p>اعلامیه شاخص در بخش ستون ها از <code>CREATE</code> پرس و جو.</p> <div class=codehilite><pre><span></span><code><span class=k>INDEX</span> <span class=n>index_name</span> <span class=n>expr</span> <span class=k>TYPE</span> <span class=k>type</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>granularity_value</span>
</code></pre></div> <p>برای جداول از <code>*MergeTree</code> خانواده, شاخص پرش داده را می توان مشخص.</p> <p>این شاخص جمع برخی از اطلاعات در مورد بیان مشخص شده بر روی بلوک, که شامل <code>granularity_value</code> گرانول (اندازه گرانول با استفاده از <code>index_granularity</code> تنظیم در موتور جدول). سپس این دانه ها در استفاده می شود <code>SELECT</code> نمایش داده شد برای کاهش مقدار داده ها به خواندن از روی دیسک با پرش بلوک های بزرگ از داده ها که <code>where</code> پرس و جو نمی تواند راضی باشد.</p> <p><strong>مثال</strong></p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>table_name</span>
<span class=p>(</span>
    <span class=n>u64</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>i32</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=n>s</span> <span class=n>String</span><span class=p>,</span>
    <span class=p>...</span>
    <span class=k>INDEX</span> <span class=n>a</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=n>i32</span><span class=p>,</span> <span class=n>s</span><span class=p>)</span> <span class=k>TYPE</span> <span class=n>minmax</span> <span class=n>GRANULARITY</span> <span class=mi>3</span><span class=p>,</span>
    <span class=k>INDEX</span> <span class=n>b</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>))</span> <span class=k>TYPE</span> <span class=k>set</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span>
<span class=p>...</span>
</code></pre></div> <p>شاخص ها از مثال می توانند توسط کلیک خانه استفاده شوند تا میزان داده ها را برای خواندن از دیسک در موارد زیر کاهش دهند:</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>s</span> <span class=o>&lt;</span> <span class=s1>&#39;z&#39;</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>u64</span> <span class=o>*</span> <span class=n>i32</span> <span class=o>==</span> <span class=mi>10</span> <span class=k>AND</span> <span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>1234</span>
</code></pre></div> <h4 id=available-types-of-indices>انواع شاخص های موجود<a class=headerlink href=#available-types-of-indices title="Permanent link">&para;</a></h4> <ul> <li> <p><code>minmax</code></p> <p>فروشگاه افراط و بیان مشخص شده (در صورتی که بیان شده است <code>tuple</code> سپس افراط را برای هر عنصر ذخیره می کند <code>tuple</code>), با استفاده از اطلاعات ذخیره شده برای پرش بلوک از داده ها مانند کلید اصلی.</p> </li> <li> <p><code>set(max_rows)</code></p> <p>ارزش های منحصر به فرد بیان مشخص شده را ذخیره می کند (بیش از <code>max_rows</code> سطرها, <code>max_rows=0</code> یعنی “no limits”). با استفاده از مقادیر برای بررسی در صورتی که <code>WHERE</code> بیان رضایت بخش در یک بلوک از داده ها نیست.</p> </li> <li> <p><code>ngrambf_v1(n, size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code></p> <p>فروشگاه ها <a href=https://en.wikipedia.org/wiki/Bloom_filter rel="external nofollow noreferrer">فیلتر بلوم</a> که شامل تمام نمگرام از یک بلوک از داده ها. این نسخهها کار میکند تنها با رشته. می توان برای بهینه سازی استفاده کرد <code>equals</code>, <code>like</code> و <code>in</code> عبارات.</p> <ul> <li><code>n</code> — ngram size,</li> <li><code>size_of_bloom_filter_in_bytes</code> — Bloom filter size in bytes (you can use large values here, for example, 256 or 512, because it can be compressed well).</li> <li><code>number_of_hash_functions</code> — The number of hash functions used in the Bloom filter.</li> <li><code>random_seed</code> — The seed for Bloom filter hash functions.</li> </ul> </li> <li> <p><code>tokenbf_v1(size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code></p> <p>همان <code>ngrambf_v1</code>, اما فروشگاه نشانه به جای نمرگرام. نشانه ها توالی هایی هستند که توسط شخصیت های غیر عددی جدا شده اند.</p> </li> <li> <p><code>bloom_filter([false_positive])</code> — Stores a <a href=https://en.wikipedia.org/wiki/Bloom_filter rel="external nofollow noreferrer">فیلتر بلوم</a> برای ستون مشخص.</p> <p>اختیاری <code>false_positive</code> پارامتر احتمال دریافت پاسخ مثبت کاذب از فیلتر است. مقادیر ممکن: (0, 1). مقدار پیش فرض: 0.025.</p> <p>انواع داده های پشتیبانی شده: <code>Int*</code>, <code>UInt*</code>, <code>Float*</code>, <code>Enum</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, <code>FixedString</code>, <code>Array</code>, <code>LowCardinality</code>, <code>Nullable</code>.</p> <p>توابع زیر می توانند از این استفاده کنند: <a href=../../../../sql_reference/functions/comparison_functions/ >برابر</a>, <a href=../../../../sql_reference/functions/comparison_functions/ >نقلقولها</a>, <a href=../../../../sql_reference/functions/in_functions/ >داخل</a>, <a href=../../../../sql_reference/functions/in_functions/ >notIn</a>, <a href=../../../../sql_reference/functions/array_functions/ >دارد</a>.</p> </li> </ul> <!-- --> <div class=codehilite><pre><span></span><code><span class=k>INDEX</span> <span class=n>sample_index</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>))</span> <span class=k>TYPE</span> <span class=n>minmax</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=k>INDEX</span> <span class=n>sample_index2</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>),</span> <span class=n>i32</span> <span class=o>+</span> <span class=n>f64</span> <span class=o>*</span> <span class=mi>100</span><span class=p>,</span> <span class=nb>date</span><span class=p>,</span> <span class=n>str</span><span class=p>)</span> <span class=k>TYPE</span> <span class=k>set</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=k>INDEX</span> <span class=n>sample_index3</span> <span class=p>(</span><span class=k>lower</span><span class=p>(</span><span class=n>str</span><span class=p>),</span> <span class=n>str</span><span class=p>)</span> <span class=k>TYPE</span> <span class=n>ngrambf_v1</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>256</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
</code></pre></div> <h4 id=functions-support>توابع پشتیبانی<a class=headerlink href=#functions-support title="Permanent link">&para;</a></h4> <p>شرایط در <code>WHERE</code> بند شامل تماس از توابع است که با ستون کار. اگر ستون بخشی از یک شاخص است, خانه رعیتی تلاش می کند تا استفاده از این شاخص در هنگام انجام توابع. تاتر از زیر مجموعه های مختلف از توابع برای استفاده از شاخص.</p> <p>این <code>set</code> شاخص را می توان با تمام توابع استفاده می شود. زیر مجموعه های تابع برای شاخص های دیگر در جدول زیر نشان داده شده است.</p> <table> <thead> <tr> <th>تابع (اپراتور) / شاخص</th> <th>کلید اصلی</th> <th>مینمکس</th> <th>نمرمبف1</th> <th>توکنبف1</th> <th>ت_ضعیت</th> </tr> </thead> <tbody> <tr> <td><a href=../../../../sql_reference/functions/comparison_functions/#function-equals>اطلاعات دقیق)</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/comparison_functions/#function-notequals>نقلقولهای جدید از این نویسنده=, \&lt;>)</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/string_search_functions/#function-like>مانند</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/string_search_functions/#function-notlike>notLike</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/string_functions/#startswith>startsWith</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/string_functions/#endswith>endsWith</a></td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/string_search_functions/#function-multisearchany>چندزبانه</a></td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/in_functions/#in-functions>داخل</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/in_functions/#in-functions>notIn</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/comparison_functions/#function-less>کمتر (\&lt;)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/comparison_functions/#function-greater>بیشتر (>)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/comparison_functions/#function-lessorequals>در حال بارگذاری)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/comparison_functions/#function-greaterorequals>اطلاعات دقیق)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/array_functions/#function-empty>خالی</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql_reference/functions/array_functions/#function-notempty>notEmpty</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td>شتابدهنده</td> <td>✗</td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✗</td> </tr> </tbody> </table> <p>توابع با استدلال ثابت است که کمتر از اندازه نیگرام می تواند توسط استفاده نمی شود <code>ngrambf_v1</code> برای بهینه سازی پرس و جو.</p> <p>فیلتر بلوم می توانید مسابقات مثبت کاذب دارند, به طوری که <code>ngrambf_v1</code>, <code>tokenbf_v1</code> و <code>bloom_filter</code> شاخص ها نمی توانند برای بهینه سازی پرس و جو هایی که انتظار می رود نتیجه عملکرد نادرست باشد استفاده شوند:</p> <ul> <li>می توان بهینه سازی کرد:<ul> <li><code>s LIKE '%test%'</code></li> <li><code>NOT s NOT LIKE '%test%'</code></li> <li><code>s = 1</code></li> <li><code>NOT s != 1</code></li> <li><code>startsWith(s, 'test')</code></li> </ul> </li> <li>نمی توان بهینه سازی کرد:<ul> <li><code>NOT s LIKE '%test%'</code></li> <li><code>s NOT LIKE '%test%'</code></li> <li><code>NOT s = 1</code></li> <li><code>s != 1</code></li> <li><code>NOT startsWith(s, 'test')</code></li> </ul> </li> </ul> <h2 id=concurrent-data-access>دسترسی همزمان داده ها<a class=headerlink href=#concurrent-data-access title="Permanent link">&para;</a></h2> <p>برای دسترسی به جدول همزمان, ما با استفاده از چند نسخه. به عبارت دیگر, زمانی که یک جدول به طور همزمان خواندن و به روز, داده ها از مجموعه ای از قطعات است که در زمان پرس و جو در حال حاضر به عنوان خوانده شده. هیچ قفل طولانی وجود دارد. درج در راه عملیات خواندن نیست.</p> <p>خواندن از یک جدول به طور خودکار موازی.</p> <h2 id=table_engine-mergetree-ttl>ستون ها و جداول<a class=headerlink href=#table_engine-mergetree-ttl title="Permanent link">&para;</a></h2> <p>تعیین طول عمر ارزش.</p> <p>این <code>TTL</code> بند را می توان برای کل جدول و برای هر ستون فردی تنظیم شده است. همچنین منطق حرکت خودکار داده ها بین دیسک ها و حجم ها را مشخص می کند.</p> <p>عبارات باید به ارزیابی <a href=../../../../sql_reference/data_types/date/ >تاریخ</a> یا <a href=../../../../sql_reference/data_types/datetime/ >DateTime</a> نوع داده.</p> <p>مثال:</p> <div class=codehilite><pre><span></span><code><span class=n>TTL</span> <span class=n>time_column</span>
<span class=n>TTL</span> <span class=n>time_column</span> <span class=o>+</span> <span class=nb>interval</span>
</code></pre></div> <p>برای تعریف <code>interval</code> استفاده <a href=../../../../sql_reference/operators/#operators-datetime>فاصله زمانی</a> اپراتورها.</p> <div class=codehilite><pre><span></span><code><span class=n>TTL</span> <span class=n>date_time</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span>
<span class=n>TTL</span> <span class=n>date_time</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>15</span> <span class=n>HOUR</span>
</code></pre></div> <h3 id=mergetree-column-ttl>ستون<a class=headerlink href=#mergetree-column-ttl title="Permanent link">&para;</a></h3> <p>هنگامی که مقادیر در ستون منقضی, خانه را جایگزین با مقادیر پیش فرض برای نوع داده ستون. اگر تمام مقادیر ستون در بخش داده منقضی, تاتر حذف این ستون از بخش داده ها در یک سیستم فایل.</p> <p>این <code>TTL</code> بند را نمی توان برای ستون های کلیدی استفاده کرد.</p> <p>مثالها:</p> <p>ایجاد یک جدول با تی ال</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>example_table</span>
<span class=p>(</span>
    <span class=n>d</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>a</span> <span class=nb>Int</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>,</span>
    <span class=n>b</span> <span class=nb>Int</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>,</span>
    <span class=k>c</span> <span class=n>String</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>d</span><span class=p>;</span>
</code></pre></div> <p>اضافه کردن تی ال به یک ستون از یک جدول موجود</p> <div class=codehilite><pre><span></span><code><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=k>COLUMN</span>
    <span class=k>c</span> <span class=n>String</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>DAY</span><span class=p>;</span>
</code></pre></div> <p>تغییر تعداد ستون</p> <div class=codehilite><pre><span></span><code><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=k>COLUMN</span>
    <span class=k>c</span> <span class=n>String</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>;</span>
</code></pre></div> <h3 id=mergetree-table-ttl>جدول<a class=headerlink href=#mergetree-table-ttl title="Permanent link">&para;</a></h3> <p>جدول می تواند بیان برای حذف ردیف منقضی شده و عبارات متعدد برای حرکت خودکار قطعات بین <a href=#table_engine-mergetree-multiple-volumes>دیسک یا حجم</a>. هنگامی که ردیف در جدول منقضی, تاتر حذف تمام ردیف مربوطه. برای قطعات در حال حرکت از ویژگی های, تمام ردیف از یک بخش باید معیارهای بیان جنبش را تامین کند.</p> <div class=codehilite><pre><span></span><code><span class=n>TTL</span> <span class=n>expr</span> <span class=p>[</span><span class=k>DELETE</span><span class=o>|</span><span class=k>TO</span> <span class=n>DISK</span> <span class=s1>&#39;aaa&#39;</span><span class=o>|</span><span class=k>TO</span> <span class=n>VOLUME</span> <span class=s1>&#39;bbb&#39;</span><span class=p>],</span> <span class=p>...</span>
</code></pre></div> <p>نوع قانون کنترل هوشمند ممکن است هر عبارت را دنبال کند. این تاثیر می گذارد یک عمل است که باید انجام شود یک بار بیان راضی است (زمان فعلی می رسد):</p> <ul> <li><code>DELETE</code> - حذف ردیف منقضی شده (اقدام پیش فرض);</li> <li><code>TO DISK 'aaa'</code> - انتقال بخشی به دیسک <code>aaa</code>;</li> <li><code>TO VOLUME 'bbb'</code> - انتقال بخشی به دیسک <code>bbb</code>.</li> </ul> <p>مثالها:</p> <p>ایجاد یک جدول با تی ال</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>example_table</span>
<span class=p>(</span>
    <span class=n>d</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>a</span> <span class=nb>Int</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>d</span>
<span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span> <span class=p>[</span><span class=k>DELETE</span><span class=p>],</span>
    <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=n>WEEK</span> <span class=k>TO</span> <span class=n>VOLUME</span> <span class=s1>&#39;aaa&#39;</span><span class=p>,</span>
    <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>2</span> <span class=n>WEEK</span> <span class=k>TO</span> <span class=n>DISK</span> <span class=s1>&#39;bbb&#39;</span><span class=p>;</span>
</code></pre></div> <p>تغییر تعداد جدول</p> <div class=codehilite><pre><span></span><code><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>DAY</span><span class=p>;</span>
</code></pre></div> <p><strong>حذف داده ها</strong></p> <p>داده ها با یک حذف شده است زمانی که محل انتخابی ادغام قطعات داده.</p> <p>هنگامی که کلیک خانه را ببینید که داده تمام شده است, انجام یک ادغام خارج از برنامه. برای کنترل فرکانس چنین ادغام, شما می توانید مجموعه <a href=#mergetree_setting-merge_with_ttl_timeout>ادغام _بههنگامسازی</a>. اگر مقدار خیلی کم است, این بسیاری از ادغام خارج از برنامه است که ممکن است مقدار زیادی از منابع مصرف انجام.</p> <p>اگر شما انجام <code>SELECT</code> پرس و جو بین ادغام, شما ممکن است داده های منقضی شده. برای جلوگیری از استفاده از <a href=../../../../sql_reference/statements/misc/#misc_operations-optimize>OPTIMIZE</a> پرسوجو قبل از <code>SELECT</code>.</p> <h2 id=table_engine-mergetree-multiple-volumes>با استفاده از دستگاه های بلوک های متعدد برای ذخیره سازی داده ها<a class=headerlink href=#table_engine-mergetree-multiple-volumes title="Permanent link">&para;</a></h2> <h3 id=introduction>معرفی شرکت<a class=headerlink href=#introduction title="Permanent link">&para;</a></h3> <p><code>MergeTree</code> موتورهای جدول خانواده می تواند داده ها در دستگاه های بلوک های متعدد ذخیره کنید. مثلا, این می تواند مفید باشد زمانی که داده ها از یک جدول خاص به طور ضمنی به تقسیم “hot” و “cold”. داده های اخیر به طور منظم درخواست شده است اما نیاز به تنها مقدار کمی از فضای. برعکس, داده های تاریخی چربی دم به ندرت درخواست. اگر چندین دیسک در دسترس هستند “hot” داده ها ممکن است بر روی دیسک های سریع واقع (مثلا, اس اس اس اس بلوم و یا در حافظه), در حالی که “cold” داده ها بر روی موارد نسبتا کند (مثلا هارد).</p> <p>بخش داده ها حداقل واحد متحرک برای <code>MergeTree</code>- جدول موتور . داده های متعلق به یک بخش بر روی یک دیسک ذخیره می شود. قطعات داده را می توان بین دیسک در پس زمینه (با توجه به تنظیمات کاربر) و همچنین با استفاده از نقل مکان کرد <a href=../../../../sql_reference/statements/alter/#alter_move-partition>ALTER</a> نمایش داده شد.</p> <h3 id=terms>شرایط<a class=headerlink href=#terms title="Permanent link">&para;</a></h3> <ul> <li>Disk — Block device mounted to the filesystem.</li> <li>Default disk — Disk that stores the path specified in the <a href=../../../../operations/server_configuration_parameters/settings/#server_configuration_parameters-path>مسیر</a> تنظیم سرور.</li> <li>Volume — Ordered set of equal disks (similar to <a href=https://en.wikipedia.org/wiki/Non-RAID_drive_architectures rel="external nofollow noreferrer">JBOD</a>).</li> <li>Storage policy — Set of volumes and the rules for moving data between them.</li> </ul> <p>اسامی داده شده به اشخاص توصیف شده را می توان در جداول سیستم یافت می شود, <a href=../../../../operations/system_tables/#system_tables-storage_policies>سیستم.داستان_یابی</a> و <a href=../../../../operations/system_tables/#system_tables-disks>سیستم.دیسکها</a>. برای اعمال یکی از سیاست های ذخیره سازی پیکربندی شده برای یک جدول از <code>storage_policy</code> تنظیم از <code>MergeTree</code>- جداول خانواده موتور .</p> <h3 id=table_engine-mergetree-multiple-volumes-configure>پیکربندی<a class=headerlink href=#table_engine-mergetree-multiple-volumes-configure title="Permanent link">&para;</a></h3> <p>دیسک, حجم و سیاست های ذخیره سازی باید در داخل اعلام <code>&lt;storage_configuration&gt;</code> برچسب یا در فایل اصلی <code>config.xml</code> یا در یک فایل مجزا در <code>config.d</code> فهرست راهنما.</p> <p>ساختار پیکربندی:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;storage_configuration&gt;</span>
    <span class=nt>&lt;disks&gt;</span>
        <span class=nt>&lt;disk_name_1&gt;</span> <span class=c>&lt;!-- disk name --&gt;</span>
            <span class=nt>&lt;path&gt;</span>/mnt/fast_ssd/clickhouse<span class=nt>&lt;/path&gt;</span>
        <span class=nt>&lt;/disk_name_1&gt;</span>
        <span class=nt>&lt;disk_name_2&gt;</span>
            <span class=nt>&lt;path&gt;</span>/mnt/hdd1/clickhouse<span class=nt>&lt;/path&gt;</span>
            <span class=nt>&lt;keep_free_space_bytes&gt;</span>10485760<span class=nt>&lt;/keep_free_space_bytes&gt;</span>
        <span class=nt>&lt;/disk_name_2&gt;</span>
        <span class=nt>&lt;disk_name_3&gt;</span>
            <span class=nt>&lt;path&gt;</span>/mnt/hdd2/clickhouse<span class=nt>&lt;/path&gt;</span>
            <span class=nt>&lt;keep_free_space_bytes&gt;</span>10485760<span class=nt>&lt;/keep_free_space_bytes&gt;</span>
        <span class=nt>&lt;/disk_name_3&gt;</span>

        ...
    <span class=nt>&lt;/disks&gt;</span>

    ...
<span class=nt>&lt;/storage_configuration&gt;</span>
</code></pre></div> <p>برچسبها:</p> <ul> <li><code>&lt;disk_name_N&gt;</code> — Disk name. Names must be different for all disks.</li> <li><code>path</code> — path under which a server will store data (<code>data</code> و <code>shadow</code> پوشه ها) باید با پایان ‘/’.</li> <li><code>keep_free_space_bytes</code> — the amount of free disk space to be reserved.</li> </ul> <p>منظور از تعریف دیسک مهم نیست.</p> <p>نشانه گذاری پیکربندی سیاست های ذخیره سازی:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;storage_configuration&gt;</span>
    ...
    <span class=nt>&lt;policies&gt;</span>
        <span class=nt>&lt;policy_name_1&gt;</span>
            <span class=nt>&lt;volumes&gt;</span>
                <span class=nt>&lt;volume_name_1&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>disk_name_from_disks_configuration<span class=nt>&lt;/disk&gt;</span>
                    <span class=nt>&lt;max_data_part_size_bytes&gt;</span>1073741824<span class=nt>&lt;/max_data_part_size_bytes&gt;</span>
                <span class=nt>&lt;/volume_name_1&gt;</span>
                <span class=nt>&lt;volume_name_2&gt;</span>
                    <span class=c>&lt;!-- configuration --&gt;</span>
                <span class=nt>&lt;/volume_name_2&gt;</span>
                <span class=c>&lt;!-- more volumes --&gt;</span>
            <span class=nt>&lt;/volumes&gt;</span>
            <span class=nt>&lt;move_factor&gt;</span>0.2<span class=nt>&lt;/move_factor&gt;</span>
        <span class=nt>&lt;/policy_name_1&gt;</span>
        <span class=nt>&lt;policy_name_2&gt;</span>
            <span class=c>&lt;!-- configuration --&gt;</span>
        <span class=nt>&lt;/policy_name_2&gt;</span>

        <span class=c>&lt;!-- more policies --&gt;</span>
    <span class=nt>&lt;/policies&gt;</span>
    ...
<span class=nt>&lt;/storage_configuration&gt;</span>
</code></pre></div> <p>برچسبها:</p> <ul> <li><code>policy_name_N</code> — Policy name. Policy names must be unique.</li> <li><code>volume_name_N</code> — Volume name. Volume names must be unique.</li> <li><code>disk</code> — a disk within a volume.</li> <li><code>max_data_part_size_bytes</code> — the maximum size of a part that can be stored on any of the volume's disks.</li> <li><code>move_factor</code> — when the amount of available space gets lower than this factor, data automatically start to move on the next volume if any (by default, 0.1).</li> </ul> <p>Cofiguration نمونه:</p> <div class=codehilite><pre><span></span><code><span class=nt>&lt;storage_configuration&gt;</span>
    ...
    <span class=nt>&lt;policies&gt;</span>
        <span class=nt>&lt;hdd_in_order&gt;</span> <span class=c>&lt;!-- policy name --&gt;</span>
            <span class=nt>&lt;volumes&gt;</span>
                <span class=nt>&lt;single&gt;</span> <span class=c>&lt;!-- volume name --&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>disk1<span class=nt>&lt;/disk&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>disk2<span class=nt>&lt;/disk&gt;</span>
                <span class=nt>&lt;/single&gt;</span>
            <span class=nt>&lt;/volumes&gt;</span>
        <span class=nt>&lt;/hdd_in_order&gt;</span>

        <span class=nt>&lt;moving_from_ssd_to_hdd&gt;</span>
            <span class=nt>&lt;volumes&gt;</span>
                <span class=nt>&lt;hot&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>fast_ssd<span class=nt>&lt;/disk&gt;</span>
                    <span class=nt>&lt;max_data_part_size_bytes&gt;</span>1073741824<span class=nt>&lt;/max_data_part_size_bytes&gt;</span>
                <span class=nt>&lt;/hot&gt;</span>
                <span class=nt>&lt;cold&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>disk1<span class=nt>&lt;/disk&gt;</span>
                <span class=nt>&lt;/cold&gt;</span>
            <span class=nt>&lt;/volumes&gt;</span>
            <span class=nt>&lt;move_factor&gt;</span>0.2<span class=nt>&lt;/move_factor&gt;</span>
        <span class=nt>&lt;/moving_from_ssd_to_hdd&gt;</span>
    <span class=nt>&lt;/policies&gt;</span>
    ...
<span class=nt>&lt;/storage_configuration&gt;</span>
</code></pre></div> <p>در مثال داده شده <code>hdd_in_order</code> سیاست پیاده سازی <a href=https://en.wikipedia.org/wiki/Round-robin_scheduling rel="external nofollow noreferrer">گرد رابین</a> نزدیک شو بنابراین این سیاست تنها یک جلد را تعریف می کند (<code>single</code>), قطعات داده ها بر روی تمام دیسک های خود را به ترتیب دایره ای ذخیره می شود. چنین سیاستی می تواند بسیار مفید اگر چندین دیسک مشابه به سیستم نصب شده وجود دارد, اما حمله پیکربندی نشده است. به خاطر داشته باشید که هر درایو دیسک منحصر به فرد قابل اعتماد نیست و شما ممکن است بخواهید با عامل تکرار 3 یا بیشتر جبران.</p> <p>اگر انواع مختلف دیسک های موجود در سیستم وجود دارد, <code>moving_from_ssd_to_hdd</code> سیاست را می توان به جای استفاده. حجم <code>hot</code> شامل یک دیسک اس اس دی (<code>fast_ssd</code>), و حداکثر اندازه یک بخش است که می تواند در این حجم ذخیره شده است 1گیگابایت. تمام قطعات با اندازه بزرگتر از 1 گیگابایت به طور مستقیم در <code>cold</code> حجم, که شامل یک دیسک هارد <code>disk1</code>.<br> همچنین هنگامی که دیسک <code>fast_ssd</code> می شود توسط بیش از پر 80%, داده خواهد شد به انتقال <code>disk1</code> توسط یک فرایند پس زمینه.</p> <p>منظور شمارش حجم در یک سیاست ذخیره سازی مهم است. هنگامی که یک حجم پر شده است, داده ها به یک بعدی منتقل. ترتیب شمارش دیسک نیز مهم است زیرا داده ها در نوبت ذخیره می شوند.</p> <p>هنگام ایجاد یک جدول می توان یکی از سیاست های ذخیره سازی پیکربندی شده را اعمال کرد:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>table_with_non_default_policy</span> <span class=p>(</span>
    <span class=n>EventDate</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=n>OrderID</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>BannerID</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>SearchPhrase</span> <span class=n>String</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>OrderID</span><span class=p>,</span> <span class=n>BannerID</span><span class=p>)</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span>
<span class=n>SETTINGS</span> <span class=n>storage_policy</span> <span class=o>=</span> <span class=s1>&#39;moving_from_ssd_to_hdd&#39;</span>
</code></pre></div> <p>این <code>default</code> سیاست ذخیره سازی نشان میدهد تنها با استفاده از یک حجم, که متشکل از تنها یک دیسک داده شده در <code>&lt;path&gt;</code>. هنگامی که یک جدول ایجاد شده است, سیاست ذخیره سازی خود را نمی توان تغییر داد.</p> <h3 id=details>اطلاعات دقیق<a class=headerlink href=#details title="Permanent link">&para;</a></h3> <p>در مورد <code>MergeTree</code> جداول داده ها به دیسک در راه های مختلف گرفتن است:</p> <ul> <li>به عنوان یک نتیجه از درج (<code>INSERT</code> پرسوجو).</li> <li>در طول پس زمینه ادغام و <a href=../../../../sql_reference/statements/alter/#alter-mutations>جهشها</a>.</li> <li>هنگام دانلود از ماکت دیگر.</li> <li>به عنوان یک نتیجه از انجماد پارتیشن <a href=../../../../sql_reference/statements/alter/#alter_freeze-partition>ALTER TABLE … FREEZE PARTITION</a>.</li> </ul> <p>در تمام این موارد به جز جهش و پارتیشن انجماد بخش ذخیره شده در حجم و دیسک با توجه به سیاست ذخیره سازی داده شده است:</p> <ol> <li>جلد اول (به ترتیب تعریف) که فضای دیسک به اندازه کافی برای ذخیره سازی یک بخش (<code>unreserved_space &gt; current_part_size</code>) و اجازه می دهد تا برای ذخیره سازی بخش هایی از اندازه داده شده (<code>max_data_part_size_bytes &gt; current_part_size</code>) انتخاب شده است .</li> <li>در این حجم, که دیسک انتخاب شده است که به دنبال یکی, که برای ذخیره سازی تکه های قبلی از داده مورد استفاده قرار گرفت, و دارای فضای رایگان بیش از اندازه بخش (<code>unreserved_space - keep_free_space_bytes &gt; current_part_size</code>).</li> </ol> <p>تحت هود جهش و پارتیشن انجماد استفاده از <a href=https://en.wikipedia.org/wiki/Hard_link rel="external nofollow noreferrer">لینک های سخت</a>. لینک های سخت بین دیسک های مختلف پشتیبانی نمی شوند بنابراین در چنین مواردی قطعات حاصل شده بر روی دیسک های مشابه به عنوان اولیه ذخیره می شوند.</p> <p>در پس زمینه, قطعات بین حجم بر اساس مقدار فضای رایگان نقل مکان کرد (<code>move_factor</code> پارامتر) با توجه به سفارش حجم در فایل پیکربندی اعلام کرد.<br> داده ها هرگز از گذشته و به یکی از اولین منتقل شده است. ممکن است از جداول سیستم استفاده کنید <a href=../../../../operations/system_tables/#system_tables-part-log>سیستم._خروج</a> (زمینه <code>type = MOVE_PART</code>) و <a href=../../../../operations/system_tables/#system_tables-parts>سیستم.قطعات</a> (فیلدها <code>path</code> و <code>disk</code>) برای نظارت بر حرکت پس زمینه . همچنین, اطلاعات دقیق را می توان در سیاهههای مربوط به سرور پیدا شده است.</p> <p>کاربر می تواند نیروی حرکت بخشی یا پارتیشن از یک حجم به دیگری با استفاده از پرس و جو <a href=../../../../sql_reference/statements/alter/#alter_move-partition>ALTER TABLE … MOVE PART|PARTITION … TO VOLUME|DISK …</a>, تمام محدودیت برای عملیات پس زمینه در نظر گرفته شود. پرس و جو شروع یک حرکت به خودی خود و منتظر نیست برای عملیات پس زمینه به پایان خواهد رسید. کاربر یک پیام خطا اگر فضای رایگان به اندازه کافی در دسترس است و یا اگر هر یک از شرایط مورد نیاز را ملاقات کرد.</p> <p>داده های متحرک با تکرار داده ها دخالت نمی کنند. از این رو, سیاست های ذخیره سازی مختلف را می توان برای همان جدول در کپی های مختلف مشخص.</p> <p>پس از اتمام ادغام پس زمینه و جهش, قطعات قدیمی تنها پس از یک مقدار مشخصی از زمان حذف (<code>old_parts_lifetime</code>).<br> در طول این زمان به حجم یا دیسک های دیگر منتقل نمی شوند. از این رو, تا زمانی که قطعات در نهایت حذف, هنوز هم به حساب برای ارزیابی فضای دیسک اشغال گرفته.</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>ساخته شده از <a href=https://github.com/ClickHouse/ClickHouse/commit/c1558f8c18e2727c5991cf923ee79710de89d1d0 rel="external nofollow noreferrer" target=_blank class=text-reset>c1558f8c18</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>جدول محتویات</label> <a href=#table_engine-mergetree-creating-a-table title="ایجاد یک جدول" class="nav-link text-wrap d-inline-block w-100"> ایجاد یک جدول </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#mergetree-query-clauses title="بندهای پرسوجو" class="nav-link text-wrap d-inline-block w-100"> بندهای پرسوجو </a> </nav> <a href=#mergetree-data-storage title="ذخیره سازی داده ها" class="nav-link text-wrap d-inline-block w-100"> ذخیره سازی داده ها </a> <a href=#primary-keys-and-indexes-in-queries title="کلید های اولیه و شاخص ها در نمایش داده شد" class="nav-link text-wrap d-inline-block w-100"> کلید های اولیه و شاخص ها در نمایش داده شد </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#selecting-the-primary-key title="انتخاب کلید اصلی" class="nav-link text-wrap d-inline-block w-100"> انتخاب کلید اصلی </a> <a href=#choosing-a-primary-key-that-differs-from-the-sorting-key title="انتخاب کلید اصلی است که متفاوت از کلید مرتب سازی" class="nav-link text-wrap d-inline-block w-100"> انتخاب کلید اصلی است که متفاوت از کلید مرتب سازی </a> <a href=#use-of-indexes-and-partitions-in-queries title="استفاده از شاخص ها و پارتیشن ها در نمایش داده شد" class="nav-link text-wrap d-inline-block w-100"> استفاده از شاخص ها و پارتیشن ها در نمایش داده شد </a> <a href=#use-of-index-for-partially-monotonic-primary-keys title="استفاده از شاخص برای کلید های اولیه تا حدی یکنواخت" class="nav-link text-wrap d-inline-block w-100"> استفاده از شاخص برای کلید های اولیه تا حدی یکنواخت </a> <a href=#table_engine-mergetree-data_skipping-indexes title="شاخص های پرش داده (تجربی)" class="nav-link text-wrap d-inline-block w-100"> شاخص های پرش داده (تجربی) </a> <nav id=toc-toc-3-5 class="nav flex-column pl-2"> <a href=#available-types-of-indices title="انواع شاخص های موجود" class="nav-link text-wrap d-inline-block w-100"> انواع شاخص های موجود </a> <a href=#functions-support title="توابع پشتیبانی" class="nav-link text-wrap d-inline-block w-100"> توابع پشتیبانی </a> </nav> </nav> <a href=#concurrent-data-access title="دسترسی همزمان داده ها" class="nav-link text-wrap d-inline-block w-100"> دسترسی همزمان داده ها </a> <a href=#table_engine-mergetree-ttl title="ستون ها و جداول" class="nav-link text-wrap d-inline-block w-100"> ستون ها و جداول </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#mergetree-column-ttl title=ستون class="nav-link text-wrap d-inline-block w-100"> ستون </a> <a href=#mergetree-table-ttl title=جدول class="nav-link text-wrap d-inline-block w-100"> جدول </a> </nav> <a href=#table_engine-mergetree-multiple-volumes title="با استفاده از دستگاه های بلوک های متعدد برای ذخیره سازی داده ها" class="nav-link text-wrap d-inline-block w-100"> با استفاده از دستگاه های بلوک های متعدد برای ذخیره سازی داده ها </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#introduction title="معرفی شرکت" class="nav-link text-wrap d-inline-block w-100"> معرفی شرکت </a> <a href=#terms title=شرایط class="nav-link text-wrap d-inline-block w-100"> شرایط </a> <a href=#table_engine-mergetree-multiple-volumes-configure title=پیکربندی class="nav-link text-wrap d-inline-block w-100"> پیکربندی </a> <a href=#details title="اطلاعات دقیق" class="nav-link text-wrap d-inline-block w-100"> اطلاعات دقیق </a> </nav> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=en data-version=v19.8 data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Reference - ClickHouse v19.8 Documentation</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Reference - ClickHouse v19.8 Documentation"><meta property=og:description content="Function reference count() Counts the number of rows. Accepts zero arguments and returns UInt64. The syntax COUNT(DISTIN"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Reference - ClickHouse v19.8 Documentation"><meta name=description content="Function reference count() Counts the number of rows. Accepts zero arguments and returns UInt64. The syntax COUNT(DISTIN"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Reference </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/en/query_language/agg_functions/reference.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/en.svg alt=English title=English width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v19.8/en/query_language/agg_functions/reference/ class="dropdown-item disabled"> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v19.8/zh/query_language/agg_functions/reference/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v19.8/es/query_language/agg_functions/reference/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v19.8/fr/query_language/agg_functions/reference/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v19.8/ru/query_language/agg_functions/reference/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v19.8/ja/query_language/agg_functions/reference/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v19.8/fa/query_language/agg_functions/reference/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> Version: <span class=text-light>v19.8</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/en/ class=dropdown-item> <span class=text-light>latest</span> </a> <a href=/docs/v20.3/en/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/en/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/en/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/en/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/en/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/en/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/en/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/en/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/en/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/en/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/en/ class="dropdown-item disable">v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Introduction class="nav-link text-light text-wrap dropdown-toggle px-0">Introduction</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../introduction/distinctive_features/ title="Distinctive Features of ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distinctive Features of ClickHouse</a> <a href=../../../introduction/features_considered_disadvantages/ title="ClickHouse Features that Can Be Considered Disadvantages" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Features that Can Be Considered Disadvantages</a> <a href=../../../introduction/performance/ title=Performance class="nav-link text-light text-wrap d-inline-block w-100 px-0">Performance</a> <a href=../../../introduction/ya_metrika_task/ title="The Yandex.Metrica Task" class="nav-link text-light text-wrap d-inline-block w-100 px-0">The Yandex.Metrica Task</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title="Getting Started" class="nav-link text-light text-wrap dropdown-toggle px-0">Getting Started</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/ title="Deploying and Running" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Deploying and Running</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title="Example Datasets" class="nav-link text-light text-wrap dropdown-toggle px-0">Example Datasets</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title="New York Taxi Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Data</a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting_started/example_datasets/criteo/ title="Terabyte Click Logs from Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Terabyte Click Logs from Criteo</a> <a href=../../../getting_started/example_datasets/star_schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../../getting_started/example_datasets/metrica/ title="Yandex.Metrica Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica Data</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Interfaces class="nav-link text-light text-wrap dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../interfaces/cli/ title="Command-Line Client" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Command-Line Client</a> <a href=../../../interfaces/tcp/ title="Native Interface (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Native Interface (TCP)</a> <a href=../../../interfaces/http/ title="HTTP Interface" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP Interface</a> <a href=../../../interfaces/formats/ title="Input and Output Formats" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Input and Output Formats</a> <a href=../../../interfaces/jdbc/ title="JDBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC Driver</a> <a href=../../../interfaces/odbc/ title="ODBC Driver" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC Driver</a> <a href=#sidebar-sidebar-3-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-8 title=Third-Party class="nav-link text-light text-wrap dropdown-toggle px-0">Third-Party</a> <div id=sidebar-sidebar-3-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/client_libraries/ title="Client Libraries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Client Libraries</a> <a href=../../../interfaces/third-party/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../interfaces/third-party/gui/ title="Visual Interfaces" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Visual Interfaces</a> <a href=../../../interfaces/third-party/proxy/ title=Proxies class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxies</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title="Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Data Types</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../data_types/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../../data_types/boolean/ title=Boolean class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean</a> <a href=../../../data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../../data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../../data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../../data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../../data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=../../../data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-4-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-16 title="Nested Data Structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested Data Structures</a> <div id=sidebar-sidebar-4-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=#sidebar-sidebar-4-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-17 title="Special Data Types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special Data Types</a> <div id=sidebar-sidebar-4-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../../data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> </nav> </div> <a href=#sidebar-sidebar-4-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-18 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-4-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../operations/table_engines/replication/ title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a> <a href=../../../operations/table_engines/custom_partitioning_key/ title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a> <a href=../../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../operations/table_engines/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/log_family/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/table_engines/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../operations/table_engines/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../../operations/table_engines/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../operations/table_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../../operations/table_engines/external_data/ title="External data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External data</a> <a href=../../../operations/table_engines/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../../operations/table_engines/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../../operations/table_engines/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../../operations/table_engines/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../operations/table_engines/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../operations/table_engines/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../../operations/table_engines/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../operations/table_engines/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../../operations/table_engines/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../operations/table_engines/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../../operations/table_engines/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../../operations/table_engines/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../operations/table_engines/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title="SQL Reference" class="nav-link text-light text-wrap dropdown-toggle px-0">SQL Reference</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../query_language/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../query_language/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../query_language/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../query_language/misc/ title="Other Kinds of Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other Kinds of Queries</a> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../query_language/functions/arithmetic_functions/ title=Arithmetic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arithmetic</a> <a href=../../../query_language/functions/comparison_functions/ title=Comparison class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparison</a> <a href=../../../query_language/functions/logical_functions/ title=Logical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Logical</a> <a href=../../../query_language/functions/type_conversion_functions/ title="Type Conversion" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Type Conversion</a> <a href=../../../query_language/functions/date_time_functions/ title="Working with Dates and Times" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Dates and Times</a> <a href=../../../query_language/functions/string_functions/ title="Working with strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with strings</a> <a href=../../../query_language/functions/string_search_functions/ title="For Searching Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Searching Strings</a> <a href=../../../query_language/functions/string_replace_functions/ title="For Replacing in Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Replacing in Strings</a> <a href=../../../query_language/functions/conditional_functions/ title="Conditional " class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conditional </a> <a href=../../../query_language/functions/math_functions/ title=Mathematical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mathematical</a> <a href=../../../query_language/functions/rounding_functions/ title=Rounding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rounding</a> <a href=../../../query_language/functions/array_functions/ title="Working with Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Arrays</a> <a href=../../../query_language/functions/splitting_merging_functions/ title="Splitting and Merging Strings and Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Splitting and Merging Strings and Arrays</a> <a href=../../../query_language/functions/bit_functions/ title=Bit class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bit</a> <a href=../../../query_language/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../../query_language/functions/hash_functions/ title=Hash class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a> <a href=../../../query_language/functions/random_functions/ title="Generating Pseudo-Random Numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generating Pseudo-Random Numbers</a> <a href=../../../query_language/functions/encoding_functions/ title=Encoding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encoding</a> <a href=../../../query_language/functions/uuid_functions/ title="Working with UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with UUID</a> <a href=../../../query_language/functions/url_functions/ title="Working with URLs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with URLs</a> <a href=../../../query_language/functions/ip_address_functions/ title="Working with IP Addresses" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with IP Addresses</a> <a href=../../../query_language/functions/json_functions/ title="Working with JSON." class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with JSON.</a> <a href=../../../query_language/functions/higher_order_functions/ title=Higher-Order class="nav-link text-light text-wrap d-inline-block w-100 px-0">Higher-Order</a> <a href=../../../query_language/functions/ext_dict_functions/ title="Working with External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with External Dictionaries</a> <a href=../../../query_language/functions/ym_dict_functions/ title="Working with Yandex.Metrica Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Yandex.Metrica Dictionaries</a> <a href=../../../query_language/functions/in_functions/ title="Implementing the IN Operator" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implementing the IN Operator</a> <a href=../../../query_language/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../query_language/functions/geo/ title="Working with geographical coordinates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with geographical coordinates</a> <a href=../../../query_language/functions/functions_for_nulls/ title="Working with Nullable arguments" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Nullable arguments</a> <a href=../../../query_language/functions/other_functions/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Aggregate Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate Functions</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/agg_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../query_language/agg_functions/reference/ title=Reference class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Reference</a> <a href=../../../query_language/agg_functions/combinators/ title="Aggregate function combinators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aggregate function combinators</a> <a href=../../../query_language/agg_functions/parametric_functions/ title="Parametric aggregate functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parametric aggregate functions</a> </nav> </div> <a href=#sidebar-sidebar-6-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9 title="Table Functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Functions</a> <div id=sidebar-sidebar-6-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/table_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../query_language/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../query_language/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../../query_language/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../../query_language/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../../query_language/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../query_language/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../query_language/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../query_language/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> </nav> </div> <a href=#sidebar-sidebar-6-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-10 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/dicts/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-6-10-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-10-2 title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a> <div id=sidebar-sidebar-6-10-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/dicts/external_dicts/ title="General Description" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Description</a> <a href=../../../query_language/dicts/external_dicts_dict/ title="Configuring an External Dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuring an External Dictionary</a> <a href=../../../query_language/dicts/external_dicts_dict_layout/ title="Storing Dictionaries in Memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Storing Dictionaries in Memory</a> <a href=../../../query_language/dicts/external_dicts_dict_lifetime/ title="Dictionary Updates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Updates</a> <a href=../../../query_language/dicts/external_dicts_dict_sources/ title="Sources of External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources of External Dictionaries</a> <a href=../../../query_language/dicts/external_dicts_dict_structure/ title="Dictionary Key and Fields" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary Key and Fields</a> </nav> </div> <a href=../../../query_language/dicts/internal_dicts/ title="Internal Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Internal Dictionaries</a> </nav> </div> <a href=../../../query_language/operators/ title=Operators class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operators</a> <a href=../../../query_language/syntax/ title="General Syntax" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Syntax</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Operations class="nav-link text-light text-wrap dropdown-toggle px-0">Operations</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/requirements/ title=Requirements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requirements</a> <a href=../../../operations/monitoring/ title=Monitoring class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoring</a> <a href=../../../operations/troubleshooting/ title=Troubleshooting class="nav-link text-light text-wrap d-inline-block w-100 px-0">Troubleshooting</a> <a href=../../../operations/tips/ title="Usage Recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage Recommendations</a> <a href=../../../operations/update/ title="ClickHouse Update" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Update</a> <a href=../../../operations/access_rights/ title="Access Rights" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Access Rights</a> <a href=../../../operations/backup/ title="Data Backup" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Backup</a> <a href=../../../operations/configuration_files/ title="Configuration Files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration Files</a> <a href=../../../operations/quotas/ title=Quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quotas</a> <a href=../../../operations/system_tables/ title="System Tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">System Tables</a> <a href=#sidebar-sidebar-7-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-12 title="Server Configuration Parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server Configuration Parameters</a> <div id=sidebar-sidebar-7-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/server_settings/settings/ title="Server Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server Settings</a> </nav> </div> <a href=#sidebar-sidebar-7-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-13 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-7-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/settings/permissions_for_queries/ title="Permissions for Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permissions for Queries</a> <a href=../../../operations/settings/query_complexity/ title="Restrictions on Query Complexity" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions on Query Complexity</a> <a href=../../../operations/settings/settings/ title=Settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a> <a href=../../../operations/settings/settings_profiles/ title="Settings Profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings Profiles</a> </nav> </div> <a href=#sidebar-sidebar-7-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-14 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-7-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utils/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../operations/utils/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../../operations/utils/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=F.A.Q. class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/general/ title="General Questions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General Questions</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Development class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/architecture/ title="Overview of ClickHouse Architecture" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview of ClickHouse Architecture</a> <a href=../../../development/build/ title="How to Build ClickHouse on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux</a> <a href=../../../development/build_osx/ title="How to Build ClickHouse on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Mac OS X</a> <a href=../../../development/style/ title="How to Write C++ code" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Write C++ code</a> <a href=../../../development/tests/ title="How to Run ClickHouse Tests" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Run ClickHouse Tests</a> <a href=../../../development/contrib/ title="Third-Party Libraries Used" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Third-Party Libraries Used</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="What's New" class="nav-link text-light text-wrap dropdown-toggle px-0">What's New</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../../changelog/ title=Changelog class="nav-link text-light text-wrap d-inline-block w-100 px-0">Changelog</a> <a href=../../../security_changelog/ title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a> </nav> </div> <a href=../../../single/clickhouse_en.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=function-reference>Function reference<a class=headerlink href=#function-reference title="Permanent link">&para;</a></h1> <h2 id=agg_function-count>count()<a class=headerlink href=#agg_function-count title="Permanent link">&para;</a></h2> <p>Counts the number of rows. Accepts zero arguments and returns UInt64.<br> The syntax <code>COUNT(DISTINCT x)</code> is not supported. The separate <code>uniq</code> aggregate function exists for this purpose.</p> <p>A <code>SELECT count() FROM table</code> query is not optimized, because the number of entries in the table is not stored separately. It will select some small column from the table and count the number of values in it.</p> <h2 id=agg_function-any>any(x)<a class=headerlink href=#agg_function-any title="Permanent link">&para;</a></h2> <p>Selects the first encountered value.<br> The query can be executed in any order and even in a different order each time, so the result of this function is indeterminate.<br> To get a determinate result, you can use the 'min' or 'max' function instead of 'any'.</p> <p>In some cases, you can rely on the order of execution. This applies to cases when SELECT comes from a subquery that uses ORDER BY.</p> <p>When a <code>SELECT</code> query has the <code>GROUP BY</code> clause or at least one aggregate function, ClickHouse (in contrast to MySQL) requires that all expressions in the <code>SELECT</code>, <code>HAVING</code>, and <code>ORDER BY</code> clauses be calculated from keys or from aggregate functions. In other words, each column selected from the table must be used either in keys or inside aggregate functions. To get behavior like in MySQL, you can put the other columns in the <code>any</code> aggregate function.</p> <h2 id=anyheavy-x>anyHeavy(x)<a class=headerlink href=#anyheavy-x title="Permanent link">&para;</a></h2> <p>Selects a frequently occurring value using the <a href=http://www.cs.umd.edu/~samir/498/karp.pdf rel="external nofollow noreferrer">heavy hitters</a> algorithm. If there is a value that occurs more than in half the cases in each of the query's execution threads, this value is returned. Normally, the result is nondeterministic.</p> <div class=codehilite><pre><span></span><code><span class=err>anyHeavy(column)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code>column</code> – The column name.</li> </ul> <p><strong>Example</strong></p> <p>Take the <a href=../../../getting_started/example_datasets/ontime/ >OnTime</a> data set and select any frequently occurring value in the <code>AirlineID</code> column.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>anyHeavy</span><span class=p>(</span><span class=n>AirlineID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌───res─┐</span>
<span class=err>│ 19690 │</span>
<span class=err>└───────┘</span>
</code></pre></div> <h2 id=anylast-x>anyLast(x)<a class=headerlink href=#anylast-x title="Permanent link">&para;</a></h2> <p>Selects the last value encountered.<br> The result is just as indeterminate as for the <code>any</code> function.</p> <h2 id=groupbitand>groupBitAnd<a class=headerlink href=#groupbitand title="Permanent link">&para;</a></h2> <p>Applies bitwise <code>AND</code> for series of numbers.</p> <div class=codehilite><pre><span></span><code><span class=err>groupBitAnd(expr)</span>
</code></pre></div> <p><strong>Parameters</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p> <p><strong>Return value</strong></p> <p>Value of the <code>UInt*</code> type.</p> <p><strong>Example</strong></p> <p>Test data:</p> <div class=codehilite><pre><span></span><code><span class=err>binary     decimal</span>
<span class=err>00101100 = 44</span>
<span class=err>00011100 = 28</span>
<span class=err>00001101 = 13</span>
<span class=err>01010101 = 85</span>
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code><span class=err>SELECT groupBitAnd(num) FROM t</span>
</code></pre></div> <p>Where <code>num</code> is the column with the test data.</p> <p>Result:</p> <div class=codehilite><pre><span></span><code><span class=err>binary     decimal</span>
<span class=err>00000100 = 4</span>
</code></pre></div> <h2 id=groupbitor>groupBitOr<a class=headerlink href=#groupbitor title="Permanent link">&para;</a></h2> <p>Applies bitwise <code>OR</code> for series of numbers.</p> <div class=codehilite><pre><span></span><code><span class=err>groupBitOr(expr)</span>
</code></pre></div> <p><strong>Parameters</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p> <p><strong>Return value</strong></p> <p>Value of the <code>UInt*</code> type.</p> <p><strong>Example</strong></p> <p>Test data:</p> <div class=codehilite><pre><span></span><code><span class=err>binary     decimal</span>
<span class=err>00101100 = 44</span>
<span class=err>00011100 = 28</span>
<span class=err>00001101 = 13</span>
<span class=err>01010101 = 85</span>
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code><span class=err>SELECT groupBitOr(num) FROM t</span>
</code></pre></div> <p>Where <code>num</code> is the column with the test data.</p> <p>Result:</p> <div class=codehilite><pre><span></span><code><span class=err>binary     decimal</span>
<span class=err>01111101 = 125</span>
</code></pre></div> <h2 id=groupbitxor>groupBitXor<a class=headerlink href=#groupbitxor title="Permanent link">&para;</a></h2> <p>Applies bitwise <code>XOR</code> for series of numbers.</p> <div class=codehilite><pre><span></span><code><span class=err>groupBitXor(expr)</span>
</code></pre></div> <p><strong>Parameters</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p> <p><strong>Return value</strong></p> <p>Value of the <code>UInt*</code> type.</p> <p><strong>Example</strong></p> <p>Test data:</p> <div class=codehilite><pre><span></span><code><span class=err>binary     decimal</span>
<span class=err>00101100 = 44</span>
<span class=err>00011100 = 28</span>
<span class=err>00001101 = 13</span>
<span class=err>01010101 = 85</span>
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code><span class=err>SELECT groupBitXor(num) FROM t</span>
</code></pre></div> <p>Where <code>num</code> is the column with the test data.</p> <p>Result:</p> <div class=codehilite><pre><span></span><code><span class=err>binary     decimal</span>
<span class=err>01101000 = 104</span>
</code></pre></div> <h2 id=groupbitmap>groupBitmap<a class=headerlink href=#groupbitmap title="Permanent link">&para;</a></h2> <p>Bitmap or Aggregate calculations from a unsigned integer column, return cardinality of type UInt64, if add suffix -State, then return <a href=../../functions/bitmap_functions/ >bitmap object</a>.</p> <div class=codehilite><pre><span></span><code><span class=err>groupBitmap(expr)</span>
</code></pre></div> <p><strong>Parameters</strong></p> <p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p> <p><strong>Return value</strong></p> <p>Value of the <code>UInt64</code> type.</p> <p><strong>Example</strong></p> <p>Test data:</p> <div class=codehilite><pre><span></span><code><span class=err>userid</span>
<span class=err>1</span>
<span class=err>1</span>
<span class=err>2</span>
<span class=err>3</span>
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code><span class=err>SELECT groupBitmap(userid) as num FROM t</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code><span class=err>num</span>
<span class=err>3</span>
</code></pre></div> <h2 id=agg_function-min>min(x)<a class=headerlink href=#agg_function-min title="Permanent link">&para;</a></h2> <p>Calculates the minimum.</p> <h2 id=agg_function-max>max(x)<a class=headerlink href=#agg_function-max title="Permanent link">&para;</a></h2> <p>Calculates the maximum.</p> <h2 id=agg_function-argMin>argMin(arg, val)<a class=headerlink href=#agg_function-argMin title="Permanent link">&para;</a></h2> <p>Calculates the 'arg' value for a minimal 'val' value. If there are several different values of 'arg' for minimal values of 'val', the first of these values encountered is output.</p> <p><strong>Example:</strong></p> <div class=codehilite><pre><span></span><code><span class=err>┌─</span><span class=k>user</span><span class=err>─────┬─</span><span class=n>salary</span><span class=err>─┐</span>
<span class=err>│</span> <span class=n>director</span> <span class=err>│</span>   <span class=mi>5000</span> <span class=err>│</span>
<span class=err>│</span> <span class=n>manager</span>  <span class=err>│</span>   <span class=mi>3000</span> <span class=err>│</span>
<span class=err>│</span> <span class=n>worker</span>   <span class=err>│</span>   <span class=mi>1000</span> <span class=err>│</span>
<span class=err>└──────────┴────────┘</span>

<span class=k>SELECT</span> <span class=n>argMin</span><span class=p>(</span><span class=k>user</span><span class=p>,</span> <span class=n>salary</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>salary</span>

<span class=err>┌─</span><span class=n>argMin</span><span class=p>(</span><span class=k>user</span><span class=p>,</span> <span class=n>salary</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span> <span class=n>worker</span>               <span class=err>│</span>
<span class=err>└──────────────────────┘</span>
</code></pre></div> <h2 id=agg_function-argMax>argMax(arg, val)<a class=headerlink href=#agg_function-argMax title="Permanent link">&para;</a></h2> <p>Calculates the 'arg' value for a maximum 'val' value. If there are several different values of 'arg' for maximum values of 'val', the first of these values encountered is output.</p> <h2 id=agg_function-sum>sum(x)<a class=headerlink href=#agg_function-sum title="Permanent link">&para;</a></h2> <p>Calculates the sum.<br> Only works for numbers.</p> <h2 id=sumwithoverflow-x>sumWithOverflow(x)<a class=headerlink href=#sumwithoverflow-x title="Permanent link">&para;</a></h2> <p>Computes the sum of the numbers, using the same data type for the result as for the input parameters. If the sum exceeds the maximum value for this data type, the function returns an error.</p> <p>Only works for numbers.</p> <h2 id=agg_functions-summap>sumMap(key, value)<a class=headerlink href=#agg_functions-summap title="Permanent link">&para;</a></h2> <p>Totals the 'value' array according to the keys specified in the 'key' array.<br> The number of elements in 'key' and 'value' must be the same for each row that is totaled.<br> Returns a tuple of two arrays: keys in sorted order, and values ​​summed for the corresponding keys.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>sum_map</span><span class=p>(</span>
    <span class=nb>date</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=n>timeslot</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>statusMap</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>status</span> <span class=n>UInt16</span><span class=p>,</span>
        <span class=n>requests</span> <span class=n>UInt64</span>
    <span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>sum_map</span> <span class=k>VALUES</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:00:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:00:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:01:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]),</span>
    <span class=p>(</span><span class=s1>&#39;2000-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;2000-01-01 00:01:00&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]);</span>
<span class=k>SELECT</span>
    <span class=n>timeslot</span><span class=p>,</span>
    <span class=n>sumMap</span><span class=p>(</span><span class=n>statusMap</span><span class=p>.</span><span class=n>status</span><span class=p>,</span> <span class=n>statusMap</span><span class=p>.</span><span class=n>requests</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>sum_map</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>timeslot</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌────────────timeslot─┬─sumMap(statusMap.status, statusMap.requests)─┐</span>
<span class=err>│ 2000-01-01 00:00:00 │ ([1,2,3,4,5],[10,10,20,10,10])               │</span>
<span class=err>│ 2000-01-01 00:01:00 │ ([4,5,6,7,8],[10,10,20,10,10])               │</span>
<span class=err>└─────────────────────┴──────────────────────────────────────────────┘</span>
</code></pre></div> <h2 id=agg_function-timeseriesgroupsum>timeSeriesGroupSum(uid, timestamp, value)<a class=headerlink href=#agg_function-timeseriesgroupsum title="Permanent link">&para;</a></h2> <p>timeSeriesGroupSum can aggregate different time series that sample timestamp not alignment.<br> It will use linear interpolation between two sample timestamp and then sum time-series together.</p> <p><code>uid</code> is the time series unique id, UInt64.<br> <code>timestamp</code> is Int64 type in order to support millisecond or microsecond.<br> <code>value</code> is the metric.</p> <p>Before use this function, timestamp should be in ascend order</p> <p>Example:</p> <div class=codehilite><pre><span></span><code><span class=err>┌─uid─┬─timestamp─┬─value─┐</span>
<span class=err>│ 1   │     2     │   0.2 │</span>
<span class=err>│ 1   │     7     │   0.7 │</span>
<span class=err>│ 1   │    12     │   1.2 │</span>
<span class=err>│ 1   │    17     │   1.7 │</span>
<span class=err>│ 1   │    25     │   2.5 │</span>
<span class=err>│ 2   │     3     │   0.6 │</span>
<span class=err>│ 2   │     8     │   1.6 │</span>
<span class=err>│ 2   │    12     │   2.4 │</span>
<span class=err>│ 2   │    18     │   3.6 │</span>
<span class=err>│ 2   │    24     │   4.8 │</span>
<span class=err>└─────┴───────────┴───────┘</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>time_series</span><span class=p>(</span>
    <span class=n>uid</span>       <span class=n>UInt64</span><span class=p>,</span>
    <span class=k>timestamp</span> <span class=n>Int64</span><span class=p>,</span>
    <span class=n>value</span>     <span class=n>Float64</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>time_series</span> <span class=k>VALUES</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>2</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>7</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>2</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>17</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>7</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>25</span><span class=p>,</span><span class=mi>2</span><span class=p>.</span><span class=mi>5</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>2</span><span class=p>.</span><span class=mi>4</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>3</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>24</span><span class=p>,</span><span class=mi>4</span><span class=p>.</span><span class=mi>8</span><span class=p>);</span>

<span class=k>SELECT</span> <span class=n>timeSeriesGroupSum</span><span class=p>(</span><span class=n>uid</span><span class=p>,</span> <span class=k>timestamp</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
<span class=k>FROM</span> <span class=p>(</span>
    <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>time_series</span> <span class=k>order</span> <span class=k>by</span> <span class=k>timestamp</span> <span class=k>ASC</span>
<span class=p>);</span>
</code></pre></div> <p>And the result will be:</p> <div class=codehilite><pre><span></span><code><span class=err>[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]</span>
</code></pre></div> <h2 id=agg_function-timeseriesgroupratesum>timeSeriesGroupRateSum(uid, ts, val)<a class=headerlink href=#agg_function-timeseriesgroupratesum title="Permanent link">&para;</a></h2> <p>Similarly timeSeriesGroupRateSum, timeSeriesGroupRateSum will Calculate the rate of time-series and then sum rates together.<br> Also, timestamp should be in ascend order before use this function.</p> <p>Use this function, the result above case will be:</p> <div class=codehilite><pre><span></span><code><span class=err>[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]</span>
</code></pre></div> <h2 id=agg_function-avg>avg(x)<a class=headerlink href=#agg_function-avg title="Permanent link">&para;</a></h2> <p>Calculates the average.<br> Only works for numbers.<br> The result is always Float64.</p> <h2 id=agg_function-uniq>uniq(x)<a class=headerlink href=#agg_function-uniq title="Permanent link">&para;</a></h2> <p>Calculates the approximate number of different values of the argument. Works for numbers, strings, dates, date-with-time, and for multiple arguments and tuple arguments.</p> <p>Uses an adaptive sampling algorithm: for the calculation state, it uses a sample of element hash values with a size up to 65536.<br> This algorithm is also very accurate for data sets with low cardinality (up to 65536) and very efficient on CPU (when computing not too many of these functions, using <code>uniq</code> is almost as fast as using other aggregate functions).</p> <p>The result is determinate (it doesn't depend on the order of query processing).</p> <p>This function provides excellent accuracy even for data sets with extremely high cardinality (over 10 billion elements). It is recommended for default use.</p> <h2 id=uniqcombined-hll-precision-x>uniqCombined(HLL_precision)(x)<a class=headerlink href=#uniqcombined-hll-precision-x title="Permanent link">&para;</a></h2> <p>Calculates the approximate number of different values of the argument. Works for numbers, strings, dates, date-with-time, and for multiple arguments and tuple arguments.</p> <p>A combination of three algorithms is used: array, hash table and <a href=https://en.wikipedia.org/wiki/HyperLogLog rel="external nofollow noreferrer">HyperLogLog</a> with an error correction table. For small number of distinct elements, the array is used. When the set size becomes larger the hash table is used, while it is smaller than HyperLogLog data structure. For larger number of elements, the HyperLogLog is used, and it will occupy fixed amount of memory.</p> <p>The parameter "HLL_precision" is the base-2 logarithm of the number of cells in HyperLogLog. You can omit the parameter (omit first parens). The default value is 17, that is effectively 96 KiB of space (2^17 cells of 6 bits each). The memory consumption is several times smaller than for the <code>uniq</code> function, and the accuracy is several times higher. Performance is slightly lower than for the <code>uniq</code> function, but sometimes it can be even higher than it, such as with distributed queries that transmit a large number of aggregation states over the network.</p> <p>The result is deterministic (it doesn't depend on the order of query processing).</p> <p>The <code>uniqCombined</code> function is a good default choice for calculating the number of different values, but keep in mind that the estimation error for large sets (200 million elements and more) will become larger than theoretical value due to poor choice of hash function.</p> <h2 id=uniqhll12-x>uniqHLL12(x)<a class=headerlink href=#uniqhll12-x title="Permanent link">&para;</a></h2> <p>Uses the <a href=https://en.wikipedia.org/wiki/HyperLogLog rel="external nofollow noreferrer">HyperLogLog</a> algorithm to approximate the number of different values of the argument.<br> 212 5-bit cells are used. The size of the state is slightly more than 2.5 KB. The result is not very accurate (up to ~10% error) for small data sets (&lt;10K elements). However, the result is fairly accurate for high-cardinality data sets (10K-100M), with a maximum error of ~1.6%. Starting from 100M, the estimation error increases, and the function will return very inaccurate results for data sets with extremely high cardinality (1B+ elements).</p> <p>The result is determinate (it doesn't depend on the order of query processing).</p> <p>We don't recommend using this function. In most cases, use the <code>uniq</code> or <code>uniqCombined</code> function.</p> <h2 id=uniqexact-x>uniqExact(x)<a class=headerlink href=#uniqexact-x title="Permanent link">&para;</a></h2> <p>Calculates the number of different values of the argument, exactly.<br> There is no reason to fear approximations. It's better to use the <code>uniq</code> function.<br> Use the <code>uniqExact</code> function if you definitely need an exact result.</p> <p>The <code>uniqExact</code> function uses more memory than the <code>uniq</code> function, because the size of the state has unbounded growth as the number of different values increases.</p> <h2 id=grouparray-x-grouparray-max-size-x>groupArray(x), groupArray(max_size)(x)<a class=headerlink href=#grouparray-x-grouparray-max-size-x title="Permanent link">&para;</a></h2> <p>Creates an array of argument values.<br> Values can be added to the array in any (indeterminate) order.</p> <p>The second version (with the <code>max_size</code> parameter) limits the size of the resulting array to <code>max_size</code> elements.<br> For example, <code>groupArray (1) (x)</code> is equivalent to <code>[any (x)]</code>.</p> <p>In some cases, you can still rely on the order of execution. This applies to cases when <code>SELECT</code> comes from a subquery that uses <code>ORDER BY</code>.</p> <h2 id=grouparrayinsertat-x>groupArrayInsertAt(x)<a class=headerlink href=#grouparrayinsertat-x title="Permanent link">&para;</a></h2> <p>Inserts a value into the array in the specified position.</p> <p>Accepts the value and position as input. If several values ​​are inserted into the same position, any of them might end up in the resulting array (the first one will be used in the case of single-threaded execution). If no value is inserted into a position, the position is assigned the default value.</p> <p>Optional parameters:</p> <ul> <li>The default value for substituting in empty positions.</li> <li>The length of the resulting array. This allows you to receive arrays of the same size for all the aggregate keys. When using this parameter, the default value must be specified.</li> </ul> <h2 id=groupuniqarray-x-groupuniqarray-max-size-x>groupUniqArray(x), groupUniqArray(max_size)(x)<a class=headerlink href=#groupuniqarray-x-groupuniqarray-max-size-x title="Permanent link">&para;</a></h2> <p>Creates an array from different argument values. Memory consumption is the same as for the <code>uniqExact</code> function.</p> <p>The second version (with the <code>max_size</code> parameter) limits the size of the resulting array to <code>max_size</code> elements.<br> For example, <code>groupUniqArray (1) (x)</code> is equivalent to <code>[any (x)]</code>.</p> <h2 id=quantile-level-x>quantile(level)(x)<a class=headerlink href=#quantile-level-x title="Permanent link">&para;</a></h2> <p>Approximates the <code>level</code> quantile. <code>level</code> is a constant, a floating-point number from 0 to 1.<br> We recommend using a <code>level</code> value in the range of <code>[0.01, 0.99]</code><br> Don't use a <code>level</code> value equal to 0 or 1 – use the <code>min</code> and <code>max</code> functions for these cases.</p> <p>In this function, as well as in all functions for calculating quantiles, the <code>level</code> parameter can be omitted. In this case, it is assumed to be equal to 0.5 (in other words, the function will calculate the median).</p> <p>Works for numbers, dates, and dates with times.<br> Returns: for numbers – <code>Float64</code>; for dates – a date; for dates with times – a date with time.</p> <p>Uses <a href=https://en.wikipedia.org/wiki/Reservoir_sampling rel="external nofollow noreferrer">reservoir sampling</a> with a reservoir size up to 8192.<br> If necessary, the result is output with linear approximation from the two neighboring values.<br> This algorithm provides very low accuracy. See also: <code>quantileTiming</code>, <code>quantileTDigest</code>, <code>quantileExact</code>.</p> <p>The result depends on the order of running the query, and is nondeterministic.</p> <p>When using multiple <code>quantile</code> (and similar) functions with different levels in a query, the internal states are not combined (that is, the query works less efficiently than it could). In this case, use the <code>quantiles</code> (and similar) functions.</p> <h2 id=quantiledeterministic-level-x-determinator>quantileDeterministic(level)(x, determinator)<a class=headerlink href=#quantiledeterministic-level-x-determinator title="Permanent link">&para;</a></h2> <p>Works the same way as the <code>quantile</code> function, but the result is deterministic and does not depend on the order of query execution.</p> <p>To achieve this, the function takes a second argument – the "determinator". This is a number whose hash is used instead of a random number generator in the reservoir sampling algorithm. For the function to work correctly, the same determinator value should not occur too often. For the determinator, you can use an event ID, user ID, and so on.</p> <p>Don't use this function for calculating timings. There is a more suitable function for this purpose: <code>quantileTiming</code>.</p> <h2 id=quantiletiming-level-x>quantileTiming(level)(x)<a class=headerlink href=#quantiletiming-level-x title="Permanent link">&para;</a></h2> <p>Computes the quantile of 'level' with a fixed precision.<br> Works for numbers. Intended for calculating quantiles of page loading time in milliseconds.</p> <p>If the value is greater than 30,000 (a page loading time of more than 30 seconds), the result is equated to 30,000.</p> <p>If the total value is not more than about 5670, then the calculation is accurate.</p> <p>Otherwise:</p> <ul> <li>if the time is less than 1024 ms, then the calculation is accurate.</li> <li>otherwise the calculation is rounded to a multiple of 16 ms.</li> </ul> <p>When passing negative values to the function, the behavior is undefined.</p> <p>The returned value has the Float32 type. If no values were passed to the function (when using <code>quantileTimingIf</code>), 'nan' is returned. The purpose of this is to differentiate these instances from zeros. See the note on sorting NaNs in "ORDER BY clause".</p> <p>The result is determinate (it doesn't depend on the order of query processing).</p> <p>For its purpose (calculating quantiles of page loading times), using this function is more effective and the result is more accurate than for the <code>quantile</code> function.</p> <h2 id=quantiletimingweighted-level-x-weight>quantileTimingWeighted(level)(x, weight)<a class=headerlink href=#quantiletimingweighted-level-x-weight title="Permanent link">&para;</a></h2> <p>Differs from the <code>quantileTiming</code> function in that it has a second argument, "weights". Weight is a non-negative integer.<br> The result is calculated as if the <code>x</code> value were passed <code>weight</code> number of times to the <code>quantileTiming</code> function.</p> <h2 id=quantileexact-level-x>quantileExact(level)(x)<a class=headerlink href=#quantileexact-level-x title="Permanent link">&para;</a></h2> <p>Computes the quantile of 'level' exactly. To do this, all the passed values ​​are combined into an array, which is then partially sorted. Therefore, the function consumes O(n) memory, where 'n' is the number of values that were passed. However, for a small number of values, the function is very effective.</p> <h2 id=quantileexactweighted-level-x-weight>quantileExactWeighted(level)(x, weight)<a class=headerlink href=#quantileexactweighted-level-x-weight title="Permanent link">&para;</a></h2> <p>Computes the quantile of 'level' exactly. In addition, each value is counted with its weight, as if it is present 'weight' times. The arguments of the function can be considered as histograms, where the value 'x' corresponds to a histogram "column" of the height 'weight', and the function itself can be considered as a summation of histograms.</p> <p>A hash table is used as the algorithm. Because of this, if the passed values ​​are frequently repeated, the function consumes less RAM than <code>quantileExact</code>. You can use this function instead of <code>quantileExact</code> and specify the weight as 1.</p> <h2 id=quantiletdigest-level-x>quantileTDigest(level)(x)<a class=headerlink href=#quantiletdigest-level-x title="Permanent link">&para;</a></h2> <p>Approximates the quantile level using the <a href=https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf rel="external nofollow noreferrer">t-digest</a> algorithm. The maximum error is 1%. Memory consumption by State is proportional to the logarithm of the number of passed values.</p> <p>The performance of the function is lower than for <code>quantile</code> or <code>quantileTiming</code>. In terms of the ratio of State size to precision, this function is much better than <code>quantile</code>.</p> <p>The result depends on the order of running the query, and is nondeterministic.</p> <h2 id=median-x>median(x)<a class=headerlink href=#median-x title="Permanent link">&para;</a></h2> <p>All the quantile functions have corresponding median functions: <code>median</code>, <code>medianDeterministic</code>, <code>medianTiming</code>, <code>medianTimingWeighted</code>, <code>medianExact</code>, <code>medianExactWeighted</code>, <code>medianTDigest</code>. They are synonyms and their behavior is identical.</p> <h2 id=quantiles-level1-level2-x>quantiles(level1, level2, ...)(x)<a class=headerlink href=#quantiles-level1-level2-x title="Permanent link">&para;</a></h2> <p>All the quantile functions also have corresponding quantiles functions: <code>quantiles</code>, <code>quantilesDeterministic</code>, <code>quantilesTiming</code>, <code>quantilesTimingWeighted</code>, <code>quantilesExact</code>, <code>quantilesExactWeighted</code>, <code>quantilesTDigest</code>. These functions calculate all the quantiles of the listed levels in one pass, and return an array of the resulting values.</p> <h2 id=varsamp-x>varSamp(x)<a class=headerlink href=#varsamp-x title="Permanent link">&para;</a></h2> <p>Calculates the amount <code>Σ((x - x̅)^2) / (n - 1)</code>, where <code>n</code> is the sample size and <code>x̅</code>is the average value of <code>x</code>.</p> <p>It represents an unbiased estimate of the variance of a random variable, if the values passed to the function are a sample of this random amount.</p> <p>Returns <code>Float64</code>. When <code>n &lt;= 1</code>, returns <code>+∞</code>.</p> <h2 id=varpop-x>varPop(x)<a class=headerlink href=#varpop-x title="Permanent link">&para;</a></h2> <p>Calculates the amount <code>Σ((x - x̅)^2) / n</code>, where <code>n</code> is the sample size and <code>x̅</code>is the average value of <code>x</code>.</p> <p>In other words, dispersion for a set of values. Returns <code>Float64</code>.</p> <h2 id=stddevsamp-x>stddevSamp(x)<a class=headerlink href=#stddevsamp-x title="Permanent link">&para;</a></h2> <p>The result is equal to the square root of <code>varSamp(x)</code>.</p> <h2 id=stddevpop-x>stddevPop(x)<a class=headerlink href=#stddevpop-x title="Permanent link">&para;</a></h2> <p>The result is equal to the square root of <code>varPop(x)</code>.</p> <h2 id=topk-n-column>topK(N)(column)<a class=headerlink href=#topk-n-column title="Permanent link">&para;</a></h2> <p>Returns an array of the most frequent values in the specified column. The resulting array is sorted in descending order of frequency of values (not by the values themselves).</p> <p>Implements the <a href=http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf rel="external nofollow noreferrer"> Filtered Space-Saving</a> algorithm for analyzing TopK, based on the reduce-and-combine algorithm from <a href=https://arxiv.org/pdf/1401.0702.pdf rel="external nofollow noreferrer">Parallel Space Saving</a>.</p> <div class=codehilite><pre><span></span><code><span class=err>topK(N)(column)</span>
</code></pre></div> <p>This function doesn't provide a guaranteed result. In certain situations, errors might occur and it might return frequent values that aren't the most frequent values.</p> <p>We recommend using the <code>N &lt; 10</code> value; performance is reduced with large <code>N</code> values. Maximum value of <code>N = 65536</code>.</p> <p><strong>Arguments</strong></p> <ul> <li>'N' is the number of values.</li> <li>' x ' – The column.</li> </ul> <p><strong>Example</strong></p> <p>Take the <a href=../../../getting_started/example_datasets/ontime/ >OnTime</a> data set and select the three most frequently occurring values in the <code>AirlineID</code> column.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>topK</span><span class=p>(</span><span class=mi>3</span><span class=p>)(</span><span class=n>AirlineID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌─res─────────────────┐</span>
<span class=err>│ [19393,19790,19805] │</span>
<span class=err>└─────────────────────┘</span>
</code></pre></div> <h2 id=covarsamp-x-y>covarSamp(x, y)<a class=headerlink href=#covarsamp-x-y title="Permanent link">&para;</a></h2> <p>Calculates the value of <code>Σ((x - x̅)(y - y̅)) / (n - 1)</code>.</p> <p>Returns Float64. When <code>n &lt;= 1</code>, returns +∞.</p> <h2 id=covarpop-x-y>covarPop(x, y)<a class=headerlink href=#covarpop-x-y title="Permanent link">&para;</a></h2> <p>Calculates the value of <code>Σ((x - x̅)(y - y̅)) / n</code>.</p> <h2 id=corr-x-y>corr(x, y)<a class=headerlink href=#corr-x-y title="Permanent link">&para;</a></h2> <p>Calculates the Pearson correlation coefficient: <code>Σ((x - x̅)(y - y̅)) / sqrt(Σ((x - x̅)^2) * Σ((y - y̅)^2))</code>.</p> <h2 id=simplelinearregression>simpleLinearRegression<a class=headerlink href=#simplelinearregression title="Permanent link">&para;</a></h2> <p>Performs simple (unidimensional) linear regression.</p> <div class=codehilite><pre><span></span><code><span class=err>simpleLinearRegression(x, y)</span>
</code></pre></div> <p>Parameters:</p> <ul> <li><code>x</code> — Column with values of dependent variable.</li> <li><code>y</code> — Column with explanatory variable.</li> </ul> <p>Returned values:</p> <p>Parameters <code>(a, b)</code> of the resulting line <code>x = a*y + b</code>.</p> <p><strong>Examples</strong></p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>&#39;simpleLinearRegression&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [0, 1, 2, 3])─┐
│ (1,0)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>&#39;simpleLinearRegression&#39;</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [3, 4, 5, 6])─┐
│ (1,3)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/d6653f1fdcabbf1f588ee132a5044c31df63261a rel="external nofollow noreferrer" target=_blank class=text-reset>d6653f1fdc</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#agg_function-count title=count() class="nav-link text-wrap d-inline-block w-100"> count() </a> <a href=#agg_function-any title=any(x) class="nav-link text-wrap d-inline-block w-100"> any(x) </a> <a href=#anyheavy-x title=anyHeavy(x) class="nav-link text-wrap d-inline-block w-100"> anyHeavy(x) </a> <a href=#anylast-x title=anyLast(x) class="nav-link text-wrap d-inline-block w-100"> anyLast(x) </a> <a href=#groupbitand title=groupBitAnd class="nav-link text-wrap d-inline-block w-100"> groupBitAnd </a> <a href=#groupbitor title=groupBitOr class="nav-link text-wrap d-inline-block w-100"> groupBitOr </a> <a href=#groupbitxor title=groupBitXor class="nav-link text-wrap d-inline-block w-100"> groupBitXor </a> <a href=#groupbitmap title=groupBitmap class="nav-link text-wrap d-inline-block w-100"> groupBitmap </a> <a href=#agg_function-min title=min(x) class="nav-link text-wrap d-inline-block w-100"> min(x) </a> <a href=#agg_function-max title=max(x) class="nav-link text-wrap d-inline-block w-100"> max(x) </a> <a href=#agg_function-argMin title="argMin(arg, val)" class="nav-link text-wrap d-inline-block w-100"> argMin(arg, val) </a> <a href=#agg_function-argMax title="argMax(arg, val)" class="nav-link text-wrap d-inline-block w-100"> argMax(arg, val) </a> <a href=#agg_function-sum title=sum(x) class="nav-link text-wrap d-inline-block w-100"> sum(x) </a> <a href=#sumwithoverflow-x title=sumWithOverflow(x) class="nav-link text-wrap d-inline-block w-100"> sumWithOverflow(x) </a> <a href=#agg_functions-summap title="sumMap(key, value)" class="nav-link text-wrap d-inline-block w-100"> sumMap(key, value) </a> <a href=#agg_function-timeseriesgroupsum title="timeSeriesGroupSum(uid, timestamp, value)" class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupSum(uid, timestamp, value) </a> <a href=#agg_function-timeseriesgroupratesum title="timeSeriesGroupRateSum(uid, ts, val)" class="nav-link text-wrap d-inline-block w-100"> timeSeriesGroupRateSum(uid, ts, val) </a> <a href=#agg_function-avg title=avg(x) class="nav-link text-wrap d-inline-block w-100"> avg(x) </a> <a href=#agg_function-uniq title=uniq(x) class="nav-link text-wrap d-inline-block w-100"> uniq(x) </a> <a href=#uniqcombined-hll-precision-x title=uniqCombined(HLL_precision)(x) class="nav-link text-wrap d-inline-block w-100"> uniqCombined(HLL_precision)(x) </a> <a href=#uniqhll12-x title=uniqHLL12(x) class="nav-link text-wrap d-inline-block w-100"> uniqHLL12(x) </a> <a href=#uniqexact-x title=uniqExact(x) class="nav-link text-wrap d-inline-block w-100"> uniqExact(x) </a> <a href=#grouparray-x-grouparray-max-size-x title="groupArray(x), groupArray(max_size)(x)" class="nav-link text-wrap d-inline-block w-100"> groupArray(x), groupArray(max_size)(x) </a> <a href=#grouparrayinsertat-x title=groupArrayInsertAt(x) class="nav-link text-wrap d-inline-block w-100"> groupArrayInsertAt(x) </a> <a href=#groupuniqarray-x-groupuniqarray-max-size-x title="groupUniqArray(x), groupUniqArray(max_size)(x)" class="nav-link text-wrap d-inline-block w-100"> groupUniqArray(x), groupUniqArray(max_size)(x) </a> <a href=#quantile-level-x title=quantile(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantile(level)(x) </a> <a href=#quantiledeterministic-level-x-determinator title="quantileDeterministic(level)(x, determinator)" class="nav-link text-wrap d-inline-block w-100"> quantileDeterministic(level)(x, determinator) </a> <a href=#quantiletiming-level-x title=quantileTiming(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantileTiming(level)(x) </a> <a href=#quantiletimingweighted-level-x-weight title="quantileTimingWeighted(level)(x, weight)" class="nav-link text-wrap d-inline-block w-100"> quantileTimingWeighted(level)(x, weight) </a> <a href=#quantileexact-level-x title=quantileExact(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantileExact(level)(x) </a> <a href=#quantileexactweighted-level-x-weight title="quantileExactWeighted(level)(x, weight)" class="nav-link text-wrap d-inline-block w-100"> quantileExactWeighted(level)(x, weight) </a> <a href=#quantiletdigest-level-x title=quantileTDigest(level)(x) class="nav-link text-wrap d-inline-block w-100"> quantileTDigest(level)(x) </a> <a href=#median-x title=median(x) class="nav-link text-wrap d-inline-block w-100"> median(x) </a> <a href=#quantiles-level1-level2-x title="quantiles(level1, level2, ...)(x)" class="nav-link text-wrap d-inline-block w-100"> quantiles(level1, level2, ...)(x) </a> <a href=#varsamp-x title=varSamp(x) class="nav-link text-wrap d-inline-block w-100"> varSamp(x) </a> <a href=#varpop-x title=varPop(x) class="nav-link text-wrap d-inline-block w-100"> varPop(x) </a> <a href=#stddevsamp-x title=stddevSamp(x) class="nav-link text-wrap d-inline-block w-100"> stddevSamp(x) </a> <a href=#stddevpop-x title=stddevPop(x) class="nav-link text-wrap d-inline-block w-100"> stddevPop(x) </a> <a href=#topk-n-column title=topK(N)(column) class="nav-link text-wrap d-inline-block w-100"> topK(N)(column) </a> <a href=#covarsamp-x-y title="covarSamp(x, y)" class="nav-link text-wrap d-inline-block w-100"> covarSamp(x, y) </a> <a href=#covarpop-x-y title="covarPop(x, y)" class="nav-link text-wrap d-inline-block w-100"> covarPop(x, y) </a> <a href=#corr-x-y title="corr(x, y)" class="nav-link text-wrap d-inline-block w-100"> corr(x, y) </a> <a href=#simplelinearregression title=simpleLinearRegression class="nav-link text-wrap d-inline-block w-100"> simpleLinearRegression </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
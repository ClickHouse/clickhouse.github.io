<!DOCTYPE html><html lang=zh data-version=v19.8 data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Working with Dates and Times - ClickHouse文档 v19.8</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Working with Dates and Times - ClickHouse文档 v19.8"><meta property=og:description content="Functions for working with dates and times Support for time zones All functions for working with the date and time that "><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Working with Dates and Times - ClickHouse文档 v19.8"><meta name=description content="Functions for working with dates and times Support for time zones All functions for working with the date and time that "><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Working with Dates and Times </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/query_language/functions/date_time_functions.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/zh.svg alt=中文 title=中文 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v19.8/en/query_language/functions/date_time_functions/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v19.8/zh/query_language/functions/date_time_functions/ class="dropdown-item disabled"> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v19.8/es/query_language/functions/date_time_functions/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v19.8/fr/query_language/functions/date_time_functions/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v19.8/ru/query_language/functions/date_time_functions/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v19.8/ja/query_language/functions/date_time_functions/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v19.8/fa/query_language/functions/date_time_functions/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=多页或单页> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt=多页版本 title=多页版本> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt=单页版本 title=单页版本> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> 版本: <span class=text-light>v19.8</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/zh/ class=dropdown-item> <span class=text-light>最新消息</span> </a> <a href=/docs/v20.3/zh/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/zh/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/zh/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/zh/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/zh/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/zh/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/zh/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/zh/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/zh/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/zh/ class=dropdown-item>v19.9</a> <a href=/docs/v19.8/zh/ class="dropdown-item disable">v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=介绍 class="nav-link text-light text-wrap dropdown-toggle px-0">介绍</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../ title=概貌 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概貌</a> <a href=../../../introduction/distinctive_features/ title=ClickHouse的独特功能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse的独特功能</a> <a href=../../../introduction/features_considered_disadvantages/ title=ClickHouse功能可被视为缺点 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse功能可被视为缺点</a> <a href=../../../introduction/performance/ title=性能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">性能</a> <a href=../../../introduction/ya_metrika_task/ title=Yandex.Metrica使用案例 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica使用案例</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=入门指南 class="nav-link text-light text-wrap dropdown-toggle px-0">入门指南</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/ title=部署运行 class="nav-link text-light text-wrap d-inline-block w-100 px-0">部署运行</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title=示例数据集 class="nav-link text-light text-wrap dropdown-toggle px-0">示例数据集</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting_started/example_datasets/ontime/ title=航班飞行数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">航班飞行数据</a> <a href=../../../getting_started/example_datasets/nyc_taxi/ title=纽约市出租车数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">纽约市出租车数据</a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title=AMPLab大数据基准测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab大数据基准测试</a> <a href=../../../getting_started/example_datasets/wikistat/ title=维基访问数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">维基访问数据</a> <a href=../../../getting_started/example_datasets/criteo/ title="Criteo TB级别点击日志" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Criteo TB级别点击日志</a> <a href=../../../getting_started/example_datasets/star_schema/ title="Star Schema基准测试" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema基准测试</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=客户端 class="nav-link text-light text-wrap dropdown-toggle px-0">客户端</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../../interfaces/cli/ title=命令行客户端接口 class="nav-link text-light text-wrap d-inline-block w-100 px-0">命令行客户端接口</a> <a href=../../../interfaces/tcp/ title="原生客户端接口 (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">原生客户端接口 (TCP)</a> <a href=../../../interfaces/http/ title="HTTP 客户端接口" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP 客户端接口</a> <a href=../../../interfaces/formats/ title=输入输出格式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">输入输出格式</a> <a href=../../../interfaces/jdbc/ title="JDBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC 驱动</a> <a href=../../../interfaces/odbc/ title="ODBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC 驱动</a> <a href=#sidebar-sidebar-3-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-8 title=第三方 class="nav-link text-light text-wrap dropdown-toggle px-0">第三方</a> <div id=sidebar-sidebar-3-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/client_libraries/ title=客户端库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端库</a> <a href=../../../interfaces/third-party/integrations/ title=集成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">集成</a> <a href=../../../interfaces/third-party/gui/ title=可视界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">可视界面</a> <a href=../../../interfaces/third-party/proxy/ title=代理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">代理</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=数据类型 class="nav-link text-light text-wrap dropdown-toggle px-0">数据类型</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../data_types/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../../data_types/boolean/ title="Boolean values" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean values</a> <a href=../../../data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../../data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../../data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../../data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../../data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=../../../data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-4-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-16 title="Nested data structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested data structures</a> <div id=sidebar-sidebar-4-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=#sidebar-sidebar-4-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-17 title="Special data types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special data types</a> <div id=sidebar-sidebar-4-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../../data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> </nav> </div> <a href=#sidebar-sidebar-4-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-18 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-4-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../operations/table_engines/replication/ title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a> <a href=../../../operations/table_engines/custom_partitioning_key/ title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a> <a href=../../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../operations/table_engines/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/log_family/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/table_engines/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../operations/table_engines/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../../operations/table_engines/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../operations/table_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/table_engines/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../../operations/table_engines/external_data/ title="External data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External data</a> <a href=../../../operations/table_engines/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../../operations/table_engines/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../../operations/table_engines/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../../operations/table_engines/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../operations/table_engines/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../operations/table_engines/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../../operations/table_engines/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../operations/table_engines/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../../operations/table_engines/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../operations/table_engines/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../../operations/table_engines/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../../operations/table_engines/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../operations/table_engines/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=SQL语法 class="nav-link text-light text-wrap dropdown-toggle px-0">SQL语法</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../query_language/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../query_language/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../query_language/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../query_language/misc/ title="Other kinds of queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other kinds of queries</a> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../query_language/functions/arithmetic_functions/ title=Arithmetic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Arithmetic</a> <a href=../../../query_language/functions/comparison_functions/ title=Comparison class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparison</a> <a href=../../../query_language/functions/logical_functions/ title=Logical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Logical</a> <a href=../../../query_language/functions/type_conversion_functions/ title="Type Conversion" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Type Conversion</a> <a href=../../../query_language/functions/date_time_functions/ title="Working with Dates and Times" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Working with Dates and Times</a> <a href=../../../query_language/functions/string_functions/ title="Working with strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with strings</a> <a href=../../../query_language/functions/string_search_functions/ title="For Searching Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Searching Strings</a> <a href=../../../query_language/functions/string_replace_functions/ title="For Replacing in Strings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">For Replacing in Strings</a> <a href=../../../query_language/functions/conditional_functions/ title="Conditional " class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conditional </a> <a href=../../../query_language/functions/math_functions/ title=Mathematical class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mathematical</a> <a href=../../../query_language/functions/rounding_functions/ title=Rounding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rounding</a> <a href=../../../query_language/functions/array_functions/ title="Working with Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Arrays</a> <a href=../../../query_language/functions/splitting_merging_functions/ title="Splitting and Merging Strings and Arrays" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Splitting and Merging Strings and Arrays</a> <a href=../../../query_language/functions/bit_functions/ title=Bit class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bit</a> <a href=../../../query_language/functions/bitmap_functions/ title=Bitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bitmap</a> <a href=../../../query_language/functions/hash_functions/ title=Hash class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a> <a href=../../../query_language/functions/random_functions/ title="Generating Pseudo-Random Numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generating Pseudo-Random Numbers</a> <a href=../../../query_language/functions/encoding_functions/ title=Encoding class="nav-link text-light text-wrap d-inline-block w-100 px-0">Encoding</a> <a href=../../../query_language/functions/uuid_functions/ title="Working with UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with UUID</a> <a href=../../../query_language/functions/url_functions/ title="Working with URLs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with URLs</a> <a href=../../../query_language/functions/ip_address_functions/ title="Working with IP Addresses" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with IP Addresses</a> <a href=../../../query_language/functions/json_functions/ title="Working with JSON." class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with JSON.</a> <a href=../../../query_language/functions/higher_order_functions/ title=Higher-Order class="nav-link text-light text-wrap d-inline-block w-100 px-0">Higher-Order</a> <a href=../../../query_language/functions/ext_dict_functions/ title="Working with External Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with External Dictionaries</a> <a href=../../../query_language/functions/ym_dict_functions/ title="Working with Yandex.Metrica Dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Yandex.Metrica Dictionaries</a> <a href=../../../query_language/functions/in_functions/ title="Implementing the IN Operator" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implementing the IN Operator</a> <a href=../../../query_language/functions/array_join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../query_language/functions/geo/ title="Working with geographical coordinates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with geographical coordinates</a> <a href=../../../query_language/functions/functions_for_nulls/ title="Working with Nullable arguments" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Working with Nullable arguments</a> <a href=../../../query_language/functions/other_functions/ title=Other class="nav-link text-light text-wrap d-inline-block w-100 px-0">Other</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Aggregate functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate functions</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/agg_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../query_language/agg_functions/reference/ title="Function reference" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Function reference</a> <a href=../../../query_language/agg_functions/combinators/ title="Aggregate function combinators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aggregate function combinators</a> <a href=../../../query_language/agg_functions/parametric_functions/ title="Parametric aggregate functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parametric aggregate functions</a> </nav> </div> <a href=#sidebar-sidebar-6-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9 title="Table functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table functions</a> <div id=sidebar-sidebar-6-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/table_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../query_language/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../query_language/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../../query_language/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../../query_language/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../../query_language/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../query_language/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../query_language/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../query_language/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> </nav> </div> <a href=#sidebar-sidebar-6-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-10 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/dicts/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-6-10-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-10-2 title="External dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External dictionaries</a> <div id=sidebar-sidebar-6-10-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../query_language/dicts/external_dicts/ title="General description" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General description</a> <a href=../../../query_language/dicts/external_dicts_dict/ title="Configuring an external dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuring an external dictionary</a> <a href=../../../query_language/dicts/external_dicts_dict_layout/ title="Storing dictionaries in memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Storing dictionaries in memory</a> <a href=../../../query_language/dicts/external_dicts_dict_lifetime/ title="Dictionary updates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary updates</a> <a href=../../../query_language/dicts/external_dicts_dict_sources/ title="Sources of external dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources of external dictionaries</a> <a href=../../../query_language/dicts/external_dicts_dict_structure/ title="Dictionary key and fields" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary key and fields</a> </nav> </div> <a href=../../../query_language/dicts/internal_dicts/ title="Internal dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Internal dictionaries</a> </nav> </div> <a href=../../../query_language/operators/ title=Operators class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operators</a> <a href=../../../query_language/syntax/ title="General syntax" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General syntax</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=运维 class="nav-link text-light text-wrap dropdown-toggle px-0">运维</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/requirements/ title=Requirements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requirements</a> <a href=../../../operations/monitoring/ title=Monitoring class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoring</a> <a href=../../../operations/troubleshooting/ title=Troubleshooting class="nav-link text-light text-wrap d-inline-block w-100 px-0">Troubleshooting</a> <a href=../../../operations/tips/ title="Usage recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage recommendations</a> <a href=../../../operations/update/ title="ClickHouse Update" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Update</a> <a href=../../../operations/access_rights/ title="Access rights" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Access rights</a> <a href=../../../operations/backup/ title="Data backup" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data backup</a> <a href=../../../operations/configuration_files/ title="Configuration files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration files</a> <a href=../../../operations/quotas/ title=Quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quotas</a> <a href=../../../operations/system_tables/ title="System tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">System tables</a> <a href=#sidebar-sidebar-7-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-12 title="Server configuration parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server configuration parameters</a> <div id=sidebar-sidebar-7-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server_settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/server_settings/settings/ title="Server settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server settings</a> </nav> </div> <a href=#sidebar-sidebar-7-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-13 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-7-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/settings/permissions_for_queries/ title="Permissions for queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permissions for queries</a> <a href=../../../operations/settings/query_complexity/ title="Restrictions on query complexity" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions on query complexity</a> <a href=../../../operations/settings/settings/ title=Settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a> <a href=../../../operations/settings/settings_profiles/ title="Settings profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings profiles</a> </nav> </div> <a href=#sidebar-sidebar-7-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-14 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-7-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utils/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../operations/utils/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../../operations/utils/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=常见问题 class="nav-link text-light text-wrap dropdown-toggle px-0">常见问题</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/general/ title=一般的问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的问题</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=开发者指南 class="nav-link text-light text-wrap dropdown-toggle px-0">开发者指南</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/architecture/ title=ClickHouse架构概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse架构概述</a> <a href=../../../development/build/ title=如何在Linux中编译ClickHouse class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux中编译ClickHouse</a> <a href=../../../development/build_osx/ title="如何在Mac OS X中编译ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Mac OS X中编译ClickHouse</a> <a href=../../../development/style/ title=如何编写C++代码 class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何编写C++代码</a> <a href=../../../development/tests/ title=如何运行ClickHouse测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何运行ClickHouse测试</a> <a href=../../../development/contrib/ title=使用的第三方库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用的第三方库</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=新功能特性 class="nav-link text-light text-wrap dropdown-toggle px-0">新功能特性</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../roadmap/ title=路线图 class="nav-link text-light text-wrap d-inline-block w-100 px-0">路线图</a> <a href=../../../changelog/ title=更新日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">更新日志</a> <a href=../../../security_changelog/ title=安全更改日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">安全更改日志</a> </nav> </div> <a href=../../../single/clickhouse_zh.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF版本 title=PDF版本 height=24 class="d-block mr-1 float-left"><div>PDF版本</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=functions-for-working-with-dates-and-times>Functions for working with dates and times<a class=headerlink href=#functions-for-working-with-dates-and-times title="Permanent link">&para;</a></h1> <p>Support for time zones</p> <p>All functions for working with the date and time that have a logical use for the time zone can accept a second optional time zone argument. Example: Asia/Yekaterinburg. In this case, they use the specified time zone instead of the local (default) one.</p> <div class=codehilite><pre><span></span><code><span class=k>SELECT</span>
    <span class=n>toDateTime</span><span class=p>(</span><span class=s1>&#39;2016-06-15 23:00:00&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=n>time</span><span class=p>,</span>
    <span class=n>toDate</span><span class=p>(</span><span class=n>time</span><span class=p>)</span> <span class=k>AS</span> <span class=n>date_local</span><span class=p>,</span>
    <span class=n>toDate</span><span class=p>(</span><span class=n>time</span><span class=p>,</span> <span class=s1>&#39;Asia/Yekaterinburg&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=n>date_yekat</span><span class=p>,</span>
    <span class=n>toString</span><span class=p>(</span><span class=n>time</span><span class=p>,</span> <span class=s1>&#39;US/Samoa&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=n>time_samoa</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌────────────────time─┬─date_local─┬─date_yekat─┬─time_samoa──────────┐</span>
<span class=err>│ 2016-06-15 23:00:00 │ 2016-06-15 │ 2016-06-16 │ 2016-06-15 09:00:00 │</span>
<span class=err>└─────────────────────┴────────────┴────────────┴─────────────────────┘</span>
</code></pre></div> <p>Only time zones that differ from UTC by a whole number of hours are supported.</p> <h2 id=totimezone>toTimeZone<a class=headerlink href=#totimezone title="Permanent link">&para;</a></h2> <p>Convert time or date and time to the specified time zone.</p> <h2 id=toyear>toYear<a class=headerlink href=#toyear title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt16 number containing the year number (AD).</p> <h2 id=toquarter>toQuarter<a class=headerlink href=#toquarter title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt8 number containing the quarter number.</p> <h2 id=tomonth>toMonth<a class=headerlink href=#tomonth title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt8 number containing the month number (1-12).</p> <h2 id=todayofyear>toDayOfYear<a class=headerlink href=#todayofyear title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt8 number containing the number of the day of the year (1-366).</p> <h2 id=todayofmonth>toDayOfMonth<a class=headerlink href=#todayofmonth title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt8 number containing the number of the day of the month (1-31).</p> <h2 id=todayofweek>toDayOfWeek<a class=headerlink href=#todayofweek title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt8 number containing the number of the day of the week (Monday is 1, and Sunday is 7).</p> <h2 id=tohour>toHour<a class=headerlink href=#tohour title="Permanent link">&para;</a></h2> <p>Converts a date with time to a UInt8 number containing the number of the hour in 24-hour time (0-23).<br> This function assumes that if clocks are moved ahead, it is by one hour and occurs at 2 a.m., and if clocks are moved back, it is by one hour and occurs at 3 a.m. (which is not always true – even in Moscow the clocks were twice changed at a different time).</p> <h2 id=tominute>toMinute<a class=headerlink href=#tominute title="Permanent link">&para;</a></h2> <p>Converts a date with time to a UInt8 number containing the number of the minute of the hour (0-59).</p> <h2 id=tosecond>toSecond<a class=headerlink href=#tosecond title="Permanent link">&para;</a></h2> <p>Converts a date with time to a UInt8 number containing the number of the second in the minute (0-59).<br> Leap seconds are not accounted for.</p> <h2 id=tounixtimestamp>toUnixTimestamp<a class=headerlink href=#tounixtimestamp title="Permanent link">&para;</a></h2> <p>Converts a date with time to a unix timestamp.</p> <h2 id=tostartofyear>toStartOfYear<a class=headerlink href=#tostartofyear title="Permanent link">&para;</a></h2> <p>Rounds down a date or date with time to the first day of the year.<br> Returns the date.</p> <h2 id=tostartofisoyear>toStartOfISOYear<a class=headerlink href=#tostartofisoyear title="Permanent link">&para;</a></h2> <p>Rounds down a date or date with time to the first day of ISO year.<br> Returns the date.</p> <h2 id=tostartofquarter>toStartOfQuarter<a class=headerlink href=#tostartofquarter title="Permanent link">&para;</a></h2> <p>Rounds down a date or date with time to the first day of the quarter.<br> The first day of the quarter is either 1 January, 1 April, 1 July, or 1 October.<br> Returns the date.</p> <h2 id=tostartofmonth>toStartOfMonth<a class=headerlink href=#tostartofmonth title="Permanent link">&para;</a></h2> <p>Rounds down a date or date with time to the first day of the month.<br> Returns the date.</p> <div class="admonition attention"> <p class=admonition-title>Attention</p> <p>The behavior of parsing incorrect dates is implementation specific. ClickHouse may return zero date, throw an exception or do "natural" overflow.</p> </div> <h2 id=tomonday>toMonday<a class=headerlink href=#tomonday title="Permanent link">&para;</a></h2> <p>Rounds down a date or date with time to the nearest Monday.<br> Returns the date.</p> <h2 id=tostartofday>toStartOfDay<a class=headerlink href=#tostartofday title="Permanent link">&para;</a></h2> <p>Rounds down a date with time to the start of the day.</p> <h2 id=tostartofhour>toStartOfHour<a class=headerlink href=#tostartofhour title="Permanent link">&para;</a></h2> <p>Rounds down a date with time to the start of the hour.</p> <h2 id=tostartofminute>toStartOfMinute<a class=headerlink href=#tostartofminute title="Permanent link">&para;</a></h2> <p>Rounds down a date with time to the start of the minute.</p> <h2 id=tostartoffiveminute>toStartOfFiveMinute<a class=headerlink href=#tostartoffiveminute title="Permanent link">&para;</a></h2> <p>Rounds down a date with time to the start of the five-minute interval.</p> <h2 id=tostartoftenminutes>toStartOfTenMinutes<a class=headerlink href=#tostartoftenminutes title="Permanent link">&para;</a></h2> <p>Rounds down a date with time to the start of the ten-minute interval.</p> <h2 id=tostartoffifteenminutes>toStartOfFifteenMinutes<a class=headerlink href=#tostartoffifteenminutes title="Permanent link">&para;</a></h2> <p>Rounds down the date with time to the start of the fifteen-minute interval.</p> <h2 id=tostartofinterval-time-or-data-interval-x-unit-time-zone>toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone])<a class=headerlink href=#tostartofinterval-time-or-data-interval-x-unit-time-zone title="Permanent link">&para;</a></h2> <p>This is a generalization of other functions named <code>toStartOf*</code>. For example,<br> <code>toStartOfInterval(t, INTERVAL 1 year)</code> returns the same as <code>toStartOfYear(t)</code>,<br> <code>toStartOfInterval(t, INTERVAL 1 month)</code> returns the same as <code>toStartOfMonth(t)</code>,<br> <code>toStartOfInterval(t, INTERVAL 1 day)</code> returns the same as <code>toStartOfDay(t)</code>,<br> <code>toStartOfInterval(t, INTERVAL 15 minute)</code> returns the same as <code>toStartOfFifteenMinutes(t)</code> etc.</p> <h2 id=totime>toTime<a class=headerlink href=#totime title="Permanent link">&para;</a></h2> <p>Converts a date with time to a certain fixed date, while preserving the time.</p> <h2 id=torelativeyearnum>toRelativeYearNum<a class=headerlink href=#torelativeyearnum title="Permanent link">&para;</a></h2> <p>Converts a date with time or date to the number of the year, starting from a certain fixed point in the past.</p> <h2 id=torelativequarternum>toRelativeQuarterNum<a class=headerlink href=#torelativequarternum title="Permanent link">&para;</a></h2> <p>Converts a date with time or date to the number of the quarter, starting from a certain fixed point in the past.</p> <h2 id=torelativemonthnum>toRelativeMonthNum<a class=headerlink href=#torelativemonthnum title="Permanent link">&para;</a></h2> <p>Converts a date with time or date to the number of the month, starting from a certain fixed point in the past.</p> <h2 id=torelativeweeknum>toRelativeWeekNum<a class=headerlink href=#torelativeweeknum title="Permanent link">&para;</a></h2> <p>Converts a date with time or date to the number of the week, starting from a certain fixed point in the past.</p> <h2 id=torelativedaynum>toRelativeDayNum<a class=headerlink href=#torelativedaynum title="Permanent link">&para;</a></h2> <p>Converts a date with time or date to the number of the day, starting from a certain fixed point in the past.</p> <h2 id=torelativehournum>toRelativeHourNum<a class=headerlink href=#torelativehournum title="Permanent link">&para;</a></h2> <p>Converts a date with time or date to the number of the hour, starting from a certain fixed point in the past.</p> <h2 id=torelativeminutenum>toRelativeMinuteNum<a class=headerlink href=#torelativeminutenum title="Permanent link">&para;</a></h2> <p>Converts a date with time or date to the number of the minute, starting from a certain fixed point in the past.</p> <h2 id=torelativesecondnum>toRelativeSecondNum<a class=headerlink href=#torelativesecondnum title="Permanent link">&para;</a></h2> <p>Converts a date with time or date to the number of the second, starting from a certain fixed point in the past.</p> <h2 id=toisoyear>toISOYear<a class=headerlink href=#toisoyear title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt16 number containing the ISO Year number.</p> <h2 id=toisoweek>toISOWeek<a class=headerlink href=#toisoweek title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt8 number containing the ISO Week number.</p> <h2 id=now>now<a class=headerlink href=#now title="Permanent link">&para;</a></h2> <p>Accepts zero arguments and returns the current time at one of the moments of request execution.<br> This function returns a constant, even if the request took a long time to complete.</p> <h2 id=today>today<a class=headerlink href=#today title="Permanent link">&para;</a></h2> <p>Accepts zero arguments and returns the current date at one of the moments of request execution.<br> The same as 'toDate(now())'.</p> <h2 id=yesterday>yesterday<a class=headerlink href=#yesterday title="Permanent link">&para;</a></h2> <p>Accepts zero arguments and returns yesterday's date at one of the moments of request execution.<br> The same as 'today() - 1'.</p> <h2 id=timeslot>timeSlot<a class=headerlink href=#timeslot title="Permanent link">&para;</a></h2> <p>Rounds the time to the half hour.<br> This function is specific to Yandex.Metrica, since half an hour is the minimum amount of time for breaking a session into two sessions if a tracking tag shows a single user's consecutive pageviews that differ in time by strictly more than this amount. This means that tuples (the tag ID, user ID, and time slot) can be used to search for pageviews that are included in the corresponding session.</p> <h2 id=toyyyymm>toYYYYMM<a class=headerlink href=#toyyyymm title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt32 number containing the year and month number (YYYY * 100 + MM).</p> <h2 id=toyyyymmdd>toYYYYMMDD<a class=headerlink href=#toyyyymmdd title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt32 number containing the year and month number (YYYY * 10000 + MM * 100 + DD).</p> <h2 id=toyyyymmddhhmmss>toYYYYMMDDhhmmss<a class=headerlink href=#toyyyymmddhhmmss title="Permanent link">&para;</a></h2> <p>Converts a date or date with time to a UInt64 number containing the year and month number (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss).</p> <h2 id=addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters>addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters<a class=headerlink href=#addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters title="Permanent link">&para;</a></h2> <p>Function adds a Date/DateTime interval to a Date/DateTime and then return the Date/DateTime. For example:</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span>
    <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2018-01-01&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=nb>date</span><span class=p>,</span>
    <span class=n>toDateTime</span><span class=p>(</span><span class=s1>&#39;2018-01-01 00:00:00&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=n>date_time</span>
<span class=k>SELECT</span>
    <span class=n>addYears</span><span class=p>(</span><span class=nb>date</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>add_years_with_date</span><span class=p>,</span>
    <span class=n>addYears</span><span class=p>(</span><span class=n>date_time</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>add_years_with_date_time</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌─add_years_with_date─┬─add_years_with_date_time─┐</span>
<span class=err>│          2019-01-01 │      2019-01-01 00:00:00 │</span>
<span class=err>└─────────────────────┴──────────────────────────┘</span>
</code></pre></div> <h2 id=subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters>subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters<a class=headerlink href=#subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters title="Permanent link">&para;</a></h2> <p>Function subtract a Date/DateTime interval to a Date/DateTime and then return the Date/DateTime. For example:</p> <div class=codehilite><pre><span></span><code><span class=k>WITH</span>
    <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2019-01-01&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=nb>date</span><span class=p>,</span>
    <span class=n>toDateTime</span><span class=p>(</span><span class=s1>&#39;2019-01-01 00:00:00&#39;</span><span class=p>)</span> <span class=k>AS</span> <span class=n>date_time</span>
<span class=k>SELECT</span>
    <span class=n>subtractYears</span><span class=p>(</span><span class=nb>date</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>subtract_years_with_date</span><span class=p>,</span>
    <span class=n>subtractYears</span><span class=p>(</span><span class=n>date_time</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>subtract_years_with_date_time</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=err>┌─subtract_years_with_date─┬─subtract_years_with_date_time─┐</span>
<span class=err>│               2018-01-01 │           2018-01-01 00:00:00 │</span>
<span class=err>└──────────────────────────┴───────────────────────────────┘</span>
</code></pre></div> <h2 id=datediff-unit-t1-t2-timezone>dateDiff('unit', t1, t2, [timezone])<a class=headerlink href=#datediff-unit-t1-t2-timezone title="Permanent link">&para;</a></h2> <p>Return the difference between two times expressed in 'unit' e.g. <code>'hours'</code>. 't1' and 't2' can be Date or DateTime, If 'timezone' is specified, it applied to both arguments. If not, timezones from datatypes 't1' and 't2' are used. If that timezones are not the same, the result is unspecified.</p> <p>Supported unit values:</p> <table> <thead> <tr> <th>unit</th> </tr> </thead> <tbody> <tr> <td>second</td> </tr> <tr> <td>minute</td> </tr> <tr> <td>hour</td> </tr> <tr> <td>day</td> </tr> <tr> <td>week</td> </tr> <tr> <td>month</td> </tr> <tr> <td>quarter</td> </tr> <tr> <td>year</td> </tr> </tbody> </table> <h2 id=timeslots-starttime-duration-size>timeSlots(StartTime, Duration,[, Size])<a class=headerlink href=#timeslots-starttime-duration-size title="Permanent link">&para;</a></h2> <p>For a time interval starting at 'StartTime' and continuing for 'Duration' seconds, it returns an array of moments in time, consisting of points from this interval rounded down to the 'Size' in seconds. 'Size' is an optional parameter: a constant UInt32, set to 1800 by default.<br> For example, <code>timeSlots(toDateTime('2012-01-01 12:20:00'), 600) = [toDateTime('2012-01-01 12:00:00'), toDateTime('2012-01-01 12:30:00')]</code>.<br> This is necessary for searching for pageviews in the corresponding session.</p> <h2 id=formatdatetime-time-format-timezone>formatDateTime(Time, Format[, Timezone])<a class=headerlink href=#formatdatetime-time-format-timezone title="Permanent link">&para;</a></h2> <p>Function formats a Time according given Format string. N.B.: Format is a constant expression, e.g. you can not have multiple formats for single result column.</p> <p>Supported modifiers for Format:<br> ("Example" column shows formatting result for time <code>2018-01-02 22:33:44</code>)</p> <table> <thead> <tr> <th>Modifier</th> <th>Description</th> <th>Example</th> </tr> </thead> <tbody> <tr> <td>%C</td> <td>year divided by 100 and truncated to integer (00-99)</td> <td>20</td> </tr> <tr> <td>%d</td> <td>day of the month, zero-padded (01-31)</td> <td>02</td> </tr> <tr> <td>%D</td> <td>Short MM/DD/YY date, equivalent to %m/%d/%y</td> <td>01/02/2018</td> </tr> <tr> <td>%e</td> <td>day of the month, space-padded ( 1-31)</td> <td>2</td> </tr> <tr> <td>%F</td> <td>short YYYY-MM-DD date, equivalent to %Y-%m-%d</td> <td>2018-01-02</td> </tr> <tr> <td>%H</td> <td>hour in 24h format (00-23)</td> <td>22</td> </tr> <tr> <td>%I</td> <td>hour in 12h format (01-12)</td> <td>10</td> </tr> <tr> <td>%j</td> <td>day of the year (001-366)</td> <td>002</td> </tr> <tr> <td>%m</td> <td>month as a decimal number (01-12)</td> <td>01</td> </tr> <tr> <td>%M</td> <td>minute (00-59)</td> <td>33</td> </tr> <tr> <td>%n</td> <td>new-line character ('\n')</td> <td></td> </tr> <tr> <td>%p</td> <td>AM or PM designation</td> <td>PM</td> </tr> <tr> <td>%R</td> <td>24-hour HH:MM time, equivalent to %H:%M</td> <td>22:33</td> </tr> <tr> <td>%S</td> <td>second (00-59)</td> <td>44</td> </tr> <tr> <td>%t</td> <td>horizontal-tab character ('\t')</td> <td></td> </tr> <tr> <td>%T</td> <td>ISO 8601 time format (HH:MM:SS), equivalent to %H:%M:%S</td> <td>22:33:44</td> </tr> <tr> <td>%u</td> <td>ISO 8601 weekday as number with Monday as 1 (1-7)</td> <td>2</td> </tr> <tr> <td>%V</td> <td>ISO 8601 week number (01-53)</td> <td>01</td> </tr> <tr> <td>%w</td> <td>weekday as a decimal number with Sunday as 0 (0-6)</td> <td>2</td> </tr> <tr> <td>%y</td> <td>Year, last two digits (00-99)</td> <td>18</td> </tr> <tr> <td>%Y</td> <td>Year</td> <td>2018</td> </tr> <tr> <td>%%</td> <td>a % sign</td> <td>%</td> </tr> </tbody> </table> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>建于 <a href=https://github.com/ClickHouse/ClickHouse/commit/a24471233fce463ffd70bff561f7842d4d0b7bd9 rel="external nofollow noreferrer" target=_blank class=text-reset>a24471233f</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>目录</label> <a href=#totimezone title=toTimeZone class="nav-link text-wrap d-inline-block w-100"> toTimeZone </a> <a href=#toyear title=toYear class="nav-link text-wrap d-inline-block w-100"> toYear </a> <a href=#toquarter title=toQuarter class="nav-link text-wrap d-inline-block w-100"> toQuarter </a> <a href=#tomonth title=toMonth class="nav-link text-wrap d-inline-block w-100"> toMonth </a> <a href=#todayofyear title=toDayOfYear class="nav-link text-wrap d-inline-block w-100"> toDayOfYear </a> <a href=#todayofmonth title=toDayOfMonth class="nav-link text-wrap d-inline-block w-100"> toDayOfMonth </a> <a href=#todayofweek title=toDayOfWeek class="nav-link text-wrap d-inline-block w-100"> toDayOfWeek </a> <a href=#tohour title=toHour class="nav-link text-wrap d-inline-block w-100"> toHour </a> <a href=#tominute title=toMinute class="nav-link text-wrap d-inline-block w-100"> toMinute </a> <a href=#tosecond title=toSecond class="nav-link text-wrap d-inline-block w-100"> toSecond </a> <a href=#tounixtimestamp title=toUnixTimestamp class="nav-link text-wrap d-inline-block w-100"> toUnixTimestamp </a> <a href=#tostartofyear title=toStartOfYear class="nav-link text-wrap d-inline-block w-100"> toStartOfYear </a> <a href=#tostartofisoyear title=toStartOfISOYear class="nav-link text-wrap d-inline-block w-100"> toStartOfISOYear </a> <a href=#tostartofquarter title=toStartOfQuarter class="nav-link text-wrap d-inline-block w-100"> toStartOfQuarter </a> <a href=#tostartofmonth title=toStartOfMonth class="nav-link text-wrap d-inline-block w-100"> toStartOfMonth </a> <a href=#tomonday title=toMonday class="nav-link text-wrap d-inline-block w-100"> toMonday </a> <a href=#tostartofday title=toStartOfDay class="nav-link text-wrap d-inline-block w-100"> toStartOfDay </a> <a href=#tostartofhour title=toStartOfHour class="nav-link text-wrap d-inline-block w-100"> toStartOfHour </a> <a href=#tostartofminute title=toStartOfMinute class="nav-link text-wrap d-inline-block w-100"> toStartOfMinute </a> <a href=#tostartoffiveminute title=toStartOfFiveMinute class="nav-link text-wrap d-inline-block w-100"> toStartOfFiveMinute </a> <a href=#tostartoftenminutes title=toStartOfTenMinutes class="nav-link text-wrap d-inline-block w-100"> toStartOfTenMinutes </a> <a href=#tostartoffifteenminutes title=toStartOfFifteenMinutes class="nav-link text-wrap d-inline-block w-100"> toStartOfFifteenMinutes </a> <a href=#tostartofinterval-time-or-data-interval-x-unit-time-zone title="toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone])" class="nav-link text-wrap d-inline-block w-100"> toStartOfInterval(time_or_data, INTERVAL x unit [, time_zone]) </a> <a href=#totime title=toTime class="nav-link text-wrap d-inline-block w-100"> toTime </a> <a href=#torelativeyearnum title=toRelativeYearNum class="nav-link text-wrap d-inline-block w-100"> toRelativeYearNum </a> <a href=#torelativequarternum title=toRelativeQuarterNum class="nav-link text-wrap d-inline-block w-100"> toRelativeQuarterNum </a> <a href=#torelativemonthnum title=toRelativeMonthNum class="nav-link text-wrap d-inline-block w-100"> toRelativeMonthNum </a> <a href=#torelativeweeknum title=toRelativeWeekNum class="nav-link text-wrap d-inline-block w-100"> toRelativeWeekNum </a> <a href=#torelativedaynum title=toRelativeDayNum class="nav-link text-wrap d-inline-block w-100"> toRelativeDayNum </a> <a href=#torelativehournum title=toRelativeHourNum class="nav-link text-wrap d-inline-block w-100"> toRelativeHourNum </a> <a href=#torelativeminutenum title=toRelativeMinuteNum class="nav-link text-wrap d-inline-block w-100"> toRelativeMinuteNum </a> <a href=#torelativesecondnum title=toRelativeSecondNum class="nav-link text-wrap d-inline-block w-100"> toRelativeSecondNum </a> <a href=#toisoyear title=toISOYear class="nav-link text-wrap d-inline-block w-100"> toISOYear </a> <a href=#toisoweek title=toISOWeek class="nav-link text-wrap d-inline-block w-100"> toISOWeek </a> <a href=#now title=now class="nav-link text-wrap d-inline-block w-100"> now </a> <a href=#today title=today class="nav-link text-wrap d-inline-block w-100"> today </a> <a href=#yesterday title=yesterday class="nav-link text-wrap d-inline-block w-100"> yesterday </a> <a href=#timeslot title=timeSlot class="nav-link text-wrap d-inline-block w-100"> timeSlot </a> <a href=#toyyyymm title=toYYYYMM class="nav-link text-wrap d-inline-block w-100"> toYYYYMM </a> <a href=#toyyyymmdd title=toYYYYMMDD class="nav-link text-wrap d-inline-block w-100"> toYYYYMMDD </a> <a href=#toyyyymmddhhmmss title=toYYYYMMDDhhmmss class="nav-link text-wrap d-inline-block w-100"> toYYYYMMDDhhmmss </a> <a href=#addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters title="addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters" class="nav-link text-wrap d-inline-block w-100"> addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters </a> <a href=#subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters title="subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters" class="nav-link text-wrap d-inline-block w-100"> subtractYears, subtractMonths, subtractWeeks, subtractDays, subtractHours, subtractMinutes, subtractSeconds, subtractQuarters </a> <a href=#datediff-unit-t1-t2-timezone title="dateDiff('unit', t1, t2, [timezone])" class="nav-link text-wrap d-inline-block w-100"> dateDiff('unit', t1, t2, [timezone]) </a> <a href=#timeslots-starttime-duration-size title="timeSlots(StartTime, Duration,[, Size])" class="nav-link text-wrap d-inline-block w-100"> timeSlots(StartTime, Duration,[, Size]) </a> <a href=#formatdatetime-time-format-timezone title="formatDateTime(Time, Format[, Timezone])" class="nav-link text-wrap d-inline-block w-100"> formatDateTime(Time, Format[, Timezone]) </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>
<!DOCTYPE html><html lang=zh data-version=v19.9 data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Other kinds of queries - ClickHouse文档 v19.9</title><link rel="shortcut icon" href=/favicon.ico><meta property=og:title content="Other kinds of queries - ClickHouse文档 v19.9"><meta property=og:description content="Miscellaneous Queries ATTACH This query is exactly the same as CREATE, but Instead of the word CREATE it uses the word A"><meta property=og:type content=website><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta property=twitter:title content="Other kinds of queries - ClickHouse文档 v19.9"><meta name=description content="Miscellaneous Queries ATTACH This query is exactly the same as CREATE, but Instead of the word CREATE it uses the word A"><meta name=keywords content="ClickHouse, DBMS, OLAP, relational, analytics, analytical, big data, open-source, SQL, web-analytics"><link href=/css/base.css?1d858e50 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Other kinds of queries </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li class=nav-item> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/query_language/misc.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/zh.svg alt=中文 title=中文 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/v19.9/en/query_language/misc/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/v19.9/zh/query_language/misc/ class="dropdown-item disabled"> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/v19.9/es/query_language/misc/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/v19.9/fr/query_language/misc/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/v19.9/ru/query_language/misc/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/v19.9/ja/query_language/misc/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> <a href=/docs/v19.9/fa/query_language/misc/ class=dropdown-item> <img src=/images/flags/fa.svg alt title width=32 class="d-inline-block mr-2">فارسی </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label=多页或单页> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt=多页版本 title=多页版本> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt=单页版本 title=单页版本> </a> </div> <div class="dropdown mb-3"> <a class="btn btn-dark dropdown-toggle text-muted" href=# role=button id=select-version data-toggle=dropdown aria-haspopup=true aria-expanded=false> 版本: <span class=text-light>v19.9</span> </a> <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby=select-version> <a href=/docs/zh/ class=dropdown-item> <span class=text-light>最新消息</span> </a> <a href=/docs/v20.3/zh/ class=dropdown-item>v20.3</a> <a href=/docs/v20.1/zh/ class=dropdown-item>v20.1</a> <a href=/docs/v19.17/zh/ class=dropdown-item>v19.17</a> <a href=/docs/v19.16/zh/ class=dropdown-item>v19.16</a> <a href=/docs/v19.15/zh/ class=dropdown-item>v19.15</a> <a href=/docs/v19.14/zh/ class=dropdown-item>v19.14</a> <a href=/docs/v19.13/zh/ class=dropdown-item>v19.13</a> <a href=/docs/v19.11/zh/ class=dropdown-item>v19.11</a> <a href=/docs/v19.10/zh/ class=dropdown-item>v19.10</a> <a href=/docs/v19.9/zh/ class="dropdown-item disable">v19.9</a> <a href=/docs/v19.8/zh/ class=dropdown-item>v19.8</a> </div> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=介绍 class="nav-link text-light text-wrap dropdown-toggle px-0">介绍</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../ title=概貌 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概貌</a> <a href=../../introduction/distinctive_features/ title=ClickHouse的独特功能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse的独特功能</a> <a href=../../introduction/features_considered_disadvantages/ title=ClickHouse功能可被视为缺点 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse功能可被视为缺点</a> <a href=../../introduction/performance/ title=性能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">性能</a> <a href=../../introduction/ya_metrika_task/ title=Yandex.Metrica使用案例 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica使用案例</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=入门指南 class="nav-link text-light text-wrap dropdown-toggle px-0">入门指南</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/ title=部署运行 class="nav-link text-light text-wrap d-inline-block w-100 px-0">部署运行</a> <a href=#sidebar-sidebar-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-2 title=示例数据集 class="nav-link text-light text-wrap dropdown-toggle px-0">示例数据集</a> <div id=sidebar-sidebar-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting_started/example_datasets/ontime/ title=航班飞行数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">航班飞行数据</a> <a href=../../getting_started/example_datasets/nyc_taxi/ title=纽约市出租车数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">纽约市出租车数据</a> <a href=../../getting_started/example_datasets/amplab_benchmark/ title=AMPLab大数据基准测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab大数据基准测试</a> <a href=../../getting_started/example_datasets/wikistat/ title=维基访问数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">维基访问数据</a> <a href=../../getting_started/example_datasets/criteo/ title="Criteo TB级别点击日志" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Criteo TB级别点击日志</a> <a href=../../getting_started/example_datasets/star_schema/ title="Star Schema基准测试" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema基准测试</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=客户端 class="nav-link text-light text-wrap dropdown-toggle px-0">客户端</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../interfaces/cli/ title=命令行客户端接口 class="nav-link text-light text-wrap d-inline-block w-100 px-0">命令行客户端接口</a> <a href=../../interfaces/tcp/ title="原生客户端接口 (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">原生客户端接口 (TCP)</a> <a href=../../interfaces/http/ title="HTTP 客户端接口" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP 客户端接口</a> <a href=../../interfaces/formats/ title=输入输出格式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">输入输出格式</a> <a href=../../interfaces/jdbc/ title="JDBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC 驱动</a> <a href=../../interfaces/odbc/ title="ODBC 驱动" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC 驱动</a> <a href=#sidebar-sidebar-3-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-8 title=第三方 class="nav-link text-light text-wrap dropdown-toggle px-0">第三方</a> <div id=sidebar-sidebar-3-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/client_libraries/ title=客户端库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端库</a> <a href=../../interfaces/third-party/integrations/ title=集成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">集成</a> <a href=../../interfaces/third-party/gui/ title=可视界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">可视界面</a> <a href=../../interfaces/third-party/proxy/ title=代理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">代理</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=数据类型 class="nav-link text-light text-wrap dropdown-toggle px-0">数据类型</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../data_types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../data_types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../data_types/boolean/ title="Boolean values" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Boolean values</a> <a href=../../data_types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../data_types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../data_types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../data_types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../data_types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../data_types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../data_types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments...)</a> <a href=../../data_types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=../../data_types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-4-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-16 title="Nested data structures" class="nav-link text-light text-wrap dropdown-toggle px-0">Nested data structures</a> <div id=sidebar-sidebar-4-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, ...)</a> </nav> </div> <a href=#sidebar-sidebar-4-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-17 title="Special data types" class="nav-link text-light text-wrap dropdown-toggle px-0">Special data types</a> <div id=sidebar-sidebar-4-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/special_data_types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../data_types/special_data_types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../data_types/special_data_types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> </nav> </div> <a href=#sidebar-sidebar-4-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-18 title=Domains class="nav-link text-light text-wrap dropdown-toggle px-0">Domains</a> <div id=sidebar-sidebar-4-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../data_types/domains/overview/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../data_types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../data_types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="Table Engines" class="nav-link text-light text-wrap dropdown-toggle px-0">Table Engines</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../operations/table_engines/replication/ title="Data Replication" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data Replication</a> <a href=../../operations/table_engines/custom_partitioning_key/ title="Custom Partitioning Key" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Custom Partitioning Key</a> <a href=../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../operations/table_engines/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-5-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-3 title="Log Family" class="nav-link text-light text-wrap dropdown-toggle px-0">Log Family</a> <div id=sidebar-sidebar-5-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/log_family/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/table_engines/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../operations/table_engines/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../operations/table_engines/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-5-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-4 title=Integrations class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a> <div id=sidebar-sidebar-5-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../operations/table_engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title=Special class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/table_engines/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../operations/table_engines/external_data/ title="External data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">External data</a> <a href=../../operations/table_engines/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../operations/table_engines/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../operations/table_engines/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../operations/table_engines/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../operations/table_engines/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../operations/table_engines/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../operations/table_engines/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../operations/table_engines/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../operations/table_engines/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../operations/table_engines/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../operations/table_engines/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../operations/table_engines/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../operations/table_engines/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=SQL语法 class="nav-link text-light text-wrap dropdown-toggle px-0">SQL语法</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../query_language/insert_into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../query_language/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../query_language/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../query_language/misc/ title="Other kinds of queries" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Other kinds of queries</a> <a href=#sidebar-sidebar-6-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-7 title=Functions class="nav-link text-light text-wrap dropdown-toggle px-0">Functions</a> <div id=sidebar-sidebar-6-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/functions/ title=介绍 class="nav-link text-light text-wrap d-inline-block w-100 px-0">介绍</a> <a href=../../query_language/functions/arithmetic_functions/ title=算术函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算术函数</a> <a href=../../query_language/functions/comparison_functions/ title=比较函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比较函数</a> <a href=../../query_language/functions/logical_functions/ title=逻辑函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">逻辑函数</a> <a href=../../query_language/functions/type_conversion_functions/ title=类型转换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">类型转换函数</a> <a href=../../query_language/functions/date_time_functions/ title=时间日期函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">时间日期函数</a> <a href=../../query_language/functions/string_functions/ title=字符串函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串函数</a> <a href=../../query_language/functions/string_search_functions/ title=字符串搜索函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串搜索函数</a> <a href=../../query_language/functions/string_replace_functions/ title=字符串替换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串替换函数</a> <a href=../../query_language/functions/conditional_functions/ title="条件函数 " class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件函数 </a> <a href=../../query_language/functions/math_functions/ title=数学函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学函数</a> <a href=../../query_language/functions/rounding_functions/ title=取整函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">取整函数</a> <a href=../../query_language/functions/array_functions/ title=数组函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数组函数</a> <a href=../../query_language/functions/splitting_merging_functions/ title=字符串拆分合并函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串拆分合并函数</a> <a href=../../query_language/functions/bit_functions/ title=位操作函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位操作函数</a> <a href=../../query_language/functions/bitmap_functions/ title=位图函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位图函数</a> <a href=../../query_language/functions/hash_functions/ title=Hash函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash函数</a> <a href=../../query_language/functions/random_functions/ title=随机函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">随机函数</a> <a href=../../query_language/functions/encoding_functions/ title=编码函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">编码函数</a> <a href=../../query_language/functions/uuid_functions/ title=UUID函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID函数</a> <a href=../../query_language/functions/url_functions/ title=URL函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL函数</a> <a href=../../query_language/functions/ip_address_functions/ title=IP函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IP函数</a> <a href=../../query_language/functions/json_functions/ title=JSON函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON函数</a> <a href=../../query_language/functions/higher_order_functions/ title=高阶函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">高阶函数</a> <a href=../../query_language/functions/ext_dict_functions/ title=字典函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典函数</a> <a href=../../query_language/functions/ym_dict_functions/ title=Yandex.Metrica字典函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica字典函数</a> <a href=../../query_language/functions/in_functions/ title=IN运算符相关函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN运算符相关函数</a> <a href=../../query_language/functions/array_join/ title=arrayJoin函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin函数</a> <a href=../../query_language/functions/geo/ title=GEO函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">GEO函数</a> <a href=../../query_language/functions/functions_for_nulls/ title=Nullable处理函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable处理函数</a> <a href=../../query_language/functions/machine_learning_functions/ title="Machine Learning Functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Machine Learning Functions</a> <a href=../../query_language/functions/other_functions/ title=其他函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他函数</a> </nav> </div> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title="Aggregate functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Aggregate functions</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/agg_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../query_language/agg_functions/reference/ title="Function reference" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Function reference</a> <a href=../../query_language/agg_functions/combinators/ title="Aggregate function combinators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aggregate function combinators</a> <a href=../../query_language/agg_functions/parametric_functions/ title="Parametric aggregate functions" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Parametric aggregate functions</a> </nav> </div> <a href=#sidebar-sidebar-6-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9 title="Table functions" class="nav-link text-light text-wrap dropdown-toggle px-0">Table functions</a> <div id=sidebar-sidebar-6-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/table_functions/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../query_language/table_functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../query_language/table_functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../query_language/table_functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../query_language/table_functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../query_language/table_functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../query_language/table_functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../query_language/table_functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../query_language/table_functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> </nav> </div> <a href=#sidebar-sidebar-6-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-10 title=Dictionaries class="nav-link text-light text-wrap dropdown-toggle px-0">Dictionaries</a> <div id=sidebar-sidebar-6-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/dicts/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=#sidebar-sidebar-6-10-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-10-2 title="External dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External dictionaries</a> <div id=sidebar-sidebar-6-10-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../query_language/dicts/external_dicts/ title="General description" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General description</a> <a href=../../query_language/dicts/external_dicts_dict/ title="Configuring an external dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuring an external dictionary</a> <a href=../../query_language/dicts/external_dicts_dict_layout/ title="Storing dictionaries in memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Storing dictionaries in memory</a> <a href=../../query_language/dicts/external_dicts_dict_lifetime/ title="Dictionary updates" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary updates</a> <a href=../../query_language/dicts/external_dicts_dict_sources/ title="Sources of external dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sources of external dictionaries</a> <a href=../../query_language/dicts/external_dicts_dict_structure/ title="Dictionary key and fields" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary key and fields</a> </nav> </div> <a href=../../query_language/dicts/internal_dicts/ title="Internal dictionaries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Internal dictionaries</a> </nav> </div> <a href=../../query_language/operators/ title=Operators class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operators</a> <a href=../../query_language/syntax/ title="General syntax" class="nav-link text-light text-wrap d-inline-block w-100 px-0">General syntax</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=运维 class="nav-link text-light text-wrap dropdown-toggle px-0">运维</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/requirements/ title=Requirements class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requirements</a> <a href=../../operations/monitoring/ title=Monitoring class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoring</a> <a href=../../operations/troubleshooting/ title=Troubleshooting class="nav-link text-light text-wrap d-inline-block w-100 px-0">Troubleshooting</a> <a href=../../operations/tips/ title="Usage recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage recommendations</a> <a href=../../operations/update/ title="ClickHouse Update" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Update</a> <a href=../../operations/access_rights/ title="Access rights" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Access rights</a> <a href=../../operations/backup/ title="Data backup" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Data backup</a> <a href=../../operations/configuration_files/ title="Configuration files" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuration files</a> <a href=../../operations/quotas/ title=Quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">Quotas</a> <a href=../../operations/system_tables/ title="System tables" class="nav-link text-light text-wrap d-inline-block w-100 px-0">System tables</a> <a href=#sidebar-sidebar-7-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-12 title="Server configuration parameters" class="nav-link text-light text-wrap dropdown-toggle px-0">Server configuration parameters</a> <div id=sidebar-sidebar-7-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server_settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/server_settings/settings/ title="Server settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Server settings</a> </nav> </div> <a href=#sidebar-sidebar-7-13 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-13 title=Settings class="nav-link text-light text-wrap dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-7-13 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/settings/permissions_for_queries/ title="Permissions for queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permissions for queries</a> <a href=../../operations/settings/query_complexity/ title="Restrictions on query complexity" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restrictions on query complexity</a> <a href=../../operations/settings/settings/ title=Settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a> <a href=../../operations/settings/settings_profiles/ title="Settings profiles" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings profiles</a> <a href=../../operations/settings/constraints_on_settings/ title="Constraints on Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Constraints on Settings</a> </nav> </div> <a href=#sidebar-sidebar-7-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-14 title=Utilities class="nav-link text-light text-wrap dropdown-toggle px-0">Utilities</a> <div id=sidebar-sidebar-7-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utils/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../operations/utils/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utils/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=常见问题 class="nav-link text-light text-wrap dropdown-toggle px-0">常见问题</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/general/ title=一般的问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的问题</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=开发者指南 class="nav-link text-light text-wrap dropdown-toggle px-0">开发者指南</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/architecture/ title=ClickHouse架构概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse架构概述</a> <a href=../../development/build/ title=如何在Linux中编译ClickHouse class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux中编译ClickHouse</a> <a href=../../development/build_osx/ title="如何在Mac OS X中编译ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Mac OS X中编译ClickHouse</a> <a href=../../development/style/ title=如何编写C++代码 class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何编写C++代码</a> <a href=../../development/tests/ title=如何运行ClickHouse测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何运行ClickHouse测试</a> <a href=../../development/contrib/ title=使用的第三方库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用的第三方库</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=新功能特性 class="nav-link text-light text-wrap dropdown-toggle px-0">新功能特性</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../roadmap/ title=路线图 class="nav-link text-light text-wrap d-inline-block w-100 px-0">路线图</a> <a href=../../changelog/ title=更新日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">更新日志</a> <a href=../../security_changelog/ title=安全更改日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">安全更改日志</a> </nav> </div> <a href=../../single/clickhouse_zh.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt=PDF版本 title=PDF版本 height=24 class="d-block mr-1 float-left"><div>PDF版本</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-5"> <div id=content> <h1 id=miscellaneous-queries>Miscellaneous Queries<a class=headerlink href=#miscellaneous-queries title="Permanent link">&para;</a></h1> <h2 id=attach>ATTACH<a class=headerlink href=#attach title="Permanent link">&para;</a></h2> <p>This query is exactly the same as <code>CREATE</code>, but</p> <ul> <li>Instead of the word <code>CREATE</code> it uses the word <code>ATTACH</code>.</li> <li>The query does not create data on the disk, but assumes that data is already in the appropriate places, and just adds information about the table to the server.<br> After executing an ATTACH query, the server will know about the existence of the table.</li> </ul> <p>If the table was previously detached (<code>DETACH</code>), meaning that its structure is known, you can use shorthand without defining the structure.</p> <div class=codehilite><pre><span></span><code><span class=n>ATTACH</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
</code></pre></div> <p>This query is used when starting the server. The server stores table metadata as files with <code>ATTACH</code> queries, which it simply runs at launch (with the exception of system tables, which are explicitly created on the server).</p> <h2 id=check-table>CHECK TABLE<a class=headerlink href=#check-table title="Permanent link">&para;</a></h2> <p>Checks if the data in the table is corrupted.</p> <div class=codehilite><pre><span></span><code><span class=k>CHECK</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span>
</code></pre></div> <p>The <code>CHECK TABLE</code> query compares actual file sizes with the expected values which are stored on the server. If the file sizes do not match the stored values, it means the data is corrupted. This can be caused, for example, by a system crash during query execution.</p> <p>The query response contains the <code>result</code> column with a single row. The row has a value of<br> <a href=../../data_types/boolean/ >Boolean</a> type:</p> <ul> <li>0 - The data in the table is corrupted.</li> <li>1 - The data maintains integrity.</li> </ul> <p>The <code>CHECK TABLE</code> query is only supported for the following table engines:</p> <ul> <li><a href=../../operations/table_engines/log/ >Log</a></li> <li><a href=../../operations/table_engines/tinylog/ >TinyLog</a></li> <li><a href=../../operations/table_engines/stripelog/ >StripeLog</a></li> </ul> <p>These engines do not provide automatic data recovery on failure. Use the <code>CHECK TABLE</code> query to track data loss in a timely manner.</p> <p>To avoid data loss use the <a href=../../operations/table_engines/mergetree/ >MergeTree</a> family tables.</p> <p><strong>If the data is corrupted</strong></p> <p>If the table is corrupted, you can copy the non-corrupted data to another table. To do this:</p> <ol> <li>Create a new table with the same structure as damaged table. To do this execute the query <code>CREATE TABLE &lt;new_table_name&gt; AS &lt;damaged_table_name&gt;</code>.</li> <li>Set the <a href=../../operations/settings/settings/#settings-max_threads>max_threads</a> value to 1 to process the next query in a single thread. To do this run the query <code>SET max_threads = 1</code>.</li> <li>Execute the query <code>INSERT INTO &lt;new_table_name&gt; SELECT * FROM &lt;damaged_table_name&gt;</code>. This request copies the non-corrupted data from the damaged table to another table. Only the data before the corrupted part will be copied.</li> <li>Restart the <code>clickhouse-client</code> to reset the <code>max_threads</code> value.</li> </ol> <h2 id=misc-describe-table>DESCRIBE TABLE<a class=headerlink href=#misc-describe-table title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>DESC</span><span class=o>|</span><span class=k>DESCRIBE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span> <span class=p>[</span><span class=k>INTO</span> <span class=n>OUTFILE</span> <span class=n>filename</span><span class=p>]</span> <span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>Returns the following <code>String</code> type columns: </p> <ul> <li><code>name</code> — Column name.</li> <li><code>type</code>— Column type.</li> <li><code>default_type</code> — Clause that is used in <a href=../create/#create-default-values>default expression</a> (<code>DEFAULT</code>, <code>MATERIALIZED</code> or <code>ALIAS</code>). Column contains an empty string, if the default expression isn't specified.</li> <li><code>default_expression</code> — Value specified in the <code>DEFAULT</code> clause.</li> <li><code>comment_expression</code> — Comment text.</li> </ul> <p>Nested data structures are output in "expanded" format. Each column is shown separately, with the name after a dot.</p> <h2 id=detach>DETACH<a class=headerlink href=#detach title="Permanent link">&para;</a></h2> <p>Deletes information about the 'name' table from the server. The server stops knowing about the table's existence.</p> <div class=codehilite><pre><span></span><code><span class=n>DETACH</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
</code></pre></div> <p>This does not delete the table's data or metadata. On the next server launch, the server will read the metadata and find out about the table again.<br> Similarly, a "detached" table can be re-attached using the <code>ATTACH</code> query (with the exception of system tables, which do not have metadata stored for them).</p> <p>There is no <code>DETACH DATABASE</code> query.</p> <h2 id=drop>DROP<a class=headerlink href=#drop title="Permanent link">&para;</a></h2> <p>This query has two types: <code>DROP DATABASE</code> and <code>DROP TABLE</code>.</p> <div class=codehilite><pre><span></span><code><span class=k>DROP</span> <span class=k>DATABASE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>db</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
</code></pre></div> <p>Deletes all tables inside the 'db' database, then deletes the 'db' database itself.<br> If <code>IF EXISTS</code> is specified, it doesn't return an error if the database doesn't exist.</p> <div class=codehilite><pre><span></span><code><span class=k>DROP</span> <span class=p>[</span><span class=k>TEMPORARY</span><span class=p>]</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
</code></pre></div> <p>Deletes the table.<br> If <code>IF EXISTS</code> is specified, it doesn't return an error if the table doesn't exist or the database doesn't exist.</p> <h2 id=exists>EXISTS<a class=headerlink href=#exists title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>EXISTS</span> <span class=p>[</span><span class=k>TEMPORARY</span><span class=p>]</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span> <span class=p>[</span><span class=k>INTO</span> <span class=n>OUTFILE</span> <span class=n>filename</span><span class=p>]</span> <span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>Returns a single <code>UInt8</code>-type column, which contains the single value <code>0</code> if the table or database doesn't exist, or <code>1</code> if the table exists in the specified database.</p> <h2 id=kill-query>KILL QUERY<a class=headerlink href=#kill-query title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=n>KILL</span> <span class=n>QUERY</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
  <span class=k>WHERE</span> <span class=o>&lt;</span><span class=k>where</span> <span class=n>expression</span> <span class=k>to</span> <span class=k>SELECT</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>processes</span> <span class=n>query</span><span class=o>&gt;</span>
  <span class=p>[</span><span class=n>SYNC</span><span class=o>|</span><span class=n>ASYNC</span><span class=o>|</span><span class=n>TEST</span><span class=p>]</span>
  <span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>Attempts to forcibly terminate the currently running queries.<br> The queries to terminate are selected from the system.processes table using the criteria defined in the <code>WHERE</code> clause of the <code>KILL</code> query.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code><span class=c1>-- Forcibly terminates all queries with the specified query_id:</span>
<span class=n>KILL</span> <span class=n>QUERY</span> <span class=k>WHERE</span> <span class=n>query_id</span><span class=o>=</span><span class=s1>&#39;2-857d-4a57-9ee0-327da5d60a90&#39;</span>

<span class=c1>-- Synchronously terminates all queries run by &#39;username&#39;:</span>
<span class=n>KILL</span> <span class=n>QUERY</span> <span class=k>WHERE</span> <span class=k>user</span><span class=o>=</span><span class=s1>&#39;username&#39;</span> <span class=n>SYNC</span>
</code></pre></div> <p>Read-only users can only stop their own queries.</p> <p>By default, the asynchronous version of queries is used (<code>ASYNC</code>), which doesn't wait for confirmation that queries have stopped.</p> <p>The synchronous version (<code>SYNC</code>) waits for all queries to stop and displays information about each process as it stops.<br> The response contains the <code>kill_status</code> column, which can take the following values:</p> <ol> <li>'finished' – The query was terminated successfully.</li> <li>'waiting' – Waiting for the query to end after sending it a signal to terminate.</li> <li>The other values ​​explain why the query can't be stopped.</li> </ol> <p>A test query (<code>TEST</code>) only checks the user's rights and displays a list of queries to stop.</p> <h2 id=kill-mutation>KILL MUTATION<a class=headerlink href=#kill-mutation title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=n>KILL</span> <span class=n>MUTATION</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
  <span class=k>WHERE</span> <span class=o>&lt;</span><span class=k>where</span> <span class=n>expression</span> <span class=k>to</span> <span class=k>SELECT</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>mutations</span> <span class=n>query</span><span class=o>&gt;</span>
  <span class=p>[</span><span class=n>TEST</span><span class=p>]</span>
  <span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>Tries to cancel and remove <a href=../alter/#alter-mutations>mutations</a> that are currently executing. Mutations to cancel are selected from the <a href=../../operations/system_tables/#system_tables-mutations><code>system.mutations</code></a> table using the filter specified by the <code>WHERE</code> clause of the <code>KILL</code> query.</p> <p>A test query (<code>TEST</code>) only checks the user's rights and displays a list of queries to stop.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code><span class=c1>-- Cancel and remove all mutations of the single table:</span>
<span class=n>KILL</span> <span class=n>MUTATION</span> <span class=k>WHERE</span> <span class=k>database</span> <span class=o>=</span> <span class=s1>&#39;default&#39;</span> <span class=k>AND</span> <span class=k>table</span> <span class=o>=</span> <span class=s1>&#39;table&#39;</span>

<span class=c1>-- Cancel the specific mutation:</span>
<span class=n>KILL</span> <span class=n>MUTATION</span> <span class=k>WHERE</span> <span class=k>database</span> <span class=o>=</span> <span class=s1>&#39;default&#39;</span> <span class=k>AND</span> <span class=k>table</span> <span class=o>=</span> <span class=s1>&#39;table&#39;</span> <span class=k>AND</span> <span class=n>mutation_id</span> <span class=o>=</span> <span class=s1>&#39;mutation_3.txt&#39;</span>
</code></pre></div> <p>The query is useful when a mutation is stuck and cannot finish (e.g. if some function in the mutation query throws an exception when applied to the data contained in the table).</p> <p>Changes already made by the mutation are not rolled back.</p> <h2 id=misc_operations-optimize>OPTIMIZE<a class=headerlink href=#misc_operations-optimize title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=n>OPTIMIZE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span> <span class=p>[</span><span class=n>PARTITION</span> <span class=n>partition</span><span class=p>]</span> <span class=p>[</span><span class=k>FINAL</span><span class=p>]</span>
</code></pre></div> <p>Asks the table engine to do something for optimization.<br> Supported only by <code>*MergeTree</code> engines, in which this query initializes a non-scheduled merge of data parts.<br> If you specify a <code>PARTITION</code>, only the specified partition will be optimized.<br> If you specify <code>FINAL</code>, optimization will be performed even when all the data is already in one part.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>OPTIMIZE can't fix the "Too many parts" error.</p> </div> <h2 id=misc_operations-rename>RENAME<a class=headerlink href=#misc_operations-rename title="Permanent link">&para;</a></h2> <p>Renames one or more tables.</p> <div class=codehilite><pre><span></span><code><span class=k>RENAME</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db11</span><span class=p>.]</span><span class=n>name11</span> <span class=k>TO</span> <span class=p>[</span><span class=n>db12</span><span class=p>.]</span><span class=n>name12</span><span class=p>,</span> <span class=p>[</span><span class=n>db21</span><span class=p>.]</span><span class=n>name21</span> <span class=k>TO</span> <span class=p>[</span><span class=n>db22</span><span class=p>.]</span><span class=n>name22</span><span class=p>,</span> <span class=p>...</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
</code></pre></div> <p>All tables are renamed under global locking. Renaming tables is a light operation. If you indicated another database after TO, the table will be moved to this database. However, the directories with databases must reside in the same file system (otherwise, an error is returned).</p> <h2 id=set>SET<a class=headerlink href=#set title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>SET</span> <span class=n>param</span> <span class=o>=</span> <span class=n>value</span>
</code></pre></div> <p>Allows you to set <code>param</code> to <code>value</code>. You can also make all the settings from the specified settings profile in a single query. To do this, specify 'profile' as the setting name. For more information, see the section "Settings".<br> The setting is made for the session, or for the server (globally) if <code>GLOBAL</code> is specified.<br> When making a global setting, the setting is not applied to sessions already running, including the current session. It will only be used for new sessions.</p> <p>When the server is restarted, global settings made using <code>SET</code> are lost.<br> To make settings that persist after a server restart, you can only use the server's config file.</p> <h2 id=show-create-table>SHOW CREATE TABLE<a class=headerlink href=#show-create-table title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>SHOW</span> <span class=k>CREATE</span> <span class=p>[</span><span class=k>TEMPORARY</span><span class=p>]</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span> <span class=p>[</span><span class=k>INTO</span> <span class=n>OUTFILE</span> <span class=n>filename</span><span class=p>]</span> <span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>Returns a single <code>String</code>-type 'statement' column, which contains a single value – the <code>CREATE</code> query used for creating the specified table.</p> <h2 id=show-databases>SHOW DATABASES<a class=headerlink href=#show-databases title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>SHOW</span> <span class=n>DATABASES</span> <span class=p>[</span><span class=k>INTO</span> <span class=n>OUTFILE</span> <span class=n>filename</span><span class=p>]</span> <span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>Prints a list of all databases.<br> This query is identical to <code>SELECT name FROM system.databases [INTO OUTFILE filename] [FORMAT format]</code>.</p> <p>See also the section "Formats".</p> <h2 id=show-processlist>SHOW PROCESSLIST<a class=headerlink href=#show-processlist title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>SHOW</span> <span class=n>PROCESSLIST</span> <span class=p>[</span><span class=k>INTO</span> <span class=n>OUTFILE</span> <span class=n>filename</span><span class=p>]</span> <span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>Outputs a list of queries currently being processed, other than <code>SHOW PROCESSLIST</code> queries.</p> <p>Prints a table containing the columns:</p> <p><strong>user</strong> – The user who made the query. Keep in mind that for distributed processing, queries are sent to remote servers under the 'default' user. SHOW PROCESSLIST shows the username for a specific query, not for a query that this query initiated.</p> <p><strong>address</strong> – The name of the host that the query was sent from. For distributed processing, on remote servers, this is the name of the query requestor host. To track where a distributed query was originally made from, look at SHOW PROCESSLIST on the query requestor server.</p> <p><strong>elapsed</strong> – The execution time, in seconds. Queries are output in order of decreasing execution time.</p> <p><strong>rows_read</strong>, <strong>bytes_read</strong> – How many rows and bytes of uncompressed data were read when processing the query. For distributed processing, data is totaled from all the remote servers. This is the data used for restrictions and quotas.</p> <p><strong>memory_usage</strong> – Current RAM usage in bytes. See the setting 'max_memory_usage'.</p> <p><strong>query</strong> – The query itself. In INSERT queries, the data for insertion is not output.</p> <p><strong>query_id</strong> – The query identifier. Non-empty only if it was explicitly defined by the user. For distributed processing, the query ID is not passed to remote servers.</p> <p>This query is nearly identical to: <code>SELECT * FROM system.processes</code>. The difference is that the <code>SHOW PROCESSLIST</code> query does not show itself in a list, when the <code>SELECT .. FROM system.processes</code> query does.</p> <p>Tip (execute in the console):</p> <div class=codehilite><pre><span></span><code>watch -n1 <span class=s2>&quot;clickhouse-client --query=&#39;SHOW PROCESSLIST&#39;&quot;</span>
</code></pre></div> <h2 id=show-tables>SHOW TABLES<a class=headerlink href=#show-tables title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>SHOW</span> <span class=p>[</span><span class=k>TEMPORARY</span><span class=p>]</span> <span class=n>TABLES</span> <span class=p>[</span><span class=k>FROM</span> <span class=n>db</span><span class=p>]</span> <span class=p>[</span><span class=k>LIKE</span> <span class=s1>&#39;pattern&#39;</span><span class=p>]</span> <span class=p>[</span><span class=k>INTO</span> <span class=n>OUTFILE</span> <span class=n>filename</span><span class=p>]</span> <span class=p>[</span><span class=n>FORMAT</span> <span class=n>format</span><span class=p>]</span>
</code></pre></div> <p>Displays a list of tables</p> <ul> <li>Tables from the current database, or from the 'db' database if "FROM db" is specified.</li> <li>All tables, or tables whose name matches the pattern, if "LIKE 'pattern'" is specified.</li> </ul> <p>This query is identical to: <code>SELECT name FROM system.tables WHERE database = 'db' [AND name LIKE 'pattern'] [INTO OUTFILE filename] [FORMAT format]</code>.</p> <p>See also the section "LIKE operator".</p> <h2 id=truncate>TRUNCATE<a class=headerlink href=#truncate title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=k>TRUNCATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
</code></pre></div> <p>Removes all data from a table. When the clause <code>IF EXISTS</code> is omitted, the query returns an error if the table does not exist.</p> <p>The <code>TRUNCATE</code> query is not supported for <a href=../../operations/table_engines/view/ >View</a>, <a href=../../operations/table_engines/file/ >File</a>, <a href=../../operations/table_engines/url/ >URL</a> and <a href=../../operations/table_engines/null/ >Null</a> table engines.</p> <h2 id=use>USE<a class=headerlink href=#use title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code><span class=n>USE</span> <span class=n>db</span>
</code></pre></div> <p>Lets you set the current database for the session.<br> The current database is used for searching for tables if the database is not explicitly defined in the query with a dot before the table name.<br> This query can't be made when using the HTTP protocol, since there is no concept of a session.</p> </div> <div id=content-footer class="text-muted pt-5"> <div class=float-right>©2016–2020 Yandex LLC</div> <div>建于 <a href=https://github.com/ClickHouse/ClickHouse/commit/a24471233fce463ffd70bff561f7842d4d0b7bd9 rel="external nofollow noreferrer" target=_blank class=text-reset>a24471233f</a></div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>目录</label> <a href=#attach title=ATTACH class="nav-link text-wrap d-inline-block w-100"> ATTACH </a> <a href=#check-table title="CHECK TABLE" class="nav-link text-wrap d-inline-block w-100"> CHECK TABLE </a> <a href=#misc-describe-table title="DESCRIBE TABLE" class="nav-link text-wrap d-inline-block w-100"> DESCRIBE TABLE </a> <a href=#detach title=DETACH class="nav-link text-wrap d-inline-block w-100"> DETACH </a> <a href=#drop title=DROP class="nav-link text-wrap d-inline-block w-100"> DROP </a> <a href=#exists title=EXISTS class="nav-link text-wrap d-inline-block w-100"> EXISTS </a> <a href=#kill-query title="KILL QUERY" class="nav-link text-wrap d-inline-block w-100"> KILL QUERY </a> <a href=#kill-mutation title="KILL MUTATION" class="nav-link text-wrap d-inline-block w-100"> KILL MUTATION </a> <a href=#misc_operations-optimize title=OPTIMIZE class="nav-link text-wrap d-inline-block w-100"> OPTIMIZE </a> <a href=#misc_operations-rename title=RENAME class="nav-link text-wrap d-inline-block w-100"> RENAME </a> <a href=#set title=SET class="nav-link text-wrap d-inline-block w-100"> SET </a> <a href=#show-create-table title="SHOW CREATE TABLE" class="nav-link text-wrap d-inline-block w-100"> SHOW CREATE TABLE </a> <a href=#show-databases title="SHOW DATABASES" class="nav-link text-wrap d-inline-block w-100"> SHOW DATABASES </a> <a href=#show-processlist title="SHOW PROCESSLIST" class="nav-link text-wrap d-inline-block w-100"> SHOW PROCESSLIST </a> <a href=#show-tables title="SHOW TABLES" class="nav-link text-wrap d-inline-block w-100"> SHOW TABLES </a> <a href=#truncate title=TRUNCATE class="nav-link text-wrap d-inline-block w-100"> TRUNCATE </a> <a href=#use title=USE class="nav-link text-wrap d-inline-block w-100"> USE </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?7bd05efd></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>